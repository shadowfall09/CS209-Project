{"items":[{"tags":["java","xml","string","exception","transform"],"comments":[{"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"score":0,"creation_date":1328455787,"post_id":9150403,"comment_id":11505412,"body_markdown":"I get no trouble when I use the com.sun.org.apache.xml.internal.serialize.XMLSerializer instead, but it gives warnings about being a sun proprietary api and possibly being removed in future releases","body":"I get no trouble when I use the com.sun.org.apache.xml.internal.serialize.XMLSerializer instead, but it gives warnings about being a sun proprietary api and possibly being removed in future releases"},{"owner":{"account_id":886478,"reputation":9207,"user_id":925806,"display_name":"Ashwinee K Jha"},"score":0,"creation_date":1328458700,"post_id":9150403,"comment_id":11505938,"body_markdown":"Please add full stack trace as that would make the problem more clear. Rather than ex.getMessage() do ex.printStackTrace().","body":"Please add full stack trace as that would make the problem more clear. Rather than ex.getMessage() do ex.printStackTrace()."},{"owner":{"account_id":923448,"reputation":2396,"user_id":954680,"accept_rate":71,"display_name":"thermz"},"score":0,"creation_date":1328466775,"post_id":9150403,"comment_id":11507519,"body_markdown":"The line where NPE is triggered is com.protocase.utils.StringHelpers.XMLElementToString(StringHelpers.java:132)\nCan you please underline in XMLElementToString method where line 132 is? Thanks","body":"The line where NPE is triggered is com.protocase.utils.StringHelpers.XMLElementToString(StringH&zwnj;&#8203;elpers.java:132) Can you please underline in XMLElementToString method where line 132 is? Thanks"},{"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"score":0,"creation_date":1328468229,"post_id":9150403,"comment_id":11507788,"body_markdown":"The line that the exception occurs at is\n\n        transformer.transform(source, result);","body":"The line that the exception occurs at is          transformer.transform(source, result);"},{"owner":{"account_id":1212717,"reputation":11317,"user_id":1180968,"accept_rate":100,"display_name":"Sajan Chandran"},"score":1,"creation_date":1329181800,"post_id":9150403,"comment_id":11685743,"body_markdown":"This may help you http://dotcommers.wordpress.com/2008/10/22/javaxxmltransformtransformerexception-javalangnullpointerexception-how-to-solve/","body":"This may help you <a href=\"http://dotcommers.wordpress.com/2008/10/22/javaxxmltransformtransformerexception-javalangnullpointerexception-how-to-solve/\" rel=\"nofollow noreferrer\">dotcommers.wordpress.com/2008/10/22/&hellip;</a>"},{"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"score":0,"creation_date":1329182522,"post_id":9150403,"comment_id":11685877,"body_markdown":"That is very interesting and somewhat enlightening. It gives me some idea as to where to look at least. This seems like a major flaw in the library however!d","body":"That is very interesting and somewhat enlightening. It gives me some idea as to where to look at least. This seems like a major flaw in the library however!d"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1329252010,"post_id":9150403,"comment_id":11705988,"body_markdown":"@vextorspace - it is a major flaw that it throws a NullPointerException when you pass it null data?  how should a text-node with null content be handled?","body":"@vextorspace - it is a major flaw that it throws a NullPointerException when you pass it null data?  how should a text-node with null content be handled?"}],"answers":[{"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":1,"creation_date":1329252971,"post_id":9283697,"comment_id":11706328,"body_markdown":"you should at least include the link to the source of this suggestion (which @SajanChandran provided in his comment to the OP).","body":"you should at least include the link to the source of this suggestion (which @SajanChandran provided in his comment to the OP)."},{"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"score":0,"creation_date":1329253192,"post_id":9283697,"comment_id":11706400,"body_markdown":"Sorry I added that in an edit after reading the link, missed the url..thought it was obvious. My main point was if it is a specific object causing the error then it is something specific about that object, invalid xml, etc","body":"Sorry I added that in an edit after reading the link, missed the url..thought it was obvious. My main point was if it is a specific object causing the error then it is something specific about that object, invalid xml, etc"},{"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"score":0,"creation_date":1329259062,"post_id":9283697,"comment_id":11708409,"body_markdown":"So the transformer can&#39;t handle null text nodes? What does a null text node look like when you are looking at the xml? Is there any way of making the transformer robust to these things?","body":"So the transformer can&#39;t handle null text nodes? What does a null text node look like when you are looking at the xml? Is there any way of making the transformer robust to these things?"},{"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"score":0,"creation_date":1329260360,"post_id":9283697,"comment_id":11708827,"body_markdown":"The offending node will likly be &quot;&lt;type/&gt;&quot; with no corresponding closing element.  It will be some element that is not always written to. The best way is to just make sure the node has an empty string, so you have &quot;&lt;type&gt;&lt;/type&gt;&quot; rather than &quot;&lt;type/&gt;&quot;","body":"The offending node will likly be &quot;&lt;type/&gt;&quot; with no corresponding closing element.  It will be some element that is not always written to. The best way is to just make sure the node has an empty string, so you have &quot;&lt;type&gt;&lt;/type&gt;&quot; rather than &quot;&lt;type/&gt;&quot;"},{"owner":{"account_id":186022,"reputation":27604,"user_id":423105,"accept_rate":68,"display_name":"LarsH"},"score":1,"creation_date":1329280826,"post_id":9283697,"comment_id":11712473,"body_markdown":"@Fraser: if that were true, the library would indeed be seriously buggy, and the OP would be at the mercy of his input. `&lt;type/&gt;` does not need a closing tag in XML; it&#39;s self-closing. A conforming XML parser will parse `&lt;type/&gt;` and `&lt;type&gt;&lt;/type&gt;` the same way.","body":"@Fraser: if that were true, the library would indeed be seriously buggy, and the OP would be at the mercy of his input. <code>&lt;type&#47;&gt;</code> does not need a closing tag in XML; it&#39;s self-closing. A conforming XML parser will parse <code>&lt;type&#47;&gt;</code> and <code>&lt;type&gt;&lt;&#47;type&gt;</code> the same way."},{"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"score":0,"creation_date":1329322583,"post_id":9283697,"comment_id":11725108,"body_markdown":"@LarsH - hmm you are right of-course - I was speculating as to why the node has a null value, what to look for in the XML (ie. a node with no value)","body":"@LarsH - hmm you are right of-course - I was speculating as to why the node has a null value, what to look for in the XML (ie. a node with no value)"},{"owner":{"account_id":186022,"reputation":27604,"user_id":423105,"accept_rate":68,"display_name":"LarsH"},"score":1,"creation_date":1329323229,"post_id":9283697,"comment_id":11725371,"body_markdown":"OK. Not a bad guess, but I&#39;m sure that if there were a not-well-formed XML file, e.g. if you had a `&lt;type&gt;` start tag without a closing tag `&lt;/type&gt;`, then the parsing step would fail, before `doc` or `e` were ever passed to XMLElementToString(). `doc` and `e` are node (tree)s, not serialized XML, so they have no tags.","body":"OK. Not a bad guess, but I&#39;m sure that if there were a not-well-formed XML file, e.g. if you had a <code>&lt;type&gt;</code> start tag without a closing tag <code>&lt;&#47;type&gt;</code>, then the parsing step would fail, before <code>doc</code> or <code>e</code> were ever passed to XMLElementToString(). <code>doc</code> and <code>e</code> are node (tree)s, not serialized XML, so they have no tags."},{"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"score":0,"creation_date":1329351466,"post_id":9283697,"comment_id":11734917,"body_markdown":"@vextorspace no worries, ooi what was the root of the issue?","body":"@vextorspace no worries, ooi what was the root of the issue?"},{"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"score":0,"creation_date":1329352099,"post_id":9283697,"comment_id":11735045,"body_markdown":"@LarsH - again true, but then whence the error? puzzling - if the error is only on a certain objects, that is the code given works as intended in all other cases, then I would look for a difference in the data structure, format, etc, of the object causing the error.","body":"@LarsH - again true, but then whence the error? puzzling - if the error is only on a certain objects, that is the code given works as intended in all other cases, then I would look for a difference in the data structure, format, etc, of the object causing the error."},{"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"score":1,"creation_date":1329396087,"post_id":9283697,"comment_id":11745536,"body_markdown":"It was in fact null text nodes - the internal sun methods in sun XMLSerializer deal with these the same as empty text nodes but not the sun XMLSerializer. I find it odd that the code would just give an exception for this case.","body":"It was in fact null text nodes - the internal sun methods in sun XMLSerializer deal with these the same as empty text nodes but not the sun XMLSerializer. I find it odd that the code would just give an exception for this case."}],"tags":[],"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"comment_count":10,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1473522593,"creation_date":1329251220,"answer_id":9283697,"question_id":9150403,"body_markdown":"I am guessing that the error is with one of your objects, either because that object is not valid XML or because the XML has an empty (null) text node rather than an empty string value.\r\n\r\nsee `java.lang.NullPointerException`\r\n\r\n`at com.sun.org.apache.xml.internal.serializer. ToUnknownStream.characters(ToUnknownStream.java:338)`\r\n\r\nBased on the link in @Sajan Chandran&#39;s comment: \r\n\r\nhttp://dotcommers.wordpress.com/2008/10/22/javaxxmltransformtransformerexception-javalangnullpointerexception-how-to-solve/\r\n\r\nIf you take a look at that you will see the code.\r\n\r\n    public void characters(String chars) throws SAXException\r\n    {\r\n      final int length = chars.length();\r\n\r\nThe issue being `char.length()` is zero because of a null text node.\r\n\r\nAs it states, to fix this simply make sure all XML nodes have a string value rather than &#39;null&#39; value.\r\n\r\nIf this does not work can you post an example of the XML object that causes the exception to be thrown. Also, can you check that the object is valid XML and that character entities, etc, are properly encoded.\r\n\r\n\r\n\r\n","title":"How do you debug an xml object that causes a transform error when writing to string?","body":"<p>I am guessing that the error is with one of your objects, either because that object is not valid XML or because the XML has an empty (null) text node rather than an empty string value.</p>\n\n<p>see <code>java.lang.NullPointerException</code></p>\n\n<p><code>at com.sun.org.apache.xml.internal.serializer. ToUnknownStream.characters(ToUnknownStream.java:338)</code></p>\n\n<p>Based on the link in @Sajan Chandran's comment: </p>\n\n<p><a href=\"http://dotcommers.wordpress.com/2008/10/22/javaxxmltransformtransformerexception-javalangnullpointerexception-how-to-solve/\" rel=\"nofollow noreferrer\">http://dotcommers.wordpress.com/2008/10/22/javaxxmltransformtransformerexception-javalangnullpointerexception-how-to-solve/</a></p>\n\n<p>If you take a look at that you will see the code.</p>\n\n<pre><code>public void characters(String chars) throws SAXException\n{\n  final int length = chars.length();\n</code></pre>\n\n<p>The issue being <code>char.length()</code> is zero because of a null text node.</p>\n\n<p>As it states, to fix this simply make sure all XML nodes have a string value rather than 'null' value.</p>\n\n<p>If this does not work can you post an example of the XML object that causes the exception to be thrown. Also, can you check that the object is valid XML and that character entities, etc, are properly encoded.</p>\n"},{"comments":[{"owner":{"account_id":28144,"reputation":15820,"user_id":74861,"accept_rate":100,"display_name":"Fraser"},"score":0,"creation_date":1329265769,"post_id":9285690,"comment_id":11710056,"body_markdown":"I think empty here means null, i.e. a node in the short form &lt;data/&gt;","body":"I think empty here means null, i.e. a node in the short form &lt;data/&gt;"},{"owner":{"account_id":186022,"reputation":27604,"user_id":423105,"accept_rate":68,"display_name":"LarsH"},"score":0,"creation_date":1329280958,"post_id":9285690,"comment_id":11712490,"body_markdown":"@Fraser, I&#39;m not sure which instance of &quot;empty&quot; you&#39;re referring to. In the above when I say &quot;null&quot; I&#39;m referring to a null pointer, which is not valid input to `transformer.transform()`. A short form XML element like `&lt;data/&gt;` should never produce a null pointer on parsing.","body":"@Fraser, I&#39;m not sure which instance of &quot;empty&quot; you&#39;re referring to. In the above when I say &quot;null&quot; I&#39;m referring to a null pointer, which is not valid input to <code>transformer.transform()</code>. A short form XML element like <code>&lt;data&#47;&gt;</code> should never produce a null pointer on parsing."},{"owner":{"account_id":186022,"reputation":27604,"user_id":423105,"accept_rate":68,"display_name":"LarsH"},"score":1,"creation_date":1329320336,"post_id":9285690,"comment_id":11724158,"body_markdown":"@Fraser, P.S., when I say &quot;empty&quot; above I&#39;m referring to a string that is an actual object (not null) but contains zero characters, i.e. `&quot;&quot;`.","body":"@Fraser, P.S., when I say &quot;empty&quot; above I&#39;m referring to a string that is an actual object (not null) but contains zero characters, i.e. <code>&quot;&quot;</code>."},{"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"score":1,"creation_date":1329341509,"post_id":9285690,"comment_id":11732044,"body_markdown":"Thanks, this was also very helpful and had some extra detail that was very nice!","body":"Thanks, this was also very helpful and had some extra detail that was very nice!"}],"tags":[],"owner":{"account_id":186022,"reputation":27604,"user_id":423105,"accept_rate":68,"display_name":"LarsH"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1329415479,"creation_date":1329261546,"answer_id":9285690,"question_id":9150403,"body_markdown":"Basically agreeing with the other answers, except:\r\n\r\nThe problem would be that you have a text node with *null* (**not** empty) character content, in your `doc` or `e` data structure.\r\n\r\nWhile Kiran&#39;s post (linked by Sajan) is helpful, I&#39;m pretty sure he&#39;s mistaken about &quot;the chars.length() was zero because there was a null text node insertion being tried.&quot; The `chars.length()` was not zero; the call to `chars.length()` threw an NPE because `chars` was null.\r\n\r\nTo find the problem, add a method call here:\r\n\r\n        if (e != null) {\r\n            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n            source = new DOMSource(e);\r\n            checkForNullTextNodes(e); // ADDED\r\n        } else {\r\n            source = new DOMSource(doc);\r\n            checkForNullTextNodes(doc);  // ADDED\r\n        }\r\n        transformer.transform(source, result); // &lt;-- Error occurs here\r\n\r\nThen define `checkForNullTextNodes(node)` to: (pseudocode)\r\n\r\n - walk through the tree with `n` for each node\r\n - check each text node for null character data\r\n\r\nE.g. (still semi-pseudocode)\r\n\r\n     if (n.getType() == org.w3c.dom.Node.TEXT_NODE &amp;&amp; n.getNodeValue() == null) {\r\n         throw new Exception(&quot;Text node with null content: &quot; +\r\n             path to this node);\r\n     }\r\n\r\nThat should help you find out where any text nodes with null character content are, which should help you figure out where they are coming from. Where are these `doc` or `e` structures being created, anyway?\r\n","title":"How do you debug an xml object that causes a transform error when writing to string?","body":"<p>Basically agreeing with the other answers, except:</p>\n\n<p>The problem would be that you have a text node with <em>null</em> (<strong>not</strong> empty) character content, in your <code>doc</code> or <code>e</code> data structure.</p>\n\n<p>While Kiran's post (linked by Sajan) is helpful, I'm pretty sure he's mistaken about \"the chars.length() was zero because there was a null text node insertion being tried.\" The <code>chars.length()</code> was not zero; the call to <code>chars.length()</code> threw an NPE because <code>chars</code> was null.</p>\n\n<p>To find the problem, add a method call here:</p>\n\n<pre><code>    if (e != null) {\n        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n        source = new DOMSource(e);\n        checkForNullTextNodes(e); // ADDED\n    } else {\n        source = new DOMSource(doc);\n        checkForNullTextNodes(doc);  // ADDED\n    }\n    transformer.transform(source, result); // &lt;-- Error occurs here\n</code></pre>\n\n<p>Then define <code>checkForNullTextNodes(node)</code> to: (pseudocode)</p>\n\n<ul>\n<li>walk through the tree with <code>n</code> for each node</li>\n<li>check each text node for null character data</li>\n</ul>\n\n<p>E.g. (still semi-pseudocode)</p>\n\n<pre><code> if (n.getType() == org.w3c.dom.Node.TEXT_NODE &amp;&amp; n.getNodeValue() == null) {\n     throw new Exception(\"Text node with null content: \" +\n         path to this node);\n }\n</code></pre>\n\n<p>That should help you find out where any text nodes with null character content are, which should help you figure out where they are coming from. Where are these <code>doc</code> or <code>e</code> structures being created, anyway?</p>\n"},{"comments":[{"owner":{"account_id":436784,"reputation":945,"user_id":824142,"accept_rate":90,"display_name":"Jeremy"},"score":1,"creation_date":1411755764,"post_id":12087598,"comment_id":40838756,"body_markdown":"This worked like a champ for me it actually helped me find an error in my xml.","body":"This worked like a champ for me it actually helped me find an error in my xml."}],"tags":[],"owner":{"account_id":1775231,"reputation":41,"user_id":1619129,"display_name":"John Fa"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1348696515,"creation_date":1345710317,"answer_id":12087598,"question_id":9150403,"body_markdown":"I agree with the other answer, here is the code I used to get rid of the `null` nodes\r\n\r\n\r\n    public void deleteNullNode(Node racine)\r\n    \t{\r\n    \t\tNodeList nl = racine.getChildNodes();\r\n    \t\tfor (int i = 0; i &lt; nl.getLength(); i++)\r\n    \t\t{\r\n    \t\t\tif (nl.item(i).getNodeType() == Node.TEXT_NODE &amp;&amp; nl.item(i).getNodeValue() == null)\r\n    \t\t\t{\r\n    \t\t\t\tnl.item(i).getParentNode().removeChild(nl.item(i));\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tdeleteNullNode(nl.item(i));\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}","title":"How do you debug an xml object that causes a transform error when writing to string?","body":"<p>I agree with the other answer, here is the code I used to get rid of the <code>null</code> nodes</p>\n\n<pre><code>public void deleteNullNode(Node racine)\n    {\n        NodeList nl = racine.getChildNodes();\n        for (int i = 0; i &lt; nl.getLength(); i++)\n        {\n            if (nl.item(i).getNodeType() == Node.TEXT_NODE &amp;&amp; nl.item(i).getNodeValue() == null)\n            {\n                nl.item(i).getParentNode().removeChild(nl.item(i));\n            }\n            else\n            {\n                deleteNullNode(nl.item(i));\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20509890,"reputation":11,"user_id":15051921,"display_name":"Santosh R Dhariwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675240984,"creation_date":1674835210,"answer_id":75260507,"question_id":9150403,"body_markdown":"Yes, I was getting **NPE** in translator. Earlier I was using **SAXON** Parser and was working ok, but when I switched to `com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl` it, started failing. So before `transformer.transform()` I called this API `deleteNullNode(Node node)` ... and it worked like charm...","title":"How do you debug an xml object that causes a transform error when writing to string?","body":"<p>Yes, I was getting <strong>NPE</strong> in translator. Earlier I was using <strong>SAXON</strong> Parser and was working ok, but when I switched to <code>com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl</code> it, started failing. So before <code>transformer.transform()</code> I called this API <code>deleteNullNode(Node node)</code> ... and it worked like charm...</p>\n"}],"owner":{"account_id":426556,"reputation":934,"user_id":807828,"accept_rate":93,"display_name":"vextorspace"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23354,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":9283697,"answer_count":4,"score":10,"last_activity_date":1675240984,"creation_date":1328455418,"question_id":9150403,"body_markdown":"I have an XML Object and when I transform it to string with \r\n\r\n\r\n    public static String XMLElementToString(Document doc, Element e) {\r\n        // --- Output XML ---\r\n        try {\r\n            TransformerFactory transFactory = TransformerFactory.newInstance();\r\n            Transformer transformer = transFactory.newTransformer();\r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n            transformer.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\n\r\n            StringWriter buffer = new StringWriter();\r\n            Result result = new StreamResult(buffer);\r\n            Source source = null;\r\n            if (e != null) {\r\n                transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n                source = new DOMSource(e);\r\n            } else {\r\n                source = new DOMSource(doc);\r\n            }\r\n            transformer.transform(source, result); // &lt;-- Error occurs here\r\n\r\n            buffer.flush();\r\n            return buffer.toString();\r\n\r\n        } catch (TransformerException ex) {\r\n            System.out.println(&quot;exception: &quot; + ex.getMessage());            \r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n\r\nI get an error with one of my objects. Using a breakpoint and looking through the xml object I cannot say why, although the TransformerException does say that the contained exception is a null pointer exception. It works on other related objects I have in the same program but I have no idea how to debug this.\r\n\r\n[[EDIT]]\r\nHere is the stack trace:\r\n\r\n    ERROR:  &#39;&#39;\r\n    javax.xml.transform.TransformerException: java.lang.NullPointerException\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:716)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\r\n\tat com.protocase.utils.StringHelpers.XMLElementToString(StringHelpers.java:132)\r\n\tat com.protocase.io.PDWriter.writePD(PDWriter.java:49)\r\n\tat com.protocase.io.PDWriter.writePDA(PDWriter.java:26)\r\n\tat com.protocase.viewer.JDesigner.OnSaveAs(JDesigner.java:1364)\r\n\tat com.protocase.viewer.JDesigner.access$000(JDesigner.java:106)\r\n\tat com.protocase.viewer.JDesigner$34.actionPerformed(JDesigner.java:722)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)\r\n\tat java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6288)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3267)\r\n\tat java.awt.Component.processEvent(Component.java:6053)\r\n\tat java.awt.Container.processEvent(Container.java:2041)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4651)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2099)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4481)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2085)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2478)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4481)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)\r\n\tat java.awt.EventQueue.access$000(EventQueue.java:84)\r\n\tat java.awt.EventQueue$1.run(EventQueue.java:602)\r\n\tat java.awt.EventQueue$1.run(EventQueue.java:600)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\r\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)\r\n\tat java.awt.EventQueue$2.run(EventQueue.java:616)\r\n\tat java.awt.EventQueue$2.run(EventQueue.java:614)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:613)\r\n\tat com.protocase.viewer.EventQueueProxy.dispatchEvent(JDesigner.java:2338)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:122)\r\n    Caused by: java.lang.NullPointerException\r\n\tat com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(ToUnknownStream.java:338)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:240)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:132)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:661)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:707)\r\n    \t... 45 more\r\n    ---------\r\n    java.lang.NullPointerException\r\n\tat com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(ToUnknownStream.java:338)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:240)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:132)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:661)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:707)\r\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\r\n\tat com.protocase.utils.StringHelpers.XMLElementToString(StringHelpers.java:132)\r\n\tat com.protocase.io.PDWriter.writePD(PDWriter.java:49)\r\n\tat com.protocase.io.PDWriter.writePDA(PDWriter.java:26)\r\n\tat com.protocase.viewer.JDesigner.OnSaveAs(JDesigner.java:1364)\r\n\tat com.protocase.viewer.JDesigner.access$000(JDesigner.java:106)\r\n\tat com.protocase.viewer.JDesigner$34.actionPerformed(JDesigner.java:722)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)\r\n\tat java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6288)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3267)\r\n\tat java.awt.Component.processEvent(Component.java:6053)\r\n\tat java.awt.Container.processEvent(Container.java:2041)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4651)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2099)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4481)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2085)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2478)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4481)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)\r\n\tat java.awt.EventQueue.access$000(EventQueue.java:84)\r\n\tat java.awt.EventQueue$1.run(EventQueue.java:602)\r\n\tat java.awt.EventQueue$1.run(EventQueue.java:600)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\r\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)\r\n\tat java.awt.EventQueue$2.run(EventQueue.java:616)\r\n\tat java.awt.EventQueue$2.run(EventQueue.java:614)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat     java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:613)\r\n\tat com.protocase.viewer.EventQueueProxy.dispatchEvent(JDesigner.java:2338)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:122)","title":"How do you debug an xml object that causes a transform error when writing to string?","body":"<p>I have an XML Object and when I transform it to string with </p>\n\n<pre><code>public static String XMLElementToString(Document doc, Element e) {\n    // --- Output XML ---\n    try {\n        TransformerFactory transFactory = TransformerFactory.newInstance();\n        Transformer transformer = transFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n        transformer.setOutputProperty(OutputKeys.ENCODING, \"UTF-8\");\n\n        StringWriter buffer = new StringWriter();\n        Result result = new StreamResult(buffer);\n        Source source = null;\n        if (e != null) {\n            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n            source = new DOMSource(e);\n        } else {\n            source = new DOMSource(doc);\n        }\n        transformer.transform(source, result); // &lt;-- Error occurs here\n\n        buffer.flush();\n        return buffer.toString();\n\n    } catch (TransformerException ex) {\n        System.out.println(\"exception: \" + ex.getMessage());            \n    }\n    return \"\";\n}\n</code></pre>\n\n<p>I get an error with one of my objects. Using a breakpoint and looking through the xml object I cannot say why, although the TransformerException does say that the contained exception is a null pointer exception. It works on other related objects I have in the same program but I have no idea how to debug this.</p>\n\n<p>[[EDIT]]\nHere is the stack trace:</p>\n\n<pre><code>ERROR:  ''\njavax.xml.transform.TransformerException: java.lang.NullPointerException\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:716)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\nat com.protocase.utils.StringHelpers.XMLElementToString(StringHelpers.java:132)\nat com.protocase.io.PDWriter.writePD(PDWriter.java:49)\nat com.protocase.io.PDWriter.writePDA(PDWriter.java:26)\nat com.protocase.viewer.JDesigner.OnSaveAs(JDesigner.java:1364)\nat com.protocase.viewer.JDesigner.access$000(JDesigner.java:106)\nat com.protocase.viewer.JDesigner$34.actionPerformed(JDesigner.java:722)\nat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)\nat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)\nat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)\nat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)\nat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)\nat java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)\nat java.awt.Component.processMouseEvent(Component.java:6288)\nat javax.swing.JComponent.processMouseEvent(JComponent.java:3267)\nat java.awt.Component.processEvent(Component.java:6053)\nat java.awt.Container.processEvent(Container.java:2041)\nat java.awt.Component.dispatchEventImpl(Component.java:4651)\nat java.awt.Container.dispatchEventImpl(Container.java:2099)\nat java.awt.Component.dispatchEvent(Component.java:4481)\nat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)\nat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)\nat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)\nat java.awt.Container.dispatchEventImpl(Container.java:2085)\nat java.awt.Window.dispatchEventImpl(Window.java:2478)\nat java.awt.Component.dispatchEvent(Component.java:4481)\nat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)\nat java.awt.EventQueue.access$000(EventQueue.java:84)\nat java.awt.EventQueue$1.run(EventQueue.java:602)\nat java.awt.EventQueue$1.run(EventQueue.java:600)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\nat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)\nat java.awt.EventQueue$2.run(EventQueue.java:616)\nat java.awt.EventQueue$2.run(EventQueue.java:614)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\nat java.awt.EventQueue.dispatchEvent(EventQueue.java:613)\nat com.protocase.viewer.EventQueueProxy.dispatchEvent(JDesigner.java:2338)\nat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)\nat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)\nat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)\nat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)\nat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)\nat java.awt.EventDispatchThread.run(EventDispatchThread.java:122)\nCaused by: java.lang.NullPointerException\nat com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(ToUnknownStream.java:338)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:240)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:132)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:661)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:707)\n    ... 45 more\n---------\njava.lang.NullPointerException\nat com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(ToUnknownStream.java:338)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:240)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:132)\nat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:661)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:707)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\nat com.protocase.utils.StringHelpers.XMLElementToString(StringHelpers.java:132)\nat com.protocase.io.PDWriter.writePD(PDWriter.java:49)\nat com.protocase.io.PDWriter.writePDA(PDWriter.java:26)\nat com.protocase.viewer.JDesigner.OnSaveAs(JDesigner.java:1364)\nat com.protocase.viewer.JDesigner.access$000(JDesigner.java:106)\nat com.protocase.viewer.JDesigner$34.actionPerformed(JDesigner.java:722)\nat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)\nat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)\nat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)\nat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)\nat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)\nat java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)\nat java.awt.Component.processMouseEvent(Component.java:6288)\nat javax.swing.JComponent.processMouseEvent(JComponent.java:3267)\nat java.awt.Component.processEvent(Component.java:6053)\nat java.awt.Container.processEvent(Container.java:2041)\nat java.awt.Component.dispatchEventImpl(Component.java:4651)\nat java.awt.Container.dispatchEventImpl(Container.java:2099)\nat java.awt.Component.dispatchEvent(Component.java:4481)\nat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)\nat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)\nat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)\nat java.awt.Container.dispatchEventImpl(Container.java:2085)\nat java.awt.Window.dispatchEventImpl(Window.java:2478)\nat java.awt.Component.dispatchEvent(Component.java:4481)\nat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)\nat java.awt.EventQueue.access$000(EventQueue.java:84)\nat java.awt.EventQueue$1.run(EventQueue.java:602)\nat java.awt.EventQueue$1.run(EventQueue.java:600)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\nat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)\nat java.awt.EventQueue$2.run(EventQueue.java:616)\nat java.awt.EventQueue$2.run(EventQueue.java:614)\nat java.security.AccessController.doPrivileged(Native Method)\nat     java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\nat java.awt.EventQueue.dispatchEvent(EventQueue.java:613)\nat com.protocase.viewer.EventQueueProxy.dispatchEvent(JDesigner.java:2338)\nat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)\nat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)\nat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)\nat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)\nat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)\nat java.awt.EventDispatchThread.run(EventDispatchThread.java:122)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","jar"],"comments":[{"owner":{"account_id":6586022,"reputation":76,"user_id":5088766,"display_name":"mcarn"},"score":0,"creation_date":1675201955,"post_id":75303214,"comment_id":132877153,"body_markdown":"Do you run your jar file like `$ java -jar target/app.war`?","body":"Do you run your jar file like <code>$ java -jar target&#47;app.war</code>?"},{"owner":{"account_id":13790888,"reputation":21,"user_id":9953404,"display_name":"jvivo"},"score":0,"creation_date":1675203118,"post_id":75303214,"comment_id":132877506,"body_markdown":"@MaiGoL7 I run it like this \n` java -jar .\\InterconnectingFlightsApplication.jar `\nI am using Windows by the way","body":"@MaiGoL7 I run it like this  ` java -jar .\\InterconnectingFlightsApplication.jar ` I am using Windows by the way"}],"answers":[{"tags":[],"owner":{"account_id":13790888,"reputation":21,"user_id":9953404,"display_name":"jvivo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675207902,"creation_date":1675207902,"answer_id":75304205,"question_id":75303214,"body_markdown":"Created a new JAR using `mvn package`, which turned out to work. VSCode&#39;s Java Project Manager doesn&#39;t seem to build the JAR correctly","title":"SpringBoot application shuts down when running using JAR, but works well when running from cmd or VSCode","body":"<p>Created a new JAR using <code>mvn package</code>, which turned out to work. VSCode's Java Project Manager doesn't seem to build the JAR correctly</p>\n"},{"tags":[],"owner":{"account_id":22229891,"reputation":9,"user_id":16466250,"display_name":"Daudi Mabula"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675240798,"creation_date":1675240798,"answer_id":75307483,"question_id":75303214,"body_markdown":"Make sure the java version defined in your pom file match or lower than that installed in your computer for example if installed java 16 you need version 16 or lower in your dependence file. some IDE use the builtin java SDKs or JDK plugins.","title":"SpringBoot application shuts down when running using JAR, but works well when running from cmd or VSCode","body":"<p>Make sure the java version defined in your pom file match or lower than that installed in your computer for example if installed java 16 you need version 16 or lower in your dependence file. some IDE use the builtin java SDKs or JDK plugins.</p>\n"}],"owner":{"account_id":13790888,"reputation":21,"user_id":9953404,"display_name":"jvivo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75304205,"answer_count":2,"score":1,"last_activity_date":1675240798,"creation_date":1675199672,"question_id":75303214,"body_markdown":"I am trying to run a SpringBoot application from a JAR file, which I have built using VSCode&#39;s Project Manager from Java.\r\n\r\nThe app runs smoothly when running from VSCode, or when running from the command line, using \r\n```\r\nmvn spring-boot:run\r\n```\r\n\r\nThis is my Main Class file:\r\n\r\n\r\n```\r\npackage com.jvc.interconnectingflights.app;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.ComponentScan;\r\n\r\n@SpringBootApplication\r\n@ComponentScan(&quot;com.jvc.interconnectingflights&quot;)\r\npublic class InterconnectingFlightsApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(InterconnectingFlightsApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nThis is my pom.xml file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.jvc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;interconnecting-flights&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;interconnecting-flights&lt;/name&gt;\r\n\t&lt;description&gt;SpringBoot app&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.22&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nThis is the output I am getting when running from the JAR:\r\n\r\n\r\n```\r\n22:05:28.287 [main] INFO com.jvc.interconnectingflights.app.InterconnectingFlightsApplication - Started InterconnectingFlightsApplication in 3.102 seconds (process running for 3.46)\r\n22:05:28.318 [SpringApplicationShutdownHook] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@78e94dcf, started on Tue Jan 31 22:05:25 CET 2023\r\n```\r\n\r\n\r\nI have tried all the answers from related posts, but still no luck. I would really appreciate any advice!\r\n\r\n\r\n\r\nTried answers from this post and related ones:\r\n\r\n[https://stackoverflow.com/questions/22380119/why-does-my-spring-boot-app-always-shutdown-immediately-after-starting](https://www.stackoverflow.com/)\r\n\r\n","title":"SpringBoot application shuts down when running using JAR, but works well when running from cmd or VSCode","body":"<p>I am trying to run a SpringBoot application from a JAR file, which I have built using VSCode's Project Manager from Java.</p>\n<p>The app runs smoothly when running from VSCode, or when running from the command line, using</p>\n<pre><code>mvn spring-boot:run\n</code></pre>\n<p>This is my Main Class file:</p>\n<pre><code>package com.jvc.interconnectingflights.app;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@SpringBootApplication\n@ComponentScan(&quot;com.jvc.interconnectingflights&quot;)\npublic class InterconnectingFlightsApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(InterconnectingFlightsApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>This is my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.jvc&lt;/groupId&gt;\n    &lt;artifactId&gt;interconnecting-flights&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;interconnecting-flights&lt;/name&gt;\n    &lt;description&gt;SpringBoot app&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.22&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>This is the output I am getting when running from the JAR:</p>\n<pre><code>22:05:28.287 [main] INFO com.jvc.interconnectingflights.app.InterconnectingFlightsApplication - Started InterconnectingFlightsApplication in 3.102 seconds (process running for 3.46)\n22:05:28.318 [SpringApplicationShutdownHook] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@78e94dcf, started on Tue Jan 31 22:05:25 CET 2023\n</code></pre>\n<p>I have tried all the answers from related posts, but still no luck. I would really appreciate any advice!</p>\n<p>Tried answers from this post and related ones:</p>\n<p><a href=\"https://www.stackoverflow.com/\">https://stackoverflow.com/questions/22380119/why-does-my-spring-boot-app-always-shutdown-immediately-after-starting</a></p>\n"},{"tags":["java","android","kotlin","google-play","android-tv"],"answers":[{"tags":[],"owner":{"account_id":25554903,"reputation":3,"user_id":19338636,"display_name":"ultimatical"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675240735,"creation_date":1675240735,"answer_id":75307471,"question_id":75281183,"body_markdown":"It was non-obvious, but all you need is to add Android TV form factor to the Google Play Console:\r\n**Release** -&gt; **Advanced Settings** -&gt; **Form Factors** -&gt; **Add**\r\n\r\n[How to add the form factor to the Play Console][1]\r\n\r\nI waited over 24 hours before my application was approved. \r\nNow all TV devices are available.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yIRYx.jpg","title":"App is not compatible with TVs on closed testing in the Google Play. This item is not compatible with your device","body":"<p>It was non-obvious, but all you need is to add Android TV form factor to the Google Play Console:\n<strong>Release</strong> -&gt; <strong>Advanced Settings</strong> -&gt; <strong>Form Factors</strong> -&gt; <strong>Add</strong></p>\n<p><a href=\"https://i.stack.imgur.com/yIRYx.jpg\" rel=\"nofollow noreferrer\">How to add the form factor to the Play Console</a></p>\n<p>I waited over 24 hours before my application was approved.\nNow all TV devices are available.</p>\n"}],"owner":{"account_id":25554903,"reputation":3,"user_id":19338636,"display_name":"ultimatical"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75307471,"answer_count":1,"score":0,"last_activity_date":1675240735,"creation_date":1675062838,"question_id":75281183,"body_markdown":"I&#39;m developing an app for Android TV and TV-boxes.\r\nMy problem is that Android TV devices are available for installing my app from Google Play for **internal** testing, but NOT available for **closed** testing (but it still can be installed on the smartphones).\r\n\r\nScreenshot: Google Play install dialog\r\n\r\n![Screenshot: Google Play install dialog](https://i.stack.imgur.com/FccLl.jpg)\r\n\r\nMy app starting from StartScreenActivity (it&#39;s splash screen).\r\nThe QUERY_ALL_PACKAGES is required for my app and declared.\r\n\r\n**AndroidManifest.xml:**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.PACKAGE_USAGE_STATS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot;\r\n        tools:ignore=&quot;QueryAllPackagesPermission&quot; /&gt;\r\n\r\n    &lt;uses-feature\r\n        android:name=&quot;android.software.leanback&quot;\r\n        android:required=&quot;false&quot; /&gt;\r\n    &lt;uses-feature\r\n        android:name=&quot;android.hardware.touchscreen&quot;\r\n        android:required=&quot;false&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:banner=&quot;@mipmap/appbanner&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.ui.presentation.StartScreenActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:launchMode=&quot;singleTask&quot;\r\n            android:screenOrientation=&quot;landscape&quot;\r\n            android:theme=&quot;@style/SplashTheme&quot;&gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LEANBACK_LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n        &lt;/activity&gt;\r\n        &lt;activity\r\n            android:name=&quot;.ui.presentation.MainActivity&quot;\r\n            android:windowSoftInputMode=&quot;adjustPan&quot;\r\n            android:screenOrientation=&quot;landscape&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nOn the internal testing it works like expected, but no one can to install an app to TV on the close testing. Setting the **android.software.leanback** as required not helped - it just making all others devices not available for install. \r\nWhat am I doing wrong? Please advise.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1N5te.jpg","title":"App is not compatible with TVs on closed testing in the Google Play. This item is not compatible with your device","body":"<p>I'm developing an app for Android TV and TV-boxes.\nMy problem is that Android TV devices are available for installing my app from Google Play for <strong>internal</strong> testing, but NOT available for <strong>closed</strong> testing (but it still can be installed on the smartphones).</p>\n<p>Screenshot: Google Play install dialog</p>\n<p><img src=\"https://i.stack.imgur.com/FccLl.jpg\" alt=\"Screenshot: Google Play install dialog\" /></p>\n<p>My app starting from StartScreenActivity (it's splash screen).\nThe QUERY_ALL_PACKAGES is required for my app and declared.</p>\n<p><strong>AndroidManifest.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.PACKAGE_USAGE_STATS&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot;\n        tools:ignore=&quot;QueryAllPackagesPermission&quot; /&gt;\n\n    &lt;uses-feature\n        android:name=&quot;android.software.leanback&quot;\n        android:required=&quot;false&quot; /&gt;\n    &lt;uses-feature\n        android:name=&quot;android.hardware.touchscreen&quot;\n        android:required=&quot;false&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:banner=&quot;@mipmap/appbanner&quot;&gt;\n        &lt;activity\n            android:name=&quot;.ui.presentation.StartScreenActivity&quot;\n            android:exported=&quot;true&quot;\n            android:launchMode=&quot;singleTask&quot;\n            android:screenOrientation=&quot;landscape&quot;\n            android:theme=&quot;@style/SplashTheme&quot;&gt;\n\n            &lt;intent-filter&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LEANBACK_LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=&quot;.ui.presentation.MainActivity&quot;\n            android:windowSoftInputMode=&quot;adjustPan&quot;\n            android:screenOrientation=&quot;landscape&quot;\n            android:exported=&quot;false&quot;&gt;\n\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>On the internal testing it works like expected, but no one can to install an app to TV on the close testing. Setting the <strong>android.software.leanback</strong> as required not helped - it just making all others devices not available for install.\nWhat am I doing wrong? Please advise.</p>\n"},{"tags":["java","spring-boot","redis"],"answers":[{"comments":[{"owner":{"account_id":155026,"reputation":7508,"user_id":371392,"accept_rate":67,"display_name":"Web User"},"score":0,"creation_date":1494363328,"post_id":43879577,"comment_id":74794392,"body_markdown":"Since I am using Redis locally (fresh install, no configuration changes), I thought Spring Boot Redis starter assumes those defaults. I am not using a cluster. The only Redis properties that are applicable would be `spring.redis.host` (localhost) and `spring.redis.port` (6379).","body":"Since I am using Redis locally (fresh install, no configuration changes), I thought Spring Boot Redis starter assumes those defaults. I am not using a cluster. The only Redis properties that are applicable would be <code>spring.redis.host</code> (localhost) and <code>spring.redis.port</code> (6379)."},{"owner":{"account_id":2529186,"reputation":3484,"user_id":2197837,"accept_rate":25,"display_name":"Praneeth Ramesh"},"score":0,"creation_date":1494365695,"post_id":43879577,"comment_id":74795487,"body_markdown":"Is your redis service running. Were you able to connect the service through redis-cli? Your code looks good...","body":"Is your redis service running. Were you able to connect the service through redis-cli? Your code looks good..."},{"owner":{"account_id":155026,"reputation":7508,"user_id":371392,"accept_rate":67,"display_name":"Web User"},"score":0,"creation_date":1494370258,"post_id":43879577,"comment_id":74796990,"body_markdown":"Hi @PraneethRamesh my redis server is running. Verifications I ran included `telnet localhost 6379` *(was able to telnet into that port)* and writing a testing GET based method in the controller to open a socket using `Socket s = new Socket(&quot;localhost&quot;, 6379); return s.isConnected();` *(which yielded true)*. So I know Redis is running and accessible to the JVM. And yes, I am able to connect to service with redis-cli.","body":"Hi @PraneethRamesh my redis server is running. Verifications I ran included <code>telnet localhost 6379</code> <i>(was able to telnet into that port)</i> and writing a testing GET based method in the controller to open a socket using <code>Socket s = new Socket(&quot;localhost&quot;, 6379); return s.isConnected();</code> <i>(which yielded true)</i>. So I know Redis is running and accessible to the JVM. And yes, I am able to connect to service with redis-cli."}],"tags":[],"owner":{"account_id":66458,"reputation":1770,"user_id":194932,"display_name":"Raphael"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494362836,"creation_date":1494362836,"answer_id":43879577,"question_id":43879279,"body_markdown":"You need to configure your redis server information using the application.properties: \r\n\r\n\r\n    # REDIS (RedisProperties)\r\n    spring.redis.cluster.nodes= # Comma-separated list of &quot;host:port&quot;\r\n    spring.redis.database=0 # Database index\r\n    spring.redis.url= # Connection URL, \r\n    spring.redis.host=localhost # Redis server host.\r\n    spring.redis.password= # Login password of the redis server.\r\n    spring.redis.ssl=false # Enable SSL support.\r\n    spring.redis.port=6379 # Redis server port.\r\n\r\nSpring data docs: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html#REDIS","title":"Spring Boot Redis configuration not working","body":"<p>You need to configure your redis server information using the application.properties: </p>\n\n<pre><code># REDIS (RedisProperties)\nspring.redis.cluster.nodes= # Comma-separated list of \"host:port\"\nspring.redis.database=0 # Database index\nspring.redis.url= # Connection URL, \nspring.redis.host=localhost # Redis server host.\nspring.redis.password= # Login password of the redis server.\nspring.redis.ssl=false # Enable SSL support.\nspring.redis.port=6379 # Redis server port.\n</code></pre>\n\n<p>Spring data docs: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html#REDIS\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html#REDIS</a></p>\n"},{"tags":[],"owner":{"account_id":155026,"reputation":7508,"user_id":371392,"accept_rate":67,"display_name":"Web User"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1494434713,"creation_date":1494434713,"answer_id":43898383,"question_id":43879279,"body_markdown":"This was a proxy related problem, where even access to localhost was somehow being curtailed. Once I disabled the proxy settings, Redis health was `UP`! So the problem is solved. I did not have to add any property to `application.properties` and neither did I have to explicitly configure anything in the Spring Boot application class, because Spring Boot and the Redis Starter auto-configures based on Redis defaults (as applicable in my development environment). I just added the following to the `pom.xml`:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\nand the following to the `@RestController` annotated class, and Spring Boot auto-wired as needed (awesome!).\r\n\r\n\t@Autowired\r\n\tprivate RedisTemplate&lt;String, String&gt; redisTemplate;\r\n\r\nTo publish a simple message to a channel, this single line of code was sufficient for validating the setup:\r\n\r\n    this.redisTemplate.convertAndSend(channelName, &quot;hello world&quot;);\r\n\r\nI appreciate all the comments, which were helpful in backing up my checks. ","title":"Spring Boot Redis configuration not working","body":"<p>This was a proxy related problem, where even access to localhost was somehow being curtailed. Once I disabled the proxy settings, Redis health was <code>UP</code>! So the problem is solved. I did not have to add any property to <code>application.properties</code> and neither did I have to explicitly configure anything in the Spring Boot application class, because Spring Boot and the Redis Starter auto-configures based on Redis defaults (as applicable in my development environment). I just added the following to the <code>pom.xml</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and the following to the <code>@RestController</code> annotated class, and Spring Boot auto-wired as needed (awesome!).</p>\n\n<pre><code>@Autowired\nprivate RedisTemplate&lt;String, String&gt; redisTemplate;\n</code></pre>\n\n<p>To publish a simple message to a channel, this single line of code was sufficient for validating the setup:</p>\n\n<pre><code>this.redisTemplate.convertAndSend(channelName, \"hello world\");\n</code></pre>\n\n<p>I appreciate all the comments, which were helpful in backing up my checks. </p>\n"},{"tags":[],"owner":{"account_id":3343918,"reputation":776,"user_id":2809468,"display_name":"Omid Mohebbi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1552477832,"creation_date":1552477832,"answer_id":55141230,"question_id":43879279,"body_markdown":"I done a simple example with redis and spring boot \r\n\r\nFirst I installed redis on docker:\r\n\r\n**$ docker run --name some-redis -d redis redis-server --appendonly yes**\r\n\r\nThen I Used this code for receiver :\r\n\r\n    import java.util.concurrent.CountDownLatch;\r\n    \r\n    public class Receiver {\r\n        private static final Logger LOGGER = LoggerFactory.getLogger(Receiver.class);\r\n    \r\n        private CountDownLatch latch;\r\n    \r\n        @Autowired\r\n        public Receiver(CountDownLatch latch) {\r\n            this.latch = latch;\r\n        }\r\n    \r\n        public void receiveMessage(String message) {\r\n            LOGGER.info(&quot;Received &lt;&quot; + message + &quot;&gt;&quot;);\r\n            latch.countDown();\r\n        }\r\n    \r\n    }\r\n\r\nAnd this is my spring boot app and my listener:\r\n\r\n\r\n\r\n\r\n    @SpringBootApplication\r\n    // after add security library then it is need to use security configuration.\r\n    @ComponentScan(&quot;omid.spring.example.springexample.security&quot;)\r\n    public class RunSpring {\r\n        private static final Logger LOGGER = LoggerFactory.getLogger(RunSpring.class);\r\n    \r\n    \r\n        public  static   void main(String[] args) throws InterruptedException {\r\n            ConfigurableApplicationContext contex =  SpringApplication.run(RunSpring.class, args);\r\n        }\r\n    \r\n        @Autowired\r\n        private ApplicationContext context;\r\n    \r\n        @RestController\r\n        public class SimpleController{\r\n    \r\n            @RequestMapping(&quot;/test&quot;)\r\n            public String getHelloWorld(){\r\n    \r\n                StringRedisTemplate template = context.getBean(StringRedisTemplate.class);\r\n                CountDownLatch latch = context.getBean(CountDownLatch.class);\r\n    \r\n                LOGGER.info(&quot;Sending message...&quot;);\r\n    \r\n                Thread t = new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        for (int i = 0 ;  i &lt; 100 ; i++) {\r\n                            template.convertAndSend(&quot;chat&quot;, i + &quot; =&gt; Hello from Redis!&quot;);\r\n                            try {\r\n                                Thread.sleep(100);\r\n                            } catch (InterruptedException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n    \r\n                        }\r\n    \r\n                    }\r\n                });\r\n                t.start();\r\n    \r\n                try {\r\n                    latch.await();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n    \r\n    \r\n                return &quot;hello world 1&quot;;\r\n            }\r\n        }\r\n    \r\n        ///////////////////////////////////////////////////////////////\r\n    \r\n    \r\n        @Bean\r\n        RedisMessageListenerContainer container(RedisConnectionFactory connectionFactory,\r\n                                                MessageListenerAdapter listenerAdapter) {\r\n    \r\n            RedisMessageListenerContainer container = new RedisMessageListenerContainer();\r\n            container.setConnectionFactory(connectionFactory);\r\n            container.addMessageListener(listenerAdapter, new PatternTopic(&quot;chat&quot;));\r\n    \r\n            return container;\r\n        }\r\n    \r\n        @Bean\r\n        MessageListenerAdapter listenerAdapter(Receiver receiver) {\r\n            return new MessageListenerAdapter(receiver, &quot;receiveMessage&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        Receiver receiver(CountDownLatch latch) {\r\n            return new Receiver(latch);\r\n        }\r\n    \r\n        @Bean\r\n        CountDownLatch latch() {\r\n            return new CountDownLatch(1);\r\n        }\r\n    \r\n        @Bean\r\n        StringRedisTemplate template(RedisConnectionFactory connectionFactory) {\r\n            return new StringRedisTemplate(connectionFactory);\r\n        }\r\n    }\r\n\r\nThe important point is the redis IP. if you installed it on docker like me then\r\nyou should set ip address in application.properties like this:\r\n**spring.redis.host=172.17.0.4**\r\n\r\nI put all my spring examples on github [here][1]\r\n\r\n\r\nIn addition I used redis stat to monitor redis. it is simple monitoring. \r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://github.com/omidmohebbise/springexample\r\n  [2]: https://i.stack.imgur.com/LYfyO.png","title":"Spring Boot Redis configuration not working","body":"<p>I done a simple example with redis and spring boot </p>\n\n<p>First I installed redis on docker:</p>\n\n<p><strong>$ docker run --name some-redis -d redis redis-server --appendonly yes</strong></p>\n\n<p>Then I Used this code for receiver :</p>\n\n<pre><code>import java.util.concurrent.CountDownLatch;\n\npublic class Receiver {\n    private static final Logger LOGGER = LoggerFactory.getLogger(Receiver.class);\n\n    private CountDownLatch latch;\n\n    @Autowired\n    public Receiver(CountDownLatch latch) {\n        this.latch = latch;\n    }\n\n    public void receiveMessage(String message) {\n        LOGGER.info(\"Received &lt;\" + message + \"&gt;\");\n        latch.countDown();\n    }\n\n}\n</code></pre>\n\n<p>And this is my spring boot app and my listener:</p>\n\n<pre><code>@SpringBootApplication\n// after add security library then it is need to use security configuration.\n@ComponentScan(\"omid.spring.example.springexample.security\")\npublic class RunSpring {\n    private static final Logger LOGGER = LoggerFactory.getLogger(RunSpring.class);\n\n\n    public  static   void main(String[] args) throws InterruptedException {\n        ConfigurableApplicationContext contex =  SpringApplication.run(RunSpring.class, args);\n    }\n\n    @Autowired\n    private ApplicationContext context;\n\n    @RestController\n    public class SimpleController{\n\n        @RequestMapping(\"/test\")\n        public String getHelloWorld(){\n\n            StringRedisTemplate template = context.getBean(StringRedisTemplate.class);\n            CountDownLatch latch = context.getBean(CountDownLatch.class);\n\n            LOGGER.info(\"Sending message...\");\n\n            Thread t = new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    for (int i = 0 ;  i &lt; 100 ; i++) {\n                        template.convertAndSend(\"chat\", i + \" =&gt; Hello from Redis!\");\n                        try {\n                            Thread.sleep(100);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n\n                    }\n\n                }\n            });\n            t.start();\n\n            try {\n                latch.await();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n\n\n            return \"hello world 1\";\n        }\n    }\n\n    ///////////////////////////////////////////////////////////////\n\n\n    @Bean\n    RedisMessageListenerContainer container(RedisConnectionFactory connectionFactory,\n                                            MessageListenerAdapter listenerAdapter) {\n\n        RedisMessageListenerContainer container = new RedisMessageListenerContainer();\n        container.setConnectionFactory(connectionFactory);\n        container.addMessageListener(listenerAdapter, new PatternTopic(\"chat\"));\n\n        return container;\n    }\n\n    @Bean\n    MessageListenerAdapter listenerAdapter(Receiver receiver) {\n        return new MessageListenerAdapter(receiver, \"receiveMessage\");\n    }\n\n    @Bean\n    Receiver receiver(CountDownLatch latch) {\n        return new Receiver(latch);\n    }\n\n    @Bean\n    CountDownLatch latch() {\n        return new CountDownLatch(1);\n    }\n\n    @Bean\n    StringRedisTemplate template(RedisConnectionFactory connectionFactory) {\n        return new StringRedisTemplate(connectionFactory);\n    }\n}\n</code></pre>\n\n<p>The important point is the redis IP. if you installed it on docker like me then\nyou should set ip address in application.properties like this:\n<strong>spring.redis.host=172.17.0.4</strong></p>\n\n<p>I put all my spring examples on github <a href=\"https://github.com/omidmohebbise/springexample\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>In addition I used redis stat to monitor redis. it is simple monitoring. \n<a href=\"https://i.stack.imgur.com/LYfyO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LYfyO.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":4390503,"reputation":663,"user_id":3579061,"display_name":"NuttLoose"},"score":0,"creation_date":1679390101,"post_id":75307197,"comment_id":133708711,"body_markdown":"Thanks a lot. looks like config got changed for spring boot 3","body":"Thanks a lot. looks like config got changed for spring boot 3"}],"tags":[],"owner":{"account_id":5344055,"reputation":71,"user_id":4260087,"display_name":"Sanditha Shetty"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1675240647,"creation_date":1675239149,"answer_id":75307197,"question_id":43879279,"body_markdown":"[Spring data redis properties are updated][1], e.g. `spring.redis.host` is now `spring.data.redis.host`.\r\n\r\n [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#REDIS\r\n","title":"Spring Boot Redis configuration not working","body":"<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#REDIS\" rel=\"nofollow noreferrer\">Spring data redis properties are updated</a>, e.g. <code>spring.redis.host</code> is now <code>spring.data.redis.host</code>.</p>\n"}],"owner":{"account_id":155026,"reputation":7508,"user_id":371392,"accept_rate":67,"display_name":"Web User"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23065,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":43898383,"answer_count":4,"score":1,"last_activity_date":1675240647,"creation_date":1494361775,"question_id":43879279,"body_markdown":"I am developing a Spring Boot [web] REST-style application with a `ServletInitializer` (since it needs to be deployed to an existing Tomcat server). It has a `@RestController` with a method that, when invoked, needs to write to a Redis `pub-sub channel`. I have the Redis server running on localhost (default port, no password). The relevant part of the POM file has the required starter dependency:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nWhen I deploy the WAR and hit the endpoint `http://localhost:8080/springBootApp/health`, I get this response:\r\n\r\n    {\r\n      &quot;status&quot;: &quot;DOWN&quot;,\r\n      &quot;diskSpace&quot;: {\r\n        &quot;status&quot;: &quot;UP&quot;,\r\n        &quot;total&quot;: 999324516352,\r\n        &quot;free&quot;: 691261681664,\r\n        &quot;threshold&quot;: 10485760\r\n      },\r\n      &quot;redis&quot;: {\r\n        &quot;status&quot;: &quot;DOWN&quot;,\r\n        &quot;error&quot;: &quot;org.springframework.data.redis.RedisConnectionFailureException: java.net.SocketTimeoutException: Read timed out; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out&quot;\r\n      }\r\n    }\r\n\r\nI added the following to my Spring Boot application class:\r\n\r\n\t@Bean\r\n\tJedisConnectionFactory jedisConnectionFactory() {\r\n\t    return new JedisConnectionFactory();\r\n\t}\r\n\t \r\n\t@Bean\r\n\tpublic RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n\t    RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;String, Object&gt;();\r\n\t    template.setConnectionFactory(jedisConnectionFactory());\r\n\t    return template;\r\n\t}\r\n\r\nI also tried adding the following to my `@RestController` before executing some test Redis code, but I get the same error as above in the stack trace:\r\n\r\n\t@Autowired\r\n\tprivate RedisTemplate&lt;String, String&gt; redisTemplate;\r\n\r\n**Edit** (2017-05-09)\r\nMy understanding is that Spring Boot Redis starter assumes the default values of `spring.redis.host=localhost` and `spring.redis.port=6379`, I still added the two to `application.properties`, but that did not fill the gap.\r\n\r\n**Update** (2017-05-10)\r\nI added an answer to this thread.","title":"Spring Boot Redis configuration not working","body":"<p>I am developing a Spring Boot [web] REST-style application with a <code>ServletInitializer</code> (since it needs to be deployed to an existing Tomcat server). It has a <code>@RestController</code> with a method that, when invoked, needs to write to a Redis <code>pub-sub channel</code>. I have the Redis server running on localhost (default port, no password). The relevant part of the POM file has the required starter dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>When I deploy the WAR and hit the endpoint <code>http://localhost:8080/springBootApp/health</code>, I get this response:</p>\n\n<pre><code>{\n  \"status\": \"DOWN\",\n  \"diskSpace\": {\n    \"status\": \"UP\",\n    \"total\": 999324516352,\n    \"free\": 691261681664,\n    \"threshold\": 10485760\n  },\n  \"redis\": {\n    \"status\": \"DOWN\",\n    \"error\": \"org.springframework.data.redis.RedisConnectionFailureException: java.net.SocketTimeoutException: Read timed out; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out\"\n  }\n}\n</code></pre>\n\n<p>I added the following to my Spring Boot application class:</p>\n\n<pre><code>@Bean\nJedisConnectionFactory jedisConnectionFactory() {\n    return new JedisConnectionFactory();\n}\n\n@Bean\npublic RedisTemplate&lt;String, Object&gt; redisTemplate() {\n    RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;String, Object&gt;();\n    template.setConnectionFactory(jedisConnectionFactory());\n    return template;\n}\n</code></pre>\n\n<p>I also tried adding the following to my <code>@RestController</code> before executing some test Redis code, but I get the same error as above in the stack trace:</p>\n\n<pre><code>@Autowired\nprivate RedisTemplate&lt;String, String&gt; redisTemplate;\n</code></pre>\n\n<p><strong>Edit</strong> (2017-05-09)\nMy understanding is that Spring Boot Redis starter assumes the default values of <code>spring.redis.host=localhost</code> and <code>spring.redis.port=6379</code>, I still added the two to <code>application.properties</code>, but that did not fill the gap.</p>\n\n<p><strong>Update</strong> (2017-05-10)\nI added an answer to this thread.</p>\n"},{"tags":["java","android","gradle"],"comments":[{"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"score":0,"creation_date":1674658656,"post_id":75196524,"comment_id":132761869,"body_markdown":"Would something like this do it for you, to exclude/include what you dont/do want?  https://stackoverflow.com/questions/19575474/gradle-how-to-exclude-a-particular-package-from-a-jar","body":"Would something like this do it for you, to exclude/include what you dont/do want?  <a href=\"https://stackoverflow.com/questions/19575474/gradle-how-to-exclude-a-particular-package-from-a-jar\" title=\"gradle how to exclude a particular package from a jar\">stackoverflow.com/questions/19575474/&hellip;</a>"},{"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"score":0,"creation_date":1674663457,"post_id":75196524,"comment_id":132763674,"body_markdown":"Will check jar and sourceSets but I think it focus on what not to pack. In case of gradle dependency (or .aar file), we already have a compiled packaged jar (classes.jar) file.","body":"Will check jar and sourceSets but I think it focus on what not to pack. In case of gradle dependency (or .aar file), we already have a compiled packaged jar (classes.jar) file."}],"answers":[{"tags":[],"owner":{"account_id":2337701,"reputation":840,"user_id":2049647,"display_name":"ATutorMe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675232114,"creation_date":1675232114,"answer_id":75306293,"question_id":75196524,"body_markdown":"Using gradle constraints might be the answer: https://docs.gradle.org/current/userguide/dependency_constraints.html#sec:adding-constraints-transitive-deps\r\n\r\n\r\nYou could then have your fixed version of the library in `mavenLocal`, your own private Nexus repo, or a `libs` directory and specify the version number of your fixed version in the constraint.","title":"How to exclude a file when including any dependency or replace the file during packaging?","body":"<p>Using gradle constraints might be the answer: <a href=\"https://docs.gradle.org/current/userguide/dependency_constraints.html#sec:adding-constraints-transitive-deps\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/dependency_constraints.html#sec:adding-constraints-transitive-deps</a></p>\n<p>You could then have your fixed version of the library in <code>mavenLocal</code>, your own private Nexus repo, or a <code>libs</code> directory and specify the version number of your fixed version in the constraint.</p>\n"},{"comments":[{"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"score":1,"creation_date":1675259445,"post_id":75307423,"comment_id":132889678,"body_markdown":"This can solve. However, their are few disadvantages. 1. It will looks like its your code. 2. Updating the library at the same time could be tedious. In case if somebody made some changes in the module file. We need to keep track of it.","body":"This can solve. However, their are few disadvantages. 1. It will looks like its your code. 2. Updating the library at the same time could be tedious. In case if somebody made some changes in the module file. We need to keep track of it."}],"tags":[],"owner":{"account_id":1940329,"reputation":380,"user_id":1746655,"display_name":"MisterAnt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675240413,"creation_date":1675240413,"answer_id":75307423,"question_id":75196524,"body_markdown":"For me the best solution is modify the problem library.\r\n\r\nSTEPS:\r\n\r\n1. Clone the library.\r\n\r\n2. Use like local module in your app.\r\n\r\n3. Keep the package name and fix the bugs.\r\n\r\nPROBLEM SOLVED!\r\n\r\n","title":"How to exclude a file when including any dependency or replace the file during packaging?","body":"<p>For me the best solution is modify the problem library.</p>\n<p>STEPS:</p>\n<ol>\n<li><p>Clone the library.</p>\n</li>\n<li><p>Use like local module in your app.</p>\n</li>\n<li><p>Keep the package name and fix the bugs.</p>\n</li>\n</ol>\n<p>PROBLEM SOLVED!</p>\n"}],"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1675240413,"creation_date":1674334782,"question_id":75196524,"body_markdown":"I am using a third-party dependency which doesn&#39;t handle a special use case and is been crashing on multi-process applications. \r\n\r\nIs there any way we can remove the file during packaging so that we can create and put a new fixed file in the application code with the same package name as of third party? \r\n\r\nIf we are not removing the original file from the third-party dependency, we are getting multiple files defined in different dex. Is there any way to remove the original file from external dependency or replace the file during packaging? \r\n\r\nI have tried the same using \r\n\r\n[ResolutionStrategy][1]: This doesn&#39;t support file-level changes.\r\n\r\n[DuplicatesStrategy][2]: Not able to get enough resources to solve the requirement.\r\n\r\n\r\nThere can be the solution of downloading the `.aar` or `.jar` file and manually removing the file and then repackaging it. But looking forward to knowing if there is any direct solution that gradle or any other tool support this context.\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.ResolutionStrategy.html\r\n  [2]: https://docs.gradle.org/current/javadoc/org/gradle/api/file/DuplicatesStrategy.html","title":"How to exclude a file when including any dependency or replace the file during packaging?","body":"<p>I am using a third-party dependency which doesn't handle a special use case and is been crashing on multi-process applications.</p>\n<p>Is there any way we can remove the file during packaging so that we can create and put a new fixed file in the application code with the same package name as of third party?</p>\n<p>If we are not removing the original file from the third-party dependency, we are getting multiple files defined in different dex. Is there any way to remove the original file from external dependency or replace the file during packaging?</p>\n<p>I have tried the same using</p>\n<p><a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.ResolutionStrategy.html\" rel=\"nofollow noreferrer\">ResolutionStrategy</a>: This doesn't support file-level changes.</p>\n<p><a href=\"https://docs.gradle.org/current/javadoc/org/gradle/api/file/DuplicatesStrategy.html\" rel=\"nofollow noreferrer\">DuplicatesStrategy</a>: Not able to get enough resources to solve the requirement.</p>\n<p>There can be the solution of downloading the <code>.aar</code> or <code>.jar</code> file and manually removing the file and then repackaging it. But looking forward to knowing if there is any direct solution that gradle or any other tool support this context.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"answers":[{"comments":[{"owner":{"account_id":14688781,"reputation":143,"user_id":10608027,"display_name":"Sky Tracker"},"score":0,"creation_date":1541440162,"post_id":53156370,"comment_id":93209647,"body_markdown":"Thank for the answer, I try your solution.","body":"Thank for the answer, I try your solution."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1541441052,"post_id":53156370,"comment_id":93210031,"body_markdown":"Ok, keep me posted.","body":"Ok, keep me posted."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1541490260,"post_id":53156370,"comment_id":93225045,"body_markdown":"Hi Sky! Have you tried my solution above, does it work?","body":"Hi Sky! Have you tried my solution above, does it work?"},{"owner":{"account_id":960314,"reputation":20995,"user_id":984830,"accept_rate":93,"display_name":"Nick Cardoso"},"score":0,"creation_date":1541755534,"post_id":53156370,"comment_id":93332750,"body_markdown":"This answer is incomplete as it misses a big point (the date solves the issue, but doesn&#39;t explain [*why* the behaviour happens](https://stackoverflow.com/a/48491561/984830)).\n\nThe snapshot provides data from the local cache as well as mutations from the remote. So if you only wan&#39;t changes (implying this is a repeated query) it&#39;s not fetching (and charging for) everything again. It&#39;s getting just the mutations as expected, you just have to handle it appropriately.","body":"This answer is incomplete as it misses a big point (the date solves the issue, but doesn&#39;t explain <a href=\"https://stackoverflow.com/a/48491561/984830\"><i>why</i> the behaviour happens</a>).  The snapshot provides data from the local cache as well as mutations from the remote. So if you only wan&#39;t changes (implying this is a repeated query) it&#39;s not fetching (and charging for) everything again. It&#39;s getting just the mutations as expected, you just have to handle it appropriately."},{"owner":{"account_id":3887321,"reputation":956,"user_id":3218362,"display_name":"Raj"},"score":0,"creation_date":1546861415,"post_id":53156370,"comment_id":94980293,"body_markdown":"Hi @AlexMamo,thanks, do you have any other solution for this, it is not working in my case : https://stackoverflow.com/questions/54073457/how-to-ignore-the-first-playload-of-addsnapshotlistener-in-firestore-for-android?noredirect=1#comment94979831_54073457","body":"Hi @AlexMamo,thanks, do you have any other solution for this, it is not working in my case : <a href=\"https://stackoverflow.com/questions/54073457/how-to-ignore-the-first-playload-of-addsnapshotlistener-in-firestore-for-android?noredirect=1#comment94979831_54073457\" title=\"how to ignore the first playload of addsnapshotlistener in firestore for android\">stackoverflow.com/questions/54073457/&hellip;</a>"},{"owner":{"account_id":2089941,"reputation":2087,"user_id":3097425,"accept_rate":55,"display_name":"C&#237;cero Moura"},"score":0,"creation_date":1620087539,"post_id":53156370,"comment_id":119092333,"body_markdown":"I&#39;m using this approach, but I do not get the REMOVED change type when the listener starts fro the first time.","body":"I&#39;m using this approach, but I do not get the REMOVED change type when the listener starts fro the first time."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1620118935,"post_id":53156370,"comment_id":119099748,"body_markdown":"@C&#237;ceroMoura Without seeing your code, it&#39;s hard to say why you have that behavior. So please post a new question using its own [MCVE](https://stackoverflow.com/help/mcve), so I and other Firebase developers can help you.","body":"@C&#237;ceroMoura Without seeing your code, it&#39;s hard to say why you have that behavior. So please post a new question using its own <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, so I and other Firebase developers can help you."},{"owner":{"account_id":2089941,"reputation":2087,"user_id":3097425,"accept_rate":55,"display_name":"C&#237;cero Moura"},"score":0,"creation_date":1620345672,"post_id":53156370,"comment_id":119180946,"body_markdown":"@AlexMamo, here is my question: https://stackoverflow.com/questions/67427355/firestore-does-not-notify-remove-change-type-when-querying-documents","body":"@AlexMamo, here is my question: <a href=\"https://stackoverflow.com/questions/67427355/firestore-does-not-notify-remove-change-type-when-querying-documents\" title=\"firestore does not notify remove change type when querying documents\">stackoverflow.com/questions/67427355/&hellip;</a>"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":8,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1541756770,"creation_date":1541428149,"answer_id":53156370,"question_id":53156109,"body_markdown":"When you are listening for changes in Cloud Firestore for realtime changes, using Firestore Query&#39;s [addSnapshotListener()](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query.html#addSnapshotListener(com.google.firebase.firestore.EventListener%3Ccom.google.firebase.firestore.QuerySnapshot%3E)) method, it:\r\n\r\n&gt; Starts listening to this query.\r\n\r\nWhich basically means that first time you attach the listener, you get all documents that correspond to that particular query. Furthermore, everytime a property within a document changes, you are notified according to that change. Obviously, this is happening only if the listener remains active and is not removed.\r\n\r\nUnfortunately, Firestore listeners don&#39;t work that way, so you cannot skip that &quot;case ADDED&quot;. What you can do instead, is to add add under each user object a `Date` property (**[this](https://stackoverflow.com/questions/48474957/servertimestamp-is-allways-null-on-firebase-firestore/48475027)** is how you can add it) and query your database on client, according to this new property, for all documents that have changed since a previous time.\r\n\r\nAccording to Nick Cardoso&#39;s comment, for future visitors that might ask why this behaviour happens, is because the reason he mentioned in his comment. I also recommend see Doug Stevenson&#39;s answer from this [post](https://stackoverflow.com/questions/48489895/firestore-query-reads-all-the-documents-again-from-database-when-only-one-is-m/48491561#48491561), for a better understanding.","title":"How to skip initial data and trigger only new updates in Firestore Firebase?","body":"<p>When you are listening for changes in Cloud Firestore for realtime changes, using Firestore Query's <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query.html#addSnapshotListener(com.google.firebase.firestore.EventListener%3Ccom.google.firebase.firestore.QuerySnapshot%3E)\" rel=\"noreferrer\">addSnapshotListener()</a> method, it:</p>\n\n<blockquote>\n  <p>Starts listening to this query.</p>\n</blockquote>\n\n<p>Which basically means that first time you attach the listener, you get all documents that correspond to that particular query. Furthermore, everytime a property within a document changes, you are notified according to that change. Obviously, this is happening only if the listener remains active and is not removed.</p>\n\n<p>Unfortunately, Firestore listeners don't work that way, so you cannot skip that \"case ADDED\". What you can do instead, is to add add under each user object a <code>Date</code> property (<strong><a href=\"https://stackoverflow.com/questions/48474957/servertimestamp-is-allways-null-on-firebase-firestore/48475027\">this</a></strong> is how you can add it) and query your database on client, according to this new property, for all documents that have changed since a previous time.</p>\n\n<p>According to Nick Cardoso's comment, for future visitors that might ask why this behaviour happens, is because the reason he mentioned in his comment. I also recommend see Doug Stevenson's answer from this <a href=\"https://stackoverflow.com/questions/48489895/firestore-query-reads-all-the-documents-again-from-database-when-only-one-is-m/48491561#48491561\">post</a>, for a better understanding.</p>\n"},{"comments":[{"owner":{"account_id":8075635,"reputation":2057,"user_id":6086782,"display_name":"varun"},"score":0,"creation_date":1603351103,"post_id":54074967,"comment_id":114010837,"body_markdown":"The AtomicBoolean you use is as good as a default volatile boolean value, because you are not using any special atomic methods of the class, so this code does not prevent race conditions during any parallel executions! Refer: https://stackoverflow.com/a/39352047/6086782","body":"The AtomicBoolean you use is as good as a default volatile boolean value, because you are not using any special atomic methods of the class, so this code does not prevent race conditions during any parallel executions! Refer: <a href=\"https://stackoverflow.com/a/39352047/6086782\">stackoverflow.com/a/39352047/6086782</a>"},{"owner":{"account_id":8075635,"reputation":2057,"user_id":6086782,"display_name":"varun"},"score":1,"creation_date":1603351114,"post_id":54074967,"comment_id":114010844,"body_markdown":"Note: This solution is very very superficial, all it is doing is ignoring the first fetch of data using an (if...else) statement. The only solution to the OP&#39;s question is to wait for the firestore team to give us an API which can make the initial snapshot optional.","body":"Note: This solution is very very superficial, all it is doing is ignoring the first fetch of data using an (if...else) statement. The only solution to the OP&#39;s question is to wait for the firestore team to give us an API which can make the initial snapshot optional."}],"tags":[],"owner":{"account_id":3887321,"reputation":956,"user_id":3218362,"display_name":"Raj"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1546866189,"creation_date":1546866189,"answer_id":54074967,"question_id":53156109,"body_markdown":"Here is a solution working for me:\r\nuse\r\n\r\n  [1]: https://stackoverflow.com/a/49804089\r\n\r\n    AtomicBoolean isFirstListener = new AtomicBoolean(true);\r\nand then on event method\r\n\r\n    if (isFirstListener.get()) {\r\n                        isFirstListener.set(false);\r\n                        //TODO Handle the entire list. \r\n                        return;\r\n                    }\r\n\r\nHere is a sample code from my project:\r\n\r\n   \r\n\r\n     final AtomicBoolean isFirstListener = new AtomicBoolean(true);\r\n     mDb.collection(&quot;conversation_log&quot;).document(room_id).collection(&quot;messages&quot;).orderBy(&quot;sent_at&quot;)\r\n        .addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\r\n            @Override\r\n            public void onEvent(@Nullable QuerySnapshot value2, @Nullable FirebaseFirestoreException e) {\r\n            if (isFirstListener.get()) {\r\n                isFirstListener.set(false);\r\n                //TODO Handle the entire list.\r\n                return;\r\n            }\r\n        }\r\n    });\r\n\r\nreference: [answer][1]","title":"How to skip initial data and trigger only new updates in Firestore Firebase?","body":"<p>Here is a solution working for me:\nuse</p>\n\n<pre><code>AtomicBoolean isFirstListener = new AtomicBoolean(true);\n</code></pre>\n\n<p>and then on event method</p>\n\n<pre><code>if (isFirstListener.get()) {\n                    isFirstListener.set(false);\n                    //TODO Handle the entire list. \n                    return;\n                }\n</code></pre>\n\n<p>Here is a sample code from my project:</p>\n\n<pre><code> final AtomicBoolean isFirstListener = new AtomicBoolean(true);\n mDb.collection(\"conversation_log\").document(room_id).collection(\"messages\").orderBy(\"sent_at\")\n    .addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\n        @Override\n        public void onEvent(@Nullable QuerySnapshot value2, @Nullable FirebaseFirestoreException e) {\n        if (isFirstListener.get()) {\n            isFirstListener.set(false);\n            //TODO Handle the entire list.\n            return;\n        }\n    }\n});\n</code></pre>\n\n<p>reference: <a href=\"https://stackoverflow.com/a/49804089\">answer</a></p>\n"},{"comments":[{"owner":{"account_id":1185980,"reputation":2864,"user_id":1159930,"accept_rate":50,"display_name":"Markymark"},"score":0,"creation_date":1608854355,"post_id":57403486,"comment_id":115702623,"body_markdown":"Thank you! This should be the accepted solution!","body":"Thank you! This should be the accepted solution!"},{"owner":{"account_id":9862925,"reputation":960,"user_id":7305269,"accept_rate":56,"display_name":"Ian W"},"score":0,"creation_date":1613082521,"post_id":57403486,"comment_id":116974694,"body_markdown":"Although this didn&#39;t really work for me, I thought I would mention that this is now done in the following way `snapshot.metadata.fromCache` as the API has changed.","body":"Although this didn&#39;t really work for me, I thought I would mention that this is now done in the following way <code>snapshot.metadata.fromCache</code> as the API has changed."},{"owner":{"account_id":1426616,"reputation":67,"user_id":1349950,"accept_rate":67,"display_name":"Ghelle"},"score":0,"creation_date":1639765507,"post_id":57403486,"comment_id":124440810,"body_markdown":"Thanks a lot! Short and very useful solution! This helps to not mess up the code with booleans fields, showing if it is the first run.","body":"Thanks a lot! Short and very useful solution! This helps to not mess up the code with booleans fields, showing if it is the first run."}],"tags":[],"owner":{"account_id":8614338,"reputation":480,"user_id":6451794,"display_name":"Artur Gniewowski"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1565221344,"creation_date":1565221344,"answer_id":57403486,"question_id":53156109,"body_markdown":"There is an option to check if the querySnapshot is from a cache, changes return false\r\n```\r\nif(querySnapshot.getMetadata().isFromCache()) return\r\n```","title":"How to skip initial data and trigger only new updates in Firestore Firebase?","body":"<p>There is an option to check if the querySnapshot is from a cache, changes return false</p>\n\n<pre><code>if(querySnapshot.getMetadata().isFromCache()) return\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18674578,"reputation":1,"user_id":13612531,"display_name":"akshit tyagi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675239105,"creation_date":1675239105,"answer_id":75307187,"question_id":53156109,"body_markdown":"Found a work around for this given use case, it is possible to skip the initial data and get only updates. The workaround is including a server timestamp in your structure and build your query to fetch only the data that has timestamp greater than the current time.\r\n\r\n    val ref = db.collection(&quot;Messages&quot;).document(&quot;Client_ID&quot;)\r\n            .collection(&quot;Private&quot;)\r\n            .orderBy(&quot;timestamp&quot;)\r\n            .whereGreaterThan(&quot;timestamp&quot;,Calendar.getInstance().time)\r\n\r\n    //Add snapshot listener\r\n    ref.addSnapshotListener { snapshot , e -&gt;\r\n                if (snapshot != null) {\r\n                    Log.d(&quot;TAG&quot;, &quot;Current data: ${snapshot.documents.size}&quot;)\r\n                    for(document in snapshot.documents){\r\n                        Log.e(&quot;Document Data&quot;,document.data.toString())\r\n                    }\r\n                }\r\n            }\r\n\r\nSo, the query won&#39;t return any data in the initial build, but will listen to the document changes. As soon as timestamp of a document changes, you&#39;ll be notified about that change. Then you can check if the data exists in your list (if you&#39;re looking for modifications, or if it&#39;s a new document added)\r\n\r\nJust update timestamp of the document when your write any changes. As shown below :\r\n\r\n    val message = hashMapOf&lt;String,Any&gt;(\r\n            &quot;timestamp&quot; to FieldValue.serverTimestamp(),\r\n            &quot;id&quot; to userId,\r\n            &quot;data&quot; to data,\r\n        )\r\n    db.collection(&quot;Messages&quot;).document(&quot;Client_ID&quot;)\r\n            .collection(&quot;Private&quot;)\r\n            .document().set(message)\r\n\r\n","title":"How to skip initial data and trigger only new updates in Firestore Firebase?","body":"<p>Found a work around for this given use case, it is possible to skip the initial data and get only updates. The workaround is including a server timestamp in your structure and build your query to fetch only the data that has timestamp greater than the current time.</p>\n<pre><code>val ref = db.collection(&quot;Messages&quot;).document(&quot;Client_ID&quot;)\n        .collection(&quot;Private&quot;)\n        .orderBy(&quot;timestamp&quot;)\n        .whereGreaterThan(&quot;timestamp&quot;,Calendar.getInstance().time)\n\n//Add snapshot listener\nref.addSnapshotListener { snapshot , e -&gt;\n            if (snapshot != null) {\n                Log.d(&quot;TAG&quot;, &quot;Current data: ${snapshot.documents.size}&quot;)\n                for(document in snapshot.documents){\n                    Log.e(&quot;Document Data&quot;,document.data.toString())\n                }\n            }\n        }\n</code></pre>\n<p>So, the query won't return any data in the initial build, but will listen to the document changes. As soon as timestamp of a document changes, you'll be notified about that change. Then you can check if the data exists in your list (if you're looking for modifications, or if it's a new document added)</p>\n<p>Just update timestamp of the document when your write any changes. As shown below :</p>\n<pre><code>val message = hashMapOf&lt;String,Any&gt;(\n        &quot;timestamp&quot; to FieldValue.serverTimestamp(),\n        &quot;id&quot; to userId,\n        &quot;data&quot; to data,\n    )\ndb.collection(&quot;Messages&quot;).document(&quot;Client_ID&quot;)\n        .collection(&quot;Private&quot;)\n        .document().set(message)\n</code></pre>\n"}],"owner":{"account_id":14688781,"reputation":143,"user_id":10608027,"display_name":"Sky Tracker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6124,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":53156370,"answer_count":4,"score":10,"last_activity_date":1675239105,"creation_date":1541427223,"question_id":53156109,"body_markdown":"I&#39;ve searched everywhere with no luck. I want to query Firestore to get all users WHERE type is admin. Something like:\r\n\r\n    SELECT * FROM users WHERE type=admin\r\n\r\nbut **only** when the property `total` is changing. If I&#39;m using:\r\n\r\n    users.whereEqualTo(&quot;type&quot;, &quot;admin&quot;).addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\r\n        @Override\r\n        public void onEvent(@Nullable QuerySnapshot snapshots, @Nullable FirebaseFirestoreException e) {\r\n            for (DocumentChange dc : snapshots.getDocumentChanges()) {\r\n                switch (dc.getType()) {\r\n                    case ADDED:\r\n                        //Not trigger\r\n                        break;\r\n                    case MODIFIED:\r\n                        //Trigger\r\n                        break;\r\n                    case REMOVED:\r\n                        //\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\nThe case ADDED is triggered first time when I query and when the `total` is changed `case MODIFIED` is triggered again (this is what is want). I want only changes and not the all initial data, I don&#39;t need it. How to get it?\r\n\r\nPlease help me, is the last part of my project. How to skip is `case ADDED`?","title":"How to skip initial data and trigger only new updates in Firestore Firebase?","body":"<p>I've searched everywhere with no luck. I want to query Firestore to get all users WHERE type is admin. Something like:</p>\n\n<pre><code>SELECT * FROM users WHERE type=admin\n</code></pre>\n\n<p>but <strong>only</strong> when the property <code>total</code> is changing. If I'm using:</p>\n\n<pre><code>users.whereEqualTo(\"type\", \"admin\").addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\n    @Override\n    public void onEvent(@Nullable QuerySnapshot snapshots, @Nullable FirebaseFirestoreException e) {\n        for (DocumentChange dc : snapshots.getDocumentChanges()) {\n            switch (dc.getType()) {\n                case ADDED:\n                    //Not trigger\n                    break;\n                case MODIFIED:\n                    //Trigger\n                    break;\n                case REMOVED:\n                    //\n                    break;\n            }\n        }\n    }\n});\n</code></pre>\n\n<p>The case ADDED is triggered first time when I query and when the <code>total</code> is changed <code>case MODIFIED</code> is triggered again (this is what is want). I want only changes and not the all initial data, I don't need it. How to get it?</p>\n\n<p>Please help me, is the last part of my project. How to skip is <code>case ADDED</code>?</p>\n"},{"tags":["java","vaadin","vaadin8","vaadin-charts"],"answers":[{"tags":[],"owner":{"account_id":11926310,"reputation":627,"user_id":8727518,"display_name":"Michael Kroka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675238091,"creation_date":1675238091,"answer_id":75307067,"question_id":75299580,"body_markdown":"After quite some time I found the answer, I had to set the label formatting function in the `PlotOptionsPie` object:\r\n\r\n    PlotOptionsPie plot = new PlotOptionsPie();\r\n    plot.setInnerSize(&quot;60%&quot;);  // hollow inside -&gt; &quot;donut&quot; chart\r\n    plot.getDataLabels().setFormatter(&quot;function() { return this.point.name + &#39; sample&#39;; }&quot;);\r\n    chart.getConfiguration().setPlotOptions(plot);\r\n\r\nThe result:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SYdGd.png","title":"Vaadin pie chart label formatter not working","body":"<p>After quite some time I found the answer, I had to set the label formatting function in the <code>PlotOptionsPie</code> object:</p>\n<pre><code>PlotOptionsPie plot = new PlotOptionsPie();\nplot.setInnerSize(&quot;60%&quot;);  // hollow inside -&gt; &quot;donut&quot; chart\nplot.getDataLabels().setFormatter(&quot;function() { return this.point.name + ' sample'; }&quot;);\nchart.getConfiguration().setPlotOptions(plot);\n</code></pre>\n<p>The result:</p>\n<p><a href=\"https://i.stack.imgur.com/SYdGd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SYdGd.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11926310,"reputation":627,"user_id":8727518,"display_name":"Michael Kroka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675238091,"creation_date":1675179844,"question_id":75299580,"body_markdown":"I have a chart in Vaadin 8 with the following formatter for y axis labels:\r\n\r\n    chart.getConfiguration().getyAxis().getLabels()\r\n        .setFormatter(&quot;function() { return this.point.name + &#39; sample&#39;; }&quot;);\r\n\r\nI can&#39;t seem to get it to work correctly, as the chart always displays *only* the `point.name` part and not the `&#39; sample&#39;` part. I did the same for the tooltip where it works:\r\n\r\n    chart.getConfiguration().getTooltip()\r\n            .setFormatter(&quot;function() { return this.point.name + &#39; sample&#39;; }&quot;);\r\n\r\nScreenshot for confirmation:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zQxD0.png","title":"Vaadin pie chart label formatter not working","body":"<p>I have a chart in Vaadin 8 with the following formatter for y axis labels:</p>\n<pre><code>chart.getConfiguration().getyAxis().getLabels()\n    .setFormatter(&quot;function() { return this.point.name + ' sample'; }&quot;);\n</code></pre>\n<p>I can't seem to get it to work correctly, as the chart always displays <em>only</em> the <code>point.name</code> part and not the <code>' sample'</code> part. I did the same for the tooltip where it works:</p>\n<pre><code>chart.getConfiguration().getTooltip()\n        .setFormatter(&quot;function() { return this.point.name + ' sample'; }&quot;);\n</code></pre>\n<p>Screenshot for confirmation:\n<a href=\"https://i.stack.imgur.com/zQxD0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zQxD0.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","list","sorting","dynamic","hashmap"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1675086039,"post_id":75285176,"comment_id":132846429,"body_markdown":"No one can help you if you don&#39;t outline what you&#39;re actually trying to do. Namely an example Map showing the difficulty you&#39;re having / example data.","body":"No one can help you if you don&#39;t outline what you&#39;re actually trying to do. Namely an example Map showing the difficulty you&#39;re having / example data."},{"owner":{"account_id":4029950,"reputation":621,"user_id":4511243,"accept_rate":61,"display_name":"Frank"},"score":0,"creation_date":1675087554,"post_id":75285176,"comment_id":132846960,"body_markdown":"You are right, sorry I did not add an example immediately. I added an example Map in json format to make it more readable.","body":"You are right, sorry I did not add an example immediately. I added an example Map in json format to make it more readable."},{"owner":{"account_id":4029950,"reputation":621,"user_id":4511243,"accept_rate":61,"display_name":"Frank"},"score":0,"creation_date":1675087744,"post_id":75285176,"comment_id":132847028,"body_markdown":"Sorry maybe I did not make it clear. I have a list of fields and I want to sort my maps based on the order of those fields. So for example first on destination, and then for maps with same destination, sort by speed, and so on.","body":"Sorry maybe I did not make it clear. I have a list of fields and I want to sort my maps based on the order of those fields. So for example first on destination, and then for maps with same destination, sort by speed, and so on."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675088947,"creation_date":1675088947,"answer_id":75285823,"question_id":75285176,"body_markdown":"I would change the approach. Instead of chaining `thenComparing()`, write a normal Comparator implementation, depending on the list of fields.\r\n```\r\npublic class MapComparator implements Comparator&lt;Map&lt;String, Object&gt;&gt; {\r\n\r\n  private final List&lt;String&gt; fields;\r\n\r\n  public MapComparator(List&lt;String&gt; fields) {\r\n    this.fields = fields;\r\n  }\r\n\r\n  @Override\r\n  public int compare(Map&lt;String, Object&gt; map1, Map&lt;String, Object&gt; map2) {\r\n    for (String field : this.fields) {\r\n      Object value1 = map1.get(field);\r\n      Object value2 = map2.get(field);\r\n      //don&#39;t forget to handle nulls, if applicable\r\n      int cmp;\r\n      if (value1 instanceof Comparable comparable) {\r\n        cmp = comparable.compareTo(value2);\r\n      } else {\r\n        cmp = // deal with non-Comparable types, if there are such\r\n        // may make them implement Comparable, if they are custom\r\n        // or depend on Comparators\r\n      }\r\n      if (cmp != 0) {\r\n        return cmp;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n}\r\n```\r\nOr even better, make a custom class to represent the elements. Then map fields names (String) to Comparator functions using the particular field.\r\n```\r\npublic class MyClassComparator implements Comparator&lt;MyClassA&gt; {\r\n\r\n  private final List&lt;String&gt; fields;\r\n  private final Map&lt;String, Comparator&lt;MyClassA&gt;&gt; map;\r\n\r\n  public MyClassComparator(List&lt;String&gt; fields, Map&lt;String, Comparator&lt;MyClassA&gt;&gt; map) {\r\n    this.fields = fields;\r\n    this.map = map;\r\n  }\r\n\r\n  @Override\r\n  public int compare(MyClassA o1, MyClassA o2) {\r\n    for (String field : this.fields) {\r\n      int cmp = this.map.get(field).compare(o1, o2);\r\n      if (cmp != 0) {\r\n        return cmp;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n}\r\n```\r\nYou can also make the map static, since most probably it will never change once intialized.","title":"Sort list of map items based on unknown list of fields","body":"<p>I would change the approach. Instead of chaining <code>thenComparing()</code>, write a normal Comparator implementation, depending on the list of fields.</p>\n<pre><code>public class MapComparator implements Comparator&lt;Map&lt;String, Object&gt;&gt; {\n\n  private final List&lt;String&gt; fields;\n\n  public MapComparator(List&lt;String&gt; fields) {\n    this.fields = fields;\n  }\n\n  @Override\n  public int compare(Map&lt;String, Object&gt; map1, Map&lt;String, Object&gt; map2) {\n    for (String field : this.fields) {\n      Object value1 = map1.get(field);\n      Object value2 = map2.get(field);\n      //don't forget to handle nulls, if applicable\n      int cmp;\n      if (value1 instanceof Comparable comparable) {\n        cmp = comparable.compareTo(value2);\n      } else {\n        cmp = // deal with non-Comparable types, if there are such\n        // may make them implement Comparable, if they are custom\n        // or depend on Comparators\n      }\n      if (cmp != 0) {\n        return cmp;\n      }\n    }\n    return 0;\n  }\n}\n</code></pre>\n<p>Or even better, make a custom class to represent the elements. Then map fields names (String) to Comparator functions using the particular field.</p>\n<pre><code>public class MyClassComparator implements Comparator&lt;MyClassA&gt; {\n\n  private final List&lt;String&gt; fields;\n  private final Map&lt;String, Comparator&lt;MyClassA&gt;&gt; map;\n\n  public MyClassComparator(List&lt;String&gt; fields, Map&lt;String, Comparator&lt;MyClassA&gt;&gt; map) {\n    this.fields = fields;\n    this.map = map;\n  }\n\n  @Override\n  public int compare(MyClassA o1, MyClassA o2) {\n    for (String field : this.fields) {\n      int cmp = this.map.get(field).compare(o1, o2);\n      if (cmp != 0) {\n        return cmp;\n      }\n    }\n    return 0;\n  }\n}\n</code></pre>\n<p>You can also make the map static, since most probably it will never change once intialized.</p>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675091909,"creation_date":1675091277,"answer_id":75286284,"question_id":75285176,"body_markdown":"You could create all possible comparators and store them in a map using your field names as keys and then depending on the input you could combine the comparators needed. An example method:\r\n\r\n    static void sortBy(List&lt;Map&lt;String, Object&gt;&gt; maps, List&lt;String&gt; sortOrder) {\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; byDest   = Comparator.comparing(m -&gt; (String) m.get(&quot;destination&quot;));\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; byOrigin = Comparator.comparing(m -&gt; (String) m.get(&quot;origin&quot;));\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; byModel  = Comparator.comparing(m -&gt; (String) m.get(&quot;model&quot;));\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; byId     = Comparator.comparing(m -&gt; (long)   m.get(&quot;id&quot;));\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; bySpeed  = Comparator.comparing(m -&gt; (double) m.get(&quot;speed&quot;));\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; byAlt    = Comparator.comparing(m -&gt; (int)    m.get(&quot;altitude&quot;));\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; byTime   = Comparator.comparing(m -&gt; (String) m.get(&quot;time&quot;));\r\n\r\n        Map&lt;String, Comparator&lt;Map&lt;String, Object&gt;&gt;&gt; compMap = Map.of(\r\n                &quot;destination&quot;, byDest,\r\n                &quot;origin&quot;, byOrigin,\r\n                &quot;model&quot;, byModel,\r\n                &quot;id&quot;, byId,\r\n                &quot;speed&quot;, bySpeed,\r\n                &quot;altitude&quot;, byAlt,\r\n                &quot;time&quot;, byTime);\r\n\r\n        Comparator&lt;Map&lt;String, Object&gt;&gt; combined = sortOrder.stream().map(compMap::get).reduce(Comparator::thenComparing).get();\r\n\r\n        maps.sort(combined);\r\n    }\r\n\r\nassuming you have your map and the sort order in a list of strings:\r\n\r\n    List&lt;Map&lt;String, Object&gt;&gt; yourListOfMaps = ...\r\n    List&lt;String&gt; sortByFields = List.of(&quot;destination&quot;, &quot;origin&quot;, &quot;speed&quot;);\r\n\r\nuse it as:\r\n\r\n    sortBy(yourListOfMaps, sortByFields);\r\n\r\nIf the list of sort orders is empty you&#39;ll get a `NoSuchElementException`. To avoid this you could define a default comparator instead of calling get blindly on the optional returned from reduce. For example `byId`\r\n \r\n\r\n    Comparator&lt;Map&lt;String, Object&gt;&gt; combined = sortOrder.stream()\r\n                                                        .map(compMap::get)\r\n                                                        .reduce(Comparator::thenComparing)\r\n                                                        .orElse(byId);","title":"Sort list of map items based on unknown list of fields","body":"<p>You could create all possible comparators and store them in a map using your field names as keys and then depending on the input you could combine the comparators needed. An example method:</p>\n<pre><code>static void sortBy(List&lt;Map&lt;String, Object&gt;&gt; maps, List&lt;String&gt; sortOrder) {\n    Comparator&lt;Map&lt;String, Object&gt;&gt; byDest   = Comparator.comparing(m -&gt; (String) m.get(&quot;destination&quot;));\n    Comparator&lt;Map&lt;String, Object&gt;&gt; byOrigin = Comparator.comparing(m -&gt; (String) m.get(&quot;origin&quot;));\n    Comparator&lt;Map&lt;String, Object&gt;&gt; byModel  = Comparator.comparing(m -&gt; (String) m.get(&quot;model&quot;));\n    Comparator&lt;Map&lt;String, Object&gt;&gt; byId     = Comparator.comparing(m -&gt; (long)   m.get(&quot;id&quot;));\n    Comparator&lt;Map&lt;String, Object&gt;&gt; bySpeed  = Comparator.comparing(m -&gt; (double) m.get(&quot;speed&quot;));\n    Comparator&lt;Map&lt;String, Object&gt;&gt; byAlt    = Comparator.comparing(m -&gt; (int)    m.get(&quot;altitude&quot;));\n    Comparator&lt;Map&lt;String, Object&gt;&gt; byTime   = Comparator.comparing(m -&gt; (String) m.get(&quot;time&quot;));\n\n    Map&lt;String, Comparator&lt;Map&lt;String, Object&gt;&gt;&gt; compMap = Map.of(\n            &quot;destination&quot;, byDest,\n            &quot;origin&quot;, byOrigin,\n            &quot;model&quot;, byModel,\n            &quot;id&quot;, byId,\n            &quot;speed&quot;, bySpeed,\n            &quot;altitude&quot;, byAlt,\n            &quot;time&quot;, byTime);\n\n    Comparator&lt;Map&lt;String, Object&gt;&gt; combined = sortOrder.stream().map(compMap::get).reduce(Comparator::thenComparing).get();\n\n    maps.sort(combined);\n}\n</code></pre>\n<p>assuming you have your map and the sort order in a list of strings:</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; yourListOfMaps = ...\nList&lt;String&gt; sortByFields = List.of(&quot;destination&quot;, &quot;origin&quot;, &quot;speed&quot;);\n</code></pre>\n<p>use it as:</p>\n<pre><code>sortBy(yourListOfMaps, sortByFields);\n</code></pre>\n<p>If the list of sort orders is empty you'll get a <code>NoSuchElementException</code>. To avoid this you could define a default comparator instead of calling get blindly on the optional returned from reduce. For example <code>byId</code></p>\n<pre><code>Comparator&lt;Map&lt;String, Object&gt;&gt; combined = sortOrder.stream()\n                                                    .map(compMap::get)\n                                                    .reduce(Comparator::thenComparing)\n                                                    .orElse(byId);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675213589,"creation_date":1675093347,"answer_id":75286753,"question_id":75285176,"body_markdown":"This may help demo what you could do. I made up some data to facilitate the demo.\r\n```\r\nList&lt;Map&lt;String, Object&gt;&gt; maps = new ArrayList&lt;&gt;(List.of(\r\n        Map.of(&quot;integer&quot;, 2, &quot;string&quot;, &quot;process&quot;, &quot;double&quot;, 6.8),\r\n        Map.of(&quot;integer&quot;, 5, &quot;string&quot;, &quot;test&quot;, &quot;double&quot;, 7.8),\r\n        Map.of(&quot;integer&quot;, 10, &quot;string&quot;, &quot;think&quot;, &quot;double&quot;, 2.8),\r\n        Map.of(&quot;integer&quot;, 7, &quot;string&quot;, &quot;think&quot;, &quot;double&quot;, 2.8),\r\n        Map.of(&quot;integer&quot;, 7, &quot;string&quot;, &quot;data&quot;, &quot;double&quot;, 9.9)));\r\n```\r\nDefine some functions as `keyExtractors` to access the map info.\r\n``` \r\nComparator&lt;Map&lt;String, Object&gt;&gt; icomp = Comparator\r\n                .comparing(m -&gt; (Integer) m.get(&quot;integer&quot;));\r\nComparator&lt;Map&lt;String, Object&gt;&gt; dcomp = Comparator\r\n                .comparing(m -&gt; (Double) m.get(&quot;double&quot;));\r\nComparator&lt;Map&lt;String, Object&gt;&gt; scomp = Comparator\r\n                .comparing(m -&gt; (String) m.get(&quot;string&quot;));\r\n```\r\nNow build the comparator.  This will sort the integers in ascending order followed by the doubles sorted in reverse order if the ints compare equally. \r\n```\r\nComparator&lt;Map&lt;String, Object&gt;&gt; comp = \r\n        icomp.thenComparing(dcomp.reversed());\r\n              \r\n\r\nmaps.sort(comp);\r\nmaps.forEach(System.out::println);\r\n```\r\nprints\r\n```\r\n{integer=2, double=6.8, string=process}\r\n{integer=5, double=7.8, string=test}\r\n{integer=7, double=9.9, string=data}\r\n{integer=7, double=2.8, string=think}\r\n{integer=10, double=3.8, string=think}\r\n","title":"Sort list of map items based on unknown list of fields","body":"<p>This may help demo what you could do. I made up some data to facilitate the demo.</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; maps = new ArrayList&lt;&gt;(List.of(\n        Map.of(&quot;integer&quot;, 2, &quot;string&quot;, &quot;process&quot;, &quot;double&quot;, 6.8),\n        Map.of(&quot;integer&quot;, 5, &quot;string&quot;, &quot;test&quot;, &quot;double&quot;, 7.8),\n        Map.of(&quot;integer&quot;, 10, &quot;string&quot;, &quot;think&quot;, &quot;double&quot;, 2.8),\n        Map.of(&quot;integer&quot;, 7, &quot;string&quot;, &quot;think&quot;, &quot;double&quot;, 2.8),\n        Map.of(&quot;integer&quot;, 7, &quot;string&quot;, &quot;data&quot;, &quot;double&quot;, 9.9)));\n</code></pre>\n<p>Define some functions as <code>keyExtractors</code> to access the map info.</p>\n<pre><code>Comparator&lt;Map&lt;String, Object&gt;&gt; icomp = Comparator\n                .comparing(m -&gt; (Integer) m.get(&quot;integer&quot;));\nComparator&lt;Map&lt;String, Object&gt;&gt; dcomp = Comparator\n                .comparing(m -&gt; (Double) m.get(&quot;double&quot;));\nComparator&lt;Map&lt;String, Object&gt;&gt; scomp = Comparator\n                .comparing(m -&gt; (String) m.get(&quot;string&quot;));\n</code></pre>\n<p>Now build the comparator.  This will sort the integers in ascending order followed by the doubles sorted in reverse order if the ints compare equally.</p>\n<pre><code>Comparator&lt;Map&lt;String, Object&gt;&gt; comp = \n        icomp.thenComparing(dcomp.reversed());\n              \n\nmaps.sort(comp);\nmaps.forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>{integer=2, double=6.8, string=process}\n{integer=5, double=7.8, string=test}\n{integer=7, double=9.9, string=data}\n{integer=7, double=2.8, string=think}\n{integer=10, double=3.8, string=think}\n</code></pre>\n"}],"owner":{"account_id":4029950,"reputation":621,"user_id":4511243,"accept_rate":61,"display_name":"Frank"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":301,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1675237976,"creation_date":1675085667,"question_id":75285176,"body_markdown":"I have a big list of HashMap&lt;String, Object&gt; items that I need to sort dynamically based on a list of fields. \r\n\r\nIf the list of fields were static, I know I could easily use `Comparator.compare(..)` follow by `thenComparing(..)`. \r\n\r\nBut if I do not know how many fields and which ones, I do not understand how I can chain the `thenComparion` dynamically based on the number of fields.\r\n\r\nCurrently my data is only Strings, but I expect it will change to other field types later so here is a future proof example:\r\n\r\n```json\r\n[\r\n  {\r\n     &quot;destination&quot;: &quot;tokyo&quot;,\r\n     &quot;origin&quot;: &quot;paris&quot;,\r\n     &quot;model&quot;: &quot;speedflight 3000&quot;,\r\n     &quot;id&quot;: 5000047632459593,\r\n     &quot;speed&quot;: 502.5,\r\n     &quot;altitude&quot;: 5001,\r\n     &quot;time&quot;: &quot;2023-01-30T13:35:23Z&quot;\r\n  },\r\n  ....\r\n]\r\n\r\n```\r\n\r\nThe request could be for example to filter on the fields in following order `id, speed, time`, or also just simply `id`. There is no sorting direction given (asc,desc) so the default is always used. ","title":"Sort list of map items based on unknown list of fields","body":"<p>I have a big list of HashMap&lt;String, Object&gt; items that I need to sort dynamically based on a list of fields.</p>\n<p>If the list of fields were static, I know I could easily use <code>Comparator.compare(..)</code> follow by <code>thenComparing(..)</code>.</p>\n<p>But if I do not know how many fields and which ones, I do not understand how I can chain the <code>thenComparion</code> dynamically based on the number of fields.</p>\n<p>Currently my data is only Strings, but I expect it will change to other field types later so here is a future proof example:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n     &quot;destination&quot;: &quot;tokyo&quot;,\n     &quot;origin&quot;: &quot;paris&quot;,\n     &quot;model&quot;: &quot;speedflight 3000&quot;,\n     &quot;id&quot;: 5000047632459593,\n     &quot;speed&quot;: 502.5,\n     &quot;altitude&quot;: 5001,\n     &quot;time&quot;: &quot;2023-01-30T13:35:23Z&quot;\n  },\n  ....\n]\n\n</code></pre>\n<p>The request could be for example to filter on the fields in following order <code>id, speed, time</code>, or also just simply <code>id</code>. There is no sorting direction given (asc,desc) so the default is always used.</p>\n"},{"tags":["java","maven","junit","maven-surefire-plugin"],"comments":[{"owner":{"account_id":33206,"reputation":10107,"user_id":92764,"accept_rate":84,"display_name":"Luciano Fiandesio"},"score":0,"creation_date":1604991272,"post_id":63451828,"comment_id":114508825,"body_markdown":"Hi, did you find a solution? I have a similar problem.","body":"Hi, did you find a solution? I have a similar problem."},{"owner":{"account_id":3121211,"reputation":198,"user_id":2640934,"display_name":"gad_gadskiy"},"score":0,"creation_date":1605023879,"post_id":63451828,"comment_id":114523178,"body_markdown":"@LucianoFiandesio hi. I&#39;ve found in that project hidden dependencies related to junit5 and excluded them all (junit-jupiter, junit-vintage-engine, mockito-junit-jupiter) - it helped me.","body":"@LucianoFiandesio hi. I&#39;ve found in that project hidden dependencies related to junit5 and excluded them all (junit-jupiter, junit-vintage-engine, mockito-junit-jupiter) - it helped me."}],"answers":[{"tags":[],"owner":{"account_id":1478876,"reputation":1042,"user_id":1388639,"display_name":"Malcolm Boekhoff"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675237897,"creation_date":1675237897,"answer_id":75307037,"question_id":63451828,"body_markdown":"I got this to work by using &quot;executions&quot; in both the default plugin and in the profile plugin (which is not, by the way, an override of the default one)\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n      ...\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0-M8&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-test&lt;/id&gt;\r\n                &lt;phase&gt;test&lt;/phase&gt;\r\n                &lt;goals&gt;&lt;goal&gt;test&lt;/goal&gt;&lt;/goals&gt; &lt;!-- REQUIRED --&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;enableAssertions&gt;true&lt;/enableAssertions&gt;\r\n                  &lt;systemPropertyVariables&gt;\r\n                    &lt;log4j.debug&gt;true&lt;/log4j.debug&gt;\r\n                    &lt;client.test.url&gt;http://localhost:8080/axis/services/MyService&lt;/client.test.url&gt;\r\n                  &lt;/systemPropertyVariables&gt;\r\n                  &lt;excludes&gt;\r\n                    &lt;exclude&gt;**/TestAccountOp&lt;/exclude&gt; &lt;!-- Tomcat required - use the profile --&gt;\r\n                    &lt;exclude&gt;**/TestWsdl&lt;/exclude&gt;\r\n                  &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n      &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;myprofileid-testwithtomcat&lt;/id&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                  &lt;execution&gt; &lt;id&gt;default-test&lt;/id&gt; &lt;phase&gt;none&lt;/phase&gt; &lt;/execution&gt; &lt;!-- Disable default Maven execution --&gt;\r\n                  &lt;execution&gt;\r\n                    &lt;id&gt;myexecutionid-testwithtomcat&lt;/id&gt;\r\n                    &lt;phase&gt;test&lt;/phase&gt;\r\n                    &lt;goals&gt;&lt;goal&gt;test&lt;/goal&gt;&lt;/goals&gt; &lt;!-- REQUIRED --&gt;\r\n                    &lt;configuration&gt;\r\n                      &lt;enableAssertions&gt;true&lt;/enableAssertions&gt;\r\n                      &lt;systemPropertyVariables&gt;\r\n                        &lt;log4j.debug&gt;true&lt;/log4j.debug&gt;\r\n                        &lt;client.test.url&gt;http://localhost:8080/axis/services/MyService&lt;/client.test.url&gt;\r\n                      &lt;/systemPropertyVariables&gt;\r\n                      &lt;excludes&gt;\r\n                        &lt;exclude&gt;**/TestWsdl&lt;/exclude&gt;\r\n                      &lt;/excludes&gt;\r\n                    &lt;/configuration&gt;\r\n                  &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n        ...\r\n      &lt;/profiles&gt;\r\n    &lt;/project&gt;\r\n\r\nIn the profile, I removed the &quot;default-test&quot;, otherwise the &quot;excludes&quot; were set from the default one, but that might have been before I moved the &quot;configurations&quot; into the &quot;executions&quot;. You have to remember that &quot;default-test&quot; is active unless you disable it, but not using an &quot;execution&quot; in the main body did not work for me.\r\n\r\n&quot;default-test&quot; is Maven&#39;s &quot;id&quot; for the one in the main body, so that is why I used that name in the &quot;execution&quot; in the main body.\r\n\r\nI think you can get away with not bothering with the &quot;phase&quot; elements, because that&#39;s the default for the &quot;test&quot; goal, but I&#39;m pretty sure that you need the goal.\r\n\r\n\r\nGood luck!","title":"maven-surefire-plugin isn&#39;t working with profiles","body":"<p>I got this to work by using &quot;executions&quot; in both the default plugin and in the profile plugin (which is not, by the way, an override of the default one)</p>\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n  ...\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M8&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-test&lt;/id&gt;\n            &lt;phase&gt;test&lt;/phase&gt;\n            &lt;goals&gt;&lt;goal&gt;test&lt;/goal&gt;&lt;/goals&gt; &lt;!-- REQUIRED --&gt;\n            &lt;configuration&gt;\n              &lt;enableAssertions&gt;true&lt;/enableAssertions&gt;\n              &lt;systemPropertyVariables&gt;\n                &lt;log4j.debug&gt;true&lt;/log4j.debug&gt;\n                &lt;client.test.url&gt;http://localhost:8080/axis/services/MyService&lt;/client.test.url&gt;\n              &lt;/systemPropertyVariables&gt;\n              &lt;excludes&gt;\n                &lt;exclude&gt;**/TestAccountOp&lt;/exclude&gt; &lt;!-- Tomcat required - use the profile --&gt;\n                &lt;exclude&gt;**/TestWsdl&lt;/exclude&gt;\n              &lt;/excludes&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;myprofileid-testwithtomcat&lt;/id&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M8&lt;/version&gt;\n            &lt;executions&gt;\n              &lt;execution&gt; &lt;id&gt;default-test&lt;/id&gt; &lt;phase&gt;none&lt;/phase&gt; &lt;/execution&gt; &lt;!-- Disable default Maven execution --&gt;\n              &lt;execution&gt;\n                &lt;id&gt;myexecutionid-testwithtomcat&lt;/id&gt;\n                &lt;phase&gt;test&lt;/phase&gt;\n                &lt;goals&gt;&lt;goal&gt;test&lt;/goal&gt;&lt;/goals&gt; &lt;!-- REQUIRED --&gt;\n                &lt;configuration&gt;\n                  &lt;enableAssertions&gt;true&lt;/enableAssertions&gt;\n                  &lt;systemPropertyVariables&gt;\n                    &lt;log4j.debug&gt;true&lt;/log4j.debug&gt;\n                    &lt;client.test.url&gt;http://localhost:8080/axis/services/MyService&lt;/client.test.url&gt;\n                  &lt;/systemPropertyVariables&gt;\n                  &lt;excludes&gt;\n                    &lt;exclude&gt;**/TestWsdl&lt;/exclude&gt;\n                  &lt;/excludes&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n    ...\n  &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n<p>In the profile, I removed the &quot;default-test&quot;, otherwise the &quot;excludes&quot; were set from the default one, but that might have been before I moved the &quot;configurations&quot; into the &quot;executions&quot;. You have to remember that &quot;default-test&quot; is active unless you disable it, but not using an &quot;execution&quot; in the main body did not work for me.</p>\n<p>&quot;default-test&quot; is Maven's &quot;id&quot; for the one in the main body, so that is why I used that name in the &quot;execution&quot; in the main body.</p>\n<p>I think you can get away with not bothering with the &quot;phase&quot; elements, because that's the default for the &quot;test&quot; goal, but I'm pretty sure that you need the goal.</p>\n<p>Good luck!</p>\n"}],"owner":{"account_id":3121211,"reputation":198,"user_id":2640934,"display_name":"gad_gadskiy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1296,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675237897,"creation_date":1597670916,"question_id":63451828,"body_markdown":"I have profile configuration in my POM with surefire-maven-plugin &amp; junit connection to run only specific tests by profile. For example:\r\n```\r\nmvn clean test -Pgroup1 --also-make -DfailIfNoTests=false\r\n```\r\nIt works as expected with following versions:\r\n```\r\n&lt;maven-surefire-plugin.version&gt;2.22.1&lt;/maven-surefire-plugin.version&gt;\r\n&lt;junit.version&gt;4.12&lt;/junit.version&gt;\r\n```\r\nBut stops working normally when I try to upgrade them:\r\n```\r\n&lt;maven-surefire-plugin.version&gt;3.0.0-M5&lt;/maven-surefire-plugin.version&gt;\r\n&lt;junit.version&gt;4.13&lt;/junit.version&gt;\r\n```\r\nIn this case `mvn test` always run all tests as I wouldn&#39;t set profile in command line.\r\nMy config of profiles is:\r\n```\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;default&lt;/id&gt;\r\n            &lt;activation&gt;\r\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n            &lt;/activation&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;includes&gt;\r\n                                &lt;include&gt;**/unit/*Test.java&lt;/include&gt;\r\n                            &lt;/includes&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;group1&lt;/id&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;**/unit/**&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                            &lt;groups&gt;com.Group1&lt;/groups&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;group2&lt;/id&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;**/unit/**&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                            &lt;groups&gt;com.Group2&lt;/groups&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n        ......................\r\n    &lt;/profiles&gt;\r\n```\r\nEvery test class has connected interface linked to profile:\r\n```\r\n@Category(Group1.class)\r\n@RunWith(JUnitParamsRunner.class)\r\npublic class Group1Test {\r\n```\r\nPlaying with &#39;default&#39; profile and &#39;activeByDefault&#39; property also gave me no result. Any ideas how to fix it?","title":"maven-surefire-plugin isn&#39;t working with profiles","body":"<p>I have profile configuration in my POM with surefire-maven-plugin &amp; junit connection to run only specific tests by profile. For example:</p>\n<pre><code>mvn clean test -Pgroup1 --also-make -DfailIfNoTests=false\n</code></pre>\n<p>It works as expected with following versions:</p>\n<pre><code>&lt;maven-surefire-plugin.version&gt;2.22.1&lt;/maven-surefire-plugin.version&gt;\n&lt;junit.version&gt;4.12&lt;/junit.version&gt;\n</code></pre>\n<p>But stops working normally when I try to upgrade them:</p>\n<pre><code>&lt;maven-surefire-plugin.version&gt;3.0.0-M5&lt;/maven-surefire-plugin.version&gt;\n&lt;junit.version&gt;4.13&lt;/junit.version&gt;\n</code></pre>\n<p>In this case <code>mvn test</code> always run all tests as I wouldn't set profile in command line.\nMy config of profiles is:</p>\n<pre><code>    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;default&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;**/unit/*Test.java&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n        &lt;profile&gt;\n            &lt;id&gt;group1&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;**/unit/**&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                            &lt;groups&gt;com.Group1&lt;/groups&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n        &lt;profile&gt;\n            &lt;id&gt;group2&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;**/unit/**&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                            &lt;groups&gt;com.Group2&lt;/groups&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n        ......................\n    &lt;/profiles&gt;\n</code></pre>\n<p>Every test class has connected interface linked to profile:</p>\n<pre><code>@Category(Group1.class)\n@RunWith(JUnitParamsRunner.class)\npublic class Group1Test {\n</code></pre>\n<p>Playing with 'default' profile and 'activeByDefault' property also gave me no result. Any ideas how to fix it?</p>\n"},{"tags":["java","spring","spring-boot","validation"],"comments":[{"owner":{"account_id":22861647,"reputation":3,"user_id":17005621,"display_name":"RAKESH YEDLAPPALLI"},"score":0,"creation_date":1675143166,"post_id":75282482,"comment_id":132859961,"body_markdown":"@times29, Can you help me with this? thank you.","body":"@times29, Can you help me with this? thank you."}],"answers":[{"tags":[],"owner":{"account_id":22861647,"reputation":3,"user_id":17005621,"display_name":"RAKESH YEDLAPPALLI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675237743,"creation_date":1675237743,"answer_id":75307013,"question_id":75282482,"body_markdown":"I could able to solve this by disabling the default constraint violation \r\n\r\ncontext.disableDefaultConstraintViolation();","title":"How to exclude CustomValidator default message from ConstraintValidatorContext JavaX","body":"<p>I could able to solve this by disabling the default constraint violation</p>\n<p>context.disableDefaultConstraintViolation();</p>\n"}],"owner":{"account_id":22861647,"reputation":3,"user_id":17005621,"display_name":"RAKESH YEDLAPPALLI"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675237743,"creation_date":1675071277,"question_id":75282482,"body_markdown":"I have a custom validator that checks validations against the given Object and builds the \r\nConstraintValidatorContext, and if anything is violated then it builds the ConstraintViolationWithTemplate and adds the violated constraint message to the ConstraintValidatorContext context, \r\nhere in the constraint list, I could even see the default message which is in CustomerValidatorConstraint, I would like to exclude that CustomValidator default message\r\n\r\n\r\n**Code**\r\n\r\n\r\npublic @interface ValidateItems {\r\n\r\n        String message() default &quot;Invalid Items object&quot;;\r\n\r\n        Class&lt;?&gt;[] groups() default {};\r\n\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n    }\r\n\r\n    @ValidateItems\r\n    private Items items;\r\n\r\n\r\n    public class Items {\r\n        private int id;\r\n        private String productName;\r\n    }\r\n\r\n\r\n    public class ValidItemValidator implements ConstraintValidator\r\n            &lt;ValidateItems, Items&gt; {\r\n\r\n        @Override\r\n        public boolean isValid(Items items, ConstraintValidatorContext context) {\r\n\r\n            if (items.getProductName.startsWith(&quot;Z&quot;)) {\r\n                context.buildConstraintViolationWithTemplate(&quot;Product name should not start with Z&quot;).addConstraintViolation();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nas shown in the above code, in the ConstraintValidatorContext object, I could see two constraint validation when I pass the product name starting with &quot;Z&quot;\r\n\r\n1)Invalid Items object (Default custom validator message)\r\n\r\n2)Product name should not start with Z (Actual Validation message)\r\n\r\n**Requirement:**\r\nI would like to exclude the default message from ConstraintValidator, Could someone help me with this?\r\n","title":"How to exclude CustomValidator default message from ConstraintValidatorContext JavaX","body":"<p>I have a custom validator that checks validations against the given Object and builds the\nConstraintValidatorContext, and if anything is violated then it builds the ConstraintViolationWithTemplate and adds the violated constraint message to the ConstraintValidatorContext context,\nhere in the constraint list, I could even see the default message which is in CustomerValidatorConstraint, I would like to exclude that CustomValidator default message</p>\n<p><strong>Code</strong></p>\n<p>public @interface ValidateItems {</p>\n<pre><code>    String message() default &quot;Invalid Items object&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n\n@ValidateItems\nprivate Items items;\n\n\npublic class Items {\n    private int id;\n    private String productName;\n}\n\n\npublic class ValidItemValidator implements ConstraintValidator\n        &lt;ValidateItems, Items&gt; {\n\n    @Override\n    public boolean isValid(Items items, ConstraintValidatorContext context) {\n\n        if (items.getProductName.startsWith(&quot;Z&quot;)) {\n            context.buildConstraintViolationWithTemplate(&quot;Product name should not start with Z&quot;).addConstraintViolation();\n        }\n    }\n}\n</code></pre>\n<p>as shown in the above code, in the ConstraintValidatorContext object, I could see two constraint validation when I pass the product name starting with &quot;Z&quot;</p>\n<p>1)Invalid Items object (Default custom validator message)</p>\n<p>2)Product name should not start with Z (Actual Validation message)</p>\n<p><strong>Requirement:</strong>\nI would like to exclude the default message from ConstraintValidator, Could someone help me with this?</p>\n"},{"tags":["java","spring","spring-boot","autowired","mapstruct"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1675171170,"post_id":75296353,"comment_id":132867485,"body_markdown":"Does interface support injection? Maybe best use an abstract class.","body":"Does interface support injection? Maybe best use an abstract class."}],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675237422,"creation_date":1675237422,"answer_id":75306962,"question_id":75296353,"body_markdown":"You should define the `MapperA` as an abstract class instead of an interface, and use setter injection to inject `MapperB` as follows:\r\n```\r\n@Mapper(componentModel=&quot;spring&quot;)\r\npublic abstract class MapperA {\r\n\r\n    private MapperB mapperB; \r\n\r\n    @Autowired\r\n    public final void setMapperB(MapperB mapperB) {\r\n        this.mapperB = mapperB;\r\n    }\r\n\r\n    public ArrayList&lt;AudioDto&gt; audiosToDto(List&lt;Audio&gt; audios, ApplicationUser loggedInUser) {\r\n        Stream&lt;AudioDto&gt; audiosStream = audios.stream().map((Audio audio) -&gt; mapperB.audioToAudioDto(audio, loggedInUser));\r\n        return audiosStream.collect(Collectors.toCollection(ArrayList::new));\r\n    }\r\n}\r\n```","title":"Use a custom mapper inside another custom mapper with mapstruct (in default method)","body":"<p>You should define the <code>MapperA</code> as an abstract class instead of an interface, and use setter injection to inject <code>MapperB</code> as follows:</p>\n<pre><code>@Mapper(componentModel=&quot;spring&quot;)\npublic abstract class MapperA {\n\n    private MapperB mapperB; \n\n    @Autowired\n    public final void setMapperB(MapperB mapperB) {\n        this.mapperB = mapperB;\n    }\n\n    public ArrayList&lt;AudioDto&gt; audiosToDto(List&lt;Audio&gt; audios, ApplicationUser loggedInUser) {\n        Stream&lt;AudioDto&gt; audiosStream = audios.stream().map((Audio audio) -&gt; mapperB.audioToAudioDto(audio, loggedInUser));\n        return audiosStream.collect(Collectors.toCollection(ArrayList::new));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26351827,"reputation":176,"user_id":20009330,"display_name":"Felix Olszewski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":642,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675237422,"creation_date":1675163990,"question_id":75296353,"body_markdown":"I want to use MapperB inside MapperA&#39;s default method\r\n\r\nSimilar to this question:\r\nhttps://stackoverflow.com/questions/60523230/how-can-i-use-another-mapping-from-different-class-in-mapstruct\r\n\r\nHowever afaik this question did not ask for &#39;custom mappers&#39;, i.e. mappers that exist as their own interface.\r\n\r\nHow would I be able to do that?\r\n\r\nI have an interface of MapperA and an interface of MapperB\r\n\r\nHow would I use the MapperB inside MapperA?\r\n\r\nlike so:\r\n\r\n    @Mapper\r\n    public interface MapperA {\r\n\r\n        @Autowired\r\n        MapperB mapperB; \r\n\r\n        default ArrayList&lt;AudioDto&gt; audiosToDto(List&lt;Audio&gt; audios, ApplicationUser loggedInUser) {\r\n        Stream&lt;AudioDto&gt; audiosStream = audios.stream().map((Audio audio) -&gt; mapperB.audioToAudioDto(audio, loggedInUser));\r\n        return audiosStream.collect(Collectors.toCollection(ArrayList::new));\r\n    }\r\n\r\n\r\nThe above code didn&#39;t work. Now I tried adding @Component(to MapperA &amp; MapperB) to be able to autowire it, but it&#39;s still giving me:\r\n\r\n@Autowired &lt;- Field injection is not recommended \r\n\r\nMapperB mapperB; &lt;- Variable &#39;audioMapper&#39; might not have been initialized\r\n\r\neven after maven-cleaning the project to get rid of the MapperAImpl.","title":"Use a custom mapper inside another custom mapper with mapstruct (in default method)","body":"<p>I want to use MapperB inside MapperA's default method</p>\n<p>Similar to this question:\n<a href=\"https://stackoverflow.com/questions/60523230/how-can-i-use-another-mapping-from-different-class-in-mapstruct\">How can I use another mapping from different class in mapstruct</a></p>\n<p>However afaik this question did not ask for 'custom mappers', i.e. mappers that exist as their own interface.</p>\n<p>How would I be able to do that?</p>\n<p>I have an interface of MapperA and an interface of MapperB</p>\n<p>How would I use the MapperB inside MapperA?</p>\n<p>like so:</p>\n<pre><code>@Mapper\npublic interface MapperA {\n\n    @Autowired\n    MapperB mapperB; \n\n    default ArrayList&lt;AudioDto&gt; audiosToDto(List&lt;Audio&gt; audios, ApplicationUser loggedInUser) {\n    Stream&lt;AudioDto&gt; audiosStream = audios.stream().map((Audio audio) -&gt; mapperB.audioToAudioDto(audio, loggedInUser));\n    return audiosStream.collect(Collectors.toCollection(ArrayList::new));\n}\n</code></pre>\n<p>The above code didn't work. Now I tried adding @Component(to MapperA &amp; MapperB) to be able to autowire it, but it's still giving me:</p>\n<p>@Autowired &lt;- Field injection is not recommended</p>\n<p>MapperB mapperB; &lt;- Variable 'audioMapper' might not have been initialized</p>\n<p>even after maven-cleaning the project to get rid of the MapperAImpl.</p>\n"},{"tags":["java","spring","resteasy","jta","lazy-initialization"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675084672,"post_id":75284815,"comment_id":132845930,"body_markdown":"Please add the **full stacktrace**. If your `EmployeeApiImpl` is an `@Component` don&#39;t do a lookup but use dependency injection to inject the `UserDAO`.However the fact that you get the exception is likely an indication that your Resteasy / Spring integration doesn&#39;t work (and basically using the lookup hides that).","body":"Please add the <b>full stacktrace</b>. If your <code>EmployeeApiImpl</code> is an <code>@Component</code> don&#39;t do a lookup but use dependency injection to inject the <code>UserDAO</code>.However the fact that you get the exception is likely an indication that your Resteasy / Spring integration doesn&#39;t work (and basically using the lookup hides that)."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675086356,"post_id":75284815,"comment_id":132846560,"body_markdown":"Thank you for comment. When I try to use setter based dependency injection using declartive approach then the userDAO is null but other spring class has valid reference to userDAO. Whenever class with @ Path and @ Component try to inject this DAO class then it&#39;s either null( dependency injection ) or Unable to locate current JTA(with lookup). I&#39;ll add full stacktrace","body":"Thank you for comment. When I try to use setter based dependency injection using declartive approach then the userDAO is null but other spring class has valid reference to userDAO. Whenever class with @ Path and @ Component try to inject this DAO class then it&#39;s either null( dependency injection ) or Unable to locate current JTA(with lookup). I&#39;ll add full stacktrace"},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675087480,"post_id":75284815,"comment_id":132846935,"body_markdown":"added full stacktrace","body":"added full stacktrace"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675088721,"post_id":75284815,"comment_id":132847400,"body_markdown":"If there is no injection, the `@Component` is useless and thus an indication your Spring integration isn&#39;t steup properly (else you wouldn&#39;t need the workaround with the lookup). Also marking your endpoint `@Transactional` (basically your web layer) isn&#39;t the best either. Create a service that has an `@Transactional` method and call that from your endpoint (with or without a lookup). Looking at your current setup I would suggest just adding a service layer in between.","body":"If there is no injection, the <code>@Component</code> is useless and thus an indication your Spring integration isn&#39;t steup properly (else you wouldn&#39;t need the workaround with the lookup). Also marking your endpoint <code>@Transactional</code> (basically your web layer) isn&#39;t the best either. Create a service that has an <code>@Transactional</code> method and call that from your endpoint (with or without a lookup). Looking at your current setup I would suggest just adding a service layer in between."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675091155,"post_id":75284815,"comment_id":132848290,"body_markdown":"tried with service layer in between but the result is same as service is null when I inject  using declartive approach,\n```\n@Path(&quot;/requests&quot;)\npublic class EmployeeApiImpl   {\n\n   ExampleService exampleService;\n\n   public void setExampleService(ExampleService exampleService) {\n      this.exampleService = exampleService;\n   }\n   @GET\n   @Path(&quot;/{id}&quot;)\n   @Produces({MediaType.APPLICATION_JSON})\n   public IbisRequest findUserCountByEmpId(@PathParam(value = &quot;id&quot;) Long id) throws ServiceException {\n      return exampleService.findUserCountByEmpId(id);\n   }\n}\n```","body":"tried with service layer in between but the result is same as service is null when I inject  using declartive approach, ``` @Path(&quot;/requests&quot;) public class EmployeeApiImpl   {     ExampleService exampleService;     public void setExampleService(ExampleService exampleService) {       this.exampleService = exampleService;    }    @GET    @Path(&quot;/{id}&quot;)    @Produces({MediaType.APPLICATION_JSON})    public IbisRequest findUserCountByEmpId(@PathParam(value = &quot;id&quot;) Long id) throws ServiceException {       return exampleService.findUserCountByEmpId(id);    } } ```"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675091503,"post_id":75284815,"comment_id":132848423,"body_markdown":"Don&#39;t add code as comments that is totally unreadable. I stated use the approach you now have (the lookup) and introduce a service layer with `@Transactional`.","body":"Don&#39;t add code as comments that is totally unreadable. I stated use the approach you now have (the lookup) and introduce a service layer with <code>@Transactional</code>."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675096772,"post_id":75284815,"comment_id":132850203,"body_markdown":"As per your suggestion, I have updated question with code. with this approach I think transaction part is working but not completely as getting error Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session.\n\nI have added error log to question","body":"As per your suggestion, I have updated question with code. with this approach I think transaction part is working but not completely as getting error Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session.  I have added error log to question"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675145623,"post_id":75284815,"comment_id":132860276,"body_markdown":"Let me guess, you are using JPA and decided to add Lombok into the mix and use `@Data`. In your dao you are doing somet logging with the user(s) that are retrieved (or using `System.out`). Or this stacktrace isn&#39;t the one that comes with the code you shown herer (please add the full stacktrace and not a snippet).","body":"Let me guess, you are using JPA and decided to add Lombok into the mix and use <code>@Data</code>. In your dao you are doing somet logging with the user(s) that are retrieved (or using <code>System.out</code>). Or this stacktrace isn&#39;t the one that comes with the code you shown herer (please add the full stacktrace and not a snippet)."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675167881,"post_id":75284815,"comment_id":132866340,"body_markdown":"added the full stacktrace","body":"added the full stacktrace"},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675169696,"post_id":75284815,"comment_id":132866977,"body_markdown":"The stacktrace is modified with names as removed class name from actual code. we have spring application with entity classes and declartive hbm configuration and we now want to integrate jboss resteasy which are using bean from spring applications","body":"The stacktrace is modified with names as removed class name from actual code. we have spring application with entity classes and declartive hbm configuration and we now want to integrate jboss resteasy which are using bean from spring applications"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675169919,"post_id":75284815,"comment_id":132867067,"body_markdown":"That doesn&#39;t answer my question(s). Do you have entities with `@Data` or at least some reflective `toString` method (as it appears that way).  Also why resteasy instead of just plain Spring controllers (as you are already using Spring) which saves you a lot of headaches.","body":"That doesn&#39;t answer my question(s). Do you have entities with <code>@Data</code> or at least some reflective <code>toString</code> method (as it appears that way).  Also why resteasy instead of just plain Spring controllers (as you are already using Spring) which saves you a lot of headaches."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675170692,"post_id":75284815,"comment_id":132867323,"body_markdown":"we don&#39;t have entities with @Data, we have entities which are implementing Serializable interface and override toString() and for plain Spring controllers, could you please give me any reference to some document? or example to implement rest api with  Spring controllers","body":"we don&#39;t have entities with @Data, we have entities which are implementing Serializable interface and override toString() and for plain Spring controllers, could you please give me any reference to some document? or example to implement rest api with  Spring controllers"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675171386,"post_id":75284815,"comment_id":132867559,"body_markdown":"If you look at your stacktrace the `toString` is the problem as you are probably logging something and the `toString` is printing (probably lazy loaded) collections.","body":"If you look at your stacktrace the <code>toString</code> is the problem as you are probably logging something and the <code>toString</code> is printing (probably lazy loaded) collections."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675174634,"post_id":75284815,"comment_id":132868719,"body_markdown":"yes, logging is there, is there any way so that it&#39;ll work with  lazy loaded? I tried with opensessioninviewfilter but did not work","body":"yes, logging is there, is there any way so that it&#39;ll work with  lazy loaded? I tried with opensessioninviewfilter but did not work"},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1675270818,"post_id":75284815,"comment_id":132893937,"body_markdown":"finally it&#39;s working. The issue was aop configuration and use of ObjectMapper objectMapper = new ObjectMapper to transform the response to josn. Thank your for your help","body":"finally it&#39;s working. The issue was aop configuration and use of ObjectMapper objectMapper = new ObjectMapper to transform the response to josn. Thank your for your help"}],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675237175,"creation_date":1675083858,"question_id":75284815,"body_markdown":"Can any one help me with correct approach to integrate Resteasy and Spring with AOP declartive configuration for JTA transaction.\r\n\r\nThe configuration is as per below,\r\n\r\n**Project structure:**\r\n\r\n```\r\ncom.example.dao\r\n   - UserDAO\r\ncom.example.daoimpl\r\n   - UserDAOImpl\r\ncom.example.services.api\r\n   - EmployeeApi\r\ncom.example.services.api.impl\r\n   - EmployeeApiImpl\r\n```\r\n**aop.xml**\r\n\r\n```\r\n\t&lt;tx:advice id=&quot;txServiceAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;\r\n\t\t&lt;tx:attributes&gt;\r\n\t\t\t&lt;!-- all methods starting with search/view/get/is are read-only --&gt;\r\n\t\t\t&lt;tx:method name=&quot;search*&quot; read-only=&quot;true&quot;/&gt;\r\n\t\t\t&lt;tx:method name=&quot;view*&quot; read-only=&quot;true&quot;/&gt;\r\n\t\t\t&lt;tx:method name=&quot;get*&quot; read-only=&quot;true&quot;/&gt;\r\n\t\t\t&lt;tx:method name=&quot;is*&quot; read-only=&quot;true&quot;/&gt;\r\n\r\n\t\t\t&lt;!-- all other methods require transaction --&gt;\r\n\t\t\t&lt;tx:method name=&quot;*&quot; read-only=&quot;false&quot;\r\n\t\t\t\tpropagation=&quot;REQUIRED&quot;\r\n\t\t\t\tisolation=&quot;READ_COMMITTED&quot;\r\n\t\t\t\trollback-for=&quot;RuntimeException&quot;\r\n\t\t\t\tno-rollback-for=&quot;ServiceException&quot; /&gt;\r\n\r\n\t\t&lt;/tx:attributes&gt;\r\n\t&lt;/tx:advice&gt;\r\n\r\n       &lt;aop:config&gt;\r\n          &lt;aop:pointcut id=&quot;restApiPointcut&quot; expression=&quot;execution(* com.example.services.*.*(..))&quot;/&gt;\r\n          &lt;aop:advisor advice-ref=&quot;txServiceAdvice&quot; pointcut-ref=&quot;restApiPointcut&quot;/&gt;\r\n       &lt;/aop:config&gt;\r\n\t \r\n```\r\n\r\nI followed the ApplicationContextAware intrefaces approch mentioned here https://mkyong.com/webservices/jax-rs/resteasy-spring-integration-example/\r\n\r\nThe EmployeeApiImpl look like below,\r\n\r\n```\r\n@Path(&quot;/requests&quot;)\r\n@Component\r\npublic class EmployeeApiImpl {\r\n\r\n\r\n\r\n   @GET\r\n   @Path(&quot;/{id}&quot;)\r\n   @Produces({MediaType.APPLICATION_JSON})\r\n   @Transactional\r\n   public int findUserCountByEmpId(@PathParam(value = &quot;id&quot;) Long id) throws ServiceException {\r\n      UserDAO userDAO= SpringApplicationContext.getBean(&quot;UserDAO&quot;, UserDAOImpl.class);\r\n      return userDAO.findCountById(id);\r\n   }\r\n\r\n}\r\n```\r\n\r\nWhen I call the api then it&#39;s giving below error,\r\n\r\n\r\n```\r\n 14:59:27,477 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /example-fe-war/api/requests/170: org.jboss.resteasy.spi.UnhandledException: org.hibernate.HibernateException: Unable to locate current JTA transaction\r\n        at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:82)\r\n        at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:346)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:193)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:457)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135)\r\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215)\r\n        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:245)\r\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:61)\r\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\r\n        at org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:71)\r\n        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\r\n        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\r\n        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)\r\n        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n        at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)\r\n        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n        at io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\r\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\r\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\r\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\r\n        at java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.hibernate.HibernateException: Unable to locate current JTA transaction\r\n        at org.hibernate.context.internal.JTASessionContext.currentSession(JTASessionContext.java:75)\r\n        at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:464)\r\n        atcom.example.dao.application.application.impl.AbstractBaseDAOImpl.getSession(AbstractBaseDAOImpl.java:116)\r\n        atcom.example.dao.application.application.impl.GenericDAOImpl.findById(GenericDAOImpl.java:43)\r\n        at com.example.services.api.impl.EmployeeApiImpl.findCountById(EmployeeApiImpl.java:29)\r\n        at com.example.services.api.impl.EmployeeApiImpl$Proxy$_$$_WeldClientProxy.findCountById(Unknown Source)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:138)\r\n        at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:546)\r\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:435)\r\n        at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$0(ResourceMethodInvoker.java:396)\r\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)\r\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:398)\r\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:365)\r\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:338)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:440)\r\n        ... 60 more\r\n```\r\n\r\n---------------added service layer as per suggestion-------------------------\r\n```\r\n@Path(&quot;/requests&quot;)\r\npublic class EmployeeApiImpl   {\r\n\r\n   @GET\r\n   @Path(&quot;/{id}&quot;)\r\n   @Produces({MediaType.APPLICATION_JSON})\r\n   public int findUserCountByEmpId(@PathParam(value = &quot;id&quot;) Long id) throws ServiceException {\r\n      ExampleService exampleService = SpringApplicationContext.getBean(&quot;exampleService&quot;, ExampleService.class);\r\n      return exampleService.findUserCountByEmpId(id);\r\n   }\r\n\r\n}\r\n```\r\n```\r\npublic class ExampleService {\r\n\r\n\r\n   @Transactional\r\n   public int findUserCountByEmpId(Long id) throws ServiceException {\r\n     UserDAO userDAO= SpringApplicationContext.getBean(&quot;UserDAO&quot;, UserDAOImpl.class);\r\n      return userDAO.findCountById(id);\r\n   }\r\n}\r\n\r\n```\r\n\r\n```\r\n13:17:02,254 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /example-fe-war/api/requests/170: org.jboss.resteasy.spi.UnhandledException: javax.ws.rs.ProcessingException: RESTEASY008205: JSON Binding serialization error javax.json.bind.JsonbException: Unable to serialize property &#39;Address&#39; from com.example.entities.User\r\n        at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:356)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:193)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:539)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:461)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135)\r\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215)\r\n        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:245)\r\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:61)\r\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\r\n        at org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:71)\r\n        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\r\n        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\r\n        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)\r\n        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n        at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)\r\n        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n        at io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\r\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\r\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\r\n        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\r\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\r\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\r\n        at java.lang.Thread.run(Thread.java:748)\r\nCaused by: javax.ws.rs.ProcessingException: RESTEASY008205: JSON Binding serialization error javax.json.bind.JsonbException: Unable to serialize property &#39;Address&#39; from com.example.entities.User\r\n        at org.jboss.resteasy.plugins.providers.jsonb.JsonBindingProvider.writeTo(JsonBindingProvider.java:160)\r\n        at org.jboss.resteasy.core.interception.AbstractWriterInterceptorContext.writeTo(AbstractWriterInterceptorContext.java:137)\r\n        at org.jboss.resteasy.core.interception.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:61)\r\n        at org.jboss.resteasy.core.interception.AbstractWriterInterceptorContext.proceed(AbstractWriterInterceptorContext.java:124)\r\n        at org.jboss.resteasy.security.doseta.DigitalSigningInterceptor.aroundWriteTo(DigitalSigningInterceptor.java:147)\r\n        at org.jboss.resteasy.core.interception.AbstractWriterInterceptorContext.proceed(AbstractWriterInterceptorContext.java:129)\r\n        at org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$2(ServerResponseWriter.java:151)\r\n        at org.jboss.resteasy.core.interception.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:399)\r\n        at org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:219)\r\n        at org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:95)\r\n        at org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:69)\r\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:530)\r\n        ... 61 more\r\nCaused by: javax.json.bind.JsonbException: Unable to serialize property &#39;User&#39; from com.example.entities.Address\r\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:67)\r\n        at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serialize(AbstractContainerSerializer.java:64)\r\n        at org.eclipse.yasson.internal.Marshaller.serializeRoot(Marshaller.java:148)\r\n        at org.eclipse.yasson.internal.Marshaller.marshall(Marshaller.java:76)\r\n        at org.eclipse.yasson.internal.Marshaller.marshall(Marshaller.java:102)\r\n        at org.eclipse.yasson.internal.JsonBinding.toJson(JsonBinding.java:118)\r\n        at org.jboss.resteasy.plugins.providers.jsonb.JsonBindingProvider.writeTo(JsonBindingProvider.java:156)\r\n        ... 72 more\r\nCaused by: javax.json.bind.JsonbException: Unable to serialize property &#39;additionalRequestTypeInfo&#39; from com.example.entities.User_$$_jvst356_26b\r\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:67)\r\n        at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serialize(AbstractContainerSerializer.java:64)\r\n        at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serializerCaptor(AbstractContainerSerializer.java:96)\r\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.marshallProperty(ObjectSerializer.java:110)\r\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:65)\r\n        ... 78 more\r\nCaused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session\r\n        at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:153)\r\n        at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:266)\r\n        at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:73)\r\n        at com.example.entities.User_$$_jvst356_26b.toString(User_$$_jvst356_26b.java)\r\n        at java.lang.String.valueOf(String.java:2994)\r\n        at java.lang.StringBuilder.append(StringBuilder.java:131)\r\n        at org.eclipse.yasson.internal.model.GetValueCommand.getValue(GetValueCommand.java:36)\r\n        at org.eclipse.yasson.internal.model.ReflectionPropagation.getValue(ReflectionPropagation.java:73)\r\n        at org.eclipse.yasson.internal.model.PropertyModel.getValue(PropertyModel.java:284)\r\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.marshallProperty(ObjectSerializer.java:87)\r\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:65)\r\n        ... 82 more\r\n\r\n```\r\n\r\nHow can I integrate Resteasy and Spring with JTA correctly? I went throuh many official document and other post but it did not help so please help me if someone know how I can call userDAO.findCountById with proper transaction. The transaction aop configuration for spring classes is working but not for classes annotated with @ path and @ componant","title":"Unable to locate current JTA transaction during integration of Jboss Resteasy and Spring","body":"<p>Can any one help me with correct approach to integrate Resteasy and Spring with AOP declartive configuration for JTA transaction.</p>\n<p>The configuration is as per below,</p>\n<p><strong>Project structure:</strong></p>\n<pre><code>com.example.dao\n   - UserDAO\ncom.example.daoimpl\n   - UserDAOImpl\ncom.example.services.api\n   - EmployeeApi\ncom.example.services.api.impl\n   - EmployeeApiImpl\n</code></pre>\n<p><strong>aop.xml</strong></p>\n<pre><code>    &lt;tx:advice id=&quot;txServiceAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;\n        &lt;tx:attributes&gt;\n            &lt;!-- all methods starting with search/view/get/is are read-only --&gt;\n            &lt;tx:method name=&quot;search*&quot; read-only=&quot;true&quot;/&gt;\n            &lt;tx:method name=&quot;view*&quot; read-only=&quot;true&quot;/&gt;\n            &lt;tx:method name=&quot;get*&quot; read-only=&quot;true&quot;/&gt;\n            &lt;tx:method name=&quot;is*&quot; read-only=&quot;true&quot;/&gt;\n\n            &lt;!-- all other methods require transaction --&gt;\n            &lt;tx:method name=&quot;*&quot; read-only=&quot;false&quot;\n                propagation=&quot;REQUIRED&quot;\n                isolation=&quot;READ_COMMITTED&quot;\n                rollback-for=&quot;RuntimeException&quot;\n                no-rollback-for=&quot;ServiceException&quot; /&gt;\n\n        &lt;/tx:attributes&gt;\n    &lt;/tx:advice&gt;\n\n       &lt;aop:config&gt;\n          &lt;aop:pointcut id=&quot;restApiPointcut&quot; expression=&quot;execution(* com.example.services.*.*(..))&quot;/&gt;\n          &lt;aop:advisor advice-ref=&quot;txServiceAdvice&quot; pointcut-ref=&quot;restApiPointcut&quot;/&gt;\n       &lt;/aop:config&gt;\n     \n</code></pre>\n<p>I followed the ApplicationContextAware intrefaces approch mentioned here <a href=\"https://mkyong.com/webservices/jax-rs/resteasy-spring-integration-example/\" rel=\"nofollow noreferrer\">https://mkyong.com/webservices/jax-rs/resteasy-spring-integration-example/</a></p>\n<p>The EmployeeApiImpl look like below,</p>\n<pre><code>@Path(&quot;/requests&quot;)\n@Component\npublic class EmployeeApiImpl {\n\n\n\n   @GET\n   @Path(&quot;/{id}&quot;)\n   @Produces({MediaType.APPLICATION_JSON})\n   @Transactional\n   public int findUserCountByEmpId(@PathParam(value = &quot;id&quot;) Long id) throws ServiceException {\n      UserDAO userDAO= SpringApplicationContext.getBean(&quot;UserDAO&quot;, UserDAOImpl.class);\n      return userDAO.findCountById(id);\n   }\n\n}\n</code></pre>\n<p>When I call the api then it's giving below error,</p>\n<pre><code> 14:59:27,477 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /example-fe-war/api/requests/170: org.jboss.resteasy.spi.UnhandledException: org.hibernate.HibernateException: Unable to locate current JTA transaction\n        at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:82)\n        at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:346)\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:193)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:457)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135)\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)\n        at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215)\n        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:245)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:61)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\n        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n        at org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:71)\n        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\n        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)\n        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n        at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)\n        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n        at io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\n        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n        at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: org.hibernate.HibernateException: Unable to locate current JTA transaction\n        at org.hibernate.context.internal.JTASessionContext.currentSession(JTASessionContext.java:75)\n        at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:464)\n        atcom.example.dao.application.application.impl.AbstractBaseDAOImpl.getSession(AbstractBaseDAOImpl.java:116)\n        atcom.example.dao.application.application.impl.GenericDAOImpl.findById(GenericDAOImpl.java:43)\n        at com.example.services.api.impl.EmployeeApiImpl.findCountById(EmployeeApiImpl.java:29)\n        at com.example.services.api.impl.EmployeeApiImpl$Proxy$_$$_WeldClientProxy.findCountById(Unknown Source)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:138)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:546)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:435)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$0(ResourceMethodInvoker.java:396)\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:398)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:365)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:338)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:440)\n        ... 60 more\n</code></pre>\n<p>---------------added service layer as per suggestion-------------------------</p>\n<pre><code>@Path(&quot;/requests&quot;)\npublic class EmployeeApiImpl   {\n\n   @GET\n   @Path(&quot;/{id}&quot;)\n   @Produces({MediaType.APPLICATION_JSON})\n   public int findUserCountByEmpId(@PathParam(value = &quot;id&quot;) Long id) throws ServiceException {\n      ExampleService exampleService = SpringApplicationContext.getBean(&quot;exampleService&quot;, ExampleService.class);\n      return exampleService.findUserCountByEmpId(id);\n   }\n\n}\n</code></pre>\n<pre><code>public class ExampleService {\n\n\n   @Transactional\n   public int findUserCountByEmpId(Long id) throws ServiceException {\n     UserDAO userDAO= SpringApplicationContext.getBean(&quot;UserDAO&quot;, UserDAOImpl.class);\n      return userDAO.findCountById(id);\n   }\n}\n\n</code></pre>\n<pre><code>13:17:02,254 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /example-fe-war/api/requests/170: org.jboss.resteasy.spi.UnhandledException: javax.ws.rs.ProcessingException: RESTEASY008205: JSON Binding serialization error javax.json.bind.JsonbException: Unable to serialize property 'Address' from com.example.entities.User\n        at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:356)\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:193)\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:539)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:461)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135)\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)\n        at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215)\n        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:245)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:61)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\n        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n        at org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:71)\n        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\n        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\n        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)\n        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n        at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)\n        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n        at io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\n        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n        at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: javax.ws.rs.ProcessingException: RESTEASY008205: JSON Binding serialization error javax.json.bind.JsonbException: Unable to serialize property 'Address' from com.example.entities.User\n        at org.jboss.resteasy.plugins.providers.jsonb.JsonBindingProvider.writeTo(JsonBindingProvider.java:160)\n        at org.jboss.resteasy.core.interception.AbstractWriterInterceptorContext.writeTo(AbstractWriterInterceptorContext.java:137)\n        at org.jboss.resteasy.core.interception.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:61)\n        at org.jboss.resteasy.core.interception.AbstractWriterInterceptorContext.proceed(AbstractWriterInterceptorContext.java:124)\n        at org.jboss.resteasy.security.doseta.DigitalSigningInterceptor.aroundWriteTo(DigitalSigningInterceptor.java:147)\n        at org.jboss.resteasy.core.interception.AbstractWriterInterceptorContext.proceed(AbstractWriterInterceptorContext.java:129)\n        at org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$2(ServerResponseWriter.java:151)\n        at org.jboss.resteasy.core.interception.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:399)\n        at org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:219)\n        at org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:95)\n        at org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:69)\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:530)\n        ... 61 more\nCaused by: javax.json.bind.JsonbException: Unable to serialize property 'User' from com.example.entities.Address\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:67)\n        at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serialize(AbstractContainerSerializer.java:64)\n        at org.eclipse.yasson.internal.Marshaller.serializeRoot(Marshaller.java:148)\n        at org.eclipse.yasson.internal.Marshaller.marshall(Marshaller.java:76)\n        at org.eclipse.yasson.internal.Marshaller.marshall(Marshaller.java:102)\n        at org.eclipse.yasson.internal.JsonBinding.toJson(JsonBinding.java:118)\n        at org.jboss.resteasy.plugins.providers.jsonb.JsonBindingProvider.writeTo(JsonBindingProvider.java:156)\n        ... 72 more\nCaused by: javax.json.bind.JsonbException: Unable to serialize property 'additionalRequestTypeInfo' from com.example.entities.User_$$_jvst356_26b\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:67)\n        at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serialize(AbstractContainerSerializer.java:64)\n        at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serializerCaptor(AbstractContainerSerializer.java:96)\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.marshallProperty(ObjectSerializer.java:110)\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:65)\n        ... 78 more\nCaused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session\n        at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:153)\n        at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:266)\n        at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:73)\n        at com.example.entities.User_$$_jvst356_26b.toString(User_$$_jvst356_26b.java)\n        at java.lang.String.valueOf(String.java:2994)\n        at java.lang.StringBuilder.append(StringBuilder.java:131)\n        at org.eclipse.yasson.internal.model.GetValueCommand.getValue(GetValueCommand.java:36)\n        at org.eclipse.yasson.internal.model.ReflectionPropagation.getValue(ReflectionPropagation.java:73)\n        at org.eclipse.yasson.internal.model.PropertyModel.getValue(PropertyModel.java:284)\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.marshallProperty(ObjectSerializer.java:87)\n        at org.eclipse.yasson.internal.serializer.ObjectSerializer.serializeInternal(ObjectSerializer.java:65)\n        ... 82 more\n\n</code></pre>\n<p>How can I integrate Resteasy and Spring with JTA correctly? I went throuh many official document and other post but it did not help so please help me if someone know how I can call userDAO.findCountById with proper transaction. The transaction aop configuration for spring classes is working but not for classes annotated with @ path and @ componant</p>\n"},{"tags":["java","kotlin","arraylist","android-recyclerview","android-sqlite"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675236936,"creation_date":1675198910,"answer_id":75303105,"question_id":75275927,"body_markdown":"**Answer one**, rebuild/refresh the recyclerview with new data after changing the database.\r\n\r\n**Answer two**\r\nRoughly speaking you have to \r\n\r\n1. ascertain the range of the affected rows (those whose order is between the from an to)\r\n1. shift the values of the affected rows that are NOT the row being moved using the value from the next row in the direction of the move\r\n1. change the value in the moved row\r\n\r\n\r\nThis is quite complex especially if all of the stages are to be combined. However, this is achievable with SQLite using Common Table Expressions (temporary tables that exist just for the duration of the query).\r\n\r\nThe following is a demonstration that solves the issue posed i.e. changing from:-\r\n\r\n[![enter image description here][1]][1]\r\n\r\nto \r\n\r\n[![enter image description here][2]][2]\r\n\r\nThis is the demo (commented and formatted) that demonstrates the core query that would be implemented in Room (the comments indicate the core query):-\r\n\r\n    /* Just in case the environment has not been cleanup, clean it up*/\r\n    DROP TABLE If EXISTS example;\r\n    /* Create the table to be demonstrated */\r\n    CREATE TABLE IF NOT EXISTS example (\r\n    \torderinrecyclerview INTEGER, \r\n    \torderfieldvaluesfromtable INTEGER, \r\n    \ttextfieldvaluesfromtable TEXT\r\n    );\r\n    /* Add the data for the demo */\r\n    INSERT INTO example VALUES\r\n    \t(0,2,&#39;Item 1&#39;),\r\n    \t(1,5,&#39;Item 2&#39;),\r\n    \t(2,7,&#39;Item 3&#39;),\r\n    \t(3,9,&#39;Item 4&#39;),\r\n    \t(4,12,&#39;Item 5&#39;),\r\n    \t(5,16,&#39;Item 6&#39;)\r\n    ;\r\n    /* Show the original data as RESULT 1 */\r\n    SELECT * FROM example ORDER BY orderfieldvaluesfromtable;\r\n    \r\n    /*&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; THIS IS THE CORE QUERY BEING DEMONSTRATED &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;*/\r\n    WITH \r\n    \t/* CTE (Common Table Expression which is temp table that exists only for the duration of the query) \r\n    \t\tstore the from and to values for the move to be made, \r\n    \t\tso values can be obtained whenever needed\r\n    \t*/\r\n    \tcte_args(fromvalue,tovalue) AS (\r\n    \t\tSELECT \r\n    \t\t\t12 /* will not be hard coded but passed/bound via  arg*/,\r\n    \t\t\t5 /* will not be hard coded but passed/bound via arg */\r\n    \t\t) /* from to values*/,\r\n    \t\t\r\n    \t/* Second CTE to get all the rows that will be affected, along with the new replacement value */\r\n    \t/* This is done in two stages \r\n    \t\tstage one gets all affected rows EXCEPT the actual row being moved.\r\n    \t\tstage two gets the actual row being changed\r\n    \t*/\r\n    \tcte_rowstochange(rowid,originalorder,neworder) AS (\r\n    \t\tSELECT \r\n    \t\t\trowid, /* the rowid (always exists for tables unless WITHOUT ROWID table (ROOM does not support WITHOUT ROWID tables)) */\r\n    \t\t\torderfieldvaluesfromtable,\r\n    \t\t\t(\r\n    \t\t\t\tSELECT orderfieldvaluesfromtable \r\n    \t\t\t\t\tFROM example \r\n    \t\t\t\t\tWHERE orderfieldvaluesfromtable &gt; e.orderfieldvaluesfromtable /* e is the primary query example table as opposed to subquery example table */\r\n    \t\t\t\t\tORDER BY orderfieldvaluesfromtable ASC /* want the next higher */\r\n    \t\t\t\t\tLIMIT 1 /* only want the 1 value */\r\n    \t\t\t) /* The value of the order in the next row (next higher order) */\r\n    \t\t\tFROM example AS e /* need to alias the table for WHERE clause above which accesses the same table */\r\n    \t\t\tWHERE orderfieldvaluesfromtable &gt;= (SELECT tovalue FROM cte_args)\r\n    \t\t\tAND orderfieldvaluesfromtable &lt; (SELECT fromvalue FROM cte_args)\r\n    \t\t\tUNION ALL SELECT \r\n    \t\t\t\trowid,\r\n    \t\t\t\torderfieldvaluesfromtable,\r\n    \t\t\t\t(\r\n    \t\t\t\t\tSELECT tovalue FROM cte_args\r\n    \t\t\t\t)\r\n    \t\t\t\tFROM example\r\n    \t\t\t\tWHERE orderfieldvaluesfromtable = (SELECT fromvalue FROM cte_args)\r\n                    ORDER BY orderfieldvaluesfromtable ASC\r\n    \t)\r\n    UPDATE example \r\n    \tSET orderfieldvaluesfromtable = (\r\n    \t\tSELECT neworder \r\n    \t\tFROM cte_rowstochange \r\n    \t\tWHERE example.rowid = cte_rowstochange.rowid\r\n    \t) \r\n    \tWHERE rowid IN (\r\n    \t\tSELECT rowid FROM cte_rowstochange\r\n    \t\t)\r\n    ;\r\n    /*&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; END OF THE CORE QUERY &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;*/\r\n    SELECT * FROM example ORDER BY orderfieldvaluesfromtable;\r\n    \r\n    /* Cleanup testing environment */\r\n    DROP TABLE If EXISTS example;\r\n\r\n\r\nTo use the above in Room, then you just need the core query (adjusted to table args for the from an to values) e.g. :-\r\n\r\n    Query(&quot;WITH cte_args(:fromvalue,:tovalue) AS (SELECT\t12,5),cte_rowstochange(rowid,originalorder,neworder) AS (SELECT rowid,orderfieldvaluesfromtable,(SELECT orderfieldvaluesfromtable FROM example WHERE orderfieldvaluesfromtable &gt; e.orderfieldvaluesfromtable ORDER BY orderfieldvaluesfromtable ASC LIMIT 1) FROM example AS e WHERE orderfieldvaluesfromtable &gt;= (SELECT tovalue FROM cte_args) AND orderfieldvaluesfromtable &lt; (SELECT fromvalue FROM cte_args) UNION ALL SELECT rowid,orderfieldvaluesfromtable,(SELECT tovalue FROM cte_args) FROM example WHERE orderfieldvaluesfromtable = (SELECT fromvalue FROM cte_args) ORDER BY orderfieldvaluesfromtable ASC) UPDATE example SET orderfieldvaluesfromtable = (SELECT neworder FROM cte_rowstochange WHERE example.rowid = cte_rowstochange.rowid) WHERE rowid IN (SELECT rowid FROM cte_rowstochange);&quot;)\r\n    fun moveOrderDown(fromvalue: Int,tovalue: Int)\r\n\r\n- **NOTE** obviously the component names (tables and columns therein) would have to be changed to suit the actual tables and columns i.e.\r\n    - the tablename **example** would have to be changed to reflect whatever that table is\r\n    - column **orderfieldvaluesfromtable** would have to be changed.\r\n- Other component names can remain as is i.e.\r\n    - **rowid**, **e**, **tovalue**, **fromvalue**, **neworder**, **cte_args** and **cte_rowstochange** \r\n    - all except **rowid** could be changed consistently if required. **rowid** MUST be **rowid** it is the name of a hidden column that exists in all tables that are not WITHOUT ROWID tables or virtual tables (none of which Room supports directly (full text search aka FTS being an exception)).\r\n\r\n**Important**\r\nThe above just solves moving an order to a lower order. The logic for the move to a higher order would be similar but reversed. You would likely want a `moveOrderUp` function. You could perhaps have a third function that determines which move function to invoke e.g.\r\n\r\n    fun moveOrder(fromvalue: Int, tovalue: Int) {\r\n        if (fromvalue == tovalue) return\r\n        if (fromvalue &gt; tovalue) {\r\n            moveOrderDown(fromvalue,tovalue)\r\n        } else {\r\n            moveOrderUp(fromvalue,tovalue)\r\n        }\r\n    }\r\n\r\nFurther more the solution is in-principle and has not been exhaustively tested and may therefore have undetected issues.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cQjkn.png\r\n  [2]: https://i.stack.imgur.com/duxZr.png","title":"How can I change the order of my recyclerView items by changing values in the database?","body":"<p><strong>Answer one</strong>, rebuild/refresh the recyclerview with new data after changing the database.</p>\n<p><strong>Answer two</strong>\nRoughly speaking you have to</p>\n<ol>\n<li>ascertain the range of the affected rows (those whose order is between the from an to)</li>\n<li>shift the values of the affected rows that are NOT the row being moved using the value from the next row in the direction of the move</li>\n<li>change the value in the moved row</li>\n</ol>\n<p>This is quite complex especially if all of the stages are to be combined. However, this is achievable with SQLite using Common Table Expressions (temporary tables that exist just for the duration of the query).</p>\n<p>The following is a demonstration that solves the issue posed i.e. changing from:-</p>\n<p><a href=\"https://i.stack.imgur.com/cQjkn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cQjkn.png\" alt=\"enter image description here\" /></a></p>\n<p>to</p>\n<p><a href=\"https://i.stack.imgur.com/duxZr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/duxZr.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the demo (commented and formatted) that demonstrates the core query that would be implemented in Room (the comments indicate the core query):-</p>\n<pre><code>/* Just in case the environment has not been cleanup, clean it up*/\nDROP TABLE If EXISTS example;\n/* Create the table to be demonstrated */\nCREATE TABLE IF NOT EXISTS example (\n    orderinrecyclerview INTEGER, \n    orderfieldvaluesfromtable INTEGER, \n    textfieldvaluesfromtable TEXT\n);\n/* Add the data for the demo */\nINSERT INTO example VALUES\n    (0,2,'Item 1'),\n    (1,5,'Item 2'),\n    (2,7,'Item 3'),\n    (3,9,'Item 4'),\n    (4,12,'Item 5'),\n    (5,16,'Item 6')\n;\n/* Show the original data as RESULT 1 */\nSELECT * FROM example ORDER BY orderfieldvaluesfromtable;\n\n/*&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; THIS IS THE CORE QUERY BEING DEMONSTRATED &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;*/\nWITH \n    /* CTE (Common Table Expression which is temp table that exists only for the duration of the query) \n        store the from and to values for the move to be made, \n        so values can be obtained whenever needed\n    */\n    cte_args(fromvalue,tovalue) AS (\n        SELECT \n            12 /* will not be hard coded but passed/bound via  arg*/,\n            5 /* will not be hard coded but passed/bound via arg */\n        ) /* from to values*/,\n        \n    /* Second CTE to get all the rows that will be affected, along with the new replacement value */\n    /* This is done in two stages \n        stage one gets all affected rows EXCEPT the actual row being moved.\n        stage two gets the actual row being changed\n    */\n    cte_rowstochange(rowid,originalorder,neworder) AS (\n        SELECT \n            rowid, /* the rowid (always exists for tables unless WITHOUT ROWID table (ROOM does not support WITHOUT ROWID tables)) */\n            orderfieldvaluesfromtable,\n            (\n                SELECT orderfieldvaluesfromtable \n                    FROM example \n                    WHERE orderfieldvaluesfromtable &gt; e.orderfieldvaluesfromtable /* e is the primary query example table as opposed to subquery example table */\n                    ORDER BY orderfieldvaluesfromtable ASC /* want the next higher */\n                    LIMIT 1 /* only want the 1 value */\n            ) /* The value of the order in the next row (next higher order) */\n            FROM example AS e /* need to alias the table for WHERE clause above which accesses the same table */\n            WHERE orderfieldvaluesfromtable &gt;= (SELECT tovalue FROM cte_args)\n            AND orderfieldvaluesfromtable &lt; (SELECT fromvalue FROM cte_args)\n            UNION ALL SELECT \n                rowid,\n                orderfieldvaluesfromtable,\n                (\n                    SELECT tovalue FROM cte_args\n                )\n                FROM example\n                WHERE orderfieldvaluesfromtable = (SELECT fromvalue FROM cte_args)\n                ORDER BY orderfieldvaluesfromtable ASC\n    )\nUPDATE example \n    SET orderfieldvaluesfromtable = (\n        SELECT neworder \n        FROM cte_rowstochange \n        WHERE example.rowid = cte_rowstochange.rowid\n    ) \n    WHERE rowid IN (\n        SELECT rowid FROM cte_rowstochange\n        )\n;\n/*&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; END OF THE CORE QUERY &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;*/\nSELECT * FROM example ORDER BY orderfieldvaluesfromtable;\n\n/* Cleanup testing environment */\nDROP TABLE If EXISTS example;\n</code></pre>\n<p>To use the above in Room, then you just need the core query (adjusted to table args for the from an to values) e.g. :-</p>\n<pre><code>Query(&quot;WITH cte_args(:fromvalue,:tovalue) AS (SELECT    12,5),cte_rowstochange(rowid,originalorder,neworder) AS (SELECT rowid,orderfieldvaluesfromtable,(SELECT orderfieldvaluesfromtable FROM example WHERE orderfieldvaluesfromtable &gt; e.orderfieldvaluesfromtable ORDER BY orderfieldvaluesfromtable ASC LIMIT 1) FROM example AS e WHERE orderfieldvaluesfromtable &gt;= (SELECT tovalue FROM cte_args) AND orderfieldvaluesfromtable &lt; (SELECT fromvalue FROM cte_args) UNION ALL SELECT rowid,orderfieldvaluesfromtable,(SELECT tovalue FROM cte_args) FROM example WHERE orderfieldvaluesfromtable = (SELECT fromvalue FROM cte_args) ORDER BY orderfieldvaluesfromtable ASC) UPDATE example SET orderfieldvaluesfromtable = (SELECT neworder FROM cte_rowstochange WHERE example.rowid = cte_rowstochange.rowid) WHERE rowid IN (SELECT rowid FROM cte_rowstochange);&quot;)\nfun moveOrderDown(fromvalue: Int,tovalue: Int)\n</code></pre>\n<ul>\n<li><strong>NOTE</strong> obviously the component names (tables and columns therein) would have to be changed to suit the actual tables and columns i.e.\n<ul>\n<li>the tablename <strong>example</strong> would have to be changed to reflect whatever that table is</li>\n<li>column <strong>orderfieldvaluesfromtable</strong> would have to be changed.</li>\n</ul>\n</li>\n<li>Other component names can remain as is i.e.\n<ul>\n<li><strong>rowid</strong>, <strong>e</strong>, <strong>tovalue</strong>, <strong>fromvalue</strong>, <strong>neworder</strong>, <strong>cte_args</strong> and <strong>cte_rowstochange</strong></li>\n<li>all except <strong>rowid</strong> could be changed consistently if required. <strong>rowid</strong> MUST be <strong>rowid</strong> it is the name of a hidden column that exists in all tables that are not WITHOUT ROWID tables or virtual tables (none of which Room supports directly (full text search aka FTS being an exception)).</li>\n</ul>\n</li>\n</ul>\n<p><strong>Important</strong>\nThe above just solves moving an order to a lower order. The logic for the move to a higher order would be similar but reversed. You would likely want a <code>moveOrderUp</code> function. You could perhaps have a third function that determines which move function to invoke e.g.</p>\n<pre><code>fun moveOrder(fromvalue: Int, tovalue: Int) {\n    if (fromvalue == tovalue) return\n    if (fromvalue &gt; tovalue) {\n        moveOrderDown(fromvalue,tovalue)\n    } else {\n        moveOrderUp(fromvalue,tovalue)\n    }\n}\n</code></pre>\n<p>Further more the solution is in-principle and has not been exhaustively tested and may therefore have undetected issues.</p>\n"}],"owner":{"account_id":12339438,"reputation":81,"user_id":9003215,"display_name":"DevPeter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675236936,"creation_date":1675004923,"question_id":75275927,"body_markdown":"In my app, the user should be able to change the order of the item. I am having the data from the table by SELECT statement order by Order field, and storing the result in the List. Then I am showing the List data in the Recycler View.\r\n\r\nI would like to move &quot;Item 5 &quot; from recycler view position 4, and Order field value 12 to recycler view position 1.\r\n\r\n**My first question** : \r\nHow do I move the Item 5 to recycler position 1 using Java/Kotlin?\r\n\r\n**My second question**: \r\nHow do I move the Item 5 to recycler position 1 and change the Order field in DB accordingly? Means when I move the Item 5 to recycler position 1 the Item 5 Order field should change to 5, \r\nItem 2 Order field should change to 7, \r\nItem 3 Order field should change to 9 , \r\nItem 4 Order field should change to 12 \r\n\r\n**The Recycler View items:**\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NamiT.png","title":"How can I change the order of my recyclerView items by changing values in the database?","body":"<p>In my app, the user should be able to change the order of the item. I am having the data from the table by SELECT statement order by Order field, and storing the result in the List. Then I am showing the List data in the Recycler View.</p>\n<p>I would like to move &quot;Item 5 &quot; from recycler view position 4, and Order field value 12 to recycler view position 1.</p>\n<p><strong>My first question</strong> :\nHow do I move the Item 5 to recycler position 1 using Java/Kotlin?</p>\n<p><strong>My second question</strong>:\nHow do I move the Item 5 to recycler position 1 and change the Order field in DB accordingly? Means when I move the Item 5 to recycler position 1 the Item 5 Order field should change to 5,\nItem 2 Order field should change to 7,\nItem 3 Order field should change to 9 ,\nItem 4 Order field should change to 12</p>\n<p><strong>The Recycler View items:</strong>\n<a href=\"https://i.stack.imgur.com/NamiT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NamiT.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","file","sorting"],"comments":[{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":1,"creation_date":1224027729,"post_id":203030,"comment_id":77708,"body_markdown":"what&#39;s with the &quot;new long&quot; part of this?  why don&#39;t you just compare the longs themselves?  that would avoid you creating tons of longs just to get to the compareTo method...","body":"what&#39;s with the &quot;new long&quot; part of this?  why don&#39;t you just compare the longs themselves?  that would avoid you creating tons of longs just to get to the compareTo method..."},{"owner":{"account_id":3216,"reputation":12095,"user_id":4600,"display_name":"marcospereira"},"score":0,"creation_date":1224042020,"post_id":203030,"comment_id":77969,"body_markdown":"This code don&#39;t compiles. compare methods expect that the return is a int instead of a Long.","body":"This code don&#39;t compiles. compare methods expect that the return is a int instead of a Long."},{"owner":{"account_id":3348,"reputation":26272,"user_id":4828,"accept_rate":100,"display_name":"cwick"},"score":0,"creation_date":1224085581,"post_id":203030,"comment_id":78970,"body_markdown":"I chose this form because it is less verbose ; it&#39;s a choice between a one-liner and a 6-liner.  You&#39;re right that new&#39;ing up all these Longs could be an issue.  What about using Long.valueOf, so Java at least has a chance to cache frequent values?","body":"I chose this form because it is less verbose ; it&#39;s a choice between a one-liner and a 6-liner.  You&#39;re right that new&#39;ing up all these Longs could be an issue.  What about using Long.valueOf, so Java at least has a chance to cache frequent values?"},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1339881006,"post_id":203030,"comment_id":14483609,"body_markdown":"Thanks this helped. http://stackoverflow.com/questions/7469643/how-to-sort-alphabetically-while-ignoring-case-sensitive","body":"Thanks this helped. <a href=\"http://stackoverflow.com/questions/7469643/how-to-sort-alphabetically-while-ignoring-case-sensitive\" title=\"how to sort alphabetically while ignoring case sensitive\">stackoverflow.com/questions/7469643/&hellip;</a>"},{"owner":{"account_id":186063,"reputation":17556,"user_id":423171,"accept_rate":83,"display_name":"cprcrack"},"score":2,"creation_date":1407413150,"post_id":203030,"comment_id":39210087,"body_markdown":"**Am I the only one that considers this solution insane?** You are calling `file.lastModified()` a huge amount of times. Better get all dates first and order later, so that `file.lastModified()` is only called once per file.","body":"<b>Am I the only one that considers this solution insane?</b> You are calling <code>file.lastModified()</code> a huge amount of times. Better get all dates first and order later, so that <code>file.lastModified()</code> is only called once per file."},{"owner":{"account_id":1874735,"reputation":8514,"user_id":1696171,"accept_rate":73,"display_name":"Eric Cochran"},"score":0,"creation_date":1408836539,"post_id":203030,"comment_id":39742418,"body_markdown":"return (int) (file0.lastModified() - file1.lastModified());  much cleaner","body":"return (int) (file0.lastModified() - file1.lastModified());  much cleaner"},{"owner":{"account_id":1874735,"reputation":8514,"user_id":1696171,"accept_rate":73,"display_name":"Eric Cochran"},"score":0,"creation_date":1408851916,"post_id":203030,"comment_id":39744300,"body_markdown":"My above comment will, of course, fail for large longs.  So, not the best idea.  never mind :).","body":"My above comment will, of course, fail for large longs.  So, not the best idea.  never mind :)."},{"owner":{"account_id":1187242,"reputation":997,"user_id":1160965,"accept_rate":70,"display_name":"jlunavtgrad"},"score":1,"creation_date":1484856920,"post_id":203030,"comment_id":70694214,"body_markdown":"You can use apache commons comparator: `Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_REVERSE);`","body":"You can use apache commons comparator: <code>Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_REVERSE);</code>"},{"owner":{"account_id":5282747,"reputation":137,"user_id":4304114,"display_name":"starbroken"},"score":6,"creation_date":1516024644,"post_id":203030,"comment_id":83511683,"body_markdown":"There is a better solution with Java 8 (see viniciussss answer) : `Arrays.sort(files, Comparator.comparingLong(File::lastModified));`","body":"There is a better solution with Java 8 (see viniciussss answer) : <code>Arrays.sort(files, Comparator.comparingLong(File::lastModified));</code>"},{"owner":{"account_id":232145,"reputation":1695,"user_id":496792,"accept_rate":74,"display_name":"pakman"},"score":0,"creation_date":1517615939,"post_id":203030,"comment_id":84182369,"body_markdown":"Java 8 style: Files.list(path).sorted((p1, p2) -&gt; Long.signum(p1.toFile().lastModified() - p2.toFile().lastModified())).forEach(p -&gt; System.out.println(p));","body":"Java 8 style: Files.list(path).sorted((p1, p2) -&gt; Long.signum(p1.toFile().lastModified() - p2.toFile().lastModified())).forEach(p -&gt; System.out.println(p));"},{"owner":{"account_id":5614307,"reputation":390,"user_id":4446181,"display_name":"Vo Thanh Tung"},"score":0,"creation_date":1579242797,"post_id":203030,"comment_id":105708095,"body_markdown":"using lambda \n`Arrays.sort(files, (File f1, File f2) -&gt; Long.valueOf(f1.lastModified()).compareTo(f2.lastModified())); `","body":"using lambda  <code>Arrays.sort(files, (File f1, File f2) -&gt; Long.valueOf(f1.lastModified()).compareTo(f2.lastModified())&zwnj;&#8203;); </code>"}],"answers":[{"comments":[{"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"score":0,"creation_date":1224022627,"post_id":203057,"comment_id":77592,"body_markdown":"How do I fix the formatting here?  Looks fine in the preview but the 4th link is screwed.","body":"How do I fix the formatting here?  Looks fine in the preview but the 4th link is screwed."},{"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"score":1,"creation_date":1422471947,"post_id":203057,"comment_id":44766883,"body_markdown":"File.lastModified might change while sorting end result in a Comparison Method Violation Error, see: http://stackoverflow.com/questions/20431031 See http://stackoverflow.com/a/4248059/314089 for a possible better solution.","body":"File.lastModified might change while sorting end result in a Comparison Method Violation Error, see: <a href=\"http://stackoverflow.com/questions/20431031\">stackoverflow.com/questions/20431031</a> See <a href=\"http://stackoverflow.com/a/4248059/314089\">stackoverflow.com/a/4248059/314089</a> for a possible better solution."}],"tags":[],"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"comment_count":2,"down_vote_count":0,"up_vote_count":108,"is_accepted":true,"score":108,"last_activity_date":1272921405,"creation_date":1224022375,"answer_id":203057,"question_id":203030,"body_markdown":"I think your solution is the only sensible way.  The only way to get the list of files is to use [File.listFiles()][1] and the documentation states that this makes no guarantees about the order of the files returned.  Therefore you need to write a [Comparator][2] that uses [File.lastModified()][3] and pass this, along with the array of files, to [Arrays.sort()][4].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/io/File.html#listFiles()\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Comparator.html\r\n  [3]: http://java.sun.com/javase/6/docs/api/java/io/File.html#lastModified()\r\n  [4]: http://java.sun.com/javase/6/docs/api/java/util/Arrays.html#sort(T[],%20java.util.Comparator)","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>I think your solution is the only sensible way.  The only way to get the list of files is to use <a href=\"http://java.sun.com/javase/6/docs/api/java/io/File.html#listFiles()\" rel=\"noreferrer\">File.listFiles()</a> and the documentation states that this makes no guarantees about the order of the files returned.  Therefore you need to write a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"noreferrer\">Comparator</a> that uses <a href=\"http://java.sun.com/javase/6/docs/api/java/io/File.html#lastModified()\" rel=\"noreferrer\">File.lastModified()</a> and pass this, along with the array of files, to <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Arrays.html#sort(T[],%20java.util.Comparator)\" rel=\"noreferrer\">Arrays.sort()</a>.</p>\n"},{"comments":[{"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"score":5,"creation_date":1344005610,"post_id":203088,"comment_id":15675736,"body_markdown":"There is a strange error in javadoc with this solution, because javadoc says to use &quot;LastModifiedFileComparator.LASTMODIFIED_COMPARATOR.sort(list);&quot; to sort a list, but LASTMODIFIED_COMPARATOR is declared as &quot;Comparator&lt;File&gt;&quot;, so it does not expose any &quot;sort&quot; method.","body":"There is a strange error in javadoc with this solution, because javadoc says to use &quot;LastModifiedFileComparator.LASTMODIFIED_COMPARATOR.sort(lis&zwnj;&#8203;t);&quot; to sort a list, but LASTMODIFIED_COMPARATOR is declared as &quot;Comparator&lt;File&gt;&quot;, so it does not expose any &quot;sort&quot; method."},{"owner":{"account_id":1608324,"reputation":1145,"user_id":1487926,"accept_rate":56,"display_name":"cleroo"},"score":4,"creation_date":1345103305,"post_id":203088,"comment_id":15976556,"body_markdown":"Use it like this : [link](http://www.avajava.com/tutorials/lessons/how-do-i-sort-an-array-of-files-according-to-their-last-modified-dates.html)","body":"Use it like this : <a href=\"http://www.avajava.com/tutorials/lessons/how-do-i-sort-an-array-of-files-according-to-their-last-modified-dates.html\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"score":1,"creation_date":1422471976,"post_id":203088,"comment_id":44766903,"body_markdown":"File.lastModified might change while sorting end result in a Comparison Method Violation Error, see: http://stackoverflow.com/questions/20431031 See http://stackoverflow.com/a/4248059/314089 for a possible better solution.","body":"File.lastModified might change while sorting end result in a Comparison Method Violation Error, see: <a href=\"http://stackoverflow.com/questions/20431031\">stackoverflow.com/questions/20431031</a> See <a href=\"http://stackoverflow.com/a/4248059/314089\">stackoverflow.com/a/4248059/314089</a> for a possible better solution."},{"owner":{"account_id":478953,"reputation":1909,"user_id":891338,"accept_rate":91,"display_name":"redDevil"},"score":1,"creation_date":1444415819,"post_id":203088,"comment_id":53910892,"body_markdown":"love apache commons, that saved a lot of time,","body":"love apache commons, that saved a lot of time,"}],"tags":[],"owner":{"account_id":9317,"reputation":761,"user_id":17163,"display_name":"user17163"},"comment_count":4,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1386358546,"creation_date":1224023091,"answer_id":203088,"question_id":203030,"body_markdown":"You might also look at [apache commons IO][1], it has a built in [last modified comparator][2] and many other nice utilities for working with files.\r\n\r\n\r\n  [1]: http://commons.apache.org/io/\r\n  [2]: http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/comparator/LastModifiedFileComparator.html\r\n","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>You might also look at <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">apache commons IO</a>, it has a built in <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/comparator/LastModifiedFileComparator.html\" rel=\"noreferrer\">last modified comparator</a> and many other nice utilities for working with files.</p>\n"},{"comments":[{"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"score":6,"creation_date":1422393468,"post_id":4248059,"comment_id":44729411,"body_markdown":"Best answer, as it is probably the only one preventing a &quot;Comparison Method Violation Error&quot; if the lastModified changes while sorting?","body":"Best answer, as it is probably the only one preventing a &quot;Comparison Method Violation Error&quot; if the lastModified changes while sorting?"},{"owner":{"account_id":4460891,"reputation":1292,"user_id":3629787,"accept_rate":80,"display_name":"Android developer"},"score":2,"creation_date":1494400889,"post_id":4248059,"comment_id":74806074,"body_markdown":"This should also be used when you&#39;re concerned with not getting IllegalArgumentException due to comparison method violation. Method using Map will fail if there is more than one file with the same lastModified value which would result in omitting these files. This definitely should be an accepted answer.","body":"This should also be used when you&#39;re concerned with not getting IllegalArgumentException due to comparison method violation. Method using Map will fail if there is more than one file with the same lastModified value which would result in omitting these files. This definitely should be an accepted answer."}],"tags":[],"owner":{"account_id":33808,"reputation":43283,"user_id":94977,"accept_rate":69,"display_name":"Jason Orendorff"},"comment_count":2,"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1290445594,"creation_date":1290445594,"answer_id":4248059,"question_id":203030,"body_markdown":"This might be faster if you have many files. This uses the decorate-sort-undecorate pattern so that the last-modified date of each file is fetched only *once* rather than every time the sort algorithm compares two files. This potentially reduces the number of I/O calls from O(n log n) to O(n).\r\n\r\nIt&#39;s more code, though, so this should only be used if you&#39;re mainly concerned with speed and it is measurably faster in practice (which I haven&#39;t checked).\r\n\r\n    class Pair implements Comparable {\r\n        public long t;\r\n        public File f;\r\n\r\n        public Pair(File file) {\r\n            f = file;\r\n            t = file.lastModified();\r\n        }\r\n\r\n        public int compareTo(Object o) {\r\n            long u = ((Pair) o).t;\r\n            return t &lt; u ? -1 : t == u ? 0 : 1;\r\n        }\r\n    };\r\n\r\n    // Obtain the array of (file, timestamp) pairs.\r\n    File[] files = directory.listFiles();\r\n    Pair[] pairs = new Pair[files.length];\r\n    for (int i = 0; i &lt; files.length; i++)\r\n        pairs[i] = new Pair(files[i]);\r\n\r\n    // Sort them by timestamp.\r\n    Arrays.sort(pairs);\r\n\r\n    // Take the sorted pairs and extract only the file part, discarding the timestamp.\r\n    for (int i = 0; i &lt; files.length; i++)\r\n        files[i] = pairs[i].f;\r\n","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>This might be faster if you have many files. This uses the decorate-sort-undecorate pattern so that the last-modified date of each file is fetched only <em>once</em> rather than every time the sort algorithm compares two files. This potentially reduces the number of I/O calls from O(n log n) to O(n).</p>\n\n<p>It's more code, though, so this should only be used if you're mainly concerned with speed and it is measurably faster in practice (which I haven't checked).</p>\n\n<pre><code>class Pair implements Comparable {\n    public long t;\n    public File f;\n\n    public Pair(File file) {\n        f = file;\n        t = file.lastModified();\n    }\n\n    public int compareTo(Object o) {\n        long u = ((Pair) o).t;\n        return t &lt; u ? -1 : t == u ? 0 : 1;\n    }\n};\n\n// Obtain the array of (file, timestamp) pairs.\nFile[] files = directory.listFiles();\nPair[] pairs = new Pair[files.length];\nfor (int i = 0; i &lt; files.length; i++)\n    pairs[i] = new Pair(files[i]);\n\n// Sort them by timestamp.\nArrays.sort(pairs);\n\n// Take the sorted pairs and extract only the file part, discarding the timestamp.\nfor (int i = 0; i &lt; files.length; i++)\n    files[i] = pairs[i].f;\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user264541"},"score":1,"creation_date":1369431043,"post_id":9929956,"comment_id":24116300,"body_markdown":"This doesn&#39;t actually sort on the date modified property that was mentioned in the question. The sort function will use the natural ordering of the File object which is the [system-dependent lexicographic on path name](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html).","body":"This doesn&#39;t actually sort on the date modified property that was mentioned in the question. The sort function will use the natural ordering of the File object which is the <a href=\"http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html\" rel=\"nofollow noreferrer\">system-dependent lexicographic on path name</a>."}],"tags":[],"owner":{"account_id":1364727,"reputation":47,"user_id":1301413,"display_name":"Calvin Schultz"},"comment_count":1,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1333040303,"creation_date":1333040303,"answer_id":9929956,"question_id":203030,"body_markdown":"    public String[] getDirectoryList(String path) {\r\n        String[] dirListing = null;\r\n        File dir = new File(path);\r\n        dirListing = dir.list();\r\n        \r\n        Arrays.sort(dirListing, 0, dirListing.length);\r\n        return dirListing;\r\n    }","title":"Best way to list files in Java, sorted by Date Modified?","body":"<pre><code>public String[] getDirectoryList(String path) {\n    String[] dirListing = null;\n    File dir = new File(path);\n    dirListing = dir.list();\n\n    Arrays.sort(dirListing, 0, dirListing.length);\n    return dirListing;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1363475716,"creation_date":1363475716,"answer_id":15455840,"question_id":203030,"body_markdown":"You can try guava [Ordering][1]:\r\n\r\n\r\n    Function&lt;File, Long&gt; getLastModified = new Function&lt;File, Long&gt;() {\r\n        public Long apply(File file) {\r\n            return file.lastModified();\r\n        }\r\n    };\r\n    \r\n    List&lt;File&gt; orderedFiles = Ordering.natural().onResultOf(getLastModified).\r\n                              sortedCopy(files);\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>You can try guava <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html\" rel=\"nofollow\">Ordering</a>:</p>\n\n<pre><code>Function&lt;File, Long&gt; getLastModified = new Function&lt;File, Long&gt;() {\n    public Long apply(File file) {\n        return file.lastModified();\n    }\n};\n\nList&lt;File&gt; orderedFiles = Ordering.natural().onResultOf(getLastModified).\n                          sortedCopy(files);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":953557,"reputation":1673,"user_id":1028367,"accept_rate":57,"display_name":"Matthew Madson"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1583270868,"creation_date":1373668866,"answer_id":17625095,"question_id":203030,"body_markdown":"If the files you are sorting can be modified or updated at the same time the sort is being performed:\r\n------------------------------------------------------------------------\r\n\r\n\r\n----------\r\n\r\n\r\nJava 8+\r\n--------\r\n\r\n    private static List&lt;Path&gt; listFilesOldestFirst(final String directoryPath) throws IOException {\r\n        try (final Stream&lt;Path&gt; fileStream = Files.list(Paths.get(directoryPath))) {\r\n            return fileStream\r\n                .map(Path::toFile)\r\n                .collect(Collectors.toMap(Function.identity(), File::lastModified))\r\n                .entrySet()\r\n                .stream()\r\n                .sorted(Map.Entry.comparingByValue())\r\n    //            .sorted(Collections.reverseOrder(Map.Entry.comparingByValue()))  // replace the previous line with this line if you would prefer files listed newest first\r\n                .map(Map.Entry::getKey)\r\n                .map(File::toPath)  // remove this line if you would rather work with a List&lt;File&gt; instead of List&lt;Path&gt;\r\n                .collect(Collectors.toList());\r\n        }\r\n    }\r\n  \r\n\r\nJava 7\r\n----------\r\n\r\n    private static List&lt;File&gt; listFilesOldestFirst(final String directoryPath) throws IOException {\r\n        final List&lt;File&gt; files = Arrays.asList(new File(directoryPath).listFiles());\r\n        final Map&lt;File, Long&gt; constantLastModifiedTimes = new HashMap&lt;File,Long&gt;();\r\n        for (final File f : files) {\r\n            constantLastModifiedTimes.put(f, f.lastModified());\r\n        }\r\n\t\tCollections.sort(files, new Comparator&lt;File&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic int compare(final File f1, final File f2) {\r\n                return constantLastModifiedTimes.get(f1).compareTo(constantLastModifiedTimes.get(f2));\r\n\t\t\t}\r\n\t\t});\r\n        return files;\r\n    }\r\n\r\n\r\n&lt;br&gt;\r\nBoth of these solutions create a temporary map data structure to save off a constant last modified time for each file in the directory. The reason we need to do this is that if your files are being updated or modified while your sort is being performed then your comparator will be violating the transitivity requirement of the comparator interface&#39;s general contract because the last modified times may be changing during the comparison.\r\n\r\nIf, on the other hand, you know the files will not be updated or modified during your sort, you can get away with pretty much any other answer submitted to this question, of which I&#39;m partial to:\r\n\r\nJava 8+ (No concurrent modifications during sort)\r\n--------\r\n\r\n    private static List&lt;Path&gt; listFilesOldestFirst(final String directoryPath) throws IOException {\r\n        try (final Stream&lt;Path&gt; fileStream = Files.list(Paths.get(directoryPath))) {\r\n            return fileStream\r\n                .map(Path::toFile)\r\n                .sorted(Comparator.comparing(File::lastModified))\r\n                .map(File::toPath)  // remove this line if you would rather work with a List&lt;File&gt; instead of List&lt;Path&gt;\r\n                .collect(Collectors.toList());\r\n        }\r\n    }\r\n\r\nNote: I know you can avoid the translation to and from File objects in the above example by using [Files::getLastModifiedTime][1] api in the sorted stream operation, however, then you need to deal with checked IO exceptions inside your lambda which is always a pain. I&#39;d say if performance is critical enough that the translation is unacceptable then I&#39;d either deal with the checked IOException in the lambda by propagating it as an UncheckedIOException or I&#39;d forego the Files api altogether and deal only with File objects:\r\n\r\n    final List&lt;File&gt; sorted = Arrays.asList(new File(directoryPathString).listFiles());\r\n    sorted.sort(Comparator.comparing(File::lastModified));\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/nio/file/Files.html#getLastModifiedTime(java.nio.file.Path,java.nio.file.LinkOption...)\r\n  [2]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/nio/file/Files.html#newDirectoryStream(java.nio.file.Path)","title":"Best way to list files in Java, sorted by Date Modified?","body":"<h2>If the files you are sorting can be modified or updated at the same time the sort is being performed:</h2>\n\n<hr>\n\n<h2>Java 8+</h2>\n\n<pre><code>private static List&lt;Path&gt; listFilesOldestFirst(final String directoryPath) throws IOException {\n    try (final Stream&lt;Path&gt; fileStream = Files.list(Paths.get(directoryPath))) {\n        return fileStream\n            .map(Path::toFile)\n            .collect(Collectors.toMap(Function.identity(), File::lastModified))\n            .entrySet()\n            .stream()\n            .sorted(Map.Entry.comparingByValue())\n//            .sorted(Collections.reverseOrder(Map.Entry.comparingByValue()))  // replace the previous line with this line if you would prefer files listed newest first\n            .map(Map.Entry::getKey)\n            .map(File::toPath)  // remove this line if you would rather work with a List&lt;File&gt; instead of List&lt;Path&gt;\n            .collect(Collectors.toList());\n    }\n}\n</code></pre>\n\n<h2>Java 7</h2>\n\n<pre><code>private static List&lt;File&gt; listFilesOldestFirst(final String directoryPath) throws IOException {\n    final List&lt;File&gt; files = Arrays.asList(new File(directoryPath).listFiles());\n    final Map&lt;File, Long&gt; constantLastModifiedTimes = new HashMap&lt;File,Long&gt;();\n    for (final File f : files) {\n        constantLastModifiedTimes.put(f, f.lastModified());\n    }\n    Collections.sort(files, new Comparator&lt;File&gt;() {\n        @Override\n        public int compare(final File f1, final File f2) {\n            return constantLastModifiedTimes.get(f1).compareTo(constantLastModifiedTimes.get(f2));\n        }\n    });\n    return files;\n}\n</code></pre>\n\n<p><br>\nBoth of these solutions create a temporary map data structure to save off a constant last modified time for each file in the directory. The reason we need to do this is that if your files are being updated or modified while your sort is being performed then your comparator will be violating the transitivity requirement of the comparator interface's general contract because the last modified times may be changing during the comparison.</p>\n\n<p>If, on the other hand, you know the files will not be updated or modified during your sort, you can get away with pretty much any other answer submitted to this question, of which I'm partial to:</p>\n\n<h2>Java 8+ (No concurrent modifications during sort)</h2>\n\n<pre><code>private static List&lt;Path&gt; listFilesOldestFirst(final String directoryPath) throws IOException {\n    try (final Stream&lt;Path&gt; fileStream = Files.list(Paths.get(directoryPath))) {\n        return fileStream\n            .map(Path::toFile)\n            .sorted(Comparator.comparing(File::lastModified))\n            .map(File::toPath)  // remove this line if you would rather work with a List&lt;File&gt; instead of List&lt;Path&gt;\n            .collect(Collectors.toList());\n    }\n}\n</code></pre>\n\n<p>Note: I know you can avoid the translation to and from File objects in the above example by using <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/nio/file/Files.html#getLastModifiedTime(java.nio.file.Path,java.nio.file.LinkOption...)\" rel=\"noreferrer\">Files::getLastModifiedTime</a> api in the sorted stream operation, however, then you need to deal with checked IO exceptions inside your lambda which is always a pain. I'd say if performance is critical enough that the translation is unacceptable then I'd either deal with the checked IOException in the lambda by propagating it as an UncheckedIOException or I'd forego the Files api altogether and deal only with File objects:</p>\n\n<pre><code>final List&lt;File&gt; sorted = Arrays.asList(new File(directoryPathString).listFiles());\nsorted.sort(Comparator.comparing(File::lastModified));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2371849,"reputation":9565,"user_id":2076286,"accept_rate":72,"display_name":"G&#225;bor"},"score":0,"creation_date":1419520401,"post_id":21534151,"comment_id":43714136,"body_markdown":"This seems to be API 19+ only.","body":"This seems to be API 19+ only."},{"owner":{"account_id":1141309,"reputation":2601,"user_id":1125129,"display_name":"Martin Sykes"},"score":4,"creation_date":1458283273,"post_id":21534151,"comment_id":59800437,"body_markdown":"Use return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified()); instead for lower api&#39;s.","body":"Use return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified())&zwnj;&#8203;; instead for lower api&#39;s."}],"tags":[],"owner":{"account_id":2071502,"reputation":541,"user_id":1845885,"display_name":"PhannGor"},"comment_count":2,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1391450007,"creation_date":1391450007,"answer_id":21534151,"question_id":203030,"body_markdown":"What&#39;s about similar approach, but without boxing to the Long objects:\r\n\r\n    File[] files = directory.listFiles();\r\n\r\n    Arrays.sort(files, new Comparator&lt;File&gt;() {\r\n        public int compare(File f1, File f2) {\r\n            return Long.compare(f1.lastModified(), f2.lastModified());\r\n        }\r\n    });","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>What's about similar approach, but without boxing to the Long objects:</p>\n\n<pre><code>File[] files = directory.listFiles();\n\nArrays.sort(files, new Comparator&lt;File&gt;() {\n    public int compare(File f1, File f2) {\n        return Long.compare(f1.lastModified(), f2.lastModified());\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4572162,"reputation":11,"user_id":3711592,"display_name":"Vikas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1402478190,"creation_date":1402478190,"answer_id":24159031,"question_id":203030,"body_markdown":"You can use Apache [LastModifiedFileComparator][1]  library\r\n\r\n   \r\n\r\n   \r\n\r\n     import org.apache.commons.io.comparator.LastModifiedFileComparator;  \r\n\r\n  \r\n    File[] files = directory.listFiles();\r\n    \t\tArrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_COMPARATOR);\r\n    \t\tfor (File file : files) {\r\n    \t\t\tDate lastMod = new Date(file.lastModified());\r\n    \t\t\tSystem.out.println(&quot;File: &quot; + file.getName() + &quot;, Date: &quot; + lastMod + &quot;&quot;);\r\n    \t\t}\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/comparator/LastModifiedFileComparator.html","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>You can use Apache <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/comparator/LastModifiedFileComparator.html\" rel=\"nofollow\">LastModifiedFileComparator</a>  library</p>\n\n<pre><code> import org.apache.commons.io.comparator.LastModifiedFileComparator;  \n\n\nFile[] files = directory.listFiles();\n        Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_COMPARATOR);\n        for (File file : files) {\n            Date lastMod = new Date(file.lastModified());\n            System.out.println(\"File: \" + file.getName() + \", Date: \" + lastMod + \"\");\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":174037,"reputation":3316,"user_id":403145,"accept_rate":36,"display_name":"broadband"},"score":0,"creation_date":1433945023,"post_id":25254566,"comment_id":49570391,"body_markdown":"It isn&#39;t instant clear from where is LastModifiedFileComparator.LASTMODIFIED_COMPARATOR taken. Maybe adding link to [apache commons io](http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/comparator/package-summary.html) would help.","body":"It isn&#39;t instant clear from where is LastModifiedFileComparator.LASTMODIFIED_COMPARATOR taken. Maybe adding link to <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/comparator/package-summary.html\" rel=\"nofollow noreferrer\">apache commons io</a> would help."},{"owner":{"account_id":2404390,"reputation":7871,"user_id":2101290,"accept_rate":8,"display_name":"Balaji Boggaram Ramanarayan"},"score":0,"creation_date":1459284850,"post_id":25254566,"comment_id":60214897,"body_markdown":"Done, Thanks broadband","body":"Done, Thanks broadband"}],"tags":[],"owner":{"account_id":2404390,"reputation":7871,"user_id":2101290,"accept_rate":8,"display_name":"Balaji Boggaram Ramanarayan"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1459284827,"creation_date":1407804297,"answer_id":25254566,"question_id":203030,"body_markdown":"Imports :\r\n\r\n    org.apache.commons.io.comparator.LastModifiedFileComparator\r\n\r\n[Apache Commons][1]\r\n\r\n\r\n   Code :\r\n\r\n    public static void main(String[] args) throws IOException {\r\n    \t\tFile directory = new File(&quot;.&quot;);\r\n    \t\t// get just files, not directories\r\n    \t\tFile[] files = directory.listFiles((FileFilter) FileFileFilter.FILE);\r\n    \r\n    \t\tSystem.out.println(&quot;Default order&quot;);\r\n    \t\tdisplayFiles(files);\r\n    \r\n    \t\tArrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_COMPARATOR);\r\n    \t\tSystem.out.println(&quot;\\nLast Modified Ascending Order (LASTMODIFIED_COMPARATOR)&quot;);\r\n    \t\tdisplayFiles(files);\r\n    \r\n    \t\tArrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_REVERSE);\r\n    \t\tSystem.out.println(&quot;\\nLast Modified Descending Order (LASTMODIFIED_REVERSE)&quot;);\r\n    \t\tdisplayFiles(files);\r\n    \r\n    \t}\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/comparator/package-summary.html","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>Imports :</p>\n\n<pre><code>org.apache.commons.io.comparator.LastModifiedFileComparator\n</code></pre>\n\n<p><a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/comparator/package-summary.html\" rel=\"noreferrer\">Apache Commons</a></p>\n\n<p>Code :</p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n        File directory = new File(\".\");\n        // get just files, not directories\n        File[] files = directory.listFiles((FileFilter) FileFileFilter.FILE);\n\n        System.out.println(\"Default order\");\n        displayFiles(files);\n\n        Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_COMPARATOR);\n        System.out.println(\"\\nLast Modified Ascending Order (LASTMODIFIED_COMPARATOR)\");\n        displayFiles(files);\n\n        Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_REVERSE);\n        System.out.println(\"\\nLast Modified Descending Order (LASTMODIFIED_REVERSE)\");\n        displayFiles(files);\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16316,"reputation":162745,"user_id":35364,"accept_rate":72,"display_name":"hasen"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1444071849,"creation_date":1444071849,"answer_id":32955978,"question_id":203030,"body_markdown":"In Java 8:\r\n\r\n```        Arrays.sort(files, (a, b) -&gt; Long.compare(a.lastModified(), b.lastModified()));```","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>In Java 8:</p>\n\n<p><code>Arrays.sort(files, (a, b) -&gt; Long.compare(a.lastModified(), b.lastModified()));</code></p>\n"},{"comments":[{"owner":{"account_id":2278572,"reputation":1743,"user_id":2004265,"display_name":"DAB"},"score":0,"creation_date":1454091836,"post_id":33951175,"comment_id":57904667,"body_markdown":"But who does the sorting?","body":"But who does the sorting?"},{"owner":{"account_id":1199651,"reputation":2334,"user_id":1479735,"accept_rate":82,"display_name":"Hirdesh Vishwdewa"},"score":0,"creation_date":1454483949,"post_id":33951175,"comment_id":58059085,"body_markdown":"in the initialisation part of the `for` loop you can see i have taken `list.length-1` upto `i &gt;=0` which simply iterate you in reverse order.","body":"in the initialisation part of the <code>for</code> loop you can see i have taken <code>list.length-1</code> upto <code>i &gt;=0</code> which simply iterate you in reverse order."}],"tags":[],"owner":{"account_id":1199651,"reputation":2334,"user_id":1479735,"accept_rate":82,"display_name":"Hirdesh Vishwdewa"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448604376,"creation_date":1448604376,"answer_id":33951175,"question_id":203030,"body_markdown":"I came to this post when i was searching for the same issue but in `android`.\r\nI don&#39;t say this is the best way to get sorted files by last modified date, but its the easiest way I found yet.\r\n\r\nBelow code may be helpful to someone-\r\n\r\n    File downloadDir = new File(&quot;mypath&quot;);    \r\n    File[] list = downloadDir.listFiles();\r\n        for (int i = list.length-1; i &gt;=0 ; i--) {\r\n            //use list.getName to get the name of the file\r\n        }\r\n\r\nThanks","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>I came to this post when i was searching for the same issue but in <code>android</code>.\nI don't say this is the best way to get sorted files by last modified date, but its the easiest way I found yet.</p>\n\n<p>Below code may be helpful to someone-</p>\n\n<pre><code>File downloadDir = new File(\"mypath\");    \nFile[] list = downloadDir.listFiles();\n    for (int i = list.length-1; i &gt;=0 ; i--) {\n        //use list.getName to get the name of the file\n    }\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":[],"owner":{"account_id":5357268,"reputation":1794,"user_id":4269615,"display_name":"Jaydev"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1470167327,"creation_date":1470167327,"answer_id":38729275,"question_id":203030,"body_markdown":"    private static List&lt;File&gt; sortByLastModified(String dirPath) {\r\n        List&lt;File&gt; files = listFilesRec(dirPath);\r\n        Collections.sort(files, new Comparator&lt;File&gt;() {\r\n            public int compare(File o1, File o2) {\r\n                return Long.compare(o1.lastModified(), o2.lastModified());\r\n            }\r\n        });\r\n        return files;\r\n    }","title":"Best way to list files in Java, sorted by Date Modified?","body":"<pre><code>private static List&lt;File&gt; sortByLastModified(String dirPath) {\n    List&lt;File&gt; files = listFilesRec(dirPath);\n    Collections.sort(files, new Comparator&lt;File&gt;() {\n        public int compare(File o1, File o2) {\n            return Long.compare(o1.lastModified(), o2.lastModified());\n        }\n    });\n    return files;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5282747,"reputation":137,"user_id":4304114,"display_name":"starbroken"},"score":4,"creation_date":1516024447,"post_id":44445813,"comment_id":83511581,"body_markdown":"This truly is the easiest solution. For lists:\n`files.sort(Comparator.comparingLong(File::lastModified));`","body":"This truly is the easiest solution. For lists: <code>files.sort(Comparator.comparingLong(File::lastModified));</code>"},{"owner":{"account_id":5081061,"reputation":4414,"user_id":4077150,"accept_rate":89,"display_name":"viniciussss"},"score":1,"creation_date":1516052109,"post_id":44445813,"comment_id":83525598,"body_markdown":"@starbroken Your solution does not work if files is a simple array, like File[], that is returned by directory.listFiles().","body":"@starbroken Your solution does not work if files is a simple array, like File[], that is returned by directory.listFiles()."},{"owner":{"account_id":5081061,"reputation":4414,"user_id":4077150,"accept_rate":89,"display_name":"viniciussss"},"score":1,"creation_date":1516052585,"post_id":44445813,"comment_id":83525800,"body_markdown":"@starbroken For your solution to work, one needs to use `ArrayList&lt;File&gt; files = new ArrayList&lt;File&gt;(Arrays.asList(directory.listFiles()))` , that is not easier than just `File[] files = directory.listFiles()`.","body":"@starbroken For your solution to work, one needs to use <code>ArrayList&lt;File&gt; files = new ArrayList&lt;File&gt;(Arrays.asList(directory.listFiles()))</code> , that is not easier than just <code>File[] files = directory.listFiles()</code>."},{"owner":{"account_id":5282747,"reputation":137,"user_id":4304114,"display_name":"starbroken"},"score":0,"creation_date":1516173460,"post_id":44445813,"comment_id":83575626,"body_markdown":"Yes, I agree with you. If you have an array of files, there is no reason to create a list. (If anybody wonders, that &#39;additional&#39; `ArrayList&lt;File&gt;(...)` in viniciussss comment is needed to get a mutable list which can be sorted.) I found this thread looking for a way to sort a list of files. So I just added that code so people can simply copy it if they happen to have lists as well.","body":"Yes, I agree with you. If you have an array of files, there is no reason to create a list. (If anybody wonders, that &#39;additional&#39; <code>ArrayList&lt;File&gt;(...)</code> in viniciussss comment is needed to get a mutable list which can be sorted.) I found this thread looking for a way to sort a list of files. So I just added that code so people can simply copy it if they happen to have lists as well."},{"owner":{"account_id":10454238,"reputation":446,"user_id":7706851,"accept_rate":86,"display_name":"zeleven"},"score":0,"creation_date":1517116285,"post_id":44445813,"comment_id":83959616,"body_markdown":"The `Comparator` class doesn&#39;t have any method call `comparingLong`","body":"The <code>Comparator</code> class doesn&#39;t have any method call <code>comparingLong</code>"},{"owner":{"account_id":10454238,"reputation":446,"user_id":7706851,"accept_rate":86,"display_name":"zeleven"},"score":0,"creation_date":1517210682,"post_id":44445813,"comment_id":83985415,"body_markdown":"@viniciussss I use Java 8 in Android Studio, but I can&#39;t find the method.","body":"@viniciussss I use Java 8 in Android Studio, but I can&#39;t find the method."},{"owner":{"account_id":5081061,"reputation":4414,"user_id":4077150,"accept_rate":89,"display_name":"viniciussss"},"score":0,"creation_date":1553320829,"post_id":44445813,"comment_id":97349436,"body_markdown":"You can find at: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparingLong-java.util.function.ToLongFunction-","body":"You can find at: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparingLong-java.util.function.ToLongFunction-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/&hellip;</a>"},{"owner":{"account_id":3460362,"reputation":752,"user_id":2897683,"accept_rate":93,"display_name":"thahgr"},"score":0,"creation_date":1632405679,"post_id":44445813,"comment_id":122487878,"body_markdown":"unfortunatelly it doesnt work in Android API &lt; 24 , but the original solution posted by the OP works!","body":"unfortunatelly it doesnt work in Android API &lt; 24 , but the original solution posted by the OP works!"},{"owner":{"account_id":2093310,"reputation":337,"user_id":1862625,"accept_rate":100,"display_name":"Ast"},"score":0,"creation_date":1645699284,"post_id":44445813,"comment_id":125943614,"body_markdown":"10+ reputation by me...great solution","body":"10+ reputation by me...great solution"}],"tags":[],"owner":{"account_id":5081061,"reputation":4414,"user_id":4077150,"accept_rate":89,"display_name":"viniciussss"},"comment_count":9,"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1590353238,"creation_date":1496957154,"answer_id":44445813,"question_id":203030,"body_markdown":"**Elegant solution since Java 8:**\r\n\r\n    File[] files = directory.listFiles();\r\n    Arrays.sort(files, Comparator.comparingLong(File::lastModified));\r\n\r\n\r\n----------\r\n\r\n\r\n**Or, if you want it in descending order, just reverse it:**\r\n\r\n    File[] files = directory.listFiles();\r\n    Arrays.sort(files, Comparator.comparingLong(File::lastModified).reversed());","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p><strong>Elegant solution since Java 8:</strong></p>\n\n<pre><code>File[] files = directory.listFiles();\nArrays.sort(files, Comparator.comparingLong(File::lastModified));\n</code></pre>\n\n<hr>\n\n<p><strong>Or, if you want it in descending order, just reverse it:</strong></p>\n\n<pre><code>File[] files = directory.listFiles();\nArrays.sort(files, Comparator.comparingLong(File::lastModified).reversed());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6084545,"reputation":2524,"user_id":4749098,"accept_rate":50,"display_name":"Anand Savjani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1522405280,"creation_date":1522405280,"answer_id":49572642,"question_id":203030,"body_markdown":"    Collections.sort(listFiles, new Comparator&lt;File&gt;() {\r\n            public int compare(File f1, File f2) {\r\n                return Long.compare(f1.lastModified(), f2.lastModified());\r\n            }\r\n        });\r\n\r\nwhere `listFiles` is the collection of all files in ArrayList\r\n","title":"Best way to list files in Java, sorted by Date Modified?","body":"<pre><code>Collections.sort(listFiles, new Comparator&lt;File&gt;() {\n        public int compare(File f1, File f2) {\n            return Long.compare(f1.lastModified(), f2.lastModified());\n        }\n    });\n</code></pre>\n\n<p>where <code>listFiles</code> is the collection of all files in ArrayList</p>\n"},{"tags":[],"owner":{"account_id":5512035,"reputation":681,"user_id":4378029,"display_name":"user4378029"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1532797919,"creation_date":1532797919,"answer_id":51573553,"question_id":203030,"body_markdown":"There is also a completely different way which may be even easier, as we do not deal with large numbers. \r\n\r\nInstead of sorting the whole array after you retrieved all filenames and lastModified dates, you can just insert every single filename just after you retrieved it at the right position of the list.\r\n\r\nYou can do it like this:\r\n\r\n    list.add(1, object1)\r\n    list.add(2, object3)\r\n    list.add(2, object2)\r\n\r\nAfter you add object2 to position 2, it will move object3 to position 3. ","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>There is also a completely different way which may be even easier, as we do not deal with large numbers. </p>\n\n<p>Instead of sorting the whole array after you retrieved all filenames and lastModified dates, you can just insert every single filename just after you retrieved it at the right position of the list.</p>\n\n<p>You can do it like this:</p>\n\n<pre><code>list.add(1, object1)\nlist.add(2, object3)\nlist.add(2, object2)\n</code></pre>\n\n<p>After you add object2 to position 2, it will move object3 to position 3. </p>\n"},{"tags":[],"owner":{"account_id":5512035,"reputation":681,"user_id":4378029,"display_name":"user4378029"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1532941091,"creation_date":1532941091,"answer_id":51590308,"question_id":203030,"body_markdown":"There is a very easy and convenient way to handle the problem without any extra comparator. Just code the modified date into the String with the filename, sort it, and later strip it off again.\r\n\r\nUse a String of fixed length 20, put the modified date (long) into it, and fill up with leading zeros. Then just append the filename to this string:\r\n\r\n    String modified_20_digits = (&quot;00000000000000000000&quot;.concat(Long.toString(temp.lastModified()))).substring(Long.toString(temp.lastModified()).length()); \r\n\r\n    result_filenames.add(modified_20_digits+temp.getAbsoluteFile().toString());\r\n\r\n\r\nWhat happens is this here:\r\n\r\nFilename1: C:\\data\\file1.html Last Modified:1532914451455 Last Modified 20 Digits:00000001532914451455\r\n\r\nFilename1: C:\\data\\file2.html Last Modified:1532918086822 Last Modified 20 Digits:00000001532918086822\r\n\r\ntransforms filnames to:\r\n\r\nFilename1: 00000001532914451455C:\\data\\file1.html\r\n\r\nFilename2: 00000001532918086822C:\\data\\file2.html\r\n\r\nYou can then just sort this list.\r\n\r\nAll you need to do is to strip the 20 characters again later (in Java 8, you can strip it for the whole Array with just one line using the .replaceAll function)","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>There is a very easy and convenient way to handle the problem without any extra comparator. Just code the modified date into the String with the filename, sort it, and later strip it off again.</p>\n\n<p>Use a String of fixed length 20, put the modified date (long) into it, and fill up with leading zeros. Then just append the filename to this string:</p>\n\n<pre><code>String modified_20_digits = (\"00000000000000000000\".concat(Long.toString(temp.lastModified()))).substring(Long.toString(temp.lastModified()).length()); \n\nresult_filenames.add(modified_20_digits+temp.getAbsoluteFile().toString());\n</code></pre>\n\n<p>What happens is this here:</p>\n\n<p>Filename1: C:\\data\\file1.html Last Modified:1532914451455 Last Modified 20 Digits:00000001532914451455</p>\n\n<p>Filename1: C:\\data\\file2.html Last Modified:1532918086822 Last Modified 20 Digits:00000001532918086822</p>\n\n<p>transforms filnames to:</p>\n\n<p>Filename1: 00000001532914451455C:\\data\\file1.html</p>\n\n<p>Filename2: 00000001532918086822C:\\data\\file2.html</p>\n\n<p>You can then just sort this list.</p>\n\n<p>All you need to do is to strip the 20 characters again later (in Java 8, you can strip it for the whole Array with just one line using the .replaceAll function)</p>\n"},{"tags":[],"owner":{"account_id":1813406,"reputation":2799,"user_id":1649029,"accept_rate":25,"display_name":"Ward"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600427661,"creation_date":1600427661,"answer_id":63954685,"question_id":203030,"body_markdown":"A slightly more modernized version of the [answer][1] of @jason-orendorf.\r\n\r\n**Note:** this implementation keeps the original array *untouched*, and returns a *new* array. This might or might not be desirable.\r\n\r\n\r\n\tfiles = Arrays.stream(files)\r\n\t\t\t.map(FileWithLastModified::ofFile)\r\n\t\t\t.sorted(comparingLong(FileWithLastModified::lastModified))\r\n\t\t\t.map(FileWithLastModified::file)\r\n\t\t\t.toArray(File[]::new);\r\n\r\n\tprivate static class FileWithLastModified {\r\n\t\tprivate final File file;\r\n\t\tprivate final long lastModified;\r\n\r\n\t\tprivate FileWithLastModified(File file, long lastModified) {\r\n\t\t\tthis.file = file;\r\n\t\t\tthis.lastModified = lastModified;\r\n\t\t}\r\n\r\n\t\tpublic static FileWithLastModified ofFile(File file) {\r\n\t\t\treturn new FileWithLastModified(file, file.lastModified());\r\n\t\t}\r\n\r\n\t\tpublic File file() {\r\n\t\t\treturn file;\r\n\t\t}\r\n\r\n\t\tpublic long lastModified() {\r\n\t\t\treturn lastModified;\r\n\t\t}\r\n\t}\r\n\r\nBut again, all credits to @jason-orendorf for the [idea][1]!\r\n\r\n  [1]: https://stackoverflow.com/a/4248059/1649029","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>A slightly more modernized version of the <a href=\"https://stackoverflow.com/a/4248059/1649029\">answer</a> of @jason-orendorf.</p>\n<p><strong>Note:</strong> this implementation keeps the original array <em>untouched</em>, and returns a <em>new</em> array. This might or might not be desirable.</p>\n<pre><code>files = Arrays.stream(files)\n        .map(FileWithLastModified::ofFile)\n        .sorted(comparingLong(FileWithLastModified::lastModified))\n        .map(FileWithLastModified::file)\n        .toArray(File[]::new);\n\nprivate static class FileWithLastModified {\n    private final File file;\n    private final long lastModified;\n\n    private FileWithLastModified(File file, long lastModified) {\n        this.file = file;\n        this.lastModified = lastModified;\n    }\n\n    public static FileWithLastModified ofFile(File file) {\n        return new FileWithLastModified(file, file.lastModified());\n    }\n\n    public File file() {\n        return file;\n    }\n\n    public long lastModified() {\n        return lastModified;\n    }\n}\n</code></pre>\n<p>But again, all credits to @jason-orendorf for the <a href=\"https://stackoverflow.com/a/4248059/1649029\">idea</a>!</p>\n"},{"tags":[],"owner":{"account_id":3401453,"reputation":96,"user_id":2853499,"display_name":"NoviceCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1627540005,"creation_date":1627540005,"answer_id":68571076,"question_id":203030,"body_markdown":"Here&#39;s the Kotlin way of doing it if any one is looking for it :\r\n    \r\n    val filesList = directory.listFiles()\r\n    \r\n    filesList?.let{ list -&gt;\r\n        Arrays.sort(list) { \r\n            f1, f2 -&gt; f2.lastModified().compareTo(f1.lastModified()) \r\n        }\r\n    }","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>Here's the Kotlin way of doing it if any one is looking for it :</p>\n<pre><code>val filesList = directory.listFiles()\n\nfilesList?.let{ list -&gt;\n    Arrays.sort(list) { \n        f1, f2 -&gt; f2.lastModified().compareTo(f1.lastModified()) \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12776413,"reputation":640,"user_id":9955950,"display_name":"shubham chouhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637236291,"creation_date":1637236291,"answer_id":70019349,"question_id":203030,"body_markdown":"let array name -&gt; files.\r\n***\r\n```\r\nAscending -&gt; Arrays.sort(files, (o1, o2) -&gt; Long.compare(o1.lastModified(), o2.lastModified()));\r\n\r\nDescending -&gt; Arrays.sort(files, (o1, o2) -&gt; Long.compare(o2.lastModified(), o1.lastModified()));","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>let array name -&gt; files.</p>\n<hr />\n<pre><code>Ascending -&gt; Arrays.sort(files, (o1, o2) -&gt; Long.compare(o1.lastModified(), o2.lastModified()));\n\nDescending -&gt; Arrays.sort(files, (o1, o2) -&gt; Long.compare(o2.lastModified(), o1.lastModified()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22684522,"reputation":1,"user_id":18057080,"display_name":"josemerazo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643367622,"creation_date":1643367622,"answer_id":70892622,"question_id":203030,"body_markdown":"In java 6, the best way is:\r\n\r\n\r\n      File[] listaArchivos = folder.listFiles();\r\n                Arrays.sort(listaArchivos, new Comparator&lt;File&gt;() {\r\n                    @Override\r\n                    public int compare(File f1, File f2) {\r\n                        return (f1.lastModified() &lt; f2.lastModified()) ? -1 : ((f1.lastModified() == f2.lastModified()) ? 0 : 1);\r\n                    }\r\n                }); \r\n\r\n","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>In java 6, the best way is:</p>\n<pre><code>  File[] listaArchivos = folder.listFiles();\n            Arrays.sort(listaArchivos, new Comparator&lt;File&gt;() {\n                @Override\n                public int compare(File f1, File f2) {\n                    return (f1.lastModified() &lt; f2.lastModified()) ? -1 : ((f1.lastModified() == f2.lastModified()) ? 0 : 1);\n                }\n            }); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":27248734,"reputation":9,"user_id":20773568,"display_name":"Nithesh Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675236819,"creation_date":1675236819,"answer_id":75306876,"question_id":203030,"body_markdown":"**Using Java 8+**\r\nHere files are sorted in descending order of modified date(newer file first printed)\r\n\r\n    public void deleteOldFiles(String directory) {\r\n        try {\r\n            File file = new File(directory);\r\n            Arrays.stream(file.listFiles()).filter(File::isFile)\r\n                    .sorted((file1, file2) -&gt; {\r\n                        if(file1.lastModified()&gt;file2.lastModified()){\r\n                            return -1;\r\n                        }else if(file1.lastModified()&lt;file2.lastModified()){\r\n                            return 1;\r\n                        }else {\r\n                            return 0;\r\n                        }\r\n                    }).forEach(System.out::println);\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;No such directory exists: &quot; + directory);\r\n        }\r\n    }","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p><strong>Using Java 8+</strong>\nHere files are sorted in descending order of modified date(newer file first printed)</p>\n<pre><code>public void deleteOldFiles(String directory) {\n    try {\n        File file = new File(directory);\n        Arrays.stream(file.listFiles()).filter(File::isFile)\n                .sorted((file1, file2) -&gt; {\n                    if(file1.lastModified()&gt;file2.lastModified()){\n                        return -1;\n                    }else if(file1.lastModified()&lt;file2.lastModified()){\n                        return 1;\n                    }else {\n                        return 0;\n                    }\n                }).forEach(System.out::println);\n\n    } catch (Exception e) {\n        System.out.println(&quot;No such directory exists: &quot; + directory);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3348,"reputation":26272,"user_id":4828,"accept_rate":100,"display_name":"cwick"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255888,"favorite_count":0,"down_vote_count":1,"up_vote_count":274,"accepted_answer_id":203057,"answer_count":21,"score":273,"last_activity_date":1675236819,"creation_date":1224021896,"question_id":203030,"body_markdown":"I want to get a list of files in a directory, but I want to sort it such that the oldest files are first.  My solution was to call File.listFiles and just resort the list based on File.lastModified, but I was wondering if there was a better way.\r\n\r\nEdit: My current solution, as suggested, is to use an anonymous Comparator:\r\n\r\n    File[] files = directory.listFiles();\r\n        \r\n    Arrays.sort(files, new Comparator&lt;File&gt;(){\r\n        public int compare(File f1, File f2)\r\n        {\r\n            return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());\r\n        } });","title":"Best way to list files in Java, sorted by Date Modified?","body":"<p>I want to get a list of files in a directory, but I want to sort it such that the oldest files are first.  My solution was to call File.listFiles and just resort the list based on File.lastModified, but I was wondering if there was a better way.</p>\n\n<p>Edit: My current solution, as suggested, is to use an anonymous Comparator:</p>\n\n<pre><code>File[] files = directory.listFiles();\n\nArrays.sort(files, new Comparator&lt;File&gt;(){\n    public int compare(File f1, File f2)\n    {\n        return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());\n    } });\n</code></pre>\n"},{"tags":["java","basex"],"answers":[{"comments":[{"owner":{"account_id":1004737,"reputation":6077,"user_id":1018790,"display_name":"Christian Gr&#252;n"},"score":1,"creation_date":1675236596,"post_id":75306824,"comment_id":132882596,"body_markdown":"Thanks, Gunther. I&#39;m glad to report a new stable snapshot is available now: https://files.basex.org/releases/latest/","body":"Thanks, Gunther. I&#39;m glad to report a new stable snapshot is available now: <a href=\"https://files.basex.org/releases/latest/\" rel=\"nofollow noreferrer\">files.basex.org/releases/latest</a>"},{"owner":{"account_id":134484,"reputation":3552,"user_id":336657,"accept_rate":65,"display_name":"jpprade"},"score":0,"creation_date":1675246140,"post_id":75306824,"comment_id":132885437,"body_markdown":"Thank switching to the 10.5-SNAPSHOT fixed the issue !","body":"Thank switching to the 10.5-SNAPSHOT fixed the issue !"}],"tags":[],"owner":{"account_id":167867,"reputation":5156,"user_id":392946,"display_name":"Gunther"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675236432,"creation_date":1675236432,"answer_id":75306824,"question_id":75303173,"body_markdown":"The BaseX ModuleLoader used to close URLClassLoaders, assuming that it had instantiated them itself for module loading:\r\n```java\r\n      if(loader instanceof URLClassLoader) {\r\n      try {\r\n        ((URLClassLoader) loader).close();\r\n      } catch(final IOException ex) {\r\n```\r\nBut this could also affect the default classloader, in case it was an URLClassLoader, so it was fixed recently ([b82b4c][1]). The fix is not yet contained in a released version, though.\r\n\r\n\r\n  [1]: https://github.com/BaseXdb/basex/commit/b82b4cdfb0f78b5ce3418f07461427095abb7449","title":"BaseX close Spring Boot classloader","body":"<p>The BaseX ModuleLoader used to close URLClassLoaders, assuming that it had instantiated them itself for module loading:</p>\n<pre class=\"lang-java prettyprint-override\"><code>      if(loader instanceof URLClassLoader) {\n      try {\n        ((URLClassLoader) loader).close();\n      } catch(final IOException ex) {\n</code></pre>\n<p>But this could also affect the default classloader, in case it was an URLClassLoader, so it was fixed recently (<a href=\"https://github.com/BaseXdb/basex/commit/b82b4cdfb0f78b5ce3418f07461427095abb7449\" rel=\"nofollow noreferrer\">b82b4c</a>). The fix is not yet contained in a released version, though.</p>\n"}],"owner":{"account_id":134484,"reputation":3552,"user_id":336657,"accept_rate":65,"display_name":"jpprade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75306824,"answer_count":1,"score":1,"last_activity_date":1675236432,"creation_date":1675199414,"question_id":75303173,"body_markdown":"I have a Spring Boot (2.7.5) with BaseX 10.3\r\n\r\nOn start up I have a server component starting the server in a @PostConstruct\r\n\r\n    System.setProperty(&quot;org.basex.path&quot;, basexDataPath);\r\n    Context c = new Context();\r\n    c.soptions.set(StaticOptions.DBPATH, basexDataPath);\r\n    this.server = new BaseXServer(c,sl.finish());\r\n\r\n\r\nAnd a client component creating a session in also a @PostConstruct\r\n\r\n    ClientSession clientSession = new ClientSession(basexServerHost, basexServerPort, UserText.ADMIN, basexAdminPassword);\r\n\r\nAnd then I load functx (still in postconstruct) :\r\n\r\n    RepoInstall ri = new RepoInstall(tmpLib.getAbsolutePath(),null);//tmpLib = functx file\r\n    clientSession.execute(ri);\r\n\r\n\r\n\r\nIn Eclipse it works but when packaged and running from the jar, the application fail to start because I get a ClassNotFoundException of my own class.\r\n\r\nI figured out, that it can not find the class because the classloader is closed.\r\nAnd **Basex is closing it** :\r\n\r\nHere is the stack :\r\n\r\n[![closing stack trace][1]][1]\r\n\r\nWhat is wrong with my implementation ? How can I avoid BaseX to close the classloader ?\r\n\r\n  [1]: https://i.stack.imgur.com/ZP5QU.png","title":"BaseX close Spring Boot classloader","body":"<p>I have a Spring Boot (2.7.5) with BaseX 10.3</p>\n<p>On start up I have a server component starting the server in a @PostConstruct</p>\n<pre><code>System.setProperty(&quot;org.basex.path&quot;, basexDataPath);\nContext c = new Context();\nc.soptions.set(StaticOptions.DBPATH, basexDataPath);\nthis.server = new BaseXServer(c,sl.finish());\n</code></pre>\n<p>And a client component creating a session in also a @PostConstruct</p>\n<pre><code>ClientSession clientSession = new ClientSession(basexServerHost, basexServerPort, UserText.ADMIN, basexAdminPassword);\n</code></pre>\n<p>And then I load functx (still in postconstruct) :</p>\n<pre><code>RepoInstall ri = new RepoInstall(tmpLib.getAbsolutePath(),null);//tmpLib = functx file\nclientSession.execute(ri);\n</code></pre>\n<p>In Eclipse it works but when packaged and running from the jar, the application fail to start because I get a ClassNotFoundException of my own class.</p>\n<p>I figured out, that it can not find the class because the classloader is closed.\nAnd <strong>Basex is closing it</strong> :</p>\n<p>Here is the stack :</p>\n<p><a href=\"https://i.stack.imgur.com/ZP5QU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZP5QU.png\" alt=\"closing stack trace\" /></a></p>\n<p>What is wrong with my implementation ? How can I avoid BaseX to close the classloader ?</p>\n"},{"tags":["java","hibernate","jpa","transactions","locking"],"comments":[{"owner":{"account_id":386122,"reputation":4332,"user_id":743716,"accept_rate":40,"display_name":"Rafal G."},"score":1,"creation_date":1432409105,"post_id":30416653,"comment_id":48919402,"body_markdown":"Why do you need to lock entire table ?","body":"Why do you need to lock entire table ?"},{"owner":{"account_id":252550,"reputation":195,"user_id":2707350,"accept_rate":36,"display_name":"Tato"},"score":0,"creation_date":1432409283,"post_id":30416653,"comment_id":48919444,"body_markdown":"because, when select query is run on this table, not get data while persist request is sent on server","body":"because, when select query is run on this table, not get data while persist request is sent on server"},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1432409381,"post_id":30416653,"comment_id":48919482,"body_markdown":"You should let your RDBMS worry about whether a table or row lock is required. Which database are you using?","body":"You should let your RDBMS worry about whether a table or row lock is required. Which database are you using?"},{"owner":{"account_id":252550,"reputation":195,"user_id":2707350,"accept_rate":36,"display_name":"Tato"},"score":0,"creation_date":1432409901,"post_id":30416653,"comment_id":48919620,"body_markdown":"I am using Oracle database","body":"I am using Oracle database"},{"owner":{"account_id":252550,"reputation":195,"user_id":2707350,"accept_rate":36,"display_name":"Tato"},"score":0,"creation_date":1432410105,"post_id":30416653,"comment_id":48919679,"body_markdown":"my select method on this table is important , if someone inserts data, the select will be different. and i what table was locked if persist request is sent...","body":"my select method on this table is important , if someone inserts data, the select will be different. and i what table was locked if persist request is sent..."}],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1515230848,"creation_date":1432559579,"answer_id":30439257,"question_id":30416653,"body_markdown":"The [LockModeType.READ is equals to OPTIMISTIC][1], meaning Hibernate tries to verify the optimistically locked entity version before transaction completion.\r\n\r\nAside from the [possible race condition][2], this won&#39;t help you too much. In your case, the entity [acquires an implicit lock][3] when the [flush operation issues an INSERT statement][4].\r\n\r\nBecause entities have unique PRIMARY KEYS, you shouldn&#39;t even care too much about locking the rows, since you can&#39;t have two transactions inserting the same row. The concurrency control is more suitable for UPDATE/DELETE statements, and even then, you don&#39;t need to lock an entire table (just the records you want to change).\r\n\r\n  [1]: http://vladmihalcea.com/a-beginners-guide-to-java-persistence-locking/\r\n  [2]: http://vladmihalcea.com/hibernate-locking-patterns-how-does-optimistic-lock-mode-work/\r\n  [3]: http://vladmihalcea.com/a-beginners-guide-to-database-locking-and-the-lost-update-phenomena/\r\n  [4]: http://vladmihalcea.com/a-beginners-guide-to-jpahibernate-flush-strategies/","title":"How to lock a database row with JPA","body":"<p>The <a href=\"http://vladmihalcea.com/a-beginners-guide-to-java-persistence-locking/\" rel=\"nofollow noreferrer\">LockModeType.READ is equals to OPTIMISTIC</a>, meaning Hibernate tries to verify the optimistically locked entity version before transaction completion.</p>\n\n<p>Aside from the <a href=\"http://vladmihalcea.com/hibernate-locking-patterns-how-does-optimistic-lock-mode-work/\" rel=\"nofollow noreferrer\">possible race condition</a>, this won't help you too much. In your case, the entity <a href=\"http://vladmihalcea.com/a-beginners-guide-to-database-locking-and-the-lost-update-phenomena/\" rel=\"nofollow noreferrer\">acquires an implicit lock</a> when the <a href=\"http://vladmihalcea.com/a-beginners-guide-to-jpahibernate-flush-strategies/\" rel=\"nofollow noreferrer\">flush operation issues an INSERT statement</a>.</p>\n\n<p>Because entities have unique PRIMARY KEYS, you shouldn't even care too much about locking the rows, since you can't have two transactions inserting the same row. The concurrency control is more suitable for UPDATE/DELETE statements, and even then, you don't need to lock an entire table (just the records you want to change).</p>\n"}],"owner":{"account_id":252550,"reputation":195,"user_id":2707350,"accept_rate":36,"display_name":"Tato"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8996,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675236207,"creation_date":1432408681,"question_id":30416653,"body_markdown":"In the following code snippet, the whole table is locked instead of a single row: \r\n\r\n    @TransactionAttribute(TransactionAttributeType.REQUIRED)\r\n    public void myInsertMethod(MyEntity myEntity) {\r\n    \r\n             \r\n        /*1 this doesn&#39;t works*/\r\n             manager.lock(myEntity,LockModeType.READ);\r\n             manager.persist(myEntity);\r\n        \r\n        /* and this works but I dont know is it what i want or not...*/\r\n            manager.persist(myEntity);\r\n            manager.lock(myEntity,LockModeType.READ);\r\n             \r\n        }   \r\n\r\nI think that the correct code will be the following, but it doesn&#39;t work\r\n\r\n    /*lock entire table for select*/\r\n    manager.lock(MyEntity.class.LockModeType.READ);\r\n    /* and after locking table persist code */\r\n    manager.persist(myEntity);\r\n\r\nPlease tell me how I can do this job and suggest me a good article for learning this issue.\r\n ","title":"How to lock a database row with JPA","body":"<p>In the following code snippet, the whole table is locked instead of a single row:</p>\n<pre><code>@TransactionAttribute(TransactionAttributeType.REQUIRED)\npublic void myInsertMethod(MyEntity myEntity) {\n\n         \n    /*1 this doesn't works*/\n         manager.lock(myEntity,LockModeType.READ);\n         manager.persist(myEntity);\n    \n    /* and this works but I dont know is it what i want or not...*/\n        manager.persist(myEntity);\n        manager.lock(myEntity,LockModeType.READ);\n         \n    }   \n</code></pre>\n<p>I think that the correct code will be the following, but it doesn't work</p>\n<pre><code>/*lock entire table for select*/\nmanager.lock(MyEntity.class.LockModeType.READ);\n/* and after locking table persist code */\nmanager.persist(myEntity);\n</code></pre>\n<p>Please tell me how I can do this job and suggest me a good article for learning this issue.</p>\n"},{"tags":["java","hibernate","orm","jpql"],"comments":[{"owner":{"account_id":3669475,"reputation":3487,"user_id":3057004,"accept_rate":46,"display_name":"Wundwin Born"},"score":0,"creation_date":1403067267,"post_id":24277184,"comment_id":37509554,"body_markdown":"How can know the last 3 photos, by upload time or created time?","body":"How can know the last 3 photos, by upload time or created time?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1403067301,"post_id":24277184,"comment_id":37509563,"body_markdown":"what part do you not understand, the join, the sort or the limit?","body":"what part do you not understand, the join, the sort or the limit?"},{"owner":{"account_id":3669475,"reputation":3487,"user_id":3057004,"accept_rate":46,"display_name":"Wundwin Born"},"score":0,"creation_date":1403067436,"post_id":24277184,"comment_id":37509604,"body_markdown":"Please update your question with `created time` to be used for last 3 photos, and the code and result what you tried so far!","body":"Please update your question with <code>created time</code> to be used for last 3 photos, and the code and result what you tried so far!"}],"answers":[{"comments":[{"owner":{"account_id":1301312,"reputation":88,"user_id":1251146,"display_name":"user1251146"},"score":0,"creation_date":1403137463,"post_id":24279714,"comment_id":37547203,"body_markdown":"I see your approach. Query from the many side rather than query from the one side. Good idea. Thanks.","body":"I see your approach. Query from the many side rather than query from the one side. Good idea. Thanks."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675236055,"creation_date":1403077288,"answer_id":24279714,"question_id":24277184,"body_markdown":"You happen to work on PostgreSQL, so you can use a window function to select the first 3 photo.ids by user:\r\n\r\n    List&lt;Long&gt; photoIds = (List&lt;Long&gt;) em.createNativeQuery(&quot;&quot;&quot;\r\n    \tselect data.p_id\r\n    \t\tfrom \r\n    \t\t(\r\n    \t\t\tSELECT p.id as p_id, row_number() as rw OVER w as rw\r\n    \t\t\tFROM photo p\r\n    \t\t\tINNER JOIN galley g on g.id = p.galery_id\r\n    \t\t\tINNER JOIN user u on u.id = g.user_id\r\n    \t\t\tWINDOW w AS (PARTITION BY u.id ORDER BY p.creation_time DESC)\r\n    \t\t) data \r\n    \t\twhere rw &lt;= 3\r\n    \t\t&quot;&quot;&quot;, Long.class)\r\n    .getResultList(); \r\n\r\nThen with these `photoIds`, you can fetch the photo/gallery/user:\r\n\r\n\tList&lt;Photo&gt; photos = (List&lt;Photo&gt;) em.createQuery(&quot;&quot;&quot;\r\n\t\tselect p\r\n\t\tfrom Photo p\r\n\t\tjoin fetch p.gallery g\r\n\t\tjoin fetch g.user u\r\n\t\twhere p.id in (:photoIds)\r\n        &quot;&quot;&quot;)\r\n\t.setParameter(&quot;photoIds&quot;, photoIds)\t\r\n\t.getResultList();\r\n\r\nYou can then recreate the user/gallery/photo back from the Photo list.\r\n\r\nThere is no other way to use JPQL to only select partial views over a joined collection of children entities.","title":"JPQL to select all objects, but with setMaxResult on object collections","body":"<p>You happen to work on PostgreSQL, so you can use a window function to select the first 3 photo.ids by user:</p>\n<pre><code>List&lt;Long&gt; photoIds = (List&lt;Long&gt;) em.createNativeQuery(&quot;&quot;&quot;\n    select data.p_id\n        from \n        (\n            SELECT p.id as p_id, row_number() as rw OVER w as rw\n            FROM photo p\n            INNER JOIN galley g on g.id = p.galery_id\n            INNER JOIN user u on u.id = g.user_id\n            WINDOW w AS (PARTITION BY u.id ORDER BY p.creation_time DESC)\n        ) data \n        where rw &lt;= 3\n        &quot;&quot;&quot;, Long.class)\n.getResultList(); \n</code></pre>\n<p>Then with these <code>photoIds</code>, you can fetch the photo/gallery/user:</p>\n<pre><code>List&lt;Photo&gt; photos = (List&lt;Photo&gt;) em.createQuery(&quot;&quot;&quot;\n    select p\n    from Photo p\n    join fetch p.gallery g\n    join fetch g.user u\n    where p.id in (:photoIds)\n    &quot;&quot;&quot;)\n.setParameter(&quot;photoIds&quot;, photoIds) \n.getResultList();\n</code></pre>\n<p>You can then recreate the user/gallery/photo back from the Photo list.</p>\n<p>There is no other way to use JPQL to only select partial views over a joined collection of children entities.</p>\n"}],"owner":{"account_id":1301312,"reputation":88,"user_id":1251146,"display_name":"user1251146"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":24279714,"answer_count":1,"score":1,"last_activity_date":1675236154,"creation_date":1403066373,"question_id":24277184,"body_markdown":"I have 3 entities:\r\n\r\nUser which has Set&lt;Gallery&gt; galleries.\r\nGallery which has Set&lt;Photo&gt; photos.\r\n\r\nNow I want to select all users with their last 3 photos by created time(User may have 10 galleries and 100 photos for each gallery). How can I do the jpql?\r\n\r\nI don&#39;t know how to get the top 3 photos(select top 3 from p) below:\r\n\r\nQuery q = em.createQuery(&quot;select u, ***(select top 3 from p)***  from User u left join u.galleries g left join g.photos p&quot;);\r\n\r\nI know I can get only one user with top 3 photos by:\r\n\r\nQuery q = em.createQuery(&quot;select u, p from User u left join u.galleries g left join g.photos p where u.id =:userId&quot;).setMaxResults(3);\r\n\r\nBut what about all users in one jpql?\r\n\r\nThanks in advance.","title":"JPQL to select all objects, but with setMaxResult on object collections","body":"<p>I have 3 entities:</p>\n\n<p>User which has Set galleries.\nGallery which has Set photos.</p>\n\n<p>Now I want to select all users with their last 3 photos by created time(User may have 10 galleries and 100 photos for each gallery). How can I do the jpql?</p>\n\n<p>I don't know how to get the top 3 photos(select top 3 from p) below:</p>\n\n<p>Query q = em.createQuery(\"select u, <strong><em>(select top 3 from p)</em></strong>  from User u left join u.galleries g left join g.photos p\");</p>\n\n<p>I know I can get only one user with top 3 photos by:</p>\n\n<p>Query q = em.createQuery(\"select u, p from User u left join u.galleries g left join g.photos p where u.id =:userId\").setMaxResults(3);</p>\n\n<p>But what about all users in one jpql?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","apache-spark","hadoop"],"comments":[{"owner":{"account_id":3963168,"reputation":34434,"user_id":3269809,"display_name":"Alper t. Turker"},"score":2,"creation_date":1523994442,"post_id":49885910,"comment_id":86788729,"body_markdown":"`spark://HeartbeatReceiver@Silierin_Y510P:4391` is not valid Spark master URL. Accepted format is `spark://host:port`","body":"<code>spark:&#47;&#47;HeartbeatReceiver@Silierin_Y510P:4391</code> is not valid Spark master URL. Accepted format is <code>spark:&#47;&#47;host:port</code>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1524055392,"post_id":49885910,"comment_id":86815430,"body_markdown":"You need to remove the @ symbol from your windows hostname","body":"You need to remove the @ symbol from your windows hostname"}],"answers":[{"tags":[],"owner":{"account_id":11800937,"reputation":61,"user_id":8634657,"display_name":"Hernan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1530985108,"creation_date":1530985108,"answer_id":51225526,"question_id":49885910,"body_markdown":"I had the same issue, but it was solved by setting **SPARK_LOCAL_HOSTNAME=localhost**","title":"Spark on windows - Error initializing SparkContext, Invalid spark URL","body":"<p>I had the same issue, but it was solved by setting <strong>SPARK_LOCAL_HOSTNAME=localhost</strong></p>\n"},{"tags":[],"owner":{"account_id":11013264,"reputation":41,"user_id":8089857,"display_name":"Huong Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1541049639,"creation_date":1541049639,"answer_id":53095563,"question_id":49885910,"body_markdown":"Looks like the host name has underscore got this issue.\r\nhttps://jira.apache.org/jira/browse/SPARK-24192","title":"Spark on windows - Error initializing SparkContext, Invalid spark URL","body":"<p>Looks like the host name has underscore got this issue.\n<a href=\"https://jira.apache.org/jira/browse/SPARK-24192\" rel=\"nofollow noreferrer\">https://jira.apache.org/jira/browse/SPARK-24192</a></p>\n"},{"tags":[],"owner":{"display_name":"user11631629"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1577081891,"creation_date":1577081891,"answer_id":59450903,"question_id":49885910,"body_markdown":"sparkConfig.set(&quot;spark.driver.host&quot;,&quot;localhost&quot;) solved my issue\r\n","title":"Spark on windows - Error initializing SparkContext, Invalid spark URL","body":"<p>sparkConfig.set(\"spark.driver.host\",\"localhost\") solved my issue</p>\n"},{"comments":[{"owner":{"account_id":19551791,"reputation":393,"user_id":14364672,"display_name":"steve"},"score":0,"creation_date":1619506262,"post_id":64119466,"comment_id":118919241,"body_markdown":"As soon as I renamed the machine to remove the underscore , it worked. Thanks.","body":"As soon as I renamed the machine to remove the underscore , it worked. Thanks."}],"tags":[],"owner":{"account_id":19620522,"reputation":11,"user_id":14361090,"display_name":"Michael Lieb"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601381906,"creation_date":1601381906,"answer_id":64119466,"question_id":49885910,"body_markdown":"My problem was the name of my computer Spark on Windows does not work if your computer name contains certain symbols such as &quot;@&quot; or &quot;_&quot;","title":"Spark on windows - Error initializing SparkContext, Invalid spark URL","body":"<p>My problem was the name of my computer Spark on Windows does not work if your computer name contains certain symbols such as &quot;@&quot; or &quot;_&quot;</p>\n"},{"tags":[],"owner":{"account_id":6921095,"reputation":11,"user_id":5313752,"display_name":"xavierv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675236002,"creation_date":1675236002,"answer_id":75306770,"question_id":49885910,"body_markdown":"same issue for me in Windows 11. Renamed hostname without underscore and it works properly.\r\n\r\nEnv:\r\n- spark-2.4.6-bin-hadoop2.7\r\n- Winutils : https://github.com/steveloughran/winutils/blob/master/hadoop-2.7.1/bin/winutils.exe\r\n- Copy winutils.exe in %SPARK_HOME%\\bin directory\r\n\r\nHope it will help.","title":"Spark on windows - Error initializing SparkContext, Invalid spark URL","body":"<p>same issue for me in Windows 11. Renamed hostname without underscore and it works properly.</p>\n<p>Env:</p>\n<ul>\n<li>spark-2.4.6-bin-hadoop2.7</li>\n<li>Winutils : <a href=\"https://github.com/steveloughran/winutils/blob/master/hadoop-2.7.1/bin/winutils.exe\" rel=\"nofollow noreferrer\">https://github.com/steveloughran/winutils/blob/master/hadoop-2.7.1/bin/winutils.exe</a></li>\n<li>Copy winutils.exe in %SPARK_HOME%\\bin directory</li>\n</ul>\n<p>Hope it will help.</p>\n"}],"owner":{"account_id":13386686,"reputation":11,"user_id":9660341,"display_name":"Rafa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6001,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1675236002,"creation_date":1523992706,"question_id":49885910,"body_markdown":"I&#39;m trying to run Apache Spark on Windows 8.1\r\nWhen I call the spark-shell command, I get the following stack:\r\n\r\n    C:\\spark\\spark-2.3.0-bin-hadoop2.7\\bin&gt;&quot;C:\\new\\spark\\spark-2.3.0-bin-hadoop2.7\\bin\\spark-submit2.cmd&quot; --class org.apache\r\n    .spark.repl.Main --name &quot;Spark shell&quot;\r\n    2018-04-17 20:30:21 WARN  NativeCodeLoader:62 - Unable to load native-hadoop library for your platform... using builtin-\r\n    java classes where applicable\r\n    Setting default log level to &quot;WARN&quot;.\r\n    To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\r\n    2018-04-17 20:30:33 ERROR SparkContext:91 - Error initializing SparkContext.\r\n    org.apache.spark.SparkException: Invalid Spark URL: spark://HeartbeatReceiver@Silierin_Y510P:4391\r\n            at org.apache.spark.rpc.RpcEndpointAddress$.apply(RpcEndpointAddress.scala:66)\r\n            at org.apache.spark.rpc.netty.NettyRpcEnv.asyncSetupEndpointRefByURI(NettyRpcEnv.scala:134)\r\n            at org.apache.spark.rpc.RpcEnv.setupEndpointRefByURI(RpcEnv.scala:101)\r\n            at org.apache.spark.rpc.RpcEnv.setupEndpointRef(RpcEnv.scala:109)\r\n            at org.apache.spark.util.RpcUtils$.makeDriverRef(RpcUtils.scala:32)\r\n            at org.apache.spark.executor.Executor.&lt;init&gt;(Executor.scala:155)\r\n            at org.apache.spark.scheduler.local.LocalEndpoint.&lt;init&gt;(LocalSchedulerBackend.scala:59)\r\n            at org.apache.spark.scheduler.local.LocalSchedulerBackend.start(LocalSchedulerBackend.scala:126)\r\n            at org.apache.spark.scheduler.TaskSchedulerImpl.start(TaskSchedulerImpl.scala:164)\r\n            at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:500)\r\n            at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2486)\r\n            at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:930)\r\n            at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:921)\r\n            at scala.Option.getOrElse(Option.scala:121)\r\n            at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921)\r\n            at org.apache.spark.repl.Main$.createSparkSession(Main.scala:103)\r\n            at $line3.$read$$iw$$iw.&lt;init&gt;(&lt;console&gt;:15)\r\n            at $line3.$read$$iw.&lt;init&gt;(&lt;console&gt;:43)\r\n            at $line3.$read.&lt;init&gt;(&lt;console&gt;:45)\r\n            at $line3.$read$.&lt;init&gt;(&lt;console&gt;:49)\r\n            at $line3.$read$.&lt;clinit&gt;(&lt;console&gt;)\r\n            at $line3.$eval$.$print$lzycompute(&lt;console&gt;:7)\r\n            at $line3.$eval$.$print(&lt;console&gt;:6)\r\n            at $line3.$eval.$print(&lt;console&gt;)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:786)\r\n            at scala.tools.nsc.interpreter.IMain$Request.loadAndRun(IMain.scala:1047)\r\n            at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:638)\r\n            at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:637)\r\n            at scala.reflect.internal.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:31)\r\n            at scala.reflect.internal.util.AbstractFileClassLoader.asContext(AbstractFileClassLoader.scala:19)\r\n            at scala.tools.nsc.interpreter.IMain$WrappedRequest.loadAndRunReq(IMain.scala:637)\r\n            at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:569)\r\n            at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:565)\r\n            at scala.tools.nsc.interpreter.ILoop.interpretStartingWith(ILoop.scala:807)\r\n            at scala.tools.nsc.interpreter.ILoop.command(ILoop.scala:681)\r\n            at scala.tools.nsc.interpreter.ILoop.processLine(ILoop.scala:395)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\r\n    pply(SparkILoop.scala:79)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\r\n    pply(SparkILoop.scala:79)\r\n            at scala.collection.immutable.List.foreach(List.scala:381)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(SparkILoop.s\r\n    cala:79)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\r\n    )\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\r\n    )\r\n            at scala.tools.nsc.interpreter.ILoop.savingReplayStack(ILoop.scala:91)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply$mcV$sp(SparkILoop.scala:78)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\r\n            at scala.tools.nsc.interpreter.IMain.beQuietDuring(IMain.scala:214)\r\n            at org.apache.spark.repl.SparkILoop.initializeSpark(SparkILoop.scala:77)\r\n            at org.apache.spark.repl.SparkILoop.loadFiles(SparkILoop.scala:110)\r\n            at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply$mcZ$sp(ILoop.scala:920)\r\n            at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\r\n            at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\r\n            at scala.reflect.internal.util.ScalaClassLoader$.savingContextLoader(ScalaClassLoader.scala:97)\r\n            at scala.tools.nsc.interpreter.ILoop.process(ILoop.scala:909)\r\n            at org.apache.spark.repl.Main$.doMain(Main.scala:76)\r\n            at org.apache.spark.repl.Main$.main(Main.scala:56)\r\n            at org.apache.spark.repl.Main.main(Main.scala)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n            at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:879)\r\n            at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:197)\r\n            at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:227)\r\n            at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:136)\r\n            at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n    2018-04-17 20:30:33 ERROR Utils:91 - Uncaught exception in thread main\r\n    java.lang.NullPointerException\r\n            at org.apache.spark.scheduler.local.LocalSchedulerBackend.org$apache$spark$scheduler$local$LocalSchedulerBackend\r\n    $$stop(LocalSchedulerBackend.scala:159)\r\n            at org.apache.spark.scheduler.local.LocalSchedulerBackend.stop(LocalSchedulerBackend.scala:137)\r\n            at org.apache.spark.scheduler.TaskSchedulerImpl.stop(TaskSchedulerImpl.scala:508)\r\n            at org.apache.spark.scheduler.DAGScheduler.stop(DAGScheduler.scala:1752)\r\n            at org.apache.spark.SparkContext$$anonfun$stop$8.apply$mcV$sp(SparkContext.scala:1924)\r\n            at org.apache.spark.util.Utils$.tryLogNonFatalError(Utils.scala:1357)\r\n            at org.apache.spark.SparkContext.stop(SparkContext.scala:1923)\r\n            at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:578)\r\n            at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2486)\r\n            at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:930)\r\n            at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:921)\r\n            at scala.Option.getOrElse(Option.scala:121)\r\n            at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921)\r\n            at org.apache.spark.repl.Main$.createSparkSession(Main.scala:103)\r\n            at $line3.$read$$iw$$iw.&lt;init&gt;(&lt;console&gt;:15)\r\n            at $line3.$read$$iw.&lt;init&gt;(&lt;console&gt;:43)\r\n            at $line3.$read.&lt;init&gt;(&lt;console&gt;:45)\r\n            at $line3.$read$.&lt;init&gt;(&lt;console&gt;:49)\r\n            at $line3.$read$.&lt;clinit&gt;(&lt;console&gt;)\r\n            at $line3.$eval$.$print$lzycompute(&lt;console&gt;:7)\r\n            at $line3.$eval$.$print(&lt;console&gt;:6)\r\n            at $line3.$eval.$print(&lt;console&gt;)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:786)\r\n            at scala.tools.nsc.interpreter.IMain$Request.loadAndRun(IMain.scala:1047)\r\n            at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:638)\r\n            at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:637)\r\n            at scala.reflect.internal.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:31)\r\n            at scala.reflect.internal.util.AbstractFileClassLoader.asContext(AbstractFileClassLoader.scala:19)\r\n            at scala.tools.nsc.interpreter.IMain$WrappedRequest.loadAndRunReq(IMain.scala:637)\r\n            at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:569)\r\n            at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:565)\r\n            at scala.tools.nsc.interpreter.ILoop.interpretStartingWith(ILoop.scala:807)\r\n            at scala.tools.nsc.interpreter.ILoop.command(ILoop.scala:681)\r\n            at scala.tools.nsc.interpreter.ILoop.processLine(ILoop.scala:395)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\r\n    pply(SparkILoop.scala:79)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\r\n    pply(SparkILoop.scala:79)\r\n            at scala.collection.immutable.List.foreach(List.scala:381)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(SparkILoop.s\r\n    cala:79)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\r\n    )\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\r\n    )\r\n            at scala.tools.nsc.interpreter.ILoop.savingReplayStack(ILoop.scala:91)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply$mcV$sp(SparkILoop.scala:78)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\r\n            at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\r\n            at scala.tools.nsc.interpreter.IMain.beQuietDuring(IMain.scala:214)\r\n            at org.apache.spark.repl.SparkILoop.initializeSpark(SparkILoop.scala:77)\r\n            at org.apache.spark.repl.SparkILoop.loadFiles(SparkILoop.scala:110)\r\n            at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply$mcZ$sp(ILoop.scala:920)\r\n            at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\r\n            at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\r\n            at scala.reflect.internal.util.ScalaClassLoader$.savingContextLoader(ScalaClassLoader.scala:97)\r\n            at scala.tools.nsc.interpreter.ILoop.process(ILoop.scala:909)\r\n            at org.apache.spark.repl.Main$.doMain(Main.scala:76)\r\n            at org.apache.spark.repl.Main$.main(Main.scala:56)\r\n            at org.apache.spark.repl.Main.main(Main.scala)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n            at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:879)\r\n            at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:197)\r\n            at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:227)\r\n            at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:136)\r\n            at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n    2018-04-17 20:30:33 WARN  MetricsSystem:66 - Stopping a MetricsSystem that is not running\r\n    org.apache.spark.SparkException: Invalid Spark URL: spark://HeartbeatReceiver@Silierin_Y510P:4391\r\n      at org.apache.spark.rpc.RpcEndpointAddress$.apply(RpcEndpointAddress.scala:66)\r\n      at org.apache.spark.rpc.netty.NettyRpcEnv.asyncSetupEndpointRefByURI(NettyRpcEnv.scala:134)\r\n      at org.apache.spark.rpc.RpcEnv.setupEndpointRefByURI(RpcEnv.scala:101)\r\n      at org.apache.spark.rpc.RpcEnv.setupEndpointRef(RpcEnv.scala:109)\r\n      at org.apache.spark.util.RpcUtils$.makeDriverRef(RpcUtils.scala:32)\r\n      at org.apache.spark.executor.Executor.&lt;init&gt;(Executor.scala:155)\r\n      at org.apache.spark.scheduler.local.LocalEndpoint.&lt;init&gt;(LocalSchedulerBackend.scala:59)\r\n      at org.apache.spark.scheduler.local.LocalSchedulerBackend.start(LocalSchedulerBackend.scala:126)\r\n      at org.apache.spark.scheduler.TaskSchedulerImpl.start(TaskSchedulerImpl.scala:164)\r\n      at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:500)\r\n      at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2486)\r\n      at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:930)\r\n      at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:921)\r\n      at scala.Option.getOrElse(Option.scala:121)\r\n      at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921)\r\n      at org.apache.spark.repl.Main$.createSparkSession(Main.scala:103)\r\n      ... 55 elided\r\n    &lt;console&gt;:14: error: not found: value spark\r\n           import spark.implicits._\r\n                  ^\r\n    &lt;console&gt;:14: error: not found: value spark\r\n           import spark.sql\r\n                  ^\r\n    Welcome to\r\n          ____              __\r\n         / __/__  ___ _____/ /__\r\n        _\\ \\/ _ \\/ _ `/ __/  &#39;_/\r\n       /___/ .__/\\_,_/_/ /_/\\_\\   version 2.3.0\r\n          /_/\r\n    \r\n    Using Scala version 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_162)\r\n    Type in expressions to have them evaluated.\r\n    Type :help for more information.\r\n    \r\n    scala&gt;\r\n\r\n\r\nSystem variables are configured as follows:\r\n\r\n**HADOOP_HOME:**\r\n&gt;c:\\hadoop\r\n\r\n**JAVA_HOME:**\r\n&gt;C:\\Java\\jdk1.8.0_162\r\n\r\n**SCALA_HOME:**\r\n&gt;C:\\scala\r\n\r\n**SPARK_HOME:**\r\n&gt;C:\\spark\\spark-2.3.0-bin-hadoop2.7\r\n\r\n**PATH:**\r\n&gt;%JAVA_HOME%\\bin;%SCALA_HOME%\\bin;%HADOOP_HOME%\\bin;%SPARK_HOME%\\bin;\r\n\r\nspark downloaded from here:\r\nhttps://spark.apache.org/downloads.html\r\n\r\nwinutils (x64) is in c:\\hadoop\\bin\\\r\ndownloaded from http://www.eaiesb.com/blogs/?tag=setup-spark-on-windows \r\n\r\nI run following command after create directory _C:\\tmp\\hive_\r\n&gt;C:\\hadoop\\bin\\winutils.exe chmod 777 C:\\tmp\\hive\r\n\r\njava version:\r\n&gt;java version &quot;1.8.0_162&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_162-b12)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)\r\n\r\nscala version: \r\n&gt;Scala code runner version 2.12.5 -- Copyright 2002-2018, LAMP/EPFL and Lightbend, Inc.\r\n\r\n\r\nI run Spark for the first time, so maybe I skipped some configuration steps? Please help.\r\n","title":"Spark on windows - Error initializing SparkContext, Invalid spark URL","body":"<p>I'm trying to run Apache Spark on Windows 8.1\nWhen I call the spark-shell command, I get the following stack:</p>\n\n<pre><code>C:\\spark\\spark-2.3.0-bin-hadoop2.7\\bin&gt;\"C:\\new\\spark\\spark-2.3.0-bin-hadoop2.7\\bin\\spark-submit2.cmd\" --class org.apache\n.spark.repl.Main --name \"Spark shell\"\n2018-04-17 20:30:21 WARN  NativeCodeLoader:62 - Unable to load native-hadoop library for your platform... using builtin-\njava classes where applicable\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\n2018-04-17 20:30:33 ERROR SparkContext:91 - Error initializing SparkContext.\norg.apache.spark.SparkException: Invalid Spark URL: spark://HeartbeatReceiver@Silierin_Y510P:4391\n        at org.apache.spark.rpc.RpcEndpointAddress$.apply(RpcEndpointAddress.scala:66)\n        at org.apache.spark.rpc.netty.NettyRpcEnv.asyncSetupEndpointRefByURI(NettyRpcEnv.scala:134)\n        at org.apache.spark.rpc.RpcEnv.setupEndpointRefByURI(RpcEnv.scala:101)\n        at org.apache.spark.rpc.RpcEnv.setupEndpointRef(RpcEnv.scala:109)\n        at org.apache.spark.util.RpcUtils$.makeDriverRef(RpcUtils.scala:32)\n        at org.apache.spark.executor.Executor.&lt;init&gt;(Executor.scala:155)\n        at org.apache.spark.scheduler.local.LocalEndpoint.&lt;init&gt;(LocalSchedulerBackend.scala:59)\n        at org.apache.spark.scheduler.local.LocalSchedulerBackend.start(LocalSchedulerBackend.scala:126)\n        at org.apache.spark.scheduler.TaskSchedulerImpl.start(TaskSchedulerImpl.scala:164)\n        at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:500)\n        at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2486)\n        at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:930)\n        at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:921)\n        at scala.Option.getOrElse(Option.scala:121)\n        at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921)\n        at org.apache.spark.repl.Main$.createSparkSession(Main.scala:103)\n        at $line3.$read$$iw$$iw.&lt;init&gt;(&lt;console&gt;:15)\n        at $line3.$read$$iw.&lt;init&gt;(&lt;console&gt;:43)\n        at $line3.$read.&lt;init&gt;(&lt;console&gt;:45)\n        at $line3.$read$.&lt;init&gt;(&lt;console&gt;:49)\n        at $line3.$read$.&lt;clinit&gt;(&lt;console&gt;)\n        at $line3.$eval$.$print$lzycompute(&lt;console&gt;:7)\n        at $line3.$eval$.$print(&lt;console&gt;:6)\n        at $line3.$eval.$print(&lt;console&gt;)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:786)\n        at scala.tools.nsc.interpreter.IMain$Request.loadAndRun(IMain.scala:1047)\n        at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:638)\n        at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:637)\n        at scala.reflect.internal.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:31)\n        at scala.reflect.internal.util.AbstractFileClassLoader.asContext(AbstractFileClassLoader.scala:19)\n        at scala.tools.nsc.interpreter.IMain$WrappedRequest.loadAndRunReq(IMain.scala:637)\n        at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:569)\n        at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:565)\n        at scala.tools.nsc.interpreter.ILoop.interpretStartingWith(ILoop.scala:807)\n        at scala.tools.nsc.interpreter.ILoop.command(ILoop.scala:681)\n        at scala.tools.nsc.interpreter.ILoop.processLine(ILoop.scala:395)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\npply(SparkILoop.scala:79)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\npply(SparkILoop.scala:79)\n        at scala.collection.immutable.List.foreach(List.scala:381)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(SparkILoop.s\ncala:79)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\n)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\n)\n        at scala.tools.nsc.interpreter.ILoop.savingReplayStack(ILoop.scala:91)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply$mcV$sp(SparkILoop.scala:78)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\n        at scala.tools.nsc.interpreter.IMain.beQuietDuring(IMain.scala:214)\n        at org.apache.spark.repl.SparkILoop.initializeSpark(SparkILoop.scala:77)\n        at org.apache.spark.repl.SparkILoop.loadFiles(SparkILoop.scala:110)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply$mcZ$sp(ILoop.scala:920)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\n        at scala.reflect.internal.util.ScalaClassLoader$.savingContextLoader(ScalaClassLoader.scala:97)\n        at scala.tools.nsc.interpreter.ILoop.process(ILoop.scala:909)\n        at org.apache.spark.repl.Main$.doMain(Main.scala:76)\n        at org.apache.spark.repl.Main$.main(Main.scala:56)\n        at org.apache.spark.repl.Main.main(Main.scala)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\n        at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:879)\n        at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:197)\n        at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:227)\n        at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:136)\n        at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\n2018-04-17 20:30:33 ERROR Utils:91 - Uncaught exception in thread main\njava.lang.NullPointerException\n        at org.apache.spark.scheduler.local.LocalSchedulerBackend.org$apache$spark$scheduler$local$LocalSchedulerBackend\n$$stop(LocalSchedulerBackend.scala:159)\n        at org.apache.spark.scheduler.local.LocalSchedulerBackend.stop(LocalSchedulerBackend.scala:137)\n        at org.apache.spark.scheduler.TaskSchedulerImpl.stop(TaskSchedulerImpl.scala:508)\n        at org.apache.spark.scheduler.DAGScheduler.stop(DAGScheduler.scala:1752)\n        at org.apache.spark.SparkContext$$anonfun$stop$8.apply$mcV$sp(SparkContext.scala:1924)\n        at org.apache.spark.util.Utils$.tryLogNonFatalError(Utils.scala:1357)\n        at org.apache.spark.SparkContext.stop(SparkContext.scala:1923)\n        at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:578)\n        at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2486)\n        at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:930)\n        at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:921)\n        at scala.Option.getOrElse(Option.scala:121)\n        at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921)\n        at org.apache.spark.repl.Main$.createSparkSession(Main.scala:103)\n        at $line3.$read$$iw$$iw.&lt;init&gt;(&lt;console&gt;:15)\n        at $line3.$read$$iw.&lt;init&gt;(&lt;console&gt;:43)\n        at $line3.$read.&lt;init&gt;(&lt;console&gt;:45)\n        at $line3.$read$.&lt;init&gt;(&lt;console&gt;:49)\n        at $line3.$read$.&lt;clinit&gt;(&lt;console&gt;)\n        at $line3.$eval$.$print$lzycompute(&lt;console&gt;:7)\n        at $line3.$eval$.$print(&lt;console&gt;:6)\n        at $line3.$eval.$print(&lt;console&gt;)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:786)\n        at scala.tools.nsc.interpreter.IMain$Request.loadAndRun(IMain.scala:1047)\n        at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:638)\n        at scala.tools.nsc.interpreter.IMain$WrappedRequest$$anonfun$loadAndRunReq$1.apply(IMain.scala:637)\n        at scala.reflect.internal.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:31)\n        at scala.reflect.internal.util.AbstractFileClassLoader.asContext(AbstractFileClassLoader.scala:19)\n        at scala.tools.nsc.interpreter.IMain$WrappedRequest.loadAndRunReq(IMain.scala:637)\n        at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:569)\n        at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:565)\n        at scala.tools.nsc.interpreter.ILoop.interpretStartingWith(ILoop.scala:807)\n        at scala.tools.nsc.interpreter.ILoop.command(ILoop.scala:681)\n        at scala.tools.nsc.interpreter.ILoop.processLine(ILoop.scala:395)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\npply(SparkILoop.scala:79)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1$$anonfun$apply$mcV$sp$2.a\npply(SparkILoop.scala:79)\n        at scala.collection.immutable.List.foreach(List.scala:381)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(SparkILoop.s\ncala:79)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\n)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1$$anonfun$apply$mcV$sp$1.apply(SparkILoop.scala:79\n)\n        at scala.tools.nsc.interpreter.ILoop.savingReplayStack(ILoop.scala:91)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply$mcV$sp(SparkILoop.scala:78)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\n        at org.apache.spark.repl.SparkILoop$$anonfun$initializeSpark$1.apply(SparkILoop.scala:78)\n        at scala.tools.nsc.interpreter.IMain.beQuietDuring(IMain.scala:214)\n        at org.apache.spark.repl.SparkILoop.initializeSpark(SparkILoop.scala:77)\n        at org.apache.spark.repl.SparkILoop.loadFiles(SparkILoop.scala:110)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply$mcZ$sp(ILoop.scala:920)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1.apply(ILoop.scala:909)\n        at scala.reflect.internal.util.ScalaClassLoader$.savingContextLoader(ScalaClassLoader.scala:97)\n        at scala.tools.nsc.interpreter.ILoop.process(ILoop.scala:909)\n        at org.apache.spark.repl.Main$.doMain(Main.scala:76)\n        at org.apache.spark.repl.Main$.main(Main.scala:56)\n        at org.apache.spark.repl.Main.main(Main.scala)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\n        at org.apache.spark.deploy.SparkSubmit$.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:879)\n        at org.apache.spark.deploy.SparkSubmit$.doRunMain$1(SparkSubmit.scala:197)\n        at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:227)\n        at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:136)\n        at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\n2018-04-17 20:30:33 WARN  MetricsSystem:66 - Stopping a MetricsSystem that is not running\norg.apache.spark.SparkException: Invalid Spark URL: spark://HeartbeatReceiver@Silierin_Y510P:4391\n  at org.apache.spark.rpc.RpcEndpointAddress$.apply(RpcEndpointAddress.scala:66)\n  at org.apache.spark.rpc.netty.NettyRpcEnv.asyncSetupEndpointRefByURI(NettyRpcEnv.scala:134)\n  at org.apache.spark.rpc.RpcEnv.setupEndpointRefByURI(RpcEnv.scala:101)\n  at org.apache.spark.rpc.RpcEnv.setupEndpointRef(RpcEnv.scala:109)\n  at org.apache.spark.util.RpcUtils$.makeDriverRef(RpcUtils.scala:32)\n  at org.apache.spark.executor.Executor.&lt;init&gt;(Executor.scala:155)\n  at org.apache.spark.scheduler.local.LocalEndpoint.&lt;init&gt;(LocalSchedulerBackend.scala:59)\n  at org.apache.spark.scheduler.local.LocalSchedulerBackend.start(LocalSchedulerBackend.scala:126)\n  at org.apache.spark.scheduler.TaskSchedulerImpl.start(TaskSchedulerImpl.scala:164)\n  at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:500)\n  at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2486)\n  at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:930)\n  at org.apache.spark.sql.SparkSession$Builder$$anonfun$7.apply(SparkSession.scala:921)\n  at scala.Option.getOrElse(Option.scala:121)\n  at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921)\n  at org.apache.spark.repl.Main$.createSparkSession(Main.scala:103)\n  ... 55 elided\n&lt;console&gt;:14: error: not found: value spark\n       import spark.implicits._\n              ^\n&lt;console&gt;:14: error: not found: value spark\n       import spark.sql\n              ^\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /___/ .__/\\_,_/_/ /_/\\_\\   version 2.3.0\n      /_/\n\nUsing Scala version 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_162)\nType in expressions to have them evaluated.\nType :help for more information.\n\nscala&gt;\n</code></pre>\n\n<p>System variables are configured as follows:</p>\n\n<p><strong>HADOOP_HOME:</strong></p>\n\n<blockquote>\n  <p>c:\\hadoop</p>\n</blockquote>\n\n<p><strong>JAVA_HOME:</strong></p>\n\n<blockquote>\n  <p>C:\\Java\\jdk1.8.0_162</p>\n</blockquote>\n\n<p><strong>SCALA_HOME:</strong></p>\n\n<blockquote>\n  <p>C:\\scala</p>\n</blockquote>\n\n<p><strong>SPARK_HOME:</strong></p>\n\n<blockquote>\n  <p>C:\\spark\\spark-2.3.0-bin-hadoop2.7</p>\n</blockquote>\n\n<p><strong>PATH:</strong></p>\n\n<blockquote>\n  <p>%JAVA_HOME%\\bin;%SCALA_HOME%\\bin;%HADOOP_HOME%\\bin;%SPARK_HOME%\\bin;</p>\n</blockquote>\n\n<p>spark downloaded from here:\n<a href=\"https://spark.apache.org/downloads.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/downloads.html</a></p>\n\n<p>winutils (x64) is in c:\\hadoop\\bin\\\ndownloaded from <a href=\"http://www.eaiesb.com/blogs/?tag=setup-spark-on-windows\" rel=\"nofollow noreferrer\">http://www.eaiesb.com/blogs/?tag=setup-spark-on-windows</a> </p>\n\n<p>I run following command after create directory <em>C:\\tmp\\hive</em></p>\n\n<blockquote>\n  <p>C:\\hadoop\\bin\\winutils.exe chmod 777 C:\\tmp\\hive</p>\n</blockquote>\n\n<p>java version:</p>\n\n<blockquote>\n  <p>java version \"1.8.0_162\"\n  Java(TM) SE Runtime Environment (build 1.8.0_162-b12)\n  Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)</p>\n</blockquote>\n\n<p>scala version: </p>\n\n<blockquote>\n  <p>Scala code runner version 2.12.5 -- Copyright 2002-2018, LAMP/EPFL and Lightbend, Inc.</p>\n</blockquote>\n\n<p>I run Spark for the first time, so maybe I skipped some configuration steps? Please help.</p>\n"},{"tags":["java","spring-boot-maven-plugin"],"comments":[{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":1,"creation_date":1674897569,"post_id":75266520,"comment_id":132815010,"body_markdown":"replacing RestController with Controller should resolve this issue as SpringBoot  will then return a view (home.jsp), rather than a String. If it still doesn&#39;t work (you said you&#39;ve already tried that)  , then you should describe the problem in more detail.","body":"replacing RestController with Controller should resolve this issue as SpringBoot  will then return a view (home.jsp), rather than a String. If it still doesn&#39;t work (you said you&#39;ve already tried that)  , then you should describe the problem in more detail."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1674910407,"post_id":75266520,"comment_id":132817057,"body_markdown":"Surely #spring.thymeleaf.enabled=true should be uncommented. Thymeleaf turns the strings returned from Controller into pages.","body":"Surely #spring.thymeleaf.enabled=true should be uncommented. Thymeleaf turns the strings returned from Controller into pages."},{"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"score":0,"creation_date":1674921768,"post_id":75266520,"comment_id":132819006,"body_markdown":"@dsp_user and John Williams Thank you for your quick reply but changing Controller to RestController not making any difference returning same result only that is string value even if comment or uncomment spring.thymeleaf.enabled.","body":"@dsp_user and John Williams Thank you for your quick reply but changing Controller to RestController not making any difference returning same result only that is string value even if comment or uncomment spring.thymeleaf.enabled."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1674931738,"post_id":75266520,"comment_id":132820941,"body_markdown":"@Shweta, the correct annotation in this case is Controller, not RestController.","body":"@Shweta, the correct annotation in this case is Controller, not RestController."},{"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"score":0,"creation_date":1674932957,"post_id":75266520,"comment_id":132821151,"body_markdown":"@dsp_user Yah I am using Controller only for now, but nothing working","body":"@dsp_user Yah I am using Controller only for now, but nothing working"},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1674933073,"post_id":75266520,"comment_id":132821173,"body_markdown":"@Shweta,  you have to be more specific. &quot;Nothing is working&quot; doesn&#39;t explain much.","body":"@Shweta,  you have to be more specific. &quot;Nothing is working&quot; doesn&#39;t explain much."},{"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"score":0,"creation_date":1675089172,"post_id":75266520,"comment_id":132847560,"body_markdown":"Hi @dsp_user I have already shared the entire project code on the post , just one difference is in controller file I am using Controller annotation(the correct one like you said before) now instead of RestController and still I am getting output as string value only that is &#39;home&#39; and not the jsp page.","body":"Hi @dsp_user I have already shared the entire project code on the post , just one difference is in controller file I am using Controller annotation(the correct one like you said before) now instead of RestController and still I am getting output as string value only that is &#39;home&#39; and not the jsp page."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1675101776,"post_id":75266520,"comment_id":132851966,"body_markdown":"@Shweta, go to Developer tools (F12 in your browser) and check what is happening under the Network tab ( you should see something like localhost:8080/home and the corresponding http response status). That status should give you an idea whether there&#39;s something wrong.","body":"@Shweta, go to Developer tools (F12 in your browser) and check what is happening under the Network tab ( you should see something like localhost:8080/home and the corresponding http response status). That status should give you an idea whether there&#39;s something wrong."},{"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"score":0,"creation_date":1675228305,"post_id":75266520,"comment_id":132881182,"body_markdown":"@dsp_user so I checked the status under network tab as you suggested where status is 200 only, attached the screenshot in the post for same. kindly check.","body":"@dsp_user so I checked the status under network tab as you suggested where status is 200 only, attached the screenshot in the post for same. kindly check."}],"answers":[{"tags":[],"owner":{"account_id":14892907,"reputation":62,"user_id":10754044,"display_name":"Ankit Yadav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675234091,"creation_date":1675234091,"answer_id":75306545,"question_id":75266520,"body_markdown":"Replace @RestController   to @Controller like below\r\n\r\n    @Controller\r\npublic class LoginController {\r\n\r\n    \r\n    @GetMapping(path=&quot;/home&quot;)\r\n    public String loginPage() {\r\n        System.out.println(&quot;hello&quot;);\r\n        return &quot;home&quot;;\r\n    }\r\n}","title":"How to resolve the issue if Spring Boot Application returns string value instead of JSP page","body":"<p>Replace @RestController   to @Controller like below</p>\n<pre><code>@Controller\n</code></pre>\n<p>public class LoginController {</p>\n<pre><code>@GetMapping(path=&quot;/home&quot;)\npublic String loginPage() {\n    System.out.println(&quot;hello&quot;);\n    return &quot;home&quot;;\n}\n</code></pre>\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"score":0,"creation_date":1675240252,"post_id":75306759,"comment_id":132883552,"body_markdown":"Thanks @ankit Yadav for your suggestion. Like you said I changed RestController to Controller, added EntityScan and ComponentScan in main application file now I am getting below exception   Whitelabel Error Page.This application has no explicit mapping for /error, so you are seeing this as a fallback.Circular view path [contact]: would dispatch back to the current handler URL [/contact] again. Check your ViewResolver setup!","body":"Thanks @ankit Yadav for your suggestion. Like you said I changed RestController to Controller, added EntityScan and ComponentScan in main application file now I am getting below exception   Whitelabel Error Page.This application has no explicit mapping for /error, so you are seeing this as a fallback.Circular view path [contact]: would dispatch back to the current handler URL [/contact] again. Check your ViewResolver setup!"},{"owner":{"account_id":14892907,"reputation":62,"user_id":10754044,"display_name":"Ankit Yadav"},"score":0,"creation_date":1675242115,"post_id":75306759,"comment_id":132884104,"body_markdown":"ComponentScan is your controller package path mention clearly and check your path mapping is ok or not?application properties file and jsp file prefix path and jsp","body":"ComponentScan is your controller package path mention clearly and check your path mapping is ok or not?application properties file and jsp file prefix path and jsp"},{"owner":{"account_id":14892907,"reputation":62,"user_id":10754044,"display_name":"Ankit Yadav"},"score":0,"creation_date":1675242152,"post_id":75306759,"comment_id":132884115,"body_markdown":"package com.web.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@Controller\n@RequestMapping(&quot;/view&quot;)\npublic class HomeController {\n\n\t @GetMapping(&quot;/home&quot;)\n\tpublic String showForm() {\n\t  \n\t    return &quot;home&quot;;\n\t}\n}","body":"package com.web.controller;  import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController;  @Controller @RequestMapping(&quot;/view&quot;) public class HomeController {  \t @GetMapping(&quot;/home&quot;) \tpublic String showForm() { \t   \t    return &quot;home&quot;; \t} }"},{"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"score":0,"creation_date":1675329297,"post_id":75306759,"comment_id":132906498,"body_markdown":"Thank you so much @ankit yadav for your guidance. Your given code is working fine. when I try to follow the same in my spring boot application it doesn&#39;t work but creating new dynamic web project and then adding spring dependencies resolving my issue.","body":"Thank you so much @ankit yadav for your guidance. Your given code is working fine. when I try to follow the same in my spring boot application it doesn&#39;t work but creating new dynamic web project and then adding spring dependencies resolving my issue."},{"owner":{"account_id":14892907,"reputation":62,"user_id":10754044,"display_name":"Ankit Yadav"},"score":0,"creation_date":1675330499,"post_id":75306759,"comment_id":132906878,"body_markdown":"Please upgrade my REPUTATION","body":"Please upgrade my REPUTATION"}],"tags":[],"owner":{"account_id":14892907,"reputation":62,"user_id":10754044,"display_name":"Ankit Yadav"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675235929,"creation_date":1675235929,"answer_id":75306759,"question_id":75266520,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TyVkV.png\r\n  [2]: https://i.stack.imgur.com/jE1CE.png\r\n  [3]: https://i.stack.imgur.com/rzFwO.png\r\n  [4]: https://i.stack.imgur.com/GY0rb.png\r\n\r\n\r\nPlease Add @ComponentScan(basePackages={&quot;com.web&quot;}) in your main application file ","title":"How to resolve the issue if Spring Boot Application returns string value instead of JSP page","body":"<p><a href=\"https://i.stack.imgur.com/TyVkV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TyVkV.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/jE1CE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jE1CE.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/rzFwO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rzFwO.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/GY0rb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GY0rb.png\" alt=\"enter image description here\" /></a></p>\n<p>Please Add @ComponentScan(basePackages={&quot;com.web&quot;}) in your main application file</p>\n"}],"owner":{"account_id":27641466,"reputation":13,"user_id":21098343,"display_name":"Shweta"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":743,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75306759,"answer_count":2,"score":1,"last_activity_date":1675235929,"creation_date":1674896597,"question_id":75266520,"body_markdown":"This is my pom.xml file\r\n\r\npom.xml  [enter image description here](https://i.stack.imgur.com/Mmz7z.png)\r\n\r\nApplication.properties File\r\n\r\n```\r\n\r\n#spring.thymeleaf.enabled=true\r\n\r\n#spring.thymeleaf.prefix=/templates/\r\n#spring.thymeleaf.suffix=.jsp\r\n\r\nspring.mvc.view.prefix=/templates/\r\nspring.mvc.view.suffix=.jsp\r\n```\r\n\r\nHome.jsp\r\n\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n  &lt;title&gt;Login Page&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n   &lt;h1&gt;Registration&lt;/h1&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nController\r\n\r\n```\r\n@RestController\r\npublic class LoginController {\r\n\r\n\t\r\n\t@GetMapping(path=&quot;/home&quot;)\r\n\tpublic String loginPage() {\r\n\t\tSystem.out.println(&quot;hello&quot;);\r\n\t\treturn &quot;home&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nApplication File\r\n\r\n&gt; @SpringBootApplication\r\n&gt;\r\n&gt; public class SpringJspDemoApplication {\r\n&gt;\r\n&gt; public static void main(String\\[\\] args)\r\n&gt;\r\n&gt; {\r\n&gt; SpringApplication.run(SpringJspDemoApplication.class, args);\r\n&gt; }\r\n&gt;\r\n&gt; }\r\n\r\nOutput:\r\n\r\n&gt; [enter image description here](https://i.stack.imgur.com/5W6Yh.png) this is the output I am getting a string value instead of jsp\r\n\r\nTried using Thymeleaf, tried to change @RestController-\\&gt; @Controller, used @ComponentScan etc but issue not getting resolved.\r\n\r\nTried going through the solutions given on site but none of them are working for me, also they are quite older.\r\n\r\nProject Structure :\r\n\r\n[enter image description here](https://i.stack.imgur.com/zPvJ0.png) tried to put home.jsp at /webapp/WEB-INF/jsp/ that is also not working.\r\n\r\nwhat will be the possible solution on this, can anyone please guide on this?\r\n\r\nBelow is the code when I change @Controller to @RestController\r\n[![\r\n\r\n&gt; Controller File\r\n\r\nBlockquote\r\n\r\n][1]][1]\r\n\r\n\r\nAnd result is still\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n&gt; I have checked the status under network tab which is 200 only\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IZXny.png\r\n  [2]: https://i.stack.imgur.com/Hmtes.png\r\n  [3]: https://i.stack.imgur.com/08AuF.png","title":"How to resolve the issue if Spring Boot Application returns string value instead of JSP page","body":"<p>This is my pom.xml file</p>\n<p>pom.xml  <a href=\"https://i.stack.imgur.com/Mmz7z.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Application.properties File</p>\n<pre><code>\n#spring.thymeleaf.enabled=true\n\n#spring.thymeleaf.prefix=/templates/\n#spring.thymeleaf.suffix=.jsp\n\nspring.mvc.view.prefix=/templates/\nspring.mvc.view.suffix=.jsp\n</code></pre>\n<p>Home.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Login Page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n   &lt;h1&gt;Registration&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Controller</p>\n<pre><code>@RestController\npublic class LoginController {\n\n    \n    @GetMapping(path=&quot;/home&quot;)\n    public String loginPage() {\n        System.out.println(&quot;hello&quot;);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p>Application File</p>\n<blockquote>\n<p>@SpringBootApplication</p>\n<p>public class SpringJspDemoApplication {</p>\n<p>public static void main(String[] args)</p>\n<p>{\nSpringApplication.run(SpringJspDemoApplication.class, args);\n}</p>\n<p>}</p>\n</blockquote>\n<p>Output:</p>\n<blockquote>\n<p><a href=\"https://i.stack.imgur.com/5W6Yh.png\" rel=\"nofollow noreferrer\">enter image description here</a> this is the output I am getting a string value instead of jsp</p>\n</blockquote>\n<p>Tried using Thymeleaf, tried to change @RestController-&gt; @Controller, used @ComponentScan etc but issue not getting resolved.</p>\n<p>Tried going through the solutions given on site but none of them are working for me, also they are quite older.</p>\n<p>Project Structure :</p>\n<p><a href=\"https://i.stack.imgur.com/zPvJ0.png\" rel=\"nofollow noreferrer\">enter image description here</a> tried to put home.jsp at /webapp/WEB-INF/jsp/ that is also not working.</p>\n<p>what will be the possible solution on this, can anyone please guide on this?</p>\n<p>Below is the code when I change @Controller to @RestController\n[![</p>\n<blockquote>\n<p>Controller File</p>\n</blockquote>\n<p>Blockquote</p>\n<p>]<a href=\"https://i.stack.imgur.com/IZXny.png\" rel=\"nofollow noreferrer\">1</a>]<a href=\"https://i.stack.imgur.com/IZXny.png\" rel=\"nofollow noreferrer\">1</a></p>\n<p>And result is still</p>\n<p><a href=\"https://i.stack.imgur.com/Hmtes.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hmtes.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>I have checked the status under network tab which is 200 only\n<a href=\"https://i.stack.imgur.com/08AuF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/08AuF.png\" alt=\"enter image description here\" /></a></p>\n</blockquote>\n"},{"tags":["java","spring"],"owner":{"account_id":10148558,"reputation":31,"user_id":7495946,"display_name":"Egor K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675235295,"creation_date":1675235295,"question_id":75306697,"body_markdown":"I am developing a code analysis plugin and a user project may contain Spring definitions.\r\n\r\nAnalyzing a source class, I need to get information about beans (more specially, which class actually implements an injected interface). Of course, I can take this information from Context. However, starting a context may cause to some side effects (like some db configuring or actions in post processors) in users code that is unacceptable.\r\n\r\nHow can I get the required information without initializing Context?\r\n\r\nHow can I start Context in &quot;safe&quot; mode to avoid or at least minimize side effects?\r\n","title":"Get Spring Bean definitions without initializing Context","body":"<p>I am developing a code analysis plugin and a user project may contain Spring definitions.</p>\n<p>Analyzing a source class, I need to get information about beans (more specially, which class actually implements an injected interface). Of course, I can take this information from Context. However, starting a context may cause to some side effects (like some db configuring or actions in post processors) in users code that is unacceptable.</p>\n<p>How can I get the required information without initializing Context?</p>\n<p>How can I start Context in &quot;safe&quot; mode to avoid or at least minimize side effects?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":261048,"reputation":25820,"user_id":544983,"accept_rate":67,"display_name":"Juvanis"},"score":1,"creation_date":1407485377,"post_id":25198726,"comment_id":39241899,"body_markdown":"you had better shortly explain your algorithm and idea.","body":"you had better shortly explain your algorithm and idea."},{"owner":{"account_id":55508,"reputation":12373,"user_id":166247,"display_name":"Ashalynd"},"score":0,"creation_date":1407485453,"post_id":25198726,"comment_id":39241936,"body_markdown":"where is P in your solution? And what was the question?","body":"where is P in your solution? And what was the question?"}],"answers":[{"tags":[],"owner":{"account_id":4884608,"reputation":11,"user_id":3937424,"display_name":"Ism"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1407934050,"creation_date":1407933737,"answer_id":25286486,"question_id":25198726,"body_markdown":"I also tried and got only 83%. My solution:\r\n\r\n    class Solution {\r\n        public int solution(int[] A) {\r\n\r\n            int[] leftSums = new int[A.length];\r\n            for (int i = 0; i &lt; leftSums.length; i++) {\r\n                leftSums[i] = 0;\r\n            }\r\n            \r\n            int sum = 0;\r\n            for (int i = 0; i &lt; A.length; i++) {\r\n                sum  += A[i];\r\n                leftSums[i] = sum;\r\n            }\r\n            /*\r\n            for (int i = 0; i &lt; leftSums.length; i++) {\r\n                if (i == 0) {\r\n                    System.out.print(&quot;Left Sums Array is : [&quot;);\r\n                }\r\n            \r\n                if (i == leftSums.length - 1) {\r\n                    System.out.println(leftSums[i] + &quot;]&quot;);\r\n                }\r\n                System.out.print(leftSums[i] + &quot;, &quot;);\r\n            }\r\n            */\r\n            final int total = sum;\r\n            //System.out.println(&quot;Total is &quot; + total);\r\n            int minDiff = Integer.MAX_VALUE;\r\n            int currDiff = 0;\r\n            for (int i = 0; i &lt; leftSums.length; i++) {\r\n                currDiff = Math.abs(leftSums[i] - (total - leftSums[i]));\r\n                if (currDiff &lt; minDiff) {\r\n                    minDiff = currDiff;\r\n                }\r\n            }\r\n            \r\n            return minDiff;\r\n        }\r\n    }\r\n\r\n\r\nBelow are those which failed for correctness.\r\ndouble \r\ntwo elements\t1.280 s\tWRONG ANSWER \r\ngot 0 expected 2000\r\n\r\nsmall \r\nsmall elements\t1.304 s\tWRONG ANSWER \r\ngot 0 expected 20\r\n\r\nI tested myself for 2 elements and it worked for me.\r\n\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>I also tried and got only 83%. My solution:</p>\n\n<pre><code>class Solution {\n    public int solution(int[] A) {\n\n        int[] leftSums = new int[A.length];\n        for (int i = 0; i &lt; leftSums.length; i++) {\n            leftSums[i] = 0;\n        }\n\n        int sum = 0;\n        for (int i = 0; i &lt; A.length; i++) {\n            sum  += A[i];\n            leftSums[i] = sum;\n        }\n        /*\n        for (int i = 0; i &lt; leftSums.length; i++) {\n            if (i == 0) {\n                System.out.print(\"Left Sums Array is : [\");\n            }\n\n            if (i == leftSums.length - 1) {\n                System.out.println(leftSums[i] + \"]\");\n            }\n            System.out.print(leftSums[i] + \", \");\n        }\n        */\n        final int total = sum;\n        //System.out.println(\"Total is \" + total);\n        int minDiff = Integer.MAX_VALUE;\n        int currDiff = 0;\n        for (int i = 0; i &lt; leftSums.length; i++) {\n            currDiff = Math.abs(leftSums[i] - (total - leftSums[i]));\n            if (currDiff &lt; minDiff) {\n                minDiff = currDiff;\n            }\n        }\n\n        return minDiff;\n    }\n}\n</code></pre>\n\n<p>Below are those which failed for correctness.\ndouble \ntwo elements    1.280 s WRONG ANSWER \ngot 0 expected 2000</p>\n\n<p>small \nsmall elements  1.304 s WRONG ANSWER \ngot 0 expected 20</p>\n\n<p>I tested myself for 2 elements and it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":4900676,"reputation":1,"user_id":3949065,"display_name":"mijjim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1408232733,"creation_date":1408232733,"answer_id":25345046,"question_id":25198726,"body_markdown":"Counterexample for user699681: `A = {0, 1, 2, -5, 2}`,\r\nand for Ism: `A = {1, -1}`.","title":"Tape-Equilibrium Codility Training program","body":"<p>Counterexample for user699681: <code>A = {0, 1, 2, -5, 2}</code>,\nand for Ism: <code>A = {1, -1}</code>.</p>\n"},{"comments":[{"owner":{"account_id":373432,"reputation":4279,"user_id":723059,"accept_rate":82,"display_name":"polonskyg"},"score":2,"creation_date":1441295576,"post_id":26743626,"comment_id":52630990,"body_markdown":"I&#39;d add an enhancement inside the for...\n\nif (dif == 0) return 0;\n\nAs it is the minimum possible difference, since it&#39;s the absolute difference and some cases it will save cpu cycles.","body":"I&#39;d add an enhancement inside the for...  if (dif == 0) return 0;  As it is the minimum possible difference, since it&#39;s the absolute difference and some cases it will save cpu cycles."}],"tags":[],"owner":{"account_id":3997109,"reputation":1605,"user_id":3294286,"accept_rate":67,"display_name":"Sebastian D&#39;Agostino"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1416253681,"creation_date":1415130152,"answer_id":26743626,"question_id":25198726,"body_markdown":"I share my 100% score Java solution:\r\n\r\n    class Solution {\r\n    public int solution(int[] A) {\r\n            final int size = A.length;\r\n            long sumMin = (int)A[0];\r\n            long sumMax = 0;\r\n            for (int i = 1; i &lt; size; i++) {\r\n                sumMax += (int)A[i];\r\n            }\r\n            int minDif = (int)Math.abs(sumMax - sumMin);\r\n            for (int i = 1; i &lt; size; i++) {\r\n                int dif = (int)Math.abs(sumMax - sumMin);\r\n                if (dif &lt; minDif) {\r\n                    minDif = dif;\r\n                }\r\n                sumMin += A[i];\r\n                sumMax -= A[i];\r\n            }\r\n            return minDif;\r\n        }\r\n    }\r\n\r\nThe trick is that looping the array twice your complexity is 2N, which is O(N).\r\n\r\nAddition results should be &#39;long&#39; in order not to have problems with big extremes.\r\n\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>I share my 100% score Java solution:</p>\n\n<pre><code>class Solution {\npublic int solution(int[] A) {\n        final int size = A.length;\n        long sumMin = (int)A[0];\n        long sumMax = 0;\n        for (int i = 1; i &lt; size; i++) {\n            sumMax += (int)A[i];\n        }\n        int minDif = (int)Math.abs(sumMax - sumMin);\n        for (int i = 1; i &lt; size; i++) {\n            int dif = (int)Math.abs(sumMax - sumMin);\n            if (dif &lt; minDif) {\n                minDif = dif;\n            }\n            sumMin += A[i];\n            sumMax -= A[i];\n        }\n        return minDif;\n    }\n}\n</code></pre>\n\n<p>The trick is that looping the array twice your complexity is 2N, which is O(N).</p>\n\n<p>Addition results should be 'long' in order not to have problems with big extremes.</p>\n"},{"tags":[],"owner":{"account_id":5316897,"reputation":473,"user_id":4241487,"display_name":"Balaji Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415911447,"creation_date":1415911447,"answer_id":26918050,"question_id":25198726,"body_markdown":"TapeEquilibrium in C\r\n\r\n    int solution(int A[], int N) {\r\n        // write your code in C90\r\n        long int s_r=0,s_l=A[0],sum=A[0];\r\n        int i,min=11111111,r;\r\n        \r\n        for(i=1;i&lt;N;i++)\r\n            sum+=A[i];\r\n        \r\n        for(i=1;i&lt;N;i++)\r\n        {\r\n            s_r=sum-s_l;\r\n            r=(int)(s_l-s_r);\r\n            if(r&lt;0) r=-r;\r\n            if(min&gt;r)min=r;\r\n            if(min==0)break;\r\n            s_l=sum-s_r+A[i];\r\n        } \r\n        return min;\r\n    }","title":"Tape-Equilibrium Codility Training program","body":"<p>TapeEquilibrium in C</p>\n\n<pre><code>int solution(int A[], int N) {\n    // write your code in C90\n    long int s_r=0,s_l=A[0],sum=A[0];\n    int i,min=11111111,r;\n\n    for(i=1;i&lt;N;i++)\n        sum+=A[i];\n\n    for(i=1;i&lt;N;i++)\n    {\n        s_r=sum-s_l;\n        r=(int)(s_l-s_r);\n        if(r&lt;0) r=-r;\n        if(min&gt;r)min=r;\n        if(min==0)break;\n        s_l=sum-s_r+A[i];\n    } \n    return min;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5505436,"reputation":1,"user_id":4373403,"display_name":"Alexey Udalykh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418891363,"creation_date":1418891363,"answer_id":27542124,"question_id":25198726,"body_markdown":".. Or even a bit shorter to get 100%\r\n\r\n    public int solution(int[] A) {\r\n        int sumMin = A[0];\r\n        int sumMax = 0;\r\n\r\n        for (int i = 1; i &lt; A.length; i++) {\r\n            sumMax += A[i];\r\n        }\r\n\r\n        int minDif = Math.abs(sumMin - sumMax);\r\n        for (int i = 1; i &lt; A.length - 1; i++) {\r\n            sumMin += A[i];\r\n            sumMax -= A[i];\r\n            minDif = Math.min(minDif, Math.abs(sumMin - sumMax));\r\n        }\r\n\r\n        return minDif;\r\n    }","title":"Tape-Equilibrium Codility Training program","body":"<p>.. Or even a bit shorter to get 100%</p>\n\n<pre><code>public int solution(int[] A) {\n    int sumMin = A[0];\n    int sumMax = 0;\n\n    for (int i = 1; i &lt; A.length; i++) {\n        sumMax += A[i];\n    }\n\n    int minDif = Math.abs(sumMin - sumMax);\n    for (int i = 1; i &lt; A.length - 1; i++) {\n        sumMin += A[i];\n        sumMax -= A[i];\n        minDif = Math.min(minDif, Math.abs(sumMin - sumMax));\n    }\n\n    return minDif;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4520656,"reputation":73,"user_id":3674013,"display_name":"Xun"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1419447448,"creation_date":1419446740,"answer_id":27641072,"question_id":25198726,"body_markdown":"The following is my 100% solution:\r\n\r\n    class Solution {\r\n\tpublic int solution(int[] A) {\r\n\t\t// write your code in Java SE 8\r\n\t\t// int idx = 0;\r\n\t\tint sumPre = A[0];\r\n\t\tint sumPost = 0;\r\n\t\tfor (int i = 1; i &lt; A.length; i++) {\r\n\t\t\tsumPost += A[i];\r\n\t\t}\r\n\t\tint difMin = Math.abs(sumPost - sumPre);\r\n\t\tint tempSub = 0;\r\n\t\tfor (int i = 1; i &lt; A.length - 1; i++) {\r\n\t\t\tsumPre += A[i];\r\n\t\t\tsumPost -= A[i];\r\n\t\t\ttempSub = Math.abs(sumPost - sumPre);\r\n\t\t\tif (tempSub &lt; difMin) {\r\n\t\t\t\tdifMin = tempSub;\r\n\t\t\t\t// idx = i+1;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn difMin;\r\n\t}\r\n    }\r\n\r\nI can not find their test input, but I find a weird thing is that when   &quot;for(int i = 1; i &lt; A.length - 1; i++) &quot; is changed to &quot; for(int i = 1; i &lt; A.length; i++)&quot;, then it will trigger two wrong runs...So it still must be a border value issue. \r\nIf any one find a test input can break the validity, please share with us, thanks.\r\n\r\n\r\n\r\nCaution: {1,-1} indeed triggered the problem, since P &lt; N, so at least one element should be left in the right part. -&gt; {1,-1},{} is not a valid solution according to the problem definition.\r\nProblem solved.","title":"Tape-Equilibrium Codility Training program","body":"<p>The following is my 100% solution:</p>\n\n<pre><code>class Solution {\npublic int solution(int[] A) {\n    // write your code in Java SE 8\n    // int idx = 0;\n    int sumPre = A[0];\n    int sumPost = 0;\n    for (int i = 1; i &lt; A.length; i++) {\n        sumPost += A[i];\n    }\n    int difMin = Math.abs(sumPost - sumPre);\n    int tempSub = 0;\n    for (int i = 1; i &lt; A.length - 1; i++) {\n        sumPre += A[i];\n        sumPost -= A[i];\n        tempSub = Math.abs(sumPost - sumPre);\n        if (tempSub &lt; difMin) {\n            difMin = tempSub;\n            // idx = i+1;\n\n        }\n    }\n    return difMin;\n}\n}\n</code></pre>\n\n<p>I can not find their test input, but I find a weird thing is that when   \"for(int i = 1; i &lt; A.length - 1; i++) \" is changed to \" for(int i = 1; i &lt; A.length; i++)\", then it will trigger two wrong runs...So it still must be a border value issue. \nIf any one find a test input can break the validity, please share with us, thanks.</p>\n\n<p>Caution: {1,-1} indeed triggered the problem, since P &lt; N, so at least one element should be left in the right part. -> {1,-1},{} is not a valid solution according to the problem definition.\nProblem solved.</p>\n"},{"comments":[{"owner":{"account_id":125231,"reputation":243,"user_id":320876,"display_name":"taftster"},"score":0,"creation_date":1614206458,"post_id":29226918,"comment_id":117318743,"body_markdown":"And likewise at the end, you should only go up to (A.length - 1), because you don&#39;t want an empty array on the right side either.","body":"And likewise at the end, you should only go up to (A.length - 1), because you don&#39;t want an empty array on the right side either."}],"tags":[],"owner":{"account_id":5989987,"reputation":11,"user_id":4706324,"display_name":"Arda OZTURK"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1427181554,"creation_date":1427181554,"answer_id":29226918,"question_id":25198726,"body_markdown":"For %83 results, the problem is it says &quot;splits this tape into two non-empty parts&quot;. So if you split for A[0], your first array will be empty. So you should start with A[1]. ","title":"Tape-Equilibrium Codility Training program","body":"<p>For %83 results, the problem is it says \"splits this tape into two non-empty parts\". So if you split for A[0], your first array will be empty. So you should start with A[1]. </p>\n"},{"tags":[],"owner":{"account_id":257480,"reputation":5081,"user_id":538921,"accept_rate":91,"display_name":"Edward J Beckett"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431486353,"creation_date":1431486353,"answer_id":30204958,"question_id":25198726,"body_markdown":"Here&#39;s my [implementation](https://codility.com/demo/results/demoZV9ZKA-PX5/) using Java 8 [IntStream](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html) to simplify the sum process...  \r\n100% Correct, 100% Performance.\r\n\r\n    import java.util.stream.IntStream;\r\n\r\n    public class TapeEquilibrium {\r\n    \r\n    \tpublic static int diffIndex( int[] A ) {\r\n    \r\n    \t\tlong lower = 0, diff = 0, higher = IntStream.of( A ).asLongStream().sum(), minDiff = Integer.MAX_VALUE;\r\n    \t\tfor(int i = 0; i &lt; A.length-1; i++) {\r\n    \t\t\tlower += A[i];\r\n    \t\t\thigher -= A[i];\r\n    \t\t\tdiff = Math.abs( higher - lower);\r\n    \t\t\tif( diff &lt; minDiff  ) {\r\n    \t\t\t\tminDiff = diff;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn (int) minDiff;\r\n    \t}\r\n    \r\n    \r\n    \tpublic static void main( String[] args ) {\r\n    \r\n    \t\tint[] A = { 3, 1, 2, 4, 3 };\r\n    \t\tSystem.out.println( diffIndex( A ) );\r\n    \r\n    \t}\r\n    }    \r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>Here's my <a href=\"https://codility.com/demo/results/demoZV9ZKA-PX5/\" rel=\"nofollow\">implementation</a> using Java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow\">IntStream</a> to simplify the sum process...<br>\n100% Correct, 100% Performance.</p>\n\n<pre><code>import java.util.stream.IntStream;\n\npublic class TapeEquilibrium {\n\n    public static int diffIndex( int[] A ) {\n\n        long lower = 0, diff = 0, higher = IntStream.of( A ).asLongStream().sum(), minDiff = Integer.MAX_VALUE;\n        for(int i = 0; i &lt; A.length-1; i++) {\n            lower += A[i];\n            higher -= A[i];\n            diff = Math.abs( higher - lower);\n            if( diff &lt; minDiff  ) {\n                minDiff = diff;\n            }\n        }\n        return (int) minDiff;\n    }\n\n\n    public static void main( String[] args ) {\n\n        int[] A = { 3, 1, 2, 4, 3 };\n        System.out.println( diffIndex( A ) );\n\n    }\n}    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2625978,"reputation":857,"user_id":2272958,"accept_rate":50,"display_name":"Kapil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432407827,"creation_date":1432407827,"answer_id":30416528,"question_id":25198726,"body_markdown":"here is my Solution with 100% correctness &amp; performance\r\n\r\n    int solution(int A[], int N) \r\n    {\r\n        int sum,i;\r\n        sum=0;\r\n        for(i=0;i&lt;N;i++)\r\n        {\r\n            sum+=A[i];\r\n            A[i]=sum;\r\n        }\r\n        \r\n        int min_diff=abs(sum-A[0]*2);\r\n        for(i=0;i&lt;N-1;i++)\r\n        {\r\n            int tmp;\r\n            tmp=abs(sum-A[i]*2);\r\n            \r\n            if(tmp&lt;min_diff)\r\n                min_diff=tmp;\r\n        }\r\n        \r\n        return min_diff;\r\n    }\r\n\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>here is my Solution with 100% correctness &amp; performance</p>\n\n<pre><code>int solution(int A[], int N) \n{\n    int sum,i;\n    sum=0;\n    for(i=0;i&lt;N;i++)\n    {\n        sum+=A[i];\n        A[i]=sum;\n    }\n\n    int min_diff=abs(sum-A[0]*2);\n    for(i=0;i&lt;N-1;i++)\n    {\n        int tmp;\n        tmp=abs(sum-A[i]*2);\n\n        if(tmp&lt;min_diff)\n            min_diff=tmp;\n    }\n\n    return min_diff;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6760537,"reputation":1,"user_id":5207491,"display_name":"Jiun Suk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439107460,"creation_date":1439105314,"answer_id":31901913,"question_id":25198726,"body_markdown":"Try this one:\r\n\r\n    Class Solution {\r\n    \r\n        public int solution(int[] A) {\r\n    \r\n            int sum1 = 0;\r\n            int sum2 = 0;\r\n            int sum3 = 0;\r\n            int len = A.length;\r\n            int min = 1 ;\r\n            \r\n            for(int i=0; i&lt;len; i++){\r\n                    sum2 += A[i];\r\n            }\r\n            \r\n            for(int i=0; i&lt; len-1 ; i++){\r\n               \r\n                sum1 += A[i];\r\n                sum3 = sum2-sum1;\r\n              \r\n                if( min &gt; Math.abs(sum1- sum3)){\r\n                    min = Math.abs( sum1 - sum3);\r\n                }\r\n                \r\n            }\r\n            \r\n            return min;\r\n        }\r\n\r\n    }\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>Try this one:</p>\n\n<pre><code>Class Solution {\n\n    public int solution(int[] A) {\n\n        int sum1 = 0;\n        int sum2 = 0;\n        int sum3 = 0;\n        int len = A.length;\n        int min = 1 ;\n\n        for(int i=0; i&lt;len; i++){\n                sum2 += A[i];\n        }\n\n        for(int i=0; i&lt; len-1 ; i++){\n\n            sum1 += A[i];\n            sum3 = sum2-sum1;\n\n            if( min &gt; Math.abs(sum1- sum3)){\n                min = Math.abs( sum1 - sum3);\n            }\n\n        }\n\n        return min;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":354646,"reputation":3890,"user_id":4185364,"display_name":"milos.ai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445796638,"creation_date":1445796638,"answer_id":33333174,"question_id":25198726,"body_markdown":"Here is 100% in scala.  \r\n\r\n    def solution(A: Array[Int]): Int = {\r\n    \r\n        //get the whole sum\r\n        val allSum = A.sum\r\n    \r\n        //calculate left and right sum\r\n        var sumLeft = A(0)\r\n        var sumRight = allSum - sumLeft\r\n    \r\n        //set initial diff for P=1\r\n        var minDiff = math.abs(sumLeft-sumRight)  //difference\r\n    \r\n        // loop for all P after the initial P position\r\n        for(p &lt;- 1 to A.length-2){\r\n    \r\n          //recalculate values\r\n          sumLeft += A(p)\r\n          sumRight -= A(p)\r\n    \r\n          if(math.abs(sumLeft-sumRight) &lt; minDiff){\r\n            // if difference is smaller then save new min diff\r\n            minDiff = math.abs(sumLeft-sumRight)\r\n          }\r\n    \r\n        }\r\n    \r\n        minDiff\r\n      }\r\n\r\nPerformance: https://codility.com/demo/results/trainingZNZCZN-AGC/","title":"Tape-Equilibrium Codility Training program","body":"<p>Here is 100% in scala.  </p>\n\n<pre><code>def solution(A: Array[Int]): Int = {\n\n    //get the whole sum\n    val allSum = A.sum\n\n    //calculate left and right sum\n    var sumLeft = A(0)\n    var sumRight = allSum - sumLeft\n\n    //set initial diff for P=1\n    var minDiff = math.abs(sumLeft-sumRight)  //difference\n\n    // loop for all P after the initial P position\n    for(p &lt;- 1 to A.length-2){\n\n      //recalculate values\n      sumLeft += A(p)\n      sumRight -= A(p)\n\n      if(math.abs(sumLeft-sumRight) &lt; minDiff){\n        // if difference is smaller then save new min diff\n        minDiff = math.abs(sumLeft-sumRight)\n      }\n\n    }\n\n    minDiff\n  }\n</code></pre>\n\n<p>Performance: <a href=\"https://codility.com/demo/results/trainingZNZCZN-AGC/\" rel=\"nofollow\">https://codility.com/demo/results/trainingZNZCZN-AGC/</a></p>\n"},{"comments":[{"owner":{"account_id":3259393,"reputation":3270,"user_id":2745247,"accept_rate":88,"display_name":"Asieh hojatoleslami"},"score":0,"creation_date":1446286329,"post_id":33450372,"comment_id":54687781,"body_markdown":"it&#39;s better to add some explain instead of some code","body":"it&#39;s better to add some explain instead of some code"}],"tags":[],"owner":{"account_id":7218275,"reputation":1,"user_id":5509844,"display_name":"richard aguillon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446286135,"creation_date":1446286135,"answer_id":33450372,"question_id":25198726,"body_markdown":"        long sumofall = 0, leftsideSum = A[0], rightsidesum=0;\r\n        int x,LR = 0;\r\n        ArrayList listResult = new ArrayList();\r\n        for(x=0;x&lt;A.Length;x++)\r\n        {\r\n            sumofall+= A[x];\r\n        }\r\n        \r\n        for(x=1;x&lt;A.Length;x++)\r\n        {\r\n            rightsidesum = sumofall-leftsideSum;\r\n            LR = (int)(rightsidesum - leftsideSum);\r\n            if(LR &lt; 0)\r\n            {\r\n                LR=-LR;\r\n            }\r\n            listResult.Add(LR);\r\n            leftsideSum+=A[x];\r\n        }\r\n        listResult.Sort();\r\n        return Convert.ToInt32(listResult[0].ToString());\r\n    }","title":"Tape-Equilibrium Codility Training program","body":"<pre><code>    long sumofall = 0, leftsideSum = A[0], rightsidesum=0;\n    int x,LR = 0;\n    ArrayList listResult = new ArrayList();\n    for(x=0;x&lt;A.Length;x++)\n    {\n        sumofall+= A[x];\n    }\n\n    for(x=1;x&lt;A.Length;x++)\n    {\n        rightsidesum = sumofall-leftsideSum;\n        LR = (int)(rightsidesum - leftsideSum);\n        if(LR &lt; 0)\n        {\n            LR=-LR;\n        }\n        listResult.Add(LR);\n        leftsideSum+=A[x];\n    }\n    listResult.Sort();\n    return Convert.ToInt32(listResult[0].ToString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6459746,"reputation":1,"user_id":5003991,"display_name":"Oscar A. Usuga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449781094,"creation_date":1449781094,"answer_id":34211611,"question_id":25198726,"body_markdown":"I share my 100% solution using Java 8.\r\n\r\n    public class TapeEquilibrium {\r\n\t\r\n\tpublic int tapeEquilibrium(int[] A) {\r\n\t\tfinal int N = A.length;\r\n\t\tlong minimalSum = (int) A[0];\r\n\t\t\r\n\t\tint[] rightSide = Arrays.copyOfRange(A, 1, N);\r\n\t\tlong maximalSum = IntStream.of(rightSide).sum();\r\n\t\t\r\n\t\tint minimalDifference = (int) Math.abs(maximalSum - minimalSum);\r\n\t\tfor (int i = 1; i &lt; N; i++) {\r\n\t\t\tint difference = (int) Math.abs(maximalSum - minimalSum);\r\n\t\t\tminimalDifference = difference &lt; minimalDifference ? difference : minimalDifference;\r\n\t\t\tminimalSum += A[i];\r\n\t\t\tmaximalSum -= A[i];\r\n\t\t}\r\n\t\treturn minimalDifference;\r\n\t}\r\n\r\n}\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>I share my 100% solution using Java 8.</p>\n\n<pre><code>public class TapeEquilibrium {\n\npublic int tapeEquilibrium(int[] A) {\n    final int N = A.length;\n    long minimalSum = (int) A[0];\n\n    int[] rightSide = Arrays.copyOfRange(A, 1, N);\n    long maximalSum = IntStream.of(rightSide).sum();\n\n    int minimalDifference = (int) Math.abs(maximalSum - minimalSum);\n    for (int i = 1; i &lt; N; i++) {\n        int difference = (int) Math.abs(maximalSum - minimalSum);\n        minimalDifference = difference &lt; minimalDifference ? difference : minimalDifference;\n        minimalSum += A[i];\n        maximalSum -= A[i];\n    }\n    return minimalDifference;\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":2860051,"reputation":13934,"user_id":2455494,"accept_rate":92,"display_name":"Stewart_R"},"score":0,"creation_date":1454886311,"post_id":35259938,"comment_id":58232827,"body_markdown":"Perhaps you could expand on the &#39;code only&#39; answer. Provide an explanation of how it works?","body":"Perhaps you could expand on the &#39;code only&#39; answer. Provide an explanation of how it works?"},{"owner":{"account_id":7790977,"reputation":1,"user_id":5896317,"display_name":"mas1960"},"score":0,"creation_date":1454945734,"post_id":35259938,"comment_id":58258312,"body_markdown":"1. TapeEquilibrium \n Minimize the value |(A[0] + ... + A[P-1]) - (A[P] + ... + A[N-1])|.","body":"1. TapeEquilibrium   Minimize the value |(A[0] + ... + A[P-1]) - (A[P] + ... + A[N-1])|."},{"owner":{"account_id":7790977,"reputation":1,"user_id":5896317,"display_name":"mas1960"},"score":0,"creation_date":1454946730,"post_id":35259938,"comment_id":58259050,"body_markdown":"First get the sum of the array: int d2 = A.Sum();  Next loop over the array adding the next element; Get the absolute of |d1 - d2|, d2 is the total sum minus sum of d1; int ad = Math.Abs(d1 - (d2 - d1)); Compare ad to x and set x to min value: x = Min(x,ad); Any integer P, such that 0 &lt; P &lt; N, splits this tape into two non-empty parts: A[0], A[1], ..., A[P  1] and A[P], A[P + 1], ..., A[N  1]. Continue looping until p equals array length - 1: if(p == A.Lenght - 1) {break; }  Based on the tape splits (p) return the min absolute difference: return x;","body":"First get the sum of the array: int d2 = A.Sum();  Next loop over the array adding the next element; Get the absolute of |d1 - d2|, d2 is the total sum minus sum of d1; int ad = Math.Abs(d1 - (d2 - d1)); Compare ad to x and set x to min value: x = Min(x,ad); Any integer P, such that 0 &lt; P &lt; N, splits this tape into two non-empty parts: A[0], A[1], ..., A[P  1] and A[P], A[P + 1], ..., A[N  1]. Continue looping until p equals array length - 1: if(p == A.Lenght - 1) {break; }  Based on the tape splits (p) return the min absolute difference: return x;"}],"tags":[],"owner":{"account_id":7790977,"reputation":1,"user_id":5896317,"display_name":"mas1960"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454884130,"creation_date":1454884130,"answer_id":35259938,"question_id":25198726,"body_markdown":"Here is my C# solution.  Score 100%\r\n\r\n            if (A == null || A.Length == 0)\r\n            {\r\n                return 0;\r\n            }\r\n\r\n            int d1 = 0;\r\n            int d2 = A.Sum();\r\n            int p = 1;\r\n            int x = int.MaxValue;\r\n\r\n            // Replaced using A.sum();\r\n            //for (int i=0; i &lt; A.Length; i++)\r\n            //{\r\n            //        d2 += A[i];\r\n            //}\r\n\r\n            for (int j = 0; j &lt; A.Length; j++)\r\n            {\r\n                if (j &lt; p)\r\n                {\r\n                    d1 += A[j];\r\n                }\r\n\r\n                int ad = Math.Abs(d1 - (d2 - d1));\r\n\r\n                x = Math.Min(x, ad);\r\n\r\n                if (p == A.Length -1) { break; }\r\n                p++;\r\n            }\r\n\r\n            return x;\r\n\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>Here is my C# solution.  Score 100%</p>\n\n<pre><code>        if (A == null || A.Length == 0)\n        {\n            return 0;\n        }\n\n        int d1 = 0;\n        int d2 = A.Sum();\n        int p = 1;\n        int x = int.MaxValue;\n\n        // Replaced using A.sum();\n        //for (int i=0; i &lt; A.Length; i++)\n        //{\n        //        d2 += A[i];\n        //}\n\n        for (int j = 0; j &lt; A.Length; j++)\n        {\n            if (j &lt; p)\n            {\n                d1 += A[j];\n            }\n\n            int ad = Math.Abs(d1 - (d2 - d1));\n\n            x = Math.Min(x, ad);\n\n            if (p == A.Length -1) { break; }\n            p++;\n        }\n\n        return x;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8346196,"reputation":333,"user_id":6269836,"accept_rate":75,"display_name":"T&#252;rkmen Mustafa Demirci"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509101496,"creation_date":1509101496,"answer_id":46973361,"question_id":25198726,"body_markdown":"Below is my solution which got 100% . As most of you guys did I first got the sum of the array then go through it while adding up left and right parts and then getting the absolutes of them and putting the results into a map then checking the map for the minimum value .\r\n\r\n    \r\n\t\tint totalLeft = 0;\r\n\t\tint totalRight = 0;\r\n\t\tint total = 0;\r\n\t\tint result = 0;\r\n\t\tMap&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\r\n\r\n\t\tfor (int i = 0; i &lt; A.length; i++) {\r\n\t\t\ttotal += A[i];\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; A.length - 1; i++) {\r\n\r\n\t\t\ttotalRight = total - (A[i] + totalLeft);\r\n\t\t\ttotalLeft += A[i];\r\n\r\n\t\t\tresult = Math.abs(totalLeft - totalRight);\r\n\r\n\t\t\tmap.put(i, result);\r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\t\treturn Collections.min(map.values());\r\n\r\n\t","title":"Tape-Equilibrium Codility Training program","body":"<p>Below is my solution which got 100% . As most of you guys did I first got the sum of the array then go through it while adding up left and right parts and then getting the absolutes of them and putting the results into a map then checking the map for the minimum value .</p>\n\n<pre><code>    int totalLeft = 0;\n    int totalRight = 0;\n    int total = 0;\n    int result = 0;\n    Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\n\n    for (int i = 0; i &lt; A.length; i++) {\n        total += A[i];\n    }\n\n    for (int i = 0; i &lt; A.length - 1; i++) {\n\n        totalRight = total - (A[i] + totalLeft);\n        totalLeft += A[i];\n\n        result = Math.abs(totalLeft - totalRight);\n\n        map.put(i, result);\n\n\n    }\n\n\n    return Collections.min(map.values());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1631448,"reputation":306,"user_id":1505885,"accept_rate":100,"display_name":""},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1518879253,"creation_date":1518879253,"answer_id":48842594,"question_id":25198726,"body_markdown":"Here mine in Java,\r\n// got 91% because &quot;`int totalRight = (Arrays.stream(A).sum() - A[0]);`&quot; take too long to load\r\n\r\n    int totalLeft = A[0];\r\n        int totalRight = (Arrays.stream(A).sum() - A[0]);\r\n        //int afterMinus = 0;\r\n        int min = 0;\r\n        \r\n        min = Math.abs(totalLeft - totalRight);\r\n        \r\n        for(int i=1; i&lt;(A.length-1); i++) {\r\n            //for(int j=A.length; j&gt;0; j--) {\r\n            totalLeft += A[i];\r\n            totalRight -= A[i];\r\n            //System.out.println(&quot;totalLeft = &quot;+ totalLeft);\r\n            //System.out.println(&quot;totalRight = &quot;+ totalRight);\r\n            if(Math.abs(totalLeft - totalRight) &lt; min) {\r\n                //System.out.println(&quot;min = &quot;+ min);\r\n                min = Math.abs(totalLeft - totalRight);\r\n            }\r\n        }\r\n        \r\n        return min;\r\n\r\n// got 100% because change &quot;`int totalRight = (Arrays.stream(A).sum() - A[0]);`&quot; into for loop\r\n\r\n    //int totalSum = Arrays.stream(A).sum();\r\n        int totalLeft = A[0];\r\n        int totalRight = 0;\r\n        //int afterMinus = 0;\r\n        int min = 0;\r\n        \r\n        for(int i=1; i&lt;A.length; i++) {\r\n            totalRight += A[i];\r\n        }\r\n        min = Math.abs(totalLeft - totalRight);\r\n        \r\n        for(int i=1; i&lt;(A.length-1); i++) {\r\n            //for(int j=A.length; j&gt;0; j--) {\r\n            totalLeft += A[i];\r\n            totalRight -= A[i];\r\n            //System.out.println(&quot;totalLeft = &quot;+ totalLeft);\r\n            //System.out.println(&quot;totalRight = &quot;+ totalRight);\r\n            if(Math.abs(totalLeft - totalRight) &lt; min) {\r\n                //System.out.println(&quot;min = &quot;+ min);\r\n                min = Math.abs(totalLeft - totalRight);\r\n            }\r\n        }\r\n        \r\n        return min;\r\n\r\nWell, from 91% to 100%, thanks to @sebadagostino after surfing for almost 2 hours for the logic and hints.","title":"Tape-Equilibrium Codility Training program","body":"<p>Here mine in Java,\n// got 91% because \"<code>int totalRight = (Arrays.stream(A).sum() - A[0]);</code>\" take too long to load</p>\n\n<pre><code>int totalLeft = A[0];\n    int totalRight = (Arrays.stream(A).sum() - A[0]);\n    //int afterMinus = 0;\n    int min = 0;\n\n    min = Math.abs(totalLeft - totalRight);\n\n    for(int i=1; i&lt;(A.length-1); i++) {\n        //for(int j=A.length; j&gt;0; j--) {\n        totalLeft += A[i];\n        totalRight -= A[i];\n        //System.out.println(\"totalLeft = \"+ totalLeft);\n        //System.out.println(\"totalRight = \"+ totalRight);\n        if(Math.abs(totalLeft - totalRight) &lt; min) {\n            //System.out.println(\"min = \"+ min);\n            min = Math.abs(totalLeft - totalRight);\n        }\n    }\n\n    return min;\n</code></pre>\n\n<p>// got 100% because change \"<code>int totalRight = (Arrays.stream(A).sum() - A[0]);</code>\" into for loop</p>\n\n<pre><code>//int totalSum = Arrays.stream(A).sum();\n    int totalLeft = A[0];\n    int totalRight = 0;\n    //int afterMinus = 0;\n    int min = 0;\n\n    for(int i=1; i&lt;A.length; i++) {\n        totalRight += A[i];\n    }\n    min = Math.abs(totalLeft - totalRight);\n\n    for(int i=1; i&lt;(A.length-1); i++) {\n        //for(int j=A.length; j&gt;0; j--) {\n        totalLeft += A[i];\n        totalRight -= A[i];\n        //System.out.println(\"totalLeft = \"+ totalLeft);\n        //System.out.println(\"totalRight = \"+ totalRight);\n        if(Math.abs(totalLeft - totalRight) &lt; min) {\n            //System.out.println(\"min = \"+ min);\n            min = Math.abs(totalLeft - totalRight);\n        }\n    }\n\n    return min;\n</code></pre>\n\n<p>Well, from 91% to 100%, thanks to @sebadagostino after surfing for almost 2 hours for the logic and hints.</p>\n"},{"tags":[],"owner":{"account_id":1425036,"reputation":308,"user_id":6883813,"display_name":"Dyego Vieira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548599692,"creation_date":1548599692,"answer_id":54389241,"question_id":25198726,"body_markdown":"TapeEquilibrium in Swift 4\r\n\r\n    public func solution(_ A : inout [Int]) -&gt; Int {\r\n        let P = 1\r\n        var splitIndex = P\r\n        var firstPartSum = A[splitIndex - 1]\r\n        var secondPartSum = Array(A[splitIndex..&lt;A.count]).reduce(0, +)\r\n        var minimalDifference =  abs(firstPartSum - secondPartSum)\r\n        \r\n        if minimalDifference == 0 {\r\n            return minimalDifference\r\n        }\r\n        \r\n        splitIndex += 1\r\n        \r\n        while splitIndex &lt; A.count {\r\n            firstPartSum += A[splitIndex - 1]\r\n            secondPartSum -= A[splitIndex - 1]\r\n            \r\n            let dif = abs(firstPartSum - secondPartSum)\r\n        \r\n            if dif == 0 {\r\n                return dif\r\n            }\r\n            \r\n            if dif &lt; minimalDifference {\r\n                minimalDifference = dif\r\n            }\r\n            \r\n            splitIndex += 1\r\n        }\r\n        \r\n        return minimalDifference\r\n    }","title":"Tape-Equilibrium Codility Training program","body":"<p>TapeEquilibrium in Swift 4</p>\n\n<pre><code>public func solution(_ A : inout [Int]) -&gt; Int {\n    let P = 1\n    var splitIndex = P\n    var firstPartSum = A[splitIndex - 1]\n    var secondPartSum = Array(A[splitIndex..&lt;A.count]).reduce(0, +)\n    var minimalDifference =  abs(firstPartSum - secondPartSum)\n\n    if minimalDifference == 0 {\n        return minimalDifference\n    }\n\n    splitIndex += 1\n\n    while splitIndex &lt; A.count {\n        firstPartSum += A[splitIndex - 1]\n        secondPartSum -= A[splitIndex - 1]\n\n        let dif = abs(firstPartSum - secondPartSum)\n\n        if dif == 0 {\n            return dif\n        }\n\n        if dif &lt; minimalDifference {\n            minimalDifference = dif\n        }\n\n        splitIndex += 1\n    }\n\n    return minimalDifference\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7221025,"reputation":1355,"user_id":5511520,"accept_rate":68,"display_name":"Mike Belyakov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559779595,"creation_date":1559779595,"answer_id":56469504,"question_id":25198726,"body_markdown":"Ruby 100%\r\n\r\n```\r\ndef solution(a)\r\n  left = a.inject(:+)\r\n  right = 0\r\n  a[0...-1].inject(Float::INFINITY) do |min, el|\r\n    left -=el\r\n    right += el\r\n    candidate = (right-left).abs\r\n    min &lt; candidate ? min : candidate \r\n  end\r\nend\r\n```","title":"Tape-Equilibrium Codility Training program","body":"<p>Ruby 100%</p>\n\n<pre><code>def solution(a)\n  left = a.inject(:+)\n  right = 0\n  a[0...-1].inject(Float::INFINITY) do |min, el|\n    left -=el\n    right += el\n    candidate = (right-left).abs\n    min &lt; candidate ? min : candidate \n  end\nend\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15033595,"reputation":111,"user_id":10855857,"display_name":"Martin Castellon"},"score":0,"creation_date":1613787693,"post_id":63832572,"comment_id":117192104,"body_markdown":"This worked perfect for the C# program. Got 100%. Thank you.","body":"This worked perfect for the C# program. Got 100%. Thank you."},{"owner":{"account_id":1085246,"reputation":948,"user_id":1081100,"accept_rate":74,"display_name":"deathrace"},"score":0,"creation_date":1620825146,"post_id":63832572,"comment_id":119315243,"body_markdown":"Technically, A.Sum() run For loop internally.","body":"Technically, A.Sum() run For loop internally."},{"owner":{"display_name":"user13770736"},"score":1,"creation_date":1620826133,"post_id":63832572,"comment_id":119315701,"body_markdown":"@deathrace You are 100% correct, yet it&#39;s still faster :)","body":"@deathrace You are 100% correct, yet it&#39;s still faster :)"}],"tags":[],"owner":{"display_name":"user13770736"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599750408,"creation_date":1599750408,"answer_id":63832572,"question_id":25198726,"body_markdown":"You can actually do that, with one loop in C#. \r\n\r\nAdd Linq:\r\n\r\n     public int solution(int[] A)\r\n        {\r\n\r\n            // write your code in C# 6.0 with .NET 4.5 (Mono)\r\n                long sum = A.Sum(p =&gt; (long)p);\r\n                int val1 = Convert.ToInt32(A.GetValue(0));\r\n                int val2 = Convert.ToInt32(sum - val1);\r\n                int result = Math.Abs(val1 - val2);\r\n                for (int i = 1; i &lt; A.Length-1; i++)\r\n                {\r\n                    val1 += Convert.ToInt32(A.GetValue(i));\r\n                    val2 -= Convert.ToInt32(A.GetValue(i));\r\n                    if (result &gt; Math.Abs(val1 - val2))\r\n                    {\r\n                        result = Math.Abs(val1 - val2);\r\n                    }\r\n                }\r\n\r\n\r\n            return result;\r\n        }\r\n\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>You can actually do that, with one loop in C#.</p>\n<p>Add Linq:</p>\n<pre><code> public int solution(int[] A)\n    {\n\n        // write your code in C# 6.0 with .NET 4.5 (Mono)\n            long sum = A.Sum(p =&gt; (long)p);\n            int val1 = Convert.ToInt32(A.GetValue(0));\n            int val2 = Convert.ToInt32(sum - val1);\n            int result = Math.Abs(val1 - val2);\n            for (int i = 1; i &lt; A.Length-1; i++)\n            {\n                val1 += Convert.ToInt32(A.GetValue(i));\n                val2 -= Convert.ToInt32(A.GetValue(i));\n                if (result &gt; Math.Abs(val1 - val2))\n                {\n                    result = Math.Abs(val1 - val2);\n                }\n            }\n\n\n        return result;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":125694,"reputation":1251,"user_id":321629,"accept_rate":41,"display_name":"CyberMew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604693282,"creation_date":1604693282,"answer_id":64720958,"question_id":25198726,"body_markdown":"No one posted Javascript solution yet so here is mine with comments:\r\n\r\n    // you can write to stdout for debugging purposes, e.g.\r\n    // console.log(&#39;this is a debug message&#39;);\r\n    \r\n    function solution(A) {\r\n      // write your code in JavaScript (Node.js 8.9.4)\r\n    \r\n      // Making it shorter.\r\n      let len = A.length;\r\n    \r\n      // Definitely need to store, and initialise first value.\r\n      let left = new Array(len);\r\n      left[0] = A[0];\r\n    \r\n      // Same as above, but initialise for last value.\r\n      let right = new Array(len);\r\n      right[len - 1] = A[len - 1];\r\n    \r\n      let trackLowest = Number.MAX_SAFE_INTEGER;\r\n    \r\n      // One shot calculate for both at any element (from &#39;outwards&#39; &#39;in&#39;).\r\n      // Note there is 2 elements at least, and we already preset the first\r\n      // element, so we start and build from index 1.\r\n      for (let i = 1; i &lt; len; ++i) {\r\n        left[i] = left[i - 1] + A[i];\r\n        right[len - 1 - i] = right[len - i] + A[len - 1 - i];\r\n      }\r\n    \r\n      // Once the above is done, it&#39;s time to calculate the difference.\r\n      // If I am at index 0, then I want sum of index 0 AND left, and sum of index\r\n      // 1 and right (note not index 0 also).\r\n      // We stop before len - 1 because that&#39;s the rules and the sum of right will\r\n      // have been out of bounds if we want difference for last index, isn&#39;t it?\r\n      for (let i = 0; i &lt; len - 1; ++i) {\r\n        let smallestDiff = Math.abs(left[i] - right[i + 1]);\r\n        if (smallestDiff &lt; trackLowest) {\r\n          trackLowest = smallestDiff;\r\n        }\r\n      }\r\n    \r\n      return trackLowest;\r\n    }\r\n\r\nBasically sum up as you walk the loop simultaneously for the left and right side.\r\nOnce done, just get the difference, that&#39;s it. O(n) complexity.\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>No one posted Javascript solution yet so here is mine with comments:</p>\n<pre><code>// you can write to stdout for debugging purposes, e.g.\n// console.log('this is a debug message');\n\nfunction solution(A) {\n  // write your code in JavaScript (Node.js 8.9.4)\n\n  // Making it shorter.\n  let len = A.length;\n\n  // Definitely need to store, and initialise first value.\n  let left = new Array(len);\n  left[0] = A[0];\n\n  // Same as above, but initialise for last value.\n  let right = new Array(len);\n  right[len - 1] = A[len - 1];\n\n  let trackLowest = Number.MAX_SAFE_INTEGER;\n\n  // One shot calculate for both at any element (from 'outwards' 'in').\n  // Note there is 2 elements at least, and we already preset the first\n  // element, so we start and build from index 1.\n  for (let i = 1; i &lt; len; ++i) {\n    left[i] = left[i - 1] + A[i];\n    right[len - 1 - i] = right[len - i] + A[len - 1 - i];\n  }\n\n  // Once the above is done, it's time to calculate the difference.\n  // If I am at index 0, then I want sum of index 0 AND left, and sum of index\n  // 1 and right (note not index 0 also).\n  // We stop before len - 1 because that's the rules and the sum of right will\n  // have been out of bounds if we want difference for last index, isn't it?\n  for (let i = 0; i &lt; len - 1; ++i) {\n    let smallestDiff = Math.abs(left[i] - right[i + 1]);\n    if (smallestDiff &lt; trackLowest) {\n      trackLowest = smallestDiff;\n    }\n  }\n\n  return trackLowest;\n}\n</code></pre>\n<p>Basically sum up as you walk the loop simultaneously for the left and right side.\nOnce done, just get the difference, that's it. O(n) complexity.</p>\n"},{"tags":[],"owner":{"account_id":1033562,"reputation":151,"user_id":1041382,"display_name":"Kevin C. Ferron"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1621800482,"creation_date":1621800482,"answer_id":67663905,"question_id":25198726,"body_markdown":" C# and Linq version for 100% as of May 2021:\r\n\r\n      public int solution(int[] A) \r\n        {\r\n\r\n          int left = A[0];\r\n          int right = A.Skip(1).Aggregate((c,x)=&gt; c+=x);\r\n          int min = Math.Abs(left-right);\r\n\r\n          for(int i=1; i &lt; A.Length-1; i++) \r\n          {\r\n            left+=A[i];\r\n            right-=A[i];\r\n            min = Math.Min(min,Math.Abs(left-right));\r\n          }\r\n     \r\n          return min;\r\n        }\r\n\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>C# and Linq version for 100% as of May 2021:</p>\n<pre><code>  public int solution(int[] A) \n    {\n\n      int left = A[0];\n      int right = A.Skip(1).Aggregate((c,x)=&gt; c+=x);\n      int min = Math.Abs(left-right);\n\n      for(int i=1; i &lt; A.Length-1; i++) \n      {\n        left+=A[i];\n        right-=A[i];\n        min = Math.Min(min,Math.Abs(left-right));\n      }\n \n      return min;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5937709,"reputation":584,"user_id":4670107,"accept_rate":89,"display_name":"noviewpoint"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646400144,"creation_date":1646400144,"answer_id":71352083,"question_id":25198726,"body_markdown":"My 100% JavaScript solution with O(N) time complexity (should be pretty self-explanatory):\r\n\r\n    function solution(A) {\r\n    \r\n         let left = 0;\r\n         let right = A.reduce((sum, cur) =&gt; sum + cur, 0);\r\n         let min = Infinity;\r\n    \r\n         for (let p = 0, len = A.length - 1; p &lt; len; p++) {\r\n             left += A[p];\r\n             right -= A[p];\r\n             min = Math.min(min, Math.abs(left - right));\r\n         }\r\n    \r\n         return min;\r\n    \r\n    }","title":"Tape-Equilibrium Codility Training program","body":"<p>My 100% JavaScript solution with O(N) time complexity (should be pretty self-explanatory):</p>\n<pre><code>function solution(A) {\n\n     let left = 0;\n     let right = A.reduce((sum, cur) =&gt; sum + cur, 0);\n     let min = Infinity;\n\n     for (let p = 0, len = A.length - 1; p &lt; len; p++) {\n         left += A[p];\n         right -= A[p];\n         min = Math.min(min, Math.abs(left - right));\n     }\n\n     return min;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5426560,"reputation":697,"user_id":4318623,"accept_rate":80,"display_name":"AppDever"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675235023,"creation_date":1675235023,"answer_id":75306658,"question_id":25198726,"body_markdown":"100% in Swift 4 for correctness &amp; performance\r\n\r\nDetected Time Complexity: 0(n)\r\n\r\n    var sumMin = A[0]\r\n    var sumMax = 0\r\n\r\n    for i in 1..&lt;A.count {\r\n        sumMax += A[i]\r\n    }\r\n\r\n    var diff = abs(sumMin - sumMax)\r\n\r\n    for i in 1..&lt;A.count-1 {\r\n        sumMin += A[i]\r\n        sumMax -= A[i]\r\n        diff = min(diff, abs(sumMin - sumMax));\r\n    }\r\n\r\n    return diff","title":"Tape-Equilibrium Codility Training program","body":"<p>100% in Swift 4 for correctness &amp; performance</p>\n<p>Detected Time Complexity: 0(n)</p>\n<pre><code>var sumMin = A[0]\nvar sumMax = 0\n\nfor i in 1..&lt;A.count {\n    sumMax += A[i]\n}\n\nvar diff = abs(sumMin - sumMax)\n\nfor i in 1..&lt;A.count-1 {\n    sumMin += A[i]\n    sumMax -= A[i]\n    diff = min(diff, abs(sumMin - sumMax));\n}\n\nreturn diff\n</code></pre>\n"}],"owner":{"account_id":358728,"reputation":213,"user_id":699681,"accept_rate":40,"display_name":"user699681"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9784,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":23,"score":2,"last_activity_date":1675235023,"creation_date":1407485196,"question_id":25198726,"body_markdown":"I submitted a solution to Tape Equilibrium problem in Codility. [Codility training][1]\r\n\r\nThe problem is described as follows:\r\n\r\n&gt; A non-empty zero-indexed array A consisting of N integers is given. Array A represents numbers on a tape.\r\nAny integer P, such that 0 &lt; P &lt; N, splits this tape into two non-empty parts: A[0], A[1], ..., A[P  1] and A[P], A[P + 1], ..., A[N  1].\r\nThe difference between the two parts is the value of: |(A[0] + A[1] + ... + A[P  1])  (A[P] + A[P + 1] + ... + A[N  1])|\r\nIn other words, it is the absolute difference between the sum of the first part and the sum of the second part.\r\n\r\nThe solution I submitted is:\r\n    \r\n\tclass Solution {\r\n\t  public int solution(int[] A) {\r\n\r\n\t\tlong d = A[0] - A[A.length-1];\r\n\t\tint l = 1;\r\n\t\tint r = A.length -2;\r\n\r\n\t\twhile(l &lt;= r) {\r\n\t\t  if (Math.abs(d + A[l]) &lt; Math.abs(d - A[r])) {\r\n\t\t\td += A[l];\r\n\t\t\tl++;\r\n\t\t  }\r\n\t\t  else {\r\n\t\t\td -= A[r];\r\n\t\t\tr--;\r\n\t\t  }\r\n\t\t}\r\n\t\treturn (int) Math.abs(d);\r\n\t  }\r\n\t}\r\n\r\nI achieved 85% accuracy but couldn&#39;t get to correct for some use case. Can someone help me to find what&#39;s wrong with this solution. Thanks\r\n","title":"Tape-Equilibrium Codility Training program","body":"<p>I submitted a solution to Tape Equilibrium problem in Codility. [Codility training][1]</p>\n\n<p>The problem is described as follows:</p>\n\n<blockquote>\n  <p>A non-empty zero-indexed array A consisting of N integers is given. Array A represents numbers on a tape.\n  Any integer P, such that 0 &lt; P &lt; N, splits this tape into two non-empty parts: A[0], A[1], ..., A[P  1] and A[P], A[P + 1], ..., A[N  1].\n  The difference between the two parts is the value of: |(A[0] + A[1] + ... + A[P  1])  (A[P] + A[P + 1] + ... + A[N  1])|\n  In other words, it is the absolute difference between the sum of the first part and the sum of the second part.</p>\n</blockquote>\n\n<p>The solution I submitted is:</p>\n\n<pre><code>class Solution {\n  public int solution(int[] A) {\n\n    long d = A[0] - A[A.length-1];\n    int l = 1;\n    int r = A.length -2;\n\n    while(l &lt;= r) {\n      if (Math.abs(d + A[l]) &lt; Math.abs(d - A[r])) {\n        d += A[l];\n        l++;\n      }\n      else {\n        d -= A[r];\n        r--;\n      }\n    }\n    return (int) Math.abs(d);\n  }\n}\n</code></pre>\n\n<p>I achieved 85% accuracy but couldn't get to correct for some use case. Can someone help me to find what's wrong with this solution. Thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":1,"creation_date":1672813519,"post_id":75001435,"comment_id":132355526,"body_markdown":"Your `response` property itself is a `LinkedTreeMap` see carefully. Hence you are getting this exception. You are trying to get the `response` into the `String` object. Instead using `Map&lt;String, Object&gt;` should fix you error.","body":"Your <code>response</code> property itself is a <code>LinkedTreeMap</code> see carefully. Hence you are getting this exception. You are trying to get the <code>response</code> into the <code>String</code> object. Instead using <code>Map&lt;String, Object&gt;</code> should fix you error."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672973597,"creation_date":1672972857,"answer_id":75026426,"question_id":75001435,"body_markdown":"# tl;dr\r\n\r\nCall `toString`.\r\n\r\n    restResult.get( &quot;response&quot; ).toString() \r\n\r\n\r\n# `LinkedTreeMap` is not `String`\r\n\r\n(Caveat: I do not use GSON.)\r\n\r\nYour call to `restResult.get` apparently returns a reference to a `com.google.gson.internal.LinkedTreeMap` object. \r\n\r\nYou assign that reference to a variable declared to hold a reference to a `String` object. A `LinkedTreeMap` object is *not* a `String` object. So your assignment attempt is incorrect, invalid. \r\n\r\nThe compiler detected your incorrect code, and flagged the error.\r\n\r\nAccording to [the source code][1], that `LinkedTreeMap` class extends [`java.util.AbstractMap`][2]. Change your line to something like this:\r\n\r\n    Map map = restResult.get( &quot;response&quot; ) ;\r\n\r\nOr:\r\n\r\n    var map = restResult.get( &quot;response&quot; ) ;\r\n\r\nThen you could interrogate for key-value pairs. Or generate text representing the entire map&#39;s contents with a call to `Map#toString`. You could skip the intermediate `Map` step:\r\n\r\n    String str = restResult.get( &quot;response&quot; ).toString() ;\r\n\r\n\r\n\r\n  [1]: https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/LinkedTreeMap.java\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractMap.html","title":"How to convert LinkedTreeMap Data to String data?","body":"<h1>tl;dr</h1>\n<p>Call <code>toString</code>.</p>\n<pre><code>restResult.get( &quot;response&quot; ).toString() \n</code></pre>\n<h1><code>LinkedTreeMap</code> is not <code>String</code></h1>\n<p>(Caveat: I do not use GSON.)</p>\n<p>Your call to <code>restResult.get</code> apparently returns a reference to a <code>com.google.gson.internal.LinkedTreeMap</code> object.</p>\n<p>You assign that reference to a variable declared to hold a reference to a <code>String</code> object. A <code>LinkedTreeMap</code> object is <em>not</em> a <code>String</code> object. So your assignment attempt is incorrect, invalid.</p>\n<p>The compiler detected your incorrect code, and flagged the error.</p>\n<p>According to <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/LinkedTreeMap.java\" rel=\"nofollow noreferrer\">the source code</a>, that <code>LinkedTreeMap</code> class extends <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractMap.html\" rel=\"nofollow noreferrer\"><code>java.util.AbstractMap</code></a>. Change your line to something like this:</p>\n<pre><code>Map map = restResult.get( &quot;response&quot; ) ;\n</code></pre>\n<p>Or:</p>\n<pre><code>var map = restResult.get( &quot;response&quot; ) ;\n</code></pre>\n<p>Then you could interrogate for key-value pairs. Or generate text representing the entire map's contents with a call to <code>Map#toString</code>. You could skip the intermediate <code>Map</code> step:</p>\n<pre><code>String str = restResult.get( &quot;response&quot; ).toString() ;\n</code></pre>\n"}],"owner":{"account_id":27427203,"reputation":3,"user_id":20924498,"display_name":"Chris Song"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75026426,"answer_count":1,"score":0,"last_activity_date":1675234934,"creation_date":1672811745,"question_id":75001435,"body_markdown":"This is from openAPI for weather(openAPI = https://www.data.go.kr/)\r\n```java\r\n    Map&lt;String, Object&gt; restResult = restWeatherApi(apiMap);\r\n```\r\nI received a response like this from `open API`.\r\n\r\n**Response Result**\r\n```java\r\n{\r\nresponse=\r\n       {header=\r\n          {resultCode=00, resultMsg=NORMAL_SERVICE}, \r\n       body=\r\n          {dataType=JSON, \r\n             items={item=[{baseDate=20230103, \r\n                    baseTime=1400, category=TMP, \r\n                    fcstDate=20230103, fcstTime=1500, \r\n                    fcstValue=0, nx=61.0, ny=127.0}, \r\n             {baseDate=20230103, baseTime=1400, category=UUU, f \r\n              cstDate=20230103, fcstTime=1500, fcstValue=2.1, \r\n              nx=61.0, ny=127.0}, {baseDate=20230103, \r\n              baseTime=1400, category=VVV, fcstDate=20230103, \r\n              fcstTime=1500, fcstValue=-1.2, nx=61.0, ny=127.0}, \r\n              {baseDate=20230103, baseTime=1400, category=VEC, \r\n              fcstDate=20230103, fcstTime=1500, fcstValue=300, \r\n              nx=61.0, ny=127.0}, {baseDate=20230103, \r\n              baseTime=1400, category=WSD, fcstDate=20230103, \r\n              fcstTime=1500, fcstValue=2.4, nx=61.0, ny=127.0}, \r\n              {baseDate=20230103, baseTime=1400, category=SKY, \r\n              fcstDate=20230103, fcstTime=1500, fcstValue=1, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=PTY, fcstDate=20230103, fcstTime=1500, fcstValue=0, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=POP, fcstDate=20230103, fcstTime=1500, fcstValue=0, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=WAV, fcstDate=20230103, fcstTime=1500, fcstValue=0, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=PCP, fcstDate=20230103, fcstTime=1500, fcstValue=, nx=61.0, ny=127.0}]}, pageNo=1.0, numOfRows=10.0, totalCount=700.0}}}\r\n```\r\n\r\nI wanna get data.\r\n\r\n    String str = restResult.get(&quot;response&quot;);\r\n\r\nBut Error like this.\r\n`java.lang.ClassCastException: com.google.gson.internal.LinkedTreeMap cannot be cast to java.lang.String`\r\n\r\nI want to use and manipulate all the data in this LinkedTreeMap.\r\nHow can I handle this data?\r\n","title":"How to convert LinkedTreeMap Data to String data?","body":"<p>This is from openAPI for weather(openAPI = <a href=\"https://www.data.go.kr/\" rel=\"nofollow noreferrer\">https://www.data.go.kr/</a>)</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Map&lt;String, Object&gt; restResult = restWeatherApi(apiMap);\n</code></pre>\n<p>I received a response like this from <code>open API</code>.</p>\n<p><strong>Response Result</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>{\nresponse=\n       {header=\n          {resultCode=00, resultMsg=NORMAL_SERVICE}, \n       body=\n          {dataType=JSON, \n             items={item=[{baseDate=20230103, \n                    baseTime=1400, category=TMP, \n                    fcstDate=20230103, fcstTime=1500, \n                    fcstValue=0, nx=61.0, ny=127.0}, \n             {baseDate=20230103, baseTime=1400, category=UUU, f \n              cstDate=20230103, fcstTime=1500, fcstValue=2.1, \n              nx=61.0, ny=127.0}, {baseDate=20230103, \n              baseTime=1400, category=VVV, fcstDate=20230103, \n              fcstTime=1500, fcstValue=-1.2, nx=61.0, ny=127.0}, \n              {baseDate=20230103, baseTime=1400, category=VEC, \n              fcstDate=20230103, fcstTime=1500, fcstValue=300, \n              nx=61.0, ny=127.0}, {baseDate=20230103, \n              baseTime=1400, category=WSD, fcstDate=20230103, \n              fcstTime=1500, fcstValue=2.4, nx=61.0, ny=127.0}, \n              {baseDate=20230103, baseTime=1400, category=SKY, \n              fcstDate=20230103, fcstTime=1500, fcstValue=1, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=PTY, fcstDate=20230103, fcstTime=1500, fcstValue=0, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=POP, fcstDate=20230103, fcstTime=1500, fcstValue=0, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=WAV, fcstDate=20230103, fcstTime=1500, fcstValue=0, nx=61.0, ny=127.0}, {baseDate=20230103, baseTime=1400, category=PCP, fcstDate=20230103, fcstTime=1500, fcstValue=, nx=61.0, ny=127.0}]}, pageNo=1.0, numOfRows=10.0, totalCount=700.0}}}\n</code></pre>\n<p>I wanna get data.</p>\n<pre><code>String str = restResult.get(&quot;response&quot;);\n</code></pre>\n<p>But Error like this.\n<code>java.lang.ClassCastException: com.google.gson.internal.LinkedTreeMap cannot be cast to java.lang.String</code></p>\n<p>I want to use and manipulate all the data in this LinkedTreeMap.\nHow can I handle this data?</p>\n"},{"tags":["java","arrays","java.util.scanner"],"comments":[{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1675230952,"post_id":75306027,"comment_id":132881546,"body_markdown":"Your code doesn&#39;t include `nextLine()`, and yet your text says &quot;I think that might be the problem&quot;. Not much we can do, other than take a wild stab in the dark and link you to answers that explain the nature of next vs. nextLine.","body":"Your code doesn&#39;t include <code>nextLine()</code>, and yet your text says &quot;I think that might be the problem&quot;. Not much we can do, other than take a wild stab in the dark and link you to answers that explain the nature of next vs. nextLine."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1675232426,"post_id":75306027,"comment_id":132881728,"body_markdown":"This part - `if(item[CodeItem-1]!=(&quot;null&quot;)`.  That doesn&#39;t look right to me.  If you&#39;re trying to compare to the value `null`, then don&#39;t use the `&quot; &quot; ` marks.  If you&#39;re trying to compare to the String `&quot;null&quot;`, then use `.equals` instead of `==` or `!=`.","body":"This part - <code>if(item[CodeItem-1]!=(&quot;null&quot;)</code>.  That doesn&#39;t look right to me.  If you&#39;re trying to compare to the value <code>null</code>, then don&#39;t use the <code>&quot; &quot; </code> marks.  If you&#39;re trying to compare to the String <code>&quot;null&quot;</code>, then use <code>.equals</code> instead of <code>==</code> or <code>!=</code>."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1675235000,"post_id":75306027,"comment_id":132882243,"body_markdown":"When you write _the boolean ending is declared as true at the  start of the code_: could it be that it is set to `false` within this loop and for the second customer not set to `true` again before this loop starts?","body":"When you write <i>the boolean ending is declared as true at the  start of the code</i>: could it be that it is set to <code>false</code> within this loop and for the second customer not set to <code>true</code> again before this loop starts?"}],"answers":[{"comments":[{"owner":{"account_id":216196,"reputation":79144,"user_id":471272,"accept_rate":100,"display_name":"tchrist"},"score":0,"creation_date":1689686092,"post_id":75306617,"comment_id":135246453,"body_markdown":"This answer looks like it was generated by an AI (like ChatGPT), not by an actual human being. You should be aware that [posting AI-generated output is officially **BANNED** on Stack Overflow](https://meta.stackoverflow.com/q/421831). If this answer was indeed generated by an AI, then I strongly suggest you delete it before you get yourself into even bigger trouble: **WE TAKE PLAGIARISM SERIOUSLY HERE.** Please read: [Why posting GPT and ChatGPT generated answers is not currently allowed](https://stackoverflow.com/help/gpt-policy).","body":"This answer looks like it was generated by an AI (like ChatGPT), not by an actual human being. You should be aware that <a href=\"https://meta.stackoverflow.com/q/421831\">posting AI-generated output is officially <b>BANNED</b> on Stack Overflow</a>. If this answer was indeed generated by an AI, then I strongly suggest you delete it before you get yourself into even bigger trouble: <b>WE TAKE PLAGIARISM SERIOUSLY HERE.</b> Please read: <a href=\"https://stackoverflow.com/help/gpt-policy\">Why posting GPT and ChatGPT generated answers is not currently allowed</a>."}],"tags":[],"owner":{"account_id":13225579,"reputation":77,"user_id":9550759,"display_name":"dev guy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675234626,"creation_date":1675234626,"answer_id":75306617,"question_id":75306027,"body_markdown":"The issue is likely with the use of **input.nextInt()** and **input.nextLine()** in the same loop. The **input.nextInt()** method reads the next integer but does not consume the newline character that follows. This means the first call to **input.nextLine()** will immediately return an empty line, causing the loop to terminate.\r\n\r\nOne possible solution is to use **input.nextLine()** after the call to **input.nextInt()** and then parse it to an integer using the **Integer.parseInt()** method. This will ensure that the newline character is consumed, allowing the loop to continue as expected.\r\n\r\nHere&#39;s an updated version of the code:\r\n```\r\ndo {\r\n    System.out.println(&quot;WHICH ITEM WOULD YOU LIKE TO BUY&quot;);\r\n    int codeItem = Integer.parseInt(input.nextLine());\r\n    if (codeItem &lt;= 20 &amp;&amp; codeItem &gt;= 1) {\r\n        if (item[codeItem - 1] != (&quot;null&quot;) &amp;&amp; price[codeItem - 1] != 0.0) {\r\n            System.out.println(&quot;How many of:&quot; + item[codeItem - 1]);\r\n            int cant = Integer.parseInt(input.nextLine());\r\n            LOCALamount[codeItem - 1] += cant;\r\n            GLOBALamount[codeItem - 1] += cant;\r\n        } else {\r\n            System.out.println(&quot;****not valid****&quot;);\r\n            ending = false;\r\n        }\r\n    } else {\r\n        System.out.println(&quot;****not valid****&quot;);\r\n        ending = false;\r\n    }\r\n} while (ending);\r\n\r\n```","title":"trouble with the scanner and int (nextLine and next)","body":"<p>The issue is likely with the use of <strong>input.nextInt()</strong> and <strong>input.nextLine()</strong> in the same loop. The <strong>input.nextInt()</strong> method reads the next integer but does not consume the newline character that follows. This means the first call to <strong>input.nextLine()</strong> will immediately return an empty line, causing the loop to terminate.</p>\n<p>One possible solution is to use <strong>input.nextLine()</strong> after the call to <strong>input.nextInt()</strong> and then parse it to an integer using the <strong>Integer.parseInt()</strong> method. This will ensure that the newline character is consumed, allowing the loop to continue as expected.</p>\n<p>Here's an updated version of the code:</p>\n<pre><code>do {\n    System.out.println(&quot;WHICH ITEM WOULD YOU LIKE TO BUY&quot;);\n    int codeItem = Integer.parseInt(input.nextLine());\n    if (codeItem &lt;= 20 &amp;&amp; codeItem &gt;= 1) {\n        if (item[codeItem - 1] != (&quot;null&quot;) &amp;&amp; price[codeItem - 1] != 0.0) {\n            System.out.println(&quot;How many of:&quot; + item[codeItem - 1]);\n            int cant = Integer.parseInt(input.nextLine());\n            LOCALamount[codeItem - 1] += cant;\n            GLOBALamount[codeItem - 1] += cant;\n        } else {\n            System.out.println(&quot;****not valid****&quot;);\n            ending = false;\n        }\n    } else {\n        System.out.println(&quot;****not valid****&quot;);\n        ending = false;\n    }\n} while (ending);\n\n</code></pre>\n"}],"owner":{"account_id":27661692,"reputation":11,"user_id":21114373,"display_name":"cstjmn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1675236639,"answer_count":1,"score":0,"last_activity_date":1675234626,"creation_date":1675229491,"question_id":75306027,"body_markdown":"Ive been having some trouble with this assignment, its supposed to be kind of like a supermarket thing. I am new in java, the only import we are allowed to have if the scanner one. \r\n\r\nThe first time we record a customer and their items it works fine, it let me choose as many items as i want and of already existing in the array and everything runs smoothly - it goes on to ask if there&#180;s any coupons and then it &quot;prints&quot; the receipt - the problem is the second customer - it all runs smoothly until this code (the one i&#180;ll show below) it only lets me choose one product and the quantity and then it kind of moves to the next thing (ask for coupons and so on) and the third time it only let me choose the product - so i believe the problem is with the int.nextLine or something - i have looked at other questions and TRIED addind a nextLine or just next but it keeps happening so it might be the do while... i am not sure, i am new in java and in coding really - i will appreciate any kind of suggestion or input on it really.\r\n\r\n```\r\ndo{\r\n            \r\n            System.out.println(&quot;WHICH ITEM WOULD YOU LIKE TO BUY&quot;);\r\n            int CodeItem=input.nextInt();\r\n            //the array has max 20 items\r\n            if(CodeItem&lt;=20 &amp;&amp; CodeItem&gt;=1){\r\n\t    if(item[CodeItem-1]!=(&quot;null&quot;) &amp;&amp; price[CodeItem-1]!=0.0) \r\n\t    {\r\n\t\tSystem.out.println(&quot;How many of:&quot;+item[CodeItem-1]);\r\n                 int CANT=input.nextInt();\r\n                  \r\n                 LOCALamount[CodeItem-1]+=CANT;\r\n\t         GLOBALamount[CodeItem-1]+=CANT;\r\n                 \r\n            //the boolean ending is declared as true at the  start of the code             \r\n\t\t\r\n\t    }\r\n\t    else\r\n\t    {\r\n                System.out.println(&quot;****not valid****&quot;);\r\n               ending=false;\r\n              \r\n            }}else\r\n\t    {\r\n                System.out.println(&quot;****not valid****&quot;);\r\n              ending=false;\r\n              \r\n            }\r\n        \r\n        }while(ending);\r\n```\r\n ","title":"trouble with the scanner and int (nextLine and next)","body":"<p>Ive been having some trouble with this assignment, its supposed to be kind of like a supermarket thing. I am new in java, the only import we are allowed to have if the scanner one.</p>\n<p>The first time we record a customer and their items it works fine, it let me choose as many items as i want and of already existing in the array and everything runs smoothly - it goes on to ask if theres any coupons and then it &quot;prints&quot; the receipt - the problem is the second customer - it all runs smoothly until this code (the one ill show below) it only lets me choose one product and the quantity and then it kind of moves to the next thing (ask for coupons and so on) and the third time it only let me choose the product - so i believe the problem is with the int.nextLine or something - i have looked at other questions and TRIED addind a nextLine or just next but it keeps happening so it might be the do while... i am not sure, i am new in java and in coding really - i will appreciate any kind of suggestion or input on it really.</p>\n<pre><code>do{\n            \n            System.out.println(&quot;WHICH ITEM WOULD YOU LIKE TO BUY&quot;);\n            int CodeItem=input.nextInt();\n            //the array has max 20 items\n            if(CodeItem&lt;=20 &amp;&amp; CodeItem&gt;=1){\n        if(item[CodeItem-1]!=(&quot;null&quot;) &amp;&amp; price[CodeItem-1]!=0.0) \n        {\n        System.out.println(&quot;How many of:&quot;+item[CodeItem-1]);\n                 int CANT=input.nextInt();\n                  \n                 LOCALamount[CodeItem-1]+=CANT;\n             GLOBALamount[CodeItem-1]+=CANT;\n                 \n            //the boolean ending is declared as true at the  start of the code             \n        \n        }\n        else\n        {\n                System.out.println(&quot;****not valid****&quot;);\n               ending=false;\n              \n            }}else\n        {\n                System.out.println(&quot;****not valid****&quot;);\n              ending=false;\n              \n            }\n        \n        }while(ending);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":14698540,"reputation":55,"user_id":10615258,"display_name":"Vinnicius Santos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675180945,"creation_date":1675180945,"answer_id":75299836,"question_id":75299460,"body_markdown":"The function `getBean()` supports parameters to supplier bean constructors. You can pass the proper GamingSoftware instance when you calling the `getBean(Class, Args...)`\r\n\r\nRead more about get beans [here][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-getbean#5-retrieving-bean-by-type-with-constructor-parameters","title":"How do I specify which component to use while creating the bean using applicationContext.getBean() in spring?","body":"<p>The function <code>getBean()</code> supports parameters to supplier bean constructors. You can pass the proper GamingSoftware instance when you calling the <code>getBean(Class, Args...)</code></p>\n<p>Read more about get beans <a href=\"https://www.baeldung.com/spring-getbean#5-retrieving-bean-by-type-with-constructor-parameters\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":13068865,"reputation":357,"user_id":9443176,"display_name":"Max Aminov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675181469,"creation_date":1675181469,"answer_id":75299953,"question_id":75299460,"body_markdown":"You can create a property in *application.properties (or application.yml)* for example \r\n\r\n`myapp.gametype=mario`\r\n\r\nThen add to your @Component annotation @ConditionalOnProperty\r\n\r\n```\r\n@Component\r\n@ConditionalOnProperty(name = &quot;myapp.gametype&quot;, havingValue = &quot;mario&quot;)\r\npublic class SuperMario implements GamingSoftware {\r\n    public void up() { System.out.println(&quot;Super Mario: up&quot;); }\r\n    public void down() { System.out.println(&quot;Super Mario: down&quot;); }\r\n    public void left() {  System.out.println(&quot;Super Mario: left&quot;); }\r\n    public void right() { System.out.println(&quot;Super Mario: right&quot;); }\r\n}\r\n\r\n@Component\r\n@ConditionalOnProperty(name = &quot;myapp.gametype&quot;, havingValue = &quot;contra&quot;)\r\npublic class SuperContra implements GamingSoftware {\r\n    public void up() { System.out.println(&quot;Super Contra: up&quot;); }\r\n    public void down() { System.out.println(&quot;Super Contra: down&quot;); }\r\n    public void left() {  System.out.println(&quot;Super Contra: left&quot;); }\r\n    public void right() { System.out.println(&quot;Super Contra: right&quot;); }\r\n}\r\n```\r\n\r\nNext time Spring will create only one Bean of GamingSoftware interface depends on what value has your property. ","title":"How do I specify which component to use while creating the bean using applicationContext.getBean() in spring?","body":"<p>You can create a property in <em>application.properties (or application.yml)</em> for example</p>\n<p><code>myapp.gametype=mario</code></p>\n<p>Then add to your @Component annotation @ConditionalOnProperty</p>\n<pre><code>@Component\n@ConditionalOnProperty(name = &quot;myapp.gametype&quot;, havingValue = &quot;mario&quot;)\npublic class SuperMario implements GamingSoftware {\n    public void up() { System.out.println(&quot;Super Mario: up&quot;); }\n    public void down() { System.out.println(&quot;Super Mario: down&quot;); }\n    public void left() {  System.out.println(&quot;Super Mario: left&quot;); }\n    public void right() { System.out.println(&quot;Super Mario: right&quot;); }\n}\n\n@Component\n@ConditionalOnProperty(name = &quot;myapp.gametype&quot;, havingValue = &quot;contra&quot;)\npublic class SuperContra implements GamingSoftware {\n    public void up() { System.out.println(&quot;Super Contra: up&quot;); }\n    public void down() { System.out.println(&quot;Super Contra: down&quot;); }\n    public void left() {  System.out.println(&quot;Super Contra: left&quot;); }\n    public void right() { System.out.println(&quot;Super Contra: right&quot;); }\n}\n</code></pre>\n<p>Next time Spring will create only one Bean of GamingSoftware interface depends on what value has your property.</p>\n"},{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675181648,"creation_date":1675181648,"answer_id":75299990,"question_id":75299460,"body_markdown":"Beans are created with a name based on the concrete class name (with first letter made lowercase). Try \r\n\r\n    applicationContext.getBean(superMario)","title":"How do I specify which component to use while creating the bean using applicationContext.getBean() in spring?","body":"<p>Beans are created with a name based on the concrete class name (with first letter made lowercase). Try</p>\n<pre><code>applicationContext.getBean(superMario)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6106545,"reputation":165,"user_id":4764122,"display_name":"Rub&#233;n Aguado"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675234144,"creation_date":1675202171,"answer_id":75303567,"question_id":75299460,"body_markdown":"In springboot the context is not loaded while applicationContext.getBean(). The context is loaded in SpringApplication.run(GamingDevice.class, args), so in that line is when the exception is throw.\r\n\r\nFor runnig you must eliminate the @Autowired on GamingSoftware and load it using a set property:\r\n\r\n        @Component\r\n        public class GameRunner {\r\n        \r\n            private GamingSoftware game;\r\n            \r\n            public void run() {\r\n                game.up();\r\n                game.down();\r\n                game.left();\r\n                game.right();\r\n            }\r\n        \r\n        \tpublic GamingSoftware getGame() {\r\n        \t\treturn game;\r\n        \t}\r\n        \r\n        \tpublic void setGame(GamingSoftware game) {\r\n        \t\tthis.game = game;\r\n        \t}\r\n            \r\n        }\r\n    \r\n    @SpringBootApplication\r\n    public class GamingDevice {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t ConfigurableApplicationContext applicationContext = SpringApplication.run(GamingDevice.class, args);\r\n    \t\t GameRunner gameRunner = applicationContext.getBean(GameRunner.class);\r\n    \t\t gameRunner.setGame(applicationContext.getBean(&quot;superContra&quot;,GamingSoftware.class));\r\n    \t\t gameRunner.run();\r\n    \t}\r\n    \r\n    }","title":"How do I specify which component to use while creating the bean using applicationContext.getBean() in spring?","body":"<p>In springboot the context is not loaded while applicationContext.getBean(). The context is loaded in SpringApplication.run(GamingDevice.class, args), so in that line is when the exception is throw.</p>\n<p>For runnig you must eliminate the @Autowired on GamingSoftware and load it using a set property:</p>\n<pre><code>    @Component\n    public class GameRunner {\n    \n        private GamingSoftware game;\n        \n        public void run() {\n            game.up();\n            game.down();\n            game.left();\n            game.right();\n        }\n    \n        public GamingSoftware getGame() {\n            return game;\n        }\n    \n        public void setGame(GamingSoftware game) {\n            this.game = game;\n        }\n        \n    }\n\n@SpringBootApplication\npublic class GamingDevice {\n\n    public static void main(String[] args) {\n         ConfigurableApplicationContext applicationContext = SpringApplication.run(GamingDevice.class, args);\n         GameRunner gameRunner = applicationContext.getBean(GameRunner.class);\n         gameRunner.setGame(applicationContext.getBean(&quot;superContra&quot;,GamingSoftware.class));\n         gameRunner.run();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":21664035,"reputation":23,"user_id":15982740,"display_name":"Souvik Das"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75303567,"answer_count":4,"score":2,"last_activity_date":1675234144,"creation_date":1675179267,"question_id":75299460,"body_markdown":"I have the following classes and interfaces:\r\n```java\r\npublic interface GamingSoftware {\r\n    public void up();\r\n    public void down();\r\n    public void left();\r\n    public void right();\r\n}\r\n\r\n@Component\r\npublic class SuperMario implements GamingSoftware {\r\n    public void up() { System.out.println(&quot;Super Mario: up&quot;); }\r\n    public void down() { System.out.println(&quot;Super Mario: down&quot;); }\r\n    public void left() {  System.out.println(&quot;Super Mario: left&quot;); }\r\n    public void right() { System.out.println(&quot;Super Mario: right&quot;); }\r\n}\r\n\r\n@Component\r\npublic class SuperContra implements GamingSoftware {\r\n    public void up() { System.out.println(&quot;Super Contra: up&quot;); }\r\n    public void down() { System.out.println(&quot;Super Contra: down&quot;); }\r\n    public void left() {  System.out.println(&quot;Super Contra: left&quot;); }\r\n    public void right() { System.out.println(&quot;Super Contra: right&quot;); }\r\n}\r\n\r\n@Component\r\npublic class GameRunner {\r\n    @Autowired\r\n    private GamingSoftware game;\r\n    public GameRunner(GamingSoftware game) {\r\n        this.game = game;\r\n    }\r\n    public void run() {\r\n        game.up();\r\n        game.down();\r\n        game.left();\r\n        game.right();\r\n    }\r\n}\r\n\r\n@SpringBootApplication\r\npublic class GamingDevice {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tConfigurableApplicationContext applicationContext = SpringApplication.run(GamingDevice.class, args);\r\n\t\tGameRunner gameRunner = applicationContext.getBean(GameRunner.class);\r\n\t\tgameRunner.run();\r\n\t}\r\n\r\n}\r\n```\r\nWhile getting the bean `applicationContext.getBean(GameRunner.class)`, I want to be able to specify the game for instantiating the `GamingSoftware` variable in the `GameRunner` class. \r\n\r\nWhen I run the above code it gives me an error like, Constructor for game runner required a single bean but 2 found `SuperMario` and `SuperContra`.\r\n\r\nHow do I specify which component to use in my `applicationContext.getBean()` method?","title":"How do I specify which component to use while creating the bean using applicationContext.getBean() in spring?","body":"<p>I have the following classes and interfaces:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface GamingSoftware {\n    public void up();\n    public void down();\n    public void left();\n    public void right();\n}\n\n@Component\npublic class SuperMario implements GamingSoftware {\n    public void up() { System.out.println(&quot;Super Mario: up&quot;); }\n    public void down() { System.out.println(&quot;Super Mario: down&quot;); }\n    public void left() {  System.out.println(&quot;Super Mario: left&quot;); }\n    public void right() { System.out.println(&quot;Super Mario: right&quot;); }\n}\n\n@Component\npublic class SuperContra implements GamingSoftware {\n    public void up() { System.out.println(&quot;Super Contra: up&quot;); }\n    public void down() { System.out.println(&quot;Super Contra: down&quot;); }\n    public void left() {  System.out.println(&quot;Super Contra: left&quot;); }\n    public void right() { System.out.println(&quot;Super Contra: right&quot;); }\n}\n\n@Component\npublic class GameRunner {\n    @Autowired\n    private GamingSoftware game;\n    public GameRunner(GamingSoftware game) {\n        this.game = game;\n    }\n    public void run() {\n        game.up();\n        game.down();\n        game.left();\n        game.right();\n    }\n}\n\n@SpringBootApplication\npublic class GamingDevice {\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext applicationContext = SpringApplication.run(GamingDevice.class, args);\n        GameRunner gameRunner = applicationContext.getBean(GameRunner.class);\n        gameRunner.run();\n    }\n\n}\n</code></pre>\n<p>While getting the bean <code>applicationContext.getBean(GameRunner.class)</code>, I want to be able to specify the game for instantiating the <code>GamingSoftware</code> variable in the <code>GameRunner</code> class.</p>\n<p>When I run the above code it gives me an error like, Constructor for game runner required a single bean but 2 found <code>SuperMario</code> and <code>SuperContra</code>.</p>\n<p>How do I specify which component to use in my <code>applicationContext.getBean()</code> method?</p>\n"},{"tags":["java","javafx","javafx-8","javafx-2"],"answers":[{"tags":[],"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1548414959,"creation_date":1548414959,"answer_id":54364225,"question_id":54363979,"body_markdown":"I have found a solution. Changing from:\r\n\r\n    primaryStage.getIcons().add(new Image(&quot;file:view/images/programicon.png&quot;));\r\n\r\nTo\r\n\r\n    primaryStage.getIcons().add(new Image(getClass().getResourceAsStream(&quot;view/images/programicon.png&quot;)));\r\n\r\ndid the trick.","title":"JavaFX: stage.getIcons().add() not working in a JavaFX app","body":"<p>I have found a solution. Changing from:</p>\n\n<pre><code>primaryStage.getIcons().add(new Image(\"file:view/images/programicon.png\"));\n</code></pre>\n\n<p>To</p>\n\n<pre><code>primaryStage.getIcons().add(new Image(getClass().getResourceAsStream(\"view/images/programicon.png\")));\n</code></pre>\n\n<p>did the trick.</p>\n"}],"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":909,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54364225,"answer_count":1,"score":0,"last_activity_date":1675233654,"creation_date":1548414110,"question_id":54363979,"body_markdown":"I want to add a program icon for my JavaFX app. I know how to do it - I have a Stage object defined as a field in the main app class:\r\n\r\n    private Stage stage;\r\n\r\nAnd then in the method that is initilaizing the main stage I have a piece of code:\r\n\r\n    Scene scene = new Scene(rootLayout);\r\n    primaryStage.setScene(scene);\r\n    primaryStage.getIcons().add(new Image(&quot;file:view/images/programicon.png&quot;));\r\n    primaryStage.show();\r\n\r\nI have a package `com.myapp.view`, and in this package I have another package: `com.myapp.view.images`, and I have pasted the icon I wanted to use, called `programicon.png`. Earlier, I had written it wrong:\r\n\r\n    primaryStage.getIcons().add(new Image(&quot;view/images/programicon.png&quot;));\r\n\r\nAnd I got an exception:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Invalid URL or resource not found\r\n\tat javafx.scene.image.Image.validateUrl(Image.java:1110)\r\n\r\nBut when I changed the url to `file:view/images/programicon.png` - there is no exception now, but the program icon still remains default.\r\n\r\nThe `programicon.png` is a 512x512 image without background.","title":"JavaFX: stage.getIcons().add() not working in a JavaFX app","body":"<p>I want to add a program icon for my JavaFX app. I know how to do it - I have a Stage object defined as a field in the main app class:</p>\n\n<pre><code>private Stage stage;\n</code></pre>\n\n<p>And then in the method that is initilaizing the main stage I have a piece of code:</p>\n\n<pre><code>Scene scene = new Scene(rootLayout);\nprimaryStage.setScene(scene);\nprimaryStage.getIcons().add(new Image(\"file:view/images/programicon.png\"));\nprimaryStage.show();\n</code></pre>\n\n<p>I have a package <code>com.myapp.view</code>, and in this package I have another package: <code>com.myapp.view.images</code>, and I have pasted the icon I wanted to use, called <code>programicon.png</code>. Earlier, I had written it wrong:</p>\n\n<pre><code>primaryStage.getIcons().add(new Image(\"view/images/programicon.png\"));\n</code></pre>\n\n<p>And I got an exception:</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Invalid URL or resource not found\nat javafx.scene.image.Image.validateUrl(Image.java:1110)\n</code></pre>\n\n<p>But when I changed the url to <code>file:view/images/programicon.png</code> - there is no exception now, but the program icon still remains default.</p>\n\n<p>The <code>programicon.png</code> is a 512x512 image without background.</p>\n"},{"tags":["java","android","windows","jvm"],"answers":[{"comments":[{"owner":{"account_id":6595006,"reputation":133,"user_id":5095099,"display_name":"burkem_10"},"score":0,"creation_date":1436380607,"post_id":31300744,"comment_id":50592055,"body_markdown":"Good idea, but still no luck :/ I even checked to verify that the file even existed.","body":"Good idea, but still no luck :/ I even checked to verify that the file even existed."},{"owner":{"account_id":1637743,"reputation":549,"user_id":1510770,"display_name":"Jegg"},"score":0,"creation_date":1436381519,"post_id":31300744,"comment_id":50592657,"body_markdown":"did you see jvm.dll in C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\client? To me, I found it at C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\server","body":"did you see jvm.dll in C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\client? To me, I found it at C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\server"},{"owner":{"account_id":6595006,"reputation":133,"user_id":5095099,"display_name":"burkem_10"},"score":0,"creation_date":1436391635,"post_id":31300744,"comment_id":50598306,"body_markdown":"Yes, I found it right in the /bin/client/ directory.","body":"Yes, I found it right in the /bin/client/ directory."}],"tags":[],"owner":{"account_id":1637743,"reputation":549,"user_id":1510770,"display_name":"Jegg"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436381049,"creation_date":1436379997,"answer_id":31300744,"question_id":31300024,"body_markdown":"you said you have added  /bin/ directory to the &quot;path&quot; environment variable, if you are putting C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin .that is wrong it should be  ***C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\client*** to path system variable and you put it as first item.\r\n\r\nI checked my java installation path. I found jvm.dll is located at C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\server please check yours.\r\n\r\nsee the screen shot.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/F98o1.png","title":"Android Studio: Failed to load JVM DLL","body":"<p>you said you have added  /bin/ directory to the \"path\" environment variable, if you are putting C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin .that is wrong it should be  <strong><em>C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\client</em></strong> to path system variable and you put it as first item.</p>\n\n<p>I checked my java installation path. I found jvm.dll is located at C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\server please check yours.</p>\n\n<p>see the screen shot.</p>\n\n<p><img src=\"https://i.stack.imgur.com/F98o1.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":6595006,"reputation":133,"user_id":5095099,"display_name":"burkem_10"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436391851,"creation_date":1436391851,"answer_id":31304364,"question_id":31300024,"body_markdown":"I got it working. I uninstalled everything again. Reinstalled the 64 bit jdk, remade the environment variable, rebooted, reinstalled Android Studio and it still was not working.\r\n\r\nI downloaded the 32 bit JDK just got giggles and installed it. I did not uninstall the 64 bit java... I pointed the environment variable to the 32 bit JDK directory and tried to launch Androd studio with the 32 bit .exe (not studio64.exe), and it worked. \r\n\r\nI guess I&#39;ll have to live without 64 bit.\r\n\r\nThanks for the help, everyone. ","title":"Android Studio: Failed to load JVM DLL","body":"<p>I got it working. I uninstalled everything again. Reinstalled the 64 bit jdk, remade the environment variable, rebooted, reinstalled Android Studio and it still was not working.</p>\n\n<p>I downloaded the 32 bit JDK just got giggles and installed it. I did not uninstall the 64 bit java... I pointed the environment variable to the 32 bit JDK directory and tried to launch Androd studio with the 32 bit .exe (not studio64.exe), and it worked. </p>\n\n<p>I guess I'll have to live without 64 bit.</p>\n\n<p>Thanks for the help, everyone. </p>\n"},{"comments":[{"owner":{"account_id":19375390,"reputation":17,"user_id":14167742,"display_name":"Sophie-Timezonedesign"},"score":0,"creation_date":1606329608,"post_id":47659376,"comment_id":114934700,"body_markdown":"Thank you for your help. Android  Studio is starting well.","body":"Thank you for your help. Android  Studio is starting well."}],"tags":[],"owner":{"account_id":8075221,"reputation":755,"user_id":6086511,"display_name":"Shankara Narayana"},"comment_count":1,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1512494955,"creation_date":1512494955,"answer_id":47659376,"question_id":31300024,"body_markdown":"Try running android studio as Administrator. That worked for me. Try installing a different version of Android Studio.","title":"Android Studio: Failed to load JVM DLL","body":"<p>Try running android studio as Administrator. That worked for me. Try installing a different version of Android Studio.</p>\n"},{"tags":[],"owner":{"account_id":12725459,"reputation":591,"user_id":9244183,"display_name":"Abhishek N"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1551678105,"creation_date":1551678105,"answer_id":54977251,"question_id":31300024,"body_markdown":"This worked for me...\r\nTry running **studio64.exe** instead of **studio.exe**.","title":"Android Studio: Failed to load JVM DLL","body":"<p>This worked for me...\nTry running <strong>studio64.exe</strong> instead of <strong>studio.exe</strong>.</p>\n"},{"tags":[],"owner":{"account_id":5877908,"reputation":41,"user_id":4628240,"display_name":"Rohit Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566598728,"creation_date":1566598728,"answer_id":57633580,"question_id":31300024,"body_markdown":"Tried everything nothing worked. Restarted my laptop, Android Studio works perfectly.","title":"Android Studio: Failed to load JVM DLL","body":"<p>Tried everything nothing worked. Restarted my laptop, Android Studio works perfectly.</p>\n"},{"tags":[],"owner":{"account_id":10069413,"reputation":51,"user_id":7443515,"display_name":"Ryan Gammon"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1673736551,"creation_date":1673736551,"answer_id":75121780,"question_id":31300024,"body_markdown":"I had to install vcruntime140_1.dll via  https://learn.microsoft.com/en-US/cpp/windows/latest-supported-vc-redist?view=msvc-170 to solve the this issue. I used process monitor to see that it was missing.","title":"Android Studio: Failed to load JVM DLL","body":"<p>I had to install vcruntime140_1.dll via  <a href=\"https://learn.microsoft.com/en-US/cpp/windows/latest-supported-vc-redist?view=msvc-170\" rel=\"noreferrer\">https://learn.microsoft.com/en-US/cpp/windows/latest-supported-vc-redist?view=msvc-170</a> to solve the this issue. I used process monitor to see that it was missing.</p>\n"},{"tags":[],"owner":{"account_id":5268785,"reputation":590,"user_id":6908061,"display_name":"bomben"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675009839,"creation_date":1675009839,"answer_id":75276499,"question_id":31300024,"body_markdown":"I installed Microsoft Visual C++ X86 or X64 from [here][1] and AS started up fine.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist?view=msvc-170","title":"Android Studio: Failed to load JVM DLL","body":"<p>I installed Microsoft Visual C++ X86 or X64 from <a href=\"https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist?view=msvc-170\" rel=\"nofollow noreferrer\">here</a> and AS started up fine.</p>\n"}],"owner":{"account_id":6595006,"reputation":133,"user_id":5095099,"display_name":"burkem_10"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33049,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":7,"score":12,"last_activity_date":1675233518,"creation_date":1436377783,"question_id":31300024,"body_markdown":"*I have thoroughly researched this problem and the posted solutions have not worked for me.* \n\nI&#39;m running Windows 8, and the most recent JAVA JDK (64 bit) and Android Studio versions. \n\n[System specs: new XPS 13, core i5, 8GB RAM, SSD]\n\nThe exact error is:\n\n&gt;Failed to load JVM DLL C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\client\\jvm.dll\n&gt;\n&gt;If you already have a 64-bit JDK installed, define a JAVA_HOME variable in ... Environment Variables\n\n-- **Verification** --\n\n&gt;java -version\n\njava version &quot;1.8.0_45&quot;\n\nJava(TM) SE Runtime Environment (build 1.8.0_45-b15)..\n\n-- **Things I&#39;ve tried** --\n\n- Uninstall java and AS, reboot, install 64 bit java jdk, verify installation, reboot, install AS, set JAVA_HOME variable\n- YES, the viable is an Environment variable and not a User variable\n- I have added the /bin/ directory to the &quot;path&quot; environment variable\n- I have reversed the slashes in the environment variable paths as per one solution stated\n- Followed the uninstall/reinstall process stated above, but with a 32bit jdk instead (with the correct environment variable paths)\n- Done the whole process over (uninstalling, rebooting after installs, etc.) but with older JDKs\n- I have tried running studio.exe with 32 bit JDK installed, and studio64.exe with the 64 bit JDK installed\n\nI feel like I&#39;ve tried everything. I HAD to have screwed up somewhere along the line. Any idea?\n \n","title":"Android Studio: Failed to load JVM DLL","body":"<p><em>I have thoroughly researched this problem and the posted solutions have not worked for me.</em></p>\n<p>I'm running Windows 8, and the most recent JAVA JDK (64 bit) and Android Studio versions.</p>\n<p>[System specs: new XPS 13, core i5, 8GB RAM, SSD]</p>\n<p>The exact error is:</p>\n<blockquote>\n<p>Failed to load JVM DLL C:\\Program Files\\Java\\jdk1.8.0_45\\jre\\bin\\client\\jvm.dll</p>\n<p>If you already have a 64-bit JDK installed, define a JAVA_HOME variable in ... Environment Variables</p>\n</blockquote>\n<p>-- <strong>Verification</strong> --</p>\n<blockquote>\n<p>java -version</p>\n</blockquote>\n<p>java version &quot;1.8.0_45&quot;</p>\n<p>Java(TM) SE Runtime Environment (build 1.8.0_45-b15)..</p>\n<p>-- <strong>Things I've tried</strong> --</p>\n<ul>\n<li>Uninstall java and AS, reboot, install 64 bit java jdk, verify installation, reboot, install AS, set JAVA_HOME variable</li>\n<li>YES, the viable is an Environment variable and not a User variable</li>\n<li>I have added the /bin/ directory to the &quot;path&quot; environment variable</li>\n<li>I have reversed the slashes in the environment variable paths as per one solution stated</li>\n<li>Followed the uninstall/reinstall process stated above, but with a 32bit jdk instead (with the correct environment variable paths)</li>\n<li>Done the whole process over (uninstalling, rebooting after installs, etc.) but with older JDKs</li>\n<li>I have tried running studio.exe with 32 bit JDK installed, and studio64.exe with the 64 bit JDK installed</li>\n</ul>\n<p>I feel like I've tried everything. I HAD to have screwed up somewhere along the line. Any idea?</p>\n"},{"tags":["java","json","avro","jackson-dataformat-avro"],"comments":[{"owner":{"account_id":8316417,"reputation":565,"user_id":6249539,"accept_rate":83,"display_name":"yashpandey8055"},"score":0,"creation_date":1675174295,"post_id":75297523,"comment_id":132868574,"body_markdown":"You dont have a choice to make it backward compatible since now your field item SecondLevel take two types , null and &quot;my.model.kafka.test.SecondLevel&quot;, so your JSON has to explicitly define what Type you are using. You are getting &quot;Unknown union branch my.model.kafka.test.ThirdLevel&quot; because JsonDecoders while serializing expects the type to be mentioned which is my.model.kafka.test.SecondLevel","body":"You dont have a choice to make it backward compatible since now your field item SecondLevel take two types , null and &quot;my.model.kafka.test.SecondLevel&quot;, so your JSON has to explicitly define what Type you are using. You are getting &quot;Unknown union branch my.model.kafka.test.ThirdLevel&quot; because JsonDecoders while serializing expects the type to be mentioned which is my.model.kafka.test.SecondLevel"},{"owner":{"account_id":71185,"reputation":1110,"user_id":205839,"accept_rate":81,"display_name":"Chris"},"score":0,"creation_date":1675188367,"post_id":75297523,"comment_id":132873530,"body_markdown":"how would the new json look like in thast case?","body":"how would the new json look like in thast case?"},{"owner":{"account_id":71185,"reputation":1110,"user_id":205839,"accept_rate":81,"display_name":"Chris"},"score":0,"creation_date":1675188765,"post_id":75297523,"comment_id":132873634,"body_markdown":"Ok I think I got it but this effectively break backward compatibility: SecondLevel need to be on 2 level. I&#39;ll update the question to show the resulting json.","body":"Ok I think I got it but this effectively break backward compatibility: SecondLevel need to be on 2 level. I&#39;ll update the question to show the resulting json."}],"owner":{"account_id":71185,"reputation":1110,"user_id":205839,"accept_rate":81,"display_name":"Chris"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675233284,"creation_date":1675169878,"question_id":75297523,"body_markdown":"We changed a field to allow null and now previous json don&#39;t work anymore returning a AvroTypeException: Unknown union branch. \r\n\r\nHere the previous (working) avro file and json for the test: \r\nmyobject.avsc\r\n```\r\n{\r\n   &quot;namespace&quot;:&quot;my.model.kafka.test&quot;,\r\n   &quot;type&quot;:&quot;record&quot;,\r\n   &quot;name&quot;:&quot;MyObject&quot;,\r\n   &quot;fields&quot;:[\r\n      {\r\n         &quot;name&quot;:&quot;First_Level&quot;,\r\n         &quot;type&quot;:[\r\n            &quot;null&quot;,\r\n            {\r\n               &quot;type&quot;:&quot;record&quot;,\r\n               &quot;name&quot;:&quot;FirstLevel&quot;,\r\n               &quot;fields&quot;:[\r\n                  {\r\n                     &quot;name&quot;:&quot;TheTimestamp&quot;,\r\n                     &quot;doc&quot;:&quot;Timestamp&quot;,\r\n                     &quot;type&quot;:{\r\n                        &quot;type&quot;:&quot;long&quot;,\r\n                        &quot;logicalType&quot;:&quot;timestamp-micros&quot;\r\n                     }\r\n                  },\r\n                  {\r\n                     &quot;name&quot;:&quot;CategoryCode&quot;,\r\n                     &quot;type&quot;:{\r\n                        &quot;type&quot;:&quot;enum&quot;,\r\n                        &quot;name&quot;:&quot;Code&quot;,\r\n                        &quot;symbols&quot;:[\r\n                           &quot;A&quot;,\r\n                           &quot;B&quot;\r\n                        ]\r\n                     }\r\n                  },\r\n                  {\r\n                     &quot;name&quot;:&quot;SecondLevel&quot;,\r\n                     &quot;type&quot;:{\r\n                        &quot;type&quot;:&quot;record&quot;,\r\n                        &quot;name&quot;:&quot;SecondLevel&quot;,\r\n                        &quot;fields&quot;:[\r\n                           {\r\n                              &quot;name&quot;:&quot;ThirdLevel&quot;,\r\n                              &quot;type&quot;:{\r\n                                 &quot;type&quot;:&quot;array&quot;,\r\n                                 &quot;items&quot;:[\r\n                                    {\r\n                                       &quot;type&quot;:&quot;record&quot;,\r\n                                       &quot;name&quot;:&quot;ThirdLevel&quot;,\r\n                                       &quot;fields&quot;:[\r\n                                          {\r\n                                             &quot;name&quot;:&quot;LocationCode&quot;,\r\n                                             &quot;type&quot;:&quot;string&quot;\r\n                                          },\r\n                                          {\r\n                                             &quot;name&quot;:&quot;SomeCode&quot;,\r\n                                             &quot;type&quot;:&quot;string&quot;\r\n                                          },\r\n                                          {\r\n                                             &quot;name&quot;:&quot;Cost&quot;,\r\n                                             &quot;type&quot;:&quot;int&quot;\r\n                                          }\r\n                                       ]\r\n                                    }\r\n                                 ]\r\n                              }\r\n                           }\r\n                        ]\r\n                     }\r\n                  },\r\n                  {\r\n                     &quot;name&quot;:&quot;UID&quot;,\r\n                     &quot;type&quot;:[\r\n                        &quot;null&quot;,\r\n                        &quot;string&quot;\r\n                     ],\r\n                     &quot;default&quot;:null\r\n                  }\r\n               ]\r\n            }\r\n         ],\r\n         &quot;default&quot;:null\r\n      }\r\n   ]\r\n}\r\n```\r\nHere the json of the test: \r\n```\r\n{\r\n  &quot;First_Level&quot; : {\r\n    &quot;my.model.kafka.test.FirstLevel&quot; : {\r\n      &quot;TheTimestamp&quot; : 1648808100000000,\r\n      &quot;CategoryCode&quot; : &quot;A&quot;,\r\n      &quot;SecondLevel&quot; : {\r\n        &quot;ThirdLevel&quot; : [ {\r\n          &quot;my.model.kafka.test.ThirdLevel&quot; : {\r\n            &quot;LocationCode&quot; : &quot;BBB&quot;,\r\n            &quot;SomeCode&quot; : &quot;AAA&quot;,\r\n            &quot;Cost&quot; : 2\r\n          }\r\n        }, {\r\n          &quot;my.model.kafka.test.ThirdLevel&quot; : {\r\n            &quot;LocationCode&quot; : &quot;CCC&quot;,\r\n            &quot;SomeCode&quot; : &quot;BBB&quot;,\r\n            &quot;Cost&quot; : 2\r\n          }\r\n        } ]\r\n      },\r\n      &quot;UID&quot; : &quot;123-9jh789-opi8p83h3&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n**Modification to allow null**\r\nHere everything work fine, but if we make the SecondLevel nullable by changing the avsc file to the following we get the AvroTypeException: Unknown union branch: \r\n\r\n```\r\n{\r\n   &quot;namespace&quot;:&quot;my.model.kafka.test&quot;,\r\n   &quot;type&quot;:&quot;record&quot;,\r\n   &quot;name&quot;:&quot;MyObject&quot;,\r\n   &quot;fields&quot;:[\r\n      {\r\n         &quot;name&quot;:&quot;First_Level&quot;,\r\n         &quot;type&quot;:[\r\n            &quot;null&quot;,\r\n            {\r\n               &quot;type&quot;:&quot;record&quot;,\r\n               &quot;name&quot;:&quot;FirstLevel&quot;,\r\n               &quot;fields&quot;:[\r\n                  {\r\n                     &quot;name&quot;:&quot;TheTimestamp&quot;,\r\n                     &quot;doc&quot;:&quot;Timestamp&quot;,\r\n                     &quot;type&quot;:{\r\n                        &quot;type&quot;:&quot;long&quot;,\r\n                        &quot;logicalType&quot;:&quot;timestamp-micros&quot;\r\n                     }\r\n                  },\r\n                  {\r\n                     &quot;name&quot;:&quot;CategoryCode&quot;,\r\n                     &quot;type&quot;:{\r\n                        &quot;type&quot;:&quot;enum&quot;,\r\n                        &quot;name&quot;:&quot;Code&quot;,\r\n                        &quot;symbols&quot;:[\r\n                           &quot;A&quot;,\r\n                           &quot;B&quot;\r\n                        ]\r\n                     }\r\n                  },\r\n                  {\r\n                     &quot;name&quot;:&quot;SecondLevel&quot;,\r\n                     &quot;type&quot;:[\r\n                        &quot;null&quot;,\r\n                        {\r\n                           &quot;type&quot;:&quot;record&quot;,\r\n                           &quot;name&quot;:&quot;SecondLevel&quot;,\r\n                           &quot;fields&quot;:[\r\n                              {\r\n                                 &quot;name&quot;:&quot;ThirdLevel&quot;,\r\n                                 &quot;type&quot;:{\r\n                                    &quot;type&quot;:&quot;array&quot;,\r\n                                    &quot;items&quot;:[\r\n                                       {\r\n                                          &quot;type&quot;:&quot;record&quot;,\r\n                                          &quot;name&quot;:&quot;ThirdLevel&quot;,\r\n                                          &quot;fields&quot;:[\r\n                                             {\r\n                                                &quot;name&quot;:&quot;LocationCode&quot;,\r\n                                                &quot;type&quot;:&quot;string&quot;\r\n                                             },\r\n                                             {\r\n                                                &quot;name&quot;:&quot;SomeCode&quot;,\r\n                                                &quot;type&quot;:&quot;string&quot;\r\n                                             },\r\n                                             {\r\n                                                &quot;name&quot;:&quot;Cost&quot;,\r\n                                                &quot;type&quot;:&quot;int&quot;\r\n                                             }\r\n                                          ]\r\n                                       }\r\n                                    ]\r\n                                 }\r\n                              }\r\n                           ],\r\n                           &quot;default&quot;:null\r\n                        }\r\n                     ]\r\n                  },\r\n                  {\r\n                     &quot;name&quot;:&quot;UID&quot;,\r\n                     &quot;type&quot;:[\r\n                        &quot;null&quot;,\r\n                        &quot;string&quot;\r\n                     ],\r\n                     &quot;default&quot;:null\r\n                  }\r\n               ]\r\n            }\r\n         ],\r\n         &quot;default&quot;:null\r\n      }\r\n   ]\r\n}\r\n```\r\n\r\nWhich give a \r\n```\r\norg.apache.avro.AvroTypeException: Unknown union branch ThirdLevel\r\n```\r\n\r\neven if I change the json to include the namespace before the thirdlevel, like in the other stackoverflow answer I get the same error: \r\n```\r\norg.apache.avro.AvroTypeException: Unknown union branch my.model.kafka.test.ThirdLevel\r\n```\r\nMy question is twofold: \r\n\r\nHow to modified the avsc so the old json will work and new json that may have the SecondLevel null work too?\r\nWe need to make this work but ultimately we need to be backward compatible too, so changing name or the json should be avoided. \r\n\r\n**EDIT:** \r\n\r\nAfter running the edited avsc vs kafka data directly the old message and new message were both working perfectly fine. \r\nWe have a process that save the message in a json files and the json from that process were the one with the problem. \r\nSince the backward compatibility was needed only for the kafka consumer only, these change are actually fine. \r\n\r\nFor those who wonder here how the json should look like after adding the null type to SecondLevel: \r\n\r\n```\r\n{\r\n   &quot;First_Level&quot;:{\r\n      &quot;my.model.kafka.test.FirstLevel&quot;:{\r\n         &quot;TheTimestamp&quot;:1648808100000000,\r\n         &quot;CategoryCode&quot;:&quot;A&quot;,\r\n         &quot;SecondLevel&quot;:{\r\n            &quot;my.model.kafka.test.SecondLevel&quot;:{\r\n               &quot;ThirdLevel&quot;:[\r\n                  {\r\n                     &quot;my.model.kafka.test.ThirdLevel&quot;:{\r\n                        &quot;LocationCode&quot;:&quot;BBB&quot;,\r\n                        &quot;SomeCode&quot;:&quot;AAA&quot;,\r\n                        &quot;Cost&quot;:2\r\n                     }\r\n                  },\r\n                  {\r\n                     &quot;my.model.kafka.test.ThirdLevel&quot;:{\r\n                        &quot;LocationCode&quot;:&quot;CCC&quot;,\r\n                        &quot;SomeCode&quot;:&quot;BBB&quot;,\r\n                        &quot;Cost&quot;:2\r\n                     }\r\n                  }\r\n               ]\r\n            }\r\n         },\r\n         &quot;UID&quot;:&quot;123-9jh789-opi8p83h3&quot;\r\n      }\r\n   }\r\n}\r\n```","title":"How to prevent org.apache.avro.AvroTypeException: Unknown union branch after making a field nullable?","body":"<p>We changed a field to allow null and now previous json don't work anymore returning a AvroTypeException: Unknown union branch.</p>\n<p>Here the previous (working) avro file and json for the test:\nmyobject.avsc</p>\n<pre><code>{\n   &quot;namespace&quot;:&quot;my.model.kafka.test&quot;,\n   &quot;type&quot;:&quot;record&quot;,\n   &quot;name&quot;:&quot;MyObject&quot;,\n   &quot;fields&quot;:[\n      {\n         &quot;name&quot;:&quot;First_Level&quot;,\n         &quot;type&quot;:[\n            &quot;null&quot;,\n            {\n               &quot;type&quot;:&quot;record&quot;,\n               &quot;name&quot;:&quot;FirstLevel&quot;,\n               &quot;fields&quot;:[\n                  {\n                     &quot;name&quot;:&quot;TheTimestamp&quot;,\n                     &quot;doc&quot;:&quot;Timestamp&quot;,\n                     &quot;type&quot;:{\n                        &quot;type&quot;:&quot;long&quot;,\n                        &quot;logicalType&quot;:&quot;timestamp-micros&quot;\n                     }\n                  },\n                  {\n                     &quot;name&quot;:&quot;CategoryCode&quot;,\n                     &quot;type&quot;:{\n                        &quot;type&quot;:&quot;enum&quot;,\n                        &quot;name&quot;:&quot;Code&quot;,\n                        &quot;symbols&quot;:[\n                           &quot;A&quot;,\n                           &quot;B&quot;\n                        ]\n                     }\n                  },\n                  {\n                     &quot;name&quot;:&quot;SecondLevel&quot;,\n                     &quot;type&quot;:{\n                        &quot;type&quot;:&quot;record&quot;,\n                        &quot;name&quot;:&quot;SecondLevel&quot;,\n                        &quot;fields&quot;:[\n                           {\n                              &quot;name&quot;:&quot;ThirdLevel&quot;,\n                              &quot;type&quot;:{\n                                 &quot;type&quot;:&quot;array&quot;,\n                                 &quot;items&quot;:[\n                                    {\n                                       &quot;type&quot;:&quot;record&quot;,\n                                       &quot;name&quot;:&quot;ThirdLevel&quot;,\n                                       &quot;fields&quot;:[\n                                          {\n                                             &quot;name&quot;:&quot;LocationCode&quot;,\n                                             &quot;type&quot;:&quot;string&quot;\n                                          },\n                                          {\n                                             &quot;name&quot;:&quot;SomeCode&quot;,\n                                             &quot;type&quot;:&quot;string&quot;\n                                          },\n                                          {\n                                             &quot;name&quot;:&quot;Cost&quot;,\n                                             &quot;type&quot;:&quot;int&quot;\n                                          }\n                                       ]\n                                    }\n                                 ]\n                              }\n                           }\n                        ]\n                     }\n                  },\n                  {\n                     &quot;name&quot;:&quot;UID&quot;,\n                     &quot;type&quot;:[\n                        &quot;null&quot;,\n                        &quot;string&quot;\n                     ],\n                     &quot;default&quot;:null\n                  }\n               ]\n            }\n         ],\n         &quot;default&quot;:null\n      }\n   ]\n}\n</code></pre>\n<p>Here the json of the test:</p>\n<pre><code>{\n  &quot;First_Level&quot; : {\n    &quot;my.model.kafka.test.FirstLevel&quot; : {\n      &quot;TheTimestamp&quot; : 1648808100000000,\n      &quot;CategoryCode&quot; : &quot;A&quot;,\n      &quot;SecondLevel&quot; : {\n        &quot;ThirdLevel&quot; : [ {\n          &quot;my.model.kafka.test.ThirdLevel&quot; : {\n            &quot;LocationCode&quot; : &quot;BBB&quot;,\n            &quot;SomeCode&quot; : &quot;AAA&quot;,\n            &quot;Cost&quot; : 2\n          }\n        }, {\n          &quot;my.model.kafka.test.ThirdLevel&quot; : {\n            &quot;LocationCode&quot; : &quot;CCC&quot;,\n            &quot;SomeCode&quot; : &quot;BBB&quot;,\n            &quot;Cost&quot; : 2\n          }\n        } ]\n      },\n      &quot;UID&quot; : &quot;123-9jh789-opi8p83h3&quot;\n    }\n  }\n}\n</code></pre>\n<p><strong>Modification to allow null</strong>\nHere everything work fine, but if we make the SecondLevel nullable by changing the avsc file to the following we get the AvroTypeException: Unknown union branch:</p>\n<pre><code>{\n   &quot;namespace&quot;:&quot;my.model.kafka.test&quot;,\n   &quot;type&quot;:&quot;record&quot;,\n   &quot;name&quot;:&quot;MyObject&quot;,\n   &quot;fields&quot;:[\n      {\n         &quot;name&quot;:&quot;First_Level&quot;,\n         &quot;type&quot;:[\n            &quot;null&quot;,\n            {\n               &quot;type&quot;:&quot;record&quot;,\n               &quot;name&quot;:&quot;FirstLevel&quot;,\n               &quot;fields&quot;:[\n                  {\n                     &quot;name&quot;:&quot;TheTimestamp&quot;,\n                     &quot;doc&quot;:&quot;Timestamp&quot;,\n                     &quot;type&quot;:{\n                        &quot;type&quot;:&quot;long&quot;,\n                        &quot;logicalType&quot;:&quot;timestamp-micros&quot;\n                     }\n                  },\n                  {\n                     &quot;name&quot;:&quot;CategoryCode&quot;,\n                     &quot;type&quot;:{\n                        &quot;type&quot;:&quot;enum&quot;,\n                        &quot;name&quot;:&quot;Code&quot;,\n                        &quot;symbols&quot;:[\n                           &quot;A&quot;,\n                           &quot;B&quot;\n                        ]\n                     }\n                  },\n                  {\n                     &quot;name&quot;:&quot;SecondLevel&quot;,\n                     &quot;type&quot;:[\n                        &quot;null&quot;,\n                        {\n                           &quot;type&quot;:&quot;record&quot;,\n                           &quot;name&quot;:&quot;SecondLevel&quot;,\n                           &quot;fields&quot;:[\n                              {\n                                 &quot;name&quot;:&quot;ThirdLevel&quot;,\n                                 &quot;type&quot;:{\n                                    &quot;type&quot;:&quot;array&quot;,\n                                    &quot;items&quot;:[\n                                       {\n                                          &quot;type&quot;:&quot;record&quot;,\n                                          &quot;name&quot;:&quot;ThirdLevel&quot;,\n                                          &quot;fields&quot;:[\n                                             {\n                                                &quot;name&quot;:&quot;LocationCode&quot;,\n                                                &quot;type&quot;:&quot;string&quot;\n                                             },\n                                             {\n                                                &quot;name&quot;:&quot;SomeCode&quot;,\n                                                &quot;type&quot;:&quot;string&quot;\n                                             },\n                                             {\n                                                &quot;name&quot;:&quot;Cost&quot;,\n                                                &quot;type&quot;:&quot;int&quot;\n                                             }\n                                          ]\n                                       }\n                                    ]\n                                 }\n                              }\n                           ],\n                           &quot;default&quot;:null\n                        }\n                     ]\n                  },\n                  {\n                     &quot;name&quot;:&quot;UID&quot;,\n                     &quot;type&quot;:[\n                        &quot;null&quot;,\n                        &quot;string&quot;\n                     ],\n                     &quot;default&quot;:null\n                  }\n               ]\n            }\n         ],\n         &quot;default&quot;:null\n      }\n   ]\n}\n</code></pre>\n<p>Which give a</p>\n<pre><code>org.apache.avro.AvroTypeException: Unknown union branch ThirdLevel\n</code></pre>\n<p>even if I change the json to include the namespace before the thirdlevel, like in the other stackoverflow answer I get the same error:</p>\n<pre><code>org.apache.avro.AvroTypeException: Unknown union branch my.model.kafka.test.ThirdLevel\n</code></pre>\n<p>My question is twofold:</p>\n<p>How to modified the avsc so the old json will work and new json that may have the SecondLevel null work too?\nWe need to make this work but ultimately we need to be backward compatible too, so changing name or the json should be avoided.</p>\n<p><strong>EDIT:</strong></p>\n<p>After running the edited avsc vs kafka data directly the old message and new message were both working perfectly fine.\nWe have a process that save the message in a json files and the json from that process were the one with the problem.\nSince the backward compatibility was needed only for the kafka consumer only, these change are actually fine.</p>\n<p>For those who wonder here how the json should look like after adding the null type to SecondLevel:</p>\n<pre><code>{\n   &quot;First_Level&quot;:{\n      &quot;my.model.kafka.test.FirstLevel&quot;:{\n         &quot;TheTimestamp&quot;:1648808100000000,\n         &quot;CategoryCode&quot;:&quot;A&quot;,\n         &quot;SecondLevel&quot;:{\n            &quot;my.model.kafka.test.SecondLevel&quot;:{\n               &quot;ThirdLevel&quot;:[\n                  {\n                     &quot;my.model.kafka.test.ThirdLevel&quot;:{\n                        &quot;LocationCode&quot;:&quot;BBB&quot;,\n                        &quot;SomeCode&quot;:&quot;AAA&quot;,\n                        &quot;Cost&quot;:2\n                     }\n                  },\n                  {\n                     &quot;my.model.kafka.test.ThirdLevel&quot;:{\n                        &quot;LocationCode&quot;:&quot;CCC&quot;,\n                        &quot;SomeCode&quot;:&quot;BBB&quot;,\n                        &quot;Cost&quot;:2\n                     }\n                  }\n               ]\n            }\n         },\n         &quot;UID&quot;:&quot;123-9jh789-opi8p83h3&quot;\n      }\n   }\n}\n</code></pre>\n"},{"tags":["java","rocketmq","concurrentmodificationexception"],"comments":[{"owner":{"account_id":10590016,"reputation":1,"user_id":7800945,"display_name":"dujingsong"},"score":0,"creation_date":1652260678,"post_id":72197033,"comment_id":127561131,"body_markdown":"hope someone can help me","body":"hope someone can help me"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1652264895,"post_id":72197033,"comment_id":127562759,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":10590016,"reputation":1,"user_id":7800945,"display_name":"dujingsong"},"score":0,"creation_date":1652265617,"post_id":72197033,"comment_id":127563013,"body_markdown":"JDK: oracle jdk 1.8\nrocketmq: 1 master 2 slave delger 4.7.1\nspring-boot-starter-parent: 2.1.5.RELEAS","body":"JDK: oracle jdk 1.8 rocketmq: 1 master 2 slave delger 4.7.1 spring-boot-starter-parent: 2.1.5.RELEAS"}],"answers":[{"tags":[],"owner":{"account_id":1934432,"reputation":1,"user_id":1743058,"display_name":"Francis Lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675233192,"creation_date":1675233126,"answer_id":75306406,"question_id":72197033,"body_markdown":"use different rocketMQTemplates instance to send same message.\r\n\r\nasyncSend is doing on ThreadPool in rocketMQTemplates, there are lots of threads there, so you can&#39;t send same message(same message use the same propertiy HashMap, not thread-safe) using different rocketMQTemplates. \r\n\r\n","title":"rocketMQTemplate.asyncSend throws ConcurrentModificationException at MessageDecoder.messageProperties2String","body":"<p>use different rocketMQTemplates instance to send same message.</p>\n<p>asyncSend is doing on ThreadPool in rocketMQTemplates, there are lots of threads there, so you can't send same message(same message use the same propertiy HashMap, not thread-safe) using different rocketMQTemplates.</p>\n"}],"owner":{"account_id":10590016,"reputation":1,"user_id":7800945,"display_name":"dujingsong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675233192,"creation_date":1652254132,"question_id":72197033,"body_markdown":"I am using [rocketmq-spring](https://github.com/apache/rocketmq-spring) to send message which version is 2.1.0, sometimes i got ConcurrentModificationException at org.apache.rocketmq.common.message.MessageDecoder.messageProperties2String(MessageDecoder.java:414),the following is a detailed log. Thanks!\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    #[xx, 10.xx.52] INFO  2022-05-07 15:31:11.043 [XNIO-1 task-74, 29de7f06241a3313, 29de7f06241a3313] com.xx.common.IpProducerService.asyncSendMessage:45 - contentMap{refNo=xx, system=xx, ip=null, platformId=xx, userId=xxx}\r\n    #[fp, 10.xx.52] INFO  2022-05-07 15:31:11.043 [XNIO-1 task-74, 29de7f06241a3313, 29de7f06241a3313] com.xx.rocketmq.producer.RocketMqProducer.asyncInfo:19 - -=-=-= [Async Sending Message] -=-=-= \r\n     Topic                = TOPIC_xx_xx\r\n     Tag                   = \r\n     MessageId        = null\r\n     DelayLevel        = 0\r\n     Content            = {&quot;refNo&quot;:&quot;xx&quot;,&quot;system&quot;:&quot;xx&quot;,&quot;platformId&quot;:&quot;xx&quot;,&quot;userId&quot;:&quot;xx&quot;}\r\n\r\n    #[fp, 10.xx.52] ERROR 2022-05-07 15:31:11.044 [AsyncSenderExecutor_3, , ] com.xx.rocketmq.producer.ProduceCallBack.onException:32 - asyncSendMessage caused exception.\r\n    java.util.ConcurrentModificationException: null\r\n    \tat java.util.HashMap$HashIterator.nextNode(HashMap.java:1437)\r\n    \tat java.util.HashMap$EntryIterator.next(HashMap.java:1471)\r\n    \tat java.util.HashMap$EntryIterator.next(HashMap.java:1469)\r\n    \tat org.apache.rocketmq.common.message.MessageDecoder.messageProperties2String(MessageDecoder.java:414)\r\n    \tat org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendKernelImpl(DefaultMQProducerImpl.java:790)\r\n    \tat org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:584)\r\n    \tat org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.access$300(DefaultMQProducerImpl.java:97)\r\n    \tat org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl$4.run(DefaultMQProducerImpl.java:511)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    #[xx, 10.xx.52] INFO  2022-05-07 15:31:11.044 [AsyncSenderExecutor_3, , ] com.xx.common.IpProducerService.handleResult:49 - async produce status is F\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"rocketMQTemplate.asyncSend throws ConcurrentModificationException at MessageDecoder.messageProperties2String","body":"<p>I am using <a href=\"https://github.com/apache/rocketmq-spring\" rel=\"nofollow noreferrer\">rocketmq-spring</a> to send message which version is 2.1.0, sometimes i got ConcurrentModificationException at org.apache.rocketmq.common.message.MessageDecoder.messageProperties2String(MessageDecoder.java:414),the following is a detailed log. Thanks!</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#[xx, 10.xx.52] INFO  2022-05-07 15:31:11.043 [XNIO-1 task-74, 29de7f06241a3313, 29de7f06241a3313] com.xx.common.IpProducerService.asyncSendMessage:45 - contentMap{refNo=xx, system=xx, ip=null, platformId=xx, userId=xxx}\n#[fp, 10.xx.52] INFO  2022-05-07 15:31:11.043 [XNIO-1 task-74, 29de7f06241a3313, 29de7f06241a3313] com.xx.rocketmq.producer.RocketMqProducer.asyncInfo:19 - -=-=-= [Async Sending Message] -=-=-= \n Topic                = TOPIC_xx_xx\n Tag                   = \n MessageId        = null\n DelayLevel        = 0\n Content            = {\"refNo\":\"xx\",\"system\":\"xx\",\"platformId\":\"xx\",\"userId\":\"xx\"}\n\n#[fp, 10.xx.52] ERROR 2022-05-07 15:31:11.044 [AsyncSenderExecutor_3, , ] com.xx.rocketmq.producer.ProduceCallBack.onException:32 - asyncSendMessage caused exception.\njava.util.ConcurrentModificationException: null\n    at java.util.HashMap$HashIterator.nextNode(HashMap.java:1437)\n    at java.util.HashMap$EntryIterator.next(HashMap.java:1471)\n    at java.util.HashMap$EntryIterator.next(HashMap.java:1469)\n    at org.apache.rocketmq.common.message.MessageDecoder.messageProperties2String(MessageDecoder.java:414)\n    at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendKernelImpl(DefaultMQProducerImpl.java:790)\n    at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:584)\n    at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.access$300(DefaultMQProducerImpl.java:97)\n    at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl$4.run(DefaultMQProducerImpl.java:511)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n#[xx, 10.xx.52] INFO  2022-05-07 15:31:11.044 [AsyncSenderExecutor_3, , ] com.xx.common.IpProducerService.handleResult:49 - async produce status is F</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","azure","azure-blob-storage","azure-storage","azure-storage-files"],"comments":[{"owner":{"account_id":12393022,"reputation":5220,"user_id":9034195,"accept_rate":100,"display_name":"NotFound"},"score":0,"creation_date":1675094858,"post_id":75283624,"comment_id":132849582,"body_markdown":"What do you mean with the same &#39;same environment in agent&#39;? Are you running a web app or application on an azure VM that connects to the azure storage account?","body":"What do you mean with the same &#39;same environment in agent&#39;? Are you running a web app or application on an azure VM that connects to the azure storage account?"},{"owner":{"account_id":1754849,"reputation":663,"user_id":1603131,"accept_rate":43,"display_name":"Sorin Penteleiciuc"},"score":0,"creation_date":1675167636,"post_id":75283624,"comment_id":132866255,"body_markdown":"The app and the storage are located on the same environment. The app is running inside Kubernetes. The storage is a dedicated one.","body":"The app and the storage are located on the same environment. The app is running inside Kubernetes. The storage is a dedicated one."},{"owner":{"account_id":12393022,"reputation":5220,"user_id":9034195,"accept_rate":100,"display_name":"NotFound"},"score":0,"creation_date":1675169254,"post_id":75283624,"comment_id":132866802,"body_markdown":"You can try using the overload with the `TokenCredential` to build your client using the `ManagedIdentityCredential` class. Then create a managed identity for your Kubernetes and assign it RBAC permission on the Storage Account resource. I have never tried it on a Kubernetes service so I&#39;m unsure if that&#39;s all it takes.","body":"You can try using the overload with the <code>TokenCredential</code> to build your client using the <code>ManagedIdentityCredential</code> class. Then create a managed identity for your Kubernetes and assign it RBAC permission on the Storage Account resource. I have never tried it on a Kubernetes service so I&#39;m unsure if that&#39;s all it takes."},{"owner":{"account_id":1754849,"reputation":663,"user_id":1603131,"accept_rate":43,"display_name":"Sorin Penteleiciuc"},"score":0,"creation_date":1675169906,"post_id":75283624,"comment_id":132867061,"body_markdown":"Can you please provide a concrete example ? I am still a little confused.","body":"Can you please provide a concrete example ? I am still a little confused."},{"owner":{"account_id":12393022,"reputation":5220,"user_id":9034195,"accept_rate":100,"display_name":"NotFound"},"score":0,"creation_date":1675170434,"post_id":75283624,"comment_id":132867243,"body_markdown":"The following docs explains it well: https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-managed-identity and https://learn.microsoft.com/en-us/java/api/overview/azure/identity-readme?view=azure-java-stable#authenticate-in-azure-with-managed-identity","body":"The following docs explains it well: <a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/authorize-managed-identity\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/storage/blobs/&hellip;</a> and <a href=\"https://learn.microsoft.com/en-us/java/api/overview/azure/identity-readme?view=azure-java-stable#authenticate-in-azure-with-managed-identity\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/java/api/overview/azure/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":25323437,"reputation":5162,"user_id":19144428,"display_name":"Venkatesan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675232793,"creation_date":1675232793,"answer_id":75306372,"question_id":75283624,"body_markdown":"&gt; Is there a way to write the credentials without having to provide a key?\r\n\r\nTo avoid key credential, I agree with @NotFound that you can use **`Tokencredential`** with the [DefaultAzureCredential](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable) method.\r\n\r\nYou need to assign RBAC roles to your storage account for accessing blob storage through identity, The roles are:-\r\n-   Storage-blob-data-contributor(or)\r\n-   Storage-blob-data-owner\r\n\r\n\r\n*Go to portal -&gt; storage accounts -&gt; Access Control (IAM) -&gt;Add -&gt; Add role assignments -&gt; storage-blob-contributor or storage-blob-owner role to the storage account.*\r\n\r\n**Portal:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/QGjUf.png)\r\n\r\n\r\nI tried with sample code to upload a file from the local path to azure blob storage using identity it uploaded successfully. \r\n\r\n**Code:**\r\n\r\n    import com.azure.storage.blob.*;\r\n    import com.azure.core.credential.TokenCredential;\r\n    import com.azure.identity.*;\r\n    \r\n    \r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n           TokenCredential credential = new DefaultAzureCredentialBuilder().build();\r\n           BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\r\n                .endpoint(&quot;https://&lt;storage account name&gt;.blob.core.windows.net/&quot;)\r\n                .credential(credential)\r\n                .buildClient();\r\n                String  containerName = &quot;test&quot;;\r\n            BlobContainerClient  containerClient = blobServiceClient.getBlobContainerClient(containerName);\r\n            String  localPath = &quot;&lt;your local path &gt;&quot;;\r\n            BlobClient  blobClient = containerClient.getBlobClient(&quot;file.json&quot;);\r\n            System.out.println(&quot;\\nUploading to Blob storage as blob:\\n\\t&quot; + blobClient.getBlobUrl());\r\n            blobClient.uploadFromFile(localPath);  \r\n            System.out.println(&quot;Uploaded!!!&quot;);  \r\n        }\r\n    }\r\n\r\n**Console:**\r\n![enter image description here](https://i.stack.imgur.com/OrAQe.png)\r\n\r\n**Portal:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/Usmu0.png)\r\n","title":"Azure sdk Iot Storage without account key same environment in agent","body":"<blockquote>\n<p>Is there a way to write the credentials without having to provide a key?</p>\n</blockquote>\n<p>To avoid key credential, I agree with @NotFound that you can use <strong><code>Tokencredential</code></strong> with the <a href=\"https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable\" rel=\"nofollow noreferrer\">DefaultAzureCredential</a> method.</p>\n<p>You need to assign RBAC roles to your storage account for accessing blob storage through identity, The roles are:-</p>\n<ul>\n<li>Storage-blob-data-contributor(or)</li>\n<li>Storage-blob-data-owner</li>\n</ul>\n<p><em>Go to portal -&gt; storage accounts -&gt; Access Control (IAM) -&gt;Add -&gt; Add role assignments -&gt; storage-blob-contributor or storage-blob-owner role to the storage account.</em></p>\n<p><strong>Portal:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/QGjUf.png\" alt=\"enter image description here\" /></p>\n<p>I tried with sample code to upload a file from the local path to azure blob storage using identity it uploaded successfully.</p>\n<p><strong>Code:</strong></p>\n<pre><code>import com.azure.storage.blob.*;\nimport com.azure.core.credential.TokenCredential;\nimport com.azure.identity.*;\n\n\npublic class App \n{\n    public static void main( String[] args )\n    {\n       TokenCredential credential = new DefaultAzureCredentialBuilder().build();\n       BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\n            .endpoint(&quot;https://&lt;storage account name&gt;.blob.core.windows.net/&quot;)\n            .credential(credential)\n            .buildClient();\n            String  containerName = &quot;test&quot;;\n        BlobContainerClient  containerClient = blobServiceClient.getBlobContainerClient(containerName);\n        String  localPath = &quot;&lt;your local path &gt;&quot;;\n        BlobClient  blobClient = containerClient.getBlobClient(&quot;file.json&quot;);\n        System.out.println(&quot;\\nUploading to Blob storage as blob:\\n\\t&quot; + blobClient.getBlobUrl());\n        blobClient.uploadFromFile(localPath);  \n        System.out.println(&quot;Uploaded!!!&quot;);  \n    }\n}\n</code></pre>\n<p><strong>Console:</strong>\n<img src=\"https://i.stack.imgur.com/OrAQe.png\" alt=\"enter image description here\" /></p>\n<p><strong>Portal:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/Usmu0.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":1754849,"reputation":663,"user_id":1603131,"accept_rate":43,"display_name":"Sorin Penteleiciuc"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75306372,"answer_count":1,"score":0,"last_activity_date":1675232793,"creation_date":1675077302,"question_id":75283624,"body_markdown":"\r\nI have the code from below that works fine. My service and the storage are in the same environment in agent. Is there a way to write the credentials without having to provide a key, hence they are in the same environment in agent ?\r\n```\r\nStorageSharedKeyCredential credential = \r\nnew StorageSharedKeyCredential(accountName, **accountKey**);\r\n\r\nBlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\r\n           .endpoint(endpoint)\r\n           .credential(credential)\r\n           .buildClient();\r\n```","title":"Azure sdk Iot Storage without account key same environment in agent","body":"<p>I have the code from below that works fine. My service and the storage are in the same environment in agent. Is there a way to write the credentials without having to provide a key, hence they are in the same environment in agent ?</p>\n<pre><code>StorageSharedKeyCredential credential = \nnew StorageSharedKeyCredential(accountName, **accountKey**);\n\nBlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\n           .endpoint(endpoint)\n           .credential(credential)\n           .buildClient();\n</code></pre>\n"},{"tags":["java","android","ssl","okhttp","exoplayer2.x"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1587503114,"post_id":61353154,"comment_id":108536932,"body_markdown":"Looks the same as https://stackoverflow.com/a/54785688/115145 -- are you using OCSP stapling?","body":"Looks the same as <a href=\"https://stackoverflow.com/a/54785688/115145\">stackoverflow.com/a/54785688/115145</a> -- are you using OCSP stapling?"},{"owner":{"account_id":1481915,"reputation":12601,"user_id":1542667,"accept_rate":75,"display_name":"Yuri Schimke"},"score":1,"creation_date":1587817814,"post_id":61353154,"comment_id":108661129,"body_markdown":"Any chance the android device has an incorrect time https://stackoverflow.com/a/57180523/1542667","body":"Any chance the android device has an incorrect time <a href=\"https://stackoverflow.com/a/57180523/1542667\">stackoverflow.com/a/57180523/1542667</a>"}],"answers":[{"tags":[],"owner":{"account_id":2429950,"reputation":31,"user_id":2121096,"display_name":"PradatiusD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589702233,"creation_date":1589702233,"answer_id":61848644,"question_id":61353154,"body_markdown":"Thanks for everyone&#39;s help!\r\n\r\nAfter countless searching, I finally learned that [hitch actually automatically manages the retrieval of OCSP staples and it can be configured to attach them](https://info.varnish-software.com/blog/ocsp-stapling-in-hitch).\r\n\r\nAfter our app resurfaced with this issue just now at this obscene hour, I applied the following changes on my RedHat server:\r\n\r\n\r\n1. Create a `/var/lib/hitch-ocsp` directory \r\n2. Set the ownership of `/var/lib/hitch-ocsp` to the `hitch` user\r\n3. Added the following two options to the `/etc/hitch/hitch.conf`\r\n\r\n```\r\nocsp-dir = &quot;/var/lib/hitch-ocsp&quot;\r\nocsp-verify-staple = on\r\n```\r\n4.  Ran `service hitch restart` to rerun hitch and now I started seeing OCSP stapling on my SSL responses whenever I ran it against https://entrust.ssllabs.com/analyze.html\r\n\r\n[![OCSP confirmation][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kcac5.png\r\n\r\nSo far immediately after the change I am now seeing our Android app properly trust these requests, but I&#39;ll post here if the issue resurfaces.\r\n\r\n","title":"Let&#39;s Encrypt + Hitch: Android OkHttp java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date","body":"<p>Thanks for everyone's help!</p>\n\n<p>After countless searching, I finally learned that <a href=\"https://info.varnish-software.com/blog/ocsp-stapling-in-hitch\" rel=\"nofollow noreferrer\">hitch actually automatically manages the retrieval of OCSP staples and it can be configured to attach them</a>.</p>\n\n<p>After our app resurfaced with this issue just now at this obscene hour, I applied the following changes on my RedHat server:</p>\n\n<ol>\n<li>Create a <code>/var/lib/hitch-ocsp</code> directory </li>\n<li>Set the ownership of <code>/var/lib/hitch-ocsp</code> to the <code>hitch</code> user</li>\n<li>Added the following two options to the <code>/etc/hitch/hitch.conf</code></li>\n</ol>\n\n<pre><code>ocsp-dir = \"/var/lib/hitch-ocsp\"\nocsp-verify-staple = on\n</code></pre>\n\n<ol start=\"4\">\n<li>Ran <code>service hitch restart</code> to rerun hitch and now I started seeing OCSP stapling on my SSL responses whenever I ran it against <a href=\"https://entrust.ssllabs.com/analyze.html\" rel=\"nofollow noreferrer\">https://entrust.ssllabs.com/analyze.html</a></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/kcac5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kcac5.png\" alt=\"OCSP confirmation\"></a></p>\n\n<p>So far immediately after the change I am now seeing our Android app properly trust these requests, but I'll post here if the issue resurfaces.</p>\n"},{"tags":[],"owner":{"account_id":5744292,"reputation":301,"user_id":4535930,"accept_rate":55,"display_name":"Bhavesh Butani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675232526,"creation_date":1675232526,"answer_id":75306341,"question_id":61353154,"body_markdown":"In my case, it was enough to just set the proper system time on the device. \r\n(&#39;Settings&#39; &gt; &#39;System&#39; &gt; &#39;Date &amp; Time&#39; &gt; &#39;Automatic date &amp; time&#39;).","title":"Let&#39;s Encrypt + Hitch: Android OkHttp java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date","body":"<p>In my case, it was enough to just set the proper system time on the device.\n('Settings' &gt; 'System' &gt; 'Date &amp; Time' &gt; 'Automatic date &amp; time').</p>\n"}],"owner":{"account_id":2429950,"reputation":31,"user_id":2121096,"display_name":"PradatiusD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1033,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1675232526,"creation_date":1587502805,"question_id":61353154,"body_markdown":"Hi and thank you for helping!\r\n\r\nVery infrequently on our Android application, we get errors that start as  **java.security.cert.CertificateException: Chain validation failed** with then traces to the exception of **Response is unreliable: its validity interval is out-of-date**.  This impacts API calls and media playback (as ExoPlayer 2 uses okhttp).  \r\n\r\nWe manage SSL transactions via Hitch, and acquire our certificates from Let&#39;s Encrypt. What&#39;s odd is that when this issue happens, the certificates still work fine on web, iOS tvOS, and Roku, but not on Android.\r\n\r\nThe error is intermittent, and in a matter of 24-48 hours, it seems this exception no longer happens.  On okhttp I see StackOverflow articles where users suggest adding custom TrustManager class into okhttp that accepts all certificates, but I see that as insecure.\r\n\r\nMy question are how can I properly log what validity interval it&#39;s receiving, vs what it expects to have, and how can I tweak the settings at the Java level to trust beyond that window so that this exception doesn&#39;t happen?\r\n\r\nFor context, here is a stack trace affecting playback.\r\n \r\n```\r\n\r\n2019-10-21 16:42:51.883 31064-32727/com.sbs.lamusica.debug E/ExoPlayerImplInternal: Source error.\r\n    com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to https://interstitials.lamusica.com/lamusica/black-video.mp4\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:194)\r\n        at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:147)\r\n        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:841)\r\n        at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:308)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n        at java.lang.Thread.run(Thread.java:764)\r\n     Caused by: javax.net.ssl.SSLHandshakeException: Chain validation failed\r\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:236)\r\n        at com.android.okhttp.internal.io.RealConnection.connectTls(RealConnection.java:1480)\r\n        at com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:1424)\r\n        at com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:1368)\r\n        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:219)\r\n        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:142)\r\n        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:104)\r\n        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:392)\r\n        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:325)\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:470)\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:127)\r\n        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.connect(DelegatingHttpsURLConnection.java:89)\r\n        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:26)\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:429)\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\r\n        at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:147)&#160;\r\n        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:841)&#160;\r\n        at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:308)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)&#160;\r\n        at java.lang.Thread.run(Thread.java:764)&#160;\r\n     Caused by: java.security.cert.CertificateException: Chain validation failed\r\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\r\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:543)\r\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:564)\r\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:632)\r\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:499)\r\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:422)\r\n        at com.android.org.conscrypt.TrustManagerImpl.getTrustedChainForServer(TrustManagerImpl.java:343)\r\n        at android.security.net.config.NetworkSecurityTrustManager.checkServerTrusted(NetworkSecurityTrustManager.java:94)\r\n        at android.security.net.config.RootTrustManager.checkServerTrusted(RootTrustManager.java:88)\r\n        at com.android.org.conscrypt.Platform.checkServerTrusted(Platform.java:208)\r\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.verifyCertificateChain(ConscryptFileDescriptorSocket.java:426)\r\n        at com.android.org.conscrypt.NativeCrypto.SSL_do_handshake(Native Method)\r\n        at com.android.org.conscrypt.NativeSsl.doHandshake(NativeSsl.java:383)\r\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:231)\r\n        at com.android.okhttp.internal.io.RealConnection.connectTls(RealConnection.java:1480)&#160;\r\n        at com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:1424)&#160;\r\n        at com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:1368)&#160;\r\n        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:219)&#160;\r\n        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:142)&#160;\r\n        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:104)&#160;\r\n        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:392)&#160;\r\n        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:325)&#160;\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:470)&#160;\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:127)&#160;\r\n        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.connect(DelegatingHttpsURLConnection.java:89)&#160;\r\n        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:26)&#160;\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:429)&#160;\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)&#160;\r\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)&#160;\r\n        at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:147)&#160;\r\n        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:841)&#160;\r\n        at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:308)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)&#160;\r\n        at java.lang.Thread.run(Thread.java:764)&#160;\r\n     Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n2019-10-21 16:42:51.886 31064-32727/com.sbs.lamusica.debug E/ExoPlayerImplInternal:     at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\r\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\r\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\r\n        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\r\n        at com.android.org.conscrypt.DelegatingCertPathValidator.engineValidate(DelegatingCertPathValidator.java:44)\r\n        at java.security.cert.CertPathValidator.validate(CertPathValidator.java:301)\r\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\r\n        \t... 34 more\r\n     Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n        at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\r\n        at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\r\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\r\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\r\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\r\n        \t... 40 more\r\n    \tSuppressed: java.security.cert.CertPathValidatorException: Could not determine revocation status\r\n        at sun.security.provider.certpath.RevocationChecker.buildToNewKey(RevocationChecker.java:1092)\r\n        at sun.security.provider.certpath.RevocationChecker.verifyWithSeparateSigningKey(RevocationChecker.java:910)\r\n        at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:577)\r\n        at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:465)\r\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:394)\r\n```\r\n\r\nHere is another example stacktrace affecting an API call.\r\n\r\n```\r\njavax.net.ssl.SSLHandshakeException: Chain validation failed\r\n    at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:236)\r\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.java:320)\r\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.java:284)\r\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.java:169)\r\n    at okhttp3.internal.connection.StreamAllocation.findConnection(StreamAllocation.java:257)\r\n    at okhttp3.internal.connection.StreamAllocation.findHealthyConnection(StreamAllocation.java:135)\r\n    at okhttp3.internal.connection.StreamAllocation.newStream(StreamAllocation.java:114)\r\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:42)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\r\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\r\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\r\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:125)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\r\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:264)\r\n    at okhttp3.RealCall.execute(RealCall.java:93)\r\n    at com.sbs.lamusica.ui.fragment.home.HomePagerFragment.run(HomePagerFragment.java:200)\r\n    at com.sbs.lamusica.ui.fragment.home.HomePagerFragment$FetchLocationsList.doInBackground(HomePagerFragment.java:706)\r\n    at com.sbs.lamusica.ui.fragment.home.HomePagerFragment$FetchLocationsList.doInBackground(HomePagerFragment.java:693)\r\n    at android.os.AsyncTask$2.call(AsyncTask.java:333)\r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:245)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n    at java.lang.Thread.run(Thread.java:764)\r\nCaused by: java.security.cert.CertificateException: Chain validation failed\r\n    at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\r\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:543)\r\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:564)\r\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:632)\r\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:499)\r\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:422)\r\n    at com.android.org.conscrypt.TrustManagerImpl.getTrustedChainForServer(TrustManagerImpl.java:343)\r\n    at android.security.net.config.NetworkSecurityTrustManager.checkServerTrusted(NetworkSecurityTrustManager.java:94)\r\n    at android.security.net.config.RootTrustManager.checkServerTrusted(RootTrustManager.java:88)\r\n    at com.android.org.conscrypt.Platform.checkServerTrusted(Platform.java:208)\r\n    at com.android.org.conscrypt.ConscryptFileDescriptorSocket.verifyCertificateChain(ConscryptFileDescriptorSocket.java:426)\r\n    at com.android.org.conscrypt.NativeCrypto.SSL_do_handshake(Native Method)\r\n    at com.android.org.conscrypt.NativeSsl.doHandshake(NativeSsl.java:383)\r\n    at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:231)\r\n\t... 28 more\r\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\r\n    at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\r\n    at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\r\n    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\r\n    at com.android.org.conscrypt.DelegatingCertPathValidator.engineValidate(DelegatingCertPathValidator.java:44)\r\n    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:301)\r\n    at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\r\n\t... 41 more\r\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\r\n    at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\r\n    at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\r\n    at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\r\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\r\n\t... 47 more\r\n\tSuppressed: java.security.cert.CertPathValidatorException: Could not determine revocation status\r\n    at sun.security.provider.certpath.RevocationChecker.buildToNewKey(RevocationChecker.java:1092)\r\n    at sun.security.provider.certpath.RevocationChecker.verifyWithSeparateSigningKey(RevocationChecker.java:910)\r\n    at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:577)\r\n    at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:465)\r\n    at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:394)\r\n\t\t... 49 more\r\n2019-07-24 23:45:18.793 1473-3146/? V/WindowManager: Relayout Window{87d24e5 u0 com.sbs.lamusica.deb\r\n```","title":"Let&#39;s Encrypt + Hitch: Android OkHttp java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date","body":"<p>Hi and thank you for helping!</p>\n\n<p>Very infrequently on our Android application, we get errors that start as  <strong>java.security.cert.CertificateException: Chain validation failed</strong> with then traces to the exception of <strong>Response is unreliable: its validity interval is out-of-date</strong>.  This impacts API calls and media playback (as ExoPlayer 2 uses okhttp).  </p>\n\n<p>We manage SSL transactions via Hitch, and acquire our certificates from Let's Encrypt. What's odd is that when this issue happens, the certificates still work fine on web, iOS tvOS, and Roku, but not on Android.</p>\n\n<p>The error is intermittent, and in a matter of 24-48 hours, it seems this exception no longer happens.  On okhttp I see StackOverflow articles where users suggest adding custom TrustManager class into okhttp that accepts all certificates, but I see that as insecure.</p>\n\n<p>My question are how can I properly log what validity interval it's receiving, vs what it expects to have, and how can I tweak the settings at the Java level to trust beyond that window so that this exception doesn't happen?</p>\n\n<p>For context, here is a stack trace affecting playback.</p>\n\n<pre><code>\n2019-10-21 16:42:51.883 31064-32727/com.sbs.lamusica.debug E/ExoPlayerImplInternal: Source error.\n    com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to https://interstitials.lamusica.com/lamusica/black-video.mp4\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:194)\n        at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:147)\n        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:841)\n        at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:308)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:764)\n     Caused by: javax.net.ssl.SSLHandshakeException: Chain validation failed\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:236)\n        at com.android.okhttp.internal.io.RealConnection.connectTls(RealConnection.java:1480)\n        at com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:1424)\n        at com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:1368)\n        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:219)\n        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:142)\n        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:104)\n        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:392)\n        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:325)\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:470)\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:127)\n        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.connect(DelegatingHttpsURLConnection.java:89)\n        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:26)\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:429)\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\n        at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:147)\n        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:841)\n        at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:308)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:764)\n     Caused by: java.security.cert.CertificateException: Chain validation failed\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:543)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:564)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:632)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:499)\n        at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:422)\n        at com.android.org.conscrypt.TrustManagerImpl.getTrustedChainForServer(TrustManagerImpl.java:343)\n        at android.security.net.config.NetworkSecurityTrustManager.checkServerTrusted(NetworkSecurityTrustManager.java:94)\n        at android.security.net.config.RootTrustManager.checkServerTrusted(RootTrustManager.java:88)\n        at com.android.org.conscrypt.Platform.checkServerTrusted(Platform.java:208)\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.verifyCertificateChain(ConscryptFileDescriptorSocket.java:426)\n        at com.android.org.conscrypt.NativeCrypto.SSL_do_handshake(Native Method)\n        at com.android.org.conscrypt.NativeSsl.doHandshake(NativeSsl.java:383)\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:231)\n        at com.android.okhttp.internal.io.RealConnection.connectTls(RealConnection.java:1480)\n        at com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:1424)\n        at com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:1368)\n        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:219)\n        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:142)\n        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:104)\n        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:392)\n        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:325)\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:470)\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:127)\n        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.connect(DelegatingHttpsURLConnection.java:89)\n        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:26)\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:429)\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\n        at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\n        at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:147)\n        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:841)\n        at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:308)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:764)\n     Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n2019-10-21 16:42:51.886 31064-32727/com.sbs.lamusica.debug E/ExoPlayerImplInternal:     at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\n        at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\n        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\n        at com.android.org.conscrypt.DelegatingCertPathValidator.engineValidate(DelegatingCertPathValidator.java:44)\n        at java.security.cert.CertPathValidator.validate(CertPathValidator.java:301)\n        at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\n            ... 34 more\n     Caused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n        at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\n        at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\n        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\n            ... 40 more\n        Suppressed: java.security.cert.CertPathValidatorException: Could not determine revocation status\n        at sun.security.provider.certpath.RevocationChecker.buildToNewKey(RevocationChecker.java:1092)\n        at sun.security.provider.certpath.RevocationChecker.verifyWithSeparateSigningKey(RevocationChecker.java:910)\n        at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:577)\n        at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:465)\n        at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:394)\n</code></pre>\n\n<p>Here is another example stacktrace affecting an API call.</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: Chain validation failed\n    at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:236)\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.java:320)\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.java:284)\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.java:169)\n    at okhttp3.internal.connection.StreamAllocation.findConnection(StreamAllocation.java:257)\n    at okhttp3.internal.connection.StreamAllocation.findHealthyConnection(StreamAllocation.java:135)\n    at okhttp3.internal.connection.StreamAllocation.newStream(StreamAllocation.java:114)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:42)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:125)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:264)\n    at okhttp3.RealCall.execute(RealCall.java:93)\n    at com.sbs.lamusica.ui.fragment.home.HomePagerFragment.run(HomePagerFragment.java:200)\n    at com.sbs.lamusica.ui.fragment.home.HomePagerFragment$FetchLocationsList.doInBackground(HomePagerFragment.java:706)\n    at com.sbs.lamusica.ui.fragment.home.HomePagerFragment$FetchLocationsList.doInBackground(HomePagerFragment.java:693)\n    at android.os.AsyncTask$2.call(AsyncTask.java:333)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:245)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n    at java.lang.Thread.run(Thread.java:764)\nCaused by: java.security.cert.CertificateException: Chain validation failed\n    at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:719)\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:543)\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:564)\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrustedRecursive(TrustManagerImpl.java:632)\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:499)\n    at com.android.org.conscrypt.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:422)\n    at com.android.org.conscrypt.TrustManagerImpl.getTrustedChainForServer(TrustManagerImpl.java:343)\n    at android.security.net.config.NetworkSecurityTrustManager.checkServerTrusted(NetworkSecurityTrustManager.java:94)\n    at android.security.net.config.RootTrustManager.checkServerTrusted(RootTrustManager.java:88)\n    at com.android.org.conscrypt.Platform.checkServerTrusted(Platform.java:208)\n    at com.android.org.conscrypt.ConscryptFileDescriptorSocket.verifyCertificateChain(ConscryptFileDescriptorSocket.java:426)\n    at com.android.org.conscrypt.NativeCrypto.SSL_do_handshake(Native Method)\n    at com.android.org.conscrypt.NativeSsl.doHandshake(NativeSsl.java:383)\n    at com.android.org.conscrypt.ConscryptFileDescriptorSocket.startHandshake(ConscryptFileDescriptorSocket.java:231)\n    ... 28 more\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)\n    at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:222)\n    at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:140)\n    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:79)\n    at com.android.org.conscrypt.DelegatingCertPathValidator.engineValidate(DelegatingCertPathValidator.java:44)\n    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:301)\n    at com.android.org.conscrypt.TrustManagerImpl.verifyChain(TrustManagerImpl.java:715)\n    ... 41 more\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n    at sun.security.provider.certpath.OCSPResponse.verify(OCSPResponse.java:619)\n    at sun.security.provider.certpath.RevocationChecker.checkOCSP(RevocationChecker.java:709)\n    at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:363)\n    at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:337)\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)\n    ... 47 more\n    Suppressed: java.security.cert.CertPathValidatorException: Could not determine revocation status\n    at sun.security.provider.certpath.RevocationChecker.buildToNewKey(RevocationChecker.java:1092)\n    at sun.security.provider.certpath.RevocationChecker.verifyWithSeparateSigningKey(RevocationChecker.java:910)\n    at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:577)\n    at sun.security.provider.certpath.RevocationChecker.checkCRLs(RevocationChecker.java:465)\n    at sun.security.provider.certpath.RevocationChecker.check(RevocationChecker.java:394)\n        ... 49 more\n2019-07-24 23:45:18.793 1473-3146/? V/WindowManager: Relayout Window{87d24e5 u0 com.sbs.lamusica.deb\n</code></pre>\n"},{"tags":["java","web-scraping","htmlunit"],"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1675232678,"post_id":75300147,"comment_id":132881776,"body_markdown":"Maybe parts of the page are dynamically created by js - disabling js might be the wrong ideas here. Use page.asXML() to get an idea of the page seen by HtmlUnit.\nIf you like more support open a ticket for HtmlUnit.","body":"Maybe parts of the page are dynamically created by js - disabling js might be the wrong ideas here. Use page.asXML() to get an idea of the page seen by HtmlUnit. If you like more support open a ticket for HtmlUnit."}],"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675232049,"creation_date":1675182409,"question_id":75300147,"body_markdown":"I am trying to webscrape a food store but I can not find the elements in the html file. I can see them in Chrome Inspect elements but when I download get the webcontent with:\r\n\r\n    HtmlPage page = webClient.getPage(url);\r\n    WebResponse response = page.getWebResponse();\r\n    String content = response.getContentAsString();\r\n\r\nI can not see every element which I can see in Chrome Inspect.\r\n\r\nWhat I want to do is for example this url: https://www.coop.se/handla/sok/?q=kvarg\r\n\r\nget the first search result &quot;Kvarg Mild Vanilj&quot; which I can find in the element \r\n\r\n    &lt;h3 class=&quot;ProductTeaser-heading&quot;&gt;Kvarg Mild Vanilj&lt;/h3&gt;\r\n\r\nBut that element is not in the content I got before.\r\nSo when I try:\r\n\r\n    HtmlElement price = (HtmlElement) page.getByXPath(&quot;//h3&quot;).get(0);\r\n\r\nI just got exception like when it not finding it:\r\n\r\n`java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100) ~[na:na]\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106) ~[na:na]\r\n\tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302) ~[na:na]`\r\n\r\nSo my question is, how can I find these elements using HTMLUnit, or are there other libraries for that in java?\r\n\r\n[Here is a picture of the element I trying to get to java application](https://i.stack.imgur.com/fysKn.png)\r\n\r\nTried different Xpath but nothing is finding them, but the same Xpath is working in Chrome inspect\r\n\r\n    final String url = &quot;https://www.coop.se/handla/sok/?q=kvarg&quot;;\r\n\r\n    try (final WebClient webClient = new WebClient()) {\r\n        webClient.getOptions().setJavaScriptEnabled(false);\r\n        webClient.getOptions().setCssEnabled(false);\r\n\r\n        HtmlPage page = webClient.getPage(url);\r\n\r\n        //Findning this one\r\n        HtmlElement input = (HtmlElement) page.getByXPath(&quot;//input&quot;).get(0);\r\n\r\n        //Not finding this one, even if it is in chrome inspect\r\n        HtmlElement price = (HtmlElement) page.getByXPath(&quot;//h3&quot;).get(0);\r\n         \r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n","title":"How to find elements which are not in the html file with HTMLUNIT?","body":"<p>I am trying to webscrape a food store but I can not find the elements in the html file. I can see them in Chrome Inspect elements but when I download get the webcontent with:</p>\n<pre><code>HtmlPage page = webClient.getPage(url);\nWebResponse response = page.getWebResponse();\nString content = response.getContentAsString();\n</code></pre>\n<p>I can not see every element which I can see in Chrome Inspect.</p>\n<p>What I want to do is for example this url: <a href=\"https://www.coop.se/handla/sok/?q=kvarg\" rel=\"nofollow noreferrer\">https://www.coop.se/handla/sok/?q=kvarg</a></p>\n<p>get the first search result &quot;Kvarg Mild Vanilj&quot; which I can find in the element</p>\n<pre><code>&lt;h3 class=&quot;ProductTeaser-heading&quot;&gt;Kvarg Mild Vanilj&lt;/h3&gt;\n</code></pre>\n<p>But that element is not in the content I got before.\nSo when I try:</p>\n<pre><code>HtmlElement price = (HtmlElement) page.getByXPath(&quot;//h3&quot;).get(0);\n</code></pre>\n<p>I just got exception like when it not finding it:</p>\n<p><code>java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0 at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100) ~[na:na] at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106) ~[na:na] at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302) ~[na:na]</code></p>\n<p>So my question is, how can I find these elements using HTMLUnit, or are there other libraries for that in java?</p>\n<p><a href=\"https://i.stack.imgur.com/fysKn.png\" rel=\"nofollow noreferrer\">Here is a picture of the element I trying to get to java application</a></p>\n<p>Tried different Xpath but nothing is finding them, but the same Xpath is working in Chrome inspect</p>\n<pre><code>final String url = &quot;https://www.coop.se/handla/sok/?q=kvarg&quot;;\n\ntry (final WebClient webClient = new WebClient()) {\n    webClient.getOptions().setJavaScriptEnabled(false);\n    webClient.getOptions().setCssEnabled(false);\n\n    HtmlPage page = webClient.getPage(url);\n\n    //Findning this one\n    HtmlElement input = (HtmlElement) page.getByXPath(&quot;//input&quot;).get(0);\n\n    //Not finding this one, even if it is in chrome inspect\n    HtmlElement price = (HtmlElement) page.getByXPath(&quot;//h3&quot;).get(0);\n     \n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","grails","authorize.net","accept.js"],"comments":[{"owner":{"account_id":2992357,"reputation":1252,"user_id":2539691,"accept_rate":58,"display_name":"roanjain"},"score":0,"creation_date":1674985830,"post_id":75273375,"comment_id":132827389,"body_markdown":"Try connecting to the authorize.net server from the remote server using the command line tool curl or telnet to see if the connection can be established.","body":"Try connecting to the authorize.net server from the remote server using the command line tool curl or telnet to see if the connection can be established."},{"owner":{"account_id":380677,"reputation":3656,"user_id":734861,"accept_rate":58,"display_name":"kofhearts"},"score":0,"creation_date":1674990694,"post_id":75273375,"comment_id":132828171,"body_markdown":"@roanjain thanks for the suggestion. i tried it and i have updated my post above. it is still getting curl: (28) Failed to connect to api.authorize.net port 443 after 130673 ms: Connection timed out","body":"@roanjain thanks for the suggestion. i tried it and i have updated my post above. it is still getting curl: (28) Failed to connect to api.authorize.net port 443 after 130673 ms: Connection timed out"},{"owner":{"account_id":380677,"reputation":3656,"user_id":734861,"accept_rate":58,"display_name":"kofhearts"},"score":0,"creation_date":1674991083,"post_id":75273375,"comment_id":132828237,"body_markdown":"@roanjain seems like the issue is only with authorize.net url. i tried curl https://reqbin.com/echo and curl google.com and both returned responses. i wonder why it is failing for authorize.net endpoints?","body":"@roanjain seems like the issue is only with authorize.net url. i tried curl <a href=\"https://reqbin.com/echo\" rel=\"nofollow noreferrer\">reqbin.com/echo</a> and curl google.com and both returned responses. i wonder why it is failing for authorize.net endpoints?"},{"owner":{"account_id":91055,"reputation":218194,"user_id":250259,"accept_rate":93,"display_name":"John Conde"},"score":0,"creation_date":1675002285,"post_id":75273375,"comment_id":132830152,"body_markdown":"Where did you get that URL? Try `https://apitest.authorize.net/rest/v1/`","body":"Where did you get that URL? Try <code>https:&#47;&#47;apitest.authorize.net&#47;rest&#47;v1&#47;</code>"},{"owner":{"account_id":380677,"reputation":3656,"user_id":734861,"accept_rate":58,"display_name":"kofhearts"},"score":0,"creation_date":1675043266,"post_id":75273375,"comment_id":132837064,"body_markdown":"here https://developer.authorize.net/api/reference/index.html if you click on first time user? you can see the api endpoints","body":"here <a href=\"https://developer.authorize.net/api/reference/index.html\" rel=\"nofollow noreferrer\">developer.authorize.net/api/reference/index.html</a> if you click on first time user? you can see the api endpoints"}],"answers":[{"tags":[],"owner":{"account_id":380677,"reputation":3656,"user_id":734861,"accept_rate":58,"display_name":"kofhearts"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675231484,"creation_date":1675231484,"answer_id":75306223,"question_id":75273375,"body_markdown":"Finally got it to work by moving server to another location. Initially i had server in Oregon. Hetzner confirmed that the ips at that location have mostly been blocked by authorize.net.","title":"getting connect timeout when sending request to authorize.net from deployed app(Hetzner)?","body":"<p>Finally got it to work by moving server to another location. Initially i had server in Oregon. Hetzner confirmed that the ips at that location have mostly been blocked by authorize.net.</p>\n"}],"owner":{"account_id":380677,"reputation":3656,"user_id":734861,"accept_rate":58,"display_name":"kofhearts"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75306223,"answer_count":1,"score":0,"last_activity_date":1675231484,"creation_date":1674978762,"question_id":75273375,"body_markdown":"we have a grails 4.0.10 app. we have integrated authorize.net for accepting payments via credit card. I have used accept.js library. \r\n\r\nthe part of code that sends request to authorize.net to charge credit card is as follows\r\n\r\n            def descriptor = params[&#39;dataDescriptor&#39;]\r\n    \t\tdef value = params[&#39;dataValue&#39;]\r\n    \r\n    \r\n    \t\tString firstName = params[AuthNetField.X_FIRST_NAME.fieldName]\r\n    \t\tString lastName = params[AuthNetField.X_LAST_NAME.fieldName]\r\n    \t\tString address = params[AuthNetField.X_ADDRESS.fieldName]\r\n    \t\tString city = params[AuthNetField.X_CITY.fieldName]\r\n    \t\tString state = params[AuthNetField.X_STATE.fieldName]\r\n    \t\tString zip = params[AuthNetField.X_ZIP.fieldName]\r\n    \t\tString country = params[AuthNetField.X_COUNTRY.fieldName]\r\n    \t\tString phone = params[AuthNetField.X_PHONE.fieldName]\r\n    \t\tString email = params[AuthNetField.X_EMAIL.fieldName]\r\n    \r\n    \t\tString apiLoginId = grailsApplication.config.net.authorize.apiLoginId\r\n    \r\n    \r\n    \t\tif (grailsApplication.config.net.authorize.environment == net.authorize.Environment.PRODUCTION){\r\n    \t\t\tApiOperationBase.setEnvironment(Environment.PRODUCTION);\r\n    \t\t}\r\n    \t\telse{\r\n    \t\t\tApiOperationBase.setEnvironment(Environment.SANDBOX);\r\n    \t\t}\r\n    \r\n    \t\tString transactionKey = grailsApplication.config.net.authorize.transactionKey\r\n    \r\n    \r\n    \t\tMerchantAuthenticationType merchantAuthenticationType  = new MerchantAuthenticationType() ;\r\n    \t\tmerchantAuthenticationType.setName(apiLoginId);\r\n    \t\tmerchantAuthenticationType.setTransactionKey(transactionKey);\r\n    \t\tApiOperationBase.setMerchantAuthentication(merchantAuthenticationType);\r\n    \r\n    \t\t// Populate the payment data\r\n    \t\tPaymentType paymentType = new PaymentType();\r\n    \t\tOpaqueDataType OpaqueData = new OpaqueDataType();\r\n    \t\tOpaqueData.setDataDescriptor(descriptor);\r\n    \t\tOpaqueData.setDataValue(value);\r\n    \t\tpaymentType.setOpaqueData(OpaqueData);\r\n    \r\n    \r\n    \t\tCustomerDataType cdt = new CustomerDataType()\r\n    \t\tcdt.setEmail(email)\r\n    \r\n    \t\tCustomerAddressType customerType = new CustomerAddressType()\r\n    \t\tcustomerType.setFirstName(firstName)\r\n    \t\tcustomerType.setLastName(lastName)\r\n    \t\tcustomerType.setAddress(address)\r\n    \t\tcustomerType.setCity(city)\r\n    \t\tcustomerType.setState(state)\r\n    \t\tcustomerType.setZip(zip)\r\n    \t\tcustomerType.setCountry(country)\r\n    \t\tcustomerType.setPhoneNumber(phone)\r\n    \r\n    \t\t// Create the payment transaction request\r\n    \t\tTransactionRequestType txnRequest = new TransactionRequestType();\r\n    \t\ttxnRequest.setTransactionType(TransactionTypeEnum.AUTH_CAPTURE_TRANSACTION.value());\r\n    \t\ttxnRequest.setPayment(paymentType);\r\n    \t\ttxnRequest.setBillTo(customerType)\r\n    \t\ttxnRequest.setCustomer(cdt)\r\n    \r\n    \t\tArrayOfLineItem aol = new ArrayOfLineItem()\r\n    \r\n    \r\n    \t\titemizedOrderEntries.each { io -&gt;\r\n    \r\n    \t\t\tdef parts = io.split(&quot;&lt;\\\\|&gt;&quot;)\r\n    \r\n    \t\t\tLineItemType lit = new LineItemType()\r\n    \t\t\tlit.setItemId(parts[0])\r\n    \t\t\tlit.setName(parts[1])\r\n    \t\t\tlit.setDescription(parts[2])\r\n    \t\t\tlit.setQuantity(parts[3].toBigDecimal())\r\n    \t\t\tlit.setUnitPrice(parts[4].toBigDecimal())\r\n    \t\t\tlit.setTaxable(parts[5].toBoolean())\r\n    \r\n    \r\n    \t\t\taol.lineItem.add(lit)\r\n    \r\n    \r\n    \t\t}\r\n    \r\n    \r\n    \t\ttxnRequest.setLineItems(aol)\r\n    \r\n    \r\n    \t\ttxnRequest.setAmount(total.setScale(2, RoundingMode.CEILING));\r\n    \r\n    \r\n    \t\t// Make the API Request\r\n    \t\tCreateTransactionRequest apiRequest = new CreateTransactionRequest();\r\n    \t\tapiRequest.setTransactionRequest(txnRequest);\r\n    \t\tCreateTransactionController controller = new CreateTransactionController(apiRequest);\r\n    \t\tcontroller.execute();\r\n    \r\n    \r\n    \t\tCreateTransactionResponse tresponse = controller.getApiResponse();\r\n\r\nWhen the app is run locally it can connect to the authorize.net server. \r\n\r\nBut when the app is deplyed to remote server, we are using hetzner servers, i am getting connect timeout. I have pasted the error below.\r\n\r\n    2023-01-28 23:53:17.082 ERROR --- [pool-4-thread-1] net.authorize.util.HttpCallTask          : Http request execute failed: &#39;Connect to apitest.authorize.net:443 [apitest.authorize.net/198.241.206.22] failed: connect timed out&#39;\r\n    2023-01-28 23:53:17.082  WARN --- [pool-4-thread-1] net.authorize.util.HttpCallTask          : Adding ErrorMessage: Code: &#39;org.apache.http.conn.ConnectTimeoutException&#39;, Text: &#39;Connect to apitest.authorize.net:443 [apitest.authorize.net/198.241.206.22] failed: connect timed out&#39;\r\n    2023-01-28 23:53:17.083 ERROR --- [nio-8443-exec-3] n.a.a.controller.base.ApiOperationBase   : Invalid response:&#39;net.authorize.api.contract.v1.ANetApiResponse@6744ad91&#39;\r\n    2023-01-28 23:53:17.091 ERROR --- [nio-8443-exec-3] StackTrace                               : Full Stack Trace:\r\n\r\n \r\n\r\nWhen i run the app locally in my system it can successfully connect to the authorize.net api  but when i run it remotely i.e our web app is hosted at Hetzner server, it gives connect time out error. \r\n\r\ndo you know what is causing this connect timeout?\r\n\r\ni dont seem to find the cause. i appreciate any guide. \r\n\r\nThanks\r\n\r\n\r\n**UPDATE:**\r\n\r\nAs suggested by @roanjain i did curl request to sandbox api endpoint. \r\n\r\nIt took a few minutes and then outputted below\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**UPDATE 2:**\r\n\r\nI sent the same curl request from another server and it worked. So i think the issue is only with hetzner server.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QYEXj.png\r\n  [2]: https://i.stack.imgur.com/poV2k.png","title":"getting connect timeout when sending request to authorize.net from deployed app(Hetzner)?","body":"<p>we have a grails 4.0.10 app. we have integrated authorize.net for accepting payments via credit card. I have used accept.js library.</p>\n<p>the part of code that sends request to authorize.net to charge credit card is as follows</p>\n<pre><code>        def descriptor = params['dataDescriptor']\n        def value = params['dataValue']\n\n\n        String firstName = params[AuthNetField.X_FIRST_NAME.fieldName]\n        String lastName = params[AuthNetField.X_LAST_NAME.fieldName]\n        String address = params[AuthNetField.X_ADDRESS.fieldName]\n        String city = params[AuthNetField.X_CITY.fieldName]\n        String state = params[AuthNetField.X_STATE.fieldName]\n        String zip = params[AuthNetField.X_ZIP.fieldName]\n        String country = params[AuthNetField.X_COUNTRY.fieldName]\n        String phone = params[AuthNetField.X_PHONE.fieldName]\n        String email = params[AuthNetField.X_EMAIL.fieldName]\n\n        String apiLoginId = grailsApplication.config.net.authorize.apiLoginId\n\n\n        if (grailsApplication.config.net.authorize.environment == net.authorize.Environment.PRODUCTION){\n            ApiOperationBase.setEnvironment(Environment.PRODUCTION);\n        }\n        else{\n            ApiOperationBase.setEnvironment(Environment.SANDBOX);\n        }\n\n        String transactionKey = grailsApplication.config.net.authorize.transactionKey\n\n\n        MerchantAuthenticationType merchantAuthenticationType  = new MerchantAuthenticationType() ;\n        merchantAuthenticationType.setName(apiLoginId);\n        merchantAuthenticationType.setTransactionKey(transactionKey);\n        ApiOperationBase.setMerchantAuthentication(merchantAuthenticationType);\n\n        // Populate the payment data\n        PaymentType paymentType = new PaymentType();\n        OpaqueDataType OpaqueData = new OpaqueDataType();\n        OpaqueData.setDataDescriptor(descriptor);\n        OpaqueData.setDataValue(value);\n        paymentType.setOpaqueData(OpaqueData);\n\n\n        CustomerDataType cdt = new CustomerDataType()\n        cdt.setEmail(email)\n\n        CustomerAddressType customerType = new CustomerAddressType()\n        customerType.setFirstName(firstName)\n        customerType.setLastName(lastName)\n        customerType.setAddress(address)\n        customerType.setCity(city)\n        customerType.setState(state)\n        customerType.setZip(zip)\n        customerType.setCountry(country)\n        customerType.setPhoneNumber(phone)\n\n        // Create the payment transaction request\n        TransactionRequestType txnRequest = new TransactionRequestType();\n        txnRequest.setTransactionType(TransactionTypeEnum.AUTH_CAPTURE_TRANSACTION.value());\n        txnRequest.setPayment(paymentType);\n        txnRequest.setBillTo(customerType)\n        txnRequest.setCustomer(cdt)\n\n        ArrayOfLineItem aol = new ArrayOfLineItem()\n\n\n        itemizedOrderEntries.each { io -&gt;\n\n            def parts = io.split(&quot;&lt;\\\\|&gt;&quot;)\n\n            LineItemType lit = new LineItemType()\n            lit.setItemId(parts[0])\n            lit.setName(parts[1])\n            lit.setDescription(parts[2])\n            lit.setQuantity(parts[3].toBigDecimal())\n            lit.setUnitPrice(parts[4].toBigDecimal())\n            lit.setTaxable(parts[5].toBoolean())\n\n\n            aol.lineItem.add(lit)\n\n\n        }\n\n\n        txnRequest.setLineItems(aol)\n\n\n        txnRequest.setAmount(total.setScale(2, RoundingMode.CEILING));\n\n\n        // Make the API Request\n        CreateTransactionRequest apiRequest = new CreateTransactionRequest();\n        apiRequest.setTransactionRequest(txnRequest);\n        CreateTransactionController controller = new CreateTransactionController(apiRequest);\n        controller.execute();\n\n\n        CreateTransactionResponse tresponse = controller.getApiResponse();\n</code></pre>\n<p>When the app is run locally it can connect to the authorize.net server.</p>\n<p>But when the app is deplyed to remote server, we are using hetzner servers, i am getting connect timeout. I have pasted the error below.</p>\n<pre><code>2023-01-28 23:53:17.082 ERROR --- [pool-4-thread-1] net.authorize.util.HttpCallTask          : Http request execute failed: 'Connect to apitest.authorize.net:443 [apitest.authorize.net/198.241.206.22] failed: connect timed out'\n2023-01-28 23:53:17.082  WARN --- [pool-4-thread-1] net.authorize.util.HttpCallTask          : Adding ErrorMessage: Code: 'org.apache.http.conn.ConnectTimeoutException', Text: 'Connect to apitest.authorize.net:443 [apitest.authorize.net/198.241.206.22] failed: connect timed out'\n2023-01-28 23:53:17.083 ERROR --- [nio-8443-exec-3] n.a.a.controller.base.ApiOperationBase   : Invalid response:'net.authorize.api.contract.v1.ANetApiResponse@6744ad91'\n2023-01-28 23:53:17.091 ERROR --- [nio-8443-exec-3] StackTrace                               : Full Stack Trace:\n</code></pre>\n<p>When i run the app locally in my system it can successfully connect to the authorize.net api  but when i run it remotely i.e our web app is hosted at Hetzner server, it gives connect time out error.</p>\n<p>do you know what is causing this connect timeout?</p>\n<p>i dont seem to find the cause. i appreciate any guide.</p>\n<p>Thanks</p>\n<p><strong>UPDATE:</strong></p>\n<p>As suggested by @roanjain i did curl request to sandbox api endpoint.</p>\n<p>It took a few minutes and then outputted below</p>\n<p><a href=\"https://i.stack.imgur.com/QYEXj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QYEXj.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>UPDATE 2:</strong></p>\n<p>I sent the same curl request from another server and it worked. So i think the issue is only with hetzner server.</p>\n<p><a href=\"https://i.stack.imgur.com/poV2k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/poV2k.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["python","java","numpy","matrix","pytorch"],"owner":{"account_id":19096069,"reputation":149,"user_id":13945310,"display_name":"BayanR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675229432,"creation_date":1675229432,"question_id":75306022,"body_markdown":"I&#39;ve noticed Java matrix multiplication is more than 20 times slower than Pytorch or Numpy. Below is some test code which used ejml, but I have also tried other libraries such as colt, etc with even worse results.\r\n\r\n    public static void main(String[] args) {\r\n      var mat1 = fill(new double[15][32]);\r\n      var mat2 = fill(new double[32][25600]);\r\n      var mask2dMat = new SimpleMatrix(mat1);\r\n      var proto2dMat = new SimpleMatrix(mat2);\r\n    \r\n      var ts = System.currentTimeMillis();\r\n      mask2dMat.mult(proto2dMat); // multiply\r\n      System.out.println(System.currentTimeMillis() - ts); // 20ms on my PC\r\n    }\r\n\r\n    private static double[][] fill(double[][] fMat) {\r\n      for (double[] row : fMat) {\r\n        for (int i = 0; i &lt; row.length; i++) {\r\n          row[i] = ThreadLocalRandom.current().nextFloat();\r\n        }\r\n      }\r\n      return fMat;\r\n    }\r\n\r\nThe following is the Pytorch counterpart.\r\n\r\n    mat1 = torch.randn(15, 32)\r\n    mat2 = torch.randn(32, 25600)\r\n    timestamp = int(time.time() * 1000)\r\n    mat1 @ mat2 # multiply\r\n    print(int(time.time() * 1000) - timestamp) # 0ms on same PC\r\n\r\nHow can we achieve similar/same results for Matrix Multiplication as Pytorch or Numpy in Java? 15x32 * 32x25600 are the sizes of the Matricies I will be dealing with.","title":"How do I get pytorch / numpy matrix multiplication speed inside Java? Java is 20x slower than python","body":"<p>I've noticed Java matrix multiplication is more than 20 times slower than Pytorch or Numpy. Below is some test code which used ejml, but I have also tried other libraries such as colt, etc with even worse results.</p>\n<pre><code>public static void main(String[] args) {\n  var mat1 = fill(new double[15][32]);\n  var mat2 = fill(new double[32][25600]);\n  var mask2dMat = new SimpleMatrix(mat1);\n  var proto2dMat = new SimpleMatrix(mat2);\n\n  var ts = System.currentTimeMillis();\n  mask2dMat.mult(proto2dMat); // multiply\n  System.out.println(System.currentTimeMillis() - ts); // 20ms on my PC\n}\n\nprivate static double[][] fill(double[][] fMat) {\n  for (double[] row : fMat) {\n    for (int i = 0; i &lt; row.length; i++) {\n      row[i] = ThreadLocalRandom.current().nextFloat();\n    }\n  }\n  return fMat;\n}\n</code></pre>\n<p>The following is the Pytorch counterpart.</p>\n<pre><code>mat1 = torch.randn(15, 32)\nmat2 = torch.randn(32, 25600)\ntimestamp = int(time.time() * 1000)\nmat1 @ mat2 # multiply\nprint(int(time.time() * 1000) - timestamp) # 0ms on same PC\n</code></pre>\n<p>How can we achieve similar/same results for Matrix Multiplication as Pytorch or Numpy in Java? 15x32 * 32x25600 are the sizes of the Matricies I will be dealing with.</p>\n"},{"tags":["java","websocket","netty"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675363844,"post_id":75306007,"comment_id":132918567,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27672385,"reputation":1,"user_id":21122917,"display_name":"WILDCHAP_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675229200,"creation_date":1675229200,"question_id":75306007,"body_markdown":"In order to save the number of threads, I defined an EventLoopGroup and initialized a Bootstrap with it. Since the uri needs to be passed in when using WebSocketClientHandshakerFactory.newHandshaker to get a handshaker, but the uri is not known before each request, so I have to build Is there a better way to add the handshaker to the pipeline after the connection is successful?\r\n\r\nIs there a code sample","title":"How to perform Websocket handshake after using Netty to establish a connection with the server","body":"<p>In order to save the number of threads, I defined an EventLoopGroup and initialized a Bootstrap with it. Since the uri needs to be passed in when using WebSocketClientHandshakerFactory.newHandshaker to get a handshaker, but the uri is not known before each request, so I have to build Is there a better way to add the handshaker to the pipeline after the connection is successful?</p>\n<p>Is there a code sample</p>\n"},{"tags":["javascript","java","spring-boot","jsx","photoshop-script"],"owner":{"account_id":8784628,"reputation":513,"user_id":7240745,"display_name":"LeandroPL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675228491,"creation_date":1675228491,"question_id":75305935,"body_markdown":"I have a springboot app that calls a .jsx script. It is a simple script, just read a JSON file and print some values on console.\r\nMy problem is when I try to get the output and log on my springboot app. \r\n\r\nWhen I run the script using ExtendToolkit Script, I get the follow info on console:\r\n&gt; Id: 6989996500\r\n\r\n&gt; Result: undefined\r\n\r\nBut, when I run through Springboot, the output is:\r\n&gt; Exit status: 0\r\n\r\n&gt; Output: [TypeQuest] Timestamp=2023-02-01T05:00:19.434 ThreadId=6304 Type=TQ_WARN  Component=TQFontManager Description=&quot;Not using user-specific cache directory; using: C:\\Users\\lnrei\\AppData\\Roaming\\Adobe\\typequest\\.2\\&quot;\r\n\r\nHere is my spring code:\r\n\r\n`\t\t\r\n\r\n        try {\r\n\t\t\tString[] command = {&quot;C:\\\\Program Files\\\\Adobe\\\\Adobe Photoshop 2022\\\\Photoshop.exe&quot;,\r\n\t\t\t\t&quot;-r&quot;, \r\n\t\t\t\t&quot;C:\\\\Users\\\\lnrei\\\\OneDrive\\\\Documentos\\\\Projeto\\\\Photoshop Scripts\\\\scriptPSthumbnail.jsx&quot;};\r\n\t\t\r\n\t\t\t//Process process = new ProcessBuilder(command).start();\r\n\t\t\tProcess process = Runtime.getRuntime().exec(command); \r\n\t\t\t\r\n\t\t\tStringBuilder output = new StringBuilder(); \r\n\t\t\tBufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n\t\t\t\r\n\t\t\tString line;\r\n\t\t\twhile((line = reader.readLine()) != null) \r\n\t\t\t\toutput.append(line + &quot;\\n&quot;);\r\n\t\t\t\r\n\t\t\tint exit = process.waitFor();\r\n\t\t\tSystem.out.println(&quot;Exit status: &quot; + exit);\r\n\t\t\tSystem.out.println(&quot;Output: &quot; + output);\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}`\r\n\r\nAs you can see, I trying to use `process.getInputStream()` to catch the output and sendo to a string.\r\n\r\nHere is my .jsx file:\r\n\r\n`\r\n\t\t\t#include &quot;json2.js&quot;;\r\n\r\n\t\t\tvar contentPath = &quot;C:/Users/lnrei/OneDrive/Documentos/Projeto/content/content.json&quot;;\r\n\t\t\tvar contentFile = new File(contentPath);\r\n\r\n\t\t\tif(contentFile.exists) {\r\n\t\t\t\t\tcontentFile.open(&quot;r&quot;);\r\n\t\t\t\t\tvar jsonStr = contentFile.read ();\r\n\t\t\t\t\tcontentFile.close ();\r\n\t\t\t\t\tvar content = JSON.parse(jsonStr);\r\n\t\t\t\t\t$.writeln (&quot;Id: &quot; + content.matchId)\r\n\t\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t$.writeln (&quot;Error handling the file!&quot;);\r\n\t\t\t}\r\n\r\n\t\t\t$.writeln(); \r\n\t\t\tphotoshop.quit();`","title":"How can I call a photoshop script using a java application and printting the output Javascript console","body":"<p>I have a springboot app that calls a .jsx script. It is a simple script, just read a JSON file and print some values on console.\nMy problem is when I try to get the output and log on my springboot app.</p>\n<p>When I run the script using ExtendToolkit Script, I get the follow info on console:</p>\n<blockquote>\n<p>Id: 6989996500</p>\n</blockquote>\n<blockquote>\n<p>Result: undefined</p>\n</blockquote>\n<p>But, when I run through Springboot, the output is:</p>\n<blockquote>\n<p>Exit status: 0</p>\n</blockquote>\n<blockquote>\n<p>Output: [TypeQuest] Timestamp=2023-02-01T05:00:19.434 ThreadId=6304 Type=TQ_WARN  Component=TQFontManager Description=&quot;Not using user-specific cache directory; using: C:\\Users\\lnrei\\AppData\\Roaming\\Adobe\\typequest.2&quot;</p>\n</blockquote>\n<p>Here is my spring code:</p>\n<p>`</p>\n<pre><code>    try {\n        String[] command = {&quot;C:\\\\Program Files\\\\Adobe\\\\Adobe Photoshop 2022\\\\Photoshop.exe&quot;,\n            &quot;-r&quot;, \n            &quot;C:\\\\Users\\\\lnrei\\\\OneDrive\\\\Documentos\\\\Projeto\\\\Photoshop Scripts\\\\scriptPSthumbnail.jsx&quot;};\n    \n        //Process process = new ProcessBuilder(command).start();\n        Process process = Runtime.getRuntime().exec(command); \n        \n        StringBuilder output = new StringBuilder(); \n        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        \n        String line;\n        while((line = reader.readLine()) != null) \n            output.append(line + &quot;\\n&quot;);\n        \n        int exit = process.waitFor();\n        System.out.println(&quot;Exit status: &quot; + exit);\n        System.out.println(&quot;Output: &quot; + output);\n        \n    } catch (Exception e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }`\n</code></pre>\n<p>As you can see, I trying to use <code>process.getInputStream()</code> to catch the output and sendo to a string.</p>\n<p>Here is my .jsx file:</p>\n<p>`\n#include &quot;json2.js&quot;;</p>\n<pre><code>        var contentPath = &quot;C:/Users/lnrei/OneDrive/Documentos/Projeto/content/content.json&quot;;\n        var contentFile = new File(contentPath);\n\n        if(contentFile.exists) {\n                contentFile.open(&quot;r&quot;);\n                var jsonStr = contentFile.read ();\n                contentFile.close ();\n                var content = JSON.parse(jsonStr);\n                $.writeln (&quot;Id: &quot; + content.matchId)\n                \n        } else {\n            $.writeln (&quot;Error handling the file!&quot;);\n        }\n\n        $.writeln(); \n        photoshop.quit();`\n</code></pre>\n"},{"tags":["java","spring","spring-data"],"comments":[{"owner":{"account_id":201157,"reputation":12723,"user_id":447426,"accept_rate":62,"display_name":"dermoritz"},"score":2,"creation_date":1627992231,"post_id":38785622,"comment_id":121298090,"body_markdown":"where in the docs it says that it will throw an exception? it only say if given id is null it will throw","body":"where in the docs it says that it will throw an exception? it only say if given id is null it will throw"},{"owner":{"account_id":190215,"reputation":2859,"user_id":430035,"accept_rate":71,"display_name":"EhmKah a.k.a. Michael Krau&#223;e"},"score":0,"creation_date":1629548376,"post_id":38785622,"comment_id":121718292,"body_markdown":"you are right. Unfortunately I asked this question five years ago and I can not remember what my problem was. Maybe I wanted to say it throws an exception when entity (not entityId) is null it throws an error. Hopefully it does not confuse you.","body":"you are right. Unfortunately I asked this question five years ago and I can not remember what my problem was. Maybe I wanted to say it throws an exception when entity (not entityId) is null it throws an error. Hopefully it does not confuse you."}],"answers":[{"comments":[{"owner":{"account_id":190215,"reputation":2859,"user_id":430035,"accept_rate":71,"display_name":"EhmKah a.k.a. Michael Krau&#223;e"},"score":0,"creation_date":1470390036,"post_id":38785858,"comment_id":64942418,"body_markdown":"Sorry for asking again. If I write my customRepository I still need the interface? Or can I make it an abstract class which implements Repository interface?","body":"Sorry for asking again. If I write my customRepository I still need the interface? Or can I make it an abstract class which implements Repository interface?"},{"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"score":0,"creation_date":1470390543,"post_id":38785858,"comment_id":64942715,"body_markdown":"@EhmKah Yes you need to add an interface with your custom methods and implement them in a concrete class. The documentation is very clear about this. Take a look.","body":"@EhmKah Yes you need to add an interface with your custom methods and implement them in a concrete class. The documentation is very clear about this. Take a look."},{"owner":{"account_id":448569,"reputation":3796,"user_id":842832,"accept_rate":33,"display_name":"demaniak"},"score":5,"creation_date":1519976342,"post_id":38785858,"comment_id":85134203,"body_markdown":"I fail to see how this answer targets the question about a non-existing entity? The provided ID param is presumably non-null, but there does not exist such an entity in the data store. How does this answer prevent the exception in that case?","body":"I fail to see how this answer targets the question about a non-existing entity? The provided ID param is presumably non-null, but there does not exist such an entity in the data store. How does this answer prevent the exception in that case?"},{"owner":{"account_id":7164076,"reputation":9426,"user_id":5473824,"display_name":"Adrian Baker"},"score":6,"creation_date":1556163947,"post_id":38785858,"comment_id":98346041,"body_markdown":"Although its unfortunately not stated in the javadoc, the org.springframework.data.jpa.repository.support.SimpleJpaRepository implementation throws EmptyResultDataAccessException if the entity doesn&#39;t exist.","body":"Although its unfortunately not stated in the javadoc, the org.springframework.data.jpa.repository.support.SimpleJpaRep&zwnj;&#8203;ository implementation throws EmptyResultDataAccessException if the entity doesn&#39;t exist."},{"owner":{"account_id":1770214,"reputation":6814,"user_id":1615183,"accept_rate":65,"display_name":"Hola Soy Edu Feliz Navidad"},"score":1,"creation_date":1565087135,"post_id":38785858,"comment_id":101232548,"body_markdown":"It makes no sense at all. I cannot understand why this is the right answer.","body":"It makes no sense at all. I cannot understand why this is the right answer."}],"tags":[],"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"comment_count":5,"down_vote_count":8,"up_vote_count":45,"is_accepted":true,"score":37,"last_activity_date":1581001096,"creation_date":1470389320,"answer_id":38785858,"question_id":38785622,"body_markdown":"**Updated Answer (after downvotes)**\r\n\r\nMy original answer (below) is actually wrong: my understanding of the question was influenced also by the missing reference to the `EmptyResultDataAccessException` in the official JavaDoc (as reported by Adrian Baker in his comment).\r\n\r\nSo a better solution to this issue could be the one suggested by Yamashiro Rion\r\n\r\n    if (repository.existsById(entityId)) {\r\n        repository.deleteById(entityId);\r\n    }\r\n\r\nor this one (without the `if`, but probably worse performing):\r\n\r\n    repository.findById(entityId)\r\n        .map(repository::delete)\r\n\r\n---\r\n\r\n**Original (Wrong) Answer**\r\n\r\nJavaDocs says that an `IllegalArgumentException` will be thrown if the provided argument (id, entity, `Iterable&lt;T&gt;`) is null and not *if entity does not exsits*.\r\n\r\nIf you need to avoid the `IllegalArgumentException` you could implement a custom delete method that checks `id != null`:\r\n\r\n    public void customDelete(ID id) {\r\n        if(id != null){\r\n            this.delete(id);\r\n        }\r\n    }\r\n\r\nTake a look to [this docs section][1] if you don&#39;t know how to add *&quot;Custom implementations for Spring Data repositories&quot;*\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations\r\n\r\n\r\n","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p><strong>Updated Answer (after downvotes)</strong></p>\n\n<p>My original answer (below) is actually wrong: my understanding of the question was influenced also by the missing reference to the <code>EmptyResultDataAccessException</code> in the official JavaDoc (as reported by Adrian Baker in his comment).</p>\n\n<p>So a better solution to this issue could be the one suggested by Yamashiro Rion</p>\n\n<pre><code>if (repository.existsById(entityId)) {\n    repository.deleteById(entityId);\n}\n</code></pre>\n\n<p>or this one (without the <code>if</code>, but probably worse performing):</p>\n\n<pre><code>repository.findById(entityId)\n    .map(repository::delete)\n</code></pre>\n\n<hr>\n\n<p><strong>Original (Wrong) Answer</strong></p>\n\n<p>JavaDocs says that an <code>IllegalArgumentException</code> will be thrown if the provided argument (id, entity, <code>Iterable&lt;T&gt;</code>) is null and not <em>if entity does not exsits</em>.</p>\n\n<p>If you need to avoid the <code>IllegalArgumentException</code> you could implement a custom delete method that checks <code>id != null</code>:</p>\n\n<pre><code>public void customDelete(ID id) {\n    if(id != null){\n        this.delete(id);\n    }\n}\n</code></pre>\n\n<p>Take a look to <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations\" rel=\"noreferrer\">this docs section</a> if you don't know how to add <em>\"Custom implementations for Spring Data repositories\"</em></p>\n"},{"tags":[],"owner":{"account_id":8435285,"reputation":1129,"user_id":6329631,"display_name":"Elgayed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470389425,"creation_date":1470389425,"answer_id":38785908,"question_id":38785622,"body_markdown":"Override the method :\r\n\r\n    @Transactional\r\n    @Override\r\n    \tpublic void delete(ID id) {\r\n    \t\tT entity = findOne(id);\r\n    \t\tif (entity == null) {\r\n              //do something instead of throwing exception ex:\r\n              //syso entity does not exist ; return;\r\n    \t\t}\r\n    \t\tem.remove(em.merge(entity));\r\n    \t}","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>Override the method :</p>\n\n<pre><code>@Transactional\n@Override\n    public void delete(ID id) {\n        T entity = findOne(id);\n        if (entity == null) {\n          //do something instead of throwing exception ex:\n          //syso entity does not exist ; return;\n        }\n        em.remove(em.merge(entity));\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":401852,"reputation":3650,"user_id":768656,"accept_rate":96,"display_name":"Benjamin Maurer"},"score":2,"creation_date":1566556697,"post_id":46876558,"comment_id":101702784,"body_markdown":"There is no need to make that a native Query, JPQL can do bulk delete.","body":"There is no need to make that a native Query, JPQL can do bulk delete."},{"owner":{"account_id":8608092,"reputation":1207,"user_id":6447529,"display_name":"Uri Loya"},"score":8,"creation_date":1593586379,"post_id":46876558,"comment_id":110829177,"body_markdown":"Looks like this is the only valid answer, the rest has race conditions","body":"Looks like this is the only valid answer, the rest has race conditions"}],"tags":[],"owner":{"account_id":10003010,"reputation":187,"user_id":7398356,"display_name":"C&#233;dric Marion"},"comment_count":2,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1561022416,"creation_date":1508690066,"answer_id":46876558,"question_id":38785622,"body_markdown":"A viable solution that requires less code is to add a new method to the repository interface like this:\r\n\r\n    // @Modifying is necessary depending on your version of Spring\r\n    @Modifying\r\n    @Query(nativeQuery=true, value=&quot;DELETE FROM MY_TABLE WHERE ID = ?1&quot;)\r\n    public void deleteById(IdPrimitiveType id);`\r\n\r\n--&gt; to be tested if this can used with JPQL instead of native SQL to allow more complex id types than the default ones (int, long, String, ...)","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>A viable solution that requires less code is to add a new method to the repository interface like this:</p>\n\n<pre><code>// @Modifying is necessary depending on your version of Spring\n@Modifying\n@Query(nativeQuery=true, value=\"DELETE FROM MY_TABLE WHERE ID = ?1\")\npublic void deleteById(IdPrimitiveType id);`\n</code></pre>\n\n<p>--> to be tested if this can used with JPQL instead of native SQL to allow more complex id types than the default ones (int, long, String, ...)</p>\n"},{"tags":[],"owner":{"account_id":12246558,"reputation":119,"user_id":8938079,"display_name":" "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561116086,"creation_date":1561116086,"answer_id":56702461,"question_id":38785622,"body_markdown":"I used @SQLDelete annotation to override default Hibernate DELETE method and to suppress Exception throwing:\r\n\r\n    @javax.persistence.Entity\r\n    @Table(name = &quot;mytable&quot;)\r\n    @Proxy(lazy = false)\r\n    @SQLDelete(\r\n            sql =\r\n            &quot;DELETE FROM mytable &quot; +\r\n            &quot;WHERE my_id = ?&quot;\r\n    )\r\n    public class MyTable {\r\n      @javax.persistence.Column(name = &quot;my_id&quot;, nullable = false)\r\n      @Id\r\n      private Long id;\r\n    ...\r\n    }\r\n\r\nthen hibernate automatically substitutes the &#39;?&#39; in prepared statement with actual id of MyTable object, which is mapped to SQL field &#39;my_id&#39; of table\r\n\r\nIn this case no exception will be thrown if the record in table does not exist, only silently deletes 0 rows, as in plain SQL DELETE query","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>I used @SQLDelete annotation to override default Hibernate DELETE method and to suppress Exception throwing:</p>\n\n<pre><code>@javax.persistence.Entity\n@Table(name = \"mytable\")\n@Proxy(lazy = false)\n@SQLDelete(\n        sql =\n        \"DELETE FROM mytable \" +\n        \"WHERE my_id = ?\"\n)\npublic class MyTable {\n  @javax.persistence.Column(name = \"my_id\", nullable = false)\n  @Id\n  private Long id;\n...\n}\n</code></pre>\n\n<p>then hibernate automatically substitutes the '?' in prepared statement with actual id of MyTable object, which is mapped to SQL field 'my_id' of table</p>\n\n<p>In this case no exception will be thrown if the record in table does not exist, only silently deletes 0 rows, as in plain SQL DELETE query</p>\n"},{"comments":[{"owner":{"account_id":1770214,"reputation":6814,"user_id":1615183,"accept_rate":65,"display_name":"Hola Soy Edu Feliz Navidad"},"score":0,"creation_date":1565086895,"post_id":57051207,"comment_id":101232428,"body_markdown":"This seems to be the better answer, no usage of native queries, no try-catch and very simple.","body":"This seems to be the better answer, no usage of native queries, no try-catch and very simple."},{"owner":{"account_id":4579118,"reputation":989,"user_id":3716733,"display_name":"Micha Chilczuk"},"score":6,"creation_date":1577926017,"post_id":57051207,"comment_id":105282906,"body_markdown":"It may throw an exception as well in case there is more than one thread in use (lets be honest, almost all systems are multithreaded). Entity may be deleted by some other thread after &#39;if&#39; statement.","body":"It may throw an exception as well in case there is more than one thread in use (lets be honest, almost all systems are multithreaded). Entity may be deleted by some other thread after &#39;if&#39; statement."},{"owner":{"account_id":6496784,"reputation":2573,"user_id":5029143,"accept_rate":82,"display_name":"SeaBiscuit"},"score":0,"creation_date":1578607874,"post_id":57051207,"comment_id":105504410,"body_markdown":"This solution will eventually throw EmptyResultDataAccessException.","body":"This solution will eventually throw EmptyResultDataAccessException."},{"owner":{"account_id":7929172,"reputation":1797,"user_id":6059506,"accept_rate":77,"display_name":"theprogrammer"},"score":0,"creation_date":1651165985,"post_id":57051207,"comment_id":127304974,"body_markdown":"@MichaChilczuk What if this whole code block was enclosed in a `@Transactional` annotation? It surely will run in a same thread right? Then there should not be this exception","body":"@MichaChilczuk What if this whole code block was enclosed in a <code>@Transactional</code> annotation? It surely will run in a same thread right? Then there should not be this exception"},{"owner":{"account_id":4579118,"reputation":989,"user_id":3716733,"display_name":"Micha Chilczuk"},"score":0,"creation_date":1651225024,"post_id":57051207,"comment_id":127318477,"body_markdown":"@theprogrammer Probably it will run on the same thread but it is not the case. This code block may be run concurrently even on single threaded system and `@Transactional` does not create any thread synchronization by default (afaik). Probably some pessimistic locking should be added.","body":"@theprogrammer Probably it will run on the same thread but it is not the case. This code block may be run concurrently even on single threaded system and <code>@Transactional</code> does not create any thread synchronization by default (afaik). Probably some pessimistic locking should be added."}],"tags":[],"owner":{"account_id":5630551,"reputation":1846,"user_id":4457630,"display_name":"Yamashiro Rion"},"comment_count":5,"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1563258420,"creation_date":1563258420,"answer_id":57051207,"question_id":38785622,"body_markdown":"With `JpaRepository` you can easily delete an entity if it exists. In this example `PostsRepository` extends `JpaRepository`:\r\n\r\n    if (postsRepository.existsById(postId)) {\r\n        postsRepository.deleteById(postId);\r\n    }","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>With <code>JpaRepository</code> you can easily delete an entity if it exists. In this example <code>PostsRepository</code> extends <code>JpaRepository</code>:</p>\n\n<pre><code>if (postsRepository.existsById(postId)) {\n    postsRepository.deleteById(postId);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16838507,"reputation":1504,"user_id":12174440,"display_name":"turong"},"score":0,"creation_date":1606373152,"post_id":59045030,"comment_id":114945666,"body_markdown":"We should not throw not found exception when the id not found, since there maybe a cheat to check whether this ID exists in your information system or not. That&#39;s not safe.","body":"We should not throw not found exception when the id not found, since there maybe a cheat to check whether this ID exists in your information system or not. That&#39;s not safe."},{"owner":{"account_id":2512916,"reputation":2168,"user_id":2184946,"accept_rate":59,"display_name":"Harsha Jayamanna"},"score":0,"creation_date":1606649906,"post_id":59045030,"comment_id":115019066,"body_markdown":"What do you mean by a cheat?  existsById needs to be implemented in the CrudRepository. How come it is a cheat?","body":"What do you mean by a cheat?  existsById needs to be implemented in the CrudRepository. How come it is a cheat?"},{"owner":{"account_id":16838507,"reputation":1504,"user_id":12174440,"display_name":"turong"},"score":0,"creation_date":1607198721,"post_id":59045030,"comment_id":115199070,"body_markdown":"agreed that the existsById  from CrudRepository, but when we use it and throw pur own defined the EntityNotFoundExceptionById, that&#39;s programmatically unsafe.","body":"agreed that the existsById  from CrudRepository, but when we use it and throw pur own defined the EntityNotFoundExceptionById, that&#39;s programmatically unsafe."},{"owner":{"account_id":11514885,"reputation":631,"user_id":8438513,"accept_rate":70,"display_name":"HowToTellAChild"},"score":0,"creation_date":1683579883,"post_id":59045030,"comment_id":134385662,"body_markdown":"But this code isn&#39;t good. You are throwing EntityNotFoundExceptionById if the entity is found, which is a wrong business logic. At the other hand you didn&#39;t add anything to the original question, just used other&#39;s code solution and wrapped into an exception handler (which wasn&#39;t asked).","body":"But this code isn&#39;t good. You are throwing EntityNotFoundExceptionById if the entity is found, which is a wrong business logic. At the other hand you didn&#39;t add anything to the original question, just used other&#39;s code solution and wrapped into an exception handler (which wasn&#39;t asked)."}],"tags":[],"owner":{"account_id":2512916,"reputation":2168,"user_id":2184946,"accept_rate":59,"display_name":"Harsha Jayamanna"},"comment_count":4,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1574750083,"creation_date":1574750083,"answer_id":59045030,"question_id":38785622,"body_markdown":"I used bellow method to throw meaningful exception if the entity was not found.\r\n\r\n\r\n    if (postsRepository.existsById(postId)) {\r\n        throw new EntityNotFoundExceptionById(&quot;Invlaid Id was provided&quot;);\r\n    }\r\n    \r\n    postsRepository.deleteById(postId);\r\n    \r\n\r\n\r\nEntityNotFoundExceptionById Class\r\n    \r\n    @ResponseStatus(HttpStatus.NOT_FOUND)\r\n    public class EntityNotFoundExceptionById extends RuntimeException {\r\n    \r\n        public EntityNotFoundExceptionById(String message) {\r\n    \t\tsuper(message);\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>I used bellow method to throw meaningful exception if the entity was not found.</p>\n\n<pre><code>if (postsRepository.existsById(postId)) {\n    throw new EntityNotFoundExceptionById(\"Invlaid Id was provided\");\n}\n\npostsRepository.deleteById(postId);\n</code></pre>\n\n<p>EntityNotFoundExceptionById Class</p>\n\n<pre><code>@ResponseStatus(HttpStatus.NOT_FOUND)\npublic class EntityNotFoundExceptionById extends RuntimeException {\n\n    public EntityNotFoundExceptionById(String message) {\n        super(message);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11514885,"reputation":631,"user_id":8438513,"accept_rate":70,"display_name":"HowToTellAChild"},"score":0,"creation_date":1683579957,"post_id":63097647,"comment_id":134385677,"body_markdown":"You didn&#39;t add anything more here compared to other solution. Just a bulk delete solution which was not asked.","body":"You didn&#39;t add anything more here compared to other solution. Just a bulk delete solution which was not asked."}],"tags":[],"owner":{"account_id":9229376,"reputation":902,"user_id":6856020,"display_name":"Supreet Singh"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1595750883,"creation_date":1595750883,"answer_id":63097647,"question_id":38785622,"body_markdown":"If you just have to delete with a single Id you can do it this way.\r\n\r\n    if(repsoitory.existsById(id)){ \r\n       repository.deleteById(id)\r\n    }\r\n\r\nIf you have a list of ids to delete what you can do is with java 8\r\n\r\n \r\n\r\n     List&lt;Long&gt; ids=new ArrayList&lt;&gt;();\r\n      ids.stream().filter(id-&gt;repository.existsById(id))\r\n                  .forEach(id-&gt;repository.deleteById(id));\r\n\r\n","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>If you just have to delete with a single Id you can do it this way.</p>\n<pre><code>if(repsoitory.existsById(id)){ \n   repository.deleteById(id)\n}\n</code></pre>\n<p>If you have a list of ids to delete what you can do is with java 8</p>\n<pre><code> List&lt;Long&gt; ids=new ArrayList&lt;&gt;();\n  ids.stream().filter(id-&gt;repository.existsById(id))\n              .forEach(id-&gt;repository.deleteById(id));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12466336,"reputation":368,"user_id":9076147,"display_name":"Artem"},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1612188920,"creation_date":1612188920,"answer_id":65994265,"question_id":38785622,"body_markdown":"In your repository you shall define the method with return type `Integer`:\r\n```java\r\nInteger deleteMyEntityById(Long id);\r\n```\r\nIf entity to delete doesn&#39;t exist, your method return 0 or 1 if the entity has been deleted.","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>In your repository you shall define the method with return type <code>Integer</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer deleteMyEntityById(Long id);\n</code></pre>\n<p>If entity to delete doesn't exist, your method return 0 or 1 if the entity has been deleted.</p>\n"},{"comments":[{"owner":{"account_id":9163544,"reputation":1605,"user_id":6814073,"accept_rate":43,"display_name":"Peter Lustig"},"score":3,"creation_date":1673193094,"post_id":69009273,"comment_id":132438407,"body_markdown":"This doesn&#39;t work. And the `deleteAllById` method requires a list","body":"This doesn&#39;t work. And the <code>deleteAllById</code> method requires a list"},{"owner":{"account_id":10412153,"reputation":117,"user_id":7677238,"display_name":"wkgcass"},"score":1,"creation_date":1675062161,"post_id":69009273,"comment_id":132839510,"body_markdown":"@PeterLustig it works, I&#39;m using this everywhere in my company project. I think you didn&#39;t even try the code before commenting.","body":"@PeterLustig it works, I&#39;m using this everywhere in my company project. I think you didn&#39;t even try the code before commenting."},{"owner":{"account_id":10412153,"reputation":117,"user_id":7677238,"display_name":"wkgcass"},"score":0,"creation_date":1675063155,"post_id":69009273,"comment_id":132839719,"body_markdown":"More info about how I use this solution: I create an interface called BaseDao&lt;T, ID&gt;, which extends Repository&lt;T, ID&gt;, annotate it with NoRepositoryBean, add a method &quot;fun deleteAllById(id: ID)&quot; to it, let XxxDao extends the BaseDao&lt;Xxx, String&gt;. If you don&#39;t want the BaseDao, just add this method to your concrete DAO interfaces. This is very simple and basic.","body":"More info about how I use this solution: I create an interface called BaseDao&lt;T, ID&gt;, which extends Repository&lt;T, ID&gt;, annotate it with NoRepositoryBean, add a method &quot;fun deleteAllById(id: ID)&quot; to it, let XxxDao extends the BaseDao&lt;Xxx, String&gt;. If you don&#39;t want the BaseDao, just add this method to your concrete DAO interfaces. This is very simple and basic."},{"owner":{"account_id":9163544,"reputation":1605,"user_id":6814073,"accept_rate":43,"display_name":"Peter Lustig"},"score":0,"creation_date":1675284675,"post_id":69009273,"comment_id":132898219,"body_markdown":"The question was already answered. Why should I provide another one? A method named `deleteAllById` which only deletes a single entity and takes a single ID is misleading in many ways. In addition you overload a method of the CrudRepository with a different behaviour. This solution wouldn&#39;t pass any code review. I would recommend to read Uncle Bob&#39;s Clean Code instead of going ham here over a downvote.","body":"The question was already answered. Why should I provide another one? A method named <code>deleteAllById</code> which only deletes a single entity and takes a single ID is misleading in many ways. In addition you overload a method of the CrudRepository with a different behaviour. This solution wouldn&#39;t pass any code review. I would recommend to read Uncle Bob&#39;s Clean Code instead of going ham here over a downvote."}],"tags":[],"owner":{"account_id":10412153,"reputation":117,"user_id":7677238,"display_name":"wkgcass"},"comment_count":4,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1675228400,"creation_date":1630480434,"answer_id":69009273,"question_id":38785622,"body_markdown":"Very simple solution: adding `All` to the method name.\r\n\r\nUse `void deleteAllById(ID id)` instead of `delete(ID) or deleteById(ID)`.\r\n\r\nThis method should be defined by yourself, it does not come from spring built in `CRUDRepository`.\r\n\r\n&gt; This solution works, but whether this is compliant with spring data specification, see the comments and judge it yourself.","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>Very simple solution: adding <code>All</code> to the method name.</p>\n<p>Use <code>void deleteAllById(ID id)</code> instead of <code>delete(ID) or deleteById(ID)</code>.</p>\n<p>This method should be defined by yourself, it does not come from spring built in <code>CRUDRepository</code>.</p>\n<blockquote>\n<p>This solution works, but whether this is compliant with spring data specification, see the comments and judge it yourself.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13304183,"reputation":1,"user_id":9604644,"display_name":"Ihnat Mikhalkovich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657715375,"creation_date":1657715375,"answer_id":72966310,"question_id":38785622,"body_markdown":"use \r\n\r\n`repository.deleteAllByIdInBatch(ids);`\r\n\r\nit&#39;s working in the same way as \r\n\r\n`repository.deleteAllById(ids);`\r\n\r\nbut without throwing exception it an `id` is absent in the db","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>use</p>\n<p><code>repository.deleteAllByIdInBatch(ids);</code></p>\n<p>it's working in the same way as</p>\n<p><code>repository.deleteAllById(ids);</code></p>\n<p>but without throwing exception it an <code>id</code> is absent in the db</p>\n"}],"owner":{"account_id":190215,"reputation":2859,"user_id":430035,"accept_rate":71,"display_name":"EhmKah a.k.a. Michael Krau&#223;e"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57950,"favorite_count":0,"down_vote_count":1,"up_vote_count":51,"accepted_answer_id":38785858,"answer_count":10,"score":50,"last_activity_date":1675228400,"creation_date":1470388633,"question_id":38785622,"body_markdown":"I am using SpringData&#39;s repository. If I try to delete an entity via an ID which does not exist or never existed it throws an exception. Since I do not want to check whether the entity exists before I delete it, it would be nice that it would fail silently. It would make it easier because the observable behavior is the same - after the call the entity does not exists anymore. Whether it has been deleted or never existed, I do not care.\r\n\r\nIs there a way to modify default behavior of `delete(EntityId)` so it won&#39;t throw an exception, if entity does not exsist?\r\n\r\n[Documentation of SpringData&#39;s delete][1] says that it will throw an exception if an entity does not exist.\r\n\r\n  [1]: http://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html#delete-java.lang.Iterable","title":"How to I tell a Springdata-repository&#39;s delete method to not throw an exception if an entity does not exists?","body":"<p>I am using SpringData's repository. If I try to delete an entity via an ID which does not exist or never existed it throws an exception. Since I do not want to check whether the entity exists before I delete it, it would be nice that it would fail silently. It would make it easier because the observable behavior is the same - after the call the entity does not exists anymore. Whether it has been deleted or never existed, I do not care.</p>\n\n<p>Is there a way to modify default behavior of <code>delete(EntityId)</code> so it won't throw an exception, if entity does not exsist?</p>\n\n<p><a href=\"http://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html#delete-java.lang.Iterable\" rel=\"noreferrer\">Documentation of SpringData's delete</a> says that it will throw an exception if an entity does not exist.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":1,"creation_date":1675228464,"post_id":75305897,"comment_id":132881203,"body_markdown":"Due to the lockdown on reflection started in Android Pie, you can&#39;t use the old version of the Calligraphy library on any Android version since then. There&#39;s a Calligraphy v3 that you&#39;d need to use instead: https://stackoverflow.com/q/57495384. Or, you could just remove it, or possibly replace it with font resources from androidx: https://developer.android.com/develop/ui/views/text-and-emoji/fonts-in-xml.","body":"Due to the lockdown on reflection started in Android Pie, you can&#39;t use the old version of the Calligraphy library on any Android version since then. There&#39;s a Calligraphy v3 that you&#39;d need to use instead: <a href=\"https://stackoverflow.com/q/57495384\">stackoverflow.com/q/57495384</a>. Or, you could just remove it, or possibly replace it with font resources from androidx: <a href=\"https://developer.android.com/develop/ui/views/text-and-emoji/fonts-in-xml\" rel=\"nofollow noreferrer\">developer.android.com/develop/ui/views/text-and-emoji/&hellip;</a>."}],"owner":{"account_id":26279773,"reputation":31,"user_id":19948408,"display_name":"Lovish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675228034,"creation_date":1675228034,"question_id":75305897,"body_markdown":"I&#39;m testing the new support library leanback to design apps for TV, and i have a error ever android try to inflate the BrowseFragment and it throws this exception and don&#39;t know how to solve it. Thank you so much for your help.\r\n\r\nError -\r\n\r\n```\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.directsportsnetwork.tv/com.directsportsnetwork.tv.ui.TeamSclActivity}: android.view.InflateException: Binary XML file line #67 in com.directsportsnetwork.tv:layout/activity_teamscl: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3449)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n     Caused by: android.view.InflateException: Binary XML file line #67 in com.directsportsnetwork.tv:layout/activity_teamscl: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\r\n     Caused by: android.view.InflateException: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\r\n     Caused by: android.view.InflateException: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\r\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Object java.lang.reflect.Field.get(java.lang.Object)&#39; on a null object reference\r\n        at uk.co.chrisjenx.calligraphy.ReflectionUtils.getValue(ReflectionUtils.java:29)\r\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.createCustomViewInternal(CalligraphyLayoutInflater.java:203)\r\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.access$000(CalligraphyLayoutInflater.java:20)\r\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater$PrivateWrapperFactory2.onCreateView(CalligraphyLayoutInflater.java:302)\r\n        at android.view.LayoutInflater$FactoryMerger.onCreateView(LayoutInflater.java:237)\r\n        at android.view.LayoutInflater.tryCreateView(LayoutInflater.java:1067)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:995)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\r\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1121)\r\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1082)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:680)\r\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.inflate(CalligraphyLayoutInflater.java:60)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:532)\r\n        at androidx.leanback.app.BrowseFragment.onCreateView(BrowseFragment.java:1318)\r\n        at android.app.Fragment.performCreateView(Fragment.java:2505)\r\n        at android.app.FragmentManagerImpl.ensureInflatedFragmentView(FragmentManager.java:1491)\r\n        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1274)\r\n        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1486)\r\n        at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1728)\r\nE/AndroidRuntime:     at android.app.FragmentManagerImpl.onCreateView(FragmentManager.java:3562)\r\n        at android.app.FragmentController.onCreateView(FragmentController.java:104)\r\n        at android.app.Activity.onCreateView(Activity.java:7112)\r\n        at androidx.fragment.app.FragmentActivity.onCreateView(FragmentActivity.java:229)\r\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater$PrivateWrapperFactory2.onCreateView(CalligraphyLayoutInflater.java:303)\r\n        at android.view.LayoutInflater$FactoryMerger.onCreateView(LayoutInflater.java:237)\r\n        at android.view.LayoutInflater.tryCreateView(LayoutInflater.java:1067)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:995)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\r\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1121)\r\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1082)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:680)\r\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.inflate(CalligraphyLayoutInflater.java:60)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:532)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:479)\r\n        at android.transition.Scene.enter(Scene.java:182)\r\n        at com.android.internal.policy.PhoneWindow.transitionTo(PhoneWindow.java:522)\r\n        at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:453)\r\n        at android.app.Activity.setContentView(Activity.java:3468)\r\n        at androidx.activity.ComponentActivity.setContentView(ComponentActivity.java:448)\r\n        at com.directsportsnetwork.tv.ui.TeamSclActivity.onCreate(TeamSclActivity.java:55)\r\n        at android.app.Activity.performCreate(Activity.java:8000)\r\n        at android.app.Activity.performCreate(Activity.java:7984)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\n\r\n\r\nMy Activity code is -\r\n\r\n``` \r\npackage com.directsportsnetwork.tv.ui;\r\n\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.view.KeyEvent;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\n\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport com.directsportsnetwork.tv.R;\r\nimport com.directsportsnetwork.tv.api.DeviceLogManager;\r\nimport com.directsportsnetwork.tv.api.Utils;\r\n\r\nimport org.json.JSONArray;\r\n\r\nimport java.util.HashMap;\r\n\r\nimport uk.co.chrisjenx.calligraphy.CalligraphyContextWrapper;\r\n\r\npublic class TeamSclActivity extends FragmentActivity {\r\n\r\n    private String TAG = TeamSclActivity.class.getSimpleName();\r\n\r\n    private ImageView topShelfImg, topShelfMask;\r\n    private TeamSclFragment mTeamSclFragment;\r\n\r\n    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            finish();\r\n        }\r\n    };\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.activity_teamscl);\r\n\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(&quot;com.directsportsnetwork.tv.STOP&quot;);\r\n        registerReceiver(broadcastReceiver, filter);\r\n\r\n        DeviceLogManager.instance().sendTeamSelectionPageData(TeamSclActivity.this);\r\n\r\n        topShelfImg = (ImageView) findViewById(R.id.top_shelf_image);\r\n        topShelfMask = (ImageView) findViewById(R.id.top_shelf_mask);\r\n\r\n        Intent intent = getIntent();\r\n\r\n\r\n        if (intent != null) {\r\n            try {\r\n                String channelData = intent.getStringExtra(Utils.EXTRA_CHANNEL_RESPONSE);\r\n                HashMap&lt;String, Integer&gt; teamTrnMap = (HashMap&lt;String, Integer&gt;) intent.getSerializableExtra(Utils.EXTRA_TEAM_TRN_MAP);\r\n                mTeamSclFragment = (TeamSclFragment) getFragmentManager().findFragmentById(R.id.main_browse_fragment);\r\n                mTeamSclFragment.onResponseData(new JSONArray(channelData), teamTrnMap);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            setTopShelfMask();\r\n\r\n            final Handler mHandler = new Handler();\r\n            mHandler.postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        mHandler.postDelayed(this, 300);\r\n                        if (mTeamSclFragment.getView() != null &amp;&amp; getCurrentFocus() instanceof RelativeLayout) {\r\n                            mTeamSclFragment.getView().requestFocus();\r\n                            mHandler.removeCallbacks(this);\r\n                            mHandler.removeCallbacksAndMessages(null);\r\n                        }\r\n                    }catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }, 300); //Changes START HERE FOR NEW CHANGES - 10/20/2018\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void attachBaseContext(Context newBase) {\r\n        super.attachBaseContext(CalligraphyContextWrapper.wrap(newBase));\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        unregisterReceiver(broadcastReceiver);\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingSuperCall&quot;)\r\n    @Override\r\n    protected void onSaveInstanceState(Bundle outState) {\r\n        //No call for super(). Bug on API Level &gt; 11.\r\n    }\r\n\r\n    // remot Button OnClickListener methods\r\n    @Override\r\n    public boolean onKeyUp(int keyCode, KeyEvent event) {\r\n        switch (keyCode) {\r\n            case KeyEvent.KEYCODE_DPAD_LEFT:\r\n            case KeyEvent.KEYCODE_DPAD_RIGHT:\r\n            case KeyEvent.KEYCODE_DPAD_UP:\r\n            case KeyEvent.KEYCODE_DPAD_DOWN:\r\n                // Remove shadow over topShelfImage at here\r\n                if (mTeamSclFragment != null) {\r\n                    mTeamSclFragment.startBackgroundTimer();\r\n                }\r\n            default:\r\n                return super.onKeyUp(keyCode, event);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\r\n        if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT || keyCode == KeyEvent.KEYCODE_DPAD_RIGHT\r\n                || keyCode == KeyEvent.KEYCODE_DPAD_DOWN || keyCode == KeyEvent.KEYCODE_DPAD_UP) {\r\n            // Add shadow over topShelfImage at here\r\n            topShelfImg.setAlpha(0.3f);\r\n        }\r\n\r\n        if (mTeamSclFragment != null) {\r\n            mTeamSclFragment.onMyKeyDown(keyCode, event);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public ImageView getTopShelfImg() {\r\n        return topShelfImg;\r\n    }\r\n\r\n    public void setTopShelfMask() {\r\n        if (Utils.SHOW_TOP_SHELF_MASK) {\r\n            topShelfMask.setBackground(ContextCompat.getDrawable(TeamSclActivity.this, R.drawable.ic_mask_bottom));\r\n        }\r\n\r\n    }\r\n} \r\n```\r\nMy Fragment code -\r\n```\r\npackage com.directsportsnetwork.tv.ui;\r\n\r\nimport static androidx.leanback.app.BackgroundManager.getInstance;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.DisplayMetrics;\r\nimport android.util.Log;\r\nimport android.view.KeyEvent;\r\nimport android.view.View;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.leanback.app.BackgroundManager;\r\nimport androidx.leanback.app.BrowseFragment;\r\nimport androidx.leanback.widget.ArrayObjectAdapter;\r\nimport androidx.leanback.widget.FocusHighlight;\r\nimport androidx.leanback.widget.HeaderItem;\r\nimport androidx.leanback.widget.ListRow;\r\nimport androidx.leanback.widget.ListRowPresenter;\r\nimport androidx.leanback.widget.OnItemViewClickedListener;\r\nimport androidx.leanback.widget.OnItemViewSelectedListener;\r\nimport androidx.leanback.widget.Presenter;\r\nimport androidx.leanback.widget.Row;\r\nimport androidx.leanback.widget.RowPresenter;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.request.target.CustomTarget;\r\nimport com.bumptech.glide.request.transition.Transition;\r\nimport com.directsportsnetwork.tv.R;\r\nimport com.directsportsnetwork.tv.api.OnResponseReceived;\r\nimport com.directsportsnetwork.tv.api.TvApplication;\r\nimport com.directsportsnetwork.tv.api.Utils;\r\nimport com.directsportsnetwork.tv.model.Team;\r\nimport com.directsportsnetwork.tv.presenter.TeamPresenter;\r\nimport com.directsportsnetwork.tv.provider.DataBaseHelper;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONObject;\r\n\r\nimport java.net.URI;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.Random;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\npublic class TeamSclFragment extends BrowseFragment implements OnResponseReceived {\r\n    private final String TAGS = &quot;TeamSclFragment&quot;;\r\n\r\n    private final Handler mHandler = new Handler();\r\n    private Drawable mDefaultBackground;\r\n    private DisplayMetrics mMetrics;\r\n    private Timer mBackgroundTimer;\r\n    private URI mBackgroundURI;\r\n    private URI defaultBackgroundURI;\r\n    public Team selectedTeam;\r\n    private JSONArray teamData;\r\n\r\n    private HashMap&lt;String, Integer&gt; teamTrnMap;\r\n\r\n    @Override\r\n    public void onActivityCreated(Bundle savedInstanceState) {\r\n        super.onActivityCreated(savedInstanceState);\r\n    }\r\n\r\n    private boolean isFavoriteDisable(String teamId) {\r\n        return !(teamTrnMap != null &amp;&amp; teamTrnMap.get(teamId) != null);\r\n    }\r\n\r\n    private int getTrnByTeamId(String teamId) {\r\n        return teamTrnMap.get(teamId);\r\n    }\r\n\r\n    @Override\r\n    public void onResponseData(JSONArray data, HashMap&lt;String, Integer&gt; teamTrnMap) {\r\n        try {\r\n            Log.e(TAGS, &quot;apiResponse: &quot; + data);\r\n            teamData = data;\r\n\r\n\r\n            this.teamTrnMap = teamTrnMap;\r\n\r\n            prepareBackgroundManager();\r\n\r\n            setupUIElements();\r\n\r\n\r\n            // Set rows as per data fetched form API\r\n            loadTeamRows(teamData);\r\n\r\n            setupEventListeners();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        if (null != mBackgroundTimer) {\r\n            mBackgroundTimer.cancel();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n\r\n        if (TvApplication.isFavChanged &amp;&amp; teamData != null) {\r\n            loadTeamRows(teamData);\r\n            TvApplication.isFavChanged = false;\r\n            if (getView() != null) {\r\n                getView().requestFocus();\r\n                setSelectedPosition(0, true);\r\n                startBackgroundTimer();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onPause() {\r\n        super.onPause();\r\n    }\r\n\r\n    public void onMyKeyDown(int keyCode, KeyEvent event) {\r\n        //do whatever you want here\r\n        switch (keyCode) {\r\n            case KeyEvent.KEYCODE_BACK:\r\n                getActivity().finish();\r\n                getActivity().overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void loadTeamRows(JSONArray teamCategoryList) {\r\n        try {\r\n            ArrayList&lt;Team&gt; favTeamList = new ArrayList&lt;&gt;();\r\n            if (Utils.isStoragePermissionGranted(getActivity())) {\r\n                DataBaseHelper dataBase = DataBaseHelper.getInstance(getActivity());\r\n                favTeamList = dataBase.getAllFavorites();\r\n            } else {\r\n                favTeamList.add(null);\r\n                Utils.showToast(getActivity(), getResources().getString(R.string.no_storage_permission));\r\n            }\r\n\r\n            ListRowPresenter mListRowPresenter = new ListRowPresenter(FocusHighlight.ZOOM_FACTOR_NONE, true);\r\n\r\n            ArrayObjectAdapter mRowsAdapter = new ArrayObjectAdapter(mListRowPresenter);\r\n            TeamPresenter teamPresenter = new TeamPresenter();\r\n\r\n            for (int i = 0; i &lt; teamCategoryList.length() + 1; i++) {\r\n\r\n                ArrayObjectAdapter listRowAdapter = new ArrayObjectAdapter(teamPresenter);\r\n                if (i == 0) {\r\n                    // This is to create Favorite card row\r\n                    for (int index = 0; index &lt; favTeamList.size(); index++) {\r\n\r\n                        if (favTeamList.get(index) == null) {\r\n                            listRowAdapter.add(getResources().getString(R.string.favorites));\r\n                        } else {\r\n                            Team team = favTeamList.get(index);\r\n                            team.setIsFavorite(1);\r\n                            if (isFavoriteDisable(team.getId())) {\r\n                                // TODO: Team is disabled, remove it from favorites\r\n                                DataBaseHelper dataBase = DataBaseHelper.getInstance(getActivity());\r\n                                dataBase.removeFavorite(team.getId());\r\n                                TvApplication.isFavChanged = true;\r\n                                continue;\r\n                            } else {\r\n                                team.setReleaseNo(getTrnByTeamId(team.getId()));\r\n                            }\r\n                            listRowAdapter.add(team);\r\n                        }\r\n                    }\r\n                    HeaderItem header = new HeaderItem(i, &quot;Favorites&quot;);\r\n                    mRowsAdapter.add(new ListRow(header, listRowAdapter));\r\n\r\n                } else {\r\n                    JSONArray teamList = teamCategoryList.getJSONObject(i - 1).getJSONArray(&quot;team&quot;);\r\n                    String category = teamCategoryList.getJSONObject(i - 1).getString(&quot;name&quot;);\r\n                    String categoryId = teamCategoryList.getJSONObject(i - 1).getString(&quot;id&quot;);\r\n\r\n                    for (int index = 0; index &lt; teamList.length(); index++) {\r\n                        JSONObject teamObj = teamList.getJSONObject(index);\r\n                        String id = teamObj.getString(&quot;id&quot;);\r\n                        String name = teamObj.getString(&quot;name&quot;);\r\n                        String shortdesc = teamObj.getString(&quot;shortdesc&quot;);\r\n                        String longdesc = teamObj.getString(&quot;longdesc&quot;);\r\n                        int trn = teamObj.getInt(&quot;trn&quot;);\r\n//trn stands for Team Release Number\r\n\r\n                        Team team = new Team();\r\n                        team.setCatId(categoryId);\r\n                        team.setCatName(category);\r\n                        team.setId(id);\r\n                        team.setName(name);\r\n                        team.setShortdesc(shortdesc);\r\n                        team.setLongdesc(longdesc);\r\n                        team.setIsFavorite(0);\r\n                        team.setReleaseNo(trn);\r\n\r\n                        if (category.equalsIgnoreCase(&quot;NASCAR&quot;)) {\r\n                            team.setIsNascar(1);\r\n                        } else {\r\n                            team.setIsNascar(0);\r\n                        }\r\n\r\n                        listRowAdapter.add(team);\r\n                    }\r\n                    HeaderItem header = new HeaderItem(i, category);\r\n                    mRowsAdapter.add(new ListRow(header, listRowAdapter));\r\n                }\r\n            }\r\n            setAdapter(mRowsAdapter);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void prepareBackgroundManager() {\r\n        BackgroundManager mBackgroundManager = getInstance(getActivity());\r\n        mBackgroundManager.attach(getActivity().getWindow());\r\n        mDefaultBackground = ContextCompat.getDrawable(getActivity(), R.drawable.default_background);\r\n        mBackgroundManager.setColor(Color.BLACK);\r\n        mMetrics = new DisplayMetrics();\r\n        getActivity().getWindowManager().getDefaultDisplay().getMetrics(mMetrics);\r\n    }\r\n\r\n    private void setupUIElements() {\r\n        getTitleView().setVisibility(View.GONE);\r\n\r\n        // To hide left side header for BrowseFragment\r\n        setHeadersState(HEADERS_DISABLED);\r\n        setHeadersTransitionOnBackEnabled(true);\r\n    }\r\n\r\n    private void setupEventListeners() {\r\n        setOnItemViewClickedListener(new ItemViewClickedListener());\r\n        setOnItemViewSelectedListener(new ItemViewSelectedListener());\r\n    }\r\n\r\n    protected void updateBackground(String uri) {\r\n\r\n        try {\r\n            int width = mMetrics.widthPixels;\r\n            int height = mMetrics.heightPixels;\r\n\r\n            final TeamSclActivity activity = ((TeamSclActivity) getActivity());\r\n\r\n            if (activity.getTopShelfImg().getDrawable().getConstantState() == getResources().getDrawable(R.drawable.ic_start).getConstantState() &amp;&amp; (uri == defaultBackgroundURI.toString())) {\r\n\r\n            } else {\r\n                //start\r\n                if (activity != null) {\r\n                    Glide.with(activity).load(uri).error(mDefaultBackground).placeholder(R.drawable.teamblank).into(new CustomTarget&lt;Drawable&gt;(width, height) {\r\n                        @Override\r\n                        public void onResourceReady(@NonNull Drawable resource, @Nullable Transition&lt;? super Drawable&gt; transition) {\r\n                            activity.getTopShelfImg().setImageDrawable(resource);\r\n                            Utils.crossfade(activity.getTopShelfImg());\r\n                        }\r\n\r\n                        @Override\r\n                        public void onLoadCleared(@Nullable Drawable placeholder) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n                //end\r\n            }\r\n\r\n\r\n            mBackgroundTimer.cancel();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void startBackgroundTimer() {\r\n\r\n\r\n        if (mBackgroundTimer != null) {\r\n            mBackgroundTimer.cancel();\r\n        }\r\n        mBackgroundTimer = new Timer();\r\n        mBackgroundTimer.schedule(new UpdateBackgroundTask(), Utils.BACKGROUND_UPDATE_DELAY);\r\n    }\r\n\r\n    private final class ItemViewClickedListener implements OnItemViewClickedListener {\r\n        @Override\r\n        public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item, RowPresenter.ViewHolder rowViewHolder, Row row) {\r\n            if (item instanceof Team) {\r\n                Team team = (Team) item;\r\n\r\n                Intent intent = new Intent(getActivity(), TeamChnlActivity.class);\r\n                intent.putExtra(Utils.EXTRA_TEAM, team);\r\n                startActivity(intent);\r\n\r\n            } else if (item instanceof String) {\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n                builder.setMessage(getResources().getString(R.string.favorite_alert_msg));\r\n                builder.setCancelable(true);\r\n                builder.setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n                    public void onClick(DialogInterface dialog, int id) {\r\n                        dialog.cancel();\r\n                    }\r\n                });\r\n                AlertDialog alert = builder.create();\r\n                alert.show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private final class ItemViewSelectedListener implements OnItemViewSelectedListener {\r\n\r\n        @Override\r\n        public void onItemSelected(Presenter.ViewHolder itemViewHolder, Object item, RowPresenter.ViewHolder rowViewHolder, Row row) {\r\n\r\n\r\n            if (item instanceof Team) {\r\n                Team team = ((Team) item);\r\n                try {\r\n                    selectedTeam = team;\r\n                    mBackgroundURI = new URI(team.getTopShelfImageUrl(team.getId(), team.getReleaseNo()));\r\n                    defaultBackgroundURI = new URI(Utils.MEDIA_PREFIX_URL + &quot;/tv/images/app/start.jpg?&quot;);\r\n                    if (team.getIsFavorite() == 1) {\r\n                        startBackgroundTimer();\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            } else if (item instanceof String) {\r\n                try {\r\n                    selectedTeam = null;\r\n                    Random random = new Random();\r\n                    mBackgroundURI = new URI(Utils.MEDIA_PREFIX_URL + &quot;/tv/images/app/start.jpg?&quot; + random.nextInt(100));\r\n                    defaultBackgroundURI = mBackgroundURI;\r\n                    startBackgroundTimer();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private class UpdateBackgroundTask extends TimerTask {\r\n        @Override\r\n        public void run() {\r\n            mHandler.post(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    if (mBackgroundURI != null) {\r\n                        updateBackground(mBackgroundURI.toString());\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n```\r\nMy activity_teamscl.xml code -\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/main_browse_fragment&quot;\r\n        android:name=&quot;com.directsportsnetwork.tv.ui.TeamSclFragment&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_alignTop=&quot;@+id/center_baseline&quot;\r\n        tools:context=&quot;.ui.TeamSclActivity&quot;\r\n        tools:deviceIds=&quot;tv&quot;\r\n        tools:ignore=&quot;MergeRootFrame&quot; /&gt;\r\n\r\n\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n\r\n```\r\n","title":"Error inflating class androidx.leanback.widget.BrowseFrameLayout","body":"<p>I'm testing the new support library leanback to design apps for TV, and i have a error ever android try to inflate the BrowseFragment and it throws this exception and don't know how to solve it. Thank you so much for your help.</p>\n<p>Error -</p>\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.directsportsnetwork.tv/com.directsportsnetwork.tv.ui.TeamSclActivity}: android.view.InflateException: Binary XML file line #67 in com.directsportsnetwork.tv:layout/activity_teamscl: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3449)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n     Caused by: android.view.InflateException: Binary XML file line #67 in com.directsportsnetwork.tv:layout/activity_teamscl: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\n     Caused by: android.view.InflateException: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\n     Caused by: android.view.InflateException: Binary XML file line #24 in com.directsportsnetwork.tv:layout/lb_browse_fragment: Error inflating class androidx.leanback.widget.BrowseFrameLayout\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Object java.lang.reflect.Field.get(java.lang.Object)' on a null object reference\n        at uk.co.chrisjenx.calligraphy.ReflectionUtils.getValue(ReflectionUtils.java:29)\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.createCustomViewInternal(CalligraphyLayoutInflater.java:203)\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.access$000(CalligraphyLayoutInflater.java:20)\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater$PrivateWrapperFactory2.onCreateView(CalligraphyLayoutInflater.java:302)\n        at android.view.LayoutInflater$FactoryMerger.onCreateView(LayoutInflater.java:237)\n        at android.view.LayoutInflater.tryCreateView(LayoutInflater.java:1067)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:995)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1121)\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1082)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:680)\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.inflate(CalligraphyLayoutInflater.java:60)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:532)\n        at androidx.leanback.app.BrowseFragment.onCreateView(BrowseFragment.java:1318)\n        at android.app.Fragment.performCreateView(Fragment.java:2505)\n        at android.app.FragmentManagerImpl.ensureInflatedFragmentView(FragmentManager.java:1491)\n        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1274)\n        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1486)\n        at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1728)\nE/AndroidRuntime:     at android.app.FragmentManagerImpl.onCreateView(FragmentManager.java:3562)\n        at android.app.FragmentController.onCreateView(FragmentController.java:104)\n        at android.app.Activity.onCreateView(Activity.java:7112)\n        at androidx.fragment.app.FragmentActivity.onCreateView(FragmentActivity.java:229)\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater$PrivateWrapperFactory2.onCreateView(CalligraphyLayoutInflater.java:303)\n        at android.view.LayoutInflater$FactoryMerger.onCreateView(LayoutInflater.java:237)\n        at android.view.LayoutInflater.tryCreateView(LayoutInflater.java:1067)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:995)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1121)\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1082)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:680)\n        at uk.co.chrisjenx.calligraphy.CalligraphyLayoutInflater.inflate(CalligraphyLayoutInflater.java:60)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:532)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:479)\n        at android.transition.Scene.enter(Scene.java:182)\n        at com.android.internal.policy.PhoneWindow.transitionTo(PhoneWindow.java:522)\n        at com.android.internal.policy.PhoneWindow.setContentView(PhoneWindow.java:453)\n        at android.app.Activity.setContentView(Activity.java:3468)\n        at androidx.activity.ComponentActivity.setContentView(ComponentActivity.java:448)\n        at com.directsportsnetwork.tv.ui.TeamSclActivity.onCreate(TeamSclActivity.java:55)\n        at android.app.Activity.performCreate(Activity.java:8000)\n        at android.app.Activity.performCreate(Activity.java:7984)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>My Activity code is -</p>\n<pre><code>package com.directsportsnetwork.tv.ui;\n\n\nimport android.annotation.SuppressLint;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.view.KeyEvent;\nimport android.widget.ImageView;\nimport android.widget.RelativeLayout;\n\nimport androidx.core.content.ContextCompat;\nimport androidx.fragment.app.FragmentActivity;\n\nimport com.directsportsnetwork.tv.R;\nimport com.directsportsnetwork.tv.api.DeviceLogManager;\nimport com.directsportsnetwork.tv.api.Utils;\n\nimport org.json.JSONArray;\n\nimport java.util.HashMap;\n\nimport uk.co.chrisjenx.calligraphy.CalligraphyContextWrapper;\n\npublic class TeamSclActivity extends FragmentActivity {\n\n    private String TAG = TeamSclActivity.class.getSimpleName();\n\n    private ImageView topShelfImg, topShelfMask;\n    private TeamSclFragment mTeamSclFragment;\n\n    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            finish();\n        }\n    };\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_teamscl);\n\n        IntentFilter filter = new IntentFilter();\n        filter.addAction(&quot;com.directsportsnetwork.tv.STOP&quot;);\n        registerReceiver(broadcastReceiver, filter);\n\n        DeviceLogManager.instance().sendTeamSelectionPageData(TeamSclActivity.this);\n\n        topShelfImg = (ImageView) findViewById(R.id.top_shelf_image);\n        topShelfMask = (ImageView) findViewById(R.id.top_shelf_mask);\n\n        Intent intent = getIntent();\n\n\n        if (intent != null) {\n            try {\n                String channelData = intent.getStringExtra(Utils.EXTRA_CHANNEL_RESPONSE);\n                HashMap&lt;String, Integer&gt; teamTrnMap = (HashMap&lt;String, Integer&gt;) intent.getSerializableExtra(Utils.EXTRA_TEAM_TRN_MAP);\n                mTeamSclFragment = (TeamSclFragment) getFragmentManager().findFragmentById(R.id.main_browse_fragment);\n                mTeamSclFragment.onResponseData(new JSONArray(channelData), teamTrnMap);\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n\n            setTopShelfMask();\n\n            final Handler mHandler = new Handler();\n            mHandler.postDelayed(new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        mHandler.postDelayed(this, 300);\n                        if (mTeamSclFragment.getView() != null &amp;&amp; getCurrentFocus() instanceof RelativeLayout) {\n                            mTeamSclFragment.getView().requestFocus();\n                            mHandler.removeCallbacks(this);\n                            mHandler.removeCallbacksAndMessages(null);\n                        }\n                    }catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            }, 300); //Changes START HERE FOR NEW CHANGES - 10/20/2018\n        }\n    }\n\n    @Override\n    protected void attachBaseContext(Context newBase) {\n        super.attachBaseContext(CalligraphyContextWrapper.wrap(newBase));\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        unregisterReceiver(broadcastReceiver);\n    }\n\n    @SuppressLint(&quot;MissingSuperCall&quot;)\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        //No call for super(). Bug on API Level &gt; 11.\n    }\n\n    // remot Button OnClickListener methods\n    @Override\n    public boolean onKeyUp(int keyCode, KeyEvent event) {\n        switch (keyCode) {\n            case KeyEvent.KEYCODE_DPAD_LEFT:\n            case KeyEvent.KEYCODE_DPAD_RIGHT:\n            case KeyEvent.KEYCODE_DPAD_UP:\n            case KeyEvent.KEYCODE_DPAD_DOWN:\n                // Remove shadow over topShelfImage at here\n                if (mTeamSclFragment != null) {\n                    mTeamSclFragment.startBackgroundTimer();\n                }\n            default:\n                return super.onKeyUp(keyCode, event);\n        }\n    }\n\n    @Override\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\n        if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT || keyCode == KeyEvent.KEYCODE_DPAD_RIGHT\n                || keyCode == KeyEvent.KEYCODE_DPAD_DOWN || keyCode == KeyEvent.KEYCODE_DPAD_UP) {\n            // Add shadow over topShelfImage at here\n            topShelfImg.setAlpha(0.3f);\n        }\n\n        if (mTeamSclFragment != null) {\n            mTeamSclFragment.onMyKeyDown(keyCode, event);\n        }\n        return false;\n    }\n\n    public ImageView getTopShelfImg() {\n        return topShelfImg;\n    }\n\n    public void setTopShelfMask() {\n        if (Utils.SHOW_TOP_SHELF_MASK) {\n            topShelfMask.setBackground(ContextCompat.getDrawable(TeamSclActivity.this, R.drawable.ic_mask_bottom));\n        }\n\n    }\n} \n</code></pre>\n<p>My Fragment code -</p>\n<pre><code>package com.directsportsnetwork.tv.ui;\n\nimport static androidx.leanback.app.BackgroundManager.getInstance;\n\nimport android.app.AlertDialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.graphics.drawable.Drawable;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.util.DisplayMetrics;\nimport android.util.Log;\nimport android.view.KeyEvent;\nimport android.view.View;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.core.content.ContextCompat;\nimport androidx.leanback.app.BackgroundManager;\nimport androidx.leanback.app.BrowseFragment;\nimport androidx.leanback.widget.ArrayObjectAdapter;\nimport androidx.leanback.widget.FocusHighlight;\nimport androidx.leanback.widget.HeaderItem;\nimport androidx.leanback.widget.ListRow;\nimport androidx.leanback.widget.ListRowPresenter;\nimport androidx.leanback.widget.OnItemViewClickedListener;\nimport androidx.leanback.widget.OnItemViewSelectedListener;\nimport androidx.leanback.widget.Presenter;\nimport androidx.leanback.widget.Row;\nimport androidx.leanback.widget.RowPresenter;\n\nimport com.bumptech.glide.Glide;\nimport com.bumptech.glide.request.target.CustomTarget;\nimport com.bumptech.glide.request.transition.Transition;\nimport com.directsportsnetwork.tv.R;\nimport com.directsportsnetwork.tv.api.OnResponseReceived;\nimport com.directsportsnetwork.tv.api.TvApplication;\nimport com.directsportsnetwork.tv.api.Utils;\nimport com.directsportsnetwork.tv.model.Team;\nimport com.directsportsnetwork.tv.presenter.TeamPresenter;\nimport com.directsportsnetwork.tv.provider.DataBaseHelper;\n\nimport org.json.JSONArray;\nimport org.json.JSONObject;\n\nimport java.net.URI;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Random;\nimport java.util.Timer;\nimport java.util.TimerTask;\n\npublic class TeamSclFragment extends BrowseFragment implements OnResponseReceived {\n    private final String TAGS = &quot;TeamSclFragment&quot;;\n\n    private final Handler mHandler = new Handler();\n    private Drawable mDefaultBackground;\n    private DisplayMetrics mMetrics;\n    private Timer mBackgroundTimer;\n    private URI mBackgroundURI;\n    private URI defaultBackgroundURI;\n    public Team selectedTeam;\n    private JSONArray teamData;\n\n    private HashMap&lt;String, Integer&gt; teamTrnMap;\n\n    @Override\n    public void onActivityCreated(Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n    }\n\n    private boolean isFavoriteDisable(String teamId) {\n        return !(teamTrnMap != null &amp;&amp; teamTrnMap.get(teamId) != null);\n    }\n\n    private int getTrnByTeamId(String teamId) {\n        return teamTrnMap.get(teamId);\n    }\n\n    @Override\n    public void onResponseData(JSONArray data, HashMap&lt;String, Integer&gt; teamTrnMap) {\n        try {\n            Log.e(TAGS, &quot;apiResponse: &quot; + data);\n            teamData = data;\n\n\n            this.teamTrnMap = teamTrnMap;\n\n            prepareBackgroundManager();\n\n            setupUIElements();\n\n\n            // Set rows as per data fetched form API\n            loadTeamRows(teamData);\n\n            setupEventListeners();\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        if (null != mBackgroundTimer) {\n            mBackgroundTimer.cancel();\n        }\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n\n        if (TvApplication.isFavChanged &amp;&amp; teamData != null) {\n            loadTeamRows(teamData);\n            TvApplication.isFavChanged = false;\n            if (getView() != null) {\n                getView().requestFocus();\n                setSelectedPosition(0, true);\n                startBackgroundTimer();\n            }\n        }\n    }\n\n    @Override\n    public void onPause() {\n        super.onPause();\n    }\n\n    public void onMyKeyDown(int keyCode, KeyEvent event) {\n        //do whatever you want here\n        switch (keyCode) {\n            case KeyEvent.KEYCODE_BACK:\n                getActivity().finish();\n                getActivity().overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);\n                break;\n        }\n    }\n\n    private void loadTeamRows(JSONArray teamCategoryList) {\n        try {\n            ArrayList&lt;Team&gt; favTeamList = new ArrayList&lt;&gt;();\n            if (Utils.isStoragePermissionGranted(getActivity())) {\n                DataBaseHelper dataBase = DataBaseHelper.getInstance(getActivity());\n                favTeamList = dataBase.getAllFavorites();\n            } else {\n                favTeamList.add(null);\n                Utils.showToast(getActivity(), getResources().getString(R.string.no_storage_permission));\n            }\n\n            ListRowPresenter mListRowPresenter = new ListRowPresenter(FocusHighlight.ZOOM_FACTOR_NONE, true);\n\n            ArrayObjectAdapter mRowsAdapter = new ArrayObjectAdapter(mListRowPresenter);\n            TeamPresenter teamPresenter = new TeamPresenter();\n\n            for (int i = 0; i &lt; teamCategoryList.length() + 1; i++) {\n\n                ArrayObjectAdapter listRowAdapter = new ArrayObjectAdapter(teamPresenter);\n                if (i == 0) {\n                    // This is to create Favorite card row\n                    for (int index = 0; index &lt; favTeamList.size(); index++) {\n\n                        if (favTeamList.get(index) == null) {\n                            listRowAdapter.add(getResources().getString(R.string.favorites));\n                        } else {\n                            Team team = favTeamList.get(index);\n                            team.setIsFavorite(1);\n                            if (isFavoriteDisable(team.getId())) {\n                                // TODO: Team is disabled, remove it from favorites\n                                DataBaseHelper dataBase = DataBaseHelper.getInstance(getActivity());\n                                dataBase.removeFavorite(team.getId());\n                                TvApplication.isFavChanged = true;\n                                continue;\n                            } else {\n                                team.setReleaseNo(getTrnByTeamId(team.getId()));\n                            }\n                            listRowAdapter.add(team);\n                        }\n                    }\n                    HeaderItem header = new HeaderItem(i, &quot;Favorites&quot;);\n                    mRowsAdapter.add(new ListRow(header, listRowAdapter));\n\n                } else {\n                    JSONArray teamList = teamCategoryList.getJSONObject(i - 1).getJSONArray(&quot;team&quot;);\n                    String category = teamCategoryList.getJSONObject(i - 1).getString(&quot;name&quot;);\n                    String categoryId = teamCategoryList.getJSONObject(i - 1).getString(&quot;id&quot;);\n\n                    for (int index = 0; index &lt; teamList.length(); index++) {\n                        JSONObject teamObj = teamList.getJSONObject(index);\n                        String id = teamObj.getString(&quot;id&quot;);\n                        String name = teamObj.getString(&quot;name&quot;);\n                        String shortdesc = teamObj.getString(&quot;shortdesc&quot;);\n                        String longdesc = teamObj.getString(&quot;longdesc&quot;);\n                        int trn = teamObj.getInt(&quot;trn&quot;);\n//trn stands for Team Release Number\n\n                        Team team = new Team();\n                        team.setCatId(categoryId);\n                        team.setCatName(category);\n                        team.setId(id);\n                        team.setName(name);\n                        team.setShortdesc(shortdesc);\n                        team.setLongdesc(longdesc);\n                        team.setIsFavorite(0);\n                        team.setReleaseNo(trn);\n\n                        if (category.equalsIgnoreCase(&quot;NASCAR&quot;)) {\n                            team.setIsNascar(1);\n                        } else {\n                            team.setIsNascar(0);\n                        }\n\n                        listRowAdapter.add(team);\n                    }\n                    HeaderItem header = new HeaderItem(i, category);\n                    mRowsAdapter.add(new ListRow(header, listRowAdapter));\n                }\n            }\n            setAdapter(mRowsAdapter);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void prepareBackgroundManager() {\n        BackgroundManager mBackgroundManager = getInstance(getActivity());\n        mBackgroundManager.attach(getActivity().getWindow());\n        mDefaultBackground = ContextCompat.getDrawable(getActivity(), R.drawable.default_background);\n        mBackgroundManager.setColor(Color.BLACK);\n        mMetrics = new DisplayMetrics();\n        getActivity().getWindowManager().getDefaultDisplay().getMetrics(mMetrics);\n    }\n\n    private void setupUIElements() {\n        getTitleView().setVisibility(View.GONE);\n\n        // To hide left side header for BrowseFragment\n        setHeadersState(HEADERS_DISABLED);\n        setHeadersTransitionOnBackEnabled(true);\n    }\n\n    private void setupEventListeners() {\n        setOnItemViewClickedListener(new ItemViewClickedListener());\n        setOnItemViewSelectedListener(new ItemViewSelectedListener());\n    }\n\n    protected void updateBackground(String uri) {\n\n        try {\n            int width = mMetrics.widthPixels;\n            int height = mMetrics.heightPixels;\n\n            final TeamSclActivity activity = ((TeamSclActivity) getActivity());\n\n            if (activity.getTopShelfImg().getDrawable().getConstantState() == getResources().getDrawable(R.drawable.ic_start).getConstantState() &amp;&amp; (uri == defaultBackgroundURI.toString())) {\n\n            } else {\n                //start\n                if (activity != null) {\n                    Glide.with(activity).load(uri).error(mDefaultBackground).placeholder(R.drawable.teamblank).into(new CustomTarget&lt;Drawable&gt;(width, height) {\n                        @Override\n                        public void onResourceReady(@NonNull Drawable resource, @Nullable Transition&lt;? super Drawable&gt; transition) {\n                            activity.getTopShelfImg().setImageDrawable(resource);\n                            Utils.crossfade(activity.getTopShelfImg());\n                        }\n\n                        @Override\n                        public void onLoadCleared(@Nullable Drawable placeholder) {\n\n                        }\n                    });\n                }\n\n\n                //end\n            }\n\n\n            mBackgroundTimer.cancel();\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void startBackgroundTimer() {\n\n\n        if (mBackgroundTimer != null) {\n            mBackgroundTimer.cancel();\n        }\n        mBackgroundTimer = new Timer();\n        mBackgroundTimer.schedule(new UpdateBackgroundTask(), Utils.BACKGROUND_UPDATE_DELAY);\n    }\n\n    private final class ItemViewClickedListener implements OnItemViewClickedListener {\n        @Override\n        public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item, RowPresenter.ViewHolder rowViewHolder, Row row) {\n            if (item instanceof Team) {\n                Team team = (Team) item;\n\n                Intent intent = new Intent(getActivity(), TeamChnlActivity.class);\n                intent.putExtra(Utils.EXTRA_TEAM, team);\n                startActivity(intent);\n\n            } else if (item instanceof String) {\n                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n                builder.setMessage(getResources().getString(R.string.favorite_alert_msg));\n                builder.setCancelable(true);\n                builder.setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int id) {\n                        dialog.cancel();\n                    }\n                });\n                AlertDialog alert = builder.create();\n                alert.show();\n            }\n        }\n    }\n\n    private final class ItemViewSelectedListener implements OnItemViewSelectedListener {\n\n        @Override\n        public void onItemSelected(Presenter.ViewHolder itemViewHolder, Object item, RowPresenter.ViewHolder rowViewHolder, Row row) {\n\n\n            if (item instanceof Team) {\n                Team team = ((Team) item);\n                try {\n                    selectedTeam = team;\n                    mBackgroundURI = new URI(team.getTopShelfImageUrl(team.getId(), team.getReleaseNo()));\n                    defaultBackgroundURI = new URI(Utils.MEDIA_PREFIX_URL + &quot;/tv/images/app/start.jpg?&quot;);\n                    if (team.getIsFavorite() == 1) {\n                        startBackgroundTimer();\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            } else if (item instanceof String) {\n                try {\n                    selectedTeam = null;\n                    Random random = new Random();\n                    mBackgroundURI = new URI(Utils.MEDIA_PREFIX_URL + &quot;/tv/images/app/start.jpg?&quot; + random.nextInt(100));\n                    defaultBackgroundURI = mBackgroundURI;\n                    startBackgroundTimer();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n    private class UpdateBackgroundTask extends TimerTask {\n        @Override\n        public void run() {\n            mHandler.post(new Runnable() {\n                @Override\n                public void run() {\n                    if (mBackgroundURI != null) {\n                        updateBackground(mBackgroundURI.toString());\n                    }\n                }\n            });\n        }\n    }\n}\n</code></pre>\n<p>My activity_teamscl.xml code -</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/main_browse_fragment&quot;\n        android:name=&quot;com.directsportsnetwork.tv.ui.TeamSclFragment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_alignParentBottom=&quot;true&quot;\n        android:layout_alignTop=&quot;@+id/center_baseline&quot;\n        tools:context=&quot;.ui.TeamSclActivity&quot;\n        tools:deviceIds=&quot;tv&quot;\n        tools:ignore=&quot;MergeRootFrame&quot; /&gt;\n\n\n\n&lt;/RelativeLayout&gt;\n\n\n</code></pre>\n"},{"tags":["java","android","file","mime-types"],"comments":[{"owner":{"account_id":3285978,"reputation":3430,"user_id":2765497,"accept_rate":75,"display_name":"Oleksandr B"},"score":0,"creation_date":1433963758,"post_id":18665608,"comment_id":49582983,"body_markdown":"http://stackoverflow.com/a/30765320/2765497","body":"<a href=\"http://stackoverflow.com/a/30765320/2765497\">stackoverflow.com/a/30765320/2765497</a>"}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1456787435,"creation_date":1378497608,"answer_id":18665710,"question_id":18665608,"body_markdown":"&gt; Is there still a way to get the MIME type of the file?\r\n\r\nNot from the filename alone.\r\n\r\n&gt; Or a way to determine the content Uri from the file path Uri?\r\n\r\nThere is not necessarily any &quot;content Uri&quot;. You are welcome to try to find the file in `MediaStore` and see if, for some reason, it happens to know the MIME type. `MediaStore` may or may not know the MIME type, and if it does not, there is no way to determine it.\r\n\r\nIf you *do* have `content://` `Uri`, use `getType()` on a `ContentResolver` to get the MIME type.\r\n","title":"Android - Get MIME type from file without extension","body":"<blockquote>\n  <p>Is there still a way to get the MIME type of the file?</p>\n</blockquote>\n\n<p>Not from the filename alone.</p>\n\n<blockquote>\n  <p>Or a way to determine the content Uri from the file path Uri?</p>\n</blockquote>\n\n<p>There is not necessarily any \"content Uri\". You are welcome to try to find the file in <code>MediaStore</code> and see if, for some reason, it happens to know the MIME type. <code>MediaStore</code> may or may not know the MIME type, and if it does not, there is no way to determine it.</p>\n\n<p>If you <em>do</em> have <code>content://</code> <code>Uri</code>, use <code>getType()</code> on a <code>ContentResolver</code> to get the MIME type.</p>\n"},{"comments":[{"owner":{"account_id":1521337,"reputation":1257,"user_id":1420892,"accept_rate":79,"display_name":"Jason Hu"},"score":1,"creation_date":1383664556,"post_id":19739471,"comment_id":29421318,"body_markdown":"`BitmapFactory` will only determine mimetypes of image files though.","body":"<code>BitmapFactory</code> will only determine mimetypes of image files though."}],"tags":[],"owner":{"account_id":1233149,"reputation":3280,"user_id":1197317,"accept_rate":50,"display_name":"fikr4n"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1383883627,"creation_date":1383372874,"answer_id":19739471,"question_id":18665608,"body_markdown":"Have you tried this? It works for me (**only for image files**).\r\n\r\n\tpublic static String getMimeTypeOfUri(Context context, Uri uri) {\r\n\t\tBitmapFactory.Options opt = new BitmapFactory.Options();\r\n\t\t/* The doc says that if inJustDecodeBounds set to true, the decoder\r\n\t\t * will return null (no bitmap), but the out... fields will still be\r\n\t\t * set, allowing the caller to query the bitmap without having to\r\n\t\t * allocate the memory for its pixels. */\r\n\t\topt.inJustDecodeBounds = true;\r\n\t\t\r\n\t\tInputStream istream = context.getContentResolver().openInputStream(uri);\r\n\t\tBitmapFactory.decodeStream(istream, null, opt);\r\n\t\tistream.close();\r\n\t\t\r\n\t\treturn opt.outMimeType;\r\n\t}\r\n\r\nOf course you can also use other methods, such as `BitmapFactory.decodeFile` or `BitmapFactory.decodeResource` like this:\r\n\r\n\tpublic static String getMimeTypeOfFile(String pathName) {\r\n\t\tBitmapFactory.Options opt = new BitmapFactory.Options();\r\n\t\topt.inJustDecodeBounds = true;\r\n\t\tBitmapFactory.decodeFile(pathName, opt);\r\n\t\treturn opt.outMimeType;\r\n\t}\r\n\r\nIt will return null if failed to determine the MIME type.","title":"Android - Get MIME type from file without extension","body":"<p>Have you tried this? It works for me (<strong>only for image files</strong>).</p>\n\n<pre><code>public static String getMimeTypeOfUri(Context context, Uri uri) {\n    BitmapFactory.Options opt = new BitmapFactory.Options();\n    /* The doc says that if inJustDecodeBounds set to true, the decoder\n     * will return null (no bitmap), but the out... fields will still be\n     * set, allowing the caller to query the bitmap without having to\n     * allocate the memory for its pixels. */\n    opt.inJustDecodeBounds = true;\n\n    InputStream istream = context.getContentResolver().openInputStream(uri);\n    BitmapFactory.decodeStream(istream, null, opt);\n    istream.close();\n\n    return opt.outMimeType;\n}\n</code></pre>\n\n<p>Of course you can also use other methods, such as <code>BitmapFactory.decodeFile</code> or <code>BitmapFactory.decodeResource</code> like this:</p>\n\n<pre><code>public static String getMimeTypeOfFile(String pathName) {\n    BitmapFactory.Options opt = new BitmapFactory.Options();\n    opt.inJustDecodeBounds = true;\n    BitmapFactory.decodeFile(pathName, opt);\n    return opt.outMimeType;\n}\n</code></pre>\n\n<p>It will return null if failed to determine the MIME type.</p>\n"},{"tags":[],"owner":{"account_id":8162124,"reputation":31,"user_id":6145802,"display_name":" "},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1480954832,"creation_date":1480954832,"answer_id":40978689,"question_id":18665608,"body_markdown":"First bytes contains file extension\r\n\r\n    @Nullable\r\n    public static String getFileExtFromBytes(File f) {\r\n        FileInputStream fis = null;\r\n        try {\r\n            fis = new FileInputStream(f);\r\n            byte[] buf = new byte[5]; //max ext size + 1\r\n            fis.read(buf, 0, buf.length);\r\n            StringBuilder builder = new StringBuilder(buf.length);\r\n            for (int i=1;i&lt;buf.length &amp;&amp; buf[i] != &#39;\\r&#39; &amp;&amp; buf[i] != &#39;\\n&#39;;i++) {\r\n                builder.append((char)buf[i]);\r\n            }\r\n            return builder.toString().toLowerCase();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                if (fis != null) {\r\n                    fis.close();\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return null;\r\n    }","title":"Android - Get MIME type from file without extension","body":"<p>First bytes contains file extension</p>\n\n<pre><code>@Nullable\npublic static String getFileExtFromBytes(File f) {\n    FileInputStream fis = null;\n    try {\n        fis = new FileInputStream(f);\n        byte[] buf = new byte[5]; //max ext size + 1\n        fis.read(buf, 0, buf.length);\n        StringBuilder builder = new StringBuilder(buf.length);\n        for (int i=1;i&lt;buf.length &amp;&amp; buf[i] != '\\r' &amp;&amp; buf[i] != '\\n';i++) {\n            builder.append((char)buf[i]);\n        }\n        return builder.toString().toLowerCase();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            if (fis != null) {\n                fis.close();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21831388,"reputation":81,"user_id":16126283,"display_name":"vaidik limbachiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675228002,"creation_date":1675228002,"answer_id":75305893,"question_id":18665608,"body_markdown":"In order to get the MIME type of a file that doesn&#39;t have an extension, you&#39;ll need to use a different approach. One way to do this is to read the first few bytes of the file and determine the MIME type based on the file format signature (also known as &quot;magic numbers&quot;).\r\n\r\n    import java.io.FileInputStream\r\n    import java.nio.ByteBuffer\r\n    import java.nio.ByteOrder\r\n\r\n    fun getMimeTypeWithoutExtension(filePath: String): String {\r\n    val magicNumbers = mapOf(\r\n        0x89.toByte() to &quot;image/png&quot;,\r\n        0xff.toByte() to &quot;image/jpeg&quot;,\r\n        0x47.toByte() to &quot;image/gif&quot;,\r\n        0x49.toByte() to &quot;image/tiff&quot;,\r\n        0x4d.toByte() to &quot;image/tiff&quot;,\r\n        0x25.toByte() to &quot;application/pdf&quot;,\r\n        0x50.toByte() to &quot;application/vnd.ms-powerpoint&quot;,\r\n        0xD0.toByte() to &quot;application/vnd.ms-word&quot;,\r\n        0x43.toByte() to &quot;application/vnd.ms-word&quot;,\r\n        0x53.toByte() to &quot;application/vnd.ms-word&quot;\r\n    )\r\n\r\n    var mimeType = &quot;application/octet-stream&quot;\r\n    FileInputStream(filePath).use { inputStream -&gt;\r\n        val buffer = ByteArray(1024)\r\n        inputStream.read(buffer, 0, buffer.size)\r\n        val magicNumber = ByteBuffer.wrap(buffer).order(ByteOrder.BIG_ENDIAN).get().toInt() and 0xff\r\n        mimeType = magicNumbers[magicNumber.toByte()] ?: mimeType\r\n    }\r\n    return mimeType\r\n    }\r\n\r\n\r\nThis code uses the FileInputStream class to read the first byte of the file into a ByteArray. The byte is then extracted as an integer and used to look up the corresponding MIME type in a map of magic numbers and MIME types. If the MIME type cannot be determined, the function returns &quot;application/octet-stream&quot; as a default.\r\n\r\nNote that this code is only checking the first byte of the file, so it may not always accurately determine the MIME type of a file without an extension. For more accurate results, you may need to check additional bytes of the file or use a library that provides more comprehensive MIME type detection.","title":"Android - Get MIME type from file without extension","body":"<p>In order to get the MIME type of a file that doesn't have an extension, you'll need to use a different approach. One way to do this is to read the first few bytes of the file and determine the MIME type based on the file format signature (also known as &quot;magic numbers&quot;).</p>\n<pre><code>import java.io.FileInputStream\nimport java.nio.ByteBuffer\nimport java.nio.ByteOrder\n\nfun getMimeTypeWithoutExtension(filePath: String): String {\nval magicNumbers = mapOf(\n    0x89.toByte() to &quot;image/png&quot;,\n    0xff.toByte() to &quot;image/jpeg&quot;,\n    0x47.toByte() to &quot;image/gif&quot;,\n    0x49.toByte() to &quot;image/tiff&quot;,\n    0x4d.toByte() to &quot;image/tiff&quot;,\n    0x25.toByte() to &quot;application/pdf&quot;,\n    0x50.toByte() to &quot;application/vnd.ms-powerpoint&quot;,\n    0xD0.toByte() to &quot;application/vnd.ms-word&quot;,\n    0x43.toByte() to &quot;application/vnd.ms-word&quot;,\n    0x53.toByte() to &quot;application/vnd.ms-word&quot;\n)\n\nvar mimeType = &quot;application/octet-stream&quot;\nFileInputStream(filePath).use { inputStream -&gt;\n    val buffer = ByteArray(1024)\n    inputStream.read(buffer, 0, buffer.size)\n    val magicNumber = ByteBuffer.wrap(buffer).order(ByteOrder.BIG_ENDIAN).get().toInt() and 0xff\n    mimeType = magicNumbers[magicNumber.toByte()] ?: mimeType\n}\nreturn mimeType\n}\n</code></pre>\n<p>This code uses the FileInputStream class to read the first byte of the file into a ByteArray. The byte is then extracted as an integer and used to look up the corresponding MIME type in a map of magic numbers and MIME types. If the MIME type cannot be determined, the function returns &quot;application/octet-stream&quot; as a default.</p>\n<p>Note that this code is only checking the first byte of the file, so it may not always accurately determine the MIME type of a file without an extension. For more accurate results, you may need to check additional bytes of the file or use a library that provides more comprehensive MIME type detection.</p>\n"}],"owner":{"account_id":1521337,"reputation":1257,"user_id":1420892,"accept_rate":79,"display_name":"Jason Hu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15103,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":18665710,"answer_count":4,"score":14,"last_activity_date":1675228002,"creation_date":1378497245,"question_id":18665608,"body_markdown":"As far as I&#39;m aware there&#39;s only three ways to get the MIME type from reading the existing questions.\r\n\r\n1) Determining it from the file extension using `MimeTypeMap.getFileExtensionFromUrl`\r\n\r\n2) &quot;Guess&quot; using the `inputStream` with `URLConnection.guessContentTypeFromStream`\r\n\r\n3) Using the `ContentResolver` to get the MIME type using content Uri (content:\\\\) `context.getContentResolver().getType`\r\n\r\nHowever, I only have the file object, with the obtainable `Uri` being the file path `Uri` (file:\\). The file does not have an extension. Is there still a way to get the MIME type of the file? Or a way to determine the content Uri from the file path Uri?","title":"Android - Get MIME type from file without extension","body":"<p>As far as I'm aware there's only three ways to get the MIME type from reading the existing questions.</p>\n\n<p>1) Determining it from the file extension using <code>MimeTypeMap.getFileExtensionFromUrl</code></p>\n\n<p>2) \"Guess\" using the <code>inputStream</code> with <code>URLConnection.guessContentTypeFromStream</code></p>\n\n<p>3) Using the <code>ContentResolver</code> to get the MIME type using content Uri (content:\\) <code>context.getContentResolver().getType</code></p>\n\n<p>However, I only have the file object, with the obtainable <code>Uri</code> being the file path <code>Uri</code> (file:). The file does not have an extension. Is there still a way to get the MIME type of the file? Or a way to determine the content Uri from the file path Uri?</p>\n"},{"tags":["java","visual-studio-code","junit"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1662087261,"post_id":73577159,"comment_id":129930097,"body_markdown":"Is **launch.json** configured? Can the content be displayed?","body":"Is <b>launch.json</b> configured? Can the content be displayed?"},{"owner":{"account_id":22839656,"reputation":65,"user_id":17584374,"display_name":"Thiago"},"score":0,"creation_date":1662104313,"post_id":73577159,"comment_id":129933163,"body_markdown":"There isn&#39;t a  launch.json configured.","body":"There isn&#39;t a  launch.json configured."}],"answers":[{"tags":[],"owner":{"account_id":23537083,"reputation":36,"user_id":17581886,"display_name":"Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662182182,"creation_date":1662182182,"answer_id":73589819,"question_id":73577159,"body_markdown":"From your code, you seem to be experiencing an issue [similar to this](https://github.com/microsoft/vscode-java-test/issues/1481). If your extension is not to the latest version (0.37.1), then please update it and reload vscode, as that issue was just fixed and released yesterday. For me, I also had to update vscode in order for it to work, so you may need to do that as well. Hope this answer helps.","title":"I can&#39;t run tests with JUnit Jupyter. Hangs on message &quot;Resolving launch configuration&quot;. How to fix it?","body":"<p>From your code, you seem to be experiencing an issue <a href=\"https://github.com/microsoft/vscode-java-test/issues/1481\" rel=\"nofollow noreferrer\">similar to this</a>. If your extension is not to the latest version (0.37.1), then please update it and reload vscode, as that issue was just fixed and released yesterday. For me, I also had to update vscode in order for it to work, so you may need to do that as well. Hope this answer helps.</p>\n"}],"owner":{"account_id":22839656,"reputation":65,"user_id":17584374,"display_name":"Thiago"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":633,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73589819,"answer_count":1,"score":2,"last_activity_date":1675227978,"creation_date":1662084929,"question_id":73577159,"body_markdown":"I&#39;m using the Junit Jupiter. I installed by vscode. This is my lib junit-platform-console-standalone-1.9.0.jar in vs code :\r\n\r\n[![lib junit-platform-console-standalone-1.9.0.jar][1]][1]\r\n\r\nMy files are :\r\n\r\nMain.java\r\n\r\n```\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws ParseException {\r\n        Agenda agenda = new Agenda();\r\n        Compromisso compromisso = new Compromisso(&quot;Matheus&quot;, &quot;31/08/2022&quot;);\r\n        agenda.addCompromissoPeriodico(compromisso, 7,3);\r\n        for (int i = 0; i &lt; agenda.getAgenda().size(); i++) {\r\n            System.out.print(agenda.getAgenda().get(i).getNome());\r\n            SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n            System.out.print(agenda.getAgenda().get(i).getDataCompromisso().getData());\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nAgenda.java\r\n\r\n```\r\nimport java.text.ParseException;\r\nimport java.util.ArrayList;\r\nimport java.util.GregorianCalendar;\r\n\r\nimport static java.util.Calendar.DAY_OF_MONTH;\r\n\r\npublic class Agenda {\r\n\r\n\r\n    private static ArrayList&lt;Compromisso&gt; agenda = new ArrayList&lt;&gt;();\r\n    private static GregorianCalendar gc;\r\n\r\n    public void addCompromisso(Compromisso compromisso) {\r\n        agenda.add(compromisso);\r\n    }\r\n\r\n    public void addCompromissoPeriodico(Compromisso compromisso, int repetirAcada, int numeroRepeticoes) {\r\n\r\n        gc = iniciarCalendar(compromisso.getDataCompromisso());\r\n\r\n        for (int i = 0; i &lt;= numeroRepeticoes; i++) {\r\n            addCompromisso(compromisso);\r\n            gc.add(DAY_OF_MONTH, repetirAcada);\r\n            compromisso.getDataCompromisso().setData(gc.getTime());\r\n        }\r\n    }\r\n\r\n    public void vizualizarCompromissos(String diaInicial, String diaFinal) throws ParseException {\r\n        DataC dataInicial;\r\n        DataC dataFinal = new DataC(diaFinal);\r\n\r\n        for (Compromisso compromisso : agenda) {\r\n            dataInicial = new DataC(diaInicial);\r\n            gc = iniciarCalendar(dataInicial);\r\n\r\n            while (dataInicial.getData().equals(dataFinal.getData())) {\r\n                if (compromisso.getDataCompromisso().getData() == dataInicial.getData()) {\r\n                    compromisso.imprimirCompromisso();\r\n                }\r\n                gc.add(DAY_OF_MONTH, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    private GregorianCalendar iniciarCalendar(DataC data) {\r\n        GregorianCalendar gc = new GregorianCalendar();\r\n        gc.setTime(data.getData());\r\n        return gc;\r\n    }\r\n\r\n\r\n    //#region Getter\r\n\r\n    public static ArrayList&lt;Compromisso&gt; getAgenda() {\r\n        return agenda;\r\n    }\r\n\r\n\r\n    //#endregion\r\n}\r\n```\r\n\r\nCompromisso.java\r\n\r\n```\r\nimport java.text.ParseException;\r\n\r\npublic class Compromisso {\r\n\r\n    //#region Atributos\r\n    private static String nome;\r\n    private static DataC dataCompromisso;\r\n\r\n    //#endregion\r\n\r\n\r\n    //#region Construtores\r\n\r\n    /**\r\n     * Inicializa o objeto compromisso a Partir de uma String nome e uma String com a data do compromisso.\r\n     *\r\n     * @param name            Espera uma String para atribuir ao objeto compromisso\r\n     * @param dataCompromisso Espera uma String no formato dd/MM/yyyy para atribuir ao objeto compromisso\r\n     */\r\n    public Compromisso(String name, String dataCompromisso) throws ParseException {\r\n        init(name, dataCompromisso);\r\n    }\r\n\r\n    /**\r\n     * Inicializa o objeto compromisso com o valor de nome &quot;N&#227;o Iniciado&quot; e a Data &quot;01/01/2022&quot;\r\n     */\r\n    public Compromisso() throws ParseException {\r\n        init(&quot;N&#227;o Iniciado&quot;, &quot;01/01/2022&quot;);\r\n    }\r\n\r\n    //#endregion\r\n\r\n\r\n    //region M&#233;todos\r\n\r\n\r\n    /**\r\n     * M&#233;todo privado utilizado para auxiliar na atribui&#231;&#227;o dos construtores\r\n     *\r\n     * @param nome            Espera uma String para atribuir o nome.\r\n     * @param dataCompromisso Espera uma String no formato dd/MM/yyyy.\r\n     * @throws ParseException Lan&#231;a uma excess&#227;o caso o formato n&#227;o corresponda ao esperado.\r\n     */\r\n    private void init(String nome, String dataCompromisso) throws ParseException {\r\n        Compromisso.nome = nome;\r\n        Compromisso.dataCompromisso = new DataC(dataCompromisso);\r\n    }\r\n\r\n    /**\r\n     * M&#233;todo utilizado para imprimir na tela, os dados do compromisso no formato String\r\n     */\r\n    public void imprimirCompromisso() {\r\n        System.out.println(nome);\r\n        System.out.println(dataCompromisso.dataEmString());\r\n    }\r\n    //#endregion\r\n\r\n    //#Region Getters\r\n\r\n    public String getNome() {\r\n        return nome;\r\n    }\r\n\r\n    public DataC getDataCompromisso() {\r\n        return dataCompromisso;\r\n    }\r\n\r\n    //#endregion\r\n}\r\n\r\n```\r\n\r\nDataC.java\r\n\r\n```\r\nimport java.util.*;\r\nimport java.text.*;\r\n\r\npublic class DataC {\r\n    \r\n    //#region Atributos\r\n    private Date data;\r\n\r\n    //#endregion\r\n\r\n    //#region Construtores\r\n\r\n\r\n    /**\r\n     *  Inicializa o objeto Data, a partir da String com a data correspondente\r\n     * @param inputUsuario Espera uma String no formato dd/MM/yyyy\r\n     * @throws ParseException Lan&#231;a excess&#227;o caso o formato do input esteja fora do padr&#227;o dd/MM/yyyy\r\n     */\r\n    DataC(String inputUsuario) throws ParseException {\r\n        init(inputUsuario);\r\n    }\r\n\r\n\r\n    /**\r\n     * Inicializa o objeto data com o valor &quot;01/01/2022 caso n&#227;o seja passado nenhum par&#226;metro&quot;\r\n     */\r\n    DataC() throws ParseException {\r\n        init(&quot;01/01/2022&quot;);\r\n    }\r\n\r\n    //#endregion\r\n\r\n\r\n    //#region M&#233;todos\r\n\r\n    /**\r\n     *  M&#233;todo privado utilizado para iniciar os construtores\r\n     * @param inputUsuario Espera uma String no formato &quot;dd/MM/yyyy&quot;\r\n     * @throws ParseException Lan&#231;a excess&#227;o caso o formato do input esteja fora do padr&#227;o dd/MM/yyyy\r\n     */\r\n    private void init(String inputUsuario) throws ParseException {\r\n        SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n        this.data = sdf1.parse(inputUsuario);\r\n    }\r\n\r\n    /**\r\n     * M&#233;todo que converte a variavel date para String\r\n     * @return Retorna uma String no formato &quot;dd/MM/yyyy&quot;\r\n     */\r\n    public String dataEmString() {\r\n        DateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n        return dateFormat.format(this.data);\r\n    }\r\n\r\n    //#endregion\r\n\r\n\r\n    //#region Getters &amp; Setters\r\n\r\n    public Date getData() {\r\n        return data;\r\n    }\r\n    public void setData(Date data) {\r\n        this.data = data;\r\n    }\r\n    //#endregion\r\n\r\n}\r\n```\r\n\r\nTestAgenda.java\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class TestAgenda {\r\n\r\n    private static Agenda agenda = new Agenda();\r\n    private static Compromisso compromisso;\r\n\r\n    static {\r\n        try {\r\n            compromisso = new Compromisso(&quot;Aniversario&quot;, &quot;20/04/2003&quot;);\r\n        } catch (ParseException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\n    @Test\r\n    public void insereNaLista() {\r\n\r\n        agenda.addCompromisso(compromisso);\r\n        assertEquals(Agenda.getAgenda().get(0).getNome(), &quot;Aniversario&quot;);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nTestCompromisso.java\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class TestCompromisso {\r\n    @Test\r\n    public void criarCerto() throws ParseException {\r\n        Compromisso compromisso = new Compromisso(&quot;Meu aniversario&quot;, &quot;20/04/2003&quot;);\r\n        assertEquals(compromisso.getNome(), &quot;Meu aniversario&quot;);\r\n        assertEquals(compromisso.getDataCompromisso().dataEmString(), &quot;20/04/2003&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void criarCertoVazio() throws ParseException {\r\n        Compromisso compromisso = new Compromisso();\r\n        assertEquals(compromisso.getNome(), &quot;N&#227;o Iniciado&quot;);\r\n        assertEquals(compromisso.getDataCompromisso().dataEmString(), &quot;01/01/2022&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nTestData.java\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class TestData {\r\n    @Test\r\n    void imprimirCorreto() throws ParseException {\r\n        DataC dataUsuario = new DataC(&quot;20/04/2003&quot;);\r\n        String dataConvertida = dataUsuario.dataEmString();\r\n        assertEquals(dataConvertida, &quot;20/04/2003&quot;);\r\n    }\r\n\r\n    @Test\r\n     void criarData() throws ParseException {\r\n        DataC dataUsuario = new DataC(&quot;20/04/2003&quot;);\r\n        assertEquals(dataUsuario.dataEmString(), &quot;20/04/2003&quot;);\r\n    }\r\n\r\n    @Test\r\n    void criarDataVazia() throws ParseException {\r\n        DataC dataUsuario = new DataC();\r\n        assertEquals(dataUsuario.dataEmString(), &quot;01/01/2022&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nPlease don&#39;t worry with the code qualit.\r\n\r\nWhe i run the code workink:\r\n\r\n[![Run the code][2]][2]\r\n\r\nBut if i run the tests hangs on message &quot;Resolving launch configuration&quot; like the image below:\r\n\r\n[![Resolving launch configuration][3]][3]\r\n\r\nI tried a lot of thing. Downgrade extensions and packejes, conect in anoter network, change the folder and paths. I tried install the *.jar from other place but I can&#39;t run in vs code. I verify and change references. Nothing worked. \r\n\r\nI using Windows 10 in the last update version, 64 bits.\r\n \r\n  [1]: https://i.stack.imgur.com/b1wZE.png\r\n  [2]: https://i.stack.imgur.com/nVcF6.png\r\n  [3]: https://i.stack.imgur.com/PSN82.png","title":"I can&#39;t run tests with JUnit Jupyter. Hangs on message &quot;Resolving launch configuration&quot;. How to fix it?","body":"<p>I'm using the Junit Jupiter. I installed by vscode. This is my lib junit-platform-console-standalone-1.9.0.jar in vs code :</p>\n<p><a href=\"https://i.stack.imgur.com/b1wZE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b1wZE.png\" alt=\"lib junit-platform-console-standalone-1.9.0.jar\" /></a></p>\n<p>My files are :</p>\n<p>Main.java</p>\n<pre><code>import java.text.ParseException;\nimport java.text.SimpleDateFormat;\n\npublic class Main {\n    public static void main(String[] args) throws ParseException {\n        Agenda agenda = new Agenda();\n        Compromisso compromisso = new Compromisso(&quot;Matheus&quot;, &quot;31/08/2022&quot;);\n        agenda.addCompromissoPeriodico(compromisso, 7,3);\n        for (int i = 0; i &lt; agenda.getAgenda().size(); i++) {\n            System.out.print(agenda.getAgenda().get(i).getNome());\n            SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n            System.out.print(agenda.getAgenda().get(i).getDataCompromisso().getData());\n        }\n\n    }\n}\n</code></pre>\n<p>Agenda.java</p>\n<pre><code>import java.text.ParseException;\nimport java.util.ArrayList;\nimport java.util.GregorianCalendar;\n\nimport static java.util.Calendar.DAY_OF_MONTH;\n\npublic class Agenda {\n\n\n    private static ArrayList&lt;Compromisso&gt; agenda = new ArrayList&lt;&gt;();\n    private static GregorianCalendar gc;\n\n    public void addCompromisso(Compromisso compromisso) {\n        agenda.add(compromisso);\n    }\n\n    public void addCompromissoPeriodico(Compromisso compromisso, int repetirAcada, int numeroRepeticoes) {\n\n        gc = iniciarCalendar(compromisso.getDataCompromisso());\n\n        for (int i = 0; i &lt;= numeroRepeticoes; i++) {\n            addCompromisso(compromisso);\n            gc.add(DAY_OF_MONTH, repetirAcada);\n            compromisso.getDataCompromisso().setData(gc.getTime());\n        }\n    }\n\n    public void vizualizarCompromissos(String diaInicial, String diaFinal) throws ParseException {\n        DataC dataInicial;\n        DataC dataFinal = new DataC(diaFinal);\n\n        for (Compromisso compromisso : agenda) {\n            dataInicial = new DataC(diaInicial);\n            gc = iniciarCalendar(dataInicial);\n\n            while (dataInicial.getData().equals(dataFinal.getData())) {\n                if (compromisso.getDataCompromisso().getData() == dataInicial.getData()) {\n                    compromisso.imprimirCompromisso();\n                }\n                gc.add(DAY_OF_MONTH, 1);\n            }\n        }\n    }\n\n    private GregorianCalendar iniciarCalendar(DataC data) {\n        GregorianCalendar gc = new GregorianCalendar();\n        gc.setTime(data.getData());\n        return gc;\n    }\n\n\n    //#region Getter\n\n    public static ArrayList&lt;Compromisso&gt; getAgenda() {\n        return agenda;\n    }\n\n\n    //#endregion\n}\n</code></pre>\n<p>Compromisso.java</p>\n<pre><code>import java.text.ParseException;\n\npublic class Compromisso {\n\n    //#region Atributos\n    private static String nome;\n    private static DataC dataCompromisso;\n\n    //#endregion\n\n\n    //#region Construtores\n\n    /**\n     * Inicializa o objeto compromisso a Partir de uma String nome e uma String com a data do compromisso.\n     *\n     * @param name            Espera uma String para atribuir ao objeto compromisso\n     * @param dataCompromisso Espera uma String no formato dd/MM/yyyy para atribuir ao objeto compromisso\n     */\n    public Compromisso(String name, String dataCompromisso) throws ParseException {\n        init(name, dataCompromisso);\n    }\n\n    /**\n     * Inicializa o objeto compromisso com o valor de nome &quot;No Iniciado&quot; e a Data &quot;01/01/2022&quot;\n     */\n    public Compromisso() throws ParseException {\n        init(&quot;No Iniciado&quot;, &quot;01/01/2022&quot;);\n    }\n\n    //#endregion\n\n\n    //region Mtodos\n\n\n    /**\n     * Mtodo privado utilizado para auxiliar na atribuio dos construtores\n     *\n     * @param nome            Espera uma String para atribuir o nome.\n     * @param dataCompromisso Espera uma String no formato dd/MM/yyyy.\n     * @throws ParseException Lana uma excesso caso o formato no corresponda ao esperado.\n     */\n    private void init(String nome, String dataCompromisso) throws ParseException {\n        Compromisso.nome = nome;\n        Compromisso.dataCompromisso = new DataC(dataCompromisso);\n    }\n\n    /**\n     * Mtodo utilizado para imprimir na tela, os dados do compromisso no formato String\n     */\n    public void imprimirCompromisso() {\n        System.out.println(nome);\n        System.out.println(dataCompromisso.dataEmString());\n    }\n    //#endregion\n\n    //#Region Getters\n\n    public String getNome() {\n        return nome;\n    }\n\n    public DataC getDataCompromisso() {\n        return dataCompromisso;\n    }\n\n    //#endregion\n}\n\n</code></pre>\n<p>DataC.java</p>\n<pre><code>import java.util.*;\nimport java.text.*;\n\npublic class DataC {\n    \n    //#region Atributos\n    private Date data;\n\n    //#endregion\n\n    //#region Construtores\n\n\n    /**\n     *  Inicializa o objeto Data, a partir da String com a data correspondente\n     * @param inputUsuario Espera uma String no formato dd/MM/yyyy\n     * @throws ParseException Lana excesso caso o formato do input esteja fora do padro dd/MM/yyyy\n     */\n    DataC(String inputUsuario) throws ParseException {\n        init(inputUsuario);\n    }\n\n\n    /**\n     * Inicializa o objeto data com o valor &quot;01/01/2022 caso no seja passado nenhum parmetro&quot;\n     */\n    DataC() throws ParseException {\n        init(&quot;01/01/2022&quot;);\n    }\n\n    //#endregion\n\n\n    //#region Mtodos\n\n    /**\n     *  Mtodo privado utilizado para iniciar os construtores\n     * @param inputUsuario Espera uma String no formato &quot;dd/MM/yyyy&quot;\n     * @throws ParseException Lana excesso caso o formato do input esteja fora do padro dd/MM/yyyy\n     */\n    private void init(String inputUsuario) throws ParseException {\n        SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n        this.data = sdf1.parse(inputUsuario);\n    }\n\n    /**\n     * Mtodo que converte a variavel date para String\n     * @return Retorna uma String no formato &quot;dd/MM/yyyy&quot;\n     */\n    public String dataEmString() {\n        DateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n        return dateFormat.format(this.data);\n    }\n\n    //#endregion\n\n\n    //#region Getters &amp; Setters\n\n    public Date getData() {\n        return data;\n    }\n    public void setData(Date data) {\n        this.data = data;\n    }\n    //#endregion\n\n}\n</code></pre>\n<p>TestAgenda.java</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.text.ParseException;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class TestAgenda {\n\n    private static Agenda agenda = new Agenda();\n    private static Compromisso compromisso;\n\n    static {\n        try {\n            compromisso = new Compromisso(&quot;Aniversario&quot;, &quot;20/04/2003&quot;);\n        } catch (ParseException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n\n    @Test\n    public void insereNaLista() {\n\n        agenda.addCompromisso(compromisso);\n        assertEquals(Agenda.getAgenda().get(0).getNome(), &quot;Aniversario&quot;);\n    }\n\n\n}\n</code></pre>\n<p>TestCompromisso.java</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.text.ParseException;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class TestCompromisso {\n    @Test\n    public void criarCerto() throws ParseException {\n        Compromisso compromisso = new Compromisso(&quot;Meu aniversario&quot;, &quot;20/04/2003&quot;);\n        assertEquals(compromisso.getNome(), &quot;Meu aniversario&quot;);\n        assertEquals(compromisso.getDataCompromisso().dataEmString(), &quot;20/04/2003&quot;);\n    }\n\n    @Test\n    public void criarCertoVazio() throws ParseException {\n        Compromisso compromisso = new Compromisso();\n        assertEquals(compromisso.getNome(), &quot;No Iniciado&quot;);\n        assertEquals(compromisso.getDataCompromisso().dataEmString(), &quot;01/01/2022&quot;);\n    }\n\n}\n\n</code></pre>\n<p>TestData.java</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.text.ParseException;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class TestData {\n    @Test\n    void imprimirCorreto() throws ParseException {\n        DataC dataUsuario = new DataC(&quot;20/04/2003&quot;);\n        String dataConvertida = dataUsuario.dataEmString();\n        assertEquals(dataConvertida, &quot;20/04/2003&quot;);\n    }\n\n    @Test\n     void criarData() throws ParseException {\n        DataC dataUsuario = new DataC(&quot;20/04/2003&quot;);\n        assertEquals(dataUsuario.dataEmString(), &quot;20/04/2003&quot;);\n    }\n\n    @Test\n    void criarDataVazia() throws ParseException {\n        DataC dataUsuario = new DataC();\n        assertEquals(dataUsuario.dataEmString(), &quot;01/01/2022&quot;);\n    }\n\n}\n\n</code></pre>\n<p>Please don't worry with the code qualit.</p>\n<p>Whe i run the code workink:</p>\n<p><a href=\"https://i.stack.imgur.com/nVcF6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nVcF6.png\" alt=\"Run the code\" /></a></p>\n<p>But if i run the tests hangs on message &quot;Resolving launch configuration&quot; like the image below:</p>\n<p><a href=\"https://i.stack.imgur.com/PSN82.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PSN82.png\" alt=\"Resolving launch configuration\" /></a></p>\n<p>I tried a lot of thing. Downgrade extensions and packejes, conect in anoter network, change the folder and paths. I tried install the *.jar from other place but I can't run in vs code. I verify and change references. Nothing worked.</p>\n<p>I using Windows 10 in the last update version, 64 bits.</p>\n"},{"tags":["java","spring","reactive-programming","spring-webflux"],"answers":[{"comments":[{"owner":{"account_id":9606247,"reputation":1346,"user_id":9236477,"accept_rate":100,"display_name":"Kaigo"},"score":0,"creation_date":1693498244,"post_id":75305851,"comment_id":135772257,"body_markdown":"this doesn&#39;t work `no instance(s) of type variable(s) R exist so that Boolean conforms to Mono&lt;? extends R&gt;`","body":"this doesn&#39;t work <code>no instance(s) of type variable(s) R exist so that Boolean conforms to Mono&lt;? extends R&gt;</code>"}],"tags":[],"owner":{"account_id":374094,"reputation":6654,"user_id":724109,"accept_rate":100,"display_name":"Avishek Bhattacharya"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675227553,"creation_date":1675227553,"answer_id":75305851,"question_id":75305658,"body_markdown":"You can do something like this \r\n\r\n      \r\n      Mono&lt;Boolean&gt; flag = // initialize this;\r\n\r\n      flag.flatMap(valie -&gt; {\r\n         if (Boolean.FALSE.equals(value)) {\r\n             return false;\r\n         } else {\r\n            return true;\r\n         }\r\n\r\n      })","title":"How to extract boolean value out of a Mono&lt;Object&gt; in a non blocking way","body":"<p>You can do something like this</p>\n<pre><code>  Mono&lt;Boolean&gt; flag = // initialize this;\n\n  flag.flatMap(valie -&gt; {\n     if (Boolean.FALSE.equals(value)) {\n         return false;\n     } else {\n        return true;\n     }\n\n  })\n</code></pre>\n"}],"owner":{"account_id":26467716,"reputation":27,"user_id":20108700,"display_name":"Mohammed Idris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675227553,"creation_date":1675225699,"question_id":75305658,"body_markdown":"I have a validation method which involves **reactive** and **non reactive** objects. \r\n```\r\nprivate boolean filterByName(String student, Mono&lt;String&gt; teacher) {\r\n      if (student.startsWith(&quot;A&quot;)) return true; \r\n       else if(teacher.startsWith(&quot;B&quot;)) return false; //however teacher is Mono&lt;String&gt; \r\n} \r\n\r\n```\r\n**Question:** How can I return a `boolean` value after successful check of `Mono&lt;String&gt;` without using `block` or `subscribe`\r\n\r\nThe method which calls `filterByName` is used in another **reactive** method: \r\n\r\n```\r\npublic Mono&lt;Student&gt; validateStudent(Student student) {\r\n    return Mono.just(student)\r\n        .filter(this::filterByName)\r\n        .switchIfEmpty(Mono.error(new Exception(&quot;Validation Failed&quot;)));\r\n                        \r\n  }\r\n```\r\n\r\nPlease help me with a way to return a `boolean` successfully without blocking any `Mono`\r\n\r\nI am new to Reactive programming. Any help is appreciated. Thanks in advance. ","title":"How to extract boolean value out of a Mono&lt;Object&gt; in a non blocking way","body":"<p>I have a validation method which involves <strong>reactive</strong> and <strong>non reactive</strong> objects.</p>\n<pre><code>private boolean filterByName(String student, Mono&lt;String&gt; teacher) {\n      if (student.startsWith(&quot;A&quot;)) return true; \n       else if(teacher.startsWith(&quot;B&quot;)) return false; //however teacher is Mono&lt;String&gt; \n} \n\n</code></pre>\n<p><strong>Question:</strong> How can I return a <code>boolean</code> value after successful check of <code>Mono&lt;String&gt;</code> without using <code>block</code> or <code>subscribe</code></p>\n<p>The method which calls <code>filterByName</code> is used in another <strong>reactive</strong> method:</p>\n<pre><code>public Mono&lt;Student&gt; validateStudent(Student student) {\n    return Mono.just(student)\n        .filter(this::filterByName)\n        .switchIfEmpty(Mono.error(new Exception(&quot;Validation Failed&quot;)));\n                        \n  }\n</code></pre>\n<p>Please help me with a way to return a <code>boolean</code> successfully without blocking any <code>Mono</code></p>\n<p>I am new to Reactive programming. Any help is appreciated. Thanks in advance.</p>\n"},{"tags":["java","jmc"],"answers":[{"tags":[],"owner":{"account_id":17161337,"reputation":606,"user_id":12420917,"display_name":"Tamzid Ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674627976,"creation_date":1674627976,"answer_id":75230358,"question_id":75205766,"body_markdown":"To find heap size, you can use the `totalMemory()` and `maxMemory()` methods of the Runtime class.\r\n\r\n    long heapSize = Runtime.getRuntime().totalMemory();\r\n    long heapMaxSize = Runtime.getRuntime().maxMemory();\r\n\r\nTo measure the time taken by a particular method call, you can use the System.nanoTime() method to get the current time before and after the method call and calculate the difference.\r\n\r\n    long startTime = System.nanoTime();\r\n    // method call here\r\n    long endTime = System.nanoTime();\r\n    long duration = (endTime - startTime);\r\n\r\nYou can also use the `-XX:+PrintGCDetails` JVM option to get more detailed information about garbage collection and memory usage.\r\n\r\n\r\n","title":"Java Performance: In Java Machine Control How to find heap size , time frame and memory stats for a particular method call","body":"<p>To find heap size, you can use the <code>totalMemory()</code> and <code>maxMemory()</code> methods of the Runtime class.</p>\n<pre><code>long heapSize = Runtime.getRuntime().totalMemory();\nlong heapMaxSize = Runtime.getRuntime().maxMemory();\n</code></pre>\n<p>To measure the time taken by a particular method call, you can use the System.nanoTime() method to get the current time before and after the method call and calculate the difference.</p>\n<pre><code>long startTime = System.nanoTime();\n// method call here\nlong endTime = System.nanoTime();\nlong duration = (endTime - startTime);\n</code></pre>\n<p>You can also use the <code>-XX:+PrintGCDetails</code> JVM option to get more detailed information about garbage collection and memory usage.</p>\n"},{"tags":[],"owner":{"account_id":16801428,"reputation":920,"user_id":12146581,"display_name":"Mohamad Ghaith Alzin"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674630870,"creation_date":1674629149,"answer_id":75230507,"question_id":75205766,"body_markdown":"I&#39;ve written a program to show you how to implement that in **JAVA**.\r\nPlease note that I am on **Mac** and I&#39;ve run the program on **Netbeans IDE 16**.\r\n\r\nNow, in the code below I used [System.nanoTime()][1] to get the taken time to run the code inside **yourFunc()**\r\n\r\nFor more details [System.currentTimeMillis vs System.nanoTime][2]\r\n\r\nTo get the **heap size** for the executed code [ManagementFactory][3] class that has a function [getMemoryMXBean()][4] which returns the managed bean for the memory system of the Java virtual machine.\r\n\r\nThen with [getHeapMemoryUsage()][5] and [getUsed()][6] that gets the size used to allocate objects in the program.\r\n\r\nAlso By using [totalMemory()][7] &amp; [freeMemory()][8], you can calculate the memory used by the function as shown below.\r\n\r\n    import java.lang.management.ManagementFactory;\r\n    import java.lang.management.MemoryMXBean;\r\n    \r\n    /**\r\n     *\r\n     * @author ghaith\r\n     */\r\n    public class JavaPerformance {\r\n    \r\n        public static void main(String[] args) {\r\n            \r\n            long totalMemoryBefore = Runtime.getRuntime().totalMemory();\r\n            long freeMemoryBefore = Runtime.getRuntime().freeMemory();\r\n            \r\n            long timeBeforeCall = System.nanoTime();\r\n            yourFunc();\r\n            long timeAfterCall = System.nanoTime();\r\n            \r\n            long totalMemoryAfter = Runtime.getRuntime().totalMemory();\r\n            long freeMemoryAfter = Runtime.getRuntime().freeMemory();\r\n            long memoryUsed = (totalMemoryAfter - freeMemoryAfter) - (totalMemoryBefore - freeMemoryBefore);\r\n            System.out.println(&quot;Memory used: &quot; + memoryUsed / (1024 * 1024) + &quot;MB&quot;);\r\n            \r\n            long timeSpentRunningTheFunc = timeAfterCall - timeBeforeCall;\r\n            System.out.println(&quot;Elapsed Time: &quot; + timeSpentRunningTheFunc + &quot;ns&quot;);\r\n            \r\n            MemoryMXBean mBean = ManagementFactory.getMemoryMXBean();\r\n            System.out.println(&quot;Heap size: &quot; + \r\n                    mBean.getHeapMemoryUsage().getUsed() / (1024 * 1024) + &quot;MB&quot;);\r\n        }\r\n        \r\n        public static void yourFunc() {\r\n            for (int i = 0 ; i &lt; 100000 ; i++) {\r\n                System.out.println(&quot;Inside yourFunc with index &quot; + i);\r\n            }\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n&gt; Inside yourFunc with index 0\r\n&gt; \r\n&gt; ...\r\n&gt; \r\n&gt; Inside yourFunc with index 99999\r\n&gt; \r\n&gt; Memory used: 34MB\r\n&gt;\r\n&gt; Elapsed Time: 2603351891ns\r\n&gt; \r\n&gt; \r\n&gt; Heap size: 37MB\r\n\r\n\r\n  \r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime()\r\n  [2]: https://stackoverflow.com/a/351571/12146581\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html\r\n  [4]: https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html#getMemoryMXBean()\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/lang/management/MemoryMXBean.html#getHeapMemoryUsage--\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/lang/management/MemoryUsage.html\r\n  [7]: https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#totalMemory()\r\n  [8]: https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#freeMemory--","title":"Java Performance: In Java Machine Control How to find heap size , time frame and memory stats for a particular method call","body":"<p>I've written a program to show you how to implement that in <strong>JAVA</strong>.\nPlease note that I am on <strong>Mac</strong> and I've run the program on <strong>Netbeans IDE 16</strong>.</p>\n<p>Now, in the code below I used <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime()\" rel=\"nofollow noreferrer\">System.nanoTime()</a> to get the taken time to run the code inside <strong>yourFunc()</strong></p>\n<p>For more details <a href=\"https://stackoverflow.com/a/351571/12146581\">System.currentTimeMillis vs System.nanoTime</a></p>\n<p>To get the <strong>heap size</strong> for the executed code <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html\" rel=\"nofollow noreferrer\">ManagementFactory</a> class that has a function <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html#getMemoryMXBean()\" rel=\"nofollow noreferrer\">getMemoryMXBean()</a> which returns the managed bean for the memory system of the Java virtual machine.</p>\n<p>Then with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/management/MemoryMXBean.html#getHeapMemoryUsage--\" rel=\"nofollow noreferrer\">getHeapMemoryUsage()</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/management/MemoryUsage.html\" rel=\"nofollow noreferrer\">getUsed()</a> that gets the size used to allocate objects in the program.</p>\n<p>Also By using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#totalMemory()\" rel=\"nofollow noreferrer\">totalMemory()</a> &amp; <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#freeMemory--\" rel=\"nofollow noreferrer\">freeMemory()</a>, you can calculate the memory used by the function as shown below.</p>\n<pre><code>import java.lang.management.ManagementFactory;\nimport java.lang.management.MemoryMXBean;\n\n/**\n *\n * @author ghaith\n */\npublic class JavaPerformance {\n\n    public static void main(String[] args) {\n        \n        long totalMemoryBefore = Runtime.getRuntime().totalMemory();\n        long freeMemoryBefore = Runtime.getRuntime().freeMemory();\n        \n        long timeBeforeCall = System.nanoTime();\n        yourFunc();\n        long timeAfterCall = System.nanoTime();\n        \n        long totalMemoryAfter = Runtime.getRuntime().totalMemory();\n        long freeMemoryAfter = Runtime.getRuntime().freeMemory();\n        long memoryUsed = (totalMemoryAfter - freeMemoryAfter) - (totalMemoryBefore - freeMemoryBefore);\n        System.out.println(&quot;Memory used: &quot; + memoryUsed / (1024 * 1024) + &quot;MB&quot;);\n        \n        long timeSpentRunningTheFunc = timeAfterCall - timeBeforeCall;\n        System.out.println(&quot;Elapsed Time: &quot; + timeSpentRunningTheFunc + &quot;ns&quot;);\n        \n        MemoryMXBean mBean = ManagementFactory.getMemoryMXBean();\n        System.out.println(&quot;Heap size: &quot; + \n                mBean.getHeapMemoryUsage().getUsed() / (1024 * 1024) + &quot;MB&quot;);\n    }\n    \n    public static void yourFunc() {\n        for (int i = 0 ; i &lt; 100000 ; i++) {\n            System.out.println(&quot;Inside yourFunc with index &quot; + i);\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>Inside yourFunc with index 0</p>\n<p>...</p>\n<p>Inside yourFunc with index 99999</p>\n<p>Memory used: 34MB</p>\n<p>Elapsed Time: 2603351891ns</p>\n<p>Heap size: 37MB</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":903826,"reputation":646,"user_id":939217,"display_name":"Mostafa Nazari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675151055,"creation_date":1675151055,"answer_id":75294024,"question_id":75205766,"body_markdown":"in `Memory` section | `Allocation` Tab, you can find out which where specified objects are allocated memory\r\n\r\nin `Event` section | `Graph` , and `Thread` section | `Latencies` there is some information about function call time\r\n\r\nyou can read [this article][1] and watch [these slides][2] , there are simple notes about `JMC` \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks001.html\r\n  [2]: https://www-acc.gsi.de/wiki/pub/Applications/AppWorkshopJava20150217/20150217_Java8WS_JavaMissionControl.pdf","title":"Java Performance: In Java Machine Control How to find heap size , time frame and memory stats for a particular method call","body":"<p>in <code>Memory</code> section | <code>Allocation</code> Tab, you can find out which where specified objects are allocated memory</p>\n<p>in <code>Event</code> section | <code>Graph</code> , and <code>Thread</code> section | <code>Latencies</code> there is some information about function call time</p>\n<p>you can read <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks001.html\" rel=\"nofollow noreferrer\">this article</a> and watch <a href=\"https://www-acc.gsi.de/wiki/pub/Applications/AppWorkshopJava20150217/20150217_Java8WS_JavaMissionControl.pdf\" rel=\"nofollow noreferrer\">these slides</a> , there are simple notes about <code>JMC</code></p>\n"}],"owner":{"account_id":3464234,"reputation":844,"user_id":2900314,"accept_rate":86,"display_name":"User27854"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1675227347,"creation_date":1674449570,"question_id":75205766,"body_markdown":"Using Java Mission Control is it possible for us to find heap size, time frame and memory stats for a particular method call. In method profiling section, I am unable for figure out those!! ","title":"Java Performance: In Java Machine Control How to find heap size , time frame and memory stats for a particular method call","body":"<p>Using Java Mission Control is it possible for us to find heap size, time frame and memory stats for a particular method call. In method profiling section, I am unable for figure out those!!</p>\n"},{"tags":["java","activemq"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":1,"creation_date":1675226425,"post_id":75305467,"comment_id":132880940,"body_markdown":"If you eliminate Docker from the equation and just run the broker on &quot;bare metal&quot; does the problem still occur?","body":"If you eliminate Docker from the equation and just run the broker on &quot;bare metal&quot; does the problem still occur?"},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1675303183,"post_id":75305467,"comment_id":132901954,"body_markdown":"I tried to do this already but Macbook laptop will not run the broker because `macOS cannot verify that this app is free from malware` and we cannot add the security exception as we don&#39;t have admin access to our machines.","body":"I tried to do this already but Macbook laptop will not run the broker because <code>macOS cannot verify that this app is free from malware</code> and we cannot add the security exception as we don&#39;t have admin access to our machines."},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1675349060,"post_id":75305467,"comment_id":132913403,"body_markdown":"I can&#39;t really help you with that unfortunately.","body":"I can&#39;t really help you with that unfortunately."}],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675225885,"creation_date":1675223431,"question_id":75305467,"body_markdown":"We use IBM MQ for some JMS integration between some of our micro services. Because IBM MQ docker image does not run on Mac book laptops with Apple M1 processor we configured our applications requiring JMS integration to be able to run against ActiveMQ broker as well.\r\n\r\nWe use the latest version of ActiveMQ classic which is 5.17.3 and we run it as a docker container.\r\n\r\nFor most of us who tried to run against ActiveMQ everything works OK but we have a colleague that is unable to start the application because it fails to connect to the ActiveMQ broker. All we can see in the application logs is this:\r\n\r\n        Caused by: javax.jms.JMSException: Cannot send, channel has already failed: tcp://127.0.0.1:61616\r\n                        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:80)\r\n                        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1423)\r\n                        at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1488)\r\n                        at org.apache.activemq.ActiveMQXAConnection.createSession(ActiveMQXAConnection.java:74)\r\n                        at org.apache.activemq.ActiveMQXAConnection.createXASession(ActiveMQXAConnection.java:61)\r\n                        at com.atomikos.datasource.xa.jms.JmsTransactionalResource.refreshXAConnection(JmsTransactionalResource.java:74)\r\n                        ... 10 common frames omitted\r\n        Caused by: org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed: tcp://127.0.0.1:61616\r\n                        at org.apache.activemq.transport.AbstractInactivityMonitor.doOnewaySend(AbstractInactivityMonitor.java:329)\r\n                        at org.apache.activemq.transport.AbstractInactivityMonitor.oneway(AbstractInactivityMonitor.java:318)\r\n                        at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:94)\r\n                        at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:116)\r\n                        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)\r\n                        at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)\r\n                        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)\r\n                        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1394)\r\n                        ... 14 common frames omitted\r\n\r\n\r\nGoogling for `org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed` brought us some old internet posts but none of them brought any light.\r\n\r\nPart of the ActiveMQ docker logs we can see below log entry after broker is started which makes us think the broker is started OK. Also he can access the ActiveMQ admin console when hitting http://localhost:8161/admin URL\r\n\r\n    INFO | Listening for connections at : tcp://somelaptopid:61616?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600\r\n\r\n\r\n","title":"Cannot connect to ActiveMQ &quot;Classic&quot;","body":"<p>We use IBM MQ for some JMS integration between some of our micro services. Because IBM MQ docker image does not run on Mac book laptops with Apple M1 processor we configured our applications requiring JMS integration to be able to run against ActiveMQ broker as well.</p>\n<p>We use the latest version of ActiveMQ classic which is 5.17.3 and we run it as a docker container.</p>\n<p>For most of us who tried to run against ActiveMQ everything works OK but we have a colleague that is unable to start the application because it fails to connect to the ActiveMQ broker. All we can see in the application logs is this:</p>\n<pre><code>    Caused by: javax.jms.JMSException: Cannot send, channel has already failed: tcp://127.0.0.1:61616\n                    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:80)\n                    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1423)\n                    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1488)\n                    at org.apache.activemq.ActiveMQXAConnection.createSession(ActiveMQXAConnection.java:74)\n                    at org.apache.activemq.ActiveMQXAConnection.createXASession(ActiveMQXAConnection.java:61)\n                    at com.atomikos.datasource.xa.jms.JmsTransactionalResource.refreshXAConnection(JmsTransactionalResource.java:74)\n                    ... 10 common frames omitted\n    Caused by: org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed: tcp://127.0.0.1:61616\n                    at org.apache.activemq.transport.AbstractInactivityMonitor.doOnewaySend(AbstractInactivityMonitor.java:329)\n                    at org.apache.activemq.transport.AbstractInactivityMonitor.oneway(AbstractInactivityMonitor.java:318)\n                    at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:94)\n                    at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:116)\n                    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)\n                    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)\n                    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)\n                    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1394)\n                    ... 14 common frames omitted\n</code></pre>\n<p>Googling for <code>org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed</code> brought us some old internet posts but none of them brought any light.</p>\n<p>Part of the ActiveMQ docker logs we can see below log entry after broker is started which makes us think the broker is started OK. Also he can access the ActiveMQ admin console when hitting http://localhost:8161/admin URL</p>\n<pre><code>INFO | Listening for connections at : tcp://somelaptopid:61616?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600\n</code></pre>\n"},{"tags":["java","kotlin","javafx","gridview","controlsfx"],"owner":{"account_id":27614734,"reputation":11,"user_id":21077034,"display_name":"Iguanastin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675225682,"creation_date":1675225682,"question_id":75305656,"body_markdown":"```\r\nfun ensureVisible(item: T) {\r\n    // Gross workaround. Couldn&#39;t find any other solution\r\n    for (n in children) {\r\n        if (n is VirtualFlow&lt;*&gt;) {\r\n            n.scrollTo(items.indexOf(item) / getItemsInRow())\r\n            break\r\n        }\r\n    }\r\n}\r\n\r\nprivate fun getItemsInRow(): Int = (skin as GridViewSkin&lt;*&gt;).computeMaxCellsInRow()\r\n```\r\n\r\nI&#39;ve been using this fairly hacky workaround to scroll a ControlsFX [GridView](https://controlsfx.github.io/javadoc/11.1.2/org.controlsfx.controls/org/controlsfx/control/GridView.html) to a specified item, and it served me well up until I packaged my app with JPackage. Everything else works exactly as expected and I don&#39;t have any errors, but the behavior is different only when packaged. Normally, when scrolling to the last element, the function scrolls down just far enough that the row containing the Cell is only just in view (e.g. at the bottom of the GridView). However, when my app is packaged with jpackage and I call my `ensureVisible(item)` function for the last item in the GridView, it scrolls until the last row is at the TOP of the GridView.\r\n\r\nFor reference, my project is built with maven using:\r\n\r\n- Windows 10\r\n- Kotlin 1.7.10\r\n- JDK 17.0.6\r\n- JavaFX 19.0.2.1\r\n- ControlsFX 11.1.2\r\n\r\nI&#39;m using the same packages and modules in my IDE, where it behaves as expected, as I&#39;ve used in the jpackage&#39;d app. As far as I can tell, there&#39;s hardly any information about how to scroll a GridView to a specific element in the first place, and I&#39;ve found absolutely nothing about this behavior anywhere.\r\n\r\nThere isn&#39;t really an alternative to the ControlsFX GridView, either, as I rely on the recycled cells only generating nodes/views for visible elements.\r\n\r\nIs there a better way to scroll to specific items in a GridView? If not, why might this behavior be changing for no apparent reason?","title":"Programmatically scrolling to a specific item in a ControlsFX GridView","body":"<pre><code>fun ensureVisible(item: T) {\n    // Gross workaround. Couldn't find any other solution\n    for (n in children) {\n        if (n is VirtualFlow&lt;*&gt;) {\n            n.scrollTo(items.indexOf(item) / getItemsInRow())\n            break\n        }\n    }\n}\n\nprivate fun getItemsInRow(): Int = (skin as GridViewSkin&lt;*&gt;).computeMaxCellsInRow()\n</code></pre>\n<p>I've been using this fairly hacky workaround to scroll a ControlsFX <a href=\"https://controlsfx.github.io/javadoc/11.1.2/org.controlsfx.controls/org/controlsfx/control/GridView.html\" rel=\"nofollow noreferrer\">GridView</a> to a specified item, and it served me well up until I packaged my app with JPackage. Everything else works exactly as expected and I don't have any errors, but the behavior is different only when packaged. Normally, when scrolling to the last element, the function scrolls down just far enough that the row containing the Cell is only just in view (e.g. at the bottom of the GridView). However, when my app is packaged with jpackage and I call my <code>ensureVisible(item)</code> function for the last item in the GridView, it scrolls until the last row is at the TOP of the GridView.</p>\n<p>For reference, my project is built with maven using:</p>\n<ul>\n<li>Windows 10</li>\n<li>Kotlin 1.7.10</li>\n<li>JDK 17.0.6</li>\n<li>JavaFX 19.0.2.1</li>\n<li>ControlsFX 11.1.2</li>\n</ul>\n<p>I'm using the same packages and modules in my IDE, where it behaves as expected, as I've used in the jpackage'd app. As far as I can tell, there's hardly any information about how to scroll a GridView to a specific element in the first place, and I've found absolutely nothing about this behavior anywhere.</p>\n<p>There isn't really an alternative to the ControlsFX GridView, either, as I rely on the recycled cells only generating nodes/views for visible elements.</p>\n<p>Is there a better way to scroll to specific items in a GridView? If not, why might this behavior be changing for no apparent reason?</p>\n"},{"tags":["java","encryption","aes","aes-gcm","block-cipher"],"comments":[{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1675210390,"post_id":75304371,"comment_id":132878918,"body_markdown":"What is your actual problem? What is the output you wanted vs. what you actually got. How are you &#39;printing&#39; these outputs? Make a self-contained example. The accompanying text is not at all clear. A self-contained example bridges over almost all problems with explaining it.","body":"What is your actual problem? What is the output you wanted vs. what you actually got. How are you &#39;printing&#39; these outputs? Make a self-contained example. The accompanying text is not at all clear. A self-contained example bridges over almost all problems with explaining it."},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1675216336,"post_id":75304371,"comment_id":132879762,"body_markdown":"It&#39;s clearer now, but the effect you observe is not possible. Most likely something unrelated to what you describe is going on. A self-contained example would be a good idea here.","body":"It&#39;s clearer now, but the effect you observe is not possible. Most likely something unrelated to what you describe is going on. A self-contained example would be a good idea here."},{"owner":{"account_id":1191863,"reputation":4884,"user_id":1164435,"accept_rate":64,"display_name":"P basak"},"score":0,"creation_date":1675216895,"post_id":75304371,"comment_id":132879828,"body_markdown":"And for some reason, it only happens in our production, same code. Do you suspect any environmental variables?","body":"And for some reason, it only happens in our production, same code. Do you suspect any environmental variables?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1675217074,"post_id":75304371,"comment_id":132879845,"body_markdown":"it works for me. But you have little tiny confusing snippets. A complete [mre] would not take much more space.","body":"it works for me. But you have little tiny confusing snippets. A complete <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would not take much more space."}],"answers":[{"comments":[{"owner":{"account_id":1191863,"reputation":4884,"user_id":1164435,"accept_rate":64,"display_name":"P basak"},"score":0,"creation_date":1675225893,"post_id":75305556,"comment_id":132880884,"body_markdown":"I used sun jce too same output.","body":"I used sun jce too same output."},{"owner":{"account_id":1191863,"reputation":4884,"user_id":1164435,"accept_rate":64,"display_name":"P basak"},"score":0,"creation_date":1675234098,"post_id":75305556,"comment_id":132882055,"body_markdown":"Actually i used sun jce before and update returned an empty array. And my ciphertext already contains the tag. I am sending an empty byte array to diFinal. But this makes the doFinal return value truncated. Is this a bug?","body":"Actually i used sun jce before and update returned an empty array. And my ciphertext already contains the tag. I am sending an empty byte array to diFinal. But this makes the doFinal return value truncated. Is this a bug?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1675595905,"post_id":75305556,"comment_id":132959509,"body_markdown":"Your comments conflict. SunJCE returns _empty_ on update and _everything_ on doFinal; this is NOT the same as Bouncy which returns most of the data on update and only the last part on doFinal. I explained both of these. Calling doFinal with an empty byte-array is exactly the same as calling with no argument at all; I didn&#39;t distinguish these because they don&#39;t need to be distinguished. What does need to be distinguished is the provider.","body":"Your comments conflict. SunJCE returns <i>empty</i> on update and <i>everything</i> on doFinal; this is NOT the same as Bouncy which returns most of the data on update and only the last part on doFinal. I explained both of these. Calling doFinal with an empty byte-array is exactly the same as calling with no argument at all; I didn&#39;t distinguish these because they don&#39;t need to be distinguished. What does need to be distinguished is the provider."}],"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675225464,"creation_date":1675224485,"answer_id":75305556,"question_id":75304371,"body_markdown":"**You&#39;re not using SunJCE, you&#39;re using the BouncyCastle provider.** (You _are_ using the Sun/Oracle _API_ -- JCA, Java Crypto Architecture -- if that&#39;s what you meant to say, but not the _provider_ SunJCE.) \r\n\r\n**Most** Ciphers in JCA return partial data from each or any `update` call (in either encrypt or decrypt direction), thus in general if you use `update` you must concatenate that value (or those values if multiple calls) plus any value returned from `doFinal` _before_ using the result for anything that needs it to be complete, such as decoding UTF8. (Typically the easiest way is to `.write` them all to a `ByteArrayOutputStream`, or `.put` them all to a `ByteBuffer`, but there are other options.) However the SunJCE provider does NOT do this for GCM, in the decryption direction only, apparently because the spec (SP800-38D) calls for the plaintext not to be released if the authentication fails, which can only be determined at `.doFinal` time, and then it returns _all_ the plaintext. \r\n\r\nThe Bouncy provider does &#39;stream&#39; GCM decryption, arguably in violation of the spec but consistent with usual and traditional JCA behavior, so most of the data is returned from the `update` call with only the last few bytes from `doFinal` and you need to concatenate these as above -- or, as you&#39;ve found, just don&#39;t use `update` at all: if the data all fit in one buffer when encrypting, it should also fit when decrypting. \r\n\r\nThe Bouncy provider must buffer an amount of data equal to the tag so that it can remove and verify said tag; the &quot;small texts&quot; where your code works -- because decrypt `.update` returns nothing -- will be ones up to but not exceeding your tag size, which is apparently 8 bytes.\r\n","title":"Cipher.doFinal() returning part of decrypted string for a long string","body":"<p><strong>You're not using SunJCE, you're using the BouncyCastle provider.</strong> (You <em>are</em> using the Sun/Oracle <em>API</em> -- JCA, Java Crypto Architecture -- if that's what you meant to say, but not the <em>provider</em> SunJCE.)</p>\n<p><strong>Most</strong> Ciphers in JCA return partial data from each or any <code>update</code> call (in either encrypt or decrypt direction), thus in general if you use <code>update</code> you must concatenate that value (or those values if multiple calls) plus any value returned from <code>doFinal</code> <em>before</em> using the result for anything that needs it to be complete, such as decoding UTF8. (Typically the easiest way is to <code>.write</code> them all to a <code>ByteArrayOutputStream</code>, or <code>.put</code> them all to a <code>ByteBuffer</code>, but there are other options.) However the SunJCE provider does NOT do this for GCM, in the decryption direction only, apparently because the spec (SP800-38D) calls for the plaintext not to be released if the authentication fails, which can only be determined at <code>.doFinal</code> time, and then it returns <em>all</em> the plaintext.</p>\n<p>The Bouncy provider does 'stream' GCM decryption, arguably in violation of the spec but consistent with usual and traditional JCA behavior, so most of the data is returned from the <code>update</code> call with only the last few bytes from <code>doFinal</code> and you need to concatenate these as above -- or, as you've found, just don't use <code>update</code> at all: if the data all fit in one buffer when encrypting, it should also fit when decrypting.</p>\n<p>The Bouncy provider must buffer an amount of data equal to the tag so that it can remove and verify said tag; the &quot;small texts&quot; where your code works -- because decrypt <code>.update</code> returns nothing -- will be ones up to but not exceeding your tag size, which is apparently 8 bytes.</p>\n"}],"owner":{"account_id":1191863,"reputation":4884,"user_id":1164435,"accept_rate":64,"display_name":"P basak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675225464,"creation_date":1675209764,"question_id":75304371,"body_markdown":"I am experiencing an issue when decrypting a string using sunjce :\r\n\r\n\r\n    javax.crypto.Cipher cipher =\r\n          javax.crypto.Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;, new BouncyCastleProvider());\r\n      GCMParameterSpec spec = new GCMParameterSpec(Constants.GCM_TAG_BYTES * 8, nonce);\r\n      cipher.init(javax.crypto.Cipher.DECRYPT_MODE, dataKey, spec);\r\n\r\n      cipher.update(ciphertext);\r\n      \r\n      return cipher.doFinal();\r\n\r\nif I pass the whole ciphertext to doFinal it works correctly but if I call it correctly it only returns partial string. FOr instance for the input \r\n\r\n    String jsonExample = &quot;{\\&quot;dataType\\&quot;:\\&quot;STRING\\&quot;,\\&quot;strValue\\&quot;:\\&quot;000000\\&quot;}&quot;;\r\n\r\nThe decrypted bytes only contain &quot;000000&quot; but if I use\r\n\r\n    return cipher.doFinal(ciphertext); \r\nand remove the update so it correctly prints the original string. What might be the reason? if I pass an empty byte array to doFinal after the update it also results in the same data loss. I want to know the logic behind it, it passes for small texts but for texts of this size it simply does not work.\r\n\r\nthis is my input\r\n\r\n    String jsonExample = &quot;{\\&quot;dataType\\&quot;:\\&quot;STRING\\&quot;,\\&quot;strValue\\&quot;:\\&quot;000000\\&quot;}&quot;;\r\n\r\nThis is how I am printing the decrypted string \r\n\r\n    String decryptedString = new String(decrypted, StandardCharsets.UTF_8);\r\n\r\nThis is how I am passing the input string as bytes to the encrypt function\r\n\r\n    text = jsonExample.getBytes(StandardCharsets.UTF_8)\r\n\r\nthis is how I am calling encrypt\r\n\r\n    GCMParameterSpec spec = new GCMParameterSpec(Constants.GCM_TAG_BYTES * 8, nonce);\r\n    try {\r\n      cipher.init(javax.crypto.Cipher.ENCRYPT_MODE, dek, spec);\r\n      byte[] ciphertext = cipher.doFinal(text);\r\n\r\nWhen I use `cipher.update(ciphertext)` during decryption followed by `cipher.doFinal()` or `cipher.doFInal(new byte[0])` it only returns\r\n\r\n`&quot;000000&quot;` after  I use the returned `byte[]` to `String decryptedString = new String(decrypted, StandardCharsets.UTF_8);`\r\n\r\nBut if I directly call `cipher.doFInal(cipherText)` during decryption the result string I get is the original string.\r\n\r\n","title":"Cipher.doFinal() returning part of decrypted string for a long string","body":"<p>I am experiencing an issue when decrypting a string using sunjce :</p>\n<pre><code>javax.crypto.Cipher cipher =\n      javax.crypto.Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;, new BouncyCastleProvider());\n  GCMParameterSpec spec = new GCMParameterSpec(Constants.GCM_TAG_BYTES * 8, nonce);\n  cipher.init(javax.crypto.Cipher.DECRYPT_MODE, dataKey, spec);\n\n  cipher.update(ciphertext);\n  \n  return cipher.doFinal();\n</code></pre>\n<p>if I pass the whole ciphertext to doFinal it works correctly but if I call it correctly it only returns partial string. FOr instance for the input</p>\n<pre><code>String jsonExample = &quot;{\\&quot;dataType\\&quot;:\\&quot;STRING\\&quot;,\\&quot;strValue\\&quot;:\\&quot;000000\\&quot;}&quot;;\n</code></pre>\n<p>The decrypted bytes only contain &quot;000000&quot; but if I use</p>\n<pre><code>return cipher.doFinal(ciphertext); \n</code></pre>\n<p>and remove the update so it correctly prints the original string. What might be the reason? if I pass an empty byte array to doFinal after the update it also results in the same data loss. I want to know the logic behind it, it passes for small texts but for texts of this size it simply does not work.</p>\n<p>this is my input</p>\n<pre><code>String jsonExample = &quot;{\\&quot;dataType\\&quot;:\\&quot;STRING\\&quot;,\\&quot;strValue\\&quot;:\\&quot;000000\\&quot;}&quot;;\n</code></pre>\n<p>This is how I am printing the decrypted string</p>\n<pre><code>String decryptedString = new String(decrypted, StandardCharsets.UTF_8);\n</code></pre>\n<p>This is how I am passing the input string as bytes to the encrypt function</p>\n<pre><code>text = jsonExample.getBytes(StandardCharsets.UTF_8)\n</code></pre>\n<p>this is how I am calling encrypt</p>\n<pre><code>GCMParameterSpec spec = new GCMParameterSpec(Constants.GCM_TAG_BYTES * 8, nonce);\ntry {\n  cipher.init(javax.crypto.Cipher.ENCRYPT_MODE, dek, spec);\n  byte[] ciphertext = cipher.doFinal(text);\n</code></pre>\n<p>When I use <code>cipher.update(ciphertext)</code> during decryption followed by <code>cipher.doFinal()</code> or <code>cipher.doFInal(new byte[0])</code> it only returns</p>\n<p><code>&quot;000000&quot;</code> after  I use the returned <code>byte[]</code> to <code>String decryptedString = new String(decrypted, StandardCharsets.UTF_8);</code></p>\n<p>But if I directly call <code>cipher.doFInal(cipherText)</code> during decryption the result string I get is the original string.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21709395,"reputation":162,"user_id":16021237,"display_name":"GalliadII"},"score":0,"creation_date":1675216107,"post_id":75304752,"comment_id":132879719,"body_markdown":"I suggest you pick a more focused title, explain what you want to achieve, what result you expect and what result you get. it makes it easier to go though the code and provide help.","body":"I suggest you pick a more focused title, explain what you want to achieve, what result you expect and what result you get. it makes it easier to go though the code and provide help."}],"owner":{"account_id":27671246,"reputation":1,"user_id":21121984,"display_name":"halebree"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675225301,"creation_date":1675214366,"question_id":75304752,"body_markdown":"[vaccination.txt](https://i.stack.imgur.com/6Opal.png)\r\n\r\nCan someone help me with my codes? I have a problem displaying the information on the screen. I need to display the info based on the question requirement below:\r\n\r\n&gt; Display all information about those born in Selangor who received the booster dose (dose 3) on screen. The person born in Selangor is represented by two digits there are 10 after the six digits that represent the birth date from the identification (ic) number.\r\n\r\nI also have a problem writing the data into the relevant files. I tried the same method (by using the print writer) as what I have done before, but it doesn&#39;t work here and Idk why. Do help me \r\n\r\n```java\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Main\r\n{\r\npublic static void main(String\\[\\] args) {\r\n\r\n    \tFile inFile = new File (&quot;vaccination.txt&quot;);\r\n    \tFile comorbid = new File (&quot;comorbid.txt&quot;);\r\n    \tFile nonComorbid = new File (&quot;non_comorbid.txt&quot;);\r\n    \t\r\n    \t\r\n    \ttry {\r\n    \t    //read data from file \r\n    \t    Scanner sc = new Scanner (inFile);\r\n    \t    //write data into file\r\n    \t    PrintWriter pw = new PrintWriter(comorbid);\r\n    \t    PrintWriter pw2 = new PrintWriter (nonComorbid);\r\n    \t    \r\n    \t    String vaccinePlace = &quot; &quot;, ICnum = &quot; &quot;, category = &quot; &quot;, vaccineType = &quot; &quot;;\r\n    \t    int doseNum = 0;\r\n    \t    \r\n    \t    pw.println(&quot;Matric        Name                            Part      Gender&quot;);\r\n    \t    pw.println(&quot;--------------------------------------------------------------------&quot;);\r\n    \t    \r\n    \t    pw2.println(&quot;Matric        Name                            Part      Gender&quot;);\r\n    \t    pw2.println(&quot;--------------------------------------------------------------------&quot;);\r\n    \r\n    \t    while(sc.hasNext()) //check line by line \r\n    \t    {\r\n    \t        String data = sc.nextLine();\r\n    \t        StringTokenizer st = new StringTokenizer(data, &quot;:&quot;);\r\n    \t        \r\n    \t        vaccinePlace = st.nextToken();\r\n    \t        ICnum = st.nextToken();\r\n    \t        category = st.nextToken();\r\n    \t        vaccineType = st.nextToken();\r\n    \t        doseNum = Integer.parseInt(st.nextToken());\r\n    \t        \r\n    \t        //display information on screen \r\n    \t        if (doseNum == 3) \r\n    \t        {\r\n    \t            if (ICnum.substring(6,8).equalsIgnoreCase(&quot;10&quot;))\r\n    \t            {\r\n    \t            System.out.println(&quot;Vaccine place: &quot; + vaccinePlace);\r\n    \t\t        System.out.println(&quot;IC number: &quot; + ICnum);\r\n    \t\t        System.out.println(&quot;Category: &quot; + category);\r\n    \t\t        System.out.println(&quot;Vaccine type: &quot; + vaccineType);\r\n    \t\t        System.out.println(&quot;Dose number: &quot; + doseNum);   \r\n    \t            }\r\n    \t        }\r\n    \t        \r\n    \t        //write and store information into comorbid.txt and nonComorbid file\r\n    \t        if (category.equalsIgnoreCase(&quot;comorbid&quot;)) {\r\n    \t            pw.println(vaccinePlace + &quot;      &quot; + ICnum + &quot;      &quot; + vaccineType + &quot;      &quot; + doseNum);\r\n    \t        }\r\n    \t        \r\n    \t        \r\n    \t        if (category.equalsIgnoreCase(&quot;non-comorbid&quot;)) {\r\n    \t            pw.println(vaccinePlace + &quot;      &quot; + ICnum + &quot;      &quot; + vaccineType + &quot;      &quot; + doseNum);\r\n    \t        }\r\n    \t    } //end loop\r\n    \t    \r\n    \t    sc.close();\r\n    \t    pw.close();\r\n    \t    pw2.close();\r\n    \t}\r\n    \t\r\n    \tcatch (FileNotFoundException fnf) {\r\n    \t    System.out.println(fnf.getMessage());\r\n    \t}\r\n    \tcatch (IOException ioe) {\r\n    \t    System.out.println(ioe.getMessage());\r\n    \t}\r\n    \tcatch (Exception ex) {\r\n    \t    System.out.println(ex.getMessage());\r\n    \t}\r\n    }\r\n\r\n}\r\n```","title":"How do I read data from file (with specific condition) and display the information on the screen","body":"<p><a href=\"https://i.stack.imgur.com/6Opal.png\" rel=\"nofollow noreferrer\">vaccination.txt</a></p>\n<p>Can someone help me with my codes? I have a problem displaying the information on the screen. I need to display the info based on the question requirement below:</p>\n<blockquote>\n<p>Display all information about those born in Selangor who received the booster dose (dose 3) on screen. The person born in Selangor is represented by two digits there are 10 after the six digits that represent the birth date from the identification (ic) number.</p>\n</blockquote>\n<p>I also have a problem writing the data into the relevant files. I tried the same method (by using the print writer) as what I have done before, but it doesn't work here and Idk why. Do help me</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.*;\n\npublic class Main\n{\npublic static void main(String\\[\\] args) {\n\n        File inFile = new File (&quot;vaccination.txt&quot;);\n        File comorbid = new File (&quot;comorbid.txt&quot;);\n        File nonComorbid = new File (&quot;non_comorbid.txt&quot;);\n        \n        \n        try {\n            //read data from file \n            Scanner sc = new Scanner (inFile);\n            //write data into file\n            PrintWriter pw = new PrintWriter(comorbid);\n            PrintWriter pw2 = new PrintWriter (nonComorbid);\n            \n            String vaccinePlace = &quot; &quot;, ICnum = &quot; &quot;, category = &quot; &quot;, vaccineType = &quot; &quot;;\n            int doseNum = 0;\n            \n            pw.println(&quot;Matric        Name                            Part      Gender&quot;);\n            pw.println(&quot;--------------------------------------------------------------------&quot;);\n            \n            pw2.println(&quot;Matric        Name                            Part      Gender&quot;);\n            pw2.println(&quot;--------------------------------------------------------------------&quot;);\n    \n            while(sc.hasNext()) //check line by line \n            {\n                String data = sc.nextLine();\n                StringTokenizer st = new StringTokenizer(data, &quot;:&quot;);\n                \n                vaccinePlace = st.nextToken();\n                ICnum = st.nextToken();\n                category = st.nextToken();\n                vaccineType = st.nextToken();\n                doseNum = Integer.parseInt(st.nextToken());\n                \n                //display information on screen \n                if (doseNum == 3) \n                {\n                    if (ICnum.substring(6,8).equalsIgnoreCase(&quot;10&quot;))\n                    {\n                    System.out.println(&quot;Vaccine place: &quot; + vaccinePlace);\n                    System.out.println(&quot;IC number: &quot; + ICnum);\n                    System.out.println(&quot;Category: &quot; + category);\n                    System.out.println(&quot;Vaccine type: &quot; + vaccineType);\n                    System.out.println(&quot;Dose number: &quot; + doseNum);   \n                    }\n                }\n                \n                //write and store information into comorbid.txt and nonComorbid file\n                if (category.equalsIgnoreCase(&quot;comorbid&quot;)) {\n                    pw.println(vaccinePlace + &quot;      &quot; + ICnum + &quot;      &quot; + vaccineType + &quot;      &quot; + doseNum);\n                }\n                \n                \n                if (category.equalsIgnoreCase(&quot;non-comorbid&quot;)) {\n                    pw.println(vaccinePlace + &quot;      &quot; + ICnum + &quot;      &quot; + vaccineType + &quot;      &quot; + doseNum);\n                }\n            } //end loop\n            \n            sc.close();\n            pw.close();\n            pw2.close();\n        }\n        \n        catch (FileNotFoundException fnf) {\n            System.out.println(fnf.getMessage());\n        }\n        catch (IOException ioe) {\n            System.out.println(ioe.getMessage());\n        }\n        catch (Exception ex) {\n            System.out.println(ex.getMessage());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","maven","maven-plugin","maven-enforcer-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675234796,"post_id":75305610,"comment_id":132882208,"body_markdown":"First I would ask which kind of files are those? Why do you have only file names instead of filename and location? Furthermore you can write your own enforcer rule if needed (https://maven.apache.org/enforcer/enforcer-api/writing-a-custom-rule.html)","body":"First I would ask which kind of files are those? Why do you have only file names instead of filename and location? Furthermore you can write your own enforcer rule if needed (<a href=\"https://maven.apache.org/enforcer/enforcer-api/writing-a-custom-rule.html\" rel=\"nofollow noreferrer\">maven.apache.org/enforcer/enforcer-api/&hellip;</a>)"},{"owner":{"account_id":277035,"reputation":13804,"user_id":570767,"accept_rate":82,"display_name":"Azodious"},"score":0,"creation_date":1675251761,"post_id":75305610,"comment_id":132887175,"body_markdown":"Thanks. Those are some configuration files for application. Micro service Developer can put it anywhere in build path. If not given by developer then common repository is used. Actually developer should remove its local configuration before deploying. The plugin will aid in this.","body":"Thanks. Those are some configuration files for application. Micro service Developer can put it anywhere in build path. If not given by developer then common repository is used. Actually developer should remove its local configuration before deploying. The plugin will aid in this."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675433237,"post_id":75305610,"comment_id":132933599,"body_markdown":"Sounds very strange trying to solve a problem with Maven does not make sense on that level. and of what kind of configuration we are talking about? Give a full example what you are trying to solve etc. otherwise it&#39;s even hard to give a good suggestion...","body":"Sounds very strange trying to solve a problem with Maven does not make sense on that level. and of what kind of configuration we are talking about? Give a full example what you are trying to solve etc. otherwise it&#39;s even hard to give a good suggestion..."},{"owner":{"account_id":277035,"reputation":13804,"user_id":570767,"accept_rate":82,"display_name":"Azodious"},"score":0,"creation_date":1675918305,"post_id":75305610,"comment_id":133032241,"body_markdown":"Sorry!! can&#39;t disclose much as it is a company internal idea.","body":"Sorry!! can&#39;t disclose much as it is a company internal idea."}],"owner":{"account_id":277035,"reputation":13804,"user_id":570767,"accept_rate":82,"display_name":"Azodious"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675225175,"creation_date":1675225175,"question_id":75305610,"body_markdown":"I&#39;m trying to fail the maven build when certain files are present anywhere in build path.\r\n\r\nLooking at enforcer plugin: [requireFilesDontExist](https://maven.apache.org/enforcer/enforcer-rules/requireFilesDontExist.html). But we need to know absolute file path for it to work.\r\n\r\nHow to use it (or create new) when i have only file names and it can be anywhere in build path?\r\n\r\n","title":"requireFilesDontExist - Maven Plugin - How to?","body":"<p>I'm trying to fail the maven build when certain files are present anywhere in build path.</p>\n<p>Looking at enforcer plugin: <a href=\"https://maven.apache.org/enforcer/enforcer-rules/requireFilesDontExist.html\" rel=\"nofollow noreferrer\">requireFilesDontExist</a>. But we need to know absolute file path for it to work.</p>\n<p>How to use it (or create new) when i have only file names and it can be anywhere in build path?</p>\n"},{"tags":["java","spring-security","csrf","csrf-token"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1675107808,"post_id":75279893,"comment_id":132853704,"body_markdown":"You have to send the CSRF token in request body not in your URL. The URL is logged in most applications.","body":"You have to send the CSRF token in request body not in your URL. The URL is logged in most applications."},{"owner":{"account_id":4641128,"reputation":135,"user_id":3766089,"accept_rate":0,"display_name":"Sam"},"score":0,"creation_date":1675224343,"post_id":75279893,"comment_id":132880707,"body_markdown":"yes I agree but there are quite a number of screen to fix and have to test. So wanted to check if can any easier method to mask the token instead for short term and later can fix with proper planning.","body":"yes I agree but there are quite a number of screen to fix and have to test. So wanted to check if can any easier method to mask the token instead for short term and later can fix with proper planning."}],"owner":{"account_id":4641128,"reputation":135,"user_id":3766089,"accept_rate":0,"display_name":"Sam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675224618,"creation_date":1675047322,"question_id":75279893,"body_markdown":"I am working on a project that&#39;s quite old written in java. External audit happened for the code and they pointed out two modifications needed to be done regarding CRSF token ie. to periodically rotate the token and not have the same token for whole session and mask the token as when using the burpsuite tool the token is visible. I found some ideas for rotating the token and working on it but didn&#39;t find any helpful information about masking the token. Can anyone help me with some ideas about how to mask the token. Just to clarify the it appears for some reports when being downloaded.\r\n\r\n```\r\nGET /xyz/testcontroller/begin?event=Y&amp;CSRF_TOKEN=-653632r324354546432tret455364&amp;id=3576632446475442342\r\nHost: xyz.com\r\nCookie: JSESSIONID=452455535455762565; FileDownload=null; JSESSIONID=452455535455762565;\r\n &lt; other security parameters&gt;\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.5414.75 Safari/537.36\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\r\n&lt;some more parameters&gt;\r\nReferer: xxxxxx\r\nAccept-Encoding: gzip, deflate\r\nAccept-Language: en-US,en;q=0.9\r\nConnection: close\r\n\r\n```\r\nAny help will be helpful. Thanks in advance.\r\n\r\nRegards,\r\nSam\r\n ","title":"Masking crsf token in java","body":"<p>I am working on a project that's quite old written in java. External audit happened for the code and they pointed out two modifications needed to be done regarding CRSF token ie. to periodically rotate the token and not have the same token for whole session and mask the token as when using the burpsuite tool the token is visible. I found some ideas for rotating the token and working on it but didn't find any helpful information about masking the token. Can anyone help me with some ideas about how to mask the token. Just to clarify the it appears for some reports when being downloaded.</p>\n<pre><code>GET /xyz/testcontroller/begin?event=Y&amp;CSRF_TOKEN=-653632r324354546432tret455364&amp;id=3576632446475442342\nHost: xyz.com\nCookie: JSESSIONID=452455535455762565; FileDownload=null; JSESSIONID=452455535455762565;\n &lt; other security parameters&gt;\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.5414.75 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\n&lt;some more parameters&gt;\nReferer: xxxxxx\nAccept-Encoding: gzip, deflate\nAccept-Language: en-US,en;q=0.9\nConnection: close\n\n</code></pre>\n<p>Any help will be helpful. Thanks in advance.</p>\n<p>Regards,\nSam</p>\n"},{"tags":["java","machine-learning","random-forest","weka","image-segmentation"],"answers":[{"comments":[{"owner":{"account_id":5937539,"reputation":3116,"user_id":4669984,"accept_rate":86,"display_name":"Tarun Maganti"},"score":0,"creation_date":1675316767,"post_id":75305469,"comment_id":132903734,"body_markdown":"So I dump placeholder values? And use the prediction as used in evaluation of test dataset. I was exactly trying that after I posted this question. I did not get output. I&#39;ll let you know if I work it out.","body":"So I dump placeholder values? And use the prediction as used in evaluation of test dataset. I was exactly trying that after I posted this question. I did not get output. I&#39;ll let you know if I work it out."},{"owner":{"account_id":5978100,"reputation":2493,"user_id":4698227,"display_name":"fracpete"},"score":0,"creation_date":1675318593,"post_id":75305469,"comment_id":132904017,"body_markdown":"`classifyInstance` returns the **index** of the label. Use the [value(int)](https://weka.sourceforge.io/doc.dev/weka/core/Attribute.html#value-int-) method of your class attribute to determine the label string (casting the double to an int).","body":"<code>classifyInstance</code> returns the <b>index</b> of the label. Use the <a href=\"https://weka.sourceforge.io/doc.dev/weka/core/Attribute.html#value-int-\" rel=\"nofollow noreferrer\">value(int)</a> method of your class attribute to determine the label string (casting the double to an int)."}],"tags":[],"owner":{"account_id":5978100,"reputation":2493,"user_id":4698227,"display_name":"fracpete"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675223448,"creation_date":1675223448,"answer_id":75305469,"question_id":75284497,"body_markdown":"The data that you use for making predictions needs to have the **exact same format** as the training data, including the class attribute (Weka may query at prediction time possible class values). That attribute must also be flagged as class attribute (`setClassIndex(...)`).\r\n\r\nHowever, all actual values in the data section can be missing (&#39;?&#39;).\r\n\r\nYou can use the [Add](https://weka.sourceforge.io/doc.dev/weka/filters/unsupervised/attribute/Add.html) filter to append the class attribute to your test data, including the required nominal labels.","title":"How to classify ARFF file with no labels using a trained Random Forest model?","body":"<p>The data that you use for making predictions needs to have the <strong>exact same format</strong> as the training data, including the class attribute (Weka may query at prediction time possible class values). That attribute must also be flagged as class attribute (<code>setClassIndex(...)</code>).</p>\n<p>However, all actual values in the data section can be missing ('?').</p>\n<p>You can use the <a href=\"https://weka.sourceforge.io/doc.dev/weka/filters/unsupervised/attribute/Add.html\" rel=\"nofollow noreferrer\">Add</a> filter to append the class attribute to your test data, including the required nominal labels.</p>\n"}],"owner":{"account_id":5937539,"reputation":3116,"user_id":4669984,"accept_rate":86,"display_name":"Tarun Maganti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675223448,"creation_date":1675082360,"question_id":75284497,"body_markdown":"I have a training and test ARFF file dataset as such. I had created the below dataset by extracting region-of-interest from a 6 band image and the labels pertaining to each coordinate. \r\n\r\n    @RELATION agricultural.data\r\n    \r\n    @attribute band0 numeric\r\n    @attribute band1 numeric\r\n    @attribute band3 numeric\r\n    @attribute band4 numeric\r\n    @attribute band5 numeric\r\n    @attribute band6 numeric\r\n    @attribute class {1,2,3,4,5,6,7,8,9}\r\n    \r\n    @data\r\n    -10.95659,-7.61896,-9.8674499,-9.118701,-8.620638,-12.699167,5\r\n    ...\r\n    -9.172866,-9.814803,-10.693634,-13.313326,-8.568673,-12.355089,3\r\n\r\nUsing the above data I have trained the RandomForest and have gotten some results which seem in-line with what I expect. \r\n\r\n------------------\r\nI have an ARFF file dataset as such. It doesn&#39;t have any class attribute \r\n\r\n    @RELATION agricultural.data.fullimage\r\n    \r\n    @attribute band0 numeric\r\n    @attribute band1 numeric\r\n    @attribute band3 numeric\r\n    @attribute band4 numeric\r\n    @attribute band5 numeric\r\n    @attribute band6 numeric\r\n    \r\n    @data\r\n    -9.261405,-7.302625,-10.753542,-8.018068,-7.776727,-12.878252\r\n    ...\r\n    -9.188496,-10.676176,-14.194083,-9.687324,-9.785445,-12.490084\r\n\r\nThis is actual image line-by-line generated ARFF file. I want to classify the whole image. It doesn&#39;t have any labels. How do I classify the image. (Segmentation?)\r\n\r\n    FilteredClassifier fc = new FilteredClassifier();\r\n    fc.setClassifier(myRandomForestTrainedModel);\r\n    \r\n    for(int pixel=0;pixel &lt; ncols;pixel++) {\r\n        double prediction;\r\n        /**Some edge case handling**/\r\n        prediction = fc.classifyInstance(data.instance(pixel)); //Each data here is a row in the image which I create an ARFF file for\r\n        byteLinePrediction[pixel] = (byte)Math.floor(prediction+0.5);\r\n    } \r\n\r\nThere is an exception at the `classifyInstance()` function which reads as  below:\r\n\r\n    weka.core.UnassignedClassException: weka.classifiers.meta.FilteredClassifier: Class attribute not set!\r\n\r\nBut, I don&#39;t have classes assigned to these pixels as I don&#39;t want to evaluate the performance of the classifier but use the classifier to generate an classified(segmented) image map.","title":"How to classify ARFF file with no labels using a trained Random Forest model?","body":"<p>I have a training and test ARFF file dataset as such. I had created the below dataset by extracting region-of-interest from a 6 band image and the labels pertaining to each coordinate.</p>\n<pre><code>@RELATION agricultural.data\n\n@attribute band0 numeric\n@attribute band1 numeric\n@attribute band3 numeric\n@attribute band4 numeric\n@attribute band5 numeric\n@attribute band6 numeric\n@attribute class {1,2,3,4,5,6,7,8,9}\n\n@data\n-10.95659,-7.61896,-9.8674499,-9.118701,-8.620638,-12.699167,5\n...\n-9.172866,-9.814803,-10.693634,-13.313326,-8.568673,-12.355089,3\n</code></pre>\n<p>Using the above data I have trained the RandomForest and have gotten some results which seem in-line with what I expect.</p>\n<hr />\n<p>I have an ARFF file dataset as such. It doesn't have any class attribute</p>\n<pre><code>@RELATION agricultural.data.fullimage\n\n@attribute band0 numeric\n@attribute band1 numeric\n@attribute band3 numeric\n@attribute band4 numeric\n@attribute band5 numeric\n@attribute band6 numeric\n\n@data\n-9.261405,-7.302625,-10.753542,-8.018068,-7.776727,-12.878252\n...\n-9.188496,-10.676176,-14.194083,-9.687324,-9.785445,-12.490084\n</code></pre>\n<p>This is actual image line-by-line generated ARFF file. I want to classify the whole image. It doesn't have any labels. How do I classify the image. (Segmentation?)</p>\n<pre><code>FilteredClassifier fc = new FilteredClassifier();\nfc.setClassifier(myRandomForestTrainedModel);\n\nfor(int pixel=0;pixel &lt; ncols;pixel++) {\n    double prediction;\n    /**Some edge case handling**/\n    prediction = fc.classifyInstance(data.instance(pixel)); //Each data here is a row in the image which I create an ARFF file for\n    byteLinePrediction[pixel] = (byte)Math.floor(prediction+0.5);\n} \n</code></pre>\n<p>There is an exception at the <code>classifyInstance()</code> function which reads as  below:</p>\n<pre><code>weka.core.UnassignedClassException: weka.classifiers.meta.FilteredClassifier: Class attribute not set!\n</code></pre>\n<p>But, I don't have classes assigned to these pixels as I don't want to evaluate the performance of the classifier but use the classifier to generate an classified(segmented) image map.</p>\n"},{"tags":["java","httpclient"],"answers":[{"comments":[{"owner":{"account_id":9906957,"reputation":184,"user_id":7335176,"display_name":"halil ibrahim binol"},"score":1,"creation_date":1653290081,"post_id":72344445,"comment_id":127805886,"body_markdown":"How can it be possible to get CORS error while you are using Apache HttpClient.","body":"How can it be possible to get CORS error while you are using Apache HttpClient."},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1653293342,"post_id":72344445,"comment_id":127806994,"body_markdown":"Ho can I check this and how can I switch it off if proves to be the issue?","body":"Ho can I check this and how can I switch it off if proves to be the issue?"}],"tags":[],"owner":{"account_id":24048616,"reputation":21,"user_id":18027356,"display_name":"Gangappa Siddsoft"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1653289562,"creation_date":1653289538,"answer_id":72344445,"question_id":72344406,"body_markdown":"Try checking whether your code allows CORS requests? Because in POSTMAN, even if backend does not allow CORS requests, It still executes the api. But that is not the case with any programming languages.","title":"POST request does not work in Java client but works in postman","body":"<p>Try checking whether your code allows CORS requests? Because in POSTMAN, even if backend does not allow CORS requests, It still executes the api. But that is not the case with any programming languages.</p>\n"},{"tags":[],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653357335,"creation_date":1653357335,"answer_id":72356435,"question_id":72344406,"body_markdown":"The URL I was trying to post to was poorly configured in AWS. I did not notice  the URL end point ended up with a &quot;/&quot; but in my Java code I was trying to access the same URL without a forward slash.\r\n\r\n    // So this worked:\r\n    https://my/path/to/post/resource/\r\n    \r\n    // But this did not\r\n    https://my/path/top/post/resource\r\n\r\n\r\nConfiguring the Route 53 to map both paths with and without a forward slash fixed the issue. Publishing this as an answer so others can check it out if getting the same.\r\n","title":"POST request does not work in Java client but works in postman","body":"<p>The URL I was trying to post to was poorly configured in AWS. I did not notice  the URL end point ended up with a &quot;/&quot; but in my Java code I was trying to access the same URL without a forward slash.</p>\n<pre><code>// So this worked:\nhttps://my/path/to/post/resource/\n\n// But this did not\nhttps://my/path/top/post/resource\n</code></pre>\n<p>Configuring the Route 53 to map both paths with and without a forward slash fixed the issue. Publishing this as an answer so others can check it out if getting the same.</p>\n"},{"tags":[],"owner":{"account_id":5944573,"reputation":55,"user_id":4674527,"display_name":"Benjamin James"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675222871,"creation_date":1675222871,"answer_id":75305432,"question_id":72344406,"body_markdown":"In my case, I went through the headers that Postman had applied automatically and compared them with those that I had added, and in Postman, I clicked on the headers to find which ones were needed to get a 200 response, and found that it needed the header &quot;Accept&quot;:&quot;\\*/\\*&quot; - I added this to my request headers and it worked.\r\n\r\n            String response = Request.Get(link)\r\n                            .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken)\r\n                            .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                            .addHeader(&quot;Accept&quot;,&quot;*/*&quot;)","title":"POST request does not work in Java client but works in postman","body":"<p>In my case, I went through the headers that Postman had applied automatically and compared them with those that I had added, and in Postman, I clicked on the headers to find which ones were needed to get a 200 response, and found that it needed the header &quot;Accept&quot;:&quot;*/*&quot; - I added this to my request headers and it worked.</p>\n<pre><code>        String response = Request.Get(link)\n                        .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken)\n                        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                        .addHeader(&quot;Accept&quot;,&quot;*/*&quot;)\n</code></pre>\n"}],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1045,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1675222871,"creation_date":1653289352,"question_id":72344406,"body_markdown":"I am trying to execute a POST request to a REST endpoint and it fails when executing under Java code. The response I am getting back has a status 403 forbidden.\r\n\r\nI am using apache HttpClient.\r\nHere is the code I am using:\r\n\r\n    var postRequest = new HttpPost(myUrl);\r\n    postRequest.addHeader(HttpHeaders.CONTENT_TYPE, TEXT_PLAIN_VALUE);\r\n    postRequest.addHeader(&quot;x-env&quot;, environment);\r\n    postRequest.addHeader(&quot;apikey&quot;, myApiKey);\r\n\r\nThe headers are set properly and have exactly the same values as in Postman.From what I seen on similar posts not having the &quot;User-Agent&quot; header could cause this. Setting that did not solve my issue and I am running out of ideas. In fact I manually set all the headers from Postman and still no luck.\r\n\r\nWhen executing a GET to the same URL context from Java it works.\r\nAlso some JS client accessing exactly the same endpoint with the same HTTP headers also works. here is the JS code: \r\n\r\n    const cnf = {\r\n      headers: {\r\n        &#39;x-env&#39;: &#39;dev&#39;,\r\n        apikey: this.myApyKey,\r\n        &#39;Content-Type&#39;: &#39;text/plain&#39;,\r\n      },\r\n    };\r\n    const data = myRequestBody;\r\n    try {\r\n      const res = await axios.post(this.apiPath, data, cnf as AxiosRequestConfig);\r\n        ....\r\nThank you in advance for your inputs.","title":"POST request does not work in Java client but works in postman","body":"<p>I am trying to execute a POST request to a REST endpoint and it fails when executing under Java code. The response I am getting back has a status 403 forbidden.</p>\n<p>I am using apache HttpClient.\nHere is the code I am using:</p>\n<pre><code>var postRequest = new HttpPost(myUrl);\npostRequest.addHeader(HttpHeaders.CONTENT_TYPE, TEXT_PLAIN_VALUE);\npostRequest.addHeader(&quot;x-env&quot;, environment);\npostRequest.addHeader(&quot;apikey&quot;, myApiKey);\n</code></pre>\n<p>The headers are set properly and have exactly the same values as in Postman.From what I seen on similar posts not having the &quot;User-Agent&quot; header could cause this. Setting that did not solve my issue and I am running out of ideas. In fact I manually set all the headers from Postman and still no luck.</p>\n<p>When executing a GET to the same URL context from Java it works.\nAlso some JS client accessing exactly the same endpoint with the same HTTP headers also works. here is the JS code:</p>\n<pre><code>const cnf = {\n  headers: {\n    'x-env': 'dev',\n    apikey: this.myApyKey,\n    'Content-Type': 'text/plain',\n  },\n};\nconst data = myRequestBody;\ntry {\n  const res = await axios.post(this.apiPath, data, cnf as AxiosRequestConfig);\n    ....\n</code></pre>\n<p>Thank you in advance for your inputs.</p>\n"},{"tags":["java","spring","spring-boot","constraintviolationexception"],"comments":[{"owner":{"account_id":13141463,"reputation":116,"user_id":9492915,"display_name":"SputNick"},"score":0,"creation_date":1675257194,"post_id":75304232,"comment_id":132888887,"body_markdown":"What is your API format, does it expect json or something else?","body":"What is your API format, does it expect json or something else?"},{"owner":{"account_id":1103468,"reputation":5324,"user_id":1095362,"accept_rate":43,"display_name":"robert trudel"},"score":0,"creation_date":1675259444,"post_id":75304232,"comment_id":132889676,"body_markdown":"like 99.999% of the market on the web now... json","body":"like 99.999% of the market on the web now... json"},{"owner":{"account_id":13141463,"reputation":116,"user_id":9492915,"display_name":"SputNick"},"score":0,"creation_date":1675325778,"post_id":75304232,"comment_id":132905494,"body_markdown":"Ahh great, I suggest then you create an Error DTO class which will hold necessary information such as error name, error message and so on (the details which you need). Instantiate this object in your exception handler class, set the values and return that as the response entity. I would strongly urge you not to respond with the exception as the response body. Please refer the link for more info on this https://medium.com/@vidishapal/spring-boot-restful-global-exception-handling-50d7637bd267","body":"Ahh great, I suggest then you create an Error DTO class which will hold necessary information such as error name, error message and so on (the details which you need). Instantiate this object in your exception handler class, set the values and return that as the response entity. I would strongly urge you not to respond with the exception as the response body. Please refer the link for more info on this <a href=\"https://medium.com/@vidishapal/spring-boot-restful-global-exception-handling-50d7637bd267\" rel=\"nofollow noreferrer\">medium.com/@vidishapal/&hellip;</a>"}],"owner":{"account_id":1103468,"reputation":5324,"user_id":1095362,"accept_rate":43,"display_name":"robert trudel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675222456,"creation_date":1675208228,"question_id":75304232,"body_markdown":"I use spring boot 3, I search to centralize error handling about validation\r\n\r\n    public record RepoPubRecord(\r\n            @NotEmpty(groups={Intranet.class,Extranet.class}\r\n            Long idRepoPub,\r\n            \r\n            @NotEmpty(@NotEmpty(groups={Extranet.class})\r\n            String pubSib,\r\n            \r\n            @NotNull(groups={Intranet.class,Extranet.class}\r\n            PubRecord pub){\r\n    }\r\n\r\nIn a method of one of my service \r\n\r\n    public void update(Repo repot, RepoPubRecord repoPubRecord){\r\n    \r\n        Set&lt;ConstraintViolation&lt;RepoPubRecord&gt;&gt; violations = validator.validate(repoPubRecord, Extranet.class);\r\n    \r\n        if (!violations.isEmpty()) {\r\n            throw new ConstraintViolationException(violations);\r\n        }\r\n    \r\n    \r\n        ....\r\n    }\r\n\r\nI would like to manage this error globally\r\n\r\n    @ControllerAdvice\r\n    public class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\r\n        protected ResponseEntity&lt;Object&gt; handleMissingServletRequestParameter(MissingServletRequestParameterException ex, HttpHeaders headers,HttpStatus status, WebRequest request) {\r\n            String error = ex.getParameterName() + &quot; parameter is missing.&quot;;\r\n            return new ResponseEntity&lt;Object&gt;(new MissingServletRequestParameterException(error, ex.getParameterType()), HttpStatus.BAD_REQUEST));\r\n        }\r\n\r\n        @ExceptionHandler(ConstraintViolationException.class)\r\n        protected ResponseEntity&lt;?&gt; handleConstraintViolationException(ConstraintViolationException ex, HttpServletRequest request){\r\n            try {\r\n                Set&lt;String&gt; messages = ex.getConstraintViolations().stream().map(ConstraintViolation::getMessage).collect(Collectors.toSet());\r\n                return new ResponseEntity&lt;&gt;(new ConstraintViolationException(messages), HttpStatus.BAD_REQUEST);\r\n            } catch (Exception e) {\r\n                return new ResponseEntity&lt;&gt;(new ConstraintViolationException&lt;&gt;(new HashSet&lt;String&gt;().add(ex.getMessage())), HttpStatus.INTERNAL_SERVER_ERROR);\r\n            }\r\n\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nI just don&#39;t understand what i&#39;m suppoing to put in the ResponseEntity to get information of what has failed","title":"handleConstraintViolationException in a controller advice","body":"<p>I use spring boot 3, I search to centralize error handling about validation</p>\n<pre><code>public record RepoPubRecord(\n        @NotEmpty(groups={Intranet.class,Extranet.class}\n        Long idRepoPub,\n        \n        @NotEmpty(@NotEmpty(groups={Extranet.class})\n        String pubSib,\n        \n        @NotNull(groups={Intranet.class,Extranet.class}\n        PubRecord pub){\n}\n</code></pre>\n<p>In a method of one of my service</p>\n<pre><code>public void update(Repo repot, RepoPubRecord repoPubRecord){\n\n    Set&lt;ConstraintViolation&lt;RepoPubRecord&gt;&gt; violations = validator.validate(repoPubRecord, Extranet.class);\n\n    if (!violations.isEmpty()) {\n        throw new ConstraintViolationException(violations);\n    }\n\n\n    ....\n}\n</code></pre>\n<p>I would like to manage this error globally</p>\n<pre><code>@ControllerAdvice\npublic class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\n    protected ResponseEntity&lt;Object&gt; handleMissingServletRequestParameter(MissingServletRequestParameterException ex, HttpHeaders headers,HttpStatus status, WebRequest request) {\n        String error = ex.getParameterName() + &quot; parameter is missing.&quot;;\n        return new ResponseEntity&lt;Object&gt;(new MissingServletRequestParameterException(error, ex.getParameterType()), HttpStatus.BAD_REQUEST));\n    }\n\n    @ExceptionHandler(ConstraintViolationException.class)\n    protected ResponseEntity&lt;?&gt; handleConstraintViolationException(ConstraintViolationException ex, HttpServletRequest request){\n        try {\n            Set&lt;String&gt; messages = ex.getConstraintViolations().stream().map(ConstraintViolation::getMessage).collect(Collectors.toSet());\n            return new ResponseEntity&lt;&gt;(new ConstraintViolationException(messages), HttpStatus.BAD_REQUEST);\n        } catch (Exception e) {\n            return new ResponseEntity&lt;&gt;(new ConstraintViolationException&lt;&gt;(new HashSet&lt;String&gt;().add(ex.getMessage())), HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n\n    }\n\n\n}\n</code></pre>\n<p>I just don't understand what i'm suppoing to put in the ResponseEntity to get information of what has failed</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675221139,"creation_date":1675221139,"answer_id":75305287,"question_id":75305192,"body_markdown":"Remove the alias for `method` in the annotation and use `@PostMapping` instead of `@RequestMapping`. Set the defaults in the body of the annotation itself.\r\n```java\r\n@PostMapping\r\npublic @interface JsonPostMapping {\r\n    // ...\r\n\t@AliasFor(annotation = PostMapping.class)\r\n    String[] consumes() default { MediaType.APPLICATION_JSON_VALUE };\r\n\r\n    @AliasFor(annotation = PostMapping.class)\r\n    String[] produces() default { MediaType.APPLICATION_JSON_VALUE };\r\n}\r\n```","title":"Custom annotation used with @RequestMapping is not working in spring boot","body":"<p>Remove the alias for <code>method</code> in the annotation and use <code>@PostMapping</code> instead of <code>@RequestMapping</code>. Set the defaults in the body of the annotation itself.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping\npublic @interface JsonPostMapping {\n    // ...\n    @AliasFor(annotation = PostMapping.class)\n    String[] consumes() default { MediaType.APPLICATION_JSON_VALUE };\n\n    @AliasFor(annotation = PostMapping.class)\n    String[] produces() default { MediaType.APPLICATION_JSON_VALUE };\n}\n</code></pre>\n"}],"owner":{"account_id":27075427,"reputation":37,"user_id":20625439,"display_name":"Luke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75305287,"answer_count":1,"score":2,"last_activity_date":1675221139,"creation_date":1675220110,"question_id":75305192,"body_markdown":"I have created custom annotation like this \r\n```java\r\n@Retention(RUNTIME)\r\n@Target(METHOD)\r\n@RequestMapping(consumes = { MediaType.APPLICATION_JSON_VALUE }, produces = {\r\n\t\tMediaType.APPLICATION_JSON_VALUE }, method = RequestMethod.POST)\r\npublic @interface JsonPostMapping {\r\n\t@AliasFor(annotation = RequestMapping.class, attribute = &quot;value&quot;)\r\n\tString[] value() default {};\r\n\r\n\t@AliasFor(annotation = RequestMapping.class, attribute = &quot;method&quot;)\r\n\tRequestMethod[] method() default {};\r\n\r\n\t@AliasFor(annotation = RequestMapping.class, attribute = &quot;params&quot;)\r\n\tString[] params() default {};\r\n\r\n\t@AliasFor(annotation = RequestMapping.class, attribute = &quot;headers&quot;)\r\n\tString[] headers() default {};\r\n\r\n\t@AliasFor(annotation = RequestMapping.class, attribute = &quot;consumes&quot;)\r\n\tString[] consumes() default {};\r\n\r\n\t@AliasFor(annotation = RequestMapping.class, attribute = &quot;produces&quot;)\r\n\tString[] produces() default {};\r\n}\r\n\r\n```\r\n\r\nI have the following controller\r\n```java\r\nimport com.config.requestmappings.JsonPostMapping;\r\n\r\n@RestController\r\npublic class TestController {\r\n\r\n\t@JsonPostMapping(value = &quot;/hello&quot;)\r\n\tpublic String hello() {\r\n\t\treturn &quot;Hi, how are you&quot;;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe `hello` api is also being called with GET request, i am expecting that it should only be called upon POST request. ","title":"Custom annotation used with @RequestMapping is not working in spring boot","body":"<p>I have created custom annotation like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RUNTIME)\n@Target(METHOD)\n@RequestMapping(consumes = { MediaType.APPLICATION_JSON_VALUE }, produces = {\n        MediaType.APPLICATION_JSON_VALUE }, method = RequestMethod.POST)\npublic @interface JsonPostMapping {\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;value&quot;)\n    String[] value() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;method&quot;)\n    RequestMethod[] method() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;params&quot;)\n    String[] params() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;headers&quot;)\n    String[] headers() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;consumes&quot;)\n    String[] consumes() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;produces&quot;)\n    String[] produces() default {};\n}\n\n</code></pre>\n<p>I have the following controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.config.requestmappings.JsonPostMapping;\n\n@RestController\npublic class TestController {\n\n    @JsonPostMapping(value = &quot;/hello&quot;)\n    public String hello() {\n        return &quot;Hi, how are you&quot;;\n    }\n\n}\n</code></pre>\n<p>The <code>hello</code> api is also being called with GET request, i am expecting that it should only be called upon POST request.</p>\n"},{"tags":["java","eclipse","class","jar","import"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381618780,"post_id":19339670,"comment_id":28651573,"body_markdown":"Q: Can you have two classes with the same name in different .jar&#39;s?  A: Sure.  Q: Can you rely on their position in the classpath to choose one .jar over the other?  A: No - you should disambiguate them by using qualified package names.","body":"Q: Can you have two classes with the same name in different .jar&#39;s?  A: Sure.  Q: Can you rely on their position in the classpath to choose one .jar over the other?  A: No - you should disambiguate them by using qualified package names."},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":1,"creation_date":1381620940,"post_id":19339670,"comment_id":28652007,"body_markdown":"@paulsm4 How do I do that if they have the same fully qualified name (com.sun.mail.imap.IMAPFolder), that is what I am looking for here.","body":"@paulsm4 How do I do that if they have the same fully qualified name (com.sun.mail.imap.IMAPFolder), that is what I am looking for here."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381621103,"post_id":19339670,"comment_id":28652036,"body_markdown":"Q: Do both .jar&#39;s each have an &quot;IMAPFolder&quot; with the exact same package &quot;com.sun.mail.imap.IMAPFolder&quot;? If so, then I guess the two .jar&#39;s *are* incompatible.  But that&#39;s typically *not* the case...  Q: What are the two .jar files in question?  Where did they come from?  Are you *sure* you need both?","body":"Q: Do both .jar&#39;s each have an &quot;IMAPFolder&quot; with the exact same package &quot;com.sun.mail.imap.IMAPFolder&quot;? If so, then I guess the two .jar&#39;s <i>are</i> incompatible.  But that&#39;s typically <i>not</i> the case...  Q: What are the two .jar files in question?  Where did they come from?  Are you <i>sure</i> you need both?"},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":0,"creation_date":1381621437,"post_id":19339670,"comment_id":28652093,"body_markdown":"@paulsm4 mail-1.4.jar and imap.jar both have com.sun.mail.imap.IMAPFolder and each have other packages that I need for other parts of my program but the other packages they contain are not identical so removing either would not work.","body":"@paulsm4 mail-1.4.jar and imap.jar both have com.sun.mail.imap.IMAPFolder and each have other packages that I need for other parts of my program but the other packages they contain are not identical so removing either would not work."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381694222,"post_id":19339670,"comment_id":28668290,"body_markdown":"please follow my suggestion [below](http://stackoverflow.com/a/19341314/421195): get the JavaMail API .jar files from Oracle.  I already confirmed that the current versions of mail.jar and imap.jar at the link below do *NOT* have the conflict.  Please let us know what happens!","body":"please follow my suggestion <a href=\"http://stackoverflow.com/a/19341314/421195\">below</a>: get the JavaMail API .jar files from Oracle.  I already confirmed that the current versions of mail.jar and imap.jar at the link below do <i>NOT</i> have the conflict.  Please let us know what happens!"}],"answers":[{"comments":[{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":0,"creation_date":1381621895,"post_id":19340327,"comment_id":28652181,"body_markdown":"Close, but how would you, in this scenario, say explicitly that you want to get &quot;Hello, B!&quot; when saying System.out.println(Hello.getGreeting()); \nin this case without explicitly stating the load order?","body":"Close, but how would you, in this scenario, say explicitly that you want to get &quot;Hello, B!&quot; when saying System.out.println(Hello.getGreeting());  in this case without explicitly stating the load order?"},{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":0,"creation_date":1381622014,"post_id":19340327,"comment_id":28652203,"body_markdown":"You&#39;d have to put B.jar first on the classpath, so that its implementation came before any other implementations.","body":"You&#39;d have to put B.jar first on the classpath, so that its implementation came before any other implementations."},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":0,"creation_date":1381622085,"post_id":19340327,"comment_id":28652212,"body_markdown":"And how would I do that in Eclipse then, I am creating a new jar file with these two jars in it.","body":"And how would I do that in Eclipse then, I am creating a new jar file with these two jars in it."},{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":0,"creation_date":1381622256,"post_id":19340327,"comment_id":28652237,"body_markdown":"@Fenrir If you go to `Java Build Path` in your project properties, there should be a tab labled `Order and Export`. Simply change the order of the code bases as desired. Alternatively, you can remove one of the jars from the build path as well.","body":"@Fenrir If you go to <code>Java Build Path</code> in your project properties, there should be a tab labled <code>Order and Export</code>. Simply change the order of the code bases as desired. Alternatively, you can remove one of the jars from the build path as well."},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":0,"creation_date":1381623383,"post_id":19340327,"comment_id":28652409,"body_markdown":"I changed the order and sadly that did not work, as stated in original post, and I cannot remove one of the jars as its other packages are needed for other functionality.","body":"I changed the order and sadly that did not work, as stated in original post, and I cannot remove one of the jars as its other packages are needed for other functionality."},{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":0,"creation_date":1381623570,"post_id":19340327,"comment_id":28652443,"body_markdown":"@Fenrir When you say you are creating a new jar file, are you merging the jars in to a single jar, or nesting jar files inside jar files? Specifically what feature of Eclipse are you using to do this (in either case)?","body":"@Fenrir When you say you are creating a new jar file, are you merging the jars in to a single jar, or nesting jar files inside jar files? Specifically what feature of Eclipse are you using to do this (in either case)?"},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":0,"creation_date":1381623933,"post_id":19340327,"comment_id":28652494,"body_markdown":"File &gt; Export &gt; Runnable Jar File with Library Handling = Package required libraries into generate JAR","body":"File &gt; Export &gt; Runnable Jar File with Library Handling = Package required libraries into generate JAR"},{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":0,"creation_date":1381625534,"post_id":19340327,"comment_id":28652757,"body_markdown":"@Fenrir I just tried the process using my examples above, created A.jar, and B.jar, added them to my build path, exported runnable jar with library and I was able to manipulate which version of the class loaded by changing the build path order and re exporting a new runnable jar. I don&#39;t know why it isn&#39;t working for you, but to debug this, you can unpack your generated jar and inspect the META-INF/MANIFEST.MF file. That file contains the classpath order that will be used by that runnable jar. All the behavior of classpath ordering in my answer above should apply.","body":"@Fenrir I just tried the process using my examples above, created A.jar, and B.jar, added them to my build path, exported runnable jar with library and I was able to manipulate which version of the class loaded by changing the build path order and re exporting a new runnable jar. I don&#39;t know why it isn&#39;t working for you, but to debug this, you can unpack your generated jar and inspect the META-INF/MANIFEST.MF file. That file contains the classpath order that will be used by that runnable jar. All the behavior of classpath ordering in my answer above should apply."},{"owner":{"account_id":7059566,"reputation":303,"user_id":5405434,"display_name":"Philippe Cloutier"},"score":0,"creation_date":1675120765,"post_id":19340327,"comment_id":132856925,"body_markdown":"This answer wrongly implies that JAR-s are listed on the classpath, which is not necessarily the case. In fact, the classpath can contain both files and directories containing these. Therefore, if the classpath includes a directory containing several JAR-s, &quot;the first code base (i.e. a jar) listed on the classpath with the required class&quot;[sic] is not necessarily deterministic, and may depend on the order in which Java sorts (or not) these files.","body":"This answer wrongly implies that JAR-s are listed on the classpath, which is not necessarily the case. In fact, the classpath can contain both files and directories containing these. Therefore, if the classpath includes a directory containing several JAR-s, &quot;the first code base (i.e. a jar) listed on the classpath with the required class&quot;[sic] is not necessarily deterministic, and may depend on the order in which Java sorts (or not) these files."},{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":0,"creation_date":1675219807,"post_id":19340327,"comment_id":132880189,"body_markdown":"@PhilippeCloutier It was not my intent to imply that only JARs can be code bases which is clearly not the case, I did misuse &quot;i.e.&quot; so I&#39;ve corrected that. I&#39;ve never seen a non-deterministic classpath, as far as I&#39;m aware you cloud always inspect &quot;java.class.path&quot; at runtime and know what the load order would be. Things get more complicated environments such as JavaEE or OSGi but those are not standard JavaSE.","body":"@PhilippeCloutier It was not my intent to imply that only JARs can be code bases which is clearly not the case, I did misuse &quot;i.e.&quot; so I&#39;ve corrected that. I&#39;ve never seen a non-deterministic classpath, as far as I&#39;m aware you cloud always inspect &quot;java.class.path&quot; at runtime and know what the load order would be. Things get more complicated environments such as JavaEE or OSGi but those are not standard JavaSE."},{"owner":{"account_id":7059566,"reputation":303,"user_id":5405434,"display_name":"Philippe Cloutier"},"score":0,"creation_date":1675221305,"post_id":19340327,"comment_id":132880375,"body_markdown":"I did have Java EE&#39;s web archive (WAR) files in mind. We have a WAR file with more than a hundred JAR files in WEB-INF/lib/. I do believe classpath wildcards are a Java SE 6 feature though.","body":"I did have Java EE&#39;s web archive (WAR) files in mind. We have a WAR file with more than a hundred JAR files in WEB-INF/lib/. I do believe classpath wildcards are a Java SE 6 feature though."}],"tags":[],"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"comment_count":11,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1675219822,"creation_date":1381621266,"answer_id":19340327,"question_id":19339670,"body_markdown":"When a class is loaded, the first implementation that matches the requested fully qualified name that is visible to the relevant `ClassLoader` is what gets returned. Any other implementations with the same fully qualified name are effectively hidden to that `ClassLoader`.\r\n\r\nWhat this means in a standard Java SE application is that the first code base (e.g. a jar) listed on the classpath with the required class, provides it, and all other code bases&#39; implementations of the same fully qualified class are hidden.\r\n\r\n## Example:\r\n\r\nAssume that A.jar contains the compiled class\r\n\r\n    package com.stackoverflow.example;\r\n    public class Hello {\r\n         public static String getGreeting(){\r\n             return &quot;Hello, A!&quot;\r\n         }\r\n    }\r\n\r\nAssume that B.jar contains the compiled class\r\n\r\n    package com.stackoverflow.example\r\n    public class Hello {\r\n         public static String getGreeting(){\r\n             return &quot;Hello, B!&quot;\r\n         }\r\n    }\r\n\r\nNote that in both of the above classes have the same fully qualified name.\r\n\r\nAssume  main class is\r\n\r\n       import com.stackoverflow.example.Hello;\r\n\r\n       public class ExampleMain {\r\n           public static void main(String[] args){\r\n                System.out.println(Hello.getGreeting());\r\n           }\r\n       }\r\n\r\n\r\nIf I were to invoke my program with\r\n\r\n`java -cp A.jar:B.jar ExampleMain`\r\n\r\nthe output is: `Hello, A!`\r\n\r\nIf I reverse the classpath like so\r\n\r\n`java -cp B.jar:A.jar ExampleMain`\r\n\r\nthe output is: `Hello, B!`\r\n\r\n\r\n","title":"Java: Two jars in project with same class.","body":"<p>When a class is loaded, the first implementation that matches the requested fully qualified name that is visible to the relevant <code>ClassLoader</code> is what gets returned. Any other implementations with the same fully qualified name are effectively hidden to that <code>ClassLoader</code>.</p>\n<p>What this means in a standard Java SE application is that the first code base (e.g. a jar) listed on the classpath with the required class, provides it, and all other code bases' implementations of the same fully qualified class are hidden.</p>\n<h2>Example:</h2>\n<p>Assume that A.jar contains the compiled class</p>\n<pre><code>package com.stackoverflow.example;\npublic class Hello {\n     public static String getGreeting(){\n         return &quot;Hello, A!&quot;\n     }\n}\n</code></pre>\n<p>Assume that B.jar contains the compiled class</p>\n<pre><code>package com.stackoverflow.example\npublic class Hello {\n     public static String getGreeting(){\n         return &quot;Hello, B!&quot;\n     }\n}\n</code></pre>\n<p>Note that in both of the above classes have the same fully qualified name.</p>\n<p>Assume  main class is</p>\n<pre><code>   import com.stackoverflow.example.Hello;\n\n   public class ExampleMain {\n       public static void main(String[] args){\n            System.out.println(Hello.getGreeting());\n       }\n   }\n</code></pre>\n<p>If I were to invoke my program with</p>\n<p><code>java -cp A.jar:B.jar ExampleMain</code></p>\n<p>the output is: <code>Hello, A!</code></p>\n<p>If I reverse the classpath like so</p>\n<p><code>java -cp B.jar:A.jar ExampleMain</code></p>\n<p>the output is: <code>Hello, B!</code></p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1381875428,"post_id":19341314,"comment_id":28742032,"body_markdown":"If the packages are different it is _not_ the same class.","body":"If the packages are different it is <i>not</i> the same class."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381875844,"post_id":19341314,"comment_id":28742190,"body_markdown":"@Thorbj&#248;rn Ravn Andersen: I agree with your answer [above](http://stackoverflow.com/a/19343282/421195): &quot;I would strongly suggest you find out why you have two different versions of the same jar in your classpath and rework your \nprogram so you only need one version&quot;.  Based on all the discussion, I think the OP got one JavaMail .jar from one \nplace (mail.jar), and a different JavaMail .jar from a different place (imap.jar).  \nSTRONG SUGGESTION: The OP shold get *all* the JavaMail .jar&#39;s directly from [Oracle](http://www.oracle.com/technetwork/java/index-138643.html) =&gt; no conflict. IMHO...","body":"@Thorbj&#248;rn Ravn Andersen: I agree with your answer <a href=\"http://stackoverflow.com/a/19343282/421195\">above</a>: &quot;I would strongly suggest you find out why you have two different versions of the same jar in your classpath and rework your  program so you only need one version&quot;.  Based on all the discussion, I think the OP got one JavaMail .jar from one  place (mail.jar), and a different JavaMail .jar from a different place (imap.jar).   STRONG SUGGESTION: The OP shold get <i>all</i> the JavaMail .jar&#39;s directly from <a href=\"http://www.oracle.com/technetwork/java/index-138643.html\" rel=\"nofollow noreferrer\">Oracle</a> =&gt; no conflict. IMHO..."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1381897049,"post_id":19341314,"comment_id":28747107,"body_markdown":"He said he could not use just one (like the newest).  This needs to be resolved first before upgrading to the latest from oracle.","body":"He said he could not use just one (like the newest).  This needs to be resolved first before upgrading to the latest from oracle."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381904738,"post_id":19341314,"comment_id":28749247,"body_markdown":"If the OP replaced his (mismatched) .jars with the equivalents from the Oracle page, I&#39;ll bet it would &quot;just work&quot;.  Furthermore, I verified there is *no* package conflict between the Oracle imap.jar and mail.jar (like there is in his version).  It&#39;s definitely worth trying.  I&#39;m just very disappointed he&#39;s probably not listening any more :(","body":"If the OP replaced his (mismatched) .jars with the equivalents from the Oracle page, I&#39;ll bet it would &quot;just work&quot;.  Furthermore, I verified there is <i>no</i> package conflict between the Oracle imap.jar and mail.jar (like there is in his version).  It&#39;s definitely worth trying.  I&#39;m just very disappointed he&#39;s probably not listening any more :("}],"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1381632245,"creation_date":1381632245,"answer_id":19341314,"question_id":19339670,"body_markdown":"1) In general: Yes you can have the same class in different .jar files: you just disambiguate them with a fully qualified package name.  The &quot;Date&quot; class (present in java.util and java.sql) is a good example.\r\n\r\n2) If you have two *DIFFERENT* .jar files that have the *SAME* fully qualified package names ... chances are, you&#39;ve got a conflict.  Even if you can hack around the InvocationTargetException by playing with the class loader, you might still encounter other problems. In this case, it sounds like maybe your two .jar files have two different implementations of the JavaMail API.  I don&#39;t know.\r\n\r\n3) The safest bet is to satisfy all your program&#39;s references *WITHOUT* risking a conflict.  I believe if you took took the &quot;official&quot; .jar&#39;s from Oracle&#39;s JavaMail web page, you can do this:\r\n\r\n  https://java.net/projects/javamail/pages/Home\r\n\r\n&#39;Hope that helps!","title":"Java: Two jars in project with same class.","body":"<p>1) In general: Yes you can have the same class in different .jar files: you just disambiguate them with a fully qualified package name.  The \"Date\" class (present in java.util and java.sql) is a good example.</p>\n\n<p>2) If you have two <em>DIFFERENT</em> .jar files that have the <em>SAME</em> fully qualified package names ... chances are, you've got a conflict.  Even if you can hack around the InvocationTargetException by playing with the class loader, you might still encounter other problems. In this case, it sounds like maybe your two .jar files have two different implementations of the JavaMail API.  I don't know.</p>\n\n<p>3) The safest bet is to satisfy all your program's references <em>WITHOUT</em> risking a conflict.  I believe if you took took the \"official\" .jar's from Oracle's JavaMail web page, you can do this:</p>\n\n<p><a href=\"https://java.net/projects/javamail/pages/Home\" rel=\"nofollow\">https://java.net/projects/javamail/pages/Home</a></p>\n\n<p>'Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1381653345,"creation_date":1381653345,"answer_id":19343282,"question_id":19339670,"body_markdown":"You cannot do what you ask just in your Java source.  Java was not designed for that.\r\n\r\nThis is a bad situation which can only be handled reliably with custom class loaders, each providing one of the jars you need.  Since you are asking this question in the first place this is probably not the way you should go yet since that opens up a LOT of new time consuming problems.\r\n\r\nI would strongly suggest you find out _why_ you have two different versions of the same jar in your classpath and rework your program so you only need one version.  ","title":"Java: Two jars in project with same class.","body":"<p>You cannot do what you ask just in your Java source.  Java was not designed for that.</p>\n\n<p>This is a bad situation which can only be handled reliably with custom class loaders, each providing one of the jars you need.  Since you are asking this question in the first place this is probably not the way you should go yet since that opens up a LOT of new time consuming problems.</p>\n\n<p>I would strongly suggest you find out <em>why</em> you have two different versions of the same jar in your classpath and rework your program so you only need one version.  </p>\n"},{"tags":[],"owner":{"account_id":4985204,"reputation":111,"user_id":4009042,"accept_rate":100,"display_name":"biao li"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413570612,"creation_date":1413570612,"answer_id":26431254,"question_id":19339670,"body_markdown":"Yes, there is a way to fix the issue. In my scenario, I have two classes with same name and same path and eclipse always imports the wrong one. What I have done is changing the jar order in the build path and eclipse will pick the first one in the build path.  ","title":"Java: Two jars in project with same class.","body":"<p>Yes, there is a way to fix the issue. In my scenario, I have two classes with same name and same path and eclipse always imports the wrong one. What I have done is changing the jar order in the build path and eclipse will pick the first one in the build path.  </p>\n"},{"tags":[],"owner":{"account_id":1357124,"reputation":103,"user_id":1295300,"display_name":"user1295300"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461248574,"creation_date":1461248574,"answer_id":36772526,"question_id":19339670,"body_markdown":"If you are using an IDE, you can set the order of exporting the files to the class loader. \r\n\r\nI work on eclipse and I use maven. When I install the project using maven, it produced many extra jars (which i hadnt defined in my dependencies) and there was a file `org.w3c.dom.Element` which was present in 2 jar files and 3rd instance of the same file was also in JRE7.\r\n\r\nIn order to make sure the correct file is picked up, all I had to do was to go to **Java Build Path** -&gt; **Order and Export**. Select the Jar file I wanted the classloader to give more preference and move it up with the button &quot;Up&quot;.\r\n\r\nThis is how it looks. \r\n[![Eclipse - Java Build Path -&gt; Order and Export][1]][1]\r\nPlease note that this image is for eclipse. But for other IDEs there would definitely be a similar way to work this out. \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/gXcGf.jpg","title":"Java: Two jars in project with same class.","body":"<p>If you are using an IDE, you can set the order of exporting the files to the class loader. </p>\n\n<p>I work on eclipse and I use maven. When I install the project using maven, it produced many extra jars (which i hadnt defined in my dependencies) and there was a file <code>org.w3c.dom.Element</code> which was present in 2 jar files and 3rd instance of the same file was also in JRE7.</p>\n\n<p>In order to make sure the correct file is picked up, all I had to do was to go to <strong>Java Build Path</strong> -> <strong>Order and Export</strong>. Select the Jar file I wanted the classloader to give more preference and move it up with the button \"Up\".</p>\n\n<p>This is how it looks. \n<a href=\"https://i.stack.imgur.com/gXcGf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXcGf.jpg\" alt=\"Eclipse - Java Build Path -&gt; Order and Export\"></a>\nPlease note that this image is for eclipse. But for other IDEs there would definitely be a similar way to work this out. </p>\n"}],"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40133,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":19343282,"answer_count":5,"score":15,"last_activity_date":1675219822,"creation_date":1381615323,"question_id":19339670,"body_markdown":"I have a java project that is using two imported jars with the same class (`com.sun.mail.imap.IMAPFolder`).  Is there a way to explicitly say which jar to use when importing the class?  Using: \r\n\r\n    import com.sun.mail.imap.IMAPFolder; \r\n\r\nwould seem to use the class in order of build path order but this does not seem to be the case for some reason causing \r\n\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:616)\r\n            at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)\r\n    Caused by: java.lang.NoSuchMethodError: com.sun.mail.imap.IMAPFolder.idle()V\r\n            at com.woodbury.GCM.HelperGmailMonitor.doEmail(HelperGmailMonitor.java:104)\r\n            at com.woodbury.GCM.Launch.listen(Launch.java:16)\r\n            at com.woodbury.GCM.Launch.main(Launch.java:10)\r\n            ... 5 more\r\n\r\n\r\nat runtime.  I am building the project in eclipse.  ","title":"Java: Two jars in project with same class.","body":"<p>I have a java project that is using two imported jars with the same class (<code>com.sun.mail.imap.IMAPFolder</code>).  Is there a way to explicitly say which jar to use when importing the class?  Using: </p>\n\n<pre><code>import com.sun.mail.imap.IMAPFolder; \n</code></pre>\n\n<p>would seem to use the class in order of build path order but this does not seem to be the case for some reason causing </p>\n\n<pre><code>Exception in thread \"main\" java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:616)\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)\nCaused by: java.lang.NoSuchMethodError: com.sun.mail.imap.IMAPFolder.idle()V\n        at com.woodbury.GCM.HelperGmailMonitor.doEmail(HelperGmailMonitor.java:104)\n        at com.woodbury.GCM.Launch.listen(Launch.java:16)\n        at com.woodbury.GCM.Launch.main(Launch.java:10)\n        ... 5 more\n</code></pre>\n\n<p>at runtime.  I am building the project in eclipse.  </p>\n"},{"tags":["java","maven","jar","dependencies"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674252299,"post_id":75189460,"comment_id":132682812,"body_markdown":"Looking at the plugin docs I couldn&#39;t see which phase `changelog:changelog` was bound to by default, but you can add plugin configuration, as you have for the `build-helper-maven-plugin` which will run changelog in an earlier phase.","body":"Looking at the plugin docs I couldn&#39;t see which phase <code>changelog:changelog</code> was bound to by default, but you can add plugin configuration, as you have for the <code>build-helper-maven-plugin</code> which will run changelog in an earlier phase."},{"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"score":0,"creation_date":1674483986,"post_id":75189460,"comment_id":132717548,"body_markdown":"@tgdavies I did try adding a phase to the `build-helper` plugin, but when used in the `&lt;reporting&gt; block it always runs last. I tried moving the plugin to the &lt;build&gt; block with an earlier phase, and it still did not work. \nEven using `mvn site install`, which builds the reports first, does not work because the `add-changelog` plugin does not find the file","body":"@tgdavies I did try adding a phase to the <code>build-helper</code> plugin, but when used in the <code>&lt;reporting&gt; block it always runs last. I tried moving the plugin to the &lt;build&gt; block with an earlier phase, and it still did not work.  Even using </code>mvn site install<code>, which builds the reports first, does not work because the </code>add-changelog` plugin does not find the file"}],"answers":[{"tags":[],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675219534,"creation_date":1675219534,"answer_id":75305146,"question_id":75189460,"body_markdown":"The issue with the `maven-changelog-plugin` was that it always ran at a step later than the build step where it needed to be. I ended up using the `gitlog-maven-plugin` instead, which allowed me to change the phase at which it executed","title":"Generating changeset and adding it to JAR with Maven","body":"<p>The issue with the <code>maven-changelog-plugin</code> was that it always ran at a step later than the build step where it needed to be. I ended up using the <code>gitlog-maven-plugin</code> instead, which allowed me to change the phase at which it executed</p>\n"}],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75305146,"answer_count":1,"score":0,"last_activity_date":1675219534,"creation_date":1674250010,"question_id":75189460,"body_markdown":"I&#39;m generating a git diff changeset using the `maven-changelog-plugin`. This plugin runs when I run `mvn site` or `mvn changeset:changeset` and outputs the changeset file into `target/site/changeset.html` and `/target/changeset.xml`. I would like to include this generated file in the jar that is built when I run `mvn clean install`.\r\n\r\nHow can I include this generated file in the JAR? I&#39;ve tried using the `build-helper-maven-plugin` to add an artifact or to add a source, but it seems that the changeset is created as the last step or isn&#39;t discoverable. \r\n\r\nMy most recent attempt:\r\n\r\n```xml\r\n  &lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-changelog-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3&lt;/version&gt;\r\n        &lt;reportSets&gt;\r\n          &lt;reportSet&gt;\r\n            &lt;id&gt;changelog-report&lt;/id&gt;\r\n            &lt;configuration&gt;\r\n              &lt;type&gt;range&lt;/type&gt;\r\n              &lt;range&gt;30&lt;/range&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;reports&gt;\r\n              &lt;report&gt;changelog&lt;/report&gt;\r\n            &lt;/reports&gt;\r\n          &lt;/reportSet&gt;\r\n        &lt;/reportSets&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n\r\n  &lt;profiles&gt;\r\n    &lt;profile&gt;\r\n      &lt;id&gt;add-changelog-to-artifact&lt;/id&gt;\r\n        &lt;activation&gt;\r\n            &lt;file&gt;&lt;exists&gt;target/site/changelog.html&lt;/exists&gt;&lt;/file&gt;\r\n        &lt;/activation&gt;\r\n        &lt;build&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n              &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.3.0&lt;/version&gt;\r\n              &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                  &lt;id&gt;add-source&lt;/id&gt;\r\n                  &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                  &lt;goals&gt;\r\n                    &lt;goal&gt;add-source&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                  &lt;configuration&gt;\r\n                    &lt;sources&gt;\r\n                      &lt;source&gt;target/site/changelog.html&lt;/source&gt;\r\n                    &lt;/sources&gt;\r\n                  &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n              &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/profile&gt;\r\n  &lt;/profiles&gt;\r\n```","title":"Generating changeset and adding it to JAR with Maven","body":"<p>I'm generating a git diff changeset using the <code>maven-changelog-plugin</code>. This plugin runs when I run <code>mvn site</code> or <code>mvn changeset:changeset</code> and outputs the changeset file into <code>target/site/changeset.html</code> and <code>/target/changeset.xml</code>. I would like to include this generated file in the jar that is built when I run <code>mvn clean install</code>.</p>\n<p>How can I include this generated file in the JAR? I've tried using the <code>build-helper-maven-plugin</code> to add an artifact or to add a source, but it seems that the changeset is created as the last step or isn't discoverable.</p>\n<p>My most recent attempt:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-changelog-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.3&lt;/version&gt;\n        &lt;reportSets&gt;\n          &lt;reportSet&gt;\n            &lt;id&gt;changelog-report&lt;/id&gt;\n            &lt;configuration&gt;\n              &lt;type&gt;range&lt;/type&gt;\n              &lt;range&gt;30&lt;/range&gt;\n            &lt;/configuration&gt;\n            &lt;reports&gt;\n              &lt;report&gt;changelog&lt;/report&gt;\n            &lt;/reports&gt;\n          &lt;/reportSet&gt;\n        &lt;/reportSets&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;add-changelog-to-artifact&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;file&gt;&lt;exists&gt;target/site/changelog.html&lt;/exists&gt;&lt;/file&gt;\n        &lt;/activation&gt;\n        &lt;build&gt;\n          &lt;plugins&gt;\n            &lt;plugin&gt;\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n              &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n              &lt;version&gt;3.3.0&lt;/version&gt;\n              &lt;executions&gt;\n                &lt;execution&gt;\n                  &lt;id&gt;add-source&lt;/id&gt;\n                  &lt;phase&gt;generate-sources&lt;/phase&gt;\n                  &lt;goals&gt;\n                    &lt;goal&gt;add-source&lt;/goal&gt;\n                  &lt;/goals&gt;\n                  &lt;configuration&gt;\n                    &lt;sources&gt;\n                      &lt;source&gt;target/site/changelog.html&lt;/source&gt;\n                    &lt;/sources&gt;\n                  &lt;/configuration&gt;\n                &lt;/execution&gt;\n              &lt;/executions&gt;\n            &lt;/plugin&gt;\n          &lt;/plugins&gt;\n        &lt;/build&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n</code></pre>\n"},{"tags":["java","logging","log4j2","xinclude"],"comments":[{"owner":{"account_id":2567170,"reputation":10683,"user_id":3537858,"display_name":"Alexey Gavrilov"},"score":0,"creation_date":1398109443,"post_id":23200891,"comment_id":35494718,"body_markdown":"Log4j loads configuration files from the classpath. If you put the test code classpath before the library classpath the log4j configuration should be taken from the test code. Here is a [link](http://stackoverflow.com/questions/2772466/where-to-place-log4j-xml) to the stackoverflow question which can be helpful.","body":"Log4j loads configuration files from the classpath. If you put the test code classpath before the library classpath the log4j configuration should be taken from the test code. Here is a <a href=\"http://stackoverflow.com/questions/2772466/where-to-place-log4j-xml\">link</a> to the stackoverflow question which can be helpful."},{"owner":{"account_id":3717453,"reputation":133,"user_id":3093295,"display_name":"user3093295"},"score":0,"creation_date":1398110899,"post_id":23200891,"comment_id":35495545,"body_markdown":"Thanks for the reply Alexey, but I don&#39;t think I was clear enough in my question. I&#39;ve edited it to try to be more clear.","body":"Thanks for the reply Alexey, but I don&#39;t think I was clear enough in my question. I&#39;ve edited it to try to be more clear."}],"answers":[{"comments":[{"owner":{"account_id":3717453,"reputation":133,"user_id":3093295,"display_name":"user3093295"},"score":0,"creation_date":1398696525,"post_id":23211804,"comment_id":35748694,"body_markdown":"Thanks, I did in fact wind up with merging both the test and the distribution log4j2  files. Not really what I wanted, but apparently there&#39;s nothing better.  I did try using Xinclude, but could not make it work.  Not important enough to spend more time trying to get Xinclude strategy to work.","body":"Thanks, I did in fact wind up with merging both the test and the distribution log4j2  files. Not really what I wanted, but apparently there&#39;s nothing better.  I did try using Xinclude, but could not make it work.  Not important enough to spend more time trying to get Xinclude strategy to work."}],"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"comment_count":1,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1398147382,"creation_date":1398147382,"answer_id":23211804,"question_id":23200891,"body_markdown":"This may be helpful:\r\n\r\n - Log4j2 will first look for log4j2-test.xml in the classpath\r\n - if that file is not found, it will look for log4j2.xml in the classpath\r\n\r\nSo one option is to copy the library&#39;s configuration (log4j2.xml) to log4j2-test.xml and add your own configuration to log4j2-test.xml.\r\n\r\nFurthermore, Log4j2 [supports XInclude in XML configuration][1], so you could use that feature to avoid duplicating the library&#39;s configuration in your log4j2-test.xml.\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/LOG4J2-341","title":"How to use multiple configuration files for Log4j2?","body":"<p>This may be helpful:</p>\n\n<ul>\n<li>Log4j2 will first look for log4j2-test.xml in the classpath</li>\n<li>if that file is not found, it will look for log4j2.xml in the classpath</li>\n</ul>\n\n<p>So one option is to copy the library's configuration (log4j2.xml) to log4j2-test.xml and add your own configuration to log4j2-test.xml.</p>\n\n<p>Furthermore, Log4j2 <a href=\"https://issues.apache.org/jira/browse/LOG4J2-341\" rel=\"noreferrer\">supports XInclude in XML configuration</a>, so you could use that feature to avoid duplicating the library's configuration in your log4j2-test.xml.</p>\n"},{"comments":[{"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"score":0,"creation_date":1440068757,"post_id":23212426,"comment_id":52125619,"body_markdown":"Where do you change your &quot;java runtime command&quot;? I tried Project &gt; Preferences &gt; Run/Debug Settings , picked some configurations, clicked Edit, Arguments tab, VM arguments.","body":"Where do you change your &quot;java runtime command&quot;? I tried Project &gt; Preferences &gt; Run/Debug Settings , picked some configurations, clicked Edit, Arguments tab, VM arguments."}],"tags":[],"owner":{"account_id":2754907,"reputation":1362,"user_id":2373304,"accept_rate":67,"display_name":"loknath"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1398149360,"creation_date":1398149360,"answer_id":23212426,"question_id":23200891,"body_markdown":"There are two step you can try to solve for your issue\r\n   \r\n\r\n - Create your own configuration file with your custom name(eg: xyz.properties/.xml)\r\n - You must add the following line to your java runtime command\r\n  \r\n   \r\n\r\n&gt; **cmd&gt; java -Dlog4j.configuration=location/xyz.properties**\r\n\r\n \r\n\r\nIf you use diffent name for configuration rather log4j.properties/.xml file you need to configure that file at runtime by above command for more info have a look [**here..**][1]\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html","title":"How to use multiple configuration files for Log4j2?","body":"<p>There are two step you can try to solve for your issue</p>\n\n<ul>\n<li>Create your own configuration file with your custom name(eg: xyz.properties/.xml)</li>\n<li>You must add the following line to your java runtime command</li>\n</ul>\n\n<blockquote>\n  <p><strong>cmd> java -Dlog4j.configuration=location/xyz.properties</strong></p>\n</blockquote>\n\n<p>If you use diffent name for configuration rather log4j.properties/.xml file you need to configure that file at runtime by above command for more info have a look <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html\" rel=\"nofollow\"><strong>here..</strong></a></p>\n"},{"tags":[],"owner":{"account_id":439249,"reputation":1128,"user_id":828062,"accept_rate":40,"display_name":"zendu"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1675218879,"creation_date":1506133170,"answer_id":46375401,"question_id":23200891,"body_markdown":"Log4j2 supports &quot;*Composite Configuration*&quot; which exactly matches your requirement. All you need to do is provide path to multiple files in `log4j.configurationFile` property. This can be passed from command line or added to `log4j2.component.properties` file in your application.\r\n\r\n---\r\n## References\r\n\r\n - https://logging.apache.org/log4j/2.x/manual/configuration.html#CompositeConfiguration\r\n - https://logging.apache.org/log4j/2.x/manual/configuration.html#SystemProperties","title":"How to use multiple configuration files for Log4j2?","body":"<p>Log4j2 supports &quot;<em>Composite Configuration</em>&quot; which exactly matches your requirement. All you need to do is provide path to multiple files in <code>log4j.configurationFile</code> property. This can be passed from command line or added to <code>log4j2.component.properties</code> file in your application.</p>\n<hr />\n<h2>References</h2>\n<ul>\n<li><a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#CompositeConfiguration\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html#CompositeConfiguration</a></li>\n<li><a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#SystemProperties\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html#SystemProperties</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15765412,"reputation":1,"user_id":11375943,"display_name":"habeeb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555533467,"creation_date":1555533467,"answer_id":55735631,"question_id":23200891,"body_markdown":"Correct format for using an alternate XML file to log4j2.xml: \r\n\r\n`java -Dlog4j.configurationFile=./location/log4j2-custom.xml`\r\n\r\nAssuming `./location/log4j2-custom.xml` exists and is the new XML to replace log4j2.xml in this run\r\n\r\nSee:\r\nhttps://github.com/kamalcph/Log4j2Examples/blob/master/src/main/java/in/co/nmsworks/log4j2/examples/CompositeConfigurationExample.java","title":"How to use multiple configuration files for Log4j2?","body":"<p>Correct format for using an alternate XML file to log4j2.xml: </p>\n\n<p><code>java -Dlog4j.configurationFile=./location/log4j2-custom.xml</code></p>\n\n<p>Assuming <code>./location/log4j2-custom.xml</code> exists and is the new XML to replace log4j2.xml in this run</p>\n\n<p>See:\n<a href=\"https://github.com/kamalcph/Log4j2Examples/blob/master/src/main/java/in/co/nmsworks/log4j2/examples/CompositeConfigurationExample.java\" rel=\"nofollow noreferrer\">https://github.com/kamalcph/Log4j2Examples/blob/master/src/main/java/in/co/nmsworks/log4j2/examples/CompositeConfigurationExample.java</a></p>\n"},{"tags":[],"owner":{"account_id":1840135,"reputation":1,"user_id":1669714,"display_name":"Vadim Leyzerovich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557861395,"creation_date":1557861395,"answer_id":56137154,"question_id":23200891,"body_markdown":"Referencing [https://logging.apache.org/log4j/2.x/manual/configuration.html][1] states that you can add multiple comma separated files under log4j2.configurationFile property. \r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/configuration.html","title":"How to use multiple configuration files for Log4j2?","body":"<p>Referencing <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html</a> states that you can add multiple comma separated files under log4j2.configurationFile property. </p>\n"},{"tags":[],"owner":{"account_id":4739083,"reputation":41,"user_id":8171932,"display_name":"Jose G. Mej&#237;a"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597427594,"creation_date":1597427594,"answer_id":63417779,"question_id":23200891,"body_markdown":"To use multiple configuration files, depending on the environment you must set the.\r\n\r\nfor example:\r\n\r\n    if (env.equals(&quot;DEV&quot;)) {\r\n     setConfigFile(&quot;log4j2-dev.xml&quot;);\r\n    }\r\n\r\n    public static void setConfigFile(String logConfigFile) {\r\n    \t\tFile file = new File(logConfigFile);\r\n    \t\tLoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\r\n    \t\tcontext.setConfigLocation(file.toURI());\r\n    \t}\r\n\r\n\r\n","title":"How to use multiple configuration files for Log4j2?","body":"<p>To use multiple configuration files, depending on the environment you must set the.</p>\n<p>for example:</p>\n<pre><code>if (env.equals(&quot;DEV&quot;)) {\n setConfigFile(&quot;log4j2-dev.xml&quot;);\n}\n\npublic static void setConfigFile(String logConfigFile) {\n        File file = new File(logConfigFile);\n        LoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\n        context.setConfigLocation(file.toURI());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19550060,"reputation":1,"user_id":14305911,"display_name":"user14305911"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600524344,"creation_date":1600524344,"answer_id":63969650,"question_id":23200891,"body_markdown":"\r\n\r\n    first configure application.yaml file\r\n    spring:\r\n      profiles:\r\n        active: dev\r\n    \r\n    ---\r\n    spring:\r\n      message: running in the dev profile    //just to output the message in the log\r\n      profiles: dev\r\n    logging.config: classpath:log4j2-dev.xml\r\n    \r\n    ---\r\n    spring:\r\n      profiles: prod\r\n    logging.config: classpath:log4j2-prod.xml\r\n    \r\n    \r\n    \r\n    and create these similar files in your classpath\r\n    * log4j2-dev.xml\r\n    * log4j2-prod.xml","title":"How to use multiple configuration files for Log4j2?","body":"<pre><code>first configure application.yaml file\nspring:\n  profiles:\n    active: dev\n\n---\nspring:\n  message: running in the dev profile    //just to output the message in the log\n  profiles: dev\nlogging.config: classpath:log4j2-dev.xml\n\n---\nspring:\n  profiles: prod\nlogging.config: classpath:log4j2-prod.xml\n\n\n\nand create these similar files in your classpath\n* log4j2-dev.xml\n* log4j2-prod.xml\n</code></pre>\n"}],"owner":{"account_id":3717453,"reputation":133,"user_id":3093295,"display_name":"user3093295"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20816,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":23211804,"answer_count":7,"score":11,"last_activity_date":1675218879,"creation_date":1398095824,"question_id":23200891,"body_markdown":"I am writing Java code that tests a Java library. The library includes its own Log4j2 configuration as part of the distribution.\r\n\r\nI would like to use Log4j2 in my test code without modifying the library&#39;s configuration.\r\n\r\nIs there a way to have a separate Log4j2 configuration for my test code?\r\n\r\nThis is all running as command-line Java, no servers or web involvement at all.\r\n\r\n---\r\n## EDIT\r\n\r\nWhat I want is to be able to configure *loggers*, *appenders*, etc for the test code to use, and **at the same time** have the library code use **its own separate configuration file** for its logging.\r\n\r\nThe idea is to use Log4j2 in my test code, but without having to change the library&#39;s configuration file. Since the library configuration file is part of the library&#39;s distribution, I don&#39;t want to change it for testing.","title":"How to use multiple configuration files for Log4j2?","body":"<p>I am writing Java code that tests a Java library. The library includes its own Log4j2 configuration as part of the distribution.</p>\n<p>I would like to use Log4j2 in my test code without modifying the library's configuration.</p>\n<p>Is there a way to have a separate Log4j2 configuration for my test code?</p>\n<p>This is all running as command-line Java, no servers or web involvement at all.</p>\n<hr />\n<h2>EDIT</h2>\n<p>What I want is to be able to configure <em>loggers</em>, <em>appenders</em>, etc for the test code to use, and <strong>at the same time</strong> have the library code use <strong>its own separate configuration file</strong> for its logging.</p>\n<p>The idea is to use Log4j2 in my test code, but without having to change the library's configuration file. Since the library configuration file is part of the library's distribution, I don't want to change it for testing.</p>\n"},{"tags":["c#","java","python","performance"],"comments":[{"owner":{"account_id":7478,"reputation":74894,"user_id":13018,"accept_rate":73,"display_name":"annakata"},"score":1,"creation_date":1237804059,"post_id":672857,"comment_id":486351,"body_markdown":"you know, you really should provide evidence of this...","body":"you know, you really should provide evidence of this..."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1237804144,"post_id":672857,"comment_id":486357,"body_markdown":"Indeed - at least a test case would help us to reason about it.","body":"Indeed - at least a test case would help us to reason about it."},{"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"score":0,"creation_date":1237804180,"post_id":672857,"comment_id":486362,"body_markdown":"http://furryland.org/~mikec/bench/","body":"<a href=\"http://furryland.org/~mikec/bench/\" rel=\"nofollow noreferrer\">furryland.org/~mikec/bench</a>"},{"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"score":0,"creation_date":1237804244,"post_id":672857,"comment_id":486366,"body_markdown":"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/","body":"<a href=\"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\" rel=\"nofollow noreferrer\">blog.dhananjaynene.com/2008/07/&hellip;</a>"},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1237805013,"post_id":672857,"comment_id":486387,"body_markdown":"@rajKumar: Please update the question with additional facts -- do not put important information into comments.","body":"@rajKumar: Please update the question with additional facts -- do not put important information into comments."},{"owner":{"account_id":25448,"reputation":5001,"user_id":65412,"accept_rate":59,"display_name":"Real Red."},"score":2,"creation_date":1237806080,"post_id":672857,"comment_id":486426,"body_markdown":"why would you close this, i don&#39;t see this as subjective or argumentive. there should be this much flexibility in questions at least!","body":"why would you close this, i don&#39;t see this as subjective or argumentive. there should be this much flexibility in questions at least!"},{"owner":{"account_id":7478,"reputation":74894,"user_id":13018,"accept_rate":73,"display_name":"annakata"},"score":0,"creation_date":1237806193,"post_id":672857,"comment_id":486429,"body_markdown":"on the grounds that as it stands it&#39;s not a real question - not enough data","body":"on the grounds that as it stands it&#39;s not a real question - not enough data"},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":2,"creation_date":1237806989,"post_id":672857,"comment_id":486445,"body_markdown":"@annakata: There&#39;s some data that Python can be slow.  It&#39;s demonstrably slower than C#.  When it comes to Java, this is debatable; there&#39;s lot&#39;s of JIT factors that influence this.","body":"@annakata: There&#39;s some data that Python can be slow.  It&#39;s demonstrably slower than C#.  When it comes to Java, this is debatable; there&#39;s lot&#39;s of JIT factors that influence this."},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1237813393,"post_id":672857,"comment_id":486783,"body_markdown":"Is this a question about run-time or development time?  Are you asking if Python are slower to run or are slower to develop?","body":"Is this a question about run-time or development time?  Are you asking if Python are slower to run or are slower to develop?"},{"owner":{"account_id":29014,"reputation":2864,"user_id":1838492,"accept_rate":89,"display_name":"Michael Piendl"},"score":11,"creation_date":1237819123,"post_id":672857,"comment_id":487056,"body_markdown":"guido says sometimes: python focus on fast development - not on fast runtime. you should be able to code skripts as simple and fast as possible.","body":"guido says sometimes: python focus on fast development - not on fast runtime. you should be able to code skripts as simple and fast as possible."},{"owner":{"account_id":3021,"reputation":403278,"user_id":4279,"accept_rate":94,"display_name":"jfs"},"score":0,"creation_date":1237828946,"post_id":672857,"comment_id":487796,"body_markdown":"@rajKumar: Please, change title of the question to be more neutral and specific.","body":"@rajKumar: Please, change title of the question to be more neutral and specific."},{"owner":{"account_id":7689,"reputation":53388,"user_id":13422,"accept_rate":50,"display_name":"Zan Lynx"},"score":0,"creation_date":1237861940,"post_id":672857,"comment_id":489457,"body_markdown":"And what implementation of Python?  CPython is only one, there is jython and IronPython as well.","body":"And what implementation of Python?  CPython is only one, there is jython and IronPython as well."},{"owner":{"account_id":23998,"reputation":131997,"user_id":60711,"accept_rate":81,"display_name":"vartec"},"score":6,"creation_date":1237884272,"post_id":672857,"comment_id":489903,"body_markdown":"&#161;&#191;Offensive?! Why would someone mark that question as offensive?","body":"&#161;&#191;Offensive?! Why would someone mark that question as offensive?"},{"owner":{"account_id":16121,"reputation":36478,"user_id":34813,"accept_rate":67,"display_name":"Esteban K&#252;ber"},"score":0,"creation_date":1248441925,"post_id":672857,"comment_id":998336,"body_markdown":"Slower? Slower for what? It depends on what libraries are you using, as a lot of them are C compiled, specially the number intensive libraries.","body":"Slower? Slower for what? It depends on what libraries are you using, as a lot of them are C compiled, specially the number intensive libraries."},{"owner":{"account_id":358635,"reputation":829,"user_id":699540,"accept_rate":40,"display_name":"user699540"},"score":0,"creation_date":1369624224,"post_id":672857,"comment_id":24154851,"body_markdown":"Speed is subjective. What kind of speed are we talking about here? For example, if you are referring to using the CPU cores, then obviously no variant of Python is able to get rid of GIL except Jython - this factor does affect the speed.","body":"Speed is subjective. What kind of speed are we talking about here? For example, if you are referring to using the CPU cores, then obviously no variant of Python is able to get rid of GIL except Jython - this factor does affect the speed."},{"owner":{"account_id":9060061,"reputation":527,"user_id":6746850,"display_name":"Ahmad Javadi Nezhad"},"score":0,"creation_date":1536865035,"post_id":672857,"comment_id":91587643,"body_markdown":"It depends on what do u want do with python.","body":"It depends on what do u want do with python."}],"answers":[{"comments":[{"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"score":0,"creation_date":1237804337,"post_id":672871,"comment_id":486370,"body_markdown":"please check this url http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/","body":"please check this url <a href=\"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\" rel=\"nofollow noreferrer\">blog.dhananjaynene.com/2008/07/&hellip;</a>"},{"owner":{"account_id":1603,"reputation":193473,"user_id":2147,"accept_rate":85,"display_name":"Jason Baker"},"score":0,"creation_date":1240782161,"post_id":672871,"comment_id":601918,"body_markdown":"There is also a branch to move Python to llvm:  http://code.google.com/p/unladen-swallow/wiki/ProjectPlan.","body":"There is also a branch to move Python to llvm:  <a href=\"http://code.google.com/p/unladen-swallow/wiki/ProjectPlan\" rel=\"nofollow noreferrer\">code.google.com/p/unladen-swallow/wiki/ProjectPlan</a>."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1237804251,"creation_date":1237804251,"answer_id":672871,"question_id":672857,"body_markdown":"As suggested in comments, you should really provide a test case to reason about. Reasons behind performance differences will change depending on the test being executed.\r\n\r\nHowever, I&#39;d suggest that the static vs dynamic nature may well have a lot to do with it. For non-virtual calls, the JIT-compiled C#/Java is extremely cheap as it can be determined accurately at JIT-time. Even virtual calls just involve a single level of redirection. When binding becomes dynamic, there&#39;s a wider range of things to consider.\r\n\r\nI don&#39;t know enough details about Python to claim to understand its exact runtime behaviour, which I suspect may vary with version and implementation too. There is such a thing as &quot;python byte code&quot; which is then executed by a virtual machine - whether this virtual machine actually performs JIT-compilation or not is another matter.","title":"Is Python slower than Java/C#?","body":"<p>As suggested in comments, you should really provide a test case to reason about. Reasons behind performance differences will change depending on the test being executed.</p>\n\n<p>However, I'd suggest that the static vs dynamic nature may well have a lot to do with it. For non-virtual calls, the JIT-compiled C#/Java is extremely cheap as it can be determined accurately at JIT-time. Even virtual calls just involve a single level of redirection. When binding becomes dynamic, there's a wider range of things to consider.</p>\n\n<p>I don't know enough details about Python to claim to understand its exact runtime behaviour, which I suspect may vary with version and implementation too. There is such a thing as \"python byte code\" which is then executed by a virtual machine - whether this virtual machine actually performs JIT-compilation or not is another matter.</p>\n"},{"tags":[],"owner":{"account_id":11659,"reputation":53279,"user_id":22595,"accept_rate":77,"display_name":"Micha Niklas"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1237804421,"creation_date":1237804421,"answer_id":672879,"question_id":672857,"body_markdown":"I think opposite. I can do simple program in Python faster than in Java,\r\nand those Python scripts work really fast.\r\n\r\nOf course your question without examples is hard to answer. Maybe you have found slow library, bug etc. Give us more details please.","title":"Is Python slower than Java/C#?","body":"<p>I think opposite. I can do simple program in Python faster than in Java,\nand those Python scripts work really fast.</p>\n\n<p>Of course your question without examples is hard to answer. Maybe you have found slow library, bug etc. Give us more details please.</p>\n"},{"comments":[{"owner":{"account_id":1062,"reputation":37710,"user_id":1409,"accept_rate":87,"display_name":"Herms"},"score":0,"creation_date":1237815671,"post_id":673019,"comment_id":486872,"body_markdown":"&quot;native-code C#&quot;?  Isn&#39;t C# just compiled down to the .Net CLI and run in the .Net VM (like Java runs in the JVM)?  Are you suggesting there&#39;s a way to compile C# into straight native code, or are you just talking about the JITing that happens in the .Net VM?","body":"&quot;native-code C#&quot;?  Isn&#39;t C# just compiled down to the .Net CLI and run in the .Net VM (like Java runs in the JVM)?  Are you suggesting there&#39;s a way to compile C# into straight native code, or are you just talking about the JITing that happens in the .Net VM?"},{"owner":{"account_id":9799,"reputation":3583,"user_id":18233,"accept_rate":75,"display_name":"Martin OConnor"},"score":0,"creation_date":1237816053,"post_id":673019,"comment_id":486895,"body_markdown":"I think you need to replace C# with C++ in your post, as C# is not mentioned in the Quesioners link.","body":"I think you need to replace C# with C++ in your post, as C# is not mentioned in the Quesioners link."},{"owner":{"account_id":3261,"reputation":62041,"user_id":4685,"accept_rate":100,"display_name":"Pop Catalin"},"score":1,"creation_date":1237821645,"post_id":673019,"comment_id":487252,"body_markdown":"IronPython is not interpreted is just in time compiled to native code, just like C# is ... or Java.","body":"IronPython is not interpreted is just in time compiled to native code, just like C# is ... or Java."},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1237823297,"post_id":673019,"comment_id":487401,"body_markdown":"Thanks for the additional corrections.","body":"Thanks for the additional corrections."},{"owner":{"account_id":7354,"reputation":672,"user_id":12754,"display_name":"Dhananjay Nene"},"score":85,"creation_date":1237907350,"post_id":673019,"comment_id":491025,"body_markdown":"Jython does not have the same performance profile as Java at all. In fact I benchmarked it in the blog post referred to in the question and it is a lot lot slower than java.","body":"Jython does not have the same performance profile as Java at all. In fact I benchmarked it in the blog post referred to in the question and it is a lot lot slower than java."},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1237913291,"post_id":673019,"comment_id":491464,"body_markdown":"@Dhananjay Nene: the comparison (it appears from other answers) used a literal rewrite of Java in Python, resulting in un-pythonic code that may not be an appropriate comparison between languages.","body":"@Dhananjay Nene: the comparison (it appears from other answers) used a literal rewrite of Java in Python, resulting in un-pythonic code that may not be an appropriate comparison between languages."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":8,"creation_date":1240766520,"post_id":673019,"comment_id":601494,"body_markdown":"That&#39;s beside the point- the fact is that Jython does NOT even remotely have the performance profile of Java. Whether this is due to the JVM or, the language, or its implementation on the JVM is another matter. To me it looks to be the latter, especially since JRuby seems to be performing on par with the C implementation of Ruby.","body":"That&#39;s beside the point- the fact is that Jython does NOT even remotely have the performance profile of Java. Whether this is due to the JVM or, the language, or its implementation on the JVM is another matter. To me it looks to be the latter, especially since JRuby seems to be performing on par with the C implementation of Ruby."},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":4,"creation_date":1240771219,"post_id":673019,"comment_id":601623,"body_markdown":"@Michael Borgwardt: That&#39;s the usual culprit -- but &quot;benchmarks&quot; which are not Pythonic are not an acceptable comparison.  No one tries to add all of Python&#39;s dynamic memory management to C programs before they do the comparison to prove that C is faster than CPython.","body":"@Michael Borgwardt: That&#39;s the usual culprit -- but &quot;benchmarks&quot; which are not Pythonic are not an acceptable comparison.  No one tries to add all of Python&#39;s dynamic memory management to C programs before they do the comparison to prove that C is faster than CPython."},{"owner":{"account_id":85546,"reputation":84738,"user_id":238419,"accept_rate":89,"display_name":"BlueRaja - Danny Pflughoeft"},"score":10,"creation_date":1265249003,"post_id":673019,"comment_id":2146535,"body_markdown":"C# and IronPython run at nowhere near the same speed.  This is to be expected; Python is a much higher-level language (also, the IronPython compiler isn&#39;t nearly as mature as the C#)","body":"C# and IronPython run at nowhere near the same speed.  This is to be expected; Python is a much higher-level language (also, the IronPython compiler isn&#39;t nearly as mature as the C#)"},{"owner":{"account_id":148309,"reputation":5583,"user_id":359996,"display_name":"user359996"},"score":68,"creation_date":1288386551,"post_id":673019,"comment_id":4356273,"body_markdown":"Don&#39;t conflate language with runtime, sure, but also don&#39;t conflate a casually worded question with its literal meaning. When people ask this sort of question, they __almost always__ mean, *Without unusual effort or cost, will the fastest non-esoteric implementation coupled with a typical runtime environment (which tends to mean a relatively modern Windows or Linux system) tend to be faster for typical development (&quot;typical&quot; depending on context, but usual relating to generic Enterprisey stuff, scripting, and/or web development--and only rarely numerical integration--by average developers)?*","body":"Don&#39;t conflate language with runtime, sure, but also don&#39;t conflate a casually worded question with its literal meaning. When people ask this sort of question, they <b>almost always</b> mean, <i>Without unusual effort or cost, will the fastest non-esoteric implementation coupled with a typical runtime environment (which tends to mean a relatively modern Windows or Linux system) tend to be faster for typical development (&quot;typical&quot; depending on context, but usual relating to generic Enterprisey stuff, scripting, and/or web development--and only rarely numerical integration--by average developers)?</i>"},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":1,"creation_date":1288442563,"post_id":673019,"comment_id":4359597,"body_markdown":"@user359996: &quot;don&#39;e conflate a casually worded question with its literal meaning&quot;.  Correct.  A casually-worded question needs to be **clarified** until it has a meaning.  What is &quot;almost always means&quot; is useless for providing an actual, usable answer.  &quot;relatively modern Windows or Linux system&quot; are **not** equivalent for certain problem domains, so it can&#39;t be assumed, but must be clarified.  &#39;&quot;typical&quot; depending on context&#39; is the point.  Without context, casually-worded questions can&#39;t be answered based on assumptions.","body":"@user359996: &quot;don&#39;e conflate a casually worded question with its literal meaning&quot;.  Correct.  A casually-worded question needs to be <b>clarified</b> until it has a meaning.  What is &quot;almost always means&quot; is useless for providing an actual, usable answer.  &quot;relatively modern Windows or Linux system&quot; are <b>not</b> equivalent for certain problem domains, so it can&#39;t be assumed, but must be clarified.  &#39;&quot;typical&quot; depending on context&#39; is the point.  Without context, casually-worded questions can&#39;t be answered based on assumptions."},{"owner":{"account_id":148309,"reputation":5583,"user_id":359996,"display_name":"user359996"},"score":2,"creation_date":1288576738,"post_id":673019,"comment_id":4369061,"body_markdown":"@S.Lott: Alrighty. But then your answer should instead be a comment. ;)","body":"@S.Lott: Alrighty. But then your answer should instead be a comment. ;)"},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1288606276,"post_id":673019,"comment_id":4371242,"body_markdown":"@user359996:  I don&#39;t get your comment.  You agreed with &quot;Don&#39;t conflate language with runtime&quot;.  Isn&#39;t that the point?  The question is fatally flawed.  One could either assume some kind of &quot;almost always means&quot; or one could clarify.  Or one could indicate that the question is fatally flawed and senseless as asked.  While &quot;almost always means&quot; is completely useless; and clarification is always useful, there is often a middle ground.  And that is to answer a closely-related question without waiting to clarify the vagueness of the question.","body":"@user359996:  I don&#39;t get your comment.  You agreed with &quot;Don&#39;t conflate language with runtime&quot;.  Isn&#39;t that the point?  The question is fatally flawed.  One could either assume some kind of &quot;almost always means&quot; or one could clarify.  Or one could indicate that the question is fatally flawed and senseless as asked.  While &quot;almost always means&quot; is completely useless; and clarification is always useful, there is often a middle ground.  And that is to answer a closely-related question without waiting to clarify the vagueness of the question."},{"owner":{"account_id":148309,"reputation":5583,"user_id":359996,"display_name":"user359996"},"score":2,"creation_date":1288633812,"post_id":673019,"comment_id":4375779,"body_markdown":"@S.Lott: I said, &quot;Don&#39;t conflate a casually worded question with its literal meaning&quot;. You replied, &quot;A casually-worded question needs to be clarified until it has a meaning&quot;. As such, if this was a casually worded question, you should agree it requires clarification. I assert it was indeed such a question, and moreover that clarification should be sought in the comments, thus my reply that &quot;your answer should instead be a comment.&quot;","body":"@S.Lott: I said, &quot;Don&#39;t conflate a casually worded question with its literal meaning&quot;. You replied, &quot;A casually-worded question needs to be clarified until it has a meaning&quot;. As such, if this was a casually worded question, you should agree it requires clarification. I assert it was indeed such a question, and moreover that clarification should be sought in the comments, thus my reply that &quot;your answer should instead be a comment.&quot;"},{"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":1,"creation_date":1288634881,"post_id":673019,"comment_id":4375951,"body_markdown":"@user359996:  Good point.  No opportunity to add the necessary middle ground.  No alternative.  All or nothing based on the original comment and nothing else.  Thanks for pointing that out.","body":"@user359996:  Good point.  No opportunity to add the necessary middle ground.  No alternative.  All or nothing based on the original comment and nothing else.  Thanks for pointing that out."},{"owner":{"account_id":134693,"reputation":11106,"user_id":2624806,"accept_rate":32,"display_name":"CoDe"},"score":0,"creation_date":1446573776,"post_id":673019,"comment_id":54795449,"body_markdown":"@DhananjayNene referred answers [here](http://stackoverflow.com/a/1177553/2624806) that say exact opposite of what you mentioned.","body":"@DhananjayNene referred answers <a href=\"http://stackoverflow.com/a/1177553/2624806\">here</a> that say exact opposite of what you mentioned."},{"owner":{"account_id":6317514,"reputation":1163,"user_id":6425831,"display_name":"saolof"},"score":0,"creation_date":1502192836,"post_id":673019,"comment_id":78093910,"body_markdown":"I thought Python was implementation defined? So all &quot;Python implementations&quot; are really a lie, and are really separate languages that try to emulate Python. ; )","body":"I thought Python was implementation defined? So all &quot;Python implementations&quot; are really a lie, and are really separate languages that try to emulate Python. ; )"}],"tags":[],"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"comment_count":17,"down_vote_count":17,"up_vote_count":142,"is_accepted":true,"score":125,"last_activity_date":1504002089,"creation_date":1237807508,"answer_id":673019,"question_id":672857,"body_markdown":"Don&#39;t conflate Language and Run-Time.\n\nPython (the language) has many run-time implementations.\n\n- CPython is usually interpreted, and will be slower than native-code C#.  It might be slower than Java, depending on the Java JIT compiler.\n\n- JYthon is interpreted in the JVM and has the same performance profile as Java.\n\n- IronPython relies on the same .NET libraries and IL as C#, so the performance difference will be relatively small.\n\n- Python can be translated to native code via PyREX, PyToC, and others.  In this case, it will generally perform as well as C++.  You can -- to an extent -- further optimize C++ and perhaps squeeze out a little bit better performance than unoptimized output from PyREX. \n\n  For more information, see http://arcriley.blogspot.com/2009/03/so-long-pyrex.html\n\nNote that Python (the language) is not slow.  Some Python run-times (CPython, for example) will be slower than native-code C++.","title":"Is Python slower than Java/C#?","body":"<p>Don't conflate Language and Run-Time.</p>\n<p>Python (the language) has many run-time implementations.</p>\n<ul>\n<li><p>CPython is usually interpreted, and will be slower than native-code C#.  It might be slower than Java, depending on the Java JIT compiler.</p>\n</li>\n<li><p>JYthon is interpreted in the JVM and has the same performance profile as Java.</p>\n</li>\n<li><p>IronPython relies on the same .NET libraries and IL as C#, so the performance difference will be relatively small.</p>\n</li>\n<li><p>Python can be translated to native code via PyREX, PyToC, and others.  In this case, it will generally perform as well as C++.  You can -- to an extent -- further optimize C++ and perhaps squeeze out a little bit better performance than unoptimized output from PyREX.</p>\n<p>For more information, see <a href=\"http://arcriley.blogspot.com/2009/03/so-long-pyrex.html\" rel=\"noreferrer\">http://arcriley.blogspot.com/2009/03/so-long-pyrex.html</a></p>\n</li>\n</ul>\n<p>Note that Python (the language) is not slow.  Some Python run-times (CPython, for example) will be slower than native-code C++.</p>\n"},{"comments":[{"owner":{"account_id":45600,"reputation":29188,"user_id":134484,"accept_rate":60,"display_name":"Mark Richman"},"score":42,"creation_date":1394303829,"post_id":673043,"comment_id":33834088,"body_markdown":"I don&#39;t think *any* idiot can do it. It takes a very special kind of idiot :)","body":"I don&#39;t think <i>any</i> idiot can do it. It takes a very special kind of idiot :)"}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":1,"down_vote_count":3,"up_vote_count":65,"is_accepted":false,"score":62,"last_activity_date":1237807848,"creation_date":1237807848,"answer_id":673043,"question_id":672857,"body_markdown":"It is not really correct to ask why Python is slower than Java/C#. How fast is Java? Well, naive interpreters are around ten times slower than optimised compilers. I believe there is a Java bytcode interpreter written in JavaScript - that probably isn&#39;t very fast. So, the intended question appears to be &quot;Why is the CPython language system slower than the equivalent Sun, IBM and Oracle JRE and Microsoft .NET runtime?&quot;\r\n\r\nI believe the correct answer is non-technical. The fastest Java and .NET runtime are faster because they have large full time technical teams developing them in performance-competitive environment.\r\n\r\nDynamic language systems are easy to implement. Any idiot can do it. I have. Static language systems are more complex to design and implement. A simple static system will tend to run much faster than the equivalent just-working dynamic equivalent. However, it is possible for highly optimised dynamic systems to run almost as fast. I understand some Smalltalk implementation were quite good. An often quoted example of a developed dynamic system is the [MIT Lisp Machine][1].\r\n\r\nIn addition if the real grunt is being done by library code, then the language system may not matter. Alternatively, the language may encourage (or give time(!)) to develop more efficient algorithms which can easily wipe out constant factor performance differences.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Lisp_machine","title":"Is Python slower than Java/C#?","body":"<p>It is not really correct to ask why Python is slower than Java/C#. How fast is Java? Well, naive interpreters are around ten times slower than optimised compilers. I believe there is a Java bytcode interpreter written in JavaScript - that probably isn't very fast. So, the intended question appears to be \"Why is the CPython language system slower than the equivalent Sun, IBM and Oracle JRE and Microsoft .NET runtime?\"</p>\n\n<p>I believe the correct answer is non-technical. The fastest Java and .NET runtime are faster because they have large full time technical teams developing them in performance-competitive environment.</p>\n\n<p>Dynamic language systems are easy to implement. Any idiot can do it. I have. Static language systems are more complex to design and implement. A simple static system will tend to run much faster than the equivalent just-working dynamic equivalent. However, it is possible for highly optimised dynamic systems to run almost as fast. I understand some Smalltalk implementation were quite good. An often quoted example of a developed dynamic system is the <a href=\"http://en.wikipedia.org/wiki/Lisp_machine\" rel=\"noreferrer\">MIT Lisp Machine</a>.</p>\n\n<p>In addition if the real grunt is being done by library code, then the language system may not matter. Alternatively, the language may encourage (or give time(!)) to develop more efficient algorithms which can easily wipe out constant factor performance differences.</p>\n"},{"comments":[{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":9,"creation_date":1240766102,"post_id":673090,"comment_id":601475,"body_markdown":"Unless you can provide evidence or reasoning why the &quot;pythonic&quot; version would be about 400 times faster, it&#39;s pretty irrelevant.","body":"Unless you can provide evidence or reasoning why the &quot;pythonic&quot; version would be about 400 times faster, it&#39;s pretty irrelevant."},{"owner":{"account_id":34048,"reputation":860903,"user_id":95810,"accept_rate":80,"display_name":"Alex Martelli"},"score":4,"creation_date":1240775633,"post_id":673090,"comment_id":601736,"body_markdown":"I think it&#39;s quite relevant to point out that all that finicky low-level twiddling is likely to be slower than the direct, pythonic approach.  However there&#39;s an error in the latter -- .append() returns None; vartec may have meant chain[1:]+chain[:1] instead.","body":"I think it&#39;s quite relevant to point out that all that finicky low-level twiddling is likely to be slower than the direct, pythonic approach.  However there&#39;s an error in the latter -- .append() returns None; vartec may have meant chain[1:]+chain[:1] instead."},{"owner":{"account_id":2410004,"reputation":1261,"user_id":2105333,"display_name":"bobrobbob"},"score":0,"creation_date":1525212522,"post_id":673090,"comment_id":87267182,"body_markdown":"@MichaelBorgwardt the lazy evaluation of zip could really turn the code 400 times faster for big arrays. maybe more","body":"@MichaelBorgwardt the lazy evaluation of zip could really turn the code 400 times faster for big arrays. maybe more"}],"tags":[],"owner":{"account_id":23998,"reputation":131997,"user_id":60711,"accept_rate":81,"display_name":"vartec"},"comment_count":3,"down_vote_count":3,"up_vote_count":13,"is_accepted":false,"score":10,"last_activity_date":1237808846,"creation_date":1237808846,"answer_id":673090,"question_id":672857,"body_markdown":"What you got there is clear example of writing Java in Python:\r\n\r\n     def __init__(self,size):  \r\n         self.first = None  \r\n         last = None  \r\n         for i in range(size):  \r\n             current = Person(i)  \r\n             if self.first == None : self.first = current  \r\n             if last != None :  \r\n                 last.next = current  \r\n                 current.prev = last  \r\n             last = current  \r\n         self.first.prev = last  \r\n         last.next = self.first  \r\n\r\nA bit more pythonic:\r\n\r\n     def __init__(self,size):  \r\n         chain = [Person(i) for i in range(size)]\r\n         self.first = chain[0]\r\n         chain = zip(chain, chain[1:].append(chain[0]))\r\n         for p,n in chain:\r\n            p.next = n\r\n            n.prev = p\r\n         \r\n\r\n","title":"Is Python slower than Java/C#?","body":"<p>What you got there is clear example of writing Java in Python:</p>\n\n<pre><code> def __init__(self,size):  \n     self.first = None  \n     last = None  \n     for i in range(size):  \n         current = Person(i)  \n         if self.first == None : self.first = current  \n         if last != None :  \n             last.next = current  \n             current.prev = last  \n         last = current  \n     self.first.prev = last  \n     last.next = self.first  \n</code></pre>\n\n<p>A bit more pythonic:</p>\n\n<pre><code> def __init__(self,size):  \n     chain = [Person(i) for i in range(size)]\n     self.first = chain[0]\n     chain = zip(chain, chain[1:].append(chain[0]))\n     for p,n in chain:\n        p.next = n\n        n.prev = p\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2421927,"reputation":1760,"user_id":2185573,"accept_rate":76,"display_name":"Arunav Sanyal"},"score":2,"creation_date":1394621907,"post_id":673173,"comment_id":33968357,"body_markdown":"&quot;due to fewer lines of code to write and maintain&quot; - maintain part is mostly hogwash. As your project grows, you will gawk at how tough it is to fix bugs in python. Moreover, it is often insanely hard to read to read python code if people go about compacting stuff","body":"&quot;due to fewer lines of code to write and maintain&quot; - maintain part is mostly hogwash. As your project grows, you will gawk at how tough it is to fix bugs in python. Moreover, it is often insanely hard to read to read python code if people go about compacting stuff"}],"tags":[],"owner":{"account_id":7354,"reputation":672,"user_id":12754,"display_name":"Dhananjay Nene"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1237810785,"creation_date":1237810785,"answer_id":673173,"question_id":672857,"body_markdown":"It boils down to the fact that the compilation phase has lesser information to work with and hence the runtime needs to do more work in case of duck typed (dynamically typed) languages. \r\n\r\nThus if I am making the method invocation foo.bar(), in case of Java or C++ the invocation to bar can be optimized in the compilation process by discovering the type of &quot;foo&quot; and then directly invoking the method at the memory location where the compiler knows it will be found. Since a python or any other dynamically typed language compiler does not know what type the object foo belongs to, it has to do a type check at runtime and then look up the address of the bar method and then invoke it. \r\n\r\nThere are other difficulties a python compiler writer struggles with as well, though the one above hopefully adequately gives an indication. So even with the best compiler writers, statically typed languages are likely to perform much better at runtime.\r\n\r\nWhere dynamically typed languages score are typically in the development time. Due to fewer lines of code to write and maintain, and no compile wait times for developers, the development often goes through much faster.","title":"Is Python slower than Java/C#?","body":"<p>It boils down to the fact that the compilation phase has lesser information to work with and hence the runtime needs to do more work in case of duck typed (dynamically typed) languages. </p>\n\n<p>Thus if I am making the method invocation foo.bar(), in case of Java or C++ the invocation to bar can be optimized in the compilation process by discovering the type of \"foo\" and then directly invoking the method at the memory location where the compiler knows it will be found. Since a python or any other dynamically typed language compiler does not know what type the object foo belongs to, it has to do a type check at runtime and then look up the address of the bar method and then invoke it. </p>\n\n<p>There are other difficulties a python compiler writer struggles with as well, though the one above hopefully adequately gives an indication. So even with the best compiler writers, statically typed languages are likely to perform much better at runtime.</p>\n\n<p>Where dynamically typed languages score are typically in the development time. Due to fewer lines of code to write and maintain, and no compile wait times for developers, the development often goes through much faster.</p>\n"},{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1237826169,"post_id":673289,"comment_id":487559,"body_markdown":"Hang on. CPython uses reference counting. Any code that requires that is unlikely to run well multi-core.","body":"Hang on. CPython uses reference counting. Any code that requires that is unlikely to run well multi-core."},{"owner":{"account_id":21100,"reputation":37467,"user_id":51025,"accept_rate":94,"display_name":"DNS"},"score":0,"creation_date":1237834320,"post_id":673289,"comment_id":488221,"body_markdown":"I was thinking more along the lines of &#39;multiprocessing&#39; in the stdlib.","body":"I was thinking more along the lines of &#39;multiprocessing&#39; in the stdlib."},{"owner":{"account_id":16121,"reputation":36478,"user_id":34813,"accept_rate":67,"display_name":"Esteban K&#252;ber"},"score":0,"creation_date":1248441836,"post_id":673289,"comment_id":998330,"body_markdown":"Remember, remember, The Python&#39;s GIL.","body":"Remember, remember, The Python&#39;s GIL."},{"owner":{"account_id":56977,"reputation":9065,"user_id":170656,"accept_rate":50,"display_name":"Caleb Hattingh"},"score":5,"creation_date":1257511115,"post_id":673289,"comment_id":1561903,"body_markdown":"For real scale, you need to go to multiple physical machines anyway.  For this, there is no option but to use multiple processes.  Therefore, just use multiple processes for single machines too, and you will already have a system that can scale even bigger than that single machine if needed, and the host OS will run your subprocesses on all the cores.  The GIL is just not that big a deal once multiprocessing is considered at the outset.","body":"For real scale, you need to go to multiple physical machines anyway.  For this, there is no option but to use multiple processes.  Therefore, just use multiple processes for single machines too, and you will already have a system that can scale even bigger than that single machine if needed, and the host OS will run your subprocesses on all the cores.  The GIL is just not that big a deal once multiprocessing is considered at the outset."}],"tags":[],"owner":{"account_id":21100,"reputation":37467,"user_id":51025,"accept_rate":94,"display_name":"DNS"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1237813446,"creation_date":1237813446,"answer_id":673289,"question_id":672857,"body_markdown":"I would argue that the ease and simplicity of writing Python code makes it possible to write more complex code; for example, code that takes advantage of multi-core processors.  Since per-core performance has been mostly stagnant for the past 5-10 years, I don&#39;t think it&#39;s clear that Python programs (whether they&#39;re running on CPython or something else) are slower in the long run.","title":"Is Python slower than Java/C#?","body":"<p>I would argue that the ease and simplicity of writing Python code makes it possible to write more complex code; for example, code that takes advantage of multi-core processors.  Since per-core performance has been mostly stagnant for the past 5-10 years, I don't think it's clear that Python programs (whether they're running on CPython or something else) are slower in the long run.</p>\n"},{"tags":[],"owner":{"account_id":14956,"reputation":30470,"user_id":31141,"accept_rate":79,"display_name":"Marko"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1443651027,"creation_date":1237815040,"answer_id":673369,"question_id":672857,"body_markdown":"It doesn&#39;t have anything to do with the languages themselves, it&#39;s just the fact that java **implementation** and **runtime system** (JVM) are very high quality, and that lots of resources have been invested in stability, scalability and performance improvements over the years.\r\n\r\nContrast that to the fact that CPython implementation just recently implemented eg threaded dispatch in its interpreter which gave it performance boost of up to 20% for certain problems. It&#39;s not a good thing as it sounds, it is bad because that kind of basic optimization should be there from the day one.","title":"Is Python slower than Java/C#?","body":"<p>It doesn't have anything to do with the languages themselves, it's just the fact that java <strong>implementation</strong> and <strong>runtime system</strong> (JVM) are very high quality, and that lots of resources have been invested in stability, scalability and performance improvements over the years.</p>\n\n<p>Contrast that to the fact that CPython implementation just recently implemented eg threaded dispatch in its interpreter which gave it performance boost of up to 20% for certain problems. It's not a good thing as it sounds, it is bad because that kind of basic optimization should be there from the day one.</p>\n"},{"tags":[],"owner":{"account_id":1603,"reputation":193473,"user_id":2147,"accept_rate":85,"display_name":"Jason Baker"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1240781820,"creation_date":1237816380,"answer_id":673441,"question_id":672857,"body_markdown":"I think it&#39;s ultimately that Python doesn&#39;t go as far as it can with optimizations.  Most of the optimization techniques that are common are for static languages.  There *are* optimization techniques for dynamic languages, but the modern ones don&#39;t seem to make as much use of them as they could.  Steve Yegge has an excellent [blog post on the subject][1].\r\n\r\n**EDIT**:  I just wanted to point out that I&#39;m not necessarily stating this to be critical of Python.  I prefer simplicity over unnecessary speed any day. \r\n\r\n\r\n  [1]: http://steve-yegge.blogspot.com/2008/05/dynamic-languages-strike-back.html","title":"Is Python slower than Java/C#?","body":"<p>I think it's ultimately that Python doesn't go as far as it can with optimizations.  Most of the optimization techniques that are common are for static languages.  There <em>are</em> optimization techniques for dynamic languages, but the modern ones don't seem to make as much use of them as they could.  Steve Yegge has an excellent <a href=\"http://steve-yegge.blogspot.com/2008/05/dynamic-languages-strike-back.html\" rel=\"nofollow noreferrer\">blog post on the subject</a>.</p>\n\n<p><strong>EDIT</strong>:  I just wanted to point out that I'm not necessarily stating this to be critical of Python.  I prefer simplicity over unnecessary speed any day. </p>\n"},{"tags":[],"owner":{"account_id":876508,"reputation":1299,"user_id":95520,"display_name":"Saleh Al-Zaid"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1240764902,"creation_date":1240764902,"answer_id":791183,"question_id":672857,"body_markdown":"Since it&#39;s interpreted and not compiled.. it should be slower in execution time. \r\n\r\nAs a table mentioned in *Code Complete (second edition)* book, page 600, \r\n\r\nC# equals C++ in *execution time* (1:1). And Python is slower above hundred times than C++ in *execution time* (&gt;100:1).\r\n\r\nAnd Java is slower than C++ by one time and a half (1.5:1). \r\n\r\nThese statistics are on average. I don&#39;t know who made this study, but seems interesting.   ","title":"Is Python slower than Java/C#?","body":"<p>Since it's interpreted and not compiled.. it should be slower in execution time. </p>\n\n<p>As a table mentioned in <em>Code Complete (second edition)</em> book, page 600, </p>\n\n<p>C# equals C++ in <em>execution time</em> (1:1). And Python is slower above hundred times than C++ in <em>execution time</em> (>100:1).</p>\n\n<p>And Java is slower than C++ by one time and a half (1.5:1). </p>\n\n<p>These statistics are on average. I don't know who made this study, but seems interesting.   </p>\n"},{"comments":[{"owner":{"account_id":1573219,"reputation":5790,"user_id":1460422,"accept_rate":85,"display_name":"starbeamrainbowlabs"},"score":0,"creation_date":1490276792,"post_id":1165085,"comment_id":73047667,"body_markdown":"That link appears to be dead :-(","body":"That link appears to be dead :-("}],"tags":[],"owner":{"account_id":19562,"reputation":30712,"user_id":45935,"accept_rate":100,"display_name":"Jim Ferrans"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1248267481,"creation_date":1248267481,"answer_id":1165085,"question_id":672857,"body_markdown":"This type of question can&#39;t be answered just by qualitative reasoning, you need good benchmarks to back it up.  Here&#39;s one set that compare [Python 3 vs C# Mono][1] and find Python to be 3 to 300 times slower.  The Python vs. Java results are similar.  (The usual cautions about interpreting benchmarks apply.)\r\n\r\nThese benchmarks also report the source code size, and Python was significantly more concise than Java and C#.\r\n\r\n  [1]: http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python3&amp;lang2=csharp&amp;box=1","title":"Is Python slower than Java/C#?","body":"<p>This type of question can't be answered just by qualitative reasoning, you need good benchmarks to back it up.  Here's one set that compare <a href=\"http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python3&amp;lang2=csharp&amp;box=1\" rel=\"nofollow noreferrer\">Python 3 vs C# Mono</a> and find Python to be 3 to 300 times slower.  The Python vs. Java results are similar.  (The usual cautions about interpreting benchmarks apply.)</p>\n\n<p>These benchmarks also report the source code size, and Python was significantly more concise than Java and C#.</p>\n"},{"comments":[{"owner":{"account_id":7310,"reputation":8147,"user_id":12652,"accept_rate":100,"display_name":"&#214;zg&#252;r"},"score":1,"creation_date":1264835113,"post_id":1177553,"comment_id":2112309,"body_markdown":"and what about these comparisons? IMHO, They look more persuasive than yours. http://shootout.alioth.debian.org/gp4/benchmark.php?test=all&amp;lang=javaclient&amp;lang2=python and http://shootout.alioth.debian.org/gp4/benchmark.php?test=all&amp;lang=csharp&amp;lang2=python","body":"and what about these comparisons? IMHO, They look more persuasive than yours. <a href=\"http://shootout.alioth.debian.org/gp4/benchmark.php?test=all&amp;lang=javaclient&amp;lang2=python\" rel=\"nofollow noreferrer\">shootout.alioth.debian.org/gp4/&hellip;</a> and <a href=\"http://shootout.alioth.debian.org/gp4/benchmark.php?test=all&amp;lang=csharp&amp;lang2=python\" rel=\"nofollow noreferrer\">shootout.alioth.debian.org/gp4/&hellip;</a>"},{"owner":{"account_id":24855,"reputation":2557,"user_id":63471,"display_name":"igouy"},"score":2,"creation_date":1276613938,"post_id":1177553,"comment_id":3117434,"body_markdown":"@Comptrol Those are out-of-date look here - http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python&amp;lang2=java and here http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python&amp;lang2=csharp","body":"@Comptrol Those are out-of-date look here - <a href=\"http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python&amp;lang2=java\" rel=\"nofollow noreferrer\">shootout.alioth.debian.org/u32q/&hellip;</a> and here <a href=\"http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python&amp;lang2=csharp\" rel=\"nofollow noreferrer\">shootout.alioth.debian.org/u32q/&hellip;</a>"},{"owner":{"account_id":24855,"reputation":2557,"user_id":63471,"display_name":"igouy"},"score":1,"creation_date":1276614065,"post_id":1177553,"comment_id":3117458,"body_markdown":"think about why those very clever Haskell implementors called their benchmark suite NoFib http://www.dcs.gla.ac.uk/fp/software/ghc/nofib.html","body":"think about why those very clever Haskell implementors called their benchmark suite NoFib <a href=\"http://www.dcs.gla.ac.uk/fp/software/ghc/nofib.html\" rel=\"nofollow noreferrer\">dcs.gla.ac.uk/fp/software/ghc/nofib.html</a>"},{"owner":{"account_id":88805,"reputation":1106,"user_id":1349245,"display_name":"a.boussema"},"score":0,"creation_date":1400765089,"post_id":1177553,"comment_id":36623176,"body_markdown":"thanks for sharing these results, was helpful","body":"thanks for sharing these results, was helpful"},{"owner":{"account_id":285361,"reputation":19630,"user_id":1004875,"accept_rate":74,"display_name":"not 0x12"},"score":0,"creation_date":1464929832,"post_id":1177553,"comment_id":62696496,"body_markdown":"@wierob  343 ms    137 ms    91 ms  1.200 ms    169 ms are these values decimals ? 0.343 0.137?","body":"@wierob  343 ms    137 ms    91 ms  1.200 ms    169 ms are these values decimals ? 0.343 0.137?"},{"owner":{"account_id":46149,"reputation":4299,"user_id":136264,"accept_rate":62,"display_name":"wierob"},"score":0,"creation_date":1478463887,"post_id":1177553,"comment_id":68153621,"body_markdown":"@Kalanamith No 1.200ms =&gt; 1200ms. Unfortunately, I no longer have the source of the chart to fix this.","body":"@Kalanamith No 1.200ms =&gt; 1200ms. Unfortunately, I no longer have the source of the chart to fix this."},{"owner":{"account_id":353748,"reputation":7237,"user_id":691639,"accept_rate":81,"display_name":"Eliezer"},"score":0,"creation_date":1529377555,"post_id":1177553,"comment_id":88839786,"body_markdown":"If I had to guess, I&#39;d say the jvm example wasn&#39;t benchmarked correctly, unless you&#39;re saying there&#39;s a special case to calculating 10! in Java...","body":"If I had to guess, I&#39;d say the jvm example wasn&#39;t benchmarked correctly, unless you&#39;re saying there&#39;s a special case to calculating 10! in Java..."}],"tags":[],"owner":{"account_id":46149,"reputation":4299,"user_id":136264,"accept_rate":62,"display_name":"wierob"},"comment_count":7,"down_vote_count":5,"up_vote_count":44,"is_accepted":false,"score":39,"last_activity_date":1675218484,"creation_date":1248441191,"answer_id":1177553,"question_id":672857,"body_markdown":"As mentioned in the other answers this depends on the run-time system as well as the task at hand. So the standard (C)Python is not necessarily slower than Java or C#. Some of its modules are implemented in C. Thus combining speed of a *native* implementation with Python&#39;s language.\r\n\r\nWe did a small experiment: We compared the execution time of a Factorial computation in different languages. The test was actually intended to evaluate the performance of arbitrary-precision integers implementations.\r\n&lt;pre&gt;\r\ntestee. language arbitrary-precision integers run-time\r\n\r\n     1. Java     java.math.BigInteger         JRE 6.13\r\n     2. .NET     System.Numerics.BigInteger   MS CLR 4.0\r\n     3. Python   long                         Active Python 2.6.2.2\r\n     4. Squeak   BigInt                       Squeak 3.10.2\r\n     5. .NET     Mono.Math.BigInteger         MS CLR 4.0\r\n\r\nresults:\r\n\r\n                 1)         2)       3)       4)        5)\r\n   10.000!      343 ms    137 ms    91 ms  1.200 ms    169 ms\r\n   20.000!    1.480 ms    569 ms   372 ms  1.457 ms    701 ms\r\n   30.000!    3.424 ms  1.243 ms   836 ms  3.360 ms  1.675 ms\r\n   40.000!    6.340 ms  2.101 ms 1.975 ms  6.738 ms  3.042 ms\r\n   50.000!   10.493 ms  3.763 ms 3.658 ms 10.019 ms  5.242 ms\r\n   60.000!   15.586 ms  7.683 ms 5.788 ms 14.241 ms 10.000 ms\r\n&lt;/pre&gt;\r\n[![alt text][1]][1]  \n&lt;sub&gt;(source: [mycsharp.de](http://www.mycsharp.de/wbb2/attachment.php?attachmentid=6909&amp;sid=0d5aa62b522d005d9e7089785b5d19f1))&lt;/sub&gt;  \n\r\n\r\nThe bar chart shows the results. Python is the clear winner. As far as I know Python uses the [Karatsuba-algorithm][2] to multiply large integers, which explains the speed.\r\n\r\nBesides, Python&#39;s &quot;arbitrary-precision integers&quot;-type is the built-in `long`. Hence you don&#39;t even need special type handling which is required for Java&#39;s BigInteger-class.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tiM4L.gif\r\n  [2]: https://en.wikipedia.org/wiki/Karatsuba_algorithm","title":"Is Python slower than Java/C#?","body":"<p>As mentioned in the other answers this depends on the run-time system as well as the task at hand. So the standard (C)Python is not necessarily slower than Java or C#. Some of its modules are implemented in C. Thus combining speed of a <em>native</em> implementation with Python's language.</p>\n<p>We did a small experiment: We compared the execution time of a Factorial computation in different languages. The test was actually intended to evaluate the performance of arbitrary-precision integers implementations.</p>\n<pre>\ntestee. language arbitrary-precision integers run-time\n\n     1. Java     java.math.BigInteger         JRE 6.13\n     2. .NET     System.Numerics.BigInteger   MS CLR 4.0\n     3. Python   long                         Active Python 2.6.2.2\n     4. Squeak   BigInt                       Squeak 3.10.2\n     5. .NET     Mono.Math.BigInteger         MS CLR 4.0\n\nresults:\n\n                 1)         2)       3)       4)        5)\n   10.000!      343 ms    137 ms    91 ms  1.200 ms    169 ms\n   20.000!    1.480 ms    569 ms   372 ms  1.457 ms    701 ms\n   30.000!    3.424 ms  1.243 ms   836 ms  3.360 ms  1.675 ms\n   40.000!    6.340 ms  2.101 ms 1.975 ms  6.738 ms  3.042 ms\n   50.000!   10.493 ms  3.763 ms 3.658 ms 10.019 ms  5.242 ms\n   60.000!   15.586 ms  7.683 ms 5.788 ms 14.241 ms 10.000 ms\n</pre>\n<p><a href=\"https://i.stack.imgur.com/tiM4L.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tiM4L.gif\" alt=\"alt text\" /></a><br />\n<sub>(source: <a href=\"http://www.mycsharp.de/wbb2/attachment.php?attachmentid=6909&amp;sid=0d5aa62b522d005d9e7089785b5d19f1\" rel=\"nofollow noreferrer\">mycsharp.de</a>)</sub></p>\n<p>The bar chart shows the results. Python is the clear winner. As far as I know Python uses the <a href=\"https://en.wikipedia.org/wiki/Karatsuba_algorithm\" rel=\"nofollow noreferrer\">Karatsuba-algorithm</a> to multiply large integers, which explains the speed.</p>\n<p>Besides, Python's &quot;arbitrary-precision integers&quot;-type is the built-in <code>long</code>. Hence you don't even need special type handling which is required for Java's BigInteger-class.</p>\n"},{"comments":[{"owner":{"account_id":1286181,"reputation":14890,"user_id":1239189,"accept_rate":69,"display_name":"Ali Gajani"},"score":14,"creation_date":1417180383,"post_id":17791079,"comment_id":42864968,"body_markdown":"Developer time is more valuable.","body":"Developer time is more valuable."},{"owner":{"account_id":4826011,"reputation":662,"user_id":3895469,"accept_rate":81,"display_name":"oddRaven"},"score":0,"creation_date":1482790073,"post_id":17791079,"comment_id":69876150,"body_markdown":"Could you give a summary of what some of these architecture issues are?","body":"Could you give a summary of what some of these architecture issues are?"},{"owner":{"account_id":1343324,"reputation":1382,"user_id":1284552,"accept_rate":100,"display_name":"Ravi Kumar"},"score":2,"creation_date":1484748632,"post_id":17791079,"comment_id":70637665,"body_markdown":"Obvious fews - GIL and single CPU restriction. For experiment, create realtime messaging server on Websocket (JSON payload) using Tornado, and try benchmarking how much message over how many connections it can handle. Write same stuff in Golang, and get ~xNumCPU performance. Scaling from single process to multi processe (in tornado python) will take a huge step in development, but that is far better when done in Golang or even Java (apart from noisy java library issues). What I am telling here is not theory, but what we faced in practical.","body":"Obvious fews - GIL and single CPU restriction. For experiment, create realtime messaging server on Websocket (JSON payload) using Tornado, and try benchmarking how much message over how many connections it can handle. Write same stuff in Golang, and get ~xNumCPU performance. Scaling from single process to multi processe (in tornado python) will take a huge step in development, but that is far better when done in Golang or even Java (apart from noisy java library issues). What I am telling here is not theory, but what we faced in practical."}],"tags":[],"owner":{"account_id":1343324,"reputation":1382,"user_id":1284552,"accept_rate":100,"display_name":"Ravi Kumar"},"comment_count":3,"down_vote_count":3,"up_vote_count":34,"is_accepted":false,"score":31,"last_activity_date":1374505727,"creation_date":1374505727,"answer_id":17791079,"question_id":672857,"body_markdown":"Simply - **Python is slow**. \r\n\r\nNo matter what interpreter (currently available) you use, it is slower than Java and C. In various benchmarks, its slower than Ruby and PHP.\r\nDo not depend on other&#39;s answers, check and verify yourself.\r\n\r\n [http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q][1] \r\n\r\nPersonally I do not think, there is much serious contribution and development done on getting python faster. Since the productivity is good in python and it solves some of problem straight forward, speed/performance is not taken seriously. There are some architecture issues too preventing Python getting performance tweaks.\r\n\r\n**Disclaimer** - This answer probably will hurt Python lovers. I too am Python developer, loves developing webapps in Django/Flask/Pyramid rather than Spring (Java). But I see practically in my work and experience, how Python is slower. The speed is not always my priority. But I do stand with them, who says Python Interpreter should get oiling and greasing or total engine change to at least stand in marathon. It&#39;s a mainstream programming language.\r\n\r\n\r\n  [1]: http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q","title":"Is Python slower than Java/C#?","body":"<p>Simply - <strong>Python is slow</strong>. </p>\n\n<p>No matter what interpreter (currently available) you use, it is slower than Java and C. In various benchmarks, its slower than Ruby and PHP.\nDo not depend on other's answers, check and verify yourself.</p>\n\n<p><a href=\"http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q\">http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q</a> </p>\n\n<p>Personally I do not think, there is much serious contribution and development done on getting python faster. Since the productivity is good in python and it solves some of problem straight forward, speed/performance is not taken seriously. There are some architecture issues too preventing Python getting performance tweaks.</p>\n\n<p><strong>Disclaimer</strong> - This answer probably will hurt Python lovers. I too am Python developer, loves developing webapps in Django/Flask/Pyramid rather than Spring (Java). But I see practically in my work and experience, how Python is slower. The speed is not always my priority. But I do stand with them, who says Python Interpreter should get oiling and greasing or total engine change to at least stand in marathon. It's a mainstream programming language.</p>\n"}],"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102387,"favorite_count":0,"down_vote_count":4,"up_vote_count":79,"closed_date":1374519143,"accepted_answer_id":673019,"answer_count":13,"score":75,"last_activity_date":1675218484,"creation_date":1237803973,"question_id":672857,"body_markdown":"Is Python slower than Java/C#?\r\n\r\n[performance-comparison-c-java-python-ruby-jython-jruby-groovy][1]\r\n\r\nHere is a project that optimizes CPython: [unladen-swallow][2] \r\n\r\n\r\n  [1]: http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\r\n  [2]: http://code.google.com/p/unladen-swallow/","title":"Is Python slower than Java/C#?","body":"<p>Is Python slower than Java/C#?</p>\n\n<p><a href=\"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\" rel=\"noreferrer\">performance-comparison-c-java-python-ruby-jython-jruby-groovy</a></p>\n\n<p>Here is a project that optimizes CPython: <a href=\"http://code.google.com/p/unladen-swallow/\" rel=\"noreferrer\">unladen-swallow</a> </p>\n"},{"tags":["java","date","datetime","parsing","datetime-format"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1675159601,"post_id":75295483,"comment_id":132863779,"body_markdown":"Have you tried to run it?","body":"Have you tried to run it?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1675159605,"post_id":75295483,"comment_id":132863782,"body_markdown":"That is a `LocalDate`, not a `ZonedDateTime`. There is neither a zone nor a time in that string.","body":"That is a <code>LocalDate</code>, not a <code>ZonedDateTime</code>. There is neither a zone nor a time in that string."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1675161099,"post_id":75295483,"comment_id":132864245,"body_markdown":"What is the resulting type/value in Go and what do you expect/want it to be in Java? Looks like @Sweeper is right, the result might just be a *date* without *time (of day)*, offset or zone.","body":"What is the resulting type/value in Go and what do you expect/want it to be in Java? Looks like @Sweeper is right, the result might just be a <i>date</i> without <i>time (of day)</i>, offset or zone."}],"answers":[{"comments":[{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1675164090,"post_id":75296009,"comment_id":132865149,"body_markdown":"To avoid problems, you should use `date.atStartOfDay(ZoneOffset.UTC).toInstant(ZoneOffset.UTC)`.","body":"To avoid problems, you should use <code>date.atStartOfDay(ZoneOffset.UTC).toInstant(ZoneOffset.UTC)</code>."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1675166357,"post_id":75296009,"comment_id":132865877,"body_markdown":"@ArvindKumarAvinash What problems could there be? The start of day is calculated with `LocalDate`, which is very well behaved, and not using any time zones, where the start of day could be non-00:00:00.","body":"@ArvindKumarAvinash What problems could there be? The start of day is calculated with <code>LocalDate</code>, which is very well behaved, and not using any time zones, where the start of day could be non-00:00:00."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1675171093,"post_id":75296009,"comment_id":132867460,"body_markdown":"This is a great answer. The only thing I was concerned about was that `LocalDate#atStartOfDay()` uses the system&#39;s time and theoretically, it may not be always `00:00`. Thanks for updating it in your answer.","body":"This is a great answer. The only thing I was concerned about was that <code>LocalDate#atStartOfDay()</code> uses the system&#39;s time and theoretically, it may not be always <code>00:00</code>. Thanks for updating it in your answer."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1675215184,"post_id":75296009,"comment_id":132879579,"body_markdown":"@OleV.V. Thanks. I usually only use those built-in ones for formatting, because I never made an effort to remember what the exact formats of those look like. Totally didn&#39;t know there was a built-in one for this format.","body":"@OleV.V. Thanks. I usually only use those built-in ones for formatting, because I never made an effort to remember what the exact formats of those look like. Totally didn&#39;t know there was a built-in one for this format."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1675214971,"creation_date":1675162126,"answer_id":75296009,"question_id":75295483,"body_markdown":"A quick look at the [Go documentation][1] reveals that:\r\n\r\n&gt; A `Time` represents an instant in time with nanosecond precision.\r\n\r\nWhich is similar to Java&#39;s `Instant` type.\r\n\r\nAlso, from the docs of [`Parse`][2],\r\n\r\n&gt; Elements omitted from the layout are assumed to be zero or, when zero is impossible, one, so parsing &quot;3:04pm&quot; returns the time corresponding to Jan 1, year 0, 15:04:00 UTC (note that because the year is 0, this time is before the zero Time).\r\n&gt;\r\n&gt; [...]\r\n&gt;\r\n&gt; In the absence of a time zone indicator, Parse returns a time in UTC.\r\n\r\nKnowing this, we can first create a `LocalDate` from your string that does not contain any zone or time information, then &quot;assume&quot; (as the Go documentation calls it) that it is at the start of day, and at the UTC zone, in order to convert it to an `Instant`:\r\n\r\n```\r\nvar date = LocalDate.parse(someString, DateTimeFormatter.BASIC_ISO_DATE);\r\nvar instant = date.atStartOfDay(ZoneOffset.UTC).toInstant();\r\n```\r\n\r\n\r\n  [1]: https://pkg.go.dev/time#Time\r\n  [2]: https://pkg.go.dev/time#Parse","title":"Java analog of time.Parse from GoLang","body":"<p>A quick look at the <a href=\"https://pkg.go.dev/time#Time\" rel=\"nofollow noreferrer\">Go documentation</a> reveals that:</p>\n<blockquote>\n<p>A <code>Time</code> represents an instant in time with nanosecond precision.</p>\n</blockquote>\n<p>Which is similar to Java's <code>Instant</code> type.</p>\n<p>Also, from the docs of <a href=\"https://pkg.go.dev/time#Parse\" rel=\"nofollow noreferrer\"><code>Parse</code></a>,</p>\n<blockquote>\n<p>Elements omitted from the layout are assumed to be zero or, when zero is impossible, one, so parsing &quot;3:04pm&quot; returns the time corresponding to Jan 1, year 0, 15:04:00 UTC (note that because the year is 0, this time is before the zero Time).</p>\n<p>[...]</p>\n<p>In the absence of a time zone indicator, Parse returns a time in UTC.</p>\n</blockquote>\n<p>Knowing this, we can first create a <code>LocalDate</code> from your string that does not contain any zone or time information, then &quot;assume&quot; (as the Go documentation calls it) that it is at the start of day, and at the UTC zone, in order to convert it to an <code>Instant</code>:</p>\n<pre><code>var date = LocalDate.parse(someString, DateTimeFormatter.BASIC_ISO_DATE);\nvar instant = date.atStartOfDay(ZoneOffset.UTC).toInstant();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1675163946,"post_id":75296045,"comment_id":132865102,"body_markdown":"I have couple of questions.\n1. Why do you use &quot;uuuu-MM-dd HH:mm:ss Z VV&quot; ?\n2. String pattern = &quot;uuuuMMdd&quot;;  is it typo ? I am about uuuu","body":"I have couple of questions. 1. Why do you use &quot;uuuu-MM-dd HH:mm:ss Z VV&quot; ? 2. String pattern = &quot;uuuuMMdd&quot;;  is it typo ? I am about uuuu"},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1675164174,"post_id":75296045,"comment_id":132865176,"body_markdown":"@gstackoverflow - `u` is correct. Check https://stackoverflow.com/a/65928023/10819573 to learn more about it. Probably he has used `uuuu-MM-dd HH:mm:ss Z VV` to show you formatted output.","body":"@gstackoverflow - <code>u</code> is correct. Check <a href=\"https://stackoverflow.com/a/65928023/10819573\">stackoverflow.com/a/65928023/10819573</a> to learn more about it. Probably he has used <code>uuuu-MM-dd HH:mm:ss Z VV</code> to show you formatted output."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1675166874,"post_id":75296045,"comment_id":132866049,"body_markdown":"@ArvindKumarAvinash though the golang `Time` type doesnt support negative years :)","body":"@ArvindKumarAvinash though the golang <code>Time</code> type doesnt support negative years :)"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1675167751,"post_id":75296045,"comment_id":132866290,"body_markdown":"@gstackoverflow A `DateTimeFormatter` can be used for parsing `String`s as well as formatting date-time types as `String`. The longer pattern is the one responsible for the output, the shorter one parses your date `String`. [`u` is year, `y` is year of era](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html). Depending on your needs, `y` may be more appropriate to use, that&#39;s a thing you have to find out yourself.","body":"@gstackoverflow A <code>DateTimeFormatter</code> can be used for parsing <code>String</code>s as well as formatting date-time types as <code>String</code>. The longer pattern is the one responsible for the output, the shorter one parses your date <code>String</code>. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\"><code>u</code> is year, <code>y</code> is year of era</a>. Depending on your needs, <code>y</code> may be more appropriate to use, that&#39;s a thing you have to find out yourself."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1675170818,"post_id":75296045,"comment_id":132867360,"body_markdown":"@Sweeper - &quot;... golang Time type doesnt support negative years ...&quot; - Note that the OP is migrating his code to Java and that&#39;s why `u` becomes so important in this code. His existing data may not have a negative year but his Java application may get date-time with a negative year.","body":"@Sweeper - &quot;... golang Time type doesnt support negative years ...&quot; - Note that the OP is migrating his code to Java and that&#39;s why <code>u</code> becomes so important in this code. His existing data may not have a negative year but his Java application may get date-time with a negative year."}],"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675178590,"creation_date":1675162289,"answer_id":75296045,"question_id":75295483,"body_markdown":"Since the result of the line of Go you provided includes an offset, a zone and the time of day, you will have to explicitly attach those and use a specific formatter in Java:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// example input\r\n\tString date = &quot;20060102&quot;;\r\n\t// parse the date first, using a built-in formatter\r\n\tLocalDate localDate = LocalDate.parse(date, DateTimeFormatter.BASIC_ISO_DATE);\r\n\t// then add the minimum time of day and the desired zone id\r\n\tZonedDateTime zdt = ZonedDateTime.of(localDate, LocalTime.MIN, ZoneId.of(&quot;UTC&quot;));\r\n\t// the formatter\r\n\tDateTimeFormatter dtfOut = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss Z VV&quot;, Locale.ENGLISH);\r\n\t// the result of the Go statement\r\n\tString expected = &quot;2006-01-02 00:00:00 +0000 UTC&quot;;\r\n\t// print the result\r\n\tSystem.out.println(&quot;Expected: &quot; + expected);\r\n\tSystem.out.println(&quot;Actual:   &quot; + zdt.format(dtfOut));\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\nExpected: 2006-01-02 00:00:00 +0000 UTC\r\nActual:   2006-01-02 00:00:00 +0000 UTC\r\n```\r\n\r\n---\r\nPosts about `y` and `u` (actually accepted answers to the questions)\r\n- [`uuuu` versus `yyyy` in `DateTimeFormatter` formatting pattern codes in Java](https://stackoverflow.com/a/41182911/1712135)\r\n- [What is the difference between year and year-of-era?](https://stackoverflow.com/a/29014580/1712135)","title":"Java analog of time.Parse from GoLang","body":"<p>Since the result of the line of Go you provided includes an offset, a zone and the time of day, you will have to explicitly attach those and use a specific formatter in Java:</p>\n<pre><code>public static void main(String[] args) {\n    // example input\n    String date = &quot;20060102&quot;;\n    // parse the date first, using a built-in formatter\n    LocalDate localDate = LocalDate.parse(date, DateTimeFormatter.BASIC_ISO_DATE);\n    // then add the minimum time of day and the desired zone id\n    ZonedDateTime zdt = ZonedDateTime.of(localDate, LocalTime.MIN, ZoneId.of(&quot;UTC&quot;));\n    // the formatter\n    DateTimeFormatter dtfOut = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss Z VV&quot;, Locale.ENGLISH);\n    // the result of the Go statement\n    String expected = &quot;2006-01-02 00:00:00 +0000 UTC&quot;;\n    // print the result\n    System.out.println(&quot;Expected: &quot; + expected);\n    System.out.println(&quot;Actual:   &quot; + zdt.format(dtfOut));\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Expected: 2006-01-02 00:00:00 +0000 UTC\nActual:   2006-01-02 00:00:00 +0000 UTC\n</code></pre>\n<hr />\n<p>Posts about <code>y</code> and <code>u</code> (actually accepted answers to the questions)</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/41182911/1712135\"><code>uuuu</code> versus <code>yyyy</code> in <code>DateTimeFormatter</code> formatting pattern codes in Java</a></li>\n<li><a href=\"https://stackoverflow.com/a/29014580/1712135\">What is the difference between year and year-of-era?</a></li>\n</ul>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75296009,"answer_count":2,"score":-1,"last_activity_date":1675214971,"creation_date":1675159483,"question_id":75295483,"body_markdown":"I am rewriting piece of GO code to java and I have doubths about the following snippet.\r\n\r\nGo code:\r\n\r\n    time.Parse(&quot;20060102&quot;, someString);\r\n\r\nIs it analog of ?\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.parse(credElements[0], DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;)\r\n\r\n","title":"Java analog of time.Parse from GoLang","body":"<p>I am rewriting piece of GO code to java and I have doubths about the following snippet.</p>\n<p>Go code:</p>\n<pre><code>time.Parse(&quot;20060102&quot;, someString);\n</code></pre>\n<p>Is it analog of ?</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.parse(credElements[0], DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;)\n</code></pre>\n"},{"tags":["java","hashmap","multimap"],"comments":[{"owner":{"account_id":11391822,"reputation":148,"user_id":8351575,"display_name":"svrdoljak"},"score":0,"creation_date":1675208489,"post_id":75304247,"comment_id":132878604,"body_markdown":"Stream trough each map and collect the doubles and calculate the average.","body":"Stream trough each map and collect the doubles and calculate the average."},{"owner":{"account_id":11342805,"reputation":929,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675208911,"post_id":75304247,"comment_id":132878693,"body_markdown":"How and where to link the key after calculating the average?","body":"How and where to link the key after calculating the average?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675209258,"post_id":75304247,"comment_id":132878748,"body_markdown":"The key would have nothing to do with the average would it?","body":"The key would have nothing to do with the average would it?"},{"owner":{"account_id":11342805,"reputation":929,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675209314,"post_id":75304247,"comment_id":132878758,"body_markdown":"@g00se Well, this is why I am using HashMap, I need to find the Key and then decide which Key in the collection of HashMap has a lower average.","body":"@g00se Well, this is why I am using HashMap, I need to find the Key and then decide which Key in the collection of HashMap has a lower average."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1675209486,"post_id":75304247,"comment_id":132878789,"body_markdown":"What do you mean by &quot;key in the collection of HashMap&quot;?  What kind of collection is it?  Do you actually have a HashMap of HashMaps, or something like that?","body":"What do you mean by &quot;key in the collection of HashMap&quot;?  What kind of collection is it?  Do you actually have a HashMap of HashMaps, or something like that?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675209654,"post_id":75304247,"comment_id":132878805,"body_markdown":"So the average in your particular case is 1.75. How does the key fit in with that value?","body":"So the average in your particular case is 1.75. How does the key fit in with that value?"},{"owner":{"account_id":11342805,"reputation":929,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675209939,"post_id":75304247,"comment_id":132878838,"body_markdown":"No, I want to calculate the average on each Key, for example, A1 average is (2.0+3.0)/2= 2.5, A2 average is (1.0,1.0)/2=1. \nAfter that method will return A2 in response because it has a lower average.","body":"No, I want to calculate the average on each Key, for example, A1 average is (2.0+3.0)/2= 2.5, A2 average is (1.0,1.0)/2=1.  After that method will return A2 in response because it has a lower average."},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675210082,"post_id":75304247,"comment_id":132878857,"body_markdown":"If you have one HashMap as shown, then you **don&#39;t have** two instances of the A1 (or A2) key.   Problem solved!","body":"If you have one HashMap as shown, then you <b>don&#39;t have</b> two instances of the A1 (or A2) key.   Problem solved!"},{"owner":{"account_id":11342805,"reputation":929,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675210166,"post_id":75304247,"comment_id":132878878,"body_markdown":"@undefinedsymbol Well, this is by design as I mentioned in my question that I am also using MultiMap.","body":"@undefinedsymbol Well, this is by design as I mentioned in my question that I am also using MultiMap."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675210245,"post_id":75304247,"comment_id":132878891,"body_markdown":"So it looks like you&#39;ve separated out the multimap into separate maps. If that&#39;s the case, why are you not calculating the average directly on the multimap? That would seem to make more sense","body":"So it looks like you&#39;ve separated out the multimap into separate maps. If that&#39;s the case, why are you not calculating the average directly on the multimap? That would seem to make more sense"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675210684,"creation_date":1675210684,"answer_id":75304454,"question_id":75304247,"body_markdown":"Assuming your collection of maps is something similar to this:\r\n\r\n    List&lt;Map&lt;String, Double&gt;&gt; mapList = List.of(\r\n            Map.of(&quot;A1&quot;, 2.0),\r\n            Map.of(&quot;A2&quot;, 1.0),\r\n            Map.of(&quot;A1&quot;, 3.0),\r\n            Map.of(&quot;A2&quot;, 1.0));\r\n\r\nYou can just stream over the list (collection), stream over the entries of each map flatmaping to a stream of entries, collect to a new map grouping by key and averaging value, stream over the resulting map and find the min using a comparator by value:\r\n\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.stream.Collectors;\r\n\r\n    ....\r\n\r\n\r\n\r\n    Entry&lt;String, Double&gt; entryWithMinAvg =\r\n            mapList.stream()\r\n                   .flatMap(m -&gt; m.entrySet().stream())\r\n                   .collect(Collectors.groupingBy(Entry::getKey, Collectors.averagingDouble(Entry::getValue)))\r\n                   .entrySet()\r\n                   .stream()\r\n                   .min(Entry.comparingByValue())\r\n                   .get();\r\n\r\n    System.out.println(entryWithMinAvg);","title":"How to calculate average from Collection of HashMap&lt;String, Double&gt;","body":"<p>Assuming your collection of maps is something similar to this:</p>\n<pre><code>List&lt;Map&lt;String, Double&gt;&gt; mapList = List.of(\n        Map.of(&quot;A1&quot;, 2.0),\n        Map.of(&quot;A2&quot;, 1.0),\n        Map.of(&quot;A1&quot;, 3.0),\n        Map.of(&quot;A2&quot;, 1.0));\n</code></pre>\n<p>You can just stream over the list (collection), stream over the entries of each map flatmaping to a stream of entries, collect to a new map grouping by key and averaging value, stream over the resulting map and find the min using a comparator by value:</p>\n<pre><code>import java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.stream.Collectors;\n\n....\n\n\n\nEntry&lt;String, Double&gt; entryWithMinAvg =\n        mapList.stream()\n               .flatMap(m -&gt; m.entrySet().stream())\n               .collect(Collectors.groupingBy(Entry::getKey, Collectors.averagingDouble(Entry::getValue)))\n               .entrySet()\n               .stream()\n               .min(Entry.comparingByValue())\n               .get();\n\nSystem.out.println(entryWithMinAvg);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675214649,"creation_date":1675214649,"answer_id":75304774,"question_id":75304247,"body_markdown":"The most straightforward multi-map implementation using standard Java collections is a `Map&lt;K,List&lt;V&gt;&gt;` - i.e. a map from each key to a list of values for that key. It is relatively trivial to add to it using \r\n\r\n    Map&lt;String,List&lt;Double&gt;&gt; multimap;\r\n    multimap.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\r\n\r\nFinding the key with the minimum average is also trivial using a comparator to compare the averages:\r\n\r\n    Comparator&lt;String&gt; compareAverageKeys = Comparator.comparingDouble(\r\n        k -&gt; multimap.get(k).stream().mapToDouble(v -&gt; v).average().get());\r\n    multimap.keys().stream().min(compareAverageKeys);\r\n\r\nIf your only reason for creating the collection is to find the average then you could just keep the stats rather than the keys:\r\n\r\n    Map&lt;String,DoubleSummaryStatistics&gt; stats;\r\n\r\n    stats.computeIfAbsent(key, k -&gt; new DoubleSummaryStatistics()).add(value);\r\n\r\nThen finding the key with the minimum is much simpler and more efficient:\r\n\r\n    stats.keys().stream().min(Comparator.comparingDouble(k -&gt; stats.get(k).getAverage());","title":"How to calculate average from Collection of HashMap&lt;String, Double&gt;","body":"<p>The most straightforward multi-map implementation using standard Java collections is a <code>Map&lt;K,List&lt;V&gt;&gt;</code> - i.e. a map from each key to a list of values for that key. It is relatively trivial to add to it using</p>\n<pre><code>Map&lt;String,List&lt;Double&gt;&gt; multimap;\nmultimap.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\n</code></pre>\n<p>Finding the key with the minimum average is also trivial using a comparator to compare the averages:</p>\n<pre><code>Comparator&lt;String&gt; compareAverageKeys = Comparator.comparingDouble(\n    k -&gt; multimap.get(k).stream().mapToDouble(v -&gt; v).average().get());\nmultimap.keys().stream().min(compareAverageKeys);\n</code></pre>\n<p>If your only reason for creating the collection is to find the average then you could just keep the stats rather than the keys:</p>\n<pre><code>Map&lt;String,DoubleSummaryStatistics&gt; stats;\n\nstats.computeIfAbsent(key, k -&gt; new DoubleSummaryStatistics()).add(value);\n</code></pre>\n<p>Then finding the key with the minimum is much simpler and more efficient:</p>\n<pre><code>stats.keys().stream().min(Comparator.comparingDouble(k -&gt; stats.get(k).getAverage());\n</code></pre>\n"}],"owner":{"account_id":11342805,"reputation":929,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75304454,"answer_count":2,"score":0,"last_activity_date":1675214649,"creation_date":1675208355,"question_id":75304247,"body_markdown":"I have a Collection of HashMap&lt;String, Duble&gt; which I am getting from multimap. I want to calculate the average on Maps values and calculate which Map key is having minimum average. The data looks like that:\r\n\r\n    HashMap&lt;A1, 2.0&gt;\r\n    HashMap&lt;A2, 1.0&gt;\r\n    HashMap&lt;A1, 3.0&gt;\r\n    HashMap&lt;A2, 1.0&gt;\r\n\r\n\r\nI am not getting the idea. Can someone give me a hint?\r\n\r\n\r\nAdding some more data which show why I am using MultiMap.\r\n\r\n    {Gateway: G1, Device: D1,position:{rssi: 1}},\r\n    {Gateway: G2, Device: D1,position:{rssi: 3}},\r\n    {Gateway: G1, Device: D1,position:{rssi: 2}},\r\n    {Gateway: G2, Device: D1,position:{rssi: 5}},\r\n    {Gateway: G1, Device: D1,position:{rssi: 4}},\r\n    {Gateway: G2, Device: D1,position:{rssi: 6}},\r\n    ..\r\n    {Gateway: G1, Device: D2,position:{rssi: 3}},\r\n    {Gateway: G2, Device: D2,position:{rssi: 2}},\r\n\r\n \r\nActually, this is a series of data coming to my endpoint, I need to calculate Which device is staying more at which Gateway. First I need to add Devices into MultiMap and then Gateway with position into Map.\r\nIn the end I want to calculate the average like that:\r\n\r\n    D1-&gt; G1: {1,2,4} =&gt; 7/3 = 2.3 \r\n    D1-&gt; G2: {3,5,6} =&gt; 14/3 = 4.6\r\n\r\n","title":"How to calculate average from Collection of HashMap&lt;String, Double&gt;","body":"<p>I have a Collection of HashMap&lt;String, Duble&gt; which I am getting from multimap. I want to calculate the average on Maps values and calculate which Map key is having minimum average. The data looks like that:</p>\n<pre><code>HashMap&lt;A1, 2.0&gt;\nHashMap&lt;A2, 1.0&gt;\nHashMap&lt;A1, 3.0&gt;\nHashMap&lt;A2, 1.0&gt;\n</code></pre>\n<p>I am not getting the idea. Can someone give me a hint?</p>\n<p>Adding some more data which show why I am using MultiMap.</p>\n<pre><code>{Gateway: G1, Device: D1,position:{rssi: 1}},\n{Gateway: G2, Device: D1,position:{rssi: 3}},\n{Gateway: G1, Device: D1,position:{rssi: 2}},\n{Gateway: G2, Device: D1,position:{rssi: 5}},\n{Gateway: G1, Device: D1,position:{rssi: 4}},\n{Gateway: G2, Device: D1,position:{rssi: 6}},\n..\n{Gateway: G1, Device: D2,position:{rssi: 3}},\n{Gateway: G2, Device: D2,position:{rssi: 2}},\n</code></pre>\n<p>Actually, this is a series of data coming to my endpoint, I need to calculate Which device is staying more at which Gateway. First I need to add Devices into MultiMap and then Gateway with position into Map.\nIn the end I want to calculate the average like that:</p>\n<pre><code>D1-&gt; G1: {1,2,4} =&gt; 7/3 = 2.3 \nD1-&gt; G2: {3,5,6} =&gt; 14/3 = 4.6\n</code></pre>\n"},{"tags":["java","file","amazon-s3"],"comments":[{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1675210764,"post_id":75304321,"comment_id":132878981,"body_markdown":"FYI this is called serialization (and deserialization). Use [ObjectMapper](https://www.baeldung.com/jackson-object-mapper-tutorial).","body":"FYI this is called serialization (and deserialization). Use <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">ObjectMapper</a>."},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1675211215,"post_id":75304321,"comment_id":132879049,"body_markdown":"@jarmod Thanks for the info, the problem is how to take that json that I can obtain with the mapper to a .json file? I was thinking about this (to have &quot;in memory json file&quot;) https://kodejava.org/how-to-read-and-write-java-object-to-json-file/ and then get the bytes of this file like so: https://mkyong.com/java/how-to-convert-file-into-an-array-of-bytes/ but I think it is too much","body":"@jarmod Thanks for the info, the problem is how to take that json that I can obtain with the mapper to a .json file? I was thinking about this (to have &quot;in memory json file&quot;) <a href=\"https://kodejava.org/how-to-read-and-write-java-object-to-json-file/\" rel=\"nofollow noreferrer\">kodejava.org/how-to-read-and-write-java-object-to-json-file</a> and then get the bytes of this file like so: <a href=\"https://mkyong.com/java/how-to-convert-file-into-an-array-of-bytes/\" rel=\"nofollow noreferrer\">mkyong.com/java/how-to-convert-file-into-an-array-of-bytes</a> but I think it is too much"},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1675212237,"post_id":75304321,"comment_id":132879215,"body_markdown":"Use `objectMapper.writeValueAsString(student)` to serialize the student to a string and then use the AWS SDK to [put](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html#putObject(software.amazon.awssdk.services.s3.model.PutObjectRequest,java.nio.file.Path)) that [string](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/sync/RequestBody.html#fromString(java.lang.String)) to an object in S3. No need for an intermediate local file.","body":"Use <code>objectMapper.writeValueAsString(student)</code> to serialize the student to a string and then use the AWS SDK to <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html#putObject(software.amazon.awssdk.services.s3.model.PutObjectRequest,java.nio.file.Path)\" rel=\"nofollow noreferrer\">put</a> that <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/sync/RequestBody.html#fromString(java.lang.String)\" rel=\"nofollow noreferrer\">string</a> to an object in S3. No need for an intermediate local file."}],"answers":[{"comments":[{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1675211342,"post_id":75304498,"comment_id":132879067,"body_markdown":"Thanks, the part I am struggling is where you point &quot;save this string to a text file&quot;, this part im missing on how to do it properly","body":"Thanks, the part I am struggling is where you point &quot;save this string to a text file&quot;, this part im missing on how to do it properly"},{"owner":{"account_id":14738,"reputation":1687,"user_id":30581,"accept_rate":67,"display_name":"Emrah Diril"},"score":1,"creation_date":1675211428,"post_id":75304498,"comment_id":132879080,"body_markdown":"You save the string to a text file using any way you like, nothing special about it. Json is a text data format. Here is a bunch of ways you can do it: https://www.baeldung.com/java-write-to-file. I updated my answer to include one of the ways.","body":"You save the string to a text file using any way you like, nothing special about it. Json is a text data format. Here is a bunch of ways you can do it: <a href=\"https://www.baeldung.com/java-write-to-file\" rel=\"nofollow noreferrer\">baeldung.com/java-write-to-file</a>. I updated my answer to include one of the ways."},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1675212079,"post_id":75304498,"comment_id":132879186,"body_markdown":"Im not sure if the read it back part will work, in my case, because remember that the file that comes from the storage is in the form of a byte[], how could I read them properly to get the &quot;contents&quot; (String object that is inside those bytes)","body":"Im not sure if the read it back part will work, in my case, because remember that the file that comes from the storage is in the form of a byte[], how could I read them properly to get the &quot;contents&quot; (String object that is inside those bytes)"},{"owner":{"account_id":14738,"reputation":1687,"user_id":30581,"accept_rate":67,"display_name":"Emrah Diril"},"score":0,"creation_date":1675216918,"post_id":75304498,"comment_id":132879829,"body_markdown":"You already have the answer in your question: `String string = new String(studentBytes, charset);`","body":"You already have the answer in your question: <code>String string = new String(studentBytes, charset);</code>"}],"tags":[],"owner":{"account_id":14738,"reputation":1687,"user_id":30581,"accept_rate":67,"display_name":"Emrah Diril"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675214621,"creation_date":1675211184,"answer_id":75304498,"question_id":75304321,"body_markdown":"Yes this is how you want to do it if you want to save json to a file to upload to S3. Jackson has a native json data structure (I think it&#39;s called `JsonNode`) but you don&#39;t want to save that to a file. Just save the json string to a text file.\r\n\r\nTo convert `Student` object to String:\r\n\r\n    Student student = new Student(&quot;Joe&quot;, 25);\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    String json_string = mapper.writeValueAsString(student);\r\n\r\nYou can save this string to a text file and upload to S3.\r\nWhen you want to get the `Student` object back:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    Student student = mapper.readValue(new File(&quot;student.json&quot;), Student.class);\r\n\r\nNote that there is nothing special about a &quot;json file&quot;. It&#39;s just a text file with the `.json` extention. It contains text data that happens to be in the Json format. You can save `json_string` to a file like this:\r\n\r\n    Path path = Paths.get(&quot;student.json&quot;);\r\n    byte[] strToBytes = json_string.getBytes();\r\n    Files.write(path, strToBytes);\r\n\r\n(Reference: https://www.baeldung.com/jackson-object-mapper-tutorial)","title":"Convert Object to JSON File then to Bytes to save to an Storage and then back to Object","body":"<p>Yes this is how you want to do it if you want to save json to a file to upload to S3. Jackson has a native json data structure (I think it's called <code>JsonNode</code>) but you don't want to save that to a file. Just save the json string to a text file.</p>\n<p>To convert <code>Student</code> object to String:</p>\n<pre><code>Student student = new Student(&quot;Joe&quot;, 25);\nObjectMapper mapper = new ObjectMapper();\nString json_string = mapper.writeValueAsString(student);\n</code></pre>\n<p>You can save this string to a text file and upload to S3.\nWhen you want to get the <code>Student</code> object back:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nStudent student = mapper.readValue(new File(&quot;student.json&quot;), Student.class);\n</code></pre>\n<p>Note that there is nothing special about a &quot;json file&quot;. It's just a text file with the <code>.json</code> extention. It contains text data that happens to be in the Json format. You can save <code>json_string</code> to a file like this:</p>\n<pre><code>Path path = Paths.get(&quot;student.json&quot;);\nbyte[] strToBytes = json_string.getBytes();\nFiles.write(path, strToBytes);\n</code></pre>\n<p>(Reference: <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-object-mapper-tutorial</a>)</p>\n"}],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675214621,"creation_date":1675209188,"question_id":75304321,"body_markdown":"Suppose I have the class Student which only has name and age attributes.\r\n\r\n    public class Student {\r\n         private String studentName;\r\n         private Integer age;\r\n    }\r\n\r\nI want to convert this Student objects to JSON files (I think I can do this with Jackson mapper)\r\n\r\nThen I need to store this .json file to an storage, so I have the method save(String key, byte[] resource) which saves any kind of file to the storage (.zip, .txt, etc.).\r\n\r\nSo I was wondering if I can do this like so:\r\n\r\n1) Write value as String with jackson (Student to json)\r\n2) Get the bytes of this String\r\n3) Save to the Storage with save(studentName, bytes)\r\n\r\n**Back to Student object:**\r\n\r\nThen when I search an student from the storage I would need to convert back to String like so:\r\n\r\n    Charset charset = Charset.forName(&quot;UTF-8&quot;);\r\n    String string = new String(studentBytes, charset);\r\n\r\nThen String back to Student with Jackson mapper\r\n\r\nIs this a good approach (I think not because the idea is that those bytes are actually a .json file, but are bytes of a java String object)? I am a little confused because the &quot;file bytes&quot; that I am saving are from a String object with this approach, but I can not find how to convert the Student object to a &quot;.json file&quot;, can not figure out how to save .json file (which I do not need to save in disk because I only need the bytes to save to the cloud storage), how would I write an Object to an &quot;in memory .json file&quot; or maybe is not to see it as a file, just as bytes right? Please point in the right direction, like how to directly write the object to a json file and then store this file bytes?","title":"Convert Object to JSON File then to Bytes to save to an Storage and then back to Object","body":"<p>Suppose I have the class Student which only has name and age attributes.</p>\n<pre><code>public class Student {\n     private String studentName;\n     private Integer age;\n}\n</code></pre>\n<p>I want to convert this Student objects to JSON files (I think I can do this with Jackson mapper)</p>\n<p>Then I need to store this .json file to an storage, so I have the method save(String key, byte[] resource) which saves any kind of file to the storage (.zip, .txt, etc.).</p>\n<p>So I was wondering if I can do this like so:</p>\n<ol>\n<li>Write value as String with jackson (Student to json)</li>\n<li>Get the bytes of this String</li>\n<li>Save to the Storage with save(studentName, bytes)</li>\n</ol>\n<p><strong>Back to Student object:</strong></p>\n<p>Then when I search an student from the storage I would need to convert back to String like so:</p>\n<pre><code>Charset charset = Charset.forName(&quot;UTF-8&quot;);\nString string = new String(studentBytes, charset);\n</code></pre>\n<p>Then String back to Student with Jackson mapper</p>\n<p>Is this a good approach (I think not because the idea is that those bytes are actually a .json file, but are bytes of a java String object)? I am a little confused because the &quot;file bytes&quot; that I am saving are from a String object with this approach, but I can not find how to convert the Student object to a &quot;.json file&quot;, can not figure out how to save .json file (which I do not need to save in disk because I only need the bytes to save to the cloud storage), how would I write an Object to an &quot;in memory .json file&quot; or maybe is not to see it as a file, just as bytes right? Please point in the right direction, like how to directly write the object to a json file and then store this file bytes?</p>\n"},{"tags":["java","javafx","slider","media"],"comments":[{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":1,"creation_date":1675184096,"post_id":75298221,"comment_id":132872214,"body_markdown":"I would be tempted to make the slider transparent, and then put it in a StackPane with another Pane containing the blue shapes at the bottom.  Set the size of the shape Pane to the same dimensions as the Slider and position the blue shapes in the Pane where you want them.  Probably less fiddly than trying to get linear gradients to work.","body":"I would be tempted to make the slider transparent, and then put it in a StackPane with another Pane containing the blue shapes at the bottom.  Set the size of the shape Pane to the same dimensions as the Slider and position the blue shapes in the Pane where you want them.  Probably less fiddly than trying to get linear gradients to work."},{"owner":{"account_id":22737541,"reputation":43,"user_id":16899534,"display_name":"deepl"},"score":0,"creation_date":1675187272,"post_id":75298221,"comment_id":132873240,"body_markdown":"@DaveB how to position the blue shapes in the Pane?","body":"@DaveB how to position the blue shapes in the Pane?"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1675191438,"post_id":75298221,"comment_id":132874425,"body_markdown":"I added an answer.","body":"I added an answer."}],"answers":[{"comments":[{"owner":{"account_id":22737541,"reputation":43,"user_id":16899534,"display_name":"deepl"},"score":0,"creation_date":1675175157,"post_id":75298486,"comment_id":132868928,"body_markdown":"Okay thank you, do you think I have to iterate through the slider values? Becouse this color have to be applied before the video starts","body":"Okay thank you, do you think I have to iterate through the slider values? Becouse this color have to be applied before the video starts"}],"tags":[],"owner":{"account_id":13284784,"reputation":61,"user_id":9591245,"display_name":"Nina Koninckx"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675174543,"creation_date":1675174543,"answer_id":75298486,"question_id":75298221,"body_markdown":"I recommend you play around with linear gradients, I think those can solve you issues:\r\n\r\n    -fx-background-color: linear-gradient(from 30% 30% to 23% 30%, repeat,  #e9967a 62%, #ff8c00 88%);\r\n\r\nFor more info you can look at the documentation: https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html","title":"How to color portion of a slider in JavaFX","body":"<p>I recommend you play around with linear gradients, I think those can solve you issues:</p>\n<pre><code>-fx-background-color: linear-gradient(from 30% 30% to 23% 30%, repeat,  #e9967a 62%, #ff8c00 88%);\n</code></pre>\n<p>For more info you can look at the documentation: <a href=\"https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html</a></p>\n"},{"comments":[{"owner":{"account_id":22737541,"reputation":43,"user_id":16899534,"display_name":"deepl"},"score":0,"creation_date":1675265864,"post_id":75301897,"comment_id":132892066,"body_markdown":"Thank you so much. I solved it thanks to your answer!","body":"Thank you so much. I solved it thanks to your answer!"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1675284353,"post_id":75301897,"comment_id":132898136,"body_markdown":"Glad I could help.  Did you have any difficulties with the Kotlin?","body":"Glad I could help.  Did you have any difficulties with the Kotlin?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1675298842,"post_id":75301897,"comment_id":132901292,"body_markdown":"The Kotlin reads a lot like [JavaFX Script](https://www.oracle.com/java/technologies/getting-started-with-javafx.html#borders) but is backed by a well-supported language.  I don&#39;t have a difficulty with it, at least this small snippet anyway.","body":"The Kotlin reads a lot like <a href=\"https://www.oracle.com/java/technologies/getting-started-with-javafx.html#borders\" rel=\"nofollow noreferrer\">JavaFX Script</a> but is backed by a well-supported language.  I don&#39;t have a difficulty with it, at least this small snippet anyway."}],"tags":[],"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675191368,"creation_date":1675191368,"answer_id":75301897,"question_id":75298221,"body_markdown":"As per my comment on the question, here&#39;s some code that will do the trick.  It takes just a little bit of messing about with the styling of the &quot;track&quot; element of the Slider to make it transparent, and then the rest falls in place.\r\n\r\nBTW:  This is Kotlin, but you should be able to figure out how it works, if you have any questions, I can update this with some explanations:\r\n\r\n    class FancySlider : Application() {\r\n       override fun start(stage: Stage) {\r\n          stage.scene = Scene(createContent()).apply {\r\n             FancySlider::class.java.getResource(&quot;/css/default.css&quot;)?.toString()?.let { stylesheets += it }\r\n          }\r\n          stage.show()\r\n       }\r\n    \r\n       private fun createContent(): Region {\r\n          val stackPane = StackPane().apply {\r\n             val slider = Slider().apply {\r\n                minWidth = 300.0\r\n                styleClass += &quot;fancy-slider&quot;\r\n             }\r\n             val pane = Pane().apply {\r\n                val heightAdjust = 8.0\r\n                val widthAdjust = 10.0\r\n                maxHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\r\n                minHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\r\n                maxWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\r\n                minWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\r\n                children += createRectangle(this.widthProperty(), 0.43, 0.08)\r\n                children += createRectangle(this.widthProperty(), 0.12, 0.15)\r\n                children += createRectangle(this.widthProperty(), 0.75, 0.03)\r\n             }\r\n             children += listOf(pane, slider)\r\n             minHeight = 60.0\r\n             padding = Insets(20.0)\r\n          }\r\n          return stackPane\r\n       }\r\n    \r\n       fun createRectangle(sliderWidthProperty: ReadOnlyDoubleProperty, startPos: Double, duration: Double) = Rectangle(1.0, 7.0).apply {\r\n          layoutXProperty().bind(sliderWidthProperty.multiply(startPos))\r\n          widthProperty().bind(sliderWidthProperty.multiply(duration))\r\n          fill = Color.DARKBLUE\r\n          styleClass += &quot;fancy-slider-rectangle&quot;\r\n       }\r\n    }\r\n    \r\n    fun main() {\r\n       Application.launch(FancySlider::class.java)\r\n    }\r\n\r\nAnd the CSS stuff looks like this:\r\n\r\n    .fancy-slider .track {\r\n        -fx-background-color: transparent;\r\n        -fx-border-color: derive(-fx-text-box-border, -10%);\r\n        -fx-background-insets: 2;\r\n        -fx-border-radius: 0.25em;\r\n        -fx-background-radius: 0.25em\r\n        -fx-padding: 0.25em; /* 3 */\r\n    }\r\n    \r\n    .fancy-slider-rectangle {\r\n      -fx-arc-width: 6.0;\r\n      -fx-arc-height: 6.0;\r\n    }\r\n\r\nA couple of notes:\r\n\r\n1.  This is only for horizontal Sliders, you&#39;d have to rework it for a verticle Slider.  \r\n\r\n1.  The width and height bindings for the Pane are set with hard-coded adjustments, and I&#39;m not sure what would happen if you could somehow change the height of the Slider.\r\n\r\n1.  The StackPane keeps everything lined up nicely, since it centres by default, so long as you get the right height and width for the Pane is should just align nicely. \r\n\r\n1.  You could implement this as a custom Node and expose an addRectangle() method which worked nicely with the Slider&#39;s conversions of it&#39;s value. \r\n\r\nAnyways, it looks like this: \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZEduQ.png","title":"How to color portion of a slider in JavaFX","body":"<p>As per my comment on the question, here's some code that will do the trick.  It takes just a little bit of messing about with the styling of the &quot;track&quot; element of the Slider to make it transparent, and then the rest falls in place.</p>\n<p>BTW:  This is Kotlin, but you should be able to figure out how it works, if you have any questions, I can update this with some explanations:</p>\n<pre><code>class FancySlider : Application() {\n   override fun start(stage: Stage) {\n      stage.scene = Scene(createContent()).apply {\n         FancySlider::class.java.getResource(&quot;/css/default.css&quot;)?.toString()?.let { stylesheets += it }\n      }\n      stage.show()\n   }\n\n   private fun createContent(): Region {\n      val stackPane = StackPane().apply {\n         val slider = Slider().apply {\n            minWidth = 300.0\n            styleClass += &quot;fancy-slider&quot;\n         }\n         val pane = Pane().apply {\n            val heightAdjust = 8.0\n            val widthAdjust = 10.0\n            maxHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\n            minHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\n            maxWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\n            minWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\n            children += createRectangle(this.widthProperty(), 0.43, 0.08)\n            children += createRectangle(this.widthProperty(), 0.12, 0.15)\n            children += createRectangle(this.widthProperty(), 0.75, 0.03)\n         }\n         children += listOf(pane, slider)\n         minHeight = 60.0\n         padding = Insets(20.0)\n      }\n      return stackPane\n   }\n\n   fun createRectangle(sliderWidthProperty: ReadOnlyDoubleProperty, startPos: Double, duration: Double) = Rectangle(1.0, 7.0).apply {\n      layoutXProperty().bind(sliderWidthProperty.multiply(startPos))\n      widthProperty().bind(sliderWidthProperty.multiply(duration))\n      fill = Color.DARKBLUE\n      styleClass += &quot;fancy-slider-rectangle&quot;\n   }\n}\n\nfun main() {\n   Application.launch(FancySlider::class.java)\n}\n</code></pre>\n<p>And the CSS stuff looks like this:</p>\n<pre><code>.fancy-slider .track {\n    -fx-background-color: transparent;\n    -fx-border-color: derive(-fx-text-box-border, -10%);\n    -fx-background-insets: 2;\n    -fx-border-radius: 0.25em;\n    -fx-background-radius: 0.25em\n    -fx-padding: 0.25em; /* 3 */\n}\n\n.fancy-slider-rectangle {\n  -fx-arc-width: 6.0;\n  -fx-arc-height: 6.0;\n}\n</code></pre>\n<p>A couple of notes:</p>\n<ol>\n<li><p>This is only for horizontal Sliders, you'd have to rework it for a verticle Slider.</p>\n</li>\n<li><p>The width and height bindings for the Pane are set with hard-coded adjustments, and I'm not sure what would happen if you could somehow change the height of the Slider.</p>\n</li>\n<li><p>The StackPane keeps everything lined up nicely, since it centres by default, so long as you get the right height and width for the Pane is should just align nicely.</p>\n</li>\n<li><p>You could implement this as a custom Node and expose an addRectangle() method which worked nicely with the Slider's conversions of it's value.</p>\n</li>\n</ol>\n<p>Anyways, it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/ZEduQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZEduQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1675299432,"post_id":75304618,"comment_id":132901386,"body_markdown":"Linear gradients can be defined in code using Java API rather than CSS.  For a static gradient, CSS is probably fine.  But if you wanted to dynamically change the stops to different settings at runtime, it would probably be best to use the Java API.","body":"Linear gradients can be defined in code using Java API rather than CSS.  For a static gradient, CSS is probably fine.  But if you wanted to dynamically change the stops to different settings at runtime, it would probably be best to use the Java API."}],"tags":[],"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675214290,"creation_date":1675212709,"answer_id":75304618,"question_id":75298221,"body_markdown":"If you are not very concerned about curved highlights, below is a way you can try with. This is on the same lines what @Nina Koninckx suggested.\r\n\r\nThe general idea is, we paint the track color using linear gradient color stops.\r\n\r\nLets say the default track color is `white` and you need to highlight the sections(50%-70% and 80%-90%) with `blue`. You define all individual sections with the percentage values. Like\r\n\r\n* white 50% (default start with 0% so no need to specify) \r\n* blue 50% , blue 70% , \r\n* white 70% , white 80% , \r\n* blue 80% , blue 90% , \r\n* white 90% , white 100%\r\n\r\nCombining all, the linear gradient styling will be like:\r\n\r\n    linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )\r\n\r\nThen we create a variable( lets say `-track-color`) for slider in CSS, and we update the variable in the java code.\r\n\r\nBelow is a quick demo of the example:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Slider;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    public class SliderStylingDemo extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            Slider slider = new Slider(0, 100, 30) ;\r\n            slider.setMajorTickUnit(10);\r\n            slider.setShowTickMarks(true);\r\n            slider.setShowTickLabels(true);\r\n            String style = &quot;-track-color: linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )&quot;;\r\n            slider.setStyle(style);\r\n            VBox root = new VBox(slider);\r\n            root.setAlignment(Pos.CENTER);\r\n            root.setPadding(new Insets(20));\r\n            root.setSpacing(20);\r\n            Scene scene = new Scene(root, 600, 100);\r\n            scene.getStylesheets().add(getClass().getResource(&quot;sliderstyle.css&quot;).toExternalForm());\r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Slider Styling Demo&quot;);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n**CSS Code:**\r\n\r\n    .slider {\r\n        -track-color: -fx-control-inner-background;\r\n    }\r\n    .slider .track {\r\n          -fx-background-color:\r\n              -fx-shadow-highlight-color,\r\n              linear-gradient(to bottom, derive(-fx-text-box-border, -10%), -fx-text-box-border),\r\n              -track-color;\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zTuQh.png","title":"How to color portion of a slider in JavaFX","body":"<p>If you are not very concerned about curved highlights, below is a way you can try with. This is on the same lines what @Nina Koninckx suggested.</p>\n<p>The general idea is, we paint the track color using linear gradient color stops.</p>\n<p>Lets say the default track color is <code>white</code> and you need to highlight the sections(50%-70% and 80%-90%) with <code>blue</code>. You define all individual sections with the percentage values. Like</p>\n<ul>\n<li>white 50% (default start with 0% so no need to specify)</li>\n<li>blue 50% , blue 70% ,</li>\n<li>white 70% , white 80% ,</li>\n<li>blue 80% , blue 90% ,</li>\n<li>white 90% , white 100%</li>\n</ul>\n<p>Combining all, the linear gradient styling will be like:</p>\n<pre><code>linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )\n</code></pre>\n<p>Then we create a variable( lets say <code>-track-color</code>) for slider in CSS, and we update the variable in the java code.</p>\n<p>Below is a quick demo of the example:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Slider;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\npublic class SliderStylingDemo extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        Slider slider = new Slider(0, 100, 30) ;\n        slider.setMajorTickUnit(10);\n        slider.setShowTickMarks(true);\n        slider.setShowTickLabels(true);\n        String style = &quot;-track-color: linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )&quot;;\n        slider.setStyle(style);\n        VBox root = new VBox(slider);\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(20));\n        root.setSpacing(20);\n        Scene scene = new Scene(root, 600, 100);\n        scene.getStylesheets().add(getClass().getResource(&quot;sliderstyle.css&quot;).toExternalForm());\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Slider Styling Demo&quot;);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p><strong>CSS Code:</strong></p>\n<pre><code>.slider {\n    -track-color: -fx-control-inner-background;\n}\n.slider .track {\n      -fx-background-color:\n          -fx-shadow-highlight-color,\n          linear-gradient(to bottom, derive(-fx-text-box-border, -10%), -fx-text-box-border),\n          -track-color;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zTuQh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zTuQh.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22737541,"reputation":43,"user_id":16899534,"display_name":"deepl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75301897,"answer_count":3,"score":4,"last_activity_date":1675214290,"creation_date":1675173281,"question_id":75298221,"body_markdown":"I&#39;m creating a video player and I want to color only a portion (with custom values) in the slider like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\nhow can I do?\r\n\r\n\r\nI&#39;ve colored the whole bar up to now, but I can&#39;t color just different portions:\r\n\r\n```\r\n            StackPane trackPane = (StackPane) seekSlider.lookup(&quot;.track&quot;);\r\n            trackPane.setStyle(&quot;-fx-background-color: #e5e5e5&quot;);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nXPPU.png","title":"How to color portion of a slider in JavaFX","body":"<p>I'm creating a video player and I want to color only a portion (with custom values) in the slider like this:</p>\n<p><a href=\"https://i.stack.imgur.com/nXPPU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nXPPU.png\" alt=\"enter image description here\" /></a></p>\n<p>how can I do?</p>\n<p>I've colored the whole bar up to now, but I can't color just different portions:</p>\n<pre><code>            StackPane trackPane = (StackPane) seekSlider.lookup(&quot;.track&quot;);\n            trackPane.setStyle(&quot;-fx-background-color: #e5e5e5&quot;);\n</code></pre>\n"},{"tags":["java","android","header","exoplayer","referer"],"owner":{"account_id":27226208,"reputation":1,"user_id":20754680,"display_name":"Kikay Jaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675214046,"creation_date":1675213992,"question_id":75304721,"body_markdown":"I trying to add custom referer as header top play m3u8 in exoplayer. I searched many method is not compatible with my source code i have. \r\n\r\n    if (uri.getLastPathSegment().contains(&quot;m3u8&quot;) || uri.getLastPathSegment().contains(&quot;m3u&quot;) || uri.getLastPathSegment().contains(&quot;ts&quot;)) {\r\n            return new HlsMediaSource.Factory(new DefaultHttpDataSourceFactory(&quot;ua&quot;, BANDWIDTH_METER))\r\n                    .createMediaSource(uri);\r\n\r\n        }\r\n\r\n","title":"How to set custom header referer in exoplayer?","body":"<p>I trying to add custom referer as header top play m3u8 in exoplayer. I searched many method is not compatible with my source code i have.</p>\n<pre><code>if (uri.getLastPathSegment().contains(&quot;m3u8&quot;) || uri.getLastPathSegment().contains(&quot;m3u&quot;) || uri.getLastPathSegment().contains(&quot;ts&quot;)) {\n        return new HlsMediaSource.Factory(new DefaultHttpDataSourceFactory(&quot;ua&quot;, BANDWIDTH_METER))\n                .createMediaSource(uri);\n\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20304974,"reputation":99,"user_id":14893498,"display_name":"Daniel Janz"},"score":0,"creation_date":1663631768,"post_id":73780304,"comment_id":130280920,"body_markdown":"You need to use the right logarithm-function. See here in the tutorial.\nhttps://www.baeldung.com/java-logarithms","body":"You need to use the right logarithm-function. See here in the tutorial. <a href=\"https://www.baeldung.com/java-logarithms\" rel=\"nofollow noreferrer\">baeldung.com/java-logarithms</a>"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1663632501,"post_id":73780304,"comment_id":130280995,"body_markdown":"Log base 10 (0.5)= -0.30102999566.  Log base e (0.5) = -0.69314718055995.  &quot;Log to the base e&quot; (ln x) is the [Natural logarithm](https://en.wikipedia.org/wiki/Natural_logarithm).  The [javadoc](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html) for Math.log() clearly says: &quot;log(double a)\nReturns the natural logarithm (base e) of a double value.&quot;","body":"Log base 10 (0.5)= -0.30102999566.  Log base e (0.5) = -0.69314718055995.  &quot;Log to the base e&quot; (ln x) is the <a href=\"https://en.wikipedia.org/wiki/Natural_logarithm\" rel=\"nofollow noreferrer\">Natural logarithm</a>.  The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html\" rel=\"nofollow noreferrer\">javadoc</a> for Math.log() clearly says: &quot;log(double a) Returns the natural logarithm (base e) of a double value.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1663631657,"creation_date":1663631657,"answer_id":73780316,"question_id":73780304,"body_markdown":"`Math.log` calculates a &quot;natural logarithm&quot;, that is, base e.  On your calculator, this might be denoted by a button `ln` or similar.\r\n\r\nTo get a &quot;common logarithm&quot;, that is, base 10, you need `Math.log10`.  This is the function represented by the `log` button on your calculator.","title":"Why Java Logarithm and answer using calculator not equal","body":"<p><code>Math.log</code> calculates a &quot;natural logarithm&quot;, that is, base e.  On your calculator, this might be denoted by a button <code>ln</code> or similar.</p>\n<p>To get a &quot;common logarithm&quot;, that is, base 10, you need <code>Math.log10</code>.  This is the function represented by the <code>log</code> button on your calculator.</p>\n"}],"owner":{"account_id":17309458,"reputation":181,"user_id":12537438,"display_name":"Jonas Lu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73780316,"answer_count":1,"score":-1,"last_activity_date":1675213489,"creation_date":1663631501,"question_id":73780304,"body_markdown":"I am new to Java, sorry I have this wield question came up, I tried to do `log(0.5)` in Java using `Math.log(0.5)`, I did `log(0.5`) in calculator and answer is `-0.3` and I computed `Math.log(0.5)`, answer is `-0.69`. Any one know where I did it wrong?","title":"Why Java Logarithm and answer using calculator not equal","body":"<p>I am new to Java, sorry I have this wield question came up, I tried to do <code>log(0.5)</code> in Java using <code>Math.log(0.5)</code>, I did <code>log(0.5</code>) in calculator and answer is <code>-0.3</code> and I computed <code>Math.log(0.5)</code>, answer is <code>-0.69</code>. Any one know where I did it wrong?</p>\n"},{"tags":["java","multidimensional-array"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1670457157,"post_id":74724071,"comment_id":131883049,"body_markdown":"I am curious: who do you determine the memory address of `x` and `x[0]`?","body":"I am curious: who do you determine the memory address of <code>x</code> and <code>x[0]</code>?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1670457234,"post_id":74724071,"comment_id":131883066,"body_markdown":"Well, there&#39;s C and C++.  But I&#39;m curious like Turing85 - how are you getting memory addresses?  Java is supposed to shield you from stuff like that.  Unless you mean hash codes, of course, which are not necessarily the same thing.","body":"Well, there&#39;s C and C++.  But I&#39;m curious like Turing85 - how are you getting memory addresses?  Java is supposed to shield you from stuff like that.  Unless you mean hash codes, of course, which are not necessarily the same thing."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457305,"post_id":74724071,"comment_id":131883077,"body_markdown":"do you mean who or how?  Isn&#39;t the toString() method &quot;close  enough for government work&quot; a reasonable surrogate for the address","body":"do you mean who or how?  Isn&#39;t the toString() method &quot;close  enough for government work&quot; a reasonable surrogate for the address"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457362,"post_id":74724071,"comment_id":131883088,"body_markdown":"but c stores 2d arrays as an array of arrays","body":"but c stores 2d arrays as an array of arrays"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1670457463,"post_id":74724071,"comment_id":131883102,"body_markdown":"No, the C compiler acts as if the 2D array is an array of arrays.  Under the covers, it&#39;s stored as a matrix.  And no, `toString()` does NOT return a memory address.","body":"No, the C compiler acts as if the 2D array is an array of arrays.  Under the covers, it&#39;s stored as a matrix.  And no, <code>toString()</code> does NOT return a memory address."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457630,"post_id":74724071,"comment_id":131883127,"body_markdown":"i know toString does not return the actual memory address but it&#39;s really not important  I thought the hash code would be close enough i.e if two elements have the same address won&#39;t they almost always have the same hash code?","body":"i know toString does not return the actual memory address but it&#39;s really not important  I thought the hash code would be close enough i.e if two elements have the same address won&#39;t they almost always have the same hash code?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1670457695,"post_id":74724071,"comment_id":131883136,"body_markdown":"@DCR The [`toString()`-method of `Object`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l237) prints out the `hashCode()` of the object. And the [`hashCode()` of `Object`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l92) is &quot;*typically implemented by converting the internal address of the object into an integer*&quot;.","body":"@DCR The <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l237\" rel=\"nofollow noreferrer\"><code>toString()</code>-method of <code>Object</code></a> prints out the <code>hashCode()</code> of the object. And the <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l92\" rel=\"nofollow noreferrer\"><code>hashCode()</code> of <code>Object</code></a> is &quot;<i>typically implemented by converting the internal address of the object into an integer</i>&quot;."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457860,"post_id":74724071,"comment_id":131883152,"body_markdown":"right, so if two objects have the same address won&#39;t the hash code usually be the same?","body":"right, so if two objects have the same address won&#39;t the hash code usually be the same?"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670458046,"post_id":74724071,"comment_id":131883181,"body_markdown":"I thought in C if we declare int[][] x = new int[3][3]; we can access x with x{2][2] or x[8] would give us the same cell but, clearly you can&#39;t do that in Java","body":"I thought in C if we declare int[][] x = new int[3][3]; we can access x with x{2][2] or x[8] would give us the same cell but, clearly you can&#39;t do that in Java"},{"owner":{"account_id":14679090,"reputation":1356,"user_id":10601203,"display_name":"Jesse"},"score":0,"creation_date":1670458129,"post_id":74724071,"comment_id":131883190,"body_markdown":"Because of the way memory works, each index would always have their own memory address. Memory is linear so you can&#39;t very well store something two-dimensional in it without creating a linear representation for it. The structure of an array in memory is simply the number of entries followed by the entries themselves. In a 2d array, these entries are simply more arrays. When you access an index, it takes that index * the size of each item to get the offset, then adds the offset to the original pointer to get the pointer of the item. I don&#39;t think there&#39;s any other performant way to do this.","body":"Because of the way memory works, each index would always have their own memory address. Memory is linear so you can&#39;t very well store something two-dimensional in it without creating a linear representation for it. The structure of an array in memory is simply the number of entries followed by the entries themselves. In a 2d array, these entries are simply more arrays. When you access an index, it takes that index * the size of each item to get the offset, then adds the offset to the original pointer to get the pointer of the item. I don&#39;t think there&#39;s any other performant way to do this."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":1,"creation_date":1670458222,"post_id":74724071,"comment_id":131883205,"body_markdown":"I don&#39;t think that&#39;s correct.  Doesn&#39;t java and c store 2d arrays differently?  Specifically, in c  2d array will be stored sequentially while in java it won&#39;t.  In c I would need to create an array of pointers and then with malloc allocate memory for the columns to duplicate what happens in java","body":"I don&#39;t think that&#39;s correct.  Doesn&#39;t java and c store 2d arrays differently?  Specifically, in c  2d array will be stored sequentially while in java it won&#39;t.  In c I would need to create an array of pointers and then with malloc allocate memory for the columns to duplicate what happens in java"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1670520895,"post_id":74724071,"comment_id":131899315,"body_markdown":"As far as I know, in Java, If two objects have the same memory address, they are the same object. One is an alias of the other. Java doesn&#39;t have something like the `EQUIVALENCE` of  Fortran or the `union` of C / C++.  Also, if two different objects, `a`, and `b` return `true` for `a.equals(b)`, they are supposed to return the same value for `hashCode ()`.","body":"As far as I know, in Java, If two objects have the same memory address, they are the same object. One is an alias of the other. Java doesn&#39;t have something like the <code>EQUIVALENCE</code> of  Fortran or the <code>union</code> of C / C++.  Also, if two different objects, <code>a</code>, and <code>b</code> return <code>true</code> for <code>a.equals(b)</code>, they are supposed to return the same value for <code>hashCode ()</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1670523959,"post_id":74724071,"comment_id":131900229,"body_markdown":"I believe @DCR is correct, at least in regards to Java.  In Java, arrays are reference types. Suppose I have `int [][] foo = new int [20][15]; int [] bar = new int [12];`.  Each row of `foo` is a reference to an `int []`.   An entire row can be replaced by changing the reference to that row:  `foo [9] = bar;`  Note that Java 2D arrays can be &quot;ragged&quot; (have rows of different lengths). In this example, `foo` becomes ragged from  `foo [9] = bar;` being executed.","body":"I believe @DCR is correct, at least in regards to Java.  In Java, arrays are reference types. Suppose I have <code>int [][] foo = new int [20][15]; int [] bar = new int [12];</code>.  Each row of <code>foo</code> is a reference to an <code>int []</code>.   An entire row can be replaced by changing the reference to that row:  <code>foo [9] = bar;</code>  Note that Java 2D arrays can be &quot;ragged&quot; (have rows of different lengths). In this example, <code>foo</code> becomes ragged from  <code>foo [9] = bar;</code> being executed."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1670528031,"post_id":74724071,"comment_id":131901400,"body_markdown":"By the way, in a C++ course, one assignment was to create a `class` that represented a edges of a graph using an adjacency matrix. Because the graph was undirected, the professor encouraged us to use a &quot;triangular&quot; array. If the graph had `n` nodes (vertices), row 0 would have `n` columns. Row 1 would have `n - 1` columns. Row 2 would have `n - 2` columns.  Row 3 ... . If my memory is correct, we coded the array pretty much the same as it would be done in Java. It was an array of arrays.","body":"By the way, in a C++ course, one assignment was to create a <code>class</code> that represented a edges of a graph using an adjacency matrix. Because the graph was undirected, the professor encouraged us to use a &quot;triangular&quot; array. If the graph had <code>n</code> nodes (vertices), row 0 would have <code>n</code> columns. Row 1 would have <code>n - 1</code> columns. Row 2 would have <code>n - 2</code> columns.  Row 3 ... . If my memory is correct, we coded the array pretty much the same as it would be done in Java. It was an array of arrays."}],"answers":[{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675213042,"creation_date":1670459111,"answer_id":74724260,"question_id":74724071,"body_markdown":"&gt; are there any computer languages that store a 2d array as a matrix and\r\n&gt; not as an array of arrays?\r\n\r\nYes. Or, at least, there used to be. \r\n\r\nThere is the possibility of using an assembler language, where the programmer has extreme control over how arrays might be handled. But, let&#39;s assume the question is about high-level languages (&gt;=3GL). \r\n\r\nI don&#39;t know about modern version of Fortran, but the early versions of FORTRAN stored any array, including multi-dimensional arrays, in consecutive storage locations. So, for example, if you  declared an array as `INTEGER FOO (3,4,5)`, then `FOO` and `FOO (1,1,1)` would have the same memory address.  `FOO` would occupy a block of 60 `INTEGER` sized locations. The compiler generates code to find, from the subscript values, the location of an element in a manner similar to what @Jesse described in a comment on the question. It&#39;s slightly different to allow for the fact that FORTRAN subscripts started at one instead of zero.\r\n\r\nBy the way, FORTRAN subscript are in opposite order of most other languages. In Java, C, C++, and COBOL, the major subscripts are to the left. In FORTRAN, they were to the right. \r\n\r\nFORTRAN syntax didn&#39;t allow missing subscripts. So, continuing the example, something like `FOO (2,3)` would generate a compiler error.\r\n\r\nNow, suppose there was the following method:\r\n\r\n          REAL FUNCTION MEAN (ARR, N)\r\n          INTEGER N, ARR (N)\r\n          REAL SUM\r\n          DO 400 I = 1,N,1\r\n          SUM = SUM + ARR (I)\r\n      400 CONTINUE   \r\n          RETURN SUM / N\r\n          END\r\n\r\nA programmer could it use to calculate the mean of the entire `FOO` array, or any part of it: \r\n\r\n         REAL ALLMEAN, LEVEL3MEAN, ROWMEAN\r\n\r\n         ALLMEAN = MEAN (FOO(1,1,1), 60)\r\n         LEVEL3MEAN = MEAN (FOO(1,1,3), 12)\r\n         ROWMEAN = MEAN (FOO(1,2,3), 4)\r\n\r\nSuppose, for some strange reason, there was this:\r\n\r\n          AVGPART = MEAN (FOO (2,3,2), 20)\r\n\r\nThis would use 20 consecutive elements of `FOO`, even if those elements were in different rows or levels. \r\n\r\nWhen I took a C++ course, someone didn&#39;t like having to type separate `[x]` subscripts for multidimensional arrays. Instead of `foo [2][1][0]`, he would rather type something like `foo.get (2,1,0)`, so wrote a convenience wrapper class for an array. Such code might still have `foo [t][r][c]` inside the wrapper class. Or, it could allocate a 1D array. Once the class was created, it allowed him to specify subscripts as arguments in a call to a method.\r\n\r\nCode in Java to do that, using the 1D array option, might look like this:\r\n\r\n      public class Block {\r\n         // class for regular 3D Array\r\n         private int [] array;\r\n         private int rows, int columns, int levels;\r\n     \r\n         public Block (int t, int r, int c) { \r\n             rows = r;\r\n             columns = c;\r\n             levels = t;\r\n             array = new array [ t * r * c];\r\n        }\r\n\r\n        public int get (int t, int r, int c) { \r\n           return array [ t * rows * columns + r * columns + c ];  \r\n        }\r\n        \r\n        public void set (int value, int t, int r, int c) { \r\n           array [ t * rows * columns + r * columns + c ] = value;\r\n        }\r\n        ...\r\n     }\r\n","title":"java 2d memory address","body":"<blockquote>\n<p>are there any computer languages that store a 2d array as a matrix and\nnot as an array of arrays?</p>\n</blockquote>\n<p>Yes. Or, at least, there used to be.</p>\n<p>There is the possibility of using an assembler language, where the programmer has extreme control over how arrays might be handled. But, let's assume the question is about high-level languages (&gt;=3GL).</p>\n<p>I don't know about modern version of Fortran, but the early versions of FORTRAN stored any array, including multi-dimensional arrays, in consecutive storage locations. So, for example, if you  declared an array as <code>INTEGER FOO (3,4,5)</code>, then <code>FOO</code> and <code>FOO (1,1,1)</code> would have the same memory address.  <code>FOO</code> would occupy a block of 60 <code>INTEGER</code> sized locations. The compiler generates code to find, from the subscript values, the location of an element in a manner similar to what @Jesse described in a comment on the question. It's slightly different to allow for the fact that FORTRAN subscripts started at one instead of zero.</p>\n<p>By the way, FORTRAN subscript are in opposite order of most other languages. In Java, C, C++, and COBOL, the major subscripts are to the left. In FORTRAN, they were to the right.</p>\n<p>FORTRAN syntax didn't allow missing subscripts. So, continuing the example, something like <code>FOO (2,3)</code> would generate a compiler error.</p>\n<p>Now, suppose there was the following method:</p>\n<pre><code>      REAL FUNCTION MEAN (ARR, N)\n      INTEGER N, ARR (N)\n      REAL SUM\n      DO 400 I = 1,N,1\n      SUM = SUM + ARR (I)\n  400 CONTINUE   \n      RETURN SUM / N\n      END\n</code></pre>\n<p>A programmer could it use to calculate the mean of the entire <code>FOO</code> array, or any part of it:</p>\n<pre><code>     REAL ALLMEAN, LEVEL3MEAN, ROWMEAN\n\n     ALLMEAN = MEAN (FOO(1,1,1), 60)\n     LEVEL3MEAN = MEAN (FOO(1,1,3), 12)\n     ROWMEAN = MEAN (FOO(1,2,3), 4)\n</code></pre>\n<p>Suppose, for some strange reason, there was this:</p>\n<pre><code>      AVGPART = MEAN (FOO (2,3,2), 20)\n</code></pre>\n<p>This would use 20 consecutive elements of <code>FOO</code>, even if those elements were in different rows or levels.</p>\n<p>When I took a C++ course, someone didn't like having to type separate <code>[x]</code> subscripts for multidimensional arrays. Instead of <code>foo [2][1][0]</code>, he would rather type something like <code>foo.get (2,1,0)</code>, so wrote a convenience wrapper class for an array. Such code might still have <code>foo [t][r][c]</code> inside the wrapper class. Or, it could allocate a 1D array. Once the class was created, it allowed him to specify subscripts as arguments in a call to a method.</p>\n<p>Code in Java to do that, using the 1D array option, might look like this:</p>\n<pre><code>  public class Block {\n     // class for regular 3D Array\n     private int [] array;\n     private int rows, int columns, int levels;\n \n     public Block (int t, int r, int c) { \n         rows = r;\n         columns = c;\n         levels = t;\n         array = new array [ t * r * c];\n    }\n\n    public int get (int t, int r, int c) { \n       return array [ t * rows * columns + r * columns + c ];  \n    }\n    \n    public void set (int value, int t, int r, int c) { \n       array [ t * rows * columns + r * columns + c ] = value;\n    }\n    ...\n }\n</code></pre>\n"}],"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675213042,"creation_date":1670457077,"question_id":74724071,"body_markdown":"in java if we have:\r\n\r\n    int[][] x = new int[3][3];\r\n\r\nthe memory address of x is different from the memory address of x[0].  As  x[0] gives the memory address of the first column.  So the memory address of x[0][0] is different than the memory address of x[0].\r\n\r\nare there any computer languages that store a 2d array as a matrix and not as an array of arrays?\r\n\r\nwould the address of x always be different from x[0] and the address of x[0] equal x[0][0]?","title":"java 2d memory address","body":"<p>in java if we have:</p>\n<pre><code>int[][] x = new int[3][3];\n</code></pre>\n<p>the memory address of x is different from the memory address of x[0].  As  x[0] gives the memory address of the first column.  So the memory address of x[0][0] is different than the memory address of x[0].</p>\n<p>are there any computer languages that store a 2d array as a matrix and not as an array of arrays?</p>\n<p>would the address of x always be different from x[0] and the address of x[0] equal x[0][0]?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1604699491,"post_id":64722027,"comment_id":114436594,"body_markdown":"What do you mean by &quot;finding the mode&quot;?","body":"What do you mean by &quot;finding the mode&quot;?"},{"owner":{"account_id":19916079,"reputation":13,"user_id":14593036,"display_name":"apll0"},"score":0,"creation_date":1604699599,"post_id":64722027,"comment_id":114436628,"body_markdown":"The number in the array that occurs the most for example [1,2,2,3,4,5], the value 2 occurs twice so that is the mode, but in [1,2,2,3,3,4], the values 2 and 3 occur twice so both are the mode","body":"The number in the array that occurs the most for example [1,2,2,3,4,5], the value 2 occurs twice so that is the mode, but in [1,2,2,3,3,4], the values 2 and 3 occur twice so both are the mode"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1604699609,"post_id":64722027,"comment_id":114436633,"body_markdown":"@Progman [Definition of Mode](https://www.mathsisfun.com/definitions/mode.html): The number which appears most often in a set of numbers.","body":"@Progman <a href=\"https://www.mathsisfun.com/definitions/mode.html\" rel=\"nofollow noreferrer\">Definition of Mode</a>: The number which appears most often in a set of numbers."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1604718718,"post_id":64722027,"comment_id":114440227,"body_markdown":"What problem are you having, detecting a second run with the same length, returning NaN, or something else?","body":"What problem are you having, detecting a second run with the same length, returning NaN, or something else?"}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604700331,"creation_date":1604700331,"answer_id":64722198,"question_id":64722027,"body_markdown":"The code in the question finds the same mode value multiple times. E.g. if `data = {1,2,3,3,4}`, when `i = 2` it will find `count = 2` for value `3`, and when `i = 3` it will again find `count = 2` for value `3`.\r\n\r\nTo recognize multiple *distinct* modes, the code needs to not find the same `mode` value more than once. This is easily achieved by changing the `j` loop to start at `i`, so that subsequent counting of a particular value ends up counting less.\r\n\r\nNow that the code will never see the same mode more than once, we can detect multimodal data by checking for `count == maxCount`. If that happens, change `maxValue`, aka the mode, to `NaN`.\r\n\r\nWe also need to initialize `maxValue` to `NaN` instead of `0`, so the result is `NaN` if `data` is an empty array.\r\n\r\n*Note:* This is not the most efficient implementation for finding mode, but it is the least amount of change to fix the code in the question.\r\n\r\n```lang-java\r\npublic static double mode(double... data) {\r\n\tdouble maxValue = Double.NaN;\r\n\tint maxCount = 0;\r\n\tfor (int i = 0; i &lt; data.length; ++i) {\r\n\t\tint count = 0;\r\n\t\tfor (int j = i; j &lt; data.length; ++j) {\r\n\t\t\tif (data[j] == data[i])\r\n\t\t\t\t++count;\r\n\t\t}\r\n\t\tif (count == maxCount) {\r\n\t\t\tmaxValue = Double.NaN;\r\n\t\t} else if (count &gt; maxCount) {\r\n\t\t\tmaxCount = count;\r\n\t\t\tmaxValue = data[i];\r\n\t\t}\r\n\t}\r\n\treturn maxValue;\r\n}\r\n```\r\n\r\n*Test*\r\n\r\n```lang-java\r\nSystem.out.println(mode(1,2,3,3,4));\r\nSystem.out.println(mode(1,2,2,3,3,4));\r\nSystem.out.println(mode(1));\r\nSystem.out.println(mode());\r\n```\r\n\r\n*Output*\r\n\r\n```lang-none\r\n3.0\r\nNaN\r\n1.0\r\nNaN\r\n```","title":"Program to recognize multiple modes","body":"<p>The code in the question finds the same mode value multiple times. E.g. if <code>data = {1,2,3,3,4}</code>, when <code>i = 2</code> it will find <code>count = 2</code> for value <code>3</code>, and when <code>i = 3</code> it will again find <code>count = 2</code> for value <code>3</code>.</p>\n<p>To recognize multiple <em>distinct</em> modes, the code needs to not find the same <code>mode</code> value more than once. This is easily achieved by changing the <code>j</code> loop to start at <code>i</code>, so that subsequent counting of a particular value ends up counting less.</p>\n<p>Now that the code will never see the same mode more than once, we can detect multimodal data by checking for <code>count == maxCount</code>. If that happens, change <code>maxValue</code>, aka the mode, to <code>NaN</code>.</p>\n<p>We also need to initialize <code>maxValue</code> to <code>NaN</code> instead of <code>0</code>, so the result is <code>NaN</code> if <code>data</code> is an empty array.</p>\n<p><em>Note:</em> This is not the most efficient implementation for finding mode, but it is the least amount of change to fix the code in the question.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static double mode(double... data) {\n    double maxValue = Double.NaN;\n    int maxCount = 0;\n    for (int i = 0; i &lt; data.length; ++i) {\n        int count = 0;\n        for (int j = i; j &lt; data.length; ++j) {\n            if (data[j] == data[i])\n                ++count;\n        }\n        if (count == maxCount) {\n            maxValue = Double.NaN;\n        } else if (count &gt; maxCount) {\n            maxCount = count;\n            maxValue = data[i];\n        }\n    }\n    return maxValue;\n}\n</code></pre>\n<p><em>Test</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(mode(1,2,3,3,4));\nSystem.out.println(mode(1,2,2,3,3,4));\nSystem.out.println(mode(1));\nSystem.out.println(mode());\n</code></pre>\n<p><em>Output</em></p>\n<pre class=\"lang-none prettyprint-override\"><code>3.0\nNaN\n1.0\nNaN\n</code></pre>\n"}],"owner":{"account_id":19916079,"reputation":13,"user_id":14593036,"display_name":"apll0"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1604725765,"answer_count":1,"score":-1,"last_activity_date":1675212386,"creation_date":1604699257,"question_id":64722027,"body_markdown":"I have this code that find the mode of an array. Ex: [1,2,3,3,4] the program will out put 3.0. However, in the case of [1,2,2,3,3,4] the program will output 2.0 because it comes first. I want the program to know that the values 2 and 3 show up twice and thus should return the value Double.NaN(which is what our professor wants). Any help is appreciated, thank you!\r\n\r\nP.S. We cannot use any import classes such as java.util.Arrays, etc.  \r\nThe input array is always sorted.\r\n\r\n    public double mode() {\r\n\r\n\t\tdouble maxValue = 0;\r\n\r\n\t\tint maxCount = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; data.length; ++i) {\r\n\r\n\t\t\tint count = 0;\r\n\r\n\t\t\tfor (int j = 0; j &lt; data.length; ++j) {\r\n\r\n\t\t\t\tif (data[j] == data[i])\r\n\r\n\t\t\t\t\t++count;\r\n\r\n\t\t\t} // End of for loop\r\n\r\n\t\t\tif (count &gt; maxCount) {\r\n\r\n\t\t\t\tmaxCount = count;\r\n\r\n\t\t\t\tmaxValue = data[i];\r\n\r\n\t\t\t} // End of if condition\r\n\r\n\t\t} // End of for loop\r\n\t\t\r\n\t\treturn maxValue;\r\n\r\n\t} // End of method\r\n\r\n","title":"Program to recognize multiple modes","body":"<p>I have this code that find the mode of an array. Ex: [1,2,3,3,4] the program will out put 3.0. However, in the case of [1,2,2,3,3,4] the program will output 2.0 because it comes first. I want the program to know that the values 2 and 3 show up twice and thus should return the value Double.NaN(which is what our professor wants). Any help is appreciated, thank you!</p>\n<p>P.S. We cannot use any import classes such as java.util.Arrays, etc.<br />\nThe input array is always sorted.</p>\n<pre><code>public double mode() {\n\n    double maxValue = 0;\n\n    int maxCount = 0;\n\n    for (int i = 0; i &lt; data.length; ++i) {\n\n        int count = 0;\n\n        for (int j = 0; j &lt; data.length; ++j) {\n\n            if (data[j] == data[i])\n\n                ++count;\n\n        } // End of for loop\n\n        if (count &gt; maxCount) {\n\n            maxCount = count;\n\n            maxValue = data[i];\n\n        } // End of if condition\n\n    } // End of for loop\n    \n    return maxValue;\n\n} // End of method\n</code></pre>\n"},{"tags":["java","android","graphics","android-drawable"],"owner":{"account_id":19598741,"reputation":1,"user_id":20757377,"display_name":"Yaroslav Zhuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675211720,"creation_date":1675210954,"question_id":75304478,"body_markdown":"I&#39;m not familiar with android.graphic, but I have to edit following code in my app. What I get is comic-like cloud, dialog with a tail in bottom-right corner. This tail should be removed and replaced with rounded corner. \r\n```\r\npath.moveTo(bounds.right&#160;-&#160;dp(2.6f),&#160;bounds.bottom&#160;-&#160;padding);\r\npath.lineTo(bounds.left&#160;+&#160;padding&#160;+&#160;rad,&#160;bounds.bottom&#160;-&#160;padding);  rect.set(bounds.left&#160;+&#160;padding,&#160;bounds.bottom&#160;-&#160;padding&#160;-&#160;rad&#160;*&#160;2,&#160;bounds.left&#160;+&#160;padding&#160;+&#160;rad&#160;*&#160;2,&#160;bounds.bottom&#160;-&#160;padding); \r\npath.arcTo(rect,&#160;90,&#160;90,&#160;false);\r\npath.lineTo(bounds.left&#160;+&#160;padding,&#160;bounds.top&#160;+&#160;padding&#160;+&#160;rad);  rect.set(bounds.left&#160;+&#160;padding,&#160;bounds.top&#160;+&#160;padding,&#160;bounds.left&#160;+&#160;padding&#160;+&#160;rad&#160;*&#160;2,&#160;bounds.top&#160;+&#160;padding&#160;+&#160;rad&#160;*&#160;2); \r\npath.arcTo(rect,&#160;180,&#160;90,&#160;false); \r\nint&#160;radToUse&#160;=&#160;isTopNear&#160;?&#160;nearRad&#160;:&#160;rad;\r\npath.lineTo(bounds.right&#160;-&#160;dp(8)&#160;-&#160;radToUse,&#160;bounds.top&#160;+&#160;padding); \r\nrect.set(bounds.right&#160;-&#160;dp(8)&#160;-&#160;radToUse&#160;*&#160;2,&#160;bounds.top&#160;+&#160;padding,&#160;bounds.right&#160;-&#160;dp(8),&#160;bounds.top&#160;+&#160;padding&#160;+&#160;radToUse&#160;*&#160;2);\r\npath.arcTo(rect,&#160;270,&#160;90,&#160;false);\r\npath.lineTo(bounds.right&#160;-&#160;padding,&#160;top&#160;-&#160;topY&#160;+&#160;currentBackgroundHeight);\r\n```\r\nPaddind is 2F,\r\nSmall rad is 6F,\r\nRad can be in range of 1F to 17F.\r\n\r\nI tried to remove three lines, responsible for this corner, but drawable becomes destroyed.\r\n","title":"How to create a right drawable with path class","body":"<p>I'm not familiar with android.graphic, but I have to edit following code in my app. What I get is comic-like cloud, dialog with a tail in bottom-right corner. This tail should be removed and replaced with rounded corner.</p>\n<pre><code>path.moveTo(bounds.right-dp(2.6f),bounds.bottom-padding);\npath.lineTo(bounds.left+padding+rad,bounds.bottom-padding);  rect.set(bounds.left+padding,bounds.bottom-padding-rad*2,bounds.left+padding+rad*2,bounds.bottom-padding); \npath.arcTo(rect,90,90,false);\npath.lineTo(bounds.left+padding,bounds.top+padding+rad);  rect.set(bounds.left+padding,bounds.top+padding,bounds.left+padding+rad*2,bounds.top+padding+rad*2); \npath.arcTo(rect,180,90,false); \nintradToUse=isTopNear?nearRad:rad;\npath.lineTo(bounds.right-dp(8)-radToUse,bounds.top+padding); \nrect.set(bounds.right-dp(8)-radToUse*2,bounds.top+padding,bounds.right-dp(8),bounds.top+padding+radToUse*2);\npath.arcTo(rect,270,90,false);\npath.lineTo(bounds.right-padding,top-topY+currentBackgroundHeight);\n</code></pre>\n<p>Paddind is 2F,\nSmall rad is 6F,\nRad can be in range of 1F to 17F.</p>\n<p>I tried to remove three lines, responsible for this corner, but drawable becomes destroyed.</p>\n"},{"tags":["java","azure","azure-keyvault","azure-ad-msal","azure-security"],"answers":[{"comments":[{"owner":{"account_id":7876611,"reputation":77,"user_id":5952188,"display_name":"Xtonic Chen"},"score":0,"creation_date":1675241533,"post_id":75304448,"comment_id":132883925,"body_markdown":"I have the certificate, but it was stored in Key Vault. My problem is how could I turn the certificate (and key) from Azure Key Vault into the type which confidential client application is expected?\n\nThe tricky part is the private key. It is stored as a secret (not key) in key vault. It is in x-application/pkcs12 format. How can I turn it into java.security.PrivateKey?","body":"I have the certificate, but it was stored in Key Vault. My problem is how could I turn the certificate (and key) from Azure Key Vault into the type which confidential client application is expected?  The tricky part is the private key. It is stored as a secret (not key) in key vault. It is in x-application/pkcs12 format. How can I turn it into java.security.PrivateKey?"}],"tags":[],"owner":{"account_id":1035119,"reputation":1104,"user_id":1042624,"accept_rate":74,"display_name":"Niclas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675210644,"creation_date":1675210644,"answer_id":75304448,"question_id":75239636,"body_markdown":"Are you sure it is supported? As far as I know certificated-based authentication is not supported.\r\nMSAL uses either public clients or confidential clients.\r\n\r\n - https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios#daemon-app-that-calls-a-web-api-in-the-daemons-name\r\n - https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications\r\n\r\nHowever, I did find this on their wiki:  https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Client-Credentials\r\n\r\nThere are two types of client secrets in MSAL4J:\r\n- Application Secrets\r\n- Certificates\r\n\r\nYou need to instantiate a confidential client application; if you have a certificate:\r\n\r\n    String PUBLIC_CLIENT_ID;\r\n    String AUTHORITY;\r\n    PrivateKey PRIVATE_KEY;  \r\n    X509Certificate PUBLIC_KEY;\r\n    \r\n    IClientCredential credential = ClientCredentialFactory.createFromCertificate(PRIVATE_KEY, PUBLIC_KEY);\r\n    ConfidentialClientApplication app = \r\n        ConfidentialClientApplication\r\n            .builder(PUBLIC_CLIENT_ID, credential)\r\n            .authority(AUTHORITY)\r\n            .build();\r\n\r\nThen acquire a token:  https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Acquiring-Tokens#confidential-client-applications\r\n\r\nhttps://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/src/client/ConfidentialClientApplication.ts  \r\nYou would need to use: `acquireTokenByClientCredential`\r\nhttps://azuread.github.io/microsoft-authentication-library-for-js/ref/classes/_azure_msal_node.confidentialclientapplication.html#acquiretokenbyclientcredential   \r\n\r\n\r\nAlso see:  \r\n- https://github.com/AzureAD/microsoft-authentication-library-for-java/blob/dev/msal4j-sdk/src/integrationtest/java/com.microsoft.aad.msal4j/CertificateHelper.java\r\n- https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code\r\n- https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow","title":"How can I make MSAL4J and azure-security-keyvault-* work together?","body":"<p>Are you sure it is supported? As far as I know certificated-based authentication is not supported.\nMSAL uses either public clients or confidential clients.</p>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios#daemon-app-that-calls-a-web-api-in-the-daemons-name\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios#daemon-app-that-calls-a-web-api-in-the-daemons-name</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications</a></li>\n</ul>\n<p>However, I did find this on their wiki:  <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Client-Credentials\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Client-Credentials</a></p>\n<p>There are two types of client secrets in MSAL4J:</p>\n<ul>\n<li>Application Secrets</li>\n<li>Certificates</li>\n</ul>\n<p>You need to instantiate a confidential client application; if you have a certificate:</p>\n<pre><code>String PUBLIC_CLIENT_ID;\nString AUTHORITY;\nPrivateKey PRIVATE_KEY;  \nX509Certificate PUBLIC_KEY;\n\nIClientCredential credential = ClientCredentialFactory.createFromCertificate(PRIVATE_KEY, PUBLIC_KEY);\nConfidentialClientApplication app = \n    ConfidentialClientApplication\n        .builder(PUBLIC_CLIENT_ID, credential)\n        .authority(AUTHORITY)\n        .build();\n</code></pre>\n<p>Then acquire a token:  <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Acquiring-Tokens#confidential-client-applications\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Acquiring-Tokens#confidential-client-applications</a></p>\n<p><a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/src/client/ConfidentialClientApplication.ts\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/src/client/ConfidentialClientApplication.ts</a><br />\nYou would need to use: <code>acquireTokenByClientCredential</code>\n<a href=\"https://azuread.github.io/microsoft-authentication-library-for-js/ref/classes/_azure_msal_node.confidentialclientapplication.html#acquiretokenbyclientcredential\" rel=\"nofollow noreferrer\">https://azuread.github.io/microsoft-authentication-library-for-js/ref/classes/_azure_msal_node.confidentialclientapplication.html#acquiretokenbyclientcredential</a></p>\n<p>Also see:</p>\n<ul>\n<li><a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-java/blob/dev/msal4j-sdk/src/integrationtest/java/com.microsoft.aad.msal4j/CertificateHelper.java\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-java/blob/dev/msal4j-sdk/src/integrationtest/java/com.microsoft.aad.msal4j/CertificateHelper.java</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow</a></li>\n</ul>\n"}],"owner":{"account_id":7876611,"reputation":77,"user_id":5952188,"display_name":"Xtonic Chen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675210644,"creation_date":1674679405,"question_id":75239636,"body_markdown":"I would like to authenticate with MSAL4J and the certificate stored in Azure Key Vault (AKV). The certificate is a self-signed Azure Key Vault certificate.\r\n\r\nI could find an example based on a certificate and key stored locally (file system) but not a certificate created and stored in AKV. How to use the certificate, key, and secret objects obtained from `azure-security-keyvault-*` with MSAL4J?\r\n\r\n1.\tThe key from `azure-security-keyvault-keys` is `com.azure.security.keyvault.keys.models.KeyVaultKey`, but MSAL4J expects `java.security.PrivateKey`.\r\n1.\tHow to apply the secret obtained from `azure-security-keyvault-secrets` to decrypt the private key?\r\n","title":"How can I make MSAL4J and azure-security-keyvault-* work together?","body":"<p>I would like to authenticate with MSAL4J and the certificate stored in Azure Key Vault (AKV). The certificate is a self-signed Azure Key Vault certificate.</p>\n<p>I could find an example based on a certificate and key stored locally (file system) but not a certificate created and stored in AKV. How to use the certificate, key, and secret objects obtained from <code>azure-security-keyvault-*</code> with MSAL4J?</p>\n<ol>\n<li>The key from <code>azure-security-keyvault-keys</code> is <code>com.azure.security.keyvault.keys.models.KeyVaultKey</code>, but MSAL4J expects <code>java.security.PrivateKey</code>.</li>\n<li>How to apply the secret obtained from <code>azure-security-keyvault-secrets</code> to decrypt the private key?</li>\n</ol>\n"},{"tags":["java","excel","eclipse","apache-poi"],"comments":[{"owner":{"account_id":14380012,"reputation":333,"user_id":10387506,"display_name":"Dolunaykiz"},"score":0,"creation_date":1675181904,"post_id":75299858,"comment_id":132871463,"body_markdown":"Are you writing the file to OneDrive or SharePoint? That is, is the mapped drive you are listing as &quot;D&quot; a local drive or one mapped from OneDrive/SharePoint?","body":"Are you writing the file to OneDrive or SharePoint? That is, is the mapped drive you are listing as &quot;D&quot; a local drive or one mapped from OneDrive/SharePoint?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1675193750,"post_id":75299858,"comment_id":132874984,"body_markdown":"Can you describe a bit more what you mean by &quot;_the switch to an SSH MySQL connection_&quot; here? Your code shown in the question works OK for me - but there is nothing to indicate that this code is using SSH in any way. It looks like a standard TCP/IP connection URL to me (except on port 3307 instead of 3306). How have you set up that SSH tunnel, and how are you using it in your Java code?","body":"Can you describe a bit more what you mean by &quot;<i>the switch to an SSH MySQL connection</i>&quot; here? Your code shown in the question works OK for me - but there is nothing to indicate that this code is using SSH in any way. It looks like a standard TCP/IP connection URL to me (except on port 3307 instead of 3306). How have you set up that SSH tunnel, and how are you using it in your Java code?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675202388,"post_id":75299858,"comment_id":132877287,"body_markdown":"Just as an experiment, I opened my own SSH tunnel to a remote MySQL server (using OpenSSH on Windows as the client). I used your code (different SQL of course) - and my Excel file opened correctly. I am not able to recreate your issue, unfortunately. Maybe as well as showing the SSH details, you can share all the versions you are using (Java, MySQL, the JDBC driver, POI).","body":"Just as an experiment, I opened my own SSH tunnel to a remote MySQL server (using OpenSSH on Windows as the client). I used your code (different SQL of course) - and my Excel file opened correctly. I am not able to recreate your issue, unfortunately. Maybe as well as showing the SSH details, you can share all the versions you are using (Java, MySQL, the JDBC driver, POI)."},{"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"score":0,"creation_date":1675210665,"post_id":75299858,"comment_id":132878964,"body_markdown":"AndrewJames thanks for weighing in.  Can you tell me the versions of your POI jar files, etc.?","body":"AndrewJames thanks for weighing in.  Can you tell me the versions of your POI jar files, etc.?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675212489,"post_id":75299858,"comment_id":132879246,"body_markdown":"Your Java SSH code works OK for me - it still allows me to generate a valid Excel file. I am using Java 17, POI 5.2.3, MySQL connector 8.0.32 (and MySQL 8), JSch 0.1.55. (You don&#39;t need `Class.forName(driverName)` these days - but that is not related to your POI problem). Sorry, I am unable to recreate the problem. Maybe write the SQL result data to a text file - both with the tunnel and without it (if you say adding the tunnel caused the problems to start appearing). That way, you can narrow down things.","body":"Your Java SSH code works OK for me - it still allows me to generate a valid Excel file. I am using Java 17, POI 5.2.3, MySQL connector 8.0.32 (and MySQL 8), JSch 0.1.55. (You don&#39;t need <code>Class.forName(driverName)</code> these days - but that is not related to your POI problem). Sorry, I am unable to recreate the problem. Maybe write the SQL result data to a text file - both with the tunnel and without it (if you say adding the tunnel caused the problems to start appearing). That way, you can narrow down things."},{"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"score":0,"creation_date":1675215599,"post_id":75299858,"comment_id":132879640,"body_markdown":"Thanks a ton AndrewJames.  I will follow your guidance and get back on here with the results.  I appreciate your help!","body":"Thanks a ton AndrewJames.  I will follow your guidance and get back on here with the results.  I appreciate your help!"},{"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"score":0,"creation_date":1675216160,"post_id":75299858,"comment_id":132879723,"body_markdown":"By the way, I went to the build properties and see that I am using JRE -  JavaSE-1.8\nI&#39;m wondering if that would be related...","body":"By the way, I went to the build properties and see that I am using JRE -  JavaSE-1.8 I&#39;m wondering if that would be related..."}],"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675210428,"creation_date":1675181049,"question_id":75299858,"body_markdown":"I run the following class to generate an Excel spreadsheet that will contain the results of my SQL query.  Each time the file is generated, there is an error message when you try to open it up, &quot;Excel cannot open the file because the file format or file extension is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.  \r\n\r\nI am at the end of my abilities with respect to troubleshooting this as I have used this type of code successfully and have noticed this error arising after the switch to an SSH MySQL connection versus a straight 3306 connection previously.  There are no error messages in the console.\r\n\r\n    package process;\r\n\t\r\n    import java.sql.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import java.io.*;\r\n\r\n\r\n\tpublic class WriteMySQLToExcel {\r\n\t   public static void main(String[] args) throws SQLException, IOException {\r\n\r\n\t         Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3307/wp_dashort&quot;, &quot;dashort&quot;, &quot;gt9wkk6r1TPnkgrY&quot;);\r\n\t         \r\n\t         String mark_complete = &quot;SELECT DISTINCT wpgc.user_id, wpgc.timestamp\\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;FROM wp_grassblade_completions as wpgc \\r\\n&quot; + &quot;  INNER JOIN \\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;  wp_usermeta ON wpgc.user_id = wp_usermeta.user_id\\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;  WHERE wpgc.user_id NOT IN (SELECT atc_reporting.user_id FROM atc_reporting WHERE course = &#39;SECURITY&#39;) AND wpgc.timestamp BETWEEN (CURRENT_DATE -INTERVAL 30 DAY) AND DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY) AND content_id IN (1575, 642, 1580) \\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;GROUP BY wpgc.user_id\\r\\n&quot; + &quot;order BY wpgc.timestamp, wp_usermeta.user_id&quot;;\r\n\t         \r\n\t         Statement stmt = conn.createStatement();\r\n\t         ResultSet rs = stmt.executeQuery(mark_complete);\r\n\t         \r\n\t         XSSFWorkbook workbook = new XSSFWorkbook();\r\n\t         XSSFSheet sheet = workbook.createSheet(&quot;Query Results&quot;);\r\n\t         // Create header row\r\n\t         XSSFRow headerRow = sheet.createRow(0);\r\n\t         for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\r\n\t           headerRow.createCell(i - 1).setCellValue(rs.getMetaData().getColumnName(i));\r\n\t         }\r\n\r\n\t         int rowNum = 1;\r\n\t         while (rs.next()) {\r\n\t           XSSFRow row = sheet.createRow(rowNum++);\r\n\t           for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\r\n\t             row.createCell(i - 1).setCellValue(rs.getString(i));\r\n\t           }\r\n\t         }\r\n\t  \r\n\t         FileOutputStream fileOut = new FileOutputStream(&quot;D://testexpdata.xlsx&quot;);\r\n\t         workbook.write(fileOut);\r\n\t         fileOut.close();\r\n\t         workbook.close();\r\n\t         \r\n\t         rs.close();\r\n\t         stmt.close();\r\n\t         conn.close();\r\n\t      }\r\n\t   }\r\n\r\nCode to connect through SSH follows:\r\n\r\n\r\n    public class SQLConnection {\r\n\tprivate static Connection connection = null;\r\n    private static Session session = null;\r\n\r\n    private static void connectToServer(String dataBaseName) throws SQLException {\r\n        dataBaseName=&quot;wp_dashort&quot;;\r\n        connectSSH();\r\n        connectToDataBase(dataBaseName);\r\n    \r\n    }\r\n\r\n    static void connectSSH() throws SQLException {\r\n        String sshHost = &quot;shortguy.ssh.wpengine.net&quot;;\r\n        String sshuser = &quot;shortguy&quot;;\r\n        String dbuserName = &quot;shortguy&quot;;\r\n        String dbpassword = &quot;gt9wgrYpassword&quot;;\r\n        String SshKeyFilepath = &quot;c://users//ed25519eclipse&quot;;\r\n\r\n        int localPort = 3307; // any free port can be used\r\n        String remoteHost = &quot;127.0.0.1&quot;;\r\n        int remotePort = 3306;\r\n        String localSSHUrl = &quot;localhost&quot;;\r\n        /***************/\r\n        String driverName = &quot;com.mysql.cj.jdbc.Driver&quot;;\r\n\r\n        try {\r\n            java.util.Properties config = new java.util.Properties();\r\n            JSch jsch = new JSch();\r\n            session = jsch.getSession(sshuser, sshHost, 22);\r\n            jsch.addIdentity(SshKeyFilepath);\r\n            config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n            config.put(&quot;ConnectionAttempts&quot;, &quot;3&quot;);\r\n            session.setConfig(config);\r\n            session.connect();\r\n\r\n            System.out.println(&quot;SSH Connected&quot;);\r\n\r\n            Class.forName(driverName).newInstance();\r\n\r\n            int assinged_port = session.setPortForwardingL(localPort, remoteHost, remotePort);\r\n\r\n            System.out.println(&quot;localhost:&quot; + assinged_port + &quot; -&gt; &quot; + remoteHost + &quot;:&quot; + remotePort);\r\n            System.out.println(&quot;Port Forwarded&quot;);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    POI 5.2.3 \r\n    Apache Maven  3.8.7\r\n    MySQL Connector  8.0.32\r\n    XMLBeans 5.1.1\r\n\r\nI put the versions at the bottom of the code block above.\r\n\r\nThanks again!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Corrupted Excel workbook after POI write from SQL results","body":"<p>I run the following class to generate an Excel spreadsheet that will contain the results of my SQL query.  Each time the file is generated, there is an error message when you try to open it up, &quot;Excel cannot open the file because the file format or file extension is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.</p>\n<p>I am at the end of my abilities with respect to troubleshooting this as I have used this type of code successfully and have noticed this error arising after the switch to an SSH MySQL connection versus a straight 3306 connection previously.  There are no error messages in the console.</p>\n<pre><code>package process;\n\nimport java.sql.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.xssf.usermodel.*;\nimport java.io.*;\n\n\npublic class WriteMySQLToExcel {\n   public static void main(String[] args) throws SQLException, IOException {\n\n         Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3307/wp_dashort&quot;, &quot;dashort&quot;, &quot;gt9wkk6r1TPnkgrY&quot;);\n         \n         String mark_complete = &quot;SELECT DISTINCT wpgc.user_id, wpgc.timestamp\\r\\n&quot;\n                    + &quot;FROM wp_grassblade_completions as wpgc \\r\\n&quot; + &quot;  INNER JOIN \\r\\n&quot;\n                    + &quot;  wp_usermeta ON wpgc.user_id = wp_usermeta.user_id\\r\\n&quot;\n                    + &quot;  WHERE wpgc.user_id NOT IN (SELECT atc_reporting.user_id FROM atc_reporting WHERE course = 'SECURITY') AND wpgc.timestamp BETWEEN (CURRENT_DATE -INTERVAL 30 DAY) AND DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY) AND content_id IN (1575, 642, 1580) \\r\\n&quot;\n                    + &quot;GROUP BY wpgc.user_id\\r\\n&quot; + &quot;order BY wpgc.timestamp, wp_usermeta.user_id&quot;;\n         \n         Statement stmt = conn.createStatement();\n         ResultSet rs = stmt.executeQuery(mark_complete);\n         \n         XSSFWorkbook workbook = new XSSFWorkbook();\n         XSSFSheet sheet = workbook.createSheet(&quot;Query Results&quot;);\n         // Create header row\n         XSSFRow headerRow = sheet.createRow(0);\n         for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\n           headerRow.createCell(i - 1).setCellValue(rs.getMetaData().getColumnName(i));\n         }\n\n         int rowNum = 1;\n         while (rs.next()) {\n           XSSFRow row = sheet.createRow(rowNum++);\n           for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\n             row.createCell(i - 1).setCellValue(rs.getString(i));\n           }\n         }\n  \n         FileOutputStream fileOut = new FileOutputStream(&quot;D://testexpdata.xlsx&quot;);\n         workbook.write(fileOut);\n         fileOut.close();\n         workbook.close();\n         \n         rs.close();\n         stmt.close();\n         conn.close();\n      }\n   }\n</code></pre>\n<p>Code to connect through SSH follows:</p>\n<pre><code>public class SQLConnection {\nprivate static Connection connection = null;\nprivate static Session session = null;\n\nprivate static void connectToServer(String dataBaseName) throws SQLException {\n    dataBaseName=&quot;wp_dashort&quot;;\n    connectSSH();\n    connectToDataBase(dataBaseName);\n\n}\n\nstatic void connectSSH() throws SQLException {\n    String sshHost = &quot;shortguy.ssh.wpengine.net&quot;;\n    String sshuser = &quot;shortguy&quot;;\n    String dbuserName = &quot;shortguy&quot;;\n    String dbpassword = &quot;gt9wgrYpassword&quot;;\n    String SshKeyFilepath = &quot;c://users//ed25519eclipse&quot;;\n\n    int localPort = 3307; // any free port can be used\n    String remoteHost = &quot;127.0.0.1&quot;;\n    int remotePort = 3306;\n    String localSSHUrl = &quot;localhost&quot;;\n    /***************/\n    String driverName = &quot;com.mysql.cj.jdbc.Driver&quot;;\n\n    try {\n        java.util.Properties config = new java.util.Properties();\n        JSch jsch = new JSch();\n        session = jsch.getSession(sshuser, sshHost, 22);\n        jsch.addIdentity(SshKeyFilepath);\n        config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        config.put(&quot;ConnectionAttempts&quot;, &quot;3&quot;);\n        session.setConfig(config);\n        session.connect();\n\n        System.out.println(&quot;SSH Connected&quot;);\n\n        Class.forName(driverName).newInstance();\n\n        int assinged_port = session.setPortForwardingL(localPort, remoteHost, remotePort);\n\n        System.out.println(&quot;localhost:&quot; + assinged_port + &quot; -&gt; &quot; + remoteHost + &quot;:&quot; + remotePort);\n        System.out.println(&quot;Port Forwarded&quot;);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\n\n\n\nPOI 5.2.3 \nApache Maven  3.8.7\nMySQL Connector  8.0.32\nXMLBeans 5.1.1\n</code></pre>\n<p>I put the versions at the bottom of the code block above.</p>\n<p>Thanks again!</p>\n"},{"tags":["java","optimization","compilation","bytecode"],"comments":[{"owner":{"account_id":5809836,"reputation":33195,"user_id":4581301,"display_name":"user4581301"},"score":1,"creation_date":1675200614,"post_id":75303288,"comment_id":132876828,"body_markdown":"Unrelated: Amazing what a difference a few compiler versions can make: https://godbolt.org/z/z55x5M13P","body":"Unrelated: Amazing what a difference a few compiler versions can make: <a href=\"https://godbolt.org/z/z55x5M13P\" rel=\"nofollow noreferrer\">godbolt.org/z/z55x5M13P</a>"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1675200831,"post_id":75303288,"comment_id":132876886,"body_markdown":"@user4581301 That has nothing to do with the compiler version. GCC 9.4 produces the exact same output. It only calls the functions if they are not defined in the same compilation unit.","body":"@user4581301 That has nothing to do with the compiler version. GCC 9.4 produces the exact same output. It only calls the functions if they are not defined in the same compilation unit."},{"owner":{"account_id":5809836,"reputation":33195,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1675200900,"post_id":75303288,"comment_id":132876900,"body_markdown":"A fair point. Remove the ability to see what `A` and friends do and the output is identical. [Well, almost identical](https://godbolt.org/z/WT5f8j3P9). Good enough for me.","body":"A fair point. Remove the ability to see what <code>A</code> and friends do and the output is identical. <a href=\"https://godbolt.org/z/WT5f8j3P9\" rel=\"nofollow noreferrer\">Well, almost identical</a>. Good enough for me."}],"answers":[{"comments":[{"owner":{"account_id":6009424,"reputation":1164,"user_id":4720292,"accept_rate":86,"display_name":"Pierre"},"score":0,"creation_date":1675201215,"post_id":75303375,"comment_id":132876967,"body_markdown":"Absolutely, but my point was on &quot;what is happening with Java&quot; more that the comparison between both languges :)","body":"Absolutely, but my point was on &quot;what is happening with Java&quot; more that the comparison between both languges :)"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":3,"creation_date":1675201358,"post_id":75303375,"comment_id":132877006,"body_markdown":"What you are missing are all the optimization steps performed by the JIT. But you compare to an already-optimized C++ output.","body":"What you are missing are all the optimization steps performed by the JIT. But you compare to an already-optimized C++ output."}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675200884,"creation_date":1675200884,"answer_id":75303375,"question_id":75303288,"body_markdown":"You are likely comparing apples and oranges.\r\n\r\nWhile the C++ compiler produces machine code, the java compiler produces bytecode to run on a virtual machine. The virtual machine either interprets it or uses a just-in-time compiler to transfer it into machine language.\r\n\r\nI doubt you used the JIT and looked at the produced machine code.","title":"Should I stop using local variables in Java?","body":"<p>You are likely comparing apples and oranges.</p>\n<p>While the C++ compiler produces machine code, the java compiler produces bytecode to run on a virtual machine. The virtual machine either interprets it or uses a just-in-time compiler to transfer it into machine language.</p>\n<p>I doubt you used the JIT and looked at the produced machine code.</p>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1675201676,"post_id":75303440,"comment_id":132877080,"body_markdown":"There used to be server and client HotSpot engines, tweaked for fast throughput on servers and fast startup times on clients. Do they still exist?","body":"There used to be server and client HotSpot engines, tweaked for fast throughput on servers and fast startup times on clients. Do they still exist?"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1675210231,"post_id":75303440,"comment_id":132878886,"body_markdown":"For JVMs as per the letter of that word, no. However, if you squint your eyes a bit, android is a client-oriented JVM engine. GraalVM is a trick to get fast startup times, and the more modular nature of modern JVMs (including jlink to &#39;treeshake&#39; the JVM down even further) is the answer. However, almost nobody uses these tools: Java is rarely used in places where &#39;startup&#39; time matters. When your average major software vendor ships desktop apps __in electron__, I think we can safely conclude the world at large stopped caring.","body":"For JVMs as per the letter of that word, no. However, if you squint your eyes a bit, android is a client-oriented JVM engine. GraalVM is a trick to get fast startup times, and the more modular nature of modern JVMs (including jlink to &#39;treeshake&#39; the JVM down even further) is the answer. However, almost nobody uses these tools: Java is rarely used in places where &#39;startup&#39; time matters. When your average major software vendor ships desktop apps <b>in electron</b>, I think we can safely conclude the world at large stopped caring."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1675253019,"post_id":75303440,"comment_id":132887519,"body_markdown":"@Queeg the separation between client and server has become obsolete, as both converged to the same implementation that will only differ in the defaults for some configuration options. E.g., how long the JVM will wait before compiling a method.","body":"@Queeg the separation between client and server has become obsolete, as both converged to the same implementation that will only differ in the defaults for some configuration options. E.g., how long the JVM will wait before compiling a method."},{"owner":{"account_id":6009424,"reputation":1164,"user_id":4720292,"accept_rate":86,"display_name":"Pierre"},"score":0,"creation_date":1675259884,"post_id":75303440,"comment_id":132889861,"body_markdown":"@rzwitserloot thanks for your detailed answer :) \nDo you know some articles/book/etc. that explains this in a deeper way ?","body":"@rzwitserloot thanks for your detailed answer :)  Do you know some articles/book/etc. that explains this in a deeper way ?"}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1675210112,"creation_date":1675201329,"answer_id":75303440,"question_id":75303288,"body_markdown":"No. The detail you&#39;re missing is _where the optimisation happens_.\r\n\r\nIn C-land, the application that reads in your source code (`gcc` for example) is the one that does most of the optimization (though more and more is done by the CPU itself, in its pipeline and microcode translation engines - not that there&#39;s a heck of a lot you can do to affect this as a programmer). Hence, it&#39;s that application (`gcc`) that has an `-o` (optimization level) option, and that is the application that potentially is going to churn through a ton of CPU cycles analysing your code to death.\r\n\r\nIn java-land, __that is not how it works__. `javac` is on rails: The spec decrees exactly what it should generate, pretty much down to the byte - in contrast to C-land where the spec is stacked to the gills with &#39;mays&#39; and &#39;coulds&#39; - compilers have a ton of leeway, notably including the bit width of your basic &#39;word&#39;, whereas java locks all of that down in spec, regardless of the bit-width of the CPU architecture you end up running on.\r\n\r\nThe optimization is done by `java.exe` - the runtime. And its approach is, as a rule, more efficient than C can ever be, because unlike C, the runtime gets the benefit of being able to check &#39;live behaviour&#39;, not something a C compiler can do (that&#39;s why C compilers tend to have a lot of &#39;hinting&#39; systems, where you can inform the compiler about what you suspect the runtime behaviour is likely to be).\r\n\r\nAll modern JVMs work by running code inefficiently (that seemingly inefficient code that javac produced, which you notices with `javap -v`), and in fact run it even more inefficiently than that, as the JVM will add a bunch of hooks to add bookkeeping. For example, the JVM will track how often a method is invoked, how long it takes to run, and for example, for each `if`, counts of how often each branch is taken. All making it run even slower.\r\n\r\nThe JVM does this, because for 99% (literally) of all programs out there, about 99% (again, literally, not an exaggeration) of CPU/memory is &#39;spent&#39; on less than 1% of the code, but the trick is, trying to predict which 1% that is. With all that bookkeeping, java will know, and will then analyse the bytecode of that 1%, __and gets to use the runtime behaviour observed so far due to all that bookkeeping__, to come up with fine-tuned machine code. This means java gets to write code that branch predicts (ensures the machine code does not have to jump around for most often taken branch path), except it&#39;s not a prediction: `java.exe` __knows__ which one is the &#39;most often taken path&#39;. Vs `gcc` which has to guess, optionally assisted by the programmer with branch hints in the source file.\r\n\r\nThat&#39;s just one of thousands of places where `java.exe` can apply machine code optimization.\r\n\r\nThat still means ~99% of the code runs very inefficiently. But, given that this takes less than 1% of CPU/memory, it just doesn&#39;t matter.\r\n\r\nJava is slower than C due to various factors, but &#39;optimizing instructions&#39; is not one of them:\r\n\r\n* Java cannot use architecture-specific features that affect the underlying language model, such as 80-bit width variables in what used to be the coprocessor. Project Valhalla is trying to fix that.\r\n* More generally java has a hard time interfacing directly with arch/OS-local low-level API.\r\n* That bookkeeping, and the garbage collector, tend to have &#39;ramp up time&#39;. They start off slow and become faster over time. Vs. C code which pretty much springs into existence running as fast as it ever will.\r\n\r\nNaturally then, java is neither popular nor a good idea for simple command line one-off tools like `ls` or `/bin/true`. Java is fantastic at performance when writing, say, a web request responder. Those run for a long time and that hotspot process really helps there.","title":"Should I stop using local variables in Java?","body":"<p>No. The detail you're missing is <em>where the optimisation happens</em>.</p>\n<p>In C-land, the application that reads in your source code (<code>gcc</code> for example) is the one that does most of the optimization (though more and more is done by the CPU itself, in its pipeline and microcode translation engines - not that there's a heck of a lot you can do to affect this as a programmer). Hence, it's that application (<code>gcc</code>) that has an <code>-o</code> (optimization level) option, and that is the application that potentially is going to churn through a ton of CPU cycles analysing your code to death.</p>\n<p>In java-land, <strong>that is not how it works</strong>. <code>javac</code> is on rails: The spec decrees exactly what it should generate, pretty much down to the byte - in contrast to C-land where the spec is stacked to the gills with 'mays' and 'coulds' - compilers have a ton of leeway, notably including the bit width of your basic 'word', whereas java locks all of that down in spec, regardless of the bit-width of the CPU architecture you end up running on.</p>\n<p>The optimization is done by <code>java.exe</code> - the runtime. And its approach is, as a rule, more efficient than C can ever be, because unlike C, the runtime gets the benefit of being able to check 'live behaviour', not something a C compiler can do (that's why C compilers tend to have a lot of 'hinting' systems, where you can inform the compiler about what you suspect the runtime behaviour is likely to be).</p>\n<p>All modern JVMs work by running code inefficiently (that seemingly inefficient code that javac produced, which you notices with <code>javap -v</code>), and in fact run it even more inefficiently than that, as the JVM will add a bunch of hooks to add bookkeeping. For example, the JVM will track how often a method is invoked, how long it takes to run, and for example, for each <code>if</code>, counts of how often each branch is taken. All making it run even slower.</p>\n<p>The JVM does this, because for 99% (literally) of all programs out there, about 99% (again, literally, not an exaggeration) of CPU/memory is 'spent' on less than 1% of the code, but the trick is, trying to predict which 1% that is. With all that bookkeeping, java will know, and will then analyse the bytecode of that 1%, <strong>and gets to use the runtime behaviour observed so far due to all that bookkeeping</strong>, to come up with fine-tuned machine code. This means java gets to write code that branch predicts (ensures the machine code does not have to jump around for most often taken branch path), except it's not a prediction: <code>java.exe</code> <strong>knows</strong> which one is the 'most often taken path'. Vs <code>gcc</code> which has to guess, optionally assisted by the programmer with branch hints in the source file.</p>\n<p>That's just one of thousands of places where <code>java.exe</code> can apply machine code optimization.</p>\n<p>That still means ~99% of the code runs very inefficiently. But, given that this takes less than 1% of CPU/memory, it just doesn't matter.</p>\n<p>Java is slower than C due to various factors, but 'optimizing instructions' is not one of them:</p>\n<ul>\n<li>Java cannot use architecture-specific features that affect the underlying language model, such as 80-bit width variables in what used to be the coprocessor. Project Valhalla is trying to fix that.</li>\n<li>More generally java has a hard time interfacing directly with arch/OS-local low-level API.</li>\n<li>That bookkeeping, and the garbage collector, tend to have 'ramp up time'. They start off slow and become faster over time. Vs. C code which pretty much springs into existence running as fast as it ever will.</li>\n</ul>\n<p>Naturally then, java is neither popular nor a good idea for simple command line one-off tools like <code>ls</code> or <code>/bin/true</code>. Java is fantastic at performance when writing, say, a web request responder. Those run for a long time and that hotspot process really helps there.</p>\n"}],"owner":{"account_id":6009424,"reputation":1164,"user_id":4720292,"accept_rate":86,"display_name":"Pierre"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75303440,"answer_count":2,"score":1,"last_activity_date":1675210112,"creation_date":1675200159,"question_id":75303288,"body_markdown":"I have these 2 codes in Java and C++, which are supposed to do the same thing.\r\n\r\nMy intuition was that the size (and also content) of object code would be the same for `R1` and `R2`. It&#39;s the case for the C++ (difference of 4 bytes if compiled without `-O1`). There is a bigger difference for the Java bytecode (`R2` is longer), which is surprising for me.\r\n\r\nMaybe I&#39;m not looking at the right things and my question might not be relevant, but is it normal that the Java bytecode is so &quot;close&quot; from the source code, and does it mean that it&#39;s always more &quot;efficient&quot;/&quot;optimized&quot; to write everything in one-line instead of using local variables ?\r\n\r\n**C++**\r\n\r\n```c++\r\nint A(int a) { return 0; }\r\nint B(int b) { return 0; }\r\nint C(int c) { return 0; }\r\nint D(int d) { return 0; }\r\n\r\nint R1() {\r\n  return  A(B(C(3)+D(3)));\r\n}\r\n\r\nint R2() {\r\n  int d = D(3);\r\n  int c = C(3);\r\n  int b = B(c + d);\r\n  return A(b);\r\n}\r\n\r\n// Then R1() and R2() are called in the main()\r\n```\r\n\r\n**Java**\r\n\r\n```java\r\nclass MyClass {\r\n  static int A(int a) { return 0; }\r\n  static int B(int b) { return 0; }\r\n  static int C(int c) { return 0; }\r\n  static int D(int d) { return 0; }\r\n  \r\n  static int R1() {\r\n    return  A(B(C(3)+D(3)));\r\n  }\r\n  \r\n  static int R2() {\r\n    int d = D(3);\r\n    int c = C(3);\r\n    int b = B(c + d);\r\n    \r\n    return A(b);\r\n  }\r\n\r\n  // Then R1 and R2 are called in the Main()\r\n}\r\n```\r\n\r\nWhen I compiled both of them (`g++ -O1` version 9.4 and `javac` version 11.0.17), and disassemble `R1` and `R2`, I get this:\r\n\r\n**C++ (`g++ -O1 prog.cpp`)**\r\n\r\n\r\n```\r\nR1:\r\n  1251:\tf3 0f 1e fa          \tendbr64 \r\n  1255:\t53                   \tpush   %rbx\r\n  1256:\tbf 03 00 00 00       \tmov    $0x3,%edi\r\n  125b:\te8 9d ff ff ff       \tcallq  11fd &lt;_Z1Ci&gt;\r\n  1260:\t89 c3                \tmov    %eax,%ebx\r\n  1262:\tbf 03 00 00 00       \tmov    $0x3,%edi\r\n  1267:\te8 bb ff ff ff       \tcallq  1227 &lt;_Z1Di&gt;\r\n  126c:\t8d 3c 03             \tlea    (%rbx,%rax,1),%edi\r\n  126f:\te8 5f ff ff ff       \tcallq  11d3 &lt;_Z1Bi&gt;\r\n  1274:\t89 c7                \tmov    %eax,%edi\r\n  1276:\te8 2e ff ff ff       \tcallq  11a9 &lt;_Z1Ai&gt;\r\n  127b:\t5b                   \tpop    %rbx\r\n  127c:\tc3                   \tretq   \r\n\r\nR2:\r\n  &lt;exact same as R1&gt;\r\n```\r\n\r\n**Java (`javap -c MyClass`)**\r\n\r\n```\r\njavap -c Appel \r\nstatic int R1();\r\n  Code:\r\n     0: iconst_3\r\n     1: invokestatic  #8                  // Method C:(I)I\r\n     4: iconst_3\r\n     5: invokestatic  #9                  // Method D:(I)I\r\n     8: iadd\r\n     9: invokestatic  #10                 // Method B:(I)I\r\n    12: invokestatic  #11                 // Method A:(I)I\r\n    15: ireturn\r\n\r\nstatic int R2();\r\n  Code:\r\n     0: iconst_3\r\n     1: invokestatic  #9                  // Method D:(I)I\r\n     4: istore_0\r\n     5: iconst_3\r\n     6: invokestatic  #8                  // Method C:(I)I\r\n     9: istore_1\r\n    10: iload_1\r\n    11: iload_0\r\n    12: iadd\r\n    13: invokestatic  #10                 // Method B:(I)I\r\n    16: istore_2\r\n    17: iload_2\r\n    18: invokestatic  #11                 // Method A:(I)I\r\n    21: ireturn\r\n```","title":"Should I stop using local variables in Java?","body":"<p>I have these 2 codes in Java and C++, which are supposed to do the same thing.</p>\n<p>My intuition was that the size (and also content) of object code would be the same for <code>R1</code> and <code>R2</code>. It's the case for the C++ (difference of 4 bytes if compiled without <code>-O1</code>). There is a bigger difference for the Java bytecode (<code>R2</code> is longer), which is surprising for me.</p>\n<p>Maybe I'm not looking at the right things and my question might not be relevant, but is it normal that the Java bytecode is so &quot;close&quot; from the source code, and does it mean that it's always more &quot;efficient&quot;/&quot;optimized&quot; to write everything in one-line instead of using local variables ?</p>\n<p><strong>C++</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>int A(int a) { return 0; }\nint B(int b) { return 0; }\nint C(int c) { return 0; }\nint D(int d) { return 0; }\n\nint R1() {\n  return  A(B(C(3)+D(3)));\n}\n\nint R2() {\n  int d = D(3);\n  int c = C(3);\n  int b = B(c + d);\n  return A(b);\n}\n\n// Then R1() and R2() are called in the main()\n</code></pre>\n<p><strong>Java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass {\n  static int A(int a) { return 0; }\n  static int B(int b) { return 0; }\n  static int C(int c) { return 0; }\n  static int D(int d) { return 0; }\n  \n  static int R1() {\n    return  A(B(C(3)+D(3)));\n  }\n  \n  static int R2() {\n    int d = D(3);\n    int c = C(3);\n    int b = B(c + d);\n    \n    return A(b);\n  }\n\n  // Then R1 and R2 are called in the Main()\n}\n</code></pre>\n<p>When I compiled both of them (<code>g++ -O1</code> version 9.4 and <code>javac</code> version 11.0.17), and disassemble <code>R1</code> and <code>R2</code>, I get this:</p>\n<p><strong>C++ (<code>g++ -O1 prog.cpp</code>)</strong></p>\n<pre><code>R1:\n  1251: f3 0f 1e fa             endbr64 \n  1255: 53                      push   %rbx\n  1256: bf 03 00 00 00          mov    $0x3,%edi\n  125b: e8 9d ff ff ff          callq  11fd &lt;_Z1Ci&gt;\n  1260: 89 c3                   mov    %eax,%ebx\n  1262: bf 03 00 00 00          mov    $0x3,%edi\n  1267: e8 bb ff ff ff          callq  1227 &lt;_Z1Di&gt;\n  126c: 8d 3c 03                lea    (%rbx,%rax,1),%edi\n  126f: e8 5f ff ff ff          callq  11d3 &lt;_Z1Bi&gt;\n  1274: 89 c7                   mov    %eax,%edi\n  1276: e8 2e ff ff ff          callq  11a9 &lt;_Z1Ai&gt;\n  127b: 5b                      pop    %rbx\n  127c: c3                      retq   \n\nR2:\n  &lt;exact same as R1&gt;\n</code></pre>\n<p><strong>Java (<code>javap -c MyClass</code>)</strong></p>\n<pre><code>javap -c Appel \nstatic int R1();\n  Code:\n     0: iconst_3\n     1: invokestatic  #8                  // Method C:(I)I\n     4: iconst_3\n     5: invokestatic  #9                  // Method D:(I)I\n     8: iadd\n     9: invokestatic  #10                 // Method B:(I)I\n    12: invokestatic  #11                 // Method A:(I)I\n    15: ireturn\n\nstatic int R2();\n  Code:\n     0: iconst_3\n     1: invokestatic  #9                  // Method D:(I)I\n     4: istore_0\n     5: iconst_3\n     6: invokestatic  #8                  // Method C:(I)I\n     9: istore_1\n    10: iload_1\n    11: iload_0\n    12: iadd\n    13: invokestatic  #10                 // Method B:(I)I\n    16: istore_2\n    17: iload_2\n    18: invokestatic  #11                 // Method A:(I)I\n    21: ireturn\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1675244869,"post_id":75304287,"comment_id":132885014,"body_markdown":"It looks like you have a `@Configuration` class in your application or one of its dependencies that is referencing `WebMvcConfigurerAdapter`. You could use the debugger and a breakpoint to suspend the application when `WebMvcConfigurerAdapter.class` cannot be found. When the app is suspended look at the class that `ConfigurationClassParser` is processing to identify the cause.","body":"It looks like you have a <code>@Configuration</code> class in your application or one of its dependencies that is referencing <code>WebMvcConfigurerAdapter</code>. You could use the debugger and a breakpoint to suspend the application when <code>WebMvcConfigurerAdapter.class</code> cannot be found. When the app is suspended look at the class that <code>ConfigurationClassParser</code> is processing to identify the cause."}],"owner":{"account_id":22514366,"reputation":1,"user_id":16708824,"display_name":"Mr. Isaac"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675210083,"creation_date":1675208683,"question_id":75304287,"body_markdown":"I have upgraded a project that I am working on from Spring Boot 2.7.7 to 3.0.0. There were some classes in the project that depended on the deprecated WebMvcConfigurerAdapter class, but I have removed the dependency and use the replacement WebMvcConfigurer interface.\r\n\r\nVersion info\r\n\r\nJava - 17\r\n\r\nSpringframework - 6.0.2\r\n\r\nSpring Boot - 3.0.0\r\n\r\nSpring Cloud - 2022.0.0\r\n\r\n```\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.app.Application]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:179) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:397) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat com.app.Application.main(Application.java:30) ~[classes/:na]\r\nCaused by: java.io.FileNotFoundException: class path resource [org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.class] cannot be opened because it does not exist\r\n\tat org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:211) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:54) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.createMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:86) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.getMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:73) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:611) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getSuperClass(ConfigurationClassParser.java:924) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:335) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:298) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:197) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:165) ~[spring-context-6.0.2.jar:6.0.2]\r\n\t... 13 common frames omitted\r\n```\r\n\r\nI am unsure how to proceed or why this exception is being thrown. I have searched for any references to WebMvcConfigurerAdapter in the project, and there are none. ","title":"FileNotFoundException for WebMvcConfigurerAdapter dependency for spring-core-6.0.2 not found after Spring Boot 3 upgrade","body":"<p>I have upgraded a project that I am working on from Spring Boot 2.7.7 to 3.0.0. There were some classes in the project that depended on the deprecated WebMvcConfigurerAdapter class, but I have removed the dependency and use the replacement WebMvcConfigurer interface.</p>\n<p>Version info</p>\n<p>Java - 17</p>\n<p>Springframework - 6.0.2</p>\n<p>Spring Boot - 3.0.0</p>\n<p>Spring Cloud - 2022.0.0</p>\n<pre><code>org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.app.Application]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:179) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:397) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\n    at com.app.Application.main(Application.java:30) ~[classes/:na]\nCaused by: java.io.FileNotFoundException: class path resource [org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.class] cannot be opened because it does not exist\n    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:211) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:54) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.createMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:86) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.getMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:73) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:611) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getSuperClass(ConfigurationClassParser.java:924) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:335) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:298) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:197) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:165) ~[spring-context-6.0.2.jar:6.0.2]\n    ... 13 common frames omitted\n</code></pre>\n<p>I am unsure how to proceed or why this exception is being thrown. I have searched for any references to WebMvcConfigurerAdapter in the project, and there are none.</p>\n"},{"tags":["java","class","import"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1319402601,"post_id":7869006,"comment_id":9600296,"body_markdown":"What is the *actual* problem you are having, since you don&#39;t have to import classes that are in the same package?","body":"What is the <i>actual</i> problem you are having, since you don&#39;t have to import classes that are in the same package?"}],"answers":[{"tags":[],"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1319402931,"creation_date":1319402335,"answer_id":7869018,"question_id":7869006,"body_markdown":"First off, avoid using the default package.\r\n\r\nSecond of all, you don&#39;t need to import the class; it&#39;s in the same package.","title":"Import a custom class in Java","body":"<p>First off, avoid using the default package.</p>\n\n<p>Second of all, you don't need to import the class; it's in the same package.</p>\n"},{"tags":[],"owner":{"account_id":261786,"reputation":13726,"user_id":546205,"accept_rate":60,"display_name":"Miguel Prz"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1319402379,"creation_date":1319402379,"answer_id":7869021,"question_id":7869006,"body_markdown":"I see the picture, and all your classes are in the same package. So you don&#39;t have to import, you can create a new instance without the import sentence.","title":"Import a custom class in Java","body":"<p>I see the picture, and all your classes are in the same package. So you don't have to import, you can create a new instance without the import sentence.</p>\n"},{"comments":[{"owner":{"account_id":6540092,"reputation":1270,"user_id":5058026,"accept_rate":62,"display_name":"Martin CR"},"score":0,"creation_date":1693220472,"post_id":7869030,"comment_id":135726914,"body_markdown":"If you&#39;re aiming simply to call a `static` method of the class then you probably don&#39;t even need to instantiate it as an object - just invoke it as: `MyClass.method();`","body":"If you&#39;re aiming simply to call a <code>static</code> method of the class then you probably don&#39;t even need to instantiate it as an object - just invoke it as: <code>MyClass.method();</code>"}],"tags":[],"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"comment_count":1,"down_vote_count":2,"up_vote_count":109,"is_accepted":true,"score":107,"last_activity_date":1675209536,"creation_date":1319402458,"answer_id":7869030,"question_id":7869006,"body_markdown":"If all of your classes are in the same package, you shouldn&#39;t need to import them.\r\n\r\nSimply instantiate the object like so: \r\n\r\n```java\r\nCustomObject myObject = new CustomObject();\r\n```","title":"Import a custom class in Java","body":"<p>If all of your classes are in the same package, you shouldn't need to import them.</p>\n<p>Simply instantiate the object like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CustomObject myObject = new CustomObject();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":323326,"reputation":6604,"user_id":643271,"accept_rate":74,"display_name":"Kayser"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1416002447,"creation_date":1319402582,"answer_id":7869045,"question_id":7869006,"body_markdown":"In the same package you don&#39;t need to import the class.\r\n\r\nOtherwise, it is very easy. In [Eclipse][1] or [NetBeans][2] just write the class you want to use and press on &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Space&lt;/kbd&gt;. The [IDE][3] will automatically import the class.\r\n\r\nGeneral information:\r\n\r\nYou can import a class with import keyword after package information:\r\n\r\nExample:\r\n\r\n    package your_package;\r\n\r\n\r\n    import anotherpackage.anotherclass;\r\n\r\n    public class Your_Class {\r\n        ...\r\n        private Vector variable;\r\n        ...\r\n    }\r\n\r\nYou can instance the class with:\r\n\r\n    Anotherclass foo = new Anotherclass();\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Eclipse_%28software%29\r\n  [2]: http://en.wikipedia.org/wiki/NetBeans\r\n  [3]: http://en.wikipedia.org/wiki/Integrated_development_environment\r\n","title":"Import a custom class in Java","body":"<p>In the same package you don't need to import the class.</p>\n\n<p>Otherwise, it is very easy. In <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"noreferrer\">Eclipse</a> or <a href=\"http://en.wikipedia.org/wiki/NetBeans\" rel=\"noreferrer\">NetBeans</a> just write the class you want to use and press on <kbd>Ctrl</kbd> + <kbd>Space</kbd>. The <a href=\"http://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"noreferrer\">IDE</a> will automatically import the class.</p>\n\n<p>General information:</p>\n\n<p>You can import a class with import keyword after package information:</p>\n\n<p>Example:</p>\n\n<pre><code>package your_package;\n\n\nimport anotherpackage.anotherclass;\n\npublic class Your_Class {\n    ...\n    private Vector variable;\n    ...\n}\n</code></pre>\n\n<p>You can instance the class with:</p>\n\n<pre><code>Anotherclass foo = new Anotherclass();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":3,"creation_date":1319402747,"post_id":7869046,"comment_id":9600311,"body_markdown":"It wouldn&#39;t matter if it wasn&#39;t the default package - you don&#39;t have to import classes that are in the *same* package.","body":"It wouldn&#39;t matter if it wasn&#39;t the default package - you don&#39;t have to import classes that are in the <i>same</i> package."},{"owner":{"account_id":420891,"reputation":11018,"user_id":798818,"accept_rate":91,"display_name":"Mob"},"score":0,"creation_date":1319402926,"post_id":7869046,"comment_id":9600341,"body_markdown":"@BrianRoach I know. All you need is just an instance. I&#39;m just clearing it up for him.","body":"@BrianRoach I know. All you need is just an instance. I&#39;m just clearing it up for him."}],"tags":[],"owner":{"account_id":420891,"reputation":11018,"user_id":798818,"accept_rate":91,"display_name":"Mob"},"comment_count":2,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1416002502,"creation_date":1319402585,"answer_id":7869046,"question_id":7869006,"body_markdown":"Import by using the `import` keyword:\r\n\r\n    import package.myclass;\r\n\r\nBut since it&#39;s the default package and *same*, you just create a new instance like:\r\n\r\n    elf ob = new elf(); //Instance of elf class\r\n","title":"Import a custom class in Java","body":"<p>Import by using the <code>import</code> keyword:</p>\n\n<pre><code>import package.myclass;\n</code></pre>\n\n<p>But since it's the default package and <em>same</em>, you just create a new instance like:</p>\n\n<pre><code>elf ob = new elf(); //Instance of elf class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3259065,"reputation":525,"user_id":2745013,"accept_rate":61,"display_name":"IHazABone"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379547026,"creation_date":1379547026,"answer_id":18884024,"question_id":7869006,"body_markdown":"If your classes are in the same package, you won&#39;t need to import. To call a method from class B in class A, you should use `classB.methodName(arg)`","title":"Import a custom class in Java","body":"<p>If your classes are in the same package, you won't need to import. To call a method from class B in class A, you should use <code>classB.methodName(arg)</code></p>\n"},{"tags":[],"owner":{"account_id":9546393,"reputation":1184,"user_id":7092293,"display_name":"MMKarami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503736556,"creation_date":1503736556,"answer_id":45893557,"question_id":7869006,"body_markdown":"According Oracle and Sun doc, a class can use all classes from its own package and all public classes from other packages. You can access the public classes in another package in two ways. \r\n\r\n- The first is simply to add the full package name in front of every class name. For example:\r\n\r\n    java.util.Date today = new java.util.Date();\r\n\r\n- The simpler, and more common, approach is to use the import statement. The point of the import statement is to give you a shorthand to refer to the classes in the package. Once you use import, you no longer have to give the classes their full names. You can import a specific class or the whole package. You place import statements at the top of your source files (but below any package statements). For example, you can import all classes in the java.util package with the statement Then you can use without a package prefix.\r\n\r\n    import java.util.*;\r\n\r\n    // Use class in your code with this manner\r\n    \r\n    Date today = new Date();\r\n\r\nAs you mentioned in your question that your classes are under the same package, you should not have any problem, it is better just to use class name.  ","title":"Import a custom class in Java","body":"<p>According Oracle and Sun doc, a class can use all classes from its own package and all public classes from other packages. You can access the public classes in another package in two ways. </p>\n\n<ul>\n<li><p>The first is simply to add the full package name in front of every class name. For example:</p>\n\n<p>java.util.Date today = new java.util.Date();</p></li>\n<li><p>The simpler, and more common, approach is to use the import statement. The point of the import statement is to give you a shorthand to refer to the classes in the package. Once you use import, you no longer have to give the classes their full names. You can import a specific class or the whole package. You place import statements at the top of your source files (but below any package statements). For example, you can import all classes in the java.util package with the statement Then you can use without a package prefix.</p>\n\n<p>import java.util.*;</p>\n\n<p>// Use class in your code with this manner</p>\n\n<p>Date today = new Date();</p></li>\n</ul>\n\n<p>As you mentioned in your question that your classes are under the same package, you should not have any problem, it is better just to use class name.  </p>\n"},{"tags":[],"owner":{"account_id":24225829,"reputation":1,"user_id":18180337,"display_name":"ashik acharya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666266625,"creation_date":1665919567,"answer_id":74086712,"question_id":7869006,"body_markdown":"If you have the java files under the same package, you will not need to import the classes within those java files. Simply instantiate an object and you will have access. For example, if you need to access class named My_Class from another file within the same package:\r\n\r\n    My_Class object = new My_Class();\r\n\r\nNow, if you put a `.` dot after typing object, you will gain access to all the methods and attributes from the class.\r\n\r\nNow, if you don&#39;t have the files under the same package, you can import the Class.\r\nJust type:\r\n\r\n    import Package_Name.Class_name\r\n\r\nWhere `Package_Name` represents the name of the package in which the class exists and\r\n`Class_name` being the name of the class you want to import.\r\n\r\n\r\n","title":"Import a custom class in Java","body":"<p>If you have the java files under the same package, you will not need to import the classes within those java files. Simply instantiate an object and you will have access. For example, if you need to access class named My_Class from another file within the same package:</p>\n<pre><code>My_Class object = new My_Class();\n</code></pre>\n<p>Now, if you put a <code>.</code> dot after typing object, you will gain access to all the methods and attributes from the class.</p>\n<p>Now, if you don't have the files under the same package, you can import the Class.\nJust type:</p>\n<pre><code>import Package_Name.Class_name\n</code></pre>\n<p>Where <code>Package_Name</code> represents the name of the package in which the class exists and\n<code>Class_name</code> being the name of the class you want to import.</p>\n"}],"owner":{"display_name":"user704010"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":642796,"favorite_count":0,"down_vote_count":3,"up_vote_count":86,"accepted_answer_id":7869030,"answer_count":8,"score":83,"last_activity_date":1675209536,"creation_date":1319402185,"question_id":7869006,"body_markdown":"How do I import a class I wrote in a different file? All my classes are under the same package.","title":"Import a custom class in Java","body":"<p>How do I import a class I wrote in a different file? All my classes are under the same package.</p>\n"},{"tags":["java","spring-jms","jms-topic"],"owner":{"account_id":12163361,"reputation":160,"user_id":8880333,"display_name":"Developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675209496,"creation_date":1675160086,"question_id":75295602,"body_markdown":"I am using a JMS queue.\r\n \r\n I am attaching my own Listener name as MyMessageListenerContainer to endpoint using following way but it is not getting picked up.\r\n \r\n \r\n\r\n    JmsQueueEndpoint jmsQueueEndpoint = (JmsQueueEndpoint) endpoint;\r\n     \r\n      // my own listener.\r\n      MyMessageListenerContainer myMessageListenerContainer = new MyMessageListenerContainer();\r\n      \r\n      //overriden below method of  the JmsComponent\r\n       configureMessageListenerContainer(myMessageListenerContainer, endpoint);\r\n\r\n      // MyMessageListenerContainer implementation\r\n      class MyMessageListenerContainer extends DefaultMessageListenerContainer {\r\n        @Override\r\n        protected void refreshConnectionUntilSuccessful() {\r\n                      System.out.println(&quot;In My message listener **********&quot;);\r\n                       super.refreshConnectionUntilSuccessful();\r\n        }\r\n    \r\n    }\r\n\r\nWhen the broker is down, ideally it should pickup this class and log In My message listener **********.\r\n\r\nBut in my case it is invoking DefaultMessageListenerContainer method.\r\n\r\nCan somebody help me here ?","title":"Invoking our Custom MessageListenerContainer in JMS","body":"<p>I am using a JMS queue.</p>\n<p>I am attaching my own Listener name as MyMessageListenerContainer to endpoint using following way but it is not getting picked up.</p>\n<pre><code>JmsQueueEndpoint jmsQueueEndpoint = (JmsQueueEndpoint) endpoint;\n \n  // my own listener.\n  MyMessageListenerContainer myMessageListenerContainer = new MyMessageListenerContainer();\n  \n  //overriden below method of  the JmsComponent\n   configureMessageListenerContainer(myMessageListenerContainer, endpoint);\n\n  // MyMessageListenerContainer implementation\n  class MyMessageListenerContainer extends DefaultMessageListenerContainer {\n    @Override\n    protected void refreshConnectionUntilSuccessful() {\n                  System.out.println(&quot;In My message listener **********&quot;);\n                   super.refreshConnectionUntilSuccessful();\n    }\n\n}\n</code></pre>\n<p>When the broker is down, ideally it should pickup this class and log In My message listener **********.</p>\n<p>But in my case it is invoking DefaultMessageListenerContainer method.</p>\n<p>Can somebody help me here ?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1675101154,"post_id":75287013,"comment_id":132851774,"body_markdown":"When you say &quot;for further validations&quot; can you give an example?","body":"When you say &quot;for further validations&quot; can you give an example?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1675102867,"post_id":75287013,"comment_id":132852296,"body_markdown":"by not using a JWT and instead use a opague token instead of building some strange weird custom flow.","body":"by not using a JWT and instead use a opague token instead of building some strange weird custom flow."},{"owner":{"account_id":27654906,"reputation":11,"user_id":21109013,"display_name":"Enthus"},"score":0,"creation_date":1675152717,"post_id":75287013,"comment_id":132861695,"body_markdown":"@SteveRiesenberg we need to take a field from the user info endpoint response, map it and add it to the authority","body":"@SteveRiesenberg we need to take a field from the user info endpoint response, map it and add it to the authority"}],"answers":[{"tags":[],"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675202924,"creation_date":1675201659,"answer_id":75303489,"question_id":75287013,"body_markdown":"The [UserInfo Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) is part of [OpenID Connect 1.0](https://openid.net/specs/openid-connect-core-1_0.html), and returns user information for an access token. It is not automatically called from a resource server (`http.oauth2ResourceServer()`) by Spring Security.\r\n\r\nBased on your security configuration, it looks like you&#39;re wanting to use both OAuth2 Client (`http.oauth2Client()`) and OAuth2 Resource Server (`http.oauth2ResourceServer()`) in the same application. OAuth2 Client isn&#39;t designed for this use case (calling UserInfo from a resource server), and therefore would require customization to be adapted for such a case. Instead, you can simply use a `RestTemplate` or `WebClient` to call the UserInfo endpoint yourself.\r\n\r\nYou can do this in a custom `Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt;` (or in this case the reactive version) like so:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class SecurityConfiguration {\r\n\t@Bean\r\n\tpublic SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n\t\t// @formatter:off\r\n\t\thttp\r\n\t\t\t.authorizeExchange((authorize) -&gt; authorize\r\n\t\t\t\t.anyExchange().authenticated()\r\n\t\t\t)\r\n\t\t\t.oauth2ResourceServer((oauth2) -&gt; oauth2\r\n\t\t\t\t.jwt((jwt) -&gt; jwt\r\n\t\t\t\t\t.jwtAuthenticationConverter(jwtAuthenticationConverter())\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t// @formatter:on\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\tprivate Converter&lt;Jwt, Mono&lt;AbstractAuthenticationToken&gt;&gt; jwtAuthenticationConverter() {\r\n\t\tReactiveJwtAuthenticationConverter converter = new ReactiveJwtAuthenticationConverter();\r\n\t\tconverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter());\r\n\t\treturn converter;\r\n\t}\r\n\r\n\tprivate Converter&lt;Jwt, Flux&lt;GrantedAuthority&gt;&gt; jwtGrantedAuthoritiesConverter() {\r\n\t\tJwtGrantedAuthoritiesConverter delegate = new JwtGrantedAuthoritiesConverter();\r\n\t\treturn (jwt) -&gt; getUserInfo(jwt.getTokenValue())\r\n\t\t\t.flatMapIterable((userInfo) -&gt; {\r\n\t\t\t\tCollection&lt;GrantedAuthority&gt; authorities = delegate.convert(jwt);\r\n\t\t\t\t// TODO: Add authority from userInfo...\r\n\t\t\t\treturn authorities;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate Mono&lt;Map&lt;String, String&gt;&gt; getUserInfo(String accessToken) {\r\n\t\t// TODO: Call user info and extract one or more claims from response\r\n\t\treturn Mono.just(new HashMap&lt;&gt;());\r\n\t}\r\n\r\n\r\n}\r\n```","title":"Oauth2 jwt token enriched with userinfo enpoint","body":"<p>The <a href=\"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo\" rel=\"nofollow noreferrer\">UserInfo Endpoint</a> is part of <a href=\"https://openid.net/specs/openid-connect-core-1_0.html\" rel=\"nofollow noreferrer\">OpenID Connect 1.0</a>, and returns user information for an access token. It is not automatically called from a resource server (<code>http.oauth2ResourceServer()</code>) by Spring Security.</p>\n<p>Based on your security configuration, it looks like you're wanting to use both OAuth2 Client (<code>http.oauth2Client()</code>) and OAuth2 Resource Server (<code>http.oauth2ResourceServer()</code>) in the same application. OAuth2 Client isn't designed for this use case (calling UserInfo from a resource server), and therefore would require customization to be adapted for such a case. Instead, you can simply use a <code>RestTemplate</code> or <code>WebClient</code> to call the UserInfo endpoint yourself.</p>\n<p>You can do this in a custom <code>Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt;</code> (or in this case the reactive version) like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfiguration {\n    @Bean\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        // @formatter:off\n        http\n            .authorizeExchange((authorize) -&gt; authorize\n                .anyExchange().authenticated()\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2\n                .jwt((jwt) -&gt; jwt\n                    .jwtAuthenticationConverter(jwtAuthenticationConverter())\n                )\n            );\n        // @formatter:on\n\n        return http.build();\n    }\n\n    private Converter&lt;Jwt, Mono&lt;AbstractAuthenticationToken&gt;&gt; jwtAuthenticationConverter() {\n        ReactiveJwtAuthenticationConverter converter = new ReactiveJwtAuthenticationConverter();\n        converter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter());\n        return converter;\n    }\n\n    private Converter&lt;Jwt, Flux&lt;GrantedAuthority&gt;&gt; jwtGrantedAuthoritiesConverter() {\n        JwtGrantedAuthoritiesConverter delegate = new JwtGrantedAuthoritiesConverter();\n        return (jwt) -&gt; getUserInfo(jwt.getTokenValue())\n            .flatMapIterable((userInfo) -&gt; {\n                Collection&lt;GrantedAuthority&gt; authorities = delegate.convert(jwt);\n                // TODO: Add authority from userInfo...\n                return authorities;\n            });\n    }\n\n    private Mono&lt;Map&lt;String, String&gt;&gt; getUserInfo(String accessToken) {\n        // TODO: Call user info and extract one or more claims from response\n        return Mono.just(new HashMap&lt;&gt;());\n    }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675209357,"creation_date":1675209357,"answer_id":75304340,"question_id":75287013,"body_markdown":"It is way more efficient to decode the data from a JWT than querying an external endpoint.\r\n\r\nAs a consequence, the best option is to configure the authorization-server (even if it is 3rd party)  to enrich the JWTs (access and ID tokens) with the data you need for authorization. Most OIDC authorization-servers support it, just refer to its documentation (Keycloak, Auth0, Cognito, ...).\r\n\r\nOnce all the claims you need are in access-tokens, you can read it on resource-server from the `JwtAuthenticationToken` instance (or `OAuth2AuthenticationToken` for client app with `oauth2login`) in the security-context. This allows to write stuff like:\r\n```java\r\n@PostMapping(&quot;/answers/{subject}&quot;)\r\n@PreAuthorize(&quot;#userSubject == #auth.token.claims[&#39;sub&#39;]&quot;)\r\npublic ResponseEntity&lt;String&gt; addAnswer(@PathVariable(&quot;subject&quot;) String userSubject, @RequestBody @Valid AnswerDto, JwtAuthenticationToken auth) {\r\n     ...\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"Oauth2 jwt token enriched with userinfo enpoint","body":"<p>It is way more efficient to decode the data from a JWT than querying an external endpoint.</p>\n<p>As a consequence, the best option is to configure the authorization-server (even if it is 3rd party)  to enrich the JWTs (access and ID tokens) with the data you need for authorization. Most OIDC authorization-servers support it, just refer to its documentation (Keycloak, Auth0, Cognito, ...).</p>\n<p>Once all the claims you need are in access-tokens, you can read it on resource-server from the <code>JwtAuthenticationToken</code> instance (or <code>OAuth2AuthenticationToken</code> for client app with <code>oauth2login</code>) in the security-context. This allows to write stuff like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/answers/{subject}&quot;)\n@PreAuthorize(&quot;#userSubject == #auth.token.claims['sub']&quot;)\npublic ResponseEntity&lt;String&gt; addAnswer(@PathVariable(&quot;subject&quot;) String userSubject, @RequestBody @Valid AnswerDto, JwtAuthenticationToken auth) {\n     ...\n}\n</code></pre>\n"}],"owner":{"account_id":27654906,"reputation":11,"user_id":21109013,"display_name":"Enthus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":500,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1675209357,"creation_date":1675094643,"question_id":75287013,"body_markdown":"I have a spring application that exposes some webflux endpoints, I use a jwt token to authorize the post calls but we I also need the information given by the userinfo endpoint.\r\nI have a SecurityWebFilterChain bean right now and we are using an oauth2ResourceServer configuration then calling the userinfoendpoint for further checks.\r\nWhat is the best way to validate a jwt token then get the userinfo enpoint information for further validations?\r\n\r\nps: the authorization server is a third part one.\r\n\r\nSecurity configuration without the external call for the user-info\r\n\r\n```\r\n  @Bean\r\n  public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\r\n\r\n    http\r\n      .cors()\r\n      .and()\r\n            .httpBasic().disable()\r\n            .formLogin().disable()\r\n            .csrf().disable()\r\n            .logout().disable()\r\n            .oauth2Client()\r\n            .and()\r\n      .authorizeExchange()\r\n            .pathMatchers(HttpMethod.POST).authenticated()\r\n            .anyExchange().permitAll()\r\n            .and().oauth2ResourceServer().jwt()\r\n            ;\r\n\r\n    return http.build();\r\n  }\r\n```","title":"Oauth2 jwt token enriched with userinfo enpoint","body":"<p>I have a spring application that exposes some webflux endpoints, I use a jwt token to authorize the post calls but we I also need the information given by the userinfo endpoint.\nI have a SecurityWebFilterChain bean right now and we are using an oauth2ResourceServer configuration then calling the userinfoendpoint for further checks.\nWhat is the best way to validate a jwt token then get the userinfo enpoint information for further validations?</p>\n<p>ps: the authorization server is a third part one.</p>\n<p>Security configuration without the external call for the user-info</p>\n<pre><code>  @Bean\n  public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\n\n    http\n      .cors()\n      .and()\n            .httpBasic().disable()\n            .formLogin().disable()\n            .csrf().disable()\n            .logout().disable()\n            .oauth2Client()\n            .and()\n      .authorizeExchange()\n            .pathMatchers(HttpMethod.POST).authenticated()\n            .anyExchange().permitAll()\n            .and().oauth2ResourceServer().jwt()\n            ;\n\n    return http.build();\n  }\n</code></pre>\n"},{"tags":["java","swing","jdialog","swingbuilder"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1675206596,"post_id":75303671,"comment_id":132878275,"body_markdown":"`UIManager.getLookAndFeel().getDefaults().getIcon(...)` and pass it one of the following keys based on what you need `OptionPane.errorIcon`; `OptionPane.informationIcon`; `OptionPane.warningIcon`; `OptionPane.questionIcon`","body":"<code>UIManager.getLookAndFeel().getDefaults().getIcon(...)</code> and pass it one of the following keys based on what you need <code>OptionPane.errorIcon</code>; <code>OptionPane.informationIcon</code>; <code>OptionPane.warningIcon</code>; <code>OptionPane.questionIcon</code>"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1675206782,"post_id":75303671,"comment_id":132878310,"body_markdown":"For [example](https://stackoverflow.com/a/12228640/230513).","body":"For <a href=\"https://stackoverflow.com/a/12228640/230513\">example</a>."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1675216232,"post_id":75303671,"comment_id":132879738,"body_markdown":"Check out [UIManager Defaults](https://tips4java.wordpress.com/2008/10/09/uimanager-defaults/) for the list of keywords you can use to access the Icons of the JOptionPane or any Swing component.","body":"Check out <a href=\"https://tips4java.wordpress.com/2008/10/09/uimanager-defaults/\" rel=\"nofollow noreferrer\">UIManager Defaults</a> for the list of keywords you can use to access the Icons of the JOptionPane or any Swing component."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675208648,"creation_date":1675208648,"answer_id":75304282,"question_id":75303671,"body_markdown":"On MacOS, `JOptionPane`, left to right, top to bottom, Error; Information; Warning; Question\r\n\r\n[![enter image description here][1]][1]\r\n\r\nLoaded from `UIManager`\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridLayout;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.UIManager;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.setLayout(new GridLayout(2, 2));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.errorIcon&quot;)));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.informationIcon&quot;)));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.warningIcon&quot;)));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.questionIcon&quot;)));\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.ERROR_MESSAGE);\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.WARNING_MESSAGE);\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.QUESTION_MESSAGE);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bJYtl.png\r\n  [2]: https://i.stack.imgur.com/XPlLL.png","title":"Create a Jdialog that has an icon just like joptionpane","body":"<p>On MacOS, <code>JOptionPane</code>, left to right, top to bottom, Error; Information; Warning; Question</p>\n<p><a href=\"https://i.stack.imgur.com/bJYtl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bJYtl.png\" alt=\"enter image description here\" /></a></p>\n<p>Loaded from <code>UIManager</code></p>\n<p><a href=\"https://i.stack.imgur.com/XPlLL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XPlLL.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridLayout;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.UIManager;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.setLayout(new GridLayout(2, 2));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.errorIcon&quot;)));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.informationIcon&quot;)));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.warningIcon&quot;)));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.questionIcon&quot;)));\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.ERROR_MESSAGE);\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.INFORMATION_MESSAGE);\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.WARNING_MESSAGE);\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.QUESTION_MESSAGE);\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18737546,"reputation":338,"user_id":13661557,"display_name":"Girl Codes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75304282,"answer_count":1,"score":1,"last_activity_date":1675208648,"creation_date":1675203032,"question_id":75303671,"body_markdown":"I have a extended JDialog for a custom dialog because it&#39;s a bit complicated and I can&#39;t create it with JOptionPane but my issue is I still want to add to the JDialog the same icons that JOptionPane has to keep my dialogs similar in the entire app. These are the Icons provided by java in JOptionPane, but when I create a JDialog it doesn&#39;t have an Icon, how can I add one just like JOptionPane without changing into a JOptionPane.\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/l6yWh.png\r\n  [2]: https://i.stack.imgur.com/P4D48.png","title":"Create a Jdialog that has an icon just like joptionpane","body":"<p>I have a extended JDialog for a custom dialog because it's a bit complicated and I can't create it with JOptionPane but my issue is I still want to add to the JDialog the same icons that JOptionPane has to keep my dialogs similar in the entire app. These are the Icons provided by java in JOptionPane, but when I create a JDialog it doesn't have an Icon, how can I add one just like JOptionPane without changing into a JOptionPane.</p>\n<p><a href=\"https://i.stack.imgur.com/l6yWh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l6yWh.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/P4D48.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P4D48.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","unit-testing","groovy","spock"],"answers":[{"comments":[{"owner":{"account_id":27633463,"reputation":21,"user_id":21091863,"display_name":"JavaEnthusiast27"},"score":0,"creation_date":1675240498,"post_id":75304240,"comment_id":132883624,"body_markdown":"Thank you for your answer. It is indeed tedious and complicated so I will probably shift my focus to another approach as you suggest.","body":"Thank you for your answer. It is indeed tedious and complicated so I will probably shift my focus to another approach as you suggest."}],"tags":[],"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675208304,"creation_date":1675208304,"answer_id":75304240,"question_id":75295523,"body_markdown":"I can only recommend not to mock `WebClient` calls, as the necessary steps are a pain to mock, as you have seen yourself, requiring a lot of intermediary mocks without actually adding much value. This basically repeats the implementation, thus locking it in, which is not a good thing.\r\n\r\nWhat I usually do is to extract all code that interacts with `WebClient` into a client class, and only mock this class interactions in my code. From the looks of it this is what you are already doing with `TransitApiClient`. For these client classes, I would recommend testing them with `MockServer`, `WireMock`, or any of the other frameworks. This way you actually make sure that the correct request/responses are sent/received, and you don&#39;t have to awkwardly deal with the `WebClient` interface.","title":"Custom-Webclient Spock test throws unwanted NullPointerException in GET call","body":"<p>I can only recommend not to mock <code>WebClient</code> calls, as the necessary steps are a pain to mock, as you have seen yourself, requiring a lot of intermediary mocks without actually adding much value. This basically repeats the implementation, thus locking it in, which is not a good thing.</p>\n<p>What I usually do is to extract all code that interacts with <code>WebClient</code> into a client class, and only mock this class interactions in my code. From the looks of it this is what you are already doing with <code>TransitApiClient</code>. For these client classes, I would recommend testing them with <code>MockServer</code>, <code>WireMock</code>, or any of the other frameworks. This way you actually make sure that the correct request/responses are sent/received, and you don't have to awkwardly deal with the <code>WebClient</code> interface.</p>\n"}],"owner":{"account_id":27633463,"reputation":21,"user_id":21091863,"display_name":"JavaEnthusiast27"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675208304,"creation_date":1675159658,"question_id":75295523,"body_markdown":"Using the custom WebClient below:\r\n\r\n```java\r\n@Slf4j\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class TransitApiClient {\r\n\r\n    private final TransitApiClientProperties transitApiClientProperties;\r\n\r\n    private final WebClient transitApiWebClient;\r\n\r\n    private final OAuth2CustomClient oAuth2CustomClient;\r\n\r\n    public ResponseEntity&lt;Void&gt; isOfficeOfTransitValidAndNational(String officeId){\r\n        try {\r\n            final String url = UriComponentsBuilder.fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\r\n                    .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\r\n                    .queryParam(&quot;itemCode&quot;, officeId)\r\n                    .build()\r\n                    .toUriString();\r\n\r\n            return transitApiWebClient.get()\r\n                    .uri(url)\r\n                    .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\r\n                    .retrieve()\r\n                    .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\r\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\r\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\r\n                    .toBodilessEntity()\r\n                    .block();\r\n\r\n        } catch (WebClientResponseException webClientResponseException) {\r\n            log.error(&quot;Technical exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\r\n            throw new TechnicalErrorException(null, &quot;Technical exception occurred while trying to find &quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nwith its intended usage to hit an endpoint, and check if it returns a 200 code with a body or 204 NoContent code, and react accordingly with some custom exceptions.\r\n\r\nI&#39;ve implemented the groovy-spock test below :\r\n\r\n```\r\nclass TransitApiClientSpec extends Specification {\r\n\r\n    private WebClient transitApiWebClient\r\n    private TransitApiClient transitApiClient\r\n    private OAuth2CustomClient oAuth2CustomClient\r\n    private TransitApiClientProperties transitApiClientProperties\r\n    private RequestBodyUriSpec requestBodyUriSpec\r\n    private RequestHeadersSpec requestHeadersSpec\r\n    private RequestBodySpec requestBodySpec\r\n    private ResponseSpec responseSpec\r\n    private RequestHeadersUriSpec requestHeadersUriSpec\r\n\r\n    def setup() {\r\n        transitApiClientProperties = new TransitApiClientProperties()\r\n        transitApiClientProperties.setServiceUrl(&quot;https://test-url&quot;)\r\n        transitApiClientProperties.setFindOfficeOfTransit(&quot;/transit?&quot;)\r\n        transitApiClientProperties.setUsername(&quot;username&quot;)\r\n        transitApiClientProperties.setPassword(&quot;password&quot;)\r\n        transitApiClientProperties.setAuthorizationGrantType(&quot;grantType&quot;)\r\n        transitApiClientProperties.setClientId(&quot;clientId&quot;)\r\n        transitApiClientProperties.setClientSecret(&quot;clientSecret&quot;)\r\n\r\n        oAuth2CustomClient = Stub(OAuth2CustomClient)\r\n        oAuth2CustomClient.getJwtToken() &gt;&gt; &quot;token&quot;\r\n        transitApiWebClient = Mock(WebClient)\r\n        requestHeadersSpec = Mock(RequestHeadersSpec)\r\n        responseSpec = Mock(ResponseSpec)\r\n        requestHeadersUriSpec = Mock(RequestHeadersUriSpec)\r\n        transitApiClient = new TransitApiClient(transitApiClientProperties, transitApiWebClient, oAuth2CustomClient)\r\n    }\r\n\r\n    def &quot;request validation of OoTra and throw InvalidOfficeException&quot;(){\r\n        given :\r\n        def officeId = &quot;testId&quot;\r\n        def uri = UriComponentsBuilder\r\n                .fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\r\n                .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\r\n                .queryParam(&quot;itemCode&quot;, officeId)\r\n                .build()\r\n                .toUriString()\r\n\r\n        1 * transitApiWebClient.get() &gt;&gt; requestHeadersUriSpec\r\n        1 * requestHeadersUriSpec.uri(uri) &gt;&gt; requestHeadersSpec\r\n        1 * requestHeadersSpec.header(HttpHeaders.AUTHORIZATION, &quot;Bearer token&quot;) &gt;&gt; requestHeadersSpec\r\n        1 * requestHeadersSpec.retrieve() &gt;&gt; responseSpec\r\n        1 * responseSpec.onStatus() &gt;&gt; Mono.error( new InvalidOfficeException(null,null) )\r\n\r\n        when :\r\n        def response = transitApiClient.isOfficeOfTransitValidAndNational(officeId)\r\n\r\n        then :\r\n        thrown(InvalidOfficeException)\r\n    }\r\n\r\n```\r\n\r\nBut instead of an `InvalidOfficeException` being thrown, a `java.lang.NullPointerException` is thrown.\r\n\r\nIt seems to be triggered when during the test run, the program calls the following :\r\n\r\n``` java\r\n\r\nreturn transitApiWebClient.get()\r\n     .uri(url)\r\n     .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\r\n     .retrieve()\r\n     .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\r\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\r\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\r\n     .toBodilessEntity()   &lt;---------------------- **HERE**\r\n     .block();\r\n\r\n```\r\n\r\nI understand that I haven&#39;t mocked its behavior but seems to me that some other mock hasn&#39;t been done correctly.\r\n ","title":"Custom-Webclient Spock test throws unwanted NullPointerException in GET call","body":"<p>Using the custom WebClient below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@RequiredArgsConstructor\n@Component\npublic class TransitApiClient {\n\n    private final TransitApiClientProperties transitApiClientProperties;\n\n    private final WebClient transitApiWebClient;\n\n    private final OAuth2CustomClient oAuth2CustomClient;\n\n    public ResponseEntity&lt;Void&gt; isOfficeOfTransitValidAndNational(String officeId){\n        try {\n            final String url = UriComponentsBuilder.fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\n                    .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\n                    .queryParam(&quot;itemCode&quot;, officeId)\n                    .build()\n                    .toUriString();\n\n            return transitApiWebClient.get()\n                    .uri(url)\n                    .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\n                    .retrieve()\n                    .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\n                    .toBodilessEntity()\n                    .block();\n\n        } catch (WebClientResponseException webClientResponseException) {\n            log.error(&quot;Technical exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\n            throw new TechnicalErrorException(null, &quot;Technical exception occurred while trying to find &quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\n        }\n    }\n\n</code></pre>\n<p>with its intended usage to hit an endpoint, and check if it returns a 200 code with a body or 204 NoContent code, and react accordingly with some custom exceptions.</p>\n<p>I've implemented the groovy-spock test below :</p>\n<pre><code>class TransitApiClientSpec extends Specification {\n\n    private WebClient transitApiWebClient\n    private TransitApiClient transitApiClient\n    private OAuth2CustomClient oAuth2CustomClient\n    private TransitApiClientProperties transitApiClientProperties\n    private RequestBodyUriSpec requestBodyUriSpec\n    private RequestHeadersSpec requestHeadersSpec\n    private RequestBodySpec requestBodySpec\n    private ResponseSpec responseSpec\n    private RequestHeadersUriSpec requestHeadersUriSpec\n\n    def setup() {\n        transitApiClientProperties = new TransitApiClientProperties()\n        transitApiClientProperties.setServiceUrl(&quot;https://test-url&quot;)\n        transitApiClientProperties.setFindOfficeOfTransit(&quot;/transit?&quot;)\n        transitApiClientProperties.setUsername(&quot;username&quot;)\n        transitApiClientProperties.setPassword(&quot;password&quot;)\n        transitApiClientProperties.setAuthorizationGrantType(&quot;grantType&quot;)\n        transitApiClientProperties.setClientId(&quot;clientId&quot;)\n        transitApiClientProperties.setClientSecret(&quot;clientSecret&quot;)\n\n        oAuth2CustomClient = Stub(OAuth2CustomClient)\n        oAuth2CustomClient.getJwtToken() &gt;&gt; &quot;token&quot;\n        transitApiWebClient = Mock(WebClient)\n        requestHeadersSpec = Mock(RequestHeadersSpec)\n        responseSpec = Mock(ResponseSpec)\n        requestHeadersUriSpec = Mock(RequestHeadersUriSpec)\n        transitApiClient = new TransitApiClient(transitApiClientProperties, transitApiWebClient, oAuth2CustomClient)\n    }\n\n    def &quot;request validation of OoTra and throw InvalidOfficeException&quot;(){\n        given :\n        def officeId = &quot;testId&quot;\n        def uri = UriComponentsBuilder\n                .fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\n                .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\n                .queryParam(&quot;itemCode&quot;, officeId)\n                .build()\n                .toUriString()\n\n        1 * transitApiWebClient.get() &gt;&gt; requestHeadersUriSpec\n        1 * requestHeadersUriSpec.uri(uri) &gt;&gt; requestHeadersSpec\n        1 * requestHeadersSpec.header(HttpHeaders.AUTHORIZATION, &quot;Bearer token&quot;) &gt;&gt; requestHeadersSpec\n        1 * requestHeadersSpec.retrieve() &gt;&gt; responseSpec\n        1 * responseSpec.onStatus() &gt;&gt; Mono.error( new InvalidOfficeException(null,null) )\n\n        when :\n        def response = transitApiClient.isOfficeOfTransitValidAndNational(officeId)\n\n        then :\n        thrown(InvalidOfficeException)\n    }\n\n</code></pre>\n<p>But instead of an <code>InvalidOfficeException</code> being thrown, a <code>java.lang.NullPointerException</code> is thrown.</p>\n<p>It seems to be triggered when during the test run, the program calls the following :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nreturn transitApiWebClient.get()\n     .uri(url)\n     .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\n     .retrieve()\n     .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\n     .toBodilessEntity()   &lt;---------------------- **HERE**\n     .block();\n\n</code></pre>\n<p>I understand that I haven't mocked its behavior but seems to me that some other mock hasn't been done correctly.</p>\n"},{"tags":["java","selenium","ssl","selenium-webdriver","brave"],"answers":[{"comments":[{"owner":{"account_id":26831533,"reputation":1,"user_id":20419423,"display_name":"rajeshs"},"score":1,"creation_date":1675352773,"post_id":75304191,"comment_id":132914855,"body_markdown":"Your configuration worked. Thanks. Initially, I feared Selenium 4 might not work. So I went with 3.141. But now I used Selenium 4. And it works.","body":"Your configuration worked. Thanks. Initially, I feared Selenium 4 might not work. So I went with 3.141. But now I used Selenium 4. And it works."}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675207743,"creation_date":1675207743,"answer_id":75304191,"question_id":75300709,"body_markdown":"[ERR_SSL_VERSION_OR_CIPHER_MISMATCH](https://www.plesk.com/blog/various/how-to-fix-err_ssl_version_or_cipher_mismatch/)\r\n----------------------------------\r\nBrowsers always checks the SSL certificate of the website every time you try to connect to it. The process to ensure that the site is legitimate and the site has the right protocol put in place to ensure that the user&#39;s connection is secure, is known as a TLS handshake. TLS (Transport Layer Security) is a protocol that ensures secure communication between a user computer and a webserver.\r\n\r\nIncase the user&#39;s browser and the webserver fail to support a common SSL protocol version or cipher suite during the TLS handshake in those cases the browser can display the error message _`ERR_SSL_VERSION_OR_CIPHER_MISMATCH`_.\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nIn your case it&#39;s possibly the mismatch between either of the following configuration:\r\n\r\n- Java _v17.0.1_\r\n- Selenium _v3.141.59_\r\n- ChromeDriver/Chrome _v109.0_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nA possible solution may be to use the compatible version as follows:\r\n\r\n- _JDK 8u351_\r\n- Selenium _v4.8.0_\r\n- ChromeDriver/Chrome _v109.0_\r\n\r\nUsing the above configuration the following code block works perfect on my [tag:windows-10] system:\r\n\r\n\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.setBinary(&quot;C:\\\\Program Files\\\\BraveSoftware\\\\Brave-Browser\\\\Application\\\\brave.exe&quot;);\r\n\toptions.addArguments(&quot;--start-maximized&quot;);\r\n\tWebDriver driver = new ChromeDriver(options);\r\n\tdriver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);","title":"org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH error initiating Brave browser using Selenium on MAC","body":"<h2><a href=\"https://www.plesk.com/blog/various/how-to-fix-err_ssl_version_or_cipher_mismatch/\" rel=\"nofollow noreferrer\">ERR_SSL_VERSION_OR_CIPHER_MISMATCH</a></h2>\n<p>Browsers always checks the SSL certificate of the website every time you try to connect to it. The process to ensure that the site is legitimate and the site has the right protocol put in place to ensure that the user's connection is secure, is known as a TLS handshake. TLS (Transport Layer Security) is a protocol that ensures secure communication between a user computer and a webserver.</p>\n<p>Incase the user's browser and the webserver fail to support a common SSL protocol version or cipher suite during the TLS handshake in those cases the browser can display the error message <em><code>ERR_SSL_VERSION_OR_CIPHER_MISMATCH</code></em>.</p>\n<hr />\n<h2>This usecase</h2>\n<p>In your case it's possibly the mismatch between either of the following configuration:</p>\n<ul>\n<li>Java <em>v17.0.1</em></li>\n<li>Selenium <em>v3.141.59</em></li>\n<li>ChromeDriver/Chrome <em>v109.0</em></li>\n</ul>\n<hr />\n<h2>Solution</h2>\n<p>A possible solution may be to use the compatible version as follows:</p>\n<ul>\n<li><em>JDK 8u351</em></li>\n<li>Selenium <em>v4.8.0</em></li>\n<li>ChromeDriver/Chrome <em>v109.0</em></li>\n</ul>\n<p>Using the above configuration the following code block works perfect on my <a href=\"/questions/tagged/windows-10\" class=\"post-tag\" title=\"show questions tagged &#39;windows-10&#39;\" aria-label=\"show questions tagged &#39;windows-10&#39;\" rel=\"tag\" aria-labelledby=\"windows-10-container\">windows-10</a> system:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.setBinary(&quot;C:\\\\Program Files\\\\BraveSoftware\\\\Brave-Browser\\\\Application\\\\brave.exe&quot;);\noptions.addArguments(&quot;--start-maximized&quot;);\nWebDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);\n</code></pre>\n"}],"owner":{"account_id":26831533,"reputation":1,"user_id":20419423,"display_name":"rajeshs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675208168,"creation_date":1675185214,"question_id":75300709,"body_markdown":"I am trying to launch and control Brave browser using Selenium. It is part of a larger project where other popular browsers are automated as well. I used ChromeOptions and gave the path location of the Brave binary. \r\n\r\nCode trials:\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/user/Downloads/chrome/chromedriver_mac64/chromedriver&quot;);\r\nChromeOptions options = new ChromeOptions();\r\noptions.setBinary(&quot;/Applications/Brave Browser.app/Contents/MacOS/Brave Browser&quot;);\r\ndriver = new ChromeDriver(options);\r\n```\r\nThe browser gets launched. But says, \r\n\r\n    This site cant provide a secure connection\r\n    www.abcxyzabcxyzabc.univer.se uses an unsupported protocol.\r\n    ERR_SSL_VERSION_OR_CIPHER_MISMATCH\r\n\r\nAnd Eclipse console says: \r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH\r\n      (Session info: chrome=109.0.5414.119)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:53&#39;\r\n\r\nI have not implemented TestNG or Maven or anything.\r\n\r\nThe website itself is built using OnUniverse.com Website builder.\r\n\r\n- Selenium version: &#39;3.141.59&#39;\r\n- Brave browser version: &#39;Version 1.47.186 \r\n- Chromium: 109.0.5414.119 (Official Build) (x86_64)\r\n\r\nSystem info: os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;11.5&#39;, java.version: &#39;17.0.1&#39;`\r\n\r\nDriver info:\r\n```\r\norg.openqa.selenium.chrome.ChromeDriver\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 109.0.5414.119, chrome: {chromedriverVersion: 109.0.5414.74 (e7c5703604da..., userDataDir: /var/folders/sg/x5dk1wqd2g7...}, goog:chromeOptions: {debuggerAddress: localhost:52634}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: MAC, platformName: MAC, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\n```\r\n\r\nAppreciate the help.","title":"org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH error initiating Brave browser using Selenium on MAC","body":"<p>I am trying to launch and control Brave browser using Selenium. It is part of a larger project where other popular browsers are automated as well. I used ChromeOptions and gave the path location of the Brave binary.</p>\n<p>Code trials:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/user/Downloads/chrome/chromedriver_mac64/chromedriver&quot;);\nChromeOptions options = new ChromeOptions();\noptions.setBinary(&quot;/Applications/Brave Browser.app/Contents/MacOS/Brave Browser&quot;);\ndriver = new ChromeDriver(options);\n</code></pre>\n<p>The browser gets launched. But says,</p>\n<pre><code>This site cant provide a secure connection\nwww.abcxyzabcxyzabc.univer.se uses an unsupported protocol.\nERR_SSL_VERSION_OR_CIPHER_MISMATCH\n</code></pre>\n<p>And Eclipse console says:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH\n  (Session info: chrome=109.0.5414.119)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:53'\n</code></pre>\n<p>I have not implemented TestNG or Maven or anything.</p>\n<p>The website itself is built using OnUniverse.com Website builder.</p>\n<ul>\n<li>Selenium version: '3.141.59'</li>\n<li>Brave browser version: 'Version 1.47.186</li>\n<li>Chromium: 109.0.5414.119 (Official Build) (x86_64)</li>\n</ul>\n<p>System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '11.5', java.version: '17.0.1'`</p>\n<p>Driver info:</p>\n<pre><code>org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 109.0.5414.119, chrome: {chromedriverVersion: 109.0.5414.74 (e7c5703604da..., userDataDir: /var/folders/sg/x5dk1wqd2g7...}, goog:chromeOptions: {debuggerAddress: localhost:52634}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: MAC, platformName: MAC, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\n</code></pre>\n<p>Appreciate the help.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1675195166,"post_id":75302468,"comment_id":132875414,"body_markdown":"Where is your code, even if it does not work?","body":"Where is your code, even if it does not work?"},{"owner":{"display_name":"user21120780"},"score":0,"creation_date":1675195359,"post_id":75302468,"comment_id":132875469,"body_markdown":"Sorry, I just added it","body":"Sorry, I just added it"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":1,"creation_date":1675205720,"post_id":75302468,"comment_id":132878085,"body_markdown":"Based on your desired OUTPUT, it looks like `swipeLeft()` is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values. Is that correct?","body":"Based on your desired OUTPUT, it looks like <code>swipeLeft()</code> is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values. Is that correct?"},{"owner":{"account_id":81168,"reputation":234365,"user_id":229044,"accept_rate":83,"display_name":"user229044"},"score":1,"creation_date":1675214055,"post_id":75302468,"comment_id":132879442,"body_markdown":"It&#39;s not really clear what you expect `(c+1) % gameBoard.length` to do, but you need to actually examine the values in the cells, not the indexes, to do this. You need to keep track of two indexes for each row: The index of the left-most zero, and the index of the next cell to check for non-zero values.","body":"It&#39;s not really clear what you expect <code>(c+1) % gameBoard.length</code> to do, but you need to actually examine the values in the cells, not the indexes, to do this. You need to keep track of two indexes for each row: The index of the left-most zero, and the index of the next cell to check for non-zero values."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675197716,"creation_date":1675196088,"answer_id":75302650,"question_id":75302468,"body_markdown":"So your code intends to rotate the board one column to the left. Rotate? Well, the numbers you push out on the left might come back on the end, right?\r\n\r\nProbably the line\r\n\r\n    gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard.length];\r\n\r\nshould be\r\n\r\n    gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard[r].length];\r\n\r\nBut try to do this stuff with pen &amp; paper, and you should notice that you are going to loose one column/copy the values from the second column into the first, then copy that into the last column again.\r\n\r\nYou will need to change two items:\r\n- store the value from the first column somewhere if you still need it so you can push it into the last one.\r\n- only rotate the column data if it needs to be rotated. Or in other words, rotate the remainder of the row if you find a zero. In this case you do not need to remember the first column, as you will overwrite a zero and push a zero into the last column. And then it would not be called rotate but shift.\r\n\r\nExercise this with pen &amp; paper until you can write down instructions for someone else to perform the same operation. Then you are ready to also write it in Java.","title":"How to shift everything in a 2D array to the left","body":"<p>So your code intends to rotate the board one column to the left. Rotate? Well, the numbers you push out on the left might come back on the end, right?</p>\n<p>Probably the line</p>\n<pre><code>gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard.length];\n</code></pre>\n<p>should be</p>\n<pre><code>gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard[r].length];\n</code></pre>\n<p>But try to do this stuff with pen &amp; paper, and you should notice that you are going to loose one column/copy the values from the second column into the first, then copy that into the last column again.</p>\n<p>You will need to change two items:</p>\n<ul>\n<li>store the value from the first column somewhere if you still need it so you can push it into the last one.</li>\n<li>only rotate the column data if it needs to be rotated. Or in other words, rotate the remainder of the row if you find a zero. In this case you do not need to remember the first column, as you will overwrite a zero and push a zero into the last column. And then it would not be called rotate but shift.</li>\n</ul>\n<p>Exercise this with pen &amp; paper until you can write down instructions for someone else to perform the same operation. Then you are ready to also write it in Java.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675196831,"creation_date":1675196831,"answer_id":75302771,"question_id":75302468,"body_markdown":"To rotate the array in place, you should roteate the array 3 times:\r\n\r\n 1. `123456` -&gt; `654312`\r\n 1. `654321`\r\n 1. `3456..`\r\n 1. `....12`\r\n\r\n```java\r\npublic static void shiftLeft(int[] arr, int offs) {\r\n    if (offs &lt;= 0)\r\n        return;\r\n\r\n    offs = arr.length - offs % arr.length - 1;\r\n\r\n    for (int i = 0, j = arr.length - 1; i &lt; j; i++, j--)\r\n        swap(arr, i, j);\r\n    for (int i = 0, j = offs; i &lt; j; i++, j--)\r\n        swap(arr, i, j);\r\n    for (int i = offs + 1, j = arr.length - 1; i &lt; j; i++, j--)\r\n        swap(arr, i, j);\r\n}\r\n\r\nprivate static void swap(int[] arr, int i, int j) {\r\n    int tmp = arr[i];\r\n    arr[i] = arr[j];\r\n    arr[j] = tmp;\r\n}\r\n```\r\n","title":"How to shift everything in a 2D array to the left","body":"<p>To rotate the array in place, you should roteate the array 3 times:</p>\n<ol>\n<li><code>123456</code> -&gt; <code>654312</code></li>\n<li><code>654321</code></li>\n<li><code>3456..</code></li>\n<li><code>....12</code></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static void shiftLeft(int[] arr, int offs) {\n    if (offs &lt;= 0)\n        return;\n\n    offs = arr.length - offs % arr.length - 1;\n\n    for (int i = 0, j = arr.length - 1; i &lt; j; i++, j--)\n        swap(arr, i, j);\n    for (int i = 0, j = offs; i &lt; j; i++, j--)\n        swap(arr, i, j);\n    for (int i = offs + 1, j = arr.length - 1; i &lt; j; i++, j--)\n        swap(arr, i, j);\n}\n\nprivate static void swap(int[] arr, int i, int j) {\n    int tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1680455102,"post_id":75304003,"comment_id":133897681,"body_markdown":"By the way, as each `gameBoard [r]` is replaced, it becomes eligible for garbage collection.","body":"By the way, as each <code>gameBoard [r]</code> is replaced, it becomes eligible for garbage collection."}],"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675206124,"creation_date":1675205762,"answer_id":75304003,"question_id":75302468,"body_markdown":"From the example  in the question, it appears to me that what is wanted is to shift all non-zero elements to the left, and zero elements are shifted to the right. The order of the non-zero elements is to be retained. \r\n\r\nNote that each row is independent of other rows.\r\n\r\nOne way to approach this is to create a method that works on a 1D array. This method takes a 1D array as a parameter, and returns another 1D array with the elements shifted:\r\n\r\n    public static int [] zeroShift (int [] arr) {\r\n        int [] left = new int [arr.length];\r\n        int count = 0;\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            if (arr[i] != 0) {\r\n                left [count++] = arr [i];\r\n            }\r\n        }\r\n        return  left;\r\n    }\r\n\r\nThis copies each non-zero element to a new array of the same size, keeping track (`count`) of how many have been copied so far.  Note this relies on `left` being initialized to all-zeros.  \r\n\r\nOnce that method is working, it can be used for `gameBoard` on a row-by-row basis:\r\n\r\n     public void swipeLeft() {\r\n        for (int r = 0; r &lt; gameBoard.length; r++) {\r\n            gameBoard [r] = zeroShift (gameBoard [r]);\r\n        }  \r\n  \r\n        // output for testing \r\n        for (int i = 0; i &lt; gameBoard.length; ++i) {\r\n            System.out.println(Arrays.toString(gameBoard[i]));\r\n        }\r\n    }","title":"How to shift everything in a 2D array to the left","body":"<p>From the example  in the question, it appears to me that what is wanted is to shift all non-zero elements to the left, and zero elements are shifted to the right. The order of the non-zero elements is to be retained.</p>\n<p>Note that each row is independent of other rows.</p>\n<p>One way to approach this is to create a method that works on a 1D array. This method takes a 1D array as a parameter, and returns another 1D array with the elements shifted:</p>\n<pre><code>public static int [] zeroShift (int [] arr) {\n    int [] left = new int [arr.length];\n    int count = 0;\n    for (int i = 0; i &lt; arr.length; i++) {\n        if (arr[i] != 0) {\n            left [count++] = arr [i];\n        }\n    }\n    return  left;\n}\n</code></pre>\n<p>This copies each non-zero element to a new array of the same size, keeping track (<code>count</code>) of how many have been copied so far.  Note this relies on <code>left</code> being initialized to all-zeros.</p>\n<p>Once that method is working, it can be used for <code>gameBoard</code> on a row-by-row basis:</p>\n<pre><code> public void swipeLeft() {\n    for (int r = 0; r &lt; gameBoard.length; r++) {\n        gameBoard [r] = zeroShift (gameBoard [r]);\n    }  \n\n    // output for testing \n    for (int i = 0; i &lt; gameBoard.length; ++i) {\n        System.out.println(Arrays.toString(gameBoard[i]));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675207520,"creation_date":1675207520,"answer_id":75304166,"question_id":75302468,"body_markdown":"Based on your desired OUTPUT, it looks like `swipeLeft()` is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values.\r\n\r\nIf that&#39;s correct, this is similar to Old Dog Programmer&#39;s approach, except all shifting is done &quot;in place&quot; without creating any new arrays:\r\n\r\n    import java.util.*;\r\n    class Main {\r\n    \r\n      private static int[][] gameBoard;\r\n      \r\n      public static void main(String[] args) {\r\n        gameBoard = new int[][] {\r\n          {0, 2, 4, 2},\r\n          {0, 0, 2, 0},\r\n          {2, 2, 0, 0},\r\n          {0, 4, 0, 2}\r\n        };\r\n    \r\n        System.out.println(&quot;Before:&quot;);\r\n        displayBoard();\r\n    \r\n        swipeLeft();\r\n        \r\n        System.out.println(&quot;\\nAfter:&quot;);\r\n        displayBoard();\r\n      }\r\n    \r\n      public static void displayBoard() {\r\n        for(int[] row : gameBoard) {\r\n          System.out.println(Arrays.toString(row));  \r\n        }\r\n      }\r\n    \r\n      public static void swipeLeft() {\r\n        for(int[] row : gameBoard) {\r\n          // find the first blank (zero) spot\r\n          int nextIndex = 0;\r\n          while(nextIndex &lt; row.length &amp;&amp; row[nextIndex] != 0) {\r\n            nextIndex++;\r\n          }\r\n          // start with the first blank, and shift any non-zero\r\n          // values afterwards to the left\r\n          for(int col=nextIndex; col &lt; row.length; col++) {\r\n            if (row[col] != 0) {\r\n              row[nextIndex] = row[col];\r\n              row[col] = 0;\r\n              nextIndex++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\nOutput:\r\n\r\n    Before:\r\n    [0, 2, 4, 2]\r\n    [0, 0, 2, 0]\r\n    [2, 2, 0, 0]\r\n    [0, 4, 0, 2]\r\n    \r\n    After:\r\n    [2, 4, 2, 0]\r\n    [2, 0, 0, 0]\r\n    [2, 2, 0, 0]\r\n    [4, 2, 0, 0]\r\n\r\n","title":"How to shift everything in a 2D array to the left","body":"<p>Based on your desired OUTPUT, it looks like <code>swipeLeft()</code> is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values.</p>\n<p>If that's correct, this is similar to Old Dog Programmer's approach, except all shifting is done &quot;in place&quot; without creating any new arrays:</p>\n<pre><code>import java.util.*;\nclass Main {\n\n  private static int[][] gameBoard;\n  \n  public static void main(String[] args) {\n    gameBoard = new int[][] {\n      {0, 2, 4, 2},\n      {0, 0, 2, 0},\n      {2, 2, 0, 0},\n      {0, 4, 0, 2}\n    };\n\n    System.out.println(&quot;Before:&quot;);\n    displayBoard();\n\n    swipeLeft();\n    \n    System.out.println(&quot;\\nAfter:&quot;);\n    displayBoard();\n  }\n\n  public static void displayBoard() {\n    for(int[] row : gameBoard) {\n      System.out.println(Arrays.toString(row));  \n    }\n  }\n\n  public static void swipeLeft() {\n    for(int[] row : gameBoard) {\n      // find the first blank (zero) spot\n      int nextIndex = 0;\n      while(nextIndex &lt; row.length &amp;&amp; row[nextIndex] != 0) {\n        nextIndex++;\n      }\n      // start with the first blank, and shift any non-zero\n      // values afterwards to the left\n      for(int col=nextIndex; col &lt; row.length; col++) {\n        if (row[col] != 0) {\n          row[nextIndex] = row[col];\n          row[col] = 0;\n          nextIndex++;\n        }\n      }\n    }\n  }\n  \n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Before:\n[0, 2, 4, 2]\n[0, 0, 2, 0]\n[2, 2, 0, 0]\n[0, 4, 0, 2]\n\nAfter:\n[2, 4, 2, 0]\n[2, 0, 0, 0]\n[2, 2, 0, 0]\n[4, 2, 0, 0]\n</code></pre>\n"}],"owner":{"display_name":"user21120780"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75304166,"answer_count":4,"score":-1,"last_activity_date":1675207520,"creation_date":1675194852,"question_id":75302468,"body_markdown":"I need to take a 2D array and move everything as far left as possible. It is a 4x4 array and I have tried to do it but either only move certain items or the index goes out of bounds. \r\n\r\nThe gameBoard array looks like this:\r\n\r\n    {0 2 4 2}\r\n    {0 0 2 0}\r\n    {2 2 0 0}\r\n    {0 4 0 2}\r\n\r\nand after you call the swipeLeft() method it should look like this:\r\n\r\n    {2 4 2 0}\r\n    {2 0 0 0}\r\n    {2 2 0 0}\r\n    {4 2 0 0}\r\n\r\nThere is also the issue of placing a zero into the previous index that you moved it from.\r\n\r\nI created a double for loop to just loop through the array and tried to code something that would move it over but it hasn&#39;t worked. \r\n\r\nHere was the code I had so far\r\n\r\n    public void swipeLeft() {\r\n       \r\n        for ( int r = 0; r &lt; gameBoard.length; r++ ) {\r\n            for ( int c = 0; c &lt; gameBoard[r].length; c++ ) {\r\n                \r\n                gameBoard[r][c] = gameBoard[r][ (c+1) % \r\n                                                    gameBoard.length];\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n","title":"How to shift everything in a 2D array to the left","body":"<p>I need to take a 2D array and move everything as far left as possible. It is a 4x4 array and I have tried to do it but either only move certain items or the index goes out of bounds.</p>\n<p>The gameBoard array looks like this:</p>\n<pre><code>{0 2 4 2}\n{0 0 2 0}\n{2 2 0 0}\n{0 4 0 2}\n</code></pre>\n<p>and after you call the swipeLeft() method it should look like this:</p>\n<pre><code>{2 4 2 0}\n{2 0 0 0}\n{2 2 0 0}\n{4 2 0 0}\n</code></pre>\n<p>There is also the issue of placing a zero into the previous index that you moved it from.</p>\n<p>I created a double for loop to just loop through the array and tried to code something that would move it over but it hasn't worked.</p>\n<p>Here was the code I had so far</p>\n<pre><code>public void swipeLeft() {\n   \n    for ( int r = 0; r &lt; gameBoard.length; r++ ) {\n        for ( int c = 0; c &lt; gameBoard[r].length; c++ ) {\n            \n            gameBoard[r][c] = gameBoard[r][ (c+1) % \n                                                gameBoard.length];\n        }\n    }\n\n    \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dropwizard"],"owner":{"account_id":26669791,"reputation":41,"user_id":20281373,"display_name":"Reid2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675205859,"creation_date":1675205859,"question_id":75304015,"body_markdown":"I&#39;m currently porting my app from Drop Wizard to Spring Boot. But, I cant find a equivalent for `DropwizardAppExtension`. \r\n\r\n\r\nFor example: \r\n```java\r\nprivate static final ResourceExtension resource = ResourceExtension.builder()\r\n            .addResource(new Controller(NEO4J_CLIENT))\r\n            .build();\r\n\r\n@Test\r\npublic void myTest() {\r\n       final Invocation.Builder request = resource.target(&quot;/documents&quot;) \r\n               .queryParam(&quot;ids&quot;, &quot;111&quot;)\r\n               .request();\r\n\r\n       Map&lt;String, Object&gt; response = request.get(TYPED_MAP);\r\n\r\n       assertEquals(expectedResponse, response);\r\n}\r\n```\r\n\r\n\r\nDoes anyone know if there is a Spring boot equivalent for DropwizardAppExtension? How would I create simular tests using spring-boot-starter-test?\r\n","title":"Spring boot equivalent of DropwizardAppExtension?","body":"<p>I'm currently porting my app from Drop Wizard to Spring Boot. But, I cant find a equivalent for <code>DropwizardAppExtension</code>.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final ResourceExtension resource = ResourceExtension.builder()\n            .addResource(new Controller(NEO4J_CLIENT))\n            .build();\n\n@Test\npublic void myTest() {\n       final Invocation.Builder request = resource.target(&quot;/documents&quot;) \n               .queryParam(&quot;ids&quot;, &quot;111&quot;)\n               .request();\n\n       Map&lt;String, Object&gt; response = request.get(TYPED_MAP);\n\n       assertEquals(expectedResponse, response);\n}\n</code></pre>\n<p>Does anyone know if there is a Spring boot equivalent for DropwizardAppExtension? How would I create simular tests using spring-boot-starter-test?</p>\n"},{"tags":["java","spring","prometheus"],"answers":[{"comments":[{"owner":{"account_id":2829213,"reputation":346,"user_id":2431123,"display_name":"martinsefcik"},"score":3,"creation_date":1654758672,"post_id":60876125,"comment_id":128169286,"body_markdown":"I don&#39;t see any workarounds mentioned on the link you provided.","body":"I don&#39;t see any workarounds mentioned on the link you provided."},{"owner":{"display_name":"user4538583"},"score":0,"creation_date":1696275621,"post_id":60876125,"comment_id":136129792,"body_markdown":"Definitely don&#39;t see any workarounds mentioned in that link, but our error was caused by an external client registering multiple CollectorRegistries.","body":"Definitely don&#39;t see any workarounds mentioned in that link, but our error was caused by an external client registering multiple CollectorRegistries."}],"tags":[],"owner":{"account_id":18065663,"reputation":49,"user_id":13131627,"display_name":"Fredrik R&#248;dland"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1585256788,"creation_date":1585256788,"answer_id":60876125,"question_id":52900234,"body_markdown":"This is probably due to the context being reloaded, and thus collectors trying to re-register to the static `CollectorRegistry.defaultRegistry`.\r\n\r\nSee more info and work-arounds here: https://github.com/prometheus/jmx_exporter/issues/290","title":"Prometheus Error: Collector already registered that provides name: http_client_requests_count","body":"<p>This is probably due to the context being reloaded, and thus collectors trying to re-register to the static <code>CollectorRegistry.defaultRegistry</code>.</p>\n\n<p>See more info and work-arounds here: <a href=\"https://github.com/prometheus/jmx_exporter/issues/290\" rel=\"noreferrer\">https://github.com/prometheus/jmx_exporter/issues/290</a></p>\n"},{"comments":[{"owner":{"account_id":16298094,"reputation":136,"user_id":11769866,"display_name":"Saptarshi"},"score":1,"creation_date":1693203140,"post_id":75304000,"comment_id":135723879,"body_markdown":"`@AfterEach` should be fine. After adding this annotation, my issue got resolved.","body":"<code>@AfterEach</code> should be fine. After adding this annotation, my issue got resolved."},{"owner":{"display_name":"user4538583"},"score":0,"creation_date":1696275516,"post_id":75304000,"comment_id":136129771,"body_markdown":"@AfterEach sufficed for us too. Maybe this is could be helpful to others: we ran into this problem, but the reporting IT test failure was not actually the test causing the problem. We first added it to the reported test which didn&#39;t change anything. We then added this to all of our ITs and it fixed it. We then determined by trial and error removing them to single out the test causing the failure.","body":"@AfterEach sufficed for us too. Maybe this is could be helpful to others: we ran into this problem, but the reporting IT test failure was not actually the test causing the problem. We first added it to the reported test which didn&#39;t change anything. We then added this to all of our ITs and it fixed it. We then determined by trial and error removing them to single out the test causing the failure."}],"tags":[],"owner":{"account_id":5139737,"reputation":3288,"user_id":4117496,"accept_rate":89,"display_name":"Fisher Coder"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1675205739,"creation_date":1675205739,"answer_id":75304000,"question_id":52900234,"body_markdown":"I encountered a similar error in my tests, what I ended up doing to fix this error was to:\r\n\r\n```\r\n    @BeforeEach\r\n    @AfterEach\r\n    public void cleanup() {\r\n        CollectorRegistry.defaultRegistry.clear();\r\n    }\r\n```","title":"Prometheus Error: Collector already registered that provides name: http_client_requests_count","body":"<p>I encountered a similar error in my tests, what I ended up doing to fix this error was to:</p>\n<pre><code>    @BeforeEach\n    @AfterEach\n    public void cleanup() {\n        CollectorRegistry.defaultRegistry.clear();\n    }\n</code></pre>\n"}],"owner":{"account_id":12331913,"reputation":651,"user_id":8997572,"accept_rate":57,"display_name":"kramsiv94"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10374,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1675205739,"creation_date":1539985147,"question_id":52900234,"body_markdown":"I&#39;m seeing this odd Prometheus-related error: \r\n\r\n    RESTful call failed. Cause: Collector already registered that provides name: http_client_requests_count \r\n\r\nI didn&#39;t include a http_client_requests_count metric in my project -- so what gives? Where the heck is this coming from?","title":"Prometheus Error: Collector already registered that provides name: http_client_requests_count","body":"<p>I'm seeing this odd Prometheus-related error: </p>\n\n<pre><code>RESTful call failed. Cause: Collector already registered that provides name: http_client_requests_count \n</code></pre>\n\n<p>I didn't include a http_client_requests_count metric in my project -- so what gives? Where the heck is this coming from?</p>\n"},{"tags":["java","apache-beam","apache-beam-io"],"answers":[{"tags":[],"owner":{"account_id":3830132,"reputation":1318,"user_id":3175889,"display_name":"ningk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675205667,"creation_date":1651604392,"answer_id":72104227,"question_id":72052676,"body_markdown":"It depends on which runner you are using and what options they offer. A similar question is https://stackoverflow.com/questions/56950728/join-two-large-volumne-of-pcollection-has-performance-issue.\r\n\r\nIf you are using the DataflowRunner, you can enable the shuffle service to speed up the process. However, according to [documentation](https://cloud.google.com/dataflow/docs/shuffle-for-batch#use_shuffle), this option is currently enabled on Dataflow by default.\r\n\r\n\r\n  [1]: https://cloud.google.com/dataflow/docs/shuffle-for-batch#use_shuffle","title":"Using CombineFn instead of CoGroupByKey to handle hotkeys","body":"<p>It depends on which runner you are using and what options they offer. A similar question is <a href=\"https://stackoverflow.com/questions/56950728/join-two-large-volumne-of-pcollection-has-performance-issue\">Join two large volumne of PCollection has performance issue</a>.</p>\n<p>If you are using the DataflowRunner, you can enable the shuffle service to speed up the process. However, according to <a href=\"https://cloud.google.com/dataflow/docs/shuffle-for-batch#use_shuffle\" rel=\"nofollow noreferrer\">documentation</a>, this option is currently enabled on Dataflow by default.</p>\n"}],"owner":{"account_id":2430697,"reputation":524,"user_id":2121671,"accept_rate":56,"display_name":"Mitesh Pant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675205667,"creation_date":1651204766,"question_id":72052676,"body_markdown":"I have a two very huge PCollections `&lt;KV&lt;Long,XYZ&gt;&gt;` and `&lt;KV&lt;Long,ABC&gt;&gt;`. I need to create a PCollection `&lt;KV&lt;XYZ,ABC&gt;&gt;` which I am able to using `CoGroupByKey.create()` transform. It works fine for smaller data set but in case of hotkeys it gets stuck. I am new to beam, I am trying to figure out how to use `CombineFn` to solve this. For now my code looks like this \r\n```\r\nfinal PCollection &lt;KV&lt;Long,XYZ&gt;&gt; xyzKV;\r\nfinal PCollection &lt;KV&lt;Long,ABC&gt;&gt; abcKV;\r\nfinal TupleTag&lt;XYZ&gt; t1 = new TupleTag&lt;&gt;();\r\nfinal TupleTag&lt;ABC&gt; t1 = new TupleTag&lt;&gt;();\r\nfinal PCollection &lt;KV&lt;XYZ,ABC&gt;&gt; combinedCollection = \r\n                               KeyedPCollectionTuple.of(t1, xyzKV).and(t2, abcKV)\r\n    .apply(CoGroupByKey.create());\r\n    \r\n// this works fine but has performance issues in case of hotkeys.\r\n\r\n```","title":"Using CombineFn instead of CoGroupByKey to handle hotkeys","body":"<p>I have a two very huge PCollections <code>&lt;KV&lt;Long,XYZ&gt;&gt;</code> and <code>&lt;KV&lt;Long,ABC&gt;&gt;</code>. I need to create a PCollection <code>&lt;KV&lt;XYZ,ABC&gt;&gt;</code> which I am able to using <code>CoGroupByKey.create()</code> transform. It works fine for smaller data set but in case of hotkeys it gets stuck. I am new to beam, I am trying to figure out how to use <code>CombineFn</code> to solve this. For now my code looks like this</p>\n<pre><code>final PCollection &lt;KV&lt;Long,XYZ&gt;&gt; xyzKV;\nfinal PCollection &lt;KV&lt;Long,ABC&gt;&gt; abcKV;\nfinal TupleTag&lt;XYZ&gt; t1 = new TupleTag&lt;&gt;();\nfinal TupleTag&lt;ABC&gt; t1 = new TupleTag&lt;&gt;();\nfinal PCollection &lt;KV&lt;XYZ,ABC&gt;&gt; combinedCollection = \n                               KeyedPCollectionTuple.of(t1, xyzKV).and(t2, abcKV)\n    .apply(CoGroupByKey.create());\n    \n// this works fine but has performance issues in case of hotkeys.\n\n</code></pre>\n"},{"tags":["java","amazon-s3","spring-batch","large-data","large-files"],"answers":[{"tags":[],"owner":{"account_id":1985248,"reputation":364,"user_id":1780668,"accept_rate":42,"display_name":"Vignesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634824593,"creation_date":1634824593,"answer_id":69663319,"question_id":69652446,"body_markdown":"Making use of the ResourceLoader, we could read files in S3 in ItemReader as like other resource. This would help to read files in S3 in chunks instead of loading entire file into memory.\r\n\r\nWith the dependencies injected for `ResourceLoader` and `AmazonS3 client`, have changed reader configuration as below:\r\n\r\nReplace values for `sourceBucket` and `sourceObjectPrefix` as needed.\r\n\r\n    @Autowired\r\n    private ResourceLoader resourceLoader;\r\n\r\n    @Autowired\r\n    private AmazonS3 amazonS3Client;\r\n\r\n    // READER\r\n    @Bean(destroyMethod=&quot;&quot;)\r\n    @StepScope\r\n    public SynchronizedItemStreamReader&lt;Employee&gt; employeeDataReader() {\r\n        SynchronizedItemStreamReader synchronizedItemStreamReader = new SynchronizedItemStreamReader();\r\n        List&lt;Resource&gt; resourceList = new ArrayList&lt;&gt;();\r\n        String sourceBucket = yourBucketName;\r\n        String sourceObjectPrefix = yourSourceObjectPrefix;\r\n        log.info(&quot;sourceObjectPrefix::&quot;+sourceObjectPrefix);\r\n        ListObjectsRequest listObjectsRequest = new ListObjectsRequest()\r\n                .withBucketName(sourceBucket)\r\n                .withPrefix(sourceObjectPrefix);\r\n        ObjectListing sourceObjectsListing;\r\n        do{\r\n            sourceObjectsListing = amazonS3Client.listObjects(listObjectsRequest);\r\n            for (S3ObjectSummary sourceFile : sourceObjectsListing.getObjectSummaries()){\r\n\r\n                if(!(sourceFile.getSize() &gt; 0)\r\n                        || (!sourceFile.getKey().endsWith(DOT.concat(&quot;csv&quot;)))\r\n                ){\r\n                    // Skip if file is empty (or) file extension is not &quot;csv&quot;\r\n                    continue;\r\n                }\r\n                log.info(&quot;Reading &quot;+sourceFile.getKey());\r\n                resourceList.add(resourceLoader.getResource(&quot;s3://&quot;.concat(sourceBucket).concat(&quot;/&quot;)\r\n                        .concat(sourceFile.getKey())));\r\n            }\r\n            listObjectsRequest.setMarker(sourceObjectsListing.getNextMarker());\r\n        }while(sourceObjectsListing.isTruncated());\r\n\r\n        Resource[] resources = resourceList.toArray(new Resource[resourceList.size()]);\r\n        MultiResourceItemReader&lt;Employee&gt; multiResourceItemReader = new MultiResourceItemReader&lt;&gt;();\r\n        multiResourceItemReader.setName(&quot;employee-multiResource-Reader&quot;);\r\n        multiResourceItemReader.setResources(resources);\r\n        multiResourceItemReader.setDelegate(employeeFileItemReader());\r\n        synchronizedItemStreamReader.setDelegate(multiResourceItemReader);\r\n        return synchronizedItemStreamReader;\r\n    }\r\n\r\n    @Bean\r\n    @StepScope\r\n    public FlatFileItemReader&lt;Employee&gt; employeeFileItemReader()\r\n    {\r\n        FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\r\n        reader.setLinesToSkip(1);\r\n        reader.setLineMapper(new DefaultLineMapper() {\r\n            {\r\n                setLineTokenizer(new DelimitedLineTokenizer() {\r\n                    {\r\n                        setNames(Employee.fields());\r\n                    }\r\n                });\r\n                setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\r\n                    {\r\n                        setTargetType(Employee.class);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return reader;\r\n    }\r\n\r\n\r\nHave used MultiResourceItemReader as example. This would work even if there are multiple CSV files in the particular S3 path you are looking for.\r\n\r\nFor processing only one CSV file in a location it would work implicitly as well with `Resources[] resources` containing one entry.","title":"How to process a large file from S3 and use it in spring batch","body":"<p>Making use of the ResourceLoader, we could read files in S3 in ItemReader as like other resource. This would help to read files in S3 in chunks instead of loading entire file into memory.</p>\n<p>With the dependencies injected for <code>ResourceLoader</code> and <code>AmazonS3 client</code>, have changed reader configuration as below:</p>\n<p>Replace values for <code>sourceBucket</code> and <code>sourceObjectPrefix</code> as needed.</p>\n<pre><code>@Autowired\nprivate ResourceLoader resourceLoader;\n\n@Autowired\nprivate AmazonS3 amazonS3Client;\n\n// READER\n@Bean(destroyMethod=&quot;&quot;)\n@StepScope\npublic SynchronizedItemStreamReader&lt;Employee&gt; employeeDataReader() {\n    SynchronizedItemStreamReader synchronizedItemStreamReader = new SynchronizedItemStreamReader();\n    List&lt;Resource&gt; resourceList = new ArrayList&lt;&gt;();\n    String sourceBucket = yourBucketName;\n    String sourceObjectPrefix = yourSourceObjectPrefix;\n    log.info(&quot;sourceObjectPrefix::&quot;+sourceObjectPrefix);\n    ListObjectsRequest listObjectsRequest = new ListObjectsRequest()\n            .withBucketName(sourceBucket)\n            .withPrefix(sourceObjectPrefix);\n    ObjectListing sourceObjectsListing;\n    do{\n        sourceObjectsListing = amazonS3Client.listObjects(listObjectsRequest);\n        for (S3ObjectSummary sourceFile : sourceObjectsListing.getObjectSummaries()){\n\n            if(!(sourceFile.getSize() &gt; 0)\n                    || (!sourceFile.getKey().endsWith(DOT.concat(&quot;csv&quot;)))\n            ){\n                // Skip if file is empty (or) file extension is not &quot;csv&quot;\n                continue;\n            }\n            log.info(&quot;Reading &quot;+sourceFile.getKey());\n            resourceList.add(resourceLoader.getResource(&quot;s3://&quot;.concat(sourceBucket).concat(&quot;/&quot;)\n                    .concat(sourceFile.getKey())));\n        }\n        listObjectsRequest.setMarker(sourceObjectsListing.getNextMarker());\n    }while(sourceObjectsListing.isTruncated());\n\n    Resource[] resources = resourceList.toArray(new Resource[resourceList.size()]);\n    MultiResourceItemReader&lt;Employee&gt; multiResourceItemReader = new MultiResourceItemReader&lt;&gt;();\n    multiResourceItemReader.setName(&quot;employee-multiResource-Reader&quot;);\n    multiResourceItemReader.setResources(resources);\n    multiResourceItemReader.setDelegate(employeeFileItemReader());\n    synchronizedItemStreamReader.setDelegate(multiResourceItemReader);\n    return synchronizedItemStreamReader;\n}\n\n@Bean\n@StepScope\npublic FlatFileItemReader&lt;Employee&gt; employeeFileItemReader()\n{\n    FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\n    reader.setLinesToSkip(1);\n    reader.setLineMapper(new DefaultLineMapper() {\n        {\n            setLineTokenizer(new DelimitedLineTokenizer() {\n                {\n                    setNames(Employee.fields());\n                }\n            });\n            setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\n                {\n                    setTargetType(Employee.class);\n                }\n            });\n        }\n    });\n    return reader;\n}\n</code></pre>\n<p>Have used MultiResourceItemReader as example. This would work even if there are multiple CSV files in the particular S3 path you are looking for.</p>\n<p>For processing only one CSV file in a location it would work implicitly as well with <code>Resources[] resources</code> containing one entry.</p>\n"}],"owner":{"account_id":21733790,"reputation":387,"user_id":16042088,"display_name":"Mike Marsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3211,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1675204854,"creation_date":1634760565,"question_id":69652446,"body_markdown":"I&#39;ve CSV file which contains millions of records and the size will be around 2GB. My use case here is to read the CSV file from S3 and process it. Please find my code below:\r\n\r\nIn the below code, I&#39;m reading a file from S3 bucket and using the `inputStream` directly in the Spring batch **FlatFileItemReader** `reader.setResource(new InputStreamResource(inputStream));`\r\n\r\nAs per this implementation, I&#39;m holding 2GB of content in memory and processing it which is not an efficient way of doing it - can someone please suggest what is the efficient way of reading a large file from the S3 bucket and processing it in the Spring batch.\r\n\r\nAppreciated your help in advance! Thanks.\r\n\r\n\r\n\r\n    @Component\r\n    public class GetFileFromS3 {\r\n    \r\n        public S3ObjectInputStream dowloadFile(String keyName, String bucketName, String region) {\r\n            try {\r\n                AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withClientConfiguration(new ClientConfiguration())\r\n                        .withRegion(region).build();\r\n    \r\n                S3Object s3object = s3Client.getObject(bucketName, keyName);\r\n                return s3object.getObjectContent();\r\n            } catch (AmazonServiceException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n \r\n\r\n    public class SpringBatch {\r\n    \r\n        @Autowired\r\n        private GetFileFromS3 getFileFromS3;\r\n    \r\n    \r\n     @Bean(name = &quot;csvFile&quot;)\r\n        public Step step1() {\r\n            return stepBuilderFactory.get(&quot;step1&quot;).&lt;Employee, Employee&gt;chunk(10)\r\n                    .reader(reader())\r\n                    .processor(processor())\r\n                    .writer(writer())\r\n                    .build();\r\n        }\r\n    \r\n        @Bean\r\n        public FlatFileItemReader&lt;Employee&gt; reader() {\r\n            S3ObjectInputStream inputStream = getFileFromS3.dowloadFile(&quot;employee.csv&quot;, &quot;testBucket&quot;, &quot;us-east-1&quot;);\r\n            FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\r\n            reader.setResource(new InputStreamResource(inputStream));\r\n            reader.setLinesToSkip(1);\r\n            reader.setLineMapper(new DefaultLineMapper() {\r\n                {\r\n                    setLineTokenizer(new DelimitedLineTokenizer() {\r\n                        {\r\n                            setNames(Employee.fields());\r\n                        }\r\n                    });\r\n                    setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\r\n                        {\r\n                            setTargetType(Employee.class);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            return reader;\r\n        }\r\n    \r\n        @Bean\r\n        public ItemProcessor&lt;Employee, Employee&gt; processor() {\r\n            return new ItemProcessor();\r\n        }\r\n    \r\n        @Bean\r\n        public ItemWriter&lt;Employee&gt; writer() {\r\n            return new ItemWriter&lt;Event&gt;();\r\n        }\r\n    \r\n        }","title":"How to process a large file from S3 and use it in spring batch","body":"<p>I've CSV file which contains millions of records and the size will be around 2GB. My use case here is to read the CSV file from S3 and process it. Please find my code below:</p>\n<p>In the below code, I'm reading a file from S3 bucket and using the <code>inputStream</code> directly in the Spring batch <strong>FlatFileItemReader</strong> <code>reader.setResource(new InputStreamResource(inputStream));</code></p>\n<p>As per this implementation, I'm holding 2GB of content in memory and processing it which is not an efficient way of doing it - can someone please suggest what is the efficient way of reading a large file from the S3 bucket and processing it in the Spring batch.</p>\n<p>Appreciated your help in advance! Thanks.</p>\n<pre><code>@Component\npublic class GetFileFromS3 {\n\n    public S3ObjectInputStream dowloadFile(String keyName, String bucketName, String region) {\n        try {\n            AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withClientConfiguration(new ClientConfiguration())\n                    .withRegion(region).build();\n\n            S3Object s3object = s3Client.getObject(bucketName, keyName);\n            return s3object.getObjectContent();\n        } catch (AmazonServiceException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n}\n\n\n\n\npublic class SpringBatch {\n\n    @Autowired\n    private GetFileFromS3 getFileFromS3;\n\n\n @Bean(name = &quot;csvFile&quot;)\n    public Step step1() {\n        return stepBuilderFactory.get(&quot;step1&quot;).&lt;Employee, Employee&gt;chunk(10)\n                .reader(reader())\n                .processor(processor())\n                .writer(writer())\n                .build();\n    }\n\n    @Bean\n    public FlatFileItemReader&lt;Employee&gt; reader() {\n        S3ObjectInputStream inputStream = getFileFromS3.dowloadFile(&quot;employee.csv&quot;, &quot;testBucket&quot;, &quot;us-east-1&quot;);\n        FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\n        reader.setResource(new InputStreamResource(inputStream));\n        reader.setLinesToSkip(1);\n        reader.setLineMapper(new DefaultLineMapper() {\n            {\n                setLineTokenizer(new DelimitedLineTokenizer() {\n                    {\n                        setNames(Employee.fields());\n                    }\n                });\n                setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\n                    {\n                        setTargetType(Employee.class);\n                    }\n                });\n            }\n        });\n        return reader;\n    }\n\n    @Bean\n    public ItemProcessor&lt;Employee, Employee&gt; processor() {\n        return new ItemProcessor();\n    }\n\n    @Bean\n    public ItemWriter&lt;Employee&gt; writer() {\n        return new ItemWriter&lt;Event&gt;();\n    }\n\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675431449,"post_id":75303700,"comment_id":132932960,"body_markdown":"`writeUTF` expects a string, you&#39;re trying to write an int. Either you need to convert the int to string, or you need to use one of the other methods. As an aside, are you really sure you should be using `DataOutputStream`?","body":"<code>writeUTF</code> expects a string, you&#39;re trying to write an int. Either you need to convert the int to string, or you need to use one of the other methods. As an aside, are you really sure you should be using <code>DataOutputStream</code>?"}],"answers":[{"tags":[],"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675204422,"creation_date":1675204422,"answer_id":75303854,"question_id":75303700,"body_markdown":"If you take a look at [the docs of that class](https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#method_summary), you can see that each type has its own method for writing it to the `DataOutputStream`.\r\n\r\nThat means to write a `double`, use the `writeDouble` method and the `writeInt` method for `int` values.\r\n\r\nThe `UTF` in `writeUTF(String)` hint at the fact that the `String` will be written to the stream in a specific encoding. A UTF encoding only makes sense for writing `String`s.\r\n","title":"WriteUTF cannot be applied to (int)","body":"<p>If you take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#method_summary\" rel=\"nofollow noreferrer\">the docs of that class</a>, you can see that each type has its own method for writing it to the <code>DataOutputStream</code>.</p>\n<p>That means to write a <code>double</code>, use the <code>writeDouble</code> method and the <code>writeInt</code> method for <code>int</code> values.</p>\n<p>The <code>UTF</code> in <code>writeUTF(String)</code> hint at the fact that the <code>String</code> will be written to the stream in a specific encoding. A UTF encoding only makes sense for writing <code>String</code>s.</p>\n"}],"owner":{"account_id":26557336,"reputation":3,"user_id":20185739,"display_name":"gangrx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303854,"answer_count":1,"score":0,"last_activity_date":1675204422,"creation_date":1675203245,"question_id":75303700,"body_markdown":"```\r\nfor (Account accountObj : accounts) {\r\n                System.out.print(accountObj);\r\n                account.writeUTF(accountObj.getAccountHolderName());\r\n                account.writeUTF(accountObj.getAccountType());\r\n                account.writeUTF(accountObj.getBalance());\r\n                account.writeUTF(accountObj.getAccountNumber());\r\n\r\n            }\r\n```\r\n&#39;writeUTF(java.lang.String)&#39; in &#39;java.io.DataOutputStream&#39; cannot be applied to &#39;(double)&#39;\r\n&#39;writeUTF(java.lang.String)&#39; in &#39;java.io.DataOutputStream&#39; cannot be applied to &#39;(int)&#39;\r\n\r\nso, I got these two errors, and I even tried parseInt and double before storing the values in the ArrayList yet, am a little confused, some help would be kind : ) ","title":"WriteUTF cannot be applied to (int)","body":"<pre><code>for (Account accountObj : accounts) {\n                System.out.print(accountObj);\n                account.writeUTF(accountObj.getAccountHolderName());\n                account.writeUTF(accountObj.getAccountType());\n                account.writeUTF(accountObj.getBalance());\n                account.writeUTF(accountObj.getAccountNumber());\n\n            }\n</code></pre>\n<p>'writeUTF(java.lang.String)' in 'java.io.DataOutputStream' cannot be applied to '(double)'\n'writeUTF(java.lang.String)' in 'java.io.DataOutputStream' cannot be applied to '(int)'</p>\n<p>so, I got these two errors, and I even tried parseInt and double before storing the values in the ArrayList yet, am a little confused, some help would be kind : )</p>\n"},{"tags":["java","spring-boot","authentication"],"comments":[{"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"score":0,"creation_date":1675111978,"post_id":75289718,"comment_id":132854901,"body_markdown":"That is most likely happening because of your `authenticationJwtTokenFilter()`. It&#39;s difficult to tell without having the full config code, but I would start investigating from there","body":"That is most likely happening because of your <code>authenticationJwtTokenFilter()</code>. It&#39;s difficult to tell without having the full config code, but I would start investigating from there"},{"owner":{"account_id":10363660,"reputation":1677,"user_id":8867721,"accept_rate":80,"display_name":"OD1995"},"score":0,"creation_date":1675116882,"post_id":75289718,"comment_id":132856175,"body_markdown":"@Thorne thanks for the reply, I&#39;ve had a look but I can&#39;t see what might be wrong, I&#39;ve added more code if that might be helpful","body":"@Thorne thanks for the reply, I&#39;ve had a look but I can&#39;t see what might be wrong, I&#39;ve added more code if that might be helpful"},{"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"score":0,"creation_date":1675172267,"post_id":75289718,"comment_id":132867868,"body_markdown":"I&#39;ve checked one of my projects which has the same &quot;problem&quot; (the log message didn&#39;t bother me before). At least in my project, the log message comes from a class extending `AuthenticationEntryPoint`. In your case it seems to be injected as `unauthorizedHandler`, judging from `.exceptionHandling().authenticationEntryPoint(unauthorizedHandler)`, so check there.\nAlso, it would be good to see the full log message  it should refer to the exact class which logs the line.","body":"I&#39;ve checked one of my projects which has the same &quot;problem&quot; (the log message didn&#39;t bother me before). At least in my project, the log message comes from a class extending <code>AuthenticationEntryPoint</code>. In your case it seems to be injected as <code>unauthorizedHandler</code>, judging from <code>.exceptionHandling().authenticationEntryPoint(unauthorizedHa&zwnj;&#8203;ndler)</code>, so check there. Also, it would be good to see the full log message  it should refer to the exact class which logs the line."},{"owner":{"account_id":13838021,"reputation":117,"user_id":9989073,"display_name":"ilovestackoverflow"},"score":0,"creation_date":1700076846,"post_id":75289718,"comment_id":136611682,"body_markdown":"@OD1995 I have the exact same issue! Did you manage to solve it?","body":"@OD1995 I have the exact same issue! Did you manage to solve it?"}],"owner":{"account_id":10363660,"reputation":1677,"user_id":8867721,"accept_rate":80,"display_name":"OD1995"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675204154,"creation_date":1675110076,"question_id":75289718,"body_markdown":"I have a Spring Boot app that will log &quot;Unauthorized error: Full authentication is required to access this resource&quot; when one of the endpoints tagged with `permitAll()` is called.\r\n\r\nIf I call any of the `/teams/**` endpoints, I get the response back that I am expecting. However, the above error is logged.\r\n\r\nIf I call any of the endpoints of `/admin/**` or `/test/**` (without the appropriate authorization) I get the above error as expected.\r\n\r\nWhy is the error being logged when nothing is actually going wrong?\r\n\r\n*WebSecurityConfig.java*\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n        // ...\r\n\r\n        @Bean\r\n    \tpublic AuthTokenFilter authenticationJwtTokenFilter() {\r\n    \t\treturn new AuthTokenFilter();\r\n    \t}\r\n\r\n        @Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.cors().and().csrf().disable()\r\n    \t\t\t.exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n    \t\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t.antMatchers(&quot;/api/v1/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n    \t\t\t.antMatchers(&quot;/api/v1/test/**&quot;).hasRole(&quot;USER&quot;)\r\n    \t\t\t.antMatchers(&quot;/api/v1/teams/**&quot;).permitAll()\r\n    \t\t\t.anyRequest().authenticated();\r\n    \t\thttp.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    \t}\r\n    }\r\n\r\n*AuthTokenFilter.java*\r\n\r\n    public class AuthTokenFilter extends OncePerRequestFilter {\r\n    \t@Override\r\n    \tprotected void doFilterInternal(\r\n    \t\t\tHttpServletRequest request,\r\n    \t\t\tHttpServletResponse response,\r\n    \t\t\tFilterChain filterChain\r\n    \t) throws ServletException, IOException {\r\n    \t\ttry {\r\n    \t\t\tString jwt = parseJwt(request);\r\n                // jwt is null for the request I&#39;m referring to\r\n    \t\t\tif (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n    \t\t\t\tString username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n    \t\t\t\tUserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n    \t\t\t\tUsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\r\n    \t\t\t\t\t\tuserDetails,\r\n    \t\t\t\t\t\tnull,\r\n    \t\t\t\t\t\tuserDetails.getAuthorities()\r\n    \t\t\t\t);\r\n    \t\t\t\tauthentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \t\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlogger.error(&quot;Cannot set user authentication: {}&quot;, e);\r\n    \t\t}\r\n    \t\tfilterChain.doFilter(request, response);\r\n    \t}\r\n    \tprivate String parseJwt(HttpServletRequest request) {\r\n    \t\tString headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n    \t\tif (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n    \t\t\treturn headerAuth.substring(7, headerAuth.length());\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n\r\n*Log*\r\n\r\n    m.t.security.jwt.AuthEntryPointJwt       : Unauthorized error: Full authentication is required to access this resource\r\n\r\n*AuthEntryPointJwt.java*\r\n\r\n    package mygroup.tqbcbackend.security.jwt;\r\n    \r\n    import java.io.IOException;\r\n    import java.time.Clock;\r\n    import java.time.ZonedDateTime;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.security.core.AuthenticationException;\r\n    import org.springframework.security.web.AuthenticationEntryPoint;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    \r\n    @Component\r\n    public class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n    \r\n    \tprivate static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n    \r\n    \t@Override\r\n    \tpublic void commence(\r\n    \t\t\tHttpServletRequest request,\r\n    \t\t\tHttpServletResponse response,\r\n    \t\t\tAuthenticationException authException\r\n    \t) throws IOException, ServletException {\r\n    \t\tlogger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n    \r\n    \t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\tresponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n    \t\t\r\n    \t\tfinal Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n    \t\tbody.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n    \t\tbody.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n    \t\tbody.put(&quot;message&quot;, authException.getMessage());\r\n    \t\tbody.put(&quot;path&quot;, request.getServletPath());\r\n    \t\tbody.put(&quot;datetime&quot;, ZonedDateTime.now(Clock.systemUTC()).toString());\r\n    \t\t\r\n    \t\tfinal ObjectMapper mapper = new ObjectMapper();\r\n    \t\tmapper.writeValue(response.getOutputStream(), body);\r\n    \t}\r\n    }\r\n\r\n*Stack Trace*\r\n\r\n    org.springframework.security.authentication.InsufficientAuthenticationException: Full authentication is required to access this resource\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:195)\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:174)\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:143)\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n            at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at mygroup.tqbcbackend.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:54)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n            at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n            at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n            at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)      \r\n            at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n            at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n            at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)      \r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)       \r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)\r\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n            at java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\nLine 54 of `AuthTokenFilter.java` is `filterChain.doFilter(request, response);`","title":"&quot;Unauthorized error: Full authentication is required to access this resource&quot; is logged despite getting a successful response","body":"<p>I have a Spring Boot app that will log &quot;Unauthorized error: Full authentication is required to access this resource&quot; when one of the endpoints tagged with <code>permitAll()</code> is called.</p>\n<p>If I call any of the <code>/teams/**</code> endpoints, I get the response back that I am expecting. However, the above error is logged.</p>\n<p>If I call any of the endpoints of <code>/admin/**</code> or <code>/test/**</code> (without the appropriate authorization) I get the above error as expected.</p>\n<p>Why is the error being logged when nothing is actually going wrong?</p>\n<p><em>WebSecurityConfig.java</em></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    // ...\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n            .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeRequests()\n            .antMatchers(&quot;/api/v1/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n            .antMatchers(&quot;/api/v1/test/**&quot;).hasRole(&quot;USER&quot;)\n            .antMatchers(&quot;/api/v1/teams/**&quot;).permitAll()\n            .anyRequest().authenticated();\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n}\n</code></pre>\n<p><em>AuthTokenFilter.java</em></p>\n<pre><code>public class AuthTokenFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            FilterChain filterChain\n    ) throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            // jwt is null for the request I'm referring to\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\n        }\n        filterChain.doFilter(request, response);\n    }\n    private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7, headerAuth.length());\n        }\n        return null;\n    }\n</code></pre>\n<p><em>Log</em></p>\n<pre><code>m.t.security.jwt.AuthEntryPointJwt       : Unauthorized error: Full authentication is required to access this resource\n</code></pre>\n<p><em>AuthEntryPointJwt.java</em></p>\n<pre><code>package mygroup.tqbcbackend.security.jwt;\n\nimport java.io.IOException;\nimport java.time.Clock;\nimport java.time.ZonedDateTime;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.MediaType;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.stereotype.Component;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\n@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            AuthenticationException authException\n    ) throws IOException, ServletException {\n        logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        \n        final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n        body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n        body.put(&quot;message&quot;, authException.getMessage());\n        body.put(&quot;path&quot;, request.getServletPath());\n        body.put(&quot;datetime&quot;, ZonedDateTime.now(Clock.systemUTC()).toString());\n        \n        final ObjectMapper mapper = new ObjectMapper();\n        mapper.writeValue(response.getOutputStream(), body);\n    }\n}\n</code></pre>\n<p><em>Stack Trace</em></p>\n<pre><code>org.springframework.security.authentication.InsufficientAuthenticationException: Full authentication is required to access this resource\n        at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:195)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:174)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:143)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at mygroup.tqbcbackend.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:54)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)      \n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)      \n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)       \n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Line 54 of <code>AuthTokenFilter.java</code> is <code>filterChain.doFilter(request, response);</code></p>\n"},{"tags":["java","tomcat","weld","tomcat10","embedded-tomcat"],"answers":[{"tags":[],"owner":{"account_id":3858155,"reputation":76,"user_id":3196507,"display_name":"newuser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675204101,"creation_date":1675204101,"answer_id":75303811,"question_id":75254294,"body_markdown":"The Weld example was missing setResources() call which is needed to initialize this properly. \r\n\r\n```\r\n...\r\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\r\nwebResourceRoot.addPreResources(\r\n        new DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\r\n\r\n// this was missing \r\nctx.setResources(webResourceRoot);\r\n...\r\n```\r\n\r\nThis is also easy to miss due to lack of documentation on embedded Tomcat. ","title":"Basic Weld example with Embedded Tomcat not working","body":"<p>The Weld example was missing setResources() call which is needed to initialize this properly.</p>\n<pre><code>...\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\nwebResourceRoot.addPreResources(\n        new DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\n\n// this was missing \nctx.setResources(webResourceRoot);\n...\n</code></pre>\n<p>This is also easy to miss due to lack of documentation on embedded Tomcat.</p>\n"}],"owner":{"account_id":3858155,"reputation":76,"user_id":3196507,"display_name":"newuser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303811,"answer_count":1,"score":0,"last_activity_date":1675204101,"creation_date":1674796219,"question_id":75254294,"body_markdown":"I am trying to use Weld with Embedded Tomcat (10.1.5) using a basic example and settings from official [weld docs][1]. \r\n\r\n**This weld injection with same code works fine with Tomcat on Eclipse.**\r\n\r\nHowever, on Embedded Tomcat, the **injected bean is always null**. If I try to lookup BeanManager using JNDI it throws this error:\r\n\r\n```java\r\n//code\r\nContext initContext = new InitialContext();\r\nbm = (BeanManager) ((Context) initContext.lookup(&quot;java:comp/env&quot;)).lookup(&quot;BeanManager&quot;);\r\n```\r\n```\r\nException: javax.naming.NamingException: WELD-001300: Unable to locate BeanManager\r\n```\r\n\r\nAdded BeanManager entries to context.xml, web.xml, and empty beans.xml to WEB-INF.\r\n\r\ngradle dependency:\r\n```\t\r\nimplementation group: &#39;org.jboss.weld.servlet&#39;, name: &#39;weld-servlet-core&#39;, version: &#39;5.1.0.Final&#39;\r\n```\r\n\r\nmain class:\r\n```java\r\nTomcat tomcat = new Tomcat();\r\nString webappDirLocation = &quot;src/main/webapp/&quot;;\r\nContext ctx = tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\r\n\r\n// declare an alternate location for your &quot;WEB-INF/classes&quot; dir:\r\nFile additionWebInfClasses = new File(&quot;build/classes/java/main/&quot;);\r\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\r\nwebResourceRoot.addPreResources(\r\n\t\tnew DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\r\n\r\nctx.addApplicationListener(Listener.class.getName());\r\n\r\ntomcat.enableNaming();\r\ntomcat.getConnector();\r\ntomcat.start();\r\ntomcat.getServer().await();\r\n\r\n```\r\n\r\nWhat is the issue here? What extra setting is needed to use Weld with Embedded Tomcat ?\r\n\r\n\r\nThere is a curious difference in Weld startup logs too:\r\n```\r\n// Embedded Tomcat\r\nJan 26, 2023 11:50:56 PM org.jboss.weld.environment.servlet.WeldServletLifecycle initialize\r\n\r\n// Tomcat with Eclipse\r\nJan 26, 2023 11:56:43 PM org.jboss.weld.environment.tomcat.TomcatContainer initialize\r\n\r\n```\r\n\r\n\r\n  [1]: https://docs.jboss.org/weld/reference/latest/en-US/html/environments.html#environments","title":"Basic Weld example with Embedded Tomcat not working","body":"<p>I am trying to use Weld with Embedded Tomcat (10.1.5) using a basic example and settings from official <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html/environments.html#environments\" rel=\"nofollow noreferrer\">weld docs</a>.</p>\n<p><strong>This weld injection with same code works fine with Tomcat on Eclipse.</strong></p>\n<p>However, on Embedded Tomcat, the <strong>injected bean is always null</strong>. If I try to lookup BeanManager using JNDI it throws this error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//code\nContext initContext = new InitialContext();\nbm = (BeanManager) ((Context) initContext.lookup(&quot;java:comp/env&quot;)).lookup(&quot;BeanManager&quot;);\n</code></pre>\n<pre><code>Exception: javax.naming.NamingException: WELD-001300: Unable to locate BeanManager\n</code></pre>\n<p>Added BeanManager entries to context.xml, web.xml, and empty beans.xml to WEB-INF.</p>\n<p>gradle dependency:</p>\n<pre><code>implementation group: 'org.jboss.weld.servlet', name: 'weld-servlet-core', version: '5.1.0.Final'\n</code></pre>\n<p>main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Tomcat tomcat = new Tomcat();\nString webappDirLocation = &quot;src/main/webapp/&quot;;\nContext ctx = tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\n\n// declare an alternate location for your &quot;WEB-INF/classes&quot; dir:\nFile additionWebInfClasses = new File(&quot;build/classes/java/main/&quot;);\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\nwebResourceRoot.addPreResources(\n        new DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\n\nctx.addApplicationListener(Listener.class.getName());\n\ntomcat.enableNaming();\ntomcat.getConnector();\ntomcat.start();\ntomcat.getServer().await();\n\n</code></pre>\n<p>What is the issue here? What extra setting is needed to use Weld with Embedded Tomcat ?</p>\n<p>There is a curious difference in Weld startup logs too:</p>\n<pre><code>// Embedded Tomcat\nJan 26, 2023 11:50:56 PM org.jboss.weld.environment.servlet.WeldServletLifecycle initialize\n\n// Tomcat with Eclipse\nJan 26, 2023 11:56:43 PM org.jboss.weld.environment.tomcat.TomcatContainer initialize\n\n</code></pre>\n"},{"tags":["java","spring","mongodb"],"owner":{"account_id":17974936,"reputation":11,"user_id":13062767,"display_name":"Stephen Kross"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675203998,"creation_date":1675203998,"question_id":75303799,"body_markdown":"This is my repository:\r\n\r\n    @Repository\r\n    public interface PluginRepository extends MongoRepository&lt;Plugin, Integer&gt; { }\r\n\r\nHere is a sample of my @Document class:\r\n\r\n    @Document(collection = &quot;plugins&quot;)\r\n    public class Plugin {\r\n    \r\n        @Id\r\n        private int id;\r\n        private HashMap&lt;String, Boolean&gt; files = new HashMap&lt;&gt;(); // sha256 -&gt; malware\r\n\r\nI basically need to return one Plugin where the files map contains a specific key. I don&#39;t care about the value of that HashMap.\r\n\r\nI know Spring has the auto method naming thing since the Repo is an interface. I just don&#39;t know what to name it. I see these on the Spring docs:\r\n\r\n[Spring docs][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dmCLB.png\r\n\r\nBut none seems to be a containsKey option.","title":"Using Mongo&#39;s Spring Boot integration, what method name in the MongoRepository interface would return the document if a Map in it has a specific key?","body":"<p>This is my repository:</p>\n<pre><code>@Repository\npublic interface PluginRepository extends MongoRepository&lt;Plugin, Integer&gt; { }\n</code></pre>\n<p>Here is a sample of my @Document class:</p>\n<pre><code>@Document(collection = &quot;plugins&quot;)\npublic class Plugin {\n\n    @Id\n    private int id;\n    private HashMap&lt;String, Boolean&gt; files = new HashMap&lt;&gt;(); // sha256 -&gt; malware\n</code></pre>\n<p>I basically need to return one Plugin where the files map contains a specific key. I don't care about the value of that HashMap.</p>\n<p>I know Spring has the auto method naming thing since the Repo is an interface. I just don't know what to name it. I see these on the Spring docs:</p>\n<p><a href=\"https://i.stack.imgur.com/dmCLB.png\" rel=\"nofollow noreferrer\">Spring docs</a></p>\n<p>But none seems to be a containsKey option.</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":15144230,"reputation":1347,"user_id":10928439,"display_name":"Simon Jacobs"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675203712,"creation_date":1675203712,"answer_id":75303766,"question_id":75302920,"body_markdown":"You can add the output of the `testcommons` SourceSet as a dependency of the main suite:\r\n```gy\r\ntesting {\r\n   suites {\r\n      test {\r\n         dependencies {\r\n            implementation(sourceSets[&quot;testcommons&quot;].output)\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\nNote this approach eagerly accesses the `testcommons` SourceSet, so its definition must be moved above this code.","title":"Gradle include classes from Source set in a gradle test suite","body":"<p>You can add the output of the <code>testcommons</code> SourceSet as a dependency of the main suite:</p>\n<pre><code>testing {\n   suites {\n      test {\n         dependencies {\n            implementation(sourceSets[&quot;testcommons&quot;].output)\n         }\n      }\n   }\n}\n</code></pre>\n<p>Note this approach eagerly accesses the <code>testcommons</code> SourceSet, so its definition must be moved above this code.</p>\n"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303766,"answer_count":1,"score":0,"last_activity_date":1675203712,"creation_date":1675197753,"question_id":75302920,"body_markdown":"I have this setup in my build.gradle:\r\n```groovy\r\ntesting {\r\n    suites {\r\n        test {\r\n            useJUnitJupiter()\r\n        }\r\n\r\n        itest(JvmTestSuite) {\r\n            testType = TestSuiteType.INTEGRATION_TEST\r\n\r\n            dependencies {\r\n                implementation project()\r\n            }\r\n\r\n            configurations {\r\n                itestImplementation.extendsFrom testImplementation\r\n                itestRuntime.extendsFrom testRuntime\r\n                itestRuntimeOnly.extendsFrom testRuntimeOnly\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nsourceSets {\r\n    testcommons{\r\n        java{\r\n            srcDir &#39;src/testcommons/java&#39;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;d like to include test commons in both test suites, any idea how I can go on about that?\r\n","title":"Gradle include classes from Source set in a gradle test suite","body":"<p>I have this setup in my build.gradle:</p>\n<pre><code>testing {\n    suites {\n        test {\n            useJUnitJupiter()\n        }\n\n        itest(JvmTestSuite) {\n            testType = TestSuiteType.INTEGRATION_TEST\n\n            dependencies {\n                implementation project()\n            }\n\n            configurations {\n                itestImplementation.extendsFrom testImplementation\n                itestRuntime.extendsFrom testRuntime\n                itestRuntimeOnly.extendsFrom testRuntimeOnly\n            }\n        }\n    }\n}\n\nsourceSets {\n    testcommons{\n        java{\n            srcDir 'src/testcommons/java'\n        }\n    }\n}\n</code></pre>\n<p>I'd like to include test commons in both test suites, any idea how I can go on about that?</p>\n"},{"tags":["java","groovy","jenkins"],"comments":[{"owner":{"account_id":1821904,"reputation":730,"user_id":1655780,"display_name":"Steven the Easily Amused"},"score":0,"creation_date":1519753010,"post_id":27142674,"comment_id":85034184,"body_markdown":"Not clear why it&#39;s a unique requirement to check if a node is running a build. That&#39;s exactly what Jenkins master is doing by default. Is your requirement that you do not want to run a build unless N slaves are all currently free?","body":"Not clear why it&#39;s a unique requirement to check if a node is running a build. That&#39;s exactly what Jenkins master is doing by default. Is your requirement that you do not want to run a build unless N slaves are all currently free?"}],"answers":[{"tags":[],"owner":{"account_id":5384131,"reputation":1,"user_id":4288605,"display_name":"Raman  Tretyak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416994001,"creation_date":1416994001,"answer_id":27145446,"question_id":27142674,"body_markdown":"To get the name of the node, that is running the current build, just use System.getenv(&quot;NODE_NAME&quot;)\r\n\r\n&gt; When a Jenkins job executes, it sets some environment variables..\r\n\r\nYou may find these variables very useful. Check [this link][1] \r\n\r\n\r\n  [1]: https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables","title":"Jenkins How to find if a given slave is running a Job","body":"<p>To get the name of the node, that is running the current build, just use System.getenv(\"NODE_NAME\")</p>\n\n<blockquote>\n  <p>When a Jenkins job executes, it sets some environment variables..</p>\n</blockquote>\n\n<p>You may find these variables very useful. Check <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables\" rel=\"nofollow\">this link</a> </p>\n"},{"comments":[{"owner":{"account_id":1821904,"reputation":730,"user_id":1655780,"display_name":"Steven the Easily Amused"},"score":0,"creation_date":1519755130,"post_id":27242903,"comment_id":85035408,"body_markdown":"You probably want to use labels, not node names. As you&#39;ve written this, your solution wont scale once you add another node to do DIFFERENT work.","body":"You probably want to use labels, not node names. As you&#39;ve written this, your solution wont scale once you add another node to do DIFFERENT work."},{"owner":{"account_id":4028316,"reputation":169,"user_id":3423146,"display_name":"Alexander Stohr"},"score":0,"creation_date":1579876666,"post_id":27242903,"comment_id":105924342,"body_markdown":"there is a span between not busy and not beeing able to take more jobs.\nsay 2 of 4 job slots can be occupied...","body":"there is a span between not busy and not beeing able to take more jobs. say 2 of 4 job slots can be occupied..."}],"tags":[],"owner":{"account_id":1949923,"reputation":1957,"user_id":1754255,"accept_rate":52,"display_name":"NotAgain"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1675203500,"creation_date":1417500281,"answer_id":27242903,"question_id":27142674,"body_markdown":"Here is the hackish way I was able to do it. I changed my workflow to find the available free slave rather than finding if a slave was busy and then checking the next one to see it is free.\r\n\r\nThis Groovy script counts the number of busy executors on the Slave. It polls continuously till it finds an online slave with zero number of busy executors. I hate polling and will request knowledgeable members to chip in with suggestions to somehow plug into Jenkins event based notification.\r\n\r\n    import hudson.FilePath\r\n    import hudson.model.Node\r\n    import hudson.model.Slave\r\n    import jenkins.model.Jenkins\r\n    import groovy.time.*\r\n    \r\n    Jenkins jenkins = Jenkins.instance\r\n    def jenkinsNodes =jenkins.nodes\r\n    while(1)\r\n    {\r\n    \tfor (Node node in jenkinsNodes) \r\n      \t{\r\n          \tsleep(1000)\r\n    \t \t// Make sure slave is online\r\n    \t\tif (!node.getComputer().isOffline()) \r\n    \t\t{          \t\r\n    \t\t\t//Make sure that the slave busy executor number is 0.\r\n              \tif(node.getComputer().countBusy()==0)\r\n              \t{\r\n                  \tprintln &quot;&#39;$node.nodeName&#39; can take jobs !!!&quot;\r\n     \t  \t\t\treturn 0\r\n                }\r\n    \t    \telse\r\n                {\r\n                  \tprintln &quot;$node.nodeName&#39; is busy !!!&quot;\r\n                }\r\n    \t\t}\r\n          \telse\r\n            {\r\n             \tprintln &quot;&#39;$node.nodeName&#39; is offline !!!&quot; \r\n            }\r\n        }\r\n    \tsleep(1000)\r\n    }\r\n\r\nThis runs as job and returns as soon as it finds a suitable slave. Return 0 is a success in Jenkins.\r\n\r\nI am open to better ways of doing it. I am not really happy with this continuous polling I have to do. \r\n","title":"Jenkins How to find if a given slave is running a Job","body":"<p>Here is the hackish way I was able to do it. I changed my workflow to find the available free slave rather than finding if a slave was busy and then checking the next one to see it is free.</p>\n<p>This Groovy script counts the number of busy executors on the Slave. It polls continuously till it finds an online slave with zero number of busy executors. I hate polling and will request knowledgeable members to chip in with suggestions to somehow plug into Jenkins event based notification.</p>\n<pre><code>import hudson.FilePath\nimport hudson.model.Node\nimport hudson.model.Slave\nimport jenkins.model.Jenkins\nimport groovy.time.*\n\nJenkins jenkins = Jenkins.instance\ndef jenkinsNodes =jenkins.nodes\nwhile(1)\n{\n    for (Node node in jenkinsNodes) \n    {\n        sleep(1000)\n        // Make sure slave is online\n        if (!node.getComputer().isOffline()) \n        {           \n            //Make sure that the slave busy executor number is 0.\n            if(node.getComputer().countBusy()==0)\n            {\n                println &quot;'$node.nodeName' can take jobs !!!&quot;\n                return 0\n            }\n            else\n            {\n                println &quot;$node.nodeName' is busy !!!&quot;\n            }\n        }\n        else\n        {\n            println &quot;'$node.nodeName' is offline !!!&quot; \n        }\n    }\n    sleep(1000)\n}\n</code></pre>\n<p>This runs as job and returns as soon as it finds a suitable slave. Return 0 is a success in Jenkins.</p>\n<p>I am open to better ways of doing it. I am not really happy with this continuous polling I have to do.</p>\n"},{"tags":[],"owner":{"account_id":4639487,"reputation":3664,"user_id":3759764,"display_name":"prudviraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1588864126,"creation_date":1588864126,"answer_id":61661202,"question_id":27142674,"body_markdown":"Let me propose a very simple and efficient way \r\n\r\nEach node stores the information related to if it example : idle or not , offline or not etc\r\n\r\nYou can get those details using below command \r\n\r\n    curl -X GET --silent -u jenkins_user:${jenkins_pwd} &quot;http://your_jenkins_url:8080/computer/node_name/api/json&quot;\r\n\r\nor directly from browser\r\n\r\n    http://your_jenkins_url:8080/computer/node_name/api/jso\r\n\r\n\r\nThis result provides valuable information related to slave.\r\n\r\nIf you want narrow down the search to a specific thing like , is the slave idle or not then you can append it with below logic\r\n\r\n    curl -X GET --silent -u jenkins_user:${jenkins_pwd} &quot;http://jenkins_domanin:8080/computer/node_name/api/json&quot; | python -c &#39;import json,sys,os;obj=json.load(sys.stdin);print obj[&quot;idle&quot;]&#39;\r\n\r\n","title":"Jenkins How to find if a given slave is running a Job","body":"<p>Let me propose a very simple and efficient way </p>\n\n<p>Each node stores the information related to if it example : idle or not , offline or not etc</p>\n\n<p>You can get those details using below command </p>\n\n<pre><code>curl -X GET --silent -u jenkins_user:${jenkins_pwd} \"http://your_jenkins_url:8080/computer/node_name/api/json\"\n</code></pre>\n\n<p>or directly from browser</p>\n\n<pre><code>http://your_jenkins_url:8080/computer/node_name/api/jso\n</code></pre>\n\n<p>This result provides valuable information related to slave.</p>\n\n<p>If you want narrow down the search to a specific thing like , is the slave idle or not then you can append it with below logic</p>\n\n<pre><code>curl -X GET --silent -u jenkins_user:${jenkins_pwd} \"http://jenkins_domanin:8080/computer/node_name/api/json\" | python -c 'import json,sys,os;obj=json.load(sys.stdin);print obj[\"idle\"]'\n</code></pre>\n"}],"owner":{"account_id":1949923,"reputation":1957,"user_id":1754255,"accept_rate":52,"display_name":"NotAgain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36917,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":27242903,"answer_count":3,"score":7,"last_activity_date":1675203500,"creation_date":1416983402,"question_id":27142674,"body_markdown":"I have this unique requirement to check if the given node is running a job or not. I am thinking of using groovy as it looks easiest option.\r\n\r\nI have found this answer to be useful.\r\n\r\nhttps://stackoverflow.com/questions/23761479/how-can-i-check-via-a-script-or-a-plugin-in-jenkins-whether-a-slave-is-online-be\r\n\r\nIt allows me to find if the slave is online or not. Next step for me is to check if it is running a job. \r\n\r\nI was considering using the [API][1] function [setAcceptingTasks(false)][2] to mark slave as running a Job so that when next time I query using [isAcceptingTasks()][3], I get false and hence do not launch job on that slave.\r\n\r\nBut I would rather have the slave mark itself. \r\n\r\n[taskAccepted()][4] and [taskCompleted()][5] come to mind.  &lt;strike&gt;I can call the setAcceptingTasks to false once task is accepted and on completion of tasks set isAcceptingTasks to true once again.  \r\n\r\n\r\n  [1]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html\r\n  [2]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#setAcceptingTasks%28boolean%29\r\n  [3]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#isAcceptingTasks%28%29\r\n  [4]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskAccepted%28hudson.model.Executor,%20hudson.model.Queue.Task%29\r\n  [5]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskCompleted%28hudson.model.Executor,%20hudson.model.Queue.Task,%20long%29\r\n\r\nBut I am not sure of the arguments these functions take e.g executor and task. And where do these function calls fit in a groovy script.&lt;/strike&gt;\r\n\r\nI am not sure if my assumption of task is equivalent to a job is true or not.\r\n\r\nThis is what I have got till now:\r\n\r\n    import hudson.model.*\r\n    def requiredNodes = [&#39;Slave1&#39;, &#39;Slave2&#39;, &#39;Slave3&#39;];\r\n    def status = 0;\r\n    for (node in requiredNodes) \r\n    {\r\n          println &quot;Searching for $node&quot;;\r\n          slave = Hudson.instance.slaves.find({it.name == node});\r\n          if (slave != null)\r\n           {\r\n            computer = slave.getComputer();\r\n            if (computer.isOffline())\r\n             {\r\n               println &quot;Error! $node is offline.&quot;;\r\n               status = 1;\r\n             }\r\n             else \r\n             {\r\n               println &quot;OK: $node is online&quot;;\r\n               if(computer.isAcceptingTasks())\r\n               {\r\n                  //Launch job\r\n               }\r\n             }\r\n           }\r\n           else \r\n           {\r\n             println &quot;Slave $node not found!&quot;;\r\n             status = 1;\r\n           }\r\n    }\r\n    status;\r\n\r\nEDIT: Number of executors on each slave is 1.","title":"Jenkins How to find if a given slave is running a Job","body":"<p>I have this unique requirement to check if the given node is running a job or not. I am thinking of using groovy as it looks easiest option.</p>\n\n<p>I have found this answer to be useful.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23761479/how-can-i-check-via-a-script-or-a-plugin-in-jenkins-whether-a-slave-is-online-be\">How can I check via a script or a plugin in Jenkins whether a slave is online before starting a build from another project on it</a></p>\n\n<p>It allows me to find if the slave is online or not. Next step for me is to check if it is running a job. </p>\n\n<p>I was considering using the <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html\" rel=\"noreferrer\">API</a> function <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#setAcceptingTasks%28boolean%29\" rel=\"noreferrer\">setAcceptingTasks(false)</a> to mark slave as running a Job so that when next time I query using <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#isAcceptingTasks%28%29\" rel=\"noreferrer\">isAcceptingTasks()</a>, I get false and hence do not launch job on that slave.</p>\n\n<p>But I would rather have the slave mark itself. </p>\n\n<p><a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskAccepted%28hudson.model.Executor,%20hudson.model.Queue.Task%29\" rel=\"noreferrer\">taskAccepted()</a> and <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskCompleted%28hudson.model.Executor,%20hudson.model.Queue.Task,%20long%29\" rel=\"noreferrer\">taskCompleted()</a> come to mind.  <strike>I can call the setAcceptingTasks to false once task is accepted and on completion of tasks set isAcceptingTasks to true once again.  </p>\n\n<p>But I am not sure of the arguments these functions take e.g executor and task. And where do these function calls fit in a groovy script.</strike></p>\n\n<p>I am not sure if my assumption of task is equivalent to a job is true or not.</p>\n\n<p>This is what I have got till now:</p>\n\n<pre><code>import hudson.model.*\ndef requiredNodes = ['Slave1', 'Slave2', 'Slave3'];\ndef status = 0;\nfor (node in requiredNodes) \n{\n      println \"Searching for $node\";\n      slave = Hudson.instance.slaves.find({it.name == node});\n      if (slave != null)\n       {\n        computer = slave.getComputer();\n        if (computer.isOffline())\n         {\n           println \"Error! $node is offline.\";\n           status = 1;\n         }\n         else \n         {\n           println \"OK: $node is online\";\n           if(computer.isAcceptingTasks())\n           {\n              //Launch job\n           }\n         }\n       }\n       else \n       {\n         println \"Slave $node not found!\";\n         status = 1;\n       }\n}\nstatus;\n</code></pre>\n\n<p>EDIT: Number of executors on each slave is 1.</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675236670,"post_id":75302380,"comment_id":132882621,"body_markdown":"Don&#39;t. You shoud be upgrading **all** your spring dependencies and not just 1, all the versions of the `org.springframework` dependencies have to match else you might (and will) run into weird issues (like this one).","body":"Don&#39;t. You shoud be upgrading <b>all</b> your spring dependencies and not just 1, all the versions of the <code>org.springframework</code> dependencies have to match else you might (and will) run into weird issues (like this one)."}],"answers":[{"tags":[],"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675203303,"creation_date":1675198531,"answer_id":75303039,"question_id":75302380,"body_markdown":"In spring 5.3.x `ResponseStatusException` used to have `getStatus()` available directly as you can see in the java doc https://docs.spring.io/spring-framework/docs/5.3.x/javadoc-api/\r\n\r\nIn version 6.0.x it was changed and `ResponseStatusException` extends from `ErrorResponseException` which does not have the `getStatus()` method directly available.\r\n\r\nInstead, you need to call `responseStatusException.getBody().getStatus()` in order to access the status correctly. Check the java doc for details https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/ErrorResponseException.html\r\n\r\nFrom your question it is not clear if you access status directly in your code or if this code is part of some library. If it is part of the library, then you would need to upgrade the version of the library to the one compatible with spring 6.","title":"Got error after upgrade spring-web version","body":"<p>In spring 5.3.x <code>ResponseStatusException</code> used to have <code>getStatus()</code> available directly as you can see in the java doc <a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/javadoc-api/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/5.3.x/javadoc-api/</a></p>\n<p>In version 6.0.x it was changed and <code>ResponseStatusException</code> extends from <code>ErrorResponseException</code> which does not have the <code>getStatus()</code> method directly available.</p>\n<p>Instead, you need to call <code>responseStatusException.getBody().getStatus()</code> in order to access the status correctly. Check the java doc for details <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/ErrorResponseException.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/ErrorResponseException.html</a></p>\n<p>From your question it is not clear if you access status directly in your code or if this code is part of some library. If it is part of the library, then you would need to upgrade the version of the library to the one compatible with spring 6.</p>\n"}],"owner":{"account_id":27415027,"reputation":49,"user_id":20914383,"display_name":"EXEC1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":970,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75303039,"answer_count":1,"score":2,"last_activity_date":1675203303,"creation_date":1675194284,"question_id":75302380,"body_markdown":"I got error after upgrade the spring-web version to after 6.0.0, previous is 5.3.20\r\n```\r\n &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n        &lt;version&gt;6.0.4&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n```\r\n\r\n```\r\nCannot access &#39;status&#39;: it is invisible (private in a supertype) in &#39;ResponseStatusException&#39;\r\n\r\nis ResponseStatusException -&gt; {\r\n                    serverWebExchange.response.statusCode = throwable.status\r\n         }\r\n```","title":"Got error after upgrade spring-web version","body":"<p>I got error after upgrade the spring-web version to after 6.0.0, previous is 5.3.20</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;6.0.4&lt;/version&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<pre><code>Cannot access 'status': it is invisible (private in a supertype) in 'ResponseStatusException'\n\nis ResponseStatusException -&gt; {\n                    serverWebExchange.response.statusCode = throwable.status\n         }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","stomp","spring-websocket"],"answers":[{"tags":[],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675202867,"creation_date":1675202867,"answer_id":75303649,"question_id":75302571,"body_markdown":"Using Lazy Initialization fixed the issue although it feels like a bandaid solution. I&#39;m not sure if there is another better way since I&#39;m new to Spring.\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n\tprivate TopicSubscriptionInterceptor topicSubscriptionInterceptor;\r\n\t\r\n\t@Autowired\r\n\tpublic WebSocketConfig(@Lazy TopicSubscriptionInterceptor topicSubscriptionInterceptor) {\r\n\t\tthis.topicSubscriptionInterceptor = topicSubscriptionInterceptor;\r\n\t}\r\n\r\n    ...\r\n    \r\n    @Override\r\n    public void configureClientInboundChannel(ChannelRegistration registration) {\r\n        registration.interceptors(topicSubscriptionInterceptor);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/27746","title":"Spring WebSocket: Use SimpUserRegistry inside of ChannelInterceptor without creating a dependency cycle","body":"<p>Using Lazy Initialization fixed the issue although it feels like a bandaid solution. I'm not sure if there is another better way since I'm new to Spring.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    private TopicSubscriptionInterceptor topicSubscriptionInterceptor;\n    \n    @Autowired\n    public WebSocketConfig(@Lazy TopicSubscriptionInterceptor topicSubscriptionInterceptor) {\n        this.topicSubscriptionInterceptor = topicSubscriptionInterceptor;\n    }\n\n    ...\n    \n    @Override\n    public void configureClientInboundChannel(ChannelRegistration registration) {\n        registration.interceptors(topicSubscriptionInterceptor);\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":334,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303649,"answer_count":1,"score":0,"last_activity_date":1675202867,"creation_date":1675195511,"question_id":75302571,"body_markdown":"I aim to use SimpUserRegistry to check how many users are subscribed to a topic to limit the number of subscriptions. To test my code I used the basic https://spring.io/guides/gs/messaging-stomp-websocket/ project.\r\n\r\nHere are my only changes to this project: \r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n        @Autowired\r\n        private TopicSubscriptionInterceptor topicSubscriptionInterceptor\r\n        ...\r\n    \t\r\n    \t@Override\r\n    \tpublic void configureClientInboundChannel(ChannelRegistration registration) {\r\n    \t\tregistration.interceptors(topicSubscriptionInterceptor);\r\n    \t}\r\n    }\r\n//--------------------------------------------------------------------------------------\r\n    \r\n    @Component\r\n    public class TopicSubscriptionInterceptor implements ChannelInterceptor {\r\n    \t\r\n    \t@Autowired \r\n    \tprivate SimpUserRegistry userRegistry;\r\n    \t\r\n        @Override\r\n        public Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel){    \t    \t\r\n            // ... use SimpUserRegistry to check amount of users subscribed to a topic and whether \r\n            // or not to allow a subscription (throw exception/null)\r\n    \r\n        }\r\n//-----------------------------------------------------------------------------------------\r\n\r\nI&#39;ve tried to just pass a `new TopicSubscriptionInterceptor()` instead of adding it as a dependency using @Autowired but that obviously made all dependencies in TopicSubscriptionInterceptor null.\r\n\r\n\r\n//---------------------------------------------------\r\n\r\nDependency Cycle:\r\n\r\n```\r\n\r\n|  webSocketConfig (field private com.xxx.yyy.interceptor.TopicSubscriptionInterceptor com.xxx.yyy.config.WebSocketConfig.topicSubscriptionInterceptor)\r\n     \r\n|  topicSubscriptionInterceptor (field private org.springframework.messaging.simp.user.SimpUserRegistry com.xxx.yyy.interceptor.TopicSubscriptionInterceptor.userRegistry)\r\n     \r\n|  org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration\r\n\r\n\r\n```\r\n\r\n\r\nHere&#39;s what I tried Edit(1): \r\n```java\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n        @Bean\r\n\t    public TopicSubscriptionInterceptor \r\n            myTopicSubscriptionInterceptor(){\r\n\t\t        return new TopicSubscriptionInterceptor();\r\n\t    }\r\n\r\n        ...\r\n    \t\r\n    \t@Override\r\n    \tpublic void configureClientInboundChannel(ChannelRegistration registration) {\r\n    \t\tregistration.interceptors(myTopicSubscriptionInterceptor());\r\n    \t}\r\n    }\r\n```","title":"Spring WebSocket: Use SimpUserRegistry inside of ChannelInterceptor without creating a dependency cycle","body":"<p>I aim to use SimpUserRegistry to check how many users are subscribed to a topic to limit the number of subscriptions. To test my code I used the basic <a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-stomp-websocket/</a> project.</p>\n<p>Here are my only changes to this project:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    @Autowired\n    private TopicSubscriptionInterceptor topicSubscriptionInterceptor\n    ...\n    \n    @Override\n    public void configureClientInboundChannel(ChannelRegistration registration) {\n        registration.interceptors(topicSubscriptionInterceptor);\n    }\n}\n</code></pre>\n<p>//--------------------------------------------------------------------------------------</p>\n<pre><code>@Component\npublic class TopicSubscriptionInterceptor implements ChannelInterceptor {\n    \n    @Autowired \n    private SimpUserRegistry userRegistry;\n    \n    @Override\n    public Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel){              \n        // ... use SimpUserRegistry to check amount of users subscribed to a topic and whether \n        // or not to allow a subscription (throw exception/null)\n\n    }\n</code></pre>\n<p>//-----------------------------------------------------------------------------------------</p>\n<p>I've tried to just pass a <code>new TopicSubscriptionInterceptor()</code> instead of adding it as a dependency using @Autowired but that obviously made all dependencies in TopicSubscriptionInterceptor null.</p>\n<p>//---------------------------------------------------</p>\n<p>Dependency Cycle:</p>\n<pre><code>\n|  webSocketConfig (field private com.xxx.yyy.interceptor.TopicSubscriptionInterceptor com.xxx.yyy.config.WebSocketConfig.topicSubscriptionInterceptor)\n     \n|  topicSubscriptionInterceptor (field private org.springframework.messaging.simp.user.SimpUserRegistry com.xxx.yyy.interceptor.TopicSubscriptionInterceptor.userRegistry)\n     \n|  org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration\n\n\n</code></pre>\n<p>Here's what I tried Edit(1):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Configuration\n    @EnableWebSocketMessageBroker\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n        @Bean\n        public TopicSubscriptionInterceptor \n            myTopicSubscriptionInterceptor(){\n                return new TopicSubscriptionInterceptor();\n        }\n\n        ...\n        \n        @Override\n        public void configureClientInboundChannel(ChannelRegistration registration) {\n            registration.interceptors(myTopicSubscriptionInterceptor());\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","pagination","deserialization"],"comments":[{"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"score":1,"creation_date":1537853116,"post_id":52490399,"comment_id":91922822,"body_markdown":"Please provide the text for the exception. (Please refer: http://idownvotedbecau.se/imageofanexception/)","body":"Please provide the text for the exception. (Please refer: <a href=\"http://idownvotedbecau.se/imageofanexception/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/imageofanexception</a>)"},{"owner":{"display_name":"user10367961"},"score":0,"creation_date":1537863656,"post_id":52490399,"comment_id":91927781,"body_markdown":"A workaround would be not exposing the `Page` as the response type from the controller endpoint and returning a List&lt;YourEntity&gt; instead. The `Page` has a method `getContent()` that you can invoke for the conversion from Page to List&lt;YourEntity&gt;. As I said, not a fix but a workaround.","body":"A workaround would be not exposing the <code>Page</code> as the response type from the controller endpoint and returning a List&lt;YourEntity&gt; instead. The <code>Page</code> has a method <code>getContent()</code> that you can invoke for the conversion from Page to List&lt;YourEntity&gt;. As I said, not a fix but a workaround."},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":0,"creation_date":1537930078,"post_id":52490399,"comment_id":91958568,"body_markdown":"@alexrolea i actually want to return the page though not just the list so if you are in a web client you can tab thru pages","body":"@alexrolea i actually want to return the page though not just the list so if you are in a web client you can tab thru pages"},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":0,"creation_date":1537930477,"post_id":52490399,"comment_id":91958653,"body_markdown":"@Prashant have removed the picture and added the text","body":"@Prashant have removed the picture and added the text"},{"owner":{"display_name":"user10367961"},"score":0,"creation_date":1537931647,"post_id":52490399,"comment_id":91958910,"body_markdown":"@GSUgambit if the client tracks something like a `pageIndex` and `pageSize` on his side and sends the two parameters with the request you don&#39;t really need to expose the `Page` to the client. But, as I said, this is more of a workaround and less of a fix :)","body":"@GSUgambit if the client tracks something like a <code>pageIndex</code> and <code>pageSize</code> on his side and sends the two parameters with the request you don&#39;t really need to expose the <code>Page</code> to the client. But, as I said, this is more of a workaround and less of a fix :)"},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":0,"creation_date":1537934039,"post_id":52490399,"comment_id":91959451,"body_markdown":"@alexrolea if you don&#39;t send back the page, the client doesnt know the number of pages etc","body":"@alexrolea if you don&#39;t send back the page, the client doesnt know the number of pages etc"},{"owner":{"display_name":"user10367961"},"score":0,"creation_date":1537934492,"post_id":52490399,"comment_id":91959543,"body_markdown":"@GSUgambit if you have a non-GUI client you are right. Most GUI clients track that information (`pageIndex` and `pageSize`) by the table state in which you would display `ObservationSet`. There is usually a dropdown with `items per page`, with predefined sizes (this maps to the `pageSize`) and buttons with some state (`page 0`, `page1`, `next`, `previous`, `first`, `last`) which map to the `pageIndex`. The index button states are computed by the GUI, by submitting a count query first in order to determine how many pages are there (so you can go to the last page without iterating everything).","body":"@GSUgambit if you have a non-GUI client you are right. Most GUI clients track that information (<code>pageIndex</code> and <code>pageSize</code>) by the table state in which you would display <code>ObservationSet</code>. There is usually a dropdown with <code>items per page</code>, with predefined sizes (this maps to the <code>pageSize</code>) and buttons with some state (<code>page 0</code>, <code>page1</code>, <code>next</code>, <code>previous</code>, <code>first</code>, <code>last</code>) which map to the <code>pageIndex</code>. The index button states are computed by the GUI, by submitting a count query first in order to determine how many pages are there (so you can go to the last page without iterating everything)."},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":1,"creation_date":1537935482,"post_id":52490399,"comment_id":91959757,"body_markdown":"yeah but if you hide the page objects &quot;numberOfPages&quot; etc from the response the UI would not know how many possible pages there are.\nYou could hard code how many elements you want to show per page but you could not know total page numbers which wouldn&#39;t allow you to show page1...page127 etc., you would basically only know the page numbers that exist after you make the calls and get back a different number of elements\nI found the answer on how to make this work though now","body":"yeah but if you hide the page objects &quot;numberOfPages&quot; etc from the response the UI would not know how many possible pages there are. You could hard code how many elements you want to show per page but you could not know total page numbers which wouldn&#39;t allow you to show page1...page127 etc., you would basically only know the page numbers that exist after you make the calls and get back a different number of elements I found the answer on how to make this work though now"},{"owner":{"account_id":4769045,"reputation":10243,"user_id":3854385,"display_name":"Loren"},"score":0,"creation_date":1548773351,"post_id":52490399,"comment_id":95657296,"body_markdown":"Possible duplicate of [Spring RestTemplate with paginated API](https://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api\">Spring RestTemplate with paginated API</a>"},{"owner":{"account_id":6613669,"reputation":2911,"user_id":5107769,"display_name":"Aekansh Kansal"},"score":0,"creation_date":1626909803,"post_id":52490399,"comment_id":121020693,"body_markdown":"Does this answer your question? [How to consume Page&lt;Entity&gt; response using Spring RestTemplate](https://stackoverflow.com/questions/34099559/how-to-consume-pageentity-response-using-spring-resttemplate)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/34099559/how-to-consume-pageentity-response-using-spring-resttemplate\">How to consume Page&lt;Entity&gt; response using Spring RestTemplate</a>"}],"answers":[{"comments":[{"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"score":1,"creation_date":1604661326,"post_id":52509886,"comment_id":114421470,"body_markdown":"For Spring 2.3.3 I am having compilation error: `new PageRequest(page, size)` has protected access. You can use `PageRequest.of(page, size)`.","body":"For Spring 2.3.3 I am having compilation error: <code>new PageRequest(page, size)</code> has protected access. You can use <code>PageRequest.of(page, size)</code>."},{"owner":{"account_id":10853331,"reputation":327,"user_id":7980462,"display_name":" "},"score":0,"creation_date":1651675769,"post_id":52509886,"comment_id":127420285,"body_markdown":"Terrible, but works. I use this approach for mockMvc tests","body":"Terrible, but works. I use this approach for mockMvc tests"}],"tags":[],"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"comment_count":2,"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1537935594,"creation_date":1537935594,"answer_id":52509886,"question_id":52490399,"body_markdown":"Found the answer in the different post on here. It was not the accepted answer which it should be\r\n\r\nhttps://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api/46847429#46847429\r\n\r\nthe answer by @rvheddeg is correct. You just need to put @JsonCreator and provide a constructor with all the properties, here is my RestResponsePage class that fixes the issue.\r\n\r\n    class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    \r\n        private static final long serialVersionUID = 3248189030448292002L;\r\n    \r\n        @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\r\n        public RestResponsePage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content, @JsonProperty(&quot;number&quot;) int number, @JsonProperty(&quot;size&quot;) int size,\r\n                        @JsonProperty(&quot;totalElements&quot;) Long totalElements, @JsonProperty(&quot;pageable&quot;) JsonNode pageable, @JsonProperty(&quot;last&quot;) boolean last,\r\n                        @JsonProperty(&quot;totalPages&quot;) int totalPages, @JsonProperty(&quot;sort&quot;) JsonNode sort, @JsonProperty(&quot;first&quot;) boolean first,\r\n                        @JsonProperty(&quot;numberOfElements&quot;) int numberOfElements) {\r\n            super(content, PageRequest.of(number, size), totalElements);\r\n        }\r\n    \r\n        public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\r\n            super(content, pageable, total);\r\n        }\r\n    \r\n        public RestResponsePage(List&lt;T&gt; content) {\r\n            super(content);\r\n        }\r\n    \r\n        public RestResponsePage() {\r\n            super(new ArrayList&lt;T&gt;());\r\n        }\r\n    \r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Found the answer in the different post on here. It was not the accepted answer which it should be</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api/46847429#46847429\">Spring RestTemplate with paginated API</a></p>\n\n<p>the answer by @rvheddeg is correct. You just need to put @JsonCreator and provide a constructor with all the properties, here is my RestResponsePage class that fixes the issue.</p>\n\n<pre><code>class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\n\n    private static final long serialVersionUID = 3248189030448292002L;\n\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\n    public RestResponsePage(@JsonProperty(\"content\") List&lt;T&gt; content, @JsonProperty(\"number\") int number, @JsonProperty(\"size\") int size,\n                    @JsonProperty(\"totalElements\") Long totalElements, @JsonProperty(\"pageable\") JsonNode pageable, @JsonProperty(\"last\") boolean last,\n                    @JsonProperty(\"totalPages\") int totalPages, @JsonProperty(\"sort\") JsonNode sort, @JsonProperty(\"first\") boolean first,\n                    @JsonProperty(\"numberOfElements\") int numberOfElements) {\n        super(content, PageRequest.of(number, size), totalElements);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\n        super(content, pageable, total);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content) {\n        super(content);\n    }\n\n    public RestResponsePage() {\n        super(new ArrayList&lt;T&gt;());\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5201551,"reputation":370,"user_id":4420878,"display_name":"berturion"},"score":0,"creation_date":1674144249,"post_id":54423605,"comment_id":132656461,"body_markdown":"I had to do this too. Thank you, it works now.","body":"I had to do this too. Thank you, it works now."}],"tags":[],"owner":{"account_id":4769045,"reputation":10243,"user_id":3854385,"display_name":"Loren"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1548773242,"creation_date":1548773242,"answer_id":54423605,"question_id":52490399,"body_markdown":"Had to make a small change to ignore the unknown property of empty:\r\n\r\n```\r\npackage ...helper;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport org.springframework.data.domain.PageImpl;\r\nimport org.springframework.data.domain.PageRequest;\r\nimport org.springframework.data.domain.Pageable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\r\n    public RestResponsePage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content,\r\n                            @JsonProperty(&quot;number&quot;) int number,\r\n                            @JsonProperty(&quot;size&quot;) int size,\r\n                            @JsonProperty(&quot;totalElements&quot;) Long totalElements,\r\n                            @JsonProperty(&quot;pageable&quot;) JsonNode pageable,\r\n                            @JsonProperty(&quot;last&quot;) boolean last,\r\n                            @JsonProperty(&quot;totalPages&quot;) int totalPages,\r\n                            @JsonProperty(&quot;sort&quot;) JsonNode sort,\r\n                            @JsonProperty(&quot;first&quot;) boolean first,\r\n                            @JsonProperty(&quot;numberOfElements&quot;) int numberOfElements) {\r\n\r\n        super(content, PageRequest.of(number, size), totalElements);\r\n    }\r\n\r\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\r\n        super(content, pageable, total);\r\n    }\r\n\r\n    public RestResponsePage(List&lt;T&gt; content) {\r\n        super(content);\r\n    }\r\n\r\n    public RestResponsePage() {\r\n        super(new ArrayList&lt;&gt;());\r\n    }\r\n}\r\n```","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Had to make a small change to ignore the unknown property of empty:</p>\n\n<pre><code>package ...helper;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport org.springframework.data.domain.PageImpl;\nimport org.springframework.data.domain.PageRequest;\nimport org.springframework.data.domain.Pageable;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\n    public RestResponsePage(@JsonProperty(\"content\") List&lt;T&gt; content,\n                            @JsonProperty(\"number\") int number,\n                            @JsonProperty(\"size\") int size,\n                            @JsonProperty(\"totalElements\") Long totalElements,\n                            @JsonProperty(\"pageable\") JsonNode pageable,\n                            @JsonProperty(\"last\") boolean last,\n                            @JsonProperty(\"totalPages\") int totalPages,\n                            @JsonProperty(\"sort\") JsonNode sort,\n                            @JsonProperty(\"first\") boolean first,\n                            @JsonProperty(\"numberOfElements\") int numberOfElements) {\n\n        super(content, PageRequest.of(number, size), totalElements);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\n        super(content, pageable, total);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content) {\n        super(content);\n    }\n\n    public RestResponsePage() {\n        super(new ArrayList&lt;&gt;());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11162384,"reputation":72,"user_id":8192032,"display_name":"LeoFuso"},"score":2,"creation_date":1626991055,"post_id":54730375,"comment_id":121046109,"body_markdown":"This is as good as the accepted answer, some other alternatives may cause the Blockhound to report a blocking call when deserializing a Page. I&#39;m using Spring WebFlux.","body":"This is as good as the accepted answer, some other alternatives may cause the Blockhound to report a blocking call when deserializing a Page. I&#39;m using Spring WebFlux."}],"tags":[],"owner":{"account_id":1915903,"reputation":2018,"user_id":1728511,"accept_rate":80,"display_name":"Mikhail Kopylov"},"comment_count":1,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1550380923,"creation_date":1550380923,"answer_id":54730375,"question_id":52490399,"body_markdown":"There&#39;s a simplier way to do it - to create and register custom deserializator for Page interface.\r\nSo the usage will be straightforward:\r\n\r\n    //Catalog is the paged entity\r\n    Page&lt;Catalog&gt; page = objectMapper.readValue(content, new TypeReference&lt;Page&lt;Catalog&gt;&gt;() {});\r\n\r\n\r\nObjectMapper configuration:\r\n\r\n    ObjectMapper objectMapper= new ObjectMapper();\r\n    objectMapper.registerModule(new PageModule());\r\n\r\n\r\nPageModule:\r\n\r\n    public class PageModule extends SimpleModule {\r\n        private static final long serialVersionUID = 1L;\r\n\r\n        public PageModule() {\r\n            addDeserializer(Page.class, new PageDeserializer());\r\n        }\r\n    }\r\n\r\nPageDeserializer:\r\n\r\n    public class PageDeserializer extends JsonDeserializer&lt;Page&lt;?&gt;&gt; implements ContextualDeserializer {\r\n        private static final String CONTENT = &quot;content&quot;;\r\n        private static final String NUMBER = &quot;number&quot;;\r\n        private static final String SIZE = &quot;size&quot;;\r\n        private static final String TOTAL_ELEMENTS = &quot;totalElements&quot;;\r\n        private JavaType valueType;\r\n    \r\n        @Override\r\n        public Page&lt;?&gt; deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\r\n            final CollectionType valuesListType = ctxt.getTypeFactory().constructCollectionType(List.class, valueType);\r\n    \r\n            List&lt;?&gt; list = new ArrayList&lt;&gt;();\r\n            int pageNumber = 0;\r\n            int pageSize = 0;\r\n            long total = 0;\r\n            if (p.isExpectedStartObjectToken()) {\r\n                p.nextToken();\r\n                if (p.hasTokenId(JsonTokenId.ID_FIELD_NAME)) {\r\n                    String propName = p.getCurrentName();\r\n                    do {\r\n                        p.nextToken();\r\n                        switch (propName) {\r\n                            case CONTENT:\r\n                                list = ctxt.readValue(p, valuesListType);\r\n                                break;\r\n                            case NUMBER:\r\n                                pageNumber = ctxt.readValue(p, Integer.class);\r\n                                break;\r\n                            case SIZE:\r\n                                pageSize = ctxt.readValue(p, Integer.class);\r\n                                break;\r\n                            case TOTAL_ELEMENTS:\r\n                                total = ctxt.readValue(p, Long.class);\r\n                                break;\r\n                            default:\r\n                                p.skipChildren();\r\n                                break;\r\n                        }\r\n                    } while (((propName = p.nextFieldName())) != null);\r\n                } else {\r\n                    ctxt.handleUnexpectedToken(handledType(), p);\r\n                }\r\n            } else {\r\n                ctxt.handleUnexpectedToken(handledType(), p);\r\n            }\r\n            \r\n            //Note that Sort field of Page is ignored here.\r\n            //Feel free to add more switch cases above to deserialize it as well.  \r\n            return new PageImpl&lt;&gt;(list, PageRequest.of(pageNumber, pageSize), total);\r\n        }\r\n    \r\n        /**\r\n         * This is the main point here.\r\n         * The PageDeserializer is created for each specific deserialization with concrete generic parameter type of Page.\r\n         */\r\n        @Override\r\n        public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) {\r\n            //This is the Page actually\r\n            final JavaType wrapperType = ctxt.getContextualType();\r\n            final PageDeserializer deserializer = new PageDeserializer();\r\n            //This is the parameter of Page\r\n            deserializer.valueType = wrapperType.containedType(0);\r\n            return deserializer;\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>There's a simplier way to do it - to create and register custom deserializator for Page interface.\nSo the usage will be straightforward:</p>\n\n<pre><code>//Catalog is the paged entity\nPage&lt;Catalog&gt; page = objectMapper.readValue(content, new TypeReference&lt;Page&lt;Catalog&gt;&gt;() {});\n</code></pre>\n\n<p>ObjectMapper configuration:</p>\n\n<pre><code>ObjectMapper objectMapper= new ObjectMapper();\nobjectMapper.registerModule(new PageModule());\n</code></pre>\n\n<p>PageModule:</p>\n\n<pre><code>public class PageModule extends SimpleModule {\n    private static final long serialVersionUID = 1L;\n\n    public PageModule() {\n        addDeserializer(Page.class, new PageDeserializer());\n    }\n}\n</code></pre>\n\n<p>PageDeserializer:</p>\n\n<pre><code>public class PageDeserializer extends JsonDeserializer&lt;Page&lt;?&gt;&gt; implements ContextualDeserializer {\n    private static final String CONTENT = \"content\";\n    private static final String NUMBER = \"number\";\n    private static final String SIZE = \"size\";\n    private static final String TOTAL_ELEMENTS = \"totalElements\";\n    private JavaType valueType;\n\n    @Override\n    public Page&lt;?&gt; deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\n        final CollectionType valuesListType = ctxt.getTypeFactory().constructCollectionType(List.class, valueType);\n\n        List&lt;?&gt; list = new ArrayList&lt;&gt;();\n        int pageNumber = 0;\n        int pageSize = 0;\n        long total = 0;\n        if (p.isExpectedStartObjectToken()) {\n            p.nextToken();\n            if (p.hasTokenId(JsonTokenId.ID_FIELD_NAME)) {\n                String propName = p.getCurrentName();\n                do {\n                    p.nextToken();\n                    switch (propName) {\n                        case CONTENT:\n                            list = ctxt.readValue(p, valuesListType);\n                            break;\n                        case NUMBER:\n                            pageNumber = ctxt.readValue(p, Integer.class);\n                            break;\n                        case SIZE:\n                            pageSize = ctxt.readValue(p, Integer.class);\n                            break;\n                        case TOTAL_ELEMENTS:\n                            total = ctxt.readValue(p, Long.class);\n                            break;\n                        default:\n                            p.skipChildren();\n                            break;\n                    }\n                } while (((propName = p.nextFieldName())) != null);\n            } else {\n                ctxt.handleUnexpectedToken(handledType(), p);\n            }\n        } else {\n            ctxt.handleUnexpectedToken(handledType(), p);\n        }\n\n        //Note that Sort field of Page is ignored here.\n        //Feel free to add more switch cases above to deserialize it as well.  \n        return new PageImpl&lt;&gt;(list, PageRequest.of(pageNumber, pageSize), total);\n    }\n\n    /**\n     * This is the main point here.\n     * The PageDeserializer is created for each specific deserialization with concrete generic parameter type of Page.\n     */\n    @Override\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) {\n        //This is the Page actually\n        final JavaType wrapperType = ctxt.getContextualType();\n        final PageDeserializer deserializer = new PageDeserializer();\n        //This is the parameter of Page\n        deserializer.valueType = wrapperType.containedType(0);\n        return deserializer;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11218260,"reputation":377,"user_id":8230136,"display_name":"steven"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595302092,"creation_date":1595302092,"answer_id":63006892,"question_id":52490399,"body_markdown":"In fact, spring mvc serialize object by jackson, so inject a pageImp serializer should resolve the problem.\r\n\r\n**step 1**:  PageSerializer class :\r\n\r\n\r\n \r\n\r\n       public class PageSerializer extends StdSerializer&lt;PageImpl&gt; {\r\n    \r\n        public PageSerializer() {\r\n            super(PageImpl.class);\r\n        }\r\n    \r\n        @Override\r\n        public void serialize(PageImpl value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n            gen.writeStartObject();\r\n            gen.writeNumberField(&quot;number&quot;, value.getNumber());\r\n            gen.writeNumberField(&quot;numberOfElements&quot;, value.getNumberOfElements());\r\n            gen.writeNumberField(&quot;totalElements&quot;, value.getTotalElements());\r\n            gen.writeNumberField(&quot;totalPages&quot;, value.getTotalPages());\r\n            gen.writeNumberField(&quot;size&quot;, value.getSize());\r\n            gen.writeFieldName(&quot;content&quot;);\r\n            provider.defaultSerializeValue(value.getContent(), gen);\r\n            gen.writeEndObject();\r\n        }\r\n     }\r\n\r\n**step 2**: inject jackson Moudle:\r\n\r\n    @Bean\r\n    public Module jacksonPageWithJsonViewModule() {\r\n        SimpleModule module = new SimpleModule(&quot;jackson-page-with-jsonview&quot;,\r\n            unknownVersion());\r\n        module.addSerializer(PageImpl.class, new PageSerializer());\r\n        return module;\r\n    }\r\n\r\nok, end.\r\n\r\n\r\n\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>In fact, spring mvc serialize object by jackson, so inject a pageImp serializer should resolve the problem.</p>\n<p><strong>step 1</strong>:  PageSerializer class :</p>\n<pre><code>   public class PageSerializer extends StdSerializer&lt;PageImpl&gt; {\n\n    public PageSerializer() {\n        super(PageImpl.class);\n    }\n\n    @Override\n    public void serialize(PageImpl value, JsonGenerator gen, SerializerProvider provider) throws IOException {\n        gen.writeStartObject();\n        gen.writeNumberField(&quot;number&quot;, value.getNumber());\n        gen.writeNumberField(&quot;numberOfElements&quot;, value.getNumberOfElements());\n        gen.writeNumberField(&quot;totalElements&quot;, value.getTotalElements());\n        gen.writeNumberField(&quot;totalPages&quot;, value.getTotalPages());\n        gen.writeNumberField(&quot;size&quot;, value.getSize());\n        gen.writeFieldName(&quot;content&quot;);\n        provider.defaultSerializeValue(value.getContent(), gen);\n        gen.writeEndObject();\n    }\n }\n</code></pre>\n<p><strong>step 2</strong>: inject jackson Moudle:</p>\n<pre><code>@Bean\npublic Module jacksonPageWithJsonViewModule() {\n    SimpleModule module = new SimpleModule(&quot;jackson-page-with-jsonview&quot;,\n        unknownVersion());\n    module.addSerializer(PageImpl.class, new PageSerializer());\n    return module;\n}\n</code></pre>\n<p>ok, end.</p>\n"},{"comments":[{"owner":{"account_id":1861986,"reputation":1003,"user_id":1686407,"display_name":"min"},"score":2,"creation_date":1608889031,"post_id":64235004,"comment_id":115707142,"body_markdown":"I got `java.lang.ClassNotFoundException: feign.codec.EncodeException` with `org.springframework.cloud:spring-cloud-openfeign-core` when run as jar. need use `org.springframework.cloud:spring-cloud-starter-openfeign` instead.","body":"I got <code>java.lang.ClassNotFoundException: feign.codec.EncodeException</code> with <code>org.springframework.cloud:spring-cloud-openfeign-core</code> when run as jar. need use <code>org.springframework.cloud:spring-cloud-starter-openfeign</code> instead."}],"tags":[],"owner":{"account_id":19675805,"reputation":141,"user_id":14403986,"display_name":"Marcio Esposito"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1602025915,"creation_date":1602025915,"answer_id":64235004,"question_id":52490399,"body_markdown":"This worked (org.springframework.cloud:spring-cloud-openfeign-core:2.2.5.RELEASE):\r\n\r\n    @Configuration\r\n    public class FeignConfigurationFactory {\r\n    \r\n        @Bean\r\n        public Module pageJacksonModule() {\r\n            return new PageJacksonModule();\r\n        }\r\n    \r\n        @Bean\r\n        public Module sortJacksonModule() {\r\n            return new SortJacksonModule();\r\n        }\r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>This worked (org.springframework.cloud:spring-cloud-openfeign-core:2.2.5.RELEASE):</p>\n<pre><code>@Configuration\npublic class FeignConfigurationFactory {\n\n    @Bean\n    public Module pageJacksonModule() {\n        return new PageJacksonModule();\n    }\n\n    @Bean\n    public Module sortJacksonModule() {\n        return new SortJacksonModule();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622442791,"creation_date":1622442791,"answer_id":67768916,"question_id":52490399,"body_markdown":"You can do something like this\r\n\r\n    final PageImplDeserializer&lt;YOUR_CLASS&gt; response = objectMapper.readValue(jsonResponse, new TypeReference&lt;&gt;() {});\r\n\r\n\r\n    public class PageImplDeserializer&lt;T&gt; {\r\n        private List&lt;T&gt; content;\r\n        private int number;\r\n        private int size;\r\n        private Long totalElements;\r\n        private JsonNode pageable;\r\n        private boolean last;\r\n        private int totalPages;\r\n        private JsonNode sort;\r\n        private boolean first;\r\n        private int numberOfElements;\r\n    \r\n    ... HERE GETTERS AND SETTERS...\r\n    \r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>You can do something like this</p>\n<pre><code>final PageImplDeserializer&lt;YOUR_CLASS&gt; response = objectMapper.readValue(jsonResponse, new TypeReference&lt;&gt;() {});\n\n\npublic class PageImplDeserializer&lt;T&gt; {\n    private List&lt;T&gt; content;\n    private int number;\n    private int size;\n    private Long totalElements;\n    private JsonNode pageable;\n    private boolean last;\n    private int totalPages;\n    private JsonNode sort;\n    private boolean first;\n    private int numberOfElements;\n\n... HERE GETTERS AND SETTERS...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4531095,"reputation":1545,"user_id":3681565,"display_name":"Gaspar"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1627361540,"creation_date":1627361540,"answer_id":68539147,"question_id":52490399,"body_markdown":"These solutions don&#39;t work in tests universe if you are using response and serializing it. I had to serialize the content in List myself :) &lt;br&gt;\r\nIn this scenario i am using RestAssured response.\r\n\r\n    protected static &lt;T&gt; List&lt;T&gt; getResponsePageDTO(Response response, Class&lt;T&gt; clazz) throws IOException {\r\n        Map&lt;String, Object&gt; objectMap = objectMapper.readValue(response.getBody().print(), Map.class);\r\n        List&lt;Object&gt; content = (List&lt;Object&gt;) objectMap.get(&quot;content&quot;);\r\n        List&lt;T&gt; result = new ArrayList&lt;&gt;();\r\n        for (Object o : content) {\r\n            result.add(objectMapper.convertValue(o, clazz));\r\n        }\r\n        return result;\r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>These solutions don't work in tests universe if you are using response and serializing it. I had to serialize the content in List myself :) <br>\nIn this scenario i am using RestAssured response.</p>\n<pre><code>protected static &lt;T&gt; List&lt;T&gt; getResponsePageDTO(Response response, Class&lt;T&gt; clazz) throws IOException {\n    Map&lt;String, Object&gt; objectMap = objectMapper.readValue(response.getBody().print(), Map.class);\n    List&lt;Object&gt; content = (List&lt;Object&gt;) objectMap.get(&quot;content&quot;);\n    List&lt;T&gt; result = new ArrayList&lt;&gt;();\n    for (Object o : content) {\n        result.add(objectMapper.convertValue(o, clazz));\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12271702,"reputation":313,"user_id":8956678,"display_name":"Raouf Makhlouf"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1641504461,"creation_date":1641498817,"answer_id":70612916,"question_id":52490399,"body_markdown":"To retrieve objects from Page content, there is no need to code a specific mapper, use **objectMapper** and the class **org.springframework.data.domain.PageImpl** \r\n\r\nHere is the method:\r\n\r\n```java\r\nprivate &lt;T&gt; List&lt;T&gt; getResponsePageContent(ObjectMapper objectMapper, ResultActions result, Class&lt;T&gt; clazz) throws IOException {\r\n   return  objectMapper.readValue(result.andReturn().getResponse().getContentAsString(), \r\n                             new TypeReference&lt;PageImpl&lt;T&gt;&gt;() {})\r\n                            .getContent();\r\n}\r\n```\r\nAnd I use it like this: \r\n\r\n```java\r\nList&lt;Book&gt; books = getResponsePageContent(objectMapper, result, Book.class);\r\n```\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>To retrieve objects from Page content, there is no need to code a specific mapper, use <strong>objectMapper</strong> and the class <strong>org.springframework.data.domain.PageImpl</strong></p>\n<p>Here is the method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private &lt;T&gt; List&lt;T&gt; getResponsePageContent(ObjectMapper objectMapper, ResultActions result, Class&lt;T&gt; clazz) throws IOException {\n   return  objectMapper.readValue(result.andReturn().getResponse().getContentAsString(), \n                             new TypeReference&lt;PageImpl&lt;T&gt;&gt;() {})\n                            .getContent();\n}\n</code></pre>\n<p>And I use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Book&gt; books = getResponsePageContent(objectMapper, result, Book.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16772987,"reputation":474,"user_id":12125012,"display_name":"attalos"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647532791,"creation_date":1647532791,"answer_id":71515470,"question_id":52490399,"body_markdown":"Similar to @GSUgambit answer but more compact, since you do not have to specify the unused constructor parameters. The trick is to use `@JsonIgnoreProperties`.\r\n\r\n```java\r\n@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;pageable&quot;})\r\npublic class RestPage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\r\n    public RestPage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content,\r\n                    @JsonProperty(&quot;number&quot;) int page,\r\n                    @JsonProperty(&quot;size&quot;) int size,\r\n                    @JsonProperty(&quot;totalElements&quot;) long total) {\r\n        super(content, PageRequest.of(page, size), total);\r\n    }\r\n\r\n    public RestPage(Page&lt;T&gt; page) {\r\n        super(page.getContent(), page.getPageable(), page.getTotalElements());\r\n    }\r\n}\r\n```","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Similar to @GSUgambit answer but more compact, since you do not have to specify the unused constructor parameters. The trick is to use <code>@JsonIgnoreProperties</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;pageable&quot;})\npublic class RestPage&lt;T&gt; extends PageImpl&lt;T&gt; {\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\n    public RestPage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content,\n                    @JsonProperty(&quot;number&quot;) int page,\n                    @JsonProperty(&quot;size&quot;) int size,\n                    @JsonProperty(&quot;totalElements&quot;) long total) {\n        super(content, PageRequest.of(page, size), total);\n    }\n\n    public RestPage(Page&lt;T&gt; page) {\n        super(page.getContent(), page.getPageable(), page.getTotalElements());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9784761,"reputation":63,"user_id":7251427,"display_name":"Jordi Gomis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663141469,"creation_date":1663141469,"answer_id":73713222,"question_id":52490399,"body_markdown":"I have this problem on kotlin and solved on this way:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonCreator\r\n    import com.fasterxml.jackson.annotation.JsonProperty\r\n    import com.fasterxml.jackson.databind.JsonNode\r\n    import org.springframework.data.domain.PageImpl\r\n    import org.springframework.data.domain.PageRequest\r\n    \r\n    class RestResponsePage&lt;T&gt; @JsonCreator(mode = JsonCreator.Mode.PROPERTIES) constructor(\r\n        @JsonProperty(&quot;content&quot;) content: List&lt;T&gt;?,\r\n        @JsonProperty(&quot;number&quot;) number: Int,\r\n        @JsonProperty(&quot;size&quot;) size: Int,\r\n        @JsonProperty(&quot;totalElements&quot;) totalElements: Long?,\r\n        @JsonProperty(&quot;pageable&quot;) pageable: JsonNode?,\r\n        @JsonProperty(&quot;last&quot;) last: Boolean,\r\n        @JsonProperty(&quot;totalPages&quot;) totalPages: Int,\r\n        @JsonProperty(&quot;sort&quot;) sort: JsonNode?,\r\n        @JsonProperty(&quot;first&quot;) first: Boolean,\r\n        @JsonProperty(&quot;numberOfElements&quot;) numberOfElements: Int\r\n    ) : PageImpl&lt;T&gt;(\r\n        content!!, PageRequest.of(number, size),\r\n        totalElements!!\r\n    )\r\n\r\nAnd is used like this:\r\n\r\n    private fun getPersonsRequest(\r\n            page: Int,\r\n            size: Int,\r\n        ): RestResponsePage&lt;PersonsResponse&gt; {}","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>I have this problem on kotlin and solved on this way:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonCreator\nimport com.fasterxml.jackson.annotation.JsonProperty\nimport com.fasterxml.jackson.databind.JsonNode\nimport org.springframework.data.domain.PageImpl\nimport org.springframework.data.domain.PageRequest\n\nclass RestResponsePage&lt;T&gt; @JsonCreator(mode = JsonCreator.Mode.PROPERTIES) constructor(\n    @JsonProperty(&quot;content&quot;) content: List&lt;T&gt;?,\n    @JsonProperty(&quot;number&quot;) number: Int,\n    @JsonProperty(&quot;size&quot;) size: Int,\n    @JsonProperty(&quot;totalElements&quot;) totalElements: Long?,\n    @JsonProperty(&quot;pageable&quot;) pageable: JsonNode?,\n    @JsonProperty(&quot;last&quot;) last: Boolean,\n    @JsonProperty(&quot;totalPages&quot;) totalPages: Int,\n    @JsonProperty(&quot;sort&quot;) sort: JsonNode?,\n    @JsonProperty(&quot;first&quot;) first: Boolean,\n    @JsonProperty(&quot;numberOfElements&quot;) numberOfElements: Int\n) : PageImpl&lt;T&gt;(\n    content!!, PageRequest.of(number, size),\n    totalElements!!\n)\n</code></pre>\n<p>And is used like this:</p>\n<pre><code>private fun getPersonsRequest(\n        page: Int,\n        size: Int,\n    ): RestResponsePage&lt;PersonsResponse&gt; {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2264978,"reputation":3734,"user_id":1993937,"accept_rate":47,"display_name":"TheJeff"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675202614,"creation_date":1675202614,"answer_id":75303615,"question_id":52490399,"body_markdown":"There is a PageJacksonModule and a SortJacksonModule.\r\n\r\nKotlin:\r\n\r\n    private val mapper = jacksonObjectMapper().registerModules(\r\n        PageJacksonModule(),\r\n        SortJacksonModule()\r\n    )","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>There is a PageJacksonModule and a SortJacksonModule.</p>\n<p>Kotlin:</p>\n<pre><code>private val mapper = jacksonObjectMapper().registerModules(\n    PageJacksonModule(),\n    SortJacksonModule()\n)\n</code></pre>\n"}],"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42160,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":52509886,"answer_count":11,"score":27,"last_activity_date":1675202614,"creation_date":1537848097,"question_id":52490399,"body_markdown":"Trying to unit test receiving a page from spring boot. If used with javascript the page can be easily be deserialized, but with java, it fails. Have added a default constructor for spring (which is an accepted answer in another stackoverflow post) but it does not work here.\r\n\r\nUnit Test\r\n\r\n    @Test\r\n    public void test_read_pagination_happy(@Autowired ObservationSet set) {\r\n\r\n        repository.save(set);\r\n\r\n        final HttpEntity&lt;String&gt; authHeaders = authentication.convert(&quot;&quot;, authSuccess);\r\n        final ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt; responseType = new ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt;() {\r\n        };\r\n        // final ResponseEntity&lt;String&gt; result = restTemplate.exchange(base + &quot;/api/v1/observationset&quot;, HttpMethod.GET, authHeaders, String.class);\r\n        final ResponseEntity&lt;RestResponsePage&lt;ObservationSet&gt;&gt; result = restTemplate.exchange(base + &quot;/api/v1/observationset&quot;, HttpMethod.GET, authHeaders,\r\n                        responseType);\r\n        System.out.println(result.getBody());\r\n        assertSame(HttpStatus.OK, result.getStatusCode(), &quot;incorrect status code&quot;);\r\n    }\r\n\r\nRestRespongePage class\r\n\r\n    class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n\r\n        private static final long serialVersionUID = 3248189030448292002L;\r\n\r\n        public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\r\n            super(content, pageable, total);\r\n        }\r\n\r\n        public RestResponsePage(List&lt;T&gt; content) {\r\n            super(content);\r\n        }\r\n\r\n        public RestResponsePage() {\r\n            super(new ArrayList&lt;T&gt;());\r\n        }\r\n\r\n    }\r\n\r\n```\r\n\r\nCode is available on github --&gt; https://github.com/OpenPCM/openpcm-server/blob/integration-test/src/test/java/org/openpcm/controller/ObservationSetControllerIntTest.java\r\n\r\nThe deserialization throws this error:\r\n\r\n    org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.springframework.data.domain.Pageable]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n     at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[&quot;pageable&quot;])\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:240)\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:225)\r\n    \tat org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:100)\r\n    \tat org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:959)\r\n    \tat org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:942)\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:689)\r\n    \tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:644)\r\n    \tat org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:593)\r\n    \tat org.springframework.boot.test.web.client.TestRestTemplate.exchange(TestRestTemplate.java:843)\r\n    \tat org.openpcm.controller.ObservationSetControllerIntTest.test_read_pagination_happy(ObservationSetControllerIntTest.java:85)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:436)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\r\n    \tat org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:112)\r\n    \tat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n    \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n    \tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\r\n    \tat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n    \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n    \tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\r\n    \tat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\r\n    \tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:89)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\r\n    Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n     at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[&quot;pageable&quot;])\r\n    \tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1451)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1027)\r\n    \tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:265)\r\n    \tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:288)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3084)\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237)\r\n    \t... 65 more\r\n\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Trying to unit test receiving a page from spring boot. If used with javascript the page can be easily be deserialized, but with java, it fails. Have added a default constructor for spring (which is an accepted answer in another stackoverflow post) but it does not work here.</p>\n\n<p>Unit Test</p>\n\n<pre><code>@Test\npublic void test_read_pagination_happy(@Autowired ObservationSet set) {\n\n    repository.save(set);\n\n    final HttpEntity&lt;String&gt; authHeaders = authentication.convert(\"\", authSuccess);\n    final ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt; responseType = new ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt;() {\n    };\n    // final ResponseEntity&lt;String&gt; result = restTemplate.exchange(base + \"/api/v1/observationset\", HttpMethod.GET, authHeaders, String.class);\n    final ResponseEntity&lt;RestResponsePage&lt;ObservationSet&gt;&gt; result = restTemplate.exchange(base + \"/api/v1/observationset\", HttpMethod.GET, authHeaders,\n                    responseType);\n    System.out.println(result.getBody());\n    assertSame(HttpStatus.OK, result.getStatusCode(), \"incorrect status code\");\n}\n</code></pre>\n\n<p>RestRespongePage class</p>\n\n<pre><code>class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\n\n    private static final long serialVersionUID = 3248189030448292002L;\n\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\n        super(content, pageable, total);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content) {\n        super(content);\n    }\n\n    public RestResponsePage() {\n        super(new ArrayList&lt;T&gt;());\n    }\n\n}\n</code></pre>\n\n<p>```</p>\n\n<p>Code is available on github --> <a href=\"https://github.com/OpenPCM/openpcm-server/blob/integration-test/src/test/java/org/openpcm/controller/ObservationSetControllerIntTest.java\" rel=\"noreferrer\">https://github.com/OpenPCM/openpcm-server/blob/integration-test/src/test/java/org/openpcm/controller/ObservationSetControllerIntTest.java</a></p>\n\n<p>The deserialization throws this error:</p>\n\n<pre><code>org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.springframework.data.domain.Pageable]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[\"pageable\"])\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:240)\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:225)\n    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:100)\n    at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:959)\n    at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:942)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:689)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:644)\n    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:593)\n    at org.springframework.boot.test.web.client.TestRestTemplate.exchange(TestRestTemplate.java:843)\n    at org.openpcm.controller.ObservationSetControllerIntTest.test_read_pagination_happy(ObservationSetControllerIntTest.java:85)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:436)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\n    at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:112)\n    at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\n    at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\n    at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:89)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[\"pageable\"])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1451)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1027)\n    at com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:265)\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:288)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3084)\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237)\n    ... 65 more\n</code></pre>\n"},{"tags":["java","selenium","web-scraping"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1675197894,"post_id":75302864,"comment_id":132876113,"body_markdown":"AFAIK, &quot;connection reset&quot; means the other side already closed the connection for you.  In HTTP, it&#39;s normal close the connection immediately after all data is sent (unless &quot;keep alive&quot; is set?), so what you&#39;re getting is probably normal.","body":"AFAIK, &quot;connection reset&quot; means the other side already closed the connection for you.  In HTTP, it&#39;s normal close the connection immediately after all data is sent (unless &quot;keep alive&quot; is set?), so what you&#39;re getting is probably normal."},{"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"score":0,"creation_date":1675198924,"post_id":75302864,"comment_id":132876415,"body_markdown":"@markspace Okay, so what should I do about it? What I understand from this is that I should not call the quit(), is that a better approach to this issue, or better to catch it and do nothing about it? What do you think?","body":"@markspace Okay, so what should I do about it? What I understand from this is that I should not call the quit(), is that a better approach to this issue, or better to catch it and do nothing about it? What do you think?"}],"answers":[{"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1675202654,"post_id":75303346,"comment_id":132877355,"body_markdown":"Do  you mean you executed your program with out the `System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/path/to/chromedriver&quot;);` line?","body":"Do  you mean you executed your program with out the <code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;&#47;path&#47;to&#47;chromedriver&quot;);</code> line?"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1675203450,"post_id":75303346,"comment_id":132877596,"body_markdown":"Yes @undetectedSelenium","body":"Yes @undetectedSelenium"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1675203572,"post_id":75303346,"comment_id":132877622,"body_markdown":"And without setting any EnvVar/Path or any dependency per se?","body":"And without setting any EnvVar/Path or any dependency per se?"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1675204249,"post_id":75303346,"comment_id":132877788,"body_markdown":"That&#39;s correct. It will all be handled by the library Selenium Manager packaged within selenium version 4.6.0 and above. The fact that you are so curiously asking is making me rethink. :) However am certain about what I have mentioned. I am 100% sure the above code in my answer worked without System.setProperty :)","body":"That&#39;s correct. It will all be handled by the library Selenium Manager packaged within selenium version 4.6.0 and above. The fact that you are so curiously asking is making me rethink. :) However am certain about what I have mentioned. I am 100% sure the above code in my answer worked without System.setProperty :)"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1675204651,"post_id":75303346,"comment_id":132877882,"body_markdown":"Great point :) well we are still struggling to keep up the show with the initial support of _Selenium Manager_. Brownie points on your way ;)","body":"Great point :) well we are still struggling to keep up the show with the initial support of <i>Selenium Manager</i>. Brownie points on your way ;)"},{"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"score":0,"creation_date":1675245596,"post_id":75303346,"comment_id":132885260,"body_markdown":"I tried to remove it after dragging the chrome driver to the project and the program worked, but I still got the connection exceptions though, so I guess there is something wrong on my computer side","body":"I tried to remove it after dragging the chrome driver to the project and the program worked, but I still got the connection exceptions though, so I guess there is something wrong on my computer side"}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675200638,"creation_date":1675200638,"answer_id":75303346,"question_id":75302864,"body_markdown":"Below is the same code I have tried and it works fine with no exceptions. Only difference is that I have not added following code `System.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);`. You do not need to set property when you are using the latest version of selenium(which you are using anyways). Try removing this line and see if it resolves your issue.\r\n\r\n\tpublic static void main(String[] args){\r\n\t\t\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\toptions.addArguments(&quot;--headless&quot;);\r\n\r\n\t\tWebDriver driver = new ChromeDriver(options);\r\n\t\tdriver.get(&quot;https://relatedwords.org/relatedto/&quot; + &quot;Fishsticks&quot;);\r\n\t\t\r\n\t\tWebElement words = driver.findElement(By.className(&quot;words&quot;));\r\n\t\tfinal List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\r\n\t\twordList.forEach(word -&gt; System.out.println(word.getText()));\r\n\r\n\t\tdriver.quit();\r\n\r\n\t}\r\n\r\nHere is the console output:\r\n\r\n````\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nStarting ChromeDriver 109.0.5414.74 (e7c5703604daa9cc128ccf5a5d3e993513758913-refs/branch-heads/5414@{#1172}) on port 2732\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nbatter\r\ncod\r\nunited kingdom\r\nketchup\r\nherring\r\nwhitefish\r\nhake\r\nhaddock\r\npollock\r\nrefrigerator\r\nbritish english\r\nbreaded\r\namerican english\r\neurope\r\nfood processing\r\nsupermarket\r\ngrilling\r\ntartar sauce\r\nfish\r\nmachine\r\nbackbone\r\nparents\r\nfrozen food\r\nwheel\r\nblade\r\ntelevision commercial\r\nsouthampton\r\nshallow frying\r\nskin\r\nbreadcrumbs\r\nsalmon\r\nbone\r\ndeep frying\r\nworld war ii\r\ngorton&#39;s of gloucester\r\nclarence birdseye\r\nstore brand\r\nvegetable oil\r\n````","title":"Selenium java.net.SocketException: Connection reset when calling driver.quit();","body":"<p>Below is the same code I have tried and it works fine with no exceptions. Only difference is that I have not added following code <code>System.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);</code>. You do not need to set property when you are using the latest version of selenium(which you are using anyways). Try removing this line and see if it resolves your issue.</p>\n<pre><code>public static void main(String[] args){\n    \n    ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--headless&quot;);\n\n    WebDriver driver = new ChromeDriver(options);\n    driver.get(&quot;https://relatedwords.org/relatedto/&quot; + &quot;Fishsticks&quot;);\n    \n    WebElement words = driver.findElement(By.className(&quot;words&quot;));\n    final List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\n    wordList.forEach(word -&gt; System.out.println(word.getText()));\n\n    driver.quit();\n\n}\n</code></pre>\n<p>Here is the console output:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nStarting ChromeDriver 109.0.5414.74 (e7c5703604daa9cc128ccf5a5d3e993513758913-refs/branch-heads/5414@{#1172}) on port 2732\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nbatter\ncod\nunited kingdom\nketchup\nherring\nwhitefish\nhake\nhaddock\npollock\nrefrigerator\nbritish english\nbreaded\namerican english\neurope\nfood processing\nsupermarket\ngrilling\ntartar sauce\nfish\nmachine\nbackbone\nparents\nfrozen food\nwheel\nblade\ntelevision commercial\nsouthampton\nshallow frying\nskin\nbreadcrumbs\nsalmon\nbone\ndeep frying\nworld war ii\ngorton's of gloucester\nclarence birdseye\nstore brand\nvegetable oil\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"score":0,"creation_date":1675246780,"post_id":75303602,"comment_id":132885637,"body_markdown":"I downloaded JDK 8u351, and when I check for java installations on my pc I got these:\n\n- Java SE Development Kit 8 Update 351\n- Java SE Development Kit 8 Update 333\n- Java(TM) SE Development Kit 18.0.2.1 Update 351\n- Java 8 Update 351\n\nWhich of these can I uninstall to have only the latest? @undetected","body":"I downloaded JDK 8u351, and when I check for java installations on my pc I got these:  - Java SE Development Kit 8 Update 351 - Java SE Development Kit 8 Update 333 - Java(TM) SE Development Kit 18.0.2.1 Update 351 - Java 8 Update 351  Which of these can I uninstall to have only the latest? @undetected"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1675247838,"post_id":75303602,"comment_id":132885999,"body_markdown":"_JDK 8u351_ is the latest, even though _JDK 8u333_ would also suffice.","body":"<i>JDK 8u351</i> is the latest, even though <i>JDK 8u333</i> would also suffice."}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675202503,"creation_date":1675202503,"answer_id":75303602,"question_id":75302864,"body_markdown":"java.net.SocketException: Connection reset\r\n------------------------------------------\r\n[java.net.SocketException](https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/) may occur due to several possible reasons as follows:\r\n\r\n- It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.\r\n- It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nI took your program and executed it. Here is the result:\r\n\r\n- Code block:\r\n\r\n\t  System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\r\n\t  ChromeOptions options = new ChromeOptions();\r\n\t  options.addArguments(&quot;--start-maximized&quot;);\r\n\t  WebDriver driver = new ChromeDriver(options);\r\n\t  driver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);\r\n\t  WebElement words = driver.findElement(By.className(&quot;words&quot;));\r\n\t  final List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\r\n\t  wordList.forEach(word -&gt; System.out.println(word.getText()));\r\n\t  driver.quit();\r\n\t  \r\n- Console output:\r\n\r\n\t  batter\r\n\t  cod\r\n\t  united kingdom\r\n\t  ketchup\r\n\t  herring\r\n\t  whitefish\r\n\t  hake\r\n\t  haddock\r\n\t  pollock\r\n\t  refrigerator\r\n\t  british english\r\n\t  breaded\r\n\t  american english\r\n\t  europe\r\n\t  food processing\r\n\t  supermarket\r\n\t  grilling\r\n\t  tartar sauce\r\n\t  fish\r\n\t  machine\r\n\t  backbone\r\n\t  parents\r\n\t  frozen food\r\n\t  wheel\r\n\t  blade\r\n\t  television commercial\r\n\t  southampton\r\n\t  shallow frying\r\n\t  skin\r\n\t  breadcrumbs\r\n\t  salmon\r\n\t  bone\r\n\t  deep frying\r\n\t  world war ii\r\n\t  gorton&#39;s of gloucester\r\n\t  clarence birdseye\r\n\t  store brand\r\n\t  vegetable oil\r\n\r\n\r\n----------\r\n\r\n\r\n\t  \r\nConclusion\r\n----------\r\nProgrammatically, I don&#39;t see any error in your code block. However ensure that:\r\n\r\n- _JDK_ is upgraded to current levels [JDK 8u351](https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html).\r\n- _Selenium_ is upgraded to current levels [Version 4.8.0](https://www.selenium.dev/downloads/).\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v109.0](https://chromedriver.storage.googleapis.com/index.html?path=109.0.5414.74/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=109.0_ (as per [chromedriver=109.0.5414.74 release notes](https://chromedriver.storage.googleapis.com/109.0.5414.74/notes.txt)).\r\n- Take a _System Reboot_.\r\n- Execute your `Test` as a non-root user.\r\n\r\n\r\n----------\r\n\r\n\r\nReferences\r\n----------\r\nYou can find a couple of relevant detailed discussions in:\r\n\r\n- [Selenium shows java.net.SocketException: Connection reset](https://stackoverflow.com/a/48354459/7429447)\r\n- [java.net.SocketException: Connection reset](https://stackoverflow.com/q/62929/7429447)\r\n- [What&#39;s causing my java.net.SocketException: Connection reset?](https://stackoverflow.com/q/585599/7429447)","title":"Selenium java.net.SocketException: Connection reset when calling driver.quit();","body":"<h2>java.net.SocketException: Connection reset</h2>\n<p><a href=\"https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/\" rel=\"nofollow noreferrer\">java.net.SocketException</a> may occur due to several possible reasons as follows:</p>\n<ul>\n<li>It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.</li>\n<li>It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.</li>\n</ul>\n<hr />\n<h2>This usecase</h2>\n<p>I took your program and executed it. Here is the result:</p>\n<ul>\n<li><p>Code block:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--start-maximized&quot;);\nWebDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);\nWebElement words = driver.findElement(By.className(&quot;words&quot;));\nfinal List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\nwordList.forEach(word -&gt; System.out.println(word.getText()));\ndriver.quit();\n</code></pre>\n</li>\n<li><p>Console output:</p>\n<pre><code>batter\ncod\nunited kingdom\nketchup\nherring\nwhitefish\nhake\nhaddock\npollock\nrefrigerator\nbritish english\nbreaded\namerican english\neurope\nfood processing\nsupermarket\ngrilling\ntartar sauce\nfish\nmachine\nbackbone\nparents\nfrozen food\nwheel\nblade\ntelevision commercial\nsouthampton\nshallow frying\nskin\nbreadcrumbs\nsalmon\nbone\ndeep frying\nworld war ii\ngorton's of gloucester\nclarence birdseye\nstore brand\nvegetable oil\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>Conclusion</h2>\n<p>Programmatically, I don't see any error in your code block. However ensure that:</p>\n<ul>\n<li><em>JDK</em> is upgraded to current levels <a href=\"https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html\" rel=\"nofollow noreferrer\">JDK 8u351</a>.</li>\n<li><em>Selenium</em> is upgraded to current levels <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\">Version 4.8.0</a>.</li>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=109.0.5414.74/\" rel=\"nofollow noreferrer\">ChromeDriver v109.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=109.0</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/109.0.5414.74/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=109.0.5414.74 release notes</a>).</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>Test</code> as a non-root user.</li>\n</ul>\n<hr />\n<h2>References</h2>\n<p>You can find a couple of relevant detailed discussions in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/48354459/7429447\">Selenium shows java.net.SocketException: Connection reset</a></li>\n<li><a href=\"https://stackoverflow.com/q/62929/7429447\">java.net.SocketException: Connection reset</a></li>\n<li><a href=\"https://stackoverflow.com/q/585599/7429447\">What's causing my java.net.SocketException: Connection reset?</a></li>\n</ul>\n"}],"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1675202503,"creation_date":1675197430,"question_id":75302864,"body_markdown":"I saw these threads:\r\n\r\nhttps://stackoverflow.com/questions/63303153/java-net-socketexception-connection-reset-on-selenium-driver-close-or-driver\r\n\r\nhttps://stackoverflow.com/questions/72755662/selenium-java-java-net-socketexception-connection-reset\r\n\r\nBut I still don&#39;t understand the issue here. Everything is working fine, I get the response and content from the website and when I&#39;m done I call the `driver.quit();` / `driver.close();` and get the exception. If I don&#39;t call that `.quit();` I don&#39;t get the exception.\r\n\r\nI get this exception after I get the web scraping content:\r\n\r\n\r\n    2023-01-31T21:28:31.222+01:00  WARN 8400 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\r\n    \r\n    java.net.SocketException: Connection reset\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n    \tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    \r\n    2023-01-31T21:28:31.229+01:00  WARN 8400 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\r\n    \r\n    java.net.SocketException: Connection reset\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n    \tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\nThis is the code from the main:\r\n\r\n            String url = &quot;https://relatedwords.org/relatedto/&quot;;\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);\r\n    \r\n    \t\tChromeOptions chromeOptions = new ChromeOptions();\r\n    \t\tchromeOptions.addArguments(&quot;--headless&quot;);\r\n    \r\n    \t\tWebDriver driver = new ChromeDriver(chromeOptions);\r\n    \t\tdriver.get(url + &quot;Fishsticks&quot;);\r\n    \r\n    \t\tWebElement words = driver.findElement(By.className(&quot;words&quot;));\r\n    \t\tfinal List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\r\n    \t\twordList.forEach(word -&gt; System.out.println(word.getText()));\r\n    \r\n    \t\t// when I remove this I do not get any exceptions\r\n    \t\tdriver.quit();\r\n\r\nI use the latest chrome version I just checked, and there are no updates available (Version 109.0.5414.120) and I am using chrome driver version ChromeDriver 109.0.5414.74 and the latest selenium version 4.8.0\r\n\r\nSo what is the solution here? I tried to read so many stack threads but have not found any solution","title":"Selenium java.net.SocketException: Connection reset when calling driver.quit();","body":"<p>I saw these threads:</p>\n<p><a href=\"https://stackoverflow.com/questions/63303153/java-net-socketexception-connection-reset-on-selenium-driver-close-or-driver\">java.net.SocketException: Connection reset on Selenium driver.close() or driver.quit() statements</a></p>\n<p><a href=\"https://stackoverflow.com/questions/72755662/selenium-java-java-net-socketexception-connection-reset\">selenium/java- java.net.SocketException: Connection reset</a></p>\n<p>But I still don't understand the issue here. Everything is working fine, I get the response and content from the website and when I'm done I call the <code>driver.quit();</code> / <code>driver.close();</code> and get the exception. If I don't call that <code>.quit();</code> I don't get the exception.</p>\n<p>I get this exception after I get the web scraping content:</p>\n<pre><code>2023-01-31T21:28:31.222+01:00  WARN 8400 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-01-31T21:28:31.229+01:00  WARN 8400 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>This is the code from the main:</p>\n<pre><code>        String url = &quot;https://relatedwords.org/relatedto/&quot;;\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);\n\n        ChromeOptions chromeOptions = new ChromeOptions();\n        chromeOptions.addArguments(&quot;--headless&quot;);\n\n        WebDriver driver = new ChromeDriver(chromeOptions);\n        driver.get(url + &quot;Fishsticks&quot;);\n\n        WebElement words = driver.findElement(By.className(&quot;words&quot;));\n        final List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\n        wordList.forEach(word -&gt; System.out.println(word.getText()));\n\n        // when I remove this I do not get any exceptions\n        driver.quit();\n</code></pre>\n<p>I use the latest chrome version I just checked, and there are no updates available (Version 109.0.5414.120) and I am using chrome driver version ChromeDriver 109.0.5414.74 and the latest selenium version 4.8.0</p>\n<p>So what is the solution here? I tried to read so many stack threads but have not found any solution</p>\n"},{"tags":["java","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":16506849,"reputation":153,"user_id":11926676,"display_name":"DILIP DHANKECHA"},"score":0,"creation_date":1622117214,"post_id":67720651,"comment_id":119701618,"body_markdown":"@Alex I am talking about PathMatcher..","body":"@Alex I am talking about PathMatcher.."}],"answers":[{"tags":[],"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622209852,"creation_date":1622209852,"answer_id":67740134,"question_id":67720651,"body_markdown":"The [Spring Security documentation][1] has some examples of how to do that.\r\n\r\nI think you could do something like:\r\n```java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\nstatic class MultiSecurityHttpConfig {\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)                                                      \r\n    @Bean\r\n    SecurityWebFilterChain yourEndpointHttpSecurity(ServerHttpSecurity http) {\r\n        http\r\n            .securityMatcher(new PathPatternParserServerWebExchangeMatcher(&quot;/your-endpoint/**&quot;))      \r\n            .authorizeExchange((exchanges) -&gt; exchanges\r\n                .anyExchange().authenticated()\r\n            )\r\n            .httpBasic(withDefaults());                         \r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    SecurityWebFilterChain webHttpSecurity(ServerHttpSecurity http) {                       \r\n        http\r\n            .csrf().disable()\r\n            .exceptionHandling().and()\r\n            .httpBasic().disable()                                                  \r\n        return http.build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis way firstly your `yourEndpointHttpSecurity` **Bean** would be evaluated if the path matches `/your-endpoint/**` and then your default `webHttpSecurity`\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/reference/html5/#jc-webflux-multiple-filter-chains","title":"Multiple HttpSecurity for different path matcher","body":"<p>The <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#jc-webflux-multiple-filter-chains\" rel=\"nofollow noreferrer\">Spring Security documentation</a> has some examples of how to do that.</p>\n<p>I think you could do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\nstatic class MultiSecurityHttpConfig {\n\n    @Order(Ordered.HIGHEST_PRECEDENCE)                                                      \n    @Bean\n    SecurityWebFilterChain yourEndpointHttpSecurity(ServerHttpSecurity http) {\n        http\n            .securityMatcher(new PathPatternParserServerWebExchangeMatcher(&quot;/your-endpoint/**&quot;))      \n            .authorizeExchange((exchanges) -&gt; exchanges\n                .anyExchange().authenticated()\n            )\n            .httpBasic(withDefaults());                         \n        return http.build();\n    }\n\n    @Bean\n    SecurityWebFilterChain webHttpSecurity(ServerHttpSecurity http) {                       \n        http\n            .csrf().disable()\n            .exceptionHandling().and()\n            .httpBasic().disable()                                                  \n        return http.build();\n    }\n\n}\n</code></pre>\n<p>This way firstly your <code>yourEndpointHttpSecurity</code> <strong>Bean</strong> would be evaluated if the path matches <code>/your-endpoint/**</code> and then your default <code>webHttpSecurity</code></p>\n"}],"owner":{"account_id":16506849,"reputation":153,"user_id":11926676,"display_name":"DILIP DHANKECHA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675201663,"creation_date":1622112751,"question_id":67720651,"body_markdown":"In my current system, we are using below functionality for Spring Security gateway which is mentioned below.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n     http\r\n       .csrf().disable()\r\n       .exceptionHandling()\r\n           .and()\r\n       .httpBasic().disable()\r\n\r\nbut now I want to build a new endpoint which will use HTTP basic auth. How to manage this things using `PathMatcher`?\r\n\r\nIf we want to use different configuration methods for HTTP basic auth disable or enable. How it will work for me?\r\n\r\nWhen I will use two filter inside same class then I will get below error:\r\n\r\n```    \r\nDescription:\r\n\r\nThe bean &#39;conversionServicePostProcessor&#39;, defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/reactive/WebFluxSecurityConfiguration.class] and overriding is disabled.\r\n\r\nAction:\r\n\r\nConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\r\n```","title":"Multiple HttpSecurity for different path matcher","body":"<p>In my current system, we are using below functionality for Spring Security gateway which is mentioned below.</p>\n<pre class=\"lang-java prettyprint-override\"><code> http\n   .csrf().disable()\n   .exceptionHandling()\n       .and()\n   .httpBasic().disable()\n</code></pre>\n<p>but now I want to build a new endpoint which will use HTTP basic auth. How to manage this things using <code>PathMatcher</code>?</p>\n<p>If we want to use different configuration methods for HTTP basic auth disable or enable. How it will work for me?</p>\n<p>When I will use two filter inside same class then I will get below error:</p>\n<pre><code>Description:\n\nThe bean 'conversionServicePostProcessor', defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/reactive/WebFluxSecurityConfiguration.class] and overriding is disabled.\n\nAction:\n\nConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\n</code></pre>\n"},{"tags":["java","ethereum","web3-java"],"answers":[{"tags":[],"owner":{"account_id":9698070,"reputation":180,"user_id":7193875,"display_name":"dHour"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549272190,"creation_date":1549272190,"answer_id":54513150,"question_id":54494730,"body_markdown":"Not sure how you can detect it, but you could maybe cache the current nonce, ie. in Redis, and then check that value whenever you are sending the transaction. Once the transaction is sent, update the nonce and each server would share the same instance of cache. ","title":"recognizing too high nonce","body":"<p>Not sure how you can detect it, but you could maybe cache the current nonce, ie. in Redis, and then check that value whenever you are sending the transaction. Once the transaction is sent, update the nonce and each server would share the same instance of cache. </p>\n"}],"owner":{"account_id":6131614,"reputation":595,"user_id":4781594,"accept_rate":75,"display_name":"Phil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":503,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675201187,"creation_date":1549122885,"question_id":54494730,"body_markdown":"We have a cluster of servers which run a service. This services are broadcasting transactions from one address to many different addresses.\r\nThe problem now is, that they work in parallel. This means, that they always need to know the next valid nonce. Sometimes it happens that a service tries to broadcast a transaction with a nonce which is too high. For example lets say the last transaction of address &quot;0xabc...&quot; has the nonce 100. Now one service tries to broadcast a raw transaction with a nonce of 102 instead of the valid 101like this:\r\n```\r\nweb3j.ethSendRawTransaction(rawMessageWithNonce102).send();\r\n```\r\n\r\nIs there any way of detecting the issue?\r\n\r\nweb3j of course does not through an error here, because initially the tx gets into the tx pool. But after some time its deleted from there.\r\n\r\nHow can I detect a &quot;too high nonce issue&quot; in my java application? Any ideas?\r\n\r\n","title":"recognizing too high nonce","body":"<p>We have a cluster of servers which run a service. This services are broadcasting transactions from one address to many different addresses.\nThe problem now is, that they work in parallel. This means, that they always need to know the next valid nonce. Sometimes it happens that a service tries to broadcast a transaction with a nonce which is too high. For example lets say the last transaction of address &quot;0xabc...&quot; has the nonce 100. Now one service tries to broadcast a raw transaction with a nonce of 102 instead of the valid 101like this:</p>\n<pre><code>web3j.ethSendRawTransaction(rawMessageWithNonce102).send();\n</code></pre>\n<p>Is there any way of detecting the issue?</p>\n<p>web3j of course does not through an error here, because initially the tx gets into the tx pool. But after some time its deleted from there.</p>\n<p>How can I detect a &quot;too high nonce issue&quot; in my java application? Any ideas?</p>\n"},{"tags":["java","spring-cloud","amazon-sqs"],"comments":[{"owner":{"account_id":2813792,"reputation":1545,"user_id":2419434,"accept_rate":72,"display_name":"javafan"},"score":0,"creation_date":1535626355,"post_id":50867684,"comment_id":91140403,"body_markdown":"Did you fix the issue?","body":"Did you fix the issue?"}],"answers":[{"tags":[],"owner":{"account_id":444485,"reputation":18145,"user_id":836318,"accept_rate":53,"display_name":"wrschneider"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1537219516,"creation_date":1537219516,"answer_id":52375885,"question_id":50867684,"body_markdown":"Ran into the same issue, and I would answer the question one of two ways depending on who generates the message\r\n\r\n* Yes it is possible to set the `contentType` on the message, and if you control the messages being generated, this is preferred. In the AWS Console, when you send a message by hand, there is a tab for &quot;message attributes&quot;.  You would add an attribute with name `contentType` and value `application/json`.  AWS SDK calls should allow you to do the same from application code.\r\n\r\n* For messages that AWS generates without content specified content types, like S3 events, you do in fact need to set `strictContentMatch` to false.  This is documented here: \r\nhttp://cloud.spring.io/spring-cloud-static/spring-cloud-aws/2.0.0.RELEASE/multi/multi__messaging.html#_consuming_aws_event_messages_with_amazon_sqs\r\n\r\nThe document is confusing because it says &quot;without the mime-type header&quot; but the actual name of the header is `contentType`, as you found yourself.","title":"Spring Cloud @SqsListener MessageConversionException: Cannot convert from [java.lang.String] for GenericMessage","body":"<p>Ran into the same issue, and I would answer the question one of two ways depending on who generates the message</p>\n\n<ul>\n<li><p>Yes it is possible to set the <code>contentType</code> on the message, and if you control the messages being generated, this is preferred. In the AWS Console, when you send a message by hand, there is a tab for \"message attributes\".  You would add an attribute with name <code>contentType</code> and value <code>application/json</code>.  AWS SDK calls should allow you to do the same from application code.</p></li>\n<li><p>For messages that AWS generates without content specified content types, like S3 events, you do in fact need to set <code>strictContentMatch</code> to false.  This is documented here: \n<a href=\"http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/2.0.0.RELEASE/multi/multi__messaging.html#_consuming_aws_event_messages_with_amazon_sqs\" rel=\"noreferrer\">http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/2.0.0.RELEASE/multi/multi__messaging.html#_consuming_aws_event_messages_with_amazon_sqs</a></p></li>\n</ul>\n\n<p>The document is confusing because it says \"without the mime-type header\" but the actual name of the header is <code>contentType</code>, as you found yourself.</p>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1644896630,"creation_date":1590578394,"answer_id":62041860,"question_id":50867684,"body_markdown":"Consistent converter in both &quot;send&quot; and &quot;listen&quot; methods:\r\n=\r\n\r\n    \r\n    /** Provides a deserialization template for incoming SQS messages */\r\n    @Bean\r\n    public QueueMessageHandlerFactory queueMessageHandlerFactory(MessageConverter messageConverter) {\r\n    \r\n        var factory = new QueueMessageHandlerFactory();\r\n        factory.setArgumentResolvers(singletonList(new PayloadArgumentResolver(messageConverter)));\r\n        return factory;\r\n    }\r\n\r\n    /** Provides a serialization template for outgoing SQS messages */\r\n    @Bean\r\n    public QueueMessagingTemplate queueMessagingTemplate(AmazonSQSAsync amazonSQSAsync, MessageConverter messageConverter) {\r\n        return new QueueMessagingTemplate(amazonSQSAsync, (ResourceIdResolver) null, messageConverter);\r\n    }\r\n\r\n    /** Provides JSON converter for SQS messages */\r\n    @Bean\r\n    protected MessageConverter messageConverter(ObjectMapper objectMapper) {\r\n\r\n      var converter = new MappingJackson2MessageConverter();\r\n      converter.setObjectMapper(objectMapper);\r\n      // Serialization support:\r\n      converter.setSerializedPayloadClass(String.class);\r\n      // Deserialization support: (suppress &quot;contentType=application/json&quot; header requirement)\r\n      converter.setStrictContentTypeMatch(false);\r\n      return converter;\r\n    }\r\n    \r\nSee details in the original accepted answer. Credits to @wrschneider.\r\n\r\nNOTE: the above example injects and sets ObjectMapper. That is for HTTP REST controllers consistency (if any controllers).\r\n\r\n---\r\n\r\nImports:\r\n=\r\n\r\n    import static java.util.Collections.singletonList;\r\n\r\n    import com.amazonaws.services.sqs.AmazonSQSAsync;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.springframework.cloud.aws.core.env.ResourceIdResolver;\r\n    import org.springframework.cloud.aws.messaging.config.QueueMessageHandlerFactory;\r\n    import org.springframework.cloud.aws.messaging.core.QueueMessagingTemplate;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.messaging.converter.MappingJackson2MessageConverter;\r\n    import org.springframework.messaging.converter.MessageConverter;\r\n    import org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver;\r\n\r\n---\r\n\r\nUsage:\r\n=\r\n\r\n      @SqsListener(&quot;my-queue&quot;)\r\n      public void listen(Foo payload) {\r\n\r\n      }\r\n\r\n      public void send(Foo dto) {\r\n        queueMessagingTemplate.convertAndSend(url, dto);\r\n      }\r\n\r\n","title":"Spring Cloud @SqsListener MessageConversionException: Cannot convert from [java.lang.String] for GenericMessage","body":"<h1>Consistent converter in both &quot;send&quot; and &quot;listen&quot; methods:</h1>\n<pre><code>/** Provides a deserialization template for incoming SQS messages */\n@Bean\npublic QueueMessageHandlerFactory queueMessageHandlerFactory(MessageConverter messageConverter) {\n\n    var factory = new QueueMessageHandlerFactory();\n    factory.setArgumentResolvers(singletonList(new PayloadArgumentResolver(messageConverter)));\n    return factory;\n}\n\n/** Provides a serialization template for outgoing SQS messages */\n@Bean\npublic QueueMessagingTemplate queueMessagingTemplate(AmazonSQSAsync amazonSQSAsync, MessageConverter messageConverter) {\n    return new QueueMessagingTemplate(amazonSQSAsync, (ResourceIdResolver) null, messageConverter);\n}\n\n/** Provides JSON converter for SQS messages */\n@Bean\nprotected MessageConverter messageConverter(ObjectMapper objectMapper) {\n\n  var converter = new MappingJackson2MessageConverter();\n  converter.setObjectMapper(objectMapper);\n  // Serialization support:\n  converter.setSerializedPayloadClass(String.class);\n  // Deserialization support: (suppress &quot;contentType=application/json&quot; header requirement)\n  converter.setStrictContentTypeMatch(false);\n  return converter;\n}\n</code></pre>\n<p>See details in the original accepted answer. Credits to @wrschneider.</p>\n<p>NOTE: the above example injects and sets ObjectMapper. That is for HTTP REST controllers consistency (if any controllers).</p>\n<hr />\n<h1>Imports:</h1>\n<pre><code>import static java.util.Collections.singletonList;\n\nimport com.amazonaws.services.sqs.AmazonSQSAsync;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.springframework.cloud.aws.core.env.ResourceIdResolver;\nimport org.springframework.cloud.aws.messaging.config.QueueMessageHandlerFactory;\nimport org.springframework.cloud.aws.messaging.core.QueueMessagingTemplate;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.messaging.converter.MappingJackson2MessageConverter;\nimport org.springframework.messaging.converter.MessageConverter;\nimport org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver;\n</code></pre>\n<hr />\n<h1>Usage:</h1>\n<pre><code>  @SqsListener(&quot;my-queue&quot;)\n  public void listen(Foo payload) {\n\n  }\n\n  public void send(Foo dto) {\n    queueMessagingTemplate.convertAndSend(url, dto);\n  }\n</code></pre>\n"}],"owner":{"account_id":6359776,"reputation":666,"user_id":4935626,"display_name":"Joe Stepowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17669,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":2,"score":22,"last_activity_date":1675200679,"creation_date":1529022622,"question_id":50867684,"body_markdown":"I&#39;m seeing the following exception when I try to consume an SQS message: \r\n\r\n    org.springframework.messaging.converter.MessageConversionException: \r\n\r\n    Cannot convert from [java.lang.String] to [com.example.demo.Foo] for GenericMessage [payload={}, headers={LogicalResourceId=my-queue, ApproximateReceiveCount=1, SentTimestamp=1529021258825, ReceiptHandle=xxxx, Visibility=org.springframework.cloud.aws.messaging.listener.QueueMessageVisibility@47ce6922, SenderId=xxxx, lookupDestination=my-queue, ApproximateFirstReceiveTimestamp=1529021264456, MessageId=xxxx}]\r\n    \tat org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver.resolveArgument(PayloadArgumentResolver.java:144)\r\n    \tat org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:116)\r\n    \tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:137)\r\n    \tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:109)\r\n    \tat org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:515)\r\n    \tat org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:473)\r\n    \tat org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:409)\r\n    \tat org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer.executeMessage(SimpleMessageListenerContainer.java:205)\r\n    \tat org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$MessageExecutor.run(SimpleMessageListenerContainer.java:342)\r\n    \tat org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$SignalExecutingRunnable.run(SimpleMessageListenerContainer.java:397)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\nSpring Boot code is as follows:\r\n\r\n    @Configuration\r\n    @EnableSqs\r\n    public class AmazonSqsConfiguration {\r\n    \r\n        @Bean\r\n        public AmazonSQS amazonSQSAsync() {\r\n            return AmazonSQSAsyncClientBuilder.standard()\r\n                .withRegion(Regions.US_WEST_2)\r\n                .build();\r\n        }\r\n    }\r\n\r\n    @Service\r\n    public class MyService {\r\n    \r\n        // Throws MessageConversionException\r\n        @SqsListener(&quot;my-queue&quot;)\r\n        public void listen(Foo payload) {\r\n\r\n        }\r\n\r\n        // Works fine\r\n        @SqsListener(&quot;my-queue&quot;)\r\n        public void listen(String payload) {\r\n\r\n        }\r\n    }\r\n\r\nI&#39;m using `org.springframework.cloud:spring-cloud-aws-messaging:2.0.0.RC2`\r\n\r\nI do have Jackson 2 libraries on my classpath, so `PayloadArgumentResolver` is trying to use `MappingJackson2MessageConverter` to deserialize my message payload.  However, because the SQS message is missing a `contentType` header and `strictContentTypeMatch` is set to true, `canConvertFrom` returns false.\r\n\r\nhttps://github.com/spring-projects/spring-framework/blob/f5e8f4983f7653169f3da8a3287499fce93cadd4/spring-messaging/src/main/java/org/springframework/messaging/converter/AbstractMessageConverter.java#L237\r\n\r\nI don&#39;t see how it is possible to set `contentType` header for SQS messages - am I missing something?\r\n\r\nShould Spring Cloud `QueueMessageHandler` be setting `strictContentTypeMatch` to true?\r\n\r\nhttps://github.com/spring-cloud/spring-cloud-aws/blob/6a7c3c31709d4239131b27936de29385df414d41/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/QueueMessageHandler.java#L217","title":"Spring Cloud @SqsListener MessageConversionException: Cannot convert from [java.lang.String] for GenericMessage","body":"<p>I'm seeing the following exception when I try to consume an SQS message: </p>\n\n<pre><code>org.springframework.messaging.converter.MessageConversionException: \n\nCannot convert from [java.lang.String] to [com.example.demo.Foo] for GenericMessage [payload={}, headers={LogicalResourceId=my-queue, ApproximateReceiveCount=1, SentTimestamp=1529021258825, ReceiptHandle=xxxx, Visibility=org.springframework.cloud.aws.messaging.listener.QueueMessageVisibility@47ce6922, SenderId=xxxx, lookupDestination=my-queue, ApproximateFirstReceiveTimestamp=1529021264456, MessageId=xxxx}]\n    at org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver.resolveArgument(PayloadArgumentResolver.java:144)\n    at org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:116)\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:137)\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:109)\n    at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:515)\n    at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:473)\n    at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:409)\n    at org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer.executeMessage(SimpleMessageListenerContainer.java:205)\n    at org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$MessageExecutor.run(SimpleMessageListenerContainer.java:342)\n    at org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$SignalExecutingRunnable.run(SimpleMessageListenerContainer.java:397)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>Spring Boot code is as follows:</p>\n\n<pre><code>@Configuration\n@EnableSqs\npublic class AmazonSqsConfiguration {\n\n    @Bean\n    public AmazonSQS amazonSQSAsync() {\n        return AmazonSQSAsyncClientBuilder.standard()\n            .withRegion(Regions.US_WEST_2)\n            .build();\n    }\n}\n\n@Service\npublic class MyService {\n\n    // Throws MessageConversionException\n    @SqsListener(\"my-queue\")\n    public void listen(Foo payload) {\n\n    }\n\n    // Works fine\n    @SqsListener(\"my-queue\")\n    public void listen(String payload) {\n\n    }\n}\n</code></pre>\n\n<p>I'm using <code>org.springframework.cloud:spring-cloud-aws-messaging:2.0.0.RC2</code></p>\n\n<p>I do have Jackson 2 libraries on my classpath, so <code>PayloadArgumentResolver</code> is trying to use <code>MappingJackson2MessageConverter</code> to deserialize my message payload.  However, because the SQS message is missing a <code>contentType</code> header and <code>strictContentTypeMatch</code> is set to true, <code>canConvertFrom</code> returns false.</p>\n\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/f5e8f4983f7653169f3da8a3287499fce93cadd4/spring-messaging/src/main/java/org/springframework/messaging/converter/AbstractMessageConverter.java#L237\" rel=\"noreferrer\">https://github.com/spring-projects/spring-framework/blob/f5e8f4983f7653169f3da8a3287499fce93cadd4/spring-messaging/src/main/java/org/springframework/messaging/converter/AbstractMessageConverter.java#L237</a></p>\n\n<p>I don't see how it is possible to set <code>contentType</code> header for SQS messages - am I missing something?</p>\n\n<p>Should Spring Cloud <code>QueueMessageHandler</code> be setting <code>strictContentTypeMatch</code> to true?</p>\n\n<p><a href=\"https://github.com/spring-cloud/spring-cloud-aws/blob/6a7c3c31709d4239131b27936de29385df414d41/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/QueueMessageHandler.java#L217\" rel=\"noreferrer\">https://github.com/spring-cloud/spring-cloud-aws/blob/6a7c3c31709d4239131b27936de29385df414d41/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/QueueMessageHandler.java#L217</a></p>\n"},{"tags":["java","multithreading","caching","threadpool","guava"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1675280820,"post_id":75302979,"comment_id":132897039,"body_markdown":"Have you looked at http://guava.dev/CacheBuilder ?  It recommends you switch to Caffeine, which has a specific async cache API as well.","body":"Have you looked at <a href=\"http://guava.dev/CacheBuilder\" rel=\"nofollow noreferrer\">guava.dev/CacheBuilder</a> ?  It recommends you switch to Caffeine, which has a specific async cache API as well."},{"owner":{"account_id":6156584,"reputation":193,"user_id":4799382,"accept_rate":0,"display_name":"codemaster001"},"score":0,"creation_date":1675281134,"post_id":75302979,"comment_id":132897119,"body_markdown":"@LouisWasserman can I achieve this with guava itself instead of caffeine? I looked at the cachebuilder method, but I couldn&#39;t find anything that can help the above situation","body":"@LouisWasserman can I achieve this with guava itself instead of caffeine? I looked at the cachebuilder method, but I couldn&#39;t find anything that can help the above situation"},{"owner":{"account_id":6156584,"reputation":193,"user_id":4799382,"accept_rate":0,"display_name":"codemaster001"},"score":0,"creation_date":1675282731,"post_id":75302979,"comment_id":132897637,"body_markdown":"could you please give me an example with caffeine?","body":"could you please give me an example with caffeine?"}],"owner":{"account_id":6156584,"reputation":193,"user_id":4799382,"accept_rate":0,"display_name":"codemaster001"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675200487,"creation_date":1675198123,"question_id":75302979,"body_markdown":"I have implemented a guava cache.In the load method of the guava cache I wanted to call a service asynchronously. I don&#39;t want to block this call for other thread, so, on it&#39;s call back I wanted to load the cache. How can I achieve this?\r\n\r\n```\r\npublic CacheLoader(final DataValueProvider dataValueProvider) {\r\n        this.parentExecutor = Executors.newSingleThreadExecutor(new DefaultThreadFactory(&quot;cache-loader&quot;));\r\n        this.executorService = MoreExecutors.listeningDecorator(parentExecutor);\r\n        this.secretValueProvider = secretValueProvider;\r\n    }\r\n    /**\r\n     * Call back method invoked by Guava to loads the initial value of the secretManager entry.\r\n     */\r\n    @Override\r\n    public String load(CacheIndex cacheIndex) throws Exception {\r\n       return dataValueProvider.constructDataMangerFromSource(cacheIndex);\r\n    }\r\n\r\n```\r\n\r\n```\r\n protected String constructDataMangerFromSource(CacheIndex cacheIndex) {\r\n       GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest()\r\n                .withSecretId(cacheIndex.secretArn);\r\n\r\n        Future&lt;GetSecretValueResult&gt; future = awsSecretsManagerAsync.getSecretValueAsync(\r\n                getSecretValueRequest, new AsyncHandler&lt;GetSecretValueRequest, GetSecretValueResult&gt;() {\r\n                    @SneakyThrows\r\n                    @Override\r\n                    public void onError(Exception e) {\r\n                        //I want to throw exception from here\r\n                    }\r\n\r\n                    @Override\r\n                    public void onSuccess(GetSecretValueRequest request, GetSecretValueResult getSecretValueResult) {\r\n                        long endTime = System.currentTimeMillis();\r\n                        long totalTime = endTime - startTime;\r\n                        logger.info(&quot;Total time taken in the call &quot; + totalTime);\r\n                        //I want to return the value from here\r\n\r\n                    }\r\n                });\r\n        try {\r\n//This is currently blocking other thread\r\n\r\n            GetSecretValueResult getSecretValueResult = future.get();\r\n            return getSecretValueResult.getSecretString();\r\n        } catch (Exception ex) {\r\n            logger.error(&quot;SecretManage call failed  &quot; + ex.getCause() + &quot; &quot; + ex.getMessage());\r\n            throw ex;\r\n        }\r\n    }\r\n\r\n```\r\n","title":"Guava caching load method with an async service call","body":"<p>I have implemented a guava cache.In the load method of the guava cache I wanted to call a service asynchronously. I don't want to block this call for other thread, so, on it's call back I wanted to load the cache. How can I achieve this?</p>\n<pre><code>public CacheLoader(final DataValueProvider dataValueProvider) {\n        this.parentExecutor = Executors.newSingleThreadExecutor(new DefaultThreadFactory(&quot;cache-loader&quot;));\n        this.executorService = MoreExecutors.listeningDecorator(parentExecutor);\n        this.secretValueProvider = secretValueProvider;\n    }\n    /**\n     * Call back method invoked by Guava to loads the initial value of the secretManager entry.\n     */\n    @Override\n    public String load(CacheIndex cacheIndex) throws Exception {\n       return dataValueProvider.constructDataMangerFromSource(cacheIndex);\n    }\n\n</code></pre>\n<pre><code> protected String constructDataMangerFromSource(CacheIndex cacheIndex) {\n       GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest()\n                .withSecretId(cacheIndex.secretArn);\n\n        Future&lt;GetSecretValueResult&gt; future = awsSecretsManagerAsync.getSecretValueAsync(\n                getSecretValueRequest, new AsyncHandler&lt;GetSecretValueRequest, GetSecretValueResult&gt;() {\n                    @SneakyThrows\n                    @Override\n                    public void onError(Exception e) {\n                        //I want to throw exception from here\n                    }\n\n                    @Override\n                    public void onSuccess(GetSecretValueRequest request, GetSecretValueResult getSecretValueResult) {\n                        long endTime = System.currentTimeMillis();\n                        long totalTime = endTime - startTime;\n                        logger.info(&quot;Total time taken in the call &quot; + totalTime);\n                        //I want to return the value from here\n\n                    }\n                });\n        try {\n//This is currently blocking other thread\n\n            GetSecretValueResult getSecretValueResult = future.get();\n            return getSecretValueResult.getSecretString();\n        } catch (Exception ex) {\n            logger.error(&quot;SecretManage call failed  &quot; + ex.getCause() + &quot; &quot; + ex.getMessage());\n            throw ex;\n        }\n    }\n\n</code></pre>\n"},{"tags":["java","intellij-idea","character-encoding"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651620720,"post_id":72106304,"comment_id":127405801,"body_markdown":"`System.out.println(System.getProperty(&quot;file.encoding&quot;));` What does that give? What is your OS?","body":"<code>System.out.println(System.getProperty(&quot;file.encoding&quot;));</code> What does that give? What is your OS?"},{"owner":{"account_id":24895864,"reputation":3,"user_id":18767113,"display_name":"kutbeyy"},"score":0,"creation_date":1651622438,"post_id":72106304,"comment_id":127406065,"body_markdown":"Terminal output: UTF-8, My OS is Windows 10","body":"Terminal output: UTF-8, My OS is Windows 10"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651624496,"post_id":72106304,"comment_id":127406343,"body_markdown":"Try setting the IDE encoding to `Windows-1254`. What btw does `chcp` give in cmd.exe?","body":"Try setting the IDE encoding to <code>Windows-1254</code>. What btw does <code>chcp</code> give in cmd.exe?"},{"owner":{"account_id":24895864,"reputation":3,"user_id":18767113,"display_name":"kutbeyy"},"score":0,"creation_date":1651625912,"post_id":72106304,"comment_id":127406590,"body_markdown":"I tried the Windows-1254, the problem persisted. chcp cmd output:857(Turkish).  I tested everything from scratch in the virtual windows operating system, there is no problem there. I think the problem is in my operating system","body":"I tried the Windows-1254, the problem persisted. chcp cmd output:857(Turkish).  I tested everything from scratch in the virtual windows operating system, there is no problem there. I think the problem is in my operating system"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651645822,"post_id":72106304,"comment_id":127409526,"body_markdown":"Hmm. Is it the case that *some* Turkish characters are OK? Have a go with IBM857","body":"Hmm. Is it the case that <i>some</i> Turkish characters are OK? Have a go with IBM857"}],"answers":[{"tags":[],"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651640787,"creation_date":1651640787,"answer_id":72108180,"question_id":72106304,"body_markdown":"Here is a related issue on YouTrack:\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-291006/Running-the-Java-project-by-using-the-JDK-18-prints-the-garbled-\r\n\r\nFeel free to watch it in order to be notified once it has updates. See [this article](https://intellij-support.jetbrains.com/hc/articles/207241135) if you are not familiar with YouTrack.","title":"intellij idea console output not supporting turkish charecter","body":"<p>Here is a related issue on YouTrack:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-291006/Running-the-Java-project-by-using-the-JDK-18-prints-the-garbled-\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-291006/Running-the-Java-project-by-using-the-JDK-18-prints-the-garbled-</a></p>\n<p>Feel free to watch it in order to be notified once it has updates. See <a href=\"https://intellij-support.jetbrains.com/hc/articles/207241135\" rel=\"nofollow noreferrer\">this article</a> if you are not familiar with YouTrack.</p>\n"},{"tags":[],"owner":{"account_id":24825720,"reputation":1,"user_id":18705551,"display_name":"AlperKorkmaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675199612,"creation_date":1675194494,"answer_id":75302418,"question_id":72106304,"body_markdown":"\r\n\r\nFor turkish character support, you chould choose the international global UTF-8 format. \r\n&lt;p&gt;In IntelliJIdea \r\n**File / Settings / Editor / File Encoding** / *.properties\r\nChoose -&gt; **Default encoding for properties files UTF-8 \r\n\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt; By the use of BOM configurations you can find the correct solution for your files. Do not forget that some choices of BOM for some class files can cause various \\uxxxx errors like &#39;\\ufeff&#39; error &lt;/p&gt;\r\n&lt;p&gt; Moreover you could choose also Global Encoding and Project encoding values just given above in the same tab as UTF-8 to get a more general solution for the future projects.&lt;/p&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n[Screenshot of the web content created by the use of many components bfrom messages.properties][1]\r\n\r\n\r\n\r\n\r\n[printed text or response from local server with turkish characters][2]\r\n\r\n\r\n[Settings Page][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QLYnk.png\r\n  [2]: https://i.stack.imgur.com/IAT5w.png\r\n  [3]: https://i.stack.imgur.com/IQAdA.png","title":"intellij idea console output not supporting turkish charecter","body":"<p>For turkish character support, you chould choose the international global UTF-8 format.</p>\n<p>In IntelliJIdea \n**File / Settings / Editor / File Encoding** / *.properties\nChoose -> **Default encoding for properties files UTF-8 \n</p>\n<p> By the use of BOM configurations you can find the correct solution for your files. Do not forget that some choices of BOM for some class files can cause various \\uxxxx errors like '\\ufeff' error </p>\n<p> Moreover you could choose also Global Encoding and Project encoding values just given above in the same tab as UTF-8 to get a more general solution for the future projects.</p>\n<p><a href=\"https://i.stack.imgur.com/QLYnk.png\" rel=\"nofollow noreferrer\">Screenshot of the web content created by the use of many components bfrom messages.properties</a></p>\n<p><a href=\"https://i.stack.imgur.com/IAT5w.png\" rel=\"nofollow noreferrer\">printed text or response from local server with turkish characters</a></p>\n<p><a href=\"https://i.stack.imgur.com/IQAdA.png\" rel=\"nofollow noreferrer\">Settings Page</a></p>\n"}],"owner":{"account_id":24895864,"reputation":3,"user_id":18767113,"display_name":"kutbeyy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":696,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72108180,"answer_count":2,"score":0,"last_activity_date":1675199612,"creation_date":1651619024,"question_id":72106304,"body_markdown":"\r\nhttps://stackoverflow.com/questions/35231291/intellij-idea-incorrect-encoding-in-console-output\r\n\r\nhttps://www.jetbrains.com/help/idea/encoding.html\r\n\r\nTurkish characters are not supported in intellij idea&#39;s terminal after run command.\r\nI tried the above two links but I couldn&#39;t solve the problem.\r\n[console output photo-screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PDOGW.jpg","title":"intellij idea console output not supporting turkish charecter","body":"<p><a href=\"https://stackoverflow.com/questions/35231291/intellij-idea-incorrect-encoding-in-console-output\">IntelliJ IDEA incorrect encoding in console output</a></p>\n<p><a href=\"https://www.jetbrains.com/help/idea/encoding.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/encoding.html</a></p>\n<p>Turkish characters are not supported in intellij idea's terminal after run command.\nI tried the above two links but I couldn't solve the problem.\n<a href=\"https://i.stack.imgur.com/PDOGW.jpg\" rel=\"nofollow noreferrer\">console output photo-screenshot</a></p>\n"},{"tags":["java","string","arraylist","split","substring"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1675131395,"post_id":75291884,"comment_id":132858552,"body_markdown":"So, what question do you have? Your question did not actually ask anything. Please edit the question to describe what is going wrong or other problem you face, and where you think the problem lies. It might help to include output from an example run, and expected output.","body":"So, what question do you have? Your question did not actually ask anything. Please edit the question to describe what is going wrong or other problem you face, and where you think the problem lies. It might help to include output from an example run, and expected output."},{"owner":{"account_id":27662051,"reputation":3,"user_id":21114649,"display_name":"coder107"},"score":1,"creation_date":1675136139,"post_id":75291884,"comment_id":132859147,"body_markdown":"@OldDogProgrammer My bad I didn&#39;t clarify my question earlier. So, I want to take a Single string at a time from the Wlist Arraylist&lt;String&gt; from Reader class into the Tokenizer class and split it into 3 parts(Ex: teacher will be &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;). If the String has even length(Ex: 6) it should be split into 3 parts equally(i.e 2 letters each). If the string has odd length(Ex: 7) it has to be split into 3 parts where the last part has 3 letters as given in example for String &quot;teacher&quot;.","body":"@OldDogProgrammer My bad I didn&#39;t clarify my question earlier. So, I want to take a Single string at a time from the Wlist Arraylist&lt;String&gt; from Reader class into the Tokenizer class and split it into 3 parts(Ex: teacher will be &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;). If the String has even length(Ex: 6) it should be split into 3 parts equally(i.e 2 letters each). If the string has odd length(Ex: 7) it has to be split into 3 parts where the last part has 3 letters as given in example for String &quot;teacher&quot;."},{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":0,"creation_date":1675199734,"post_id":75291884,"comment_id":132876615,"body_markdown":"Welcome to SO.  Maybe think a little more about the problem first before writing any code, as there are multiple ways to solve your problem.  Would sorting into two lists of even and odd words make it easier to manage?  If so, how would you go about sorting them?  How are you defining a word?  If is it based on length, is &quot;to&quot; a word?","body":"Welcome to SO.  Maybe think a little more about the problem first before writing any code, as there are multiple ways to solve your problem.  Would sorting into two lists of even and odd words make it easier to manage?  If so, how would you go about sorting them?  How are you defining a word?  If is it based on length, is &quot;to&quot; a word?"}],"answers":[{"comments":[{"owner":{"account_id":27662051,"reputation":3,"user_id":21114649,"display_name":"coder107"},"score":0,"creation_date":1675136304,"post_id":75292116,"comment_id":132859170,"body_markdown":"I tried this but its asking me to convert Wlist into SplList.add(Arrays.toString(Wlist.get(i).split(&quot;(?&lt;=\\\\\\\\G..)(?=..)&quot;))) and after I convert it, its giving me an output as: [PRINTER], [AIRPORT], [PAINTER], [LETTER], [VEHICLE], [TEACHER]]","body":"I tried this but its asking me to convert Wlist into SplList.add(Arrays.toString(Wlist.get(i).split(&quot;(?&lt;=\\\\\\\\G..)&zwnj;&#8203;(?=..)&quot;))) and after I convert it, its giving me an output as: [PRINTER], [AIRPORT], [PAINTER], [LETTER], [VEHICLE], [TEACHER]]"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1675198913,"post_id":75292116,"comment_id":132876409,"body_markdown":"@coder107 see complete code added to answer","body":"@coder107 see complete code added to answer"},{"owner":{"account_id":27662051,"reputation":3,"user_id":21114649,"display_name":"coder107"},"score":0,"creation_date":1675210999,"post_id":75292116,"comment_id":132879019,"body_markdown":"thank you for your help I was able to solve the issue and split the string.","body":"thank you for your help I was able to solve the issue and split the string."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675198891,"creation_date":1675131748,"answer_id":75292116,"question_id":75291884,"body_markdown":"If you&#39;re asking how to split a string into pairs of letters, with any remainder left with the last split:\r\n\r\n    String[] parts = str.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;);\r\n\r\nwhich achieves your goal (see below).\r\n\r\nThe split matches *between* these two look arounds:\r\n\r\n- `(?&lt;=\\\\G..)` two chars after the end of the last match\r\n- `(?=..)` there are (at least) two chars after\r\n\r\n---\r\n\r\n    String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;, &quot;vehicle&quot;, &quot;Teacher&quot;};\r\n    List&lt;String[]&gt; splitWords = Arrays.stream(wordList).map(s -&gt; s.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;)).collect(toList());\r\n    splitWords.forEach(a -&gt; System.out.println(Arrays.toString(a)));\r\n\r\nOutput:\r\n\r\n    [Pr, in, ter]\r\n    [Ai, rp, ort]\r\n    [Pa, in, ter]\r\n    [Le, tt, er]\r\n    [ve, hi, cle]\r\n    [Te, ac, her]\r\n\r\n","title":"Split a string in an Arraylist in Java into substring of letters","body":"<p>If you're asking how to split a string into pairs of letters, with any remainder left with the last split:</p>\n<pre><code>String[] parts = str.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;);\n</code></pre>\n<p>which achieves your goal (see below).</p>\n<p>The split matches <em>between</em> these two look arounds:</p>\n<ul>\n<li><code>(?&lt;=\\\\G..)</code> two chars after the end of the last match</li>\n<li><code>(?=..)</code> there are (at least) two chars after</li>\n</ul>\n<hr />\n<pre><code>String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;, &quot;vehicle&quot;, &quot;Teacher&quot;};\nList&lt;String[]&gt; splitWords = Arrays.stream(wordList).map(s -&gt; s.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;)).collect(toList());\nsplitWords.forEach(a -&gt; System.out.println(Arrays.toString(a)));\n</code></pre>\n<p>Output:</p>\n<pre><code>[Pr, in, ter]\n[Ai, rp, ort]\n[Pa, in, ter]\n[Le, tt, er]\n[ve, hi, cle]\n[Te, ac, her]\n</code></pre>\n"}],"owner":{"account_id":27662051,"reputation":3,"user_id":21114649,"display_name":"coder107"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75292116,"answer_count":1,"score":0,"last_activity_date":1675198891,"creation_date":1675129124,"question_id":75291884,"body_markdown":"I have two classes Reader and Tokenizer. I want to split Strings in Wlist Arraylist from the Reader class in tokenizer class. Splitting must be done based on odd and even length of the String.\r\n\r\nEx: If string is &quot;teacher&quot;, as its length is odd it should be split into three parts &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;.\r\n\r\nIf string is even like &quot;cattle&quot; it should be split in 3 parts &quot;ca&quot;, &quot;tt&quot;, &quot;le&quot;.\r\n\r\n \r\n\r\n**Reader Class**\r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Reader {\r\n\r\n    String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;,\r\n                         &quot;vehicle&quot;, &quot;Teacher&quot;};\r\n\r\n    String[] SentenceList = {&quot;Device made to waste ink and paper&quot;,&quot;Platform for Commercial air transport&quot;,\r\n                             &quot;Someone who uses colors and brushes&quot;,&quot;a written type of communication sent by mail&quot;,\r\n                             &quot;Thing used to travel via land&quot;,&quot;A person who teaches&quot;};\r\n\r\n    ArrayList&lt;String&gt; Wlist = new ArrayList&lt;&gt;(6);\r\n    public ArrayList&lt;String&gt; wordCheck(){\r\n\r\n        for(int i=0;i&lt;6;i++){\r\n            if((wordList[i] != null) &amp;&amp; (!wordList[i].equals(&quot;&quot;)) &amp;&amp; (wordList[i].matches(&quot;^[a-zA-Z]*$&quot;))\r\n                    &amp;&amp; (wordList[i].length()&gt;4)) {\r\n                //System.out.println(&quot;Array does satisfy the required criteria&quot;);\r\n                Wlist.add(wordList[i].toUpperCase());\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;Array does NOT satisfy the required criteria&quot;);\r\n                break;\r\n            }\r\n        }\r\n        //System.out.println(Wlist);\r\n        return Wlist;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getWord(){\r\n        return wordCheck();\r\n    }\r\n    public ArrayList&lt;String&gt; Sentence(){\r\n        ArrayList&lt;String&gt; Slist = new ArrayList&lt;&gt;(6);\r\n        for(int i=0;i&lt;6;i++){\r\n            Slist.add(SentenceList[i]);\r\n        }\r\n        //System.out.println(Slist);\r\n        return Slist;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n// This is the updated Tokenizer class\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Tokenizer {\r\n    Reader rd = new Reader();\r\n    ArrayList&lt;String&gt; SplList = new ArrayList&lt;&gt;();\r\n    public ArrayList&lt;String&gt; splitString() {\r\n        ArrayList&lt;String&gt; Wlist = rd.getWord();\r\n        //String[] result = new String[(Wlist.get().length()+2)/3];\r\n        for(int i=0;i&lt;Wlist.size();i++){\r\n                SplList.add(Arrays.toString(Wlist.get(i).split(&quot;(?&lt;=\\\\\\\\G..)(?=..)&quot;)));\r\n\r\n        }\r\n\r\n        System.out.println(SplList);\r\n        return SplList;\r\n    }\r\n}\r\n```\r\n","title":"Split a string in an Arraylist in Java into substring of letters","body":"<p>I have two classes Reader and Tokenizer. I want to split Strings in Wlist Arraylist from the Reader class in tokenizer class. Splitting must be done based on odd and even length of the String.</p>\n<p>Ex: If string is &quot;teacher&quot;, as its length is odd it should be split into three parts &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;.</p>\n<p>If string is even like &quot;cattle&quot; it should be split in 3 parts &quot;ca&quot;, &quot;tt&quot;, &quot;le&quot;.</p>\n<p><strong>Reader Class</strong></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Reader {\n\n    String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;,\n                         &quot;vehicle&quot;, &quot;Teacher&quot;};\n\n    String[] SentenceList = {&quot;Device made to waste ink and paper&quot;,&quot;Platform for Commercial air transport&quot;,\n                             &quot;Someone who uses colors and brushes&quot;,&quot;a written type of communication sent by mail&quot;,\n                             &quot;Thing used to travel via land&quot;,&quot;A person who teaches&quot;};\n\n    ArrayList&lt;String&gt; Wlist = new ArrayList&lt;&gt;(6);\n    public ArrayList&lt;String&gt; wordCheck(){\n\n        for(int i=0;i&lt;6;i++){\n            if((wordList[i] != null) &amp;&amp; (!wordList[i].equals(&quot;&quot;)) &amp;&amp; (wordList[i].matches(&quot;^[a-zA-Z]*$&quot;))\n                    &amp;&amp; (wordList[i].length()&gt;4)) {\n                //System.out.println(&quot;Array does satisfy the required criteria&quot;);\n                Wlist.add(wordList[i].toUpperCase());\n            }\n            else\n            {\n                System.out.println(&quot;Array does NOT satisfy the required criteria&quot;);\n                break;\n            }\n        }\n        //System.out.println(Wlist);\n        return Wlist;\n    }\n\n    public ArrayList&lt;String&gt; getWord(){\n        return wordCheck();\n    }\n    public ArrayList&lt;String&gt; Sentence(){\n        ArrayList&lt;String&gt; Slist = new ArrayList&lt;&gt;(6);\n        for(int i=0;i&lt;6;i++){\n            Slist.add(SentenceList[i]);\n        }\n        //System.out.println(Slist);\n        return Slist;\n    }\n\n}\n\n\n\n\n// This is the updated Tokenizer class\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Tokenizer {\n    Reader rd = new Reader();\n    ArrayList&lt;String&gt; SplList = new ArrayList&lt;&gt;();\n    public ArrayList&lt;String&gt; splitString() {\n        ArrayList&lt;String&gt; Wlist = rd.getWord();\n        //String[] result = new String[(Wlist.get().length()+2)/3];\n        for(int i=0;i&lt;Wlist.size();i++){\n                SplList.add(Arrays.toString(Wlist.get(i).split(&quot;(?&lt;=\\\\\\\\G..)(?=..)&quot;)));\n\n        }\n\n        System.out.println(SplList);\n        return SplList;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","validation"],"answers":[{"tags":[],"owner":{"account_id":461096,"reputation":59403,"user_id":862594,"accept_rate":83,"display_name":"nickb"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647591756,"creation_date":1647591756,"answer_id":71524171,"question_id":71524129,"body_markdown":"No, you need `@Valid` on the `personDetail` field in order for validation to continue to look down into that field. You can configure this in other ways (validation.xml), but ultimately you need to tell the Validator to descend into the value of the `personDetail` field.","title":"Javax @Valid Annotation in Inner NEsted Objects","body":"<p>No, you need <code>@Valid</code> on the <code>personDetail</code> field in order for validation to continue to look down into that field. You can configure this in other ways (validation.xml), but ultimately you need to tell the Validator to descend into the value of the <code>personDetail</code> field.</p>\n"}],"owner":{"account_id":6290431,"reputation":1187,"user_id":4888323,"accept_rate":20,"display_name":"Bilgehan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1675198094,"creation_date":1647591520,"question_id":71524129,"body_markdown":"I want to use javax validation on poco objects that contain complex types. In my code, I want to validate the `PersonDetail` object inside my `Person` class. If I don&#39;t use the `@Valid PersonDetail`, then validations on that subclass don&#39;t work. \r\n\r\nIs there any way to validate nested objects without the `@Valid` annotation on each one?\r\n \r\n\r\n    public class Person {\r\n\r\n\r\n    @Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\r\n    private String surname;\r\n\r\n    @Valid(//without this personDetails validations not worked)\r\n        private PersonDetail personDetail;\r\n\r\n....\r\n\r\nPersonDetail class\r\n\r\n    public class PersonDetail {\r\n    \r\n        @Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\r\n        private String surname2;\r\n    \r\n        public String getSurname2() {\r\n            return surname2;\r\n        }","title":"Javax @Valid Annotation in Inner NEsted Objects","body":"<p>I want to use javax validation on poco objects that contain complex types. In my code, I want to validate the <code>PersonDetail</code> object inside my <code>Person</code> class. If I don't use the <code>@Valid PersonDetail</code>, then validations on that subclass don't work.</p>\n<p>Is there any way to validate nested objects without the <code>@Valid</code> annotation on each one?</p>\n<pre><code>public class Person {\n\n\n@Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\nprivate String surname;\n\n@Valid(//without this personDetails validations not worked)\n    private PersonDetail personDetail;\n</code></pre>\n<p>....</p>\n<p>PersonDetail class</p>\n<pre><code>public class PersonDetail {\n\n    @Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\n    private String surname2;\n\n    public String getSurname2() {\n        return surname2;\n    }\n</code></pre>\n"},{"tags":["java","maven","maven-3"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1674872471,"post_id":75260577,"comment_id":132812581,"body_markdown":"would you mind describing your final goal, not a synthetic case? Inheriting properties from multiple parents - this rabbit hole is too deep, however I believe the solution exists for real case.","body":"would you mind describing your final goal, not a synthetic case? Inheriting properties from multiple parents - this rabbit hole is too deep, however I believe the solution exists for real case."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1674993906,"post_id":75260577,"comment_id":132828711,"body_markdown":"The question is why does your child not inherit from your parent (`&lt;module&gt;A&lt;/module&gt; `) ... that would solve the problem very easy?","body":"The question is why does your child not inherit from your parent (<code>&lt;module&gt;A&lt;&#47;module&gt; </code>) ... that would solve the problem very easy?"},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1675196507,"post_id":75260577,"comment_id":132875743,"body_markdown":"@AndreyB.Panfilov it&#39;s a very real use case, not a synthetic one. However, for the sake of simplicity and legibility I omitted everything that&#39;s not &quot;relevant&quot; for this Q. Relevant or not is very subjective, though. I&#39;ll amend the Q.","body":"@AndreyB.Panfilov it&#39;s a very real use case, not a synthetic one. However, for the sake of simplicity and legibility I omitted everything that&#39;s not &quot;relevant&quot; for this Q. Relevant or not is very subjective, though. I&#39;ll amend the Q."},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1675196581,"post_id":75260577,"comment_id":132875771,"body_markdown":"@khmarbaise oh yes, that would eliminate the problem altogether. If it were that easy, the Q here would not exist :)","body":"@khmarbaise oh yes, that would eliminate the problem altogether. If it were that easy, the Q here would not exist :)"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1675219957,"post_id":75260577,"comment_id":132880208,"body_markdown":"@MarcelSt&#246;r so, your actual goal is to manage versions of dependencies... maven way there is to create &quot;dummy&quot; [BoM](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#bill-of-materials-bom-poms) project and import it into both aggregator and &quot;child&quot; projects, as for the `revision` property maven recommends to manage in via [`.mvn/maven.config`](https://maven.apache.org/maven-ci-friendly.html)","body":"@MarcelSt&#246;r so, your actual goal is to manage versions of dependencies... maven way there is to create &quot;dummy&quot; <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#bill-of-materials-bom-poms\" rel=\"nofollow noreferrer\">BoM</a> project and import it into both aggregator and &quot;child&quot; projects, as for the <code>revision</code> property maven recommends to manage in via <a href=\"https://maven.apache.org/maven-ci-friendly.html\" rel=\"nofollow noreferrer\"><code>.mvn&#47;maven.config</code></a>"},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1675284922,"post_id":75260577,"comment_id":132898307,"body_markdown":"That&#39;s one of the goals - and BOMs are really helpful in that (we use them in several projects). What they don&#39;t offer is what we need in _this_ project: managing and passing on properties and plugin versions.","body":"That&#39;s one of the goals - and BOMs are really helpful in that (we use them in several projects). What they don&#39;t offer is what we need in <i>this</i> project: managing and passing on properties and plugin versions."}],"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675197687,"creation_date":1674835659,"question_id":75260577,"body_markdown":"Given the following minimal Maven multi-module structure. Module A is released together with the project and the other modules of the project. However, it inherits from some other parent POM (rather than the project POM). \r\n\r\n```\r\n                              |--------------------|\r\n|-------------|               | module A that does | \r\n| project POM |--- module ---&gt;| *not* inherit from |\r\n|-------------|               | project POM        |\r\n                              |--------------------|\r\n```\r\nHow can I propagate or synchronize properties from project POM to module A?\r\n\r\n**Project**\r\n\r\n```xml\r\n&lt;project&gt;\r\n    &lt;parent&gt;some-parent&lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\r\n    &lt;artifactId&gt;my-project&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;modules&gt;\r\n        &lt;module&gt;A&lt;/module&gt; &lt;!-- NOT inheriting from here --&gt;\r\n        &lt;module&gt;B&lt;/module&gt; &lt;!-- inheriting from here --&gt;\r\n    &lt;/modules&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Module**\r\n\r\n```xml\r\n&lt;project&gt;\r\n    &lt;parent&gt;some-OTHER-parent&lt;/parent&gt;\r\n\r\n    &lt;!-- don&#39;t want to duplicate this, should be propagated from my-project --&gt;\r\n    &lt;!--properties&gt;\r\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\r\n    &lt;/properties--&gt;\r\n\r\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\r\n    &lt;artifactId&gt;A&lt;/artifactId&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**First attempt**\r\n\r\nI wrote a small Groovy script for the GMavenPlus plugin that updates the module A `pom.xml` correctly synchronizing the _project_ properties. However, even though the plugin runs in the `validate` phase (i.e. the earliest possible) it&#39;s too late. Maven already initialized the reactor with the old properties.\r\n\r\nI want to give developers the convenience of simply running `mvn some-task` without having to worry about the properties being consistent. Managing those manually would be a pain.\r\n\r\n8&lt; ---------------\r\n\r\n**off-topic: the complete use case**\r\n\r\nI have a project (&quot;my-project&quot;) that contains code other projects will consume: libraries, tools, utilities, etc (modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;). Furthermore, it contains a POM module (module &quot;A&quot;) that said business projects will inherit from. That POM represents an opinionated blue-print that those projects should adhere to unless there are good reasons not to.\r\n\r\n- I need the project POM &quot;my-project&quot; to build all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;.\r\n- The POM module &quot;A&quot;\r\n  - has definitions very different from &quot;my-project&quot; as itself serves as a parent for the business projects.\r\n  - (amongst others) lists all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;, etc. in its dependency management section.\r\n  - has to be released together with all the &quot;B&quot;s it manages -&gt; that&#39;s why it lives in the same code project\r\n  - shares a few external dependencies &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; with the project POM &quot;my-project&quot;\r\n\r\n=&gt; I need the versions for &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; in both the project POM &quot;my-project&quot; and in the POM module &quot;A&quot;","title":"Propagating Maven project properties to module that has a different parent","body":"<p>Given the following minimal Maven multi-module structure. Module A is released together with the project and the other modules of the project. However, it inherits from some other parent POM (rather than the project POM).</p>\n<pre><code>                              |--------------------|\n|-------------|               | module A that does | \n| project POM |--- module ---&gt;| *not* inherit from |\n|-------------|               | project POM        |\n                              |--------------------|\n</code></pre>\n<p>How can I propagate or synchronize properties from project POM to module A?</p>\n<p><strong>Project</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n    &lt;parent&gt;some-parent&lt;/parent&gt;\n\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\n    &lt;artifactId&gt;my-project&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\n    &lt;/properties&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;A&lt;/module&gt; &lt;!-- NOT inheriting from here --&gt;\n        &lt;module&gt;B&lt;/module&gt; &lt;!-- inheriting from here --&gt;\n    &lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Module</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n    &lt;parent&gt;some-OTHER-parent&lt;/parent&gt;\n\n    &lt;!-- don't want to duplicate this, should be propagated from my-project --&gt;\n    &lt;!--properties&gt;\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\n    &lt;/properties--&gt;\n\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\n    &lt;artifactId&gt;A&lt;/artifactId&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>First attempt</strong></p>\n<p>I wrote a small Groovy script for the GMavenPlus plugin that updates the module A <code>pom.xml</code> correctly synchronizing the <em>project</em> properties. However, even though the plugin runs in the <code>validate</code> phase (i.e. the earliest possible) it's too late. Maven already initialized the reactor with the old properties.</p>\n<p>I want to give developers the convenience of simply running <code>mvn some-task</code> without having to worry about the properties being consistent. Managing those manually would be a pain.</p>\n<p>8&lt; ---------------</p>\n<p><strong>off-topic: the complete use case</strong></p>\n<p>I have a project (&quot;my-project&quot;) that contains code other projects will consume: libraries, tools, utilities, etc (modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;). Furthermore, it contains a POM module (module &quot;A&quot;) that said business projects will inherit from. That POM represents an opinionated blue-print that those projects should adhere to unless there are good reasons not to.</p>\n<ul>\n<li>I need the project POM &quot;my-project&quot; to build all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;.</li>\n<li>The POM module &quot;A&quot;\n<ul>\n<li>has definitions very different from &quot;my-project&quot; as itself serves as a parent for the business projects.</li>\n<li>(amongst others) lists all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;, etc. in its dependency management section.</li>\n<li>has to be released together with all the &quot;B&quot;s it manages -&gt; that's why it lives in the same code project</li>\n<li>shares a few external dependencies &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; with the project POM &quot;my-project&quot;</li>\n</ul>\n</li>\n</ul>\n<p>=&gt; I need the versions for &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; in both the project POM &quot;my-project&quot; and in the POM module &quot;A&quot;</p>\n"},{"tags":["java","java-native-interface"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1675071670,"post_id":75276919,"comment_id":132841899,"body_markdown":"Please edit your question with the signature of the Java method you are trying to pass a lambda to.","body":"Please edit your question with the signature of the Java method you are trying to pass a lambda to."},{"owner":{"account_id":23096518,"reputation":85,"user_id":17206534,"display_name":"majorsopa"},"score":0,"creation_date":1675115358,"post_id":75276919,"comment_id":132855783,"body_markdown":"@Botje It is an obfuscated signature so I&#39;m not sure how much help it would be to others.","body":"@Botje It is an obfuscated signature so I&#39;m not sure how much help it would be to others."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1675152063,"post_id":75276919,"comment_id":132861524,"body_markdown":"It would help because methods generally don&#39;t take &quot;lambdas&quot;. They take objects that implement a given interface and lambdas are just a shortcut for constricting suitable objects. If we know the exact signature of the method the translation to a native method is mechanical.","body":"It would help because methods generally don&#39;t take &quot;lambdas&quot;. They take objects that implement a given interface and lambdas are just a shortcut for constricting suitable objects. If we know the exact signature of the method the translation to a native method is mechanical."}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675197640,"creation_date":1675197640,"answer_id":75302902,"question_id":75276919,"body_markdown":"Let me take `LongStream.generate` as an example target method. Its method signature is\r\n```\r\nstatic LongStream generate(LongSupplier s);\r\n```\r\n\r\nand `LongSupplier` is:\r\n```\r\n@FunctionalInterface public interface LongSupplier {\r\n  long getAsLong();\r\n}\r\n```\r\n\r\nYou can implement your own `LongSupplier` on the Java side as follows:\r\n\r\n```\r\npackage dummy.pkg;\r\nimport java.util.function.LongSupplier;\r\npublic class NativeLongSupplier implements LongSupplier {\r\n  native public long getAsLong();\r\n}\r\n```\r\n\r\nthen the following C++ code will let you implement the `getAsLong` method:\r\n```\r\nJNIEXPORT jlong Java_dummy_pkg_NativeLongSupplier_getAsLong(JNIEnv * env, jobject obj) {\r\n  static uint64_t counter = 0;\r\n  return ++counter;\r\n}\r\n```","title":"How would you call a Java method that takes a lambda as an argument from the native side of JNI?","body":"<p>Let me take <code>LongStream.generate</code> as an example target method. Its method signature is</p>\n<pre><code>static LongStream generate(LongSupplier s);\n</code></pre>\n<p>and <code>LongSupplier</code> is:</p>\n<pre><code>@FunctionalInterface public interface LongSupplier {\n  long getAsLong();\n}\n</code></pre>\n<p>You can implement your own <code>LongSupplier</code> on the Java side as follows:</p>\n<pre><code>package dummy.pkg;\nimport java.util.function.LongSupplier;\npublic class NativeLongSupplier implements LongSupplier {\n  native public long getAsLong();\n}\n</code></pre>\n<p>then the following C++ code will let you implement the <code>getAsLong</code> method:</p>\n<pre><code>JNIEXPORT jlong Java_dummy_pkg_NativeLongSupplier_getAsLong(JNIEnv * env, jobject obj) {\n  static uint64_t counter = 0;\n  return ++counter;\n}\n</code></pre>\n"}],"owner":{"account_id":23096518,"reputation":85,"user_id":17206534,"display_name":"majorsopa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75302902,"answer_count":1,"score":0,"last_activity_date":1675197640,"creation_date":1675013405,"question_id":75276919,"body_markdown":"I am attempting to call a Java method which accepts a lambda as an argument. I am not in control of the Java side of the code, and am using the invocation API. I do not know how I would even start to approach this problem- from my searches, lambdas are [compile-time language artifacts of Java](https://stackoverflow.com/a/23650686). That also links [this answer](https://stackoverflow.com/a/23606688/17206534) which shows how to make a lambda at runtime. Is creating a lambda possible to do in JNI, and if so how do you pass this into a method call?","title":"How would you call a Java method that takes a lambda as an argument from the native side of JNI?","body":"<p>I am attempting to call a Java method which accepts a lambda as an argument. I am not in control of the Java side of the code, and am using the invocation API. I do not know how I would even start to approach this problem- from my searches, lambdas are <a href=\"https://stackoverflow.com/a/23650686\">compile-time language artifacts of Java</a>. That also links <a href=\"https://stackoverflow.com/a/23606688/17206534\">this answer</a> which shows how to make a lambda at runtime. Is creating a lambda possible to do in JNI, and if so how do you pass this into a method call?</p>\n"},{"tags":["java","eclipse","error-messaging"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1665851911,"post_id":74035046,"comment_id":130797826,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74035046/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":22144484,"reputation":1,"user_id":16394012,"display_name":"SSV"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675197577,"creation_date":1665531484,"answer_id":74035046,"question_id":74034896,"body_markdown":"\r\nThere are a few things you can try to resolve the issues:\r\n\r\nCheck the class path: Make sure that the class path is correctly set and that all required libraries and packages are included.\r\n\r\nClean the project: In Eclipse, go to &quot;Project&quot; -&gt; &quot;Clean&quot; and select the project. This will delete all compiled files and rebuild the project.\r\n\r\nCheck the Java version: Make sure that you are using the correct Java version for your project. If the project was developed using a different version of Java, you may need to change your Java version to match.\r\n\r\nCheck the class name: Make sure that the class name in the Java file matches the name of the main class.","title":"Why Is My Eclipse Java Program Not Running - Error Message: &quot;Error: Could not find or load main class&quot;","body":"<p>There are a few things you can try to resolve the issues:</p>\n<p>Check the class path: Make sure that the class path is correctly set and that all required libraries and packages are included.</p>\n<p>Clean the project: In Eclipse, go to &quot;Project&quot; -&gt; &quot;Clean&quot; and select the project. This will delete all compiled files and rebuild the project.</p>\n<p>Check the Java version: Make sure that you are using the correct Java version for your project. If the project was developed using a different version of Java, you may need to change your Java version to match.</p>\n<p>Check the class name: Make sure that the class name in the Java file matches the name of the main class.</p>\n"},{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665541732,"creation_date":1665541732,"answer_id":74035855,"question_id":74034896,"body_markdown":"The main class couldn&#39;t be found because it couldn&#39;t be compiled, and it couldn&#39;t be compiled because your project is missing a build path entry to a valid JRE. That&#39;s why String is also underlined--it is not found because it&#39;s expected to be provided from a Java runtime.\r\n\r\nDouble-check that the **Installed JREs** preference page has a valid Java 11 runtime defined. Eclipse uses Java to run itself, but you still have to tell it which JREs you want it to offer to compile your own projects against. Once a JRE is configured, open up the **Properties** dialog for your project and go to the **Java Build Path** property page. On its **Libraries** tab, click on **Classpath** and then the **Add Library...** button. Select JRE System Library from the list you&#39;re shown and then pick one to use. Choosing by **Execution environment** (think of it as the intended Java SE version number at *runtime*) is preferred.\r\n\r\n[![Adding a Library][1]][1]\r\n[![Picking a JRE by Execution environment][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oxpUV.jpg\r\n  [2]: https://i.stack.imgur.com/NiWWn.png","title":"Why Is My Eclipse Java Program Not Running - Error Message: &quot;Error: Could not find or load main class&quot;","body":"<p>The main class couldn't be found because it couldn't be compiled, and it couldn't be compiled because your project is missing a build path entry to a valid JRE. That's why String is also underlined--it is not found because it's expected to be provided from a Java runtime.</p>\n<p>Double-check that the <strong>Installed JREs</strong> preference page has a valid Java 11 runtime defined. Eclipse uses Java to run itself, but you still have to tell it which JREs you want it to offer to compile your own projects against. Once a JRE is configured, open up the <strong>Properties</strong> dialog for your project and go to the <strong>Java Build Path</strong> property page. On its <strong>Libraries</strong> tab, click on <strong>Classpath</strong> and then the <strong>Add Library...</strong> button. Select JRE System Library from the list you're shown and then pick one to use. Choosing by <strong>Execution environment</strong> (think of it as the intended Java SE version number at <em>runtime</em>) is preferred.</p>\n<p><a href=\"https://i.stack.imgur.com/oxpUV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oxpUV.jpg\" alt=\"Adding a Library\" /></a>\n<a href=\"https://i.stack.imgur.com/NiWWn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NiWWn.png\" alt=\"Picking a JRE by Execution environment\" /></a></p>\n"}],"owner":{"account_id":26174707,"reputation":7,"user_id":19859073,"display_name":"Jack Finnegan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675197577,"creation_date":1665529542,"question_id":74034896,"body_markdown":"I am working on a Java project for a Computer Science class. For this class, I downloaded a zip file and imported it into Eclipse to then start working on it. Before I could even start writing code I had error messages which had never happened before when importing zip files and opening them up.\r\n\r\nThe first error message I came across was: &quot;Linkage Error occurred while loading the main class&quot;, along with other side errors like, &quot;Must define an explicit constructor&quot;.\r\n\r\nI attempted to do some research and the only thing I could find was setting my JDK settings back to an earlier version. I went in and changed my compiler from JDK 15 to JDK 11 and attempted to run the code once again. Now instead of Linkage Error, it gives the error message which can be seen in the screenshot provided below:\r\n\r\n[Error Message Screenshot][1]\r\n\r\n  [1]: https://i.stack.imgur.com/ilN5M.jpg\r\n\r\nDoes anyone know why this might be happening or have any suggestions/solutions? Let me know if any other information is needed. I will gladly provide it.","title":"Why Is My Eclipse Java Program Not Running - Error Message: &quot;Error: Could not find or load main class&quot;","body":"<p>I am working on a Java project for a Computer Science class. For this class, I downloaded a zip file and imported it into Eclipse to then start working on it. Before I could even start writing code I had error messages which had never happened before when importing zip files and opening them up.</p>\n<p>The first error message I came across was: &quot;Linkage Error occurred while loading the main class&quot;, along with other side errors like, &quot;Must define an explicit constructor&quot;.</p>\n<p>I attempted to do some research and the only thing I could find was setting my JDK settings back to an earlier version. I went in and changed my compiler from JDK 15 to JDK 11 and attempted to run the code once again. Now instead of Linkage Error, it gives the error message which can be seen in the screenshot provided below:</p>\n<p><a href=\"https://i.stack.imgur.com/ilN5M.jpg\" rel=\"nofollow noreferrer\">Error Message Screenshot</a></p>\n<p>Does anyone know why this might be happening or have any suggestions/solutions? Let me know if any other information is needed. I will gladly provide it.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1675197390,"post_id":75302787,"comment_id":132875974,"body_markdown":"I&#39;ve removed the JavaScript tag.  This is not JavaScript.","body":"I&#39;ve removed the JavaScript tag.  This is not JavaScript."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1675197480,"post_id":75302787,"comment_id":132875993,"body_markdown":"Also, you probably want to declare all those variables much earlier in your program, otherwise they go out of scope before you can use them, which means their values will disappear.","body":"Also, you probably want to declare all those variables much earlier in your program, otherwise they go out of scope before you can use them, which means their values will disappear."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1675200874,"post_id":75302787,"comment_id":132876895,"body_markdown":"It doesnt really matter where they came from originally. Once you have two `int` variables `x` and `y`, you add them together with `x + y`","body":"It doesnt really matter where they came from originally. Once you have two <code>int</code> variables <code>x</code> and <code>y</code>, you add them together with <code>x + y</code>"},{"owner":{"account_id":27180802,"reputation":7,"user_id":20716077,"display_name":"user20716077"},"score":0,"creation_date":1675202260,"post_id":75302787,"comment_id":132877242,"body_markdown":"Thank you @TimMoore... the problem is that I am asking for both integers here: int integers_1 = input.nextInt();... unfortunately that is the format I need to follow... .... I cannot access to the second int.","body":"Thank you @TimMoore... the problem is that I am asking for both integers here: int integers_1 = input.nextInt();... unfortunately that is the format I need to follow... .... I cannot access to the second int."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1675203173,"post_id":75302787,"comment_id":132877519,"body_markdown":"To read two integes you need to call `nextInt()` twice. There is no other reasonable way. Its easiest to have two lines like `int integers_1 = input.nextInt();` only with two different variable names. Then print the sum (in the `&quot;add&quot;` case) with something like `System.out.println(integers_1 + integers_2);`. Thats all there is to it.","body":"To read two integes you need to call <code>nextInt()</code> twice. There is no other reasonable way. Its easiest to have two lines like <code>int integers_1 = input.nextInt();</code> only with two different variable names. Then print the sum (in the <code>&quot;add&quot;</code> case) with something like <code>System.out.println(integers_1 + integers_2);</code>. Thats all there is to it."}],"owner":{"account_id":27180802,"reputation":7,"user_id":20716077,"display_name":"user20716077"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675197369,"creation_date":1675196972,"question_id":75302787,"body_markdown":"I am asking the user to write 2 integers and I need to perform some mathematical operations with them. How can I do it?\r\n\r\nIn this case, for example, I am selecting the &quot;add&quot; operation, I am writing the integers 2 and 3, and I would like to have &quot;5&quot; as the result. \r\n\r\nPS: I need to use the &quot;Switch&quot; method. \r\n\r\n[Output terminal][1]\r\n\r\nBest regards. \r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Calculator {\r\n        public static void main(String[] args) {\r\n            \r\n            System.out.println(&quot;List of operations: add subtract multiply divide alphabetize&quot;);\r\n    \r\n            Scanner input = new Scanner(System.in);\r\n           \r\n            System.out.print(&quot;Enter an operation: &quot;);\r\n            String type_operation = input.nextLine().toLowerCase();\r\n    \r\n            if ((new String(type_operation).equals(&quot;add&quot;)) || \r\n                (new String(type_operation).equals(&quot;substract&quot;)) ||\r\n                (new String(type_operation).equals(&quot;multiply&quot;)) ||\r\n                (new String(type_operation).equals(&quot;divide&quot;)) ||\r\n                (new String(type_operation).equals(&quot;alphabetize&quot;)))  {\r\n                   \r\n                        \r\n                    switch (type_operation) {\r\n                        case &quot;add&quot;:\r\n                            \r\n                            System.out.print(&quot;Enter two integers: &quot;);\r\n                            int integers_1 = input.nextInt();\r\n                            System.out.println(integers_1);\r\n                                     \r\n            \r\n                        case &quot;substract&quot;:\r\n                            System.out.print(&quot;Enter two integers: &quot;);\r\n                            int integers_2 = input.nextInt();\r\n                            break;\r\n    \r\n                        case &quot;multiply&quot;:\r\n                            System.out.print( &quot;Enter two doubles: &quot;);\r\n                            double integers_3 = input.nextDouble();\r\n                            \r\n                            break;\r\n    \r\n                        case &quot;divide&quot;:\r\n                            System.out.print(&quot;Enter two doubles: &quot;);\r\n                            double integers_4 = input.nextDouble();\r\n                            break;\r\n    \r\n                        case &quot;alphabetize&quot;:\r\n                            System.out.print(&quot;Enter two Strings: &quot;);\r\n                            String integers_5 = input.nextLine();\r\n                            break;\r\n            }    \r\n        \r\n            else {\r\n                System.out.println(&quot;Invalid value.&quot;);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y2ypE.png","title":"How to perform mathematical operation on integers/double extracted from input.nextInt() / input.nextDouble()?","body":"<p>I am asking the user to write 2 integers and I need to perform some mathematical operations with them. How can I do it?</p>\n<p>In this case, for example, I am selecting the &quot;add&quot; operation, I am writing the integers 2 and 3, and I would like to have &quot;5&quot; as the result.</p>\n<p>PS: I need to use the &quot;Switch&quot; method.</p>\n<p><a href=\"https://i.stack.imgur.com/y2ypE.png\" rel=\"nofollow noreferrer\">Output terminal</a></p>\n<p>Best regards.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Calculator {\n    public static void main(String[] args) {\n        \n        System.out.println(&quot;List of operations: add subtract multiply divide alphabetize&quot;);\n\n        Scanner input = new Scanner(System.in);\n       \n        System.out.print(&quot;Enter an operation: &quot;);\n        String type_operation = input.nextLine().toLowerCase();\n\n        if ((new String(type_operation).equals(&quot;add&quot;)) || \n            (new String(type_operation).equals(&quot;substract&quot;)) ||\n            (new String(type_operation).equals(&quot;multiply&quot;)) ||\n            (new String(type_operation).equals(&quot;divide&quot;)) ||\n            (new String(type_operation).equals(&quot;alphabetize&quot;)))  {\n               \n                    \n                switch (type_operation) {\n                    case &quot;add&quot;:\n                        \n                        System.out.print(&quot;Enter two integers: &quot;);\n                        int integers_1 = input.nextInt();\n                        System.out.println(integers_1);\n                                 \n        \n                    case &quot;substract&quot;:\n                        System.out.print(&quot;Enter two integers: &quot;);\n                        int integers_2 = input.nextInt();\n                        break;\n\n                    case &quot;multiply&quot;:\n                        System.out.print( &quot;Enter two doubles: &quot;);\n                        double integers_3 = input.nextDouble();\n                        \n                        break;\n\n                    case &quot;divide&quot;:\n                        System.out.print(&quot;Enter two doubles: &quot;);\n                        double integers_4 = input.nextDouble();\n                        break;\n\n                    case &quot;alphabetize&quot;:\n                        System.out.print(&quot;Enter two Strings: &quot;);\n                        String integers_5 = input.nextLine();\n                        break;\n        }    \n    \n        else {\n            System.out.println(&quot;Invalid value.&quot;);\n        }\n        \n    }\n}\n</code></pre>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9537,"page":686,"page_size":100}
