{"items":[{"tags":["java","spring-boot","session","redis","okta"],"answers":[{"tags":[],"owner":{"account_id":25486283,"reputation":41,"user_id":19281826,"display_name":"yaroslav96"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702061632,"creation_date":1702061632,"answer_id":77628632,"question_id":77628529,"body_markdown":"Fixed by changing session name:\r\n\r\n    server:\r\n      servlet:\r\n        session:\r\n          cookie:\r\n            name: MYSESSION","title":"Spring Okta callback Set-Cookie SESSION twice","body":"<p>Fixed by changing session name:</p>\n<pre><code>server:\n  servlet:\n    session:\n      cookie:\n        name: MYSESSION\n</code></pre>\n"}],"owner":{"account_id":25486283,"reputation":41,"user_id":19281826,"display_name":"yaroslav96"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702061632,"creation_date":1702060085,"question_id":77628529,"body_markdown":"We use Okta for user authentication and authorization. As known, during the authorization process, two sessions are created—one on the Okta side and the other on the app side. Accordingly, if a regular JSESSION ID is used, which is set in cookies during the /callback method call from Okta, all subsequent requests to the backend app will include this header, and the user can be authenticated.\r\n\r\nHowever, we have decided to use Redis for session storage. Now, the /callback from Okta somehow sets 2 SESSIONs, with one of them being empty and appearing like this:\r\n\r\n    SESSION=; Path=/; Max-Age=0; Expires=Thu, 01 Jan 1970 00:00:00 GMT; HttpOnly; SameSite=Lax\r\nAs a result, the subsequent requests do not have this ID in the cookies, and the user cannot be resolved. Has anyone encountered a similar issue?","title":"Spring Okta callback Set-Cookie SESSION twice","body":"<p>We use Okta for user authentication and authorization. As known, during the authorization process, two sessions are created—one on the Okta side and the other on the app side. Accordingly, if a regular JSESSION ID is used, which is set in cookies during the /callback method call from Okta, all subsequent requests to the backend app will include this header, and the user can be authenticated.</p>\n<p>However, we have decided to use Redis for session storage. Now, the /callback from Okta somehow sets 2 SESSIONs, with one of them being empty and appearing like this:</p>\n<pre><code>SESSION=; Path=/; Max-Age=0; Expires=Thu, 01 Jan 1970 00:00:00 GMT; HttpOnly; SameSite=Lax\n</code></pre>\n<p>As a result, the subsequent requests do not have this ID in the cookies, and the user cannot be resolved. Has anyone encountered a similar issue?</p>\n"},{"tags":["java","maven","google-java-format","spotless"],"comments":[{"owner":{"account_id":15305026,"reputation":90,"user_id":11042089,"display_name":"Jonathan Putney"},"score":0,"creation_date":1649953903,"post_id":71339562,"comment_id":127010176,"body_markdown":"Did you ever figure this out? Running into the same issue right now.","body":"Did you ever figure this out? Running into the same issue right now."},{"owner":{"account_id":3675005,"reputation":941,"user_id":3061292,"accept_rate":57,"display_name":"mpssantos"},"score":0,"creation_date":1651177394,"post_id":71339562,"comment_id":127308608,"body_markdown":"we decided to use spotless + google format only (while a small change using 4 spaces indentation instead of 2). On the top of this we created a git hook (pre-commit) which always apply the format before the commit to all the modified files, stage them and them commits. Applying the format is completely transparent :)","body":"we decided to use spotless + google format only (while a small change using 4 spaces indentation instead of 2). On the top of this we created a git hook (pre-commit) which always apply the format before the commit to all the modified files, stage them and them commits. Applying the format is completely transparent :)"}],"answers":[{"tags":[],"owner":{"account_id":18603794,"reputation":1,"user_id":13557954,"display_name":"Murilo C. Cumerlatto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702060926,"creation_date":1702060779,"answer_id":77628572,"question_id":71339562,"body_markdown":"From documentation to fix the annotations problems:\r\n\r\n```\r\n&lt;!-- fixes formatting of type annotations, see below --&gt;\r\n&lt;formatAnnotations /&gt;\r\n```\r\n","title":"Spotless + Java Google format vs Intellij + import file","body":"<p>From documentation to fix the annotations problems:</p>\n<pre><code>&lt;!-- fixes formatting of type annotations, see below --&gt;\n&lt;formatAnnotations /&gt;\n</code></pre>\n"}],"owner":{"account_id":3675005,"reputation":941,"user_id":3061292,"accept_rate":57,"display_name":"mpssantos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5657,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1702060926,"creation_date":1646320827,"question_id":71339562,"body_markdown":"I am trying to configure a maven spring boot application to use spotless with google java format style. I would like as well to have Intellij formatting the code as the maven plugin does. \r\n\r\nBut i am noticing that the formmat applied differ a little bit.\r\n\r\nOne example:\r\nIntellij will not change the following 2 lines\r\n```\r\n@Mock \r\nprivate UserRepository userRepositoryMock;\r\n```\r\nBut the maven plugin (using the command: mvn spotless:apply) will format like this:\r\n\r\n```\r\n@Mock private UserRepository userRepositoryMock;\r\n```\r\n\r\n**POM CONFIG**\r\n```\r\n&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spotless.version}&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;!-- optional: limit format enforcement to just the files changed by this feature branch --&gt;\r\n\t\t\t\t\t&lt;ratchetFrom&gt;origin/master&lt;/ratchetFrom&gt;\r\n\t\t\t\t\t&lt;formats&gt;\r\n\t\t\t\t\t\t&lt;!-- you can define as many formats as you want, each is independent --&gt;\r\n\t\t\t\t\t\t&lt;format&gt;\r\n\t\t\t\t\t\t\t&lt;!-- define the files to apply to --&gt;\r\n\t\t\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t\t\t&lt;include&gt;*.md&lt;/include&gt;\r\n\t\t\t\t\t\t\t\t&lt;include&gt;.gitignore&lt;/include&gt;\r\n\t\t\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t\t\t&lt;!-- define the steps to apply to those files --&gt;\r\n\t\t\t\t\t\t\t&lt;trimTrailingWhitespace/&gt;\r\n\t\t\t\t\t\t\t&lt;endWithNewline/&gt;\r\n\t\t\t\t\t\t\t&lt;indent&gt;\r\n\t\t\t\t\t\t\t\t&lt;spaces&gt;true&lt;/spaces&gt;\r\n\t\t\t\t\t\t\t\t&lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\r\n\t\t\t\t\t\t\t&lt;/indent&gt;\r\n\t\t\t\t\t\t&lt;/format&gt;\r\n\t\t\t\t\t&lt;/formats&gt;\r\n\t\t\t\t\t&lt;!-- define a language-specific format --&gt;\r\n\t\t\t\t\t&lt;java&gt;\r\n\t\t\t\t\t\t&lt;!-- no need to specify files, inferred automatically, but you can if you want --&gt;\r\n\t\t\t\t\t\t&lt;importOrder&gt;  &lt;!-- or a custom ordering --&gt;\r\n\t\t\t\t\t\t\t&lt;order&gt;java,javax,org,com,microservices.book.multiplication,\r\n\t\t\t\t\t\t\t&lt;/order&gt;  &lt;!-- or use &lt;file&gt;${project.basedir}/eclipse.importorder&lt;/file&gt; --&gt;\r\n\t\t\t\t\t\t\t&lt;!-- you can use an empty string for all the imports you didn&#39;t specify explicitly, and &#39;\\\\#` prefix for static imports --&gt;\r\n\t\t\t\t\t\t&lt;/importOrder&gt;\r\n\r\n\t\t\t\t\t\t&lt;removeUnusedImports/&gt; &lt;!-- self-explanatory --&gt;\r\n\r\n\t\t\t\t\t\t&lt;!-- apply a specific flavor of google-java-format and reflow long strings --&gt;\r\n\r\n\t\t\t\t\t\t&lt;googleJavaFormat&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;1.14.0&lt;/version&gt;\r\n\t\t\t\t\t\t\t&lt;style&gt;GOOGLE&lt;/style&gt;\r\n\t\t\t\t\t\t\t&lt;reflowLongStrings&gt;true&lt;/reflowLongStrings&gt;\r\n\t\t\t\t\t\t&lt;/googleJavaFormat&gt;\r\n\t\t\t\t\t\t&lt;indent&gt;\r\n\t\t\t\t\t\t\t&lt;tabs&gt;true&lt;/tabs&gt;\r\n\t\t\t\t\t\t\t&lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\r\n\t\t\t\t\t\t&lt;/indent&gt;\r\n\t\t\t\t\t\t&lt;indent&gt;\r\n\t\t\t\t\t\t\t&lt;spaces&gt;true&lt;/spaces&gt;\r\n\t\t\t\t\t\t\t&lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\r\n\t\t\t\t\t\t&lt;/indent&gt;\r\n\t\t\t\t\t&lt;/java&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n```\r\n\r\n**On Intellij**\r\nI added the the following code stile from google\r\n\r\n**Github site**\r\nhttps://github.com/google/google-java-format\r\n\r\n**IntelliJ Java Google Style file**\r\nhttps://raw.githubusercontent.com/google/styleguide/gh-pages/intellij-java-google-style.xml\r\n\r\n[![Intellij code style window][1]][1]\r\n\r\nWhy the differences? What else may differ? How can I have Intellij formatting the code exactly as the google java code style format xml file?\r\n\r\nThank you so much for your help in advance\r\n\r\nRegards\r\n\r\n  [1]: https://i.stack.imgur.com/Sqc0v.png","title":"Spotless + Java Google format vs Intellij + import file","body":"<p>I am trying to configure a maven spring boot application to use spotless with google java format style. I would like as well to have Intellij formatting the code as the maven plugin does.</p>\n<p>But i am noticing that the formmat applied differ a little bit.</p>\n<p>One example:\nIntellij will not change the following 2 lines</p>\n<pre><code>@Mock \nprivate UserRepository userRepositoryMock;\n</code></pre>\n<p>But the maven plugin (using the command: mvn spotless:apply) will format like this:</p>\n<pre><code>@Mock private UserRepository userRepositoryMock;\n</code></pre>\n<p><strong>POM CONFIG</strong></p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\n                &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${spotless.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- optional: limit format enforcement to just the files changed by this feature branch --&gt;\n                    &lt;ratchetFrom&gt;origin/master&lt;/ratchetFrom&gt;\n                    &lt;formats&gt;\n                        &lt;!-- you can define as many formats as you want, each is independent --&gt;\n                        &lt;format&gt;\n                            &lt;!-- define the files to apply to --&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;*.md&lt;/include&gt;\n                                &lt;include&gt;.gitignore&lt;/include&gt;\n                            &lt;/includes&gt;\n                            &lt;!-- define the steps to apply to those files --&gt;\n                            &lt;trimTrailingWhitespace/&gt;\n                            &lt;endWithNewline/&gt;\n                            &lt;indent&gt;\n                                &lt;spaces&gt;true&lt;/spaces&gt;\n                                &lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\n                            &lt;/indent&gt;\n                        &lt;/format&gt;\n                    &lt;/formats&gt;\n                    &lt;!-- define a language-specific format --&gt;\n                    &lt;java&gt;\n                        &lt;!-- no need to specify files, inferred automatically, but you can if you want --&gt;\n                        &lt;importOrder&gt;  &lt;!-- or a custom ordering --&gt;\n                            &lt;order&gt;java,javax,org,com,microservices.book.multiplication,\n                            &lt;/order&gt;  &lt;!-- or use &lt;file&gt;${project.basedir}/eclipse.importorder&lt;/file&gt; --&gt;\n                            &lt;!-- you can use an empty string for all the imports you didn't specify explicitly, and '\\\\#` prefix for static imports --&gt;\n                        &lt;/importOrder&gt;\n\n                        &lt;removeUnusedImports/&gt; &lt;!-- self-explanatory --&gt;\n\n                        &lt;!-- apply a specific flavor of google-java-format and reflow long strings --&gt;\n\n                        &lt;googleJavaFormat&gt;\n                            &lt;version&gt;1.14.0&lt;/version&gt;\n                            &lt;style&gt;GOOGLE&lt;/style&gt;\n                            &lt;reflowLongStrings&gt;true&lt;/reflowLongStrings&gt;\n                        &lt;/googleJavaFormat&gt;\n                        &lt;indent&gt;\n                            &lt;tabs&gt;true&lt;/tabs&gt;\n                            &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\n                        &lt;/indent&gt;\n                        &lt;indent&gt;\n                            &lt;spaces&gt;true&lt;/spaces&gt;\n                            &lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\n                        &lt;/indent&gt;\n                    &lt;/java&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p><strong>On Intellij</strong>\nI added the the following code stile from google</p>\n<p><strong>Github site</strong>\n<a href=\"https://github.com/google/google-java-format\" rel=\"noreferrer\">https://github.com/google/google-java-format</a></p>\n<p><strong>IntelliJ Java Google Style file</strong>\n<a href=\"https://raw.githubusercontent.com/google/styleguide/gh-pages/intellij-java-google-style.xml\" rel=\"noreferrer\">https://raw.githubusercontent.com/google/styleguide/gh-pages/intellij-java-google-style.xml</a></p>\n<p><a href=\"https://i.stack.imgur.com/Sqc0v.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Sqc0v.png\" alt=\"Intellij code style window\" /></a></p>\n<p>Why the differences? What else may differ? How can I have Intellij formatting the code exactly as the google java code style format xml file?</p>\n<p>Thank you so much for your help in advance</p>\n<p>Regards</p>\n"},{"tags":["java","string","permutation"],"comments":[{"owner":{"account_id":7607254,"reputation":2491,"user_id":5769497,"display_name":"Sanket Makani"},"score":0,"creation_date":1492340519,"post_id":43436450,"comment_id":73930053,"body_markdown":"Does order of resultant `ArrayList` matters?","body":"Does order of resultant <code>ArrayList</code> matters?"},{"owner":{"account_id":10697751,"reputation":1,"user_id":7874226,"display_name":"D. Ronald"},"score":0,"creation_date":1492340604,"post_id":43436450,"comment_id":73930080,"body_markdown":"Yes...output should be exactly as the expected result.","body":"Yes...output should be exactly as the expected result."},{"owner":{"account_id":7607254,"reputation":2491,"user_id":5769497,"display_name":"Sanket Makani"},"score":0,"creation_date":1492340695,"post_id":43436450,"comment_id":73930101,"body_markdown":"Oh Okay. I can code a snippet which gives all permutation but order won&#39;t be same as you mentioned.!","body":"Oh Okay. I can code a snippet which gives all permutation but order won&#39;t be same as you mentioned.!"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1492340808,"post_id":43436450,"comment_id":73930129,"body_markdown":"To be technically correct, only the last 6 values (abc, acb, bac, bca, cab, cba) are permutations of the original string. The others are permutations of a subset.","body":"To be technically correct, only the last 6 values (abc, acb, bac, bca, cab, cba) are permutations of the original string. The others are permutations of a subset."},{"owner":{"account_id":7607254,"reputation":2491,"user_id":5769497,"display_name":"Sanket Makani"},"score":0,"creation_date":1492341093,"post_id":43436450,"comment_id":73930203,"body_markdown":"@Henry , Yup the thing I figured out is `First of all here you need to find all possible subsets of the string and then for each subset, you need to find its all possible permutaions.`","body":"@Henry , Yup the thing I figured out is <code>First of all here you need to find all possible subsets of the string and then for each subset, you need to find its all possible permutaions.</code>"},{"owner":{"account_id":1291795,"reputation":24641,"user_id":1243762,"accept_rate":95,"display_name":"Guy Coder"},"score":0,"creation_date":1492343378,"post_id":43436450,"comment_id":73930772,"body_markdown":"Of interest: [Permutation Generation Methods](http://homepage.divms.uiowa.edu/~goodman/22m150.dir/2007/Permutation%20Generation%20Methods.pdf) by Robert Sedgewick","body":"Of interest: <a href=\"http://homepage.divms.uiowa.edu/~goodman/22m150.dir/2007/Permutation%20Generation%20Methods.pdf\" rel=\"nofollow noreferrer\">Permutation Generation Methods</a> by Robert Sedgewick"},{"owner":{"account_id":1291795,"reputation":24641,"user_id":1243762,"accept_rate":95,"display_name":"Guy Coder"},"score":0,"creation_date":1492343637,"post_id":43436450,"comment_id":73930846,"body_markdown":"I take that this is a homework assignment. I find it odd that it ask `optimize the code for efficiency of speed and memory` typically code is optimized for one or the other. While it might not be apparent for a small set of input with three values, when you get to 10 values it really matters as the number of permutations are based on [factorial](https://en.wikipedia.org/wiki/Factorial) (!).","body":"I take that this is a homework assignment. I find it odd that it ask <code>optimize the code for efficiency of speed and memory</code> typically code is optimized for one or the other. While it might not be apparent for a small set of input with three values, when you get to 10 values it really matters as the number of permutations are based on <a href=\"https://en.wikipedia.org/wiki/Factorial\" rel=\"nofollow noreferrer\">factorial</a> (!)."}],"answers":[{"tags":[],"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492403740,"creation_date":1492356161,"answer_id":43438771,"question_id":43436450,"body_markdown":"Adding another answer with generic algorithm. This will give all permutations in the order mentioned. Hope this solve purpose\r\n\r\n    public class Test {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        String s = &quot;abc&quot;;\r\n\r\n        Map&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\n        List&lt;String&gt; strArray = new ArrayList&lt;String&gt;(Arrays.asList(s.split(&quot;&quot;)));\r\n        map.put(1, strArray);\r\n\r\n        if (strArray.size() &gt; 1) {\r\n            new Test().enumerateSubString(strArray.size(), map);\r\n        }\r\n        System.out.println(map.values());\r\n    }\r\n\r\n    public void enumerateSubString(int n, Map&lt;Integer, List&lt;String&gt;&gt; map) {\r\n\r\n        if (!map.containsKey(n)) {\r\n            map.put(n, new ArrayList&lt;&gt;());\r\n        }\r\n\r\n        if (n == 2) {\r\n            // List of string with each having 1 character\r\n            List&lt;String&gt; list_1 = map.get(1);\r\n            // List of string which each having 2 characters\r\n            List&lt;String&gt; list_2 = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; list_1.size(); i++) {\r\n                for (int j = i + 1; j &lt; list_1.size(); j++) {\r\n                    list_2.add(list_1.get(i) + list_1.get(j));\r\n                    list_2.add(swap(list_1.get(i) + list_1.get(j)));\r\n                }\r\n            }\r\n            // Map list_2 to key 2\r\n            map.put(n, list_2);\r\n        } else {\r\n            // Recursive function\r\n            enumerateSubString(n - 1, map);\r\n            // List of string with each having n-1 characters\r\n            List&lt;String&gt; list = map.get(n - 1);\r\n            // List of string with each having n characters\r\n            List&lt;String&gt; list_n = map.get(n);\r\n            // Add each character to list of n-1 to get n charater string list\r\n            for (String l1 : map.get(1)) {\r\n                for (String l : list) {\r\n                    // this condition is to avoid repetation of charaters n\r\n                    // String\r\n                    if (l.indexOf(l1) &lt; 0) {\r\n                        list_n.add(l1 + l);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Function to swap characters\r\n    private String swap(String str) {\r\n        String s1 = str.substring(1) + str.substring(0, 1);\r\n        return s1;\r\n    }}\r\n\r\n","title":"Permutations of a String and its Sub-Strings using ArrayList in Java","body":"<p>Adding another answer with generic algorithm. This will give all permutations in the order mentioned. Hope this solve purpose</p>\n\n<pre><code>public class Test {\n\npublic static void main(String[] args) {\n\n    String s = \"abc\";\n\n    Map&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n\n    List&lt;String&gt; strArray = new ArrayList&lt;String&gt;(Arrays.asList(s.split(\"\")));\n    map.put(1, strArray);\n\n    if (strArray.size() &gt; 1) {\n        new Test().enumerateSubString(strArray.size(), map);\n    }\n    System.out.println(map.values());\n}\n\npublic void enumerateSubString(int n, Map&lt;Integer, List&lt;String&gt;&gt; map) {\n\n    if (!map.containsKey(n)) {\n        map.put(n, new ArrayList&lt;&gt;());\n    }\n\n    if (n == 2) {\n        // List of string with each having 1 character\n        List&lt;String&gt; list_1 = map.get(1);\n        // List of string which each having 2 characters\n        List&lt;String&gt; list_2 = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; list_1.size(); i++) {\n            for (int j = i + 1; j &lt; list_1.size(); j++) {\n                list_2.add(list_1.get(i) + list_1.get(j));\n                list_2.add(swap(list_1.get(i) + list_1.get(j)));\n            }\n        }\n        // Map list_2 to key 2\n        map.put(n, list_2);\n    } else {\n        // Recursive function\n        enumerateSubString(n - 1, map);\n        // List of string with each having n-1 characters\n        List&lt;String&gt; list = map.get(n - 1);\n        // List of string with each having n characters\n        List&lt;String&gt; list_n = map.get(n);\n        // Add each character to list of n-1 to get n charater string list\n        for (String l1 : map.get(1)) {\n            for (String l : list) {\n                // this condition is to avoid repetation of charaters n\n                // String\n                if (l.indexOf(l1) &lt; 0) {\n                    list_n.add(l1 + l);\n                }\n            }\n        }\n    }\n}\n\n// Function to swap characters\nprivate String swap(String str) {\n    String s1 = str.substring(1) + str.substring(0, 1);\n    return s1;\n}}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1702153760,"post_id":77628553,"comment_id":136862983,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77628553/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11879840,"reputation":1,"user_id":8693830,"display_name":"Shashank Shukla"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702060431,"creation_date":1702060431,"answer_id":77628553,"question_id":43436450,"body_markdown":"    public static void main(String args[]) {\r\n    \r\n        String word = &quot;abc&quot;;\r\n        // ,acb,bac,bca,cab,cba\r\n        int n = word.length();\r\n    \r\n        combination(word, &quot;&quot;);\r\n        System.out.println(list.stream().collect(Collectors.toList()));\r\n    }\r\n    \r\n    private static void combination(String str, String ans) {\r\n        if (str.length() &gt;= 0) {\r\n            if (!ans.isEmpty()) {\r\n                list.add(ans);\r\n            }\r\n        }\r\n    \r\n        for (int i=0; i&lt;str.length(); i++) {\r\n    \r\n        \r\n    \r\n    char ch=str.charAt(i);\r\n            String remaining =str.substring(0,i)+str.substring(i+1);\r\n            combination(remaining, ans + ch);\r\n        }\r\n    }","title":"Permutations of a String and its Sub-Strings using ArrayList in Java","body":"<pre><code>public static void main(String args[]) {\n\n    String word = &quot;abc&quot;;\n    // ,acb,bac,bca,cab,cba\n    int n = word.length();\n\n    combination(word, &quot;&quot;);\n    System.out.println(list.stream().collect(Collectors.toList()));\n}\n\nprivate static void combination(String str, String ans) {\n    if (str.length() &gt;= 0) {\n        if (!ans.isEmpty()) {\n            list.add(ans);\n        }\n    }\n\n    for (int i=0; i&lt;str.length(); i++) {\n\n    \n\nchar ch=str.charAt(i);\n        String remaining =str.substring(0,i)+str.substring(i+1);\n        combination(remaining, ans + ch);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10697751,"reputation":1,"user_id":7874226,"display_name":"D. Ronald"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1702060431,"creation_date":1492340101,"question_id":43436450,"body_markdown":"I&#39;ve been asked to write a program to find the permutations of a String and its Sub-Strings using an ArrayList. I came up with a solution, but it is not displaying the required output. So, I would appreciate if someone could enlighten me a bit on this.\r\n\r\nThe question is as follows: \r\n\r\n&gt;To compute all permutations of a string and it&#39;s sub-strings. For example, given a string S such as &quot;abc&quot;, it should output a list/array of strings retlist [a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]. Your code should take S as input, and produce retlist for the permuted list. On top of having a code that works, please optimize the code for efficiency of speed and memory (we will be testing for large strings and the faster it goes, the better).\r\n\r\nAs said in the question, when permutating a string of &quot;abc&quot;, it should print a result as below:\r\n\r\n&gt;[a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]\r\n\r\nWhat I came up with so far:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Permutation {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tenumerateSubString(&quot;abc&quot;);\r\n    \t}\r\n    \r\n    \tpublic static List&lt;String&gt; enumerateSubString(String S_input) {\r\n    \t\tArrayList&lt;String&gt; retlist = new ArrayList&lt;String&gt;();\r\n    \r\n    \t\tint n = S_input.length();\r\n    \r\n    \t\tif (n == 1) {\r\n    \t\t\tretlist.add(S_input);\r\n    \t\t} else {\r\n    \t\t\tfor (int i = 0; i &lt; n; i++) {\r\n    \t\t\t\tretlist.addAll(enumerateSubString(S_input.substring(0, i) + S_input.substring(i + 1, n)));\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.print(retlist);\r\n    \t\treturn retlist;\r\n    \t}\r\n    }\r\n\r\nAnd the result that I am getting right now with the above code:\r\n\r\n&gt;[c][b][c, b][c][a][c, a][b][a][b, a][c, b, c, a, b, a]\r\n\r\n\r\nThanks","title":"Permutations of a String and its Sub-Strings using ArrayList in Java","body":"<p>I've been asked to write a program to find the permutations of a String and its Sub-Strings using an ArrayList. I came up with a solution, but it is not displaying the required output. So, I would appreciate if someone could enlighten me a bit on this.</p>\n\n<p>The question is as follows: </p>\n\n<blockquote>\n  <p>To compute all permutations of a string and it's sub-strings. For example, given a string S such as \"abc\", it should output a list/array of strings retlist [a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]. Your code should take S as input, and produce retlist for the permuted list. On top of having a code that works, please optimize the code for efficiency of speed and memory (we will be testing for large strings and the faster it goes, the better).</p>\n</blockquote>\n\n<p>As said in the question, when permutating a string of \"abc\", it should print a result as below:</p>\n\n<blockquote>\n  <p>[a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]</p>\n</blockquote>\n\n<p>What I came up with so far:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Permutation {\n\n    public static void main(String[] args) {\n        enumerateSubString(\"abc\");\n    }\n\n    public static List&lt;String&gt; enumerateSubString(String S_input) {\n        ArrayList&lt;String&gt; retlist = new ArrayList&lt;String&gt;();\n\n        int n = S_input.length();\n\n        if (n == 1) {\n            retlist.add(S_input);\n        } else {\n            for (int i = 0; i &lt; n; i++) {\n                retlist.addAll(enumerateSubString(S_input.substring(0, i) + S_input.substring(i + 1, n)));\n            }\n        }\n\n        System.out.print(retlist);\n        return retlist;\n    }\n}\n</code></pre>\n\n<p>And the result that I am getting right now with the above code:</p>\n\n<blockquote>\n  <p>[c][b][c, b][c][a][c, a][b][a][b, a][c, b, c, a, b, a]</p>\n</blockquote>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","mockito","azureservicebus"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1702060125,"post_id":77628237,"comment_id":136855248,"body_markdown":"Mockito version?","body":"Mockito version?"}],"answers":[{"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702060338,"creation_date":1702060338,"answer_id":77628546,"question_id":77628237,"body_markdown":"[Mocking final types, enums and final methods (Since 2.1.0)](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final)\r\n\r\n&gt; Mockito now offers support for mocking final classes and methods by default. This is a fantastic improvement that demonstrates Mockito&#39;s everlasting quest for improving testing experience. Our ambition is that Mockito &quot;just works&quot; with final classes and methods. Previously they were considered *unmockable*, preventing the user from mocking. Since 5.0.0, this feature is enabled by default.\r\nThis alternative mock maker which uses a combination of both Java instrumentation API and sub-classing rather than creating a new class to represent a mock. This way, it becomes possible to mock final types and methods.\r\n&gt;\r\n&gt; In versions preceding 5.0.0, this mock maker is **turned off by default** because it is based on completely different mocking mechanism that required more feedback from the community. It can be activated explicitly by the mockito extension mechanism, just create in the classpath a file `/mockito-extensions/org.mockito.plugins.MockMaker` containing the value `mock-maker-inline`.\r\n&gt;\r\n&gt; As a convenience, the Mockito team provides an artifact where this mock maker is preconfigured. Instead of using the *mockito-core* artifact, include the *mockito-inline* artifact in your project. Note that this artifact is likely to be discontinued once mocking of final classes and methods gets integrated into the default mock maker.","title":"How to mock ServiceBusReceiverAsyncClient for unit testing?","body":"<p><a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final\" rel=\"nofollow noreferrer\">Mocking final types, enums and final methods (Since 2.1.0)</a></p>\n<blockquote>\n<p>Mockito now offers support for mocking final classes and methods by default. This is a fantastic improvement that demonstrates Mockito's everlasting quest for improving testing experience. Our ambition is that Mockito &quot;just works&quot; with final classes and methods. Previously they were considered <em>unmockable</em>, preventing the user from mocking. Since 5.0.0, this feature is enabled by default.\nThis alternative mock maker which uses a combination of both Java instrumentation API and sub-classing rather than creating a new class to represent a mock. This way, it becomes possible to mock final types and methods.</p>\n<p>In versions preceding 5.0.0, this mock maker is <strong>turned off by default</strong> because it is based on completely different mocking mechanism that required more feedback from the community. It can be activated explicitly by the mockito extension mechanism, just create in the classpath a file <code>/mockito-extensions/org.mockito.plugins.MockMaker</code> containing the value <code>mock-maker-inline</code>.</p>\n<p>As a convenience, the Mockito team provides an artifact where this mock maker is preconfigured. Instead of using the <em>mockito-core</em> artifact, include the <em>mockito-inline</em> artifact in your project. Note that this artifact is likely to be discontinued once mocking of final classes and methods gets integrated into the default mock maker.</p>\n</blockquote>\n"}],"owner":{"account_id":7123505,"reputation":249,"user_id":5447261,"accept_rate":83,"display_name":"Matheus Weber"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702060338,"creation_date":1702056323,"question_id":77628237,"body_markdown":"Using Java and SpringBoot, I am trying to create a unit test for a method that uses a ServiceBusReceiverAsyncClient, but Mockito is not able to create the Mock because the class is a final class.\r\n\r\n    @Mock\r\n    private ServiceBusReceiverFactory factory;\r\n\r\n    @Test\r\n    void test() {\r\n        ServiceBusReceiverAsyncClient mockedReceiver = Mockito.mock(ServiceBusReceiverAsyncClient.class)\r\n        when(this.factory.getClient()).thenReturn(mockedReceiver);\r\n     \r\n        consumer.listen(ack);\r\n        //calls the ServiceBusReceiverAsyncClient.receivedMessages() that calls ack.\r\n\r\n        verify(ack, atLeastOnce().success());\r\n       \r\n\r\n    }","title":"How to mock ServiceBusReceiverAsyncClient for unit testing?","body":"<p>Using Java and SpringBoot, I am trying to create a unit test for a method that uses a ServiceBusReceiverAsyncClient, but Mockito is not able to create the Mock because the class is a final class.</p>\n<pre><code>@Mock\nprivate ServiceBusReceiverFactory factory;\n\n@Test\nvoid test() {\n    ServiceBusReceiverAsyncClient mockedReceiver = Mockito.mock(ServiceBusReceiverAsyncClient.class)\n    when(this.factory.getClient()).thenReturn(mockedReceiver);\n \n    consumer.listen(ack);\n    //calls the ServiceBusReceiverAsyncClient.receivedMessages() that calls ack.\n\n    verify(ack, atLeastOnce().success());\n   \n\n}\n</code></pre>\n"},{"tags":["java","modularity"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1702059912,"post_id":77628500,"comment_id":136855216,"body_markdown":"Please check out [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/q/25385173/)  and [How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/). The links won&#39;t solve your direct problem, but they will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer.","body":"Please check out <a href=\"https://stackoverflow.com/q/25385173/\">What is a debugger and how can it help me diagnose problems?</a>  and <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. The links won&#39;t solve your direct problem, but they will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1702059983,"post_id":77628500,"comment_id":136855226,"body_markdown":"Also, consider using variables and constants with English names and also creating and posting a [mre] with your question (or future questions), as these are easier for us to understand and help debug, although *your* debugging should be done first, and the results of your debugging efforts should be shown in your question, for bet results.","body":"Also, consider using variables and constants with English names and also creating and posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question (or future questions), as these are easier for us to understand and help debug, although <i>your</i> debugging should be done first, and the results of your debugging efforts should be shown in your question, for bet results."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1702060693,"post_id":77628500,"comment_id":136855340,"body_markdown":"Also, please comment back to me if you do decide to post a valid [mre] code post with your question. If anything in the link is unclear or confusing, please feel free to comment back with your questions. A decent MRE is worth its weight in gold, and I think that I speak for all in saying that we&#39;ll gladly help you with your construction of this in any way that we can.","body":"Also, please comment back to me if you do decide to post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code post with your question. If anything in the link is unclear or confusing, please feel free to comment back with your questions. A decent MRE is worth its weight in gold, and I think that I speak for all in saying that we&#39;ll gladly help you with your construction of this in any way that we can."}],"owner":{"account_id":25374902,"reputation":1,"user_id":20025580,"display_name":"Tailosrx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702059888,"answer_count":0,"score":-2,"last_activity_date":1702060307,"creation_date":1702059565,"question_id":77628500,"body_markdown":"I&#39;m developing a combat game in Java for homework, and recently, I encountered an issue with the enemy&#39;s health.\r\nFor instance, when my fighter and the enemy attacks, theoretically, the health of both should decrease. However, i&#39;ve noticed that only the health of the fighter is decreasing\r\n\r\nThe program is created by 7 files but this is the code of the Combat, if is necessary i can show the other files.\r\n\r\n```\r\n\r\n/*\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template\r\n */\r\npackage juegocombate_kevin_reglas;\r\n\r\nimport static juegocombate_kevin_reglas.Luchador.VIDA;\r\nimport static juegocombate_kevin_reglas.Luchador.VIDA_MAX;\r\n\r\n/**\r\n * Combat class that handles different combat strategies and their resolution.\r\n * Author: kevin\r\n */\r\npublic class Combate {\r\n\r\n    // Constants indicating possible combat actions\r\n    public static final int ATTACK = 0;\r\n    public static final int DEFENSE = 1;\r\n    public static final int DECEPTION = 2;\r\n    public static final int MANEUVER = 3;\r\n    public final static int ATTACK_MAX = 6;\r\n    public final static int DEFENSE_MAX = 8;\r\n    public static int rounds_p = 0;\r\n\r\n    /**\r\n     * Converts a combat action to its corresponding text representation.\r\n     * @param action The combat action\r\n     * @return Text representation of the action\r\n     */\r\n    public String actionToText(int action) {\r\n        switch (action) {\r\n            case ATTACK:\r\n                return &quot;ATTACK&quot;;\r\n            case DEFENSE:\r\n                return &quot;DEFENSE&quot;;\r\n            case DECEPTION:\r\n                return &quot;DECEPTION&quot;;\r\n            case MANEUVER:\r\n                return &quot;MANEUVER&quot;;\r\n        }\r\n        return &quot;UNKNOWN&quot;;\r\n    }\r\n\r\n    /**\r\n     * Calculates the success grade for a given fighter and action.\r\n     * @param fighter The fighter&#39;s data\r\n     * @param action The combat action\r\n     * @return The success grade\r\n     */\r\n    public int calculateSuccessGrade(int[] fighter, int action) {\r\n      \r\n        int success = 0;\r\n\r\n        switch (action) {\r\n            case ATTACK:\r\n                success = fighter[ATTACK];\r\n                break;\r\n            case DEFENSE:\r\n                success = fighter[DEFENSE];\r\n                break;\r\n            case DECEPTION:\r\n                success = fighter[DECEPTION];\r\n                break;\r\n            case MANEUVER:\r\n                success = fighter[MANEUVER];\r\n                break;\r\n        }\r\n\r\n        success = Math.max(0, Math.min(100, success));\r\n        return success;\r\n\r\n    }\r\n\r\n    /**\r\n     * Resolves combat strategies for both the player and the adversary.\r\n     * @param player The player&#39;s data\r\n     * @param playerAction The player&#39;s chosen action\r\n     * @param adversary The adversary&#39;s data\r\n     * @param adversaryAction The adversary&#39;s chosen action\r\n     */\r\n    public void resolveStrategies(int[] player, int playerAction, int[] adversary, int adversaryAction) {\r\n        int playerSuccess = calculateSuccessGrade(player, playerAction);\r\n        int adversarySuccess = calculateSuccessGrade(adversary, adversaryAction);\r\n        \r\n\r\n        switch (playerAction) {\r\n            case ATTACK:\r\n                switch (adversaryAction) {\r\n                    case ATTACK:\r\n                        player[VIDA] -= adversarySuccess;\r\n                        adversary[VIDA] -= playerSuccess;\r\n                        break;\r\n                    case DEFENSE:\r\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\r\n                        player[VIDA] -= adversarySuccess;\r\n                        break;\r\n                    case DECEPTION:\r\n                        adversary[VIDA] -= playerSuccess;\r\n                        break;\r\n                    case MANEUVER:\r\n                        adversary[VIDA] -= playerSuccess;\r\n                        break;\r\n                }\r\n                break;\r\n            case DEFENSE:\r\n                switch (adversaryAction) {\r\n                    case ATTACK:\r\n                        player[VIDA] += Math.min(playerSuccess, player[VIDA_MAX] - player[VIDA]);\r\n                        break;\r\n                    case DEFENSE:\r\n                        player[VIDA] += Math.min(player[VIDA] + playerSuccess, player[VIDA_MAX]);\r\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\r\n                        break;\r\n                    case DECEPTION:\r\n                        player[VIDA] -= 2 * adversarySuccess;\r\n                        break;\r\n                    case MANEUVER:\r\n                        player[VIDA] -= adversarySuccess;\r\n                        applyPenalty(player);\r\n                        break;\r\n                    // Add other cases as needed\r\n                }\r\n                break;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Applies a penalty to the player&#39;s attack and defense attributes.\r\n     * @param player The player&#39;s data\r\n     */\r\n    public void applyPenalty(int[] player) {\r\n        if (rounds_p &gt; 0) {\r\n            player[ATTACK] = Math.max(player[ATTACK] - 1, 1);\r\n            player[DEFENSE] = Math.max(player[DEFENSE] - 1, 1);\r\n            rounds_p--;\r\n\r\n            if (rounds_p == 0) {\r\n                // Restore original values\r\n                player[ATTACK] = player[ATTACK_MAX];\r\n                player[DEFENSE] = player[DEFENSE_MAX];\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```","title":"Issue with decreasing enemy health in a Java combat game","body":"<p>I'm developing a combat game in Java for homework, and recently, I encountered an issue with the enemy's health.\nFor instance, when my fighter and the enemy attacks, theoretically, the health of both should decrease. However, i've noticed that only the health of the fighter is decreasing</p>\n<p>The program is created by 7 files but this is the code of the Combat, if is necessary i can show the other files.</p>\n<pre><code>\n/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template\n */\npackage juegocombate_kevin_reglas;\n\nimport static juegocombate_kevin_reglas.Luchador.VIDA;\nimport static juegocombate_kevin_reglas.Luchador.VIDA_MAX;\n\n/**\n * Combat class that handles different combat strategies and their resolution.\n * Author: kevin\n */\npublic class Combate {\n\n    // Constants indicating possible combat actions\n    public static final int ATTACK = 0;\n    public static final int DEFENSE = 1;\n    public static final int DECEPTION = 2;\n    public static final int MANEUVER = 3;\n    public final static int ATTACK_MAX = 6;\n    public final static int DEFENSE_MAX = 8;\n    public static int rounds_p = 0;\n\n    /**\n     * Converts a combat action to its corresponding text representation.\n     * @param action The combat action\n     * @return Text representation of the action\n     */\n    public String actionToText(int action) {\n        switch (action) {\n            case ATTACK:\n                return &quot;ATTACK&quot;;\n            case DEFENSE:\n                return &quot;DEFENSE&quot;;\n            case DECEPTION:\n                return &quot;DECEPTION&quot;;\n            case MANEUVER:\n                return &quot;MANEUVER&quot;;\n        }\n        return &quot;UNKNOWN&quot;;\n    }\n\n    /**\n     * Calculates the success grade for a given fighter and action.\n     * @param fighter The fighter's data\n     * @param action The combat action\n     * @return The success grade\n     */\n    public int calculateSuccessGrade(int[] fighter, int action) {\n      \n        int success = 0;\n\n        switch (action) {\n            case ATTACK:\n                success = fighter[ATTACK];\n                break;\n            case DEFENSE:\n                success = fighter[DEFENSE];\n                break;\n            case DECEPTION:\n                success = fighter[DECEPTION];\n                break;\n            case MANEUVER:\n                success = fighter[MANEUVER];\n                break;\n        }\n\n        success = Math.max(0, Math.min(100, success));\n        return success;\n\n    }\n\n    /**\n     * Resolves combat strategies for both the player and the adversary.\n     * @param player The player's data\n     * @param playerAction The player's chosen action\n     * @param adversary The adversary's data\n     * @param adversaryAction The adversary's chosen action\n     */\n    public void resolveStrategies(int[] player, int playerAction, int[] adversary, int adversaryAction) {\n        int playerSuccess = calculateSuccessGrade(player, playerAction);\n        int adversarySuccess = calculateSuccessGrade(adversary, adversaryAction);\n        \n\n        switch (playerAction) {\n            case ATTACK:\n                switch (adversaryAction) {\n                    case ATTACK:\n                        player[VIDA] -= adversarySuccess;\n                        adversary[VIDA] -= playerSuccess;\n                        break;\n                    case DEFENSE:\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\n                        player[VIDA] -= adversarySuccess;\n                        break;\n                    case DECEPTION:\n                        adversary[VIDA] -= playerSuccess;\n                        break;\n                    case MANEUVER:\n                        adversary[VIDA] -= playerSuccess;\n                        break;\n                }\n                break;\n            case DEFENSE:\n                switch (adversaryAction) {\n                    case ATTACK:\n                        player[VIDA] += Math.min(playerSuccess, player[VIDA_MAX] - player[VIDA]);\n                        break;\n                    case DEFENSE:\n                        player[VIDA] += Math.min(player[VIDA] + playerSuccess, player[VIDA_MAX]);\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\n                        break;\n                    case DECEPTION:\n                        player[VIDA] -= 2 * adversarySuccess;\n                        break;\n                    case MANEUVER:\n                        player[VIDA] -= adversarySuccess;\n                        applyPenalty(player);\n                        break;\n                    // Add other cases as needed\n                }\n                break;\n\n        }\n\n    }\n\n    /**\n     * Applies a penalty to the player's attack and defense attributes.\n     * @param player The player's data\n     */\n    public void applyPenalty(int[] player) {\n        if (rounds_p &gt; 0) {\n            player[ATTACK] = Math.max(player[ATTACK] - 1, 1);\n            player[DEFENSE] = Math.max(player[DEFENSE] - 1, 1);\n            rounds_p--;\n\n            if (rounds_p == 0) {\n                // Restore original values\n                player[ATTACK] = player[ATTACK_MAX];\n                player[DEFENSE] = player[DEFENSE_MAX];\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","groovy","jmeter","base64","performance-testing"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1702059311,"post_id":77628475,"comment_id":136855140,"body_markdown":"You don&#39;t use base64 to *encode* a string - you use it to *encode* binary data *as* a string; you would *decode* a string to get back a byte array... but the string &quot;a7d4&quot; would *not* end up as the byte array [a7, b4] - that would be hex, not base64. At the moment your question is *very* unclear, and it&#39;s not clear how much of that is due to not understanding the purpose of base64.","body":"You don&#39;t use base64 to <i>encode</i> a string - you use it to <i>encode</i> binary data <i>as</i> a string; you would <i>decode</i> a string to get back a byte array... but the string &quot;a7d4&quot; would <i>not</i> end up as the byte array [a7, b4] - that would be hex, not base64. At the moment your question is <i>very</i> unclear, and it&#39;s not clear how much of that is due to not understanding the purpose of base64."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1702059634,"post_id":77628475,"comment_id":136855189,"body_markdown":"Sounds like the OP wants to convert binary data represented as hex, back into binary.","body":"Sounds like the OP wants to convert binary data represented as hex, back into binary."},{"owner":{"account_id":18652297,"reputation":17,"user_id":13595487,"display_name":"Михаил Воробьев"},"score":0,"creation_date":1702060088,"post_id":77628475,"comment_id":136855241,"body_markdown":"Apparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don&#39;t know how to transform string to such byte array","body":"Apparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don&#39;t know how to transform string to such byte array"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1702061809,"post_id":77628475,"comment_id":136855460,"body_markdown":"`String s = &quot;a7d4&quot;;byte[] a = Arrays.copyOfRange(new BigInteger(s, 16).toByteArray(), 1, s.length()-1); `","body":"<code>String s = &quot;a7d4&quot;;byte[] a = Arrays.copyOfRange(new BigInteger(s, 16).toByteArray(), 1, s.length()-1); </code>"}],"owner":{"account_id":18652297,"reputation":17,"user_id":13595487,"display_name":"Михаил Воробьев"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702059326,"answer_count":0,"score":-2,"last_activity_date":1702060079,"creation_date":1702059209,"question_id":77628475,"body_markdown":"I have a string &quot;a7d4&quot; and need to encode it to base64 as a byte array [a7, b4] in Apache Jmeter test-plan. Function ${__base64Encode(&quot;a7b4&quot;,)} encode result String.getBytes() (in this case, 61376434). How can fix it, preferably without import any additional libraries to my calsspath?\r\n\r\nApparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don&#39;t know how to transform string to such byte array","title":"How to encode a string to base64 as byte array in Jmeter?","body":"<p>I have a string &quot;a7d4&quot; and need to encode it to base64 as a byte array [a7, b4] in Apache Jmeter test-plan. Function ${__base64Encode(&quot;a7b4&quot;,)} encode result String.getBytes() (in this case, 61376434). How can fix it, preferably without import any additional libraries to my calsspath?</p>\n<p>Apparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don't know how to transform string to such byte array</p>\n"},{"tags":["java","android","database","android-room"],"answers":[{"comments":[{"owner":{"account_id":2645309,"reputation":1139,"user_id":2288146,"display_name":"DanielDiSu"},"score":75,"creation_date":1512214821,"post_id":44424908,"comment_id":82173385,"body_markdown":"If anyone is wondering, this exact approach also works for Kotlin when using *kapt*","body":"If anyone is wondering, this exact approach also works for Kotlin when using <i>kapt</i>"},{"owner":{"account_id":3981580,"reputation":931,"user_id":3283350,"display_name":"ravi"},"score":2,"creation_date":1531043851,"post_id":44424908,"comment_id":89440882,"body_markdown":"Should we gitignore the json file generated in the `app/schemas` directory by this operation. And I heard we should put the schema into a directory that is not included in the `apk`. How can we do that?","body":"Should we gitignore the json file generated in the <code>app&#47;schemas</code> directory by this operation. And I heard we should put the schema into a directory that is not included in the <code>apk</code>. How can we do that?"},{"owner":{"account_id":187471,"reputation":2788,"user_id":425538,"display_name":"appmattus"},"score":7,"creation_date":1535356459,"post_id":44424908,"comment_id":91019758,"body_markdown":"@ravi the generated schema file(s) should be stored in version control as this is used by Room to detect changes and help ensure if the database changes you update the database version and create a migration plan","body":"@ravi the generated schema file(s) should be stored in version control as this is used by Room to detect changes and help ensure if the database changes you update the database version and create a migration plan"},{"owner":{"account_id":4636394,"reputation":517,"user_id":3757533,"accept_rate":43,"display_name":"Anargu"},"score":2,"creation_date":1536781149,"post_id":44424908,"comment_id":91552494,"body_markdown":"Does this configuration affect to the release version? I mean, when I export the project to a release app.","body":"Does this configuration affect to the release version? I mean, when I export the project to a release app."},{"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"score":0,"creation_date":1570017036,"post_id":44424908,"comment_id":102779691,"body_markdown":"If this solution results in **ERROR: Could not find method annotationProcessorOptions() for arguments**, check out Luna&#39;s answer, below: https://stackoverflow.com/a/54366985/1617737","body":"If this solution results in <b>ERROR: Could not find method annotationProcessorOptions() for arguments</b>, check out Luna&#39;s answer, below: <a href=\"https://stackoverflow.com/a/54366985/1617737\">stackoverflow.com/a/54366985/1617737</a>"},{"owner":{"account_id":8650820,"reputation":141,"user_id":10609493,"display_name":"Diego Farias"},"score":0,"creation_date":1573186310,"post_id":44424908,"comment_id":103807787,"body_markdown":"Desse jeito funcionou, a solu&#231;&#227;o anterior do @DoruChidean n&#227;o funcionou no meu cen&#225;rio.","body":"Desse jeito funcionou, a solu&#231;&#227;o anterior do @DoruChidean n&#227;o funcionou no meu cen&#225;rio."},{"owner":{"account_id":7622639,"reputation":336,"user_id":5780236,"display_name":"Ahmad Reza Enshaee"},"score":7,"creation_date":1601215904,"post_id":44424908,"comment_id":113330784,"body_markdown":"use `arguument +=` so it does not mess with your DI libraries like Hilt.(see this answer for more information https://stackoverflow.com/a/62891182/5780236)","body":"use <code>arguument +=</code> so it does not mess with your DI libraries like Hilt.(see this answer for more information <a href=\"https://stackoverflow.com/a/62891182/5780236\">stackoverflow.com/a/62891182/5780236</a>)"},{"owner":{"account_id":5779615,"reputation":1456,"user_id":4560689,"display_name":"Chantell Osejo"},"score":0,"creation_date":1611016860,"post_id":44424908,"comment_id":116310168,"body_markdown":"@mikejonesguy an edit with the information in these comments would be super helpful. Knowing it works with kapt - I missed that and also went down a rabbit hole with the Hilt problem mentioned by Ahmad.","body":"@mikejonesguy an edit with the information in these comments would be super helpful. Knowing it works with kapt - I missed that and also went down a rabbit hole with the Hilt problem mentioned by Ahmad."},{"owner":{"account_id":1444847,"reputation":9859,"user_id":1363731,"accept_rate":100,"display_name":"mikejonesguy"},"score":3,"creation_date":1611105088,"post_id":44424908,"comment_id":116341913,"body_markdown":"@ChantellOsejo updated just now. Changed &quot;arguments = ...&quot; to &quot;arguments += ...&quot;.","body":"@ChantellOsejo updated just now. Changed &quot;arguments = ...&quot; to &quot;arguments += ...&quot;."},{"owner":{"account_id":45913,"reputation":2814,"user_id":135530,"accept_rate":79,"display_name":"Lance"},"score":0,"creation_date":1624892761,"post_id":44424908,"comment_id":120475125,"body_markdown":"I added the javaCompileOptions to my gradle file but still get the warning. What am I missing?","body":"I added the javaCompileOptions to my gradle file but still get the warning. What am I missing?"},{"owner":{"account_id":6745148,"reputation":159,"user_id":5196984,"accept_rate":0,"display_name":"Anuj"},"score":0,"creation_date":1656539236,"post_id":44424908,"comment_id":128601036,"body_markdown":"this should be upvoted for good reasons","body":"this should be upvoted for good reasons"},{"owner":{"account_id":6845950,"reputation":166,"user_id":5264775,"accept_rate":50,"display_name":"Wade Byron Profe"},"score":0,"creation_date":1696431743,"post_id":44424908,"comment_id":136152643,"body_markdown":"I&#39;m getting &quot;Overload resolution ambiguity. All these functions match.&quot; on the `+=` and &quot;Unexpected tokens (use &#39;;&#39; to separate expressions on the same line)&quot; for the `: &quot;$projectDir/schemas&quot;.toString()]`","body":"I&#39;m getting &quot;Overload resolution ambiguity. All these functions match.&quot; on the <code>+=</code> and &quot;Unexpected tokens (use &#39;;&#39; to separate expressions on the same line)&quot; for the <code>: &quot;$projectDir&#47;schemas&quot;.toString()]</code>"}],"tags":[],"owner":{"account_id":1444847,"reputation":9859,"user_id":1363731,"accept_rate":100,"display_name":"mikejonesguy"},"comment_count":12,"down_vote_count":0,"up_vote_count":589,"is_accepted":false,"score":589,"last_activity_date":1611104988,"creation_date":1496882645,"answer_id":44424908,"question_id":44322178,"body_markdown":"In the `build.gradle` file for your app module, add this to the `defaultConfig` section (under the `android` section). This will write out the schema to a `schemas` subfolder of your project folder.\r\n\r\n\tjavaCompileOptions {\r\n\t\tannotationProcessorOptions {\r\n\t\t\targuments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\r\n\t\t}\r\n\t}\r\n\r\nLike this:\r\n\r\n    // ...\r\n\r\n    android {\r\n    \t\r\n    \t// ... (compileSdkVersion, buildToolsVersion, etc)\r\n    \r\n        defaultConfig {\r\n    \r\n            // ... (applicationId, miSdkVersion, etc)\r\n            \r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\r\n                }\r\n            }\r\n        }\r\n       \r\n        // ... (buildTypes, compileOptions, etc)\r\n\r\n    }\r\n\r\n    // ...","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>In the <code>build.gradle</code> file for your app module, add this to the <code>defaultConfig</code> section (under the <code>android</code> section). This will write out the schema to a <code>schemas</code> subfolder of your project folder.</p>\n<pre><code>javaCompileOptions {\n    annotationProcessorOptions {\n        arguments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\n    }\n}\n</code></pre>\n<p>Like this:</p>\n<pre><code>// ...\n\nandroid {\n    \n    // ... (compileSdkVersion, buildToolsVersion, etc)\n\n    defaultConfig {\n\n        // ... (applicationId, miSdkVersion, etc)\n        \n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\n            }\n        }\n    }\n   \n    // ... (buildTypes, compileOptions, etc)\n\n}\n\n// ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":214402,"reputation":9347,"user_id":468360,"display_name":"Codeversed"},"score":0,"creation_date":1518634971,"post_id":44645943,"comment_id":84591035,"body_markdown":"I ran into this same error but it was due to adding a constructor to my Entity. Simply add &#39;@Ignore&#39; to any constructor that errors and ad a new blank constructor.","body":"I ran into this same error but it was due to adding a constructor to my Entity. Simply add &#39;@Ignore&#39; to any constructor that errors and ad a new blank constructor."},{"owner":{"account_id":2373429,"reputation":5537,"user_id":2077479,"accept_rate":44,"display_name":"Jongz Puangput"},"score":12,"creation_date":1520642913,"post_id":44645943,"comment_id":85413810,"body_markdown":"What does it really mean &quot;Don&#39;t ship with your app&quot; ? It will included in APK ?","body":"What does it really mean &quot;Don&#39;t ship with your app&quot; ? It will included in APK ?"},{"owner":{"account_id":2805197,"reputation":1046,"user_id":2412582,"display_name":"Prashant"},"score":0,"creation_date":1524929708,"post_id":44645943,"comment_id":87172346,"body_markdown":"Yes, I got a similar json file with all the details.","body":"Yes, I got a similar json file with all the details."},{"owner":{"account_id":2819931,"reputation":419,"user_id":2423899,"display_name":"illusionJJ"},"score":3,"creation_date":1526352458,"post_id":44645943,"comment_id":87699277,"body_markdown":"If follow &quot;Don&#39;t ship with your app&quot;, should I remove JSON files before generating APK?","body":"If follow &quot;Don&#39;t ship with your app&quot;, should I remove JSON files before generating APK?"},{"owner":{"account_id":8965141,"reputation":1826,"user_id":6686126,"display_name":"galcyurio"},"score":14,"creation_date":1530869923,"post_id":44645943,"comment_id":89395584,"body_markdown":"&quot;Don&#39;t ship with your app&quot; means &quot;Don&#39;t set schemaLocation to like &#39;app/res/raw&#39;. Set the schemaLocation to a directory not included in the APK.&quot;","body":"&quot;Don&#39;t ship with your app&quot; means &quot;Don&#39;t set schemaLocation to like &#39;app/res/raw&#39;. Set the schemaLocation to a directory not included in the APK.&quot;"},{"owner":{"account_id":309455,"reputation":2562,"user_id":973919,"accept_rate":75,"display_name":"xarlymg89"},"score":3,"creation_date":1531302941,"post_id":44645943,"comment_id":89542268,"body_markdown":"@galcyurio $projectDir/schemas is a directory out of the APK, right? I have explored the generated APK and I don&#39;t see it over there. Although I see /res (which accounts for app/src/main/res) for example.","body":"@galcyurio $projectDir/schemas is a directory out of the APK, right? I have explored the generated APK and I don&#39;t see it over there. Although I see /res (which accounts for app/src/main/res) for example."},{"owner":{"display_name":"user11566289"},"score":2,"creation_date":1563453101,"post_id":44645943,"comment_id":100710431,"body_markdown":"@xarlymg89 Were you able to confirm that `$projectDir/schemas` is _NOT_ included in the APK? According to [this answer](https://stackoverflow.com/a/10927390/11566289), custom subdirectories are not.","body":"@xarlymg89 Were you able to confirm that <code>$projectDir&#47;schemas</code> is <i>NOT</i> included in the APK? According to <a href=\"https://stackoverflow.com/a/10927390/11566289\">this answer</a>, custom subdirectories are not."},{"owner":{"account_id":309455,"reputation":2562,"user_id":973919,"accept_rate":75,"display_name":"xarlymg89"},"score":2,"creation_date":1563454034,"post_id":44645943,"comment_id":100710995,"body_markdown":"@glucaio I explored the APK (and the App bundle too) and didn&#39;t find it. So I believe we&#39;re safe.","body":"@glucaio I explored the APK (and the App bundle too) and didn&#39;t find it. So I believe we&#39;re safe."},{"owner":{"account_id":4031135,"reputation":1614,"user_id":3317188,"accept_rate":61,"display_name":"justColbs"},"score":0,"creation_date":1578445219,"post_id":44645943,"comment_id":105438527,"body_markdown":"How do we keep this out of a release APK?","body":"How do we keep this out of a release APK?"},{"owner":{"account_id":2644499,"reputation":8041,"user_id":6505084,"accept_rate":14,"display_name":"DoruChidean"},"score":0,"creation_date":1578558895,"post_id":44645943,"comment_id":105479711,"body_markdown":"use `exportSchema = false` and it will not be generated","body":"use <code>exportSchema = false</code> and it will not be generated"},{"owner":{"account_id":2186330,"reputation":1767,"user_id":1934673,"display_name":"M.Paunov"},"score":0,"creation_date":1649251062,"post_id":44645943,"comment_id":126828152,"body_markdown":"The link in the answer points to the deprecated documentation of android.arch package. The corresponding documentation in androidx.* is: https://developer.android.com/reference/androidx/room/Database#exportSchema()","body":"The link in the answer points to the deprecated documentation of android.arch package. The corresponding documentation in androidx.* is: <a href=\"https://developer.android.com/reference/androidx/room/Database#exportSchema()\" rel=\"nofollow noreferrer\">developer.android.com/reference/androidx/room/&hellip;</a>"}],"tags":[],"owner":{"account_id":2644499,"reputation":8041,"user_id":6505084,"accept_rate":14,"display_name":"DoruChidean"},"comment_count":11,"down_vote_count":0,"up_vote_count":545,"is_accepted":true,"score":545,"last_activity_date":1698995613,"creation_date":1497941916,"answer_id":44645943,"question_id":44322178,"body_markdown":"As per the [docs][1]:\r\n\r\n&gt; You can set annotation processor argument (room.schemaLocation) to tell Room to export the schema into a folder. Even though it is not mandatory, it is a good practice to have version history in your codebase and you should commit that file into your version control system (but don&#39;t ship it with your app!).\r\n\r\nSo if you don&#39;t need to check the schema and you want to get rid of the warning, just add `exportSchema = false` to your `RoomDatabase`, as follows.\r\n\r\n    @Database(entities = { YourEntity.class }, version = 1, exportSchema = false)\r\n    public abstract class AppDatabase extends RoomDatabase {\r\n       //...\r\n    }\r\n\r\n\r\nIf you follow @mikejonesguy [answer][2] below, you will follow the good practice mentioned in the docs.\r\nBasically you will get a `.json` file in your `../app/schemas/` folder, which looks something like this:\r\n\r\n&lt;!-- language: json --&gt;\r\n\r\n    {\r\n      &quot;formatVersion&quot;: 1,\r\n      &quot;database&quot;: {\r\n        &quot;version&quot;: 1,\r\n        &quot;identityHash&quot;: &quot;53db508c5248423325bd5393a1c88c03&quot;,\r\n        &quot;entities&quot;: [\r\n          {\r\n            &quot;tableName&quot;: &quot;sms_table&quot;,\r\n            &quot;createSql&quot;: &quot;CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `message` TEXT, `date` INTEGER, `client_id` INTEGER)&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;fieldPath&quot;: &quot;id&quot;,\r\n                &quot;columnName&quot;: &quot;id&quot;,\r\n                &quot;affinity&quot;: &quot;INTEGER&quot;\r\n              },\r\n              {\r\n                &quot;fieldPath&quot;: &quot;message&quot;,\r\n                &quot;columnName&quot;: &quot;message&quot;,\r\n                &quot;affinity&quot;: &quot;TEXT&quot;\r\n              },\r\n              {\r\n                &quot;fieldPath&quot;: &quot;date&quot;,\r\n                &quot;columnName&quot;: &quot;date&quot;,\r\n                &quot;affinity&quot;: &quot;INTEGER&quot;\r\n              },\r\n              {\r\n                &quot;fieldPath&quot;: &quot;clientId&quot;,\r\n                &quot;columnName&quot;: &quot;client_id&quot;,\r\n                &quot;affinity&quot;: &quot;INTEGER&quot;\r\n              }\r\n            ],\r\n            &quot;primaryKey&quot;: {\r\n              &quot;columnNames&quot;: [\r\n                &quot;id&quot;\r\n              ],\r\n              &quot;autoGenerate&quot;: true\r\n            },\r\n            &quot;indices&quot;: [],\r\n            &quot;foreignKeys&quot;: []\r\n          }\r\n        ],\r\n        &quot;setupQueries&quot;: [\r\n          &quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;,\r\n          &quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, \\&quot;53db508c5248423325bd5393a1c88c03\\&quot;)&quot;\r\n        ]\r\n      }\r\n    }\r\n\r\nIf my understanding is correct, you will get such a file with every database version update, so that you can easily follow the history of your db.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/arch/persistence/room/Database.html#exportSchema()\r\n  [2]: https://stackoverflow.com/a/44424908/1363731","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>As per the <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Database.html#exportSchema()\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>You can set annotation processor argument (room.schemaLocation) to tell Room to export the schema into a folder. Even though it is not mandatory, it is a good practice to have version history in your codebase and you should commit that file into your version control system (but don't ship it with your app!).</p>\n</blockquote>\n<p>So if you don't need to check the schema and you want to get rid of the warning, just add <code>exportSchema = false</code> to your <code>RoomDatabase</code>, as follows.</p>\n<pre><code>@Database(entities = { YourEntity.class }, version = 1, exportSchema = false)\npublic abstract class AppDatabase extends RoomDatabase {\n   //...\n}\n</code></pre>\n<p>If you follow @mikejonesguy <a href=\"https://stackoverflow.com/a/44424908/1363731\">answer</a> below, you will follow the good practice mentioned in the docs.\nBasically you will get a <code>.json</code> file in your <code>../app/schemas/</code> folder, which looks something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;formatVersion&quot;: 1,\n  &quot;database&quot;: {\n    &quot;version&quot;: 1,\n    &quot;identityHash&quot;: &quot;53db508c5248423325bd5393a1c88c03&quot;,\n    &quot;entities&quot;: [\n      {\n        &quot;tableName&quot;: &quot;sms_table&quot;,\n        &quot;createSql&quot;: &quot;CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `message` TEXT, `date` INTEGER, `client_id` INTEGER)&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;fieldPath&quot;: &quot;id&quot;,\n            &quot;columnName&quot;: &quot;id&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;message&quot;,\n            &quot;columnName&quot;: &quot;message&quot;,\n            &quot;affinity&quot;: &quot;TEXT&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;date&quot;,\n            &quot;columnName&quot;: &quot;date&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;clientId&quot;,\n            &quot;columnName&quot;: &quot;client_id&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          }\n        ],\n        &quot;primaryKey&quot;: {\n          &quot;columnNames&quot;: [\n            &quot;id&quot;\n          ],\n          &quot;autoGenerate&quot;: true\n        },\n        &quot;indices&quot;: [],\n        &quot;foreignKeys&quot;: []\n      }\n    ],\n    &quot;setupQueries&quot;: [\n      &quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;,\n      &quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, \\&quot;53db508c5248423325bd5393a1c88c03\\&quot;)&quot;\n    ]\n  }\n}\n</code></pre>\n<p>If my understanding is correct, you will get such a file with every database version update, so that you can easily follow the history of your db.</p>\n"},{"comments":[{"owner":{"account_id":7888499,"reputation":914,"user_id":5959593,"accept_rate":0,"display_name":"Minh Nghĩa"},"score":2,"creation_date":1606230481,"post_id":48674264,"comment_id":114896750,"body_markdown":"I got a `&gt; No signature of method: build_xyz.android() is applicable for argument types: (build_xyz$_run_closure1) values: [build_xyz$_run_closure1@719007a9]` where `xyz` is a long random string... is it a bug?","body":"I got a <code>&gt; No signature of method: build_xyz.android() is applicable for argument types: (build_xyz$_run_closure1) values: [build_xyz$_run_closure1@719007a9]</code> where <code>xyz</code> is a long random string... is it a bug?"},{"owner":{"account_id":2517038,"reputation":332,"user_id":2188242,"accept_rate":64,"display_name":"sprajagopal"},"score":1,"creation_date":1623591410,"post_id":48674264,"comment_id":120117130,"body_markdown":"[This](https://developer.android.com/training/data-storage/room/migrating-db-versions#export-schema) is probably a better option","body":"<a href=\"https://developer.android.com/training/data-storage/room/migrating-db-versions#export-schema\" rel=\"nofollow noreferrer\">This</a> is probably a better option"},{"owner":{"account_id":2517038,"reputation":332,"user_id":2188242,"accept_rate":64,"display_name":"sprajagopal"},"score":0,"creation_date":1623591957,"post_id":48674264,"comment_id":120117277,"body_markdown":"@mikejonesguy&#39;s answer above worked for me.","body":"@mikejonesguy&#39;s answer above worked for me."},{"owner":{"account_id":9499339,"reputation":127,"user_id":7061105,"display_name":"Akito"},"score":0,"creation_date":1633814461,"post_id":48674264,"comment_id":122862405,"body_markdown":"Same issue here with the missing signature method.","body":"Same issue here with the missing signature method."},{"owner":{"account_id":220156,"reputation":28363,"user_id":477415,"accept_rate":82,"display_name":"Ollie C"},"score":0,"creation_date":1634636716,"post_id":48674264,"comment_id":123072322,"body_markdown":"When using javaCompileOptions as suggested by other answers I saw an error &quot;Caused by: groovy.lang.MissingMethodException: No signature of method: build_....android() is applicable for argument types... &quot;. It looks like javaCompileOptions might have been deprecated. I&#39;m using AGP v7.0.2. I needed to use kapt{} instead to set the argument as described by Ivanov (I used it within android{} and the schema was output).","body":"When using javaCompileOptions as suggested by other answers I saw an error &quot;Caused by: groovy.lang.MissingMethodException: No signature of method: build_....android() is applicable for argument types... &quot;. It looks like javaCompileOptions might have been deprecated. I&#39;m using AGP v7.0.2. I needed to use kapt{} instead to set the argument as described by Ivanov (I used it within android{} and the schema was output)."},{"owner":{"account_id":3151077,"reputation":153,"user_id":2664521,"display_name":"CyclingSir"},"score":0,"creation_date":1656524232,"post_id":48674264,"comment_id":128596444,"body_markdown":"When using this solution, i had to move the DB definition as described here:\nhttps://stackoverflow.com/a/68649685/2664521\nUsing https://developer.android.com/training/data-storage/room/migrating-db-versions#export-schema prevented the need of moving the file","body":"When using this solution, i had to move the DB definition as described here: <a href=\"https://stackoverflow.com/a/68649685/2664521\">stackoverflow.com/a/68649685/2664521</a> Using <a href=\"https://developer.android.com/training/data-storage/room/migrating-db-versions#export-schema\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room/&hellip;</a> prevented the need of moving the file"}],"tags":[],"owner":{"account_id":4331441,"reputation":3510,"user_id":3536857,"display_name":"Ivanov Maksim"},"comment_count":6,"down_vote_count":1,"up_vote_count":339,"is_accepted":false,"score":338,"last_activity_date":1584901567,"creation_date":1518042188,"answer_id":48674264,"question_id":44322178,"body_markdown":"Kotlin? Here we go: \r\n\r\n    android {\r\n\r\n        // ... (compileSdkVersion, buildToolsVersion, etc)\r\n\r\n        defaultConfig {\r\n\r\n            // ... (applicationId, miSdkVersion, etc)\r\n\r\n            kapt {\r\n        \t    arguments {\r\n        \t\t    arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;)\r\n        \t    }\r\n            }\r\n        }\r\n\r\n        buildTypes {\r\n            // ... (buildTypes, compileOptions, etc)\r\n        }\r\n    }\r\n\r\n    //...\r\n\r\n\r\nDon&#39;t forget about plugin: \r\n\r\n`apply plugin: &#39;kotlin-kapt&#39;`\r\n\r\nFor more information about kotlin annotation processor please visit: \r\n[Kotlin docs][1]\r\n\r\n\r\n  [1]: http://kotlinlang.org/docs/reference/kapt.html","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Kotlin? Here we go: </p>\n\n<pre><code>android {\n\n    // ... (compileSdkVersion, buildToolsVersion, etc)\n\n    defaultConfig {\n\n        // ... (applicationId, miSdkVersion, etc)\n\n        kapt {\n            arguments {\n                arg(\"room.schemaLocation\", \"$projectDir/schemas\")\n            }\n        }\n    }\n\n    buildTypes {\n        // ... (buildTypes, compileOptions, etc)\n    }\n}\n\n//...\n</code></pre>\n\n<p>Don't forget about plugin: </p>\n\n<p><code>apply plugin: 'kotlin-kapt'</code></p>\n\n<p>For more information about kotlin annotation processor please visit: \n<a href=\"http://kotlinlang.org/docs/reference/kapt.html\" rel=\"noreferrer\">Kotlin docs</a></p>\n"},{"comments":[{"owner":{"account_id":16318496,"reputation":851,"user_id":11784905,"display_name":"Hamza Sharaf"},"score":0,"creation_date":1665139657,"post_id":53116123,"comment_id":130635038,"body_markdown":"this causes some conflicts with `Hilt`, just replace the `arguments =` with `arguments +=`","body":"this causes some conflicts with <code>Hilt</code>, just replace the <code>arguments =</code> with <code>arguments +=</code>"}],"tags":[],"owner":{"account_id":5435375,"reputation":7470,"user_id":4325011,"accept_rate":75,"display_name":"chebaby"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1541151912,"creation_date":1541151912,"answer_id":53116123,"question_id":44322178,"body_markdown":"@mikejonesguy [answer][1] is perfect, just in case you plan to test room migrations (recommended), add the schema location to the source sets.\r\n\r\n&gt; In your build.gradle file you specify a folder to place these\r\n&gt; generated schema JSON files. As you update your schema, you’ll end up\r\n&gt; with several JSON files, one for every version. Make sure you commit\r\n&gt; every generated file to source control. The next time you increase\r\n&gt; your version number again, Room will be able to use the JSON file for\r\n&gt; testing.\r\n&gt; \r\n&gt; - Florina Muntenescu ([source][2])\r\n\r\n\r\n**build.gradle**\r\n\r\n\r\n    android {\r\n        \r\n        // [...]\r\n\r\n        defaultConfig {\r\n            \r\n            // [...]\r\n\r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments = [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\r\n                }\r\n            }\r\n        }\r\n\r\n        // add the schema location to the source sets\r\n        // used by Room, to test migrations\r\n        sourceSets {\r\n            androidTest.assets.srcDirs += files(&quot;$projectDir/schemas&quot;.toString())\r\n        }\r\n\r\n        // [...]\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/44424908/4325011\r\n  [2]: https://medium.com/androiddevelopers/testing-room-migrations-be93cdb0d975","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>@mikejonesguy <a href=\"https://stackoverflow.com/a/44424908/4325011\">answer</a> is perfect, just in case you plan to test room migrations (recommended), add the schema location to the source sets.</p>\n\n<blockquote>\n  <p>In your build.gradle file you specify a folder to place these\n  generated schema JSON files. As you update your schema, you’ll end up\n  with several JSON files, one for every version. Make sure you commit\n  every generated file to source control. The next time you increase\n  your version number again, Room will be able to use the JSON file for\n  testing.</p>\n  \n  <ul>\n  <li>Florina Muntenescu (<a href=\"https://medium.com/androiddevelopers/testing-room-migrations-be93cdb0d975\" rel=\"noreferrer\">source</a>)</li>\n  </ul>\n</blockquote>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>android {\n\n    // [...]\n\n    defaultConfig {\n\n        // [...]\n\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [\"room.schemaLocation\": \"$projectDir/schemas\".toString()]\n            }\n        }\n    }\n\n    // add the schema location to the source sets\n    // used by Room, to test migrations\n    sourceSets {\n        androidTest.assets.srcDirs += files(\"$projectDir/schemas\".toString())\n    }\n\n    // [...]\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4196987,"reputation":2158,"user_id":3438172,"display_name":"Ace"},"score":1,"creation_date":1583665828,"post_id":54366985,"comment_id":107187261,"body_markdown":"in step[2], are you sure it&#39;s the `build.gradle(project:????)` and not `build.gradle(app:????)`?","body":"in step[2], are you sure it&#39;s the <code>build.gradle(project:????)</code> and not <code>build.gradle(app:????)</code>?"}],"tags":[],"owner":{"account_id":11334150,"reputation":330,"user_id":8310659,"display_name":"LunaRivolxoxo"},"comment_count":1,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1548425521,"creation_date":1548425521,"answer_id":54366985,"question_id":44322178,"body_markdown":"Above answers are correct. This version is easy to follow:\r\n\r\nBecause &quot;Schema export directory is not provided to the annotation processor&quot;, So we need to provide the directory for schema export:\r\n\r\n&gt;  Step [1] In your file which extends the RoomDatabase, change the line to:\r\n\r\n    `@Database(entities = ???.class,version = 1, exportSchema = true)`\r\n Or\r\n\r\n    `@Database(entities = ???.class,version = 1)` \r\n(because the default value is always true)\r\n\r\n &gt; Step [2] In your build.gradle(project:????) file, inside the **defaultConfig{ }** (which is inside **android{ }** big section), add the **javaCompileOptions{ }** section, it will be like:\r\n\r\n             android{\r\n                    defaultConfig{\r\n                          //javaComplieOptions SECTION\r\n                          javaCompileOptions {\r\n                                annotationProcessorOptions {\r\n                                         arguments = [&quot;room.schemaLocation&quot;:&quot;$projectDir/schemas&quot;.toString()]\r\n                                }\r\n                           }\r\n                          //Other SECTION\r\n                          ...\r\n                    }\r\n             }\r\n**$projectDir**:is a variable name, you cannot change it. it will get your own project directory\r\n\r\n**schemas**:is a string, you can change it to any you like. For example:\r\n`&quot;$projectDir/MyOwnSchemas&quot;.toString()`\r\n","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Above answers are correct. This version is easy to follow:</p>\n\n<p>Because \"Schema export directory is not provided to the annotation processor\", So we need to provide the directory for schema export:</p>\n\n<blockquote>\n  <p>Step [1] In your file which extends the RoomDatabase, change the line to:</p>\n</blockquote>\n\n<pre><code>`@Database(entities = ???.class,version = 1, exportSchema = true)`\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>`@Database(entities = ???.class,version = 1)` \n</code></pre>\n\n<p>(because the default value is always true)</p>\n\n<blockquote>\n  <p>Step [2] In your build.gradle(project:????) file, inside the <strong>defaultConfig{ }</strong> (which is inside <strong>android{ }</strong> big section), add the <strong>javaCompileOptions{ }</strong> section, it will be like:</p>\n</blockquote>\n\n<pre><code>         android{\n                defaultConfig{\n                      //javaComplieOptions SECTION\n                      javaCompileOptions {\n                            annotationProcessorOptions {\n                                     arguments = [\"room.schemaLocation\":\"$projectDir/schemas\".toString()]\n                            }\n                       }\n                      //Other SECTION\n                      ...\n                }\n         }\n</code></pre>\n\n<p><strong>$projectDir</strong>:is a variable name, you cannot change it. it will get your own project directory</p>\n\n<p><strong>schemas</strong>:is a string, you can change it to any you like. For example:\n<code>\"$projectDir/MyOwnSchemas\".toString()</code></p>\n"},{"comments":[{"owner":{"account_id":1301136,"reputation":2793,"user_id":1450409,"accept_rate":60,"display_name":"nyxee"},"score":0,"creation_date":1586209336,"post_id":57920156,"comment_id":108040257,"body_markdown":"Nothing is working for me either. I am using Kotlin.","body":"Nothing is working for me either. I am using Kotlin."},{"owner":{"account_id":7139664,"reputation":50276,"user_id":5457853,"accept_rate":75,"display_name":"Thracian"},"score":0,"creation_date":1598790877,"post_id":57920156,"comment_id":112567134,"body_markdown":"How does this answer work? arguments is a MutableMap, `val arguments: MutableMap&lt;String, String&gt;` and gives compile error when you try to assign anything, and adding with `arguments[&quot;room.schemaLocation&quot;] =&quot;$projectDir/schemas&quot;`does not work for me. Other answer also does not work.","body":"How does this answer work? arguments is a MutableMap, <code>val arguments: MutableMap&lt;String, String&gt;</code> and gives compile error when you try to assign anything, and adding with <code>arguments[&quot;room.schemaLocation&quot;] =&quot;$projectDir&#47;schemas&quot;</code>does not work for me. Other answer also does not work."}],"tags":[],"owner":{"account_id":8610734,"reputation":1060,"user_id":6449273,"display_name":"jsa"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1568364190,"creation_date":1568364190,"answer_id":57920156,"question_id":44322178,"body_markdown":"I use `.kts` Gradle files (Kotlin Gradle DSL) and the `kotlin-kapt` plugin but I still get a script compilation error when I use Ivanov Maksim&#39;s answer.\r\n\r\n    Unresolved reference: kapt\r\n\r\nFor me this was the only thing which worked:\r\n\r\n    android {\r\n        defaultConfig {\r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments = mapOf(&quot;room.schemaLocation&quot; to &quot;$projectDir/schemas&quot;)\r\n                }\r\n            }\r\n        }\r\n    }","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>I use <code>.kts</code> Gradle files (Kotlin Gradle DSL) and the <code>kotlin-kapt</code> plugin but I still get a script compilation error when I use Ivanov Maksim's answer.</p>\n\n<pre><code>Unresolved reference: kapt\n</code></pre>\n\n<p>For me this was the only thing which worked:</p>\n\n<pre><code>android {\n    defaultConfig {\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = mapOf(\"room.schemaLocation\" to \"$projectDir/schemas\")\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9470871,"reputation":1070,"user_id":7041761,"display_name":"Neuron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569490037,"creation_date":1569490037,"answer_id":58113646,"question_id":44322178,"body_markdown":"Probably you didn&#39;t add your room class to child `RoomDatabase` child class in `@Database(entities = {your_classes})`","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Probably you didn't add your room class to child <code>RoomDatabase</code> child class in <code>@Database(entities = {your_classes})</code></p>\n"},{"comments":[{"owner":{"account_id":10059343,"reputation":4094,"user_id":7436566,"display_name":"OhhhThatVarun"},"score":1,"creation_date":1646373534,"post_id":65054667,"comment_id":126111707,"body_markdown":"So weird, mine was because of the import statement in DataBinding XML","body":"So weird, mine was because of the import statement in DataBinding XML"}],"tags":[],"owner":{"account_id":10081736,"reputation":1651,"user_id":7451779,"display_name":"Haider Malik"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606599174,"creation_date":1606599174,"answer_id":65054667,"question_id":44322178,"body_markdown":"If like me you recently moved certain classes to different packages ect. and you use android navigation. Make sure to change the argType to you match you new package address.\r\nfrom:\r\n\r\n    app:argType=&quot;com.example.app.old.Item&quot; \r\n\r\nto:\r\n\r\n    app:argType=&quot;com.example.app.new.Item&quot; \r\n\r\n","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>If like me you recently moved certain classes to different packages ect. and you use android navigation. Make sure to change the argType to you match you new package address.\nfrom:</p>\n<pre><code>app:argType=&quot;com.example.app.old.Item&quot; \n</code></pre>\n<p>to:</p>\n<pre><code>app:argType=&quot;com.example.app.new.Item&quot; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6503459,"reputation":3563,"user_id":5033303,"accept_rate":0,"display_name":"Ali Zarei"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1642851255,"creation_date":1642851255,"answer_id":70812387,"question_id":44322178,"body_markdown":"**Kotlin** way according to [official document][1]:\r\n\r\n    android {\r\n    ...\r\n    defaultConfig {\r\n        ...\r\n        javaCompileOptions {\r\n            annotationProcessorOptions {\r\n                arguments += mapOf(\r\n                    &quot;room.schemaLocation&quot; to &quot;$projectDir/schemas&quot;,\r\n                    &quot;room.incremental&quot; to &quot;true&quot;,\r\n                    &quot;room.expandProjection&quot; to &quot;true&quot;\r\n                )\r\n            }\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n  [1]: https://developer.android.com/jetpack/androidx/releases/room#compiler-options","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p><strong>Kotlin</strong> way according to <a href=\"https://developer.android.com/jetpack/androidx/releases/room#compiler-options\" rel=\"nofollow noreferrer\">official document</a>:</p>\n<pre><code>android {\n...\ndefaultConfig {\n    ...\n    javaCompileOptions {\n        annotationProcessorOptions {\n            arguments += mapOf(\n                &quot;room.schemaLocation&quot; to &quot;$projectDir/schemas&quot;,\n                &quot;room.incremental&quot; to &quot;true&quot;,\n                &quot;room.expandProjection&quot; to &quot;true&quot;\n            )\n        }\n    }\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13476330,"reputation":1002,"user_id":9723204,"display_name":"Hawklike"},"score":2,"creation_date":1667338261,"post_id":71451314,"comment_id":131143274,"body_markdown":"You can paste this wherever you want to the `build.gradle (:app)`.","body":"You can paste this wherever you want to the <code>build.gradle (:app)</code>."},{"owner":{"account_id":15034189,"reputation":79,"user_id":10851172,"display_name":"josh"},"score":0,"creation_date":1694586062,"post_id":71451314,"comment_id":135908883,"body_markdown":"where to paste this guys?","body":"where to paste this guys?"},{"owner":{"account_id":20511146,"reputation":250,"user_id":15052881,"display_name":"Programmer007"},"score":1,"creation_date":1694603499,"post_id":71451314,"comment_id":135912272,"body_markdown":"@josh you can paste in your defaultConfig tag in build.gradle (:app)","body":"@josh you can paste in your defaultConfig tag in build.gradle (:app)"},{"owner":{"account_id":3791,"reputation":67962,"user_id":5536,"accept_rate":75,"display_name":"Paul Stephenson"},"score":0,"creation_date":1702052401,"post_id":71451314,"comment_id":136854105,"body_markdown":"I was told to turn the single quotes into double quotes, but otherwise this worked for me!","body":"I was told to turn the single quotes into double quotes, but otherwise this worked for me!"},{"owner":{"account_id":22104302,"reputation":1425,"user_id":16360266,"display_name":"Eyjafl"},"score":0,"creation_date":1702059616,"post_id":71451314,"comment_id":136855186,"body_markdown":"@PaulStephenson Single quotes are used in Groovy DSL. In Kotlin DSL you should use double quotes.","body":"@PaulStephenson Single quotes are used in Groovy DSL. In Kotlin DSL you should use double quotes."}],"tags":[],"owner":{"account_id":22104302,"reputation":1425,"user_id":16360266,"display_name":"Eyjafl"},"comment_count":5,"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1702059932,"creation_date":1647102379,"answer_id":71451314,"question_id":44322178,"body_markdown":"For Kotlin KSP:\r\n```groovy\r\nksp {\r\n    arg(&#39;room.schemaLocation&#39;, &quot;$projectDir/schemas&quot;)\r\n}\r\n```\r\n\r\n(it&#39;s Groovy DSL, in Kotlin DSL use double quotes)","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>For Kotlin KSP:</p>\n<pre><code>ksp {\n    arg('room.schemaLocation', &quot;$projectDir/schemas&quot;)\n}\n</code></pre>\n<p>(it's Groovy DSL, in Kotlin DSL use double quotes)</p>\n"},{"tags":[],"owner":{"account_id":7656968,"reputation":638,"user_id":8949644,"display_name":"Sagar Balyan"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1666716562,"creation_date":1666716562,"answer_id":74197599,"question_id":44322178,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    kapt {\r\n      arguments {\r\n        arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;)\r\n      }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>kapt {\n  arguments {\n    arg(\"room.schemaLocation\", \"$projectDir/schemas\")\n  }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":10647346,"reputation":5559,"user_id":7839518,"display_name":"Tonnie"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1678809387,"creation_date":1678809387,"answer_id":75735523,"question_id":44322178,"body_markdown":"Just posting what worked for me using **`Kotlin DSL`** \r\n\r\n    defaultConfig {\r\n            applicationId = &quot;&quot;\r\n            minSdk = 26\r\n            targetSdk = 33\r\n            versionCode = 1\r\n            versionName = &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            vectorDrawables.useSupportLibrary = true\r\n            \r\n            //add this in the build.gradle.kts(app) file\r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments[&quot;room.schemaLocation&quot;] =\r\n                        &quot;$projectDir/schemas&quot;\r\n                }\r\n            }\r\n        }\r\n\r\nFor this to work you also need to set `exportSchema` to `true`\r\n\r\n    @Database(entities = [Entity::class], version = 1, exportSchema = true)\r\n    @TypeConverters(Converters::class)\r\n    abstract class ScoresDatabase : RoomDatabase() {\r\n    \r\n        abstract val dao: ScoresDAO\r\n    }\r\n\r\nTo confirm it worked, you should see the newly created ***schemas*** directory off the module root directory with the next build as illustrated below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0lM12.png","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Just posting what worked for me using <strong><code>Kotlin DSL</code></strong></p>\n<pre><code>defaultConfig {\n        applicationId = &quot;&quot;\n        minSdk = 26\n        targetSdk = 33\n        versionCode = 1\n        versionName = &quot;1.0&quot;\n\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables.useSupportLibrary = true\n        \n        //add this in the build.gradle.kts(app) file\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments[&quot;room.schemaLocation&quot;] =\n                    &quot;$projectDir/schemas&quot;\n            }\n        }\n    }\n</code></pre>\n<p>For this to work you also need to set <code>exportSchema</code> to <code>true</code></p>\n<pre><code>@Database(entities = [Entity::class], version = 1, exportSchema = true)\n@TypeConverters(Converters::class)\nabstract class ScoresDatabase : RoomDatabase() {\n\n    abstract val dao: ScoresDAO\n}\n</code></pre>\n<p>To confirm it worked, you should see the newly created <em><strong>schemas</strong></em> directory off the module root directory with the next build as illustrated below.</p>\n<p><a href=\"https://i.stack.imgur.com/0lM12.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0lM12.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":418826,"reputation":691,"user_id":795616,"display_name":"reznic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683024998,"creation_date":1683024998,"answer_id":76154141,"question_id":44322178,"body_markdown":"    // For javac or KAPT, configure using android DSL:\r\n    android {\r\n      ...\r\n      defaultConfig {\r\n        javaCompileOptions {\r\n          annotationProcessorOptions {\r\n            compilerArgumentProviders(\r\n              RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;))\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // For KSP, configure using KSP extension:\r\n    ksp {\r\n      arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\r\n    }","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<pre><code>// For javac or KAPT, configure using android DSL:\nandroid {\n  ...\n  defaultConfig {\n    javaCompileOptions {\n      annotationProcessorOptions {\n        compilerArgumentProviders(\n          RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;))\n        )\n      }\n    }\n  }\n}\n\n// For KSP, configure using KSP extension:\nksp {\n  arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1602694,"reputation":785,"user_id":1483448,"display_name":"polis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699548204,"creation_date":1699547766,"answer_id":77454900,"question_id":44322178,"body_markdown":"If you are using room with ksp in the module build you have to define RoomSchemaArgProvider\r\n\r\n    class RoomSchemaArgProvider(\r\n        @get:InputDirectory\r\n        @get:PathSensitive(PathSensitivity.RELATIVE)\r\n        val schemaDir: File\r\n    ) : CommandLineArgumentProvider {\r\n    \r\n        override fun asArguments(): Iterable&lt;String&gt; {\r\n            // Note: If you&#39;re using KSP, change the line below to return\r\n             return listOf(&quot;room.schemaLocation=${schemaDir.path}&quot;)\r\n    //        return listOf(&quot;-Aroom.schemaLocation=${schemaDir.path}&quot;)\r\n        }\r\n    }\r\n    \r\n    android {\r\n    \r\n    \r\n        // For KSP, configure using KSP extension:\r\n        ksp {\r\n            arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\r\n        }\r\n    }\r\n\r\n\r\nAnd then make sure that you have directory in app/schemas\r\nDo not know why it was not created automatically in my case. ","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>If you are using room with ksp in the module build you have to define RoomSchemaArgProvider</p>\n<pre><code>class RoomSchemaArgProvider(\n    @get:InputDirectory\n    @get:PathSensitive(PathSensitivity.RELATIVE)\n    val schemaDir: File\n) : CommandLineArgumentProvider {\n\n    override fun asArguments(): Iterable&lt;String&gt; {\n        // Note: If you're using KSP, change the line below to return\n         return listOf(&quot;room.schemaLocation=${schemaDir.path}&quot;)\n//        return listOf(&quot;-Aroom.schemaLocation=${schemaDir.path}&quot;)\n    }\n}\n\nandroid {\n\n\n    // For KSP, configure using KSP extension:\n    ksp {\n        arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\n    }\n}\n</code></pre>\n<p>And then make sure that you have directory in app/schemas\nDo not know why it was not created automatically in my case.</p>\n"}],"owner":{"account_id":3728672,"reputation":12411,"user_id":3101777,"accept_rate":79,"display_name":"Misha Akopov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197199,"favorite_count":0,"down_vote_count":0,"up_vote_count":545,"accepted_answer_id":44645943,"answer_count":14,"score":545,"last_activity_date":1702059932,"creation_date":1496384738,"question_id":44322178,"body_markdown":"I am using Android Database Component Room\r\n\r\nI&#39;ve configured everything, but when I compile, Android Studio gives me this warning:\r\n\r\n&gt; Schema export directory is not provided to the annotation processor so\r\n&gt; we cannot export the schema. You can either provide\r\n&gt; `room.schemaLocation` annotation processor argument OR set\r\n&gt; exportSchema to false.\r\n\r\nAs I understand it is the location where DB file will be located\r\n\r\nHow can it affect my app? What is the best practice here? Should I use the default location (`false` value)?","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>I am using Android Database Component Room</p>\n\n<p>I've configured everything, but when I compile, Android Studio gives me this warning:</p>\n\n<blockquote>\n  <p>Schema export directory is not provided to the annotation processor so\n  we cannot export the schema. You can either provide\n  <code>room.schemaLocation</code> annotation processor argument OR set\n  exportSchema to false.</p>\n</blockquote>\n\n<p>As I understand it is the location where DB file will be located</p>\n\n<p>How can it affect my app? What is the best practice here? Should I use the default location (<code>false</code> value)?</p>\n"},{"tags":["java","string","break","do-while"],"comments":[{"owner":{"account_id":788777,"reputation":28977,"user_id":857132,"accept_rate":69,"display_name":"John3136"},"score":0,"creation_date":1364863644,"post_id":15754299,"comment_id":22389450,"body_markdown":"Sounds like you want to check whether input `contains` &quot;/done&quot; rather than input `equals` &quot;/done&quot;.","body":"Sounds like you want to check whether input <code>contains</code> &quot;/done&quot; rather than input <code>equals</code> &quot;/done&quot;."},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1364863742,"post_id":15754299,"comment_id":22389480,"body_markdown":"whether the use types `/done` or is it part of a larger string","body":"whether the use types <code>&#47;done</code> or is it part of a larger string"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1364863859,"post_id":15754299,"comment_id":22389495,"body_markdown":"Do you actually enter &quot;/done&quot; on its own line?","body":"Do you actually enter &quot;/done&quot; on its own line?"},{"owner":{"account_id":2468345,"reputation":63,"user_id":2150881,"accept_rate":60,"display_name":"sega_one"},"score":0,"creation_date":1364864145,"post_id":15754299,"comment_id":22389558,"body_markdown":"John - yes, you&#39;re right, contains would work rather than equals. Would you put that within the while of the do-while loop?? .. Arun - user would have to input /done all at once within the string input. Not on it&#39;s own line - it could be on it&#39;s own line but it is not necessary. Just has to be &quot;/done&quot; together","body":"John - yes, you&#39;re right, contains would work rather than equals. Would you put that within the while of the do-while loop?? .. Arun - user would have to input /done all at once within the string input. Not on it&#39;s own line - it could be on it&#39;s own line but it is not necessary. Just has to be &quot;/done&quot; together"},{"owner":{"account_id":29412,"reputation":5855,"user_id":79450,"accept_rate":100,"display_name":"Catchwa"},"score":0,"creation_date":1364866600,"post_id":15754299,"comment_id":22390196,"body_markdown":"Even if you call `contains` it means your program won&#39;t break until the user hits the enter key. So I could type &quot;blah blah /done blah blah&lt;enter&gt;&quot; Is that what you want?","body":"Even if you call <code>contains</code> it means your program won&#39;t break until the user hits the enter key. So I could type &quot;blah blah /done blah blah&lt;enter&gt;&quot; Is that what you want?"},{"owner":{"account_id":2468345,"reputation":63,"user_id":2150881,"accept_rate":60,"display_name":"sega_one"},"score":0,"creation_date":1364866926,"post_id":15754299,"comment_id":22390282,"body_markdown":"I forgot to mention that part. If you press enter key after typing /done within the string, the program WILL terminate. If you press enter key without /done anywhere in the string/line, then it simply moves you to new line in eclipse console and continues user string input on a new line. I hope that clears it up a bit","body":"I forgot to mention that part. If you press enter key after typing /done within the string, the program WILL terminate. If you press enter key without /done anywhere in the string/line, then it simply moves you to new line in eclipse console and continues user string input on a new line. I hope that clears it up a bit"}],"answers":[{"tags":[],"owner":{"account_id":1891823,"reputation":1190,"user_id":1709700,"display_name":"Avik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418342022,"creation_date":1364990160,"answer_id":15786677,"question_id":15754299,"body_markdown":"             Scanner s=new Scanner(System.in);\r\n        \t String input = &quot;&quot;;\r\n        \t String[] parts;\r\n        \t System.out.println(&quot;Enter your string: &quot;);\r\n        \t while (true){\r\n        \t\t input=s.nextLine();\r\n        \t    if (input.contains(&quot;/done&quot;)){\r\n        \t    parts=input.split(&quot;/done&quot;);\r\n        \t    //Use parts[0] to do any processing you want with the part of the string entered before /done in that line\r\n        \t    \tbreak;\r\n        \t    }\r\n        \t}","title":"break program when user enters specific string into input","body":"<pre><code>         Scanner s=new Scanner(System.in);\n         String input = \"\";\n         String[] parts;\n         System.out.println(\"Enter your string: \");\n         while (true){\n             input=s.nextLine();\n            if (input.contains(\"/done\")){\n            parts=input.split(\"/done\");\n            //Use parts[0] to do any processing you want with the part of the string entered before /done in that line\n                break;\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6210818,"reputation":729,"user_id":4837155,"accept_rate":46,"display_name":"Harshit Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435556457,"creation_date":1435556457,"answer_id":31108545,"question_id":15754299,"body_markdown":"I think this will work fine\r\n    \r\n    Scanner scanner = new Scanner(System.in);\r\n\t\tString input = &quot;&quot;;\r\n\t\tSystem.out.println(&quot;Enter your string: &quot;);\r\n\t\t\tdo {\r\n\t\t\tinput = scanner.nextLine();\r\n\t\t} while (!input.contains(&quot;/done&quot;));\r\n\t\tSystem.out.print(&quot;Rest of program here..&quot;);","title":"break program when user enters specific string into input","body":"<p>I think this will work fine</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);\n    String input = \"\";\n    System.out.println(\"Enter your string: \");\n        do {\n        input = scanner.nextLine();\n    } while (!input.contains(\"/done\"));\n    System.out.print(\"Rest of program here..\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702059818,"creation_date":1684794779,"answer_id":76310270,"question_id":15754299,"body_markdown":"You almost had it, instead of `equals`, use `contains`.\r\n\r\n```java\r\nScanner scanner = new Scanner(System.in);\r\nString input = &quot;&quot;;\r\nSystem.out.println(&quot;Enter your string: &quot;);\r\n\r\ndo {\r\n    input = scanner.nextLine();\r\n    System.out.print(&quot;Rest of program here..&quot;);\r\n}\r\n\r\nwhile (!input.contains(&quot;/done&quot;));\r\n```","title":"break program when user enters specific string into input","body":"<p>You almost had it, instead of <code>equals</code>, use <code>contains</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scanner = new Scanner(System.in);\nString input = &quot;&quot;;\nSystem.out.println(&quot;Enter your string: &quot;);\n\ndo {\n    input = scanner.nextLine();\n    System.out.print(&quot;Rest of program here..&quot;);\n}\n\nwhile (!input.contains(&quot;/done&quot;));\n</code></pre>\n"}],"owner":{"account_id":2468345,"reputation":63,"user_id":2150881,"accept_rate":60,"display_name":"sega_one"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7297,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1702059818,"creation_date":1364863493,"question_id":15754299,"body_markdown":"I want to make it so that the user inputs some string, and the program takes console input until user types &quot;/done&quot;.. so here&#39;s how it would work:\r\n\r\n1. print to user: enter your string\r\n\r\n2. user enters: hello eclipse. \r\n\r\nhi test blah blah \r\n\r\nbla \r\n                    456 \r\n                  testmore              /done\r\n\r\nAs soon as user enters /done within any string of any size, the program breaks. The program would NOT end if you hit &quot;enter&quot; key. It would only end if you type in /done.. How I setup my program so far:\r\n\r\n    Scanner 123 = new Scanner(System.in);\r\n    string input = &quot;&quot;;\r\n    System.out.println(&quot;Enter your string: &quot;);\r\n    \r\n    do {\r\n        input = 123.nextLine();\r\n        System.out.print(&quot;Rest of program here..&quot;);\r\n    }\r\n    \r\n    while (!input.equals(&quot;/done&quot;));\r\n\r\nI tried putting under while loop there something like below but I don&#39;t think I am doing it right.\r\n\r\n    while (!input.equals(&quot;/done&quot;));\r\n        if input.equals(&quot;/done&quot;);\r\n        break;\r\n    }\r\n\r\nI understand that with a do-while loop, it continues as long as boolean in while is false. So for my program, program takes inputs until user types in /done so boolean is false until string /done in inputted. Then according to the logic above, the program breaks as soon as input equals &quot;/done&quot;\r\n\r\nAny ideas on what I&#39;m doing wrong?","title":"break program when user enters specific string into input","body":"<p>I want to make it so that the user inputs some string, and the program takes console input until user types \"/done\".. so here's how it would work:</p>\n\n<ol>\n<li><p>print to user: enter your string</p></li>\n<li><p>user enters: hello eclipse. </p></li>\n</ol>\n\n<p>hi test blah blah </p>\n\n<p>bla \n                    456 \n                  testmore              /done</p>\n\n<p>As soon as user enters /done within any string of any size, the program breaks. The program would NOT end if you hit \"enter\" key. It would only end if you type in /done.. How I setup my program so far:</p>\n\n<pre><code>Scanner 123 = new Scanner(System.in);\nstring input = \"\";\nSystem.out.println(\"Enter your string: \");\n\ndo {\n    input = 123.nextLine();\n    System.out.print(\"Rest of program here..\");\n}\n\nwhile (!input.equals(\"/done\"));\n</code></pre>\n\n<p>I tried putting under while loop there something like below but I don't think I am doing it right.</p>\n\n<pre><code>while (!input.equals(\"/done\"));\n    if input.equals(\"/done\");\n    break;\n}\n</code></pre>\n\n<p>I understand that with a do-while loop, it continues as long as boolean in while is false. So for my program, program takes inputs until user types in /done so boolean is false until string /done in inputted. Then according to the logic above, the program breaks as soon as input equals \"/done\"</p>\n\n<p>Any ideas on what I'm doing wrong?</p>\n"},{"tags":["python","java","google-cloud-dataflow","user-defined-functions","apache-beam"],"comments":[{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1674137066,"post_id":75150047,"comment_id":132653750,"body_markdown":"Yes, multi-language pipelines is the best way to achieve this. Can you look into this class which will allow you to execute an arbitrary element-wise Python function on a PCollection - https://github.com/apache/beam/blob/master/sdks/java/extensions/python/src/main/java/org/apache/beam/sdk/extensions/python/transforms/PythonMap.java","body":"Yes, multi-language pipelines is the best way to achieve this. Can you look into this class which will allow you to execute an arbitrary element-wise Python function on a PCollection - <a href=\"https://github.com/apache/beam/blob/master/sdks/java/extensions/python/src/main/java/org/apache/beam/sdk/extensions/python/transforms/PythonMap.java\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/sdks/java/extensions/pyth&zwnj;&#8203;on/&hellip;</a>"},{"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"score":0,"creation_date":1674230079,"post_id":75150047,"comment_id":132676837,"body_markdown":"Thank you for your response, @chamikara.\n\nI was able successfully get the SklearnMnistClassification pipeline from the examples  to work in Dataflow (https://github.com/apache/beam/blob/master/examples/java/src/main/java/org/apache/beam/examples/multilanguage/SklearnMnistClassification.java).\n\nHowever, I am running into a lot of issues getting the multi-lang pipelines to run locally. The pipelines are either throwing an error, or never terminate. I&#39;ve got the Python Expansion service running in a virtual environment, but I am wondering if I need a Docker image running as well?","body":"Thank you for your response, @chamikara.  I was able successfully get the SklearnMnistClassification pipeline from the examples  to work in Dataflow (<a href=\"https://github.com/apache/beam/blob/master/examples/java/src/main/java/org/apache/beam/examples/multilanguage/SklearnMnistClassification.java\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/examples/java/src/main/j&zwnj;&#8203;ava/&hellip;</a>).  However, I am running into a lot of issues getting the multi-lang pipelines to run locally. The pipelines are either throwing an error, or never terminate. I&#39;ve got the Python Expansion service running in a virtual environment, but I am wondering if I need a Docker image running as well?"},{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1674320662,"post_id":75150047,"comment_id":132691573,"body_markdown":"You just need to have Docker installed.  Can you try the guide here which has specific instructions for running locally using DirectRunner ? https://beam.apache.org/documentation/sdks/java-multi-language-pipelines/","body":"You just need to have Docker installed.  Can you try the guide here which has specific instructions for running locally using DirectRunner ? <a href=\"https://beam.apache.org/documentation/sdks/java-multi-language-pipelines/\" rel=\"nofollow noreferrer\">beam.apache.org/documentation/sdks/&hellip;</a>"},{"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"score":0,"creation_date":1674488552,"post_id":75150047,"comment_id":132719271,"body_markdown":"Yeah, I think I know what the issue is. I am not able to use Docker Desktop since we don&#39;t have a license. So I am using a workaround with Lima and Dockerd, so I think there&#39;s some miscommunication happening.\n\nI have established that I am able to run the Pipeline locally and its contacting the Python SDK in my venv. What seems to be happening is that it is not sending anything back to the Java pipeline. I&#39;ll update here if I am able to get things working","body":"Yeah, I think I know what the issue is. I am not able to use Docker Desktop since we don&#39;t have a license. So I am using a workaround with Lima and Dockerd, so I think there&#39;s some miscommunication happening.  I have established that I am able to run the Pipeline locally and its contacting the Python SDK in my venv. What seems to be happening is that it is not sending anything back to the Java pipeline. I&#39;ll update here if I am able to get things working"},{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1674579283,"post_id":75150047,"comment_id":132742159,"body_markdown":"If this got resolved, appreciate if you can add an answer so that others who run into similar situations can benefit from it.","body":"If this got resolved, appreciate if you can add an answer so that others who run into similar situations can benefit from it."},{"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"score":0,"creation_date":1674666445,"post_id":75150047,"comment_id":132764807,"body_markdown":"I will close the question, but I wasn&#39;t able to get things working locally. I did establish that the Java pipeline was communicating with the Beam SDK in the virtual environment, but it seemed like the Python code was not handing anything back.\n\nI do appreciate the help, @chamikara","body":"I will close the question, but I wasn&#39;t able to get things working locally. I did establish that the Java pipeline was communicating with the Beam SDK in the virtual environment, but it seemed like the Python code was not handing anything back.  I do appreciate the help, @chamikara"}],"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1702058975,"creation_date":1673976157,"question_id":75150047,"body_markdown":"I am currently trying to add execution of Python UDFs in a Java Dataflow pipeline. These UDFs would potentially employ third-party libraries and multiple modules.\r\n\r\nI have been reading a lot about Apache Beam multi-language pipelines, but I am becoming less certain that is the way to achieve this. I&#39;ll first summarize my understanding of how multi-language pipelines are working (I&#39;m kind of hoping I&#39;m missing or misunderstanding something), before getting to my questions.\r\n\r\n# Beam Multi-language Pipelines\r\nThe main purpose of a multi-language pipeline is to execute *transforms* written in another language; in my case executing transforms in the Python Beam SDK in a pipeline using the Java Beam SDK. \r\n\r\nThe Python Beam SDK would be running in an expansion service, and any transforms, standard or custom, would be accessed through the URN (path to the module). I believe this expansion service can be containerized, but I can&#39;t find the documentation so I may be wrong on that.\r\n\r\nTherefore, if I want to execute arbitrary Python code, I would need to either find a high level transform capable of accepting and running arbitrary code, or write my own expansion service to handle executing the UDFs.\r\n\r\n\r\n# What I&#39;ve tried\r\nI have tried creating a simple WordCount pipeline in Java and running an expansion service locally in a Python virtual environment. I&#39;ve been using unit tests to pass in a file and output the word counts which works fine in just Java. \r\n\r\nHowever, I am having issues setting up the transforms like in the [Beam documentation here](https://beam.apache.org/documentation/programming-guide/#1312-creating-cross-language-python-transforms). I am not able to import PythonExternalTransform and call to a method running there, so I have not successfully executed a multi-language pipeline yet. \r\n\r\nFor my local pipeline I am using 2.34.0 for the Apache Beam dependencies. I&#39;ve tried up to version 2.43.0 but have not been able to get it to work.\r\n\r\n\r\n# Questions\r\n1. Are multi-language pipelines the best way to achieve executing Python UDFs in Dataflow? Would I need to write my own expansion service?\r\n2. If multi-language pipelines are not the best way, what other options are available to me, if any? Should I look further into creating a custom container image?","title":"Execute Python UDFs in a Java Dataflow Pipeline?","body":"<p>I am currently trying to add execution of Python UDFs in a Java Dataflow pipeline. These UDFs would potentially employ third-party libraries and multiple modules.</p>\n<p>I have been reading a lot about Apache Beam multi-language pipelines, but I am becoming less certain that is the way to achieve this. I'll first summarize my understanding of how multi-language pipelines are working (I'm kind of hoping I'm missing or misunderstanding something), before getting to my questions.</p>\n<h1>Beam Multi-language Pipelines</h1>\n<p>The main purpose of a multi-language pipeline is to execute <em>transforms</em> written in another language; in my case executing transforms in the Python Beam SDK in a pipeline using the Java Beam SDK.</p>\n<p>The Python Beam SDK would be running in an expansion service, and any transforms, standard or custom, would be accessed through the URN (path to the module). I believe this expansion service can be containerized, but I can't find the documentation so I may be wrong on that.</p>\n<p>Therefore, if I want to execute arbitrary Python code, I would need to either find a high level transform capable of accepting and running arbitrary code, or write my own expansion service to handle executing the UDFs.</p>\n<h1>What I've tried</h1>\n<p>I have tried creating a simple WordCount pipeline in Java and running an expansion service locally in a Python virtual environment. I've been using unit tests to pass in a file and output the word counts which works fine in just Java.</p>\n<p>However, I am having issues setting up the transforms like in the <a href=\"https://beam.apache.org/documentation/programming-guide/#1312-creating-cross-language-python-transforms\" rel=\"nofollow noreferrer\">Beam documentation here</a>. I am not able to import PythonExternalTransform and call to a method running there, so I have not successfully executed a multi-language pipeline yet.</p>\n<p>For my local pipeline I am using 2.34.0 for the Apache Beam dependencies. I've tried up to version 2.43.0 but have not been able to get it to work.</p>\n<h1>Questions</h1>\n<ol>\n<li>Are multi-language pipelines the best way to achieve executing Python UDFs in Dataflow? Would I need to write my own expansion service?</li>\n<li>If multi-language pipelines are not the best way, what other options are available to me, if any? Should I look further into creating a custom container image?</li>\n</ol>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1701894960,"post_id":77616132,"comment_id":136832948,"body_markdown":"Look at [Java says FileNotFoundException but file exists](https://stackoverflow.com/q/19307622/). But having shown this, you&#39;re probably much better off getting the data not as a file, but rather as a resource:  [open resource with relative path in Java](https://stackoverflow.com/q/573679/). Also, check out [What&#39;s the difference between a Resource, URI, URL, Path and File in Java?](https://stackoverflow.com/q/27845223/)","body":"Look at <a href=\"https://stackoverflow.com/q/19307622/\">Java says FileNotFoundException but file exists</a>. But having shown this, you&#39;re probably much better off getting the data not as a file, but rather as a resource:  <a href=\"https://stackoverflow.com/q/573679/\">open resource with relative path in Java</a>. Also, check out <a href=\"https://stackoverflow.com/q/27845223/\">What&#39;s the difference between a Resource, URI, URL, Path and File in Java?</a>"},{"owner":{"account_id":6401062,"reputation":180,"user_id":4963694,"display_name":"Captain Chaos"},"score":0,"creation_date":1701895969,"post_id":77616132,"comment_id":136833113,"body_markdown":"Your directory structure is hard to read, can you show a screenshot or otherwise improve it? I suspect this is as simple as the \\path to your config \\file you give the program, and the actual path, are different. But we can&#39;t tell without more details.","body":"Your directory structure is hard to read, can you show a screenshot or otherwise improve it? I suspect this is as simple as the \\path to your config \\file you give the program, and the actual path, are different. But we can&#39;t tell without more details."},{"owner":{"account_id":30084126,"reputation":1,"user_id":23055089,"display_name":"Code Champ"},"score":0,"creation_date":1701896674,"post_id":77616132,"comment_id":136833244,"body_markdown":"In this `resourcesloader.class.getClass().getResource(&quot;repository/SSL-Key/cert.jks&quot;).toString()\n` the resourcesloader is the class where I want to read my config file from? Or it should be config file class?","body":"In this <code>resourcesloader.class.getClass().getResource(&quot;repository&#47;SSL&zwnj;&#8203;-Key&#47;cert.jks&quot;).toSt&zwnj;&#8203;ring() </code> the resourcesloader is the class where I want to read my config file from? Or it should be config file class?"}],"answers":[{"tags":[],"owner":{"account_id":230362,"reputation":28330,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702058725,"creation_date":1702058725,"answer_id":77628442,"question_id":77616132,"body_markdown":"It is trying to load the file from:  \r\n`/configuration/jarvis-tags/ConfigurableJarvisTags.json`\r\ni.e. from the root.\r\n\r\nYou either need to make sure you current directory (when running the code) is `projects` and use the relative path:  \r\n`configuration/jarvis-tags/ConfigurableJarvisTags.json`\r\n\r\nor (better) explicitly resolve and use the full path:  \r\n`/full/path/to/project/configuration/jarvis-tags/ConfigurableJarvisTags.json`","title":"Reading Json config from different directory of same package and getting its path","body":"<p>It is trying to load the file from:<br />\n<code>/configuration/jarvis-tags/ConfigurableJarvisTags.json</code>\ni.e. from the root.</p>\n<p>You either need to make sure you current directory (when running the code) is <code>projects</code> and use the relative path:<br />\n<code>configuration/jarvis-tags/ConfigurableJarvisTags.json</code></p>\n<p>or (better) explicitly resolve and use the full path:<br />\n<code>/full/path/to/project/configuration/jarvis-tags/ConfigurableJarvisTags.json</code></p>\n"}],"owner":{"account_id":30084126,"reputation":1,"user_id":23055089,"display_name":"Code Champ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702060188,"answer_count":1,"score":-1,"last_activity_date":1702058726,"creation_date":1701894684,"question_id":77616132,"body_markdown":"I&#39;m working on a project and I&#39;m trying to read Json Config file.\r\nBut the problem is I&#39;m getting java.io.FileNotFoundException exception whenever I run my class.\r\nMy Project Structure is \r\n```\r\nproject |\r\n---&gt; configuration |\r\n-------&gt; Json file directory |\r\n-----------&gt; Json File |\r\n---&gt; src\r\n------&gt; My class directory|\r\n---------&gt; MyClass |\r\n---&gt; test |\r\n------&gt; My testClass Directory |\r\n----------&gt; MyClassTest |\r\n```\r\nMy code for reference :\r\n\r\n```\r\ntry {\r\n            final InputStream pathToConfigurableJarvisTagFile = new FileInputStream(&quot;/configuration/jarvis-tags/ConfigurableJarvisTags.json&quot;);\r\n\r\n            fileReader = new InputStreamReader(pathToConfigurableJarvisTagFile, StandardCharsets.UTF_8);\r\n\r\n```\r\n\r\nI got the below exception \r\n```\r\njava.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\r\n    [junit] java.lang.RuntimeException: java.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\r\n```\r\nIt is not able to find the file. How do I modify the above code to read config file/get the path of file from a different folder? \r\n\r\n\r\n\r\nI tried this https://stackoverflow.com/questions/4164011/how-to-get-correct-path-of-configuration-file","title":"Reading Json config from different directory of same package and getting its path","body":"<p>I'm working on a project and I'm trying to read Json Config file.\nBut the problem is I'm getting java.io.FileNotFoundException exception whenever I run my class.\nMy Project Structure is</p>\n<pre><code>project |\n---&gt; configuration |\n-------&gt; Json file directory |\n-----------&gt; Json File |\n---&gt; src\n------&gt; My class directory|\n---------&gt; MyClass |\n---&gt; test |\n------&gt; My testClass Directory |\n----------&gt; MyClassTest |\n</code></pre>\n<p>My code for reference :</p>\n<pre><code>try {\n            final InputStream pathToConfigurableJarvisTagFile = new FileInputStream(&quot;/configuration/jarvis-tags/ConfigurableJarvisTags.json&quot;);\n\n            fileReader = new InputStreamReader(pathToConfigurableJarvisTagFile, StandardCharsets.UTF_8);\n\n</code></pre>\n<p>I got the below exception</p>\n<pre><code>java.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\n    [junit] java.lang.RuntimeException: java.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\n</code></pre>\n<p>It is not able to find the file. How do I modify the above code to read config file/get the path of file from a different folder?</p>\n<p>I tried this <a href=\"https://stackoverflow.com/questions/4164011/how-to-get-correct-path-of-configuration-file\">How to get correct path of configuration file?</a></p>\n"},{"tags":["java","eclipse","tomcat","openshift"],"comments":[{"owner":{"account_id":7039380,"reputation":374,"user_id":5392317,"display_name":"wilsonW"},"score":0,"creation_date":1494587359,"post_id":43936279,"comment_id":74904556,"body_markdown":"Are you sure this must come from github only? Other git services arn&#39;t allowed?","body":"Are you sure this must come from github only? Other git services arn&#39;t allowed?"}],"answers":[{"comments":[{"owner":{"account_id":9449559,"reputation":31,"user_id":7026978,"display_name":"brecht ph"},"score":0,"creation_date":1494603202,"post_id":43936816,"comment_id":74915329,"body_markdown":"Ill give it a shot, you dont know by any chance an easier host where i can just can upload an WAR file?","body":"Ill give it a shot, you dont know by any chance an easier host where i can just can upload an WAR file?"},{"owner":{"account_id":43778,"reputation":57969,"user_id":128141,"display_name":"Graham Dumpleton"},"score":0,"creation_date":1494650006,"post_id":43936816,"comment_id":74930942,"body_markdown":"It isn&#39;t that simple. See https://blog.openshift.com/deploying-from-private-git-repositories/ and https://docs.openshift.com/online/dev_guide/builds/build_inputs.html#source-clone-secrets","body":"It isn&#39;t that simple. See <a href=\"https://blog.openshift.com/deploying-from-private-git-repositories/\" rel=\"nofollow noreferrer\">blog.openshift.com/deploying-from-private-git-repositories</a> and <a href=\"https://docs.openshift.com/online/dev_guide/builds/build_inputs.html#source-clone-secrets\" rel=\"nofollow noreferrer\">docs.openshift.com/online/dev_guide/builds/&hellip;</a>"},{"owner":{"account_id":7039380,"reputation":374,"user_id":5392317,"display_name":"wilsonW"},"score":0,"creation_date":1494837581,"post_id":43936816,"comment_id":74979364,"body_markdown":"@GrahamDumpleton Sure this is not a &quot;best practive&quot; at all, but i works fine. I tryed it for some developement/tests, give it a try yourself if you want... It is the simplest answer i can give for his requierements.","body":"@GrahamDumpleton Sure this is not a &quot;best practive&quot; at all, but i works fine. I tryed it for some developement/tests, give it a try yourself if you want... It is the simplest answer i can give for his requierements."},{"owner":{"account_id":7039380,"reputation":374,"user_id":5392317,"display_name":"wilsonW"},"score":0,"creation_date":1494837585,"post_id":43936816,"comment_id":74979366,"body_markdown":"@brechtph I don&#39;t know any other free provider like openshift. You should give one more try in it, the CI/CD provided by openshift is amazing :)","body":"@brechtph I don&#39;t know any other free provider like openshift. You should give one more try in it, the CI/CD provided by openshift is amazing :)"},{"owner":{"account_id":9449559,"reputation":31,"user_id":7026978,"display_name":"brecht ph"},"score":0,"creation_date":1496125990,"post_id":43936816,"comment_id":75518185,"body_markdown":"Ty all for the info ^^ ill certainly experimentate with openshift for it but for helpin me out with this project is converted it to PhP.","body":"Ty all for the info ^^ ill certainly experimentate with openshift for it but for helpin me out with this project is converted it to PhP."}],"tags":[],"owner":{"account_id":7039380,"reputation":374,"user_id":5392317,"display_name":"wilsonW"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494588792,"creation_date":1494588792,"answer_id":43936816,"question_id":43936279,"body_markdown":"I think you can use another git service than github, for example [bitbucket][1].\n\nOn bitbucket you can create private git projects\n\nOnce your bitbucket account and project are created change the openshift&#39;s parameter `SOUCE_REPOSITORY_URL` with `https://USERNAME:PASSWORD@bitbucket.org/USERNAME/PROJECT_NAME.git` \n\nNow you can create your project into openshift, it&#39;ll clone the hidden repo and no one will be able to see what&#39;s in it.\n\nHope it Helps\n\n  [1]: https://bitbucket.org/product","title":"Tomcat hosting, openshift through GitHub, specific pages hidden?","body":"<p>I think you can use another git service than github, for example <a href=\"https://bitbucket.org/product\" rel=\"nofollow noreferrer\">bitbucket</a>.</p>\n<p>On bitbucket you can create private git projects</p>\n<p>Once your bitbucket account and project are created change the openshift's parameter <code>SOUCE_REPOSITORY_URL</code> with <code>https://USERNAME:PASSWORD@bitbucket.org/USERNAME/PROJECT_NAME.git</code></p>\n<p>Now you can create your project into openshift, it'll clone the hidden repo and no one will be able to see what's in it.</p>\n<p>Hope it Helps</p>\n"},{"tags":[],"owner":{"account_id":4664162,"reputation":496,"user_id":3777613,"display_name":"monis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494636780,"creation_date":1494636780,"answer_id":43948196,"question_id":43936279,"body_markdown":"Instead of worrying about making certain pages private, make everything public and use [secrets as environment variables][1].  That is, make your passwords a configuration detail, not something that is committed to your repo.\n\n\n  [1]: https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables","title":"Tomcat hosting, openshift through GitHub, specific pages hidden?","body":"<p>Instead of worrying about making certain pages private, make everything public and use <a href=\"https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables\" rel=\"nofollow noreferrer\">secrets as environment variables</a>.  That is, make your passwords a configuration detail, not something that is committed to your repo.</p>\n"}],"owner":{"account_id":9449559,"reputation":31,"user_id":7026978,"display_name":"brecht ph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1702057966,"creation_date":1494587106,"question_id":43936279,"body_markdown":"I made a dynamic webproject in Eclipse. Its made in java (which I kind of regret already) and was lookin for a hosting service to put it online. I read through some threads and one service I saw many times was openshift. So I was following the tutorial and it mentions something with getting the code from GitHub. Now the problem is that I want to keep the costs so low as possible so I don&#39;t want to pay for a private GitHub account. Is it possible to keep certain pages from the project hidden for public? The things that manages passwords and such?\r\nMaybe its just easier to rewrite it in PHP?","title":"Tomcat hosting, openshift through GitHub, specific pages hidden?","body":"<p>I made a dynamic webproject in Eclipse. Its made in java (which I kind of regret already) and was lookin for a hosting service to put it online. I read through some threads and one service I saw many times was openshift. So I was following the tutorial and it mentions something with getting the code from GitHub. Now the problem is that I want to keep the costs so low as possible so I don't want to pay for a private GitHub account. Is it possible to keep certain pages from the project hidden for public? The things that manages passwords and such?\nMaybe its just easier to rewrite it in PHP?</p>\n"},{"tags":["java","eclipse","exception","maven-2"],"comments":[{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":3,"creation_date":1246115644,"post_id":1052978,"comment_id":864534,"body_markdown":"I get the same error when trying to run a simple HelloWorld class with no JUnit included... More exactly:\n\njava.lang.NoClassDefFoundError: HelloWorld\nCaused by: java.lang.ClassNotFoundException: HelloWorld","body":"I get the same error when trying to run a simple HelloWorld class with no JUnit included... More exactly:  java.lang.NoClassDefFoundError: HelloWorld Caused by: java.lang.ClassNotFoundException: HelloWorld"},{"owner":{"account_id":36166,"reputation":38849,"user_id":103043,"display_name":"akf"},"score":0,"creation_date":1246115798,"post_id":1052978,"comment_id":864539,"body_markdown":"ClassNotFoundException is thrown when trying to reflect on a class.  NoClassDefFoundError is thrown when you are trying to use the class in a normal method call.","body":"ClassNotFoundException is thrown when trying to reflect on a class.  NoClassDefFoundError is thrown when you are trying to use the class in a normal method call."},{"owner":{"account_id":36166,"reputation":38849,"user_id":103043,"display_name":"akf"},"score":0,"creation_date":1246119223,"post_id":1052978,"comment_id":864630,"body_markdown":"can you show the code for your test class?","body":"can you show the code for your test class?"},{"owner":{"account_id":30387,"reputation":62490,"user_id":82865,"accept_rate":71,"display_name":"Jonathan Holloway"},"score":0,"creation_date":1246126033,"post_id":1052978,"comment_id":864905,"body_markdown":"do you have build automatically turned on or off?","body":"do you have build automatically turned on or off?"},{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":0,"creation_date":1246130761,"post_id":1052978,"comment_id":865060,"body_markdown":"build automatically is turned on","body":"build automatically is turned on"},{"owner":{"display_name":"user689711"},"score":0,"creation_date":1314031942,"post_id":1052978,"comment_id":8577573,"body_markdown":"Thanks a lot to Carlos.My problem is solved.\r\nLink to carlos post :\r\n&lt;http://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435&gt;","body":"Thanks a lot to Carlos.My problem is solved.  Link to carlos post :  &lt;<a href=\"http://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\" title=\"eclipse java lang classnotfoundexception\">stackoverflow.com/questions/1052978/&hellip;</a>&gt;"},{"owner":{"display_name":"user689711"},"score":0,"creation_date":1314032059,"post_id":1052978,"comment_id":8577588,"body_markdown":"Thanks a lot to Carlos.My problem is solved.\r\nLink to carlos post :\r\nhttp://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435","body":"Thanks a lot to Carlos.My problem is solved.  Link to carlos post :  <a href=\"http://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\" title=\"eclipse java lang classnotfoundexception\">stackoverflow.com/questions/1052978/&hellip;</a>"},{"owner":{"account_id":10210941,"reputation":1,"user_id":7538089,"display_name":"Soudamini"},"score":0,"creation_date":1486613211,"post_id":1052978,"comment_id":71427484,"body_markdown":"First of all avoid creating a .java class with a main method in the project. If its created the project will start its execution from main and if its deleted in future the project wont work well. If so happens kindly go to run-&gt; run configurations-&gt; java-&gt; right click on main class-&gt; delete the class. now your project is ready to run.","body":"First of all avoid creating a .java class with a main method in the project. If its created the project will start its execution from main and if its deleted in future the project wont work well. If so happens kindly go to run-&gt; run configurations-&gt; java-&gt; right click on main class-&gt; delete the class. now your project is ready to run."}],"answers":[{"comments":[{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":1,"creation_date":1246474399,"post_id":1053008,"comment_id":883284,"body_markdown":"unfortunately, &quot;Maven =&gt; Update Configuration&quot; does not solve the problem at all... the reverse is true; it delete&#39;s the build path configurations...\n\nOr does that mean that some other configuration is bad?","body":"unfortunately, &quot;Maven =&gt; Update Configuration&quot; does not solve the problem at all... the reverse is true; it delete&#39;s the build path configurations...  Or does that mean that some other configuration is bad?"},{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1342513188,"post_id":1053008,"comment_id":15222840,"body_markdown":"Exactly as @swalkner pointed out: Maven =&gt; Update configuration will ruin the build path configuration. For some reason which eludes me the plugin will set exclusion filters which I always have to remove manually after running the command","body":"Exactly as @swalkner pointed out: Maven =&gt; Update configuration will ruin the build path configuration. For some reason which eludes me the plugin will set exclusion filters which I always have to remove manually after running the command"},{"owner":{"account_id":2336055,"reputation":737,"user_id":2048374,"accept_rate":63,"display_name":"Berit Larsen"},"score":0,"creation_date":1440417835,"post_id":1053008,"comment_id":52249071,"body_markdown":"&quot;go to the Run menu and choose &#39;open run dialog.&#39; Huh?? Where&#39;s that?","body":"&quot;go to the Run menu and choose &#39;open run dialog.&#39; Huh?? Where&#39;s that?"}],"tags":[],"owner":{"account_id":36166,"reputation":38849,"user_id":103043,"display_name":"akf"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1246149291,"creation_date":1246115540,"answer_id":1053008,"question_id":1052978,"body_markdown":"your build classpath is correct, which is why you can compile.  the classpath for your JUnit needs to be checked.  go to the Run menu and choose &#39;open run dialog.&#39;  in there you should see a tree on the left with JUnit as an option.  open that node and find and select your test.  on the right pane you will see a tab for classpath.  take a look to ensure that your class that the test is trying to instantiate would be found.\r\n\r\n**edit:**\r\n\r\nthis seems to be an issue with maven and its behavior after a release changed the default Eclipse output folders.  i have seen solutions described where \r\n\r\n - placing maven into the bootclasspath ABOVE the jre works, or \r\n - running `mvn clean test` does the trick or \r\n - refreshing all of your eclipse projects, causing a rebuild fixes the problem\r\n - **going to your project and selecting Maven-&gt;Update Configuration solve the problem**\r\n\r\nwith the first three, there were reports of the issue recurring.  the last looks best to me, but if it doesnt work, please try the others.\r\n\r\n[here][1] and [here][2] is some info\r\n\r\n\r\n  [1]: http://blog.xemantic.com/2008/06/maven-integration-for-eclipse-and.html?widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=toggle&amp;dir=close&amp;toggle=YEARLY-1199142000000&amp;toggleopen=MONTHLY-1220220000000\r\n  [2]: http://jira.codehaus.org/browse/MECLIPSE-132","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>your build classpath is correct, which is why you can compile.  the classpath for your JUnit needs to be checked.  go to the Run menu and choose 'open run dialog.'  in there you should see a tree on the left with JUnit as an option.  open that node and find and select your test.  on the right pane you will see a tab for classpath.  take a look to ensure that your class that the test is trying to instantiate would be found.</p>\n\n<p><strong>edit:</strong></p>\n\n<p>this seems to be an issue with maven and its behavior after a release changed the default Eclipse output folders.  i have seen solutions described where </p>\n\n<ul>\n<li>placing maven into the bootclasspath ABOVE the jre works, or </li>\n<li>running <code>mvn clean test</code> does the trick or </li>\n<li>refreshing all of your eclipse projects, causing a rebuild fixes the problem</li>\n<li><strong>going to your project and selecting Maven->Update Configuration solve the problem</strong></li>\n</ul>\n\n<p>with the first three, there were reports of the issue recurring.  the last looks best to me, but if it doesnt work, please try the others.</p>\n\n<p><a href=\"http://blog.xemantic.com/2008/06/maven-integration-for-eclipse-and.html?widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=toggle&amp;dir=close&amp;toggle=YEARLY-1199142000000&amp;toggleopen=MONTHLY-1220220000000\" rel=\"noreferrer\">here</a> and <a href=\"http://jira.codehaus.org/browse/MECLIPSE-132\" rel=\"noreferrer\">here</a> is some info</p>\n"},{"comments":[{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":0,"creation_date":1246133292,"post_id":1053353,"comment_id":865164,"body_markdown":"thanks a lot for your answer, but nevertheless: it doesn&#39;t work either; first, I have to include spring-test.jar, then another dependency is not fullfilled.\n\ni don&#39;t understand why it doesn&#39;t work with a simple helloworld-class in the same package. and there, i don&#39;t need a &quot;hack&quot; like the one suggested by you... something must be wrong with &quot;classpath&quot; or something similar, but i don&#39;t get where/what i have to check...","body":"thanks a lot for your answer, but nevertheless: it doesn&#39;t work either; first, I have to include spring-test.jar, then another dependency is not fullfilled.  i don&#39;t understand why it doesn&#39;t work with a simple helloworld-class in the same package. and there, i don&#39;t need a &quot;hack&quot; like the one suggested by you... something must be wrong with &quot;classpath&quot; or something similar, but i don&#39;t get where/what i have to check..."}],"tags":[],"owner":{"account_id":30387,"reputation":62490,"user_id":82865,"accept_rate":71,"display_name":"Jonathan Holloway"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1246126137,"creation_date":1246126137,"answer_id":1053353,"question_id":1052978,"body_markdown":"Hmm, looks a little bizarre, try running it with the following annotation at the top of the class:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    public class UserDaoTest {\r\n    }\r\n\r\nand let me know how you get on with it.    \r\n\r\nCheck that you have build automatically enabled as well.  If you want to make sure your test classes are being compiled correctly clear out the Maven target folder (and any bin folder that Eclipse may be using).  Are you using m2eclipse as well, as I find it to be a little problematic.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Hmm, looks a little bizarre, try running it with the following annotation at the top of the class:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\npublic class UserDaoTest {\n}\n</code></pre>\n\n<p>and let me know how you get on with it.    </p>\n\n<p>Check that you have build automatically enabled as well.  If you want to make sure your test classes are being compiled correctly clear out the Maven target folder (and any bin folder that Eclipse may be using).  Are you using m2eclipse as well, as I find it to be a little problematic.</p>\n"},{"comments":[{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":1,"creation_date":1246426664,"post_id":1062435,"comment_id":879670,"body_markdown":"Hi Carlos,\n\nthanks a lot for your advice.\n\nBut it didn&#39;t help, unfortunately.\n\nI added /src/main/java (target/classes) and /src/test/java (target/test-classes) to the source folders as well as src/main/resources (applicationContext.xml, some properties - target/classes).\n\nSame problem - when starting my src/test/java/UserDaoTest.java as JUnit-test from Eclipse, I get &quot;Class not found UserDaoTest\njava.lang.ClassNotFoundException: UserDaoTest&quot;. At least, that&#39;s a little bit different then the original error message...","body":"Hi Carlos,  thanks a lot for your advice.  But it didn&#39;t help, unfortunately.  I added /src/main/java (target/classes) and /src/test/java (target/test-classes) to the source folders as well as src/main/resources (applicationContext.xml, some properties - target/classes).  Same problem - when starting my src/test/java/UserDaoTest.java as JUnit-test from Eclipse, I get &quot;Class not found UserDaoTest java.lang.ClassNotFoundException: UserDaoTest&quot;. At least, that&#39;s a little bit different then the original error message..."},{"owner":{"account_id":13780,"reputation":2893,"user_id":27866,"accept_rate":60,"display_name":"Carlos"},"score":5,"creation_date":1246530185,"post_id":1062435,"comment_id":886285,"body_markdown":"You&#39;re on the right way, check whether the UserDaoTest class is in the corresponding output folder within your file system (As you may know, Eclipse does compile all your source files and place it into the specified output folder, among others, to be able to launch tests). If the class doesn&#39;t appear in the output folder, check the inclusion/exclusion filters of the build path for this specific folder. Good luck.","body":"You&#39;re on the right way, check whether the UserDaoTest class is in the corresponding output folder within your file system (As you may know, Eclipse does compile all your source files and place it into the specified output folder, among others, to be able to launch tests). If the class doesn&#39;t appear in the output folder, check the inclusion/exclusion filters of the build path for this specific folder. Good luck."},{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1342513750,"post_id":1062435,"comment_id":15223058,"body_markdown":"For me this didn&#39;t fix the problem. Turned out that it was an AspectJ issue. If you&#39;re using AspectJ try removing and reading the AspectJ capabilities - worked for me","body":"For me this didn&#39;t fix the problem. Turned out that it was an AspectJ issue. If you&#39;re using AspectJ try removing and reading the AspectJ capabilities - worked for me"},{"owner":{"account_id":29870,"reputation":1230,"user_id":81012,"display_name":"bgs"},"score":1,"creation_date":1351176363,"post_id":1062435,"comment_id":17755533,"body_markdown":"Had same issue. I think it is an eclipse project - maven - git issue. That does not really narrow it down but wiping all the metadata folders (.project, .whatever...), deleting the project and reimporting only as a maven project worked for me. I also found something didn&#39;t know eclipse-junit could do: highlighting test method and selecting RunAs-Junit only runs that particular test-method, not the entire test! No more `@Ignore` all over the place and gui shortcuts!","body":"Had same issue. I think it is an eclipse project - maven - git issue. That does not really narrow it down but wiping all the metadata folders (.project, .whatever...), deleting the project and reimporting only as a maven project worked for me. I also found something didn&#39;t know eclipse-junit could do: highlighting test method and selecting RunAs-Junit only runs that particular test-method, not the entire test! No more <code>@Ignore</code> all over the place and gui shortcuts!"},{"owner":{"account_id":5003993,"reputation":1317,"user_id":4022159,"accept_rate":50,"display_name":"Nutan"},"score":0,"creation_date":1593522030,"post_id":1062435,"comment_id":110806014,"body_markdown":"Was facing the same issue, I simply used Eclipse -&gt; Project -&gt; clean and it worked.  Mvn clean did not work.","body":"Was facing the same issue, I simply used Eclipse -&gt; Project -&gt; clean and it worked.  Mvn clean did not work."},{"owner":{"account_id":14921029,"reputation":315,"user_id":10773347,"display_name":"ElliotThomas"},"score":0,"creation_date":1668013646,"post_id":1062435,"comment_id":131306587,"body_markdown":"I had a similar issue, and this didn&#39;t work.  In case this helps anyone, what ended up working for me what that I apparently had a disallowed character in the project name (a colon in my case).  Once I removed that, it worked.","body":"I had a similar issue, and this didn&#39;t work.  In case this helps anyone, what ended up working for me what that I apparently had a disallowed character in the project name (a colon in my case).  Once I removed that, it worked."}],"tags":[],"owner":{"account_id":13780,"reputation":2893,"user_id":27866,"accept_rate":60,"display_name":"Carlos"},"comment_count":6,"down_vote_count":0,"up_vote_count":201,"is_accepted":true,"score":201,"last_activity_date":1671704177,"creation_date":1246350464,"answer_id":1062435,"question_id":1052978,"body_markdown":"I&#39;ve come across that situation several times and, after a lot of attempts, I found the solution.\r\n\r\n*Check your project build-path and enable specific output folders for each folder.* Go one by one though each source-folder of your project and set the output folder that maven would use. \r\n\r\nFor example, your web project&#39;s `src/main/java` should have `target/classes` under the web project, test classes should have `target/test-classes` also under the web project and so.\r\n\r\nUsing this configuration will allow you to execute unit tests in eclipse.\r\n\r\nJust one more advice, if your web project&#39;s tests require some configuration files that are under the resources, be sure to include that folder as a source folder and to make the proper build-path configuration.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I've come across that situation several times and, after a lot of attempts, I found the solution.</p>\n<p><em>Check your project build-path and enable specific output folders for each folder.</em> Go one by one though each source-folder of your project and set the output folder that maven would use.</p>\n<p>For example, your web project's <code>src/main/java</code> should have <code>target/classes</code> under the web project, test classes should have <code>target/test-classes</code> also under the web project and so.</p>\n<p>Using this configuration will allow you to execute unit tests in eclipse.</p>\n<p>Just one more advice, if your web project's tests require some configuration files that are under the resources, be sure to include that folder as a source folder and to make the proper build-path configuration.</p>\n"},{"tags":[],"owner":{"display_name":"Ramon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1252798785,"creation_date":1252798785,"answer_id":1416466,"question_id":1052978,"body_markdown":"This was my solution to the problem. Of course, many things can cause it to occur. For me it was that Maven2 (not the plugin for Eclipse) was setting the eclipse profile up to use a different builder (aspectJ) but I did not have the plugin in eclipse./\r\n\r\nhttp://rbtech.blogspot.com/2009/09/eclipse-galileo-javalangclassnotfoundex.html\r\n\r\nCheers\r\nRamon Buckland","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>This was my solution to the problem. Of course, many things can cause it to occur. For me it was that Maven2 (not the plugin for Eclipse) was setting the eclipse profile up to use a different builder (aspectJ) but I did not have the plugin in eclipse./</p>\n\n<p><a href=\"http://rbtech.blogspot.com/2009/09/eclipse-galileo-javalangclassnotfoundex.html\" rel=\"nofollow noreferrer\">http://rbtech.blogspot.com/2009/09/eclipse-galileo-javalangclassnotfoundex.html</a></p>\n\n<p>Cheers\nRamon Buckland</p>\n"},{"tags":[],"owner":{"account_id":587724,"reputation":1,"user_id":267327,"display_name":"Sachin"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1265395279,"creation_date":1265395279,"answer_id":2209486,"question_id":1052978,"body_markdown":"Its very Old  Jul (which year) but I had the same problem . \r\n\r\nActual issue found that eclipse was not able to generate class file for the java file , classpath was proper. \r\n\r\nSee the problem tab and check if your project is missing something/file. \r\nyou can create a new proj and add files one by one and build them until it stops compiling \r\nand creating classes ( check the workspace/proj/bin/package/  folder for classes )\r\n\r\nits wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled . \r\n\r\n**CLASSPATH is not a issue here.** ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Its very Old  Jul (which year) but I had the same problem . </p>\n\n<p>Actual issue found that eclipse was not able to generate class file for the java file , classpath was proper. </p>\n\n<p>See the problem tab and check if your project is missing something/file. \nyou can create a new proj and add files one by one and build them until it stops compiling \nand creating classes ( check the workspace/proj/bin/package/  folder for classes )</p>\n\n<p>its wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled . </p>\n\n<p><strong>CLASSPATH is not a issue here.</strong> </p>\n"},{"tags":[],"owner":{"account_id":644546,"reputation":257,"user_id":420031,"display_name":"Mike"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1281735357,"creation_date":1281735357,"answer_id":3480827,"question_id":1052978,"body_markdown":"The solution to my problem which was similar: the libs were invalid. If you look in the .classpath file of the project, you&#39;ll see classpathentry tags with the key/value kind=&quot;lib&quot;. Some of mine were incorrect.\r\n\r\nI didn&#39;t discover this until I turned off Validation settings. That is, there were so many errors in the JSP files, etc, that the classpath errors weren&#39;t evident (or possibly even showing up). As a result, nothing was being compiled into the destination output folders, but no helpful errors on why.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>The solution to my problem which was similar: the libs were invalid. If you look in the .classpath file of the project, you'll see classpathentry tags with the key/value kind=\"lib\". Some of mine were incorrect.</p>\n\n<p>I didn't discover this until I turned off Validation settings. That is, there were so many errors in the JSP files, etc, that the classpath errors weren't evident (or possibly even showing up). As a result, nothing was being compiled into the destination output folders, but no helpful errors on why.</p>\n"},{"tags":[],"owner":{"account_id":308578,"reputation":41,"user_id":620540,"display_name":"cmh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365757516,"creation_date":1297901136,"answer_id":5023704,"question_id":1052978,"body_markdown":"I was hit with this issue also and was able to come up with a sufficient solution for my case.  If your Eclipse project has a .classpath file in your project root (see it in Navigator view instead of Package Explorer view), be sure that your Maven classpathentry appears prior to your JRE Container classpathentry.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;classpath&gt;\r\n    \t&lt;classpathentry kind=&quot;con&quot; path=&quot;org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\nIf your project does not have a .classpath file, you can edit your project&#39;s Java Build Path to switch the Order and Export.  If your project has the .classpath file and you only change your ordering in the Java Build Path, you will see that the ordering is not impacted and the issue will continue to occur.\r\n\r\nAnd a project-&gt;clean never hurts things after you make the change.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I was hit with this issue also and was able to come up with a sufficient solution for my case.  If your Eclipse project has a .classpath file in your project root (see it in Navigator view instead of Package Explorer view), be sure that your Maven classpathentry appears prior to your JRE Container classpathentry.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER\"/&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p>If your project does not have a .classpath file, you can edit your project's Java Build Path to switch the Order and Export.  If your project has the .classpath file and you only change your ordering in the Java Build Path, you will see that the ordering is not impacted and the issue will continue to occur.</p>\n\n<p>And a project->clean never hurts things after you make the change.</p>\n"},{"tags":[],"owner":{"account_id":215223,"reputation":2949,"user_id":469718,"accept_rate":12,"display_name":"kisna"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1302012389,"creation_date":1302012389,"answer_id":5553181,"question_id":1052978,"body_markdown":"Sachin&#39;s right:\r\nEven with correct class path, the problems tab will show that some dependency or the Resource/project has error that needs to be fixed in order for maven to automatically build and create classes when you create or make a change in your test class.\r\n\r\n&quot;Hi,\r\n\r\nIts very Old Jul (which year) but I had the same problem .\r\n\r\nActual issue found that eclipse was not able to generate class file for the java file , classpath was proper.\r\n\r\nSee the problem tab and check if your project is missing something/file. you can create a new proj and add files one by one and build them until it stops compiling and creating classes ( check the workspace/proj/bin/package/ folder for classes )\r\n\r\nits wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled .\r\n\r\nCLASSPATH is not a issue here.&quot;\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Sachin's right:\nEven with correct class path, the problems tab will show that some dependency or the Resource/project has error that needs to be fixed in order for maven to automatically build and create classes when you create or make a change in your test class.</p>\n\n<p>\"Hi,</p>\n\n<p>Its very Old Jul (which year) but I had the same problem .</p>\n\n<p>Actual issue found that eclipse was not able to generate class file for the java file , classpath was proper.</p>\n\n<p>See the problem tab and check if your project is missing something/file. you can create a new proj and add files one by one and build them until it stops compiling and creating classes ( check the workspace/proj/bin/package/ folder for classes )</p>\n\n<p>its wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled .</p>\n\n<p>CLASSPATH is not a issue here.\"</p>\n"},{"comments":[{"owner":{"account_id":52196,"reputation":547,"user_id":2127697,"display_name":"Jose Muanis"},"score":2,"creation_date":1313765981,"post_id":5566238,"comment_id":8536614,"body_markdown":"Isn&#39;t this very strange? It worked for me, but the target classes dir is part of the build classpath for the project. Doesn&#39;t make much sense that you need to add a specific class.","body":"Isn&#39;t this very strange? It worked for me, but the target classes dir is part of the build classpath for the project. Doesn&#39;t make much sense that you need to add a specific class."},{"owner":{"account_id":7855,"reputation":2708,"user_id":13812,"accept_rate":100,"display_name":"awied"},"score":0,"creation_date":1332511850,"post_id":5566238,"comment_id":12540258,"body_markdown":"I don&#39;t think this action necessarily adds a needed directory as much as triggers something to be reloaded. You can likely immediately remove the newly added directory after a successful run and it should work like normal. Also, comment above is right. May want to upvote the referenced commend from Carlos as well.","body":"I don&#39;t think this action necessarily adds a needed directory as much as triggers something to be reloaded. You can likely immediately remove the newly added directory after a successful run and it should work like normal. Also, comment above is right. May want to upvote the referenced commend from Carlos as well."},{"owner":{"account_id":485360,"reputation":20815,"user_id":901641,"accept_rate":78,"display_name":"ArtOfWarfare"},"score":0,"creation_date":1383711034,"post_id":5566238,"comment_id":29442404,"body_markdown":"I found the answer on another SO question to be more helpful with this problem: http://stackoverflow.com/a/5718520/901641","body":"I found the answer on another SO question to be more helpful with this problem: <a href=\"http://stackoverflow.com/a/5718520/901641\">stackoverflow.com/a/5718520/901641</a>"}],"tags":[],"owner":{"account_id":324417,"reputation":1087,"user_id":644977,"accept_rate":100,"display_name":"CoffeJunky"},"comment_count":3,"down_vote_count":21,"up_vote_count":68,"is_accepted":false,"score":47,"last_activity_date":1364929819,"creation_date":1302092493,"answer_id":5566238,"question_id":1052978,"body_markdown":"Carlos approach helped!\r\nhttps://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\r\n\r\nTry to check the classpath of the junit run configuration:\r\n\r\n 1. Open your run configurations\r\n 2. Click on the jUnit-Test you want to start\r\n 3. go to the classpath tab\r\n 4. Try to add a folder (click on user entries, click on advanced, click on add folders, click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))\r\n\r\nworks for me.\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Carlos approach helped!\n<a href=\"https://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\">Eclipse - java.lang.ClassNotFoundException</a></p>\n\n<p>Try to check the classpath of the junit run configuration:</p>\n\n<ol>\n<li>Open your run configurations</li>\n<li>Click on the jUnit-Test you want to start</li>\n<li>go to the classpath tab</li>\n<li>Try to add a folder (click on user entries, click on advanced, click on add folders, click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))</li>\n</ol>\n\n<p>works for me.</p>\n"},{"tags":[],"owner":{"account_id":32689,"reputation":21905,"user_id":90874,"accept_rate":52,"display_name":"thSoft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365757541,"creation_date":1309958371,"answer_id":6597063,"question_id":1052978,"body_markdown":"Make sure your test launch configuration does NOT contain the following lines, OR try enabling automated Maven dependency management.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;stringAttribute key=&quot;org.eclipse.jdt.launching.CLASSPATH_PROVIDER&quot; value=&quot;org.maven.ide.eclipse.launchconfig.classpathProvider&quot;/&gt;\r\n    &lt;stringAttribute key=&quot;org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER&quot; value=&quot;org.maven.ide.eclipse.launchconfig.sourcepathProvider&quot;/&gt;","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Make sure your test launch configuration does NOT contain the following lines, OR try enabling automated Maven dependency management.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;stringAttribute key=\"org.eclipse.jdt.launching.CLASSPATH_PROVIDER\" value=\"org.maven.ide.eclipse.launchconfig.classpathProvider\"/&gt;\n&lt;stringAttribute key=\"org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER\" value=\"org.maven.ide.eclipse.launchconfig.sourcepathProvider\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1324449,"reputation":11,"user_id":1269594,"display_name":"iunknown"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1351230583,"creation_date":1331743428,"answer_id":9706227,"question_id":1052978,"body_markdown":"click on `project-&gt;properties-&gt;Java build path-&gt;Source` and check each `src` folder is still valid exist or recently removed. Correct any missing path or incorrect path and rebuild and run the test. It will fix the problem.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>click on <code>project-&gt;properties-&gt;Java build path-&gt;Source</code> and check each <code>src</code> folder is still valid exist or recently removed. Correct any missing path or incorrect path and rebuild and run the test. It will fix the problem.</p>\n"},{"comments":[{"owner":{"account_id":2050891,"reputation":8031,"user_id":1829943,"accept_rate":84,"display_name":"CoffeDeveloper"},"score":0,"creation_date":1441280974,"post_id":10447547,"comment_id":52620368,"body_markdown":"I always runned junit test cases, until I runned the program that checks PC for compatibility before upgrading windows. That seemeed to break something, I&#39;m unable to run JUnit test cases again. (and all existing answers don&#39;t work)","body":"I always runned junit test cases, until I runned the program that checks PC for compatibility before upgrading windows. That seemeed to break something, I&#39;m unable to run JUnit test cases again. (and all existing answers don&#39;t work)"}],"tags":[],"owner":{"account_id":1460250,"reputation":21,"user_id":1374776,"display_name":"Romie"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1336129300,"creation_date":1336129300,"answer_id":10447547,"question_id":1052978,"body_markdown":"We had the exact exception (using SpringSource Tools, tomcat, on Win7) and the cause was that we had refactored a filename (renamed a file) from SubDomain.java to Subdomain.java (D vs d) and somehow it collided though SpringSource was showing the new name Subdomain.java. The solution was to delete the file (via SpringSource) and create it again under the name Subdomain.java and copy-pasting its former content. Simple as that.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>We had the exact exception (using SpringSource Tools, tomcat, on Win7) and the cause was that we had refactored a filename (renamed a file) from SubDomain.java to Subdomain.java (D vs d) and somehow it collided though SpringSource was showing the new name Subdomain.java. The solution was to delete the file (via SpringSource) and create it again under the name Subdomain.java and copy-pasting its former content. Simple as that.</p>\n"},{"tags":[],"owner":{"account_id":1144020,"reputation":162,"user_id":1127192,"display_name":"Tapas Adhikary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340774433,"creation_date":1340774433,"answer_id":11219869,"question_id":1052978,"body_markdown":"Please point to correct JDK from Windows &gt; Preferences &gt; Java &gt; Installed JRE.\r\n\r\nDo not point to jre, point to a proper JDK. I pointed to JDK 1.6U29 and refreshed the project.\r\n\r\nHereafter, the issue is gone and jUnit Tests are working fine.\r\n\r\nThanks,\r\n&lt;br&gt;\r\n-Tapas","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Please point to correct JDK from Windows > Preferences > Java > Installed JRE.</p>\n\n<p>Do not point to jre, point to a proper JDK. I pointed to JDK 1.6U29 and refreshed the project.</p>\n\n<p>Hereafter, the issue is gone and jUnit Tests are working fine.</p>\n\n<p>Thanks,\n<br>\n-Tapas</p>\n"},{"tags":[],"owner":{"account_id":1717998,"reputation":51,"user_id":1574671,"display_name":"EvilFish"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1344011360,"creation_date":1344011360,"answer_id":11799703,"question_id":1052978,"body_markdown":"The problem might be missing the class file in your build folder. One solution is clean the project and rebuild it. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>The problem might be missing the class file in your build folder. One solution is clean the project and rebuild it. </p>\n"},{"comments":[{"owner":{"account_id":958617,"reputation":4858,"user_id":983430,"accept_rate":100,"display_name":"Amos M. Carpenter"},"score":0,"creation_date":1449796782,"post_id":12353111,"comment_id":56173894,"body_markdown":"I&#39;m tempted to ask whether it&#39;s fixed your problem _permanently_, or _every time_... but I get what you mean, and, amazingly, this did the trick for me.","body":"I&#39;m tempted to ask whether it&#39;s fixed your problem <i>permanently</i>, or <i>every time</i>... but I get what you mean, and, amazingly, this did the trick for me."}],"tags":[],"owner":{"account_id":228053,"reputation":7259,"user_id":490123,"accept_rate":76,"display_name":"KomodoDave"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1347285085,"creation_date":1347285085,"answer_id":12353111,"question_id":1052978,"body_markdown":"There are many convoluted suggestions here.\r\n\r\nI&#39;ve encountered this problem multiple times with Maven projects after moving resources around by drag &#39;n&#39; drop, or performing refactoring of class names.\r\n\r\nIf this occurs, simply copy (not move) the problem Test Case (`.java`) via terminal/file browser to another location, `right-click -&gt; Delete` in Eclipse and choose to delete on disk when given the option, move/copy the copied file to the original file location, then select your project in Eclipse and press F5 to refresh resources.\r\n\r\nThis is quick and easy to do, and has fixed the problem permanently for me every time.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>There are many convoluted suggestions here.</p>\n\n<p>I've encountered this problem multiple times with Maven projects after moving resources around by drag 'n' drop, or performing refactoring of class names.</p>\n\n<p>If this occurs, simply copy (not move) the problem Test Case (<code>.java</code>) via terminal/file browser to another location, <code>right-click -&gt; Delete</code> in Eclipse and choose to delete on disk when given the option, move/copy the copied file to the original file location, then select your project in Eclipse and press F5 to refresh resources.</p>\n\n<p>This is quick and easy to do, and has fixed the problem permanently for me every time.</p>\n"},{"tags":[],"owner":{"account_id":1859557,"reputation":37,"user_id":1684412,"display_name":"Starfox275"},"comment_count":0,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1348095021,"creation_date":1348094420,"answer_id":12503879,"question_id":1052978,"body_markdown":"I had the exact same problem but I figured it out! Go to your project file and right click on it, then click `Refresh` or hit F5. Then try and run it.  If it still doesn&#39;t work then just forget it, as I had the EXACT same problem and it just means you version of Eclipse is garbage.\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I had the exact same problem but I figured it out! Go to your project file and right click on it, then click <code>Refresh</code> or hit F5. Then try and run it.  If it still doesn't work then just forget it, as I had the EXACT same problem and it just means you version of Eclipse is garbage.</p>\n"},{"tags":[],"owner":{"account_id":456226,"reputation":175,"user_id":854901,"accept_rate":43,"display_name":"HZhang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359162434,"creation_date":1359162434,"answer_id":14532726,"question_id":1052978,"body_markdown":"I&#39;ve run into a same error in Eclipse recently, i.e., the Eclipse IDE couldn&#39;t find the Unit test class no matter how I change the configurations. Learning from the previous posts here and in other web sites, I&#39;ve double checked and triple checked the classpath and source info, and move up and down the source folder and libraries, in both the &quot;Run Configuration&quot; and the &quot;Java Build Path&quot; config windows, and I&#39;ve also cleaned the Project and rebuilt it, but none of the tricks work for me. The specific Java project is an old ANT compiled project and have lots of jars included in Eclipse library.\r\n\r\nThen, I changed the unit test class to add a main() method and right click it to &quot;Run As&quot; a Java Application instead of JUnit test, and suddenly, Eclipse seems to wake up and identified the class correctly. Afterwards, I switched it back to a Unit test application, and it is still working.\r\n\r\nThis seems to be a bug in Eclipse, I am guessing the large number of libraries (&gt;260) may confused the JVM&#39;s ability to locate my JUnit class. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I've run into a same error in Eclipse recently, i.e., the Eclipse IDE couldn't find the Unit test class no matter how I change the configurations. Learning from the previous posts here and in other web sites, I've double checked and triple checked the classpath and source info, and move up and down the source folder and libraries, in both the \"Run Configuration\" and the \"Java Build Path\" config windows, and I've also cleaned the Project and rebuilt it, but none of the tricks work for me. The specific Java project is an old ANT compiled project and have lots of jars included in Eclipse library.</p>\n\n<p>Then, I changed the unit test class to add a main() method and right click it to \"Run As\" a Java Application instead of JUnit test, and suddenly, Eclipse seems to wake up and identified the class correctly. Afterwards, I switched it back to a Unit test application, and it is still working.</p>\n\n<p>This seems to be a bug in Eclipse, I am guessing the large number of libraries (>260) may confused the JVM's ability to locate my JUnit class. </p>\n"},{"tags":[],"owner":{"account_id":263142,"reputation":9391,"user_id":548526,"accept_rate":70,"display_name":"Siddharth"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1365082021,"creation_date":1365082021,"answer_id":15812644,"question_id":1052978,"body_markdown":"All I did was Properties -&gt; Java Build Path -&gt; Order and Export -&gt; Enabled all unchecked boxes -&gt; moved Junit all the way up","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>All I did was Properties -> Java Build Path -> Order and Export -> Enabled all unchecked boxes -> moved Junit all the way up</p>\n"},{"tags":[],"owner":{"account_id":2592275,"reputation":470,"user_id":2246725,"display_name":"user2246725"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365537302,"creation_date":1365537302,"answer_id":15911295,"question_id":1052978,"body_markdown":"**Tried** \r\n\r\n    Link : [here][1]\r\n    \r\n    Open your run configurations\r\n    Click on the jUnit-Test you want to start\r\n    go to the classpath tab\r\n    Try to add a folder (click on user entries, click on advanced, click on add folders,click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))\r\n\r\n**worked after** \r\n\r\n   Maven 2 LifeCycle &gt;&gt; test \r\n    ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p><strong>Tried</strong> </p>\n\n<pre><code>Link : [here][1]\n\nOpen your run configurations\nClick on the jUnit-Test you want to start\ngo to the classpath tab\nTry to add a folder (click on user entries, click on advanced, click on add folders,click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))\n</code></pre>\n\n<p><strong>worked after</strong> </p>\n\n<p>Maven 2 LifeCycle >> test </p>\n"},{"comments":[{"owner":{"account_id":966863,"reputation":3437,"user_id":990159,"accept_rate":88,"display_name":"justin"},"score":1,"creation_date":1407934108,"post_id":15960435,"comment_id":39406217,"body_markdown":"After too much time wasted I ended up doing the steps above. I then took a heroic decision to delete all run test configurations and now none of my tests can be found in the classpath even though the new run configuration clearly shows the project in it (with maven dependencies underneath). I keep forgetting how brittle eclipse is. After that no tests could be run with eclipse (before i could select a particular test - ok). Finally, I tried KomodoDave suggestion below. That fixed things... amazing the loops you have to jump through with this ide (the latest of a series..)","body":"After too much time wasted I ended up doing the steps above. I then took a heroic decision to delete all run test configurations and now none of my tests can be found in the classpath even though the new run configuration clearly shows the project in it (with maven dependencies underneath). I keep forgetting how brittle eclipse is. After that no tests could be run with eclipse (before i could select a particular test - ok). Finally, I tried KomodoDave suggestion below. That fixed things... amazing the loops you have to jump through with this ide (the latest of a series..)"}],"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365721883,"creation_date":1365721883,"answer_id":15960435,"question_id":1052978,"body_markdown":"I had tried all of the solutions on this page: refresh project, rebuild, all projects clean, restart Eclipse, re-import (even) the projects, rebuild maven and refresh.  Nothing worked.  What _did_ work was copying the class to a _new name_ which runs fine -- bizarre but true.\r\n\r\nAfter putting up with this for some time, I just fixed it by:\r\n\r\n1. Via the `Run` menu\r\n2. Select `Run Configurations`\r\n3. Choose the run configuration that is associated with your unit test.\r\n4. Removing the entry from the `Run Configuration` by pressing delete or clicking the red X.\r\n\r\nSomething must have been screwed up with the cached run configuration.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I had tried all of the solutions on this page: refresh project, rebuild, all projects clean, restart Eclipse, re-import (even) the projects, rebuild maven and refresh.  Nothing worked.  What <em>did</em> work was copying the class to a <em>new name</em> which runs fine -- bizarre but true.</p>\n\n<p>After putting up with this for some time, I just fixed it by:</p>\n\n<ol>\n<li>Via the <code>Run</code> menu</li>\n<li>Select <code>Run Configurations</code></li>\n<li>Choose the run configuration that is associated with your unit test.</li>\n<li>Removing the entry from the <code>Run Configuration</code> by pressing delete or clicking the red X.</li>\n</ol>\n\n<p>Something must have been screwed up with the cached run configuration.</p>\n"},{"tags":[],"owner":{"account_id":2384381,"reputation":357,"user_id":2085658,"accept_rate":33,"display_name":"snakedog"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378828183,"creation_date":1378827052,"answer_id":18723062,"question_id":1052978,"body_markdown":"I tried everything I read in this long post and, incredibly, what worked for me was, rather than clicking on the test class and selecting `Run as JUnit test`, clicking on the test *method* and running as `JUnit test`. I have no idea why?","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I tried everything I read in this long post and, incredibly, what worked for me was, rather than clicking on the test class and selecting <code>Run as JUnit test</code>, clicking on the test <em>method</em> and running as <code>JUnit test</code>. I have no idea why?</p>\n"},{"tags":[],"owner":{"account_id":3465746,"reputation":9,"user_id":2901341,"display_name":"Hari Hara Earlapati"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1382312958,"creation_date":1382312958,"answer_id":19484237,"question_id":1052978,"body_markdown":"Deleting the project from eclipse (Not from hard disk) which in a way is cleaning the workspace and reimporting the project into eclipse again worked for me.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Deleting the project from eclipse (Not from hard disk) which in a way is cleaning the workspace and reimporting the project into eclipse again worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3178315,"reputation":41,"user_id":2685648,"display_name":"RutgerDOW"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1385547427,"creation_date":1385547427,"answer_id":20239615,"question_id":1052978,"body_markdown":"JUnit test from inside eclipse gave me also NoClassDefFoundError.\r\nRunning &#39;mvn clean test&#39; from command line gave me following error on several jars:\r\ninvalid LOC header (bad signature)\r\nDeleting these jars from local m2 repository and running &#39;mvn clean test&#39; again\r\nsolved my problem.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>JUnit test from inside eclipse gave me also NoClassDefFoundError.\nRunning 'mvn clean test' from command line gave me following error on several jars:\ninvalid LOC header (bad signature)\nDeleting these jars from local m2 repository and running 'mvn clean test' again\nsolved my problem.</p>\n"},{"tags":[],"owner":{"account_id":1946654,"reputation":2062,"user_id":1751634,"accept_rate":67,"display_name":"Vikram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397857553,"creation_date":1397857553,"answer_id":23162900,"question_id":1052978,"body_markdown":"I had the same problem. All what I did was, \r\n\r\n i). Generated Eclipse artifacts \r\n\r\n`mvn clean eclipse:eclipse`\r\n \r\n ii). Refresh the project and rerun your junit test. Should work fine. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I had the same problem. All what I did was, </p>\n\n<p>i). Generated Eclipse artifacts </p>\n\n<p><code>mvn clean eclipse:eclipse</code></p>\n\n<p>ii). Refresh the project and rerun your junit test. Should work fine. </p>\n"},{"tags":[],"owner":{"account_id":1728426,"reputation":1069,"user_id":1582586,"display_name":"Eric Manley"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1413823305,"creation_date":1413823305,"answer_id":26470678,"question_id":1052978,"body_markdown":"Furthermore, DOUBLE-CHECK the eclipse &quot;Web Deployment Assembly&quot; dialog.  \r\n\r\nThis can be found: Project Properties-&gt;Deployment Assembly.   \r\n\r\nRecently I had an eclipse plugin modify one of my web projects, and it added ~mysteriously~ added  the maven test directories  /src/test/java, /src/test/resources to the Deployment Assembly.   UGGGG!!!   \r\n\r\nWhich is why my project worked fine when I built &amp; deployed just straight maven to tomcat, no ClassNotFoundExceptions...  However, when I did the deploy through Eclipse, Whammo!! I start getting ClassNotFoundExceptions because the TestCode is getting deployed.  \r\n\r\nEric","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Furthermore, DOUBLE-CHECK the eclipse \"Web Deployment Assembly\" dialog.  </p>\n\n<p>This can be found: Project Properties->Deployment Assembly.   </p>\n\n<p>Recently I had an eclipse plugin modify one of my web projects, and it added ~mysteriously~ added  the maven test directories  /src/test/java, /src/test/resources to the Deployment Assembly.   UGGGG!!!   </p>\n\n<p>Which is why my project worked fine when I built &amp; deployed just straight maven to tomcat, no ClassNotFoundExceptions...  However, when I did the deploy through Eclipse, Whammo!! I start getting ClassNotFoundExceptions because the TestCode is getting deployed.  </p>\n\n<p>Eric</p>\n"},{"tags":[],"owner":{"account_id":5648677,"reputation":1257,"user_id":4469988,"accept_rate":100,"display_name":"Raju Guduri"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1424177107,"creation_date":1424177107,"answer_id":28561836,"question_id":1052978,"body_markdown":"That means your pom.xml has unresolved issues. Open the problems view solve accordingly. Then you will be able to run the test cases successfully without encountering the classnotfoundexception.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>That means your pom.xml has unresolved issues. Open the problems view solve accordingly. Then you will be able to run the test cases successfully without encountering the classnotfoundexception.</p>\n"},{"tags":[],"owner":{"account_id":6660655,"reputation":1,"user_id":5139869,"display_name":"Sai Killi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437492678,"creation_date":1437492678,"answer_id":31543456,"question_id":1052978,"body_markdown":"Changing the order of classpath artifacts in the Java Build Path resolved it for me.\r\n\r\n1. Right Click on the project and go to Project Build path.\r\n2. Go to, Order and Export tab and move the JRE system library to after the sources.\r\n\r\nThis should fix it.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Changing the order of classpath artifacts in the Java Build Path resolved it for me.</p>\n\n<ol>\n<li>Right Click on the project and go to Project Build path.</li>\n<li>Go to, Order and Export tab and move the JRE system library to after the sources.</li>\n</ol>\n\n<p>This should fix it.</p>\n"},{"tags":[],"owner":{"account_id":3626984,"reputation":138,"user_id":3024314,"display_name":"Mahendra Rathod"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449757552,"creation_date":1449757552,"answer_id":34204336,"question_id":1052978,"body_markdown":"JUnit 4.4 is not supported by the JMockit/JUnit integration. Only\r\nversions 4.5 or newer are supported that. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>JUnit 4.4 is not supported by the JMockit/JUnit integration. Only\nversions 4.5 or newer are supported that. </p>\n"},{"tags":[],"owner":{"account_id":2872367,"reputation":11,"user_id":2465399,"display_name":"Sahitya M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465887780,"creation_date":1465887780,"answer_id":37805074,"question_id":1052978,"body_markdown":"\r\nwhile running web applications Most of us will get this Exception. When you got this error you have place .class files in proper folder. \r\n\r\nIn web applications all .class files should sit in WEB-INF\\Classes folder.\r\nif you are running web app in Eclipse please follow the steps\r\n\r\nStep 1: Right click on Project folder and Select Properties\r\nStep 2: Click on &quot;Java Build Path&quot; you will see different tabs like &quot;source&quot; , &quot;projects&quot;, &quot;libraries&quot; etc\r\nStep 3: select Source folder. under this you will see your project details\r\nStep 4: in the &quot;Source&quot; folder you will see Default Output Folder option. here you have to give the classes folder under WEB-INF.\r\njust give the path like projectname/WebContent/WEB-INF/classes\r\nthe structure depends on your application\r\nplease do remember here you no need to create &quot;classes&quot; folder. Eclipse will create it for you.\r\nStep 5: click on &quot;OK&quot; and do the project clean and Build. that&#39;s it your app will run now.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>while running web applications Most of us will get this Exception. When you got this error you have place .class files in proper folder. </p>\n\n<p>In web applications all .class files should sit in WEB-INF\\Classes folder.\nif you are running web app in Eclipse please follow the steps</p>\n\n<p>Step 1: Right click on Project folder and Select Properties\nStep 2: Click on \"Java Build Path\" you will see different tabs like \"source\" , \"projects\", \"libraries\" etc\nStep 3: select Source folder. under this you will see your project details\nStep 4: in the \"Source\" folder you will see Default Output Folder option. here you have to give the classes folder under WEB-INF.\njust give the path like projectname/WebContent/WEB-INF/classes\nthe structure depends on your application\nplease do remember here you no need to create \"classes\" folder. Eclipse will create it for you.\nStep 5: click on \"OK\" and do the project clean and Build. that's it your app will run now.</p>\n"},{"tags":[],"owner":{"account_id":2902519,"reputation":19,"user_id":2885121,"display_name":"wanfke"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1475908713,"creation_date":1475908713,"answer_id":39929488,"question_id":1052978,"body_markdown":"I solve that Bulit path---&gt;libraries---&gt;add library---&gt;Junit  check junit4","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I solve that Bulit path--->libraries--->add library--->Junit  check junit4</p>\n"},{"comments":[{"owner":{"account_id":4350455,"reputation":1980,"user_id":3550988,"accept_rate":75,"display_name":"Carl Poole"},"score":0,"creation_date":1488344087,"post_id":42523233,"comment_id":72183355,"body_markdown":"What if the external jar file is important to the application and necessary for some functionality of the app? I&#39;m not sure this is a viable solution.","body":"What if the external jar file is important to the application and necessary for some functionality of the app? I&#39;m not sure this is a viable solution."}],"tags":[],"owner":{"account_id":10357721,"reputation":1,"user_id":7639086,"display_name":"user7639086"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488342724,"creation_date":1488342724,"answer_id":42523233,"question_id":1052978,"body_markdown":"I have see Eclipse - java.lang.ClassNotFoundException when running junit tests. \r\nI had deleted one of the external jar files which was added to the project. After removing the reference of this jar file to the project from Eclipse. i could run the Junit tests .\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I have see Eclipse - java.lang.ClassNotFoundException when running junit tests. \nI had deleted one of the external jar files which was added to the project. After removing the reference of this jar file to the project from Eclipse. i could run the Junit tests .</p>\n"},{"tags":[],"owner":{"account_id":12243248,"reputation":41,"user_id":8935651,"display_name":"pavelb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510615434,"creation_date":1510615434,"answer_id":47275194,"question_id":1052978,"body_markdown":"Go To Build Path -&gt; Source and toggle to Yes option &quot;Ignore Optional Compile Problems&quot; for all source folders.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Go To Build Path -> Source and toggle to Yes option \"Ignore Optional Compile Problems\" for all source folders.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515038973,"creation_date":1515038973,"answer_id":48088540,"question_id":1052978,"body_markdown":"Usually this problem occurs while running java application `java` tool unable to find the class file.    \r\n\r\nMostly in maven project we see this issue because **Eclipse-Maven sync** issue. To solve this problem :**Maven-&gt;Update Configuration** ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Usually this problem occurs while running java application <code>java</code> tool unable to find the class file.    </p>\n\n<p>Mostly in maven project we see this issue because <strong>Eclipse-Maven sync</strong> issue. To solve this problem :<strong>Maven->Update Configuration</strong> </p>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3688,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517540345,"creation_date":1517502023,"answer_id":48567295,"question_id":1052978,"body_markdown":"I faced the same problem, for me the issue is different. It came because some of the maven dependencies are not downloaded. \r\n\r\n    a. I went through properties -&gt; Java Buildpath -&gt; Maven Dependencies and identified the missed libraries. \r\n    b. Removed the missed libraries artifacts from pom.xml\r\n    c. Downloaded the libraries and added them explicitly.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I faced the same problem, for me the issue is different. It came because some of the maven dependencies are not downloaded. </p>\n\n<pre><code>a. I went through properties -&gt; Java Buildpath -&gt; Maven Dependencies and identified the missed libraries. \nb. Removed the missed libraries artifacts from pom.xml\nc. Downloaded the libraries and added them explicitly.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2032265,"reputation":2081,"user_id":1815612,"display_name":"Yao Li"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565644290,"creation_date":1565644290,"answer_id":57468304,"question_id":1052978,"body_markdown":"Run project as Maven test, then Run as JUnit Test.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Run project as Maven test, then Run as JUnit Test.</p>\n"},{"tags":[],"owner":{"account_id":4870666,"reputation":547,"user_id":3927323,"display_name":"NIKHIL CHAURASIA"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1567074282,"creation_date":1567074282,"answer_id":57708130,"question_id":1052978,"body_markdown":"I am using gradle with eclipse and faced the same challenge today and tried a number of ways to resolve but the only way which helped me was to run command `gradlew clean` . \r\n\r\n&gt; P.S. =&gt; Don&#39;t combine the &quot;build&quot; with the above mentioned command.\r\n\r\nHelped me, try your luck. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I am using gradle with eclipse and faced the same challenge today and tried a number of ways to resolve but the only way which helped me was to run command <code>gradlew clean</code> . </p>\n\n<blockquote>\n  <p>P.S. => Don't combine the \"build\" with the above mentioned command.</p>\n</blockquote>\n\n<p>Helped me, try your luck. </p>\n"},{"tags":[],"owner":{"account_id":3619884,"reputation":571,"user_id":3018906,"display_name":"user3018906"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1580029871,"creation_date":1580028928,"answer_id":59916876,"question_id":1052978,"body_markdown":"Enabling **[x] Use temporary JAR to specify classpath (to avoid classpath length limitations)** inside the *Classpath tab* of the *Run configuration* did the trick for me.\r\n\r\nIf your project is huge and you have lots of dependencies from other sibling projects and maven dependencies, you might hit the classpath length limitations and this seems to be the only solution (apart from making the directory to you local maven repo shorter (ours already starts at c:/m2)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tVFx9.png","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Enabling <strong>[x] Use temporary JAR to specify classpath (to avoid classpath length limitations)</strong> inside the <em>Classpath tab</em> of the <em>Run configuration</em> did the trick for me.</p>\n\n<p>If your project is huge and you have lots of dependencies from other sibling projects and maven dependencies, you might hit the classpath length limitations and this seems to be the only solution (apart from making the directory to you local maven repo shorter (ours already starts at c:/m2)</p>\n\n<p><a href=\"https://i.stack.imgur.com/tVFx9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tVFx9.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":18511494,"reputation":51,"user_id":13486574,"display_name":"Adligo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603068997,"creation_date":1603068997,"answer_id":64419820,"question_id":1052978,"body_markdown":"I suggest trying adding this to the VM arguments;\r\n\r\n    -verbose:class -verbose:module -Xdiag\r\n\r\nThen you can debug it from Eclipse which should print out some message like;\r\n\r\n    java.lang.ClassNotFoundException: org.adligo.somewhere.Foo\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \tat java.base/java.lang.Class.forName0(Native Method)\r\n    \tat java.base/java.lang.Class.forName(Class.java:398)\r\n    \tat java.base/sun.launcher.LauncherHelper.loadMainClass(LauncherHelper.java:760)\r\n    \tat java.base/sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:655)\r\n\r\nFrom this you can set a breakpoint on LancherHelper.java 760 to debug the Eclipse Lanucher itself.  In my case I noticed that user classpath appeared to be null, even though I have many jars in it in the Lanuch config.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I suggest trying adding this to the VM arguments;</p>\n<pre><code>-verbose:class -verbose:module -Xdiag\n</code></pre>\n<p>Then you can debug it from Eclipse which should print out some message like;</p>\n<pre><code>java.lang.ClassNotFoundException: org.adligo.somewhere.Foo\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:398)\n    at java.base/sun.launcher.LauncherHelper.loadMainClass(LauncherHelper.java:760)\n    at java.base/sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:655)\n</code></pre>\n<p>From this you can set a breakpoint on LancherHelper.java 760 to debug the Eclipse Lanucher itself.  In my case I noticed that user classpath appeared to be null, even though I have many jars in it in the Lanuch config.</p>\n"},{"tags":[],"owner":{"account_id":19938363,"reputation":11,"user_id":14610566,"display_name":"SATHIYA BALAKRISHNAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604989396,"creation_date":1604989396,"answer_id":64763858,"question_id":1052978,"body_markdown":"Make sure if your test class working before , but you facing issue all of sudden. then **clean your project and build it again**. Make sure project has been configured in build path as read above article.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Make sure if your test class working before , but you facing issue all of sudden. then <strong>clean your project and build it again</strong>. Make sure project has been configured in build path as read above article.</p>\n"},{"tags":[],"owner":{"account_id":15359861,"reputation":11,"user_id":13544041,"display_name":"Eduardo de Lucca"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611396103,"creation_date":1611342993,"answer_id":65851425,"question_id":1052978,"body_markdown":"Well, you can solve this problem basically by creating a new project.\r\n\r\n 1. Close the project (save the code in another folder on your computer).\r\n 2. Create a new project (add a new final directory and do not leave the default directory selected).\r\n 3. Remake your previous project adding the code saved before.\r\n\r\nThis happens because probably you created a project and didn&#39;t select a directory/folder or something like that.\r\nI hope had helped you!","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Well, you can solve this problem basically by creating a new project.</p>\n<ol>\n<li>Close the project (save the code in another folder on your computer).</li>\n<li>Create a new project (add a new final directory and do not leave the default directory selected).</li>\n<li>Remake your previous project adding the code saved before.</li>\n</ol>\n<p>This happens because probably you created a project and didn't select a directory/folder or something like that.\nI hope had helped you!</p>\n"},{"tags":[],"owner":{"account_id":22238865,"reputation":1,"user_id":16473736,"display_name":"David Ohio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629013959,"creation_date":1629013959,"answer_id":68789665,"question_id":1052978,"body_markdown":"If those don&#39;t work in eclipse try:\r\n**Alt + Shift + X** and you will see 5 options at the bottom right of your screen. Choose the Java Application and it&#39;ll work","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>If those don't work in eclipse try:\n<strong>Alt + Shift + X</strong> and you will see 5 options at the bottom right of your screen. Choose the Java Application and it'll work</p>\n"},{"tags":[],"owner":{"account_id":21599958,"reputation":41,"user_id":15928285,"display_name":"Mr.A"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644221254,"creation_date":1644221254,"answer_id":71015225,"question_id":1052978,"body_markdown":"**For Hybris Project, I fixed the issue by applying below changes in Build Path. I selected Project and clicked on Apply and Close.**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OuumC.png","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p><strong>For Hybris Project, I fixed the issue by applying below changes in Build Path. I selected Project and clicked on Apply and Close.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/OuumC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OuumC.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1685427241,"post_id":76357864,"comment_id":134653886,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76357864/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":9260360,"reputation":1,"user_id":6877675,"display_name":"user6877675"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685367566,"creation_date":1685367476,"answer_id":76357864,"question_id":1052978,"body_markdown":"If you are in Eclipse run time, it means that you already need to export the required packages through Manifest.MF file.\r\n\r\nExport-Package: Name of the Package\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>If you are in Eclipse run time, it means that you already need to export the required packages through Manifest.MF file.</p>\n<p>Export-Package: Name of the Package</p>\n"},{"tags":[],"owner":{"account_id":8511659,"reputation":19,"user_id":6381507,"display_name":"RangaM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687362190,"creation_date":1687362190,"answer_id":76525036,"question_id":1052978,"body_markdown":"You must have pom.xml file. You will get class not found error in one more case-\r\nif any of the dependency is not resolved- means corresponding jar is not downloaded in the repository.\r\n\r\nI had similar issue and I tried cleaning, building project multiple times but not much help. \r\n\r\nThen there below entry for this dependency which was showing as mising, then I manually downloade it and placed in the repository. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;oracle&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${ojdbc.verison}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThen, Run -&gt; maven clean\r\nMaven -&gt; Update projects -&gt; select the project -&gt; force update snapshots and update offline.\r\n\r\nThis will resolve the issue.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>You must have pom.xml file. You will get class not found error in one more case-\nif any of the dependency is not resolved- means corresponding jar is not downloaded in the repository.</p>\n<p>I had similar issue and I tried cleaning, building project multiple times but not much help.</p>\n<p>Then there below entry for this dependency which was showing as mising, then I manually downloade it and placed in the repository.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;oracle&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n            &lt;version&gt;${ojdbc.verison}&lt;/version&gt;\n        &lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Then, Run -&gt; maven clean\nMaven -&gt; Update projects -&gt; select the project -&gt; force update snapshots and update offline.</p>\n<p>This will resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":28589404,"reputation":1,"user_id":21888982,"display_name":"CouponCode"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1702057886,"creation_date":1702057886,"answer_id":77628374,"question_id":1052978,"body_markdown":"Eclipse is a confused p.o.s. You can probably look in the built jar or war and clearly see the class file is there. I&#39;ve come to realize this error means that Eclipse is out of sync with the files on disk. Right-click the project and click Refresh and then try again. Usually that will fix the ClassNotFoundException startup errors.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Eclipse is a confused p.o.s. You can probably look in the built jar or war and clearly see the class file is there. I've come to realize this error means that Eclipse is out of sync with the files on disk. Right-click the project and click Refresh and then try again. Usually that will fix the ClassNotFoundException startup errors.</p>\n"}],"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406160,"favorite_count":0,"down_vote_count":1,"up_vote_count":103,"accepted_answer_id":1062435,"answer_count":45,"score":102,"last_activity_date":1702057886,"creation_date":1246114877,"question_id":1052978,"body_markdown":"When trying to start my JUnit-Test out of Eclipse, I get a &quot;ClassNotFoundException&quot;. When running &quot;mvn test&quot; from console - everything works fine. Also, there are no problems reported in Eclipse.\r\n\r\nMy project structure is the following:\r\n\r\n - parent project (pom-packaging)\r\n  - Web project (war-packaging - my JUnit-test is in here)\r\n  - Flex project\r\n  - Configuration project\r\n\r\n\r\n----------\r\n\r\nedit: How can the class not be found? It&#39;s a simple HelloWorld-Application with no special libraries.\r\n\r\nHere&#39;s my JUnit&#39;s run-configuration:\r\n![alt text][1]\r\n\r\n\r\n  [1]: http://www.walkner.biz/_temp/runconfig.png\r\n\r\n\r\n----------\r\n\r\nTestclass (but as I said; it doesn&#39;t work with a simple HelloWorld either...):\r\n\r\n    import org.junit.After;\r\n    import org.junit.Assert;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n    import biz.prognoserechnung.domain.User;\r\n    import biz.prognoserechnung.domain.UserRepository;\r\n    import biz.prognoserechnung.domain.hibernate.UserHibernateDao;\r\n\r\n    public class UserDaoTest {\r\n    /**\r\n     * the applicationcontext.\r\n     */\r\n    private ApplicationContext ctx = null;\r\n\r\n    /**\r\n     * the user itself.\r\n     */\r\n    private User record = null;\r\n\r\n    /**\r\n     * Interface for the user.\r\n     */\r\n    private UserRepository dao = null;\r\n\r\n    @Before\r\n    public void setUp() throws Exception {\r\n\tString[] paths = { &quot;WEB-INF/applicationContext.xml&quot; };\r\n\tctx = new ClassPathXmlApplicationContext(paths);\r\n\tdao = (UserHibernateDao) ctx.getBean(&quot;userRepository&quot;);\r\n    }\r\n\r\n    @After\r\n    public void tearDown() throws Exception {\r\n\tdao = null;\r\n    }\r\n\r\n    @Test\r\n    public final void testIsUser() throws Exception {\r\n\tAssert.assertTrue(dao.isUser(&quot;John&quot;, &quot;Doe&quot;));\r\n    }\r\n\r\n    @Test\r\n        public final void testIsNoUser() throws Exception {\r\n    \tAssert.assertFalse(dao.isUser(&quot;not&quot;, &quot;existing&quot;));\r\n            Assert.assertFalse(dao.isUser(null, null));\r\n            Assert.assertFalse(dao.isUser(&quot;&quot;, &quot;&quot;));\r\n        }\r\n    }\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>When trying to start my JUnit-Test out of Eclipse, I get a \"ClassNotFoundException\". When running \"mvn test\" from console - everything works fine. Also, there are no problems reported in Eclipse.</p>\n\n<p>My project structure is the following:</p>\n\n<ul>\n<li>parent project (pom-packaging)\n\n<ul>\n<li>Web project (war-packaging - my JUnit-test is in here)</li>\n<li>Flex project</li>\n<li>Configuration project</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>edit: How can the class not be found? It's a simple HelloWorld-Application with no special libraries.</p>\n\n<p>Here's my JUnit's run-configuration:\n<a href=\"http://www.walkner.biz/_temp/runconfig.png\">alt text http://www.walkner.biz/_temp/runconfig.png</a></p>\n\n<hr>\n\n<p>Testclass (but as I said; it doesn't work with a simple HelloWorld either...):</p>\n\n<pre><code>import org.junit.After;\nimport org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport biz.prognoserechnung.domain.User;\nimport biz.prognoserechnung.domain.UserRepository;\nimport biz.prognoserechnung.domain.hibernate.UserHibernateDao;\n\npublic class UserDaoTest {\n/**\n * the applicationcontext.\n */\nprivate ApplicationContext ctx = null;\n\n/**\n * the user itself.\n */\nprivate User record = null;\n\n/**\n * Interface for the user.\n */\nprivate UserRepository dao = null;\n\n@Before\npublic void setUp() throws Exception {\nString[] paths = { \"WEB-INF/applicationContext.xml\" };\nctx = new ClassPathXmlApplicationContext(paths);\ndao = (UserHibernateDao) ctx.getBean(\"userRepository\");\n}\n\n@After\npublic void tearDown() throws Exception {\ndao = null;\n}\n\n@Test\npublic final void testIsUser() throws Exception {\nAssert.assertTrue(dao.isUser(\"John\", \"Doe\"));\n}\n\n@Test\n    public final void testIsNoUser() throws Exception {\n    Assert.assertFalse(dao.isUser(\"not\", \"existing\"));\n        Assert.assertFalse(dao.isUser(null, null));\n        Assert.assertFalse(dao.isUser(\"\", \"\"));\n    }\n}\n</code></pre>\n"},{"tags":["java","garbage-collection","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"score":18,"creation_date":1252412473,"post_id":1393486,"comment_id":1234445,"body_markdown":"This sounds very interesting. I&#39;d love if someone could post some code that generates this.","body":"This sounds very interesting. I&#39;d love if someone could post some code that generates this."},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":2,"creation_date":1256289017,"post_id":1393486,"comment_id":1478372,"body_markdown":"I simply found the problem, that lead to too much memory-usage, near to the limit of the heap. A simple solution could be simply to give some more Heap-memory to the Java-Engine (-Xmx) but this only helps, if the application needs exactly as much memory, as the heap-limit before was set.","body":"I simply found the problem, that lead to too much memory-usage, near to the limit of the heap. A simple solution could be simply to give some more Heap-memory to the Java-Engine (-Xmx) but this only helps, if the application needs exactly as much memory, as the heap-limit before was set."},{"owner":{"account_id":46067,"reputation":8871,"user_id":135982,"accept_rate":64,"display_name":"Vik"},"score":0,"creation_date":1350104572,"post_id":1393486,"comment_id":17433750,"body_markdown":"also check out http://xmlandmore.blogspot.com/2011/05/diagnosing-javalangoutofmemory.html","body":"also check out <a href=\"http://xmlandmore.blogspot.com/2011/05/diagnosing-javalangoutofmemory.html\" rel=\"nofollow noreferrer\">xmlandmore.blogspot.com/2011/05/&hellip;</a>"},{"owner":{"account_id":3970989,"reputation":177,"user_id":3275600,"accept_rate":29,"display_name":"lulu"},"score":1,"creation_date":1399977301,"post_id":1393486,"comment_id":36280854,"body_markdown":"@Mnementh i had given an answer here check whether it helps  http://stackoverflow.com/questions/11091516/exception-in-thread-main-java-lang-outofmemoryerror-gc-overhead-limit-exceede","body":"@Mnementh i had given an answer here check whether it helps  <a href=\"http://stackoverflow.com/questions/11091516/exception-in-thread-main-java-lang-outofmemoryerror-gc-overhead-limit-exceede\" title=\"exception in thread main java lang outofmemoryerror gc overhead limit exceede\">stackoverflow.com/questions/11091516/&hellip;</a>"},{"owner":{"account_id":1296878,"reputation":2027,"user_id":1247705,"accept_rate":71,"display_name":"Tim"},"score":16,"creation_date":1421951118,"post_id":1393486,"comment_id":44567846,"body_markdown":"@SimonKuang Note that there are multiple `OutOfMemoryError` scenarios for which increasing the heap isn&#39;t a valid solution: running out of native threads and running out of perm gen (which is separate from heap) are two examples.  Be careful about making overly broad statements about `OutOfMemoryErrors`; there&#39;s an unexpectedly diverse set of things that can cause them.","body":"@SimonKuang Note that there are multiple <code>OutOfMemoryError</code> scenarios for which increasing the heap isn&#39;t a valid solution: running out of native threads and running out of perm gen (which is separate from heap) are two examples.  Be careful about making overly broad statements about <code>OutOfMemoryErrors</code>; there&#39;s an unexpectedly diverse set of things that can cause them."},{"owner":{"account_id":970899,"reputation":13942,"user_id":993494,"accept_rate":34,"display_name":"Thorsten Niehues"},"score":3,"creation_date":1510655998,"post_id":1393486,"comment_id":81517207,"body_markdown":"How did you solve the issue??","body":"How did you solve the issue??"},{"owner":{"account_id":1557703,"reputation":192,"user_id":1448296,"accept_rate":80,"display_name":"Parasu"},"score":2,"creation_date":1510720800,"post_id":1393486,"comment_id":81550132,"body_markdown":"This error happened and still happening for me with Jdk1.8.0_91","body":"This error happened and still happening for me with Jdk1.8.0_91"},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":1,"creation_date":1510755448,"post_id":1393486,"comment_id":81569670,"body_markdown":"@Thorsten Niehues: Well, I solved it basically by using less memory. As the top answer shows, this is a situation with very few remaining memory, while creating a lot of temporary objects. Basically there is no way around it, you have to reduce memory usage.","body":"@Thorsten Niehues: Well, I solved it basically by using less memory. As the top answer shows, this is a situation with very few remaining memory, while creating a lot of temporary objects. Basically there is no way around it, you have to reduce memory usage."},{"owner":{"account_id":251813,"reputation":1963,"user_id":529442,"display_name":"Eugene Gr. Philippov"},"score":0,"creation_date":1549113585,"post_id":1393486,"comment_id":95792398,"body_markdown":"@Buhb I just had this error on Hadoop 3.2.0 running a local (non-cluster) job of sorting 28GB of data. It was working for several hours and exploded with this error just before the end of job. Normally this dataset with this map-reduce task completes okay.","body":"@Buhb I just had this error on Hadoop 3.2.0 running a local (non-cluster) job of sorting 28GB of data. It was working for several hours and exploded with this error just before the end of job. Normally this dataset with this map-reduce task completes okay."},{"owner":{"account_id":5320869,"reputation":866,"user_id":4244347,"accept_rate":50,"display_name":"smaug"},"score":1,"creation_date":1550591792,"post_id":1393486,"comment_id":96320526,"body_markdown":"For future visitors - Any answer which simply tells you to increase the heap size (search for `javaMaxHeapSize` or `Xmx`) might solve your problem, if you are working with that amount of data. But you really need to look at your code to limit data usage. Try sampling a smaller amount of data or limiting the records you process. If you have no other option, run your code on a machine in the cloud which can provide you with as much memory as you want.","body":"For future visitors - Any answer which simply tells you to increase the heap size (search for <code>javaMaxHeapSize</code> or <code>Xmx</code>) might solve your problem, if you are working with that amount of data. But you really need to look at your code to limit data usage. Try sampling a smaller amount of data or limiting the records you process. If you have no other option, run your code on a machine in the cloud which can provide you with as much memory as you want."},{"owner":{"account_id":535477,"reputation":1551,"user_id":904963,"accept_rate":80,"display_name":"user904963"},"score":1,"creation_date":1644164123,"post_id":1393486,"comment_id":125527620,"body_markdown":"@smaug Machines in the cloud are still physical computers somewhere. Each type you can rent has a certain amount of RAM. Another consideration is that larger machines will cost way more money than smaller ones.","body":"@smaug Machines in the cloud are still physical computers somewhere. Each type you can rent has a certain amount of RAM. Another consideration is that larger machines will cost way more money than smaller ones."}],"answers":[{"comments":[{"owner":{"account_id":6328,"reputation":10132,"user_id":10592,"accept_rate":79,"display_name":"Tim Cooper"},"score":13,"creation_date":1276954126,"post_id":1393503,"comment_id":3151554,"body_markdown":"Would it be correct to summarise your answer as follows:  &quot;It&#39;s just like an &#39;Out of Java Heap space&#39; error.  Give it more memory with -Xmx.&quot;  ?","body":"Would it be correct to summarise your answer as follows:  &quot;It&#39;s just like an &#39;Out of Java Heap space&#39; error.  Give it more memory with -Xmx.&quot;  ?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":70,"creation_date":1277048925,"post_id":1393503,"comment_id":3156128,"body_markdown":"@Tim: No, that wouldn&#39;t be correct. While giving it more memory *could* reduce the problem, you should also look at your code and see why it produces that amount of garbage and why your code skims just below the &quot;out of memory&quot; mark. It&#39;s often a sign of broken code.","body":"@Tim: No, that wouldn&#39;t be correct. While giving it more memory <i>could</i> reduce the problem, you should also look at your code and see why it produces that amount of garbage and why your code skims just below the &quot;out of memory&quot; mark. It&#39;s often a sign of broken code."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":11,"creation_date":1291059017,"post_id":1393503,"comment_id":4676701,"body_markdown":"Thanks, it seems Oracle isn&#39;t actually that good in data migration, they broke the link.","body":"Thanks, it seems Oracle isn&#39;t actually that good in data migration, they broke the link."},{"owner":{"account_id":143382,"reputation":2912,"user_id":351688,"accept_rate":91,"display_name":"A.W."},"score":0,"creation_date":1330602239,"post_id":1393503,"comment_id":12051428,"body_markdown":"I am investigating the same problem in a application running on Weblogic. It runs on a server shared with other application running on Weblogic. Does the error mean it always has to do with my application therefore can rule out problems in the other applications on the same server? Or is there a possibility other applications can interfere with your environment. Just asking cause it&#39;s hard to find the cause of memory leaks.","body":"I am investigating the same problem in a application running on Weblogic. It runs on a server shared with other application running on Weblogic. Does the error mean it always has to do with my application therefore can rule out problems in the other applications on the same server? Or is there a possibility other applications can interfere with your environment. Just asking cause it&#39;s hard to find the cause of memory leaks."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":5,"creation_date":1330602524,"post_id":1393503,"comment_id":12051521,"body_markdown":"@Guus: if multiple applications run in the same JVM, then yes, they can easily influence each other. It&#39;ll be hard to tell which one is misbehaving. Separating the applications into distinct JVMs might be the easiest solution.","body":"@Guus: if multiple applications run in the same JVM, then yes, they can easily influence each other. It&#39;ll be hard to tell which one is misbehaving. Separating the applications into distinct JVMs might be the easiest solution."},{"owner":{"account_id":143382,"reputation":2912,"user_id":351688,"accept_rate":91,"display_name":"A.W."},"score":0,"creation_date":1330699577,"post_id":1393503,"comment_id":12080445,"body_markdown":"@Joachim: server is located at a client. I checked with them and the applications do run in separate JVMs. I stress tested the app on our server and cannot get it to go out of memory. Could another process (java or non java) on the server somehow be the cause of my app to go out of memory?","body":"@Joachim: server is located at a client. I checked with them and the applications do run in separate JVMs. I stress tested the app on our server and cannot get it to go out of memory. Could another process (java or non java) on the server somehow be the cause of my app to go out of memory?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1330706227,"post_id":1393503,"comment_id":12083171,"body_markdown":"@Guus: no, especially not with the error message discussed here. It&#39;s more likely to be an artifact of configuration and/or specific loads that trigger the problem. But you really ought to ask this in a separate question (with as much detail as possible), it&#39;s getting too much for the comments here.","body":"@Guus: no, especially not with the error message discussed here. It&#39;s more likely to be an artifact of configuration and/or specific loads that trigger the problem. But you really ought to ask this in a separate question (with as much detail as possible), it&#39;s getting too much for the comments here."},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":3,"creation_date":1375230401,"post_id":1393503,"comment_id":26250028,"body_markdown":"@TimCooper - that&#39;s honestly a poor answer even for the Out of Java Heap space error, though it&#39;s certainly sometimes necessary.  To trigger this Error, however, you really have to be beating up the JVM, it&#39;s quite good at efficiently collecting garbage.  If you&#39;re seeing this error, it is *far* more likely you&#39;re doing something violently cruel to the JVM than it is that you&#39;re simply overloading the heap.","body":"@TimCooper - that&#39;s honestly a poor answer even for the Out of Java Heap space error, though it&#39;s certainly sometimes necessary.  To trigger this Error, however, you really have to be beating up the JVM, it&#39;s quite good at efficiently collecting garbage.  If you&#39;re seeing this error, it is <i>far</i> more likely you&#39;re doing something violently cruel to the JVM than it is that you&#39;re simply overloading the heap."},{"owner":{"account_id":1043675,"reputation":3915,"user_id":1049112,"accept_rate":75,"display_name":"onionjake"},"score":0,"creation_date":1395073921,"post_id":1393503,"comment_id":34161760,"body_markdown":"Is this specific to Java 6?  Does the same issue happen in Java 7?","body":"Is this specific to Java 6?  Does the same issue happen in Java 7?"},{"owner":{"account_id":320703,"reputation":4309,"user_id":639119,"display_name":"Zds"},"score":3,"creation_date":1399457865,"post_id":1393503,"comment_id":36066207,"body_markdown":"@TimCooper: Just giving more memory is often quite.. blunt tool for resolving issues like this. It&#39;s often more useful to look first at if you create lot of new objects, but also if you memory is properly split. Often the problem is that one of the three areas is at upper limit, but the others have plenty of free space. Then re-partitioning the JVM memory pools would help.","body":"@TimCooper: Just giving more memory is often quite.. blunt tool for resolving issues like this. It&#39;s often more useful to look first at if you create lot of new objects, but also if you memory is properly split. Often the problem is that one of the three areas is at upper limit, but the others have plenty of free space. Then re-partitioning the JVM memory pools would help."},{"owner":{"account_id":9662,"reputation":8462,"user_id":17945,"accept_rate":36,"display_name":"reinierpost"},"score":4,"creation_date":1455887893,"post_id":1393503,"comment_id":58703454,"body_markdown":"I&#39;d just had this happen to me with Java 7 and a web application containing 2001670 lines of Java code, of which I wrote about 5. &quot;You should also look at your code&quot; is not so easy in such cases.","body":"I&#39;d just had this happen to me with Java 7 and a web application containing 2001670 lines of Java code, of which I wrote about 5. &quot;You should also look at your code&quot; is not so easy in such cases."},{"owner":{"account_id":1967071,"reputation":1336,"user_id":1767021,"accept_rate":76,"display_name":"deldev"},"score":0,"creation_date":1487970120,"post_id":1393503,"comment_id":72040005,"body_markdown":"Looking for a help to my issue, I&#39;ve found this http://stackoverflow.com/questions/110083/which-loop-has-better-performance-why#110389. The GC would be affected whether create an object inside or out a loop?","body":"Looking for a help to my issue, I&#39;ve found this <a href=\"http://stackoverflow.com/questions/110083/which-loop-has-better-performance-why#110389\" title=\"which loop has better performance why%23110389\">stackoverflow.com/questions/110083/&hellip;</a>. The GC would be affected whether create an object inside or out a loop?"},{"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"score":0,"creation_date":1586339881,"post_id":1393503,"comment_id":108090189,"body_markdown":"Today I study different GCs for the same code. SerialGC does not have this problem, but ParallelGC does. I don&#39;t know the reason yet.","body":"Today I study different GCs for the same code. SerialGC does not have this problem, but ParallelGC does. I don&#39;t know the reason yet."},{"owner":{"account_id":12679757,"reputation":739,"user_id":9213957,"display_name":"Soheil Rahsaz"},"score":0,"creation_date":1632564897,"post_id":1393503,"comment_id":122530670,"body_markdown":"@TimCooper, I had Out of Java Heap error at first , then I increased it&#39;s memory, now I&#39;m getting GC overhead error! :D","body":"@TimCooper, I had Out of Java Heap error at first , then I increased it&#39;s memory, now I&#39;m getting GC overhead error! :D"}],"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":14,"down_vote_count":3,"up_vote_count":865,"is_accepted":true,"score":862,"last_activity_date":1577958068,"creation_date":1252409954,"answer_id":1393503,"question_id":1393486,"body_markdown":"This message means that for some reason the garbage collector is taking an excessive amount of time (by default 98% of all CPU time of the process) and recovers very little memory in each run (by default 2% of the heap).\r\n\r\nThis effectively means that your program stops doing any progress and is busy running only the garbage collection at all time.\r\n\r\nTo prevent your application from soaking up CPU time without getting anything done, the JVM throws this `Error` so that you have a chance of diagnosing the problem.\r\n\r\nThe rare cases where I&#39;ve seen this happen is where some code was creating tons of temporary objects and tons of weakly-referenced objects in an already very memory-constrained environment.\r\n\r\nCheck out the Java GC tuning guide, which is available for various Java versions and contains sections about this specific problem:\r\n\r\n- [Java 11 tuning guide][1] has dedicated sections on excessive GC for different garbage collectors:\r\n  - for the [Parallel Collector][2]\r\n  - for the [Concurrent Mark Sweep (CMS) Collector][3]\r\n  - there is no mention of this specific error condition for the Garbage First (G1) collector.\r\n- [Java 8 tuning guide][4] and its [Excessive GC section][5]\r\n- [Java 6 tuning guide][6] and its [Excessive GC section][7].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/gctuning/\r\n  [2]: https://docs.oracle.com/en/java/javase/11/gctuning/parallel-collector1.html#GUID-31F3D722-5F93-41D6-817A-C6B91C095B6F\r\n  [3]: https://docs.oracle.com/en/java/javase/11/gctuning/concurrent-mark-sweep-cms-collector.html#GUID-8A7DC9B6-0448-4AC5-8F6D-41C83B6C618E\r\n  [4]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html\r\n  [5]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/parallel.html#parallel_collector_excessive_gc\r\n  [6]: http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\r\n  [7]: http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>This message means that for some reason the garbage collector is taking an excessive amount of time (by default 98% of all CPU time of the process) and recovers very little memory in each run (by default 2% of the heap).</p>\n\n<p>This effectively means that your program stops doing any progress and is busy running only the garbage collection at all time.</p>\n\n<p>To prevent your application from soaking up CPU time without getting anything done, the JVM throws this <code>Error</code> so that you have a chance of diagnosing the problem.</p>\n\n<p>The rare cases where I've seen this happen is where some code was creating tons of temporary objects and tons of weakly-referenced objects in an already very memory-constrained environment.</p>\n\n<p>Check out the Java GC tuning guide, which is available for various Java versions and contains sections about this specific problem:</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/\" rel=\"noreferrer\">Java 11 tuning guide</a> has dedicated sections on excessive GC for different garbage collectors:\n\n<ul>\n<li>for the <a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/parallel-collector1.html#GUID-31F3D722-5F93-41D6-817A-C6B91C095B6F\" rel=\"noreferrer\">Parallel Collector</a></li>\n<li>for the <a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/concurrent-mark-sweep-cms-collector.html#GUID-8A7DC9B6-0448-4AC5-8F6D-41C83B6C618E\" rel=\"noreferrer\">Concurrent Mark Sweep (CMS) Collector</a></li>\n<li>there is no mention of this specific error condition for the Garbage First (G1) collector.</li>\n</ul></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html\" rel=\"noreferrer\">Java 8 tuning guide</a> and its <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/parallel.html#parallel_collector_excessive_gc\" rel=\"noreferrer\">Excessive GC section</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\" rel=\"noreferrer\">Java 6 tuning guide</a> and its <a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom\" rel=\"noreferrer\">Excessive GC section</a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":94,"creation_date":1252414654,"post_id":1393522,"comment_id":1234625,"body_markdown":"&quot;You can turn this off...&quot; but the OP most likely should not do this.","body":"&quot;You can turn this off...&quot; but the OP most likely should not do this."},{"owner":{"account_id":20739,"reputation":3064,"user_id":49847,"accept_rate":40,"display_name":"Susheel Javadi"},"score":2,"creation_date":1273840628,"post_id":1393522,"comment_id":2875372,"body_markdown":"Can you tell me the difference between &quot;-XX&quot; and &quot;-Xmx&quot;?  I was able to turn it off using the &quot;-Xmx&quot; option too.","body":"Can you tell me the difference between &quot;-XX&quot; and &quot;-Xmx&quot;?  I was able to turn it off using the &quot;-Xmx&quot; option too."},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":23,"creation_date":1298026300,"post_id":1393522,"comment_id":5639590,"body_markdown":"Replying to a very old comment here, but... @Bart The `-XX:` at the start of several command line options is a flag of sorts indicating that this option is highly VM-specific and unstable (subject to change without notice in future versions).  In any case, the `-XX:-UseGCOverheadLimit` flag tells the VM to disable GC overhead limit checking (actually &quot;turns it off&quot;), whereas your `-Xmx` command merely increased the heap.  In the latter case the GC overhead checking was still *running*, it just sounds like a bigger heap solved the GC thrashing issues *in your case* (this will not always help).","body":"Replying to a very old comment here, but... @Bart The <code>-XX:</code> at the start of several command line options is a flag of sorts indicating that this option is highly VM-specific and unstable (subject to change without notice in future versions).  In any case, the <code>-XX:-UseGCOverheadLimit</code> flag tells the VM to disable GC overhead limit checking (actually &quot;turns it off&quot;), whereas your <code>-Xmx</code> command merely increased the heap.  In the latter case the GC overhead checking was still <i>running</i>, it just sounds like a bigger heap solved the GC thrashing issues <i>in your case</i> (this will not always help)."},{"owner":{"account_id":1857553,"reputation":1410,"user_id":1682819,"display_name":"RobbZ"},"score":1,"creation_date":1457521152,"post_id":1393522,"comment_id":59440299,"body_markdown":"In my application (reading a large Excel file in Talend) this did not work and from other users explanation I understand why.  This just disables the error but the problem persists and your application will just spend most of its time handling GC.  Our server had plenty of RAM so I used the suggestions by Vitalii to increase the heap size.","body":"In my application (reading a large Excel file in Talend) this did not work and from other users explanation I understand why.  This just disables the error but the problem persists and your application will just spend most of its time handling GC.  Our server had plenty of RAM so I used the suggestions by Vitalii to increase the heap size."},{"owner":{"account_id":2520097,"reputation":1974,"user_id":2190639,"accept_rate":72,"display_name":"Pievis"},"score":0,"creation_date":1549040285,"post_id":1393522,"comment_id":95774900,"body_markdown":"You will eventually get this error if your application is data intensive, clearing the memory and evading data leak is the best way out - but requires some time.","body":"You will eventually get this error if your application is data intensive, clearing the memory and evading data leak is the best way out - but requires some time."},{"owner":{"account_id":6812447,"reputation":2295,"user_id":5242161,"display_name":"Abhishek"},"score":0,"creation_date":1570452779,"post_id":1393522,"comment_id":102906881,"body_markdown":"Before trying out any of the above things I would suggest close the android studio and kill all Java/JVM related processes(or restart your system). One of the reasons for this error is way too many Java processes are running and GC is not able to run properly. Now open your android studio and try building it again if it still doesn&#39;t work you can increase the heap size as mentioned in earlier answers.","body":"Before trying out any of the above things I would suggest close the android studio and kill all Java/JVM related processes(or restart your system). One of the reasons for this error is way too many Java processes are running and GC is not able to run properly. Now open your android studio and try building it again if it still doesn&#39;t work you can increase the heap size as mentioned in earlier answers."},{"owner":{"account_id":1822229,"reputation":478,"user_id":1656012,"display_name":"Trenton Telge"},"score":0,"creation_date":1634911741,"post_id":1393522,"comment_id":123161877,"body_markdown":"I ended up having to use this option for a maven build that ate up around 4G of memory. I tried increasing the heap size with -Xmx8192M, but this flag is the only thing that worked.","body":"I ended up having to use this option for a maven build that ate up around 4G of memory. I tried increasing the heap size with -Xmx8192M, but this flag is the only thing that worked."},{"owner":{"account_id":13172026,"reputation":110,"user_id":9513994,"display_name":"Azee77"},"score":0,"creation_date":1672998855,"post_id":1393522,"comment_id":132403639,"body_markdown":"My jenkins slave is using :  `java -Xmx50G -jar slave.jar`   still facing the issue. Any help here?","body":"My jenkins slave is using :  <code>java -Xmx50G -jar slave.jar</code>   still facing the issue. Any help here?"}],"tags":[],"owner":{"account_id":45865,"reputation":11735,"user_id":135351,"accept_rate":80,"display_name":"dave"},"comment_count":8,"down_vote_count":4,"up_vote_count":253,"is_accepted":false,"score":249,"last_activity_date":1588974642,"creation_date":1252410196,"answer_id":1393522,"question_id":1393486,"body_markdown":"Quoting from Oracle&#39;s article [*&quot;Java SE 6 HotSpot[tm] Virtual Machine Garbage Collection Tuning&quot;*](https://www.oracle.com/java/technologies/javase/gc-tuning-6.html#par_gc.oom):\n\n&gt;**Excessive GC Time and OutOfMemoryError**\n&gt;\n&gt;The parallel collector will throw an OutOfMemoryError if too much time is being spent in garbage collection: if more than 98% of the total time is spent in garbage collection and less than 2% of the heap is recovered, an OutOfMemoryError will be thrown. This feature is designed to prevent applications from running for an extended period of time while making little or no progress because the heap is too small. If necessary, this feature can be disabled by adding the option `-XX:-UseGCOverheadLimit` to the command line.\n\nEDIT: looks like someone can type faster than me :)","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Quoting from Oracle's article <a href=\"https://www.oracle.com/java/technologies/javase/gc-tuning-6.html#par_gc.oom\" rel=\"noreferrer\"><em>&quot;Java SE 6 HotSpot[tm] Virtual Machine Garbage Collection Tuning&quot;</em></a>:</p>\n<blockquote>\n<p><strong>Excessive GC Time and OutOfMemoryError</strong></p>\n<p>The parallel collector will throw an OutOfMemoryError if too much time is being spent in garbage collection: if more than 98% of the total time is spent in garbage collection and less than 2% of the heap is recovered, an OutOfMemoryError will be thrown. This feature is designed to prevent applications from running for an extended period of time while making little or no progress because the heap is too small. If necessary, this feature can be disabled by adding the option <code>-XX:-UseGCOverheadLimit</code> to the command line.</p>\n</blockquote>\n<p>EDIT: looks like someone can type faster than me :)</p>\n"},{"comments":[{"owner":{"account_id":7236,"reputation":26100,"user_id":12484,"accept_rate":73,"display_name":"Jon Schneider"},"score":14,"creation_date":1333638922,"post_id":5640498,"comment_id":12830193,"body_markdown":"Please clarify: When you say &quot;Triggered n times&quot;, does that mean that a regular GC happened n times, or that the &quot;GC overhead limit exceeded&quot; error reported by the OP happened n times?","body":"Please clarify: When you say &quot;Triggered n times&quot;, does that mean that a regular GC happened n times, or that the &quot;GC overhead limit exceeded&quot; error reported by the OP happened n times?"},{"owner":{"account_id":5226322,"reputation":2046,"user_id":4178262,"display_name":"Mark Stewart"},"score":0,"creation_date":1573674103,"post_id":5640498,"comment_id":103962574,"body_markdown":"I tested just now using java 1.8.0_91 and never got an error/exception, and the &quot;Triggered n times&quot; was from counting up the number of lines in the `gc.log` file.  My tests show much fewer times overall, but fewest &quot;Triggers&quot; times  for BETTER, and now, BAD is &quot;badder&quot; than WORST now. My counts:  BAD: 26, WORSE: 22, BETTER 21.","body":"I tested just now using java 1.8.0_91 and never got an error/exception, and the &quot;Triggered n times&quot; was from counting up the number of lines in the <code>gc.log</code> file.  My tests show much fewer times overall, but fewest &quot;Triggers&quot; times  for BETTER, and now, BAD is &quot;badder&quot; than WORST now. My counts:  BAD: 26, WORSE: 22, BETTER 21."},{"owner":{"account_id":5226322,"reputation":2046,"user_id":4178262,"display_name":"Mark Stewart"},"score":0,"creation_date":1573674650,"post_id":5640498,"comment_id":103962812,"body_markdown":"I just added a &quot;WORST_YET&quot; modification where I define the `List&lt;Double&gt; list` in the *outer loop* instead of _before_ the outer loop, and Triggered 39 garbage collections.","body":"I just added a &quot;WORST_YET&quot; modification where I define the <code>List&lt;Double&gt; list</code> in the <i>outer loop</i> instead of <i>before</i> the outer loop, and Triggered 39 garbage collections."}],"tags":[],"owner":{"account_id":231645,"reputation":1390,"user_id":495987,"accept_rate":50,"display_name":"Mike"},"comment_count":3,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1588917858,"creation_date":1302636421,"answer_id":5640498,"question_id":1393486,"body_markdown":"It&#39;s usually the code. Here&#39;s a simple example:\r\n\r\n    import java.util.*;\r\n    \r\n    public class GarbageCollector {\r\n    \r\n        public static void main(String... args) {\r\n    \r\n            System.out.printf(&quot;Testing...%n&quot;);\r\n            List&lt;Double&gt; list = new ArrayList&lt;Double&gt;();\r\n            for (int outer = 0; outer &lt; 10000; outer++) {\r\n    \r\n                // list = new ArrayList&lt;Double&gt;(10000); // BAD\r\n                // list = new ArrayList&lt;Double&gt;(); // WORSE\r\n                list.clear(); // BETTER\r\n    \r\n                for (int inner = 0; inner &lt; 10000; inner++) {\r\n                    list.add(Math.random());\r\n                }\r\n    \r\n                if (outer % 1000 == 0) {\r\n                    System.out.printf(&quot;Outer loop at %d%n&quot;, outer);\r\n                }\r\n    \r\n            }\r\n            System.out.printf(&quot;Done.%n&quot;);\r\n        }\r\n    }\r\n\r\nUsing Java 1.6.0_24-b07 on a Windows 7 32 bit.\r\n\r\n    java -Xloggc:gc.log GarbageCollector\r\n\r\nThen look at `gc.log`\r\n\r\n - Triggered 444 times using BAD method\r\n - Triggered 666 times using WORSE method \r\n - Triggered 354 times using BETTER method\r\n\r\nNow granted, this is not the best test or the best design but when faced with a situation where you have no choice but implementing such a loop or when dealing with existing code that behaves badly, choosing to reuse objects instead of creating new ones can reduce the number of times the garbage collector gets in the way...","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>It's usually the code. Here's a simple example:</p>\n\n<pre><code>import java.util.*;\n\npublic class GarbageCollector {\n\n    public static void main(String... args) {\n\n        System.out.printf(\"Testing...%n\");\n        List&lt;Double&gt; list = new ArrayList&lt;Double&gt;();\n        for (int outer = 0; outer &lt; 10000; outer++) {\n\n            // list = new ArrayList&lt;Double&gt;(10000); // BAD\n            // list = new ArrayList&lt;Double&gt;(); // WORSE\n            list.clear(); // BETTER\n\n            for (int inner = 0; inner &lt; 10000; inner++) {\n                list.add(Math.random());\n            }\n\n            if (outer % 1000 == 0) {\n                System.out.printf(\"Outer loop at %d%n\", outer);\n            }\n\n        }\n        System.out.printf(\"Done.%n\");\n    }\n}\n</code></pre>\n\n<p>Using Java 1.6.0_24-b07 on a Windows 7 32 bit.</p>\n\n<pre><code>java -Xloggc:gc.log GarbageCollector\n</code></pre>\n\n<p>Then look at <code>gc.log</code></p>\n\n<ul>\n<li>Triggered 444 times using BAD method</li>\n<li>Triggered 666 times using WORSE method </li>\n<li>Triggered 354 times using BETTER method</li>\n</ul>\n\n<p>Now granted, this is not the best test or the best design but when faced with a situation where you have no choice but implementing such a loop or when dealing with existing code that behaves badly, choosing to reuse objects instead of creating new ones can reduce the number of times the garbage collector gets in the way...</p>\n"},{"comments":[{"owner":{"account_id":4509047,"reputation":3905,"user_id":3665698,"display_name":"mcoolive"},"score":11,"creation_date":1500367965,"post_id":8498644,"comment_id":77292041,"body_markdown":"I disagree with the third advice. Reuse existing objects do not save memory (do not leak old objects save memory :-) Moreover &quot;reuse existing object&quot; was a practice to relieve GC pressure. But it&#39;s NOT ALWAYS a good idea: with modern GC, we should avoid situations where old objects hold new ones because it can break some locality assumptions...","body":"I disagree with the third advice. Reuse existing objects do not save memory (do not leak old objects save memory :-) Moreover &quot;reuse existing object&quot; was a practice to relieve GC pressure. But it&#39;s NOT ALWAYS a good idea: with modern GC, we should avoid situations where old objects hold new ones because it can break some locality assumptions..."},{"owner":{"account_id":5226322,"reputation":2046,"user_id":4178262,"display_name":"Mark Stewart"},"score":0,"creation_date":1573845141,"post_id":8498644,"comment_id":104033792,"body_markdown":"@mcoolive:  For a somewhat contrived example, see the comments to answer https://stackoverflow.com/a/5640498/4178262 below; creating the `List` object inside the loop caused GC to be called 39 times instead of 22 times.","body":"@mcoolive:  For a somewhat contrived example, see the comments to answer <a href=\"https://stackoverflow.com/a/5640498/4178262\">stackoverflow.com/a/5640498/4178262</a> below; creating the <code>List</code> object inside the loop caused GC to be called 39 times instead of 22 times."},{"owner":{"account_id":5475193,"reputation":6876,"user_id":4353365,"display_name":"Francis"},"score":0,"creation_date":1699648071,"post_id":8498644,"comment_id":136562800,"body_markdown":"It&#39;s funny to call 1GB heap limit as a increase. Requirement was quite different previous decade.","body":"It&#39;s funny to call 1GB heap limit as a increase. Requirement was quite different previous decade."}],"tags":[],"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"comment_count":3,"down_vote_count":1,"up_vote_count":110,"is_accepted":false,"score":109,"last_activity_date":1323827057,"creation_date":1323827057,"answer_id":8498644,"question_id":1393486,"body_markdown":"If you are sure there are no [memory leaks][1] in your program, try to:\r\n\r\n 1. Increase the heap size, for example `-Xmx1g`.  \r\n 2. Enable the concurrent low pause collector `-XX:+UseConcMarkSweepGC`. \r\n 3. Reuse existing objects when possible to save some memory.\r\n\r\nIf necessary, the [limit check][2] can be disabled by adding the option `-XX:-UseGCOverheadLimit` to the command line.\r\n\r\n  [1]: http://www.ibm.com/developerworks/library/j-leaks/\r\n  [2]: http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>If you are sure there are no <a href=\"http://www.ibm.com/developerworks/library/j-leaks/\" rel=\"noreferrer\">memory leaks</a> in your program, try to:</p>\n\n<ol>\n<li>Increase the heap size, for example <code>-Xmx1g</code>.  </li>\n<li>Enable the concurrent low pause collector <code>-XX:+UseConcMarkSweepGC</code>. </li>\n<li>Reuse existing objects when possible to save some memory.</li>\n</ol>\n\n<p>If necessary, the <a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom\" rel=\"noreferrer\">limit check</a> can be disabled by adding the option <code>-XX:-UseGCOverheadLimit</code> to the command line.</p>\n"},{"comments":[{"owner":{"account_id":1241243,"reputation":10858,"user_id":1203797,"accept_rate":66,"display_name":"Blaze Tama"},"score":2,"creation_date":1417078239,"post_id":23628984,"comment_id":42824886,"body_markdown":"The android apps dont have `arguments` tab...what should we do to achieve this?","body":"The android apps dont have <code>arguments</code> tab...what should we do to achieve this?"},{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":3,"creation_date":1472110722,"post_id":23628984,"comment_id":65623049,"body_markdown":"What tool is that answer for? That was not an Eclipse question.","body":"What tool is that answer for? That was not an Eclipse question."},{"owner":{"account_id":297829,"reputation":3256,"user_id":603541,"accept_rate":60,"display_name":"Diego Queiroz"},"score":3,"creation_date":1484815903,"post_id":23628984,"comment_id":70668170,"body_markdown":"There is no &quot;minimum limit&quot;. -Xms is the initial size.","body":"There is no &quot;minimum limit&quot;. -Xms is the initial size."},{"owner":{"account_id":5205691,"reputation":325,"user_id":4163717,"accept_rate":71,"display_name":"JPerk"},"score":1,"creation_date":1497250228,"post_id":23628984,"comment_id":75979481,"body_markdown":"What is the max of maximum limit that could be set??","body":"What is the max of maximum limit that could be set??"},{"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"score":0,"creation_date":1606828593,"post_id":23628984,"comment_id":115075136,"body_markdown":"@JPerk the max is as much as the physical memory of your machine. However, other applications will compete over memory use if you try that.","body":"@JPerk the max is as much as the physical memory of your machine. However, other applications will compete over memory use if you try that."}],"tags":[],"owner":{"account_id":3795667,"reputation":791,"user_id":3392249,"accept_rate":53,"display_name":"chopss"},"comment_count":5,"down_vote_count":8,"up_vote_count":40,"is_accepted":false,"score":32,"last_activity_date":1456236277,"creation_date":1399977623,"answer_id":23628984,"question_id":1393486,"body_markdown":"Just increase the heap size a little by setting this option in\r\n\r\nRun → Run Configurations → Arguments → VM arguments\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    -Xms1024M -Xmx2048M\r\n\r\n**Xms** - for minimum limit\r\n\r\n**Xmx** - for maximum limit","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Just increase the heap size a little by setting this option in</p>\n\n<p>Run → Run Configurations → Arguments → VM arguments</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Xms1024M -Xmx2048M\n</code></pre>\n\n<p><strong>Xms</strong> - for minimum limit</p>\n\n<p><strong>Xmx</strong> - for maximum limit</p>\n"},{"comments":[{"owner":{"account_id":193629,"reputation":1087,"user_id":435478,"accept_rate":91,"display_name":"Hamza"},"score":0,"creation_date":1427589657,"post_id":27716421,"comment_id":46839458,"body_markdown":"the most simple way to fix this problem. Thanks :)","body":"the most simple way to fix this problem. Thanks :)"},{"owner":{"account_id":2557352,"reputation":361,"user_id":2219041,"display_name":"Abhinaba Basu"},"score":2,"creation_date":1430124486,"post_id":27716421,"comment_id":47905609,"body_markdown":"eclipse.ini file in jdev?","body":"eclipse.ini file in jdev?"},{"owner":{"account_id":1065931,"reputation":2603,"user_id":1066501,"accept_rate":100,"display_name":"zionpi"},"score":0,"creation_date":1461036053,"post_id":27716421,"comment_id":61003430,"body_markdown":"problems  unsolved even when the configuration has been changed to this.","body":"problems  unsolved even when the configuration has been changed to this."},{"owner":{"account_id":3962804,"reputation":1490,"user_id":3269543,"accept_rate":83,"display_name":"Phoenix"},"score":0,"creation_date":1470374018,"post_id":27716421,"comment_id":64934102,"body_markdown":"problem not yet solved. do you have / know any other way?","body":"problem not yet solved. do you have / know any other way?"},{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":2,"creation_date":1472110749,"post_id":27716421,"comment_id":65623067,"body_markdown":"The OP did not ask an Eclipse question.","body":"The OP did not ask an Eclipse question."},{"owner":{"account_id":2976898,"reputation":341,"user_id":2527775,"accept_rate":75,"display_name":"Freitags"},"score":2,"creation_date":1499675952,"post_id":27716421,"comment_id":76988159,"body_markdown":"This &quot;answer&quot; does not answer the question above.","body":"This &quot;answer&quot; does not answer the question above."}],"tags":[],"owner":{"account_id":38907,"reputation":53159,"user_id":111988,"accept_rate":74,"display_name":"Sunil Kumar Sahoo"},"comment_count":6,"down_vote_count":9,"up_vote_count":22,"is_accepted":false,"score":13,"last_activity_date":1556004949,"creation_date":1420002589,"answer_id":27716421,"question_id":1393486,"body_markdown":"For me, the following steps worked:\r\n\r\n1. Open the `eclipse.ini` file\r\n2. Change\r\n\r\n    &lt;!-- language: lang-none --&gt;\r\n\r\n        -Xms40m\r\n        -Xmx512m\r\n\r\n    to\r\n\r\n    &lt;!-- language: lang-none --&gt;\r\n\r\n        -Xms512m\r\n        -Xmx1024m\r\n    \r\n3. Restart Eclipse\r\n\r\n[See here][1]\r\n\r\n\r\n  [1]: https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>For me, the following steps worked:</p>\n\n<ol>\n<li>Open the <code>eclipse.ini</code> file</li>\n<li><p>Change</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Xms40m\n-Xmx512m\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Xms512m\n-Xmx1024m\n</code></pre></li>\n<li><p>Restart Eclipse</p></li>\n</ol>\n\n<p><a href=\"https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded\" rel=\"nofollow noreferrer\">See here</a></p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1588891768,"creation_date":1454782018,"answer_id":35244518,"question_id":1393486,"body_markdown":"Cause for the error according to the [*Java [8] Platform, Standard Edition Troubleshooting Guide*][1]: (emphasis and line breaks added)\r\n\r\n&gt; [...] &quot;GC overhead limit exceeded&quot; indicates that the garbage collector is running all the time and Java program is making very slow progress. \r\n\r\n&gt;After a garbage collection, if the *Java process is spending more than approximately 98% of its time doing garbage collection* and if it is recovering less than 2% of the heap and has been doing so far the last 5 (compile time constant) consecutive garbage collections, then a `java.lang.OutOfMemoryError` is thrown. [...]\r\n\r\n1. *Increase the heap size* if current heap is not enough.\r\n2. If you still get this error after increasing heap memory, use memory *profiling tools* like [MAT][2] ( Memory analyzer tool),  [Visual VM][3] etc and fix memory leaks.\r\n3. Upgrade JDK version to latest version ( 1.8.x) or at least 1.7.x and use G1GC algorithm. . *The throughput goal for the G1 GC is 90 percent application time and 10 percent garbage collection time*\r\n4. Apart from setting heap memory with -`Xms1g -Xmx2g` , try\r\n\r\n        -XX:+UseG1GC -XX:G1HeapRegionSize=n -XX:MaxGCPauseMillis=m  \r\n        -XX:ParallelGCThreads=n -XX:ConcGCThreads=n\r\n\r\n\r\n\r\nHave a look at some more related questions regarding G1GC\r\n\r\n* https://stackoverflow.com/questions/8111310/java-7-jdk-7-garbage-collection-and-documentation/34254605#34254605\r\n\r\n* https://stackoverflow.com/questions/2254041/java-g1-garbage-collection-in-production/34254401#34254401\r\n\r\n* [Oracle technetwork article for GC finetuning][4]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\r\n  [2]: http://www.eclipse.org/mat/\r\n  [3]: https://visualvm.github.io/\r\n  [4]: http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Cause for the error according to the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\" rel=\"nofollow noreferrer\"><em>Java [8] Platform, Standard Edition Troubleshooting Guide</em></a>: (emphasis and line breaks added)</p>\n\n<blockquote>\n  <p>[...] \"GC overhead limit exceeded\" indicates that the garbage collector is running all the time and Java program is making very slow progress. </p>\n  \n  <p>After a garbage collection, if the <em>Java process is spending more than approximately 98% of its time doing garbage collection</em> and if it is recovering less than 2% of the heap and has been doing so far the last 5 (compile time constant) consecutive garbage collections, then a <code>java.lang.OutOfMemoryError</code> is thrown. [...]</p>\n</blockquote>\n\n<ol>\n<li><em>Increase the heap size</em> if current heap is not enough.</li>\n<li>If you still get this error after increasing heap memory, use memory <em>profiling tools</em> like <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">MAT</a> ( Memory analyzer tool),  <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">Visual VM</a> etc and fix memory leaks.</li>\n<li>Upgrade JDK version to latest version ( 1.8.x) or at least 1.7.x and use G1GC algorithm. . <em>The throughput goal for the G1 GC is 90 percent application time and 10 percent garbage collection time</em></li>\n<li><p>Apart from setting heap memory with -<code>Xms1g -Xmx2g</code> , try</p>\n\n<pre><code>-XX:+UseG1GC -XX:G1HeapRegionSize=n -XX:MaxGCPauseMillis=m  \n-XX:ParallelGCThreads=n -XX:ConcGCThreads=n\n</code></pre></li>\n</ol>\n\n<p>Have a look at some more related questions regarding G1GC</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/8111310/java-7-jdk-7-garbage-collection-and-documentation/34254605#34254605\">Java 7 (JDK 7) garbage collection and documentation on G1</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/2254041/java-g1-garbage-collection-in-production/34254401#34254401\">Java G1 garbage collection in production</a></p></li>\n<li><p><a href=\"http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html\" rel=\"nofollow noreferrer\">Oracle technetwork article for GC finetuning</a></p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1050947,"reputation":720,"user_id":1054910,"display_name":"Fengzmg"},"score":4,"creation_date":1462847042,"post_id":36594743,"comment_id":61796913,"body_markdown":"These settings are only specific to your local IDE. This will no work for Prod environment.","body":"These settings are only specific to your local IDE. This will no work for Prod environment."}],"tags":[],"owner":{"account_id":6958103,"reputation":400,"user_id":5338514,"display_name":"shashi"},"comment_count":1,"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1460541256,"creation_date":1460541159,"answer_id":36594743,"question_id":1393486,"body_markdown":"You need to increase the memory size in Jdeveloper go to **setDomainEnv.cmd**.\r\n\r\n    set WLS_HOME=%WL_HOME%\\server    \r\n    set XMS_SUN_64BIT=**256**\r\n    set XMS_SUN_32BIT=**256**\r\n    set XMX_SUN_64BIT=**3072**\r\n    set XMX_SUN_32BIT=**3072**\r\n    set XMS_JROCKIT_64BIT=**256**\r\n    set XMS_JROCKIT_32BIT=**256**\r\n    set XMX_JROCKIT_64BIT=**1024**\r\n    set XMX_JROCKIT_32BIT=**1024**\r\n    \r\n    if &quot;%JAVA_VENDOR%&quot;==&quot;Sun&quot; (\r\n    \tset WLS_MEM_ARGS_64BIT=**-Xms256m -Xmx512m**\r\n    \tset WLS_MEM_ARGS_32BIT=**-Xms256m -Xmx512m**\r\n    ) else (\r\n    \tset WLS_MEM_ARGS_64BIT=**-Xms512m -Xmx512m**\r\n    \tset WLS_MEM_ARGS_32BIT=**-Xms512m -Xmx512m**\r\n    )\r\n    \r\nand \r\n    \r\n    set MEM_PERM_SIZE_64BIT=-XX:PermSize=**256m**\r\n    set MEM_PERM_SIZE_32BIT=-XX:PermSize=**256m**\r\n    \r\n    if &quot;%JAVA_USE_64BIT%&quot;==&quot;true&quot; (\r\n    \tset MEM_PERM_SIZE=%MEM_PERM_SIZE_64BIT%\r\n    ) else (\r\n    \tset MEM_PERM_SIZE=%MEM_PERM_SIZE_32BIT%\r\n    )\r\n    \r\n    set MEM_MAX_PERM_SIZE_64BIT=-XX:MaxPermSize=**1024m**\r\n    set MEM_MAX_PERM_SIZE_32BIT=-XX:MaxPermSize=**1024m**","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>You need to increase the memory size in Jdeveloper go to <strong>setDomainEnv.cmd</strong>.</p>\n\n<pre><code>set WLS_HOME=%WL_HOME%\\server    \nset XMS_SUN_64BIT=**256**\nset XMS_SUN_32BIT=**256**\nset XMX_SUN_64BIT=**3072**\nset XMX_SUN_32BIT=**3072**\nset XMS_JROCKIT_64BIT=**256**\nset XMS_JROCKIT_32BIT=**256**\nset XMX_JROCKIT_64BIT=**1024**\nset XMX_JROCKIT_32BIT=**1024**\n\nif \"%JAVA_VENDOR%\"==\"Sun\" (\n    set WLS_MEM_ARGS_64BIT=**-Xms256m -Xmx512m**\n    set WLS_MEM_ARGS_32BIT=**-Xms256m -Xmx512m**\n) else (\n    set WLS_MEM_ARGS_64BIT=**-Xms512m -Xmx512m**\n    set WLS_MEM_ARGS_32BIT=**-Xms512m -Xmx512m**\n)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>set MEM_PERM_SIZE_64BIT=-XX:PermSize=**256m**\nset MEM_PERM_SIZE_32BIT=-XX:PermSize=**256m**\n\nif \"%JAVA_USE_64BIT%\"==\"true\" (\n    set MEM_PERM_SIZE=%MEM_PERM_SIZE_64BIT%\n) else (\n    set MEM_PERM_SIZE=%MEM_PERM_SIZE_32BIT%\n)\n\nset MEM_MAX_PERM_SIZE_64BIT=-XX:MaxPermSize=**1024m**\nset MEM_MAX_PERM_SIZE_32BIT=-XX:MaxPermSize=**1024m**\n</code></pre>\n"},{"comments":[{"owner":{"account_id":110909,"reputation":45713,"user_id":293280,"accept_rate":77,"display_name":"Joshua Pinter"},"score":0,"creation_date":1488132998,"post_id":40771497,"comment_id":72085012,"body_markdown":"Works great for the simulator. Any idea how this affects real devices? i.e. is this a good idea or is it just masking the issue? Thanks.","body":"Works great for the simulator. Any idea how this affects real devices? i.e. is this a good idea or is it just masking the issue? Thanks."}],"tags":[],"owner":{"account_id":5487946,"reputation":5492,"user_id":4362167,"display_name":"ali ozkara"},"comment_count":1,"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1479924596,"creation_date":1479924596,"answer_id":40771497,"question_id":1393486,"body_markdown":"try this\r\n\r\nopen the `build.gradle` file  \r\n\r\n      android {\r\n            dexOptions {\r\n               javaMaxHeapSize = &quot;4g&quot;\r\n            }\r\n       }","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>try this</p>\n\n<p>open the <code>build.gradle</code> file  </p>\n\n<pre><code>  android {\n        dexOptions {\n           javaMaxHeapSize = \"4g\"\n        }\n   }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3585957,"reputation":4619,"user_id":3241889,"accept_rate":72,"display_name":"Alex"},"score":0,"creation_date":1489744341,"post_id":41344611,"comment_id":72814902,"body_markdown":"Yes, when using Gradle :)","body":"Yes, when using Gradle :)"},{"owner":{"account_id":5723866,"reputation":421,"user_id":4521477,"display_name":"Julian L."},"score":4,"creation_date":1542387775,"post_id":41344611,"comment_id":93563576,"body_markdown":"How could you even think this is a solution to his question *in general*? You set your heap size to 4g which is totally arbitrary in a gradle configuration for Android *facepalm*.","body":"How could you even think this is a solution to his question <i>in general</i>? You set your heap size to 4g which is totally arbitrary in a gradle configuration for Android <i>facepalm</i>."}],"tags":[],"owner":{"account_id":1760237,"reputation":2420,"user_id":1607562,"display_name":"Hoshouns"},"comment_count":2,"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1482839261,"creation_date":1482839261,"answer_id":41344611,"question_id":1393486,"body_markdown":"The following worked for me. Just add the following snippet:\r\n    \r\n    \r\n    \r\n    android {\r\n            compileSdkVersion 25\r\n            buildToolsVersion &#39;25.0.1&#39;\r\n    \r\n    defaultConfig {\r\n            applicationId &quot;yourpackage&quot;\r\n            minSdkVersion 10\r\n            targetSdkVersion 25\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            multiDexEnabled true\r\n        }\r\n    dexOptions {\r\n            javaMaxHeapSize &quot;4g&quot;\r\n        }\r\n    }\r\n    ","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>The following worked for me. Just add the following snippet:</p>\n\n<pre><code>android {\n        compileSdkVersion 25\n        buildToolsVersion '25.0.1'\n\ndefaultConfig {\n        applicationId \"yourpackage\"\n        minSdkVersion 10\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n    }\ndexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6762145,"reputation":14229,"user_id":5208491,"display_name":"saigopi.me"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1491568028,"creation_date":1491568028,"answer_id":43278151,"question_id":1393486,"body_markdown":"increase javaMaxHeapsize in your build.gradle(Module:app) file\r\n\r\n    dexOptions {\r\n        javaMaxHeapSize &quot;1g&quot;\r\n    }\r\nto (Add this line in gradle)\r\n   \r\n\r\n     dexOptions {\r\n            javaMaxHeapSize &quot;4g&quot;\r\n        }","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>increase javaMaxHeapsize in your build.gradle(Module:app) file</p>\n\n<pre><code>dexOptions {\n    javaMaxHeapSize \"1g\"\n}\n</code></pre>\n\n<p>to (Add this line in gradle)</p>\n\n<pre><code> dexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6468900,"reputation":350,"user_id":7533664,"display_name":"htlbydgod"},"comment_count":0,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1515482773,"creation_date":1497307537,"answer_id":44509807,"question_id":1393486,"body_markdown":"In Netbeans, it may be helpful to design a max heap size. Go to *Run* =&gt; *Set Project Configuration* =&gt; *Customise*. In the *Run* of its popped up window, go to *VM Option*, fill in `-Xms2048m -Xmx2048m`. It could solve heap size problem.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>In Netbeans, it may be helpful to design a max heap size. Go to <em>Run</em> => <em>Set Project Configuration</em> => <em>Customise</em>. In the <em>Run</em> of its popped up window, go to <em>VM Option</em>, fill in <code>-Xms2048m -Xmx2048m</code>. It could solve heap size problem.</p>\n"},{"tags":[],"owner":{"account_id":6931623,"reputation":74,"user_id":5320947,"display_name":"Alex Ivan Howard"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1515364422,"creation_date":1515364422,"answer_id":48142185,"question_id":1393486,"body_markdown":"I&#39;m working in Android Studio and encountered this error when trying to generate a signed APK for release. \r\nI was able to build and test a debug APK with no problem, but as soon as I wanted to build a release APK, the build process would run for minutes on end and then finally terminate with the &quot;Error java.lang.OutOfMemoryError: GC overhead limit exceeded&quot;. I increased the heap sizes for both the VM and the Android DEX compiler, but the problem persisted.\r\nFinally, after many hours and mugs of coffee it turned out that the problem was in my app-level &#39;build.gradle&#39; file - I had the &#39;minifyEnabled&#39; parameter for the release build type set to &#39;false&#39;, consequently running Proguard stuffs on code that hasn&#39;t been through the code-shrinking&#39; process (see https://developer.android.com/studio/build/shrink-code.html). \r\nI changed the &#39;minifyEnabled&#39; parameter to &#39;true&#39; and the release build executed like a dream :)\r\n\r\nIn short, I had to change my app-level &#39;build.gradle&#39; file from:\r\n    //...\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.sign_config_release\r\n        }\r\n        debug {\r\n            debuggable true\r\n            signingConfig signingConfigs.sign_config_debug\r\n        }\r\n    }\r\n\r\n    //...\r\nto\r\n\r\n        //...\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.sign_config_release\r\n        }\r\n        debug {\r\n            debuggable true\r\n            signingConfig signingConfigs.sign_config_debug\r\n        }\r\n    }\r\n\r\n    //...\r\n\r\n","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I'm working in Android Studio and encountered this error when trying to generate a signed APK for release. \nI was able to build and test a debug APK with no problem, but as soon as I wanted to build a release APK, the build process would run for minutes on end and then finally terminate with the \"Error java.lang.OutOfMemoryError: GC overhead limit exceeded\". I increased the heap sizes for both the VM and the Android DEX compiler, but the problem persisted.\nFinally, after many hours and mugs of coffee it turned out that the problem was in my app-level 'build.gradle' file - I had the 'minifyEnabled' parameter for the release build type set to 'false', consequently running Proguard stuffs on code that hasn't been through the code-shrinking' process (see <a href=\"https://developer.android.com/studio/build/shrink-code.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/shrink-code.html</a>). \nI changed the 'minifyEnabled' parameter to 'true' and the release build executed like a dream :)</p>\n\n<p>In short, I had to change my app-level 'build.gradle' file from:\n    //...</p>\n\n<pre><code>buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        signingConfig signingConfigs.sign_config_release\n    }\n    debug {\n        debuggable true\n        signingConfig signingConfigs.sign_config_debug\n    }\n}\n\n//...\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    //...\n\nbuildTypes {\n    release {\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        signingConfig signingConfigs.sign_config_release\n    }\n    debug {\n        debuggable true\n        signingConfig signingConfigs.sign_config_debug\n    }\n}\n\n//...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1528982184,"creation_date":1528982184,"answer_id":50858480,"question_id":1393486,"body_markdown":"To increase heap size in IntelliJ IDEA follow the following instructions. It worked for me.\r\n\r\nFor Windows Users,\r\n\r\nGo to the location where IDE is installed and search for following.\r\n\r\n    idea64.exe.vmoptions\r\n\r\nEdit the file and add the following.\r\n\r\n    -Xms512m\r\n    -Xmx2024m\r\n    -XX:MaxPermSize=700m\r\n    -XX:ReservedCodeCacheSize=480m\r\n\r\nThat is it !!\r\n","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>To increase heap size in IntelliJ IDEA follow the following instructions. It worked for me.</p>\n\n<p>For Windows Users,</p>\n\n<p>Go to the location where IDE is installed and search for following.</p>\n\n<pre><code>idea64.exe.vmoptions\n</code></pre>\n\n<p>Edit the file and add the following.</p>\n\n<pre><code>-Xms512m\n-Xmx2024m\n-XX:MaxPermSize=700m\n-XX:ReservedCodeCacheSize=480m\n</code></pre>\n\n<p>That is it !!</p>\n"},{"tags":[],"owner":{"account_id":100479,"reputation":5900,"user_id":270847,"accept_rate":85,"display_name":"Thomas"},"comment_count":0,"down_vote_count":10,"up_vote_count":4,"is_accepted":false,"score":-6,"last_activity_date":1551201785,"creation_date":1551201785,"answer_id":54890955,"question_id":1393486,"body_markdown":"Rebooting my MacBook fixed this issue for me.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Rebooting my MacBook fixed this issue for me.</p>\n"},{"tags":[],"owner":{"account_id":16209329,"reputation":1013,"user_id":11703772,"display_name":"John Doe"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1563915838,"creation_date":1563915838,"answer_id":57172182,"question_id":1393486,"body_markdown":"You can also increase memory allocation and heap size by adding this to your `gradle.properties` file:\r\n\r\n`org.gradle.jvmargs=-Xmx2048M -XX\\:MaxHeapSize\\=32g`\r\n\r\nIt doesn&#39;t have to be 2048M and 32g, make it as big as you want.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>You can also increase memory allocation and heap size by adding this to your <code>gradle.properties</code> file:</p>\n\n<p><code>org.gradle.jvmargs=-Xmx2048M -XX\\:MaxHeapSize\\=32g</code></p>\n\n<p>It doesn't have to be 2048M and 32g, make it as big as you want.</p>\n"},{"tags":[],"owner":{"account_id":4033977,"reputation":6390,"user_id":3319132,"accept_rate":49,"display_name":"reza_khalafi"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1569145986,"creation_date":1569145986,"answer_id":58048041,"question_id":1393486,"body_markdown":"**Solved:**  \r\nJust add  \r\n `org.gradle.jvmargs=-Xmx1024m`  \r\nin  \r\n `gradle.properties`   \r\nand if it does not exist, create it.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p><strong>Solved:</strong><br>\nJust add<br>\n <code>org.gradle.jvmargs=-Xmx1024m</code><br>\nin<br>\n <code>gradle.properties</code><br>\nand if it does not exist, create it.</p>\n"},{"tags":[],"owner":{"account_id":3962804,"reputation":1490,"user_id":3269543,"accept_rate":83,"display_name":"Phoenix"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1570698540,"creation_date":1570698540,"answer_id":58319283,"question_id":1393486,"body_markdown":"\r\n**Java heap size descriptions (xms, xmx, xmn)**\r\n\r\n    -Xms size in bytes\r\n\r\n    Example : java -Xms32m\r\nSets the initial size of the Java heap. \r\nThe default size is 2097152 (2MB). \r\nThe values must be a multiple of, and greater than, 1024 bytes (1KB).\r\n(The -server flag increases the default size to 32M.)\r\n\r\n    -Xmn size in bytes\r\n\r\n    Example : java -Xmx2m\r\n\r\nSets the initial Java heap size for the Eden generation. \r\nThe default value is 640K. \r\n(The -server flag increases the default size to 2M.)\r\n\r\n    -Xmx size in bytes\r\n\r\n    Example : java -Xmx2048m\r\nSets the maximum size to which the Java heap can grow. \r\nThe default size is 64M. \r\n(The -server flag increases the default size to 128M.) \r\nThe maximum heap limit is about 2 GB (2048MB).\r\n\r\n**Java memory arguments (xms, xmx, xmn) formatting**\r\n\r\nWhen setting the Java heap size, you should specify your memory argument using one of the letters “m” or “M” for MB, or “g” or “G” for GB. Your setting won’t work if you specify “MB” or “GB.” Valid arguments look like this:\r\n\r\n-Xms64m or -Xms64M\r\n-Xmx1g or -Xmx1G\r\nCan also use 2048MB to specify 2GB\r\nAlso, make sure you just use whole numbers when specifying your arguments. Using -Xmx512m is a valid option, but -Xmx0.5g will cause an error.\r\n\r\nThis reference can be helpful for someone.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p><strong>Java heap size descriptions (xms, xmx, xmn)</strong></p>\n\n<pre><code>-Xms size in bytes\n\nExample : java -Xms32m\n</code></pre>\n\n<p>Sets the initial size of the Java heap. \nThe default size is 2097152 (2MB). \nThe values must be a multiple of, and greater than, 1024 bytes (1KB).\n(The -server flag increases the default size to 32M.)</p>\n\n<pre><code>-Xmn size in bytes\n\nExample : java -Xmx2m\n</code></pre>\n\n<p>Sets the initial Java heap size for the Eden generation. \nThe default value is 640K. \n(The -server flag increases the default size to 2M.)</p>\n\n<pre><code>-Xmx size in bytes\n\nExample : java -Xmx2048m\n</code></pre>\n\n<p>Sets the maximum size to which the Java heap can grow. \nThe default size is 64M. \n(The -server flag increases the default size to 128M.) \nThe maximum heap limit is about 2 GB (2048MB).</p>\n\n<p><strong>Java memory arguments (xms, xmx, xmn) formatting</strong></p>\n\n<p>When setting the Java heap size, you should specify your memory argument using one of the letters “m” or “M” for MB, or “g” or “G” for GB. Your setting won’t work if you specify “MB” or “GB.” Valid arguments look like this:</p>\n\n<p>-Xms64m or -Xms64M\n-Xmx1g or -Xmx1G\nCan also use 2048MB to specify 2GB\nAlso, make sure you just use whole numbers when specifying your arguments. Using -Xmx512m is a valid option, but -Xmx0.5g will cause an error.</p>\n\n<p>This reference can be helpful for someone.</p>\n"},{"tags":[],"owner":{"account_id":4266310,"reputation":532,"user_id":3489351,"display_name":"androidStud"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1574653301,"creation_date":1574653301,"answer_id":59024964,"question_id":1393486,"body_markdown":"I don&#39;t know if this is still relevant or not, but just want to share what worked for me.\r\n\r\nUpdate kotlin version to latest available. https://blog.jetbrains.com/kotlin/category/releases/\r\n\r\nand it&#39;s done.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I don't know if this is still relevant or not, but just want to share what worked for me.</p>\n\n<p>Update kotlin version to latest available. <a href=\"https://blog.jetbrains.com/kotlin/category/releases/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/category/releases/</a></p>\n\n<p>and it's done.</p>\n"},{"tags":[],"owner":{"account_id":2466135,"reputation":400,"user_id":2149194,"display_name":"Rahul Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582771216,"creation_date":1582771216,"answer_id":60425510,"question_id":1393486,"body_markdown":"you can try to make changes on the server setting by referring to this image and increase the memory size for processing\r\nprocess changes highlighted in yellow\r\n\r\n\r\nyou can also make changes to java heap by opening cmd-&gt; `set _java_opts -Xmx2g`  \r\n2g(2gigabytes) depending upon the complexity of your program\r\n\r\ntry to use less constant variable and temp variables \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c6fS0.png","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>you can try to make changes on the server setting by referring to this image and increase the memory size for processing\nprocess changes highlighted in yellow</p>\n\n<p>you can also make changes to java heap by opening cmd-> <code>set _java_opts -Xmx2g</code><br>\n2g(2gigabytes) depending upon the complexity of your program</p>\n\n<p>try to use less constant variable and temp variables </p>\n\n<p><a href=\"https://i.stack.imgur.com/c6fS0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c6fS0.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":18166833,"reputation":15,"user_id":13217255,"display_name":"spike"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631337443,"creation_date":1631337443,"answer_id":69140222,"question_id":1393486,"body_markdown":"@Buhb\r\nI reproduced this by this in an normal spring-boot web application within its main method. Here is the code: \r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DemoServiceBApplication.class, args);\r\n        LOGGER.info(&quot;hello.&quot;);\r\n        int len = 0, oldlen=0;\r\n        Object[] a = new Object[0];\r\n        try {\r\n            for (; ; ) {\r\n                ++len;\r\n                Object[] temp = new Object[oldlen = len];\r\n                temp[0] = a;\r\n                a = temp;\r\n            }\r\n        } catch (Throwable e) {\r\n            LOGGER.info(&quot;error: {}&quot;, e.toString());\r\n        }\r\n    }\r\nThe sample code that caused an come is also from oracle java8 language specifications.\r\n\r\n","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>@Buhb\nI reproduced this by this in an normal spring-boot web application within its main method. Here is the code:</p>\n<pre><code>public static void main(String[] args) {\n    SpringApplication.run(DemoServiceBApplication.class, args);\n    LOGGER.info(&quot;hello.&quot;);\n    int len = 0, oldlen=0;\n    Object[] a = new Object[0];\n    try {\n        for (; ; ) {\n            ++len;\n            Object[] temp = new Object[oldlen = len];\n            temp[0] = a;\n            a = temp;\n        }\n    } catch (Throwable e) {\n        LOGGER.info(&quot;error: {}&quot;, e.toString());\n    }\n}\n</code></pre>\n<p>The sample code that caused an come is also from oracle java8 language specifications.</p>\n"},{"tags":[],"owner":{"account_id":6687609,"reputation":528,"user_id":6595526,"display_name":"Sidharth K.Burnwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636518280,"creation_date":1636223738,"answer_id":69866826,"question_id":1393486,"body_markdown":"I got this error while working with Oracle web logic server. I am sharing my answer for reference in case someone end up here looking for the solution.\r\n\r\nSo, if you are trying to up the Oracle web logic server and got this error then you just have to increase the initial and maximum heap size set for running the server.\r\n\r\n\r\n&gt; Go to - &gt; **C:\\Oracle\\Middleware\\Oracle_Home\\user_projects\\domains\\wl_server\\bin**\r\n&gt; \r\n&gt; open **setDomainEnv.cmd**\r\n&gt;\r\n&gt; check **set USER_MEM_ARGS** value , if its less then\r\n&gt; \r\n&gt; **set USER_MEM_ARGS=&quot;-Xms128m – Xmx8192m ${MEM_DEV_ARGS} ${MEM_MAX_PERM_SIZE}&quot;**  \r\n\r\nThis means that your intital heap size is set to 128 MB and max heap size is 8GB.\r\n Now , just save the file and restart the server. if it didn&#39;t resolve the issue, try increasing the size or look for ways to optimizing the service.\r\n\r\nfor ref , check this link  : https://docs.oracle.com/cd/E49933_01/server.770/es_install/src/tins_postinstall_jvm_heap.html\r\n\r\nedit: Check whether you are able to see the updated java args while running the server . just like this [![enter image description here][1]][1]\r\nIf its coming as before then replace the shown value from setDoaminEnv.cmd by simple search and replace.\r\n\r\n  [1]: https://i.stack.imgur.com/H0Pfc.png","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I got this error while working with Oracle web logic server. I am sharing my answer for reference in case someone end up here looking for the solution.</p>\n<p>So, if you are trying to up the Oracle web logic server and got this error then you just have to increase the initial and maximum heap size set for running the server.</p>\n<blockquote>\n<p>Go to - &gt; <strong>C:\\Oracle\\Middleware\\Oracle_Home\\user_projects\\domains\\wl_server\\bin</strong></p>\n<p>open <strong>setDomainEnv.cmd</strong></p>\n<p>check <strong>set USER_MEM_ARGS</strong> value , if its less then</p>\n<p><strong>set USER_MEM_ARGS=&quot;-Xms128m – Xmx8192m ${MEM_DEV_ARGS} ${MEM_MAX_PERM_SIZE}&quot;</strong></p>\n</blockquote>\n<p>This means that your intital heap size is set to 128 MB and max heap size is 8GB.\nNow , just save the file and restart the server. if it didn't resolve the issue, try increasing the size or look for ways to optimizing the service.</p>\n<p>for ref , check this link  : <a href=\"https://docs.oracle.com/cd/E49933_01/server.770/es_install/src/tins_postinstall_jvm_heap.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E49933_01/server.770/es_install/src/tins_postinstall_jvm_heap.html</a></p>\n<p>edit: Check whether you are able to see the updated java args while running the server . just like this <a href=\"https://i.stack.imgur.com/H0Pfc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H0Pfc.png\" alt=\"enter image description here\" /></a>\nIf its coming as before then replace the shown value from setDoaminEnv.cmd by simple search and replace.</p>\n"},{"tags":[],"owner":{"account_id":17683470,"reputation":158,"user_id":12836822,"display_name":"Ashrik Ahamed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695219875,"creation_date":1695219875,"answer_id":77143416,"question_id":1393486,"body_markdown":"If you are here for the exception that rise in **TOMCAT** then this is for you:\r\n\r\nIt may happen when you work with that tomcat for the long time\r\n\r\nSteps:\r\n\r\n1. Navigate to tomcat folder (C:/tomcat)\r\n2. There will a folder named - &quot;work&quot; and then - &quot;catalina&quot; then - &quot;localHost&quot;\r\n3. Delete that localhost folder\r\n4. Inside C:/tomcat/webapps there will be files, delete all and rebuild.\r\n\r\nNow that heap memory issue would be sorted.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>If you are here for the exception that rise in <strong>TOMCAT</strong> then this is for you:</p>\n<p>It may happen when you work with that tomcat for the long time</p>\n<p>Steps:</p>\n<ol>\n<li>Navigate to tomcat folder (C:/tomcat)</li>\n<li>There will a folder named - &quot;work&quot; and then - &quot;catalina&quot; then - &quot;localHost&quot;</li>\n<li>Delete that localhost folder</li>\n<li>Inside C:/tomcat/webapps there will be files, delete all and rebuild.</li>\n</ol>\n<p>Now that heap memory issue would be sorted.</p>\n"},{"tags":[],"owner":{"account_id":411178,"reputation":374,"user_id":783470,"display_name":"Roger Perkins"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057827,"creation_date":1702057827,"answer_id":77628368,"question_id":1393486,"body_markdown":"For SAP BOBJ BOE SIA CMS 4.1, the xmx parameter is in the registry at location:\r\n\r\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Apache Software Foundation\\Procrun 2.0\\SIAserverName\\Parameters\\Java\r\n\r\nOptions value, it was 256m, increased it to 2g. No more out of memory errors in the log file, SIA is now stable and CMS.exe starts up okay.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>For SAP BOBJ BOE SIA CMS 4.1, the xmx parameter is in the registry at location:</p>\n<p>HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Apache Software Foundation\\Procrun 2.0\\SIAserverName\\Parameters\\Java</p>\n<p>Options value, it was 256m, increased it to 2g. No more out of memory errors in the log file, SIA is now stable and CMS.exe starts up okay.</p>\n"}],"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1234774,"favorite_count":0,"down_vote_count":0,"up_vote_count":956,"accepted_answer_id":1393503,"answer_count":24,"score":956,"last_activity_date":1702057827,"creation_date":1252409668,"question_id":1393486,"body_markdown":"I get this error message as I execute my `JUnit` tests:\r\n\r\n    java.lang.OutOfMemoryError: GC overhead limit exceeded\r\n\r\nI know what an `OutOfMemoryError` is, but what does GC overhead limit mean? How can I solve this?","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I get this error message as I execute my <code>JUnit</code> tests:</p>\n<pre><code>java.lang.OutOfMemoryError: GC overhead limit exceeded\n</code></pre>\n<p>I know what an <code>OutOfMemoryError</code> is, but what does GC overhead limit mean? How can I solve this?</p>\n"},{"tags":["java","deserialization","fortify","spring-data-redis"],"answers":[{"comments":[{"owner":{"account_id":1965862,"reputation":3669,"user_id":1766166,"accept_rate":71,"display_name":"zygimantus"},"score":0,"creation_date":1638352476,"post_id":57564028,"comment_id":124063102,"body_markdown":"Hi, could you share maybe a code snipped of how you managed to re-write the implementation of RedisTemplate?","body":"Hi, could you share maybe a code snipped of how you managed to re-write the implementation of RedisTemplate?"},{"owner":{"account_id":10553380,"reputation":2165,"user_id":10324087,"display_name":"viveknaskar"},"score":0,"creation_date":1701973427,"post_id":57564028,"comment_id":136843921,"body_markdown":"If you found a solution, you should share the same.","body":"If you found a solution, you should share the same."}],"tags":[],"owner":{"account_id":15609651,"reputation":29,"user_id":11261458,"display_name":"user11261458"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1566249223,"creation_date":1566249223,"answer_id":57564028,"question_id":57224937,"body_markdown":"I found my own answer through trial and experiment with the static code analyzer. \r\nApparently you should re-write the implementation of RedisTemplate class and do your own implementation of jdkserializationredisserializer. \r\n\r\nSpecifically, you should override and make a deserializing converter which will be invoked in jdkserializationredisserializer class in constructor method, since it doesn&#39;t use any validation by default(it&#39;s using DeserializingConverter). Then in your deserializing converter, you implement the white-list approach that specifies what classes are expected. Make sure you unit test them too because they might have dependent classes needed to be deserialized. ","title":"RedisTemplate leads to unsafe deserialization in Fortify&#39;s dynamic code evaluation","body":"<p>I found my own answer through trial and experiment with the static code analyzer. \nApparently you should re-write the implementation of RedisTemplate class and do your own implementation of jdkserializationredisserializer. </p>\n\n<p>Specifically, you should override and make a deserializing converter which will be invoked in jdkserializationredisserializer class in constructor method, since it doesn't use any validation by default(it's using DeserializingConverter). Then in your deserializing converter, you implement the white-list approach that specifies what classes are expected. Make sure you unit test them too because they might have dependent classes needed to be deserialized. </p>\n"},{"tags":[],"owner":{"account_id":10553380,"reputation":2165,"user_id":10324087,"display_name":"viveknaskar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057302,"creation_date":1702057302,"answer_id":77628320,"question_id":57224937,"body_markdown":"I have faced the same issue and the Fortify scan report flagged this as &#39;Dynamic Code Evaluation: Unsafe Deserialization&#39;. Adding the solution since I didn&#39;t get a proper solution on *StackOverflow*.\r\n\r\n**Initial Code**\r\n\r\n    @Bean\r\n    public RedisTemplate redisTemplate() {\r\n        RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\r\n\r\n        RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(jedisConnectionFactory());\r\n        template.setKeySerializer(stringSerializer);\r\n        template.setValueSerializer(stringSerializer);\r\n        template.afterPropertiesSet();\r\n\r\n        return template;\r\n    }\r\n\r\nThe problem was happening due to this line ```RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();```\r\n\r\nNow, using safe serializers are recommended and I have used ```Jackson2JsonRedisSerializer``` for serializing and deserializing objects. I was already using ```StringRedisSerializer``` for strings.\r\n\r\nAdditionally, I initialized RedisTemplate&lt;String, Object&gt;, thereby specifying the key and value types.\r\n\r\n**Solution**\r\n\r\n    @Bean\r\n    public RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n        RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\r\n        Jackson2JsonRedisSerializer&lt;Object&gt; objectSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);\r\n\r\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(jedisConnectionFactory());\r\n        template.setKeySerializer(stringSerializer);\r\n        template.setValueSerializer(objectSerializer);\r\n\r\n        template.setHashKeySerializer(stringSerializer);\r\n        template.setHashValueSerializer(objectSerializer);\r\n\r\n        template.setEnableDefaultSerializer(true);\r\n        template.afterPropertiesSet();\r\n\r\n        return template;\r\n    }\r\n\r\nThis resolved my Fortify issue.","title":"RedisTemplate leads to unsafe deserialization in Fortify&#39;s dynamic code evaluation","body":"<p>I have faced the same issue and the Fortify scan report flagged this as 'Dynamic Code Evaluation: Unsafe Deserialization'. Adding the solution since I didn't get a proper solution on <em>StackOverflow</em>.</p>\n<p><strong>Initial Code</strong></p>\n<pre><code>@Bean\npublic RedisTemplate redisTemplate() {\n    RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\n\n    RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(jedisConnectionFactory());\n    template.setKeySerializer(stringSerializer);\n    template.setValueSerializer(stringSerializer);\n    template.afterPropertiesSet();\n\n    return template;\n}\n</code></pre>\n<p>The problem was happening due to this line <code>RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();</code></p>\n<p>Now, using safe serializers are recommended and I have used <code>Jackson2JsonRedisSerializer</code> for serializing and deserializing objects. I was already using <code>StringRedisSerializer</code> for strings.</p>\n<p>Additionally, I initialized RedisTemplate&lt;String, Object&gt;, thereby specifying the key and value types.</p>\n<p><strong>Solution</strong></p>\n<pre><code>@Bean\npublic RedisTemplate&lt;String, Object&gt; redisTemplate() {\n    RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\n    Jackson2JsonRedisSerializer&lt;Object&gt; objectSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);\n\n    RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(jedisConnectionFactory());\n    template.setKeySerializer(stringSerializer);\n    template.setValueSerializer(objectSerializer);\n\n    template.setHashKeySerializer(stringSerializer);\n    template.setHashValueSerializer(objectSerializer);\n\n    template.setEnableDefaultSerializer(true);\n    template.afterPropertiesSet();\n\n    return template;\n}\n</code></pre>\n<p>This resolved my Fortify issue.</p>\n"}],"owner":{"account_id":15609651,"reputation":29,"user_id":11261458,"display_name":"user11261458"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2171,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1702057302,"creation_date":1564163638,"question_id":57224937,"body_markdown":"In making spring redis data template, I use:\r\n```\r\nRedisTemplate&lt;String, xxxDTO&gt; template = new RedisTemplate&lt;&gt;();\r\n```\r\nThen I also set the deserializer to a custom one that white lists certain class in case of unsafe deserialization.\r\n\r\nFortify somehow still highlights:\r\n```\r\nnew RedisTemplate&lt;&gt;();\r\n```\r\nas unsafe deserialization during the dynamic code evaluation, within the kingdom Input Validation and Representation.\r\n\r\nHow to make a RedisTemplate without being flagged?","title":"RedisTemplate leads to unsafe deserialization in Fortify&#39;s dynamic code evaluation","body":"<p>In making spring redis data template, I use:</p>\n\n<pre><code>RedisTemplate&lt;String, xxxDTO&gt; template = new RedisTemplate&lt;&gt;();\n</code></pre>\n\n<p>Then I also set the deserializer to a custom one that white lists certain class in case of unsafe deserialization.</p>\n\n<p>Fortify somehow still highlights:</p>\n\n<pre><code>new RedisTemplate&lt;&gt;();\n</code></pre>\n\n<p>as unsafe deserialization during the dynamic code evaluation, within the kingdom Input Validation and Representation.</p>\n\n<p>How to make a RedisTemplate without being flagged?</p>\n"},{"tags":["java","json","kotlin","parsing","command-line-interface"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1702057582,"post_id":77628305,"comment_id":136854902,"body_markdown":"Why do you need it? What exactly do you try to achieve?","body":"Why do you need it? What exactly do you try to achieve?"}],"owner":{"account_id":4742401,"reputation":864,"user_id":7858768,"display_name":"user7858768"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702058973,"answer_count":0,"score":-2,"last_activity_date":1702057115,"creation_date":1702057115,"question_id":77628305,"body_markdown":"Is there an open-source code example/library that would convert \r\n\r\nPrettified JSON records like:\r\n```\r\n{\r\n  &quot;name&quot;: &quot;Gilbert&quot;, \r\n  &quot;wins&quot;: [\r\n    [\r\n      &quot;straight&quot;, \r\n      &quot;7♣&quot;\r\n    ], \r\n    [\r\n      &quot;one pair&quot;, \r\n      &quot;10♥&quot;\r\n    ]\r\n  ]\r\n}\r\n```\r\n\r\nTo valid JSONL:\r\n```\r\n{&quot;name&quot;:&quot;Gilbert&quot;,&quot;wins&quot;:[[&quot;straight&quot;, &quot;7♣&quot;], [&quot;one pair&quot;, &quot;10♥&quot;]]}\r\n```\r\n\r\nAny language would be helpful to look at (java/kotlin would be ideal). I haven&#39;t been able to find it by searching around.\r\n\r\nBelow is what I have thus far, but very much wondering whether I am missing some corner cases with quotes within values. \r\n\r\n```\r\nclass JsonlStreamProcessor(\r\n    /**\r\n     * We are using JsonNode instead of ObjectNode as we can have valid JSONL\r\n     * of primitive values that would make ObjectNode fail. */\r\n    private val processNode: (JsonNode) -&gt; Unit,\r\n    private val processParseException: (Exception) -&gt; Unit,\r\n    private val processProcessingException: (Exception) -&gt; Unit\r\n) {\r\n    private val objectMapper = ObjectMapper()\r\n\r\n    /**\r\n     * Note: the stream that is given is not closed by this class. The responsibility\r\n     * of closing the input stream lies with the one who opened it.\r\n     * */\r\n    fun processInput(inputStream: InputStream = System.`in`) {\r\n        var buffer = StringBuilder()\r\n        var openBraces = 0\r\n        var inQuotes = false\r\n\r\n        while (true) {\r\n            val char = inputStream.read().takeIf { it != -1 }?.toChar() ?: break\r\n\r\n            // TODO: need to test this well.\r\n            if (char == &#39;\\&quot;&#39; &amp;&amp; (buffer.isEmpty() || buffer.last() != &#39;\\\\&#39; || buffer.endsWith(&quot;\\\\\\\\&quot;))) {\r\n                inQuotes = !inQuotes\r\n            }\r\n\r\n            if (!inQuotes) {\r\n                when (char) {\r\n                    &#39;{&#39; -&gt; openBraces++\r\n                    &#39;}&#39; -&gt; openBraces--\r\n                }\r\n            }\r\n\r\n            buffer.append(char)\r\n\r\n            // buffer.isNotEmpty() is cheaper than &#39;buffer.trim().isNotEmpty()&#39;\r\n            // so we are using it as a first check to avoid calling &#39;trim()&#39; unnecessarily.\r\n            if (openBraces == 0 &amp;&amp; buffer.isNotEmpty() &amp;&amp; buffer.trim().isNotEmpty()) {\r\n\r\n                var node: JsonNode? = null\r\n\r\n                try {\r\n                    node = objectMapper.readTree(buffer.toString())\r\n                } catch (exc: Exception) {\r\n                    processParseException(exc)\r\n                } finally {\r\n                    buffer = StringBuilder()\r\n                }\r\n\r\n                if (node != null) {\r\n                    try {\r\n                        processNode(node)\r\n                    } catch (exc: Exception) {\r\n                        processProcessingException(exc)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    val inputString = &quot;{\\&quot;key\\&quot;: \\&quot;v\\\\\\&quot;alue\\&quot;}&quot;\r\n    val byteArray = inputString.toByteArray()\r\n    val inputStream: InputStream = ByteArrayInputStream(byteArray)\r\n    JsonlStreamProcessor({ node -&gt;\r\n        println(&quot;Processing node:&quot;)\r\n        println(node)\r\n    }, { exc -&gt; }, { exc -&gt; }).processInput(\r\n        inputStream\r\n    )\r\n}\r\n\r\nOutput:\r\nProcessing node:\r\n{&quot;key&quot;:&quot;v\\&quot;alue&quot;}\r\n\r\n```\r\n","title":"Library/Example for conversion of prettyfied JSON records, to valid JSONL?","body":"<p>Is there an open-source code example/library that would convert</p>\n<p>Prettified JSON records like:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;Gilbert&quot;, \n  &quot;wins&quot;: [\n    [\n      &quot;straight&quot;, \n      &quot;7♣&quot;\n    ], \n    [\n      &quot;one pair&quot;, \n      &quot;10♥&quot;\n    ]\n  ]\n}\n</code></pre>\n<p>To valid JSONL:</p>\n<pre><code>{&quot;name&quot;:&quot;Gilbert&quot;,&quot;wins&quot;:[[&quot;straight&quot;, &quot;7♣&quot;], [&quot;one pair&quot;, &quot;10♥&quot;]]}\n</code></pre>\n<p>Any language would be helpful to look at (java/kotlin would be ideal). I haven't been able to find it by searching around.</p>\n<p>Below is what I have thus far, but very much wondering whether I am missing some corner cases with quotes within values.</p>\n<pre><code>class JsonlStreamProcessor(\n    /**\n     * We are using JsonNode instead of ObjectNode as we can have valid JSONL\n     * of primitive values that would make ObjectNode fail. */\n    private val processNode: (JsonNode) -&gt; Unit,\n    private val processParseException: (Exception) -&gt; Unit,\n    private val processProcessingException: (Exception) -&gt; Unit\n) {\n    private val objectMapper = ObjectMapper()\n\n    /**\n     * Note: the stream that is given is not closed by this class. The responsibility\n     * of closing the input stream lies with the one who opened it.\n     * */\n    fun processInput(inputStream: InputStream = System.`in`) {\n        var buffer = StringBuilder()\n        var openBraces = 0\n        var inQuotes = false\n\n        while (true) {\n            val char = inputStream.read().takeIf { it != -1 }?.toChar() ?: break\n\n            // TODO: need to test this well.\n            if (char == '\\&quot;' &amp;&amp; (buffer.isEmpty() || buffer.last() != '\\\\' || buffer.endsWith(&quot;\\\\\\\\&quot;))) {\n                inQuotes = !inQuotes\n            }\n\n            if (!inQuotes) {\n                when (char) {\n                    '{' -&gt; openBraces++\n                    '}' -&gt; openBraces--\n                }\n            }\n\n            buffer.append(char)\n\n            // buffer.isNotEmpty() is cheaper than 'buffer.trim().isNotEmpty()'\n            // so we are using it as a first check to avoid calling 'trim()' unnecessarily.\n            if (openBraces == 0 &amp;&amp; buffer.isNotEmpty() &amp;&amp; buffer.trim().isNotEmpty()) {\n\n                var node: JsonNode? = null\n\n                try {\n                    node = objectMapper.readTree(buffer.toString())\n                } catch (exc: Exception) {\n                    processParseException(exc)\n                } finally {\n                    buffer = StringBuilder()\n                }\n\n                if (node != null) {\n                    try {\n                        processNode(node)\n                    } catch (exc: Exception) {\n                        processProcessingException(exc)\n                    }\n                }\n            }\n        }\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val inputString = &quot;{\\&quot;key\\&quot;: \\&quot;v\\\\\\&quot;alue\\&quot;}&quot;\n    val byteArray = inputString.toByteArray()\n    val inputStream: InputStream = ByteArrayInputStream(byteArray)\n    JsonlStreamProcessor({ node -&gt;\n        println(&quot;Processing node:&quot;)\n        println(node)\n    }, { exc -&gt; }, { exc -&gt; }).processInput(\n        inputStream\n    )\n}\n\nOutput:\nProcessing node:\n{&quot;key&quot;:&quot;v\\&quot;alue&quot;}\n\n</code></pre>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":1528364,"reputation":125614,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":1,"creation_date":1564525901,"post_id":45200142,"comment_id":101057936,"body_markdown":"I&#39;ve put together some details on how to use `PATCH` in this [post](https://cassiomolin.com/using-http-patch-in-spring/). And the approach described in the post was used in this [example](https://github.com/cassiomolin/http-patch-spring) available on GitHub.","body":"I&#39;ve put together some details on how to use <code>PATCH</code> in this <a href=\"https://cassiomolin.com/using-http-patch-in-spring/\" rel=\"nofollow noreferrer\">post</a>. And the approach described in the post was used in this <a href=\"https://github.com/cassiomolin/http-patch-spring\" rel=\"nofollow noreferrer\">example</a> available on GitHub."}],"answers":[{"comments":[{"owner":{"account_id":4745800,"reputation":637,"user_id":3837208,"accept_rate":53,"display_name":"wilson"},"score":0,"creation_date":1500498502,"post_id":45200430,"comment_id":77369241,"body_markdown":"It works well, but in this case is irrelevant to use POST and PATCH, right?","body":"It works well, but in this case is irrelevant to use POST and PATCH, right?"},{"owner":{"account_id":6759653,"reputation":5203,"user_id":5207023,"accept_rate":100,"display_name":"Mykola Yashchenko"},"score":0,"creation_date":1500556243,"post_id":45200430,"comment_id":77397507,"body_markdown":"It depends on your needs. In my opinion, it&#39;s better to use PUT (or POST) for modification","body":"It depends on your needs. In my opinion, it&#39;s better to use PUT (or POST) for modification"}],"tags":[],"owner":{"account_id":6759653,"reputation":5203,"user_id":5207023,"accept_rate":100,"display_name":"Mykola Yashchenko"},"comment_count":2,"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1500496742,"creation_date":1500496169,"answer_id":45200430,"question_id":45200142,"body_markdown":"You can write custom update query which updates only particular fields:\r\n\r\n    @Override\r\n    public void saveManager(Manager manager) {  \r\n        Query query = sessionFactory.getCurrentSession().createQuery(&quot;update Manager set username = :username, password = :password where id = :id&quot;);\r\n        query.setParameter(&quot;username&quot;, manager.getUsername());\r\n        query.setParameter(&quot;password&quot;, manager.getPassword());\r\n        query.setParameter(&quot;id&quot;, manager.getId());\r\n        query.executeUpdate();\r\n    }","title":"Spring REST partial update with @PATCH method","body":"<p>You can write custom update query which updates only particular fields:</p>\n\n<pre><code>@Override\npublic void saveManager(Manager manager) {  \n    Query query = sessionFactory.getCurrentSession().createQuery(\"update Manager set username = :username, password = :password where id = :id\");\n    query.setParameter(\"username\", manager.getUsername());\n    query.setParameter(\"password\", manager.getPassword());\n    query.setParameter(\"id\", manager.getId());\n    query.executeUpdate();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1204576,"reputation":2855,"user_id":1174543,"accept_rate":80,"display_name":"Steve11235"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1500496628,"creation_date":1500496628,"answer_id":45200554,"question_id":45200142,"body_markdown":"First, you need to know if you are doing an insert or an update. Insert is straightforward. On update, use get() to retrieve the entity. Then update whatever fields. At the end of the transaction, Hibernate will flush the changes and commit.","title":"Spring REST partial update with @PATCH method","body":"<p>First, you need to know if you are doing an insert or an update. Insert is straightforward. On update, use get() to retrieve the entity. Then update whatever fields. At the end of the transaction, Hibernate will flush the changes and commit.</p>\n"},{"comments":[{"owner":{"account_id":8045526,"reputation":801,"user_id":6065862,"accept_rate":42,"display_name":"blaa"},"score":0,"creation_date":1517388706,"post_id":45200650,"comment_id":84070987,"body_markdown":"What is the approach in the case when the RequestBody is in the form of plain text ? Do you use a converter to convert from plain text to map ?","body":"What is the approach in the case when the RequestBody is in the form of plain text ? Do you use a converter to convert from plain text to map ?"},{"owner":{"account_id":13059268,"reputation":2333,"user_id":9437031,"display_name":"Dhwanil Patel"},"score":0,"creation_date":1572072696,"post_id":45200650,"comment_id":103454948,"body_markdown":"@lane.maxwell Ya i completely agree with your answer if we using RequestMethod.PATCH then we need to use Map but i have some confusion can you please clear it?, If i changed method type PATCH to PUT and remain all changes as it is it worked same for database prospective then how it&#39;s different.        I aware about two difference of PUT and PATCH - 1.Create new entry if not exist. 2. Change only specific value not whole JSON. For JPA is it useful? And yes then how?","body":"@lane.maxwell Ya i completely agree with your answer if we using RequestMethod.PATCH then we need to use Map but i have some confusion can you please clear it?, If i changed method type PATCH to PUT and remain all changes as it is it worked same for database prospective then how it&#39;s different.        I aware about two difference of PUT and PATCH - 1.Create new entry if not exist. 2. Change only specific value not whole JSON. For JPA is it useful? And yes then how?"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1572094806,"post_id":45200650,"comment_id":103458873,"body_markdown":"@DhwanilPatel from the perspective of your code and how it behaves, PUT and PATCH and even POST for that matter will all behave the same.  To adhere to the HTTP spec, a PUT request should contain the entire entity, whereas the PATCH will only contain the attributes you want to modify.","body":"@DhwanilPatel from the perspective of your code and how it behaves, PUT and PATCH and even POST for that matter will all behave the same.  To adhere to the HTTP spec, a PUT request should contain the entire entity, whereas the PATCH will only contain the attributes you want to modify."},{"owner":{"account_id":12084746,"reputation":2534,"user_id":8999575,"display_name":"Olexander Yushko"},"score":2,"creation_date":1597358740,"post_id":45200650,"comment_id":112114968,"body_markdown":"Thanks for your solution. But i had InvocationTargetException when didn&#39;t write the command: &quot;field.setAccessible(true);&quot; between &#39;findField&#39; and &#39;setField&#39;. Hope it helps somebody.","body":"Thanks for your solution. But i had InvocationTargetException when didn&#39;t write the command: &quot;field.setAccessible(true);&quot; between &#39;findField&#39; and &#39;setField&#39;. Hope it helps somebody."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1597359080,"post_id":45200650,"comment_id":112115039,"body_markdown":"That&#39;s a great comment, as setField assumes the fields are accessible.  I&#39;m going to modify the answer","body":"That&#39;s a great comment, as setField assumes the fields are accessible.  I&#39;m going to modify the answer"},{"owner":{"account_id":13026411,"reputation":81,"user_id":9414276,"display_name":"Abhishek Saxena"},"score":0,"creation_date":1631891923,"post_id":45200650,"comment_id":122354538,"body_markdown":"I tried this, but if I have a field of say class Unit unit, and my request body is { &quot;unit&quot;: { &quot;id&quot;: 2 } }, this way won&#39;t work. How to resolve that?","body":"I tried this, but if I have a field of say class Unit unit, and my request body is { &quot;unit&quot;: { &quot;id&quot;: 2 } }, this way won&#39;t work. How to resolve that?"},{"owner":{"account_id":7471816,"reputation":3218,"user_id":5679560,"accept_rate":36,"display_name":"Rafael Lima"},"score":0,"creation_date":1654543796,"post_id":45200650,"comment_id":128111188,"body_markdown":"Using reflection for PATCH is a really bad idea... it will only work if your fields are named EXACTLY as in the json if your field. `myField` is mapped to json as `my_field`, this code will crash. also if your field is `int` and the json came as `double` or even if you are using any enum ou complex object inside you domain class.... this code will fail miserably... this code only works for very basic simple specific scenario","body":"Using reflection for PATCH is a really bad idea... it will only work if your fields are named EXACTLY as in the json if your field. <code>myField</code> is mapped to json as <code>my_field</code>, this code will crash. also if your field is <code>int</code> and the json came as <code>double</code> or even if you are using any enum ou complex object inside you domain class.... this code will fail miserably... this code only works for very basic simple specific scenario"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1654544038,"post_id":45200650,"comment_id":128111250,"body_markdown":"@RafaelLima There is an implied assumption that you are sending in the fields that will match your target.","body":"@RafaelLima There is an implied assumption that you are sending in the fields that will match your target."},{"owner":{"account_id":7471816,"reputation":3218,"user_id":5679560,"accept_rate":36,"display_name":"Rafael Lima"},"score":0,"creation_date":1654547934,"post_id":45200650,"comment_id":128112267,"body_markdown":"@lane.maxwell, how will send a enum in a json? json wise 1 = 1.0, java wise not... not to mention all possible nested objects","body":"@lane.maxwell, how will send a enum in a json? json wise 1 = 1.0, java wise not... not to mention all possible nested objects"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1654548796,"post_id":45200650,"comment_id":128112485,"body_markdown":"@RafaelLima enums are no different than any other attribute, they serialize to their value.  I&#39;m not sure what you mean by 1 = 1.0, but, again there is an assumption that the values you would send would be correct.  If you want to set it to 1, send 1, if you want to set it to 1.0, send 1.0.  This, however, is an extended discussion and should be moved.  Please, if you have a better answer to the OP&#39;s question, add it as an answer.","body":"@RafaelLima enums are no different than any other attribute, they serialize to their value.  I&#39;m not sure what you mean by 1 = 1.0, but, again there is an assumption that the values you would send would be correct.  If you want to set it to 1, send 1, if you want to set it to 1.0, send 1.0.  This, however, is an extended discussion and should be moved.  Please, if you have a better answer to the OP&#39;s question, add it as an answer."}],"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":10,"down_vote_count":2,"up_vote_count":48,"is_accepted":false,"score":46,"last_activity_date":1677263617,"creation_date":1500496962,"answer_id":45200650,"question_id":45200142,"body_markdown":"If you are truly using a PATCH, then you should use RequestMethod.PATCH, not RequestMethod.POST.\r\n\r\nYour patch mapping should contain the id with which you can retrieve the Manager object to be patched.  Also, it should only include the fields with which you want to change.  In your example you are sending the entire entity, so you can&#39;t discern the fields that are actually changing (does empty mean leave this field alone or actually change its value to empty).\r\n\r\nPerhaps an implementation as such is what you&#39;re after?\r\n\r\n```\r\n    @RequestMapping(value = &quot;/manager/{id}&quot;, method = RequestMethod.PATCH)\r\n    public @ResponseBody void saveManager(@PathVariable Long id, @RequestBody Map&lt;Object, Object&gt; fields) {\r\n        Manager manager = someServiceToLoadManager(id);\r\n        // Map key is field name, v is value\r\n        fields.forEach((k, v) -&gt; {\r\n           // use reflection to get field k on manager and set it to value v\r\n            Field field = ReflectionUtils.findField(Manager.class, k);\r\n            field.setAccessible(true);\r\n            ReflectionUtils.setField(field, manager, v);\r\n        });\r\n        managerService.saveManager(manager);\r\n    }\r\n```\r\n\r\n### Update \r\nI want to provide an update to this post as there is now a project that simplifies the patching process.\r\n\r\nThe artifact is\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.java-json-tools&lt;/groupId&gt;\r\n      &lt;artifactId&gt;json-patch&lt;/artifactId&gt;\r\n      &lt;version&gt;1.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nThe implementation to patch the Manager object in the OP would look like this:\r\n\r\n\r\n##### Controller\r\n```\r\n    @Operation(summary = &quot;Patch a Manager&quot;)\r\n    @PatchMapping(&quot;/{managerId}&quot;)\r\n    public Task patchManager(@PathVariable Long managerId, @RequestBody JsonPatch jsonPatch)\r\n        throws JsonPatchException, JsonProcessingException {\r\n        return managerService.patch(managerId, jsonPatch);\r\n    }\r\n```\r\n\r\n##### Service\r\n```\r\n    ...\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n    ...\r\n\r\n    public Manager patch(Long managerId, JsonPatch jsonPatch) throws JsonPatchException, JsonProcessingException {\r\n        Manager manager = managerRepository.findById(managerId).orElseThrow(EntityNotFoundException::new);\r\n        JsonNode patched = jsonPatch.apply(objectMapper.convertValue(manager, JsonNode.class));\r\n\r\n        return managerRepository.save(objectMapper.treeToValue(patched, Manager.class));\r\n    }\r\n```\r\n\r\nThe patch request follows the specifications in RFC 6092, so this is a true PATCH implementation.  Details can be found [here](https://jsonpatch.com/)","title":"Spring REST partial update with @PATCH method","body":"<p>If you are truly using a PATCH, then you should use RequestMethod.PATCH, not RequestMethod.POST.</p>\n<p>Your patch mapping should contain the id with which you can retrieve the Manager object to be patched.  Also, it should only include the fields with which you want to change.  In your example you are sending the entire entity, so you can't discern the fields that are actually changing (does empty mean leave this field alone or actually change its value to empty).</p>\n<p>Perhaps an implementation as such is what you're after?</p>\n<pre><code>    @RequestMapping(value = &quot;/manager/{id}&quot;, method = RequestMethod.PATCH)\n    public @ResponseBody void saveManager(@PathVariable Long id, @RequestBody Map&lt;Object, Object&gt; fields) {\n        Manager manager = someServiceToLoadManager(id);\n        // Map key is field name, v is value\n        fields.forEach((k, v) -&gt; {\n           // use reflection to get field k on manager and set it to value v\n            Field field = ReflectionUtils.findField(Manager.class, k);\n            field.setAccessible(true);\n            ReflectionUtils.setField(field, manager, v);\n        });\n        managerService.saveManager(manager);\n    }\n</code></pre>\n<h3>Update</h3>\n<p>I want to provide an update to this post as there is now a project that simplifies the patching process.</p>\n<p>The artifact is</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;com.github.java-json-tools&lt;/groupId&gt;\n      &lt;artifactId&gt;json-patch&lt;/artifactId&gt;\n      &lt;version&gt;1.13&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The implementation to patch the Manager object in the OP would look like this:</p>\n<h5>Controller</h5>\n<pre><code>    @Operation(summary = &quot;Patch a Manager&quot;)\n    @PatchMapping(&quot;/{managerId}&quot;)\n    public Task patchManager(@PathVariable Long managerId, @RequestBody JsonPatch jsonPatch)\n        throws JsonPatchException, JsonProcessingException {\n        return managerService.patch(managerId, jsonPatch);\n    }\n</code></pre>\n<h5>Service</h5>\n<pre><code>    ...\n    @Autowired\n    private ObjectMapper objectMapper;\n    ...\n\n    public Manager patch(Long managerId, JsonPatch jsonPatch) throws JsonPatchException, JsonProcessingException {\n        Manager manager = managerRepository.findById(managerId).orElseThrow(EntityNotFoundException::new);\n        JsonNode patched = jsonPatch.apply(objectMapper.convertValue(manager, JsonNode.class));\n\n        return managerRepository.save(objectMapper.treeToValue(patched, Manager.class));\n    }\n</code></pre>\n<p>The patch request follows the specifications in RFC 6092, so this is a true PATCH implementation.  Details can be found <a href=\"https://jsonpatch.com/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"comments":[{"owner":{"account_id":9609285,"reputation":756,"user_id":7134235,"accept_rate":82,"display_name":"Boris"},"score":0,"creation_date":1539158877,"post_id":45205844,"comment_id":92395743,"body_markdown":"where did &quot;user&quot; come from, and what is it?","body":"where did &quot;user&quot; come from, and what is it?"},{"owner":{"account_id":2130509,"reputation":4379,"user_id":1891456,"display_name":"Yogesh Badke"},"score":0,"creation_date":1539235118,"post_id":45205844,"comment_id":92429054,"body_markdown":"@Boris My bad, it was supposed to be `manager` param. Corrected the code.","body":"@Boris My bad, it was supposed to be <code>manager</code> param. Corrected the code."},{"owner":{"account_id":2787734,"reputation":117,"user_id":2398691,"accept_rate":50,"display_name":"samira"},"score":0,"creation_date":1573810910,"post_id":45205844,"comment_id":104016058,"body_markdown":"so what if we want to really change a field value to NULL!","body":"so what if we want to really change a field value to NULL!"},{"owner":{"account_id":2130509,"reputation":4379,"user_id":1891456,"display_name":"Yogesh Badke"},"score":0,"creation_date":1573907812,"post_id":45205844,"comment_id":104047250,"body_markdown":"Remove ‘value ==null’ check from BeanAwareNullUtils","body":"Remove ‘value ==null’ check from BeanAwareNullUtils"},{"owner":{"account_id":3034424,"reputation":651,"user_id":2572843,"display_name":"darefilz"},"score":0,"creation_date":1599833137,"post_id":45205844,"comment_id":112905806,"body_markdown":"Good answer. And it is even easier as the documentation of `BeanUtilsBean` states:\n_If the origin &quot;bean&quot; is actually a Map, it is assumed to contain String-valued simple property names as the keys, pointing at the corresponding property values that will be converted (if necessary) and set in the destination bean._\nThat said, the Jackson part and the NullAwareBeanUtilsBean part as well can be skipped. Just use `BeanUtilsBean.getInstance().copyProperties(fromDb, manager);`.","body":"Good answer. And it is even easier as the documentation of <code>BeanUtilsBean</code> states: <i>If the origin &quot;bean&quot; is actually a Map, it is assumed to contain String-valued simple property names as the keys, pointing at the corresponding property values that will be converted (if necessary) and set in the destination bean.</i> That said, the Jackson part and the NullAwareBeanUtilsBean part as well can be skipped. Just use <code>BeanUtilsBean.getInstance().copyProperties(fromDb, manager);</code>."}],"tags":[],"owner":{"account_id":2130509,"reputation":4379,"user_id":1891456,"display_name":"Yogesh Badke"},"comment_count":5,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1539235079,"creation_date":1500528387,"answer_id":45205844,"question_id":45200142,"body_markdown":"With this, you can patch your changes\r\n\r\n    1. Autowire `ObjectMapper` in controller;\r\n    \r\n    2. @PatchMapping(&quot;/manager/{id}&quot;)\r\n        ResponseEntity&lt;?&gt; saveManager(@RequestBody Map&lt;String, String&gt; manager) {\r\n            Manager toBePatchedManager = objectMapper.convertValue(manager, Manager.class);\r\n            managerService.patch(toBePatchedManager);\r\n        }\r\n    \r\n    3. Create new method `patch` in `ManagerService`\r\n    \r\n    4. Autowire `NullAwareBeanUtilsBean` in `ManagerService`\r\n    \r\n    5. public void patch(Manager toBePatched) {\r\n    \t\tOptional&lt;Manager&gt; optionalManager = managerRepository.findOne(toBePatched.getId());\r\n    \t\tif (optionalManager.isPresent()) {\r\n    \t\t\tManager fromDb = optionalManager.get();\r\n    \t\t\t// bean utils will copy non null values from toBePatched to fromDb manager.\r\n    \t\t\tbeanUtils.copyProperties(fromDb, toBePatched);\r\n    \t\t\tupdateManager(fromDb);\r\n    \t\t}\r\n    \t}\r\n\r\nYou will have to extend `BeanUtilsBean` to implement copying of non null values behaviour.\r\n\r\n    public class NullAwareBeanUtilsBean extends BeanUtilsBean {\r\n    \r\n    \t@Override\r\n    \tpublic void copyProperty(Object dest, String name, Object value)\r\n    \t\t\tthrows IllegalAccessException, InvocationTargetException {\r\n    \t\tif (value == null)\r\n    \t\t\treturn;\r\n    \t\tsuper.copyProperty(dest, name, value);\r\n    \t}\r\n    }\r\n\r\nand finally, mark NullAwareBeanUtilsBean as `@Component`\r\n\r\nor \r\n\r\nregister `NullAwareBeanUtilsBean` as bean\r\n\r\n    @Bean\r\n    public NullAwareBeanUtilsBean nullAwareBeanUtilsBean() {\r\n    \treturn new NullAwareBeanUtilsBean();\r\n    }\r\n\r\n","title":"Spring REST partial update with @PATCH method","body":"<p>With this, you can patch your changes</p>\n\n<pre><code>1. Autowire `ObjectMapper` in controller;\n\n2. @PatchMapping(\"/manager/{id}\")\n    ResponseEntity&lt;?&gt; saveManager(@RequestBody Map&lt;String, String&gt; manager) {\n        Manager toBePatchedManager = objectMapper.convertValue(manager, Manager.class);\n        managerService.patch(toBePatchedManager);\n    }\n\n3. Create new method `patch` in `ManagerService`\n\n4. Autowire `NullAwareBeanUtilsBean` in `ManagerService`\n\n5. public void patch(Manager toBePatched) {\n        Optional&lt;Manager&gt; optionalManager = managerRepository.findOne(toBePatched.getId());\n        if (optionalManager.isPresent()) {\n            Manager fromDb = optionalManager.get();\n            // bean utils will copy non null values from toBePatched to fromDb manager.\n            beanUtils.copyProperties(fromDb, toBePatched);\n            updateManager(fromDb);\n        }\n    }\n</code></pre>\n\n<p>You will have to extend <code>BeanUtilsBean</code> to implement copying of non null values behaviour.</p>\n\n<pre><code>public class NullAwareBeanUtilsBean extends BeanUtilsBean {\n\n    @Override\n    public void copyProperty(Object dest, String name, Object value)\n            throws IllegalAccessException, InvocationTargetException {\n        if (value == null)\n            return;\n        super.copyProperty(dest, name, value);\n    }\n}\n</code></pre>\n\n<p>and finally, mark NullAwareBeanUtilsBean as <code>@Component</code></p>\n\n<p>or </p>\n\n<p>register <code>NullAwareBeanUtilsBean</code> as bean</p>\n\n<pre><code>@Bean\npublic NullAwareBeanUtilsBean nullAwareBeanUtilsBean() {\n    return new NullAwareBeanUtilsBean();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2503261,"reputation":354,"user_id":9649530,"display_name":"ARno"},"score":0,"creation_date":1676840074,"post_id":68742281,"comment_id":133213698,"body_markdown":"I searched for hours solutions to partial update, and the `objectMapper.updateValue(foo , fields);` with the hashmap is the simplest way to make it works using Spring Boot 3","body":"I searched for hours solutions to partial update, and the <code>objectMapper.updateValue(foo , fields);</code> with the hashmap is the simplest way to make it works using Spring Boot 3"}],"tags":[],"owner":{"account_id":10661606,"reputation":41,"user_id":7849431,"display_name":"catie"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628685789,"creation_date":1628685789,"answer_id":68742281,"question_id":45200142,"body_markdown":"`ObjectMapper.updateValue` provides all you need to partially map your entity with values from dto.\r\nAs an addition, you can use either of two here: `Map&lt;String, Object&gt; fields` or `String json`, so your service method may look like this:\r\n\r\n    \r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @Override\r\n    @Transactional\r\n    public Foo save(long id, Map&lt;String, Object&gt; fields) throws JsonMappingException {\r\n        Foo foo = fooRepository.findById(id)\r\n        .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\r\n\r\n        return objectMapper.updateValue(foo , fields);\r\n    }\r\n\r\nAs a second solution and addition to Lane Maxwell&#39;s answer you could use `Reflection` to map only properties that exist in a Map of values that was sent, so your service method may look like this:\r\n\r\n    \r\n    @Override\r\n    @Transactional\r\n    public Foo save(long id, Map&lt;String, Object&gt; fields) {\r\n\r\n        Foo foo = fooRepository.findById(id)\r\n        .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\r\n\r\n        fields.keySet()\r\n                .forEach(k -&gt; {\r\n                    Method method = ReflectionUtils.findMethod(LocationProduct.class, &quot;set&quot; + StringUtils.capitalize(k));\r\n                    if (method != null) {\r\n                        ReflectionUtils.invokeMethod(method, foo, fields.get(k));\r\n                    }\r\n                });\r\n        return foo;\r\n    }\r\n\r\nSecond solution allows you to insert some additional business logic into mapping process, might be conversions or calculations ect. \r\n\r\nAlso unlike finding reflection field `Field field = ReflectionUtils.findField(Foo.class, k);` by name and than making it accessible, finding property&#39;s setter actually calls setter method that might contain additional logic to be executed and prevents from setting value to private properties.","title":"Spring REST partial update with @PATCH method","body":"<p><code>ObjectMapper.updateValue</code> provides all you need to partially map your entity with values from dto.\nAs an addition, you can use either of two here: <code>Map&lt;String, Object&gt; fields</code> or <code>String json</code>, so your service method may look like this:</p>\n<pre><code>@Autowired\nprivate ObjectMapper objectMapper;\n\n@Override\n@Transactional\npublic Foo save(long id, Map&lt;String, Object&gt; fields) throws JsonMappingException {\n    Foo foo = fooRepository.findById(id)\n    .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\n\n    return objectMapper.updateValue(foo , fields);\n}\n</code></pre>\n<p>As a second solution and addition to Lane Maxwell's answer you could use <code>Reflection</code> to map only properties that exist in a Map of values that was sent, so your service method may look like this:</p>\n<pre><code>@Override\n@Transactional\npublic Foo save(long id, Map&lt;String, Object&gt; fields) {\n\n    Foo foo = fooRepository.findById(id)\n    .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\n\n    fields.keySet()\n            .forEach(k -&gt; {\n                Method method = ReflectionUtils.findMethod(LocationProduct.class, &quot;set&quot; + StringUtils.capitalize(k));\n                if (method != null) {\n                    ReflectionUtils.invokeMethod(method, foo, fields.get(k));\n                }\n            });\n    return foo;\n}\n</code></pre>\n<p>Second solution allows you to insert some additional business logic into mapping process, might be conversions or calculations ect.</p>\n<p>Also unlike finding reflection field <code>Field field = ReflectionUtils.findField(Foo.class, k);</code> by name and than making it accessible, finding property's setter actually calls setter method that might contain additional logic to be executed and prevents from setting value to private properties.</p>\n"},{"tags":[],"owner":{"account_id":16655514,"reputation":126,"user_id":12037038,"display_name":"fullstack20148"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680084691,"creation_date":1680084691,"answer_id":75875847,"question_id":45200142,"body_markdown":"You can use [Mapstruct][1] to achievie  this goal OOTB. Configuration `NullValuePropertyMappingStrategy.IGNORE` is the key.\r\n\r\nSee this example:\r\n\r\n    @Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\n    public interface UpdateMapper {\r\n        void update(@MappingTarget MyClass target, MyClass source);\r\n    }\r\n\r\nAnd use it:\r\n    \r\n    UpdateMapper  mapper = new UpdateMapperImpl();    \r\n    mapper.update(target, source);\r\n    \r\n    repository.save(target);\r\n\r\nHere you can read [Baeldung][2] reference\r\n\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: https://www.baeldung.com/spring-data-partial-update","title":"Spring REST partial update with @PATCH method","body":"<p>You can use <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">Mapstruct</a> to achievie  this goal OOTB. Configuration <code>NullValuePropertyMappingStrategy.IGNORE</code> is the key.</p>\n<p>See this example:</p>\n<pre><code>@Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\npublic interface UpdateMapper {\n    void update(@MappingTarget MyClass target, MyClass source);\n}\n</code></pre>\n<p>And use it:</p>\n<pre><code>UpdateMapper  mapper = new UpdateMapperImpl();    \nmapper.update(target, source);\n\nrepository.save(target);\n</code></pre>\n<p>Here you can read <a href=\"https://www.baeldung.com/spring-data-partial-update\" rel=\"nofollow noreferrer\">Baeldung</a> reference</p>\n"},{"tags":[],"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057107,"creation_date":1701998244,"answer_id":77623838,"question_id":45200142,"body_markdown":"As was mentioned, you can use beanutils, which supports arrays/lists as well. Example code below. Adapt for the web, injecting properties, saving to DB, etc.\r\n\r\n    import org.apache.commons.beanutils.PropertyUtils;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Objects;\r\n    \r\n    public class PatchProcessor {\r\n        private final PatchProperties patchProperties;\r\n    \r\n        public PatchProcessor() {\r\n            this.patchProperties = new PatchProperties();\r\n        }\r\n    \r\n        public void patch(Object sourceObject, Object targetObject) throws Exception {\r\n    \r\n            for (String allowedField : patchProperties.fieldsAllowed) {\r\n                processFieldUpdate(sourceObject, targetObject, allowedField, &quot;&quot;);\r\n            }\r\n        }\r\n    \r\n        private void processFieldUpdate(Object sourceObject, Object targetObject, String subField, String parentField) throws Exception {\r\n    \r\n            String targetObjectKey = subField.contains(&quot;.&quot;)? subField.substring(0, subField.indexOf(&#39;.&#39;)) : subField;\r\n            String fullField = (&quot;&quot;.equals(parentField)? &quot;&quot; : parentField + &quot;.&quot;) + targetObjectKey;\r\n            Object sourceSubObject = PropertyUtils.getProperty(sourceObject, targetObjectKey);\r\n            if (sourceSubObject instanceof Collection) {\r\n                String lookupKey = patchProperties.listLookupField.get(fullField);\r\n                boolean hasListId = patchProperties.listLookupField.containsKey(fullField);\r\n                List sourceList = (List) sourceSubObject;\r\n                List targetList = (List) PropertyUtils.getProperty(targetObject, targetObjectKey);\r\n                if (null == sourceList) {\r\n                    //ignore null\r\n                } else {\r\n                    if (null == targetList) {\r\n                        targetList = sourceList.getClass().newInstance();\r\n                        PropertyUtils.setProperty(targetObject, targetObjectKey, targetList);\r\n                    }\r\n                    int index = 0;\r\n                    for (Object sourceListObject : sourceList) {\r\n                        Object targetListObject = null;\r\n                        if (hasListId) {\r\n                            targetListObject = findTargetListObject(sourceListObject, targetList, lookupKey);\r\n                        } else {\r\n                            targetListObject = targetList.size() &gt;= index + 1? targetList.get(index) : null;\r\n                            index++;\r\n                        }\r\n                        String listObjectSubField = subField.substring(subField.indexOf(&#39;.&#39;) + 1);\r\n                        if (null == targetListObject) {\r\n                            targetListObject = sourceListObject.getClass().newInstance();\r\n                            if (hasListId) {\r\n                                Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\r\n                                PropertyUtils.setProperty(targetListObject, lookupKey, sourceKeyValue);\r\n                            }\r\n                            targetList.add(targetListObject);\r\n                        }\r\n                        processFieldUpdate(sourceListObject, targetListObject, listObjectSubField, targetObjectKey);\r\n                    }\r\n                }\r\n            } else {\r\n                Object targetSubObject = PropertyUtils.getProperty(targetObject, targetObjectKey);\r\n                if (null == sourceSubObject) {\r\n                    //ignore null\r\n                } else if (null != targetSubObject) {\r\n                    if (subField.contains(&quot;.&quot;)) {\r\n                        String objectSubField = subField.substring(subField.indexOf(&#39;.&#39;) + 1);\r\n                        processFieldUpdate(sourceSubObject, targetSubObject, objectSubField, targetObjectKey);\r\n                    } else {\r\n                        Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\r\n                        if (rightValue != null) {\r\n                            PropertyUtils.setProperty(targetObject, subField, rightValue);\r\n                        } else {\r\n                            //ignore null\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (subField.contains(&quot;.&quot;)) {\r\n                        Object emptyObject = sourceSubObject.getClass().newInstance();\r\n                        PropertyUtils.setProperty(targetObject, targetObjectKey, emptyObject);\r\n                        String objectSubField = subField.substring(subField.indexOf(&#39;.&#39;) + 1);\r\n                        processFieldUpdate(sourceSubObject, emptyObject, objectSubField, targetObjectKey);\r\n                    } else {\r\n                        Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\r\n                        if (rightValue != null) {\r\n                            PropertyUtils.setProperty(targetObject, subField, rightValue);\r\n                        } else {\r\n                            //ignore null\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private Object findTargetListObject(Object sourceListObject, List targetList, String lookupKey) throws Exception {\r\n            Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\r\n            return targetList.stream().filter(obj -&gt; {\r\n                try {\r\n                    Object targetKeyValue = PropertyUtils.getProperty(obj, lookupKey);\r\n                    return Objects.equals(sourceKeyValue, targetKeyValue);\r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }).findFirst().orElse(null);\r\n        }\r\n    \r\n        private class PatchProperties {\r\n            List&lt;String&gt; fieldsAllowed = new ArrayList&lt;&gt;();\r\n            Map&lt;String, String&gt; listLookupField = new HashMap&lt;&gt;();\r\n            PatchProperties() {\r\n                fieldsAllowed.add(&quot;name&quot;);\r\n                fieldsAllowed.add(&quot;phoneNumber&quot;);\r\n                fieldsAllowed.add(&quot;jobs.location&quot;);\r\n                fieldsAllowed.add(&quot;jobs.emailAddresses.privateUse&quot;);\r\n                fieldsAllowed.add(&quot;websites.dateAdded&quot;);\r\n                fieldsAllowed.add(&quot;websites.url&quot;);\r\n    \r\n                listLookupField.put(&quot;jobs&quot;, &quot;subId&quot;);\r\n                listLookupField.put(&quot;jobs.emailAddresses&quot;, &quot;emailId&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nThen the unit test:\r\n\r\n    import com.example.demo.dto.Job;\r\n    import com.example.demo.dto.Person;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.UUID;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.*;\r\n    \r\n    class PatchProcessorTest {\r\n    \r\n        @Test\r\n        void patch() throws Exception {\r\n            UUID matchJobId = UUID.randomUUID();\r\n            Person person = new Person();\r\n            person.setTitle(&quot;original title&quot;);\r\n            person.setName(&quot;Joe&quot;);\r\n            person.setJobs(new ArrayList&lt;&gt;());\r\n            person.getJobs().add(new Job(UUID.randomUUID(), &quot;location 1&quot;, &quot;job title 1&quot;, null));\r\n            person.getJobs().add(new Job(matchJobId, &quot;location 2&quot;, &quot;job title 2&quot;, null));\r\n    \r\n            Person update = new Person();\r\n            update.setName(&quot;Joseph&quot;);\r\n            update.setTitle(&quot;new title&quot;);\r\n            update.setJobs(new ArrayList&lt;&gt;(Arrays.asList(new Job(matchJobId, &quot;new location 2&quot;, &quot;new job title 2&quot;, null),\r\n                    new Job(UUID.randomUUID(), &quot;new location 3&quot;, &quot;job title 3&quot;, null))));\r\n    \r\n            PatchProcessor processor = new PatchProcessor();\r\n    \r\n            processor.patch(update, person);\r\n    \r\n            assertEquals(&quot;Joseph&quot;, person.getName());\r\n            assertNotEquals(&quot;new title&quot;, person.getTitle());\r\n            assertTrue(person.getJobs().size() == 3);\r\n            assertEquals(&quot;new location 2&quot;, person.getJobs().get(1).getLocation());\r\n        }\r\n    }\r\n\r\nDTOs are left out, but can be inferred. Also, the utility has not been tested with more than 2 levels of lists, support for that is left as an exercise.\r\n\r\n\r\n","title":"Spring REST partial update with @PATCH method","body":"<p>As was mentioned, you can use beanutils, which supports arrays/lists as well. Example code below. Adapt for the web, injecting properties, saving to DB, etc.</p>\n<pre><code>import org.apache.commons.beanutils.PropertyUtils;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\n\npublic class PatchProcessor {\n    private final PatchProperties patchProperties;\n\n    public PatchProcessor() {\n        this.patchProperties = new PatchProperties();\n    }\n\n    public void patch(Object sourceObject, Object targetObject) throws Exception {\n\n        for (String allowedField : patchProperties.fieldsAllowed) {\n            processFieldUpdate(sourceObject, targetObject, allowedField, &quot;&quot;);\n        }\n    }\n\n    private void processFieldUpdate(Object sourceObject, Object targetObject, String subField, String parentField) throws Exception {\n\n        String targetObjectKey = subField.contains(&quot;.&quot;)? subField.substring(0, subField.indexOf('.')) : subField;\n        String fullField = (&quot;&quot;.equals(parentField)? &quot;&quot; : parentField + &quot;.&quot;) + targetObjectKey;\n        Object sourceSubObject = PropertyUtils.getProperty(sourceObject, targetObjectKey);\n        if (sourceSubObject instanceof Collection) {\n            String lookupKey = patchProperties.listLookupField.get(fullField);\n            boolean hasListId = patchProperties.listLookupField.containsKey(fullField);\n            List sourceList = (List) sourceSubObject;\n            List targetList = (List) PropertyUtils.getProperty(targetObject, targetObjectKey);\n            if (null == sourceList) {\n                //ignore null\n            } else {\n                if (null == targetList) {\n                    targetList = sourceList.getClass().newInstance();\n                    PropertyUtils.setProperty(targetObject, targetObjectKey, targetList);\n                }\n                int index = 0;\n                for (Object sourceListObject : sourceList) {\n                    Object targetListObject = null;\n                    if (hasListId) {\n                        targetListObject = findTargetListObject(sourceListObject, targetList, lookupKey);\n                    } else {\n                        targetListObject = targetList.size() &gt;= index + 1? targetList.get(index) : null;\n                        index++;\n                    }\n                    String listObjectSubField = subField.substring(subField.indexOf('.') + 1);\n                    if (null == targetListObject) {\n                        targetListObject = sourceListObject.getClass().newInstance();\n                        if (hasListId) {\n                            Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\n                            PropertyUtils.setProperty(targetListObject, lookupKey, sourceKeyValue);\n                        }\n                        targetList.add(targetListObject);\n                    }\n                    processFieldUpdate(sourceListObject, targetListObject, listObjectSubField, targetObjectKey);\n                }\n            }\n        } else {\n            Object targetSubObject = PropertyUtils.getProperty(targetObject, targetObjectKey);\n            if (null == sourceSubObject) {\n                //ignore null\n            } else if (null != targetSubObject) {\n                if (subField.contains(&quot;.&quot;)) {\n                    String objectSubField = subField.substring(subField.indexOf('.') + 1);\n                    processFieldUpdate(sourceSubObject, targetSubObject, objectSubField, targetObjectKey);\n                } else {\n                    Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\n                    if (rightValue != null) {\n                        PropertyUtils.setProperty(targetObject, subField, rightValue);\n                    } else {\n                        //ignore null\n                    }\n                }\n            } else {\n                if (subField.contains(&quot;.&quot;)) {\n                    Object emptyObject = sourceSubObject.getClass().newInstance();\n                    PropertyUtils.setProperty(targetObject, targetObjectKey, emptyObject);\n                    String objectSubField = subField.substring(subField.indexOf('.') + 1);\n                    processFieldUpdate(sourceSubObject, emptyObject, objectSubField, targetObjectKey);\n                } else {\n                    Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\n                    if (rightValue != null) {\n                        PropertyUtils.setProperty(targetObject, subField, rightValue);\n                    } else {\n                        //ignore null\n                    }\n                }\n            }\n        }\n    }\n\n    private Object findTargetListObject(Object sourceListObject, List targetList, String lookupKey) throws Exception {\n        Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\n        return targetList.stream().filter(obj -&gt; {\n            try {\n                Object targetKeyValue = PropertyUtils.getProperty(obj, lookupKey);\n                return Objects.equals(sourceKeyValue, targetKeyValue);\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }).findFirst().orElse(null);\n    }\n\n    private class PatchProperties {\n        List&lt;String&gt; fieldsAllowed = new ArrayList&lt;&gt;();\n        Map&lt;String, String&gt; listLookupField = new HashMap&lt;&gt;();\n        PatchProperties() {\n            fieldsAllowed.add(&quot;name&quot;);\n            fieldsAllowed.add(&quot;phoneNumber&quot;);\n            fieldsAllowed.add(&quot;jobs.location&quot;);\n            fieldsAllowed.add(&quot;jobs.emailAddresses.privateUse&quot;);\n            fieldsAllowed.add(&quot;websites.dateAdded&quot;);\n            fieldsAllowed.add(&quot;websites.url&quot;);\n\n            listLookupField.put(&quot;jobs&quot;, &quot;subId&quot;);\n            listLookupField.put(&quot;jobs.emailAddresses&quot;, &quot;emailId&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Then the unit test:</p>\n<pre><code>import com.example.demo.dto.Job;\nimport com.example.demo.dto.Person;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.UUID;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass PatchProcessorTest {\n\n    @Test\n    void patch() throws Exception {\n        UUID matchJobId = UUID.randomUUID();\n        Person person = new Person();\n        person.setTitle(&quot;original title&quot;);\n        person.setName(&quot;Joe&quot;);\n        person.setJobs(new ArrayList&lt;&gt;());\n        person.getJobs().add(new Job(UUID.randomUUID(), &quot;location 1&quot;, &quot;job title 1&quot;, null));\n        person.getJobs().add(new Job(matchJobId, &quot;location 2&quot;, &quot;job title 2&quot;, null));\n\n        Person update = new Person();\n        update.setName(&quot;Joseph&quot;);\n        update.setTitle(&quot;new title&quot;);\n        update.setJobs(new ArrayList&lt;&gt;(Arrays.asList(new Job(matchJobId, &quot;new location 2&quot;, &quot;new job title 2&quot;, null),\n                new Job(UUID.randomUUID(), &quot;new location 3&quot;, &quot;job title 3&quot;, null))));\n\n        PatchProcessor processor = new PatchProcessor();\n\n        processor.patch(update, person);\n\n        assertEquals(&quot;Joseph&quot;, person.getName());\n        assertNotEquals(&quot;new title&quot;, person.getTitle());\n        assertTrue(person.getJobs().size() == 3);\n        assertEquals(&quot;new location 2&quot;, person.getJobs().get(1).getLocation());\n    }\n}\n</code></pre>\n<p>DTOs are left out, but can be inferred. Also, the utility has not been tested with more than 2 levels of lists, support for that is left as an exercise.</p>\n"}],"owner":{"account_id":4745800,"reputation":637,"user_id":3837208,"accept_rate":53,"display_name":"wilson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49897,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":45200430,"answer_count":7,"score":19,"last_activity_date":1702057107,"creation_date":1500495015,"question_id":45200142,"body_markdown":"I&#39;m trying to implement a partial update of the Manager entity based in the following:\r\n\r\nEntity\r\n\r\n    public class Manager {\r\n        private int id;\r\n        private String firstname;\r\n        private String lastname;\r\n        private String username;\r\n        private String password;\r\n        \r\n        // getters and setters omitted\r\n    }\r\n\r\n\r\nSaveManager method in Controller\r\n\r\n\r\n    @RequestMapping(value = &quot;/save&quot;, method = RequestMethod.PATCH)\r\n\tpublic @ResponseBody void saveManager(@RequestBody Manager manager){\r\n\t\tmanagerService.saveManager(manager);\r\n\t}\r\n\r\nSave object manager in Dao impl.\r\n\r\n    @Override\r\n\tpublic void saveManager(Manager manager) {  \r\n        sessionFactory.getCurrentSession().saveOrUpdate(manager);\r\n\t}\r\n\r\nWhen I save the object the username and password has changed correctly but the others values are empty.\r\n\r\nSo what I need to do is update the username and password and keep all the remaining data.","title":"Spring REST partial update with @PATCH method","body":"<p>I'm trying to implement a partial update of the Manager entity based in the following:</p>\n\n<p>Entity</p>\n\n<pre><code>public class Manager {\n    private int id;\n    private String firstname;\n    private String lastname;\n    private String username;\n    private String password;\n\n    // getters and setters omitted\n}\n</code></pre>\n\n<p>SaveManager method in Controller</p>\n\n<pre><code>@RequestMapping(value = \"/save\", method = RequestMethod.PATCH)\npublic @ResponseBody void saveManager(@RequestBody Manager manager){\n    managerService.saveManager(manager);\n}\n</code></pre>\n\n<p>Save object manager in Dao impl.</p>\n\n<pre><code>@Override\npublic void saveManager(Manager manager) {  \n    sessionFactory.getCurrentSession().saveOrUpdate(manager);\n}\n</code></pre>\n\n<p>When I save the object the username and password has changed correctly but the others values are empty.</p>\n\n<p>So what I need to do is update the username and password and keep all the remaining data.</p>\n"},{"tags":["java","spring-boot","karate","java-11","spring-boot-test"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702057082,"creation_date":1702057082,"answer_id":77628303,"question_id":77628164,"body_markdown":"This should answer your question: https://github.com/karatelabs/karate/tree/v1.3.0/karate-mock-servlet#switching-the-http-client\r\n\r\n&gt; You can completely customize the HTTP client used by Karate by implementing the [HttpClient](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClient.java) interface which happens to be very simple.\r\n\r\n&gt; If you need to create a completely new HttpClient implementation from scratch, the [MockHttpClient](https://github.com/karatelabs/karate/blob/v1.3.0/karate-mock-servlet/src/main/java/com/intuit/karate/mock/servlet/MockHttpClient.java) is a good reference. There are many possibilities here, you can add support for other HTTP clients besides Apache and Jersey, or mock a stack that is not based on Java servlets.\r\n\r\n&gt; Karate defaults to the [ApacheHttpClient](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/ApacheHttpClient.java), and to change this for a test-run, you can set the [HttpClientFactory](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java) using the [Runner](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/Runner.java) &quot;builder&quot; API.\r\n\r\nThis bit of documentation was lost when the `karate-mock-servlet` was deprecated in 1.4.0, but hopefully now this post on stack-overflow can be the reference that people need. That said, I think you may be expecting something &quot;plug and play&quot; but no, there will be some work involved to write an adapter. Teams never need to do this though, the whole point of testing using an HTTP client is to simulate how end-users can consume your API.","title":"how to configure karate to use FeignClient or RestTemplate in place of ApacheHttpClient","body":"<p>This should answer your question: <a href=\"https://github.com/karatelabs/karate/tree/v1.3.0/karate-mock-servlet#switching-the-http-client\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/tree/v1.3.0/karate-mock-servlet#switching-the-http-client</a></p>\n<blockquote>\n<p>You can completely customize the HTTP client used by Karate by implementing the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClient.java\" rel=\"nofollow noreferrer\">HttpClient</a> interface which happens to be very simple.</p>\n</blockquote>\n<blockquote>\n<p>If you need to create a completely new HttpClient implementation from scratch, the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-mock-servlet/src/main/java/com/intuit/karate/mock/servlet/MockHttpClient.java\" rel=\"nofollow noreferrer\">MockHttpClient</a> is a good reference. There are many possibilities here, you can add support for other HTTP clients besides Apache and Jersey, or mock a stack that is not based on Java servlets.</p>\n</blockquote>\n<blockquote>\n<p>Karate defaults to the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/ApacheHttpClient.java\" rel=\"nofollow noreferrer\">ApacheHttpClient</a>, and to change this for a test-run, you can set the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java\" rel=\"nofollow noreferrer\">HttpClientFactory</a> using the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/Runner.java\" rel=\"nofollow noreferrer\">Runner</a> &quot;builder&quot; API.</p>\n</blockquote>\n<p>This bit of documentation was lost when the <code>karate-mock-servlet</code> was deprecated in 1.4.0, but hopefully now this post on stack-overflow can be the reference that people need. That said, I think you may be expecting something &quot;plug and play&quot; but no, there will be some work involved to write an adapter. Teams never need to do this though, the whole point of testing using an HTTP client is to simulate how end-users can consume your API.</p>\n"}],"owner":{"account_id":144338,"reputation":43,"user_id":353305,"display_name":"user353305"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77628303,"answer_count":1,"score":1,"last_activity_date":1702057082,"creation_date":1702055218,"question_id":77628164,"body_markdown":"versions: \r\nKarate 1.3.1, \r\nmaven 3.8, \r\nJava 11\r\n\r\nBelow is how i&#39;m invoking karate test\r\n\r\n```\r\n@SpringBootTest\r\n@ActiveProfiles(value = &quot;${spring.profiles.active:dev}&quot;)\r\npublic class ControllerIntegrationTest {\r\n\r\n    @Value(&quot;${service-ui-rest.url}&quot;)\r\n    private String serviceUiRestUrl;\r\n\r\n\r\n    @Karate.Test\r\n    Karate testThis(){\r\n        System.setProperty(&quot;file.encoding&quot;, &quot;UTF-8&quot;);\r\n        return Karate\r\n                .run(&quot;classpath:feature&quot;)\r\n                .systemProperty(&quot;service-ui-rest.url&quot;,serviceUiRestUrl)\r\n                .systemProperty(&quot;test.type&quot;,&quot;integration&quot;);\r\n    }\r\n}\r\n```\r\n\r\nWhile debugging, I discover when the following logic get call HttpClientFactory returns ApacheHttpClient::new\r\n\r\nhttps://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/core/ScenarioEngine.java#L1238\r\n\r\n\r\nhttps://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java#L33\r\n\r\n\r\nand wonder how to configure karate to use the bean for: FeignClient or RestTemplate that I have\r\n\r\ni found something similar at : https://github.com/gtnicol/karate-okhttp-signpost/blob/master/src/main/resources/karate-http.properties , but its using karate 0.9.1 \r\n\r\nany pointers will be highly appreciated \r\n \r\n","title":"how to configure karate to use FeignClient or RestTemplate in place of ApacheHttpClient","body":"<p>versions:\nKarate 1.3.1,\nmaven 3.8,\nJava 11</p>\n<p>Below is how i'm invoking karate test</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(value = &quot;${spring.profiles.active:dev}&quot;)\npublic class ControllerIntegrationTest {\n\n    @Value(&quot;${service-ui-rest.url}&quot;)\n    private String serviceUiRestUrl;\n\n\n    @Karate.Test\n    Karate testThis(){\n        System.setProperty(&quot;file.encoding&quot;, &quot;UTF-8&quot;);\n        return Karate\n                .run(&quot;classpath:feature&quot;)\n                .systemProperty(&quot;service-ui-rest.url&quot;,serviceUiRestUrl)\n                .systemProperty(&quot;test.type&quot;,&quot;integration&quot;);\n    }\n}\n</code></pre>\n<p>While debugging, I discover when the following logic get call HttpClientFactory returns ApacheHttpClient::new</p>\n<p><a href=\"https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/core/ScenarioEngine.java#L1238\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/core/ScenarioEngine.java#L1238</a></p>\n<p><a href=\"https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java#L33\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java#L33</a></p>\n<p>and wonder how to configure karate to use the bean for: FeignClient or RestTemplate that I have</p>\n<p>i found something similar at : <a href=\"https://github.com/gtnicol/karate-okhttp-signpost/blob/master/src/main/resources/karate-http.properties\" rel=\"nofollow noreferrer\">https://github.com/gtnicol/karate-okhttp-signpost/blob/master/src/main/resources/karate-http.properties</a> , but its using karate 0.9.1</p>\n<p>any pointers will be highly appreciated</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1702053565,"post_id":77622343,"comment_id":136854318,"body_markdown":"&quot; When I try to run the built jar file, it displays the above error. I have already added the maven plugin&quot; you cannot really do that with javafx. They have a somewhat special way of starting the application. Have you checked out the javafx plugin? https://github.com/openjfx/javafx-maven-plugin it works nice for creating small jlinked jvms","body":"&quot; When I try to run the built jar file, it displays the above error. I have already added the maven plugin&quot; you cannot really do that with javafx. They have a somewhat special way of starting the application. Have you checked out the javafx plugin? <a href=\"https://github.com/openjfx/javafx-maven-plugin\" rel=\"nofollow noreferrer\">github.com/openjfx/javafx-maven-plugin</a> it works nice for creating small jlinked jvms"}],"answers":[{"comments":[{"owner":{"account_id":30092221,"reputation":1,"user_id":23061425,"display_name":"Thinking Spaghetti29"},"score":0,"creation_date":1702106041,"post_id":77627849,"comment_id":136858900,"body_markdown":"Hey there! I was able to run my own program compiled using the maven jar plugin by specifying the path to javafx but wouldn&#39;t it be more convenient to be able to run the jar without having to give the paths to fx? (maybe by somehow adding those arguments to the manifest manually) Or maybe I could create a launcher that runs the command in terminal? Do you know a way?\nReally appreciate your reply.","body":"Hey there! I was able to run my own program compiled using the maven jar plugin by specifying the path to javafx but wouldn&#39;t it be more convenient to be able to run the jar without having to give the paths to fx? (maybe by somehow adding those arguments to the manifest manually) Or maybe I could create a launcher that runs the command in terminal? Do you know a way? Really appreciate your reply."},{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1702122563,"post_id":77627849,"comment_id":136860073,"body_markdown":"Hi @ThinkingSpaghetti29 you can use jlink as said [here](https://stackoverflow.com/a/69830299/175554) or you can use **mvn gluonfx:build gluonfx:nativerun** which will generate the executable file. [here](https://github.com/ozkanpakdil/swaggerific/blob/main/pom.xml#L286) you can find how to configure the maven gluon plugin","body":"Hi @ThinkingSpaghetti29 you can use jlink as said <a href=\"https://stackoverflow.com/a/69830299/175554\">here</a> or you can use <b>mvn gluonfx:build gluonfx:nativerun</b> which will generate the executable file. <a href=\"https://github.com/ozkanpakdil/swaggerific/blob/main/pom.xml#L286\" rel=\"nofollow noreferrer\">here</a> you can find how to configure the maven gluon plugin"}],"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057068,"creation_date":1702051590,"answer_id":77627849,"question_id":77622343,"body_markdown":"I achieve running the jar with shade plugin.\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.5.1&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;transformers&gt;\r\n            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                &lt;mainClass&gt;com.mascix.swaggerific.SwaggerApplication&lt;/mainClass&gt;\r\n            &lt;/transformer&gt;\r\n        &lt;/transformers&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;shade&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\nAfter this plugin, run **mvn package** which will generate the full jar with everything. But this will not be enough for javafx because it requires javafx sdk. so when I run the command(**java -jar target/swaggerific-1.0-SNAPSHOT.jar**) I got \r\n&gt; Error: JavaFX runtime components are missing, and are required to run this application\r\n \r\nI have sdkman installed gluon java version.\r\n&gt; java --module-path $PATH_TO_FX --add-modules &quot;javafx.controls,javafx.graphics,javafx.fxml&quot; -jar target/swaggerific-1.0-SNAPSHOT.jar\r\n\r\nand the env variable is\r\n```shell\r\necho $PATH_TO_FX\r\n/home/oz-mint/tools/javafx-sdk-21.0.1/lib\r\n```\r\nI highly suggest compile with gluon graalvm and run native binary. That will be easier to use. You can find example code and project [here](https://github.com/ozkanpakdil/swaggerific/blob/main/pom.xml#L272) used for this answer.\r\n\r\n[bash jar run example video](https://github.com/ozkanpakdil/swaggerific/assets/604405/786f315c-8c68-40a6-8ba2-5dd12fb9c7ed)\r\n","title":"Maven Projects Made With Java FX Unable To Locate The Main Class","body":"<p>I achieve running the jar with shade plugin.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.5.1&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;transformers&gt;\n            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                &lt;mainClass&gt;com.mascix.swaggerific.SwaggerApplication&lt;/mainClass&gt;\n            &lt;/transformer&gt;\n        &lt;/transformers&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>After this plugin, run <strong>mvn package</strong> which will generate the full jar with everything. But this will not be enough for javafx because it requires javafx sdk. so when I run the command(<strong>java -jar target/swaggerific-1.0-SNAPSHOT.jar</strong>) I got</p>\n<blockquote>\n<p>Error: JavaFX runtime components are missing, and are required to run this application</p>\n</blockquote>\n<p>I have sdkman installed gluon java version.</p>\n<blockquote>\n<p>java --module-path $PATH_TO_FX --add-modules &quot;javafx.controls,javafx.graphics,javafx.fxml&quot; -jar target/swaggerific-1.0-SNAPSHOT.jar</p>\n</blockquote>\n<p>and the env variable is</p>\n<pre class=\"lang-bash prettyprint-override\"><code>echo $PATH_TO_FX\n/home/oz-mint/tools/javafx-sdk-21.0.1/lib\n</code></pre>\n<p>I highly suggest compile with gluon graalvm and run native binary. That will be easier to use. You can find example code and project <a href=\"https://github.com/ozkanpakdil/swaggerific/blob/main/pom.xml#L272\" rel=\"nofollow noreferrer\">here</a> used for this answer.</p>\n<p><a href=\"https://github.com/ozkanpakdil/swaggerific/assets/604405/786f315c-8c68-40a6-8ba2-5dd12fb9c7ed\" rel=\"nofollow noreferrer\">bash jar run example video</a></p>\n"}],"owner":{"account_id":30092221,"reputation":1,"user_id":23061425,"display_name":"Thinking Spaghetti29"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1702068868,"answer_count":1,"score":0,"last_activity_date":1702057068,"creation_date":1701973800,"question_id":77622343,"body_markdown":"```\r\nError: Could not find or load main class com.mycompany.mavenproject1.App\r\nCaused by: java.lang.NoClassDefFoundError: javafx/application/Application\r\n```\r\n\r\nI am trying to compile a maven project made with javafx to a jar file. When I try to run the built jar file, it displays the above error. I have already added the maven plugin \r\n\r\n\r\n```xml\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;com.packages.to.MainClass&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\nI am using NetBeans IDE. The project precisely is an FXML JavaFX maven archetype Gluon project with maven. I suppose it doesn&#39;t use the JavaFX that one has manually added since it doesn&#39;t allow addition of libraries. It most probably has to do with javafx. \r\n\r\n\r\nI&#39;ve tried adding the path to javafx.fxml and javafx controls to the vm options/ arguments but in vain. The issue persisted. I&#39;ve tried building jars from maven projects that don&#39;t use javafx and they function perfectly (by just adding that plugin). ","title":"Maven Projects Made With Java FX Unable To Locate The Main Class","body":"<pre><code>Error: Could not find or load main class com.mycompany.mavenproject1.App\nCaused by: java.lang.NoClassDefFoundError: javafx/application/Application\n</code></pre>\n<p>I am trying to compile a maven project made with javafx to a jar file. When I try to run the built jar file, it displays the above error. I have already added the maven plugin</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.packages.to.MainClass&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I am using NetBeans IDE. The project precisely is an FXML JavaFX maven archetype Gluon project with maven. I suppose it doesn't use the JavaFX that one has manually added since it doesn't allow addition of libraries. It most probably has to do with javafx.</p>\n<p>I've tried adding the path to javafx.fxml and javafx controls to the vm options/ arguments but in vain. The issue persisted. I've tried building jars from maven projects that don't use javafx and they function perfectly (by just adding that plugin).</p>\n"},{"tags":["java","excel","apache-poi","pivot-table","pivot-chart"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1702105458,"post_id":77628300,"comment_id":136858862,"body_markdown":"Run your code. Unzip the `BarChart.xlsx`. Have a look into `/xl/charts/chart1.xml`. Store the XML somewhere to have it later for comparison. Open `BarChart.xlsx` in Excel GUI and apply the chart design. Save `BarChart.xlsx`. Unzip the `BarChart.xlsx`. Have a look into `/xl/charts/chart1.xml` and compare with the previous stored XML. What has been changed? Was it only one single setting? What is your conclusion?","body":"Run your code. Unzip the <code>BarChart.xlsx</code>. Have a look into <code>&#47;xl&#47;charts&#47;chart1.xml</code>. Store the XML somewhere to have it later for comparison. Open <code>BarChart.xlsx</code> in Excel GUI and apply the chart design. Save <code>BarChart.xlsx</code>. Unzip the <code>BarChart.xlsx</code>. Have a look into <code>&#47;xl&#47;charts&#47;chart1.xml</code> and compare with the previous stored XML. What has been changed? Was it only one single setting? What is your conclusion?"}],"owner":{"account_id":11616907,"reputation":29,"user_id":8509309,"display_name":"pranavs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702057060,"creation_date":1702057060,"question_id":77628300,"body_markdown":"I am looking for a way to use apache poi to add existing default styles to a bar chart in Excel.\r\nI have code to generate bar chart but could not find anything to set existing styles which are available in Chart Design --&gt; Styles\r\n\r\nBelow is the current bar chart \r\n[![enter image description here][1]][1]\r\n\r\nExpected outcome \r\n[![enter image description here][2]][2]\r\n\r\nBelow is the sample code I am running.\r\n\r\n```\r\nimport java.awt.Desktop;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\n\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.ClientAnchor;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.Sheet;\r\nimport org.apache.poi.ss.usermodel.Workbook;\r\nimport org.apache.poi.xssf.usermodel.XSSFChart;\r\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\nimport org.openxmlformats.schemas.drawingml.x2006.chart.*;\r\n\r\npublic class BarChart {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Workbook wb = new XSSFWorkbook();\r\n        Sheet sheet = wb.createSheet(&quot;Sheet1&quot;);\r\n\r\n        Row row;\r\n        Cell cell;\r\n\r\n        row = sheet.createRow(0);\r\n        row.createCell(0);\r\n        row.createCell(1).setCellValue(&quot;HEADER 1&quot;);\r\n        row.createCell(2).setCellValue(&quot;HEADER 2&quot;);\r\n        row.createCell(3).setCellValue(&quot;HEADER 3&quot;);\r\n\r\n        for (int r = 1; r &lt; 5; r++) {\r\n            row = sheet.createRow(r);\r\n            cell = row.createCell(0);\r\n            cell.setCellValue(&quot;Serie &quot; + r);\r\n            cell = row.createCell(1);\r\n            cell.setCellValue(new java.util.Random().nextDouble());\r\n            cell = row.createCell(2);\r\n            cell.setCellValue(new java.util.Random().nextDouble());\r\n            cell = row.createCell(3);\r\n            cell.setCellValue(new java.util.Random().nextDouble());\r\n        }\r\n\r\n        XSSFDrawing drawing = (XSSFDrawing)sheet.createDrawingPatriarch();\r\n        ClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 5, 8, 20);\r\n\r\n        XSSFChart chart = drawing.createChart(anchor);\r\n\r\n        CTChart ctChart = ((XSSFChart)chart).getCTChart();\r\n        CTPlotArea ctPlotArea = ctChart.getPlotArea();\r\n        CTBarChart ctBarChart = ctPlotArea.addNewBarChart();\r\n        CTBoolean ctBoolean = ctBarChart.addNewVaryColors();\r\n        ctBoolean.setVal(true);\r\n        ctBarChart.addNewBarDir().setVal(STBarDir.BAR);\r\n\r\n        for (int r = 2; r &lt; 6; r++) {\r\n           CTBarSer ctBarSer = ctBarChart.addNewSer();\r\n           CTSerTx ctSerTx = ctBarSer.addNewTx();\r\n           CTStrRef ctStrRef = ctSerTx.addNewStrRef();\r\n           ctStrRef.setF(&quot;Sheet1!$A$&quot; + r);\r\n           ctBarSer.addNewIdx().setVal(r-2);  \r\n           CTAxDataSource cttAxDataSource = ctBarSer.addNewCat();\r\n           ctStrRef = cttAxDataSource.addNewStrRef();\r\n           ctStrRef.setF(&quot;Sheet1!$B$1:$D$1&quot;); \r\n           CTNumDataSource ctNumDataSource = ctBarSer.addNewVal();\r\n           CTNumRef ctNumRef = ctNumDataSource.addNewNumRef();\r\n           ctNumRef.setF(&quot;Sheet1!$B$&quot; + r + &quot;:$D$&quot; + r);\r\n\r\n           //at least the border lines in Libreoffice Calc ;-)\r\n           ctBarSer.addNewSpPr().addNewLn().addNewSolidFill().addNewSrgbClr().setVal(new byte[] {0,0,0});   \r\n\r\n        } \r\n\r\n        //telling the BarChart that it has axes and giving them Ids\r\n        ctBarChart.addNewAxId().setVal(123456);\r\n        ctBarChart.addNewAxId().setVal(123457);\r\n\r\n        //cat axis\r\n        CTCatAx ctCatAx = ctPlotArea.addNewCatAx(); \r\n        ctCatAx.addNewAxId().setVal(123456); //id of the cat axis\r\n        CTScaling ctScaling = ctCatAx.addNewScaling();\r\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\r\n        ctCatAx.addNewDelete().setVal(false);\r\n        ctCatAx.addNewAxPos().setVal(STAxPos.B);\r\n        ctCatAx.addNewCrossAx().setVal(123457); //id of the val axis\r\n        ctCatAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\r\n\r\n        //val axis\r\n        CTValAx ctValAx = ctPlotArea.addNewValAx(); \r\n        ctValAx.addNewAxId().setVal(123457); //id of the val axis\r\n        ctScaling = ctValAx.addNewScaling();\r\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\r\n        ctValAx.addNewDelete().setVal(false);\r\n        ctValAx.addNewAxPos().setVal(STAxPos.L);\r\n        ctValAx.addNewCrossAx().setVal(123456); //id of the cat axis\r\n        ctValAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\r\n\r\n        //legend\r\n        CTLegend ctLegend = ctChart.addNewLegend();\r\n        ctLegend.addNewLegendPos().setVal(STLegendPos.B);\r\n        ctLegend.addNewOverlay().setVal(false);\r\n\r\nSystem.out.println(ctChart);\r\n\r\n        FileOutputStream fileOut = new FileOutputStream(&quot;BarChart.xlsx&quot;);\r\n        wb.write(fileOut);\r\n        fileOut.close();\r\n        Desktop.getDesktop().open(new File(&quot;BarChart.xlsx&quot;));\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DpE8t.png\r\n  [2]: https://i.stack.imgur.com/xluoi.png","title":"How to set existing bar chart styles to pivot chart in java","body":"<p>I am looking for a way to use apache poi to add existing default styles to a bar chart in Excel.\nI have code to generate bar chart but could not find anything to set existing styles which are available in Chart Design --&gt; Styles</p>\n<p>Below is the current bar chart\n<a href=\"https://i.stack.imgur.com/DpE8t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DpE8t.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected outcome\n<a href=\"https://i.stack.imgur.com/xluoi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xluoi.png\" alt=\"enter image description here\" /></a></p>\n<p>Below is the sample code I am running.</p>\n<pre><code>import java.awt.Desktop;\nimport java.io.File;\nimport java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.ClientAnchor;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFChart;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.openxmlformats.schemas.drawingml.x2006.chart.*;\n\npublic class BarChart {\n\n    public static void main(String[] args) throws Exception {\n        Workbook wb = new XSSFWorkbook();\n        Sheet sheet = wb.createSheet(&quot;Sheet1&quot;);\n\n        Row row;\n        Cell cell;\n\n        row = sheet.createRow(0);\n        row.createCell(0);\n        row.createCell(1).setCellValue(&quot;HEADER 1&quot;);\n        row.createCell(2).setCellValue(&quot;HEADER 2&quot;);\n        row.createCell(3).setCellValue(&quot;HEADER 3&quot;);\n\n        for (int r = 1; r &lt; 5; r++) {\n            row = sheet.createRow(r);\n            cell = row.createCell(0);\n            cell.setCellValue(&quot;Serie &quot; + r);\n            cell = row.createCell(1);\n            cell.setCellValue(new java.util.Random().nextDouble());\n            cell = row.createCell(2);\n            cell.setCellValue(new java.util.Random().nextDouble());\n            cell = row.createCell(3);\n            cell.setCellValue(new java.util.Random().nextDouble());\n        }\n\n        XSSFDrawing drawing = (XSSFDrawing)sheet.createDrawingPatriarch();\n        ClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 5, 8, 20);\n\n        XSSFChart chart = drawing.createChart(anchor);\n\n        CTChart ctChart = ((XSSFChart)chart).getCTChart();\n        CTPlotArea ctPlotArea = ctChart.getPlotArea();\n        CTBarChart ctBarChart = ctPlotArea.addNewBarChart();\n        CTBoolean ctBoolean = ctBarChart.addNewVaryColors();\n        ctBoolean.setVal(true);\n        ctBarChart.addNewBarDir().setVal(STBarDir.BAR);\n\n        for (int r = 2; r &lt; 6; r++) {\n           CTBarSer ctBarSer = ctBarChart.addNewSer();\n           CTSerTx ctSerTx = ctBarSer.addNewTx();\n           CTStrRef ctStrRef = ctSerTx.addNewStrRef();\n           ctStrRef.setF(&quot;Sheet1!$A$&quot; + r);\n           ctBarSer.addNewIdx().setVal(r-2);  \n           CTAxDataSource cttAxDataSource = ctBarSer.addNewCat();\n           ctStrRef = cttAxDataSource.addNewStrRef();\n           ctStrRef.setF(&quot;Sheet1!$B$1:$D$1&quot;); \n           CTNumDataSource ctNumDataSource = ctBarSer.addNewVal();\n           CTNumRef ctNumRef = ctNumDataSource.addNewNumRef();\n           ctNumRef.setF(&quot;Sheet1!$B$&quot; + r + &quot;:$D$&quot; + r);\n\n           //at least the border lines in Libreoffice Calc ;-)\n           ctBarSer.addNewSpPr().addNewLn().addNewSolidFill().addNewSrgbClr().setVal(new byte[] {0,0,0});   \n\n        } \n\n        //telling the BarChart that it has axes and giving them Ids\n        ctBarChart.addNewAxId().setVal(123456);\n        ctBarChart.addNewAxId().setVal(123457);\n\n        //cat axis\n        CTCatAx ctCatAx = ctPlotArea.addNewCatAx(); \n        ctCatAx.addNewAxId().setVal(123456); //id of the cat axis\n        CTScaling ctScaling = ctCatAx.addNewScaling();\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\n        ctCatAx.addNewDelete().setVal(false);\n        ctCatAx.addNewAxPos().setVal(STAxPos.B);\n        ctCatAx.addNewCrossAx().setVal(123457); //id of the val axis\n        ctCatAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\n\n        //val axis\n        CTValAx ctValAx = ctPlotArea.addNewValAx(); \n        ctValAx.addNewAxId().setVal(123457); //id of the val axis\n        ctScaling = ctValAx.addNewScaling();\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\n        ctValAx.addNewDelete().setVal(false);\n        ctValAx.addNewAxPos().setVal(STAxPos.L);\n        ctValAx.addNewCrossAx().setVal(123456); //id of the cat axis\n        ctValAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\n\n        //legend\n        CTLegend ctLegend = ctChart.addNewLegend();\n        ctLegend.addNewLegendPos().setVal(STLegendPos.B);\n        ctLegend.addNewOverlay().setVal(false);\n\nSystem.out.println(ctChart);\n\n        FileOutputStream fileOut = new FileOutputStream(&quot;BarChart.xlsx&quot;);\n        wb.write(fileOut);\n        fileOut.close();\n        Desktop.getDesktop().open(new File(&quot;BarChart.xlsx&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1490666569,"post_id":43059279,"comment_id":73203179,"body_markdown":"I&#39;m not familiar with StringUtils.truncate, but in principle, what you&#39;re doing looks fine to me.  Don&#39;t forget to deal with the cases where (1) the original String is shorter than 15 characters, and (2) the first 15 characters are all non-space.","body":"I&#39;m not familiar with StringUtils.truncate, but in principle, what you&#39;re doing looks fine to me.  Don&#39;t forget to deal with the cases where (1) the original String is shorter than 15 characters, and (2) the first 15 characters are all non-space."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":4,"creation_date":1490668358,"post_id":43059279,"comment_id":73203665,"body_markdown":"I could be missing something, but I see no point in using a third party library for this when we have `str.substring(0, firstIndexOfSpaceBeforeGIvenIndex)`. Or maybe your `StringUtils` take some of the conditions mentioned by @DavidWallace into account??","body":"I could be missing something, but I see no point in using a third party library for this when we have <code>str.substring(0, firstIndexOfSpaceBeforeGIvenIndex)</code>. Or maybe your <code>StringUtils</code> take some of the conditions mentioned by @DavidWallace into account??"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":1,"creation_date":1490680193,"post_id":43059279,"comment_id":73207180,"body_markdown":"Performance is your concern but did make experiment? Are you sure that is not good for thousands? Is it thousands or millions? billions? I doubt any more effort will be necessary for thousands of strings. Never make premature optimization.","body":"Performance is your concern but did make experiment? Are you sure that is not good for thousands? Is it thousands or millions? billions? I doubt any more effort will be necessary for thousands of strings. Never make premature optimization."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1490691265,"post_id":43059279,"comment_id":73213621,"body_markdown":"@Ole V.V.: no it doesn’t. The possibility that the string is shorter than `15` can’t be handled by `StringUtils.truncate`, as that method doesn’t see that number and it will handle `-1` the same way, `String.substring` does (by thowing an exception).","body":"@Ole V.V.: no it doesn’t. The possibility that the string is shorter than <code>15</code> can’t be handled by <code>StringUtils.truncate</code>, as that method doesn’t see that number and it will handle <code>-1</code> the same way, <code>String.substring</code> does (by thowing an exception)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1490692036,"post_id":43059279,"comment_id":73214138,"body_markdown":"You may use `str.lastIndexOf(&#39; &#39;, 15)` (with a char argument rather than a `String`).","body":"You may use <code>str.lastIndexOf(&#39; &#39;, 15)</code> (with a char argument rather than a <code>String</code>)."},{"owner":{"account_id":1804273,"reputation":309,"user_id":1641760,"accept_rate":0,"display_name":"Pavan_k_k"},"score":0,"creation_date":1490815970,"post_id":43059279,"comment_id":73286838,"body_markdown":"Comment by @OleV.V. did the job. Thank you all!","body":"Comment by @OleV.V. did the job. Thank you all!"}],"answers":[{"comments":[{"owner":{"account_id":134685,"reputation":14507,"user_id":510036,"accept_rate":96,"display_name":"Qix - MONICA WAS MISTREATED"},"score":1,"creation_date":1490676025,"post_id":43059536,"comment_id":73205697,"body_markdown":"Not what I meant. I mean when you post code, you should explain exactly how your code achieves what the OP is looking for.","body":"Not what I meant. I mean when you post code, you should explain exactly how your code achieves what the OP is looking for."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1490692452,"post_id":43059536,"comment_id":73214411,"body_markdown":"It’s more lines of code than in the question and in the other answer (not counting the test), and I don’t think it’s clearer. Are there any advantages?","body":"It’s more lines of code than in the question and in the other answer (not counting the test), and I don’t think it’s clearer. Are there any advantages?"},{"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1490692904,"post_id":43059536,"comment_id":73214721,"body_markdown":"@OleV.V. if I refactoring the code like this? and you see again is that clearly?","body":"@OleV.V. if I refactoring the code like this? and you see again is that clearly?"},{"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1490693059,"post_id":43059536,"comment_id":73214839,"body_markdown":"@OleV.V. OP who emphasize the performance,so I&#39;m not doing refactoring steps.","body":"@OleV.V. OP who emphasize the performance,so I&#39;m not doing refactoring steps."}],"tags":[],"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490716576,"creation_date":1490667434,"answer_id":43059536,"question_id":43059279,"body_markdown":"## Usage\r\n    \r\n    truncate(&quot;SO is great website&quot;,15); //&quot;SO is great&quot;\r\n    truncate(&quot;SO is great website&quot;,11); //&quot;SO is great&quot;\r\n    truncate(&quot;SO is great website&quot;,1); //&quot;&quot;\r\n   \r\n\r\n## Code \r\n\r\n    private String truncate(String s, int limit) {\r\n        int n = s.length();\r\n        int last = Math.min(n, limit);\r\n     \r\n        if (last &lt; n) {\r\n            //scroll to start index of the last word\r\n            while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\r\n        }\r\n        \r\n        //strip last whitespaces\r\n        while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\r\n\r\n        return last == 0 ? &quot;&quot; : s.substring(0, last + 1);\r\n    }\r\n\r\n## Test\r\n\r\n    public class StringTruncateTest {\r\n        @Test\r\n        void empty() throws Throwable {\r\n            assertThat(truncate(&quot;&quot;, 0), equalTo(&quot;&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitGreaterThanLength() {\r\n            assertThat(truncate(&quot;&quot;, 1), equalTo(&quot;&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void dropsLastWhitespaces() throws Throwable {\r\n            assertThat(truncate(&quot;foo &quot;, 4), equalTo(&quot;foo&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void donotLimitToWordLastPos() throws Throwable {\r\n            assertThat(truncate(&quot;foo&quot;, 1), equalTo(&quot;&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void donotLimitToWordLastPosButHavingAnyWordsBefore() throws Throwable {\r\n            assertThat(truncate(&quot;java website&quot;, &quot;java web&quot;), equalTo(&quot;java&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitToLastThatNotContainingAnyWhitespaces() throws Throwable {\r\n            assertThat(truncate(&quot;foo&quot;, 3), equalTo(&quot;foo&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitToLastThatContainingAnyWhitespaces() {\r\n            assertThat(truncate(&quot;java website tutorial&quot;, &quot;java website&quot;), equalTo(&quot;java website&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitToEnd() throws Throwable {\r\n            assertThat(truncate(&quot;java website&quot;, &quot;java website&quot;), equalTo(&quot;java website&quot;));\r\n        }\r\n    \r\n        private String truncate(String input, String sub) {\r\n            return truncate(input, sub.length());\r\n        }\r\n    \r\n        private String truncate(String s, int limit) {\r\n            int n = s.length();\r\n            int last = Math.min(n, limit);\r\n    \r\n            //scroll to start index of the last word\r\n            if (last &lt; n) while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\r\n    \r\n            //strip last whitespaces\r\n            while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\r\n    \r\n            return last == 0 ? &quot;&quot; : s.substring(0, last + 1);\r\n        }    \r\n    \r\n    }\r\n","title":"What is most optimal way to truncate a string to limit its length?","body":"<h2>Usage</h2>\n\n<pre><code>truncate(\"SO is great website\",15); //\"SO is great\"\ntruncate(\"SO is great website\",11); //\"SO is great\"\ntruncate(\"SO is great website\",1); //\"\"\n</code></pre>\n\n<h2>Code</h2>\n\n<pre><code>private String truncate(String s, int limit) {\n    int n = s.length();\n    int last = Math.min(n, limit);\n\n    if (last &lt; n) {\n        //scroll to start index of the last word\n        while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\n    }\n\n    //strip last whitespaces\n    while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\n\n    return last == 0 ? \"\" : s.substring(0, last + 1);\n}\n</code></pre>\n\n<h2>Test</h2>\n\n<pre><code>public class StringTruncateTest {\n    @Test\n    void empty() throws Throwable {\n        assertThat(truncate(\"\", 0), equalTo(\"\"));\n    }\n\n    @Test\n    void limitGreaterThanLength() {\n        assertThat(truncate(\"\", 1), equalTo(\"\"));\n    }\n\n    @Test\n    void dropsLastWhitespaces() throws Throwable {\n        assertThat(truncate(\"foo \", 4), equalTo(\"foo\"));\n    }\n\n    @Test\n    void donotLimitToWordLastPos() throws Throwable {\n        assertThat(truncate(\"foo\", 1), equalTo(\"\"));\n    }\n\n    @Test\n    void donotLimitToWordLastPosButHavingAnyWordsBefore() throws Throwable {\n        assertThat(truncate(\"java website\", \"java web\"), equalTo(\"java\"));\n    }\n\n    @Test\n    void limitToLastThatNotContainingAnyWhitespaces() throws Throwable {\n        assertThat(truncate(\"foo\", 3), equalTo(\"foo\"));\n    }\n\n    @Test\n    void limitToLastThatContainingAnyWhitespaces() {\n        assertThat(truncate(\"java website tutorial\", \"java website\"), equalTo(\"java website\"));\n    }\n\n    @Test\n    void limitToEnd() throws Throwable {\n        assertThat(truncate(\"java website\", \"java website\"), equalTo(\"java website\"));\n    }\n\n    private String truncate(String input, String sub) {\n        return truncate(input, sub.length());\n    }\n\n    private String truncate(String s, int limit) {\n        int n = s.length();\n        int last = Math.min(n, limit);\n\n        //scroll to start index of the last word\n        if (last &lt; n) while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\n\n        //strip last whitespaces\n        while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\n\n        return last == 0 ? \"\" : s.substring(0, last + 1);\n    }    \n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":545654,"reputation":7998,"user_id":1360984,"accept_rate":60,"display_name":"Harmlezz"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1490691604,"creation_date":1490679627,"answer_id":43061407,"question_id":43059279,"body_markdown":"Here a utility method which addresses your requirements and takes the comments of @David Wallace and @Ole V.V. into account as well:\r\n\r\n    public static String truncate(String str, int length, String delim) {\r\n        int len = Math.max(0, length);\r\n        if (str.length() &lt;= len) return str;\r\n        else {\r\n            int idx = str.lastIndexOf(delim, len);\r\n            return str.substring(0, idx != -1 ? idx : len);\r\n        }\r\n    }\r\n\r\n- it should be efficient because it performs the least expansive operations first.\r\n- it addresses the case when `delim` is not found in the first `length` characters.\r\n- it is flexible according the *length* and *delimiter*.","title":"What is most optimal way to truncate a string to limit its length?","body":"<p>Here a utility method which addresses your requirements and takes the comments of @David Wallace and @Ole V.V. into account as well:</p>\n\n<pre><code>public static String truncate(String str, int length, String delim) {\n    int len = Math.max(0, length);\n    if (str.length() &lt;= len) return str;\n    else {\n        int idx = str.lastIndexOf(delim, len);\n        return str.substring(0, idx != -1 ? idx : len);\n    }\n}\n</code></pre>\n\n<ul>\n<li>it should be efficient because it performs the least expansive operations first.</li>\n<li>it addresses the case when <code>delim</code> is not found in the first <code>length</code> characters.</li>\n<li>it is flexible according the <em>length</em> and <em>delimiter</em>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1917319,"reputation":428,"user_id":1729649,"display_name":"Sukh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702056872,"creation_date":1702056872,"answer_id":77628282,"question_id":43059279,"body_markdown":"The best and easiest way is to use org.apache.commons.lang3.StringUtils.truncate() method. \r\n\r\nIt also gives you good performance.","title":"What is most optimal way to truncate a string to limit its length?","body":"<p>The best and easiest way is to use org.apache.commons.lang3.StringUtils.truncate() method.</p>\n<p>It also gives you good performance.</p>\n"}],"owner":{"account_id":1804273,"reputation":309,"user_id":1641760,"accept_rate":0,"display_name":"Pavan_k_k"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5052,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1702056872,"creation_date":1490665656,"question_id":43059279,"body_markdown":"I am writing a function to limit the length of a sentence. Say limit is 15, and the sentence is &quot;SO is great website&quot;. I don&#39;t want to truncate it exactly at the 15th position, otherwise the truncated sentence would become &quot;SO is great web&quot;. But, what I want to do is to truncate from the first space before the limit. It would give me &quot;SO is great&quot;. \n\nOne way of doing it is \n\n&gt; int firstIndexOfSpaceBeforeGIvenIndex= str.lastIndexOf(&quot; &quot;, 15);\n&gt;\n&gt; str = StringUtils.truncate(str, 0, firstIndexOfSpaceBeforeGIvenIndex);\n\nThe string could be very long and I have to perform this operation on thousands of strings. So performance is my concern. What is the most optimal way to achieve this task?\n","title":"What is most optimal way to truncate a string to limit its length?","body":"<p>I am writing a function to limit the length of a sentence. Say limit is 15, and the sentence is &quot;SO is great website&quot;. I don't want to truncate it exactly at the 15th position, otherwise the truncated sentence would become &quot;SO is great web&quot;. But, what I want to do is to truncate from the first space before the limit. It would give me &quot;SO is great&quot;.</p>\n<p>One way of doing it is</p>\n<blockquote>\n<p>int firstIndexOfSpaceBeforeGIvenIndex= str.lastIndexOf(&quot; &quot;, 15);</p>\n<p>str = StringUtils.truncate(str, 0, firstIndexOfSpaceBeforeGIvenIndex);</p>\n</blockquote>\n<p>The string could be very long and I have to perform this operation on thousands of strings. So performance is my concern. What is the most optimal way to achieve this task?</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":9460871,"reputation":2153,"user_id":7034621,"display_name":"orhtej2"},"score":2,"creation_date":1702054367,"post_id":77628051,"comment_id":136854429,"body_markdown":"What problem are you facing? How does output of your code differ from expected? Have you read [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems)","body":"What problem are you facing? How does output of your code differ from expected? Have you read <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1702055102,"post_id":77628051,"comment_id":136854523,"body_markdown":"There’s rarely a need to deal with `Iterator` manually. Since Java&#160;5, you can write `for(Map.Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry: myListMap.entrySet()) { … }` Since Java&#160;10, you can simplify it further to `for(var entry: myListMap.entrySet()) { … }`. There’s also no need to repeat type parameters when creating an object (since Java&#160;7): `Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();` You may also rethink your strategy of reading four unused properties into local variables, followed by calling other `get…` methods repeatedly in the subsequent code.","body":"There’s rarely a need to deal with <code>Iterator</code> manually. Since Java 5, you can write <code>for(Map.Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry: myListMap.entrySet()) { … }</code> Since Java 10, you can simplify it further to <code>for(var entry: myListMap.entrySet()) { … }</code>. There’s also no need to repeat type parameters when creating an object (since Java 7): <code>Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();</code> You may also rethink your strategy of reading four unused properties into local variables, followed by calling other <code>get…</code> methods repeatedly in the subsequent code."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1702055453,"post_id":77628051,"comment_id":136854573,"body_markdown":"Please provide your Trade class, properly formatted.","body":"Please provide your Trade class, properly formatted."},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":0,"creation_date":1702062389,"post_id":77628051,"comment_id":136855542,"body_markdown":"Following up Holger&#39;s comment on better practices — The fact that you&#39;re using an `ArrayList` is not important, what _is_ important is that it&#39;s a `List` - so similar to &quot;Map... = new HashMap...&quot; you can change `Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();` to `Map&lt;String, List&lt;Trade&gt;&gt; myList = new HashMap&lt;&gt;()&#39;` ... Similarly in your for-loop you can use `List&lt;Trade&gt; myObjectList = myListMap.get(...)`","body":"Following up Holger&#39;s comment on better practices — The fact that you&#39;re using an <code>ArrayList</code> is not important, what <i>is</i> important is that it&#39;s a <code>List</code> - so similar to &quot;Map... = new HashMap...&quot; you can change <code>Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();</code> to <code>Map&lt;String, List&lt;Trade&gt;&gt; myList = new HashMap&lt;&gt;()&#39;</code> ... Similarly in your for-loop you can use <code>List&lt;Trade&gt; myObjectList = myListMap.get(...)</code>"}],"owner":{"account_id":30099828,"reputation":1,"user_id":23067250,"display_name":"Rachel Fisher"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702067777,"answer_count":0,"score":-1,"last_activity_date":1702056686,"creation_date":1702053929,"question_id":77628051,"body_markdown":"This is a bit of a mess. I have an arrayList of object (Trades) I am trying to add the trades to a map grouped by their BbgCode&#39;s. I then want to iterate over every trade with the same bbg code to calculate total pnl for each bbgCode. (Profit and loss) The calculation should do the following. Sorry if this looks awful I am still a junior :)\r\n\r\nExample: Consider this sample data and the resultant PnL calculation:\r\n```\r\nBBGCode, time, side, quantity, price\r\nABC1, T0, B, 100, 100\r\nABC2, T1, B, 50, 200\r\nABC2, T2, B, 50, 202\r\nABC2, T3, S, 100, 205\r\nABC1, T3, S, 50, 99\r\n```\r\nOur PnL is:\r\n```\r\nABC1 = 50*99 [Partial Sale] - 100*100 [Purchase] = -50\r\nABC2 = 100*205 [Full Sale] - (50*200 + 50*202) [Purchase] = 400\r\nTOTAL = 400 - 50 = 350 PROFIT\r\n```\r\nThe method\r\n```\r\npublic static void PnLCalc(Trade trade) {\r\n   Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;String, ArrayList&lt;Trade&gt;&gt;();\r\n\r\n   String portfolio = trade.getPortfolio();\r\n   String strategy = trade.getStrategy();\r\n   String user = trade.getUser();\r\n   String ccy = trade.getCurrency();\r\n\r\n   if (!trade.getVolume().equalsIgnoreCase(&quot;Volume&quot;)) {\r\n       double quantity = Double.parseDouble(trade.getVolume());\r\n\r\n       if (!trade.getPrice().equalsIgnoreCase(&quot;Price&quot;)) {\r\n           double price = Double.parseDouble(trade.getPrice());\r\n\r\n           double sellAmount = 0;\r\n           double buyAmount = 0;\r\n           double pnl = 0;\r\n\r\n           for (Trade t : tradeList) {\r\n               ArrayList&lt;Trade&gt; myObjectList = myListMap\r\n                       .get(trade.getbBGCode());\r\n               if (!trade.getbBGCode().equalsIgnoreCase(&quot;BBGCode&quot;)) {\r\n                   if (myObjectList == null) {\r\n                       myObjectList = new ArrayList&lt;Trade&gt;();\r\n                       myListMap.put(trade.getbBGCode(), myObjectList);\r\n\r\n                   }\r\n                   myObjectList.add(trade);\r\n\r\n                   // System.out.print(myListMap);\r\n               }\r\n           }\r\n\r\n           Iterator&lt;Entry&lt;String, ArrayList&lt;Trade&gt;&gt;&gt; itr = myListMap\r\n                   .entrySet().iterator();\r\n\r\n           while (itr.hasNext()) {\r\n\r\n               Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry = itr.next();\r\n               if (trade.getSide().equalsIgnoreCase(&quot;B&quot;)) {\r\n                   buyAmount = quantity * price;\r\n               }\r\n               if (trade.getSide().equalsIgnoreCase(&quot;S&quot;)) {\r\n                   sellAmount = quantity * price;\r\n               }\r\n               System.out.println(&quot;Key = &quot; + entry.getKey() + &quot;, Value = &quot;\r\n                       + entry.getValue());\r\n           }\r\n       }\r\n   }\r\n}","title":"How can I iterate over each object in my Map and calculate a result","body":"<p>This is a bit of a mess. I have an arrayList of object (Trades) I am trying to add the trades to a map grouped by their BbgCode's. I then want to iterate over every trade with the same bbg code to calculate total pnl for each bbgCode. (Profit and loss) The calculation should do the following. Sorry if this looks awful I am still a junior :)</p>\n<p>Example: Consider this sample data and the resultant PnL calculation:</p>\n<pre><code>BBGCode, time, side, quantity, price\nABC1, T0, B, 100, 100\nABC2, T1, B, 50, 200\nABC2, T2, B, 50, 202\nABC2, T3, S, 100, 205\nABC1, T3, S, 50, 99\n</code></pre>\n<p>Our PnL is:</p>\n<pre><code>ABC1 = 50*99 [Partial Sale] - 100*100 [Purchase] = -50\nABC2 = 100*205 [Full Sale] - (50*200 + 50*202) [Purchase] = 400\nTOTAL = 400 - 50 = 350 PROFIT\n</code></pre>\n<p>The method</p>\n<pre><code>public static void PnLCalc(Trade trade) {\n   Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;String, ArrayList&lt;Trade&gt;&gt;();\n\n   String portfolio = trade.getPortfolio();\n   String strategy = trade.getStrategy();\n   String user = trade.getUser();\n   String ccy = trade.getCurrency();\n\n   if (!trade.getVolume().equalsIgnoreCase(&quot;Volume&quot;)) {\n       double quantity = Double.parseDouble(trade.getVolume());\n\n       if (!trade.getPrice().equalsIgnoreCase(&quot;Price&quot;)) {\n           double price = Double.parseDouble(trade.getPrice());\n\n           double sellAmount = 0;\n           double buyAmount = 0;\n           double pnl = 0;\n\n           for (Trade t : tradeList) {\n               ArrayList&lt;Trade&gt; myObjectList = myListMap\n                       .get(trade.getbBGCode());\n               if (!trade.getbBGCode().equalsIgnoreCase(&quot;BBGCode&quot;)) {\n                   if (myObjectList == null) {\n                       myObjectList = new ArrayList&lt;Trade&gt;();\n                       myListMap.put(trade.getbBGCode(), myObjectList);\n\n                   }\n                   myObjectList.add(trade);\n\n                   // System.out.print(myListMap);\n               }\n           }\n\n           Iterator&lt;Entry&lt;String, ArrayList&lt;Trade&gt;&gt;&gt; itr = myListMap\n                   .entrySet().iterator();\n\n           while (itr.hasNext()) {\n\n               Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry = itr.next();\n               if (trade.getSide().equalsIgnoreCase(&quot;B&quot;)) {\n                   buyAmount = quantity * price;\n               }\n               if (trade.getSide().equalsIgnoreCase(&quot;S&quot;)) {\n                   sellAmount = quantity * price;\n               }\n               System.out.println(&quot;Key = &quot; + entry.getKey() + &quot;, Value = &quot;\n                       + entry.getValue());\n           }\n       }\n   }\n}\n</code></pre>\n"},{"tags":["java","amazon-dynamodb","dynamodb-enhanced-client"],"owner":{"account_id":15906777,"reputation":107,"user_id":11477760,"display_name":"Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702056147,"creation_date":1702056147,"question_id":77628221,"body_markdown":"I have a DynamoDbBean with a nested DynamoDbBean\r\n```\r\n@DynamoDbBean\r\npublic class OuterBean {\r\n    private String Id;\r\n    private InnerBean innerBean;\r\n\r\n    public OuterBean() {\r\n        \r\n    }\r\n\r\n    @DynamoDbPartitionKey\r\n    @DynamoDbAttribute(value = &quot;Id&quot;)\r\n    public String getId() {\r\n        return Id;\r\n    }\r\n\r\n    public void setId(String Id) {\r\n        this.Id = Id;\r\n    }\r\n\r\n    @DynamoDbIgnoreNulls\r\n    @DynamoDbAttribute(value = &quot;innerBean&quot;)\r\n    public InnerBean getInnerBean() {\r\n        return innerBean;\r\n    }\r\n\r\n    public void setInnerBean(@Nullable InnerBean innerBean) {\r\n        this.innerBean = innerBean;\r\n    }\r\n}\r\n\r\n@DynamoDbBean\r\npublic class InnerBean {\r\n    private Integer field1;\r\n    private Integer field2;\r\n\r\n    public Integer getField1() {\r\n        return field1;\r\n    }\r\n\r\n    public void setField1(Integer field1) {\r\n        this.field1 = field1;\r\n    }\r\n\r\n    public Integer getField2() {\r\n        return field2;\r\n    }\r\n\r\n    public void setField2(Integer field2) {\r\n        this.field2 = field2;\r\n    }\r\n}\r\n\r\n```\r\n\r\nI would like to update `field1` in a record&#39;s `InnerBean` section only, without modifying any of the other properties in an `OuterBean` record or its `InnerBean` section. I&#39;m unable to do this using an `UpdateItemEnhancedRequest`.\r\n\r\n```\r\n        DynamoDbEnhancedClient client = DynamoDbEnhancedClient.builder()\r\n                .dynamoDbClient(\r\n                        DynamoDbClient.builder()\r\n                                .region(Region.of(&quot;us-east-1&quot;))\r\n                                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                                .build())\r\n                .build();\r\n\r\n        DynamoDbTable&lt;OuterBean&gt; table = client.table(caseTableName, TableSchema.fromBean(OuterBean.class));\r\n\r\n        OuterBean outerBean = new OuterBean();\r\n        outerBean.setId(&quot;1&quot;);\r\n\r\n        InnerBean innerBean = new InnerBean();\r\n        innearBean.setField1(1);\r\n        // Notice field2 is null\r\n\r\n        outerBean.setInnerBean(innerBean);\r\n\r\n        table.updateItem(\r\n                UpdateItemEnhancedRequest\r\n                        .builder(OuterBean.class)\r\n                        .item(outerBean)\r\n                        .ignoreNulls(true)\r\n                        .build()\r\n        );\r\n```\r\n\r\nDespite using `ignoreNulls` and `@DynamoDbIgnoreNulls`, I still see the record&#39;s `field2` property get set to null in the database table instead of being ignored.\r\n\r\nHow can I ignore null values of nested beans?","title":"UpdateItemEnhancedRequest ignoreNulls not Working for Nested Beans","body":"<p>I have a DynamoDbBean with a nested DynamoDbBean</p>\n<pre><code>@DynamoDbBean\npublic class OuterBean {\n    private String Id;\n    private InnerBean innerBean;\n\n    public OuterBean() {\n        \n    }\n\n    @DynamoDbPartitionKey\n    @DynamoDbAttribute(value = &quot;Id&quot;)\n    public String getId() {\n        return Id;\n    }\n\n    public void setId(String Id) {\n        this.Id = Id;\n    }\n\n    @DynamoDbIgnoreNulls\n    @DynamoDbAttribute(value = &quot;innerBean&quot;)\n    public InnerBean getInnerBean() {\n        return innerBean;\n    }\n\n    public void setInnerBean(@Nullable InnerBean innerBean) {\n        this.innerBean = innerBean;\n    }\n}\n\n@DynamoDbBean\npublic class InnerBean {\n    private Integer field1;\n    private Integer field2;\n\n    public Integer getField1() {\n        return field1;\n    }\n\n    public void setField1(Integer field1) {\n        this.field1 = field1;\n    }\n\n    public Integer getField2() {\n        return field2;\n    }\n\n    public void setField2(Integer field2) {\n        this.field2 = field2;\n    }\n}\n\n</code></pre>\n<p>I would like to update <code>field1</code> in a record's <code>InnerBean</code> section only, without modifying any of the other properties in an <code>OuterBean</code> record or its <code>InnerBean</code> section. I'm unable to do this using an <code>UpdateItemEnhancedRequest</code>.</p>\n<pre><code>        DynamoDbEnhancedClient client = DynamoDbEnhancedClient.builder()\n                .dynamoDbClient(\n                        DynamoDbClient.builder()\n                                .region(Region.of(&quot;us-east-1&quot;))\n                                .credentialsProvider(ProfileCredentialsProvider.create())\n                                .build())\n                .build();\n\n        DynamoDbTable&lt;OuterBean&gt; table = client.table(caseTableName, TableSchema.fromBean(OuterBean.class));\n\n        OuterBean outerBean = new OuterBean();\n        outerBean.setId(&quot;1&quot;);\n\n        InnerBean innerBean = new InnerBean();\n        innearBean.setField1(1);\n        // Notice field2 is null\n\n        outerBean.setInnerBean(innerBean);\n\n        table.updateItem(\n                UpdateItemEnhancedRequest\n                        .builder(OuterBean.class)\n                        .item(outerBean)\n                        .ignoreNulls(true)\n                        .build()\n        );\n</code></pre>\n<p>Despite using <code>ignoreNulls</code> and <code>@DynamoDbIgnoreNulls</code>, I still see the record's <code>field2</code> property get set to null in the database table instead of being ignored.</p>\n<p>How can I ignore null values of nested beans?</p>\n"},{"tags":["java","audio"],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702056078,"creation_date":1702056078,"answer_id":77628217,"question_id":77627055,"body_markdown":"This doesn’t really fix the problem, but it should serve as a workaround, at least for .wav files.\r\n\r\nYou can restrict Java Sound to using only Java SE-provided readers, then only if that fails, fall back to using the entire set of available providers, including jaad.\r\n\r\n    static AudioFileFormat getFormat(File file)\r\n    throws IOException,\r\n           UnsupportedAudioFileException {\r\n\r\n        ServiceLoader&lt;AudioFileReader&gt; readers = ServiceLoader.load(\r\n            System.class.getModule().getLayer(), AudioFileReader.class);\r\n\r\n        for (AudioFileReader reader : readers) {\r\n            try {\r\n                return reader.getAudioFileFormat(file);\r\n            } catch (UnsupportedAudioFileException e) {\r\n                // Ignore\r\n            }\r\n        }\r\n\r\n        return AudioSystem.getAudioFileFormat(file);\r\n    }\r\n\r\nServiceLoader is the [java.util.ServiceLoader](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ServiceLoader.html) class.  AudioFileReader is the [javax.sound.sampled.spi.AudioFileReader](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/sound/sampled/spi/AudioFileReader.html) class.\r\n","title":"Conflict between jaad and javax sound","body":"<p>This doesn’t really fix the problem, but it should serve as a workaround, at least for .wav files.</p>\n<p>You can restrict Java Sound to using only Java SE-provided readers, then only if that fails, fall back to using the entire set of available providers, including jaad.</p>\n<pre><code>static AudioFileFormat getFormat(File file)\nthrows IOException,\n       UnsupportedAudioFileException {\n\n    ServiceLoader&lt;AudioFileReader&gt; readers = ServiceLoader.load(\n        System.class.getModule().getLayer(), AudioFileReader.class);\n\n    for (AudioFileReader reader : readers) {\n        try {\n            return reader.getAudioFileFormat(file);\n        } catch (UnsupportedAudioFileException e) {\n            // Ignore\n        }\n    }\n\n    return AudioSystem.getAudioFileFormat(file);\n}\n</code></pre>\n<p>ServiceLoader is the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">java.util.ServiceLoader</a> class.  AudioFileReader is the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/sound/sampled/spi/AudioFileReader.html\" rel=\"nofollow noreferrer\">javax.sound.sampled.spi.AudioFileReader</a> class.</p>\n"}],"owner":{"account_id":2332817,"reputation":866,"user_id":2045777,"accept_rate":17,"display_name":"Jacobs2000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702056078,"creation_date":1702043589,"question_id":77627055,"body_markdown":"I have a small utility class for obtaining the sample rate of a WAV file. The high-level code is below (full example is in the [sample project on GitHub][1] )\r\n\r\n    public static int getSampleRate(String audioFilePath) throws FileNotFoundException {\r\n        File audioFile = new File(audioFilePath);\r\n        \r\n        try {\r\n            AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\r\n            int sampleRate = (int) audioFileFormat.getFormat().getSampleRate();\r\n            return sampleRate;\r\n        } catch (UnsupportedAudioFileException|IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\nThis code works perfectly until I add Jaad dependency in pom.xml:\r\n\r\n     &lt;dependency&gt;\r\n            &lt;groupId&gt;com.tianscar.javasound&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaad&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nThis causes Jaad to interfere somehow and the line - \r\n\r\n    AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\r\n\r\nresults in an exception:\r\njava.lang.NullPointerException: Cannot invoke &quot;net.sourceforge.jaad.aac.SampleRate.getFrequency()&quot; because the return value of &quot;net.sourceforge.jaad.aac.DecoderConfig.getSampleFrequency()&quot; is null\r\n\r\n\tat net.sourceforge.jaad.aac.Decoder.&lt;init&gt;(Decoder.java:77)\r\n\tat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:57)\r\n\tat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:51)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudio(AACAudioFileReader.java:50)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudioFileFormat(AACAudioFileReader.java:42)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:173)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormatAndClose(AACAudioFileReader.java:228)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:242)\r\n\tat java.desktop/javax.sound.sampled.AudioSystem.getAudioFileFormat(AudioSystem.java:976)\r\n...\r\n\r\nI included two tests in the [sample project on GitHub][1] :\r\n\r\n - AacSampleRateExtractorTest - runs successfully and extracts the sample rate from an AAC file using Jaad\r\n - AudioWavSampleTest - fails because of the problem I described above. This test can be made to work by removing the Jaad dependency from pom.xml. \r\n\r\nI have not encountered any known compatibility problem between Jaad and Javax sound. Am I missing something? Is this a known bug of Jaad? \r\nDoes anyone have an idea how to resolve this conflict?\r\n\r\n\r\n  [1]: https://github.com/yschondorf/jaad-conflict-sample-project/tree/main","title":"Conflict between jaad and javax sound","body":"<p>I have a small utility class for obtaining the sample rate of a WAV file. The high-level code is below (full example is in the <a href=\"https://github.com/yschondorf/jaad-conflict-sample-project/tree/main\" rel=\"nofollow noreferrer\">sample project on GitHub</a> )</p>\n<pre><code>public static int getSampleRate(String audioFilePath) throws FileNotFoundException {\n    File audioFile = new File(audioFilePath);\n    \n    try {\n        AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\n        int sampleRate = (int) audioFileFormat.getFormat().getSampleRate();\n        return sampleRate;\n    } catch (UnsupportedAudioFileException|IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>This code works perfectly until I add Jaad dependency in pom.xml:</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;com.tianscar.javasound&lt;/groupId&gt;\n        &lt;artifactId&gt;jaad&lt;/artifactId&gt;\n        &lt;version&gt;0.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This causes Jaad to interfere somehow and the line -</p>\n<pre><code>AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\n</code></pre>\n<p>results in an exception:\njava.lang.NullPointerException: Cannot invoke &quot;net.sourceforge.jaad.aac.SampleRate.getFrequency()&quot; because the return value of &quot;net.sourceforge.jaad.aac.DecoderConfig.getSampleFrequency()&quot; is null</p>\n<pre><code>at net.sourceforge.jaad.aac.Decoder.&lt;init&gt;(Decoder.java:77)\nat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:57)\nat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:51)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudio(AACAudioFileReader.java:50)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudioFileFormat(AACAudioFileReader.java:42)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:173)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormatAndClose(AACAudioFileReader.java:228)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:242)\nat java.desktop/javax.sound.sampled.AudioSystem.getAudioFileFormat(AudioSystem.java:976)\n</code></pre>\n<p>...</p>\n<p>I included two tests in the <a href=\"https://github.com/yschondorf/jaad-conflict-sample-project/tree/main\" rel=\"nofollow noreferrer\">sample project on GitHub</a> :</p>\n<ul>\n<li>AacSampleRateExtractorTest - runs successfully and extracts the sample rate from an AAC file using Jaad</li>\n<li>AudioWavSampleTest - fails because of the problem I described above. This test can be made to work by removing the Jaad dependency from pom.xml.</li>\n</ul>\n<p>I have not encountered any known compatibility problem between Jaad and Javax sound. Am I missing something? Is this a known bug of Jaad?\nDoes anyone have an idea how to resolve this conflict?</p>\n"},{"tags":["java","amazon-dynamodb"],"comments":[{"owner":{"account_id":2269226,"reputation":22774,"user_id":1997093,"accept_rate":100,"display_name":"akash"},"score":0,"creation_date":1539779561,"post_id":52854622,"comment_id":92625029,"body_markdown":"Are you getting any exception? If yes, can you share exception stacktrace?","body":"Are you getting any exception? If yes, can you share exception stacktrace?"},{"owner":{"account_id":1909698,"reputation":3672,"user_id":1723857,"display_name":"kenlukas"},"score":3,"creation_date":1539779637,"post_id":52854622,"comment_id":92625084,"body_markdown":"Please be specific.  &quot;It does not work&quot; isn&#39;t enough information.","body":"Please be specific.  &quot;It does not work&quot; isn&#39;t enough information."}],"answers":[{"comments":[{"owner":{"account_id":9657481,"reputation":539,"user_id":7166601,"display_name":"rohitwtbs"},"score":0,"creation_date":1540141868,"post_id":52856997,"comment_id":92745504,"body_markdown":"dynamoDb is charged based on the read and write capacity set for the tables.Even if u do not do any operation on table you will be charged.","body":"dynamoDb is charged based on the read and write capacity set for the tables.Even if u do not do any operation on table you will be charged."}],"tags":[],"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"comment_count":1,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1539785551,"creation_date":1539785551,"answer_id":52856997,"question_id":52854622,"body_markdown":"The best approach to delete all the items from DynamoDB is to drop the table and recreate it.\r\n\r\nOtherwise, there are lot of read capacity and write capacity units being used which will cost you.\r\n\r\nDropping and recreating the table is the best approach.","title":"java delete all items in dynamodb","body":"<p>The best approach to delete all the items from DynamoDB is to drop the table and recreate it.</p>\n\n<p>Otherwise, there are lot of read capacity and write capacity units being used which will cost you.</p>\n\n<p>Dropping and recreating the table is the best approach.</p>\n"},{"tags":[],"owner":{"account_id":10285344,"reputation":85,"user_id":7588855,"display_name":"Bhargav"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1580729626,"creation_date":1562650444,"answer_id":56945915,"question_id":52854622,"body_markdown":"To delete all the items from the table first you need to perform scan operation over the table which will results you an scanoutcome. Using the iterator loop over the sacnoutcome with the primary key and it&#39;s primary key value.This will be one of the approach to delete all the items from the table. Hope that this code will work you. Thanks  \r\n\r\n```java\r\nTable table = dynamoDB.getTable(your_table);\r\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\r\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\r\n\r\nwhile (iterator.hasNext()) {\r\n    your_table.deleteItem(&quot;PrimaryKey&quot;, iterator.next().get(&quot;primary key value&quot;));\r\n}\r\n\r\n//May be we can make it look generic by reading key schema first as below\r\nString strPartitionKey = null;\r\nString strSortKey = null;\r\nTableDescription description = table.describe();\r\nList&lt;KeySchemaElement&gt; schema = description.getKeySchema();\r\nfor (KeySchemaElement element : schema) {\r\n    if (element.getKeyType().equalsIgnoreCase(&quot;HASH&quot;))\r\n        strPartitionKey = element.getAttributeName();\r\n    if (element.getKeyType().equalsIgnoreCase(&quot;RANGE&quot;))\r\n        strSortKey = element.getAttributeName();\r\n}\r\n\r\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\r\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\r\nwhile (iterator.hasNext()) {\r\n    Item next = iterator.next();\r\n    if (strSortKey == null &amp;&amp; strPartitionKey != null)\r\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey));\r\n    else if (strPartitionKey != null &amp;&amp; strSortKey != null)\r\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey), strSortKey, next.get(strSortKey));\r\n}\r\n```","title":"java delete all items in dynamodb","body":"<p>To delete all the items from the table first you need to perform scan operation over the table which will results you an scanoutcome. Using the iterator loop over the sacnoutcome with the primary key and it's primary key value.This will be one of the approach to delete all the items from the table. Hope that this code will work you. Thanks  </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Table table = dynamoDB.getTable(your_table);\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\n\nwhile (iterator.hasNext()) {\n    your_table.deleteItem(\"PrimaryKey\", iterator.next().get(\"primary key value\"));\n}\n\n//May be we can make it look generic by reading key schema first as below\nString strPartitionKey = null;\nString strSortKey = null;\nTableDescription description = table.describe();\nList&lt;KeySchemaElement&gt; schema = description.getKeySchema();\nfor (KeySchemaElement element : schema) {\n    if (element.getKeyType().equalsIgnoreCase(\"HASH\"))\n        strPartitionKey = element.getAttributeName();\n    if (element.getKeyType().equalsIgnoreCase(\"RANGE\"))\n        strSortKey = element.getAttributeName();\n}\n\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\nwhile (iterator.hasNext()) {\n    Item next = iterator.next();\n    if (strSortKey == null &amp;&amp; strPartitionKey != null)\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey));\n    else if (strPartitionKey != null &amp;&amp; strSortKey != null)\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey), strSortKey, next.get(strSortKey));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1615801046,"creation_date":1615801046,"answer_id":66635486,"question_id":52854622,"body_markdown":"**PREAMBLE**: While a scan operation is expensive, I was needing this answer for initialising a table for a test scenario (low volume). The table was being created by another process and I needed the test scenario on that table, I could therefore not delete and recreate the table.\r\n\r\n**ANSWER**:\r\ngiven:\r\n - DynamoDbClient db\r\n - static String TABLE_NAME\r\n - static String HASH_KEY\r\n - static String SORT_KEY\r\n\r\n        ScanIterable scanIterable = db.scanPaginator(ScanRequest.builder()\r\n                .tableName(TABLE_NAME)\r\n                .build());\r\n        for(ScanResponse scanResponse:scanIterable){\r\n            for( Map&lt;String, AttributeValue&gt; item: scanResponse.items()){\r\n                Map&lt;String,AttributeValue&gt; deleteKey = new HashMap&lt;&gt;();\r\n                deleteKey.put(HASH_KEY,item.get(HASH_KEY));\r\n                deleteKey.put(SORT_KEY,item.get(SORT_KEY));\r\n                db.deleteItem(DeleteItemRequest.builder()\r\n                        .tableName(TRANSACTION_TABLE_NAME)\r\n                        .key(deleteKey).build());\r\n            }\r\n        }","title":"java delete all items in dynamodb","body":"<p><strong>PREAMBLE</strong>: While a scan operation is expensive, I was needing this answer for initialising a table for a test scenario (low volume). The table was being created by another process and I needed the test scenario on that table, I could therefore not delete and recreate the table.</p>\n<p><strong>ANSWER</strong>:\ngiven:</p>\n<ul>\n<li><p>DynamoDbClient db</p>\n</li>\n<li><p>static String TABLE_NAME</p>\n</li>\n<li><p>static String HASH_KEY</p>\n</li>\n<li><p>static String SORT_KEY</p>\n<pre><code> ScanIterable scanIterable = db.scanPaginator(ScanRequest.builder()\n         .tableName(TABLE_NAME)\n         .build());\n for(ScanResponse scanResponse:scanIterable){\n     for( Map&lt;String, AttributeValue&gt; item: scanResponse.items()){\n         Map&lt;String,AttributeValue&gt; deleteKey = new HashMap&lt;&gt;();\n         deleteKey.put(HASH_KEY,item.get(HASH_KEY));\n         deleteKey.put(SORT_KEY,item.get(SORT_KEY));\n         db.deleteItem(DeleteItemRequest.builder()\n                 .tableName(TRANSACTION_TABLE_NAME)\n                 .key(deleteKey).build());\n     }\n }\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7584362,"reputation":187,"user_id":5754033,"display_name":"Vadym Ozarynskyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054794,"creation_date":1702054794,"answer_id":77628129,"question_id":52854622,"body_markdown":" - List item\r\n\r\nLate to the party, but recently I needed the same for my integration tests.\r\nSince it&#39;s integration tests, I don&#39;t want to depend on implementation and wanted to delete all content of all tables. \r\nSo basically I retrieve all table names. Then retrieve key schemas for each table. And scan through each and construct key by which we delete item. \r\nWe need construction of keys since for one table we can have only partition key and for other we need sort key as well.\r\n\r\n            val client = enhancedClientBuilder.build()\r\n\r\n        runBlocking {\r\n            client.listTables().await().tableNames().forEach { tableName -&gt;\r\n                val table = client.describeTable { it.tableName(tableName) }.await().table()\r\n\r\n                client.scan { it.tableName(tableName) }.await().items().forEach { item -&gt;\r\n                    val itemIdentifier = mutableMapOf&lt;String, AttributeValue&gt;()\r\n                    table.keySchema().forEach { keySchema -&gt;\r\n                        itemIdentifier[keySchema.attributeName()] = item[keySchema.attributeName()]!!\r\n                    }\r\n\r\n                    client.deleteItem {\r\n                        it.tableName(tableName)\r\n                        it.key(itemIdentifier)\r\n                    }.await()\r\n                }\r\n            }\r\n        }\r\n","title":"java delete all items in dynamodb","body":"<ul>\n<li>List item</li>\n</ul>\n<p>Late to the party, but recently I needed the same for my integration tests.\nSince it's integration tests, I don't want to depend on implementation and wanted to delete all content of all tables.\nSo basically I retrieve all table names. Then retrieve key schemas for each table. And scan through each and construct key by which we delete item.\nWe need construction of keys since for one table we can have only partition key and for other we need sort key as well.</p>\n<pre><code>        val client = enhancedClientBuilder.build()\n\n    runBlocking {\n        client.listTables().await().tableNames().forEach { tableName -&gt;\n            val table = client.describeTable { it.tableName(tableName) }.await().table()\n\n            client.scan { it.tableName(tableName) }.await().items().forEach { item -&gt;\n                val itemIdentifier = mutableMapOf&lt;String, AttributeValue&gt;()\n                table.keySchema().forEach { keySchema -&gt;\n                    itemIdentifier[keySchema.attributeName()] = item[keySchema.attributeName()]!!\n                }\n\n                client.deleteItem {\n                    it.tableName(tableName)\n                    it.key(itemIdentifier)\n                }.await()\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":14562744,"reputation":71,"user_id":10518381,"display_name":"luux"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9896,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1702054794,"creation_date":1539778305,"question_id":52854622,"body_markdown":"Im trying to delete all items in my table in dynamodb but it does not work.\r\n\r\n        try {\r\n            ScanRequest scanRequest = new ScanRequest().withTableName(table);\r\n            ScanResult scanResult = null;\r\n\r\n            do {\r\n                if (Check.nonNull(scanResult)) {\r\n                    scanRequest.setExclusiveStartKey(scanResult.getLastEvaluatedKey());\r\n                }\r\n\r\n                scanResult = client.scan(scanRequest);\r\n\r\n                scanResult.getItems().forEach((Item) -&gt; {\r\n                    String n1 = Item.get(&quot;n1&quot;).toString();\r\n                    String n2 = tem.get(&quot;n2&quot;).toString();\r\n                    DeleteItemSpec spec = new DeleteItemSpec().withPrimaryKey(&quot;n1&quot;, n1, &quot;n2&quot;, n2);\r\n                    dynamodb.getTable(table).deleteItem(spec);\r\n                });\r\n            } while (Check.nonNull(scanResult.getLastEvaluatedKey()));\r\n        } catch (Exception e) {\r\n            throw new BadRequestException(e);\r\n        }\r\n\r\n\r\nn1 is my Primary partition key\r\n\r\nn2 is my Primary sort key\r\n\r\n\r\n","title":"java delete all items in dynamodb","body":"<p>Im trying to delete all items in my table in dynamodb but it does not work.</p>\n\n<pre><code>    try {\n        ScanRequest scanRequest = new ScanRequest().withTableName(table);\n        ScanResult scanResult = null;\n\n        do {\n            if (Check.nonNull(scanResult)) {\n                scanRequest.setExclusiveStartKey(scanResult.getLastEvaluatedKey());\n            }\n\n            scanResult = client.scan(scanRequest);\n\n            scanResult.getItems().forEach((Item) -&gt; {\n                String n1 = Item.get(\"n1\").toString();\n                String n2 = tem.get(\"n2\").toString();\n                DeleteItemSpec spec = new DeleteItemSpec().withPrimaryKey(\"n1\", n1, \"n2\", n2);\n                dynamodb.getTable(table).deleteItem(spec);\n            });\n        } while (Check.nonNull(scanResult.getLastEvaluatedKey()));\n    } catch (Exception e) {\n        throw new BadRequestException(e);\n    }\n</code></pre>\n\n<p>n1 is my Primary partition key</p>\n\n<p>n2 is my Primary sort key</p>\n"},{"tags":["java","amazon-web-services","apache-nifi","amazon-timestream"],"answers":[{"tags":[],"owner":{"account_id":2855790,"reputation":591,"user_id":2452093,"accept_rate":100,"display_name":"Ciaran George"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054512,"creation_date":1702054512,"answer_id":77628104,"question_id":77365590,"body_markdown":"It turns out some AWS V2 files made their way into apache NIFI V1.23.2 before they had upgraded to nifi 2.0.0. These files caused conflicts with the V1 implementation throughout the rest of the code. I&#39;ve now upgraded to nifi 2.0.0-M1 and have been able to get it running.","title":"Error occurring when running apache nifi processor integration test","body":"<p>It turns out some AWS V2 files made their way into apache NIFI V1.23.2 before they had upgraded to nifi 2.0.0. These files caused conflicts with the V1 implementation throughout the rest of the code. I've now upgraded to nifi 2.0.0-M1 and have been able to get it running.</p>\n"}],"owner":{"account_id":2855790,"reputation":591,"user_id":2452093,"accept_rate":100,"display_name":"Ciaran George"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702054512,"creation_date":1698311125,"question_id":77365590,"body_markdown":"I&#39;ve created a new apache NIFI processor for AWS Timestream, I know a timestream processor already exists but it does not currently support MultiMeasure values. As part of this I&#39;ve attempted to upgrade the nifi AWS processor structure to aws V2 API but I&#39;ve hit an issue that I believe to be an AWS version conflict (Although I could be wrong). I&#39;m hoping someone can assist me with this issue.\r\n\r\nThe error occurring is:\r\n\r\n```\r\njava.lang.IllegalArgumentException: Invalid option: software.amazon.awssdk.awscore.client.config.AwsClientOption@71168c46. Required value of type interface software.amazon.awssdk.identity.spi.IdentityProvider, but was class org.apache.nifi.processors.aws.credentials.provider.PropertiesCredentialsProvider.\r\n```\r\n\r\nThe integration test I&#39;m running is:\r\n\r\n```\r\n    private final String CREDENTIALS_FILE = System.getProperty(&quot;user.home&quot;) + &quot;/aws-credentials.properties&quot;;\r\n    private final String DB_NAME = &quot;example_db&quot;;\r\n    private final String TBL_NAME = &quot;example_tbl&quot;;\r\n    private final String REGION = Region.EU_WEST_1.id();\r\n\r\n    @Test\r\n    public void testSimplePut() throws IOException {\r\n        final TestRunner runner = TestRunners.newTestRunner(new PutTimestream());\r\n        runner.setProperty(PutTimestream.TBL_NAME, TBL_NAME);\r\n        runner.setProperty(PutTimestream.DB_NAME, DB_NAME);\r\n        runner.setProperty(PutTimestream.REGION, REGION);\r\n        runner.setProperty(PutTimestream.CREDENTIALS_FILE, CREDENTIALS_FILE);\r\n\r\n        final Map&lt;String, String&gt; attrs = new HashMap&lt;&gt;();\r\n        attrs.put(&quot;filename&quot;, &quot;timestream_valid.json&quot;);\r\n        runner.enqueue(Paths.get(&quot;src/test/resources/timestream_valid.json&quot;), attrs);\r\n        runner.run(1);\r\n\r\n        runner.assertAllFlowFilesTransferred(PutTimestream.REL_SUCCESS, 1);\r\n    }\r\n```\r\n\r\nThis is my AbstractTimestreamProcessor:\r\n\r\n```\r\npublic abstract class AbstractTimestreamProcessor extends AbstractAwsProcessor&lt;TimestreamWriteClient, TimestreamWriteClientBuilder&gt; {\r\n\t@Override\r\n\tprotected TimestreamWriteClientBuilder createClientBuilder(ProcessContext processContext) {\r\n\t\treturn TimestreamWriteClient.builder();\r\n\t}\r\n}\r\n```\r\n\r\nThen this is the PutTimestream processor:\r\n\r\n```\r\n@Tags( { &quot;amazon&quot;, &quot;aws&quot;, &quot;timestream&quot;, &quot;put&quot; } )\r\n@CapabilityDescription( &quot;AWS Timestream Put Processor.&quot; )\r\npublic class PutTimestream extends AbstractTimestreamProcessor {\r\n\r\n\tpublic static final PropertyDescriptor DB_NAME = new PropertyDescriptor.Builder()\r\n\t\t\t.name(&quot;Database Name&quot;)\r\n\t\t\t.displayName(&quot;Database Name&quot;)\r\n\t\t\t.description(&quot;Specifies the name of the Amazon Timestream Database&quot;)\r\n\t\t\t.required(true)\r\n\t\t\t.expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\r\n\t\t\t.addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\r\n\t\t\t.build();\r\n\tpublic static final PropertyDescriptor TBL_NAME = new PropertyDescriptor.Builder()\r\n\t\t\t.name(&quot;Table Name&quot;)\r\n\t\t\t.displayName(&quot;Table Name&quot;)\r\n\t\t\t.description(&quot;Specifies the name of the Amazon Timestream Table&quot;)\r\n\t\t\t.required(true)\r\n\t\t\t.expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\r\n\t\t\t.addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\r\n\t\t\t.build();\r\n\r\n//\tprivate Set&lt;Relationship&gt; relationships;\r\n\tWriteRecordsResponse writeRecordsResponse;\r\n\tMap&lt;String, String&gt; attributes;\r\n\r\n\tpublic static final List&lt;PropertyDescriptor&gt; properties = Collections\r\n\t\t\t.unmodifiableList(Arrays.asList(AWS_CREDENTIALS_PROVIDER_SERVICE, REGION, ACCESS_KEY, SECRET_KEY,\r\n\t\t\t\t\tCREDENTIALS_FILE, TIMEOUT, DB_NAME, TBL_NAME));\r\n\r\n\tprivate volatile List&lt;PropertyDescriptor&gt; userDefinedProperties = Collections.emptyList();\r\n\tprivate TimestreamRecordConverter timestreamRecordConverter;\r\n\t\r\n\t@Override\r\n\tprotected void init(ProcessorInitializationContext context) {\r\n\t\ttimestreamRecordConverter = new TimestreamRecordConverter(getLogger());\r\n\t}\r\n\r\n\t@Override\r\n\tprotected List&lt;PropertyDescriptor&gt; getSupportedPropertyDescriptors() {\r\n\t\treturn properties;\r\n\t}\r\n\r\n\tprivate Map&lt;String, String&gt; getAttributes(FlowFile flowFile, WriteRecordsResponse writeRecordsResponse) {\r\n\t\tattributes = new HashMap();\r\n\t\tattributes.putAll(flowFile.getAttributes());\r\n\t\tattributes.put(CoreAttributes.MIME_TYPE.key(), &quot;application/json&quot;);\r\n\t\tattributes.put(&quot;timestream.insert.status&quot;,\r\n\t\t\t\tString.valueOf(writeRecordsResponse.responseMetadata()));\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onTrigger(ProcessContext context, ProcessSession session) throws ProcessException {\r\n\r\n\t\tFlowFile flowFile = session.get();\r\n\t\tif (flowFile == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfinal long startNanos = System.nanoTime();\r\n\r\n\t\tString dbName = context.getProperty(DB_NAME).evaluateAttributeExpressions(flowFile).getValue();\r\n\t\tString tblName = context.getProperty(TBL_NAME).evaluateAttributeExpressions(flowFile).getValue();\r\n\r\n\t\tfinal List&lt;Record&gt; records;\r\n\t\ttry {\r\n\t\t\tfinal byte[] content = new byte[(int) flowFile.getSize()];\r\n\t\t\tsession.read(flowFile, in -&gt; StreamUtils.fillBuffer(in, content, true));\r\n\t\t\trecords = timestreamRecordConverter.convertJsonToTimestreamRecords(new String(content));\r\n\r\n\t\t\tWriteRecordsRequest writeRecordsRequest = WriteRecordsRequest.builder()\r\n\t\t\t\t\t.databaseName(dbName)\r\n\t\t\t\t\t.tableName(tblName)\r\n\t\t\t\t\t.records(records)\r\n\t\t\t\t\t.build();\r\n\r\n\t\t\twriteRecordsResponse = getClient(context).writeRecords(writeRecordsRequest);\r\n\t\t\tflowFile = session.putAllAttributes(flowFile, getAttributes(flowFile, writeRecordsResponse));\r\n\t\t\tsession.transfer(flowFile, REL_SUCCESS);\r\n\r\n\t\t\tlong transmissionMillis = java.util.concurrent.TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);\r\n\t\t\tsession.getProvenanceReporter().send(flowFile, tblName, transmissionMillis);\r\n\t\t} catch (Exception e) {\r\n\t\t\tStringWriter sw = new StringWriter();\r\n\t\t\te.printStackTrace(new PrintWriter(sw));\r\n\t\t\tgetLogger().info(&quot;Error processing timestream record. Check stacktrace &quot; + sw);\r\n\t\t\tsession.transfer(flowFile, REL_FAILURE);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\nThe record gets processed successfully but when I call getClient it seems to fail on the line:\r\n\r\n```\r\nthis.finalizeChildConfiguration(configuration)\r\n```\r\n\r\nWhich is in the SdkDefaultClientBuilder class. Any help would be much appreaciated with this issue as there&#39;s very little resources to go off for this.\r\n\r\nThanks\r\n\r\n\r\n","title":"Error occurring when running apache nifi processor integration test","body":"<p>I've created a new apache NIFI processor for AWS Timestream, I know a timestream processor already exists but it does not currently support MultiMeasure values. As part of this I've attempted to upgrade the nifi AWS processor structure to aws V2 API but I've hit an issue that I believe to be an AWS version conflict (Although I could be wrong). I'm hoping someone can assist me with this issue.</p>\n<p>The error occurring is:</p>\n<pre><code>java.lang.IllegalArgumentException: Invalid option: software.amazon.awssdk.awscore.client.config.AwsClientOption@71168c46. Required value of type interface software.amazon.awssdk.identity.spi.IdentityProvider, but was class org.apache.nifi.processors.aws.credentials.provider.PropertiesCredentialsProvider.\n</code></pre>\n<p>The integration test I'm running is:</p>\n<pre><code>    private final String CREDENTIALS_FILE = System.getProperty(&quot;user.home&quot;) + &quot;/aws-credentials.properties&quot;;\n    private final String DB_NAME = &quot;example_db&quot;;\n    private final String TBL_NAME = &quot;example_tbl&quot;;\n    private final String REGION = Region.EU_WEST_1.id();\n\n    @Test\n    public void testSimplePut() throws IOException {\n        final TestRunner runner = TestRunners.newTestRunner(new PutTimestream());\n        runner.setProperty(PutTimestream.TBL_NAME, TBL_NAME);\n        runner.setProperty(PutTimestream.DB_NAME, DB_NAME);\n        runner.setProperty(PutTimestream.REGION, REGION);\n        runner.setProperty(PutTimestream.CREDENTIALS_FILE, CREDENTIALS_FILE);\n\n        final Map&lt;String, String&gt; attrs = new HashMap&lt;&gt;();\n        attrs.put(&quot;filename&quot;, &quot;timestream_valid.json&quot;);\n        runner.enqueue(Paths.get(&quot;src/test/resources/timestream_valid.json&quot;), attrs);\n        runner.run(1);\n\n        runner.assertAllFlowFilesTransferred(PutTimestream.REL_SUCCESS, 1);\n    }\n</code></pre>\n<p>This is my AbstractTimestreamProcessor:</p>\n<pre><code>public abstract class AbstractTimestreamProcessor extends AbstractAwsProcessor&lt;TimestreamWriteClient, TimestreamWriteClientBuilder&gt; {\n    @Override\n    protected TimestreamWriteClientBuilder createClientBuilder(ProcessContext processContext) {\n        return TimestreamWriteClient.builder();\n    }\n}\n</code></pre>\n<p>Then this is the PutTimestream processor:</p>\n<pre><code>@Tags( { &quot;amazon&quot;, &quot;aws&quot;, &quot;timestream&quot;, &quot;put&quot; } )\n@CapabilityDescription( &quot;AWS Timestream Put Processor.&quot; )\npublic class PutTimestream extends AbstractTimestreamProcessor {\n\n    public static final PropertyDescriptor DB_NAME = new PropertyDescriptor.Builder()\n            .name(&quot;Database Name&quot;)\n            .displayName(&quot;Database Name&quot;)\n            .description(&quot;Specifies the name of the Amazon Timestream Database&quot;)\n            .required(true)\n            .expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\n            .addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\n            .build();\n    public static final PropertyDescriptor TBL_NAME = new PropertyDescriptor.Builder()\n            .name(&quot;Table Name&quot;)\n            .displayName(&quot;Table Name&quot;)\n            .description(&quot;Specifies the name of the Amazon Timestream Table&quot;)\n            .required(true)\n            .expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\n            .addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\n            .build();\n\n//  private Set&lt;Relationship&gt; relationships;\n    WriteRecordsResponse writeRecordsResponse;\n    Map&lt;String, String&gt; attributes;\n\n    public static final List&lt;PropertyDescriptor&gt; properties = Collections\n            .unmodifiableList(Arrays.asList(AWS_CREDENTIALS_PROVIDER_SERVICE, REGION, ACCESS_KEY, SECRET_KEY,\n                    CREDENTIALS_FILE, TIMEOUT, DB_NAME, TBL_NAME));\n\n    private volatile List&lt;PropertyDescriptor&gt; userDefinedProperties = Collections.emptyList();\n    private TimestreamRecordConverter timestreamRecordConverter;\n    \n    @Override\n    protected void init(ProcessorInitializationContext context) {\n        timestreamRecordConverter = new TimestreamRecordConverter(getLogger());\n    }\n\n    @Override\n    protected List&lt;PropertyDescriptor&gt; getSupportedPropertyDescriptors() {\n        return properties;\n    }\n\n    private Map&lt;String, String&gt; getAttributes(FlowFile flowFile, WriteRecordsResponse writeRecordsResponse) {\n        attributes = new HashMap();\n        attributes.putAll(flowFile.getAttributes());\n        attributes.put(CoreAttributes.MIME_TYPE.key(), &quot;application/json&quot;);\n        attributes.put(&quot;timestream.insert.status&quot;,\n                String.valueOf(writeRecordsResponse.responseMetadata()));\n        return attributes;\n\n    }\n\n    @Override\n    public void onTrigger(ProcessContext context, ProcessSession session) throws ProcessException {\n\n        FlowFile flowFile = session.get();\n        if (flowFile == null) {\n            return;\n        }\n\n        final long startNanos = System.nanoTime();\n\n        String dbName = context.getProperty(DB_NAME).evaluateAttributeExpressions(flowFile).getValue();\n        String tblName = context.getProperty(TBL_NAME).evaluateAttributeExpressions(flowFile).getValue();\n\n        final List&lt;Record&gt; records;\n        try {\n            final byte[] content = new byte[(int) flowFile.getSize()];\n            session.read(flowFile, in -&gt; StreamUtils.fillBuffer(in, content, true));\n            records = timestreamRecordConverter.convertJsonToTimestreamRecords(new String(content));\n\n            WriteRecordsRequest writeRecordsRequest = WriteRecordsRequest.builder()\n                    .databaseName(dbName)\n                    .tableName(tblName)\n                    .records(records)\n                    .build();\n\n            writeRecordsResponse = getClient(context).writeRecords(writeRecordsRequest);\n            flowFile = session.putAllAttributes(flowFile, getAttributes(flowFile, writeRecordsResponse));\n            session.transfer(flowFile, REL_SUCCESS);\n\n            long transmissionMillis = java.util.concurrent.TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);\n            session.getProvenanceReporter().send(flowFile, tblName, transmissionMillis);\n        } catch (Exception e) {\n            StringWriter sw = new StringWriter();\n            e.printStackTrace(new PrintWriter(sw));\n            getLogger().info(&quot;Error processing timestream record. Check stacktrace &quot; + sw);\n            session.transfer(flowFile, REL_FAILURE);\n        }\n\n    }\n}\n</code></pre>\n<p>The record gets processed successfully but when I call getClient it seems to fail on the line:</p>\n<pre><code>this.finalizeChildConfiguration(configuration)\n</code></pre>\n<p>Which is in the SdkDefaultClientBuilder class. Any help would be much appreaciated with this issue as there's very little resources to go off for this.</p>\n<p>Thanks</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":23416689,"reputation":181,"user_id":17477546,"display_name":"Ajay Makwana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702054393,"creation_date":1702054393,"answer_id":77628089,"question_id":77628030,"body_markdown":"You can refer to this example from Medium for setting up dynamic themes to android app.\r\n\r\n[Implementing Dynamic Theming in Android][1]\r\n\r\n\r\n  [1]: https://medium.com/@nihitb06.dev/implementing-dynamic-theming-in-android-a9ed4f5010a8","title":"Change color of Buttons and textview on button click","body":"<p>You can refer to this example from Medium for setting up dynamic themes to android app.</p>\n<p><a href=\"https://medium.com/@nihitb06.dev/implementing-dynamic-theming-in-android-a9ed4f5010a8\" rel=\"nofollow noreferrer\">Implementing Dynamic Theming in Android</a></p>\n"}],"owner":{"account_id":27314780,"reputation":1,"user_id":20829395,"display_name":"Divyanshu saraswat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1702150050,"answer_count":1,"score":0,"last_activity_date":1702054393,"creation_date":1702053641,"question_id":77628030,"body_markdown":"I wan to make a feature for my application Written in Android Studio Java. The feature is that I want to allow users to change the color of the application that means the button colors, textbox colors etc. The Buttons, Textview etc of my apps are using custom drawable files like buttons are using &quot;custom_button_ios_blue&quot; and textviews are using &quot;custom_text_view_ios_blue&quot; now I want to make this feature like when a user clicks on Change Theme Orange button, all the buttons and textview using these custom drawable xml files should now use &quot;custom_button_ios_orange&quot; and &quot;custom_text_view_ios_orange&quot; files and it should retain that chosen file whenever the app starts.","title":"Change color of Buttons and textview on button click","body":"<p>I wan to make a feature for my application Written in Android Studio Java. The feature is that I want to allow users to change the color of the application that means the button colors, textbox colors etc. The Buttons, Textview etc of my apps are using custom drawable files like buttons are using &quot;custom_button_ios_blue&quot; and textviews are using &quot;custom_text_view_ios_blue&quot; now I want to make this feature like when a user clicks on Change Theme Orange button, all the buttons and textview using these custom drawable xml files should now use &quot;custom_button_ios_orange&quot; and &quot;custom_text_view_ios_orange&quot; files and it should retain that chosen file whenever the app starts.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1700252216,"post_id":77504359,"comment_id":136635953,"body_markdown":"`cityCollection = cityHashMap.values();` ← That collection belongs to cityHashMap.  You can read it, and you can delete from it, but you cannot directly add to it.  (How would the Map be affected, if that were allowed?  To which key would the new values correspond?)","body":"<code>cityCollection = cityHashMap.values();</code> ← That collection belongs to cityHashMap.  You can read it, and you can delete from it, but you cannot directly add to it.  (How would the Map be affected, if that were allowed?  To which key would the new values correspond?)"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1700252237,"post_id":77504359,"comment_id":136635958,"body_markdown":"What is the goal you are trying to accomplish? Why are you trying to sort the values inside the map? A map &quot;usually&quot; don&#39;t have an ordering. Please [edit] your question to include a more detailed description what you are trying to do.","body":"What is the goal you are trying to accomplish? Why are you trying to sort the values inside the map? A map &quot;usually&quot; don&#39;t have an ordering. Please <a href=\"https://stackoverflow.com/posts/77504359/edit\">edit</a> your question to include a more detailed description what you are trying to do."},{"owner":{"account_id":29929711,"reputation":11,"user_id":22936904,"display_name":"nslo"},"score":0,"creation_date":1700253299,"post_id":77504359,"comment_id":136636145,"body_markdown":"@VGR ah i understand, thank you, fixed it by using an ArrayList and creating a method that updates the List with the current values in the Map. Thanks again, didnt think about the &quot;Collection belongs to Map&quot; part.","body":"@VGR ah i understand, thank you, fixed it by using an ArrayList and creating a method that updates the List with the current values in the Map. Thanks again, didnt think about the &quot;Collection belongs to Map&quot; part."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700253511,"post_id":77504359,"comment_id":136636173,"body_markdown":"If the issue was resolved without receiving an answer, consider deleting t he q uestion.","body":"If the issue was resolved without receiving an answer, consider deleting t he q uestion."}],"answers":[{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1700258724,"post_id":77504532,"comment_id":136636781,"body_markdown":"And… In Java 21, we can more descriptively declare the result as a [sequenced collection](https://openjdk.org/jeps/431): `SequencedCollection&lt;City&gt; sorted = …`.","body":"And… In Java 21, we can more descriptively declare the result as a <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">sequenced collection</a>: <code>SequencedCollection&lt;City&gt; sorted = …</code>."}],"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700260622,"creation_date":1700253846,"answer_id":77504532,"question_id":77504359,"body_markdown":"# Stream\r\n\r\nIf you want to use a Comparator you don&#39;t realy need either your method `sortByDepartureTime` nor your class `CityComparator`. Just stream over the values and create a new collection to store the sorted cities:\r\n\r\n    private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\r\n\r\n    ....\r\n\r\n    Collection&lt;City&gt; sorted = cityHashMap.values()\r\n                                         .stream()\r\n                                         .sorted(Comparator.comparing(City::getCurrentTime))\r\n                                         .collect(Collectors.toList());\r\n\r\nuse reversed if you want to sort in reverse order\r\n\r\n    Collection&lt;City&gt; sorted = cityHashMap.values()\r\n                                         .stream()\r\n                                         .sorted(Comparator.comparing(City::getCurrentTime).reversed())\r\n                                         .collect(Collectors.toList());","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<h1>Stream</h1>\n<p>If you want to use a Comparator you don't realy need either your method <code>sortByDepartureTime</code> nor your class <code>CityComparator</code>. Just stream over the values and create a new collection to store the sorted cities:</p>\n<pre><code>private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\n\n....\n\nCollection&lt;City&gt; sorted = cityHashMap.values()\n                                     .stream()\n                                     .sorted(Comparator.comparing(City::getCurrentTime))\n                                     .collect(Collectors.toList());\n</code></pre>\n<p>use reversed if you want to sort in reverse order</p>\n<pre><code>Collection&lt;City&gt; sorted = cityHashMap.values()\n                                     .stream()\n                                     .sorted(Comparator.comparing(City::getCurrentTime).reversed())\n                                     .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702054318,"creation_date":1700260220,"answer_id":77504928,"question_id":77504359,"body_markdown":"The [Answer by Eritrean][1] would be my preferred solution, using a stream. But if you are not yet comfortable with streams, below is the older sort of approach.\r\n\r\n## Don’t mess with map’s collected values\r\n\r\nIn your code:\r\n\r\n    cityCollection.clear();\r\n    cityCollection.addAll( sortedList );\r\n\r\n… `cityCollection` represents the values inside the map. That collection returned by `Map#values` is meant to be read but not written. \r\n\r\nInstead, copy that elements of that collection to another collection. You did so correctly in this line:\r\n\r\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;( cityCollection );\r\n\r\nYou are then at liberty to manipulate that new `List`. \r\n\r\n## `List#sort` with a `Comparator`\r\n\r\nAs explained by Eritrean, you can define a `Comparator` separate from your `City` class. \r\n\r\nLet&#39;s define a [record][2] as the `City` class for our example.\r\n\r\n```java\r\nrecord City( String name , LocalTime localTime ) { }\r\n```\r\n\r\nMake some sample data.\r\n\r\n```java\r\nMap &lt; Integer, City &gt; map =\r\n        Map.of (\r\n                11 , new City ( &quot;Munich&quot; , LocalTime.parse ( &quot;23:00&quot; ) ) ,\r\n                22 , new City ( &quot;New York&quot; , LocalTime.parse ( &quot;07:00&quot; ) ) ,\r\n                33 , new City ( &quot;Paris&quot; , LocalTime.parse ( &quot;19:00&quot; ) ) ,\r\n                44 , new City ( &quot;London&quot; , LocalTime.parse ( &quot;13:00&quot; ) )\r\n        );\r\n```\r\n\r\nExtract a collection of the values from that map, just the `City` objects, by calling [`Map#values`][3]. Pass that collection to the constructor of an `ArrayList`, a collection type we know we can sort.\r\n\r\n```java\r\nList &lt; City &gt; sorted = new ArrayList &lt;&gt; ( map.values ( ) );\r\n```\r\n\r\nNow we can perform the sort. \r\n\r\nPass a [method reference][4] (`City :: localTime`) to the convenience method [`Comparator.comparing`][5] to produce a [`Comparator`][6] object. \r\n\r\n    Comparator.comparing ( City :: localTime )\r\n\r\nThis comparator works because the [`LocalTime`][7] class implements [`Comparable`][8]. The `LocalTime` objects carry a [`compareTo`][9] method to be using in sorting.\r\n\r\nIn turn we pass that `Comparator` object to the [`List#sort`][10] method.\r\n\r\n```java\r\nsorted.sort ( Comparator.comparing ( City :: localTime ) );\r\n```\r\n\r\nDump to console.\r\n\r\n```java\r\nSystem.out.println ( &quot;sorted.toString() = &quot; + sorted );\r\n```\r\n\r\nIn the result, we see they came out in [the correct order][11].\r\n\r\n&gt;sorted.toString() = [City[name=New York, localTime=07:00], City[name=London, localTime=13:00], City[name=Paris, localTime=19:00], City[name=Munich, localTime=23:00]]\r\n\r\nIf returning the result from a method, generally best to (a) return an [unmodifiable][12] collection, and (b) declare the return type as the more general type [`SequencedCollection`][13] (in Java 21+).  \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77504532/642706\r\n  [2]: https://openjdk.org/jeps/395\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#values()\r\n  [4]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/lang/Comparable.html\r\n  [9]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html#compareTo(java.time.LocalTime)\r\n  [10]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\r\n  [11]: https://en.wikipedia.org/wiki/New_York%E2%80%93London%E2%80%93Paris%E2%80%93Munich\r\n  [12]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#unmodifiable\r\n  [13]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<p>The <a href=\"https://stackoverflow.com/a/77504532/642706\">Answer by Eritrean</a> would be my preferred solution, using a stream. But if you are not yet comfortable with streams, below is the older sort of approach.</p>\n<h2>Don’t mess with map’s collected values</h2>\n<p>In your code:</p>\n<pre><code>cityCollection.clear();\ncityCollection.addAll( sortedList );\n</code></pre>\n<p>… <code>cityCollection</code> represents the values inside the map. That collection returned by <code>Map#values</code> is meant to be read but not written.</p>\n<p>Instead, copy that elements of that collection to another collection. You did so correctly in this line:</p>\n<pre><code>List&lt;City&gt; sortedList = new ArrayList&lt;&gt;( cityCollection );\n</code></pre>\n<p>You are then at liberty to manipulate that new <code>List</code>.</p>\n<h2><code>List#sort</code> with a <code>Comparator</code></h2>\n<p>As explained by Eritrean, you can define a <code>Comparator</code> separate from your <code>City</code> class.</p>\n<p>Let's define a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> as the <code>City</code> class for our example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record City( String name , LocalTime localTime ) { }\n</code></pre>\n<p>Make some sample data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; Integer, City &gt; map =\n        Map.of (\n                11 , new City ( &quot;Munich&quot; , LocalTime.parse ( &quot;23:00&quot; ) ) ,\n                22 , new City ( &quot;New York&quot; , LocalTime.parse ( &quot;07:00&quot; ) ) ,\n                33 , new City ( &quot;Paris&quot; , LocalTime.parse ( &quot;19:00&quot; ) ) ,\n                44 , new City ( &quot;London&quot; , LocalTime.parse ( &quot;13:00&quot; ) )\n        );\n</code></pre>\n<p>Extract a collection of the values from that map, just the <code>City</code> objects, by calling <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#values()\" rel=\"nofollow noreferrer\"><code>Map#values</code></a>. Pass that collection to the constructor of an <code>ArrayList</code>, a collection type we know we can sort.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt; City &gt; sorted = new ArrayList &lt;&gt; ( map.values ( ) );\n</code></pre>\n<p>Now we can perform the sort.</p>\n<p>Pass a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method reference</a> (<code>City :: localTime</code>) to the convenience method <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>Comparator.comparing</code></a> to produce a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> object.</p>\n<pre><code>Comparator.comparing ( City :: localTime )\n</code></pre>\n<p>This comparator works because the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a> class implements <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a>. The <code>LocalTime</code> objects carry a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html#compareTo(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>compareTo</code></a> method to be using in sorting.</p>\n<p>In turn we pass that <code>Comparator</code> object to the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>List#sort</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>sorted.sort ( Comparator.comparing ( City :: localTime ) );\n</code></pre>\n<p>Dump to console.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;sorted.toString() = &quot; + sorted );\n</code></pre>\n<p>In the result, we see they came out in <a href=\"https://en.wikipedia.org/wiki/New_York%E2%80%93London%E2%80%93Paris%E2%80%93Munich\" rel=\"nofollow noreferrer\">the correct order</a>.</p>\n<blockquote>\n<p>sorted.toString() = [City[name=New York, localTime=07:00], City[name=London, localTime=13:00], City[name=Paris, localTime=19:00], City[name=Munich, localTime=23:00]]</p>\n</blockquote>\n<p>If returning the result from a method, generally best to (a) return an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable</a> collection, and (b) declare the return type as the more general type <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> (in Java 21+).</p>\n"}],"owner":{"account_id":29929711,"reputation":11,"user_id":22936904,"display_name":"nslo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77504928,"answer_count":2,"score":0,"last_activity_date":1702054318,"creation_date":1700251504,"question_id":77504359,"body_markdown":"Currently i am trying to do it using a comparator, the &quot;getCurrentTime()&quot; method return a LocalTime. \r\n```\r\n  private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\r\n  private final Collection&lt;City&gt; cityCollection = cityHashMap.values();\r\n\r\n\r\n  public void sortByDepartureTime() {\r\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;(cityCollection);\r\n    sortedList.sort(new CityComparator());\r\n\r\n    cityCollection.clear();\r\n    cityCollection.addAll(sortedList);\r\n  }\r\n\r\n\r\n  public static class CityComparator implements Comparator&lt;City&gt; {\r\n    @Override\r\n    public int compare(City o1, City o2) {\r\n      return o1.getCurrentTime().compareTo(o2.getCurrentTime());\r\n    }\r\n  }\r\n```\r\n\r\n\r\n I am getting a\r\n &gt;Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException\r\n\r\ncityCollection.addAll(sortedList);\r\n\r\nI tried using an ArrayList instead of the Collection, but that raised the issue of the ArrayList not being up to date with the HashMap values.","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<p>Currently i am trying to do it using a comparator, the &quot;getCurrentTime()&quot; method return a LocalTime.</p>\n<pre><code>  private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\n  private final Collection&lt;City&gt; cityCollection = cityHashMap.values();\n\n\n  public void sortByDepartureTime() {\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;(cityCollection);\n    sortedList.sort(new CityComparator());\n\n    cityCollection.clear();\n    cityCollection.addAll(sortedList);\n  }\n\n\n  public static class CityComparator implements Comparator&lt;City&gt; {\n    @Override\n    public int compare(City o1, City o2) {\n      return o1.getCurrentTime().compareTo(o2.getCurrentTime());\n    }\n  }\n</code></pre>\n<p>I am getting a</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException</p>\n</blockquote>\n<p>cityCollection.addAll(sortedList);</p>\n<p>I tried using an ArrayList instead of the Collection, but that raised the issue of the ArrayList not being up to date with the HashMap values.</p>\n"},{"tags":["java","arrays","arraylist","methods"],"comments":[{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":1,"creation_date":1701986633,"post_id":77623256,"comment_id":136845852,"body_markdown":"What&#39;s stopping you from inspecting `str` to see if it meets your rules? You can use [String.indexOf()](https://www.w3schools.com/java/ref_string_indexof.asp) to enforce rules #3 and #4.  Just don&#39;t output the string if it doesn&#39;t meet all criteria...","body":"What&#39;s stopping you from inspecting <code>str</code> to see if it meets your rules? You can use <a href=\"https://www.w3schools.com/java/ref_string_indexof.asp\" rel=\"nofollow noreferrer\">String.indexOf()</a> to enforce rules #3 and #4.  Just don&#39;t output the string if it doesn&#39;t meet all criteria..."},{"owner":{"display_name":"user22921001"},"score":0,"creation_date":1701986756,"post_id":77623256,"comment_id":136845880,"body_markdown":"honestly i didn&#39;t know how to use it or what it is. I have exhausted the notions that the teacher gave and have been on this all day trying different loops and stuff. i will read up on that thanks.","body":"honestly i didn&#39;t know how to use it or what it is. I have exhausted the notions that the teacher gave and have been on this all day trying different loops and stuff. i will read up on that thanks."},{"owner":{"account_id":2640559,"reputation":93,"user_id":2284314,"display_name":"JDev"},"score":1,"creation_date":1701994242,"post_id":77623256,"comment_id":136846675,"body_markdown":"Parenthesis placement is really important in these scenarios. I&#39;ll update my answer to include how it evaluates.","body":"Parenthesis placement is really important in these scenarios. I&#39;ll update my answer to include how it evaluates."},{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1702052804,"post_id":77623256,"comment_id":136854169,"body_markdown":"Please share your code attempt as a [mcve].","body":"Please share your code attempt as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054245,"creation_date":1701989877,"answer_id":77623482,"question_id":77623256,"body_markdown":"Your code is correct, in terms of calculating permutations.\r\n\r\nYou&#39;ll just need to check the values, before adding the _String_.\r\n\r\nHere is an example.\r\n\r\n```java\r\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\nString s;\r\nchar w, x, y, z;\r\nfor (w = &#39;a&#39;; w &lt;= &#39;d&#39;; w++)\r\n    for (x = &#39;a&#39;; x &lt;= &#39;d&#39;; x++)\r\n        for (y = &#39;a&#39;; y &lt;= &#39;d&#39;; y++)\r\n            for (z = &#39;a&#39;; z &lt;= &#39;d&#39;; z++) {\r\n                s = &quot;%s%s%s%s&quot;.formatted(w, x, y, z);\r\n                if (s.indexOf(&#39;a&#39;) != -1 &amp;&amp; s.indexOf(&#39;d&#39;) != -1) continue;\r\n                if (w == &#39;b&#39; &amp;&amp; x != &#39;a&#39;) continue;\r\n                if (x == &#39;b&#39; &amp;&amp; y != &#39;a&#39;) continue;\r\n                if (y == &#39;b&#39; &amp;&amp; z != &#39;a&#39;) continue;\r\n                if (z == &#39;b&#39;) continue;\r\n                list.add(s);\r\n            }\r\n```\r\n\r\nOutput\r\n\r\n```none\r\naaaa aaac aaba aaca aacc abaa abac acaa acac acba \r\nacca accc baaa baac baba baca bacc caaa caac caba \r\ncaca cacc cbaa cbac ccaa ccac ccba ccca cccc cccd \r\nccdc ccdd cdcc cdcd cddc cddd dccc dccd dcdc dcdd \r\nddcc ddcd dddc dddd \r\n```","title":"how to find a pattern in java strings","body":"<p>Your code is correct, in terms of calculating permutations.</p>\n<p>You'll just need to check the values, before adding the <em>String</em>.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\nString s;\nchar w, x, y, z;\nfor (w = 'a'; w &lt;= 'd'; w++)\n    for (x = 'a'; x &lt;= 'd'; x++)\n        for (y = 'a'; y &lt;= 'd'; y++)\n            for (z = 'a'; z &lt;= 'd'; z++) {\n                s = &quot;%s%s%s%s&quot;.formatted(w, x, y, z);\n                if (s.indexOf('a') != -1 &amp;&amp; s.indexOf('d') != -1) continue;\n                if (w == 'b' &amp;&amp; x != 'a') continue;\n                if (x == 'b' &amp;&amp; y != 'a') continue;\n                if (y == 'b' &amp;&amp; z != 'a') continue;\n                if (z == 'b') continue;\n                list.add(s);\n            }\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>aaaa aaac aaba aaca aacc abaa abac acaa acac acba \nacca accc baaa baac baba baca bacc caaa caac caba \ncaca cacc cbaa cbac ccaa ccac ccba ccca cccc cccd \nccdc ccdd cdcc cdcd cddc cddd dccc dccd dcdc dcdd \nddcc ddcd dddc dddd \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2640559,"reputation":93,"user_id":2284314,"display_name":"JDev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701994350,"creation_date":1701992795,"answer_id":77623610,"question_id":77623256,"body_markdown":"You are on the right track, as others have stated you just need to validate the output string to ensure it meets your criteria.\r\n\r\n```\r\npublic class Main {\r\n    static StringBuilder valid = new StringBuilder();\r\n    static StringBuilder invalid = new StringBuilder();\r\n\r\n    // START Tracking / formatting vars.\r\n    static int permsPerRow = 10;\r\n    static int invalidNumsAdded = 0;\r\n    static int validPerms = 0;\r\n    static int invalidPerms = 0;\r\n    // END Tracking / formatting vars.\r\n\r\n    public static void main(String[] args) {\r\n        calculatePerms();\r\n    }\r\n\r\n    private static void calculatePerms() {\r\n        char[] chars = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n        int numsAdded = 0;\r\n        for(int i = 0; i &lt; chars.length; i++) {\r\n            for(int j = 0; j &lt; chars.length; j++) {\r\n                for(int k = 0; k &lt; chars.length; k++) {\r\n                    for(int z = 0; z &lt; chars.length; z++) {\r\n                        // Unsure why, but having the last char in the array be the first mutation bothered me, so\r\n                        // I reversed that.\r\n                        String str = chars[z]+&quot;&quot;+chars[k]+&quot;&quot;+chars[j]+&quot;&quot;+chars[i];\r\n                        // We have the string now, we just need to validate it against the provided rules.\r\n                        if(validString(str)) {\r\n                            // I added the chunk below for formatting, this can be ignored.\r\n                            if(numsAdded &gt;= permsPerRow) {\r\n                                valid.append(&quot;\\n&quot;);\r\n                                numsAdded = 0;\r\n                            }\r\n                            // It&#39;s been validated, I append it to the valid StringBuilder.\r\n                            valid.append(str+&quot; &quot;);\r\n                            validPerms++;\r\n                            numsAdded++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;Valid Perms: &quot;+validPerms);\r\n        System.out.println(valid.toString()+&quot;\\n&quot;);\r\n        System.out.println(&quot;Invalid Perms: &quot;+invalidPerms);\r\n        System.out.println(invalid.toString());\r\n    }\r\n\r\n    private static boolean validString(String str) {\r\n        // a and d can&#39;t be in the same string\r\n        // b always has to be followed by a\r\n        if(str.toLowerCase().contains(&quot;a&quot;) &amp;&amp; str.toLowerCase().contains(&quot;d&quot;)) {\r\n            logInvalid(str);\r\n            return false;\r\n        }\r\n        char[] strChars = str.toCharArray();\r\n\r\n        for(int i = 0; i &lt; strChars.length; i++) {\r\n            if(strChars[i] == &#39;b&#39;) {\r\n                // Check to make sure b isn&#39;t the last char in the sequence. If it is, then &#39;a&#39; can&#39;t follow it,\r\n                // and it&#39;s an invalid permutation.\r\n                if(i+1 &gt; strChars.length-1) {\r\n                    logInvalid(str);\r\n                    return false;\r\n                }\r\n                // If the char following b isn&#39;t a then it&#39;s not a valid perm.\r\n                if(strChars[i+1] != &#39;a&#39;) {\r\n                    logInvalid(str);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    // I added an invalid string builder as well, to track the number of invalid combinations, mostly to spot check\r\n    // and ensure the &#39;invalid&#39; permutations were actually breaking the rules.\r\n    private static void logInvalid(String str) {\r\n        if(invalidNumsAdded &gt;= permsPerRow) {\r\n            invalid.append(&quot;\\n&quot;);\r\n            invalidNumsAdded = 0;\r\n        }\r\n        invalid.append(str+&quot; &quot;);\r\n        invalidPerms++;\r\n        invalidNumsAdded++;\r\n    }\r\n}\r\n```\r\n\r\nWhich results in:\r\n```\r\nValid Perms: 44\r\naaaa baaa caaa abaa cbaa acaa ccaa aaba baba caba \r\nacba ccba aaca baca caca acca ccca aaac baac caac \r\nabac cbac acac ccac aacc bacc cacc accc cccc dccc \r\ncdcc ddcc ccdc dcdc cddc dddc cccd dccd cdcd ddcd \r\nccdd dcdd cddd dddd \r\n\r\nInvalid Perms: 212\r\ndaaa bbaa dbaa bcaa dcaa adaa bdaa cdaa ddaa daba \r\nabba bbba cbba dbba bcba dcba adba bdba cdba ddba \r\ndaca abca bbca cbca dbca bcca dcca adca bdca cdca \r\nddca aada bada cada dada abda bbda cbda dbda acda \r\nbcda ccda dcda adda bdda cdda ddda aaab baab caab \r\ndaab abab bbab cbab dbab acab bcab ccab dcab adab \r\nbdab cdab ddab aabb babb cabb dabb abbb bbbb cbbb \r\ndbbb acbb bcbb ccbb dcbb adbb bdbb cdbb ddbb aacb \r\nbacb cacb dacb abcb bbcb cbcb dbcb accb bccb cccb \r\ndccb adcb bdcb cdcb ddcb aadb badb cadb dadb abdb \r\nbbdb cbdb dbdb acdb bcdb ccdb dcdb addb bddb cddb \r\ndddb daac bbac dbac bcac dcac adac bdac cdac ddac \r\naabc babc cabc dabc abbc bbbc cbbc dbbc acbc bcbc \r\nccbc dcbc adbc bdbc cdbc ddbc dacc abcc bbcc cbcc \r\ndbcc bccc adcc bdcc aadc badc cadc dadc abdc bbdc \r\ncbdc dbdc acdc bcdc addc bddc aaad baad caad daad \r\nabad bbad cbad dbad acad bcad ccad dcad adad bdad \r\ncdad ddad aabd babd cabd dabd abbd bbbd cbbd dbbd \r\nacbd bcbd ccbd dcbd adbd bdbd cdbd ddbd aacd bacd \r\ncacd dacd abcd bbcd cbcd dbcd accd bccd adcd bdcd \r\naadd badd cadd dadd abdd bbdd cbdd dbdd acdd bcdd \r\naddd bddd\r\n```\r\n\r\n\r\nUpdate for the evaluation issue in the most recent edit:\r\n```\r\n// Since 2 and 3 evaluate to true (b is present, and the last index of b + 1 is not a (it&#39;s c), this check passes.\r\n//           (1)                ||          (2                  &amp;&amp;                 3)\r\nif( (str.lastIndexOf(&#39;b&#39;) == 3) || (str.lastIndexOf(&quot;b&quot;) != -1) &amp;&amp; (str.charAt(str.lastIndexOf(&#39;b&#39;) + 1) != &#39;a&#39;)) {\r\n// remove these parenthesis   ^    ^  and it works.\r\n}\r\n```","title":"how to find a pattern in java strings","body":"<p>You are on the right track, as others have stated you just need to validate the output string to ensure it meets your criteria.</p>\n<pre><code>public class Main {\n    static StringBuilder valid = new StringBuilder();\n    static StringBuilder invalid = new StringBuilder();\n\n    // START Tracking / formatting vars.\n    static int permsPerRow = 10;\n    static int invalidNumsAdded = 0;\n    static int validPerms = 0;\n    static int invalidPerms = 0;\n    // END Tracking / formatting vars.\n\n    public static void main(String[] args) {\n        calculatePerms();\n    }\n\n    private static void calculatePerms() {\n        char[] chars = {'a', 'b', 'c', 'd'};\n        int numsAdded = 0;\n        for(int i = 0; i &lt; chars.length; i++) {\n            for(int j = 0; j &lt; chars.length; j++) {\n                for(int k = 0; k &lt; chars.length; k++) {\n                    for(int z = 0; z &lt; chars.length; z++) {\n                        // Unsure why, but having the last char in the array be the first mutation bothered me, so\n                        // I reversed that.\n                        String str = chars[z]+&quot;&quot;+chars[k]+&quot;&quot;+chars[j]+&quot;&quot;+chars[i];\n                        // We have the string now, we just need to validate it against the provided rules.\n                        if(validString(str)) {\n                            // I added the chunk below for formatting, this can be ignored.\n                            if(numsAdded &gt;= permsPerRow) {\n                                valid.append(&quot;\\n&quot;);\n                                numsAdded = 0;\n                            }\n                            // It's been validated, I append it to the valid StringBuilder.\n                            valid.append(str+&quot; &quot;);\n                            validPerms++;\n                            numsAdded++;\n                        }\n                    }\n                }\n            }\n        }\n        System.out.println(&quot;Valid Perms: &quot;+validPerms);\n        System.out.println(valid.toString()+&quot;\\n&quot;);\n        System.out.println(&quot;Invalid Perms: &quot;+invalidPerms);\n        System.out.println(invalid.toString());\n    }\n\n    private static boolean validString(String str) {\n        // a and d can't be in the same string\n        // b always has to be followed by a\n        if(str.toLowerCase().contains(&quot;a&quot;) &amp;&amp; str.toLowerCase().contains(&quot;d&quot;)) {\n            logInvalid(str);\n            return false;\n        }\n        char[] strChars = str.toCharArray();\n\n        for(int i = 0; i &lt; strChars.length; i++) {\n            if(strChars[i] == 'b') {\n                // Check to make sure b isn't the last char in the sequence. If it is, then 'a' can't follow it,\n                // and it's an invalid permutation.\n                if(i+1 &gt; strChars.length-1) {\n                    logInvalid(str);\n                    return false;\n                }\n                // If the char following b isn't a then it's not a valid perm.\n                if(strChars[i+1] != 'a') {\n                    logInvalid(str);\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    // I added an invalid string builder as well, to track the number of invalid combinations, mostly to spot check\n    // and ensure the 'invalid' permutations were actually breaking the rules.\n    private static void logInvalid(String str) {\n        if(invalidNumsAdded &gt;= permsPerRow) {\n            invalid.append(&quot;\\n&quot;);\n            invalidNumsAdded = 0;\n        }\n        invalid.append(str+&quot; &quot;);\n        invalidPerms++;\n        invalidNumsAdded++;\n    }\n}\n</code></pre>\n<p>Which results in:</p>\n<pre><code>Valid Perms: 44\naaaa baaa caaa abaa cbaa acaa ccaa aaba baba caba \nacba ccba aaca baca caca acca ccca aaac baac caac \nabac cbac acac ccac aacc bacc cacc accc cccc dccc \ncdcc ddcc ccdc dcdc cddc dddc cccd dccd cdcd ddcd \nccdd dcdd cddd dddd \n\nInvalid Perms: 212\ndaaa bbaa dbaa bcaa dcaa adaa bdaa cdaa ddaa daba \nabba bbba cbba dbba bcba dcba adba bdba cdba ddba \ndaca abca bbca cbca dbca bcca dcca adca bdca cdca \nddca aada bada cada dada abda bbda cbda dbda acda \nbcda ccda dcda adda bdda cdda ddda aaab baab caab \ndaab abab bbab cbab dbab acab bcab ccab dcab adab \nbdab cdab ddab aabb babb cabb dabb abbb bbbb cbbb \ndbbb acbb bcbb ccbb dcbb adbb bdbb cdbb ddbb aacb \nbacb cacb dacb abcb bbcb cbcb dbcb accb bccb cccb \ndccb adcb bdcb cdcb ddcb aadb badb cadb dadb abdb \nbbdb cbdb dbdb acdb bcdb ccdb dcdb addb bddb cddb \ndddb daac bbac dbac bcac dcac adac bdac cdac ddac \naabc babc cabc dabc abbc bbbc cbbc dbbc acbc bcbc \nccbc dcbc adbc bdbc cdbc ddbc dacc abcc bbcc cbcc \ndbcc bccc adcc bdcc aadc badc cadc dadc abdc bbdc \ncbdc dbdc acdc bcdc addc bddc aaad baad caad daad \nabad bbad cbad dbad acad bcad ccad dcad adad bdad \ncdad ddad aabd babd cabd dabd abbd bbbd cbbd dbbd \nacbd bcbd ccbd dcbd adbd bdbd cdbd ddbd aacd bacd \ncacd dacd abcd bbcd cbcd dbcd accd bccd adcd bdcd \naadd badd cadd dadd abdd bbdd cbdd dbdd acdd bcdd \naddd bddd\n</code></pre>\n<p>Update for the evaluation issue in the most recent edit:</p>\n<pre><code>// Since 2 and 3 evaluate to true (b is present, and the last index of b + 1 is not a (it's c), this check passes.\n//           (1)                ||          (2                  &amp;&amp;                 3)\nif( (str.lastIndexOf('b') == 3) || (str.lastIndexOf(&quot;b&quot;) != -1) &amp;&amp; (str.charAt(str.lastIndexOf('b') + 1) != 'a')) {\n// remove these parenthesis   ^    ^  and it works.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5941380,"reputation":4127,"user_id":4672460,"accept_rate":100,"display_name":"Selaka Nanayakkara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702022264,"creation_date":1702022264,"answer_id":77625108,"question_id":77623256,"body_markdown":"    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class StringCombinations {\r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; combinations = generateCombinations();\r\n            \r\n            for (String combination : combinations) {\r\n                System.out.println(combination);\r\n            }\r\n        }\r\n    \r\n        private static List&lt;String&gt; generateCombinations() {\r\n            List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\r\n    \r\n          \r\n            for (char firstChar : &quot;abcd&quot;.toCharArray()) {\r\n                for (char secondChar : &quot;abcd&quot;.toCharArray()) {\r\n                    for (char thirdChar : &quot;abcd&quot;.toCharArray()) {\r\n                        for (char fourthChar : &quot;abcd&quot;.toCharArray()) {\r\n                          \r\n                            if (firstChar != &#39;d&#39; &amp;&amp; fourthChar != &#39;a&#39; &amp;&amp; (secondChar != &#39;b&#39; || thirdChar == &#39;a&#39;)) {\r\n\r\n                                String combination = &quot;&quot; + firstChar + secondChar + thirdChar + fourthChar;\r\n                                combinations.add(combination);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return combinations;\r\n        }\r\n    }\r\n\r\n\r\n&gt; Please find the working sample [here][1]\r\n\r\n\r\n  [1]: https://onlinegdb.com/erOVQ0jm-","title":"how to find a pattern in java strings","body":"<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class StringCombinations {\n    public static void main(String[] args) {\n        List&lt;String&gt; combinations = generateCombinations();\n        \n        for (String combination : combinations) {\n            System.out.println(combination);\n        }\n    }\n\n    private static List&lt;String&gt; generateCombinations() {\n        List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\n\n      \n        for (char firstChar : &quot;abcd&quot;.toCharArray()) {\n            for (char secondChar : &quot;abcd&quot;.toCharArray()) {\n                for (char thirdChar : &quot;abcd&quot;.toCharArray()) {\n                    for (char fourthChar : &quot;abcd&quot;.toCharArray()) {\n                      \n                        if (firstChar != 'd' &amp;&amp; fourthChar != 'a' &amp;&amp; (secondChar != 'b' || thirdChar == 'a')) {\n\n                            String combination = &quot;&quot; + firstChar + secondChar + thirdChar + fourthChar;\n                            combinations.add(combination);\n                        }\n                    }\n                }\n            }\n        }\n\n        return combinations;\n    }\n}\n</code></pre>\n<blockquote>\n<p>Please find the working sample <a href=\"https://onlinegdb.com/erOVQ0jm-\" rel=\"nofollow noreferrer\">here</a></p>\n</blockquote>\n"}],"owner":{"display_name":"user22921001"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1702054245,"creation_date":1701985859,"question_id":77623256,"body_markdown":"i am very new to coding so sorry if my questions are dumb. I was asked by my teacher to write a java program that will show all the possible combinations of the chars &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39; into strings but with these rules:\r\n\r\n1. the strings have to be 4 characters long.\r\n2. letters can repeat in the same string.\r\n3. the characters &#39;a&#39; and &#39;d&#39; can&#39;t be in the same string.\r\n4. the character &#39;b&#39; ALWAYS has to be followed by &#39;a&#39;.\r\n\r\ni started to write a program but i&#39;m stumped.\r\n i have tried using ArrayLists but i couldn&#39;t get it to work. \r\n\r\n\r\n","title":"how to find a pattern in java strings","body":"<p>i am very new to coding so sorry if my questions are dumb. I was asked by my teacher to write a java program that will show all the possible combinations of the chars 'a', 'b', 'c', 'd' into strings but with these rules:</p>\n<ol>\n<li>the strings have to be 4 characters long.</li>\n<li>letters can repeat in the same string.</li>\n<li>the characters 'a' and 'd' can't be in the same string.</li>\n<li>the character 'b' ALWAYS has to be followed by 'a'.</li>\n</ol>\n<p>i started to write a program but i'm stumped.\ni have tried using ArrayLists but i couldn't get it to work.</p>\n"},{"tags":["java","apache-spark","pyspark","apache-spark-sql"],"comments":[{"owner":{"account_id":1145527,"reputation":3387,"user_id":1128392,"accept_rate":90,"display_name":"erwaman"},"score":1,"creation_date":1515598653,"post_id":38753898,"comment_id":83362016,"body_markdown":"The answers at https://stackoverflow.com/questions/37471346/automatically-and-elegantly-flatten-dataframe-in-spark-sql were also helpful.","body":"The answers at <a href=\"https://stackoverflow.com/questions/37471346/automatically-and-elegantly-flatten-dataframe-in-spark-sql\" title=\"automatically and elegantly flatten dataframe in spark sql\">stackoverflow.com/questions/37471346/&hellip;</a> were also helpful."},{"owner":{"account_id":16371898,"reputation":1,"user_id":11824997,"display_name":"TobiStraub"},"score":1,"creation_date":1563888334,"post_id":38753898,"comment_id":100844115,"body_markdown":"a nice solution is also presented here: https://stackoverflow.com/questions/47285871/exploded-struct-in-spark?rq=1","body":"a nice solution is also presented here: <a href=\"https://stackoverflow.com/questions/47285871/exploded-struct-in-spark?rq=1\" title=\"exploded struct in spark\">stackoverflow.com/questions/47285871/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1920397,"reputation":2057,"user_id":1732062,"accept_rate":100,"display_name":"djWann"},"score":16,"creation_date":1470261293,"post_id":38754012,"comment_id":64882410,"body_markdown":"Exception in thread &quot;main&quot; org.apache.spark.sql.AnalysisException: No such struct field *","body":"Exception in thread &quot;main&quot; org.apache.spark.sql.AnalysisException: No such struct field *"},{"owner":{"account_id":1920397,"reputation":2057,"user_id":1732062,"accept_rate":100,"display_name":"djWann"},"score":0,"creation_date":1470261626,"post_id":38754012,"comment_id":64882550,"body_markdown":"but using select on all the columns like df.select(df.col1, df.col2, df.col3) works, so I will accept this answer","body":"but using select on all the columns like df.select(df.col1, df.col2, df.col3) works, so I will accept this answer"},{"owner":{"display_name":"user6022341"},"score":0,"creation_date":1470261707,"post_id":38754012,"comment_id":64882584,"body_markdown":"I was just editing but it is strange. I can use *. Maybe some version issue?","body":"I was just editing but it is strange. I can use *. Maybe some version issue?"},{"owner":{"account_id":1920397,"reputation":2057,"user_id":1732062,"accept_rate":100,"display_name":"djWann"},"score":0,"creation_date":1470262079,"post_id":38754012,"comment_id":64882710,"body_markdown":"Yeah maybe. I&#39;m using spark 1.6.1 and scala 2.10","body":"Yeah maybe. I&#39;m using spark 1.6.1 and scala 2.10"},{"owner":{"account_id":6339270,"reputation":503,"user_id":4934659,"accept_rate":83,"display_name":"SparkleGoat"},"score":0,"creation_date":1506525577,"post_id":38754012,"comment_id":79858785,"body_markdown":"How would you select key or note under the nested struct keyNote?","body":"How would you select key or note under the nested struct keyNote?"},{"owner":{"account_id":18950232,"reputation":80,"user_id":13828121,"display_name":"Madman"},"score":0,"creation_date":1624390723,"post_id":38754012,"comment_id":120345140,"body_markdown":"when I am selecting as df.select(&quot;data.*&#39;), it gives me n*n rows. (Duplicated n rows for each row).\nMy data frame having n-2 distinct rows, so if I put distinct it gives me n-2 result. \nBut I want n results, which is actually present in my data. How can I achieve this using above mentioned select command.","body":"when I am selecting as df.select(&quot;data.*&#39;), it gives me n*n rows. (Duplicated n rows for each row). My data frame having n-2 distinct rows, so if I put distinct it gives me n-2 result.  But I want n results, which is actually present in my data. How can I achieve this using above mentioned select command."}],"tags":[],"owner":{"display_name":"user6022341"},"comment_count":6,"down_vote_count":2,"up_vote_count":132,"is_accepted":true,"score":130,"last_activity_date":1470261663,"creation_date":1470260035,"answer_id":38754012,"question_id":38753898,"body_markdown":"This should work in Spark 1.6 or later:\r\n\r\n    df.select(df.col(&quot;data.*&quot;))\r\n\r\nor\r\n\r\n\r\n    df.select(df.col(&quot;data.id&quot;), df.col(&quot;data.keyNote&quot;), df.col(&quot;data.details&quot;))","title":"How to flatten a struct in a Spark dataframe?","body":"<p>This should work in Spark 1.6 or later:</p>\n\n<pre><code>df.select(df.col(\"data.*\"))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df.select(df.col(\"data.id\"), df.col(\"data.keyNote\"), df.col(\"data.details\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201101,"reputation":21953,"user_id":447344,"accept_rate":44,"display_name":"Thomas Decaux"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1552652608,"creation_date":1491940435,"answer_id":43355059,"question_id":38753898,"body_markdown":"An easy way is to use SQL, you could build a SQL query string to alias nested column as flat ones.\r\n\r\n - Retrieve data-frame schema (`df.schema()`) \r\n - Transform schema to SQL\r\n    (for (field : `schema().fields()`) ...\r\n -  Query:\r\n\r\n        val newDF = sqlContext.sql(&quot;SELECT &quot; + sqlGenerated + &quot; FROM source&quot;)\r\n\r\n \r\n\r\n\r\n\r\nHere is [an example in Java][1].\r\n\r\n(I prefer SQL way, so you can easily test it on Spark-shell and it&#39;s cross-language).\r\n\r\n\r\n  [1]: https://gist.github.com/ebuildy/3de0e2855498e5358e4eed1a4f72ea48","title":"How to flatten a struct in a Spark dataframe?","body":"<p>An easy way is to use SQL, you could build a SQL query string to alias nested column as flat ones.</p>\n\n<ul>\n<li>Retrieve data-frame schema (<code>df.schema()</code>) </li>\n<li>Transform schema to SQL\n(for (field : <code>schema().fields()</code>) ...</li>\n<li><p>Query:</p>\n\n<pre><code>val newDF = sqlContext.sql(\"SELECT \" + sqlGenerated + \" FROM source\")\n</code></pre></li>\n</ul>\n\n<p>Here is <a href=\"https://gist.github.com/ebuildy/3de0e2855498e5358e4eed1a4f72ea48\" rel=\"nofollow noreferrer\">an example in Java</a>.</p>\n\n<p>(I prefer SQL way, so you can easily test it on Spark-shell and it's cross-language).</p>\n"},{"tags":[],"owner":{"account_id":2111235,"reputation":1313,"user_id":1876485,"display_name":"steco"},"comment_count":0,"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1594837988,"creation_date":1522234061,"answer_id":49532496,"question_id":38753898,"body_markdown":"Here is function that is doing what you want and that can deal with multiple nested columns containing columns with same name:\r\n\r\n    import pyspark.sql.functions as F\r\n\r\n    def flatten_df(nested_df):\r\n        flat_cols = [c[0] for c in nested_df.dtypes if c[1][:6] != &#39;struct&#39;]\r\n        nested_cols = [c[0] for c in nested_df.dtypes if c[1][:6] == &#39;struct&#39;]\r\n\r\n        flat_df = nested_df.select(flat_cols +\r\n                                   [F.col(nc+&#39;.&#39;+c).alias(nc+&#39;_&#39;+c)\r\n                                    for nc in nested_cols\r\n                                    for c in nested_df.select(nc+&#39;.*&#39;).columns])\r\n        return flat_df\r\n\r\nBefore:\r\n\r\n    root\r\n     |-- x: string (nullable = true)\r\n     |-- y: string (nullable = true)\r\n     |-- foo: struct (nullable = true)\r\n     |    |-- a: float (nullable = true)\r\n     |    |-- b: float (nullable = true)\r\n     |    |-- c: integer (nullable = true)\r\n     |-- bar: struct (nullable = true)\r\n     |    |-- a: float (nullable = true)\r\n     |    |-- b: float (nullable = true)\r\n     |    |-- c: integer (nullable = true)\r\n\r\nAfter:\r\n\r\n    root\r\n     |-- x: string (nullable = true)\r\n     |-- y: string (nullable = true)\r\n     |-- foo_a: float (nullable = true)\r\n     |-- foo_b: float (nullable = true)\r\n     |-- foo_c: integer (nullable = true)\r\n     |-- bar_a: float (nullable = true)\r\n     |-- bar_b: float (nullable = true)\r\n     |-- bar_c: integer (nullable = true)\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>Here is function that is doing what you want and that can deal with multiple nested columns containing columns with same name:</p>\n<pre><code>import pyspark.sql.functions as F\n\ndef flatten_df(nested_df):\n    flat_cols = [c[0] for c in nested_df.dtypes if c[1][:6] != 'struct']\n    nested_cols = [c[0] for c in nested_df.dtypes if c[1][:6] == 'struct']\n\n    flat_df = nested_df.select(flat_cols +\n                               [F.col(nc+'.'+c).alias(nc+'_'+c)\n                                for nc in nested_cols\n                                for c in nested_df.select(nc+'.*').columns])\n    return flat_df\n</code></pre>\n<p>Before:</p>\n<pre><code>root\n |-- x: string (nullable = true)\n |-- y: string (nullable = true)\n |-- foo: struct (nullable = true)\n |    |-- a: float (nullable = true)\n |    |-- b: float (nullable = true)\n |    |-- c: integer (nullable = true)\n |-- bar: struct (nullable = true)\n |    |-- a: float (nullable = true)\n |    |-- b: float (nullable = true)\n |    |-- c: integer (nullable = true)\n</code></pre>\n<p>After:</p>\n<pre><code>root\n |-- x: string (nullable = true)\n |-- y: string (nullable = true)\n |-- foo_a: float (nullable = true)\n |-- foo_b: float (nullable = true)\n |-- foo_c: integer (nullable = true)\n |-- bar_a: float (nullable = true)\n |-- bar_b: float (nullable = true)\n |-- bar_c: integer (nullable = true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215715,"reputation":3329,"user_id":470517,"accept_rate":86,"display_name":"Aydin K."},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1524149907,"creation_date":1522932908,"answer_id":49672951,"question_id":38753898,"body_markdown":"I generalized the solution from stecos a bit more so the flattening can be done on more than two struct layers deep:\r\n\r\n    def flatten_df(nested_df, layers):\r\n        flat_cols = []\r\n        nested_cols = []\r\n        flat_df = []\r\n    \r\n        flat_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] != &#39;struct&#39;])\r\n        nested_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] == &#39;struct&#39;])\r\n    \r\n        flat_df.append(nested_df.select(flat_cols[0] +\r\n                                   [col(nc+&#39;.&#39;+c).alias(nc+&#39;_&#39;+c)\r\n                                    for nc in nested_cols[0]\r\n                                    for c in nested_df.select(nc+&#39;.*&#39;).columns])\r\n                      )\r\n        for i in range(1, layers):\r\n            print (flat_cols[i-1])\r\n            flat_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] != &#39;struct&#39;])\r\n            nested_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] == &#39;struct&#39;])\r\n    \r\n            flat_df.append(flat_df[i-1].select(flat_cols[i] +\r\n                                    [col(nc+&#39;.&#39;+c).alias(nc+&#39;_&#39;+c)\r\n                                        for nc in nested_cols[i]\r\n                                        for c in flat_df[i-1].select(nc+&#39;.*&#39;).columns])\r\n            )\r\n        \r\n        return flat_df[-1]\r\n\r\n\r\njust call with:\r\n\r\n    my_flattened_df = flatten_df(my_df_having_nested_structs, 3)\r\n\r\n(second parameter is the level of layers to be flattened, in my case it&#39;s 3)\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>I generalized the solution from stecos a bit more so the flattening can be done on more than two struct layers deep:</p>\n\n<pre><code>def flatten_df(nested_df, layers):\n    flat_cols = []\n    nested_cols = []\n    flat_df = []\n\n    flat_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] != 'struct'])\n    nested_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] == 'struct'])\n\n    flat_df.append(nested_df.select(flat_cols[0] +\n                               [col(nc+'.'+c).alias(nc+'_'+c)\n                                for nc in nested_cols[0]\n                                for c in nested_df.select(nc+'.*').columns])\n                  )\n    for i in range(1, layers):\n        print (flat_cols[i-1])\n        flat_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] != 'struct'])\n        nested_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] == 'struct'])\n\n        flat_df.append(flat_df[i-1].select(flat_cols[i] +\n                                [col(nc+'.'+c).alias(nc+'_'+c)\n                                    for nc in nested_cols[i]\n                                    for c in flat_df[i-1].select(nc+'.*').columns])\n        )\n\n    return flat_df[-1]\n</code></pre>\n\n<p>just call with:</p>\n\n<pre><code>my_flattened_df = flatten_df(my_df_having_nested_structs, 3)\n</code></pre>\n\n<p>(second parameter is the level of layers to be flattened, in my case it's 3)</p>\n"},{"comments":[{"owner":{"account_id":718174,"reputation":1284,"user_id":647151,"accept_rate":75,"display_name":"malthe"},"score":1,"creation_date":1614852319,"post_id":56533459,"comment_id":117513712,"body_markdown":"This doesn&#39;t seem to recurse into nested structs inside arrays.","body":"This doesn&#39;t seem to recurse into nested structs inside arrays."},{"owner":{"account_id":3770578,"reputation":372,"user_id":3132919,"accept_rate":100,"display_name":"federicojasson"},"score":0,"creation_date":1614894979,"post_id":56533459,"comment_id":117532779,"body_markdown":"@malthe It won&#39;t. I don&#39;t think it&#39;s feasible to do that, actually. Assuming you use the array index as column name (e.g. array.0.field, array.1.field, ...), you&#39;ll have to know the length of the array beforehand. All these solutions iterate the dataframe structure, which is known at the driver.","body":"@malthe It won&#39;t. I don&#39;t think it&#39;s feasible to do that, actually. Assuming you use the array index as column name (e.g. array.0.field, array.1.field, ...), you&#39;ll have to know the length of the array beforehand. All these solutions iterate the dataframe structure, which is known at the driver."},{"owner":{"account_id":718174,"reputation":1284,"user_id":647151,"accept_rate":75,"display_name":"malthe"},"score":1,"creation_date":1614896738,"post_id":56533459,"comment_id":117533304,"body_markdown":"I ended up figuring out how to do it and posted a script here: https://stackoverflow.com/a/66482320/647151.","body":"I ended up figuring out how to do it and posted a script here: <a href=\"https://stackoverflow.com/a/66482320/647151\">stackoverflow.com/a/66482320/647151</a>."},{"owner":{"account_id":3770578,"reputation":372,"user_id":3132919,"accept_rate":100,"display_name":"federicojasson"},"score":0,"creation_date":1614947800,"post_id":56533459,"comment_id":117547634,"body_markdown":"Oh, so the idea was to keep the array but transform the structures it contains. Nice!","body":"Oh, so the idea was to keep the array but transform the structures it contains. Nice!"},{"owner":{"account_id":304956,"reputation":3550,"user_id":614787,"accept_rate":75,"display_name":"VinnyD"},"score":0,"creation_date":1670826256,"post_id":56533459,"comment_id":131954660,"body_markdown":"how could you prevent certain columns from getting flattened using this approach?","body":"how could you prevent certain columns from getting flattened using this approach?"},{"owner":{"account_id":27657,"reputation":442163,"user_id":73226,"accept_rate":100,"display_name":"Martin Smith"},"score":1,"creation_date":1692882343,"post_id":56533459,"comment_id":135686329,"body_markdown":"If this code is original to this answer then feels like you should have been credited here! https://learn.microsoft.com/en-us/azure/synapse-analytics/how-to-analyze-complex-schema#define-a-function-to-flatten-the-nested-schema","body":"If this code is original to this answer then feels like you should have been credited here! <a href=\"https://learn.microsoft.com/en-us/azure/synapse-analytics/how-to-analyze-complex-schema#define-a-function-to-flatten-the-nested-schema\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/synapse-analytics/&hellip;</a>"},{"owner":{"account_id":3770578,"reputation":372,"user_id":3132919,"accept_rate":100,"display_name":"federicojasson"},"score":1,"creation_date":1692891547,"post_id":56533459,"comment_id":135688577,"body_markdown":"@MartinSmith Yeah, I wrote that code snippet just for this answer.","body":"@MartinSmith Yeah, I wrote that code snippet just for this answer."},{"owner":{"account_id":3770578,"reputation":372,"user_id":3132919,"accept_rate":100,"display_name":"federicojasson"},"score":0,"creation_date":1695920866,"post_id":56533459,"comment_id":136091528,"body_markdown":"https://github.com/MicrosoftDocs/azure-docs/issues/113914","body":"<a href=\"https://github.com/MicrosoftDocs/azure-docs/issues/113914\" rel=\"nofollow noreferrer\">github.com/MicrosoftDocs/azure-docs/issues/113914</a>"}],"tags":[],"owner":{"account_id":3770578,"reputation":372,"user_id":3132919,"accept_rate":100,"display_name":"federicojasson"},"comment_count":8,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1560200354,"creation_date":1560200354,"answer_id":56533459,"question_id":38753898,"body_markdown":"This `flatten_df` version flattens the dataframe at every layer level, using a stack to avoid recursive calls:\r\n\r\n```python\r\nfrom pyspark.sql.functions import col\r\n\r\n\r\ndef flatten_df(nested_df):\r\n    stack = [((), nested_df)]\r\n    columns = []\r\n\r\n    while len(stack) &gt; 0:\r\n        parents, df = stack.pop()\r\n        \r\n        flat_cols = [\r\n            col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\r\n            for c in df.dtypes\r\n            if c[1][:6] != &quot;struct&quot;\r\n        ]\r\n\r\n        nested_cols = [\r\n            c[0]\r\n            for c in df.dtypes\r\n            if c[1][:6] == &quot;struct&quot;\r\n        ]\r\n        \r\n        columns.extend(flat_cols)\r\n        \r\n        for nested_col in nested_cols:\r\n            projected_df = df.select(nested_col + &quot;.*&quot;)\r\n            stack.append((parents + (nested_col,), projected_df))\r\n        \r\n    return nested_df.select(columns)\r\n```\r\n\r\nExample:\r\n\r\n```python\r\nfrom pyspark.sql.types import StringType, StructField, StructType\r\n\r\n\r\nschema = StructType([\r\n    StructField(&quot;some&quot;, StringType()),\r\n\r\n    StructField(&quot;nested&quot;, StructType([\r\n        StructField(&quot;nestedchild1&quot;, StringType()),\r\n        StructField(&quot;nestedchild2&quot;, StringType())\r\n    ])),\r\n\r\n    StructField(&quot;renested&quot;, StructType([\r\n        StructField(&quot;nested&quot;, StructType([\r\n            StructField(&quot;nestedchild1&quot;, StringType()),\r\n            StructField(&quot;nestedchild2&quot;, StringType())\r\n        ]))\r\n    ]))\r\n])\r\n\r\ndata = [\r\n    {\r\n        &quot;some&quot;: &quot;value1&quot;,\r\n        &quot;nested&quot;: {\r\n            &quot;nestedchild1&quot;: &quot;value2&quot;,\r\n            &quot;nestedchild2&quot;: &quot;value3&quot;,\r\n        },\r\n        &quot;renested&quot;: {\r\n            &quot;nested&quot;: {\r\n                &quot;nestedchild1&quot;: &quot;value4&quot;,\r\n                &quot;nestedchild2&quot;: &quot;value5&quot;,\r\n            }\r\n        }\r\n    }\r\n]\r\n\r\ndf = spark.createDataFrame(data, schema)\r\nflat_df = flatten_df(df)\r\nprint(flat_df.collect())\r\n```\r\n\r\nPrints:\r\n```sh\r\n[Row(some=u&#39;value1&#39;, renested_nested_nestedchild1=u&#39;value4&#39;, renested_nested_nestedchild2=u&#39;value5&#39;, nested_nestedchild1=u&#39;value2&#39;, nested_nestedchild2=u&#39;value3&#39;)]\r\n```","title":"How to flatten a struct in a Spark dataframe?","body":"<p>This <code>flatten_df</code> version flattens the dataframe at every layer level, using a stack to avoid recursive calls:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.functions import col\n\n\ndef flatten_df(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n\n    while len(stack) &gt; 0:\n        parents, df = stack.pop()\n\n        flat_cols = [\n            col(\".\".join(parents + (c[0],))).alias(\"_\".join(parents + (c[0],)))\n            for c in df.dtypes\n            if c[1][:6] != \"struct\"\n        ]\n\n        nested_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:6] == \"struct\"\n        ]\n\n        columns.extend(flat_cols)\n\n        for nested_col in nested_cols:\n            projected_df = df.select(nested_col + \".*\")\n            stack.append((parents + (nested_col,), projected_df))\n\n    return nested_df.select(columns)\n</code></pre>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.types import StringType, StructField, StructType\n\n\nschema = StructType([\n    StructField(\"some\", StringType()),\n\n    StructField(\"nested\", StructType([\n        StructField(\"nestedchild1\", StringType()),\n        StructField(\"nestedchild2\", StringType())\n    ])),\n\n    StructField(\"renested\", StructType([\n        StructField(\"nested\", StructType([\n            StructField(\"nestedchild1\", StringType()),\n            StructField(\"nestedchild2\", StringType())\n        ]))\n    ]))\n])\n\ndata = [\n    {\n        \"some\": \"value1\",\n        \"nested\": {\n            \"nestedchild1\": \"value2\",\n            \"nestedchild2\": \"value3\",\n        },\n        \"renested\": {\n            \"nested\": {\n                \"nestedchild1\": \"value4\",\n                \"nestedchild2\": \"value5\",\n            }\n        }\n    }\n]\n\ndf = spark.createDataFrame(data, schema)\nflat_df = flatten_df(df)\nprint(flat_df.collect())\n</code></pre>\n\n<p>Prints:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>[Row(some=u'value1', renested_nested_nestedchild1=u'value4', renested_nested_nestedchild2=u'value5', nested_nestedchild1=u'value2', nested_nestedchild2=u'value3')]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5022921,"reputation":1106,"user_id":4035861,"accept_rate":80,"display_name":"sri hari kali charan Tummala"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579913640,"creation_date":1579913640,"answer_id":59905440,"question_id":38753898,"body_markdown":"below worked for me in spark sql\r\n\r\n```\r\nimport org.apache.spark.sql._\r\nimport org.apache.hadoop.conf.Configuration\r\nimport org.apache.hadoop.fs._\r\nimport org.apache.http.client.methods.HttpGet\r\nimport org.apache.http.impl.client.DefaultHttpClient\r\nimport org.apache.spark.sql.{DataFrame, SaveMode, SparkSession}\r\nimport org.apache.spark.sql.functions._\r\nimport org.apache.spark.sql.types.StructType\r\nimport org.apache.log4j.{Level, Logger}\r\nimport org.apache.spark.rdd.RDD\r\nimport org.apache.spark.sql.types._\r\nimport org.apache.spark.storage.StorageLevel\r\nimport org.apache.spark.sql.functions.{explode, expr, posexplode, when}\r\n\r\nobject StackOverFlowQuestion {\r\n  def main(args: Array[String]): Unit = {\r\n\r\n    val logger = Logger.getLogger(&quot;FlattenTest&quot;)\r\n    Logger.getLogger(&quot;org&quot;).setLevel(Level.WARN)\r\n    Logger.getLogger(&quot;akka&quot;).setLevel(Level.WARN)\r\n\r\n    val spark = SparkSession.builder()\r\n      .appName(&quot;FlattenTest&quot;)\r\n      .config(&quot;spark.sql.warehouse.dir&quot;, &quot;C:\\\\Temp\\\\hive&quot;)\r\n      .master(&quot;local[2]&quot;)\r\n      //.enableHiveSupport()\r\n      .getOrCreate()\r\n    import spark.implicits._\r\n\r\n    val stringTest =\r\n      &quot;&quot;&quot;{\r\n                               &quot;total_count&quot;: 123,\r\n                               &quot;page_size&quot;: 20,\r\n                               &quot;another_id&quot;: &quot;gdbfdbfdbd&quot;,\r\n                               &quot;sen&quot;: [{\r\n                               \t&quot;id&quot;: 123,\r\n                               \t&quot;ses_id&quot;: 12424343,\r\n                               \t&quot;columns&quot;: {\r\n                               \t\t&quot;blah&quot;: &quot;blah&quot;,\r\n                               \t\t&quot;count&quot;: 1234\r\n                               \t},\r\n                               \t&quot;class&quot;: {},\r\n                               \t&quot;class_timestamps&quot;: {},\r\n                               \t&quot;sentence&quot;: &quot;spark is good&quot;\r\n                               }]\r\n                            }\r\n                             &quot;&quot;&quot;\r\n    val result = List(stringTest)\r\n    val githubRdd=spark.sparkContext.makeRDD(result)\r\n    val gitHubDF=spark.read.json(githubRdd)\r\n    gitHubDF.show()\r\n    gitHubDF.printSchema()\r\n\r\n    gitHubDF.registerTempTable(&quot;JsonTable&quot;)\r\n\r\n   spark.sql(&quot;with cte as&quot; +\r\n      &quot;(&quot; +\r\n      &quot;select explode(sen) as senArray  from JsonTable&quot; +\r\n      &quot;), cte_2 as&quot; +\r\n      &quot;(&quot; +\r\n      &quot;select senArray.ses_id,senArray.ses_id,senArray.columns.* from cte&quot; +\r\n      &quot;)&quot; +\r\n      &quot;select * from cte_2&quot;\r\n    ).show()\r\n\r\n    spark.stop()\r\n}\r\n\r\n}\r\n\r\n```\r\n\r\noutput:-\r\n\r\n```\r\n+----------+---------+--------------------+-----------+\r\n|another_id|page_size|                 sen|total_count|\r\n+----------+---------+--------------------+-----------+\r\n|gdbfdbfdbd|       20|[[[blah, 1234], 1...|        123|\r\n+----------+---------+--------------------+-----------+\r\n\r\nroot\r\n |-- another_id: string (nullable = true)\r\n |-- page_size: long (nullable = true)\r\n |-- sen: array (nullable = true)\r\n |    |-- element: struct (containsNull = true)\r\n |    |    |-- columns: struct (nullable = true)\r\n |    |    |    |-- blah: string (nullable = true)\r\n |    |    |    |-- count: long (nullable = true)\r\n |    |    |-- id: long (nullable = true)\r\n |    |    |-- sentence: string (nullable = true)\r\n |    |    |-- ses_id: long (nullable = true)\r\n |-- total_count: long (nullable = true)\r\n\r\n+--------+--------+----+-----+\r\n|  ses_id|  ses_id|blah|count|\r\n+--------+--------+----+-----+\r\n|12424343|12424343|blah| 1234|\r\n+--------+--------+----+-----+\r\n```","title":"How to flatten a struct in a Spark dataframe?","body":"<p>below worked for me in spark sql</p>\n\n<pre><code>import org.apache.spark.sql._\nimport org.apache.hadoop.conf.Configuration\nimport org.apache.hadoop.fs._\nimport org.apache.http.client.methods.HttpGet\nimport org.apache.http.impl.client.DefaultHttpClient\nimport org.apache.spark.sql.{DataFrame, SaveMode, SparkSession}\nimport org.apache.spark.sql.functions._\nimport org.apache.spark.sql.types.StructType\nimport org.apache.log4j.{Level, Logger}\nimport org.apache.spark.rdd.RDD\nimport org.apache.spark.sql.types._\nimport org.apache.spark.storage.StorageLevel\nimport org.apache.spark.sql.functions.{explode, expr, posexplode, when}\n\nobject StackOverFlowQuestion {\n  def main(args: Array[String]): Unit = {\n\n    val logger = Logger.getLogger(\"FlattenTest\")\n    Logger.getLogger(\"org\").setLevel(Level.WARN)\n    Logger.getLogger(\"akka\").setLevel(Level.WARN)\n\n    val spark = SparkSession.builder()\n      .appName(\"FlattenTest\")\n      .config(\"spark.sql.warehouse.dir\", \"C:\\\\Temp\\\\hive\")\n      .master(\"local[2]\")\n      //.enableHiveSupport()\n      .getOrCreate()\n    import spark.implicits._\n\n    val stringTest =\n      \"\"\"{\n                               \"total_count\": 123,\n                               \"page_size\": 20,\n                               \"another_id\": \"gdbfdbfdbd\",\n                               \"sen\": [{\n                                \"id\": 123,\n                                \"ses_id\": 12424343,\n                                \"columns\": {\n                                    \"blah\": \"blah\",\n                                    \"count\": 1234\n                                },\n                                \"class\": {},\n                                \"class_timestamps\": {},\n                                \"sentence\": \"spark is good\"\n                               }]\n                            }\n                             \"\"\"\n    val result = List(stringTest)\n    val githubRdd=spark.sparkContext.makeRDD(result)\n    val gitHubDF=spark.read.json(githubRdd)\n    gitHubDF.show()\n    gitHubDF.printSchema()\n\n    gitHubDF.registerTempTable(\"JsonTable\")\n\n   spark.sql(\"with cte as\" +\n      \"(\" +\n      \"select explode(sen) as senArray  from JsonTable\" +\n      \"), cte_2 as\" +\n      \"(\" +\n      \"select senArray.ses_id,senArray.ses_id,senArray.columns.* from cte\" +\n      \")\" +\n      \"select * from cte_2\"\n    ).show()\n\n    spark.stop()\n}\n\n}\n\n</code></pre>\n\n<p>output:-</p>\n\n<pre><code>+----------+---------+--------------------+-----------+\n|another_id|page_size|                 sen|total_count|\n+----------+---------+--------------------+-----------+\n|gdbfdbfdbd|       20|[[[blah, 1234], 1...|        123|\n+----------+---------+--------------------+-----------+\n\nroot\n |-- another_id: string (nullable = true)\n |-- page_size: long (nullable = true)\n |-- sen: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- columns: struct (nullable = true)\n |    |    |    |-- blah: string (nullable = true)\n |    |    |    |-- count: long (nullable = true)\n |    |    |-- id: long (nullable = true)\n |    |    |-- sentence: string (nullable = true)\n |    |    |-- ses_id: long (nullable = true)\n |-- total_count: long (nullable = true)\n\n+--------+--------+----+-----+\n|  ses_id|  ses_id|blah|count|\n+--------+--------+----+-----+\n|12424343|12424343|blah| 1234|\n+--------+--------+----+-----+\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14617121,"reputation":180,"user_id":10556923,"display_name":"Amrish Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594838618,"creation_date":1594838618,"answer_id":62921755,"question_id":38753898,"body_markdown":"You can use this approach if, you have to covert only struct types.\r\nI would not suggest converting the array, as it could lead to duplicate records.\r\n\r\n    from pyspark.sql.functions import col\r\n    from pyspark.sql.types import StructType\r\n    \r\n    \r\n    def flatten_schema(schema, prefix=&quot;&quot;):\r\n        return_schema = []\r\n        for field in schema.fields:\r\n            if isinstance(field.dataType, StructType):\r\n                if prefix:\r\n                    return_schema = return_schema + flatten_schema(field.dataType, &quot;{}.{}&quot;.format(prefix, field.name))\r\n                else:\r\n                    return_schema = return_schema + flatten_schema(field.dataType, field.name)\r\n            else:\r\n                if prefix:\r\n                    field_path = &quot;{}.{}&quot;.format(prefix, field.name)\r\n                    return_schema.append(col(field_path).alias(field_path.replace(&quot;.&quot;, &quot;_&quot;)))\r\n                else:\r\n                    return_schema.append(field.name)\r\n        return return_schema\r\n\r\nYou can use it as\r\n\r\n    new_schema = flatten_schema(df.schema)\r\n    df1 = df.select(se)\r\n    df1.show()\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>You can use this approach if, you have to covert only struct types.\nI would not suggest converting the array, as it could lead to duplicate records.</p>\n<pre><code>from pyspark.sql.functions import col\nfrom pyspark.sql.types import StructType\n\n\ndef flatten_schema(schema, prefix=&quot;&quot;):\n    return_schema = []\n    for field in schema.fields:\n        if isinstance(field.dataType, StructType):\n            if prefix:\n                return_schema = return_schema + flatten_schema(field.dataType, &quot;{}.{}&quot;.format(prefix, field.name))\n            else:\n                return_schema = return_schema + flatten_schema(field.dataType, field.name)\n        else:\n            if prefix:\n                field_path = &quot;{}.{}&quot;.format(prefix, field.name)\n                return_schema.append(col(field_path).alias(field_path.replace(&quot;.&quot;, &quot;_&quot;)))\n            else:\n                return_schema.append(field.name)\n    return return_schema\n</code></pre>\n<p>You can use it as</p>\n<pre><code>new_schema = flatten_schema(df.schema)\ndf1 = df.select(se)\ndf1.show()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":242988,"reputation":13952,"user_id":514878,"accept_rate":100,"display_name":"FluffyKitten"},"score":1,"creation_date":1600134321,"post_id":63893150,"comment_id":112985201,"body_markdown":"Welcome to Stack Overflow. Code-only answers are discouraged on Stack Overflow because they don&#39;t explain how it solves the problem. Please edit your answer to explain what this code does and how it is more efficient than the other answers as you say it is, so that it is useful to other users with similar issues and they can learn from it.","body":"Welcome to Stack Overflow. Code-only answers are discouraged on Stack Overflow because they don&#39;t explain how it solves the problem. Please edit your answer to explain what this code does and how it is more efficient than the other answers as you say it is, so that it is useful to other users with similar issues and they can learn from it."},{"owner":{"account_id":2533914,"reputation":111,"user_id":2201536,"display_name":"user2201536"},"score":1,"creation_date":1636500189,"post_id":63893150,"comment_id":123573157,"body_markdown":"worked perfect for me. You would get more like if you add more explanation for sure.","body":"worked perfect for me. You would get more like if you add more explanation for sure."},{"owner":{"account_id":5811267,"reputation":998,"user_id":4582240,"display_name":"soMuchToLearnAndShare"},"score":0,"creation_date":1658260128,"post_id":63893150,"comment_id":129006503,"body_markdown":"what is the data type for &quot;parents&quot; @Domenico Di Nicola","body":"what is the data type for &quot;parents&quot; @Domenico Di Nicola"},{"owner":{"account_id":5811267,"reputation":998,"user_id":4582240,"display_name":"soMuchToLearnAndShare"},"score":0,"creation_date":1658267617,"post_id":63893150,"comment_id":129008524,"body_markdown":"I had problems when the column_name includes &#39;dot&#39; in it. i know if it is explicit column name i can use back tick to escape it, but above, i could not do it.","body":"I had problems when the column_name includes &#39;dot&#39; in it. i know if it is explicit column name i can use back tick to escape it, but above, i could not do it."}],"tags":[],"owner":{"account_id":16168135,"reputation":111,"user_id":11672595,"display_name":"Domenico Di Nicola"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1636648972,"creation_date":1600126933,"answer_id":63893150,"question_id":38753898,"body_markdown":"A little more compact and efficient implementation:\r\n\r\nNo need to create list and iterate on them.\r\nYou &quot;act&quot; on fields based on their type (if structures or not).\r\n\r\nyou create a list and iterate on it, if the column is nested (struct) you need to flat it (.*) else you access with dot notation (parent.child) and replace . with _ (parent_child)\r\n\r\n```\r\ndef flatten_df(nested_df):\r\n    stack = [((), nested_df)]\r\n    columns = []\r\n    while len(stack) &gt; 0:\r\n        parents, df = stack.pop()\r\n        for column_name, column_type in df.dtypes:\r\n            if column_type[:6] == &quot;struct&quot;:\r\n                projected_df = df.select(column_name + &quot;.*&quot;)\r\n                stack.append((parents + (column_name,), projected_df))\r\n            else:\r\n                columns.append(col(&quot;.&quot;.join(parents + (column_name,))).alias(&quot;_&quot;.join(parents + (column_name,))))\r\n    return nested_df.select(columns)\r\n```","title":"How to flatten a struct in a Spark dataframe?","body":"<p>A little more compact and efficient implementation:</p>\n<p>No need to create list and iterate on them.\nYou &quot;act&quot; on fields based on their type (if structures or not).</p>\n<p>you create a list and iterate on it, if the column is nested (struct) you need to flat it (.*) else you access with dot notation (parent.child) and replace . with _ (parent_child)</p>\n<pre><code>def flatten_df(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n    while len(stack) &gt; 0:\n        parents, df = stack.pop()\n        for column_name, column_type in df.dtypes:\n            if column_type[:6] == &quot;struct&quot;:\n                projected_df = df.select(column_name + &quot;.*&quot;)\n                stack.append((parents + (column_name,), projected_df))\n            else:\n                columns.append(col(&quot;.&quot;.join(parents + (column_name,))).alias(&quot;_&quot;.join(parents + (column_name,))))\n    return nested_df.select(columns)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15842206,"reputation":258,"user_id":11430389,"display_name":"Raptor0009"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1600918954,"creation_date":1600789750,"answer_id":64013303,"question_id":38753898,"body_markdown":"This is for scala spark.\r\n\r\n```\r\nval totalMainArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\ndef flatten_df_Struct(dfTemp:org.apache.spark.sql.DataFrame,dfTotalOuter:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\r\n{\r\n//dfTemp.printSchema\r\nval totalStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\r\nval mainArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\nfor(totalStructCol &lt;- totalStructCols)\r\n{\r\nval tempArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\ntempArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.*&quot;\r\n//tempArrayBuffer.toSeq.toDF.show(false)\r\nval columnsInside=dfTemp.selectExpr(tempArrayBuffer:_*).columns\r\nfor(column &lt;- columnsInside)\r\nmainArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.${column} as ${totalStructCol.split(&quot;,&quot;)(0)}_${column}&quot;\r\n//mainArrayBuffer.toSeq.toDF.show(false)\r\n}\r\n//dfTemp.selectExpr(mainArrayBuffer:_*).printSchema\r\nval nonStructCols=dfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\r\nfor (nonStructCol &lt;- nonStructCols)\r\ntotalMainArrayBuffer+=s&quot;${nonStructCol.split(&quot;,&quot;)(0).replace(&quot;_&quot;,&quot;.&quot;)} as ${nonStructCol.split(&quot;,&quot;)(0)}&quot; // replacing _ by . in origial select clause if it&#39;s an already nested column \r\ndfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)).size \r\nmatch {\r\ncase value if value ==0 =&gt; dfTotalOuter.selectExpr(totalMainArrayBuffer:_*)\r\ncase _ =&gt; flatten_df_Struct(dfTemp.selectExpr(mainArrayBuffer:_*),dfTotalOuter)\r\n}\r\n}\r\n\r\n\r\ndef flatten_df(dfTemp:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\r\n{\r\nvar totalArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\nval totalNonStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\r\nfor (totalNonStructCol &lt;- totalNonStructCols)\r\ntotalArrayBuffer+=s&quot;${totalNonStructCol.split(&quot;,&quot;)(0)}&quot;\r\ntotalMainArrayBuffer.clear\r\nflatten_df_Struct(dfTemp,dfTemp) // flattened schema is now in totalMainArrayBuffer \r\ntotalArrayBuffer=totalArrayBuffer++totalMainArrayBuffer\r\ndfTemp.selectExpr(totalArrayBuffer:_*)\r\n}\r\n\r\n\r\nflatten_df(dfTotal.withColumn(&quot;tempStruct&quot;,lit(5))).printSchema\r\n\r\n\r\n\r\n```\r\nFile\r\n```\r\n{&quot;num1&quot;:1,&quot;num2&quot;:2,&quot;bool1&quot;:true,&quot;bool2&quot;:false,&quot;double1&quot;:4.5,&quot;double2&quot;:5.6,&quot;str1&quot;:&quot;a&quot;,&quot;str2&quot;:&quot;b&quot;,&quot;arr1&quot;:[3,4,5],&quot;map1&quot;:{&quot;cool&quot;:1,&quot;okay&quot;:2,&quot;normal&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;sa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;900&quot;,&quot;battery&quot;:&quot;165&quot;},&quot;Redline&quot;:&quot;11500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c1&quot;,&quot;Life&quot;:&quot;120&quot;}}}\r\n{&quot;num1&quot;:3,&quot;num2&quot;:4,&quot;bool1&quot;:false,&quot;bool2&quot;:false,&quot;double1&quot;:4.2,&quot;double2&quot;:5.5,&quot;str1&quot;:&quot;u&quot;,&quot;str2&quot;:&quot;n&quot;,&quot;arr1&quot;:[6,7,9],&quot;map1&quot;:{&quot;fast&quot;:1,&quot;medium&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;na&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;800&quot;,&quot;battery&quot;:&quot;150&quot;},&quot;Redline&quot;:&quot;10000&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c2&quot;,&quot;Life&quot;:&quot;100&quot;}}}\r\n{&quot;num1&quot;:8,&quot;num2&quot;:4,&quot;bool1&quot;:true,&quot;bool2&quot;:true,&quot;double1&quot;:5.7,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;t&quot;,&quot;str2&quot;:&quot;k&quot;,&quot;arr1&quot;:[11,12,23],&quot;map1&quot;:{&quot;preserve&quot;:1,&quot;medium&quot;:2,&quot;fast&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;ta&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;950&quot;,&quot;battery&quot;:&quot;170&quot;},&quot;Redline&quot;:&quot;12500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c3&quot;,&quot;Life&quot;:&quot;80&quot;}}}\r\n{&quot;num1&quot;:7,&quot;num2&quot;:9,&quot;bool1&quot;:false,&quot;bool2&quot;:true,&quot;double1&quot;:33.2,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;b&quot;,&quot;str2&quot;:&quot;u&quot;,&quot;arr1&quot;:[12,14,5],&quot;map1&quot;:{&quot;normal&quot;:1,&quot;preserve&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;pa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;920&quot;,&quot;battery&quot;:&quot;160&quot;},&quot;Redline&quot;:&quot;11800&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c4&quot;,&quot;Life&quot;:&quot;70&quot;}}}\r\n```\r\n\r\nBefore:\r\n```\r\nroot\r\n |-- arr1: array (nullable = true)\r\n |    |-- element: long (containsNull = true)\r\n |-- bool1: boolean (nullable = true)\r\n |-- bool2: boolean (nullable = true)\r\n |-- carInfo: struct (nullable = true)\r\n |    |-- Engine: struct (nullable = true)\r\n |    |    |-- Make: string (nullable = true)\r\n |    |    |-- Power: struct (nullable = true)\r\n |    |    |    |-- IC: string (nullable = true)\r\n |    |    |    |-- battery: string (nullable = true)\r\n |    |    |-- Redline: string (nullable = true)\r\n |    |-- Tyres: struct (nullable = true)\r\n |    |    |-- Compound: string (nullable = true)\r\n |    |    |-- Life: string (nullable = true)\r\n |    |    |-- Make: string (nullable = true)\r\n |-- double1: double (nullable = true)\r\n |-- double2: double (nullable = true)\r\n |-- map1: struct (nullable = true)\r\n |    |-- agressive: long (nullable = true)\r\n |    |-- cool: long (nullable = true)\r\n |    |-- fast: long (nullable = true)\r\n |    |-- medium: long (nullable = true)\r\n |    |-- normal: long (nullable = true)\r\n |    |-- okay: long (nullable = true)\r\n |    |-- preserve: long (nullable = true)\r\n |-- num1: long (nullable = true)\r\n |-- num2: long (nullable = true)\r\n |-- str1: string (nullable = true)\r\n |-- str2: string (nullable = true\r\n```\r\n\r\nAfter:\r\n```\r\nroot\r\n |-- arr1: array (nullable = true)\r\n |    |-- element: long (containsNull = true)\r\n |-- bool1: boolean (nullable = true)\r\n |-- bool2: boolean (nullable = true)\r\n |-- double1: double (nullable = true)\r\n |-- double2: double (nullable = true)\r\n |-- num1: long (nullable = true)\r\n |-- num2: long (nullable = true)\r\n |-- str1: string (nullable = true)\r\n |-- str2: string (nullable = true)\r\n |-- map1_agressive: long (nullable = true)\r\n |-- map1_cool: long (nullable = true)\r\n |-- map1_fast: long (nullable = true)\r\n |-- map1_medium: long (nullable = true)\r\n |-- map1_normal: long (nullable = true)\r\n |-- map1_okay: long (nullable = true)\r\n |-- map1_preserve: long (nullable = true)\r\n |-- carInfo_Engine_Make: string (nullable = true)\r\n |-- carInfo_Engine_Redline: string (nullable = true)\r\n |-- carInfo_Tyres_Compound: string (nullable = true)\r\n |-- carInfo_Tyres_Life: string (nullable = true)\r\n |-- carInfo_Tyres_Make: string (nullable = true)\r\n |-- carInfo_Engine_Power_IC: string (nullable = true)\r\n |-- carInfo_Engine_Power_battery: string (nullable = true)\r\n\r\n```\r\nTried for 2 Levels, it worked","title":"How to flatten a struct in a Spark dataframe?","body":"<p>This is for scala spark.</p>\n<pre><code>val totalMainArrayBuffer=collection.mutable.ArrayBuffer[String]()\ndef flatten_df_Struct(dfTemp:org.apache.spark.sql.DataFrame,dfTotalOuter:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\n{\n//dfTemp.printSchema\nval totalStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nval mainArrayBuffer=collection.mutable.ArrayBuffer[String]()\nfor(totalStructCol &lt;- totalStructCols)\n{\nval tempArrayBuffer=collection.mutable.ArrayBuffer[String]()\ntempArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.*&quot;\n//tempArrayBuffer.toSeq.toDF.show(false)\nval columnsInside=dfTemp.selectExpr(tempArrayBuffer:_*).columns\nfor(column &lt;- columnsInside)\nmainArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.${column} as ${totalStructCol.split(&quot;,&quot;)(0)}_${column}&quot;\n//mainArrayBuffer.toSeq.toDF.show(false)\n}\n//dfTemp.selectExpr(mainArrayBuffer:_*).printSchema\nval nonStructCols=dfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nfor (nonStructCol &lt;- nonStructCols)\ntotalMainArrayBuffer+=s&quot;${nonStructCol.split(&quot;,&quot;)(0).replace(&quot;_&quot;,&quot;.&quot;)} as ${nonStructCol.split(&quot;,&quot;)(0)}&quot; // replacing _ by . in origial select clause if it's an already nested column \ndfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)).size \nmatch {\ncase value if value ==0 =&gt; dfTotalOuter.selectExpr(totalMainArrayBuffer:_*)\ncase _ =&gt; flatten_df_Struct(dfTemp.selectExpr(mainArrayBuffer:_*),dfTotalOuter)\n}\n}\n\n\ndef flatten_df(dfTemp:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\n{\nvar totalArrayBuffer=collection.mutable.ArrayBuffer[String]()\nval totalNonStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nfor (totalNonStructCol &lt;- totalNonStructCols)\ntotalArrayBuffer+=s&quot;${totalNonStructCol.split(&quot;,&quot;)(0)}&quot;\ntotalMainArrayBuffer.clear\nflatten_df_Struct(dfTemp,dfTemp) // flattened schema is now in totalMainArrayBuffer \ntotalArrayBuffer=totalArrayBuffer++totalMainArrayBuffer\ndfTemp.selectExpr(totalArrayBuffer:_*)\n}\n\n\nflatten_df(dfTotal.withColumn(&quot;tempStruct&quot;,lit(5))).printSchema\n\n\n\n</code></pre>\n<p>File</p>\n<pre><code>{&quot;num1&quot;:1,&quot;num2&quot;:2,&quot;bool1&quot;:true,&quot;bool2&quot;:false,&quot;double1&quot;:4.5,&quot;double2&quot;:5.6,&quot;str1&quot;:&quot;a&quot;,&quot;str2&quot;:&quot;b&quot;,&quot;arr1&quot;:[3,4,5],&quot;map1&quot;:{&quot;cool&quot;:1,&quot;okay&quot;:2,&quot;normal&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;sa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;900&quot;,&quot;battery&quot;:&quot;165&quot;},&quot;Redline&quot;:&quot;11500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c1&quot;,&quot;Life&quot;:&quot;120&quot;}}}\n{&quot;num1&quot;:3,&quot;num2&quot;:4,&quot;bool1&quot;:false,&quot;bool2&quot;:false,&quot;double1&quot;:4.2,&quot;double2&quot;:5.5,&quot;str1&quot;:&quot;u&quot;,&quot;str2&quot;:&quot;n&quot;,&quot;arr1&quot;:[6,7,9],&quot;map1&quot;:{&quot;fast&quot;:1,&quot;medium&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;na&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;800&quot;,&quot;battery&quot;:&quot;150&quot;},&quot;Redline&quot;:&quot;10000&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c2&quot;,&quot;Life&quot;:&quot;100&quot;}}}\n{&quot;num1&quot;:8,&quot;num2&quot;:4,&quot;bool1&quot;:true,&quot;bool2&quot;:true,&quot;double1&quot;:5.7,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;t&quot;,&quot;str2&quot;:&quot;k&quot;,&quot;arr1&quot;:[11,12,23],&quot;map1&quot;:{&quot;preserve&quot;:1,&quot;medium&quot;:2,&quot;fast&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;ta&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;950&quot;,&quot;battery&quot;:&quot;170&quot;},&quot;Redline&quot;:&quot;12500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c3&quot;,&quot;Life&quot;:&quot;80&quot;}}}\n{&quot;num1&quot;:7,&quot;num2&quot;:9,&quot;bool1&quot;:false,&quot;bool2&quot;:true,&quot;double1&quot;:33.2,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;b&quot;,&quot;str2&quot;:&quot;u&quot;,&quot;arr1&quot;:[12,14,5],&quot;map1&quot;:{&quot;normal&quot;:1,&quot;preserve&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;pa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;920&quot;,&quot;battery&quot;:&quot;160&quot;},&quot;Redline&quot;:&quot;11800&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c4&quot;,&quot;Life&quot;:&quot;70&quot;}}}\n</code></pre>\n<p>Before:</p>\n<pre><code>root\n |-- arr1: array (nullable = true)\n |    |-- element: long (containsNull = true)\n |-- bool1: boolean (nullable = true)\n |-- bool2: boolean (nullable = true)\n |-- carInfo: struct (nullable = true)\n |    |-- Engine: struct (nullable = true)\n |    |    |-- Make: string (nullable = true)\n |    |    |-- Power: struct (nullable = true)\n |    |    |    |-- IC: string (nullable = true)\n |    |    |    |-- battery: string (nullable = true)\n |    |    |-- Redline: string (nullable = true)\n |    |-- Tyres: struct (nullable = true)\n |    |    |-- Compound: string (nullable = true)\n |    |    |-- Life: string (nullable = true)\n |    |    |-- Make: string (nullable = true)\n |-- double1: double (nullable = true)\n |-- double2: double (nullable = true)\n |-- map1: struct (nullable = true)\n |    |-- agressive: long (nullable = true)\n |    |-- cool: long (nullable = true)\n |    |-- fast: long (nullable = true)\n |    |-- medium: long (nullable = true)\n |    |-- normal: long (nullable = true)\n |    |-- okay: long (nullable = true)\n |    |-- preserve: long (nullable = true)\n |-- num1: long (nullable = true)\n |-- num2: long (nullable = true)\n |-- str1: string (nullable = true)\n |-- str2: string (nullable = true\n</code></pre>\n<p>After:</p>\n<pre><code>root\n |-- arr1: array (nullable = true)\n |    |-- element: long (containsNull = true)\n |-- bool1: boolean (nullable = true)\n |-- bool2: boolean (nullable = true)\n |-- double1: double (nullable = true)\n |-- double2: double (nullable = true)\n |-- num1: long (nullable = true)\n |-- num2: long (nullable = true)\n |-- str1: string (nullable = true)\n |-- str2: string (nullable = true)\n |-- map1_agressive: long (nullable = true)\n |-- map1_cool: long (nullable = true)\n |-- map1_fast: long (nullable = true)\n |-- map1_medium: long (nullable = true)\n |-- map1_normal: long (nullable = true)\n |-- map1_okay: long (nullable = true)\n |-- map1_preserve: long (nullable = true)\n |-- carInfo_Engine_Make: string (nullable = true)\n |-- carInfo_Engine_Redline: string (nullable = true)\n |-- carInfo_Tyres_Compound: string (nullable = true)\n |-- carInfo_Tyres_Life: string (nullable = true)\n |-- carInfo_Tyres_Make: string (nullable = true)\n |-- carInfo_Engine_Power_IC: string (nullable = true)\n |-- carInfo_Engine_Power_battery: string (nullable = true)\n\n</code></pre>\n<p>Tried for 2 Levels, it worked</p>\n"},{"comments":[{"owner":{"account_id":5131681,"reputation":7191,"user_id":4443226,"accept_rate":88,"display_name":"Nevermore"},"score":1,"creation_date":1623182064,"post_id":64783597,"comment_id":120004774,"body_markdown":"This works with Spark 3.1.0 too, but it doesn&#39;t preserve the `data` or whatever is parent is selected -- and doesn&#39;t descend if there are further nested structs.","body":"This works with Spark 3.1.0 too, but it doesn&#39;t preserve the <code>data</code> or whatever is parent is selected -- and doesn&#39;t descend if there are further nested structs."},{"owner":{"account_id":18950232,"reputation":80,"user_id":13828121,"display_name":"Madman"},"score":0,"creation_date":1624392180,"post_id":64783597,"comment_id":120345620,"body_markdown":"when I am selecting as df.select(&quot;data.*&#39;), it gives me n*n rows. (Duplicated n rows for each row). My data frame having n-2 distinct rows, so if I put distinct it gives me n-2 result. But I want n results, which is actually present in my data. How can I achieve this using above mentioned select command.","body":"when I am selecting as df.select(&quot;data.*&#39;), it gives me n*n rows. (Duplicated n rows for each row). My data frame having n-2 distinct rows, so if I put distinct it gives me n-2 result. But I want n results, which is actually present in my data. How can I achieve this using above mentioned select command."},{"owner":{"account_id":16421359,"reputation":306,"user_id":11862465,"display_name":"meniluca"},"score":4,"creation_date":1641570102,"post_id":64783597,"comment_id":124845729,"body_markdown":"the dollar can be omitted :)","body":"the dollar can be omitted :)"},{"owner":{"account_id":11712844,"reputation":546,"user_id":8574275,"display_name":"Aman Sehgal"},"score":0,"creation_date":1642664657,"post_id":64783597,"comment_id":125132334,"body_markdown":"Tested with DBR 9.1, Spark 3.1.2 and it works. `df.select(&quot;data.*&quot;)`","body":"Tested with DBR 9.1, Spark 3.1.2 and it works. <code>df.select(&quot;data.*&quot;)</code>"}],"tags":[],"owner":{"account_id":5063041,"reputation":199,"user_id":4063984,"display_name":"Pratik Anurag"},"comment_count":4,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1605086323,"creation_date":1605086323,"answer_id":64783597,"question_id":38753898,"body_markdown":"For Spark 2.4.5, \r\n\r\nwhile,`df.select(df.col(&quot;data.*&quot;))` will give you `org.apache.spark.sql.AnalysisException: No such struct field * in` exception\r\n\r\nthis will work:- \r\n\r\n    df.select($&quot;data.*&quot;)","title":"How to flatten a struct in a Spark dataframe?","body":"<p>For Spark 2.4.5,</p>\n<p>while,<code>df.select(df.col(&quot;data.*&quot;))</code> will give you <code>org.apache.spark.sql.AnalysisException: No such struct field * in</code> exception</p>\n<p>this will work:-</p>\n<pre><code>df.select($&quot;data.*&quot;)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5811267,"reputation":998,"user_id":4582240,"display_name":"soMuchToLearnAndShare"},"score":1,"creation_date":1625902743,"post_id":65256608,"comment_id":120755128,"body_markdown":"This works very well. and i take the &#39;responsibility&#39; of using it carefully, since flatten `array of struct` can produce duplicate rows as others said.","body":"This works very well. and i take the &#39;responsibility&#39; of using it carefully, since flatten <code>array of struct</code> can produce duplicate rows as others said."},{"owner":{"account_id":13198881,"reputation":634,"user_id":9532692,"display_name":"user9532692"},"score":0,"creation_date":1678074703,"post_id":65256608,"comment_id":133456667,"body_markdown":"Could you explain what each for loop is doing? I&#39;m specifically interested in learning why you defined those specific numbers (:5, :6) in the functions.","body":"Could you explain what each for loop is doing? I&#39;m specifically interested in learning why you defined those specific numbers (:5, :6) in the functions."},{"owner":{"account_id":7115866,"reputation":356,"user_id":7131019,"display_name":"Narahari B M"},"score":0,"creation_date":1678075084,"post_id":65256608,"comment_id":133456702,"body_markdown":"&quot;array&quot; -&gt; 5 chars, &quot;struct&quot;-&gt;6 chars","body":"&quot;array&quot; -&gt; 5 chars, &quot;struct&quot;-&gt;6 chars"},{"owner":{"account_id":13198881,"reputation":634,"user_id":9532692,"display_name":"user9532692"},"score":0,"creation_date":1678083314,"post_id":65256608,"comment_id":133457679,"body_markdown":"Ah the length of a string &quot;array&quot; is 5 and &quot;struct&quot; is 6. Thanks!","body":"Ah the length of a string &quot;array&quot; is 5 and &quot;struct&quot; is 6. Thanks!"}],"tags":[],"owner":{"account_id":7115866,"reputation":356,"user_id":7131019,"display_name":"Narahari B M"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1658831586,"creation_date":1607710677,"answer_id":65256608,"question_id":38753898,"body_markdown":"PySpark solution to flatten nested df with both **struct** and **array** types with **any level of depth**. This is improved on this: https://stackoverflow.com/a/56533459/7131019\r\n\r\n    from pyspark.sql.types import *\r\n    from pyspark.sql import functions as f\r\n    \r\n    def flatten_structs(nested_df):\r\n        stack = [((), nested_df)]\r\n        columns = []\r\n    \r\n        while len(stack) &gt; 0:\r\n            \r\n            parents, df = stack.pop()\r\n            \r\n            array_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:5] == &quot;array&quot;\r\n            ]\r\n            \r\n            flat_cols = [\r\n                f.col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\r\n                for c in df.dtypes\r\n                if c[1][:6] != &quot;struct&quot;\r\n            ]\r\n    \r\n            nested_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:6] == &quot;struct&quot;\r\n            ]\r\n            \r\n            columns.extend(flat_cols)\r\n    \r\n            for nested_col in nested_cols:\r\n                projected_df = df.select(nested_col + &quot;.*&quot;)\r\n                stack.append((parents + (nested_col,), projected_df))\r\n            \r\n        return nested_df.select(columns)\r\n    \r\n    def flatten_array_struct_df(df):\r\n        \r\n        array_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:5] == &quot;array&quot;\r\n            ]\r\n        \r\n        while len(array_cols) &gt; 0:\r\n            \r\n            for array_col in array_cols:\r\n                \r\n                cols_to_select = [x for x in df.columns if x != array_col ]\r\n                \r\n                df = df.withColumn(array_col, f.explode(f.col(array_col)))\r\n                \r\n            df = flatten_structs(df)\r\n            \r\n            array_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:5] == &quot;array&quot;\r\n            ]\r\n        return df\r\n\r\n    flat_df = flatten_array_struct_df(df)\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>PySpark solution to flatten nested df with both <strong>struct</strong> and <strong>array</strong> types with <strong>any level of depth</strong>. This is improved on this: <a href=\"https://stackoverflow.com/a/56533459/7131019\">https://stackoverflow.com/a/56533459/7131019</a></p>\n<pre><code>from pyspark.sql.types import *\nfrom pyspark.sql import functions as f\n\ndef flatten_structs(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n\n    while len(stack) &gt; 0:\n        \n        parents, df = stack.pop()\n        \n        array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n        \n        flat_cols = [\n            f.col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\n            for c in df.dtypes\n            if c[1][:6] != &quot;struct&quot;\n        ]\n\n        nested_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:6] == &quot;struct&quot;\n        ]\n        \n        columns.extend(flat_cols)\n\n        for nested_col in nested_cols:\n            projected_df = df.select(nested_col + &quot;.*&quot;)\n            stack.append((parents + (nested_col,), projected_df))\n        \n    return nested_df.select(columns)\n\ndef flatten_array_struct_df(df):\n    \n    array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n    \n    while len(array_cols) &gt; 0:\n        \n        for array_col in array_cols:\n            \n            cols_to_select = [x for x in df.columns if x != array_col ]\n            \n            df = df.withColumn(array_col, f.explode(f.col(array_col)))\n            \n        df = flatten_structs(df)\n        \n        array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n    return df\n\nflat_df = flatten_array_struct_df(df)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8408393,"reputation":1,"user_id":6311188,"display_name":"Raj ks"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629113434,"creation_date":1629113434,"answer_id":68802060,"question_id":38753898,"body_markdown":"We used https://github.com/lvhuyen/SparkAid It works to any Level\r\n\r\nfrom sparkaid import flatten\r\n\r\nflatten(df_nested_B).printSchema()","title":"How to flatten a struct in a Spark dataframe?","body":"<p>We used <a href=\"https://github.com/lvhuyen/SparkAid\" rel=\"nofollow noreferrer\">https://github.com/lvhuyen/SparkAid</a> It works to any Level</p>\n<p>from sparkaid import flatten</p>\n<p>flatten(df_nested_B).printSchema()</p>\n"},{"tags":[],"owner":{"account_id":23147902,"reputation":21,"user_id":17250408,"display_name":"V_K"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637311512,"creation_date":1637311512,"answer_id":70032053,"question_id":38753898,"body_markdown":"Based on https://stackoverflow.com/a/49532496/17250408\r\nhere is solution for `struct` and `array` fields with multilevel nesting\r\n\r\n    from pyspark.sql.functions import col, explode\r\n    \r\n    \r\n    def type_cols(df_dtypes, filter_type):\r\n        cols = []\r\n        for col_name, col_type in df_dtypes:\r\n            if col_type.startswith(filter_type):\r\n                cols.append(col_name)\r\n        return cols\r\n    \r\n    \r\n    def flatten_df(nested_df, sep=&#39;_&#39;):\r\n        nested_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\r\n        flatten_cols = [fc for fc, _ in nested_df.dtypes if fc not in nested_cols]\r\n        for nc in nested_cols:\r\n            for cc in nested_df.select(f&quot;{nc}.*&quot;).columns:\r\n                if sep is None:\r\n                    flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{cc}&quot;))\r\n                else:\r\n                    flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{nc}{sep}{cc}&quot;))\r\n        return nested_df.select(flatten_cols)\r\n    \r\n    \r\n    def explode_df(nested_df):\r\n        nested_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\r\n        exploded_df = nested_df\r\n        for nc in nested_cols:\r\n            exploded_df = exploded_df.withColumn(nc, explode(col(nc)))\r\n        return exploded_df\r\n    \r\n    \r\n    def flatten_explode_df(nested_df):\r\n        df = nested_df\r\n        struct_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\r\n        array_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\r\n        if struct_cols:\r\n            df = flatten_df(df)\r\n            return flatten_explode_df(df)\r\n        if array_cols:\r\n            df = explode_df(df)\r\n            return flatten_explode_df(df)\r\n        return df\r\n    \r\n    \r\n    df = flatten_explode_df(nested_df)\r\n\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>Based on <a href=\"https://stackoverflow.com/a/49532496/17250408\">https://stackoverflow.com/a/49532496/17250408</a>\nhere is solution for <code>struct</code> and <code>array</code> fields with multilevel nesting</p>\n<pre><code>from pyspark.sql.functions import col, explode\n\n\ndef type_cols(df_dtypes, filter_type):\n    cols = []\n    for col_name, col_type in df_dtypes:\n        if col_type.startswith(filter_type):\n            cols.append(col_name)\n    return cols\n\n\ndef flatten_df(nested_df, sep='_'):\n    nested_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\n    flatten_cols = [fc for fc, _ in nested_df.dtypes if fc not in nested_cols]\n    for nc in nested_cols:\n        for cc in nested_df.select(f&quot;{nc}.*&quot;).columns:\n            if sep is None:\n                flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{cc}&quot;))\n            else:\n                flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{nc}{sep}{cc}&quot;))\n    return nested_df.select(flatten_cols)\n\n\ndef explode_df(nested_df):\n    nested_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\n    exploded_df = nested_df\n    for nc in nested_cols:\n        exploded_df = exploded_df.withColumn(nc, explode(col(nc)))\n    return exploded_df\n\n\ndef flatten_explode_df(nested_df):\n    df = nested_df\n    struct_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\n    array_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\n    if struct_cols:\n        df = flatten_df(df)\n        return flatten_explode_df(df)\n    if array_cols:\n        df = explode_df(df)\n        return flatten_explode_df(df)\n    return df\n\n\ndf = flatten_explode_df(nested_df)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10125658,"reputation":4894,"user_id":7481110,"display_name":"Jeffrey Kilelo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054216,"creation_date":1676674441,"answer_id":75489933,"question_id":38753898,"body_markdown":"If you have a mix of multi-level nested structs and arrays, the code below will help.\r\n\r\nThe code defines a class called `NestedDF` that can be used to flatten a mix of nested structs and nested arrays in a PySpark dataframe.\r\n\r\n**In a hurry?** Here&#39;s One-Liner showing how to use the code right-away:\r\n\r\n   `nested_df = NestedDF(my_df).flattened_df` ...just replace `my_df` with your pyspark data_frame\r\n\r\n    \r\n        from pyspark.sql.functions import col, size\r\n        from pyspark.sql.types import ArrayType\r\n\r\n        class NestedDF:\r\n        &quot;&quot;&quot;A class for flattening nested dataframes in PySpark.&quot;&quot;&quot;\r\n\r\n        def __init__(self, nested_df):\r\n            &quot;&quot;&quot;\r\n            Args:\r\n                nested_df (pyspark.sql.dataframe.DataFrame): Nested dataframe.\r\n            &quot;&quot;&quot;\r\n\r\n            self.nested_df = nested_df\r\n            self.flattened_struct_df = self.flatten_struct_df()\r\n            self.flattened_df = self.flatten_array_df()\r\n\r\n        def flatten_array_df(self):\r\n            &quot;&quot;&quot;Flatten a nested array dataframe into a single level dataframe.\r\n\r\n            Returns:\r\n                pyspark.sql.dataframe.DataFrame: Flattened dataframe.\r\n\r\n            &quot;&quot;&quot;\r\n            cols = self.flattened_struct_df.columns\r\n            for col_name in cols:\r\n                if isinstance(self.flattened_struct_df.schema[col_name].dataType, ArrayType):\r\n                    array_len = self.flattened_struct_df.select(size(col(col_name)).alias(&quot;array_len&quot;)).collect()[0][&quot;array_len&quot;]\r\n                    for i in range(array_len):\r\n                        self.flattened_struct_df = self.flattened_struct_df.withColumn(col_name + &quot;_&quot; + str(i), self.flattened_struct_df[col_name].getItem(i))\r\n                    self.flattened_struct_df = self.flattened_struct_df.drop(col_name)\r\n            return self.flattened_struct_df\r\n\r\n        def flatten_struct_df(self):\r\n            &quot;&quot;&quot;Flatten a nested dataframe into a single level dataframe.\r\n            Returns:\r\n                pyspark.sql.dataframe.DataFrame: Flattened dataframe.\r\n            &quot;&quot;&quot;\r\n            stack=[((), self.nested_df)]\r\n            columns=[]\r\n            while len(stack)&gt;0:\r\n                parents, df=stack.pop()\r\n                for col_name, col_type in df.dtypes:\r\n                    if col_type.startswith(&#39;struct&#39;):\r\n                        stack.append((parents+(col_name,), df.select(col_name+&quot;.*&quot;)))\r\n                    else:\r\n                        columns.append(col(&quot;.&quot;.join(parents+(col_name,))).alias(&quot;_&quot;.join(parents+(col_name,))))\r\n            return self.nested_df.select(columns)\r\n\r\n    \r\n\r\n\r\n**Explanation:**\r\n\r\n\r\n\r\nThe class has two methods: `flatten_array_df()` and `flatten_struct_df()`.\r\n\r\n`flatten_array_df()` flattens a nested array dataframe into a single-level dataframe. It first calls the `flatten_struct_df()` method to convert any nested structs in the dataframe into a single-level dataframe. Then, it iterates over the columns of the resulting dataframe and checks if each column contains an array. If a column contains an array, it calculates the length of the array and then iterates over each element of the array. For each element, it creates a new column in the dataframe with a name that combines the original column name and the index of the element. Finally, it drops the original column and returns the resulting flattened dataframe.\r\n\r\n\r\n\r\n`flatten_struct_df()` flattens a nested dataframe that contains structs into a single-level dataframe. It first creates an empty stack and adds a tuple containing an empty tuple and the input nested dataframe to the stack. It then iteratively pops the top tuple from the stack and checks if each column of the corresponding dataframe contains a struct. If a column contains a struct, it adds a new tuple to the stack that contains the original column name as well as the struct&#39;s columns, and selects only those columns from the original dataframe. If a column does not contain a struct, it constructs a new column name by combining the column names of all of its parent structs and the original column name, and adds the resulting column to a list. Finally, it selects the columns in the list and returns the resulting flattened dataframe.\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>If you have a mix of multi-level nested structs and arrays, the code below will help.</p>\n<p>The code defines a class called <code>NestedDF</code> that can be used to flatten a mix of nested structs and nested arrays in a PySpark dataframe.</p>\n<p><strong>In a hurry?</strong> Here's One-Liner showing how to use the code right-away:</p>\n<p><code>nested_df = NestedDF(my_df).flattened_df</code> ...just replace <code>my_df</code> with your pyspark data_frame</p>\n<pre><code>    from pyspark.sql.functions import col, size\n    from pyspark.sql.types import ArrayType\n\n    class NestedDF:\n    &quot;&quot;&quot;A class for flattening nested dataframes in PySpark.&quot;&quot;&quot;\n\n    def __init__(self, nested_df):\n        &quot;&quot;&quot;\n        Args:\n            nested_df (pyspark.sql.dataframe.DataFrame): Nested dataframe.\n        &quot;&quot;&quot;\n\n        self.nested_df = nested_df\n        self.flattened_struct_df = self.flatten_struct_df()\n        self.flattened_df = self.flatten_array_df()\n\n    def flatten_array_df(self):\n        &quot;&quot;&quot;Flatten a nested array dataframe into a single level dataframe.\n\n        Returns:\n            pyspark.sql.dataframe.DataFrame: Flattened dataframe.\n\n        &quot;&quot;&quot;\n        cols = self.flattened_struct_df.columns\n        for col_name in cols:\n            if isinstance(self.flattened_struct_df.schema[col_name].dataType, ArrayType):\n                array_len = self.flattened_struct_df.select(size(col(col_name)).alias(&quot;array_len&quot;)).collect()[0][&quot;array_len&quot;]\n                for i in range(array_len):\n                    self.flattened_struct_df = self.flattened_struct_df.withColumn(col_name + &quot;_&quot; + str(i), self.flattened_struct_df[col_name].getItem(i))\n                self.flattened_struct_df = self.flattened_struct_df.drop(col_name)\n        return self.flattened_struct_df\n\n    def flatten_struct_df(self):\n        &quot;&quot;&quot;Flatten a nested dataframe into a single level dataframe.\n        Returns:\n            pyspark.sql.dataframe.DataFrame: Flattened dataframe.\n        &quot;&quot;&quot;\n        stack=[((), self.nested_df)]\n        columns=[]\n        while len(stack)&gt;0:\n            parents, df=stack.pop()\n            for col_name, col_type in df.dtypes:\n                if col_type.startswith('struct'):\n                    stack.append((parents+(col_name,), df.select(col_name+&quot;.*&quot;)))\n                else:\n                    columns.append(col(&quot;.&quot;.join(parents+(col_name,))).alias(&quot;_&quot;.join(parents+(col_name,))))\n        return self.nested_df.select(columns)\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p>The class has two methods: <code>flatten_array_df()</code> and <code>flatten_struct_df()</code>.</p>\n<p><code>flatten_array_df()</code> flattens a nested array dataframe into a single-level dataframe. It first calls the <code>flatten_struct_df()</code> method to convert any nested structs in the dataframe into a single-level dataframe. Then, it iterates over the columns of the resulting dataframe and checks if each column contains an array. If a column contains an array, it calculates the length of the array and then iterates over each element of the array. For each element, it creates a new column in the dataframe with a name that combines the original column name and the index of the element. Finally, it drops the original column and returns the resulting flattened dataframe.</p>\n<p><code>flatten_struct_df()</code> flattens a nested dataframe that contains structs into a single-level dataframe. It first creates an empty stack and adds a tuple containing an empty tuple and the input nested dataframe to the stack. It then iteratively pops the top tuple from the stack and checks if each column of the corresponding dataframe contains a struct. If a column contains a struct, it adds a new tuple to the stack that contains the original column name as well as the struct's columns, and selects only those columns from the original dataframe. If a column does not contain a struct, it constructs a new column name by combining the column names of all of its parent structs and the original column name, and adds the resulting column to a list. Finally, it selects the columns in the list and returns the resulting flattened dataframe.</p>\n"},{"tags":[],"owner":{"account_id":21091776,"reputation":11,"user_id":15503520,"display_name":"shivam kumar_092"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683525768,"creation_date":1683525768,"answer_id":76197871,"question_id":38753898,"body_markdown":"###### It handles struct and array type both , whether you wants your array type as column or you want left it as it is. ######\r\n\r\n    def new_flatten(df, need_as_column):\r\n    stack, col_arr = [], []\r\n    stack.append((df.schema.fields, &#39;&#39;, df))\r\n    while len(stack) &gt; 0:\r\n        arr, curr_name, curr_col = stack.pop()\r\n        if curr_name != &#39;&#39;:\r\n            curr_name += &#39;_&#39;\r\n        for x in arr:\r\n            if str(x.dataType).startswith(&#39;StructType&#39;):\r\n                stack.append((x.dataType.fields, curr_name+x.name, curr_col[x.name]))\r\n            elif str(x.dataType).startswith(&#39;ArrayType&#39;):\r\n                if need_as_column:\r\n                    elem_type = str(x.dataType.elementType)\r\n                    length = df.select(size(curr_col[x.name]).alias(&#39;my_size&#39;)).agg(max(&#39;my_size&#39;)).head()[0]\r\n                    for i in range(length):\r\n                        if elem_type.startswith(&#39;StructType&#39;):\r\n                            stack.append((x.dataType.elementType.fields, curr_name + x.name + &#39;_&#39; + str(i), curr_col[x.name][i]))\r\n                        else:\r\n                            col_arr.append(curr_col[x.name].getItem(i).alias((curr_name + x.name + &#39;_&#39; + str(i)).lower())) \r\n                else:\r\n                    col_arr.append(curr_col[x.name].alias(curr_name+x.name))\r\n            else:\r\n                col_arr.append(curr_col[x.name].alias(curr_name+x.name))\r\n    return df.select(col_arr)","title":"How to flatten a struct in a Spark dataframe?","body":"<h6>It handles struct and array type both , whether you wants your array type as column or you want left it as it is.</h6>\n<pre><code>def new_flatten(df, need_as_column):\nstack, col_arr = [], []\nstack.append((df.schema.fields, '', df))\nwhile len(stack) &gt; 0:\n    arr, curr_name, curr_col = stack.pop()\n    if curr_name != '':\n        curr_name += '_'\n    for x in arr:\n        if str(x.dataType).startswith('StructType'):\n            stack.append((x.dataType.fields, curr_name+x.name, curr_col[x.name]))\n        elif str(x.dataType).startswith('ArrayType'):\n            if need_as_column:\n                elem_type = str(x.dataType.elementType)\n                length = df.select(size(curr_col[x.name]).alias('my_size')).agg(max('my_size')).head()[0]\n                for i in range(length):\n                    if elem_type.startswith('StructType'):\n                        stack.append((x.dataType.elementType.fields, curr_name + x.name + '_' + str(i), curr_col[x.name][i]))\n                    else:\n                        col_arr.append(curr_col[x.name].getItem(i).alias((curr_name + x.name + '_' + str(i)).lower())) \n            else:\n                col_arr.append(curr_col[x.name].alias(curr_name+x.name))\n        else:\n            col_arr.append(curr_col[x.name].alias(curr_name+x.name))\nreturn df.select(col_arr)\n</code></pre>\n"}],"owner":{"account_id":1920397,"reputation":2057,"user_id":1732062,"accept_rate":100,"display_name":"djWann"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152467,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":38754012,"answer_count":15,"score":77,"last_activity_date":1702054216,"creation_date":1470259479,"question_id":38753898,"body_markdown":"I have a dataframe with the following structure:\r\n\r\n     |-- data: struct (nullable = true)\r\n     |    |-- id: long (nullable = true)\r\n     |    |-- keyNote: struct (nullable = true)\r\n     |    |    |-- key: string (nullable = true)\r\n     |    |    |-- note: string (nullable = true)\r\n     |    |-- details: map (nullable = true)\r\n     |    |    |-- key: string\r\n     |    |    |-- value: string (valueContainsNull = true)\r\n\r\nHow it is possible to flatten the structure and create a new dataframe:\r\n\r\n         |-- id: long (nullable = true)\r\n         |-- keyNote: struct (nullable = true)\r\n         |    |-- key: string (nullable = true)\r\n         |    |-- note: string (nullable = true)\r\n         |-- details: map (nullable = true)\r\n         |    |-- key: string\r\n         |    |-- value: string (valueContainsNull = true)\r\n\r\nIs there something like explode, but for structs?","title":"How to flatten a struct in a Spark dataframe?","body":"<p>I have a dataframe with the following structure:</p>\n\n<pre><code> |-- data: struct (nullable = true)\n |    |-- id: long (nullable = true)\n |    |-- keyNote: struct (nullable = true)\n |    |    |-- key: string (nullable = true)\n |    |    |-- note: string (nullable = true)\n |    |-- details: map (nullable = true)\n |    |    |-- key: string\n |    |    |-- value: string (valueContainsNull = true)\n</code></pre>\n\n<p>How it is possible to flatten the structure and create a new dataframe:</p>\n\n<pre><code>     |-- id: long (nullable = true)\n     |-- keyNote: struct (nullable = true)\n     |    |-- key: string (nullable = true)\n     |    |-- note: string (nullable = true)\n     |-- details: map (nullable = true)\n     |    |-- key: string\n     |    |-- value: string (valueContainsNull = true)\n</code></pre>\n\n<p>Is there something like explode, but for structs?</p>\n"},{"tags":["java","spring","tomcat","smtp","ubuntu-22.04"],"owner":{"account_id":29842711,"reputation":1,"user_id":22870489,"display_name":"OzanD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702053385,"creation_date":1701905676,"question_id":77616901,"body_markdown":"I have a project created in Tomcat 7 / jdk1.7.0_21 / Spring Framework 4.0.1. I recently reinstalled it using Tomcat 8.0.3 / openjdk1.8.0_382 on Ubuntu 22.04. Everything works fine, except the email.\r\n&lt;br /&gt;I use Spring JavaMailSender to send emails using SMTP protocol. This configuration works very well through localhost:\r\n\r\n```\r\n    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n        &lt;property name=&quot;host&quot; value=&quot;smtp.office365.com&quot;/&gt;\r\n        &lt;property name=&quot;port&quot; value=&quot;587&quot;/&gt;\r\n        &lt;property name=&quot;protocol&quot; value=&quot;smtp&quot;/&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;example@outlook.es&quot;/&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\r\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.starttls.required&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.transport.protocol&quot;&gt;smtp&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.office365.com&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.protocols&quot;&gt;TLSv1.2&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.timeout&quot;&gt;1000&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.debug&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\r\n                &lt;property name=&quot;from&quot; value=&quot;example@outlook.es&quot;&gt;&lt;/property&gt;\r\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\nBut when I try it over the server the emails never arrive.\r\n&lt;br /&gt;I was having trouble connecting to smtp.office365.com over IPv6. When I made changes to gai.conf file, I started getting a 220 message.\r\n&lt;br /&gt;I think the 587 port is open, because I receive the 220 message and can send emails through the sSMTP program I installed to try, but even though I opened it in UFW, the 587/tcp port appears to be closed.\r\n\r\n```\r\n$ nmap -p 587 example.com\r\nPORT    STATE  SERVICE\r\n587/tcp closed submission\r\n```\r\n\r\nI suspect that the problem is caused by the difference between Java versions, but despite trying for a long time, I could not solve the problem.\r\n&lt;br /&gt;I will be grateful if you could help me.\r\n\r\n\r\n**EDIT:**\r\n&lt;br /&gt;When I tested SMTP with telnet and openssl, Outlook and Gmail gave errors, but I was able to send email with Yandex.\r\n\r\n```\r\n$ openssl s_client -connect smtp.yandex.com:465 -quiet\r\ndepth=2 OU = GlobalSign Root CA - R3, O = GlobalSign, CN = GlobalSign\r\nverify return:1\r\ndepth=1 C = BE, O = GlobalSign nv-sa, CN = GlobalSign RSA OV SSL CA 2018\r\nverify return:1\r\ndepth=0 C = RU, ST = Moscow, L = Moscow, O = Yandex LLC, CN = smtp.yandex.ru\r\nverify return:1\r\n220 mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net (Want to use Yandex.Mail for your domain? Visit http://pdd.yandex.ru) 1702031110-APb1qDNXu0U0\r\nEHLO example.com\r\n250-mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net\r\n250-8BITMIME\r\n250-PIPELINING\r\n250-SIZE 53477376\r\n250-STARTTLS\r\n250-AUTH LOGIN PLAIN XOAUTH2\r\n250-DSN\r\n250 ENHANCEDSTATUSCODES\r\nAUTH PLAIN AGluZm9AecWx0aW1zYWhkjgfjUTNvbQBkb2Jid2R1d255eWlxbWRv\r\n235 2.7.0 Authentication successful. 1702031132-APb1qDNXu0U0\r\nMAIL FROM: info@example.com\r\n250 2.1.0 &lt;info@example.com&gt; ok 1702031142-APb1qDNXu0U0-mV4GqJPK\r\nRCPT TO: info@example.com\r\n250 2.1.5 &lt;info@example.com&gt; recipient ok 1702031152-APb1qDNXu0U0-mV4GqJPK\r\nDATA\r\n354 Start mail input, end with &lt;CRLF&gt;.&lt;CRLF&gt;\r\nFrom: info@example.com\r\nTo: info@example.com\r\nSubject: Email client recommendation\r\nI&#39;m currently using openssl to send emails. Do you know if there are any good desktop applications that can send emails?\r\n.\r\n250 2.0.0 Ok: queued on mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net 1702031214-APp1qKnXu0U0-mV4GcJPK\r\n```\r\n\r\nSo I changed the JavaMailSender configuration as follows, but it still doesn&#39;t work.\r\n\r\n```\r\n    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n        &lt;property name=&quot;host&quot; value=&quot;smtp.yandex.com&quot;/&gt;\r\n        &lt;property name=&quot;port&quot; value=&quot;465&quot;/&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;info@example.com&quot;/&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\r\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.enable&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.auth.mechanisms&quot;&gt;LOGIN PLAIN&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.yandex.com&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\t\t\r\n                &lt;property name=&quot;from&quot; value=&quot;info@example.com&quot;&gt;&lt;/property&gt;\r\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\nWhere am I making a mistake?\r\n","title":"Spring JavaMailSender not sending email via server","body":"<p>I have a project created in Tomcat 7 / jdk1.7.0_21 / Spring Framework 4.0.1. I recently reinstalled it using Tomcat 8.0.3 / openjdk1.8.0_382 on Ubuntu 22.04. Everything works fine, except the email.\n<br />I use Spring JavaMailSender to send emails using SMTP protocol. This configuration works very well through localhost:</p>\n<pre><code>    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;smtp.office365.com&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;587&quot;/&gt;\n        &lt;property name=&quot;protocol&quot; value=&quot;smtp&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;example@outlook.es&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.starttls.required&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.transport.protocol&quot;&gt;smtp&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.office365.com&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.protocols&quot;&gt;TLSv1.2&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.timeout&quot;&gt;1000&lt;/prop&gt;\n                &lt;prop key=&quot;mail.debug&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\n                &lt;property name=&quot;from&quot; value=&quot;example@outlook.es&quot;&gt;&lt;/property&gt;\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>But when I try it over the server the emails never arrive.\n<br />I was having trouble connecting to smtp.office365.com over IPv6. When I made changes to gai.conf file, I started getting a 220 message.\n<br />I think the 587 port is open, because I receive the 220 message and can send emails through the sSMTP program I installed to try, but even though I opened it in UFW, the 587/tcp port appears to be closed.</p>\n<pre><code>$ nmap -p 587 example.com\nPORT    STATE  SERVICE\n587/tcp closed submission\n</code></pre>\n<p>I suspect that the problem is caused by the difference between Java versions, but despite trying for a long time, I could not solve the problem.\n<br />I will be grateful if you could help me.</p>\n<p><strong>EDIT:</strong>\n<br />When I tested SMTP with telnet and openssl, Outlook and Gmail gave errors, but I was able to send email with Yandex.</p>\n<pre><code>$ openssl s_client -connect smtp.yandex.com:465 -quiet\ndepth=2 OU = GlobalSign Root CA - R3, O = GlobalSign, CN = GlobalSign\nverify return:1\ndepth=1 C = BE, O = GlobalSign nv-sa, CN = GlobalSign RSA OV SSL CA 2018\nverify return:1\ndepth=0 C = RU, ST = Moscow, L = Moscow, O = Yandex LLC, CN = smtp.yandex.ru\nverify return:1\n220 mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net (Want to use Yandex.Mail for your domain? Visit http://pdd.yandex.ru) 1702031110-APb1qDNXu0U0\nEHLO example.com\n250-mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net\n250-8BITMIME\n250-PIPELINING\n250-SIZE 53477376\n250-STARTTLS\n250-AUTH LOGIN PLAIN XOAUTH2\n250-DSN\n250 ENHANCEDSTATUSCODES\nAUTH PLAIN AGluZm9AecWx0aW1zYWhkjgfjUTNvbQBkb2Jid2R1d255eWlxbWRv\n235 2.7.0 Authentication successful. 1702031132-APb1qDNXu0U0\nMAIL FROM: info@example.com\n250 2.1.0 &lt;info@example.com&gt; ok 1702031142-APb1qDNXu0U0-mV4GqJPK\nRCPT TO: info@example.com\n250 2.1.5 &lt;info@example.com&gt; recipient ok 1702031152-APb1qDNXu0U0-mV4GqJPK\nDATA\n354 Start mail input, end with &lt;CRLF&gt;.&lt;CRLF&gt;\nFrom: info@example.com\nTo: info@example.com\nSubject: Email client recommendation\nI'm currently using openssl to send emails. Do you know if there are any good desktop applications that can send emails?\n.\n250 2.0.0 Ok: queued on mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net 1702031214-APp1qKnXu0U0-mV4GcJPK\n</code></pre>\n<p>So I changed the JavaMailSender configuration as follows, but it still doesn't work.</p>\n<pre><code>    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;smtp.yandex.com&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;465&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;info@example.com&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.enable&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.auth.mechanisms&quot;&gt;LOGIN PLAIN&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.yandex.com&lt;/prop&gt;\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;     \n                &lt;property name=&quot;from&quot; value=&quot;info@example.com&quot;&gt;&lt;/property&gt;\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>Where am I making a mistake?</p>\n"},{"tags":["java","jenkins","upgrade"],"comments":[{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701980793,"post_id":77622761,"comment_id":136845046,"body_markdown":"What Jenkins version are we talking about? According to https://www.jenkins.io/doc/book/platform-information/support-policy-java/ you need to have at least version 2.419","body":"What Jenkins version are we talking about? According to <a href=\"https://www.jenkins.io/doc/book/platform-information/support-policy-java/\" rel=\"nofollow noreferrer\">jenkins.io/doc/book/platform-information/support-policy-java</a> you need to have at least version 2.419"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701981027,"post_id":77622761,"comment_id":136845080,"body_markdown":"I upgraded to 2.435\n$ grep &quot;version&gt;&quot; /var/lib/jenkins/config.xml\n &gt; &lt;version&gt;2.435&lt;/version&gt;","body":"I upgraded to 2.435 $ grep &quot;version&gt;&quot; /var/lib/jenkins/config.xml  &gt; &lt;version&gt;2.435&lt;/version&gt;"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701981507,"post_id":77622761,"comment_id":136845142,"body_markdown":"My apologies, it appears you included that in your question to begin with. It looks like you&#39;re using systemd to start the service. Have you tried manually starting the command listed in the unit file to see if there&#39;s any output that might help you?","body":"My apologies, it appears you included that in your question to begin with. It looks like you&#39;re using systemd to start the service. Have you tried manually starting the command listed in the unit file to see if there&#39;s any output that might help you?"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701982521,"post_id":77622761,"comment_id":136845287,"body_markdown":"Where can I find this command ? \nI added my init.d/jenkins file to the post","body":"Where can I find this command ?  I added my init.d/jenkins file to the post"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701983836,"post_id":77622761,"comment_id":136845511,"body_markdown":"Oh wow, haven&#39;t seen those in a while. From what I can tell from your init file the command to start Jenkins is basically just `java -jar /usr/share/jenkins/jenkins.war`, possibly with some extra parameters (those would be in /etc/default/jenkins probably)","body":"Oh wow, haven&#39;t seen those in a while. From what I can tell from your init file the command to start Jenkins is basically just <code>java -jar &#47;usr&#47;share&#47;jenkins&#47;jenkins.war</code>, possibly with some extra parameters (those would be in /etc/default/jenkins probably)"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701986402,"post_id":77622761,"comment_id":136845823,"body_markdown":"Added the result","body":"Added the result"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701987407,"post_id":77622761,"comment_id":136845983,"body_markdown":"Aside from outdated plugin warnings it seems Jenkins starts quite nicely when started directly. That causes me to suspect there&#39;s an environment problem with regard to the init script rather than a Java 21 problem. Your system might not be able to find the Java executable with the user executing the service, or it might not have permission to access certain folders that the user you just tested with does have permission for","body":"Aside from outdated plugin warnings it seems Jenkins starts quite nicely when started directly. That causes me to suspect there&#39;s an environment problem with regard to the init script rather than a Java 21 problem. Your system might not be able to find the Java executable with the user executing the service, or it might not have permission to access certain folders that the user you just tested with does have permission for"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701988812,"post_id":77622761,"comment_id":136846148,"body_markdown":"It looks like using java-17-openjdk brought back Jenkins, I will just stick to that until java-21-openjdk is tested and out","body":"It looks like using java-17-openjdk brought back Jenkins, I will just stick to that until java-21-openjdk is tested and out"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1702289311,"post_id":77622761,"comment_id":136873752,"body_markdown":"I&#39;m not sure what you mean by &quot;until java-21-openjdk is tested and out&quot; since OpenJDK 21 has been out for a few months now. Maybe it&#39;s not available in your package manager? You could opt for a release from a different vendor, such as Azul or Eclipse Temurin instead. There&#39;s really no harm with sticking with 17 for now though, as it&#39;s an LTS that will be supported until september next year (much longer for different vendors). My own Jenkins instance uses the official Docker image, which is still Java 11 (my projects use 21, they&#39;re built in Docker containers)","body":"I&#39;m not sure what you mean by &quot;until java-21-openjdk is tested and out&quot; since OpenJDK 21 has been out for a few months now. Maybe it&#39;s not available in your package manager? You could opt for a release from a different vendor, such as Azul or Eclipse Temurin instead. There&#39;s really no harm with sticking with 17 for now though, as it&#39;s an LTS that will be supported until september next year (much longer for different vendors). My own Jenkins instance uses the official Docker image, which is still Java 11 (my projects use 21, they&#39;re built in Docker containers)"}],"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702053273,"creation_date":1701978608,"question_id":77622761,"body_markdown":"I recently upgraded my Jenkins to 2.435, after restarting my server and my service, I then attempted to upgrade Java 11 to Java 21 using this post\r\n[https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/ ](https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/)\r\n\r\n\r\nAfter restarting my server, my Jenkins service does not start anymore. I have tried changing the version allowed in `/etc/init.d/jenkins` :\r\n```\r\n# Work out the JAVA version we are working with:\r\n JAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;&#39;)    &lt;&lt; THIS \r\n        if [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\r\n                echo &quot;Correct java version found&quot; &gt;&amp;2\r\n        elif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then   &lt;&lt; THIS \r\n                echo &quot;Correct java version found&quot; &gt;&amp;2\r\n        else\r\n                echo &quot;Found an incorrect Java version&quot; &gt;&amp;2\r\n                echo &quot;Java version found:&quot; &gt;&amp;2\r\n                &quot;${JAVA}&quot; -version &gt;&amp;2\r\n                echo &quot;Aborting&quot; &gt;&amp;2\r\n                return 2\r\n        fi\r\n```\r\n \r\nI still get\r\n```-- The job identifier is 2380.\r\nDec 07 11:18:23 myApp jenkins[2864]: jenkins: invalid Java version: java version &quot;21.0.1&quot; 2023-10-17 LTS\r\nDec 07 11:18:23 myApp  jenkins[2864]: Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29)\r\nDec 07 11:18:23 myApp  jenkins[2864]: Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)\r\nDec 07 11:18:23 myApp  systemd[1]: jenkins.service: Main process exited, code=exited, status=1/FAILURE\r\n-- Subject: Unit process exited\r\n-- Defined-By: systemd\r\n-- Support: http://www.ubuntu.com/support\r\n```\r\n\r\n\r\n`$ readlink -f $(which java)`\r\n&gt; /usr/lib/jvm/jdk-21-oracle-x64/bin/java\r\n\r\n`$ whereis jenkins`\r\n&gt; jenkins: /usr/bin/jenkins /usr/share/jenkins\r\n\r\nAny suggestions ?\r\nThanks\r\n\r\nEdit:\r\nthis is my `/etc/init.d/jenkins` file:\r\n```\r\n#!/usr/bin/env /lib/init/init-d-script\r\n# /etc/init.d/jenkins\r\n# debian-compatible jenkins startup script.\r\n# Amelia A Lewis &lt;alewis@ibco.com&gt;\r\n#\r\n### BEGIN INIT INFO\r\n# Provides:          jenkins\r\n# Required-Start:    $remote_fs $syslog $network\r\n# Required-Stop:     $remote_fs $syslog $network\r\n# Default-Start:     2 3 4 5\r\n# Default-Stop:      0 1 6\r\n# Short-Description: Start Jenkins at boot time\r\n# Description:       Controls Jenkins Automation Server\r\n### END INIT INFO\r\n\r\nDAEMON=none\r\nCOMMAND_NAME=java\r\nNAME=&quot;jenkins&quot;\r\nDESC=&quot;Jenkins Automation Server&quot;\r\nPREFIX=/jenkins\r\n\r\ncheck_arguments() {\r\n\t# Exit if not supposed to run standalone\r\n\tif [ &quot;${RUN_STANDALONE}&quot; = &quot;false&quot; ]; then\r\n\t\techo &quot;ERROR: Not configured to run standalone&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n\r\n\t# Make sure there exists a java executable, it may not be always the case\r\n\tJAVA=$(command -v &quot;${COMMAND_NAME}&quot;)\r\n\tif [ -z &quot;${JAVA}&quot; ]; then\r\n\t\techo &quot;ERROR: No Java executable found in current PATH: ${PATH}&quot; &gt;&amp;2\r\n\t\techo &quot;If you actually have Java installed on the system make sure the executable is in the aforementioned path and that &#39;command -v ${COMMAND_NAME}&#39; returns the Java executable path&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n\r\n\t# Work out the JAVA version we are working with:\r\n\tJAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;&#39;)\r\n\tif [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\r\n\t\techo &quot;Correct java version found&quot; &gt;&amp;2\r\n\telif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then\r\n\t\techo &quot;Correct java version found&quot; &gt;&amp;2\r\n\telse\r\n\t\techo &quot;Found an incorrect Java version&quot; &gt;&amp;2\r\n\t\techo &quot;Java version found:&quot; &gt;&amp;2\r\n\t\t&quot;${JAVA}&quot; -version &gt;&amp;2\r\n\t\techo &quot;Aborting&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n\r\n\t# Make sure we run as root, since setting the max open files through\r\n\t# ulimit requires root access\r\n\tif [ &quot;$(id -u)&quot; -gt 0 ]; then\r\n\t\techo &quot;The ${NAME} init script can only be run as root&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n}\r\n\r\ncheck_tcp_port() {\r\n\tservice=$1\r\n\tassigned=$2\r\n\tdefault=$3\r\n\tassigned_address=$4\r\n\tdefault_address=$5\r\n\r\n\tif [ -n &quot;${assigned}&quot; ]; then\r\n\t\tport=${assigned}\r\n\telse\r\n\t\tport=${default}\r\n\tfi\r\n\r\n\tif [ -n &quot;${assigned_address}&quot; ]; then\r\n\t\taddress=${assigned_address}\r\n\telse\r\n\t\taddress=${default_address}\r\n\tfi\r\n\r\n\tcount=$(netstat --listen --numeric-ports | grep &quot;${address}:${port}[[:space:]]&quot; | grep -c .)\r\n\r\n\tif [ &quot;${count}&quot; -gt 0 ]; then\r\n\t\techo &quot;The selected ${service} port (${port}) on address ${address} seems to be in use by another program &quot;\r\n\t\techo &quot;Please select another address/port combination to use for ${NAME}&quot;\r\n\t\treturn 2\r\n\tfi\r\n}\r\n\r\ndo_start_cmd_override() {\r\n\tcheck_arguments || return &quot;$?&quot;\r\n\r\n\t# load environments\r\n\tif [ -r /etc/default/locale ]; then\r\n\t\t. /etc/default/locale\r\n\t\texport LANG LANGUAGE\r\n\telif [ -r /etc/environment ]; then\r\n\t\t. /etc/environment\r\n\t\texport LANG LANGUAGE\r\n\tfi\r\n\texport JENKINS_HOME\r\n\r\n\t# the default location is /var/run/jenkins/jenkins.pid but the parent directory needs to be created\r\n\tmkdir -p &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\r\n\tchown &quot;${JENKINS_USER}&quot; &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\r\n\r\n\t# Verify that the jenkins port is not already in use, winstone does not exit\r\n\t# even for BindException\r\n\tcheck_tcp_port &quot;http&quot; &quot;${HTTP_PORT}&quot; &quot;8080&quot; &quot;${HTTP_HOST}&quot; &quot;0.0.0.0&quot; || return 2\r\n\r\n\t# If the var MAXOPENFILES is enabled in /etc/default/jenkins then set the max open files to the\r\n\t# proper value\r\n\tif [ -n &quot;${MAXOPENFILES}&quot; ]; then\r\n\t\t[ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting up max open files limit to ${MAXOPENFILES}&quot;\r\n\t\tulimit -n &quot;${MAXOPENFILES}&quot; || return 2\r\n\tfi\r\n\t# notify of explicit umask\r\n\tif [ -n &quot;${UMASK}&quot; ]; then\r\n\t\t[ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting umask to ${UMASK}&quot;\r\n\tfi\r\n\r\n\t# enable access log\r\n\tif [ &quot;${JENKINS_ENABLE_ACCESS_LOG}&quot; = &quot;yes&quot; ]; then\r\n\t\tJENKINS_ARGS=&quot;${JENKINS_ARGS} --accessLoggerClassName=winstone.accesslog.SimpleAccessLogger --simpleAccessLogger.format=combined --simpleAccessLogger.file=/var/log/${NAME}/access_log&quot;\r\n\tfi\r\n\r\n\t# start-stop-daemon --chuid/--group doesn&#39;t prepare environment variables\r\n\t# like HOME, USER, LOGNAME or USERNAME, so re-export these\r\n\tSHELL=$(awk -F: &quot;\\$1 == \\&quot;${JENKINS_USER}\\&quot; {print \\$NF}&quot; /etc/passwd)\r\n\t[ -n &quot;${SHELL}&quot; ] || SHELL=/bin/bash\r\n\tHOME=&quot;${JENKINS_HOME}&quot; \\\r\n\t\tSHELL=&quot;${SHELL}&quot; \\\r\n\t\tUSER=&quot;${JENKINS_USER}&quot; \\\r\n\t\tPREFIX=&quot;${PREFIX}&quot;\t\\\r\n\t\tLOGNAME=&quot;${JENKINS_USER}&quot; \\\r\n\t\tUSERNAME=&quot;${JENKINS_USER}&quot; \\\r\n\t\tPWD=&quot;${JENKINS_HOME}&quot; \\\r\n\t\teval \\\r\n\t\tstart-stop-daemon \\\r\n\t\t--start \\\r\n\t\t--quiet \\\r\n\t\t--oknodo \\\r\n\t\t--background \\\r\n\t\t--no-close \\\r\n\t\t--make-pidfile \\\r\n\t\t--pidfile &quot;${PIDFILE}&quot; \\\r\n\t\t--chdir &quot;${JENKINS_HOME}&quot; \\\r\n\t\t--chuid &quot;${JENKINS_USER}&quot; \\\r\n\t\t--user &quot;${JENKINS_USER}&quot; \\\r\n\t\t--group &quot;${JENKINS_GROUP}&quot; \\\r\n\t\t--name &quot;${COMMAND_NAME}&quot; \\\r\n\t\t--exec &quot;${JAVA}&quot; \\\r\n\t\t${UMASK:+--umask ${UMASK}} \\\r\n\t\t-- ${JAVA_ARGS} -jar &quot;${JENKINS_WAR}&quot; ${JENKINS_ARGS} &gt;&gt;&quot;${JENKINS_LOG}&quot; 2&gt;&amp;1\r\n\tRETVAL=&quot;$?&quot;\r\n\t[ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\r\n\t# Verify the process did in fact start successfully and didn&#39;t just bomb out\r\n\tsleep 1\r\n\tATTEMPT=1\r\n\twhile [ ${ATTEMPT} -le 30 ]; do\r\n\t\tpidofproc -p &quot;${PIDFILE}&quot; &quot;${JAVA}&quot; &gt;/dev/null &amp;&amp; break\r\n\t\t[ &quot;${ATTEMPT}&quot; = 30 ] &amp;&amp; return 2\r\n\t\tsleep 1\r\n\t\tATTEMPT=$((ATTEMPT + 1))\r\n\tdone\r\n\treturn &quot;${RETVAL}&quot;\r\n}\r\n\r\ndo_stop_cmd_override() {\r\n\tcheck_arguments || return &quot;$?&quot;\r\n\tstart-stop-daemon \\\r\n\t\t--stop \\\r\n\t\t--quiet \\\r\n\t\t--oknodo \\\r\n\t\t--prefix=&quot;${PREFIX}&quot; \\\r\n\t\t--pidfile &quot;${PIDFILE}&quot; \\\r\n\t\t--chdir &quot;${JENKINS_HOME}&quot; \\\r\n\t\t--chuid &quot;${JENKINS_USER}&quot; \\\r\n\t\t--user &quot;${JENKINS_USER}&quot; \\\r\n\t\t--group &quot;${JENKINS_GROUP}&quot; \\\r\n\t\t--name &quot;${COMMAND_NAME}&quot; \\\r\n\t\t--exec &quot;${JAVA}&quot; \\\r\n\t\t--retry=TERM/30/KILL/5\r\n\tRETVAL=&quot;$?&quot;\r\n\t[ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\r\n\t# Wait for children to finish too if this is a daemon that forks\r\n\t# and if the daemon is only ever run from this initscript.\r\n\t# If the above conditions are not satisfied then add some other code\r\n\t# that waits for the process to drop all resources that could be\r\n\t# needed by services started subsequently.  A last resort is to\r\n\t# sleep for some time.\r\n\tstart-stop-daemon \\\r\n\t\t--stop \\\r\n\t\t--quiet \\\r\n\t\t--oknodo \\\r\n\t\t--prefix=/jenkins \\\r\n\t\t--pidfile &quot;${PIDFILE}&quot; \\\r\n\t\t--chdir &quot;${JENKINS_HOME}&quot; \\\r\n\t\t--chuid &quot;${JENKINS_USER}&quot; \\\r\n\t\t--user &quot;${JENKINS_USER}&quot; \\\r\n\t\t--group &quot;${JENKINS_GROUP}&quot; \\\r\n\t\t--name &quot;${COMMAND_NAME}&quot; \\\r\n\t\t--exec &quot;${JAVA}&quot; \\\r\n\t\t--retry=0/30/KILL/5\r\n\t[ &quot;$?&quot; = 2 ] &amp;&amp; return 2\r\n\t# Many daemons don&#39;t delete their pidfiles when they exit.\r\n\trm -f &quot;${PIDFILE}&quot;\r\n\treturn &quot;${RETVAL}&quot;\r\n}\r\n\r\ndo_status_override() {\r\n\tcheck_arguments || return &quot;$?&quot;\r\n\tstatus_of_proc &quot;${JAVA}&quot; &quot;${NAME}&quot; -p &quot;${PIDFILE}&quot;\r\n}\r\n```\r\n\r\nEDIT:\r\n\r\nfrom `/usr/share/java/`\r\nJenkins seems fully loaded, still cant access it in browser, I get a 404, hardly had issues with nginx before, I&#39;m wondering if I have several jenkins versions installed at different places\r\n``` \r\njava -jar ./jenkins.war\r\nRunning from: /usr/share/java/jenkins.war\r\nwebroot: /root/.jenkins/war\r\n2023-12-07 21:24:34.618+0000 [id=1]\tINFO\twinstone.Logger#logInternal: Beginning extraction from war file\r\n2023-12-07 21:24:34.789+0000 [id=1]\tWARNING\to.e.j.s.handler.ContextHandler#setContextPath: Empty contextPath\r\n2023-12-07 21:24:34.892+0000 [id=1]\tINFO\torg.eclipse.jetty.server.Server#doStart: jetty-10.0.18; built: 2023-10-27T01:59:58.245Z; git: 8545fd9bf4cd0d0838f626b405fd4963441546b7; jvm 21.0.1+12-LTS-29\r\n2023-12-07 21:24:35.484+0000 [id=1]\tINFO\to.e.j.w.StandardDescriptorProcessor#visitServlet: NO JSP Support for /, did not find org.eclipse.jetty.jsp.JettyJspServlet\r\n2023-12-07 21:24:35.557+0000 [id=1]\tINFO\to.e.j.s.s.DefaultSessionIdManager#doStart: Session workerName=node0\r\n2023-12-07 21:24:36.353+0000 [id=1]\tINFO\thudson.WebAppMain#contextInitialized: Jenkins home directory: /root/.jenkins found at: $user.home/.jenkins\r\n2023-12-07 21:24:36.551+0000 [id=1]\tINFO\to.e.j.s.handler.ContextHandler#doStart: Started w.@51768776{Jenkins v2.435,/,file:///root/.jenkins/war/,AVAILABLE}{/root/.jenkins/war}\r\n2023-12-07 21:24:36.570+0000 [id=1]\tINFO\to.e.j.server.AbstractConnector#doStart: Started ServerConnector@32a068d1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\r\n2023-12-07 21:24:36.599+0000 [id=1]\tINFO\torg.eclipse.jetty.server.Server#doStart: Started Server@35fc6dc4{STARTING}[10.0.18,sto=0] @2830ms\r\n2023-12-07 21:24:36.601+0000 [id=35]\tINFO\twinstone.Logger#logInternal: Winstone Servlet Engine running: controlPort=disabled\r\n2023-12-07 21:24:36.924+0000 [id=43]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Started initialization\r\n2023-12-07 21:24:37.280+0000 [id=41]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Listed all plugins\r\n2023-12-07 21:24:37.740+0000 [id=46]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Mina SSHD API :: Core v2.11.0-86.v836f585d47fa_ (mina-sshd-api-core)\r\njava.io.IOException: Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\r\n - Update required: SSH Credentials Plugin (ssh-credentials 1.19) to be updated to 305.v8f4381501156 or higher\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.743+0000 [id=44]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin SSH server v3.312.v1c601b_c83b_0e (sshd)\r\njava.io.IOException: Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\r\n - Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.851+0000 [id=47]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Jenkins GIT server Plugin v1.10 (git-server)\r\njava.io.IOException: Failed to load: Jenkins GIT server Plugin (git-server 1.10)\r\n - Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.922+0000 [id=41]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Matrix Authorization Strategy Plugin v3.2.1 (matrix-auth)\r\njava.io.IOException: Failed to load: Matrix Authorization Strategy Plugin (matrix-auth 3.2.1)\r\n - Update required: Folders Plugin (cloudbees-folder 6.708.ve61636eb_65a_5) to be updated to 6.815.v0dd5a_cb_40e0e or higher\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.924+0000 [id=41]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Shared Groovy Libraries v564.ve62a_4eb_b_e039 (workflow-cps-global-lib)\r\njava.io.IOException: Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n - Failed to load: Jenkins GIT server Plugin (git-server 1.10)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.925+0000 [id=41]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: GitHub Groovy Libraries v36.v4c01db_ca_ed16 (pipeline-github-lib)\r\njava.io.IOException: Failed to load: Pipeline: GitHub Groovy Libraries (pipeline-github-lib 36.v4c01db_ca_ed16)\r\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.929+0000 [id=42]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Declarative v2.2064.v5eef7d0982b_e (pipeline-model-definition)\r\njava.io.IOException: Failed to load: Pipeline: Declarative (pipeline-model-definition 2.2064.v5eef7d0982b_e)\r\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.951+0000 [id=40]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline v2.6 (workflow-aggregator)\r\njava.io.IOException: Failed to load: Pipeline (workflow-aggregator 2.6)\r\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:41.333+0000 [id=40]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Prepared all plugins\r\n2023-12-07 21:24:41.353+0000 [id=40]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Started all plugins\r\n2023-12-07 21:24:41.369+0000 [id=44]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Augmented all extensions\r\n2023-12-07 21:24:42.281+0000 [id=45]\tINFO\tjenkins.InitReactorRunner$1#onAttained: System config loaded\r\n2023-12-07 21:24:42.282+0000 [id=45]\tINFO\tjenkins.InitReactorRunner$1#onAttained: System config adapted\r\n2023-12-07 21:24:42.297+0000 [id=43]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Loaded all jobs\r\n2023-12-07 21:24:42.310+0000 [id=47]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Configuration for all jobs updated\r\n2023-12-07 21:24:42.604+0000 [id=42]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Completed initialization\r\n2023-12-07 21:24:42.628+0000 [id=34]\tINFO\thudson.lifecycle.Lifecycle#onReady: Jenkins is fully up and running\r\n\r\n```\r\n\r\nEdit #2: \r\nI just tried switching between my Java versions using \r\n`update-alternative`\r\nIt seems that using 11 or 17 brings Jenkins back up, 21 causes the issue:\r\n```\r\n$ sudo update-alternatives --config java\r\nThere are 4 choices for the alternative java (providing /usr/bin/java).\r\n\r\n  Selection    Path                                            Priority   Status\r\n------------------------------------------------------------\r\n  0            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 auto mode\r\n  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode\r\n* 2            /usr/lib/jvm/java-17-openjdk-amd64/bin/java      1711      manual mode\r\n  3            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\r\n  4            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 manual mode\r\n\r\n```","title":"Solved - Jenkins not working after upgrading to Java 21","body":"<p>I recently upgraded my Jenkins to 2.435, after restarting my server and my service, I then attempted to upgrade Java 11 to Java 21 using this post\n<a href=\"https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/\" rel=\"nofollow noreferrer\">https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/ </a></p>\n<p>After restarting my server, my Jenkins service does not start anymore. I have tried changing the version allowed in <code>/etc/init.d/jenkins</code> :</p>\n<pre><code># Work out the JAVA version we are working with:\n JAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n ';s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;')    &lt;&lt; THIS \n        if [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\n                echo &quot;Correct java version found&quot; &gt;&amp;2\n        elif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then   &lt;&lt; THIS \n                echo &quot;Correct java version found&quot; &gt;&amp;2\n        else\n                echo &quot;Found an incorrect Java version&quot; &gt;&amp;2\n                echo &quot;Java version found:&quot; &gt;&amp;2\n                &quot;${JAVA}&quot; -version &gt;&amp;2\n                echo &quot;Aborting&quot; &gt;&amp;2\n                return 2\n        fi\n</code></pre>\n<p>I still get</p>\n<pre><code>Dec 07 11:18:23 myApp jenkins[2864]: jenkins: invalid Java version: java version &quot;21.0.1&quot; 2023-10-17 LTS\nDec 07 11:18:23 myApp  jenkins[2864]: Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29)\nDec 07 11:18:23 myApp  jenkins[2864]: Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)\nDec 07 11:18:23 myApp  systemd[1]: jenkins.service: Main process exited, code=exited, status=1/FAILURE\n-- Subject: Unit process exited\n-- Defined-By: systemd\n-- Support: http://www.ubuntu.com/support\n</code></pre>\n<p><code>$ readlink -f $(which java)</code></p>\n<blockquote>\n<p>/usr/lib/jvm/jdk-21-oracle-x64/bin/java</p>\n</blockquote>\n<p><code>$ whereis jenkins</code></p>\n<blockquote>\n<p>jenkins: /usr/bin/jenkins /usr/share/jenkins</p>\n</blockquote>\n<p>Any suggestions ?\nThanks</p>\n<p>Edit:\nthis is my <code>/etc/init.d/jenkins</code> file:</p>\n<pre><code>#!/usr/bin/env /lib/init/init-d-script\n# /etc/init.d/jenkins\n# debian-compatible jenkins startup script.\n# Amelia A Lewis &lt;alewis@ibco.com&gt;\n#\n### BEGIN INIT INFO\n# Provides:          jenkins\n# Required-Start:    $remote_fs $syslog $network\n# Required-Stop:     $remote_fs $syslog $network\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start Jenkins at boot time\n# Description:       Controls Jenkins Automation Server\n### END INIT INFO\n\nDAEMON=none\nCOMMAND_NAME=java\nNAME=&quot;jenkins&quot;\nDESC=&quot;Jenkins Automation Server&quot;\nPREFIX=/jenkins\n\ncheck_arguments() {\n    # Exit if not supposed to run standalone\n    if [ &quot;${RUN_STANDALONE}&quot; = &quot;false&quot; ]; then\n        echo &quot;ERROR: Not configured to run standalone&quot; &gt;&amp;2\n        return 2\n    fi\n\n    # Make sure there exists a java executable, it may not be always the case\n    JAVA=$(command -v &quot;${COMMAND_NAME}&quot;)\n    if [ -z &quot;${JAVA}&quot; ]; then\n        echo &quot;ERROR: No Java executable found in current PATH: ${PATH}&quot; &gt;&amp;2\n        echo &quot;If you actually have Java installed on the system make sure the executable is in the aforementioned path and that 'command -v ${COMMAND_NAME}' returns the Java executable path&quot; &gt;&amp;2\n        return 2\n    fi\n\n    # Work out the JAVA version we are working with:\n    JAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n ';s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;')\n    if [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\n        echo &quot;Correct java version found&quot; &gt;&amp;2\n    elif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then\n        echo &quot;Correct java version found&quot; &gt;&amp;2\n    else\n        echo &quot;Found an incorrect Java version&quot; &gt;&amp;2\n        echo &quot;Java version found:&quot; &gt;&amp;2\n        &quot;${JAVA}&quot; -version &gt;&amp;2\n        echo &quot;Aborting&quot; &gt;&amp;2\n        return 2\n    fi\n\n    # Make sure we run as root, since setting the max open files through\n    # ulimit requires root access\n    if [ &quot;$(id -u)&quot; -gt 0 ]; then\n        echo &quot;The ${NAME} init script can only be run as root&quot; &gt;&amp;2\n        return 2\n    fi\n}\n\ncheck_tcp_port() {\n    service=$1\n    assigned=$2\n    default=$3\n    assigned_address=$4\n    default_address=$5\n\n    if [ -n &quot;${assigned}&quot; ]; then\n        port=${assigned}\n    else\n        port=${default}\n    fi\n\n    if [ -n &quot;${assigned_address}&quot; ]; then\n        address=${assigned_address}\n    else\n        address=${default_address}\n    fi\n\n    count=$(netstat --listen --numeric-ports | grep &quot;${address}:${port}[[:space:]]&quot; | grep -c .)\n\n    if [ &quot;${count}&quot; -gt 0 ]; then\n        echo &quot;The selected ${service} port (${port}) on address ${address} seems to be in use by another program &quot;\n        echo &quot;Please select another address/port combination to use for ${NAME}&quot;\n        return 2\n    fi\n}\n\ndo_start_cmd_override() {\n    check_arguments || return &quot;$?&quot;\n\n    # load environments\n    if [ -r /etc/default/locale ]; then\n        . /etc/default/locale\n        export LANG LANGUAGE\n    elif [ -r /etc/environment ]; then\n        . /etc/environment\n        export LANG LANGUAGE\n    fi\n    export JENKINS_HOME\n\n    # the default location is /var/run/jenkins/jenkins.pid but the parent directory needs to be created\n    mkdir -p &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\n    chown &quot;${JENKINS_USER}&quot; &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\n\n    # Verify that the jenkins port is not already in use, winstone does not exit\n    # even for BindException\n    check_tcp_port &quot;http&quot; &quot;${HTTP_PORT}&quot; &quot;8080&quot; &quot;${HTTP_HOST}&quot; &quot;0.0.0.0&quot; || return 2\n\n    # If the var MAXOPENFILES is enabled in /etc/default/jenkins then set the max open files to the\n    # proper value\n    if [ -n &quot;${MAXOPENFILES}&quot; ]; then\n        [ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting up max open files limit to ${MAXOPENFILES}&quot;\n        ulimit -n &quot;${MAXOPENFILES}&quot; || return 2\n    fi\n    # notify of explicit umask\n    if [ -n &quot;${UMASK}&quot; ]; then\n        [ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting umask to ${UMASK}&quot;\n    fi\n\n    # enable access log\n    if [ &quot;${JENKINS_ENABLE_ACCESS_LOG}&quot; = &quot;yes&quot; ]; then\n        JENKINS_ARGS=&quot;${JENKINS_ARGS} --accessLoggerClassName=winstone.accesslog.SimpleAccessLogger --simpleAccessLogger.format=combined --simpleAccessLogger.file=/var/log/${NAME}/access_log&quot;\n    fi\n\n    # start-stop-daemon --chuid/--group doesn't prepare environment variables\n    # like HOME, USER, LOGNAME or USERNAME, so re-export these\n    SHELL=$(awk -F: &quot;\\$1 == \\&quot;${JENKINS_USER}\\&quot; {print \\$NF}&quot; /etc/passwd)\n    [ -n &quot;${SHELL}&quot; ] || SHELL=/bin/bash\n    HOME=&quot;${JENKINS_HOME}&quot; \\\n        SHELL=&quot;${SHELL}&quot; \\\n        USER=&quot;${JENKINS_USER}&quot; \\\n        PREFIX=&quot;${PREFIX}&quot;  \\\n        LOGNAME=&quot;${JENKINS_USER}&quot; \\\n        USERNAME=&quot;${JENKINS_USER}&quot; \\\n        PWD=&quot;${JENKINS_HOME}&quot; \\\n        eval \\\n        start-stop-daemon \\\n        --start \\\n        --quiet \\\n        --oknodo \\\n        --background \\\n        --no-close \\\n        --make-pidfile \\\n        --pidfile &quot;${PIDFILE}&quot; \\\n        --chdir &quot;${JENKINS_HOME}&quot; \\\n        --chuid &quot;${JENKINS_USER}&quot; \\\n        --user &quot;${JENKINS_USER}&quot; \\\n        --group &quot;${JENKINS_GROUP}&quot; \\\n        --name &quot;${COMMAND_NAME}&quot; \\\n        --exec &quot;${JAVA}&quot; \\\n        ${UMASK:+--umask ${UMASK}} \\\n        -- ${JAVA_ARGS} -jar &quot;${JENKINS_WAR}&quot; ${JENKINS_ARGS} &gt;&gt;&quot;${JENKINS_LOG}&quot; 2&gt;&amp;1\n    RETVAL=&quot;$?&quot;\n    [ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\n    # Verify the process did in fact start successfully and didn't just bomb out\n    sleep 1\n    ATTEMPT=1\n    while [ ${ATTEMPT} -le 30 ]; do\n        pidofproc -p &quot;${PIDFILE}&quot; &quot;${JAVA}&quot; &gt;/dev/null &amp;&amp; break\n        [ &quot;${ATTEMPT}&quot; = 30 ] &amp;&amp; return 2\n        sleep 1\n        ATTEMPT=$((ATTEMPT + 1))\n    done\n    return &quot;${RETVAL}&quot;\n}\n\ndo_stop_cmd_override() {\n    check_arguments || return &quot;$?&quot;\n    start-stop-daemon \\\n        --stop \\\n        --quiet \\\n        --oknodo \\\n        --prefix=&quot;${PREFIX}&quot; \\\n        --pidfile &quot;${PIDFILE}&quot; \\\n        --chdir &quot;${JENKINS_HOME}&quot; \\\n        --chuid &quot;${JENKINS_USER}&quot; \\\n        --user &quot;${JENKINS_USER}&quot; \\\n        --group &quot;${JENKINS_GROUP}&quot; \\\n        --name &quot;${COMMAND_NAME}&quot; \\\n        --exec &quot;${JAVA}&quot; \\\n        --retry=TERM/30/KILL/5\n    RETVAL=&quot;$?&quot;\n    [ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\n    # Wait for children to finish too if this is a daemon that forks\n    # and if the daemon is only ever run from this initscript.\n    # If the above conditions are not satisfied then add some other code\n    # that waits for the process to drop all resources that could be\n    # needed by services started subsequently.  A last resort is to\n    # sleep for some time.\n    start-stop-daemon \\\n        --stop \\\n        --quiet \\\n        --oknodo \\\n        --prefix=/jenkins \\\n        --pidfile &quot;${PIDFILE}&quot; \\\n        --chdir &quot;${JENKINS_HOME}&quot; \\\n        --chuid &quot;${JENKINS_USER}&quot; \\\n        --user &quot;${JENKINS_USER}&quot; \\\n        --group &quot;${JENKINS_GROUP}&quot; \\\n        --name &quot;${COMMAND_NAME}&quot; \\\n        --exec &quot;${JAVA}&quot; \\\n        --retry=0/30/KILL/5\n    [ &quot;$?&quot; = 2 ] &amp;&amp; return 2\n    # Many daemons don't delete their pidfiles when they exit.\n    rm -f &quot;${PIDFILE}&quot;\n    return &quot;${RETVAL}&quot;\n}\n\ndo_status_override() {\n    check_arguments || return &quot;$?&quot;\n    status_of_proc &quot;${JAVA}&quot; &quot;${NAME}&quot; -p &quot;${PIDFILE}&quot;\n}\n</code></pre>\n<p>EDIT:</p>\n<p>from <code>/usr/share/java/</code>\nJenkins seems fully loaded, still cant access it in browser, I get a 404, hardly had issues with nginx before, I'm wondering if I have several jenkins versions installed at different places</p>\n<pre><code>java -jar ./jenkins.war\nRunning from: /usr/share/java/jenkins.war\nwebroot: /root/.jenkins/war\n2023-12-07 21:24:34.618+0000 [id=1] INFO    winstone.Logger#logInternal: Beginning extraction from war file\n2023-12-07 21:24:34.789+0000 [id=1] WARNING o.e.j.s.handler.ContextHandler#setContextPath: Empty contextPath\n2023-12-07 21:24:34.892+0000 [id=1] INFO    org.eclipse.jetty.server.Server#doStart: jetty-10.0.18; built: 2023-10-27T01:59:58.245Z; git: 8545fd9bf4cd0d0838f626b405fd4963441546b7; jvm 21.0.1+12-LTS-29\n2023-12-07 21:24:35.484+0000 [id=1] INFO    o.e.j.w.StandardDescriptorProcessor#visitServlet: NO JSP Support for /, did not find org.eclipse.jetty.jsp.JettyJspServlet\n2023-12-07 21:24:35.557+0000 [id=1] INFO    o.e.j.s.s.DefaultSessionIdManager#doStart: Session workerName=node0\n2023-12-07 21:24:36.353+0000 [id=1] INFO    hudson.WebAppMain#contextInitialized: Jenkins home directory: /root/.jenkins found at: $user.home/.jenkins\n2023-12-07 21:24:36.551+0000 [id=1] INFO    o.e.j.s.handler.ContextHandler#doStart: Started w.@51768776{Jenkins v2.435,/,file:///root/.jenkins/war/,AVAILABLE}{/root/.jenkins/war}\n2023-12-07 21:24:36.570+0000 [id=1] INFO    o.e.j.server.AbstractConnector#doStart: Started ServerConnector@32a068d1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\n2023-12-07 21:24:36.599+0000 [id=1] INFO    org.eclipse.jetty.server.Server#doStart: Started Server@35fc6dc4{STARTING}[10.0.18,sto=0] @2830ms\n2023-12-07 21:24:36.601+0000 [id=35]    INFO    winstone.Logger#logInternal: Winstone Servlet Engine running: controlPort=disabled\n2023-12-07 21:24:36.924+0000 [id=43]    INFO    jenkins.InitReactorRunner$1#onAttained: Started initialization\n2023-12-07 21:24:37.280+0000 [id=41]    INFO    jenkins.InitReactorRunner$1#onAttained: Listed all plugins\n2023-12-07 21:24:37.740+0000 [id=46]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Mina SSHD API :: Core v2.11.0-86.v836f585d47fa_ (mina-sshd-api-core)\njava.io.IOException: Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\n - Update required: SSH Credentials Plugin (ssh-credentials 1.19) to be updated to 305.v8f4381501156 or higher\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.743+0000 [id=44]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin SSH server v3.312.v1c601b_c83b_0e (sshd)\njava.io.IOException: Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\n - Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.851+0000 [id=47]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Jenkins GIT server Plugin v1.10 (git-server)\njava.io.IOException: Failed to load: Jenkins GIT server Plugin (git-server 1.10)\n - Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.922+0000 [id=41]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Matrix Authorization Strategy Plugin v3.2.1 (matrix-auth)\njava.io.IOException: Failed to load: Matrix Authorization Strategy Plugin (matrix-auth 3.2.1)\n - Update required: Folders Plugin (cloudbees-folder 6.708.ve61636eb_65a_5) to be updated to 6.815.v0dd5a_cb_40e0e or higher\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.924+0000 [id=41]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Shared Groovy Libraries v564.ve62a_4eb_b_e039 (workflow-cps-global-lib)\njava.io.IOException: Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n - Failed to load: Jenkins GIT server Plugin (git-server 1.10)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.925+0000 [id=41]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: GitHub Groovy Libraries v36.v4c01db_ca_ed16 (pipeline-github-lib)\njava.io.IOException: Failed to load: Pipeline: GitHub Groovy Libraries (pipeline-github-lib 36.v4c01db_ca_ed16)\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.929+0000 [id=42]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Declarative v2.2064.v5eef7d0982b_e (pipeline-model-definition)\njava.io.IOException: Failed to load: Pipeline: Declarative (pipeline-model-definition 2.2064.v5eef7d0982b_e)\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.951+0000 [id=40]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline v2.6 (workflow-aggregator)\njava.io.IOException: Failed to load: Pipeline (workflow-aggregator 2.6)\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:41.333+0000 [id=40]    INFO    jenkins.InitReactorRunner$1#onAttained: Prepared all plugins\n2023-12-07 21:24:41.353+0000 [id=40]    INFO    jenkins.InitReactorRunner$1#onAttained: Started all plugins\n2023-12-07 21:24:41.369+0000 [id=44]    INFO    jenkins.InitReactorRunner$1#onAttained: Augmented all extensions\n2023-12-07 21:24:42.281+0000 [id=45]    INFO    jenkins.InitReactorRunner$1#onAttained: System config loaded\n2023-12-07 21:24:42.282+0000 [id=45]    INFO    jenkins.InitReactorRunner$1#onAttained: System config adapted\n2023-12-07 21:24:42.297+0000 [id=43]    INFO    jenkins.InitReactorRunner$1#onAttained: Loaded all jobs\n2023-12-07 21:24:42.310+0000 [id=47]    INFO    jenkins.InitReactorRunner$1#onAttained: Configuration for all jobs updated\n2023-12-07 21:24:42.604+0000 [id=42]    INFO    jenkins.InitReactorRunner$1#onAttained: Completed initialization\n2023-12-07 21:24:42.628+0000 [id=34]    INFO    hudson.lifecycle.Lifecycle#onReady: Jenkins is fully up and running\n\n</code></pre>\n<p>Edit #2:\nI just tried switching between my Java versions using\n<code>update-alternative</code>\nIt seems that using 11 or 17 brings Jenkins back up, 21 causes the issue:</p>\n<pre><code>$ sudo update-alternatives --config java\nThere are 4 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                            Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 auto mode\n  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode\n* 2            /usr/lib/jvm/java-17-openjdk-amd64/bin/java      1711      manual mode\n  3            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\n  4            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 manual mode\n\n</code></pre>\n"},{"tags":["java","random","while-loop"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1702022149,"post_id":77625051,"comment_id":136849067,"body_markdown":"you probably meant to move the guess-reading to inside the inner loop (the `do - while`), maybe adding some prompt BTW there is no need to use cast in `(int)guess &lt; (int)randChar` - `char` is already an integral number","body":"you probably meant to move the guess-reading to inside the inner loop (the <code>do - while</code>), maybe adding some prompt BTW there is no need to use cast in <code>(int)guess &lt; (int)randChar</code> - <code>char</code> is already an integral number"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1702037147,"post_id":77625051,"comment_id":136851449,"body_markdown":"continuation [here](https://stackoverflow.com/q/77625143/85421) ??","body":"continuation <a href=\"https://stackoverflow.com/q/77625143/85421\">here</a> ??"}],"answers":[{"comments":[{"owner":{"account_id":19945034,"reputation":15,"user_id":14615914,"display_name":"creativethoughts"},"score":0,"creation_date":1702022322,"post_id":77625086,"comment_id":136849092,"body_markdown":"But after the user guesses the correct letter, I want it to loop back and generate another if they want to play another game. How would i do it like this?","body":"But after the user guesses the correct letter, I want it to loop back and generate another if they want to play another game. How would i do it like this?"},{"owner":{"account_id":30091271,"reputation":1,"user_id":23060684,"display_name":"Christopher B."},"score":0,"creation_date":1702022684,"post_id":77625086,"comment_id":136849148,"body_markdown":"Ah, sorry, then as suggested in the comment on your post, move the `char guess = scan.next().charAt(0); ` inside the do while. If the outer loop is iterates only once per game, then you&#39;re only letting the user guess once per game as it is","body":"Ah, sorry, then as suggested in the comment on your post, move the <code>char guess = scan.next().charAt(0); </code> inside the do while. If the outer loop is iterates only once per game, then you&#39;re only letting the user guess once per game as it is"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1702022791,"post_id":77625086,"comment_id":136849169,"body_markdown":"better correct this answer... as suggested, the inner loop will be an infinite loop unless the guess is correct the first time (also true in original code)","body":"better correct this answer... as suggested, the inner loop will be an infinite loop unless the guess is correct the first time (also true in original code)"}],"tags":[],"owner":{"account_id":30091271,"reputation":1,"user_id":23060684,"display_name":"Christopher B."},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702022946,"creation_date":1702022051,"answer_id":77625086,"question_id":77625051,"body_markdown":"Move `char guess = scan.next().charAt(0);` inside the do while","title":"How to stop generating letter that is in a loop java","body":"<p>Move <code>char guess = scan.next().charAt(0);</code> inside the do while</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702052355,"creation_date":1702051685,"answer_id":77627859,"question_id":77625051,"body_markdown":"\r\n```\r\nScanner scan = new Scanner (System.in);\r\nRandom rnd = new Random();\r\n \r\n```\r\nPrompt for the guess inside the inner loop.  In addition to this and [Christopher B&#39;s](https://stackoverflow.com/a/77625086/1552534) suggestion.\r\n\r\n- The local variable `guess` needs to be defined outside the loop so the inner `while` statement can see it.\r\n- eliminate the break statements as they prematurely exit the inner loop.\r\n- When the loop ends, print something that signals the user guessed the answer.\r\n- it isn&#39;t necessary to cast `char` to `int` when comparing values. This was also mentioned in the comments.\r\n```\r\nwhile (true) {\r\n    char randChar = (char) (&#39;a&#39; + rnd.nextInt(26));\r\n    System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\r\n   \r\n    char guess;\r\n    do {\r\n        guess = scan.next().charAt(0);\r\n        if(guess &lt; randChar) {\r\n            System.out.println(&quot;The letter is later in the alphabet&quot;);  \r\n           \r\n        }\r\n        else if(guess &gt; randChar) {\r\n            System.out.println(&quot;The letter is earlier in the alphabet&quot;);\r\n        }\r\n                \r\n    } while (guess != randChar);\r\n    System.out.println(&quot;Correct!&quot;);\r\n}\r\n```\r\nI didn&#39;t include this, but you may want to check for a special character the user can enter that ends the game.       ","title":"How to stop generating letter that is in a loop java","body":"<pre><code>Scanner scan = new Scanner (System.in);\nRandom rnd = new Random();\n \n</code></pre>\n<p>Prompt for the guess inside the inner loop.  In addition to this and <a href=\"https://stackoverflow.com/a/77625086/1552534\">Christopher B's</a> suggestion.</p>\n<ul>\n<li>The local variable <code>guess</code> needs to be defined outside the loop so the inner <code>while</code> statement can see it.</li>\n<li>eliminate the break statements as they prematurely exit the inner loop.</li>\n<li>When the loop ends, print something that signals the user guessed the answer.</li>\n<li>it isn't necessary to cast <code>char</code> to <code>int</code> when comparing values. This was also mentioned in the comments.</li>\n</ul>\n<pre><code>while (true) {\n    char randChar = (char) ('a' + rnd.nextInt(26));\n    System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\n   \n    char guess;\n    do {\n        guess = scan.next().charAt(0);\n        if(guess &lt; randChar) {\n            System.out.println(&quot;The letter is later in the alphabet&quot;);  \n           \n        }\n        else if(guess &gt; randChar) {\n            System.out.println(&quot;The letter is earlier in the alphabet&quot;);\n        }\n                \n    } while (guess != randChar);\n    System.out.println(&quot;Correct!&quot;);\n}\n</code></pre>\n<p>I didn't include this, but you may want to check for a special character the user can enter that ends the game.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702052745,"creation_date":1702052745,"answer_id":77627954,"question_id":77625051,"body_markdown":"You should put generating the **expected** letter out of the loop, and give as many changes as needed to user in the loop to guess the letter.\r\n \r\n```java\r\npublic static void play(Scanner scan, Random random) {\r\n    char expected = (char) (&#39;a&#39; + random.nextInt(26));\r\n    System.out.println(&quot;I generated a random letter.&quot;);\r\n\r\n    while (true) {\r\n        System.out.print(&quot;Enter your guess: &quot;);\r\n        String str = scan.next().toLowerCase();\r\n\r\n        if (str.isBlank())\r\n            System.out.println(&quot;Enter at leas one letter&quot;);\r\n        else {\r\n            char actual = str.charAt(0);\r\n\r\n            if (actual == expected) {\r\n                System.out.println(&quot;Bingo!!!&quot;);\r\n                return;\r\n            }\r\n\r\n            System.out.format(&quot;The letter is %s in the alphabet\\n&quot;,\r\n                              actual &lt; expected ? &quot;later&quot; : &quot;earlier&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"How to stop generating letter that is in a loop java","body":"<p>You should put generating the <strong>expected</strong> letter out of the loop, and give as many changes as needed to user in the loop to guess the letter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void play(Scanner scan, Random random) {\n    char expected = (char) ('a' + random.nextInt(26));\n    System.out.println(&quot;I generated a random letter.&quot;);\n\n    while (true) {\n        System.out.print(&quot;Enter your guess: &quot;);\n        String str = scan.next().toLowerCase();\n\n        if (str.isBlank())\n            System.out.println(&quot;Enter at leas one letter&quot;);\n        else {\n            char actual = str.charAt(0);\n\n            if (actual == expected) {\n                System.out.println(&quot;Bingo!!!&quot;);\n                return;\n            }\n\n            System.out.format(&quot;The letter is %s in the alphabet\\n&quot;,\n                              actual &lt; expected ? &quot;later&quot; : &quot;earlier&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19945034,"reputation":15,"user_id":14615914,"display_name":"creativethoughts"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1702155931,"accepted_answer_id":77627859,"answer_count":3,"score":-3,"last_activity_date":1702052745,"creation_date":1702021579,"question_id":77625051,"body_markdown":"    Scanner scan = new Scanner (System.in);\r\n    Random rnd = new Random();\r\n        \r\n    boolean play = true;\r\n    int correctGue = 0;\r\n        \r\n        \r\n    while (play ==true) {\r\n        char randChar = (char) (&#39;a&#39; + rnd.nextInt(26));\r\n        System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\r\n        char guess = scan.next().charAt(0);\r\n        System.out.println(randChar);\r\n        do {\r\n            if((int)guess &lt; (int)randChar) {\r\n                System.out.println(&quot;The letter is later in the alphabet&quot;);  \r\n                break;\r\n            }\r\n            else if((int)guess &gt; (int)randChar) {\r\n                System.out.println(&quot;The letter is earlier in the alphabet&quot;);\r\n                break;\r\n            }\r\n                    \r\n        } while ((int)guess != (int)randChar);\r\n    }\r\n\r\n\r\nI want the program to generate a letter once until the user guesses it correctly. The problem is I have this `char randChar = (char) (&#39;a&#39; + rnd.nextInt(26)); and it keeps generating a different letter every time the user enter a letter. How would I have it generate once every game rather than changing the letter every time the user enters an input? \r\n\r\nFYI - will be adding a code later for the user to play again, or quit with the stats of how many correct guesses.","title":"How to stop generating letter that is in a loop java","body":"<pre><code>Scanner scan = new Scanner (System.in);\nRandom rnd = new Random();\n    \nboolean play = true;\nint correctGue = 0;\n    \n    \nwhile (play ==true) {\n    char randChar = (char) ('a' + rnd.nextInt(26));\n    System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\n    char guess = scan.next().charAt(0);\n    System.out.println(randChar);\n    do {\n        if((int)guess &lt; (int)randChar) {\n            System.out.println(&quot;The letter is later in the alphabet&quot;);  \n            break;\n        }\n        else if((int)guess &gt; (int)randChar) {\n            System.out.println(&quot;The letter is earlier in the alphabet&quot;);\n            break;\n        }\n                \n    } while ((int)guess != (int)randChar);\n}\n</code></pre>\n<p>I want the program to generate a letter once until the user guesses it correctly. The problem is I have this `char randChar = (char) ('a' + rnd.nextInt(26)); and it keeps generating a different letter every time the user enter a letter. How would I have it generate once every game rather than changing the letter every time the user enters an input?</p>\n<p>FYI - will be adding a code later for the user to play again, or quit with the stats of how many correct guesses.</p>\n"},{"tags":["java","spring-webflux","mockmvc"],"owner":{"account_id":406916,"reputation":757,"user_id":776683,"accept_rate":83,"display_name":"Mikhail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702052743,"creation_date":1702052743,"question_id":77627953,"body_markdown":"I recently migrated an older project to use Reactor, Flux, and Mono for handling web requests. The application is equipped with integration tests using MockMvc. While individual tests execute successfully, issues arise when running them in batches, especially when running five or more concurrently.\r\n\r\nThe problem manifests as incomplete or missing data in some of the test results, suggesting that the responses are returned before the Flux has completed processing. Interestingly, when executing a single test or introducing a debugger breakpoint in the controller, the tests consistently run without issues.\r\n\r\nSo far I&#39;ve tried\r\n\r\n    mockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn(); \r\nand\r\n\r\n    mvcResult.getAsyncResult();\r\nand even to combine them:\r\n\r\n    var mvcResult = mvc.perform(get(&quot;/&quot;))\r\n        .andExpect(request().asyncStarted())\r\n        .andDo(MvcResult::getAsyncResult)\r\n        .thenReturn();\r\n    mockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn();\r\n    \r\nHowever, the issue remains the same. Adding timeouts and Thread sleeps didn&#39;t change anything. Any idea what might be the issue? Can I somehow force MockMvc to actually wait until the result is complete before providing it to asserts?\r\n","title":"MockMVC integration tests for async reactor controllers - force wait for result","body":"<p>I recently migrated an older project to use Reactor, Flux, and Mono for handling web requests. The application is equipped with integration tests using MockMvc. While individual tests execute successfully, issues arise when running them in batches, especially when running five or more concurrently.</p>\n<p>The problem manifests as incomplete or missing data in some of the test results, suggesting that the responses are returned before the Flux has completed processing. Interestingly, when executing a single test or introducing a debugger breakpoint in the controller, the tests consistently run without issues.</p>\n<p>So far I've tried</p>\n<pre><code>mockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn(); \n</code></pre>\n<p>and</p>\n<pre><code>mvcResult.getAsyncResult();\n</code></pre>\n<p>and even to combine them:</p>\n<pre><code>var mvcResult = mvc.perform(get(&quot;/&quot;))\n    .andExpect(request().asyncStarted())\n    .andDo(MvcResult::getAsyncResult)\n    .thenReturn();\nmockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn();\n</code></pre>\n<p>However, the issue remains the same. Adding timeouts and Thread sleeps didn't change anything. Any idea what might be the issue? Can I somehow force MockMvc to actually wait until the result is complete before providing it to asserts?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702048670,"post_id":77627211,"comment_id":136853355,"body_markdown":"If you&#39;re going to use `FetchType.EAGER` on the relationship field anyway, then why have a separate field for the `category_id`?","body":"If you&#39;re going to use <code>FetchType.EAGER</code> on the relationship field anyway, then why have a separate field for the <code>category_id</code>?"},{"owner":{"account_id":29977205,"reputation":15,"user_id":22973119,"display_name":"european_2"},"score":0,"creation_date":1702049111,"post_id":77627211,"comment_id":136853448,"body_markdown":"@JohnBollinger I want to insert foreign key id (category_id) when creating Product instead of fetching Category first.","body":"@JohnBollinger I want to insert foreign key id (category_id) when creating Product instead of fetching Category first."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702051247,"post_id":77627211,"comment_id":136853891,"body_markdown":"But then the entity you are trying to persist is inconsistent.  I guess you&#39;ve annotated it well enough that the persistence provider will choose the correct source for the foreign key id, but inasmuch as you need at some point to fetch `Category`s in order to know about which ones exist in the first place, I&#39;m not seeing how this is the right place to be looking for an optimization.","body":"But then the entity you are trying to persist is inconsistent.  I guess you&#39;ve annotated it well enough that the persistence provider will choose the correct source for the foreign key id, but inasmuch as you need at some point to fetch <code>Category</code>s in order to know about which ones exist in the first place, I&#39;m not seeing how this is the right place to be looking for an optimization."}],"answers":[{"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702048692,"post_id":77627528,"comment_id":136853359,"body_markdown":"This is all good advice, but it&#39;s not clear how it answers the question posed.","body":"This is all good advice, but it&#39;s not clear how it answers the question posed."},{"owner":{"account_id":6970618,"reputation":25,"user_id":5347120,"display_name":"Alfred Benigno"},"score":0,"creation_date":1702049996,"post_id":77627528,"comment_id":136853629,"body_markdown":"edited my post. have a look at how to properly map in hibernate when joining tables. might help.","body":"edited my post. have a look at how to properly map in hibernate when joining tables. might help."}],"tags":[],"owner":{"account_id":6970618,"reputation":25,"user_id":5347120,"display_name":"Alfred Benigno"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702049927,"creation_date":1702048424,"answer_id":77627528,"question_id":77627211,"body_markdown":"I suggest you don&#39;t use lombok if you have complicated entities mapping in order for you to trace properly which ones are mapped to which. Don&#39;t forget the mandatory referencedColumnName when you join and foreign keys if there are any in your product class. You are joining it to your category table by id so in your category class, your id column name must be set to reference it properly.\r\n\r\n-- edit\r\n\r\nsample snippet:\r\n\r\nAuthorities.class\r\n\r\n    @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE,\r\n        CascadeType.REFRESH}, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;, foreignKey = @ForeignKey(foreignKeyDefinition = &quot;authorities_fk&quot;))\r\n    private User user;\r\n\r\nUser.class\r\n\r\n    @Id\r\n    @Column(name = &quot;username&quot;)\r\n    private String username;","title":"Hibernate not fetching foreign key object","body":"<p>I suggest you don't use lombok if you have complicated entities mapping in order for you to trace properly which ones are mapped to which. Don't forget the mandatory referencedColumnName when you join and foreign keys if there are any in your product class. You are joining it to your category table by id so in your category class, your id column name must be set to reference it properly.</p>\n<p>-- edit</p>\n<p>sample snippet:</p>\n<p>Authorities.class</p>\n<pre><code>@ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE,\n    CascadeType.REFRESH}, fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;, foreignKey = @ForeignKey(foreignKeyDefinition = &quot;authorities_fk&quot;))\nprivate User user;\n</code></pre>\n<p>User.class</p>\n<pre><code>@Id\n@Column(name = &quot;username&quot;)\nprivate String username;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29977205,"reputation":15,"user_id":22973119,"display_name":"european_2"},"score":0,"creation_date":1702055640,"post_id":77627949,"comment_id":136854608,"body_markdown":"Thank you. From what I&#39;ve seen, the majority of articles online use a single-field approach (category in my case). However, I was just wondering if having to fetch an entity from the database only to save another has any impact on performance?","body":"Thank you. From what I&#39;ve seen, the majority of articles online use a single-field approach (category in my case). However, I was just wondering if having to fetch an entity from the database only to save another has any impact on performance?"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702059445,"post_id":77627949,"comment_id":136855155,"body_markdown":"@european_2, with your two-field approach and trying to shortcut on setting the category, you definitely need `refresh()` to load the relationship, and that definitely will fetch all the way from the database.  If you just loaded a `Category` from a repository then you might get one that was loaded previously, and so save a round trip to the DB.  And you don&#39;t even have to go to the repository if you have the appropriate `Category` object hanging around from a previous load of that or an entity containing it.  This is what I mean by &quot;more harm than good&quot;.","body":"@european_2, with your two-field approach and trying to shortcut on setting the category, you definitely need <code>refresh()</code> to load the relationship, and that definitely will fetch all the way from the database.  If you just loaded a <code>Category</code> from a repository then you might get one that was loaded previously, and so save a round trip to the DB.  And you don&#39;t even have to go to the repository if you have the appropriate <code>Category</code> object hanging around from a previous load of that or an entity containing it.  This is what I mean by &quot;more harm than good&quot;."}],"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702052687,"creation_date":1702052687,"answer_id":77627949,"question_id":77627211,"body_markdown":"&gt;             Product pr = productRepository.save(product);\r\n&gt;             System.out.println(pr.getCategory()); // prints null\r\n\r\nBased on your comments on the question, I gather that you set only a category ID, not a `Category`, before persisting the `Product`.  In that case, it is unsurprising that &quot;null&quot; is printed.  Persisting a new entity with `save()` makes its existing state persistent.  There is no guarantee that its state will then be updated from the database, or, in particular, that relationships will be fetched.  Why would they be?  They were just saved.\r\n\r\nI think you&#39;re probably doing yourself more harm than good by mapping both `category` and `categoryId`, but if you continue with that then you will need to manually refresh your product entities after you save them to ensure that the `Category` associated with their (new or possibly changed) `categoryId` is fetched.  Given the appropriate Hibernate `Session` as `sess`, that would be\r\n```\r\n        Product pr = productRepository.save(product);\r\n        sess.refresh(pr);\r\n        System.out.println(pr.getCategory()); // prints null\r\n```\r\nOr given the appropriate `EntityManager` as `em`, you could use `em.refresh(pr)` instead of `sess.refresh(pr)`.  It looks like you are using Spring Data, but its repository interfaces do not define refresh methods that you could use directly, nor do they provide means to access an underlying `Session` or `EntityManager`, so you&#39;ll have to sort that out.","title":"Hibernate not fetching foreign key object","body":"<blockquote>\n<pre><code>        Product pr = productRepository.save(product);\n        System.out.println(pr.getCategory()); // prints null\n</code></pre>\n</blockquote>\n<p>Based on your comments on the question, I gather that you set only a category ID, not a <code>Category</code>, before persisting the <code>Product</code>.  In that case, it is unsurprising that &quot;null&quot; is printed.  Persisting a new entity with <code>save()</code> makes its existing state persistent.  There is no guarantee that its state will then be updated from the database, or, in particular, that relationships will be fetched.  Why would they be?  They were just saved.</p>\n<p>I think you're probably doing yourself more harm than good by mapping both <code>category</code> and <code>categoryId</code>, but if you continue with that then you will need to manually refresh your product entities after you save them to ensure that the <code>Category</code> associated with their (new or possibly changed) <code>categoryId</code> is fetched.  Given the appropriate Hibernate <code>Session</code> as <code>sess</code>, that would be</p>\n<pre><code>        Product pr = productRepository.save(product);\n        sess.refresh(pr);\n        System.out.println(pr.getCategory()); // prints null\n</code></pre>\n<p>Or given the appropriate <code>EntityManager</code> as <code>em</code>, you could use <code>em.refresh(pr)</code> instead of <code>sess.refresh(pr)</code>.  It looks like you are using Spring Data, but its repository interfaces do not define refresh methods that you could use directly, nor do they provide means to access an underlying <code>Session</code> or <code>EntityManager</code>, so you'll have to sort that out.</p>\n"}],"owner":{"account_id":29977205,"reputation":15,"user_id":22973119,"display_name":"european_2"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627949,"answer_count":2,"score":0,"last_activity_date":1702052687,"creation_date":1702045312,"question_id":77627211,"body_markdown":"I wanted to use this solution: https://stackoverflow.com/a/50378345/13995601\r\n\r\nIn Product.class:\r\n\r\n```\r\n    @JoinColumn(name = &quot;category_id&quot;, insertable = false, updatable = false)\r\n    @ManyToOne(targetEntity = Category.class, fetch = FetchType.EAGER)\r\n    private Category category;\r\n\r\n    @Column(name = &quot;category_id&quot;)\r\n    private Long categoryId;\r\n```\r\n\r\nCategory.class\r\n\r\n\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Table(name = &quot;categories&quot;)\r\npublic class Category {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;category_sequence&quot;)\r\n    @SequenceGenerator(name = &quot;category_sequence&quot;, sequenceName = &quot;category_sequence&quot;, allocationSize = 1)\r\n    private Long id;\r\n\r\n    @NotNull\r\n    private String name;\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n        Product pr = productRepository.save(product);\r\n        System.out.println(pr.getCategory()); // prints null\r\n```\r\n\r\n\r\nbut, when I fetch Product, only category_id is populated and not category and I want the category field.\r\nI used this approach in most places in my app, so it&#39;s important for me to understand what is the case.\r\n","title":"Hibernate not fetching foreign key object","body":"<p>I wanted to use this solution: <a href=\"https://stackoverflow.com/a/50378345/13995601\">https://stackoverflow.com/a/50378345/13995601</a></p>\n<p>In Product.class:</p>\n<pre><code>    @JoinColumn(name = &quot;category_id&quot;, insertable = false, updatable = false)\n    @ManyToOne(targetEntity = Category.class, fetch = FetchType.EAGER)\n    private Category category;\n\n    @Column(name = &quot;category_id&quot;)\n    private Long categoryId;\n</code></pre>\n<p>Category.class</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@Table(name = &quot;categories&quot;)\npublic class Category {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;category_sequence&quot;)\n    @SequenceGenerator(name = &quot;category_sequence&quot;, sequenceName = &quot;category_sequence&quot;, allocationSize = 1)\n    private Long id;\n\n    @NotNull\n    private String name;\n\n}\n</code></pre>\n<pre><code>        Product pr = productRepository.save(product);\n        System.out.println(pr.getCategory()); // prints null\n</code></pre>\n<p>but, when I fetch Product, only category_id is populated and not category and I want the category field.\nI used this approach in most places in my app, so it's important for me to understand what is the case.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":134484,"reputation":3552,"user_id":336657,"accept_rate":65,"display_name":"jpprade"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702045248,"creation_date":1702045248,"answer_id":77627206,"question_id":77627145,"body_markdown":"This will return all the ChildEntity whose parent has the nickname in parameter :\r\n\r\n    @Query(&quot;SELECT c FROM ChildEntity c join c.parentEntity p WHERE p.nickname = :nickname&quot;)\r\n    List&lt;ChildEntity&gt; retrieveByParentNickName(@Param(&quot;nickname&quot;) String nickname);","title":"I want children objects but I want to search them by parent fields in Hibernate","body":"<p>This will return all the ChildEntity whose parent has the nickname in parameter :</p>\n<pre><code>@Query(&quot;SELECT c FROM ChildEntity c join c.parentEntity p WHERE p.nickname = :nickname&quot;)\nList&lt;ChildEntity&gt; retrieveByParentNickName(@Param(&quot;nickname&quot;) String nickname);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702052544,"creation_date":1702052544,"answer_id":77627931,"question_id":77627145,"body_markdown":"I suggest using [query methods][1] where queries are derived from the method name directly without writing them manually. \r\n\r\nIn your case the method should be defined as follows:\r\n```java\r\nList&lt;ChildEntity&gt; findAllByParentEntity_Nickname(String nickname);\r\n```\r\n\r\n [1]: https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html","title":"I want children objects but I want to search them by parent fields in Hibernate","body":"<p>I suggest using <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">query methods</a> where queries are derived from the method name directly without writing them manually.</p>\n<p>In your case the method should be defined as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;ChildEntity&gt; findAllByParentEntity_Nickname(String nickname);\n</code></pre>\n"}],"owner":{"account_id":83131,"reputation":8752,"user_id":233286,"accept_rate":73,"display_name":"ilhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627206,"answer_count":2,"score":0,"last_activity_date":1702052544,"creation_date":1702044681,"question_id":77627145,"body_markdown":"How I can get all children objects by filtering them by a nickname of their parents?\r\n\r\nI have parent entity:\r\n\r\n    import jakarta.persistence.*;\r\n    import lombok.Data;\r\n    import org.hibernate.validator.constraints.Length;\r\n    \r\n    @Entity\r\n    @Data\r\n    @Table(name = &quot;parent&quot;)\r\n    public class ParentEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Byte id;\r\n\r\n        private Integer age;\r\n        \r\n        @Column(columnDefinition = &quot;VARCHAR(100)&quot;)\r\n        private String nickname;\r\n    }\r\n\r\n\r\nI have child entity:\r\n    \r\n    import jakarta.persistence.*;\r\n    import lombok.Data;\r\n    import org.hibernate.validator.constraints.Length;\r\n    \r\n    @Entity\r\n    @Data\r\n    @Table(name = &quot;child&quot;)\r\n    public class ChildEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n        private String name;\r\n    \r\n        private String surname;\r\n    \r\n        @Column(name = &quot;parent_id&quot;, nullable = false)\r\n        private Byte parentId;\r\n    \r\n        @ManyToOne(targetEntity = ParentEntity.class)\r\n        @JoinColumn(name = &quot;parent_id&quot;, updatable = false, insertable = false)\r\n        private ParentEntity parentEntity;\r\n    }\r\n\r\nAnd I have a repository:\r\n    \r\n    import com.example.ParentEntity;\r\n    import com.example.ChildEntity;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import java.util.List;\r\n    \r\n    @Repository\r\n    public interface ChildRepository extends JpaRepository&lt;ChildEntity, String&gt; {\r\n        // I guess something like this but I was not able to figure out\r\n        List&lt;ChildEntity&gt; findAllByParentEntity(String nickname);\r\n    }\r\n\r\n","title":"I want children objects but I want to search them by parent fields in Hibernate","body":"<p>How I can get all children objects by filtering them by a nickname of their parents?</p>\n<p>I have parent entity:</p>\n<pre><code>import jakarta.persistence.*;\nimport lombok.Data;\nimport org.hibernate.validator.constraints.Length;\n\n@Entity\n@Data\n@Table(name = &quot;parent&quot;)\npublic class ParentEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Byte id;\n\n    private Integer age;\n    \n    @Column(columnDefinition = &quot;VARCHAR(100)&quot;)\n    private String nickname;\n}\n</code></pre>\n<p>I have child entity:</p>\n<pre><code>import jakarta.persistence.*;\nimport lombok.Data;\nimport org.hibernate.validator.constraints.Length;\n\n@Entity\n@Data\n@Table(name = &quot;child&quot;)\npublic class ChildEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String name;\n\n    private String surname;\n\n    @Column(name = &quot;parent_id&quot;, nullable = false)\n    private Byte parentId;\n\n    @ManyToOne(targetEntity = ParentEntity.class)\n    @JoinColumn(name = &quot;parent_id&quot;, updatable = false, insertable = false)\n    private ParentEntity parentEntity;\n}\n</code></pre>\n<p>And I have a repository:</p>\n<pre><code>import com.example.ParentEntity;\nimport com.example.ChildEntity;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface ChildRepository extends JpaRepository&lt;ChildEntity, String&gt; {\n    // I guess something like this but I was not able to figure out\n    List&lt;ChildEntity&gt; findAllByParentEntity(String nickname);\n}\n</code></pre>\n"},{"tags":["java","data-structures","linked-list","queue","stack"],"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702031378,"post_id":77625894,"comment_id":136850527,"body_markdown":"Are you talking about the class definition, or about instances of the class (the actual linked lists)? *&quot;define a node inside a node&quot;* seems to talk about an actual linked list instance, but then you write *&quot;how can we define something...&quot;* which seems to refer to the class...","body":"Are you talking about the class definition, or about instances of the class (the actual linked lists)? <i>&quot;define a node inside a node&quot;</i> seems to talk about an actual linked list instance, but then you write <i>&quot;how can we define something...&quot;</i> which seems to refer to the class..."},{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702031797,"post_id":77625894,"comment_id":136850615,"body_markdown":"I am asking about the linkrdlist concept if it is about chained nodes how the node is written like that ?","body":"I am asking about the linkrdlist concept if it is about chained nodes how the node is written like that ?"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702031912,"post_id":77625894,"comment_id":136850633,"body_markdown":"*&quot;how the node is written like that&quot;*: like what? There is no node in the code you shared. Nodes would be created with `new LinkedListNode()`...","body":"<i>&quot;how the node is written like that&quot;</i>: like what? There is no node in the code you shared. Nodes would be created with <code>new LinkedListNode()</code>..."},{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702032145,"post_id":77625894,"comment_id":136850677,"body_markdown":"what I mean is how when we define the node class inside it we defined the reference next which is of same type?","body":"what I mean is how when we define the node class inside it we defined the reference next which is of same type?"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702032280,"post_id":77625894,"comment_id":136850698,"body_markdown":"OK, so you are not asking about the nodes then. You are asking about the class definition.","body":"OK, so you are not asking about the nodes then. You are asking about the class definition."},{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702032374,"post_id":77625894,"comment_id":136850705,"body_markdown":"yes , I think so :)","body":"yes , I think so :)"}],"answers":[{"comments":[{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702035843,"post_id":77626127,"comment_id":136851243,"body_markdown":"great ! so to get that right next is not an actual node because of that we don&#39;t have an infinite recursion right ?so whwn we make a node it would have a next ref which knows that it points to ADT which is the node after it","body":"great ! so to get that right next is not an actual node because of that we don&#39;t have an infinite recursion right ?so whwn we make a node it would have a next ref which knows that it points to ADT which is the node after it"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702035963,"post_id":77626127,"comment_id":136851265,"body_markdown":"In a `class` definition you don&#39;t create nodes. You just define types. And when that class has been defined, all involved types are known and ready to be used when you create an instance.","body":"In a <code>class</code> definition you don&#39;t create nodes. You just define types. And when that class has been defined, all involved types are known and ready to be used when you create an instance."}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1702034454,"creation_date":1702033636,"answer_id":77626127,"question_id":77625894,"body_markdown":"Compilers can do things differently (like in [one or multiple passes](https://stackoverflow.com/questions/35673818/difference-between-one-pass-and-multi-pass-compilers)), but we can imagine this process:\r\n\r\nWhen a compiler parses the code, it builds a table of symbols (names), which at the start is empty. For instance, we could imagine that table like this:\r\n\r\n| name | type | value |\r\n| ---- | ---- | ----- |\r\n|  ... | .... | ...   |\r\n\r\nWhen parsing `class LinkedlistNode` the symbol `LinkedlistNode` is added to that table:\r\n\r\n| name            | type  | value     |\r\n| --------------- | ----- | --------- |\r\n|  LinkedlistNode | class | (empty)   |\r\n\r\nThen `int data` is processed: the class gets its first member with a (primitive) type that is known:\r\n\r\n| name            | type  | value        |\r\n| --------------- | ----- | ------------ |\r\n|  LinkedlistNode | class | { int data } |\r\n\r\nWhen `LinkedlistNode next` is encountered, the name `LinkedListNode` is recognised, so there is no mystery there: the class gets its second member:\r\n\r\n| name            | type  | value                             |\r\n| --------------- | ----- | --------------------------------- |\r\n|  LinkedlistNode | class | { int data, LinkedListNode next } |\r\n\r\nWe just have introduced a backreference, a loop if you want. It was not a problem that the *value* part of `LinkedListNode` was not yet finalised. The only thing that matters here is that `LinkedListNode` is an entry in our symbol table at the moment we encounter it again -- which is the case here.\r\n\r\nWithout any issue this graph is created:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBe aware that this is not an *instance* of `LinkedListNode`. It is &quot;just&quot; the class definition. \r\n\r\nOnce you start creating actual nodes with `new LinkedListNode()`, the `next` member will be initialised with `null`. Then you *could* replace that `null` with another `new LinkedListNode()`, ...etc, and build your linked list.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KiSJS.png","title":"How compiler understand self referential structures ? should it be infinite recursion?","body":"<p>Compilers can do things differently (like in <a href=\"https://stackoverflow.com/questions/35673818/difference-between-one-pass-and-multi-pass-compilers\">one or multiple passes</a>), but we can imagine this process:</p>\n<p>When a compiler parses the code, it builds a table of symbols (names), which at the start is empty. For instance, we could imagine that table like this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>...</td>\n<td>....</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>When parsing <code>class LinkedlistNode</code> the symbol <code>LinkedlistNode</code> is added to that table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedlistNode</td>\n<td>class</td>\n<td>(empty)</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Then <code>int data</code> is processed: the class gets its first member with a (primitive) type that is known:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedlistNode</td>\n<td>class</td>\n<td>{ int data }</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>When <code>LinkedlistNode next</code> is encountered, the name <code>LinkedListNode</code> is recognised, so there is no mystery there: the class gets its second member:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedlistNode</td>\n<td>class</td>\n<td>{ int data, LinkedListNode next }</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>We just have introduced a backreference, a loop if you want. It was not a problem that the <em>value</em> part of <code>LinkedListNode</code> was not yet finalised. The only thing that matters here is that <code>LinkedListNode</code> is an entry in our symbol table at the moment we encounter it again -- which is the case here.</p>\n<p>Without any issue this graph is created:</p>\n<p><a href=\"https://i.stack.imgur.com/KiSJS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KiSJS.png\" alt=\"enter image description here\" /></a></p>\n<p>Be aware that this is not an <em>instance</em> of <code>LinkedListNode</code>. It is &quot;just&quot; the class definition.</p>\n<p>Once you start creating actual nodes with <code>new LinkedListNode()</code>, the <code>next</code> member will be initialised with <code>null</code>. Then you <em>could</em> replace that <code>null</code> with another <code>new LinkedListNode()</code>, ...etc, and build your linked list.</p>\n"},{"tags":[],"owner":{"account_id":3979878,"reputation":27592,"user_id":3282056,"accept_rate":80,"display_name":"rcgldr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702052055,"creation_date":1702052055,"answer_id":77627887,"question_id":77625894,"body_markdown":"`next` is a reference to a node, not an instance of a node. It is essentially a pointer to a node.","title":"How compiler understand self referential structures ? should it be infinite recursion?","body":"<p><code>next</code> is a reference to a node, not an instance of a node. It is essentially a pointer to a node.</p>\n"}],"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1702052055,"creation_date":1702031036,"question_id":77625894,"body_markdown":"\r\n\r\n      class LinkedlistNode {\r\n       int data;\r\n       LinkedlistNode next=null ;\r\n\r\n      }`\r\n\r\n\r\nfrom the first day I got to the concept of linkedlist , I was never convinced how can we define a node inside a node . How can we define something while we are already defining it ?\r\n\r\nI tried to ask chat gpt he told me that compiler knew earlier that there is class called node but its definition isn&#39;t completed yet so it waits until classes are loaded by JVM but I wasn&#39;t convinced . Then on Quora I saw an answer says that pointers or references already have a fixed size.","title":"How compiler understand self referential structures ? should it be infinite recursion?","body":"<pre><code>  class LinkedlistNode {\n   int data;\n   LinkedlistNode next=null ;\n\n  }`\n</code></pre>\n<p>from the first day I got to the concept of linkedlist , I was never convinced how can we define a node inside a node . How can we define something while we are already defining it ?</p>\n<p>I tried to ask chat gpt he told me that compiler knew earlier that there is class called node but its definition isn't completed yet so it waits until classes are loaded by JVM but I wasn't convinced . Then on Quora I saw an answer says that pointers or references already have a fixed size.</p>\n"},{"tags":["java","oop","nullpointerexception"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1702051323,"post_id":77627810,"comment_id":136853907,"body_markdown":"When you create an array of reference type (here an array of Student type), the array is initially filled with nothing but null values. You cannot use any of the array items until you first create new Student  objects and put them into the array. Think of a reference array like an empty egg carton. You can&#39;t make an omelet with the contents of the carton until it is first filled with eggs.","body":"When you create an array of reference type (here an array of Student type), the array is initially filled with nothing but null values. You cannot use any of the array items until you first create new Student  objects and put them into the array. Think of a reference array like an empty egg carton. You can&#39;t make an omelet with the contents of the carton until it is first filled with eggs."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1702051388,"post_id":77627810,"comment_id":136853917,"body_markdown":"So the first line of the for loop should be something on the order of `s[i] = new StudentClassandObject.Student();` to create the &quot;egg&quot;, the object that then can have its state changed.","body":"So the first line of the for loop should be something on the order of <code>s[i] = new StudentClassandObject.Student();</code> to create the &quot;egg&quot;, the object that then can have its state changed."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1702051444,"post_id":77627810,"comment_id":136853928,"body_markdown":"Side note, there is no need or even reason to nest the Student class inside of the StudentClassandObject class. Best to get it out of there and into its own `Student.java` file.","body":"Side note, there is no need or even reason to nest the Student class inside of the StudentClassandObject class. Best to get it out of there and into its own <code>Student.java</code> file."}],"owner":{"account_id":28657187,"reputation":1,"user_id":21942904,"display_name":"Vignesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702051262,"answer_count":0,"score":-2,"last_activity_date":1702052015,"creation_date":1702051221,"question_id":77627810,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class StudentClassandObject {\r\n\tprivate static final Scanner in = new Scanner(System.in);\r\n\r\n\tpublic static Scanner in() {\r\n\t\treturn in;\r\n\t}\r\n\r\n\tpublic static class Student{\r\n\t\tString Name;\r\n\t\tint Reg_no;\r\n\t\tint marks;\r\n\t}\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tSystem.out.print(&quot;Enter number of Students: &quot;);\r\n\t\tint n = in().nextInt();\r\n\t\tStudentClassandObject.Student[] s = new StudentClassandObject.Student[n];\r\n\t\tfor(int i = 0; i&lt;n;i++){\r\n\t\t\tSystem.out.println(&quot;Enter details of Student &quot;+i+1);\r\n\t\t\tSystem.out.print(&quot;Name: &quot;);\r\n\t\t\ts[i].Name = in.nextLine();\r\n\t\t\tSystem.out.print(&quot;Registration number: &quot;);\r\n\t\t\ts[i].Reg_no = in.nextInt();\r\n\t\t\tSystem.out.print(&quot;Marks: &quot;);\r\n\t\t\ts[i].marks = in.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Details: &quot;);\r\n\t\tfor(int i = 0; i&lt;n;i++){\r\n\t\t\tSystem.out.println(&quot;Details of Student &quot;+i+1);\r\n\t\t\tSystem.out.println(&quot;Name: &quot;+s[i].Name);\r\n\t\t\tSystem.out.println(&quot;Registration number: &quot;+s[i].Reg_no);\r\n\t\t\tSystem.out.println(&quot;Marks: &quot;+s[i].marks);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nI was trying out this program in order to read Details of N students and print the same using class Student and Object s, but unfortunately the following error occurred out of nowhere? I dont know what the following error means\r\n\r\n```\r\nEnter number of Students: 2\r\nEnter details of Student 01\r\nName: Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;Name&quot; because &quot;s[i]&quot; is null\r\n\tat StudentClassandObject.main(StudentClassandObject.java:26)\r\n\r\nProcess finished with exit code 1\r\n```\r\n ","title":"Resolving java.lang.NullPointerException","body":"<pre><code>import java.util.Scanner;\n\npublic class StudentClassandObject {\n    private static final Scanner in = new Scanner(System.in);\n\n    public static Scanner in() {\n        return in;\n    }\n\n    public static class Student{\n        String Name;\n        int Reg_no;\n        int marks;\n    }\n\n    public static void main(String[] args){\n        System.out.print(&quot;Enter number of Students: &quot;);\n        int n = in().nextInt();\n        StudentClassandObject.Student[] s = new StudentClassandObject.Student[n];\n        for(int i = 0; i&lt;n;i++){\n            System.out.println(&quot;Enter details of Student &quot;+i+1);\n            System.out.print(&quot;Name: &quot;);\n            s[i].Name = in.nextLine();\n            System.out.print(&quot;Registration number: &quot;);\n            s[i].Reg_no = in.nextInt();\n            System.out.print(&quot;Marks: &quot;);\n            s[i].marks = in.nextInt();\n        }\n        System.out.println(&quot;Details: &quot;);\n        for(int i = 0; i&lt;n;i++){\n            System.out.println(&quot;Details of Student &quot;+i+1);\n            System.out.println(&quot;Name: &quot;+s[i].Name);\n            System.out.println(&quot;Registration number: &quot;+s[i].Reg_no);\n            System.out.println(&quot;Marks: &quot;+s[i].marks);\n        }\n    }\n}\n</code></pre>\n<p>I was trying out this program in order to read Details of N students and print the same using class Student and Object s, but unfortunately the following error occurred out of nowhere? I dont know what the following error means</p>\n<pre><code>Enter number of Students: 2\nEnter details of Student 01\nName: Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;Name&quot; because &quot;s[i]&quot; is null\n    at StudentClassandObject.main(StudentClassandObject.java:26)\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","active-directory","kerberos","spnego","gssapi"],"owner":{"account_id":15827598,"reputation":53,"user_id":11420000,"display_name":"Kamilox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702051706,"creation_date":1702051706,"question_id":77627862,"body_markdown":"I have an application with kerberos auth. I implemented it with spring-security-kerberos. I  also used the com.kerb4j.kerb4j-server-spring-security for reading group SIDs from kerberos ticket. I used classes like *KerberosAuthenticationProvider*, *KerberosServiceAuthenticationProvider*, *SunJaasKerberosTicketValidator*, *PacLogonInfo*, *com.kerb4j.server.marshall.pac.Pac*, *SpnegoInitToken*.\r\n\r\nEverything works fine but I am just curious, should I try to implement something like validating kerberos tickets and PACs in AD server? Or validating it with *SunJaasKerberosTicketValidator* is enought?\r\n\r\nHow can I find out that SIDs are compressed and PACs are signatured?","title":"Is kerberos ticket validation in AD required?","body":"<p>I have an application with kerberos auth. I implemented it with spring-security-kerberos. I  also used the com.kerb4j.kerb4j-server-spring-security for reading group SIDs from kerberos ticket. I used classes like <em>KerberosAuthenticationProvider</em>, <em>KerberosServiceAuthenticationProvider</em>, <em>SunJaasKerberosTicketValidator</em>, <em>PacLogonInfo</em>, <em>com.kerb4j.server.marshall.pac.Pac</em>, <em>SpnegoInitToken</em>.</p>\n<p>Everything works fine but I am just curious, should I try to implement something like validating kerberos tickets and PACs in AD server? Or validating it with <em>SunJaasKerberosTicketValidator</em> is enought?</p>\n<p>How can I find out that SIDs are compressed and PACs are signatured?</p>\n"},{"tags":["java","xsd"],"answers":[{"tags":[],"owner":{"account_id":1446012,"reputation":66,"user_id":1364462,"display_name":"chalailama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702051624,"creation_date":1702051624,"answer_id":77627854,"question_id":64477344,"body_markdown":"You can use a bindings file that tells jaxb to convert `xsd:double` to BigDecimal \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               jaxb:version=&quot;2.1&quot;&gt;\r\n    &lt;jaxb:globalBindings generateElementProperty=&quot;false&quot;&gt;\r\n        &lt;xjc:javaType adapter=&quot;utils.BigDecimalXmlAdapter&quot; name=&quot;java.math.BigDecimal&quot; xmlType=&quot;xs:double&quot;/&gt;\r\n    &lt;/jaxb:globalBindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nand BigDecimalXmlAdapter is \r\n\r\n```java\r\npackage utils;\r\n\r\nimport javax.xml.bind.annotation.adapters.XmlAdapter;\r\nimport java.math.BigDecimal;\r\n\r\npublic class BigDecimalXmlAdapter extends XmlAdapter&lt;String, BigDecimal&gt; {\r\n\r\n    @Override\r\n    public BigDecimal unmarshal(String s) throws Exception {\r\n        return new BigDecimal(s);\r\n    }\r\n\r\n    @Override\r\n    public String marshal(BigDecimal bigDecimal) throws Exception {\r\n        return bigDecimal.toString();\r\n    }\r\n}\r\n```","title":"XSD double binding to BigDecimal","body":"<p>You can use a bindings file that tells jaxb to convert <code>xsd:double</code> to BigDecimal</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n               jaxb:version=&quot;2.1&quot;&gt;\n    &lt;jaxb:globalBindings generateElementProperty=&quot;false&quot;&gt;\n        &lt;xjc:javaType adapter=&quot;utils.BigDecimalXmlAdapter&quot; name=&quot;java.math.BigDecimal&quot; xmlType=&quot;xs:double&quot;/&gt;\n    &lt;/jaxb:globalBindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>and BigDecimalXmlAdapter is</p>\n<pre class=\"lang-java prettyprint-override\"><code>package utils;\n\nimport javax.xml.bind.annotation.adapters.XmlAdapter;\nimport java.math.BigDecimal;\n\npublic class BigDecimalXmlAdapter extends XmlAdapter&lt;String, BigDecimal&gt; {\n\n    @Override\n    public BigDecimal unmarshal(String s) throws Exception {\n        return new BigDecimal(s);\n    }\n\n    @Override\n    public String marshal(BigDecimal bigDecimal) throws Exception {\n        return bigDecimal.toString();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13380355,"reputation":396,"user_id":9655823,"display_name":"merc-angel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1702051624,"creation_date":1603351959,"question_id":64477344,"body_markdown":"I have \t\t\t\r\n\r\n    &lt;xsd:element name=&quot;amount&quot; type=&quot;xsd:double&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;\r\n\r\nin my xsd schema element. \r\n\r\n\r\nBut unfortunately I can&#39;t change that. Based on this document, I generate a class in Java with\r\nApache CXF. How can I parse this, get generated value in BigDecimal. \r\n\r\nNow I have\r\n\r\n    protected Double amount;\r\n\r\nBut I want something like this\r\n\r\n    protected BigDecimal amount;\r\n\r\n\r\nBut I cant change my xsd element with Double. I would also not like to do it globally, but only for selected fields. Is it possible?\r\n\r\n","title":"XSD double binding to BigDecimal","body":"<p>I have</p>\n<pre><code>&lt;xsd:element name=&quot;amount&quot; type=&quot;xsd:double&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;\n</code></pre>\n<p>in my xsd schema element.</p>\n<p>But unfortunately I can't change that. Based on this document, I generate a class in Java with\nApache CXF. How can I parse this, get generated value in BigDecimal.</p>\n<p>Now I have</p>\n<pre><code>protected Double amount;\n</code></pre>\n<p>But I want something like this</p>\n<pre><code>protected BigDecimal amount;\n</code></pre>\n<p>But I cant change my xsd element with Double. I would also not like to do it globally, but only for selected fields. Is it possible?</p>\n"},{"tags":["java","hazelcast","vert.x","vertx-verticle","vertx-eventbus"],"answers":[{"comments":[{"owner":{"account_id":1804616,"reputation":440,"user_id":1642027,"accept_rate":80,"display_name":"Areeb Gillani"},"score":0,"creation_date":1702057480,"post_id":77627831,"comment_id":136854889,"body_markdown":"After my analysis I am getting on the conclusion that writing the data on sharedMap is actually slow. Because we are using routingContext.body().asString() and it doesn&#39;t take much time (a few microseconds maybe) as I have timestamped it. Whereas, sharedMap is taking almost 1.7seconds as per my timestamp in the logs. I am still investigating but this is what I am seeing so far.","body":"After my analysis I am getting on the conclusion that writing the data on sharedMap is actually slow. Because we are using routingContext.body().asString() and it doesn&#39;t take much time (a few microseconds maybe) as I have timestamped it. Whereas, sharedMap is taking almost 1.7seconds as per my timestamp in the logs. I am still investigating but this is what I am seeing so far."},{"owner":{"account_id":1804616,"reputation":440,"user_id":1642027,"accept_rate":80,"display_name":"Areeb Gillani"},"score":0,"creation_date":1702057495,"post_id":77627831,"comment_id":136854892,"body_markdown":"I am although running all the services on the same system but this line from the vertx docs is depicting the same situation &quot;Beware that the latency relative to asynchronous shared map operations can be much higher in clustered than in local mode&quot; https://vertx.io/docs/vertx-core/java/#_using_the_shareddata_api","body":"I am although running all the services on the same system but this line from the vertx docs is depicting the same situation &quot;Beware that the latency relative to asynchronous shared map operations can be much higher in clustered than in local mode&quot; <a href=\"https://vertx.io/docs/vertx-core/java/#_using_the_shareddata_api\" rel=\"nofollow noreferrer\">vertx.io/docs/vertx-core/java/#_using_the_shareddata_api</a>"}],"tags":[],"owner":{"account_id":14230921,"reputation":836,"user_id":10280183,"display_name":"Mike Yawn"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702051428,"creation_date":1702051428,"answer_id":77627831,"question_id":77623208,"body_markdown":"Hard to say with any certainty what might be happening, but what serialization method are you using for the Hazelcast map?  Java Serializable is very inefficient so if that is being used, changing that to something like Compact or IdentifiedDataSerializable could make a difference. ","title":"Vertx Event Bus And Hazelcast Scaling","body":"<p>Hard to say with any certainty what might be happening, but what serialization method are you using for the Hazelcast map?  Java Serializable is very inefficient so if that is being used, changing that to something like Compact or IdentifiedDataSerializable could make a difference.</p>\n"}],"owner":{"account_id":1804616,"reputation":440,"user_id":1642027,"accept_rate":80,"display_name":"Areeb Gillani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702051428,"creation_date":1701985126,"question_id":77623208,"body_markdown":"I am using Vertx 4.4.5 in my project. I have created a few services and achieved a 3k TPS with 11 microservices on an 18 core VM running on Dell R730 with OS RHEL 9. Each request cycle has multiple read and writes on database as well as on Redis. Redis and Database are on the same machine but on different VM. \r\n\r\nThe message size was around 1kb when the TPS was 3k. Whereas, when I increase the message size to approx. 100kb which is to be considered an average production message size. The TPS dropped to 600. I checked the logs and found that event bus&#39;s consumer is getting the message after a few seconds delay. I googled and found that event bus is not designed for large messages so I used shared data to write my 100kb message on an async map and used the event bus to send the apiKey only for identification and fetching purpose. So, on my next service I fetch that data using that apiKey from the shared data map, asynchronously. \r\n\r\nThe problem is from service A (ApiGateWay) to B (BusinessService) I write all the 100kb in shared data and upon completion of writing the data on shared data\r\n\r\n    map.put(.., ..).onCompelete(res-&gt;{\r\n    if(res.succeed()){\r\n       eventBus.request(.., .., ..);\r\n    }\r\n    });\r\n\r\n \r\n\r\nI called the event buss using\r\n\r\n    eventBus.request(.., .., ..);\r\n\r\n \r\nto send data to next service, whereas on the other service the consumer receives this message after the same delay which was before when I was using event bus and not shared data. I have also set the message buffer of consumer as well to 10k.\r\n\r\n    eventBus.consumer(.., ..).setMaxBufferedMessages(10000);\r\n\r\nAm I missing something? Some other configs are:\r\n\r\n&gt; WorkerInstances on A -&gt; 100 WorkerPoolSize on A -&gt; 100\r\n&gt; \r\n&gt; WorkerInstances on B -&gt; 100 WorkerPoolSize on B -&gt; 100\r\n\r\nI have also tried to scale hazelcast when starting service A and B using\r\n\r\n     -Dhazelcast.socket.receive.buffer.size=10240 -Dhazelcast.socket.send.buffer.size=10240\r\nLoad Run Details\r\n\r\n&gt; - Jmeter\r\n&gt; - 7000 Threads\r\n&gt; - 100 loop count\r\n&gt; - 0.7s Ramp up\r\n&gt; - 1000ms Constant Delay\r\n\r\nThanks for your help in advance. Cheers!","title":"Vertx Event Bus And Hazelcast Scaling","body":"<p>I am using Vertx 4.4.5 in my project. I have created a few services and achieved a 3k TPS with 11 microservices on an 18 core VM running on Dell R730 with OS RHEL 9. Each request cycle has multiple read and writes on database as well as on Redis. Redis and Database are on the same machine but on different VM.</p>\n<p>The message size was around 1kb when the TPS was 3k. Whereas, when I increase the message size to approx. 100kb which is to be considered an average production message size. The TPS dropped to 600. I checked the logs and found that event bus's consumer is getting the message after a few seconds delay. I googled and found that event bus is not designed for large messages so I used shared data to write my 100kb message on an async map and used the event bus to send the apiKey only for identification and fetching purpose. So, on my next service I fetch that data using that apiKey from the shared data map, asynchronously.</p>\n<p>The problem is from service A (ApiGateWay) to B (BusinessService) I write all the 100kb in shared data and upon completion of writing the data on shared data</p>\n<pre><code>map.put(.., ..).onCompelete(res-&gt;{\nif(res.succeed()){\n   eventBus.request(.., .., ..);\n}\n});\n</code></pre>\n<p>I called the event buss using</p>\n<pre><code>eventBus.request(.., .., ..);\n</code></pre>\n<p>to send data to next service, whereas on the other service the consumer receives this message after the same delay which was before when I was using event bus and not shared data. I have also set the message buffer of consumer as well to 10k.</p>\n<pre><code>eventBus.consumer(.., ..).setMaxBufferedMessages(10000);\n</code></pre>\n<p>Am I missing something? Some other configs are:</p>\n<blockquote>\n<p>WorkerInstances on A -&gt; 100 WorkerPoolSize on A -&gt; 100</p>\n<p>WorkerInstances on B -&gt; 100 WorkerPoolSize on B -&gt; 100</p>\n</blockquote>\n<p>I have also tried to scale hazelcast when starting service A and B using</p>\n<pre><code> -Dhazelcast.socket.receive.buffer.size=10240 -Dhazelcast.socket.send.buffer.size=10240\n</code></pre>\n<p>Load Run Details</p>\n<blockquote>\n<ul>\n<li>Jmeter</li>\n<li>7000 Threads</li>\n<li>100 loop count</li>\n<li>0.7s Ramp up</li>\n<li>1000ms Constant Delay</li>\n</ul>\n</blockquote>\n<p>Thanks for your help in advance. Cheers!</p>\n"},{"tags":["java","java-8","completable-future"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1516969871,"post_id":48461315,"comment_id":83915600,"body_markdown":"Using actual code would make the question clearer.","body":"Using actual code would make the question clearer."},{"owner":{"account_id":5163818,"reputation":750,"user_id":4207648,"accept_rate":67,"display_name":"Valya"},"score":0,"creation_date":1516971076,"post_id":48461315,"comment_id":83916194,"body_markdown":"@assylias added the code.","body":"@assylias added the code."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1516984507,"post_id":48461315,"comment_id":83924567,"body_markdown":"Your code doesn’t match what you have written in the question’s title. There is no `CompletableFuture&lt;Stream&lt;T&gt;&gt;` in you code.","body":"Your code doesn’t match what you have written in the question’s title. There is no <code>CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> in you code."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1516986346,"post_id":48461315,"comment_id":83925672,"body_markdown":"Besides the mismatching title, why do you insist of complicating your code by doing *two* of these transformations?","body":"Besides the mismatching title, why do you insist of complicating your code by doing <i>two</i> of these transformations?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1517011850,"post_id":48461315,"comment_id":83936506,"body_markdown":"Related: [How to divide 1 completablefuture to many completablefuture in stream?](https://stackoverflow.com/q/39792291/525036)","body":"Related: <a href=\"https://stackoverflow.com/q/39792291/525036\">How to divide 1 completablefuture to many completablefuture in stream?</a>"}],"answers":[{"comments":[{"owner":{"account_id":477949,"reputation":5606,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"score":0,"creation_date":1516971795,"post_id":48461833,"comment_id":83916599,"body_markdown":"Not sure I agree with the first one. T--&gt; CompletableFuture&lt;T&gt; as follows final CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(new Supplier&lt;String&gt;() ....","body":"Not sure I agree with the first one. T--&gt; CompletableFuture&lt;T&gt; as follows final CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(new Supplier&lt;String&gt;() ...."},{"owner":{"account_id":3313246,"reputation":26489,"user_id":2786156,"accept_rate":76,"display_name":"St.Antario"},"score":0,"creation_date":1516972588,"post_id":48461833,"comment_id":83917024,"body_markdown":"@user889742 Do not quite understand what you mean. Of course we can use, according to monad definition we need to have `pure(t: T): M[T]`, but from just `T --&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt;` we cannot construct `T --&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt;`. If you have a map between some sets `A --&gt; B --&gt; C`, can you construct `A --&gt; C --&gt; B`? Makes no sense to me.","body":"@user889742 Do not quite understand what you mean. Of course we can use, according to monad definition we need to have <code>pure(t: T): M[T]</code>, but from just <code>T --&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> we cannot construct <code>T --&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt;</code>. If you have a map between some sets <code>A --&gt; B --&gt; C</code>, can you construct <code>A --&gt; C --&gt; B</code>? Makes no sense to me."}],"tags":[],"owner":{"account_id":3313246,"reputation":26489,"user_id":2786156,"accept_rate":76,"display_name":"St.Antario"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516971447,"creation_date":1516971447,"answer_id":48461833,"question_id":48461315,"body_markdown":"In general you cannot perform this sort of reversing. In functional categories language, you have two functors between the following categories:\r\n\r\n    T --&gt; Stream&lt;T&gt;\r\n    Stream&lt;T&gt; --&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt;\r\n\r\nYou simply do not have a functor between\r\n\r\n    T --&gt; CompletableFuture&lt;T&gt;\r\n    CompletableFuture&lt;T&gt; --&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt;\r\n\r\nIf you don&#39;t want to care about the outer `CompletableFuture` and need `Stream` semantic, you need some sort of `StreamT` [monad transfomer][1]. Java currently do not have higher-kinded types support, so I&#39;m not sure (but maybe applying some non-standard tricks) it is possible to implement something like `StreamT`\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Monad_transformer","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>In general you cannot perform this sort of reversing. In functional categories language, you have two functors between the following categories:</p>\n\n<pre><code>T --&gt; Stream&lt;T&gt;\nStream&lt;T&gt; --&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt;\n</code></pre>\n\n<p>You simply do not have a functor between</p>\n\n<pre><code>T --&gt; CompletableFuture&lt;T&gt;\nCompletableFuture&lt;T&gt; --&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt;\n</code></pre>\n\n<p>If you don't want to care about the outer <code>CompletableFuture</code> and need <code>Stream</code> semantic, you need some sort of <code>StreamT</code> <a href=\"https://en.wikipedia.org/wiki/Monad_transformer\" rel=\"nofollow noreferrer\">monad transfomer</a>. Java currently do not have higher-kinded types support, so I'm not sure (but maybe applying some non-standard tricks) it is possible to implement something like <code>StreamT</code></p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1516984367,"post_id":48462960,"comment_id":83924474,"body_markdown":"I don’t understand the purpose of this separation into the two methods `unwrap` and `generate`. What you have written in `test` could have been placed directy into the `tryAdvance` method. But anyway, it’s not more lazy than a simple `.flatMap(each -&gt; each.join().stream()) .map(CompletableFuture::completedFuture)`…","body":"I don’t understand the purpose of this separation into the two methods <code>unwrap</code> and <code>generate</code>. What you have written in <code>test</code> could have been placed directy into the <code>tryAdvance</code> method. But anyway, it’s not more lazy than a simple <code>.flatMap(each -&gt; each.join().stream()) .map(CompletableFuture::completedFuture)</code>…"},{"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1517031329,"post_id":48462960,"comment_id":83939553,"body_markdown":"@Holger yes, sir. I agree, after answer it I found it can simplify it as yours. but I want to show the usage of the `Spliterator` at first time, maybe it is overhead, :)","body":"@Holger yes, sir. I agree, after answer it I found it can simplify it as yours. but I want to show the usage of the <code>Spliterator</code> at first time, maybe it is overhead, :)"},{"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1517031733,"post_id":48462960,"comment_id":83939610,"body_markdown":"@Holger I used `Predicate` to separate the iteration logic out of the `generate`. we can think of adapt a `Predicate`  to a `Spliterator`. am I right, sir?","body":"@Holger I used <code>Predicate</code> to separate the iteration logic out of the <code>generate</code>. we can think of adapt a <code>Predicate</code>  to a <code>Spliterator</code>. am I right, sir?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1517214010,"post_id":48462960,"comment_id":83986896,"body_markdown":"There is no real separation here, as 99% of the logic is within the `unwrap` method and since the `Predicate` deals with an `Iterator`, it bears iteration logic anyway.","body":"There is no real separation here, as 99% of the logic is within the <code>unwrap</code> method and since the <code>Predicate</code> deals with an <code>Iterator</code>, it bears iteration logic anyway."},{"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1517216508,"post_id":48462960,"comment_id":83988161,"body_markdown":"@Holger thanks for your audit. so is the answer an anti-pattern? could you give me some keywords or suggestion? I&#39;m interested in it.","body":"@Holger thanks for your audit. so is the answer an anti-pattern? could you give me some keywords or suggestion? I&#39;m interested in it."},{"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1517216960,"post_id":48462960,"comment_id":83988402,"body_markdown":"@Holger in fact, there is no `generate` method in the first worked around code. while I remember the `Stream#generate`, it was extracted with `Predicate` after I found there is no suitable built-in functional interface in jdk, :)","body":"@Holger in fact, there is no <code>generate</code> method in the first worked around code. while I remember the <code>Stream#generate</code>, it was extracted with <code>Predicate</code> after I found there is no suitable built-in functional interface in jdk, :)"}],"tags":[],"owner":{"account_id":10312640,"reputation":29939,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517499233,"creation_date":1516975716,"answer_id":48462960,"question_id":48461315,"body_markdown":"If I don&#39;t misunderstand your intention, you want to flatten the result only. you can use the `Spliterator` to receive result lazily &amp; use `flatMap` to merge `Stream`s into a flatten stream, for example:\r\n\r\n    Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\r\n                   scrappingFutures.flatMap(each -&gt; unwrap(each));\r\n\r\n\r\n---\r\n\r\n    static &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \r\n      unwrap(CompletableFuture&lt;? extends List&lt;? extends T&gt;&gt; master) {\r\n\r\n        return generate(new Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt;() {\r\n\r\n            private Iterator&lt;? extends T&gt; cursor;\r\n\r\n            @Override\r\n            public boolean test(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; consumer) {\r\n                cursor = cursor == null ? await().iterator() : cursor;\r\n                if (cursor.hasNext()) {\r\n                    consumer.accept(completedFuture(cursor.next()));\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n\r\n            //                        v--- blocked at the first time\r\n            private List&lt;? extends T&gt; await() {\r\n                try {\r\n                    return master.get();\r\n                } catch (InterruptedException | ExecutionException e) {\r\n                    throw new CompletionException(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    static &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \r\n      generate(Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt; generator) {\r\n\r\n        long unknownSize = Long.MAX_VALUE;\r\n        return stream(new AbstractSpliterator&lt;CompletableFuture&lt;T&gt;&gt;(unknownSize, 0) {\r\n            public boolean tryAdvance(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; action) {\r\n                return generator.test(action);\r\n            }\r\n        }, false);\r\n    }\r\n\r\n\r\n## Summary \r\n\r\nThe solution above is just my first thought and it isn&#39;t the best approach in this case, you can think it against with [big design first][1]. However, even if it is a poor solution but I&#39;ll keep it here since it maybe give somebody thinking in other ways. for more details, you can see the comments of @Holger from here and [there](https://stackoverflow.com/questions/48561183/replace-for-loop-with-java-8-foreach-for-updating-values/48561991?noredirect=1#comment84126733_48561991).\r\n\r\nI admit the best approach is what @Holger have said below, since there is no one write it down, please let me record it to serve more people.\r\n\r\n    Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\r\n                   scrappingFutures.flatMap(each -&gt; each.join().stream())\r\n                                   .map(CompletableFuture::completedFuture);\r\n\r\n\r\n[1]: https://en.wikipedia.org/wiki/Big_Design_Up_Front\r\n","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>If I don't misunderstand your intention, you want to flatten the result only. you can use the <code>Spliterator</code> to receive result lazily &amp; use <code>flatMap</code> to merge <code>Stream</code>s into a flatten stream, for example:</p>\n\n<pre><code>Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\n               scrappingFutures.flatMap(each -&gt; unwrap(each));\n</code></pre>\n\n<hr>\n\n<pre><code>static &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \n  unwrap(CompletableFuture&lt;? extends List&lt;? extends T&gt;&gt; master) {\n\n    return generate(new Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt;() {\n\n        private Iterator&lt;? extends T&gt; cursor;\n\n        @Override\n        public boolean test(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; consumer) {\n            cursor = cursor == null ? await().iterator() : cursor;\n            if (cursor.hasNext()) {\n                consumer.accept(completedFuture(cursor.next()));\n                return true;\n            }\n            return false;\n        }\n\n        //                        v--- blocked at the first time\n        private List&lt;? extends T&gt; await() {\n            try {\n                return master.get();\n            } catch (InterruptedException | ExecutionException e) {\n                throw new CompletionException(e);\n            }\n        }\n    });\n}\n\nstatic &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \n  generate(Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt; generator) {\n\n    long unknownSize = Long.MAX_VALUE;\n    return stream(new AbstractSpliterator&lt;CompletableFuture&lt;T&gt;&gt;(unknownSize, 0) {\n        public boolean tryAdvance(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; action) {\n            return generator.test(action);\n        }\n    }, false);\n}\n</code></pre>\n\n<h2>Summary</h2>\n\n<p>The solution above is just my first thought and it isn't the best approach in this case, you can think it against with <a href=\"https://en.wikipedia.org/wiki/Big_Design_Up_Front\" rel=\"nofollow noreferrer\">big design first</a>. However, even if it is a poor solution but I'll keep it here since it maybe give somebody thinking in other ways. for more details, you can see the comments of @Holger from here and <a href=\"https://stackoverflow.com/questions/48561183/replace-for-loop-with-java-8-foreach-for-updating-values/48561991?noredirect=1#comment84126733_48561991\">there</a>.</p>\n\n<p>I admit the best approach is what @Holger have said below, since there is no one write it down, please let me record it to serve more people.</p>\n\n<pre><code>Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\n               scrappingFutures.flatMap(each -&gt; each.join().stream())\n                               .map(CompletableFuture::completedFuture);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673118589,"creation_date":1668549477,"answer_id":74452659,"question_id":48461315,"body_markdown":"You can convert a `Stream&lt;CompletableFuture&lt;T&gt;&gt;` to a `CompletableFuture&lt;Stream&lt;T&gt;&gt;` using [`Stream.reduce`][1]:\r\n\r\n    static &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; reduce(Stream&lt;CompletableFuture&lt;T&gt;&gt; futures) {\r\n        return futures\r\n            .map(future -&gt; future.thenApply(Stream::of))\r\n            .reduce(\r\n                CompletableFuture.completedFuture(Stream.empty()),\r\n                MyClass::combine);\r\n    }\r\n\r\nFor this to work, we still need to define a helper function `combine` for combining two instances of `CompletableFuture&lt;Stream&lt;T&gt;&gt;` that concatenates the stream inside of the individual futures:\r\n\r\n    static &lt;T&gt;CompletableFuture&lt;Stream&lt;T&gt;&gt; combine(CompletableFuture&lt;Stream&lt;T&gt;&gt; future1, CompletableFuture&lt;Stream&lt;T&gt;&gt; future2) {\r\n        return future1\r\n            .thenCompose(stream1 -&gt; future2\r\n            .thenApply(stream2 -&gt; Stream.concat(stream1, stream2)));\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#reduce(T,java.util.function.BinaryOperator)","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>You can convert a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> to a <code>CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#reduce(T,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>Stream.reduce</code></a>:</p>\n<pre><code>static &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; reduce(Stream&lt;CompletableFuture&lt;T&gt;&gt; futures) {\n    return futures\n        .map(future -&gt; future.thenApply(Stream::of))\n        .reduce(\n            CompletableFuture.completedFuture(Stream.empty()),\n            MyClass::combine);\n}\n</code></pre>\n<p>For this to work, we still need to define a helper function <code>combine</code> for combining two instances of <code>CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> that concatenates the stream inside of the individual futures:</p>\n<pre><code>static &lt;T&gt;CompletableFuture&lt;Stream&lt;T&gt;&gt; combine(CompletableFuture&lt;Stream&lt;T&gt;&gt; future1, CompletableFuture&lt;Stream&lt;T&gt;&gt; future2) {\n    return future1\n        .thenCompose(stream1 -&gt; future2\n        .thenApply(stream2 -&gt; Stream.concat(stream1, stream2)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":188215,"reputation":3930,"user_id":426822,"accept_rate":40,"display_name":"gzak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702050911,"creation_date":1702050911,"answer_id":77627785,"question_id":48461315,"body_markdown":"[michid](https://stackoverflow.com/users/402428/michid)&#39;s answer works and is the most purely functional, but it&#39;s a bit inefficient because it creates a &quot;linked list&quot; of nested concatenated singleton streams, something like this:\r\n```\r\nconcat(of(A),\r\n       concat(of(B),\r\n              concat(of(C), ...)))\r\n```\r\n\r\nSo, here&#39;s a more efficient (albeit not purely functional) version, which only requires the creation of a single intermediate array of all the futures:\r\n```\r\nstatic &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; allOfStream(Stream&lt;CompletableFuture&lt;T&gt;&gt; stream) {\r\n  CompletableFuture&lt;T&gt;[] futuresArray = futures.&lt;CompletableFuture&lt;T&gt;&gt;toArray(CompletableFuture[]::new);\r\n  return CompletableFuture.allOf(futuresArray)\r\n    .thenApply(ignored -&gt; Arrays.stream(futuresArray).map(CompletableFuture::join));\r\n}\r\n```\r\nThis is still non-blocking, since the lambda in `thenApply` will only be invoked if all the futures in `allOf` succeeded, and so the `join` call on each future will also return immediately - it will effectively just be an &quot;unwrap&quot; operation from `CompletableFuture&lt;T&gt;` to `T`.\r\n\r\nBut it is eager, ie it won&#39;t work on infinite streams, since `toArray` will never terminate. I&#39;m not sure what the behavior would be of the purely functional answer for infinite streams.","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p><a href=\"https://stackoverflow.com/users/402428/michid\">michid</a>'s answer works and is the most purely functional, but it's a bit inefficient because it creates a &quot;linked list&quot; of nested concatenated singleton streams, something like this:</p>\n<pre><code>concat(of(A),\n       concat(of(B),\n              concat(of(C), ...)))\n</code></pre>\n<p>So, here's a more efficient (albeit not purely functional) version, which only requires the creation of a single intermediate array of all the futures:</p>\n<pre><code>static &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; allOfStream(Stream&lt;CompletableFuture&lt;T&gt;&gt; stream) {\n  CompletableFuture&lt;T&gt;[] futuresArray = futures.&lt;CompletableFuture&lt;T&gt;&gt;toArray(CompletableFuture[]::new);\n  return CompletableFuture.allOf(futuresArray)\n    .thenApply(ignored -&gt; Arrays.stream(futuresArray).map(CompletableFuture::join));\n}\n</code></pre>\n<p>This is still non-blocking, since the lambda in <code>thenApply</code> will only be invoked if all the futures in <code>allOf</code> succeeded, and so the <code>join</code> call on each future will also return immediately - it will effectively just be an &quot;unwrap&quot; operation from <code>CompletableFuture&lt;T&gt;</code> to <code>T</code>.</p>\n<p>But it is eager, ie it won't work on infinite streams, since <code>toArray</code> will never terminate. I'm not sure what the behavior would be of the purely functional answer for infinite streams.</p>\n"}],"owner":{"account_id":5163818,"reputation":750,"user_id":4207648,"accept_rate":67,"display_name":"Valya"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":908,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1702050911,"creation_date":1516969454,"question_id":48461315,"body_markdown":"That&#39;s it. Really could not find something even close. I want to implement the following chain of tasks \r\n\r\n    List&lt;Item&gt; items = Collections.singletonList(new Item(&quot;John Smith&quot;, &quot;1997-2014&quot;));\r\n    \r\n    Stream&lt;CompletableFuture&lt;List&lt;ScrappingResult&gt;&gt;&gt; scrappingFutures =\r\n    \titems.stream().map(item -&gt;\r\n    \t\tCompletableFuture.supplyAsync(() -&gt; new ScrappingTask(item).call()));\r\n    \r\n    Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\r\n    \tscrappingFutures.map(resultsFuture -&gt; ???);\r\n    \r\n    Stream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt; trimmingResults = scrappingFuturesUnwrapped.map(resultFuture -&gt;\r\n    \t// thenCompose?\r\n    \tresultFuture.thenCompose(result -&gt; {\r\n    \t\tPath clipsDir = Paths.get(&quot;./&quot;\r\n    \t\t\t+ result.getItem().getName()\r\n    \t\t\t+ &quot;/&quot; + result.getItem().getTimespan());\r\n    \r\n    \t\tAtomicInteger clipIdx = new AtomicInteger();\r\n    \r\n    \t\treturn result.getVideo().getClips().stream()\r\n    \t\t\t.map(clip -&gt; CompletableFuture.supplyAsync(() -&gt;\r\n    \t\t\t\tnew TrimmingTask(\r\n    \t\t\t\t\tffmpegPath,\r\n    \t\t\t\t\tresult.getVideo().getVideoUrl(),\r\n    \t\t\t\t\tclip,\r\n    \t\t\t\t\tclipsDir.resolve(&quot;clip_&quot; + clipIdx.incrementAndGet() + &quot;.mp3&quot;)).call())\r\n    \t\t\t);\r\n    \t});\r\n    );\r\n\r\nThe last line is not syntactically correct, but I hope conveys the idea. So, I want to do something like flatMap twice and get `\r\nStream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt;` at the end.\r\n\r\nHow do I do that?\r\n\r\nThanks.","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>That's it. Really could not find something even close. I want to implement the following chain of tasks </p>\n\n<pre><code>List&lt;Item&gt; items = Collections.singletonList(new Item(\"John Smith\", \"1997-2014\"));\n\nStream&lt;CompletableFuture&lt;List&lt;ScrappingResult&gt;&gt;&gt; scrappingFutures =\n    items.stream().map(item -&gt;\n        CompletableFuture.supplyAsync(() -&gt; new ScrappingTask(item).call()));\n\nStream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\n    scrappingFutures.map(resultsFuture -&gt; ???);\n\nStream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt; trimmingResults = scrappingFuturesUnwrapped.map(resultFuture -&gt;\n    // thenCompose?\n    resultFuture.thenCompose(result -&gt; {\n        Path clipsDir = Paths.get(\"./\"\n            + result.getItem().getName()\n            + \"/\" + result.getItem().getTimespan());\n\n        AtomicInteger clipIdx = new AtomicInteger();\n\n        return result.getVideo().getClips().stream()\n            .map(clip -&gt; CompletableFuture.supplyAsync(() -&gt;\n                new TrimmingTask(\n                    ffmpegPath,\n                    result.getVideo().getVideoUrl(),\n                    clip,\n                    clipsDir.resolve(\"clip_\" + clipIdx.incrementAndGet() + \".mp3\")).call())\n            );\n    });\n);\n</code></pre>\n\n<p>The last line is not syntactically correct, but I hope conveys the idea. So, I want to do something like flatMap twice and get <code>\nStream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt;</code> at the end.</p>\n\n<p>How do I do that?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","kubernetes","kibana","slf4j"],"comments":[{"owner":{"account_id":74184,"reputation":122906,"user_id":213269,"accept_rate":98,"display_name":"Jonas"},"score":1,"creation_date":1702051108,"post_id":77627765,"comment_id":136853857,"body_markdown":"Step 1 is to never log sensitive info to the logs.","body":"Step 1 is to never log sensitive info to the logs."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1702051110,"post_id":77627765,"comment_id":136853859,"body_markdown":"Step 1: remove all code that logs actual credit cards numbers in a context where they might learn more about who those belong to? Change your log statements to only log, say, the last 4 digits, but ideally, _don&#39;t log credit card numbers_.","body":"Step 1: remove all code that logs actual credit cards numbers in a context where they might learn more about who those belong to? Change your log statements to only log, say, the last 4 digits, but ideally, <i>don&#39;t log credit card numbers</i>."},{"owner":{"account_id":30099364,"reputation":11,"user_id":23066889,"display_name":"Martian Aura"},"score":0,"creation_date":1702052405,"post_id":77627765,"comment_id":136854107,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans\nNow If I want to debug, I go through those logs it will have only 4 digits, \nI need to find the way to get original data for debugging purposes. \nI wanted to check the sensistive information as developer and hide it for common people who query through kibana.","body":"@Mike&#39;Pomax&#39;Kamermans Now If I want to debug, I go through those logs it will have only 4 digits,  I need to find the way to get original data for debugging purposes.  I wanted to check the sensistive information as developer and hide it for common people who query through kibana."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1702064950,"post_id":77627765,"comment_id":136855901,"body_markdown":"If you can find actual credit card numbers tied to actual people, there&#39;s every chance you&#39;re already breaking local laws around handling PII. Find a different way to identify transactions that doesn&#39;t require PII such as randomly generated transaction numbers, and look for _those_ in your logs.","body":"If you can find actual credit card numbers tied to actual people, there&#39;s every chance you&#39;re already breaking local laws around handling PII. Find a different way to identify transactions that doesn&#39;t require PII such as randomly generated transaction numbers, and look for <i>those</i> in your logs."},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1702104949,"post_id":77627765,"comment_id":136858833,"body_markdown":"Why not control logs in Spring boot/java module? Eg. You can have a public function that logs all info you need. Then use isMaskEnabled to enable or disable logging. Probably enable during development and disable logging when deploying to production","body":"Why not control logs in Spring boot/java module? Eg. You can have a public function that logs all info you need. Then use isMaskEnabled to enable or disable logging. Probably enable during development and disable logging when deploying to production"}],"owner":{"account_id":30099364,"reputation":11,"user_id":23066889,"display_name":"Martian Aura"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1702050885,"creation_date":1702050770,"question_id":77627765,"body_markdown":"I have a spring boot app that logs sensitive information in the kubernetes and kibana. \r\nHow do I create a flag to toggle hide/unhide sensitive information ?\r\nThis sensistive information can be used only for debugging purposes.\r\n\r\nI am looking for something like :\r\n- isMaskEnabled = false :\r\n       set this flag only for debugging purposes so that developers can use it for debugging.\r\n- isMaskEnabled = true :\r\n       set this flag for masking sensitive information to all users who views the logs.\r\n\r\nI tried setting the appender slf4j - to have mask pattern but that will log the information as masked fields in log file. I can&#39;t see original data for debugging purposes.\r\n\r\n```\r\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n&lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\r\n    &lt;layout class=&quot;com.bpcbt.micro.utils.PatternMaskingLayout&quot;&gt;\r\n        &lt;maskPattern&gt;creditCard=\\d+&lt;/maskPattern&gt; &lt;!-- SourcePan pattern --&gt;\r\n        &lt;pattern&gt;%d{dd/MM/yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n%ex&lt;/pattern&gt;--&gt;\r\n    &lt;/layout&gt;\r\n&lt;/encoder&gt;\r\n```\r\n\r\nIf I want to unmask and show original info it is not possible here.\r\nAny other way ?","title":"How to toggle hide and unhide sensitive information in kubernetes and kibana logs that comes from spring boot app?","body":"<p>I have a spring boot app that logs sensitive information in the kubernetes and kibana.\nHow do I create a flag to toggle hide/unhide sensitive information ?\nThis sensistive information can be used only for debugging purposes.</p>\n<p>I am looking for something like :</p>\n<ul>\n<li>isMaskEnabled = false :\nset this flag only for debugging purposes so that developers can use it for debugging.</li>\n<li>isMaskEnabled = true :\nset this flag for masking sensitive information to all users who views the logs.</li>\n</ul>\n<p>I tried setting the appender slf4j - to have mask pattern but that will log the information as masked fields in log file. I can't see original data for debugging purposes.</p>\n<pre><code>&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n&lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\n    &lt;layout class=&quot;com.bpcbt.micro.utils.PatternMaskingLayout&quot;&gt;\n        &lt;maskPattern&gt;creditCard=\\d+&lt;/maskPattern&gt; &lt;!-- SourcePan pattern --&gt;\n        &lt;pattern&gt;%d{dd/MM/yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n%ex&lt;/pattern&gt;--&gt;\n    &lt;/layout&gt;\n&lt;/encoder&gt;\n</code></pre>\n<p>If I want to unmask and show original info it is not possible here.\nAny other way ?</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"score":0,"creation_date":1701507667,"post_id":77589653,"comment_id":136786425,"body_markdown":"use Integer instead of int \nint = default value it holds automatically as soon as it is declared.\n\nInteger = null by default","body":"use Integer instead of int  int = default value it holds automatically as soon as it is declared.  Integer = null by default"},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701508391,"post_id":77589653,"comment_id":136786483,"body_markdown":"@jarvo69 Thank you for the feedback. Could you elaborate on how this answers the question asked?","body":"@jarvo69 Thank you for the feedback. Could you elaborate on how this answers the question asked?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":3,"creation_date":1701510507,"post_id":77589653,"comment_id":136786652,"body_markdown":"The problem with demonstrating such behaviour is that there is nothing you can do to enforce this behaviour (i.e. the field `SharedResource.value` is written after `SharedResource sharedResource` is written). This might happen only on February 29 during the time when 20_000 users simulationously access your system. Without using `final` there is simply no guarantee that your code will not fail at some time - and you wont find out that &quot;some time&quot; is the worst time: on a weekend during the holidays, during a sales meeting, when 1000s of customers want to buy from your shop.","body":"The problem with demonstrating such behaviour is that there is nothing you can do to enforce this behaviour (i.e. the field <code>SharedResource.value</code> is written after <code>SharedResource sharedResource</code> is written). This might happen only on February 29 during the time when 20_000 users simulationously access your system. Without using <code>final</code> there is simply no guarantee that your code will not fail at some time - and you wont find out that &quot;some time&quot; is the worst time: on a weekend during the holidays, during a sales meeting, when 1000s of customers want to buy from your shop."},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701521814,"post_id":77589653,"comment_id":136787594,"body_markdown":"@ThomasKl&#228;ger Thank you for the answer. If `SharedResource sharedResource` is written after the `SharedResource.value`, then how can other thread see uninitialized value (`sharedResource.value`). As I understand, in this case no threads can read a value from `SharedResource sharedResource`, hence the problem with not using final is invalid","body":"@ThomasKl&#228;ger Thank you for the answer. If <code>SharedResource sharedResource</code> is written after the <code>SharedResource.value</code>, then how can other thread see uninitialized value (<code>sharedResource.value</code>). As I understand, in this case no threads can read a value from <code>SharedResource sharedResource</code>, hence the problem with not using final is invalid"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1701525843,"post_id":77589653,"comment_id":136787926,"body_markdown":"If creating the `SharedResource` is on a hot code path the JVM could (at runtime) inline the constructor into the caller and proceed as follows: create a new `SharedResource`, store the reference into the `sharedResource` field, call the super constructor (from `Object`), then initialize the `value`. For all code running on thread 1 everythink looks correct - and without `final` or synchronization that is the only guarantee that the JVM makes: that the code running on the same thread after the constructor has finished doesn&#39;t notice.","body":"If creating the <code>SharedResource</code> is on a hot code path the JVM could (at runtime) inline the constructor into the caller and proceed as follows: create a new <code>SharedResource</code>, store the reference into the <code>sharedResource</code> field, call the super constructor (from <code>Object</code>), then initialize the <code>value</code>. For all code running on thread 1 everythink looks correct - and without <code>final</code> or synchronization that is the only guarantee that the JVM makes: that the code running on the same thread after the constructor has finished doesn&#39;t notice."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701526150,"post_id":77589653,"comment_id":136787968,"body_markdown":"There is this other question (https://stackoverflow.com/questions/77588556/why-does-attaching-byteman-rule-to-my-method-accidentally-fix-an-exception) where someone tries to find a NullPointerException occuring sometimes in production after upgrading from Java 7 to Java 8 - and this is exactly the kind of problem you can expect if `value` is not final but `SharedResource` is shared between threads. You just don&#39;t want to be in that persons place just because your simple test was unable to show this possible problem.","body":"There is this other question (<a href=\"https://stackoverflow.com/questions/77588556/why-does-attaching-byteman-rule-to-my-method-accidentally-fix-an-exception\" title=\"why does attaching byteman rule to my method accidentally fix an exception\">stackoverflow.com/questions/77588556/&hellip;</a>) where someone tries to find a NullPointerException occuring sometimes in production after upgrading from Java 7 to Java 8 - and this is exactly the kind of problem you can expect if <code>value</code> is not final but <code>SharedResource</code> is shared between threads. You just don&#39;t want to be in that persons place just because your simple test was unable to show this possible problem."},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701541339,"post_id":77589653,"comment_id":136789629,"body_markdown":"@ThomasKl&#228;ger One last question - could you please provide any reference material for the described behavior (when the reference is stored in `sharedResource` prior to the finish of constructor call)?","body":"@ThomasKl&#228;ger One last question - could you please provide any reference material for the described behavior (when the reference is stored in <code>sharedResource</code> prior to the finish of constructor call)?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1701607770,"post_id":77589653,"comment_id":136794463,"body_markdown":"The definite reference is in the Java Language Specification [Chapter 17.4 Memory Model](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4) and [Chapter 17.5 `final` Field Semantics](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.5). That the reference is stored in `sharedResource` prior to the finish of the constructor call is a possible consequence of &quot;method inlining&quot; (i.e. the code for the constructor is inlined into the caller) followed by &quot;statement reordering&quot; - both common optimizations done by the JVM.","body":"The definite reference is in the Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4\" rel=\"nofollow noreferrer\">Chapter 17.4 Memory Model</a> and <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.5\" rel=\"nofollow noreferrer\">Chapter 17.5 <code>final</code> Field Semantics</a>. That the reference is stored in <code>sharedResource</code> prior to the finish of the constructor call is a possible consequence of &quot;method inlining&quot; (i.e. the code for the constructor is inlined into the caller) followed by &quot;statement reordering&quot; - both common optimizations done by the JVM."},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701614005,"post_id":77589653,"comment_id":136795075,"body_markdown":"@ThomasKl&#228;ger Thank you very much. I already found the JMM reference to read more about it","body":"@ThomasKl&#228;ger Thank you very much. I already found the JMM reference to read more about it"}],"answers":[{"comments":[{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1702057610,"post_id":77627778,"comment_id":136854904,"body_markdown":"Thank you for your answer. As an addition, this article https://medium.com/codex/method-inlining-in-java-84caec9b3e18 put me on the right track to enforce constructor inlining which can lead to the problem described in my original question","body":"Thank you for your answer. As an addition, this article <a href=\"https://medium.com/codex/method-inlining-in-java-84caec9b3e18\" rel=\"nofollow noreferrer\">medium.com/codex/method-inlining-in-java-84caec9b3e18</a> put me on the right track to enforce constructor inlining which can lead to the problem described in my original question"}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702050837,"creation_date":1702050837,"answer_id":77627778,"question_id":77589653,"body_markdown":"The cited text is misleading at best.\r\n\r\nThe line `final var accounts = new HashMap&lt;String, Double&gt;();` can’t be a field declaration as the `var` keyword is only allowed for local variables. Discussions about field initialization are pointless for local variables.\r\n\r\nFurther, the phrase “after the constructor has finished” is meaningless when the constructed object is improperly published to other threads. Concurrent access implies the absence of an order. But note that this is specifically about a scenario of improperly published objects. For correctly published objects, you don’t need `final` fields.\r\n\r\nIt’s also important that the problem of potentially seeing inconsistent values for improperly published objects is not just that a thread might see `null` for a reference field. It may also see a non-`null` reference but an inconsistent state of the `HashMap` instance. And as `HashMap` is a mutable object, note that the guaranteed consistent state is the state of the `HashMap` when finishing the constructor, as long as no subsequent modifications happen; if there are any modifications after the constructor, all bets are off. Making a field `final` can not replace proper synchronization for mutable data.\r\n\r\nWhen you have a data race like in your example code\r\n\r\n```java\r\nif (sharedResource != null) {\r\n    int result = sharedResource.getValue();\r\n    System.out.println(&quot;Thread 2: Value is &quot; + result);\r\n} else {\r\n    System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\r\n}\r\n```\r\n\r\nyou may not only have the potential result of reading `0` in `getValue()`, it’s even possible that the first read of `sharedResource` in `sharedResource != null` sees a non-`null` reference but the other read in `sharedResource.getValue()` sees `null` and produces a `NullPointerException`.\r\n\r\nAs said earlier concurrent access (without correct synchronization) implies the absence of an order. Therefore, you can not reason about the expected outcome of the two reads of the field `sharedResource` by assuming that the reads happen in a particular order.\r\n\r\nBut, as said in the comments, a possible outcome does not imply that you can force this outcome in an example program. Programs running a single time are especially unlikely to produce rare conditions.\r\n","title":"final keyword guarantee clarification regarding concurrency","body":"<p>The cited text is misleading at best.</p>\n<p>The line <code>final var accounts = new HashMap&lt;String, Double&gt;();</code> can’t be a field declaration as the <code>var</code> keyword is only allowed for local variables. Discussions about field initialization are pointless for local variables.</p>\n<p>Further, the phrase “after the constructor has finished” is meaningless when the constructed object is improperly published to other threads. Concurrent access implies the absence of an order. But note that this is specifically about a scenario of improperly published objects. For correctly published objects, you don’t need <code>final</code> fields.</p>\n<p>It’s also important that the problem of potentially seeing inconsistent values for improperly published objects is not just that a thread might see <code>null</code> for a reference field. It may also see a non-<code>null</code> reference but an inconsistent state of the <code>HashMap</code> instance. And as <code>HashMap</code> is a mutable object, note that the guaranteed consistent state is the state of the <code>HashMap</code> when finishing the constructor, as long as no subsequent modifications happen; if there are any modifications after the constructor, all bets are off. Making a field <code>final</code> can not replace proper synchronization for mutable data.</p>\n<p>When you have a data race like in your example code</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (sharedResource != null) {\n    int result = sharedResource.getValue();\n    System.out.println(&quot;Thread 2: Value is &quot; + result);\n} else {\n    System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\n}\n</code></pre>\n<p>you may not only have the potential result of reading <code>0</code> in <code>getValue()</code>, it’s even possible that the first read of <code>sharedResource</code> in <code>sharedResource != null</code> sees a non-<code>null</code> reference but the other read in <code>sharedResource.getValue()</code> sees <code>null</code> and produces a <code>NullPointerException</code>.</p>\n<p>As said earlier concurrent access (without correct synchronization) implies the absence of an order. Therefore, you can not reason about the expected outcome of the two reads of the field <code>sharedResource</code> by assuming that the reads happen in a particular order.</p>\n<p>But, as said in the comments, a possible outcome does not imply that you can force this outcome in an example program. Programs running a single time are especially unlikely to produce rare conditions.</p>\n"}],"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627778,"answer_count":1,"score":0,"last_activity_date":1702050837,"creation_date":1701506027,"question_id":77589653,"body_markdown":"I am currently going through Core Java, Vol I book, Chapter 12 - Concurrency.\r\n\r\nThere is a section in the book relating final keyword, which states:\r\n\r\n&gt; There is one other situation in which it is safe to access a shared field — when\r\nit is declared final. &lt;br&gt;Consider \r\n`final var accounts = new HashMap&lt;String, Double&gt;();`&lt;br&gt;\r\nOther threads get to see the accounts variable after the constructor has\r\nfinished.\r\nWithout using final, there would be no guarantee that other threads would\r\nsee the updated value of accounts—they might all see null, not the\r\nconstructed HashMap.&lt;br&gt;(Horstmann, 2018)\r\n\r\nI have tried to create an example demonstrating, that non-final field may be read by the other thread before it is initialized.\r\n\r\n```java\r\nclass SharedResource {\r\n    private int value;\r\n\r\n    public SharedResource(int value) {\r\n        try {\r\n            Thread.sleep(100);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        this.value = value;\r\n    }\r\n\r\n    public int getValue() {\r\n        return value;\r\n    }\r\n}\r\n\r\nclass NonFinalExample {\r\n\r\n    private static SharedResource sharedResource;\r\n\r\n    public static void main(String[] args) {\r\n        Thread thread1 = new Thread(() -&gt; sharedResource = new SharedResource(42));\r\n        thread1.start();\r\n\r\n        Thread thread2 = new Thread(() -&gt; {\r\n            if (sharedResource != null) {\r\n                int result = sharedResource.getValue();\r\n                System.out.println(&quot;Thread 2: Value is &quot; + result);\r\n            } else {\r\n                System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\r\n            }\r\n        });\r\n        thread2.start();\r\n    }\r\n}\r\n```\r\n\r\nThe problem with it is that I can&#39;t understand, how in the example above `thread2` can see `sharedResource` as not null while having uninitialized `sharedResource.value` at the same time.&lt;br&gt;\r\nIsn&#39;t `SharedResource` object is assigned to `sharedResource` variable by `thread1` only after the initialization is complete and the object is created?\r\n\r\nWould appreciate any help relating the subject","title":"final keyword guarantee clarification regarding concurrency","body":"<p>I am currently going through Core Java, Vol I book, Chapter 12 - Concurrency.</p>\n<p>There is a section in the book relating final keyword, which states:</p>\n<blockquote>\n<p>There is one other situation in which it is safe to access a shared field — when\nit is declared final. <br>Consider\n<code>final var accounts = new HashMap&lt;String, Double&gt;();</code><br>\nOther threads get to see the accounts variable after the constructor has\nfinished.\nWithout using final, there would be no guarantee that other threads would\nsee the updated value of accounts—they might all see null, not the\nconstructed HashMap.<br>(Horstmann, 2018)</p>\n</blockquote>\n<p>I have tried to create an example demonstrating, that non-final field may be read by the other thread before it is initialized.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SharedResource {\n    private int value;\n\n    public SharedResource(int value) {\n        try {\n            Thread.sleep(100);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n\nclass NonFinalExample {\n\n    private static SharedResource sharedResource;\n\n    public static void main(String[] args) {\n        Thread thread1 = new Thread(() -&gt; sharedResource = new SharedResource(42));\n        thread1.start();\n\n        Thread thread2 = new Thread(() -&gt; {\n            if (sharedResource != null) {\n                int result = sharedResource.getValue();\n                System.out.println(&quot;Thread 2: Value is &quot; + result);\n            } else {\n                System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\n            }\n        });\n        thread2.start();\n    }\n}\n</code></pre>\n<p>The problem with it is that I can't understand, how in the example above <code>thread2</code> can see <code>sharedResource</code> as not null while having uninitialized <code>sharedResource.value</code> at the same time.<br>\nIsn't <code>SharedResource</code> object is assigned to <code>sharedResource</code> variable by <code>thread1</code> only after the initialization is complete and the object is created?</p>\n<p>Would appreciate any help relating the subject</p>\n"},{"tags":["java","windows","jna","event-log"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1702049540,"post_id":77627505,"comment_id":136853526,"body_markdown":"Windows often uses some species of UTF-16. Did you try that? Also, why JNA - why not parse Powershell `Get-EventLog`?","body":"Windows often uses some species of UTF-16. Did you try that? Also, why JNA - why not parse Powershell <code>Get-EventLog</code>?"},{"owner":{"account_id":2735665,"reputation":24466,"user_id":2358409,"display_name":"uminder"},"score":0,"creation_date":1702112098,"post_id":77627505,"comment_id":136859315,"body_markdown":"Thanks `g00se`, using Powershell `Get-EventLog` is an interesting approach. Unless I don&#39;t find another solution, I&#39;ll try to invoke it from my Java program and parse the printed events programmatically.","body":"Thanks <code>g00se</code>, using Powershell <code>Get-EventLog</code> is an interesting approach. Unless I don&#39;t find another solution, I&#39;ll try to invoke it from my Java program and parse the printed events programmatically."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1702121401,"post_id":77627505,"comment_id":136859992,"body_markdown":"Provide examples of event log and expected/actual results.","body":"Provide examples of event log and expected/actual results."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1702128101,"post_id":77627505,"comment_id":136860526,"body_markdown":"What happened with `getStrings()` btw?","body":"What happened with <code>getStrings()</code> btw?"},{"owner":{"account_id":2735665,"reputation":24466,"user_id":2358409,"display_name":"uminder"},"score":0,"creation_date":1702136544,"post_id":77627505,"comment_id":136861274,"body_markdown":"@g00se: In some cases, `getStrings()` does not provide any data, in some other cases the data is incomplete and doesn&#39;t match the one that can be seen in the `Windows Event Viewer`.  I see however that this is the case when the `Event ID` is also present (`!= 0`). Therefore, I believe that the `Event Viewer` uses this `Event ID` to do some lookup to retrieve the event description. I now voted to undelete the answer from `aled` as it seems to be the correct answer to my question. As soon as it becomes editable again, I will accept it.","body":"@g00se: In some cases, <code>getStrings()</code> does not provide any data, in some other cases the data is incomplete and doesn&#39;t match the one that can be seen in the <code>Windows Event Viewer</code>.  I see however that this is the case when the <code>Event ID</code> is also present (<code>!= 0</code>). Therefore, I believe that the <code>Event Viewer</code> uses this <code>Event ID</code> to do some lookup to retrieve the event description. I now voted to undelete the answer from <code>aled</code> as it seems to be the correct answer to my question. As soon as it becomes editable again, I will accept it."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1702184146,"post_id":77627505,"comment_id":136864796,"body_markdown":"Does this answer your question? [JNA parse description strings from windows event log record](https://stackoverflow.com/questions/66316805/jna-parse-description-strings-from-windows-event-log-record)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/66316805/jna-parse-description-strings-from-windows-event-log-record\">JNA parse description strings from windows event log record</a>"},{"owner":{"account_id":2735665,"reputation":24466,"user_id":2358409,"display_name":"uminder"},"score":0,"creation_date":1702189046,"post_id":77627505,"comment_id":136864984,"body_markdown":"`@Daniel Widdis`:  The answer you are referencing requires elevated or shared access to the .evtx log files. For my case, this is unfortunately not an option to go with.","body":"<code>@Daniel Widdis</code>:  The answer you are referencing requires elevated or shared access to the .evtx log files. For my case, this is unfortunately not an option to go with."}],"owner":{"account_id":2735665,"reputation":24466,"user_id":2358409,"display_name":"uminder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702050710,"creation_date":1702048286,"question_id":77627505,"body_markdown":"The following code reads and prints the events from the `Windows Event Log` of the local computer. \r\n\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.util.Date;\r\n    \r\n    import com.sun.jna.platform.win32.Advapi32Util.EventLogIterator;\r\n    import com.sun.jna.platform.win32.Advapi32Util.EventLogRecord;\r\n    import com.sun.jna.platform.win32.WinNT;\r\n    \r\n    public class EventLog {\r\n    \r\n        public static void main(String[] args) throws UnsupportedEncodingException {\r\n            EventLogIterator iter = new EventLogIterator(null, &quot;Application&quot;, WinNT.EVENTLOG_FORWARDS_READ);\r\n            while (iter.hasNext()) {\r\n                EventLogRecord record = iter.next();\r\n                if (record.getData() == null) {\r\n                    continue;\r\n                }\r\n                Date eventTime = new Date(record.getRecord().TimeGenerated.longValue() * 1000L);\r\n                String data = new String(record.getData(), &quot;windows-1252&quot;);\r\n                System.out.println(record.getRecordNumber() + &quot; Event Time: &quot; + eventTime + //\r\n                                   &quot;: Event ID: &quot; + record.getInstanceId() + //\r\n                                   &quot;, Event Type: &quot; + record.getType() + //\r\n                                   &quot;, Event Data: &quot; + data + //\r\n                                   &quot;, Event Source: &quot; + record.getSource());\r\n            }\r\n        }\r\n    }\r\n\r\nThe problem is that the event `data` is present as `byte` array (`byte[]`) but I need proper formatted text. I tried to transform this `data` into a `String` by using different encodings but none of them produced the expected result.\r\n\r\n    String data = new String(record.getData(), &quot;windows-1252&quot;);\r\n\r\nHow can the event `data` be transformed into human readable text?","title":"Reading and formatting events from Windows Event Log","body":"<p>The following code reads and prints the events from the <code>Windows Event Log</code> of the local computer.</p>\n<pre><code>import java.io.UnsupportedEncodingException;\nimport java.util.Date;\n\nimport com.sun.jna.platform.win32.Advapi32Util.EventLogIterator;\nimport com.sun.jna.platform.win32.Advapi32Util.EventLogRecord;\nimport com.sun.jna.platform.win32.WinNT;\n\npublic class EventLog {\n\n    public static void main(String[] args) throws UnsupportedEncodingException {\n        EventLogIterator iter = new EventLogIterator(null, &quot;Application&quot;, WinNT.EVENTLOG_FORWARDS_READ);\n        while (iter.hasNext()) {\n            EventLogRecord record = iter.next();\n            if (record.getData() == null) {\n                continue;\n            }\n            Date eventTime = new Date(record.getRecord().TimeGenerated.longValue() * 1000L);\n            String data = new String(record.getData(), &quot;windows-1252&quot;);\n            System.out.println(record.getRecordNumber() + &quot; Event Time: &quot; + eventTime + //\n                               &quot;: Event ID: &quot; + record.getInstanceId() + //\n                               &quot;, Event Type: &quot; + record.getType() + //\n                               &quot;, Event Data: &quot; + data + //\n                               &quot;, Event Source: &quot; + record.getSource());\n        }\n    }\n}\n</code></pre>\n<p>The problem is that the event <code>data</code> is present as <code>byte</code> array (<code>byte[]</code>) but I need proper formatted text. I tried to transform this <code>data</code> into a <code>String</code> by using different encodings but none of them produced the expected result.</p>\n<pre><code>String data = new String(record.getData(), &quot;windows-1252&quot;);\n</code></pre>\n<p>How can the event <code>data</code> be transformed into human readable text?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":5701253,"reputation":4320,"user_id":4506140,"accept_rate":73,"display_name":"Jude Niroshan"},"score":0,"creation_date":1614628987,"post_id":66428529,"comment_id":117438076,"body_markdown":"Please show us the exception you get when you run the program. Also the user input values. It would be easier for anyone to help you out","body":"Please show us the exception you get when you run the program. Also the user input values. It would be easier for anyone to help you out"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1614638847,"post_id":66428529,"comment_id":117441574,"body_markdown":"What error do you get? If I try to compile your code, the compiler produces an error message &quot;error: cannot find symbol&quot; because you did not `import java.awt.BorderLayout;`. After fixing that problem your code compiles and seems to run as intended.","body":"What error do you get? If I try to compile your code, the compiler produces an error message &quot;error: cannot find symbol&quot; because you did not <code>import java.awt.BorderLayout;</code>. After fixing that problem your code compiles and seems to run as intended."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1614673057,"post_id":66428529,"comment_id":117449593,"body_markdown":"*&quot;after I press the button it doesn&#39;t execute anything.&quot;* It does, here. It changes the [rendering on the GUI](https://i.stack.imgur.com/swvNZ.png) (though I think the code mixes up radius and diameter). Did you expect it to calculate whether or not the circles intersect and update the label at the top?  What code have you written to that end?","body":"<i>&quot;after I press the button it doesn&#39;t execute anything.&quot;</i> It does, here. It changes the <a href=\"https://i.stack.imgur.com/swvNZ.png\" rel=\"nofollow noreferrer\">rendering on the GUI</a> (though I think the code mixes up radius and diameter). Did you expect it to calculate whether or not the circles intersect and update the label at the top?  What code have you written to that end?"},{"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"score":0,"creation_date":1614770249,"post_id":66428529,"comment_id":117484555,"body_markdown":"this is the error Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: empty String","body":"this is the error Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: empty String"},{"owner":{"account_id":4196075,"reputation":17303,"user_id":3437460,"accept_rate":49,"display_name":"user3437460"},"score":0,"creation_date":1614784747,"post_id":66428529,"comment_id":117491590,"body_markdown":"Your JFrame class shouldn&#39;t be called Circle. Instead, you can have a real Circle class with properties of Circle only. Add another customised JPanel class. Add Circle into JPanel and JPanel into JFrame. Since they are contained within one another, you already have no problem accessing the variables.","body":"Your JFrame class shouldn&#39;t be called Circle. Instead, you can have a real Circle class with properties of Circle only. Add another customised JPanel class. Add Circle into JPanel and JPanel into JFrame. Since they are contained within one another, you already have no problem accessing the variables."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614673336,"creation_date":1614673336,"answer_id":66435719,"question_id":66428529,"body_markdown":"Avoid using static fields. Instead use setters in `Circles`: \r\n\r\n\t\r\n\timport java.awt.*;\r\n\timport java.awt.event.*;\r\n\timport javax.swing.*;\r\n\t\r\n\tpublic class Circle extends JFrame implements ActionListener{\r\n\t\r\n\t\tprivate final JPanel p1,p2,p3,buttonsize;\r\n\t\tprivate final JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\r\n\t\tprivate final JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\r\n\t\tprivate final JButton drawButton;\r\n\t\tprivate final Circles circles;\r\n\t\r\n\t\tpublic static void main(String[]args)\r\n\t\t{\r\n\t\t\tCircle c = new Circle();\r\n\t\t\tc.setSize(400,400);\r\n\t\t\tc.setTitle(&quot;Project&quot;);\r\n\t\t\tc.setVisible(true);\r\n\t\t\tc.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t}\r\n\t\r\n\t\tpublic Circle() {\r\n\t\r\n\t\t\ttitle = new JLabel(&quot;Two circles intersect? No&quot;);\r\n\t\t\tp1 = new JPanel();\r\n\t\t\tp1.add(title);\r\n\t\r\n\t\t\tp2 = new JPanel();\r\n\t\r\n\t\t\tlb1 = new JLabel(&quot;Enter circle 1&quot;);\r\n\t\t\tlb2 = new JLabel(&quot;Enter circle 2&quot;);\r\n\t\t\tlb3 = new JLabel(&quot;info:&quot;);\r\n\t\t\tlb4 = new JLabel(&quot;info:&quot;);\r\n\t\t\tlb5 = new JLabel(&quot;Center x:&quot;);\r\n\t\t\tlb6 = new JLabel(&quot;Center y:&quot;);\r\n\t\t\tlb7 = new JLabel(&quot;Radius:&quot;);\r\n\t\t\tlb8 = new JLabel(&quot;Center x:&quot;);\r\n\t\t\tlb9 = new JLabel(&quot;Center y:&quot;);\r\n\t\t\tlb10 = new JLabel(&quot;Radius:&quot;);\r\n\t\r\n\t\t\tcircle1x = new JTextField(1);\r\n\t\t\tcircle1y = new JTextField(1);\r\n\t\t\tcircle1r = new JTextField(1);\r\n\t\t\tcircle2x = new JTextField(1);\r\n\t\t\tcircle2y = new JTextField(1);\r\n\t\t\tcircle2r = new JTextField(1);\r\n\t\t\tdrawButton = new JButton(&quot;Redraw Circles&quot;);\r\n\t\t\tbuttonsize = new JPanel();\r\n\t\t\tbuttonsize.setSize(50,50);\r\n\t\t\tbuttonsize.add(drawButton);\r\n\t\t\tp3 = new JPanel();\r\n\t\t\tp3.setLayout(new GridLayout(5,5));\r\n\t\r\n\t\t\tp3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\r\n\t\t\tp3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\r\n\t\t\tp3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\r\n\t\t\tp3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\r\n\t\t\tp3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\r\n\t\r\n\t\t\tsetLayout(new BorderLayout());  //BorderLayout is the default for JFrame\r\n\t\t\t//call the constructor of the panel\r\n\t\t\tadd(p1,BorderLayout.NORTH);\r\n\t\t\tcircles = new Circles();\r\n\t\t\tadd(circles,BorderLayout.CENTER);\r\n\t\t\tadd(p3,BorderLayout.SOUTH);\r\n\t\r\n\t\t\tdrawButton.addActionListener(this);\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent e)   {\r\n\t\r\n\t\t\tif(e.getSource()!= drawButton) \treturn;\r\n\t\t\t\r\n\t\t\tdouble c1x = Double.parseDouble(circle1x.getText());\r\n\t\t\tdouble c1y = Double.parseDouble(circle1y.getText());\r\n\t\t\tdouble c1r = Double.parseDouble(circle1r.getText());\r\n\t\t\tdouble c2x = Double.parseDouble(circle2x.getText());\r\n\t\t\tdouble c2y = Double.parseDouble(circle2y.getText());\r\n\t\t\tdouble c2r = Double.parseDouble(circle2r.getText());\r\n\t\r\n\t\t\tcircles.setX1((int) c1x);\r\n\t\t\tcircles.setX2((int) c2x);\r\n\t\t\tcircles.setY1((int) c1y);\r\n\t\t\tcircles.setY2((int) c2y);\r\n\t\t\tcircles.setR1((int) c1r);\r\n\t\t\tcircles.setR2((int) c2r);\r\n\t\t\trepaint();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Circles extends JPanel{\r\n\t\r\n\t\tprivate int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\r\n\t\r\n\t\t@Override\r\n\t\tpublic void paintComponent(Graphics g)\t{\r\n\t\t\tsuper.paintComponent(g);\r\n\t\t\tg.setColor(Color.BLACK);\r\n\t\t\tg.drawOval(x1, y1, r1, r1);\r\n\t\t\tg.drawOval(x2, y2, r2, r2);\r\n\t\t}\r\n\t\r\n\t\tpublic void setX1(int x1) {\r\n\t\t\tthis.x1 = x1;\r\n\t\t}\r\n\t\r\n\t\tpublic void setX2(int x2) {\r\n\t\t\tthis.x2 = x2;\r\n\t\t}\r\n\t\r\n\t\tpublic void setY1(int y1) {\r\n\t\t\tthis.y1 = y1;\r\n\t\t}\r\n\t\r\n\t\tpublic void setY2(int y2) {\r\n\t\t\tthis.y2 = y2;\r\n\t\t}\r\n\t\r\n\t\tpublic void setR1(int r1) {\r\n\t\t\tthis.r1 = r1;\r\n\t\t}\r\n\t\r\n\t\tpublic void setR2(int r2) {\r\n\t\t\tthis.r2 = r2;\r\n\t\t}\r\n\t}","title":"Passing variable to paintComponent method","body":"<p>Avoid using static fields. Instead use setters in <code>Circles</code>:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class Circle extends JFrame implements ActionListener{\n\n    private final JPanel p1,p2,p3,buttonsize;\n    private final JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\n    private final JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\n    private final JButton drawButton;\n    private final Circles circles;\n\n    public static void main(String[]args)\n    {\n        Circle c = new Circle();\n        c.setSize(400,400);\n        c.setTitle(&quot;Project&quot;);\n        c.setVisible(true);\n        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n\n    public Circle() {\n\n        title = new JLabel(&quot;Two circles intersect? No&quot;);\n        p1 = new JPanel();\n        p1.add(title);\n\n        p2 = new JPanel();\n\n        lb1 = new JLabel(&quot;Enter circle 1&quot;);\n        lb2 = new JLabel(&quot;Enter circle 2&quot;);\n        lb3 = new JLabel(&quot;info:&quot;);\n        lb4 = new JLabel(&quot;info:&quot;);\n        lb5 = new JLabel(&quot;Center x:&quot;);\n        lb6 = new JLabel(&quot;Center y:&quot;);\n        lb7 = new JLabel(&quot;Radius:&quot;);\n        lb8 = new JLabel(&quot;Center x:&quot;);\n        lb9 = new JLabel(&quot;Center y:&quot;);\n        lb10 = new JLabel(&quot;Radius:&quot;);\n\n        circle1x = new JTextField(1);\n        circle1y = new JTextField(1);\n        circle1r = new JTextField(1);\n        circle2x = new JTextField(1);\n        circle2y = new JTextField(1);\n        circle2r = new JTextField(1);\n        drawButton = new JButton(&quot;Redraw Circles&quot;);\n        buttonsize = new JPanel();\n        buttonsize.setSize(50,50);\n        buttonsize.add(drawButton);\n        p3 = new JPanel();\n        p3.setLayout(new GridLayout(5,5));\n\n        p3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\n        p3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\n        p3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\n        p3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\n        p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\n\n        setLayout(new BorderLayout());  //BorderLayout is the default for JFrame\n        //call the constructor of the panel\n        add(p1,BorderLayout.NORTH);\n        circles = new Circles();\n        add(circles,BorderLayout.CENTER);\n        add(p3,BorderLayout.SOUTH);\n\n        drawButton.addActionListener(this);\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e)   {\n\n        if(e.getSource()!= drawButton)  return;\n        \n        double c1x = Double.parseDouble(circle1x.getText());\n        double c1y = Double.parseDouble(circle1y.getText());\n        double c1r = Double.parseDouble(circle1r.getText());\n        double c2x = Double.parseDouble(circle2x.getText());\n        double c2y = Double.parseDouble(circle2y.getText());\n        double c2r = Double.parseDouble(circle2r.getText());\n\n        circles.setX1((int) c1x);\n        circles.setX2((int) c2x);\n        circles.setY1((int) c1y);\n        circles.setY2((int) c2y);\n        circles.setR1((int) c1r);\n        circles.setR2((int) c2r);\n        repaint();\n    }\n}\n\nclass Circles extends JPanel{\n\n    private int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\n\n    @Override\n    public void paintComponent(Graphics g)  {\n        super.paintComponent(g);\n        g.setColor(Color.BLACK);\n        g.drawOval(x1, y1, r1, r1);\n        g.drawOval(x2, y2, r2, r2);\n    }\n\n    public void setX1(int x1) {\n        this.x1 = x1;\n    }\n\n    public void setX2(int x2) {\n        this.x2 = x2;\n    }\n\n    public void setY1(int y1) {\n        this.y1 = y1;\n    }\n\n    public void setY2(int y2) {\n        this.y2 = y2;\n    }\n\n    public void setR1(int r1) {\n        this.r1 = r1;\n    }\n\n    public void setR2(int r2) {\n        this.r2 = r2;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"score":0,"creation_date":1614770381,"post_id":66438638,"comment_id":117484617,"body_markdown":"Thank you for the idea :D appreciated.","body":"Thank you for the idea :D appreciated."},{"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"score":0,"creation_date":1614770556,"post_id":66438638,"comment_id":117484673,"body_markdown":"Sorry for bothering you.. just want to ask for the input text field part.. sorry so beginner here.","body":"Sorry for bothering you.. just want to ask for the input text field part.. sorry so beginner here."},{"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"score":0,"creation_date":1614806799,"post_id":66438638,"comment_id":117500982,"body_markdown":"Thank you so much for the code. I hope I can understand those codes that you gave because I&#39;m a beginner at this java language. I will get back to you if I got any problems.","body":"Thank you so much for the code. I hope I can understand those codes that you gave because I&#39;m a beginner at this java language. I will get back to you if I got any problems."}],"tags":[],"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702050219,"creation_date":1614685137,"answer_id":66438638,"question_id":66428529,"body_markdown":"# Introduction\r\n\r\nThis was a fun little project.  Because it is a project, I&#39;m not going to provide all the code I wrote.  The reason I&#39;m answering this question is to outline an approach to this Swing project or almost any Java project.\r\n\r\nHere&#39;s the GUI I came up with.  It&#39;s a bit different than the OP&#39;s picture.\r\n\r\n[![Project GUI 1][1]][1]\r\n\r\nHere&#39;s another example.\r\n\r\n[![Project GUI 2][2]][2]\r\n\r\nAnd another.\r\n\r\n[![Project GUI 3][3]][3]\r\n\r\n# Explanation\r\n\r\nWhen I create a Swing application, or most Java applications, I use the [model / view / controller][4] (MVC) pattern.  This pattern allows me to separate my concerns and focus on one part of the application at a time.\r\n\r\nIn a Swing GUI, the MVC pattern means:\r\n\r\n1.  The view reads information from the model.\r\n2.  The view does not modify the model in any way.\r\n3.  The controller updates the model and repaints / revalidates the view.\r\n\r\n## Model\r\n\r\nRather than explaining a model, I&#39;ll just show you the model I created.\r\n\r\n\tpublic class IntersectingCirclesModel {\r\n\t\t\r\n\t\tprivate Circle[] circles;\r\n\t\t\r\n\t\tpublic IntersectingCirclesModel() {\r\n\t\t\tthis.circles = new Circle[2];\r\n\t\t}\r\n\r\n\t\tpublic boolean isIntersects() {\r\n\t\t\tdouble distanceX = Math.abs(circles[0].getCenter().getX() - \r\n\t\t\t\t\tcircles[1].getCenter().getX()); \r\n\t\t\tdouble distanceY = Math.abs(circles[0].getCenter().getY() - \r\n\t\t\t\t\tcircles[1].getCenter().getY()); \r\n\t\t\tdouble distance1 = (distanceX * distanceX + distanceY * distanceY);\r\n\t\t\t\r\n\t\t\tdouble radius1 = circles[0].getRadius();\r\n\t\t\tdouble radius2 = circles[1].getRadius();\r\n\t\t\tdouble diameter = radius1 + radius2;\r\n\t\t\tdouble distance2 = diameter * diameter;\r\n\t\t\t\r\n\t\t\tSystem.out.println(distance1 + &quot; &quot; + distance2);\r\n\t\t\treturn distance1 &lt;= distance2;\r\n\t\t}\r\n\r\n\t\tpublic Circle[] getCircles() {\r\n\t\t\treturn circles;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setCircle(Circle circle, int index) {\r\n\t\t\tthis.circles[index] = circle;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic class Circle {\r\n\t\t\r\n\t\tprivate int radius;\r\n\t\t\r\n\t\tprivate Point center;\r\n\r\n\t\tpublic int getRadius() {\r\n\t\t\treturn radius;\r\n\t\t}\r\n\r\n\t\tpublic void setRadius(int radius) {\r\n\t\t\tthis.radius = radius;\r\n\t\t}\r\n\r\n\t\tpublic Point getCenter() {\r\n\t\t\treturn center;\r\n\t\t}\r\n\r\n\t\tpublic void setCenter(Point center) {\r\n\t\t\tthis.center = center;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setCenter(int x, int y) {\r\n\t\t\tthis.center = new Point(x, y);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nI created two plain Java getter / setter classes.  The first class, the `Circle` class, holds a radius and a center point.  I used a `java.awt.Point` to hold the center point.\r\n\r\nThe second class, the `IntersectingCirclesModel` class, is the application model.  This class holds an array of two `Circle` instances and calculates whether or not the two `Circle` instances intersect.\r\n\r\nThe intersect calculation is pretty simple.  The distance between the two center points has to be less than the distance of the two radii added together.  I actually calculate the distance squared so I don&#39;t have to take square roots.\r\n\r\n## View\r\n\r\nThe view consists of one `JFrame`, one drawing `JPanel`, two instances of one entry `JPanel`, and a `JPanel` to hold the two instances of one entry `JPanel` and the `JButton`.\r\n\r\nI use these Swing components.  The only Swing component I extend is `JPanel` to create the drawing `JPanel`.  I do this so I can override the `paintComponent` method.  The first line in my `paintComponent` method is a call to the super `paintComponent` method to maintain the Swing paint chain.\r\n\r\nI create the `JFrame` by creating the subordinate `JPanels`, packing the `JFrame`, and setting the `JFrame` visible.\r\n\r\nThe drawing `JPanel` is straightforward.  I extend a `JPanel`.  I pass an instance of the model class to the drawing `JPanel`.  In the constructor, I set the background color and set the preferred size of the `JPanel`.\r\n\r\nThe `paintComponent` method checks to see if the two `Circle` instances have been created.  If so, the circles are drawn and the intersect text at the top of the drawing `JPanel` is drawn.\r\n\r\nThe entry `JPanel` is a separate class.  I do this so I only have to create one entry panel.  The only difference between the two entry panels is the title, so I pass the title into the class through the constructor.\r\n\r\nI create the entry `JPanel` using a [GridBagLayout][5].  The `GridBagLayout` is the layout to use when you want to create any `JPanel` that looks like a form.\r\n\r\nI create a consolidating `JPanel` by creating two instances of the entry `JPanel`.  This consolidating `JPanel` uses a `FlowLayout`.\r\n\r\nI create an additional consolidating `JPanel` using a `BorderLayout`.  This `JPanel` puts the previous consolidating `JPanel` in the CENTER position and a `JButton` in the AFTER_LAST_LINE position.\r\n\r\nYou can create a complex GUI by nesting `JPanels` with simpler Swing layouts.\r\n\r\nThe `JFrame` has a default `BorderLayout`.  I put the drawing `JPanel` in the CENTER position and the additional consolidating `JPanel` in the AFTER_LAST_LINE position.\r\n\r\n## Controller \r\n\r\nThe controller is the `ActionListener` triggered by the `JButton`.  I pass an instance of the GUI class and an instance of the model class to the controller class.  The `actionPerformed` method gets the values from the two entry `JPanels`, adds the center point and radius to the two circles, and has the GUI repaint the drawing `JPanel`.\r\n\r\n# Edited to Add 1\r\n\r\nThe OP&#39;s comment leaves out a lot of information.  Here&#39;s the class I created to create one instance of the entry `JPanel`.  You have to create two instances of this class for the two entry `JPanels`.\r\n\r\n\tpublic class CircleEntryPanel {\r\n\t\t\r\n\t\tprivate JPanel panel;\r\n\t\t\r\n\t\tprivate JTextField centerxField;\r\n\t\tprivate JTextField centeryField;\r\n\t\tprivate JTextField radiusField;\r\n\t\t\r\n\t\tpublic CircleEntryPanel(String title) {\r\n\t\t\tthis.panel = createCircleEntryPanel(title);\r\n\t\t}\r\n\t\r\n\t\tprivate JPanel createCircleEntryPanel(String title) {\r\n\t\t\tJPanel panel = new JPanel(new GridBagLayout());\r\n\t\t\tpanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\r\n\t\t\t\r\n\t\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\t\tgbc.anchor = GridBagConstraints.LINE_START;\r\n\t\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\t\tgbc.insets = new Insets(5, 5, 5, 5);\r\n\t\t\tgbc.gridwidth = 2;\r\n\t\t\tgbc.gridx = 0;\r\n\t\t\tgbc.gridy = 0;\r\n\t\t\t\r\n\t\t\tJLabel titleLabel = new JLabel(title);\r\n\t\t\tpanel.add(titleLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridwidth = 1;\r\n\t\t\tgbc.gridy++;\r\n\t\t\tJLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\r\n\t\t\tpanel.add(centerxLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx++;\r\n\t\t\tcenterxField = new JTextField(4);\r\n\t\t\tcenterxField.setHorizontalAlignment(JTextField.TRAILING);\r\n\t\t\tpanel.add(centerxField, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx = 0;\r\n\t\t\tgbc.gridy++;\r\n\t\t\tJLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\r\n\t\t\tpanel.add(centeryLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx++;\r\n\t\t\tcenteryField = new JTextField(4);\r\n\t\t\tcenteryField.setHorizontalAlignment(JTextField.TRAILING);\r\n\t\t\tpanel.add(centeryField, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx = 0;\r\n\t\t\tgbc.gridy++;\r\n\t\t\tJLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\r\n\t\t\tpanel.add(radiusLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx++;\r\n\t\t\tradiusField = new JTextField(4);\r\n\t\t\tradiusField.setHorizontalAlignment(JTextField.TRAILING);\r\n\t\t\tpanel.add(radiusField, gbc);\r\n\t\t\t\r\n\t\t\treturn panel;\r\n\t\t}\r\n\r\n\t\tpublic JPanel getPanel() {\r\n\t\t\treturn panel;\r\n\t\t}\r\n\r\n\t\tpublic JTextField getCenterxField() {\r\n\t\t\treturn centerxField;\r\n\t\t}\r\n\r\n\t\tpublic JTextField getCenteryField() {\r\n\t\t\treturn centeryField;\r\n\t\t}\r\n\r\n\t\tpublic JTextField getRadiusField() {\r\n\t\t\treturn radiusField;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n# Edited to Add 2\r\n\r\nEnough time has passed for me to post the complete runnable code for this project.  I made all the additional classes inner classes so I can post the code as one block.\r\n\r\n    import java.awt.BasicStroke;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Font;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.Insets;\r\n    import java.awt.Point;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.font.FontRenderContext;\r\n    import java.awt.geom.Rectangle2D;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JTextField;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class IntersectingCirclesGUI implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new IntersectingCirclesGUI());\r\n    \t}\r\n    \t\r\n    \tprivate IntersectingCirclesModel model;\r\n    \t\r\n    \tprivate CircleEntryPanel[] entryPanels;\r\n    \t\r\n    \tprivate DrawingPanel drawingPanel;\r\n    \t\r\n    \tpublic IntersectingCirclesGUI() {\r\n    \t\tthis.model = new IntersectingCirclesModel();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Project&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\t\r\n    \t\tthis.drawingPanel = new DrawingPanel(model);\r\n    \t\tframe.add(drawingPanel, BorderLayout.CENTER);\r\n    \t\tframe.add(createMainPanel(), BorderLayout.AFTER_LAST_LINE);\r\n    \t\t\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \t\r\n    \tprivate JPanel createMainPanel() {\r\n    \t\tJPanel panel = new JPanel(new BorderLayout(5, 5));\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\r\n    \t\t\r\n    \t\tpanel.add(createEntryPanel(), BorderLayout.CENTER);\r\n    \t\t\r\n    \t\tJButton button = new JButton(&quot;Redraw Circles&quot;);\r\n    \t\tbutton.addActionListener(new CircleListener(this, model));\r\n    \t\tpanel.add(button, BorderLayout.AFTER_LAST_LINE);\r\n    \t\t\r\n    \t\treturn panel;\r\n    \t}\r\n    \t\r\n    \tprivate JPanel createEntryPanel() {\r\n    \t\tJPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 5));\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\r\n    \t\t\r\n    \t\tentryPanels = new CircleEntryPanel[2];\r\n    \t\tentryPanels[0] = new CircleEntryPanel(&quot;Enter Circle 1 info:&quot;);\r\n    \t\tentryPanels[1] = new CircleEntryPanel(&quot;Enter Circle 2 info:&quot;);\r\n    \t\t\r\n    \t\tpanel.add(entryPanels[0].getPanel());\r\n    \t\tpanel.add(entryPanels[1].getPanel());\r\n    \t\t\r\n    \t\treturn panel;\r\n    \t}\r\n    \t\r\n    \tpublic void repaint() {\r\n    \t\tdrawingPanel.repaint();\r\n    \t}\r\n    \t\r\n    \tpublic CircleEntryPanel[] getEntryPanels() {\r\n    \t\treturn entryPanels;\r\n    \t}\r\n    \r\n    \tpublic class CircleEntryPanel {\r\n    \t\t\r\n    \t\tprivate JPanel panel;\r\n    \t\t\r\n    \t\tprivate JTextField centerxField;\r\n    \t\tprivate JTextField centeryField;\r\n    \t\tprivate JTextField radiusField;\r\n    \t\t\r\n    \t\tpublic CircleEntryPanel(String title) {\r\n    \t\t\tthis.panel = createCircleEntryPanel(title);\r\n    \t\t}\r\n    \t\r\n    \t\tprivate JPanel createCircleEntryPanel(String title) {\r\n    \t\t\tJPanel panel = new JPanel(new GridBagLayout());\r\n    \t\t\tpanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\r\n    \t\t\t\r\n    \t\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n    \t\t\tgbc.anchor = GridBagConstraints.LINE_START;\r\n    \t\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n    \t\t\tgbc.insets = new Insets(5, 5, 5, 5);\r\n    \t\t\tgbc.gridwidth = 2;\r\n    \t\t\tgbc.gridx = 0;\r\n    \t\t\tgbc.gridy = 0;\r\n    \t\t\t\r\n    \t\t\tJLabel titleLabel = new JLabel(title);\r\n    \t\t\tpanel.add(titleLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridwidth = 1;\r\n    \t\t\tgbc.gridy++;\r\n    \t\t\tJLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\r\n    \t\t\tpanel.add(centerxLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx++;\r\n    \t\t\tcenterxField = new JTextField(4);\r\n    \t\t\tcenterxField.setHorizontalAlignment(JTextField.TRAILING);\r\n    \t\t\tpanel.add(centerxField, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx = 0;\r\n    \t\t\tgbc.gridy++;\r\n    \t\t\tJLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\r\n    \t\t\tpanel.add(centeryLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx++;\r\n    \t\t\tcenteryField = new JTextField(4);\r\n    \t\t\tcenteryField.setHorizontalAlignment(JTextField.TRAILING);\r\n    \t\t\tpanel.add(centeryField, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx = 0;\r\n    \t\t\tgbc.gridy++;\r\n    \t\t\tJLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\r\n    \t\t\tpanel.add(radiusLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx++;\r\n    \t\t\tradiusField = new JTextField(4);\r\n    \t\t\tradiusField.setHorizontalAlignment(JTextField.TRAILING);\r\n    \t\t\tpanel.add(radiusField, gbc);\r\n    \t\t\t\r\n    \t\t\treturn panel;\r\n    \t\t}\r\n    \r\n    \t\tpublic JPanel getPanel() {\r\n    \t\t\treturn panel;\r\n    \t\t}\r\n    \r\n    \t\tpublic JTextField getCenterxField() {\r\n    \t\t\treturn centerxField;\r\n    \t\t}\r\n    \r\n    \t\tpublic JTextField getCenteryField() {\r\n    \t\t\treturn centeryField;\r\n    \t\t}\r\n    \r\n    \t\tpublic JTextField getRadiusField() {\r\n    \t\t\treturn radiusField;\r\n    \t\t}\r\n    \t\r\n    \t}\r\n    \t\r\n    \tpublic class DrawingPanel extends JPanel {\r\n    \t\t\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t\r\n    \t\tprivate IntersectingCirclesModel model;\r\n    \t\t\r\n    \t\tpublic DrawingPanel(IntersectingCirclesModel model) {\r\n    \t\t\tthis.model = model;\r\n    \t\t\tthis.setBackground(Color.WHITE);\r\n    \t\t\tthis.setPreferredSize(new Dimension(400, 200));\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void paintComponent(Graphics g) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \t\t\t\r\n    \t\t\tGraphics2D g2d = (Graphics2D) g;\r\n    \t\t\tg2d.setColor(Color.BLACK);\r\n    \t\t\tg2d.setStroke(new BasicStroke(3f));\r\n    \t\t\t\r\n    \t\t\tboolean circlesDrawn = false;\r\n    \t\t\tCircle[] circles = model.getCircles();\r\n    \t\t\tfor (int i = 0; i &lt; circles.length; i++) {\r\n    \t\t\t\tif (circles[i] != null) {\r\n    \t\t\t\t\tpaintCircle(g2d, circles[i]);\r\n    \t\t\t\t\tcirclesDrawn = true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (circlesDrawn) {\r\n    \t\t\t\tString text = (model.isIntersects()) ? &quot;Yes&quot; : &quot;No&quot;;\r\n    \t\t\t\ttext = &quot;Two Circles Intersect? &quot; + text;\r\n    \t\t\t\tFont font = getFont();\r\n    \t\t\t\tFontRenderContext frc =\r\n    \t                    new FontRenderContext(null, true, true);\r\n    \r\n    \t            Rectangle2D r2D = font.getStringBounds(text, frc);\r\n    \t            int rWidth = (int) Math.round(getWidth());\r\n    \t            int textWidth = (int) Math.round(r2D.getWidth());\r\n    \t            int textHeight = (int) Math.round(r2D.getHeight());\r\n    \r\n    \t            int a = (rWidth - textWidth) / 2;\r\n    \t            int b = textHeight + 5;\r\n    \r\n    \t            g2d.drawString(text, a, b);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tprivate void paintCircle(Graphics2D g2d, Circle circle) {\r\n    \t\t\tint radius = circle.getRadius();\r\n    \t\t\tint diameter = radius + radius;\r\n    \t\t\tPoint point = circle.getCenter();\r\n    \t\t\tg2d.drawOval(point.x - radius, point.y - radius, \r\n    \t\t\t\t\tdiameter, diameter);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic class CircleListener implements ActionListener {\r\n    \t\t\r\n    \t\tprivate IntersectingCirclesGUI frame;\r\n    \t\t\r\n    \t\tprivate IntersectingCirclesModel model;\r\n    \r\n    \t\tpublic CircleListener(IntersectingCirclesGUI frame, \r\n    \t\t\t\tIntersectingCirclesModel model) {\r\n    \t\t\tthis.frame = frame;\r\n    \t\t\tthis.model = model;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent event) {\r\n    \t\t\tCircleEntryPanel[] entryPanels = frame.getEntryPanels();\r\n    \t\t\tCircle[] circles = model.getCircles();\r\n    \t\t\tfor (int i = 0; i &lt; entryPanels.length; i++) {\r\n    \t\t\t\tcircles[i] = createCircle(entryPanels[i]);\r\n    \t\t\t}\r\n    \t\t\tframe.repaint();\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate Circle createCircle(CircleEntryPanel panel) {\r\n    \t\t\tint x = valueOf(panel.getCenterxField().getText().trim());\r\n    \t\t\tint y = valueOf(panel.getCenteryField().getText().trim());\r\n    \t\t\tint radius = valueOf(panel.getRadiusField().getText().trim());\r\n    \t\t\t\r\n    \t\t\tCircle circle = new Circle();\r\n    \t\t\tcircle.setCenter(x, y);\r\n    \t\t\tcircle.setRadius(radius);\r\n    \t\t\t\r\n    \t\t\treturn circle;\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate int valueOf(String number) {\r\n    \t\t\ttry {\r\n    \t\t\t\treturn Integer.valueOf(number);\r\n    \t\t\t} catch (NumberFormatException e) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic class IntersectingCirclesModel {\r\n    \t\t\r\n    \t\tprivate Circle[] circles;\r\n    \t\t\r\n    \t\tpublic IntersectingCirclesModel() {\r\n    \t\t\tthis.circles = new Circle[2];\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isIntersects() {\r\n    \t\t\tdouble distanceX = Math.abs(circles[0].getCenter().getX() - \r\n    \t\t\t\t\tcircles[1].getCenter().getX()); \r\n    \t\t\tdouble distanceY = Math.abs(circles[0].getCenter().getY() - \r\n    \t\t\t\t\tcircles[1].getCenter().getY()); \r\n    \t\t\tdouble distance1 = (distanceX * distanceX + distanceY * distanceY);\r\n    \t\t\t\r\n    \t\t\tdouble radius1 = circles[0].getRadius();\r\n    \t\t\tdouble radius2 = circles[1].getRadius();\r\n    \t\t\tdouble diameter = radius1 + radius2;\r\n    \t\t\tdouble distance2 = diameter * diameter;\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(distance1 + &quot; &quot; + distance2);\r\n    \t\t\treturn distance1 &lt;= distance2;\r\n    \t\t}\r\n    \r\n    \t\tpublic Circle[] getCircles() {\r\n    \t\t\treturn circles;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void setCircle(Circle circle, int index) {\r\n    \t\t\tthis.circles[index] = circle;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic class Circle {\r\n    \t\t\r\n    \t\tprivate int radius;\r\n    \t\t\r\n    \t\tprivate Point center;\r\n    \r\n    \t\tpublic int getRadius() {\r\n    \t\t\treturn radius;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setRadius(int radius) {\r\n    \t\t\tthis.radius = radius;\r\n    \t\t}\r\n    \r\n    \t\tpublic Point getCenter() {\r\n    \t\t\treturn center;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setCenter(Point center) {\r\n    \t\t\tthis.center = center;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void setCenter(int x, int y) {\r\n    \t\t\tthis.center = new Point(x, y);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lUewW.png\r\n  [2]: https://i.stack.imgur.com/WJdex.png\r\n  [3]: https://i.stack.imgur.com/5Obgq.png\r\n  [4]: https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\r\n  [5]: https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\r\n","title":"Passing variable to paintComponent method","body":"<h1>Introduction</h1>\n<p>This was a fun little project.  Because it is a project, I'm not going to provide all the code I wrote.  The reason I'm answering this question is to outline an approach to this Swing project or almost any Java project.</p>\n<p>Here's the GUI I came up with.  It's a bit different than the OP's picture.</p>\n<p><a href=\"https://i.stack.imgur.com/lUewW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lUewW.png\" alt=\"Project GUI 1\" /></a></p>\n<p>Here's another example.</p>\n<p><a href=\"https://i.stack.imgur.com/WJdex.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WJdex.png\" alt=\"Project GUI 2\" /></a></p>\n<p>And another.</p>\n<p><a href=\"https://i.stack.imgur.com/5Obgq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Obgq.png\" alt=\"Project GUI 3\" /></a></p>\n<h1>Explanation</h1>\n<p>When I create a Swing application, or most Java applications, I use the <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\">model / view / controller</a> (MVC) pattern.  This pattern allows me to separate my concerns and focus on one part of the application at a time.</p>\n<p>In a Swing GUI, the MVC pattern means:</p>\n<ol>\n<li>The view reads information from the model.</li>\n<li>The view does not modify the model in any way.</li>\n<li>The controller updates the model and repaints / revalidates the view.</li>\n</ol>\n<h2>Model</h2>\n<p>Rather than explaining a model, I'll just show you the model I created.</p>\n<pre><code>public class IntersectingCirclesModel {\n    \n    private Circle[] circles;\n    \n    public IntersectingCirclesModel() {\n        this.circles = new Circle[2];\n    }\n\n    public boolean isIntersects() {\n        double distanceX = Math.abs(circles[0].getCenter().getX() - \n                circles[1].getCenter().getX()); \n        double distanceY = Math.abs(circles[0].getCenter().getY() - \n                circles[1].getCenter().getY()); \n        double distance1 = (distanceX * distanceX + distanceY * distanceY);\n        \n        double radius1 = circles[0].getRadius();\n        double radius2 = circles[1].getRadius();\n        double diameter = radius1 + radius2;\n        double distance2 = diameter * diameter;\n        \n        System.out.println(distance1 + &quot; &quot; + distance2);\n        return distance1 &lt;= distance2;\n    }\n\n    public Circle[] getCircles() {\n        return circles;\n    }\n    \n    public void setCircle(Circle circle, int index) {\n        this.circles[index] = circle;\n    }\n}\n\npublic class Circle {\n    \n    private int radius;\n    \n    private Point center;\n\n    public int getRadius() {\n        return radius;\n    }\n\n    public void setRadius(int radius) {\n        this.radius = radius;\n    }\n\n    public Point getCenter() {\n        return center;\n    }\n\n    public void setCenter(Point center) {\n        this.center = center;\n    }\n    \n    public void setCenter(int x, int y) {\n        this.center = new Point(x, y);\n    }\n    \n}\n</code></pre>\n<p>I created two plain Java getter / setter classes.  The first class, the <code>Circle</code> class, holds a radius and a center point.  I used a <code>java.awt.Point</code> to hold the center point.</p>\n<p>The second class, the <code>IntersectingCirclesModel</code> class, is the application model.  This class holds an array of two <code>Circle</code> instances and calculates whether or not the two <code>Circle</code> instances intersect.</p>\n<p>The intersect calculation is pretty simple.  The distance between the two center points has to be less than the distance of the two radii added together.  I actually calculate the distance squared so I don't have to take square roots.</p>\n<h2>View</h2>\n<p>The view consists of one <code>JFrame</code>, one drawing <code>JPanel</code>, two instances of one entry <code>JPanel</code>, and a <code>JPanel</code> to hold the two instances of one entry <code>JPanel</code> and the <code>JButton</code>.</p>\n<p>I use these Swing components.  The only Swing component I extend is <code>JPanel</code> to create the drawing <code>JPanel</code>.  I do this so I can override the <code>paintComponent</code> method.  The first line in my <code>paintComponent</code> method is a call to the super <code>paintComponent</code> method to maintain the Swing paint chain.</p>\n<p>I create the <code>JFrame</code> by creating the subordinate <code>JPanels</code>, packing the <code>JFrame</code>, and setting the <code>JFrame</code> visible.</p>\n<p>The drawing <code>JPanel</code> is straightforward.  I extend a <code>JPanel</code>.  I pass an instance of the model class to the drawing <code>JPanel</code>.  In the constructor, I set the background color and set the preferred size of the <code>JPanel</code>.</p>\n<p>The <code>paintComponent</code> method checks to see if the two <code>Circle</code> instances have been created.  If so, the circles are drawn and the intersect text at the top of the drawing <code>JPanel</code> is drawn.</p>\n<p>The entry <code>JPanel</code> is a separate class.  I do this so I only have to create one entry panel.  The only difference between the two entry panels is the title, so I pass the title into the class through the constructor.</p>\n<p>I create the entry <code>JPanel</code> using a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow noreferrer\">GridBagLayout</a>.  The <code>GridBagLayout</code> is the layout to use when you want to create any <code>JPanel</code> that looks like a form.</p>\n<p>I create a consolidating <code>JPanel</code> by creating two instances of the entry <code>JPanel</code>.  This consolidating <code>JPanel</code> uses a <code>FlowLayout</code>.</p>\n<p>I create an additional consolidating <code>JPanel</code> using a <code>BorderLayout</code>.  This <code>JPanel</code> puts the previous consolidating <code>JPanel</code> in the CENTER position and a <code>JButton</code> in the AFTER_LAST_LINE position.</p>\n<p>You can create a complex GUI by nesting <code>JPanels</code> with simpler Swing layouts.</p>\n<p>The <code>JFrame</code> has a default <code>BorderLayout</code>.  I put the drawing <code>JPanel</code> in the CENTER position and the additional consolidating <code>JPanel</code> in the AFTER_LAST_LINE position.</p>\n<h2>Controller</h2>\n<p>The controller is the <code>ActionListener</code> triggered by the <code>JButton</code>.  I pass an instance of the GUI class and an instance of the model class to the controller class.  The <code>actionPerformed</code> method gets the values from the two entry <code>JPanels</code>, adds the center point and radius to the two circles, and has the GUI repaint the drawing <code>JPanel</code>.</p>\n<h1>Edited to Add 1</h1>\n<p>The OP's comment leaves out a lot of information.  Here's the class I created to create one instance of the entry <code>JPanel</code>.  You have to create two instances of this class for the two entry <code>JPanels</code>.</p>\n<pre><code>public class CircleEntryPanel {\n    \n    private JPanel panel;\n    \n    private JTextField centerxField;\n    private JTextField centeryField;\n    private JTextField radiusField;\n    \n    public CircleEntryPanel(String title) {\n        this.panel = createCircleEntryPanel(title);\n    }\n\n    private JPanel createCircleEntryPanel(String title) {\n        JPanel panel = new JPanel(new GridBagLayout());\n        panel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\n        \n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.anchor = GridBagConstraints.LINE_START;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.insets = new Insets(5, 5, 5, 5);\n        gbc.gridwidth = 2;\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        \n        JLabel titleLabel = new JLabel(title);\n        panel.add(titleLabel, gbc);\n        \n        gbc.gridwidth = 1;\n        gbc.gridy++;\n        JLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\n        panel.add(centerxLabel, gbc);\n        \n        gbc.gridx++;\n        centerxField = new JTextField(4);\n        centerxField.setHorizontalAlignment(JTextField.TRAILING);\n        panel.add(centerxField, gbc);\n        \n        gbc.gridx = 0;\n        gbc.gridy++;\n        JLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\n        panel.add(centeryLabel, gbc);\n        \n        gbc.gridx++;\n        centeryField = new JTextField(4);\n        centeryField.setHorizontalAlignment(JTextField.TRAILING);\n        panel.add(centeryField, gbc);\n        \n        gbc.gridx = 0;\n        gbc.gridy++;\n        JLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\n        panel.add(radiusLabel, gbc);\n        \n        gbc.gridx++;\n        radiusField = new JTextField(4);\n        radiusField.setHorizontalAlignment(JTextField.TRAILING);\n        panel.add(radiusField, gbc);\n        \n        return panel;\n    }\n\n    public JPanel getPanel() {\n        return panel;\n    }\n\n    public JTextField getCenterxField() {\n        return centerxField;\n    }\n\n    public JTextField getCenteryField() {\n        return centeryField;\n    }\n\n    public JTextField getRadiusField() {\n        return radiusField;\n    }\n\n}\n</code></pre>\n<h1>Edited to Add 2</h1>\n<p>Enough time has passed for me to post the complete runnable code for this project.  I made all the additional classes inner classes so I can post the code as one block.</p>\n<pre><code>import java.awt.BasicStroke;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.Point;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.font.FontRenderContext;\nimport java.awt.geom.Rectangle2D;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\npublic class IntersectingCirclesGUI implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new IntersectingCirclesGUI());\n    }\n    \n    private IntersectingCirclesModel model;\n    \n    private CircleEntryPanel[] entryPanels;\n    \n    private DrawingPanel drawingPanel;\n    \n    public IntersectingCirclesGUI() {\n        this.model = new IntersectingCirclesModel();\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Project&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        this.drawingPanel = new DrawingPanel(model);\n        frame.add(drawingPanel, BorderLayout.CENTER);\n        frame.add(createMainPanel(), BorderLayout.AFTER_LAST_LINE);\n        \n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n    \n    private JPanel createMainPanel() {\n        JPanel panel = new JPanel(new BorderLayout(5, 5));\n        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n        \n        panel.add(createEntryPanel(), BorderLayout.CENTER);\n        \n        JButton button = new JButton(&quot;Redraw Circles&quot;);\n        button.addActionListener(new CircleListener(this, model));\n        panel.add(button, BorderLayout.AFTER_LAST_LINE);\n        \n        return panel;\n    }\n    \n    private JPanel createEntryPanel() {\n        JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 5));\n        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n        \n        entryPanels = new CircleEntryPanel[2];\n        entryPanels[0] = new CircleEntryPanel(&quot;Enter Circle 1 info:&quot;);\n        entryPanels[1] = new CircleEntryPanel(&quot;Enter Circle 2 info:&quot;);\n        \n        panel.add(entryPanels[0].getPanel());\n        panel.add(entryPanels[1].getPanel());\n        \n        return panel;\n    }\n    \n    public void repaint() {\n        drawingPanel.repaint();\n    }\n    \n    public CircleEntryPanel[] getEntryPanels() {\n        return entryPanels;\n    }\n\n    public class CircleEntryPanel {\n        \n        private JPanel panel;\n        \n        private JTextField centerxField;\n        private JTextField centeryField;\n        private JTextField radiusField;\n        \n        public CircleEntryPanel(String title) {\n            this.panel = createCircleEntryPanel(title);\n        }\n    \n        private JPanel createCircleEntryPanel(String title) {\n            JPanel panel = new JPanel(new GridBagLayout());\n            panel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\n            \n            GridBagConstraints gbc = new GridBagConstraints();\n            gbc.anchor = GridBagConstraints.LINE_START;\n            gbc.fill = GridBagConstraints.HORIZONTAL;\n            gbc.insets = new Insets(5, 5, 5, 5);\n            gbc.gridwidth = 2;\n            gbc.gridx = 0;\n            gbc.gridy = 0;\n            \n            JLabel titleLabel = new JLabel(title);\n            panel.add(titleLabel, gbc);\n            \n            gbc.gridwidth = 1;\n            gbc.gridy++;\n            JLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\n            panel.add(centerxLabel, gbc);\n            \n            gbc.gridx++;\n            centerxField = new JTextField(4);\n            centerxField.setHorizontalAlignment(JTextField.TRAILING);\n            panel.add(centerxField, gbc);\n            \n            gbc.gridx = 0;\n            gbc.gridy++;\n            JLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\n            panel.add(centeryLabel, gbc);\n            \n            gbc.gridx++;\n            centeryField = new JTextField(4);\n            centeryField.setHorizontalAlignment(JTextField.TRAILING);\n            panel.add(centeryField, gbc);\n            \n            gbc.gridx = 0;\n            gbc.gridy++;\n            JLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\n            panel.add(radiusLabel, gbc);\n            \n            gbc.gridx++;\n            radiusField = new JTextField(4);\n            radiusField.setHorizontalAlignment(JTextField.TRAILING);\n            panel.add(radiusField, gbc);\n            \n            return panel;\n        }\n\n        public JPanel getPanel() {\n            return panel;\n        }\n\n        public JTextField getCenterxField() {\n            return centerxField;\n        }\n\n        public JTextField getCenteryField() {\n            return centeryField;\n        }\n\n        public JTextField getRadiusField() {\n            return radiusField;\n        }\n    \n    }\n    \n    public class DrawingPanel extends JPanel {\n        \n        private static final long serialVersionUID = 1L;\n        \n        private IntersectingCirclesModel model;\n        \n        public DrawingPanel(IntersectingCirclesModel model) {\n            this.model = model;\n            this.setBackground(Color.WHITE);\n            this.setPreferredSize(new Dimension(400, 200));\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            \n            Graphics2D g2d = (Graphics2D) g;\n            g2d.setColor(Color.BLACK);\n            g2d.setStroke(new BasicStroke(3f));\n            \n            boolean circlesDrawn = false;\n            Circle[] circles = model.getCircles();\n            for (int i = 0; i &lt; circles.length; i++) {\n                if (circles[i] != null) {\n                    paintCircle(g2d, circles[i]);\n                    circlesDrawn = true;\n                }\n            }\n            \n            if (circlesDrawn) {\n                String text = (model.isIntersects()) ? &quot;Yes&quot; : &quot;No&quot;;\n                text = &quot;Two Circles Intersect? &quot; + text;\n                Font font = getFont();\n                FontRenderContext frc =\n                        new FontRenderContext(null, true, true);\n\n                Rectangle2D r2D = font.getStringBounds(text, frc);\n                int rWidth = (int) Math.round(getWidth());\n                int textWidth = (int) Math.round(r2D.getWidth());\n                int textHeight = (int) Math.round(r2D.getHeight());\n\n                int a = (rWidth - textWidth) / 2;\n                int b = textHeight + 5;\n\n                g2d.drawString(text, a, b);\n            }\n        }\n\n        private void paintCircle(Graphics2D g2d, Circle circle) {\n            int radius = circle.getRadius();\n            int diameter = radius + radius;\n            Point point = circle.getCenter();\n            g2d.drawOval(point.x - radius, point.y - radius, \n                    diameter, diameter);\n        }\n    }\n    \n    public class CircleListener implements ActionListener {\n        \n        private IntersectingCirclesGUI frame;\n        \n        private IntersectingCirclesModel model;\n\n        public CircleListener(IntersectingCirclesGUI frame, \n                IntersectingCirclesModel model) {\n            this.frame = frame;\n            this.model = model;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent event) {\n            CircleEntryPanel[] entryPanels = frame.getEntryPanels();\n            Circle[] circles = model.getCircles();\n            for (int i = 0; i &lt; entryPanels.length; i++) {\n                circles[i] = createCircle(entryPanels[i]);\n            }\n            frame.repaint();\n        }\n        \n        private Circle createCircle(CircleEntryPanel panel) {\n            int x = valueOf(panel.getCenterxField().getText().trim());\n            int y = valueOf(panel.getCenteryField().getText().trim());\n            int radius = valueOf(panel.getRadiusField().getText().trim());\n            \n            Circle circle = new Circle();\n            circle.setCenter(x, y);\n            circle.setRadius(radius);\n            \n            return circle;\n        }\n        \n        private int valueOf(String number) {\n            try {\n                return Integer.valueOf(number);\n            } catch (NumberFormatException e) {\n                return -1;\n            }\n        }\n        \n    }\n    \n    public class IntersectingCirclesModel {\n        \n        private Circle[] circles;\n        \n        public IntersectingCirclesModel() {\n            this.circles = new Circle[2];\n        }\n\n        public boolean isIntersects() {\n            double distanceX = Math.abs(circles[0].getCenter().getX() - \n                    circles[1].getCenter().getX()); \n            double distanceY = Math.abs(circles[0].getCenter().getY() - \n                    circles[1].getCenter().getY()); \n            double distance1 = (distanceX * distanceX + distanceY * distanceY);\n            \n            double radius1 = circles[0].getRadius();\n            double radius2 = circles[1].getRadius();\n            double diameter = radius1 + radius2;\n            double distance2 = diameter * diameter;\n            \n            System.out.println(distance1 + &quot; &quot; + distance2);\n            return distance1 &lt;= distance2;\n        }\n\n        public Circle[] getCircles() {\n            return circles;\n        }\n        \n        public void setCircle(Circle circle, int index) {\n            this.circles[index] = circle;\n        }\n    }\n    \n    public class Circle {\n        \n        private int radius;\n        \n        private Point center;\n\n        public int getRadius() {\n            return radius;\n        }\n\n        public void setRadius(int radius) {\n            this.radius = radius;\n        }\n\n        public Point getCenter() {\n            return center;\n        }\n\n        public void setCenter(Point center) {\n            this.center = center;\n        }\n        \n        public void setCenter(int x, int y) {\n            this.center = new Point(x, y);\n        }\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1702050219,"creation_date":1614627389,"question_id":66428529,"body_markdown":"I need some help. How does it pass a variable from class `Circle` to the `paintComponent` method because I want to make the circle change the x, y, w, h based on user input. Is there any idea to fix this? Since the problem there is an error after I press the button it doesn&#39;t execute anything. \r\n\r\nBased on this image.\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/bg3Ds.png&quot;&gt;\r\n\r\n\r\n\r\n```import java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\nimport java.awt.GridLayout;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JPanel;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.geom.Ellipse2D;\r\nimport java.text.DecimalFormat;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JTextField;\r\n\r\n\r\npublic class Circle extends JFrame implements ActionListener{\r\n    \r\n     private JPanel p1,p2,p3,buttonsize;\r\n     private JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\r\n     private JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\r\n     private JButton drawButton;\r\n     static int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\r\n    \r\n    public static void main(String[]args)\r\n    {\r\n        Circle c = new Circle();\r\n        c.setSize(400,400);\r\n        c.setTitle(&quot;Project&quot;);\r\n        c.setVisible(true);\r\n        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n    \r\n    \r\n    public Circle()\r\n    {\r\n       \r\n        title = new JLabel(&quot;Two circles intersect? No&quot;);\r\n        p1 = new JPanel();\r\n        p1.add(title);\r\n\r\n        p2 = new JPanel();\r\n        //p2.add(new Circles());\r\n        \r\n        lb1 = new JLabel(&quot;Enter circle 1&quot;);\r\n        lb2 = new JLabel(&quot;Enter circle 2&quot;);\r\n        lb3 = new JLabel(&quot;info:&quot;);\r\n        lb4 = new JLabel(&quot;info:&quot;);\r\n        lb5 = new JLabel(&quot;Center x:&quot;);\r\n        lb6 = new JLabel(&quot;Center y:&quot;);\r\n        lb7 = new JLabel(&quot;Radius:&quot;);\r\n        lb8 = new JLabel(&quot;Center x:&quot;);\r\n        lb9 = new JLabel(&quot;Center y:&quot;);\r\n        lb10 = new JLabel(&quot;Radius:&quot;);\r\n        \r\n        circle1x = new JTextField(1);\r\n        circle1y = new JTextField(1);\r\n        circle1r = new JTextField(1);\r\n        circle2x = new JTextField(1);\r\n        circle2y = new JTextField(1);\r\n        circle2r = new JTextField(1);\r\n        drawButton = new JButton(&quot;Redraw Circles&quot;);\r\n        buttonsize = new JPanel();\r\n        buttonsize.setSize(50,50);\r\n        buttonsize.add(drawButton);\r\n        p3 = new JPanel();\r\n        p3.setLayout(new GridLayout(5,5));\r\n\r\n        p3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\r\n        p3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\r\n        p3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\r\n        p3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\r\n        p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\r\n        \r\n        \r\n        \r\n        setLayout(new BorderLayout());\r\n        //call the constructor of the panel\r\n        add(p1,BorderLayout.NORTH);\r\n        add(new Circles(),BorderLayout.CENTER);\r\n        add(p3,BorderLayout.SOUTH);\r\n        \r\n        \r\n        drawButton.addActionListener(this);\r\n    }\r\n\r\n     public void actionPerformed(ActionEvent e)\r\n    {\r\n        double c1x = Double.parseDouble(circle1x.getText());\r\n        double c1y = Double.parseDouble(circle1y.getText());\r\n        double c1r = Double.parseDouble(circle1r.getText());\r\n        double c2x = Double.parseDouble(circle2x.getText());\r\n        double c2y = Double.parseDouble(circle2y.getText());\r\n        double c2r = Double.parseDouble(circle2r.getText());\r\n        \r\n        x1 = (int) c1x;\r\n        x2 = (int) c2x;\r\n        y1 = (int) c1y;\r\n        y2 = (int) c2y;\r\n        r1 = (int) c1r;\r\n        r2 = (int) c2r;\r\n        \r\n        \r\n        if(e.getSource()== drawButton){\r\n               repaint();\r\n        }\r\n            \r\n        }\r\n\r\n    }\r\n\r\nclass Circles extends JPanel\r\n{\r\n    \r\n\r\n    public void paintComponent(Graphics g)\r\n    {\r\n        super.paintComponent(g);\r\n        g.setColor(Color.BLACK);\r\n        g.drawOval(Circle.x1, Circle.y1, Circle.r1, Circle.r1);\r\n        g.drawOval(Circle.x2, Circle.y2, Circle.r2, Circle.r2);\r\n    }\r\n}\r\n\r\n\r\n","title":"Passing variable to paintComponent method","body":"<p>I need some help. How does it pass a variable from class <code>Circle</code> to the <code>paintComponent</code> method because I want to make the circle change the x, y, w, h based on user input. Is there any idea to fix this? Since the problem there is an error after I press the button it doesn't execute anything.</p>\n<p>Based on this image.</p>\n<img src=\"https://i.stack.imgur.com/bg3Ds.png\">\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics;\nimport java.awt.GridLayout;\nimport javax.swing.JFrame;\nimport javax.swing.JButton;\nimport javax.swing.JPanel;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.geom.Ellipse2D;\nimport java.text.DecimalFormat;\nimport javax.swing.JLabel;\nimport javax.swing.JTextField;\n\n\npublic class Circle extends JFrame implements ActionListener{\n    \n     private JPanel p1,p2,p3,buttonsize;\n     private JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\n     private JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\n     private JButton drawButton;\n     static int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\n    \n    public static void main(String[]args)\n    {\n        Circle c = new Circle();\n        c.setSize(400,400);\n        c.setTitle(&quot;Project&quot;);\n        c.setVisible(true);\n        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n    \n    \n    public Circle()\n    {\n       \n        title = new JLabel(&quot;Two circles intersect? No&quot;);\n        p1 = new JPanel();\n        p1.add(title);\n\n        p2 = new JPanel();\n        //p2.add(new Circles());\n        \n        lb1 = new JLabel(&quot;Enter circle 1&quot;);\n        lb2 = new JLabel(&quot;Enter circle 2&quot;);\n        lb3 = new JLabel(&quot;info:&quot;);\n        lb4 = new JLabel(&quot;info:&quot;);\n        lb5 = new JLabel(&quot;Center x:&quot;);\n        lb6 = new JLabel(&quot;Center y:&quot;);\n        lb7 = new JLabel(&quot;Radius:&quot;);\n        lb8 = new JLabel(&quot;Center x:&quot;);\n        lb9 = new JLabel(&quot;Center y:&quot;);\n        lb10 = new JLabel(&quot;Radius:&quot;);\n        \n        circle1x = new JTextField(1);\n        circle1y = new JTextField(1);\n        circle1r = new JTextField(1);\n        circle2x = new JTextField(1);\n        circle2y = new JTextField(1);\n        circle2r = new JTextField(1);\n        drawButton = new JButton(&quot;Redraw Circles&quot;);\n        buttonsize = new JPanel();\n        buttonsize.setSize(50,50);\n        buttonsize.add(drawButton);\n        p3 = new JPanel();\n        p3.setLayout(new GridLayout(5,5));\n\n        p3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\n        p3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\n        p3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\n        p3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\n        p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\n        \n        \n        \n        setLayout(new BorderLayout());\n        //call the constructor of the panel\n        add(p1,BorderLayout.NORTH);\n        add(new Circles(),BorderLayout.CENTER);\n        add(p3,BorderLayout.SOUTH);\n        \n        \n        drawButton.addActionListener(this);\n    }\n\n     public void actionPerformed(ActionEvent e)\n    {\n        double c1x = Double.parseDouble(circle1x.getText());\n        double c1y = Double.parseDouble(circle1y.getText());\n        double c1r = Double.parseDouble(circle1r.getText());\n        double c2x = Double.parseDouble(circle2x.getText());\n        double c2y = Double.parseDouble(circle2y.getText());\n        double c2r = Double.parseDouble(circle2r.getText());\n        \n        x1 = (int) c1x;\n        x2 = (int) c2x;\n        y1 = (int) c1y;\n        y2 = (int) c2y;\n        r1 = (int) c1r;\n        r2 = (int) c2r;\n        \n        \n        if(e.getSource()== drawButton){\n               repaint();\n        }\n            \n        }\n\n    }\n\nclass Circles extends JPanel\n{\n    \n\n    public void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        g.setColor(Color.BLACK);\n        g.drawOval(Circle.x1, Circle.y1, Circle.r1, Circle.r1);\n        g.drawOval(Circle.x2, Circle.y2, Circle.r2, Circle.r2);\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","apache-poi","cfml"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1701976564,"post_id":77622469,"comment_id":136844450,"body_markdown":"Check your Java classpath for older versions of Apache POI? Get CF&#39;s classloader to tell you what jars it is loading POI from, in case those aren&#39;t the jars you expected?","body":"Check your Java classpath for older versions of Apache POI? Get CF&#39;s classloader to tell you what jars it is loading POI from, in case those aren&#39;t the jars you expected?"},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1701982535,"post_id":77622469,"comment_id":136845289,"body_markdown":"Thanks @Gagravarr - everything that we are using is &quot;out of the box.&quot; When I try to `dump` a class object via `createObject` I get an error message that says I can&#39;t see things that are &#39;protected&#39;. Unfortunately, I am very unfamiliar with this part of CF and I have limited access to the servers. I&#39;ll continue to research, but if you know of a reference I would gladly take a look.","body":"Thanks @Gagravarr - everything that we are using is &quot;out of the box.&quot; When I try to <code>dump</code> a class object via <code>createObject</code> I get an error message that says I can&#39;t see things that are &#39;protected&#39;. Unfortunately, I am very unfamiliar with this part of CF and I have limited access to the servers. I&#39;ll continue to research, but if you know of a reference I would gladly take a look."},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1701982900,"post_id":77622469,"comment_id":136845350,"body_markdown":"Checking to see if the Apache was updated with a newer version of Java.","body":"Checking to see if the Apache was updated with a newer version of Java."},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1702049923,"post_id":77622469,"comment_id":136853613,"body_markdown":"@Gagravarr - turns out the poi jar files were missing from the /lib folder. I don&#39;t know if they were supposed to be included with the CF2023 install or not. But we updated the /lib folder with poi files and that seemed to resolve the issue.","body":"@Gagravarr - turns out the poi jar files were missing from the /lib folder. I don&#39;t know if they were supposed to be included with the CF2023 install or not. But we updated the /lib folder with poi files and that seemed to resolve the issue."}],"answers":[{"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":2,"creation_date":1702050900,"post_id":77627662,"comment_id":136853821,"body_markdown":"[Apache POI 3.17 was released back in 2017](https://poi.apache.org/devel/history/changes-3x.html#3.17), upgrading to a release from this decade is very much advised!","body":"<a href=\"https://poi.apache.org/devel/history/changes-3x.html#3.17\" rel=\"nofollow noreferrer\">Apache POI 3.17 was released back in 2017</a>, upgrading to a release from this decade is very much advised!"},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1702305880,"post_id":77627662,"comment_id":136876685,"body_markdown":"@Gagravarr - Good point! In the CF2023 bundle, along with version 3, I did see a version 4 and when I look online, I see there is even a version 5. In this case, because of the immediate need, I didn&#39;t want to move to a new version without appropriate testing. But we will definitely put this on the radar.","body":"@Gagravarr - Good point! In the CF2023 bundle, along with version 3, I did see a version 4 and when I look online, I see there is even a version 5. In this case, because of the immediate need, I didn&#39;t want to move to a new version without appropriate testing. But we will definitely put this on the radar."}],"tags":[],"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1702049808,"creation_date":1702049808,"answer_id":77627662,"question_id":77622469,"body_markdown":"As it turned out, the supporting `poi jar` files were missing from the [servername]\\lib folder. The jar files were:\r\n\r\n\r\n    poi-3.17\r\n    poi-contrib\r\n    poi-ooxml-3.17 \r\n    poi-ooxml-schemas-3.17 \r\n    poi-scratchpad \r\n    poi-scratchpad-3.17\r\n\r\nI am just sure if the files were part of the initial 2018 install, and not included with 2023; or if we installed them separately in 2018 and forgot what we did. Either way, this seems to have resolved the issue. \r\n\r\nNote that there is likely a newer version of poi available.","title":"ColdFusion returning an error when using the Java MAPIMessage object","body":"<p>As it turned out, the supporting <code>poi jar</code> files were missing from the [servername]\\lib folder. The jar files were:</p>\n<pre><code>poi-3.17\npoi-contrib\npoi-ooxml-3.17 \npoi-ooxml-schemas-3.17 \npoi-scratchpad \npoi-scratchpad-3.17\n</code></pre>\n<p>I am just sure if the files were part of the initial 2018 install, and not included with 2023; or if we installed them separately in 2018 and forgot what we did. Either way, this seems to have resolved the issue.</p>\n<p>Note that there is likely a newer version of poi available.</p>\n"}],"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627662,"answer_count":1,"score":0,"last_activity_date":1702049808,"creation_date":1701975128,"question_id":77622469,"body_markdown":"I have a process in ColdFusion [2023] that gets the contents of a .msg file (Microsoft email message) so that I can use said contents to create a PDF version of the message. This process has been working fine for the past two+ years. I used the code from the following accepted answer in stackoverflow: https://stackoverflow.com/questions/16473421/coldfusion-extract-information-from-a-msg-file.\r\n\r\nAs of yesterday (to the best of our knowledge as this part of the system is not used daily) the process has stopped working in that it errors out. I am using the Java POI object to gain access to the MAPIMessage object. This line...\r\n\r\n    MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.hsmf.MAPIMessage&quot;);\r\n\r\n..is producing the following error:\r\n\r\n    org.apache.poi.POIReadOnlyDocument not found by poi [93]\r\n\r\nDoes anyone have any ideas of what might be happening or how to investigate the issue? I can access other objects via the POI object. For example, I am able to execute\r\n\r\n    &lt;cfset MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.POIDocument&quot;)&gt;\r\n\r\nwhich, in viewing the `cfdump` returns a list of methods.\r\n\r\nOur CF Administrator is out, but once available I will check with him to see if there were any recent updates to the CF servers. This issue is happening on our dev, test, and production servers. We upgraded to CF2023 over the summer, and I am told by the end user that they have used this part of the application recently, though I am not completely ruling out the upgrade as the culprit. \r\n\r\nI am open to do this a different way but it would need to be via ColdFusion. My thought is that there should be a way to use CFPDF / DDX to convert the .msg to a PDF, but I am not seeing any documentation on how to do so. \r\n\r\n\r\n\r\n","title":"ColdFusion returning an error when using the Java MAPIMessage object","body":"<p>I have a process in ColdFusion [2023] that gets the contents of a .msg file (Microsoft email message) so that I can use said contents to create a PDF version of the message. This process has been working fine for the past two+ years. I used the code from the following accepted answer in stackoverflow: <a href=\"https://stackoverflow.com/questions/16473421/coldfusion-extract-information-from-a-msg-file\">ColdFusion: Extract information from a .msg file</a>.</p>\n<p>As of yesterday (to the best of our knowledge as this part of the system is not used daily) the process has stopped working in that it errors out. I am using the Java POI object to gain access to the MAPIMessage object. This line...</p>\n<pre><code>MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.hsmf.MAPIMessage&quot;);\n</code></pre>\n<p>..is producing the following error:</p>\n<pre><code>org.apache.poi.POIReadOnlyDocument not found by poi [93]\n</code></pre>\n<p>Does anyone have any ideas of what might be happening or how to investigate the issue? I can access other objects via the POI object. For example, I am able to execute</p>\n<pre><code>&lt;cfset MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.POIDocument&quot;)&gt;\n</code></pre>\n<p>which, in viewing the <code>cfdump</code> returns a list of methods.</p>\n<p>Our CF Administrator is out, but once available I will check with him to see if there were any recent updates to the CF servers. This issue is happening on our dev, test, and production servers. We upgraded to CF2023 over the summer, and I am told by the end user that they have used this part of the application recently, though I am not completely ruling out the upgrade as the culprit.</p>\n<p>I am open to do this a different way but it would need to be via ColdFusion. My thought is that there should be a way to use CFPDF / DDX to convert the .msg to a PDF, but I am not seeing any documentation on how to do so.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","projection"],"answers":[{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670185095,"post_id":74677146,"comment_id":131811368,"body_markdown":"Thanks a lot for your answer but I could not understand what is the most proper way for my situation. Let&#39;s say I use query methods, then can I join multiple tables? Could you pls post an example for this scenario?","body":"Thanks a lot for your answer but I could not understand what is the most proper way for my situation. Let&#39;s say I use query methods, then can I join multiple tables? Could you pls post an example for this scenario?"},{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":1,"creation_date":1670188878,"post_id":74677146,"comment_id":131812192,"body_markdown":"All entities associated with the entity are joined automatically if you define those associations in the entity class (`@ManyToMany` in this case). Try to add the method from the answer to your repository and check the data it fetches from the database, it should contain all data you are looking for.","body":"All entities associated with the entity are joined automatically if you define those associations in the entity class (<code>@ManyToMany</code> in this case). Try to add the method from the answer to your repository and check the data it fetches from the database, it should contain all data you are looking for."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670198697,"post_id":74677146,"comment_id":131813918,"body_markdown":"**1.** In this scene, I think it is also possible to use a DTO and populate data to it instead of Projection, right?","body":"<b>1.</b> In this scene, I think it is also possible to use a DTO and populate data to it instead of Projection, right?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670198979,"post_id":74677146,"comment_id":131813945,"body_markdown":"**2.** Can I mix named query and `@Query` in the same Repository method? For example I am filtering records using named query, but I also need to use Text Search of PostgreSQL and I need to add a text parameter besides the others. Then, can I use something like this? I also created custom search filter, but now I also need to add a text search filter parameter to this custom filter, but I could not. Any idea? You may see details on https://stackoverflow.com/questions/74680426/how-to-create-custom-query-using-spring-data-jpa-specifications","body":"<b>2.</b> Can I mix named query and <code>@Query</code> in the same Repository method? For example I am filtering records using named query, but I also need to use Text Search of PostgreSQL and I need to add a text parameter besides the others. Then, can I use something like this? I also created custom search filter, but now I also need to add a text search filter parameter to this custom filter, but I could not. Any idea? You may see details on <a href=\"https://stackoverflow.com/questions/74680426/how-to-create-custom-query-using-spring-data-jpa-specifications\" title=\"how to create custom query using spring data jpa specifications\">stackoverflow.com/questions/74680426/&hellip;</a>"},{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1670223603,"post_id":74677146,"comment_id":131817392,"body_markdown":"1. Yes. 2. No, you can&#39;t mix them, if you have @Query annotation, that query would be used instead of the query method. For dynamic queries you should use Specifications, QueryDSL, or CriteriaAPI.","body":"1. Yes. 2. No, you can&#39;t mix them, if you have @Query annotation, that query would be used instead of the query method. For dynamic queries you should use Specifications, QueryDSL, or CriteriaAPI."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670224295,"post_id":74677146,"comment_id":131817544,"body_markdown":"Thanks a lot, marked as answer. Actually I integrated Criteria API and use Specifications. But in order to use a specific feature e.g. text search of PostgreSQL, I need to use `@Query`. On the other hand, in order to use dynamic filtering, I need to use `@Query Method` (because I need to make text search on database). Am I wrong?","body":"Thanks a lot, marked as answer. Actually I integrated Criteria API and use Specifications. But in order to use a specific feature e.g. text search of PostgreSQL, I need to use <code>@Query</code>. On the other hand, in order to use dynamic filtering, I need to use <code>@Query Method</code> (because I need to make text search on database). Am I wrong?"},{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1670225363,"post_id":74677146,"comment_id":131817766,"body_markdown":"You can&#39;t mix @Query and Specifications.  [https://stackoverflow.com/a/26381869/10231374](https://stackoverflow.com/a/26381869/10231374)","body":"You can&#39;t mix @Query and Specifications.  <a href=\"https://stackoverflow.com/a/26381869/10231374\">https://stackoverflow.com/a/26381869/10231374</a>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670227680,"post_id":74677146,"comment_id":131818424,"body_markdown":"Then, I have to use `@Query by passing search parameters. In this situation, can you clarify me these points pls? &gt;&gt;&gt;","body":"Then, I have to use `@Query by passing search parameters. In this situation, can you clarify me these points pls? &gt;&gt;&gt;"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670227726,"post_id":74677146,"comment_id":131818437,"body_markdown":"**1.** Can I make these parameters Optional in the @Query clause? I am not sure maybe using `?` .","body":"<b>1.</b> Can I make these parameters Optional in the @Query clause? I am not sure maybe using <code>?</code> ."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670227819,"post_id":74677146,"comment_id":131818463,"body_markdown":"**2.** As I need to pass these filter parameters (4 parameter) to my @Query, then how can I build my WHERE clause dynamically? I cannot use spec, but I am not sure if there is an aşternative for creating WHERE clause in my Query. Any idea?","body":"<b>2.</b> As I need to pass these filter parameters (4 parameter) to my @Query, then how can I build my WHERE clause dynamically? I cannot use spec, but I am not sure if there is an aşternative for creating WHERE clause in my Query. Any idea?"},{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1670228912,"post_id":74677146,"comment_id":131818787,"body_markdown":"1. You can&#39;t use Optional parameters. 2. There is no way to dynamically write a query inside @Query annotation.","body":"1. You can&#39;t use Optional parameters. 2. There is no way to dynamically write a query inside @Query annotation."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670229181,"post_id":74677146,"comment_id":131818866,"body_markdown":"In this case I should use something e.g. LIKE for String parameters and true/false for boolean for passing the parameters all the time. Right?","body":"In this case I should use something e.g. LIKE for String parameters and true/false for boolean for passing the parameters all the time. Right?"},{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1670229414,"post_id":74677146,"comment_id":131818954,"body_markdown":"Exactly, that can be used with specifications.","body":"Exactly, that can be used with specifications."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1670229564,"post_id":74677146,"comment_id":131819006,"body_markdown":"But of course I cannot use specifications with @Query and need to find a better way :((","body":"But of course I cannot use specifications with @Query and need to find a better way :(("}],"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":14,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702049663,"creation_date":1670161260,"answer_id":74677146,"question_id":74675588,"body_markdown":"I suggest using [query methods][1] where queries are derived from the method name directly without writing them manually. When interface-based projections are used, the names of their methods have to be identical to the getter methods defined in the entity class.\r\n\r\nTry to define your method as:\r\n```java\r\nList&lt;RecipeSearchProjection&gt; findAllBy();\r\n```\r\n\r\nHowever, projections can also be used with `@Query` annotation. For more details on the different ways to use JPA query projections, check out [the blog post][2].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\r\n  [2]: https://thorben-janssen.com/spring-data-jpa-query-projections/","title":"Java Projection for nested objects using Spring Data JPA?","body":"<p>I suggest using <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">query methods</a> where queries are derived from the method name directly without writing them manually. When interface-based projections are used, the names of their methods have to be identical to the getter methods defined in the entity class.</p>\n<p>Try to define your method as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;RecipeSearchProjection&gt; findAllBy();\n</code></pre>\n<p>However, projections can also be used with <code>@Query</code> annotation. For more details on the different ways to use JPA query projections, check out <a href=\"https://thorben-janssen.com/spring-data-jpa-query-projections/\" rel=\"nofollow noreferrer\">the blog post</a>.</p>\n"},{"tags":[],"owner":{"account_id":14509068,"reputation":95,"user_id":10480017,"display_name":"Og&#252;n"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696559078,"creation_date":1696559078,"answer_id":77241547,"question_id":74675588,"body_markdown":"\r\nI don&#39;t recommend using interface based projections. It shows too much GC activity in the system.\r\n\r\nCheck out this answer of mine instead.\r\n\r\nhttps://stackoverflow.com/a/77241396/10480017\r\n\r\nSelect query results using interface-based projection:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UNqrR.png\r\n\r\nBencmark:\r\n\r\n    Benchmark                              Mode  Cnt       Score       Error  Units\r\n    findAll_User_JPA                       avgt   20  313996,003 &#177; 14203,533  us/op\r\n    findUserDto1_UserDto11_EntityToDTO     avgt   20  117024,805 &#177;  4699,478  us/op\r\n    findUserDto1_UserDto1_JPQL_Query       avgt   20  115913,206 &#177;  4862,815  us/op\r\n    findUserProjection_UserProjection_JPQL avgt   20  416818,290 &#177; 11266,894  us/op\r\n\r\n\r\nIn other words, it is slower than queries made with the normal Entity class.","title":"Java Projection for nested objects using Spring Data JPA?","body":"<p>I don't recommend using interface based projections. It shows too much GC activity in the system.</p>\n<p>Check out this answer of mine instead.</p>\n<p><a href=\"https://stackoverflow.com/a/77241396/10480017\">https://stackoverflow.com/a/77241396/10480017</a></p>\n<p>Select query results using interface-based projection:</p>\n<p><a href=\"https://i.stack.imgur.com/UNqrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UNqrR.png\" alt=\"enter image description here\" /></a></p>\n<p>Bencmark:</p>\n<pre><code>Benchmark                              Mode  Cnt       Score       Error  Units\nfindAll_User_JPA                       avgt   20  313996,003 ± 14203,533  us/op\nfindUserDto1_UserDto11_EntityToDTO     avgt   20  117024,805 ±  4699,478  us/op\nfindUserDto1_UserDto1_JPQL_Query       avgt   20  115913,206 ±  4862,815  us/op\nfindUserProjection_UserProjection_JPQL avgt   20  416818,290 ± 11266,894  us/op\n</code></pre>\n<p>In other words, it is slower than queries made with the normal Entity class.</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2857,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74677146,"answer_count":2,"score":0,"last_activity_date":1702049663,"creation_date":1670156875,"question_id":74675588,"body_markdown":"I have the following projection class and I want to retrieve data by joining Recipe and Ingredient tables from db using `@Query` in Spring data JPA:\r\n\r\n```\r\npublic interface RecipeProjection {\r\n\r\n        Long getId();\r\n        String getTitle();\r\n        \r\n        List&lt;Ingredient&gt; getIngredients();\r\n}\r\n```\r\n\r\n\r\nHowever, I cannot map the ingredients to the projection. Here is my query in the repository:\r\n\r\n```\r\n@Query(value = &quot;SELECT r.id AS id, r.title, i.name AS ingredientName &quot; +\r\n        &quot;FROM Recipe r &quot; +\r\n        &quot;LEFT JOIN RecipeIngredient ri ON r.id = ri.recipeId &quot; +\r\n        &quot;LEFT JOIN Ingredient i ON ri.ingredientId = i.id &quot;\r\n)\r\nList&lt;RecipeSearchProjection&gt; getData();\r\n```\r\n\r\nI am not sure if using a proper alias for ingredient table can solve the problem, but even I tried, I cannot retrieve its data. So, is it possible to get nested data via Java Projection? ","title":"Java Projection for nested objects using Spring Data JPA?","body":"<p>I have the following projection class and I want to retrieve data by joining Recipe and Ingredient tables from db using <code>@Query</code> in Spring data JPA:</p>\n<pre><code>public interface RecipeProjection {\n\n        Long getId();\n        String getTitle();\n        \n        List&lt;Ingredient&gt; getIngredients();\n}\n</code></pre>\n<p>However, I cannot map the ingredients to the projection. Here is my query in the repository:</p>\n<pre><code>@Query(value = &quot;SELECT r.id AS id, r.title, i.name AS ingredientName &quot; +\n        &quot;FROM Recipe r &quot; +\n        &quot;LEFT JOIN RecipeIngredient ri ON r.id = ri.recipeId &quot; +\n        &quot;LEFT JOIN Ingredient i ON ri.ingredientId = i.id &quot;\n)\nList&lt;RecipeSearchProjection&gt; getData();\n</code></pre>\n<p>I am not sure if using a proper alias for ingredient table can solve the problem, but even I tried, I cannot retrieve its data. So, is it possible to get nested data via Java Projection?</p>\n"},{"tags":["java","casting","integer","render","bufferedimage"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1702049877,"post_id":77627649,"comment_id":136853602,"body_markdown":"What is the point of this code? What are you trying to accomplish.? The BuffereidImage class already has a method that returns an Array on ints.","body":"What is the point of this code? What are you trying to accomplish.? The BuffereidImage class already has a method that returns an Array on ints."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1702055848,"post_id":77627649,"comment_id":136854651,"body_markdown":"The _[DataBuffer](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBuffer.html)_ returned is a _[DataBufferByte](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferByte.html)_, and not a _[DataBufferInt](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferInt.html)_.  Is there any reason not to use a _byte_ array, over the _int_ array?","body":"The <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBuffer.html\" rel=\"nofollow noreferrer\">DataBuffer</a></i> returned is a <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferByte.html\" rel=\"nofollow noreferrer\">DataBufferByte</a></i>, and not a <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferInt.html\" rel=\"nofollow noreferrer\">DataBufferInt</a></i>.  Is there any reason not to use a <i>byte</i> array, over the <i>int</i> array?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1702055871,"post_id":77627649,"comment_id":136854655,"body_markdown":"The assignment `imageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);` is pointless as you are overwriting the value with `imageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));` right afterwards. So only when an `IOException` occurs, the image is guaranteed to have `TYPE_INT_ARGB`. Otherwise, it can be anything (whatever the ImageIO loader decides). Note that this also applies to the size of the `BufferedImage`; it will be whatever has been read from the PNG, entirely unrelated to the `imageWidth` and `imageHeight` variables used to initialize the unused empty image.","body":"The assignment <code>imageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);</code> is pointless as you are overwriting the value with <code>imageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));</code> right afterwards. So only when an <code>IOException</code> occurs, the image is guaranteed to have <code>TYPE_INT_ARGB</code>. Otherwise, it can be anything (whatever the ImageIO loader decides). Note that this also applies to the size of the <code>BufferedImage</code>; it will be whatever has been read from the PNG, entirely unrelated to the <code>imageWidth</code> and <code>imageHeight</code> variables used to initialize the unused empty image."},{"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"score":0,"creation_date":1702056256,"post_id":77627649,"comment_id":136854708,"body_markdown":"But i want to get a reference to the BufferedImage into an int[] so that i can manipulate what parts should be visible of the image before the g.DrawImage() occurs, but through the int[].","body":"But i want to get a reference to the BufferedImage into an int[] so that i can manipulate what parts should be visible of the image before the g.DrawImage() occurs, but through the int[]."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1702056617,"post_id":77627649,"comment_id":136854773,"body_markdown":"There are plenty of ways to modify a `BufferedImage`. There are also multiple ways to control the rendering, without modifying the `BufferedImage`. Why do you think that getting data as an `int[]` was the only way to achieve your goal?","body":"There are plenty of ways to modify a <code>BufferedImage</code>. There are also multiple ways to control the rendering, without modifying the <code>BufferedImage</code>. Why do you think that getting data as an <code>int[]</code> was the only way to achieve your goal?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1702060329,"post_id":77627649,"comment_id":136855283,"body_markdown":"“so that i can manipulate what parts should be visible of the image” Please explain this in more detail.  If you just want to draw a rectangular subsection of an image, there are much better ways to do it than altering the image itself.","body":"“so that i can manipulate what parts should be visible of the image” Please explain this in more detail.  If you just want to draw a rectangular subsection of an image, there are much better ways to do it than altering the image itself."},{"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"score":0,"creation_date":1702061492,"post_id":77627649,"comment_id":136855433,"body_markdown":"Okay, but then can you point me in a direction  where I can draw multiple sprites from an atlas with one drawImage call?","body":"Okay, but then can you point me in a direction  where I can draw multiple sprites from an atlas with one drawImage call?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1702075594,"post_id":77627649,"comment_id":136857174,"body_markdown":"As you can see, [the Graphics class has six drawImage methods](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/Graphics.html#method-summary).  I think you’ll find that the first two will do what you want:  you can specify the exact part of an image that you wish to draw.  Alternatively, you can call [getSubimage](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#getSubimage(int,int,int,int)) on your BufferedImage to create an image that uses the same pixel storage as the larger image, rather than a copy.","body":"As you can see, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/Graphics.html#method-summary\" rel=\"nofollow noreferrer\">the Graphics class has six drawImage methods</a>.  I think you’ll find that the first two will do what you want:  you can specify the exact part of an image that you wish to draw.  Alternatively, you can call <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#getSubimage(int,int,int,int)\" rel=\"nofollow noreferrer\">getSubimage</a> on your BufferedImage to create an image that uses the same pixel storage as the larger image, rather than a copy."},{"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"score":0,"creation_date":1702111581,"post_id":77627649,"comment_id":136859276,"body_markdown":"Allright i got it know, I realize where the problem is","body":"Allright i got it know, I realize where the problem is"}],"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702049641,"creation_date":1702049641,"question_id":77627649,"body_markdown":"So i&#39;ve read the other posts on this topic but they doesn&#39;t help me, only suggests that you should use byte[] instead.\r\n\r\nThe problem is that im getting the exception:\r\n\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class java.awt.image.DataBufferByte cannot be cast to class java.awt.image.DataBufferInt (java.awt.image.DataBufferByte and java.awt.image.DataBufferInt are in module java.desktop of loader &#39;bootstrap&#39;)\r\n\r\nWhere could the problem lie in not beeing able to cast the the bufferedImage data to BufferedDataInt??:\r\n`pixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();`\r\n\r\nMain class:\r\n```\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.image.*;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class SwingMain extends Canvas{\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\tBitmap sprite;\r\n\t\r\n\tJFrame frame;\r\n\tprivate static final int FRAME_WIDTH = 1080;\r\n\tprivate static final int FRAME_HEIGHT = 960;\r\n\tprivate boolean running = false;\r\n\tprivate static final int imageWidth = 256;\r\n\tprivate static final int imageHeight= 256;\r\n\tprivate static int tick;\r\n\tBufferedImage imageAtlas;\r\n\tBitmap bitmap;\r\n\tInputHandler inputHandler = new InputHandler(this);\r\n\tstatic int xp = 0;\r\n\tstatic int yp = 0;\r\n\t\r\n\tSwingMain()\r\n\t{\r\n\t\t// Frame\r\n\t\tframe = new JFrame();\r\n\t\tframe.setSize(FRAME_WIDTH, FRAME_HEIGHT);\r\n\t\tframe.setVisible(true);\t\r\n\t\tframe.setResizable(false);\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\r\n\t\t// Must be set for createBufferStrategy to work\r\n\t\tframe.add(this); \r\n\t\t\r\n\t\t// Sets the canvas focus so it responds to keyboardEvents directly on startup\r\n\t\tthis.requestFocusInWindow(); \r\n\t\t\r\n\t\timageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);\r\n\t\t//Bitmap bitmap = new Bitmap(imageWidth, imageHeight);\r\n\t\t//imageAtlas.setRGB(0, 0, bitmap.w, bitmap.h, bitmap.pixels, 0, bitmap.w);\r\n\t\ttry\r\n\t\t{\r\n\t\t\timageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));\r\n\t\t}\r\n\t\tcatch(IOException e)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;FILE FAILED&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tbitmap = new Bitmap(imageAtlas);\r\n\t\t\r\n\t\tint width = imageAtlas.getWidth();\r\n\t\tint height= imageAtlas.getHeight();\t\r\n\t\t\r\n\t\trunning = true;\r\n\t\t\r\n\t}\r\n```\r\n\r\nBitmap class\r\n\r\n```\r\nimport java.awt.image.*;\r\n\r\npublic class Bitmap {\r\n\tpublic int[] pixels;\r\n\tpublic int w, h;\r\n\t\r\n\tBitmap(int w, int h, int[] pixels)\r\n\t{\r\n\t\tthis.w = w;\r\n\t\tthis.h = h;\r\n\t\tthis.pixels= pixels; \r\n\t}\r\n\t\r\n\tBitmap(BufferedImage image)\r\n\t{\r\n\t\t\r\n\t\tthis.w = image.getWidth();\r\n\t\tthis.h = image.getHeight();\r\n\t\t\r\n\t\tpixels = new int[w*h];\r\n\t\t\r\n\t\t// Cast the the DataBuffer in the image.getRaster() to a DataBufferInt type and extract the getData() from that. \r\n\t\tSystem.out.println(&quot;Datatype: &quot; + image.getRaster().getDataBuffer().getDataType());\r\n\t\tpixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();\r\n\t\t//image.getRGB(0, 0, w, h, pixels, 0, w);\t\t\r\n\t}```\r\n\r\n\r\n","title":"Getting the reference for BufferedImage to and int[] problem","body":"<p>So i've read the other posts on this topic but they doesn't help me, only suggests that you should use byte[] instead.</p>\n<p>The problem is that im getting the exception:</p>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.awt.image.DataBufferByte cannot be cast to class java.awt.image.DataBufferInt (java.awt.image.DataBufferByte and java.awt.image.DataBufferInt are in module java.desktop of loader 'bootstrap')</p>\n<p>Where could the problem lie in not beeing able to cast the the bufferedImage data to BufferedDataInt??:\n<code>pixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();</code></p>\n<p>Main class:</p>\n<pre><code>import javax.imageio.ImageIO;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.KeyEvent;\nimport java.awt.image.*;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class SwingMain extends Canvas{\n    private static final long serialVersionUID = 1L;\n    \n    Bitmap sprite;\n    \n    JFrame frame;\n    private static final int FRAME_WIDTH = 1080;\n    private static final int FRAME_HEIGHT = 960;\n    private boolean running = false;\n    private static final int imageWidth = 256;\n    private static final int imageHeight= 256;\n    private static int tick;\n    BufferedImage imageAtlas;\n    Bitmap bitmap;\n    InputHandler inputHandler = new InputHandler(this);\n    static int xp = 0;\n    static int yp = 0;\n    \n    SwingMain()\n    {\n        // Frame\n        frame = new JFrame();\n        frame.setSize(FRAME_WIDTH, FRAME_HEIGHT);\n        frame.setVisible(true); \n        frame.setResizable(false);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        // Must be set for createBufferStrategy to work\n        frame.add(this); \n        \n        // Sets the canvas focus so it responds to keyboardEvents directly on startup\n        this.requestFocusInWindow(); \n        \n        imageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);\n        //Bitmap bitmap = new Bitmap(imageWidth, imageHeight);\n        //imageAtlas.setRGB(0, 0, bitmap.w, bitmap.h, bitmap.pixels, 0, bitmap.w);\n        try\n        {\n            imageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));\n        }\n        catch(IOException e)\n        {\n            System.out.println(&quot;FILE FAILED&quot;);\n        }\n        \n        bitmap = new Bitmap(imageAtlas);\n        \n        int width = imageAtlas.getWidth();\n        int height= imageAtlas.getHeight(); \n        \n        running = true;\n        \n    }\n</code></pre>\n<p>Bitmap class</p>\n<pre><code>import java.awt.image.*;\n\npublic class Bitmap {\n    public int[] pixels;\n    public int w, h;\n    \n    Bitmap(int w, int h, int[] pixels)\n    {\n        this.w = w;\n        this.h = h;\n        this.pixels= pixels; \n    }\n    \n    Bitmap(BufferedImage image)\n    {\n        \n        this.w = image.getWidth();\n        this.h = image.getHeight();\n        \n        pixels = new int[w*h];\n        \n        // Cast the the DataBuffer in the image.getRaster() to a DataBufferInt type and extract the getData() from that. \n        System.out.println(&quot;Datatype: &quot; + image.getRaster().getDataBuffer().getDataType());\n        pixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();\n        //image.getRGB(0, 0, w, h, pixels, 0, w);       \n    }```\n\n\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","mockmvc","multipartfile"],"owner":{"account_id":14528548,"reputation":79,"user_id":10494078,"display_name":"Miltos Dimitriadis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702049550,"creation_date":1702049550,"question_id":77627640,"body_markdown":"I have the following REST endpoint : \r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;SuggestionResponse&gt; createSuggestion(@RequestPart(&quot;data&quot;) @Valid final CreateSuggestionRequest suggestionRequest,\r\n            @RequestPart(required = false, value = &quot;files&quot;) final MultipartFile[] files,\r\n            @RequestPart(required = false, value = &quot;titles&quot;) final String[] filesTitles)\r\n\r\nI have managed it to test sucessfully end to end with Postman, but I am getting a hard time with the unit test.  \r\nHere is my unit test : \r\n\r\n    @Test\r\n    void createSuggestion_shouldReturnResponse() throws Exception {\r\n\r\n        final var request = CreateSuggestionRequest.builder()\r\n                .title(&quot;title1&quot;)\r\n                .subject(&quot;subject1&quot;)\r\n                .build();\r\n\r\n        final var inputJson = objectMapper.writeValueAsString(request);\r\n\r\n        final var file1 = new MockMultipartFile(&quot;file1&quot;, &quot;hello1.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\r\n        final var file2 = new MockMultipartFile(&quot;file2&quot;, &quot;hello2.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\r\n\r\n        final var titles = &quot;{title1, title2}&quot;;\r\n\r\n        mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/suggestion&quot;)\r\n                        .file(file1)\r\n                        .file(file2)\r\n                        .content(inputJson)\r\n                        .content(titles)\r\n                        .contentType(MediaType.MULTIPART_FORM_DATA))\r\n                .andExpect(MockMvcResultMatchers.status().isCreated());\r\n    }\r\n\r\nI keep receiving the following Exception. Any ideas?  \r\n\r\n    Resolved Exception:\r\n             Type = org.springframework.web.multipart.support.MissingServletRequestPartException\r\n\r\n    MockHttpServletResponse:\r\n               Status = 400\r\n        Error message = Required request part &#39;data&#39; is not present","title":"Spring Boot - MockMvc Unit test POST endpoint with multiple RequestParts and MultiPartFiles","body":"<p>I have the following REST endpoint :</p>\n<pre><code>@PostMapping\npublic ResponseEntity&lt;SuggestionResponse&gt; createSuggestion(@RequestPart(&quot;data&quot;) @Valid final CreateSuggestionRequest suggestionRequest,\n        @RequestPart(required = false, value = &quot;files&quot;) final MultipartFile[] files,\n        @RequestPart(required = false, value = &quot;titles&quot;) final String[] filesTitles)\n</code></pre>\n<p>I have managed it to test sucessfully end to end with Postman, but I am getting a hard time with the unit test.<br />\nHere is my unit test :</p>\n<pre><code>@Test\nvoid createSuggestion_shouldReturnResponse() throws Exception {\n\n    final var request = CreateSuggestionRequest.builder()\n            .title(&quot;title1&quot;)\n            .subject(&quot;subject1&quot;)\n            .build();\n\n    final var inputJson = objectMapper.writeValueAsString(request);\n\n    final var file1 = new MockMultipartFile(&quot;file1&quot;, &quot;hello1.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\n    final var file2 = new MockMultipartFile(&quot;file2&quot;, &quot;hello2.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\n\n    final var titles = &quot;{title1, title2}&quot;;\n\n    mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/suggestion&quot;)\n                    .file(file1)\n                    .file(file2)\n                    .content(inputJson)\n                    .content(titles)\n                    .contentType(MediaType.MULTIPART_FORM_DATA))\n            .andExpect(MockMvcResultMatchers.status().isCreated());\n}\n</code></pre>\n<p>I keep receiving the following Exception. Any ideas?</p>\n<pre><code>Resolved Exception:\n         Type = org.springframework.web.multipart.support.MissingServletRequestPartException\n\nMockHttpServletResponse:\n           Status = 400\n    Error message = Required request part 'data' is not present\n</code></pre>\n"},{"tags":["java","excel-formula","apache-poi","excel-2007"],"answers":[{"comments":[{"owner":{"account_id":11616907,"reputation":29,"user_id":8509309,"display_name":"pranavs"},"score":0,"creation_date":1702049118,"post_id":77626931,"comment_id":136853450,"body_markdown":"Thank you for the quick fix. This hack resolved my problem. Is there any documentation on this subject/setting for the _xlfn prefix?","body":"Thank you for the quick fix. This hack resolved my problem. Is there any documentation on this subject/setting for the _xlfn prefix?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1702049486,"post_id":77626931,"comment_id":136853516,"body_markdown":"https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025","body":"<a href=\"https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/office/&hellip;</a>"}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702049472,"creation_date":1702042323,"answer_id":77626931,"question_id":77626535,"body_markdown":"The Excel function `IFS` was introduced after publishing the Office Open XML file system in 2007. Thus not all spreadsheet applications will support this function. To mark this, such functions are prefixed by `_xlfn.` in file storage. That is in `/xl/worksheets/sheet*.xml` using Office Open XML `*.xlsx`.\r\n\r\nBecause of that prefix spreadsheet applications can detect a function that is not supported in the version of Open Office XML that they are currently running. See: [Issue: An _xlfn. prefix is displayed in front of a formula](https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025)\r\n\r\nSince Apache POI directly writes into file storage `/xl/worksheets/sheet*.xml`, that prefix must be set using `Cell.setCellFormula`. Wrong is `setCellFormula(&quot;...IFS(...&quot;)`. Correct is `setCellFormula(&quot;..._xlfn.IFS(...&quot;)`.\r\n\r\nAditional your code should set numeric values for numbers and not strings. Wrong: `...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },...`. Correct `...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },...`.\r\n\r\nComplete example using your code sample:\r\n\r\n    import java.awt.Desktop;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.ss.usermodel.Workbook;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    \r\n    public class CreateExcelFormulaIFS {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (Workbook workbook = new XSSFWorkbook();\r\n    \t   FileOutputStream fileout = new FileOutputStream(&quot;./IFSFormula.xlsx&quot;)) {\r\n    \r\n       Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n    \r\n       Row row;\r\n       Cell cell;\r\n    \t//String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\r\n    \t//        + &quot;&quot;;\r\n       String strFormula = &quot;IFERROR(_xlfn.IFS(%s=\\&quot;css\\&quot;, _xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),_xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))&quot;;\r\n       Object[][] data = new Object[][] {\r\n    \tnew Object[] { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\r\n        new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\r\n    \tnew Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },\r\n    \tnew Object[] { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, 0.4 },\r\n    \tnew Object[] { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, 0.7 },\r\n    \tnew Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 0.8 },\r\n        new Object[] { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, 0.2 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, 0.1 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, 0.4 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 0.2 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.8 },\r\n        new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.6 },\r\n        new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, 0.4 }\r\n       };\r\n       for (int r = 0; r &lt; data.length; r++) {\r\n    \trow = dataSheet.createRow(r);\r\n    \tObject[] rowData = data[r];\r\n    \tfor (int c = 0; c &lt; rowData.length; c++) {\r\n    \t cell = row.createCell(c);\r\n    \t if (rowData[c] instanceof String) {\r\n    \t  cell.setCellValue((String) rowData[c]);\r\n    \t } else if (rowData[c] instanceof Number) {\r\n    \t  cell.setCellValue(((Number) rowData[c]).doubleValue());\r\n    \t }\r\n    \t}\r\n    \tif (rowData.length &lt; 5) {\r\n    \t cell = row.createCell(4);\r\n    \t String fileTypeCol = &quot;C&quot; + (r + 1);\r\n    \t String changeCol = &quot;D&quot; + (r + 1);\r\n    \t String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\r\n    \t\t\t\t\tchangeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\r\n    \t\t\t\t\tchangeCol, changeCol);\r\n    \t System.out.println(&quot;Formula ====== &quot; + formula);\r\n    \t cell.setCellFormula(formula);\r\n    \t}\r\n       }\r\n    \r\n       workbook.write(fileout);\r\n       fileout.close();\r\n       Desktop.getDesktop().open(new File(&quot;./IFSFormula.xlsx&quot;));\r\n    \r\n      }\r\n     }\r\n    }","title":"Formula cell in excel shows #NAME?","body":"<p>The Excel function <code>IFS</code> was introduced after publishing the Office Open XML file system in 2007. Thus not all spreadsheet applications will support this function. To mark this, such functions are prefixed by <code>_xlfn.</code> in file storage. That is in <code>/xl/worksheets/sheet*.xml</code> using Office Open XML <code>*.xlsx</code>.</p>\n<p>Because of that prefix spreadsheet applications can detect a function that is not supported in the version of Open Office XML that they are currently running. See: <a href=\"https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025\" rel=\"nofollow noreferrer\">Issue: An _xlfn. prefix is displayed in front of a formula</a></p>\n<p>Since Apache POI directly writes into file storage <code>/xl/worksheets/sheet*.xml</code>, that prefix must be set using <code>Cell.setCellFormula</code>. Wrong is <code>setCellFormula(&quot;...IFS(...&quot;)</code>. Correct is <code>setCellFormula(&quot;..._xlfn.IFS(...&quot;)</code>.</p>\n<p>Aditional your code should set numeric values for numbers and not strings. Wrong: <code>...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },...</code>. Correct <code>...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },...</code>.</p>\n<p>Complete example using your code sample:</p>\n<pre><code>import java.awt.Desktop;\nimport java.io.File;\nimport java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class CreateExcelFormulaIFS {\n\n public static void main(String[] args) throws Exception {\n\n  try (Workbook workbook = new XSSFWorkbook();\n       FileOutputStream fileout = new FileOutputStream(&quot;./IFSFormula.xlsx&quot;)) {\n\n   Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n   Row row;\n   Cell cell;\n    //String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\n    //        + &quot;&quot;;\n   String strFormula = &quot;IFERROR(_xlfn.IFS(%s=\\&quot;css\\&quot;, _xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),_xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))&quot;;\n   Object[][] data = new Object[][] {\n    new Object[] { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\n    new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\n    new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },\n    new Object[] { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, 0.4 },\n    new Object[] { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, 0.7 },\n    new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 0.8 },\n    new Object[] { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, 0.2 },\n    new Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, 0.1 },\n    new Object[] { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, 0.4 },\n    new Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\n    new Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 0.2 },\n    new Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.8 },\n    new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.6 },\n    new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, 0.4 }\n   };\n   for (int r = 0; r &lt; data.length; r++) {\n    row = dataSheet.createRow(r);\n    Object[] rowData = data[r];\n    for (int c = 0; c &lt; rowData.length; c++) {\n     cell = row.createCell(c);\n     if (rowData[c] instanceof String) {\n      cell.setCellValue((String) rowData[c]);\n     } else if (rowData[c] instanceof Number) {\n      cell.setCellValue(((Number) rowData[c]).doubleValue());\n     }\n    }\n    if (rowData.length &lt; 5) {\n     cell = row.createCell(4);\n     String fileTypeCol = &quot;C&quot; + (r + 1);\n     String changeCol = &quot;D&quot; + (r + 1);\n     String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\n                    changeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\n                    changeCol, changeCol);\n     System.out.println(&quot;Formula ====== &quot; + formula);\n     cell.setCellFormula(formula);\n    }\n   }\n\n   workbook.write(fileout);\n   fileout.close();\n   Desktop.getDesktop().open(new File(&quot;./IFSFormula.xlsx&quot;));\n\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":11616907,"reputation":29,"user_id":8509309,"display_name":"pranavs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77626931,"answer_count":1,"score":1,"last_activity_date":1702049472,"creation_date":1702038494,"question_id":77626535,"body_markdown":"I am attempting to add an excel formula to calculate Upgrade Effort based on certain conditions that will refer to other columns in the same excel sheet. \r\n\r\nBelow is my formula \r\n\r\n```lang-excel\r\n=@IFERROR(@IFS(C3=&quot;css&quot;, IFS(D3&gt;0.5, &quot;High&quot;,\r\n D3&gt;0.3, &quot;Medium&quot;, D3&gt;0.2, &quot;Low&quot;,D3&gt;0,&quot;Very Low&quot;, \r\n D3=0, &quot;None&quot;)),\r\n IFS(D3&gt;0.5,&quot;High&quot;,D3&gt;0.3,&quot;Medium&quot;,D3&gt;0.2,&quot;Low&quot;,D3&gt;0,\r\n &quot;Very Low&quot;,D3=0,&quot;None&quot;))\r\n```\r\nThe value of a formula cell is not evaluated. When you select a cell and press enter, a popup warning appears, and the formula is correctly evaluated.\r\n\r\nSample code\r\n\r\n```\r\n\r\nimport java.awt.Desktop;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\n\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.Sheet;\r\nimport org.apache.poi.ss.usermodel.Workbook;\r\nimport org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\npublic class CreateExcekFormula {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        try (Workbook workbook = new XSSFWorkbook();\r\n                FileOutputStream fileout = new FileOutputStream(&quot;ItemFilter.xlsx&quot;)) {\r\n\r\n            Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n\r\n            Row row;\r\n            Cell cell;\r\n            String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\r\n                    + &quot;&quot;;\r\n            Object[][] data = new Object[][]\r\n                { new Object[]\r\n                            { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\r\n                  new Object[]\r\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\r\n                  new Object[]\r\n                  { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },\r\n                  new Object[]\r\n                  { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, &quot;0.4&quot; },\r\n                  new Object[]\r\n                  { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, &quot;0.7&quot; },\r\n                  new Object[]\r\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.8&quot; },\r\n                  new Object[]\r\n                  { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.2&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.1&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, &quot;0.4&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.2&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.8&quot; },\r\n                  new Object[]\r\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.6&quot; },\r\n                  new Object[]\r\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, &quot;0.4&quot; } };\r\n            for (int r = 0; r &lt; data.length; r++) {\r\n                row = dataSheet.createRow(r);\r\n                Object[] rowData = data[r];\r\n                for (int c = 0; c &lt; rowData.length; c++) {\r\n                    cell = row.createCell(c);\r\n                    if (rowData[c] instanceof String) {\r\n                        cell.setCellValue((String) rowData[c]);\r\n                    } else if (rowData[c] instanceof Number) {\r\n                        cell.setCellValue(((Number) rowData[c]).doubleValue());\r\n                    }\r\n                }\r\n                if (rowData.length &lt; 5) {\r\n                    cell = row.createCell(4);\r\n                    String fileTypeCol = &quot;C&quot; + (r + 1);\r\n                    String changeCol = &quot;D&quot; + (r + 1);\r\n                    String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\r\n                            changeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\r\n                            changeCol, changeCol);\r\n                    System.out.println(&quot;Formula ====== &quot; + formula);\r\n                    cell.setCellFormula(formula);\r\n                }\r\n            }\r\n\r\n            XSSFFormulaEvaluator.evaluateAllFormulaCells(workbook);\r\n\r\n            workbook.write(fileout);\r\n            fileout.close();\r\n            Desktop.getDesktop().open(new File(&quot;ItemFilter.xlsx&quot;));\r\n\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nReceived outcome:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JPOUp.png","title":"Formula cell in excel shows #NAME?","body":"<p>I am attempting to add an excel formula to calculate Upgrade Effort based on certain conditions that will refer to other columns in the same excel sheet.</p>\n<p>Below is my formula</p>\n<pre class=\"lang-excel prettyprint-override\"><code>=@IFERROR(@IFS(C3=&quot;css&quot;, IFS(D3&gt;0.5, &quot;High&quot;,\n D3&gt;0.3, &quot;Medium&quot;, D3&gt;0.2, &quot;Low&quot;,D3&gt;0,&quot;Very Low&quot;, \n D3=0, &quot;None&quot;)),\n IFS(D3&gt;0.5,&quot;High&quot;,D3&gt;0.3,&quot;Medium&quot;,D3&gt;0.2,&quot;Low&quot;,D3&gt;0,\n &quot;Very Low&quot;,D3=0,&quot;None&quot;))\n</code></pre>\n<p>The value of a formula cell is not evaluated. When you select a cell and press enter, a popup warning appears, and the formula is correctly evaluated.</p>\n<p>Sample code</p>\n<pre><code>\nimport java.awt.Desktop;\nimport java.io.File;\nimport java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class CreateExcekFormula {\n\n    public static void main(String[] args) throws Exception {\n\n        try (Workbook workbook = new XSSFWorkbook();\n                FileOutputStream fileout = new FileOutputStream(&quot;ItemFilter.xlsx&quot;)) {\n\n            Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n            Row row;\n            Cell cell;\n            String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\n                    + &quot;&quot;;\n            Object[][] data = new Object[][]\n                { new Object[]\n                            { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\n                  new Object[]\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\n                  new Object[]\n                  { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },\n                  new Object[]\n                  { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, &quot;0.4&quot; },\n                  new Object[]\n                  { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, &quot;0.7&quot; },\n                  new Object[]\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.8&quot; },\n                  new Object[]\n                  { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.2&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.1&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, &quot;0.4&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.2&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.8&quot; },\n                  new Object[]\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.6&quot; },\n                  new Object[]\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, &quot;0.4&quot; } };\n            for (int r = 0; r &lt; data.length; r++) {\n                row = dataSheet.createRow(r);\n                Object[] rowData = data[r];\n                for (int c = 0; c &lt; rowData.length; c++) {\n                    cell = row.createCell(c);\n                    if (rowData[c] instanceof String) {\n                        cell.setCellValue((String) rowData[c]);\n                    } else if (rowData[c] instanceof Number) {\n                        cell.setCellValue(((Number) rowData[c]).doubleValue());\n                    }\n                }\n                if (rowData.length &lt; 5) {\n                    cell = row.createCell(4);\n                    String fileTypeCol = &quot;C&quot; + (r + 1);\n                    String changeCol = &quot;D&quot; + (r + 1);\n                    String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\n                            changeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\n                            changeCol, changeCol);\n                    System.out.println(&quot;Formula ====== &quot; + formula);\n                    cell.setCellFormula(formula);\n                }\n            }\n\n            XSSFFormulaEvaluator.evaluateAllFormulaCells(workbook);\n\n            workbook.write(fileout);\n            fileout.close();\n            Desktop.getDesktop().open(new File(&quot;ItemFilter.xlsx&quot;));\n\n        }\n\n    }\n}\n</code></pre>\n<p>Received outcome:</p>\n<p><a href=\"https://i.stack.imgur.com/JPOUp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JPOUp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"score":1,"creation_date":1702049220,"post_id":77627603,"comment_id":136853474,"body_markdown":"Help us help you - share the output you&#39;re trying to get","body":"Help us help you - share the output you&#39;re trying to get"},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":2,"creation_date":1702049362,"post_id":77627603,"comment_id":136853490,"body_markdown":"By definition, if the result you get is not what you expected, the code is not correct. In this case, `System.out.println(&quot;*&quot;);` should be `System.out.print(&quot;*&quot;);`","body":"By definition, if the result you get is not what you expected, the code is not correct. In this case, <code>System.out.println(&quot;*&quot;);</code> should be <code>System.out.print(&quot;*&quot;);</code>"},{"owner":{"account_id":30099069,"reputation":1,"user_id":23066660,"display_name":"java programmer"},"score":0,"creation_date":1702049534,"post_id":77627603,"comment_id":136853524,"body_markdown":"its worked thanks","body":"its worked thanks"}],"owner":{"account_id":30099069,"reputation":1,"user_id":23066660,"display_name":"java programmer"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1702049426,"answer_count":0,"score":-4,"last_activity_date":1702049428,"creation_date":1702049150,"question_id":77627603,"body_markdown":"I am working on a star-printing problem in Java using VS Code, but I don&#39;t get the right output. The stars are printing in a raw manner, not a pyramidal shape.\r\n\r\n```\r\npublic class halfpyramid {\r\n    public static void main(String args[]){\r\n        int row=5;\r\n\r\n        for(int i = 1; i &lt;= row; ++i){\r\n            for(int j = 1; j &lt;= i; ++j){\r\n                System.out.println(&quot;*&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"The pattern-printing program is not printing properly in Java","body":"<p>I am working on a star-printing problem in Java using VS Code, but I don't get the right output. The stars are printing in a raw manner, not a pyramidal shape.</p>\n<pre><code>public class halfpyramid {\n    public static void main(String args[]){\n        int row=5;\n\n        for(int i = 1; i &lt;= row; ++i){\n            for(int j = 1; j &lt;= i; ++j){\n                System.out.println(&quot;*&quot;);\n            }\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","exception","mockito"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1637072141,"creation_date":1637072141,"answer_id":69990737,"question_id":69990671,"body_markdown":"The problem is that your code attempts to modify a map, but your test code is setup with `Map.of(...)`, which returns an immutable map. Use `new HashMap&lt;&gt;(Map.of(....))` instead.","title":"java.lang.UnsupportedOperationException when testing","body":"<p>The problem is that your code attempts to modify a map, but your test code is setup with <code>Map.of(...)</code>, which returns an immutable map. Use <code>new HashMap&lt;&gt;(Map.of(....))</code> instead.</p>\n"}],"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7623,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":69990737,"answer_count":1,"score":5,"last_activity_date":1702049382,"creation_date":1637071898,"question_id":69990671,"body_markdown":"Try to write test, operating with mocks. When assertion happens there is an exception.\r\n\r\n**CardRecordServiceTest.java**\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class CartRecordServiceTest {\r\n    private MockMvc mockMvc;\r\n\r\n    private ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    @Mock\r\n    private CartRecord cartRecords;\r\n    @Mock\r\n    private GoodsService goodsService;\r\n    @Mock\r\n    private GoodsRepository goodsRepository;\r\n\r\n    CartRecordService cartRecordService;\r\n\r\n\r\n    @BeforeEach\r\n    public void setUp(){\r\n        cartRecordService = new CartRecordService(cartRecords, goodsRepository, goodsService);\r\n        mockMvc = MockMvcBuilders\r\n                .standaloneSetup(cartRecordService)\r\n                .build();\r\n    }\r\n    @Test\r\n    public void enougthGoodsToAddRecordNew(){\r\n        CartAdditionDTO cartAdditionDTO = new CartAdditionDTO(1L, 15L);\r\n\r\n        Mockito.when(goodsService.enoughQuantity(cartAdditionDTO)).thenReturn(true);\r\n        Mockito.when(cartRecords.getRecords()).thenReturn(Map.of(2L,2L));\r\n\r\n        Assertions.assertTrue(cartRecordService.addRecord(cartAdditionDTO));\r\n\r\n        verify(cartRecords,times(2)).getRecords();\r\n        verify(goodsService).enoughQuantity(any(CartAdditionDTO.class));\r\n    }\r\n```\r\n**CartRecordService.java**\r\n```\r\n    public boolean addRecord(CartAdditionDTO cartAdditionDTO) {\r\n        if(!goodsService.enoughQuantity(cartAdditionDTO)){\r\n            return false;\r\n        }\r\n        if (cartRecords.getRecords().containsKey(cartAdditionDTO.getId())) {\r\n            Long newQuantity = cartRecords.getRecords().get(cartAdditionDTO.getId()) + cartAdditionDTO.getQuantity();\r\n            if(goodsService.enoughQuantity(new CartAdditionDTO(cartAdditionDTO.getId(), newQuantity))){\r\n                cartRecords.getRecords().put(cartAdditionDTO.getId(), newQuantity);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n// here is an error at put\r\n        cartRecords.getRecords().put(cartAdditionDTO.getId(), cartAdditionDTO.getQuantity());\r\n        return true;\r\n    }\r\n```\r\n\r\n**Log**\r\n\r\njava.lang.UnsupportedOperationException\r\n\tat java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)\r\n\tat java.base/java.util.ImmutableCollections$AbstractImmutableMap.put(ImmutableCollections.java:1072)\r\n\tat com.example.store.service.CartRecordService.addRecord(CartRecordService.java:77)\r\n\tat com.example.store.ServiceUnitTests.CartRecordServiceTest.enougthGoodsToAddRecordNew(CartRecordServiceTest.java:69)\r\n\r\n\r\n","title":"java.lang.UnsupportedOperationException when testing","body":"<p>Try to write test, operating with mocks. When assertion happens there is an exception.</p>\n<p><strong>CardRecordServiceTest.java</strong></p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class CartRecordServiceTest {\n    private MockMvc mockMvc;\n\n    private ObjectMapper objectMapper = new ObjectMapper();\n\n    @Mock\n    private CartRecord cartRecords;\n    @Mock\n    private GoodsService goodsService;\n    @Mock\n    private GoodsRepository goodsRepository;\n\n    CartRecordService cartRecordService;\n\n\n    @BeforeEach\n    public void setUp(){\n        cartRecordService = new CartRecordService(cartRecords, goodsRepository, goodsService);\n        mockMvc = MockMvcBuilders\n                .standaloneSetup(cartRecordService)\n                .build();\n    }\n    @Test\n    public void enougthGoodsToAddRecordNew(){\n        CartAdditionDTO cartAdditionDTO = new CartAdditionDTO(1L, 15L);\n\n        Mockito.when(goodsService.enoughQuantity(cartAdditionDTO)).thenReturn(true);\n        Mockito.when(cartRecords.getRecords()).thenReturn(Map.of(2L,2L));\n\n        Assertions.assertTrue(cartRecordService.addRecord(cartAdditionDTO));\n\n        verify(cartRecords,times(2)).getRecords();\n        verify(goodsService).enoughQuantity(any(CartAdditionDTO.class));\n    }\n</code></pre>\n<p><strong>CartRecordService.java</strong></p>\n<pre><code>    public boolean addRecord(CartAdditionDTO cartAdditionDTO) {\n        if(!goodsService.enoughQuantity(cartAdditionDTO)){\n            return false;\n        }\n        if (cartRecords.getRecords().containsKey(cartAdditionDTO.getId())) {\n            Long newQuantity = cartRecords.getRecords().get(cartAdditionDTO.getId()) + cartAdditionDTO.getQuantity();\n            if(goodsService.enoughQuantity(new CartAdditionDTO(cartAdditionDTO.getId(), newQuantity))){\n                cartRecords.getRecords().put(cartAdditionDTO.getId(), newQuantity);\n                return true;\n            }\n            return false;\n        }\n// here is an error at put\n        cartRecords.getRecords().put(cartAdditionDTO.getId(), cartAdditionDTO.getQuantity());\n        return true;\n    }\n</code></pre>\n<p><strong>Log</strong></p>\n<p>java.lang.UnsupportedOperationException\nat java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)\nat java.base/java.util.ImmutableCollections$AbstractImmutableMap.put(ImmutableCollections.java:1072)\nat com.example.store.service.CartRecordService.addRecord(CartRecordService.java:77)\nat com.example.store.ServiceUnitTests.CartRecordServiceTest.enougthGoodsToAddRecordNew(CartRecordServiceTest.java:69)</p>\n"},{"tags":["java","database","oracle","jdbc","virtual-column"],"comments":[{"owner":{"account_id":3717492,"reputation":17702,"user_id":3093319,"accept_rate":95,"display_name":"Maheswaran Ravisankar"},"score":0,"creation_date":1412232964,"post_id":26155609,"comment_id":41002597,"body_markdown":"That might be DBMS dependent, so looking into the metadata information of the table should help. In case of Oracle, [ALL_TAB_COLS](http://stackoverflow.com/questions/8074963/how-to-check-column-is-virtual-in-oracle)","body":"That might be DBMS dependent, so looking into the metadata information of the table should help. In case of Oracle, <a href=\"http://stackoverflow.com/questions/8074963/how-to-check-column-is-virtual-in-oracle\">ALL_TAB_COLS</a>"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1412233702,"post_id":26155609,"comment_id":41002868,"body_markdown":"Find out which actual class the metadata is - you may find it has special methods (beyond those defined for ResultSetMetaData) that can help","body":"Find out which actual class the metadata is - you may find it has special methods (beyond those defined for ResultSetMetaData) that can help"},{"owner":{"account_id":5112430,"reputation":51,"user_id":4098648,"display_name":"Habib Gahntous"},"score":0,"creation_date":1412234903,"post_id":26155609,"comment_id":41003333,"body_markdown":"is there any java piece of code that might help?\ni checked every method that ResultSetMetaData has and found nothing.","body":"is there any java piece of code that might help? i checked every method that ResultSetMetaData has and found nothing."},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1702048695,"post_id":26155609,"comment_id":136853360,"body_markdown":"@HabibGahntous A working piece of Java code is in my answer https://stackoverflow.com/a/77627553/2886891","body":"@HabibGahntous A working piece of Java code is in my answer <a href=\"https://stackoverflow.com/a/77627553/2886891\">stackoverflow.com/a/77627553/2886891</a>"}],"answers":[{"comments":[{"owner":{"account_id":3531209,"reputation":1138,"user_id":2950711,"accept_rate":71,"display_name":"AMDG"},"score":0,"creation_date":1419259698,"post_id":27604763,"comment_id":43631982,"body_markdown":"return Java != SQL; though this would still be helpful I&#39;m sure","body":"return Java != SQL; though this would still be helpful I&#39;m sure"}],"tags":[],"owner":{"account_id":5466321,"reputation":336,"user_id":4347056,"display_name":"o0x258"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419259212,"creation_date":1419258909,"answer_id":27604763,"question_id":26155609,"body_markdown":"Like Maheswaran Ravisankar already said, the only way to get this information is to run a query against the database. Maybe there is a Java function which does exactly this operation but I doubt that.\r\nThe following query should do it for you:\r\n\r\n    select VIRTUAL_COLUMN from ALL_TAB_COLS where OWNER = :1 and TABLE_NAME = :2 and COLUMN_NAME = :3;\r\n\r\nThe result of the query will be `YES or NO` (YES = column is virtual).\r\n\r\n**Remember:** Oracle metadata are usually stored in upper case.","title":"is there any way to check if a column is virtual in java?","body":"<p>Like Maheswaran Ravisankar already said, the only way to get this information is to run a query against the database. Maybe there is a Java function which does exactly this operation but I doubt that.\nThe following query should do it for you:</p>\n\n<pre><code>select VIRTUAL_COLUMN from ALL_TAB_COLS where OWNER = :1 and TABLE_NAME = :2 and COLUMN_NAME = :3;\n</code></pre>\n\n<p>The result of the query will be <code>YES or NO</code> (YES = column is virtual).</p>\n\n<p><strong>Remember:</strong> Oracle metadata are usually stored in upper case.</p>\n"},{"tags":[],"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702049244,"creation_date":1702048662,"answer_id":77627553,"question_id":26155609,"body_markdown":"It seems absolutely stupid, but after searching internet I really believe that there is no simple Java function for it.\r\n\r\nBased on my experience, the functions with otherwise promising names and promising [Javadoc][1] return nonsensical values:\r\n\r\n|funtion|returns always|\r\n|---|---|\r\n|`isReadOnly(column)`|`true`|\r\n|`isWritable(column)`|`true`|\r\n|`isDefinitelyWritable(column)`|`false`|\r\n\r\n\r\nBased on the [standard documention of `DatabaseMetadata`][3] I came with the following Java code. I tested the code on Postgres but as I am using only documented general Java functionality, I believe it will work for Oracle, too.\r\n\r\n``` lang-java\r\nprivate static final int COLUMN_NAME = 4;\r\nprivate static final int IS_GENERATEDCOLUMN = 24;\r\n\r\npublic Set&lt;String&gt; getCalculatedColumns(Connection connection, String schema, String table) throws SQLException {\r\n    final ResultSet tableMetaData = connection.getMetaData().getColumns(null, schema, table, null);\r\n    final Set&lt;String&gt; calculatedColumns = new HashSet&lt;&gt;();\r\n    while (tableMetaData.next()) {\r\n        if (&quot;YES&quot;.equals(tableMetaData.getObject(IS_GENERATEDCOLUMN, String.class))) {\r\n            calculatedColumns.add(tableMetaData.getObject(COLUMN_NAME, String.class));\r\n        }\r\n    }\r\n    return calculatedColumns;\r\n}\r\n```\r\n\r\nFor explanation of the magic numbers 4 and 24 in the code, look at the above mentioned documentation.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/ResultSetMetaData.html\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/ResultSetMetaData.html#isDefinitelyWritable(int)\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/DatabaseMetaData.html#getColumns(java.lang.String,java.lang.String,java.lang.String,java.lang.String)","title":"is there any way to check if a column is virtual in java?","body":"<p>It seems absolutely stupid, but after searching internet I really believe that there is no simple Java function for it.</p>\n<p>Based on my experience, the functions with otherwise promising names and promising <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/ResultSetMetaData.html\" rel=\"nofollow noreferrer\">Javadoc</a> return nonsensical values:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>funtion</th>\n<th>returns always</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>isReadOnly(column)</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>isWritable(column)</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>isDefinitelyWritable(column)</code></td>\n<td><code>false</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Based on the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/DatabaseMetaData.html#getColumns(java.lang.String,java.lang.String,java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">standard documention of <code>DatabaseMetadata</code></a> I came with the following Java code. I tested the code on Postgres but as I am using only documented general Java functionality, I believe it will work for Oracle, too.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final int COLUMN_NAME = 4;\nprivate static final int IS_GENERATEDCOLUMN = 24;\n\npublic Set&lt;String&gt; getCalculatedColumns(Connection connection, String schema, String table) throws SQLException {\n    final ResultSet tableMetaData = connection.getMetaData().getColumns(null, schema, table, null);\n    final Set&lt;String&gt; calculatedColumns = new HashSet&lt;&gt;();\n    while (tableMetaData.next()) {\n        if (&quot;YES&quot;.equals(tableMetaData.getObject(IS_GENERATEDCOLUMN, String.class))) {\n            calculatedColumns.add(tableMetaData.getObject(COLUMN_NAME, String.class));\n        }\n    }\n    return calculatedColumns;\n}\n</code></pre>\n<p>For explanation of the magic numbers 4 and 24 in the code, look at the above mentioned documentation.</p>\n"}],"owner":{"account_id":5112430,"reputation":51,"user_id":4098648,"display_name":"Habib Gahntous"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1702049244,"creation_date":1412232233,"question_id":26155609,"body_markdown":"I want to know if there is any way to check if a column in a table is virtual in java?\r\nI was trying the ResultSetMetaData no luck there:\r\n\r\n    rsmd.isWritable(column);\r\n    rsmd.isReadOnly(column);\r\n    rsmd.isDefinitelyWritable(column);\r\n\r\nI need to check if it is a virtual column in order to know if i should insert/modify it or not, any ideas?\r\n","title":"is there any way to check if a column is virtual in java?","body":"<p>I want to know if there is any way to check if a column in a table is virtual in java?\nI was trying the ResultSetMetaData no luck there:</p>\n\n<pre><code>rsmd.isWritable(column);\nrsmd.isReadOnly(column);\nrsmd.isDefinitelyWritable(column);\n</code></pre>\n\n<p>I need to check if it is a virtual column in order to know if i should insert/modify it or not, any ideas?</p>\n"},{"tags":["java","jboss","intellij-idea","wildfly"],"answers":[{"tags":[],"owner":{"account_id":4278094,"reputation":51,"user_id":3498257,"display_name":"user3498257"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1396617541,"creation_date":1396617541,"answer_id":22863985,"question_id":22729774,"body_markdown":"look for this in your standalone.xml\r\n\r\nsocket-binding name=&quot;management-native&quot; interface=&quot;management&quot; port=&quot;9999&quot;\r\n\r\n\r\nSource:\r\nhttp://youtrack.jetbrains.com/issue/IDEA-77592\r\n","title":"Jboss port configuration on Intellij Idea error","body":"<p>look for this in your standalone.xml</p>\n\n<p>socket-binding name=\"management-native\" interface=\"management\" port=\"9999\"</p>\n\n<p>Source:\n<a href=\"http://youtrack.jetbrains.com/issue/IDEA-77592\" rel=\"nofollow\">http://youtrack.jetbrains.com/issue/IDEA-77592</a></p>\n"},{"comments":[{"owner":{"account_id":3735980,"reputation":70143,"user_id":3106920,"display_name":"Poul Kruijt"},"score":0,"creation_date":1485504376,"post_id":25380070,"comment_id":70960776,"body_markdown":"That will teach me for editing the standalone.xml with just notepad :)","body":"That will teach me for editing the standalone.xml with just notepad :)"},{"owner":{"account_id":3136282,"reputation":608,"user_id":2652734,"display_name":"Pafnucy"},"score":0,"creation_date":1487148673,"post_id":25380070,"comment_id":71647416,"body_markdown":"My case is that coworker (win7) sent me (Ubuntu) standalone.xml and encoding got messed up.","body":"My case is that coworker (win7) sent me (Ubuntu) standalone.xml and encoding got messed up."},{"owner":{"account_id":2251730,"reputation":883,"user_id":1983825,"display_name":"jasonoriordan"},"score":2,"creation_date":1499436637,"post_id":25380070,"comment_id":76920733,"body_markdown":"Starting the standalone.bat (/bin/standalone.bat) can give a clue to where the invalid character is, in my case spelling out the offending character and line number","body":"Starting the standalone.bat (/bin/standalone.bat) can give a clue to where the invalid character is, in my case spelling out the offending character and line number"}],"tags":[],"owner":{"account_id":469456,"reputation":3102,"user_id":876038,"accept_rate":50,"display_name":"Alexander"},"comment_count":3,"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1408440858,"creation_date":1408440858,"answer_id":25380070,"question_id":22729774,"body_markdown":"Possible cause maybe an invalid configuration file &quot;standalone.xml&quot; or any other config file that you are using.\r\nI&#39;ve put a tag at the wrong place and got the same error.","title":"Jboss port configuration on Intellij Idea error","body":"<p>Possible cause maybe an invalid configuration file \"standalone.xml\" or any other config file that you are using.\nI've put a tag at the wrong place and got the same error.</p>\n"},{"tags":[],"owner":{"account_id":3110366,"reputation":393,"user_id":2632241,"accept_rate":62,"display_name":"Watercolours"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409644446,"creation_date":1409644446,"answer_id":25618473,"question_id":22729774,"body_markdown":"I had the same problem, but have no idea what your setup looks like so the solution might not be the same. Also since your question is quite old you&#39;ve probably figured out the answer by now.\r\n\r\nAnyways.. In case anyone else happens to stumble upon this issue, I solved it this way: \r\nWe use Puppet in our project and I had changed a couple of `.yaml` files where I added some URLs. The URLs contained `&amp;` which had to be `&amp;amp;` and IntelliJ didn&#39;t notify me that this was the issue. It broke JBoss and everything.\r\n\r\nTry running JBoss `standalone.sh` in the terminal and see if you get a Stacktrace.","title":"Jboss port configuration on Intellij Idea error","body":"<p>I had the same problem, but have no idea what your setup looks like so the solution might not be the same. Also since your question is quite old you've probably figured out the answer by now.</p>\n\n<p>Anyways.. In case anyone else happens to stumble upon this issue, I solved it this way: \nWe use Puppet in our project and I had changed a couple of <code>.yaml</code> files where I added some URLs. The URLs contained <code>&amp;</code> which had to be <code>&amp;amp;</code> and IntelliJ didn't notify me that this was the issue. It broke JBoss and everything.</p>\n\n<p>Try running JBoss <code>standalone.sh</code> in the terminal and see if you get a Stacktrace.</p>\n"},{"comments":[{"owner":{"account_id":31094,"reputation":1370,"user_id":85155,"accept_rate":75,"display_name":"user85155"},"score":0,"creation_date":1453049349,"post_id":28401439,"comment_id":57422403,"body_markdown":"I mixed up xml with vim","body":"I mixed up xml with vim"}],"tags":[],"owner":{"account_id":91283,"reputation":121,"user_id":250737,"accept_rate":71,"display_name":"Jaizen"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1423444709,"creation_date":1423444709,"answer_id":28401439,"question_id":22729774,"body_markdown":"Your standalone xml may be malformed in some way. Check to see if you have special characters that you will have to escape or extra closing or opening tags etc.","title":"Jboss port configuration on Intellij Idea error","body":"<p>Your standalone xml may be malformed in some way. Check to see if you have special characters that you will have to escape or extra closing or opening tags etc.</p>\n"},{"tags":[],"owner":{"account_id":8483072,"reputation":31,"user_id":6362203,"display_name":"MMM"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1463764490,"creation_date":1463764490,"answer_id":37352303,"question_id":22729774,"body_markdown":"My case was that there was no config.\r\n\r\nFolder c:\\jboss-eap-6.4.6\\standalone\\configuration\\ was without configuration files. There was only one folder org.6.4.0, where was the configuration.\r\n\r\nThe solution was to copy configuration files from c:\\jboss-eap-6.4.6\\standalone\\configuration\\org.6.4.0\\ to c:\\jboss-eap-6.4.6\\standalone\\configuration\\","title":"Jboss port configuration on Intellij Idea error","body":"<p>My case was that there was no config.</p>\n\n<p>Folder c:\\jboss-eap-6.4.6\\standalone\\configuration\\ was without configuration files. There was only one folder org.6.4.0, where was the configuration.</p>\n\n<p>The solution was to copy configuration files from c:\\jboss-eap-6.4.6\\standalone\\configuration\\org.6.4.0\\ to c:\\jboss-eap-6.4.6\\standalone\\configuration\\</p>\n"},{"tags":[],"owner":{"account_id":5702461,"reputation":1191,"user_id":4507034,"accept_rate":100,"display_name":"Radu Linu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497006683,"creation_date":1497006683,"answer_id":44456317,"question_id":22729774,"body_markdown":"In my case was added in standalone.xml in `&lt;deployments&gt;` section the following:\r\n\r\n    &lt;deployment name=&quot;xxx-ear-1.0.ear&quot; runtime-name=&quot;xxx-ear-1.0.ear&quot;&gt;\r\n     &lt;fs-archive path=&quot;path\\xxx-ear-1.0.ear&quot;/&gt;\r\n    &lt;/deployment&gt;\r\n\r\nI&#39;ve removed this and worked.","title":"Jboss port configuration on Intellij Idea error","body":"<p>In my case was added in standalone.xml in <code>&lt;deployments&gt;</code> section the following:</p>\n\n<pre><code>&lt;deployment name=\"xxx-ear-1.0.ear\" runtime-name=\"xxx-ear-1.0.ear\"&gt;\n &lt;fs-archive path=\"path\\xxx-ear-1.0.ear\"/&gt;\n&lt;/deployment&gt;\n</code></pre>\n\n<p>I've removed this and worked.</p>\n"},{"tags":[],"owner":{"account_id":3423003,"reputation":2107,"user_id":2869866,"accept_rate":100,"display_name":"martoncsukas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516721853,"creation_date":1516721853,"answer_id":48405517,"question_id":22729774,"body_markdown":"This is likely to be happening due to a parsing error in your configuration files.\r\n\r\nStart your JBoss/WildFly in the command line, so that you would see more details if this is happening because of a configuration (or parsing) error. \r\n\r\n- On Windows run `{JBOSS_HOME}/bin/standalone.bat` file so that it would open up a console window and try to start up your application server. \r\n- Look for any ERROR in the log and see if it is related to configuration. \r\n- For example:\r\n\r\n    ERROR [org.jboss.as.server] WFLYSRV0055: Caught exception during boot: \r\n    org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration\r\n\r\n\r\nIf this doesn&#39;t help, have a look at open the ports - maybe the port JBoss/WildFly is configured to is already used by some other application.","title":"Jboss port configuration on Intellij Idea error","body":"<p>This is likely to be happening due to a parsing error in your configuration files.</p>\n\n<p>Start your JBoss/WildFly in the command line, so that you would see more details if this is happening because of a configuration (or parsing) error. </p>\n\n<ul>\n<li>On Windows run <code>{JBOSS_HOME}/bin/standalone.bat</code> file so that it would open up a console window and try to start up your application server. </li>\n<li>Look for any ERROR in the log and see if it is related to configuration. </li>\n<li><p>For example:</p>\n\n<p>ERROR [org.jboss.as.server] WFLYSRV0055: Caught exception during boot: \norg.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration</p></li>\n</ul>\n\n<p>If this doesn't help, have a look at open the ports - maybe the port JBoss/WildFly is configured to is already used by some other application.</p>\n"},{"tags":[],"owner":{"account_id":3195625,"reputation":333,"user_id":2698859,"display_name":"Irfan Bhindawala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547029127,"creation_date":1547029127,"answer_id":54107806,"question_id":22729774,"body_markdown":"Please make sute you had provided valid configuration file, may be your configuration file contains misplaced tag/element entries.\r\n","title":"Jboss port configuration on Intellij Idea error","body":"<p>Please make sute you had provided valid configuration file, may be your configuration file contains misplaced tag/element entries.</p>\n"},{"tags":[],"owner":{"account_id":2066387,"reputation":1448,"user_id":1841823,"accept_rate":45,"display_name":"JiboOne"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1551254076,"creation_date":1551254076,"answer_id":54900566,"question_id":22729774,"body_markdown":"It seems that IntelliJ IDEA was not able to read offset value from &quot;standalone.xml&quot;.\r\nto solve it, just set Port offset to 0 in Configuration window, it will manually add additional VM option:  -Djboss.socket.binding.port-offset=0\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ahz2O.png","title":"Jboss port configuration on Intellij Idea error","body":"<p>It seems that IntelliJ IDEA was not able to read offset value from \"standalone.xml\".\nto solve it, just set Port offset to 0 in Configuration window, it will manually add additional VM option:  -Djboss.socket.binding.port-offset=0</p>\n\n<p><a href=\"https://i.stack.imgur.com/ahz2O.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ahz2O.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":8446123,"reputation":21,"user_id":6336715,"display_name":"Matija"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568367625,"creation_date":1568349840,"answer_id":57917393,"question_id":22729774,"body_markdown":"In my case, `standalone.xml` was corrupted (probably cause Idea froze and had to do hard shutdown). So I went to `standalone_xml_history` and copied `standalone.xml` from the day before. And it started to work normally again. ","title":"Jboss port configuration on Intellij Idea error","body":"<p>In my case, <code>standalone.xml</code> was corrupted (probably cause Idea froze and had to do hard shutdown). So I went to <code>standalone_xml_history</code> and copied <code>standalone.xml</code> from the day before. And it started to work normally again. </p>\n"},{"tags":[],"owner":{"account_id":16098962,"reputation":136,"user_id":12143476,"display_name":"Ali Tofigh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570286833,"creation_date":1570286833,"answer_id":58249392,"question_id":22729774,"body_markdown":"In my case:\r\nI typed 9990 in port offset of Run/Debug Configurations and it solved. :)","title":"Jboss port configuration on Intellij Idea error","body":"<p>In my case:\nI typed 9990 in port offset of Run/Debug Configurations and it solved. :)</p>\n"},{"tags":[],"owner":{"account_id":17023869,"reputation":1,"user_id":12315668,"display_name":"Volkan HEIG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572781795,"creation_date":1572781795,"answer_id":58679861,"question_id":22729774,"body_markdown":"I had the same problem and when I went to the standalone directory, I saw that the standalone.xml file was renamed as standalone.xml.tmp. \r\n\r\nSo I just renamed it as standalone.xml and when I started my Intellij again, everything was ok. If it&#39;s already not after that, you can delete and build a new running configuration after starting Intellij","title":"Jboss port configuration on Intellij Idea error","body":"<p>I had the same problem and when I went to the standalone directory, I saw that the standalone.xml file was renamed as standalone.xml.tmp. </p>\n\n<p>So I just renamed it as standalone.xml and when I started my Intellij again, everything was ok. If it's already not after that, you can delete and build a new running configuration after starting Intellij</p>\n"},{"tags":[],"owner":{"account_id":7978180,"reputation":2736,"user_id":6020610,"accept_rate":60,"display_name":"Amarjit Dhillon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574787317,"creation_date":1574787317,"answer_id":59055839,"question_id":22729774,"body_markdown":"As shown below, adding the VM options to point to standalone config files fixed my issue\r\n\r\n    /Users/XXX/dev/apps/wildfly/wildfly-16.0.0.Final.XXX.2019.152-node1/standalone/configuration/","title":"Jboss port configuration on Intellij Idea error","body":"<p>As shown below, adding the VM options to point to standalone config files fixed my issue</p>\n\n<pre><code>/Users/XXX/dev/apps/wildfly/wildfly-16.0.0.Final.XXX.2019.152-node1/standalone/configuration/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9443634,"reputation":3530,"user_id":7023213,"display_name":"user7023213"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583511238,"creation_date":1583511238,"answer_id":60567853,"question_id":22729774,"body_markdown":"I had the same error &quot;Management Port Configuration not found&quot; when i was trying to boot up my jboss.\r\n\r\nIn my case i had accidentally deleted my standalone.xml. When i put it back all went fine. Another person had same issue turned out was some malformed tag in the standalone.xml.","title":"Jboss port configuration on Intellij Idea error","body":"<p>I had the same error \"Management Port Configuration not found\" when i was trying to boot up my jboss.</p>\n\n<p>In my case i had accidentally deleted my standalone.xml. When i put it back all went fine. Another person had same issue turned out was some malformed tag in the standalone.xml.</p>\n"},{"tags":[],"owner":{"account_id":6849189,"reputation":61,"user_id":5266854,"display_name":"anjanagnet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645352718,"creation_date":1645352718,"answer_id":71193457,"question_id":22729774,"body_markdown":"My standalone.xml file has been renamed to standalone.xml.tmp automatically. Rename it back to standalone.xml and it will fix the issue. ","title":"Jboss port configuration on Intellij Idea error","body":"<p>My standalone.xml file has been renamed to standalone.xml.tmp automatically. Rename it back to standalone.xml and it will fix the issue.</p>\n"},{"tags":[],"owner":{"account_id":90329,"reputation":6956,"user_id":248733,"accept_rate":58,"display_name":"Ballon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702048735,"creation_date":1702048735,"answer_id":77627562,"question_id":22729774,"body_markdown":"IntelliJ can&#39;t overwrite standalone.xml. \r\nThat means that you have opened standalone.xml with other editor. \r\nClose standalone.xml and try again.","title":"Jboss port configuration on Intellij Idea error","body":"<p>IntelliJ can't overwrite standalone.xml.\nThat means that you have opened standalone.xml with other editor.\nClose standalone.xml and try again.</p>\n"}],"owner":{"account_id":2703232,"reputation":2839,"user_id":2333459,"accept_rate":72,"display_name":"Super Hornet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40747,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":25380070,"answer_count":16,"score":36,"last_activity_date":1702048735,"creation_date":1396088509,"question_id":22729774,"body_markdown":"I&#39;m trying to run my application on Jboss App Server by Intellij Idea12. I&#39;ve done configuration:\r\n![enter image description here][1]\r\n\r\nbut As you can see in the picture I got the error `Management Port Configuration not found`.\r\n\r\n  [1]: https://i.stack.imgur.com/McIBe.jpg","title":"Jboss port configuration on Intellij Idea error","body":"<p>I'm trying to run my application on Jboss App Server by Intellij Idea12. I've done configuration:\n<img src=\"https://i.stack.imgur.com/McIBe.jpg\" alt=\"enter image description here\"></p>\n\n<p>but As you can see in the picture I got the error <code>Management Port Configuration not found</code>.</p>\n"},{"tags":["java","spring","maven","junit","cucumber"],"answers":[{"comments":[{"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"score":0,"creation_date":1702206792,"post_id":77627513,"comment_id":136866109,"body_markdown":"I tried run it like this: `mvn -s ${mvnSettingsPath} clean test -Dsurefire.includeJUnit5Engines=cucumber -Dmaven.test.failure.ignore=true -Dcucumber.features=${classpath_features} -Dcucumber.filter.tags=\\&quot;not @skip\\&quot;`.\nAnd it didn&#39;t work to me.","body":"I tried run it like this: <code>mvn -s ${mvnSettingsPath} clean test -Dsurefire.includeJUnit5Engines=cucumber -Dmaven.test.failure.ignore=true -Dcucumber.features=${classpath_features} -Dcucumber.filter.tags=\\&quot;not @skip\\&quot;</code>. And it didn&#39;t work to me."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1702225286,"post_id":77627513,"comment_id":136867752,"body_markdown":"That sounds like a different problemm. But it is hard to tell because you have added a bunch of things. Try and make your problems small. https://stackoverflow.com/help/minimal-reproducible-example","body":"That sounds like a different problemm. But it is hard to tell because you have added a bunch of things. Try and make your problems small. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"score":0,"creation_date":1702281966,"post_id":77627513,"comment_id":136872601,"body_markdown":"I add to my old maven script command: &#39;-Dsurefire.includeJUnit5Engines=cucumber&#39;.\nThere is no difference. I want to clarify:\n&quot;So now we gave two executions of Cucumber&quot;.\nfirst: make Surefire ignore the suite engine\nsecond: adding `-Dsurefire.includeJUnit5Engines=cucumber`.\nDid I understand correctly, that `-Dsurefire.includeJUnit5Engines=cucumber` it&#39;s a half of solution my problem? Or it&#39;s solution for make &quot;Surefire ignore the suite engine&quot; too?","body":"I add to my old maven script command: &#39;-Dsurefire.includeJUnit5Engines=cucumber&#39;. There is no difference. I want to clarify: &quot;So now we gave two executions of Cucumber&quot;. first: make Surefire ignore the suite engine second: adding <code>-Dsurefire.includeJUnit5Engines=cucumber</code>. Did I understand correctly, that <code>-Dsurefire.includeJUnit5Engines=cucumber</code> it&#39;s a half of solution my problem? Or it&#39;s solution for make &quot;Surefire ignore the suite engine&quot; too?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1702283101,"post_id":77627513,"comment_id":136872797,"body_markdown":"No. The semantics are such that only the included engines are executed. All others are excluded. Surefire is just passing these commands onto JUnit so see https://junit.org/junit5/docs/current/api/org.junit.platform.launcher/org/junit/platform/launcher/EngineFilter.html#includeEngines(java.lang.String...)","body":"No. The semantics are such that only the included engines are executed. All others are excluded. Surefire is just passing these commands onto JUnit so see <a href=\"https://junit.org/junit5/docs/current/api/org.junit.platform.launcher/org/junit/platform/launcher/EngineFilter.html#includeEngines(java.lang.String...)\" rel=\"nofollow noreferrer\">junit.org/junit5/docs/current/api/org.junit.platform.launche&zwnj;&#8203;r/&hellip;</a>"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1702283157,"post_id":77627513,"comment_id":136872809,"body_markdown":"You do need to have a version of Surefire that supports `surefire.includeJUnit5Engines` but that goes without saying ofc.","body":"You do need to have a version of Surefire that supports <code>surefire.includeJUnit5Engines</code> but that goes without saying ofc."},{"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"score":0,"creation_date":1702286743,"post_id":77627513,"comment_id":136873312,"body_markdown":"I understood correctly that all I need to do to solve the problem is add the command: `-Dsurefire.includeJUnit5Engines=cucumber`.\nAnd need to have a version of Surefire that supports this?","body":"I understood correctly that all I need to do to solve the problem is add the command: <code>-Dsurefire.includeJUnit5Engines=cucumber</code>. And need to have a version of Surefire that supports this?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1702293025,"post_id":77627513,"comment_id":136874311,"body_markdown":"Well. Without going through the motions of actually making an MCVE, that would be impossible to say. But it is the most likely answer. For anything else, you&#39;ll have to debug it yourself.","body":"Well. Without going through the motions of actually making an MCVE, that would be impossible to say. But it is the most likely answer. For anything else, you&#39;ll have to debug it yourself."},{"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"score":0,"creation_date":1702306698,"post_id":77627513,"comment_id":136876887,"body_markdown":"Understand. I tried add &#39;-Dsurefire.includeJUnit5Engines=cucumber&#39;, it&#39;s don&#39;t work. Now I&#39;m looking for version Surefire that supports &#39;surefire.includeJUnit5Engines&#39;.\nMay be reason in version surefire plugin (my 2.22.2). Surefire plugin configuration in .POM could be the reason in problem?","body":"Understand. I tried add &#39;-Dsurefire.includeJUnit5Engines=cucumber&#39;, it&#39;s don&#39;t work. Now I&#39;m looking for version Surefire that supports &#39;surefire.includeJUnit5Engines&#39;. May be reason in version surefire plugin (my 2.22.2). Surefire plugin configuration in .POM could be the reason in problem?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1702311806,"post_id":77627513,"comment_id":136877894,"body_markdown":"Yeah. The property is since 3.0.0-M6. https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#includeJUnit5Engines","body":"Yeah. The property is since 3.0.0-M6. <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#includeJUnit5Engines\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/&hellip;</a>"},{"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"score":0,"creation_date":1702311943,"post_id":77627513,"comment_id":136877929,"body_markdown":"Oh, I read &quot;MOVE&quot;, but you wright &quot;MCVE&quot;, what is it &quot;MCVE&quot;? Sorry, my english veeeeery bad.","body":"Oh, I read &quot;MOVE&quot;, but you wright &quot;MCVE&quot;, what is it &quot;MCVE&quot;? Sorry, my english veeeeery bad."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1702312247,"post_id":77627513,"comment_id":136877983,"body_markdown":"It is explained in the url in my first comment in the discussion.","body":"It is explained in the url in my first comment in the discussion."},{"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"score":0,"creation_date":1702316455,"post_id":77627513,"comment_id":136878678,"body_markdown":"I&#39;m understand. 3.0.0-M6 didn&#39;t help me too. Ok, I will continue to search inside the project. Thank you for your hard work. If I find answer, I wright it there.","body":"I&#39;m understand. 3.0.0-M6 didn&#39;t help me too. Ok, I will continue to search inside the project. Thank you for your hard work. If I find answer, I wright it there."}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":12,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702048653,"creation_date":1702048326,"answer_id":77627513,"question_id":77625239,"body_markdown":"You are using `-Dcucumber.features=....`. As the warning printed in the output explains, this will cause Cucumber to ignore any test selectors from JUnit.\r\n\r\nYou are also using Surefire, it will ask the `cucumber` engine to look for tests in classes. Cucumber not using classes would normally not find any. But `cucumber.features` was used so now it does.\r\n\r\nThen you are also using the `@Suite` annotation to run tests using the `junit-platform-suite` engine. Surefire will also ask this engine to find tests in classes and it will find the  `@Suite` annotated classes. This then delegates to Cucumber which will promptly ignore any of its requests because `cucumber.features` was used.\r\n\r\nSo now we gave two executions of Cucumber.\r\n\r\nThe solution is to make Surefire ignore the suite engine and only run Cucumber by adding `-Dsurefire.includeJUnit5Engines=cucumber`.\r\n\r\nSo: \r\n\r\n```\r\nmvn test -Dsurefire.includeJUnit5Engines=cucumber --Dcucumber.features=path/to/example.feature:10 \r\n```","title":"Cucumber test in Jenkins running twice","body":"<p>You are using <code>-Dcucumber.features=....</code>. As the warning printed in the output explains, this will cause Cucumber to ignore any test selectors from JUnit.</p>\n<p>You are also using Surefire, it will ask the <code>cucumber</code> engine to look for tests in classes. Cucumber not using classes would normally not find any. But <code>cucumber.features</code> was used so now it does.</p>\n<p>Then you are also using the <code>@Suite</code> annotation to run tests using the <code>junit-platform-suite</code> engine. Surefire will also ask this engine to find tests in classes and it will find the  <code>@Suite</code> annotated classes. This then delegates to Cucumber which will promptly ignore any of its requests because <code>cucumber.features</code> was used.</p>\n<p>So now we gave two executions of Cucumber.</p>\n<p>The solution is to make Surefire ignore the suite engine and only run Cucumber by adding <code>-Dsurefire.includeJUnit5Engines=cucumber</code>.</p>\n<p>So:</p>\n<pre><code>mvn test -Dsurefire.includeJUnit5Engines=cucumber --Dcucumber.features=path/to/example.feature:10 \n</code></pre>\n"}],"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702048653,"creation_date":1702023764,"question_id":77625239,"body_markdown":"Test project environment:\r\n\r\n- java 17\r\n- junit5\r\n- cucumber7\r\n- maven 3.3.9\r\n- spring\r\nRunner class:\r\n```\r\n@Suit\r\n@IncludeEngines(&quot;cucumber&quot;)\r\n@SelectClasspathResource(&quot;project/uss/as/play/test/features/smoke/smoke_test.feature&quot;)\r\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;project.uss.as.play.test&quot;)\r\npublic class RunnerTest {\r\n}\r\n```\r\nin project I have settings file `junit-platform.properties`:\r\n```\r\ncucumber.execution.parallel.enabled=false\r\ncucumber.execution.parallel.config.strategy=fixed\r\ncucumber.execution.parallel.config.fixed.parallelism=1\r\ncucumber.execution.exclusive-resources.isolated.read-write=org.junit.platform.engine.support.hierarchical.ExclusiveResource.GLOBAL_KEY\r\ncucumber.plugin=pretty, html:target/cucumber.html, json:target/cucumber.json, io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm\r\ncucumber.publish.quiet=true\r\n```\r\nin jenkins tests launch for maven:\r\n```\r\nmvn -s /u01/jenkins_slave/workspace/MyTest/.m2/settings.xml clean test -Dmaven.test.failure.ignore=true -Dcucumber.features=classpath:project/uss/as/play/test/features/smoke/smoke_test.feature -Dcucumber.filter.tags=&quot;not @skip&quot;\r\n``` \r\nAs a result in log&#39;s I have to test&#39;s runs. It&#39;s not duplicate. This is two unique test&#39;s runs.\r\nI suspect, that it bounded with launch first test for junit and second test for cucumber. \r\nHow fix it?      \r\n\r\n\r\n\r\nI try add to maven comand:\r\n`-Dsurefire.includeJUnit5Engines=cucumber`\r\nand\r\n`-Dcucumber.filter.tags=@1` - I annotated case &quot;@1&quot;\r\nnot changes ","title":"Cucumber test in Jenkins running twice","body":"<p>Test project environment:</p>\n<ul>\n<li>java 17</li>\n<li>junit5</li>\n<li>cucumber7</li>\n<li>maven 3.3.9</li>\n<li>spring\nRunner class:</li>\n</ul>\n<pre><code>@Suit\n@IncludeEngines(&quot;cucumber&quot;)\n@SelectClasspathResource(&quot;project/uss/as/play/test/features/smoke/smoke_test.feature&quot;)\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;project.uss.as.play.test&quot;)\npublic class RunnerTest {\n}\n</code></pre>\n<p>in project I have settings file <code>junit-platform.properties</code>:</p>\n<pre><code>cucumber.execution.parallel.enabled=false\ncucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=1\ncucumber.execution.exclusive-resources.isolated.read-write=org.junit.platform.engine.support.hierarchical.ExclusiveResource.GLOBAL_KEY\ncucumber.plugin=pretty, html:target/cucumber.html, json:target/cucumber.json, io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm\ncucumber.publish.quiet=true\n</code></pre>\n<p>in jenkins tests launch for maven:</p>\n<pre><code>mvn -s /u01/jenkins_slave/workspace/MyTest/.m2/settings.xml clean test -Dmaven.test.failure.ignore=true -Dcucumber.features=classpath:project/uss/as/play/test/features/smoke/smoke_test.feature -Dcucumber.filter.tags=&quot;not @skip&quot;\n</code></pre>\n<p>As a result in log's I have to test's runs. It's not duplicate. This is two unique test's runs.\nI suspect, that it bounded with launch first test for junit and second test for cucumber.\nHow fix it?</p>\n<p>I try add to maven comand:\n<code>-Dsurefire.includeJUnit5Engines=cucumber</code>\nand\n<code>-Dcucumber.filter.tags=@1</code> - I annotated case &quot;@1&quot;\nnot changes</p>\n"},{"tags":["java","spring-boot","autowired","configurationproperties"],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702048357,"creation_date":1702048357,"answer_id":77627516,"question_id":77625686,"body_markdown":"&gt;  I suspect the `@ContextConfiguration` may cause this binding to not happen, but I need help from somebody with deeper understanding.\r\n\r\nYes, that&#39;s likely the case. With such minimal configuration, nothing will have enabled configuration properties through `@EnableConfigurationProperties`. As such, configuration property binding will not happen as part of creating your `ConfigProperties` component.\r\n\r\nYou need to run your tests with some configuration that is annotated with `@EnableConfigurationProperties`.\r\n","title":"Why does @Value work, but not @ConfigurationProperties?","body":"<blockquote>\n<p>I suspect the <code>@ContextConfiguration</code> may cause this binding to not happen, but I need help from somebody with deeper understanding.</p>\n</blockquote>\n<p>Yes, that's likely the case. With such minimal configuration, nothing will have enabled configuration properties through <code>@EnableConfigurationProperties</code>. As such, configuration property binding will not happen as part of creating your <code>ConfigProperties</code> component.</p>\n<p>You need to run your tests with some configuration that is annotated with <code>@EnableConfigurationProperties</code>.</p>\n"}],"owner":{"account_id":9028630,"reputation":21,"user_id":6727123,"display_name":"Zhi An"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702048357,"creation_date":1702028638,"question_id":77625686,"body_markdown":"My class:\r\n\r\n```java\r\npackage com.myCom.test;\r\n\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@ConfigurationProperties( prefix = &quot;sample.mail&quot;)\r\npublic class ConfigProperties {\r\n\r\n  @Value(&quot;${sample.mail.hostName}&quot;)\r\n  private String hostName;\r\n\r\n  private int port;\r\n\r\n  private String from;\r\n\r\n  public String getHostName() {\r\n    return hostName;\r\n  }\r\n\r\n  public void setHostName(String hostName) {\r\n    this.hostName = hostName;\r\n  }\r\n\r\n  public int getPort() {\r\n    return port;\r\n  }\r\n\r\n  public void setPort(int port) {\r\n    this.port = port;\r\n  }\r\n\r\n  public String getFrom() {\r\n    return from;\r\n  }\r\n\r\n  public void setFrom(String from) {\r\n    this.from = from;\r\n  }\r\n}\r\n```\r\n\r\nMy test:\r\n\r\n```java\r\npackage com.myCom.test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.test.context.ContextConfiguration;\r\n\r\n@ContextConfiguration(\r\n    classes = {\r\n        ConfigProperties.class\r\n    })\r\n@SpringBootTest\r\npublic class ConfigPropertiesIT {\r\n\r\n  @Autowired\r\n  ConfigProperties properties;\r\n\r\n  @Test\r\n  public void testProperty() {\r\n    assertNotNull(properties);\r\n    assertNotNull(properties.getHostName());\r\n    assertNotNull(properties.getFrom());\r\n  }\r\n}\r\n```\r\n\r\nMy application.yaml\r\n\r\n```yaml\r\nsample:\r\n  mail:\r\n    hostName: www.myCom.com\r\n    port: 8088\r\n    from: aUser\r\n```\r\n\r\nWhy the hostName field worked, but not the from field?  Adding `@Value` annotation make a field work, and removing it makes a field not work.  It almost seems as if the `@ConfigurationProperties` annotation is not trying to bind the properties to the fields even though the name is matching.  I suspect the `@ContextConfiguration` may cause this binding to not happen, but I need help from somebody with deeper understanding.","title":"Why does @Value work, but not @ConfigurationProperties?","body":"<p>My class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myCom.test;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.stereotype.Component;\n\n@Component\n@ConfigurationProperties( prefix = &quot;sample.mail&quot;)\npublic class ConfigProperties {\n\n  @Value(&quot;${sample.mail.hostName}&quot;)\n  private String hostName;\n\n  private int port;\n\n  private String from;\n\n  public String getHostName() {\n    return hostName;\n  }\n\n  public void setHostName(String hostName) {\n    this.hostName = hostName;\n  }\n\n  public int getPort() {\n    return port;\n  }\n\n  public void setPort(int port) {\n    this.port = port;\n  }\n\n  public String getFrom() {\n    return from;\n  }\n\n  public void setFrom(String from) {\n    this.from = from;\n  }\n}\n</code></pre>\n<p>My test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myCom.test;\n\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.test.context.ContextConfiguration;\n\n@ContextConfiguration(\n    classes = {\n        ConfigProperties.class\n    })\n@SpringBootTest\npublic class ConfigPropertiesIT {\n\n  @Autowired\n  ConfigProperties properties;\n\n  @Test\n  public void testProperty() {\n    assertNotNull(properties);\n    assertNotNull(properties.getHostName());\n    assertNotNull(properties.getFrom());\n  }\n}\n</code></pre>\n<p>My application.yaml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>sample:\n  mail:\n    hostName: www.myCom.com\n    port: 8088\n    from: aUser\n</code></pre>\n<p>Why the hostName field worked, but not the from field?  Adding <code>@Value</code> annotation make a field work, and removing it makes a field not work.  It almost seems as if the <code>@ConfigurationProperties</code> annotation is not trying to bind the properties to the fields even though the name is matching.  I suspect the <code>@ContextConfiguration</code> may cause this binding to not happen, but I need help from somebody with deeper understanding.</p>\n"},{"tags":["java","spring-boot","swagger","springdoc","springdoc-openapi-ui"],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702048122,"creation_date":1701952300,"question_id":77620023,"body_markdown":"How can a Spring Cloud Gateway expose its routes through a Swagger UI? Here&#39;s a minimalistic static Gateway:\r\n```java\r\npackage com.example.gatewaydemo.routing;\r\n\r\nimport org.springframework.cloud.gateway.route.RouteLocator;\r\nimport org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpMethod;\r\n\r\n@Configuration\r\npublic class MyRoutingConfig {\r\n    @Bean\r\n    public RouteLocator routeLocator(RouteLocatorBuilder routeLocatorBuilder) {\r\n        return routeLocatorBuilder.routes()\r\n                .route(predicateSpec -&gt; predicateSpec\r\n                        .path(&quot;/uuid&quot;)\r\n                        .and()\r\n                        .method(HttpMethod.GET)\r\n                        .uri(&quot;https://httpbin.org&quot;)\r\n                ).build();\r\n    }\r\n}\r\n```\r\nIn a regular Spring web app, adding Swagger dependencies is enough\r\n```xml\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nIt&#39;s not the case with Gateway\r\n\r\nMy Gateway uses Spring Boot 3 and Java 17 so I included this dependency instead\r\n```xml\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nHowever, it&#39;s clear I have to provide *some* configuration because if I simply include that `springdoc` dependency and include the `@OpenApiDefinition` annotation\r\n```java\r\npackage by.afinny.apigateway;\r\n\r\nimport io.swagger.v3.oas.annotations.OpenAPIDefinition;\r\nimport io.swagger.v3.oas.annotations.info.Info;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\n@OpenAPIDefinition(info = @Info(title = &quot;API Gateway&quot;, version = &quot;1.0&quot;, description = &quot;Documentation API Gateway v1.0&quot;))\r\npublic class ApiGatewayV2Application {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(ApiGatewayV2Application.class, args);\r\n    }\r\n}\r\n```\r\nI get this response when making a request to `/swagger-ui.html` (which gets redirected to `/webjars/swagger-ui/index.html`). Sorry, it&#39;s ui after all so I have to include a screenshot\r\n\r\n&gt; Failed to load remote configuration\r\n\r\n[![enter image description here][1]][1]\r\n\r\nPlease note that I retrieve services and their docs dynamically so [static solutions][2] like\r\n```yml\r\nspringdoc:\r\n  enable-native-support: true\r\n  api-docs:\r\n    enabled: true\r\n  swagger-ui:\r\n    enabled: true\r\n    path: /swagger-ui.html\r\n    config-url: /v3/api-docs/swagger-config\r\n    urls:\r\n      - url: /v3/api-docs\r\n        name: API Gateway Service\r\n        primaryName: API Gateway Service\r\n      - url: /product-service/v3/api-docs\r\n        name: Product Service\r\n        primaryName: Product Service\r\n      - url: /price-service/v3/api-docs\r\n        name: Price Service\r\n        primaryName: Price Service\r\n```\r\nwon&#39;t fit. That is, at startup my Gateway doesn&#39;t know whether there are `product-service` or `price-service` running\r\n\r\nIn a sense, I guess, my question boils down to this: how do I write Java config for Swagger UI in a Spring Cloud Gateway application?\r\n\r\n# UPD\r\n\r\nHere&#39;s what I tried\r\n```yml\r\nspringdoc:\r\n  api-docs:\r\n    enabled: false\r\n  swagger-ui:\r\n    enabled: true\r\n    path: /swagger-ui.html\r\n    config-url: /swagger-ui-config\r\n```\r\n```java\r\npackage by.afinny.apigateway.controller;\r\n\r\nimport by.afinny.apigateway.model.uiConfig.SwaggerUiConfig;\r\nimport by.afinny.apigateway.service.SwaggerUiConfigProvider;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport reactor.core.publisher.Mono;\r\n\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class SwaggerUiConfigController {\r\n    private final SwaggerUiConfigProvider configProvider;\r\n    @GetMapping(&quot;/swagger-ui-config&quot;)\r\n    public Mono&lt;SwaggerUiConfig&gt; getConfig() {\r\n        return configProvider.getSwaggerUiConfig();\r\n    }\r\n}\r\n```\r\n```java\r\npackage by.afinny.apigateway.model.uiConfig;\r\n\r\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\r\nimport by.afinny.apigateway.service.SwaggerApplicationSerializer;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport java.util.Collection;\r\n\r\n@NoArgsConstructor\r\n@Getter\r\npublic class SwaggerUiConfig {\r\n    @JsonProperty(&quot;urls&quot;)\r\n    @JsonSerialize(contentUsing = SwaggerApplicationSerializer.class) // because SwaggerApplication contains a ton of other properties\r\n    private Collection&lt;SwaggerApplication&gt; swaggerApplications;\r\n\r\n    public SwaggerUiConfig(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\r\n        this.swaggerApplications = swaggerApplications;\r\n    }\r\n\r\n    public static SwaggerUiConfig from(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\r\n        return new SwaggerUiConfig(swaggerApplications);\r\n    }\r\n}\r\n```\r\n```java\r\npackage by.afinny.apigateway.service;\r\n\r\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.JsonSerializer;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\nimport lombok.SneakyThrows;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class SwaggerApplicationSerializer extends JsonSerializer&lt;SwaggerApplication&gt; {\r\n    @Override\r\n    @SneakyThrows\r\n    public void serialize(SwaggerApplication swaggerApplication, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\r\n        jsonGenerator.writeStartObject();\r\n        jsonGenerator.writeStringField(&quot;url&quot;, swaggerApplication.getUrl());\r\n        jsonGenerator.writeStringField(&quot;name&quot;, swaggerApplication.getName());\r\n        jsonGenerator.writeEndObject();\r\n    }\r\n}\r\n```\r\n\r\nThe returned JSON looks correct\r\n```json\r\n{\r\n  &quot;urls&quot;: [\r\n    {\r\n      &quot;url&quot;: &quot;/HELLOWORLD/v3/api-docs&quot;,\r\n      &quot;name&quot;: &quot;HELLOWORLD&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n[![enter image description here][3]][3]\r\n\r\nHowever, I still get the same redirect and the same &quot;failed to load configuration&quot; message, nothing changed. What is my mistake?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wPj17.png\r\n  [2]: https://medium.com/@pubuduc.14/swagger-openapi-specification-3-integration-with-spring-cloud-gateway-part-2-1d670d4ab69a\r\n  [3]: https://i.stack.imgur.com/gZAU9.png","title":"How can a Spring Cloud Gateway expose its (dynamic) routes through a Swagger UI?","body":"<p>How can a Spring Cloud Gateway expose its routes through a Swagger UI? Here's a minimalistic static Gateway:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.gatewaydemo.routing;\n\nimport org.springframework.cloud.gateway.route.RouteLocator;\nimport org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\n\n@Configuration\npublic class MyRoutingConfig {\n    @Bean\n    public RouteLocator routeLocator(RouteLocatorBuilder routeLocatorBuilder) {\n        return routeLocatorBuilder.routes()\n                .route(predicateSpec -&gt; predicateSpec\n                        .path(&quot;/uuid&quot;)\n                        .and()\n                        .method(HttpMethod.GET)\n                        .uri(&quot;https://httpbin.org&quot;)\n                ).build();\n    }\n}\n</code></pre>\n<p>In a regular Spring web app, adding Swagger dependencies is enough</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>It's not the case with Gateway</p>\n<p>My Gateway uses Spring Boot 3 and Java 17 so I included this dependency instead</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n   &lt;version&gt;2.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, it's clear I have to provide <em>some</em> configuration because if I simply include that <code>springdoc</code> dependency and include the <code>@OpenApiDefinition</code> annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway;\n\nimport io.swagger.v3.oas.annotations.OpenAPIDefinition;\nimport io.swagger.v3.oas.annotations.info.Info;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@OpenAPIDefinition(info = @Info(title = &quot;API Gateway&quot;, version = &quot;1.0&quot;, description = &quot;Documentation API Gateway v1.0&quot;))\npublic class ApiGatewayV2Application {\n    public static void main(String[] args) {\n        SpringApplication.run(ApiGatewayV2Application.class, args);\n    }\n}\n</code></pre>\n<p>I get this response when making a request to <code>/swagger-ui.html</code> (which gets redirected to <code>/webjars/swagger-ui/index.html</code>). Sorry, it's ui after all so I have to include a screenshot</p>\n<blockquote>\n<p>Failed to load remote configuration</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/wPj17.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wPj17.png\" alt=\"enter image description here\" /></a></p>\n<p>Please note that I retrieve services and their docs dynamically so <a href=\"https://medium.com/@pubuduc.14/swagger-openapi-specification-3-integration-with-spring-cloud-gateway-part-2-1d670d4ab69a\" rel=\"nofollow noreferrer\">static solutions</a> like</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>springdoc:\n  enable-native-support: true\n  api-docs:\n    enabled: true\n  swagger-ui:\n    enabled: true\n    path: /swagger-ui.html\n    config-url: /v3/api-docs/swagger-config\n    urls:\n      - url: /v3/api-docs\n        name: API Gateway Service\n        primaryName: API Gateway Service\n      - url: /product-service/v3/api-docs\n        name: Product Service\n        primaryName: Product Service\n      - url: /price-service/v3/api-docs\n        name: Price Service\n        primaryName: Price Service\n</code></pre>\n<p>won't fit. That is, at startup my Gateway doesn't know whether there are <code>product-service</code> or <code>price-service</code> running</p>\n<p>In a sense, I guess, my question boils down to this: how do I write Java config for Swagger UI in a Spring Cloud Gateway application?</p>\n<h1>UPD</h1>\n<p>Here's what I tried</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>springdoc:\n  api-docs:\n    enabled: false\n  swagger-ui:\n    enabled: true\n    path: /swagger-ui.html\n    config-url: /swagger-ui-config\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway.controller;\n\nimport by.afinny.apigateway.model.uiConfig.SwaggerUiConfig;\nimport by.afinny.apigateway.service.SwaggerUiConfigProvider;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport reactor.core.publisher.Mono;\n\n@RestController\n@RequiredArgsConstructor\npublic class SwaggerUiConfigController {\n    private final SwaggerUiConfigProvider configProvider;\n    @GetMapping(&quot;/swagger-ui-config&quot;)\n    public Mono&lt;SwaggerUiConfig&gt; getConfig() {\n        return configProvider.getSwaggerUiConfig();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway.model.uiConfig;\n\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\nimport by.afinny.apigateway.service.SwaggerApplicationSerializer;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\n\nimport java.util.Collection;\n\n@NoArgsConstructor\n@Getter\npublic class SwaggerUiConfig {\n    @JsonProperty(&quot;urls&quot;)\n    @JsonSerialize(contentUsing = SwaggerApplicationSerializer.class) // because SwaggerApplication contains a ton of other properties\n    private Collection&lt;SwaggerApplication&gt; swaggerApplications;\n\n    public SwaggerUiConfig(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\n        this.swaggerApplications = swaggerApplications;\n    }\n\n    public static SwaggerUiConfig from(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\n        return new SwaggerUiConfig(swaggerApplications);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway.service;\n\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport lombok.SneakyThrows;\n\nimport java.io.IOException;\n\npublic class SwaggerApplicationSerializer extends JsonSerializer&lt;SwaggerApplication&gt; {\n    @Override\n    @SneakyThrows\n    public void serialize(SwaggerApplication swaggerApplication, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\n        jsonGenerator.writeStartObject();\n        jsonGenerator.writeStringField(&quot;url&quot;, swaggerApplication.getUrl());\n        jsonGenerator.writeStringField(&quot;name&quot;, swaggerApplication.getName());\n        jsonGenerator.writeEndObject();\n    }\n}\n</code></pre>\n<p>The returned JSON looks correct</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;urls&quot;: [\n    {\n      &quot;url&quot;: &quot;/HELLOWORLD/v3/api-docs&quot;,\n      &quot;name&quot;: &quot;HELLOWORLD&quot;\n    }\n  ]\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gZAU9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gZAU9.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I still get the same redirect and the same &quot;failed to load configuration&quot; message, nothing changed. What is my mistake?</p>\n"},{"tags":["java","spring","graphql","transactions"],"owner":{"account_id":30099070,"reputation":1,"user_id":23066661,"display_name":"Johny Adidas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702048000,"creation_date":1702048000,"question_id":77627474,"body_markdown":"I have a method with @Transactional annotation in which an exception is thrown. After which this exception is output to the stacktrace, then the exception UnexpectedRollbackException appears: Transaction silently rolled back because it has been marked as rollback-only, 30 seconds pass and &quot;GraphQL execution canceled because timeout of 30000 millis was reached. The following query was being executed when this happened&quot;\r\n\r\nI tried to write various handlers, aspects, etc., nothing changed","title":"Throwing an exception in a method with @Transactional in GraphQL","body":"<p>I have a method with @Transactional annotation in which an exception is thrown. After which this exception is output to the stacktrace, then the exception UnexpectedRollbackException appears: Transaction silently rolled back because it has been marked as rollback-only, 30 seconds pass and &quot;GraphQL execution canceled because timeout of 30000 millis was reached. The following query was being executed when this happened&quot;</p>\n<p>I tried to write various handlers, aspects, etc., nothing changed</p>\n"},{"tags":["java","selenium","google-chrome","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":7008369,"reputation":1389,"user_id":5372079,"display_name":"Abhishek Dhoundiyal"},"score":0,"creation_date":1661064098,"post_id":73431020,"comment_id":129679028,"body_markdown":"try this https://stackoverflow.com/a/50642913/5372079","body":"try this <a href=\"https://stackoverflow.com/a/50642913/5372079\">stackoverflow.com/a/50642913/5372079</a>"}],"answers":[{"comments":[{"owner":{"account_id":26118234,"reputation":11,"user_id":19810982,"display_name":"user19810982"},"score":0,"creation_date":1661257640,"post_id":73435448,"comment_id":129724339,"body_markdown":"Hi ! The problema was &quot; management by your organization&quot; after all i could fix.","body":"Hi ! The problema was &quot; management by your organization&quot; after all i could fix."}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661092834,"creation_date":1661092834,"answer_id":73435448,"question_id":73431020,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist\r\n\r\n...implies that the [ChromeDriver](https://stackoverflow.com/a/59927747/7429447) was unable to initiate/spawn a new _Browsing Context_ i.e. [tag:google-chrome] session.\r\n\r\nYour main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- You are using _chrome=104.0_\r\n- But you are using _chromedriver=103.0_ \r\n- Release Notes of [_chromedriver=103.0_](https://chromedriver.storage.googleapis.com/103.0.5060.134/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports Chrome version 103\r\n\r\n\r\n\r\nSo there is a clear mismatch between _chromedriver=103.0_ and the _chrome=104.0_\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _Selenium_ is upgraded to  current released [_**Version 4.4.0**_](https://www.selenium.dev/downloads/).\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v104.0](https://chromedriver.storage.googleapis.com/index.html?path=104.0.5112.79/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=104.0_ (as per [chromedriver=104.0 release notes](https://chromedriver.storage.googleapis.com/104.0.5112.79/notes.txt)).","title":"Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist error using Selenium ChromeDriver Java","body":"<p>This error message...</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn't exist\n</code></pre>\n<p>...implies that the <a href=\"https://stackoverflow.com/a/59927747/7429447\">ChromeDriver</a> was unable to initiate/spawn a new <em>Browsing Context</em> i.e. <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\">google-chrome</a> session.</p>\n<p>Your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n<ul>\n<li>You are using <em>chrome=104.0</em></li>\n<li>But you are using <em>chromedriver=103.0</em></li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/103.0.5060.134/notes.txt\" rel=\"nofollow noreferrer\"><em>chromedriver=103.0</em></a> clearly mentions the following :</li>\n</ul>\n<blockquote>\n<p>Supports Chrome version 103</p>\n</blockquote>\n<p>So there is a clear mismatch between <em>chromedriver=103.0</em> and the <em>chrome=104.0</em></p>\n<hr />\n<h2>Solution</h2>\n<p>Ensure that:</p>\n<ul>\n<li><em>Selenium</em> is upgraded to  current released <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><em><strong>Version 4.4.0</strong></em></a>.</li>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=104.0.5112.79/\" rel=\"nofollow noreferrer\">ChromeDriver v104.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=104.0</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/104.0.5112.79/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=104.0 release notes</a>).</li>\n</ul>\n"}],"owner":{"account_id":26118234,"reputation":11,"user_id":19810982,"display_name":"user19810982"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702047860,"creation_date":1661043076,"question_id":73431020,"body_markdown":"I am new in selenium  and i am trying to open a page so chome open but it can not load URL.\r\n\r\nCode trials:\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\user\\\\Desktop\\\\ecli\\\\chromedriver.exe&quot;)\r\nWebDriver driver= new ChromeDriver();\r\ndriver.get(&quot;https://rahulshettyacademy.com/&quot;);\r\nSystem.out.println(driver.getTitle());\r\n```\r\nI tried re install chrome, add `thread.sleep(5000)`, add dependency `WebDriverManager.chromedriver().setup();` and `WebDriver driver = new ChromeDriver();`\r\n\r\nAfter close the chrome I have this:\r\n```\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nStarting ChromeDriver 103.0.5060.134 (8ec6fce403b3feb0869b0732eda8bd95011d333c-refs/branch-heads/5060@{#1262}) on port 54404\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\n\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist\r\nBuild info: version: &#39;4.3.0&#39;, revision: &#39;a4995e2c09*&#39;\r\nSystem info: host: &#39;PC&#39;, ip: &#39;192.168.56.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.3&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}}]\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:144)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:264)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:179)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:81)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:49)\r\n\tat PrimerEjercicio.main(PrimerEjercicio.java:29)\r\n```\r\nEnvironment:\r\n\r\n- OS: W10\r\n- Chrome version :104.0.5112.102 \r\n- jve1.8.0_101 (java version)\r\n","title":"Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist error using Selenium ChromeDriver Java","body":"<p>I am new in selenium  and i am trying to open a page so chome open but it can not load URL.</p>\n<p>Code trials:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\user\\\\Desktop\\\\ecli\\\\chromedriver.exe&quot;)\nWebDriver driver= new ChromeDriver();\ndriver.get(&quot;https://rahulshettyacademy.com/&quot;);\nSystem.out.println(driver.getTitle());\n</code></pre>\n<p>I tried re install chrome, add <code>thread.sleep(5000)</code>, add dependency <code>WebDriverManager.chromedriver().setup();</code> and <code>WebDriver driver = new ChromeDriver();</code></p>\n<p>After close the chrome I have this:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nStarting ChromeDriver 103.0.5060.134 (8ec6fce403b3feb0869b0732eda8bd95011d333c-refs/branch-heads/5060@{#1262}) on port 54404\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\n\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn't exist\nBuild info: version: '4.3.0', revision: 'a4995e2c09*'\nSystem info: host: 'PC', ip: '192.168.56.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.3'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:144)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:264)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:179)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:81)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:49)\n    at PrimerEjercicio.main(PrimerEjercicio.java:29)\n</code></pre>\n<p>Environment:</p>\n<ul>\n<li>OS: W10</li>\n<li>Chrome version :104.0.5112.102</li>\n<li>jve1.8.0_101 (java version)</li>\n</ul>\n"},{"tags":["java","java-native-interface","jna"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1701945518,"post_id":77619236,"comment_id":136838706,"body_markdown":"That last `null` may be the cause. It&#39;s not the same as in the native code snippet (unless `CallbackProc` is `NULL`).","body":"That last <code>null</code> may be the cause. It&#39;s not the same as in the native code snippet (unless <code>CallbackProc</code> is <code>NULL</code>)."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1701945636,"post_id":77619236,"comment_id":136838727,"body_markdown":"Another option is the way that you&#39;re using pointer. You can check out how the Windows code (from jna-platform) deals with `Handle` and `HKEY`. I have a feeling that `HN2QCONN` should get a similar treatment.","body":"Another option is the way that you&#39;re using pointer. You can check out how the Windows code (from jna-platform) deals with <code>Handle</code> and <code>HKEY</code>. I have a feeling that <code>HN2QCONN</code> should get a similar treatment."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1701945860,"post_id":77619236,"comment_id":136838772,"body_markdown":"You do not get an error of some kind? In that case I would assume that `N2QLibConnectQuik()` just returns `false`, and that your problem is not a Java/JNA one. Have you tried a simple C/C++ program doing the same, and what result did you got from it?","body":"You do not get an error of some kind? In that case I would assume that <code>N2QLibConnectQuik()</code> just returns <code>false</code>, and that your problem is not a Java/JNA one. Have you tried a simple C/C++ program doing the same, and what result did you got from it?"}],"answers":[{"comments":[{"owner":{"account_id":5177195,"reputation":391,"user_id":4143902,"display_name":"KUL"},"score":0,"creation_date":1702207622,"post_id":77626656,"comment_id":136866171,"body_markdown":"Hi! You&#39;re saying that I&#39;m creating a second pointer, not passing the first one. I&#39;ve been thinking about it too. But is the N2QLibConnectQuik(ptr) pointer being recreated here?","body":"Hi! You&#39;re saying that I&#39;m creating a second pointer, not passing the first one. I&#39;ve been thinking about it too. But is the N2QLibConnectQuik(ptr) pointer being recreated here?"},{"owner":{"account_id":2996877,"reputation":2143,"user_id":2543253,"display_name":"user2543253"},"score":0,"creation_date":1702294391,"post_id":77626656,"comment_id":136874569,"body_markdown":"I&#39;m not sure I understand your question. According to your C code you want to pass the returned pointer. Instead you allocate a completely different pointer. (Actually I&#39;m not sure why that compiles at all. You declared `Pointer` but he Memory constructor takes a `long`. If you actually have a `long`, then you can use the `Pointer` constructor or declare your second function to simply take the `long`)","body":"I&#39;m not sure I understand your question. According to your C code you want to pass the returned pointer. Instead you allocate a completely different pointer. (Actually I&#39;m not sure why that compiles at all. You declared <code>Pointer</code> but he Memory constructor takes a <code>long</code>. If you actually have a <code>long</code>, then you can use the <code>Pointer</code> constructor or declare your second function to simply take the <code>long</code>)"}],"tags":[],"owner":{"account_id":2996877,"reputation":2143,"user_id":2543253,"display_name":"user2543253"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702047732,"creation_date":1702039595,"answer_id":77626656,"question_id":77619236,"body_markdown":"When you compare your Java code to your C code, you&#39;ll see that in C you pass the return value of the first function call directly to the second one. In the Java example you&#39;re creating another pointer from it. But there&#39;s no need for that. Your first method call already returns a Pointer, pass that directly as you do in C.\r\n\r\nI don&#39;t know what `N2QLibConnCreate` does and if it requires the callback argument. If so you&#39;ll also have to create an instance of `N2q_callback_proc` and pass that instead of null.","title":"Java JNA get and pass native pointer","body":"<p>When you compare your Java code to your C code, you'll see that in C you pass the return value of the first function call directly to the second one. In the Java example you're creating another pointer from it. But there's no need for that. Your first method call already returns a Pointer, pass that directly as you do in C.</p>\n<p>I don't know what <code>N2QLibConnCreate</code> does and if it requires the callback argument. If so you'll also have to create an instance of <code>N2q_callback_proc</code> and pass that instead of null.</p>\n"}],"owner":{"account_id":5177195,"reputation":391,"user_id":4143902,"display_name":"KUL"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702047732,"creation_date":1701944510,"question_id":77619236,"body_markdown":"How using Java JNA get a pointer from a native method and pass it to another native method?\r\n\r\n    //C code .h\r\n    ...\r\n    extern &quot;C&quot; HN2QCONN __stdcall N2QLibConnCreate(LPCTSTR lpszIniFile, LPCTSTR lpszSection, \r\n    \t\t\t\t\t\t\t\t\t\t\t   N2Q_CALLBACK_PROC Callback);\r\n    extern &quot;C&quot; BOOL __stdcall N2QLibConnectQuik(HN2QCONN hConn);\r\n    ...\r\n    //another C code .h\r\n    ...\r\n    DECLARE_HANDLE (HN2QCONN);\r\n    ...\r\n    //test C code .cpp\r\n    HN2QCONN hConn = N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, CallbackProc);\r\n    if (!N2QLibConnectQuik(hConn))\t\t\t\t\t\t\t\t\r\n    \t\tprintf(&quot;error connect to server.&quot;);\r\n\r\nHow can I do the same in Java? How do I correctly get the data from the native method and use the managed code to pass it back to the native method?\r\n\r\nI&#39;m trying to do this:\r\n\r\n    //java code\r\n    ...\r\n    public interface N2q_lib extends Library {\r\n    \tN2q_lib INSTANCE = (N2q_lib)Native.load(&quot;n2q_lib.dll&quot;, N2q_lib.class);\r\n    \tPointer N2QLibConnCreate(String lpszIniFile, String lpszSection, N2q_callback_proc Callback);\r\n    \tboolean N2QLibConnectQuik(Pointer ptr);\r\n    }\r\n    ...\r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            Pointer ptr = new Memory(N2q_lib.INSTANCE.N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, null));\r\n            if (!N2q_lib.INSTANCE.N2QLibConnectQuik(ptr))\r\n            \tSystem.out.println(&quot;error connect to server.&quot;);\r\n        }\r\n    }\r\n\r\nBut I always get &quot;false&quot;. Am I using pointers incorrectly?","title":"Java JNA get and pass native pointer","body":"<p>How using Java JNA get a pointer from a native method and pass it to another native method?</p>\n<pre><code>//C code .h\n...\nextern &quot;C&quot; HN2QCONN __stdcall N2QLibConnCreate(LPCTSTR lpszIniFile, LPCTSTR lpszSection, \n                                               N2Q_CALLBACK_PROC Callback);\nextern &quot;C&quot; BOOL __stdcall N2QLibConnectQuik(HN2QCONN hConn);\n...\n//another C code .h\n...\nDECLARE_HANDLE (HN2QCONN);\n...\n//test C code .cpp\nHN2QCONN hConn = N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, CallbackProc);\nif (!N2QLibConnectQuik(hConn))                              \n        printf(&quot;error connect to server.&quot;);\n</code></pre>\n<p>How can I do the same in Java? How do I correctly get the data from the native method and use the managed code to pass it back to the native method?</p>\n<p>I'm trying to do this:</p>\n<pre><code>//java code\n...\npublic interface N2q_lib extends Library {\n    N2q_lib INSTANCE = (N2q_lib)Native.load(&quot;n2q_lib.dll&quot;, N2q_lib.class);\n    Pointer N2QLibConnCreate(String lpszIniFile, String lpszSection, N2q_callback_proc Callback);\n    boolean N2QLibConnectQuik(Pointer ptr);\n}\n...\npublic class App \n{\n    public static void main( String[] args )\n    {\n        Pointer ptr = new Memory(N2q_lib.INSTANCE.N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, null));\n        if (!N2q_lib.INSTANCE.N2QLibConnectQuik(ptr))\n            System.out.println(&quot;error connect to server.&quot;);\n    }\n}\n</code></pre>\n<p>But I always get &quot;false&quot;. Am I using pointers incorrectly?</p>\n"},{"tags":["java","log4j","log4j2","open-liberty"],"comments":[{"owner":{"account_id":1510727,"reputation":1482,"user_id":1412935,"accept_rate":88,"display_name":"elcadro"},"score":0,"creation_date":1640713506,"post_id":68928312,"comment_id":124640976,"body_markdown":"Your library is not log4j2 but log4j 1.2.17. Try last log4j2 version: 2.17.0","body":"Your library is not log4j2 but log4j 1.2.17. Try last log4j2 version: 2.17.0"}],"answers":[{"comments":[{"owner":{"account_id":18235814,"reputation":59,"user_id":13273846,"display_name":"BrentL"},"score":0,"creation_date":1630055278,"post_id":68929965,"comment_id":121856423,"body_markdown":"Thank you for the response! I followed the tutorial provided in the repository but it unfortunately doesn&#39;t work. I tried the second option as you suggested. It finds my log4j2.xml file but doesn&#39;t implement it and LogManager.getLogManager().getLogger(CLASS); returns null.","body":"Thank you for the response! I followed the tutorial provided in the repository but it unfortunately doesn&#39;t work. I tried the second option as you suggested. It finds my log4j2.xml file but doesn&#39;t implement it and LogManager.getLogManager().getLogger(CLASS); returns null."},{"owner":{"account_id":8468354,"reputation":739,"user_id":6351865,"display_name":"M. Broz"},"score":0,"creation_date":1630071204,"post_id":68929965,"comment_id":121862949,"body_markdown":"can you update the question to show your server.xml snippet with what you added for #2?","body":"can you update the question to show your server.xml snippet with what you added for #2?"},{"owner":{"account_id":18235814,"reputation":59,"user_id":13273846,"display_name":"BrentL"},"score":0,"creation_date":1630306028,"post_id":68929965,"comment_id":121910488,"body_markdown":"I updated my answer and added the server.xml file.","body":"I updated my answer and added the server.xml file."},{"owner":{"account_id":18235814,"reputation":59,"user_id":13273846,"display_name":"BrentL"},"score":0,"creation_date":1632727375,"post_id":68929965,"comment_id":122560928,"body_markdown":"I&#39;m still having this issue. I updated my question with the server.xml file, if you could give a quick look I would really appreciate it!","body":"I&#39;m still having this issue. I updated my question with the server.xml file, if you could give a quick look I would really appreciate it!"}],"tags":[],"owner":{"account_id":8468354,"reputation":739,"user_id":6351865,"display_name":"M. Broz"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629926159,"creation_date":1629926159,"answer_id":68929965,"question_id":68928312,"body_markdown":"You&#39;ll also need to add log4j to the classpath, and there&#39;s several ways you can do that (with pros/cons to each, but I would suggest #2, unless you have more then one app that&#39;s going to be making use of log4j, in which case 3 may be the better approach):\r\n\r\n 1. Package it with your app (inside the war)\r\n 2. Add it in the server.xml via the [classloader][1] attribute under your [webApplication][2]\r\n 3. Drop it in the [global shared library folder][3]: `${shared.config.dir}/lib/global` or `${server.config.dir}/lib/global`\r\n 4. Set it via JVM argument: `-Dlog4j.configurationFile=file:/path/to/log4j2.xml`\r\n\r\n\r\nI&#39;ll mention that there is also an [archived repo regarding using log4j with Open Liberty][4] that you may find helpful, but keep in mind that it is archived so it&#39;s likely incomplete and with no dev support.\r\n\r\n\r\n  [1]: https://openliberty.io/docs/latest/reference/config/classloader.html\r\n  [2]: https://openliberty.io/docs/latest/reference/config/webApplication.html\r\n  [3]: https://openliberty.io/docs/latest/reference/directory-locations-properties.html\r\n  [4]: https://github.com/OpenLiberty/archived-guide-log4j","title":"Open-liberty how to setup a log4j configuration?","body":"<p>You'll also need to add log4j to the classpath, and there's several ways you can do that (with pros/cons to each, but I would suggest #2, unless you have more then one app that's going to be making use of log4j, in which case 3 may be the better approach):</p>\n<ol>\n<li>Package it with your app (inside the war)</li>\n<li>Add it in the server.xml via the <a href=\"https://openliberty.io/docs/latest/reference/config/classloader.html\" rel=\"nofollow noreferrer\">classloader</a> attribute under your <a href=\"https://openliberty.io/docs/latest/reference/config/webApplication.html\" rel=\"nofollow noreferrer\">webApplication</a></li>\n<li>Drop it in the <a href=\"https://openliberty.io/docs/latest/reference/directory-locations-properties.html\" rel=\"nofollow noreferrer\">global shared library folder</a>: <code>${shared.config.dir}/lib/global</code> or <code>${server.config.dir}/lib/global</code></li>\n<li>Set it via JVM argument: <code>-Dlog4j.configurationFile=file:/path/to/log4j2.xml</code></li>\n</ol>\n<p>I'll mention that there is also an <a href=\"https://github.com/OpenLiberty/archived-guide-log4j\" rel=\"nofollow noreferrer\">archived repo regarding using log4j with Open Liberty</a> that you may find helpful, but keep in mind that it is archived so it's likely incomplete and with no dev support.</p>\n"}],"owner":{"account_id":18235814,"reputation":59,"user_id":13273846,"display_name":"BrentL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1036,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702047645,"creation_date":1629917015,"question_id":68928312,"body_markdown":"title says it all. How do I setup a log4j configuration in my Open-liberty project? I&#39;ve added my log4j.xml file in the resources folder and I use the following dependency in my pom.xml:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.17&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis is my server.xml:\r\n```\r\n&lt;server description=&quot;Intake Server&quot;&gt;\r\n    &lt;featureManager&gt;\r\n        &lt;feature&gt;servlet-4.0&lt;/feature&gt;\r\n        &lt;feature&gt;mpConfig-1.4&lt;/feature&gt;\r\n        &lt;feature&gt;cdi-2.0&lt;/feature&gt;\r\n    &lt;/featureManager&gt;\r\n\r\n    &lt;variable name=&quot;default.http.port&quot; defaultValue=&quot;9080&quot;/&gt;\r\n    &lt;variable name=&quot;default.https.port&quot; defaultValue=&quot;9443&quot;/&gt;\r\n    &lt;variable name=&quot;app.context.root&quot; defaultValue=&quot;message&quot;/&gt;\r\n\r\n\r\n    &lt;httpEndpoint httpPort=&quot;${default.http.port}&quot; \r\n    httpsPort=&quot;${default.https.port}&quot; id=&quot;defaultHttpEndpoint&quot;  host=&quot;*&quot; /&gt;\r\n\r\n    &lt;library id=&quot;log4jConfig&quot;&gt;\r\n          &lt;folder dir=&quot;/var/log/intake&quot; scanInterval=&quot;5s&quot; /&gt;\r\n    &lt;/library&gt;\r\n\r\n\r\n    &lt;webApplication id=&quot;intake&quot; location=&quot;intake.war&quot; contextRoot=&quot;${app.context.root}&quot;&gt;\r\n\t\t&lt;classloader commonLibraryRef=&quot;log4jConfig&quot;/&gt;\r\n\t&lt;/webApplication&gt;\r\n&lt;/server&gt;\r\n```","title":"Open-liberty how to setup a log4j configuration?","body":"<p>title says it all. How do I setup a log4j configuration in my Open-liberty project? I've added my log4j.xml file in the resources folder and I use the following dependency in my pom.xml:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n    &lt;version&gt;1.2.17&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is my server.xml:</p>\n<pre><code>&lt;server description=&quot;Intake Server&quot;&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;servlet-4.0&lt;/feature&gt;\n        &lt;feature&gt;mpConfig-1.4&lt;/feature&gt;\n        &lt;feature&gt;cdi-2.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;variable name=&quot;default.http.port&quot; defaultValue=&quot;9080&quot;/&gt;\n    &lt;variable name=&quot;default.https.port&quot; defaultValue=&quot;9443&quot;/&gt;\n    &lt;variable name=&quot;app.context.root&quot; defaultValue=&quot;message&quot;/&gt;\n\n\n    &lt;httpEndpoint httpPort=&quot;${default.http.port}&quot; \n    httpsPort=&quot;${default.https.port}&quot; id=&quot;defaultHttpEndpoint&quot;  host=&quot;*&quot; /&gt;\n\n    &lt;library id=&quot;log4jConfig&quot;&gt;\n          &lt;folder dir=&quot;/var/log/intake&quot; scanInterval=&quot;5s&quot; /&gt;\n    &lt;/library&gt;\n\n\n    &lt;webApplication id=&quot;intake&quot; location=&quot;intake.war&quot; contextRoot=&quot;${app.context.root}&quot;&gt;\n        &lt;classloader commonLibraryRef=&quot;log4jConfig&quot;/&gt;\n    &lt;/webApplication&gt;\n&lt;/server&gt;\n</code></pre>\n"},{"tags":["java","sql-server","jpa","indexing"],"comments":[{"owner":{"account_id":2312068,"reputation":90351,"user_id":2029983,"display_name":"Thom A"},"score":3,"creation_date":1702047577,"post_id":77627368,"comment_id":136853152,"body_markdown":"The fact that your statistics needed an update sounds like you don&#39;t do regular index and statistics maintenance; that is likely the *real* cause of the issue.","body":"The fact that your statistics needed an update sounds like you don&#39;t do regular index and statistics maintenance; that is likely the <i>real</i> cause of the issue."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1702048005,"post_id":77627368,"comment_id":136853227,"body_markdown":"If you cannot rely on the DBMS to select the correct index in this case, then how can you rely on it to choose good query plans in more complex cases?  Choosing good plans is one of the DBMS&#39;s primary jobs.  Make sure it has enough information to do that well, and let it.","body":"If you cannot rely on the DBMS to select the correct index in this case, then how can you rely on it to choose good query plans in more complex cases?  Choosing good plans is one of the DBMS&#39;s primary jobs.  Make sure it has enough information to do that well, and let it."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":1,"creation_date":1702048364,"post_id":77627368,"comment_id":136853296,"body_markdown":"Why would choosing either index be better or worse for normal operations? or do you have a selection on measurementPointId  and it still picks index A? sounds very unlikely to me. You need to provide some sample queries. I&#39;m guessing you have some ranged selections but who knows","body":"Why would choosing either index be better or worse for normal operations? or do you have a selection on measurementPointId  and it still picks index A? sounds very unlikely to me. You need to provide some sample queries. I&#39;m guessing you have some ranged selections but who knows"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1702075458,"post_id":77627368,"comment_id":136857155,"body_markdown":"_Why would choosing either index be better or worse for normal operations?_ Because queries that can be fully answered by an index (i.e.: one that includes all of the selected and joined columns) never have to touch the table&#39;s source rows. At a guess SQL Server had to compile a new query plan and with the stats out of date, and the stale histogram indicating that Index B wouldn&#39;t include the required measurementPointId (even though it did), it could have chosen smaller Index A as a preferable option.","body":"<i>Why would choosing either index be better or worse for normal operations?</i> Because queries that can be fully answered by an index (i.e.: one that includes all of the selected and joined columns) never have to touch the table&#39;s source rows. At a guess SQL Server had to compile a new query plan and with the stats out of date, and the stale histogram indicating that Index B wouldn&#39;t include the required measurementPointId (even though it did), it could have chosen smaller Index A as a preferable option."},{"owner":{"account_id":9851857,"reputation":82584,"user_id":7297700,"display_name":"David Browne - Microsoft"},"score":0,"creation_date":1702076310,"post_id":77627368,"comment_id":136857254,"body_markdown":"Perhaps you simply need a columnstore index. https://learn.microsoft.com/en-us/sql/relational-databases/indexes/columnstore-indexes-overview?view=sql-server-ver16","body":"Perhaps you simply need a columnstore index. <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/indexes/columnstore-indexes-overview?view=sql-server-ver16\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/sql/relational-databases/indexes/&hellip;</a>"}],"owner":{"account_id":7560690,"reputation":158,"user_id":5738409,"display_name":"kozeljko"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702046930,"creation_date":1702046930,"question_id":77627368,"body_markdown":"We have a table with timeseries data, that contains 700M entries. Each datapoint is defined by **timestamp** and **measurementPointId** columns that make it unique.\r\n\r\nWe have two indexes:\r\n\r\n - Index A that uses only timestamp column.\r\n - Index B that uses both timestamp and measurementPointId\r\n\r\nWe are accessing the database from our Java EE application that runs in WildFly 26. We use JPA with Hibernate as the provider.\r\n\r\nMost of our operations run on Index B, but we don&#39;t force it. SQL Server is the one that determines which index is used.\r\n\r\nUntil recently, it always picked B, but now it occassionally picked index A. We fixed it with running `UPDATE STATISTICS TimeSeries`, but this doesn&#39;t feel like a long term fix.\r\n\r\nIs it possible to force JPA/Hibernate to always pick Index B, no matter what? Maybe with a hint?","title":"How to force JPA/Hibernate to use specific index in SQL Server","body":"<p>We have a table with timeseries data, that contains 700M entries. Each datapoint is defined by <strong>timestamp</strong> and <strong>measurementPointId</strong> columns that make it unique.</p>\n<p>We have two indexes:</p>\n<ul>\n<li>Index A that uses only timestamp column.</li>\n<li>Index B that uses both timestamp and measurementPointId</li>\n</ul>\n<p>We are accessing the database from our Java EE application that runs in WildFly 26. We use JPA with Hibernate as the provider.</p>\n<p>Most of our operations run on Index B, but we don't force it. SQL Server is the one that determines which index is used.</p>\n<p>Until recently, it always picked B, but now it occassionally picked index A. We fixed it with running <code>UPDATE STATISTICS TimeSeries</code>, but this doesn't feel like a long term fix.</p>\n<p>Is it possible to force JPA/Hibernate to always pick Index B, no matter what? Maybe with a hint?</p>\n"},{"tags":["java","linux","ubuntu","nio","samba"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1702047364,"post_id":77627164,"comment_id":136853100,"body_markdown":"Java using the nio implementation for Unix file systems may be confused by the SMB mount. Do you have the same issue with a pure native path?","body":"Java using the nio implementation for Unix file systems may be confused by the SMB mount. Do you have the same issue with a pure native path?"}],"answers":[{"comments":[{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1702046973,"post_id":77627326,"comment_id":136853027,"body_markdown":"This makes sense. Do you think `CREATE_NEW` vs `CREATE` require different permissions as well? I just updated my question.","body":"This makes sense. Do you think <code>CREATE_NEW</code> vs <code>CREATE</code> require different permissions as well? I just updated my question."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702047560,"post_id":77627326,"comment_id":136853146,"body_markdown":"@CardinalSystem both of those require **write** / **Create Files** on the folder.  With `CREATE` and a file that already exists, you will also need appropriate permissions on the existing file, in this case **write** / **Write Data**.  If the file does not already exist, however, then `CREATE` should not require any permissions that `CREATE_NEW` does not also require.","body":"@CardinalSystem both of those require <b>write</b> / <b>Create Files</b> on the folder.  With <code>CREATE</code> and a file that already exists, you will also need appropriate permissions on the existing file, in this case <b>write</b> / <b>Write Data</b>.  If the file does not already exist, however, then <code>CREATE</code> should not require any permissions that <code>CREATE_NEW</code> does not also require."}],"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702046384,"creation_date":1702046384,"answer_id":77627326,"question_id":77627164,"body_markdown":"&gt; Why is this happening?\r\n\r\nThe two operations you are comparing are not equivalent.  Although the details differ between Windows and Linux, modifying the contents of a file, including truncating it to length zero, is a different operation, requiring different permissions, than is deleting the same file:\r\n\r\n - In Unix, truncating an existing file requires **write** permission *on the file*, whereas deleting it from a directory requires **write** permission *on the directory*.\r\n\r\n - In Windows / NTFS, you need the **Write Data** permission on a file to modify that file&#39;s content, including truncating it, but you need either either **Delete** permission on the file *or* **Delete Subfolders and Files** on its directory to delete it.\r\n\r\nSince you are denied access to truncate the file, you must not have had **write** / **Write Data** on the file.  Since you were able to delete it, you most likely had **write** / **Delete Subfolders and Files** on the directory, but it is also possible that you had **Delete** (but not **Write Data**) on the file.  The distinction between these will not be reflected in the permissions shown on the Linux side, if even it does any permissions mapping at all.\r\n","title":"Why does StandardOpenOption.CREATE not work on SMB via Ubuntu?","body":"<blockquote>\n<p>Why is this happening?</p>\n</blockquote>\n<p>The two operations you are comparing are not equivalent.  Although the details differ between Windows and Linux, modifying the contents of a file, including truncating it to length zero, is a different operation, requiring different permissions, than is deleting the same file:</p>\n<ul>\n<li><p>In Unix, truncating an existing file requires <strong>write</strong> permission <em>on the file</em>, whereas deleting it from a directory requires <strong>write</strong> permission <em>on the directory</em>.</p>\n</li>\n<li><p>In Windows / NTFS, you need the <strong>Write Data</strong> permission on a file to modify that file's content, including truncating it, but you need either either <strong>Delete</strong> permission on the file <em>or</em> <strong>Delete Subfolders and Files</strong> on its directory to delete it.</p>\n</li>\n</ul>\n<p>Since you are denied access to truncate the file, you must not have had <strong>write</strong> / <strong>Write Data</strong> on the file.  Since you were able to delete it, you most likely had <strong>write</strong> / <strong>Delete Subfolders and Files</strong> on the directory, but it is also possible that you had <strong>Delete</strong> (but not <strong>Write Data</strong>) on the file.  The distinction between these will not be reflected in the permissions shown on the Linux side, if even it does any permissions mapping at all.</p>\n"}],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77627326,"answer_count":1,"score":1,"last_activity_date":1702046893,"creation_date":1702044906,"question_id":77627164,"body_markdown":"I have a Windows file server which is mounted to an Ubuntu server at `/mnt/DrawingsPB`. The mount point is using the SMB protocol to manage files on the Windows server.\r\n\r\nI am trying to create a file and overwrite it if it already exists:\r\n\r\n    private Path drawingsTargetDirectory = Paths.get(&quot;/mnt/DrawingsPB/Test&quot;);\r\n\r\n\tpublic OutputStream getOutputStream() throws IOException {\r\n\t\tPath directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\r\n\t\tFiles.createDirectories(directory);\r\n\t\tPath path = directory.resolve(&quot;TestFile.txt&quot;);\r\n\t\treturn Files.newOutputStream(path, StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING,\r\n\t\t\t\tStandardOpenOption.WRITE);\r\n\t}\r\n\r\nThis is throwing an [`AccessDeniedException`][1]:\r\n\r\n    Caused by: java.nio.file.AccessDeniedException: /mnt/DrawingsPB/Test/TestDir/TestFile.txt\r\n    \tat sun.nio.fs.UnixException.translateToIOException(UnixException.java:84) [rt.jar:1.8.0_382]\r\n    \tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) [rt.jar:1.8.0_382]\r\n    \tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) [rt.jar:1.8.0_382]\r\n    \tat sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) [rt.jar:1.8.0_382]\r\n    \tat java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:434) [rt.jar:1.8.0_382]\r\n    \tat java.nio.file.Files.newOutputStream(Files.java:216) [rt.jar:1.8.0_382]\r\n    \tat com.company.router.drawing.impl.FileSystemStreamProvider.lambda$4(FileSystemStreamProvider.java:75) [classes:]\r\n    \t... 50 more\r\n\r\nHowever, if I do a manual check-and-delete and change `CREATE` to `CREATE_NEW`, it does not fail:\r\n\r\n\tpublic OutputStream getOutputStream() throws IOException {\r\n\t\tPath directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\r\n\t\tFiles.createDirectories(directory);\r\n\t\tPath path = directory.resolve(&quot;TestFile.txt&quot;);\r\n\t\tif (Files.exists(path))\r\n\t\t\tFiles.delete(path); // Works\r\n\t\treturn Files.newOutputStream(path, StandardOpenOption.CREATE_NEW, StandardOpenOption.TRUNCATE_EXISTING,\r\n                StandardOpenOption.WRITE); // Works\r\n\t}\r\n\r\nWhy is this happening?\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/AccessDeniedException.html","title":"Why does StandardOpenOption.CREATE not work on SMB via Ubuntu?","body":"<p>I have a Windows file server which is mounted to an Ubuntu server at <code>/mnt/DrawingsPB</code>. The mount point is using the SMB protocol to manage files on the Windows server.</p>\n<p>I am trying to create a file and overwrite it if it already exists:</p>\n<pre><code>private Path drawingsTargetDirectory = Paths.get(&quot;/mnt/DrawingsPB/Test&quot;);\n\npublic OutputStream getOutputStream() throws IOException {\n    Path directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\n    Files.createDirectories(directory);\n    Path path = directory.resolve(&quot;TestFile.txt&quot;);\n    return Files.newOutputStream(path, StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING,\n            StandardOpenOption.WRITE);\n}\n</code></pre>\n<p>This is throwing an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/AccessDeniedException.html\" rel=\"nofollow noreferrer\"><code>AccessDeniedException</code></a>:</p>\n<pre><code>Caused by: java.nio.file.AccessDeniedException: /mnt/DrawingsPB/Test/TestDir/TestFile.txt\n    at sun.nio.fs.UnixException.translateToIOException(UnixException.java:84) [rt.jar:1.8.0_382]\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) [rt.jar:1.8.0_382]\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) [rt.jar:1.8.0_382]\n    at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) [rt.jar:1.8.0_382]\n    at java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:434) [rt.jar:1.8.0_382]\n    at java.nio.file.Files.newOutputStream(Files.java:216) [rt.jar:1.8.0_382]\n    at com.company.router.drawing.impl.FileSystemStreamProvider.lambda$4(FileSystemStreamProvider.java:75) [classes:]\n    ... 50 more\n</code></pre>\n<p>However, if I do a manual check-and-delete and change <code>CREATE</code> to <code>CREATE_NEW</code>, it does not fail:</p>\n<pre><code>public OutputStream getOutputStream() throws IOException {\n    Path directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\n    Files.createDirectories(directory);\n    Path path = directory.resolve(&quot;TestFile.txt&quot;);\n    if (Files.exists(path))\n        Files.delete(path); // Works\n    return Files.newOutputStream(path, StandardOpenOption.CREATE_NEW, StandardOpenOption.TRUNCATE_EXISTING,\n            StandardOpenOption.WRITE); // Works\n}\n</code></pre>\n<p>Why is this happening?</p>\n"},{"tags":["java","string","type-conversion","integer"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":3,"creation_date":1677721804,"post_id":5585779,"comment_id":133395903,"body_markdown":"**Mod note**: This question has **30 answers** and another **82 deleted answers**, most of which were removed for repeating existing answers.  If you are considering adding a new answer to this question, please ensure that you&#39;ve read all the existing answers and confirmed that your answer adds something new and useful.","body":"<b>Mod note</b>: This question has <b>30 answers</b> and another <b>82 deleted answers</b>, most of which were removed for repeating existing answers.  If you are considering adding a new answer to this question, please ensure that you&#39;ve read all the existing answers and confirmed that your answer adds something new and useful."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1677737297,"post_id":5585779,"comment_id":133397770,"body_markdown":"And seriously ... just &#39;cos you can think of yet another wacky way to do the conversion ... don&#39;t imagine that telling everyone about it is actually a helpful / useful thing to do.","body":"And seriously ... just &#39;cos you can think of yet another wacky way to do the conversion ... don&#39;t imagine that telling everyone about it is actually a helpful / useful thing to do."}],"answers":[{"comments":[{"owner":{"account_id":5007360,"reputation":1992,"user_id":4024628,"display_name":"Allison"},"score":43,"creation_date":1516181860,"post_id":5585800,"comment_id":83580108,"body_markdown":"In addition to catching a NumberFormatException, the user should also be careful about the length of the strings they&#39;re passing in; if they&#39;re long enough to overflow an integer, they might want to consider using Long::parseLong instead.","body":"In addition to catching a NumberFormatException, the user should also be careful about the length of the strings they&#39;re passing in; if they&#39;re long enough to overflow an integer, they might want to consider using Long::parseLong instead."},{"owner":{"account_id":18364065,"reputation":105,"user_id":13375547,"display_name":"tamegajr"},"score":0,"creation_date":1680092548,"post_id":5585800,"comment_id":133837907,"body_markdown":"This is the most complete explanation and the comments by Allison covers the problem of Long numbers passed as a String!!!!","body":"This is the most complete explanation and the comments by Allison covers the problem of Long numbers passed as a String!!!!"}],"tags":[],"owner":{"account_id":14531,"reputation":118870,"user_id":29995,"accept_rate":77,"display_name":"Rob Hruska"},"comment_count":2,"down_vote_count":4,"up_vote_count":4523,"is_accepted":true,"score":4519,"last_activity_date":1675786917,"creation_date":1302200981,"answer_id":5585800,"question_id":5585779,"body_markdown":"    String myString = &quot;1234&quot;;\r\n    int foo = Integer.parseInt(myString);\r\n\r\nIf you look at the [Java documentation][1] you&#39;ll notice the &quot;catch&quot; is that this function can throw a `NumberFormatException`, which you can handle:\r\n```java\r\nint foo;\r\ntry {\r\n   foo = Integer.parseInt(myString);\r\n}\r\ncatch (NumberFormatException e) {\r\n   foo = 0;\r\n}\r\n```\r\n(This treatment defaults a malformed number to `0`, but you can do something else if you like.)\r\n\r\nAlternatively, you can use an `Ints` method from the Guava library, which in combination with Java 8&#39;s `Optional`, makes for a powerful and concise way to convert a string into an int:\r\n\r\n    import com.google.common.primitives.Ints;\r\n\r\n    int foo = Optional.ofNullable(myString)\r\n     .map(Ints::tryParse)\r\n     .orElse(0)\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\r\n","title":"How do I convert a String to an int in Java?","body":"<pre><code>String myString = &quot;1234&quot;;\nint foo = Integer.parseInt(myString);\n</code></pre>\n<p>If you look at the <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"noreferrer\">Java documentation</a> you'll notice the &quot;catch&quot; is that this function can throw a <code>NumberFormatException</code>, which you can handle:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int foo;\ntry {\n   foo = Integer.parseInt(myString);\n}\ncatch (NumberFormatException e) {\n   foo = 0;\n}\n</code></pre>\n<p>(This treatment defaults a malformed number to <code>0</code>, but you can do something else if you like.)</p>\n<p>Alternatively, you can use an <code>Ints</code> method from the Guava library, which in combination with Java 8's <code>Optional</code>, makes for a powerful and concise way to convert a string into an int:</p>\n<pre><code>import com.google.common.primitives.Ints;\n\nint foo = Optional.ofNullable(myString)\n .map(Ints::tryParse)\n .orElse(0)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":50566,"reputation":9545,"user_id":150884,"accept_rate":83,"display_name":"hertzsprung"},"score":88,"creation_date":1368952700,"post_id":5585876,"comment_id":23918423,"body_markdown":"For the differences between the two methods, see [this question](http://stackoverflow.com/questions/508665/difference-between-parseint-and-valueof-in-java)","body":"For the differences between the two methods, see <a href=\"http://stackoverflow.com/questions/508665/difference-between-parseint-and-valueof-in-java\">this question</a>"},{"owner":{"account_id":223484,"reputation":61176,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"score":23,"creation_date":1414486544,"post_id":5585876,"comment_id":41821241,"body_markdown":"`valueOf` method is just `return valueOf(parseInt(string));`","body":"<code>valueOf</code> method is just <code>return valueOf(parseInt(string));</code>"}],"tags":[],"owner":{"account_id":279561,"reputation":26283,"user_id":574799,"accept_rate":74,"display_name":"lukastymo"},"comment_count":2,"down_vote_count":1,"up_vote_count":780,"is_accepted":false,"score":779,"last_activity_date":1435695343,"creation_date":1302201400,"answer_id":5585876,"question_id":5585779,"body_markdown":"For example, here are two ways:\r\n\r\n    Integer x = Integer.valueOf(str);\r\n    // or\r\n    int y = Integer.parseInt(str);\r\n\r\nThere is a slight difference between these methods: \r\n\r\n- `valueOf` returns a new or cached instance of `java.lang.Integer`\r\n- `parseInt` returns primitive `int`. \r\n\r\nThe same is for all cases: `Short.valueOf`/`parseShort`, `Long.valueOf`/`parseLong`, etc.\r\n","title":"How do I convert a String to an int in Java?","body":"<p>For example, here are two ways:</p>\n\n<pre><code>Integer x = Integer.valueOf(str);\n// or\nint y = Integer.parseInt(str);\n</code></pre>\n\n<p>There is a slight difference between these methods: </p>\n\n<ul>\n<li><code>valueOf</code> returns a new or cached instance of <code>java.lang.Integer</code></li>\n<li><code>parseInt</code> returns primitive <code>int</code>. </li>\n</ul>\n\n<p>The same is for all cases: <code>Short.valueOf</code>/<code>parseShort</code>, <code>Long.valueOf</code>/<code>parseLong</code>, etc.</p>\n"},{"comments":[{"owner":{"account_id":5140045,"reputation":112686,"user_id":4117728,"accept_rate":91,"display_name":"463035818_is_not_an_ai"},"score":0,"creation_date":1526457687,"post_id":16293980,"comment_id":87746900,"body_markdown":"how can I parse &quot;26263Hello&quot; ? I want to extract 26263 in that case","body":"how can I parse &quot;26263Hello&quot; ? I want to extract 26263 in that case"},{"owner":{"account_id":5226322,"reputation":2046,"user_id":4178262,"display_name":"Mark Stewart"},"score":1,"creation_date":1528474613,"post_id":16293980,"comment_id":88536945,"body_markdown":"@user463035818 - See https://docs.oracle.com/javase/8/docs/api/java/util/regex/package-summary.html - a regular expresssion pattern of `&quot;([0-9]+)&quot;` will &quot;capture&quot; the first sequence of one or more digits one through nine.  Look at the `Matcher` class in that package.","body":"@user463035818 - See <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/package-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/regex/&hellip;</a> - a regular expresssion pattern of <code>&quot;([0-9]+)&quot;</code> will &quot;capture&quot; the first sequence of one or more digits one through nine.  Look at the <code>Matcher</code> class in that package."}],"tags":[],"owner":{"account_id":117057,"reputation":3881,"user_id":306711,"accept_rate":100,"display_name":"Ali Akdurak"},"comment_count":2,"down_vote_count":1,"up_vote_count":274,"is_accepted":false,"score":273,"last_activity_date":1455665736,"creation_date":1367304895,"answer_id":16293980,"question_id":5585779,"body_markdown":"Well, a very important point to consider is that the Integer parser throws NumberFormatException as stated in [Javadoc][1]. \r\n\r\n    int foo;\r\n    String StringThatCouldBeANumberOrNot = &quot;26263Hello&quot;; //will throw exception\r\n    String StringThatCouldBeANumberOrNot2 = &quot;26263&quot;; //will not throw exception\r\n    try {\r\n          foo = Integer.parseInt(StringThatCouldBeANumberOrNot);\r\n    } catch (NumberFormatException e) {\r\n          //Will Throw exception!\r\n          //do something! anything to handle the exception.\r\n    }\r\n\r\n    try {\r\n          foo = Integer.parseInt(StringThatCouldBeANumberOrNot2);\r\n    } catch (NumberFormatException e) {\r\n          //No problem this time, but still it is good practice to care about exceptions.\r\n          //Never trust user input :)\r\n          //Do something! Anything to handle the exception.\r\n    }\r\n\r\nIt is important to handle this exception when trying to get integer values from split arguments or dynamically parsing something.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29","title":"How do I convert a String to an int in Java?","body":"<p>Well, a very important point to consider is that the Integer parser throws NumberFormatException as stated in <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29\" rel=\"noreferrer\">Javadoc</a>. </p>\n\n<pre><code>int foo;\nString StringThatCouldBeANumberOrNot = \"26263Hello\"; //will throw exception\nString StringThatCouldBeANumberOrNot2 = \"26263\"; //will not throw exception\ntry {\n      foo = Integer.parseInt(StringThatCouldBeANumberOrNot);\n} catch (NumberFormatException e) {\n      //Will Throw exception!\n      //do something! anything to handle the exception.\n}\n\ntry {\n      foo = Integer.parseInt(StringThatCouldBeANumberOrNot2);\n} catch (NumberFormatException e) {\n      //No problem this time, but still it is good practice to care about exceptions.\n      //Never trust user input :)\n      //Do something! Anything to handle the exception.\n}\n</code></pre>\n\n<p>It is important to handle this exception when trying to get integer values from split arguments or dynamically parsing something.</p>\n"},{"comments":[{"owner":{"account_id":1042260,"reputation":452,"user_id":1365879,"accept_rate":75,"display_name":"yohm"},"score":27,"creation_date":1413949396,"post_id":18731580,"comment_id":41632214,"body_markdown":"What if the input is greater than 2^32?\nWhat if the input contains non-numeric characters?","body":"What if the input is greater than 2^32? What if the input contains non-numeric characters?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":98,"creation_date":1451621777,"post_id":18731580,"comment_id":56849715,"body_markdown":"One of the things a programmer must learn on joining the workforce, if not before, is never to re-invent wheels.  This may be a fun exercise, but don&#39;t expect your code to pass code review if you do this kind of thing in a commercial setting.","body":"One of the things a programmer must learn on joining the workforce, if not before, is never to re-invent wheels.  This may be a fun exercise, but don&#39;t expect your code to pass code review if you do this kind of thing in a commercial setting."},{"owner":{"account_id":1351039,"reputation":7927,"user_id":1290668,"accept_rate":73,"display_name":"Billz"},"score":0,"creation_date":1451625509,"post_id":18731580,"comment_id":56850266,"body_markdown":"@yohm those are special case; you can handle with long and some regex; however, by then you can use parseInt.","body":"@yohm those are special case; you can handle with long and some regex; however, by then you can use parseInt."},{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":50,"creation_date":1469726823,"post_id":18731580,"comment_id":64669135,"body_markdown":"-1 Sorry, but this is a pretty poor algorithm, with lots of limitations, no error handling, and some weird anomalies (eg &quot;&quot; gives an exception, &quot;-&quot; will produce 0, and &quot;+&quot; produces -5). Why would anyone choose this over `Integer.parseInt(s)`? - I see the point about this being an interview question, but a) that doesn&#39;t imply you&#39;d do it this way (which is what the questioner asked), and b) this answer&#39;s a pretty bad example anyway.","body":"-1 Sorry, but this is a pretty poor algorithm, with lots of limitations, no error handling, and some weird anomalies (eg &quot;&quot; gives an exception, &quot;-&quot; will produce 0, and &quot;+&quot; produces -5). Why would anyone choose this over <code>Integer.parseInt(s)</code>? - I see the point about this being an interview question, but a) that doesn&#39;t imply you&#39;d do it this way (which is what the questioner asked), and b) this answer&#39;s a pretty bad example anyway."},{"owner":{"account_id":4487142,"reputation":1255,"user_id":3649372,"display_name":"Nathan Adams"},"score":1,"creation_date":1556734626,"post_id":18731580,"comment_id":98534766,"body_markdown":"-1 because what if I want to parse a base 31 int? Integer.parseInt(str, 31) is a one liner to do that. Slightly facetious comment, but serious point underneath. Never re-invent wheels when someone else has already put the work in","body":"-1 because what if I want to parse a base 31 int? Integer.parseInt(str, 31) is a one liner to do that. Slightly facetious comment, but serious point underneath. Never re-invent wheels when someone else has already put the work in"}],"tags":[],"owner":{"account_id":1351039,"reputation":7927,"user_id":1290668,"accept_rate":73,"display_name":"Billz"},"comment_count":5,"down_vote_count":52,"up_vote_count":145,"is_accepted":false,"score":93,"last_activity_date":1688557726,"creation_date":1378865304,"answer_id":18731580,"question_id":5585779,"body_markdown":"Do it manually:\r\n\r\n```java\r\n    public static int strToInt(String str) {\r\n        int i = 0;\r\n        int num = 0;\r\n        boolean isNeg = false;\r\n\r\n        // Check for negative sign; if it&#39;s there, set the isNeg flag\r\n        if (str.charAt(0) == &#39;-&#39;) {\r\n            isNeg = true;\r\n            i = 1;\r\n        }\r\n\r\n        // Process each character of the string;\r\n        while (i &lt; str.length()) {\r\n            num *= 10;\r\n            num += str.charAt(i++) - &#39;0&#39;; // Minus the ASCII code of &#39;0&#39; to get the value of the charAt(i++).\r\n        }\r\n\r\n        if (isNeg)\r\n            num = -num;\r\n\r\n        return num;\r\n    }\r\n```\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Do it manually:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static int strToInt(String str) {\n        int i = 0;\n        int num = 0;\n        boolean isNeg = false;\n\n        // Check for negative sign; if it's there, set the isNeg flag\n        if (str.charAt(0) == '-') {\n            isNeg = true;\n            i = 1;\n        }\n\n        // Process each character of the string;\n        while (i &lt; str.length()) {\n            num *= 10;\n            num += str.charAt(i++) - '0'; // Minus the ASCII code of '0' to get the value of the charAt(i++).\n        }\n\n        if (isNeg)\n            num = -num;\n\n        return num;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user289086"},"score":21,"creation_date":1413036014,"post_id":19477740,"comment_id":41296795,"body_markdown":"This will cause `-42` to be parsed as `42`.","body":"This will cause <code>-42</code> to be parsed as <code>42</code>."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1677721336,"post_id":19477740,"comment_id":133395855,"body_markdown":"This will also misparse non-integral numbers (e.g., `4.2` as `42`) if that could be in your data.","body":"This will also misparse non-integral numbers (e.g., <code>4.2</code> as <code>42</code>) if that could be in your data."}],"tags":[],"owner":{"account_id":2180366,"reputation":2655,"user_id":1930011,"accept_rate":61,"display_name":"Thijser"},"comment_count":2,"down_vote_count":13,"up_vote_count":33,"is_accepted":false,"score":20,"last_activity_date":1574613582,"creation_date":1382274709,"answer_id":19477740,"question_id":5585779,"body_markdown":"You can also begin by removing all non-numerical characters and then parsing the integer:\r\n\r\n    String mystr = mystr.replaceAll(&quot;[^\\\\d]&quot;, &quot;&quot;);\r\n    int number = Integer.parseInt(mystr);\r\n\r\nBut be warned that this only works for non-negative numbers. \r\n","title":"How do I convert a String to an int in Java?","body":"<p>You can also begin by removing all non-numerical characters and then parsing the integer:</p>\n\n<pre><code>String mystr = mystr.replaceAll(\"[^\\\\d]\", \"\");\nint number = Integer.parseInt(mystr);\n</code></pre>\n\n<p>But be warned that this only works for non-negative numbers. </p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":13,"creation_date":1457088461,"post_id":22547555,"comment_id":59257890,"body_markdown":"It’s not clear what kind of problem this answer tries to solve, first, why anyone should ever have that restriction you describe, second, why you have to look at an ASCII table as you can simply use `&#39;0&#39;` for the character instead of `48` and never have to bother with its actual numeric value. Third, the entire detour with `double` values makes no sense at all as you are dividing by ten, just to multiply with ten afterwards. The result simply is `semilastdigit * 10 + lastdigit` as learnt in elementary school, when the decimal system was introduced…","body":"It’s not clear what kind of problem this answer tries to solve, first, why anyone should ever have that restriction you describe, second, why you have to look at an ASCII table as you can simply use <code>&#39;0&#39;</code> for the character instead of <code>48</code> and never have to bother with its actual numeric value. Third, the entire detour with <code>double</code> values makes no sense at all as you are dividing by ten, just to multiply with ten afterwards. The result simply is <code>semilastdigit * 10 + lastdigit</code> as learnt in elementary school, when the decimal system was introduced…"}],"tags":[],"owner":{"account_id":3761540,"reputation":693,"user_id":3126359,"accept_rate":83,"display_name":"Oak"},"comment_count":1,"down_vote_count":8,"up_vote_count":54,"is_accepted":false,"score":46,"last_activity_date":1598024758,"creation_date":1395359479,"answer_id":22547555,"question_id":5585779,"body_markdown":"Currently I&#39;m doing an assignment for college, where I can&#39;t use certain expressions, such as the ones above, and by looking at the ASCII table, I managed to do it. It&#39;s a far more complex code, but it could help others that are restricted like I was.\r\n\r\nThe first thing to do is to receive the input, in this case, a string of digits; I&#39;ll call it `String number`, and in this case, I&#39;ll exemplify it using the number 12, therefore `String number = &quot;12&quot;;`\r\n\r\nAnother limitation was the fact that I couldn&#39;t use repetitive cycles, therefore, a `for` cycle (which would have been perfect) can&#39;t be used either. This limits us a bit, but then again, that&#39;s the goal. Since I only needed two digits (taking the last two digits), a simple `charAt`solved it:\r\n\r\n     // Obtaining the integer values of the char 1 and 2 in ASCII\r\n     int semilastdigitASCII = number.charAt(number.length() - 2);\r\n     int lastdigitASCII = number.charAt(number.length() - 1);\r\n\r\nHaving the codes, we just need to look up at the table, and make the necessary adjustments:\r\n\r\n     double semilastdigit = semilastdigitASCII - 48;  // A quick look, and -48 is the key\r\n     double lastdigit = lastdigitASCII - 48;\r\n\r\nNow, why double? Well, because of a really &quot;weird&quot; step. Currently we have two doubles, 1 and 2, but we need to turn it into 12, there isn&#39;t any mathematic operation that we can do.\r\n\r\nWe&#39;re dividing the latter (lastdigit) by 10 in the fashion ` 2/10 = 0.2 ` (hence why double) like this:\r\n\r\n     lastdigit = lastdigit / 10;\r\n\r\nThis is merely playing with numbers. We were turning the last digit into a decimal. But now, look at what happens:\r\n\r\n     double jointdigits = semilastdigit + lastdigit; // 1.0 + 0.2 = 1.2\r\n\r\nWithout getting too into the math, we&#39;re simply isolating units the digits of a number. You see, since we only consider 0-9, dividing by a multiple of 10 is like creating a &quot;box&quot; where you store it (think back at when your first grade teacher explained you what a unit and a hundred were). So:\r\n\r\n     int finalnumber = (int) (jointdigits*10); // Be sure to use parentheses &quot;()&quot;\r\n\r\nAnd there you go. You turned a String of digits (in this case, two digits), into an integer composed of those two digits, considering the following limitations:\r\n\r\n- No repetitive cycles\r\n- No &quot;Magic&quot; Expressions such as parseInt\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Currently I'm doing an assignment for college, where I can't use certain expressions, such as the ones above, and by looking at the ASCII table, I managed to do it. It's a far more complex code, but it could help others that are restricted like I was.</p>\n<p>The first thing to do is to receive the input, in this case, a string of digits; I'll call it <code>String number</code>, and in this case, I'll exemplify it using the number 12, therefore <code>String number = &quot;12&quot;;</code></p>\n<p>Another limitation was the fact that I couldn't use repetitive cycles, therefore, a <code>for</code> cycle (which would have been perfect) can't be used either. This limits us a bit, but then again, that's the goal. Since I only needed two digits (taking the last two digits), a simple <code>charAt</code>solved it:</p>\n<pre><code> // Obtaining the integer values of the char 1 and 2 in ASCII\n int semilastdigitASCII = number.charAt(number.length() - 2);\n int lastdigitASCII = number.charAt(number.length() - 1);\n</code></pre>\n<p>Having the codes, we just need to look up at the table, and make the necessary adjustments:</p>\n<pre><code> double semilastdigit = semilastdigitASCII - 48;  // A quick look, and -48 is the key\n double lastdigit = lastdigitASCII - 48;\n</code></pre>\n<p>Now, why double? Well, because of a really &quot;weird&quot; step. Currently we have two doubles, 1 and 2, but we need to turn it into 12, there isn't any mathematic operation that we can do.</p>\n<p>We're dividing the latter (lastdigit) by 10 in the fashion <code>2/10 = 0.2</code> (hence why double) like this:</p>\n<pre><code> lastdigit = lastdigit / 10;\n</code></pre>\n<p>This is merely playing with numbers. We were turning the last digit into a decimal. But now, look at what happens:</p>\n<pre><code> double jointdigits = semilastdigit + lastdigit; // 1.0 + 0.2 = 1.2\n</code></pre>\n<p>Without getting too into the math, we're simply isolating units the digits of a number. You see, since we only consider 0-9, dividing by a multiple of 10 is like creating a &quot;box&quot; where you store it (think back at when your first grade teacher explained you what a unit and a hundred were). So:</p>\n<pre><code> int finalnumber = (int) (jointdigits*10); // Be sure to use parentheses &quot;()&quot;\n</code></pre>\n<p>And there you go. You turned a String of digits (in this case, two digits), into an integer composed of those two digits, considering the following limitations:</p>\n<ul>\n<li>No repetitive cycles</li>\n<li>No &quot;Magic&quot; Expressions such as parseInt</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2495474,"reputation":1022,"user_id":2172026,"display_name":"fitorec"},"comment_count":0,"down_vote_count":3,"up_vote_count":26,"is_accepted":false,"score":23,"last_activity_date":1688558045,"creation_date":1400859481,"answer_id":23833311,"question_id":5585779,"body_markdown":"I have a solution, but I do not know how effective it is. But it works well, and I think you could improve it. On the other hand, I did a couple of tests with [JUnit][1] which step correctly. I attached the function and testing:\r\n\r\n```java\r\n    public static Integer str2Int(String str) {\r\n        Integer result = null;\r\n        if (null == str || 0 == str.length()) {\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            result = Integer.parseInt(str);\r\n        } \r\n        catch (NumberFormatException e) {\r\n            String negativeMode = &quot;&quot;;\r\n            if (str.indexOf(&#39;-&#39;) != -1)\r\n                negativeMode = &quot;-&quot;;\r\n\r\n            str = str.replaceAll(&quot;-&quot;, &quot;&quot;);\r\n\r\n            if (str.indexOf(&#39;.&#39;) != -1) {\r\n                str = str.substring(0, str.indexOf(&#39;.&#39;));\r\n                if (str.length() == 0) {\r\n                    return (Integer) 0;\r\n                }\r\n            }\r\n\r\n            String strNum = str.replaceAll(&quot;[^\\\\d]&quot;, &quot;&quot; );\r\n            if (0 == strNum.length()) {\r\n                return null;\r\n            }\r\n\r\n            result = Integer.parseInt(negativeMode + strNum);\r\n        }\r\n\r\n        return result;\r\n    }\r\n```\r\n\r\nTesting with JUnit:\r\n\r\n    @Test\r\n    public void testStr2Int() {\r\n        assertEquals(&quot;is numeric&quot;, (Integer) (-5), Helper.str2Int(&quot;-5&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 50, Helper.str2Int(&quot;50.00&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 20, Helper.str2Int(&quot;$ 20.90&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 5, Helper.str2Int(&quot; 5.321&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 1000, Helper.str2Int(&quot;1,000.50&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;0.50&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;.50&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;-.10&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) Integer.MAX_VALUE, Helper.str2Int(&quot;&quot; + Integer.MAX_VALUE));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) Integer.MIN_VALUE, Helper.str2Int(&quot;&quot; + Integer.MIN_VALUE));\r\n        assertEquals(&quot;Not is numeric&quot;, null, Helper.str2Int(&quot;czv.,xcvsa&quot;));\r\n\r\n        /**\r\n         * Dynamic test\r\n         */\r\n        for (Integer num = 0; num &lt; 1000; num++) {\r\n            for (int spaces = 1; spaces &lt; 6; spaces++) {\r\n                String numStr = String.format(&quot;%0&quot; + spaces + &quot;d&quot;, num);\r\n                Integer numNeg = num * -1;\r\n                assertEquals(numStr + &quot;: is numeric&quot;, num, Helper.str2Int(numStr));\r\n                assertEquals(numNeg + &quot;: is numeric&quot;, numNeg, Helper.str2Int(&quot;- &quot; + numStr));\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://en.wikipedia.org/wiki/JUnit\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>I have a solution, but I do not know how effective it is. But it works well, and I think you could improve it. On the other hand, I did a couple of tests with <a href=\"http://en.wikipedia.org/wiki/JUnit\" rel=\"nofollow noreferrer\">JUnit</a> which step correctly. I attached the function and testing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Integer str2Int(String str) {\n        Integer result = null;\n        if (null == str || 0 == str.length()) {\n            return null;\n        }\n\n        try {\n            result = Integer.parseInt(str);\n        } \n        catch (NumberFormatException e) {\n            String negativeMode = &quot;&quot;;\n            if (str.indexOf('-') != -1)\n                negativeMode = &quot;-&quot;;\n\n            str = str.replaceAll(&quot;-&quot;, &quot;&quot;);\n\n            if (str.indexOf('.') != -1) {\n                str = str.substring(0, str.indexOf('.'));\n                if (str.length() == 0) {\n                    return (Integer) 0;\n                }\n            }\n\n            String strNum = str.replaceAll(&quot;[^\\\\d]&quot;, &quot;&quot; );\n            if (0 == strNum.length()) {\n                return null;\n            }\n\n            result = Integer.parseInt(negativeMode + strNum);\n        }\n\n        return result;\n    }\n</code></pre>\n<p>Testing with JUnit:</p>\n<pre><code>@Test\npublic void testStr2Int() {\n    assertEquals(&quot;is numeric&quot;, (Integer) (-5), Helper.str2Int(&quot;-5&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 50, Helper.str2Int(&quot;50.00&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 20, Helper.str2Int(&quot;$ 20.90&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 5, Helper.str2Int(&quot; 5.321&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 1000, Helper.str2Int(&quot;1,000.50&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;0.50&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;.50&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;-.10&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) Integer.MAX_VALUE, Helper.str2Int(&quot;&quot; + Integer.MAX_VALUE));\n    assertEquals(&quot;is numeric&quot;, (Integer) Integer.MIN_VALUE, Helper.str2Int(&quot;&quot; + Integer.MIN_VALUE));\n    assertEquals(&quot;Not is numeric&quot;, null, Helper.str2Int(&quot;czv.,xcvsa&quot;));\n\n    /**\n     * Dynamic test\n     */\n    for (Integer num = 0; num &lt; 1000; num++) {\n        for (int spaces = 1; spaces &lt; 6; spaces++) {\n            String numStr = String.format(&quot;%0&quot; + spaces + &quot;d&quot;, num);\n            Integer numNeg = num * -1;\n            assertEquals(numStr + &quot;: is numeric&quot;, num, Helper.str2Int(numStr));\n            assertEquals(numNeg + &quot;: is numeric&quot;, numNeg, Helper.str2Int(&quot;- &quot; + numStr));\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8542,"reputation":9824,"user_id":15464,"display_name":"wnoise"},"score":41,"creation_date":1458659898,"post_id":32248950,"comment_id":59953898,"body_markdown":"You rarely want 0 to be used when an invalid number is parsed.","body":"You rarely want 0 to be used when an invalid number is parsed."},{"owner":{"account_id":3895768,"reputation":709,"user_id":3224854,"display_name":"etherous"},"score":15,"creation_date":1496355945,"post_id":32248950,"comment_id":75641722,"body_markdown":"@Ryboflavin No, it doesn&#39;t. One of those is a well-defined language semantic, and the other is an exception","body":"@Ryboflavin No, it doesn&#39;t. One of those is a well-defined language semantic, and the other is an exception"},{"owner":{"account_id":303225,"reputation":1793,"user_id":5690147,"display_name":"Yann Vo"},"score":1,"creation_date":1650447095,"post_id":32248950,"comment_id":127115983,"body_markdown":"You can also specify your own default value with the overloaded method [NumberUtils.toInt(String, int);](https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String,%20int))","body":"You can also specify your own default value with the overloaded method <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String,%20int)\" rel=\"nofollow noreferrer\">NumberUtils.toInt(String, int);</a>"}],"tags":[],"owner":{"account_id":2716952,"reputation":789,"user_id":2344115,"display_name":"Ryboflavin"},"comment_count":3,"down_vote_count":1,"up_vote_count":67,"is_accepted":false,"score":66,"last_activity_date":1457216728,"creation_date":1440677269,"answer_id":32248950,"question_id":5585779,"body_markdown":"An alternate solution is to use [Apache Commons&#39;][1] NumberUtils:\r\n\r\n    int num = NumberUtils.toInt(&quot;1234&quot;);\r\n\r\nThe Apache utility is nice because if the string is an invalid number format then 0 is always returned. Hence saving you the try catch block.\r\n\r\n[Apache NumberUtils API Version 3.4][2]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Commons\r\n  [2]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String)","title":"How do I convert a String to an int in Java?","body":"<p>An alternate solution is to use <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\">Apache Commons'</a> NumberUtils:</p>\n\n<pre><code>int num = NumberUtils.toInt(\"1234\");\n</code></pre>\n\n<p>The Apache utility is nice because if the string is an invalid number format then 0 is always returned. Hence saving you the try catch block.</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String)\">Apache NumberUtils API Version 3.4</a></p>\n"},{"tags":[],"owner":{"account_id":4641064,"reputation":619,"user_id":3760904,"accept_rate":50,"display_name":"Giridhar Kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1455666647,"creation_date":1445334695,"answer_id":33233407,"question_id":5585779,"body_markdown":"We can use the `parseInt(String str)` method of the `Integer` wrapper class for converting a String value to an integer value.\r\n\r\nFor example:\r\n\r\n    String strValue = &quot;12345&quot;;\r\n    Integer intValue = Integer.parseInt(strVal);\r\n\r\nThe `Integer` class also provides the `valueOf(String str)` method:\r\n\r\n    String strValue = &quot;12345&quot;;\r\n    Integer intValue = Integer.valueOf(strValue);\r\n\r\nWe can also use `toInt(String strValue)` of [NumberUtils Utility Class](https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html) for the conversion:\r\n\r\n    String strValue = &quot;12345&quot;;\r\n    Integer intValue = NumberUtils.toInt(strValue);","title":"How do I convert a String to an int in Java?","body":"<p>We can use the <code>parseInt(String str)</code> method of the <code>Integer</code> wrapper class for converting a String value to an integer value.</p>\n\n<p>For example:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = Integer.parseInt(strVal);\n</code></pre>\n\n<p>The <code>Integer</code> class also provides the <code>valueOf(String str)</code> method:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = Integer.valueOf(strValue);\n</code></pre>\n\n<p>We can also use <code>toInt(String strValue)</code> of <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html\">NumberUtils Utility Class</a> for the conversion:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = NumberUtils.toInt(strValue);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"comment_count":0,"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1688557826,"creation_date":1457311369,"answer_id":35834484,"question_id":5585779,"body_markdown":"### [`Integer.decode`][1]\r\n\r\nYou can also use `public static Integer decode(String nm) throws NumberFormatException`.\r\n\r\nIt also works for bases 8 and 16:\r\n\r\n```java\r\n    // base 10\r\n    Integer.parseInt(&quot;12&quot;);     // 12 - int\r\n    Integer.valueOf(&quot;12&quot;);      // 12 - Integer\r\n    Integer.decode(&quot;12&quot;);       // 12 - Integer\r\n\r\n    // base 8\r\n    // 10 (0,1,...,7,10,11,12)\r\n    Integer.parseInt(&quot;12&quot;, 8);  // 10 - int\r\n    Integer.valueOf(&quot;12&quot;, 8);   // 10 - Integer\r\n    Integer.decode(&quot;012&quot;);      // 10 - Integer\r\n\r\n    // base 16\r\n    // 18 (0,1,...,F,10,11,12)\r\n    Integer.parseInt(&quot;12&quot;, 16); // 18 - int\r\n    Integer.valueOf(&quot;12&quot;, 16);  // 18 - Integer\r\n    Integer.decode(&quot;#12&quot;);      // 18 - Integer\r\n    Integer.decode(&quot;0x12&quot;);     // 18 - Integer\r\n    Integer.decode(&quot;0X12&quot;);     // 18 - Integer\r\n\r\n    // base 2\r\n    Integer.parseInt(&quot;11&quot;, 2);  // 3 - int\r\n    Integer.valueOf(&quot;11&quot;, 2);   // 3 - Integer\r\n```\r\n\r\nIf you want to get `int` instead of `Integer` you can use:\r\n\r\n1. Unboxing:\r\n\r\n        int val = Integer.decode(&quot;12&quot;); \r\n\r\n2. `intValue()`:\r\n\r\n        Integer.decode(&quot;12&quot;).intValue();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#decode-java.lang.String-","title":"How do I convert a String to an int in Java?","body":"<h3><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#decode-java.lang.String-\" rel=\"nofollow noreferrer\"><code>Integer.decode</code></a></h3>\n<p>You can also use <code>public static Integer decode(String nm) throws NumberFormatException</code>.</p>\n<p>It also works for bases 8 and 16:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // base 10\n    Integer.parseInt(&quot;12&quot;);     // 12 - int\n    Integer.valueOf(&quot;12&quot;);      // 12 - Integer\n    Integer.decode(&quot;12&quot;);       // 12 - Integer\n\n    // base 8\n    // 10 (0,1,...,7,10,11,12)\n    Integer.parseInt(&quot;12&quot;, 8);  // 10 - int\n    Integer.valueOf(&quot;12&quot;, 8);   // 10 - Integer\n    Integer.decode(&quot;012&quot;);      // 10 - Integer\n\n    // base 16\n    // 18 (0,1,...,F,10,11,12)\n    Integer.parseInt(&quot;12&quot;, 16); // 18 - int\n    Integer.valueOf(&quot;12&quot;, 16);  // 18 - Integer\n    Integer.decode(&quot;#12&quot;);      // 18 - Integer\n    Integer.decode(&quot;0x12&quot;);     // 18 - Integer\n    Integer.decode(&quot;0X12&quot;);     // 18 - Integer\n\n    // base 2\n    Integer.parseInt(&quot;11&quot;, 2);  // 3 - int\n    Integer.valueOf(&quot;11&quot;, 2);   // 3 - Integer\n</code></pre>\n<p>If you want to get <code>int</code> instead of <code>Integer</code> you can use:</p>\n<ol>\n<li><p>Unboxing:</p>\n<pre><code> int val = Integer.decode(&quot;12&quot;); \n</code></pre>\n</li>\n<li><p><code>intValue()</code>:</p>\n<pre><code> Integer.decode(&quot;12&quot;).intValue();\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4816487,"reputation":4550,"user_id":3888450,"accept_rate":89,"display_name":"Stefan Dollase"},"comment_count":0,"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1586711214,"creation_date":1459739588,"answer_id":36394016,"question_id":5585779,"body_markdown":"Whenever there is the slightest possibility that the given String does not contain an Integer, you have to handle this special case. Sadly, the standard Java methods `Integer::parseInt` and `Integer::valueOf` throw a `NumberFormatException` to signal this special case. Thus, you have to use exceptions for flow control, which is generally considered bad coding style.\r\n\r\nIn my opinion, this special case should be handled by returning an empty `Optional&lt;Integer&gt;`. Since Java does not offer such a method, I use the following wrapper:\r\n\r\n\tprivate Optional&lt;Integer&gt; tryParseInteger(String string) {\r\n\t\ttry {\r\n\t\t\treturn Optional.of(Integer.valueOf(string));\r\n\t\t} catch (NumberFormatException e) {\r\n\t\t\treturn Optional.empty();\r\n\t\t}\r\n\t}\r\n\r\nExample usage:\r\n\r\n\t// prints &quot;12&quot;\r\n\tSystem.out.println(tryParseInteger(&quot;12&quot;).map(i -&gt; i.toString()).orElse(&quot;invalid&quot;));\r\n\t// prints &quot;-1&quot;\r\n\tSystem.out.println(tryParseInteger(&quot;-1&quot;).map(i -&gt; i.toString()).orElse(&quot;invalid&quot;));\r\n\t// prints &quot;invalid&quot;\r\n\tSystem.out.println(tryParseInteger(&quot;ab&quot;).map(i -&gt; i.toString()).orElse(&quot;invalid&quot;));\r\n\r\nWhile this is still using exceptions for flow control internally, the usage code becomes very clean. Also, you can clearly distinguish the case where `-1` is parsed as a valid value and the case where an invalid String could not be parsed.","title":"How do I convert a String to an int in Java?","body":"<p>Whenever there is the slightest possibility that the given String does not contain an Integer, you have to handle this special case. Sadly, the standard Java methods <code>Integer::parseInt</code> and <code>Integer::valueOf</code> throw a <code>NumberFormatException</code> to signal this special case. Thus, you have to use exceptions for flow control, which is generally considered bad coding style.</p>\n\n<p>In my opinion, this special case should be handled by returning an empty <code>Optional&lt;Integer&gt;</code>. Since Java does not offer such a method, I use the following wrapper:</p>\n\n<pre><code>private Optional&lt;Integer&gt; tryParseInteger(String string) {\n    try {\n        return Optional.of(Integer.valueOf(string));\n    } catch (NumberFormatException e) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>// prints \"12\"\nSystem.out.println(tryParseInteger(\"12\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n// prints \"-1\"\nSystem.out.println(tryParseInteger(\"-1\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n// prints \"invalid\"\nSystem.out.println(tryParseInteger(\"ab\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n</code></pre>\n\n<p>While this is still using exceptions for flow control internally, the usage code becomes very clean. Also, you can clearly distinguish the case where <code>-1</code> is parsed as a valid value and the case where an invalid String could not be parsed.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1567465681,"creation_date":1469510787,"answer_id":38581630,"question_id":5585779,"body_markdown":"As mentioned, Apache Commons&#39; `NumberUtils` can do it. It returns `0` if it cannot convert a string to an int.\r\n\r\nYou can also define your own default value:\r\n\r\n    NumberUtils.toInt(String str, int defaultValue)\r\n\r\nExample:\r\n\r\n    NumberUtils.toInt(&quot;3244&quot;, 1) = 3244\r\n    NumberUtils.toInt(&quot;&quot;, 1)     = 1\r\n    NumberUtils.toInt(null, 5)   = 5\r\n    NumberUtils.toInt(&quot;Hi&quot;, 6)   = 6\r\n    NumberUtils.toInt(&quot; 32 &quot;, 1) = 1 // Space in numbers are not allowed\r\n    NumberUtils.toInt(StringUtils.trimToEmpty(&quot;  32 &quot;, 1)) = 32;\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>As mentioned, Apache Commons' <code>NumberUtils</code> can do it. It returns <code>0</code> if it cannot convert a string to an int.</p>\n\n<p>You can also define your own default value:</p>\n\n<pre><code>NumberUtils.toInt(String str, int defaultValue)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>NumberUtils.toInt(\"3244\", 1) = 3244\nNumberUtils.toInt(\"\", 1)     = 1\nNumberUtils.toInt(null, 5)   = 5\nNumberUtils.toInt(\"Hi\", 6)   = 6\nNumberUtils.toInt(\" 32 \", 1) = 1 // Space in numbers are not allowed\nNumberUtils.toInt(StringUtils.trimToEmpty(\"  32 \", 1)) = 32;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308156,"reputation":13682,"user_id":619860,"accept_rate":80,"display_name":"Hoa Nguyen"},"comment_count":0,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1567465591,"creation_date":1470062648,"answer_id":38701772,"question_id":5585779,"body_markdown":"Apart from the previous answers, I would like to add several functions. These are results while you use them:\r\n\r\n    public static void main(String[] args) {\r\n      System.out.println(parseIntOrDefault(&quot;123&quot;, 0)); // 123\r\n      System.out.println(parseIntOrDefault(&quot;aaa&quot;, 0)); // 0\r\n      System.out.println(parseIntOrDefault(&quot;aaa456&quot;, 3, 0)); // 456\r\n      System.out.println(parseIntOrDefault(&quot;aaa789bbb&quot;, 3, 6, 0)); // 789\r\n    }\r\n\r\nImplementation:\r\n\r\n    public static int parseIntOrDefault(String value, int defaultValue) {\r\n      int result = defaultValue;\r\n      try {\r\n        result = Integer.parseInt(value);\r\n      }\r\n      catch (Exception e) {\r\n      }\r\n      return result;\r\n    }\r\n\r\n    public static int parseIntOrDefault(String value, int beginIndex, int defaultValue) {\r\n      int result = defaultValue;\r\n      try {\r\n        String stringValue = value.substring(beginIndex);\r\n        result = Integer.parseInt(stringValue);\r\n      }\r\n      catch (Exception e) {\r\n      }\r\n      return result;\r\n    }\r\n\r\n    public static int parseIntOrDefault(String value, int beginIndex, int endIndex, int defaultValue) {\r\n      int result = defaultValue;\r\n      try {\r\n        String stringValue = value.substring(beginIndex, endIndex);\r\n        result = Integer.parseInt(stringValue);\r\n      }\r\n      catch (Exception e) {\r\n      }\r\n      return result;\r\n    }\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Apart from the previous answers, I would like to add several functions. These are results while you use them:</p>\n\n<pre><code>public static void main(String[] args) {\n  System.out.println(parseIntOrDefault(\"123\", 0)); // 123\n  System.out.println(parseIntOrDefault(\"aaa\", 0)); // 0\n  System.out.println(parseIntOrDefault(\"aaa456\", 3, 0)); // 456\n  System.out.println(parseIntOrDefault(\"aaa789bbb\", 3, 6, 0)); // 789\n}\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>public static int parseIntOrDefault(String value, int defaultValue) {\n  int result = defaultValue;\n  try {\n    result = Integer.parseInt(value);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n\npublic static int parseIntOrDefault(String value, int beginIndex, int defaultValue) {\n  int result = defaultValue;\n  try {\n    String stringValue = value.substring(beginIndex);\n    result = Integer.parseInt(stringValue);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n\npublic static int parseIntOrDefault(String value, int beginIndex, int endIndex, int defaultValue) {\n  int result = defaultValue;\n  try {\n    String stringValue = value.substring(beginIndex, endIndex);\n    result = Integer.parseInt(stringValue);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1567465440,"creation_date":1470506189,"answer_id":38807214,"question_id":5585779,"body_markdown":"[Google Guava][1] has [tryParse(String)][2], which returns `null` if the string couldn&#39;t be parsed, for example:\r\n\r\n    Integer fooInt = Ints.tryParse(fooString);\r\n    if (fooInt != null) {\r\n      ...\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Google_Guava\r\n  [2]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#tryParse(java.lang.String)\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Google Guava</a> has <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#tryParse(java.lang.String)\" rel=\"nofollow noreferrer\">tryParse(String)</a>, which returns <code>null</code> if the string couldn't be parsed, for example:</p>\n\n<pre><code>Integer fooInt = Ints.tryParse(fooString);\nif (fooInt != null) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3750291,"reputation":838,"user_id":3280682,"accept_rate":100,"display_name":"Aditya"},"comment_count":0,"down_vote_count":3,"up_vote_count":11,"is_accepted":false,"score":8,"last_activity_date":1688558281,"creation_date":1471504044,"answer_id":39011912,"question_id":5585779,"body_markdown":"For a normal `String`, you can use:\r\n\r\n    int number = Integer.parseInt(&quot;1234&quot;);\r\n\r\nFor a `StringBuilder` and `StringBuffer`, you can use:\r\n\r\n    Integer.parseInt(myBuilderOrBuffer.toString());\r\n","title":"How do I convert a String to an int in Java?","body":"<p>For a normal <code>String</code>, you can use:</p>\n<pre><code>int number = Integer.parseInt(&quot;1234&quot;);\n</code></pre>\n<p>For a <code>StringBuilder</code> and <code>StringBuffer</code>, you can use:</p>\n<pre><code>Integer.parseInt(myBuilderOrBuffer.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1488314200,"creation_date":1488314200,"answer_id":42518263,"question_id":5585779,"body_markdown":"You can use `new Scanner(&quot;1244&quot;).nextInt()`. Or ask if even an int exists: `new Scanner(&quot;1244&quot;).hasNextInt()`","title":"How do I convert a String to an int in Java?","body":"<p>You can use <code>new Scanner(\"1244\").nextInt()</code>. Or ask if even an int exists: <code>new Scanner(\"1244\").hasNextInt()</code></p>\n"},{"tags":[],"owner":{"account_id":2375630,"reputation":30614,"user_id":2815219,"display_name":"Raman Sahasi"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1688558222,"creation_date":1493012179,"answer_id":43580481,"question_id":5585779,"body_markdown":"In programming competitions, where you&#39;re assured that the number will always be a valid integer, then you can write your own method to parse the input. This will skip all validation-related code (since you don&#39;t need any of that) and will be a bit more efficient.\r\n\r\n 1. For valid positive integer:\r\n\r\n```java\r\n        private static int parseInt(String str) {\r\n            int i, n = 0;\r\n\r\n            for (i = 0; i &lt; str.length(); i++) {\r\n                n *= 10;\r\n                n += str.charAt(i) - 48;\r\n            }\r\n\r\n            return n;\r\n        }\r\n```\r\n\r\n 2. For both positive and negative integers:\r\n\r\n```java\r\n        private static int parseInt(String str) {\r\n            int i = 0, n = 0, sign = 1;\r\n            if (str.charAt(0) == &#39;-&#39;) {\r\n                i = 1;\r\n                sign = -1;\r\n            }\r\n\r\n            for (; i &lt; str.length(); i++) {\r\n                n *= 10;\r\n                n += str.charAt(i) - 48;\r\n            }\r\n\r\n            return sign * n;\r\n        }\r\n```\r\n\r\n 3. If you are expecting whitespace before or after these numbers,\r\n    then make sure to do a `str = str.trim()` before processing further.\r\n","title":"How do I convert a String to an int in Java?","body":"<p>In programming competitions, where you're assured that the number will always be a valid integer, then you can write your own method to parse the input. This will skip all validation-related code (since you don't need any of that) and will be a bit more efficient.</p>\n<ol>\n<li>For valid positive integer:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>        private static int parseInt(String str) {\n            int i, n = 0;\n\n            for (i = 0; i &lt; str.length(); i++) {\n                n *= 10;\n                n += str.charAt(i) - 48;\n            }\n\n            return n;\n        }\n</code></pre>\n<ol start=\"2\">\n<li>For both positive and negative integers:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>        private static int parseInt(String str) {\n            int i = 0, n = 0, sign = 1;\n            if (str.charAt(0) == '-') {\n                i = 1;\n                sign = -1;\n            }\n\n            for (; i &lt; str.length(); i++) {\n                n *= 10;\n                n += str.charAt(i) - 48;\n            }\n\n            return sign * n;\n        }\n</code></pre>\n<ol start=\"3\">\n<li>If you are expecting whitespace before or after these numbers,\nthen make sure to do a <code>str = str.trim()</code> before processing further.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2232881,"reputation":726,"user_id":1970059,"accept_rate":25,"display_name":"Dmytro Shvechikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1667572652,"creation_date":1507058166,"answer_id":46551829,"question_id":5585779,"body_markdown":"Methods to do that:\r\n\r\n 1. `Integer.parseInt(s)`\r\n 2. `Integer.parseInt(s, radix)`\r\n 3. `Integer.parseInt(s, beginIndex, endIndex, radix)`\r\n 4. `Integer.parseUnsignedInt(s)`\r\n 5. `Integer.parseUnsignedInt(s, radix)`\r\n 6. `Integer.parseUnsignedInt(s, beginIndex, endIndex, radix)`\r\n 7. `Integer.valueOf(s)`\r\n 8. `Integer.valueOf(s, radix)`\r\n 9. `Integer.decode(s)`\r\n 10. `NumberUtils.toInt(s)`\r\n 11. `NumberUtils.toInt(s, defaultValue)`\r\n\r\n---\r\n\r\n`Integer.valueOf` produces an `Integer` object and all other methods a primitive int.\r\n\r\nThe last two methods are from [commons-lang3][1] and a big article about converting [here][2].\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.apache.commons/commons-lang3\r\n  [2]: https://codingmorning.com/convert-string-to-int-in-java/\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Methods to do that:</p>\n<ol>\n<li><code>Integer.parseInt(s)</code></li>\n<li><code>Integer.parseInt(s, radix)</code></li>\n<li><code>Integer.parseInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s)</code></li>\n<li><code>Integer.parseUnsignedInt(s, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.valueOf(s)</code></li>\n<li><code>Integer.valueOf(s, radix)</code></li>\n<li><code>Integer.decode(s)</code></li>\n<li><code>NumberUtils.toInt(s)</code></li>\n<li><code>NumberUtils.toInt(s, defaultValue)</code></li>\n</ol>\n<hr />\n<p><code>Integer.valueOf</code> produces an <code>Integer</code> object and all other methods a primitive int.</p>\n<p>The last two methods are from <a href=\"http://mvnrepository.com/artifact/org.apache.commons/commons-lang3\" rel=\"nofollow noreferrer\">commons-lang3</a> and a big article about converting <a href=\"https://codingmorning.com/convert-string-to-int-in-java/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":11884664,"reputation":441,"user_id":8697391,"display_name":"Lukas Bauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1567464637,"creation_date":1507316422,"answer_id":46612299,"question_id":5585779,"body_markdown":"Use [`Integer.parseInt(yourString)`][1].\r\n\r\n**Remember the following things:**\r\n\r\n`Integer.parseInt(&quot;1&quot;);`      // ok\r\n\r\n`Integer.parseInt(&quot;-1&quot;);`     // ok\r\n\r\n`Integer.parseInt(&quot;+1&quot;);`     // ok\r\n\r\n`Integer.parseInt(&quot; 1&quot;);`     // Exception (blank space)\r\n\r\n`Integer.parseInt(&quot;2147483648&quot;);` // Exception (Integer is limited to a [maximum value][2] of 2,147,483,647)\r\n\r\n`Integer.parseInt(&quot;1.1&quot;);` // Exception (**.** or **,** or whatever is not allowed)\r\n\r\n`Integer.parseInt(&quot;&quot;);` // Exception (not 0 or something)\r\n\r\nThere is only one type of exception: [`NumberFormatException`][3]\r\n\r\n  [1]: http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\r\n  [2]: http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#MAX_VALUE\r\n  [3]: http://docs.oracle.com/javase/9/docs/api/java/lang/NumberFormatException.html\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\" rel=\"noreferrer\"><code>Integer.parseInt(yourString)</code></a>.</p>\n\n<p><strong>Remember the following things:</strong></p>\n\n<p><code>Integer.parseInt(\"1\");</code>      // ok</p>\n\n<p><code>Integer.parseInt(\"-1\");</code>     // ok</p>\n\n<p><code>Integer.parseInt(\"+1\");</code>     // ok</p>\n\n<p><code>Integer.parseInt(\" 1\");</code>     // Exception (blank space)</p>\n\n<p><code>Integer.parseInt(\"2147483648\");</code> // Exception (Integer is limited to a <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#MAX_VALUE\" rel=\"noreferrer\">maximum value</a> of 2,147,483,647)</p>\n\n<p><code>Integer.parseInt(\"1.1\");</code> // Exception (<strong>.</strong> or <strong>,</strong> or whatever is not allowed)</p>\n\n<p><code>Integer.parseInt(\"\");</code> // Exception (not 0 or something)</p>\n\n<p>There is only one type of exception: <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/NumberFormatException.html\" rel=\"noreferrer\"><code>NumberFormatException</code></a></p>\n"},{"comments":[{"owner":{"account_id":43022,"reputation":22842,"user_id":125562,"accept_rate":64,"display_name":"Basilevs"},"score":6,"creation_date":1598548786,"post_id":49989721,"comment_id":112502428,"body_markdown":"[Integer constructors are deprecated](https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer(java.lang.String))","body":"<a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer(java.lang.String)\" rel=\"nofollow noreferrer\">Integer constructors are deprecated</a>"}],"tags":[],"owner":{"account_id":3024120,"reputation":3293,"user_id":2564509,"display_name":"djm.im"},"comment_count":1,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1598610523,"creation_date":1524516550,"answer_id":49989721,"question_id":5585779,"body_markdown":"I am a little bit surprised that nobody mentioned the Integer constructor that takes String as a parameter.\r\n\r\nSo, here it is:\r\n\r\n    String myString = &quot;1234&quot;;\r\n    int i1 = new Integer(myString);\r\n\r\n[Java 8 - Integer(String)][1].\r\n\r\nOf course, the constructor will return type `Integer`, and an unboxing operation converts the value to `int`.\r\n\r\n---\r\n_Note 1: It&#39;s important to mention_: This constructor calls the `parseInt` method.\r\n\r\n    public Integer(String var1) throws NumberFormatException {\r\n        this.value = parseInt(var1, 10);\r\n    }\r\n\r\n_Note 2: It&#39;s deprecated_: `@Deprecated(since=&quot;9&quot;)` - [JavaDoc][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#Integer-java.lang.String-\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer-java.lang.String-","title":"How do I convert a String to an int in Java?","body":"<p>I am a little bit surprised that nobody mentioned the Integer constructor that takes String as a parameter.</p>\n<p>So, here it is:</p>\n<pre><code>String myString = &quot;1234&quot;;\nint i1 = new Integer(myString);\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#Integer-java.lang.String-\" rel=\"nofollow noreferrer\">Java 8 - Integer(String)</a>.</p>\n<p>Of course, the constructor will return type <code>Integer</code>, and an unboxing operation converts the value to <code>int</code>.</p>\n<hr />\n<p><em>Note 1: It's important to mention</em>: This constructor calls the <code>parseInt</code> method.</p>\n<pre><code>public Integer(String var1) throws NumberFormatException {\n    this.value = parseInt(var1, 10);\n}\n</code></pre>\n<p><em>Note 2: It's deprecated</em>: <code>@Deprecated(since=&quot;9&quot;)</code> - <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer-java.lang.String-\" rel=\"nofollow noreferrer\">JavaDoc</a>.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":4,"creation_date":1567463704,"post_id":53921506,"comment_id":101962269,"body_markdown":"Some explanation would be in order.","body":"Some explanation would be in order."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1677720232,"post_id":53921506,"comment_id":133395716,"body_markdown":"With `getBytes` you&#39;re using the platform&#39;s default charset and risking multi-byte encodings.  There&#39;s just no reason to do this.  Also, this doesn&#39;t handle negative numbers.","body":"With <code>getBytes</code> you&#39;re using the platform&#39;s default charset and risking multi-byte encodings.  There&#39;s just no reason to do this.  Also, this doesn&#39;t handle negative numbers."}],"tags":[],"owner":{"account_id":5640275,"reputation":379,"user_id":4464360,"accept_rate":75,"display_name":"Abhijeet Kale"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1688558718,"creation_date":1545733985,"answer_id":53921506,"question_id":5585779,"body_markdown":"    import java.util.*;\r\n\r\n    public class strToint {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            String str = &quot;123&quot;;\r\n            byte barr[] = str.getBytes();\r\n\r\n            System.out.println(Arrays.toString(barr));\r\n            int result = 0;\r\n\r\n            for (int i = 0; i &lt; barr.length; i++) {\r\n                // System.out.print(barr[i] + &quot; &quot;);\r\n                int ii = barr[i];\r\n                char a = (char) ii;\r\n                int no = Character.getNumericValue(a);\r\n                result = result * 10 + no;\r\n                System.out.println(result);\r\n            }\r\n\r\n            System.out.println(&quot;result:&quot; + result);\r\n        }\r\n    }\r\n","title":"How do I convert a String to an int in Java?","body":"<pre><code>import java.util.*;\n\npublic class strToint {\n\n    public static void main(String[] args) {\n\n        String str = &quot;123&quot;;\n        byte barr[] = str.getBytes();\n\n        System.out.println(Arrays.toString(barr));\n        int result = 0;\n\n        for (int i = 0; i &lt; barr.length; i++) {\n            // System.out.print(barr[i] + &quot; &quot;);\n            int ii = barr[i];\n            char a = (char) ii;\n            int no = Character.getNumericValue(a);\n            result = result * 10 + no;\n            System.out.println(result);\n        }\n\n        System.out.println(&quot;result:&quot; + result);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10078487,"reputation":2156,"user_id":7449706,"display_name":"Kevin Ng"},"score":0,"creation_date":1567836850,"post_id":54282976,"comment_id":102091823,"body_markdown":"Also, to clarify. The reason why having the power array method ran faster is that Java cached the result for this type of test code. I tested, in a real-life situation, using bit shift will work way faster.","body":"Also, to clarify. The reason why having the power array method ran faster is that Java cached the result for this type of test code. I tested, in a real-life situation, using bit shift will work way faster."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1677720168,"post_id":54282976,"comment_id":133395713,"body_markdown":"Why do you have a `if (c &gt; 9)` followed immediately by an `if (c &gt; 2)` with the exact same contents?","body":"Why do you have a <code>if (c &gt; 9)</code> followed immediately by an <code>if (c &gt; 2)</code> with the exact same contents?"}],"tags":[],"owner":{"account_id":10078487,"reputation":2156,"user_id":7449706,"display_name":"Kevin Ng"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1567463538,"creation_date":1548039520,"answer_id":54282976,"question_id":5585779,"body_markdown":"I wrote this fast method to parse a string input into int or long. It is faster than the current JDK 11 Integer.parseInt or Long.parseLong. Although, you only asked for int, I also included the long parser. The code parser below requires that the parser&#39;s method must be small for it to operate quickly. An alternative version is below the test code. The alternative version is pretty quick and it does not depend on the size of the class.\r\n\r\nThis class checks for overflow, and you could customize the code to adapt to your needs. An empty string will yield 0 with my method but that is intentional. You can change that to adapt your case or use as is.\r\n\r\nThis is only the part of the class where parseInt and parseLong are needed. Note that this only deals with base 10 numbers.\r\n\r\nThe test code for the int parser is below the code below.\r\n\r\n    /*\r\n     * Copyright 2019 Khang Hoang Nguyen\r\n     * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\r\n     * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n     * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n     * @author: Khang Hoang Nguyen - kevin@fai.host.\r\n     **/\r\n    final class faiNumber{\r\n        private static final long[] longpow = {0L, 1L, 10L, 100L, 1000L, 10000L, 100000L, 1000000L, 10000000L, 100000000L, 1000000000L,\r\n                                               10000000000L, 100000000000L, 1000000000000L, 10000000000000L, 100000000000000L,\r\n                                               1000000000000000L, 10000000000000000L, 100000000000000000L, 1000000000000000000L,\r\n                                              };\r\n\r\n        private static final int[] intpow = { 0, 1, 10, 100, 1000, 10000,\r\n                                              100000, 1000000, 10000000, 100000000, 1000000000\r\n                                            };\r\n\r\n        /**\r\n         * parseLong(String str) parse a String into Long.\r\n         * All errors throw by this method is NumberFormatException.\r\n         * Better errors can be made to tailor to each use case.\r\n         **/\r\n        public static long parseLong(final String str) {\r\n            final int length = str.length();\r\n            if (length == 0)\r\n                return 0L;\r\n\r\n            char c1 = str.charAt(0);\r\n            int start;\r\n\r\n            if (c1 == &#39;-&#39; || c1 == &#39;+&#39;) {\r\n                if (length == 1)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n                start = 1;\r\n            } else {\r\n                start = 0;\r\n            }\r\n\r\n            /*\r\n             * Note: if length &gt; 19, possible scenario is to run through the string\r\n             * to check whether the string contains only valid digits.\r\n             * If the check had only valid digits then a negative sign meant underflow, else, overflow.\r\n             */\r\n            if (length - start &gt; 19)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n\r\n            long c;\r\n            long out = 0L;\r\n\r\n            for ( ; start &lt; length; start++) {\r\n                c = (str.charAt(start) ^ &#39;0&#39;);\r\n                if (c &gt; 9L)\r\n                    throw new NumberFormatException( String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str) );\r\n                out += c * longpow[length - start];\r\n            }\r\n\r\n            if (c1 == &#39;-&#39;) {\r\n                out = ~out + 1L;\r\n                // If out &gt; 0 number underflow(supposed to be negative).\r\n                if (out &gt; 0L)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n                return out;\r\n            }\r\n            // If out &lt; 0 number overflow (supposed to be positive).\r\n            if (out &lt; 0L)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n            return out;\r\n        }\r\n\r\n        /**\r\n         * parseInt(String str) parse a string into an int.\r\n         * return 0 if string is empty.\r\n         **/\r\n        public static int parseInt(final String str) {\r\n            final int length = str.length();\r\n            if (length == 0)\r\n                return 0;\r\n\r\n            char c1 = str.charAt(0);\r\n            int start;\r\n\r\n            if (c1 == &#39;-&#39; || c1 == &#39;+&#39;) {\r\n                if (length == 1)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input &#39;%s&#39;.&quot;, str));\r\n                start = 1;\r\n            } else {\r\n                start = 0;\r\n            }\r\n\r\n            int out = 0; int c;\r\n            int runlen = length - start;\r\n\r\n            if (runlen &gt; 9) {\r\n                if (runlen &gt; 10)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n\r\n                c = (str.charAt(start) ^ &#39;0&#39;); // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\r\n                if (c &gt; 9)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                if (c &gt; 2)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                out += c * intpow[length - start++];\r\n            }\r\n\r\n            for ( ; start &lt; length; start++) {\r\n                c = (str.charAt(start) ^ &#39;0&#39;);\r\n                if (c &gt; 9)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                out += c * intpow[length - start];\r\n            }\r\n\r\n            if (c1 == &#39;-&#39;) {\r\n                out = ~out + 1;\r\n                if (out &gt; 0)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                return out;\r\n            }\r\n\r\n            if (out &lt; 0)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            return out;\r\n        }\r\n    }\r\n\r\nTest Code Section. This should take around 200 seconds or so.\r\n\r\n    // Int Number Parser Test;\r\n    long start = System.currentTimeMillis();\r\n    System.out.println(&quot;INT PARSER TEST&quot;);\r\n    for (int i = Integer.MIN_VALUE; i != Integer.MAX_VALUE; i++){\r\n       if (faiNumber.parseInt(&quot;&quot;+i) != i)\r\n           System.out.println(&quot;Wrong&quot;);\r\n       if (i == 0)\r\n           System.out.println(&quot;HalfWay Done&quot;);\r\n    }\r\n\r\n    if (faiNumber.parseInt(&quot;&quot; + Integer.MAX_VALUE) != Integer.MAX_VALUE)\r\n        System.out.println(&quot;Wrong&quot;);\r\n    long end = System.currentTimeMillis();\r\n    long result = (end - start);\r\n    System.out.println(result);\r\n    // INT PARSER END */\r\n\r\nAn alternative method which is also very fast. Note that array of int pow is not used, but a mathematical optimization of multiply by 10 by bit shifting.\r\n\r\n    public static int parseInt(final String str) {\r\n        final int length = str.length();\r\n        if (length == 0)\r\n            return 0;\r\n\r\n        char c1 = str.charAt(0);\r\n        int start;\r\n\r\n        if (c1 == &#39;-&#39; || c1 == &#39;+&#39;) {\r\n            if (length == 1)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input &#39;%s&#39;.&quot;, str));\r\n            start = 1;\r\n        } else {\r\n            start = 0;\r\n        }\r\n\r\n        int out = 0;\r\n        int c;\r\n        while (start &lt; length &amp;&amp; str.charAt(start) == &#39;0&#39;)\r\n            start++; // &lt;-- This to disregard leading 0. It can be\r\n                     // removed if you know exactly your source\r\n                     // does not have leading zeroes.\r\n        int runlen = length - start;\r\n\r\n        if (runlen &gt; 9) {\r\n            if (runlen &gt; 10)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n\r\n            c = (str.charAt(start++) ^ &#39;0&#39;);  // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\r\n            if (c &gt; 9)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            if (c &gt; 2)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c; // &lt;- Alternatively this can just be out = c or c above can just be out;\r\n        }\r\n\r\n        for ( ; start &lt; length; start++) {\r\n            c = (str.charAt(start) ^ &#39;0&#39;);\r\n            if (c &gt; 9)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c;\r\n        }\r\n\r\n        if (c1 == &#39;-&#39;) {\r\n            out = ~out + 1;\r\n            if (out &gt; 0)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            return out;\r\n        }\r\n\r\n        if (out &lt; 0)\r\n            throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n        return out;\r\n    }\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>I wrote this fast method to parse a string input into int or long. It is faster than the current JDK 11 Integer.parseInt or Long.parseLong. Although, you only asked for int, I also included the long parser. The code parser below requires that the parser's method must be small for it to operate quickly. An alternative version is below the test code. The alternative version is pretty quick and it does not depend on the size of the class.</p>\n\n<p>This class checks for overflow, and you could customize the code to adapt to your needs. An empty string will yield 0 with my method but that is intentional. You can change that to adapt your case or use as is.</p>\n\n<p>This is only the part of the class where parseInt and parseLong are needed. Note that this only deals with base 10 numbers.</p>\n\n<p>The test code for the int parser is below the code below.</p>\n\n<pre><code>/*\n * Copyright 2019 Khang Hoang Nguyen\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * @author: Khang Hoang Nguyen - kevin@fai.host.\n **/\nfinal class faiNumber{\n    private static final long[] longpow = {0L, 1L, 10L, 100L, 1000L, 10000L, 100000L, 1000000L, 10000000L, 100000000L, 1000000000L,\n                                           10000000000L, 100000000000L, 1000000000000L, 10000000000000L, 100000000000000L,\n                                           1000000000000000L, 10000000000000000L, 100000000000000000L, 1000000000000000000L,\n                                          };\n\n    private static final int[] intpow = { 0, 1, 10, 100, 1000, 10000,\n                                          100000, 1000000, 10000000, 100000000, 1000000000\n                                        };\n\n    /**\n     * parseLong(String str) parse a String into Long.\n     * All errors throw by this method is NumberFormatException.\n     * Better errors can be made to tailor to each use case.\n     **/\n    public static long parseLong(final String str) {\n        final int length = str.length();\n        if (length == 0)\n            return 0L;\n\n        char c1 = str.charAt(0);\n        int start;\n\n        if (c1 == '-' || c1 == '+') {\n            if (length == 1)\n                throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n            start = 1;\n        } else {\n            start = 0;\n        }\n\n        /*\n         * Note: if length &gt; 19, possible scenario is to run through the string\n         * to check whether the string contains only valid digits.\n         * If the check had only valid digits then a negative sign meant underflow, else, overflow.\n         */\n        if (length - start &gt; 19)\n            throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n\n        long c;\n        long out = 0L;\n\n        for ( ; start &lt; length; start++) {\n            c = (str.charAt(start) ^ '0');\n            if (c &gt; 9L)\n                throw new NumberFormatException( String.format(\"Not a valid long value. Input '%s'.\", str) );\n            out += c * longpow[length - start];\n        }\n\n        if (c1 == '-') {\n            out = ~out + 1L;\n            // If out &gt; 0 number underflow(supposed to be negative).\n            if (out &gt; 0L)\n                throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n            return out;\n        }\n        // If out &lt; 0 number overflow (supposed to be positive).\n        if (out &lt; 0L)\n            throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n        return out;\n    }\n\n    /**\n     * parseInt(String str) parse a string into an int.\n     * return 0 if string is empty.\n     **/\n    public static int parseInt(final String str) {\n        final int length = str.length();\n        if (length == 0)\n            return 0;\n\n        char c1 = str.charAt(0);\n        int start;\n\n        if (c1 == '-' || c1 == '+') {\n            if (length == 1)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input '%s'.\", str));\n            start = 1;\n        } else {\n            start = 0;\n        }\n\n        int out = 0; int c;\n        int runlen = length - start;\n\n        if (runlen &gt; 9) {\n            if (runlen &gt; 10)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n\n            c = (str.charAt(start) ^ '0'); // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\n            if (c &gt; 9)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            if (c &gt; 2)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            out += c * intpow[length - start++];\n        }\n\n        for ( ; start &lt; length; start++) {\n            c = (str.charAt(start) ^ '0');\n            if (c &gt; 9)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            out += c * intpow[length - start];\n        }\n\n        if (c1 == '-') {\n            out = ~out + 1;\n            if (out &gt; 0)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            return out;\n        }\n\n        if (out &lt; 0)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        return out;\n    }\n}\n</code></pre>\n\n<p>Test Code Section. This should take around 200 seconds or so.</p>\n\n<pre><code>// Int Number Parser Test;\nlong start = System.currentTimeMillis();\nSystem.out.println(\"INT PARSER TEST\");\nfor (int i = Integer.MIN_VALUE; i != Integer.MAX_VALUE; i++){\n   if (faiNumber.parseInt(\"\"+i) != i)\n       System.out.println(\"Wrong\");\n   if (i == 0)\n       System.out.println(\"HalfWay Done\");\n}\n\nif (faiNumber.parseInt(\"\" + Integer.MAX_VALUE) != Integer.MAX_VALUE)\n    System.out.println(\"Wrong\");\nlong end = System.currentTimeMillis();\nlong result = (end - start);\nSystem.out.println(result);\n// INT PARSER END */\n</code></pre>\n\n<p>An alternative method which is also very fast. Note that array of int pow is not used, but a mathematical optimization of multiply by 10 by bit shifting.</p>\n\n<pre><code>public static int parseInt(final String str) {\n    final int length = str.length();\n    if (length == 0)\n        return 0;\n\n    char c1 = str.charAt(0);\n    int start;\n\n    if (c1 == '-' || c1 == '+') {\n        if (length == 1)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input '%s'.\", str));\n        start = 1;\n    } else {\n        start = 0;\n    }\n\n    int out = 0;\n    int c;\n    while (start &lt; length &amp;&amp; str.charAt(start) == '0')\n        start++; // &lt;-- This to disregard leading 0. It can be\n                 // removed if you know exactly your source\n                 // does not have leading zeroes.\n    int runlen = length - start;\n\n    if (runlen &gt; 9) {\n        if (runlen &gt; 10)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n\n        c = (str.charAt(start++) ^ '0');  // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\n        if (c &gt; 9)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        if (c &gt; 2)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c; // &lt;- Alternatively this can just be out = c or c above can just be out;\n    }\n\n    for ( ; start &lt; length; start++) {\n        c = (str.charAt(start) ^ '0');\n        if (c &gt; 9)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c;\n    }\n\n    if (c1 == '-') {\n        out = ~out + 1;\n        if (out &gt; 0)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        return out;\n    }\n\n    if (out &lt; 0)\n        throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n    return out;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12511931,"reputation":3963,"user_id":9106684,"display_name":"duyuanchao"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1580056625,"creation_date":1571747528,"answer_id":58504383,"question_id":5585779,"body_markdown":"[As I write on GitHub][1]:\r\n\r\n    public class StringToInteger {\r\n        public static void main(String[] args) {\r\n            assert parseInt(&quot;123&quot;) == Integer.parseInt(&quot;123&quot;);\r\n            assert parseInt(&quot;-123&quot;) == Integer.parseInt(&quot;-123&quot;);\r\n            assert parseInt(&quot;0123&quot;) == Integer.parseInt(&quot;0123&quot;);\r\n            assert parseInt(&quot;+123&quot;) == Integer.parseInt(&quot;+123&quot;);\r\n        }\r\n\r\n        /**\r\n         * Parse a string to integer\r\n         *\r\n         * @param s the string\r\n         * @return the integer value represented by the argument in decimal.\r\n         * @throws NumberFormatException if the {@code string} does not contain a parsable integer.\r\n         */\r\n        public static int parseInt(String s) {\r\n            if (s == null) {\r\n                throw new NumberFormatException(&quot;null&quot;);\r\n            }\r\n            boolean isNegative = s.charAt(0) == &#39;-&#39;;\r\n            boolean isPositive = s.charAt(0) == &#39;+&#39;;\r\n            int number = 0;\r\n            for (int i = isNegative ? 1 : isPositive ? 1 : 0, length = s.length(); i &lt; length; ++i) {\r\n                if (!Character.isDigit(s.charAt(i))) {\r\n                    throw new NumberFormatException(&quot;s=&quot; + s);\r\n                }\r\n                number = number * 10 + s.charAt(i) - &#39;0&#39;;\r\n            }\r\n            return isNegative ? -number : number;\r\n        }\r\n    }\r\n\r\n  [1]: https://github.com/shellhub/Algorithms-Java/blob/master/src/main/java/maths/StringToInteger.java\r\n","title":"How do I convert a String to an int in Java?","body":"<p><a href=\"https://github.com/shellhub/Algorithms-Java/blob/master/src/main/java/maths/StringToInteger.java\" rel=\"nofollow noreferrer\">As I write on GitHub</a>:</p>\n\n<pre><code>public class StringToInteger {\n    public static void main(String[] args) {\n        assert parseInt(\"123\") == Integer.parseInt(\"123\");\n        assert parseInt(\"-123\") == Integer.parseInt(\"-123\");\n        assert parseInt(\"0123\") == Integer.parseInt(\"0123\");\n        assert parseInt(\"+123\") == Integer.parseInt(\"+123\");\n    }\n\n    /**\n     * Parse a string to integer\n     *\n     * @param s the string\n     * @return the integer value represented by the argument in decimal.\n     * @throws NumberFormatException if the {@code string} does not contain a parsable integer.\n     */\n    public static int parseInt(String s) {\n        if (s == null) {\n            throw new NumberFormatException(\"null\");\n        }\n        boolean isNegative = s.charAt(0) == '-';\n        boolean isPositive = s.charAt(0) == '+';\n        int number = 0;\n        for (int i = isNegative ? 1 : isPositive ? 1 : 0, length = s.length(); i &lt; length; ++i) {\n            if (!Character.isDigit(s.charAt(i))) {\n                throw new NumberFormatException(\"s=\" + s);\n            }\n            number = number * 10 + s.charAt(i) - '0';\n        }\n        return isNegative ? -number : number;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":2,"creation_date":1586662464,"post_id":60756484,"comment_id":108207747,"body_markdown":"How does this add anything? There are several older answers that have already provided these approaches. Please read existing answers before posting.","body":"How does this add anything? There are several older answers that have already provided these approaches. Please read existing answers before posting."},{"owner":{"account_id":1807108,"reputation":3221,"user_id":1644002,"accept_rate":88,"display_name":"user1644002"},"score":0,"creation_date":1633712755,"post_id":60756484,"comment_id":122841769,"body_markdown":"He is showing the efficiency of one is greater than the efficiency of the other.","body":"He is showing the efficiency of one is greater than the efficiency of the other."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1641088524,"post_id":60756484,"comment_id":124718496,"body_markdown":"@user1644002 - Well if he (and you) think that, then he is (probably) incorrect.  The JIT compiler should inline the `valueOf` -&gt; `parseInt` call making the two versions equally efficient.","body":"@user1644002 - Well if he (and you) think that, then he is (probably) incorrect.  The JIT compiler should inline the <code>valueOf</code> -&gt; <code>parseInt</code> call making the two versions equally efficient."}],"tags":[],"owner":{"account_id":16583795,"reputation":879,"user_id":11983766,"display_name":"dxjuv"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1598025708,"creation_date":1584618053,"answer_id":60756484,"question_id":5585779,"body_markdown":"The two main ways to do this are using the method `valueOf()` and method `parseInt()` of the `Integer` class.\r\n\r\nSuppose you are given a String like this\r\n\r\n    String numberInString = &quot;999&quot;;\r\n\r\nThen you can convert it into integer by using\r\n\r\n    int numberInInteger = Integer.parseInt(numberInString);\r\n\r\nAnd alternatively, you can use\r\n\r\n    int numberInInteger = Integer.valueOf(numberInString);\r\n\r\nBut the thing here is, the method `Integer.valueOf()` has the following implementation in `Integer` class:\r\n\r\n    public static Integer valueOf(String var0, int var1) throws NumberFormatException {\r\n        return parseInt(var0, var1);\r\n    }\r\n\r\nAs you can see, the `Integer.valueOf()` internally calls `Integer.parseInt()` itself.\r\nAlso, `parseInt()` returns an `int`, and `valueOf()` returns an `Integer`\r\n","title":"How do I convert a String to an int in Java?","body":"<p>The two main ways to do this are using the method <code>valueOf()</code> and method <code>parseInt()</code> of the <code>Integer</code> class.</p>\n<p>Suppose you are given a String like this</p>\n<pre><code>String numberInString = &quot;999&quot;;\n</code></pre>\n<p>Then you can convert it into integer by using</p>\n<pre><code>int numberInInteger = Integer.parseInt(numberInString);\n</code></pre>\n<p>And alternatively, you can use</p>\n<pre><code>int numberInInteger = Integer.valueOf(numberInString);\n</code></pre>\n<p>But the thing here is, the method <code>Integer.valueOf()</code> has the following implementation in <code>Integer</code> class:</p>\n<pre><code>public static Integer valueOf(String var0, int var1) throws NumberFormatException {\n    return parseInt(var0, var1);\n}\n</code></pre>\n<p>As you can see, the <code>Integer.valueOf()</code> internally calls <code>Integer.parseInt()</code> itself.\nAlso, <code>parseInt()</code> returns an <code>int</code>, and <code>valueOf()</code> returns an <code>Integer</code></p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":2,"creation_date":1598025979,"post_id":61498228,"comment_id":112333431,"body_markdown":"Re *&quot;You need to handle NumberFormatException for the string value issue&quot;*: How? By *avoiding it happening* altogether by one of these three methods? Can you [make it](https://stackoverflow.com/posts/61498228/edit) more clear (***without*** &quot;Update: &quot;, &quot;Edit: &quot; or similar)?","body":"Re <i>&quot;You need to handle NumberFormatException for the string value issue&quot;</i>: How? By <i>avoiding it happening</i> altogether by one of these three methods? Can you <a href=\"https://stackoverflow.com/posts/61498228/edit\">make it</a> more clear (<b><i>without</i></b> &quot;Update: &quot;, &quot;Edit: &quot; or similar)?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1646054713,"post_id":61498228,"comment_id":126022500,"body_markdown":"This is only two ways. Introduction of an optional doesn&#39;t change that you&#39;re using parseInt","body":"This is only two ways. Introduction of an optional doesn&#39;t change that you&#39;re using parseInt"}],"tags":[],"owner":{"account_id":15035938,"reputation":310,"user_id":10852356,"display_name":"garima garg"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1646054660,"creation_date":1588151691,"answer_id":61498228,"question_id":5585779,"body_markdown":"There are different ways of converting a string int value into an Integer data type value. You need to handle NumberFormatException for the string value issue.\r\n\r\n1. Integer.parseInt\r\n\r\n        foo = Integer.parseInt(myString);\r\n\r\n2. Integer.valueOf\r\n\r\n        foo = Integer.valueOf(myString);\r\n\r\n3. Using Java 8 Optional API\r\n\r\n        foo = Optional.ofNullable(myString).map(Integer::parseInt).get();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>There are different ways of converting a string int value into an Integer data type value. You need to handle NumberFormatException for the string value issue.</p>\n<ol>\n<li><p>Integer.parseInt</p>\n<pre><code> foo = Integer.parseInt(myString);\n</code></pre>\n</li>\n<li><p>Integer.valueOf</p>\n<pre><code> foo = Integer.valueOf(myString);\n</code></pre>\n</li>\n<li><p>Using Java 8 Optional API</p>\n<pre><code> foo = Optional.ofNullable(myString).map(Integer::parseInt).get();\n</code></pre>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":2,"creation_date":1598026261,"post_id":62871425,"comment_id":112333543,"body_markdown":"What are the magic numbers 48 and 57? Can&#39;t (named) constants be used?","body":"What are the magic numbers 48 and 57? Can&#39;t (named) constants be used?"}],"tags":[],"owner":{"account_id":7634898,"reputation":55,"user_id":5788729,"display_name":"Ajay Singh Meena"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1598026173,"creation_date":1594626691,"answer_id":62871425,"question_id":5585779,"body_markdown":"You can have your own implementations for this, like:\r\n\r\n    public class NumericStringToInt {\r\n    \r\n        public static void main(String[] args) {\r\n            String str = &quot;123459&quot;;\r\n    \r\n            int num = stringToNumber(str);\r\n            System.out.println(&quot;Number of &quot; + str + &quot; is: &quot; + num);\r\n        }\r\n    \r\n        private static int stringToNumber(String str) {\r\n    \r\n            int num = 0;\r\n            int i = 0;\r\n            while (i &lt; str.length()) {\r\n                char ch = str.charAt(i);\r\n                if (ch &lt; 48 || ch &gt; 57)\r\n                    throw new NumberFormatException(&quot;&quot; + ch);\r\n                num = num * 10 + Character.getNumericValue(ch);\r\n                i++;\r\n            }\r\n            return num;\r\n        }\r\n    }\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>You can have your own implementations for this, like:</p>\n<pre><code>public class NumericStringToInt {\n\n    public static void main(String[] args) {\n        String str = &quot;123459&quot;;\n\n        int num = stringToNumber(str);\n        System.out.println(&quot;Number of &quot; + str + &quot; is: &quot; + num);\n    }\n\n    private static int stringToNumber(String str) {\n\n        int num = 0;\n        int i = 0;\n        while (i &lt; str.length()) {\n            char ch = str.charAt(i);\n            if (ch &lt; 48 || ch &gt; 57)\n                throw new NumberFormatException(&quot;&quot; + ch);\n            num = num * 10 + Character.getNumericValue(ch);\n            i++;\n        }\n        return num;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1646054479,"post_id":65108967,"comment_id":126022419,"body_markdown":"If you aren&#39;t using JavaFX GUI framework, shouldn&#39;t use its imports","body":"If you aren&#39;t using JavaFX GUI framework, shouldn&#39;t use its imports"}],"tags":[],"owner":{"account_id":8445753,"reputation":155,"user_id":6336491,"display_name":"Yogesh"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1641086633,"creation_date":1606915500,"answer_id":65108967,"question_id":5585779,"body_markdown":"Apart from all these answers, I found one new way, although it uses `Integer.parseInt()` internally.\r\n\r\nBy using\r\n\r\n```java\r\nimport javafx.util.converter.IntegerStringConverter;\r\n\r\nnew IntegerStringConverter().fromString(&quot;1234&quot;).intValue()\r\n```\r\n\r\nor\r\n\r\n```java\r\nnew IntegerStringConverter().fromString(&quot;1234&quot;)\r\n```\r\n\r\nAlthough it is a little bit costly as new objects get created.\r\n\r\nJust go through the `javafx.util.StringConverter&lt;T&gt;` class. It helps to convert any wrapper class value to a string or vice versa.\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Apart from all these answers, I found one new way, although it uses <code>Integer.parseInt()</code> internally.</p>\n<p>By using</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.util.converter.IntegerStringConverter;\n\nnew IntegerStringConverter().fromString(&quot;1234&quot;).intValue()\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>new IntegerStringConverter().fromString(&quot;1234&quot;)\n</code></pre>\n<p>Although it is a little bit costly as new objects get created.</p>\n<p>Just go through the <code>javafx.util.StringConverter&lt;T&gt;</code> class. It helps to convert any wrapper class value to a string or vice versa.</p>\n"},{"tags":[],"owner":{"account_id":17330754,"reputation":860,"user_id":12553922,"display_name":"Anis KCHAOU"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1641086456,"creation_date":1634995449,"answer_id":69688571,"question_id":5585779,"body_markdown":"With Java 11, there are several ways to convert an `int` to a `String` type:\r\n\r\n***1) Integer.parseInt()***\r\n\r\n    String str = &quot;1234&quot;;\r\n    int result = Integer.parseInt(str);\r\n\r\n***2) Integer.valueOf()***\r\n\r\n    String str = &quot;1234&quot;;\r\n    int result = Integer.valueOf(str).intValue();\r\n\r\n***3) Integer constructor***\r\n\r\n      String str = &quot;1234&quot;;\r\n      Integer result = new Integer(str);\r\n\r\n***4) Integer.decode***\r\n\r\n    String str = &quot;1234&quot;;\r\n    int result = Integer.decode(str);\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>With Java 11, there are several ways to convert an <code>int</code> to a <code>String</code> type:</p>\n<p><em><strong>1) Integer.parseInt()</strong></em></p>\n<pre><code>String str = &quot;1234&quot;;\nint result = Integer.parseInt(str);\n</code></pre>\n<p><em><strong>2) Integer.valueOf()</strong></em></p>\n<pre><code>String str = &quot;1234&quot;;\nint result = Integer.valueOf(str).intValue();\n</code></pre>\n<p><em><strong>3) Integer constructor</strong></em></p>\n<pre><code>  String str = &quot;1234&quot;;\n  Integer result = new Integer(str);\n</code></pre>\n<p><em><strong>4) Integer.decode</strong></em></p>\n<pre><code>String str = &quot;1234&quot;;\nint result = Integer.decode(str);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702046762,"creation_date":1669981331,"answer_id":74655262,"question_id":5585779,"body_markdown":"For Android developers ending up here these are various solutions for **Kotlin**:\r\n\r\n```kotlin\r\n// Throws exception if number has bad form\r\nval result1 = &quot;1234&quot;.toInt()\r\n```\r\n\r\n```kotlin\r\n// Will be null if number has bad form\r\nval result2 = &quot;1234&quot;.toIntOrNull()\r\n```\r\n\r\n```kotlin\r\n// Will be the given default if number has bad form\r\nval result3 = &quot;1234&quot;\r\n    .toIntOrNull() ?: -1\r\n```\r\n\r\n```kotlin\r\n// Will be return of the run block if number has bad form\r\nval result4 = &quot;1234&quot;\r\n    .toIntOrNull()\r\n    ?: run {\r\n        // some code\r\n        // return an Int\r\n    }\r\n```\r\n\r\n```kotlin\r\n// Ignores any none-digit character in string\r\nval result5 = &quot;12abc34&quot;\r\n    .filter { it.isDigit() }\r\n    .joinToString(separator=&quot;&quot;)\r\n    .toIntOrNull()\r\n```\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>For Android developers ending up here these are various solutions for <strong>Kotlin</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Throws exception if number has bad form\nval result1 = &quot;1234&quot;.toInt()\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Will be null if number has bad form\nval result2 = &quot;1234&quot;.toIntOrNull()\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Will be the given default if number has bad form\nval result3 = &quot;1234&quot;\n    .toIntOrNull() ?: -1\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Will be return of the run block if number has bad form\nval result4 = &quot;1234&quot;\n    .toIntOrNull()\n    ?: run {\n        // some code\n        // return an Int\n    }\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Ignores any none-digit character in string\nval result5 = &quot;12abc34&quot;\n    .filter { it.isDigit() }\n    .joinToString(separator=&quot;&quot;)\n    .toIntOrNull()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17781688,"reputation":407,"user_id":12912762,"display_name":"a55"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688558644,"creation_date":1681448409,"answer_id":76011732,"question_id":5585779,"body_markdown":"This function accepts any param types as input\r\n\r\n- then try to convert it `toString()`\r\n- then extract integer via regex\r\n- and safe convert string to int\r\n\r\n```java\r\n\tpublic int toInt(Object o) {\r\n\r\n\t\t// input param is an integer :|\r\n\t\tif (o instanceof Integer)\r\n\t\t\treturn (int) o;\r\n\r\n\t\t// input param is (null) so return zero\r\n\t\tif (o == null)\r\n\t\t\treturn 0;\r\n\r\n\t\t// input param is boolean, so false = 0 \\ true = 1\r\n\t\tif (o instanceof Boolean)\r\n\t\t\treturn Boolean.TRUE.equals(o) ? 1 : 0;\r\n\r\n\t\t// convert object to string\r\n\t\tString str = &quot;0&quot;;\r\n\t\tif (o instanceof String) {\r\n\t\t\tstr = (String) o;\r\n\t\t} else { \r\n\t\t\ttry {\r\n\t\t\t\tstr = o.toString();\r\n\t\t\t} catch (Exception e) {}\r\n\t\t}\r\n\r\n\t\t// return zero if the string is empty\r\n\t\tif (str == &quot;&quot;)\r\n\t\t\treturn 0;\r\n\r\n\t\t// detect and export numbers from the string\r\n\t\ttry {\r\n\t\t\tPattern p = Pattern.compile(&quot;\\\\d+&quot;);\r\n\t\t\tMatcher m = p.matcher(str);\r\n\t\t\tif ( m.find() ) {\r\n\t\t\t\tstr = m.group(0);\r\n\t\t\t} else { // string not contains any numbers\r\n                str = &quot;0&quot;;\r\n            }\r\n\t\t} catch (Exception e) {\r\n\t\t\tstr = &quot;0&quot;;\r\n        }\r\n\t\t\r\n\t\t// java stores integers in 32-bit, so can not store more than 10 digits\r\n\t\tif (str.length() &gt; 19) {\r\n\t\t\tstr = str.substring(0, 19);\r\n\t\t}\r\n\r\n\t\t// convert string to integer\r\n\t\tint result = 0;\r\n\t\ttry {\r\n\t\t\tresult = Integer.parseInt(str);\r\n\t\t} catch (Exception e) {}\r\n\r\n\t\treturn result;\r\n\t}\r\n```\r\n\r\nYou can change\r\n\r\n    catch (Exception e) {}\r\n\r\nto\r\n\r\n    catch (Exception e) { e.printStackTrace(); }\r\n\r\nto show more detailed data about errors in logcat\r\n\r\n\r\nCan handle inputs such as :\r\n-\r\n- `false`\r\n- `&quot;&quot;`\r\n- `&quot;00004&quot;`\r\n- `&quot;  51&quot;`\r\n- `&quot;74.6ab.cd&quot;`\r\n- `&quot;foo 654 bar&quot;`\r\n\r\n\r\n# Warning\r\n\r\nThis function will change (string)`&quot;ab2cd3ef4&quot;` to (int)`234`","title":"How do I convert a String to an int in Java?","body":"<p>This function accepts any param types as input</p>\n<ul>\n<li>then try to convert it <code>toString()</code></li>\n<li>then extract integer via regex</li>\n<li>and safe convert string to int</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    public int toInt(Object o) {\n\n        // input param is an integer :|\n        if (o instanceof Integer)\n            return (int) o;\n\n        // input param is (null) so return zero\n        if (o == null)\n            return 0;\n\n        // input param is boolean, so false = 0 \\ true = 1\n        if (o instanceof Boolean)\n            return Boolean.TRUE.equals(o) ? 1 : 0;\n\n        // convert object to string\n        String str = &quot;0&quot;;\n        if (o instanceof String) {\n            str = (String) o;\n        } else { \n            try {\n                str = o.toString();\n            } catch (Exception e) {}\n        }\n\n        // return zero if the string is empty\n        if (str == &quot;&quot;)\n            return 0;\n\n        // detect and export numbers from the string\n        try {\n            Pattern p = Pattern.compile(&quot;\\\\d+&quot;);\n            Matcher m = p.matcher(str);\n            if ( m.find() ) {\n                str = m.group(0);\n            } else { // string not contains any numbers\n                str = &quot;0&quot;;\n            }\n        } catch (Exception e) {\n            str = &quot;0&quot;;\n        }\n        \n        // java stores integers in 32-bit, so can not store more than 10 digits\n        if (str.length() &gt; 19) {\n            str = str.substring(0, 19);\n        }\n\n        // convert string to integer\n        int result = 0;\n        try {\n            result = Integer.parseInt(str);\n        } catch (Exception e) {}\n\n        return result;\n    }\n</code></pre>\n<p>You can change</p>\n<pre><code>catch (Exception e) {}\n</code></pre>\n<p>to</p>\n<pre><code>catch (Exception e) { e.printStackTrace(); }\n</code></pre>\n<p>to show more detailed data about errors in logcat</p>\n<h2>Can handle inputs such as :</h2>\n<ul>\n<li><code>false</code></li>\n<li><code>&quot;&quot;</code></li>\n<li><code>&quot;00004&quot;</code></li>\n<li><code>&quot;  51&quot;</code></li>\n<li><code>&quot;74.6ab.cd&quot;</code></li>\n<li><code>&quot;foo 654 bar&quot;</code></li>\n</ul>\n<h1>Warning</h1>\n<p>This function will change (string)<code>&quot;ab2cd3ef4&quot;</code> to (int)<code>234</code></p>\n"}],"owner":{"account_id":256928,"reputation":44771,"user_id":537967,"accept_rate":75,"display_name":"Unknown user"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6758890,"favorite_count":0,"down_vote_count":29,"up_vote_count":3522,"accepted_answer_id":5585800,"answer_count":30,"score":3493,"last_activity_date":1702046762,"creation_date":1302200874,"question_id":5585779,"body_markdown":"How can I convert a `String` value to an `int` type?\r\n\r\n```java\r\n&quot;1234&quot;  →  1234\r\n```\r\n","title":"How do I convert a String to an int in Java?","body":"<p>How can I convert a <code>String</code> value to an <code>int</code> type?</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;1234&quot;  →  1234\n</code></pre>\n"},{"tags":["java","http","httprequest","httpurlconnection","urlconnection"],"comments":[{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":2,"creation_date":1640979092,"post_id":2793150,"comment_id":124703591,"body_markdown":"Some questions with lots of votes and general titles are flagged duplicate and link to this question. Also, there are [new ways](https://openjdk.java.net/groups/net/httpclient/intro.html) to execute HTTP requests in Java and the legacy *URLConnection* way may be deprecated in future. The title of this question should probably change to *How to execute HTTP requests in Java*.","body":"Some questions with lots of votes and general titles are flagged duplicate and link to this question. Also, there are <a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"nofollow noreferrer\">new ways</a> to execute HTTP requests in Java and the legacy <i>URLConnection</i> way may be deprecated in future. The title of this question should probably change to <i>How to execute HTTP requests in Java</i>."},{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1669473741,"post_id":2793150,"comment_id":131650667,"body_markdown":"Related: [How to send HTTP request in Java?](https://stackoverflow.com/q/1359689/8583692)","body":"Related: <a href=\"https://stackoverflow.com/q/1359689/8583692\">How to send HTTP request in Java?</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697342997,"post_id":2793150,"comment_id":136266921,"body_markdown":"Many of your questions are already answered in the Javadoc of [`HttpURLConnection`](https://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html).","body":"Many of your questions are already answered in the Javadoc of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"nofollow noreferrer\"><code>HttpURLConnection</code></a>."},{"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1697372368,"post_id":2793150,"comment_id":136269146,"body_markdown":"That&#39;s correct. There are however people who prefer concrete code examples because they are not always capable to turn the to them opaque wording in Javadoc into properly working code. That&#39;s among others what Stack Overflow is for.","body":"That&#39;s correct. There are however people who prefer concrete code examples because they are not always capable to turn the to them opaque wording in Javadoc into properly working code. That&#39;s among others what Stack Overflow is for."}],"answers":[{"comments":[{"owner":{"account_id":460624,"reputation":3557,"user_id":861832,"accept_rate":84,"display_name":"oneiros"},"score":0,"creation_date":1329941681,"post_id":2793153,"comment_id":11881060,"body_markdown":"I get a response code 500 doing a post using java.net.HTTLUrlConnection ... when doing it through jquery I don&#39;t get error even though the parameters are the same. Any idea why this is so?","body":"I get a response code 500 doing a post using java.net.HTTLUrlConnection ... when doing it through jquery I don&#39;t get error even though the parameters are the same. Any idea why this is so?"},{"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1329941837,"post_id":2793153,"comment_id":11881119,"body_markdown":"@imperator: It&#39;s a bug in the server&#39;s code. It threw an exception. The error page which may contain detailed exception information is available in `getErrorStream()`. See also &quot;Error Handling&quot; part in the above answer. Or if it&#39;s your own server, read its server logs.","body":"@imperator: It&#39;s a bug in the server&#39;s code. It threw an exception. The error page which may contain detailed exception information is available in <code>getErrorStream()</code>. See also &quot;Error Handling&quot; part in the above answer. Or if it&#39;s your own server, read its server logs."},{"owner":{"account_id":316326,"reputation":9015,"user_id":632447,"accept_rate":91,"display_name":"nikhil"},"score":0,"creation_date":1334430153,"post_id":2793153,"comment_id":13026725,"body_markdown":"`connection.getHeaderFields().entrySet()` doesn&#39;t even compile. HttpURLConnection doesn&#39;t have those methods.","body":"<code>connection.getHeaderFields().entrySet()</code> doesn&#39;t even compile. HttpURLConnection doesn&#39;t have those methods."},{"owner":{"account_id":98783,"reputation":4948,"user_id":267196,"accept_rate":94,"display_name":"Jan Algermissen"},"score":0,"creation_date":1334432600,"post_id":2793153,"comment_id":13027207,"body_markdown":"Hey, the meaning of Accept-Charset is very different from what you write above!","body":"Hey, the meaning of Accept-Charset is very different from what you write above!"},{"owner":{"account_id":482742,"reputation":451,"user_id":897341,"accept_rate":91,"display_name":"aseq"},"score":0,"creation_date":1336031581,"post_id":2793153,"comment_id":13456608,"body_markdown":"With regards to the &quot;System.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);&quot; because &quot;HttpURLConnection implementation is somewhat buggy&quot;, I got bitten by that. Every second connection attempt would return no results. After setting keepAlive to false it worked fine.","body":"With regards to the &quot;System.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);&quot; because &quot;HttpURLConnection implementation is somewhat buggy&quot;, I got bitten by that. Every second connection attempt would return no results. After setting keepAlive to false it worked fine."},{"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":3,"creation_date":1349788978,"post_id":2793153,"comment_id":17309614,"body_markdown":"@Brais: Please read the spec. The `--` part is not part of the boundary itself. It&#39;s just a separator string. I&#39;ve rolled back your invalid edit.","body":"@Brais: Please read the spec. The <code>--</code> part is not part of the boundary itself. It&#39;s just a separator string. I&#39;ve rolled back your invalid edit."},{"owner":{"account_id":259272,"reputation":2197,"user_id":542025,"accept_rate":50,"display_name":"Steven De Groote"},"score":0,"creation_date":1367246497,"post_id":2793153,"comment_id":23302371,"body_markdown":"It may be good to mention the `disconnect()` method to actually terminate the request once you&#39;re done to prevent keeping it open for too long / eternity","body":"It may be good to mention the <code>disconnect()</code> method to actually terminate the request once you&#39;re done to prevent keeping it open for too long / eternity"},{"owner":{"account_id":2714223,"reputation":47902,"user_id":2341938,"display_name":"gkalpak"},"score":0,"creation_date":1368136410,"post_id":2793153,"comment_id":23633873,"body_markdown":"@BalusC In section `Firing a HTTP GET request with (optionally) query parameters` it is mentioned that &quot;*The Accept-Charset header may hint the server what encoding the parameters are in.*&quot;. According to the [HTTP Spec](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2) &quot;*The Accept-Charset request-header field can be used to indicate what character sets are acceptable for the response.*&quot; (not the request). Am I missing something here ?","body":"@BalusC In section <code>Firing a HTTP GET request with (optionally) query parameters</code> it is mentioned that &quot;<i>The Accept-Charset header may hint the server what encoding the parameters are in.</i>&quot;. According to the <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\" rel=\"nofollow noreferrer\">HTTP Spec</a> &quot;<i>The Accept-Charset request-header field can be used to indicate what character sets are acceptable for the response.</i>&quot; (not the request). Am I missing something here ?"},{"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1368186127,"post_id":2793153,"comment_id":23650171,"body_markdown":"@Expert: That&#39;s correct. However, some servers may &quot;guess&quot; request parameter encoding based on this. I&#39;ve also explicitly stated *&quot;may hint&quot;* and not e.g. *&quot;instructs&quot;* or so. If it doesn&#39;t work for your target server, then it&#39;s just bad luck.","body":"@Expert: That&#39;s correct. However, some servers may &quot;guess&quot; request parameter encoding based on this. I&#39;ve also explicitly stated <i>&quot;may hint&quot;</i> and not e.g. <i>&quot;instructs&quot;</i> or so. If it doesn&#39;t work for your target server, then it&#39;s just bad luck."},{"owner":{"account_id":2714223,"reputation":47902,"user_id":2341938,"display_name":"gkalpak"},"score":0,"creation_date":1368192614,"post_id":2793153,"comment_id":23653928,"body_markdown":"@BalusC: Not that I know too much about it, but I haven&#39;t ever found a source of indication that &quot;Accept-Charset&quot; could hint about the request query-params encoding. Yet, if you say it does, I surely trust you more on this one than me. (Just to make clear, I have not tried it on any server, so my comment was on a pure theoreticaly speaking basis.) Thx for your answer !","body":"@BalusC: Not that I know too much about it, but I haven&#39;t ever found a source of indication that &quot;Accept-Charset&quot; could hint about the request query-params encoding. Yet, if you say it does, I surely trust you more on this one than me. (Just to make clear, I have not tried it on any server, so my comment was on a pure theoreticaly speaking basis.) Thx for your answer !"},{"owner":{"account_id":48818,"reputation":40628,"user_id":145173,"accept_rate":79,"display_name":"Edward Brey"},"score":0,"creation_date":1380030189,"post_id":2793153,"comment_id":28040456,"body_markdown":"Should we add a caveat next to &quot;HttpClient is much more convenient&quot; that the Android SDK says &quot;[Prefer HttpURLConnection for new code](http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html)&quot;?","body":"Should we add a caveat next to &quot;HttpClient is much more convenient&quot; that the Android SDK says &quot;<a href=\"http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html\" rel=\"nofollow noreferrer\">Prefer HttpURLConnection for new code</a>&quot;?"},{"owner":{"account_id":2557108,"reputation":2556,"user_id":2218838,"accept_rate":58,"display_name":"Anderson"},"score":0,"creation_date":1389239827,"post_id":2793153,"comment_id":31579999,"body_markdown":"It&#39;s necessary to set a timeout or the current thread may be blocked. See `setConnectTimeout` and `setReadTimeout`.","body":"It&#39;s necessary to set a timeout or the current thread may be blocked. See <code>setConnectTimeout</code> and <code>setReadTimeout</code>."},{"owner":{"account_id":351165,"reputation":1355,"user_id":687467,"accept_rate":60,"display_name":"yati sagade"},"score":10,"creation_date":1397539652,"post_id":2793153,"comment_id":35265439,"body_markdown":"The sad part is that on Android it is *not* recommended to use the Apache `HttpClient` now and `HttpURLConnection` is cruel. http://android-developers.blogspot.in/2011/09/androids-http-clients.html","body":"The sad part is that on Android it is <i>not</i> recommended to use the Apache <code>HttpClient</code> now and <code>HttpURLConnection</code> is cruel. <a href=\"http://android-developers.blogspot.in/2011/09/androids-http-clients.html\" rel=\"nofollow noreferrer\">android-developers.blogspot.in/2011/09/&hellip;</a>"},{"owner":{"account_id":1749879,"reputation":3381,"user_id":1599213,"accept_rate":33,"display_name":"To Kra"},"score":1,"creation_date":1402428168,"post_id":2793153,"comment_id":37266706,"body_markdown":"According to my simple measures URLConn is 400-500ms faster than Apache.Httpclient","body":"According to my simple measures URLConn is 400-500ms faster than Apache.Httpclient"},{"owner":{"account_id":1023865,"reputation":2105,"user_id":1033591,"accept_rate":77,"display_name":"Alston"},"score":0,"creation_date":1413895710,"post_id":2793153,"comment_id":41608431,"body_markdown":"Why after I set `httpConnection.setChunkedStreamingMode(1024);`, nothing can not be uploaded? (No files appear at server.)","body":"Why after I set <code>httpConnection.setChunkedStreamingMode(1024);</code>, nothing can not be uploaded? (No files appear at server.)"},{"owner":{"account_id":3149313,"reputation":24760,"user_id":2738565,"accept_rate":29,"display_name":"Haresh Chhelana"},"score":1,"creation_date":1433395473,"post_id":2793153,"comment_id":49336094,"body_markdown":"I can not find Files.copy() and binaryFile.toPath() such methods.","body":"I can not find Files.copy() and binaryFile.toPath() such methods."},{"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1433400595,"post_id":2793153,"comment_id":49338508,"body_markdown":"@Haresh: They are part of Java 7. Like as those `try-with-resources` statements. Perhaps you&#39;re still on long EOL&#39;ed Java 6 or even older? Just upgrade to at least Java 7 (we&#39;re currently already on Java 8), or replace Java 7 code by older Java equivalents. E.g. an old fashioned `for` loop writing a buffer from input to ouput.","body":"@Haresh: They are part of Java 7. Like as those <code>try-with-resources</code> statements. Perhaps you&#39;re still on long EOL&#39;ed Java 6 or even older? Just upgrade to at least Java 7 (we&#39;re currently already on Java 8), or replace Java 7 code by older Java equivalents. E.g. an old fashioned <code>for</code> loop writing a buffer from input to ouput."},{"owner":{"account_id":5588540,"reputation":12118,"user_id":4428462,"accept_rate":86,"display_name":"Jonas Czech"},"score":0,"creation_date":1455634819,"post_id":2793153,"comment_id":58569722,"body_markdown":"[OkHttp](http://square.github.io/okhttp/) is even easier, works on Android. Trust me - it&#39;s so much better than plain old HttUrlConnection.","body":"<a href=\"http://square.github.io/okhttp/\" rel=\"nofollow noreferrer\">OkHttp</a> is even easier, works on Android. Trust me - it&#39;s so much better than plain old HttUrlConnection."},{"owner":{"account_id":210629,"reputation":14178,"user_id":462347,"accept_rate":99,"display_name":"Mike"},"score":0,"creation_date":1458750169,"post_id":2793153,"comment_id":60002359,"body_markdown":"@BalusC, thanks for the detailed explanation. One more moment, `JSOUP` 1.8.3 contains method `validateTLSCertificates()`. Is there any difference/benefits between using your snippet and just call JSOUP&#39;s `validateTLSCertificates()` (http://jsoup.org/apidocs/org/jsoup/Connection.html#validateTLSCertificates-boolean-)?","body":"@BalusC, thanks for the detailed explanation. One more moment, <code>JSOUP</code> 1.8.3 contains method <code>validateTLSCertificates()</code>. Is there any difference/benefits between using your snippet and just call JSOUP&#39;s <code>validateTLSCertificates()</code> (<a href=\"http://jsoup.org/apidocs/org/jsoup/Connection.html#validateTLSCertificates-boolean-\" rel=\"nofollow noreferrer\">jsoup.org/apidocs/org/jsoup/&hellip;</a>)?"},{"owner":{"account_id":5351617,"reputation":1633,"user_id":4265610,"accept_rate":58,"display_name":"Luke"},"score":0,"creation_date":1518431833,"post_id":2793153,"comment_id":84488693,"body_markdown":"How do I integrate the last part, &quot;Dealing with untrusted or misconfigured HTTPS sites&quot;, with Jsoup.connect(httpsurl).get() method?","body":"How do I integrate the last part, &quot;Dealing with untrusted or misconfigured HTTPS sites&quot;, with Jsoup.connect(httpsurl).get() method?"},{"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1518434443,"post_id":2793153,"comment_id":84490279,"body_markdown":"@Luke Just copy paste the block in one of your involved classes.","body":"@Luke Just copy paste the block in one of your involved classes."},{"owner":{"account_id":5351617,"reputation":1633,"user_id":4265610,"accept_rate":58,"display_name":"Luke"},"score":0,"creation_date":1518441542,"post_id":2793153,"comment_id":84494722,"body_markdown":"I ran my application with -Djavax.net.debug=ssl:handshake, with and without the above code and it seems to do the same things.","body":"I ran my application with -Djavax.net.debug=ssl:handshake, with and without the above code and it seems to do the same things."},{"owner":{"account_id":13697,"reputation":7703,"user_id":27658,"display_name":"Johannes Brodwall"},"score":0,"creation_date":1563223865,"post_id":2793153,"comment_id":100621417,"body_markdown":"A better alternative to trusting all certificates is to trust the specific certificates that you deal with. The code is actually shorter. Here&#39;s an example: https://stackoverflow.com/a/57046932/27658","body":"A better alternative to trusting all certificates is to trust the specific certificates that you deal with. The code is actually shorter. Here&#39;s an example: <a href=\"https://stackoverflow.com/a/57046932/27658\">stackoverflow.com/a/57046932/27658</a>"},{"owner":{"account_id":452419,"reputation":916,"user_id":848850,"accept_rate":20,"display_name":"nsandersen"},"score":0,"creation_date":1563958069,"post_id":2793153,"comment_id":100869134,"body_markdown":"Might be useful to add a note about why you get `java.lang.IllegalArgumentException: URI can&#39;t be null.` when you do a GET like this (with a non-null URL).","body":"Might be useful to add a note about why you get <code>java.lang.IllegalArgumentException: URI can&#39;t be null.</code> when you do a GET like this (with a non-null URL)."}],"tags":[],"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":24,"down_vote_count":9,"up_vote_count":2852,"is_accepted":true,"score":2843,"last_activity_date":1628684869,"creation_date":1273299397,"answer_id":2793153,"question_id":2793150,"body_markdown":"&lt;sup&gt;*First a disclaimer beforehand: the posted code snippets are all basic examples. You&#39;ll need to handle trivial `IOException`s and `RuntimeException`s like `NullPointerException`, `ArrayIndexOutOfBoundsException` and consorts yourself.*&lt;/sup&gt;\r\n\r\n&lt;sup&gt;*In case you&#39;re developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are [disabled by default](https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled). You are encouraged to use `HttpsURLConnection`, but if it is really necessary, cleartext can be enabled in the [Application Manifest]((https://developer.android.com/guide/topics/manifest/application-element#usesCleartextTraffic)).*&lt;/sup&gt;\r\n\r\n---\r\n\r\n### Preparing\r\n\r\nWe first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.\r\n\r\n    String url = &quot;http://example.com&quot;;\r\n    String charset = &quot;UTF-8&quot;;  // Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\r\n    String param1 = &quot;value1&quot;;\r\n    String param2 = &quot;value2&quot;;\r\n    // ...\r\n\r\n    String query = String.format(&quot;param1=%s&amp;param2=%s&quot;,\r\n        URLEncoder.encode(param1, charset),\r\n        URLEncoder.encode(param2, charset));\r\n\r\nThe query parameters must be in `name=value` format and be concatenated by `&amp;`. You would normally also [URL-encode][1] the query parameters with the specified charset using [`URLEncoder#encode()`][2].\r\n\r\n&lt;sup&gt;The `String#format()` is just for convenience. I prefer it when I would need the String concatenation operator `+` more than twice.&lt;/sup&gt;\r\n\r\n---\r\n\r\n### Firing an [HTTP GET][3] request with (optionally) query parameters\r\n\r\nIt&#39;s a trivial task. It&#39;s the default request method.\r\n\r\n    URLConnection connection = new URL(url + &quot;?&quot; + query).openConnection();\r\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\r\n    InputStream response = connection.getInputStream();\r\n    // ...\r\n\r\nAny query string should be concatenated to the URL using `?`. The [`Accept-Charset`][4] header may hint the server what encoding the parameters are in. If you don&#39;t send any query string, then you can leave the `Accept-Charset` header away. If you don&#39;t need to set any headers, then you can even use the [`URL#openStream()`][5] shortcut method.\r\n\r\n    InputStream response = new URL(url).openStream();\r\n    // ...\r\n\r\nEither way, if the other side is an [`HttpServlet`][6], then its [`doGet()`][7] method will be called and the parameters will be available by [`HttpServletRequest#getParameter()`][8].\r\n\r\nFor testing purposes, you can print the response body to [standard output][9] as below:\r\n\r\n    try (Scanner scanner = new Scanner(response)) {\r\n        String responseBody = scanner.useDelimiter(&quot;\\\\A&quot;).next();\r\n        System.out.println(responseBody);\r\n    }\r\n\r\n---\r\n\r\n### Firing an [HTTP POST][10] request with query parameters\r\n\r\nSetting the [`URLConnection#setDoOutput()`][11] to `true` implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type `application/x-www-form-urlencoded` wherein the query string is written to the request body.\r\n\r\n    URLConnection connection = new URL(url).openConnection();\r\n    connection.setDoOutput(true); // Triggers POST.\r\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\r\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=&quot; + charset);\r\n\r\n    try (OutputStream output = connection.getOutputStream()) {\r\n        output.write(query.getBytes(charset));\r\n    }\r\n\r\n    InputStream response = connection.getInputStream();\r\n    // ...\r\n\r\nNote: whenever you&#39;d like to submit a HTML form programmatically, don&#39;t forget to take the `name=value` pairs of any `&lt;input type=&quot;hidden&quot;&gt;` elements into the query string and of course also the `name=value` pair of the `&lt;input type=&quot;submit&quot;&gt;` element which you&#39;d like to &quot;press&quot; programmatically (because that&#39;s usually been used in the server side to distinguish if a button was pressed and if so, which one).\r\n\r\nYou can also cast the obtained [`URLConnection`][12] to [`HttpURLConnection`][13] and use its [`HttpURLConnection#setRequestMethod()`][14] instead. But if you&#39;re trying to use the connection for output you still need to set [`URLConnection#setDoOutput()`][11] to `true`.\r\n\r\n    HttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();\r\n    httpConnection.setRequestMethod(&quot;POST&quot;);\r\n    // ...\r\n\r\nEither way, if the other side is an [`HttpServlet`][6], then its [`doPost()`][15] method will be called and the parameters will be available by [`HttpServletRequest#getParameter()`][8].\r\n\r\n---\r\n\r\n### Actually firing the HTTP request\r\n\r\nYou can fire the HTTP request explicitly with [`URLConnection#connect()`][16], but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using [`URLConnection#getInputStream()`][17] and so on. The above examples does exactly that, so the `connect()` call is in fact superfluous.\r\n\r\n---\r\n\r\n### Gathering HTTP response information\r\n\r\n1. [HTTP response status][18]:\r\n\r\n You need an [`HttpURLConnection`][13] here. Cast it first if necessary.\r\n\r\n        int status = httpConnection.getResponseCode();\r\n2. [HTTP response headers][19]:\r\n\r\n        for (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {\r\n            System.out.println(header.getKey() + &quot;=&quot; + header.getValue());\r\n        }\r\n\r\n3. [HTTP response encoding][20]:\r\n\r\n When the `Content-Type` contains a `charset` parameter, then the response body is likely text based and we&#39;d like to process the response body with the server-side specified character encoding then.\r\n\r\n        String contentType = connection.getHeaderField(&quot;Content-Type&quot;);\r\n        String charset = null;\r\n\r\n        for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\r\n            if (param.startsWith(&quot;charset=&quot;)) {\r\n                charset = param.split(&quot;=&quot;, 2)[1];\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (charset != null) {\r\n            try (BufferedReader reader = new BufferedReader(new InputStreamReader(response, charset))) {\r\n                for (String line; (line = reader.readLine()) != null;) {\r\n                    // ... System.out.println(line)?\r\n                }\r\n            }\r\n        } else {\r\n            // It&#39;s likely binary content, use InputStream/OutputStream.\r\n        }\r\n\r\n---\r\n\r\n### Maintaining the session\r\n\r\nThe server side session is usually backed by a cookie. Some web forms require that you&#39;re logged in and/or are tracked by a session. You can use the [`CookieHandler`][21] API to maintain cookies. You need to prepare a [`CookieManager`][22] with a [`CookiePolicy`][23] of [`ACCEPT_ALL`][24] before sending all HTTP requests.\r\n\r\n    // First set the default cookie manager.\r\n    CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\r\n\r\n    // All the following subsequent URLConnections will use the same cookie manager.\r\n    URLConnection connection = new URL(url).openConnection();\r\n    // ...\r\n\r\n    connection = new URL(url).openConnection();\r\n    // ...\r\n\r\n    connection = new URL(url).openConnection();\r\n    // ...\r\n\r\nNote that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all `Set-Cookie` headers from the response of the login or the first `GET` request and then pass this through the subsequent requests.\r\n\r\n    // Gather all cookies on the first request.\r\n    URLConnection connection = new URL(url).openConnection();\r\n    List&lt;String&gt; cookies = connection.getHeaderFields().get(&quot;Set-Cookie&quot;);\r\n    // ...\r\n\r\n    // Then use the same cookies on all subsequent requests.\r\n    connection = new URL(url).openConnection();\r\n    for (String cookie : cookies) {\r\n        connection.addRequestProperty(&quot;Cookie&quot;, cookie.split(&quot;;&quot;, 2)[0]);\r\n    }\r\n    // ...\r\n\r\nThe `split(&quot;;&quot;, 2)[0]` is there to get rid of cookie attributes which are irrelevant for the server side like `expires`, `path`, etc. Alternatively, you could also use `cookie.substring(0, cookie.indexOf(&#39;;&#39;))` instead of `split()`.\r\n\r\n---\r\n\r\n### Streaming mode\r\n\r\nThe [`HttpURLConnection`][13] will by default buffer the *entire* request body before actually sending it, regardless of whether you&#39;ve set a fixed content length yourself using `connection.setRequestProperty(&quot;Content-Length&quot;, contentLength);`. This may cause `OutOfMemoryException`s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the [`HttpURLConnection#setFixedLengthStreamingMode()`][25].\r\n\r\n    httpConnection.setFixedLengthStreamingMode(contentLength);\r\n\r\nBut if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the [`HttpURLConnection#setChunkedStreamingMode()`][26] accordingly. This will set the HTTP [`Transfer-Encoding`][27] header to `chunked` which will force the request body being sent in chunks. The below example will send the body in chunks of 1&amp;nbsp;KB.\r\n\r\n    httpConnection.setChunkedStreamingMode(1024);\r\n\r\n---\r\n\r\n### User-Agent\r\n\r\nIt can happen that [a request returns an unexpected response, while it works fine with a real web browser][28]. The server side is probably blocking requests based on the [`User-Agent`][29] request header. The `URLConnection` will by default set it to `Java/1.6.0_19` where the last part is obviously the JRE version. You can override this as follows:\r\n\r\n    connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;); // Do as if you&#39;re using Chrome 41 on Windows 7.\r\n\r\nUse the User-Agent string from a [recent browser][30].\r\n\r\n---\r\n\r\n### Error handling\r\n\r\nIf the HTTP response code is `4nn` (Client Error) or `5nn` (Server Error), then you may want to read the `HttpURLConnection#getErrorStream()` to see if the server has sent any useful error information.\r\n\r\n    InputStream error = ((HttpURLConnection) connection).getErrorStream();\r\n\r\nIf the HTTP response code is -1, then something went wrong with connection and response handling. The `HttpURLConnection` implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the `http.keepAlive` system property to `false`. You can do this programmatically in the beginning of your application by:\r\n\r\n    System.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);\r\n\r\n---\r\n\r\n### Uploading files\r\n\r\nYou&#39;d normally use [`multipart/form-data`][31] encoding for mixed POST content (binary and character data). The encoding is in more detail described in [RFC2388][32].\r\n\r\n    String param = &quot;value&quot;;\r\n    File textFile = new File(&quot;/path/to/file.txt&quot;);\r\n    File binaryFile = new File(&quot;/path/to/file.bin&quot;);\r\n    String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\r\n    String CRLF = &quot;\\r\\n&quot;; // Line separator required by multipart/form-data.\r\n    URLConnection connection = new URL(url).openConnection();\r\n    connection.setDoOutput(true);\r\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\r\n\r\n    try (\r\n        OutputStream output = connection.getOutputStream();\r\n        PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\r\n    ) {\r\n        // Send normal param.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF);\r\n        writer.append(CRLF).append(param).append(CRLF).flush();\r\n\r\n        // Send text file.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot; + textFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF); // Text file itself must be saved in this charset!\r\n        writer.append(CRLF).flush();\r\n        Files.copy(textFile.toPath(), output);\r\n        output.flush(); // Important before continuing with writer!\r\n        writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\r\n\r\n        // Send binary file.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot; + binaryFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: &quot; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\r\n        writer.append(&quot;Content-Transfer-Encoding: binary&quot;).append(CRLF);\r\n        writer.append(CRLF).flush();\r\n        Files.copy(binaryFile.toPath(), output);\r\n        output.flush(); // Important before continuing with writer!\r\n        writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\r\n\r\n        // End of multipart/form-data.\r\n        writer.append(&quot;--&quot; + boundary + &quot;--&quot;).append(CRLF).flush();\r\n    }\r\n\r\nIf the other side is an [`HttpServlet`][6], then its [`doPost()`][15] method will be called and the parts will be available by [`HttpServletRequest#getPart()`][33] (note, thus **not** `getParameter()` and so on!). The `getPart()` method is however relatively new, it&#39;s introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using [Apache Commons FileUpload][34] to parse a `multipart/form-data` request. Also see [this answer][35] for examples of both the FileUpload and the Servelt 3.0 approaches.\r\n\r\n---\r\n\r\n### Dealing with untrusted or misconfigured HTTPS sites\r\n\r\n&lt;sup&gt;*In case you&#39;re developing for Android instead of Java, **be careful**: the workaround below may save your day if you don&#39;t have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see https://support.google.com/faqs/answer/7188426.*&lt;/sup&gt;\r\n\r\nSometimes you need to connect an HTTPS URL, perhaps because you&#39;re writing a web scraper. In that case, you may likely face a `javax.net.ssl.SSLException: Not trusted server certificate` on some HTTPS sites who doesn&#39;t keep their SSL certificates up to date, or a `java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found` or `javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name` on some misconfigured HTTPS sites.\r\n\r\nThe following one-time-run `static` initializer in your web scraper class should make `HttpsURLConnection` more lenient as to those HTTPS sites and thus not throw those exceptions anymore.\r\n\r\n    static {\r\n        TrustManager[] trustAllCertificates = new TrustManager[] {\r\n            new X509TrustManager() {\r\n                @Override\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return null; // Not relevant.\r\n                }\r\n                @Override\r\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n                    // Do nothing. Just allow them all.\r\n                }\r\n                @Override\r\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n                    // Do nothing. Just allow them all.\r\n                }\r\n            }\r\n        };\r\n\r\n        HostnameVerifier trustAllHostnames = new HostnameVerifier() {\r\n            @Override\r\n            public boolean verify(String hostname, SSLSession session) {\r\n                return true; // Just allow them all.\r\n            }\r\n        };\r\n\r\n        try {\r\n            System.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\r\n            SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n            sc.init(null, trustAllCertificates, new SecureRandom());\r\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n            HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\r\n        }\r\n        catch (GeneralSecurityException e) {\r\n            throw new ExceptionInInitializerError(e);\r\n        }\r\n    }\r\n\r\n---\r\n\r\n### Last words\r\n\r\nThe [Apache HttpComponents HttpClient][36] is *much* more convenient in this all :)\r\n\r\n- [HttpClient Tutorial][37]\r\n- [HttpClient Examples][38]\r\n\r\n---\r\n\r\n### Parsing and extracting HTML\r\n\r\nIf all you want is parsing and extracting data from HTML, then better use a HTML parser like [Jsoup][39].\r\n\r\n- [What are the pros/cons of leading HTML parsers in Java][40]\r\n- [How to scan and extract a webpage in Java][41]\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Percent-encoding\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-\r\n  [3]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3\r\n  [4]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29\r\n  [6]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\r\n  [7]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\r\n  [8]: http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\r\n  [9]: https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\r\n  [10]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5\r\n  [11]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\r\n  [12]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\r\n  [13]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\r\n  [14]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\r\n  [15]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\r\n  [16]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29\r\n  [17]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29\r\n  [18]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\r\n  [19]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\r\n  [20]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17\r\n  [21]: http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html\r\n  [22]: http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html\r\n  [23]: http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html\r\n  [24]: http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL\r\n  [25]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29\r\n  [26]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29\r\n  [27]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41\r\n  [28]: https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser\r\n  [29]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43\r\n  [30]: http://www.useragentstring.com/pages/useragentstring.php\r\n  [31]: http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\r\n  [32]: http://www.faqs.org/rfcs/rfc2388.html\r\n  [33]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29\r\n  [34]: http://commons.apache.org/fileupload\r\n  [35]: https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824\r\n  [36]: http://hc.apache.org/httpcomponents-client-ga/\r\n  [37]: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/\r\n  [38]: http://hc.apache.org/httpcomponents-client-ga/examples.html\r\n  [39]: http://jsoup.org\r\n  [40]: https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281\r\n  [41]: https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555\r\n\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p><sup><em>First a disclaimer beforehand: the posted code snippets are all basic examples. You'll need to handle trivial <code>IOException</code>s and <code>RuntimeException</code>s like <code>NullPointerException</code>, <code>ArrayIndexOutOfBoundsException</code> and consorts yourself.</em></sup></p>\n<p><sup><em>In case you're developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are <a href=\"https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled\" rel=\"noreferrer\">disabled by default</a>. You are encouraged to use <code>HttpsURLConnection</code>, but if it is really necessary, cleartext can be enabled in the Application Manifest.</em></sup></p>\n<hr />\n<h3>Preparing</h3>\n<p>We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.</p>\n<pre><code>String url = &quot;http://example.com&quot;;\nString charset = &quot;UTF-8&quot;;  // Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\nString param1 = &quot;value1&quot;;\nString param2 = &quot;value2&quot;;\n// ...\n\nString query = String.format(&quot;param1=%s&amp;param2=%s&quot;,\n    URLEncoder.encode(param1, charset),\n    URLEncoder.encode(param2, charset));\n</code></pre>\n<p>The query parameters must be in <code>name=value</code> format and be concatenated by <code>&amp;</code>. You would normally also <a href=\"http://en.wikipedia.org/wiki/Percent-encoding\" rel=\"noreferrer\">URL-encode</a> the query parameters with the specified charset using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-\" rel=\"noreferrer\"><code>URLEncoder#encode()</code></a>.</p>\n<p><sup>The <code>String#format()</code> is just for convenience. I prefer it when I would need the String concatenation operator <code>+</code> more than twice.</sup></p>\n<hr />\n<h3>Firing an <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3\" rel=\"noreferrer\">HTTP GET</a> request with (optionally) query parameters</h3>\n<p>It's a trivial task. It's the default request method.</p>\n<pre><code>URLConnection connection = new URL(url + &quot;?&quot; + query).openConnection();\nconnection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\nInputStream response = connection.getInputStream();\n// ...\n</code></pre>\n<p>Any query string should be concatenated to the URL using <code>?</code>. The <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\" rel=\"noreferrer\"><code>Accept-Charset</code></a> header may hint the server what encoding the parameters are in. If you don't send any query string, then you can leave the <code>Accept-Charset</code> header away. If you don't need to set any headers, then you can even use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29\" rel=\"noreferrer\"><code>URL#openStream()</code></a> shortcut method.</p>\n<pre><code>InputStream response = new URL(url).openStream();\n// ...\n</code></pre>\n<p>Either way, if the other side is an <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\"><code>HttpServlet</code></a>, then its <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\" rel=\"noreferrer\"><code>doGet()</code></a> method will be called and the parameters will be available by <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpServletRequest#getParameter()</code></a>.</p>\n<p>For testing purposes, you can print the response body to <a href=\"https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\" rel=\"noreferrer\">standard output</a> as below:</p>\n<pre><code>try (Scanner scanner = new Scanner(response)) {\n    String responseBody = scanner.useDelimiter(&quot;\\\\A&quot;).next();\n    System.out.println(responseBody);\n}\n</code></pre>\n<hr />\n<h3>Firing an <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5\" rel=\"noreferrer\">HTTP POST</a> request with query parameters</h3>\n<p>Setting the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\" rel=\"noreferrer\"><code>URLConnection#setDoOutput()</code></a> to <code>true</code> implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type <code>application/x-www-form-urlencoded</code> wherein the query string is written to the request body.</p>\n<pre><code>URLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true); // Triggers POST.\nconnection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\nconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=&quot; + charset);\n\ntry (OutputStream output = connection.getOutputStream()) {\n    output.write(query.getBytes(charset));\n}\n\nInputStream response = connection.getInputStream();\n// ...\n</code></pre>\n<p>Note: whenever you'd like to submit a HTML form programmatically, don't forget to take the <code>name=value</code> pairs of any <code>&lt;input type=&quot;hidden&quot;&gt;</code> elements into the query string and of course also the <code>name=value</code> pair of the <code>&lt;input type=&quot;submit&quot;&gt;</code> element which you'd like to &quot;press&quot; programmatically (because that's usually been used in the server side to distinguish if a button was pressed and if so, which one).</p>\n<p>You can also cast the obtained <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\" rel=\"noreferrer\"><code>URLConnection</code></a> to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"noreferrer\"><code>HttpURLConnection</code></a> and use its <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpURLConnection#setRequestMethod()</code></a> instead. But if you're trying to use the connection for output you still need to set <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\" rel=\"noreferrer\"><code>URLConnection#setDoOutput()</code></a> to <code>true</code>.</p>\n<pre><code>HttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();\nhttpConnection.setRequestMethod(&quot;POST&quot;);\n// ...\n</code></pre>\n<p>Either way, if the other side is an <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\"><code>HttpServlet</code></a>, then its <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\" rel=\"noreferrer\"><code>doPost()</code></a> method will be called and the parameters will be available by <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpServletRequest#getParameter()</code></a>.</p>\n<hr />\n<h3>Actually firing the HTTP request</h3>\n<p>You can fire the HTTP request explicitly with <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29\" rel=\"noreferrer\"><code>URLConnection#connect()</code></a>, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29\" rel=\"noreferrer\"><code>URLConnection#getInputStream()</code></a> and so on. The above examples does exactly that, so the <code>connect()</code> call is in fact superfluous.</p>\n<hr />\n<h3>Gathering HTTP response information</h3>\n<ol>\n<li><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\" rel=\"noreferrer\">HTTP response status</a>:</li>\n</ol>\n<p>You need an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"noreferrer\"><code>HttpURLConnection</code></a> here. Cast it first if necessary.</p>\n<pre><code>    int status = httpConnection.getResponseCode();\n</code></pre>\n<ol start=\"2\">\n<li><p><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\" rel=\"noreferrer\">HTTP response headers</a>:</p>\n<pre><code> for (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {\n     System.out.println(header.getKey() + &quot;=&quot; + header.getValue());\n }\n</code></pre>\n</li>\n<li><p><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17\" rel=\"noreferrer\">HTTP response encoding</a>:</p>\n</li>\n</ol>\n<p>When the <code>Content-Type</code> contains a <code>charset</code> parameter, then the response body is likely text based and we'd like to process the response body with the server-side specified character encoding then.</p>\n<pre><code>    String contentType = connection.getHeaderField(&quot;Content-Type&quot;);\n    String charset = null;\n\n    for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\n        if (param.startsWith(&quot;charset=&quot;)) {\n            charset = param.split(&quot;=&quot;, 2)[1];\n            break;\n        }\n    }\n\n    if (charset != null) {\n        try (BufferedReader reader = new BufferedReader(new InputStreamReader(response, charset))) {\n            for (String line; (line = reader.readLine()) != null;) {\n                // ... System.out.println(line)?\n            }\n        }\n    } else {\n        // It's likely binary content, use InputStream/OutputStream.\n    }\n</code></pre>\n<hr />\n<h3>Maintaining the session</h3>\n<p>The server side session is usually backed by a cookie. Some web forms require that you're logged in and/or are tracked by a session. You can use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html\" rel=\"noreferrer\"><code>CookieHandler</code></a> API to maintain cookies. You need to prepare a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html\" rel=\"noreferrer\"><code>CookieManager</code></a> with a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html\" rel=\"noreferrer\"><code>CookiePolicy</code></a> of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL\" rel=\"noreferrer\"><code>ACCEPT_ALL</code></a> before sending all HTTP requests.</p>\n<pre><code>// First set the default cookie manager.\nCookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\n\n// All the following subsequent URLConnections will use the same cookie manager.\nURLConnection connection = new URL(url).openConnection();\n// ...\n\nconnection = new URL(url).openConnection();\n// ...\n\nconnection = new URL(url).openConnection();\n// ...\n</code></pre>\n<p>Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all <code>Set-Cookie</code> headers from the response of the login or the first <code>GET</code> request and then pass this through the subsequent requests.</p>\n<pre><code>// Gather all cookies on the first request.\nURLConnection connection = new URL(url).openConnection();\nList&lt;String&gt; cookies = connection.getHeaderFields().get(&quot;Set-Cookie&quot;);\n// ...\n\n// Then use the same cookies on all subsequent requests.\nconnection = new URL(url).openConnection();\nfor (String cookie : cookies) {\n    connection.addRequestProperty(&quot;Cookie&quot;, cookie.split(&quot;;&quot;, 2)[0]);\n}\n// ...\n</code></pre>\n<p>The <code>split(&quot;;&quot;, 2)[0]</code> is there to get rid of cookie attributes which are irrelevant for the server side like <code>expires</code>, <code>path</code>, etc. Alternatively, you could also use <code>cookie.substring(0, cookie.indexOf(';'))</code> instead of <code>split()</code>.</p>\n<hr />\n<h3>Streaming mode</h3>\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"noreferrer\"><code>HttpURLConnection</code></a> will by default buffer the <em>entire</em> request body before actually sending it, regardless of whether you've set a fixed content length yourself using <code>connection.setRequestProperty(&quot;Content-Length&quot;, contentLength);</code>. This may cause <code>OutOfMemoryException</code>s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29\" rel=\"noreferrer\"><code>HttpURLConnection#setFixedLengthStreamingMode()</code></a>.</p>\n<pre><code>httpConnection.setFixedLengthStreamingMode(contentLength);\n</code></pre>\n<p>But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29\" rel=\"noreferrer\"><code>HttpURLConnection#setChunkedStreamingMode()</code></a> accordingly. This will set the HTTP <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41\" rel=\"noreferrer\"><code>Transfer-Encoding</code></a> header to <code>chunked</code> which will force the request body being sent in chunks. The below example will send the body in chunks of 1 KB.</p>\n<pre><code>httpConnection.setChunkedStreamingMode(1024);\n</code></pre>\n<hr />\n<h3>User-Agent</h3>\n<p>It can happen that <a href=\"https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser\">a request returns an unexpected response, while it works fine with a real web browser</a>. The server side is probably blocking requests based on the <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43\" rel=\"noreferrer\"><code>User-Agent</code></a> request header. The <code>URLConnection</code> will by default set it to <code>Java/1.6.0_19</code> where the last part is obviously the JRE version. You can override this as follows:</p>\n<pre><code>connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;); // Do as if you're using Chrome 41 on Windows 7.\n</code></pre>\n<p>Use the User-Agent string from a <a href=\"http://www.useragentstring.com/pages/useragentstring.php\" rel=\"noreferrer\">recent browser</a>.</p>\n<hr />\n<h3>Error handling</h3>\n<p>If the HTTP response code is <code>4nn</code> (Client Error) or <code>5nn</code> (Server Error), then you may want to read the <code>HttpURLConnection#getErrorStream()</code> to see if the server has sent any useful error information.</p>\n<pre><code>InputStream error = ((HttpURLConnection) connection).getErrorStream();\n</code></pre>\n<p>If the HTTP response code is -1, then something went wrong with connection and response handling. The <code>HttpURLConnection</code> implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the <code>http.keepAlive</code> system property to <code>false</code>. You can do this programmatically in the beginning of your application by:</p>\n<pre><code>System.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);\n</code></pre>\n<hr />\n<h3>Uploading files</h3>\n<p>You'd normally use <a href=\"http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"noreferrer\"><code>multipart/form-data</code></a> encoding for mixed POST content (binary and character data). The encoding is in more detail described in <a href=\"http://www.faqs.org/rfcs/rfc2388.html\" rel=\"noreferrer\">RFC2388</a>.</p>\n<pre><code>String param = &quot;value&quot;;\nFile textFile = new File(&quot;/path/to/file.txt&quot;);\nFile binaryFile = new File(&quot;/path/to/file.bin&quot;);\nString boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\nString CRLF = &quot;\\r\\n&quot;; // Line separator required by multipart/form-data.\nURLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true);\nconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\n\ntry (\n    OutputStream output = connection.getOutputStream();\n    PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\n) {\n    // Send normal param.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    // Send text file.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot; + textFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF); // Text file itself must be saved in this charset!\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // Send binary file.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot; + binaryFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: &quot; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(&quot;Content-Transfer-Encoding: binary&quot;).append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // End of multipart/form-data.\n    writer.append(&quot;--&quot; + boundary + &quot;--&quot;).append(CRLF).flush();\n}\n</code></pre>\n<p>If the other side is an <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\"><code>HttpServlet</code></a>, then its <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\" rel=\"noreferrer\"><code>doPost()</code></a> method will be called and the parts will be available by <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpServletRequest#getPart()</code></a> (note, thus <strong>not</strong> <code>getParameter()</code> and so on!). The <code>getPart()</code> method is however relatively new, it's introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using <a href=\"http://commons.apache.org/fileupload\" rel=\"noreferrer\">Apache Commons FileUpload</a> to parse a <code>multipart/form-data</code> request. Also see <a href=\"https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824\">this answer</a> for examples of both the FileUpload and the Servelt 3.0 approaches.</p>\n<hr />\n<h3>Dealing with untrusted or misconfigured HTTPS sites</h3>\n<p><sup><em>In case you're developing for Android instead of Java, <strong>be careful</strong>: the workaround below may save your day if you don't have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see <a href=\"https://support.google.com/faqs/answer/7188426.\" rel=\"noreferrer\">https://support.google.com/faqs/answer/7188426.</a></em></sup></p>\n<p>Sometimes you need to connect an HTTPS URL, perhaps because you're writing a web scraper. In that case, you may likely face a <code>javax.net.ssl.SSLException: Not trusted server certificate</code> on some HTTPS sites who doesn't keep their SSL certificates up to date, or a <code>java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found</code> or <code>javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name</code> on some misconfigured HTTPS sites.</p>\n<p>The following one-time-run <code>static</code> initializer in your web scraper class should make <code>HttpsURLConnection</code> more lenient as to those HTTPS sites and thus not throw those exceptions anymore.</p>\n<pre><code>static {\n    TrustManager[] trustAllCertificates = new TrustManager[] {\n        new X509TrustManager() {\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return null; // Not relevant.\n            }\n            @Override\n            public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                // Do nothing. Just allow them all.\n            }\n            @Override\n            public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                // Do nothing. Just allow them all.\n            }\n        }\n    };\n\n    HostnameVerifier trustAllHostnames = new HostnameVerifier() {\n        @Override\n        public boolean verify(String hostname, SSLSession session) {\n            return true; // Just allow them all.\n        }\n    };\n\n    try {\n        System.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\n        SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\n        sc.init(null, trustAllCertificates, new SecureRandom());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\n    }\n    catch (GeneralSecurityException e) {\n        throw new ExceptionInInitializerError(e);\n    }\n}\n</code></pre>\n<hr />\n<h3>Last words</h3>\n<p>The <a href=\"http://hc.apache.org/httpcomponents-client-ga/\" rel=\"noreferrer\">Apache HttpComponents HttpClient</a> is <em>much</em> more convenient in this all :)</p>\n<ul>\n<li><a href=\"http://hc.apache.org/httpcomponents-client-ga/tutorial/html/\" rel=\"noreferrer\">HttpClient Tutorial</a></li>\n<li><a href=\"http://hc.apache.org/httpcomponents-client-ga/examples.html\" rel=\"noreferrer\">HttpClient Examples</a></li>\n</ul>\n<hr />\n<h3>Parsing and extracting HTML</h3>\n<p>If all you want is parsing and extracting data from HTML, then better use a HTML parser like <a href=\"http://jsoup.org\" rel=\"noreferrer\">Jsoup</a>.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281\">What are the pros/cons of leading HTML parsers in Java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555\">How to scan and extract a webpage in Java</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":93280,"reputation":9803,"user_id":255293,"accept_rate":91,"display_name":"Patrick Kafka"},"score":1,"creation_date":1324503167,"post_id":8394587,"comment_id":10664880,"body_markdown":"setDoOutPut true was my issue which set my GET to a POST. Thanks","body":"setDoOutPut true was my issue which set my GET to a POST. Thanks"},{"owner":{"account_id":364489,"reputation":8047,"user_id":708906,"display_name":"Tony Chan"},"score":25,"creation_date":1343693384,"post_id":8394587,"comment_id":15567926,"body_markdown":"If you are trying to write data to the outputstream you **must** still set `setDoOutput()` to `true` otherwise an exception is thrown (even if you `setRequestMethod(&quot;POST&quot;)`). To be clear: setting `URLConnection#setDoOutput(true)` to `true` implicitly sets the request method to POST, but setting `httpURLConnection.setRequestMethod(&quot;POST&quot;)` to POST does **not** implicitly set `setDoOutput()` to `true`.","body":"If you are trying to write data to the outputstream you <b>must</b> still set <code>setDoOutput()</code> to <code>true</code> otherwise an exception is thrown (even if you <code>setRequestMethod(&quot;POST&quot;)</code>). To be clear: setting <code>URLConnection#setDoOutput(true)</code> to <code>true</code> implicitly sets the request method to POST, but setting <code>httpURLConnection.setRequestMethod(&quot;POST&quot;)</code> to POST does <b>not</b> implicitly set <code>setDoOutput()</code> to <code>true</code>."},{"owner":{"account_id":65347,"reputation":56309,"user_id":192373,"accept_rate":74,"display_name":"Alex Cohn"},"score":2,"creation_date":1618305492,"post_id":8394587,"comment_id":118555338,"body_markdown":"8 years later, `setRequestMethod(&quot;POST&quot;)` ***does*** set `doOutput` to **`true`**.","body":"8 years later, <code>setRequestMethod(&quot;POST&quot;)</code> <b><i>does</i></b> set <code>doOutput</code> to <b><code>true</code></b>."}],"tags":[],"owner":{"account_id":70553,"reputation":41,"user_id":204476,"display_name":"Paal Thorstensen"},"comment_count":3,"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1387239895,"creation_date":1323138044,"answer_id":8394587,"question_id":2793150,"body_markdown":"When working with HTTP it&#39;s almost always more useful to refer to `HttpURLConnection` rather than the base class `URLConnection` (since `URLConnection` is an abstract class when you ask for `URLConnection.openConnection()` on a HTTP URL that&#39;s what you&#39;ll get back anyway).\r\n\r\nThen you can instead of relying on `URLConnection#setDoOutput(true)` to implicitly set the request method to *POST* instead do `httpURLConnection.setRequestMethod(&quot;POST&quot;)` which some might find more natural (and which also allows you to specify other request methods such as *PUT*, *DELETE*, ...).\r\n\r\nIt also provides useful HTTP constants so you can do:\r\n\r\n    int responseCode = httpURLConnection.getResponseCode();\r\n\r\n    if (responseCode == HttpURLConnection.HTTP_OK) {\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>When working with HTTP it's almost always more useful to refer to <code>HttpURLConnection</code> rather than the base class <code>URLConnection</code> (since <code>URLConnection</code> is an abstract class when you ask for <code>URLConnection.openConnection()</code> on a HTTP URL that's what you'll get back anyway).</p>\n\n<p>Then you can instead of relying on <code>URLConnection#setDoOutput(true)</code> to implicitly set the request method to <em>POST</em> instead do <code>httpURLConnection.setRequestMethod(\"POST\")</code> which some might find more natural (and which also allows you to specify other request methods such as <em>PUT</em>, <em>DELETE</em>, ...).</p>\n\n<p>It also provides useful HTTP constants so you can do:</p>\n\n<pre><code>int responseCode = httpURLConnection.getResponseCode();\n\nif (responseCode == HttpURLConnection.HTTP_OK) {\n</code></pre>\n"},{"comments":[{"owner":{"account_id":187725,"reputation":3293,"user_id":425997,"accept_rate":50,"display_name":"David"},"score":0,"creation_date":1358900668,"post_id":11019442,"comment_id":20158548,"body_markdown":"I was just thinking the same. But it might also be nice to have a barebones/simple Java library that only uses URLConnection code as presented here that encapsulates the code to simpler methods to do an HTTP GET, POST, etc. The library can then be compiled &amp; packaged as JAR and imported/used in Java code or the source class file can be included in Java project if external JARs are not desired. This could be done with other libraries like Apache, etc. but is more of a pain compared to a simple 1 file class library using URLConnection.","body":"I was just thinking the same. But it might also be nice to have a barebones/simple Java library that only uses URLConnection code as presented here that encapsulates the code to simpler methods to do an HTTP GET, POST, etc. The library can then be compiled &amp; packaged as JAR and imported/used in Java code or the source class file can be included in Java project if external JARs are not desired. This could be done with other libraries like Apache, etc. but is more of a pain compared to a simple 1 file class library using URLConnection."},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1443181705,"post_id":11019442,"comment_id":53401318,"body_markdown":"http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/ favors HttpURLConnection over HttpClient","body":"<a href=\"http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\" rel=\"nofollow noreferrer\">rapidvaluesolutions.com/tech_blog/&hellip;</a> favors HttpURLConnection over HttpClient"}],"tags":[],"owner":{"account_id":90999,"reputation":2397,"user_id":841272,"display_name":"David Chandler"},"comment_count":2,"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1628684934,"creation_date":1339605467,"answer_id":11019442,"question_id":2793150,"body_markdown":"Inspired by this and other questions on Stack&amp;nbsp;Overflow, I&#39;ve created a minimal open source [basic-http-client][1] that embodies most of the techniques found here.\r\n\r\n[google-http-java-client][2] is also a great open source resource.\r\n\r\n  [1]: http://code.google.com/p/basic-http-client/\r\n  [2]: https://code.google.com/p/google-http-java-client/\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>Inspired by this and other questions on Stack Overflow, I've created a minimal open source <a href=\"http://code.google.com/p/basic-http-client/\" rel=\"nofollow noreferrer\">basic-http-client</a> that embodies most of the techniques found here.</p>\n<p><a href=\"https://code.google.com/p/google-http-java-client/\" rel=\"nofollow noreferrer\">google-http-java-client</a> is also a great open source resource.</p>\n"},{"comments":[{"owner":{"account_id":89557,"reputation":28308,"user_id":247013,"accept_rate":77,"display_name":"Vit Khudenko"},"score":2,"creation_date":1385560084,"post_id":19418989,"comment_id":30192476,"body_markdown":"It&#39;s odd that in the `doPost` method there is a `charset` param, that is used to set request header, but then the data is written with some hard-coded charset `IO.CHARSET`. A bug?","body":"It&#39;s odd that in the <code>doPost</code> method there is a <code>charset</code> param, that is used to set request header, but then the data is written with some hard-coded charset <code>IO.CHARSET</code>. A bug?"}],"tags":[],"owner":{"account_id":3432851,"reputation":1818,"user_id":2876739,"display_name":"RickHigh"},"comment_count":1,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1628685128,"creation_date":1381988117,"answer_id":19418989,"question_id":2793150,"body_markdown":"I was also very inspired by this response.\r\n\r\nI am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)\r\n\r\nI started to write my own utilities based on some of this conversation (not any where done):\r\n\r\n    package org.boon.utils;\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.util.Map;\r\n\r\n    import static org.boon.utils.IO.read;\r\n\r\n    public class HTTP {\r\n\r\nThen there are just a bunch or static methods.\r\n\r\n    public static String get(\r\n            final String url) {\r\n\r\n        Exceptions.tryIt(() -&gt; {\r\n            URLConnection connection;\r\n            connection = doGet(url, null, null, null);\r\n            return extractResponseString(connection);\r\n        });\r\n        return null;\r\n    }\r\n\r\n    public static String getWithHeaders(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doGet(url, headers, null, null);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static String getWithContentType(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            String contentType) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doGet(url, headers, contentType, null);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n    public static String getWithCharSet(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            String contentType,\r\n            String charSet) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doGet(url, headers, contentType, charSet);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\nThen post...\r\n\r\n    public static String postBody(\r\n            final String url,\r\n            final String body) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, null, &quot;text/plain&quot;, null, body);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static String postBodyWithHeaders(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            final String body) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, headers, &quot;text/plain&quot;, null, body);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    public static String postBodyWithContentType(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            final String contentType,\r\n            final String body) {\r\n\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, headers, contentType, null, body);\r\n\r\n            return extractResponseString(connection);\r\n\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public static String postBodyWithCharset(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            final String contentType,\r\n            final String charSet,\r\n            final String body) {\r\n\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, headers, contentType, charSet, body);\r\n\r\n            return extractResponseString(connection);\r\n\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static URLConnection doPost(String url, Map&lt;String, ? extends Object&gt; headers,\r\n                                        String contentType, String charset, String body\r\n                                        ) throws IOException {\r\n        URLConnection connection;/* Handle output. */\r\n        connection = new URL(url).openConnection();\r\n        connection.setDoOutput(true);\r\n        manageContentTypeHeaders(contentType, charset, connection);\r\n\r\n        manageHeaders(headers, connection);\r\n\r\n        IO.write(connection.getOutputStream(), body, IO.CHARSET);\r\n        return connection;\r\n    }\r\n\r\n    private static void manageHeaders(Map&lt;String, ? extends Object&gt; headers, URLConnection connection) {\r\n        if (headers != null) {\r\n            for (Map.Entry&lt;String, ? extends Object&gt; entry : headers.entrySet()) {\r\n                connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\r\n            }\r\n        }\r\n    }\r\n\r\n    private static void manageContentTypeHeaders(String contentType, String charset, URLConnection connection) {\r\n        connection.setRequestProperty(&quot;Accept-Charset&quot;, charset == null ? IO.CHARSET : charset);\r\n        if (contentType!=null &amp;&amp; !contentType.isEmpty()) {\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, contentType);\r\n        }\r\n    }\r\n\r\n    private static URLConnection doGet(String url, Map&lt;String, ? extends Object&gt; headers,\r\n                                        String contentType, String charset) throws IOException {\r\n        URLConnection connection;/* Handle output. */\r\n        connection = new URL(url).openConnection();\r\n        manageContentTypeHeaders(contentType, charset, connection);\r\n\r\n        manageHeaders(headers, connection);\r\n\r\n        return connection;\r\n    }\r\n\r\n    private static String extractResponseString(URLConnection connection) throws IOException {\r\n    /* Handle input. */\r\n        HttpURLConnection http = (HttpURLConnection)connection;\r\n        int status = http.getResponseCode();\r\n        String charset = getCharset(connection.getHeaderField(&quot;Content-Type&quot;));\r\n\r\n        if (status==200) {\r\n            return readResponseBody(http, charset);\r\n        } else {\r\n            return readErrorResponseBody(http, status, charset);\r\n        }\r\n    }\r\n\r\n    private static String readErrorResponseBody(HttpURLConnection http, int status, String charset) {\r\n        InputStream errorStream = http.getErrorStream();\r\n        if ( errorStream!=null ) {\r\n            String error = charset== null ? read( errorStream ) :\r\n                read( errorStream, charset );\r\n            throw new RuntimeException(&quot;STATUS CODE =&quot; + status + &quot;\\n\\n&quot; + error);\r\n        } else {\r\n            throw new RuntimeException(&quot;STATUS CODE =&quot; + status);\r\n        }\r\n    }\r\n\r\n    private static String readResponseBody(HttpURLConnection http, String charset) throws IOException {\r\n        if (charset != null) {\r\n            return read(http.getInputStream(), charset);\r\n        } else {\r\n            return read(http.getInputStream());\r\n        }\r\n    }\r\n\r\n    private static String getCharset(String contentType) {\r\n        if (contentType==null)  {\r\n            return null;\r\n        }\r\n        String charset = null;\r\n        for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\r\n            if (param.startsWith(&quot;charset=&quot;)) {\r\n                charset = param.split(&quot;=&quot;, 2)[1];\r\n                break;\r\n            }\r\n        }\r\n        charset = charset == null ? IO.CHARSET : charset;\r\n\r\n        return charset;\r\n    }\r\n\r\nWell, you get the idea....\r\n\r\nHere are the tests:\r\n\r\n    static class MyHandler implements HttpHandler {\r\n        public void handle(HttpExchange t) throws IOException {\r\n\r\n            InputStream requestBody = t.getRequestBody();\r\n            String body = IO.read(requestBody);\r\n            Headers requestHeaders = t.getRequestHeaders();\r\n            body = body + &quot;\\n&quot; + copy(requestHeaders).toString();\r\n            t.sendResponseHeaders(200, body.length());\r\n            OutputStream os = t.getResponseBody();\r\n            os.write(body.getBytes());\r\n            os.close();\r\n        }\r\n    }\r\n\r\n\r\n    @Test\r\n    public void testHappy() throws Exception {\r\n\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(9212), 0);\r\n        server.createContext(&quot;/test&quot;, new MyHandler());\r\n        server.setExecutor(null); // creates a default executor\r\n        server.start();\r\n\r\n        Thread.sleep(10);\r\n\r\n        Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\r\n\r\n        String response = HTTP.postBodyWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.postBodyWithCharset(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.postBodyWithHeaders(&quot;http://localhost:9212/test&quot;, headers, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.get(&quot;http://localhost:9212/test&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        response = HTTP.getWithHeaders(&quot;http://localhost:9212/test&quot;, headers);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.getWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.getWithCharSet(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        Thread.sleep(10);\r\n\r\n        server.stop(0);\r\n    }\r\n\r\n    @Test\r\n    public void testPostBody() throws Exception {\r\n\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(9220), 0);\r\n        server.createContext(&quot;/test&quot;, new MyHandler());\r\n        server.setExecutor(null); // creates a default executor\r\n        server.start();\r\n\r\n        Thread.sleep(10);\r\n\r\n        Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\r\n\r\n        String response = HTTP.postBody(&quot;http://localhost:9220/test&quot;, &quot;hi mom&quot;);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n\r\n        Thread.sleep(10);\r\n\r\n        server.stop(0);\r\n    }\r\n\r\n    @Test(expected = RuntimeException.class)\r\n    public void testSad() throws Exception {\r\n\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(9213), 0);\r\n        server.createContext(&quot;/test&quot;, new MyHandler());\r\n        server.setExecutor(null); // creates a default executor\r\n        server.start();\r\n\r\n        Thread.sleep(10);\r\n\r\n        Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\r\n\r\n        String response = HTTP.postBodyWithContentType(&quot;http://localhost:9213/foo&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        Thread.sleep(10);\r\n\r\n        server.stop(0);\r\n    }\r\n\r\nYou can find the rest here:\r\n\r\nhttps://github.com/RichardHightower/boon\r\n\r\nMy goal is to provide the common things one would want to do in a bit more easier way then....\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>I was also very inspired by this response.</p>\n<p>I am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)</p>\n<p>I started to write my own utilities based on some of this conversation (not any where done):</p>\n<pre><code>package org.boon.utils;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.Map;\n\nimport static org.boon.utils.IO.read;\n\npublic class HTTP {\n</code></pre>\n<p>Then there are just a bunch or static methods.</p>\n<pre><code>public static String get(\n        final String url) {\n\n    Exceptions.tryIt(() -&gt; {\n        URLConnection connection;\n        connection = doGet(url, null, null, null);\n        return extractResponseString(connection);\n    });\n    return null;\n}\n\npublic static String getWithHeaders(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, null, null);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\npublic static String getWithContentType(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        String contentType) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, contentType, null);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\npublic static String getWithCharSet(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        String contentType,\n        String charSet) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, contentType, charSet);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n</code></pre>\n<p>Then post...</p>\n<pre><code>public static String postBody(\n        final String url,\n        final String body) {\n    URLConnection connection;\n    try {\n        connection = doPost(url, null, &quot;text/plain&quot;, null, body);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\npublic static String postBodyWithHeaders(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String body) {\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, &quot;text/plain&quot;, null, body);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\n\npublic static String postBodyWithContentType(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String contentType,\n        final String body) {\n\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, contentType, null, body);\n\n        return extractResponseString(connection);\n\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n\n}\n\n\npublic static String postBodyWithCharset(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String contentType,\n        final String charSet,\n        final String body) {\n\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, contentType, charSet, body);\n\n        return extractResponseString(connection);\n\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\nprivate static URLConnection doPost(String url, Map&lt;String, ? extends Object&gt; headers,\n                                    String contentType, String charset, String body\n                                    ) throws IOException {\n    URLConnection connection;/* Handle output. */\n    connection = new URL(url).openConnection();\n    connection.setDoOutput(true);\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    IO.write(connection.getOutputStream(), body, IO.CHARSET);\n    return connection;\n}\n\nprivate static void manageHeaders(Map&lt;String, ? extends Object&gt; headers, URLConnection connection) {\n    if (headers != null) {\n        for (Map.Entry&lt;String, ? extends Object&gt; entry : headers.entrySet()) {\n            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\n        }\n    }\n}\n\nprivate static void manageContentTypeHeaders(String contentType, String charset, URLConnection connection) {\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset == null ? IO.CHARSET : charset);\n    if (contentType!=null &amp;&amp; !contentType.isEmpty()) {\n        connection.setRequestProperty(&quot;Content-Type&quot;, contentType);\n    }\n}\n\nprivate static URLConnection doGet(String url, Map&lt;String, ? extends Object&gt; headers,\n                                    String contentType, String charset) throws IOException {\n    URLConnection connection;/* Handle output. */\n    connection = new URL(url).openConnection();\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    return connection;\n}\n\nprivate static String extractResponseString(URLConnection connection) throws IOException {\n/* Handle input. */\n    HttpURLConnection http = (HttpURLConnection)connection;\n    int status = http.getResponseCode();\n    String charset = getCharset(connection.getHeaderField(&quot;Content-Type&quot;));\n\n    if (status==200) {\n        return readResponseBody(http, charset);\n    } else {\n        return readErrorResponseBody(http, status, charset);\n    }\n}\n\nprivate static String readErrorResponseBody(HttpURLConnection http, int status, String charset) {\n    InputStream errorStream = http.getErrorStream();\n    if ( errorStream!=null ) {\n        String error = charset== null ? read( errorStream ) :\n            read( errorStream, charset );\n        throw new RuntimeException(&quot;STATUS CODE =&quot; + status + &quot;\\n\\n&quot; + error);\n    } else {\n        throw new RuntimeException(&quot;STATUS CODE =&quot; + status);\n    }\n}\n\nprivate static String readResponseBody(HttpURLConnection http, String charset) throws IOException {\n    if (charset != null) {\n        return read(http.getInputStream(), charset);\n    } else {\n        return read(http.getInputStream());\n    }\n}\n\nprivate static String getCharset(String contentType) {\n    if (contentType==null)  {\n        return null;\n    }\n    String charset = null;\n    for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\n        if (param.startsWith(&quot;charset=&quot;)) {\n            charset = param.split(&quot;=&quot;, 2)[1];\n            break;\n        }\n    }\n    charset = charset == null ? IO.CHARSET : charset;\n\n    return charset;\n}\n</code></pre>\n<p>Well, you get the idea....</p>\n<p>Here are the tests:</p>\n<pre><code>static class MyHandler implements HttpHandler {\n    public void handle(HttpExchange t) throws IOException {\n\n        InputStream requestBody = t.getRequestBody();\n        String body = IO.read(requestBody);\n        Headers requestHeaders = t.getRequestHeaders();\n        body = body + &quot;\\n&quot; + copy(requestHeaders).toString();\n        t.sendResponseHeaders(200, body.length());\n        OutputStream os = t.getResponseBody();\n        os.write(body.getBytes());\n        os.close();\n    }\n}\n\n\n@Test\npublic void testHappy() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9212), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBodyWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.postBodyWithCharset(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.postBodyWithHeaders(&quot;http://localhost:9212/test&quot;, headers, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.get(&quot;http://localhost:9212/test&quot;);\n\n    System.out.println(response);\n\n    response = HTTP.getWithHeaders(&quot;http://localhost:9212/test&quot;, headers);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.getWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.getWithCharSet(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\n@Test\npublic void testPostBody() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9220), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBody(&quot;http://localhost:9220/test&quot;, &quot;hi mom&quot;);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\n@Test(expected = RuntimeException.class)\npublic void testSad() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9213), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBodyWithContentType(&quot;http://localhost:9213/foo&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n</code></pre>\n<p>You can find the rest here:</p>\n<p><a href=\"https://github.com/RichardHightower/boon\" rel=\"nofollow noreferrer\">https://github.com/RichardHightower/boon</a></p>\n<p>My goal is to provide the common things one would want to do in a bit more easier way then....</p>\n"},{"comments":[{"owner":{"account_id":97482,"reputation":14027,"user_id":264419,"accept_rate":89,"display_name":"Dejell"},"score":1,"creation_date":1422385685,"post_id":20239958,"comment_id":44725309,"body_markdown":"How do you handle cookies?","body":"How do you handle cookies?"}],"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":1,"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1397242456,"creation_date":1385548312,"answer_id":20239958,"question_id":2793150,"body_markdown":"You can also use [`JdkRequest`](http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html) from [jcabi-http](http://http.jcabi.com) (I&#39;m a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:\r\n\r\n    String html = new JdkRequest(&quot;http://www.google.com&quot;).fetch().body();\r\n\r\nCheck this blog post for more info: http://www.yegor256.com/2014/04/11/jcabi-http-intro.html","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>You can also use <a href=\"http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html\"><code>JdkRequest</code></a> from <a href=\"http://http.jcabi.com\">jcabi-http</a> (I'm a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:</p>\n\n<pre><code>String html = new JdkRequest(\"http://www.google.com\").fetch().body();\n</code></pre>\n\n<p>Check this blog post for more info: <a href=\"http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\">http://www.yegor256.com/2014/04/11/jcabi-http-intro.html</a></p>\n"},{"tags":[],"owner":{"account_id":370416,"reputation":7024,"user_id":718333,"accept_rate":73,"display_name":"fernandohur"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1416836631,"creation_date":1414187845,"answer_id":26556900,"question_id":2793150,"body_markdown":"I suggest you take a look at the code on [kevinsawicki/http-request](https://github.com/kevinsawicki/http-request), its basically a wrapper on top of `HttpUrlConnection` it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it&#39;s not too big) to take a look at how connections are handled.\r\n\r\nExample: Make a `GET` request with content type `application/json` and some query parameters:\r\n\r\n    // GET http://google.com?q=baseball%20gloves&amp;size=100\r\n    String response = HttpRequest.get(&quot;http://google.com&quot;, true, &quot;q&quot;, &quot;baseball gloves&quot;, &quot;size&quot;, 100)\r\n            .accept(&quot;application/json&quot;)\r\n            .body();\r\n    System.out.println(&quot;Response was: &quot; + response);","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>I suggest you take a look at the code on <a href=\"https://github.com/kevinsawicki/http-request\">kevinsawicki/http-request</a>, its basically a wrapper on top of <code>HttpUrlConnection</code> it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it's not too big) to take a look at how connections are handled.</p>\n\n<p>Example: Make a <code>GET</code> request with content type <code>application/json</code> and some query parameters:</p>\n\n<pre><code>// GET http://google.com?q=baseball%20gloves&amp;size=100\nString response = HttpRequest.get(\"http://google.com\", true, \"q\", \"baseball gloves\", \"size\", 100)\n        .accept(\"application/json\")\n        .body();\nSystem.out.println(\"Response was: \" + response);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9452632,"reputation":550,"user_id":7028887,"display_name":"Sora"},"score":4,"creation_date":1516129272,"post_id":27547168,"comment_id":83561031,"body_markdown":"How can you view the actual JSON response?","body":"How can you view the actual JSON response?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697343100,"post_id":27547168,"comment_id":136266926,"body_markdown":"There are *seven* options:  GET, POST, HEAD, OPTIONS, PUT, DELETE, TRACE.","body":"There are <i>seven</i> options:  GET, POST, HEAD, OPTIONS, PUT, DELETE, TRACE."}],"tags":[],"owner":{"account_id":2588248,"reputation":143,"user_id":3201107,"display_name":"Utkarsh Bhatt"},"comment_count":2,"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1628685176,"creation_date":1418907526,"answer_id":27547168,"question_id":2793150,"body_markdown":"There are two options you can go with HTTP URL Hits : GET / POST\r\n\r\nGET Request:\r\n\r\n    HttpURLConnection.setFollowRedirects(true); // Defaults to true\r\n\r\n    String url = &quot;https://name_of_the_url&quot;;\r\n    URL request_url = new URL(url);\r\n    HttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\r\n    http_conn.setConnectTimeout(100000);\r\n    http_conn.setReadTimeout(100000);\r\n    http_conn.setInstanceFollowRedirects(true);\r\n    System.out.println(String.valueOf(http_conn.getResponseCode()));\r\n\r\nPOST request:\r\n\r\n    HttpURLConnection.setFollowRedirects(true); // Defaults to true\r\n\r\n    String url = &quot;https://name_of_the_url&quot;\r\n    URL request_url = new URL(url);\r\n    HttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\r\n    http_conn.setConnectTimeout(100000);\r\n    http_conn.setReadTimeout(100000);\r\n    http_conn.setInstanceFollowRedirects(true);\r\n    http_conn.setDoOutput(true);\r\n    PrintWriter out = new PrintWriter(http_conn.getOutputStream());\r\n    if (urlparameter != null) {\r\n       out.println(urlparameter);\r\n    }\r\n    out.close();\r\n    out = null;\r\n    System.out.println(String.valueOf(http_conn.getResponseCode()));\r\n\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>There are two options you can go with HTTP URL Hits : GET / POST</p>\n<p>GET Request:</p>\n<pre><code>HttpURLConnection.setFollowRedirects(true); // Defaults to true\n\nString url = &quot;https://name_of_the_url&quot;;\nURL request_url = new URL(url);\nHttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(100000);\nhttp_conn.setReadTimeout(100000);\nhttp_conn.setInstanceFollowRedirects(true);\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n</code></pre>\n<p>POST request:</p>\n<pre><code>HttpURLConnection.setFollowRedirects(true); // Defaults to true\n\nString url = &quot;https://name_of_the_url&quot;\nURL request_url = new URL(url);\nHttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(100000);\nhttp_conn.setReadTimeout(100000);\nhttp_conn.setInstanceFollowRedirects(true);\nhttp_conn.setDoOutput(true);\nPrintWriter out = new PrintWriter(http_conn.getOutputStream());\nif (urlparameter != null) {\n   out.println(urlparameter);\n}\nout.close();\nout = null;\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1628685221,"creation_date":1443182865,"answer_id":32781880,"question_id":2793150,"body_markdown":"Initially I was misled by [this article][1] which favours `HttpClient`. \r\n\r\nLater I have realized that `HttpURLConnection` is going to stay from [this article][2].\r\n\r\n**As per the Google blog**:\r\n\r\n&gt; Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.\r\n&gt;\r\n&gt; Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.\r\n\r\nAfter reading [this article][3] and some other stack over flow questions, I am convinced that `HttpURLConnection` is going to stay for longer durations.\r\n\r\nSome of the SE questions favouring `HttpURLConnections`:\r\n\r\n*https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289*\r\n\r\n*https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android*\r\n\r\n  [1]: http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html\r\n  [2]: https://github.com/loopj/android-async-http/issues/75\r\n  [3]: http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>Initially I was misled by <a href=\"http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html\" rel=\"nofollow noreferrer\">this article</a> which favours <code>HttpClient</code>.</p>\n<p>Later I have realized that <code>HttpURLConnection</code> is going to stay from <a href=\"https://github.com/loopj/android-async-http/issues/75\" rel=\"nofollow noreferrer\">this article</a>.</p>\n<p><strong>As per the Google blog</strong>:</p>\n<blockquote>\n<p>Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.</p>\n<p>Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.</p>\n</blockquote>\n<p>After reading <a href=\"http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\" rel=\"nofollow noreferrer\">this article</a> and some other stack over flow questions, I am convinced that <code>HttpURLConnection</code> is going to stay for longer durations.</p>\n<p>Some of the SE questions favouring <code>HttpURLConnections</code>:</p>\n<p><em><a href=\"https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289\">On Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity</a></em></p>\n<p><em><a href=\"https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android\">HttpPost works in Java project, but not on Android</a></em></p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"comment_count":0,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1452859593,"creation_date":1452859593,"answer_id":34810741,"question_id":2793150,"body_markdown":"There is also [OkHttp][1], which is an HTTP client that’s efficient by default:\r\n\r\n&gt;  - HTTP/2 support allows all requests to the same host to share a    socket.\r\n&gt;  - Connection pooling reduces request latency (if HTTP/2 isn’t    available).\r\n&gt;  - Transparent GZIP shrinks download sizes.\r\n&gt;  - Response caching avoids the network completely for repeat requests.\r\n\r\nFirst create an instance of `OkHttpClient`:\r\n\r\n    OkHttpClient client = new OkHttpClient();\r\nThen, prepare your `GET` request:\r\n\r\n    Request request = new Request.Builder()\r\n          .url(url)\r\n          .build();\r\nfinally, use `OkHttpClient` to send prepared `Request`:\r\n\r\n    Response response = client.newCall(request).execute();\r\nFor more details, you can consult the [OkHttp&#39;s documentation](https://github.com/square/okhttp/wiki)\r\n\r\n\r\n\r\n\r\n  [1]: http://square.github.io/okhttp/","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>There is also <a href=\"http://square.github.io/okhttp/\">OkHttp</a>, which is an HTTP client that’s efficient by default:</p>\n\n<blockquote>\n  <ul>\n  <li>HTTP/2 support allows all requests to the same host to share a    socket.</li>\n  <li>Connection pooling reduces request latency (if HTTP/2 isn’t    available).</li>\n  <li>Transparent GZIP shrinks download sizes.</li>\n  <li>Response caching avoids the network completely for repeat requests.</li>\n  </ul>\n</blockquote>\n\n<p>First create an instance of <code>OkHttpClient</code>:</p>\n\n<pre><code>OkHttpClient client = new OkHttpClient();\n</code></pre>\n\n<p>Then, prepare your <code>GET</code> request:</p>\n\n<pre><code>Request request = new Request.Builder()\n      .url(url)\n      .build();\n</code></pre>\n\n<p>finally, use <code>OkHttpClient</code> to send prepared <code>Request</code>:</p>\n\n<pre><code>Response response = client.newCall(request).execute();\n</code></pre>\n\n<p>For more details, you can consult the <a href=\"https://github.com/square/okhttp/wiki\">OkHttp's documentation</a></p>\n"},{"tags":[],"owner":{"account_id":7034187,"reputation":381,"user_id":5388882,"accept_rate":100,"display_name":"Nison Cheruvathur"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1628686076,"creation_date":1459921389,"answer_id":36442479,"question_id":2793150,"body_markdown":"If you are using HTTP [GET][1], please remove this line:\r\n\r\n    urlConnection.setDoOutput(true);\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>If you are using HTTP <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"nofollow noreferrer\">GET</a>, please remove this line:</p>\n<pre><code>urlConnection.setDoOutput(true);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1568899176,"post_id":36932953,"comment_id":102428134,"body_markdown":"Further update: the module is out of incubation status.  It’s now [java.net.http](https://docs.oracle.com/en/java/javase/13/docs/api/java.net.http/module-summary.html), not jdk.incubator.httpclient.","body":"Further update: the module is out of incubation status.  It’s now <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.net.http/module-summary.html\" rel=\"nofollow noreferrer\">java.net.http</a>, not jdk.incubator.httpclient."}],"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1512054999,"creation_date":1461917256,"answer_id":36932953,"question_id":2793150,"body_markdown":"## Update\r\n\r\n&gt; The new HTTP Client shipped with Java 9 but as part of an\r\n&gt; Incubator module named `jdk.incubator.httpclient`. Incubator modules are\r\n&gt; a means of putting non-final APIs in the hands of developers while the\r\n&gt; APIs progress towards either finalization or removal in a future\r\n&gt; release.\r\n\r\nIn Java 9, you can send a `GET` request like:\r\n\r\n    // GET\r\n    HttpResponse response = HttpRequest\r\n        .create(new URI(&quot;http://www.stackoverflow.com&quot;))\r\n        .headers(&quot;Foo&quot;, &quot;foovalue&quot;, &quot;Bar&quot;, &quot;barvalue&quot;)\r\n        .GET()\r\n        .response();\r\n\r\nThen you can examine the returned `HttpResponse`:\r\n\r\n    int statusCode = response.statusCode();\r\n    String responseBody = response.body(HttpResponse.asString());\r\n\r\nSince this new HTTP Client is in &lt;del&gt;`java.httpclient`&lt;/del&gt; `jdk.incubator.httpclient` module, you should declare this dependency in your `module-info.java` file:\r\n\r\n    module com.foo.bar {\r\n        requires jdk.incubator.httpclient;\r\n    }","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<h2>Update</h2>\n\n<blockquote>\n  <p>The new HTTP Client shipped with Java 9 but as part of an\n  Incubator module named <code>jdk.incubator.httpclient</code>. Incubator modules are\n  a means of putting non-final APIs in the hands of developers while the\n  APIs progress towards either finalization or removal in a future\n  release.</p>\n</blockquote>\n\n<p>In Java 9, you can send a <code>GET</code> request like:</p>\n\n<pre><code>// GET\nHttpResponse response = HttpRequest\n    .create(new URI(\"http://www.stackoverflow.com\"))\n    .headers(\"Foo\", \"foovalue\", \"Bar\", \"barvalue\")\n    .GET()\n    .response();\n</code></pre>\n\n<p>Then you can examine the returned <code>HttpResponse</code>:</p>\n\n<pre><code>int statusCode = response.statusCode();\nString responseBody = response.body(HttpResponse.asString());\n</code></pre>\n\n<p>Since this new HTTP Client is in <del><code>java.httpclient</code></del> <code>jdk.incubator.httpclient</code> module, you should declare this dependency in your <code>module-info.java</code> file:</p>\n\n<pre><code>module com.foo.bar {\n    requires jdk.incubator.httpclient;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1702046350,"creation_date":1640977623,"answer_id":70545055,"question_id":2793150,"body_markdown":"If you are using **Java 11** or newer ([except on Android][1]), instead of the legacy `HttpUrlConnection` class, you can use Java 11 new [HTTP Client API][2].\r\n\r\n#### An example *GET* request:\r\n\r\n```java\r\nvar uri = URI.create(&quot;https://httpbin.org/get?age=26&amp;isHappy=true&quot;);\r\nvar client = HttpClient.newHttpClient();\r\nvar request = HttpRequest\r\n        .newBuilder()\r\n        .uri(uri)\r\n        .header(&quot;accept&quot;, &quot;application/json&quot;)\r\n        .GET()\r\n        .build();\r\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\nSystem.out.println(response.statusCode());\r\nSystem.out.println(response.body());\r\n```\r\n\r\nThe same request executed asynchronously:\r\n\r\n```java\r\nvar responseAsync = client\r\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\r\n        .thenApply(HttpResponse::body)\r\n        .thenAccept(System.out::println);\r\n// responseAsync.join(); // Wait for completion\r\n```\r\n\r\n#### An example *POST* request:\r\n\r\n```java\r\nvar request = HttpRequest\r\n        .newBuilder()\r\n        .uri(uri)\r\n        .version(HttpClient.Version.HTTP_2)\r\n        .timeout(Duration.ofMinutes(1))\r\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n        .header(&quot;Authorization&quot;, &quot;Bearer fake&quot;)\r\n        .POST(BodyPublishers.ofString(&quot;{ title: &#39;This is cool&#39; }&quot;))\r\n        .build();\r\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n```\r\n\r\nFor sending form data as multipart (`multipart/form-data`) or url-encoded (`application/x-www-form-urlencoded`) format, see [this solution](https://stackoverflow.com/a/56482187/8583692).\r\n\r\nSee [this article][4] for examples and more information about HTTP Client API.\r\n\r\n## Sidenote\r\nTo create a simple HTTP **server** using Java standard library, see [this post](https://stackoverflow.com/a/71635295/8583692).\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/65363995/8583692\r\n  [2]: https://openjdk.java.net/groups/net/httpclient/intro.html\r\n  [3]: https://stackoverflow.com/a/68594140/8583692\r\n  [4]: https://www.baeldung.com/java-9-http-client","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>If you are using <strong>Java 11</strong> or newer (<a href=\"https://stackoverflow.com/q/65363995/8583692\">except on Android</a>), instead of the legacy <code>HttpUrlConnection</code> class, you can use Java 11 new <a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"nofollow noreferrer\">HTTP Client API</a>.</p>\n<h4>An example <em>GET</em> request:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>var uri = URI.create(&quot;https://httpbin.org/get?age=26&amp;isHappy=true&quot;);\nvar client = HttpClient.newHttpClient();\nvar request = HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .header(&quot;accept&quot;, &quot;application/json&quot;)\n        .GET()\n        .build();\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(response.statusCode());\nSystem.out.println(response.body());\n</code></pre>\n<p>The same request executed asynchronously:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var responseAsync = client\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\n        .thenApply(HttpResponse::body)\n        .thenAccept(System.out::println);\n// responseAsync.join(); // Wait for completion\n</code></pre>\n<h4>An example <em>POST</em> request:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>var request = HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .version(HttpClient.Version.HTTP_2)\n        .timeout(Duration.ofMinutes(1))\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        .header(&quot;Authorization&quot;, &quot;Bearer fake&quot;)\n        .POST(BodyPublishers.ofString(&quot;{ title: 'This is cool' }&quot;))\n        .build();\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\n</code></pre>\n<p>For sending form data as multipart (<code>multipart/form-data</code>) or url-encoded (<code>application/x-www-form-urlencoded</code>) format, see <a href=\"https://stackoverflow.com/a/56482187/8583692\">this solution</a>.</p>\n<p>See <a href=\"https://www.baeldung.com/java-9-http-client\" rel=\"nofollow noreferrer\">this article</a> for examples and more information about HTTP Client API.</p>\n<h2>Sidenote</h2>\n<p>To create a simple HTTP <strong>server</strong> using Java standard library, see <a href=\"https://stackoverflow.com/a/71635295/8583692\">this post</a>.</p>\n"}],"owner":{"account_id":52822,"reputation":1089025,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1190512,"favorite_count":0,"down_vote_count":8,"up_vote_count":2137,"accepted_answer_id":2793153,"answer_count":12,"score":2129,"last_activity_date":1702046350,"creation_date":1273299371,"question_id":2793150,"body_markdown":"Use of [`java.net.URLConnection`][1] is asked about pretty often here, and the [Oracle tutorial][2] is *too* concise about it.\r\n\r\nThat tutorial basically only shows how to fire a [GET][3] request and read the response. It doesn&#39;t explain anywhere how to use it to, among others, perform a [POST][4] request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.\r\n\r\nSo, how can I use `java.net.URLConnection` to fire and handle &quot;advanced&quot; HTTP requests?\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\r\n  [2]: http://download.oracle.com/javase/tutorial/networking/urls/connecting.html\r\n  [3]: https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\r\n  [4]: https://en.wikipedia.org/wiki/POST_%28HTTP%29\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>Use of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\" rel=\"noreferrer\"><code>java.net.URLConnection</code></a> is asked about pretty often here, and the <a href=\"http://download.oracle.com/javase/tutorial/networking/urls/connecting.html\" rel=\"noreferrer\">Oracle tutorial</a> is <em>too</em> concise about it.</p>\n<p>That tutorial basically only shows how to fire a <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"noreferrer\">GET</a> request and read the response. It doesn't explain anywhere how to use it to, among others, perform a <a href=\"https://en.wikipedia.org/wiki/POST_%28HTTP%29\" rel=\"noreferrer\">POST</a> request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.</p>\n<p>So, how can I use <code>java.net.URLConnection</code> to fire and handle &quot;advanced&quot; HTTP requests?</p>\n"},{"tags":["java","delphi","bcd"],"comments":[{"owner":{"account_id":237126,"reputation":604242,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002295,"post_id":31653777,"comment_id":51252902,"body_markdown":"`div` is `/`, `shl` is `&lt;&lt;` and `or` is `|`. A bigger problem is that there is no unsigned byte type in Java. What type do you want to use? Do you know any Java? Or is it Delphi that you don&#39;t understand? What are you stuck on?","body":"<code>div</code> is <code>&#47;</code>, <code>shl</code> is <code>&lt;&lt;</code> and <code>or</code> is <code>|</code>. A bigger problem is that there is no unsigned byte type in Java. What type do you want to use? Do you know any Java? Or is it Delphi that you don&#39;t understand? What are you stuck on?"},{"owner":{"account_id":237126,"reputation":604242,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002366,"post_id":31653777,"comment_id":51252954,"body_markdown":"Also, could you please ask a direct question. Here you&#39;ve just told us that you have some job to do and left us to work out what your question is. I hope you aren&#39;t just hoping we&#39;ll do it all for you. We prefer to help people that are keen to learn.","body":"Also, could you please ask a direct question. Here you&#39;ve just told us that you have some job to do and left us to work out what your question is. I hope you aren&#39;t just hoping we&#39;ll do it all for you. We prefer to help people that are keen to learn."},{"owner":{"account_id":6497395,"reputation":45,"user_id":5029555,"accept_rate":80,"display_name":"Rafael Guerra"},"score":0,"creation_date":1438002702,"post_id":31653777,"comment_id":51253167,"body_markdown":"I don&#180;t want anyone solve anything for me. I just need an little explanation of conversion with bcd and a relationship between the operators used in Delphi and Java, just as you did in parts.","body":"I don&#180;t want anyone solve anything for me. I just need an little explanation of conversion with bcd and a relationship between the operators used in Delphi and Java, just as you did in parts."},{"owner":{"account_id":237126,"reputation":604242,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002836,"post_id":31653777,"comment_id":51253269,"body_markdown":"Please state that in the question. Oh, I see I missed `mod` being `%`. Of course both languages are well documented and there operators are well known. It would be better if you read the docs first, and then asked for clarification of anything that you don&#39;t understand. As presented, one might suspect you of being lazy. Show us that you are not by adding what you know to the question, and asking a specific question.","body":"Please state that in the question. Oh, I see I missed <code>mod</code> being <code>%</code>. Of course both languages are well documented and there operators are well known. It would be better if you read the docs first, and then asked for clarification of anything that you don&#39;t understand. As presented, one might suspect you of being lazy. Show us that you are not by adding what you know to the question, and asking a specific question."}],"answers":[{"comments":[{"owner":{"account_id":237126,"reputation":604242,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002856,"post_id":31653954,"comment_id":51253281,"body_markdown":"byte is unsigned in Delphi. I think you need to tackle that.","body":"byte is unsigned in Delphi. I think you need to tackle that."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1438004453,"post_id":31653954,"comment_id":51254565,"body_markdown":"@DavidHeffernan It is assumed the value is between 0 and 99 in the original code.  If the value is not exactly 2 digits i.e. 100 or more, we have a problem whether we consider signed or unsigned.","body":"@DavidHeffernan It is assumed the value is between 0 and 99 in the original code.  If the value is not exactly 2 digits i.e. 100 or more, we have a problem whether we consider signed or unsigned."},{"owner":{"account_id":237126,"reputation":604242,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":1,"creation_date":1438005782,"post_id":31653954,"comment_id":51255532,"body_markdown":"The user might be confused to find negative values though. They should be ready for that.","body":"The user might be confused to find negative values though. They should be ready for that."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1438011433,"creation_date":1438002478,"answer_id":31653954,"question_id":31653777,"body_markdown":"You can do this\r\n\r\n    public static int byteToBCD(byte b) {\r\n        assert 0 &lt;= b &amp;&amp; b &lt;= 99; // two digits only.\r\n        return (b / 10 &lt;&lt; 4) | b % 10;\r\n    }\r\n\r\nIt is not clear what you are stuck on but it the answer is trivia.\r\n\r\n","title":"Conversion byte decimal to byte bcd","body":"<p>You can do this</p>\n\n<pre><code>public static int byteToBCD(byte b) {\n    assert 0 &lt;= b &amp;&amp; b &lt;= 99; // two digits only.\n    return (b / 10 &lt;&lt; 4) | b % 10;\n}\n</code></pre>\n\n<p>It is not clear what you are stuck on but it the answer is trivia.</p>\n"},{"tags":[],"owner":{"account_id":23554557,"reputation":71,"user_id":17596747,"display_name":"RasulOs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702045500,"creation_date":1702043512,"answer_id":77627046,"question_id":31653777,"body_markdown":"A simple and clear solution that I use for this type of conversion:\r\n\r\n       public static int fromIntValueToBCDValue(int value) {\r\n            return Integer.parseInt( ((value) + &quot;&quot;), 16);\r\n        }\r\n    \r\n        public static int fromBCDToDecimal(byte bcd) {\r\n            int lhs = (bcd &gt;&gt;&gt; 4) &amp; 0xf;\r\n            int rhs = bcd &amp; 0xf;\r\n    \r\n            return Integer.parseInt(lhs + &quot;&quot; + rhs);\r\n        }\r\n    \r\n        public static String fromBCDToDecimal(byte[] bcd) {\r\n    \r\n            StringBuilder sb = new StringBuilder();\r\n    \r\n            Objects.requireNonNull(bcd);\r\n    \r\n            for (int i = 0; i &lt; bcd.length; i++) {\r\n    \r\n                int lhs = (bcd[i] &gt;&gt;&gt; 4) &amp; 0xf;\r\n                int rhs = bcd[i] &amp; 0xf;\r\n    \r\n                sb.append(Integer.parseInt(lhs + &quot;&quot; + rhs));\r\n            }\r\n    \r\n            return sb.toString();\r\n        } ","title":"Conversion byte decimal to byte bcd","body":"<p>A simple and clear solution that I use for this type of conversion:</p>\n<pre><code>   public static int fromIntValueToBCDValue(int value) {\n        return Integer.parseInt( ((value) + &quot;&quot;), 16);\n    }\n\n    public static int fromBCDToDecimal(byte bcd) {\n        int lhs = (bcd &gt;&gt;&gt; 4) &amp; 0xf;\n        int rhs = bcd &amp; 0xf;\n\n        return Integer.parseInt(lhs + &quot;&quot; + rhs);\n    }\n\n    public static String fromBCDToDecimal(byte[] bcd) {\n\n        StringBuilder sb = new StringBuilder();\n\n        Objects.requireNonNull(bcd);\n\n        for (int i = 0; i &lt; bcd.length; i++) {\n\n            int lhs = (bcd[i] &gt;&gt;&gt; 4) &amp; 0xf;\n            int rhs = bcd[i] &amp; 0xf;\n\n            sb.append(Integer.parseInt(lhs + &quot;&quot; + rhs));\n        }\n\n        return sb.toString();\n    } \n</code></pre>\n"}],"owner":{"account_id":6497395,"reputation":45,"user_id":5029555,"accept_rate":80,"display_name":"Rafael Guerra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1633,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":31653954,"answer_count":2,"score":-1,"last_activity_date":1702045500,"creation_date":1438001980,"question_id":31653777,"body_markdown":"I need to convert a Delphi function to Java function. This function convert a byte decimal to byte bcd:\r\n\r\n\r\n    function ByteToBCD(Number : byte) : byte;\r\n    begin\r\n        result:= ((Number div 10) shl 4) or (Number mod 10);\r\n    end;","title":"Conversion byte decimal to byte bcd","body":"<p>I need to convert a Delphi function to Java function. This function convert a byte decimal to byte bcd:</p>\n\n<pre><code>function ByteToBCD(Number : byte) : byte;\nbegin\n    result:= ((Number div 10) shl 4) or (Number mod 10);\nend;\n</code></pre>\n"},{"tags":["java","dynamic","dynamic-programming"],"comments":[{"owner":{"account_id":15595756,"reputation":1662,"user_id":11251344,"display_name":"BlackPearl"},"score":0,"creation_date":1559426490,"post_id":56410436,"comment_id":99418565,"body_markdown":"Can you add your existing code and the actual problems you faced?","body":"Can you add your existing code and the actual problems you faced?"},{"owner":{"account_id":15123083,"reputation":27,"user_id":10913324,"display_name":"Corgam"},"score":0,"creation_date":1559431361,"post_id":56410436,"comment_id":99419348,"body_markdown":"I added the code, it’s really long and messy. I think the best way for solving this problem would be a pseudo code from somebody","body":"I added the code, it’s really long and messy. I think the best way for solving this problem would be a pseudo code from somebody"}],"answers":[{"tags":[],"owner":{"account_id":15123083,"reputation":27,"user_id":10913324,"display_name":"Corgam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1559514309,"creation_date":1559514309,"answer_id":56419374,"question_id":56410436,"body_markdown":"Ok, so I have found on Github the code for exactly this type of task,\r\nI will leave it for other people if they need it later: \r\n\r\nhttps://github.com/mission-peace/interview/blob/master/src/com/interview/dynamic/NPotGold.java?fbclid=IwAR2PZ8MvNJcQmlU13wj1n_c6m1UhQY7FXAY07RwaI6wOOXAMgDOVRxFahD0 ","title":"Array of buckets with dynamic programming problem","body":"<p>Ok, so I have found on Github the code for exactly this type of task,\nI will leave it for other people if they need it later: </p>\n\n<p><a href=\"https://github.com/mission-peace/interview/blob/master/src/com/interview/dynamic/NPotGold.java?fbclid=IwAR2PZ8MvNJcQmlU13wj1n_c6m1UhQY7FXAY07RwaI6wOOXAMgDOVRxFahD0\" rel=\"nofollow noreferrer\">https://github.com/mission-peace/interview/blob/master/src/com/interview/dynamic/NPotGold.java?fbclid=IwAR2PZ8MvNJcQmlU13wj1n_c6m1UhQY7FXAY07RwaI6wOOXAMgDOVRxFahD0</a> </p>\n"}],"owner":{"account_id":15123083,"reputation":27,"user_id":10913324,"display_name":"Corgam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":638,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56419374,"answer_count":1,"score":0,"last_activity_date":1702044669,"creation_date":1559423401,"question_id":56410436,"body_markdown":"I’m doing a task with dynamic programming in Java and I got stuck:\r\nIn the task we are given an array of buckets with random number of rocks inside, where both players know their amount from the start. Players take tours and pick one border bucket from the sides:\r\n\r\nBuckets: (3)(3)(8)(2)(10)(4)\r\n\r\nP1: (3) buckets left: (3)(8)(2)(10)(4),\r\n\r\nP2:(4) buckets left: (3)(8)(2)(10), \r\n\r\nP1:(10) buckets left: (3)(8)(2), \r\n\r\nP2(3) buckets left: (8)(2),\r\n\r\nP1:(8) buckets left (2),\r\n\r\nP2:(2) end\r\n\r\n\r\nFinal score is calculated with (rocks of player 1) - (rocks of player2) \r\n\r\nScore = (3+10+8)-(4+3+2) = 12\r\n\r\nWe play player1 and our goal is to find the OPTIMAL pick order in which we have the biggest score.\r\n\r\n\r\n\r\n\r\n\r\nI know the concept of DP but I have no idea what could I save in order to improve the time. \r\nThe main part of the code I did with minmax algorithm and it worked but I have no idea how to combine it with dynamic programming\r\n\r\nI tried having a matrix with rows as buckets from left and columns as buckets from right, so I can save there answers for when we use the same “part” of the array, but I had some problems with it...\r\n\r\nEDIT1: added my code\r\n\r\n    public int maxGain(int[] values)\r\n    {\r\n        this.moves = new int[values.length+1][values.length+1];\r\n        return  _maxGain(values,0,values.length-1,0,0,values.length,true,0,0);\r\n    }\r\n\r\n    public int _maxGain(int[] values, int leftBowl, int rightBowl, int valuePlayer1, int valuePlayer2,int leftBowls, boolean ifFirstPlayer, int leftMoves, int rightMoves){\r\n            //Check if end of the game\r\n            if(leftBowls == 0) {\r\n                //Calculate the final score\r\n                return valuePlayer1 - valuePlayer2;\r\n            }\r\n            //System.out.println(&quot;Left:&quot;+values[leftBowl]+&quot;, right: &quot;+values[rightBowl]);\r\n            // If first player\r\n            if(ifFirstPlayer){\r\n                int maxEval = Integer.MIN_VALUE;\r\n                int eval;\r\n                for(int i=0;i&lt;2;i++){\r\n                    if(i==0){\r\n                        //Do move\r\n                        valuePlayer1 = valuePlayer1+values[leftBowl];\r\n                        leftBowls--;\r\n                        leftMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        leftMoves--;\r\n                        maxEval = Math.max(maxEval,eval);\r\n                        //Undo move\r\n                        valuePlayer1 = valuePlayer1-values[leftBowl];\r\n                        leftBowls++;\r\n                    }else{\r\n                        //Do move\r\n                        valuePlayer1 = valuePlayer1+values[rightBowl];\r\n                        leftBowls--;\r\n                        rightMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        rightMoves--;\r\n                        maxEval = Math.max(maxEval,eval);\r\n                        //Undo move\r\n                        valuePlayer1 = valuePlayer1-values[rightBowl];\r\n                        leftBowls++;\r\n                    }\r\n                }\r\n                return maxEval;\r\n                //If second player\r\n            }else{\r\n                int minEval = Integer.MAX_VALUE;\r\n                int eval;\r\n                for(int i=0;i&lt;2;i++){\r\n                    if(i==0){\r\n                        //Do move\r\n                        valuePlayer2 = valuePlayer2+values[leftBowl];\r\n                        leftBowls--;\r\n                        leftMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        leftMoves--;\r\n                        minEval = Math.min(minEval,eval);\r\n                        //Undo move\r\n                        valuePlayer2 = valuePlayer2-values[leftBowl];\r\n                        leftBowls++;\r\n                    }else{\r\n                        //Do move\r\n                        valuePlayer2 = valuePlayer2+values[rightBowl];\r\n                        leftBowls--;\r\n                        rightMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        rightMoves--;\r\n                        minEval = Math.min(minEval,eval);\r\n                        //Undo move\r\n                        valuePlayer2 = valuePlayer2-values[rightBowl];\r\n                        leftBowls++;\r\n                    }\r\n                }\r\n                return minEval;\r\n            }\r\n        }","title":"Array of buckets with dynamic programming problem","body":"<p>I’m doing a task with dynamic programming in Java and I got stuck:\nIn the task we are given an array of buckets with random number of rocks inside, where both players know their amount from the start. Players take tours and pick one border bucket from the sides:</p>\n\n<p>Buckets: (3)(3)(8)(2)(10)(4)</p>\n\n<p>P1: (3) buckets left: (3)(8)(2)(10)(4),</p>\n\n<p>P2:(4) buckets left: (3)(8)(2)(10), </p>\n\n<p>P1:(10) buckets left: (3)(8)(2), </p>\n\n<p>P2(3) buckets left: (8)(2),</p>\n\n<p>P1:(8) buckets left (2),</p>\n\n<p>P2:(2) end</p>\n\n<p>Final score is calculated with (rocks of player 1) - (rocks of player2) </p>\n\n<p>Score = (3+10+8)-(4+3+2) = 12</p>\n\n<p>We play player1 and our goal is to find the OPTIMAL pick order in which we have the biggest score.</p>\n\n<p>I know the concept of DP but I have no idea what could I save in order to improve the time. \nThe main part of the code I did with minmax algorithm and it worked but I have no idea how to combine it with dynamic programming</p>\n\n<p>I tried having a matrix with rows as buckets from left and columns as buckets from right, so I can save there answers for when we use the same “part” of the array, but I had some problems with it...</p>\n\n<p>EDIT1: added my code</p>\n\n<pre><code>public int maxGain(int[] values)\n{\n    this.moves = new int[values.length+1][values.length+1];\n    return  _maxGain(values,0,values.length-1,0,0,values.length,true,0,0);\n}\n\npublic int _maxGain(int[] values, int leftBowl, int rightBowl, int valuePlayer1, int valuePlayer2,int leftBowls, boolean ifFirstPlayer, int leftMoves, int rightMoves){\n        //Check if end of the game\n        if(leftBowls == 0) {\n            //Calculate the final score\n            return valuePlayer1 - valuePlayer2;\n        }\n        //System.out.println(\"Left:\"+values[leftBowl]+\", right: \"+values[rightBowl]);\n        // If first player\n        if(ifFirstPlayer){\n            int maxEval = Integer.MIN_VALUE;\n            int eval;\n            for(int i=0;i&lt;2;i++){\n                if(i==0){\n                    //Do move\n                    valuePlayer1 = valuePlayer1+values[leftBowl];\n                    leftBowls--;\n                    leftMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    leftMoves--;\n                    maxEval = Math.max(maxEval,eval);\n                    //Undo move\n                    valuePlayer1 = valuePlayer1-values[leftBowl];\n                    leftBowls++;\n                }else{\n                    //Do move\n                    valuePlayer1 = valuePlayer1+values[rightBowl];\n                    leftBowls--;\n                    rightMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    rightMoves--;\n                    maxEval = Math.max(maxEval,eval);\n                    //Undo move\n                    valuePlayer1 = valuePlayer1-values[rightBowl];\n                    leftBowls++;\n                }\n            }\n            return maxEval;\n            //If second player\n        }else{\n            int minEval = Integer.MAX_VALUE;\n            int eval;\n            for(int i=0;i&lt;2;i++){\n                if(i==0){\n                    //Do move\n                    valuePlayer2 = valuePlayer2+values[leftBowl];\n                    leftBowls--;\n                    leftMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    leftMoves--;\n                    minEval = Math.min(minEval,eval);\n                    //Undo move\n                    valuePlayer2 = valuePlayer2-values[leftBowl];\n                    leftBowls++;\n                }else{\n                    //Do move\n                    valuePlayer2 = valuePlayer2+values[rightBowl];\n                    leftBowls--;\n                    rightMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    rightMoves--;\n                    minEval = Math.min(minEval,eval);\n                    //Undo move\n                    valuePlayer2 = valuePlayer2-values[rightBowl];\n                    leftBowls++;\n                }\n            }\n            return minEval;\n        }\n    }\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":2,"creation_date":1701898517,"post_id":77616396,"comment_id":136833511,"body_markdown":"Have you tried to set `where t.published   = true` yet ?","body":"Have you tried to set <code>where t.published   = true</code> yet ?"},{"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"score":0,"creation_date":1701901113,"post_id":77616396,"comment_id":136833863,"body_markdown":"Thanks. Its working. but  ```&lt;&gt; true```  otherwise ```!= true``` is not working.  Before I have used ```t.published IS NOT TRUE```. So I am using ```(t.published   is null or t.published   = false)``` instead.","body":"Thanks. Its working. but  <code>&lt;&gt; true</code>  otherwise <code>!= true</code> is not working.  Before I have used <code>t.published IS NOT TRUE</code>. So I am using <code>(t.published   is null or t.published   = false)</code> instead."}],"answers":[{"comments":[{"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"score":0,"creation_date":1701917469,"post_id":77616664,"comment_id":136835495,"body_markdown":"It&#39;s a sample for demonstrating```where t.published IS TRUE``` or```IS FALSE``` or```IS NOT TRUE``` or ```IS NOT FALSE``` is not working  in Spring boot 3.2 with Hibernate 6.4.0 (ANTLR 4.13.0). But our actual JPA Query has JOIN multiple entities with boolean comparisons.","body":"It&#39;s a sample for demonstrating<code>where t.published IS TRUE</code> or<code>IS FALSE</code> or<code>IS NOT TRUE</code> or <code>IS NOT FALSE</code> is not working  in Spring boot 3.2 with Hibernate 6.4.0 (ANTLR 4.13.0). But our actual JPA Query has JOIN multiple entities with boolean comparisons."},{"owner":{"account_id":9525384,"reputation":512,"user_id":7078743,"accept_rate":43,"display_name":"kcsurapaneni"},"score":0,"creation_date":1701924131,"post_id":77616664,"comment_id":136835955,"body_markdown":"@ajeshbaby JPA Query Method is actually going to generate SQL query as `t.published = true`, not `t.published IS TRUE`","body":"@ajeshbaby JPA Query Method is actually going to generate SQL query as <code>t.published = true</code>, not <code>t.published IS TRUE</code>"},{"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"score":0,"creation_date":1702104902,"post_id":77616664,"comment_id":136858828,"body_markdown":"I saw ```t.published = true``` is woring, but why ```t.published != true```  or ```t.published &lt;&gt; true``` is not working. While I am using Spring 2.7.1, I have used ```t.published is true``` and ```t.published is not true```. Do you know, instead of ```t.published is not true``` now I am using in sring 3.2.0 as ```(t.published is null or t.published = false)```","body":"I saw <code>t.published = true</code> is woring, but why <code>t.published != true</code>  or <code>t.published &lt;&gt; true</code> is not working. While I am using Spring 2.7.1, I have used <code>t.published is true</code> and <code>t.published is not true</code>. Do you know, instead of <code>t.published is not true</code> now I am using in sring 3.2.0 as <code>(t.published is null or t.published = false)</code>"}],"tags":[],"owner":{"account_id":9525384,"reputation":512,"user_id":7078743,"accept_rate":43,"display_name":"kcsurapaneni"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701901608,"creation_date":1701901608,"answer_id":77616664,"question_id":77616396,"body_markdown":"You can use JPA Query Methods, like in your case `findByPublishedTrue()` so that the method name will be translated into the JPA query.\r\n\r\n```java\r\npublic interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {     \r\n    List&lt;Tutorial&gt; findByPublishedTrue();\r\n}\r\n```\r\n\r\n**Note:** you don&#39;t have to use `@Query` on top your method. \r\n\r\nIf you want to know more about JPA Query Methods, check the official documentation here - https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html","title":"How to use Spring Boot 3.2.0 with MySQL database and JpaRepository @Query has boolean comparison","body":"<p>You can use JPA Query Methods, like in your case <code>findByPublishedTrue()</code> so that the method name will be translated into the JPA query.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {     \n    List&lt;Tutorial&gt; findByPublishedTrue();\n}\n</code></pre>\n<p><strong>Note:</strong> you don't have to use <code>@Query</code> on top your method.</p>\n<p>If you want to know more about JPA Query Methods, check the official documentation here - <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html</a></p>\n"},{"comments":[{"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"score":0,"creation_date":1702105405,"post_id":77626946,"comment_id":136858859,"body_markdown":"I know about Query creation from method names. My question is specific to: why ```t.published is true``` is not working in spring boot 3.2.0 (but its working in spring boot 2.7.1).  Do you know, instead of ```t.published is not true``` now I am using in spring boot 3.2.0 as ```(t.published is null or t.published = false)```. \n\nIt&#39;s a sample for demonstrating ```where t.published IS TRUE``` or ```IS FALSE``` or ```IS NOT TRUE``` or ```IS NOT FALSE``` is not working in Spring boot 3.2.0. But our actual JPA Query has complex JOIN multiple entities with boolean comparisons.","body":"I know about Query creation from method names. My question is specific to: why <code>t.published is true</code> is not working in spring boot 3.2.0 (but its working in spring boot 2.7.1).  Do you know, instead of <code>t.published is not true</code> now I am using in spring boot 3.2.0 as <code>(t.published is null or t.published = false)</code>.   It&#39;s a sample for demonstrating <code>where t.published IS TRUE</code> or <code>IS FALSE</code> or <code>IS NOT TRUE</code> or <code>IS NOT FALSE</code> is not working in Spring boot 3.2.0. But our actual JPA Query has complex JOIN multiple entities with boolean comparisons."},{"owner":{"account_id":17074189,"reputation":163,"user_id":12354182,"display_name":"cherish sham"},"score":0,"creation_date":1702195462,"post_id":77626946,"comment_id":136865381,"body_markdown":"Different Spring versions use different versions of hibernate underneath. I suggest to read hibernate migration guide for this. There&#39;s a lot of stuff changed with hibernate 6 which comes with spring boot 3.2.x. other way is to use naive query =true flag. So as to match the query your db provider is expecting. Finally you can still stick to old version of hibernate just for time being to test your application migration on remaining things.","body":"Different Spring versions use different versions of hibernate underneath. I suggest to read hibernate migration guide for this. There&#39;s a lot of stuff changed with hibernate 6 which comes with spring boot 3.2.x. other way is to use naive query =true flag. So as to match the query your db provider is expecting. Finally you can still stick to old version of hibernate just for time being to test your application migration on remaining things."}],"tags":[],"owner":{"account_id":17074189,"reputation":163,"user_id":12354182,"display_name":"cherish sham"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702044419,"creation_date":1702042418,"answer_id":77626946,"question_id":77616396,"body_markdown":"check https://docs.spring.io/spring-data/jpa/docs/current-SNAPSHOT/reference/html/#jpa.query-methods.query-creation for query syntax.\r\nThe error you got &quot;**Bad JPQL grammar** [select t from Tutorial t where t.published IS TRUE]&quot; clearly says JPA query syntax is not correct.\r\n\r\nalso &lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt; is not coming default with spring boot 3.2.0 hence the warning is coming because of incorrect version used to compile and run the hibernate queries. remove it to use default hibernate version which comes with spring boot 3.2.0 to resolve this warning","title":"How to use Spring Boot 3.2.0 with MySQL database and JpaRepository @Query has boolean comparison","body":"<p>check <a href=\"https://docs.spring.io/spring-data/jpa/docs/current-SNAPSHOT/reference/html/#jpa.query-methods.query-creation\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current-SNAPSHOT/reference/html/#jpa.query-methods.query-creation</a> for query syntax.\nThe error you got &quot;<strong>Bad JPQL grammar</strong> [select t from Tutorial t where t.published IS TRUE]&quot; clearly says JPA query syntax is not correct.</p>\n<p>also &lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt; is not coming default with spring boot 3.2.0 hence the warning is coming because of incorrect version used to compile and run the hibernate queries. remove it to use default hibernate version which comes with spring boot 3.2.0 to resolve this warning</p>\n"}],"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1702044419,"creation_date":1701897874,"question_id":77616396,"body_markdown":"I am planning to migrate spring boot from 2.7.1 to 3.2.0. \r\n\r\nIt&#39;s my model class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;tutorials&quot;)\r\n    public class Tutorial {\r\n\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.AUTO)\r\n\t    private long id;\r\n\r\n\t    @Column(name = &quot;title&quot;)\r\n\t    private String title;\r\n\r\n\t    @Column(name = &quot;description&quot;)\r\n\t    private String description;\r\n\r\n\t    @Column(name = &quot;published&quot;)\r\n\t    private Boolean published;\r\n\r\n\t    // setters and getters\r\n    }\r\n    \r\nAnd my repository:\r\n\r\n    public interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {\t\t\r\n\t    @Query(&quot;select t from Tutorial t where t.published IS TRUE&quot;)\r\n\t    List&lt;Tutorial&gt; getTutorial();\r\n    }\r\n\r\nAnd My rest Controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class TutorialController {\r\n\r\n\t@Autowired\r\n\tTutorialRepository tutorialRepository;\r\n\r\n\t@GetMapping(&quot;/tutorials&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; getAllTutorials(@RequestParam(required = false) String title) {\r\n\t\ttry {\r\n\t\t\tList&lt;Tutorial&gt; tutorials = new ArrayList&lt;Tutorial&gt;();\r\n\r\n\t\t\tif (title == null)\r\n\t\t\t\ttutorialRepository.findAll().forEach(tutorials::add);\r\n\t\t\telse\r\n\t\t\t\ttutorialRepository.findByTitleContaining(title).forEach(tutorials::add);\r\n\r\n\t\t\tif (tutorials.isEmpty()) {\r\n\t\t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\r\n\t\t\t}\r\n\r\n\t\t\treturn new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t@GetMapping(&quot;/tutorial/published&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; findByTutorialPublished() {\r\n\t\ttry {\r\n\t\t\tList&lt;Tutorial&gt; tutorials = tutorialRepository.getTutorial();\r\n\t\t\ttutorials.forEach(System.out::println);\r\n\t\t\tif (tutorials.isEmpty()) {\r\n\t\t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\r\n\t\t\t}\r\n\t\t\treturn new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t\t}\r\n\t}\r\n\r\n    }\r\n\r\nAnd for database configuration, I create application.properties\r\n\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.datasource.url=jdbc:mysql://localhost/testdb\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n\r\nWhen I check the api &#39;http://localhost:8080/api/tutorial/published&#39;, got 500 internal server error. Means, fails to execute JPA query with boolean comparison. But its working in spring boot 2.7.1.\r\n\r\n\r\nI again tried using hibernate to 6.4.0 in pom.xml. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.bezkoder&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-mysql&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;spring-mysql&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot Apis CRUD using Spring Data JPA&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;21&lt;/java.version&gt;\r\n\t\t&lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\n\r\nNo hope. \r\n\r\nIn Eclipse IDE, I can see following warning: (no issues)\r\n\r\n    ANTLR Tool version 4.10.1 used for code generation does not match the current runtime version 4.13.0\r\n    ANTLR Runtime version 4.10.1 used for parser compilation does not match the current runtime version 4.13.0\r\n\r\nBut the error in eclipse while testing the api as follows:\r\n\r\n    org.springframework.dao.InvalidDataAccessApiUsageException: org.springframework.data.jpa.repository.query.BadJpqlGrammarException: Line 1:44 mismatched input &#39;IS&#39; expecting {&lt;EOF&gt;, &#39;,&#39;, &#39;+&#39;, &#39;-&#39;, &#39;/&#39;, &#39;||&#39;, &#39;[&#39;, &#39;.&#39;, AND, &#39;*&#39;, BY, DAY, EPOCH, EXCEPT, GROUP, HOUR, INTERSECT, MINUTE, MONTH, NANOSECOND, OR, ORDER, QUARTER, SECOND, UNION, WEEK, YEAR}; Bad JPQL grammar [select t from Tutorial t where t.published IS TRUE]\r\n\r\n\r\nPlease guide me to move forward with Spring boot 3.2.0 ?","title":"How to use Spring Boot 3.2.0 with MySQL database and JpaRepository @Query has boolean comparison","body":"<p>I am planning to migrate spring boot from 2.7.1 to 3.2.0.</p>\n<p>It's my model class:</p>\n<pre><code>@Entity\n@Table(name = &quot;tutorials&quot;)\npublic class Tutorial {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;description&quot;)\n    private String description;\n\n    @Column(name = &quot;published&quot;)\n    private Boolean published;\n\n    // setters and getters\n}\n</code></pre>\n<p>And my repository:</p>\n<pre><code>public interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {     \n    @Query(&quot;select t from Tutorial t where t.published IS TRUE&quot;)\n    List&lt;Tutorial&gt; getTutorial();\n}\n</code></pre>\n<p>And My rest Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class TutorialController {\n\n@Autowired\nTutorialRepository tutorialRepository;\n\n@GetMapping(&quot;/tutorials&quot;)\npublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; getAllTutorials(@RequestParam(required = false) String title) {\n    try {\n        List&lt;Tutorial&gt; tutorials = new ArrayList&lt;Tutorial&gt;();\n\n        if (title == null)\n            tutorialRepository.findAll().forEach(tutorials::add);\n        else\n            tutorialRepository.findByTitleContaining(title).forEach(tutorials::add);\n\n        if (tutorials.isEmpty()) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\n        }\n\n        return new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\n    } catch (Exception e) {\n        return new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n\n\n@GetMapping(&quot;/tutorial/published&quot;)\npublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; findByTutorialPublished() {\n    try {\n        List&lt;Tutorial&gt; tutorials = tutorialRepository.getTutorial();\n        tutorials.forEach(System.out::println);\n        if (tutorials.isEmpty()) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\n        }\n        return new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\n    } catch (Exception e) {\n        return new ResponseEntity&lt;&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n\n}\n</code></pre>\n<p>And for database configuration, I create application.properties</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\nspring.datasource.url=jdbc:mysql://localhost/testdb\nspring.datasource.username=root\nspring.datasource.password=root\n</code></pre>\n<p>When I check the api 'http://localhost:8080/api/tutorial/published', got 500 internal server error. Means, fails to execute JPA query with boolean comparison. But its working in spring boot 2.7.1.</p>\n<p>I again tried using hibernate to 6.4.0 in pom.xml.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.bezkoder&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-mysql&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-mysql&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot Apis CRUD using Spring Data JPA&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>No hope.</p>\n<p>In Eclipse IDE, I can see following warning: (no issues)</p>\n<pre><code>ANTLR Tool version 4.10.1 used for code generation does not match the current runtime version 4.13.0\nANTLR Runtime version 4.10.1 used for parser compilation does not match the current runtime version 4.13.0\n</code></pre>\n<p>But the error in eclipse while testing the api as follows:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: org.springframework.data.jpa.repository.query.BadJpqlGrammarException: Line 1:44 mismatched input 'IS' expecting {&lt;EOF&gt;, ',', '+', '-', '/', '||', '[', '.', AND, '*', BY, DAY, EPOCH, EXCEPT, GROUP, HOUR, INTERSECT, MINUTE, MONTH, NANOSECOND, OR, ORDER, QUARTER, SECOND, UNION, WEEK, YEAR}; Bad JPQL grammar [select t from Tutorial t where t.published IS TRUE]\n</code></pre>\n<p>Please guide me to move forward with Spring boot 3.2.0 ?</p>\n"},{"tags":["java","mysql","sql"],"answers":[{"comments":[{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1391405290,"post_id":21519575,"comment_id":32492166,"body_markdown":"@Jugadu Thanks for rectifying the mistake","body":"@Jugadu Thanks for rectifying the mistake"}],"tags":[],"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391404821,"creation_date":1391401052,"answer_id":21519575,"question_id":21519541,"body_markdown":"The way you are using is not the proper way of using PreparedStatement\r\n\r\nDo like this\r\n\r\n    String charitysql = &quot;SELECT wardName, charityRoomID FROM tbl_charityward,tbl_charityroom2 \r\n    WHERE tbl_charityward.charityWardID = ?&quot;;\r\n    pst = conn.prepareStatement(charitysql);\r\n    pst.setInt(1,tbl_charityroom2.charityWardID);\r\n    rs = pst.executeQuery();","title":"Select Query and will appear to comboBox in Netbeans &amp; mysql","body":"<p>The way you are using is not the proper way of using PreparedStatement</p>\n\n<p>Do like this</p>\n\n<pre><code>String charitysql = \"SELECT wardName, charityRoomID FROM tbl_charityward,tbl_charityroom2 \nWHERE tbl_charityward.charityWardID = ?\";\npst = conn.prepareStatement(charitysql);\npst.setInt(1,tbl_charityroom2.charityWardID);\nrs = pst.executeQuery();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2645230,"reputation":31,"user_id":2288080,"accept_rate":25,"display_name":"Rima Touya"},"score":0,"creation_date":1391403940,"post_id":21519636,"comment_id":32491797,"body_markdown":"i tried your code but error appears: &#39;Uncompiled Source code - Erroneous tree type: &lt;any&gt;&#39; and i have noticed in &#39;pst.setString(1,**tbl_charityroom2**.charityWardID)&#39; &#39;tbl_charityroom2&#39; got red underline. My bad in putting tbl_charityroom instead of tbl_charityroom2.","body":"i tried your code but error appears: &#39;Uncompiled Source code - Erroneous tree type: &lt;any&gt;&#39; and i have noticed in &#39;pst.setString(1,<b>tbl_charityroom2</b>.charityWardID)&#39; &#39;tbl_charityroom2&#39; got red underline. My bad in putting tbl_charityroom instead of tbl_charityroom2."},{"owner":{"account_id":3430881,"reputation":20272,"user_id":2875348,"accept_rate":100,"display_name":"ravibagul91"},"score":0,"creation_date":1391404340,"post_id":21519636,"comment_id":32491890,"body_markdown":"What is your table name tbl_charityroom or tbl_charityroom2?","body":"What is your table name tbl_charityroom or tbl_charityroom2?"},{"owner":{"account_id":3430881,"reputation":20272,"user_id":2875348,"accept_rate":100,"display_name":"ravibagul91"},"score":0,"creation_date":1391404437,"post_id":21519636,"comment_id":32491918,"body_markdown":"`pst.setString(1,tbl_charityroom2.charityWardID)` should be `pst.setInt(1,tbl_charityroom2.charityWardID)` because `charityWardID` is `int` see the edit","body":"<code>pst.setString(1,tbl_charityroom2.charityWardID)</code> should be <code>pst.setInt(1,tbl_charityroom2.charityWardID)</code> because <code>charityWardID</code> is <code>int</code> see the edit"},{"owner":{"account_id":2645230,"reputation":31,"user_id":2288080,"accept_rate":25,"display_name":"Rima Touya"},"score":0,"creation_date":1391404817,"post_id":21519636,"comment_id":32492020,"body_markdown":"nothing happens. same as pst.setString, got red underline","body":"nothing happens. same as pst.setString, got red underline"},{"owner":{"account_id":2645230,"reputation":31,"user_id":2288080,"accept_rate":25,"display_name":"Rima Touya"},"score":0,"creation_date":1391405166,"post_id":21519636,"comment_id":32492130,"body_markdown":"what do you mean by declaring it? im sorry im new in netbeans","body":"what do you mean by declaring it? im sorry im new in netbeans"},{"owner":{"account_id":3430881,"reputation":20272,"user_id":2875348,"accept_rate":100,"display_name":"ravibagul91"},"score":0,"creation_date":1391405649,"post_id":21519636,"comment_id":32492292,"body_markdown":"just add your code at last of your question I&#39;ll see it and stack trace too.","body":"just add your code at last of your question I&#39;ll see it and stack trace too."},{"owner":{"account_id":3430881,"reputation":20272,"user_id":2875348,"accept_rate":100,"display_name":"ravibagul91"},"score":0,"creation_date":1391406845,"post_id":21519636,"comment_id":32492694,"body_markdown":"just try this `String charitysql = &quot;SELECT wardName, charityRoomID FROM tbl_charityward,tbl_charityroom2\nWHERE tbl_charityward.charityWardID = tbl_charityroom2.charityWardID&quot;;` and remove this  `pst.setInt(1,tbl_charityroom2.charityWardID);` because you can  not directly get the value","body":"just try this <code>String charitysql = &quot;SELECT wardName, charityRoomID FROM tbl_charityward,tbl_charityroom2 WHERE tbl_charityward.charityWardID = tbl_charityroom2.charityWardID&quot;;</code> and remove this  <code>pst.setInt(1,tbl_charityroom2.charityWardID);</code> because you can  not directly get the value"},{"owner":{"account_id":2645230,"reputation":31,"user_id":2288080,"accept_rate":25,"display_name":"Rima Touya"},"score":0,"creation_date":1391407801,"post_id":21519636,"comment_id":32492995,"body_markdown":"the code you gave is same as the code i posted above. With that code the wardName appears in cb_ward2 but it duplicates the value. on wardName the values are Surgical, Obygine, Pediatric. Surgical have 2 charityRoomID (1,2), Obygine (1) and Pediatric (0) but when i click the cb_ward2 there are 3 items/value appear (Surgical,Surgical,Obygine) as you can see, it duplicates the Surgical. I want to remove the duplicate but i do not know the right code should i put. And when i select Surgical there are 3 items/values appear on cb_room2 (1,2,3) and that should be (1,2) only.","body":"the code you gave is same as the code i posted above. With that code the wardName appears in cb_ward2 but it duplicates the value. on wardName the values are Surgical, Obygine, Pediatric. Surgical have 2 charityRoomID (1,2), Obygine (1) and Pediatric (0) but when i click the cb_ward2 there are 3 items/value appear (Surgical,Surgical,Obygine) as you can see, it duplicates the Surgical. I want to remove the duplicate but i do not know the right code should i put. And when i select Surgical there are 3 items/values appear on cb_room2 (1,2,3) and that should be (1,2) only."},{"owner":{"account_id":2645230,"reputation":31,"user_id":2288080,"accept_rate":25,"display_name":"Rima Touya"},"score":0,"creation_date":1391411086,"post_id":21519636,"comment_id":32494144,"body_markdown":"Hi. same result, duplicates again","body":"Hi. same result, duplicates again"},{"owner":{"account_id":3430881,"reputation":20272,"user_id":2875348,"accept_rate":100,"display_name":"ravibagul91"},"score":0,"creation_date":1391422228,"post_id":21519636,"comment_id":32499213,"body_markdown":"See the edit. I am not sure about this but try it once.","body":"See the edit. I am not sure about this but try it once."}],"tags":[],"owner":{"account_id":3430881,"reputation":20272,"user_id":2875348,"accept_rate":100,"display_name":"ravibagul91"},"comment_count":10,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391422177,"creation_date":1391401455,"answer_id":21519636,"question_id":21519541,"body_markdown":"As your basic requirement is to show data into two `ComboBoxes`, you can do it as:\r\n \r\nYou can use a `loadcombo()` to load your `cb_ward2` combobox with database values.\r\n\r\n\r\n    void loadcombo() {\r\n        try\r\n        {\r\n         Connection conn=null;\r\n\t PreparedStatement pst=null;\r\n\t ResultSet rs=null;\r\n\t// Your database connections \r\n    \r\n         String charitysql = &quot;SELECT wardName FROM tbl_charityward&quot;;\r\n         pst = conn.prepareStatement(charitysql);\r\n         rs = pst.executeQuery();\r\n        while(rs.next()){                            \r\n            cb_ward2.addItem(rs.getString(1));\r\n        }\r\n        con.close();\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            System.out.println(&quot;Error&quot;+e);\r\n        }    \r\n    }\r\n\r\nNow you can use `ActionListener` on `cb_ward2` as:\r\n\r\n    cb_ward2.addActionListener(new ActionListener(){\r\n            \r\n            \r\n        public void actionPerformed(ActionEvent ae){\r\n            try\r\n\t\t{\r\n\t\t\tConnection con=null;\r\n\t\t\tPreparedStatement pst=null,pst1=null;\r\n\t\t\tResultSet rs=null,rs1=null;\r\n        //your database connection\r\n                    Object name=cb_ward2.getSelectedItem();\r\n                    \tpst=con.preparedStatement(&quot;select charityWardID from tbl_charityward where wardName=?&quot;);\r\n\t                pst.setObject(1,name);\r\n                        rs= pst.executeQuery();\r\n\t\t\tif(rs.next())\r\n\t\t\t{\r\n                          pst1=con.preparedStatement(&quot;select charityRoomID from tbl_charityroom2 where charityWardID=?&quot;);\r\n                          pst1.setInt(1,rs.getInt(1));\r\n                          rs1=pst1.executeQuery();\r\n                          while(rs1.next()){\r\n                          cb_room2.addItem(rs1.getInt(1));\r\n                          }\r\n\t\t        }\r\n\t                con.close();\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;GG&quot;+e);\r\n\t\t}\r\n\r\n        }\r\n\r\n            \r\n        });\r\n","title":"Select Query and will appear to comboBox in Netbeans &amp; mysql","body":"<p>As your basic requirement is to show data into two <code>ComboBoxes</code>, you can do it as:</p>\n\n<p>You can use a <code>loadcombo()</code> to load your <code>cb_ward2</code> combobox with database values.</p>\n\n<pre><code>void loadcombo() {\n    try\n    {\n     Connection conn=null;\n PreparedStatement pst=null;\n ResultSet rs=null;\n// Your database connections \n\n     String charitysql = \"SELECT wardName FROM tbl_charityward\";\n     pst = conn.prepareStatement(charitysql);\n     rs = pst.executeQuery();\n    while(rs.next()){                            \n        cb_ward2.addItem(rs.getString(1));\n    }\n    con.close();\n    }\n    catch(Exception e)\n    {\n        System.out.println(\"Error\"+e);\n    }    \n}\n</code></pre>\n\n<p>Now you can use <code>ActionListener</code> on <code>cb_ward2</code> as:</p>\n\n<pre><code>cb_ward2.addActionListener(new ActionListener(){\n\n\n    public void actionPerformed(ActionEvent ae){\n        try\n    {\n        Connection con=null;\n        PreparedStatement pst=null,pst1=null;\n        ResultSet rs=null,rs1=null;\n    //your database connection\n                Object name=cb_ward2.getSelectedItem();\n                    pst=con.preparedStatement(\"select charityWardID from tbl_charityward where wardName=?\");\n                pst.setObject(1,name);\n                    rs= pst.executeQuery();\n        if(rs.next())\n        {\n                      pst1=con.preparedStatement(\"select charityRoomID from tbl_charityroom2 where charityWardID=?\");\n                      pst1.setInt(1,rs.getInt(1));\n                      rs1=pst1.executeQuery();\n                      while(rs1.next()){\n                      cb_room2.addItem(rs1.getInt(1));\n                      }\n            }\n                con.close();\n    }\n    catch(Exception e)\n    {\n        System.out.println(\"GG\"+e);\n    }\n\n    }\n\n\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7941634,"reputation":57,"user_id":5995420,"accept_rate":100,"display_name":"Igzo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519584660,"creation_date":1519584660,"answer_id":48977160,"question_id":21519541,"body_markdown":"try using an arrayList !! it will give you a push like effect\r\n\r\nsomething like this\r\n\r\n        ArrayList&lt;String&gt; categories = new ArrayList&lt;&gt;();\r\n        Connection conn = null;\r\n        Statement stmt = null;\r\n        ResultSet rs = null;\r\n        try {\r\n            System.out.println(&quot;\\ntrying connection&quot;);\r\n            conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost/products?user=root&amp;password=&quot;);\r\n            stmt = conn.createStatement();\r\n            rs = stmt.executeQuery(&quot;SELECT DISTINCT categorie FROM product&quot;);\r\n            while (rs.next()) {\r\n                categories.add(rs.getString(1));\r\n            }\r\n            for (String item : categories) {\r\n                ComboBoxCategorie.addItem(item);\r\n            }\r\n            \r\n        } catch (SQLException ex) {\r\n            System.out.println(&quot;SQLException: &quot; + ex.getMessage());\r\n            System.out.println(&quot;SQLState: &quot; + ex.getSQLState());\r\n            System.out.println(&quot;VendorError: &quot; + ex.getErrorCode());\r\n        } finally {\r\n            if (stmt != null) {\r\n                try {\r\n                    stmt.close();\r\n                } catch (SQLException sqlEx) {\r\n                } // ignore\r\n                stmt = null;\r\n            }\r\n        }\r\n\r\nyou can ignore the catch and finally clause!! just close the stmt\r\n","title":"Select Query and will appear to comboBox in Netbeans &amp; mysql","body":"<p>try using an arrayList !! it will give you a push like effect</p>\n\n<p>something like this</p>\n\n<pre><code>    ArrayList&lt;String&gt; categories = new ArrayList&lt;&gt;();\n    Connection conn = null;\n    Statement stmt = null;\n    ResultSet rs = null;\n    try {\n        System.out.println(\"\\ntrying connection\");\n        conn = DriverManager.getConnection(\"jdbc:mysql://localhost/products?user=root&amp;password=\");\n        stmt = conn.createStatement();\n        rs = stmt.executeQuery(\"SELECT DISTINCT categorie FROM product\");\n        while (rs.next()) {\n            categories.add(rs.getString(1));\n        }\n        for (String item : categories) {\n            ComboBoxCategorie.addItem(item);\n        }\n\n    } catch (SQLException ex) {\n        System.out.println(\"SQLException: \" + ex.getMessage());\n        System.out.println(\"SQLState: \" + ex.getSQLState());\n        System.out.println(\"VendorError: \" + ex.getErrorCode());\n    } finally {\n        if (stmt != null) {\n            try {\n                stmt.close();\n            } catch (SQLException sqlEx) {\n            } // ignore\n            stmt = null;\n        }\n    }\n</code></pre>\n\n<p>you can ignore the catch and finally clause!! just close the stmt</p>\n"}],"owner":{"account_id":2645230,"reputation":31,"user_id":2288080,"accept_rate":25,"display_name":"Rima Touya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12520,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1702044385,"creation_date":1391400787,"question_id":21519541,"body_markdown":"I got problem on this code: &lt;br/&gt;\r\n&lt;code&gt; String charitysql = &quot;SELECT wardName, charityRoomID FROM tbl_charityward,tbl_charityroom2 &lt;br/&gt;WHERE tbl_charityward.charityWardID = tbl_charityroom2.charityWardID&quot;;&lt;br/&gt;&lt;/code&gt;\r\n           \r\n     try { \r\n\r\n            pst = conn.prepareStatement(charitysql);\r\n            rs = pst.executeQuery();\r\n            \r\n                while (rs.next()) {\r\n                    String wardname = rs.getString(&quot;wardName&quot;);\r\n                    cb_ward2.addItem(wardname);\r\n                    String roomid = rs.getString(&quot;charityRoomID&quot;);\r\n                    cb_room2.addItem(roomid);                    \r\n                                     \r\n                }\r\n            \r\n            }\r\n            catch(Exception e) {\r\n                JOptionPane.showMessageDialog(null, e);\r\n            }\r\n\r\nthis is my tables structure:&lt;br/&gt;\r\n&lt;code&gt;tbl_charityward&lt;br&gt;\r\ncharityWardID int NOT NULL AUTO_INCREMENT,&lt;br&gt;\r\nwardName varchar(20),&lt;br&gt;\r\nstatus varchar(20),&lt;br&gt;\r\nPRIMARY KEY (charityWardID)&lt;/code&gt;\r\n\r\n&lt;code&gt;tbl_charityRoom2&lt;br&gt;\r\ncharityRoomID INT NOT NULL AUTO_INCREMENT,&lt;br&gt;\r\nstatus varchar(20), &lt;br&gt;\r\ncharityWardID int,&lt;br&gt;\r\nPRIMARY KEY (charityRoomID, charityWardID),&lt;br&gt;\r\nFOREIGN KEY (charityWardID) REFERENCES tbl_charityward (charityWardID)&lt;/code&gt;\r\n\r\nthis is my tables  with values:&lt;br/&gt;\r\n&lt;code&gt;tbl_charityward&lt;br&gt;\r\n+-------------+----------+--------+&lt;br&gt;\r\n|charityWardID| wardName | status |&lt;br&gt;\r\n+-------------+----------+--------+&lt;br&gt;\r\n|......1......| Surgical |..Open..|&lt;br&gt;\r\n|......2......| .Obygine |..Open..|&lt;br&gt;\r\n|......3......| Pediatric|..Open..|&lt;br&gt;\r\n+-------------+----------+--------+&lt;br&gt;\r\n\r\ntbl_charityroom2&lt;br&gt;\r\n+-------------+--------+-------------+&lt;br&gt;\r\n|charityRoomID| status |charityWardID|&lt;br&gt;\r\n+-------------+--------+-------------+&lt;br&gt;\r\n|......1......|..Open..|......1......|&lt;br&gt;\r\n|......2......|..Open..|......1......|&lt;br&gt;\r\n|......3......|..Open..|......2......|&lt;br&gt;\r\n+-------------+--------+-------------+&lt;br&gt;&lt;/code&gt;\r\n\r\nI have 2 comboBox:&lt;br&gt;\r\n&lt;code&gt;cb_ward2 = which contains wardName&lt;br&gt;&lt;/code&gt;\r\n&lt;code&gt;cb_room2 = which contains CharityRoomID&lt;/code&gt;\r\n\r\nIf I select a wardName from &lt;code&gt;cb_ward2&lt;/code&gt;, then the &lt;code&gt;cb_room2&lt;/code&gt; will show the corresponding charityRoomID.\r\n\r\nexample:&lt;br&gt;\r\nI select &lt;code&gt;Surgical&lt;/code&gt; and the &lt;code&gt;charityRoomID = 1, 2 &lt;/code&gt;will appear on &lt;code&gt;cb_room2&lt;/code&gt;,&lt;br&gt;\r\nand when i select &lt;code&gt;Obygine&lt;/code&gt;, the &lt;code&gt;charityRoomID = 3 &lt;/code&gt;will only appear on &lt;code&gt;cb_room2&lt;/code&gt;,&lt;br&gt;\r\nbut when i select &lt;code&gt;Pediatric&lt;/code&gt;, no &lt;code&gt;charityRoomID&lt;code&gt; will appear on &lt;code&gt;cb_room2&lt;/code&gt;\r\n\r\nI am using **Netbeans** and **MYSQL**\r\n\r\n\r\n----------\r\n\r\n**EDIT :**\r\n\r\n    import java.sql.*;&lt;br&gt;\r\n    import javax.swing.*;&lt;br&gt;\r\n    public class addBed extends javax.swing.JFrame {\r\n    \r\n        Connection conn = null;\r\n        ResultSet rs = null;\r\n        PreparedStatement pst = null;\r\n               \r\n        /**\r\n         * Creates new form addBed\r\n         */\r\n        public addBed() {\r\n            initComponents();\r\n        }\r\n    \r\n        void loadcombo() {\r\n            \r\n                \r\n                try {\r\n                  \r\n            \r\n                String charitysql = &quot;SELECT wardName, charityRoomID FROM tbl_charityward, tbl_charityroom2 WHERE tbl_charityward.charityWardID = ?&quot;;  \r\n                pst = conn.prepareStatement(charitysql);\r\n                pst.setInt(1,tbl_charityroom2.charityWardID);\r\n                rs = pst.executeQuery();\r\n                \r\n                    while (rs.next()) {\r\n                       \r\n                        cb_ward2.addItem(rs.getString(1));\r\n                       \r\n                        cb_room2.addItem(rs.getString(2));                    \r\n                                         \r\n                    }\r\n                \r\n                }\r\n                catch(Exception e) {\r\n                    JOptionPane.showMessageDialog(null, e);\r\n                }\r\n                \r\n       \r\n                        \r\n               \r\n        }\r\n        private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  \r\n           conn = myconn.ConnectDb();\r\n           loadcombo();\r\n        }                                 \r\n    \r\n        private void btn_add2ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n    \r\n        }     ","title":"Select Query and will appear to comboBox in Netbeans &amp; mysql","body":"<p>I got problem on this code: <br/>\n<code> String charitysql = \"SELECT wardName, charityRoomID FROM tbl_charityward,tbl_charityroom2 <br/>WHERE tbl_charityward.charityWardID = tbl_charityroom2.charityWardID\";<br/></code></p>\n\n<pre><code> try { \n\n        pst = conn.prepareStatement(charitysql);\n        rs = pst.executeQuery();\n\n            while (rs.next()) {\n                String wardname = rs.getString(\"wardName\");\n                cb_ward2.addItem(wardname);\n                String roomid = rs.getString(\"charityRoomID\");\n                cb_room2.addItem(roomid);                    \n\n            }\n\n        }\n        catch(Exception e) {\n            JOptionPane.showMessageDialog(null, e);\n        }\n</code></pre>\n\n<p>this is my tables structure:<br/>\n<code>tbl_charityward<br>\ncharityWardID int NOT NULL AUTO_INCREMENT,<br>\nwardName varchar(20),<br>\nstatus varchar(20),<br>\nPRIMARY KEY (charityWardID)</code></p>\n\n<p><code>tbl_charityRoom2<br>\ncharityRoomID INT NOT NULL AUTO_INCREMENT,<br>\nstatus varchar(20), <br>\ncharityWardID int,<br>\nPRIMARY KEY (charityRoomID, charityWardID),<br>\nFOREIGN KEY (charityWardID) REFERENCES tbl_charityward (charityWardID)</code></p>\n\n<p>this is my tables  with values:<br/>\n<code>tbl_charityward<br>\n+-------------+----------+--------+<br>\n|charityWardID| wardName | status |<br>\n+-------------+----------+--------+<br>\n|......1......| Surgical |..Open..|<br>\n|......2......| .Obygine |..Open..|<br>\n|......3......| Pediatric|..Open..|<br>\n+-------------+----------+--------+<br></p>\n\n<p>tbl_charityroom2<br>\n+-------------+--------+-------------+<br>\n|charityRoomID| status |charityWardID|<br>\n+-------------+--------+-------------+<br>\n|......1......|..Open..|......1......|<br>\n|......2......|..Open..|......1......|<br>\n|......3......|..Open..|......2......|<br>\n+-------------+--------+-------------+<br></code></p>\n\n<p>I have 2 comboBox:<br>\n<code>cb_ward2 = which contains wardName<br></code>\n<code>cb_room2 = which contains CharityRoomID</code></p>\n\n<p>If I select a wardName from <code>cb_ward2</code>, then the <code>cb_room2</code> will show the corresponding charityRoomID.</p>\n\n<p>example:<br>\nI select <code>Surgical</code> and the <code>charityRoomID = 1, 2 </code>will appear on <code>cb_room2</code>,<br>\nand when i select <code>Obygine</code>, the <code>charityRoomID = 3 </code>will only appear on <code>cb_room2</code>,<br>\nbut when i select <code>Pediatric</code>, no <code>charityRoomID<code> will appear on cb_room2</code></p>\n\n<p>I am using <strong>Netbeans</strong> and <strong>MYSQL</strong></p>\n\n<hr>\n\n<p><strong>EDIT :</strong></p>\n\n<pre>import java.sql.*;&lt;br&gt;\nimport javax.swing.*;&lt;br&gt;\npublic class addBed extends javax.swing.JFrame {\n\n    Connection conn = null;\n    ResultSet rs = null;\n    PreparedStatement pst = null;\n\n    /**\n     * Creates new form addBed\n     */\n    public addBed() {\n        initComponents();\n    }\n\n    void loadcombo() {\n\n\n            try {\n\n\n            String charitysql = \"SELECT wardName, charityRoomID FROM tbl_charityward, tbl_charityroom2 WHERE tbl_charityward.charityWardID = ?\";  \n            pst = conn.prepareStatement(charitysql);\n            pst.setInt(1,tbl_charityroom2.charityWardID);\n            rs = pst.executeQuery();\n\n                while (rs.next()) {\n\n                    cb_ward2.addItem(rs.getString(1));\n\n                    cb_room2.addItem(rs.getString(2));                    \n\n                }\n\n            }\n            catch(Exception e) {\n                JOptionPane.showMessageDialog(null, e);\n            }\n\n\n\n\n    }\n    private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  \n       conn = myconn.ConnectDb();\n       loadcombo();\n    }                                 \n\n    private void btn_add2ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n\n    }     \n</code></pre>\n"},{"tags":["java","3d","window","lwjgl"],"answers":[{"tags":[],"owner":{"account_id":26788388,"reputation":1,"user_id":20638234,"display_name":"Ociz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702043429,"creation_date":1702043429,"answer_id":77627042,"question_id":77513619,"body_markdown":"If I understood the question correctly, creating a simple window looks like this..\r\n```java\r\n        glfwInit();\r\n        long glfwWindow = glfwCreateWindow(width, height, &quot;Window title&quot;, glfwGetPrimaryMonitor(), MemoryUtil.NULL);\r\n\r\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE);\r\n        glfwMakeContextCurrent(glfwWindow);\r\n\r\n        //vsync: 1 on / 0 off\r\n        glfwSwapInterval(1);\r\n        //display settings\r\n        glfwShowWindow(glfwWindow);\r\n        //connects library tools\r\n        GL.createCapabilities();\r\n\r\n        //camera\r\n        glMatrixMode(GL_PROJECTION);\r\n        glOrtho(0, width, 0, height, 1, -1);\r\n        glMatrixMode(GL_MODELVIEW);\r\n\r\n        glClearColor(206f / 255f, 246f / 255f, 1.0f, 1.0f);\r\n        while (!glfwWindowShouldClose(glfwWindow)) {\r\n            //all draw here\r\n\r\n            glfwSwapBuffers(glfwWindow);\r\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\r\n            glfwPollEvents();\r\n        }\r\n```","title":"Java (LWJGL) Window","body":"<p>If I understood the question correctly, creating a simple window looks like this..</p>\n<pre class=\"lang-java prettyprint-override\"><code>        glfwInit();\n        long glfwWindow = glfwCreateWindow(width, height, &quot;Window title&quot;, glfwGetPrimaryMonitor(), MemoryUtil.NULL);\n\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE);\n        glfwMakeContextCurrent(glfwWindow);\n\n        //vsync: 1 on / 0 off\n        glfwSwapInterval(1);\n        //display settings\n        glfwShowWindow(glfwWindow);\n        //connects library tools\n        GL.createCapabilities();\n\n        //camera\n        glMatrixMode(GL_PROJECTION);\n        glOrtho(0, width, 0, height, 1, -1);\n        glMatrixMode(GL_MODELVIEW);\n\n        glClearColor(206f / 255f, 246f / 255f, 1.0f, 1.0f);\n        while (!glfwWindowShouldClose(glfwWindow)) {\n            //all draw here\n\n            glfwSwapBuffers(glfwWindow);\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n            glfwPollEvents();\n        }\n</code></pre>\n"}],"owner":{"account_id":27145583,"reputation":9,"user_id":20685842,"display_name":"bullboi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702043429,"creation_date":1700456891,"question_id":77513619,"body_markdown":"I am currently trying to figure out make to make window for a java game (with lwjgl 3.3.3). Most of the tutorials I have come across are very outdated so some help (along with some slight explanations as I am newer to java) would be very appreciated.\r\n\r\nI have tried multiple tutorials but all of them are outdated so if you can help me or give a good tutorial I&#39;d appreciate it.","title":"Java (LWJGL) Window","body":"<p>I am currently trying to figure out make to make window for a java game (with lwjgl 3.3.3). Most of the tutorials I have come across are very outdated so some help (along with some slight explanations as I am newer to java) would be very appreciated.</p>\n<p>I have tried multiple tutorials but all of them are outdated so if you can help me or give a good tutorial I'd appreciate it.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","spring-projections"],"owner":{"account_id":2184749,"reputation":717,"user_id":1933399,"accept_rate":29,"display_name":"The Shoe Shiner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702043195,"creation_date":1702043195,"question_id":77627013,"body_markdown":"Given a basic JPA entity:\r\n\r\n    @Entity\r\n    class Person {\r\n        String name;\r\n        Integer age;\r\n        //getters and setters\r\n    }\r\n\r\nI need to create a spring JPA DTO projection like the follwing:\r\n\r\n    class PersonProjection {\r\n        String name;\r\n        Integer age;\r\n        String projectionProperty;\r\n        //getters and setters\r\n    }\r\n\r\nThe `projectionProperty` is not something that could be handled via @Formula or standard jpa relationship, hence the use of a Projection.\r\n\r\nGiven that the projection has much in common with the entity, is it possible to use inheritance e.g.:\r\n\r\n    class PersonProjection extends Person {\r\n       String projectionProperty;\r\n       //getters and setters\r\n    }\r\n\r\nCurrently when trying to do this and calling the spring JPA repo method, I get an `org.hibernate.MappingException: Unknown entity: PersonProjection` exception. I assume because spring doesn&#39;t realize that I am attempting to use a projection and instead wants to retrieve an entity, due to @Entity being on the parent class.\r\n\r\nIs there a way I can indicate that although PersonProjection extends an entity, it is *not* an entity for the purposes of my specific repository method? Perhaps by excluding the subclass from JPA, or annotating the spring repo method?\r\n\r\nEdit: Using projection interfaces (as I understand them) isn&#39;t a complete solution for my use case because downstream code needs the results to be Person entity instances, so the query results would have to be re-mapped manually into PersonProjection instances -  which is what Im trying to avoid to begin with.","title":"Is it possible to create a spring JPA DTO projection from a sub class of a full JPA entity?","body":"<p>Given a basic JPA entity:</p>\n<pre><code>@Entity\nclass Person {\n    String name;\n    Integer age;\n    //getters and setters\n}\n</code></pre>\n<p>I need to create a spring JPA DTO projection like the follwing:</p>\n<pre><code>class PersonProjection {\n    String name;\n    Integer age;\n    String projectionProperty;\n    //getters and setters\n}\n</code></pre>\n<p>The <code>projectionProperty</code> is not something that could be handled via @Formula or standard jpa relationship, hence the use of a Projection.</p>\n<p>Given that the projection has much in common with the entity, is it possible to use inheritance e.g.:</p>\n<pre><code>class PersonProjection extends Person {\n   String projectionProperty;\n   //getters and setters\n}\n</code></pre>\n<p>Currently when trying to do this and calling the spring JPA repo method, I get an <code>org.hibernate.MappingException: Unknown entity: PersonProjection</code> exception. I assume because spring doesn't realize that I am attempting to use a projection and instead wants to retrieve an entity, due to @Entity being on the parent class.</p>\n<p>Is there a way I can indicate that although PersonProjection extends an entity, it is <em>not</em> an entity for the purposes of my specific repository method? Perhaps by excluding the subclass from JPA, or annotating the spring repo method?</p>\n<p>Edit: Using projection interfaces (as I understand them) isn't a complete solution for my use case because downstream code needs the results to be Person entity instances, so the query results would have to be re-mapped manually into PersonProjection instances -  which is what Im trying to avoid to begin with.</p>\n"},{"tags":["java","maven","maven-plugin","functional-testing"],"owner":{"account_id":3121211,"reputation":198,"user_id":2640934,"display_name":"gad_gadskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702043136,"creation_date":1702032012,"question_id":77625982,"body_markdown":"I have a Maven plugin with a configuration like this in its &quot;execution&quot; section:\r\n```\r\n&lt;configuration&gt;\r\n    &lt;url&gt;http://localhost:8083&lt;/url&gt;\r\n    &lt;test&gt;\r\n        &lt;id&gt;aaa&lt;/id&gt;\r\n        &lt;description&gt;bbb&lt;/description&gt;\r\n    &lt;/test&gt;\r\n    &lt;clientConfiguration&gt;\r\n        &lt;maxAttempts&gt;2&lt;/maxAttempts&gt;\r\n    &lt;/clientConfiguration&gt;\r\n&lt;/configuration&gt;\r\n```\r\nAppropriate class for test:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Test {\r\n    public String id;\r\n    public String description;\r\n}\r\n```\r\nAnd how these properties are defined in the plugin mojo:\r\n```\r\n@Parameter(name = &quot;url&quot;, property = &quot;url&quot;)\r\npublic String url;\r\n@Parameter(name = &quot;test&quot;, property = &quot;test&quot;)\r\npublic Test test;\r\n```\r\nI need to test different behaviors for the plugin and try to use `org.apache.maven.shared.invoker` lib for this.\r\nMy test preparation will be like this:\r\n```\r\nInvocationRequest request = new DefaultInvocationRequest();\r\nrequest.setPomFile(new File(&quot;./../my-plugin/pom.xml&quot;));\r\n\r\nrequest.setGoals(Collections.singletonList(&quot;my-plugin:my-goal&quot;));\r\n\r\nrequest.getProperties().setProperty(&quot;url&quot;, &quot;https://localhost:1111&quot;);\r\nrequest.getProperties().setProperty(&quot;test.id&quot;, &quot;aaa&quot;);\r\nInvocationResult result = invoker.execute(request);\r\n//processing result...\r\n```\r\nAnd I stuck on such a simple thing as to pass the &quot;test&quot; object into this.\r\nSetting &quot;url&quot; works well in the code above. But I can&#39;t put the `test.id` anyway.\r\nI also tried options like these:\r\n```\r\nrequest.getProperties().setProperty(&quot;test&quot;, &quot;{\\&quot;id\\&quot;:\\&quot;aaa\\&quot;}&quot;);\r\nrequest.getProperties().setProperty(&quot;test&quot;, &quot;&lt;id&gt;aaa&lt;/id&gt;&quot;);\r\n```\r\nBut for all such tries, I got the same error:\r\n`[ERROR] Failed to execute goal my-plugin:0.1.4-SNAPSHOT:my-goal (default-cli) on project my-plugin: Unable to parse configuration of mojo my-plugin:0.1.4-SNAPSHOT:my-goal for parameter test: Cannot find default setter in class Test`\r\nIt doesn&#39;t depend on adding setters, JSON setters, public fields, etc., in the Test class.\r\n\r\nIs there any way to pass an object with data to the InvocationRequest? How is it possible?","title":"Setting config for Maven plugin while testing with org.apache.maven.shared.invoker.*","body":"<p>I have a Maven plugin with a configuration like this in its &quot;execution&quot; section:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;url&gt;http://localhost:8083&lt;/url&gt;\n    &lt;test&gt;\n        &lt;id&gt;aaa&lt;/id&gt;\n        &lt;description&gt;bbb&lt;/description&gt;\n    &lt;/test&gt;\n    &lt;clientConfiguration&gt;\n        &lt;maxAttempts&gt;2&lt;/maxAttempts&gt;\n    &lt;/clientConfiguration&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Appropriate class for test:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Test {\n    public String id;\n    public String description;\n}\n</code></pre>\n<p>And how these properties are defined in the plugin mojo:</p>\n<pre><code>@Parameter(name = &quot;url&quot;, property = &quot;url&quot;)\npublic String url;\n@Parameter(name = &quot;test&quot;, property = &quot;test&quot;)\npublic Test test;\n</code></pre>\n<p>I need to test different behaviors for the plugin and try to use <code>org.apache.maven.shared.invoker</code> lib for this.\nMy test preparation will be like this:</p>\n<pre><code>InvocationRequest request = new DefaultInvocationRequest();\nrequest.setPomFile(new File(&quot;./../my-plugin/pom.xml&quot;));\n\nrequest.setGoals(Collections.singletonList(&quot;my-plugin:my-goal&quot;));\n\nrequest.getProperties().setProperty(&quot;url&quot;, &quot;https://localhost:1111&quot;);\nrequest.getProperties().setProperty(&quot;test.id&quot;, &quot;aaa&quot;);\nInvocationResult result = invoker.execute(request);\n//processing result...\n</code></pre>\n<p>And I stuck on such a simple thing as to pass the &quot;test&quot; object into this.\nSetting &quot;url&quot; works well in the code above. But I can't put the <code>test.id</code> anyway.\nI also tried options like these:</p>\n<pre><code>request.getProperties().setProperty(&quot;test&quot;, &quot;{\\&quot;id\\&quot;:\\&quot;aaa\\&quot;}&quot;);\nrequest.getProperties().setProperty(&quot;test&quot;, &quot;&lt;id&gt;aaa&lt;/id&gt;&quot;);\n</code></pre>\n<p>But for all such tries, I got the same error:\n<code>[ERROR] Failed to execute goal my-plugin:0.1.4-SNAPSHOT:my-goal (default-cli) on project my-plugin: Unable to parse configuration of mojo my-plugin:0.1.4-SNAPSHOT:my-goal for parameter test: Cannot find default setter in class Test</code>\nIt doesn't depend on adding setters, JSON setters, public fields, etc., in the Test class.</p>\n<p>Is there any way to pass an object with data to the InvocationRequest? How is it possible?</p>\n"},{"tags":["java","regex","algorithm","dfa","nfa"],"owner":{"account_id":1044029,"reputation":1363,"user_id":1049393,"accept_rate":67,"display_name":"coderodde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":2,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1701854947,"answer_count":0,"score":-1,"last_activity_date":1702042790,"creation_date":1701854425,"question_id":77611822,"body_markdown":"I have [this GitHub repository](https://github.com/coderodde/regex-toolkit). This is my implementation of the regex toolkit. As you know, a proper regex utility allows the dot operator `.` that matches any character. Adding the dot operator support to a NFA is rather simple. However, doing the same for DFAs seems hard. One problematic aspect is that it is possible for a DFA state to have a dot operator transition ***and*** transition(s) on actual characters. Depending on which I choose in the DFA matching operation, DFA may accept or reject.\r\n\r\nThe unit test method \r\n\r\n        NondeterministicFiniteAutomaton nfa = \r\n                NondeterministicFiniteAutomaton.compile(&quot;((01)|.)?&quot;);\r\n        \r\n        DeterministicFiniteAutomaton dfa =\r\n                nfa.convertToDetermenisticFiniteAutomaton();\r\n        \r\n        assertTrue(dfa.matches(&quot;01&quot;));\r\n\r\nThe above `assertTrue(dfa.matches(&quot;01&quot;))` fails; `nfa` passes the test successfully.\r\n\r\nAny advice how to handle the above described issue?","title":"DFA that can work with the period wildcard dot matching any character","body":"<p>I have <a href=\"https://github.com/coderodde/regex-toolkit\" rel=\"nofollow noreferrer\">this GitHub repository</a>. This is my implementation of the regex toolkit. As you know, a proper regex utility allows the dot operator <code>.</code> that matches any character. Adding the dot operator support to a NFA is rather simple. However, doing the same for DFAs seems hard. One problematic aspect is that it is possible for a DFA state to have a dot operator transition <em><strong>and</strong></em> transition(s) on actual characters. Depending on which I choose in the DFA matching operation, DFA may accept or reject.</p>\n<p>The unit test method</p>\n<pre><code>    NondeterministicFiniteAutomaton nfa = \n            NondeterministicFiniteAutomaton.compile(&quot;((01)|.)?&quot;);\n    \n    DeterministicFiniteAutomaton dfa =\n            nfa.convertToDetermenisticFiniteAutomaton();\n    \n    assertTrue(dfa.matches(&quot;01&quot;));\n</code></pre>\n<p>The above <code>assertTrue(dfa.matches(&quot;01&quot;))</code> fails; <code>nfa</code> passes the test successfully.</p>\n<p>Any advice how to handle the above described issue?</p>\n"},{"tags":["java","spring-boot","ssl","ssl-certificate"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1702062011,"post_id":77626892,"comment_id":136855489,"body_markdown":"HTTPS works by (1) doing the TLS handshake, which includes selecting and sending the certificate, to establish a private (encrypted) and authenticated channel, then (2) sending the HTTP request, including headers, over that channel. Note 1 occurs before 2 and 2 occurs after 1. No program, not springboot nor express nor python nor anything else, can possibly read any header in 2 before making the certificate choice in 1. If you get the clients to issue requests to different _server names_ and have different cert&amp;keys for those server names, that can work using SNI.","body":"HTTPS works by (1) doing the TLS handshake, which includes selecting and sending the certificate, to establish a private (encrypted) and authenticated channel, then (2) sending the HTTP request, including headers, over that channel. Note 1 occurs before 2 and 2 occurs after 1. No program, not springboot nor express nor python nor anything else, can possibly read any header in 2 before making the certificate choice in 1. If you get the clients to issue requests to different <i>server names</i> and have different cert&amp;keys for those server names, that can work using SNI."}],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1702041975,"creation_date":1702041975,"question_id":77626892,"body_markdown":"In our Spring Boot based application we use multitenancy and configure per-tenant JWT validation with `HttpFilter` receiving Issuer URI and JWK set URI within request headers:\r\n```java\r\n@RequiredArgsConstructor\r\npublic class JwtPreAuthorizationConfigurer extends HttpFilter {\r\n    private final OAuth2ResourceServerProperties properties;\r\n\r\n    @Override\r\n    protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws Exception {\r\n        tenantContext.setIssuerUri(request.getHeader(Headers.ISSUER_URI.getName()));\r\n        tenantContext.setJwkSetUri(request.getHeader(Headers.JWK_SET_URI.getName()));\r\n        super.doFilter(request, response, chain);\r\n    }\r\n}\r\n```\r\nNow we need to go further and be able to configure TLS per-tenant either. In other words at runtime we need to be able to decide which certificate we pick from certificate store and use:\r\n- if the request comes from client A we use certificate A\r\n- if the request comes from client B we use certificate B\r\n- etc.\r\n\r\nThis is the part of `application.yml` responsible for SSL configuration:\r\n```java\r\nserver:\r\n  ssl:\r\n    enabled: true\r\n    key-store: &quot;classpath:my-keystore.p12&quot;\r\n    key-store-password: p4ssw0rd\r\n    key-store-type: PKCS12\r\n```\r\nCan this be achieved with means of Spring Boot somehow? E.g. something like\r\n```java\r\npublic class TLSPerRequestConfigurer extends HttpFilter {\r\n\r\n    @Override\r\n    protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws Exception {\r\n        var tenantName = request.getHeader(Headers.TENANT_NAME.getName()));\r\n        // use tenantName\r\n        super.doFilter(request, response, chain);\r\n    }\r\n}\r\n```\r\nP.S. The application is containerized with Kubernetes and deployed into AWS, so other possible non-Spring suggestions are welcome.","title":"Dynamically load TLS certificates per request in Spring Boot application","body":"<p>In our Spring Boot based application we use multitenancy and configure per-tenant JWT validation with <code>HttpFilter</code> receiving Issuer URI and JWK set URI within request headers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\npublic class JwtPreAuthorizationConfigurer extends HttpFilter {\n    private final OAuth2ResourceServerProperties properties;\n\n    @Override\n    protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws Exception {\n        tenantContext.setIssuerUri(request.getHeader(Headers.ISSUER_URI.getName()));\n        tenantContext.setJwkSetUri(request.getHeader(Headers.JWK_SET_URI.getName()));\n        super.doFilter(request, response, chain);\n    }\n}\n</code></pre>\n<p>Now we need to go further and be able to configure TLS per-tenant either. In other words at runtime we need to be able to decide which certificate we pick from certificate store and use:</p>\n<ul>\n<li>if the request comes from client A we use certificate A</li>\n<li>if the request comes from client B we use certificate B</li>\n<li>etc.</li>\n</ul>\n<p>This is the part of <code>application.yml</code> responsible for SSL configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>server:\n  ssl:\n    enabled: true\n    key-store: &quot;classpath:my-keystore.p12&quot;\n    key-store-password: p4ssw0rd\n    key-store-type: PKCS12\n</code></pre>\n<p>Can this be achieved with means of Spring Boot somehow? E.g. something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TLSPerRequestConfigurer extends HttpFilter {\n\n    @Override\n    protected void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws Exception {\n        var tenantName = request.getHeader(Headers.TENANT_NAME.getName()));\n        // use tenantName\n        super.doFilter(request, response, chain);\n    }\n}\n</code></pre>\n<p>P.S. The application is containerized with Kubernetes and deployed into AWS, so other possible non-Spring suggestions are welcome.</p>\n"},{"tags":["java","spring","security"],"owner":{"account_id":19773138,"reputation":1,"user_id":14479724,"display_name":"Lidiia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702041603,"creation_date":1702041603,"question_id":77626842,"body_markdown":"I have a web service and I need to use a role based authorisation, I have 3 roles and all go them doesn&#39;t work here is a code of my security configuration `@Configuration\r\n@EnableWebSecurity\r\npublic class AuthConfig {\r\n\r\n    @Bean\r\n    public HandlerMappingIntrospector mvcHandlerMappingIntrospector() {\r\n        return new HandlerMappingIntrospector();\r\n    }\r\n    @Bean\r\n    public RestTemplate restTemplate() {\r\n        return new RestTemplate();\r\n    }\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return new CustomUserDetailsService();\r\n    }\r\n\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        http.authorizeHttpRequests(\r\n                auth -&gt; auth.requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                        .requestMatchers(&quot;/api/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                        .requestMatchers(&quot;/api/student/**&quot;).hasAnyAuthority(&quot;STUDENT&quot;,&quot;ADMIN&quot;)\r\n                        .requestMatchers(&quot;/api/teacher/**&quot;).hasAnyAuthority(&quot;TEACHER&quot;,&quot;ADMIN&quot;)\r\n                        .anyRequest().authenticated())\r\n                        .csrf(AbstractHttpConfigurer::disable)\r\n                .httpBasic(withDefaults());\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService());\r\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n        return authenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n        return config.getAuthenticationManager();\r\n    }\r\n}\r\n\r\nand here is an example of my student service\r\n\r\n\r\n@Service\r\npublic class StudentService {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private AssessmentItemRepository assessmentItemRepository;\r\n\r\n\r\n    public List&lt;StudentGradeDTO&gt; getStudentGrades(Long studentId) {\r\n        User student = userRepository.findById(studentId).orElseThrow(() -&gt; new RuntimeException(&quot;Student not found&quot;));\r\n        List&lt;Subject&gt; enrolledSubjects = student.getEnrolledSubjects();\r\n\r\n        List&lt;StudentGradeDTO&gt; studentGrades = new ArrayList&lt;&gt;();\r\n        for (Subject subject : enrolledSubjects) {\r\n            List&lt;AssessmentItem&gt; assessments = assessmentItemRepository.findBySubjectAndStudent(subject, student);\r\n            for (AssessmentItem assessment : assessments) {\r\n                StudentGradeDTO gradeDTO = new StudentGradeDTO();\r\n                gradeDTO.setSubjectName(subject.getName());\r\n                gradeDTO.setType(assessment.getType());\r\n                gradeDTO.setExaminerName(assessment.getExaminerName());\r\n                gradeDTO.setGrade(assessment.getGrade());\r\n                gradeDTO.setExamDate(assessment.getExamDate());\r\n\r\n                studentGrades.add(gradeDTO);\r\n            }\r\n        }\r\n\r\n        return studentGrades;\r\n    }\r\n\r\n\r\n\r\n\r\n    public List&lt;AssessmentItem&gt; getUpcomingExamsForStudent(Long studentId) {\r\n        User student = userRepository.findById(studentId)\r\n                .orElseThrow(() -&gt; new RuntimeException(&quot;Student not found&quot;));\r\n\r\n        List&lt;AssessmentItem&gt; upcomingExams = new ArrayList&lt;&gt;();\r\n        LocalDateTime currentDateTime = LocalDateTime.now();\r\n\r\n        for (Subject subject : student.getEnrolledSubjects()) {\r\n            List&lt;AssessmentItem&gt; exams = assessmentItemRepository.findBySubjectAndTypeAndExamDateAfter(\r\n                    subject, &quot;Exam&quot;, currentDateTime);\r\n            upcomingExams.addAll(exams);\r\n        }\r\n\r\n        return upcomingExams;\r\n    }\r\n}\r\n\r\n\r\nstudent controller \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/student&quot;)\r\n    public class StudentController {\r\n        @Autowired\r\n        private StudentService studentService;\r\n    \r\n        @GetMapping(&quot;/grades/{studentId}&quot;)\r\n        public ResponseEntity&lt;List&lt;StudentGradeDTO&gt;&gt; getStudentGrades(@PathVariable Long studentId) {\r\n            List&lt;StudentGradeDTO&gt; studentGrades = studentService.getStudentGrades(studentId);\r\n            return ResponseEntity.ok(studentGrades);\r\n        }\r\n        @GetMapping(&quot;/upcoming-exams/{studentId}&quot;)\r\n        public ResponseEntity&lt;List&lt;AssessmentItem&gt;&gt; getUpcomingExams(@PathVariable Long studentId) {\r\n            List&lt;AssessmentItem&gt; upcomingExams = studentService.getUpcomingExamsForStudent(studentId);\r\n            return ResponseEntity.ok(upcomingExams);\r\n        }\r\n\r\nand when I send a request to get a marks for example, I put in header authorisation &quot;Bearer + token&quot;, but I get a 401 status and here s a debug from spring \r\n2023-12-08T15:17:49.468+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/student/grades/1\r\n2023-12-08T15:17:49.491+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-12-08T15:17:49.513+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/student/grades/1?continue to session\r\n2023-12-08T15:17:49.514+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\r\n2023-12-08T15:17:49.514+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@78ae146f\r\n2023-12-08T15:17:49.516+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error\r\n2023-12-08T15:17:49.520+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-12-08T15:17:49.523+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/error?continue to session\r\n2023-12-08T15:17:49.523+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\r\n2023-12-08T15:17:49.523+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@78ae146f\r\n\r\nand I put role in jwt\r\n\r\n    @Component\r\n    public class JwtService {\r\n    \r\n        public static final String SECRET = &quot;5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437&quot;;\r\n    \r\n        public void validateToken(final String token) {\r\n            parserBuilder().setSigningKey(getSignKey()).build().parseClaimsJws(token);\r\n        }\r\n    \r\n        public String generateToken(String email, UserRole role) {\r\n            Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n            claims.put(&quot;role&quot;, role);\r\n            return createToken(claims, email);\r\n        }\r\n    \r\n        private String createToken(Map&lt;String, Object&gt; claims, String userName) {\r\n            return builder()\r\n                    .setClaims(claims)\r\n                    .setSubject(userName)\r\n                    .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                    .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 30))\r\n                    .signWith(getSignKey(), SignatureAlgorithm.HS256).compact();\r\n        }\r\n    \r\n        private Key getSignKey() {\r\n            byte[] keyBytes = Decoders.BASE64.decode(SECRET);\r\n            return Keys.hmacShaKeyFor(keyBytes);\r\n        }\r\n    \r\n    }\r\n\r\nso anyone knows what is the problem? with permitAll() everything of course is working, but I need to use the roles","title":"Spring security role based authorisation is not working","body":"<p>I have a web service and I need to use a role based authorisation, I have 3 roles and all go them doesn't work here is a code of my security configuration `@Configuration\n@EnableWebSecurity\npublic class AuthConfig {</p>\n<pre><code>@Bean\npublic HandlerMappingIntrospector mvcHandlerMappingIntrospector() {\n    return new HandlerMappingIntrospector();\n}\n@Bean\npublic RestTemplate restTemplate() {\n    return new RestTemplate();\n}\n\n@Bean\npublic UserDetailsService userDetailsService() {\n    return new CustomUserDetailsService();\n}\n\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n    http.authorizeHttpRequests(\n            auth -&gt; auth.requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n                    .requestMatchers(&quot;/api/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n                    .requestMatchers(&quot;/api/student/**&quot;).hasAnyAuthority(&quot;STUDENT&quot;,&quot;ADMIN&quot;)\n                    .requestMatchers(&quot;/api/teacher/**&quot;).hasAnyAuthority(&quot;TEACHER&quot;,&quot;ADMIN&quot;)\n                    .anyRequest().authenticated())\n                    .csrf(AbstractHttpConfigurer::disable)\n            .httpBasic(withDefaults());\n    return http.build();\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n\n@Bean\npublic AuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n    authenticationProvider.setUserDetailsService(userDetailsService());\n    authenticationProvider.setPasswordEncoder(passwordEncoder());\n    return authenticationProvider;\n}\n\n@Bean\npublic AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n    return config.getAuthenticationManager();\n}\n</code></pre>\n<p>}</p>\n<p>and here is an example of my student service</p>\n<p>@Service\npublic class StudentService {</p>\n<pre><code>@Autowired\nprivate UserRepository userRepository;\n\n@Autowired\nprivate AssessmentItemRepository assessmentItemRepository;\n\n\npublic List&lt;StudentGradeDTO&gt; getStudentGrades(Long studentId) {\n    User student = userRepository.findById(studentId).orElseThrow(() -&gt; new RuntimeException(&quot;Student not found&quot;));\n    List&lt;Subject&gt; enrolledSubjects = student.getEnrolledSubjects();\n\n    List&lt;StudentGradeDTO&gt; studentGrades = new ArrayList&lt;&gt;();\n    for (Subject subject : enrolledSubjects) {\n        List&lt;AssessmentItem&gt; assessments = assessmentItemRepository.findBySubjectAndStudent(subject, student);\n        for (AssessmentItem assessment : assessments) {\n            StudentGradeDTO gradeDTO = new StudentGradeDTO();\n            gradeDTO.setSubjectName(subject.getName());\n            gradeDTO.setType(assessment.getType());\n            gradeDTO.setExaminerName(assessment.getExaminerName());\n            gradeDTO.setGrade(assessment.getGrade());\n            gradeDTO.setExamDate(assessment.getExamDate());\n\n            studentGrades.add(gradeDTO);\n        }\n    }\n\n    return studentGrades;\n}\n\n\n\n\npublic List&lt;AssessmentItem&gt; getUpcomingExamsForStudent(Long studentId) {\n    User student = userRepository.findById(studentId)\n            .orElseThrow(() -&gt; new RuntimeException(&quot;Student not found&quot;));\n\n    List&lt;AssessmentItem&gt; upcomingExams = new ArrayList&lt;&gt;();\n    LocalDateTime currentDateTime = LocalDateTime.now();\n\n    for (Subject subject : student.getEnrolledSubjects()) {\n        List&lt;AssessmentItem&gt; exams = assessmentItemRepository.findBySubjectAndTypeAndExamDateAfter(\n                subject, &quot;Exam&quot;, currentDateTime);\n        upcomingExams.addAll(exams);\n    }\n\n    return upcomingExams;\n}\n</code></pre>\n<p>}</p>\n<p>student controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/student&quot;)\npublic class StudentController {\n    @Autowired\n    private StudentService studentService;\n\n    @GetMapping(&quot;/grades/{studentId}&quot;)\n    public ResponseEntity&lt;List&lt;StudentGradeDTO&gt;&gt; getStudentGrades(@PathVariable Long studentId) {\n        List&lt;StudentGradeDTO&gt; studentGrades = studentService.getStudentGrades(studentId);\n        return ResponseEntity.ok(studentGrades);\n    }\n    @GetMapping(&quot;/upcoming-exams/{studentId}&quot;)\n    public ResponseEntity&lt;List&lt;AssessmentItem&gt;&gt; getUpcomingExams(@PathVariable Long studentId) {\n        List&lt;AssessmentItem&gt; upcomingExams = studentService.getUpcomingExamsForStudent(studentId);\n        return ResponseEntity.ok(upcomingExams);\n    }\n</code></pre>\n<p>and when I send a request to get a marks for example, I put in header authorisation &quot;Bearer + token&quot;, but I get a 401 status and here s a debug from spring\n2023-12-08T15:17:49.468+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/student/grades/1\n2023-12-08T15:17:49.491+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-12-08T15:17:49.513+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/api/student/grades/1?continue to session\n2023-12-08T15:17:49.514+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\n2023-12-08T15:17:49.514+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@78ae146f\n2023-12-08T15:17:49.516+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error\n2023-12-08T15:17:49.520+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-12-08T15:17:49.523+02:00 DEBUG 39093 --- [nio-8080-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/error?continue to session\n2023-12-08T15:17:49.523+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\n2023-12-08T15:17:49.523+02:00 DEBUG 39093 --- [nio-8080-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@78ae146f</p>\n<p>and I put role in jwt</p>\n<pre><code>@Component\npublic class JwtService {\n\n    public static final String SECRET = &quot;5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437&quot;;\n\n    public void validateToken(final String token) {\n        parserBuilder().setSigningKey(getSignKey()).build().parseClaimsJws(token);\n    }\n\n    public String generateToken(String email, UserRole role) {\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;role&quot;, role);\n        return createToken(claims, email);\n    }\n\n    private String createToken(Map&lt;String, Object&gt; claims, String userName) {\n        return builder()\n                .setClaims(claims)\n                .setSubject(userName)\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 30))\n                .signWith(getSignKey(), SignatureAlgorithm.HS256).compact();\n    }\n\n    private Key getSignKey() {\n        byte[] keyBytes = Decoders.BASE64.decode(SECRET);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n\n}\n</code></pre>\n<p>so anyone knows what is the problem? with permitAll() everything of course is working, but I need to use the roles</p>\n"},{"tags":["java","junit5"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1701800976,"post_id":77608468,"comment_id":136819547,"body_markdown":"Why would you ever want to do such a thing?","body":"Why would you ever want to do such a thing?"},{"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"score":0,"creation_date":1701801110,"post_id":77608468,"comment_id":136819569,"body_markdown":"@DavidConrad I have soft verifications which I want to be automatically checked for failures when a test ends(I don&#39;t want to explicitly call `soft.assertAll()` at the end of each test). I don&#39;t see other option than to use listeners that run this check for soft failures after the test ends, and then set the test status accordingly.\nBut I am open for smarter suggestions :)","body":"@DavidConrad I have soft verifications which I want to be automatically checked for failures when a test ends(I don&#39;t want to explicitly call <code>soft.assertAll()</code> at the end of each test). I don&#39;t see other option than to use listeners that run this check for soft failures after the test ends, and then set the test status accordingly. But I am open for smarter suggestions :)"},{"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"score":1,"creation_date":1701853612,"post_id":77608468,"comment_id":136825280,"body_markdown":"`org.assertj.core.api.junit.jupiter.SoftAssertionsExtension` already does what you&#39;re trying to do.","body":"<code>org.assertj.core.api.junit.jupiter.SoftAssertionsExtension</code> already does what you&#39;re trying to do."},{"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"score":0,"creation_date":1701857098,"post_id":77608468,"comment_id":136825956,"body_markdown":"@SamBrannen not really, because you must call `assertAll()` explicitly at the end of the assertions :)","body":"@SamBrannen not really, because you must call <code>assertAll()</code> explicitly at the end of the assertions :)"},{"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"score":1,"creation_date":1701954965,"post_id":77608468,"comment_id":136840428,"body_markdown":"What are you talking about? Did you even look at `SoftAssertionsExtension`? As I said, it already does what you are trying to do. It invokes `assertAll()` for you. https://assertj.github.io/doc/#assertj-core-junit5-soft-assertions","body":"What are you talking about? Did you even look at <code>SoftAssertionsExtension</code>? As I said, it already does what you are trying to do. It invokes <code>assertAll()</code> for you. <a href=\"https://assertj.github.io/doc/#assertj-core-junit5-soft-assertions\" rel=\"nofollow noreferrer\">assertj.github.io/doc/#assertj-core-junit5-soft-assertions</a>"}],"answers":[{"comments":[{"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"score":0,"creation_date":1701801911,"post_id":77608570,"comment_id":136819685,"body_markdown":"I inspected the `TestWatcher`, but don&#39;t see any method of `context` that can set the test status. Do you spot such?","body":"I inspected the <code>TestWatcher</code>, but don&#39;t see any method of <code>context</code> that can set the test status. Do you spot such?"},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1701805459,"post_id":77608570,"comment_id":136820231,"body_markdown":"@GeorgiGeorgiev See update","body":"@GeorgiGeorgiev See update"},{"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"score":0,"creation_date":1701857541,"post_id":77608570,"comment_id":136826038,"body_markdown":"I would also need to set the status to failed and attach throwable to it :) In TestNG, the `ITestResult` result has `result.setThrowable()`. In JUnit&#39;s `ExtensionContext ` all I see is getters, but no setters :(","body":"I would also need to set the status to failed and attach throwable to it :) In TestNG, the <code>ITestResult</code> result has <code>result.setThrowable()</code>. In JUnit&#39;s <code>ExtensionContext </code> all I see is getters, but no setters :("}],"tags":[],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701809305,"creation_date":1701801826,"answer_id":77608570,"question_id":77608468,"body_markdown":"You can use the TestWatcher interface from the `org.junit.jupiter:junit-jupiter-api&quot;`:\r\n\r\ndependency:\r\n\r\n`testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:5.9.3&quot;)`\r\n\r\nusing:\r\n\r\n```java\r\npublic class SomeTest implements TestWatcher, AfterAllCallback {\r\n    public void testDisabled(ExtensionContext context, Optional&lt;String&gt; reason) {\r\n        \r\n    }\r\n}\r\n```\r\n\r\n - All methods of the interface are &quot;implemented&quot; by default, so you don&#39;t have to override all of them.\r\n - AfterAllCallback interface allow to you handle `afterAll()` method\r\n\r\nI don&#39;t know which target you try to achieve, but you able to change the status of the result in following way:\r\n\r\n```java\r\n@Override\r\npublic void testFailed(ExtensionContext context, Throwable cause) {\r\n    TestWatcher.super.testSuccessful(context);\r\n}\r\n```\r\n\r\nAlso you can implement `TestExecutionExceptionHandler` and handle `handleTestExecutionException`","title":"Can I change the status(passed, failed, skipped) of a test from any JUnit 5 listener?","body":"<p>You can use the TestWatcher interface from the <code>org.junit.jupiter:junit-jupiter-api&quot;</code>:</p>\n<p>dependency:</p>\n<p><code>testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:5.9.3&quot;)</code></p>\n<p>using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeTest implements TestWatcher, AfterAllCallback {\n    public void testDisabled(ExtensionContext context, Optional&lt;String&gt; reason) {\n        \n    }\n}\n</code></pre>\n<ul>\n<li>All methods of the interface are &quot;implemented&quot; by default, so you don't have to override all of them.</li>\n<li>AfterAllCallback interface allow to you handle <code>afterAll()</code> method</li>\n</ul>\n<p>I don't know which target you try to achieve, but you able to change the status of the result in following way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void testFailed(ExtensionContext context, Throwable cause) {\n    TestWatcher.super.testSuccessful(context);\n}\n</code></pre>\n<p>Also you can implement <code>TestExecutionExceptionHandler</code> and handle <code>handleTestExecutionException</code></p>\n"},{"comments":[{"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"score":0,"creation_date":1701819760,"post_id":77609247,"comment_id":136822149,"body_markdown":"Thank you for the suggestion. But seems that you just moved the `assertAll()` from the end of the method, to the beginning :)) You still have to write explicit code in each method(even though as method param)","body":"Thank you for the suggestion. But seems that you just moved the <code>assertAll()</code> from the end of the method, to the beginning :)) You still have to write explicit code in each method(even though as method param)"},{"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"score":0,"creation_date":1701849721,"post_id":77609247,"comment_id":136824720,"body_markdown":"@GeorgiGeorgiev I don&#39;t think I can follow you? `assertAll()` is _implicitly_ invoked _after_ each test. Would you mind adding an example to your question of how your test code (should) look(s) like?","body":"@GeorgiGeorgiev I don&#39;t think I can follow you? <code>assertAll()</code> is <i>implicitly</i> invoked <i>after</i> each test. Would you mind adding an example to your question of how your test code (should) look(s) like?"},{"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"score":0,"creation_date":1701850425,"post_id":77609247,"comment_id":136824827,"body_markdown":"I would prefer to not pass the soft asserts as parameter to all tests. But now as I am thinking - I can just not create the soft asserts in the `beforeTestExecution`. Of course I would need to have them use `ThreadLocal` for the failures caching.\n\nSo, your example could help me, but I need to experiment with it. Thank you!","body":"I would prefer to not pass the soft asserts as parameter to all tests. But now as I am thinking - I can just not create the soft asserts in the <code>beforeTestExecution</code>. Of course I would need to have them use <code>ThreadLocal</code> for the failures caching.  So, your example could help me, but I need to experiment with it. Thank you!"}],"tags":[],"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702040755,"creation_date":1701810565,"answer_id":77609247,"question_id":77608468,"body_markdown":"## EDIT\r\n\r\nI wasn&#39;t aware of this, but as pointed out by [Sam Brannen](https://stackoverflow.com/a/77620334/3429133), there&#39;s already a [`SoftAssertionsExtension`](https://assertj.github.io/doc/#assertj-core-junit5-soft-assertions) that comes with AssertJ.\r\n\r\n## ORIGINAL ANSWER\r\n\r\nFrom your [comment](https://stackoverflow.com/questions/77608468/can-i-change-the-statuspassed-failed-skipped-of-a-test-from-any-junit-5-list#comment136819569_77608468):\r\n\r\n&gt;I have soft verifications which I want to be automatically checked for failures when a test ends(I don&#39;t want to explicitly call `soft.assertAll()` at the end of each test). I don&#39;t see other option than to use listeners that run this check for soft failures after the test ends, and then set the test status accordingly. But I am open for smarter suggestions :)\r\n\r\nYou could write an [extension](https://junit.org/junit5/docs/current/user-guide/#extensions) that:\r\n\r\n1. Creates a new `SoftAssertions` instance before each test\r\n2. Provides the created `SoftAssertions` as a parameter\r\n3. Calls `assertAll()` after each test\r\n\r\nExtension:\r\n\r\n```java\r\npublic class SoftAssertionsExtension\r\n\t\textends TypeBasedParameterResolver&lt;SoftAssertions&gt;\r\n\t\timplements BeforeTestExecutionCallback, AfterTestExecutionCallback {\r\n\r\n\tprivate static final Namespace STORE_NAMESPACE = Namespace.create(SoftAssertionsExtension.class);\r\n\tprivate static final String STORE_KEY = SoftAssertions.class.getSimpleName();\r\n\r\n\t@Override\r\n\tpublic void beforeTestExecution(ExtensionContext context) {\r\n\t\tcontext.getStore(STORE_NAMESPACE).put(STORE_KEY, new SoftAssertions());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void afterTestExecution(ExtensionContext context) {\r\n\t\tcontext.getStore(STORE_NAMESPACE).get(STORE_KEY, SoftAssertions.class).assertAll();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic SoftAssertions resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext)\r\n\t\t\tthrows ParameterResolutionException {\r\n\t\treturn extensionContext.getStore(STORE_NAMESPACE).get(STORE_KEY, SoftAssertions.class);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n```java\r\n@ExtendWith(SoftAssertionsExtension.class)\r\nclass SoftAssertionsTest {\r\n\r\n\t@Test\r\n\tvoid passingTest(SoftAssertions softly) {\r\n\t\tsoftly.assertThat(true).isTrue();\r\n\t}\r\n\r\n\t@Test\r\n\tvoid failingTest(SoftAssertions softly) {\r\n\t\tsoftly.assertThat(true).isFalse();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe test status is automatically set by the extension / `assertAll()` method.","title":"Can I change the status(passed, failed, skipped) of a test from any JUnit 5 listener?","body":"<h2>EDIT</h2>\n<p>I wasn't aware of this, but as pointed out by <a href=\"https://stackoverflow.com/a/77620334/3429133\">Sam Brannen</a>, there's already a <a href=\"https://assertj.github.io/doc/#assertj-core-junit5-soft-assertions\" rel=\"nofollow noreferrer\"><code>SoftAssertionsExtension</code></a> that comes with AssertJ.</p>\n<h2>ORIGINAL ANSWER</h2>\n<p>From your <a href=\"https://stackoverflow.com/questions/77608468/can-i-change-the-statuspassed-failed-skipped-of-a-test-from-any-junit-5-list#comment136819569_77608468\">comment</a>:</p>\n<blockquote>\n<p>I have soft verifications which I want to be automatically checked for failures when a test ends(I don't want to explicitly call <code>soft.assertAll()</code> at the end of each test). I don't see other option than to use listeners that run this check for soft failures after the test ends, and then set the test status accordingly. But I am open for smarter suggestions :)</p>\n</blockquote>\n<p>You could write an <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions\" rel=\"nofollow noreferrer\">extension</a> that:</p>\n<ol>\n<li>Creates a new <code>SoftAssertions</code> instance before each test</li>\n<li>Provides the created <code>SoftAssertions</code> as a parameter</li>\n<li>Calls <code>assertAll()</code> after each test</li>\n</ol>\n<p>Extension:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SoftAssertionsExtension\n        extends TypeBasedParameterResolver&lt;SoftAssertions&gt;\n        implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n\n    private static final Namespace STORE_NAMESPACE = Namespace.create(SoftAssertionsExtension.class);\n    private static final String STORE_KEY = SoftAssertions.class.getSimpleName();\n\n    @Override\n    public void beforeTestExecution(ExtensionContext context) {\n        context.getStore(STORE_NAMESPACE).put(STORE_KEY, new SoftAssertions());\n    }\n\n    @Override\n    public void afterTestExecution(ExtensionContext context) {\n        context.getStore(STORE_NAMESPACE).get(STORE_KEY, SoftAssertions.class).assertAll();\n    }\n\n    @Override\n    public SoftAssertions resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext)\n            throws ParameterResolutionException {\n        return extensionContext.getStore(STORE_NAMESPACE).get(STORE_KEY, SoftAssertions.class);\n    }\n\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SoftAssertionsExtension.class)\nclass SoftAssertionsTest {\n\n    @Test\n    void passingTest(SoftAssertions softly) {\n        softly.assertThat(true).isTrue();\n    }\n\n    @Test\n    void failingTest(SoftAssertions softly) {\n        softly.assertThat(true).isFalse();\n    }\n\n}\n</code></pre>\n<p>The test status is automatically set by the extension / <code>assertAll()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701955114,"creation_date":1701955114,"answer_id":77620334,"question_id":77608468,"body_markdown":"The functionality you are seeking already exists and comes out of the box from AssertJ.\r\n\r\nFrom the official [AssertJ documentation][1]:\r\n\r\n&gt; `SoftAssertionsExtension` is a JUnit 5 extension that:\r\n&gt; \r\n&gt; - takes care of calling `assertAll()` at the end of each tests\r\n&gt; - supports initializing `SoftAssertionsProvider` field annotated with `@InjectSoftAssertions`\r\n&gt; - supports injecting a `SoftAssertionsProvider` parameter in each test methods\r\n\r\n\r\n  [1]: https://assertj.github.io/doc/#assertj-core-junit5-soft-assertions","title":"Can I change the status(passed, failed, skipped) of a test from any JUnit 5 listener?","body":"<p>The functionality you are seeking already exists and comes out of the box from AssertJ.</p>\n<p>From the official <a href=\"https://assertj.github.io/doc/#assertj-core-junit5-soft-assertions\" rel=\"nofollow noreferrer\">AssertJ documentation</a>:</p>\n<blockquote>\n<p><code>SoftAssertionsExtension</code> is a JUnit 5 extension that:</p>\n<ul>\n<li>takes care of calling <code>assertAll()</code> at the end of each tests</li>\n<li>supports initializing <code>SoftAssertionsProvider</code> field annotated with <code>@InjectSoftAssertions</code></li>\n<li>supports injecting a <code>SoftAssertionsProvider</code> parameter in each test methods</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1702040755,"creation_date":1701800550,"question_id":77608468,"body_markdown":"In TestNG I can set the final status of the tests using `ITestListener`. \r\n\r\nExample:\r\n```\r\npublic class TestListener implements ITestListener {\r\n    \r\n    @Override\r\n    public void onTestSuccess(ITestResult result) {\r\n       result.setStatus(ITestResult.FAILURE);    \r\n    }\r\n\r\n}\r\n```\r\n\r\nIs this possible to be done in JUnit 5 and how?","title":"Can I change the status(passed, failed, skipped) of a test from any JUnit 5 listener?","body":"<p>In TestNG I can set the final status of the tests using <code>ITestListener</code>.</p>\n<p>Example:</p>\n<pre><code>public class TestListener implements ITestListener {\n    \n    @Override\n    public void onTestSuccess(ITestResult result) {\n       result.setStatus(ITestResult.FAILURE);    \n    }\n\n}\n</code></pre>\n<p>Is this possible to be done in JUnit 5 and how?</p>\n"},{"tags":["java","gradle","deprecated","nashorn"],"comments":[{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":1,"creation_date":1702043479,"post_id":77626759,"comment_id":136852397,"body_markdown":"I don&#39;t think the Nashorn usage is related to that deprecation message. The error already told you how to get the actual deprecation findings. Use `--warning-mode all` or a build `--scan`.","body":"I don&#39;t think the Nashorn usage is related to that deprecation message. The error already told you how to get the actual deprecation findings. Use <code>--warning-mode all</code> or a build <code>--scan</code>."},{"owner":{"account_id":27009367,"reputation":1,"user_id":20569283,"display_name":"Swiftness"},"score":0,"creation_date":1702052623,"post_id":77626759,"comment_id":136854139,"body_markdown":"You were right. After a long attempt, the flag &quot;--warning-mode all&quot; was successfully activated. It says &quot;The org.gradle.api.plugins.Convention type has been deprecated&quot;. I&#39;ll find out what&#39;s wrong with this. Thanks a lot.","body":"You were right. After a long attempt, the flag &quot;--warning-mode all&quot; was successfully activated. It says &quot;The org.gradle.api.plugins.Convention type has been deprecated&quot;. I&#39;ll find out what&#39;s wrong with this. Thanks a lot."},{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1702057121,"post_id":77626759,"comment_id":136854850,"body_markdown":"With `--stacktrace` or in the build `--scan` it also tells you where exactly this is coming from in most cases.","body":"With <code>--stacktrace</code> or in the build <code>--scan</code> it also tells you where exactly this is coming from in most cases."}],"owner":{"account_id":27009367,"reputation":1,"user_id":20569283,"display_name":"Swiftness"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702040734,"creation_date":1702040734,"question_id":77626759,"body_markdown":"I used Nashorn API to use JavaScript code module with Java.\r\n\r\n```java\r\nScriptEngineManager scriptEngineManager = new ScriptEngineManager();\r\nScriptEngine scriptEngine = scriptEngineManager.getEngineByName(&quot;nashorn&quot;);\r\n```\r\n\r\nJust like this. But I got this error:\r\n\r\n```\r\nExecution failed for task &#39;:Main.main()&#39;.\r\n\r\n&gt; Process &#39;command &#39;/Users/user/Library/Java/JavaVirtualMachines/openjdk-19.0.1/Contents/Home/bin/java&#39;&#39; finished with non-zero exit value 1\r\n\r\n* Try:\r\n\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n&gt; Get more help at https://help.gradle.org.\r\n&gt; Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.\r\n&gt; You can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n&gt; For more on this, please refer to https://docs.gradle.org/8.2/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.\r\n&gt; BUILD FAILED in 269ms\r\n&gt; 2 actionable tasks: 1 executed, 1 up-to-date\r\n```\r\n\r\nI&#39;ve already searched about it, but no one said this error is related to Nashorn.\r\n\r\nI know that Nashorn is deprecated, so I&#39;m using OpenJDK&#39;s version. And I&#39;ve tried switching to rhino or graal.js but the result was same.\r\n\r\nIs there any way to use JavaScript with Gradle without deprecation warning?","title":"Using Nashorn API. Got &#39;Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0&#39;","body":"<p>I used Nashorn API to use JavaScript code module with Java.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ScriptEngineManager scriptEngineManager = new ScriptEngineManager();\nScriptEngine scriptEngine = scriptEngineManager.getEngineByName(&quot;nashorn&quot;);\n</code></pre>\n<p>Just like this. But I got this error:</p>\n<pre><code>Execution failed for task ':Main.main()'.\n\n&gt; Process 'command '/Users/user/Library/Java/JavaVirtualMachines/openjdk-19.0.1/Contents/Home/bin/java'' finished with non-zero exit value 1\n\n* Try:\n\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n&gt; Get more help at https://help.gradle.org.\n&gt; Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.\n&gt; You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n&gt; For more on this, please refer to https://docs.gradle.org/8.2/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.\n&gt; BUILD FAILED in 269ms\n&gt; 2 actionable tasks: 1 executed, 1 up-to-date\n</code></pre>\n<p>I've already searched about it, but no one said this error is related to Nashorn.</p>\n<p>I know that Nashorn is deprecated, so I'm using OpenJDK's version. And I've tried switching to rhino or graal.js but the result was same.</p>\n<p>Is there any way to use JavaScript with Gradle without deprecation warning?</p>\n"},{"tags":["java","spring-boot","kubernetes","openshift","configmap"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1702040902,"post_id":77626750,"comment_id":136851996,"body_markdown":"`mvn -s /home/goose/mvn-tmp-settings.xml` is what I use. That I alias to `mvnt`","body":"<code>mvn -s &#47;home&#47;goose&#47;mvn-tmp-settings.xml</code> is what I use. That I alias to <code>mvnt</code>"},{"owner":{"account_id":15161401,"reputation":11,"user_id":10940355,"display_name":"Marko"},"score":0,"creation_date":1702284472,"post_id":77626750,"comment_id":136872977,"body_markdown":"Thanks for advice, but where should I enter that command. Do I create some new configMap or something like that ? Thanks in advance.","body":"Thanks for advice, but where should I enter that command. Do I create some new configMap or something like that ? Thanks in advance."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1702297264,"post_id":77626750,"comment_id":136874991,"body_markdown":"That would depend on how you invoke mvn. And that I don&#39;t know","body":"That would depend on how you invoke mvn. And that I don&#39;t know"},{"owner":{"account_id":15161401,"reputation":11,"user_id":10940355,"display_name":"Marko"},"score":0,"creation_date":1702302067,"post_id":77626750,"comment_id":136875913,"body_markdown":"The maven build is called when assembly script during S2I build, and this is from log `INFO Running &#39;mvn -e -Popenshift -DskipTests -Dcom.redhat.xpaas.repo.redhatga -Dfabric8.skip=true -Djkube.skip=true --batch-mode -Djava.net.preferIPv4Stack=true -s /tmp/artifacts/configuration/settings.xml -Dmaven.repo.local=/tmp/artifacts/m2 package&#39;`  So I would like to change that /tmp/artifacts/configuration/settings.xml to lool to my custom maven setting.xml","body":"The maven build is called when assembly script during S2I build, and this is from log <code>INFO Running &#39;mvn -e -Popenshift -DskipTests -Dcom.redhat.xpaas.repo.redhatga -Dfabric8.skip=true -Djkube.skip=true --batch-mode -Djava.net.preferIPv4Stack=true -s &#47;tmp&#47;artifacts&#47;configuration&#47;settings.xml -Dmaven.repo.local=&#47;tmp&#47;artifacts&#47;m2 package&#39;</code>  So I would like to change that /tmp/artifacts/configuration/settings.xml to lool to my custom maven setting.xml"}],"owner":{"account_id":15161401,"reputation":11,"user_id":10940355,"display_name":"Marko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702040620,"creation_date":1702040620,"question_id":77626750,"body_markdown":"I&#39;m using openshift 4, and building image using base image ubi8/openjdk-8 image. \r\nI wan&#39;t to use my custom maven settings.xml file.\r\nI see that openshift uses file located here\r\n-s \r\n```\r\n/tmp/artifacts/configuration/settings.xml\r\n```\r\nSo how can I tell openshift to read my custom settings.xml file, and not that in configuration folder.\r\n\r\n\r\n\r\nThanks in advance\r\n\r\n\r\n \r\n\r\nI have tried to build configMap and put that custom setting.xml to it, apply that custom map to buildConfi [text](https://stackoverflow.com/questions/55691270/configure-settings-xml-for-openshift-3-10-s2i-maven-builds) but it doesn&#39;t work.\r\nMy configMap is :\r\n\r\n`kind: ConfigMap\r\napiVersion: v1\r\nmetadata:\r\n  name: settings-mvn2\r\n  namespace: int-dev\r\n  uid: 2d3b1aad-6d7a-4e69-9848-3c48470ec7b3\r\n  resourceVersion: &#39;1465541561&#39;\r\n  creationTimestamp: &#39;2023-12-08T09:16:34Z&#39;\r\n  managedFields:\r\n    - manager: kubectl-create\r\n      operation: Update\r\n      apiVersion: v1\r\n      time: &#39;2023-12-08T09:16:34Z&#39;\r\n      fieldsType: FieldsV1\r\n      fieldsV1:\r\n        &#39;f:data&#39;:\r\n          .: {}\r\n          &#39;f:settings.xml&#39;: {}\r\ndata:\r\n  settings.xml: &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;\\r\\n&lt;settings xmlns=\\&quot;http://maven.apache.org/SETTINGS/1.2.0\\&quot; xmlns:xsi=\\&quot;http://www.w3.org/2001/XMLSchema-instance\\&quot;\\r\\n  xsi:schemaLocation=\\&quot;http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd\\&quot;&gt;\\r\\n     &lt;mirrors&gt;\\r\\n          &lt;mirror&gt;\\r\\n               &lt;id&gt;maven-default-http-blocker&lt;/id&gt;\\r\\n               &lt;mirrorOf&gt;dummy&lt;/mirrorOf&gt;\\r\\n               &lt;name&gt;Dummy mirror to override default blocking mirror that blocks http&lt;/name&gt;\\r\\n               &lt;url&gt;http://0.0.0.0/&lt;/url&gt;\\r\\n         &lt;/mirror&gt;\\r\\n    &lt;/mirrors&gt;\\r\\n&lt;/settings&gt;&quot;\r\n`","title":"custom maven settings.xml for openshift build","body":"<h2>I'm using openshift 4, and building image using base image ubi8/openjdk-8 image.\nI wan't to use my custom maven settings.xml file.\nI see that openshift uses file located here</h2>\n<pre><code>/tmp/artifacts/configuration/settings.xml\n</code></pre>\n<p>So how can I tell openshift to read my custom settings.xml file, and not that in configuration folder.</p>\n<p>Thanks in advance</p>\n<p>I have tried to build configMap and put that custom setting.xml to it, apply that custom map to buildConfi <a href=\"https://stackoverflow.com/questions/55691270/configure-settings-xml-for-openshift-3-10-s2i-maven-builds\">text</a> but it doesn't work.\nMy configMap is :</p>\n<p><code>kind: ConfigMap apiVersion: v1 metadata: name: settings-mvn2 namespace: int-dev uid: 2d3b1aad-6d7a-4e69-9848-3c48470ec7b3 resourceVersion: '1465541561' creationTimestamp: '2023-12-08T09:16:34Z' managedFields: - manager: kubectl-create operation: Update apiVersion: v1 time: '2023-12-08T09:16:34Z' fieldsType: FieldsV1 fieldsV1: 'f:data': .: {} 'f:settings.xml': {} data: settings.xml: &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;\\r\\n&lt;settings xmlns=\\&quot;http://maven.apache.org/SETTINGS/1.2.0\\&quot; xmlns:xsi=\\&quot;http://www.w3.org/2001/XMLSchema-instance\\&quot;\\r\\n  xsi:schemaLocation=\\&quot;http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd\\&quot;&gt;\\r\\n     &lt;mirrors&gt;\\r\\n          &lt;mirror&gt;\\r\\n               &lt;id&gt;maven-default-http-blocker&lt;/id&gt;\\r\\n               &lt;mirrorOf&gt;dummy&lt;/mirrorOf&gt;\\r\\n               &lt;name&gt;Dummy mirror to override default blocking mirror that blocks http&lt;/name&gt;\\r\\n               &lt;url&gt;http://0.0.0.0/&lt;/url&gt;\\r\\n         &lt;/mirror&gt;\\r\\n    &lt;/mirrors&gt;\\r\\n&lt;/settings&gt;&quot; </code></p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702039980,"creation_date":1702039980,"answer_id":77626688,"question_id":77614896,"body_markdown":"According to [Documentation][1] `UnAuthenticatedServerOAuth2AuthorizedClientRepository` is deprecated/removed.\r\n\r\nYou have to use `AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager` instead.\r\n\r\nMore details you will get from documentation [AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager][2].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/6.0.0-M1/api/org/springframework/security/oauth2/client/web/server/UnAuthenticatedServerOAuth2AuthorizedClientRepository.html\r\n  [2]: https://docs.spring.io/spring-security/site/docs/6.0.0-M1/api/org/springframework/security/oauth2/client/AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager.html","title":"Configuring the WebClient Spring boot 3 - spring security","body":"<p>According to <a href=\"https://docs.spring.io/spring-security/site/docs/6.0.0-M1/api/org/springframework/security/oauth2/client/web/server/UnAuthenticatedServerOAuth2AuthorizedClientRepository.html\" rel=\"nofollow noreferrer\">Documentation</a> <code>UnAuthenticatedServerOAuth2AuthorizedClientRepository</code> is deprecated/removed.</p>\n<p>You have to use <code>AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager</code> instead.</p>\n<p>More details you will get from documentation <a href=\"https://docs.spring.io/spring-security/site/docs/6.0.0-M1/api/org/springframework/security/oauth2/client/AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager.html\" rel=\"nofollow noreferrer\">AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager</a>.</p>\n"}],"owner":{"account_id":17143647,"reputation":7,"user_id":12407074,"display_name":"lnikoli31"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1702039980,"creation_date":1701881240,"question_id":77614896,"body_markdown":"I migrate my batch project in spring boot 2.7.X to spring boot 3.2.0 and i have a problem to migrate this part of my code :\r\n\r\n      @Bean\r\n      @SuppressWarnings(&quot;all&quot;)\r\n      public WebClient webClient(ReactiveClientRegistrationRepository client) {\r\n        var oauth =\r\n            new ServerOAuth2AuthorizedClientExchangeFilterFunction(\r\n                client, new UnAuthenticatedServerOAuth2AuthorizedClientRepository());\r\n        oauth.setDefaultClientRegistrationId(&quot;myAuthProvider&quot;);\r\n        //...java code\r\n    }\r\n\r\nI have an error : \r\njava: cannot find symbol\r\n  symbol:   class UnAuthenticatedServerOAuth2AuthorizedClientRepository\r\n  location: package org.springframework.security.oauth2.client.web.server\r\n\r\nWhich java class i must use instead of UnAuthenticatedServerOAuth2AuthorizedClientRepository to make my code work\r\n\r\nCan you help me please","title":"Configuring the WebClient Spring boot 3 - spring security","body":"<p>I migrate my batch project in spring boot 2.7.X to spring boot 3.2.0 and i have a problem to migrate this part of my code :</p>\n<pre><code>  @Bean\n  @SuppressWarnings(&quot;all&quot;)\n  public WebClient webClient(ReactiveClientRegistrationRepository client) {\n    var oauth =\n        new ServerOAuth2AuthorizedClientExchangeFilterFunction(\n            client, new UnAuthenticatedServerOAuth2AuthorizedClientRepository());\n    oauth.setDefaultClientRegistrationId(&quot;myAuthProvider&quot;);\n    //...java code\n}\n</code></pre>\n<p>I have an error :\njava: cannot find symbol\nsymbol:   class UnAuthenticatedServerOAuth2AuthorizedClientRepository\nlocation: package org.springframework.security.oauth2.client.web.server</p>\n<p>Which java class i must use instead of UnAuthenticatedServerOAuth2AuthorizedClientRepository to make my code work</p>\n<p>Can you help me please</p>\n"},{"tags":["java","flutter","appium","appium-android","appium-flutter"],"owner":{"account_id":30097978,"reputation":1,"user_id":23065798,"display_name":"K A D P Sugandha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702039528,"creation_date":1702039528,"question_id":77626643,"body_markdown":"I am attempting to confirm the clickability and visibility of Flutter elements and retrieve certain attributes using the appium-flutter-driver. However, I am encountering an issue where it shows &#39;Method has not yet been implemented&#39; How can I resolve this?\r\n \r\n\r\n\r\n[enter image description here](https://i.stack.imgur.com/S7L1G.png)\r\n\r\n\r\n\r\n**Code**\r\n\r\n```\r\npackage org.example;\r\n\r\nimport io.appium.java_client.android.AndroidDriver;\r\nimport io.github.ashwith.flutter.FlutterFinder;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.remote.DesiredCapabilities;\r\nimport org.testng.annotations.Test;\r\n\r\nimport java.net.URL;\r\nimport java.time.Duration;\r\n\r\npublic class FlutterDriverAutomation {\r\n\r\n    public static AndroidDriver driver;\r\n\r\n    @Test\r\n    public void test() throws Exception {\r\n\r\n        DesiredCapabilities caps = new DesiredCapabilities();\r\n        caps.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n        caps.setCapability(&quot;platformVersion&quot;, &quot;10&quot;);\r\n        caps.setCapability(&quot;deviceName&quot;, &quot;Android SDK built for x86&quot;);\r\n        caps.setCapability(&quot;udid&quot;, &quot;emulator-5554&quot;);\r\n        caps.setCapability(&quot;appPackage&quot;, &quot;com.example.flutter_application&quot;);\r\n        caps.setCapability(&quot;appActivity&quot;, &quot;com.example.flutter_application.MainActivity&quot;);\r\n        caps.setCapability(&quot;automationName&quot;, &quot;Flutter&quot;);\r\n\r\n        driver = new AndroidDriver(\r\n                new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;), caps\r\n        );\r\n\r\n        Thread.sleep(5000);\r\n\r\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(500));\r\n\r\n\r\n        FlutterFinder finder = new FlutterFinder(driver);\r\n        WebElement element = null;\r\n        WebElement element1 = null;\r\n\r\n        element = finder.byValueKey(&quot;name_input_field&quot;);\r\n        element.sendKeys(&quot;#####TESTING######&quot;);\r\n\r\n        Thread.sleep(5000);\r\n        System.out.println(&quot;-------------------------------------&quot;);\r\n        \r\n        System.out.println(&quot;Element is display status is : &quot; + element.isDisplayed());\r\n        System.out.println(&quot;Element is enabled status is : &quot; + element.isEnabled());\r\n        \r\n        System.out.println(element.getAttribute(&quot;text&quot;));\r\n        System.out.println(element.getAttribute(&quot;value&quot;));\r\n\r\n\r\n    }\r\n}\r\n```\r\n","title":"How can I confirm clickability, visibility, and retrieving attributes of Flutter elements using the appium-flutter-driver","body":"<p>I am attempting to confirm the clickability and visibility of Flutter elements and retrieve certain attributes using the appium-flutter-driver. However, I am encountering an issue where it shows 'Method has not yet been implemented' How can I resolve this?</p>\n<p><a href=\"https://i.stack.imgur.com/S7L1G.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><strong>Code</strong></p>\n<pre><code>package org.example;\n\nimport io.appium.java_client.android.AndroidDriver;\nimport io.github.ashwith.flutter.FlutterFinder;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.testng.annotations.Test;\n\nimport java.net.URL;\nimport java.time.Duration;\n\npublic class FlutterDriverAutomation {\n\n    public static AndroidDriver driver;\n\n    @Test\n    public void test() throws Exception {\n\n        DesiredCapabilities caps = new DesiredCapabilities();\n        caps.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\n        caps.setCapability(&quot;platformVersion&quot;, &quot;10&quot;);\n        caps.setCapability(&quot;deviceName&quot;, &quot;Android SDK built for x86&quot;);\n        caps.setCapability(&quot;udid&quot;, &quot;emulator-5554&quot;);\n        caps.setCapability(&quot;appPackage&quot;, &quot;com.example.flutter_application&quot;);\n        caps.setCapability(&quot;appActivity&quot;, &quot;com.example.flutter_application.MainActivity&quot;);\n        caps.setCapability(&quot;automationName&quot;, &quot;Flutter&quot;);\n\n        driver = new AndroidDriver(\n                new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;), caps\n        );\n\n        Thread.sleep(5000);\n\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(500));\n\n\n        FlutterFinder finder = new FlutterFinder(driver);\n        WebElement element = null;\n        WebElement element1 = null;\n\n        element = finder.byValueKey(&quot;name_input_field&quot;);\n        element.sendKeys(&quot;#####TESTING######&quot;);\n\n        Thread.sleep(5000);\n        System.out.println(&quot;-------------------------------------&quot;);\n        \n        System.out.println(&quot;Element is display status is : &quot; + element.isDisplayed());\n        System.out.println(&quot;Element is enabled status is : &quot; + element.isEnabled());\n        \n        System.out.println(element.getAttribute(&quot;text&quot;));\n        System.out.println(element.getAttribute(&quot;value&quot;));\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1702038360,"post_id":77626497,"comment_id":136851635,"body_markdown":"Can&#39;t find the exact duplicate, but you can find an answer here - [Load resource from anywhere in classpath](https://stackoverflow.com/questions/3294196/load-resource-from-anywhere-in-classpath).","body":"Can&#39;t find the exact duplicate, but you can find an answer here - <a href=\"https://stackoverflow.com/questions/3294196/load-resource-from-anywhere-in-classpath\">Load resource from anywhere in classpath</a>."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1702042918,"post_id":77626497,"comment_id":136852308,"body_markdown":"Yup. `MyClass.class.getResource(&quot;/relative/path/to/file/here.txt&quot;)`. Yes, a relative path, yes, still starting with a slash. Relative _to the classpath root_ (if you want to go relative to the class file, also okay, then don&#39;t use the leading slash). Always use forward slashes even on windows. This will look even inside jars.","body":"Yup. <code>MyClass.class.getResource(&quot;&#47;relative&#47;path&#47;to&#47;file&#47;here.txt&quot;)</code>&zwnj;&#8203;. Yes, a relative path, yes, still starting with a slash. Relative <i>to the classpath root</i> (if you want to go relative to the class file, also okay, then don&#39;t use the leading slash). Always use forward slashes even on windows. This will look even inside jars."}],"owner":{"account_id":30097814,"reputation":1,"user_id":23065679,"display_name":"Diana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1702038313,"answer_count":0,"score":-3,"last_activity_date":1702039356,"creation_date":1702038072,"question_id":77626497,"body_markdown":"How to write the path to a file without &quot;src&quot; and only with internal project directories?\r\n\r\nFor example, now I have this path:\r\n```\r\n\tpublic static final String SOURCE = &quot;e:\\\\Diana\\\\eclipse-workspace\\\\home-library\\\\src\\\\by\\\\training\\\\home_library\\\\resources\\\\ListOfBooks.txt&quot;;\r\n```\r\n","title":"The path to a file","body":"<p>How to write the path to a file without &quot;src&quot; and only with internal project directories?</p>\n<p>For example, now I have this path:</p>\n<pre><code>    public static final String SOURCE = &quot;e:\\\\Diana\\\\eclipse-workspace\\\\home-library\\\\src\\\\by\\\\training\\\\home_library\\\\resources\\\\ListOfBooks.txt&quot;;\n</code></pre>\n"},{"tags":["java","intellij-idea"],"owner":{"account_id":30097965,"reputation":1,"user_id":23065786,"display_name":"kid melon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702039334,"creation_date":1702039334,"question_id":77626626,"body_markdown":"I have write a demo Idea Plugin, when i try to run this Plugin. \r\nThis &quot;Missing gradleIdentityPath on plugin-demo&quot; Error come out.\r\n\r\nMy idea version info is:\r\nIntelliJ IDEA 2023.1 (Ultimate Edition)\r\nBuild #IU-231.8109.175, built on March 28, 2023\r\n\r\nMy plugin project like this:\r\n[enter image description here](https://i.stack.imgur.com/4LyPm.png)\r\nbuild.gradle is:\r\n\r\n```\r\nplugins {\r\n  id(&quot;java&quot;)\r\n  id(&quot;org.jetbrains.intellij&quot;) version &quot;1.13.3&quot;\r\n}\r\n\r\ngroup = &quot;cn.melonkid&quot;\r\nversion = &quot;1.0-SNAPSHOT&quot;\r\n\r\nrepositories {\r\n  maven { url &#39;https://maven.aliyun.com/repository/central/&#39;}\r\n  maven { url &#39;https://maven.aliyun.com/repository/public/&#39; }\r\n  maven { url &#39;https://maven.aliyun.com/repository/google/&#39; }\r\n  maven { url &#39;https://maven.aliyun.com/repository/jcenter/&#39;}\r\n  maven { url &#39;https://maven.aliyun.com/repository/gradle-plugin&#39;}\r\n  //    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n  testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.9.3&#39;\r\n  testRuntimeOnly    &#39;org.junit.jupiter:junit-jupiter-engine:5.9.3&#39;\r\n  testRuntimeOnly    &#39;org.junit.vintage:junit-vintage-engine:5.9.3&#39;\r\n  testImplementation &#39;org.junit.jupiter:junit-jupiter-params:5.9.3&#39;\r\n}\r\n\r\nintellij {\r\n  version = &#39;2023.1&#39;\r\n}\r\n\r\ntasks.withType(JavaCompile) {\r\n  options.encoding = &#39;UTF-8&#39;\r\n  options.compilerArgs += [&#39;-Xlint:unchecked&#39;, &#39;-Xlint:deprecation&#39;, &#39;-parameters&#39;]\r\n}\r\n\r\npatchPluginXml {\r\n  sinceBuild = &#39;231&#39;\r\n  untilBuild = &#39;232.*&#39;\r\n}\r\n```\r\n\r\n\r\n\r\nI have no idea to fix this now. ","title":"Missing gradleIdentityPath on Error when run Idea Plugin","body":"<p>I have write a demo Idea Plugin, when i try to run this Plugin.\nThis &quot;Missing gradleIdentityPath on plugin-demo&quot; Error come out.</p>\n<p>My idea version info is:\nIntelliJ IDEA 2023.1 (Ultimate Edition)\nBuild #IU-231.8109.175, built on March 28, 2023</p>\n<p>My plugin project like this:\n<a href=\"https://i.stack.imgur.com/4LyPm.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nbuild.gradle is:</p>\n<pre><code>plugins {\n  id(&quot;java&quot;)\n  id(&quot;org.jetbrains.intellij&quot;) version &quot;1.13.3&quot;\n}\n\ngroup = &quot;cn.melonkid&quot;\nversion = &quot;1.0-SNAPSHOT&quot;\n\nrepositories {\n  maven { url 'https://maven.aliyun.com/repository/central/'}\n  maven { url 'https://maven.aliyun.com/repository/public/' }\n  maven { url 'https://maven.aliyun.com/repository/google/' }\n  maven { url 'https://maven.aliyun.com/repository/jcenter/'}\n  maven { url 'https://maven.aliyun.com/repository/gradle-plugin'}\n  //    mavenCentral()\n}\n\ndependencies {\n  testImplementation 'org.junit.jupiter:junit-jupiter-api:5.9.3'\n  testRuntimeOnly    'org.junit.jupiter:junit-jupiter-engine:5.9.3'\n  testRuntimeOnly    'org.junit.vintage:junit-vintage-engine:5.9.3'\n  testImplementation 'org.junit.jupiter:junit-jupiter-params:5.9.3'\n}\n\nintellij {\n  version = '2023.1'\n}\n\ntasks.withType(JavaCompile) {\n  options.encoding = 'UTF-8'\n  options.compilerArgs += ['-Xlint:unchecked', '-Xlint:deprecation', '-parameters']\n}\n\npatchPluginXml {\n  sinceBuild = '231'\n  untilBuild = '232.*'\n}\n</code></pre>\n<p>I have no idea to fix this now.</p>\n"},{"tags":["java","hibernate","postgresql","jpa","autocommit"],"comments":[{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1278071347,"post_id":3164072,"comment_id":3255719,"body_markdown":"if you don&#39;t want to persist data why do you have `files` mapped? Shouldn&#39;t it be `@Transient`?","body":"if you don&#39;t want to persist data why do you have <code>files</code> mapped? Shouldn&#39;t it be <code>@Transient</code>?"},{"owner":{"account_id":90778,"reputation":19457,"user_id":249699,"accept_rate":88,"display_name":"Javi"},"score":0,"creation_date":1278159678,"post_id":3164072,"comment_id":3263011,"body_markdown":"@matt b I want to persist the files but only in the save operation not in the read one. That was why I didn&#39;t understand that the read should be in a transaction.","body":"@matt b I want to persist the files but only in the save operation not in the read one. That was why I didn&#39;t understand that the read should be in a transaction."},{"owner":{"account_id":94225,"reputation":2029,"user_id":257364,"accept_rate":0,"display_name":"Volksman"},"score":3,"creation_date":1508807339,"post_id":3164072,"comment_id":80748344,"body_markdown":"You don&#39;t just use @Transactional when you want to save objects. A transaction is generally required to access the database - whether reading or writing.","body":"You don&#39;t just use @Transactional when you want to save objects. A transaction is generally required to access the database - whether reading or writing."},{"owner":{"account_id":3261342,"reputation":1970,"user_id":2746879,"accept_rate":77,"display_name":"Sarz"},"score":0,"creation_date":1556015254,"post_id":3164072,"comment_id":98285603,"body_markdown":"After this exception, hibernate is unable to connect with databse throws: `Caused by: org.hibernate.HibernateException: Unable to access lob stream`, is there any database command or something to restore this database?","body":"After this exception, hibernate is unable to connect with databse throws: <code>Caused by: org.hibernate.HibernateException: Unable to access lob stream</code>, is there any database command or something to restore this database?"}],"answers":[{"comments":[{"owner":{"account_id":9744,"reputation":80816,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"score":16,"creation_date":1449840588,"post_id":3164352,"comment_id":56193312,"body_markdown":"I am not quite sure how that is an answer to the original question? The original poster doesn&#39;t want to *write* LOBs without a transaction, he wants to read them without one.","body":"I am not quite sure how that is an answer to the original question? The original poster doesn&#39;t want to <i>write</i> LOBs without a transaction, he wants to read them without one."},{"owner":{"account_id":1150498,"reputation":119,"user_id":1132337,"display_name":"MoYapro"},"score":1,"creation_date":1529582788,"post_id":3164352,"comment_id":88932568,"body_markdown":"By default LOBs are loaded lazy and that loading should happen in the same transaction as the parent objects are loaded.","body":"By default LOBs are loaded lazy and that loading should happen in the same transaction as the parent objects are loaded."},{"owner":{"account_id":19526213,"reputation":783,"user_id":14287016,"display_name":"IonicMan"},"score":2,"creation_date":1603383886,"post_id":3164352,"comment_id":114027062,"body_markdown":"how is this an answer?","body":"how is this an answer?"}],"tags":[],"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"comment_count":3,"down_vote_count":1,"up_vote_count":48,"is_accepted":true,"score":47,"last_activity_date":1474109704,"creation_date":1278061143,"answer_id":3164352,"question_id":3164072,"body_markdown":"A large object can be stored in several records, that&#39;s why you have to use a transaction. All records are correct or nothing at all.\r\n\r\nhttps://www.postgresql.org/docs/current/static/largeobjects.html","title":"Large Objects may not be used in auto-commit mode","body":"<p>A large object can be stored in several records, that's why you have to use a transaction. All records are correct or nothing at all.</p>\n\n<p><a href=\"https://www.postgresql.org/docs/current/static/largeobjects.html\" rel=\"noreferrer\">https://www.postgresql.org/docs/current/static/largeobjects.html</a></p>\n"},{"tags":[],"owner":{"display_name":"user330315"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1278263159,"creation_date":1278263159,"answer_id":3175485,"question_id":3164072,"body_markdown":"Unless you need to store files large than 1GB I suggest you use bytea as the datatype instead of large object. \r\n\r\nbytea is basically what BLOB is in other databases (e.g. Oracle) and it&#39;s handling is a lot more compatible with JDBC. \r\n","title":"Large Objects may not be used in auto-commit mode","body":"<p>Unless you need to store files large than 1GB I suggest you use bytea as the datatype instead of large object. </p>\n\n<p>bytea is basically what BLOB is in other databases (e.g. Oracle) and it's handling is a lot more compatible with JDBC. </p>\n"},{"comments":[{"owner":{"account_id":125910,"reputation":1106,"user_id":322017,"accept_rate":67,"display_name":"Nicolas"},"score":0,"creation_date":1492509117,"post_id":17479964,"comment_id":73992728,"body_markdown":"If you don&#39;t need to retrieve the Lob on every query, then this is the best approach. It will incur some overhead, as an extra query needs to be dispatched when the object is accessed, but in some situations, this is ideal.","body":"If you don&#39;t need to retrieve the Lob on every query, then this is the best approach. It will incur some overhead, as an extra query needs to be dispatched when the object is accessed, but in some situations, this is ideal."}],"tags":[],"owner":{"account_id":1442344,"reputation":641,"user_id":1362074,"display_name":"bbviana"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1372988218,"creation_date":1372988218,"answer_id":17479964,"question_id":3164072,"body_markdown":"If you can, create a intermediate Entity between MyClass and file property for instance.\r\nSomething like:\r\n\r\n    @Entity\r\n    @Table(name=&quot;myobjects&quot;)\r\n    public class MyClass {\r\n        @OneToOne(cascade = ALL, fetch = LAZY)\r\n        private File file;\r\n    }\r\n\r\n    @Entity\r\n    @Table(name=&quot;file&quot;)\r\n    public class File {\r\n         @Lob\r\n         byte[] file;\r\n    }\r\n\r\nYou can&#39;t use @Lob and fetch type Lazy. It doesnt work. You must have a a intermediate class.\r\n ","title":"Large Objects may not be used in auto-commit mode","body":"<p>If you can, create a intermediate Entity between MyClass and file property for instance.\nSomething like:</p>\n\n<pre><code>@Entity\n@Table(name=\"myobjects\")\npublic class MyClass {\n    @OneToOne(cascade = ALL, fetch = LAZY)\n    private File file;\n}\n\n@Entity\n@Table(name=\"file\")\npublic class File {\n     @Lob\n     byte[] file;\n}\n</code></pre>\n\n<p>You can't use @Lob and fetch type Lazy. It doesnt work. You must have a a intermediate class.</p>\n"},{"comments":[{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":3,"creation_date":1592831639,"post_id":53520767,"comment_id":110557046,"body_markdown":"You&#39;re a life saver!","body":"You&#39;re a life saver!"},{"owner":{"account_id":7598435,"reputation":409,"user_id":5763896,"display_name":"Theo Stefou"},"score":1,"creation_date":1597144103,"post_id":53520767,"comment_id":112031754,"body_markdown":"Adding the @Type annotation was enough for me, thank you!","body":"Adding the @Type annotation was enough for me, thank you!"},{"owner":{"account_id":7527661,"reputation":440,"user_id":5717198,"display_name":"Abhijay Kumar"},"score":1,"creation_date":1607768250,"post_id":53520767,"comment_id":115380063,"body_markdown":"This should be the correct answer instead! All you need to do is to define the hibernate type of the LOB and Lazy fetch works fine. I intended to store a very large String and fixed the problem by using org.hibernate.type.StringType instead.","body":"This should be the correct answer instead! All you need to do is to define the hibernate type of the LOB and Lazy fetch works fine. I intended to store a very large String and fixed the problem by using org.hibernate.type.StringType instead."},{"owner":{"account_id":2246517,"reputation":1022,"user_id":1979736,"display_name":"Lerk"},"score":0,"creation_date":1619975786,"post_id":53520767,"comment_id":119059999,"body_markdown":"This solution returned an empty result in my case.","body":"This solution returned an empty result in my case."}],"tags":[],"owner":{"account_id":5338263,"reputation":5345,"user_id":4256410,"accept_rate":71,"display_name":"Philip John"},"comment_count":4,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1543412337,"creation_date":1543412337,"answer_id":53520767,"question_id":3164072,"body_markdown":"Instead of using `@Transactional`, all I did for this issue was to update this column in PostgreSQL DB from `oid` type to `bytea` type and added `@Type` for the `@Lob` field.\r\n\r\ni.e.\r\n\r\n    ALTER TABLE person DROP COLUMN image;\r\n    ALTER TABLE person ADD COLUMN image bytea;\r\n\r\nAnd changed\r\n\r\n    @Lob\r\n    private byte[] image;\r\n\r\nTo\r\n\r\n    @Lob\r\n    @Type(type = &quot;org.hibernate.type.ImageType&quot;)\r\n    private byte[] image;","title":"Large Objects may not be used in auto-commit mode","body":"<p>Instead of using <code>@Transactional</code>, all I did for this issue was to update this column in PostgreSQL DB from <code>oid</code> type to <code>bytea</code> type and added <code>@Type</code> for the <code>@Lob</code> field.</p>\n\n<p>i.e.</p>\n\n<pre><code>ALTER TABLE person DROP COLUMN image;\nALTER TABLE person ADD COLUMN image bytea;\n</code></pre>\n\n<p>And changed</p>\n\n<pre><code>@Lob\nprivate byte[] image;\n</code></pre>\n\n<p>To</p>\n\n<pre><code>@Lob\n@Type(type = \"org.hibernate.type.ImageType\")\nprivate byte[] image;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10376960,"reputation":124,"user_id":7652903,"display_name":"Stephan Berg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560507062,"creation_date":1560507062,"answer_id":56596007,"question_id":3164072,"body_markdown":"You should check if auto-commit is really set false with method [getAutoCommit()][1] on your Connection.\r\n\r\nIn my case\r\n\r\n    &lt;property name=&quot;hibernate.connection.autocommit&quot; value=&quot;false&quot; /&gt;\r\n\r\ndid not work, because the type of my db connection required auto-commit to be true.\r\n\r\nIn my case the problem was in the JBoss Configuration. I was using an JTA-datasource and that caused the problem. With an XA-datasource it worked fine. See [this post][1] for more details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/56595725/7652903","title":"Large Objects may not be used in auto-commit mode","body":"<p>You should check if auto-commit is really set false with method <a href=\"https://stackoverflow.com/a/56595725/7652903\">getAutoCommit()</a> on your Connection.</p>\n\n<p>In my case</p>\n\n<pre><code>&lt;property name=\"hibernate.connection.autocommit\" value=\"false\" /&gt;\n</code></pre>\n\n<p>did not work, because the type of my db connection required auto-commit to be true.</p>\n\n<p>In my case the problem was in the JBoss Configuration. I was using an JTA-datasource and that caused the problem. With an XA-datasource it worked fine. See <a href=\"https://stackoverflow.com/a/56595725/7652903\">this post</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":14456773,"reputation":440,"user_id":10442757,"display_name":"Raj Shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1597354450,"creation_date":1597354450,"answer_id":63403527,"question_id":3164072,"body_markdown":"Use `@Transactional` on your Repository Interface.\r\n\r\n","title":"Large Objects may not be used in auto-commit mode","body":"<p>Use <code>@Transactional</code> on your Repository Interface.</p>\n"},{"comments":[{"owner":{"account_id":3386399,"reputation":63,"user_id":2842281,"display_name":"Anietie Asuquo"},"score":0,"creation_date":1643930605,"post_id":69459382,"comment_id":125477592,"body_markdown":"Thanks!\nAdding `spring.datasource.hikari.auto-commit=false` worked for me.","body":"Thanks! Adding <code>spring.datasource.hikari.auto-commit=false</code> worked for me."}],"tags":[],"owner":{"account_id":307291,"reputation":1568,"user_id":618499,"display_name":"Iogui"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1633490092,"creation_date":1633489748,"answer_id":69459382,"question_id":3164072,"body_markdown":"That&#39;s an old question but I will share what I&#39;ve found for those who get here by a google search as I did.\r\n\r\n[This comment](https://github.com/jhipster/generator-jhipster/issues/8146#issuecomment-415345568) in an issue in JHipster project has a better explanation of the problem and also describe more options to solve it.\r\n\r\n**I will sumarize it here:**\r\n\r\nSpring boot app, &quot;out of the box&quot;, uses HikariCP connection pool and with autocommit=true by default. As it seems, the PostgreSQL jdbc driver requires that the handling of anything that uses a Lob be done with autocommit=false or inside a proper transaction.\r\n\r\nThe solutions (and explanations) proposed by Julien Dubois in the link above are very reasonable:\r\n\r\n&gt; - Mark the repository @transactional : I don&#39;t like it very much, because that gives more work to the service layer (which has to join the transaction, etc). So there&#39;s a little performance hit, for nothing much.\r\n&gt;\r\n&gt; - Mark the REST endpoint with @transactional(readOnly=true) : I don&#39;t like having transactions in the view layer. There&#39;s one added benefit from the point above: you can mark your transaction as readonly, so you have a performance gain.\r\n&gt;\r\n&gt; - Configure the connection pool to have autocommit = false. In fact, I thought we were already doing that, as the (older) connections pools I used were doing this. But that&#39;s not the case with HikariCP!! \r\n\r\nThat said, in my opinion, to turn off the autocommit in the connection pool seems as the better approach. It is more secure, it allows for one to work with read operations without the cost of a transaction and it is a global solution.\r\n\r\nJust place this on the spring application.properties of your project:\r\n\r\n```properties\r\nspring.datasource.hikari.auto-commit=false\r\n```","title":"Large Objects may not be used in auto-commit mode","body":"<p>That's an old question but I will share what I've found for those who get here by a google search as I did.</p>\n<p><a href=\"https://github.com/jhipster/generator-jhipster/issues/8146#issuecomment-415345568\" rel=\"noreferrer\">This comment</a> in an issue in JHipster project has a better explanation of the problem and also describe more options to solve it.</p>\n<p><strong>I will sumarize it here:</strong></p>\n<p>Spring boot app, &quot;out of the box&quot;, uses HikariCP connection pool and with autocommit=true by default. As it seems, the PostgreSQL jdbc driver requires that the handling of anything that uses a Lob be done with autocommit=false or inside a proper transaction.</p>\n<p>The solutions (and explanations) proposed by Julien Dubois in the link above are very reasonable:</p>\n<blockquote>\n<ul>\n<li><p>Mark the repository @transactional : I don't like it very much, because that gives more work to the service layer (which has to join the transaction, etc). So there's a little performance hit, for nothing much.</p>\n</li>\n<li><p>Mark the REST endpoint with @transactional(readOnly=true) : I don't like having transactions in the view layer. There's one added benefit from the point above: you can mark your transaction as readonly, so you have a performance gain.</p>\n</li>\n<li><p>Configure the connection pool to have autocommit = false. In fact, I thought we were already doing that, as the (older) connections pools I used were doing this. But that's not the case with HikariCP!!</p>\n</li>\n</ul>\n</blockquote>\n<p>That said, in my opinion, to turn off the autocommit in the connection pool seems as the better approach. It is more secure, it allows for one to work with read operations without the cost of a transaction and it is a global solution.</p>\n<p>Just place this on the spring application.properties of your project:</p>\n<pre><code>spring.datasource.hikari.auto-commit=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4525260,"reputation":559,"user_id":3677294,"display_name":"MonirRouissi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635539376,"creation_date":1635539376,"answer_id":69774474,"question_id":3164072,"body_markdown":"You can try his :\r\n\r\n    @Column(name = &quot;LONG_TEXT&quot;, columnDefinition=&quot;TEXT&quot;)\r\n    private String longText;","title":"Large Objects may not be used in auto-commit mode","body":"<p>You can try his :</p>\n<pre><code>@Column(name = &quot;LONG_TEXT&quot;, columnDefinition=&quot;TEXT&quot;)\nprivate String longText;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15707669,"reputation":133,"user_id":11880241,"display_name":"Ashikur Rahman Rashid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667192663,"creation_date":1667192663,"answer_id":74258939,"question_id":3164072,"body_markdown":"I removed @Lob from entity and it&#39;s working. \r\n\r\n    //@Lob\r\n    private String description;","title":"Large Objects may not be used in auto-commit mode","body":"<p>I removed @Lob from entity and it's working.</p>\n<pre><code>//@Lob\nprivate String description;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9605548,"reputation":56,"user_id":7131705,"display_name":"Serhii D"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676015016,"creation_date":1675638667,"answer_id":75356143,"question_id":3164072,"body_markdown":"The compiler does not understand &quot;**type**&quot; as a parameter\r\n\r\n    @Type(type = &quot;org.hibernate.type.ImageType&quot;)","title":"Large Objects may not be used in auto-commit mode","body":"<p>The compiler does not understand &quot;<strong>type</strong>&quot; as a parameter</p>\n<pre><code>@Type(type = &quot;org.hibernate.type.ImageType&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20220242,"reputation":1,"user_id":14829948,"display_name":"Ian Feeney"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702039106,"creation_date":1702039106,"answer_id":77626594,"question_id":3164072,"body_markdown":"   \r\n\r\nI&#39;m using postgres TEXT type, and `@Type(PostgreSQLCITextType.class)` on the entity field solved for me.\r\n\r\nEntity:\r\n\r\n```\r\n@Lob\r\n@Column(name = &quot;description&quot;, columnDefinition=&quot;TEXT&quot;,  nullable = true)\r\n@Type(PostgreSQLCITextType.class)\r\nprivate String description;\r\n```\r\n\r\n","title":"Large Objects may not be used in auto-commit mode","body":"<p>I'm using postgres TEXT type, and <code>@Type(PostgreSQLCITextType.class)</code> on the entity field solved for me.</p>\n<p>Entity:</p>\n<pre><code>@Lob\n@Column(name = &quot;description&quot;, columnDefinition=&quot;TEXT&quot;,  nullable = true)\n@Type(PostgreSQLCITextType.class)\nprivate String description;\n</code></pre>\n"}],"owner":{"account_id":90778,"reputation":19457,"user_id":249699,"accept_rate":88,"display_name":"Javi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59212,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":3164352,"answer_count":11,"score":48,"last_activity_date":1702039106,"creation_date":1278057548,"question_id":3164072,"body_markdown":"I have a Spring application which uses Hibernate on a PostgreSQL database. I&#39;m trying to store files in a table of the database. It seems it stores the row with the file (I just use persist method on EntityManager), but when the object is loaded from the database I get the following exception:\r\n\r\n    org.postgresql.util.PSQLException: Large Objects may not be used in auto-commit mode.\r\n\r\nTo load the data I&#39;m using a MultipartFile transient atribute and in its setter I&#39;m setting the information I want to persist (byte[], fileName, size).\r\nThe entity I&#39;m persisting looks like this one (I&#39;ve ommitted the rest of getters/setters):\r\n\r\n    @Entity\r\n    @Table(name=&quot;myobjects&quot;)\r\n    public class MyClass {\r\n\t\r\n    \t@Id\r\n        @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;sequence&quot;)\r\n        @SequenceGenerator(name=&quot;sequence&quot;, sequenceName=&quot;myobjects_pk_seq&quot;, allocationSize=1)\r\n    \t@Column(name=&quot;id&quot;)\r\n\t    private Integer id;\r\n\t\r\n    \t@Lob\r\n    \tprivate String description;\r\n\t\r\n    \t@Temporal(TemporalType.TIMESTAMP)\r\n    \tprivate Date creationDate;\r\n\t\r\n    \t@Transient\r\n    \tprivate MultipartFile multipartFile;\r\n\t\r\n    \t@Lob\r\n    \t@Basic(fetch=FetchType.LAZY, optional=true)\r\n    \tbyte[] file;\r\n\t\r\n    \tString fileName;\r\n\t\r\n    \tString fileContentType;\r\n\r\n    \tInteger fileSize;\r\n \t\r\n    \tpublic void setMultipartFile(MultipartFile multipartFile) {\r\n\t     \tthis.multipartFile = multipartFile;\r\n\t    \ttry {\r\n\t    \t\tthis.file = this.multipartFile.getBytes();\r\n\t\t    \tthis.fileName = this.multipartFile.getOriginalFilename();\r\n\t\t    \tthis.fileContentType = this.multipartFile.getContentType();\r\n\t\t    \tthis.fileSize = ((Long) this.multipartFile.getSize()).intValue();\r\n\t    \t} catch (IOException e) {\r\n\t    \t\tlogger.error(e.getStackTrace());\r\n\t    \t}\r\n    \t}\r\n    }\r\n\r\nI can see that when it is persisted I  have the data in the row but when I call this method it fails:\r\n\r\n    public List&lt;MyClass&gt; findByDescription(String text) {\r\n\t\tQuery query = getEntityManager().createQuery(&quot;from MyClass WHERE UPPER(description) like :query ORDER BY creationDate DESC&quot;);\r\n\t\tquery.setParameter(&quot;query&quot;, &quot;%&quot; + text.toUpperCase() + &quot;%&quot;);\r\n\t\treturn query.getResultList();\r\n\t}\r\n\r\nThis method only fails when the result has objects with files. I&#39;ve tried to set in my persistence.xml\r\n\r\n\r\n    &lt;property name=&quot;hibernate.connection.autocommit&quot; value=&quot;false&quot; /&gt;\r\n\r\nbut it doesn&#39;t solve the problem.\r\n\r\nIn general the application works well it only commit the data when the transaction is finished and it performs a rollback if something fails, so I don&#39;t understand why is this happening.\r\n\r\nAny idea?\r\n\r\nThanks.\r\n\r\n**UPDATE**\r\n\r\nLooking at the link given by Shekhar it is suggested to include the call in a transation, so I&#39;ve set the service call inside a transaction an it works (I&#39;ve added @Transactional annotation).\r\n\r\n    @Transactional\r\n\tpublic List&lt;myClass&gt; find(String text) {\r\n\t\treturn myClassDAO.findByDescription(text);\r\n\t}\r\n\r\nthe problem is that I don&#39;t want to persist any data so I don&#39;t understand why it should be include inside a transaction. Does it make any sense to make a commit when I&#39;ve only loaded some data form the database?\r\n\r\nThanks.\r\n\r\n","title":"Large Objects may not be used in auto-commit mode","body":"<p>I have a Spring application which uses Hibernate on a PostgreSQL database. I'm trying to store files in a table of the database. It seems it stores the row with the file (I just use persist method on EntityManager), but when the object is loaded from the database I get the following exception:</p>\n\n<pre><code>org.postgresql.util.PSQLException: Large Objects may not be used in auto-commit mode.\n</code></pre>\n\n<p>To load the data I'm using a MultipartFile transient atribute and in its setter I'm setting the information I want to persist (byte[], fileName, size).\nThe entity I'm persisting looks like this one (I've ommitted the rest of getters/setters):</p>\n\n<pre><code>@Entity\n@Table(name=\"myobjects\")\npublic class MyClass {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=\"sequence\")\n    @SequenceGenerator(name=\"sequence\", sequenceName=\"myobjects_pk_seq\", allocationSize=1)\n    @Column(name=\"id\")\n    private Integer id;\n\n    @Lob\n    private String description;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date creationDate;\n\n    @Transient\n    private MultipartFile multipartFile;\n\n    @Lob\n    @Basic(fetch=FetchType.LAZY, optional=true)\n    byte[] file;\n\n    String fileName;\n\n    String fileContentType;\n\n    Integer fileSize;\n\n    public void setMultipartFile(MultipartFile multipartFile) {\n        this.multipartFile = multipartFile;\n        try {\n            this.file = this.multipartFile.getBytes();\n            this.fileName = this.multipartFile.getOriginalFilename();\n            this.fileContentType = this.multipartFile.getContentType();\n            this.fileSize = ((Long) this.multipartFile.getSize()).intValue();\n        } catch (IOException e) {\n            logger.error(e.getStackTrace());\n        }\n    }\n}\n</code></pre>\n\n<p>I can see that when it is persisted I  have the data in the row but when I call this method it fails:</p>\n\n<pre><code>public List&lt;MyClass&gt; findByDescription(String text) {\n    Query query = getEntityManager().createQuery(\"from MyClass WHERE UPPER(description) like :query ORDER BY creationDate DESC\");\n    query.setParameter(\"query\", \"%\" + text.toUpperCase() + \"%\");\n    return query.getResultList();\n}\n</code></pre>\n\n<p>This method only fails when the result has objects with files. I've tried to set in my persistence.xml</p>\n\n<pre><code>&lt;property name=\"hibernate.connection.autocommit\" value=\"false\" /&gt;\n</code></pre>\n\n<p>but it doesn't solve the problem.</p>\n\n<p>In general the application works well it only commit the data when the transaction is finished and it performs a rollback if something fails, so I don't understand why is this happening.</p>\n\n<p>Any idea?</p>\n\n<p>Thanks.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Looking at the link given by Shekhar it is suggested to include the call in a transation, so I've set the service call inside a transaction an it works (I've added @Transactional annotation).</p>\n\n<pre><code>@Transactional\npublic List&lt;myClass&gt; find(String text) {\n    return myClassDAO.findByDescription(text);\n}\n</code></pre>\n\n<p>the problem is that I don't want to persist any data so I don't understand why it should be include inside a transaction. Does it make any sense to make a commit when I've only loaded some data form the database?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","statistics","garbage-collection","heap-memory"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1702038960,"post_id":77626398,"comment_id":136851709,"body_markdown":"I&#39;m not sure it is possible at all, but which GC algorithm are you using? How is it configured? Did you consider using a non GC language? Why you want to avoid GC? I suspect this is an XY Problem. You should probably ask about the original problem you are trying to resolve.","body":"I&#39;m not sure it is possible at all, but which GC algorithm are you using? How is it configured? Did you consider using a non GC language? Why you want to avoid GC? I suspect this is an XY Problem. You should probably ask about the original problem you are trying to resolve."},{"owner":{"account_id":29961594,"reputation":62,"user_id":22961148,"display_name":"dilettante"},"score":2,"creation_date":1702039312,"post_id":77626398,"comment_id":136851763,"body_markdown":"This seems like an attempt to predict the future.","body":"This seems like an attempt to predict the future."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1702041366,"post_id":77626398,"comment_id":136852052,"body_markdown":"“avoiding any GC activity during a specific timeframe within the program&#39;s execution” would require a non-concurrent GC as otherwise the garbage collector may be already running at the start of the timeframe. Then, you would have to avoid *all* allocations within that timeframe as even the tiniest allocation may trigger a GC and, well, stop the operating system, to prevent all potential external triggers.","body":"“avoiding any GC activity during a specific timeframe within the program&#39;s execution” would require a non-concurrent GC as otherwise the garbage collector may be already running at the start of the timeframe. Then, you would have to avoid <i>all</i> allocations within that timeframe as even the tiniest allocation may trigger a GC and, well, stop the operating system, to prevent all potential external triggers."},{"owner":{"account_id":26122200,"reputation":1,"user_id":19814296,"display_name":"learnFromDaBest"},"score":0,"creation_date":1702041576,"post_id":77626398,"comment_id":136852093,"body_markdown":"I&#39;m afraid I won&#39;t be able to give more information about the project, but won&#39;t it suffice to have the system continually log the memory occupied by both the young and old generations, and then just check if with the new code, it trends towards occupying more memory in the heap? If there was any significant change, then it would be detectable using the logged stats? I might be totally wrong here though since I am still a beginner. Is there even a way to log memory occupied in old/young generations?","body":"I&#39;m afraid I won&#39;t be able to give more information about the project, but won&#39;t it suffice to have the system continually log the memory occupied by both the young and old generations, and then just check if with the new code, it trends towards occupying more memory in the heap? If there was any significant change, then it would be detectable using the logged stats? I might be totally wrong here though since I am still a beginner. Is there even a way to log memory occupied in old/young generations?"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1702048286,"post_id":77626398,"comment_id":136853281,"body_markdown":"Java by design shields the programmer from memory management. You can hack your way to get the information you are asking, but still probably fail to achieve your objective. You should rethink the approach in terms of your objectives. Tell us why are you trying to avoid GC.","body":"Java by design shields the programmer from memory management. You can hack your way to get the information you are asking, but still probably fail to achieve your objective. You should rethink the approach in terms of your objectives. Tell us why are you trying to avoid GC."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":1,"creation_date":1702052713,"post_id":77626398,"comment_id":136854150,"body_markdown":"By design, Java is not built to let you tinker with the memory management. If you have to, for whatever reason, Java is the wrong language. For some cases it might be sufficient to go with some kind of real time java https://www.rtsj.org/","body":"By design, Java is not built to let you tinker with the memory management. If you have to, for whatever reason, Java is the wrong language. For some cases it might be sufficient to go with some kind of real time java <a href=\"https://www.rtsj.org/\" rel=\"nofollow noreferrer\">rtsj.org</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1702054476,"post_id":77626398,"comment_id":136854444,"body_markdown":"It seems you are assuming that a piece of code will always allocate the same amount of memory, so running it a single time and record the memory allocations will tell you something. That’s debunkable with trivial examples, how much memory will `new byte[someVariable]` allocate? And what about `for(int i = 0; i &lt; otherVariable; i++) list.add(new Object());`? (Even if you know `otherVariable`, you have to know the actual list type to predict what `add` may allocate internally (which may also depend on the initial capacity the list had before the code). And `HashMap.put` depends on the hashcode…","body":"It seems you are assuming that a piece of code will always allocate the same amount of memory, so running it a single time and record the memory allocations will tell you something. That’s debunkable with trivial examples, how much memory will <code>new byte[someVariable]</code> allocate? And what about <code>for(int i = 0; i &lt; otherVariable; i++) list.add(new Object());</code>? (Even if you know <code>otherVariable</code>, you have to know the actual list type to predict what <code>add</code> may allocate internally (which may also depend on the initial capacity the list had before the code). And <code>HashMap.put</code> depends on the hashcode…"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1702063932,"post_id":77626398,"comment_id":136855764,"body_markdown":"Why do you need this? Do you want to avoid GC pauses/latency in a specific timeframe? If so, you might be more successful by actually tuning/switching to a different GC (e.g. ZGC).","body":"Why do you need this? Do you want to avoid GC pauses/latency in a specific timeframe? If so, you might be more successful by actually tuning/switching to a different GC (e.g. ZGC)."}],"owner":{"account_id":26122200,"reputation":1,"user_id":19814296,"display_name":"learnFromDaBest"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702037925,"creation_date":1702036853,"question_id":77626398,"body_markdown":"I&#39;m currently implementing some revisions in my ongoing project and I&#39;m curious about their potential impact on garbage collection metrics. Specifically, I&#39;m interested in continuing a custom paradigm for the project, that is, avoiding any GC activity during a specific timeframe within the program&#39;s execution. To achieve this, I&#39;d like to gauge whether the new code modifications bring me closer to a potential garbage collection occurrence during a specific time period. Are there any helpful tools available for this purpose? Any suggestions on specific statistics I should be tracking or monitoring?\r\n\r\nIn my initial attempts to address this challenge, I implemented logging mechanisms to capture memory data in both the young and old generations after each garbage collection cycle. This approach proved relatively straightforward to implement in Java using the available methods. However, I have doubts regarding the adequacy of this approach since the process consistently avoids initiating garbage collection during the specific timeframe of interest. Consequently, the collected statistics reflect historical data from a period preceding the targeted timeframe and fail to provide any insights into the current proximity to a potential garbage collection event.","title":"How to tell how close we are to a GC for java processes?","body":"<p>I'm currently implementing some revisions in my ongoing project and I'm curious about their potential impact on garbage collection metrics. Specifically, I'm interested in continuing a custom paradigm for the project, that is, avoiding any GC activity during a specific timeframe within the program's execution. To achieve this, I'd like to gauge whether the new code modifications bring me closer to a potential garbage collection occurrence during a specific time period. Are there any helpful tools available for this purpose? Any suggestions on specific statistics I should be tracking or monitoring?</p>\n<p>In my initial attempts to address this challenge, I implemented logging mechanisms to capture memory data in both the young and old generations after each garbage collection cycle. This approach proved relatively straightforward to implement in Java using the available methods. However, I have doubts regarding the adequacy of this approach since the process consistently avoids initiating garbage collection during the specific timeframe of interest. Consequently, the collected statistics reflect historical data from a period preceding the targeted timeframe and fail to provide any insights into the current proximity to a potential garbage collection event.</p>\n"},{"tags":["java","floating-point","java-17","strictfp"],"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":2,"creation_date":1689235156,"post_id":76674101,"comment_id":135185303,"body_markdown":"What are your examples?","body":"What are your examples?"},{"owner":{"account_id":178970,"reputation":5078,"user_id":411282,"accept_rate":67,"display_name":"Joshua Goldberg"},"score":0,"creation_date":1689264972,"post_id":76674101,"comment_id":135192397,"body_markdown":"+1, I appreciate that @DuncG, but will not be able to answer right away.  I&#39;ll need to dig some to find sub-calculations where differences are coming up in a complex application.  I&#39;d even need to bring in another team member because I only have access to intel at the moment.  We do see consistent differences in end results, though.","body":"+1, I appreciate that @DuncG, but will not be able to answer right away.  I&#39;ll need to dig some to find sub-calculations where differences are coming up in a complex application.  I&#39;d even need to bring in another team member because I only have access to intel at the moment.  We do see consistent differences in end results, though."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1689318221,"post_id":76674101,"comment_id":135199187,"body_markdown":"Being strict and using intrinsics (i.e. dedicated FPU instructions) is not a contradiction. It’s all about not using the old x87 FPU but SSE2 which has been introduced 2 decades ago. In case of `java.lang.Math` and the reference implementation, this is the case [since Java&#160;15](https://bugs.openjdk.org/browse/JDK-7175279). This applies to the HotSpot JVM and all implementations building on it or following suit. But as long as [the specification](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html) says that differences are allowed, you have to be prepared for them…","body":"Being strict and using intrinsics (i.e. dedicated FPU instructions) is not a contradiction. It’s all about not using the old x87 FPU but SSE2 which has been introduced 2 decades ago. In case of <code>java.lang.Math</code> and the reference implementation, this is the case <a href=\"https://bugs.openjdk.org/browse/JDK-7175279\" rel=\"nofollow noreferrer\">since Java 15</a>. This applies to the HotSpot JVM and all implementations building on it or following suit. But as long as <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">the specification</a> says that differences are allowed, you have to be prepared for them…"}],"answers":[{"comments":[{"owner":{"account_id":178970,"reputation":5078,"user_id":411282,"accept_rate":67,"display_name":"Joshua Goldberg"},"score":0,"creation_date":1702242072,"post_id":77625516,"comment_id":136869494,"body_markdown":"Thanks!  Replying to the very last line, we **are** getting different results in low-order bits of calculation results, not just different code generation.  One hypothesis we&#39;ve come up with is that a library in use may be in a jar that was compiled pre-java17, but we haven&#39;t been able to figure out if that&#39;s what&#39;s happening.  Small expressions we&#39;ve tried have all given same results across architectures, so we don&#39;t have a reproducible case (MCVE) outside of cases going end-to-end in our application.","body":"Thanks!  Replying to the very last line, we <b>are</b> getting different results in low-order bits of calculation results, not just different code generation.  One hypothesis we&#39;ve come up with is that a library in use may be in a jar that was compiled pre-java17, but we haven&#39;t been able to figure out if that&#39;s what&#39;s happening.  Small expressions we&#39;ve tried have all given same results across architectures, so we don&#39;t have a reproducible case (MCVE) outside of cases going end-to-end in our application."}],"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1702037860,"creation_date":1702026914,"answer_id":77625516,"question_id":76674101,"body_markdown":"First of all, `strictfp` is not a flag, this is a Java keyword ensuring the same calculation results on every platform while doing operations over floating-point variables (`float` and `double`).\r\n\r\nAs of your question, there are two major PRs in OpenJDK involving the changes for JEP 306\r\n- [8244146: javac changes for JEP 306][1]\r\n- [8266530: HotSpot changes for JEP 306][2]\r\n\r\nIf you look into the first one, especially into [StrictMath][3] you&#39;ll see that it now delegates directly to `j.l.Math` and the comment about `strictfp` semantics is now removed (along with `strictfp` keyword in OpenJDK codebase).\r\nMoreover, starting from Java 17 `javac` issues an explicit warning for `strictfp` keyword (see `compiler.properties`:\r\n\r\n&gt; as of release 17, **all floating-point expressions are evaluated strictly** and `strictfp` is not required\r\n\r\nSo for the question\r\n&gt; Does this mean that java.lang.Math can be counted on to behave exactly the same as the analogous methods in StrictMath\r\n\r\nThe answer is &quot;yes&quot;, for some methods e.g. `Math.sinh(double)` delegate to `StrictMath.sinh(double)` (and later on to `FdLibm.Sinh.compute(dobule)`) and e.g. method `StrictMath.toRadians(double)` delegates to `Math.toRadians(double)`. Eventually for floating-point variables it does not matter whether you call a method of `Math` or `StrictMath`, the same code is executed under the hood.\r\n\r\nAs of this part of the same question:\r\n&gt; i.e., that java.lang.Math methods can no longer be replaced by the JVM with intrinsics as used to be allowed\r\n\r\nThe PRs does not impose any changes regarding intrinsics which are platform-specific and applied by JVM at runtime regardless of whether operation is strict or not. Moreover, as [@Holger][4] pointed out, there is no contradiction between strictness and intrinsics.\r\n\r\n&gt; Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?\r\n\r\nThe answer is &quot;yes as of Java 17 or newer&quot;. Prior to it there could be difference in results, see https://stackoverflow.com/a/22335100/12473843. Before Java 17 if an operation over floating-point variable was not strict the standard assumed that\r\n&gt; a calculation might produce &quot;the correct answer&quot; in situations where exclusive use of the float value set or double value set might result in overflow or underflow.\r\nBut as soon as for now the semantics is always strict you get the same result on all platforms.\r\n\r\nSee also [8268224: Cleanup references to &quot;strictfp&quot; in core lib comments][5]\r\n\r\nP.S.\r\n&gt; we do see differences in today&#39;s code between Apple Silicon vs Intel\r\n\r\nI think it&#39;s quite natural for compiler to produce different code for different platforms, the question here is whether you see different results of computations on mentioned platforms.\r\n\r\n\r\n  [1]: https://github.com/openjdk/jdk/pull/3831\r\n  [2]: https://github.com/openjdk/jdk/pull/3891\r\n  [3]: https://github.com/openjdk/jdk/pull/3831/files#diff-a854e2217535f706e7a7cb2f4ecd3b52c4244d6ddac32ea67b40d65d9e2a0658L210-L231\r\n  [4]: https://stackoverflow.com/users/2711488/holger\r\n  [5]: https://github.com/openjdk/jdk/pull/4348","title":"Is there still a difference between Math and StrictMath after Java 17 and JEP 306?","body":"<p>First of all, <code>strictfp</code> is not a flag, this is a Java keyword ensuring the same calculation results on every platform while doing operations over floating-point variables (<code>float</code> and <code>double</code>).</p>\n<p>As of your question, there are two major PRs in OpenJDK involving the changes for JEP 306</p>\n<ul>\n<li><a href=\"https://github.com/openjdk/jdk/pull/3831\" rel=\"nofollow noreferrer\">8244146: javac changes for JEP 306</a></li>\n<li><a href=\"https://github.com/openjdk/jdk/pull/3891\" rel=\"nofollow noreferrer\">8266530: HotSpot changes for JEP 306</a></li>\n</ul>\n<p>If you look into the first one, especially into <a href=\"https://github.com/openjdk/jdk/pull/3831/files#diff-a854e2217535f706e7a7cb2f4ecd3b52c4244d6ddac32ea67b40d65d9e2a0658L210-L231\" rel=\"nofollow noreferrer\">StrictMath</a> you'll see that it now delegates directly to <code>j.l.Math</code> and the comment about <code>strictfp</code> semantics is now removed (along with <code>strictfp</code> keyword in OpenJDK codebase).\nMoreover, starting from Java 17 <code>javac</code> issues an explicit warning for <code>strictfp</code> keyword (see <code>compiler.properties</code>:</p>\n<blockquote>\n<p>as of release 17, <strong>all floating-point expressions are evaluated strictly</strong> and <code>strictfp</code> is not required</p>\n</blockquote>\n<p>So for the question</p>\n<blockquote>\n<p>Does this mean that java.lang.Math can be counted on to behave exactly the same as the analogous methods in StrictMath</p>\n</blockquote>\n<p>The answer is &quot;yes&quot;, for some methods e.g. <code>Math.sinh(double)</code> delegate to <code>StrictMath.sinh(double)</code> (and later on to <code>FdLibm.Sinh.compute(dobule)</code>) and e.g. method <code>StrictMath.toRadians(double)</code> delegates to <code>Math.toRadians(double)</code>. Eventually for floating-point variables it does not matter whether you call a method of <code>Math</code> or <code>StrictMath</code>, the same code is executed under the hood.</p>\n<p>As of this part of the same question:</p>\n<blockquote>\n<p>i.e., that java.lang.Math methods can no longer be replaced by the JVM with intrinsics as used to be allowed</p>\n</blockquote>\n<p>The PRs does not impose any changes regarding intrinsics which are platform-specific and applied by JVM at runtime regardless of whether operation is strict or not. Moreover, as <a href=\"https://stackoverflow.com/users/2711488/holger\">@Holger</a> pointed out, there is no contradiction between strictness and intrinsics.</p>\n<blockquote>\n<p>Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?</p>\n</blockquote>\n<p>The answer is &quot;yes as of Java 17 or newer&quot;. Prior to it there could be difference in results, see <a href=\"https://stackoverflow.com/a/22335100/12473843\">https://stackoverflow.com/a/22335100/12473843</a>. Before Java 17 if an operation over floating-point variable was not strict the standard assumed that</p>\n<blockquote>\n<p>a calculation might produce &quot;the correct answer&quot; in situations where exclusive use of the float value set or double value set might result in overflow or underflow.\nBut as soon as for now the semantics is always strict you get the same result on all platforms.</p>\n</blockquote>\n<p>See also <a href=\"https://github.com/openjdk/jdk/pull/4348\" rel=\"nofollow noreferrer\">8268224: Cleanup references to &quot;strictfp&quot; in core lib comments</a></p>\n<p>P.S.</p>\n<blockquote>\n<p>we do see differences in today's code between Apple Silicon vs Intel</p>\n</blockquote>\n<p>I think it's quite natural for compiler to produce different code for different platforms, the question here is whether you see different results of computations on mentioned platforms.</p>\n"}],"owner":{"account_id":178970,"reputation":5078,"user_id":411282,"accept_rate":67,"display_name":"Joshua Goldberg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1702037860,"creation_date":1689192188,"question_id":76674101,"body_markdown":"[JEP 306][1], implemented in Java 17, provides always-strict floating point semantics, deprecating the `strictfp` flag.  Does this mean that `java.lang.Math` can be counted on to behave exactly the same as the analogous methods in `StrictMath` (i.e., that `java.lang.Math` methods can no longer be replaced by the JVM with intrinsics as used to be allowed)?  Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?\r\n\r\nI&#39;m curious if I&#39;m misunderstanding the new Java 17 feature, since we do see differences in today&#39;s code between Apple Silicon vs Intel.\r\n\r\n  [1]: https://openjdk.org/jeps/306","title":"Is there still a difference between Math and StrictMath after Java 17 and JEP 306?","body":"<p><a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">JEP 306</a>, implemented in Java 17, provides always-strict floating point semantics, deprecating the <code>strictfp</code> flag.  Does this mean that <code>java.lang.Math</code> can be counted on to behave exactly the same as the analogous methods in <code>StrictMath</code> (i.e., that <code>java.lang.Math</code> methods can no longer be replaced by the JVM with intrinsics as used to be allowed)?  Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?</p>\n<p>I'm curious if I'm misunderstanding the new Java 17 feature, since we do see differences in today's code between Apple Silicon vs Intel.</p>\n"},{"tags":["java","unit-testing","testing","sleep"],"comments":[{"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"score":0,"creation_date":1260294930,"post_id":1868637,"comment_id":1765802,"body_markdown":"this could be viewed as a casestudy for unit testing with mocking","body":"this could be viewed as a casestudy for unit testing with mocking"},{"owner":{"account_id":8891,"reputation":3425,"user_id":16193,"accept_rate":88,"display_name":"Daniel Hiller"},"score":0,"creation_date":1260343998,"post_id":1868637,"comment_id":1770286,"body_markdown":"Do not use Thread.sleep(), use a wait() approach. Thread.sleep() uses CPU cycles, while wait() does not.","body":"Do not use Thread.sleep(), use a wait() approach. Thread.sleep() uses CPU cycles, while wait() does not."}],"answers":[{"comments":[{"owner":{"account_id":3595384,"reputation":2380,"user_id":3000280,"accept_rate":43,"display_name":"cmlonder"},"score":0,"creation_date":1574863579,"post_id":1868665,"comment_id":104381810,"body_markdown":"What If I don&#39;t want to expose my internal configurations to the outside just for testing?","body":"What If I don&#39;t want to expose my internal configurations to the outside just for testing?"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1260294576,"creation_date":1260294576,"answer_id":1868665,"question_id":1868637,"body_markdown":"Make the sleeping time configurable through a setter, and provide a default value. So in your unit tests, call the setter with a small argument (1 for example), and then execute the method that would call `Thread.sleep()`.\r\n\r\nAnother similar approach is to make if configurable via a boolean, so that `Thread.sleep()` isn&#39;t called at all if the `boolean` is set to `false`.","title":"Testing with Thread.sleep","body":"<p>Make the sleeping time configurable through a setter, and provide a default value. So in your unit tests, call the setter with a small argument (1 for example), and then execute the method that would call <code>Thread.sleep()</code>.</p>\n\n<p>Another similar approach is to make if configurable via a boolean, so that <code>Thread.sleep()</code> isn't called at all if the <code>boolean</code> is set to <code>false</code>.</p>\n"},{"comments":[{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1260299920,"post_id":1868666,"comment_id":1766438,"body_markdown":"This is not just a policy, but a configurable sleep executor. A policy would only represent the strategy around sleeping, not execute it. For the rest, sound idea.","body":"This is not just a policy, but a configurable sleep executor. A policy would only represent the strategy around sleeping, not execute it. For the rest, sound idea."}],"tags":[],"owner":{"account_id":7913,"reputation":33220,"user_id":13940,"accept_rate":58,"display_name":"Greg Mattes"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1260294944,"creation_date":1260294577,"answer_id":1868666,"question_id":1868637,"body_markdown":"Create some retry delay type that represents the policy for retry delays. Invoke some method on the policy type for the delay. Mock it as you like. No conditional logic, or `true`/`false` flags. Just inject the type that you want.\r\n\r\nIn ConnectRetryPolicy.java\r\n\r\n    public interface ConnectRetryPolicy {\r\n        void doRetryDelay();\r\n    }\r\n\r\nIn SleepConnectRetryPolicy.java\r\n\r\n    public class final SleepConnectRetryPolicy implements ConnectRetryPolicy {\r\n        private final int delay;\r\n        public SleepConnectRetryPolicy(final int delay) {\r\n            this.delay = delay;\r\n        }\r\n    \r\n        @Override\r\n        public void doRetryDelay() {\r\n            try {\r\n                Thread.sleep(delay);\r\n            } catch (InterruptedException ie) {\r\n                log.error(&quot;connection delay sleep interrupted&quot;, ie);\r\n            }\r\n        }\r\n    }\r\n\r\nIn MockConnectRetryPolicy.java\r\n\r\n    public final class MockConnectRetryPolicy implements ConnectRetryPolicy {    \r\n        @Override\r\n        public void doRetryDelay() {\r\n            // no delay\r\n        }\r\n    }\r\n","title":"Testing with Thread.sleep","body":"<p>Create some retry delay type that represents the policy for retry delays. Invoke some method on the policy type for the delay. Mock it as you like. No conditional logic, or <code>true</code>/<code>false</code> flags. Just inject the type that you want.</p>\n\n<p>In ConnectRetryPolicy.java</p>\n\n<pre><code>public interface ConnectRetryPolicy {\n    void doRetryDelay();\n}\n</code></pre>\n\n<p>In SleepConnectRetryPolicy.java</p>\n\n<pre><code>public class final SleepConnectRetryPolicy implements ConnectRetryPolicy {\n    private final int delay;\n    public SleepConnectRetryPolicy(final int delay) {\n        this.delay = delay;\n    }\n\n    @Override\n    public void doRetryDelay() {\n        try {\n            Thread.sleep(delay);\n        } catch (InterruptedException ie) {\n            log.error(\"connection delay sleep interrupted\", ie);\n        }\n    }\n}\n</code></pre>\n\n<p>In MockConnectRetryPolicy.java</p>\n\n<pre><code>public final class MockConnectRetryPolicy implements ConnectRetryPolicy {    \n    @Override\n    public void doRetryDelay() {\n        // no delay\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":43112,"reputation":58953,"user_id":125844,"accept_rate":85,"display_name":"notnoop"},"score":3,"creation_date":1260294755,"post_id":1868671,"comment_id":1765776,"body_markdown":"I&#39;ve been tempted to create a `Machine` class to abstract away all of that.","body":"I&#39;ve been tempted to create a <code>Machine</code> class to abstract away all of that."},{"owner":{"account_id":78522,"reputation":31537,"user_id":223429,"display_name":"Eugene Kuleshov"},"score":0,"creation_date":1260295021,"post_id":1868671,"comment_id":1765816,"body_markdown":"Way to go. This way you can also set your configuration or even skip anything you want in just one place, rather then spreading this logic trough the code.","body":"Way to go. This way you can also set your configuration or even skip anything you want in just one place, rather then spreading this logic trough the code."},{"owner":{"account_id":301362,"reputation":741,"user_id":609033,"accept_rate":30,"display_name":"Sayo Oladeji"},"score":1,"creation_date":1467988568,"post_id":1868671,"comment_id":63957991,"body_markdown":"@notnoop Exactly what I did with a `Clock` class. Supports basic operations like `Clock.now()`, `Clock.freeze()`, `Clock.freeze(pointInTime)` and so on. No component interacts with the runtime directly to fetch time but rather go through `Clock`.","body":"@notnoop Exactly what I did with a <code>Clock</code> class. Supports basic operations like <code>Clock.now()</code>, <code>Clock.freeze()</code>, <code>Clock.freeze(pointInTime)</code> and so on. No component interacts with the runtime directly to fetch time but rather go through <code>Clock</code>."}],"tags":[],"owner":{"account_id":78522,"reputation":31537,"user_id":223429,"display_name":"Eugene Kuleshov"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1260294627,"creation_date":1260294627,"answer_id":1868671,"question_id":1868637,"body_markdown":"It is usually a good idea to delegate time-related functionality to a separate component. That include getting the current time, as well as delays like Thread.sleep(). This way it is easy to substitute this component with mock during testing, as well as switch to a different implementation.","title":"Testing with Thread.sleep","body":"<p>It is usually a good idea to delegate time-related functionality to a separate component. That include getting the current time, as well as delays like Thread.sleep(). This way it is easy to substitute this component with mock during testing, as well as switch to a different implementation.</p>\n"},{"tags":[],"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1345623594,"creation_date":1345623594,"answer_id":12069000,"question_id":1868637,"body_markdown":"Eugene is right, make your own component to wrap the system that is out of your control Just done this myself thought I&#39;d share, this is known as &#39;[SelfShunt][1]&#39; check this out:\r\n\r\n`Generator` is a class that when you call `getId()` it returns the current system time.\r\n\r\n    public class GeneratorTests implements SystemTime {\r\n    \r\n    \tprivate Generator cut;\r\n    \tprivate long currentSystemTime;\r\n    \r\n        @Before\r\n    \tpublic void setup(){\r\n    \t\tcut = Generator.getInstance(this);\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testGetId_returnedUniqueId(){\r\n    \t\tcurrentSystemTime = 123;\r\n    \r\n    \t\tString id = cut.getId();\r\n    \r\n    \t\tassertTrue(id.equals(&quot;123&quot;));\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic long currentTimeMillis() {\r\n    \t\treturn currentSystemTime;\r\n    \t}\r\n    }\r\n\r\nWe make the test class &#39;SelfShunt&#39; and become the SystemTime component that way we have full control of what the time is.\r\n\r\n    public class BlundellSystemTime implements SystemTime {\r\n    \r\n    \t@Override\r\n    \tpublic long currentTimeMillis(){\r\n    \t\treturn System.currentTimeMillis();\r\n    \t}\r\n    }\r\n\r\nWe wrap the component that isn&#39;t under our control.\r\n\r\n    public interface SystemTime {\r\n    \r\n    \tlong currentTimeMillis();\r\n    \r\n    }\r\n\r\nThen make an interface so our test can &#39;SelfShunt&#39;\r\n\r\n  [1]: http://c2.com/cgi/wiki?SelfShuntPattern","title":"Testing with Thread.sleep","body":"<p>Eugene is right, make your own component to wrap the system that is out of your control Just done this myself thought I'd share, this is known as '<a href=\"http://c2.com/cgi/wiki?SelfShuntPattern\" rel=\"nofollow\">SelfShunt</a>' check this out:</p>\n\n<p><code>Generator</code> is a class that when you call <code>getId()</code> it returns the current system time.</p>\n\n<pre><code>public class GeneratorTests implements SystemTime {\n\n    private Generator cut;\n    private long currentSystemTime;\n\n    @Before\n    public void setup(){\n        cut = Generator.getInstance(this);\n    }\n\n    @Test\n    public void testGetId_returnedUniqueId(){\n        currentSystemTime = 123;\n\n        String id = cut.getId();\n\n        assertTrue(id.equals(\"123\"));\n    }\n\n    @Override\n    public long currentTimeMillis() {\n        return currentSystemTime;\n    }\n}\n</code></pre>\n\n<p>We make the test class 'SelfShunt' and become the SystemTime component that way we have full control of what the time is.</p>\n\n<pre><code>public class BlundellSystemTime implements SystemTime {\n\n    @Override\n    public long currentTimeMillis(){\n        return System.currentTimeMillis();\n    }\n}\n</code></pre>\n\n<p>We wrap the component that isn't under our control.</p>\n\n<pre><code>public interface SystemTime {\n\n    long currentTimeMillis();\n\n}\n</code></pre>\n\n<p>Then make an interface so our test can 'SelfShunt'</p>\n"},{"tags":[],"owner":{"account_id":1962407,"reputation":545,"user_id":1763562,"display_name":"Big Kahuna"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366230654,"creation_date":1366230654,"answer_id":16069703,"question_id":1868637,"body_markdown":"I would argue why are you trying to test Thread.sleep. It seems to be me you&#39;re trying to test the behaviour as a consequence of some event. \r\n\r\ni.e. what happens if:\r\n\r\n- connection timeout\r\n- connection dropped\r\n\r\nIf you model code based on events then you can test what should happen should a particular event occurred rather than having to come up with a construct that masks the concurrent API calls. Else what are you really testing? Are you testing how your application reacts to different stimuli or simply testing the JVM is working correctly? \r\n\r\nI agree with the other readers that sometimes it&#39;s useful to put an abstraction around any code time or thread related i.e. Virtual clock http://c2.com/cgi/wiki?VirtualClock so you can mock out any timing/concurrent behaviour and concentrate on the behaviour of the unit itself.\r\n\r\nIt also sounds like you should adopt a state pattern so you object has specific behaviour depending on what state it&#39;s in. i.e AwaitingConnectionState, ConnectionDroppedState. Transition to different states would be via the different events i.e. timeout, dropped connection etc. Not sure if this overkill for your needs but it certainly removes a lot of conditional logic which can make the code more complicated and unclear.\r\n\r\nIf you approach this way, then you can still test behaviour at the unit level whilst still testing in situ with an integration test or acceptance test later. ","title":"Testing with Thread.sleep","body":"<p>I would argue why are you trying to test Thread.sleep. It seems to be me you're trying to test the behaviour as a consequence of some event. </p>\n\n<p>i.e. what happens if:</p>\n\n<ul>\n<li>connection timeout</li>\n<li>connection dropped</li>\n</ul>\n\n<p>If you model code based on events then you can test what should happen should a particular event occurred rather than having to come up with a construct that masks the concurrent API calls. Else what are you really testing? Are you testing how your application reacts to different stimuli or simply testing the JVM is working correctly? </p>\n\n<p>I agree with the other readers that sometimes it's useful to put an abstraction around any code time or thread related i.e. Virtual clock <a href=\"http://c2.com/cgi/wiki?VirtualClock\" rel=\"nofollow\">http://c2.com/cgi/wiki?VirtualClock</a> so you can mock out any timing/concurrent behaviour and concentrate on the behaviour of the unit itself.</p>\n\n<p>It also sounds like you should adopt a state pattern so you object has specific behaviour depending on what state it's in. i.e AwaitingConnectionState, ConnectionDroppedState. Transition to different states would be via the different events i.e. timeout, dropped connection etc. Not sure if this overkill for your needs but it certainly removes a lot of conditional logic which can make the code more complicated and unclear.</p>\n\n<p>If you approach this way, then you can still test behaviour at the unit level whilst still testing in situ with an integration test or acceptance test later. </p>\n"},{"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1395823728,"creation_date":1395823728,"answer_id":22655616,"question_id":1868637,"body_markdown":"I just faced a similar issue and I created a `Sleeper` interface to abstract this away:\r\n\r\n    public interface Sleeper\r\n    {\r\n        void sleep( long millis ) throws InterruptedException;\r\n    }\r\n\r\nThe default implementation uses `Thread.sleep()`:\r\n\r\n    public class ThreadSleeper implements Sleeper\r\n    {\r\n    \t@Override\r\n    \tpublic void sleep( long millis ) throws InterruptedException\r\n    \t{\r\n    \t\tThread.sleep( millis );\r\n    \t}\r\n    }\r\n\r\nIn my unit tests, I inject a `FixedDateTimeAdvanceSleeper`:\r\n\r\n    public class FixedDateTimeAdvanceSleeper implements Sleeper\r\n    {\r\n    \t@Override\r\n    \tpublic void sleep( long millis ) throws InterruptedException\r\n    \t{\r\n    \t\tDateTimeUtils.setCurrentMillisFixed( DateTime.now().getMillis() + millis );\r\n    \t}\r\n    }\r\n\r\nThis allows me to query the time in a unit test:\r\n\r\n    assertThat( new DateTime( DateTimeUtils.currentTimeMillis() ) ).isEqualTo( new DateTime( &quot;2014-03-27T00:00:30&quot; ) );\r\n\r\nNote that you need to fix the time first using `DateTimeUtils.setCurrentMillisFixed( new DateTime( &quot;2014-03-26T09:37:13&quot; ).getMillis() );` at the start of your test and restore the time again after the test using `DateTimeUtils.setCurrentMillisSystem();`","title":"Testing with Thread.sleep","body":"<p>I just faced a similar issue and I created a <code>Sleeper</code> interface to abstract this away:</p>\n\n<pre><code>public interface Sleeper\n{\n    void sleep( long millis ) throws InterruptedException;\n}\n</code></pre>\n\n<p>The default implementation uses <code>Thread.sleep()</code>:</p>\n\n<pre><code>public class ThreadSleeper implements Sleeper\n{\n    @Override\n    public void sleep( long millis ) throws InterruptedException\n    {\n        Thread.sleep( millis );\n    }\n}\n</code></pre>\n\n<p>In my unit tests, I inject a <code>FixedDateTimeAdvanceSleeper</code>:</p>\n\n<pre><code>public class FixedDateTimeAdvanceSleeper implements Sleeper\n{\n    @Override\n    public void sleep( long millis ) throws InterruptedException\n    {\n        DateTimeUtils.setCurrentMillisFixed( DateTime.now().getMillis() + millis );\n    }\n}\n</code></pre>\n\n<p>This allows me to query the time in a unit test:</p>\n\n<pre><code>assertThat( new DateTime( DateTimeUtils.currentTimeMillis() ) ).isEqualTo( new DateTime( \"2014-03-27T00:00:30\" ) );\n</code></pre>\n\n<p>Note that you need to fix the time first using <code>DateTimeUtils.setCurrentMillisFixed( new DateTime( \"2014-03-26T09:37:13\" ).getMillis() );</code> at the start of your test and restore the time again after the test using <code>DateTimeUtils.setCurrentMillisSystem();</code></p>\n"},{"tags":[],"owner":{"account_id":1295346,"reputation":4152,"user_id":1246547,"display_name":"Philzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702037796,"creation_date":1702037796,"answer_id":77626472,"question_id":1868637,"body_markdown":"For these kinds of cases, i implement a default interface that all sleepy classes implement:\r\n\r\n```java\r\npublic interface ISleep {\r\n\r\n    /**\r\n     * Causes the currently executing thread to sleep\r\n     * @param milliseconds the length of time to sleep in milliseconds\r\n     * @throws InterruptedException if any thread has interrupted the current thread\r\n     */\r\n    default void sleep(long milliseconds) throws InterruptedException {\r\n        Thread.sleep(milliseconds);\r\n    }\r\n}\r\n```\r\n\r\nThen use this method instead of `Thread.sleep()` to enable testing:\r\n\r\n```java\r\nclass MyClass implements ISleep {\r\n\r\n    void sleepyMethod() {\r\n        while(stuffNotFinished) {\r\n            doSomething();\r\n            sleep(1000);\r\n        }\r\n    }\r\n\r\n    public void doSomething() { /* ... */}\r\n\r\n}\r\n```\r\n\r\nNow, writing fast tests is easy as pie, as you can simply mock the call to sleep() to return immediately (example using Mockito):\r\n\r\n```\r\n@Test void sleepyMethod_callsDoSomething() {\r\n    var objectUnderTest = Mockito.spy(new MyClass());\r\n    Mockito.doNothing().when(objectUnderTest).sleep(anyLong());\r\n\r\n    objectUnderTest.sleepyMethod();\r\n\r\n    Mockito.verify(objectUnderTest).doSomething();\r\n}","title":"Testing with Thread.sleep","body":"<p>For these kinds of cases, i implement a default interface that all sleepy classes implement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface ISleep {\n\n    /**\n     * Causes the currently executing thread to sleep\n     * @param milliseconds the length of time to sleep in milliseconds\n     * @throws InterruptedException if any thread has interrupted the current thread\n     */\n    default void sleep(long milliseconds) throws InterruptedException {\n        Thread.sleep(milliseconds);\n    }\n}\n</code></pre>\n<p>Then use this method instead of <code>Thread.sleep()</code> to enable testing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass implements ISleep {\n\n    void sleepyMethod() {\n        while(stuffNotFinished) {\n            doSomething();\n            sleep(1000);\n        }\n    }\n\n    public void doSomething() { /* ... */}\n\n}\n</code></pre>\n<p>Now, writing fast tests is easy as pie, as you can simply mock the call to sleep() to return immediately (example using Mockito):</p>\n<pre><code>@Test void sleepyMethod_callsDoSomething() {\n    var objectUnderTest = Mockito.spy(new MyClass());\n    Mockito.doNothing().when(objectUnderTest).sleep(anyLong());\n\n    objectUnderTest.sleepyMethod();\n\n    Mockito.verify(objectUnderTest).doSomething();\n}\n</code></pre>\n"}],"owner":{"account_id":43112,"reputation":58953,"user_id":125844,"accept_rate":85,"display_name":"notnoop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32541,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":1868671,"answer_count":7,"score":15,"last_activity_date":1702037796,"creation_date":1260294292,"question_id":1868637,"body_markdown":"What are the recommended approaches to using `Thread.sleep()` to speed up tests.\r\n\r\nI am testing a network library with a retry functionality when connections are dropped or timeout errors occur, etc.  The library however, uses a `Thread.sleep()` between the retries (so it won&#39;t connect thousands times while the server is restarting).  The call is slowing the unit tests significantly, and I wonder what the options are to override it.\r\n\r\nNote, I&#39;m open to actually changing the code, or using a mocking framework to mock Thread.sleep(), but would like to hear your opinions/recommendation first.","title":"Testing with Thread.sleep","body":"<p>What are the recommended approaches to using <code>Thread.sleep()</code> to speed up tests.</p>\n\n<p>I am testing a network library with a retry functionality when connections are dropped or timeout errors occur, etc.  The library however, uses a <code>Thread.sleep()</code> between the retries (so it won't connect thousands times while the server is restarting).  The call is slowing the unit tests significantly, and I wonder what the options are to override it.</p>\n\n<p>Note, I'm open to actually changing the code, or using a mocking framework to mock Thread.sleep(), but would like to hear your opinions/recommendation first.</p>\n"},{"tags":["java","spring","spring-security","oauth-2.0","keycloak"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1672226943,"post_id":74939220,"comment_id":132245588,"body_markdown":"maybe you can remove `oauth2ResourceServer()` that usage in `http.authorizeRequests()` and retry ?","body":"maybe you can remove <code>oauth2ResourceServer()</code> that usage in <code>http.authorizeRequests()</code> and retry ?"},{"owner":{"account_id":11976502,"reputation":420,"user_id":14686302,"display_name":"kernel"},"score":0,"creation_date":1672227322,"post_id":74939220,"comment_id":132245652,"body_markdown":"Don&#39;t I have to use  oauth2ResourceServer() for integration? It is stated in the document that I should use it this way.\nHow do I get Keycloak oauth2 integration if I remove &quot;oauth2ResourceServer()&quot;method? @muhammedozbilici","body":"Don&#39;t I have to use  oauth2ResourceServer() for integration? It is stated in the document that I should use it this way. How do I get Keycloak oauth2 integration if I remove &quot;oauth2ResourceServer()&quot;method? @muhammedozbilici"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1679624134,"post_id":74939220,"comment_id":133758867,"body_markdown":"you need to decide if your app is primarly an OAuth2 client or an OAuth2 resource server: is it serving templates (with Tymeleaf, JSF or alike) or a REST API? I suggest you read this [OAuth2 essentials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials) I wrote as introduction to my tutorials.","body":"you need to decide if your app is primarly an OAuth2 client or an OAuth2 resource server: is it serving templates (with Tymeleaf, JSF or alike) or a REST API? I suggest you read this <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials\" rel=\"nofollow noreferrer\">OAuth2 essentials</a> I wrote as introduction to my tutorials."}],"answers":[{"tags":[],"owner":{"account_id":1828999,"reputation":679,"user_id":1660977,"accept_rate":92,"display_name":"Marco Klein"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1679613219,"creation_date":1679613219,"answer_id":75828742,"question_id":74939220,"body_markdown":"Maybe, you are missing the oauth2-resource-server dependency in your `pom.xml`\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThat actually appends the required `DefaultBearerTokenResolver` Bean automatically and should work out of the box.","title":"ClassNotFoundException: org.springframework.security.oauth2.server.resource.web.BearerTokenResolver","body":"<p>Maybe, you are missing the oauth2-resource-server dependency in your <code>pom.xml</code></p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n  &lt;version&gt;6.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>That actually appends the required <code>DefaultBearerTokenResolver</code> Bean automatically and should work out of the box.</p>\n"},{"comments":[{"owner":{"account_id":2137849,"reputation":172,"user_id":1897168,"accept_rate":57,"display_name":"Rory G"},"score":0,"creation_date":1701953019,"post_id":75829647,"comment_id":136840067,"body_markdown":"I found this answer misleading. My issue was simply dependencies. My app is running happily as a resource server and a oauth2 client to a 3rd party. I don&#39;t see how doing both is going to magically make classes disappear.","body":"I found this answer misleading. My issue was simply dependencies. My app is running happily as a resource server and a oauth2 client to a 3rd party. I don&#39;t see how doing both is going to magically make classes disappear."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1701968809,"post_id":75829647,"comment_id":136843182,"body_markdown":"Once the `spring-boot-starter-oauth2-resource-server` added (as per the resource server part of the answer), it runs but **with sessions**, even for requests sent with access tokens (which is clearly a waste of resources). Also, **requests sent from a browser and processed by a `SecurityFilterChain` with `oauth2Login` are authorized with a session cookie, not with a `Bearer` access token**. Configuring the app as a resource server and a client won&#39;t attach tokens to requests magically. `oauth2Login` adds tokens to the user session (on the server), not to incoming requests.","body":"Once the <code>spring-boot-starter-oauth2-resource-server</code> added (as per the resource server part of the answer), it runs but <b>with sessions</b>, even for requests sent with access tokens (which is clearly a waste of resources). Also, <b>requests sent from a browser and processed by a <code>SecurityFilterChain</code> with <code>oauth2Login</code> are authorized with a session cookie, not with a <code>Bearer</code> access token</b>. Configuring the app as a resource server and a client won&#39;t attach tokens to requests magically. <code>oauth2Login</code> adds tokens to the user session (on the server), not to incoming requests."},{"owner":{"account_id":2137849,"reputation":172,"user_id":1897168,"accept_rate":57,"display_name":"Rory G"},"score":0,"creation_date":1702016524,"post_id":75829647,"comment_id":136848429,"body_markdown":"I&#39;m not using oath2Login. My app is a resource server monolith that also connects to other external servers with oauth2, a fairly common use case.","body":"I&#39;m not using oath2Login. My app is a resource server monolith that also connects to other external servers with oauth2, a fairly common use case."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1702037693,"post_id":75829647,"comment_id":136851520,"body_markdown":"Then you are in the &quot;primarily resource server&quot; case, your security filter chain should not have anything about OAuth2 clients, and properties should not contain registrations with `authorization_code`. Request to other resource servers will be done with tokens your app gets with a `client_credentials` registration or by just forwarding the incoming token. But this is a fairly different case from the question where he&#39;s trying to have an `authorization_code` registration (`oauth2Login`) together with `oauth2ResourceServer`","body":"Then you are in the &quot;primarily resource server&quot; case, your security filter chain should not have anything about OAuth2 clients, and properties should not contain registrations with <code>authorization_code</code>. Request to other resource servers will be done with tokens your app gets with a <code>client_credentials</code> registration or by just forwarding the incoming token. But this is a fairly different case from the question where he&#39;s trying to have an <code>authorization_code</code> registration (<code>oauth2Login</code>) together with <code>oauth2ResourceServer</code>"}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1702037779,"creation_date":1679626428,"answer_id":75829647,"question_id":74939220,"body_markdown":"First, you should decide if your app is primarily an OAuth2 client with login or an OAuth2 resource server. Here you are mixing client with login (registration with `authorization_code` flow) and resource server configuration in the same security filter chain. This is something you should not be doing. Security mechanisms are too different:\r\n- `oauth2Login` (`authorization_code` flow) relies on sessions, requires CSRF protection and you usually expect `302 redirect to login` to unauthorized requests\r\n- `oauth2ResourceServer` relies on access tokens, can be stateless, without CSRF protection and should respond with `401 unauthorized`\r\n\r\n## `oauth2resourceServer` (REST API)\r\n[Complete tutorial][2]. \r\n\r\nResource servers don&#39;t care about login nor OAuth2 flows which are client concerns. It only cares if a request is authorized (has a valid access token), if this token should be introspected or decoded, and if it should grant access to the requested resources based on the token claims.\r\n\r\nUse Postman or any OAuth2 client which can authorize its requests and send any type of request (not just GET, but also POST, PUT and DELETE) to try your running API.\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n```java\r\n@SpringBootApplication\r\npublic class ResourceServerMinimalApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ResourceServerMinimalApplication.class, args);\r\n\t}\r\n\r\n\t@Order(Ordered.HIGHEST_PRECEDENCE)\r\n\t@Bean\r\n\tSecurityFilterChain resourceServerSecurityFilterChain(\r\n\t\t\tHttpSecurity http,\r\n\t\t\t@Value(&quot;${resource-server.cors.allowed-origins:}#{T(java.util.Collections).emptyList()}&quot;) List&lt;String&gt; allowedOrigins)\r\n\t\t\tthrows Exception {\r\n\t\thttp.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt());\r\n\t\thttp.sessionManagement(sm -&gt; sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n\t\thttp.csrf(csrf -&gt; csrf.disable());\r\n\t\thttp.exceptionHandling(handeling -&gt; handeling.authenticationEntryPoint((request, response, authException) -&gt; {\r\n\t\t\tresponse.addHeader(HttpHeaders.WWW_AUTHENTICATE, &quot;Basic realm=\\&quot;Restricted Content\\&quot;&quot;);\r\n\t\t\tresponse.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());\r\n\t\t}));\r\n\t\thttp.authorizeHttpRequests().anyRequest().authenticated();\r\n\t\thttp.cors(cors -&gt; {\r\n\t\t\tif (allowedOrigins.isEmpty()) {\r\n\t\t\t\tcors.disable();\r\n\t\t\t} else {\r\n\t\t\t\tcors.configurationSource(corsConfig(allowedOrigins));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\tCorsConfigurationSource corsConfig(List&lt;String&gt; allowedOrigins) {\r\n\t\tfinal var source = new UrlBasedCorsConfigurationSource();\r\n\r\n\t\tfinal var configuration = new CorsConfiguration();\r\n\t\tconfiguration.setAllowedOrigins(allowedOrigins);\r\n\t\tconfiguration.setAllowedMethods(List.of(&quot;*&quot;));\r\n\t\tconfiguration.setAllowedHeaders(List.of(&quot;*&quot;));\r\n\t\tconfiguration.setExposedHeaders(List.of(&quot;*&quot;));\r\n\r\n\t\tsource.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n\t\treturn source;\r\n\t}\r\n\r\n\t@RestController\r\n\t@RequestMapping(&quot;/api/v1&quot;)\r\n\tpublic static class GreetingController {\r\n\t\t@GetMapping(&quot;/greet&quot;)\r\n\t\tpublic ResponseEntity&lt;GreetingDto&gt; getGreeting(Authentication auth) {\r\n\t\t\treturn ResponseEntity.ok(new GreetingDto(&quot;Hello %s!&quot;.formatted(auth.getName())));\r\n\t\t}\r\n\r\n\t\tstatic record GreetingDto(String message) {\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n```yaml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: http://keycloak-url/realms/realm-id\r\n\r\nresource-server:\r\n  cors:\r\n    allowed-origins:\r\n    - http://localhost:4200\r\n```\r\n\r\n## `oauth2Login` \r\nClient using authorization_code flow (gateway configured with `TokenRelay` filter or app with server-side rendered templates like Thymeleaf)\r\n[Complete tutorial][3]. \r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n```java\r\n@SpringBootApplication\r\npublic class ClientMinimalApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ClientMinimalApplication.class, args);\r\n\t}\r\n\r\n\t@Order(Ordered.HIGHEST_PRECEDENCE + 1)\r\n\t@Bean\r\n\tSecurityFilterChain clientSecurityFilterChain(HttpSecurity http, ClientRegistrationRepository clientRegistrationRepository) throws Exception {\r\n\t\thttp.oauth2Login();\r\n\t\tfinal var logoutSuccessHandler = new OidcClientInitiatedLogoutSuccessHandler(clientRegistrationRepository);\r\n\t\tlogoutSuccessHandler.setPostLogoutRedirectUri(&quot;{baseUrl}&quot;);\r\n\t\thttp.logout(logout -&gt; logout.logoutSuccessHandler(logoutSuccessHandler));\r\n\t\thttp.cors().disable();\r\n\t\t// sessions are required (enabled by default)\r\n\t\t// CSRF protection is required (enabled by default) because security is based on sessions\r\n\t\thttp.authorizeHttpRequests().requestMatchers(&quot;/login/**&quot;, &quot;/oauth2/**&quot;).permitAll() // this is required for unauthenticated users to login\r\n\t\t\t\t.anyRequest().authenticated();\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Controller\r\n\t@RequestMapping\r\n\tpublic static class UiController {\r\n\t\t@GetMapping(&quot;/&quot;)\r\n\t\tpublic RedirectView getIndex() throws URISyntaxException {\r\n\t\t\treturn new RedirectView(&quot;/ui/greet&quot;);\r\n\t\t}\r\n\r\n\t\t@GetMapping(&quot;/ui/greet&quot;)\r\n\t\tpublic String getGreeting(Authentication auth, Model model) throws URISyntaxException {\r\n\t\t\tmodel.addAttribute(&quot;message&quot;, &quot;Hello %s!&quot;.formatted(auth.getName()));\r\n\t\t\treturn &quot;greet&quot;;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n```yaml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          keycloak-realm-id:\r\n            issuer-uri: http://keycloak-url/realms/realm-id\r\n        registration:\r\n          keycloak-confidential-user:\r\n            authorization-grant-type: authorization_code\r\n            client-name: a local Keycloak instance\r\n            client-id: client-ui\r\n            client-secret: ${keycloak-secret}\r\n            provider: keycloak-realm-id\r\n            scope: openid,profile,email,offline_access\r\n```\r\n`/src/main/resources/templates/greet.html`:\r\n```html\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n\r\n&lt;head&gt;\r\n\t&lt;title&gt;Greetings!&lt;/title&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\t&lt;h1 th:utext=&quot;${message}&quot;&gt;..!..&lt;/h1&gt;\r\n&lt;/body&gt;\r\n```\r\n\r\n## Combining `oauth2Login` and `oauth2ResourceServer`\r\n**If your app exposes both a REST API to be consumed by an OAuth2 client and some other resources to be queried by a browser (without the help of an OAuth2 client lib for a framework like Angular, React or Vue), and only in that case**, define the two different filter chains above and add a `securityMatcher` to the first in order to limit it to the routes it should secure.\r\n\r\nIn the samples provided above, the security filter-chain with the lowest order is the resource server one. Adding something like `http.securityMatcher(&quot;/api/**&quot;);` would do the trick: all other routes will be secured with the client filter-chain which is tried after and will intercept all requests that were not already intercepted by the resource server filter chain.\r\n\r\n[Complete tutorial][4]. \r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/servlet-resource-server\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/servlet-client\r\n  [4]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui","title":"ClassNotFoundException: org.springframework.security.oauth2.server.resource.web.BearerTokenResolver","body":"<p>First, you should decide if your app is primarily an OAuth2 client with login or an OAuth2 resource server. Here you are mixing client with login (registration with <code>authorization_code</code> flow) and resource server configuration in the same security filter chain. This is something you should not be doing. Security mechanisms are too different:</p>\n<ul>\n<li><code>oauth2Login</code> (<code>authorization_code</code> flow) relies on sessions, requires CSRF protection and you usually expect <code>302 redirect to login</code> to unauthorized requests</li>\n<li><code>oauth2ResourceServer</code> relies on access tokens, can be stateless, without CSRF protection and should respond with <code>401 unauthorized</code></li>\n</ul>\n<h2><code>oauth2resourceServer</code> (REST API)</h2>\n<p><a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/servlet-resource-server\" rel=\"nofollow noreferrer\">Complete tutorial</a>.</p>\n<p>Resource servers don't care about login nor OAuth2 flows which are client concerns. It only cares if a request is authorized (has a valid access token), if this token should be introspected or decoded, and if it should grant access to the requested resources based on the token claims.</p>\n<p>Use Postman or any OAuth2 client which can authorize its requests and send any type of request (not just GET, but also POST, PUT and DELETE) to try your running API.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class ResourceServerMinimalApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ResourceServerMinimalApplication.class, args);\n    }\n\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    @Bean\n    SecurityFilterChain resourceServerSecurityFilterChain(\n            HttpSecurity http,\n            @Value(&quot;${resource-server.cors.allowed-origins:}#{T(java.util.Collections).emptyList()}&quot;) List&lt;String&gt; allowedOrigins)\n            throws Exception {\n        http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt());\n        http.sessionManagement(sm -&gt; sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n        http.csrf(csrf -&gt; csrf.disable());\n        http.exceptionHandling(handeling -&gt; handeling.authenticationEntryPoint((request, response, authException) -&gt; {\n            response.addHeader(HttpHeaders.WWW_AUTHENTICATE, &quot;Basic realm=\\&quot;Restricted Content\\&quot;&quot;);\n            response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());\n        }));\n        http.authorizeHttpRequests().anyRequest().authenticated();\n        http.cors(cors -&gt; {\n            if (allowedOrigins.isEmpty()) {\n                cors.disable();\n            } else {\n                cors.configurationSource(corsConfig(allowedOrigins));\n            }\n        });\n        return http.build();\n    }\n\n    CorsConfigurationSource corsConfig(List&lt;String&gt; allowedOrigins) {\n        final var source = new UrlBasedCorsConfigurationSource();\n\n        final var configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(allowedOrigins);\n        configuration.setAllowedMethods(List.of(&quot;*&quot;));\n        configuration.setAllowedHeaders(List.of(&quot;*&quot;));\n        configuration.setExposedHeaders(List.of(&quot;*&quot;));\n\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n    @RestController\n    @RequestMapping(&quot;/api/v1&quot;)\n    public static class GreetingController {\n        @GetMapping(&quot;/greet&quot;)\n        public ResponseEntity&lt;GreetingDto&gt; getGreeting(Authentication auth) {\n            return ResponseEntity.ok(new GreetingDto(&quot;Hello %s!&quot;.formatted(auth.getName())));\n        }\n\n        static record GreetingDto(String message) {\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: http://keycloak-url/realms/realm-id\n\nresource-server:\n  cors:\n    allowed-origins:\n    - http://localhost:4200\n</code></pre>\n<h2><code>oauth2Login</code></h2>\n<p>Client using authorization_code flow (gateway configured with <code>TokenRelay</code> filter or app with server-side rendered templates like Thymeleaf)\n<a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/servlet-client\" rel=\"nofollow noreferrer\">Complete tutorial</a>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class ClientMinimalApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ClientMinimalApplication.class, args);\n    }\n\n    @Order(Ordered.HIGHEST_PRECEDENCE + 1)\n    @Bean\n    SecurityFilterChain clientSecurityFilterChain(HttpSecurity http, ClientRegistrationRepository clientRegistrationRepository) throws Exception {\n        http.oauth2Login();\n        final var logoutSuccessHandler = new OidcClientInitiatedLogoutSuccessHandler(clientRegistrationRepository);\n        logoutSuccessHandler.setPostLogoutRedirectUri(&quot;{baseUrl}&quot;);\n        http.logout(logout -&gt; logout.logoutSuccessHandler(logoutSuccessHandler));\n        http.cors().disable();\n        // sessions are required (enabled by default)\n        // CSRF protection is required (enabled by default) because security is based on sessions\n        http.authorizeHttpRequests().requestMatchers(&quot;/login/**&quot;, &quot;/oauth2/**&quot;).permitAll() // this is required for unauthenticated users to login\n                .anyRequest().authenticated();\n        return http.build();\n    }\n\n    @Controller\n    @RequestMapping\n    public static class UiController {\n        @GetMapping(&quot;/&quot;)\n        public RedirectView getIndex() throws URISyntaxException {\n            return new RedirectView(&quot;/ui/greet&quot;);\n        }\n\n        @GetMapping(&quot;/ui/greet&quot;)\n        public String getGreeting(Authentication auth, Model model) throws URISyntaxException {\n            model.addAttribute(&quot;message&quot;, &quot;Hello %s!&quot;.formatted(auth.getName()));\n            return &quot;greet&quot;;\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  security:\n    oauth2:\n      client:\n        provider:\n          keycloak-realm-id:\n            issuer-uri: http://keycloak-url/realms/realm-id\n        registration:\n          keycloak-confidential-user:\n            authorization-grant-type: authorization_code\n            client-name: a local Keycloak instance\n            client-id: client-ui\n            client-secret: ${keycloak-secret}\n            provider: keycloak-realm-id\n            scope: openid,profile,email,offline_access\n</code></pre>\n<p><code>/src/main/resources/templates/greet.html</code>:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE HTML&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n\n&lt;head&gt;\n    &lt;title&gt;Greetings!&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;h1 th:utext=&quot;${message}&quot;&gt;..!..&lt;/h1&gt;\n&lt;/body&gt;\n</code></pre>\n<h2>Combining <code>oauth2Login</code> and <code>oauth2ResourceServer</code></h2>\n<p><strong>If your app exposes both a REST API to be consumed by an OAuth2 client and some other resources to be queried by a browser (without the help of an OAuth2 client lib for a framework like Angular, React or Vue), and only in that case</strong>, define the two different filter chains above and add a <code>securityMatcher</code> to the first in order to limit it to the routes it should secure.</p>\n<p>In the samples provided above, the security filter-chain with the lowest order is the resource server one. Adding something like <code>http.securityMatcher(&quot;/api/**&quot;);</code> would do the trick: all other routes will be secured with the client filter-chain which is tried after and will intercept all requests that were not already intercepted by the resource server filter chain.</p>\n<p><a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">Complete tutorial</a>.</p>\n"}],"owner":{"account_id":11976502,"reputation":420,"user_id":14686302,"display_name":"kernel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7248,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1702037779,"creation_date":1672224125,"question_id":74939220,"body_markdown":"I am getting related error during validation using Spring Security oauth2 vs Keycloak.\r\nI don&#39;t think it&#39;s missing from my dependencies.\r\n\r\n**Error**\r\n\r\n        org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setFilterChains&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;filterChain&#39; defined in class path resource [com/framework/security/SecurityConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;filterChain&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver\r\n        \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-5.3.23.jar:5.3.23]\r\n        \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.23.jar:5.3.23]\r\n        \tat \r\n        Caused by: java.lang.ClassNotFoundException: org.springframework.security.oauth2.server.resource.web.BearerTokenResolver\r\n        \tat jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[?:?]\r\n\r\n\r\n**My Security class**\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    \r\n    \t@Bean\r\n    \tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \t\thttp.authorizeRequests().antMatchers(&quot;/login/**&quot;).hasRole(&quot;role-name&quot;).anyRequest().authenticated().and().oauth2ResourceServer().jwt();\r\n    \t\treturn http.build();\r\n    \t}\r\n    }\r\n\r\n**pom.xml**\r\n\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\n\r\n**application.yml**\r\n  \r\n\r\n    security:\r\n        oauth2:\r\n          resource-server:\r\n            jwt:\r\n              issuer-uri: http://keycloak-url/realms/realm-id\r\n              jwk-set-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/certs\r\n          client:\r\n            registration:\r\n              client-ui:\r\n                provider: keycloak\r\n                client-id: client-ui\r\n                client-secret: abcdefgh\r\n                authorization-grant-type: authorization_code\r\n                scope: openid\r\n            provider:\r\n              client-ui:\r\n                authorization-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/auth\r\n                token-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/token\r\n                user-info-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/userinfo\r\n                jwk-set-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/certs\r\n                user-name-attribute: preferred_username\r\n\r\nI tried to make many edits but I couldn&#39;t find the problem. How can i solve it.","title":"ClassNotFoundException: org.springframework.security.oauth2.server.resource.web.BearerTokenResolver","body":"<p>I am getting related error during validation using Spring Security oauth2 vs Keycloak.\nI don't think it's missing from my dependencies.</p>\n<p><strong>Error</strong></p>\n<pre><code>    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'filterChain' defined in class path resource [com/framework/security/SecurityConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'filterChain' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-5.3.23.jar:5.3.23]\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.23.jar:5.3.23]\n        at \n    Caused by: java.lang.ClassNotFoundException: org.springframework.security.oauth2.server.resource.web.BearerTokenResolver\n        at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[?:?]\n</code></pre>\n<p><strong>My Security class</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeRequests().antMatchers(&quot;/login/**&quot;).hasRole(&quot;role-name&quot;).anyRequest().authenticated().and().oauth2ResourceServer().jwt();\n        return http.build();\n    }\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p><strong>application.yml</strong></p>\n<pre><code>security:\n    oauth2:\n      resource-server:\n        jwt:\n          issuer-uri: http://keycloak-url/realms/realm-id\n          jwk-set-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/certs\n      client:\n        registration:\n          client-ui:\n            provider: keycloak\n            client-id: client-ui\n            client-secret: abcdefgh\n            authorization-grant-type: authorization_code\n            scope: openid\n        provider:\n          client-ui:\n            authorization-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/auth\n            token-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/token\n            user-info-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/userinfo\n            jwk-set-uri: http://keycloak-url/realms/realm-id/protocol/openid-connect/certs\n            user-name-attribute: preferred_username\n</code></pre>\n<p>I tried to make many edits but I couldn't find the problem. How can i solve it.</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":3154289,"reputation":812,"user_id":2667005,"accept_rate":78,"display_name":"Soosh"},"score":0,"creation_date":1392217248,"post_id":21731343,"comment_id":32864558,"body_markdown":"what is your database? can you execute the query directly?","body":"what is your database? can you execute the query directly?"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1392217465,"post_id":21731343,"comment_id":32864729,"body_markdown":"Did you check in the database whether the column actually allows `NULL`? Also, please check whether the field in entity is annotated with `@Column(nullable=true)`?","body":"Did you check in the database whether the column actually allows <code>NULL</code>? Also, please check whether the field in entity is annotated with <code>@Column(nullable=true)</code>?"},{"owner":{"account_id":2583329,"reputation":1846,"user_id":2239537,"accept_rate":100,"display_name":"Alex Kartishev"},"score":1,"creation_date":1392217468,"post_id":21731343,"comment_id":32864731,"body_markdown":"**PostgreSQL 9.2.** Yes, I can do it in such a way directly: `insert into table_name (value_one, value_two, value_three) values (&#39;test&#39;, &#39;test&#39;, NULL);`","body":"<b>PostgreSQL 9.2.</b> Yes, I can do it in such a way directly: <code>insert into table_name (value_one, value_two, value_three) values (&#39;test&#39;, &#39;test&#39;, NULL);</code>"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1392217790,"post_id":21731343,"comment_id":32864989,"body_markdown":"Also, can you try it with `setTimestamp()` instead of `setParameter()`?","body":"Also, can you try it with <code>setTimestamp()</code> instead of <code>setParameter()</code>?"},{"owner":{"account_id":2583329,"reputation":1846,"user_id":2239537,"accept_rate":100,"display_name":"Alex Kartishev"},"score":0,"creation_date":1392218067,"post_id":21731343,"comment_id":32865196,"body_markdown":"Unfortunately, `javax.persistence.Query` doesn&#39;t have such a method. May be it is possible to cast it to `org.hibernate.Query`, that has such a method?","body":"Unfortunately, <code>javax.persistence.Query</code> doesn&#39;t have such a method. May be it is possible to cast it to <code>org.hibernate.Query</code>, that has such a method?"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1392218363,"post_id":21731343,"comment_id":32865422,"body_markdown":"@AlexKartishev How have you done the mapping from `Date` to postgresql `Timestamp` .","body":"@AlexKartishev How have you done the mapping from <code>Date</code> to postgresql <code>Timestamp</code> ."},{"owner":{"account_id":2583329,"reputation":1846,"user_id":2239537,"accept_rate":100,"display_name":"Alex Kartishev"},"score":0,"creation_date":1392218726,"post_id":21731343,"comment_id":32865683,"body_markdown":"No mapping. `value3` is `java.util.Date` object and if it is not null it is persisted without any problems by JPA provider (Hibernate). No additional mapping required here, as it is native SQL query.","body":"No mapping. <code>value3</code> is <code>java.util.Date</code> object and if it is not null it is persisted without any problems by JPA provider (Hibernate). No additional mapping required here, as it is native SQL query."}],"answers":[{"comments":[{"owner":{"account_id":3248402,"reputation":2386,"user_id":2739334,"accept_rate":64,"display_name":"Pwnstar"},"score":5,"creation_date":1515511078,"post_id":24750785,"comment_id":83322019,"body_markdown":"Cannot resolve method &#39;setParameter(java.lang.String, java.lang.Long, org.hibernate.type.LongType)&#39;","body":"Cannot resolve method &#39;setParameter(java.lang.String, java.lang.Long, org.hibernate.type.LongType)&#39;"},{"owner":{"account_id":15058913,"reputation":61,"user_id":10868351,"display_name":"Recigio Poffo"},"score":1,"creation_date":1554402781,"post_id":24750785,"comment_id":97749841,"body_markdown":"Works with dates too -&gt; ..setParameter(&quot;date&quot;, date, TemporalType.TIMESTAMP)","body":"Works with dates too -&gt; ..setParameter(&quot;date&quot;, date, TemporalType.TIMESTAMP)"}],"tags":[],"owner":{"account_id":243799,"reputation":9073,"user_id":516188,"accept_rate":94,"display_name":"Emmanuel Touzery"},"comment_count":2,"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1405403762,"creation_date":1405403762,"answer_id":24750785,"question_id":21731343,"body_markdown":"You are using postgresql (already the stack is telling that), and likely Hibernate, and almost certainly hitting this problem: https://stackoverflow.com/questions/8211195/postgresql-jdbc-null-string-taken-as-a-bytea\r\n\r\nI used this particular solution:\r\nhttps://stackoverflow.com/a/23501509/516188\r\n\r\nSo that means escaping to the Hibernate API so you can give the type of the expression.\r\n\r\nIn my case it was a nullable Short so I used:\r\n\r\n`.setParameter(&quot;short&quot;, shortValue, ShortType.INSTANCE);`\r\n\r\nshortValue being of type `Short`.","title":"JPA Native Query set null parameter","body":"<p>You are using postgresql (already the stack is telling that), and likely Hibernate, and almost certainly hitting this problem: <a href=\"https://stackoverflow.com/questions/8211195/postgresql-jdbc-null-string-taken-as-a-bytea\">PostgreSQL JDBC Null String taken as a bytea</a></p>\n\n<p>I used this particular solution:\n<a href=\"https://stackoverflow.com/a/23501509/516188\">https://stackoverflow.com/a/23501509/516188</a></p>\n\n<p>So that means escaping to the Hibernate API so you can give the type of the expression.</p>\n\n<p>In my case it was a nullable Short so I used:</p>\n\n<p><code>.setParameter(\"short\", shortValue, ShortType.INSTANCE);</code></p>\n\n<p>shortValue being of type <code>Short</code>.</p>\n"},{"tags":[],"owner":{"account_id":5046651,"reputation":303,"user_id":4052424,"accept_rate":75,"display_name":"Matteo"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1464687053,"creation_date":1464636652,"answer_id":37532536,"question_id":21731343,"body_markdown":"if you are not using Hibernate, but you are using EclipseLink you can use the query Hint:\r\nhttps://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Query_Hints\r\n\r\nExample\r\nquery:\r\n\r\n    String insert = &quot;INSERT INTO mytable VALUES ( ?, ?, ?, ?)&quot;;\r\n\r\n    em = getEntityManager();\r\n    em.getTransaction().begin();\r\n    Query u = em.createNativeQuery(insert);\r\n    u.setHint(QueryHints.BIND_PARAMETERS, HintValues.FALSE);//&lt;--the hint\r\n    u.setParameter(1, &quot;value1&quot;);\r\n    u.setParameter(2, &quot;value2&quot;);\r\n    u.setParameter(4, &quot;value4&quot;);//just skipped the null element\r\n    u.executeUpdate();\r\n    em.getTransaction().commit();\r\n\r\nand the result will be an insertion: \r\n\r\n    mytable\r\n    column1    column2    column3   column4\r\n    value1     value2               value4\r\n\r\nof course if &quot;column3&quot; is nullable in the db...\r\n\r\nI don&#39;t know if works also with Hibernate, but it could. I used PostgreSQL for my test.","title":"JPA Native Query set null parameter","body":"<p>if you are not using Hibernate, but you are using EclipseLink you can use the query Hint:\n<a href=\"https://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Query_Hints\" rel=\"noreferrer\">https://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Query_Hints</a></p>\n\n<p>Example\nquery:</p>\n\n<pre><code>String insert = \"INSERT INTO mytable VALUES ( ?, ?, ?, ?)\";\n\nem = getEntityManager();\nem.getTransaction().begin();\nQuery u = em.createNativeQuery(insert);\nu.setHint(QueryHints.BIND_PARAMETERS, HintValues.FALSE);//&lt;--the hint\nu.setParameter(1, \"value1\");\nu.setParameter(2, \"value2\");\nu.setParameter(4, \"value4\");//just skipped the null element\nu.executeUpdate();\nem.getTransaction().commit();\n</code></pre>\n\n<p>and the result will be an insertion: </p>\n\n<pre><code>mytable\ncolumn1    column2    column3   column4\nvalue1     value2               value4\n</code></pre>\n\n<p>of course if \"column3\" is nullable in the db...</p>\n\n<p>I don't know if works also with Hibernate, but it could. I used PostgreSQL for my test.</p>\n"},{"comments":[{"owner":{"account_id":5145448,"reputation":574,"user_id":4121585,"accept_rate":20,"display_name":"Vishal Patel"},"score":1,"creation_date":1594229431,"post_id":54342772,"comment_id":111055999,"body_markdown":"Thanks. this helped me for Date field. \n\n`query.setParameter(6, new TypedParameterValue(StandardBasicTypes.CALENDAR_DATE, null));`","body":"Thanks. this helped me for Date field.   <code>query.setParameter(6, new TypedParameterValue(StandardBasicTypes.CALENDAR_DATE, null));</code>"},{"owner":{"account_id":4956545,"reputation":1065,"user_id":3988964,"accept_rate":70,"display_name":"Prakhar"},"score":0,"creation_date":1672652149,"post_id":54342772,"comment_id":132319085,"body_markdown":"This worked for me when the column type was Number","body":"This worked for me when the column type was Number"}],"tags":[],"owner":{"account_id":15189328,"reputation":181,"user_id":10960375,"display_name":"J. Doe"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1548321868,"creation_date":1548320451,"answer_id":54342772,"question_id":21731343,"body_markdown":"I have faced the same issue when use `EntityManager.createNamedQuery`(guess the same issue with createNativeQuery).\r\n\r\nIn case you are going to pass `nullable` parameter to Query then use TypedParameterValue which allows to pass the type.\r\n\r\nFor instance:\r\n\r\n    setParameter(&quot;paramName&quot;, new TypedParameterValue(StandardBasicTypes.LONG, paramValue));\r\n\r\n \r\nHere you explicitly set the type of passed value and when you pass null value as processor know the exact type.","title":"JPA Native Query set null parameter","body":"<p>I have faced the same issue when use <code>EntityManager.createNamedQuery</code>(guess the same issue with createNativeQuery).</p>\n\n<p>In case you are going to pass <code>nullable</code> parameter to Query then use TypedParameterValue which allows to pass the type.</p>\n\n<p>For instance:</p>\n\n<pre><code>setParameter(\"paramName\", new TypedParameterValue(StandardBasicTypes.LONG, paramValue));\n</code></pre>\n\n<p>Here you explicitly set the type of passed value and when you pass null value as processor know the exact type.</p>\n"},{"tags":[],"owner":{"account_id":15246832,"reputation":21,"user_id":11001483,"display_name":"Luigi Masiero"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549033287,"creation_date":1549031365,"answer_id":54481524,"question_id":21731343,"body_markdown":"In my case, using Oracle 12 and jboss 7.3, I solved using an empty String as param value. I don&#39;t understand why, but it works. This is my code:\r\n\r\n    String sql = &quot;insert into customer (id,name,age) values (?1,?2,?3);\r\n    em = getEntityManager();\r\n    Query query = em.createNativeQuery(sql);\r\n    query.setParameter(1, getId());\r\n    query.setParameter(2, getName());\r\n    if (getAge() != null) {//getAge() return BigDecimal and map a NUMBER column type\r\n        query.setParameter(3, getAge());\r\n    } else {\r\n       query.setParameter(3, &quot;&quot;);\r\n    }","title":"JPA Native Query set null parameter","body":"<p>In my case, using Oracle 12 and jboss 7.3, I solved using an empty String as param value. I don't understand why, but it works. This is my code:</p>\n\n<pre><code>String sql = \"insert into customer (id,name,age) values (?1,?2,?3);\nem = getEntityManager();\nQuery query = em.createNativeQuery(sql);\nquery.setParameter(1, getId());\nquery.setParameter(2, getName());\nif (getAge() != null) {//getAge() return BigDecimal and map a NUMBER column type\n    query.setParameter(3, getAge());\n} else {\n   query.setParameter(3, \"\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18034747,"reputation":21,"user_id":13108438,"display_name":"kgr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702037724,"creation_date":1702032733,"answer_id":77626045,"question_id":21731343,"body_markdown":"I had similar issue with Double nullable parameter when using javax.persistence.Query native query against Postgresql \r\n\r\nThe simplest solution I found:\r\n\r\n    Query q = em.createNativeQuery(&quot;insert into table_name (value_one, value_two, value_three) values (?,?,? ::decimal)&quot;);\r\n    q.setParameter(1, value1);\r\n    q.setParameter(2, value2);\r\n    q.setParameter(3, value3);\r\n    q.executeUpdate();\r\n\r\nNote the type casting inside *insert* statement.\r\n\r\nAlternative option:\r\n\r\n    Query q = em.createNativeQuery(&quot;insert into table_name (value_one, value_two, value_three) values (?,?,cast(cast(? as text) as decimal))&quot;);\r\n    q.setParameter(1, value1);\r\n    q.setParameter(2, value2);\r\n    q.setParameter(3, value3);\r\n    q.executeUpdate();\r\nSee: https://stackoverflow.com/a/62321877/13108438","title":"JPA Native Query set null parameter","body":"<p>I had similar issue with Double nullable parameter when using javax.persistence.Query native query against Postgresql</p>\n<p>The simplest solution I found:</p>\n<pre><code>Query q = em.createNativeQuery(&quot;insert into table_name (value_one, value_two, value_three) values (?,?,? ::decimal)&quot;);\nq.setParameter(1, value1);\nq.setParameter(2, value2);\nq.setParameter(3, value3);\nq.executeUpdate();\n</code></pre>\n<p>Note the type casting inside <em>insert</em> statement.</p>\n<p>Alternative option:</p>\n<pre><code>Query q = em.createNativeQuery(&quot;insert into table_name (value_one, value_two, value_three) values (?,?,cast(cast(? as text) as decimal))&quot;);\nq.setParameter(1, value1);\nq.setParameter(2, value2);\nq.setParameter(3, value3);\nq.executeUpdate();\n</code></pre>\n<p>See: <a href=\"https://stackoverflow.com/a/62321877/13108438\">https://stackoverflow.com/a/62321877/13108438</a></p>\n"}],"owner":{"account_id":2583329,"reputation":1846,"user_id":2239537,"accept_rate":100,"display_name":"Alex Kartishev"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34906,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":24750785,"answer_count":5,"score":19,"last_activity_date":1702037724,"creation_date":1392216870,"question_id":21731343,"body_markdown":"Here is my code part:\r\n\r\n    Query q = em.createNativeQuery(&quot;insert into table_name (value_one, value_two, value_three) values (?,?,?)&quot;);\r\n    q.setParameter(1, value1);\r\n    q.setParameter(2, value2);\r\n    q.setParameter(3, value3);\r\n    q.executeUpdate();\r\n\r\n\r\n\r\n`value3` sometimes can be null (Date class object). And if it is null the following exception is thrown:\r\n\r\n\r\n\r\n      Caused by: org.postgresql.util.PSQLException: ERROR: column &quot;value_three&quot; is of type timestamp without time zone but expression is of type bytea\r\n      Hint: You will need to rewrite or cast the expression.\r\n      Position: 88\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:500)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:334)\r\n    \tat org.hibernate.engine.query.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:189)\r\n    \t... 11 more\r\n\r\nHow is it possible to get this code working and to persist null value into database?","title":"JPA Native Query set null parameter","body":"<p>Here is my code part:</p>\n\n<pre><code>Query q = em.createNativeQuery(\"insert into table_name (value_one, value_two, value_three) values (?,?,?)\");\nq.setParameter(1, value1);\nq.setParameter(2, value2);\nq.setParameter(3, value3);\nq.executeUpdate();\n</code></pre>\n\n<p><code>value3</code> sometimes can be null (Date class object). And if it is null the following exception is thrown:</p>\n\n<pre><code>  Caused by: org.postgresql.util.PSQLException: ERROR: column \"value_three\" is of type timestamp without time zone but expression is of type bytea\n  Hint: You will need to rewrite or cast the expression.\n  Position: 88\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:500)\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:334)\n    at org.hibernate.engine.query.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:189)\n    ... 11 more\n</code></pre>\n\n<p>How is it possible to get this code working and to persist null value into database?</p>\n"},{"tags":["java","spring"],"owner":{"account_id":16423250,"reputation":219,"user_id":11863934,"display_name":"fsk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702037387,"creation_date":1702037387,"question_id":77626444,"body_markdown":"While a user share a story, i need to find how many different people seen this story. What can i use data structure algorithm.? \r\n\r\nMy tech stack\r\n- Mobile: React Native\r\n- Back end: Spring Boot 3.2.0 , java 21 , GraalVM","title":"How Instagram Story Seen Count works.?","body":"<p>While a user share a story, i need to find how many different people seen this story. What can i use data structure algorithm.?</p>\n<p>My tech stack</p>\n<ul>\n<li>Mobile: React Native</li>\n<li>Back end: Spring Boot 3.2.0 , java 21 , GraalVM</li>\n</ul>\n"},{"tags":["java","docker-compose","content-management-system"],"owner":{"account_id":1281510,"reputation":39,"user_id":1235522,"display_name":"java noob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702037049,"creation_date":1702035271,"question_id":77626271,"body_markdown":"Hi I have just started working on bright spot cms I tried running the training app by running the docker compose file present in the project \r\n\r\n[https://github.com/perfectsense/training/blob/develop/docker-compose.yml](https://stackoverflow.com)\r\nThe project starts :\r\n\r\n    &gt; `$ docker-compose up -d  #  create the Brightspot Docker container\r\n    &gt; Container training-develop-greenmail-1  Running Container\r\n    &gt; training-develop-tomcat-1  Running Container training-develop-apache-1\r\n    &gt; Running Container training-develop-mysql-1  Starting Container\r\n    &gt; training-develop-solr-1  Starting Container training-develop-solr-1 \r\n    &gt; Started Container training-develop-mysql-1  Started `\r\n\r\nafter that as mentioned in the read.me file \r\nI tried accessing localhost/cms\r\n\r\nI keep getting error [![enter image description here](https://i.stack.imgur.com/KiA7t.png)](https://i.stack.imgur.com/KiA7t.png)\r\n\r\nI tried accessing the tomcat logs \r\nusing the command : I tried accessing the tomcat logs \r\nusing the command : docker-compose logs -f  # tail the log\r\n\r\nI keep getting error message :\r\n\r\n`training-develop-apache-1     | 172.25.0.1 &quot;-&quot; &quot;-&quot; - [08/Dec/2023:06:21:25 -0500] &quot;GET /cms HTTP/1.1&quot; 404 3813 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot; 682 localhost\r\ntraining-develop-apache-1     | 172.25.0.1 &quot;-&quot; &quot;-&quot; - [08/Dec/2023:06:21:31 -0500] &quot;GET /_rtc HTTP/1.1&quot; 404 2334 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot; 682 localhost\r\n\r\n\r\n\r\ni was expecting the screen to show me landing page of CMS instead I keep getting 404 error page","title":"Bright Spot Training App Landing page giving 404 error","body":"<p>Hi I have just started working on bright spot cms I tried running the training app by running the docker compose file present in the project</p>\n<p><a href=\"https://stackoverflow.com\">https://github.com/perfectsense/training/blob/develop/docker-compose.yml</a>\nThe project starts :</p>\n<pre><code>&gt; `$ docker-compose up -d  #  create the Brightspot Docker container\n&gt; Container training-develop-greenmail-1  Running Container\n&gt; training-develop-tomcat-1  Running Container training-develop-apache-1\n&gt; Running Container training-develop-mysql-1  Starting Container\n&gt; training-develop-solr-1  Starting Container training-develop-solr-1 \n&gt; Started Container training-develop-mysql-1  Started `\n</code></pre>\n<p>after that as mentioned in the read.me file\nI tried accessing localhost/cms</p>\n<p>I keep getting error <a href=\"https://i.stack.imgur.com/KiA7t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KiA7t.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried accessing the tomcat logs\nusing the command : I tried accessing the tomcat logs\nusing the command : docker-compose logs -f  # tail the log</p>\n<p>I keep getting error message :</p>\n<p>`training-develop-apache-1     | 172.25.0.1 &quot;-&quot; &quot;-&quot; - [08/Dec/2023:06:21:25 -0500] &quot;GET /cms HTTP/1.1&quot; 404 3813 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot; 682 localhost\ntraining-develop-apache-1     | 172.25.0.1 &quot;-&quot; &quot;-&quot; - [08/Dec/2023:06:21:31 -0500] &quot;GET /_rtc HTTP/1.1&quot; 404 2334 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot; 682 localhost</p>\n<p>i was expecting the screen to show me landing page of CMS instead I keep getting 404 error page</p>\n"},{"tags":["java","swing","netbeans","jscrollpane"],"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1702035965,"post_id":77626294,"comment_id":136851266,"body_markdown":"The container that holds the `JScrollPane`. Set its layout manager to null. Then also add the Button to that container. Now you have to catch the container&#39;s resize() events, and reacting to that, you give the button and the JScrollPane their position and size. Alternative: You could probably go with adding components to the glass pane, but I personally have never tried that, so I cannot say. If the Button is hidden behind the pane, set the ZOrder","body":"The container that holds the <code>JScrollPane</code>. Set its layout manager to null. Then also add the Button to that container. Now you have to catch the container&#39;s resize() events, and reacting to that, you give the button and the JScrollPane their position and size. Alternative: You could probably go with adding components to the glass pane, but I personally have never tried that, so I cannot say. If the Button is hidden behind the pane, set the ZOrder"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1702036725,"post_id":77626294,"comment_id":136851383,"body_markdown":"No, never use a null layout. Please read MadProgrammer&#39;s answer to the duplicate question for better advice.","body":"No, never use a null layout. Please read MadProgrammer&#39;s answer to the duplicate question for better advice."}],"owner":{"account_id":30097277,"reputation":1,"user_id":23065243,"display_name":"Tejas Pidugu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702035903,"answer_count":0,"score":-1,"last_activity_date":1702036900,"creation_date":1702035584,"question_id":77626294,"body_markdown":"I&#39;m still pretty new to coding and I don&#39;t know if this is a stupid question. \r\nI&#39;m using NetBeans and have a jscrollpane with a jpanel inside it that uses miglayout. The whole panel gets populated with a bunch of buttons of different sizes. \r\n\r\nI want to have a button in the corner that stays there and is overlayed over the jscrollpane even as I scroll through it.\r\n\r\n[Something like this, where the button is overlayed on top](https://i.stack.imgur.com/aJTjC.jpg)\r\n\r\n\r\nI&#39;ve tried to look it up but i haven&#39;t really found any simple definitive answer.\r\n\r\nP.S. Let me know if I didn&#39;t follow question standards or something.\r\nThanks","title":"How to overlay a button on a jscrollpane?","body":"<p>I'm still pretty new to coding and I don't know if this is a stupid question.\nI'm using NetBeans and have a jscrollpane with a jpanel inside it that uses miglayout. The whole panel gets populated with a bunch of buttons of different sizes.</p>\n<p>I want to have a button in the corner that stays there and is overlayed over the jscrollpane even as I scroll through it.</p>\n<p><a href=\"https://i.stack.imgur.com/aJTjC.jpg\" rel=\"nofollow noreferrer\">Something like this, where the button is overlayed on top</a></p>\n<p>I've tried to look it up but i haven't really found any simple definitive answer.</p>\n<p>P.S. Let me know if I didn't follow question standards or something.\nThanks</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":3830298,"reputation":1803,"user_id":3176004,"accept_rate":18,"display_name":"virendrao"},"score":1,"creation_date":1424779839,"post_id":28695437,"comment_id":45681447,"body_markdown":"why you want to do that first of all?","body":"why you want to do that first of all?"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1424780125,"post_id":28695437,"comment_id":45681621,"body_markdown":"You&#39;ll hardly find a better approach, if you really want to test this particular requirement. Possibly you may let the timeout be configurable and use the minimum time for testing.","body":"You&#39;ll hardly find a better approach, if you really want to test this particular requirement. Possibly you may let the timeout be configurable and use the minimum time for testing."},{"owner":{"account_id":218057,"reputation":67738,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1424780216,"post_id":28695437,"comment_id":45681671,"body_markdown":"As is hinted above, one question is why does your other object behave like that? But putting that aside, this approach seems fine, although it&#39;s quite coarsely grained; 1000ms is significantly longer than 500ms,","body":"As is hinted above, one question is why does your other object behave like that? But putting that aside, this approach seems fine, although it&#39;s quite coarsely grained; 1000ms is significantly longer than 500ms,"},{"owner":{"account_id":5838834,"reputation":79,"user_id":4601076,"display_name":"Piero Nadello"},"score":1,"creation_date":1459934886,"post_id":28695437,"comment_id":60506812,"body_markdown":"What if I remove the implicit dependency with the system clock and replace with a &quot;stub-able&quot; clock and elapse the time instantly?","body":"What if I remove the implicit dependency with the system clock and replace with a &quot;stub-able&quot; clock and elapse the time instantly?"}],"answers":[{"comments":[{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1424780799,"post_id":28695601,"comment_id":45681974,"body_markdown":"Given the current mocking frameworks, this seems like overengineering. Simply providing a protected method would be enough to mock it out for testing.","body":"Given the current mocking frameworks, this seems like overengineering. Simply providing a protected method would be enough to mock it out for testing."},{"owner":{"account_id":5668327,"reputation":8372,"user_id":4483840,"accept_rate":75,"display_name":"Zielu"},"score":0,"creation_date":1424781866,"post_id":28695601,"comment_id":45682595,"body_markdown":"It is personal taste, but I dont like partial mocking, as mocking methods of object being tested feels wrong and suggest that such logic could be delegated somewhere else == be overengineered.","body":"It is personal taste, but I dont like partial mocking, as mocking methods of object being tested feels wrong and suggest that such logic could be delegated somewhere else == be overengineered."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1424782253,"post_id":28695601,"comment_id":45682824,"body_markdown":"I think testing should be approached from a pragmatic standpoint: give the testing concern a share of the complexity budget, but do keep it at a bare minimum. So if there is opportunity to mock out a strategy method inside the tested object, by all means grab it. Keep in mind that complexity itself gives rise to maintenance and correctness issues, the very thing the tests are there to protect you from.","body":"I think testing should be approached from a pragmatic standpoint: give the testing concern a share of the complexity budget, but do keep it at a bare minimum. So if there is opportunity to mock out a strategy method inside the tested object, by all means grab it. Keep in mind that complexity itself gives rise to maintenance and correctness issues, the very thing the tests are there to protect you from."}],"tags":[],"owner":{"account_id":5668327,"reputation":8372,"user_id":4483840,"accept_rate":75,"display_name":"Zielu"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424780241,"creation_date":1424780241,"answer_id":28695601,"question_id":28695437,"body_markdown":"Regardless of what is the point of it and that you are asking for trouble .... \r\n\r\nWhat if you decide that timeout needs to occure after 60minutes, will you wait for your test one hour? \r\nThe timeout should be parameter of your MyObject so you can set it to some small value for testing (or even 0 to force alwyas a timeout when testing).\r\n\r\nSecondly, if you want to really have testable time-related functions, the time and timeout should be handled separately from your main logic (MyObject class). You could for example have Timekeeper class with mehtod canCallMethod() which is invoked by your MyObject class (and it is set upon its construction). In that way in your test, you initlize your MyObject class with your own Timekeeper implementation that returns true or false and verify that your MyObject class behaves as expected. \r\nMyObject can have default constructor that always uses the &#39;real&#39; timekeep so external world is not force to deal with Timekeeper internals.","title":"Thread.sleep in JUnit test case","body":"<p>Regardless of what is the point of it and that you are asking for trouble .... </p>\n\n<p>What if you decide that timeout needs to occure after 60minutes, will you wait for your test one hour? \nThe timeout should be parameter of your MyObject so you can set it to some small value for testing (or even 0 to force alwyas a timeout when testing).</p>\n\n<p>Secondly, if you want to really have testable time-related functions, the time and timeout should be handled separately from your main logic (MyObject class). You could for example have Timekeeper class with mehtod canCallMethod() which is invoked by your MyObject class (and it is set upon its construction). In that way in your test, you initlize your MyObject class with your own Timekeeper implementation that returns true or false and verify that your MyObject class behaves as expected. \nMyObject can have default constructor that always uses the 'real' timekeep so external world is not force to deal with Timekeeper internals.</p>\n"},{"comments":[{"owner":{"account_id":1295346,"reputation":4152,"user_id":1246547,"display_name":"Philzen"},"score":0,"creation_date":1702036893,"post_id":28695843,"comment_id":136851409,"body_markdown":"You can just drop `protected`, as package-private will suffice to access the method from the test.","body":"You can just drop <code>protected</code>, as package-private will suffice to access the method from the test."}],"tags":[],"owner":{"account_id":46475,"reputation":20349,"user_id":137369,"accept_rate":78,"display_name":"Thirler"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1702036843,"creation_date":1424780994,"answer_id":28695843,"question_id":28695437,"body_markdown":"There are two problems with using (real) time in test cases:\r\n\r\n1. It is never really deterministic. Especially when you are looking for high precision, testcases will succeed 95% of the time. But sometimes they fail, these are the hardest types of  failure to debug. Note that when using `Thread.sleep()` with in a multithreaded test case this is even more difficult.\r\n2. Test cases with sleeps take long to run, after a while this will make running your full testset cumbersome.\r\n\r\nIf you must, your way is acceptable. But there are other options:\r\n\r\nDon&#39;t use a real clock. Instead use a fake (mocked/stubbed) clock that you can control from your testcase:\r\n\r\n    @Test(expected = IllegalStateException.class)\r\n    public void testCallAfterTimeout() {\r\n        MyObject o= new MyObject();\r\n        // Example function that you could make\r\n        advanceClock(1000, TimeUnit.MILLISECONDS)\r\n        o.call();\r\n    }\r\n\r\nIn your object you have to inject a clock. `MyObject` could look like this:\r\n\r\n    class MyObject\r\n    {\r\n        \r\n         public MyObject()\r\n         {\r\n               this(new Clock());\r\n         }\r\n\r\n         // Protected so only the test case can access it\r\n         protected MyObject(Clock clock)\r\n         {\r\n               // Save clock as local variable, store creation time etc.\r\n         }\r\n    } \r\n\r\nIn Java 8 a mechanism for this is provided, see for instance [`LocalDate.now()`][1]. But you can also implement your own quite easily. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#now-java.time.Clock-\r\n","title":"Thread.sleep in JUnit test case","body":"<p>There are two problems with using (real) time in test cases:</p>\n<ol>\n<li>It is never really deterministic. Especially when you are looking for high precision, testcases will succeed 95% of the time. But sometimes they fail, these are the hardest types of  failure to debug. Note that when using <code>Thread.sleep()</code> with in a multithreaded test case this is even more difficult.</li>\n<li>Test cases with sleeps take long to run, after a while this will make running your full testset cumbersome.</li>\n</ol>\n<p>If you must, your way is acceptable. But there are other options:</p>\n<p>Don't use a real clock. Instead use a fake (mocked/stubbed) clock that you can control from your testcase:</p>\n<pre><code>@Test(expected = IllegalStateException.class)\npublic void testCallAfterTimeout() {\n    MyObject o= new MyObject();\n    // Example function that you could make\n    advanceClock(1000, TimeUnit.MILLISECONDS)\n    o.call();\n}\n</code></pre>\n<p>In your object you have to inject a clock. <code>MyObject</code> could look like this:</p>\n<pre><code>class MyObject\n{\n    \n     public MyObject()\n     {\n           this(new Clock());\n     }\n\n     // Protected so only the test case can access it\n     protected MyObject(Clock clock)\n     {\n           // Save clock as local variable, store creation time etc.\n     }\n} \n</code></pre>\n<p>In Java 8 a mechanism for this is provided, see for instance <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#now-java.time.Clock-\" rel=\"nofollow noreferrer\"><code>LocalDate.now()</code></a>. But you can also implement your own quite easily.</p>\n"}],"owner":{"account_id":5838834,"reputation":79,"user_id":4601076,"display_name":"Piero Nadello"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13817,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":28695843,"answer_count":2,"score":7,"last_activity_date":1702036843,"creation_date":1424779743,"question_id":28695437,"body_markdown":"I&#39;m writing a test case to test an object behaviour.\r\n\r\nWhen the object is instantiated it must allow the call of a method let say call() only if it has been called within 500 ms, otherwise it must throw an exception.\r\n\r\nI designed the Junit test case like this:\r\n\r\n\r\n    @Test(expected = IllegalStateException.class)\r\n\tpublic void testCallAfterTimeout() {\r\n        MyObject o= new MyObject();\r\n        //To ensure the timeout is occurred\r\n        Thread.sleep(1000);\r\n        o.call();\r\n\t}\r\n\r\nDo you think is a good practice or I should follow another approach?\r\n\r\nMany thanks\r\n\r\n","title":"Thread.sleep in JUnit test case","body":"<p>I'm writing a test case to test an object behaviour.</p>\n\n<p>When the object is instantiated it must allow the call of a method let say call() only if it has been called within 500 ms, otherwise it must throw an exception.</p>\n\n<p>I designed the Junit test case like this:</p>\n\n<pre><code>@Test(expected = IllegalStateException.class)\npublic void testCallAfterTimeout() {\n    MyObject o= new MyObject();\n    //To ensure the timeout is occurred\n    Thread.sleep(1000);\n    o.call();\n}\n</code></pre>\n\n<p>Do you think is a good practice or I should follow another approach?</p>\n\n<p>Many thanks</p>\n"},{"tags":["java","httpurlconnection"],"answers":[{"comments":[{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":3,"creation_date":1623249169,"post_id":25163132,"comment_id":120026067,"body_markdown":"Why do you call Patch non standard? It&#39;s very much part of the standard...","body":"Why do you call Patch non standard? It&#39;s very much part of the standard..."},{"owner":{"account_id":1565759,"reputation":516,"user_id":1454613,"accept_rate":78,"display_name":"Fulluphigh"},"score":0,"creation_date":1635971800,"post_id":25163132,"comment_id":123437504,"body_markdown":"This should be the answer, but with the non-standard statement removed","body":"This should be the answer, but with the non-standard statement removed"}],"tags":[],"owner":{"account_id":1437465,"reputation":6412,"user_id":1358536,"accept_rate":90,"display_name":"kavai77"},"comment_count":2,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1636056820,"creation_date":1407335579,"answer_id":25163132,"question_id":25163131,"body_markdown":"There is a Won&#39;t Fix bug in OpenJDK for this: https://bugs.openjdk.java.net/browse/JDK-7016595\r\n\r\nHowever, with Apache Http-Components Client 4.2+ this is possible. It has a custom networking implementation, thus using all standard HTTP methods like PATCH is possible. It even has a HttpPatch class supporting the patch method.\r\n\r\n    CloseableHttpClient httpClient = HttpClients.createDefault();\r\n    HttpPatch httpPatch = new HttpPatch(new URI(&quot;http://example.com&quot;));\r\n    CloseableHttpResponse response = httpClient.execute(httpPatch);\r\n\r\nMaven Coordinates:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n        &lt;version&gt;4.2+&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>There is a Won't Fix bug in OpenJDK for this: <a href=\"https://bugs.openjdk.java.net/browse/JDK-7016595\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-7016595</a></p>\n<p>However, with Apache Http-Components Client 4.2+ this is possible. It has a custom networking implementation, thus using all standard HTTP methods like PATCH is possible. It even has a HttpPatch class supporting the patch method.</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients.createDefault();\nHttpPatch httpPatch = new HttpPatch(new URI(&quot;http://example.com&quot;));\nCloseableHttpResponse response = httpClient.execute(httpPatch);\n</code></pre>\n<p>Maven Coordinates:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.2+&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":266368,"reputation":2118,"user_id":553903,"display_name":"Joseph Jaquinta"},"score":49,"creation_date":1446153557,"post_id":32503192,"comment_id":54638701,"body_markdown":"This only works if the receiving end supports it. It still sends a &quot;POST&quot; down the line.","body":"This only works if the receiving end supports it. It still sends a &quot;POST&quot; down the line."},{"owner":{"account_id":2526295,"reputation":868,"user_id":2195620,"accept_rate":29,"display_name":"Maxime T"},"score":3,"creation_date":1448021379,"post_id":32503192,"comment_id":55417850,"body_markdown":"If the receiver support it, then (to me) it is the cleanest way to proceed.","body":"If the receiver support it, then (to me) it is the cleanest way to proceed."},{"owner":{"account_id":2539750,"reputation":2180,"user_id":2205809,"display_name":"Andrew Kelly"},"score":5,"creation_date":1483107444,"post_id":32503192,"comment_id":69997107,"body_markdown":"This method works when using HttpUrlConnection to call the Firebase REST API.","body":"This method works when using HttpUrlConnection to call the Firebase REST API."},{"owner":{"account_id":73817,"reputation":19425,"user_id":212378,"accept_rate":57,"display_name":"Alexis Wilke"},"score":1,"creation_date":1504802173,"post_id":32503192,"comment_id":79165134,"body_markdown":"@DuanBressan the protocol should not be an issue as long as the server supports either or both (it should only accept connections to HTTPS though.)","body":"@DuanBressan the protocol should not be an issue as long as the server supports either or both (it should only accept connections to HTTPS though.)"},{"owner":{"account_id":3345181,"reputation":175,"user_id":2810471,"accept_rate":88,"display_name":"BiScOtTiNo"},"score":0,"creation_date":1511270372,"post_id":32503192,"comment_id":81781584,"body_markdown":"first line is enough, after &quot;X-HTTP-Method-Override&quot;, &quot;POST&quot; will be used by default","body":"first line is enough, after &quot;X-HTTP-Method-Override&quot;, &quot;POST&quot; will be used by default"},{"owner":{"account_id":4484658,"reputation":739,"user_id":3647724,"accept_rate":71,"display_name":"Feirell"},"score":8,"creation_date":1517754611,"post_id":32503192,"comment_id":84214612,"body_markdown":"This is not a valid answer because it does not fix the problem on javas side. The server has to allow you to use `POST` and has to understand the `X-HTTP-Method-Override` field. See https://stackoverflow.com/a/46323891/3647724 for a better an actual fix","body":"This is not a valid answer because it does not fix the problem on javas side. The server has to allow you to use <code>POST</code> and has to understand the <code>X-HTTP-Method-Override</code> field. See <a href=\"https://stackoverflow.com/a/46323891/3647724\">stackoverflow.com/a/46323891/3647724</a> for a better an actual fix"},{"owner":{"account_id":1565759,"reputation":516,"user_id":1454613,"accept_rate":78,"display_name":"Fulluphigh"},"score":0,"creation_date":1635971273,"post_id":32503192,"comment_id":123437324,"body_markdown":"Not an answer at all honestly. Why bother with &quot;X-HTTP-Method-Override&quot; and not just &quot;RandomHederNameMakePostGoPAtcHlol&quot;. PATCH is a part of the standard, the made up header is not.","body":"Not an answer at all honestly. Why bother with &quot;X-HTTP-Method-Override&quot; and not just &quot;RandomHederNameMakePostGoPAtcHlol&quot;. PATCH is a part of the standard, the made up header is not."}],"tags":[],"owner":{"account_id":468774,"reputation":1900,"user_id":874953,"accept_rate":83,"display_name":"sagar"},"comment_count":7,"down_vote_count":17,"up_vote_count":78,"is_accepted":true,"score":61,"last_activity_date":1449961118,"creation_date":1441891499,"answer_id":32503192,"question_id":25163131,"body_markdown":"Yes there is workaround for this. Use \r\n\r\n&gt; X-HTTP-Method-Override\r\n\r\n. This header can be used in a POST request to “fake” other HTTP methods. Simply set the value of the X-HTTP-Method-Override header to the HTTP method you would like to actually perform.\r\nSo use following code.\r\n\r\n    conn.setRequestProperty(&quot;X-HTTP-Method-Override&quot;, &quot;PATCH&quot;);\r\n    conn.setRequestMethod(&quot;POST&quot;);\r\n","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>Yes there is workaround for this. Use </p>\n\n<blockquote>\n  <p>X-HTTP-Method-Override</p>\n</blockquote>\n\n<p>. This header can be used in a POST request to “fake” other HTTP methods. Simply set the value of the X-HTTP-Method-Override header to the HTTP method you would like to actually perform.\nSo use following code.</p>\n\n<pre><code>conn.setRequestProperty(\"X-HTTP-Method-Override\", \"PATCH\");\nconn.setRequestMethod(\"POST\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1483502408,"post_id":35003988,"comment_id":70118223,"body_markdown":"Not valid. The line terminator in HTTP is specified as `\\r\\n`, not as whatever `println()` provides.","body":"Not valid. The line terminator in HTTP is specified as <code>\\r\\n</code>, not as whatever <code>println()</code> provides."}],"tags":[],"owner":{"account_id":1428736,"reputation":847,"user_id":1351639,"accept_rate":67,"display_name":"moralejaSinCuentoNiProverbio"},"comment_count":1,"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1702036080,"creation_date":1453762264,"answer_id":35003988,"question_id":25163131,"body_markdown":"I had the same exception and wrote sockets solution (in Groovy) but I translate in the answer form to Java for you:\r\n\r\n    String doInvalidHttpMethod(String method, String resource) {\r\n        Socket s = new Socket(InetAddress.getByName(&quot;google.com&quot;), 80);\r\n        PrintWriter pw = new PrintWriter(s.getOutputStream());\r\n        pw.println(method +&quot; &quot;+resource+&quot; HTTP/1.1&quot;);\r\n        pw.println(&quot;User-Agent: my own&quot;);\r\n        pw.println(&quot;Host: google.com:80&quot;);\r\n        pw.println(&quot;Content-Type: */*&quot;);\r\n        pw.println(&quot;Accept: */*&quot;);\r\n        pw.println(&quot;&quot;);\r\n        pw.flush();\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));\r\n        String t = null;\r\n        String response = &quot;&quot;; \r\n        while((t = br.readLine()) != null) {\r\n            response += t;\r\n        }\r\n        br.close();\r\n        return response;\r\n    }\r\n\r\nI think it works in Java. You have to change the server and port number remember change the Host header too and maybe you have to catch some exception.\r\n","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>I had the same exception and wrote sockets solution (in Groovy) but I translate in the answer form to Java for you:</p>\n<pre><code>String doInvalidHttpMethod(String method, String resource) {\n    Socket s = new Socket(InetAddress.getByName(&quot;google.com&quot;), 80);\n    PrintWriter pw = new PrintWriter(s.getOutputStream());\n    pw.println(method +&quot; &quot;+resource+&quot; HTTP/1.1&quot;);\n    pw.println(&quot;User-Agent: my own&quot;);\n    pw.println(&quot;Host: google.com:80&quot;);\n    pw.println(&quot;Content-Type: */*&quot;);\n    pw.println(&quot;Accept: */*&quot;);\n    pw.println(&quot;&quot;);\n    pw.flush();\n    BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));\n    String t = null;\n    String response = &quot;&quot;; \n    while((t = br.readLine()) != null) {\n        response += t;\n    }\n    br.close();\n    return response;\n}\n</code></pre>\n<p>I think it works in Java. You have to change the server and port number remember change the Host header too and maybe you have to catch some exception.</p>\n"},{"comments":[{"owner":{"account_id":1093655,"reputation":356,"user_id":1087731,"display_name":"Per Cederberg"},"score":0,"creation_date":1485656961,"post_id":39627823,"comment_id":71015411,"body_markdown":"Works for http connections, but not for https. The sun.net.www.protocol.https.HttpsURLConnectionImpl class uses a &quot;delegate&quot; field containing the actual URL connection. So must change there instead.","body":"Works for http connections, but not for https. The sun.net.www.protocol.https.HttpsURLConnectionImpl class uses a &quot;delegate&quot; field containing the actual URL connection. So must change there instead."}],"tags":[],"owner":{"account_id":9236768,"reputation":11,"user_id":6861146,"display_name":"dreamtangerine"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683630460,"creation_date":1474499171,"answer_id":39627823,"question_id":25163131,"body_markdown":"Another dirty hack solution is reflection:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    private void setVerb(HttpURLConnection cn, String verb) throws IOException {\r\n\r\n      switch (verb) {\r\n        case &quot;GET&quot;:\r\n        case &quot;POST&quot;:\r\n        case &quot;HEAD&quot;:\r\n        case &quot;OPTIONS&quot;:\r\n        case &quot;PUT&quot;:\r\n        case &quot;DELETE&quot;:\r\n        case &quot;TRACE&quot;:\r\n          cn.setRequestMethod(verb);\r\n          break;\r\n        default:\r\n          // set a dummy POST verb\r\n          cn.setRequestMethod(&quot;POST&quot;);\r\n          try {\r\n            // Change protected field called &quot;method&quot; of public class HttpURLConnection\r\n            setProtectedFieldValue(HttpURLConnection.class, &quot;method&quot;, cn, verb);\r\n          } catch (Exception ex) {\r\n            throw new IOException(ex);\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    public static &lt;T&gt; void setProtectedFieldValue(Class&lt;T&gt; clazz, String fieldName, T object, Object newValue) throws Exception {\r\n        Field field = clazz.getDeclaredField(fieldName);\r\n\r\n        field.setAccessible(true);\r\n        field.set(object, newValue);\r\n     }\r\n","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>Another dirty hack solution is reflection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void setVerb(HttpURLConnection cn, String verb) throws IOException {\n\n  switch (verb) {\n    case &quot;GET&quot;:\n    case &quot;POST&quot;:\n    case &quot;HEAD&quot;:\n    case &quot;OPTIONS&quot;:\n    case &quot;PUT&quot;:\n    case &quot;DELETE&quot;:\n    case &quot;TRACE&quot;:\n      cn.setRequestMethod(verb);\n      break;\n    default:\n      // set a dummy POST verb\n      cn.setRequestMethod(&quot;POST&quot;);\n      try {\n        // Change protected field called &quot;method&quot; of public class HttpURLConnection\n        setProtectedFieldValue(HttpURLConnection.class, &quot;method&quot;, cn, verb);\n      } catch (Exception ex) {\n        throw new IOException(ex);\n      }\n      break;\n  }\n}\n\npublic static &lt;T&gt; void setProtectedFieldValue(Class&lt;T&gt; clazz, String fieldName, T object, Object newValue) throws Exception {\n    Field field = clazz.getDeclaredField(fieldName);\n\n    field.setAccessible(true);\n    field.set(object, newValue);\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9626699,"reputation":627,"user_id":7146091,"display_name":"Duan Bressan"},"score":0,"creation_date":1489688890,"post_id":39645540,"comment_id":72793143,"body_markdown":"Thank&#39;s for your answer. But what do you think is better, use direct httpUrlConnection or Jersey Client?","body":"Thank&#39;s for your answer. But what do you think is better, use direct httpUrlConnection or Jersey Client?"}],"tags":[],"owner":{"account_id":1520068,"reputation":5090,"user_id":1419975,"accept_rate":90,"display_name":"Daniel L."},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474566072,"creation_date":1474566072,"answer_id":39645540,"question_id":25163131,"body_markdown":"You can find a detailed solution that can work even if you don&#39;t have direct access to the `HttpUrlConnection` (like when working with Jersey Client here: https://stackoverflow.com/questions/22355235/patch-request-using-jersey-client/39641592#39641592","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>You can find a detailed solution that can work even if you don't have direct access to the <code>HttpUrlConnection</code> (like when working with Jersey Client here: <a href=\"https://stackoverflow.com/questions/22355235/patch-request-using-jersey-client/39641592#39641592\">PATCH request using Jersey Client</a></p>\n"},{"comments":[{"owner":{"account_id":21865,"reputation":13914,"user_id":53481,"accept_rate":82,"display_name":"okutane"},"score":1,"creation_date":1491858634,"post_id":40606633,"comment_id":73730147,"body_markdown":"If you&#39;re already using reflection, why not just add &quot;PATCH&quot; method by rewriting java.net.HttpURLConnection#methods value once per application lifetime?","body":"If you&#39;re already using reflection, why not just add &quot;PATCH&quot; method by rewriting java.net.HttpURLConnection#methods value once per application lifetime?"},{"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"score":0,"creation_date":1491888911,"post_id":40606633,"comment_id":73738585,"body_markdown":"Good point. However, my answer is only for showing how the suggested solution should work, not to show another solution","body":"Good point. However, my answer is only for showing how the suggested solution should work, not to show another solution"},{"owner":{"account_id":3415461,"reputation":417,"user_id":2864499,"accept_rate":62,"display_name":"Coder"},"score":0,"creation_date":1505891149,"post_id":40606633,"comment_id":79592213,"body_markdown":"@okutane, could you please provide little hint how can we re-write to methods? because I have seen few post talking about delegates in it","body":"@okutane, could you please provide little hint how can we re-write to methods? because I have seen few post talking about delegates in it"},{"owner":{"account_id":21865,"reputation":13914,"user_id":53481,"accept_rate":82,"display_name":"okutane"},"score":0,"creation_date":1505915391,"post_id":40606633,"comment_id":79608512,"body_markdown":"@Dhamayanthi I&#39;ve posted separate answer for it.","body":"@Dhamayanthi I&#39;ve posted separate answer for it."},{"owner":{"account_id":3415461,"reputation":417,"user_id":2864499,"accept_rate":62,"display_name":"Coder"},"score":0,"creation_date":1507114555,"post_id":40606633,"comment_id":80079641,"body_markdown":"could you please share the link?","body":"could you please share the link?"}],"tags":[],"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"comment_count":5,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1479203213,"creation_date":1479203213,"answer_id":40606633,"question_id":25163131,"body_markdown":"Reflection as described in this post and a [related post](https://stackoverflow.com/questions/22355235) does not work if you are using a `HttpsURLConnection` on Oracle&#39;s JRE, because`sun.net.www.protocol.https.HttpsURLConnectionImpl` is using the `method` field from the `java.net.HttpURLConnection` of its `DelegateHttpsURLConnection`!\r\n\r\nSo a complete **working** solution is:\r\n\r\n    private void setRequestMethod(final HttpURLConnection c, final String value) {\r\n        try {\r\n            final Object target;\r\n            if (c instanceof HttpsURLConnectionImpl) {\r\n                final Field delegate = HttpsURLConnectionImpl.class.getDeclaredField(&quot;delegate&quot;);\r\n                delegate.setAccessible(true);\r\n                target = delegate.get(c);\r\n            } else {\r\n                target = c;\r\n            }\r\n            final Field f = HttpURLConnection.class.getDeclaredField(&quot;method&quot;);\r\n            f.setAccessible(true);\r\n            f.set(target, value);\r\n        } catch (IllegalAccessException | NoSuchFieldException ex) {\r\n            throw new AssertionError(ex);\r\n        }\r\n    }","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>Reflection as described in this post and a <a href=\"https://stackoverflow.com/questions/22355235\">related post</a> does not work if you are using a <code>HttpsURLConnection</code> on Oracle's JRE, because<code>sun.net.www.protocol.https.HttpsURLConnectionImpl</code> is using the <code>method</code> field from the <code>java.net.HttpURLConnection</code> of its <code>DelegateHttpsURLConnection</code>!</p>\n\n<p>So a complete <strong>working</strong> solution is:</p>\n\n<pre><code>private void setRequestMethod(final HttpURLConnection c, final String value) {\n    try {\n        final Object target;\n        if (c instanceof HttpsURLConnectionImpl) {\n            final Field delegate = HttpsURLConnectionImpl.class.getDeclaredField(\"delegate\");\n            delegate.setAccessible(true);\n            target = delegate.get(c);\n        } else {\n            target = c;\n        }\n        final Field f = HttpURLConnection.class.getDeclaredField(\"method\");\n        f.setAccessible(true);\n        f.set(target, value);\n    } catch (IllegalAccessException | NoSuchFieldException ex) {\n        throw new AssertionError(ex);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2409074,"reputation":7421,"user_id":2104665,"accept_rate":92,"display_name":"Peppe L-G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480601161,"creation_date":1480601161,"answer_id":40912691,"question_id":25163131,"body_markdown":"If your server is using ASP.NET Core, you can simply add the following code to specify the HTTP method using the header `X-HTTP-Method-Override`, as described in the [accepted answer](https://stackoverflow.com/a/32503192/2104665). \r\n\r\n\tapp.Use((context, next) =&gt; {\r\n\t\tvar headers = context.Request.Headers[&quot;X-HTTP-Method-Override&quot;];\r\n\t\tif(headers.Count == 1) {\r\n\t\t\tcontext.Request.Method = headers.First();\r\n\t\t}\r\n\t\treturn next();\r\n\t});\r\n\r\nSimply add this code in `Startup.Configure` before your call to `app.UseMvc()`.","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>If your server is using ASP.NET Core, you can simply add the following code to specify the HTTP method using the header <code>X-HTTP-Method-Override</code>, as described in the <a href=\"https://stackoverflow.com/a/32503192/2104665\">accepted answer</a>. </p>\n\n<pre><code>app.Use((context, next) =&gt; {\n    var headers = context.Request.Headers[\"X-HTTP-Method-Override\"];\n    if(headers.Count == 1) {\n        context.Request.Method = headers.First();\n    }\n    return next();\n});\n</code></pre>\n\n<p>Simply add this code in <code>Startup.Configure</code> before your call to <code>app.UseMvc()</code>.</p>\n"},{"comments":[{"owner":{"account_id":279140,"reputation":3347,"user_id":574131,"display_name":"Emmanuel Devaux"},"score":1,"creation_date":1538748893,"post_id":42707723,"comment_id":92264957,"body_markdown":"Your solution works if the connected server do accept and interpret request header &#39;X-HTTP-Method-Override&#39;. Therefore your solution can&#39;t be used in all cases.","body":"Your solution works if the connected server do accept and interpret request header &#39;X-HTTP-Method-Override&#39;. Therefore your solution can&#39;t be used in all cases."}],"tags":[],"owner":{"account_id":9626699,"reputation":627,"user_id":7146091,"display_name":"Duan Bressan"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1489103550,"creation_date":1489103550,"answer_id":42707723,"question_id":25163131,"body_markdown":"Using the answer:\r\n\r\n&gt; https://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch/32503192#32503192\r\n\r\nI&#39;m created a sample request and work like a charm:\r\n\r\n    public void request(String requestURL, String authorization, JsonObject json) {\r\n\r\n        try {\r\n\r\n            URL url = new URL(requestURL);\r\n            httpConn = (HttpURLConnection) url.openConnection();\r\n            httpConn.setRequestMethod(&quot;POST&quot;);\r\n            httpConn.setRequestProperty(&quot;X-HTTP-Method-Override&quot;, &quot;PATCH&quot;);\r\n            httpConn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n            httpConn.setRequestProperty(&quot;Authorization&quot;, authorization);\r\n            httpConn.setRequestProperty(&quot;charset&quot;, &quot;utf-8&quot;);\r\n\r\n            DataOutputStream wr = new DataOutputStream(httpConn.getOutputStream());\r\n            wr.writeBytes(json.toString());\r\n            wr.flush();\r\n            wr.close();\r\n\r\n            httpConn.connect();\r\n\r\n            String response = finish();\r\n\r\n            if (response != null &amp;&amp; !response.equals(&quot;&quot;)) {\r\n                created = true;\r\n            }\r\n        } \r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public String finish() throws IOException {\r\n\r\n        String response = &quot;&quot;;\r\n\r\n        int status = httpConn.getResponseCode();\r\n        if (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_CREATED) {\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(\r\n                    httpConn.getInputStream()));\r\n            String line = null;\r\n            while ((line = reader.readLine()) != null) {\r\n                response += line;\r\n            }\r\n            reader.close();\r\n            httpConn.disconnect();\r\n        } else {\r\n            throw new IOException(&quot;Server returned non-OK status: &quot; + status);\r\n        }\r\n\r\n        return response;\r\n    }\r\n\r\nI hope it help you.","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>Using the answer:</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch/32503192#32503192\">HttpURLConnection Invalid HTTP method: PATCH</a></p>\n</blockquote>\n\n<p>I'm created a sample request and work like a charm:</p>\n\n<pre><code>public void request(String requestURL, String authorization, JsonObject json) {\n\n    try {\n\n        URL url = new URL(requestURL);\n        httpConn = (HttpURLConnection) url.openConnection();\n        httpConn.setRequestMethod(\"POST\");\n        httpConn.setRequestProperty(\"X-HTTP-Method-Override\", \"PATCH\");\n        httpConn.setRequestProperty(\"Content-Type\", \"application/json\");\n        httpConn.setRequestProperty(\"Authorization\", authorization);\n        httpConn.setRequestProperty(\"charset\", \"utf-8\");\n\n        DataOutputStream wr = new DataOutputStream(httpConn.getOutputStream());\n        wr.writeBytes(json.toString());\n        wr.flush();\n        wr.close();\n\n        httpConn.connect();\n\n        String response = finish();\n\n        if (response != null &amp;&amp; !response.equals(\"\")) {\n            created = true;\n        }\n    } \n    catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\npublic String finish() throws IOException {\n\n    String response = \"\";\n\n    int status = httpConn.getResponseCode();\n    if (status == HttpURLConnection.HTTP_OK || status == HttpURLConnection.HTTP_CREATED) {\n        BufferedReader reader = new BufferedReader(new InputStreamReader(\n                httpConn.getInputStream()));\n        String line = null;\n        while ((line = reader.readLine()) != null) {\n            response += line;\n        }\n        reader.close();\n        httpConn.disconnect();\n    } else {\n        throw new IOException(\"Server returned non-OK status: \" + status);\n    }\n\n    return response;\n}\n</code></pre>\n\n<p>I hope it help you.</p>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1495096720,"creation_date":1494959528,"answer_id":44009076,"question_id":25163131,"body_markdown":"In emulator of API 16 I received an exception: `java.net.ProtocolException: Unknown method &#39;PATCH&#39;; must be one of [OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE]`.\r\n\r\nWhile an accepted answer works, I want to add one detail. In new APIs `PATCH` works well, so in conjunction with https://github.com/OneDrive/onedrive-sdk-android/issues/16 you should write:\r\n\r\n\tif (method.equals(&quot;PATCH&quot;) &amp;&amp; Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.KITKAT) {\r\n\t\thttpConnection.setRequestProperty(&quot;X-HTTP-Method-Override&quot;, &quot;PATCH&quot;);\r\n\t\thttpConnection.setRequestMethod(&quot;POST&quot;);\r\n\t} else {\r\n\t\thttpConnection.setRequestMethod(method);\r\n    }\r\n\r\nI changed `JELLY_BEAN_MR2` to `KITKAT` after testing in API 16, 19, 21.","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>In emulator of API 16 I received an exception: <code>java.net.ProtocolException: Unknown method 'PATCH'; must be one of [OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE]</code>.</p>\n\n<p>While an accepted answer works, I want to add one detail. In new APIs <code>PATCH</code> works well, so in conjunction with <a href=\"https://github.com/OneDrive/onedrive-sdk-android/issues/16\" rel=\"nofollow noreferrer\">https://github.com/OneDrive/onedrive-sdk-android/issues/16</a> you should write:</p>\n\n<pre><code>if (method.equals(\"PATCH\") &amp;&amp; Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.KITKAT) {\n    httpConnection.setRequestProperty(\"X-HTTP-Method-Override\", \"PATCH\");\n    httpConnection.setRequestMethod(\"POST\");\n} else {\n    httpConnection.setRequestMethod(method);\n}\n</code></pre>\n\n<p>I changed <code>JELLY_BEAN_MR2</code> to <code>KITKAT</code> after testing in API 16, 19, 21.</p>\n"},{"comments":[{"owner":{"account_id":4484658,"reputation":739,"user_id":3647724,"accept_rate":71,"display_name":"Feirell"},"score":8,"creation_date":1517754132,"post_id":46323891,"comment_id":84214468,"body_markdown":"Very good answer, should be the accepted one because it solves the actual problem and does not suggests a workaround which depends on the receiving server","body":"Very good answer, should be the accepted one because it solves the actual problem and does not suggests a workaround which depends on the receiving server"},{"owner":{"account_id":11294725,"reputation":292,"user_id":8282587,"display_name":"Amichai Ungar"},"score":1,"creation_date":1531135201,"post_id":46323891,"comment_id":89467042,"body_markdown":"indeed this solution works as a charm, as the one that uses the override property is dependent on the server (and in my case did not work)...","body":"indeed this solution works as a charm, as the one that uses the override property is dependent on the server (and in my case did not work)..."},{"owner":{"account_id":7451588,"reputation":811,"user_id":5666171,"accept_rate":86,"display_name":"CLOVIS"},"score":0,"creation_date":1543920027,"post_id":46323891,"comment_id":94083143,"body_markdown":"Does this still work with Java 9? Or does the module thing restricts it","body":"Does this still work with Java 9? Or does the module thing restricts it"},{"owner":{"account_id":21865,"reputation":13914,"user_id":53481,"accept_rate":82,"display_name":"okutane"},"score":0,"creation_date":1543927194,"post_id":46323891,"comment_id":94087100,"body_markdown":"@CLOVIS honestly, I don&#39;t know. If you&#39;re able to try it, please share results and I will update my answer. :)","body":"@CLOVIS honestly, I don&#39;t know. If you&#39;re able to try it, please share results and I will update my answer. :)"},{"owner":{"account_id":5726356,"reputation":870,"user_id":4523221,"accept_rate":62,"display_name":"Kin Cheung"},"score":6,"creation_date":1567665833,"post_id":46323891,"comment_id":102031860,"body_markdown":"Tried that with JDK12, but I got &quot;java.lang.NoSuchFieldException: modifiers&quot;","body":"Tried that with JDK12, but I got &quot;java.lang.NoSuchFieldException: modifiers&quot;"},{"owner":{"account_id":5726356,"reputation":870,"user_id":4523221,"accept_rate":62,"display_name":"Kin Cheung"},"score":2,"creation_date":1567666555,"post_id":46323891,"comment_id":102032178,"body_markdown":"Reason: https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12","body":"Reason: <a href=\"https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12\" title=\"get declared fields of java lang reflect fields in jdk12\">stackoverflow.com/questions/56039341/&hellip;</a>"},{"owner":{"account_id":2567856,"reputation":1376,"user_id":2227422,"accept_rate":71,"display_name":"Acroyear"},"score":0,"creation_date":1580753471,"post_id":46323891,"comment_id":106193170,"body_markdown":"Tried this solution, and still getting `ProtocolException: Invalid HTTP method: PATCH`.","body":"Tried this solution, and still getting <code>ProtocolException: Invalid HTTP method: PATCH</code>."},{"owner":{"account_id":1260830,"reputation":1847,"user_id":1219163,"accept_rate":89,"display_name":"Li3ro"},"score":0,"creation_date":1631429989,"post_id":46323891,"comment_id":122215875,"body_markdown":"Just encountered a very strange behaviour: With this method trying shoot a PATCH request while using a preflight to bypass CORS, when I use specific domain in Access-Control-Allow-Origin it works, when changed to * its throwing the same notorious error FYI","body":"Just encountered a very strange behaviour: With this method trying shoot a PATCH request while using a preflight to bypass CORS, when I use specific domain in Access-Control-Allow-Origin it works, when changed to * its throwing the same notorious error FYI"},{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":1,"creation_date":1677694847,"post_id":46323891,"comment_id":133390405,"body_markdown":"This just helped me out a lot. I guess you&#39;d call this a &quot;monkey PATCH&quot;?","body":"This just helped me out a lot. I guess you&#39;d call this a &quot;monkey PATCH&quot;?"}],"tags":[],"owner":{"account_id":21865,"reputation":13914,"user_id":53481,"accept_rate":82,"display_name":"okutane"},"comment_count":9,"down_vote_count":3,"up_vote_count":73,"is_accepted":false,"score":70,"last_activity_date":1567674019,"creation_date":1505915317,"answer_id":46323891,"question_id":25163131,"body_markdown":"There are a lot of good answers, so here is mine (not work in jdk12):\r\n\r\n    import java.io.IOException;\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.Modifier;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.util.Arrays;\r\n    import java.util.LinkedHashSet;\r\n    import java.util.Set;\r\n    \r\n    public class SupportPatch {\r\n        public static void main(String... args) throws IOException {\r\n            allowMethods(&quot;PATCH&quot;);\r\n    \r\n            HttpURLConnection conn = (HttpURLConnection) new URL(&quot;http://example.com&quot;).openConnection();\r\n            conn.setRequestMethod(&quot;PATCH&quot;);\r\n        }\r\n    \r\n        private static void allowMethods(String... methods) {\r\n            try {\r\n                Field methodsField = HttpURLConnection.class.getDeclaredField(&quot;methods&quot;);\r\n    \r\n                Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n                modifiersField.setAccessible(true);\r\n                modifiersField.setInt(methodsField, methodsField.getModifiers() &amp; ~Modifier.FINAL);\r\n    \r\n                methodsField.setAccessible(true);\r\n    \r\n                String[] oldMethods = (String[]) methodsField.get(null);\r\n                Set&lt;String&gt; methodsSet = new LinkedHashSet&lt;&gt;(Arrays.asList(oldMethods));\r\n                methodsSet.addAll(Arrays.asList(methods));\r\n                String[] newMethods = methodsSet.toArray(new String[0]);\r\n    \r\n                methodsField.set(null/*static field*/, newMethods);\r\n            } catch (NoSuchFieldException | IllegalAccessException e) {\r\n                throw new IllegalStateException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nIt also uses reflection, but instead of hacking into every connection object we&#39;re hacking HttpURLConnection#methods static field which is used in the checks internally.","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>There are a lot of good answers, so here is mine (not work in jdk12):</p>\n\n<pre><code>import java.io.IOException;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Modifier;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.Arrays;\nimport java.util.LinkedHashSet;\nimport java.util.Set;\n\npublic class SupportPatch {\n    public static void main(String... args) throws IOException {\n        allowMethods(\"PATCH\");\n\n        HttpURLConnection conn = (HttpURLConnection) new URL(\"http://example.com\").openConnection();\n        conn.setRequestMethod(\"PATCH\");\n    }\n\n    private static void allowMethods(String... methods) {\n        try {\n            Field methodsField = HttpURLConnection.class.getDeclaredField(\"methods\");\n\n            Field modifiersField = Field.class.getDeclaredField(\"modifiers\");\n            modifiersField.setAccessible(true);\n            modifiersField.setInt(methodsField, methodsField.getModifiers() &amp; ~Modifier.FINAL);\n\n            methodsField.setAccessible(true);\n\n            String[] oldMethods = (String[]) methodsField.get(null);\n            Set&lt;String&gt; methodsSet = new LinkedHashSet&lt;&gt;(Arrays.asList(oldMethods));\n            methodsSet.addAll(Arrays.asList(methods));\n            String[] newMethods = methodsSet.toArray(new String[0]);\n\n            methodsField.set(null/*static field*/, newMethods);\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            throw new IllegalStateException(e);\n        }\n    }\n}\n</code></pre>\n\n<p>It also uses reflection, but instead of hacking into every connection object we're hacking HttpURLConnection#methods static field which is used in the checks internally.</p>\n"},{"comments":[{"owner":{"account_id":10302290,"reputation":1445,"user_id":7600634,"display_name":"John Tribe"},"score":1,"creation_date":1566557331,"post_id":46907921,"comment_id":101703085,"body_markdown":"for Spring dev  this is the cleanest solution :  return new RestTemplate(new (HttpComponentsClientHttpRequestFactory ));","body":"for Spring dev  this is the cleanest solution :  return new RestTemplate(new (HttpComponentsClientHttpRequestFactory ));"},{"owner":{"account_id":2693988,"reputation":386,"user_id":6324319,"display_name":"Daniel Camarasa"},"score":0,"creation_date":1583401897,"post_id":46907921,"comment_id":107106643,"body_markdown":"Thank you @hirosht. Cleanest and simplest way to solve it in a spring-based app.","body":"Thank you @hirosht. Cleanest and simplest way to solve it in a spring-based app."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1643831494,"post_id":46907921,"comment_id":125446742,"body_markdown":"I like to add the `because` reason to my Gradle dependency to make it obvious why it&#39;s needed, given that no imported statements may even be using it: `implementation(&#39;org.apache.httpcomponents:httpclient&#39;) { because(&#39;java.net.HttpURLConnection does not support PATCH&#39;) }`","body":"I like to add the <code>because</code> reason to my Gradle dependency to make it obvious why it&#39;s needed, given that no imported statements may even be using it: <code>implementation(&#39;org.apache.httpcomponents:httpclient&#39;) { because(&#39;java.net.HttpURLConnection does not support PATCH&#39;) }</code>"},{"owner":{"account_id":2823210,"reputation":508,"user_id":2426445,"display_name":"kosgeinsky"},"score":0,"creation_date":1671108802,"post_id":46907921,"comment_id":132029910,"body_markdown":"Adding the `httpclient` dependency is enough for Springboot","body":"Adding the <code>httpclient</code> dependency is enough for Springboot"},{"owner":{"account_id":3641890,"reputation":410,"user_id":3035786,"accept_rate":50,"display_name":"Mugeesh Husain"},"score":0,"creation_date":1687942664,"post_id":46907921,"comment_id":135006152,"body_markdown":"this worked for me","body":"this worked for me"}],"tags":[],"owner":{"account_id":1661844,"reputation":952,"user_id":1529983,"accept_rate":61,"display_name":"hirosht"},"comment_count":5,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1508840280,"creation_date":1508840280,"answer_id":46907921,"question_id":25163131,"body_markdown":"*If the project is on Spring/Gradle*; the following solution will workout. \r\n\r\nFor the build.gradle, add the following dependency;\r\n \r\n    compile(&#39;org.apache.httpcomponents:httpclient:4.5.2&#39;)\r\n\r\nAnd define the following bean in your @SpringBootApplication class inside the \r\ncom.company.project;\r\n\r\n     @Bean\r\n\t public RestTemplate restTemplate() {\r\n\t  HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\r\n\t  requestFactory.setReadTimeout(600000);\r\n\t  requestFactory.setConnectTimeout(600000);\r\n\t  return new RestTemplate(requestFactory);\r\n\t }\r\n\r\nThis solutions worked for me.\r\n\r\n","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p><em>If the project is on Spring/Gradle</em>; the following solution will workout. </p>\n\n<p>For the build.gradle, add the following dependency;</p>\n\n<pre><code>compile('org.apache.httpcomponents:httpclient:4.5.2')\n</code></pre>\n\n<p>And define the following bean in your @SpringBootApplication class inside the \ncom.company.project;</p>\n\n<pre><code> @Bean\n public RestTemplate restTemplate() {\n  HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\n  requestFactory.setReadTimeout(600000);\n  requestFactory.setConnectTimeout(600000);\n  return new RestTemplate(requestFactory);\n }\n</code></pre>\n\n<p>This solutions worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2142253,"reputation":878,"user_id":1900629,"accept_rate":64,"display_name":"Daniel Jipa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523785598,"creation_date":1523785598,"answer_id":49840561,"question_id":25163131,"body_markdown":"I got mine with Jersey client.\r\nThe workaround was:\r\n\r\n    Client client = ClientBuilder.newClient();\r\n    client.property(HttpUrlConnectorProvider.SET_METHOD_WORKAROUND, true);","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>I got mine with Jersey client.\nThe workaround was:</p>\n\n<pre><code>Client client = ClientBuilder.newClient();\nclient.property(HttpUrlConnectorProvider.SET_METHOD_WORKAROUND, true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523957032,"creation_date":1523957032,"answer_id":49874386,"question_id":25163131,"body_markdown":"We have faced the same problem with slightly different behavior. We were using apache cxf library for making the rest calls.\r\nFor us, PATCH was working fine till we were talking to our fake services which were working over http.\r\nThe moment we integrated with actual systems (which were over https)  we started facing the same issue with following stack trace.\r\n\r\n    java.net.ProtocolException: Invalid HTTP method: PATCH\tat java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:428) ~[na:1.7.0_51]\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.setRequestMethod(HttpsURLConnectionImpl.java:374) ~[na:1.7.0_51]\tat org.apache.cxf.transport.http.URLConnectionHTTPConduit.setupConnection(URLConnectionHTTPConduit.java:149) ~[cxf-rt-transports-http-3.1.14.jar:3.1.14]\r\n\r\nIssue was happening in this line of code\r\n\r\n    connection.setRequestMethod(httpRequestMethod); in URLConnectionHTTPConduit class of cxf library\r\n\r\nNow the real reason for the failure is that\r\n\r\n    java.net.HttpURLConnection contains a methods variable which looks like below\r\n    /* valid HTTP methods */\r\n        private static final String[] methods = {\r\n            &quot;GET&quot;, &quot;POST&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;TRACE&quot;\r\n        };\r\nAnd we can see that there is no PATCH method defined hence the error made sense.\r\nWe tried lots of different thing and looked over stack overflow. The only reasonable answer was to use reflection to modify the methods variable to inject another value &quot;PATCH&quot;. But somehow we were not convinced to use that as the solution was kind of hack and is too much work and might have impact as we had common library to make all connection and performing these REST calls.\r\n\r\nBut then we realized that cxf library itself is handling the exception and there is code written in the catch block to add the missing method using reflection.\r\n\r\n    try {\r\n            connection.setRequestMethod(httpRequestMethod);\r\n        } catch (java.net.ProtocolException ex) {\r\n            Object o = message.getContextualProperty(HTTPURL_CONNECTION_METHOD_REFLECTION);\r\n            boolean b = DEFAULT_USE_REFLECTION;\r\n            if (o != null) {\r\n                b = MessageUtils.isTrue(o);\r\n            }\r\n            if (b) {\r\n                try {\r\n                    java.lang.reflect.Field f = ReflectionUtil.getDeclaredField(HttpURLConnection.class, &quot;method&quot;);\r\n                    if (connection instanceof HttpsURLConnection) {\r\n                        try {\r\n                            java.lang.reflect.Field f2 = ReflectionUtil.getDeclaredField(connection.getClass(),\r\n                                                                                         &quot;delegate&quot;);\r\n                            Object c = ReflectionUtil.setAccessible(f2).get(connection);\r\n                            if (c instanceof HttpURLConnection) {\r\n                                ReflectionUtil.setAccessible(f).set(c, httpRequestMethod);\r\n                            }\r\n\r\n                            f2 = ReflectionUtil.getDeclaredField(c.getClass(), &quot;httpsURLConnection&quot;);\r\n                            HttpsURLConnection c2 = (HttpsURLConnection)ReflectionUtil.setAccessible(f2)\r\n                                    .get(c);\r\n\r\n                            ReflectionUtil.setAccessible(f).set(c2, httpRequestMethod);\r\n                        } catch (Throwable t) {\r\n                            //ignore\r\n                            logStackTrace(t);\r\n                        }\r\n                    }\r\n                    ReflectionUtil.setAccessible(f).set(connection, httpRequestMethod);\r\n                    message.put(HTTPURL_CONNECTION_METHOD_REFLECTION, true);\r\n                } catch (Throwable t) {\r\n                    logStackTrace(t);\r\n                    throw ex;\r\n                }\r\n            }\r\n\r\nNow this gave us some hopes, so we spent some time in reading the code and found that if we provide a property for URLConnectionHTTPConduit.HTTPURL_CONNECTION_METHOD_REFLECTION then we can make cxf to execute the exception handler and our work is done as by default the variable will be assigned to false due to below code\r\n\r\n    DEFAULT_USE_REFLECTION = \r\n            Boolean.valueOf(SystemPropertyAction.getProperty(HTTPURL_CONNECTION_METHOD_REFLECTION, &quot;false&quot;));\r\n\r\nSo here is what we had to do to make this work\r\n\r\n    WebClient.getConfig(client).getRequestContext().put(&quot;use.httpurlconnection.method.reflection&quot;, true);\r\n\r\nor \r\n\r\n    WebClient.getConfig(client).getRequestContext().put(HTTPURL_CONNECTION_METHOD_REFLECTION, true);\r\n\r\nWhere WebClient is from cxf library itself.\r\n\r\nHope this answer helps some one.\r\n\r\n","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>We have faced the same problem with slightly different behavior. We were using apache cxf library for making the rest calls.\nFor us, PATCH was working fine till we were talking to our fake services which were working over http.\nThe moment we integrated with actual systems (which were over https)  we started facing the same issue with following stack trace.</p>\n\n<pre><code>java.net.ProtocolException: Invalid HTTP method: PATCH  at java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:428) ~[na:1.7.0_51]   at sun.net.www.protocol.https.HttpsURLConnectionImpl.setRequestMethod(HttpsURLConnectionImpl.java:374) ~[na:1.7.0_51]   at org.apache.cxf.transport.http.URLConnectionHTTPConduit.setupConnection(URLConnectionHTTPConduit.java:149) ~[cxf-rt-transports-http-3.1.14.jar:3.1.14]\n</code></pre>\n\n<p>Issue was happening in this line of code</p>\n\n<pre><code>connection.setRequestMethod(httpRequestMethod); in URLConnectionHTTPConduit class of cxf library\n</code></pre>\n\n<p>Now the real reason for the failure is that</p>\n\n<pre><code>java.net.HttpURLConnection contains a methods variable which looks like below\n/* valid HTTP methods */\n    private static final String[] methods = {\n        \"GET\", \"POST\", \"HEAD\", \"OPTIONS\", \"PUT\", \"DELETE\", \"TRACE\"\n    };\n</code></pre>\n\n<p>And we can see that there is no PATCH method defined hence the error made sense.\nWe tried lots of different thing and looked over stack overflow. The only reasonable answer was to use reflection to modify the methods variable to inject another value \"PATCH\". But somehow we were not convinced to use that as the solution was kind of hack and is too much work and might have impact as we had common library to make all connection and performing these REST calls.</p>\n\n<p>But then we realized that cxf library itself is handling the exception and there is code written in the catch block to add the missing method using reflection.</p>\n\n<pre><code>try {\n        connection.setRequestMethod(httpRequestMethod);\n    } catch (java.net.ProtocolException ex) {\n        Object o = message.getContextualProperty(HTTPURL_CONNECTION_METHOD_REFLECTION);\n        boolean b = DEFAULT_USE_REFLECTION;\n        if (o != null) {\n            b = MessageUtils.isTrue(o);\n        }\n        if (b) {\n            try {\n                java.lang.reflect.Field f = ReflectionUtil.getDeclaredField(HttpURLConnection.class, \"method\");\n                if (connection instanceof HttpsURLConnection) {\n                    try {\n                        java.lang.reflect.Field f2 = ReflectionUtil.getDeclaredField(connection.getClass(),\n                                                                                     \"delegate\");\n                        Object c = ReflectionUtil.setAccessible(f2).get(connection);\n                        if (c instanceof HttpURLConnection) {\n                            ReflectionUtil.setAccessible(f).set(c, httpRequestMethod);\n                        }\n\n                        f2 = ReflectionUtil.getDeclaredField(c.getClass(), \"httpsURLConnection\");\n                        HttpsURLConnection c2 = (HttpsURLConnection)ReflectionUtil.setAccessible(f2)\n                                .get(c);\n\n                        ReflectionUtil.setAccessible(f).set(c2, httpRequestMethod);\n                    } catch (Throwable t) {\n                        //ignore\n                        logStackTrace(t);\n                    }\n                }\n                ReflectionUtil.setAccessible(f).set(connection, httpRequestMethod);\n                message.put(HTTPURL_CONNECTION_METHOD_REFLECTION, true);\n            } catch (Throwable t) {\n                logStackTrace(t);\n                throw ex;\n            }\n        }\n</code></pre>\n\n<p>Now this gave us some hopes, so we spent some time in reading the code and found that if we provide a property for URLConnectionHTTPConduit.HTTPURL_CONNECTION_METHOD_REFLECTION then we can make cxf to execute the exception handler and our work is done as by default the variable will be assigned to false due to below code</p>\n\n<pre><code>DEFAULT_USE_REFLECTION = \n        Boolean.valueOf(SystemPropertyAction.getProperty(HTTPURL_CONNECTION_METHOD_REFLECTION, \"false\"));\n</code></pre>\n\n<p>So here is what we had to do to make this work</p>\n\n<pre><code>WebClient.getConfig(client).getRequestContext().put(\"use.httpurlconnection.method.reflection\", true);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>WebClient.getConfig(client).getRequestContext().put(HTTPURL_CONNECTION_METHOD_REFLECTION, true);\n</code></pre>\n\n<p>Where WebClient is from cxf library itself.</p>\n\n<p>Hope this answer helps some one.</p>\n"},{"tags":[],"owner":{"account_id":8116610,"reputation":1,"user_id":6114912,"display_name":"perumal ks"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702035992,"creation_date":1557569153,"answer_id":56089237,"question_id":25163131,"body_markdown":"```java\r\nCloseableHttpClient http = HttpClientBuilder.create().build();\r\nHttpPatch updateRequest = new HttpPatch(&quot;URL&quot;);\r\nupdateRequest.setEntity(new StringEntity(&quot;inputjsonString&quot;, ContentType.APPLICATION_JSON));\r\nupdateRequest.setHeader(&quot;Bearer&quot;, &quot;auth&quot;);\r\nHttpResponse response = http.execute(updateRequest);\r\nJSONObject result = new JSONObject(IOUtils.toString(response.getEntity().getContent()));**\r\n```\r\n\r\n\r\nmaven plugin\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n    &lt;version&gt;4.3.4&lt;/version&gt;\r\n    &lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\t\r\n&lt;/dependency&gt;\r\n```\r\n\r\nuse this really it would helps you","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<pre class=\"lang-java prettyprint-override\"><code>CloseableHttpClient http = HttpClientBuilder.create().build();\nHttpPatch updateRequest = new HttpPatch(&quot;URL&quot;);\nupdateRequest.setEntity(new StringEntity(&quot;inputjsonString&quot;, ContentType.APPLICATION_JSON));\nupdateRequest.setHeader(&quot;Bearer&quot;, &quot;auth&quot;);\nHttpResponse response = http.execute(updateRequest);\nJSONObject result = new JSONObject(IOUtils.toString(response.getEntity().getContent()));**\n</code></pre>\n<p>maven plugin</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.3.4&lt;/version&gt;\n    &lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;   \n&lt;/dependency&gt;\n</code></pre>\n<p>use this really it would helps you</p>\n"},{"tags":[],"owner":{"account_id":12804041,"reputation":361,"user_id":9264400,"display_name":"Johnu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568394418,"creation_date":1568394418,"answer_id":57927736,"question_id":25163131,"body_markdown":"For anyone using Spring restTemplate looking for a detailed answer.\r\n\r\nYou will face the problem if you are using SimpleClientHttpRequestFactory as your restTemplate&#39;s ClientHttpRequestFactory.\r\n\r\nFrom java.net.HttpURLConnection:\r\n\r\n    /* valid HTTP methods */\r\n    private static final String[] methods = {\r\n        &quot;GET&quot;, &quot;POST&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;TRACE&quot;\r\n    };\r\n\r\nAs PATCH is not a supported operation, this line of code from the same class will execute:\r\n\r\n    throw new ProtocolException(&quot;Invalid HTTP method: &quot; + method);\r\n\r\nI ended up using the same as what @hirosht suggested in his [answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/46907921/9264400","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>For anyone using Spring restTemplate looking for a detailed answer.</p>\n\n<p>You will face the problem if you are using SimpleClientHttpRequestFactory as your restTemplate's ClientHttpRequestFactory.</p>\n\n<p>From java.net.HttpURLConnection:</p>\n\n<pre><code>/* valid HTTP methods */\nprivate static final String[] methods = {\n    \"GET\", \"POST\", \"HEAD\", \"OPTIONS\", \"PUT\", \"DELETE\", \"TRACE\"\n};\n</code></pre>\n\n<p>As PATCH is not a supported operation, this line of code from the same class will execute:</p>\n\n<pre><code>throw new ProtocolException(\"Invalid HTTP method: \" + method);\n</code></pre>\n\n<p>I ended up using the same as what @hirosht suggested in his <a href=\"https://stackoverflow.com/a/46907921/9264400\">answer</a>.</p>\n"},{"comments":[{"owner":{"account_id":6642040,"reputation":2057,"user_id":5127499,"accept_rate":100,"display_name":"Carsten"},"score":1,"creation_date":1649237624,"post_id":64048579,"comment_id":126822894,"body_markdown":"Exactly, this is the official replacement for the deprecated `java.net.HttpURLConnection`.","body":"Exactly, this is the official replacement for the deprecated <code>java.net.HttpURLConnection</code>."}],"tags":[],"owner":{"account_id":123756,"reputation":4386,"user_id":318414,"accept_rate":95,"display_name":"simonalexander2005"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1600957553,"creation_date":1600957553,"answer_id":64048579,"question_id":25163131,"body_markdown":"In java 11+ you can use the HttpRequest class to do what you want:\r\n\r\n``` Java\r\nimport java.net.http.HttpRequest;\r\n\r\nHttpRequest request = HttpRequest.newBuilder()\r\n               .uri(URI.create(uri))\r\n               .method(&quot;PATCH&quot;, HttpRequest.BodyPublishers.ofString(message))\r\n               .header(&quot;Content-Type&quot;, &quot;text/xml&quot;)\r\n               .build();\r\n```","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>In java 11+ you can use the HttpRequest class to do what you want:</p>\n<pre><code>import java.net.http.HttpRequest;\n\nHttpRequest request = HttpRequest.newBuilder()\n               .uri(URI.create(uri))\n               .method(&quot;PATCH&quot;, HttpRequest.BodyPublishers.ofString(message))\n               .header(&quot;Content-Type&quot;, &quot;text/xml&quot;)\n               .build();\n</code></pre>\n"}],"owner":{"account_id":1437465,"reputation":6412,"user_id":1358536,"accept_rate":90,"display_name":"kavai77"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135150,"favorite_count":0,"down_vote_count":0,"up_vote_count":114,"accepted_answer_id":32503192,"answer_count":16,"score":114,"last_activity_date":1702036080,"creation_date":1407335579,"question_id":25163131,"body_markdown":"When I try to use a non-standard HTTP Method like PATCH with URLConnection:\r\n\r\n        HttpURLConnection conn = (HttpURLConnection) new URL(&quot;http://example.com&quot;).openConnection();\r\n        conn.setRequestMethod(&quot;PATCH&quot;);\r\n\r\nI get an exception:\r\n\r\n    java.net.ProtocolException: Invalid HTTP method: PATCH\r\n\tat java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:440)\r\n\r\nUsing a higher level API like Jersey generates the same error. Is there a workaround to issue a PATCH HTTP request?","title":"HttpURLConnection Invalid HTTP method: PATCH","body":"<p>When I try to use a non-standard HTTP Method like PATCH with URLConnection:</p>\n\n<pre><code>    HttpURLConnection conn = (HttpURLConnection) new URL(\"http://example.com\").openConnection();\n    conn.setRequestMethod(\"PATCH\");\n</code></pre>\n\n<p>I get an exception:</p>\n\n<pre><code>java.net.ProtocolException: Invalid HTTP method: PATCH\nat java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:440)\n</code></pre>\n\n<p>Using a higher level API like Jersey generates the same error. Is there a workaround to issue a PATCH HTTP request?</p>\n"},{"tags":["java","reactjs","spring","filter","cors"],"answers":[{"tags":[],"owner":{"account_id":1551684,"reputation":1024,"user_id":1443928,"accept_rate":93,"display_name":"Hard Worker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702035858,"creation_date":1702035858,"answer_id":77626314,"question_id":77622329,"body_markdown":"Fixed by adding this cors filter setting\r\n\r\n\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    \r\n    @Configuration\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.headers().cacheControl();\r\n            http.csrf().disable(); // Disable CSRF\r\n            http.cors();\r\n        }\r\n    }","title":"React client headers are missing in the server spring boot - while they do arrive with postman","body":"<p>Fixed by adding this cors filter setting</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.headers().cacheControl();\n        http.csrf().disable(); // Disable CSRF\n        http.cors();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1551684,"reputation":1024,"user_id":1443928,"accept_rate":93,"display_name":"Hard Worker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1702035858,"creation_date":1701973642,"question_id":77622329,"body_markdown":"I have a React client app which is making Http Get to the server\r\n\r\n      export const restApiGet = async (apiPath: string) =&gt; {\r\n        const headers  = {\r\n          &#39;token&#39;: &#39;aaaa&#39;,\r\n          &#39;postman-token&#39;: &#39;bbbb&#39;,\r\n        };\r\n        return Axios.get(`${apiUrl}${apiPath}`, {\r\n          withCredentials: true, // Include cookies in the request\r\n          headers: headers\r\n        }\r\n        );\r\n      };\r\n\r\nthe request arrive to the server which is spring boot java\r\n\r\nbut in My server I have a filter, I need to read the token header\r\n\r\n\r\n    @Component\r\n    @WebFilter\r\n    public class UserIdFilter implements Filter {\r\n    \r\n        //TODO add filter for all response if object has userId column it must match the userId of the token\r\n        private final AbstractCacheService abstractCacheService;\r\n    \r\n        public UserIdFilter(AbstractCacheService abstractCacheService) {\r\n            this.abstractCacheService = abstractCacheService;\r\n        }\r\n        \r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            HttpServletRequest httpRequest = (HttpServletRequest) request;\r\n           \r\n    }\r\n\r\nBut in the server when I try to get the header its null\r\n\r\nIf i look on the request on  Chrome - i convert the header\r\nfrom token - to Token.\r\nbut also reading Token from headers dont bring any results\r\n\r\nIf i copy the Chrome request to postman the header arrive to postman \r\n\r\ni have set on etc host - windows - 127.0.0.1 to localhost \r\nand I call to localhost as well.\r\n\r\nHow can I help the server to see the token ? it feels the problem is on react\r\nsince with postman all is working\r\nI tried also to play with cros filter setting- to allow, but still same issue\r\n\r\n\r\n\r\n    @Configuration\r\n    public class CorsConfig implements WebMvcConfigurer {\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedOriginPatterns(&quot;*&quot;) // Allow requests from any origin\r\n                .allowedMethods(&quot;*&quot;) // Allow all HTTP methods (GET, POST, PUT, DELETE, etc.)\r\n                .allowedHeaders(&quot;*&quot;) // Allow all headers\r\n                .exposedHeaders(&quot;*&quot;) // Expose all headers\r\n                .allowCredentials(true);//.allowedOriginPatterns(&quot;*&quot;); // Allow credentials (e.g., cookies)\r\n\r\n    }\r\n\r\n","title":"React client headers are missing in the server spring boot - while they do arrive with postman","body":"<p>I have a React client app which is making Http Get to the server</p>\n<pre><code>  export const restApiGet = async (apiPath: string) =&gt; {\n    const headers  = {\n      'token': 'aaaa',\n      'postman-token': 'bbbb',\n    };\n    return Axios.get(`${apiUrl}${apiPath}`, {\n      withCredentials: true, // Include cookies in the request\n      headers: headers\n    }\n    );\n  };\n</code></pre>\n<p>the request arrive to the server which is spring boot java</p>\n<p>but in My server I have a filter, I need to read the token header</p>\n<pre><code>@Component\n@WebFilter\npublic class UserIdFilter implements Filter {\n\n    //TODO add filter for all response if object has userId column it must match the userId of the token\n    private final AbstractCacheService abstractCacheService;\n\n    public UserIdFilter(AbstractCacheService abstractCacheService) {\n        this.abstractCacheService = abstractCacheService;\n    }\n    \n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n       \n}\n</code></pre>\n<p>But in the server when I try to get the header its null</p>\n<p>If i look on the request on  Chrome - i convert the header\nfrom token - to Token.\nbut also reading Token from headers dont bring any results</p>\n<p>If i copy the Chrome request to postman the header arrive to postman</p>\n<p>i have set on etc host - windows - 127.0.0.1 to localhost\nand I call to localhost as well.</p>\n<p>How can I help the server to see the token ? it feels the problem is on react\nsince with postman all is working\nI tried also to play with cros filter setting- to allow, but still same issue</p>\n<pre><code>@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n@Override\npublic void addCorsMappings(CorsRegistry registry) {\n    registry.addMapping(&quot;/**&quot;)\n            .allowedOriginPatterns(&quot;*&quot;) // Allow requests from any origin\n            .allowedMethods(&quot;*&quot;) // Allow all HTTP methods (GET, POST, PUT, DELETE, etc.)\n            .allowedHeaders(&quot;*&quot;) // Allow all headers\n            .exposedHeaders(&quot;*&quot;) // Expose all headers\n            .allowCredentials(true);//.allowedOriginPatterns(&quot;*&quot;); // Allow credentials (e.g., cookies)\n\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":6518696,"reputation":10106,"user_id":5043585,"display_name":"Guillaume Smet"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1610653541,"creation_date":1610653541,"answer_id":65725919,"question_id":65720131,"body_markdown":"AFAICS, the issue comes from the fact that `exception.getMessage()` is null.\r\n\r\nThe message you pass to `buildConstraintViolationWithTemplate` shouldn&#39;t be null.\r\n\r\nThat being said, we probably need to handle this more gracefully (or at least throw a proper error message). I created https://hibernate.atlassian.net/browse/HV-1825 for that.","title":"An exception occurred during message interpolation Spring Validation","body":"<p>AFAICS, the issue comes from the fact that <code>exception.getMessage()</code> is null.</p>\n<p>The message you pass to <code>buildConstraintViolationWithTemplate</code> shouldn't be null.</p>\n<p>That being said, we probably need to handle this more gracefully (or at least throw a proper error message). I created <a href=\"https://hibernate.atlassian.net/browse/HV-1825\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HV-1825</a> for that.</p>\n"},{"tags":[],"owner":{"account_id":30097594,"reputation":1,"user_id":23065503,"display_name":"Chirra Yeshwanth Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702035480,"creation_date":1702035480,"answer_id":77626288,"question_id":65720131,"body_markdown":"similar error came for me aswell, for the below code\r\n\r\n    for (String user : users) {\r\n      if (bouncedOrComplaintsList.contains(user)) {\r\n        // some code\r\n      }\r\n    }\r\n\r\nIn my case users in above code is null, make sure it is not null\r\n","title":"An exception occurred during message interpolation Spring Validation","body":"<p>similar error came for me aswell, for the below code</p>\n<pre><code>for (String user : users) {\n  if (bouncedOrComplaintsList.contains(user)) {\n    // some code\n  }\n}\n</code></pre>\n<p>In my case users in above code is null, make sure it is not null</p>\n"}],"owner":{"account_id":20364415,"reputation":323,"user_id":14938103,"display_name":"Dogukan Evcil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2092,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65725919,"answer_count":2,"score":1,"last_activity_date":1702035480,"creation_date":1610631778,"question_id":65720131,"body_markdown":"I have a method to validate some data in my controller. In that method I validate the incoming data with two different validators. Each validators make some process with the submitted data and if there is a runtime exception they return false. \r\n\r\n```\r\n@RestController\r\n@RequestMapping(value = &quot;/inputs&quot;)\r\npublic class InputValidationController{\r\n\r\n    private final SpringValidatorAdapter adapter;\r\n\r\n    @Inject\r\n    public InputValidationController(Validator validator) {\r\n        this.adapter = new SpringValidatorAdapter(validator);\r\n    }\r\n\r\n    @RequestMapping(value = &quot;/validate&quot;, method = RequestMethod.POST)\r\n    @PreAuthorize(&quot;hasAuthorizedIp()&quot;)\r\n    public void validate(@RequestBody Input input) {\r\n        Set&lt;ConstraintViolation&lt;Input &gt;&gt; violations = adapter.validate(input, Default.class);\r\n        if (violations.isEmpty()) {\r\n            adapter.validate(input, ValidationGroupExtended.class);\r\n        }\r\n        if (!violations.isEmpty()) {\r\n            throw new ConstraintViolationException(violations);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\nI am testing the second validator which is inside the if statement. I changed the data to have some null values that will cause an null pointer exception.\r\n\r\n```\r\npublic class InputValidator implements ConstraintValidator&lt;ValidInput, Input&gt; {\r\n\r\n    @Override\r\n    public boolean isValid(Input value, ConstraintValidatorContext context) {\r\n\r\n        try {\r\n\r\n            ... Some logic\r\n            return true;\r\n\r\n        }catch (Throwable exception) {\r\n            context.disableDefaultConstraintViolation();\r\n            context.buildConstraintViolationWithTemplate(exception.getMessage()).addConstraintViolation();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public @interface ValidationGroupExtended {\r\n    }\r\n}\r\n```\r\nThis returns false as expected but after that during the message interpolation, I got another null pointer at this location \r\n\r\n```\r\npackage org.hibernate.validator.internal.engine;\r\n\r\n...\r\n\r\n\tprivate String interpolate(String messageTemplate,\r\n\t\t\tObject validatedValue,\r\n\t\t\tConstraintDescriptor&lt;?&gt; descriptor,\r\n\t\t\tMap&lt;String, Object&gt; messageParameters,\r\n\t\t\tMap&lt;String, Object&gt; expressionVariables) {\r\n\t\tMessageInterpolatorContext context = new MessageInterpolatorContext(\r\n\t\t\t\tdescriptor,\r\n\t\t\t\tvalidatedValue,\r\n\t\t\t\tgetRootBeanClass(),\r\n\t\t\t\tmessageParameters,\r\n\t\t\t\texpressionVariables\r\n\t\t);\r\n\r\n\t\ttry {\r\n\t\t\treturn validatorScopedContext.getMessageInterpolator().interpolate(\r\n\t\t\t\t\tmessageTemplate,\r\n\t\t\t\t\tcontext\r\n\t\t\t);\r\n\t\t}\r\n\t\tcatch (ValidationException ve) {\r\n\t\t\tthrow ve;\r\n\t\t}\r\n\t\tcatch (Exception e) {\r\n\t\t\tthrow LOG.getExceptionOccurredDuringMessageInterpolationException( e );\r\n\t\t}\r\n\t}\r\n```\r\n\r\nAnd get this response afterwards \r\n\r\n  \r\n\r\n&gt;  &quot;HV000149: An exception occurred during message interpolation&quot;,\r\n\r\n\r\nI couldn&#39;t figure out what causes this issue, what am I missing or doing wrong? \r\n\r\n\r\n```\r\njava.lang.NullPointerException: null\r\n\tat org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolateMessage(AbstractMessageInterpolator.java:256) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolate(AbstractMessageInterpolator.java:232) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.springframework.validation.beanvalidation.LocaleContextMessageInterpolator.interpolate(LocaleContextMessageInterpolator.java:51) ~[spring-context-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.hibernate.validator.internal.engine.ValidationContext.interpolate(ValidationContext.java:465) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidationContext.createConstraintViolation(ValidationContext.java:319) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidationContext.lambda$createConstraintViolations$0(ValidationContext.java:276) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_271]\r\n\tat java.util.Collections$2.tryAdvance(Collections.java:4719) ~[na:1.8.0_271]\r\n\tat java.util.Collections$2.forEachRemaining(Collections.java:4727) ~[na:1.8.0_271]\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_271]\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_271]\r\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_271]\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_271]\r\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499) ~[na:1.8.0_271]\r\n\tat org.hibernate.validator.internal.engine.ValidationContext.createConstraintViolations(ValidationContext.java:277) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:182) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:68) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:73) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:127) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:120) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:552) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraints(ValidatorImpl.java:534) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForNonDefaultGroup(ValidatorImpl.java:526) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:444) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:397) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:173) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\r\n\tat org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:358) ~[spring-context-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:358) ~[spring-context-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat com.company.company.api.controllers.InputValidationController.validate(InputValidationController.java:35) ~[classes/:na]\r\n\tat com.company.company.api.controllers.InputValidationController$$FastClassBySpringCGLIB$$64bbfbae.invoke(&lt;generated&gt;) ~[classes/:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69) ~[spring-security-core-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat com.company.company.api.controllers.InputValidationController$$EnhancerBySpringCGLIB$$326105f6.validate(&lt;generated&gt;) ~[classes/:na]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_271]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_271]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_271]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_271]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat com.company.commons.security.util.CredentialsExpiredAuthorizationFilter.doFilterInternal(CredentialsExpiredAuthorizationFilter.java:53) ~[commons-security-2.6.0-SNAPSHOT.jar:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat com.company.commons.security.util.ClientAuthenticationFilter.doFilterInternal(ClientAuthenticationFilter.java:97) ~[commons-security-2.6.0-SNAPSHOT.jar:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:171) ~[spring-session-1.3.5.RELEASE.jar:na]\r\n\tat org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) ~[spring-session-1.3.5.RELEASE.jar:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108) ~[spring-boot-actuator-2.2.0.RELEASE.jar:2.2.0.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1579) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_271]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_271]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_271]\r\n\r\n\r\n\r\n```","title":"An exception occurred during message interpolation Spring Validation","body":"<p>I have a method to validate some data in my controller. In that method I validate the incoming data with two different validators. Each validators make some process with the submitted data and if there is a runtime exception they return false.</p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;/inputs&quot;)\npublic class InputValidationController{\n\n    private final SpringValidatorAdapter adapter;\n\n    @Inject\n    public InputValidationController(Validator validator) {\n        this.adapter = new SpringValidatorAdapter(validator);\n    }\n\n    @RequestMapping(value = &quot;/validate&quot;, method = RequestMethod.POST)\n    @PreAuthorize(&quot;hasAuthorizedIp()&quot;)\n    public void validate(@RequestBody Input input) {\n        Set&lt;ConstraintViolation&lt;Input &gt;&gt; violations = adapter.validate(input, Default.class);\n        if (violations.isEmpty()) {\n            adapter.validate(input, ValidationGroupExtended.class);\n        }\n        if (!violations.isEmpty()) {\n            throw new ConstraintViolationException(violations);\n        }\n    }\n\n}\n\n</code></pre>\n<p>I am testing the second validator which is inside the if statement. I changed the data to have some null values that will cause an null pointer exception.</p>\n<pre><code>public class InputValidator implements ConstraintValidator&lt;ValidInput, Input&gt; {\n\n    @Override\n    public boolean isValid(Input value, ConstraintValidatorContext context) {\n\n        try {\n\n            ... Some logic\n            return true;\n\n        }catch (Throwable exception) {\n            context.disableDefaultConstraintViolation();\n            context.buildConstraintViolationWithTemplate(exception.getMessage()).addConstraintViolation();\n            return false;\n        }\n    }\n\n    public @interface ValidationGroupExtended {\n    }\n}\n</code></pre>\n<p>This returns false as expected but after that during the message interpolation, I got another null pointer at this location</p>\n<pre><code>package org.hibernate.validator.internal.engine;\n\n...\n\n    private String interpolate(String messageTemplate,\n            Object validatedValue,\n            ConstraintDescriptor&lt;?&gt; descriptor,\n            Map&lt;String, Object&gt; messageParameters,\n            Map&lt;String, Object&gt; expressionVariables) {\n        MessageInterpolatorContext context = new MessageInterpolatorContext(\n                descriptor,\n                validatedValue,\n                getRootBeanClass(),\n                messageParameters,\n                expressionVariables\n        );\n\n        try {\n            return validatorScopedContext.getMessageInterpolator().interpolate(\n                    messageTemplate,\n                    context\n            );\n        }\n        catch (ValidationException ve) {\n            throw ve;\n        }\n        catch (Exception e) {\n            throw LOG.getExceptionOccurredDuringMessageInterpolationException( e );\n        }\n    }\n</code></pre>\n<p>And get this response afterwards</p>\n<blockquote>\n<p>&quot;HV000149: An exception occurred during message interpolation&quot;,</p>\n</blockquote>\n<p>I couldn't figure out what causes this issue, what am I missing or doing wrong?</p>\n<pre><code>java.lang.NullPointerException: null\n    at org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolateMessage(AbstractMessageInterpolator.java:256) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolate(AbstractMessageInterpolator.java:232) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.springframework.validation.beanvalidation.LocaleContextMessageInterpolator.interpolate(LocaleContextMessageInterpolator.java:51) ~[spring-context-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.hibernate.validator.internal.engine.ValidationContext.interpolate(ValidationContext.java:465) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidationContext.createConstraintViolation(ValidationContext.java:319) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidationContext.lambda$createConstraintViolations$0(ValidationContext.java:276) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_271]\n    at java.util.Collections$2.tryAdvance(Collections.java:4719) ~[na:1.8.0_271]\n    at java.util.Collections$2.forEachRemaining(Collections.java:4727) ~[na:1.8.0_271]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_271]\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_271]\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_271]\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_271]\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499) ~[na:1.8.0_271]\n    at org.hibernate.validator.internal.engine.ValidationContext.createConstraintViolations(ValidationContext.java:277) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:182) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:68) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:73) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:127) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:120) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:552) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraints(ValidatorImpl.java:534) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForNonDefaultGroup(ValidatorImpl.java:526) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:444) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:397) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:173) ~[hibernate-validator-6.0.17.Final.jar:6.0.17.Final]\n    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:358) ~[spring-context-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:358) ~[spring-context-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at com.company.company.api.controllers.InputValidationController.validate(InputValidationController.java:35) ~[classes/:na]\n    at com.company.company.api.controllers.InputValidationController$$FastClassBySpringCGLIB$$64bbfbae.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69) ~[spring-security-core-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) ~[spring-aop-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at com.company.company.api.controllers.InputValidationController$$EnhancerBySpringCGLIB$$326105f6.validate(&lt;generated&gt;) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_271]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_271]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_271]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_271]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at com.company.commons.security.util.CredentialsExpiredAuthorizationFilter.doFilterInternal(CredentialsExpiredAuthorizationFilter.java:53) ~[commons-security-2.6.0-SNAPSHOT.jar:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at com.company.commons.security.util.ClientAuthenticationFilter.doFilterInternal(ClientAuthenticationFilter.java:97) ~[commons-security-2.6.0-SNAPSHOT.jar:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:171) ~[spring-session-1.3.5.RELEASE.jar:na]\n    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) ~[spring-session-1.3.5.RELEASE.jar:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108) ~[spring-boot-actuator-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.0.RELEASE.jar:5.2.0.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1579) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_271]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_271]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_271]\n\n\n\n</code></pre>\n"},{"tags":["java","swing","user-interface","maze","custom-painting"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":3,"creation_date":1702023698,"post_id":77625178,"comment_id":136849309,"body_markdown":"It looks like you don&#39;t understand swing painting/drawing. You&#39;re calling generateMaze in your paintComponent. Don&#39;t do that. In removeWall you&#39;re calling &quot;SwingUtilites.invokeLater&quot; and attempting to use the graphics obect passed in for paintComponent. That is fundamentally broken. **Do not change anything in your paintComponent, just paint.**","body":"It looks like you don&#39;t understand swing painting/drawing. You&#39;re calling generateMaze in your paintComponent. Don&#39;t do that. In removeWall you&#39;re calling &quot;SwingUtilites.invokeLater&quot; and attempting to use the graphics obect passed in for paintComponent. That is fundamentally broken. <b>Do not change anything in your paintComponent, just paint.</b>"},{"owner":{"account_id":29925220,"reputation":53,"user_id":22956899,"display_name":"Giorgi Chapidze"},"score":0,"creation_date":1702025620,"post_id":77625178,"comment_id":136849592,"body_markdown":"Thanks for the reply. How am I gonna reuse the graphics object? I want to draw from generateMaze method, right?","body":"Thanks for the reply. How am I gonna reuse the graphics object? I want to draw from generateMaze method, right?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1702026384,"post_id":77625178,"comment_id":136849708,"body_markdown":"Do not reuse a graphics object. The idea in paintComponent is to just draw the component. If you want to build and modify an image, then use a `BufferedImage`. You can call `getGraphics` then modify the image with that graphics. Then you don&#39;t even need a paintComponent, just use a JLable with an ImageIcon.","body":"Do not reuse a graphics object. The idea in paintComponent is to just draw the component. If you want to build and modify an image, then use a <code>BufferedImage</code>. You can call <code>getGraphics</code> then modify the image with that graphics. Then you don&#39;t even need a paintComponent, just use a JLable with an ImageIcon."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1702027473,"post_id":77625178,"comment_id":136849859,"body_markdown":"`setDoubleBuffered(true);` is pointless, `JPanel` is already double buffered, you should also be calling `super.paintComponent` first before doing any custom painting","body":"<code>setDoubleBuffered(true);</code> is pointless, <code>JPanel</code> is already double buffered, you should also be calling <code>super.paintComponent</code> first before doing any custom painting"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1702027610,"post_id":77625178,"comment_id":136849883,"body_markdown":"*&quot; How am I gonna reuse the graphics object? I want to draw from generateMaze method, right?&quot;* - Painting can occur for any number of reasons, most of which you don&#39;t control.  This also means that you perform you paint pass as quick as possible.  Instead of trying to generate the maze each time the paint method is called, generate on the class creation and cache the data, use this to render the maze, or as matt has suggested, render it to a `BufferedImage`, but you might have issues if you want it to resize dynamically","body":"<i>&quot; How am I gonna reuse the graphics object? I want to draw from generateMaze method, right?&quot;</i> - Painting can occur for any number of reasons, most of which you don&#39;t control.  This also means that you perform you paint pass as quick as possible.  Instead of trying to generate the maze each time the paint method is called, generate on the class creation and cache the data, use this to render the maze, or as matt has suggested, render it to a <code>BufferedImage</code>, but you might have issues if you want it to resize dynamically"}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702034112,"creation_date":1702033611,"answer_id":77626123,"question_id":77625178,"body_markdown":"# Introduction\r\n\r\nI redid your drawing code and came up with the following GUI.  This is your maze grid with no walls removed.\r\n\r\n[![Starting GUI][1]][1]\r\n\r\nIf you expand the GUI by clicking the box in the upper right, the grid resizes.  It&#39;s hard to see because Stack Overflow scales the image.\r\n\r\n[![Expanded GUI][2]][2]\r\n\r\n# Explanation\r\n\r\nOracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.\r\n\r\nWhen I create a Swing GUI, I use the [model-view-controller][3] (MVC) pattern.  This pattern allows me to separate my concerns and focus on one small part of the Java application at a time.\r\n\r\nA Swing model is made up of one or more plain Java getter/setter classes.\r\n\r\nA Swing view is made up of one `JFrame` and as many `JPanels` or `JDialogs` as you need.\r\n\r\nEach Action or Listener is a Swing controller.  There&#39;s usually not one controller to &quot;rule them all&quot;.\r\n\r\n## Model\r\n\r\nI rewrote your Cell class.  You don&#39;t need the coordinate because the cell position in the grid provides the coordinate.  The coordinate is the x, y position of the cell in the grid, starting with 0,0 and going up to 39,39.\r\n\r\n\tpublic class Cell {\r\n\t\t\r\n\t\tprivate boolean north, south, east, west;\r\n\t\t\r\n\t\tpublic Cell() {\r\n\t\t\tthis.north = true;\r\n\t\t\tthis.south = true;\r\n\t\t\tthis.east = true;\r\n\t\t\tthis.west = true;\r\n\t\t}\r\n\r\n\t\tpublic boolean isNorth() {\r\n\t\t\treturn north;\r\n\t\t}\r\n\r\n\t\tpublic void setNorth(boolean north) {\r\n\t\t\tthis.north = north;\r\n\t\t}\r\n\r\n\t\tpublic boolean isSouth() {\r\n\t\t\treturn south;\r\n\t\t}\r\n\r\n\t\tpublic void setSouth(boolean south) {\r\n\t\t\tthis.south = south;\r\n\t\t}\r\n\r\n\t\tpublic boolean isEast() {\r\n\t\t\treturn east;\r\n\t\t}\r\n\r\n\t\tpublic void setEast(boolean east) {\r\n\t\t\tthis.east = east;\r\n\t\t}\r\n\r\n\t\tpublic boolean isWest() {\r\n\t\t\treturn west;\r\n\t\t}\r\n\r\n\t\tpublic void setWest(boolean west) {\r\n\t\t\tthis.west = west;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nYour code to create the maze will remove the walls of a cell by setting the appropriate `boolean` to `false`;  The Swing view code will paint the status of the grid.  Period.  Nothing else.\r\n\r\nHere&#39;s the `PerfectMazeModel` class.\r\n\r\n\tpublic class PerfectMazeModel {\r\n\t\t\r\n\t\tpublic final Cell[][] grid;\r\n\t\t\r\n\t\tpublic PerfectMazeModel() {\r\n\t\t\tthis.grid = new Cell[40][40];\r\n\t\t\tfor (int y = 0; y &lt; grid.length; y++) {\r\n\t\t\t\tfor (int x = 0; x &lt; grid[y].length; x++) {\r\n\t\t\t\t\tgrid[y][x] = new Cell();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic Cell[][] getGrid() {\r\n\t\t\treturn grid;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nHere we create the grid.  You don&#39;t have to make the grid square.\r\n\r\n## View\r\n\r\nI use a `JFrame` and create a drawing `JPanel`.  The drawing code is a bit complicated. \r\n\r\n\tpublic class DrawingPanel extends JPanel {\r\n\r\n\t\tprivate static final long serialVersionUID = 1L;\r\n\t\t\r\n\t\tprivate final PerfectMazeModel model;\r\n\t\t\r\n\t\tpublic DrawingPanel(PerfectMazeModel model) {\r\n\t\t\tthis.model = model;\r\n\t\t\tthis.setPreferredSize(new Dimension(800, 800));\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tprotected void paintComponent(Graphics g) {\r\n\t\t\tsuper.paintComponent(g);\r\n\t\t\t\r\n\t\t\tCell[][] grid = model.getGrid();\r\n\t\t\tint margin = 20;\r\n\t\t\tint width = this.getWidth() - 2 * margin;\r\n\t\t\tint height = this.getHeight() - 2 * margin;\r\n\t\t\tint cellWidth = width / grid[0].length;\r\n\t\t\tint cellHeight = height / grid.length;\r\n\t\t\tint cellDimension = Math.min(cellWidth, cellHeight);\r\n\t\t\t\r\n\t\t\tint dx = margin;\r\n\t\t\tint dy = margin;\r\n\t\t\tfor (int y = 0; y &lt; grid.length; y++) {\r\n\t\t\t\tfor (int x = 0; x &lt; grid[y].length; x++) {\r\n\t\t\t\t\tCell cell = grid[y][x];\r\n\t\t\t\t\tif (cell.isNorth()) {\r\n\t\t\t\t\t\tg.drawLine(dx, dy, dx + cellDimension, dy);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cell.isWest()) {\r\n\t\t\t\t\t\tg.drawLine(dx, dy, dx, dy + cellDimension);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cell.isSouth()) {\r\n\t\t\t\t\t\tint cx = dx + cellDimension;\r\n\t\t\t\t\t\tint cy = dy + cellDimension;\r\n\t\t\t\t\t\tg.drawLine(dx, cy, cx, cy);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cell.isEast()) {\r\n\t\t\t\t\t\tint cx = dx + cellDimension;\r\n\t\t\t\t\t\tint cy = dy + cellDimension;\r\n\t\t\t\t\t\tg.drawLine(cx, dy, cx, cy);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdx += cellDimension;\r\n\t\t\t\t}\r\n\t\t\t\tdx = margin;\r\n\t\t\t\tdy += cellDimension;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nWe get the cell dimension based on the current width and height of the drawing `JPanel`.\r\n\r\nx and y are the logical coordinates of the grid cell.  dx and dy are the upper left corner of the grid cell.  cx and cy are the upper right and lower left points of the grid cell.  We draw the line based on the boolean flag.\r\n\r\nThe cell/grid model isn&#39;t perfect because the east line of one cell is the same line as the west line of the adjacent cell.  The same holds true for the north and south lines of a cell.\r\n\r\n## Controller\r\n\r\nSince I&#39;m just showing the model and drawing code, there are no controllers.  I&#39;ve left the addition of the code to remove lines for you.\r\n\r\n# Code\r\n\r\nHere&#39;s the complete runnable code.  I made the additional classes inner classes so I could post this code as one block.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Dimension;\r\n    import java.awt.Graphics;\r\n    \r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class PerfectMaze implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new PerfectMaze());\r\n    \t}\r\n    \t\r\n    \tprivate final DrawingPanel drawingPanel;\r\n    \t\r\n    \tprivate final PerfectMazeModel model;\r\n    \t\r\n    \tpublic PerfectMaze() {\r\n    \t\tthis.model = new PerfectMazeModel();\r\n    \t\tthis.drawingPanel = new DrawingPanel(model);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Perfect Maze&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\t\r\n    \t\tframe.add(drawingPanel, BorderLayout.CENTER);\r\n    \t\t\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \t\r\n    \tpublic void drawingPanelRepaint() {\r\n    \t\tthis.drawingPanel.repaint();\r\n    \t}\r\n    \t\r\n    \tpublic class DrawingPanel extends JPanel {\r\n    \r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t\r\n    \t\tprivate final PerfectMazeModel model;\r\n    \t\t\r\n    \t\tpublic DrawingPanel(PerfectMazeModel model) {\r\n    \t\t\tthis.model = model;\r\n    \t\t\tthis.setPreferredSize(new Dimension(800, 800));\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tprotected void paintComponent(Graphics g) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \t\t\t\r\n    \t\t\tCell[][] grid = model.getGrid();\r\n    \t\t\tint margin = 20;\r\n    \t\t\tint width = this.getWidth() - 2 * margin;\r\n    \t\t\tint height = this.getHeight() - 2 * margin;\r\n    \t\t\tint cellWidth = width / grid[0].length;\r\n    \t\t\tint cellHeight = height / grid.length;\r\n    \t\t\tint cellDimension = Math.min(cellWidth, cellHeight);\r\n    \t\t\t\r\n    \t\t\tint dx = margin;\r\n    \t\t\tint dy = margin;\r\n    \t\t\tfor (int y = 0; y &lt; grid.length; y++) {\r\n    \t\t\t\tfor (int x = 0; x &lt; grid[y].length; x++) {\r\n    \t\t\t\t\tCell cell = grid[y][x];\r\n    \t\t\t\t\tif (cell.isNorth()) {\r\n    \t\t\t\t\t\tg.drawLine(dx, dy, dx + cellDimension, dy);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif (cell.isWest()) {\r\n    \t\t\t\t\t\tg.drawLine(dx, dy, dx, dy + cellDimension);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif (cell.isSouth()) {\r\n    \t\t\t\t\t\tint cx = dx + cellDimension;\r\n    \t\t\t\t\t\tint cy = dy + cellDimension;\r\n    \t\t\t\t\t\tg.drawLine(dx, cy, cx, cy);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif (cell.isEast()) {\r\n    \t\t\t\t\t\tint cx = dx + cellDimension;\r\n    \t\t\t\t\t\tint cy = dy + cellDimension;\r\n    \t\t\t\t\t\tg.drawLine(cx, dy, cx, cy);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tdx += cellDimension;\r\n    \t\t\t\t}\r\n    \t\t\t\tdx = margin;\r\n    \t\t\t\tdy += cellDimension;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic class PerfectMazeModel {\r\n    \t\t\r\n    \t\tpublic final Cell[][] grid;\r\n    \t\t\r\n    \t\tpublic PerfectMazeModel() {\r\n    \t\t\tthis.grid = new Cell[40][40];\r\n    \t\t\tfor (int y = 0; y &lt; grid.length; y++) {\r\n    \t\t\t\tfor (int x = 0; x &lt; grid[y].length; x++) {\r\n    \t\t\t\t\tgrid[y][x] = new Cell();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tpublic Cell[][] getGrid() {\r\n    \t\t\treturn grid;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic class Cell {\r\n    \t\t\r\n    \t\tprivate boolean north, south, east, west;\r\n    \t\t\r\n    \t\tpublic Cell() {\r\n    \t\t\tthis.north = true;\r\n    \t\t\tthis.south = true;\r\n    \t\t\tthis.east = true;\r\n    \t\t\tthis.west = true;\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isNorth() {\r\n    \t\t\treturn north;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setNorth(boolean north) {\r\n    \t\t\tthis.north = north;\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isSouth() {\r\n    \t\t\treturn south;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setSouth(boolean south) {\r\n    \t\t\tthis.south = south;\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isEast() {\r\n    \t\t\treturn east;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setEast(boolean east) {\r\n    \t\t\tthis.east = east;\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isWest() {\r\n    \t\t\treturn west;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setWest(boolean west) {\r\n    \t\t\tthis.west = west;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XT4d9.png\r\n  [2]: https://i.stack.imgur.com/FiQfr.png\r\n  [3]: https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\r\n","title":"Swing - UI changes are not affected","body":"<h1>Introduction</h1>\n<p>I redid your drawing code and came up with the following GUI.  This is your maze grid with no walls removed.</p>\n<p><a href=\"https://i.stack.imgur.com/XT4d9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XT4d9.png\" alt=\"Starting GUI\" /></a></p>\n<p>If you expand the GUI by clicking the box in the upper right, the grid resizes.  It's hard to see because Stack Overflow scales the image.</p>\n<p><a href=\"https://i.stack.imgur.com/FiQfr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FiQfr.png\" alt=\"Expanded GUI\" /></a></p>\n<h1>Explanation</h1>\n<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section.</p>\n<p>When I create a Swing GUI, I use the <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\">model-view-controller</a> (MVC) pattern.  This pattern allows me to separate my concerns and focus on one small part of the Java application at a time.</p>\n<p>A Swing model is made up of one or more plain Java getter/setter classes.</p>\n<p>A Swing view is made up of one <code>JFrame</code> and as many <code>JPanels</code> or <code>JDialogs</code> as you need.</p>\n<p>Each Action or Listener is a Swing controller.  There's usually not one controller to &quot;rule them all&quot;.</p>\n<h2>Model</h2>\n<p>I rewrote your Cell class.  You don't need the coordinate because the cell position in the grid provides the coordinate.  The coordinate is the x, y position of the cell in the grid, starting with 0,0 and going up to 39,39.</p>\n<pre><code>public class Cell {\n    \n    private boolean north, south, east, west;\n    \n    public Cell() {\n        this.north = true;\n        this.south = true;\n        this.east = true;\n        this.west = true;\n    }\n\n    public boolean isNorth() {\n        return north;\n    }\n\n    public void setNorth(boolean north) {\n        this.north = north;\n    }\n\n    public boolean isSouth() {\n        return south;\n    }\n\n    public void setSouth(boolean south) {\n        this.south = south;\n    }\n\n    public boolean isEast() {\n        return east;\n    }\n\n    public void setEast(boolean east) {\n        this.east = east;\n    }\n\n    public boolean isWest() {\n        return west;\n    }\n\n    public void setWest(boolean west) {\n        this.west = west;\n    }\n    \n}\n</code></pre>\n<p>Your code to create the maze will remove the walls of a cell by setting the appropriate <code>boolean</code> to <code>false</code>;  The Swing view code will paint the status of the grid.  Period.  Nothing else.</p>\n<p>Here's the <code>PerfectMazeModel</code> class.</p>\n<pre><code>public class PerfectMazeModel {\n    \n    public final Cell[][] grid;\n    \n    public PerfectMazeModel() {\n        this.grid = new Cell[40][40];\n        for (int y = 0; y &lt; grid.length; y++) {\n            for (int x = 0; x &lt; grid[y].length; x++) {\n                grid[y][x] = new Cell();\n            }\n        }\n    }\n\n    public Cell[][] getGrid() {\n        return grid;\n    }\n    \n}\n</code></pre>\n<p>Here we create the grid.  You don't have to make the grid square.</p>\n<h2>View</h2>\n<p>I use a <code>JFrame</code> and create a drawing <code>JPanel</code>.  The drawing code is a bit complicated.</p>\n<pre><code>public class DrawingPanel extends JPanel {\n\n    private static final long serialVersionUID = 1L;\n    \n    private final PerfectMazeModel model;\n    \n    public DrawingPanel(PerfectMazeModel model) {\n        this.model = model;\n        this.setPreferredSize(new Dimension(800, 800));\n    }\n    \n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        \n        Cell[][] grid = model.getGrid();\n        int margin = 20;\n        int width = this.getWidth() - 2 * margin;\n        int height = this.getHeight() - 2 * margin;\n        int cellWidth = width / grid[0].length;\n        int cellHeight = height / grid.length;\n        int cellDimension = Math.min(cellWidth, cellHeight);\n        \n        int dx = margin;\n        int dy = margin;\n        for (int y = 0; y &lt; grid.length; y++) {\n            for (int x = 0; x &lt; grid[y].length; x++) {\n                Cell cell = grid[y][x];\n                if (cell.isNorth()) {\n                    g.drawLine(dx, dy, dx + cellDimension, dy);\n                }\n                if (cell.isWest()) {\n                    g.drawLine(dx, dy, dx, dy + cellDimension);\n                }\n                if (cell.isSouth()) {\n                    int cx = dx + cellDimension;\n                    int cy = dy + cellDimension;\n                    g.drawLine(dx, cy, cx, cy);\n                }\n                if (cell.isEast()) {\n                    int cx = dx + cellDimension;\n                    int cy = dy + cellDimension;\n                    g.drawLine(cx, dy, cx, cy);\n                }\n                dx += cellDimension;\n            }\n            dx = margin;\n            dy += cellDimension;\n        }\n    }\n}\n</code></pre>\n<p>We get the cell dimension based on the current width and height of the drawing <code>JPanel</code>.</p>\n<p>x and y are the logical coordinates of the grid cell.  dx and dy are the upper left corner of the grid cell.  cx and cy are the upper right and lower left points of the grid cell.  We draw the line based on the boolean flag.</p>\n<p>The cell/grid model isn't perfect because the east line of one cell is the same line as the west line of the adjacent cell.  The same holds true for the north and south lines of a cell.</p>\n<h2>Controller</h2>\n<p>Since I'm just showing the model and drawing code, there are no controllers.  I've left the addition of the code to remove lines for you.</p>\n<h1>Code</h1>\n<p>Here's the complete runnable code.  I made the additional classes inner classes so I could post this code as one block.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class PerfectMaze implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new PerfectMaze());\n    }\n    \n    private final DrawingPanel drawingPanel;\n    \n    private final PerfectMazeModel model;\n    \n    public PerfectMaze() {\n        this.model = new PerfectMazeModel();\n        this.drawingPanel = new DrawingPanel(model);\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Perfect Maze&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        frame.add(drawingPanel, BorderLayout.CENTER);\n        \n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n    \n    public void drawingPanelRepaint() {\n        this.drawingPanel.repaint();\n    }\n    \n    public class DrawingPanel extends JPanel {\n\n        private static final long serialVersionUID = 1L;\n        \n        private final PerfectMazeModel model;\n        \n        public DrawingPanel(PerfectMazeModel model) {\n            this.model = model;\n            this.setPreferredSize(new Dimension(800, 800));\n        }\n        \n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            \n            Cell[][] grid = model.getGrid();\n            int margin = 20;\n            int width = this.getWidth() - 2 * margin;\n            int height = this.getHeight() - 2 * margin;\n            int cellWidth = width / grid[0].length;\n            int cellHeight = height / grid.length;\n            int cellDimension = Math.min(cellWidth, cellHeight);\n            \n            int dx = margin;\n            int dy = margin;\n            for (int y = 0; y &lt; grid.length; y++) {\n                for (int x = 0; x &lt; grid[y].length; x++) {\n                    Cell cell = grid[y][x];\n                    if (cell.isNorth()) {\n                        g.drawLine(dx, dy, dx + cellDimension, dy);\n                    }\n                    if (cell.isWest()) {\n                        g.drawLine(dx, dy, dx, dy + cellDimension);\n                    }\n                    if (cell.isSouth()) {\n                        int cx = dx + cellDimension;\n                        int cy = dy + cellDimension;\n                        g.drawLine(dx, cy, cx, cy);\n                    }\n                    if (cell.isEast()) {\n                        int cx = dx + cellDimension;\n                        int cy = dy + cellDimension;\n                        g.drawLine(cx, dy, cx, cy);\n                    }\n                    dx += cellDimension;\n                }\n                dx = margin;\n                dy += cellDimension;\n            }\n        }\n    }\n    \n    public class PerfectMazeModel {\n        \n        public final Cell[][] grid;\n        \n        public PerfectMazeModel() {\n            this.grid = new Cell[40][40];\n            for (int y = 0; y &lt; grid.length; y++) {\n                for (int x = 0; x &lt; grid[y].length; x++) {\n                    grid[y][x] = new Cell();\n                }\n            }\n        }\n\n        public Cell[][] getGrid() {\n            return grid;\n        }\n        \n    }\n    \n    public class Cell {\n        \n        private boolean north, south, east, west;\n        \n        public Cell() {\n            this.north = true;\n            this.south = true;\n            this.east = true;\n            this.west = true;\n        }\n\n        public boolean isNorth() {\n            return north;\n        }\n\n        public void setNorth(boolean north) {\n            this.north = north;\n        }\n\n        public boolean isSouth() {\n            return south;\n        }\n\n        public void setSouth(boolean south) {\n            this.south = south;\n        }\n\n        public boolean isEast() {\n            return east;\n        }\n\n        public void setEast(boolean east) {\n            this.east = east;\n        }\n\n        public boolean isWest() {\n            return west;\n        }\n\n        public void setWest(boolean west) {\n            this.west = west;\n        }\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":29925220,"reputation":53,"user_id":22956899,"display_name":"Giorgi Chapidze"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77626123,"answer_count":1,"score":0,"last_activity_date":1702034112,"creation_date":1702023036,"question_id":77625178,"body_markdown":"I&#39;m sketching the grid on the user interface using the width and height that I specified when I created the GridPanel, accordingly. For representational purposes, I am laying the grid starting at 30, 30, and ending at x - 60, y - 60. Depending on the grid dimensions, dynamic shrink and grow are implemented using scaleX and scaleY.\r\n\r\nThe image below displays the internals of the cell object.\r\n\r\n[Cell object](https://i.stack.imgur.com/NVWeB.jpg)\r\n\r\nGenerateMaze is a recursive backtracking algorithm used to generate perfect mazes. (Surely not complete, but I still should be able to see the result.)\r\n\r\n\r\n```\r\npublic class GridPanel extends JPanel {\r\n    private class Cell {\r\n        private int y, x;\r\n        private int[] south;\r\n        private int[] north;\r\n        private int[] west;\r\n        private int[] east;\r\n\r\n        private Cell(int y, int x) {\r\n            this.y = y;\r\n            this.x = x;\r\n\r\n            this.south = new int[4];\r\n            this.north = new int[4];\r\n            this.west = new int[4];\r\n            this.east = new int[4];\r\n        }\r\n    }\r\n\r\n    private int w, h;\r\n    private final int scaleX, scaleY;\r\n    private final int Vx, Vy;\r\n    private final Cell[][] grid;\r\n    private boolean[][] discovered;\r\n\r\n    public GridPanel(int w, int h) {\r\n        setLayout(new GridLayout(1, 1));\r\n\r\n        this.w = w;\r\n        this.h = h;\r\n\r\n        scaleX = (int) (w / Math.sqrt(w));\r\n        scaleY = (int) (h / Math.sqrt(h));\r\n\r\n        Vx = w / scaleX;\r\n        Vy = w / scaleY;\r\n\r\n        discovered = new boolean[Vy][Vx];\r\n\r\n        grid = new Cell[Vy][Vx];\r\n        init(grid);\r\n    }\r\n\r\n    private void init(Cell[][] grid) {\r\n        for (int j = 0; j &lt; grid.length; j++) {\r\n            for (int i = 0; i &lt; grid[0].length; i++) {\r\n                grid[j][i] = new Cell(j, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        setDoubleBuffered(true);\r\n        g.setColor(Color.CYAN);\r\n\r\n        for (int y = 30, j = 0; y &lt; h - 60; y += scaleY, j++) {\r\n            for (int x = 30, i = 0; x &lt; w - 60; x += scaleX, i++) {\r\n                Cell cell = grid[j][i];\r\n\r\n                cell.east = new int[]{x, y, x, y + scaleY};\r\n                cell.west = new int[]{x + scaleX, y, x + scaleX, y + scaleY};\r\n                cell.north = new int[]{x, y, x + scaleX, y};\r\n                cell.south = new int[]{x, y + scaleY, x + scaleX, y + scaleY};\r\n\r\n                g.drawLine(cell.east[0], cell.east[1], cell.east[2], cell.east[3]);\r\n                g.drawLine(cell.west[0], cell.west[1], cell.west[2], cell.west[3]);\r\n                g.drawLine(cell.south[0], cell.south[1], cell.south[2], cell.south[3]);\r\n                g.drawLine(cell.north[0], cell.north[1], cell.north[2], cell.north[3]);\r\n            }\r\n        }\r\n\r\n        generateMaze(g, 0, 0);\r\n    }\r\n\r\n    private void generateMaze(Graphics g, int y, int x) {\r\n        discovered[y][x] = true;\r\n\r\n        while (true) {\r\n            Cell current = grid[y][x];\r\n\r\n            if (validUp(y) &amp;&amp; !discovered[y - 1][x]) {\r\n                removeWall(g, current.north);\r\n                generateMaze(g, y - 1, x);\r\n            }\r\n            if (validDown(y) &amp;&amp; !discovered[y + 1][x]) {\r\n                removeWall(g, current.south);\r\n                generateMaze(g, y + 1, x);\r\n            }\r\n            if (validRight(x) &amp;&amp; !discovered[y][x + 1]) {\r\n                removeWall(g, current.east);\r\n                generateMaze(g, y, x + 1);\r\n            }\r\n            if (validLeft(x) &amp;&amp; !discovered[y][x - 1]) {\r\n                removeWall(g, current.west);\r\n                generateMaze(g, y, x - 1);\r\n            }\r\n\r\n            // All neighbors have been visited, break the loop\r\n            break;\r\n        }\r\n    }\r\n\r\n\r\n    private boolean validLeft(int x) {\r\n        if (x - 1 &lt; 0) return false;\r\n        return true;\r\n    }\r\n\r\n    private boolean validRight(int x) {\r\n        if (x + 1 &lt; grid[0].length) return true;\r\n        return false;\r\n    }\r\n\r\n    private void removeWall(Graphics g, int[] coordinate) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            g.setColor(Color.BLACK);\r\n            g.drawLine(coordinate[0], coordinate[1], coordinate[2], coordinate[3]);\r\n        });\r\n    }\r\n\r\n    private boolean validDown(int y) {\r\n        if (y + 1 &lt; grid.length) return true;\r\n        return false;\r\n    }\r\n\r\n    private boolean validUp(int y) {\r\n        if (y - 1 &lt; 0) return false;\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n\r\n&#176; Application Frame:\r\n\r\n\r\n```\r\npublic class Maze extends JFrame {\r\n    private int w, h;\r\n\r\n    public Maze(int w, int h) throws HeadlessException {\r\n        super(&quot;Perfect Maze&quot;);\r\n        setResizable(false);\r\n        setBackground(Color.BLACK);\r\n\r\n        this.w = w;\r\n        this.h = h;\r\n\r\n        add(new GridPanel(w, h));\r\n\r\n        setSize(w, h);\r\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n        setVisible(true);\r\n    }\r\n}\r\n```\r\n\r\n\r\n&#176; Runner:\r\n\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            new Maze(800, 800);\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nGiven that the user interface appears and the application closes successfully, I believe the removeWall function is the cause of the issue.\r\n\r\nIt did not work when I attempted to add method: repaint() at the end of the method.","title":"Swing - UI changes are not affected","body":"<p>I'm sketching the grid on the user interface using the width and height that I specified when I created the GridPanel, accordingly. For representational purposes, I am laying the grid starting at 30, 30, and ending at x - 60, y - 60. Depending on the grid dimensions, dynamic shrink and grow are implemented using scaleX and scaleY.</p>\n<p>The image below displays the internals of the cell object.</p>\n<p><a href=\"https://i.stack.imgur.com/NVWeB.jpg\" rel=\"nofollow noreferrer\">Cell object</a></p>\n<p>GenerateMaze is a recursive backtracking algorithm used to generate perfect mazes. (Surely not complete, but I still should be able to see the result.)</p>\n<pre><code>public class GridPanel extends JPanel {\n    private class Cell {\n        private int y, x;\n        private int[] south;\n        private int[] north;\n        private int[] west;\n        private int[] east;\n\n        private Cell(int y, int x) {\n            this.y = y;\n            this.x = x;\n\n            this.south = new int[4];\n            this.north = new int[4];\n            this.west = new int[4];\n            this.east = new int[4];\n        }\n    }\n\n    private int w, h;\n    private final int scaleX, scaleY;\n    private final int Vx, Vy;\n    private final Cell[][] grid;\n    private boolean[][] discovered;\n\n    public GridPanel(int w, int h) {\n        setLayout(new GridLayout(1, 1));\n\n        this.w = w;\n        this.h = h;\n\n        scaleX = (int) (w / Math.sqrt(w));\n        scaleY = (int) (h / Math.sqrt(h));\n\n        Vx = w / scaleX;\n        Vy = w / scaleY;\n\n        discovered = new boolean[Vy][Vx];\n\n        grid = new Cell[Vy][Vx];\n        init(grid);\n    }\n\n    private void init(Cell[][] grid) {\n        for (int j = 0; j &lt; grid.length; j++) {\n            for (int i = 0; i &lt; grid[0].length; i++) {\n                grid[j][i] = new Cell(j, i);\n            }\n        }\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        setDoubleBuffered(true);\n        g.setColor(Color.CYAN);\n\n        for (int y = 30, j = 0; y &lt; h - 60; y += scaleY, j++) {\n            for (int x = 30, i = 0; x &lt; w - 60; x += scaleX, i++) {\n                Cell cell = grid[j][i];\n\n                cell.east = new int[]{x, y, x, y + scaleY};\n                cell.west = new int[]{x + scaleX, y, x + scaleX, y + scaleY};\n                cell.north = new int[]{x, y, x + scaleX, y};\n                cell.south = new int[]{x, y + scaleY, x + scaleX, y + scaleY};\n\n                g.drawLine(cell.east[0], cell.east[1], cell.east[2], cell.east[3]);\n                g.drawLine(cell.west[0], cell.west[1], cell.west[2], cell.west[3]);\n                g.drawLine(cell.south[0], cell.south[1], cell.south[2], cell.south[3]);\n                g.drawLine(cell.north[0], cell.north[1], cell.north[2], cell.north[3]);\n            }\n        }\n\n        generateMaze(g, 0, 0);\n    }\n\n    private void generateMaze(Graphics g, int y, int x) {\n        discovered[y][x] = true;\n\n        while (true) {\n            Cell current = grid[y][x];\n\n            if (validUp(y) &amp;&amp; !discovered[y - 1][x]) {\n                removeWall(g, current.north);\n                generateMaze(g, y - 1, x);\n            }\n            if (validDown(y) &amp;&amp; !discovered[y + 1][x]) {\n                removeWall(g, current.south);\n                generateMaze(g, y + 1, x);\n            }\n            if (validRight(x) &amp;&amp; !discovered[y][x + 1]) {\n                removeWall(g, current.east);\n                generateMaze(g, y, x + 1);\n            }\n            if (validLeft(x) &amp;&amp; !discovered[y][x - 1]) {\n                removeWall(g, current.west);\n                generateMaze(g, y, x - 1);\n            }\n\n            // All neighbors have been visited, break the loop\n            break;\n        }\n    }\n\n\n    private boolean validLeft(int x) {\n        if (x - 1 &lt; 0) return false;\n        return true;\n    }\n\n    private boolean validRight(int x) {\n        if (x + 1 &lt; grid[0].length) return true;\n        return false;\n    }\n\n    private void removeWall(Graphics g, int[] coordinate) {\n        SwingUtilities.invokeLater(() -&gt; {\n            g.setColor(Color.BLACK);\n            g.drawLine(coordinate[0], coordinate[1], coordinate[2], coordinate[3]);\n        });\n    }\n\n    private boolean validDown(int y) {\n        if (y + 1 &lt; grid.length) return true;\n        return false;\n    }\n\n    private boolean validUp(int y) {\n        if (y - 1 &lt; 0) return false;\n        return true;\n    }\n}\n</code></pre>\n<p>° Application Frame:</p>\n<pre><code>public class Maze extends JFrame {\n    private int w, h;\n\n    public Maze(int w, int h) throws HeadlessException {\n        super(&quot;Perfect Maze&quot;);\n        setResizable(false);\n        setBackground(Color.BLACK);\n\n        this.w = w;\n        this.h = h;\n\n        add(new GridPanel(w, h));\n\n        setSize(w, h);\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        setVisible(true);\n    }\n}\n</code></pre>\n<p>° Runner:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            new Maze(800, 800);\n        });\n    }\n}\n</code></pre>\n<p>Given that the user interface appears and the application closes successfully, I believe the removeWall function is the cause of the issue.</p>\n<p>It did not work when I attempted to add method: repaint() at the end of the method.</p>\n"},{"tags":["java","android","react-native","telephonymanager"],"answers":[{"tags":[],"owner":{"account_id":27824349,"reputation":1,"user_id":21244057,"display_name":"Usama Ahmad Baig"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702033694,"creation_date":1701960511,"answer_id":77620957,"question_id":76837328,"body_markdown":"Try to add `putExtra()`\r\n\r\n    callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n    callIntent.putExtra(&quot;com.android.phone.extra.slot&quot;, simSlotIndex);  \r\n    callIntent.putExtra(&quot;simSlot&quot;, simSlotIndex);\r\n\r\n\r\n","title":"Call using sim index in android, API level 31, android 12","body":"<p>Try to add <code>putExtra()</code></p>\n<pre><code>callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\ncallIntent.putExtra(&quot;com.android.phone.extra.slot&quot;, simSlotIndex);  \ncallIntent.putExtra(&quot;simSlot&quot;, simSlotIndex);\n</code></pre>\n"}],"owner":{"account_id":19687671,"reputation":203,"user_id":14413302,"display_name":"Nabeel Sajid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702033694,"creation_date":1691163014,"question_id":76837328,"body_markdown":"I have a scenerio where I want to call someone without human interation,\r\nI am sending phone number and sim slot index using socket, if default sim is not selected android shows me sim selector popup, but if default sim is selected it will call through sim default sim.\r\n\r\nBut I want to call throug any sim index.\r\n\r\nSame approach is working for sms, but not for phone calls\r\n\r\nHere is my code.\r\n\r\n@ReactMethod\r\n    public void makeCallWithSim(int simSlotIndex, String phoneNumber, Callback callback) {\r\n        Context context = getReactApplicationContext();\r\n        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n        if (telephonyManager == null) {\r\n            // TelephonyManager is not available, handle error\r\n            if (callback != null) {\r\n                callback.invoke(&quot;TelephonyManager is not available.&quot;);\r\n            }\r\n            return;\r\n        }\r\n\r\n        SubscriptionManager subscriptionManager = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\r\n        if (subscriptionManager == null) {\r\n            // SubscriptionManager is not available, handle error\r\n            if (callback != null) {\r\n                callback.invoke(&quot;SubscriptionManager is not available.&quot;);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Get the active subscriptions\r\n        List&lt;SubscriptionInfo&gt; activeSubscriptions = subscriptionManager.getActiveSubscriptionInfoList();\r\n        if (activeSubscriptions == null || activeSubscriptions.isEmpty()) {\r\n            // No active subscriptions found, handle error\r\n            if (callback != null) {\r\n                callback.invoke(&quot;No active subscriptions found.&quot;);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Check if the device supports multiple SIM cards\r\n        if (activeSubscriptions.size() &lt; 2) {\r\n            // Device does not support multiple SIM cards\r\n            // Use the default SIM card for the call\r\n            Log.d(&quot;Info&quot;, &quot;In IF&quot;);\r\n            Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\r\n            Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\r\n            callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n\r\n            if (callIntent.resolveActivity(context.getPackageManager()) != null) {\r\n                context.startActivity(callIntent);\r\n                if (callback != null) {\r\n                    callback.invoke(); // Call initiated successfully\r\n                }\r\n            } else {\r\n                if (callback != null) {\r\n                    callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\r\n                }\r\n            }\r\n        } else {\r\n            Log.d(&quot;Info&quot;, &quot;In ELSE&quot;);\r\n            // Get the subscription ID for the given SIM slot\r\n            // SubscriptionInfo subscriptionInfo = activeSubscriptions.get(simSlotIndex);\r\n            SubscriptionInfo subscriptionInfo = subscriptionManager.getActiveSubscriptionInfoForSimSlotIndex(simSlotIndex);\r\n            int subscriptionId = subscriptionInfo.getSubscriptionId();\r\n\r\n            // Set the SIM subscription ID for the call\r\n            telephonyManager = telephonyManager.createForSubscriptionId(subscriptionId);\r\n\r\n            // Make the call using the specified SIM\r\n            Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\r\n            Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\r\n            callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n\r\n            if (callIntent.resolveActivity(context.getPackageManager()) != null) {\r\n                context.startActivity(callIntent);\r\n                if (callback != null) {\r\n                    callback.invoke(); // Call initiated successfully\r\n                }\r\n            } else {\r\n                if (callback != null) {\r\n                    callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\r\n                }\r\n            }\r\n        }\r\n    }","title":"Call using sim index in android, API level 31, android 12","body":"<p>I have a scenerio where I want to call someone without human interation,\nI am sending phone number and sim slot index using socket, if default sim is not selected android shows me sim selector popup, but if default sim is selected it will call through sim default sim.</p>\n<p>But I want to call throug any sim index.</p>\n<p>Same approach is working for sms, but not for phone calls</p>\n<p>Here is my code.</p>\n<p>@ReactMethod\npublic void makeCallWithSim(int simSlotIndex, String phoneNumber, Callback callback) {\nContext context = getReactApplicationContext();\nTelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\nif (telephonyManager == null) {\n// TelephonyManager is not available, handle error\nif (callback != null) {\ncallback.invoke(&quot;TelephonyManager is not available.&quot;);\n}\nreturn;\n}</p>\n<pre><code>    SubscriptionManager subscriptionManager = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\n    if (subscriptionManager == null) {\n        // SubscriptionManager is not available, handle error\n        if (callback != null) {\n            callback.invoke(&quot;SubscriptionManager is not available.&quot;);\n        }\n        return;\n    }\n\n    // Get the active subscriptions\n    List&lt;SubscriptionInfo&gt; activeSubscriptions = subscriptionManager.getActiveSubscriptionInfoList();\n    if (activeSubscriptions == null || activeSubscriptions.isEmpty()) {\n        // No active subscriptions found, handle error\n        if (callback != null) {\n            callback.invoke(&quot;No active subscriptions found.&quot;);\n        }\n        return;\n    }\n\n    // Check if the device supports multiple SIM cards\n    if (activeSubscriptions.size() &lt; 2) {\n        // Device does not support multiple SIM cards\n        // Use the default SIM card for the call\n        Log.d(&quot;Info&quot;, &quot;In IF&quot;);\n        Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\n        Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\n        callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n\n        if (callIntent.resolveActivity(context.getPackageManager()) != null) {\n            context.startActivity(callIntent);\n            if (callback != null) {\n                callback.invoke(); // Call initiated successfully\n            }\n        } else {\n            if (callback != null) {\n                callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\n            }\n        }\n    } else {\n        Log.d(&quot;Info&quot;, &quot;In ELSE&quot;);\n        // Get the subscription ID for the given SIM slot\n        // SubscriptionInfo subscriptionInfo = activeSubscriptions.get(simSlotIndex);\n        SubscriptionInfo subscriptionInfo = subscriptionManager.getActiveSubscriptionInfoForSimSlotIndex(simSlotIndex);\n        int subscriptionId = subscriptionInfo.getSubscriptionId();\n\n        // Set the SIM subscription ID for the call\n        telephonyManager = telephonyManager.createForSubscriptionId(subscriptionId);\n\n        // Make the call using the specified SIM\n        Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\n        Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\n        callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n\n        if (callIntent.resolveActivity(context.getPackageManager()) != null) {\n            context.startActivity(callIntent);\n            if (callback != null) {\n                callback.invoke(); // Call initiated successfully\n            }\n        } else {\n            if (callback != null) {\n                callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jparepository"],"answers":[{"comments":[{"owner":{"account_id":10222317,"reputation":349,"user_id":7546132,"display_name":"phaen"},"score":0,"creation_date":1702034944,"post_id":77625885,"comment_id":136851090,"body_markdown":"Well but this is not really a &quot;workaround&quot; is it? As the requirement is to not fetch the whole entity, but a subset (projection) of it, using projections is simply the correct way of doing it.","body":"Well but this is not really a &quot;workaround&quot; is it? As the requirement is to not fetch the whole entity, but a subset (projection) of it, using projections is simply the correct way of doing it."}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702032288,"creation_date":1702030948,"answer_id":77625885,"question_id":77625807,"body_markdown":"I don&#39;t think this is possible. As a workaround you can use a [Projection][1] containing only the id.\r\n```\r\npublic interface EducationIdProjection {\r\n\r\n  Long getId();\r\n}\r\n```\r\nThe repository method:\r\n```\r\nList&lt;EducationIdProjection&gt; findByUserId(Long userId);\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html","title":"How do I fetch list of long ids using JpaRepository?","body":"<p>I don't think this is possible. As a workaround you can use a <a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html\" rel=\"nofollow noreferrer\">Projection</a> containing only the id.</p>\n<pre><code>public interface EducationIdProjection {\n\n  Long getId();\n}\n</code></pre>\n<p>The repository method:</p>\n<pre><code>List&lt;EducationIdProjection&gt; findByUserId(Long userId);\n</code></pre>\n"}],"owner":{"account_id":2390165,"reputation":1301,"user_id":2090153,"accept_rate":30,"display_name":"selvi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702033461,"creation_date":1702030161,"question_id":77625807,"body_markdown":"I want to fetch List of ids instead of List&lt;Education&gt;. How should I define it using JpaRepository syntax? The same code, but I want something like `List&lt;Long&gt; ids...`.\r\n\r\nIs there a way to do it using JpaRepository **without** using `@Query`?\r\n```\r\nList&lt;Education&gt; findByUserId(Long userId);\r\n```","title":"How do I fetch list of long ids using JpaRepository?","body":"<p>I want to fetch List of ids instead of List. How should I define it using JpaRepository syntax? The same code, but I want something like <code>List&lt;Long&gt; ids...</code>.</p>\n<p>Is there a way to do it using JpaRepository <strong>without</strong> using <code>@Query</code>?</p>\n<pre><code>List&lt;Education&gt; findByUserId(Long userId);\n</code></pre>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"score":0,"creation_date":1478431878,"post_id":39976835,"comment_id":68143275,"body_markdown":"I&#39;ve got a pretty similar exception using Spring 4.3 with embedded Tomcat and Hibernate Validator 5.3","body":"I&#39;ve got a pretty similar exception using Spring 4.3 with embedded Tomcat and Hibernate Validator 5.3"},{"owner":{"display_name":"user8399477"},"score":0,"creation_date":1511883438,"post_id":39976835,"comment_id":82027469,"body_markdown":"Was a solution ever found to this problem?","body":"Was a solution ever found to this problem?"}],"answers":[{"tags":[],"owner":{"account_id":8743780,"reputation":966,"user_id":6540008,"accept_rate":43,"display_name":"Ali Akbarpour"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1481808715,"creation_date":1481808715,"answer_id":41165432,"question_id":39976835,"body_markdown":"remove this\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.el&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand try with\r\n\r\n    &lt;dependency&gt;\r\n              &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;\r\n              &lt;artifactId&gt;el-impl&lt;/artifactId&gt;\r\n              &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found","body":"<p>remove this</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;javax.el&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and try with</p>\n\n<pre><code>&lt;dependency&gt;\n          &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;\n          &lt;artifactId&gt;el-impl&lt;/artifactId&gt;\n          &lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8224420,"reputation":665,"user_id":6187135,"display_name":"peikuo"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1636709174,"creation_date":1492508601,"answer_id":43468731,"question_id":39976835,"body_markdown":"remove  \r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;javax.el&lt;/groupId&gt;\r\n  &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.0&lt;/version&gt;\r\n  &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\nFor this jar have `javax.el.ExpressionFactory`\r\n\r\nand `tomcat8-el-api.jar` have the same one.\r\n\r\nThis will cause conflict","title":"javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found","body":"<p>remove</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;javax.el&lt;/groupId&gt;\n  &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0&lt;/version&gt;\n  &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For this jar have <code>javax.el.ExpressionFactory</code></p>\n<p>and <code>tomcat8-el-api.jar</code> have the same one.</p>\n<p>This will cause conflict</p>\n"},{"tags":[],"owner":{"account_id":62450,"reputation":10263,"user_id":185565,"accept_rate":91,"display_name":"Whome"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548150405,"creation_date":1548150405,"answer_id":54305385,"question_id":39976835,"body_markdown":"Same problem I had one legacy installation on Tomcat7+JDK1.8 box where a new webapp was deployed. It was meant to be run on Tomcat9+JDK10 but this box was an exception.\r\n\r\n    java.lang.NoClassDefFoundError: javax/el/ELManager\r\n    org.apache.jasper.JasperException: javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found\r\n\r\nI could not update T7+JDK1.8 so instead made this brute-force change.\r\n\r\n     rename: tomcat/lib/el-api.jar to el-api.jar_original2.x\r\n     add: tomcat/lib/el-api.jar  version 3.x\r\n     add: tomcat/lib/el-impl-2.2.1-b05.jar   version 2.2.x\r\n\r\nhttps://mvnrepository.com/artifact/javax.el/javax.el-api/3.0.1-b06&lt;br/&gt;\r\nhttps://mvnrepository.com/artifact/org.glassfish.web/el-impl/2.2.1-b05\r\n","title":"javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found","body":"<p>Same problem I had one legacy installation on Tomcat7+JDK1.8 box where a new webapp was deployed. It was meant to be run on Tomcat9+JDK10 but this box was an exception.</p>\n\n<pre><code>java.lang.NoClassDefFoundError: javax/el/ELManager\norg.apache.jasper.JasperException: javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found\n</code></pre>\n\n<p>I could not update T7+JDK1.8 so instead made this brute-force change.</p>\n\n<pre><code> rename: tomcat/lib/el-api.jar to el-api.jar_original2.x\n add: tomcat/lib/el-api.jar  version 3.x\n add: tomcat/lib/el-impl-2.2.1-b05.jar   version 2.2.x\n</code></pre>\n\n<p><a href=\"https://mvnrepository.com/artifact/javax.el/javax.el-api/3.0.1-b06\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/javax.el/javax.el-api/3.0.1-b06</a><br/>\n<a href=\"https://mvnrepository.com/artifact/org.glassfish.web/el-impl/2.2.1-b05\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.glassfish.web/el-impl/2.2.1-b05</a></p>\n"},{"tags":[],"owner":{"account_id":5987348,"reputation":4295,"user_id":4704510,"display_name":"UsamaAmjad"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1550541705,"creation_date":1550540039,"answer_id":54757657,"question_id":39976835,"body_markdown":"I tried all the already answered solutions but none of them work for me on `Spring Boot 2.1.3` **embedded** `tomcat`. Below dependencies worked for me\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.el&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;","title":"javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found","body":"<p>I tried all the already answered solutions but none of them work for me on <code>Spring Boot 2.1.3</code> <strong>embedded</strong> <code>tomcat</code>. Below dependencies worked for me</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.el&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2384530,"reputation":1672,"user_id":2085768,"display_name":"RoutesMaps.com"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702032990,"creation_date":1702032990,"answer_id":77626071,"question_id":39976835,"body_markdown":"For Spring Boot 2.6.15 embedded tomcat worked tomcat-embed-jasper provided dependency.\r\n\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found","body":"<p>For Spring Boot 2.6.15 embedded tomcat worked tomcat-embed-jasper provided dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1463176,"reputation":4443,"user_id":1376885,"accept_rate":34,"display_name":"Viktor M."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29490,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":5,"score":13,"last_activity_date":1702032990,"creation_date":1476187474,"question_id":39976835,"body_markdown":"Despite a lot of problem solutions I have stuck on the problem with `ELException`:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;tilesConfigurer&#39; defined in ServletContext resource [/WEB-INF/tiles-context.xml]: Invocation of init method failed; nested exception is javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1553)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactorygetObject(AbstractBeanFactory.java:304)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:703)\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:760)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\r\n            at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\r\n            at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\r\n            at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n            at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4853)\r\n            at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\r\n            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\r\n            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\r\n            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\r\n            at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:940)\r\n            at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1816)\r\n            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n            at java.lang.Thread.run(Thread.java:745)\r\n    Caused by: javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found\r\n            at javax.el.FactoryFinder.newInstance(FactoryFinder.java:101)\r\n            at javax.el.FactoryFinder.find(FactoryFinder.java:197)\r\n            at javax.el.ExpressionFactory.newInstance(ExpressionFactory.java:197)\r\n            at javax.el.ExpressionFactory.newInstance(ExpressionFactory.java:168)\r\n            at org.apache.jasper.runtime.JspApplicationContextImpl.&lt;init&gt;(JspApplicationContextImpl.java:46)\r\n            at org.apache.jasper.runtime.JspApplicationContextImpl.getInstance(JspApplicationContextImpl.java:76)\r\n            at org.apache.jasper.runtime.JspFactoryImpl.getJspApplicationContext(JspFactoryImpl.java:217)\r\n            at org.springframework.web.servlet.view.tiles3.TilesConfigurer$TilesElActivator.createEvaluator(TilesConfigurer.java:407)\r\n            at org.springframework.web.servlet.view.tiles3.TilesConfigurer$SpringTilesContainerFactory.createAttributeEvaluatorFactory(TilesConfigurer.java:374)\r\n            at org.apache.tiles.factory.BasicTilesContainerFactory.createContainer(BasicTilesContainerFactory.java:88)\r\n            at org.springframework.web.servlet.view.tiles3.TilesConfigurer$SpringTilesContainerFactory.createContainer(TilesConfigurer.java:296)\r\n            at org.apache.tiles.startup.AbstractTilesInitializer.createContainer(AbstractTilesInitializer.java:114)\r\n            at org.apache.tiles.startup.AbstractTilesInitializer.initialize(AbstractTilesInitializer.java:64)\r\n            at org.springframework.web.servlet.view.tiles3.TilesConfigurer.afterPropertiesSet(TilesConfigurer.java:270)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1612)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1549)\r\n            ... 25 more\r\n    Caused by: java.lang.ClassNotFoundException: com.sun.el.ExpressionFactoryImpl\r\n            at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1333)\r\n            at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1167)\r\n            at javax.el.FactoryFinder.newInstance(FactoryFinder.java:87)\r\n            ... 40 more\r\n\r\nI&#39;m sure that it isn&#39;t due to any user impact in web application code since another server with the same application is running well and both app&#39;s code is identical. Both servers` environments looks identical as well.\r\n\r\nI&#39;m using `Apache Tomcat/8.0.37` and `oracle-java8-jdk-amd64`.\r\n\r\nBelow is the list of `WEB-INF\\lib` used libraries:\r\n\r\n    activation-1.1.jar               hibernate-c3p0-4.2.7.Final.jar                  lucene-analyzers-3.6.2.jar        slf4j-simple-1.7.7.jar                    tiles-autotag-core-runtime-1.1.0.jar\r\n    amqp-client-3.3.4.jar            hibernate-commons-annotations-4.0.2.Final.jar   lucene-core-3.6.2.jar             snakeyaml-1.11.jar                        tiles-compat-3.0.3.jar\r\n    antlr-2.7.7.jar                  hibernate-core-4.2.7.Final.jar                  lucene-facet-3.6.2.jar            solr-analysis-extras-3.6.2.jar            tiles-core-3.0.3.jar\r\n    aopalliance-1.0.jar              hibernate-entitymanager-4.2.7.Final.jar         lucene-grouping-3.6.2.jar         solr-core-3.6.2.jar                       tiles-el-3.0.3.jar\r\n    asm-4.2.jar                      hibernate-jpa-2.0-api-1.0.1.Final.jar           lucene-highlighter-3.6.2.jar      solr-solrj-3.6.2.jar                      tiles-extras-3.0.3.jar\r\n    avro-1.7.5.jar                   hibernate-search-4.4.0.Final.jar                lucene-kuromoji-3.6.2.jar         spring-amqp-1.3.5.RELEASE.jar             tiles-freemarker-3.0.3.jar\r\n    c3p0-0.9.1.1.jar                 hibernate-search-analyzers-4.4.0.Final.jar      lucene-memory-3.6.2.jar           spring-aop-4.0.3.RELEASE.jar              tiles-jsp-3.0.3.jar\r\n    c3p0-0.9.2.1.jar                 hibernate-search-engine-4.4.0.Final.jar         lucene-misc-3.6.2.jar             spring-beans-4.0.3.RELEASE.jar            tiles-mvel-3.0.3.jar\r\n    cas-client-core-3.1.12.jar       hibernate-search-orm-4.4.0.Final.jar            lucene-phonetic-3.6.2.jar         spring-context-4.0.3.RELEASE.jar          tiles-ognl-3.0.3.jar\r\n    cassandra-driver-core-2.1.2.jar  hibernate-validator-5.1.0.Final.jar             lucene-smartcn-3.6.2.jar          spring-context-support-4.0.3.RELEASE.jar  tiles-request-api-1.0.3.jar\r\n    cassandra-driver-dse-2.1.2.jar   httpclient-4.3.3.jar                            lucene-spatial-3.6.2.jar          spring-core-4.0.3.RELEASE.jar             tiles-request-freemarker-1.0.3.jar\r\n    cglib-3.1.jar                    httpcore-4.3.2.jar                              lucene-spellchecker-3.6.2.jar     spring-cql-1.1.0.RELEASE.jar              tiles-request-jsp-1.0.3.jar\r\n    classmate-1.0.0.jar              jackson-core-asl-1.9.2.jar                      lucene-stempel-3.6.2.jar          spring-data-cassandra-1.1.0.RELEASE.jar   tiles-request-mustache-1.0.3.jar\r\n    commons-beanutils-1.9.2.jar      jackson-mapper-asl-1.9.12.jar                   lz4-1.2.0.jar                     spring-data-commons-1.9.0.RELEASE.jar     tiles-request-servlet-1.0.3.jar\r\n    commons-codec-1.6.jar            javaee-api-7.0.jar                              mail-1.4.7.jar                    spring-expression-4.0.3.RELEASE.jar       tiles-request-servlet-wildcard-1.0.3.jar\r\n    commons-collections-3.2.1.jar    javassist-3.18.1-GA.jar                         mchange-commons-java-0.2.3.4.jar  spring-jdbc-4.0.3.RELEASE.jar             tiles-request-velocity-1.0.3.jar\r\n    commons-compress-1.4.1.jar       javassist-3.7.ga.jar                            metrics-core-3.0.2.jar            spring-jms-4.0.3.RELEASE.jar              tiles-servlet-3.0.3.jar\r\n    commons-dbcp-1.4.jar             javax.mail-1.5.0.jar                            mvel2-2.0.11.jar                  spring-orm-4.0.3.RELEASE.jar              tiles-template-3.0.3.jar\r\n    commons-digester-2.0.jar         jawr-3.3.3.jar                                  netty-3.9.0.Final.jar             spring-rabbit-1.3.5.RELEASE.jar           tiles-velocity-3.0.3.jar\r\n    commons-io-2.4.jar               jboss-logging-3.1.3.GA.jar                      ognl-2.7.3.jar                    spring-retry-1.1.0.RELEASE.jar            validation-api-1.1.0.Final.jar\r\n    commons-lang-2.6.jar             jboss-transaction-api_1.1_spec-1.0.1.Final.jar  oro-2.0.8.jar                     spring-security-cas-3.1.4.RELEASE.jar     velocity-1.6.2.jar\r\n    commons-lang3-3.3.2.jar          jcl-over-slf4j-1.7.12.jar                       paranamer-2.3.jar                 spring-security-config-3.1.4.RELEASE.jar  velocity-tools-2.0.jar\r\n    commons-logging-1.1.3.jar        jna-4.0.0.jar                                   poi-3.10-FINAL.jar                spring-security-core-3.1.4.RELEASE.jar    waffle-jna-1.7.jar\r\n    commons-pool-1.5.4.jar           jna-platform-4.1.0.jar                          poi-ooxml-3.10-FINAL.jar          spring-security-web-3.1.4.RELEASE.jar     \r\n    compiler-0.8.4.jar               jstl-1.2.jar                                    poi-ooxml-schemas-3.10-FINAL.jar  spring-tx-4.0.3.RELEASE.jar               xmlbeans-2.3.0.jar\r\n    dom4j-1.6.1.jar                  liquibase-core-3.1.1.jar                        postgresql-9.4-1200-jdbc41.jar    spring-web-4.0.3.RELEASE.jar\r\n    ehcache-2.8.3.jar                log4j-over-slf4j-1.7.7.jar                      quartz-2.2.1.jar                  spring-webmvc-4.0.3.RELEASE.jar\r\n    freemarker-2.3.20.jar            logback-classic-1.1.3.jar                          stax-api-1.0.1.jar\r\n    guava-16.0.jar                   logback-core-1.1.3.jar                          slf4j-api-1.7.5.jar               tiles-api-3.0.3.jar\r\n\r\n\r\nBelow is the list of `/usr/share/java` libraries which are used by Tomcat8:\r\n\r\n    commons-dbcp-1.4.jar    jsp-api-2.3.jar                     tomcat8-catalina.jar                     tomcat8-i18n-fr-8.0.37.jar    tomcat8-jni.jar                 tomcat8-util-scan-8.0.37.jar\r\n    commons-dbcp.jar        libintl.jar                         tomcat8-catalina-storeconfig-8.0.37.jar  tomcat8-i18n-fr.jar           tomcat8-jsp-api-8.0.37.jar      tomcat8-util-scan.jar\r\n    commons-pool-1.6.jar    tomcat8-annotations-api-8.0.37.jar  tomcat8-catalina-storeconfig.jar         tomcat8-i18n-ja-8.0.37.jar    tomcat8-jsp-api.jar             tomcat8-websocket-8.0.37.jar\r\n    commons-pool.jar        tomcat8-annotations-api.jar         tomcat8-coyote-8.0.37.jar                tomcat8-i18n-ja.jar           tomcat8-juli-8.0.37.jar         tomcat8-websocket-api-8.0.37.jar\r\n    ecj.jar                 tomcat8-api-8.0.37.jar              tomcat8-coyote.jar                       tomcat8-jasper-8.0.37.jar     tomcat8-juli.jar                tomcat8-websocket-api.jar\r\n    eclipse-ecj-3.11.0.jar  tomcat8-api.jar                     tomcat8-dbcp-8.0.37.jar                  tomcat8-jasper-el-8.0.37.jar  tomcat8-servlet-api-8.0.37.jar  tomcat8-websocket.jar\r\n    eclipse-ecj.jar         tomcat8-catalina-8.0.37.jar         tomcat8-dbcp.jar                         tomcat8-jasper-el.jar         tomcat8-servlet-api.jar\r\n    el-api-3.0.jar          tomcat8-catalina-ant-8.0.37.jar     tomcat8-el-api-8.0.37.jar                tomcat8-jasper.jar            tomcat8-tribes-8.0.37.jar\r\n    el-impl-2.2.jar         tomcat8-catalina-ant.jar            tomcat8-el-api.jar                       tomcat8-jdbc-8.0.37.jar       tomcat8-tribes.jar\r\n    java_defaults.mk        tomcat8-catalina-ha-8.0.37.jar      tomcat8-i18n-es-8.0.37.jar               tomcat8-jdbc.jar              tomcat8-util-8.0.37.jar\r\n    javaee-api-7.0.jar      tomcat8-catalina-ha.jar             tomcat8-i18n-es.jar                      tomcat8-jni-8.0.37.jar        tomcat8-util.jar\r\n\r\n\r\nI`ve add el-api, el-impl and jsp-api to /usr/share/java due to errors that these libraries couldn&#39;t be found in /usr/share/java.\r\n\r\nPOM:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;org.company.test&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;app&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n    \t&lt;prerequisites&gt;\r\n    \t\t&lt;maven&gt;3.0.0&lt;/maven&gt;\r\n    \t&lt;/prerequisites&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;springframework.version&gt;4.0.3.RELEASE&lt;/springframework.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.el&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.3.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.2.7.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.2.7.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tiles-extras&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;7.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.jawr&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jawr&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.3.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-cas&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.4.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.4.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.11&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.10-FINAL&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;8.0.5&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.10-FINAL&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;16.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.cassandraunit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cassandra-unit-spring&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.2.1&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.cassandra&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cassandra-all&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;9.4-1200-jdbc41&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mail&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4.7&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;${project.basedir}/src/main/resources&lt;/directory&gt;\r\n    \t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;${project.basedir}/documentation/package/resources&lt;/directory&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t\t&lt;testResources&gt;\r\n    \t\t\t&lt;testResource&gt;\r\n    \t\t\t\t&lt;directory&gt;${project.basedir}/src/main/webapp/WEB-INF&lt;/directory&gt;\r\n    \t\t\t&lt;/testResource&gt;\r\n    \t\t\t&lt;testResource&gt;\r\n    \t\t\t\t&lt;directory&gt;${project.basedir}/src/test/resources&lt;/directory&gt;\r\n    \t\t\t&lt;/testResource&gt;\r\n    \t\t\t&lt;testResource&gt;\r\n    \t\t\t\t&lt;directory&gt;${project.basedir}/documentation/conf&lt;/directory&gt;\r\n    \t\t\t&lt;/testResource&gt;\r\n    \t\t&lt;/testResources&gt;\r\n    \t\t&lt;testOutputDirectory&gt;target/test-classes&lt;/testOutputDirectory&gt;\r\n    \t\t&lt;testSourceDirectory&gt;${project.basedir}/src/test/java&lt;/testSourceDirectory&gt;\r\n    \r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.7&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.3&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;prod-resources&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;copy-resources&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.outputDirectory}&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t\t\t&lt;overwrite&gt;true&lt;/overwrite&gt;\r\n    \t\t\t\t\t\t\t&lt;resources&gt;\r\n    \t\t\t\t\t\t\t\t&lt;resource&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;**/*.jks&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;**/*.xlsx&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/resource&gt;\r\n    \t\t\t\t\t\t\t\t&lt;resource&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;directory&gt;documentation/package/resources&lt;/directory&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/resource&gt;\r\n    \t\t\t\t\t\t\t&lt;/resources&gt;\r\n    \t\t\t\t\t\t\t&lt;filters&gt;\r\n    \t\t\t\t\t\t\t\t&lt;filter&gt;${project.basedir}/src/main/resources/application.properties&lt;/filter&gt;\r\n    \t\t\t\t\t\t\t&lt;/filters&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.1&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.16&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;argLine&gt;-Duser.timezone=UTC -Duser.language=en -Duser.region=US&lt;/argLine&gt;\r\n    \t\t\t\t\t&lt;threadCount&gt;1&lt;/threadCount&gt;\r\n    \t\t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t\t&lt;include&gt;**/*Tests.java&lt;/include&gt;\r\n    \t\t\t\t\t&lt;/includes&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;**/*IntegrationalTests.java&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t\t&lt;systemPropertyVariables&gt;\r\n    \t\t\t\t\t\t&lt;user.timezone&gt;Etc/UTC&lt;/user.timezone&gt;\r\n    \t\t\t\t\t&lt;/systemPropertyVariables&gt;\r\n    \t\t\t\t\t&lt;!-- &lt;forkCount&gt;3&lt;/forkCount&gt; &lt;reuseForks&gt;true&lt;/reuseForks&gt; --&gt;\r\n    \r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;webResources&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;\r\n    \t\t\t\t\t\t\t&lt;directory&gt;src/main/jsp&lt;/directory&gt;\r\n    \t\t\t\t\t\t\t&lt;targetPath&gt;WEB-INF/jsp&lt;/targetPath&gt;\r\n    \t\t\t\t\t\t&lt;/resource&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;\r\n    \t\t\t\t\t\t\t&lt;directory&gt;src/main/tags&lt;/directory&gt;\r\n    \t\t\t\t\t\t\t&lt;targetPath&gt;WEB-INF/tags&lt;/targetPath&gt;\r\n    \t\t\t\t\t\t&lt;/resource&gt;\r\n    \t\t\t\t\t&lt;/webResources&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;cobertura-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n    \t\t\t\t&lt;dependencies&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.ow2.asm&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;asm&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;5.0.3&lt;/version&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t&lt;/dependencies&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;formats&gt;\r\n    \t\t\t\t\t\t&lt;format&gt;html&lt;/format&gt;\r\n    \t\t\t\t\t\t&lt;format&gt;xml&lt;/format&gt;\r\n    \t\t\t\t\t&lt;/formats&gt;\r\n    \t\t\t\t\t&lt;check/&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;1.7.5&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;reporting&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;cobertura-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;formats&gt;\r\n    \t\t\t\t\t\t&lt;format&gt;html&lt;/format&gt;\r\n    \t\t\t\t\t\t&lt;format&gt;xml&lt;/format&gt;\r\n    \t\t\t\t\t&lt;/formats&gt;\r\n    \t\t\t\t\t&lt;check/&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.16&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.16&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/reporting&gt;\r\n    &lt;/project&gt;\r\n\r\nHowever, I still have problem with finding `com.sun.el.ExpressionFactoryImpl`","title":"javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found","body":"<p>Despite a lot of problem solutions I have stuck on the problem with <code>ELException</code>:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tilesConfigurer' defined in ServletContext resource [/WEB-INF/tiles-context.xml]: Invocation of init method failed; nested exception is javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1553)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n        at org.springframework.beans.factory.support.AbstractBeanFactorygetObject(AbstractBeanFactory.java:304)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:703)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:760)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4853)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:940)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1816)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: javax.el.ELException: Provider com.sun.el.ExpressionFactoryImpl not found\n        at javax.el.FactoryFinder.newInstance(FactoryFinder.java:101)\n        at javax.el.FactoryFinder.find(FactoryFinder.java:197)\n        at javax.el.ExpressionFactory.newInstance(ExpressionFactory.java:197)\n        at javax.el.ExpressionFactory.newInstance(ExpressionFactory.java:168)\n        at org.apache.jasper.runtime.JspApplicationContextImpl.&lt;init&gt;(JspApplicationContextImpl.java:46)\n        at org.apache.jasper.runtime.JspApplicationContextImpl.getInstance(JspApplicationContextImpl.java:76)\n        at org.apache.jasper.runtime.JspFactoryImpl.getJspApplicationContext(JspFactoryImpl.java:217)\n        at org.springframework.web.servlet.view.tiles3.TilesConfigurer$TilesElActivator.createEvaluator(TilesConfigurer.java:407)\n        at org.springframework.web.servlet.view.tiles3.TilesConfigurer$SpringTilesContainerFactory.createAttributeEvaluatorFactory(TilesConfigurer.java:374)\n        at org.apache.tiles.factory.BasicTilesContainerFactory.createContainer(BasicTilesContainerFactory.java:88)\n        at org.springframework.web.servlet.view.tiles3.TilesConfigurer$SpringTilesContainerFactory.createContainer(TilesConfigurer.java:296)\n        at org.apache.tiles.startup.AbstractTilesInitializer.createContainer(AbstractTilesInitializer.java:114)\n        at org.apache.tiles.startup.AbstractTilesInitializer.initialize(AbstractTilesInitializer.java:64)\n        at org.springframework.web.servlet.view.tiles3.TilesConfigurer.afterPropertiesSet(TilesConfigurer.java:270)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1612)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1549)\n        ... 25 more\nCaused by: java.lang.ClassNotFoundException: com.sun.el.ExpressionFactoryImpl\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1333)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1167)\n        at javax.el.FactoryFinder.newInstance(FactoryFinder.java:87)\n        ... 40 more\n</code></pre>\n\n<p>I'm sure that it isn't due to any user impact in web application code since another server with the same application is running well and both app's code is identical. Both servers` environments looks identical as well.</p>\n\n<p>I'm using <code>Apache Tomcat/8.0.37</code> and <code>oracle-java8-jdk-amd64</code>.</p>\n\n<p>Below is the list of <code>WEB-INF\\lib</code> used libraries:</p>\n\n<pre><code>activation-1.1.jar               hibernate-c3p0-4.2.7.Final.jar                  lucene-analyzers-3.6.2.jar        slf4j-simple-1.7.7.jar                    tiles-autotag-core-runtime-1.1.0.jar\namqp-client-3.3.4.jar            hibernate-commons-annotations-4.0.2.Final.jar   lucene-core-3.6.2.jar             snakeyaml-1.11.jar                        tiles-compat-3.0.3.jar\nantlr-2.7.7.jar                  hibernate-core-4.2.7.Final.jar                  lucene-facet-3.6.2.jar            solr-analysis-extras-3.6.2.jar            tiles-core-3.0.3.jar\naopalliance-1.0.jar              hibernate-entitymanager-4.2.7.Final.jar         lucene-grouping-3.6.2.jar         solr-core-3.6.2.jar                       tiles-el-3.0.3.jar\nasm-4.2.jar                      hibernate-jpa-2.0-api-1.0.1.Final.jar           lucene-highlighter-3.6.2.jar      solr-solrj-3.6.2.jar                      tiles-extras-3.0.3.jar\navro-1.7.5.jar                   hibernate-search-4.4.0.Final.jar                lucene-kuromoji-3.6.2.jar         spring-amqp-1.3.5.RELEASE.jar             tiles-freemarker-3.0.3.jar\nc3p0-0.9.1.1.jar                 hibernate-search-analyzers-4.4.0.Final.jar      lucene-memory-3.6.2.jar           spring-aop-4.0.3.RELEASE.jar              tiles-jsp-3.0.3.jar\nc3p0-0.9.2.1.jar                 hibernate-search-engine-4.4.0.Final.jar         lucene-misc-3.6.2.jar             spring-beans-4.0.3.RELEASE.jar            tiles-mvel-3.0.3.jar\ncas-client-core-3.1.12.jar       hibernate-search-orm-4.4.0.Final.jar            lucene-phonetic-3.6.2.jar         spring-context-4.0.3.RELEASE.jar          tiles-ognl-3.0.3.jar\ncassandra-driver-core-2.1.2.jar  hibernate-validator-5.1.0.Final.jar             lucene-smartcn-3.6.2.jar          spring-context-support-4.0.3.RELEASE.jar  tiles-request-api-1.0.3.jar\ncassandra-driver-dse-2.1.2.jar   httpclient-4.3.3.jar                            lucene-spatial-3.6.2.jar          spring-core-4.0.3.RELEASE.jar             tiles-request-freemarker-1.0.3.jar\ncglib-3.1.jar                    httpcore-4.3.2.jar                              lucene-spellchecker-3.6.2.jar     spring-cql-1.1.0.RELEASE.jar              tiles-request-jsp-1.0.3.jar\nclassmate-1.0.0.jar              jackson-core-asl-1.9.2.jar                      lucene-stempel-3.6.2.jar          spring-data-cassandra-1.1.0.RELEASE.jar   tiles-request-mustache-1.0.3.jar\ncommons-beanutils-1.9.2.jar      jackson-mapper-asl-1.9.12.jar                   lz4-1.2.0.jar                     spring-data-commons-1.9.0.RELEASE.jar     tiles-request-servlet-1.0.3.jar\ncommons-codec-1.6.jar            javaee-api-7.0.jar                              mail-1.4.7.jar                    spring-expression-4.0.3.RELEASE.jar       tiles-request-servlet-wildcard-1.0.3.jar\ncommons-collections-3.2.1.jar    javassist-3.18.1-GA.jar                         mchange-commons-java-0.2.3.4.jar  spring-jdbc-4.0.3.RELEASE.jar             tiles-request-velocity-1.0.3.jar\ncommons-compress-1.4.1.jar       javassist-3.7.ga.jar                            metrics-core-3.0.2.jar            spring-jms-4.0.3.RELEASE.jar              tiles-servlet-3.0.3.jar\ncommons-dbcp-1.4.jar             javax.mail-1.5.0.jar                            mvel2-2.0.11.jar                  spring-orm-4.0.3.RELEASE.jar              tiles-template-3.0.3.jar\ncommons-digester-2.0.jar         jawr-3.3.3.jar                                  netty-3.9.0.Final.jar             spring-rabbit-1.3.5.RELEASE.jar           tiles-velocity-3.0.3.jar\ncommons-io-2.4.jar               jboss-logging-3.1.3.GA.jar                      ognl-2.7.3.jar                    spring-retry-1.1.0.RELEASE.jar            validation-api-1.1.0.Final.jar\ncommons-lang-2.6.jar             jboss-transaction-api_1.1_spec-1.0.1.Final.jar  oro-2.0.8.jar                     spring-security-cas-3.1.4.RELEASE.jar     velocity-1.6.2.jar\ncommons-lang3-3.3.2.jar          jcl-over-slf4j-1.7.12.jar                       paranamer-2.3.jar                 spring-security-config-3.1.4.RELEASE.jar  velocity-tools-2.0.jar\ncommons-logging-1.1.3.jar        jna-4.0.0.jar                                   poi-3.10-FINAL.jar                spring-security-core-3.1.4.RELEASE.jar    waffle-jna-1.7.jar\ncommons-pool-1.5.4.jar           jna-platform-4.1.0.jar                          poi-ooxml-3.10-FINAL.jar          spring-security-web-3.1.4.RELEASE.jar     \ncompiler-0.8.4.jar               jstl-1.2.jar                                    poi-ooxml-schemas-3.10-FINAL.jar  spring-tx-4.0.3.RELEASE.jar               xmlbeans-2.3.0.jar\ndom4j-1.6.1.jar                  liquibase-core-3.1.1.jar                        postgresql-9.4-1200-jdbc41.jar    spring-web-4.0.3.RELEASE.jar\nehcache-2.8.3.jar                log4j-over-slf4j-1.7.7.jar                      quartz-2.2.1.jar                  spring-webmvc-4.0.3.RELEASE.jar\nfreemarker-2.3.20.jar            logback-classic-1.1.3.jar                          stax-api-1.0.1.jar\nguava-16.0.jar                   logback-core-1.1.3.jar                          slf4j-api-1.7.5.jar               tiles-api-3.0.3.jar\n</code></pre>\n\n<p>Below is the list of <code>/usr/share/java</code> libraries which are used by Tomcat8:</p>\n\n<pre><code>commons-dbcp-1.4.jar    jsp-api-2.3.jar                     tomcat8-catalina.jar                     tomcat8-i18n-fr-8.0.37.jar    tomcat8-jni.jar                 tomcat8-util-scan-8.0.37.jar\ncommons-dbcp.jar        libintl.jar                         tomcat8-catalina-storeconfig-8.0.37.jar  tomcat8-i18n-fr.jar           tomcat8-jsp-api-8.0.37.jar      tomcat8-util-scan.jar\ncommons-pool-1.6.jar    tomcat8-annotations-api-8.0.37.jar  tomcat8-catalina-storeconfig.jar         tomcat8-i18n-ja-8.0.37.jar    tomcat8-jsp-api.jar             tomcat8-websocket-8.0.37.jar\ncommons-pool.jar        tomcat8-annotations-api.jar         tomcat8-coyote-8.0.37.jar                tomcat8-i18n-ja.jar           tomcat8-juli-8.0.37.jar         tomcat8-websocket-api-8.0.37.jar\necj.jar                 tomcat8-api-8.0.37.jar              tomcat8-coyote.jar                       tomcat8-jasper-8.0.37.jar     tomcat8-juli.jar                tomcat8-websocket-api.jar\neclipse-ecj-3.11.0.jar  tomcat8-api.jar                     tomcat8-dbcp-8.0.37.jar                  tomcat8-jasper-el-8.0.37.jar  tomcat8-servlet-api-8.0.37.jar  tomcat8-websocket.jar\neclipse-ecj.jar         tomcat8-catalina-8.0.37.jar         tomcat8-dbcp.jar                         tomcat8-jasper-el.jar         tomcat8-servlet-api.jar\nel-api-3.0.jar          tomcat8-catalina-ant-8.0.37.jar     tomcat8-el-api-8.0.37.jar                tomcat8-jasper.jar            tomcat8-tribes-8.0.37.jar\nel-impl-2.2.jar         tomcat8-catalina-ant.jar            tomcat8-el-api.jar                       tomcat8-jdbc-8.0.37.jar       tomcat8-tribes.jar\njava_defaults.mk        tomcat8-catalina-ha-8.0.37.jar      tomcat8-i18n-es-8.0.37.jar               tomcat8-jdbc.jar              tomcat8-util-8.0.37.jar\njavaee-api-7.0.jar      tomcat8-catalina-ha.jar             tomcat8-i18n-es.jar                      tomcat8-jni-8.0.37.jar        tomcat8-util.jar\n</code></pre>\n\n<p>I`ve add el-api, el-impl and jsp-api to /usr/share/java due to errors that these libraries couldn't be found in /usr/share/java.</p>\n\n<p>POM:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.company.test&lt;/groupId&gt;\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;prerequisites&gt;\n        &lt;maven&gt;3.0.0&lt;/maven&gt;\n    &lt;/prerequisites&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;springframework.version&gt;4.0.3.RELEASE&lt;/springframework.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;8.0.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.el&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;4.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;5.1.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.2.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;4.2.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n            &lt;artifactId&gt;tiles-extras&lt;/artifactId&gt;\n            &lt;version&gt;3.0.3&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;guava&lt;/artifactId&gt;\n                    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.jawr&lt;/groupId&gt;\n            &lt;artifactId&gt;jawr&lt;/artifactId&gt;\n            &lt;version&gt;3.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-cas&lt;/artifactId&gt;\n            &lt;version&gt;3.1.4.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;3.1.4.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.11&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;3.10-FINAL&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;8.0.5&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;3.10-FINAL&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;16.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.cassandraunit&lt;/groupId&gt;\n            &lt;artifactId&gt;cassandra-unit-spring&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.cassandra&lt;/groupId&gt;\n            &lt;artifactId&gt;cassandra-all&lt;/artifactId&gt;\n            &lt;version&gt;2.1.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;9.4-1200-jdbc41&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n            &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n            &lt;artifactId&gt;mail&lt;/artifactId&gt;\n            &lt;version&gt;1.4.7&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;${project.basedir}/src/main/resources&lt;/directory&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;/resource&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;${project.basedir}/documentation/package/resources&lt;/directory&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;${project.basedir}/src/main/webapp/WEB-INF&lt;/directory&gt;\n            &lt;/testResource&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;${project.basedir}/src/test/resources&lt;/directory&gt;\n            &lt;/testResource&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;${project.basedir}/documentation/conf&lt;/directory&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n        &lt;testOutputDirectory&gt;target/test-classes&lt;/testOutputDirectory&gt;\n        &lt;testSourceDirectory&gt;${project.basedir}/src/test/java&lt;/testSourceDirectory&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.7&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;prod-resources&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-resources&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.outputDirectory}&lt;/outputDirectory&gt;\n                            &lt;overwrite&gt;true&lt;/overwrite&gt;\n                            &lt;resources&gt;\n                                &lt;resource&gt;\n                                    &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;**/*.jks&lt;/exclude&gt;\n                                        &lt;exclude&gt;**/*.xlsx&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                    &lt;filtering&gt;true&lt;/filtering&gt;\n                                &lt;/resource&gt;\n                                &lt;resource&gt;\n                                    &lt;directory&gt;documentation/package/resources&lt;/directory&gt;\n                                    &lt;filtering&gt;true&lt;/filtering&gt;\n                                &lt;/resource&gt;\n                            &lt;/resources&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;${project.basedir}/src/main/resources/application.properties&lt;/filter&gt;\n                            &lt;/filters&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.16&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;-Duser.timezone=UTC -Duser.language=en -Duser.region=US&lt;/argLine&gt;\n                    &lt;threadCount&gt;1&lt;/threadCount&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;**/*Tests.java&lt;/include&gt;\n                    &lt;/includes&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;**/*IntegrationalTests.java&lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;user.timezone&gt;Etc/UTC&lt;/user.timezone&gt;\n                    &lt;/systemPropertyVariables&gt;\n                    &lt;!-- &lt;forkCount&gt;3&lt;/forkCount&gt; &lt;reuseForks&gt;true&lt;/reuseForks&gt; --&gt;\n\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;webResources&gt;\n                        &lt;resource&gt;\n                            &lt;directory&gt;src/main/jsp&lt;/directory&gt;\n                            &lt;targetPath&gt;WEB-INF/jsp&lt;/targetPath&gt;\n                        &lt;/resource&gt;\n                        &lt;resource&gt;\n                            &lt;directory&gt;src/main/tags&lt;/directory&gt;\n                            &lt;targetPath&gt;WEB-INF/tags&lt;/targetPath&gt;\n                        &lt;/resource&gt;\n                    &lt;/webResources&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;cobertura-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.ow2.asm&lt;/groupId&gt;\n                        &lt;artifactId&gt;asm&lt;/artifactId&gt;\n                        &lt;version&gt;5.0.3&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n                &lt;configuration&gt;\n                    &lt;formats&gt;\n                        &lt;format&gt;html&lt;/format&gt;\n                        &lt;format&gt;xml&lt;/format&gt;\n                    &lt;/formats&gt;\n                    &lt;check/&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                &lt;version&gt;1.7.5&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n                &lt;version&gt;${springframework.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;reporting&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;cobertura-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;formats&gt;\n                        &lt;format&gt;html&lt;/format&gt;\n                        &lt;format&gt;xml&lt;/format&gt;\n                    &lt;/formats&gt;\n                    &lt;check/&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.16&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.16&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/reporting&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>However, I still have problem with finding <code>com.sun.el.ExpressionFactoryImpl</code></p>\n"},{"tags":["java","spring-boot","docker","docker-image","rancher-desktop"],"comments":[{"owner":{"account_id":22562332,"reputation":582,"user_id":16749821,"display_name":"Hans-Christian"},"score":1,"creation_date":1653928377,"post_id":72437422,"comment_id":127965835,"body_markdown":"Are you sure you the file `target/springboot-example.jar` exists?\nIt might have a different name, depending on how have configured the jar name generation E.g if you have the version built into the name before the `.jar`, you can use a wildcard: `ADD target/springboot-example*.jar springboot-example.jar`","body":"Are you sure you the file <code>target&#47;springboot-example.jar</code> exists? It might have a different name, depending on how have configured the jar name generation E.g if you have the version built into the name before the <code>.jar</code>, you can use a wildcard: <code>ADD target&#47;springboot-example*.jar springboot-example.jar</code>"},{"owner":{"account_id":13037809,"reputation":1278,"user_id":9422114,"accept_rate":75,"display_name":"Jacobo"},"score":0,"creation_date":1653965501,"post_id":72437422,"comment_id":127973050,"body_markdown":"Have you tried to specify a WORKDIR?","body":"Have you tried to specify a WORKDIR?"}],"answers":[{"tags":[],"owner":{"account_id":16920875,"reputation":375,"user_id":12237733,"display_name":"Farhan Yudhi Fatah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656581216,"creation_date":1656581216,"answer_id":72813381,"question_id":72437422,"body_markdown":"In my case, the target file isn&#39;t match with pom.xml file.\r\n\r\nYour target `springboot-example` is the (`&lt;artifactId&gt;`+`&lt;version&gt;`**.jar**) in pom.xml. I think `springboot-example` you declared in the dockerfile is doesn&#39;t match with **artifactId** and **version** tag in the pom.xml file. Just make sure your project with follow this step:\r\n\r\n## Step-1 ##\r\ngo to the pom.xml file and make sure your `&lt;grupId&gt;` and `&lt;artifactId&gt;` its same with your Dockerfile target\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9GeRY.png\r\n\r\n## Step-2 ##\r\n\r\nSetting the Dockerfile, for my project it will be like this:\r\n\r\n    FROM openjdk:17\r\n    ADD target/intermnc-0.0.1.jar intermnc-0.0.1.jar\r\n    EXPOSE 8081\r\n    ENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java ${JAVA_OPTS} -jar intermnc-0.0.1.jar&quot;]\r\n\r\nIts SOLVED in my case, good luck dude!","title":"ADD failed: file not found in build context or excluded by .dockerignore:","body":"<p>In my case, the target file isn't match with pom.xml file.</p>\n<p>Your target <code>springboot-example</code> is the (<code>&lt;artifactId&gt;</code>+<code>&lt;version&gt;</code><strong>.jar</strong>) in pom.xml. I think <code>springboot-example</code> you declared in the dockerfile is doesn't match with <strong>artifactId</strong> and <strong>version</strong> tag in the pom.xml file. Just make sure your project with follow this step:</p>\n<h2>Step-1</h2>\n<p>go to the pom.xml file and make sure your <code>&lt;grupId&gt;</code> and <code>&lt;artifactId&gt;</code> its same with your Dockerfile target\n<a href=\"https://i.stack.imgur.com/9GeRY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9GeRY.png\" alt=\"enter image description here\" /></a></p>\n<h2>Step-2</h2>\n<p>Setting the Dockerfile, for my project it will be like this:</p>\n<pre><code>FROM openjdk:17\nADD target/intermnc-0.0.1.jar intermnc-0.0.1.jar\nEXPOSE 8081\nENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java ${JAVA_OPTS} -jar intermnc-0.0.1.jar&quot;]\n</code></pre>\n<p>Its SOLVED in my case, good luck dude!</p>\n"},{"tags":[],"owner":{"account_id":7654053,"reputation":21,"user_id":5801655,"display_name":"user5801655"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702032900,"creation_date":1702032900,"answer_id":77626065,"question_id":72437422,"body_markdown":"I solved the problem by specifying relative path instead of absolute path.\r\n\r\nMy DockerFile and all other files were at &quot;/root/files&quot; directory and I was inside &quot;/root/files&quot; directory.\r\n\r\nEarlier I had below statement in Dockerfile, \r\n\r\n    ADD --chown=abcuser:abc /root/files/patches.bom /opt/sbj/patches/patches.bom\r\n\r\nwhich I changed to,\r\n\r\n    ADD --chown=abcuser:abc ./patches.bom /opt/sbj/patches/patches.bom\r\n\r\nThis worked. \r\n\r\n\r\n","title":"ADD failed: file not found in build context or excluded by .dockerignore:","body":"<p>I solved the problem by specifying relative path instead of absolute path.</p>\n<p>My DockerFile and all other files were at &quot;/root/files&quot; directory and I was inside &quot;/root/files&quot; directory.</p>\n<p>Earlier I had below statement in Dockerfile,</p>\n<pre><code>ADD --chown=abcuser:abc /root/files/patches.bom /opt/sbj/patches/patches.bom\n</code></pre>\n<p>which I changed to,</p>\n<pre><code>ADD --chown=abcuser:abc ./patches.bom /opt/sbj/patches/patches.bom\n</code></pre>\n<p>This worked.</p>\n"}],"owner":{"account_id":21840692,"reputation":21,"user_id":16134247,"display_name":"Kuldeep Shrivastava"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2903,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1702032900,"creation_date":1653928108,"question_id":72437422,"body_markdown":"This is my Dockerfile:\r\n\r\n```\r\nFROM openjdk:8\r\nEXPOSE 8080\r\nADD target/springboot-example.jar springboot-example.jar\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/springboot-example.jar&quot;]\r\n```\r\n\r\nWhile running `docker build`, I see this error:\r\n\r\n&gt; Step 3/4 : ADD target/springboot-example.jar springboot-example.jar   \r\n&gt; ADD failed: file not found in build context or excluded by .dockerignore: stat target/springboot-example.jar: file does not exist\r\n","title":"ADD failed: file not found in build context or excluded by .dockerignore:","body":"<p>This is my Dockerfile:</p>\n<pre><code>FROM openjdk:8\nEXPOSE 8080\nADD target/springboot-example.jar springboot-example.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/springboot-example.jar&quot;]\n</code></pre>\n<p>While running <code>docker build</code>, I see this error:</p>\n<blockquote>\n<p>Step 3/4 : ADD target/springboot-example.jar springboot-example.jar<br />\nADD failed: file not found in build context or excluded by .dockerignore: stat target/springboot-example.jar: file does not exist</p>\n</blockquote>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9909,"page":8,"page_size":100}
