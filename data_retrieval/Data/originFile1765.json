{"items":[{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1639150948,"post_id":70305477,"comment_id":124282622,"body_markdown":"Stop using  `doOnSuccess` that is used for side-effects. If you don’t know what a side effect is, then look it up. Logging is for instance a side effect. You should be using `flatMap` Instead and also remove all subscribe calls and never call `block` in a reactice application.","body":"Stop using  <code>doOnSuccess</code> that is used for side-effects. If you don’t know what a side effect is, then look it up. Logging is for instance a side effect. You should be using <code>flatMap</code> Instead and also remove all subscribe calls and never call <code>block</code> in a reactice application."},{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1639158237,"post_id":70305477,"comment_id":124285428,"body_markdown":"@Toerktumlare so I need to replace doOnSuccess method with flatMap method. That much is sufficient? like from perspective of API returning value before doing all DB call &amp; transaction handling if I do in future?","body":"@Toerktumlare so I need to replace doOnSuccess method with flatMap method. That much is sufficient? like from perspective of API returning value before doing all DB call &amp; transaction handling if I do in future?"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1639161006,"post_id":70305477,"comment_id":124286382,"body_markdown":"I suggest you go through the getting started section of the spring reactor documentation. Developing with reactor is a whole new way of thinking when it comes to programming, and tbh its not just ”switching to flatMap” will solve everything. Stack overflow is not the place to ask if you want to learn the basics, i suggest you do a bit more research on how reactor works. Because as i said in my first comment, its also about not subscribing and not blocking.","body":"I suggest you go through the getting started section of the spring reactor documentation. Developing with reactor is a whole new way of thinking when it comes to programming, and tbh its not just ”switching to flatMap” will solve everything. Stack overflow is not the place to ask if you want to learn the basics, i suggest you do a bit more research on how reactor works. Because as i said in my first comment, its also about not subscribing and not blocking."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1639161147,"post_id":70305477,"comment_id":124286438,"body_markdown":"The getting started section will answer your question of how to pass values through the reactive pipeline, so please put some effort before asking here. Please read this and the first answer https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users","body":"The getting started section will answer your question of how to pass values through the reactive pipeline, so please put some effort before asking here. Please read this and the first answer <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":80124,"reputation":528,"user_id":226758,"accept_rate":92,"display_name":"Harry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639436751,"creation_date":1639255902,"answer_id":70318944,"question_id":70305477,"body_markdown":"Based on my understanding you could actually make it more succint and also you dont need to use block().\r\nHere&#39;s a sample code which you could use\r\n\r\n     return seriesRepo\r\n      .findByItemType(request.getItemType())\r\n      .switchIfEmpty(Mono.error({YOUR EXCEPTION})))\r\n      .flatMap(series -&gt; Mono.just( getBillNumberByType(series) ))\r\n      .flatMap(billNo -&gt; {\r\n         MasterDetails masterDetails = new MasterDetails();\r\n         // operation to copy request info to masterDetails\r\n         masterDetails.setBillNo(billNo);\r\n         return Mono.just(masterDetails);\r\n      }).flatMap(masterDetailsRepo::save)\r\n      .flatMap( masterDetails -&gt; {\r\n          MasterResponse response = new MasterResponse(); \r\n          response.setBillNo(masterDetails.getBillNo())\r\n          return Mono.just(response);\r\n      })","title":"How to chain the operation in a pipeline when data of second operation is dependent upon first","body":"<p>Based on my understanding you could actually make it more succint and also you dont need to use block().\nHere's a sample code which you could use</p>\n<pre><code> return seriesRepo\n  .findByItemType(request.getItemType())\n  .switchIfEmpty(Mono.error({YOUR EXCEPTION})))\n  .flatMap(series -&gt; Mono.just( getBillNumberByType(series) ))\n  .flatMap(billNo -&gt; {\n     MasterDetails masterDetails = new MasterDetails();\n     // operation to copy request info to masterDetails\n     masterDetails.setBillNo(billNo);\n     return Mono.just(masterDetails);\n  }).flatMap(masterDetailsRepo::save)\n  .flatMap( masterDetails -&gt; {\n      MasterResponse response = new MasterResponse(); \n      response.setBillNo(masterDetails.getBillNo())\n      return Mono.just(response);\n  })\n</code></pre>\n"}],"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":612,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70318944,"answer_count":1,"score":-1,"last_activity_date":1639436751,"creation_date":1639144088,"question_id":70305477,"body_markdown":"I have a scenario in which some DB calls dependent upon other, hence I am not getting how to chain all these operation.\r\nScenario: 3 tables are considered. One for getting incremental number from a table (DB call 1), then after getting the number, increment &amp; save it (DB call 2), then using it to store it in another table (DB call 3), then need to store some more information in a child table of previous operation&#39;s table (DB call 4)\r\n\r\nI am not able to get how to keep all these operation in one pipeline. Hence, I did nested operation. Due to which before completion of all DB operation, API is returning the value already. So, in worst case scenario, if 4th DB call operation is failing, still the API has returned the value which shouldn&#39;t happen. \r\nCan anyone suggest how to make this task in one chain? \r\nHow to pass first DB call&#39;s operation to other operation in same chain?\r\n\r\n\tpublic Mono&lt;MasterResponse&gt; createMasterDetails(MasterRequest request)\r\n\t{\r\n\t\tMasterResponse response = new MasterResponse(); \r\n\t\t\r\n\t\t// DB op 1\r\n\t\tseriesRepo.findByItemType(request.getItemType())\r\n\t\t.doOnSuccess( series -&gt; {\r\n\t\t\tif(series == null)\r\n\t\t\t  throw new RunTimeException(&quot;Series detail not found for itemType: &quot; + request.getItemType());\r\n\r\n\t\t\t// 2nd DB operation is within this method\r\n\t\t\tString billNo = getBillNumberByType(series);\r\n\t\t\t\r\n\t\t\tMasterDetails masterDetails = new MasterDetails();\r\n\t\t\t// operation to copy request info to masterDetails\r\n\t\t\tmasterDetails.setBillNo(billNo);\r\n\t\t\t\r\n\t\t\t// returning dto value set\r\n\t\t\tresponse.setBillNo(billNo);\r\n\t\t\t \r\n\t\t\t// DB op 3\r\n\t\t\tmasterDetailsRepo.save(masterDetails)\t\t\r\n\t\t\t.doOnSuccess(masterData -&gt; {\r\n\t\t\t\t\r\n\t\t\t\tMasterAttribute masterAttribute = new MasterAttribute();\r\n\t\t\t\t// operation to copy request info to masterAttribute\r\n\t\t\t\tmasterDetails.setMasterId(masterData.getId());\r\n\t\t\t\t\r\n\t\t\t\tmasterDetailsRepo.save(masterDetails)\r\n\t\t\t\t  .doOnSuccess(ardRes -&gt; log.info(&quot;master details saved in DB.&quot;))\r\n\t\t\t\t  .subscribe();\t\t\t\t\r\n\t\t\t\r\n\t\t\t}).subscribe();\r\n\t\t}).doOnError(err -&gt;{\r\n\t\t  log.error(&quot;Unable to fetch information from series :: {}&quot;, err.getMessage()); \r\n\t\t  Mono.error(new RunTimeException(&quot;Unable to fetch information from series :: {}&quot; + err.getMessage()));\r\n\t\t  }).block();        \r\n\r\n\t\treturn Mono.just(response);\r\n\t}\t\t\r\n","title":"How to chain the operation in a pipeline when data of second operation is dependent upon first","body":"<p>I have a scenario in which some DB calls dependent upon other, hence I am not getting how to chain all these operation.\nScenario: 3 tables are considered. One for getting incremental number from a table (DB call 1), then after getting the number, increment &amp; save it (DB call 2), then using it to store it in another table (DB call 3), then need to store some more information in a child table of previous operation's table (DB call 4)</p>\n<p>I am not able to get how to keep all these operation in one pipeline. Hence, I did nested operation. Due to which before completion of all DB operation, API is returning the value already. So, in worst case scenario, if 4th DB call operation is failing, still the API has returned the value which shouldn't happen.\nCan anyone suggest how to make this task in one chain?\nHow to pass first DB call's operation to other operation in same chain?</p>\n<pre><code>public Mono&lt;MasterResponse&gt; createMasterDetails(MasterRequest request)\n{\n    MasterResponse response = new MasterResponse(); \n    \n    // DB op 1\n    seriesRepo.findByItemType(request.getItemType())\n    .doOnSuccess( series -&gt; {\n        if(series == null)\n          throw new RunTimeException(&quot;Series detail not found for itemType: &quot; + request.getItemType());\n\n        // 2nd DB operation is within this method\n        String billNo = getBillNumberByType(series);\n        \n        MasterDetails masterDetails = new MasterDetails();\n        // operation to copy request info to masterDetails\n        masterDetails.setBillNo(billNo);\n        \n        // returning dto value set\n        response.setBillNo(billNo);\n         \n        // DB op 3\n        masterDetailsRepo.save(masterDetails)       \n        .doOnSuccess(masterData -&gt; {\n            \n            MasterAttribute masterAttribute = new MasterAttribute();\n            // operation to copy request info to masterAttribute\n            masterDetails.setMasterId(masterData.getId());\n            \n            masterDetailsRepo.save(masterDetails)\n              .doOnSuccess(ardRes -&gt; log.info(&quot;master details saved in DB.&quot;))\n              .subscribe();             \n        \n        }).subscribe();\n    }).doOnError(err -&gt;{\n      log.error(&quot;Unable to fetch information from series :: {}&quot;, err.getMessage()); \n      Mono.error(new RunTimeException(&quot;Unable to fetch information from series :: {}&quot; + err.getMessage()));\n      }).block();        \n\n    return Mono.just(response);\n}       \n</code></pre>\n"},{"tags":["java","random","syntax-error","runtime-error"],"comments":[{"owner":{"account_id":5386347,"reputation":763,"user_id":4290096,"accept_rate":62,"display_name":"Arun Xavier"},"score":1,"creation_date":1454589311,"post_id":35201137,"comment_id":58118161,"body_markdown":"Delete generated **.class** files ,compile / clean and build all classes again.","body":"Delete generated <b>.class</b> files ,compile / clean and build all classes again."},{"owner":{"account_id":6720977,"reputation":704,"user_id":5181021,"accept_rate":100,"display_name":"ruyili"},"score":0,"creation_date":1454624625,"post_id":35201137,"comment_id":58140827,"body_markdown":"Um why did you add &quot;Duplicate&quot; to the title?","body":"Um why did you add &quot;Duplicate&quot; to the title?"}],"answers":[{"tags":[],"owner":{"account_id":1502229,"reputation":2973,"user_id":1406510,"accept_rate":64,"display_name":"nanosoft"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639416828,"creation_date":1639416828,"answer_id":70338686,"question_id":35201137,"body_markdown":"Running `mvn package` didn&#39;t worked but using below `maven commands` in **sequence** worked. **First** clean and **then** package.\r\n\r\n```\r\nmvn clean\r\nmvn package\r\n```\r\n\r\n\r\n","title":"When running JFrame code I get java.lang.ClassFormatError: Duplicate field in class file","body":"<p>Running <code>mvn package</code> didn't worked but using below <code>maven commands</code> in <strong>sequence</strong> worked. <strong>First</strong> clean and <strong>then</strong> package.</p>\n<pre><code>mvn clean\nmvn package\n</code></pre>\n"}],"owner":{"account_id":7715483,"reputation":31,"user_id":5843406,"display_name":"Brage Haavik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639436614,"creation_date":1454589177,"question_id":35201137,"body_markdown":"I&#39;ve used a jFrame and ever since I only adjusted this small part of code...\r\n\r\n    private void RandomNumberActionPerformed(java.awt.event.ActionEvent evt) {                                             \r\n     \r\n        Random rn = new Random();\r\n        RandomNumber.setText(Integer.toString(rn.nextInt(51)));  \r\n\r\nand since I&#39;ve been getting these errors.\r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassFormatError: Duplicate field name&amp;signature in class file compsciia/NumberSide\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:760)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:455)\r\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:73)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:367)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:361)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:360)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\tat compsciia.MainMenu.StartActionPerformed(MainMenu.java:91)\r\n\tat compsciia.MainMenu.access$000(MainMenu.java:13)\r\n\tat compsciia.MainMenu$1.actionPerformed(MainMenu.java:44)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2346)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) **etc**\r\n\r\nIt was working perfectly fine before. I&#39;m really not sure what to do?\r\nI have two classes, my main menu class which opens up this class (the one with the error). \r\n","title":"When running JFrame code I get java.lang.ClassFormatError: Duplicate field in class file","body":"<p>I've used a jFrame and ever since I only adjusted this small part of code...</p>\n\n<pre><code>private void RandomNumberActionPerformed(java.awt.event.ActionEvent evt) {                                             \n\n    Random rn = new Random();\n    RandomNumber.setText(Integer.toString(rn.nextInt(51)));  \n</code></pre>\n\n<p>and since I've been getting these errors.</p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.ClassFormatError: Duplicate field name&amp;signature in class file compsciia/NumberSide\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClass(ClassLoader.java:760)\nat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\nat java.net.URLClassLoader.defineClass(URLClassLoader.java:455)\nat java.net.URLClassLoader.access$100(URLClassLoader.java:73)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:367)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:361)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:360)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\nat compsciia.MainMenu.StartActionPerformed(MainMenu.java:91)\nat compsciia.MainMenu.access$000(MainMenu.java:13)\nat compsciia.MainMenu$1.actionPerformed(MainMenu.java:44)\nat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\nat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2346)\nat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\nat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) **etc**\n</code></pre>\n\n<p>It was working perfectly fine before. I'm really not sure what to do?\nI have two classes, my main menu class which opens up this class (the one with the error). </p>\n"},{"tags":["java","system-tray","tray"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1611159355,"post_id":65807692,"comment_id":116362804,"body_markdown":"Are you using [java-gnome](http://java-gnome.sourceforge.net/) and [dorkbox/SystemTray](https://github.com/dorkbox/SystemTray)?","body":"Are you using <a href=\"http://java-gnome.sourceforge.net/\" rel=\"nofollow noreferrer\">java-gnome</a> and <a href=\"https://github.com/dorkbox/SystemTray\" rel=\"nofollow noreferrer\">dorkbox/SystemTray</a>?"},{"owner":{"display_name":"user14792801"},"score":0,"creation_date":1611200444,"post_id":65807692,"comment_id":116376299,"body_markdown":"dorkbox/SystemTray  ? You meant the library right. Yes I&#39;m using it.","body":"dorkbox/SystemTray  ? You meant the library right. Yes I&#39;m using it."}],"answers":[{"tags":[],"owner":{"account_id":2405117,"reputation":977,"user_id":2101812,"display_name":"Nathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639435969,"creation_date":1639435969,"answer_id":70341861,"question_id":65807692,"body_markdown":"A full, working example (also used for validation and testing) is available here: https://github.com/dorkbox/SystemTray/blob/master/test/dorkbox/TestTray.java\r\n\r\nI have also in-lined the source of that file, in case it ever disappears.\r\n\r\n```\r\n    /*\r\n     * Copyright 2021 dorkbox, llc\r\n     *\r\n     * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n     * you may not use this file except in compliance with the License.\r\n     * You may obtain a copy of the License at\r\n     *\r\n     *     http://www.apache.org/licenses/LICENSE-2.0\r\n     *\r\n     * Unless required by applicable law or agreed to in writing, software\r\n     * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n     * See the License for the specific language governing permissions and\r\n     * limitations under the License.\r\n     */\r\n    package dorkbox;\r\n    \r\n    import java.awt.event.ActionListener;\r\n    import java.io.IOException;\r\n    import java.net.URL;\r\n    import java.util.Random;\r\n    \r\n    import dorkbox.os.OS;\r\n    import dorkbox.systemTray.Checkbox;\r\n    import dorkbox.systemTray.Menu;\r\n    import dorkbox.systemTray.MenuItem;\r\n    import dorkbox.systemTray.Separator;\r\n    import dorkbox.systemTray.SystemTray;\r\n    import dorkbox.util.CacheUtil;\r\n    import dorkbox.util.Desktop;\r\n    \r\n    /**\r\n     * Icons from &#39;SJJB Icons&#39;, public domain/CC0 icon set\r\n     */\r\n    public\r\n    class TestTray {\r\n    \r\n        public static final URL BLUE_CAMPING = TestTray.class.getResource(&quot;accommodation_camping.glow.0092DA.32.png&quot;);\r\n        public static final URL BLACK_FIRE = TestTray.class.getResource(&quot;amenity_firestation.p.000000.32.png&quot;);\r\n    \r\n        public static final URL BLACK_MAIL = TestTray.class.getResource(&quot;amenity_post_box.p.000000.32.png&quot;);\r\n        public static final URL GREEN_MAIL = TestTray.class.getResource(&quot;amenity_post_box.p.39AC39.32.png&quot;);\r\n    \r\n        public static final URL BLACK_BUS = TestTray.class.getResource(&quot;transport_bus_station.p.000000.32.png&quot;);\r\n        public static final URL LT_GRAY_BUS = TestTray.class.getResource(&quot;transport_bus_station.p.999999.32.png&quot;);\r\n    \r\n        public static final URL BLACK_TRAIN = TestTray.class.getResource(&quot;transport_train_station.p.000000.32.png&quot;);\r\n        public static final URL GREEN_TRAIN = TestTray.class.getResource(&quot;transport_train_station.p.39AC39.32.png&quot;);\r\n        public static final URL LT_GRAY_TRAIN = TestTray.class.getResource(&quot;transport_train_station.p.666666.32.png&quot;);\r\n    \r\n        // from issue 123\r\n        public static final URL NOTIFY_IMAGE = TestTray.class.getResource(&quot;RemoteNotifications.png&quot;);\r\n    \r\n        public static\r\n        void main(String[] args) {\r\n            // make sure JNA jar is on the classpath!\r\n            new TestTray();\r\n        }\r\n    \r\n        private final SystemTray systemTray;\r\n        private final ActionListener callbackGray;\r\n    \r\n        public\r\n        TestTray() {\r\n            SystemTray.DEBUG = true; // for test apps, we always want to run in debug mode\r\n    //        SystemTray.FORCE_TRAY_TYPE = SystemTray.TrayType.Swing;\r\n    \r\n            // for test apps, make sure the cache is always reset. These are the ones used, and you should never do this in production.\r\n            CacheUtil.clear(&quot;SysTrayExample&quot;);\r\n    \r\n            // SwingUtil.setLookAndFeel(null); // set Native L&amp;F (this is the System L&amp;F instead of CrossPlatform L&amp;F)\r\n            // SystemTray.SWING_UI = new CustomSwingUI();\r\n    \r\n            this.systemTray = SystemTray.get(&quot;SysTrayExample&quot;);\r\n            if (systemTray == null) {\r\n                throw new RuntimeException(&quot;Unable to load SystemTray!&quot;);\r\n            }\r\n    \r\n            // SWT/JavaFX &quot;shutdown hooks&quot; have changed. Since it&#39;s no longer available with JPMS, it is no longer supported.\r\n            // Developers must add the shutdown hooks themselves.\r\n    \r\n            systemTray.setTooltip(&quot;Mail Checker&quot;);\r\n            systemTray.setImage(LT_GRAY_TRAIN);\r\n            systemTray.setStatus(&quot;No Mail&quot;);\r\n    \r\n            callbackGray = e-&gt;{\r\n                final MenuItem entry = (MenuItem) e.getSource();\r\n                systemTray.setStatus(null)\r\n                          .setImage(BLACK_TRAIN);\r\n    \r\n                entry.setCallback(null);\r\n    //                systemTray.setStatus(&quot;Mail Empty&quot;);\r\n                systemTray.getMenu().remove(entry);\r\n                entry.remove();\r\n                System.err.println(&quot;POW&quot;);\r\n            };\r\n    \r\n    \r\n            Menu mainMenu = systemTray.getMenu();\r\n    \r\n            MenuItem greenEntry = new MenuItem(&quot;Green Mail&quot;, e-&gt;{\r\n                final MenuItem entry = (MenuItem) e.getSource();\r\n                systemTray.setStatus(&quot;Some Mail!&quot;);\r\n                systemTray.setImage(GREEN_TRAIN);\r\n    \r\n                entry.setCallback(callbackGray);\r\n                entry.setImage(BLACK_MAIL);\r\n                entry.setText(&quot;Delete Mail&quot;);\r\n                entry.setTooltip(null); // remove the tooltip\r\n    //                systemTray.remove(menuEntry);\r\n            });\r\n            greenEntry.setImage(GREEN_MAIL);\r\n            // case does not matter\r\n            greenEntry.setShortcut(&#39;G&#39;);\r\n            greenEntry.setTooltip(&quot;This means you have green mail!&quot;);\r\n            mainMenu.add(greenEntry);\r\n    \r\n    \r\n            Checkbox checkbox = new Checkbox(&quot;Euro € Mail&quot;, e-&gt;System.err.println(&quot;Am i checked? &quot; + ((Checkbox) e.getSource()).getChecked()));\r\n            checkbox.setShortcut(&#39;€&#39;);\r\n            mainMenu.add(checkbox);\r\n    \r\n            MenuItem removeTest = new MenuItem(&quot;This should not be here&quot;, e-&gt;{\r\n                try {\r\n                    Desktop.browseURL(&quot;https://git.dorkbox.com/dorkbox/SystemTray&quot;);\r\n                } catch (IOException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n            });\r\n            mainMenu.add(removeTest);\r\n            mainMenu.remove(removeTest);\r\n    \r\n            mainMenu.add(new Separator());\r\n    \r\n            mainMenu.add(new MenuItem(&quot;About&quot;, e-&gt;{\r\n                try {\r\n                    Desktop.browseURL(&quot;https://git.dorkbox.com/dorkbox/SystemTray&quot;);\r\n                } catch (IOException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n            }));\r\n    \r\n    \r\n            mainMenu.add(new MenuItem(&quot;Temp Directory&quot;, e-&gt;{\r\n                try {\r\n                    Desktop.browseDirectory(OS.TEMP_DIR.getAbsolutePath());\r\n                } catch (IOException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n            }));\r\n    \r\n            mainMenu.add(new MenuItem(&quot;Notify&quot;, e-&gt;{\r\n                final MenuItem entry = (MenuItem) e.getSource();\r\n                systemTray.setStatus(&quot;Notification!&quot;);\r\n                systemTray.setImage(NOTIFY_IMAGE);\r\n    \r\n                entry.setImage(NOTIFY_IMAGE);\r\n                entry.setText(&quot;Did notify&quot;);\r\n                System.err.println(&quot;NOTIFICATION!&quot;);\r\n            }));\r\n    \r\n    \r\n            Menu submenu = new Menu(&quot;Options&quot;, BLUE_CAMPING);\r\n            submenu.setShortcut(&#39;t&#39;);\r\n    \r\n    \r\n            MenuItem disableMenu = new MenuItem(&quot;Disable menu&quot;, BLACK_BUS, e-&gt;{\r\n                MenuItem source = (MenuItem) e.getSource();\r\n                source.getParent().setEnabled(false);\r\n            });\r\n            submenu.add(disableMenu);\r\n    \r\n    \r\n            submenu.add(new MenuItem(&quot;Hide tray&quot;, LT_GRAY_BUS, e-&gt;systemTray.setEnabled(false)));\r\n            submenu.add(new MenuItem(&quot;Remove menu&quot;, BLACK_FIRE, e-&gt;{\r\n                MenuItem source = (MenuItem) e.getSource();\r\n                source.getParent().remove();\r\n            }));\r\n    \r\n            submenu.add(new MenuItem(&quot;Add new entry to tray&quot;,\r\n                                     e-&gt;systemTray.getMenu().add(new MenuItem(&quot;Random &quot; + new Random().nextInt(10)))));\r\n            mainMenu.add(submenu);\r\n    \r\n            MenuItem entry = new MenuItem(&quot;Type: &quot; + systemTray.getType().toString());\r\n            entry.setEnabled(false);\r\n            systemTray.getMenu().add(entry);\r\n    \r\n            systemTray.getMenu().add(new MenuItem(&quot;Quit&quot;, e-&gt;{\r\n                systemTray.shutdown();\r\n                //System.exit(0);  not necessary if all non-daemon threads have stopped.\r\n            })).setShortcut(&#39;q&#39;); // case does not matter\r\n        }\r\n    }\r\n```\r\n","title":"App icon not showing up despite app running successfully","body":"<p>A full, working example (also used for validation and testing) is available here: <a href=\"https://github.com/dorkbox/SystemTray/blob/master/test/dorkbox/TestTray.java\" rel=\"nofollow noreferrer\">https://github.com/dorkbox/SystemTray/blob/master/test/dorkbox/TestTray.java</a></p>\n<p>I have also in-lined the source of that file, in case it ever disappears.</p>\n<pre><code>    /*\n     * Copyright 2021 dorkbox, llc\n     *\n     * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *     http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     */\n    package dorkbox;\n    \n    import java.awt.event.ActionListener;\n    import java.io.IOException;\n    import java.net.URL;\n    import java.util.Random;\n    \n    import dorkbox.os.OS;\n    import dorkbox.systemTray.Checkbox;\n    import dorkbox.systemTray.Menu;\n    import dorkbox.systemTray.MenuItem;\n    import dorkbox.systemTray.Separator;\n    import dorkbox.systemTray.SystemTray;\n    import dorkbox.util.CacheUtil;\n    import dorkbox.util.Desktop;\n    \n    /**\n     * Icons from 'SJJB Icons', public domain/CC0 icon set\n     */\n    public\n    class TestTray {\n    \n        public static final URL BLUE_CAMPING = TestTray.class.getResource(&quot;accommodation_camping.glow.0092DA.32.png&quot;);\n        public static final URL BLACK_FIRE = TestTray.class.getResource(&quot;amenity_firestation.p.000000.32.png&quot;);\n    \n        public static final URL BLACK_MAIL = TestTray.class.getResource(&quot;amenity_post_box.p.000000.32.png&quot;);\n        public static final URL GREEN_MAIL = TestTray.class.getResource(&quot;amenity_post_box.p.39AC39.32.png&quot;);\n    \n        public static final URL BLACK_BUS = TestTray.class.getResource(&quot;transport_bus_station.p.000000.32.png&quot;);\n        public static final URL LT_GRAY_BUS = TestTray.class.getResource(&quot;transport_bus_station.p.999999.32.png&quot;);\n    \n        public static final URL BLACK_TRAIN = TestTray.class.getResource(&quot;transport_train_station.p.000000.32.png&quot;);\n        public static final URL GREEN_TRAIN = TestTray.class.getResource(&quot;transport_train_station.p.39AC39.32.png&quot;);\n        public static final URL LT_GRAY_TRAIN = TestTray.class.getResource(&quot;transport_train_station.p.666666.32.png&quot;);\n    \n        // from issue 123\n        public static final URL NOTIFY_IMAGE = TestTray.class.getResource(&quot;RemoteNotifications.png&quot;);\n    \n        public static\n        void main(String[] args) {\n            // make sure JNA jar is on the classpath!\n            new TestTray();\n        }\n    \n        private final SystemTray systemTray;\n        private final ActionListener callbackGray;\n    \n        public\n        TestTray() {\n            SystemTray.DEBUG = true; // for test apps, we always want to run in debug mode\n    //        SystemTray.FORCE_TRAY_TYPE = SystemTray.TrayType.Swing;\n    \n            // for test apps, make sure the cache is always reset. These are the ones used, and you should never do this in production.\n            CacheUtil.clear(&quot;SysTrayExample&quot;);\n    \n            // SwingUtil.setLookAndFeel(null); // set Native L&amp;F (this is the System L&amp;F instead of CrossPlatform L&amp;F)\n            // SystemTray.SWING_UI = new CustomSwingUI();\n    \n            this.systemTray = SystemTray.get(&quot;SysTrayExample&quot;);\n            if (systemTray == null) {\n                throw new RuntimeException(&quot;Unable to load SystemTray!&quot;);\n            }\n    \n            // SWT/JavaFX &quot;shutdown hooks&quot; have changed. Since it's no longer available with JPMS, it is no longer supported.\n            // Developers must add the shutdown hooks themselves.\n    \n            systemTray.setTooltip(&quot;Mail Checker&quot;);\n            systemTray.setImage(LT_GRAY_TRAIN);\n            systemTray.setStatus(&quot;No Mail&quot;);\n    \n            callbackGray = e-&gt;{\n                final MenuItem entry = (MenuItem) e.getSource();\n                systemTray.setStatus(null)\n                          .setImage(BLACK_TRAIN);\n    \n                entry.setCallback(null);\n    //                systemTray.setStatus(&quot;Mail Empty&quot;);\n                systemTray.getMenu().remove(entry);\n                entry.remove();\n                System.err.println(&quot;POW&quot;);\n            };\n    \n    \n            Menu mainMenu = systemTray.getMenu();\n    \n            MenuItem greenEntry = new MenuItem(&quot;Green Mail&quot;, e-&gt;{\n                final MenuItem entry = (MenuItem) e.getSource();\n                systemTray.setStatus(&quot;Some Mail!&quot;);\n                systemTray.setImage(GREEN_TRAIN);\n    \n                entry.setCallback(callbackGray);\n                entry.setImage(BLACK_MAIL);\n                entry.setText(&quot;Delete Mail&quot;);\n                entry.setTooltip(null); // remove the tooltip\n    //                systemTray.remove(menuEntry);\n            });\n            greenEntry.setImage(GREEN_MAIL);\n            // case does not matter\n            greenEntry.setShortcut('G');\n            greenEntry.setTooltip(&quot;This means you have green mail!&quot;);\n            mainMenu.add(greenEntry);\n    \n    \n            Checkbox checkbox = new Checkbox(&quot;Euro € Mail&quot;, e-&gt;System.err.println(&quot;Am i checked? &quot; + ((Checkbox) e.getSource()).getChecked()));\n            checkbox.setShortcut('€');\n            mainMenu.add(checkbox);\n    \n            MenuItem removeTest = new MenuItem(&quot;This should not be here&quot;, e-&gt;{\n                try {\n                    Desktop.browseURL(&quot;https://git.dorkbox.com/dorkbox/SystemTray&quot;);\n                } catch (IOException e1) {\n                    e1.printStackTrace();\n                }\n            });\n            mainMenu.add(removeTest);\n            mainMenu.remove(removeTest);\n    \n            mainMenu.add(new Separator());\n    \n            mainMenu.add(new MenuItem(&quot;About&quot;, e-&gt;{\n                try {\n                    Desktop.browseURL(&quot;https://git.dorkbox.com/dorkbox/SystemTray&quot;);\n                } catch (IOException e1) {\n                    e1.printStackTrace();\n                }\n            }));\n    \n    \n            mainMenu.add(new MenuItem(&quot;Temp Directory&quot;, e-&gt;{\n                try {\n                    Desktop.browseDirectory(OS.TEMP_DIR.getAbsolutePath());\n                } catch (IOException e1) {\n                    e1.printStackTrace();\n                }\n            }));\n    \n            mainMenu.add(new MenuItem(&quot;Notify&quot;, e-&gt;{\n                final MenuItem entry = (MenuItem) e.getSource();\n                systemTray.setStatus(&quot;Notification!&quot;);\n                systemTray.setImage(NOTIFY_IMAGE);\n    \n                entry.setImage(NOTIFY_IMAGE);\n                entry.setText(&quot;Did notify&quot;);\n                System.err.println(&quot;NOTIFICATION!&quot;);\n            }));\n    \n    \n            Menu submenu = new Menu(&quot;Options&quot;, BLUE_CAMPING);\n            submenu.setShortcut('t');\n    \n    \n            MenuItem disableMenu = new MenuItem(&quot;Disable menu&quot;, BLACK_BUS, e-&gt;{\n                MenuItem source = (MenuItem) e.getSource();\n                source.getParent().setEnabled(false);\n            });\n            submenu.add(disableMenu);\n    \n    \n            submenu.add(new MenuItem(&quot;Hide tray&quot;, LT_GRAY_BUS, e-&gt;systemTray.setEnabled(false)));\n            submenu.add(new MenuItem(&quot;Remove menu&quot;, BLACK_FIRE, e-&gt;{\n                MenuItem source = (MenuItem) e.getSource();\n                source.getParent().remove();\n            }));\n    \n            submenu.add(new MenuItem(&quot;Add new entry to tray&quot;,\n                                     e-&gt;systemTray.getMenu().add(new MenuItem(&quot;Random &quot; + new Random().nextInt(10)))));\n            mainMenu.add(submenu);\n    \n            MenuItem entry = new MenuItem(&quot;Type: &quot; + systemTray.getType().toString());\n            entry.setEnabled(false);\n            systemTray.getMenu().add(entry);\n    \n            systemTray.getMenu().add(new MenuItem(&quot;Quit&quot;, e-&gt;{\n                systemTray.shutdown();\n                //System.exit(0);  not necessary if all non-daemon threads have stopped.\n            })).setShortcut('q'); // case does not matter\n        }\n    }\n</code></pre>\n"}],"owner":{"display_name":"user14792801"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1639435969,"creation_date":1611138564,"question_id":65807692,"body_markdown":"I have a Java Desktop application for which the icon does not shows up  every time it runs. The app might run successfully but the icon won&#39;t show up.\r\nI was hinted by my senior that this might be the issue of the library we use. I looked up on Internet and was unable to find anything. \r\nIf anyone has any idea how this may be fixed, pls contact.\r\n\r\nI want to add new Libraries to test the functioning of it but is unable to find. As of now dorkbox.SystemTray and dorkbox.Util are the two libraries in usage.\r\n\r\nIs there any different library to try out or any method.\r\n\r\nThe following is my code\r\nThis is how I&#39;ve initialized ```SystemTray```\r\n```\r\n    public static SystemTray systemTray;\r\n```\r\nThis is the code to display ```SystemTray```\r\n\r\n    public static void showTray() throws Exception {\r\n    \ttry {\r\n\t  \r\n\t    if (systemTray == null) {\r\n\t     \r\n\t    \tSystem.exit(0);\r\n\t    }\r\n\t  \r\n\t    System.out.println(SystemTray.DEBUG);\r\n\t    SystemTray.DEBUG=true;\r\n\t    CacheUtil.clear();\r\n\t    SystemTray.FORCE_GTK2=true;\r\n\t    systemTray.setImage(&quot;/usr/local/bin/Desklog-Client/nonet.png&quot;);\r\n\t \r\n```\r\n\t   ","title":"App icon not showing up despite app running successfully","body":"<p>I have a Java Desktop application for which the icon does not shows up  every time it runs. The app might run successfully but the icon won't show up.\nI was hinted by my senior that this might be the issue of the library we use. I looked up on Internet and was unable to find anything.\nIf anyone has any idea how this may be fixed, pls contact.</p>\n<p>I want to add new Libraries to test the functioning of it but is unable to find. As of now dorkbox.SystemTray and dorkbox.Util are the two libraries in usage.</p>\n<p>Is there any different library to try out or any method.</p>\n<p>The following is my code\nThis is how I've initialized <code>SystemTray</code></p>\n<pre><code>    public static SystemTray systemTray;\n</code></pre>\n<p>This is the code to display <code>SystemTray</code></p>\n<pre><code>public static void showTray() throws Exception {\n    try {\n  \n    if (systemTray == null) {\n     \n        System.exit(0);\n    }\n  \n    System.out.println(SystemTray.DEBUG);\n    SystemTray.DEBUG=true;\n    CacheUtil.clear();\n    SystemTray.FORCE_GTK2=true;\n    systemTray.setImage(&quot;/usr/local/bin/Desklog-Client/nonet.png&quot;);\n \n</code></pre>\n<pre><code>       \n</code></pre>\n"},{"tags":["java","duration","localdate","localdatetime","offsetdatetime"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":3,"creation_date":1639433926,"post_id":70341493,"comment_id":124343228,"body_markdown":"You should drop `Calendar` immediately. You are already using the newer Java Date and Time API available in `java.time`.","body":"You should drop <code>Calendar</code> immediately. You are already using the newer Java Date and Time API available in <code>java.time</code>."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639435841,"creation_date":1639435077,"answer_id":70341755,"question_id":70341493,"body_markdown":"If you think on it, you’ll realize that rarely does it make sense to represent a span of time as a combination of years-months-days-hours-minutes-seconds. \r\n\r\nThat is why *java.time* splits out the scales into two separate classes:\r\n\r\n - `Period` years-months-days\r\n - `Duration` hours-minutes-seconds\r\n\r\n## `org.threeten.extra.PeriodDuration`\r\n\r\nIf you insist on combing the two scales, I suggest adding the [*ThreeTen-Extra*](https://www.threeten.org/threeten-extra/) library to your project. This provides the [`PeriodDuration`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html) class. \r\n\r\n    OffsetDateTime odtThen = … ;\r\n    OffsetDateTime odtNow = OffsetDateTime.now( odtThen.getOffset() ) ;\r\n    PeriodDuration pd = PeriodDuration.between( odtThen, odtNow ) ;\r\n\r\nInterrogate to obtain each part. One way to do that is to loop on the list returned from [`PeriodDuration#getUnits`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html#getUnits()).\r\n\r\n    \r\n\r\n\r\n------------\r\n\r\nAs [commented](https://stackoverflow.com/questions/70341493/calculating-time-ago-using-offsetdatetime-in-java/70341755#comment124343228_70341493), stop using `Calendar` class. Along with `Date` &amp; `SimpleDateFormat`, these terrible date-time classes were entirely supplanted by the *java.time* classes defined in JSR 310. \r\n","title":"Calculating &quot;time ago&quot; using OffsetDateTime in Java","body":"<p>If you think on it, you’ll realize that rarely does it make sense to represent a span of time as a combination of years-months-days-hours-minutes-seconds.</p>\n<p>That is why <em>java.time</em> splits out the scales into two separate classes:</p>\n<ul>\n<li><code>Period</code> years-months-days</li>\n<li><code>Duration</code> hours-minutes-seconds</li>\n</ul>\n<h2><code>org.threeten.extra.PeriodDuration</code></h2>\n<p>If you insist on combing the two scales, I suggest adding the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a> library to your project. This provides the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html\" rel=\"nofollow noreferrer\"><code>PeriodDuration</code></a> class.</p>\n<pre><code>OffsetDateTime odtThen = … ;\nOffsetDateTime odtNow = OffsetDateTime.now( odtThen.getOffset() ) ;\nPeriodDuration pd = PeriodDuration.between( odtThen, odtNow ) ;\n</code></pre>\n<p>Interrogate to obtain each part. One way to do that is to loop on the list returned from <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html#getUnits()\" rel=\"nofollow noreferrer\"><code>PeriodDuration#getUnits</code></a>.</p>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/questions/70341493/calculating-time-ago-using-offsetdatetime-in-java/70341755#comment124343228_70341493\">commented</a>, stop using <code>Calendar</code> class. Along with <code>Date</code> &amp; <code>SimpleDateFormat</code>, these terrible date-time classes were entirely supplanted by the <em>java.time</em> classes defined in JSR 310.</p>\n"}],"owner":{"account_id":6237134,"reputation":25,"user_id":4852060,"display_name":"uriri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1798,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1639495188,"answer_count":1,"score":0,"last_activity_date":1639435841,"creation_date":1639433147,"question_id":70341493,"body_markdown":"I currently have this code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public static String getTimeAgo(OffsetDateTime dateArg) {\r\n        Instant instantNow = Instant.now();\r\n        Instant instantThen = dateArg.toInstant();\r\n        Duration comparedDuration = Duration.between(instantThen, instantNow);\r\n    \r\n        LocalDate localDate = dateArg.toLocalDate();\r\n        LocalDate localDateToday = LocalDate.now(ZoneId.systemDefault());\r\n        Period comparedPeriod = Period.between(localDate, localDateToday);\r\n    \r\n        ZonedDateTime zdt1 = ZonedDateTime.ofInstant(instantThen, ZoneId.systemDefault());\r\n        ZonedDateTime zdt2 = ZonedDateTime.ofInstant(instantNow, ZoneId.systemDefault());\r\n        Calendar calendarFetched = GregorianCalendar.from(zdt1);\r\n        Calendar calendarNow = GregorianCalendar.from(zdt2);\r\n    \r\n        Instant d1i = Instant.ofEpochMilli(calendarFetched.getTimeInMillis());\r\n        Instant d2i = Instant.ofEpochMilli(calendarNow.getTimeInMillis());\r\n    \r\n        LocalDateTime startDateWeek = LocalDateTime.ofInstant(d1i, ZoneId.systemDefault());\r\n        LocalDateTime endDateWeek = LocalDateTime.ofInstant(d2i, ZoneId.systemDefault());\r\n    \r\n        long weeksCalc = ChronoUnit.WEEKS.between(startDateWeek, endDateWeek);\r\n    \r\n    \r\n        String s = &quot;&quot;;\r\n        if(comparedPeriod.getYears() &gt; 0) {\r\n            s += comparedPeriod.getYears() + &quot; year&quot; + ((comparedPeriod.getYears() == 1) ? &quot; &quot; : &quot;s &quot;);\r\n        }\r\n    \r\n        if(weeksCalc &gt; 4){\r\n            s += comparedPeriod.getMonths() + &quot; month&quot; + ((comparedPeriod.getMonths() == 1) ? &quot; &quot; : &quot;s &quot;);\r\n    \r\n        }\r\n        else{\r\n            s += weeksCalc + &quot; weeks &quot;;\r\n    \r\n        }\r\n    \r\n        if (comparedPeriod.getDays() &gt; 0){\r\n            s += comparedPeriod.getDays() + &quot; day&quot; + ((comparedPeriod.getDays() == 1) ? &quot; &quot; : &quot;s &quot;);\r\n        }\r\n    \r\n        if (comparedDuration.toHoursPart() &gt; 0) {\r\n            s += comparedDuration.toHoursPart() + &quot; hour&quot; + ((comparedDuration.toHoursPart() == 1) ? &quot; &quot; : &quot;s &quot;);\r\n        }\r\n        else{\r\n            if(comparedDuration.toMinutesPart() &gt; 0){\r\n                s += comparedDuration.toMinutesPart() + &quot; minute&quot; + ((comparedDuration.toMinutesPart() == 1) ? &quot; &quot; : &quot;s &quot;);\r\n            }\r\n    \r\n            else s += comparedDuration.toSecondsPart() + &quot; seconds &quot;; // lol lets just end it here...\r\n        }\r\n    \r\n        return s + &quot;ago&quot;;\r\n    }\r\n\r\nThe goal is to display &quot;time ago&quot; based off from given `OffsetDateTime` argument. This is to show the year, month, weeks, days, hours, minutes, all the way down to seconds, if said time units were not at `0`. But I am having trouble calculating the month as the result always come back as `0`, while having an &quot;s&quot; indicating that it is not truly `0`.\r\n\r\nFor example, running `System.out.println(Utils.getTimeAgo(OffsetDateTime.parse(&quot;2020-12-13T15:54:43.971273200-05:00&quot;)))` displays `1 year 0 months 1 hour ago` as its output...\r\n","title":"Calculating &quot;time ago&quot; using OffsetDateTime in Java","body":"<p>I currently have this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String getTimeAgo(OffsetDateTime dateArg) {\n    Instant instantNow = Instant.now();\n    Instant instantThen = dateArg.toInstant();\n    Duration comparedDuration = Duration.between(instantThen, instantNow);\n\n    LocalDate localDate = dateArg.toLocalDate();\n    LocalDate localDateToday = LocalDate.now(ZoneId.systemDefault());\n    Period comparedPeriod = Period.between(localDate, localDateToday);\n\n    ZonedDateTime zdt1 = ZonedDateTime.ofInstant(instantThen, ZoneId.systemDefault());\n    ZonedDateTime zdt2 = ZonedDateTime.ofInstant(instantNow, ZoneId.systemDefault());\n    Calendar calendarFetched = GregorianCalendar.from(zdt1);\n    Calendar calendarNow = GregorianCalendar.from(zdt2);\n\n    Instant d1i = Instant.ofEpochMilli(calendarFetched.getTimeInMillis());\n    Instant d2i = Instant.ofEpochMilli(calendarNow.getTimeInMillis());\n\n    LocalDateTime startDateWeek = LocalDateTime.ofInstant(d1i, ZoneId.systemDefault());\n    LocalDateTime endDateWeek = LocalDateTime.ofInstant(d2i, ZoneId.systemDefault());\n\n    long weeksCalc = ChronoUnit.WEEKS.between(startDateWeek, endDateWeek);\n\n\n    String s = &quot;&quot;;\n    if(comparedPeriod.getYears() &gt; 0) {\n        s += comparedPeriod.getYears() + &quot; year&quot; + ((comparedPeriod.getYears() == 1) ? &quot; &quot; : &quot;s &quot;);\n    }\n\n    if(weeksCalc &gt; 4){\n        s += comparedPeriod.getMonths() + &quot; month&quot; + ((comparedPeriod.getMonths() == 1) ? &quot; &quot; : &quot;s &quot;);\n\n    }\n    else{\n        s += weeksCalc + &quot; weeks &quot;;\n\n    }\n\n    if (comparedPeriod.getDays() &gt; 0){\n        s += comparedPeriod.getDays() + &quot; day&quot; + ((comparedPeriod.getDays() == 1) ? &quot; &quot; : &quot;s &quot;);\n    }\n\n    if (comparedDuration.toHoursPart() &gt; 0) {\n        s += comparedDuration.toHoursPart() + &quot; hour&quot; + ((comparedDuration.toHoursPart() == 1) ? &quot; &quot; : &quot;s &quot;);\n    }\n    else{\n        if(comparedDuration.toMinutesPart() &gt; 0){\n            s += comparedDuration.toMinutesPart() + &quot; minute&quot; + ((comparedDuration.toMinutesPart() == 1) ? &quot; &quot; : &quot;s &quot;);\n        }\n\n        else s += comparedDuration.toSecondsPart() + &quot; seconds &quot;; // lol lets just end it here...\n    }\n\n    return s + &quot;ago&quot;;\n}\n</code></pre>\n<p>The goal is to display &quot;time ago&quot; based off from given <code>OffsetDateTime</code> argument. This is to show the year, month, weeks, days, hours, minutes, all the way down to seconds, if said time units were not at <code>0</code>. But I am having trouble calculating the month as the result always come back as <code>0</code>, while having an &quot;s&quot; indicating that it is not truly <code>0</code>.</p>\n<p>For example, running <code>System.out.println(Utils.getTimeAgo(OffsetDateTime.parse(&quot;2020-12-13T15:54:43.971273200-05:00&quot;)))</code> displays <code>1 year 0 months 1 hour ago</code> as its output...</p>\n"},{"tags":["java","swing","intellij-idea","jframe"],"comments":[{"owner":{"account_id":11914502,"reputation":2439,"user_id":8718773,"display_name":"Giacomo Alzetta"},"score":0,"creation_date":1580125691,"post_id":59930478,"comment_id":105982954,"body_markdown":"You cannot run a jar without a Java Runtime... if you want to create a standalone executable you&#39;ll have to include the whole Java Runtime inside your jar in some way","body":"You cannot run a jar without a Java Runtime... if you want to create a standalone executable you&#39;ll have to include the whole Java Runtime inside your jar in some way"},{"owner":{"account_id":1051387,"reputation":14943,"user_id":1055241,"accept_rate":86,"display_name":"gprathour"},"score":0,"creation_date":1580125794,"post_id":59930478,"comment_id":105983007,"body_markdown":"JDK is requried for development purpose. But if someone just wants to run jar then they only need to install JRE. Not whole JDK.","body":"JDK is requried for development purpose. But if someone just wants to run jar then they only need to install JRE. Not whole JDK."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1580126590,"post_id":59930478,"comment_id":105983426,"body_markdown":"Are you sure there&#39;s no JRE/JDK? I find it strange you could get an error message saying &quot;A JNI error has occurred&quot; if there weren&#39;t some Java Runtime present. Try running the code from the command line to see if you get a more helpful error message.","body":"Are you sure there&#39;s no JRE/JDK? I find it strange you could get an error message saying &quot;A JNI error has occurred&quot; if there weren&#39;t some Java Runtime present. Try running the code from the command line to see if you get a more helpful error message."},{"owner":{"account_id":16867766,"reputation":11,"user_id":12197066,"display_name":"Yess"},"score":0,"creation_date":1580127627,"post_id":59930478,"comment_id":105983968,"body_markdown":"There is an jre, the problem is when I give others my programm with the jre as an executable, they get the error: &quot;A jni error has occurred please check your installation and try again&quot;. I get the same error when I move my JDK out of my java folder and then run the exe. @Slaw","body":"There is an jre, the problem is when I give others my programm with the jre as an executable, they get the error: &quot;A jni error has occurred please check your installation and try again&quot;. I get the same error when I move my JDK out of my java folder and then run the exe. @Slaw"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1580127918,"post_id":59930478,"comment_id":105984128,"body_markdown":"Considering I believe JNI stands for &quot;Java Native Interface&quot; I still find it strange a _missing_ JRE/JDK could be the problem. In my experience, that error usually means the main class could not be found, the main class wasn&#39;t specified, the wrong Java version is being used, or the application otherwise failed to start (e.g. a `ClassNotFoundException`)—but the JRE/JDK was found. What error do you get when launching from the terminal? Also, you mention &quot;run [your] jar&quot; but then you also mention &quot;bundle [your] exe with JRE&quot;. Where is this EXE coming from? How did you create it? A [mre] may help.","body":"Considering I believe JNI stands for &quot;Java Native Interface&quot; I still find it strange a <i>missing</i> JRE/JDK could be the problem. In my experience, that error usually means the main class could not be found, the main class wasn&#39;t specified, the wrong Java version is being used, or the application otherwise failed to start (e.g. a <code>ClassNotFoundException</code>)—but the JRE/JDK was found. What error do you get when launching from the terminal? Also, you mention &quot;run [your] jar&quot; but then you also mention &quot;bundle [your] exe with JRE&quot;. Where is this EXE coming from? How did you create it? A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> may help."},{"owner":{"account_id":16867766,"reputation":11,"user_id":12197066,"display_name":"Yess"},"score":0,"creation_date":1580128673,"post_id":59930478,"comment_id":105984507,"body_markdown":"@Slaw Gave an example so you can reproduce the error.","body":"@Slaw Gave an example so you can reproduce the error."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1580194613,"post_id":59930478,"comment_id":106007365,"body_markdown":"Does this answer your question? [A JNI error has occurred, please check your installation and try again in Eclipse x86 Windows 8.1](https://stackoverflow.com/questions/22381202/a-jni-error-has-occurred-please-check-your-installation-and-try-again-in-eclips)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/22381202/a-jni-error-has-occurred-please-check-your-installation-and-try-again-in-eclips\">A JNI error has occurred, please check your installation and try again in Eclipse x86 Windows 8.1</a>"}],"owner":{"account_id":16867766,"reputation":11,"user_id":12197066,"display_name":"Yess"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639435542,"creation_date":1580125371,"question_id":59930478,"body_markdown":"I created a little JFrame program which works fine in IDEA and on my PC in general, the problem is when someone without JDK tries to run my program they get the error:\r\n\r\n&gt;&quot;A jni error has occurred please check your installation and try again&quot;.\r\n\r\nI was able to recreate the error by simply moving my JDK to my desktop or somewhere else, but for some reason even reproducing it on my PC does not work.\r\n\r\nI am using a normal project in created in IDEA.\r\n\r\nI also googled for solutions but wasn&#39;t able to find anything that fixes my problem.\r\n\r\nEDIT: I already tried to bundle my exe with JRE but it did not work.\r\n\r\nEDIT 2: To reproduce this error I wrote this small code:\r\n\r\n```\r\nimport javax.swing.*;\r\nimport java.net.URISyntaxException;\r\n\r\npublic class HelloWorld {\r\n    public static void main(String[] args){\r\n        JFrame testframe= new JFrame(&quot;test&quot;);\r\n        testframe.setSize(100, 100);\r\n        testframe.setVisible(true);\r\n    }\r\n}\r\n```\r\n\r\nAfter creating a JAR file I used Launch4j to create an executable file. Also made it so it has jre coming with it. If I now send someone else my exe file or move my JDK to my desktop it gives me the previously mentioned error. If someone installs JDK it works fine for him too.","title":"When I run my jar without JDK I get an error","body":"<p>I created a little JFrame program which works fine in IDEA and on my PC in general, the problem is when someone without JDK tries to run my program they get the error:</p>\n<blockquote>\n<p>&quot;A jni error has occurred please check your installation and try again&quot;.</p>\n</blockquote>\n<p>I was able to recreate the error by simply moving my JDK to my desktop or somewhere else, but for some reason even reproducing it on my PC does not work.</p>\n<p>I am using a normal project in created in IDEA.</p>\n<p>I also googled for solutions but wasn't able to find anything that fixes my problem.</p>\n<p>EDIT: I already tried to bundle my exe with JRE but it did not work.</p>\n<p>EDIT 2: To reproduce this error I wrote this small code:</p>\n<pre><code>import javax.swing.*;\nimport java.net.URISyntaxException;\n\npublic class HelloWorld {\n    public static void main(String[] args){\n        JFrame testframe= new JFrame(&quot;test&quot;);\n        testframe.setSize(100, 100);\n        testframe.setVisible(true);\n    }\n}\n</code></pre>\n<p>After creating a JAR file I used Launch4j to create an executable file. Also made it so it has jre coming with it. If I now send someone else my exe file or move my JDK to my desktop it gives me the previously mentioned error. If someone installs JDK it works fine for him too.</p>\n"},{"tags":["java","android","stripe-payments"],"answers":[{"tags":[],"owner":{"account_id":3414988,"reputation":2417,"user_id":2864160,"accept_rate":92,"display_name":"RyanM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639435266,"creation_date":1639435266,"answer_id":70341780,"question_id":70322508,"body_markdown":"Stripe has revised the docs regarding Android development to use the newer launcher methods.  This appears to be a large enough change that it’s not as simple as changing one function call for another.  Take a look at the new docs here:\r\n\r\n\r\nhttps://stripe.com/docs/payments/save-and-reuse?platform=android&amp;ui=payment-sheet#android-collect-payment-details\r\n\r\n\r\nThe change to the SDK is pretty significant.  In order to dig into the changes try reviewing the this PR.\r\n\r\n\r\nhttps://github.com/stripe/stripe-android/commit/8b77ca2487a01f786cf845e5f644b98460036708\r\n\r\n\r\nWhen I look at the StripeIntentActivity.kt I can see on line 160 they revised the `stripe.confirmSetupIntent` to use `paymentLauncher.confirm` instead.  I think the code changes there might help you figure out how to reconfigure your Fragment.","title":"How to confirm setup intent for stripe in a Fragment?","body":"<p>Stripe has revised the docs regarding Android development to use the newer launcher methods.  This appears to be a large enough change that it’s not as simple as changing one function call for another.  Take a look at the new docs here:</p>\n<p><a href=\"https://stripe.com/docs/payments/save-and-reuse?platform=android&amp;ui=payment-sheet#android-collect-payment-details\" rel=\"nofollow noreferrer\">https://stripe.com/docs/payments/save-and-reuse?platform=android&amp;ui=payment-sheet#android-collect-payment-details</a></p>\n<p>The change to the SDK is pretty significant.  In order to dig into the changes try reviewing the this PR.</p>\n<p><a href=\"https://github.com/stripe/stripe-android/commit/8b77ca2487a01f786cf845e5f644b98460036708\" rel=\"nofollow noreferrer\">https://github.com/stripe/stripe-android/commit/8b77ca2487a01f786cf845e5f644b98460036708</a></p>\n<p>When I look at the StripeIntentActivity.kt I can see on line 160 they revised the <code>stripe.confirmSetupIntent</code> to use <code>paymentLauncher.confirm</code> instead.  I think the code changes there might help you figure out how to reconfigure your Fragment.</p>\n"}],"owner":{"account_id":18508567,"reputation":90,"user_id":13484340,"display_name":"The Tissot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":981,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639435266,"creation_date":1639303170,"question_id":70322508,"body_markdown":"how can i confirm a setup intent for stripe in a Fragment now that onActivityResult has been deprecated and replaced with activity result launcher? How do you pass that to stripe? Where do i need to add stripe.onSetupResult?\r\n\r\n \r\n\r\n    ConfirmSetupIntentParams confirmParams = ConfirmSetupIntentParams\r\n                                    .create(paymentMethodParams, clientSecret);\r\n    stripe.confirmSetupIntent(this, confirmParams);","title":"How to confirm setup intent for stripe in a Fragment?","body":"<p>how can i confirm a setup intent for stripe in a Fragment now that onActivityResult has been deprecated and replaced with activity result launcher? How do you pass that to stripe? Where do i need to add stripe.onSetupResult?</p>\n<pre><code>ConfirmSetupIntentParams confirmParams = ConfirmSetupIntentParams\n                                .create(paymentMethodParams, clientSecret);\nstripe.confirmSetupIntent(this, confirmParams);\n</code></pre>\n"},{"tags":["java","maven","tomcat","postman"],"comments":[{"owner":{"account_id":182885,"reputation":121,"user_id":417905,"display_name":"Matt Vickery"},"score":0,"creation_date":1639386923,"post_id":70332050,"comment_id":124326494,"body_markdown":"Some ideas to try are: a) do you have a firewall or virus scanning software running that is interfering with requests, b) is the service actually running and available to service requests (OS utilities), c) is your service actually running on that port.","body":"Some ideas to try are: a) do you have a firewall or virus scanning software running that is interfering with requests, b) is the service actually running and available to service requests (OS utilities), c) is your service actually running on that port."},{"owner":{"account_id":182885,"reputation":121,"user_id":417905,"display_name":"Matt Vickery"},"score":0,"creation_date":1639387129,"post_id":70332050,"comment_id":124326550,"body_markdown":"As for debugging, there are tools available that will help you trace the calls. Some of them require some commitment to learn, some of them are easier to learn as they are OS specific utilities.","body":"As for debugging, there are tools available that will help you trace the calls. Some of them require some commitment to learn, some of them are easier to learn as they are OS specific utilities."},{"owner":{"account_id":23441381,"reputation":61,"user_id":17498840,"display_name":"knickedom"},"score":1,"creation_date":1639387387,"post_id":70332050,"comment_id":124326636,"body_markdown":"@MattVickery thanks a lot for the quick response! :) I work with MacOS, do you have some recommendations? Googeling &quot;trace calls api&quot; doesnt gets me that far... ;)","body":"@MattVickery thanks a lot for the quick response! :) I work with MacOS, do you have some recommendations? Googeling &quot;trace calls api&quot; doesnt gets me that far... ;)"},{"owner":{"account_id":182885,"reputation":121,"user_id":417905,"display_name":"Matt Vickery"},"score":0,"creation_date":1639412237,"post_id":70332050,"comment_id":124336155,"body_markdown":"I&#39;m sorry the follow-up was not as quick! Try some of the techniques listed here: https://www.lifewire.com/using-netstat-command-on-mac-4176069 Wireshark is also really well worth looking at but you will need to create some filters to reduce the output to look at.","body":"I&#39;m sorry the follow-up was not as quick! Try some of the techniques listed here: <a href=\"https://www.lifewire.com/using-netstat-command-on-mac-4176069\" rel=\"nofollow noreferrer\">lifewire.com/using-netstat-command-on-mac-4176069</a> Wireshark is also really well worth looking at but you will need to create some filters to reduce the output to look at."}],"answers":[{"tags":[],"owner":{"account_id":23441381,"reputation":61,"user_id":17498840,"display_name":"knickedom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639434912,"creation_date":1639434912,"answer_id":70341736,"question_id":70332050,"body_markdown":"I found the solution by:\r\n1. checking which ports are open and listened by using \r\n`netstat -a -n -p tcp | grep 127.0.0.1*`\r\nin the terminal\r\n2. understanding in which folder the REST service listens by checking the actual java program\r\n\r\nThanks to @MattVickery for your kind help, I really appreciated it!","title":"Postman cannot reach local Jersey REST service","body":"<p>I found the solution by:</p>\n<ol>\n<li>checking which ports are open and listened by using\n<code>netstat -a -n -p tcp | grep 127.0.0.1*</code>\nin the terminal</li>\n<li>understanding in which folder the REST service listens by checking the actual java program</li>\n</ol>\n<p>Thanks to @MattVickery for your kind help, I really appreciated it!</p>\n"}],"owner":{"account_id":23441381,"reputation":61,"user_id":17498840,"display_name":"knickedom"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1639434912,"creation_date":1639385875,"question_id":70332050,"body_markdown":"While working through a programming book, I implemented a local REST service running in Tomact on port 8081 in the folder webapi (http://localhost:8081/lwchapter1/webapi/user/login). When running a request in Postman I get an error:\r\n\r\n    Could not send request\r\n    Error: connect ECONNREFUSED 127.0.0.1:8081\r\n\r\nI dont understand, how to debug this and therefore kindly ask for help!\r\n\r\nThe service is implemented (as far as I understand) like this:\r\n\r\n - Postman to test the API \r\n - Tomcat to provide the service\r\n - compiled War File\r\n - maven as a build tool \r\n - java class listening for POST requests in a specific folder\r\n\r\nThe java project compiles, undeploy/ deploy works and the war file is in the tomcat folder, tomcat is running.\r\n\r\nEdit: I found a developer console in Postman giving additional information. Unfortunately this doesn&#39;t help either since there is no parameter in the request:\r\n\r\n    Could not find on r. Missing or invalid parameter.\r\n    No revision id found for response","title":"Postman cannot reach local Jersey REST service","body":"<p>While working through a programming book, I implemented a local REST service running in Tomact on port 8081 in the folder webapi (http://localhost:8081/lwchapter1/webapi/user/login). When running a request in Postman I get an error:</p>\n<pre><code>Could not send request\nError: connect ECONNREFUSED 127.0.0.1:8081\n</code></pre>\n<p>I dont understand, how to debug this and therefore kindly ask for help!</p>\n<p>The service is implemented (as far as I understand) like this:</p>\n<ul>\n<li>Postman to test the API</li>\n<li>Tomcat to provide the service</li>\n<li>compiled War File</li>\n<li>maven as a build tool</li>\n<li>java class listening for POST requests in a specific folder</li>\n</ul>\n<p>The java project compiles, undeploy/ deploy works and the war file is in the tomcat folder, tomcat is running.</p>\n<p>Edit: I found a developer console in Postman giving additional information. Unfortunately this doesn't help either since there is no parameter in the request:</p>\n<pre><code>Could not find on r. Missing or invalid parameter.\nNo revision id found for response\n</code></pre>\n"},{"tags":["java","spring-boot","log4j","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1639402820,"post_id":70335404,"comment_id":124332114,"body_markdown":"No, it is a provided dependency means it doesn&#39;t take that version. So unless you are actually including that version (or anything other than 2.15) you are vulnerable.","body":"No, it is a provided dependency means it doesn&#39;t take that version. So unless you are actually including that version (or anything other than 2.15) you are vulnerable."},{"owner":{"account_id":2459367,"reputation":1439,"user_id":2143846,"accept_rate":77,"display_name":"Yuval Simhon"},"score":0,"creation_date":1639402963,"post_id":70335404,"comment_id":124332159,"body_markdown":"@M.Deinum - If It&#39;s not provided, will it fail in runtime?","body":"@M.Deinum - If It&#39;s not provided, will it fail in runtime?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1639403544,"post_id":70335404,"comment_id":124332410,"body_markdown":"No. If it works now it works then. A `provided` dependency isn&#39;t part of the deployment (only compile and runtime). So again if this isn&#39;t in your deployable (your jar or war) it isn&#39;t an issue.","body":"No. If it works now it works then. A <code>provided</code> dependency isn&#39;t part of the deployment (only compile and runtime). So again if this isn&#39;t in your deployable (your jar or war) it isn&#39;t an issue."},{"owner":{"account_id":12518226,"reputation":71,"user_id":9110580,"display_name":"sadxd"},"score":0,"creation_date":1639568327,"post_id":70335404,"comment_id":124380354,"body_markdown":"@M.Deinum So what if I&#39;m using spring logback with sleuth that has vulnerable log4j in provided scope, does it mean I have nothing to be scared of?","body":"@M.Deinum So what if I&#39;m using spring logback with sleuth that has vulnerable log4j in provided scope, does it mean I have nothing to be scared of?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1639570109,"post_id":70335404,"comment_id":124381073,"body_markdown":"No as that is only the API not log4j-core which has the vulnerabiltiy. Which is also explained in detail here https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot","body":"No as that is only the API not log4j-core which has the vulnerabiltiy. Which is also explained in detail here <a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" rel=\"nofollow noreferrer\">spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-bo&zwnj;&#8203;ot</a>"}],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639434742,"creation_date":1639434742,"answer_id":70341716,"question_id":70335404,"body_markdown":"Spring Cloud Sleuth 2.x is not supported anymore and as M. Deinum mentioned Sleuth will not bring these dependencies for you because of the `provided` scope. You can test this by running `gradlew dependencies` or `mvn dependency:tree`.","title":"log4j vulnerability - Sleuth dependency","body":"<p>Spring Cloud Sleuth 2.x is not supported anymore and as M. Deinum mentioned Sleuth will not bring these dependencies for you because of the <code>provided</code> scope. You can test this by running <code>gradlew dependencies</code> or <code>mvn dependency:tree</code>.</p>\n"}],"owner":{"account_id":2459367,"reputation":1439,"user_id":2143846,"accept_rate":77,"display_name":"Yuval Simhon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1215,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1639434742,"creation_date":1639401968,"question_id":70335404,"body_markdown":"We heard that `log4j-core.jar` is vulnerable. &lt;br&gt;\r\nWe noticed that `spring-cloud-starter-sleuth` (version 2.2.2.RELEASE) dependency brings a dependency which uses `log4j-core.jar` (version 2.13.0) with `provided` scope as followed:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe exact jar that brings the log4j dependency is:\r\n\r\n    &lt;groupId&gt;io.zipkin.brave&lt;/groupId&gt;\r\n    &lt;artifactId&gt;brave-context-log4j2&lt;/artifactId&gt;\r\n    &lt;version&gt;5.10.1&lt;/version&gt;\r\n\r\nWe are not using Zipkin in our code or configurations, just Sleuth.&lt;br&gt;\r\nIs our code vulnerable?","title":"log4j vulnerability - Sleuth dependency","body":"<p>We heard that <code>log4j-core.jar</code> is vulnerable. <br>\nWe noticed that <code>spring-cloud-starter-sleuth</code> (version 2.2.2.RELEASE) dependency brings a dependency which uses <code>log4j-core.jar</code> (version 2.13.0) with <code>provided</code> scope as followed:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n  &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n  &lt;version&gt;${log4j.version}&lt;/version&gt;\n  &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The exact jar that brings the log4j dependency is:</p>\n<pre><code>&lt;groupId&gt;io.zipkin.brave&lt;/groupId&gt;\n&lt;artifactId&gt;brave-context-log4j2&lt;/artifactId&gt;\n&lt;version&gt;5.10.1&lt;/version&gt;\n</code></pre>\n<p>We are not using Zipkin in our code or configurations, just Sleuth.<br>\nIs our code vulnerable?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1639286963,"post_id":70305724,"comment_id":124307854,"body_markdown":"The bean creates a topic from spring config, it shouldn&#39;t take a dynamic string parameter.","body":"The bean creates a topic from spring config, it shouldn&#39;t take a dynamic string parameter."},{"owner":{"account_id":19157508,"reputation":387,"user_id":13994040,"display_name":"Enes Uğuroğlu"},"score":0,"creation_date":1639305283,"post_id":70305724,"comment_id":124310464,"body_markdown":"I understand, any workaround for this kind of goal? @OneCricketeer","body":"I understand, any workaround for this kind of goal? @OneCricketeer"},{"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1639407421,"post_id":70305724,"comment_id":124334109,"body_markdown":"You can use a rebalance listener (or `ConsumerSeekAware`) - then use an `AdminClient` to check if the DLT exists and, if not, create it.","body":"You can use a rebalance listener (or <code>ConsumerSeekAware</code>) - then use an <code>AdminClient</code> to check if the DLT exists and, if not, create it."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639407380,"creation_date":1639407380,"answer_id":70336619,"question_id":70305724,"body_markdown":"Add a rebalance listener, or extend `AbstractConsumerSeekAware` (or just implement `ConsumerSeekAware`).\r\n\r\n`public class LibraryEventsConsumer extends AbstractConsumerSeekAware {`\r\n\r\nThen, in `onPartitionsAssigned()` use an `AdminClient` to check if the DLT topic exists and, if not, create it.","title":"How to AutoCreate Kafka Topic according to incoming topic pattern through kafkalistener service in springboot Kafka?","body":"<p>Add a rebalance listener, or extend <code>AbstractConsumerSeekAware</code> (or just implement <code>ConsumerSeekAware</code>).</p>\n<p><code>public class LibraryEventsConsumer extends AbstractConsumerSeekAware {</code></p>\n<p>Then, in <code>onPartitionsAssigned()</code> use an <code>AdminClient</code> to check if the DLT topic exists and, if not, create it.</p>\n"}],"owner":{"account_id":19157508,"reputation":387,"user_id":13994040,"display_name":"Enes Uğuroğlu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70336619,"answer_count":1,"score":0,"last_activity_date":1639434586,"creation_date":1639145194,"question_id":70305724,"body_markdown":"I will subscribe to kafka topic pattern such as &quot;topic.*&quot; My goal here to create deadletter queue for each kafka topic I listen.\r\n\r\nFor example when I listen topic named &quot;topic.1&quot; I would like to autocreate deadletter queue named &quot;topic.1_deadletter&quot; automaticly.\r\n\r\nWhat I tried to do so far is like below:\r\n\r\nMy consumer:\r\n\r\n    \r\n    @Component\r\n    @Slf4j\r\n    public class LibraryEventsConsumer {\r\n    \r\n        @Autowired\r\n        LibraryEventConsumerConfig libraryEventConsumerConfig;\r\n    \r\n        @KafkaListener(topicPattern = &quot;kafka.*&quot;)\r\n        public void onMessage(String consumerRecord, @Header(KafkaHeaders.RECEIVED_TOPIC) String topic) throws Exception{\r\n    \r\n            log.info(&quot;ConsumerRecord : {}&quot;, consumerRecord);\r\n    \r\n            String deadlettertopic = String.format(&quot;%s_deadletter&quot;,topic);\r\n            System.out.println(deadlettertopic);\r\n            System.out.println(KafkaHeaders.RECEIVED_TOPIC);\r\n    \r\n            libraryEventConsumerConfig.getTopic(topic);`\r\n\r\nHere with the method getTopic I am trying to autocreate kafka topic. And below you can see libraryEventConsumer class:\r\n\r\n    @Configuration\r\n    @EnableKafka\r\n    public class LibraryEventConsumerConfig {\r\n    \r\n        @Bean\r\n        public void getTopic(String topic){\r\n            NewTopic deadlettertopic = TopicBuilder.name(String.format(&quot;%s_deadletter&quot;,topic))\r\n                    .partitions(1)\r\n                    .replicas(1)\r\n                    .build();\r\n        }\r\n    }\r\n\r\nUnfortunately that approach did not work and I got below error message:\r\n\r\n    Parameter 0 of method getTopic in com.kafkalibrary.Config.LibraryEventConsumerConfig required a bean of type &#39;java.lang.String&#39; that could not be found.\r\n\r\nAny idea how to proceed on that?\r\n\r\n**Solution Example Code:**\r\n\r\nFor those who are looking for same goal, here is my example code: Thanks to Gary Russell for inspiration.\r\n\r\n       private static void createTopic(String topicName, int numPartitions) throws Exception {\r\n        Properties config = new Properties();\r\n        config.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:5052,localhost:5053,localhost:5054&quot;);\r\n        AdminClient admin = AdminClient.create(config);\r\n\r\n        //checking if topic already exists\r\n        boolean alreadyExists = admin.listTopics().names().get().stream()\r\n                .anyMatch(existingTopicName -&gt; existingTopicName.equals(topicName));\r\n        if (alreadyExists) {\r\n            System.out.printf(&quot;topic already exits: %s%n&quot;, topicName);\r\n        } else {\r\n            //creating new topic\r\n            System.out.printf(&quot;creating topic: %s%n&quot;, topicName);\r\n            NewTopic newTopic = new NewTopic(topicName, numPartitions, (short) 1);\r\n            admin.createTopics(Collections.singleton(newTopic)).all().get();\r\n        }\r\n","title":"How to AutoCreate Kafka Topic according to incoming topic pattern through kafkalistener service in springboot Kafka?","body":"<p>I will subscribe to kafka topic pattern such as &quot;topic.*&quot; My goal here to create deadletter queue for each kafka topic I listen.</p>\n<p>For example when I listen topic named &quot;topic.1&quot; I would like to autocreate deadletter queue named &quot;topic.1_deadletter&quot; automaticly.</p>\n<p>What I tried to do so far is like below:</p>\n<p>My consumer:</p>\n<pre><code>@Component\n@Slf4j\npublic class LibraryEventsConsumer {\n\n    @Autowired\n    LibraryEventConsumerConfig libraryEventConsumerConfig;\n\n    @KafkaListener(topicPattern = &quot;kafka.*&quot;)\n    public void onMessage(String consumerRecord, @Header(KafkaHeaders.RECEIVED_TOPIC) String topic) throws Exception{\n\n        log.info(&quot;ConsumerRecord : {}&quot;, consumerRecord);\n\n        String deadlettertopic = String.format(&quot;%s_deadletter&quot;,topic);\n        System.out.println(deadlettertopic);\n        System.out.println(KafkaHeaders.RECEIVED_TOPIC);\n\n        libraryEventConsumerConfig.getTopic(topic);`\n</code></pre>\n<p>Here with the method getTopic I am trying to autocreate kafka topic. And below you can see libraryEventConsumer class:</p>\n<pre><code>@Configuration\n@EnableKafka\npublic class LibraryEventConsumerConfig {\n\n    @Bean\n    public void getTopic(String topic){\n        NewTopic deadlettertopic = TopicBuilder.name(String.format(&quot;%s_deadletter&quot;,topic))\n                .partitions(1)\n                .replicas(1)\n                .build();\n    }\n}\n</code></pre>\n<p>Unfortunately that approach did not work and I got below error message:</p>\n<pre><code>Parameter 0 of method getTopic in com.kafkalibrary.Config.LibraryEventConsumerConfig required a bean of type 'java.lang.String' that could not be found.\n</code></pre>\n<p>Any idea how to proceed on that?</p>\n<p><strong>Solution Example Code:</strong></p>\n<p>For those who are looking for same goal, here is my example code: Thanks to Gary Russell for inspiration.</p>\n<pre><code>   private static void createTopic(String topicName, int numPartitions) throws Exception {\n    Properties config = new Properties();\n    config.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:5052,localhost:5053,localhost:5054&quot;);\n    AdminClient admin = AdminClient.create(config);\n\n    //checking if topic already exists\n    boolean alreadyExists = admin.listTopics().names().get().stream()\n            .anyMatch(existingTopicName -&gt; existingTopicName.equals(topicName));\n    if (alreadyExists) {\n        System.out.printf(&quot;topic already exits: %s%n&quot;, topicName);\n    } else {\n        //creating new topic\n        System.out.printf(&quot;creating topic: %s%n&quot;, topicName);\n        NewTopic newTopic = new NewTopic(topicName, numPartitions, (short) 1);\n        admin.createTopics(Collections.singleton(newTopic)).all().get();\n    }\n</code></pre>\n"},{"tags":["java","sql"],"comments":[{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":0,"creation_date":1263335539,"post_id":2052745,"comment_id":1980286,"body_markdown":"This could help as well: http://stackoverflow.com/questions/878848/easy-way-to-fill-up-resultset-with-data","body":"This could help as well: <a href=\"http://stackoverflow.com/questions/878848/easy-way-to-fill-up-resultset-with-data\" title=\"easy way to fill up resultset with data\">stackoverflow.com/questions/878848/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":38612,"reputation":22579,"user_id":110933,"accept_rate":96,"display_name":"davek"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1263333806,"creation_date":1263333806,"answer_id":2052796,"question_id":2052745,"body_markdown":"You could take a look at the CachedRowSet interface:\r\n\r\n[http://java.sun.com/j2se/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html][1]\r\n\r\nwhich allows you work in disconnected mode.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>You could take a look at the CachedRowSet interface:</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html</a></p>\n\n<p>which allows you work in disconnected mode.</p>\n"},{"tags":[],"owner":{"account_id":66021,"reputation":5896,"user_id":193939,"accept_rate":92,"display_name":"Nathan Wheeler"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1263333835,"creation_date":1263333835,"answer_id":2052798,"question_id":2052745,"body_markdown":"I don&#39;t normally answer java questions, as I&#39;m not a java developer, but this seems like an architectural flaw if you need to create a sql object from code to pass into a method in order to recycle a method. I would think you would want to make your receiving method accept some other more specific form of input (such as a custom defined object array) to make it reusable, and then parse your ResultData into that format. ","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>I don't normally answer java questions, as I'm not a java developer, but this seems like an architectural flaw if you need to create a sql object from code to pass into a method in order to recycle a method. I would think you would want to make your receiving method accept some other more specific form of input (such as a custom defined object array) to make it reusable, and then parse your ResultData into that format. </p>\n"},{"tags":[],"owner":{"account_id":13361,"reputation":5213,"user_id":26787,"accept_rate":50,"display_name":"alex"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1263334237,"creation_date":1263333871,"answer_id":2052802,"question_id":2052745,"body_markdown":"My first option would be to refactor the code so that it takes List&amp;lt;Map&amp;lt;String,Object&amp;gt;&amp;gt; or something appropriate (that is, List&amp;lt;Map&amp;lt;String,Object&amp;gt;&amp;gt; if the data being moved around has no real structure or fully-typed objects if it does have structure).\r\n\r\nIf that&#39;s not feasible or time efficient, the &quot;fun&quot; hack is to query an in-memory H2 database to get a ResultSet. If you don&#39;t find a reasonable stub for ResultSet you can easily instantiate, it might be quicker than rolling your own (pull the jar in, write 20 lines of code for creating the db and populating a table).\r\n","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>My first option would be to refactor the code so that it takes List&lt;Map&lt;String,Object&gt;&gt; or something appropriate (that is, List&lt;Map&lt;String,Object&gt;&gt; if the data being moved around has no real structure or fully-typed objects if it does have structure).</p>\n\n<p>If that's not feasible or time efficient, the \"fun\" hack is to query an in-memory H2 database to get a ResultSet. If you don't find a reasonable stub for ResultSet you can easily instantiate, it might be quicker than rolling your own (pull the jar in, write 20 lines of code for creating the db and populating a table).</p>\n"},{"tags":[],"owner":{"account_id":87304,"reputation":1857,"user_id":242182,"accept_rate":75,"display_name":"rayd09"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1263334148,"creation_date":1263334148,"answer_id":2052830,"question_id":2052745,"body_markdown":"java.sql.ResultSet is an interface, so you could create your own class that implements that interface.","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>java.sql.ResultSet is an interface, so you could create your own class that implements that interface.</p>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1263334941,"creation_date":1263334941,"answer_id":2052896,"question_id":2052745,"body_markdown":"This is a slightly left-field solution, but you could make use of a mocking framework (e.g. [JMock][1]). These frameworks are generally intended for creating mock implementations of interfaces for unit testing, but I see no reason why you could use one to create a &quot;partial implementation&quot; of `java.sql.ResultSet`.\r\n\r\nFor example, say you only wanted to implement the `getString()` method, and nothing else:\r\n\r\n    Mockery mockery = new Mockery();\r\n    final ResultSet resultSet = mockery.mock(ResultSet.class);\r\n\t\t\r\n    mockery.checking(new Expectations() {{\r\n        allowing(resultSet).getString(1); will(returnValue(&quot;my first string&quot;));\r\n        allowing(resultSet).getString(2); will(returnValue(&quot;my second string&quot;));\r\n    }});\r\n\t\t\r\n    // resultSet is now a java.sql.ResultSet object, which you can pass to your legacy code\r\n    resultSet.getString(1);\r\n\r\nRather unorthodox, and quite cumbersome, but it should work\r\n\r\n  [1]: http://www.jmock.org/","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>This is a slightly left-field solution, but you could make use of a mocking framework (e.g. <a href=\"http://www.jmock.org/\" rel=\"noreferrer\">JMock</a>). These frameworks are generally intended for creating mock implementations of interfaces for unit testing, but I see no reason why you could use one to create a \"partial implementation\" of <code>java.sql.ResultSet</code>.</p>\n\n<p>For example, say you only wanted to implement the <code>getString()</code> method, and nothing else:</p>\n\n<pre><code>Mockery mockery = new Mockery();\nfinal ResultSet resultSet = mockery.mock(ResultSet.class);\n\nmockery.checking(new Expectations() {{\n    allowing(resultSet).getString(1); will(returnValue(\"my first string\"));\n    allowing(resultSet).getString(2); will(returnValue(\"my second string\"));\n}});\n\n// resultSet is now a java.sql.ResultSet object, which you can pass to your legacy code\nresultSet.getString(1);\n</code></pre>\n\n<p>Rather unorthodox, and quite cumbersome, but it should work</p>\n"},{"tags":[],"owner":{"account_id":71488,"reputation":3028,"user_id":206771,"accept_rate":64,"display_name":"Joel Shemtov"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1370374569,"creation_date":1263399079,"answer_id":2058219,"question_id":2052745,"body_markdown":" - Create your own &lt;code&gt;AbstractResultSet&lt;/code&gt; class, one that (like AbstractQueue) implements all methods by throwing UnsupportedOperationException (Eclipse autogenerates these methods in a split second).\r\n - Now extend &lt;code&gt;AbstractResultSet&lt;/code&gt;. The subclass can override only the methods you&#39;re interested in implementing.","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<ul>\n<li>Create your own <code>AbstractResultSet</code> class, one that (like AbstractQueue) implements all methods by throwing UnsupportedOperationException (Eclipse autogenerates these methods in a split second).</li>\n<li>Now extend <code>AbstractResultSet</code>. The subclass can override only the methods you're interested in implementing.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1604308504,"creation_date":1604308504,"answer_id":64642699,"question_id":2052745,"body_markdown":"jOOQ has a [`MockResultSet`][1] for that and similar purpose, which can be used out of the box, or copied into your project.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    DSLContext ctx = DSL.using(DEFAULT);\r\n    Field&lt;Integer&gt; col1 = DSL.field(&quot;COL1&quot;, SQLDataType.INTEGER);\r\n    Field&lt;String&gt; col2 = DSL.field(&quot;COL2&quot;, SQLDataType.VARCHAR(10));\r\n\r\n    Result&lt;?&gt; result = ctx.newResult(col1, col2);\r\n    result.add(ctx.newRecord(col1, col2).values(1, &quot;a&quot;));\r\n    result.add(ctx.newRecord(col1, col2).values(2, &quot;b&quot;));\r\n\r\n    try (ResultSet rs = new MockResultSet(result)) {\r\n        while (rs.next())\r\n            System.out.println(rs.getInt(1) + &quot;: &quot; + rs.getString(2));\r\n    }\r\n\r\nDisclaimer: I work for the company behind jOOQ.\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/tools/jdbc/MockResultSet.html","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>jOOQ has a <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/tools/jdbc/MockResultSet.html\" rel=\"nofollow noreferrer\"><code>MockResultSet</code></a> for that and similar purpose, which can be used out of the box, or copied into your project.</p>\n<pre class=\"lang-java prettyprint-override\"><code>DSLContext ctx = DSL.using(DEFAULT);\nField&lt;Integer&gt; col1 = DSL.field(&quot;COL1&quot;, SQLDataType.INTEGER);\nField&lt;String&gt; col2 = DSL.field(&quot;COL2&quot;, SQLDataType.VARCHAR(10));\n\nResult&lt;?&gt; result = ctx.newResult(col1, col2);\nresult.add(ctx.newRecord(col1, col2).values(1, &quot;a&quot;));\nresult.add(ctx.newRecord(col1, col2).values(2, &quot;b&quot;));\n\ntry (ResultSet rs = new MockResultSet(result)) {\n    while (rs.next())\n        System.out.println(rs.getInt(1) + &quot;: &quot; + rs.getString(2));\n}\n</code></pre>\n<p>Disclaimer: I work for the company behind jOOQ.</p>\n"},{"tags":[],"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639433993,"creation_date":1639433993,"answer_id":70341608,"question_id":2052745,"body_markdown":"If you need the **ResultSet** for **unit test** purposes, you could try this:\r\n\r\nhttps://gist.githubusercontent.com/jrichardsz/661913b8d52b6e820a1b37b972ffdb49/raw/4fc10e4624795b9671d43c5ac9169aa2ae532266/MockResultSet.java\r\n\r\nJust needs one dependency:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.10.19&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIt works like a charm:\r\n\r\n```\r\nResultSet mockResultSet = MockResultSet.create(\r\n\tnew String[] {&quot;name&quot;, &quot;lastname&quot;},\r\n\tnew String[][] {{&quot;jane&quot;, &quot;doe&quot;}, {&quot;kurt&quot;, &quot;weller&quot;}}\r\n);\r\n```","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>If you need the <strong>ResultSet</strong> for <strong>unit test</strong> purposes, you could try this:</p>\n<p><a href=\"https://gist.githubusercontent.com/jrichardsz/661913b8d52b6e820a1b37b972ffdb49/raw/4fc10e4624795b9671d43c5ac9169aa2ae532266/MockResultSet.java\" rel=\"nofollow noreferrer\">https://gist.githubusercontent.com/jrichardsz/661913b8d52b6e820a1b37b972ffdb49/raw/4fc10e4624795b9671d43c5ac9169aa2ae532266/MockResultSet.java</a></p>\n<p>Just needs one dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n    &lt;version&gt;1.10.19&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>It works like a charm:</p>\n<pre><code>ResultSet mockResultSet = MockResultSet.create(\n    new String[] {&quot;name&quot;, &quot;lastname&quot;},\n    new String[][] {{&quot;jane&quot;, &quot;doe&quot;}, {&quot;kurt&quot;, &quot;weller&quot;}}\n);\n</code></pre>\n"}],"owner":{"account_id":323,"reputation":25104,"user_id":404,"accept_rate":73,"display_name":"Chris Farmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47426,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":2058219,"answer_count":8,"score":33,"last_activity_date":1639433993,"creation_date":1263333429,"question_id":2052745,"body_markdown":"I have some existing code that accepts a `java.sql.ResultSet` that contains info retrieved from an Oracle database.  I would now like to reuse this code, but I&#39;d like to pass it a `ResultSet` object that I create myself from some in-memory data that is not affiliated with any database.  Is there an existing Java framework class that I can use for this?  `ResultSet` has tons of methods, so implementing my own class for this seemed like overkill, even though I could ignore most of the methods for my specific case.\r\n\r\nI was thinking of something along the lines of the old Microsoft ADO recordset object, where I could create the fields and then populate the row data for each field.  This seemed like an easily googlable question, but I&#39;ve been unable to find any good pointers.\r\n\r\n","title":"How to programmatically create a Java ResultSet from custom data with no database","body":"<p>I have some existing code that accepts a <code>java.sql.ResultSet</code> that contains info retrieved from an Oracle database.  I would now like to reuse this code, but I'd like to pass it a <code>ResultSet</code> object that I create myself from some in-memory data that is not affiliated with any database.  Is there an existing Java framework class that I can use for this?  <code>ResultSet</code> has tons of methods, so implementing my own class for this seemed like overkill, even though I could ignore most of the methods for my specific case.</p>\n\n<p>I was thinking of something along the lines of the old Microsoft ADO recordset object, where I could create the fields and then populate the row data for each field.  This seemed like an easily googlable question, but I've been unable to find any good pointers.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1639433469,"post_id":70341514,"comment_id":124343106,"body_markdown":"It&#39; doesn&#39;t &quot;run before&quot; the GUI, it&#39;s been executed within the same thread context used by the GUI, so you&#39;re blocking, what is known as, the Event Dispatching Thread, which is responsible for, among other things, scheduling repaints.  Instead, you need to devise a workflow which takes advantage of this, like using a Swing `Timer` to trigger a callback at some point in the future, or a `SwingWorker` to perform the long running actions in background thread","body":"It&#39; doesn&#39;t &quot;run before&quot; the GUI, it&#39;s been executed within the same thread context used by the GUI, so you&#39;re blocking, what is known as, the Event Dispatching Thread, which is responsible for, among other things, scheduling repaints.  Instead, you need to devise a workflow which takes advantage of this, like using a Swing <code>Timer</code> to trigger a callback at some point in the future, or a <code>SwingWorker</code> to perform the long running actions in background thread"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1639433500,"post_id":70341514,"comment_id":124343118,"body_markdown":"I recommend having a look at [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)","body":"I recommend having a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a>"},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1639437511,"post_id":70341514,"comment_id":124344099,"body_markdown":"&#39;setText&#39; in most GUIs does not mean &#39;paint the screen right now and make it visible before returning&#39;.","body":"&#39;setText&#39; in most GUIs does not mean &#39;paint the screen right now and make it visible before returning&#39;."}],"owner":{"account_id":23638570,"reputation":1,"user_id":17669192,"display_name":"신동빈"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639433854,"creation_date":1639433262,"question_id":70341514,"body_markdown":"First class:\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (this.getText().equals(&quot;?&quot;)) {\r\n            this.setText(board.getCard(coordinates[0], coordinates[1]).getFaceValue());\r\n            \r\n            if (!board.saveRowCol(coordinates[0], coordinates[1])) {             \t\r\n            \tframe.hideFirstCard();\r\n            \tthis.setText(&quot;?&quot;);\r\n            \t\r\n            } else if (board.secondCheck()){\r\n            \tboard.reset();\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n---\r\nSecond Class:\r\n\r\n    public boolean saveRowCol(int row, int col) {\r\n        boolean result;\r\n        if (first == null) {\r\n            first = new int[]{row, col};\r\n            return true;\r\n        } else {\r\n            second = new int[] {row, col};\r\n            result = compare(first, second);\r\n            return result;\r\n        }\r\n    }\r\n\r\n    public boolean compare(int[] fir, int[]sec) {\r\n        if (!board[fir[0]][fir[1]].getFaceValue().equals(board[sec[0]][sec[1]].getFaceValue())) {\r\n            try {\r\n            \tThread.sleep(500);\r\n            }catch(InterruptedException e){\r\n            \te.printStackTrace();\r\n            }\r\n            \r\n                       \r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\nShouldn&#39;t setText() be executed before thread.sleep() in order?\r\nWhy does Thread.Sleep(500) run before this.setText(board.getCard(coordinates[0], coordinates[1]).getFaceValue());?\r\nAnd how should I solve this problem?\r\n","title":"Why does Thread.Sleep() run before GUI?","body":"<p>First class:</p>\n<pre><code>public void actionPerformed(ActionEvent e) {\n    if (this.getText().equals(&quot;?&quot;)) {\n        this.setText(board.getCard(coordinates[0], coordinates[1]).getFaceValue());\n        \n        if (!board.saveRowCol(coordinates[0], coordinates[1])) {                \n            frame.hideFirstCard();\n            this.setText(&quot;?&quot;);\n            \n        } else if (board.secondCheck()){\n            board.reset();\n        }\n\n\n    }\n}\n</code></pre>\n<hr />\n<p>Second Class:</p>\n<pre><code>public boolean saveRowCol(int row, int col) {\n    boolean result;\n    if (first == null) {\n        first = new int[]{row, col};\n        return true;\n    } else {\n        second = new int[] {row, col};\n        result = compare(first, second);\n        return result;\n    }\n}\n\npublic boolean compare(int[] fir, int[]sec) {\n    if (!board[fir[0]][fir[1]].getFaceValue().equals(board[sec[0]][sec[1]].getFaceValue())) {\n        try {\n            Thread.sleep(500);\n        }catch(InterruptedException e){\n            e.printStackTrace();\n        }\n        \n                   \n        return false;\n    }\n    return true;\n}\n</code></pre>\n<p>Shouldn't setText() be executed before thread.sleep() in order?\nWhy does Thread.Sleep(500) run before this.setText(board.getCard(coordinates[0], coordinates[1]).getFaceValue());?\nAnd how should I solve this problem?</p>\n"},{"tags":["java","android","android-intent","android-camera","codec"],"answers":[{"tags":[],"owner":{"account_id":65347,"reputation":56309,"user_id":192373,"accept_rate":74,"display_name":"Alex Cohn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639432565,"creation_date":1639432565,"answer_id":70341413,"question_id":70340408,"body_markdown":"You cannot achieve this with `ACTION_VIDEO_CAPTURE` intent. You have to open the camera in your app and handle recording video by yourself. The [official example](https://github.com/android/camera-samples/tree/main/CameraXVideo) using CameraX library are a good starting point.\r\n\r\nTo control the codec, you need an extra step. You can borrow from [this answer](https://stackoverflow.com/a/63528509/192373), which enforces h264 – but you are free to choose `MediaCodec.createEncoderByType()` the way you like.","title":"Change camera recording codec programmatically in Android","body":"<p>You cannot achieve this with <code>ACTION_VIDEO_CAPTURE</code> intent. You have to open the camera in your app and handle recording video by yourself. The <a href=\"https://github.com/android/camera-samples/tree/main/CameraXVideo\" rel=\"nofollow noreferrer\">official example</a> using CameraX library are a good starting point.</p>\n<p>To control the codec, you need an extra step. You can borrow from <a href=\"https://stackoverflow.com/a/63528509/192373\">this answer</a>, which enforces h264 – but you are free to choose <code>MediaCodec.createEncoderByType()</code> the way you like.</p>\n"}],"owner":{"account_id":3868910,"reputation":4935,"user_id":3204706,"accept_rate":53,"display_name":"Tina J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639433743,"creation_date":1639426483,"question_id":70340408,"body_markdown":"I&#39;m using the following code to record the camera in Android. How can I change the default codec (the default is H264) here?\r\n\r\n    private Uri fileUri;\r\n    //...\r\n            private void recordVideo() {\r\n                Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);\r\n                fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);\r\n                // set video quality\r\n                intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file\r\n        \r\n                // start the video capture Intent\r\n                startActivityForResult(intent, CAMERA_CAPTURE_VIDEO_REQUEST_CODE);\r\n            }\r\n        \r\n        // ...\r\n        \r\n        @Override\r\n            protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        if (requestCode == CAMERA_CAPTURE_IMAGE_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK) {\r\n                    // play the video given the global fileUri \r\n        }","title":"Change camera recording codec programmatically in Android","body":"<p>I'm using the following code to record the camera in Android. How can I change the default codec (the default is H264) here?</p>\n<pre><code>private Uri fileUri;\n//...\n        private void recordVideo() {\n            Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);\n            fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);\n            // set video quality\n            intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file\n    \n            // start the video capture Intent\n            startActivityForResult(intent, CAMERA_CAPTURE_VIDEO_REQUEST_CODE);\n        }\n    \n    // ...\n    \n    @Override\n        protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (requestCode == CAMERA_CAPTURE_IMAGE_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK) {\n                // play the video given the global fileUri \n    }\n</code></pre>\n"},{"tags":["java","selenium","if-statement","variables","block"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1639432641,"post_id":70341393,"comment_id":124342864,"body_markdown":"What are you trying to achieve ?","body":"What are you trying to achieve ?"},{"owner":{"account_id":19379111,"reputation":232,"user_id":14170782,"display_name":"Muddyblack k"},"score":0,"creation_date":1639432906,"post_id":70341393,"comment_id":124342943,"body_markdown":"I want that I can use the variable &quot;driver&quot; for several webdrivertypes.\nBut I can&#39;t use variables which are declared in a condition block, so tried to put it outside.","body":"I want that I can use the variable &quot;driver&quot; for several webdrivertypes. But I can&#39;t use variables which are declared in a condition block, so tried to put it outside."},{"owner":{"account_id":19379111,"reputation":232,"user_id":14170782,"display_name":"Muddyblack k"},"score":0,"creation_date":1639432961,"post_id":70341393,"comment_id":124342958,"body_markdown":"I would need to declare &quot;Webdriver driver&quot; without opening the webdriver.\nSo I dont get any error below","body":"I would need to declare &quot;Webdriver driver&quot; without opening the webdriver. So I dont get any error below"}],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639433180,"creation_date":1639433180,"answer_id":70341500,"question_id":70341393,"body_markdown":"You can initialize driver type for each `preferredBrowser` as following:\r\n```java\r\npublic static void startDriver(String preferredBrowser) throws Exception{\r\n    Webdriver driver;\r\n\r\n    if(preferredBrowser.equals(&quot;Firefox&quot;)){\r\n    \tdriver = new FirefoxDriver();\r\n    } \r\n    else if(preferredBrowser.equals(&quot;Edge&quot;)){\r\n\t\t\tdriver = new EdgeDriver();\r\n    }\r\n    else{\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n\r\n        driver = new ChromeDriver(options);\r\n    }\r\n    driver.manage().window().maximize();\r\n    driver.get(website);\r\n}\r\n```","title":"Java Selenium how to set a dynamic variable for new driver","body":"<p>You can initialize driver type for each <code>preferredBrowser</code> as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void startDriver(String preferredBrowser) throws Exception{\n    Webdriver driver;\n\n    if(preferredBrowser.equals(&quot;Firefox&quot;)){\n        driver = new FirefoxDriver();\n    } \n    else if(preferredBrowser.equals(&quot;Edge&quot;)){\n            driver = new EdgeDriver();\n    }\n    else{\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\n        ChromeOptions options = new ChromeOptions();\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\n\n        driver = new ChromeDriver(options);\n    }\n    driver.manage().window().maximize();\n    driver.get(website);\n}\n</code></pre>\n"}],"owner":{"account_id":19379111,"reputation":232,"user_id":14170782,"display_name":"Muddyblack k"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":588,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70341500,"answer_count":1,"score":1,"last_activity_date":1639433180,"creation_date":1639432442,"question_id":70341393,"body_markdown":"I know that it is in not possible in java to use variables from conditional Blocks.\r\nBut I dont know what to do. When I do it like this I get an error for the code after the if statements:\r\n\r\n    public static void startDriver(String preferredBrowser) throws Exception{\r\n        Webdriver driver;\r\n\r\n        if(preferredBrowser.equals(&quot;Firefox&quot;)){\r\n\r\n        } \r\n        else if(preferredBrowser.equals(&quot;Edge&quot;)){\r\n\r\n        }\r\n        else{\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\r\n            ChromeOptions options = new ChromeOptions();\r\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n            options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n    \r\n            driver = new ChromeDriver(options);\r\n        }\r\n        driver.manage().window().maximize();\r\n        driver.get(website);\r\n\r\n    }\r\nThis what I tried to fix it but now it does open me two drivers at once:\r\n\r\n    public static void startDriver(String preferredBrowser) throws Exception{\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\r\n        WebDriver driver = new ChromeDriver();\r\n        if(preferredBrowser.equals(&quot;Firefox&quot;)){\r\n\r\n        } \r\n        else if(preferredBrowser.equals(&quot;Edge&quot;)){\r\n\r\n        }\r\n        else{\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\r\n            ChromeOptions options = new ChromeOptions();\r\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n            options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n    \r\n            driver = new ChromeDriver(options);\r\n        }\r\n        driver.manage().window().maximize();\r\n        driver.get(website);\r\n\r\n    }\r\n\r\nI hope you can help me out.\r\n\r\nBest Regards\r\n\r\nChristian","title":"Java Selenium how to set a dynamic variable for new driver","body":"<p>I know that it is in not possible in java to use variables from conditional Blocks.\nBut I dont know what to do. When I do it like this I get an error for the code after the if statements:</p>\n<pre><code>public static void startDriver(String preferredBrowser) throws Exception{\n    Webdriver driver;\n\n    if(preferredBrowser.equals(&quot;Firefox&quot;)){\n\n    } \n    else if(preferredBrowser.equals(&quot;Edge&quot;)){\n\n    }\n    else{\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\n        ChromeOptions options = new ChromeOptions();\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\n\n        driver = new ChromeDriver(options);\n    }\n    driver.manage().window().maximize();\n    driver.get(website);\n\n}\n</code></pre>\n<p>This what I tried to fix it but now it does open me two drivers at once:</p>\n<pre><code>public static void startDriver(String preferredBrowser) throws Exception{\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\n    WebDriver driver = new ChromeDriver();\n    if(preferredBrowser.equals(&quot;Firefox&quot;)){\n\n    } \n    else if(preferredBrowser.equals(&quot;Edge&quot;)){\n\n    }\n    else{\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,  driverPath);\n        ChromeOptions options = new ChromeOptions();\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\n\n        driver = new ChromeDriver(options);\n    }\n    driver.manage().window().maximize();\n    driver.get(website);\n\n}\n</code></pre>\n<p>I hope you can help me out.</p>\n<p>Best Regards</p>\n<p>Christian</p>\n"},{"tags":["java","hibernate","dialect"],"comments":[{"owner":{"account_id":4141064,"reputation":1482,"user_id":3396363,"display_name":"Bonifacio"},"score":0,"creation_date":1455128048,"post_id":35322355,"comment_id":58354373,"body_markdown":"Just for my clarification: why exactly are you trying to quote a column?","body":"Just for my clarification: why exactly are you trying to quote a column?"},{"owner":{"account_id":394033,"reputation":10807,"user_id":756233,"accept_rate":71,"display_name":"Ray Hulha"},"score":0,"creation_date":1455129219,"post_id":35322355,"comment_id":58355097,"body_markdown":"The SQL server I am using gives a syntax error if the quotes are missing for this keyword only.","body":"The SQL server I am using gives a syntax error if the quotes are missing for this keyword only."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1455177885,"post_id":35322355,"comment_id":58375181,"body_markdown":"Which version of Hibernate do you use?","body":"Which version of Hibernate do you use?"},{"owner":{"account_id":394033,"reputation":10807,"user_id":756233,"accept_rate":71,"display_name":"Ray Hulha"},"score":0,"creation_date":1455204132,"post_id":35322355,"comment_id":58393547,"body_markdown":"The version is 4.1.9","body":"The version is 4.1.9"}],"answers":[{"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639432907,"creation_date":1639431216,"answer_id":70341201,"question_id":35322355,"body_markdown":"The words defined in via `Dialect.registerKeyword()` will be be passed to `org.hibernate.engine.jdbc.env.spi.IdentifierHelperBuilder.applyReservedWords(Set&lt;String&gt;)` which will do nothing when `hibernate.auto_quote_keyword` is `false` (the default).\r\n\r\nSetting it to true might solve the problem but in my case, this defined a lot of other keywords that cause even more problems.\r\n\r\nMy fix was this code in the new `Dialect`:\r\n\r\n    @Override\r\n    public IdentifierHelper buildIdentifierHelper(\r\n        IdentifierHelperBuilder builder,\r\n        DatabaseMetaData dbMetaData\r\n    ) throws SQLException {\r\n        // Original code\r\n        builder.applyIdentifierCasing( dbMetaData );\r\n        \r\n        // My code: Just define a few keywords which cause problems\r\n        builder.setAutoQuoteKeywords(true); // Force quotes around keywords\r\n        Set&lt;String&gt; sqlKeywords = ImmutableSet.&lt;String&gt;builder()\r\n            .add(&quot;VALUE&quot;)\r\n            .build();\r\n        builder.setReservedWords(sqlKeywords);\r\n        \r\n        // Original code\r\n        builder.setNameQualifierSupport( getNameQualifierSupport() );\r\n    \r\n        return builder.build();\r\n    }\r\n","title":"Quote a keyword in a Hibernate dialect","body":"<p>The words defined in via <code>Dialect.registerKeyword()</code> will be be passed to <code>org.hibernate.engine.jdbc.env.spi.IdentifierHelperBuilder.applyReservedWords(Set&lt;String&gt;)</code> which will do nothing when <code>hibernate.auto_quote_keyword</code> is <code>false</code> (the default).</p>\n<p>Setting it to true might solve the problem but in my case, this defined a lot of other keywords that cause even more problems.</p>\n<p>My fix was this code in the new <code>Dialect</code>:</p>\n<pre><code>@Override\npublic IdentifierHelper buildIdentifierHelper(\n    IdentifierHelperBuilder builder,\n    DatabaseMetaData dbMetaData\n) throws SQLException {\n    // Original code\n    builder.applyIdentifierCasing( dbMetaData );\n    \n    // My code: Just define a few keywords which cause problems\n    builder.setAutoQuoteKeywords(true); // Force quotes around keywords\n    Set&lt;String&gt; sqlKeywords = ImmutableSet.&lt;String&gt;builder()\n        .add(&quot;VALUE&quot;)\n        .build();\n    builder.setReservedWords(sqlKeywords);\n    \n    // Original code\n    builder.setNameQualifierSupport( getNameQualifierSupport() );\n\n    return builder.build();\n}\n</code></pre>\n"}],"owner":{"account_id":394033,"reputation":10807,"user_id":756233,"accept_rate":71,"display_name":"Ray Hulha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639432907,"creation_date":1455126426,"question_id":35322355,"body_markdown":"I am trying to write a Hibernate dialect that quotes the word definition.\r\n\r\nI tried to overwrite the Dialect.quote function but it is final and doesn&#39;t allow this.\r\n\r\nCurrently Hibernate generates this:  \r\n`select ..., postingdef0_.definition as definition31_, ... from ...`\r\n\r\nAnd I need it to be:\r\n`select ..., postingdef0_.&quot;definition&quot; as definition31_, ... from ...`\r\n\r\nPlease note the quotes around the word definition.\r\n\r\nI also tried to register definition as a keyword ( registerKeyword ) without success.\r\n\r\nI would like to solve this in the **dialect** before I change the client code to add back ticks, which seem to be the alternative solution.\r\n\r\n","title":"Quote a keyword in a Hibernate dialect","body":"<p>I am trying to write a Hibernate dialect that quotes the word definition.</p>\n\n<p>I tried to overwrite the Dialect.quote function but it is final and doesn't allow this.</p>\n\n<p>Currently Hibernate generates this:<br>\n<code>select ..., postingdef0_.definition as definition31_, ... from ...</code></p>\n\n<p>And I need it to be:\n<code>select ..., postingdef0_.\"definition\" as definition31_, ... from ...</code></p>\n\n<p>Please note the quotes around the word definition.</p>\n\n<p>I also tried to register definition as a keyword ( registerKeyword ) without success.</p>\n\n<p>I would like to solve this in the <strong>dialect</strong> before I change the client code to add back ticks, which seem to be the alternative solution.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":1,"creation_date":1639431318,"post_id":70341176,"comment_id":124342512,"body_markdown":"have you looked at locks?","body":"have you looked at locks?"}],"answers":[{"tags":[],"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639432809,"creation_date":1639432809,"answer_id":70341446,"question_id":70341176,"body_markdown":"Without further details, a `while` loop seems to be the tool for this job:\r\n\r\n```java\r\npublic static boolean checkTimeOut(TimeUnit unit ,long timeout){\r\n    long limit = unit.toMillis(timeout);\r\n\tlong now = Clock.systemDefaultZone().millis();\r\n\twhile(Clock.systemDefaultZone().millis() &lt;= now + limit) {\r\n\t\tif (/* condition */) return true;\r\n\t}\r\n    return false;\r\n}\r\n```\r\n\r\nBy the way, instead of using `valueOf()`, you could simple use one of the `Enum` available, so that\r\n\r\n```java \r\npublic static void main(String[] args) {\r\n    TimeUnit testingMinutes = TimeUnit.MINUTES;\r\n    TimeUnit testingSeconds = TimeUnit.SECONDS;\r\n    TimeUnit testingMilli = TimeUnit.MILLISECONDS;\r\n    checkTimeOut(testingMinutes , 1);\r\n    checkTimeOut(testingSeconds, 200);\r\n    checkTimeOut(testingMilli, 500);\r\n}\r\n```","title":"run method for a given time - or until a condition is met","body":"<p>Without further details, a <code>while</code> loop seems to be the tool for this job:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean checkTimeOut(TimeUnit unit ,long timeout){\n    long limit = unit.toMillis(timeout);\n    long now = Clock.systemDefaultZone().millis();\n    while(Clock.systemDefaultZone().millis() &lt;= now + limit) {\n        if (/* condition */) return true;\n    }\n    return false;\n}\n</code></pre>\n<p>By the way, instead of using <code>valueOf()</code>, you could simple use one of the <code>Enum</code> available, so that</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    TimeUnit testingMinutes = TimeUnit.MINUTES;\n    TimeUnit testingSeconds = TimeUnit.SECONDS;\n    TimeUnit testingMilli = TimeUnit.MILLISECONDS;\n    checkTimeOut(testingMinutes , 1);\n    checkTimeOut(testingSeconds, 200);\n    checkTimeOut(testingMilli, 500);\n}\n</code></pre>\n"}],"owner":{"account_id":11340281,"reputation":29,"user_id":8314613,"display_name":"Ori Shalhno"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1639432809,"creation_date":1639431126,"question_id":70341176,"body_markdown":"I want a method to recieve TimeUnit object (any) , and long timeout .\r\n\r\nthe method should return true if during this time something happened (-not relevant) or false otherwise , \r\n\r\n**the method should not sleep for the time given and then test if condition was met - but to continue testing condition until the required time passed or condition met**  \r\n\r\n\r\n    public static boolean checkTimeOut(TimeUnit unit ,long timeout){\r\n        // wait based on TimeUnit and timeout\r\n        if(/*condition met*/){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    public static void main(String[] args) {\r\n        TimeUnit testingMinutes = TimeUnit.valueOf(&quot;MINUTES&quot;);\r\n        TimeUnit testingSeconds = TimeUnit.valueOf(&quot;SECONDS&quot;);\r\n        TimeUnit testingMilli = TimeUnit.valueOf(&quot;MILLISECONDS&quot;);\r\n        checkTimeOut(testingMinutes , 1);\r\n        checkTimeOut(testingSeconds, 200);\r\n        checkTimeOut(testingMilli, 500);\r\n    }\r\n\r\n*this code is used only as example of general structure ,and not part of the actual project.*","title":"run method for a given time - or until a condition is met","body":"<p>I want a method to recieve TimeUnit object (any) , and long timeout .</p>\n<p>the method should return true if during this time something happened (-not relevant) or false otherwise ,</p>\n<p><strong>the method should not sleep for the time given and then test if condition was met - but to continue testing condition until the required time passed or condition met</strong></p>\n<pre><code>public static boolean checkTimeOut(TimeUnit unit ,long timeout){\n    // wait based on TimeUnit and timeout\n    if(/*condition met*/){\n        return true;\n    }\n    return false;\n}\npublic static void main(String[] args) {\n    TimeUnit testingMinutes = TimeUnit.valueOf(&quot;MINUTES&quot;);\n    TimeUnit testingSeconds = TimeUnit.valueOf(&quot;SECONDS&quot;);\n    TimeUnit testingMilli = TimeUnit.valueOf(&quot;MILLISECONDS&quot;);\n    checkTimeOut(testingMinutes , 1);\n    checkTimeOut(testingSeconds, 200);\n    checkTimeOut(testingMilli, 500);\n}\n</code></pre>\n<p><em>this code is used only as example of general structure ,and not part of the actual project.</em></p>\n"},{"tags":["java","function","customization","event-listener"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1633666388,"post_id":69490364,"comment_id":122825617,"body_markdown":"Ok, why?  An `ActionListener` would allow you to be notified when the button is &quot;actioned&quot;, that is &quot;clicked&quot; or activated via the keyboard (or even programmatically)","body":"Ok, why?  An <code>ActionListener</code> would allow you to be notified when the button is &quot;actioned&quot;, that is &quot;clicked&quot; or activated via the keyboard (or even programmatically)"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1633666489,"post_id":69490364,"comment_id":122825632,"body_markdown":"*&quot;Another thing is that I want to create a method onClick inside myButton class which has the parameter of the function name same as JS. But I don&#39;t know how to create that function. Moreover function passing is not there in Java&quot;*, so create an `interface` with the required functionality you want to expose and pass an instance of an object which adopts it - you&#39;ve just described exactly how a listener/observer works","body":"<i>&quot;Another thing is that I want to create a method onClick inside myButton class which has the parameter of the function name same as JS. But I don&#39;t know how to create that function. Moreover function passing is not there in Java&quot;</i>, so create an <code>interface</code> with the required functionality you want to expose and pass an instance of an object which adopts it - you&#39;ve just described exactly how a listener/observer works"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1633666602,"post_id":69490364,"comment_id":122825650,"body_markdown":"Seriously, I think you need to go and read [How to Use Buttons, Check Boxes, and Radio Buttons](https://docs.oracle.com/javase/tutorial/uiswing/components/button.html) and [How to Write an Action Listener](https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html) which will ultimately do what you want","body":"Seriously, I think you need to go and read <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\" rel=\"nofollow noreferrer\">How to Use Buttons, Check Boxes, and Radio Buttons</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">How to Write an Action Listener</a> which will ultimately do what you want"},{"owner":{"account_id":22858256,"reputation":800,"user_id":17002772,"display_name":"Ruthvik"},"score":0,"creation_date":1633666654,"post_id":69490364,"comment_id":122825665,"body_markdown":"Actually the myButton class implements many interfaces for Keyboard, Mouse, Mousemotion, MouseWheel etc. Using actionListener does only for one thing but thr myButton class implements many.","body":"Actually the myButton class implements many interfaces for Keyboard, Mouse, Mousemotion, MouseWheel etc. Using actionListener does only for one thing but thr myButton class implements many."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1633666767,"post_id":69490364,"comment_id":122825682,"body_markdown":"Actually, it does two - mouse clicked and enter key pressed (and keyboard short cuts).  You can also have a look at the `ButtonModel` which can also handle mouse enter/exit, if the underlying button is configured to do it - so, please forgive me if I think you&#39;re approach is a little ... skewed","body":"Actually, it does two - mouse clicked and enter key pressed (and keyboard short cuts).  You can also have a look at the <code>ButtonModel</code> which can also handle mouse enter/exit, if the underlying button is configured to do it - so, please forgive me if I think you&#39;re approach is a little ... skewed"},{"owner":{"account_id":22858256,"reputation":800,"user_id":17002772,"display_name":"Ruthvik"},"score":0,"creation_date":1633666933,"post_id":69490364,"comment_id":122825708,"body_markdown":"Ok but I want the button to listener for more events like hover, drag etc. And using actionListener might be useless for that moreover I&#39;m keeping different responses for different kinds of events .","body":"Ok but I want the button to listener for more events like hover, drag etc. And using actionListener might be useless for that moreover I&#39;m keeping different responses for different kinds of events ."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1633667404,"post_id":69490364,"comment_id":122825778,"body_markdown":"Drag and drop and exposed via the [DnD API](https://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html).  Hover is an act of &quot;enter without leaving&quot;, which as I&#39;ve already stated can be handled by the `ButtonModel` or, if you want to show a tool tip popup, via the tooltip API.  I would also recommend you have a look at [Introduction to Event Listeners](https://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)","body":"Drag and drop and exposed via the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html\" rel=\"nofollow noreferrer\">DnD API</a>.  Hover is an act of &quot;enter without leaving&quot;, which as I&#39;ve already stated can be handled by the <code>ButtonModel</code> or, if you want to show a tool tip popup, via the tooltip API.  I would also recommend you have a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/intro.html\" rel=\"nofollow noreferrer\">Introduction to Event Listeners</a>"},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1633667558,"post_id":69490364,"comment_id":122825800,"body_markdown":"Java Swing can do almost anything you&#39;d want, but you have to do it Java&#39;s way. It&#39;s not simple, but it&#39;s very flexible. The earlier AWT worked closer to what I think you&#39;re describing, but was replaced because it ends up with a lot of limits and complexity when the application stops being toy level simplicity.","body":"Java Swing can do almost anything you&#39;d want, but you have to do it Java&#39;s way. It&#39;s not simple, but it&#39;s very flexible. The earlier AWT worked closer to what I think you&#39;re describing, but was replaced because it ends up with a lot of limits and complexity when the application stops being toy level simplicity."},{"owner":{"account_id":22858256,"reputation":800,"user_id":17002772,"display_name":"Ruthvik"},"score":0,"creation_date":1633668762,"post_id":69490364,"comment_id":122826007,"body_markdown":"Thank you all for you suggestions and spending your time on me. I will try out what you have mentioned.... &#128591; &#128591; &#128591;","body":"Thank you all for you suggestions and spending your time on me. I will try out what you have mentioned.... 🙏 🙏 🙏"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639432745,"creation_date":1633668944,"answer_id":69490685,"question_id":69490364,"body_markdown":"Seriously, I think you need to go and read [How to Use Buttons, Check Boxes, and Radio Buttons](https://docs.oracle.com/javase/tutorial/uiswing/components/button.html) and [How to Write an Action Listener](https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html) which will ultimately do what you want\r\n\r\nSo something like...\r\n\r\n    JButton btn = new JButton(&quot;Click me&quot;);\r\n    btn.addActionListener(new ActionListener() {\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            System.out.println(&quot;I was clicked&quot;);\r\n        }\r\n    });\r\n\r\nwill do exactly what you&#39;ve just described.  The fact is, most components already have some mouse and/or keyboard controls built in, so you don&#39;t &quot;have&quot; to reinvent the whole wheel over again.\r\n\r\n&gt; So I decided to create my own class myButton which extends JButton and also implements all the listeners required. But the statements for what has to be done when the button is clicked should be placed in mouseClicked normally, but using that externally I&#39;m not getting how to use that. \r\n\r\nYes this is what a custom `interface` would be used for - but the question is, is it important for the button to generate events when a &quot;mouse&quot; action occurs as to apposed to a &quot;key board&quot; action or some other action?  \r\n\r\nThis is why the `ActionListener` is generally used, as it provides an agnostic event handler for when the button is &quot;actioned&quot;, generally, regardless of how it was triggered\r\n\r\n&gt; Another thing is that I want to create a method onClick inside myButton class which has the parameter of the function name same as JS. But I don&#39;t know how to create that function. Moreover function passing is not there in Java. And another problem is that how can I tell the program the onClick method is the method that should be implement when the button is clicked.\r\n\r\nThere are no functions in Java, just objects.  This is where an `interface` would be useful, it&#39;s a contract which describes what functionality an implementation is expected to provide.  \r\n\r\nYou&#39;ve already used them, you just need to define what your expected &quot;trigger&quot;/method/callback will be for your &quot;onClick&quot; action.\r\n\r\n&gt; Ok but I want the button to listener for more events like hover, drag etc. \r\n\r\nWell drag&#39;n&#39;drop is handled by the [Drag and Drop and Data Transfer](https://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html) API and is, again, designed to provide an agnostic and re-usable workflow for what is, honestly, a very complicated feature.\r\n\r\n&gt; And using actionListener might be useless for that moreover I&#39;m keeping different responses for different kinds of events .\r\n\r\nNo, but you could use the `ButtonModel` instead, for example...\r\n\r\n    btn.getModel().addChangeListener(new ChangeListener() {\r\n        @Override\r\n        public void stateChanged(ChangeEvent e) {\r\n            if (btn.getModel().isRollover()) {\r\n                System.out.println(&quot;You have entered the spiders web&quot;);\r\n            } else {\r\n             System.out.println(&quot;You have escaped&quot;);   \r\n            }\r\n        }\r\n    });\r\n    btn.setRolloverEnabled(true);\r\n\r\n(note - the `JButton` can also support &quot;roll over&quot; images automatically)\r\n\r\nOr if you just wanted to display a tooltip you could just use...\r\n\r\n    btn.setToolTipText(&quot;What are you waiting for&quot;);\r\n\r\nAnd if you wanted some custom keyboard action, you could make use of the [Key Bindings API](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html), for example...\r\n\r\n    InputMap im = btn.getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n    ActionMap am = btn.getActionMap();\r\n\r\n    im.put(KeyStroke.getKeyStroke(KeyEvent.VK_M, InputEvent.ALT_DOWN_MASK), &quot;pressed&quot;);\r\n    am.put(&quot;pressed&quot;, new AbstractAction() {\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            System.out.println(&quot;Activiated via the keyboard&quot;);\r\n            JButton btn = (JButton) e.getSource();\r\n            btn.doClick();\r\n        }\r\n    });\r\n\r\nI would also recommend having a look at [Introduction to Event Listeners](https://docs.oracle.com/javase/tutorial/uiswing/events/intro.html).\r\n\r\nNow, if you&#39;re really hell bent on making your own button, then `JButton` really isn&#39;t the place to get started.  You&#39;d want to look at `ButtonUI` and look and feel APIs, but this is a really advance level of Swing and to be honest, not many seasoned developers get down to this level.\r\n\r\n&gt; But what about MouseWheel?\r\n\r\nWhy would need to do anything other than add a `MouseWheelListener` to an existing instance of `JButton`?  What &quot;extra&quot; functionality do you intend to provide which wouldn&#39;t need to be delegated to another listener?\r\n\r\nSure, maybe you could use it as means to increase or decrease a counter I guess, but then, I&#39;d probably only be using a seperate `MouseWheelListener` anyway, it&#39;s not a feature that I&#39;d consider useful on a regular bases ... in fact, I can&#39;t say I&#39;ve ever used these two together.\r\n\r\nTheres a general concept in OO, [&quot;prefer composition over inheritance&quot;](https://www.google.com/search?client=safari&amp;rls=en&amp;q=java+prefer+composition+over+inheritance&amp;ie=UTF-8&amp;oe=UTF-8), you might want to become familiar study up on it.\r\n\r\n# Runnable example...\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.InputEvent;\r\n    import java.awt.event.KeyEvent;\r\n    import javax.swing.AbstractAction;\r\n    import javax.swing.ActionMap;\r\n    import javax.swing.InputMap;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.KeyStroke;\r\n    import javax.swing.event.ChangeEvent;\r\n    import javax.swing.event.ChangeListener;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() {\r\n                JButton btn = new JButton(&quot;Click me&quot;);\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        System.out.println(&quot;I was clicked&quot;);\r\n                    }\r\n                });\r\n                btn.getModel().addChangeListener(new ChangeListener() {\r\n                    @Override\r\n                    public void stateChanged(ChangeEvent e) {\r\n                        if (btn.getModel().isRollover()) {\r\n                            System.out.println(&quot;You have entered the spiders web&quot;);\r\n                        } else {\r\n                            System.out.println(&quot;You have escaped&quot;);\r\n                        }\r\n                    }\r\n                });\r\n                btn.setRolloverEnabled(true);\r\n                btn.setMnemonic(&#39;m&#39;);\r\n\r\n                InputMap im = btn.getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n                ActionMap am = btn.getActionMap();\r\n\r\n                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_M, InputEvent.ALT_DOWN_MASK), &quot;pressed&quot;);\r\n                am.put(&quot;pressed&quot;, new AbstractAction() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        System.out.println(&quot;Activiated via the keyboard&quot;);\r\n                        JButton btn = (JButton) e.getSource();\r\n                        btn.doClick();\r\n                    }\r\n                });\r\n\r\n                btn.setToolTipText(&quot;What are you waiting for&quot;);\r\n\r\n                btn.addMouseWheelListener(new MouseWheelListener() {\r\n                    @Override\r\n                    public void mouseWheelMoved(MouseWheelEvent e) {\r\n                        System.out.println(&quot;I&#39;ve been wheeled&quot;);\r\n                    }\r\n                });\r\n\r\n                add(btn);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\nPlease, understand, I&#39;m not suggesting that you &quot;can&#39;t&quot; do all the things you&#39;re trying to do, what I&#39;m trying to suggest is, first figure out &quot;how&quot; those things might be done already, then explore which ones do and don&#39;t work for you.  From there you can start exploring alternative workflows.","title":"How to use my own method for event listening in javax.swing","body":"<p>Seriously, I think you need to go and read <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\" rel=\"nofollow noreferrer\">How to Use Buttons, Check Boxes, and Radio Buttons</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">How to Write an Action Listener</a> which will ultimately do what you want</p>\n<p>So something like...</p>\n<pre><code>JButton btn = new JButton(&quot;Click me&quot;);\nbtn.addActionListener(new ActionListener() {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        System.out.println(&quot;I was clicked&quot;);\n    }\n});\n</code></pre>\n<p>will do exactly what you've just described.  The fact is, most components already have some mouse and/or keyboard controls built in, so you don't &quot;have&quot; to reinvent the whole wheel over again.</p>\n<blockquote>\n<p>So I decided to create my own class myButton which extends JButton and also implements all the listeners required. But the statements for what has to be done when the button is clicked should be placed in mouseClicked normally, but using that externally I'm not getting how to use that.</p>\n</blockquote>\n<p>Yes this is what a custom <code>interface</code> would be used for - but the question is, is it important for the button to generate events when a &quot;mouse&quot; action occurs as to apposed to a &quot;key board&quot; action or some other action?</p>\n<p>This is why the <code>ActionListener</code> is generally used, as it provides an agnostic event handler for when the button is &quot;actioned&quot;, generally, regardless of how it was triggered</p>\n<blockquote>\n<p>Another thing is that I want to create a method onClick inside myButton class which has the parameter of the function name same as JS. But I don't know how to create that function. Moreover function passing is not there in Java. And another problem is that how can I tell the program the onClick method is the method that should be implement when the button is clicked.</p>\n</blockquote>\n<p>There are no functions in Java, just objects.  This is where an <code>interface</code> would be useful, it's a contract which describes what functionality an implementation is expected to provide.</p>\n<p>You've already used them, you just need to define what your expected &quot;trigger&quot;/method/callback will be for your &quot;onClick&quot; action.</p>\n<blockquote>\n<p>Ok but I want the button to listener for more events like hover, drag etc.</p>\n</blockquote>\n<p>Well drag'n'drop is handled by the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html\" rel=\"nofollow noreferrer\">Drag and Drop and Data Transfer</a> API and is, again, designed to provide an agnostic and re-usable workflow for what is, honestly, a very complicated feature.</p>\n<blockquote>\n<p>And using actionListener might be useless for that moreover I'm keeping different responses for different kinds of events .</p>\n</blockquote>\n<p>No, but you could use the <code>ButtonModel</code> instead, for example...</p>\n<pre><code>btn.getModel().addChangeListener(new ChangeListener() {\n    @Override\n    public void stateChanged(ChangeEvent e) {\n        if (btn.getModel().isRollover()) {\n            System.out.println(&quot;You have entered the spiders web&quot;);\n        } else {\n         System.out.println(&quot;You have escaped&quot;);   \n        }\n    }\n});\nbtn.setRolloverEnabled(true);\n</code></pre>\n<p>(note - the <code>JButton</code> can also support &quot;roll over&quot; images automatically)</p>\n<p>Or if you just wanted to display a tooltip you could just use...</p>\n<pre><code>btn.setToolTipText(&quot;What are you waiting for&quot;);\n</code></pre>\n<p>And if you wanted some custom keyboard action, you could make use of the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html\" rel=\"nofollow noreferrer\">Key Bindings API</a>, for example...</p>\n<pre><code>InputMap im = btn.getInputMap(WHEN_IN_FOCUSED_WINDOW);\nActionMap am = btn.getActionMap();\n\nim.put(KeyStroke.getKeyStroke(KeyEvent.VK_M, InputEvent.ALT_DOWN_MASK), &quot;pressed&quot;);\nam.put(&quot;pressed&quot;, new AbstractAction() {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        System.out.println(&quot;Activiated via the keyboard&quot;);\n        JButton btn = (JButton) e.getSource();\n        btn.doClick();\n    }\n});\n</code></pre>\n<p>I would also recommend having a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/intro.html\" rel=\"nofollow noreferrer\">Introduction to Event Listeners</a>.</p>\n<p>Now, if you're really hell bent on making your own button, then <code>JButton</code> really isn't the place to get started.  You'd want to look at <code>ButtonUI</code> and look and feel APIs, but this is a really advance level of Swing and to be honest, not many seasoned developers get down to this level.</p>\n<blockquote>\n<p>But what about MouseWheel?</p>\n</blockquote>\n<p>Why would need to do anything other than add a <code>MouseWheelListener</code> to an existing instance of <code>JButton</code>?  What &quot;extra&quot; functionality do you intend to provide which wouldn't need to be delegated to another listener?</p>\n<p>Sure, maybe you could use it as means to increase or decrease a counter I guess, but then, I'd probably only be using a seperate <code>MouseWheelListener</code> anyway, it's not a feature that I'd consider useful on a regular bases ... in fact, I can't say I've ever used these two together.</p>\n<p>Theres a general concept in OO, <a href=\"https://www.google.com/search?client=safari&amp;rls=en&amp;q=java+prefer+composition+over+inheritance&amp;ie=UTF-8&amp;oe=UTF-8\" rel=\"nofollow noreferrer\">&quot;prefer composition over inheritance&quot;</a>, you might want to become familiar study up on it.</p>\n<h1>Runnable example...</h1>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.InputEvent;\nimport java.awt.event.KeyEvent;\nimport javax.swing.AbstractAction;\nimport javax.swing.ActionMap;\nimport javax.swing.InputMap;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.KeyStroke;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.event.ChangeListener;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() {\n            JButton btn = new JButton(&quot;Click me&quot;);\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    System.out.println(&quot;I was clicked&quot;);\n                }\n            });\n            btn.getModel().addChangeListener(new ChangeListener() {\n                @Override\n                public void stateChanged(ChangeEvent e) {\n                    if (btn.getModel().isRollover()) {\n                        System.out.println(&quot;You have entered the spiders web&quot;);\n                    } else {\n                        System.out.println(&quot;You have escaped&quot;);\n                    }\n                }\n            });\n            btn.setRolloverEnabled(true);\n            btn.setMnemonic('m');\n\n            InputMap im = btn.getInputMap(WHEN_IN_FOCUSED_WINDOW);\n            ActionMap am = btn.getActionMap();\n\n            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_M, InputEvent.ALT_DOWN_MASK), &quot;pressed&quot;);\n            am.put(&quot;pressed&quot;, new AbstractAction() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    System.out.println(&quot;Activiated via the keyboard&quot;);\n                    JButton btn = (JButton) e.getSource();\n                    btn.doClick();\n                }\n            });\n\n            btn.setToolTipText(&quot;What are you waiting for&quot;);\n\n            btn.addMouseWheelListener(new MouseWheelListener() {\n                @Override\n                public void mouseWheelMoved(MouseWheelEvent e) {\n                    System.out.println(&quot;I've been wheeled&quot;);\n                }\n            });\n\n            add(btn);\n        }\n\n    }\n}\n</code></pre>\n<p>Please, understand, I'm not suggesting that you &quot;can't&quot; do all the things you're trying to do, what I'm trying to suggest is, first figure out &quot;how&quot; those things might be done already, then explore which ones do and don't work for you.  From there you can start exploring alternative workflows.</p>\n"}],"owner":{"account_id":22858256,"reputation":800,"user_id":17002772,"display_name":"Ruthvik"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69490685,"answer_count":1,"score":0,"last_activity_date":1639432745,"creation_date":1633665925,"question_id":69490364,"body_markdown":"I&#39;m actually started learning about javax.swing for graphics. For event listening like KeyListener, MouseListener etc., I have to implement all their methods with their own headers.\r\n\r\nI previously worked in JS, and there event listening is very simple. \r\n\r\nSo I decided to create my own class myButton which extends JButton and also implements all the listeners required. But the statements for what has to be done when the button is clicked should be placed in mouseClicked normally, but using that externally I&#39;m not getting how to use that. Another thing is that I want to create a method onClick inside myButton class which has the parameter of the function name same as JS. But I don&#39;t know how to create that function. Moreover function passing is not there in Java. And another problem is that how can I tell the program the onClick method is the method that should be implement when the button is clicked.\r\n\r\nSo these are the two things I wanted to clarify and know how to achieve them.\r\n1. Use my own method (onClick) instead of the default (mouseClicked).\r\n2. How to pass a function name or an anonymous function (which should actually be implemented) as an argument to the onClick method as it is in Javascript.\r\n\r\n*Thanks in advance*","title":"How to use my own method for event listening in javax.swing","body":"<p>I'm actually started learning about javax.swing for graphics. For event listening like KeyListener, MouseListener etc., I have to implement all their methods with their own headers.</p>\n<p>I previously worked in JS, and there event listening is very simple.</p>\n<p>So I decided to create my own class myButton which extends JButton and also implements all the listeners required. But the statements for what has to be done when the button is clicked should be placed in mouseClicked normally, but using that externally I'm not getting how to use that. Another thing is that I want to create a method onClick inside myButton class which has the parameter of the function name same as JS. But I don't know how to create that function. Moreover function passing is not there in Java. And another problem is that how can I tell the program the onClick method is the method that should be implement when the button is clicked.</p>\n<p>So these are the two things I wanted to clarify and know how to achieve them.</p>\n<ol>\n<li>Use my own method (onClick) instead of the default (mouseClicked).</li>\n<li>How to pass a function name or an anonymous function (which should actually be implemented) as an argument to the onClick method as it is in Javascript.</li>\n</ol>\n<p><em>Thanks in advance</em></p>\n"},{"tags":["java","google-bigquery","google-cloud-pubsub"],"comments":[{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1639422965,"post_id":70338320,"comment_id":124340003,"body_markdown":"Is it a synchronous calculation? Or can you perform the calculation asynchronously? (for example, if you run your function with a Cloud Scheduler, it&#39;s asynchronous, outside a user action and waiting for the answer)","body":"Is it a synchronous calculation? Or can you perform the calculation asynchronously? (for example, if you run your function with a Cloud Scheduler, it&#39;s asynchronous, outside a user action and waiting for the answer)"},{"owner":{"account_id":16658783,"reputation":41,"user_id":12039305,"display_name":"Cristian"},"score":0,"creation_date":1639423197,"post_id":70338320,"comment_id":124340072,"body_markdown":"Guillaume, thanks for your answer. It&#39;s asynchronous I believe, I can run these queries independently.","body":"Guillaume, thanks for your answer. It&#39;s asynchronous I believe, I can run these queries independently."}],"answers":[{"tags":[],"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639424787,"creation_date":1639424787,"answer_id":70340144,"question_id":70338320,"body_markdown":"You can run the request concurrently in your code to parallelize the request but it&#39;s not the optimal way.\r\n\r\nPersonally, I recommend you to publish a PubSub message for each query to run. So, here the process:\r\n\r\n* Cloud Scheduler runs a first Cloud Functions\r\n* The first Cloud Functions iterates over the table to query and publish a message in PubSub for each query to perform: the parameters to include in the message are up to you\r\n* A second Cloud Functions binds to the PubSub topic perform the query. (You can also create a PubSub push Subscription and call an HTTP Cloud FUnctions or something else in HTTP like Cloud Run or App Engine if you prefer)\r\n\r\nThe process is scalable (is tomorrow you have 250 tables, no worry, it scales!!). Don&#39;t forget to set the retry parameter on the second Cloud Functions because parallel requests at high rate to BigQuery can create transient issues","title":"BigQuery Java function timeout","body":"<p>You can run the request concurrently in your code to parallelize the request but it's not the optimal way.</p>\n<p>Personally, I recommend you to publish a PubSub message for each query to run. So, here the process:</p>\n<ul>\n<li>Cloud Scheduler runs a first Cloud Functions</li>\n<li>The first Cloud Functions iterates over the table to query and publish a message in PubSub for each query to perform: the parameters to include in the message are up to you</li>\n<li>A second Cloud Functions binds to the PubSub topic perform the query. (You can also create a PubSub push Subscription and call an HTTP Cloud FUnctions or something else in HTTP like Cloud Run or App Engine if you prefer)</li>\n</ul>\n<p>The process is scalable (is tomorrow you have 250 tables, no worry, it scales!!). Don't forget to set the retry parameter on the second Cloud Functions because parallel requests at high rate to BigQuery can create transient issues</p>\n"},{"tags":[],"owner":{"account_id":6782076,"reputation":168058,"user_id":5221944,"accept_rate":86,"display_name":"Mikhail Berlyant"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639432677,"creation_date":1639432677,"answer_id":70341428,"question_id":70338320,"body_markdown":"Try [Magnus][1] - Workflow Automator - you can find it on GCP Marketplace - as a part of [Potens.io][2] Suite of Tools for BigQuery    \r\n\r\nIn Magnus you can easily build workflow with Loop Task that will take a list of tables and for each will execute whatever query/statement you need.     \r\n\r\n[![enter image description here][3]][3]\r\n\r\nYou can set Loop Task to be executed in Async Mode - so all tables will be process in parallel     \r\n\r\n[![enter image description here][4]][4]\r\n\r\nAs you can see you can even control how many concurrent iterations you allow - so you respect respective API limits      \r\n\r\nCheck out https://potensio.zendesk.com for more details       \r\n\r\nDisclosure: I am author and lead on Potens.io Project by Viant Tech\r\n\r\n  [1]: https://potens.io/products/#magnus\r\n  [2]: https://console.cloud.google.com/marketplace/product/potens-io/potensio\r\n  [3]: https://i.stack.imgur.com/gwjUk.png\r\n  [4]: https://i.stack.imgur.com/onJg1.png","title":"BigQuery Java function timeout","body":"<p>Try <a href=\"https://potens.io/products/#magnus\" rel=\"nofollow noreferrer\">Magnus</a> - Workflow Automator - you can find it on GCP Marketplace - as a part of <a href=\"https://console.cloud.google.com/marketplace/product/potens-io/potensio\" rel=\"nofollow noreferrer\">Potens.io</a> Suite of Tools for BigQuery</p>\n<p>In Magnus you can easily build workflow with Loop Task that will take a list of tables and for each will execute whatever query/statement you need.</p>\n<p><a href=\"https://i.stack.imgur.com/gwjUk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gwjUk.png\" alt=\"enter image description here\" /></a></p>\n<p>You can set Loop Task to be executed in Async Mode - so all tables will be process in parallel</p>\n<p><a href=\"https://i.stack.imgur.com/onJg1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/onJg1.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see you can even control how many concurrent iterations you allow - so you respect respective API limits</p>\n<p>Check out <a href=\"https://potensio.zendesk.com\" rel=\"nofollow noreferrer\">https://potensio.zendesk.com</a> for more details</p>\n<p>Disclosure: I am author and lead on Potens.io Project by Viant Tech</p>\n"}],"owner":{"account_id":16658783,"reputation":41,"user_id":12039305,"display_name":"Cristian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1639432677,"creation_date":1639415044,"question_id":70338320,"body_markdown":"I am running a series of calculations on ~120 tables.\r\n\r\nAlgorithm: Read final table find where day=something and append the results to an existing table\r\n\r\n        For table2 in tablearray\r\n        {\r\n        query = &quot;SELECT * &quot; +\r\n        &quot; FROM (SELECT * FROM tablefinal where day=someday) AS tmp &quot; +\r\n        &quot;WHERE NOT EXISTS (&quot; +\r\n        &quot;SELECT * FROM table2 t2 where  t2.user_id=tmp.user_id AND  t2.day=tmp.day);&quot;\r\n        \r\n        then append rows to table2...\r\n         QueryJobConfiguration queryConfig =\r\n                        QueryJobConfiguration.newBuilder(query).setDestinationTable(destinationTable)\r\n              .setWriteDisposition(JobInfo.WriteDisposition.WRITE_APPEND).build();\r\n    ....\r\n    \r\n      bigquery.query(queryConfig);\r\n    \r\n        }\r\n\r\ndo that with 120 table still using finaltable as data source.\r\n\r\nIssue. Is taking too long. Like 700 sec. And after 540 sec the google function dies.\r\nThe results are correct, but it is too slow...\r\n\r\nQuestion how can speed this up (The tables are pretty small ~100K rows)? \r\nCan I send a bunch of queries in parallel? \r\n\r\n\r\n\r\n\r\n","title":"BigQuery Java function timeout","body":"<p>I am running a series of calculations on ~120 tables.</p>\n<p>Algorithm: Read final table find where day=something and append the results to an existing table</p>\n<pre><code>    For table2 in tablearray\n    {\n    query = &quot;SELECT * &quot; +\n    &quot; FROM (SELECT * FROM tablefinal where day=someday) AS tmp &quot; +\n    &quot;WHERE NOT EXISTS (&quot; +\n    &quot;SELECT * FROM table2 t2 where  t2.user_id=tmp.user_id AND  t2.day=tmp.day);&quot;\n    \n    then append rows to table2...\n     QueryJobConfiguration queryConfig =\n                    QueryJobConfiguration.newBuilder(query).setDestinationTable(destinationTable)\n          .setWriteDisposition(JobInfo.WriteDisposition.WRITE_APPEND).build();\n....\n\n  bigquery.query(queryConfig);\n\n    }\n</code></pre>\n<p>do that with 120 table still using finaltable as data source.</p>\n<p>Issue. Is taking too long. Like 700 sec. And after 540 sec the google function dies.\nThe results are correct, but it is too slow...</p>\n<p>Question how can speed this up (The tables are pretty small ~100K rows)?\nCan I send a bunch of queries in parallel?</p>\n"},{"tags":["java","docker","selenium","google-chrome"],"owner":{"account_id":22682480,"reputation":11,"user_id":16852668,"display_name":"Robert Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":916,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639432599,"creation_date":1639432599,"question_id":70341418,"body_markdown":"I&#39;m trying to run headful (not headless) chrome in a docker container with chrome driver and selenium. I&#39;m using Java\r\n\r\nWhat is the proper way to go about this?\r\n\r\nI followed this guide (https://medium.com/dot-debug/running-chrome-in-a-docker-container-a55e7f4da4a8) and was able to create a docker container that I can connect to locally, but I&#39;m having trouble translating it over to selenium\r\n\r\nWhat I want to do is to create a docker container wherein my Java code can start up chromedriver in headful mode without crashing. Selenium doesn&#39;t give me a way to use &#39;xvfb-run&#39; before starting chrome, so I need to be able to start xvfb another way and have chrome able to figure out how to use xvfb.\r\n\r\nIs there a certain command to run that would start xvfb in the background, after which chrome should be able to figure out how to use it?\r\n\r\nI don&#39;t need to see the UI, I just need it to be able to run in headful mode. I&#39;m using it for unit tests where the website behaves differently in headful vs headless mode\r\n\r\n","title":"Run headful chrome with selenium in a docker container","body":"<p>I'm trying to run headful (not headless) chrome in a docker container with chrome driver and selenium. I'm using Java</p>\n<p>What is the proper way to go about this?</p>\n<p>I followed this guide (<a href=\"https://medium.com/dot-debug/running-chrome-in-a-docker-container-a55e7f4da4a8\" rel=\"nofollow noreferrer\">https://medium.com/dot-debug/running-chrome-in-a-docker-container-a55e7f4da4a8</a>) and was able to create a docker container that I can connect to locally, but I'm having trouble translating it over to selenium</p>\n<p>What I want to do is to create a docker container wherein my Java code can start up chromedriver in headful mode without crashing. Selenium doesn't give me a way to use 'xvfb-run' before starting chrome, so I need to be able to start xvfb another way and have chrome able to figure out how to use xvfb.</p>\n<p>Is there a certain command to run that would start xvfb in the background, after which chrome should be able to figure out how to use it?</p>\n<p>I don't need to see the UI, I just need it to be able to run in headful mode. I'm using it for unit tests where the website behaves differently in headful vs headless mode</p>\n"},{"tags":["java","discord","bots","discord-jda"],"comments":[{"owner":{"account_id":23637796,"reputation":79,"user_id":17668557,"display_name":"michel929"},"score":0,"creation_date":1639426585,"post_id":70340332,"comment_id":124341131,"body_markdown":"in addition Member.getRoles always returns a nullpointerexception","body":"in addition Member.getRoles always returns a nullpointerexception"},{"owner":{"account_id":19602398,"reputation":1072,"user_id":14346900,"display_name":"Leau"},"score":0,"creation_date":1639427697,"post_id":70340332,"comment_id":124341427,"body_markdown":"Can we see your code?","body":"Can we see your code?"},{"owner":{"account_id":23637796,"reputation":79,"user_id":17668557,"display_name":"michel929"},"score":0,"creation_date":1639432338,"post_id":70340332,"comment_id":124342785,"body_markdown":"@Leau I added the script above, thank you in advance","body":"@Leau I added the script above, thank you in advance"},{"owner":{"account_id":19602398,"reputation":1072,"user_id":14346900,"display_name":"Leau"},"score":0,"creation_date":1639435474,"post_id":70340332,"comment_id":124343654,"body_markdown":"Does this answer your question? [Guild Member Add does not work (discordjs)](https://stackoverflow.com/questions/64618047/guild-member-add-does-not-work-discordjs)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64618047/guild-member-add-does-not-work-discordjs\">Guild Member Add does not work (discordjs)</a>"},{"owner":{"account_id":23637796,"reputation":79,"user_id":17668557,"display_name":"michel929"},"score":0,"creation_date":1639436838,"post_id":70340332,"comment_id":124343966,"body_markdown":"@Leau No, sorry I did that but it doesnt work…","body":"@Leau No, sorry I did that but it doesnt work…"},{"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1639440532,"post_id":70340332,"comment_id":124344600,"body_markdown":"Read https://jda.wiki/using-jda/troubleshooting/#my-event-listener-code-is-not-executed and https://jda.wiki/using-jda/gateway-intents-and-member-cache-policy/","body":"Read <a href=\"https://jda.wiki/using-jda/troubleshooting/#my-event-listener-code-is-not-executed\" rel=\"nofollow noreferrer\">jda.wiki/using-jda/troubleshooting/&hellip;</a> and <a href=\"https://jda.wiki/using-jda/gateway-intents-and-member-cache-policy/\" rel=\"nofollow noreferrer\">jda.wiki/using-jda/gateway-intents-and-member-cache-policy</a>"}],"owner":{"account_id":23637796,"reputation":79,"user_id":17668557,"display_name":"michel929"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639432285,"creation_date":1639425912,"question_id":70340332,"body_markdown":"The &quot;onGuildMemberRoleAdd&quot; listener just doesn&#39;t work ... As if the listener was ignored...\r\nAnd I don&#39;t know why :( can someone help me pls! \r\n\r\nI also implemented the listener in the main class.\r\n\r\n**Listener:**\r\n```\r\npackage listener.rollen;\r\n\r\nimport net.dv8tion.jda.api.events.guild.member.GuildMemberRoleAddEvent;\r\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\r\n\r\npublic class RollenAdd extends ListenerAdapter {\r\n\r\n    @Override\r\n    public void onGuildMemberRoleAdd(GuildMemberRoleAddEvent event) {\r\n        System.out.println(&quot;test&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Main**\r\n\r\n```\r\npackage main;\r\n\r\nimport listener.*;\r\nimport listener.punktesystem.SprachchatConnect;\r\nimport listener.punktesystem.SprachchatDisconnect;\r\nimport listener.rollen.*;\r\nimport net.dv8tion.jda.api.OnlineStatus;\r\nimport net.dv8tion.jda.api.entities.Activity;\r\nimport net.dv8tion.jda.api.sharding.DefaultShardManagerBuilder;\r\nimport net.dv8tion.jda.api.sharding.ShardManager;\r\n\r\nimport javax.security.auth.login.LoginException;\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\n\r\npublic class Start {\r\n\r\n    public static Start INSTANCE;\r\n\r\n    public ShardManager shardMan;\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            new Start();\r\n        } catch (LoginException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public Start() throws LoginException, IllegalArgumentException {\r\n\r\n        INSTANCE = this;\r\n\r\n        DefaultShardManagerBuilder builder = DefaultShardManagerBuilder.createDefault(&quot;Token&quot;);\r\n\r\n        builder.setActivity(Activity.watching(&quot;ZZZZs Zaubertrick&quot;));\r\n        builder.setStatus(OnlineStatus.ONLINE);\r\n\r\n        listeners(builder);\r\n\r\n        shardMan = builder.build();\r\n        shutdown();\r\n    }\r\n\r\n    public void shutdown(){\r\n        new Thread(() -&gt; {\r\n\r\n            String line = &quot;&quot;;\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\r\n            try{\r\n                while ((line = reader.readLine()) != null){\r\n\r\n                    if(line.equalsIgnoreCase(&quot;exit&quot;)){\r\n                        if(shardMan != null){\r\n                            shardMan.setStatus(OnlineStatus.OFFLINE);\r\n                            shardMan.shutdown();\r\n                            System.out.println(&quot;Bot ist offline!&quot;);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }catch (IOException e){\r\n                e.printStackTrace();\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    public void listeners(DefaultShardManagerBuilder builder){\r\n        builder.addEventListeners(new RollenAdd());\r\n    }\r\n}\r\n```\r\n\r\nI think that&#39;s all that has to do with it...\r\n\r\nAt first I thought it was because the Privileged Gateway Intents were not activated in the DiscordDeveloperPortal, but after that it still didn&#39;t work","title":"Why onGuildMemberRoleAdd doesnt work? DiscordBot in Java","body":"<p>The &quot;onGuildMemberRoleAdd&quot; listener just doesn't work ... As if the listener was ignored...\nAnd I don't know why :( can someone help me pls!</p>\n<p>I also implemented the listener in the main class.</p>\n<p><strong>Listener:</strong></p>\n<pre><code>package listener.rollen;\n\nimport net.dv8tion.jda.api.events.guild.member.GuildMemberRoleAddEvent;\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\n\npublic class RollenAdd extends ListenerAdapter {\n\n    @Override\n    public void onGuildMemberRoleAdd(GuildMemberRoleAddEvent event) {\n        System.out.println(&quot;test&quot;);\n    }\n\n}\n</code></pre>\n<p><strong>Main</strong></p>\n<pre><code>package main;\n\nimport listener.*;\nimport listener.punktesystem.SprachchatConnect;\nimport listener.punktesystem.SprachchatDisconnect;\nimport listener.rollen.*;\nimport net.dv8tion.jda.api.OnlineStatus;\nimport net.dv8tion.jda.api.entities.Activity;\nimport net.dv8tion.jda.api.sharding.DefaultShardManagerBuilder;\nimport net.dv8tion.jda.api.sharding.ShardManager;\n\nimport javax.security.auth.login.LoginException;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class Start {\n\n    public static Start INSTANCE;\n\n    public ShardManager shardMan;\n\n    public static void main(String[] args) {\n        try {\n            new Start();\n        } catch (LoginException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public Start() throws LoginException, IllegalArgumentException {\n\n        INSTANCE = this;\n\n        DefaultShardManagerBuilder builder = DefaultShardManagerBuilder.createDefault(&quot;Token&quot;);\n\n        builder.setActivity(Activity.watching(&quot;ZZZZs Zaubertrick&quot;));\n        builder.setStatus(OnlineStatus.ONLINE);\n\n        listeners(builder);\n\n        shardMan = builder.build();\n        shutdown();\n    }\n\n    public void shutdown(){\n        new Thread(() -&gt; {\n\n            String line = &quot;&quot;;\n            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\n            try{\n                while ((line = reader.readLine()) != null){\n\n                    if(line.equalsIgnoreCase(&quot;exit&quot;)){\n                        if(shardMan != null){\n                            shardMan.setStatus(OnlineStatus.OFFLINE);\n                            shardMan.shutdown();\n                            System.out.println(&quot;Bot ist offline!&quot;);\n\n                        }\n                    }\n                }\n            }catch (IOException e){\n                e.printStackTrace();\n            }\n        }).start();\n    }\n\n    public void listeners(DefaultShardManagerBuilder builder){\n        builder.addEventListeners(new RollenAdd());\n    }\n}\n</code></pre>\n<p>I think that's all that has to do with it...</p>\n<p>At first I thought it was because the Privileged Gateway Intents were not activated in the DiscordDeveloperPortal, but after that it still didn't work</p>\n"},{"tags":["java","swing","jpanel","jlabel","imageicon"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1639427800,"post_id":70340571,"comment_id":124341462,"body_markdown":"`panel.setLayout(null);` is not helping your cause.","body":"<code>panel.setLayout(null);</code> is not helping your cause."},{"owner":{"account_id":23638001,"reputation":11,"user_id":17668726,"display_name":"just_a_beginner"},"score":0,"creation_date":1639428310,"post_id":70340571,"comment_id":124341640,"body_markdown":"@MadProgrammer trust me it is haha, i tried to get rid of it and the output went mad","body":"@MadProgrammer trust me it is haha, i tried to get rid of it and the output went mad"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1639429160,"post_id":70340571,"comment_id":124341893,"body_markdown":"Trust me (said some stranger on the internet &#128521;), it&#39;s not you helping in the slightest, the fact is you simply don&#39;t understand how the layout manager system in Swing works. See [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) for more details","body":"Trust me (said some stranger on the internet 😉), it&#39;s not you helping in the slightest, the fact is you simply don&#39;t understand how the layout manager system in Swing works. See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> for more details"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639429081,"creation_date":1639429081,"answer_id":70340843,"question_id":70340571,"body_markdown":"`null` or &quot;pixel perfect&quot; layouts are an illusion.  There are so many factors which go into determining the best size/position and relationship of components, you&#39;d spend a live time trying to make it work properly ever time on every platform.\r\n\r\nInstead, make use of all the work which has already been done, see [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) for more details.\r\n\r\n`ImageIcon(String)` is expecting to find a file on the disk at the location you&#39;ve specified.  Since you&#39;re using a relative path, this will be offset from the &quot;working&quot; location of the app (that is, the directory is was launched from).\r\n\r\nIn cases where the image &quot;doesn&#39;t appear to be loading&quot;, I&#39;d consider using something like `System.out.println(new File(&quot;kenya.png&quot;).exists());`, this will give you a good indication whether the issue is with the image file itself or the image file can&#39;t be found within the current context.\r\n\r\nIf you want to know what the current working directory is, you can use something like `System.out.println(System.getProperty(&quot;user.dir&quot;));`\r\n\r\n`ImageIcon` will also attempt to load the image in a background thread, meaning that if it fails, it will do so silently.  For this (and a few other) reasons, I prefer to use `ImageIO.read`, see [Reading/Loading an Image](https://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)\r\n\r\nNow, one way to overcome this issue with external files, is to &quot;embed&quot; them within the application context directly.  Generally this is done by having them included in the resulting Jar.  Depending you build system and IDE, you should be able to add images to a &quot;location&quot; within the project, which will make them easily available during development and automatically include them in the Jar when it&#39;s exported.  \r\n\r\nIn Netbeans (using an Ant based project), you can simply drop the resources into the `src` directory.\r\n\r\nOnce they are &quot;embedded&quot;, you can no longer treat them as files, instead, you need to make use of `Class#getResource` or `Class#getResourceAsStream` depending on your needs\r\n\r\nFor example...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBYO own images (I shouldn&#39;t have to say this, but you&#39;d be surprised).\r\n\r\nI&#39;ve also deliberately set the number of columns to 3 so that the &quot;highlighting&quot; shows up better.\r\n\r\n    import java.awt.Color;\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.GridLayout;\r\n    import java.awt.Image;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.IOException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n\r\n    public class Test {\r\n\r\n        public static void main(String[] args) {\r\n            new Test();\r\n        }\r\n\r\n        public Test() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        JFrame frame = new JFrame();\r\n                        frame.add(new TestPane());\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() throws IOException {\r\n                setLayout(new GridLayout(-1, 3));\r\n                for (int index = 0; index &lt; 8; index++) {\r\n                    BufferedImage img = ImageIO.read(getClass().getResource(&quot;/images/Cute&quot; + (index + 1) + &quot;.png&quot;));\r\n                    JLabel label = new JLabel(new ImageIcon(img.getScaledInstance(-1, 50, Image.SCALE_SMOOTH)));\r\n                    JPanel panel = new JPanel(new GridBagLayout());\r\n                    panel.add(label);\r\n                    if (index % 2 == 0) {\r\n                        panel.setBackground(Color.DARK_GRAY);\r\n                    }\r\n                    add(panel);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LNrg6.png\r\n\r\nNow, if you want the images to be selectable, then you should consider using a [`JList`](https://docs.oracle.com/javase/tutorial/uiswing/components/list.html) instead, this can support columns and rows (it defaults to a single column)\r\n\r\nIf you prefer to have the images listed in a single column (for the above example), then change the number of columns the `GridLayout` is using, much simpler then trying to manually recalculate the positions yourself &#128521;\r\n\r\n`Image#setScaledInstance` is neither efficient or pretty, see\r\n\r\n* https://stackoverflow.com/questions/14115950/quality-of-image-after-resize-very-low-java/14116752#14116752\r\n* https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928\r\n\r\nfor more details","title":"I need help inserting an image to a JPanel in java,","body":"<p><code>null</code> or &quot;pixel perfect&quot; layouts are an illusion.  There are so many factors which go into determining the best size/position and relationship of components, you'd spend a live time trying to make it work properly ever time on every platform.</p>\n<p>Instead, make use of all the work which has already been done, see <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> for more details.</p>\n<p><code>ImageIcon(String)</code> is expecting to find a file on the disk at the location you've specified.  Since you're using a relative path, this will be offset from the &quot;working&quot; location of the app (that is, the directory is was launched from).</p>\n<p>In cases where the image &quot;doesn't appear to be loading&quot;, I'd consider using something like <code>System.out.println(new File(&quot;kenya.png&quot;).exists());</code>, this will give you a good indication whether the issue is with the image file itself or the image file can't be found within the current context.</p>\n<p>If you want to know what the current working directory is, you can use something like <code>System.out.println(System.getProperty(&quot;user.dir&quot;));</code></p>\n<p><code>ImageIcon</code> will also attempt to load the image in a background thread, meaning that if it fails, it will do so silently.  For this (and a few other) reasons, I prefer to use <code>ImageIO.read</code>, see <a href=\"https://docs.oracle.com/javase/tutorial/2d/images/loadimage.html\" rel=\"nofollow noreferrer\">Reading/Loading an Image</a></p>\n<p>Now, one way to overcome this issue with external files, is to &quot;embed&quot; them within the application context directly.  Generally this is done by having them included in the resulting Jar.  Depending you build system and IDE, you should be able to add images to a &quot;location&quot; within the project, which will make them easily available during development and automatically include them in the Jar when it's exported.</p>\n<p>In Netbeans (using an Ant based project), you can simply drop the resources into the <code>src</code> directory.</p>\n<p>Once they are &quot;embedded&quot;, you can no longer treat them as files, instead, you need to make use of <code>Class#getResource</code> or <code>Class#getResourceAsStream</code> depending on your needs</p>\n<p>For example...</p>\n<p><a href=\"https://i.stack.imgur.com/LNrg6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LNrg6.png\" alt=\"enter image description here\" /></a></p>\n<p>BYO own images (I shouldn't have to say this, but you'd be surprised).</p>\n<p>I've also deliberately set the number of columns to 3 so that the &quot;highlighting&quot; shows up better.</p>\n<pre><code>import java.awt.Color;\nimport java.awt.EventQueue;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        new Test();\n    }\n\n    public Test() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    JFrame frame = new JFrame();\n                    frame.add(new TestPane());\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                } catch (IOException ex) {\n                    Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() throws IOException {\n            setLayout(new GridLayout(-1, 3));\n            for (int index = 0; index &lt; 8; index++) {\n                BufferedImage img = ImageIO.read(getClass().getResource(&quot;/images/Cute&quot; + (index + 1) + &quot;.png&quot;));\n                JLabel label = new JLabel(new ImageIcon(img.getScaledInstance(-1, 50, Image.SCALE_SMOOTH)));\n                JPanel panel = new JPanel(new GridBagLayout());\n                panel.add(label);\n                if (index % 2 == 0) {\n                    panel.setBackground(Color.DARK_GRAY);\n                }\n                add(panel);\n            }\n        }\n\n    }\n}\n</code></pre>\n<p>Now, if you want the images to be selectable, then you should consider using a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/list.html\" rel=\"nofollow noreferrer\"><code>JList</code></a> instead, this can support columns and rows (it defaults to a single column)</p>\n<p>If you prefer to have the images listed in a single column (for the above example), then change the number of columns the <code>GridLayout</code> is using, much simpler then trying to manually recalculate the positions yourself 😉</p>\n<p><code>Image#setScaledInstance</code> is neither efficient or pretty, see</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/14115950/quality-of-image-after-resize-very-low-java/14116752#14116752\">Quality of Image after resize very low -- Java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928\">Java: maintaining aspect ratio of JPanel background image</a></li>\n</ul>\n<p>for more details</p>\n"}],"owner":{"account_id":23638001,"reputation":11,"user_id":17668726,"display_name":"just_a_beginner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639431948,"creation_date":1639427541,"question_id":70340571,"body_markdown":"\r\n\r\n\r\nthis is the code that i wrote, it didn&#39;t result in no image output the panel was just empty\r\nmy goal is to have a frame with 8 panels with each panel containing a picture \r\n\r\n          ImageIcon image1 = new ImageIcon(&quot;kenya.png&quot;);\r\n           Image ken = image1.getImage();   \r\n           Image kenya = ken.getScaledInstance(200,100,java.awt.Image.SCALE_FAST);\r\n           image1 = new ImageIcon(kenya);\r\n           \r\n         JFrame frame = new JFrame(&quot;Ticket airline system&quot;);\r\n        frame.setVisible(true);\r\n        frame.setSize(1800,1000);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        JPanel panel = new JPanel();\r\n        panel.setBackground(new Color(200,250,255)); \r\n        panel.setSize(1800,1000);\r\n        panel.setLayout(null);\r\n        panel.setBounds (0,0,1800,1000); \r\n        JPanel panel1 = new JPanel();\r\n        panel1.setBounds(0,140,300,280);\r\n        panel1.setLayout(null);\r\n        JLabel label1 = new JLabel();\r\n        label1.setSize(200,180);\r\n        \r\n        label1.setIcon(image1); \r\n        panel1.add(label1);\r\n        panel.add(panel1);\r\n       frame.add(panel);","title":"I need help inserting an image to a JPanel in java,","body":"<p>this is the code that i wrote, it didn't result in no image output the panel was just empty\nmy goal is to have a frame with 8 panels with each panel containing a picture</p>\n<pre><code>      ImageIcon image1 = new ImageIcon(&quot;kenya.png&quot;);\n       Image ken = image1.getImage();   \n       Image kenya = ken.getScaledInstance(200,100,java.awt.Image.SCALE_FAST);\n       image1 = new ImageIcon(kenya);\n       \n     JFrame frame = new JFrame(&quot;Ticket airline system&quot;);\n    frame.setVisible(true);\n    frame.setSize(1800,1000);\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    JPanel panel = new JPanel();\n    panel.setBackground(new Color(200,250,255)); \n    panel.setSize(1800,1000);\n    panel.setLayout(null);\n    panel.setBounds (0,0,1800,1000); \n    JPanel panel1 = new JPanel();\n    panel1.setBounds(0,140,300,280);\n    panel1.setLayout(null);\n    JLabel label1 = new JLabel();\n    label1.setSize(200,180);\n    \n    label1.setIcon(image1); \n    panel1.add(label1);\n    panel.add(panel1);\n   frame.add(panel);\n</code></pre>\n"},{"tags":["java","hashmap","java-stream"],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639424146,"creation_date":1639424146,"answer_id":70340029,"question_id":70339801,"body_markdown":"The stream syntax here is a bit too much\r\n\r\n```java\r\nitemIDToCustoms = itemIDToCustoms.entrySet().stream().collect(Collectors.toMap(e -&gt; e.getKey(),\r\n            e -&gt; e.getValue().stream().filter(val -&gt; val.createdTS &gt; itemIDToFilterAfterTS.get(e.getKey())).collect(Collectors.toList())));\r\n```\r\n\r\nMore readable with a for loop + stream\r\n\r\n```java\r\nfor (Map.Entry&lt;String, List&lt;Custom&gt;&gt; e : itemIDToCustoms.entrySet()) {\r\n    long limit = itemIDToFilterAfterTS.get(e.getKey());\r\n    List&lt;Custom&gt; newValue = e.getValue().stream().filter(val -&gt; val.createdTS &gt; limit).collect(Collectors.toList());\r\n    itemIDToCustoms.put(e.getKey(), newValue);\r\n}\r\n```","title":"Filter Map&lt;String,List&lt;Object&gt;&gt; Using Java Streams","body":"<p>The stream syntax here is a bit too much</p>\n<pre class=\"lang-java prettyprint-override\"><code>itemIDToCustoms = itemIDToCustoms.entrySet().stream().collect(Collectors.toMap(e -&gt; e.getKey(),\n            e -&gt; e.getValue().stream().filter(val -&gt; val.createdTS &gt; itemIDToFilterAfterTS.get(e.getKey())).collect(Collectors.toList())));\n</code></pre>\n<p>More readable with a for loop + stream</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Map.Entry&lt;String, List&lt;Custom&gt;&gt; e : itemIDToCustoms.entrySet()) {\n    long limit = itemIDToFilterAfterTS.get(e.getKey());\n    List&lt;Custom&gt; newValue = e.getValue().stream().filter(val -&gt; val.createdTS &gt; limit).collect(Collectors.toList());\n    itemIDToCustoms.put(e.getKey(), newValue);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4514444,"reputation":17059,"user_id":3669698,"accept_rate":55,"display_name":"Hadi J"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639431326,"creation_date":1639431326,"answer_id":70341217,"question_id":70339801,"body_markdown":"You can use `Map#computeIfPresent` method like this:\r\n\r\nwhich allows you to compute value of a mapping for specified key if key is already associated with a value \r\n\r\n\r\n    public Object computeIfPresent(Object key,BiFunction remappingFunction)\r\n\r\n\r\nSo you can perform it like: \r\n\r\n\r\n    itemIDToFilterAfterTS.forEach((key, value) -&gt;\r\n                itemIDToCustoms.computeIfPresent(key, (s, customs) -&gt; customs.stream()\r\n                        .filter(c -&gt; c.getCreatedTS() &gt; value)\r\n                        .collect(Collectors.toList())));","title":"Filter Map&lt;String,List&lt;Object&gt;&gt; Using Java Streams","body":"<p>You can use <code>Map#computeIfPresent</code> method like this:</p>\n<p>which allows you to compute value of a mapping for specified key if key is already associated with a value</p>\n<pre><code>public Object computeIfPresent(Object key,BiFunction remappingFunction)\n</code></pre>\n<p>So you can perform it like:</p>\n<pre><code>itemIDToFilterAfterTS.forEach((key, value) -&gt;\n            itemIDToCustoms.computeIfPresent(key, (s, customs) -&gt; customs.stream()\n                    .filter(c -&gt; c.getCreatedTS() &gt; value)\n                    .collect(Collectors.toList())));\n</code></pre>\n"}],"owner":{"account_id":23637351,"reputation":51,"user_id":17668182,"display_name":"rahulpareekyx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1729,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70340029,"answer_count":2,"score":0,"last_activity_date":1639431877,"creation_date":1639422855,"question_id":70339801,"body_markdown":"``` lang-java\r\nclass Custom{\r\n   String itemId,\r\n   long createdTS\r\n   //constructor\r\n   public Custom(String itemId,long createdTS)\r\n}\r\n```\r\nI have two maps which are\r\n```\r\nMap&lt;String,Long&gt; itemIDToFilterAfterTS;\r\nMap&lt;String,List&lt;Custom&gt;&gt; itemIDToCustoms;\r\n```\r\nI want to filter 2nd map itemIDToCustoms values using 1st map itemIDToTimestampMap value for item using java streams. \r\neg. \r\n``` lang-java\r\nitemIDToFilterAfterTS = new HashMap();\r\nitemIDToFilterAfterTS.put(&quot;1&quot;,100);\r\nitemIDToFilterAfterTS.put(&quot;2&quot;,200);\r\nitemIDToFilterAfterTS.put(&quot;3&quot;,300);\r\n\r\nitemIDToCustoms = new HashMap();\r\nList&lt;Custom&gt; listToFilter = new ArrayList();\r\nlistToFilter.add(new Custom(&quot;1&quot;,50));\r\nlistToFilter.add(new Custom(&quot;1&quot;,90));\r\nlistToFilter.add(new Custom(&quot;1&quot;,120));\r\nlistToFilter.add(new Custom(&quot;1&quot;,130));\r\nitemIDToCustoms.put(&quot;1&quot;,listToFilter)\r\n```\r\nNow I want to use java streams and want the filtered result map for which getKey(&quot;1&quot;) gives filtered list of Custom object which has createdTS &gt; 100 (100 will be fetched from itemIDToFilterAfterTS.getKey(&quot;1&quot;))\r\n\r\n```\r\nMap&lt;String,List&lt;Custom&gt;&gt; filteredResult will be \r\nMap{\r\n   &quot;1&quot; : List of (Custom(&quot;1&quot;,120),Custom(&quot;1&quot;,130))\r\n}  \r\n```","title":"Filter Map&lt;String,List&lt;Object&gt;&gt; Using Java Streams","body":"<pre class=\"lang-java prettyprint-override\"><code>class Custom{\n   String itemId,\n   long createdTS\n   //constructor\n   public Custom(String itemId,long createdTS)\n}\n</code></pre>\n<p>I have two maps which are</p>\n<pre><code>Map&lt;String,Long&gt; itemIDToFilterAfterTS;\nMap&lt;String,List&lt;Custom&gt;&gt; itemIDToCustoms;\n</code></pre>\n<p>I want to filter 2nd map itemIDToCustoms values using 1st map itemIDToTimestampMap value for item using java streams.\neg.</p>\n<pre class=\"lang-java prettyprint-override\"><code>itemIDToFilterAfterTS = new HashMap();\nitemIDToFilterAfterTS.put(&quot;1&quot;,100);\nitemIDToFilterAfterTS.put(&quot;2&quot;,200);\nitemIDToFilterAfterTS.put(&quot;3&quot;,300);\n\nitemIDToCustoms = new HashMap();\nList&lt;Custom&gt; listToFilter = new ArrayList();\nlistToFilter.add(new Custom(&quot;1&quot;,50));\nlistToFilter.add(new Custom(&quot;1&quot;,90));\nlistToFilter.add(new Custom(&quot;1&quot;,120));\nlistToFilter.add(new Custom(&quot;1&quot;,130));\nitemIDToCustoms.put(&quot;1&quot;,listToFilter)\n</code></pre>\n<p>Now I want to use java streams and want the filtered result map for which getKey(&quot;1&quot;) gives filtered list of Custom object which has createdTS &gt; 100 (100 will be fetched from itemIDToFilterAfterTS.getKey(&quot;1&quot;))</p>\n<pre><code>Map&lt;String,List&lt;Custom&gt;&gt; filteredResult will be \nMap{\n   &quot;1&quot; : List of (Custom(&quot;1&quot;,120),Custom(&quot;1&quot;,130))\n}  \n</code></pre>\n"},{"tags":["java","css","javafx","border"],"owner":{"account_id":9943660,"reputation":21,"user_id":7359320,"display_name":"JJohn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1289,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1639431518,"creation_date":1489307213,"question_id":42745302,"body_markdown":"I am trying to make an XP styled minesweeper application using javaFX. The last thing i need is a way to get the sunken border effect. \r\nI tried using CSS but I had no luck.\r\nI attached a image of the minesweeper border that I want, as well as a the border in CSS (which unfortunately didnt work with FX).\r\nThe only thing i couldnt generate was how the two colors come together at the corner. How they come together on a diagonal. \r\nAny suggestions on how to do this would be greatly appreciated.\r\n\r\n[![CSS generated][1]][1]\r\n\r\n[![Minesweeper sunken board]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/r5TKQ.png\r\n  [2]: https://i.stack.imgur.com/tS2TK.png","title":"Inset and Outset JavaFX Border Style","body":"<p>I am trying to make an XP styled minesweeper application using javaFX. The last thing i need is a way to get the sunken border effect. \nI tried using CSS but I had no luck.\nI attached a image of the minesweeper border that I want, as well as a the border in CSS (which unfortunately didnt work with FX).\nThe only thing i couldnt generate was how the two colors come together at the corner. How they come together on a diagonal. \nAny suggestions on how to do this would be greatly appreciated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/r5TKQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r5TKQ.png\" alt=\"CSS generated\"></a></p>\n\n<p>[<img src=\"https://i.stack.imgur.com/tS2TK.png\" alt=\"Minesweeper sunken board]\"></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1639159827,"post_id":70308713,"comment_id":124286012,"body_markdown":"If that native library really must be loaded, regardless of which class is used, then putting `static { loadSoFromMyJar(); }` into every class *is* feasible. It’s not different to putting `extends WhatEver` into every class, except the latter has serious drawbacks.","body":"If that native library really must be loaded, regardless of which class is used, then putting <code>static { loadSoFromMyJar(); }</code> into every class <i>is</i> feasible. It’s not different to putting <code>extends WhatEver</code> into every class, except the latter has serious drawbacks."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1639160709,"post_id":70308713,"comment_id":124286301,"body_markdown":"How is your library loaded in the application? Are you planning to create `jar` files? Is there some kind of plugin system you wrote?","body":"How is your library loaded in the application? Are you planning to create <code>jar</code> files? Is there some kind of plugin system you wrote?"},{"owner":{"account_id":2210105,"reputation":1460,"user_id":6655884,"accept_rate":50,"display_name":"PPP"},"score":0,"creation_date":1639398054,"post_id":70308713,"comment_id":124330366,"body_markdown":"@Holger which drawbacks?","body":"@Holger which drawbacks?"},{"owner":{"account_id":2210105,"reputation":1460,"user_id":6655884,"accept_rate":50,"display_name":"PPP"},"score":0,"creation_date":1639398079,"post_id":70308713,"comment_id":124330378,"body_markdown":"@Progman it could be loaded in any way. Could be in a .jar file, or be used in another project in another way","body":"@Progman it could be loaded in any way. Could be in a .jar file, or be used in another project in another way"},{"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"score":1,"creation_date":1639398490,"post_id":70308713,"comment_id":124330520,"body_markdown":"A serious drawback of `extends Whatever` is that the class cannot extend any other class.","body":"A serious drawback of <code>extends Whatever</code> is that the class cannot extend any other class."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1639470050,"post_id":70308713,"comment_id":124350179,"body_markdown":"I would just define an initiatialization method and require that the application calls it before using the library.","body":"I would just define an initiatialization method and require that the application calls it before using the library."}],"answers":[{"tags":[],"owner":{"account_id":5203,"reputation":15153,"user_id":8261,"accept_rate":78,"display_name":"Rich"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639431471,"creation_date":1639431471,"answer_id":70341245,"question_id":70308713,"body_markdown":"Make `loadSoFromMyJar` idempotent and add it in a static initialiser on all classes with `native` members.","title":"How to automatically load .so/.dll from any class in a java project?","body":"<p>Make <code>loadSoFromMyJar</code> idempotent and add it in a static initialiser on all classes with <code>native</code> members.</p>\n"}],"owner":{"account_id":2210105,"reputation":1460,"user_id":6655884,"accept_rate":50,"display_name":"PPP"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1639431471,"creation_date":1639159627,"question_id":70308713,"body_markdown":"Suppose I&#39;m doing a java library that has to load a .so/.dll at its initialization, but I don&#39;t know which classes the user will use, so I cannot simply put \r\n\r\n    static{\r\n        loadSoFromMyJar();\r\n    }\r\n\r\non the one that is gonna be used.\r\n\r\nThe easiest solution I thought was by doing it in a class and subclassing all the classes from this one, but I also think this is not the best solution.\r\n\r\nWhat would be a good solution here?","title":"How to automatically load .so/.dll from any class in a java project?","body":"<p>Suppose I'm doing a java library that has to load a .so/.dll at its initialization, but I don't know which classes the user will use, so I cannot simply put</p>\n<pre><code>static{\n    loadSoFromMyJar();\n}\n</code></pre>\n<p>on the one that is gonna be used.</p>\n<p>The easiest solution I thought was by doing it in a class and subclassing all the classes from this one, but I also think this is not the best solution.</p>\n<p>What would be a good solution here?</p>\n"},{"tags":["java","accessibility"],"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1639305804,"post_id":70322780,"comment_id":124310548,"body_markdown":"Does it have to be a screen reader or would using any text-to-speech concept help?","body":"Does it have to be a screen reader or would using any text-to-speech concept help?"},{"owner":{"account_id":23554736,"reputation":23,"user_id":17596905,"display_name":"Alcor717"},"score":0,"creation_date":1639308624,"post_id":70322780,"comment_id":124311115,"body_markdown":"Well, I don&#39;t discard the option of adding tts support but I&#39;d preffer to focus on screen readers as that&#39;s what blind people like the most, or at least that&#39;s what I like as a blind gamer. That being said, I&#39;d accept using tts voices as a last resource.","body":"Well, I don&#39;t discard the option of adding tts support but I&#39;d preffer to focus on screen readers as that&#39;s what blind people like the most, or at least that&#39;s what I like as a blind gamer. That being said, I&#39;d accept using tts voices as a last resource."}],"answers":[{"tags":[],"owner":{"account_id":2234417,"reputation":12839,"user_id":1971216,"accept_rate":83,"display_name":"QuentinC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639431134,"creation_date":1639430465,"answer_id":70341059,"question_id":70322780,"body_markdown":"### Using screen reader is better than separate TTS\r\n\r\nAS a blind person myself, I can effectively confirm that, it&#39;s better to make the screen reader speak rather than using a separate TTS engine.\r\nThe advantages include:\r\n\r\n- Text is spoken using the voice already configured by the user\r\n- You are certain to never have the very annoying problem of two voices speaking at the same time (the screen reader and the TTS)\r\n\r\nWhen using a separate TTS engine, the voice used can dramatically differ from user settings, and in particular, can be speaking in the wrong language, far too slow, or far too fast.\r\n\r\n### Make the screen reader speak on the web\r\n\r\nON the web, making the screen reader speak some text is achieved with [ARIA live region](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)\r\n\r\n### Make the screen reader speak in a desktop or native application\r\n\r\nFor a desktop or native application, basically, there exist as many different API as there are screen readers. There is no common standard at all. \r\nYou must detect the screen reader used if any, and then communicate with it using its specific API.\r\n\r\nFortunately, there are library which helps you doing that:\r\n\r\n- I&#39;m the author of one of them, [UniversalSpeech](http://github.com/qtnc/UniversalSpeech) (7 screen readers supported under windows only)\r\n- There exist another one, [tolk](https://github.com/dkager/tolk) (6 screen readers supported under windows only)\r\n- For python 3, you also have Accessible Output 2\r\n\r\nNote that several UI toolkits for desktop/native applications also implement something quite similar to ARIA live regions. If the text to be spoken has also to be displayed in the same time, you should preferably use that rather than libraries listed above. It is supported by all reasonably recent screen readers. Note that, ARIA live regions and similar systems are usually slightly slower than calling screen readers API directly though; it may be significant for a game.","title":"How can I tell a screen reader to speak arbitrary text?","body":"<h3>Using screen reader is better than separate TTS</h3>\n<p>AS a blind person myself, I can effectively confirm that, it's better to make the screen reader speak rather than using a separate TTS engine.\nThe advantages include:</p>\n<ul>\n<li>Text is spoken using the voice already configured by the user</li>\n<li>You are certain to never have the very annoying problem of two voices speaking at the same time (the screen reader and the TTS)</li>\n</ul>\n<p>When using a separate TTS engine, the voice used can dramatically differ from user settings, and in particular, can be speaking in the wrong language, far too slow, or far too fast.</p>\n<h3>Make the screen reader speak on the web</h3>\n<p>ON the web, making the screen reader speak some text is achieved with <a href=\"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions\" rel=\"nofollow noreferrer\">ARIA live region</a></p>\n<h3>Make the screen reader speak in a desktop or native application</h3>\n<p>For a desktop or native application, basically, there exist as many different API as there are screen readers. There is no common standard at all.\nYou must detect the screen reader used if any, and then communicate with it using its specific API.</p>\n<p>Fortunately, there are library which helps you doing that:</p>\n<ul>\n<li>I'm the author of one of them, <a href=\"http://github.com/qtnc/UniversalSpeech\" rel=\"nofollow noreferrer\">UniversalSpeech</a> (7 screen readers supported under windows only)</li>\n<li>There exist another one, <a href=\"https://github.com/dkager/tolk\" rel=\"nofollow noreferrer\">tolk</a> (6 screen readers supported under windows only)</li>\n<li>For python 3, you also have Accessible Output 2</li>\n</ul>\n<p>Note that several UI toolkits for desktop/native applications also implement something quite similar to ARIA live regions. If the text to be spoken has also to be displayed in the same time, you should preferably use that rather than libraries listed above. It is supported by all reasonably recent screen readers. Note that, ARIA live regions and similar systems are usually slightly slower than calling screen readers API directly though; it may be significant for a game.</p>\n"}],"owner":{"account_id":23554736,"reputation":23,"user_id":17596905,"display_name":"Alcor717"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70341059,"answer_count":1,"score":-1,"last_activity_date":1639431134,"creation_date":1639305487,"question_id":70322780,"body_markdown":"I am developing a game with swing and I would like to display some information when a key is pressed, for instance the health of the character. Is there a way in which a screen reader could read this information without moving the focus and therefore interrupting the game?\r\nThank you in advance.","title":"How can I tell a screen reader to speak arbitrary text?","body":"<p>I am developing a game with swing and I would like to display some information when a key is pressed, for instance the health of the character. Is there a way in which a screen reader could read this information without moving the focus and therefore interrupting the game?\nThank you in advance.</p>\n"},{"tags":["java","filter","lambda","hashmap"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1639420587,"post_id":70339368,"comment_id":124339302,"body_markdown":"You forgot to ask an actual question. Please [edit] the post, add a [MRE], input, as well as the full stack trace and clarify your question.","body":"You forgot to ask an actual question. Please <a href=\"https://stackoverflow.com/posts/70339368/edit\">edit</a> the post, add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, input, as well as the full stack trace and clarify your question."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1639430880,"post_id":70339368,"comment_id":124342381,"body_markdown":"Why did you remove the stack trace from your question?","body":"Why did you remove the stack trace from your question?"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639422811,"creation_date":1639422811,"answer_id":70339789,"question_id":70339368,"body_markdown":"First, you should add null checks before validating code.  Second, it may be better to use `Objects::equals` as it is null-safe:\r\n```java\r\ndata.entrySet()\r\n    .stream()\r\n    .filter(e -&gt; Objects.nonNull(e.getValue())\r\n        &amp;&amp; e.getValue().stream().anyMatch(l -&gt; Objects.equals(code, l.id))\r\n    )\r\n    .collect(Collectors.toMap(\r\n        Map.Entry::getKey,\r\n        Map.Entry::getValue\r\n    ));\r\n```\r\n","title":"filter with map throws null pointer exception if one of the object has null values in Java","body":"<p>First, you should add null checks before validating code.  Second, it may be better to use <code>Objects::equals</code> as it is null-safe:</p>\n<pre class=\"lang-java prettyprint-override\"><code>data.entrySet()\n    .stream()\n    .filter(e -&gt; Objects.nonNull(e.getValue())\n        &amp;&amp; e.getValue().stream().anyMatch(l -&gt; Objects.equals(code, l.id))\n    )\n    .collect(Collectors.toMap(\n        Map.Entry::getKey,\n        Map.Entry::getValue\n    ));\n</code></pre>\n"}],"owner":{"account_id":17810519,"reputation":81,"user_id":12935259,"display_name":"Bravo "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1639431896,"accepted_answer_id":70339789,"answer_count":1,"score":0,"last_activity_date":1639430863,"creation_date":1639420361,"question_id":70339368,"body_markdown":"I am trying to iterate my map and filter out its a list using this method but if I don&#39;t have value available for that property(**id**) it throws a null pointer exception in Java. \r\n\r\nHow I can filter in such a way that it iterates my hashmap and filter out the value if the id matches with the given code?\r\n\r\n    data.entrySet().stream()\r\n           .filter(a -&gt; a.getValue().stream()\r\n               .anyMatch(l-&gt;l.id.equals(code)))\r\n            .collect(Collectors.toMap(\r\n                 e -&gt; e.getKey(),\r\n                 e -&gt; e.getValue()));\r\n\r\n\r\nStacktrace:\r\n\r\n    java.lang.NullPointerException\r\n\r\n","title":"filter with map throws null pointer exception if one of the object has null values in Java","body":"<p>I am trying to iterate my map and filter out its a list using this method but if I don't have value available for that property(<strong>id</strong>) it throws a null pointer exception in Java.</p>\n<p>How I can filter in such a way that it iterates my hashmap and filter out the value if the id matches with the given code?</p>\n<pre><code>data.entrySet().stream()\n       .filter(a -&gt; a.getValue().stream()\n           .anyMatch(l-&gt;l.id.equals(code)))\n        .collect(Collectors.toMap(\n             e -&gt; e.getKey(),\n             e -&gt; e.getValue()));\n</code></pre>\n<p>Stacktrace:</p>\n<pre><code>java.lang.NullPointerException\n</code></pre>\n"},{"tags":["java","spring","spring-boot","gemfire","spring-data-gemfire"],"answers":[{"tags":[],"owner":{"account_id":4133097,"reputation":7506,"user_id":3390417,"display_name":"John Blum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639430646,"creation_date":1639430646,"answer_id":70341090,"question_id":70332981,"body_markdown":"Have a look at and read ***Spring Boot for Apache Geode*** [Issue #78][1].  This question has been answered there.\r\n\r\nAlso, specifically look at/read my last [comment][2].\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot-data-geode/issues/110\r\n  [2]: https://github.com/spring-projects/spring-boot-data-geode/issues/110#issuecomment-992923201","title":"Compatibility of SBDG with VMWare Tanzu Gemfire","body":"<p>Have a look at and read <em><strong>Spring Boot for Apache Geode</strong></em> <a href=\"https://github.com/spring-projects/spring-boot-data-geode/issues/110\" rel=\"nofollow noreferrer\">Issue #78</a>.  This question has been answered there.</p>\n<p>Also, specifically look at/read my last <a href=\"https://github.com/spring-projects/spring-boot-data-geode/issues/110#issuecomment-992923201\" rel=\"nofollow noreferrer\">comment</a>.</p>\n"}],"owner":{"account_id":23632765,"reputation":1,"user_id":17664261,"display_name":"chocs12345"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639430646,"creation_date":1639390370,"question_id":70332981,"body_markdown":"The latest version of VMWare Tanzu Gemfire is currently 9.10.12, which is based on Apache Geode 1.12. However, from the [compatibility matrix][1], it seems like the compatible SBDG version 1.3.x has already reached EOL.\r\n\r\nI read [here][2] that later versions of Geode clients are not compatible with older versions of Geode servers. Does it mean that if we are using VMWare Tanzu Gemfire, we would be restricted to SBDG 1.3.x and Spring Boot 2.3.x, which are no longer under OSS Support? Is there any way of using  Spring Boot versions (2.5.x and 2.6.x) that is still under OSS support with Gemfire, or is migrating to Apache Geode the only solution?\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot-data-geode/wiki/Spring-Boot-for-Apache-Geode-and-VMware-Tanzu-GemFire-Version-Compatibility-Matrix\r\n  [2]: https://stackoverflow.com/questions/66016442/spring-boot-geode-unsatisfied-dependency-expressed-through-method-sessionregion/66020141#66020141\r\n","title":"Compatibility of SBDG with VMWare Tanzu Gemfire","body":"<p>The latest version of VMWare Tanzu Gemfire is currently 9.10.12, which is based on Apache Geode 1.12. However, from the <a href=\"https://github.com/spring-projects/spring-boot-data-geode/wiki/Spring-Boot-for-Apache-Geode-and-VMware-Tanzu-GemFire-Version-Compatibility-Matrix\" rel=\"nofollow noreferrer\">compatibility matrix</a>, it seems like the compatible SBDG version 1.3.x has already reached EOL.</p>\n<p>I read <a href=\"https://stackoverflow.com/questions/66016442/spring-boot-geode-unsatisfied-dependency-expressed-through-method-sessionregion/66020141#66020141\">here</a> that later versions of Geode clients are not compatible with older versions of Geode servers. Does it mean that if we are using VMWare Tanzu Gemfire, we would be restricted to SBDG 1.3.x and Spring Boot 2.3.x, which are no longer under OSS Support? Is there any way of using  Spring Boot versions (2.5.x and 2.6.x) that is still under OSS support with Gemfire, or is migrating to Apache Geode the only solution?</p>\n"},{"tags":["java","rest","jakarta-ee","keycloak","keycloak-services"],"answers":[{"tags":[],"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532604233,"creation_date":1532604233,"answer_id":51537657,"question_id":51521958,"body_markdown":"The [Keycloak Java adapters][1] are focused in usage rather than configuration. You&#39;ll need to implement yourself making the necessary calls with the required parameters. There&#39;s one tool for that kind of thins, the [admin-cli][2], but I think it won&#39;t be useful for your case.\r\n\r\n\r\n  [1]: https://www.keycloak.org/docs/latest/securing_apps/index.html#java-adapters\r\n  [2]: https://www.keycloak.org/docs/latest/server_admin/index.html#the-admin-cli","title":"KeyCloak - Create Realms/Users/Groups Programmatically?","body":"<p>The <a href=\"https://www.keycloak.org/docs/latest/securing_apps/index.html#java-adapters\" rel=\"nofollow noreferrer\">Keycloak Java adapters</a> are focused in usage rather than configuration. You'll need to implement yourself making the necessary calls with the required parameters. There's one tool for that kind of thins, the <a href=\"https://www.keycloak.org/docs/latest/server_admin/index.html#the-admin-cli\" rel=\"nofollow noreferrer\">admin-cli</a>, but I think it won't be useful for your case.</p>\n"},{"tags":[],"owner":{"account_id":131613,"reputation":11356,"user_id":331747,"accept_rate":78,"display_name":"Shadowman"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1533565770,"creation_date":1533565770,"answer_id":51709957,"question_id":51521958,"body_markdown":"I found some info around the [KeyCloak Java Admin Client][1].  [This gist][2] has lots of useful examples showing how to managed users, realms, etc.\r\n\r\n\r\n  [1]: https://www.n-k.de/2016/08/keycloak-admin-client.html\r\n  [2]: https://gist.github.com/sdnakhla/c3e5597ca005bd7a2ac23ec51309a0ce","title":"KeyCloak - Create Realms/Users/Groups Programmatically?","body":"<p>I found some info around the <a href=\"https://www.n-k.de/2016/08/keycloak-admin-client.html\" rel=\"noreferrer\">KeyCloak Java Admin Client</a>.  <a href=\"https://gist.github.com/sdnakhla/c3e5597ca005bd7a2ac23ec51309a0ce\" rel=\"noreferrer\">This gist</a> has lots of useful examples showing how to managed users, realms, etc.</p>\n"},{"tags":[],"owner":{"account_id":1107109,"reputation":325,"user_id":1098309,"display_name":"Noa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575962894,"creation_date":1575962894,"answer_id":59262230,"question_id":51521958,"body_markdown":"    Keycloak kc = KeycloakBuilder.builder() \r\n    \t\t\t.serverUrl(&quot;https://localhost:8443/auth&quot;)\r\n    \t\t\t.realm(&quot;master&quot;)\r\n    \t\t\t.username(&quot;admin&quot;) \r\n    \t\t\t.password(&quot;admin&quot;) \r\n    \t\t\t.clientId(&quot;Mycli&quot;) \r\n    \t\t\t.resteasyClient(new ResteasyClientBuilder().connectionPoolSize(10).build()) \r\n    \t\t\t.build();\r\n    \r\n    \tCredentialRepresentation credential = new CredentialRepresentation();\r\n    \tcredential.setType(CredentialRepresentation.PASSWORD);\r\n    \tcredential.setValue(&quot;test123&quot;);\r\n    \r\n    \tUserRepresentation user = new UserRepresentation();\r\n    \tuser.setUsername(&quot;testuser2&quot;);\r\n    \tuser.setFirstName(&quot;Test2&quot;);\r\n    \tuser.setLastName(&quot;User2&quot;);\r\n    \tuser.setEmail(&quot;aaa@bbb.com&quot;);\r\n    \tuser.setCredentials(Arrays.asList(credential));\r\n    \tuser.setEnabled(true);\r\n    \tuser.setRealmRoles(Arrays.asList(&quot;admin&quot;));\r\n    \r\n    \t// Create testuser\r\n    \tResponse result = kc.realm(&quot;my-realem&quot;).users().create(user);\r\n    \tif (result.getStatus() != 201) {\r\n    \t\tSystem.err.println(&quot;Couldn&#39;t create user.&quot;);\r\n    \t\tSystem.exit(0);\r\n    \t}else{\r\n    \t    System.out.println(&quot;Testuser created.... verify in keycloak!&quot;);\r\n        }\r\n\r\n","title":"KeyCloak - Create Realms/Users/Groups Programmatically?","body":"<pre><code>Keycloak kc = KeycloakBuilder.builder() \n            .serverUrl(\"https://localhost:8443/auth\")\n            .realm(\"master\")\n            .username(\"admin\") \n            .password(\"admin\") \n            .clientId(\"Mycli\") \n            .resteasyClient(new ResteasyClientBuilder().connectionPoolSize(10).build()) \n            .build();\n\n    CredentialRepresentation credential = new CredentialRepresentation();\n    credential.setType(CredentialRepresentation.PASSWORD);\n    credential.setValue(\"test123\");\n\n    UserRepresentation user = new UserRepresentation();\n    user.setUsername(\"testuser2\");\n    user.setFirstName(\"Test2\");\n    user.setLastName(\"User2\");\n    user.setEmail(\"aaa@bbb.com\");\n    user.setCredentials(Arrays.asList(credential));\n    user.setEnabled(true);\n    user.setRealmRoles(Arrays.asList(\"admin\"));\n\n    // Create testuser\n    Response result = kc.realm(\"my-realem\").users().create(user);\n    if (result.getStatus() != 201) {\n        System.err.println(\"Couldn't create user.\");\n        System.exit(0);\n    }else{\n        System.out.println(\"Testuser created.... verify in keycloak!\");\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639430390,"creation_date":1639330450,"answer_id":70326027,"question_id":51521958,"body_markdown":"You can do this with Keycloak Java admin REST api client :\r\n\r\n1. Add dependency to your project :\r\n    - Maven\r\n    ````\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n        &lt;artifactId&gt;keycloak-admin-client&lt;/artifactId&gt;\r\n        &lt;version&gt;15.0.2&lt;/version&gt;\r\n    &lt;/dependency&gt; \r\n    ````\r\n    - Gradle \r\n    ````\r\n    implementation &#39;org.keycloak:keycloak-admin-client:15.0.2&#39;\r\n    ````\r\n\r\n2. Create instance of [`Keycloak`](https://javadoc.io/doc/org.keycloak/keycloak-admin-client/latest/index.html) using [`KeycloakBuilder`](https://javadoc.io/doc/org.keycloak/keycloak-admin-client/latest/index.html) using Password authentication for your admin user and default `admin-cli` client:\r\n````\r\nKeycloak keycloak = KeycloakBuilder.builder()\r\n            .serverUrl(&quot;http://localhost:8081/auth&quot;)\r\n            .realm(&quot;master&quot;)\r\n            .clientId(&quot;admin-cli&quot;)\r\n            .username(&quot;admin&quot;)\r\n            .password(&quot;admin&quot;)\r\n            .build();\r\n````\r\n3. To create new realm use [`RealmRepresentation`](https://javadoc.io/doc/org.keycloak/keycloak-core/latest/org/keycloak/representations/idm/RealmRepresentation.html):\r\n````\r\nRealmRepresentation rr = new RealmRepresentation();\r\nrr.setId(&quot;test-realm&quot;);\r\nrr.setRealm(&quot;test-realm&quot;);\r\nrr.setEnabled(true);\r\n\r\nkeycloak.realms().create(rr);\r\n````\r\n4. To create new user use [`UserRepresentation`](https://javadoc.io/doc/org.keycloak/keycloak-core/latest/org/keycloak/representations/idm/UserRepresentation.html):\r\n````\r\nCredentialRepresentation credential = new CredentialRepresentation();\r\ncredential.setType(CredentialRepresentation.PASSWORD);\r\ncredential.setValue(&quot;1234&quot;);\r\n\r\nUserRepresentation user = new UserRepresentation();\r\nuser.setUsername(&quot;test&quot;);\r\nuser.setFirstName(&quot;test&quot;);\r\nuser.setLastName(&quot;test&quot;);\r\nuser.setEmail(&quot;test@gmail.com&quot;);\r\nuser.setCredentials(Arrays.asList(credential));\r\nuser.setEnabled(true);\r\nuser.setRealmRoles(Arrays.asList(&quot;admin&quot;));\r\n\r\nkeycloak.realm(&quot;test-realm&quot;).users().create(user);\r\n````\r\n5. To create a new Group use [`GroupRepresentation`](https://javadoc.io/doc/org.keycloak/keycloak-core/latest/org/keycloak/representations/idm/GroupRepresentation.html):\r\n````\r\nGroupRepresentation groupRepresentation = new GroupRepresentation()\r\ngroupRepresentation.setName(&quot;group&quot;);\r\n\r\nResponse response = keycloak.realm(&quot;test-realm&quot;).groups().add(groupRepresentation);\r\n````\r\nNote that when creating new top level group you should not pass group id - you can retrieve it after the group is created.","title":"KeyCloak - Create Realms/Users/Groups Programmatically?","body":"<p>You can do this with Keycloak Java admin REST api client :</p>\n<ol>\n<li><p>Add dependency to your project :</p>\n<ul>\n<li>Maven</li>\n</ul>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n    &lt;artifactId&gt;keycloak-admin-client&lt;/artifactId&gt;\n    &lt;version&gt;15.0.2&lt;/version&gt;\n&lt;/dependency&gt; \n</code></pre>\n<ul>\n<li>Gradle</li>\n</ul>\n<pre><code>implementation 'org.keycloak:keycloak-admin-client:15.0.2'\n</code></pre>\n</li>\n<li><p>Create instance of <a href=\"https://javadoc.io/doc/org.keycloak/keycloak-admin-client/latest/index.html\" rel=\"nofollow noreferrer\"><code>Keycloak</code></a> using <a href=\"https://javadoc.io/doc/org.keycloak/keycloak-admin-client/latest/index.html\" rel=\"nofollow noreferrer\"><code>KeycloakBuilder</code></a> using Password authentication for your admin user and default <code>admin-cli</code> client:</p>\n</li>\n</ol>\n<pre><code>Keycloak keycloak = KeycloakBuilder.builder()\n            .serverUrl(&quot;http://localhost:8081/auth&quot;)\n            .realm(&quot;master&quot;)\n            .clientId(&quot;admin-cli&quot;)\n            .username(&quot;admin&quot;)\n            .password(&quot;admin&quot;)\n            .build();\n</code></pre>\n<ol start=\"3\">\n<li>To create new realm use <a href=\"https://javadoc.io/doc/org.keycloak/keycloak-core/latest/org/keycloak/representations/idm/RealmRepresentation.html\" rel=\"nofollow noreferrer\"><code>RealmRepresentation</code></a>:</li>\n</ol>\n<pre><code>RealmRepresentation rr = new RealmRepresentation();\nrr.setId(&quot;test-realm&quot;);\nrr.setRealm(&quot;test-realm&quot;);\nrr.setEnabled(true);\n\nkeycloak.realms().create(rr);\n</code></pre>\n<ol start=\"4\">\n<li>To create new user use <a href=\"https://javadoc.io/doc/org.keycloak/keycloak-core/latest/org/keycloak/representations/idm/UserRepresentation.html\" rel=\"nofollow noreferrer\"><code>UserRepresentation</code></a>:</li>\n</ol>\n<pre><code>CredentialRepresentation credential = new CredentialRepresentation();\ncredential.setType(CredentialRepresentation.PASSWORD);\ncredential.setValue(&quot;1234&quot;);\n\nUserRepresentation user = new UserRepresentation();\nuser.setUsername(&quot;test&quot;);\nuser.setFirstName(&quot;test&quot;);\nuser.setLastName(&quot;test&quot;);\nuser.setEmail(&quot;test@gmail.com&quot;);\nuser.setCredentials(Arrays.asList(credential));\nuser.setEnabled(true);\nuser.setRealmRoles(Arrays.asList(&quot;admin&quot;));\n\nkeycloak.realm(&quot;test-realm&quot;).users().create(user);\n</code></pre>\n<ol start=\"5\">\n<li>To create a new Group use <a href=\"https://javadoc.io/doc/org.keycloak/keycloak-core/latest/org/keycloak/representations/idm/GroupRepresentation.html\" rel=\"nofollow noreferrer\"><code>GroupRepresentation</code></a>:</li>\n</ol>\n<pre><code>GroupRepresentation groupRepresentation = new GroupRepresentation()\ngroupRepresentation.setName(&quot;group&quot;);\n\nResponse response = keycloak.realm(&quot;test-realm&quot;).groups().add(groupRepresentation);\n</code></pre>\n<p>Note that when creating new top level group you should not pass group id - you can retrieve it after the group is created.</p>\n"}],"owner":{"account_id":131613,"reputation":11356,"user_id":331747,"accept_rate":78,"display_name":"Shadowman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14052,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":51709957,"answer_count":4,"score":14,"last_activity_date":1639430390,"creation_date":1532530423,"question_id":51521958,"body_markdown":"We&#39;ve decided to move to [KeyCloak][1] for our identity and access management solution, rather than implement it entirely within our Java EE web app.  We&#39;re creating a multi-tenant solution, and would prefer to create security realms/users/groups programmatically through our workflow, rather than leveraging KeyCloak&#39;s self-registration functionality or web UI so that we can do things like grab credit card details for payment, etc.  I know that we could likely leverage the [admin REST APIs][2] to accomplish this, but I wasn&#39;t sure if there was a simpler way to do it besides hand-coding REST calls.  Does KeyCloak provide an admin client library that we could use?  Or are we stuck implementing a REST client for the admin APIs ourselves?\r\n\r\n\r\n  [1]: https://www.keycloak.org\r\n  [2]: https://www.keycloak.org/docs-api/4.0/rest-api/index.html","title":"KeyCloak - Create Realms/Users/Groups Programmatically?","body":"<p>We've decided to move to <a href=\"https://www.keycloak.org\" rel=\"noreferrer\">KeyCloak</a> for our identity and access management solution, rather than implement it entirely within our Java EE web app.  We're creating a multi-tenant solution, and would prefer to create security realms/users/groups programmatically through our workflow, rather than leveraging KeyCloak's self-registration functionality or web UI so that we can do things like grab credit card details for payment, etc.  I know that we could likely leverage the <a href=\"https://www.keycloak.org/docs-api/4.0/rest-api/index.html\" rel=\"noreferrer\">admin REST APIs</a> to accomplish this, but I wasn't sure if there was a simpler way to do it besides hand-coding REST calls.  Does KeyCloak provide an admin client library that we could use?  Or are we stuck implementing a REST client for the admin APIs ourselves?</p>\n"},{"tags":["java","class","singleton"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":5,"creation_date":1466362144,"post_id":37910658,"comment_id":63273212,"body_markdown":"At what point do you assign a non-null value to `instance`?","body":"At what point do you assign a non-null value to <code>instance</code>?"},{"owner":{"account_id":2421927,"reputation":1760,"user_id":2185573,"accept_rate":76,"display_name":"Arunav Sanyal"},"score":0,"creation_date":1466363099,"post_id":37910658,"comment_id":63273482,"body_markdown":"instance in the first line has to be assigned to = new SingletonA() instead of returning new SingletonA() every time.","body":"instance in the first line has to be assigned to = new SingletonA() instead of returning new SingletonA() every time."}],"answers":[{"tags":[],"owner":{"account_id":7308564,"reputation":1533,"user_id":6257469,"display_name":"Beniton Fernando"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1466362227,"creation_date":1466362227,"answer_id":37910672,"question_id":37910658,"body_markdown":"Change like below\r\n\r\n    if(instance==null) {\r\n        System.out.println(&quot;RETURNING NEW INSTANCE OF SingletonA Class&quot;);\r\n        instance = new SingletonA();\r\n    }","title":"Singleton Class return new Instance every time","body":"<p>Change like below</p>\n\n<pre><code>if(instance==null) {\n    System.out.println(\"RETURNING NEW INSTANCE OF SingletonA Class\");\n    instance = new SingletonA();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1466362322,"creation_date":1466362322,"answer_id":37910683,"question_id":37910658,"body_markdown":"You have to assign the `instance` otherwise the check will always yield true, thus returning a new instance:\r\n\r\n    public static SingletonA getInstance() {    \r\n        if(instance==null)\r\n        {\r\n            System.out.println(&quot;CREATING NEW INSTANCE OF SingletonA Class&quot;);\r\n            instance = new SingletonA();\r\n        }\r\n        System.out.println(&quot;RETURNING INSTANCE OF SingletonA Class&quot;);\r\n        return instance;\r\n    }","title":"Singleton Class return new Instance every time","body":"<p>You have to assign the <code>instance</code> otherwise the check will always yield true, thus returning a new instance:</p>\n\n<pre><code>public static SingletonA getInstance() {    \n    if(instance==null)\n    {\n        System.out.println(\"CREATING NEW INSTANCE OF SingletonA Class\");\n        instance = new SingletonA();\n    }\n    System.out.println(\"RETURNING INSTANCE OF SingletonA Class\");\n    return instance;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"ΦXocę 웃 Пepe&#250;pa ツ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1466362476,"creation_date":1466362476,"answer_id":37910703,"question_id":37910658,"body_markdown":"here is not correct because you are returning new instances of the SingletonA and NEVER assigning it to the object instance..\r\n\r\n     public static SingletonA getInstance() {    \r\n            if(instance==null)\r\n            {\r\n                System.out.println(&quot;RETURNING NEW INSTANCE OF SingletonA Class&quot;);\r\n                return new SingletonA();\r\n            }\r\n            System.out.println(&quot;RETURNING OLD INSTANCE OF SingletonA Class&quot;);\r\n            return instance;\r\n        }\r\n\r\nyou mean for sure \r\n\r\n\r\n     public static SingletonA getInstance() {    \r\n            if(instance==null)\r\n            {\r\n                System.out.println(&quot;RETURNING NEW INSTANCE OF SingletonA Class&quot;);\r\n                instance = new SingletonA();\r\n            }\r\n            System.out.println(&quot;RETURNING OLD INSTANCE OF SingletonA Class&quot;);\r\n            return instance;\r\n        }","title":"Singleton Class return new Instance every time","body":"<p>here is not correct because you are returning new instances of the SingletonA and NEVER assigning it to the object instance..</p>\n\n<pre><code> public static SingletonA getInstance() {    \n        if(instance==null)\n        {\n            System.out.println(\"RETURNING NEW INSTANCE OF SingletonA Class\");\n            return new SingletonA();\n        }\n        System.out.println(\"RETURNING OLD INSTANCE OF SingletonA Class\");\n        return instance;\n    }\n</code></pre>\n\n<p>you mean for sure </p>\n\n<pre><code> public static SingletonA getInstance() {    \n        if(instance==null)\n        {\n            System.out.println(\"RETURNING NEW INSTANCE OF SingletonA Class\");\n            instance = new SingletonA();\n        }\n        System.out.println(\"RETURNING OLD INSTANCE OF SingletonA Class\");\n        return instance;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8642970,"reputation":171,"user_id":6471098,"display_name":"Trudeau Fernandes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1466363172,"creation_date":1466363172,"answer_id":37910815,"question_id":37910658,"body_markdown":"You should initialize instance to new SingletonA() just before returning in the test for null check.\r\n\r\n    public final class SingletonA {     \r\n        private static SingletonA instance;\r\n    \r\n        private SingletonA(){\r\n        }\r\n    \r\n        public static SingletonA getInstance() {    \r\n            if(instance==null)\r\n            {\r\n                System.out.println(&quot;RETURNING NEW INSTANCE OF SingletonA Class&quot;);\r\n                // You are missing this assignment. \r\n                instance = new SingletonA();\r\n                return instance; \r\n            }\r\n            System.out.println(&quot;RETURNING OLD INSTANCE OF SingletonA Class&quot;);\r\n            return instance;\r\n        }\r\n    }","title":"Singleton Class return new Instance every time","body":"<p>You should initialize instance to new SingletonA() just before returning in the test for null check.</p>\n\n<pre><code>public final class SingletonA {     \n    private static SingletonA instance;\n\n    private SingletonA(){\n    }\n\n    public static SingletonA getInstance() {    \n        if(instance==null)\n        {\n            System.out.println(\"RETURNING NEW INSTANCE OF SingletonA Class\");\n            // You are missing this assignment. \n            instance = new SingletonA();\n            return instance; \n        }\n        System.out.println(\"RETURNING OLD INSTANCE OF SingletonA Class\");\n        return instance;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10751765,"reputation":1,"user_id":7910914,"display_name":"Sourav singh yuvraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639430030,"creation_date":1639430030,"answer_id":70340986,"question_id":37910658,"body_markdown":"\r\n\r\n    public static SingletonA getInstance() {    \r\n        if(instance==null)\r\n        {\r\n           instance = new SingletonA();\r\n        }\r\n        return instance;\r\n    }","title":"Singleton Class return new Instance every time","body":"<pre><code>public static SingletonA getInstance() {    \n    if(instance==null)\n    {\n       instance = new SingletonA();\n    }\n    return instance;\n}\n</code></pre>\n"}],"owner":{"account_id":4377881,"reputation":499,"user_id":3570413,"accept_rate":14,"display_name":"herman shafiq"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1945,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":5,"score":0,"last_activity_date":1639430030,"creation_date":1466362087,"question_id":37910658,"body_markdown":"I&#39;m trying to make a singleton class, but it returns me a new instance every time. Here is my code. \r\n\r\nDid I make any mistake? Why does it return a new instance every time?\r\n\r\nIt should be the same I think.\r\n\r\n    public final class SingletonA {    \t\r\n    \tprivate static SingletonA instance;\r\n    \t\r\n    \tprivate SingletonA(){\r\n    \t}\r\n    \r\n    \tpublic static SingletonA getInstance() {\t\r\n    \t\tif(instance==null)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;RETURNING NEW INSTANCE OF SingletonA Class&quot;);\r\n    \t\t\treturn new SingletonA();\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;RETURNING OLD INSTANCE OF SingletonA Class&quot;);\r\n    \t\treturn instance;\r\n    \t}\r\n    }\r\n    \r\n    public class SingletonB {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSingletonA one = SingletonA.getInstance();\r\n    \t\tSystem.out.println(&quot;1.&quot;+one+&quot; | &quot;+one.hashCode());\r\n    \t\t\r\n    \t\tSingletonA two = SingletonA.getInstance();\r\n    \t\tSystem.out.println(&quot;2.&quot;+two+&quot; | &quot;+two.hashCode());\r\n    \t\t\r\n    \t\tSingletonA three = SingletonA.getInstance();\r\n    \t\tSystem.out.println(&quot;3.&quot;+three+&quot; | &quot;+three.hashCode());\r\n    \t}\r\n    }\r\n    \r\n    // HERE IS THE OUTPUT\r\n    RETURNING NEW INSTANCE OF SingletonA Class\r\n    1.oop.singleton.SingletonA@2a139a55 | 705927765\r\n    RETURNING NEW INSTANCE OF SingletonA Class\r\n    2.oop.singleton.SingletonA@15db9742 | 366712642\r\n    RETURNING NEW INSTANCE OF SingletonA Class\r\n    3.oop.singleton.SingletonA@6d06d69c | 1829164700","title":"Singleton Class return new Instance every time","body":"<p>I'm trying to make a singleton class, but it returns me a new instance every time. Here is my code. </p>\n\n<p>Did I make any mistake? Why does it return a new instance every time?</p>\n\n<p>It should be the same I think.</p>\n\n<pre><code>public final class SingletonA {     \n    private static SingletonA instance;\n\n    private SingletonA(){\n    }\n\n    public static SingletonA getInstance() {    \n        if(instance==null)\n        {\n            System.out.println(\"RETURNING NEW INSTANCE OF SingletonA Class\");\n            return new SingletonA();\n        }\n        System.out.println(\"RETURNING OLD INSTANCE OF SingletonA Class\");\n        return instance;\n    }\n}\n\npublic class SingletonB {\n    public static void main(String[] args) {\n        SingletonA one = SingletonA.getInstance();\n        System.out.println(\"1.\"+one+\" | \"+one.hashCode());\n\n        SingletonA two = SingletonA.getInstance();\n        System.out.println(\"2.\"+two+\" | \"+two.hashCode());\n\n        SingletonA three = SingletonA.getInstance();\n        System.out.println(\"3.\"+three+\" | \"+three.hashCode());\n    }\n}\n\n// HERE IS THE OUTPUT\nRETURNING NEW INSTANCE OF SingletonA Class\n1.oop.singleton.SingletonA@2a139a55 | 705927765\nRETURNING NEW INSTANCE OF SingletonA Class\n2.oop.singleton.SingletonA@15db9742 | 366712642\nRETURNING NEW INSTANCE OF SingletonA Class\n3.oop.singleton.SingletonA@6d06d69c | 1829164700\n</code></pre>\n"},{"tags":["java","android","flutter"],"answers":[{"tags":[],"owner":{"account_id":13537607,"reputation":89,"user_id":9766293,"display_name":"Jr Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639430010,"creation_date":1639430010,"answer_id":70340981,"question_id":70340827,"body_markdown":"Change version of JAVA 8 because JAVA 11 isn&#39;t good for using Flutter. I was on sam","title":"Issue after update Flutter project to JAVA 11","body":"<p>Change version of JAVA 8 because JAVA 11 isn't good for using Flutter. I was on sam</p>\n"}],"owner":{"account_id":10832388,"reputation":1265,"user_id":7966313,"display_name":"Enzo Lizama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639430010,"creation_date":1639428985,"question_id":70340827,"body_markdown":"After the update of my Flutter project to JAVA 11 suddenly I got this error when I try to run the app on any device.\r\n\r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:app:compileQa4DebugJavaWithJavac&#39;.\r\n    &gt; Could not resolve all files for configuration &#39;:app:androidJdkImage&#39;.\r\n       &gt; Failed to transform core-for-system-modules.jar to match attributes {artifactType=_internal_android_jdk_image, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\r\n          &gt; Execution failed for JdkImageTransform: /Users/enzoftware/Library/Android/sdk/platforms/android-30/core-for-system-modules.jar.\r\n             &gt; jlink executable /Applications/Android Studio Preview.app/Contents/jre/jdk/Contents/Home/bin/jlink does not exist.\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 56s\r\n    Exception: Gradle task assembleQa4Debug failed with exit code 1\r\n\r\nI tried doing `flutter clean`, install again the SDK for API 30 and reinstalling everything from scratch but the problem persist.\r\n\r\nAny suggestions are welcome.\r\n","title":"Issue after update Flutter project to JAVA 11","body":"<p>After the update of my Flutter project to JAVA 11 suddenly I got this error when I try to run the app on any device.</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileQa4DebugJavaWithJavac'.\n&gt; Could not resolve all files for configuration ':app:androidJdkImage'.\n   &gt; Failed to transform core-for-system-modules.jar to match attributes {artifactType=_internal_android_jdk_image, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\n      &gt; Execution failed for JdkImageTransform: /Users/enzoftware/Library/Android/sdk/platforms/android-30/core-for-system-modules.jar.\n         &gt; jlink executable /Applications/Android Studio Preview.app/Contents/jre/jdk/Contents/Home/bin/jlink does not exist.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 56s\nException: Gradle task assembleQa4Debug failed with exit code 1\n</code></pre>\n<p>I tried doing <code>flutter clean</code>, install again the SDK for API 30 and reinstalling everything from scratch but the problem persist.</p>\n<p>Any suggestions are welcome.</p>\n"},{"tags":["java","intellij-idea","annotations"],"comments":[{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1616764273,"post_id":66817517,"comment_id":118112133,"body_markdown":"I can&#39;t reproduce that.  The IDE lets me import the annotations I like in the subclass.","body":"I can&#39;t reproduce that.  The IDE lets me import the annotations I like in the subclass."}],"answers":[{"tags":[],"owner":{"account_id":10433138,"reputation":984,"user_id":7692352,"display_name":"Aris"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1616764686,"creation_date":1616764321,"answer_id":66817613,"question_id":66817517,"body_markdown":"As mentioned [here](https://youtrack.jetbrains.com/issue/IDEA-253324)\r\n\r\nThis is a defect and you can solve it by:\r\n\r\n`Settings --&gt; Inspections --&gt; Java --&gt; Probable bugs --&gt; Nullability problems --&gt; @NotNull/@Nullable problems --&gt; Configure Annotations`\r\n\r\nAnd Set the defaults \r\n```\r\njavax.annotation.Nullable\r\njavax.annotation.Nonnull\r\n```\r\n\r\nRestart and should be ok.","title":"How to stop IntelliJ from automatically importing org.jetbrains.annotations in Java?","body":"<p>As mentioned <a href=\"https://youtrack.jetbrains.com/issue/IDEA-253324\" rel=\"noreferrer\">here</a></p>\n<p>This is a defect and you can solve it by:</p>\n<p><code>Settings --&gt; Inspections --&gt; Java --&gt; Probable bugs --&gt; Nullability problems --&gt; @NotNull/@Nullable problems --&gt; Configure Annotations</code></p>\n<p>And Set the defaults</p>\n<pre><code>javax.annotation.Nullable\njavax.annotation.Nonnull\n</code></pre>\n<p>Restart and should be ok.</p>\n"},{"tags":[],"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639429786,"creation_date":1639413665,"answer_id":70337997,"question_id":66817517,"body_markdown":"@Nonnull/@Nullable annotations configuration in IntelliJ IDEA 2021.2.1:\r\n\r\n\r\n    Menu \r\n    &gt; File\r\n      &gt; Preferences\r\n        &gt; Editor\r\n          &gt; Inspections\r\n\r\n    Inspections\r\n    &gt; Java\r\n      &gt; Probable bugs\r\n        &gt; Nullability problems\r\n          &gt; @NonNull/@Nullable problems\r\n\r\n    @NonNull/@Nullable problems\r\n    &gt; Options\r\n      &gt; Configure annotations\r\n        &gt; Select preferred `Nullable` annotation\r\n        &gt; Press micro-accept button (see screenshot, horrible UX)\r\n        &gt; Select preferred `Nonnull` annotation\r\n        &gt; Press micro-accept button\r\n      &gt; Ok\r\n    &gt;Ok\r\n\r\n    No restart needed\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fLO6i.jpg","title":"How to stop IntelliJ from automatically importing org.jetbrains.annotations in Java?","body":"<p>@Nonnull/@Nullable annotations configuration in IntelliJ IDEA 2021.2.1:</p>\n<pre><code>Menu \n&gt; File\n  &gt; Preferences\n    &gt; Editor\n      &gt; Inspections\n\nInspections\n&gt; Java\n  &gt; Probable bugs\n    &gt; Nullability problems\n      &gt; @NonNull/@Nullable problems\n\n@NonNull/@Nullable problems\n&gt; Options\n  &gt; Configure annotations\n    &gt; Select preferred `Nullable` annotation\n    &gt; Press micro-accept button (see screenshot, horrible UX)\n    &gt; Select preferred `Nonnull` annotation\n    &gt; Press micro-accept button\n  &gt; Ok\n&gt;Ok\n\nNo restart needed\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/fLO6i.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fLO6i.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7313994,"reputation":2182,"user_id":5572258,"accept_rate":83,"display_name":"Berry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":66817613,"answer_count":2,"score":3,"last_activity_date":1639429786,"creation_date":1616763918,"question_id":66817517,"body_markdown":"My superclass has a method signature with parameters that use `javax` annotations like so:\r\n\r\n```\r\nimport javax.annotation.Nonnull;\r\nimport javax.annotation.Nullable;\r\n\r\npublic abstract class Nanana {\r\n\r\n    // ...\r\n\r\n    protected abstract void nanaFunction(\r\n        @Nonnull final Parameter parParameter1,\r\n        @Nullable final Parameter parParameter2\r\n    ) { /* ... */ }\r\n}\r\n```\r\n\r\nAnd when I inherit from this class in a different file without manually importing the annotations, it autocompletes my override like so (notice the annotation imports):\r\n\r\n```\r\nimport org.jetbrains.annotations.NotNull;\r\nimport org.jetbrains.annotations.Nullable;\r\n\r\npublic class ConcreteNanana extends Nanana {\r\n\r\n    // ...\r\n\r\n    @Override\r\n    public void nanaFunction(\r\n        @NotNull final Parameter parParameter1,\r\n        @Nullable final Parameter parParameter2\r\n    ) { /* ... */ }\r\n}\r\n```\r\n\r\nHow do I configure IntelliJ to import the same annotations as the superclass? I am using IntelliJ 2020.3.3 Ultimate.","title":"How to stop IntelliJ from automatically importing org.jetbrains.annotations in Java?","body":"<p>My superclass has a method signature with parameters that use <code>javax</code> annotations like so:</p>\n<pre><code>import javax.annotation.Nonnull;\nimport javax.annotation.Nullable;\n\npublic abstract class Nanana {\n\n    // ...\n\n    protected abstract void nanaFunction(\n        @Nonnull final Parameter parParameter1,\n        @Nullable final Parameter parParameter2\n    ) { /* ... */ }\n}\n</code></pre>\n<p>And when I inherit from this class in a different file without manually importing the annotations, it autocompletes my override like so (notice the annotation imports):</p>\n<pre><code>import org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n\npublic class ConcreteNanana extends Nanana {\n\n    // ...\n\n    @Override\n    public void nanaFunction(\n        @NotNull final Parameter parParameter1,\n        @Nullable final Parameter parParameter2\n    ) { /* ... */ }\n}\n</code></pre>\n<p>How do I configure IntelliJ to import the same annotations as the superclass? I am using IntelliJ 2020.3.3 Ultimate.</p>\n"},{"tags":["java","jsoup","html-parsing","html-parser"],"answers":[{"tags":[],"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639429745,"creation_date":1639314726,"answer_id":70323862,"question_id":70315681,"body_markdown":"You have to add the `input` element to the form!\r\n\r\nLook at the documentation of [`addElement​(Element element)`](https://jsoup.org/apidocs/org/jsoup/nodes/FormElement.html#addElement(org.jsoup.nodes.Element)):\r\n  &gt; *Add* a __form control__ element to this form.\r\n\r\nSo, in your case, you have to add the following line to your code before the assertion:\r\n```\r\n((FormElement) formElement).addElement(inputElement);\r\n```","title":"Jsoup: appending child &lt;input&gt; element to a &lt;foorm&gt; doesn&#39;t affect the form data","body":"<p>You have to add the <code>input</code> element to the form!</p>\n<p>Look at the documentation of <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/FormElement.html#addElement(org.jsoup.nodes.Element)\" rel=\"nofollow noreferrer\"><code>addElement​(Element element)</code></a>:</p>\n<blockquote>\n<p><em>Add</em> a <strong>form control</strong> element to this form.</p>\n</blockquote>\n<p>So, in your case, you have to add the following line to your code before the assertion:</p>\n<pre><code>((FormElement) formElement).addElement(inputElement);\n</code></pre>\n"}],"owner":{"account_id":19627938,"reputation":101,"user_id":14366888,"display_name":"Vladimir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639429745,"creation_date":1639230352,"question_id":70315681,"body_markdown":"The following unit test fails:\r\n\r\n    @Test\r\n    public void test() throws Exception {\r\n        String html = &quot;&lt;html&gt;&lt;form id=\\&quot;myform\\&quot;&gt;&lt;/form&gt;&lt;/html&gt;&quot;;\r\n        Document document = Jsoup.parse(html);\r\n        Element inputElement = document.createElement(&quot;input&quot;);\r\n        inputElement.attr(&quot;name&quot;, &quot;any_name&quot;);\r\n        inputElement.attr(&quot;value&quot;, &quot;any_value&quot;);\r\n        Element formElement = document.getElementById(&quot;myform&quot;);\r\n        formElement = formElement.appendChild(inputElement);\r\n        List&lt;Connection.KeyVal&gt; formData =  ((FormElement)formElement).formData();\r\n        Assert.assrt(1 == formData.size());\r\n    }\r\n\r\nQuestions:\r\n1. is it a bug or do I do something wrong?\r\n2. is there a workaround?\r\n","title":"Jsoup: appending child &lt;input&gt; element to a &lt;foorm&gt; doesn&#39;t affect the form data","body":"<p>The following unit test fails:</p>\n<pre><code>@Test\npublic void test() throws Exception {\n    String html = &quot;&lt;html&gt;&lt;form id=\\&quot;myform\\&quot;&gt;&lt;/form&gt;&lt;/html&gt;&quot;;\n    Document document = Jsoup.parse(html);\n    Element inputElement = document.createElement(&quot;input&quot;);\n    inputElement.attr(&quot;name&quot;, &quot;any_name&quot;);\n    inputElement.attr(&quot;value&quot;, &quot;any_value&quot;);\n    Element formElement = document.getElementById(&quot;myform&quot;);\n    formElement = formElement.appendChild(inputElement);\n    List&lt;Connection.KeyVal&gt; formData =  ((FormElement)formElement).formData();\n    Assert.assrt(1 == formData.size());\n}\n</code></pre>\n<p>Questions:</p>\n<ol>\n<li>is it a bug or do I do something wrong?</li>\n<li>is there a workaround?</li>\n</ol>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":7236580,"reputation":16350,"user_id":5521607,"accept_rate":25,"display_name":"Olivier Boiss&#233;"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1639429588,"creation_date":1639429274,"answer_id":70340868,"question_id":70340642,"body_markdown":"You can look at [RequestContextFilter source code](https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/filter/RequestContextFilter.java#L97). \r\nIt actually extends `OncePerRequestFilter` and implements the abstract method `doFilterInternal` to [initializes LocaleContextHolder and RequestContextHolder](https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/filter/RequestContextFilter.java#L113). After this, the Locale and the RequestAttributes can be retrieved anywhere in the current thread.\r\n\r\nIf you want to declare `RequestContextFilter` in you app, you can just declare it as a bean :\r\n```\r\n@Bean \r\npublic RequestContextListener requestContextListener() {\r\n  return new RequestContextListener();\r\n} \r\n```\r\n\r\nYou can also register the filter in the `web.xml` if you have one.","title":"What is difference between RequestContextFilter and OncePerRequestFilter in spring?","body":"<p>You can look at <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/filter/RequestContextFilter.java#L97\" rel=\"nofollow noreferrer\">RequestContextFilter source code</a>.\nIt actually extends <code>OncePerRequestFilter</code> and implements the abstract method <code>doFilterInternal</code> to <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/filter/RequestContextFilter.java#L113\" rel=\"nofollow noreferrer\">initializes LocaleContextHolder and RequestContextHolder</a>. After this, the Locale and the RequestAttributes can be retrieved anywhere in the current thread.</p>\n<p>If you want to declare <code>RequestContextFilter</code> in you app, you can just declare it as a bean :</p>\n<pre><code>@Bean \npublic RequestContextListener requestContextListener() {\n  return new RequestContextListener();\n} \n</code></pre>\n<p>You can also register the filter in the <code>web.xml</code> if you have one.</p>\n"}],"owner":{"account_id":4742244,"reputation":154,"user_id":3834587,"display_name":"DALDOUL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70340868,"answer_count":1,"score":1,"last_activity_date":1639429588,"creation_date":1639427973,"question_id":70340642,"body_markdown":"Spring documentation for Class [RequestContextFilter][1] mentions that this filter exposes the request to the current thread, through both LocaleContextHolder and RequestContextHolder. \r\n\r\nCan someone please explain how this is different from OncePerRequestFilter class, and how can I implement such a filter?\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/3.2.4.RELEASE_to_4.0.0.M3/Spring%20Framework%203.2.4.RELEASE/org/springframework/web/filter/RequestContextFilter.html","title":"What is difference between RequestContextFilter and OncePerRequestFilter in spring?","body":"<p>Spring documentation for Class <a href=\"https://docs.spring.io/spring-framework/docs/3.2.4.RELEASE_to_4.0.0.M3/Spring%20Framework%203.2.4.RELEASE/org/springframework/web/filter/RequestContextFilter.html\" rel=\"nofollow noreferrer\">RequestContextFilter</a> mentions that this filter exposes the request to the current thread, through both LocaleContextHolder and RequestContextHolder.</p>\n<p>Can someone please explain how this is different from OncePerRequestFilter class, and how can I implement such a filter?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1639428371,"post_id":70340687,"comment_id":124341653,"body_markdown":"The `\\n` in `&quot;\\n&quot;` is a newline, not a backslash and `n`. So, it should be `str = str.replaceFirst(&quot;\\n[0-9]+\\\\s+:\\\\s*&quot;, &quot;&quot;)`. Do not use `str.matches`. Using `g` (`g`lobal flag to match all occurrences) with `.replaceFirst` is not only invalid, it is not logical.","body":"The <code>\\n</code> in <code>&quot;\\n&quot;</code> is a newline, not a backslash and <code>n</code>. So, it should be <code>str = str.replaceFirst(&quot;\\n[0-9]+\\\\s+:\\\\s*&quot;, &quot;&quot;)</code>. Do not use <code>str.matches</code>. Using <code>g</code> (<code>g</code>lobal flag to match all occurrences) with <code>.replaceFirst</code> is not only invalid, it is not logical."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1639428513,"post_id":70340687,"comment_id":124341694,"body_markdown":"Thanks @WiktorStribiżew I don&#39;t have error now, but it didn&#39;t find something","body":"Thanks @WiktorStribiżew I don&#39;t have error now, but it didn&#39;t find something"},{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1639428601,"post_id":70340687,"comment_id":124341720,"body_markdown":"See https://ideone.com/iMAFJS, what did you mean by &quot;it didn&#39;t find something&quot;?","body":"See <a href=\"https://ideone.com/iMAFJS\" rel=\"nofollow noreferrer\">ideone.com/iMAFJS</a>, what did you mean by &quot;it didn&#39;t find something&quot;?"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1639428887,"post_id":70340687,"comment_id":124341816,"body_markdown":"@WiktorStribiżew I didn&#39;t change the string. But I found the issue, when I copy paste, I made a typo error. So yes, your regex works fine thanks ! Can you make an answer for this ? :)","body":"@WiktorStribiżew I didn&#39;t change the string. But I found the issue, when I copy paste, I made a typo error. So yes, your regex works fine thanks ! Can you make an answer for this ? :)"}],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639429124,"creation_date":1639429124,"answer_id":70340850,"question_id":70340687,"body_markdown":"You can use\r\n```java\r\n.replaceFirst(&quot;\\n[0-9]+\\\\s+:\\\\s*&quot;, &quot;&quot;)\r\n```\r\nThe regex matches\r\n\r\n - `\\n` - a newline char (you have a newline in the string, not a backslash and `n`)\r\n - `[0-9]+` - one or more digits\r\n - `\\s+` - one or more whitespaces\r\n - `:` - a colon\r\n - `\\s*` - zero or more whitespaces\r\n\r\nSee the [Java demo][1]:\r\n```java\r\nList&lt;String&gt; strs = Arrays.asList(&quot;\\n123 : other&quot;, &quot;123 : other&quot;, &quot;\\n4 : smth&quot;, &quot;123 : a&quot;);\r\nfor (String str : strs)\r\n\tSystem.out.println(&quot;\\&quot;&quot; + str.replaceFirst(&quot;\\n[0-9]+\\\\s+:\\\\s*&quot;, &quot;&quot;) + &quot;\\&quot;&quot;);\r\n```\r\nOutput:\r\n```\r\n&quot;other&quot;\r\n&quot;123 : other&quot;\r\n&quot;smth&quot;\r\n&quot;123 : a&quot;\r\n```\r\n\r\n\r\n  [1]: https://ideone.com/iMAFJS","title":"Unclosed character class while replacing string with regex","body":"<p>You can use</p>\n<pre class=\"lang-java prettyprint-override\"><code>.replaceFirst(&quot;\\n[0-9]+\\\\s+:\\\\s*&quot;, &quot;&quot;)\n</code></pre>\n<p>The regex matches</p>\n<ul>\n<li><code>\\n</code> - a newline char (you have a newline in the string, not a backslash and <code>n</code>)</li>\n<li><code>[0-9]+</code> - one or more digits</li>\n<li><code>\\s+</code> - one or more whitespaces</li>\n<li><code>:</code> - a colon</li>\n<li><code>\\s*</code> - zero or more whitespaces</li>\n</ul>\n<p>See the <a href=\"https://ideone.com/iMAFJS\" rel=\"nofollow noreferrer\">Java demo</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; strs = Arrays.asList(&quot;\\n123 : other&quot;, &quot;123 : other&quot;, &quot;\\n4 : smth&quot;, &quot;123 : a&quot;);\nfor (String str : strs)\n    System.out.println(&quot;\\&quot;&quot; + str.replaceFirst(&quot;\\n[0-9]+\\\\s+:\\\\s*&quot;, &quot;&quot;) + &quot;\\&quot;&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>&quot;other&quot;\n&quot;123 : other&quot;\n&quot;smth&quot;\n&quot;123 : a&quot;\n</code></pre>\n"}],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70340850,"answer_count":1,"score":1,"last_activity_date":1639429124,"creation_date":1639428241,"question_id":70340687,"body_markdown":"I want to remove a string at the beginning of another.\r\n\r\nExample:\r\n\r\n|       Begin      | Removed |     Final     |\r\n| :--------------: | :-----: | :-----------: |\r\n|  &quot;\\n123 : other&quot; | **Yes** |      other    |\r\n|   &quot;123 : other&quot;  |    No   |   **Error**   |\r\n|   &quot;\\n4 : smth&quot;   | **Yes** |      smth     |\r\n|     &quot;123 : a&quot;    |    No   |   **Error**   |\r\n\r\nThanks to [Regexr](https://regexr.com/), I made this regex:\r\n```\r\n/[\\\\][n](?:[0-9]*)[ ][:]/g\r\n```\r\nI tried to use it in Java. With `string.matches()` I don&#39;t have any error. But, with `string.replaceFirst`, I have this error :\r\n```\r\njava.util.regex.PatternSyntaxException: Unclosed character class near index 24\r\n/[\\][n](?:[0-9]*)[ ][:]/g\r\n                        ^\r\n```\r\nWhat I tried else ?\r\n- Remove `/` at begin and `/g` at end.\r\n- Add `(pattern)` (such as visible in regex [here](https://stackoverflow.com/a/41328567/10952503))\r\n- Multiple others quick way, but I the error is always at the last char of my regex\r\n\r\nMy full code:\r\n```\r\nString str = &quot;\\n512 : something&quot;; // I init my string\r\nif(str.matches(&quot;/[\\\\][n](?:[0-9]*)[ ][:]/g&quot;))\r\n   str = str.replaceFirst(&quot;/[\\\\][n](?:[0-9]*)[ ][:]/g&quot;, &quot;&quot;);\r\n```\r\n\r\nHow can I fix it ? How can I solve my regex pattern ?","title":"Unclosed character class while replacing string with regex","body":"<p>I want to remove a string at the beginning of another.</p>\n<p>Example:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Begin</th>\n<th style=\"text-align: center;\">Removed</th>\n<th style=\"text-align: center;\">Final</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">&quot;\\n123 : other&quot;</td>\n<td style=\"text-align: center;\"><strong>Yes</strong></td>\n<td style=\"text-align: center;\">other</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">&quot;123 : other&quot;</td>\n<td style=\"text-align: center;\">No</td>\n<td style=\"text-align: center;\"><strong>Error</strong></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">&quot;\\n4 : smth&quot;</td>\n<td style=\"text-align: center;\"><strong>Yes</strong></td>\n<td style=\"text-align: center;\">smth</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">&quot;123 : a&quot;</td>\n<td style=\"text-align: center;\">No</td>\n<td style=\"text-align: center;\"><strong>Error</strong></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Thanks to <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">Regexr</a>, I made this regex:</p>\n<pre><code>/[\\\\][n](?:[0-9]*)[ ][:]/g\n</code></pre>\n<p>I tried to use it in Java. With <code>string.matches()</code> I don't have any error. But, with <code>string.replaceFirst</code>, I have this error :</p>\n<pre><code>java.util.regex.PatternSyntaxException: Unclosed character class near index 24\n/[\\][n](?:[0-9]*)[ ][:]/g\n                        ^\n</code></pre>\n<p>What I tried else ?</p>\n<ul>\n<li>Remove <code>/</code> at begin and <code>/g</code> at end.</li>\n<li>Add <code>(pattern)</code> (such as visible in regex <a href=\"https://stackoverflow.com/a/41328567/10952503\">here</a>)</li>\n<li>Multiple others quick way, but I the error is always at the last char of my regex</li>\n</ul>\n<p>My full code:</p>\n<pre><code>String str = &quot;\\n512 : something&quot;; // I init my string\nif(str.matches(&quot;/[\\\\][n](?:[0-9]*)[ ][:]/g&quot;))\n   str = str.replaceFirst(&quot;/[\\\\][n](?:[0-9]*)[ ][:]/g&quot;, &quot;&quot;);\n</code></pre>\n<p>How can I fix it ? How can I solve my regex pattern ?</p>\n"},{"tags":["java","enums"],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1639424827,"creation_date":1639424827,"answer_id":70340152,"question_id":70340120,"body_markdown":"You&#39;d better use a `Map` for mapping `int &lt;--&gt; String`\r\n\r\n\r\n    Map&lt;Integer, String&gt; map = Map.of(1, &quot;string1&quot;, 2, &quot;string2&quot;, 3, &quot;string3&quot;);\r\n\r\n    int aKey = 1;\r\n    String finalString = map.getOrDefault(aKey, &quot;no string found&quot;);\r\n\r\n    System.out.println(map.getOrDefault( 1, &quot;no string found&quot;));  // string1\r\n    System.out.println(map.getOrDefault(10, &quot;no string found&quot;));  // no string found\r\n","title":"enum question. String and integer relationship","body":"<p>You'd better use a <code>Map</code> for mapping <code>int &lt;--&gt; String</code></p>\n<pre><code>Map&lt;Integer, String&gt; map = Map.of(1, &quot;string1&quot;, 2, &quot;string2&quot;, 3, &quot;string3&quot;);\n\nint aKey = 1;\nString finalString = map.getOrDefault(aKey, &quot;no string found&quot;);\n\nSystem.out.println(map.getOrDefault( 1, &quot;no string found&quot;));  // string1\nSystem.out.println(map.getOrDefault(10, &quot;no string found&quot;));  // no string found\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639428830,"creation_date":1639428830,"answer_id":70340790,"question_id":70340120,"body_markdown":"If you really HAVE TO use enums, you can do something like this: \r\n```java\r\n    public enum MyValues {\r\n        string1(1),\r\n        string2(3),\r\n        string4(4),\r\n        default_value(-1);\r\n\r\n        private final int key;\r\n        MyValues(int key) {\r\n            this.key = key;\r\n        }\r\n\r\n        public MyValues getByKey(int key){\r\n            return Arrays.stream(values())\r\n                    .filter(e -&gt; e.key == key)\r\n                    .findAny()\r\n                    .orElse(default_value);\r\n        }\r\n    }\r\n```\r\nIf you don&#39;t have to use enums, then see [azro&#39;s answer][1]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70340152/5990117","title":"enum question. String and integer relationship","body":"<p>If you really HAVE TO use enums, you can do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public enum MyValues {\n        string1(1),\n        string2(3),\n        string4(4),\n        default_value(-1);\n\n        private final int key;\n        MyValues(int key) {\n            this.key = key;\n        }\n\n        public MyValues getByKey(int key){\n            return Arrays.stream(values())\n                    .filter(e -&gt; e.key == key)\n                    .findAny()\n                    .orElse(default_value);\n        }\n    }\n</code></pre>\n<p>If you don't have to use enums, then see <a href=\"https://stackoverflow.com/a/70340152/5990117\">azro's answer</a>.</p>\n"}],"owner":{"account_id":23637345,"reputation":13,"user_id":17668176,"display_name":"enum21"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1639428830,"creation_date":1639424644,"question_id":70340120,"body_markdown":"I have a basic if-else if block of code. Here is the simplified version\r\n\r\n    if (var == 1) {\r\n      finalString = &quot;string1&quot;;\r\n    } else if (var == 3) {\r\n      finalString = &quot;string3&quot;;\r\n    } else if (var == 4) {\r\n      finalString = &quot;string4&quot;;\r\n    } else {\r\n      finalString = &quot;no string found&quot;;\r\n    }\r\n\r\nI am trying to use enums approach, so I created an enum class\r\n\r\n    public enum MyValues {\r\n      string1(1),\r\n      string2(3),\r\n      string4(4);\r\n      ...\r\n      ...\r\n    }\r\n\r\nIs there a way to improve my if/else statements with the enum I created?","title":"enum question. String and integer relationship","body":"<p>I have a basic if-else if block of code. Here is the simplified version</p>\n<pre><code>if (var == 1) {\n  finalString = &quot;string1&quot;;\n} else if (var == 3) {\n  finalString = &quot;string3&quot;;\n} else if (var == 4) {\n  finalString = &quot;string4&quot;;\n} else {\n  finalString = &quot;no string found&quot;;\n}\n</code></pre>\n<p>I am trying to use enums approach, so I created an enum class</p>\n<pre><code>public enum MyValues {\n  string1(1),\n  string2(3),\n  string4(4);\n  ...\n  ...\n}\n</code></pre>\n<p>Is there a way to improve my if/else statements with the enum I created?</p>\n"},{"tags":["java","spring-boot","spring-rest"],"comments":[{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":3,"creation_date":1639427941,"post_id":70340575,"comment_id":124341521,"body_markdown":"Try adding `@Validated`to your controller. https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/annotation/Validated.html","body":"Try adding <code>@Validated</code>to your controller. <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/annotation/Validated.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":45374,"reputation":6747,"user_id":133717,"accept_rate":54,"display_name":"NDM"},"score":0,"creation_date":1639428704,"post_id":70340575,"comment_id":124341757,"body_markdown":"This works when I annotation `@Validated` on the class level idd! I only tried this on the argument and method. can you post this as an answer, so this can be accepted and closed?","body":"This works when I annotation <code>@Validated</code> on the class level idd! I only tried this on the argument and method. can you post this as an answer, so this can be accepted and closed?"}],"answers":[{"tags":[],"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1639428805,"creation_date":1639428805,"answer_id":70340780,"question_id":70340575,"body_markdown":"You need to add [`@Validated`][1] to your controller class.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/annotation/Validated.html","title":"spring rest @RequestBody does not validate with @Valid","body":"<p>You need to add <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/annotation/Validated.html\" rel=\"noreferrer\"><code>@Validated</code></a> to your controller class.</p>\n"}],"owner":{"account_id":45374,"reputation":6747,"user_id":133717,"accept_rate":54,"display_name":"NDM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3342,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70340780,"answer_count":1,"score":1,"last_activity_date":1639428805,"creation_date":1639427547,"question_id":70340575,"body_markdown":"I&#39;m learning java and spring boot and I am trying to validate a controller parameter which was bound from json.\r\n\r\nI&#39;ve got simple Entity:\r\n\r\n```java\r\n@Getter\r\n@Setter\r\nclass Resource {\r\n    @NotBlank\r\n    String uri;\r\n}\r\n```\r\n\r\nWhich I want to persist through the following controller:\r\n\r\n```java\r\n@BasePathAwareController\r\npublic class JavaResourcePostController {\r\n\r\n    private final ResourceRepository repository;\r\n\r\n    public JavaResourcePostController(ResourceRepository repository) {\r\n        this.repository = repository;\r\n    }\r\n\r\n    @RequestMapping(value = &quot;/resources&quot;, method = RequestMethod.POST)\r\n    ResponseEntity&lt;Resource&gt; create(\r\n        @Valid @RequestBody Resource resource\r\n    ) {\r\n        repository.save(resource);\r\n\r\n        return ResponseEntity.ok(resource);\r\n    }\r\n}\r\n```\r\n\r\nMy understanding is that the resource argument should be valid when entering the method. But posting an empty `uri` field does not trigger the validation of the method. it does however get triggered in the hibernate validation in `repository.save()`\r\n\r\nWhy does the `@Valid` annotation on the argument not ensure I get a validated entity?","title":"spring rest @RequestBody does not validate with @Valid","body":"<p>I'm learning java and spring boot and I am trying to validate a controller parameter which was bound from json.</p>\n<p>I've got simple Entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\nclass Resource {\n    @NotBlank\n    String uri;\n}\n</code></pre>\n<p>Which I want to persist through the following controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@BasePathAwareController\npublic class JavaResourcePostController {\n\n    private final ResourceRepository repository;\n\n    public JavaResourcePostController(ResourceRepository repository) {\n        this.repository = repository;\n    }\n\n    @RequestMapping(value = &quot;/resources&quot;, method = RequestMethod.POST)\n    ResponseEntity&lt;Resource&gt; create(\n        @Valid @RequestBody Resource resource\n    ) {\n        repository.save(resource);\n\n        return ResponseEntity.ok(resource);\n    }\n}\n</code></pre>\n<p>My understanding is that the resource argument should be valid when entering the method. But posting an empty <code>uri</code> field does not trigger the validation of the method. it does however get triggered in the hibernate validation in <code>repository.save()</code></p>\n<p>Why does the <code>@Valid</code> annotation on the argument not ensure I get a validated entity?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1639427747,"post_id":70340363,"comment_id":124341440,"body_markdown":"Does this answer your question? [java.lang.String cannot be converted to java.util.HashMap](https://stackoverflow.com/questions/70339505/java-lang-string-cannot-be-converted-to-java-util-hashmap)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70339505/java-lang-string-cannot-be-converted-to-java-util-hashmap\">java.lang.String cannot be converted to java.util.HashMap</a>"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1639427778,"post_id":70340363,"comment_id":124341455,"body_markdown":"Please do not create duplicates of the same question.","body":"Please do not create duplicates of the same question."},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1639853513,"post_id":70340363,"comment_id":124456386,"body_markdown":"HashMap&lt;String, troop&gt;Troop is a local variable.  You need to make it a global variable (make it an instance variable).","body":"HashMap&lt;String, troop&gt;Troop is a local variable.  You need to make it a global variable (make it an instance variable)."}],"answers":[{"tags":[],"owner":{"account_id":20793938,"reputation":48,"user_id":15271395,"display_name":"Gold87"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639427187,"creation_date":1639427187,"answer_id":70340523,"question_id":70340363,"body_markdown":"It&#39;s impossible to return a non string object on a String method. But there is a way of returning a troop if the `&quot;IW1&quot;` key is called.\r\n\r\nThe way of doing it is declaring the Troop HashMap outside of the setupTroop method, and then creating it inside the setupTroop method, like this:\r\n```\r\nHashMap&lt;String, troop&gt; Troop;\r\n\r\n//Code you have\r\nprivate void setupTroop() {\r\n   Troop = new HashMap&lt;String, troop&gt;();\r\n   Troop.put(&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200)); \r\n}\r\n//Other code\r\npublic troop getForceDetails(String ref) {\r\n   if(ref.equals(&quot;IW1&quot;) {\r\n      return Troop.get(ref);\r\n   }\r\n   return null;\r\n}\r\n```\r\nThen in whatever other method you have where you called the `getForceDetails()` method, you would have\r\n```\r\nif(getForceDetails(&quot;Some string&quot;) == null) {\r\n   doSomething;\r\n}\r\n```","title":"Loading hashmap values in another method","body":"<p>It's impossible to return a non string object on a String method. But there is a way of returning a troop if the <code>&quot;IW1&quot;</code> key is called.</p>\n<p>The way of doing it is declaring the Troop HashMap outside of the setupTroop method, and then creating it inside the setupTroop method, like this:</p>\n<pre><code>HashMap&lt;String, troop&gt; Troop;\n\n//Code you have\nprivate void setupTroop() {\n   Troop = new HashMap&lt;String, troop&gt;();\n   Troop.put(&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200)); \n}\n//Other code\npublic troop getForceDetails(String ref) {\n   if(ref.equals(&quot;IW1&quot;) {\n      return Troop.get(ref);\n   }\n   return null;\n}\n</code></pre>\n<p>Then in whatever other method you have where you called the <code>getForceDetails()</code> method, you would have</p>\n<pre><code>if(getForceDetails(&quot;Some string&quot;) == null) {\n   doSomething;\n}\n</code></pre>\n"}],"owner":{"account_id":19952847,"reputation":62,"user_id":15073364,"display_name":"EngineerHus123"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1639428778,"creation_date":1639426170,"question_id":70340363,"body_markdown":"I&#39;ve a method called ```setupTroop``` that stores the data through hashmap. How do I go about loading this data in ```getTroopDetails```, so whenever the key has been called, its value gets loaded.\r\n\r\nSo if the key ```IW1``` gets called, the values ```1, &quot;Twisters&quot;, 200, 200``` are outputted and if any other key gets called it gives the output ```&quot;No such troop&quot;```.\r\n\r\n```   \r\nprivate void setupTroop()\r\n    {\r\n        HashMap&lt;String, troop&gt;Troop= new HashMap&lt;String, troop&gt;();\r\n        \r\n        Troop.put(&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200)); \r\n \r\n    }\r\n```\r\n```\r\npublic String getForceDetails(String ref)\r\n    {\r\n        return &quot;\\nNo such force&quot;;\r\n    }\r\n```\r\n```\r\npublic class troop{\r\n    int FleetRef;\r\n    String FullName;\r\n    int ActivationFee;\r\n    int BattleStrength; \r\n    \r\n    public troop(int FRef, String FName, int AFee, int BStrength)\r\n    {\r\n        FleetRef = FRef;\r\n        FullName = FName;\r\n        ActivationFee = AFee;\r\n        BattleStrength = BStrength;\r\n    }\r\n    \r\n    public int getFleetRef()\r\n    {\r\n        return FleetRef;\r\n    }\r\n    public String getFullName()\r\n    {\r\n        return FullName;\r\n    }\r\n    public int getActivationFee()\r\n    {\r\n        return ActivationFee;\r\n    }\r\n\r\n    public int BattleStrength()\r\n    {\r\n        return BattleStrength;\r\n    }\r\n```","title":"Loading hashmap values in another method","body":"<p>I've a method called <code>setupTroop</code> that stores the data through hashmap. How do I go about loading this data in <code>getTroopDetails</code>, so whenever the key has been called, its value gets loaded.</p>\n<p>So if the key <code>IW1</code> gets called, the values <code>1, &quot;Twisters&quot;, 200, 200</code> are outputted and if any other key gets called it gives the output <code>&quot;No such troop&quot;</code>.</p>\n<pre><code>private void setupTroop()\n    {\n        HashMap&lt;String, troop&gt;Troop= new HashMap&lt;String, troop&gt;();\n        \n        Troop.put(&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200)); \n \n    }\n</code></pre>\n<pre><code>public String getForceDetails(String ref)\n    {\n        return &quot;\\nNo such force&quot;;\n    }\n</code></pre>\n<pre><code>public class troop{\n    int FleetRef;\n    String FullName;\n    int ActivationFee;\n    int BattleStrength; \n    \n    public troop(int FRef, String FName, int AFee, int BStrength)\n    {\n        FleetRef = FRef;\n        FullName = FName;\n        ActivationFee = AFee;\n        BattleStrength = BStrength;\n    }\n    \n    public int getFleetRef()\n    {\n        return FleetRef;\n    }\n    public String getFullName()\n    {\n        return FullName;\n    }\n    public int getActivationFee()\n    {\n        return ActivationFee;\n    }\n\n    public int BattleStrength()\n    {\n        return BattleStrength;\n    }\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":20240228,"reputation":496,"user_id":14844306,"display_name":"Ben Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639428706,"creation_date":1639428706,"answer_id":70340764,"question_id":70340573,"body_markdown":"In order to get the required student list using the stream api, you need to filter the students to get only students with a certain id and then collect them into a list. An example of this is shown below:\r\n```\r\nstudentList.stream().filter(student -&gt; student.id == ID_TO_MATCH).collect(Collectors.toList())\r\n```\r\nIn the code above, `ID_TO_MATCH` represents the the student id to find for each section of `myList`. See the following example of getting `ID_TO_MATCH`:\r\n```\r\nmyList.forEach(section -&gt; {\r\n    int ID_TO_MATCH = section.id;\r\n};\r\n```\r\nThese code snippets can be combined to produce the solution:\r\n```\r\nmyList.forEach(section -&gt; {\r\n    int id = section.id;\r\n    List&lt;Student&gt; studentsFound = studentList.stream().filter(student -&gt; student.id == id).collect(Collectors.toList())\r\n    section.setStudentList(studentsFound);\r\n};\r\n```","title":"compare and add the list of elements into another list","body":"<p>In order to get the required student list using the stream api, you need to filter the students to get only students with a certain id and then collect them into a list. An example of this is shown below:</p>\n<pre><code>studentList.stream().filter(student -&gt; student.id == ID_TO_MATCH).collect(Collectors.toList())\n</code></pre>\n<p>In the code above, <code>ID_TO_MATCH</code> represents the the student id to find for each section of <code>myList</code>. See the following example of getting <code>ID_TO_MATCH</code>:</p>\n<pre><code>myList.forEach(section -&gt; {\n    int ID_TO_MATCH = section.id;\n};\n</code></pre>\n<p>These code snippets can be combined to produce the solution:</p>\n<pre><code>myList.forEach(section -&gt; {\n    int id = section.id;\n    List&lt;Student&gt; studentsFound = studentList.stream().filter(student -&gt; student.id == id).collect(Collectors.toList())\n    section.setStudentList(studentsFound);\n};\n</code></pre>\n"}],"owner":{"account_id":11884292,"reputation":43,"user_id":8697117,"display_name":"user8697117"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639428706,"creation_date":1639427544,"question_id":70340573,"body_markdown":"I am trying to compare and add the list of objects inside another list using java8 stream API.\r\nBelow are the sample json.\r\n\r\n**studentList:**\r\n\r\n     [{\r\n      sid:1,\r\n      id:10,\r\n      sname :&quot;xyz&quot;\r\n      sPassOut : &quot;2019&quot;\r\n    }, {\r\n      sid:2,\r\n      id:20,\r\n      sname :&quot;abc&quot;\r\n      sPassOut : &quot;2020&quot;\r\n    },{\r\n       sid:3,\r\n       id:30,\r\n      sname :&quot;ppp&quot;\r\n      sPassOut : &quot;2021&quot;\r\n    },\r\n    {\r\n       sid:1,\r\n       id:10,\r\n      sname :&quot;ppp&quot;\r\n      sPassOut : &quot;2021&quot;\r\n    },\r\n    {\r\n       sid:2,\r\n      id:20,\r\n      sname :&quot;ppp&quot;\r\n      sPassOut : &quot;2021&quot;\r\n    }]\r\n\r\n**myList:**\r\n\r\n      [{\r\n        id:10,\r\n        status:&quot;active&quot;,\r\n        studentList:[]\r\n       },{id:20, \r\n          status:&quot;active&quot;,\r\n           studentList:[]\r\n       },{id:30, \r\n          status:&quot;active&quot;,\r\n           studentList:[]\r\n       },{id:40, \r\n          status:&quot;active&quot;,\r\n           studentList:[]\r\n       }]\r\n\r\nI want to add the studentList elements in the myList for each matching **id** value.\r\n\r\ntried the below code, but it is not giving the expected result.\r\n\r\n    studentList.forEach(studList -&gt; {\r\n        studList.setStudentList(myList.stream().collect(Collectors.toMap(MyList:: getId)));\r\n    });\r\n\r\nExpected JSON:\r\n\r\n    [\r\n        {\r\n        id: 10,\r\n        status: &quot;active&quot;,\r\n        studentList: [\r\n                {\r\n      sid: 1,\r\n      id: 10,\r\n      sname : &quot;xyz&quot;\r\n      sPassOut : &quot;2019&quot;\r\n                },\r\n                {\r\n       sid: 4,\r\n       id: 10,\r\n      sname : &quot;ppp&quot;\r\n      sPassOut : &quot;2021&quot;\r\n                }\r\n            ]\r\n        },\r\n        {id: 20, \r\n          status: &quot;active&quot;,\r\n           studentList: [\r\n                {\r\n      sid: 2,\r\n      id: 20,\r\n      sname : &quot;abc&quot;\r\n      sPassOut : &quot;2020&quot;\r\n                },\r\n                {\r\n       sid: 5,\r\n      id: 20,\r\n      sname : &quot;ppp&quot;\r\n      sPassOut : &quot;2021&quot;\r\n                }\r\n            ]\r\n        },\r\n        {id: 30, \r\n          status: &quot;active&quot;,\r\n           studentList: [\r\n                {\r\n       sid: 3,\r\n       id: 30,\r\n      sname : &quot;ppp&quot;\r\n      sPassOut : &quot;2021&quot;\r\n                }\r\n            ]\r\n        },\r\n        {id: 40, \r\n          status: &quot;active&quot;,\r\n           studentList: []\r\n        }\r\n    ]\r\nI wan to add the elements from studentList grouped together with matching id value in the myList as shown in the sample json above.\r\n","title":"compare and add the list of elements into another list","body":"<p>I am trying to compare and add the list of objects inside another list using java8 stream API.\nBelow are the sample json.</p>\n<p><strong>studentList:</strong></p>\n<pre><code> [{\n  sid:1,\n  id:10,\n  sname :&quot;xyz&quot;\n  sPassOut : &quot;2019&quot;\n}, {\n  sid:2,\n  id:20,\n  sname :&quot;abc&quot;\n  sPassOut : &quot;2020&quot;\n},{\n   sid:3,\n   id:30,\n  sname :&quot;ppp&quot;\n  sPassOut : &quot;2021&quot;\n},\n{\n   sid:1,\n   id:10,\n  sname :&quot;ppp&quot;\n  sPassOut : &quot;2021&quot;\n},\n{\n   sid:2,\n  id:20,\n  sname :&quot;ppp&quot;\n  sPassOut : &quot;2021&quot;\n}]\n</code></pre>\n<p><strong>myList:</strong></p>\n<pre><code>  [{\n    id:10,\n    status:&quot;active&quot;,\n    studentList:[]\n   },{id:20, \n      status:&quot;active&quot;,\n       studentList:[]\n   },{id:30, \n      status:&quot;active&quot;,\n       studentList:[]\n   },{id:40, \n      status:&quot;active&quot;,\n       studentList:[]\n   }]\n</code></pre>\n<p>I want to add the studentList elements in the myList for each matching <strong>id</strong> value.</p>\n<p>tried the below code, but it is not giving the expected result.</p>\n<pre><code>studentList.forEach(studList -&gt; {\n    studList.setStudentList(myList.stream().collect(Collectors.toMap(MyList:: getId)));\n});\n</code></pre>\n<p>Expected JSON:</p>\n<pre><code>[\n    {\n    id: 10,\n    status: &quot;active&quot;,\n    studentList: [\n            {\n  sid: 1,\n  id: 10,\n  sname : &quot;xyz&quot;\n  sPassOut : &quot;2019&quot;\n            },\n            {\n   sid: 4,\n   id: 10,\n  sname : &quot;ppp&quot;\n  sPassOut : &quot;2021&quot;\n            }\n        ]\n    },\n    {id: 20, \n      status: &quot;active&quot;,\n       studentList: [\n            {\n  sid: 2,\n  id: 20,\n  sname : &quot;abc&quot;\n  sPassOut : &quot;2020&quot;\n            },\n            {\n   sid: 5,\n  id: 20,\n  sname : &quot;ppp&quot;\n  sPassOut : &quot;2021&quot;\n            }\n        ]\n    },\n    {id: 30, \n      status: &quot;active&quot;,\n       studentList: [\n            {\n   sid: 3,\n   id: 30,\n  sname : &quot;ppp&quot;\n  sPassOut : &quot;2021&quot;\n            }\n        ]\n    },\n    {id: 40, \n      status: &quot;active&quot;,\n       studentList: []\n    }\n]\n</code></pre>\n<p>I wan to add the elements from studentList grouped together with matching id value in the myList as shown in the sample json above.</p>\n"},{"tags":["java","sql","hibernate","jpa"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1639340916,"post_id":70321800,"comment_id":124318323,"body_markdown":"Could you please clarify the desired effect? Which data entity do you want to get upserted, the `Book`?","body":"Could you please clarify the desired effect? Which data entity do you want to get upserted, the <code>Book</code>?"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1639341082,"post_id":70321800,"comment_id":124318366,"body_markdown":"If you&#39;re only dealing with existing `Book`s and merely wish to establish the association between `Book` and `UserBookMapping`, you can simply use `entityManager.getReference()`. No need to actually fetch the `Book` entity","body":"If you&#39;re only dealing with existing <code>Book</code>s and merely wish to establish the association between <code>Book</code> and <code>UserBookMapping</code>, you can simply use <code>entityManager.getReference()</code>. No need to actually fetch the <code>Book</code> entity"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1639415615,"post_id":70321800,"comment_id":124337481,"body_markdown":"@crizzis Thank you for the response. I am trying to upsert the `UserBookMapping`, could you elaborate on the `entityManager.getReference` aspect?","body":"@crizzis Thank you for the response. I am trying to upsert the <code>UserBookMapping</code>, could you elaborate on the <code>entityManager.getReference</code> aspect?"}],"answers":[{"tags":[],"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639428348,"creation_date":1639427934,"answer_id":70340638,"question_id":70321800,"body_markdown":"As was suggested by @crizzis, you can do something like this:\r\n\r\n``` java\r\nBook book = entityManager.getReference(Book.class, bookId);\r\nLong booksPerUserCount = entityManager.createQuery(\r\n\t&quot;select count(bu) from UserBookMapping bu where bu.book = :book and bu.user_id = :userId&quot;,\r\n Long.class )\r\n.setParameter(&quot;book&quot;, book)\r\n.setParameter(&quot;userId&quot;, userId)\r\n.getSingleResult(); \r\n\r\nif (booksPerUserCount == 0) {\r\n   UserBookMapping userBook = new UserBookMapping();\r\n   userBook.setBook(book);\r\n   userBook.setUserId(userId);\r\n   entityManager.persist(userBook);\r\n}\r\n```\r\n\r\nBut it will work only if you know for sure that a book with id `bookId` exists.\r\nYou can read about `entityManager.getReference()` in [hibernate documentation](https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#pc-get-reference).\r\n\r\nPlease also note that you should use `@Data` lombok annotation with caution in hibernate/jpa entity, see for example [this article](https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/).","title":"How to perform an upsert on entity with JoinColumn in JPA and Hibernate","body":"<p>As was suggested by @crizzis, you can do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Book book = entityManager.getReference(Book.class, bookId);\nLong booksPerUserCount = entityManager.createQuery(\n    &quot;select count(bu) from UserBookMapping bu where bu.book = :book and bu.user_id = :userId&quot;,\n Long.class )\n.setParameter(&quot;book&quot;, book)\n.setParameter(&quot;userId&quot;, userId)\n.getSingleResult(); \n\nif (booksPerUserCount == 0) {\n   UserBookMapping userBook = new UserBookMapping();\n   userBook.setBook(book);\n   userBook.setUserId(userId);\n   entityManager.persist(userBook);\n}\n</code></pre>\n<p>But it will work only if you know for sure that a book with id <code>bookId</code> exists.\nYou can read about <code>entityManager.getReference()</code> in <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#pc-get-reference\" rel=\"nofollow noreferrer\">hibernate documentation</a>.</p>\n<p>Please also note that you should use <code>@Data</code> lombok annotation with caution in hibernate/jpa entity, see for example <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">this article</a>.</p>\n"}],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639428348,"creation_date":1639294934,"question_id":70321800,"body_markdown":"Fairly new to the hibernate-core integrate with JPA. Our entities look like\r\n\r\n\r\n```\r\n@MappedSuperclass\r\nabstract class BasicEntity {\r\n\r\n    @Id\r\n    @GenericGenerator(name=&quot;uuid&quot;,strategy=&quot;uuid&quot;)\r\n    @GeneratedValue(generator=&quot;uuid&quot;)\r\n    private String id;\r\n\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;book&quot;)\r\nclass Book extends BasicEntity { \r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;book_genre&quot;)\r\n    Genre genre\r\n\r\n    @Column(name=&quot;texture&quot;)\r\n    String texture;\r\n}\r\n\r\n@Data //lombok\r\n@Entity\r\n@Table(name=&quot;user_book_mapping&quot;)\r\nclass UserBookMapping extends BasicEntity {\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;book_id&quot;)\r\n    private Book book;\r\n    \r\n    @Column(name=&quot;user_id&quot;)\r\n    String user_id;\r\n}\r\n```\r\n\r\nWhat I am trying to perform is for every book read by a user, **`upsert`**(a book can be read twice by the same user) the `UserBookMapping` table. Request object includes an array of user and books `[{userId, bookId}]` attributes for me to process.\r\n\r\nCurrently I am stuck with a solution where I am ending up fetching the `Book` entity from the primary table first, then fetching if such a row already exists with a combination of `userId+bookId` and then creating a new instance of `UserBookMapping` to write it to the database.\r\n\r\nThis doesn&#39;t look optimized in any sense to me. Theoretically(and in the NoSql world), what should be sufficient for me to do all of this would be to ensure valid `bookIds` are requested (`EXISTS`) and then perform an `UPSERT` for the `UserBookMapping`. But I am puzzled with both the ways to write and to formulate the data as java objects while computing. \r\n\r\nQ1. Do I really need to construct the `Book` entity?\r\n\r\nQ2. What is the clean way to do what I am trying to achieve?","title":"How to perform an upsert on entity with JoinColumn in JPA and Hibernate","body":"<p>Fairly new to the hibernate-core integrate with JPA. Our entities look like</p>\n<pre><code>@MappedSuperclass\nabstract class BasicEntity {\n\n    @Id\n    @GenericGenerator(name=&quot;uuid&quot;,strategy=&quot;uuid&quot;)\n    @GeneratedValue(generator=&quot;uuid&quot;)\n    private String id;\n\n}\n\n@Entity\n@Table(name = &quot;book&quot;)\nclass Book extends BasicEntity { \n    @ManyToOne\n    @JoinColumn(name=&quot;book_genre&quot;)\n    Genre genre\n\n    @Column(name=&quot;texture&quot;)\n    String texture;\n}\n\n@Data //lombok\n@Entity\n@Table(name=&quot;user_book_mapping&quot;)\nclass UserBookMapping extends BasicEntity {\n    @ManyToOne\n    @JoinColumn(name = &quot;book_id&quot;)\n    private Book book;\n    \n    @Column(name=&quot;user_id&quot;)\n    String user_id;\n}\n</code></pre>\n<p>What I am trying to perform is for every book read by a user, <strong><code>upsert</code></strong>(a book can be read twice by the same user) the <code>UserBookMapping</code> table. Request object includes an array of user and books <code>[{userId, bookId}]</code> attributes for me to process.</p>\n<p>Currently I am stuck with a solution where I am ending up fetching the <code>Book</code> entity from the primary table first, then fetching if such a row already exists with a combination of <code>userId+bookId</code> and then creating a new instance of <code>UserBookMapping</code> to write it to the database.</p>\n<p>This doesn't look optimized in any sense to me. Theoretically(and in the NoSql world), what should be sufficient for me to do all of this would be to ensure valid <code>bookIds</code> are requested (<code>EXISTS</code>) and then perform an <code>UPSERT</code> for the <code>UserBookMapping</code>. But I am puzzled with both the ways to write and to formulate the data as java objects while computing.</p>\n<p>Q1. Do I really need to construct the <code>Book</code> entity?</p>\n<p>Q2. What is the clean way to do what I am trying to achieve?</p>\n"},{"tags":["java","unit-testing","junit","junit5","junit5-extension-model"],"comments":[{"owner":{"account_id":4888255,"reputation":4312,"user_id":3940047,"accept_rate":80,"display_name":"Pavan Kumar"},"score":0,"creation_date":1527492284,"post_id":50559689,"comment_id":88132663,"body_markdown":"something similar - https://stackoverflow.com/questions/43282798/in-junit-5-how-to-run-code-before-all-tests","body":"something similar - <a href=\"https://stackoverflow.com/questions/43282798/in-junit-5-how-to-run-code-before-all-tests\" title=\"in junit 5 how to run code before all tests\">stackoverflow.com/questions/43282798/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1527505964,"creation_date":1527505964,"answer_id":50565085,"question_id":50559689,"body_markdown":"Combining `@RunWith` (from JUnit 4) and `@ExtendWith` (from JUnit Jupiter) is not supported: those are extension mechanisms from two different frameworks.\r\n\r\nTechnically speaking, your `SuiteClass` is a JUnit 4 test class. Thus JUnit Jupiter will not register or execute any extensions for it.\r\n\r\nWith regard to _suites_ in JUnit 5, we (the JUnit Team) have plans to provide first-class support for suites that do not require a JUnit 4 _Runner_ (i.e., `@RunWith(JUnitPlatform.class)`). See all [GitHub issues labeled with &quot;suites&quot;][1] for details. Feel free to watch and/or comment on any of those issues.\r\n\r\nIn the interim, I believe the closest one could come to implementing &quot;before and after suite&quot; support in JUnit Jupiter would be to implement a custom extension that implements `BeforeAllCallback` and `AfterAllCallback`. That extension would need to track whether it has already been invoked by storing a flag in the *root* `ExtensionContext` `Store` (as a `BeforeAllCallback`), so that it only executes _once_ before the &quot;suite&quot;. Similarly, it would need to count the number of classes it is executed for and track that in the *root* `Store`. This would serve as a `Stack` or `CountDownLatch`. As an `AfterAllCallback`, the extension would need to decrement the global counter and only _execute_ once all test classes have completed.\r\n\r\nYou&#39;d obviously need to ensure that your suite extension is registered for each test class that belongs to the suite. Perhaps a custom composed annotation would simplify matters for you there.\r\n\r\nNow, admittedly, I just *implemented* that in my head but have not yet actually coded such a &quot;suite&quot; extension. So if you actually implement it, I&#39;d be interested in hearing about your experience and possibly seeing your code. ;-)\r\n\r\nCheers,\r\n\r\nSam (core committer for JUnit 5)\r\n\r\n\r\n\r\n  [1]: https://github.com/junit-team/junit5/issues?q=is%3Aopen%20is%3Aissue%20label%3A%22theme%3A%20suites%22","title":"JUnit 5 - Providing setUp and tearDown for an entire Test Suite","body":"<p>Combining <code>@RunWith</code> (from JUnit 4) and <code>@ExtendWith</code> (from JUnit Jupiter) is not supported: those are extension mechanisms from two different frameworks.</p>\n\n<p>Technically speaking, your <code>SuiteClass</code> is a JUnit 4 test class. Thus JUnit Jupiter will not register or execute any extensions for it.</p>\n\n<p>With regard to <em>suites</em> in JUnit 5, we (the JUnit Team) have plans to provide first-class support for suites that do not require a JUnit 4 <em>Runner</em> (i.e., <code>@RunWith(JUnitPlatform.class)</code>). See all <a href=\"https://github.com/junit-team/junit5/issues?q=is%3Aopen%20is%3Aissue%20label%3A%22theme%3A%20suites%22\" rel=\"noreferrer\">GitHub issues labeled with \"suites\"</a> for details. Feel free to watch and/or comment on any of those issues.</p>\n\n<p>In the interim, I believe the closest one could come to implementing \"before and after suite\" support in JUnit Jupiter would be to implement a custom extension that implements <code>BeforeAllCallback</code> and <code>AfterAllCallback</code>. That extension would need to track whether it has already been invoked by storing a flag in the <em>root</em> <code>ExtensionContext</code> <code>Store</code> (as a <code>BeforeAllCallback</code>), so that it only executes <em>once</em> before the \"suite\". Similarly, it would need to count the number of classes it is executed for and track that in the <em>root</em> <code>Store</code>. This would serve as a <code>Stack</code> or <code>CountDownLatch</code>. As an <code>AfterAllCallback</code>, the extension would need to decrement the global counter and only <em>execute</em> once all test classes have completed.</p>\n\n<p>You'd obviously need to ensure that your suite extension is registered for each test class that belongs to the suite. Perhaps a custom composed annotation would simplify matters for you there.</p>\n\n<p>Now, admittedly, I just <em>implemented</em> that in my head but have not yet actually coded such a \"suite\" extension. So if you actually implement it, I'd be interested in hearing about your experience and possibly seeing your code. ;-)</p>\n\n<p>Cheers,</p>\n\n<p>Sam (core committer for JUnit 5)</p>\n"}],"owner":{"account_id":4888255,"reputation":4312,"user_id":3940047,"accept_rate":80,"display_name":"Pavan Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9708,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1639428331,"creation_date":1527485601,"question_id":50559689,"body_markdown":"My requirement is to have some initialization done for a set of tests and clear it off once all the tests are complete. These tests spin over a few test classes as they are not closely related, but require a common initialization.\r\n\r\nI am using `@SelectClasses` to form the suite and trying to make use of `@ExtendWith` using a custom extension that should handle the pre and post processing. This does not work and I am unsure if an appropriate solution exists in JUnit. Sharing the sample code of what was already attempted.\r\n\r\n**Suite:**\r\n\r\n\t@SelectClasses({FirstTest.class, SecondTest.class})\r\n\t@ExtendWith(SuiteExtension.class)\r\n\t@RunWith(JUnitPlatform.class)\r\n\t@SuiteDisplayName(&quot;test suite&quot;)\r\n\tpublic class SuiteClass {\r\n\t}\r\n\r\n**Extension:**\r\n\r\n\tpublic class SuiteExtension implements BeforeAllCallback, AfterAllCallback {\r\n\r\n\t    @Override\r\n\t    public void afterAll(ExtensionContext context) throws Exception {\r\n\t        System.out.println(&quot;afterAll&quot;);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void beforeAll(ExtensionContext context) throws Exception {\r\n\t        System.out.println(&quot;beforeAll&quot;);\r\n\t    }\r\n\t}\r\n\r\n**Test Class 1:**\r\n\r\n\tpublic class FirstTest {\r\n\r\n\t    @Test\r\n\t    void test1(){\r\n\t        System.out.println(&quot;test1&quot;);\r\n\t    }\r\n\t}\r\n\r\n**Test Class 2:**\r\n\r\n\tpublic class SecondTest {\r\n\r\n\t    @Test\r\n\t    void test2(){\r\n\t        System.out.println(&quot;test2&quot;);\r\n\t    }\r\n\t}\r\n\r\n**Output:**\r\n\r\n\ttest1\r\n\ttest2\r\n\r\n**Expected Output:**\r\n\r\n\tbeforeAll\r\n\ttest1\r\n\ttest2\r\n\tafterAll","title":"JUnit 5 - Providing setUp and tearDown for an entire Test Suite","body":"<p>My requirement is to have some initialization done for a set of tests and clear it off once all the tests are complete. These tests spin over a few test classes as they are not closely related, but require a common initialization.</p>\n\n<p>I am using <code>@SelectClasses</code> to form the suite and trying to make use of <code>@ExtendWith</code> using a custom extension that should handle the pre and post processing. This does not work and I am unsure if an appropriate solution exists in JUnit. Sharing the sample code of what was already attempted.</p>\n\n<p><strong>Suite:</strong></p>\n\n<pre><code>@SelectClasses({FirstTest.class, SecondTest.class})\n@ExtendWith(SuiteExtension.class)\n@RunWith(JUnitPlatform.class)\n@SuiteDisplayName(\"test suite\")\npublic class SuiteClass {\n}\n</code></pre>\n\n<p><strong>Extension:</strong></p>\n\n<pre><code>public class SuiteExtension implements BeforeAllCallback, AfterAllCallback {\n\n    @Override\n    public void afterAll(ExtensionContext context) throws Exception {\n        System.out.println(\"afterAll\");\n    }\n\n    @Override\n    public void beforeAll(ExtensionContext context) throws Exception {\n        System.out.println(\"beforeAll\");\n    }\n}\n</code></pre>\n\n<p><strong>Test Class 1:</strong></p>\n\n<pre><code>public class FirstTest {\n\n    @Test\n    void test1(){\n        System.out.println(\"test1\");\n    }\n}\n</code></pre>\n\n<p><strong>Test Class 2:</strong></p>\n\n<pre><code>public class SecondTest {\n\n    @Test\n    void test2(){\n        System.out.println(\"test2\");\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>test1\ntest2\n</code></pre>\n\n<p><strong>Expected Output:</strong></p>\n\n<pre><code>beforeAll\ntest1\ntest2\nafterAll\n</code></pre>\n"},{"tags":["java","javafx","scenebuilder"],"comments":[{"owner":{"account_id":4390558,"reputation":1750,"user_id":3579095,"accept_rate":44,"display_name":"Lars"},"score":0,"creation_date":1409937271,"post_id":25690790,"comment_id":40153744,"body_markdown":"I&#39;ve never had problems with opening a valid fxml in scene builder. Can&#39;t you just open it with &lt;ctrl + o&gt;? I don&#39;t undestand your question.","body":"I&#39;ve never had problems with opening a valid fxml in scene builder. Can&#39;t you just open it with &lt;ctrl + o&gt;? I don&#39;t undestand your question."},{"owner":{"account_id":329850,"reputation":3368,"user_id":653614,"accept_rate":79,"display_name":"ed_me"},"score":0,"creation_date":1409937394,"post_id":25690790,"comment_id":40153797,"body_markdown":"If I create a new project and drag a button to the view, I&#39;d like to be able to see the FXML that is created. Surely there is a split view, as in, if you&#39;re designing a web page with a WYSWYG application, you can usually see both the source code and the front end.","body":"If I create a new project and drag a button to the view, I&#39;d like to be able to see the FXML that is created. Surely there is a split view, as in, if you&#39;re designing a web page with a WYSWYG application, you can usually see both the source code and the front end."},{"owner":{"account_id":4390558,"reputation":1750,"user_id":3579095,"accept_rate":44,"display_name":"Lars"},"score":0,"creation_date":1409937856,"post_id":25690790,"comment_id":40154028,"body_markdown":"Sorry I don&#39;t know a way to view the generated xml right in scenebuilder. I have it open in my IDE and edit the code there.","body":"Sorry I don&#39;t know a way to view the generated xml right in scenebuilder. I have it open in my IDE and edit the code there."},{"owner":{"account_id":456045,"reputation":2682,"user_id":854600,"accept_rate":79,"display_name":"Vertex"},"score":1,"creation_date":1409940205,"post_id":25690790,"comment_id":40155018,"body_markdown":"SceneBuilder automatically detects changes on FXML files and reload it even if the preview is open. Eclipse should also reload a file if a change where saved.","body":"SceneBuilder automatically detects changes on FXML files and reload it even if the preview is open. Eclipse should also reload a file if a change where saved."}],"answers":[{"tags":[],"owner":{"account_id":1956160,"reputation":36345,"user_id":1759128,"accept_rate":54,"display_name":"ItachiUchiha"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1560235413,"creation_date":1409974657,"answer_id":25696536,"question_id":25690790,"body_markdown":"Well for now, there is no such option to view the FXML from the Scene Builder. I can confirm it for `Scene Builder 2.0`.\r\n\r\nThough this can be a great addition to Scene Builder(If not the split screen, just viewing the FXML). You can file a feature request here https://github.com/gluonhq/scenebuilder/issues.","title":"How do I view the fxml using SceneBuilder?","body":"<p>Well for now, there is no such option to view the FXML from the Scene Builder. I can confirm it for <code>Scene Builder 2.0</code>.</p>\n\n<p>Though this can be a great addition to Scene Builder(If not the split screen, just viewing the FXML). You can file a feature request here <a href=\"https://github.com/gluonhq/scenebuilder/issues\" rel=\"nofollow noreferrer\">https://github.com/gluonhq/scenebuilder/issues</a>.</p>\n"},{"tags":[],"owner":{"account_id":15836322,"reputation":9,"user_id":11426083,"display_name":"Anonyos"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1556528073,"creation_date":1556528073,"answer_id":55899922,"question_id":25690790,"body_markdown":"There actually is a way. Save your file and from the file explorer, open your .fxml file with an IDE, say VSCode","title":"How do I view the fxml using SceneBuilder?","body":"<p>There actually is a way. Save your file and from the file explorer, open your .fxml file with an IDE, say VSCode</p>\n"},{"tags":[],"owner":{"account_id":8090,"reputation":9081,"user_id":14359,"accept_rate":100,"display_name":"Michael Brown"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1639427927,"creation_date":1639427927,"answer_id":70340636,"question_id":25690790,"body_markdown":"Use IntelliJ Community edition. It has a built in FXML editor that lets you switch between wysiwyg and code.","title":"How do I view the fxml using SceneBuilder?","body":"<p>Use IntelliJ Community edition. It has a built in FXML editor that lets you switch between wysiwyg and code.</p>\n"}],"owner":{"account_id":329850,"reputation":3368,"user_id":653614,"accept_rate":79,"display_name":"ed_me"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8279,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1639427927,"creation_date":1409936882,"question_id":25690790,"body_markdown":"Sorry for such a simple question but I&#39;m finding it hard to believe that I can&#39;t actually view the fxml whilst developing a user interface using JavaFX Scenebuilder.\r\n\r\nI&#39;d expect that I should be able to write a user interface using the controls as well as being able to directly write the fxml.\r\n\r\nHow do I view/edit the fxml of my user interface in SceneBuilder without doing the following: -\r\n\r\n 1. Saving\r\n 2. Editing with text editor\r\n 3. Re-open with JavaFX Scene Builder\r\n\r\ni.e. http://www.webhostingplanguide.com/wp-content/uploads/2013/12/CoffeeCup-HTML-Editor.jpg\r\n\r\nAs above, I would like to be able to work on either the FXML or the WYSIWYG front end.","title":"How do I view the fxml using SceneBuilder?","body":"<p>Sorry for such a simple question but I'm finding it hard to believe that I can't actually view the fxml whilst developing a user interface using JavaFX Scenebuilder.</p>\n\n<p>I'd expect that I should be able to write a user interface using the controls as well as being able to directly write the fxml.</p>\n\n<p>How do I view/edit the fxml of my user interface in SceneBuilder without doing the following: -</p>\n\n<ol>\n<li>Saving</li>\n<li>Editing with text editor</li>\n<li>Re-open with JavaFX Scene Builder</li>\n</ol>\n\n<p>i.e. <a href=\"http://www.webhostingplanguide.com/wp-content/uploads/2013/12/CoffeeCup-HTML-Editor.jpg\" rel=\"noreferrer\">http://www.webhostingplanguide.com/wp-content/uploads/2013/12/CoffeeCup-HTML-Editor.jpg</a></p>\n\n<p>As above, I would like to be able to work on either the FXML or the WYSIWYG front end.</p>\n"},{"tags":["java","spring","spring-cloud-stream","spring-cloud-stream-binder-kafka"],"answers":[{"tags":[],"owner":{"account_id":22050141,"reputation":11,"user_id":16314574,"display_name":"Kitch205"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639427451,"creation_date":1639418566,"answer_id":70339040,"question_id":70335077,"body_markdown":"I was using: \r\n```\r\npublic &lt;T&gt; void sendMessage(String topic, T listObj) {\r\n    try {\r\n        KafkaTemplate&lt;String, T&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(createProducerFactory());\r\n        kafkaTemplate.send(new ProducerRecord&lt;&gt;(topic, listObj));\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\nTo send the message which was putting the message as the value.\r\n\r\nWhat I should&#39;ve been using:\r\n```\r\npublic void sendMessage(String topic, Message&lt;?&gt; listObj) {\r\n    try {\r\n        KafkaTemplate&lt;String, Message&lt;?&gt;&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(createProducerFactory());\r\n        kafkaTemplate.setDefaultTopic(topic);\r\n        kafkaTemplate.send(listObj);\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```","title":"Spring Stream kafka Binder Test Custom Headers","body":"<p>I was using:</p>\n<pre><code>public &lt;T&gt; void sendMessage(String topic, T listObj) {\n    try {\n        KafkaTemplate&lt;String, T&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(createProducerFactory());\n        kafkaTemplate.send(new ProducerRecord&lt;&gt;(topic, listObj));\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>To send the message which was putting the message as the value.</p>\n<p>What I should've been using:</p>\n<pre><code>public void sendMessage(String topic, Message&lt;?&gt; listObj) {\n    try {\n        KafkaTemplate&lt;String, Message&lt;?&gt;&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(createProducerFactory());\n        kafkaTemplate.setDefaultTopic(topic);\n        kafkaTemplate.send(listObj);\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22050141,"reputation":11,"user_id":16314574,"display_name":"Kitch205"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":719,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70339040,"answer_count":1,"score":0,"last_activity_date":1639427451,"creation_date":1639400334,"question_id":70335077,"body_markdown":"I&#39;m trying to figure out how to include custom headers in the Spring `Message&lt;?&gt;` used in Spring Cloud Stream with the Kafka Binder. My goal is to include some custom header data that would be added on in one producer (function) class, passed to kafka and then consumed by another class in a different service (with the customer header data).\r\n\r\nI feel like I am missing something as I can seem to get it to work using the `TestChannelBinder` e.g.\r\n\r\n\r\n```\r\nimport org.springframework.messaging.Message;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.function.Function;\r\n\r\n@Component\r\n@Slf4j\r\npublic class BaseStream implements Function&lt;Message&lt;String&gt;, String&gt; {\r\n    @Override\r\n    public String apply(Message&lt;String&gt; transactionMessage) {\r\n        log.debug(&quot;Converted Message: {} &quot;, transactionMessage);\r\n        return transactionMessage.getPayload();\r\n    }\r\n\r\n}\r\n```\r\n\r\nTest class with Test Binder:\r\n```\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.cloud.stream.binder.test.InputDestination;\r\nimport org.springframework.cloud.stream.binder.test.OutputDestination;\r\nimport org.springframework.cloud.stream.binder.test.TestChannelBinderConfiguration;\r\nimport org.springframework.context.annotation.Import;\r\nimport org.springframework.integration.support.MessageBuilder;\r\nimport org.springframework.kafka.test.context.EmbeddedKafka;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\n\r\n@SpringBootTest\r\n@TestPropertySource(&quot;classpath:testStream.properties&quot;)\r\n@Import(TestChannelBinderConfiguration.class)\r\npublic class TestForStream {\r\n\r\n\r\n    @Autowired\r\n    InputDestination inputDestination;\r\n    @Autowired\r\n    OutputDestination outputDestination;\r\n\r\n    @Test\r\n    void contextLoads() {\r\n        inputDestination.send(MessageBuilder\r\n                .withPayload(&quot;Test Payload&quot;)\r\n                .setHeader(&quot;customHeader&quot;, &quot;headerSpecificData&quot;)\r\n                .build());\r\n    }\r\n}\r\n\r\n```\r\n\r\ntestStream.properties\r\n```\r\nspring.cloud.function.definition=baseStream\r\nspring.cloud.stream.bindings.baseStream-in-0.destination=test-in\r\nspring.cloud.stream.bindings.baseStream-out-0.destination=test-out\r\nspring.cloud.stream.bindings.baseStream-in-0.group=test-group-base\r\n```\r\n\r\nLog when running:\r\n```\r\nConverted Message: GenericMessage [payload=Test Payload, headers={id=5c6d1082-c084-0b25-4afc-b5d97bf537f9, customHeader=headerSpecificData, contentType=application/json, timestamp=1639398696800, target-protocol=kafka}]\r\n```\r\n\r\nWhich is what I am looking to do. But when I try to test it for the kafka bider it seems to include the `Message&lt;String&gt;` object in the payload as a JSON string, which I thought would be parsed into the requested input of the function `BaseStream`.\r\n\r\nJust wondering if someone could maybe see where i&#39;m going wrong with my testing as I have tried various things to get this to work, and seeing as it works with a test binder I would assume it works for the Kafka Binder.\r\n\r\nTest Class for Kafka Binder Test:\r\n```\r\nimport org.apache.kafka.clients.producer.ProducerConfig;\r\nimport org.apache.kafka.clients.producer.ProducerRecord;\r\nimport org.apache.kafka.common.serialization.StringSerializer;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.integration.support.MessageBuilder;\r\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\r\nimport org.springframework.kafka.core.KafkaTemplate;\r\nimport org.springframework.kafka.core.ProducerFactory;\r\nimport org.springframework.kafka.support.serializer.JsonSerializer;\r\nimport org.springframework.kafka.test.EmbeddedKafkaBroker;\r\nimport org.springframework.kafka.test.context.EmbeddedKafka;\r\nimport org.springframework.kafka.test.utils.KafkaTestUtils;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.concurrent.CountDownLatch;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n\r\n@EmbeddedKafka(partitions = 1, brokerProperties = { &quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot;})\r\n@SpringBootTest\r\n@TestPropertySource(&quot;classpath:testStream.properties&quot;)\r\npublic class TestForStream {\r\n\r\n    public static CountDownLatch latch = new CountDownLatch(1);\r\n    @Autowired\r\n    public EmbeddedKafkaBroker broker;\r\n\r\n    @Test\r\n    void contextLoads() {\r\n        sleep(5);//Included this as it takes some time to init&gt;\r\n\r\n        sendMessage(&quot;test-in&quot;, MessageBuilder\r\n                .withPayload(&quot;Test Payload&quot;)\r\n                .setHeader(&quot;customHeader&quot;, &quot;headerSpecificData&quot;)\r\n                .build());\r\n\r\n\r\n    }\r\n\r\n    public &lt;T&gt; ProducerFactory&lt;String, T&gt; createProducerFactory() {\r\n        Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;(KafkaTestUtils.producerProps(broker));\r\n        configs.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        configs.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\r\n        //Is JsonSerializer correct for a message?\r\n        return new DefaultKafkaProducerFactory&lt;&gt;(configs);\r\n    }\r\n\r\n    public &lt;T&gt; void sendMessage(String topic, T listObj) {\r\n        try {\r\n            KafkaTemplate&lt;String, T&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(createProducerFactory());\r\n            kafkaTemplate.send(new ProducerRecord&lt;&gt;(topic, listObj));\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void sleep(long time){\r\n        try {\r\n            latch.await(time, TimeUnit.SECONDS);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nLog of kafka binder test for message:\r\n```\r\nConverted Message: GenericMessage [payload={&quot;payload&quot;:&quot;Test Payload&quot;,&quot;headers&quot;:{&quot;customHeader&quot;:&quot;headerSpecificData&quot;,&quot;id&quot;:&quot;d540a3ca-28db-b137-fc86-c25cc4b7eb8b&quot;,&quot;timestamp&quot;:1639399810476}}, headers={deliveryAttempt=1, kafka_timestampType=CREATE_TIME, kafka_receivedTopic=test-in, target-protocol=kafka, kafka_offset=0, scst_nativeHeadersPresent=true, kafka_consumer=org.apache.kafka.clients.consumer.KafkaConsumer@79580279, id=1cf2d382-df29-2672-4180-07da99e58244, kafka_receivedPartitionId=0, kafka_receivedTimestamp=1639399810526, contentType=application/json, __TypeId__=[B@24c79350, kafka_groupId=test-group-base, timestamp=1639399810651}]\r\n```\r\nSo here the message has been included in the payload and the kafka headers included in the headers as expected.\r\n\r\nI have tried `spring.cloud.stream.kafka.binder.headers` and `headerMode` to see if they would change anything but to no avail. \r\n\r\n\r\nEdit:\r\n\r\nUsing springCloudVersion = 2020.0.3","title":"Spring Stream kafka Binder Test Custom Headers","body":"<p>I'm trying to figure out how to include custom headers in the Spring <code>Message&lt;?&gt;</code> used in Spring Cloud Stream with the Kafka Binder. My goal is to include some custom header data that would be added on in one producer (function) class, passed to kafka and then consumed by another class in a different service (with the customer header data).</p>\n<p>I feel like I am missing something as I can seem to get it to work using the <code>TestChannelBinder</code> e.g.</p>\n<pre><code>import org.springframework.messaging.Message;\nimport org.springframework.stereotype.Component;\n\nimport java.util.function.Function;\n\n@Component\n@Slf4j\npublic class BaseStream implements Function&lt;Message&lt;String&gt;, String&gt; {\n    @Override\n    public String apply(Message&lt;String&gt; transactionMessage) {\n        log.debug(&quot;Converted Message: {} &quot;, transactionMessage);\n        return transactionMessage.getPayload();\n    }\n\n}\n</code></pre>\n<p>Test class with Test Binder:</p>\n<pre><code>\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.cloud.stream.binder.test.InputDestination;\nimport org.springframework.cloud.stream.binder.test.OutputDestination;\nimport org.springframework.cloud.stream.binder.test.TestChannelBinderConfiguration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.integration.support.MessageBuilder;\nimport org.springframework.kafka.test.context.EmbeddedKafka;\nimport org.springframework.test.context.TestPropertySource;\n\n\n@SpringBootTest\n@TestPropertySource(&quot;classpath:testStream.properties&quot;)\n@Import(TestChannelBinderConfiguration.class)\npublic class TestForStream {\n\n\n    @Autowired\n    InputDestination inputDestination;\n    @Autowired\n    OutputDestination outputDestination;\n\n    @Test\n    void contextLoads() {\n        inputDestination.send(MessageBuilder\n                .withPayload(&quot;Test Payload&quot;)\n                .setHeader(&quot;customHeader&quot;, &quot;headerSpecificData&quot;)\n                .build());\n    }\n}\n\n</code></pre>\n<p>testStream.properties</p>\n<pre><code>spring.cloud.function.definition=baseStream\nspring.cloud.stream.bindings.baseStream-in-0.destination=test-in\nspring.cloud.stream.bindings.baseStream-out-0.destination=test-out\nspring.cloud.stream.bindings.baseStream-in-0.group=test-group-base\n</code></pre>\n<p>Log when running:</p>\n<pre><code>Converted Message: GenericMessage [payload=Test Payload, headers={id=5c6d1082-c084-0b25-4afc-b5d97bf537f9, customHeader=headerSpecificData, contentType=application/json, timestamp=1639398696800, target-protocol=kafka}]\n</code></pre>\n<p>Which is what I am looking to do. But when I try to test it for the kafka bider it seems to include the <code>Message&lt;String&gt;</code> object in the payload as a JSON string, which I thought would be parsed into the requested input of the function <code>BaseStream</code>.</p>\n<p>Just wondering if someone could maybe see where i'm going wrong with my testing as I have tried various things to get this to work, and seeing as it works with a test binder I would assume it works for the Kafka Binder.</p>\n<p>Test Class for Kafka Binder Test:</p>\n<pre><code>import org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.common.serialization.StringSerializer;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.integration.support.MessageBuilder;\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.core.ProducerFactory;\nimport org.springframework.kafka.support.serializer.JsonSerializer;\nimport org.springframework.kafka.test.EmbeddedKafkaBroker;\nimport org.springframework.kafka.test.context.EmbeddedKafka;\nimport org.springframework.kafka.test.utils.KafkaTestUtils;\nimport org.springframework.test.context.TestPropertySource;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.TimeUnit;\n\n\n@EmbeddedKafka(partitions = 1, brokerProperties = { &quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot;})\n@SpringBootTest\n@TestPropertySource(&quot;classpath:testStream.properties&quot;)\npublic class TestForStream {\n\n    public static CountDownLatch latch = new CountDownLatch(1);\n    @Autowired\n    public EmbeddedKafkaBroker broker;\n\n    @Test\n    void contextLoads() {\n        sleep(5);//Included this as it takes some time to init&gt;\n\n        sendMessage(&quot;test-in&quot;, MessageBuilder\n                .withPayload(&quot;Test Payload&quot;)\n                .setHeader(&quot;customHeader&quot;, &quot;headerSpecificData&quot;)\n                .build());\n\n\n    }\n\n    public &lt;T&gt; ProducerFactory&lt;String, T&gt; createProducerFactory() {\n        Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;(KafkaTestUtils.producerProps(broker));\n        configs.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        configs.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\n        //Is JsonSerializer correct for a message?\n        return new DefaultKafkaProducerFactory&lt;&gt;(configs);\n    }\n\n    public &lt;T&gt; void sendMessage(String topic, T listObj) {\n        try {\n            KafkaTemplate&lt;String, T&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(createProducerFactory());\n            kafkaTemplate.send(new ProducerRecord&lt;&gt;(topic, listObj));\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    public void sleep(long time){\n        try {\n            latch.await(time, TimeUnit.SECONDS);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n\n\n</code></pre>\n<p>Log of kafka binder test for message:</p>\n<pre><code>Converted Message: GenericMessage [payload={&quot;payload&quot;:&quot;Test Payload&quot;,&quot;headers&quot;:{&quot;customHeader&quot;:&quot;headerSpecificData&quot;,&quot;id&quot;:&quot;d540a3ca-28db-b137-fc86-c25cc4b7eb8b&quot;,&quot;timestamp&quot;:1639399810476}}, headers={deliveryAttempt=1, kafka_timestampType=CREATE_TIME, kafka_receivedTopic=test-in, target-protocol=kafka, kafka_offset=0, scst_nativeHeadersPresent=true, kafka_consumer=org.apache.kafka.clients.consumer.KafkaConsumer@79580279, id=1cf2d382-df29-2672-4180-07da99e58244, kafka_receivedPartitionId=0, kafka_receivedTimestamp=1639399810526, contentType=application/json, __TypeId__=[B@24c79350, kafka_groupId=test-group-base, timestamp=1639399810651}]\n</code></pre>\n<p>So here the message has been included in the payload and the kafka headers included in the headers as expected.</p>\n<p>I have tried <code>spring.cloud.stream.kafka.binder.headers</code> and <code>headerMode</code> to see if they would change anything but to no avail.</p>\n<p>Edit:</p>\n<p>Using springCloudVersion = 2020.0.3</p>\n"},{"tags":["java","amazon-web-services","apache-spark","kubernetes","pyspark"],"comments":[{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":0,"creation_date":1638928127,"post_id":70267055,"comment_id":124216651,"body_markdown":"You will need to format that a bit better and give a bit more details like version, configuration, infrastructure… good luck!","body":"You will need to format that a bit better and give a bit more details like version, configuration, infrastructure… good luck!"},{"owner":{"account_id":15255498,"reputation":177,"user_id":11007386,"display_name":"Sillians"},"score":0,"creation_date":1647425993,"post_id":70267055,"comment_id":126365927,"body_markdown":"Were you able to get past this @hari ?","body":"Were you able to get past this @hari ?"}],"owner":{"account_id":23580073,"reputation":11,"user_id":17619214,"display_name":"hari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639427294,"creation_date":1638911860,"question_id":70267055,"body_markdown":"I am trying to save spark-submit (Kubernetes) logs in S3 and I am getting S3 authentication errors.  \r\nCan any-one please help me with it.\r\n\r\n```sh\r\nspark-submit\\\r\n    --master k8s://https://kubernetes.cluster.svc\\\r\n    --deploy-mode cluster\\\r\n    --name spark-p1\\\r\n    --driver-memory 8g\\\r\n    --executor-memory 10g\\\r\n    --class org.apache.spark.examples.SparkPi\\\r\n    --conf spark.executor.instances=2\\\r\n    --conf spark.kubernetes.container.image=spark-py:v3.1.2.1\\\r\n    --conf spark.kubernetes.container.image.pullPolicy=IfNotPresent\\\r\n    --conf spark.hadoop.fs.s3a.endpoint=https://&lt;s3endpoint&gt;\\\r\n    --conf spark.hadoop.fs.s3a.access.key=id\\\r\n    --conf spark.hadoop.fs.s3a.secret.key=password\\\r\n    --conf spark.hadoop.fs.s3a.fast.upload=true\\\r\n    --conf spark.hadoop.fs.s3a.path.style.access=true\\\r\n    --conf spark.eventLog.dir=s3a://bucket/folder/\\\r\n    --conf spark.history.fs.logDirectory=s3a://bucket/folder/\\\r\n    --conf spark.eventLog.enabled=True\\\r\n    --conf spark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem\\\r\n    --conf spark.kubernetes.namespace=tools\\\r\n    --conf spark.kubernetes.driver.pod.name=spark-p1-driver\\\r\n    --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark\\\r\n    local:///opt/spark/examples/src/main/python/pi.py 10000\r\n```\r\n\r\n**Error:**\r\n\r\n```\r\n21/12/07 20:36:47 INFO SparkUI: Stopped Spark web UI at http://spark-p1-77b0007d969cd3f4-driver-svc.tools.svc:4040                                                                              │\r\n│ 21/12/07 20:36:47 INFO KubernetesClusterSchedulerBackend: Shutting down all executors                                                                                            │\r\n│ 21/12/07 20:36:47 INFO KubernetesClusterSchedulerBackend$KubernetesDriverEndpoint: Asking each executor to shut down                                                                             │\r\n│ 21/12/07 20:36:47 WARN ExecutorPodsWatchSnapshotSource: Kubernetes client has been closed (this is expected if the application is shutting down.)                                                              │\r\n│ 21/12/07 20:36:48 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!                                                                                        │\r\n│ 21/12/07 20:36:48 INFO MemoryStore: MemoryStore cleared                                                                                                           │\r\n│ 21/12/07 20:36:48 INFO BlockManager: BlockManager stopped                                                                                                          │\r\n│ 21/12/07 20:36:48 INFO BlockManagerMaster: BlockManagerMaster stopped                                                                                                    │\r\n│ 21/12/07 20:36:48 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!                                                                               │\r\n│ 21/12/07 20:36:48 INFO SparkContext: Successfully stopped SparkContext                                                                                                    │\r\n│ Traceback (most recent call last):                                                                                                                      │\r\n│  File “/opt/spark/examples/src/main/python/pi.py”, line 29, in &lt;module&gt;                                                                                                   │\r\n│   spark = SparkSession\\                                                                                                                          │\r\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/sql/session.py”, line 228, in getOrCreate                                                                                         │\r\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 384, in getOrCreate                                                                                           │\r\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 146, in __init__                                                                                             │\r\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 209, in _do_init                                                                                             │\r\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 321, in _initialize_context                                                                                       │\r\n│  File “/opt/spark/python/lib/py4j-0.10.9-src.zip/py4j/java_gateway.py”, line 1568, in __call__                                                                                       │\r\n│  File “/opt/spark/python/lib/py4j-0.10.9-src.zip/py4j/protocol.py”, line 326, in get_return_value                                                                                      │\r\n│ py4j.protocol.Py4JJavaError: An error occurred while calling None.org.apache.spark.api.java.JavaSparkContext.                                                                                │\r\n│ : java.nio.file.AccessDeniedException: s3a://dev-hari/playground: getFileStatus on s3a://dev-hari/playground: com.amazonaws.services.s3.model.AmazonS3Exception: Forbidden (Service: Amazon S3; Status Code: 403; Error Code: 403 Forbidden; Request ID: 16BE936C4FC1EB63; S │\r\n│   at org.apache.hadoop.fs.s3a.S3AUtils.translateException(S3AUtils.java:230)                                                                                                │\r\n│   at org.apache.hadoop.fs.s3a.S3AUtils.translateException(S3AUtils.java:151)                                                                                                │\r\n│   at org.apache.hadoop.fs.s3a.S3AFileSystem.s3GetFileStatus(S3AFileSystem.java:2198)                                                                                            │\r\n│   at org.apache.hadoop.fs.s3a.S3AFileSystem.innerGetFileStatus(S3AFileSystem.java:2163)                                                                                          │\r\n│   at org.apache.hadoop.fs.s3a.S3AFileSystem.getFileStatus(S3AFileSystem.java:2102)                                                                                             │\r\n│   at org.apache.spark.deploy.history.EventLogFileWriter.requireLogBaseDirAsDirectory(EventLogFileWriters.scala:77)                                                                             │\r\n│   at org.apache.spark.deploy.history.SingleEventLogFileWriter.start(EventLogFileWriters.scala:221)                                                                                     │\r\n│   at org.apache.spark.scheduler.EventLoggingListener.start(EventLoggingListener.scala:83)                                                                                         │\r\n│   at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:604)                                                                                                     │\r\n│   at org.apache.spark.api.java.JavaSparkContext.&lt;init&gt;(JavaSparkContext.scala:58)                                                                                             │\r\n│   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)                                                                                       │\r\n│   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)                                                                                       │\r\n│   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)                                                                                     │\r\n│   at java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)                                                                                                  │\r\n│   at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:247)                                                                                                     │\r\n│   at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)                                                                                                  │\r\n│   at py4j.Gateway.invoke(Gateway.java:238)                                                                                                                 │\r\n│   at py4j.commands.ConstructorCommand.invokeConstructor(ConstructorCommand.java:80)                                                                                            │\r\n│   at py4j.commands.ConstructorCommand.execute(ConstructorCommand.java:69)                                                                                                 │\r\n│   at py4j.GatewayConnection.run(GatewayConnection.java:238)                                                                                                        │\r\n│   at java.base/java.lang.Thread.run(Unknown Source)                                                                                                            │\r\n│ Caused by: com.amazonaws.services.s3.model.AmazonS3Exception: Forbidden (Service: Amazon S3; Status Code: 403; Error Code: 403 Forbidden; Request ID: 16BE936C4FC1EB63; S3 Extended Request ID: null), S3 Extended Request ID: null                     │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1712)                                                                                  │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1367)                                                                                   │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1113)                                                                                     │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)                                                                                       │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)                                                                                    │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)                                                                                        │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)                                                                                       │\r\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)                                                                                  │\r\n│   at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)                                                                                                │\r\n│   at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)                                                                                                │\r\n│   at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4920)                                                                                               │\r\n│   at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4866)\r\n```","title":"Submitting a job to Kubernetes cluster using Spark-submit","body":"<p>I am trying to save spark-submit (Kubernetes) logs in S3 and I am getting S3 authentication errors.<br />\nCan any-one please help me with it.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>spark-submit\\\n    --master k8s://https://kubernetes.cluster.svc\\\n    --deploy-mode cluster\\\n    --name spark-p1\\\n    --driver-memory 8g\\\n    --executor-memory 10g\\\n    --class org.apache.spark.examples.SparkPi\\\n    --conf spark.executor.instances=2\\\n    --conf spark.kubernetes.container.image=spark-py:v3.1.2.1\\\n    --conf spark.kubernetes.container.image.pullPolicy=IfNotPresent\\\n    --conf spark.hadoop.fs.s3a.endpoint=https://&lt;s3endpoint&gt;\\\n    --conf spark.hadoop.fs.s3a.access.key=id\\\n    --conf spark.hadoop.fs.s3a.secret.key=password\\\n    --conf spark.hadoop.fs.s3a.fast.upload=true\\\n    --conf spark.hadoop.fs.s3a.path.style.access=true\\\n    --conf spark.eventLog.dir=s3a://bucket/folder/\\\n    --conf spark.history.fs.logDirectory=s3a://bucket/folder/\\\n    --conf spark.eventLog.enabled=True\\\n    --conf spark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem\\\n    --conf spark.kubernetes.namespace=tools\\\n    --conf spark.kubernetes.driver.pod.name=spark-p1-driver\\\n    --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark\\\n    local:///opt/spark/examples/src/main/python/pi.py 10000\n</code></pre>\n<p><strong>Error:</strong></p>\n<pre><code>21/12/07 20:36:47 INFO SparkUI: Stopped Spark web UI at http://spark-p1-77b0007d969cd3f4-driver-svc.tools.svc:4040                                                                              │\n│ 21/12/07 20:36:47 INFO KubernetesClusterSchedulerBackend: Shutting down all executors                                                                                            │\n│ 21/12/07 20:36:47 INFO KubernetesClusterSchedulerBackend$KubernetesDriverEndpoint: Asking each executor to shut down                                                                             │\n│ 21/12/07 20:36:47 WARN ExecutorPodsWatchSnapshotSource: Kubernetes client has been closed (this is expected if the application is shutting down.)                                                              │\n│ 21/12/07 20:36:48 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!                                                                                        │\n│ 21/12/07 20:36:48 INFO MemoryStore: MemoryStore cleared                                                                                                           │\n│ 21/12/07 20:36:48 INFO BlockManager: BlockManager stopped                                                                                                          │\n│ 21/12/07 20:36:48 INFO BlockManagerMaster: BlockManagerMaster stopped                                                                                                    │\n│ 21/12/07 20:36:48 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!                                                                               │\n│ 21/12/07 20:36:48 INFO SparkContext: Successfully stopped SparkContext                                                                                                    │\n│ Traceback (most recent call last):                                                                                                                      │\n│  File “/opt/spark/examples/src/main/python/pi.py”, line 29, in &lt;module&gt;                                                                                                   │\n│   spark = SparkSession\\                                                                                                                          │\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/sql/session.py”, line 228, in getOrCreate                                                                                         │\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 384, in getOrCreate                                                                                           │\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 146, in __init__                                                                                             │\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 209, in _do_init                                                                                             │\n│  File “/opt/spark/python/lib/pyspark.zip/pyspark/context.py”, line 321, in _initialize_context                                                                                       │\n│  File “/opt/spark/python/lib/py4j-0.10.9-src.zip/py4j/java_gateway.py”, line 1568, in __call__                                                                                       │\n│  File “/opt/spark/python/lib/py4j-0.10.9-src.zip/py4j/protocol.py”, line 326, in get_return_value                                                                                      │\n│ py4j.protocol.Py4JJavaError: An error occurred while calling None.org.apache.spark.api.java.JavaSparkContext.                                                                                │\n│ : java.nio.file.AccessDeniedException: s3a://dev-hari/playground: getFileStatus on s3a://dev-hari/playground: com.amazonaws.services.s3.model.AmazonS3Exception: Forbidden (Service: Amazon S3; Status Code: 403; Error Code: 403 Forbidden; Request ID: 16BE936C4FC1EB63; S │\n│   at org.apache.hadoop.fs.s3a.S3AUtils.translateException(S3AUtils.java:230)                                                                                                │\n│   at org.apache.hadoop.fs.s3a.S3AUtils.translateException(S3AUtils.java:151)                                                                                                │\n│   at org.apache.hadoop.fs.s3a.S3AFileSystem.s3GetFileStatus(S3AFileSystem.java:2198)                                                                                            │\n│   at org.apache.hadoop.fs.s3a.S3AFileSystem.innerGetFileStatus(S3AFileSystem.java:2163)                                                                                          │\n│   at org.apache.hadoop.fs.s3a.S3AFileSystem.getFileStatus(S3AFileSystem.java:2102)                                                                                             │\n│   at org.apache.spark.deploy.history.EventLogFileWriter.requireLogBaseDirAsDirectory(EventLogFileWriters.scala:77)                                                                             │\n│   at org.apache.spark.deploy.history.SingleEventLogFileWriter.start(EventLogFileWriters.scala:221)                                                                                     │\n│   at org.apache.spark.scheduler.EventLoggingListener.start(EventLoggingListener.scala:83)                                                                                         │\n│   at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:604)                                                                                                     │\n│   at org.apache.spark.api.java.JavaSparkContext.&lt;init&gt;(JavaSparkContext.scala:58)                                                                                             │\n│   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)                                                                                       │\n│   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)                                                                                       │\n│   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)                                                                                     │\n│   at java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)                                                                                                  │\n│   at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:247)                                                                                                     │\n│   at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)                                                                                                  │\n│   at py4j.Gateway.invoke(Gateway.java:238)                                                                                                                 │\n│   at py4j.commands.ConstructorCommand.invokeConstructor(ConstructorCommand.java:80)                                                                                            │\n│   at py4j.commands.ConstructorCommand.execute(ConstructorCommand.java:69)                                                                                                 │\n│   at py4j.GatewayConnection.run(GatewayConnection.java:238)                                                                                                        │\n│   at java.base/java.lang.Thread.run(Unknown Source)                                                                                                            │\n│ Caused by: com.amazonaws.services.s3.model.AmazonS3Exception: Forbidden (Service: Amazon S3; Status Code: 403; Error Code: 403 Forbidden; Request ID: 16BE936C4FC1EB63; S3 Extended Request ID: null), S3 Extended Request ID: null                     │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1712)                                                                                  │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1367)                                                                                   │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1113)                                                                                     │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)                                                                                       │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)                                                                                    │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)                                                                                        │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)                                                                                       │\n│   at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)                                                                                  │\n│   at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)                                                                                                │\n│   at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)                                                                                                │\n│   at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4920)                                                                                               │\n│   at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4866)\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":2,"creation_date":1639421529,"post_id":70339505,"comment_id":124339550,"body_markdown":"In &quot;getTroopDetails()&quot;, I think you meant to call `setupTroop()`, not &quot;getTroopDetails()&quot;","body":"In &quot;getTroopDetails()&quot;, I think you meant to call <code>setupTroop()</code>, not &quot;getTroopDetails()&quot;"},{"owner":{"account_id":19952847,"reputation":62,"user_id":15073364,"display_name":"EngineerHus123"},"score":2,"creation_date":1639421834,"post_id":70339505,"comment_id":124339636,"body_markdown":"@paulsm4 ```Exception in thread &quot;main&quot; java.lang.RuntimeException: Uncompilable source code - Erroneous sym type: OODCwk.SpaceTroops.setupTroop```  this is the error i get if i do that. ```SpaceTroops``` is a class that has the method ```setupTroop```","body":"@paulsm4 <code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Uncompilable source code - Erroneous sym type: OODCwk.SpaceTroops.setupTroop</code>  this is the error i get if i do that. <code>SpaceTroops</code> is a class that has the method <code>setupTroop</code>"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":3,"creation_date":1639422028,"post_id":70339505,"comment_id":124339701,"body_markdown":"What for is recursive invocation `getTroopDetails` in the method `getTroopDetails`?  Method `setupTroop` declared as void but it returns the hashmap `Troop`.","body":"What for is recursive invocation <code>getTroopDetails</code> in the method <code>getTroopDetails</code>?  Method <code>setupTroop</code> declared as void but it returns the hashmap <code>Troop</code>."},{"owner":{"account_id":19952847,"reputation":62,"user_id":15073364,"display_name":"EngineerHus123"},"score":2,"creation_date":1639422464,"post_id":70339505,"comment_id":124339858,"body_markdown":"@AlexRudenko the return value is useless indeed so i removed it","body":"@AlexRudenko the return value is useless indeed so i removed it"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":1,"creation_date":1639423200,"post_id":70339505,"comment_id":124340073,"body_markdown":"In method `setupTroop` a _local_ map is created and therefore it is lost when the method is done.  Method `getTroopDetails` is declared to return `String`, but there is a recursive call where String is assigned to the `HashMap` which cannot be compiled -- this is the error in your question.   Do you have a slightest idea which purpose of this code should be?","body":"In method <code>setupTroop</code> a <i>local</i> map is created and therefore it is lost when the method is done.  Method <code>getTroopDetails</code> is declared to return <code>String</code>, but there is a recursive call where String is assigned to the <code>HashMap</code> which cannot be compiled -- this is the error in your question.   Do you have a slightest idea which purpose of this code should be?"},{"owner":{"account_id":19952847,"reputation":62,"user_id":15073364,"display_name":"EngineerHus123"},"score":0,"creation_date":1639423634,"post_id":70339505,"comment_id":124340224,"body_markdown":"@AlexRudenko what i&#39;m trying to achieve is that once I input ```IW1```, i want the output to be the details of ```IW1``` which is ```1, &quot;Twisters&quot;, 200, 200``` and if any other input is detected it returns ```No such troop```","body":"@AlexRudenko what i&#39;m trying to achieve is that once I input <code>IW1</code>, i want the output to be the details of <code>IW1</code> which is <code>1, &quot;Twisters&quot;, 200, 200</code> and if any other input is detected it returns <code>No such troop</code>"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1639424778,"post_id":70339505,"comment_id":124340564,"body_markdown":"So you want a single method `getTroopDetails` to return results of different types `String` and `HashMap`  depending on the input.  This is not feasible in Java.","body":"So you want a single method <code>getTroopDetails</code> to return results of different types <code>String</code> and <code>HashMap</code>  depending on the input.  This is not feasible in Java."},{"owner":{"account_id":19952847,"reputation":62,"user_id":15073364,"display_name":"EngineerHus123"},"score":0,"creation_date":1639424978,"post_id":70339505,"comment_id":124340626,"body_markdown":"@AlexRudenko how should i go about this then? can you recommend me a way?","body":"@AlexRudenko how should i go about this then? can you recommend me a way?"}],"answers":[{"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639426604,"creation_date":1639426604,"answer_id":70340422,"question_id":70339505,"body_markdown":"There are several different problems here:\r\n\r\n1. **Compile error**:\r\n\r\n   `incompatible types: java.lang.String cannot be converted to java.util.HashMap&lt;java.lang.String,OODCwk.troop&gt;`\r\n\r\n   SOLUTION: Don&#39;t call &quot;String getTroopDetails()&quot; if you need a Hashmap.\r\n\r\n\r\n2. **Bogus call to getTroopDetails() inside method getTroopDetails()**\r\n\r\n   SOLUTION: it sounds like you want to call a different method here.\r\n\r\n3. **Class name &quot;troop&quot; should start with a capital letter**\r\n\r\n  SOLUTION: Per [Java naming conventions](https://www.geeksforgeeks.org/java-naming-conventions/), you should rename your class `Troop`, and its constructor `public troop(int fRef, String fName, int aFee, int bStrength)`\r\n\r\n4. **setupTroop() doesn&#39;t actually do anything**\r\n\r\n  SOLUTION: Move HashMap *OUT* of setupTroop() and make it a member of class &quot;Troop&quot;.\r\n\r\nPer your subsequent comments:\r\n\r\n&gt; @AlexRudenko what i&#39;m trying to achieve is that once I input IW1, i\r\n&gt; want the output to be the details of IW1 which is 1, &quot;Twisters&quot;, 200,\r\n&gt; 200 and if any other input is detected it returns No such troop\r\n\r\nSOLUTION:\r\n* Make HashMap&lt;String, troop&gt; a member variable.\r\n\r\n* Give it a meaningful name, e.g. &quot;troopDetails&quot;\r\n\r\n* Initialize the HashMap in your constructor\r\n\r\n* Return the HashMap in getTroopDetails()\r\n","title":"java.lang.String cannot be converted to java.util.HashMap","body":"<p>There are several different problems here:</p>\n<ol>\n<li><p><strong>Compile error</strong>:</p>\n<p><code>incompatible types: java.lang.String cannot be converted to java.util.HashMap&lt;java.lang.String,OODCwk.troop&gt;</code></p>\n<p>SOLUTION: Don't call &quot;String getTroopDetails()&quot; if you need a Hashmap.</p>\n</li>\n<li><p><strong>Bogus call to getTroopDetails() inside method getTroopDetails()</strong></p>\n<p>SOLUTION: it sounds like you want to call a different method here.</p>\n</li>\n<li><p><strong>Class name &quot;troop&quot; should start with a capital letter</strong></p>\n</li>\n</ol>\n<p>SOLUTION: Per <a href=\"https://www.geeksforgeeks.org/java-naming-conventions/\" rel=\"nofollow noreferrer\">Java naming conventions</a>, you should rename your class <code>Troop</code>, and its constructor <code>public troop(int fRef, String fName, int aFee, int bStrength)</code></p>\n<ol start=\"4\">\n<li><strong>setupTroop() doesn't actually do anything</strong></li>\n</ol>\n<p>SOLUTION: Move HashMap <em>OUT</em> of setupTroop() and make it a member of class &quot;Troop&quot;.</p>\n<p>Per your subsequent comments:</p>\n<blockquote>\n<p>@AlexRudenko what i'm trying to achieve is that once I input IW1, i\nwant the output to be the details of IW1 which is 1, &quot;Twisters&quot;, 200,\n200 and if any other input is detected it returns No such troop</p>\n</blockquote>\n<p>SOLUTION:</p>\n<ul>\n<li><p>Make HashMap&lt;String, troop&gt; a member variable.</p>\n</li>\n<li><p>Give it a meaningful name, e.g. &quot;troopDetails&quot;</p>\n</li>\n<li><p>Initialize the HashMap in your constructor</p>\n</li>\n<li><p>Return the HashMap in getTroopDetails()</p>\n</li>\n</ul>\n"}],"owner":{"account_id":19952847,"reputation":62,"user_id":15073364,"display_name":"EngineerHus123"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2704,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1639426604,"creation_date":1639421244,"question_id":70339505,"body_markdown":"When I run my code I get a screen that asks for a reference(already coded and works perfectly). So when I input ```IW1``` for reference my output should be the details of ```IW1``` which is ```&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200))```. However I get with the following error:\r\n\r\n```Exception in thread &quot;main&quot; java.lang.RuntimeException: Uncompilable source code - incompatible types: java.lang.String cannot be converted to java.util.HashMap&lt;java.lang.String,OODCwk.troop&gt;```\r\n\r\nThe ```OODCwk```is the name of the package\r\n\r\n\r\n```\r\npublic String getTroopDetails(String ref)\r\n    {\r\n        if (&quot;IW1&quot;.equals(ref) ){\r\n            HashMap&lt;String, troop&gt; Troop= getTroopDetails(ref);\r\n            System.out.println(Troop.get(&quot;IW1&quot;));\r\n            \r\n            \r\n        }else{\r\n            return &quot;!&quot;;\r\n        } \r\n        return &quot;\\nNo such troop&quot;;\r\n    }\r\n\r\nprivate void setupTroop()\r\n    {\r\n        HashMap&lt;String, troop&gt;Troop= new HashMap&lt;String, troop&gt;();\r\n        \r\n        Troop.put(&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200)); \r\n \r\n    }\r\n\r\n\r\npublic class troop{\r\n    int FleetRef;\r\n    String FullName;\r\n    int ActivationFee;\r\n    int BattleStrength; \r\n    \r\n    public troop(int FRef, String FName, int AFee, int BStrength)\r\n    {\r\n        FleetRef = FRef;\r\n        FullName = FName;\r\n        ActivationFee = AFee;\r\n        BattleStrength = BStrength;\r\n    }\r\n    \r\n    public int getFleetRef()\r\n    {\r\n        return FleetRef;\r\n    }\r\n    public String getFullName()\r\n    {\r\n        return FullName;\r\n    }\r\n    public int getActivationFee()\r\n    {\r\n        return ActivationFee;\r\n    }\r\n\r\n    public int BattleStrength()\r\n    {\r\n        return BattleStrength;\r\n    }\r\n}\r\n\r\n","title":"java.lang.String cannot be converted to java.util.HashMap","body":"<p>When I run my code I get a screen that asks for a reference(already coded and works perfectly). So when I input <code>IW1</code> for reference my output should be the details of <code>IW1</code> which is <code>&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200))</code>. However I get with the following error:</p>\n<p><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Uncompilable source code - incompatible types: java.lang.String cannot be converted to java.util.HashMap&lt;java.lang.String,OODCwk.troop&gt;</code></p>\n<p>The <code>OODCwk</code>is the name of the package</p>\n<pre><code>public String getTroopDetails(String ref)\n    {\n        if (&quot;IW1&quot;.equals(ref) ){\n            HashMap&lt;String, troop&gt; Troop= getTroopDetails(ref);\n            System.out.println(Troop.get(&quot;IW1&quot;));\n            \n            \n        }else{\n            return &quot;!&quot;;\n        } \n        return &quot;\\nNo such troop&quot;;\n    }\n\nprivate void setupTroop()\n    {\n        HashMap&lt;String, troop&gt;Troop= new HashMap&lt;String, troop&gt;();\n        \n        Troop.put(&quot;IW1&quot;, new troop(1, &quot;Twisters&quot;, 200, 200)); \n \n    }\n\n\npublic class troop{\n    int FleetRef;\n    String FullName;\n    int ActivationFee;\n    int BattleStrength; \n    \n    public troop(int FRef, String FName, int AFee, int BStrength)\n    {\n        FleetRef = FRef;\n        FullName = FName;\n        ActivationFee = AFee;\n        BattleStrength = BStrength;\n    }\n    \n    public int getFleetRef()\n    {\n        return FleetRef;\n    }\n    public String getFullName()\n    {\n        return FullName;\n    }\n    public int getActivationFee()\n    {\n        return ActivationFee;\n    }\n\n    public int BattleStrength()\n    {\n        return BattleStrength;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":23637480,"reputation":19,"user_id":17668289,"display_name":"RoronoaNewJavaBoy"},"score":0,"creation_date":1639425174,"post_id":70340210,"comment_id":124340689,"body_markdown":"to be more clear , \nArray List&lt;Patient&gt; patient List = new Array List&lt;&gt;(3);\npatient List .add(patient1);\npatient List .add(patient2);\n\n\n*sorry for the spaces*\nso at index 2 there is no objects but at 0,1 there is","body":"to be more clear ,  Array List&lt;Patient&gt; patient List = new Array List&lt;&gt;(3); patient List .add(patient1); patient List .add(patient2);   <i>sorry for the spaces</i> so at index 2 there is no objects but at 0,1 there is"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1639425230,"post_id":70340210,"comment_id":124340707,"body_markdown":"What part of of &quot;loop around the array list and check at which index there is object or not&quot; are you not sure can be done?","body":"What part of of &quot;loop around the array list and check at which index there is object or not&quot; are you not sure can be done?"},{"owner":{"account_id":23637480,"reputation":19,"user_id":17668289,"display_name":"RoronoaNewJavaBoy"},"score":0,"creation_date":1639426008,"post_id":70340210,"comment_id":124340936,"body_markdown":"@ScottHunter whether i can detect the indices where the arrayList is empty or no","body":"@ScottHunter whether i can detect the indices where the arrayList is empty or no"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639426581,"creation_date":1639425411,"answer_id":70340254,"question_id":70340210,"body_markdown":"You can do it like this.\r\n- stream the indices of the list\r\n- filter those locations that are null\r\n- put them in an array\r\n```\r\nList&lt;String&gt; list = Arrays.asList(&quot;a&quot;,null,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,null,&quot;e&quot;);\r\n\r\nint[] nullLocations = IntStream.range(0,list.size())\r\n        .filter(i-&gt;list.get(i) == null)\r\n        .toArray();\r\n\r\nSystem.out.println(Arrays.toString(nullLocations));\r\n```\r\nprints\r\n```\r\n[1, 5]\r\n```\r\nHere is a non-streams version using the same list as above\r\n```\t\t\r\nList&lt;Integer&gt; nullLocations = new ArrayList&lt;&gt;();\r\nfor (int i = 0; i &lt; list.size(); i++) {\r\n     if (list.get(i) == null) {\r\n         nullLocations.add(i);\r\n     }\r\n}\r\nSystem.out.println(nullLocations);\r\n```\r\nprints\r\n```\r\n[1, 5]\t\t","title":"finding if an element at given index is empty or not , at arrayalist","body":"<p>You can do it like this.</p>\n<ul>\n<li>stream the indices of the list</li>\n<li>filter those locations that are null</li>\n<li>put them in an array</li>\n</ul>\n<pre><code>List&lt;String&gt; list = Arrays.asList(&quot;a&quot;,null,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,null,&quot;e&quot;);\n\nint[] nullLocations = IntStream.range(0,list.size())\n        .filter(i-&gt;list.get(i) == null)\n        .toArray();\n\nSystem.out.println(Arrays.toString(nullLocations));\n</code></pre>\n<p>prints</p>\n<pre><code>[1, 5]\n</code></pre>\n<p>Here is a non-streams version using the same list as above</p>\n<pre><code>List&lt;Integer&gt; nullLocations = new ArrayList&lt;&gt;();\nfor (int i = 0; i &lt; list.size(); i++) {\n     if (list.get(i) == null) {\n         nullLocations.add(i);\n     }\n}\nSystem.out.println(nullLocations);\n</code></pre>\n<p>prints</p>\n<pre><code>[1, 5]      \n</code></pre>\n"}],"owner":{"account_id":23637480,"reputation":19,"user_id":17668289,"display_name":"RoronoaNewJavaBoy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":940,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1639426581,"creation_date":1639425137,"question_id":70340210,"body_markdown":"let&#39;s assume that we have an array list of size 3, of some object type (say class named Patient that has attributes of it&#39;s own).\r\n\r\nso we know about the is Empty() method that checks if the entire given array list is empty or no, but is there a way to loop around the array list and check at which index there is object or not.\r\n\r\n","title":"finding if an element at given index is empty or not , at arrayalist","body":"<p>let's assume that we have an array list of size 3, of some object type (say class named Patient that has attributes of it's own).</p>\n<p>so we know about the is Empty() method that checks if the entire given array list is empty or no, but is there a way to loop around the array list and check at which index there is object or not.</p>\n"},{"tags":["java","parsing","antlr4","visitor-pattern"],"answers":[{"tags":[],"owner":{"account_id":27816,"reputation":6650,"user_id":73764,"accept_rate":91,"display_name":"Mike Cargal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639426164,"creation_date":1639426164,"answer_id":70340360,"question_id":70339829,"body_markdown":"If you read it out loud, this definition, doesn&#39;t make much sense:\r\n```java\r\npublic Command visitCommands(ShellGrammarParser.CommandsContext ctx) {\r\n```\r\n\r\nYou&#39;re visiting `commands` but expect a `Command` in return??\r\n\r\nIn this simple case, it&#39;s probably best to remember that a Visitor doesn&#39;t need to handle visiting *EVERY* Context type (it&#39;s rather rare that that works for a full grammar, as finding a common return type applicable for all nodes proves to be difficult).  You can just override the methods for Context types you actually intend to visit.\r\n\r\nIn your case, `commands` is you &quot;top-level&quot; rule, so the parse tree node you get back from your parse (using the `parser.commands();` call) will be a `CommandsContext`\r\n\r\nyou could do something akin to:  (where `pt` is the node you got back from the parse.)\r\n\r\n```java\r\n  for (AtomicCommandContext child : pt.children) {\r\n   // handle the child command\r\n   // could be adding it to a list\r\n   // could be just processing the command \r\n  }\r\n```\r\n\r\nThe benefit of commands is that you&#39;re in charge of calling the visitor for each child.  `visitChildren` is just a convenience methods that iterates through all the children calling the visitor for you.\r\n\r\nThere are methods in the `Visitor` class that you can override if you want to make your visitor return a `List&lt;Command&gt;` from calling `visitChildren()`, but the code above is probably simplest for what you&#39;re asking.","title":"How to obtain multiple commands in antlr4?","body":"<p>If you read it out loud, this definition, doesn't make much sense:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Command visitCommands(ShellGrammarParser.CommandsContext ctx) {\n</code></pre>\n<p>You're visiting <code>commands</code> but expect a <code>Command</code> in return??</p>\n<p>In this simple case, it's probably best to remember that a Visitor doesn't need to handle visiting <em>EVERY</em> Context type (it's rather rare that that works for a full grammar, as finding a common return type applicable for all nodes proves to be difficult).  You can just override the methods for Context types you actually intend to visit.</p>\n<p>In your case, <code>commands</code> is you &quot;top-level&quot; rule, so the parse tree node you get back from your parse (using the <code>parser.commands();</code> call) will be a <code>CommandsContext</code></p>\n<p>you could do something akin to:  (where <code>pt</code> is the node you got back from the parse.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>  for (AtomicCommandContext child : pt.children) {\n   // handle the child command\n   // could be adding it to a list\n   // could be just processing the command \n  }\n</code></pre>\n<p>The benefit of commands is that you're in charge of calling the visitor for each child.  <code>visitChildren</code> is just a convenience methods that iterates through all the children calling the visitor for you.</p>\n<p>There are methods in the <code>Visitor</code> class that you can override if you want to make your visitor return a <code>List&lt;Command&gt;</code> from calling <code>visitChildren()</code>, but the code above is probably simplest for what you're asking.</p>\n"}],"owner":{"account_id":15135299,"reputation":49,"user_id":10921970,"display_name":"darryl247"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70340360,"answer_count":1,"score":0,"last_activity_date":1639426164,"creation_date":1639423021,"question_id":70339829,"body_markdown":"I&#39;m developing a shell implementation in Java and I&#39;m using antlr4 to parse the grammar. I would like to parse the input commands one by one and store them in an arraylist where I will execute the commands later. \r\n\r\nFor example, an input of &quot;echo hello; echo world&quot; should return an arraylist of two Call objects. If it helps, a Call object represents a simple command.\r\n\r\nHowever, the return value of the visitChildren method is being overwritten by the latest parsed command. How can I parse one command, add it to my arraylist, then continue parsing the next command and so on?\r\n\r\n\r\n**CommandConverter.java**\r\n```\r\npackage parse;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport app.ApplicationFactory;\r\nimport shell.ShellGrammarBaseVisitor;\r\nimport shell.ShellGrammarParser;\r\n\r\npublic class CommandConverter extends ShellGrammarBaseVisitor&lt;Command&gt; {\r\n    \r\n    ApplicationFactory appFactory = new ApplicationFactory();\r\n\r\n    @Override\r\n    public Command visitCommands(ShellGrammarParser.CommandsContext ctx) {\r\n        //ArrayList&lt;Command&gt; commands = new ArrayList&lt;&gt;();\r\n        return visitChildren(ctx);\r\n    }\r\n    @Override\r\n    public Command visitAtomicCommand(ShellGrammarParser.AtomicCommandContext ctx) {\r\n        int childCount = ctx.getChildCount();\r\n        String appName = ctx.getChild(0).getText();\r\n        ArrayList&lt;String&gt; appArgs = new ArrayList&lt;&gt;();\r\n        if(childCount &gt; 1) {\r\n            for (int i = 1; i &lt; childCount; i++) {\r\n                appArgs.add(ctx.getChild(i).getText());\r\n            }\r\n        }\r\n        return new Call(appFactory.getApplication(appName), appArgs);\r\n    }\r\n}\r\n```\r\n\r\n\r\n**ShellGrammar.g4 (partially)**\r\n```\r\ngrammar ShellGrammar;\r\n\r\n/*\r\n * Parser Rules\r\n */\r\n\r\ncommands : atomicCommand (&#39;;&#39; atomicCommand )*\r\n\r\natomicCommand : NONSPECIAL (value)*;\r\n\r\nvalue : (NONSPECIAL | DOUBLEQUOTED | SINGLEQUOTED);\r\n\r\n/*\r\n * Lexer Rules\r\n */\r\nNONSPECIAL : ~[&#39;&quot;;\\r\\n\\t ]+;\r\nDOUBLEQUOTED : &#39;&quot;&#39; (~&#39;&quot;&#39;)* &#39;&quot;&#39;;\r\nSINGLEQUOTED : &#39;\\&#39;&#39; (~&#39;\\&#39;&#39;)* &#39;\\&#39;&#39;;\r\n\r\nWHITESPACE : [\\r\\n\\t ]+ -&gt; skip ;\r\n```","title":"How to obtain multiple commands in antlr4?","body":"<p>I'm developing a shell implementation in Java and I'm using antlr4 to parse the grammar. I would like to parse the input commands one by one and store them in an arraylist where I will execute the commands later.</p>\n<p>For example, an input of &quot;echo hello; echo world&quot; should return an arraylist of two Call objects. If it helps, a Call object represents a simple command.</p>\n<p>However, the return value of the visitChildren method is being overwritten by the latest parsed command. How can I parse one command, add it to my arraylist, then continue parsing the next command and so on?</p>\n<p><strong>CommandConverter.java</strong></p>\n<pre><code>package parse;\n\nimport java.util.ArrayList;\n\nimport app.ApplicationFactory;\nimport shell.ShellGrammarBaseVisitor;\nimport shell.ShellGrammarParser;\n\npublic class CommandConverter extends ShellGrammarBaseVisitor&lt;Command&gt; {\n    \n    ApplicationFactory appFactory = new ApplicationFactory();\n\n    @Override\n    public Command visitCommands(ShellGrammarParser.CommandsContext ctx) {\n        //ArrayList&lt;Command&gt; commands = new ArrayList&lt;&gt;();\n        return visitChildren(ctx);\n    }\n    @Override\n    public Command visitAtomicCommand(ShellGrammarParser.AtomicCommandContext ctx) {\n        int childCount = ctx.getChildCount();\n        String appName = ctx.getChild(0).getText();\n        ArrayList&lt;String&gt; appArgs = new ArrayList&lt;&gt;();\n        if(childCount &gt; 1) {\n            for (int i = 1; i &lt; childCount; i++) {\n                appArgs.add(ctx.getChild(i).getText());\n            }\n        }\n        return new Call(appFactory.getApplication(appName), appArgs);\n    }\n}\n</code></pre>\n<p><strong>ShellGrammar.g4 (partially)</strong></p>\n<pre><code>grammar ShellGrammar;\n\n/*\n * Parser Rules\n */\n\ncommands : atomicCommand (';' atomicCommand )*\n\natomicCommand : NONSPECIAL (value)*;\n\nvalue : (NONSPECIAL | DOUBLEQUOTED | SINGLEQUOTED);\n\n/*\n * Lexer Rules\n */\nNONSPECIAL : ~['&quot;;\\r\\n\\t ]+;\nDOUBLEQUOTED : '&quot;' (~'&quot;')* '&quot;';\nSINGLEQUOTED : '\\'' (~'\\'')* '\\'';\n\nWHITESPACE : [\\r\\n\\t ]+ -&gt; skip ;\n</code></pre>\n"},{"tags":["java","object","arraylist","collections"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":2,"creation_date":1639418247,"post_id":70338923,"comment_id":124338527,"body_markdown":"Why not try it? Replace `Object` with `Process` and check if it works.","body":"Why not try it? Replace <code>Object</code> with <code>Process</code> and check if it works."}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1639418641,"creation_date":1639418641,"answer_id":70339054,"question_id":70338923,"body_markdown":"When you turn to the javadoc for the [sort][1] method you find that it accepts `Comparator&lt;? super T&gt; c` as argument.\r\n\r\n`Object` is a supertype of `Process` therefore the given example is correct java code. \r\n\r\nNow: depending on your requirements, there might be a valid reason to actually work with a supertype, but not here: the given example could in fact use `Process` directly, which would allow to drop the type casts within the body of the lambda.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator)","title":"what is the meaning of object here in collections.sort?","body":"<p>When you turn to the javadoc for the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator)\" rel=\"nofollow noreferrer\">sort</a> method you find that it accepts <code>Comparator&lt;? super T&gt; c</code> as argument.</p>\n<p><code>Object</code> is a supertype of <code>Process</code> therefore the given example is correct java code.</p>\n<p>Now: depending on your requirements, there might be a valid reason to actually work with a supertype, but not here: the given example could in fact use <code>Process</code> directly, which would allow to drop the type casts within the body of the lambda.</p>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639425825,"creation_date":1639425825,"answer_id":70340327,"question_id":70338923,"body_markdown":"`(Object o1, Object o2)` refer to the arguments of [`Comparator::compareTo`](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#compare-T-T-) method, however, `Process` type should be used instead of Object to avoid redundant casting.\r\n\r\nAlso, depending on the type of `Process::getRemaningTime`, the body of the method may be reduced significantly.\r\n\r\nAssuming `getRemaningTime` returns a long value, the code may be rewritten as:\r\n```java\r\npublic static void sortremaning(ArrayList&lt;Process&gt; L) {\r\n    Collections.sort(L, (p1, p2) -&gt; Long.compareTo(p1.getRemaningTime(), p2.getRemaningTime()));\r\n}\r\n\r\n// or even simpler\r\npublic static void sortRemaning(ArrayList&lt;Process&gt; L) {\r\n    Collections.sort(L, Comparator.comparingLong(Process::getRemaningTime));\r\n}\r\n```\r\n\r\nIn general case, the value returned by `getRemaningTime` should be of `Comparable` type, then the method can be updated as to use [`Comparator.comparing(Function&lt;? super T,? extends U&gt; keyExtractor)`](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparing-java.util.function.Function-):\r\n```java\r\npublic static void sortRemaning(List&lt;Process&gt; list) {\r\n    Collections.sort(list, Comparator.comparing(Process::getRemaningTime));\r\n}\r\n```","title":"what is the meaning of object here in collections.sort?","body":"<p><code>(Object o1, Object o2)</code> refer to the arguments of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#compare-T-T-\" rel=\"nofollow noreferrer\"><code>Comparator::compareTo</code></a> method, however, <code>Process</code> type should be used instead of Object to avoid redundant casting.</p>\n<p>Also, depending on the type of <code>Process::getRemaningTime</code>, the body of the method may be reduced significantly.</p>\n<p>Assuming <code>getRemaningTime</code> returns a long value, the code may be rewritten as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void sortremaning(ArrayList&lt;Process&gt; L) {\n    Collections.sort(L, (p1, p2) -&gt; Long.compareTo(p1.getRemaningTime(), p2.getRemaningTime()));\n}\n\n// or even simpler\npublic static void sortRemaning(ArrayList&lt;Process&gt; L) {\n    Collections.sort(L, Comparator.comparingLong(Process::getRemaningTime));\n}\n</code></pre>\n<p>In general case, the value returned by <code>getRemaningTime</code> should be of <code>Comparable</code> type, then the method can be updated as to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparing-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Comparator.comparing(Function&lt;? super T,? extends U&gt; keyExtractor)</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void sortRemaning(List&lt;Process&gt; list) {\n    Collections.sort(list, Comparator.comparing(Process::getRemaningTime));\n}\n</code></pre>\n"}],"owner":{"account_id":21854669,"reputation":1,"user_id":16146255,"display_name":"user16146255"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1639425825,"creation_date":1639418034,"question_id":70338923,"body_markdown":"what is the meaning of object o1,o2 here in collections.sort? and why he didn&#39;t write Process instead of object beacuse our list is based on process object \r\n\r\n\r\n\r\n \r\n\r\n    public static void sortremaning(ArrayList&lt;Process&gt; L) {\r\n        Collections.sort(L, (Object o1, Object o2) -&gt; {\r\n            if (((Process) o1).getRemaningtime() == ((Process) o2).getRemaningtime()) {\r\n                return 0;\r\n            } else if (((Process) o1).getRemaningtime() &lt; ((Process) o2).getRemaningtime()) {\r\n                return -1;\r\n            } else {\r\n                return 1;\r\n            }\r\n        });\r\n    }\r\n\r\n","title":"what is the meaning of object here in collections.sort?","body":"<p>what is the meaning of object o1,o2 here in collections.sort? and why he didn't write Process instead of object beacuse our list is based on process object</p>\n<pre><code>public static void sortremaning(ArrayList&lt;Process&gt; L) {\n    Collections.sort(L, (Object o1, Object o2) -&gt; {\n        if (((Process) o1).getRemaningtime() == ((Process) o2).getRemaningtime()) {\n            return 0;\n        } else if (((Process) o1).getRemaningtime() &lt; ((Process) o2).getRemaningtime()) {\n            return -1;\n        } else {\n            return 1;\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":11056901,"reputation":1178,"user_id":8119498,"accept_rate":100,"display_name":"sf_"},"score":0,"creation_date":1497871854,"post_id":44629289,"comment_id":76244286,"body_markdown":"Maybe try to manually write permission for Get request `.antMatchers(HttpMethod.GET, &quot;/&quot;).permitAll()`","body":"Maybe try to manually write permission for Get request <code>.antMatchers(HttpMethod.GET, &quot;&#47;&quot;).permitAll()</code>"},{"owner":{"account_id":2000678,"reputation":3210,"user_id":1791812,"accept_rate":50,"display_name":"lukassz"},"score":0,"creation_date":1497871981,"post_id":44629289,"comment_id":76244379,"body_markdown":"Not working with this.","body":"Not working with this."},{"owner":{"account_id":11056901,"reputation":1178,"user_id":8119498,"accept_rate":100,"display_name":"sf_"},"score":0,"creation_date":1497872026,"post_id":44629289,"comment_id":76244419,"body_markdown":"And `.antMatchers(HttpMethod.GET, &quot;/*&quot;).permitAll()` ?","body":"And <code>.antMatchers(HttpMethod.GET, &quot;&#47;*&quot;).permitAll()</code> ?"},{"owner":{"account_id":2000678,"reputation":3210,"user_id":1791812,"accept_rate":50,"display_name":"lukassz"},"score":0,"creation_date":1497872217,"post_id":44629289,"comment_id":76244539,"body_markdown":"The same problem","body":"The same problem"}],"answers":[{"tags":[],"owner":{"account_id":11056901,"reputation":1178,"user_id":8119498,"accept_rate":100,"display_name":"sf_"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1497881510,"creation_date":1497872644,"answer_id":44629660,"question_id":44629289,"body_markdown":"Found next:\r\n\r\n&gt; When using `permitAll` it means every authenticated user, however you disabled anonymous access so that won&#39;t work.\r\n\r\nTry [this][1]\r\n\r\nThis works for me, add example:\r\n\r\n    http.csrf().disable()\r\n                    .anonymous().authorities(&quot;ROLE_ANONYMOUS&quot;)\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n                    .antMatchers(HttpMethod.GET, appConfigHolder.getSecurity().getLoginUrl()).permitAll()\r\n\r\n\r\n\r\n\r\n*Edited:*\r\n\r\nProblem was in Spring version. With v1.4.3.REALESE no problems.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33329438/8119498","title":"Spring Security disable default login page","body":"<p>Found next:</p>\n\n<blockquote>\n  <p>When using <code>permitAll</code> it means every authenticated user, however you disabled anonymous access so that won't work.</p>\n</blockquote>\n\n<p>Try <a href=\"https://stackoverflow.com/a/33329438/8119498\">this</a></p>\n\n<p>This works for me, add example:</p>\n\n<pre><code>http.csrf().disable()\n                .anonymous().authorities(\"ROLE_ANONYMOUS\")\n                .and()\n                .authorizeRequests()\n                .antMatchers(HttpMethod.OPTIONS, \"/**\").permitAll()\n                .antMatchers(HttpMethod.GET, appConfigHolder.getSecurity().getLoginUrl()).permitAll()\n</code></pre>\n\n<p><em>Edited:</em></p>\n\n<p>Problem was in Spring version. With v1.4.3.REALESE no problems.</p>\n"},{"tags":[],"owner":{"account_id":422488,"reputation":942,"user_id":801300,"accept_rate":40,"display_name":"Dapper Dan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538590719,"creation_date":1538590719,"answer_id":52633388,"question_id":44629289,"body_markdown":"Spring boot user, You can disable the default login page by extending  WebSecurityConfigurerAdapter class and provide an access permit to &quot;/login&quot; page and Get request. \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurity extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.csrf().disable()\r\n                    .authorizeRequests().antMatchers(HttpMethod.OPTIONS,&quot;*/&quot;).permitAll()\r\n                    .antMatchers(HttpMethod.GET,&quot;/login&quot;).permitAll();\r\n        }\r\n    }","title":"Spring Security disable default login page","body":"<p>Spring boot user, You can disable the default login page by extending  WebSecurityConfigurerAdapter class and provide an access permit to \"/login\" page and Get request. </p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurity extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeRequests().antMatchers(HttpMethod.OPTIONS,\"*/\").permitAll()\n                .antMatchers(HttpMethod.GET,\"/login\").permitAll();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11004129,"reputation":181,"user_id":8083653,"display_name":"loroz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1552003838,"creation_date":1552003838,"answer_id":55054842,"question_id":44629289,"body_markdown":"To disable the default login page (and thus disable Spring&#39;s basic security features), make sure your @SpringBootApplication annotation looks like this:\r\n\r\n```\r\n@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\r\npublic class MyApp{\r\n \r\n    public static void main(String[] args) {\r\n        SpringApplication.run(MyApp.class, args);\r\n    }\r\n}\r\n```\r\n\r\nThe important part is: ```@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })```. This disables the automatic configuration of Spring&#39;s security features. \r\n\r\nI found this helpful: https://www.baeldung.com/spring-boot-security-autoconfiguration","title":"Spring Security disable default login page","body":"<p>To disable the default login page (and thus disable Spring's basic security features), make sure your @SpringBootApplication annotation looks like this:</p>\n\n<pre><code>@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\npublic class MyApp{\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyApp.class, args);\n    }\n}\n</code></pre>\n\n<p>The important part is: <code>@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })</code>. This disables the automatic configuration of Spring's security features. </p>\n\n<p>I found this helpful: <a href=\"https://www.baeldung.com/spring-boot-security-autoconfiguration\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-security-autoconfiguration</a></p>\n"},{"tags":[],"owner":{"account_id":23631687,"reputation":11,"user_id":17663319,"display_name":"felord.cn"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639425624,"creation_date":1639384211,"answer_id":70331773,"question_id":44629289,"body_markdown":"If you want to disable the default login page of Spring Security, you can do like this:\r\n\r\n       http.removeConfigurer(DefaultLoginPageConfigurer.class);\r\n\r\nBoth `DefaultLoginPageGeneratingFilter` and `DefaultLogoutPageGeneratingFilter` will be disabled.\r\n\r\n ","title":"Spring Security disable default login page","body":"<p>If you want to disable the default login page of Spring Security, you can do like this:</p>\n<pre><code>   http.removeConfigurer(DefaultLoginPageConfigurer.class);\n</code></pre>\n<p>Both <code>DefaultLoginPageGeneratingFilter</code> and <code>DefaultLogoutPageGeneratingFilter</code> will be disabled.</p>\n"}],"owner":{"account_id":2000678,"reputation":3210,"user_id":1791812,"accept_rate":50,"display_name":"lukassz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17941,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":44629660,"answer_count":4,"score":2,"last_activity_date":1639425624,"creation_date":1497871451,"question_id":44629289,"body_markdown":"I would like intergrate Spring Security in my rest API. I have problem because my configration blocing all routes. \r\n\r\nMy configuration: \r\n\r\n    @Configuration\r\n    @EnableResourceServer\r\n    public class OAuth2ResourceServerConfig extends ResourceServerConfigurerAdapter {\r\n    \r\n        @Override\r\n        public void configure(HttpSecurity http) throws Exception {\r\n            http.csrf().disable();\r\n            http.authorizeRequests()\r\n                    .antMatchers(&quot;/&quot;).permitAll()\r\n                    .antMatchers(HttpMethod.POST,&quot;/api/getNews&quot;).hasRole(&quot;ADMIN&quot;);\r\n        }\r\n    }\r\n\r\nWhen I want `GET` on `http://localhost:8080/` spring returns login form\r\n\r\n\r\n    &lt;html&gt;\r\n\t\t&lt;head&gt;\r\n\t\t\t&lt;title&gt;Login Page&lt;/title&gt;\r\n\t\t&lt;/head&gt;\r\n\t\t&lt;body onload=&#39;document.f.username.focus();&#39;&gt;\r\n\t\t\t&lt;h3&gt;Login with Username and Password&lt;/h3&gt;\r\n\t\t\t&lt;form name=&#39;f&#39; action=&#39;/login&#39; method=&#39;POST&#39;&gt;\r\n\t\t\t\t&lt;table&gt;\r\n\t\t\t\t\t&lt;tr&gt;&lt;td&gt;User:&lt;/td&gt;&lt;td&gt;&lt;input type=&#39;text&#39; name=&#39;username&#39; value=&#39;&#39;&gt;&lt;/td&gt;&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;&lt;td&gt;Password:&lt;/td&gt;&lt;td&gt;&lt;input type=&#39;password&#39; name=&#39;password&#39;/&gt;&lt;/td&gt;&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;&lt;td colspan=&#39;2&#39;&gt;&lt;input name=&quot;submit&quot; type=&quot;submit&quot; value=&quot;Login&quot;/&gt;&lt;/td&gt;&lt;/tr&gt;\r\n\t\t\t\t\t&lt;input name=&quot;_csrf&quot; type=&quot;hidden&quot; value=&quot;5453a3c5-2573-4861-b777-d008b04863c3&quot; /&gt;\r\n\t\t\t\t&lt;/table&gt;\r\n\t\t\t&lt;/form&gt;\r\n\t\t&lt;/body&gt;\r\n\t&lt;/html&gt;\r\n\r\nBut I have a rule for `/` to permit. Why I don&#39;t have access to my API?","title":"Spring Security disable default login page","body":"<p>I would like intergrate Spring Security in my rest API. I have problem because my configration blocing all routes. </p>\n\n<p>My configuration: </p>\n\n<pre><code>@Configuration\n@EnableResourceServer\npublic class OAuth2ResourceServerConfig extends ResourceServerConfigurerAdapter {\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable();\n        http.authorizeRequests()\n                .antMatchers(\"/\").permitAll()\n                .antMatchers(HttpMethod.POST,\"/api/getNews\").hasRole(\"ADMIN\");\n    }\n}\n</code></pre>\n\n<p>When I want <code>GET</code> on <code>http://localhost:8080/</code> spring returns login form</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Login Page&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body onload='document.f.username.focus();'&gt;\n        &lt;h3&gt;Login with Username and Password&lt;/h3&gt;\n        &lt;form name='f' action='/login' method='POST'&gt;\n            &lt;table&gt;\n                &lt;tr&gt;&lt;td&gt;User:&lt;/td&gt;&lt;td&gt;&lt;input type='text' name='username' value=''&gt;&lt;/td&gt;&lt;/tr&gt;\n                &lt;tr&gt;&lt;td&gt;Password:&lt;/td&gt;&lt;td&gt;&lt;input type='password' name='password'/&gt;&lt;/td&gt;&lt;/tr&gt;\n                &lt;tr&gt;&lt;td colspan='2'&gt;&lt;input name=\"submit\" type=\"submit\" value=\"Login\"/&gt;&lt;/td&gt;&lt;/tr&gt;\n                &lt;input name=\"_csrf\" type=\"hidden\" value=\"5453a3c5-2573-4861-b777-d008b04863c3\" /&gt;\n            &lt;/table&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>But I have a rule for <code>/</code> to permit. Why I don't have access to my API?</p>\n"},{"tags":["java","amazon-web-services","amazon-ec2","multipartform-data"],"answers":[{"tags":[],"owner":{"account_id":4707998,"reputation":1680,"user_id":3857769,"display_name":"Paul-Beyond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639390366,"creation_date":1639390366,"answer_id":70332979,"question_id":70301957,"body_markdown":"If you are using the AWS SDK for Java, then the maximum is 5 TB per object (in an HTTP PUT request).\r\n\r\n&quot;Individual Amazon S3 objects can range in size from a minimum of 0 bytes to a maximum of 5 terabytes.&quot;\r\n\r\nReference: https://aws.amazon.com/s3/faqs/\r\n\r\nExample Java code with AWS SDK: https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html\r\n\r\nFurthermore, the maximum file upload size to AWS S3 is 160 GB if you are not using AWS CLI or AWS SDK.\r\n\r\n&quot;You can upload any file type—images, backups, data, movies, etc.—into an S3 bucket. The maximum size of a file that you can upload by using the Amazon S3 console is 160 GB. To upload a file larger than 160 GB, use the AWS CLI, AWS SDK, or Amazon S3 REST API.&quot;\r\n\r\nReference: https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html","title":"What is the maximum file upload Size in Java when uploading to AWS S3?","body":"<p>If you are using the AWS SDK for Java, then the maximum is 5 TB per object (in an HTTP PUT request).</p>\n<p>&quot;Individual Amazon S3 objects can range in size from a minimum of 0 bytes to a maximum of 5 terabytes.&quot;</p>\n<p>Reference: <a href=\"https://aws.amazon.com/s3/faqs/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/s3/faqs/</a></p>\n<p>Example Java code with AWS SDK: <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html</a></p>\n<p>Furthermore, the maximum file upload size to AWS S3 is 160 GB if you are not using AWS CLI or AWS SDK.</p>\n<p>&quot;You can upload any file type—images, backups, data, movies, etc.—into an S3 bucket. The maximum size of a file that you can upload by using the Amazon S3 console is 160 GB. To upload a file larger than 160 GB, use the AWS CLI, AWS SDK, or Amazon S3 REST API.&quot;</p>\n<p>Reference: <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html</a></p>\n"}],"owner":{"account_id":21976897,"reputation":29,"user_id":16252583,"display_name":"Salamon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1357,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639425552,"creation_date":1639126662,"question_id":70301957,"body_markdown":"I&#39;m trying to upload a file to s3. But the issue is that I don&#39;t know the exact size of the file, the ZIP file can be 1GB or 500MB large.\r\n\r\nAlso, if I upload the file it will be in Tomcat/temp location as temp file and I will unzip that file before uploading it to AWS S3 using core Java. \r\n\r\nWhat is the recommended file size for our file in the Tomcat/temp location in the AWS EC2 instance and will it create any problem when uploading to AWS S3?\r\n","title":"What is the maximum file upload Size in Java when uploading to AWS S3?","body":"<p>I'm trying to upload a file to s3. But the issue is that I don't know the exact size of the file, the ZIP file can be 1GB or 500MB large.</p>\n<p>Also, if I upload the file it will be in Tomcat/temp location as temp file and I will unzip that file before uploading it to AWS S3 using core Java.</p>\n<p>What is the recommended file size for our file in the Tomcat/temp location in the AWS EC2 instance and will it create any problem when uploading to AWS S3?</p>\n"},{"tags":["java","exe","reverse","dump","dbg"],"comments":[{"owner":{"account_id":23634879,"reputation":1,"user_id":17666238,"display_name":"TriGeRxD"},"score":0,"creation_date":1639407274,"post_id":70336392,"comment_id":124334040,"body_markdown":"@dan1st in Jar2exe exists mode with encription. This application is packed with this mode. And i can&#39;t just open it with 7-zip. In archive only files of packer","body":"@dan1st in Jar2exe exists mode with encription. This application is packed with this mode. And i can&#39;t just open it with 7-zip. In archive only files of packer"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1639983711,"post_id":70336392,"comment_id":124477979,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":1735246,"reputation":435,"user_id":1587968,"accept_rate":75,"display_name":"Rafael Osuna Dominguez"},"score":0,"creation_date":1694528675,"post_id":70336392,"comment_id":135901044,"body_markdown":"I&#39;m having the same problem. Did you find a solution?","body":"I&#39;m having the same problem. Did you find a solution?"}],"owner":{"account_id":23634879,"reputation":1,"user_id":17666238,"display_name":"TriGeRxD"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639425545,"creation_date":1639406429,"question_id":70336392,"body_markdown":"I have an EXE file and I wanna look inner of classes. I don&#39;t want to make a work jar file I only need to look inner. The application was written with java and was packed with jar2exe. All information which I found directed me on this [article][1] Packed on level 3.\r\n\r\nAll the software is present, there is a general understanding, but I do not understand at what point I made a mistake.\r\n\r\nI found value in Resource Hacker.\r\n[Resource Hacker][2]\r\n\r\nNext it uses OllyDbg, but OllyDbg does not support x64 applications, so I use x64 dbg\r\n\r\nHe enters the Enter expression window from the OllyAdvanced plugin, but I didn&#39;t find such a plugin for x64 dbg, so I used the method from the 00:59 [Video][3]. Got this value\r\n\r\n[Value][4]\r\n\r\nI go to dbg and run the software there. I go to the window with the hexadecimal value and enter the value. I&#39;m setting a breakpoint.\r\n\r\n[breakpoint][5]\r\n\r\nRun the program and get here\r\n\r\n[Program][6]\r\n\r\nThe article goes on to describe a loop pass and a memory dump\r\n\r\nWhat kind of loop and what to dump into memory, I do not understand. Maybe I made a mistake in the previous steps?\r\n\r\nThank you in advance for your help\r\n\r\n\r\n  [1]: http://reverseengineeringtips.blogspot.com/2014/12/unpacking-jar2exe-21-extracting-jar.html?m=1\r\n  [2]: https://i.stack.imgur.com/dmLp0.png\r\n  [3]: https://youtu.be/UaGAv1y7hY0\r\n  [4]: https://i.stack.imgur.com/EFt6V.png\r\n  [5]: https://i.stack.imgur.com/Ms2JI.png\r\n  [6]: https://i.stack.imgur.com/S7Bkx.png","title":"Extract .class from EXE","body":"<p>I have an EXE file and I wanna look inner of classes. I don't want to make a work jar file I only need to look inner. The application was written with java and was packed with jar2exe. All information which I found directed me on this <a href=\"http://reverseengineeringtips.blogspot.com/2014/12/unpacking-jar2exe-21-extracting-jar.html?m=1\" rel=\"nofollow noreferrer\">article</a> Packed on level 3.</p>\n<p>All the software is present, there is a general understanding, but I do not understand at what point I made a mistake.</p>\n<p>I found value in Resource Hacker.\n<a href=\"https://i.stack.imgur.com/dmLp0.png\" rel=\"nofollow noreferrer\">Resource Hacker</a></p>\n<p>Next it uses OllyDbg, but OllyDbg does not support x64 applications, so I use x64 dbg</p>\n<p>He enters the Enter expression window from the OllyAdvanced plugin, but I didn't find such a plugin for x64 dbg, so I used the method from the 00:59 <a href=\"https://youtu.be/UaGAv1y7hY0\" rel=\"nofollow noreferrer\">Video</a>. Got this value</p>\n<p><a href=\"https://i.stack.imgur.com/EFt6V.png\" rel=\"nofollow noreferrer\">Value</a></p>\n<p>I go to dbg and run the software there. I go to the window with the hexadecimal value and enter the value. I'm setting a breakpoint.</p>\n<p><a href=\"https://i.stack.imgur.com/Ms2JI.png\" rel=\"nofollow noreferrer\">breakpoint</a></p>\n<p>Run the program and get here</p>\n<p><a href=\"https://i.stack.imgur.com/S7Bkx.png\" rel=\"nofollow noreferrer\">Program</a></p>\n<p>The article goes on to describe a loop pass and a memory dump</p>\n<p>What kind of loop and what to dump into memory, I do not understand. Maybe I made a mistake in the previous steps?</p>\n<p>Thank you in advance for your help</p>\n"},{"tags":["java","unit-testing","spring-boot"],"comments":[{"owner":{"account_id":4189805,"reputation":3365,"user_id":3432678,"accept_rate":100,"display_name":"Lorelorelore"},"score":0,"creation_date":1541536787,"post_id":53179362,"comment_id":93249418,"body_markdown":"Possible duplicate of [How to test Classes with @ConfigurationProperties and @Autowired](https://stackoverflow.com/questions/31745168/how-to-test-classes-with-configurationproperties-and-autowired)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/31745168/how-to-test-classes-with-configurationproperties-and-autowired\">How to test Classes with @ConfigurationProperties and @Autowired</a>"},{"owner":{"account_id":433992,"reputation":7642,"user_id":819662,"accept_rate":69,"display_name":"Code Junkie"},"score":0,"creation_date":1541537137,"post_id":53179362,"comment_id":93249597,"body_markdown":"@Lorelorelore this is not a duplicate, I&#39;m looking to dynamically set the value in the ApplicationConfig for each test, not set it once and read the same value for every test.","body":"@Lorelorelore this is not a duplicate, I&#39;m looking to dynamically set the value in the ApplicationConfig for each test, not set it once and read the same value for every test."}],"answers":[{"tags":[],"owner":{"account_id":12971753,"reputation":339,"user_id":9377239,"display_name":"Kirill Shiryaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541599797,"creation_date":1541599797,"answer_id":53191126,"question_id":53179362,"body_markdown":"For example you can use Environment:\r\n\r\n   \r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = AdapLoadApplication.class)\r\n    @AutoConfigureTestDatabase\r\n    public class CorporateServiceTest {\r\n    \r\n        @Autowired\r\n        private ApplicationConfig config;\r\n\r\n        @Resource\r\n        private Environment env;\r\n    \r\n        @Test\r\n        public void convertCsvToBean() throws IOException {\r\n            //Set file\r\n            config.setFile(env.getProperty(&quot;first_test_company.file&quot;));\r\n        }\r\n    \r\n        @Test\r\n        //Is there an annotation to set the Application.properties file for each test?\r\n        public void test2() throws IOException {\r\n            //Set file\r\n            config.setFile(env.getProperty(&quot;second_test_company.file&quot;));\r\n        }\r\n    }\r\n\r\nYou have to use @Resource because @Autowired don&#39;t work in this case.","title":"Springboot unit test set @Configuration Properties dynamically","body":"<p>For example you can use Environment:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = AdapLoadApplication.class)\n@AutoConfigureTestDatabase\npublic class CorporateServiceTest {\n\n    @Autowired\n    private ApplicationConfig config;\n\n    @Resource\n    private Environment env;\n\n    @Test\n    public void convertCsvToBean() throws IOException {\n        //Set file\n        config.setFile(env.getProperty(\"first_test_company.file\"));\n    }\n\n    @Test\n    //Is there an annotation to set the Application.properties file for each test?\n    public void test2() throws IOException {\n        //Set file\n        config.setFile(env.getProperty(\"second_test_company.file\"));\n    }\n}\n</code></pre>\n\n<p>You have to use @Resource because @Autowired don't work in this case.</p>\n"}],"owner":{"account_id":433992,"reputation":7642,"user_id":819662,"accept_rate":69,"display_name":"Code Junkie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1765,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639425536,"creation_date":1541535426,"question_id":53179362,"body_markdown":"I have a springboot 2 application that runs on the commandline. One of the commandline args is fileName with a batchNo in the naming. I&#39;m setting my application.properties fileName value with the fileName from the commandline arg. Example `batch-1234.csv` \r\n\r\nIn my ApplicationConfig file I am reading the filename from the applications.properties file like so.  \r\n\r\n\r\n    @ToString\r\n    @Setter\r\n    @Getter\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;hri&quot;)\r\n    public class ApplicationConfig {\r\n    \r\n        @Value(&quot;${company.file}&quot;)\r\n        private String file;\r\n    \r\n        public String getBatchNo() {\r\n            return parseBatchNo(file);\r\n        }\r\n    \r\n        public String getHomecareDetailPath() {\r\n            return filePathProvider.getFilePath(&quot;batch-&quot; + getBatchNo() + &quot;.csv&quot;);\r\n        }\r\n    \r\n        private static String parseBatchNo(String file) {\r\n            if (batchNo == null) {\r\n                batchNo = file.substring((file.lastIndexOf(&quot;-&quot;) + 1), (file.length() - 4));\r\n            }\r\n            return batchNo;\r\n        }\r\n    }\r\n\r\nMy goal is to be able to set this file name for each individual test dynamically. \r\n\r\nExample \r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = AdapLoadApplication.class)\r\n    @AutoConfigureTestDatabase\r\n    public class CorporateServiceTest {\r\n    \r\n        @Autowired\r\n        private ApplicationConfig config; \r\n\r\n        @Test\r\n        public void convertCsvToBean() throws IOException {\r\n            // Set file\r\n            config.setFile(&quot;batch-9999.csv&quot;);\r\n        }\r\n    \r\n        @Test\r\n        // Is there an annotation to set the Application.properties file for each test?\r\n        public void test2() throws IOException {\r\n            //Set file\r\n            config.setFile(&quot;batch-8888.csv&quot;);\r\n        }\r\n    }\r\n\r\nHow could I dynamically set the file so that I can better manage my test? Currently we are using the same file and having to do a lot of file copying overwriting a test file. \r\n\r\nI would just like to clarify, I&#39;m not looking to just create a new ApplicationConfig bean in my Test class and set the file and read the same file from each individual test. I would like to set that file name in the beginning of each individual test. \r\n","title":"Springboot unit test set @Configuration Properties dynamically","body":"<p>I have a springboot 2 application that runs on the commandline. One of the commandline args is fileName with a batchNo in the naming. I'm setting my application.properties fileName value with the fileName from the commandline arg. Example <code>batch-1234.csv</code></p>\n<p>In my ApplicationConfig file I am reading the filename from the applications.properties file like so.</p>\n<pre><code>@ToString\n@Setter\n@Getter\n@Configuration\n@ConfigurationProperties(prefix = &quot;hri&quot;)\npublic class ApplicationConfig {\n\n    @Value(&quot;${company.file}&quot;)\n    private String file;\n\n    public String getBatchNo() {\n        return parseBatchNo(file);\n    }\n\n    public String getHomecareDetailPath() {\n        return filePathProvider.getFilePath(&quot;batch-&quot; + getBatchNo() + &quot;.csv&quot;);\n    }\n\n    private static String parseBatchNo(String file) {\n        if (batchNo == null) {\n            batchNo = file.substring((file.lastIndexOf(&quot;-&quot;) + 1), (file.length() - 4));\n        }\n        return batchNo;\n    }\n}\n</code></pre>\n<p>My goal is to be able to set this file name for each individual test dynamically.</p>\n<p>Example</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = AdapLoadApplication.class)\n@AutoConfigureTestDatabase\npublic class CorporateServiceTest {\n\n    @Autowired\n    private ApplicationConfig config; \n\n    @Test\n    public void convertCsvToBean() throws IOException {\n        // Set file\n        config.setFile(&quot;batch-9999.csv&quot;);\n    }\n\n    @Test\n    // Is there an annotation to set the Application.properties file for each test?\n    public void test2() throws IOException {\n        //Set file\n        config.setFile(&quot;batch-8888.csv&quot;);\n    }\n}\n</code></pre>\n<p>How could I dynamically set the file so that I can better manage my test? Currently we are using the same file and having to do a lot of file copying overwriting a test file.</p>\n<p>I would just like to clarify, I'm not looking to just create a new ApplicationConfig bean in my Test class and set the file and read the same file from each individual test. I would like to set that file name in the beginning of each individual test.</p>\n"},{"tags":["java","swing","jframe","jmenu","jmenubar"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":2,"creation_date":1639382368,"post_id":70312770,"comment_id":124325170,"body_markdown":"How about &quot;don&#39;t do that&quot;? Instead, leave the frame&#39;s taskbar as expected by the user and put the extra icons in a `JTaskBar` added to the top of the content pane of the frame (where the user ***would*** expect to see them).","body":"How about &quot;don&#39;t do that&quot;? Instead, leave the frame&#39;s taskbar as expected by the user and put the extra icons in a <code>JTaskBar</code> added to the top of the content pane of the frame (where the user <b><i>would</i></b> expect to see them)."}],"answers":[{"tags":[],"owner":{"account_id":23632132,"reputation":1,"user_id":17663695,"display_name":"Arham Gillani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639425523,"creation_date":1639402326,"answer_id":70335487,"question_id":70312770,"body_markdown":"The following code snippet displays an icon in the title bar: \r\n\r\n```java\r\nJFrame frame = new JFrame(&quot;Frame Icons&quot;);\r\nframe.setIconImages(icons);\r\nframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\nframe.setLocationByPlatform(true);\r\nframe.setSize(200,100);\r\nframe.setVisible(true);\r\n```","title":"How to add Icons to Title bar?","body":"<p>The following code snippet displays an icon in the title bar:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JFrame frame = new JFrame(&quot;Frame Icons&quot;);\nframe.setIconImages(icons);\nframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\nframe.setLocationByPlatform(true);\nframe.setSize(200,100);\nframe.setVisible(true);\n</code></pre>\n"}],"owner":{"account_id":23615691,"reputation":1,"user_id":17649829,"display_name":"Tripnotic"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639425523,"creation_date":1639199612,"question_id":70312770,"body_markdown":"How do I add custom Icons to the Title bar as this person did?\r\n\r\n[Jframe Title Icons][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iHmwy.png","title":"How to add Icons to Title bar?","body":"<p>How do I add custom Icons to the Title bar as this person did?</p>\n<p><a href=\"https://i.stack.imgur.com/iHmwy.png\" rel=\"nofollow noreferrer\">Jframe Title Icons</a></p>\n"},{"tags":["java","android","kotlin","exoplayer"],"answers":[{"tags":[],"owner":{"account_id":19326719,"reputation":117,"user_id":14129202,"display_name":"Weston"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1639425011,"creation_date":1639425011,"answer_id":70340188,"question_id":70336292,"body_markdown":"I just found the answer just build it like below in kotlin:\r\n```\r\n val dataSourceFactory: DataSource.Factory =\r\n                                DefaultHttpDataSource.Factory()\r\n                            val videoSource: MediaSource = ProgressiveMediaSource.Factory(dataSourceFactory)\r\n                                    .createMediaSource(fromUri(videoInPlayer.videoStreams[0].url))\r\n                            val audioSource: MediaSource = ProgressiveMediaSource.Factory(dataSourceFactory)\r\n                                    .createMediaSource(fromUri(videoInPlayer.audioStreams[0].url))\r\n\r\n                            val mergeSource: MediaSource = MergingMediaSource(videoSource,audioSource)\r\n```","title":"How to play separate audio and video together using exoplayer?","body":"<p>I just found the answer just build it like below in kotlin:</p>\n<pre><code> val dataSourceFactory: DataSource.Factory =\n                                DefaultHttpDataSource.Factory()\n                            val videoSource: MediaSource = ProgressiveMediaSource.Factory(dataSourceFactory)\n                                    .createMediaSource(fromUri(videoInPlayer.videoStreams[0].url))\n                            val audioSource: MediaSource = ProgressiveMediaSource.Factory(dataSourceFactory)\n                                    .createMediaSource(fromUri(videoInPlayer.audioStreams[0].url))\n\n                            val mergeSource: MediaSource = MergingMediaSource(videoSource,audioSource)\n</code></pre>\n"}],"owner":{"account_id":19326719,"reputation":117,"user_id":14129202,"display_name":"Weston"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":618,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":70340188,"answer_count":1,"score":3,"last_activity_date":1639425011,"creation_date":1639406025,"question_id":70336292,"body_markdown":"So I have two urls one for audio and one for video. I want to play them together but really couldn&#39;t find any documentation about this.","title":"How to play separate audio and video together using exoplayer?","body":"<p>So I have two urls one for audio and one for video. I want to play them together but really couldn't find any documentation about this.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":10,"creation_date":1638641098,"post_id":70227863,"comment_id":124144019,"body_markdown":"`One of the most suggested ways to pause a thread is to extend the Runnable interface by adding a pause()` Um, no.  Who is suggesting this?","body":"<code>One of the most suggested ways to pause a thread is to extend the Runnable interface by adding a pause()</code> Um, no.  Who is suggesting this?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":9,"creation_date":1638641284,"post_id":70227863,"comment_id":124144061,"body_markdown":"`since the interrupt() functionality is well built-in and supported by multiple methods, what if we interrupt() a Thread not just to terminate it, but for a general request` Sorry but also a terrible idea.  The rest of Java and its API assumes that interrupt == terminate.  You really don&#39;t want try to do something else with it, it breaks too much stuff.  What is the actual use case for trying to manipulate threads like this?  I feel an [XY Problem here.](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)","body":"<code>since the interrupt() functionality is well built-in and supported by multiple methods, what if we interrupt() a Thread not just to terminate it, but for a general request</code> Sorry but also a terrible idea.  The rest of Java and its API assumes that interrupt == terminate.  You really don&#39;t want try to do something else with it, it breaks too much stuff.  What is the actual use case for trying to manipulate threads like this?  I feel an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem here.</a>"},{"owner":{"account_id":18967043,"reputation":41,"user_id":13841360,"display_name":"Picione"},"score":0,"creation_date":1638642865,"post_id":70227863,"comment_id":124144427,"body_markdown":"@markspace I wanted to pause a Thread. Saw people suggesting to call wait() by checking if property isPaused==true. So I was trying to avoid extending the Runnable interface/Thread class to add the `boolean isPaused` flag. Makes sense? Thank you","body":"@markspace I wanted to pause a Thread. Saw people suggesting to call wait() by checking if property isPaused==true. So I was trying to avoid extending the Runnable interface/Thread class to add the <code>boolean isPaused</code> flag. Makes sense? Thank you"},{"owner":{"account_id":18967043,"reputation":41,"user_id":13841360,"display_name":"Picione"},"score":0,"creation_date":1638643802,"post_id":70227863,"comment_id":124144632,"body_markdown":"@markspace So came up the idea to use the already existing `interrupted` flag and interruption mechanism to change the normal flow of the Thread and solve different request, including (but not limited to) pausing, resuming, stopping, etc","body":"@markspace So came up the idea to use the already existing <code>interrupted</code> flag and interruption mechanism to change the normal flow of the Thread and solve different request, including (but not limited to) pausing, resuming, stopping, etc"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1638645301,"post_id":70227863,"comment_id":124144987,"body_markdown":"`I wanted to pause a Thread.` But *why?* What is your actual use case for this?  Normally pausing is a bad idea, I can&#39;t think of a single reason to do it.  (And pausing is different from blocking.)","body":"<code>I wanted to pause a Thread.</code> But <i>why?</i> What is your actual use case for this?  Normally pausing is a bad idea, I can&#39;t think of a single reason to do it.  (And pausing is different from blocking.)"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1638647928,"post_id":70227863,"comment_id":124145593,"body_markdown":"There are classes in the java.util.concurrent package that make this easier.  CountDownLatch, Semaphore, CyclicBarrier.  As markspace said, interrupts have a specific purpose already, and you don’t want to undermine that.  There will be times when another thread needs your thread to stop what it’s doing and exit as cleanly as possible; that is precisely what an interrupt is for.  That is why most blocking methods in Java SE immediately throw InterruptedException.","body":"There are classes in the java.util.concurrent package that make this easier.  CountDownLatch, Semaphore, CyclicBarrier.  As markspace said, interrupts have a specific purpose already, and you don’t want to undermine that.  There will be times when another thread needs your thread to stop what it’s doing and exit as cleanly as possible; that is precisely what an interrupt is for.  That is why most blocking methods in Java SE immediately throw InterruptedException."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1638651922,"post_id":70227863,"comment_id":124146438,"body_markdown":"@markspace, that could be an answer if you&#39;d build on it a bit. The question is, what happens if the interrupt is fired while the thread is deep in 3rd-party library land? What do interrupts mean to a library? What&#39;s the policy? In what state does the interrupt leave the library&#39;s objects and (God help us) static variables? Some developers probably don&#39;t even know how many open-source libraries their project depends on. I&#39;ve been working (on and off) with Java almost since the very beginning, and I don&#39;t recall anybody having much to say about that topic.","body":"@markspace, that could be an answer if you&#39;d build on it a bit. The question is, what happens if the interrupt is fired while the thread is deep in 3rd-party library land? What do interrupts mean to a library? What&#39;s the policy? In what state does the interrupt leave the library&#39;s objects and (God help us) static variables? Some developers probably don&#39;t even know how many open-source libraries their project depends on. I&#39;ve been working (on and off) with Java almost since the very beginning, and I don&#39;t recall anybody having much to say about that topic."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1638657752,"post_id":70227863,"comment_id":124147501,"body_markdown":"@SolomonSlow Brian Goetz&#39;s book *Java Concurrency in Practice* goes into more detail on the interrupt policy of a thread.  My copy is missing atm so I can&#39;t quote intelligently, but as VGR points out Java language primitives (like `wait()`) and blocking API methods (file IO for ex) all exit immediately on interrupt, so a thread can shut itself down.  It&#39;s the way they&#39;re designed and really the only choice a Java programmer has, we&#39;re boxed in.  Also per VGR, if you want to control the flow of a thread the `java.util.concurrent` classes are a much better idea.","body":"@SolomonSlow Brian Goetz&#39;s book <i>Java Concurrency in Practice</i> goes into more detail on the interrupt policy of a thread.  My copy is missing atm so I can&#39;t quote intelligently, but as VGR points out Java language primitives (like <code>wait()</code>) and blocking API methods (file IO for ex) all exit immediately on interrupt, so a thread can shut itself down.  It&#39;s the way they&#39;re designed and really the only choice a Java programmer has, we&#39;re boxed in.  Also per VGR, if you want to control the flow of a thread the <code>java.util.concurrent</code> classes are a much better idea."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1638660697,"post_id":70227863,"comment_id":124148042,"body_markdown":"@markspace, I pulled my copy of Goetz of the shelf, and wouldn&#39;t you know? there was a flag on the page with the heading &quot;Interruption.&quot; He says that an interrupt generally means a request for the thread to stop something that it is doing and do some other thing instead. He says that you should never write code that &quot;swallows&quot; an interrupt request, and he says that every thread should have a documented &quot;interruption policy.&quot; That plus several pages of pretty good -seeming advice. I just don&#39;t know if every developer of every library that my project depends on has taken the advice to heart.","body":"@markspace, I pulled my copy of Goetz of the shelf, and wouldn&#39;t you know? there was a flag on the page with the heading &quot;Interruption.&quot; He says that an interrupt generally means a request for the thread to stop something that it is doing and do some other thing instead. He says that you should never write code that &quot;swallows&quot; an interrupt request, and he says that every thread should have a documented &quot;interruption policy.&quot; That plus several pages of pretty good -seeming advice. I just don&#39;t know if every developer of every library that my project depends on has taken the advice to heart."},{"owner":{"account_id":18967043,"reputation":41,"user_id":13841360,"display_name":"Picione"},"score":0,"creation_date":1638701520,"post_id":70227863,"comment_id":124153182,"body_markdown":"Yup [java docs on interrupts](https://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html) says `An interrupt is an indication to a thread that it should stop what it is doing and do something else. It&#39;s up to the programmer to decide exactly how a thread responds to an interrupt` and then `but it is very common for the thread to terminate` So I assumed that interrupts may be a general way to interact with a thread, it just usually happens that the most common request was a thread termination. AFAIK embedded systems use interrupts to interact with a thread loop,so it does work","body":"Yup <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html\" rel=\"nofollow noreferrer\">java docs on interrupts</a> says <code>An interrupt is an indication to a thread that it should stop what it is doing and do something else. It&#39;s up to the programmer to decide exactly how a thread responds to an interrupt</code> and then <code>but it is very common for the thread to terminate</code> So I assumed that interrupts may be a general way to interact with a thread, it just usually happens that the most common request was a thread termination. AFAIK embedded systems use interrupts to interact with a thread loop,so it does work"}],"answers":[{"tags":[],"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1639424826,"creation_date":1639396391,"answer_id":70334214,"question_id":70227863,"body_markdown":"1. Yes, as @markspace said in the comments, there is no any practical reason to request a thread to do things like pause/resume/etc at any moment(?).\r\n\r\nThe thread is just the calculation in general meaning. You know, there is the following popular pattern for CPU intensive executions: \r\n```\r\nExecutorService es = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());\r\n```\r\nThis means `a thread ~= a CPU core`. See a thread as a CPU core here. I believe this is an idiomatic view - a long-living sequential calculation, a conveyor. Do you think there should be a way to `pause` a CPU core by a user? To stop the conveyor by a button stuck to each box on it? I don&#39;t think so. So, if you want to prevent CPU from the calculation, just don&#39;t ask it to do the calculation. A classical example - Job/Task Queue baked with a thread and a BlockingQueue. You split your calculation into several jobs to consume them to the queue. If you don&#39;t consume new ones (optionally clear the queue), your thread is &#39;paused&#39; naturally on `take()`. The same for IO, until you are OK to burn CPU with completely non-blocking solutions. With your code, you also have to take care about 3rd party things/objects you use in your run() to don&#39;t get them accidentally broken after the interruption, since it&#39;s true that &quot;`interruption == termination`&quot; is a commonplace semantically. \r\n\r\nAnother possible argument against the approach is mostly an architectural one. `Runnable`, `Callable` are examples of the IoC (Inversion of Control) pattern. But we introduce a control/execution management method into them, and this smells IMO.\r\n\r\nIf you had explained what was the specific problem you were trying to address, we would suggest a more suitable, more idiomatic than `RunnablePausable` approach.\r\n\r\n2. Now, why do I like the question. It&#39;s inspiring to me when developers think about their things so deeply. It&#39;s nice when they invent something, even if these are their own homebrewed Continuations and Schedulers:) It may be an instructive game/experiment.","title":"Java Thread Interruption in a general sense","body":"<ol>\n<li>Yes, as @markspace said in the comments, there is no any practical reason to request a thread to do things like pause/resume/etc at any moment(?).</li>\n</ol>\n<p>The thread is just the calculation in general meaning. You know, there is the following popular pattern for CPU intensive executions:</p>\n<pre><code>ExecutorService es = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());\n</code></pre>\n<p>This means <code>a thread ~= a CPU core</code>. See a thread as a CPU core here. I believe this is an idiomatic view - a long-living sequential calculation, a conveyor. Do you think there should be a way to <code>pause</code> a CPU core by a user? To stop the conveyor by a button stuck to each box on it? I don't think so. So, if you want to prevent CPU from the calculation, just don't ask it to do the calculation. A classical example - Job/Task Queue baked with a thread and a BlockingQueue. You split your calculation into several jobs to consume them to the queue. If you don't consume new ones (optionally clear the queue), your thread is 'paused' naturally on <code>take()</code>. The same for IO, until you are OK to burn CPU with completely non-blocking solutions. With your code, you also have to take care about 3rd party things/objects you use in your run() to don't get them accidentally broken after the interruption, since it's true that &quot;<code>interruption == termination</code>&quot; is a commonplace semantically.</p>\n<p>Another possible argument against the approach is mostly an architectural one. <code>Runnable</code>, <code>Callable</code> are examples of the IoC (Inversion of Control) pattern. But we introduce a control/execution management method into them, and this smells IMO.</p>\n<p>If you had explained what was the specific problem you were trying to address, we would suggest a more suitable, more idiomatic than <code>RunnablePausable</code> approach.</p>\n<ol start=\"2\">\n<li>Now, why do I like the question. It's inspiring to me when developers think about their things so deeply. It's nice when they invent something, even if these are their own homebrewed Continuations and Schedulers:) It may be an instructive game/experiment.</li>\n</ol>\n"}],"owner":{"account_id":18967043,"reputation":41,"user_id":13841360,"display_name":"Picione"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":1,"score":2,"last_activity_date":1639424826,"creation_date":1638638470,"question_id":70227863,"body_markdown":"One of the most suggested ways to pause a thread is to extend the Runnable interface by adding a pause() method:\r\n```\r\ninterface RunnablePausable extends Runnable {\r\n\tpublic void pause();\r\n}\r\n```\r\nThis never made sense to me since you don&#39;t actually want to pause the runnable but the Thread that runs it, in the same way you start/interrupt a Thread, not a Runnable.\r\n\r\n\r\n----------\r\n\r\n\r\nA more elegant approach: since the interrupt() functionality is well built-in and supported by multiple methods, what if we interrupt() a Thread not just to terminate it, but for a general request instead (like you would interrupt a CPU, in a way)? And then let the Runnable handle this specific request\r\n\r\nAs an example: interrupt() the thread and, instead of straight up terminating it, handle its request to pause, stop, resume, or do anything else you like.\r\n\r\nNot sure if this makes sense.\r\n\r\nSomething like this:\r\n```\r\npublic void run() {\r\n\ttry {\r\n\t\t//...\r\n\t} catch (InterruptedException ie) {\t\t//interrupted\r\n\t\tif (i_wanted_to_pause) {\t\t\t//manage request\r\n\t\t\t//wait\r\n\t\t}\r\n\t\tif (i_wanted_to_stop) {\r\n\t\t\t//return\r\n\t\t}\r\n\t\tif (any_other_request) {\r\n\t\t\t//handle it\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nAnd:\r\n```\r\npublic void run() {\r\n\tif (Thread.currentThread().isInterrupted()) {\t//interrupted\r\n\t\tif (request_to_pause) {\t\t\t\t\t\t//manage request\r\n\t\t\t//wait\r\n\t\t}\r\n\t\tif (request_to_stop) {\r\n\t\t\t//return\r\n\t\t}\r\n\t\tif (any_request) {\r\n\t\t\t//handle it\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nNow the problem is: how to make a specific request to the interrupted thread?\r\n\r\nHow can I communicate my request to the interrupted thread, as if was meant to stop, pause, or do anything else?\r\n\r\nIdeas:\r\n - Subclass InterruptedException into InterruptedExceptionStop and InterruptedExceptionPause (no idea how I can throw them)\r\n - Create a separate object containing the request. Don&#39;t know what would be the best way to achieve this without over-complicating things\r\n - Other?","title":"Java Thread Interruption in a general sense","body":"<p>One of the most suggested ways to pause a thread is to extend the Runnable interface by adding a pause() method:</p>\n<pre><code>interface RunnablePausable extends Runnable {\n    public void pause();\n}\n</code></pre>\n<p>This never made sense to me since you don't actually want to pause the runnable but the Thread that runs it, in the same way you start/interrupt a Thread, not a Runnable.</p>\n<hr />\n<p>A more elegant approach: since the interrupt() functionality is well built-in and supported by multiple methods, what if we interrupt() a Thread not just to terminate it, but for a general request instead (like you would interrupt a CPU, in a way)? And then let the Runnable handle this specific request</p>\n<p>As an example: interrupt() the thread and, instead of straight up terminating it, handle its request to pause, stop, resume, or do anything else you like.</p>\n<p>Not sure if this makes sense.</p>\n<p>Something like this:</p>\n<pre><code>public void run() {\n    try {\n        //...\n    } catch (InterruptedException ie) {     //interrupted\n        if (i_wanted_to_pause) {            //manage request\n            //wait\n        }\n        if (i_wanted_to_stop) {\n            //return\n        }\n        if (any_other_request) {\n            //handle it\n        }\n    }\n}\n</code></pre>\n<p>And:</p>\n<pre><code>public void run() {\n    if (Thread.currentThread().isInterrupted()) {   //interrupted\n        if (request_to_pause) {                     //manage request\n            //wait\n        }\n        if (request_to_stop) {\n            //return\n        }\n        if (any_request) {\n            //handle it\n        }\n    }\n}\n</code></pre>\n<p>Now the problem is: how to make a specific request to the interrupted thread?</p>\n<p>How can I communicate my request to the interrupted thread, as if was meant to stop, pause, or do anything else?</p>\n<p>Ideas:</p>\n<ul>\n<li>Subclass InterruptedException into InterruptedExceptionStop and InterruptedExceptionPause (no idea how I can throw them)</li>\n<li>Create a separate object containing the request. Don't know what would be the best way to achieve this without over-complicating things</li>\n<li>Other?</li>\n</ul>\n"},{"tags":["java","awt"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1639430751,"post_id":70340137,"comment_id":124342336,"body_markdown":"Oracle has a rad tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Netbeans section.  You use a Swing Timer to do background processes in your GUI.  The [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) section discusses how to do this.","body":"Oracle has a rad tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Netbeans section.  You use a Swing Timer to do background processes in your GUI.  The <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> section discusses how to do this."},{"owner":{"account_id":150281,"reputation":99,"user_id":363359,"display_name":"SteveM"},"score":0,"creation_date":1640181570,"post_id":70340137,"comment_id":124534769,"body_markdown":"Thanks for the link. Reading through it I found SwingWorker - that solved the problem.","body":"Thanks for the link. Reading through it I found SwingWorker - that solved the problem."}],"owner":{"account_id":150281,"reputation":99,"user_id":363359,"display_name":"SteveM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639424744,"creation_date":1639424744,"question_id":70340137,"body_markdown":"I have an application that when the GUI GO button is clicked it does hundreds of file copies and I want to update a text box on the GUI to show progress, but the GUI remains frozen with the GO button clicked in until it finishes.\r\n\r\nI created a similar GUI that just counts in order to test updating a text box to get progress information. In order to get that working I needed to push the counting process into a thread - presumably this then releases the event handler for the GO button. Everything worked fine then.\r\n\r\nSo, I followed the same strategy for the file copying program but it didn&#39;t work there - the GUI still remains frozen until the end.\r\n\r\nHow can I get these text fields to update.\r\n\r\nI tried getting the process thread to Yield, and then to Yield and Sleep. I tried using panel.invalidate() and panel.repaint(). But none of these things work.\r\n","title":"JAVA GUI Progress information - how to ensure it is updated","body":"<p>I have an application that when the GUI GO button is clicked it does hundreds of file copies and I want to update a text box on the GUI to show progress, but the GUI remains frozen with the GO button clicked in until it finishes.</p>\n<p>I created a similar GUI that just counts in order to test updating a text box to get progress information. In order to get that working I needed to push the counting process into a thread - presumably this then releases the event handler for the GO button. Everything worked fine then.</p>\n<p>So, I followed the same strategy for the file copying program but it didn't work there - the GUI still remains frozen until the end.</p>\n<p>How can I get these text fields to update.</p>\n<p>I tried getting the process thread to Yield, and then to Yield and Sleep. I tried using panel.invalidate() and panel.repaint(). But none of these things work.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":2,"creation_date":1639424383,"post_id":70340063,"comment_id":124340436,"body_markdown":"Did you have a log4j dependency before?","body":"Did you have a log4j dependency before?"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":1,"creation_date":1639424546,"post_id":70340063,"comment_id":124340490,"body_markdown":"Sounds like a Spring Boot application that did not have log4j2 before. Check your dependency tree without the line, or look at the logging configuration file you have in your project - is it logback.* or log4j2.*? Spring Boot defaults to logback. If you actually *were* using log4j2 before, you need to provide more information, we&#39;ve all upgraded and or logging is fine.","body":"Sounds like a Spring Boot application that did not have log4j2 before. Check your dependency tree without the line, or look at the logging configuration file you have in your project - is it logback.* or log4j2.*? Spring Boot defaults to logback. If you actually <i>were</i> using log4j2 before, you need to provide more information, we&#39;ve all upgraded and or logging is fine."},{"owner":{"account_id":23637611,"reputation":11,"user_id":17668402,"display_name":"Nerdee"},"score":1,"creation_date":1639424609,"post_id":70340063,"comment_id":124340505,"body_markdown":"yes i have spring-boot-starter-log4j2","body":"yes i have spring-boot-starter-log4j2"},{"owner":{"account_id":22868461,"reputation":177,"user_id":17011860,"display_name":"Asif A Fasih"},"score":0,"creation_date":1639425219,"post_id":70340063,"comment_id":124340702,"body_markdown":"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-log4j2/2.6.1 only supports `log4j-core:2.14.1` and `log4j-api:2.14.1` - have you tried to force version `2.15.0` for both JARs? I am not familiar with Maven, but have tried this with Gradle and was able to see logs.","body":"<a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-log4j2/2.6.1\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.springframework.boot/&hellip;</a> only supports <code>log4j-core:2.14.1</code> and <code>log4j-api:2.14.1</code> - have you tried to force version <code>2.15.0</code> for both JARs? I am not familiar with Maven, but have tried this with Gradle and was able to see logs."},{"owner":{"account_id":23637611,"reputation":11,"user_id":17668402,"display_name":"Nerdee"},"score":0,"creation_date":1639425651,"post_id":70340063,"comment_id":124340849,"body_markdown":"i work with maven and that is what i put in question","body":"i work with maven and that is what i put in question"},{"owner":{"account_id":22868461,"reputation":177,"user_id":17011860,"display_name":"Asif A Fasih"},"score":0,"creation_date":1639426935,"post_id":70340063,"comment_id":124341225,"body_markdown":"for the specific version, you can use `&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;2.15.0&lt;/version&gt;\n\t\t&lt;/dependency&gt;`\n\nto exclude, \n`&lt;!-- For CVE-2021-44228 --&gt;\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;2.6.1&lt;/version&gt;\n\t\t\t&lt;exclusions&gt;\n\t\t\t\t&lt;exclusion&gt;\n\t\t\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n\t\t\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n\t\t\t\t&lt;/exclusion&gt;\n\t\t\t&lt;/exclusions&gt;\n\t\t&lt;/dependency&gt;`\n\nplease let me know if that works.","body":"for the specific version, you can use <code>&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;&#47;groupId&gt; \t\t\t&lt;artifactId&gt;log4j-core&lt;&#47;artifactId&gt; \t\t\t&lt;version&gt;2.15.0&lt;&#47;version&gt; \t\t&lt;&#47;dependency&gt;</code>  to exclude,  <code>&lt;!-- For CVE-2021-44228 --&gt; \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.springframework.boot&lt;&#47;groupId&gt; \t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;&#47;artifactId&gt; \t\t\t&lt;version&gt;2.6.1&lt;&#47;version&gt; \t\t\t&lt;exclusions&gt; \t\t\t\t&lt;exclusion&gt; \t\t\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;&#47;groupId&gt; \t\t\t\t\t&lt;artifactId&gt;log4j-core&lt;&#47;artifactId&gt; \t\t\t\t&lt;&#47;exclusion&gt; \t\t\t&lt;&#47;exclusions&gt; \t\t&lt;&#47;dependency&gt;</code>  please let me know if that works."},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":1,"creation_date":1639429392,"post_id":70340063,"comment_id":124341958,"body_markdown":"You&#39;ve done it correctly, see e.g. https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot. I&#39;ll try to reproduce your setup.  Can you e.g. share your log4j2.xml file?","body":"You&#39;ve done it correctly, see e.g. <a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" rel=\"nofollow noreferrer\">spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-bo&zwnj;&#8203;ot</a>. I&#39;ll try to reproduce your setup.  Can you e.g. share your log4j2.xml file?"},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":1,"creation_date":1639433259,"post_id":70340063,"comment_id":124343049,"body_markdown":"I did the version property update in my projects without any issues. You should share your log4j2 configuration because it&#39;s supposed to work out-of-the-box. Maybe clean your project and recompile everything?","body":"I did the version property update in my projects without any issues. You should share your log4j2 configuration because it&#39;s supposed to work out-of-the-box. Maybe clean your project and recompile everything?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1639983648,"post_id":70340063,"comment_id":124477964,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":23637611,"reputation":11,"user_id":17668402,"display_name":"Nerdee"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639424571,"creation_date":1639424334,"question_id":70340063,"body_markdown":"i update to log 2.15.0 https://nvd.nist.gov/vuln/detail/CVE-2021-44228\r\n\r\n\t\t&lt;log4j2.version&gt;2.15.0&lt;/log4j2.version&gt;\r\n\r\nbut after this update i don&#39;t get log no more\r\n\r\ni get now spring.log.0 which is xml data\r\n\r\ni not change my application-properties\r\n\r\nif i remove this line in pom.xml\r\n\r\n\t\t&lt;log4j2.version&gt;2.15.0&lt;/log4j2.version&gt;\r\n\r\nall is working again normal\r\n\r\ni have\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\ngracias","title":"java not logging message after fix for log 2.15.0","body":"<p>i update to log 2.15.0 <a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-44228\" rel=\"nofollow noreferrer\">https://nvd.nist.gov/vuln/detail/CVE-2021-44228</a></p>\n<pre><code>    &lt;log4j2.version&gt;2.15.0&lt;/log4j2.version&gt;\n</code></pre>\n<p>but after this update i don't get log no more</p>\n<p>i get now spring.log.0 which is xml data</p>\n<p>i not change my application-properties</p>\n<p>if i remove this line in pom.xml</p>\n<pre><code>    &lt;log4j2.version&gt;2.15.0&lt;/log4j2.version&gt;\n</code></pre>\n<p>all is working again normal</p>\n<p>i have</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>gracias</p>\n"},{"tags":["java","swing","jframe","jbutton","actionlistener"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1639423703,"post_id":70339863,"comment_id":124340248,"body_markdown":"My suggestion is to create a `Candidate` class, one instance for each candidate.  Create a `java.util.List` of `Candidate` instances.  Construct your GUI using `JLabel` and `JButton` arrays sized to be the same as your `List`.","body":"My suggestion is to create a <code>Candidate</code> class, one instance for each candidate.  Create a <code>java.util.List</code> of <code>Candidate</code> instances.  Construct your GUI using <code>JLabel</code> and <code>JButton</code> arrays sized to be the same as your <code>List</code>."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1639423746,"post_id":70339863,"comment_id":124340264,"body_markdown":"You should create and test a VotingModel before you start working on a GUI","body":"You should create and test a VotingModel before you start working on a GUI"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639423606,"creation_date":1639423606,"answer_id":70339941,"question_id":70339863,"body_markdown":"    button1.addActionListener(new VotingSystem());\r\n    button2.addActionListener(new VotingSystem());\r\n    ...\r\n\r\nYou create 5 instance of the VotingSystem class, which means you also have 5 frames.\r\n\r\n`Don&#39;t keep creating instances of the VotingSystem class`.\r\n\r\nThis means you need to completely restructure your code. For example you should not:\r\n\r\n1. be using static variable\r\n2. be using a null layout and setBounds(). Swing was designed to be used with layout managers.\r\n\r\nRead the section from the Swing tutorial on [How to Use Buttons](https://docs.oracle.com/javase/tutorial/uiswing/components/button.html) for some basic examples to get you started.\r\n\r\nThat is download the demos to see how they work. Then modify the working code to use your basic logic from above.","title":"How to count clicks for several JButtons with ActionListener in if/if else statements","body":"<pre><code>button1.addActionListener(new VotingSystem());\nbutton2.addActionListener(new VotingSystem());\n...\n</code></pre>\n<p>You create 5 instance of the VotingSystem class, which means you also have 5 frames.</p>\n<p><code>Don't keep creating instances of the VotingSystem class</code>.</p>\n<p>This means you need to completely restructure your code. For example you should not:</p>\n<ol>\n<li>be using static variable</li>\n<li>be using a null layout and setBounds(). Swing was designed to be used with layout managers.</li>\n</ol>\n<p>Read the section from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\" rel=\"nofollow noreferrer\">How to Use Buttons</a> for some basic examples to get you started.</p>\n<p>That is download the demos to see how they work. Then modify the working code to use your basic logic from above.</p>\n"}],"owner":{"account_id":23147433,"reputation":15,"user_id":17250008,"display_name":"Dragneel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70339941,"answer_count":1,"score":0,"last_activity_date":1639423606,"creation_date":1639423192,"question_id":70339863,"body_markdown":"I&#39;m making a project for a voting-system with GUI using java.swing. The voting system contains of 5 candidates and when you click the vote button next to their name it should increment and display the number of votes that the candidate has at the moment.\r\nI dont know why my code is not registrating and counting the votes of each button, i have tried to work through it but i am stuck.\r\n\r\ncode:\r\n\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    \r\n    public class VotingSystem implements ActionListener{\r\n    \t\r\n    \tprivate static JLabel label;\r\n    \tprivate static JLabel candidate1;\r\n    \tprivate static JLabel candidate2;\r\n    \tprivate static JLabel candidate3;\r\n    \tprivate static JLabel candidate4;\r\n    \tprivate static JLabel candidate5;\r\n    \tprivate static JButton button1;\r\n    \tprivate static JButton button2;\r\n    \tprivate static JButton button3;\r\n    \tprivate static JButton button4;\r\n    \tprivate static JButton button5;\r\n    \tprivate static int counter1;\r\n    \tprivate static int counter2;\r\n    \tprivate static int counter3;\r\n    \tprivate static int counter4;\r\n    \tprivate static int counter5;\r\n    \r\n    \r\n    \t\r\n    \t\tpublic static void main(String[] args) {\r\n    \r\n    \t\t\tnew VotingSystem();\r\n    \t\t}\r\n    \t\r\n            //Creating the voting system method\r\n    \t\tpublic VotingSystem() {\r\n    \t\t\r\n    \t\t\tJFrame frame = new JFrame();\r\n    \t\t\tJPanel panel = new JPanel();\r\n    \t\t\r\n    \t\t\tframe.setSize(750, 600);\r\n    \t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\t\tframe.add(panel);\r\n    \t\t\r\n    \t\t\tpanel.setLayout(null);\r\n    \t\t\r\n    \t\t\tcandidate1 = new JLabel(&quot;Samir&quot;);\r\n    \t\t\tcandidate1.setBounds(10, 20, 80, 25);\r\n    \t\t\tpanel.add(candidate1);\r\n    \t\t\t\r\n    \t\t\tcandidate2 = new JLabel(&quot;Christina&quot;);\r\n    \t\t\tcandidate2.setBounds(10, 60, 80, 25);\r\n    \t\t\tpanel.add(candidate2);\r\n    \t\t\t\r\n    \t\t\tcandidate3 = new JLabel(&quot;Philip&quot;);\r\n    \t\t\tcandidate3.setBounds(10, 100, 80, 25);\r\n    \t\t\tpanel.add(candidate3);\r\n    \t\t\t\r\n    \t\t\tcandidate4 = new JLabel(&quot;Gilgamesh&quot;);\r\n    \t\t\tcandidate4.setBounds(10, 140, 80, 25);\r\n    \t\t\tpanel.add(candidate4);\r\n    \t\t\t\r\n    \t\t\tcandidate5 = new JLabel(&quot;Gonzales&quot;);\r\n    \t\t\tcandidate5.setBounds(10, 180, 80, 25);\r\n    \t\t\tpanel.add(candidate5);\r\n    \t\t\r\n    \t\t\tbutton1 = new JButton(&quot;Vote&quot;);\r\n    \t\t\tbutton1.setBounds(100, 25, 60, 15);\r\n    \t\t\tbutton1.addActionListener(new VotingSystem());\r\n    \t\t\tpanel.add(button1);\r\n    \t\t\t\r\n    \t\t\tbutton2 = new JButton(&quot;Vote&quot;);\r\n    \t\t\tbutton2.setBounds(100, 65, 60, 15);\r\n    \t\t\tbutton2.addActionListener(new VotingSystem());\r\n    \t\t\tpanel.add(button2);\r\n    \t\t\t\r\n    \t\t\tbutton3 = new JButton(&quot;Vote&quot;);\r\n    \t\t\tbutton3.setBounds(100, 105, 60, 15);\r\n    \t\t\tbutton3.addActionListener(new VotingSystem());\r\n    \t\t\tpanel.add(button3);\r\n    \t\t\t\r\n    \t\t\tbutton4 = new JButton(&quot;Vote&quot;);\r\n    \t\t\tbutton4.setBounds(100, 145, 60, 15);\r\n    \t\t\tbutton4.addActionListener(new VotingSystem());\r\n    \t\t\tpanel.add(button4);\r\n    \t\t\t\r\n    \t\t\tbutton5 = new JButton(&quot;Vote&quot;);\r\n    \t\t\tbutton5.setBounds(100, 185, 60, 15);\r\n    \t\t\tbutton5.addActionListener(new VotingSystem());\r\n    \t\t\tpanel.add(button5);\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\tlabel = new JLabel(&quot;Number of votes&quot;);\r\n    \t\t\tpanel.add(label);\r\n    \t\t\tframe.setVisible(true);\r\n    \t\t\t\t\r\n    \t\t\r\n    \t\t}\r\n    \r\n    \r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent e) {\r\n    \t\r\n    \t\t\tif (e.getSource() == button1) {\r\n    \t\t\t\t\r\n    \t\t\t\tlabel.setText(&quot;Number of votes: &quot; + counter1++);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\telse if (e.getSource() == button2) {\r\n    \t\r\n    \t\t\t\tlabel.setText(&quot;Number of votes: &quot; + counter2++);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\telse if (e.getSource() == button3) {\r\n    \t\t\t\t\r\n    \t\t\t\tlabel.setText(&quot;Number of votes: &quot; + counter3++);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\telse if (e.getSource() == button4) {\r\n    \t\t\r\n    \t\t\t\tlabel.setText(&quot;Number of votes: &quot; + counter4++);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\telse if (e.getSource() == button5) {\r\n    \t\t\t\t\r\n    \t\t\t\tlabel.setText(&quot;Number of votes: &quot; + counter5++);\r\n    \t\r\n    \t\t\t}\r\n    \t\t}\r\n    }\r\n\r\n","title":"How to count clicks for several JButtons with ActionListener in if/if else statements","body":"<p>I'm making a project for a voting-system with GUI using java.swing. The voting system contains of 5 candidates and when you click the vote button next to their name it should increment and display the number of votes that the candidate has at the moment.\nI dont know why my code is not registrating and counting the votes of each button, i have tried to work through it but i am stuck.</p>\n<p>code:</p>\n<pre><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class VotingSystem implements ActionListener{\n    \n    private static JLabel label;\n    private static JLabel candidate1;\n    private static JLabel candidate2;\n    private static JLabel candidate3;\n    private static JLabel candidate4;\n    private static JLabel candidate5;\n    private static JButton button1;\n    private static JButton button2;\n    private static JButton button3;\n    private static JButton button4;\n    private static JButton button5;\n    private static int counter1;\n    private static int counter2;\n    private static int counter3;\n    private static int counter4;\n    private static int counter5;\n\n\n    \n        public static void main(String[] args) {\n\n            new VotingSystem();\n        }\n    \n        //Creating the voting system method\n        public VotingSystem() {\n        \n            JFrame frame = new JFrame();\n            JPanel panel = new JPanel();\n        \n            frame.setSize(750, 600);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(panel);\n        \n            panel.setLayout(null);\n        \n            candidate1 = new JLabel(&quot;Samir&quot;);\n            candidate1.setBounds(10, 20, 80, 25);\n            panel.add(candidate1);\n            \n            candidate2 = new JLabel(&quot;Christina&quot;);\n            candidate2.setBounds(10, 60, 80, 25);\n            panel.add(candidate2);\n            \n            candidate3 = new JLabel(&quot;Philip&quot;);\n            candidate3.setBounds(10, 100, 80, 25);\n            panel.add(candidate3);\n            \n            candidate4 = new JLabel(&quot;Gilgamesh&quot;);\n            candidate4.setBounds(10, 140, 80, 25);\n            panel.add(candidate4);\n            \n            candidate5 = new JLabel(&quot;Gonzales&quot;);\n            candidate5.setBounds(10, 180, 80, 25);\n            panel.add(candidate5);\n        \n            button1 = new JButton(&quot;Vote&quot;);\n            button1.setBounds(100, 25, 60, 15);\n            button1.addActionListener(new VotingSystem());\n            panel.add(button1);\n            \n            button2 = new JButton(&quot;Vote&quot;);\n            button2.setBounds(100, 65, 60, 15);\n            button2.addActionListener(new VotingSystem());\n            panel.add(button2);\n            \n            button3 = new JButton(&quot;Vote&quot;);\n            button3.setBounds(100, 105, 60, 15);\n            button3.addActionListener(new VotingSystem());\n            panel.add(button3);\n            \n            button4 = new JButton(&quot;Vote&quot;);\n            button4.setBounds(100, 145, 60, 15);\n            button4.addActionListener(new VotingSystem());\n            panel.add(button4);\n            \n            button5 = new JButton(&quot;Vote&quot;);\n            button5.setBounds(100, 185, 60, 15);\n            button5.addActionListener(new VotingSystem());\n            panel.add(button5);\n            \n            \n            label = new JLabel(&quot;Number of votes&quot;);\n            panel.add(label);\n            frame.setVisible(true);\n                \n        \n        }\n\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n    \n            if (e.getSource() == button1) {\n                \n                label.setText(&quot;Number of votes: &quot; + counter1++);\n            }\n            \n            else if (e.getSource() == button2) {\n    \n                label.setText(&quot;Number of votes: &quot; + counter2++);\n            }\n            \n            else if (e.getSource() == button3) {\n                \n                label.setText(&quot;Number of votes: &quot; + counter3++);\n            }\n            \n            else if (e.getSource() == button4) {\n        \n                label.setText(&quot;Number of votes: &quot; + counter4++);\n            }\n            \n            else if (e.getSource() == button5) {\n                \n                label.setText(&quot;Number of votes: &quot; + counter5++);\n    \n            }\n        }\n}\n</code></pre>\n"},{"tags":["java","cryptography","ethereum","web3-java","bitcoinj"],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610707591,"creation_date":1610707591,"answer_id":65734666,"question_id":65491344,"body_markdown":"Like Bitcoin, [Ethereum][1] uses *secp256k1*. [Ethereum addresses][2] are derived as follows:\r\n- Step 1: The 32 bytes x and y coordinate of the public key are concatenated to 64 bytes (where both the x and y coordinate are padded with leading 0x00 values if necessary). \r\n- Step 2: From this the *Keccak-256* hash is generated.\r\n- Step 3: The last 20 bytes are used as the Ethereum address.\r\n\r\nFor the examples used here, the key is generated with:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\tString mnemonic = &quot;elevator dinosaur switch you armor vote black syrup fork onion nurse illegal trim rocket combine&quot;;\r\n\tDeterministicSeed seed = new DeterministicSeed(mnemonic, null, &quot;&quot;, 1409478661L);\r\n\tDeterministicKeyChain chain = DeterministicKeyChain.builder().seed(seed).build();\r\n\tDeterministicKey addrKey = chain.getKeyByPath(HDUtils.parsePath(&quot;M/44H/60H/0H/0/0&quot;), true);\r\n\r\nThis corresponds to the following public key and Ethereum address:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n          X: a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd\r\n\t      Y: 5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\r\n\tAddress: 23ad59cc6afff2e508772f69d22b19ffebf579e7\r\n\r\nas can also be verified with the website https://iancoleman.io/bip39/.\r\n\r\n----------\r\n\r\n**Step 1:**\r\n\r\nIn the posted question, the expressions [`Sign.publicKeyFromPrivate()`][3] and [`addrKey.getPublicKeyAsHex()`][4] provide different results. Both functions return the public key in different types. While `Sign.publicKeyFromPrivate()` uses a `BigInteger`, `addrKey.getPublicKeyAsHex()` provides a hex string. For a direct comparison, `BigInteger` can be converted to a hex string with `toString(16)`. When the results of both expressions are displayed with:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\tSystem.out.println(Sign.publicKeyFromPrivate(addrKey.getPrivKey()).toString(16));\r\n\tSystem.out.println(addrKey.getPublicKeyAsHex());\r\n\r\nthe following result is obtained:\r\n\r\n&lt;!-- language: lang-none --&gt;\t\r\n    a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\r\n\t02a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd\r\n\r\nThe output of `Sign.publicKeyFromPrivate()` has a length of 64 bytes and corresponds to the concatenated x and y coordinate as defined in step 1. Therefore, the address generated with this is a valid Ethereum address, as also described in the posted question.\r\n\r\nThe output of `addrKey.getPublicKeyAsHex()`, on the other hand, corresponds to the x coordinate prefixed with a 0x02 value. This is the [*compressed*][6] format of the public key. The leading byte has either the value 0x02 if the y value is even (as in this example), or the value 0x03. Since the compressed format does not contain the y coordinate, this cannot be used to *directly* infer the Ethereum address, or if it is done anyway, it will result in a wrong address (indirectly, of course, it would be possible since the y coordinate can be derived from a compressed public key).  \r\n\r\n-----------\r\n\r\nThe [*uncompressed*][6] format of the public key can be obtained, e.g. with [`addrKey.decompress()`][7]:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    System.out.println(addrKey.decompress().getPublicKeyAsHex());\r\n\t\r\nwhich gives this result:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\t04a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\r\n\r\nThe uncompressed format consists of a leading marker byte with the value 0x04 followed by the x and y coordinates. So if the leading marker byte is removed, just the data according to step 1 is obtained, which is needed for the derivation of the Ethereum address:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\tSystem.out.println(addrKey.decompress().getPublicKeyAsHex().substring(2));\t\r\n\r\nwhich results in: \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\ta35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\r\n\r\n-----------\r\n\r\n**Steps 2 and 3:**\r\n\r\nSteps 2 and 3 are performed by [`Keys.getAddress()`][5]. This allows the Ethereum address to be obtained using the uncompressed public key as follows:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\tSystem.out.println(Keys.getAddress(addrKey.decompress().getPublicKeyAsHex().substring(2)));\r\n\tSystem.out.println(Keys.getAddress(Sign.publicKeyFromPrivate(addrKey.getPrivKey()))); \t\t// For comparison\r\n\r\nwhich gives the Ethereum address:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    23ad59cc6afff2e508772f69d22b19ffebf579e7\r\n\t23ad59cc6afff2e508772f69d22b19ffebf579e7\r\n\r\n-----------\r\n\r\n**Overloads of `Keys.getAddress()`:**\r\n\r\n`Keys.getAddress()` provides various overloads for the data types `BigInteger`, hex string and `byte[]`. If the uncompressed key is given as `byte[]`, e.g. with [`addrKey.getPubKeyPoint().getEncoded(false)`][8], the `byte[]` can be used directly after removing the marker byte. Alternatively, the `byte[]` can be converted to a `BigInteger` with the marker byte removed:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    byte[] uncompressed = addrKey.getPubKeyPoint().getEncoded(false);\r\n\tSystem.out.println(bytesToHex(Keys.getAddress(Arrays.copyOfRange(uncompressed, 1, uncompressed.length))).toLowerCase());  // bytesToHex() from https://stackoverflow.com/a/9855338\r\n\tSystem.out.println(Keys.getAddress(new BigInteger(1, uncompressed, 1, uncompressed.length - 1)));\r\n\tSystem.out.println(Keys.getAddress(Sign.publicKeyFromPrivate(addrKey.getPrivKey()))); \t\t\t\t\t\t\t\t\t  // For comparison\r\n\r\nwhich as expected returns the same Ethereum address:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\t23ad59cc6afff2e508772f69d22b19ffebf579e7\r\n\t23ad59cc6afff2e508772f69d22b19ffebf579e7\r\n\t23ad59cc6afff2e508772f69d22b19ffebf579e7\r\n\r\nOne thing to note here is that [`Keys.getAddress(byte[]`)][9] does not pad the passed `byte[]`, while the overloads for `BigInteger` or hex strings *implicitly* pad. This can be relevant e.g. when converting a `BigInteger` (e.g. provided by `Sign.publicKeyFromPrivate(addrKey.getPrivKey())`) to a `byte[]`, since the result can also have less than 64 bytes (which would lead to different *Keccak-256* hashes). If `Keys.getAddress(byte[])` is used in this case, it must be `explicitly` padded with leading 0x00 values up to a length of 64 bytes.\r\n\r\n[1]: https://en.wikipedia.org/wiki/Ethereum\r\n[2]: https://github.com/ethereumbook/ethereumbook/blob/develop/04keys-addresses.asciidoc?ref=hackernoon.com#ethereum-addresses\r\n[3]: https://github.com/web3j/web3j/blob/5934a730c498d25c6910903c826b3f50559e58fb/crypto/src/main/java/org/web3j/crypto/Sign.java#L272 \r\n[4]: https://github.com/bitcoinj/bitcoinj/blob/1bcea2a59c99fe53f2eeab788eef1fd396f4b566/core/src/main/java/org/bitcoinj/core/ECKey.java#L1259\r\n[5]: https://github.com/web3j/web3j/blob/5934a730c498d25c6910903c826b3f50559e58fb/crypto/src/main/java/org/web3j/crypto/Keys.java#L101\r\n[6]: https://davidederosa.com/basic-blockchain-programming/elliptic-curve-keys/ \r\n[7]: https://github.com/bitcoinj/bitcoinj/blob/1bcea2a59c99fe53f2eeab788eef1fd396f4b566/core/src/main/java/org/bitcoinj/core/ECKey.java#L306\r\n[8]: https://www.javadoc.io/doc/org.bouncycastle/bcprov-jdk15on/latest/org/bouncycastle/math/ec/ECPoint.html#getEncoded-boolean-\r\n[9]: https://github.com/web3j/web3j/blob/5934a730c498d25c6910903c826b3f50559e58fb/crypto/src/main/java/org/web3j/crypto/Keys.java#L113","title":"Generate Ethereum addresses in HD Wallet using public key only (bitcoinj/web3j)","body":"<p>Like Bitcoin, <a href=\"https://en.wikipedia.org/wiki/Ethereum\" rel=\"noreferrer\">Ethereum</a> uses <em>secp256k1</em>. <a href=\"https://github.com/ethereumbook/ethereumbook/blob/develop/04keys-addresses.asciidoc?ref=hackernoon.com#ethereum-addresses\" rel=\"noreferrer\">Ethereum addresses</a> are derived as follows:</p>\n<ul>\n<li>Step 1: The 32 bytes x and y coordinate of the public key are concatenated to 64 bytes (where both the x and y coordinate are padded with leading 0x00 values if necessary).</li>\n<li>Step 2: From this the <em>Keccak-256</em> hash is generated.</li>\n<li>Step 3: The last 20 bytes are used as the Ethereum address.</li>\n</ul>\n<p>For the examples used here, the key is generated with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String mnemonic = &quot;elevator dinosaur switch you armor vote black syrup fork onion nurse illegal trim rocket combine&quot;;\nDeterministicSeed seed = new DeterministicSeed(mnemonic, null, &quot;&quot;, 1409478661L);\nDeterministicKeyChain chain = DeterministicKeyChain.builder().seed(seed).build();\nDeterministicKey addrKey = chain.getKeyByPath(HDUtils.parsePath(&quot;M/44H/60H/0H/0/0&quot;), true);\n</code></pre>\n<p>This corresponds to the following public key and Ethereum address:</p>\n<pre class=\"lang-none prettyprint-override\"><code>      X: a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd\n      Y: 5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\nAddress: 23ad59cc6afff2e508772f69d22b19ffebf579e7\n</code></pre>\n<p>as can also be verified with the website <a href=\"https://iancoleman.io/bip39/\" rel=\"noreferrer\">https://iancoleman.io/bip39/</a>.</p>\n<hr />\n<p><strong>Step 1:</strong></p>\n<p>In the posted question, the expressions <a href=\"https://github.com/web3j/web3j/blob/5934a730c498d25c6910903c826b3f50559e58fb/crypto/src/main/java/org/web3j/crypto/Sign.java#L272\" rel=\"noreferrer\"><code>Sign.publicKeyFromPrivate()</code></a> and <a href=\"https://github.com/bitcoinj/bitcoinj/blob/1bcea2a59c99fe53f2eeab788eef1fd396f4b566/core/src/main/java/org/bitcoinj/core/ECKey.java#L1259\" rel=\"noreferrer\"><code>addrKey.getPublicKeyAsHex()</code></a> provide different results. Both functions return the public key in different types. While <code>Sign.publicKeyFromPrivate()</code> uses a <code>BigInteger</code>, <code>addrKey.getPublicKeyAsHex()</code> provides a hex string. For a direct comparison, <code>BigInteger</code> can be converted to a hex string with <code>toString(16)</code>. When the results of both expressions are displayed with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(Sign.publicKeyFromPrivate(addrKey.getPrivKey()).toString(16));\nSystem.out.println(addrKey.getPublicKeyAsHex());\n</code></pre>\n<p>the following result is obtained:</p>\n<pre class=\"lang-none prettyprint-override\"><code>a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\n02a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd\n</code></pre>\n<p>The output of <code>Sign.publicKeyFromPrivate()</code> has a length of 64 bytes and corresponds to the concatenated x and y coordinate as defined in step 1. Therefore, the address generated with this is a valid Ethereum address, as also described in the posted question.</p>\n<p>The output of <code>addrKey.getPublicKeyAsHex()</code>, on the other hand, corresponds to the x coordinate prefixed with a 0x02 value. This is the <a href=\"https://davidederosa.com/basic-blockchain-programming/elliptic-curve-keys/\" rel=\"noreferrer\"><em>compressed</em></a> format of the public key. The leading byte has either the value 0x02 if the y value is even (as in this example), or the value 0x03. Since the compressed format does not contain the y coordinate, this cannot be used to <em>directly</em> infer the Ethereum address, or if it is done anyway, it will result in a wrong address (indirectly, of course, it would be possible since the y coordinate can be derived from a compressed public key).</p>\n<hr />\n<p>The <a href=\"https://davidederosa.com/basic-blockchain-programming/elliptic-curve-keys/\" rel=\"noreferrer\"><em>uncompressed</em></a> format of the public key can be obtained, e.g. with <a href=\"https://github.com/bitcoinj/bitcoinj/blob/1bcea2a59c99fe53f2eeab788eef1fd396f4b566/core/src/main/java/org/bitcoinj/core/ECKey.java#L306\" rel=\"noreferrer\"><code>addrKey.decompress()</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(addrKey.decompress().getPublicKeyAsHex());\n</code></pre>\n<p>which gives this result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>04a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\n</code></pre>\n<p>The uncompressed format consists of a leading marker byte with the value 0x04 followed by the x and y coordinates. So if the leading marker byte is removed, just the data according to step 1 is obtained, which is needed for the derivation of the Ethereum address:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(addrKey.decompress().getPublicKeyAsHex().substring(2));  \n</code></pre>\n<p>which results in:</p>\n<pre class=\"lang-none prettyprint-override\"><code>a35bf0fdf5df296cc3600422c3c8af480edb766ff6231521a517eb822dff52cd5440f87f5689c2929542e75e739ff30cd1e8cb0ef0beb77380d02cd7904978ca\n</code></pre>\n<hr />\n<p><strong>Steps 2 and 3:</strong></p>\n<p>Steps 2 and 3 are performed by <a href=\"https://github.com/web3j/web3j/blob/5934a730c498d25c6910903c826b3f50559e58fb/crypto/src/main/java/org/web3j/crypto/Keys.java#L101\" rel=\"noreferrer\"><code>Keys.getAddress()</code></a>. This allows the Ethereum address to be obtained using the uncompressed public key as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(Keys.getAddress(addrKey.decompress().getPublicKeyAsHex().substring(2)));\nSystem.out.println(Keys.getAddress(Sign.publicKeyFromPrivate(addrKey.getPrivKey())));       // For comparison\n</code></pre>\n<p>which gives the Ethereum address:</p>\n<pre class=\"lang-none prettyprint-override\"><code>23ad59cc6afff2e508772f69d22b19ffebf579e7\n23ad59cc6afff2e508772f69d22b19ffebf579e7\n</code></pre>\n<hr />\n<p><strong>Overloads of <code>Keys.getAddress()</code>:</strong></p>\n<p><code>Keys.getAddress()</code> provides various overloads for the data types <code>BigInteger</code>, hex string and <code>byte[]</code>. If the uncompressed key is given as <code>byte[]</code>, e.g. with <a href=\"https://www.javadoc.io/doc/org.bouncycastle/bcprov-jdk15on/latest/org/bouncycastle/math/ec/ECPoint.html#getEncoded-boolean-\" rel=\"noreferrer\"><code>addrKey.getPubKeyPoint().getEncoded(false)</code></a>, the <code>byte[]</code> can be used directly after removing the marker byte. Alternatively, the <code>byte[]</code> can be converted to a <code>BigInteger</code> with the marker byte removed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] uncompressed = addrKey.getPubKeyPoint().getEncoded(false);\nSystem.out.println(bytesToHex(Keys.getAddress(Arrays.copyOfRange(uncompressed, 1, uncompressed.length))).toLowerCase());  // bytesToHex() from https://stackoverflow.com/a/9855338\nSystem.out.println(Keys.getAddress(new BigInteger(1, uncompressed, 1, uncompressed.length - 1)));\nSystem.out.println(Keys.getAddress(Sign.publicKeyFromPrivate(addrKey.getPrivKey())));                                     // For comparison\n</code></pre>\n<p>which as expected returns the same Ethereum address:</p>\n<pre class=\"lang-none prettyprint-override\"><code>23ad59cc6afff2e508772f69d22b19ffebf579e7\n23ad59cc6afff2e508772f69d22b19ffebf579e7\n23ad59cc6afff2e508772f69d22b19ffebf579e7\n</code></pre>\n<p>One thing to note here is that <a href=\"https://github.com/web3j/web3j/blob/5934a730c498d25c6910903c826b3f50559e58fb/crypto/src/main/java/org/web3j/crypto/Keys.java#L113\" rel=\"noreferrer\"><code>Keys.getAddress(byte[]</code>)</a> does not pad the passed <code>byte[]</code>, while the overloads for <code>BigInteger</code> or hex strings <em>implicitly</em> pad. This can be relevant e.g. when converting a <code>BigInteger</code> (e.g. provided by <code>Sign.publicKeyFromPrivate(addrKey.getPrivKey())</code>) to a <code>byte[]</code>, since the result can also have less than 64 bytes (which would lead to different <em>Keccak-256</em> hashes). If <code>Keys.getAddress(byte[])</code> is used in this case, it must be <code>explicitly</code> padded with leading 0x00 values up to a length of 64 bytes.</p>\n"}],"owner":{"account_id":2452708,"reputation":189,"user_id":2143100,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2870,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1639423551,"creation_date":1609241019,"question_id":65491344,"body_markdown":"I trying to generate Ethereum addresses for the HD Wallet keys implemented with bitcoinj library, but I got confused:\r\n```\r\nDeterministicSeed seed = new DeterministicSeed(&quot;some seed code here&quot;, null, &quot;&quot;, 1409478661L);\r\nDeterministicKeyChain chain = DeterministicKeyChain.builder().seed(seed).build();\r\nDeterministicKey addrKey = chain.getKeyByPath(HDUtils.parsePath(&quot;M/44H/60H/0H/0/0&quot;), true);\r\nSystem.out.println(&quot;address from pub=&quot; + Keys.getAddress(Sign.publicKeyFromPrivate(addrKey.getPrivKey())));\r\n```\r\nthis code prints a correct Ethereum address accordingly to https://iancoleman.io/bip39/. Everything is fine here.\r\n\r\nBut when I trying to avoid private key usage and generate non-hardened keys using public keys only I getting different results, i.e. the call returns another result:\r\n```\r\nSystem.out.println(&quot;address from pub=&quot; + Keys.getAddress(addrKey.getPublicKeyAsHex()));\r\n```\r\nAnd it looks like the issue is in the &quot;different public keys&quot;, i.e. result of the ```Sign.publicKeyFromPrivate(addrKey.getPrivKey())``` and ```addrKey.getPublicKeyAsHex()``` are different.\r\nI&#39;m not experienced with cryptography, thus it may be a silly question... but I would appreciate any advice here.","title":"Generate Ethereum addresses in HD Wallet using public key only (bitcoinj/web3j)","body":"<p>I trying to generate Ethereum addresses for the HD Wallet keys implemented with bitcoinj library, but I got confused:</p>\n<pre><code>DeterministicSeed seed = new DeterministicSeed(&quot;some seed code here&quot;, null, &quot;&quot;, 1409478661L);\nDeterministicKeyChain chain = DeterministicKeyChain.builder().seed(seed).build();\nDeterministicKey addrKey = chain.getKeyByPath(HDUtils.parsePath(&quot;M/44H/60H/0H/0/0&quot;), true);\nSystem.out.println(&quot;address from pub=&quot; + Keys.getAddress(Sign.publicKeyFromPrivate(addrKey.getPrivKey())));\n</code></pre>\n<p>this code prints a correct Ethereum address accordingly to <a href=\"https://iancoleman.io/bip39/\" rel=\"noreferrer\">https://iancoleman.io/bip39/</a>. Everything is fine here.</p>\n<p>But when I trying to avoid private key usage and generate non-hardened keys using public keys only I getting different results, i.e. the call returns another result:</p>\n<pre><code>System.out.println(&quot;address from pub=&quot; + Keys.getAddress(addrKey.getPublicKeyAsHex()));\n</code></pre>\n<p>And it looks like the issue is in the &quot;different public keys&quot;, i.e. result of the <code>Sign.publicKeyFromPrivate(addrKey.getPrivKey())</code> and <code>addrKey.getPublicKeyAsHex()</code> are different.\nI'm not experienced with cryptography, thus it may be a silly question... but I would appreciate any advice here.</p>\n"},{"tags":["java","arraylist","null"],"comments":[{"owner":{"account_id":10192070,"reputation":2256,"user_id":7525132,"display_name":"Izruo"},"score":0,"creation_date":1639413895,"post_id":70338017,"comment_id":124336862,"body_markdown":"You&#39;re not inserting objects, you&#39;re creating lists around predefined sets of objects.","body":"You&#39;re not inserting objects, you&#39;re creating lists around predefined sets of objects."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1639413999,"post_id":70338017,"comment_id":124336903,"body_markdown":"Try adding elements after creating the lists, e.g. `l1.add(new Object())` and `l2.add(new Object())`. Adding `null` should work for both but adding anything but `null` to `l2` should make the compiler complain.","body":"Try adding elements after creating the lists, e.g. <code>l1.add(new Object())</code> and <code>l2.add(new Object())</code>. Adding <code>null</code> should work for both but adding anything but <code>null</code> to <code>l2</code> should make the compiler complain."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1639414228,"creation_date":1639414228,"answer_id":70338127,"question_id":70338017,"body_markdown":"No, the text is correct. `null` is a valid value for any type, therefore, you can invoke `.add(null)` on any list, regardless of what is in the `&lt;?&gt;`. However, `null` (literally) is __the only__ thing you can add to a `List&lt;? extends Whatever&gt;`. Given that literally `.add(null)` is generally useless, let&#39;s disregard it, which lets us simply state:\r\n\r\n__You cannot add anything to a `List&lt;?&gt;`__.\r\n\r\nThat&#39;s the point of what the text is trying to explain.\r\n\r\nWhy can&#39;t you add anything? Because of this:\r\n\r\nLet&#39;s say you have a `List&lt;? extend Number&gt;`. That means you can have a `List&lt;Integer&gt;`, or a `List&lt;Double&gt;` - those both &#39;work&#39;. But given that you don&#39;t know what it is, if you just try to add an Integer object to this list (which is a Number), then maybe you&#39;re adding an Integer to a list of Doubles which would be an illegal move. Conclusion: `.add()` on a list of `&lt;?&gt;` or `&lt;? extends something&gt;` is not possible. (Except for the academic case of `null`).","title":"Store null values in List&lt;Object&gt; and List&lt;?&gt;","body":"<p>No, the text is correct. <code>null</code> is a valid value for any type, therefore, you can invoke <code>.add(null)</code> on any list, regardless of what is in the <code>&lt;?&gt;</code>. However, <code>null</code> (literally) is <strong>the only</strong> thing you can add to a <code>List&lt;? extends Whatever&gt;</code>. Given that literally <code>.add(null)</code> is generally useless, let's disregard it, which lets us simply state:</p>\n<p><strong>You cannot add anything to a <code>List&lt;?&gt;</code></strong>.</p>\n<p>That's the point of what the text is trying to explain.</p>\n<p>Why can't you add anything? Because of this:</p>\n<p>Let's say you have a <code>List&lt;? extend Number&gt;</code>. That means you can have a <code>List&lt;Integer&gt;</code>, or a <code>List&lt;Double&gt;</code> - those both 'work'. But given that you don't know what it is, if you just try to add an Integer object to this list (which is a Number), then maybe you're adding an Integer to a list of Doubles which would be an illegal move. Conclusion: <code>.add()</code> on a list of <code>&lt;?&gt;</code> or <code>&lt;? extends something&gt;</code> is not possible. (Except for the academic case of <code>null</code>).</p>\n"}],"owner":{"account_id":4675201,"reputation":8131,"user_id":3785777,"accept_rate":70,"display_name":"luqo33"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2180,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70338127,"answer_count":1,"score":-2,"last_activity_date":1639423020,"creation_date":1639413788,"question_id":70338017,"body_markdown":"Java&#39;s official documentation says:\r\n\r\n&gt; It&#39;s important to note that `List&lt;Object&gt;` and `List&lt;?&gt;` are not\r\n&gt; the same. You can insert an `Object`, or any subtype of `Object`, into a\r\n&gt; `List&lt;Object&gt;`. But you can only insert `null` into a `List&lt;?&gt;`.\r\n\r\nReference [link][1].\r\n\r\nThis does not seem to be true. These two compile well and are usable (e.g. the list elements can be printed just fine):\r\n\r\n    List&lt;Object&gt; l1 = new ArrayList&lt;&gt;();\r\n    List&lt;?&gt; l2 = new ArrayList&lt;&gt;();\r\n    l1.add(null);\r\n    l2.add(null);\r\n\r\nCould you please say what the quoted sentence in the documentation really means?\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/unboundedWildcards.html","title":"Store null values in List&lt;Object&gt; and List&lt;?&gt;","body":"<p>Java's official documentation says:</p>\n<blockquote>\n<p>It's important to note that <code>List&lt;Object&gt;</code> and <code>List&lt;?&gt;</code> are not\nthe same. You can insert an <code>Object</code>, or any subtype of <code>Object</code>, into a\n<code>List&lt;Object&gt;</code>. But you can only insert <code>null</code> into a <code>List&lt;?&gt;</code>.</p>\n</blockquote>\n<p>Reference <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/unboundedWildcards.html\" rel=\"nofollow noreferrer\">link</a>.</p>\n<p>This does not seem to be true. These two compile well and are usable (e.g. the list elements can be printed just fine):</p>\n<pre><code>List&lt;Object&gt; l1 = new ArrayList&lt;&gt;();\nList&lt;?&gt; l2 = new ArrayList&lt;&gt;();\nl1.add(null);\nl2.add(null);\n</code></pre>\n<p>Could you please say what the quoted sentence in the documentation really means?</p>\n"},{"tags":["java","constructor","class-structure"],"answers":[{"tags":[],"owner":{"account_id":1475,"reputation":533764,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1639422870,"creation_date":1639422870,"answer_id":70339806,"question_id":70339750,"body_markdown":"The usual solution is to flip the dependencies between your constructor: call `super(someValue)` inside `B(int someValue)`, and call `this(DEFAULT)` inside `B()`. However, you’ll need to figure out a valid `DEFAULT` for this case —&#160;that is, a default value for `someValue` that can be used by the parameter-less `B()` constructor (`null` often works).\r\n\r\nIf `A()` and `A(int someValue)` do fundamentally different things this won’t work, but that’s a sign that the class `A` is probably poorly designed (in other words: it *should* be feasible).\r\n\r\nAs an alternative, just have both `B()` and `B(int someValue)` call a method that performs the rest of the initialisation, after calling `super()`/`super(someValue)`.","title":"How should i solve a problem with needing to call this() and super() at the same time?","body":"<p>The usual solution is to flip the dependencies between your constructor: call <code>super(someValue)</code> inside <code>B(int someValue)</code>, and call <code>this(DEFAULT)</code> inside <code>B()</code>. However, you’ll need to figure out a valid <code>DEFAULT</code> for this case — that is, a default value for <code>someValue</code> that can be used by the parameter-less <code>B()</code> constructor (<code>null</code> often works).</p>\n<p>If <code>A()</code> and <code>A(int someValue)</code> do fundamentally different things this won’t work, but that’s a sign that the class <code>A</code> is probably poorly designed (in other words: it <em>should</em> be feasible).</p>\n<p>As an alternative, just have both <code>B()</code> and <code>B(int someValue)</code> call a method that performs the rest of the initialisation, after calling <code>super()</code>/<code>super(someValue)</code>.</p>\n"}],"owner":{"account_id":14053051,"reputation":23,"user_id":10151228,"display_name":"Dipo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":70339806,"answer_count":1,"score":1,"last_activity_date":1639422870,"creation_date":1639422653,"question_id":70339750,"body_markdown":"Okay, so, I have a kind of specific problem. I have a class structure similar to this (simplified for simplicity purposes).\r\n\r\n```java\r\nclass A {\r\n    A() {\r\n        // long initialization\r\n    }\r\n\r\n    A(int someValue) {\r\n        this();\r\n        // do something with someValue\r\n    }\r\n}\r\n\r\nclass B extends A {\r\n    B() {\r\n        super();\r\n        // some long initialization\r\n    }\r\n\r\n    B(int someValue) {\r\n        // What should i do here ?\r\n    }\r\n}\r\n```\r\n\r\nBut now, i want to be able to construct class `B` using the second constructor. But the second constructor should call the `super(someValue)` constructor to make use of the `someValue` parameter, but at the same time it needs to call `this()` to to not have to duplicate the initialization of this class. The problem is that i can&#39;t call `this` and `super` constructors at the same time.\r\n\r\nAlso I can&#39;t extract the initialization in first constructor to some method, because I have some `final` fields that needs to be initialized inside the constructor to stay `final`.","title":"How should i solve a problem with needing to call this() and super() at the same time?","body":"<p>Okay, so, I have a kind of specific problem. I have a class structure similar to this (simplified for simplicity purposes).</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    A() {\n        // long initialization\n    }\n\n    A(int someValue) {\n        this();\n        // do something with someValue\n    }\n}\n\nclass B extends A {\n    B() {\n        super();\n        // some long initialization\n    }\n\n    B(int someValue) {\n        // What should i do here ?\n    }\n}\n</code></pre>\n<p>But now, i want to be able to construct class <code>B</code> using the second constructor. But the second constructor should call the <code>super(someValue)</code> constructor to make use of the <code>someValue</code> parameter, but at the same time it needs to call <code>this()</code> to to not have to duplicate the initialization of this class. The problem is that i can't call <code>this</code> and <code>super</code> constructors at the same time.</p>\n<p>Also I can't extract the initialization in first constructor to some method, because I have some <code>final</code> fields that needs to be initialized inside the constructor to stay <code>final</code>.</p>\n"},{"tags":["java","spring","spring-boot","jackson","jackson2"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1639419520,"post_id":70339215,"comment_id":124338971,"body_markdown":"Unknown properties don&#39;t cause an NPE. Show the full output.","body":"Unknown properties don&#39;t cause an NPE. Show the full output."},{"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"score":0,"creation_date":1639419964,"post_id":70339215,"comment_id":124339100,"body_markdown":"Added the output. Thanks","body":"Added the output. Thanks"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1639420036,"post_id":70339215,"comment_id":124339122,"body_markdown":"It seems to me that one of the `get()` calls in `node.get(&quot;parent&quot;).get(&quot;properties&quot;).get(&quot;nonExisting:keyhere&quot;)` is null, hence the NPE.","body":"It seems to me that one of the <code>get()</code> calls in <code>node.get(&quot;parent&quot;).get(&quot;properties&quot;).get(&quot;nonExisting:keyher&zwnj;&#8203;e&quot;)</code> is null, hence the NPE."},{"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"score":0,"creation_date":1639421342,"post_id":70339215,"comment_id":124339505,"body_markdown":"I understand. Question is - how to avoid it? As in my situation, for few calls there is some value present and in some cases its not. When the key is present, there is no error whatsoever.","body":"I understand. Question is - how to avoid it? As in my situation, for few calls there is some value present and in some cases its not. When the key is present, there is no error whatsoever."},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1639421383,"post_id":70339215,"comment_id":124339514,"body_markdown":"Please check my answer below.","body":"Please check my answer below."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1639426195,"post_id":70339215,"comment_id":124341008,"body_markdown":"The easiest way is to use [`path()`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#path(java.lang.String)).","body":"The easiest way is to use <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#path(java.lang.String)\" rel=\"nofollow noreferrer\"><code>path()</code></a>."}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639422337,"creation_date":1639420381,"answer_id":70339378,"question_id":70339215,"body_markdown":"You will need to cope with the possibility of `null` being returned by any of the calls in that chained method call as follows:\r\n```java\r\nprivate void getDetails(String nodeId) throws IOException {\r\n    Mono&lt;String&gt; mono = webClient.get().uri(&quot;/end/point&quot;).retrieve().bodyToMono(String.class);\r\n    System.out.println(mono.block());\r\n    final ObjectNode node = objectMapper().readValue(mono.block(), ObjectNode.class);\r\n    JsonNode parentNode = node.get(&quot;parent&quot;);\r\n    if (parentNode != null) {\r\n        JsonNode parentPropertiesNode = parentNode.get(&quot;properties&quot;);\r\n        if (parentPropertiesNode != null) {\r\n            JsonNode nonExistingKeyNode = parentPropertiesNode.get(&quot;nonExisting:keyhere&quot;);\r\n            if (nonExistingKeyNode != null) {\r\n                System.out.println(nonExistingKeyNode.asText());\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAdditionally, avoid at all costs using `block()` in a Reactive stack. By doing this you are wasting all the benefits of using Spring WebFlux. Here is a very interesting online resource about common mistakes while using the Reactive stack: https://medium.com/javarevisited/five-mistakes-to-avoid-in-reactive-java-786927ffd2f6.","title":"With all configurations DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES not working","body":"<p>You will need to cope with the possibility of <code>null</code> being returned by any of the calls in that chained method call as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void getDetails(String nodeId) throws IOException {\n    Mono&lt;String&gt; mono = webClient.get().uri(&quot;/end/point&quot;).retrieve().bodyToMono(String.class);\n    System.out.println(mono.block());\n    final ObjectNode node = objectMapper().readValue(mono.block(), ObjectNode.class);\n    JsonNode parentNode = node.get(&quot;parent&quot;);\n    if (parentNode != null) {\n        JsonNode parentPropertiesNode = parentNode.get(&quot;properties&quot;);\n        if (parentPropertiesNode != null) {\n            JsonNode nonExistingKeyNode = parentPropertiesNode.get(&quot;nonExisting:keyhere&quot;);\n            if (nonExistingKeyNode != null) {\n                System.out.println(nonExistingKeyNode.asText());\n            }\n        }\n    }\n}\n</code></pre>\n<p>Additionally, avoid at all costs using <code>block()</code> in a Reactive stack. By doing this you are wasting all the benefits of using Spring WebFlux. Here is a very interesting online resource about common mistakes while using the Reactive stack: <a href=\"https://medium.com/javarevisited/five-mistakes-to-avoid-in-reactive-java-786927ffd2f6\" rel=\"nofollow noreferrer\">https://medium.com/javarevisited/five-mistakes-to-avoid-in-reactive-java-786927ffd2f6</a>.</p>\n"}],"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":953,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70339378,"answer_count":1,"score":-1,"last_activity_date":1639422337,"creation_date":1639419478,"question_id":70339215,"body_markdown":"I tried all the solutions provided on these below SO threads:\r\n\r\nhttps://stackoverflow.com/questions/54661770/jackson-fail-on-unknown-properties-to-false-not-working\r\n\r\nhttps://stackoverflow.com/questions/8409567/jackson-unrecognized-field\r\n\r\nhttps://stackoverflow.com/questions/21262378/spring-boot-web-set-fail-on-unknown-properties-to-false-in-jackson\r\n\r\nAnd around 10 more similar SO threads.\r\n\r\nHere is my Spring Boot application:\r\n\r\n    @SpringBootApplication(exclude = { DataSourceAutoConfiguration.class })\r\n    public class MyApplication {\r\n    \r\n    \t@Autowired\r\n    \tprivate WebClient webClient;\r\n    \r\n    \tpublic static void main(String args[]) {\r\n    \t\tSpringApplication.run(MyApplication.class, args);\r\n    \r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic CommandLineRunner demo() {\r\n    \t\treturn (args) -&gt; {\r\n    \t\t\tgetDetails(&quot;abcd12345&quot;);\r\n    \r\n    \t\t};\r\n    \t}\r\n    \r\n    \tprivate void getDetails(String nodeId) throws IOException {\r\n    \t\tMono&lt;String&gt; mono = webClient.get().uri(&quot;/end/point&quot;).retrieve().bodyToMono(String.class);\r\n    \t\tSystem.out.println(mono.block());\r\n    \t\tfinal ObjectNode node = objectMapper().readValue(mono.block(), ObjectNode.class);\r\n    \t\tSystem.out.println(node.get(&quot;parent&quot;).get(&quot;properties&quot;).get(&quot;nonExisting:keyhere&quot;).asText());  // NPE here\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic ObjectMapper objectMapper() {\r\n    \t\treturn Jackson2ObjectMapperBuilder.json().featuresToEnable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\r\n    \t\t\t\t.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Jackson2ObjectMapperBuilder objectMapperBuilder() {\r\n    \t\tJackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();\r\n    \t\tbuilder.failOnUnknownProperties(false);\r\n    \t\treturn builder;\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd my application.properties file has: \r\n\r\n    spring.jackson.deserialization.FAIL_ON_UNKNOWN_PROPERTIES=false\r\n\r\n\r\nOutput:\r\n\r\n    Caused by: java.lang.NullPointerException: null\r\n    \tat com.springbatch.parallel.processing.Application.getDetails(MyApplication .java:43)\r\n\r\n\r\n\r\nBut still I am getting NullPointerException (NPE) for non-existing key. I am trying to disable FAIL_ON_UNKNOWN_PROPERTIES. What I am missing here? ","title":"With all configurations DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES not working","body":"<p>I tried all the solutions provided on these below SO threads:</p>\n<p><a href=\"https://stackoverflow.com/questions/54661770/jackson-fail-on-unknown-properties-to-false-not-working\">Jackson FAIL_ON_UNKNOWN_PROPERTIES to false not working</a></p>\n<p><a href=\"https://stackoverflow.com/questions/8409567/jackson-unrecognized-field\">jackson Unrecognized field</a></p>\n<p><a href=\"https://stackoverflow.com/questions/21262378/spring-boot-web-set-fail-on-unknown-properties-to-false-in-jackson\">Spring Boot Web- Set FAIL_ON_UNKNOWN_PROPERTIES to false in Jackson</a></p>\n<p>And around 10 more similar SO threads.</p>\n<p>Here is my Spring Boot application:</p>\n<pre><code>@SpringBootApplication(exclude = { DataSourceAutoConfiguration.class })\npublic class MyApplication {\n\n    @Autowired\n    private WebClient webClient;\n\n    public static void main(String args[]) {\n        SpringApplication.run(MyApplication.class, args);\n\n    }\n\n    @Bean\n    public CommandLineRunner demo() {\n        return (args) -&gt; {\n            getDetails(&quot;abcd12345&quot;);\n\n        };\n    }\n\n    private void getDetails(String nodeId) throws IOException {\n        Mono&lt;String&gt; mono = webClient.get().uri(&quot;/end/point&quot;).retrieve().bodyToMono(String.class);\n        System.out.println(mono.block());\n        final ObjectNode node = objectMapper().readValue(mono.block(), ObjectNode.class);\n        System.out.println(node.get(&quot;parent&quot;).get(&quot;properties&quot;).get(&quot;nonExisting:keyhere&quot;).asText());  // NPE here\n    }\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        return Jackson2ObjectMapperBuilder.json().featuresToEnable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n                .build();\n    }\n\n    @Bean\n    public Jackson2ObjectMapperBuilder objectMapperBuilder() {\n        Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();\n        builder.failOnUnknownProperties(false);\n        return builder;\n    }\n\n}\n</code></pre>\n<p>And my application.properties file has:</p>\n<pre><code>spring.jackson.deserialization.FAIL_ON_UNKNOWN_PROPERTIES=false\n</code></pre>\n<p>Output:</p>\n<pre><code>Caused by: java.lang.NullPointerException: null\n    at com.springbatch.parallel.processing.Application.getDetails(MyApplication .java:43)\n</code></pre>\n<p>But still I am getting NullPointerException (NPE) for non-existing key. I am trying to disable FAIL_ON_UNKNOWN_PROPERTIES. What I am missing here?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9126236,"reputation":6268,"user_id":6789816,"display_name":"Connor Low"},"score":0,"creation_date":1639420886,"post_id":70339153,"comment_id":124339384,"body_markdown":"Can you share the graph described by the debugger (or a relevant bit showing where it isn&#39;t meeting your requirements)?","body":"Can you share the graph described by the debugger (or a relevant bit showing where it isn&#39;t meeting your requirements)?"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1639420999,"post_id":70339153,"comment_id":124339409,"body_markdown":"What is `DirectedGraph` ?","body":"What is <code>DirectedGraph</code> ?"},{"owner":{"account_id":134685,"reputation":14507,"user_id":510036,"accept_rate":96,"display_name":"Qix - MONICA WAS MISTREATED"},"score":0,"creation_date":1639421229,"post_id":70339153,"comment_id":124339480,"body_markdown":"Without seeing `DirectedGraph` it&#39;s hard to say, but you&#39;re performing a copy instead of holding pointers. That might have something to do with it.","body":"Without seeing <code>DirectedGraph</code> it&#39;s hard to say, but you&#39;re performing a copy instead of holding pointers. That might have something to do with it."},{"owner":{"account_id":22586723,"reputation":43,"user_id":16770553,"display_name":"MS_Warrior"},"score":0,"creation_date":1639422070,"post_id":70339153,"comment_id":124339719,"body_markdown":"I added the DirectedGraph","body":"I added the DirectedGraph"},{"owner":{"account_id":20414037,"reputation":455,"user_id":14976735,"display_name":"Marte Valerio Falcone"},"score":0,"creation_date":1639422721,"post_id":70339153,"comment_id":124339937,"body_markdown":"OT: if they are stupid problems or tricky ones they still remains problems, and problems have to be resolved. Don&#39;t be afraid of asking or understimate the problems you face. You&#39;re on the way of becoming a good problem solver if you want to learn.","body":"OT: if they are stupid problems or tricky ones they still remains problems, and problems have to be resolved. Don&#39;t be afraid of asking or understimate the problems you face. You&#39;re on the way of becoming a good problem solver if you want to learn."},{"owner":{"account_id":22586723,"reputation":43,"user_id":16770553,"display_name":"MS_Warrior"},"score":0,"creation_date":1639427719,"post_id":70339153,"comment_id":124341434,"body_markdown":"You’re not wrong Marte, but I’ve been hurt before…","body":"You’re not wrong Marte, but I’ve been hurt before…"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1639430877,"post_id":70339153,"comment_id":124342378,"body_markdown":"In `addVertex()`, this line `if (curr.data.equals(node)) {` should probably be `if (curr.data.equals(node.data)) {` so that you are comparing the DATA from both nodes. As written, you&#39;re comparing data to node, apples to oranges. But the method seems suspect as you&#39;re only searching the &quot;root&quot; nodes and never look at the nodes within the current code to see if the node you&#39;re looking for might be in there. It would help if we could see the input(s) and the expected output(s)/graph as well...","body":"In <code>addVertex()</code>, this line <code>if (curr.data.equals(node)) {</code> should probably be <code>if (curr.data.equals(node.data)) {</code> so that you are comparing the DATA from both nodes. As written, you&#39;re comparing data to node, apples to oranges. But the method seems suspect as you&#39;re only searching the &quot;root&quot; nodes and never look at the nodes within the current code to see if the node you&#39;re looking for might be in there. It would help if we could see the input(s) and the expected output(s)/graph as well..."}],"owner":{"account_id":22586723,"reputation":43,"user_id":16770553,"display_name":"MS_Warrior"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639422039,"creation_date":1639419172,"question_id":70339153,"body_markdown":"I feel like an idiot because I&#39;m sure this is something simple, but I&#39;m still in school and still learning, so I&#39;m sure I&#39;ll deserve the razzing I&#39;ll get for asking... I&#39;m working on a project to create a directed unweighted graph. The graph needs to be formed in adjacency list representation which I&#39;ve done; however, I&#39;ve hit a snag. The code for adding a vertex (`Node`), edge, and creating the list itself is below:\r\n\r\n```\r\npublic class Node&lt;T&gt; {\r\n    T data;\r\n    protected boolean marked = false;\r\n    protected boolean cycle = false;\r\n    protected ArrayList&lt;Node&lt;T&gt;&gt; edges = new ArrayList&lt;Node&lt;T&gt;&gt;();\r\n        \r\n    Node(T data){\r\n        this.data = data;\r\n    }\r\n    \r\n    public void addEdges(Node&lt;T&gt; edgy) {\r\n        edges.add(edgy);\r\n    }\r\n    \r\n    public String toString() {\r\n        return (String) data;\r\n    }\r\n    \r\n}\r\n\r\n\r\nDirectedGraph&lt;String&gt; graph = new DirectedGraph&lt;String&gt;();\r\n\r\nfor(String currLine: fileLines) {\r\n    //TODO create nodes\r\n    String[] classes = currLine.split(&quot; &quot;);\r\n    Node&lt;String&gt; headliner = null;\r\n    for(String currClass : classes) {\r\n        Node&lt;String&gt; currNode = new Node&lt;String&gt;(currClass);\t\t\t\t\t\r\n        if (headliner == null) {\r\n            graph.addVertex(currNode);\r\n            headliner = currNode;\r\n        }\r\n        else {\r\n            graph.addEdge(headliner, currNode);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe graph shows up in debugger fine, except that the internal nodes (The ArrayList of nodes in the Nodes class) don&#39;t have any pointers to the other vertices of the same name, so the graph doesn&#39;t connect there. I&#39;m at a loss and didn&#39;t know where else to ask...\r\n\r\nEdit: Since many were asking for the DirectedGraph class\r\n\r\n    public class DirectedGraph&lt;T&gt;{\r\n    \tHeirarchy&lt;T&gt; heir = new Heirarchy&lt;T&gt;();\r\n    \tArrayList&lt;Node&lt;T&gt;&gt; nodes = new ArrayList&lt;&gt;();\r\n    \tNode&lt;T&gt; root;\r\n    \tNode&lt;T&gt; parent;\r\n    \t\r\n    \tpublic DirectedGraph() {\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void addVertex(Node&lt;T&gt; node) {\r\n    \t\tfor (Node&lt;T&gt; curr : nodes) {\r\n    \t\t\tif (curr.data.equals(node)) {\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tnodes.add(node);\r\n    \t}\r\n    \t\r\n    \tpublic void addEdge(Node&lt;T&gt; source, Node&lt;T&gt; dest) {\r\n    \t\tsource.addEdges(dest);\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic void performAction(DFSActionsInterface&lt;T&gt; action) {\r\n    \t\tif (!nodes.isEmpty()) {\r\n    \t\t\tperformAction(action, nodes.get(0));\r\n    \t\t}\r\n    \t}\r\n    //\t depth_first_search(vertex s)\r\n    \t\r\n    \tpublic void DFS() {\r\n    \t\tsetFalse();\r\n    \t\troot = nodes.get(0);\r\n    \t\twhile(!nodes.isEmpty()) {\r\n    \t\t\tfor (Node&lt;T&gt; curr : nodes) {\r\n    \t\t\t\tif (!curr.marked) {\r\n    \t\t\t\t\tDFS(curr);\r\n    \t\t\t\t\tvisited(curr);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\their.processVertex(root);\r\n    \t}\r\n    \tpublic void DFS(Node&lt;T&gt; node) {\r\n    \t\twhile(!node.edges.isEmpty()) {\r\n    \t\t\tfor (Node&lt;T&gt; vertex: node.edges) {\r\n    \t\t\t\tif(!vertex.marked) {\r\n    \t\t\t\t\tfor(Node&lt;T&gt; source: nodes) {\r\n    \t\t\t\t\t\tif (source.edges.contains(vertex) || vertex.edges.contains(source)) {\r\n    \t\t\t\t\t\t\tvertex.cycle = true;\r\n    \t\t\t\t\t\t\treturn;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tvertex.marked = true;\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t} return;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t\r\n    \tpublic void performAction(DFSActionsInterface&lt;T&gt; action, Node&lt;T&gt; curr) {\r\n    // \t\t it should first initialize all the vertices to the undiscovered state\r\n    \t\tsetFalse();\r\n    \t\tif(nodes.contains(curr.data)) {\r\n    //\t\t if s is discovered\r\n    //\t\t perform cycle detected action\r\n    \t\t\taction.cycleDetected(curr);\r\n    //\t\t return\r\n    \t\t\treturn;\r\n    \t\t}\r\n    //\t\t perform add vertex action\r\n    //\t\t mark s as discovered\r\n    \t\tvisited(curr);\r\n    //\t\t perform descend action\r\n    \t\taction.descend(curr);\r\n    //\t\t for all adjacent vertices v\r\n    //\t\t depth_first_search(v)\r\n    \t\tperformAction(action, curr.edges.get(0));\r\n    //\t\t perform ascend action\r\n    \t\taction.ascend(curr);\r\n    //\t\t mark s as finished\r\n    \t\t\t\r\n    \t}\r\n    \tpublic void setFalse() {\r\n    \t\tfor (Node&lt;T&gt; node : nodes) {\r\n    \t\t\tnode.marked = false;\r\n    \t\t\tfor(Node&lt;T&gt; edge : node.edges) {\r\n    \t\t\t\tedge.marked = false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \tpublic void visited(Node&lt;T&gt; node) {\r\n    \t\tnode.marked = true;\r\n    \t}\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RFwdu.jpg","title":"Directed graph won&#39;t connect to other nodes","body":"<p>I feel like an idiot because I'm sure this is something simple, but I'm still in school and still learning, so I'm sure I'll deserve the razzing I'll get for asking... I'm working on a project to create a directed unweighted graph. The graph needs to be formed in adjacency list representation which I've done; however, I've hit a snag. The code for adding a vertex (<code>Node</code>), edge, and creating the list itself is below:</p>\n<pre><code>public class Node&lt;T&gt; {\n    T data;\n    protected boolean marked = false;\n    protected boolean cycle = false;\n    protected ArrayList&lt;Node&lt;T&gt;&gt; edges = new ArrayList&lt;Node&lt;T&gt;&gt;();\n        \n    Node(T data){\n        this.data = data;\n    }\n    \n    public void addEdges(Node&lt;T&gt; edgy) {\n        edges.add(edgy);\n    }\n    \n    public String toString() {\n        return (String) data;\n    }\n    \n}\n\n\nDirectedGraph&lt;String&gt; graph = new DirectedGraph&lt;String&gt;();\n\nfor(String currLine: fileLines) {\n    //TODO create nodes\n    String[] classes = currLine.split(&quot; &quot;);\n    Node&lt;String&gt; headliner = null;\n    for(String currClass : classes) {\n        Node&lt;String&gt; currNode = new Node&lt;String&gt;(currClass);                    \n        if (headliner == null) {\n            graph.addVertex(currNode);\n            headliner = currNode;\n        }\n        else {\n            graph.addEdge(headliner, currNode);\n        }\n    }\n}\n</code></pre>\n<p>The graph shows up in debugger fine, except that the internal nodes (The ArrayList of nodes in the Nodes class) don't have any pointers to the other vertices of the same name, so the graph doesn't connect there. I'm at a loss and didn't know where else to ask...</p>\n<p>Edit: Since many were asking for the DirectedGraph class</p>\n<pre><code>public class DirectedGraph&lt;T&gt;{\n    Heirarchy&lt;T&gt; heir = new Heirarchy&lt;T&gt;();\n    ArrayList&lt;Node&lt;T&gt;&gt; nodes = new ArrayList&lt;&gt;();\n    Node&lt;T&gt; root;\n    Node&lt;T&gt; parent;\n    \n    public DirectedGraph() {\n        \n    }\n    \n    public void addVertex(Node&lt;T&gt; node) {\n        for (Node&lt;T&gt; curr : nodes) {\n            if (curr.data.equals(node)) {\n                return;\n            }\n        }\n        nodes.add(node);\n    }\n    \n    public void addEdge(Node&lt;T&gt; source, Node&lt;T&gt; dest) {\n        source.addEdges(dest);\n    }\n    \n    \n    public void performAction(DFSActionsInterface&lt;T&gt; action) {\n        if (!nodes.isEmpty()) {\n            performAction(action, nodes.get(0));\n        }\n    }\n//   depth_first_search(vertex s)\n    \n    public void DFS() {\n        setFalse();\n        root = nodes.get(0);\n        while(!nodes.isEmpty()) {\n            for (Node&lt;T&gt; curr : nodes) {\n                if (!curr.marked) {\n                    DFS(curr);\n                    visited(curr);\n                }\n            }\n        }\n        heir.processVertex(root);\n    }\n    public void DFS(Node&lt;T&gt; node) {\n        while(!node.edges.isEmpty()) {\n            for (Node&lt;T&gt; vertex: node.edges) {\n                if(!vertex.marked) {\n                    for(Node&lt;T&gt; source: nodes) {\n                        if (source.edges.contains(vertex) || vertex.edges.contains(source)) {\n                            vertex.cycle = true;\n                            return;\n                        }\n                        vertex.marked = true;\n\n                    }\n                } return;\n            }\n        }\n    }\n\n    \n    public void performAction(DFSActionsInterface&lt;T&gt; action, Node&lt;T&gt; curr) {\n//       it should first initialize all the vertices to the undiscovered state\n        setFalse();\n        if(nodes.contains(curr.data)) {\n//       if s is discovered\n//       perform cycle detected action\n            action.cycleDetected(curr);\n//       return\n            return;\n        }\n//       perform add vertex action\n//       mark s as discovered\n        visited(curr);\n//       perform descend action\n        action.descend(curr);\n//       for all adjacent vertices v\n//       depth_first_search(v)\n        performAction(action, curr.edges.get(0));\n//       perform ascend action\n        action.ascend(curr);\n//       mark s as finished\n            \n    }\n    public void setFalse() {\n        for (Node&lt;T&gt; node : nodes) {\n            node.marked = false;\n            for(Node&lt;T&gt; edge : node.edges) {\n                edge.marked = false;\n            }\n        }\n    }\n    public void visited(Node&lt;T&gt; node) {\n        node.marked = true;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/RFwdu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RFwdu.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","selenium","google-chrome","automation","driver"],"comments":[{"owner":{"account_id":84127,"reputation":51105,"user_id":235354,"display_name":"jspcal"},"score":1,"creation_date":1639421727,"post_id":70339559,"comment_id":124339607,"body_markdown":"was there an error (`false` would be lowercase java)","body":"was there an error (<code>false</code> would be lowercase java)"}],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639421824,"creation_date":1639421824,"answer_id":70339610,"question_id":70339559,"body_markdown":"In Java it will be\r\n```java\r\nChromeOptions options = new ChromeOptions();\r\n\r\noptions.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\noptions.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n\r\nWebDriver driver = new ChromeDriver(options);\r\n\r\n```","title":"Selenium Java Chrome remove flag","body":"<p>In Java it will be</p>\n<pre class=\"lang-java prettyprint-override\"><code>ChromeOptions options = new ChromeOptions();\n\noptions.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\noptions.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\n\nWebDriver driver = new ChromeDriver(options);\n\n</code></pre>\n"}],"owner":{"account_id":19379111,"reputation":232,"user_id":14170782,"display_name":"Muddyblack k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70339610,"answer_count":1,"score":1,"last_activity_date":1639422022,"creation_date":1639421522,"question_id":70339559,"body_markdown":"I want to hide that I use a Webdriver. I know the needed Code for Python:\r\n\r\n    option.add_experimental_option(&quot;excludeSwitches&quot;, [&quot;enable-automation&quot;])\r\n    option.add_experimental_option(&#39;useAutomationExtension&#39;, False)\r\n    \r\n\r\nbut I want it for Java. I tried this but I get errors:\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, path);\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.setExperimentalOption(&#39;excludeSwitches&#39;, [&#39;enable-automation&#39;]);\r\n    options.setExperimentalOption(&#39;useAutomationExtension&#39;, False);\r\n\r\n    WebDriver driver = new ChromeDriver(options);\r\n    driver.manage().window().maximize();\r\n    driver.get(&quot;&quot;);\r\n\r\nI hope you can help me out.\r\n\r\nBest Regards\r\n\r\nChristian","title":"Selenium Java Chrome remove flag","body":"<p>I want to hide that I use a Webdriver. I know the needed Code for Python:</p>\n<pre><code>option.add_experimental_option(&quot;excludeSwitches&quot;, [&quot;enable-automation&quot;])\noption.add_experimental_option('useAutomationExtension', False)\n</code></pre>\n<p>but I want it for Java. I tried this but I get errors:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, path);\nChromeOptions options = new ChromeOptions();\noptions.setExperimentalOption('excludeSwitches', ['enable-automation']);\noptions.setExperimentalOption('useAutomationExtension', False);\n\nWebDriver driver = new ChromeDriver(options);\ndriver.manage().window().maximize();\ndriver.get(&quot;&quot;);\n</code></pre>\n<p>I hope you can help me out.</p>\n<p>Best Regards</p>\n<p>Christian</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":0,"creation_date":1639431718,"post_id":70339490,"comment_id":124342612,"body_markdown":"What database are you using? Just checked on postgres:14, spring boot 2.4.0 and everything works just fine. Could you create [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)?","body":"What database are you using? Just checked on postgres:14, spring boot 2.4.0 and everything works just fine. Could you create <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":1894993,"reputation":1129,"user_id":1712172,"display_name":"code_mechanic"},"score":0,"creation_date":1640362154,"post_id":70339490,"comment_id":124578050,"body_markdown":"I think, the problem is the native query as it will bypass the current session and retrieve from DB which will not give the data back (as it is not persisted yet), May I know why are you using native query? I think you may use the JPQL instead.","body":"I think, the problem is the native query as it will bypass the current session and retrieve from DB which will not give the data back (as it is not persisted yet), May I know why are you using native query? I think you may use the JPQL instead."}],"owner":{"account_id":12690831,"reputation":73,"user_id":9220998,"display_name":"strelchm"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":625,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639421537,"creation_date":1639421092,"question_id":70339490,"body_markdown":"   I have method &quot;process&quot;, that gets the list of data from some generator . Every data has it&#39;s own state (field stringValue) and some function id. The list can contains the data with common function id. The method &quot;process&quot; is called from other class, so the transaction is opened directly:\r\n\r\n    @Transactional\r\n    private void process(List&lt;Data&gt; data) {\r\n        for (Data data : data) {\r\n            saveAndGenerateEvent(data);\r\n        }\r\n    }\r\n\r\nAfter getting list of unprocessed data, there is the iterationg through it. In every step the event is generated and then data is saved.  \r\n\r\n\r\n\r\n    private void saveAndGenerateEvent(Data data) {\r\n        DataState newState = DataState.getByName(data.getStringValue()).orElse(null);\r\n        DataState lastState = dataRepository.getLastData(data.getFunctionId(), Attribute.STATE.getId()).map(Data::getStringValue)\r\n                .flatMap(DataState::getByName).orElse(null);\r\n        if (newState != lastState) {\r\n            // ... generate Event\r\n        }\r\n        dataRepository.save(data);\r\n    }\r\n\r\nAnd the repository: \r\n\r\n    @Repository\r\n    public interface DataRepository extends CrudRepository&lt;Data, Long&gt; {\r\n            @Query(value = &quot;SELECT d.* FROM data d WHERE d.function_id = ?1 AND d.attribute_id = ?2 AND NOT d.deleted &quot; +\r\n                   &quot;ORDER BY d.id DESC LIMIT 1&quot;, nativeQuery = true)\r\n            Optional&lt;Data&gt; findLast(Long functionId, Integer attributeId);\r\n        }\r\nThe problem - if there is several data for one function, the saving data at the end of the saveAndGenerateEvent is not visible in the second iteration of saveAndGenerateEvent in dataRepository.getLastData - it returns the last data for function that was before process-method. And the new created data is not visible. I try to use not native query - JPQL and Data JPA sequence, but result is same. I try to use saveAndFlush method of JpaRepository instead of save-method of CrudRepository, but the result is the same. What is the cause of this &quot;lost update&quot; after first iterations and how I can get an actual last data value in any iteration?\r\n\r\n","title":"Spring data jpa/hibernate: updates after save() method are not visible in @Query-result set","body":"<p>I have method &quot;process&quot;, that gets the list of data from some generator . Every data has it's own state (field stringValue) and some function id. The list can contains the data with common function id. The method &quot;process&quot; is called from other class, so the transaction is opened directly:</p>\n<pre><code>@Transactional\nprivate void process(List&lt;Data&gt; data) {\n    for (Data data : data) {\n        saveAndGenerateEvent(data);\n    }\n}\n</code></pre>\n<p>After getting list of unprocessed data, there is the iterationg through it. In every step the event is generated and then data is saved.</p>\n<pre><code>private void saveAndGenerateEvent(Data data) {\n    DataState newState = DataState.getByName(data.getStringValue()).orElse(null);\n    DataState lastState = dataRepository.getLastData(data.getFunctionId(), Attribute.STATE.getId()).map(Data::getStringValue)\n            .flatMap(DataState::getByName).orElse(null);\n    if (newState != lastState) {\n        // ... generate Event\n    }\n    dataRepository.save(data);\n}\n</code></pre>\n<p>And the repository:</p>\n<pre><code>@Repository\npublic interface DataRepository extends CrudRepository&lt;Data, Long&gt; {\n        @Query(value = &quot;SELECT d.* FROM data d WHERE d.function_id = ?1 AND d.attribute_id = ?2 AND NOT d.deleted &quot; +\n               &quot;ORDER BY d.id DESC LIMIT 1&quot;, nativeQuery = true)\n        Optional&lt;Data&gt; findLast(Long functionId, Integer attributeId);\n    }\n</code></pre>\n<p>The problem - if there is several data for one function, the saving data at the end of the saveAndGenerateEvent is not visible in the second iteration of saveAndGenerateEvent in dataRepository.getLastData - it returns the last data for function that was before process-method. And the new created data is not visible. I try to use not native query - JPQL and Data JPA sequence, but result is same. I try to use saveAndFlush method of JpaRepository instead of save-method of CrudRepository, but the result is the same. What is the cause of this &quot;lost update&quot; after first iterations and how I can get an actual last data value in any iteration?</p>\n"},{"tags":["java","itext7"],"answers":[{"tags":[],"owner":{"account_id":2703230,"reputation":12011,"user_id":2333458,"accept_rate":75,"display_name":"Alexey Subach"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639420543,"creation_date":1639420543,"answer_id":70339401,"question_id":70227270,"body_markdown":"**TL; DR**: either remove `setFontSize` in\r\n```\r\np\r\n                    .setFont(font)\r\n                    .setFontSize(12)\r\n                    //.setKeepWithNext(true)\r\n                    .setDestination(name)\r\n```\r\n\r\n**or** change `setFontSize(10)` -&gt; `setFontSize(12)` in\r\n```\r\ndocument.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\r\n```\r\n\r\n**Explanation**: You are setting the `Document` to not immediately flush elements added to that document with the following line:\r\n\r\n```\r\nDocument document = new Document(pdf, PageSize.A4,false);\r\n```\r\n\r\nThen you add an paragraph element with font size equal to 10 to the document with the following line:\r\n\r\n```\r\ndocument.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\r\n```\r\n\r\nWhat happens is that the element is being laid out (split in lines etc), but now drawn on the page. Then you do `.setFontSize(12)` and this new font size is applied for `draw` only, so iText calculated that X characters would fit into one line assuming the font size is 10 while in reality the font size is 12 and obviously fewer characters can fit into one line.\r\n\r\nThere is no sense in setting the font size two times to different values - just pick one value you want to see in the resultant document and set it once.","title":"itext 7 pdf how to prevent text overflow on right side of the page","body":"<p><strong>TL; DR</strong>: either remove <code>setFontSize</code> in</p>\n<pre><code>p\n                    .setFont(font)\n                    .setFontSize(12)\n                    //.setKeepWithNext(true)\n                    .setDestination(name)\n</code></pre>\n<p><strong>or</strong> change <code>setFontSize(10)</code> -&gt; <code>setFontSize(12)</code> in</p>\n<pre><code>document.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\n</code></pre>\n<p><strong>Explanation</strong>: You are setting the <code>Document</code> to not immediately flush elements added to that document with the following line:</p>\n<pre><code>Document document = new Document(pdf, PageSize.A4,false);\n</code></pre>\n<p>Then you add an paragraph element with font size equal to 10 to the document with the following line:</p>\n<pre><code>document.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\n</code></pre>\n<p>What happens is that the element is being laid out (split in lines etc), but now drawn on the page. Then you do <code>.setFontSize(12)</code> and this new font size is applied for <code>draw</code> only, so iText calculated that X characters would fit into one line assuming the font size is 10 while in reality the font size is 12 and obviously fewer characters can fit into one line.</p>\n<p>There is no sense in setting the font size two times to different values - just pick one value you want to see in the resultant document and set it once.</p>\n"}],"owner":{"account_id":446955,"reputation":125,"user_id":840303,"accept_rate":100,"display_name":"iteyran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":820,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70339401,"answer_count":1,"score":0,"last_activity_date":1639420543,"creation_date":1638633933,"question_id":70227270,"body_markdown":"I am using itextpdf 7 (7.2.0) to create a pdf file. However even though the TOC part is rendered very well, in the content part the text overflows. Here is my code that generates the pdf: \r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) throws IOException {\r\n        PdfWriter writer = new PdfWriter(&quot;fiftyfourthPdf.pdf&quot;);\r\n        PdfDocument pdf = new PdfDocument(writer);\r\n        Document document = new Document(pdf, PageSize.A4,false);\r\n        //document.setMargins(30,10,36,10);\r\n\r\n// Create a PdfFont\r\n        PdfFont font = PdfFontFactory.createFont(StandardFonts.TIMES_ROMAN,&quot;Cp1254&quot;);\r\n\r\n        document\r\n                .setTextAlignment(TextAlignment.JUSTIFIED)\r\n                .setFont(font)\r\n                .setFontSize(11);\r\n        PdfOutline outline = null;\r\n        java.util.List&lt;AbstractMap.SimpleEntry&lt;String, AbstractMap.SimpleEntry&lt;String, Integer&gt;&gt;&gt; toc = new ArrayList&lt;&gt;();\r\n        for(int i=0;i&lt;5000;i++){\r\n            String line = &quot;This is paragraph &quot; + String.valueOf(i+1)+ &quot; &quot;;\r\n            line = line.concat(line).concat(line).concat(line).concat(line).concat(line);\r\n            Paragraph p = new Paragraph(line);\r\n            p.setKeepTogether(true);\r\n            document.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\r\n\r\n            //PROCESS FOR TOC\r\n            String name = &quot;para &quot; + String.valueOf(i+1);\r\n            outline = createOutline(outline,pdf,line ,name );\r\n            AbstractMap.SimpleEntry&lt;String, Integer&gt; titlePage = new AbstractMap.SimpleEntry(line, pdf.getNumberOfPages());\r\n            p\r\n                    .setFont(font)\r\n                    .setFontSize(12)\r\n                    //.setKeepWithNext(true)\r\n                    .setDestination(name)\r\n\r\n                    // Add the current page number to the table of contents list\r\n                    .setNextRenderer(new UpdatePageRenderer(p));\r\n            toc.add(new AbstractMap.SimpleEntry(name, titlePage));\r\n\r\n        }\r\n\r\n        int contentPageNumber = pdf.getNumberOfPages();\r\n\r\n        for (int i = 1; i &lt;= contentPageNumber; i++) {\r\n\r\n            // Write aligned text to the specified by parameters point\r\n            document.showTextAligned(new Paragraph(String.format(&quot;Sayfa %s / %s&quot;, i, contentPageNumber)).setFontSize(10),\r\n                    559, 26, i, TextAlignment.RIGHT, VerticalAlignment.MIDDLE, 0);\r\n        }\r\n\r\n        //BEGINNING OF TOC\r\n        document.add(new AreaBreak());\r\n        Paragraph p = new Paragraph(&quot;Table of Contents&quot;)\r\n                .setFont(font)\r\n                .setDestination(&quot;toc&quot;);\r\n        document.add(p);\r\n        java.util.List&lt;TabStop&gt; tabStops = new ArrayList&lt;&gt;();\r\n        tabStops.add(new TabStop(580, TabAlignment.RIGHT, new DottedLine()));\r\n        for (AbstractMap.SimpleEntry&lt;String, AbstractMap.SimpleEntry&lt;String, Integer&gt;&gt; entry : toc) {\r\n            AbstractMap.SimpleEntry&lt;String, Integer&gt; text = entry.getValue();\r\n            p = new Paragraph()\r\n                    .addTabStops(tabStops)\r\n                    .add(text.getKey())\r\n                    .add(new Tab())\r\n                    .add(String.valueOf(text.getValue()))\r\n                    .setAction(PdfAction.createGoTo(entry.getKey()));\r\n            document.add(p);\r\n        }\r\n\r\n\r\n\r\n        // Move the table of contents to the first page\r\n        int tocPageNumber = pdf.getNumberOfPages();\r\n        for (int i = 1; i &lt;= tocPageNumber; i++) {\r\n\r\n            // Write aligned text to the specified by parameters point\r\n            document.showTextAligned(new Paragraph(&quot;\\n footer text\\n second line\\nthird line&quot;).setFontColor(ColorConstants.RED).setFontSize(8),\r\n                    300, 26, i, TextAlignment.CENTER, VerticalAlignment.MIDDLE, 0);\r\n        }\r\n\r\n        document.flush();\r\n        for(int z = 0; z&lt; (tocPageNumber - contentPageNumber ); z++){\r\n            pdf.movePage(tocPageNumber,1);\r\n            pdf.getPage(1).setPageLabel(PageLabelNumberingStyle.UPPERCASE_LETTERS,\r\n                    null, 1);\r\n        }\r\n\r\n\r\n        //pdf.movePage(tocPageNumber, 1);\r\n\r\n        // Add page labels\r\n        /*pdf.getPage(1).setPageLabel(PageLabelNumberingStyle.UPPERCASE_LETTERS,\r\n                null, 1);*/\r\n        pdf.getPage(tocPageNumber - contentPageNumber + 1).setPageLabel(PageLabelNumberingStyle.DECIMAL_ARABIC_NUMERALS,\r\n                null, 1);\r\n\r\n\r\n        document.close();\r\n\r\n    }\r\n    private static PdfOutline createOutline(PdfOutline outline, PdfDocument pdf, String title, String name) {\r\n        if (outline == null) {\r\n            outline = pdf.getOutlines(false);\r\n            outline = outline.addOutline(title);\r\n            outline.addDestination(PdfDestination.makeDestination(new PdfString(name)));\r\n        } else {\r\n            PdfOutline kid = outline.addOutline(title);\r\n            kid.addDestination(PdfDestination.makeDestination(new PdfString(name)));\r\n        }\r\n\r\n        return outline;\r\n    }\r\n    private static class UpdatePageRenderer extends ParagraphRenderer {\r\n        protected AbstractMap.SimpleEntry&lt;String, Integer&gt; entry;\r\n\r\n        public UpdatePageRenderer(Paragraph modelElement, AbstractMap.SimpleEntry&lt;String, Integer&gt; entry) {\r\n            super(modelElement);\r\n            this.entry = entry;\r\n        }\r\n        public UpdatePageRenderer(Paragraph modelElement) {\r\n            super(modelElement);\r\n        }\r\n\r\n        @Override\r\n        public LayoutResult layout(LayoutContext layoutContext) {\r\n            LayoutResult result = super.layout(layoutContext);\r\n            //entry.setValue(layoutContext.getArea().getPageNumber());\r\n            if (result.getStatus() != LayoutResult.FULL) {\r\n                if (null != result.getOverflowRenderer()) {\r\n                    result.getOverflowRenderer().setProperty(\r\n                            Property.LEADING,\r\n                            result.getOverflowRenderer().getModelElement().getDefaultProperty(Property.LEADING));\r\n                } else {\r\n                    // if overflow renderer is null, that could mean that the whole renderer will overflow\r\n                    setProperty(\r\n                            Property.LEADING,\r\n                            result.getOverflowRenderer().getModelElement().getDefaultProperty(Property.LEADING));\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n        @Override\r\n        // If not overriden, the default renderer will be used for the overflown part of the corresponding paragraph\r\n        public IRenderer getNextRenderer() {\r\n            return new UpdatePageRenderer((Paragraph) this.getModelElement());\r\n        }\r\n\r\n      \r\n    }\r\n\r\n}\r\n\r\n```\r\nHere are the screen shots of TOC part and content part : \r\n\r\n&gt; TOC :\r\n\r\n[![TOC][1]][1]\r\n\r\n&gt; Content :\r\n\r\n[![Content part][2]][2]\r\n\r\nWhat am I missing? Thank you all for your help.\r\n\r\n\r\n***UPDATE***\r\n\r\nWhen I add the line below it renders with no overflow but the page margins of TOC and content part differ (the TOC margin is way more than the content margin). See the picture attached please : \r\n\r\n```\r\ndocument.setMargins(30,60,36,20);\r\n```\r\n Right Margin difference between TOC and content: \r\n[![ Right Margin difference between TOC and content][3]][3]\r\n\r\n***UPDATE 2 :*** \r\n\r\nWhen I comment the line \r\n```\r\ndocument.setMargins(30,60,36,20);\r\n```\r\nand set the font size on line : \r\n```\r\ndocument.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\r\n```\r\nto 12 then it renders fine. What difference should possibly the font size cause for the page content and margins? Are not there standard page margins and page setups? Am I unknowingly (I am newbie to itextpdf) messing some standard implementations? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nTnzH.png\r\n  [2]: https://i.stack.imgur.com/gY0kI.png\r\n  [3]: https://i.stack.imgur.com/ANsyJ.png","title":"itext 7 pdf how to prevent text overflow on right side of the page","body":"<p>I am using itextpdf 7 (7.2.0) to create a pdf file. However even though the TOC part is rendered very well, in the content part the text overflows. Here is my code that generates the pdf:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) throws IOException {\n        PdfWriter writer = new PdfWriter(&quot;fiftyfourthPdf.pdf&quot;);\n        PdfDocument pdf = new PdfDocument(writer);\n        Document document = new Document(pdf, PageSize.A4,false);\n        //document.setMargins(30,10,36,10);\n\n// Create a PdfFont\n        PdfFont font = PdfFontFactory.createFont(StandardFonts.TIMES_ROMAN,&quot;Cp1254&quot;);\n\n        document\n                .setTextAlignment(TextAlignment.JUSTIFIED)\n                .setFont(font)\n                .setFontSize(11);\n        PdfOutline outline = null;\n        java.util.List&lt;AbstractMap.SimpleEntry&lt;String, AbstractMap.SimpleEntry&lt;String, Integer&gt;&gt;&gt; toc = new ArrayList&lt;&gt;();\n        for(int i=0;i&lt;5000;i++){\n            String line = &quot;This is paragraph &quot; + String.valueOf(i+1)+ &quot; &quot;;\n            line = line.concat(line).concat(line).concat(line).concat(line).concat(line);\n            Paragraph p = new Paragraph(line);\n            p.setKeepTogether(true);\n            document.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\n\n            //PROCESS FOR TOC\n            String name = &quot;para &quot; + String.valueOf(i+1);\n            outline = createOutline(outline,pdf,line ,name );\n            AbstractMap.SimpleEntry&lt;String, Integer&gt; titlePage = new AbstractMap.SimpleEntry(line, pdf.getNumberOfPages());\n            p\n                    .setFont(font)\n                    .setFontSize(12)\n                    //.setKeepWithNext(true)\n                    .setDestination(name)\n\n                    // Add the current page number to the table of contents list\n                    .setNextRenderer(new UpdatePageRenderer(p));\n            toc.add(new AbstractMap.SimpleEntry(name, titlePage));\n\n        }\n\n        int contentPageNumber = pdf.getNumberOfPages();\n\n        for (int i = 1; i &lt;= contentPageNumber; i++) {\n\n            // Write aligned text to the specified by parameters point\n            document.showTextAligned(new Paragraph(String.format(&quot;Sayfa %s / %s&quot;, i, contentPageNumber)).setFontSize(10),\n                    559, 26, i, TextAlignment.RIGHT, VerticalAlignment.MIDDLE, 0);\n        }\n\n        //BEGINNING OF TOC\n        document.add(new AreaBreak());\n        Paragraph p = new Paragraph(&quot;Table of Contents&quot;)\n                .setFont(font)\n                .setDestination(&quot;toc&quot;);\n        document.add(p);\n        java.util.List&lt;TabStop&gt; tabStops = new ArrayList&lt;&gt;();\n        tabStops.add(new TabStop(580, TabAlignment.RIGHT, new DottedLine()));\n        for (AbstractMap.SimpleEntry&lt;String, AbstractMap.SimpleEntry&lt;String, Integer&gt;&gt; entry : toc) {\n            AbstractMap.SimpleEntry&lt;String, Integer&gt; text = entry.getValue();\n            p = new Paragraph()\n                    .addTabStops(tabStops)\n                    .add(text.getKey())\n                    .add(new Tab())\n                    .add(String.valueOf(text.getValue()))\n                    .setAction(PdfAction.createGoTo(entry.getKey()));\n            document.add(p);\n        }\n\n\n\n        // Move the table of contents to the first page\n        int tocPageNumber = pdf.getNumberOfPages();\n        for (int i = 1; i &lt;= tocPageNumber; i++) {\n\n            // Write aligned text to the specified by parameters point\n            document.showTextAligned(new Paragraph(&quot;\\n footer text\\n second line\\nthird line&quot;).setFontColor(ColorConstants.RED).setFontSize(8),\n                    300, 26, i, TextAlignment.CENTER, VerticalAlignment.MIDDLE, 0);\n        }\n\n        document.flush();\n        for(int z = 0; z&lt; (tocPageNumber - contentPageNumber ); z++){\n            pdf.movePage(tocPageNumber,1);\n            pdf.getPage(1).setPageLabel(PageLabelNumberingStyle.UPPERCASE_LETTERS,\n                    null, 1);\n        }\n\n\n        //pdf.movePage(tocPageNumber, 1);\n\n        // Add page labels\n        /*pdf.getPage(1).setPageLabel(PageLabelNumberingStyle.UPPERCASE_LETTERS,\n                null, 1);*/\n        pdf.getPage(tocPageNumber - contentPageNumber + 1).setPageLabel(PageLabelNumberingStyle.DECIMAL_ARABIC_NUMERALS,\n                null, 1);\n\n\n        document.close();\n\n    }\n    private static PdfOutline createOutline(PdfOutline outline, PdfDocument pdf, String title, String name) {\n        if (outline == null) {\n            outline = pdf.getOutlines(false);\n            outline = outline.addOutline(title);\n            outline.addDestination(PdfDestination.makeDestination(new PdfString(name)));\n        } else {\n            PdfOutline kid = outline.addOutline(title);\n            kid.addDestination(PdfDestination.makeDestination(new PdfString(name)));\n        }\n\n        return outline;\n    }\n    private static class UpdatePageRenderer extends ParagraphRenderer {\n        protected AbstractMap.SimpleEntry&lt;String, Integer&gt; entry;\n\n        public UpdatePageRenderer(Paragraph modelElement, AbstractMap.SimpleEntry&lt;String, Integer&gt; entry) {\n            super(modelElement);\n            this.entry = entry;\n        }\n        public UpdatePageRenderer(Paragraph modelElement) {\n            super(modelElement);\n        }\n\n        @Override\n        public LayoutResult layout(LayoutContext layoutContext) {\n            LayoutResult result = super.layout(layoutContext);\n            //entry.setValue(layoutContext.getArea().getPageNumber());\n            if (result.getStatus() != LayoutResult.FULL) {\n                if (null != result.getOverflowRenderer()) {\n                    result.getOverflowRenderer().setProperty(\n                            Property.LEADING,\n                            result.getOverflowRenderer().getModelElement().getDefaultProperty(Property.LEADING));\n                } else {\n                    // if overflow renderer is null, that could mean that the whole renderer will overflow\n                    setProperty(\n                            Property.LEADING,\n                            result.getOverflowRenderer().getModelElement().getDefaultProperty(Property.LEADING));\n                }\n            }\n            return result;\n        }\n\n        @Override\n        // If not overriden, the default renderer will be used for the overflown part of the corresponding paragraph\n        public IRenderer getNextRenderer() {\n            return new UpdatePageRenderer((Paragraph) this.getModelElement());\n        }\n\n      \n    }\n\n}\n\n</code></pre>\n<p>Here are the screen shots of TOC part and content part :</p>\n<blockquote>\n<p>TOC :</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/nTnzH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nTnzH.png\" alt=\"TOC\" /></a></p>\n<blockquote>\n<p>Content :</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/gY0kI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gY0kI.png\" alt=\"Content part\" /></a></p>\n<p>What am I missing? Thank you all for your help.</p>\n<p><em><strong>UPDATE</strong></em></p>\n<p>When I add the line below it renders with no overflow but the page margins of TOC and content part differ (the TOC margin is way more than the content margin). See the picture attached please :</p>\n<pre><code>document.setMargins(30,60,36,20);\n</code></pre>\n<p>Right Margin difference between TOC and content:\n<a href=\"https://i.stack.imgur.com/ANsyJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ANsyJ.png\" alt=\" Right Margin difference between TOC and content\" /></a></p>\n<p><em><strong>UPDATE 2 :</strong></em></p>\n<p>When I comment the line</p>\n<pre><code>document.setMargins(30,60,36,20);\n</code></pre>\n<p>and set the font size on line :</p>\n<pre><code>document.add(p.setFont(font).setFontSize(10).setHorizontalAlignment(HorizontalAlignment.CENTER).setTextAlignment(TextAlignment.LEFT));\n</code></pre>\n<p>to 12 then it renders fine. What difference should possibly the font size cause for the page content and margins? Are not there standard page margins and page setups? Am I unknowingly (I am newbie to itextpdf) messing some standard implementations?</p>\n"},{"tags":["java","android","kotlin","gradle"],"answers":[{"tags":[],"owner":{"account_id":17165441,"reputation":4394,"user_id":12423905,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639420453,"creation_date":1639420453,"answer_id":70339384,"question_id":70339130,"body_markdown":"I fixed the issue, and I hate Android studio so much for that. Instead of writing this:\r\n\r\n    KEYPW=&#39;CENSORED&#39;\r\n\r\nyou have to write this\r\n\r\n    KEYPW=CENSORED\r\n\r\nDuh. Wasted another hour of my life\r\n\r\n","title":"Failed to read key key1 from store even tho key is 100% correct","body":"<p>I fixed the issue, and I hate Android studio so much for that. Instead of writing this:</p>\n<pre><code>KEYPW='CENSORED'\n</code></pre>\n<p>you have to write this</p>\n<pre><code>KEYPW=CENSORED\n</code></pre>\n<p>Duh. Wasted another hour of my life</p>\n"}],"owner":{"account_id":17165441,"reputation":4394,"user_id":12423905,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70339384,"answer_count":1,"score":1,"last_activity_date":1639420453,"creation_date":1639419075,"question_id":70339130,"body_markdown":"I am trying to create a release build for my app, but no matter what I do, it does not work. I get this error everytime:\r\n\r\n&gt; Task :app:packageRelease FAILED\r\n\r\n    Execution failed for task &#39;:app:packageRelease&#39;.\r\n    &gt; A failure occurred while executing com.android.build.gradle.tasks.PackageAndroidArtifact$IncrementalSplitterRunnable\r\n       &gt; com.android.ide.common.signing.KeytoolException: Failed to read key key1 from store &quot;C:\\Users\\CENSORED\\Desktop\\Ordner\\Privates\\Android Studio Key\\keystore.jks&quot;: keystore password was incorrect\r\n\r\nI created so many keys and passwords and this time (every time created it new), but it always says &quot;keystore password was incorrect&quot; even tho it is 100% correct!!\r\n\r\n    signingConfigs {\r\n        release {\r\n            storeFile file(&#39;C:\\\\Users\\\\EXAMPLE\\\\Desktop\\\\Ordner\\\\Privates\\\\Android Studio Key\\\\keystore.jks&#39;)\r\n            storePassword KEYPW\r\n            keyAlias &#39;key1&#39;\r\n            keyPassword KEYPW\r\n        }\r\n    }\r\n\r\n## gradle properties ##\r\n\r\n    KEYPW=&#39;CENSORED&#39;\r\n\r\n","title":"Failed to read key key1 from store even tho key is 100% correct","body":"<p>I am trying to create a release build for my app, but no matter what I do, it does not work. I get this error everytime:</p>\n<blockquote>\n<p>Task :app:packageRelease FAILED</p>\n</blockquote>\n<pre><code>Execution failed for task ':app:packageRelease'.\n&gt; A failure occurred while executing com.android.build.gradle.tasks.PackageAndroidArtifact$IncrementalSplitterRunnable\n   &gt; com.android.ide.common.signing.KeytoolException: Failed to read key key1 from store &quot;C:\\Users\\CENSORED\\Desktop\\Ordner\\Privates\\Android Studio Key\\keystore.jks&quot;: keystore password was incorrect\n</code></pre>\n<p>I created so many keys and passwords and this time (every time created it new), but it always says &quot;keystore password was incorrect&quot; even tho it is 100% correct!!</p>\n<pre><code>signingConfigs {\n    release {\n        storeFile file('C:\\\\Users\\\\EXAMPLE\\\\Desktop\\\\Ordner\\\\Privates\\\\Android Studio Key\\\\keystore.jks')\n        storePassword KEYPW\n        keyAlias 'key1'\n        keyPassword KEYPW\n    }\n}\n</code></pre>\n<h2>gradle properties</h2>\n<pre><code>KEYPW='CENSORED'\n</code></pre>\n"},{"tags":["java","intellij-idea","playframework-2.0"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1369158512,"post_id":16676311,"comment_id":23995850,"body_markdown":"Seems there are no such methods defined.","body":"Seems there are no such methods defined."},{"owner":{"account_id":1309273,"reputation":1081,"user_id":1257622,"accept_rate":70,"display_name":"Conor Pender"},"score":2,"creation_date":1369159698,"post_id":16676311,"comment_id":23996447,"body_markdown":"I&#39;m not sure if you&#39;re just being a smart-ass, but I edited my question to include a segment of the routes file. Also, my Application has an index method. I know because it renders the home page.","body":"I&#39;m not sure if you&#39;re just being a smart-ass, but I edited my question to include a segment of the routes file. Also, my Application has an index method. I know because it renders the home page."},{"owner":{"account_id":1495456,"reputation":3026,"user_id":1401510,"accept_rate":75,"display_name":"nkr"},"score":0,"creation_date":1369160399,"post_id":16676311,"comment_id":23996832,"body_markdown":"Please link the Play tutorial where this code comes from.","body":"Please link the Play tutorial where this code comes from."},{"owner":{"account_id":1309273,"reputation":1081,"user_id":1257622,"accept_rate":70,"display_name":"Conor Pender"},"score":0,"creation_date":1369160523,"post_id":16676311,"comment_id":23996887,"body_markdown":"http://www.playframework.com/documentation/2.1.1-RC2/JavaGuide6\nThis is part six or the tutorial. The relevant part is at the top.","body":"<a href=\"http://www.playframework.com/documentation/2.1.1-RC2/JavaGuide6\" rel=\"nofollow noreferrer\">playframework.com/documentation/2.1.1-RC2/JavaGuide6</a> This is part six or the tutorial. The relevant part is at the top."},{"owner":{"account_id":1495456,"reputation":3026,"user_id":1401510,"accept_rate":75,"display_name":"nkr"},"score":1,"creation_date":1369166761,"post_id":16676311,"comment_id":24000065,"body_markdown":"I have no problem, try ignoring the error at first, run `play compile` on your console an check IntelliJ again. Besides, a tip: write @nkr somewhere in your comment so I get a notice you replied.","body":"I have no problem, try ignoring the error at first, run <code>play compile</code> on your console an check IntelliJ again. Besides, a tip: write @nkr somewhere in your comment so I get a notice you replied."},{"owner":{"account_id":230468,"reputation":1713,"user_id":494087,"accept_rate":38,"display_name":"Jarno Lahtinen"},"score":0,"creation_date":1369638751,"post_id":16676311,"comment_id":24158500,"body_markdown":"I&#39;m having this same issue with my project in IntelliJ IDEA 12.1.13 and most new version of Play framework.","body":"I&#39;m having this same issue with my project in IntelliJ IDEA 12.1.13 and most new version of Play framework."},{"owner":{"account_id":2449868,"reputation":878,"user_id":2136410,"accept_rate":75,"display_name":"Fabinout"},"score":0,"creation_date":1382517822,"post_id":16676311,"comment_id":28985894,"body_markdown":"Having the same error &quot;Cannot resolve method &#39;routes&#39;&quot;, yet the server works perfectly as intended.","body":"Having the same error &quot;Cannot resolve method &#39;routes&#39;&quot;, yet the server works perfectly as intended."}],"answers":[{"tags":[],"owner":{"account_id":73322,"reputation":631,"user_id":211220,"display_name":"Markus Knittig"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1427879481,"creation_date":1373540734,"answer_id":17591730,"question_id":16676311,"body_markdown":"I was running into the same problem and found the solution here: https://github.com/playframework/Play20/issues/969\r\n\r\nIn short:\r\n\r\n - Create the directories `javascript` and `ref` under the controllers package\r\n - Run `activator compile` and now Intellij should get it  *// used to be &#39;play compile&#39;*\r\n - If you still got the errors try to run `activator idea` again // used to be &#39;play compile&#39;*","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>I was running into the same problem and found the solution here: <a href=\"https://github.com/playframework/Play20/issues/969\" rel=\"nofollow noreferrer\">https://github.com/playframework/Play20/issues/969</a></p>\n\n<p>In short:</p>\n\n<ul>\n<li>Create the directories <code>javascript</code> and <code>ref</code> under the controllers package</li>\n<li>Run <code>activator compile</code> and now Intellij should get it  <em>// used to be 'play compile'</em></li>\n<li>If you still got the errors try to run <code>activator idea</code> again // used to be 'play compile'*</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3358830,"reputation":121,"user_id":2821144,"display_name":"user2821144"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1383013300,"creation_date":1383013300,"answer_id":19648545,"question_id":16676311,"body_markdown":"Pulled from a link provided by @Markus Kittig. Great temporary fix. https://github.com/playframework/playframework/issues/1784#issuecomment-26345523\r\n\r\nSynopsis:\r\nAdd target/scala-XXX as a managed source and remove the app controllers and views sources flag inside File-&gt;Project Structure-&gt;Modules-&gt;Sources. Then recompile.\r\n\r\nWorks on IntelliJ Ultimate 12.1.{4|6}. Created the play application with the command line interface and generated a project file using `play idea`.  Used Play 2.2.0.","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>Pulled from a link provided by @Markus Kittig. Great temporary fix. <a href=\"https://github.com/playframework/playframework/issues/1784#issuecomment-26345523\" rel=\"noreferrer\">https://github.com/playframework/playframework/issues/1784#issuecomment-26345523</a></p>\n\n<p>Synopsis:\nAdd target/scala-XXX as a managed source and remove the app controllers and views sources flag inside File->Project Structure->Modules->Sources. Then recompile.</p>\n\n<p>Works on IntelliJ Ultimate 12.1.{4|6}. Created the play application with the command line interface and generated a project file using <code>play idea</code>.  Used Play 2.2.0.</p>\n"},{"tags":[],"owner":{"account_id":4046844,"reputation":426,"user_id":3327822,"display_name":"darren rose"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1392811071,"creation_date":1392809947,"answer_id":21879374,"question_id":16676311,"body_markdown":"**File** -&gt; **Project Structure**\r\n\r\nSelect **Sources** in Right Pane\r\n\r\n\r\nAdd Source folder \r\n\r\n*target/scala-XXX/classes\\_managed*\r\n\r\n*target/scala-XXX/src\\_managed/main*","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p><strong>File</strong> -> <strong>Project Structure</strong></p>\n\n<p>Select <strong>Sources</strong> in Right Pane</p>\n\n<p>Add Source folder </p>\n\n<p><em>target/scala-XXX/classes_managed</em></p>\n\n<p><em>target/scala-XXX/src_managed/main</em></p>\n"},{"tags":[],"owner":{"account_id":4588357,"reputation":11,"user_id":3722375,"display_name":"Chad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1402318352,"creation_date":1402318352,"answer_id":24120740,"question_id":16676311,"body_markdown":"This question was asked a year ago, but to answer for future queries by other coders, the problem is easily solved by adding a &quot;play.Routes&quot; path like this\r\n\r\n    public static Result javascriptRoutes() {\r\n        response().setContentType(&quot;text/javascript&quot;);\r\n        return ok(\r\n                play.Routes.javascriptRouter(&quot;jsRoutes&quot;,\r\n\r\n                        // Routes for Projects\r\n                        controllers.routes.javascript.Projects.add(),\r\n                        controllers.routes.javascript.Projects.delete(),\r\n                        controllers.routes.javascript.Projects.rename(),\r\n                        controllers.routes.javascript.Projects.addGroup()\r\n                )\r\n        );\r\n   }\r\n\r\n\r\nEnsure that you have the proper imports to the class:\r\n\r\n    import play.mvc.*;\r\n    import play.data.*;","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>This question was asked a year ago, but to answer for future queries by other coders, the problem is easily solved by adding a \"play.Routes\" path like this</p>\n\n<pre><code>public static Result javascriptRoutes() {\n    response().setContentType(\"text/javascript\");\n    return ok(\n            play.Routes.javascriptRouter(\"jsRoutes\",\n\n                    // Routes for Projects\n                    controllers.routes.javascript.Projects.add(),\n                    controllers.routes.javascript.Projects.delete(),\n                    controllers.routes.javascript.Projects.rename(),\n                    controllers.routes.javascript.Projects.addGroup()\n            )\n    );\n</code></pre>\n\n<p>}</p>\n\n<p>Ensure that you have the proper imports to the class:</p>\n\n<pre><code>import play.mvc.*;\nimport play.data.*;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":418421,"reputation":4901,"user_id":794967,"accept_rate":74,"display_name":"Aleksandar Stojadinovic"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1428499825,"creation_date":1428499825,"answer_id":29516073,"question_id":16676311,"body_markdown":"With IntelliJ 14.1 and Play 2.3.8 nothing of the above worked, but the advice from this [mailing list](http://grokbase.com/t/gg/play-framework/151vc026y5/intellij-idea-play-framework-2-3-7-issues) worked. (Almost) blatantly copied:\r\n\r\n&gt; Locate the target/scala-2.11/src_managed and target/scala-2.11/twirl\r\n&gt; directories in the project view, then right click and Mark Directory\r\n&gt; As -&gt; Generated Sources *(Root)*. \r\n\r\nI bumped the scala version and obviously in newer versions of IntelliJ the *Root* word has been added. Also, you cannot select this from the Project Structure window, the option is not available. It is possible only through the `Project` pane in the main window. If it refuses to be marked as `Generated Sources`, try to unmark the`target` directory (Mark Directory As -&gt; Unmark &lt;whatever&gt;). ","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>With IntelliJ 14.1 and Play 2.3.8 nothing of the above worked, but the advice from this <a href=\"http://grokbase.com/t/gg/play-framework/151vc026y5/intellij-idea-play-framework-2-3-7-issues\" rel=\"nofollow\">mailing list</a> worked. (Almost) blatantly copied:</p>\n\n<blockquote>\n  <p>Locate the target/scala-2.11/src_managed and target/scala-2.11/twirl\n  directories in the project view, then right click and Mark Directory\n  As -> Generated Sources <em>(Root)</em>. </p>\n</blockquote>\n\n<p>I bumped the scala version and obviously in newer versions of IntelliJ the <em>Root</em> word has been added. Also, you cannot select this from the Project Structure window, the option is not available. It is possible only through the <code>Project</code> pane in the main window. If it refuses to be marked as <code>Generated Sources</code>, try to unmark the<code>target</code> directory (Mark Directory As -> Unmark ). </p>\n"},{"tags":[],"owner":{"account_id":3956122,"reputation":456,"user_id":3264522,"display_name":"tapsey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440883633,"creation_date":1440883633,"answer_id":32290813,"question_id":16676311,"body_markdown":"I am using Idea 14.1.4 community edition, i managed to remove the index and route not resolved errors by right clicking on the target folder and marking it as not excluded. NB i run my project using the command line i can not find any run configuration in the ide.","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>I am using Idea 14.1.4 community edition, i managed to remove the index and route not resolved errors by right clicking on the target folder and marking it as not excluded. NB i run my project using the command line i can not find any run configuration in the ide.</p>\n"},{"tags":[],"owner":{"account_id":4820536,"reputation":5096,"user_id":3891342,"accept_rate":71,"display_name":"Daniel Shin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1459098481,"creation_date":1459098481,"answer_id":36250170,"question_id":16676311,"body_markdown":"For people using Play 2.4.x or above, it seems that Play no longer produces reverse routing files for javascript in `src_managed` et al. \r\n\r\nInstead, you need to include `scala-2.xx/routes/main` directory as `Sources`.","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>For people using Play 2.4.x or above, it seems that Play no longer produces reverse routing files for javascript in <code>src_managed</code> et al. </p>\n\n<p>Instead, you need to include <code>scala-2.xx/routes/main</code> directory as <code>Sources</code>.</p>\n"},{"tags":[],"owner":{"account_id":2747028,"reputation":1791,"user_id":2367237,"accept_rate":20,"display_name":"Gonzalo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639420406,"creation_date":1639420406,"answer_id":70339381,"question_id":16676311,"body_markdown":"I didn&#39;t find that folders in my PLay 2.8 build, so as it was a problem with IntelliJ I found an easier solution:\r\n\r\nhttps://stackoverflow.com/a/70339356/2367237","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>I didn't find that folders in my PLay 2.8 build, so as it was a problem with IntelliJ I found an easier solution:</p>\n<p><a href=\"https://stackoverflow.com/a/70339356/2367237\">https://stackoverflow.com/a/70339356/2367237</a></p>\n"}],"owner":{"account_id":1309273,"reputation":1081,"user_id":1257622,"accept_rate":70,"display_name":"Conor Pender"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13829,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":21879374,"answer_count":8,"score":15,"last_activity_date":1639420406,"creation_date":1369158374,"question_id":16676311,"body_markdown":"I&#39;m following one of the play framework tutorials, but I&#39;m getting compile errors whenever I try to use reverse routing. Firstly,\r\n\r\n    public static Result javascriptRoutes() {\r\n        response().setContentType(&quot;text/javascript&quot;);\r\n        return ok(\r\n            Routes.javascriptRouter(&quot;jsRoutes&quot;,\r\n                controllers.routes.javascript.Projects.add(),\r\n                controllers.routes.javascript.Projects.delete(),\r\n                controllers.routes.javascript.Projects.rename(),\r\n                controllers.routes.javascript.Projects.addGroup()\r\n            )\r\n        );\r\n    }\r\n\r\nwhere the error shown in intelliJ is &#39;cannot resolve method javascriptRouter(java.lang.String, ?, ?, ?, ?)&#39;\r\n\r\nBut also in the a unit test:\r\n\r\n    @Test\r\n    public void notAuthenticated() {\r\n        Result result = callAction(\r\n                controllers.routes.ref.Application.index(),\r\n                fakeRequest()\r\n        );\r\n        assertEquals(303, status(result));\r\n        assertEquals(&quot;/login&quot;, header(&quot;Location&quot;, result));\r\n    }\r\n\r\nwhere it cannot resolve the index method.\r\n\r\nIs this a problem with intelliJ, or am I missing something within play?\r\n\r\n\r\n\r\nFor the first part, here is the entry in my routes file:\r\n\r\n    GET     /assets/javascripts/routes  controllers.Application.javascriptRoutes()\r\n\r\nand my controller, Projects, has got the defined methods.","title":"Unable to resolve reverse routing methods in IntelliJ","body":"<p>I'm following one of the play framework tutorials, but I'm getting compile errors whenever I try to use reverse routing. Firstly,</p>\n\n<pre><code>public static Result javascriptRoutes() {\n    response().setContentType(\"text/javascript\");\n    return ok(\n        Routes.javascriptRouter(\"jsRoutes\",\n            controllers.routes.javascript.Projects.add(),\n            controllers.routes.javascript.Projects.delete(),\n            controllers.routes.javascript.Projects.rename(),\n            controllers.routes.javascript.Projects.addGroup()\n        )\n    );\n}\n</code></pre>\n\n<p>where the error shown in intelliJ is 'cannot resolve method javascriptRouter(java.lang.String, ?, ?, ?, ?)'</p>\n\n<p>But also in the a unit test:</p>\n\n<pre><code>@Test\npublic void notAuthenticated() {\n    Result result = callAction(\n            controllers.routes.ref.Application.index(),\n            fakeRequest()\n    );\n    assertEquals(303, status(result));\n    assertEquals(\"/login\", header(\"Location\", result));\n}\n</code></pre>\n\n<p>where it cannot resolve the index method.</p>\n\n<p>Is this a problem with intelliJ, or am I missing something within play?</p>\n\n<p>For the first part, here is the entry in my routes file:</p>\n\n<pre><code>GET     /assets/javascripts/routes  controllers.Application.javascriptRoutes()\n</code></pre>\n\n<p>and my controller, Projects, has got the defined methods.</p>\n"},{"tags":["java","eclipse","maven","jaxb"],"answers":[{"tags":[],"owner":{"account_id":23175946,"reputation":66,"user_id":17274465,"display_name":"jcurley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639419480,"creation_date":1639419480,"answer_id":70339216,"question_id":70248397,"body_markdown":"The issue stemmed from the Maven build running in Java 11 but our normal compile stage forking to a Java 1.8 executable. Because the Plexus compiler cannot fork to a new environment, there was not a way for it to access the Java EE dependencies. We just need to update our entire project to be compatible with Java 11 at compile-time.","title":"Use JAXB with plexus-compiler-eclipse plugin in maven profile","body":"<p>The issue stemmed from the Maven build running in Java 11 but our normal compile stage forking to a Java 1.8 executable. Because the Plexus compiler cannot fork to a new environment, there was not a way for it to access the Java EE dependencies. We just need to update our entire project to be compatible with Java 11 at compile-time.</p>\n"}],"owner":{"account_id":23175946,"reputation":66,"user_id":17274465,"display_name":"jcurley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70339216,"answer_count":1,"score":0,"last_activity_date":1639419480,"creation_date":1638806902,"question_id":70248397,"body_markdown":"I am working on a project where we want to use the `plexus-compiler-eclipse` plugin during a Jenkins pipeline to check for increases in the number of warnings generated by the Eclipse compiler. We still want to use the `javac` compiler for the normal build and test stage, so I am trying to create a maven profile we can run during the warnings stage that utilizes the Eclipse compiler. \r\n\r\nWhen I run the Eclipse compiler over our code, I get a compile error about JAXB dependencies being missing. I know this is due to our move to Java 11 from Java 1.8, but we do not get this error when building with the `javac` compiler. I have tried adding the `jakarta.xml.bind-api` dependency to the `maven-compiler-plugin`, but this does not help, nor does adding the `org.glassfish.jaxb` dependency or the `javax.xml.bind:jaxb-api` dependency. \r\n\r\nI cannot share the full pom because this project is proprietary, but the profile I&#39;m building looks like this:\r\n```xml\r\n&lt;profile&gt;\r\n    &lt;id&gt;eclipse-compile&lt;/id&gt;\r\n    &lt;activation&gt;\r\n        &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\r\n    &lt;/activation&gt;\r\n    &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&gt;&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;compilerId&gt;eclipse&lt;/compilerId&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                        &lt;compilerArguments&gt;\r\n                            &lt;properties&gt;${project.basedir}/.settings/org.eclipse.jdt.core.prefs&lt;/properties&gt;\r\n                        &lt;/compilerArguments&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;plexus-compiler-eclipse&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.8.8&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.eclipse.jdt&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;ecj&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.25.0&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n&lt;/profile&gt;\r\n```\r\n\r\nI was putting the various JAXB dependencies I tried in the `&lt;dependencies&gt;` section under the `org.eclipse.jdt` entry.\r\n\r\nAnyone else encounter this or know what to do about it?","title":"Use JAXB with plexus-compiler-eclipse plugin in maven profile","body":"<p>I am working on a project where we want to use the <code>plexus-compiler-eclipse</code> plugin during a Jenkins pipeline to check for increases in the number of warnings generated by the Eclipse compiler. We still want to use the <code>javac</code> compiler for the normal build and test stage, so I am trying to create a maven profile we can run during the warnings stage that utilizes the Eclipse compiler.</p>\n<p>When I run the Eclipse compiler over our code, I get a compile error about JAXB dependencies being missing. I know this is due to our move to Java 11 from Java 1.8, but we do not get this error when building with the <code>javac</code> compiler. I have tried adding the <code>jakarta.xml.bind-api</code> dependency to the <code>maven-compiler-plugin</code>, but this does not help, nor does adding the <code>org.glassfish.jaxb</code> dependency or the <code>javax.xml.bind:jaxb-api</code> dependency.</p>\n<p>I cannot share the full pom because this project is proprietary, but the profile I'm building looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profile&gt;\n    &lt;id&gt;eclipse-compile&lt;/id&gt;\n    &lt;activation&gt;\n        &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\n    &lt;/activation&gt;\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.1&gt;&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;compilerId&gt;eclipse&lt;/compilerId&gt;\n                        &lt;source&gt;${java.version}&lt;/source&gt;\n                        &lt;target&gt;${java.version}&lt;/target&gt;\n                        &lt;compilerArguments&gt;\n                            &lt;properties&gt;${project.basedir}/.settings/org.eclipse.jdt.core.prefs&lt;/properties&gt;\n                        &lt;/compilerArguments&gt;\n                    &lt;/configuration&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\n                            &lt;artifactId&gt;plexus-compiler-eclipse&lt;/artifactId&gt;\n                            &lt;version&gt;2.8.8&lt;/version&gt;\n                        &lt;/dependency&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.eclipse.jdt&lt;/groupId&gt;\n                            &lt;artifactId&gt;ecj&lt;/artifactId&gt;\n                            &lt;version&gt;3.25.0&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n<p>I was putting the various JAXB dependencies I tried in the <code>&lt;dependencies&gt;</code> section under the <code>org.eclipse.jdt</code> entry.</p>\n<p>Anyone else encounter this or know what to do about it?</p>\n"},{"tags":["java","multithreading","swing","concurrency","swingworker"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1639420210,"post_id":70339199,"comment_id":124339176,"body_markdown":"Don&#39;t use a SwingWorker. Your save logic should be invoked from the EDT. You don&#39;t want the user updating the text components while you are attempting to save the data.","body":"Don&#39;t use a SwingWorker. Your save logic should be invoked from the EDT. You don&#39;t want the user updating the text components while you are attempting to save the data."},{"owner":{"account_id":20503413,"reputation":63,"user_id":15046825,"display_name":"Davide _-"},"score":0,"creation_date":1639422391,"post_id":70339199,"comment_id":124339836,"body_markdown":"Ok but even if I don&#39;t use a SwingWorker is the EDT going to wait for the user to save the file? I don&#39;t see the difference","body":"Ok but even if I don&#39;t use a SwingWorker is the EDT going to wait for the user to save the file? I don&#39;t see the difference"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1639423863,"post_id":70339199,"comment_id":124340304,"body_markdown":"Swing is single threaded so all code executed on the EDT executes in sequence. So your logic would display the option pane. Then if a save is required the data will be written to the file. When that is finished the frame will close.","body":"Swing is single threaded so all code executed on the EDT executes in sequence. So your logic would display the option pane. Then if a save is required the data will be written to the file. When that is finished the frame will close."},{"owner":{"account_id":20503413,"reputation":63,"user_id":15046825,"display_name":"Davide _-"},"score":0,"creation_date":1639429449,"post_id":70339199,"comment_id":124341979,"body_markdown":"I made it work by not using the swing worker and implementing guarded blocks at the end, thanks for the suggestion, synchronisation with a normal thread is much easier :D","body":"I made it work by not using the swing worker and implementing guarded blocks at the end, thanks for the suggestion, synchronisation with a normal thread is much easier :D"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1639430872,"post_id":70339199,"comment_id":124342376,"body_markdown":"*synchronisation with a normal thread is much easier* - There is no need for any kind of Thread or synchronization. You just write the data to the file.","body":"<i>synchronisation with a normal thread is much easier</i> - There is no need for any kind of Thread or synchronization. You just write the data to the file."}],"owner":{"account_id":20503413,"reputation":63,"user_id":15046825,"display_name":"Davide _-"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639419415,"creation_date":1639419415,"question_id":70339199,"body_markdown":"I am creating a swing clone of Notepad and I&#39;m trying to figure out a way to improve the &quot;do you want to save before exiting tab part.\r\n\r\nI have a method that is called when the user wants to exit from the application:\r\n\r\n    private void onQuit() {\r\n        if (textArea.getText().equals(&quot;&quot;) &amp;&amp; (path == &quot;&quot; || path == null)) {\r\n            System.exit(0);\r\n        } else {\r\n            int result = JOptionPane.showConfirmDialog(frame, &quot;Do you want to save before exiting?&quot;,\r\n                    &quot;Notepad&quot;, JOptionPane.YES_NO_CANCEL_OPTION);\r\n            switch (result) {\r\n                case JOptionPane.YES_OPTION:\r\n                    save();  //saves the edits made by the users\r\n                    Thread thread = new Thread(() -&gt; {\r\n                        //fix this loop that is being called every second\r\n                        //I don&#39;t want to waste resources but can&#39;t figure out another way\r\n                        waiting =  true;\r\n                        while (waiting) {\r\n                            if ((saveWorker != null &amp;&amp; saveWorker.isDone()) || (saveAsWorker != null &amp;&amp; saveAsWorker.isDone())) {\r\n                                System.exit(0);\r\n                            }\r\n                        }\r\n                    });\r\n                    thread.start();\r\n                    break;\r\n                case JOptionPane.NO_OPTION:\r\n                    System.exit(0);\r\n                    break;\r\n            }\r\n        }\r\n\r\nGoing over the code I made I first check if the application actually needs to save what has been edited through the first if. The problem is in the else though, where I create a JOptionPane and try to implement what to do when the YES option is selected. In this option the first thing I do is call save(): \r\n\r\n    private void save() {\r\n        if (path == &quot;&quot; || path == null) {\r\n            saveAs();\r\n        } else {\r\n            saveWorker = new SwingWorker&lt;&gt;() {\r\n                @Override\r\n                protected NullType doInBackground() {\r\n                    try {\r\n                        if (!path.endsWith(&quot;.txt&quot;)) {\r\n                            FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        } else {\r\n                            FileWriter writer = new FileWriter(path);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        }\r\n\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    return null;\r\n                }\r\n            };\r\n            saveWorker.execute();\r\n        }\r\n    }\r\n\r\nwhich also calls saveAs():\r\n\r\n    private void saveAs() {\r\n\r\n        saveAsWorker = new SwingWorker&lt;&gt;() {\r\n            @Override\r\n            protected String doInBackground() {\r\n                JFileChooser chooser = new JFileChooser();\r\n                int choice = chooser.showSaveDialog(frame);\r\n\r\n                String fileName = &quot;Untitled&quot;;\r\n\r\n                if (choice == JFileChooser.APPROVE_OPTION) {\r\n                    try {\r\n                        File file = chooser.getSelectedFile();\r\n                        path = file.toString();\r\n\r\n                        if (!path.endsWith(&quot;.txt&quot;)) {\r\n                            FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        } else {\r\n                            FileWriter writer = new FileWriter(path);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        }\r\n\r\n                        StringBuilder builder = new StringBuilder(path);\r\n                        fileName = builder.substring(builder.lastIndexOf(&quot;\\\\&quot;) + 1);\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n                return fileName;\r\n            }\r\n\r\n            @Override\r\n            protected void done() {\r\n                try {\r\n                    frame.setTitle(get() + &quot;.txt&quot;);\r\n                } catch (InterruptedException | ExecutionException exception) {\r\n                    exception.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n\r\n        saveAsWorker.execute();\r\n\r\n    }\r\n\r\nBoth of these methods use SwingWorker threads. Finally the point is, going back to what happens when the YES option is selected, I don&#39;t know how to let the Thread I created &quot;wait&quot; that the SwingWorkers are done. What I&#39;m doing at the moment (and it&#39;s working) is using a while (true) loop from that thread that keeps checking if those threads are done, but this of course wastes a lots of resources. I&#39;m sure there must be a way to do something like this: &quot;make the closing Thread wait until one worker says I&#39;m done you can close the application&quot;. I tried using guarded blocks from official java tutorials but they are hard to implement with SwingWorker and I don&#39;t know how to really work with the intrinsic lock either which I think might be a solution too, but in the end I&#39;m always stuck.\r\n\r\nApplication is actually just a class so I might as well send it so you can test things out\r\n\r\npublic class TextEditor implements ActionListener {\r\n\r\n    private JFrame frame;\r\n    private JTextArea textArea;\r\n    private JScrollPane scrollPane;\r\n    private JMenuBar menuBar;\r\n    private JMenu fileMenu, editMenu, fontMenu, sizeMenu;\r\n    private JMenuItem newItem, openItem, saveItem, saveAsItem, exitItem;    //fileMenu\r\n    private JMenuItem undoItem, redoItem, copyItem, pasteItem, cutItem;     //editMenu\r\n    private JMenuItem smallItem, mediumItem, largeItem;                             //sizeMenu\r\n\r\n    private UndoManager undoManager = new UndoManager();\r\n    private String path;\r\n    private SwingWorker&lt;NullType, NullType&gt; saveWorker;\r\n    private SwingWorker&lt;String, NullType&gt; saveAsWorker;\r\n    private boolean waiting;\r\n\r\n    //todo do you want to save before exiting?\r\n    //todo create frame of dimension depending size when it was closed\r\n    //todo implement fonts?\r\n    //todo add more customisable sizes?\r\n    //todo package the application and create an installer\r\n\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        //custom look and feel\r\n        UIManager.setLookAndFeel(new FlatDarculaLaf() {\r\n            @Override\r\n            public void provideErrorFeedback(Component component) {\r\n                Toolkit toolkit = null;\r\n                if (component != null) {\r\n                    toolkit = component.getToolkit();\r\n                } else {\r\n                    toolkit = Toolkit.getDefaultToolkit();\r\n                }\r\n                //this line produces an annoying beep so just comment it out\r\n                //toolkit.beep();\r\n            }\r\n        });\r\n        SwingUtilities.invokeLater(() -&gt; new TextEditor(&quot;Untitled&quot; , 809, 500));\r\n    }\r\n\r\n    private TextEditor(String title, int width, int height) {\r\n        Image icon = new ImageIcon(&quot;src/main/resources/killua.png&quot;).getImage();\r\n\r\n        frame = new JFrame(title);\r\n        frame.setIconImage(icon);\r\n        frame.setSize(width, height);\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);\r\n        frame.addWindowListener(new WindowAdapter() {\r\n            @Override\r\n            public void windowClosing(WindowEvent e) {\r\n                onQuit();\r\n            }\r\n        });\r\n\r\n\r\n        createMenuBar();\r\n\r\n        textArea = new JTextArea();\r\n        textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 35));\r\n        textArea.setLineWrap(true);\r\n        textArea.setWrapStyleWord(true);\r\n        textArea.getDocument().addUndoableEditListener(e -&gt; undoManager.addEdit(e.getEdit()));\r\n\r\n        scrollPane = new JScrollPane(textArea);\r\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);\r\n\r\n        frame.add(scrollPane);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private void onQuit() {\r\n        if (textArea.getText().equals(&quot;&quot;) &amp;&amp; (path == &quot;&quot; || path == null)) {\r\n            System.exit(0);\r\n        } else {\r\n            int result = JOptionPane.showConfirmDialog(frame, &quot;Do you want to save before exiting?&quot;,\r\n                    &quot;Notepad&quot;, JOptionPane.YES_NO_CANCEL_OPTION);\r\n            switch (result) {\r\n                case JOptionPane.YES_OPTION:\r\n                    save();\r\n                    Thread thread = new Thread(() -&gt; {\r\n                        //fix this loop that is being called every second\r\n                        //I don&#39;t want to waste resources but can&#39;t figure out another way\r\n                        waiting =  true;\r\n                        while (waiting) {\r\n                            if ((saveWorker != null &amp;&amp; saveWorker.isDone()) || (saveAsWorker != null &amp;&amp; saveAsWorker.isDone())) {\r\n                                System.exit(0);\r\n                            }\r\n                        }\r\n                    });\r\n                    thread.start();\r\n                    break;\r\n                case JOptionPane.NO_OPTION:\r\n                    System.exit(0);\r\n                    break;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        String command = e.getActionCommand();\r\n        switch (command) {\r\n            case &quot;New&quot; -&gt; {\r\n                frame.setTitle(&quot;Untitled&quot;);\r\n                textArea.setText(&quot;&quot;);\r\n                path = &quot;&quot;;\r\n            }\r\n            case &quot;Open&quot; -&gt; open();\r\n            case &quot;SaveAs&quot; -&gt; saveAs();\r\n            case &quot;Save&quot; -&gt; save();\r\n            case &quot;Exit&quot; -&gt; onQuit();\r\n            case &quot;Undo&quot; -&gt; undoManager.undo();\r\n            case &quot;Redo&quot; -&gt; undoManager.redo();\r\n            case &quot;Copy&quot; -&gt; textArea.copy();\r\n            case &quot;Paste&quot; -&gt; textArea.paste();\r\n            case &quot;Cut&quot; -&gt; textArea.cut();\r\n            case &quot;Small&quot; -&gt; textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 30));\r\n            case &quot;Medium&quot; -&gt; textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 35));\r\n            case &quot;Large&quot; -&gt; textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 40));\r\n        }\r\n    }\r\n\r\n    private void save() {\r\n        if (path == &quot;&quot; || path == null) {\r\n            saveAs();\r\n        } else {\r\n            saveWorker = new SwingWorker&lt;&gt;() {\r\n                @Override\r\n                protected NullType doInBackground() {\r\n                    try {\r\n                        if (!path.endsWith(&quot;.txt&quot;)) {\r\n                            FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        } else {\r\n                            FileWriter writer = new FileWriter(path);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        }\r\n\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    return null;\r\n                }\r\n            };\r\n            saveWorker.execute();\r\n        }\r\n    }\r\n\r\n    private void saveAs() {\r\n\r\n        saveAsWorker = new SwingWorker&lt;&gt;() {\r\n            @Override\r\n            protected String doInBackground() {\r\n                JFileChooser chooser = new JFileChooser();\r\n                int choice = chooser.showSaveDialog(frame);\r\n\r\n                String fileName = &quot;Untitled&quot;;\r\n\r\n                if (choice == JFileChooser.APPROVE_OPTION) {\r\n                    try {\r\n                        File file = chooser.getSelectedFile();\r\n                        path = file.toString();\r\n\r\n                        if (!path.endsWith(&quot;.txt&quot;)) {\r\n                            FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        } else {\r\n                            FileWriter writer = new FileWriter(path);\r\n                            writer.write(textArea.getText());\r\n                            writer.close();\r\n                        }\r\n\r\n                        StringBuilder builder = new StringBuilder(path);\r\n                        fileName = builder.substring(builder.lastIndexOf(&quot;\\\\&quot;) + 1);\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n                return fileName;\r\n            }\r\n\r\n            @Override\r\n            protected void done() {\r\n                try {\r\n                    frame.setTitle(get() + &quot;.txt&quot;);\r\n                } catch (InterruptedException | ExecutionException exception) {\r\n                    exception.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n\r\n        saveAsWorker.execute();\r\n\r\n    }\r\n\r\n    private void open() {\r\n        SwingWorker&lt;List&lt;String&gt;, NullType&gt; worker = new SwingWorker&lt;&gt;() {\r\n            @Override\r\n            protected List&lt;String&gt; doInBackground() {\r\n                JFileChooser chooser = new JFileChooser();\r\n                int choice = chooser.showOpenDialog(frame);\r\n\r\n                String fileName = &quot;&quot;;\r\n                path = &quot;&quot;;\r\n                if (choice == JFileChooser.APPROVE_OPTION) {\r\n                    File file = chooser.getSelectedFile();\r\n                    StringBuilder stringBuilder = new StringBuilder(file.toString());\r\n                    fileName = stringBuilder.substring(stringBuilder.lastIndexOf(&quot;\\\\&quot;) + 1);\r\n                    path = file.getPath();\r\n                }\r\n\r\n                ArrayList&lt;String&gt; lines = new ArrayList&lt;&gt;();\r\n\r\n                try {\r\n                    FileReader fileReader = new FileReader(path);\r\n                    BufferedReader reader = new BufferedReader(fileReader);\r\n\r\n                    String line;\r\n                    while ((line = reader.readLine()) != null)\r\n                        lines.add(line);\r\n\r\n                    fileReader.close();\r\n                    reader.close();\r\n\r\n                    lines.add(fileName);\r\n\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                return lines;\r\n            }\r\n\r\n            @Override\r\n            protected void done() {\r\n                try {\r\n                    textArea.setText(&quot;&quot;);\r\n                    List&lt;String&gt; lines = get();\r\n\r\n                    for (int i = 0; i &lt;= lines.size() - 2; i++)\r\n                        textArea.append(lines.get(i) + &quot;\\n&quot;);\r\n\r\n                    frame.setTitle(lines.get(lines.size() - 1));\r\n                } catch (InterruptedException | ExecutionException | IndexOutOfBoundsException exception) {\r\n                    exception.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n\r\n        worker.execute();\r\n    }\r\n\r\n    private void createMenuBar() {\r\n\r\n        menuBar = new JMenuBar();\r\n\r\n        fileMenu = new JMenu(&quot;File&quot;);\r\n        editMenu = new JMenu(&quot;Edit&quot;);\r\n        fontMenu = new JMenu(&quot;Font&quot;);\r\n        sizeMenu = new JMenu(&quot;Size&quot;);\r\n\r\n        List&lt;JMenu&gt; menus = Arrays.asList(fileMenu, editMenu, fontMenu, sizeMenu);\r\n        menus.forEach(menu -&gt; {\r\n            menu.getPopupMenu().setBorder(null);\r\n            menuBar.add(menu);\r\n        });\r\n\r\n        //file\r\n\r\n        newItem = new JMenuItem(&quot;New&quot;);\r\n        newItem.addActionListener(this);\r\n        newItem.setActionCommand(&quot;New&quot;);\r\n        fileMenu.add(newItem);\r\n\r\n        openItem = new JMenuItem(&quot;Open&quot;);\r\n        openItem.addActionListener(this);\r\n        openItem.setActionCommand(&quot;Open&quot;);\r\n        fileMenu.add(openItem);\r\n\r\n        saveItem = new JMenuItem(&quot;Save&quot;);\r\n        saveItem.addActionListener(this);\r\n        saveItem.setActionCommand(&quot;Save&quot;);\r\n        fileMenu.add(saveItem);\r\n\r\n        saveAsItem = new JMenuItem(&quot;SaveAs&quot;);\r\n        saveAsItem.addActionListener(this);\r\n        saveAsItem.setActionCommand(&quot;SaveAs&quot;);\r\n        fileMenu.add(saveAsItem);\r\n\r\n        exitItem = new JMenuItem(&quot;Exit&quot;);\r\n        exitItem.addActionListener(this);\r\n        exitItem.setActionCommand(&quot;Exit&quot;);\r\n        fileMenu.add(exitItem);\r\n\r\n        //edit\r\n\r\n        undoItem = new JMenuItem(&quot;Undo&quot;);\r\n        undoItem.addActionListener(this);\r\n        undoItem.setActionCommand(&quot;Undo&quot;);\r\n        editMenu.add(undoItem);\r\n\r\n        redoItem = new JMenuItem(&quot;Redo&quot;);\r\n        redoItem.addActionListener(this);\r\n        redoItem.setActionCommand(&quot;Redo&quot;);\r\n        editMenu.add(redoItem);\r\n\r\n        copyItem = new JMenuItem(&quot;Copy&quot;);\r\n        copyItem.addActionListener(this);\r\n        copyItem.setActionCommand(&quot;Copy&quot;);\r\n        editMenu.add(copyItem);\r\n\r\n        pasteItem = new JMenuItem(&quot;Paste&quot;);\r\n        pasteItem.addActionListener(this);\r\n        pasteItem.setActionCommand(&quot;Paste&quot;);\r\n        editMenu.add(pasteItem);\r\n\r\n        cutItem = new JMenuItem(&quot;Cut&quot;);\r\n        cutItem.addActionListener(this);\r\n        cutItem.setActionCommand(&quot;Cut&quot;);\r\n        editMenu.add(cutItem);\r\n\r\n        //font\r\n\r\n\r\n\r\n        //size\r\n\r\n        smallItem = new JMenuItem(&quot;Small&quot;);\r\n        smallItem.addActionListener(this);\r\n        smallItem.setActionCommand(&quot;Small&quot;);\r\n        sizeMenu.add(smallItem);\r\n\r\n        mediumItem = new JMenuItem(&quot;Medium&quot;);\r\n        mediumItem.addActionListener(this);\r\n        mediumItem.setActionCommand(&quot;Medium&quot;);\r\n        sizeMenu.add(mediumItem);\r\n\r\n        largeItem = new JMenuItem(&quot;Large&quot;);\r\n        largeItem.addActionListener(this);\r\n        largeItem.setActionCommand(&quot;Large&quot;);\r\n        sizeMenu.add(largeItem);\r\n\r\n        frame.setJMenuBar(menuBar);\r\n    }\r\n\r\n\r\n\r\n}\r\n","title":"Creating an efficient &quot;Do you want to save before exiting?&quot; tab exiting","body":"<p>I am creating a swing clone of Notepad and I'm trying to figure out a way to improve the &quot;do you want to save before exiting tab part.</p>\n<p>I have a method that is called when the user wants to exit from the application:</p>\n<pre><code>private void onQuit() {\n    if (textArea.getText().equals(&quot;&quot;) &amp;&amp; (path == &quot;&quot; || path == null)) {\n        System.exit(0);\n    } else {\n        int result = JOptionPane.showConfirmDialog(frame, &quot;Do you want to save before exiting?&quot;,\n                &quot;Notepad&quot;, JOptionPane.YES_NO_CANCEL_OPTION);\n        switch (result) {\n            case JOptionPane.YES_OPTION:\n                save();  //saves the edits made by the users\n                Thread thread = new Thread(() -&gt; {\n                    //fix this loop that is being called every second\n                    //I don't want to waste resources but can't figure out another way\n                    waiting =  true;\n                    while (waiting) {\n                        if ((saveWorker != null &amp;&amp; saveWorker.isDone()) || (saveAsWorker != null &amp;&amp; saveAsWorker.isDone())) {\n                            System.exit(0);\n                        }\n                    }\n                });\n                thread.start();\n                break;\n            case JOptionPane.NO_OPTION:\n                System.exit(0);\n                break;\n        }\n    }\n</code></pre>\n<p>Going over the code I made I first check if the application actually needs to save what has been edited through the first if. The problem is in the else though, where I create a JOptionPane and try to implement what to do when the YES option is selected. In this option the first thing I do is call save():</p>\n<pre><code>private void save() {\n    if (path == &quot;&quot; || path == null) {\n        saveAs();\n    } else {\n        saveWorker = new SwingWorker&lt;&gt;() {\n            @Override\n            protected NullType doInBackground() {\n                try {\n                    if (!path.endsWith(&quot;.txt&quot;)) {\n                        FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    } else {\n                        FileWriter writer = new FileWriter(path);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    }\n\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                return null;\n            }\n        };\n        saveWorker.execute();\n    }\n}\n</code></pre>\n<p>which also calls saveAs():</p>\n<pre><code>private void saveAs() {\n\n    saveAsWorker = new SwingWorker&lt;&gt;() {\n        @Override\n        protected String doInBackground() {\n            JFileChooser chooser = new JFileChooser();\n            int choice = chooser.showSaveDialog(frame);\n\n            String fileName = &quot;Untitled&quot;;\n\n            if (choice == JFileChooser.APPROVE_OPTION) {\n                try {\n                    File file = chooser.getSelectedFile();\n                    path = file.toString();\n\n                    if (!path.endsWith(&quot;.txt&quot;)) {\n                        FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    } else {\n                        FileWriter writer = new FileWriter(path);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    }\n\n                    StringBuilder builder = new StringBuilder(path);\n                    fileName = builder.substring(builder.lastIndexOf(&quot;\\\\&quot;) + 1);\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            return fileName;\n        }\n\n        @Override\n        protected void done() {\n            try {\n                frame.setTitle(get() + &quot;.txt&quot;);\n            } catch (InterruptedException | ExecutionException exception) {\n                exception.printStackTrace();\n            }\n        }\n    };\n\n    saveAsWorker.execute();\n\n}\n</code></pre>\n<p>Both of these methods use SwingWorker threads. Finally the point is, going back to what happens when the YES option is selected, I don't know how to let the Thread I created &quot;wait&quot; that the SwingWorkers are done. What I'm doing at the moment (and it's working) is using a while (true) loop from that thread that keeps checking if those threads are done, but this of course wastes a lots of resources. I'm sure there must be a way to do something like this: &quot;make the closing Thread wait until one worker says I'm done you can close the application&quot;. I tried using guarded blocks from official java tutorials but they are hard to implement with SwingWorker and I don't know how to really work with the intrinsic lock either which I think might be a solution too, but in the end I'm always stuck.</p>\n<p>Application is actually just a class so I might as well send it so you can test things out</p>\n<p>public class TextEditor implements ActionListener {</p>\n<pre><code>private JFrame frame;\nprivate JTextArea textArea;\nprivate JScrollPane scrollPane;\nprivate JMenuBar menuBar;\nprivate JMenu fileMenu, editMenu, fontMenu, sizeMenu;\nprivate JMenuItem newItem, openItem, saveItem, saveAsItem, exitItem;    //fileMenu\nprivate JMenuItem undoItem, redoItem, copyItem, pasteItem, cutItem;     //editMenu\nprivate JMenuItem smallItem, mediumItem, largeItem;                             //sizeMenu\n\nprivate UndoManager undoManager = new UndoManager();\nprivate String path;\nprivate SwingWorker&lt;NullType, NullType&gt; saveWorker;\nprivate SwingWorker&lt;String, NullType&gt; saveAsWorker;\nprivate boolean waiting;\n\n//todo do you want to save before exiting?\n//todo create frame of dimension depending size when it was closed\n//todo implement fonts?\n//todo add more customisable sizes?\n//todo package the application and create an installer\n\n\npublic static void main(String[] args) throws Exception {\n    //custom look and feel\n    UIManager.setLookAndFeel(new FlatDarculaLaf() {\n        @Override\n        public void provideErrorFeedback(Component component) {\n            Toolkit toolkit = null;\n            if (component != null) {\n                toolkit = component.getToolkit();\n            } else {\n                toolkit = Toolkit.getDefaultToolkit();\n            }\n            //this line produces an annoying beep so just comment it out\n            //toolkit.beep();\n        }\n    });\n    SwingUtilities.invokeLater(() -&gt; new TextEditor(&quot;Untitled&quot; , 809, 500));\n}\n\nprivate TextEditor(String title, int width, int height) {\n    Image icon = new ImageIcon(&quot;src/main/resources/killua.png&quot;).getImage();\n\n    frame = new JFrame(title);\n    frame.setIconImage(icon);\n    frame.setSize(width, height);\n    frame.setLocationRelativeTo(null);\n    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);\n    frame.addWindowListener(new WindowAdapter() {\n        @Override\n        public void windowClosing(WindowEvent e) {\n            onQuit();\n        }\n    });\n\n\n    createMenuBar();\n\n    textArea = new JTextArea();\n    textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 35));\n    textArea.setLineWrap(true);\n    textArea.setWrapStyleWord(true);\n    textArea.getDocument().addUndoableEditListener(e -&gt; undoManager.addEdit(e.getEdit()));\n\n    scrollPane = new JScrollPane(textArea);\n    scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);\n\n    frame.add(scrollPane);\n    frame.setVisible(true);\n}\n\nprivate void onQuit() {\n    if (textArea.getText().equals(&quot;&quot;) &amp;&amp; (path == &quot;&quot; || path == null)) {\n        System.exit(0);\n    } else {\n        int result = JOptionPane.showConfirmDialog(frame, &quot;Do you want to save before exiting?&quot;,\n                &quot;Notepad&quot;, JOptionPane.YES_NO_CANCEL_OPTION);\n        switch (result) {\n            case JOptionPane.YES_OPTION:\n                save();\n                Thread thread = new Thread(() -&gt; {\n                    //fix this loop that is being called every second\n                    //I don't want to waste resources but can't figure out another way\n                    waiting =  true;\n                    while (waiting) {\n                        if ((saveWorker != null &amp;&amp; saveWorker.isDone()) || (saveAsWorker != null &amp;&amp; saveAsWorker.isDone())) {\n                            System.exit(0);\n                        }\n                    }\n                });\n                thread.start();\n                break;\n            case JOptionPane.NO_OPTION:\n                System.exit(0);\n                break;\n        }\n    }\n\n}\n\n@Override\npublic void actionPerformed(ActionEvent e) {\n    String command = e.getActionCommand();\n    switch (command) {\n        case &quot;New&quot; -&gt; {\n            frame.setTitle(&quot;Untitled&quot;);\n            textArea.setText(&quot;&quot;);\n            path = &quot;&quot;;\n        }\n        case &quot;Open&quot; -&gt; open();\n        case &quot;SaveAs&quot; -&gt; saveAs();\n        case &quot;Save&quot; -&gt; save();\n        case &quot;Exit&quot; -&gt; onQuit();\n        case &quot;Undo&quot; -&gt; undoManager.undo();\n        case &quot;Redo&quot; -&gt; undoManager.redo();\n        case &quot;Copy&quot; -&gt; textArea.copy();\n        case &quot;Paste&quot; -&gt; textArea.paste();\n        case &quot;Cut&quot; -&gt; textArea.cut();\n        case &quot;Small&quot; -&gt; textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 30));\n        case &quot;Medium&quot; -&gt; textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 35));\n        case &quot;Large&quot; -&gt; textArea.setFont(new Font(&quot;&quot;, Font.PLAIN, 40));\n    }\n}\n\nprivate void save() {\n    if (path == &quot;&quot; || path == null) {\n        saveAs();\n    } else {\n        saveWorker = new SwingWorker&lt;&gt;() {\n            @Override\n            protected NullType doInBackground() {\n                try {\n                    if (!path.endsWith(&quot;.txt&quot;)) {\n                        FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    } else {\n                        FileWriter writer = new FileWriter(path);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    }\n\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                return null;\n            }\n        };\n        saveWorker.execute();\n    }\n}\n\nprivate void saveAs() {\n\n    saveAsWorker = new SwingWorker&lt;&gt;() {\n        @Override\n        protected String doInBackground() {\n            JFileChooser chooser = new JFileChooser();\n            int choice = chooser.showSaveDialog(frame);\n\n            String fileName = &quot;Untitled&quot;;\n\n            if (choice == JFileChooser.APPROVE_OPTION) {\n                try {\n                    File file = chooser.getSelectedFile();\n                    path = file.toString();\n\n                    if (!path.endsWith(&quot;.txt&quot;)) {\n                        FileWriter writer = new FileWriter(path + &quot;.txt&quot;);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    } else {\n                        FileWriter writer = new FileWriter(path);\n                        writer.write(textArea.getText());\n                        writer.close();\n                    }\n\n                    StringBuilder builder = new StringBuilder(path);\n                    fileName = builder.substring(builder.lastIndexOf(&quot;\\\\&quot;) + 1);\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            return fileName;\n        }\n\n        @Override\n        protected void done() {\n            try {\n                frame.setTitle(get() + &quot;.txt&quot;);\n            } catch (InterruptedException | ExecutionException exception) {\n                exception.printStackTrace();\n            }\n        }\n    };\n\n    saveAsWorker.execute();\n\n}\n\nprivate void open() {\n    SwingWorker&lt;List&lt;String&gt;, NullType&gt; worker = new SwingWorker&lt;&gt;() {\n        @Override\n        protected List&lt;String&gt; doInBackground() {\n            JFileChooser chooser = new JFileChooser();\n            int choice = chooser.showOpenDialog(frame);\n\n            String fileName = &quot;&quot;;\n            path = &quot;&quot;;\n            if (choice == JFileChooser.APPROVE_OPTION) {\n                File file = chooser.getSelectedFile();\n                StringBuilder stringBuilder = new StringBuilder(file.toString());\n                fileName = stringBuilder.substring(stringBuilder.lastIndexOf(&quot;\\\\&quot;) + 1);\n                path = file.getPath();\n            }\n\n            ArrayList&lt;String&gt; lines = new ArrayList&lt;&gt;();\n\n            try {\n                FileReader fileReader = new FileReader(path);\n                BufferedReader reader = new BufferedReader(fileReader);\n\n                String line;\n                while ((line = reader.readLine()) != null)\n                    lines.add(line);\n\n                fileReader.close();\n                reader.close();\n\n                lines.add(fileName);\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n            return lines;\n        }\n\n        @Override\n        protected void done() {\n            try {\n                textArea.setText(&quot;&quot;);\n                List&lt;String&gt; lines = get();\n\n                for (int i = 0; i &lt;= lines.size() - 2; i++)\n                    textArea.append(lines.get(i) + &quot;\\n&quot;);\n\n                frame.setTitle(lines.get(lines.size() - 1));\n            } catch (InterruptedException | ExecutionException | IndexOutOfBoundsException exception) {\n                exception.printStackTrace();\n            }\n        }\n    };\n\n    worker.execute();\n}\n\nprivate void createMenuBar() {\n\n    menuBar = new JMenuBar();\n\n    fileMenu = new JMenu(&quot;File&quot;);\n    editMenu = new JMenu(&quot;Edit&quot;);\n    fontMenu = new JMenu(&quot;Font&quot;);\n    sizeMenu = new JMenu(&quot;Size&quot;);\n\n    List&lt;JMenu&gt; menus = Arrays.asList(fileMenu, editMenu, fontMenu, sizeMenu);\n    menus.forEach(menu -&gt; {\n        menu.getPopupMenu().setBorder(null);\n        menuBar.add(menu);\n    });\n\n    //file\n\n    newItem = new JMenuItem(&quot;New&quot;);\n    newItem.addActionListener(this);\n    newItem.setActionCommand(&quot;New&quot;);\n    fileMenu.add(newItem);\n\n    openItem = new JMenuItem(&quot;Open&quot;);\n    openItem.addActionListener(this);\n    openItem.setActionCommand(&quot;Open&quot;);\n    fileMenu.add(openItem);\n\n    saveItem = new JMenuItem(&quot;Save&quot;);\n    saveItem.addActionListener(this);\n    saveItem.setActionCommand(&quot;Save&quot;);\n    fileMenu.add(saveItem);\n\n    saveAsItem = new JMenuItem(&quot;SaveAs&quot;);\n    saveAsItem.addActionListener(this);\n    saveAsItem.setActionCommand(&quot;SaveAs&quot;);\n    fileMenu.add(saveAsItem);\n\n    exitItem = new JMenuItem(&quot;Exit&quot;);\n    exitItem.addActionListener(this);\n    exitItem.setActionCommand(&quot;Exit&quot;);\n    fileMenu.add(exitItem);\n\n    //edit\n\n    undoItem = new JMenuItem(&quot;Undo&quot;);\n    undoItem.addActionListener(this);\n    undoItem.setActionCommand(&quot;Undo&quot;);\n    editMenu.add(undoItem);\n\n    redoItem = new JMenuItem(&quot;Redo&quot;);\n    redoItem.addActionListener(this);\n    redoItem.setActionCommand(&quot;Redo&quot;);\n    editMenu.add(redoItem);\n\n    copyItem = new JMenuItem(&quot;Copy&quot;);\n    copyItem.addActionListener(this);\n    copyItem.setActionCommand(&quot;Copy&quot;);\n    editMenu.add(copyItem);\n\n    pasteItem = new JMenuItem(&quot;Paste&quot;);\n    pasteItem.addActionListener(this);\n    pasteItem.setActionCommand(&quot;Paste&quot;);\n    editMenu.add(pasteItem);\n\n    cutItem = new JMenuItem(&quot;Cut&quot;);\n    cutItem.addActionListener(this);\n    cutItem.setActionCommand(&quot;Cut&quot;);\n    editMenu.add(cutItem);\n\n    //font\n\n\n\n    //size\n\n    smallItem = new JMenuItem(&quot;Small&quot;);\n    smallItem.addActionListener(this);\n    smallItem.setActionCommand(&quot;Small&quot;);\n    sizeMenu.add(smallItem);\n\n    mediumItem = new JMenuItem(&quot;Medium&quot;);\n    mediumItem.addActionListener(this);\n    mediumItem.setActionCommand(&quot;Medium&quot;);\n    sizeMenu.add(mediumItem);\n\n    largeItem = new JMenuItem(&quot;Large&quot;);\n    largeItem.addActionListener(this);\n    largeItem.setActionCommand(&quot;Large&quot;);\n    sizeMenu.add(largeItem);\n\n    frame.setJMenuBar(menuBar);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":6853261,"reputation":358,"user_id":5269763,"display_name":"fabien t"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1443213389,"creation_date":1443213389,"answer_id":32790276,"question_id":32790111,"body_markdown":"Maybe spring doesn&#39;t know the file ?\r\n\r\nThis can be fix on annotated your class where the `@Value(&quot;${swagger.scanner.can.run}&quot;) `is used :\r\n\r\n    @PropertySource(value=&quot;classpath:config.properties&quot;)\r\n\r\nRegards,","title":"Spring Condition not able to read value from property file","body":"<p>Maybe spring doesn't know the file ?</p>\n\n<p>This can be fix on annotated your class where the <code>@Value(\"${swagger.scanner.can.run}\")</code>is used :</p>\n\n<pre><code>@PropertySource(value=\"classpath:config.properties\")\n</code></pre>\n\n<p>Regards,</p>\n"},{"tags":[],"owner":{"account_id":1109209,"reputation":45,"user_id":1099993,"display_name":"user1099993"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487917102,"creation_date":1487917102,"answer_id":42432051,"question_id":32790111,"body_markdown":"----------\r\nThe object of class implementing &quot;Condition&quot; is created via constructor from Spring, so you can not inject values using @Value annotation. You can do something like below in your code:\r\n  \r\n\r\n           \r\n    @Override        \r\n    public boolean matches(\r\n    ConditionContext arg0, \r\n                AnnotatedTypeMetadata arg1) {       \r\n            String prop = conditionContext.getEnvironment()\r\n                     .getProperty(&quot;arg0&quot;);   \r\n    //further code   \r\n         }    \r\n\r\n","title":"Spring Condition not able to read value from property file","body":"<hr>\n\n<p>The object of class implementing \"Condition\" is created via constructor from Spring, so you can not inject values using @Value annotation. You can do something like below in your code:</p>\n\n<pre><code>@Override        \npublic boolean matches(\nConditionContext arg0, \n            AnnotatedTypeMetadata arg1) {       \n        String prop = conditionContext.getEnvironment()\n                 .getProperty(\"arg0\");   \n//further code   \n     }    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1393411,"reputation":1096,"user_id":1323698,"display_name":"Qwertovsky"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1522251442,"creation_date":1522251442,"answer_id":49538678,"question_id":32790111,"body_markdown":"If you add `@Conditional` to config class then `APIScanningDecisionMaker` should implement `ConfigurationCondition`. And don&#39;t forget to add `@PropertySource` to config class.\r\n\r\n    import org.springframework.context.annotation.ConfigurationCondition;\r\n    \r\n    public class APIScanningDecisionMaker implement ConfigurationCondition {\r\n        @Override\r\n        public ConfigurationPhase getConfigurationPhase() {\r\n            return ConfigurationPhase.REGISTER_BEAN;\r\n        }\r\n    }\r\n\r\nProperties will have been loaded in `ConfigurationPhase.REGISTER_BEAN` phase.\r\n\r\nIf you use `@Conditional` for methods then you could implement `Condition`.","title":"Spring Condition not able to read value from property file","body":"<p>If you add <code>@Conditional</code> to config class then <code>APIScanningDecisionMaker</code> should implement <code>ConfigurationCondition</code>. And don't forget to add <code>@PropertySource</code> to config class.</p>\n\n<pre><code>import org.springframework.context.annotation.ConfigurationCondition;\n\npublic class APIScanningDecisionMaker implement ConfigurationCondition {\n    @Override\n    public ConfigurationPhase getConfigurationPhase() {\n        return ConfigurationPhase.REGISTER_BEAN;\n    }\n}\n</code></pre>\n\n<p>Properties will have been loaded in <code>ConfigurationPhase.REGISTER_BEAN</code> phase.</p>\n\n<p>If you use <code>@Conditional</code> for methods then you could implement <code>Condition</code>.</p>\n"},{"tags":[],"owner":{"account_id":6173800,"reputation":625,"user_id":5609463,"accept_rate":0,"display_name":"Mike"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1534939245,"creation_date":1534939245,"answer_id":51966414,"question_id":32790111,"body_markdown":"this works fine for me\r\n\r\n    public boolean matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata) {\r\n        try {\r\n            InputStream i = conditionContext.getResourceLoader().getResource(&quot;prop.file&quot;).getInputStream();\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(i));\r\n            StringBuilder out = new StringBuilder();\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                out.append(line);\r\n            }\r\n            System.out.println(out.toString());\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n \r\n        return true;\r\n    }","title":"Spring Condition not able to read value from property file","body":"<p>this works fine for me</p>\n\n<pre><code>public boolean matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata) {\n    try {\n        InputStream i = conditionContext.getResourceLoader().getResource(\"prop.file\").getInputStream();\n        BufferedReader reader = new BufferedReader(new InputStreamReader(i));\n        StringBuilder out = new StringBuilder();\n        String line;\n        while ((line = reader.readLine()) != null) {\n            out.append(line);\n        }\n        System.out.println(out.toString());\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":117490,"reputation":889,"user_id":2691447,"display_name":"msd.salehi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639419354,"creation_date":1639419354,"answer_id":70339188,"question_id":32790111,"body_markdown":"You can manually load the properties file, if due to any problem its not loading into spring&#39;s context at the time it is constructing your Condition.\r\n\r\n    @Override\r\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n      try {\r\n          Properties appProps = new Properties();\r\n    appProps.load(context.getResourceLoader().getResource(&quot;classpath:app.properties&quot;).getInputStream());\r\n          String canRunFlagInStr = appProps.getProperty(&quot;swagger.scanner.can.run&quot;);\r\n          return Boolean.parseBoolean(canRunFlagInStr);\r\n      } catch (IOException e) {\r\n          throw new ApplicationContextException((&quot;Exception while loading context&quot;, e);\r\n      }\r\n    }","title":"Spring Condition not able to read value from property file","body":"<p>You can manually load the properties file, if due to any problem its not loading into spring's context at the time it is constructing your Condition.</p>\n<pre><code>@Override\npublic boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n  try {\n      Properties appProps = new Properties();\nappProps.load(context.getResourceLoader().getResource(&quot;classpath:app.properties&quot;).getInputStream());\n      String canRunFlagInStr = appProps.getProperty(&quot;swagger.scanner.can.run&quot;);\n      return Boolean.parseBoolean(canRunFlagInStr);\n  } catch (IOException e) {\n      throw new ApplicationContextException((&quot;Exception while loading context&quot;, e);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1752749,"reputation":1119,"user_id":1601471,"accept_rate":69,"display_name":"Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7000,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":5,"score":13,"last_activity_date":1639419354,"creation_date":1443212666,"question_id":32790111,"body_markdown":"I am trying to implement Spring Condition `org.springframework.context.annotation.Condition`as follows:\r\n\r\n    public class APIScanningDecisionMaker implements Condition {\r\n\r\n\t   @Override\r\n\t   public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n\t\t\r\n\t\t// Not able to read the property &quot;swagger.scanner.can.run&quot;. It is always NULL.\r\n\t\tString canRunFlagInStr = context.getEnvironment().getProperty(&quot;swagger.scanner.can.run&quot;);\r\n       // Ignore the rest of the code.\r\n       }\r\n    }\r\n\r\nHowever, as shown in the above code, when I read the property &quot;swagger.scanner.can.run&quot; it is always NULL. In my property file I have set it to &quot;swagger.scanner.can.run=false&quot;.\r\n\r\nI also tried to use the `@Value(&quot;${swagger.scanner.can.run}&quot;)` but even that returns NULL. When I put a debug in this method I can see that it is being called.\r\n\r\nJust for the sake of completion I am using the `APIScanningDecisionMaker` as follows:\r\n\r\n    @Configuration\r\n    @EnableSwagger\r\n    @Conditional(APIScanningDecisionMaker.class)\r\n    public class CustomSwaggerConfig {\r\n      // Ignore the rest of the code\r\n    }\r\n\r\nIs there any reason why &quot;swagger.scanner.can.run&quot; is being retrieved as NULL?\r\n    ","title":"Spring Condition not able to read value from property file","body":"<p>I am trying to implement Spring Condition <code>org.springframework.context.annotation.Condition</code>as follows:</p>\n\n<pre><code>public class APIScanningDecisionMaker implements Condition {\n\n   @Override\n   public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n\n    // Not able to read the property \"swagger.scanner.can.run\". It is always NULL.\n    String canRunFlagInStr = context.getEnvironment().getProperty(\"swagger.scanner.can.run\");\n   // Ignore the rest of the code.\n   }\n}\n</code></pre>\n\n<p>However, as shown in the above code, when I read the property \"swagger.scanner.can.run\" it is always NULL. In my property file I have set it to \"swagger.scanner.can.run=false\".</p>\n\n<p>I also tried to use the <code>@Value(\"${swagger.scanner.can.run}\")</code> but even that returns NULL. When I put a debug in this method I can see that it is being called.</p>\n\n<p>Just for the sake of completion I am using the <code>APIScanningDecisionMaker</code> as follows:</p>\n\n<pre><code>@Configuration\n@EnableSwagger\n@Conditional(APIScanningDecisionMaker.class)\npublic class CustomSwaggerConfig {\n  // Ignore the rest of the code\n}\n</code></pre>\n\n<p>Is there any reason why \"swagger.scanner.can.run\" is being retrieved as NULL?</p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":12822707,"reputation":677,"user_id":9276996,"display_name":"Turtle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1638715895,"creation_date":1638715895,"answer_id":70235478,"question_id":70235350,"body_markdown":"&gt; This is wrong because in reality only one should be picking something\r\n&gt; at a time and then smoking it so others can have it also.\r\n\r\nBecause your `Pusac` Thread class run method is not guarded by anyone, you need to `synchronize` the `run` code block using the same monitor which you used to lock for `smoke` method. You can try `synchronizing` both `smoke` and `run` method by `Agent.class` \r\n\r\n    public void smoke() {\r\n        synchronized(Agent.class) {\r\n            ......\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        while(true) {\r\n            synchronized(Agent.class) {\r\n                ......\r\n            }\r\n        }\r\n    }","title":"Java MultiThreading task, three smokers and one agent","body":"<blockquote>\n<p>This is wrong because in reality only one should be picking something\nat a time and then smoking it so others can have it also.</p>\n</blockquote>\n<p>Because your <code>Pusac</code> Thread class run method is not guarded by anyone, you need to <code>synchronize</code> the <code>run</code> code block using the same monitor which you used to lock for <code>smoke</code> method. You can try <code>synchronizing</code> both <code>smoke</code> and <code>run</code> method by <code>Agent.class</code></p>\n<pre><code>public void smoke() {\n    synchronized(Agent.class) {\n        ......\n    }\n}\n\n@Override\npublic void run() {\n    while(true) {\n        synchronized(Agent.class) {\n            ......\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17724496,"reputation":922,"user_id":12868634,"display_name":"Roland Kreuzer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639419313,"creation_date":1638716285,"answer_id":70235533,"question_id":70235350,"body_markdown":"When sharing mutable variables between threads those variables must be handled differently as otherwise each of the reading threads might see different values.\r\n\r\ntldr:\r\n\r\nSimplest way to fix your existing program is most likely to define all of the variables &quot;volatile&quot;, like\r\n\r\n    volatile boolean paper;\r\n    volatile boolean tobacco;\r\n    volatile boolean lighters;\r\n\r\n\r\nThe somewhat longer explanation: for performance reasons threads may read variables not via (slow) RAM access, but fetch them from cache.\r\nThis works as long as only the same thread reads and writes the variable, but fails when you try to set the value in one thread and read it back from a different one. The reading thread may see still the older value.\r\n\r\nOne way to fix it is declare the variable volatile. This basically instructs the value to always be read from RAM - which should not make much of a difference for a project of this size.\r\n\r\nYou could also use java.util.concurrent.atomic.AtomicBoolean instead of a primitive boolean, which should result in the same thing for this use-case.\r\n\r\nAnother way to fix the issue is to ensure all write changes on the variable are within a synchronized-block. This way the overhead is on the write-process and no longer on the readers.\r\n\r\nHowever, as thread safety becomes a deep topic fast, if you are planning to do more multithreaded applications like this there is some extensive reading material on the topic out there ;-)","title":"Java MultiThreading task, three smokers and one agent","body":"<p>When sharing mutable variables between threads those variables must be handled differently as otherwise each of the reading threads might see different values.</p>\n<p>tldr:</p>\n<p>Simplest way to fix your existing program is most likely to define all of the variables &quot;volatile&quot;, like</p>\n<pre><code>volatile boolean paper;\nvolatile boolean tobacco;\nvolatile boolean lighters;\n</code></pre>\n<p>The somewhat longer explanation: for performance reasons threads may read variables not via (slow) RAM access, but fetch them from cache.\nThis works as long as only the same thread reads and writes the variable, but fails when you try to set the value in one thread and read it back from a different one. The reading thread may see still the older value.</p>\n<p>One way to fix it is declare the variable volatile. This basically instructs the value to always be read from RAM - which should not make much of a difference for a project of this size.</p>\n<p>You could also use java.util.concurrent.atomic.AtomicBoolean instead of a primitive boolean, which should result in the same thing for this use-case.</p>\n<p>Another way to fix the issue is to ensure all write changes on the variable are within a synchronized-block. This way the overhead is on the write-process and no longer on the readers.</p>\n<p>However, as thread safety becomes a deep topic fast, if you are planning to do more multithreaded applications like this there is some extensive reading material on the topic out there ;-)</p>\n"}],"owner":{"account_id":21597629,"reputation":66,"user_id":15926316,"display_name":"CupidONO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70235478,"answer_count":2,"score":1,"last_activity_date":1639419313,"creation_date":1638714803,"question_id":70235350,"body_markdown":"the task consists of three smokers which are three threads and one class called Agent which has three attributes\r\n**Tobacco**, **Lighters** and **Paper**.  \r\nSmokers only have one of these items with them, agent class is supposed to put two items randomly on the table and then **Smoker** is supposed to check if they are missing those two items and pick them up so they can use them for smoking.   \r\n\r\nI am having an issue where my output is acting bit odd, smokers tend to pick all of the items they are missing at the same time even though i think i put that they are not allowed to do that.\r\n\r\nMain class\r\n----------\r\n\r\n```\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tAgent a = new Agent();\r\n\t\t\r\n\t\tPusac p1 = new Pusac(0,a,&quot;Paper&quot;);\r\n\t\tPusac p2 = new Pusac(1,a,&quot;Tobacco&quot;);\r\n\t\tPusac p3 = new Pusac(2,a,&quot;Lighters&quot;);\r\n\r\n\t\tp1.start();\r\n\t\tp2.start();\r\n\t\tp3.start();\r\n\t}\r\n\r\n}  \r\n```  \r\nI make one agent using a constructor and I pass it to the constructor of smokers.Each smoker has one item, ID, and agent.\r\n   \r\n\r\nSmoker class\r\n------------\r\n\r\n```  \r\npublic class Pusac extends Thread {\r\n\r\n\tint id;\r\n\tAgent a;\r\n\tString owns;\r\n\t\r\n\tpublic Pusac(int id, Agent a, String owns) {\r\n\t\tthis.id = id;\r\n\t\tthis.a = a;\r\n\t\tthis.owns = owns;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\twhile(true) {\r\n\t\ta.putTable();\r\n\t\tif(this.owns.equals(&quot;Paper&quot;) &amp;&amp; a.tobacco == true &amp;&amp; a.lighters == true){\r\n\t\t\t\tSystem.out.println(&quot;Smoker with ID &quot; + this.id + &quot; took tobacco and lighters.&quot;);\r\n\t            a.smoke();\r\n\t\t} else if(this.owns.equals(&quot;Tobacco&quot;) &amp;&amp; a.lighters == true &amp;&amp; a.paper == true) {\r\n\t\t\t\tSystem.out.println(&quot;Smoker with ID &quot; + this.id + &quot; took lighters and paper.&quot;);\r\n\t\t\t\ta.smoke();\r\n\t\t} else if(this.owns.equals(&quot;Lighters&quot;) &amp;&amp; a.paper == true &amp;&amp; a.tobacco == true) {\r\n\t\t\t\tSystem.out.println(&quot;Smoker with ID &quot; + this.id + &quot; took paper and tobacco.&quot;);\r\n\t\t\t\ta.smoke();\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n\r\n```  \r\nIn the smoker class function, I check if that agent has items needed for the current thread smoker and then I call the function that is in Agent class.     \r\n\r\nAgent class\r\n-----------\r\n\r\n```  \r\npublic class Agent {\r\n\r\n\tboolean paper;\r\n\tboolean tobacco;\r\n\tboolean lighters;\r\n\t\r\n\t\r\n\tpublic  void putTable() {\r\n\t\tRandom random = new Random();\r\n\t    int randomNumOne = random.nextInt(3);\r\n\t    \r\n\t    switch(randomNumOne) {\r\n\t    case 0:\r\n\t    \tpaper = true;\r\n\t    case 1: \r\n\t    \ttobacco = true;\r\n\t    case 2:\r\n\t    \tlighters = true;\r\n\t    }\r\n\t    \r\n\t    int randomNumTwo = random.nextInt(3);\r\n\t    \r\n\t    if(paper!=true &amp;&amp; randomNumTwo==0) {\r\n\t    \tpaper = true;\r\n\t    } else if(tobacco!=true &amp;&amp; randomNumTwo == 1) {\r\n\t    \ttobacco = true;\r\n\t    } else if(lighters != true &amp;&amp; randomNumTwo == 2) {\r\n\t    \tlighters = true;\r\n\t    }\r\n\t}\r\n\t\r\n\tpublic synchronized void smoke() {\r\n\t\tSystem.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; is smoking.&quot;);\r\n\t\ttry {\r\n\t\t\tThread.sleep(2000);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif(((Pusac)Thread.currentThread()).owns.equals(&quot;Paper&quot;)) {\r\n\t\t\tthis.tobacco = false;\r\n\t\t\tthis.lighters = false;\r\n\t\t\tSystem.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; put down tobacco and lighters.&quot;);\r\n\t\t} else if(((Pusac)Thread.currentThread()).owns.equals(&quot;Tobacco&quot;)) {\r\n\t\t\tthis.paper =false;\r\n\t\t\tthis.lighters =false;\r\n\t\t\tSystem.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; put down paper and lighters.&quot;);\r\n\t\t} else if (((Pusac)Thread.currentThread()).owns.equals(&quot;Lighters&quot;)) {\r\n\t\t\tthis.tobacco =false;\r\n\t\t\tthis.paper =false;\r\n\t\t\tSystem.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; put down paper and tobacco.&quot;);\r\n\t\t}\r\n\t\t\r\n  }\r\n}\r\n```   \r\nA final class called Agent consists of a function that randomly puts two items on the table **items are boolean** and then I have function smoke that just checks which smoker was smoking and then sets everything to be **false**.   \r\n   \r\n\r\nOutput I am getting\r\n-------------------\r\n\r\n```  \r\nSmoker with ID 2 took paper and tobacco.\r\nSmoker with ID 1 took lighters and paper.\r\nSmoker with ID 0 took tobacco and lighters.\r\nSmoker with ID 2 is smoking.\r\nSmoker with ID 2 put down paper and tobacco.\r\nSmoker with ID 2 took paper and tobacco.\r\nSmoker with ID 0 is smoking.\r\nSmoker with ID 0 put down tobacco and lighters.\r\nSmoker with ID 0 took tobacco and lighters.\r\nSmoker with ID 1 is smoking.\r\n```   \r\n\r\nThis is wrong because in reality only one should be picking something at a time and then smoking it so others can have it also.   \r\n\r\nThank you for your help sincerely.","title":"Java MultiThreading task, three smokers and one agent","body":"<p>the task consists of three smokers which are three threads and one class called Agent which has three attributes\n<strong>Tobacco</strong>, <strong>Lighters</strong> and <strong>Paper</strong>.<br />\nSmokers only have one of these items with them, agent class is supposed to put two items randomly on the table and then <strong>Smoker</strong> is supposed to check if they are missing those two items and pick them up so they can use them for smoking.</p>\n<p>I am having an issue where my output is acting bit odd, smokers tend to pick all of the items they are missing at the same time even though i think i put that they are not allowed to do that.</p>\n<h2>Main class</h2>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        Agent a = new Agent();\n        \n        Pusac p1 = new Pusac(0,a,&quot;Paper&quot;);\n        Pusac p2 = new Pusac(1,a,&quot;Tobacco&quot;);\n        Pusac p3 = new Pusac(2,a,&quot;Lighters&quot;);\n\n        p1.start();\n        p2.start();\n        p3.start();\n    }\n\n}  \n</code></pre>\n<p>I make one agent using a constructor and I pass it to the constructor of smokers.Each smoker has one item, ID, and agent.</p>\n<h2>Smoker class</h2>\n<pre><code>public class Pusac extends Thread {\n\n    int id;\n    Agent a;\n    String owns;\n    \n    public Pusac(int id, Agent a, String owns) {\n        this.id = id;\n        this.a = a;\n        this.owns = owns;\n    }\n    \n    @Override\n    public void run() {\n        while(true) {\n        a.putTable();\n        if(this.owns.equals(&quot;Paper&quot;) &amp;&amp; a.tobacco == true &amp;&amp; a.lighters == true){\n                System.out.println(&quot;Smoker with ID &quot; + this.id + &quot; took tobacco and lighters.&quot;);\n                a.smoke();\n        } else if(this.owns.equals(&quot;Tobacco&quot;) &amp;&amp; a.lighters == true &amp;&amp; a.paper == true) {\n                System.out.println(&quot;Smoker with ID &quot; + this.id + &quot; took lighters and paper.&quot;);\n                a.smoke();\n        } else if(this.owns.equals(&quot;Lighters&quot;) &amp;&amp; a.paper == true &amp;&amp; a.tobacco == true) {\n                System.out.println(&quot;Smoker with ID &quot; + this.id + &quot; took paper and tobacco.&quot;);\n                a.smoke();\n        }\n        }\n    }\n    \n}\n\n</code></pre>\n<p>In the smoker class function, I check if that agent has items needed for the current thread smoker and then I call the function that is in Agent class.</p>\n<h2>Agent class</h2>\n<pre><code>public class Agent {\n\n    boolean paper;\n    boolean tobacco;\n    boolean lighters;\n    \n    \n    public  void putTable() {\n        Random random = new Random();\n        int randomNumOne = random.nextInt(3);\n        \n        switch(randomNumOne) {\n        case 0:\n            paper = true;\n        case 1: \n            tobacco = true;\n        case 2:\n            lighters = true;\n        }\n        \n        int randomNumTwo = random.nextInt(3);\n        \n        if(paper!=true &amp;&amp; randomNumTwo==0) {\n            paper = true;\n        } else if(tobacco!=true &amp;&amp; randomNumTwo == 1) {\n            tobacco = true;\n        } else if(lighters != true &amp;&amp; randomNumTwo == 2) {\n            lighters = true;\n        }\n    }\n    \n    public synchronized void smoke() {\n        System.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; is smoking.&quot;);\n        try {\n            Thread.sleep(2000);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n        if(((Pusac)Thread.currentThread()).owns.equals(&quot;Paper&quot;)) {\n            this.tobacco = false;\n            this.lighters = false;\n            System.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; put down tobacco and lighters.&quot;);\n        } else if(((Pusac)Thread.currentThread()).owns.equals(&quot;Tobacco&quot;)) {\n            this.paper =false;\n            this.lighters =false;\n            System.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; put down paper and lighters.&quot;);\n        } else if (((Pusac)Thread.currentThread()).owns.equals(&quot;Lighters&quot;)) {\n            this.tobacco =false;\n            this.paper =false;\n            System.out.println(&quot;Smoker with ID &quot; + ((Pusac)Thread.currentThread()).id + &quot; put down paper and tobacco.&quot;);\n        }\n        \n  }\n}\n</code></pre>\n<p>A final class called Agent consists of a function that randomly puts two items on the table <strong>items are boolean</strong> and then I have function smoke that just checks which smoker was smoking and then sets everything to be <strong>false</strong>.</p>\n<h2>Output I am getting</h2>\n<pre><code>Smoker with ID 2 took paper and tobacco.\nSmoker with ID 1 took lighters and paper.\nSmoker with ID 0 took tobacco and lighters.\nSmoker with ID 2 is smoking.\nSmoker with ID 2 put down paper and tobacco.\nSmoker with ID 2 took paper and tobacco.\nSmoker with ID 0 is smoking.\nSmoker with ID 0 put down tobacco and lighters.\nSmoker with ID 0 took tobacco and lighters.\nSmoker with ID 1 is smoking.\n</code></pre>\n<p>This is wrong because in reality only one should be picking something at a time and then smoking it so others can have it also.</p>\n<p>Thank you for your help sincerely.</p>\n"},{"tags":["java","xml","spring","spring-boot","spring-integration"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1639983945,"post_id":70338965,"comment_id":124478031,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639419257,"creation_date":1639419257,"answer_id":70339171,"question_id":70338965,"body_markdown":"Your \r\n\r\n    &lt;integration:transformer id=&quot;ayobaSmsResponseTransformer&quot;\r\n                             input-channel=&quot;ayobaSmsOutputChannel&quot;\r\n                             ref=&quot;ayobaSmsTransformer&quot;\r\n                             method=&quot;ayobaSmsResponseTransform&quot; /&gt;\r\n\r\nDoes not have an `output-channel` definition therefore it tries to resolve a `replyChannel` header which is not present in the message when you route from the `ayobaSmsValidationRouter`.\r\n\r\nYou showed only a `ayobaSmsRequestTransformer`, but it is not clear what sends messages to its `ayobaSMSChannel`. \r\n\r\nPerhaps you have a `&lt;gateway&gt;` upfront with respective messaging contracts on its methods. And perhaps you have a `void` for that `CACHED` token. And from here it looks like you don&#39;t use the latest Spring Integration. \r\n\r\nSee docs for more info: https://docs.spring.io/spring-integration/docs/current/reference/html/messaging-endpoints.html#gateway\r\n\r\n&gt;  \tStarting with version 5.4, when gateway method return type is void, the framework populates a replyChannel header as a nullChannel bean reference if such a header is not provided explicitly. This allows any possible reply from the downstream flow to be discarded, meeting the one-way gateway contract. \r\n\r\nAnd see the latest version to upgrade: https://spring.io/projects/spring-integration#learn","title":"Spring Integration no output-channel or replyChannel","body":"<p>Your</p>\n<pre><code>&lt;integration:transformer id=&quot;ayobaSmsResponseTransformer&quot;\n                         input-channel=&quot;ayobaSmsOutputChannel&quot;\n                         ref=&quot;ayobaSmsTransformer&quot;\n                         method=&quot;ayobaSmsResponseTransform&quot; /&gt;\n</code></pre>\n<p>Does not have an <code>output-channel</code> definition therefore it tries to resolve a <code>replyChannel</code> header which is not present in the message when you route from the <code>ayobaSmsValidationRouter</code>.</p>\n<p>You showed only a <code>ayobaSmsRequestTransformer</code>, but it is not clear what sends messages to its <code>ayobaSMSChannel</code>.</p>\n<p>Perhaps you have a <code>&lt;gateway&gt;</code> upfront with respective messaging contracts on its methods. And perhaps you have a <code>void</code> for that <code>CACHED</code> token. And from here it looks like you don't use the latest Spring Integration.</p>\n<p>See docs for more info: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/messaging-endpoints.html#gateway\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/messaging-endpoints.html#gateway</a></p>\n<blockquote>\n<p>Starting with version 5.4, when gateway method return type is void, the framework populates a replyChannel header as a nullChannel bean reference if such a header is not provided explicitly. This allows any possible reply from the downstream flow to be discarded, meeting the one-way gateway contract.</p>\n</blockquote>\n<p>And see the latest version to upgrade: <a href=\"https://spring.io/projects/spring-integration#learn\" rel=\"nofollow noreferrer\">https://spring.io/projects/spring-integration#learn</a></p>\n"}],"owner":{"account_id":23226343,"reputation":1,"user_id":17317831,"display_name":"Muhammad Junaid Tariq"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":521,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639419257,"creation_date":1639418269,"question_id":70338965,"body_markdown":"I am working on a scenario where I have to get token in 1st call and then validate that token in the 2nd call.\r\n\r\nMy spring integration files looks like \r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:integration=&quot;http://www.springframework.org/schema/integration&quot;\r\n       xmlns:ws=&quot;http://www.springframework.org/schema/integration/ws&quot;\r\n       xmlns:http=&quot;http://www.springframework.org/schema/integration/http&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd\r\n       http://www.springframework.org/schema/integration/ws http://www.springframework.org/schema/integration/ws/spring-integration-ws.xsd\r\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\nhttp://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd&quot;&gt;\r\n\r\n    &lt;!-- Entry channel into this flow is ucipTopupChannel --&gt;\r\n\r\n    &lt;integration:transformer id=&quot;ayobaSmsRequestTransformer&quot;\r\n                             input-channel=&quot;ayobaSMSChannel&quot;\r\n                             output-channel=&quot;ayobaSmsTransformerOutputChannel&quot;\r\n                             ref=&quot;ayobaSmsTransformer&quot;\r\n                             method=&quot;ayobaSmsRequestTransform&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsTransformerOutputChannel&quot; /&gt;\r\n\r\n    &lt;integration:header-value-router id=&quot;ayobaSmsValidationRouter&quot; input-channel=&quot;ayobaSmsTransformerOutputChannel&quot; header-name=&quot;VALIDATION&quot;&gt;\r\n        &lt;integration:mapping value=&quot;FAILED&quot; channel=&quot;ayobaSmsValidationFailedChannel&quot;  /&gt;\r\n        &lt;integration:mapping value=&quot;PASSED&quot; channel=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\r\n    &lt;/integration:header-value-router&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsValidationFailedChannel&quot; /&gt;\r\n\r\n    &lt;integration:service-activator input-channel=&quot;ayobaSmsValidationFailedChannel&quot; ref=&quot;validationFailedServiceActivator&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\r\n\r\n    &lt;integration:object-to-json-transformer id=&quot;ayobaJsonTransformer&quot;\r\n                                            input-channel=&quot;ayobaSmsValidationRouterOutputChannel&quot;\r\n                                            output-channel=&quot;ayobaJsonChannel&quot;\r\n                                            object-mapper=&quot;customObjectMapper&quot;\r\n                                            content-type=&quot;application/json&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaJsonChannel&quot; /&gt;\r\n\r\n    &lt;http:outbound-gateway id=&quot;ayobaSmsOutboundGateway&quot;\r\n                           extract-request-payload=&quot;true&quot;\r\n                           url-expression=&quot;headers[&#39;url&#39;]&quot;\r\n                           request-channel=&quot;ayobaJsonChannel&quot;\r\n                           reply-channel=&quot;ayobaSmsOutputChannel&quot;\r\n                           mapped-request-headers=&quot;contentType,ERSREFERENCE,Authorization&quot;\r\n                           expected-response-type=&quot;java.lang.String&quot;\r\n                           rest-template=&quot;ayobaRestTemplate&quot; /&gt;\r\n\r\n    &lt;integration:transformer id=&quot;ayobaSmsResponseTransformer&quot;\r\n                             input-channel=&quot;ayobaSmsOutputChannel&quot;\r\n                             ref=&quot;ayobaSmsTransformer&quot;\r\n                             method=&quot;ayobaSmsResponseTransform&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsOutputChannel&quot; /&gt;\r\n\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\nBut now I have to check tokenExpiry for which I am trying to save my extra call, but I am getting below error\r\n\r\n&gt; Caused by: org.springframework.messaging.core.DestinationResolutionException: no output-channel or replyChannel header available\r\n\r\nand my config file looks like\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:integration=&quot;http://www.springframework.org/schema/integration&quot;\r\n       xmlns:ws=&quot;http://www.springframework.org/schema/integration/ws&quot;\r\n       xmlns:http=&quot;http://www.springframework.org/schema/integration/http&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd\r\n       http://www.springframework.org/schema/integration/ws http://www.springframework.org/schema/integration/ws/spring-integration-ws.xsd\r\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\nhttp://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd&quot;&gt;\r\n\r\n    &lt;!-- Entry channel into this flow is ucipTopupChannel --&gt;\r\n\r\n    &lt;integration:transformer id=&quot;ayobaSmsRequestTransformer&quot;\r\n                             input-channel=&quot;ayobaSMSChannel&quot;\r\n                             output-channel=&quot;ayobaSmsTransformerOutputChannel&quot;\r\n                             ref=&quot;ayobaSmsTransformer&quot;\r\n                             method=&quot;ayobaSmsRequestTransform&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsTransformerOutputChannel&quot; /&gt;\r\n\r\n    &lt;integration:header-value-router id=&quot;ayobaSmsValidationRouter&quot; input-channel=&quot;ayobaSmsTransformerOutputChannel&quot; header-name=&quot;VALIDATION&quot;&gt;\r\n        &lt;integration:mapping value=&quot;FAILED&quot; channel=&quot;ayobaSmsValidationFailedChannel&quot;  /&gt;\r\n        &lt;integration:mapping value=&quot;PASSED&quot; channel=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\r\n        &lt;integration:mapping value=&quot;CACHED&quot; channel=&quot;ayobaSmsOutputChannel&quot; /&gt;\r\n    &lt;/integration:header-value-router&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsValidationFailedChannel&quot; /&gt;\r\n\r\n    &lt;integration:service-activator input-channel=&quot;ayobaSmsValidationFailedChannel&quot; ref=&quot;validationFailedServiceActivator&quot; output-channel=&quot;ayobaSmsOutputChannel&quot; requires-reply=&quot;false&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\r\n\r\n    &lt;integration:object-to-json-transformer id=&quot;ayobaJsonTransformer&quot;\r\n                                            input-channel=&quot;ayobaSmsValidationRouterOutputChannel&quot;\r\n                                            output-channel=&quot;ayobaJsonChannel&quot;\r\n                                            object-mapper=&quot;customObjectMapper&quot;\r\n                                            content-type=&quot;application/json&quot; /&gt;\r\n\r\n\r\n    &lt;integration:channel id=&quot;ayobaJsonChannel1&quot; /&gt;\r\n\r\n    &lt;http:outbound-gateway id=&quot;ayobaSmsOutboundGateway&quot;\r\n                           extract-request-payload=&quot;true&quot;\r\n                           url-expression=&quot;headers[&#39;url&#39;]&quot;\r\n                           request-channel=&quot;ayobaJsonChannel&quot;\r\n                           reply-channel=&quot;ayobaSmsOutputChannel&quot;\r\n                           mapped-request-headers=&quot;contentType,ERSREFERENCE,Authorization&quot;\r\n                           expected-response-type=&quot;java.lang.String&quot;\r\n                           rest-template=&quot;ayobaRestTemplate&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaJsonChannel&quot; /&gt;\r\n\r\n    &lt;http:outbound-gateway id=&quot;ayobaSmsOutboundGateway&quot;\r\n                           extract-request-payload=&quot;true&quot;\r\n                           url-expression=&quot;headers[&#39;url&#39;]&quot;\r\n                           request-channel=&quot;ayobaJsonChannel&quot;\r\n                           reply-channel=&quot;ayobaSmsOutputChannel&quot;\r\n                           mapped-request-headers=&quot;contentType,ERSREFERENCE,Authorization&quot;\r\n                           expected-response-type=&quot;java.lang.String&quot;\r\n                           rest-template=&quot;ayobaRestTemplate&quot; /&gt;\r\n\r\n    &lt;integration:transformer id=&quot;ayobaSmsResponseTransformer&quot;\r\n                             input-channel=&quot;ayobaSmsOutputChannel&quot;\r\n                             ref=&quot;ayobaSmsTransformer&quot;\r\n                             method=&quot;ayobaSmsResponseTransform&quot; /&gt;\r\n\r\n    &lt;integration:channel id=&quot;ayobaSmsOutputChannel&quot; /&gt;\r\n\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\nNow, I am startled because for the last channel ```ayobaSmsResponseTransformer```, it works fine for the validation call and doesn&#39;t give error, but for my Cached Token call, it is throwing exception.\r\n","title":"Spring Integration no output-channel or replyChannel","body":"<p>I am working on a scenario where I have to get token in 1st call and then validate that token in the 2nd call.</p>\n<p>My spring integration files looks like</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:integration=&quot;http://www.springframework.org/schema/integration&quot;\n       xmlns:ws=&quot;http://www.springframework.org/schema/integration/ws&quot;\n       xmlns:http=&quot;http://www.springframework.org/schema/integration/http&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd\n       http://www.springframework.org/schema/integration/ws http://www.springframework.org/schema/integration/ws/spring-integration-ws.xsd\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\nhttp://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd&quot;&gt;\n\n    &lt;!-- Entry channel into this flow is ucipTopupChannel --&gt;\n\n    &lt;integration:transformer id=&quot;ayobaSmsRequestTransformer&quot;\n                             input-channel=&quot;ayobaSMSChannel&quot;\n                             output-channel=&quot;ayobaSmsTransformerOutputChannel&quot;\n                             ref=&quot;ayobaSmsTransformer&quot;\n                             method=&quot;ayobaSmsRequestTransform&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsTransformerOutputChannel&quot; /&gt;\n\n    &lt;integration:header-value-router id=&quot;ayobaSmsValidationRouter&quot; input-channel=&quot;ayobaSmsTransformerOutputChannel&quot; header-name=&quot;VALIDATION&quot;&gt;\n        &lt;integration:mapping value=&quot;FAILED&quot; channel=&quot;ayobaSmsValidationFailedChannel&quot;  /&gt;\n        &lt;integration:mapping value=&quot;PASSED&quot; channel=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\n    &lt;/integration:header-value-router&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsValidationFailedChannel&quot; /&gt;\n\n    &lt;integration:service-activator input-channel=&quot;ayobaSmsValidationFailedChannel&quot; ref=&quot;validationFailedServiceActivator&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\n\n    &lt;integration:object-to-json-transformer id=&quot;ayobaJsonTransformer&quot;\n                                            input-channel=&quot;ayobaSmsValidationRouterOutputChannel&quot;\n                                            output-channel=&quot;ayobaJsonChannel&quot;\n                                            object-mapper=&quot;customObjectMapper&quot;\n                                            content-type=&quot;application/json&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaJsonChannel&quot; /&gt;\n\n    &lt;http:outbound-gateway id=&quot;ayobaSmsOutboundGateway&quot;\n                           extract-request-payload=&quot;true&quot;\n                           url-expression=&quot;headers['url']&quot;\n                           request-channel=&quot;ayobaJsonChannel&quot;\n                           reply-channel=&quot;ayobaSmsOutputChannel&quot;\n                           mapped-request-headers=&quot;contentType,ERSREFERENCE,Authorization&quot;\n                           expected-response-type=&quot;java.lang.String&quot;\n                           rest-template=&quot;ayobaRestTemplate&quot; /&gt;\n\n    &lt;integration:transformer id=&quot;ayobaSmsResponseTransformer&quot;\n                             input-channel=&quot;ayobaSmsOutputChannel&quot;\n                             ref=&quot;ayobaSmsTransformer&quot;\n                             method=&quot;ayobaSmsResponseTransform&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsOutputChannel&quot; /&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n<p>But now I have to check tokenExpiry for which I am trying to save my extra call, but I am getting below error</p>\n<blockquote>\n<p>Caused by: org.springframework.messaging.core.DestinationResolutionException: no output-channel or replyChannel header available</p>\n</blockquote>\n<p>and my config file looks like</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:integration=&quot;http://www.springframework.org/schema/integration&quot;\n       xmlns:ws=&quot;http://www.springframework.org/schema/integration/ws&quot;\n       xmlns:http=&quot;http://www.springframework.org/schema/integration/http&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd\n       http://www.springframework.org/schema/integration/ws http://www.springframework.org/schema/integration/ws/spring-integration-ws.xsd\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\nhttp://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd&quot;&gt;\n\n    &lt;!-- Entry channel into this flow is ucipTopupChannel --&gt;\n\n    &lt;integration:transformer id=&quot;ayobaSmsRequestTransformer&quot;\n                             input-channel=&quot;ayobaSMSChannel&quot;\n                             output-channel=&quot;ayobaSmsTransformerOutputChannel&quot;\n                             ref=&quot;ayobaSmsTransformer&quot;\n                             method=&quot;ayobaSmsRequestTransform&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsTransformerOutputChannel&quot; /&gt;\n\n    &lt;integration:header-value-router id=&quot;ayobaSmsValidationRouter&quot; input-channel=&quot;ayobaSmsTransformerOutputChannel&quot; header-name=&quot;VALIDATION&quot;&gt;\n        &lt;integration:mapping value=&quot;FAILED&quot; channel=&quot;ayobaSmsValidationFailedChannel&quot;  /&gt;\n        &lt;integration:mapping value=&quot;PASSED&quot; channel=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\n        &lt;integration:mapping value=&quot;CACHED&quot; channel=&quot;ayobaSmsOutputChannel&quot; /&gt;\n    &lt;/integration:header-value-router&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsValidationFailedChannel&quot; /&gt;\n\n    &lt;integration:service-activator input-channel=&quot;ayobaSmsValidationFailedChannel&quot; ref=&quot;validationFailedServiceActivator&quot; output-channel=&quot;ayobaSmsOutputChannel&quot; requires-reply=&quot;false&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsValidationRouterOutputChannel&quot; /&gt;\n\n    &lt;integration:object-to-json-transformer id=&quot;ayobaJsonTransformer&quot;\n                                            input-channel=&quot;ayobaSmsValidationRouterOutputChannel&quot;\n                                            output-channel=&quot;ayobaJsonChannel&quot;\n                                            object-mapper=&quot;customObjectMapper&quot;\n                                            content-type=&quot;application/json&quot; /&gt;\n\n\n    &lt;integration:channel id=&quot;ayobaJsonChannel1&quot; /&gt;\n\n    &lt;http:outbound-gateway id=&quot;ayobaSmsOutboundGateway&quot;\n                           extract-request-payload=&quot;true&quot;\n                           url-expression=&quot;headers['url']&quot;\n                           request-channel=&quot;ayobaJsonChannel&quot;\n                           reply-channel=&quot;ayobaSmsOutputChannel&quot;\n                           mapped-request-headers=&quot;contentType,ERSREFERENCE,Authorization&quot;\n                           expected-response-type=&quot;java.lang.String&quot;\n                           rest-template=&quot;ayobaRestTemplate&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaJsonChannel&quot; /&gt;\n\n    &lt;http:outbound-gateway id=&quot;ayobaSmsOutboundGateway&quot;\n                           extract-request-payload=&quot;true&quot;\n                           url-expression=&quot;headers['url']&quot;\n                           request-channel=&quot;ayobaJsonChannel&quot;\n                           reply-channel=&quot;ayobaSmsOutputChannel&quot;\n                           mapped-request-headers=&quot;contentType,ERSREFERENCE,Authorization&quot;\n                           expected-response-type=&quot;java.lang.String&quot;\n                           rest-template=&quot;ayobaRestTemplate&quot; /&gt;\n\n    &lt;integration:transformer id=&quot;ayobaSmsResponseTransformer&quot;\n                             input-channel=&quot;ayobaSmsOutputChannel&quot;\n                             ref=&quot;ayobaSmsTransformer&quot;\n                             method=&quot;ayobaSmsResponseTransform&quot; /&gt;\n\n    &lt;integration:channel id=&quot;ayobaSmsOutputChannel&quot; /&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n<p>Now, I am startled because for the last channel <code>ayobaSmsResponseTransformer</code>, it works fine for the validation call and doesn't give error, but for my Cached Token call, it is throwing exception.</p>\n"},{"tags":["java","json-deserialization","netflix-zuul"],"comments":[{"owner":{"account_id":9489110,"reputation":2186,"user_id":7054574,"display_name":"Anddo"},"score":1,"creation_date":1639415559,"post_id":70338250,"comment_id":124337465,"body_markdown":"You may read the stream directly as String and look in it what matches your key/value and get it. I think this will avoid parsing and type checking elements into DTO so it will increase performance a little bit.","body":"You may read the stream directly as String and look in it what matches your key/value and get it. I think this will avoid parsing and type checking elements into DTO so it will increase performance a little bit."},{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":1,"creation_date":1639415685,"post_id":70338250,"comment_id":124337504,"body_markdown":"https://github.com/jsurfer/JsonSurfer and similar projects might be interesting for your use case","body":"<a href=\"https://github.com/jsurfer/JsonSurfer\" rel=\"nofollow noreferrer\">github.com/jsurfer/JsonSurfer</a> and similar projects might be interesting for your use case"},{"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"score":0,"creation_date":1639415806,"post_id":70338250,"comment_id":124337551,"body_markdown":"Thank you, that is def a good idea. Its less process intense than deserialization. Which is  what I am trying to get away from.","body":"Thank you, that is def a good idea. Its less process intense than deserialization. Which is  what I am trying to get away from."}],"answers":[{"tags":[],"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639415476,"creation_date":1639415476,"answer_id":70338423,"question_id":70338250,"body_markdown":"At it&#39;s simplest the request payload can just be a string so you could read the input as a string and then parse what you want out using a regular expression or an ``indexOf`` or whatever suits best?","title":"Is there a better way to Optimize code that takes one value out of a Request body, the data comes in, in json format","body":"<p>At it's simplest the request payload can just be a string so you could read the input as a string and then parse what you want out using a regular expression or an <code>indexOf</code> or whatever suits best?</p>\n"},{"tags":[],"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639418582,"creation_date":1639418582,"answer_id":70339042,"question_id":70338250,"body_markdown":"With thanks to everyone. I created this method. Streamed inputstream into a string Created a JSONObject which takes in and tokenizies the string\r\n\r\n```\r\n\r\n private String getURLFromRequest(ServletInputStream stream) throws IOException, JSONException {\r\n    \tString requestStr = IOUtils.toString(stream, &quot;UTF-8&quot;);\r\n    \tJSONObject jsonObj = new JSONObject(requestStr);\r\n    \treturn (String) jsonObj.get(&quot;url&quot;);\r\n    }\r\n```","title":"Is there a better way to Optimize code that takes one value out of a Request body, the data comes in, in json format","body":"<p>With thanks to everyone. I created this method. Streamed inputstream into a string Created a JSONObject which takes in and tokenizies the string</p>\n<pre><code>\n private String getURLFromRequest(ServletInputStream stream) throws IOException, JSONException {\n        String requestStr = IOUtils.toString(stream, &quot;UTF-8&quot;);\n        JSONObject jsonObj = new JSONObject(requestStr);\n        return (String) jsonObj.get(&quot;url&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70338423,"answer_count":2,"score":0,"last_activity_date":1639418582,"creation_date":1639414758,"question_id":70338250,"body_markdown":"I have an request object, that contains a huge amount of data. But there is a filter in my code, where I need to take out just one  element. At the moment I am Deserializing the whole object, which seems overkill to just get one element\r\n\r\nThis is part of a zuul filter\r\n```\r\nimport com.netflix.zuul.context.RequestContext;\r\n```\r\n\r\n```\r\n       RequestContext ct = RequestContext.getCurrentContext();\r\n       HttpServletRequest request = ctx.getRequest();\r\n       ObjectMapper mapper = new ObjectMapper();\r\n       ServletInputStream stream = null;\r\n       try {\r\n        \tstream = request.getInputStream();\r\n        \tGetPageRequest page = mapper.readValue(stream,GetPageRequest.class);\r\n        \tlog.info(&quot;URL IN BODY &quot;+page.getUrl());\r\n        \r\n```\r\nIt seems over kill to deserialize an entire object to get one element but I cant think of a more efficient and optomized way","title":"Is there a better way to Optimize code that takes one value out of a Request body, the data comes in, in json format","body":"<p>I have an request object, that contains a huge amount of data. But there is a filter in my code, where I need to take out just one  element. At the moment I am Deserializing the whole object, which seems overkill to just get one element</p>\n<p>This is part of a zuul filter</p>\n<pre><code>import com.netflix.zuul.context.RequestContext;\n</code></pre>\n<pre><code>       RequestContext ct = RequestContext.getCurrentContext();\n       HttpServletRequest request = ctx.getRequest();\n       ObjectMapper mapper = new ObjectMapper();\n       ServletInputStream stream = null;\n       try {\n            stream = request.getInputStream();\n            GetPageRequest page = mapper.readValue(stream,GetPageRequest.class);\n            log.info(&quot;URL IN BODY &quot;+page.getUrl());\n        \n</code></pre>\n<p>It seems over kill to deserialize an entire object to get one element but I cant think of a more efficient and optomized way</p>\n"},{"tags":["java","multithreading","block"],"comments":[{"owner":{"account_id":190177,"reputation":10331,"user_id":429972,"accept_rate":67,"display_name":"jontro"},"score":4,"creation_date":1305334407,"post_id":5999100,"comment_id":6938624,"body_markdown":"Why would the code above eat up all your cpu, it seems like it will only launch once a second. Anyways see this thread: http://stackoverflow.com/questions/289434/how-to-make-a-java-thread-wait-for-another-threads-output","body":"Why would the code above eat up all your cpu, it seems like it will only launch once a second. Anyways see this thread: <a href=\"http://stackoverflow.com/questions/289434/how-to-make-a-java-thread-wait-for-another-threads-output\" title=\"how to make a java thread wait for another threads output\">stackoverflow.com/questions/289434/&hellip;</a>"},{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":3,"creation_date":1476291369,"post_id":5999100,"comment_id":67286239,"body_markdown":"For complete coverage of this subject, see Chapter 14 of _Java Concurrency in Practice_.  But more generally, you probably want to use higher-level utilities like `BlockingQueue`, `Semaphore`, or `CountDownLatch` rather than the low-level mechanisms.","body":"For complete coverage of this subject, see Chapter 14 of <i>Java Concurrency in Practice</i>.  But more generally, you probably want to use higher-level utilities like <code>BlockingQueue</code>, <code>Semaphore</code>, or <code>CountDownLatch</code> rather than the low-level mechanisms."}],"answers":[{"tags":[],"owner":{"account_id":139856,"reputation":77164,"user_id":345717,"accept_rate":81,"display_name":"EboMike"},"down_vote_count":4,"up_vote_count":86,"is_accepted":true,"score":82,"last_activity_date":1529772431,"creation_date":1305334373,"answer_id":5999146,"question_id":5999100,"body_markdown":"Polling like this is definitely the least preferred solution.\r\n\r\nI assume that you have another thread that will do something to make the condition true. There are several ways to synchronize threads. The easiest one in your case would be a notification via an Object:\r\n\r\nMain thread:\r\n\r\n    synchronized(syncObject) {\r\n        try {\r\n            // Calling wait() will block this thread until another thread\r\n            // calls notify() on the object.\r\n            syncObject.wait();\r\n        } catch (InterruptedException e) {\r\n            // Happens if someone interrupts your thread.\r\n        }\r\n    }\r\n\r\nOther thread:\r\n\r\n    // Do something\r\n    // If the condition is true, do the following:\r\n    synchronized(syncObject) {\r\n        syncObject.notify();\r\n    }\r\n\r\n`syncObject` itself can be a simple `Object`.\r\n\r\nThere are many other ways of inter-thread communication, but which one to use depends on what precisely you&#39;re doing.","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p>Polling like this is definitely the least preferred solution.</p>\n\n<p>I assume that you have another thread that will do something to make the condition true. There are several ways to synchronize threads. The easiest one in your case would be a notification via an Object:</p>\n\n<p>Main thread:</p>\n\n<pre><code>synchronized(syncObject) {\n    try {\n        // Calling wait() will block this thread until another thread\n        // calls notify() on the object.\n        syncObject.wait();\n    } catch (InterruptedException e) {\n        // Happens if someone interrupts your thread.\n    }\n}\n</code></pre>\n\n<p>Other thread:</p>\n\n<pre><code>// Do something\n// If the condition is true, do the following:\nsynchronized(syncObject) {\n    syncObject.notify();\n}\n</code></pre>\n\n<p><code>syncObject</code> itself can be a simple <code>Object</code>.</p>\n\n<p>There are many other ways of inter-thread communication, but which one to use depends on what precisely you're doing.</p>\n"},{"tags":[],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1529773333,"creation_date":1305334425,"answer_id":5999152,"question_id":5999100,"body_markdown":"You could use a [semaphore][1].\r\n\r\nWhile the condition is not met, another thread acquires the semaphore.  \r\nYour thread would try to acquire it with `acquireUninterruptibly()`  \r\nor `tryAcquire(int permits, long timeout, TimeUnit unit)` and would be blocked.\r\n\r\nWhen the condition is met, the semaphore is also released and your thread would acquire it.\r\n\r\nYou could also try using a [`SynchronousQueue`][2] or a [`CountDownLatch`][3].\r\n\r\n  [1]: http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/Semaphore.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html\r\n  [3]: http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p>You could use a <a href=\"http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/Semaphore.html\" rel=\"noreferrer\">semaphore</a>.</p>\n\n<p>While the condition is not met, another thread acquires the semaphore.<br>\nYour thread would try to acquire it with <code>acquireUninterruptibly()</code><br>\nor <code>tryAcquire(int permits, long timeout, TimeUnit unit)</code> and would be blocked.</p>\n\n<p>When the condition is met, the semaphore is also released and your thread would acquire it.</p>\n\n<p>You could also try using a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html\" rel=\"noreferrer\"><code>SynchronousQueue</code></a> or a <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\"><code>CountDownLatch</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":83125,"reputation":9583,"user_id":233266,"accept_rate":75,"display_name":"Toby"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1587461001,"creation_date":1305648060,"answer_id":6033741,"question_id":5999100,"body_markdown":"Similar to EboMike&#39;s answer you can use a mechanism similar to wait/notify/notifyAll but geared up for using a `Lock`.\r\n\r\nFor example,\r\n\r\n\r\n    public void doSomething() throws InterruptedException {\r\n    \tlock.lock();\r\n    \ttry {\r\n    \t\tcondition.await(); // releases lock and waits until doSomethingElse is called\r\n    \t} finally {\r\n    \t\tlock.unlock();\r\n    \t}\r\n    }\r\n    \r\n    public void doSomethingElse() {\r\n    \tlock.lock();\r\n    \ttry {\r\n    \t\tcondition.signal();\r\n    \t} finally {\r\n    \t\tlock.unlock();\r\n    \t}\r\n    }\r\n\r\nWhere you&#39;ll wait for some condition which is notified by another thread (in this case calling `doSomethingElse`), at that point, the first thread will continue...\r\n\r\nUsing `Lock`s over intrinsic synchronisation has lots of advantages but I just prefer having an explicit `Condition` object to represent the condition (you can have more than one which is a nice touch for things like producer-consumer).\r\n\r\nAlso, I can&#39;t help but notice how you deal with the interrupted exception in your example. You probably shouldn&#39;t consume the exception like this, instead reset the interrupt status flag using `Thread.currentThread().interrupt`. \r\n\r\nThis because if the exception is thrown, the interrupt status flag will have been reset (it&#39;s saying &quot;*I no longer remember being interrupted, I won&#39;t be able to tell anyone else that I have been if they ask*&quot;) and another process may rely on this question. The example being that something else has implemented an interruption policy based on this... phew. A further example might be that your interruption policy, rather that `while(true)` might have been implemented as `while(!Thread.currentThread().isInterrupted()` (which will also make your code be more... socially considerate).\r\n\r\nSo, in summary, using `Condition` is rougly equivalent to using wait/notify/notifyAll when you want to use a `Lock`, logging is evil and swallowing `InterruptedException` is naughty ;)\r\n\r\n","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p>Similar to EboMike's answer you can use a mechanism similar to wait/notify/notifyAll but geared up for using a <code>Lock</code>.</p>\n\n<p>For example,</p>\n\n<pre><code>public void doSomething() throws InterruptedException {\n    lock.lock();\n    try {\n        condition.await(); // releases lock and waits until doSomethingElse is called\n    } finally {\n        lock.unlock();\n    }\n}\n\npublic void doSomethingElse() {\n    lock.lock();\n    try {\n        condition.signal();\n    } finally {\n        lock.unlock();\n    }\n}\n</code></pre>\n\n<p>Where you'll wait for some condition which is notified by another thread (in this case calling <code>doSomethingElse</code>), at that point, the first thread will continue...</p>\n\n<p>Using <code>Lock</code>s over intrinsic synchronisation has lots of advantages but I just prefer having an explicit <code>Condition</code> object to represent the condition (you can have more than one which is a nice touch for things like producer-consumer).</p>\n\n<p>Also, I can't help but notice how you deal with the interrupted exception in your example. You probably shouldn't consume the exception like this, instead reset the interrupt status flag using <code>Thread.currentThread().interrupt</code>. </p>\n\n<p>This because if the exception is thrown, the interrupt status flag will have been reset (it's saying \"<em>I no longer remember being interrupted, I won't be able to tell anyone else that I have been if they ask</em>\") and another process may rely on this question. The example being that something else has implemented an interruption policy based on this... phew. A further example might be that your interruption policy, rather that <code>while(true)</code> might have been implemented as <code>while(!Thread.currentThread().isInterrupted()</code> (which will also make your code be more... socially considerate).</p>\n\n<p>So, in summary, using <code>Condition</code> is rougly equivalent to using wait/notify/notifyAll when you want to use a <code>Lock</code>, logging is evil and swallowing <code>InterruptedException</code> is naughty ;)</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1529773389,"creation_date":1412604720,"answer_id":26218153,"question_id":5999100,"body_markdown":"[EboMike&#39;s answer][1] and [Toby&#39;s answer][2] are both on the right track, but they both contain a fatal flaw.  The flaw is called _lost notification_.\r\n\r\nThe problem is, if a thread calls `foo.notify()`, it will not do anything at all unless some other thread is already sleeping in a `foo.wait()` call.  The object, `foo`, does not remember that it was notified.\r\n\r\nThere&#39;s a reason why you aren&#39;t allowed to call `foo.wait()` or `foo.notify()` unless the thread is synchronized on foo.  It&#39;s because the only way to avoid lost notification is to protect the condition with a mutex.  When it&#39;s done right, it looks like this:\r\n\r\nConsumer thread:\r\n\r\n    try {\r\n        synchronized(foo) {\r\n            while(! conditionIsTrue()) {\r\n                foo.wait();\r\n            }\r\n            doSomethingThatRequiresConditionToBeTrue();\r\n        }\r\n    } catch (InterruptedException e) {\r\n        handleInterruption();\r\n    }\r\n\r\nProducer thread:\r\n\r\n    synchronized(foo) {\r\n        doSomethingThatMakesConditionTrue();\r\n        foo.notify();\r\n    }\r\n\r\nThe code that changes the condition and the code that checks the condition is all synchronized on the same object, and the consumer thread explicitly tests the condition before it waits.  There is no way for the consumer to miss the notification and end up stuck forever in a `wait()` call when the condition is already true.\r\n\r\nAlso note that the `wait()` is in a loop.  That&#39;s because, in the general case, by the time the consumer re-acquires the `foo` lock and wakes up, some other thread might have made the condition false again.  Even if that&#39;s not possible in _your_ program, what is possible, in some operating systems, is for `foo.wait()` to return even when `foo.notify()` has not been called.  That&#39;s called a _spurious wakeup_, and it is allowed to happen because it makes wait/notify easier to implement on certain operating systems.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/5999146/4298200\r\n  [2]: https://stackoverflow.com/a/6033741/4298200","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p><a href=\"https://stackoverflow.com/a/5999146/4298200\">EboMike's answer</a> and <a href=\"https://stackoverflow.com/a/6033741/4298200\">Toby's answer</a> are both on the right track, but they both contain a fatal flaw.  The flaw is called <em>lost notification</em>.</p>\n\n<p>The problem is, if a thread calls <code>foo.notify()</code>, it will not do anything at all unless some other thread is already sleeping in a <code>foo.wait()</code> call.  The object, <code>foo</code>, does not remember that it was notified.</p>\n\n<p>There's a reason why you aren't allowed to call <code>foo.wait()</code> or <code>foo.notify()</code> unless the thread is synchronized on foo.  It's because the only way to avoid lost notification is to protect the condition with a mutex.  When it's done right, it looks like this:</p>\n\n<p>Consumer thread:</p>\n\n<pre><code>try {\n    synchronized(foo) {\n        while(! conditionIsTrue()) {\n            foo.wait();\n        }\n        doSomethingThatRequiresConditionToBeTrue();\n    }\n} catch (InterruptedException e) {\n    handleInterruption();\n}\n</code></pre>\n\n<p>Producer thread:</p>\n\n<pre><code>synchronized(foo) {\n    doSomethingThatMakesConditionTrue();\n    foo.notify();\n}\n</code></pre>\n\n<p>The code that changes the condition and the code that checks the condition is all synchronized on the same object, and the consumer thread explicitly tests the condition before it waits.  There is no way for the consumer to miss the notification and end up stuck forever in a <code>wait()</code> call when the condition is already true.</p>\n\n<p>Also note that the <code>wait()</code> is in a loop.  That's because, in the general case, by the time the consumer re-acquires the <code>foo</code> lock and wakes up, some other thread might have made the condition false again.  Even if that's not possible in <em>your</em> program, what is possible, in some operating systems, is for <code>foo.wait()</code> to return even when <code>foo.notify()</code> has not been called.  That's called a <em>spurious wakeup</em>, and it is allowed to happen because it makes wait/notify easier to implement on certain operating systems.</p>\n"},{"tags":[],"owner":{"account_id":10904,"reputation":2639,"user_id":1729005,"display_name":"axblount"},"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1426607378,"creation_date":1426607378,"answer_id":29103667,"question_id":5999100,"body_markdown":"Lock-free solution(?)\r\n====================\r\n\r\nI had the same issue, but I wanted a solution that didn&#39;t use locks.\r\n\r\nProblem: I have at most one thread consuming from a queue. Multiple producer threads are constantly inserting into the queue and need to notify the consumer if it&#39;s waiting. The queue is lock-free so using locks for notification causes unnecessary blocking in producer threads. Each producer thread needs to acquire the lock before it can notify the waiting consumer. I believe I came up with a lock-free solution using [`LockSupport`][1] and [`AtomicReferenceFieldUpdater`][2]. If a lock-free barrier exists within the JDK, I couldn&#39;t find it. Both `CyclicBarrier` and `CoundDownLatch` use locks internally from what I could find.\r\n\r\nThis is my slightly abbreviated code. Just to be clear, this code will only allow _**one**_ thread to wait at a time. It could be modified to allow for multiple awaiters/consumers by using some type of atomic collection to store multiple owner (a `ConcurrentMap` may work).\r\n\r\nI have used this code and it seems to work. I have not tested it extensively. I suggest you read the documentation for [`LockSupport`][1] before use.\r\n\r\n    /* I release this code into the public domain.\r\n     * http://unlicense.org/UNLICENSE\r\n     */\r\n\r\n    import java.util.concurrent.atomic.AtomicReferenceFieldUpdater;\r\n    import java.util.concurrent.locks.LockSupport;\r\n    \r\n    /**\r\n     * A simple barrier for awaiting a signal.\r\n     * Only one thread at a time may await the signal.\r\n     */\r\n    public class SignalBarrier {\r\n        /**\r\n         * The Thread that is currently awaiting the signal.\r\n         * !!! Don&#39;t call this directly !!!\r\n         */\r\n        @SuppressWarnings(&quot;unused&quot;)\r\n        private volatile Thread _owner;\r\n    \r\n        /** Used to update the owner atomically */\r\n        private static final AtomicReferenceFieldUpdater&lt;SignalBarrier, Thread&gt; ownerAccess =\r\n            AtomicReferenceFieldUpdater.newUpdater(SignalBarrier.class, Thread.class, &quot;_owner&quot;);\r\n    \r\n        /** Create a new SignalBarrier without an owner. */\r\n        public SignalBarrier() {\r\n            _owner = null;\r\n        }\r\n    \r\n        /**\r\n         * Signal the owner that the barrier is ready.\r\n         * This has no effect if the SignalBarrer is unowned.\r\n         */\r\n        public void signal() {\r\n            // Remove the current owner of this barrier.\r\n            Thread t = ownerAccess.getAndSet(this, null);\r\n    \r\n            // If the owner wasn&#39;t null, unpark it.\r\n            if (t != null) {\r\n                LockSupport.unpark(t);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Claim the SignalBarrier and block until signaled.\r\n         *\r\n         * @throws IllegalStateException If the SignalBarrier already has an owner.\r\n         * @throws InterruptedException If the thread is interrupted while waiting.\r\n         */\r\n        public void await() throws InterruptedException {\r\n            // Get the thread that would like to await the signal.\r\n            Thread t = Thread.currentThread();\r\n    \r\n            // If a thread is attempting to await, the current owner should be null.\r\n            if (!ownerAccess.compareAndSet(this, null, t)) {\r\n                throw new IllegalStateException(&quot;A second thread tried to acquire a signal barrier that is already owned.&quot;);\r\n            }\r\n    \r\n            // The current thread has taken ownership of this barrier.\r\n            // Park the current thread until the signal. Record this\r\n            // signal barrier as the &#39;blocker&#39;.\r\n            LockSupport.park(this);\r\n            // If a thread has called #signal() the owner should already be null.\r\n            // However the documentation for LockSupport.unpark makes it clear that\r\n            // threads can wake up for absolutely no reason. Do a compare and set\r\n            // to make sure we don&#39;t wipe out a new owner, keeping in mind that only\r\n            // thread should be awaiting at any given moment!\r\n            ownerAccess.compareAndSet(this, t, null);\r\n    \r\n            // Check to see if we&#39;ve been unparked because of a thread interrupt.\r\n            if (t.isInterrupted())\r\n                throw new InterruptedException();\r\n        }\r\n    \r\n        /**\r\n         * Claim the SignalBarrier and block until signaled or the timeout expires.\r\n         *\r\n         * @throws IllegalStateException If the SignalBarrier already has an owner.\r\n         * @throws InterruptedException If the thread is interrupted while waiting.\r\n         *\r\n         * @param timeout The timeout duration in nanoseconds.\r\n         * @return The timeout minus the number of nanoseconds that passed while waiting.\r\n         */\r\n        public long awaitNanos(long timeout) throws InterruptedException {\r\n            if (timeout &lt;= 0)\r\n                return 0;\r\n            // Get the thread that would like to await the signal.\r\n            Thread t = Thread.currentThread();\r\n    \r\n            // If a thread is attempting to await, the current owner should be null.\r\n            if (!ownerAccess.compareAndSet(this, null, t)) {\r\n                throw new IllegalStateException(&quot;A second thread tried to acquire a signal barrier is already owned.&quot;);\r\n            }\r\n    \r\n            // The current thread owns this barrier.\r\n            // Park the current thread until the signal. Record this\r\n            // signal barrier as the &#39;blocker&#39;.\r\n            // Time the park.\r\n            long start = System.nanoTime();\r\n            LockSupport.parkNanos(this, timeout);\r\n            ownerAccess.compareAndSet(this, t, null);\r\n            long stop = System.nanoTime();\r\n    \r\n            // Check to see if we&#39;ve been unparked because of a thread interrupt.\r\n            if (t.isInterrupted())\r\n                throw new InterruptedException();\r\n    \r\n            // Return the number of nanoseconds left in the timeout after what we\r\n            // just waited.\r\n            return Math.max(timeout - stop + start, 0L);\r\n        }\r\n    }\r\n\r\nTo give a vague example of usage, I&#39;ll adopt james large&#39;s example:\r\n\r\n    SignalBarrier barrier = new SignalBarrier();\r\n\r\nConsumer thread (singular, *not plural!*):\r\n\r\n    try {\r\n        while(!conditionIsTrue()) {\r\n            barrier.await();\r\n        }\r\n        doSomethingThatRequiresConditionToBeTrue();\r\n    } catch (InterruptedException e) {\r\n        handleInterruption();\r\n    }\r\n\r\nProducer thread(s):\r\n\r\n    doSomethingThatMakesConditionTrue();\r\n    barrier.signal();\r\n\r\n\r\n[1]:http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/LockSupport.html\r\n[2]:http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReferenceFieldUpdater.html","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<h1>Lock-free solution(?)</h1>\n\n<p>I had the same issue, but I wanted a solution that didn't use locks.</p>\n\n<p>Problem: I have at most one thread consuming from a queue. Multiple producer threads are constantly inserting into the queue and need to notify the consumer if it's waiting. The queue is lock-free so using locks for notification causes unnecessary blocking in producer threads. Each producer thread needs to acquire the lock before it can notify the waiting consumer. I believe I came up with a lock-free solution using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/LockSupport.html\" rel=\"nofollow noreferrer\"><code>LockSupport</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReferenceFieldUpdater.html\" rel=\"nofollow noreferrer\"><code>AtomicReferenceFieldUpdater</code></a>. If a lock-free barrier exists within the JDK, I couldn't find it. Both <code>CyclicBarrier</code> and <code>CoundDownLatch</code> use locks internally from what I could find.</p>\n\n<p>This is my slightly abbreviated code. Just to be clear, this code will only allow <em><strong>one</strong></em> thread to wait at a time. It could be modified to allow for multiple awaiters/consumers by using some type of atomic collection to store multiple owner (a <code>ConcurrentMap</code> may work).</p>\n\n<p>I have used this code and it seems to work. I have not tested it extensively. I suggest you read the documentation for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/LockSupport.html\" rel=\"nofollow noreferrer\"><code>LockSupport</code></a> before use.</p>\n\n<pre><code>/* I release this code into the public domain.\n * http://unlicense.org/UNLICENSE\n */\n\nimport java.util.concurrent.atomic.AtomicReferenceFieldUpdater;\nimport java.util.concurrent.locks.LockSupport;\n\n/**\n * A simple barrier for awaiting a signal.\n * Only one thread at a time may await the signal.\n */\npublic class SignalBarrier {\n    /**\n     * The Thread that is currently awaiting the signal.\n     * !!! Don't call this directly !!!\n     */\n    @SuppressWarnings(\"unused\")\n    private volatile Thread _owner;\n\n    /** Used to update the owner atomically */\n    private static final AtomicReferenceFieldUpdater&lt;SignalBarrier, Thread&gt; ownerAccess =\n        AtomicReferenceFieldUpdater.newUpdater(SignalBarrier.class, Thread.class, \"_owner\");\n\n    /** Create a new SignalBarrier without an owner. */\n    public SignalBarrier() {\n        _owner = null;\n    }\n\n    /**\n     * Signal the owner that the barrier is ready.\n     * This has no effect if the SignalBarrer is unowned.\n     */\n    public void signal() {\n        // Remove the current owner of this barrier.\n        Thread t = ownerAccess.getAndSet(this, null);\n\n        // If the owner wasn't null, unpark it.\n        if (t != null) {\n            LockSupport.unpark(t);\n        }\n    }\n\n    /**\n     * Claim the SignalBarrier and block until signaled.\n     *\n     * @throws IllegalStateException If the SignalBarrier already has an owner.\n     * @throws InterruptedException If the thread is interrupted while waiting.\n     */\n    public void await() throws InterruptedException {\n        // Get the thread that would like to await the signal.\n        Thread t = Thread.currentThread();\n\n        // If a thread is attempting to await, the current owner should be null.\n        if (!ownerAccess.compareAndSet(this, null, t)) {\n            throw new IllegalStateException(\"A second thread tried to acquire a signal barrier that is already owned.\");\n        }\n\n        // The current thread has taken ownership of this barrier.\n        // Park the current thread until the signal. Record this\n        // signal barrier as the 'blocker'.\n        LockSupport.park(this);\n        // If a thread has called #signal() the owner should already be null.\n        // However the documentation for LockSupport.unpark makes it clear that\n        // threads can wake up for absolutely no reason. Do a compare and set\n        // to make sure we don't wipe out a new owner, keeping in mind that only\n        // thread should be awaiting at any given moment!\n        ownerAccess.compareAndSet(this, t, null);\n\n        // Check to see if we've been unparked because of a thread interrupt.\n        if (t.isInterrupted())\n            throw new InterruptedException();\n    }\n\n    /**\n     * Claim the SignalBarrier and block until signaled or the timeout expires.\n     *\n     * @throws IllegalStateException If the SignalBarrier already has an owner.\n     * @throws InterruptedException If the thread is interrupted while waiting.\n     *\n     * @param timeout The timeout duration in nanoseconds.\n     * @return The timeout minus the number of nanoseconds that passed while waiting.\n     */\n    public long awaitNanos(long timeout) throws InterruptedException {\n        if (timeout &lt;= 0)\n            return 0;\n        // Get the thread that would like to await the signal.\n        Thread t = Thread.currentThread();\n\n        // If a thread is attempting to await, the current owner should be null.\n        if (!ownerAccess.compareAndSet(this, null, t)) {\n            throw new IllegalStateException(\"A second thread tried to acquire a signal barrier is already owned.\");\n        }\n\n        // The current thread owns this barrier.\n        // Park the current thread until the signal. Record this\n        // signal barrier as the 'blocker'.\n        // Time the park.\n        long start = System.nanoTime();\n        LockSupport.parkNanos(this, timeout);\n        ownerAccess.compareAndSet(this, t, null);\n        long stop = System.nanoTime();\n\n        // Check to see if we've been unparked because of a thread interrupt.\n        if (t.isInterrupted())\n            throw new InterruptedException();\n\n        // Return the number of nanoseconds left in the timeout after what we\n        // just waited.\n        return Math.max(timeout - stop + start, 0L);\n    }\n}\n</code></pre>\n\n<p>To give a vague example of usage, I'll adopt james large's example:</p>\n\n<pre><code>SignalBarrier barrier = new SignalBarrier();\n</code></pre>\n\n<p>Consumer thread (singular, <em>not plural!</em>):</p>\n\n<pre><code>try {\n    while(!conditionIsTrue()) {\n        barrier.await();\n    }\n    doSomethingThatRequiresConditionToBeTrue();\n} catch (InterruptedException e) {\n    handleInterruption();\n}\n</code></pre>\n\n<p>Producer thread(s):</p>\n\n<pre><code>doSomethingThatMakesConditionTrue();\nbarrier.signal();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8897,"reputation":11209,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1529773318,"creation_date":1506936570,"answer_id":46522902,"question_id":5999100,"body_markdown":"As nobody published a solution with CountDownLatch. What about:\r\n\r\n    public class Lockeable {\r\n    \tprivate final CountDownLatch countDownLatch = new CountDownLatch(1);\r\n    \r\n        public void doAfterEvent(){\r\n    \t\tcountDownLatch.await();\r\n            doSomething();\r\n        }\r\n    \r\n    \tpublic void reportDetonatingEvent(){\r\n    \t\tcountDownLatch.countDown();\r\n    \t}\r\n    }","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p>As nobody published a solution with CountDownLatch. What about:</p>\n\n<pre><code>public class Lockeable {\n    private final CountDownLatch countDownLatch = new CountDownLatch(1);\n\n    public void doAfterEvent(){\n        countDownLatch.await();\n        doSomething();\n    }\n\n    public void reportDetonatingEvent(){\n        countDownLatch.countDown();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":110607,"reputation":1018,"user_id":292620,"display_name":"rdesgroppes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1639418330,"creation_date":1639418330,"answer_id":70338985,"question_id":5999100,"body_markdown":"One could also leverage `CompletableFuture`s (since Java 8):\r\n```java\r\nfinal CompletableFuture&lt;String&gt; question = new CompletableFuture&lt;&gt;();\r\n\r\n// from within the consumer thread:\r\nfinal String answer = question.get(); // or: event.get(7500000, TimeUnit.YEARS)\r\n\r\n// from within the producer thread:\r\nquestion.complete(&quot;42&quot;);\r\n```","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p>One could also leverage <code>CompletableFuture</code>s (since Java 8):</p>\n<pre class=\"lang-java prettyprint-override\"><code>final CompletableFuture&lt;String&gt; question = new CompletableFuture&lt;&gt;();\n\n// from within the consumer thread:\nfinal String answer = question.get(); // or: event.get(7500000, TimeUnit.YEARS)\n\n// from within the producer thread:\nquestion.complete(&quot;42&quot;);\n</code></pre>\n"}],"owner":{"account_id":222505,"reputation":2944,"user_id":481143,"accept_rate":87,"display_name":"Rolan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169799,"favorite_count":0,"down_vote_count":0,"up_vote_count":109,"accepted_answer_id":5999146,"answer_count":7,"score":109,"last_activity_date":1639418330,"creation_date":1305333789,"question_id":5999100,"body_markdown":"I&#39;m writing a listener thread for a server, and at the moment I&#39;m using:\r\n\r\n    while (true){\r\n    \ttry {\r\n    \t\tif (condition){\r\n    \t\t\t//do something\r\n    \t\t\tcondition=false;\r\n    \t\t}\r\n    \t\tsleep(1000);\r\n\r\n    \t} catch (InterruptedException ex){\r\n    \t\tLogger.getLogger(server.class.getName()).log(Level.SEVERE, null, ex);\r\n    \t}\r\n    }\r\n\r\nWith the code above, I&#39;m running into issues with the run function eating all the cpu time looping.  The sleep function works, but it seems be a makeshift fix, not a solution.\r\n\r\nIs there some function which would block until the variable &#39;condition&#39; became &#39;true&#39;?\r\nOr is continual looping the standard method of waiting until a variable&#39;s value changes?\r\n","title":"is there a &#39;block until condition becomes true&#39; function in java?","body":"<p>I'm writing a listener thread for a server, and at the moment I'm using:</p>\n\n<pre><code>while (true){\n    try {\n        if (condition){\n            //do something\n            condition=false;\n        }\n        sleep(1000);\n\n    } catch (InterruptedException ex){\n        Logger.getLogger(server.class.getName()).log(Level.SEVERE, null, ex);\n    }\n}\n</code></pre>\n\n<p>With the code above, I'm running into issues with the run function eating all the cpu time looping.  The sleep function works, but it seems be a makeshift fix, not a solution.</p>\n\n<p>Is there some function which would block until the variable 'condition' became 'true'?\nOr is continual looping the standard method of waiting until a variable's value changes?</p>\n"},{"tags":["java","junit","mocking","mockito"],"comments":[{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577874647,"post_id":59551680,"comment_id":105272072,"body_markdown":"what&#39;s the thrown exception message?","body":"what&#39;s the thrown exception message?"},{"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"score":0,"creation_date":1577874808,"post_id":59551680,"comment_id":105272098,"body_markdown":"Thanks for responding! There is no exception - it just seems to completely ignore the `thenReturn(Optional.of(appUser))` part and actually performs the search on the repository - I have no idea why. A bit like when the `testCreateUser()` method simulates returning a password from the `bCryptPasswordEncoder`, I&#39;m trying to get the `testFindUserById` method to simulate returning a user from the repository.","body":"Thanks for responding! There is no exception - it just seems to completely ignore the <code>thenReturn(Optional.of(appUser))</code> part and actually performs the search on the repository - I have no idea why. A bit like when the <code>testCreateUser()</code> method simulates returning a password from the <code>bCryptPasswordEncoder</code>, I&#39;m trying to get the <code>testFindUserById</code> method to simulate returning a user from the repository."},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577874901,"post_id":59551680,"comment_id":105272125,"body_markdown":"from the response it seems that the code goes to the catch block - is that not the case?","body":"from the response it seems that the code goes to the catch block - is that not the case?"},{"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"score":0,"creation_date":1577875222,"post_id":59551680,"comment_id":105272197,"body_markdown":"As I understand it (probably incorrectly) the search shouldn&#39;t ever actually be performed as mockito should pick up the call `Optional&lt;AppUser&gt; optionalAppUser = userRepository.findById(id);` and just return `Optional.of(appUser)` which can be used to build the ReponseEntity returned by the controller method.But that&#39;s not happening.","body":"As I understand it (probably incorrectly) the search shouldn&#39;t ever actually be performed as mockito should pick up the call <code>Optional&lt;AppUser&gt; optionalAppUser = userRepository.findById(id);</code> and just return <code>Optional.of(appUser)</code> which can be used to build the ReponseEntity returned by the controller method.But that&#39;s not happening."},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577875351,"post_id":59551680,"comment_id":105272226,"body_markdown":"yes, but from the response it seems it goes to the catch block instead - what exception did it catch?","body":"yes, but from the response it seems it goes to the catch block instead - what exception did it catch?"},{"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"score":0,"creation_date":1577875813,"post_id":59551680,"comment_id":105272331,"body_markdown":"You are right - it is passing execution to the exception which handles the case when the id searched for is not in the repository. I wonder if there&#39;s a way to stop that clause from even executing in the test or if I could redesign the test, but I have no idea how.","body":"You are right - it is passing execution to the exception which handles the case when the id searched for is not in the repository. I wonder if there&#39;s a way to stop that clause from even executing in the test or if I could redesign the test, but I have no idea how."},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577875950,"post_id":59551680,"comment_id":105272359,"body_markdown":"can you log the exception message and add it to the running output?","body":"can you log the exception message and add it to the running output?"},{"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"score":0,"creation_date":1577876135,"post_id":59551680,"comment_id":105272395,"body_markdown":"The Exception is something I designed myself to detect when a user id is not found, it&#39;s not a runtime exception.","body":"The Exception is something I designed myself to detect when a user id is not found, it&#39;s not a runtime exception."},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577876420,"post_id":59551680,"comment_id":105272448,"body_markdown":"ah, I see. everything seems to be correct - you could try using Mockito&#39;s any() when mocking the response to see if the problem is with given id. `when(userRepository.findById(any())).thenReturn(Optional.of(appUser));` and go from there","body":"ah, I see. everything seems to be correct - you could try using Mockito&#39;s any() when mocking the response to see if the problem is with given id. <code>when(userRepository.findById(any())).thenReturn(Optional.of(&zwnj;&#8203;appUser));</code> and go from there"},{"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"score":0,"creation_date":1577876623,"post_id":59551680,"comment_id":105272503,"body_markdown":"Again you are right:\n`when(userRepository.findById(any())).thenReturn(optionalAppUser);` returns the correct response. Why?","body":"Again you are right: <code>when(userRepository.findById(any())).thenReturn(optionalAppU&zwnj;&#8203;ser);</code> returns the correct response. Why?"},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577881523,"post_id":59551680,"comment_id":105273450,"body_markdown":"perhaps it has something to do with the data type. Perhaps try changing  `public Optional&lt;AppUser&gt; findById(long id);` to `public Optional&lt;AppUser&gt; findById(Long id);`","body":"perhaps it has something to do with the data type. Perhaps try changing  <code>public Optional&lt;AppUser&gt; findById(long id);</code> to <code>public Optional&lt;AppUser&gt; findById(Long id);</code>"},{"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"score":1,"creation_date":1577883177,"post_id":59551680,"comment_id":105273819,"body_markdown":"Well, you&#39;re a legend. Your two small hints have enabled me to get 3 out of 4 of my test classes working completely. Thank you very much!","body":"Well, you&#39;re a legend. Your two small hints have enabled me to get 3 out of 4 of my test classes working completely. Thank you very much!"},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1577885015,"post_id":59551680,"comment_id":105274298,"body_markdown":"great, I&#39;ll post this as an answer.","body":"great, I&#39;ll post this as an answer."}],"answers":[{"tags":[],"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577885051,"creation_date":1577885051,"answer_id":59552911,"question_id":59551680,"body_markdown":"Seems to be a problem with autoboxing. Change the method ` public Optional&lt;AppUser&gt; findById(long id);` to accept Long instead.","title":"Mockito When...Then Return - return ignored?","body":"<p>Seems to be a problem with autoboxing. Change the method <code>public Optional&lt;AppUser&gt; findById(long id);</code> to accept Long instead.</p>\n"},{"tags":[],"owner":{"account_id":5595224,"reputation":379,"user_id":4433208,"display_name":"beer geek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577896631,"creation_date":1577896631,"answer_id":59554207,"question_id":59551680,"body_markdown":"I think @Janar is correct, but I&#39;ll explain why.\r\n\r\nWhen you write &quot;when(userRepository.findById(0L)).thenReturn(Optional.of(appUser))&quot;, what Mockito does is set start monitoring calls to the indicated method (findById) and comparing the argument to &quot;0L&quot;, which is a Java long int, which is not an object. \r\n\r\nThe actual method takes a java.lang.Long, which is an object. The two are not equal.\r\n\r\nYou can fix it by changing the findById method, as @Janar suggests, but that is not what I would do. I assume that the production code is using a java.lang.Long for a practical reason. Instead, I would change the test to:\r\n\r\n````\r\nwhen(userRepository.findById(Long.valueOf(0L))).thenReturn(Optional.of(appUser));\r\n````","title":"Mockito When...Then Return - return ignored?","body":"<p>I think @Janar is correct, but I'll explain why.</p>\n\n<p>When you write \"when(userRepository.findById(0L)).thenReturn(Optional.of(appUser))\", what Mockito does is set start monitoring calls to the indicated method (findById) and comparing the argument to \"0L\", which is a Java long int, which is not an object. </p>\n\n<p>The actual method takes a java.lang.Long, which is an object. The two are not equal.</p>\n\n<p>You can fix it by changing the findById method, as @Janar suggests, but that is not what I would do. I assume that the production code is using a java.lang.Long for a practical reason. Instead, I would change the test to:</p>\n\n<pre><code>when(userRepository.findById(Long.valueOf(0L))).thenReturn(Optional.of(appUser));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639418310,"creation_date":1639418310,"answer_id":70338978,"question_id":59551680,"body_markdown":"My case was not the same of your findById but I hope it helps.\r\n\r\n**Summary:** \r\n&gt; mockito is sensible with the passed arguments and it works better with simple or **primitive data types**\r\n\r\nOn my case, this sentence was ignored:\r\n\r\n```\r\ndoReturn(result).when(scriptExecutor).\r\nrunScript(connection, new StringReader(&quot;selec * from dual;&quot;));\r\n```\r\n\r\nAfter some hours of attempts, I change the definition of **runScript** to receive a **simple string** instead **StringReader**. \r\n\r\nFrom this:\r\n```\r\npublic ArrayList runScript(Connection conn, StringReader reader)\r\n```\r\n\r\nTo this:\r\n\r\n```\r\npublic ArrayList runScript(Connection conn, String query)\r\n```\r\n\r\nThen the mocked sentence was picked and everything works as expected:\r\n\r\n```\r\ndoReturn(result).when(scriptExecutor).\r\nrunScript(connection, &quot;selec * from dual;&quot;);\r\n```\r\n\r\nBasically if I use a StringReader, didn,t work. But **with a simple String, it works!!**","title":"Mockito When...Then Return - return ignored?","body":"<p>My case was not the same of your findById but I hope it helps.</p>\n<p><strong>Summary:</strong></p>\n<blockquote>\n<p>mockito is sensible with the passed arguments and it works better with simple or <strong>primitive data types</strong></p>\n</blockquote>\n<p>On my case, this sentence was ignored:</p>\n<pre><code>doReturn(result).when(scriptExecutor).\nrunScript(connection, new StringReader(&quot;selec * from dual;&quot;));\n</code></pre>\n<p>After some hours of attempts, I change the definition of <strong>runScript</strong> to receive a <strong>simple string</strong> instead <strong>StringReader</strong>.</p>\n<p>From this:</p>\n<pre><code>public ArrayList runScript(Connection conn, StringReader reader)\n</code></pre>\n<p>To this:</p>\n<pre><code>public ArrayList runScript(Connection conn, String query)\n</code></pre>\n<p>Then the mocked sentence was picked and everything works as expected:</p>\n<pre><code>doReturn(result).when(scriptExecutor).\nrunScript(connection, &quot;selec * from dual;&quot;);\n</code></pre>\n<p>Basically if I use a StringReader, didn,t work. But <strong>with a simple String, it works!!</strong></p>\n"}],"owner":{"account_id":17432043,"reputation":1,"user_id":12635860,"display_name":"Matt Chermside"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3971,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1639418310,"creation_date":1577874378,"question_id":59551680,"body_markdown":"I&#39;m currently on a course learning Spring-boot and I&#39;m stuck with testing a project -  any help is much appreciated as I&#39;m a beginner here. \r\n\r\nI have a rest controller test, using Mockito that appears to be ignoring &quot;ThenReturn&quot; when a method is invoked using Mockito.when(). \r\n\r\nHere is the whole class:\r\n\r\n```\r\npackage com.example.demo.controllers;\r\n\r\nimport com.example.demo.TestUtils;\r\nimport com.example.demo.model.persistence.AppUser;\r\nimport com.example.demo.model.persistence.repositories.CartRepository;\r\nimport com.example.demo.model.persistence.repositories.UserRepository;\r\nimport com.example.demo.model.requests.CreateUserRequest;\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport java.util.Optional;\r\nimport static org.junit.Assert.*;\r\nimport static org.mockito.Mockito.*;\r\n\r\npublic class UserControllerTest {\r\n\r\n    private UserController userController;\r\n    private UserRepository userRepository = mock(UserRepository.class);\r\n    private CartRepository cartRepository = mock(CartRepository.class);\r\n    private BCryptPasswordEncoder bCryptPasswordEncoder = mock(BCryptPasswordEncoder.class);\r\n\r\n    @Before\r\n    public void initTest(){\r\n        userController = new UserController();\r\n        TestUtils.injectObjects(userController, &quot;userRepository&quot;, userRepository);\r\n        TestUtils.injectObjects(userController, &quot;cartRepository&quot;, cartRepository);\r\n        TestUtils.injectObjects(userController, &quot;bCryptPasswordEncoder&quot;, bCryptPasswordEncoder);\r\n        AppUser appUser = TestUtils.getAppUser();\r\n        when(userRepository.findById(0L)).thenReturn(Optional.of(appUser));\r\n        when(bCryptPasswordEncoder.encode(&quot;testPassword&quot;)).thenReturn(&quot;hashedPassword&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void testFindUserById(){\r\n        ResponseEntity&lt;AppUser&gt; response = userController.findById(0L);\r\n        System.out.println(response);\r\n    }\r\n\r\n\r\n    @Test\r\n    public void testCreateUser() throws Exception{\r\n\r\n        CreateUserRequest createUserRequest = new CreateUserRequest();\r\n        createUserRequest.setUsername(&quot;testUser&quot;);\r\n        createUserRequest.setPassword(&quot;testPassword&quot;);\r\n        createUserRequest.setConfirmPassword(&quot;testPassword&quot;);\r\n\r\n        ResponseEntity&lt;AppUser&gt; response = userController.createUser(createUserRequest);\r\n\r\n        assertNotNull(response);\r\n        assertEquals(200, response.getStatusCodeValue());\r\n\r\n        AppUser createdUser = response.getBody();\r\n        assertNotNull(createdUser);\r\n        assertEquals(0, createdUser.getId());\r\n        assertEquals(&quot;testUser&quot;, createdUser.getUsername());\r\n        assertEquals(&quot;hashedPassword&quot;, createdUser.getPassword());\r\n    }\r\n}\r\n \r\n```\r\nThe test called &quot;testCreateUser&quot; passes without a problem. It&#39;s the test called &quot;testFindUserById&quot; that is giving me a problem.\r\n\r\nHere is the controller method I&#39;m trying to test (all working fine when tested in Postman):\r\n```\r\npublic ResponseEntity&lt;AppUser&gt; findById(@PathVariable Long id) {\r\n\t\ttry{\r\n\t\t\tlog.info(&quot;UserIDSearch = &quot; + id);\r\n\t\t\tSystem.out.println(&quot;UserIDSearch = &quot; + id);\r\n\t\t\tOptional&lt;AppUser&gt; optionalAppUser = userRepository.findById(id);\r\n\t\t\tif(optionalAppUser.isPresent()){\r\n\t\t\t\tlog.info(&quot;UserIdFound =  &quot; + id);\r\n\t\t\t\treturn ResponseEntity.ok(optionalAppUser.get());\r\n\t\t\t}else{\r\n\t\t\t\tthrow new ApiException(ExceptionTypes.SEARCHUSER, id.toString());\r\n\t\t\t}\r\n\t\t}catch(ApiException a){\r\n\t\t\t\treturn ResponseEntity.notFound().build();\r\n\t\t}\r\n\t}\r\n\r\n```\r\nThe repository being mocked in the test class is just a straightforward JpaRepository:\r\n```\r\npublic interface UserRepository extends JpaRepository&lt;AppUser, Long&gt; {\r\n\tOptional&lt;AppUser&gt; findByUsername(String username);\r\n\tpublic Optional&lt;AppUser&gt; findById(long id);\r\n}\r\n```\r\nThe output I get from running the testFindUserById() test is the following:\r\n```\r\nUserIDSearch = 0\r\n&lt;404 NOT_FOUND Not Found,[]&gt;\r\n```\r\nI guess what I&#39;m trying to achieve here is that the test uses the when().thenReturn() to simulate an OK response from the mocked userRepository, but instead it actually performs the search and returns the &quot;Not found&quot;. Can anyone help? Thanks so much!\r\n\r\n\r\n","title":"Mockito When...Then Return - return ignored?","body":"<p>I'm currently on a course learning Spring-boot and I'm stuck with testing a project -  any help is much appreciated as I'm a beginner here. </p>\n\n<p>I have a rest controller test, using Mockito that appears to be ignoring \"ThenReturn\" when a method is invoked using Mockito.when(). </p>\n\n<p>Here is the whole class:</p>\n\n<pre><code>package com.example.demo.controllers;\n\nimport com.example.demo.TestUtils;\nimport com.example.demo.model.persistence.AppUser;\nimport com.example.demo.model.persistence.repositories.CartRepository;\nimport com.example.demo.model.persistence.repositories.UserRepository;\nimport com.example.demo.model.requests.CreateUserRequest;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport java.util.Optional;\nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.*;\n\npublic class UserControllerTest {\n\n    private UserController userController;\n    private UserRepository userRepository = mock(UserRepository.class);\n    private CartRepository cartRepository = mock(CartRepository.class);\n    private BCryptPasswordEncoder bCryptPasswordEncoder = mock(BCryptPasswordEncoder.class);\n\n    @Before\n    public void initTest(){\n        userController = new UserController();\n        TestUtils.injectObjects(userController, \"userRepository\", userRepository);\n        TestUtils.injectObjects(userController, \"cartRepository\", cartRepository);\n        TestUtils.injectObjects(userController, \"bCryptPasswordEncoder\", bCryptPasswordEncoder);\n        AppUser appUser = TestUtils.getAppUser();\n        when(userRepository.findById(0L)).thenReturn(Optional.of(appUser));\n        when(bCryptPasswordEncoder.encode(\"testPassword\")).thenReturn(\"hashedPassword\");\n    }\n\n    @Test\n    public void testFindUserById(){\n        ResponseEntity&lt;AppUser&gt; response = userController.findById(0L);\n        System.out.println(response);\n    }\n\n\n    @Test\n    public void testCreateUser() throws Exception{\n\n        CreateUserRequest createUserRequest = new CreateUserRequest();\n        createUserRequest.setUsername(\"testUser\");\n        createUserRequest.setPassword(\"testPassword\");\n        createUserRequest.setConfirmPassword(\"testPassword\");\n\n        ResponseEntity&lt;AppUser&gt; response = userController.createUser(createUserRequest);\n\n        assertNotNull(response);\n        assertEquals(200, response.getStatusCodeValue());\n\n        AppUser createdUser = response.getBody();\n        assertNotNull(createdUser);\n        assertEquals(0, createdUser.getId());\n        assertEquals(\"testUser\", createdUser.getUsername());\n        assertEquals(\"hashedPassword\", createdUser.getPassword());\n    }\n}\n\n</code></pre>\n\n<p>The test called \"testCreateUser\" passes without a problem. It's the test called \"testFindUserById\" that is giving me a problem.</p>\n\n<p>Here is the controller method I'm trying to test (all working fine when tested in Postman):</p>\n\n<pre><code>public ResponseEntity&lt;AppUser&gt; findById(@PathVariable Long id) {\n        try{\n            log.info(\"UserIDSearch = \" + id);\n            System.out.println(\"UserIDSearch = \" + id);\n            Optional&lt;AppUser&gt; optionalAppUser = userRepository.findById(id);\n            if(optionalAppUser.isPresent()){\n                log.info(\"UserIdFound =  \" + id);\n                return ResponseEntity.ok(optionalAppUser.get());\n            }else{\n                throw new ApiException(ExceptionTypes.SEARCHUSER, id.toString());\n            }\n        }catch(ApiException a){\n                return ResponseEntity.notFound().build();\n        }\n    }\n\n</code></pre>\n\n<p>The repository being mocked in the test class is just a straightforward JpaRepository:</p>\n\n<pre><code>public interface UserRepository extends JpaRepository&lt;AppUser, Long&gt; {\n    Optional&lt;AppUser&gt; findByUsername(String username);\n    public Optional&lt;AppUser&gt; findById(long id);\n}\n</code></pre>\n\n<p>The output I get from running the testFindUserById() test is the following:</p>\n\n<pre><code>UserIDSearch = 0\n&lt;404 NOT_FOUND Not Found,[]&gt;\n</code></pre>\n\n<p>I guess what I'm trying to achieve here is that the test uses the when().thenReturn() to simulate an OK response from the mocked userRepository, but instead it actually performs the search and returns the \"Not found\". Can anyone help? Thanks so much!</p>\n"},{"tags":["java","reactjs","http-headers"],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639418081,"creation_date":1639418081,"answer_id":70338935,"question_id":70331438,"body_markdown":"By default, CORS Spring configuration allows all origins and GET, HEAD and POST methods. This explains why it works with POST instead of DELETE and it also explains why it works using curl but not in the browser.\r\n\r\nYou can configure CORS globally with something along the following lines:\r\n```java\r\n@Configuration\r\n@EnableWebMvc\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/whatever-context-path/**&quot;)\r\n            .allowedOrigins(&quot;*&quot;) // You would want to configure only the domain of your FE application\r\n            .allowedMethods(&quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;DELETE&quot;);\r\n    }\r\n} \r\n```\r\n\r\nYou can read more about this in the following online resources:\r\n - https://www.baeldung.com/spring-cors\r\n - https://spring.io/guides/gs/rest-service-cors/\r\n - https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/CorsRegistry.html","title":"Why delete method doesn&#39;t work when post method does?","body":"<p>By default, CORS Spring configuration allows all origins and GET, HEAD and POST methods. This explains why it works with POST instead of DELETE and it also explains why it works using curl but not in the browser.</p>\n<p>You can configure CORS globally with something along the following lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/whatever-context-path/**&quot;)\n            .allowedOrigins(&quot;*&quot;) // You would want to configure only the domain of your FE application\n            .allowedMethods(&quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;DELETE&quot;);\n    }\n} \n</code></pre>\n<p>You can read more about this in the following online resources:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-cors\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-cors</a></li>\n<li><a href=\"https://spring.io/guides/gs/rest-service-cors/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/rest-service-cors/</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/CorsRegistry.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/CorsRegistry.html</a></li>\n</ul>\n"}],"owner":{"account_id":10380162,"reputation":13,"user_id":7655224,"display_name":"arturPabjanczyk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1349,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70338935,"answer_count":1,"score":0,"last_activity_date":1639418081,"creation_date":1639382114,"question_id":70331438,"body_markdown":"I am combining two applications, backend (java spring) and frontend (react). I have no communication for the deleteEvenTask request with DELETE http method. The same request when using POST http method, reaches the endpoint. Sending a DELETE query via curl also works. Other requests (getAllEvens with GET method, replaceEvenTask wuth POST method) also work.\r\n```\r\nconst url = &quot;http://localhost:8011/api/evens&quot;;\r\nconst EvenAPI = {\r\n  getAllEvens: async function () {\r\n    const options = {\r\n      method: &#39;GET&#39;\r\n    }\r\n    const response = await window.fetch(url, options);\r\n    return response.json();\r\n  },\r\n  replaceEvenTask: async function (evenTask) {\r\n    const options = {\r\n      method: &#39;POST&#39;,\r\n      body: (JSON.stringify(evenTask)),\r\n    }\r\n    return window.fetch(url, options);\r\n  },\r\n  deleteEvenTask: async function (id) {\r\n    const options = {\r\n      method: &#39;DELETE&#39;\r\n    }\r\n    return window.fetch(url + &#39;/&#39; + id, options);\r\n  }\r\n}\r\n\r\nexport default EvenAPI;\r\n```\r\n```\r\npackage pl.artapps.rest;\r\n\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.DeleteMapping;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport pl.artapps.entity.Issue;\r\nimport pl.artapps.service.IssueService;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/evens&quot;)\r\npublic class EvenController {\r\n\r\n    private static final String ACCESS_CONTROL_ALLOW_ORIGIN = &quot;Access-Control-Allow-Origin&quot;;\r\n    private final IssueService issueService;\r\n\r\n    public EvenController(IssueService issueService) {\r\n        this.issueService = issueService;\r\n    }\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Issue&gt;&gt; getEven() {\r\n        HttpHeaders responseHeaders = new HttpHeaders();\r\n        responseHeaders.set(ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;);\r\n        return ResponseEntity.ok()\r\n                .headers(responseHeaders)\r\n                .body(issueService.findEvens());\r\n    }\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;String&gt; updateEven(@RequestBody String issue) {\r\n        boolean updated = issueService.updateEven(issue);\r\n        HttpHeaders responseHeaders = new HttpHeaders();\r\n        responseHeaders.set(ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;);\r\n        if (updated) {\r\n            return ResponseEntity.ok()\r\n                    .headers(responseHeaders)\r\n                    .body(&quot;updated&quot;);\r\n        } else {\r\n            return ResponseEntity.status(HttpStatus.NOT_ACCEPTABLE)\r\n                    .headers(responseHeaders)\r\n                    .body(&quot;406&quot;);\r\n        }\r\n    }\r\n\r\n    @DeleteMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;String&gt; deleteEven(@PathVariable Long id) {\r\n        boolean deleted = issueService.deleteEven(id);\r\n        HttpHeaders responseHeaders = new HttpHeaders();\r\n        responseHeaders.set(ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;);\r\n        if (deleted) {\r\n            return ResponseEntity.ok()\r\n                    .headers(responseHeaders)\r\n                    .body(&quot;deleted&quot;);\r\n        } else {\r\n            return ResponseEntity.status(HttpStatus.NOT_ACCEPTABLE)\r\n                    .headers(responseHeaders)\r\n                    .body(&quot;406&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nErrors\r\n```\r\nXHR OPTIONS http://localhost:8011/api/evens/219 CORS Missing Allow Origin\r\n\r\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8011/api/evens/219. (Reason: CORS header ‘Access-Control-Allow-Origin’ missing). Status code: 403.\r\n\r\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8011/api/evens/219. (Reason: CORS request did not succeed). Status code: (null).\r\n\r\nXHR DELETE http://localhost:8011/api/evens/219\r\n\r\nUncaught (in promise) TypeError: NetworkError when attempting to fetch resource.\r\n```\r\nThese two simple diffs make it working fine:\r\n```\r\nIndex: src/api/EvenAPI.js\r\nIDEA additional info:\r\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\r\n&lt;+&gt;UTF-8\r\n===================================================================\r\ndiff --git a/src/api/EvenAPI.js b/src/api/EvenAPI.js\r\n--- a/src/api/EvenAPI.js\t(revision ff2dc11b6485d5d55da7b59473f177dd77691b22)\r\n+++ b/src/api/EvenAPI.js\t(date 1639381203588)\r\n@@ -16,7 +16,7 @@\r\n   },\r\n   deleteEvenTask: async function (id) {\r\n     const options = {\r\n-      method: &#39;DELETE&#39;\r\n+      method: &#39;POST&#39;\r\n     }\r\n     return window.fetch(url + &#39;/&#39; + id, options);\r\n   }\r\n```\r\n```\r\nIndex: src/main/java/pl/artapps/rest/EvenController.java\r\nIDEA additional info:\r\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\r\n&lt;+&gt;UTF-8\r\n===================================================================\r\ndiff --git a/src/main/java/pl/artapps/rest/EvenController.java b/src/main/java/pl/artapps/rest/EvenController.java\r\n--- a/src/main/java/pl/artapps/rest/EvenController.java\t(revision ec8c30f5a6aa9283f444fa418103dc3c2f35a584)\r\n+++ b/src/main/java/pl/artapps/rest/EvenController.java\t(date 1639381151968)\r\n@@ -51,7 +51,7 @@\r\n         }\r\n     }\r\n \r\n-    @DeleteMapping(&quot;/{id}&quot;)\r\n+    @PostMapping(&quot;/{id}&quot;)\r\n     public ResponseEntity&lt;String&gt; deleteEven(@PathVariable Long id) {\r\n         boolean deleted = issueService.deleteEven(id);\r\n         HttpHeaders responseHeaders = new HttpHeaders();\r\n```","title":"Why delete method doesn&#39;t work when post method does?","body":"<p>I am combining two applications, backend (java spring) and frontend (react). I have no communication for the deleteEvenTask request with DELETE http method. The same request when using POST http method, reaches the endpoint. Sending a DELETE query via curl also works. Other requests (getAllEvens with GET method, replaceEvenTask wuth POST method) also work.</p>\n<pre><code>const url = &quot;http://localhost:8011/api/evens&quot;;\nconst EvenAPI = {\n  getAllEvens: async function () {\n    const options = {\n      method: 'GET'\n    }\n    const response = await window.fetch(url, options);\n    return response.json();\n  },\n  replaceEvenTask: async function (evenTask) {\n    const options = {\n      method: 'POST',\n      body: (JSON.stringify(evenTask)),\n    }\n    return window.fetch(url, options);\n  },\n  deleteEvenTask: async function (id) {\n    const options = {\n      method: 'DELETE'\n    }\n    return window.fetch(url + '/' + id, options);\n  }\n}\n\nexport default EvenAPI;\n</code></pre>\n<pre><code>package pl.artapps.rest;\n\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport pl.artapps.entity.Issue;\nimport pl.artapps.service.IssueService;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/api/evens&quot;)\npublic class EvenController {\n\n    private static final String ACCESS_CONTROL_ALLOW_ORIGIN = &quot;Access-Control-Allow-Origin&quot;;\n    private final IssueService issueService;\n\n    public EvenController(IssueService issueService) {\n        this.issueService = issueService;\n    }\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Issue&gt;&gt; getEven() {\n        HttpHeaders responseHeaders = new HttpHeaders();\n        responseHeaders.set(ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;);\n        return ResponseEntity.ok()\n                .headers(responseHeaders)\n                .body(issueService.findEvens());\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;String&gt; updateEven(@RequestBody String issue) {\n        boolean updated = issueService.updateEven(issue);\n        HttpHeaders responseHeaders = new HttpHeaders();\n        responseHeaders.set(ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;);\n        if (updated) {\n            return ResponseEntity.ok()\n                    .headers(responseHeaders)\n                    .body(&quot;updated&quot;);\n        } else {\n            return ResponseEntity.status(HttpStatus.NOT_ACCEPTABLE)\n                    .headers(responseHeaders)\n                    .body(&quot;406&quot;);\n        }\n    }\n\n    @DeleteMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;String&gt; deleteEven(@PathVariable Long id) {\n        boolean deleted = issueService.deleteEven(id);\n        HttpHeaders responseHeaders = new HttpHeaders();\n        responseHeaders.set(ACCESS_CONTROL_ALLOW_ORIGIN, &quot;*&quot;);\n        if (deleted) {\n            return ResponseEntity.ok()\n                    .headers(responseHeaders)\n                    .body(&quot;deleted&quot;);\n        } else {\n            return ResponseEntity.status(HttpStatus.NOT_ACCEPTABLE)\n                    .headers(responseHeaders)\n                    .body(&quot;406&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Errors</p>\n<pre><code>XHR OPTIONS http://localhost:8011/api/evens/219 CORS Missing Allow Origin\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8011/api/evens/219. (Reason: CORS header ‘Access-Control-Allow-Origin’ missing). Status code: 403.\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8011/api/evens/219. (Reason: CORS request did not succeed). Status code: (null).\n\nXHR DELETE http://localhost:8011/api/evens/219\n\nUncaught (in promise) TypeError: NetworkError when attempting to fetch resource.\n</code></pre>\n<p>These two simple diffs make it working fine:</p>\n<pre><code>Index: src/api/EvenAPI.js\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n&lt;+&gt;UTF-8\n===================================================================\ndiff --git a/src/api/EvenAPI.js b/src/api/EvenAPI.js\n--- a/src/api/EvenAPI.js    (revision ff2dc11b6485d5d55da7b59473f177dd77691b22)\n+++ b/src/api/EvenAPI.js    (date 1639381203588)\n@@ -16,7 +16,7 @@\n   },\n   deleteEvenTask: async function (id) {\n     const options = {\n-      method: 'DELETE'\n+      method: 'POST'\n     }\n     return window.fetch(url + '/' + id, options);\n   }\n</code></pre>\n<pre><code>Index: src/main/java/pl/artapps/rest/EvenController.java\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n&lt;+&gt;UTF-8\n===================================================================\ndiff --git a/src/main/java/pl/artapps/rest/EvenController.java b/src/main/java/pl/artapps/rest/EvenController.java\n--- a/src/main/java/pl/artapps/rest/EvenController.java (revision ec8c30f5a6aa9283f444fa418103dc3c2f35a584)\n+++ b/src/main/java/pl/artapps/rest/EvenController.java (date 1639381151968)\n@@ -51,7 +51,7 @@\n         }\n     }\n \n-    @DeleteMapping(&quot;/{id}&quot;)\n+    @PostMapping(&quot;/{id}&quot;)\n     public ResponseEntity&lt;String&gt; deleteEven(@PathVariable Long id) {\n         boolean deleted = issueService.deleteEven(id);\n         HttpHeaders responseHeaders = new HttpHeaders();\n</code></pre>\n"},{"tags":["java","try-catch"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":2,"creation_date":1639417586,"post_id":70338815,"comment_id":124338272,"body_markdown":"If `nextInt()` fails, you need to move past the invalid token. If `nextInt()` succeeds, it moves to the next token automatically.","body":"If <code>nextInt()</code> fails, you need to move past the invalid token. If <code>nextInt()</code> succeeds, it moves to the next token automatically."},{"owner":{"account_id":20888762,"reputation":113,"user_id":15344674,"display_name":"Carter Karl Falkenberg"},"score":0,"creation_date":1639417664,"post_id":70338815,"comment_id":124338299,"body_markdown":"Oh, so because nextInt() was an int in the try block, it will not need to move past because it was valid (even though it was invalid by my subjective needs for the program). Thank you","body":"Oh, so because nextInt() was an int in the try block, it will not need to move past because it was valid (even though it was invalid by my subjective needs for the program). Thank you"}],"owner":{"account_id":20888762,"reputation":113,"user_id":15344674,"display_name":"Carter Karl Falkenberg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1639419393,"answer_count":0,"score":0,"last_activity_date":1639417494,"creation_date":1639417494,"question_id":70338815,"body_markdown":"I have the following code, where I need the user to input an int &gt; 0.\r\n\r\n        int rows = 0;\r\n        while(rows &lt;= 0){\r\n            System.out.println(&quot;How many rows are in the matrix?&quot;);\r\n            try{\r\n                rows = scan.nextInt();\r\n                if (rows &lt;= 0){\r\n                    System.out.println(&quot;Invalid input, try again&quot;);\r\n                    //scan.nextLine(); // !A!\r\n                }\r\n            } catch(InputMismatchException e){\r\n                System.out.println(&quot;Invalid input, try again&quot;);\r\n                //scan.nextLine(); // !B!\r\n            } \r\n        }\r\n\r\nWhy does it work without uncommenting A, but does not work without uncommenting B? In other words, why does the catch block need scan.nextLine(), but the try block does not?\r\n\r\nAren&#39;t both of them printing a new line after? Why does the catch block have this requirement?","title":"Why do I need to reset the Scanner in a catch block, but not the try block? (Java)","body":"<p>I have the following code, where I need the user to input an int &gt; 0.</p>\n<pre><code>    int rows = 0;\n    while(rows &lt;= 0){\n        System.out.println(&quot;How many rows are in the matrix?&quot;);\n        try{\n            rows = scan.nextInt();\n            if (rows &lt;= 0){\n                System.out.println(&quot;Invalid input, try again&quot;);\n                //scan.nextLine(); // !A!\n            }\n        } catch(InputMismatchException e){\n            System.out.println(&quot;Invalid input, try again&quot;);\n            //scan.nextLine(); // !B!\n        } \n    }\n</code></pre>\n<p>Why does it work without uncommenting A, but does not work without uncommenting B? In other words, why does the catch block need scan.nextLine(), but the try block does not?</p>\n<p>Aren't both of them printing a new line after? Why does the catch block have this requirement?</p>\n"},{"tags":["java","spring","testing","junit","jhipster"],"comments":[{"owner":{"account_id":33534,"reputation":16098,"user_id":93960,"display_name":"Ga&#235;l Marziou"},"score":0,"creation_date":1639477825,"post_id":70338282,"comment_id":124352902,"body_markdown":"First you must determine which entity is missing from your database, it should be easy under debugger. Then you should review how and when you create these entities, is it before test execution, inside same transaction, using liquibase?","body":"First you must determine which entity is missing from your database, it should be easy under debugger. Then you should review how and when you create these entities, is it before test execution, inside same transaction, using liquibase?"},{"owner":{"account_id":19684890,"reputation":47,"user_id":14411076,"display_name":"Franco Mendoza"},"score":0,"creation_date":1639497203,"post_id":70338282,"comment_id":124360667,"body_markdown":"Yes, it is using Liquibase. The problem was that in my application.yml I was not indicating that I wanted to use the csv files for the integration tests, as I indicated to geco17. Thank you very much Gael. Every time I learn something new from JHipster.","body":"Yes, it is using Liquibase. The problem was that in my application.yml I was not indicating that I wanted to use the csv files for the integration tests, as I indicated to geco17. Thank you very much Gael. Every time I learn something new from JHipster."}],"answers":[{"tags":[],"owner":{"account_id":7582437,"reputation":5222,"user_id":5752737,"accept_rate":100,"display_name":"geco17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639417073,"creation_date":1639417073,"answer_id":70338743,"question_id":70338282,"body_markdown":"I&#39;d suggest modifying your code with a bit of a refactor.\r\n\r\nMove the bulk of the method into a service like so\r\n\r\n    public int findAndSave(long id, long idGrupo) {\r\n\t\tOptional&lt;Persona&gt; persona = personaRepository.findById(id);\r\n\t\tif (!persona.isPresent()) {\r\n            return 1;\r\n\t\t}\r\n        Optional&lt;Grupo&gt; grupo = grupoRepository.findById(idGrupo);\r\n\t\tif (!grupo.isPresent()) {\r\n            return 2;\r\n        }\r\n\t\tPersona persona2 = persona.get();\r\n\t\tGrupo grupo2 = grupo.get();\r\n\t\tpersona2.setGrupo(grupo2);\r\n\t\tpersonaRepository.save(persona2);\r\n\t\treturn 0;\r\n    }\r\n\r\nThen the caller has\r\n\r\n\t@PutMapping(&quot;/personas/{id}/grupo/{idGrupo}&quot;)\r\n\tpublic ResponseEntity&lt;Void&gt; vincularGrupo(@PathVariable Long id, @PathVariable Long idGrupo) {\r\n\t\tlog.debug(&quot;REST request to vincularGrupo : {}&quot;, id);\r\n\t\tint result = vincularService.findAndSave(id, idGrupo);\r\n\t\tif (result == 0) {\r\n\t\t    return ResponseEntity.ok().build();\r\n\t\t}\r\n\t\t// handle 1, 2 or other error codes however you need to\r\n\t\treturn ResponseEntity.notFound().build();\r\n\t}\r\n\t\r\nAnd the test is simplified: you can inject a mock into it for the `vincularService` and test that you&#39;re hitting the endpoint (i.e. it&#39;s not giving you a not found because the url is wrong), and you can test the logic inside vincularService independently of how it&#39;s called (rest or some other way).","title":"Spring JUnit Expected Status 200 but was 404","body":"<p>I'd suggest modifying your code with a bit of a refactor.</p>\n<p>Move the bulk of the method into a service like so</p>\n<pre><code>public int findAndSave(long id, long idGrupo) {\n    Optional&lt;Persona&gt; persona = personaRepository.findById(id);\n    if (!persona.isPresent()) {\n        return 1;\n    }\n    Optional&lt;Grupo&gt; grupo = grupoRepository.findById(idGrupo);\n    if (!grupo.isPresent()) {\n        return 2;\n    }\n    Persona persona2 = persona.get();\n    Grupo grupo2 = grupo.get();\n    persona2.setGrupo(grupo2);\n    personaRepository.save(persona2);\n    return 0;\n}\n</code></pre>\n<p>Then the caller has</p>\n<pre><code>@PutMapping(&quot;/personas/{id}/grupo/{idGrupo}&quot;)\npublic ResponseEntity&lt;Void&gt; vincularGrupo(@PathVariable Long id, @PathVariable Long idGrupo) {\n    log.debug(&quot;REST request to vincularGrupo : {}&quot;, id);\n    int result = vincularService.findAndSave(id, idGrupo);\n    if (result == 0) {\n        return ResponseEntity.ok().build();\n    }\n    // handle 1, 2 or other error codes however you need to\n    return ResponseEntity.notFound().build();\n}\n</code></pre>\n<p>And the test is simplified: you can inject a mock into it for the <code>vincularService</code> and test that you're hitting the endpoint (i.e. it's not giving you a not found because the url is wrong), and you can test the logic inside vincularService independently of how it's called (rest or some other way).</p>\n"}],"owner":{"account_id":19684890,"reputation":47,"user_id":14411076,"display_name":"Franco Mendoza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":737,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639417073,"creation_date":1639414892,"question_id":70338282,"body_markdown":"I&#39;m using JUnit to test the routes of an application. The problem is that I am making a PUT request to a route, which I think should return a Status 200, but in reality it returns 404. I have already tried passing a string also and changing the PathVariable to String, using Long.parseLong() but I still get errors. I would like to know why it returns 404 and what am I doing wrong, when in my database exists the Persona with Id 1 and Grupo with Id 1. By the way, I am using JHipster and I am doing these tests in the PersonaResourceIT that is already defined. Thank you very much, here is the code:\r\n\r\nPersonaResource:\r\n\r\n    @PutMapping(&quot;/personas/{id}/grupo/{idGrupo}&quot;)\r\n    public ResponseEntity&lt;Void&gt; vincularGrupo(@PathVariable Long id, @PathVariable Long idGrupo) {\r\n        log.debug(&quot;REST request to vincularGrupo : {}&quot;, id);\r\n        Optional&lt;Persona&gt; persona = personaRepository.findById(id);\r\n        if (persona.isPresent()) {\r\n            Persona persona2 = persona.get();\r\n            Optional&lt;Grupo&gt; grupo = grupoRepository.findById(idGrupo);\r\n            if (grupo.isPresent()) {\r\n                Grupo grupo2 = grupo.get();\r\n                persona2.setGrupo(grupo2);\r\n                personaRepository.save(persona2);\r\n                return ResponseEntity.ok().build();\r\n            } else {\r\n                return ResponseEntity.notFound().build();\r\n            }\r\n        } else {\r\n            return ResponseEntity.notFound().build();\r\n        }\r\n    }\r\nPersonaResourceIT:\r\n\r\n        @Test\r\n        @Transactional\r\n        void asociarPersonaGrupoSuccess() throws Exception {\r\n            // Long id = (long) 1;\r\n            // Long idGrupo = (long) 1;\r\n            String id = &quot;1&quot;;\r\n            String idGrupo = &quot;1&quot;;\r\n            this.restPersonaMockMvc.perform(put(&quot;/api/personas/{id}/grupo/{idGrupo}&quot;, id, idGrupo))\r\n                                    .andExpect(status().isOk())\r\n                                    .andReturn();\r\n        }\r\nI also tried using Long id = 1L but it did not work. I keep getting a 404 status.","title":"Spring JUnit Expected Status 200 but was 404","body":"<p>I'm using JUnit to test the routes of an application. The problem is that I am making a PUT request to a route, which I think should return a Status 200, but in reality it returns 404. I have already tried passing a string also and changing the PathVariable to String, using Long.parseLong() but I still get errors. I would like to know why it returns 404 and what am I doing wrong, when in my database exists the Persona with Id 1 and Grupo with Id 1. By the way, I am using JHipster and I am doing these tests in the PersonaResourceIT that is already defined. Thank you very much, here is the code:</p>\n<p>PersonaResource:</p>\n<pre><code>@PutMapping(&quot;/personas/{id}/grupo/{idGrupo}&quot;)\npublic ResponseEntity&lt;Void&gt; vincularGrupo(@PathVariable Long id, @PathVariable Long idGrupo) {\n    log.debug(&quot;REST request to vincularGrupo : {}&quot;, id);\n    Optional&lt;Persona&gt; persona = personaRepository.findById(id);\n    if (persona.isPresent()) {\n        Persona persona2 = persona.get();\n        Optional&lt;Grupo&gt; grupo = grupoRepository.findById(idGrupo);\n        if (grupo.isPresent()) {\n            Grupo grupo2 = grupo.get();\n            persona2.setGrupo(grupo2);\n            personaRepository.save(persona2);\n            return ResponseEntity.ok().build();\n        } else {\n            return ResponseEntity.notFound().build();\n        }\n    } else {\n        return ResponseEntity.notFound().build();\n    }\n}\n</code></pre>\n<p>PersonaResourceIT:</p>\n<pre><code>    @Test\n    @Transactional\n    void asociarPersonaGrupoSuccess() throws Exception {\n        // Long id = (long) 1;\n        // Long idGrupo = (long) 1;\n        String id = &quot;1&quot;;\n        String idGrupo = &quot;1&quot;;\n        this.restPersonaMockMvc.perform(put(&quot;/api/personas/{id}/grupo/{idGrupo}&quot;, id, idGrupo))\n                                .andExpect(status().isOk())\n                                .andReturn();\n    }\n</code></pre>\n<p>I also tried using Long id = 1L but it did not work. I keep getting a 404 status.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1411071348,"creation_date":1411071348,"answer_id":25921577,"question_id":25921510,"body_markdown":"SEE http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html#tailMap(K)\r\n\r\n**Note**: several methods return submaps with restricted key ranges. Such ranges are half-open, that is, they include their low endpoint but not their high endpoint (where applicable). If you need a closed range (which includes both endpoints), and the key type allows for calculation of the successor of a given key, merely request the subrange from lowEndpoint to successor(highEndpoint). For example, suppose that m is a map whose keys are strings. The following idiom obtains a view containing all of the key-value mappings in m whose keys are between low and high, inclusive:\r\n\r\n    SortedMap&lt;String, V&gt; sub = m.subMap(low, high+&quot;\\0&quot;);\r\n\r\nA similar technique can be used to generate an open range (which contains neither endpoint). The following idiom obtains a view containing all of the key-value mappings in m whose keys are between low and high, exclusive:\r\n\r\n    SortedMap&lt;String, V&gt; sub = m.subMap(low+&quot;\\0&quot;, high);","title":"TreeMap.putAll giving key out of range","body":"<p>SEE <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html#tailMap(K)\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html#tailMap(K)</a></p>\n\n<p><strong>Note</strong>: several methods return submaps with restricted key ranges. Such ranges are half-open, that is, they include their low endpoint but not their high endpoint (where applicable). If you need a closed range (which includes both endpoints), and the key type allows for calculation of the successor of a given key, merely request the subrange from lowEndpoint to successor(highEndpoint). For example, suppose that m is a map whose keys are strings. The following idiom obtains a view containing all of the key-value mappings in m whose keys are between low and high, inclusive:</p>\n\n<pre><code>SortedMap&lt;String, V&gt; sub = m.subMap(low, high+\"\\0\");\n</code></pre>\n\n<p>A similar technique can be used to generate an open range (which contains neither endpoint). The following idiom obtains a view containing all of the key-value mappings in m whose keys are between low and high, exclusive:</p>\n\n<pre><code>SortedMap&lt;String, V&gt; sub = m.subMap(low+\"\\0\", high);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1888905,"reputation":15353,"user_id":1707520,"accept_rate":100,"display_name":"sol4me"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411071372,"creation_date":1411071372,"answer_id":25921584,"question_id":25921510,"body_markdown":"State from the [docs][1] \r\n\r\n    IllegalArgumentException if fromKey is greater than toKey; or if this map itself has a restricted range, and fromKey or toKey lies outside the bounds of the range\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#subMap(K,%20boolean,%20K,%20boolean)\r\n","title":"TreeMap.putAll giving key out of range","body":"<p>State from the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#subMap(K,%20boolean,%20K,%20boolean)\" rel=\"nofollow\">docs</a> </p>\n\n<pre><code>IllegalArgumentException if fromKey is greater than toKey; or if this map itself has a restricted range, and fromKey or toKey lies outside the bounds of the range\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2772915,"reputation":101,"user_id":16902521,"display_name":"Circulwyrd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639416973,"creation_date":1639416973,"answer_id":70338715,"question_id":25921510,"body_markdown":"I found this problem very awkward, as only soln I could find was to replace code in a function f() returning SortedMap:\r\n \r\nreturn docmap.headMap(nextkey); \r\n\r\nwhere the returned map has a &#39;restricted range&#39; (but there is no easy way to test this via a call that would be nice to have like map.isRangeRestricted()) \r\n\r\nwith code that copy constructs a new map based on the restricted-range map:\r\n\r\nreturn new TreeMap(docmap.headMap(nextkey))\r\n\r\nOtherwise the client code, which is making a call such as\r\n\r\nmmap.putAll(f()), where mmap is non-empty (and in this case also has a restricted range as earlier output from f() also), barfs.\r\n\r\nI also find it counterintuitive that mmap can apparently have a restricted range but not mind doing a putAll as long as the map whose contents are being added does not have a restricted range as well.\r\n ","title":"TreeMap.putAll giving key out of range","body":"<p>I found this problem very awkward, as only soln I could find was to replace code in a function f() returning SortedMap:</p>\n<p>return docmap.headMap(nextkey);</p>\n<p>where the returned map has a 'restricted range' (but there is no easy way to test this via a call that would be nice to have like map.isRangeRestricted())</p>\n<p>with code that copy constructs a new map based on the restricted-range map:</p>\n<p>return new TreeMap(docmap.headMap(nextkey))</p>\n<p>Otherwise the client code, which is making a call such as</p>\n<p>mmap.putAll(f()), where mmap is non-empty (and in this case also has a restricted range as earlier output from f() also), barfs.</p>\n<p>I also find it counterintuitive that mmap can apparently have a restricted range but not mind doing a putAll as long as the map whose contents are being added does not have a restricted range as well.</p>\n"}],"owner":{"account_id":1336729,"reputation":799,"user_id":1279301,"accept_rate":67,"display_name":"Sumit Kumar Saha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":25921577,"answer_count":3,"score":1,"last_activity_date":1639416973,"creation_date":1411071069,"question_id":25921510,"body_markdown":"In my code,\r\n\r\n                SortedMap&lt;Integer, Data&gt; subMap;\r\n\t\t\t\r\n\t\t\t\tsubMap = (db.getDataMap()).tailMap(previousServer);\r\n\t\t\t\t\r\n\t\t\t\tSortedMap&lt;Integer, Data&gt;  temp = (db.getDataMap()).headMap(presentServer);\r\n\t\t\t\t//System.out.println(subMap);\r\n\t\t\t\t//System.out.println(temp);\r\n\t\t\t\tsubMap.putAll(temp);\r\n\t\t\t\r\nsuppose tailMap() returns nothing, so subMap is an empty Map, but temp has few key-value pair.\r\nSo adding temp to subMap via subMap.putAll(temp) is giving me &quot;key out of range&quot;.\r\nBut if i do temp.putAll(subMap) then everything works fine.\r\n\r\nWhat could be the reason here?","title":"TreeMap.putAll giving key out of range","body":"<p>In my code,</p>\n\n<pre><code>            SortedMap&lt;Integer, Data&gt; subMap;\n\n            subMap = (db.getDataMap()).tailMap(previousServer);\n\n            SortedMap&lt;Integer, Data&gt;  temp = (db.getDataMap()).headMap(presentServer);\n            //System.out.println(subMap);\n            //System.out.println(temp);\n            subMap.putAll(temp);\n</code></pre>\n\n<p>suppose tailMap() returns nothing, so subMap is an empty Map, but temp has few key-value pair.\nSo adding temp to subMap via subMap.putAll(temp) is giving me \"key out of range\".\nBut if i do temp.putAll(subMap) then everything works fine.</p>\n\n<p>What could be the reason here?</p>\n"},{"tags":["java","android","postman","retrofit"],"comments":[{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1639336757,"post_id":70325940,"comment_id":124317410,"body_markdown":"Kindly note that Stackoverflow is not a free code converting service. Please show us the Java code you have written so far and you are struggling with. Please add some sampledata as well (keys, plaintext, signature), thanks.","body":"Kindly note that Stackoverflow is not a free code converting service. Please show us the Java code you have written so far and you are struggling with. Please add some sampledata as well (keys, plaintext, signature), thanks."},{"owner":{"account_id":18973743,"reputation":3,"user_id":13846671,"display_name":"Pankaj Patidar"},"score":0,"creation_date":1639417083,"post_id":70325940,"comment_id":124338064,"body_markdown":"@MichaelFehr I added my java code.","body":"@MichaelFehr I added my java code."}],"owner":{"account_id":18973743,"reputation":3,"user_id":13846671,"display_name":"Pankaj Patidar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639416966,"creation_date":1639329813,"question_id":70325940,"body_markdown":"I am unable to do this in my android app using java language. I am using the retrofit library for this but the problem is the signature. unable to generate proper signature which gives me an error. It is working in POSTMAN and getting proper responses. Help me to convert this in JAVA.\r\n\r\nDocumentation of API - https://docs.wazirx.com/#fund-details-user_data\r\n\r\nPOSTMAN PRE-REQUEST SCRIPT\r\nMAIN PARAMS --&gt; BASE_URL, API_KEY, SECRET_KEY, SIGNATURE &amp; TIMESTAMP in miliseconds.\r\n \r\n```   // Variables\r\n    var navigator = {}; //fake a navigator object for the lib\r\n    var window = {}; //fake a window object for the lib\r\n    const privateKey = pm.environment.get(&quot;rsa_private_key&quot;);\r\n    \r\n    const secretKey = pm.environment.get(&quot;secret_key&quot;);\r\n    \r\n    // Set Current Time\r\n    var time = new Date().getTime()\r\n    postman.setEnvironmentVariable(&quot;current_time&quot;, time)\r\n    \r\n    query_a = pm.request.url.query.toObject(true)\r\n    \r\n    // Generate Request Payload\r\n    let query_string_array = []\r\n    Object.keys(query_a).forEach(function(key) {\r\n        if (key == &#39;signature&#39;) { return }\r\n        if (key == &#39;timestamp&#39;) {\r\n            query_string_array.push(key + &quot;=&quot; + time)\r\n        }\r\n        else if (typeof query_a[key] == &quot;string&quot;) {\r\n            query_string_array.push(key + &quot;=&quot; + query_a[key])\r\n        } else {\r\n            query_a[key].forEach(function(value){\r\n                query_string_array.push(key + &quot;=&quot; + value)\r\n            })\r\n        }\r\n    })\r\n    \r\n    const payload = query_string_array.join(&quot;&amp;&quot;)\r\n    console.log(&quot;Request Payload = &quot;, payload)\r\n    \r\n    if(secretKey) {\r\n        const signature = CryptoJS.HmacSHA256(payload, secretKey) + &#39;&#39;\r\n        pm.environment.set(&quot;signature&quot;, signature)\r\n        console.log(&quot;Signature = &quot;+signature);\r\n    } else {\r\n        // Download RSA Library\r\n        pm.sendRequest(pm.environment.get(&quot;rsa_library_js&quot;), function (err, res) {\r\n    \r\n            if (err){\r\n                console.log(&quot;Error: &quot; + err);\r\n            }\r\n            else {\r\n                // Compile &amp; Run RSA Library\r\n                eval(res.text())();\r\n    \r\n                // Sign Payload\r\n                var signatureLib = new KJUR.crypto.Signature({&quot;alg&quot;: &quot;SHA256withRSA&quot;});\r\n                signatureLib.init(privateKey);\r\n                signatureLib.updateString(payload);\r\n                var signatureHash = hex2b64(signatureLib.sign());\r\n                console.log(&quot;Signature = &quot;, signatureHash)\r\n    \r\n                // Assign Values\r\n                pm.environment.set(&quot;signature&quot;, encodeURIComponent(signatureHash, &quot;UTF-8&quot;))\r\n            }\r\n        })\r\n    }\r\n\r\n\r\nJava Code: \r\n\r\n//REQUEST CLASS START --&gt;\r\n\r\npublic class Request {\r\nString baseUrl;\r\n    String apiKey=&quot;1***uR7&quot;;\r\n    String apiSecret=&quot;b1**qVmh&quot;;\r\n    Signature sign = new Signature();\r\n\r\n    public Request(String baseUrl, String apiKey, String apiSecret) {\r\n        this.baseUrl = baseUrl;\r\n        this.apiKey = apiKey;\r\n        this.apiSecret = apiSecret;\r\n    }\r\n\r\n    private void printResponse(HttpURLConnection con) throws IOException {\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(\r\n                con.getInputStream()));\r\n        String inputLine;\r\n        StringBuffer response = new StringBuffer();\r\n\r\n        while ((inputLine = in.readLine()) != null) {\r\n            response.append(inputLine);\r\n        }\r\n        in.close();\r\n\r\n        System.out.println(response.toString());\r\n    }\r\n\r\n    private void printError(HttpURLConnection con) throws IOException {\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(\r\n                con.getErrorStream()));\r\n        String inputLine;\r\n        StringBuffer response = new StringBuffer();\r\n\r\n        while ((inputLine = in.readLine()) != null) {\r\n            response.append(inputLine);\r\n        }\r\n        in.close();\r\n\r\n        System.out.println(response.toString());\r\n    }\r\n\r\n    private String getTimeStamp() {\r\n        long timestamp = System.currentTimeMillis();\r\n        return &quot;timestamp=&quot; + timestamp;\r\n    }\r\n\r\n    //concatenate query parameters\r\n    private String joinQueryParameters(HashMap&lt;String,String&gt; parameters) {\r\n        String urlPath = &quot;&quot;;\r\n        boolean isFirst = true;\r\n\r\n        for (Map.Entry mapElement : parameters.entrySet()) {\r\n            if (isFirst) {\r\n                isFirst = false;\r\n                urlPath += mapElement.getKey() + &quot;=&quot; + mapElement.getValue();\r\n            } else {\r\n                urlPath += &quot;&amp;&quot; + mapElement.getKey() + &quot;=&quot; + mapElement.getValue();\r\n            }\r\n        }\r\n        return urlPath;\r\n    }\r\n\r\n    private void send(URL obj, String httpMethod) throws Exception {\r\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n        if (httpMethod != null) {\r\n            con.setRequestMethod(httpMethod);\r\n        }\r\n        //add API_KEY to header content\r\n        con.setRequestProperty(&quot;X-API-KEY&quot;, apiKey);\r\n\r\n        int responseCode = con.getResponseCode();\r\n        if (responseCode == HttpURLConnection.HTTP_OK) { // success\r\n            printResponse(con);\r\n        } else {\r\n            printError(con);\r\n        }\r\n\r\n    }\r\n\r\n    public void sendPublicRequest(HashMap&lt;String,String&gt; parameters, String urlPath) throws Exception {\r\n        String queryPath = joinQueryParameters(parameters);\r\n        URL obj = new URL(baseUrl + urlPath + &quot;?&quot; + queryPath);\r\n        System.out.println(&quot;url:&quot; + obj.toString());\r\n\r\n        send(obj, null);\r\n    }\r\n\r\n    public void sendSignedRequest(HashMap&lt;String,String&gt; parameters, String urlPath, String httpMethod) throws Exception {\r\n        String queryPath = &quot;&quot;;\r\n        String signature = &quot;&quot;;\r\n\r\n        if (!parameters.isEmpty()) {\r\n            queryPath += joinQueryParameters(parameters) + &quot;&amp;&quot; + getTimeStamp();\r\n        } else {\r\n            queryPath += getTimeStamp();\r\n        }\r\n        try {\r\n            signature = sign.getSignature(queryPath, apiSecret);\r\n        }\r\n        catch (Exception e) {\r\n            System.out.println(&quot;Please Ensure Your Secret Key Is Set Up Correctly! &quot; + e);\r\n            System.exit(0);\r\n        }\r\n        queryPath += &quot;&amp;signature=&quot; + signature;\r\n\r\n        URL obj = new URL(baseUrl + urlPath + &quot;?&quot; + queryPath);\r\n        System.out.println(&quot;url:&quot; + obj.toString());\r\n\r\n        send(obj, httpMethod);\r\n    }\r\n}\r\n\r\n//REQUEST CLASS END --&gt;\r\n\r\n//SPOT CLASS START --&gt;\r\npublic class Spot {\r\n    private static final String API_KEY = System.getenv(&quot;1***57&quot;);\r\n    private static final String API_SECRET = System.getenv(&quot;b****n8&quot;);\r\n    HashMap&lt;String,String&gt; parameters = new HashMap&lt;String,String&gt;();\r\n    Request httpRequest;\r\n\r\n    public Spot() {\r\n        String baseUrl = &quot;https://api.wazirx.com&quot;;\r\n        httpRequest = new Request(baseUrl, API_KEY, API_SECRET);\r\n    }\r\n    public void account() throws Exception {\r\n        httpRequest.sendSignedRequest(parameters, &quot;/sapi/v1/funds&quot;, &quot;GET&quot;);\r\n\r\n    }\r\n}\r\n//SPOT CLASS END--&gt;\r\n\r\n//SIGNATURE CLASS START--&gt;\r\n\r\npublic class Signature {\r\n    final String HMAC_SHA256 = &quot;HmacSHA256&quot;;\r\n\r\n    //convert byte array to hex string\r\n    private String bytesToHex(byte[] bytes) {\r\n        final char[] hexArray = &quot;0123456789abcdef&quot;.toCharArray();\r\n        char[] hexChars = new char[bytes.length * 2];\r\n        for (int j = 0, v; j &lt; bytes.length; j++) {\r\n            v = bytes[j] &amp; 0xFF;\r\n            hexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\r\n            hexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\r\n        }\r\n        return new String(hexChars);\r\n    }\r\n\r\n    public String getSignature(String data, String key) {\r\n        byte[] hmacSha256 = null;\r\n        try {\r\n            SecretKeySpec secretKeySpec = new SecretKeySpec(key.getBytes(), HMAC_SHA256);\r\n            Mac mac = Mac.getInstance(HMAC_SHA256);\r\n            mac.init(secretKeySpec);\r\n            hmacSha256 = mac.doFinal(data.getBytes());\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(&quot;Failed to calculate hmac-sha256&quot;, e);\r\n        }\r\n        return bytesToHex(hmacSha256);\r\n    }\r\n}\r\n//SIGNATURE CLASS END--&gt;\r\n","title":"Facing problem with signature parameter using Java in Android App","body":"<p>I am unable to do this in my android app using java language. I am using the retrofit library for this but the problem is the signature. unable to generate proper signature which gives me an error. It is working in POSTMAN and getting proper responses. Help me to convert this in JAVA.</p>\n<p>Documentation of API - <a href=\"https://docs.wazirx.com/#fund-details-user_data\" rel=\"nofollow noreferrer\">https://docs.wazirx.com/#fund-details-user_data</a></p>\n<p>POSTMAN PRE-REQUEST SCRIPT\nMAIN PARAMS --&gt; BASE_URL, API_KEY, SECRET_KEY, SIGNATURE &amp; TIMESTAMP in miliseconds.</p>\n<pre><code>    var navigator = {}; //fake a navigator object for the lib\n    var window = {}; //fake a window object for the lib\n    const privateKey = pm.environment.get(&quot;rsa_private_key&quot;);\n    \n    const secretKey = pm.environment.get(&quot;secret_key&quot;);\n    \n    // Set Current Time\n    var time = new Date().getTime()\n    postman.setEnvironmentVariable(&quot;current_time&quot;, time)\n    \n    query_a = pm.request.url.query.toObject(true)\n    \n    // Generate Request Payload\n    let query_string_array = []\n    Object.keys(query_a).forEach(function(key) {\n        if (key == 'signature') { return }\n        if (key == 'timestamp') {\n            query_string_array.push(key + &quot;=&quot; + time)\n        }\n        else if (typeof query_a[key] == &quot;string&quot;) {\n            query_string_array.push(key + &quot;=&quot; + query_a[key])\n        } else {\n            query_a[key].forEach(function(value){\n                query_string_array.push(key + &quot;=&quot; + value)\n            })\n        }\n    })\n    \n    const payload = query_string_array.join(&quot;&amp;&quot;)\n    console.log(&quot;Request Payload = &quot;, payload)\n    \n    if(secretKey) {\n        const signature = CryptoJS.HmacSHA256(payload, secretKey) + ''\n        pm.environment.set(&quot;signature&quot;, signature)\n        console.log(&quot;Signature = &quot;+signature);\n    } else {\n        // Download RSA Library\n        pm.sendRequest(pm.environment.get(&quot;rsa_library_js&quot;), function (err, res) {\n    \n            if (err){\n                console.log(&quot;Error: &quot; + err);\n            }\n            else {\n                // Compile &amp; Run RSA Library\n                eval(res.text())();\n    \n                // Sign Payload\n                var signatureLib = new KJUR.crypto.Signature({&quot;alg&quot;: &quot;SHA256withRSA&quot;});\n                signatureLib.init(privateKey);\n                signatureLib.updateString(payload);\n                var signatureHash = hex2b64(signatureLib.sign());\n                console.log(&quot;Signature = &quot;, signatureHash)\n    \n                // Assign Values\n                pm.environment.set(&quot;signature&quot;, encodeURIComponent(signatureHash, &quot;UTF-8&quot;))\n            }\n        })\n    }\n\n\nJava Code: \n\n//REQUEST CLASS START --&gt;\n\npublic class Request {\nString baseUrl;\n    String apiKey=&quot;1***uR7&quot;;\n    String apiSecret=&quot;b1**qVmh&quot;;\n    Signature sign = new Signature();\n\n    public Request(String baseUrl, String apiKey, String apiSecret) {\n        this.baseUrl = baseUrl;\n        this.apiKey = apiKey;\n        this.apiSecret = apiSecret;\n    }\n\n    private void printResponse(HttpURLConnection con) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(\n                con.getInputStream()));\n        String inputLine;\n        StringBuffer response = new StringBuffer();\n\n        while ((inputLine = in.readLine()) != null) {\n            response.append(inputLine);\n        }\n        in.close();\n\n        System.out.println(response.toString());\n    }\n\n    private void printError(HttpURLConnection con) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(\n                con.getErrorStream()));\n        String inputLine;\n        StringBuffer response = new StringBuffer();\n\n        while ((inputLine = in.readLine()) != null) {\n            response.append(inputLine);\n        }\n        in.close();\n\n        System.out.println(response.toString());\n    }\n\n    private String getTimeStamp() {\n        long timestamp = System.currentTimeMillis();\n        return &quot;timestamp=&quot; + timestamp;\n    }\n\n    //concatenate query parameters\n    private String joinQueryParameters(HashMap&lt;String,String&gt; parameters) {\n        String urlPath = &quot;&quot;;\n        boolean isFirst = true;\n\n        for (Map.Entry mapElement : parameters.entrySet()) {\n            if (isFirst) {\n                isFirst = false;\n                urlPath += mapElement.getKey() + &quot;=&quot; + mapElement.getValue();\n            } else {\n                urlPath += &quot;&amp;&quot; + mapElement.getKey() + &quot;=&quot; + mapElement.getValue();\n            }\n        }\n        return urlPath;\n    }\n\n    private void send(URL obj, String httpMethod) throws Exception {\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n        if (httpMethod != null) {\n            con.setRequestMethod(httpMethod);\n        }\n        //add API_KEY to header content\n        con.setRequestProperty(&quot;X-API-KEY&quot;, apiKey);\n\n        int responseCode = con.getResponseCode();\n        if (responseCode == HttpURLConnection.HTTP_OK) { // success\n            printResponse(con);\n        } else {\n            printError(con);\n        }\n\n    }\n\n    public void sendPublicRequest(HashMap&lt;String,String&gt; parameters, String urlPath) throws Exception {\n        String queryPath = joinQueryParameters(parameters);\n        URL obj = new URL(baseUrl + urlPath + &quot;?&quot; + queryPath);\n        System.out.println(&quot;url:&quot; + obj.toString());\n\n        send(obj, null);\n    }\n\n    public void sendSignedRequest(HashMap&lt;String,String&gt; parameters, String urlPath, String httpMethod) throws Exception {\n        String queryPath = &quot;&quot;;\n        String signature = &quot;&quot;;\n\n        if (!parameters.isEmpty()) {\n            queryPath += joinQueryParameters(parameters) + &quot;&amp;&quot; + getTimeStamp();\n        } else {\n            queryPath += getTimeStamp();\n        }\n        try {\n            signature = sign.getSignature(queryPath, apiSecret);\n        }\n        catch (Exception e) {\n            System.out.println(&quot;Please Ensure Your Secret Key Is Set Up Correctly! &quot; + e);\n            System.exit(0);\n        }\n        queryPath += &quot;&amp;signature=&quot; + signature;\n\n        URL obj = new URL(baseUrl + urlPath + &quot;?&quot; + queryPath);\n        System.out.println(&quot;url:&quot; + obj.toString());\n\n        send(obj, httpMethod);\n    }\n}\n\n//REQUEST CLASS END --&gt;\n\n//SPOT CLASS START --&gt;\npublic class Spot {\n    private static final String API_KEY = System.getenv(&quot;1***57&quot;);\n    private static final String API_SECRET = System.getenv(&quot;b****n8&quot;);\n    HashMap&lt;String,String&gt; parameters = new HashMap&lt;String,String&gt;();\n    Request httpRequest;\n\n    public Spot() {\n        String baseUrl = &quot;https://api.wazirx.com&quot;;\n        httpRequest = new Request(baseUrl, API_KEY, API_SECRET);\n    }\n    public void account() throws Exception {\n        httpRequest.sendSignedRequest(parameters, &quot;/sapi/v1/funds&quot;, &quot;GET&quot;);\n\n    }\n}\n//SPOT CLASS END--&gt;\n\n//SIGNATURE CLASS START--&gt;\n\npublic class Signature {\n    final String HMAC_SHA256 = &quot;HmacSHA256&quot;;\n\n    //convert byte array to hex string\n    private String bytesToHex(byte[] bytes) {\n        final char[] hexArray = &quot;0123456789abcdef&quot;.toCharArray();\n        char[] hexChars = new char[bytes.length * 2];\n        for (int j = 0, v; j &lt; bytes.length; j++) {\n            v = bytes[j] &amp; 0xFF;\n            hexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\n            hexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\n        }\n        return new String(hexChars);\n    }\n\n    public String getSignature(String data, String key) {\n        byte[] hmacSha256 = null;\n        try {\n            SecretKeySpec secretKeySpec = new SecretKeySpec(key.getBytes(), HMAC_SHA256);\n            Mac mac = Mac.getInstance(HMAC_SHA256);\n            mac.init(secretKeySpec);\n            hmacSha256 = mac.doFinal(data.getBytes());\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Failed to calculate hmac-sha256&quot;, e);\n        }\n        return bytesToHex(hmacSha256);\n    }\n}\n//SIGNATURE CLASS END--&gt;\n</code></pre>\n"},{"tags":["java","multithreading","java-stream"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1639416788,"creation_date":1639416788,"answer_id":70338679,"question_id":70323454,"body_markdown":"Thread safety does not necessarily imply being accessed by only one thread. The important aspect is that there is no concurrent access, i.e. no access by more than one thread at the same time. If the access by different threads is temporally ordered and this ordering also ensures the necessary memory visibility, which is the responsibility of the caller, it still is a thread safe usage.\r\n\r\n[The `Spliterator` documentation] says:\r\n\r\n&gt; Despite their obvious utility in parallel algorithms, spliterators are not expected to be thread-safe; instead, implementations of parallel algorithms using spliterators should ensure that the spliterator is only used by one thread at a time. This is generally easy to attain via *serial thread-confinement*, which often is a natural consequence of typical parallel algorithms that work by recursive decomposition.\r\n\r\nThe spliterator doesn’t need to be confined to the same thread throughout its lifetime, but there should be a clear handover at the caller’s side ensuring that the old thread stops using it before the new thread starts using it.\r\n\r\nBut the important takeaway is, the spliterator doesn’t need to be thread safe, hence, the iterator wrapped by a spliterator also doesn’t need to be thread safe.\r\n\r\nNote that a typical behavior is splitting and handing over before starting traversal, but since an ordinary `Iterator` doesn’t support splitting, the wrapping spliterator has to iterate and buffer elements to implement splitting. Therefore, the `Iterator` experiences traversal by different threads (but one at a time) when the traversal has not been started from the `Stream` implementation’s perspective.\r\n\r\n---\r\n\r\nThat said, the `lines()` implementation of `BufferedReader` is a bad example which you should not follow. Since it’s centered around a single `readLine()` call, it would be natural to implement `Spliterator` directly instead of implementing a more complicated `Iterator` and have it wrapped via `spliteratorUnknownSize(…)`.\r\n\r\nSince your example is likewise centered around a single `poll()` call, it’s also straight-forward to implement `Spliterator` directly:\r\n\r\n```java\r\nclass SillySpliterator extends Spliterators.AbstractSpliterator&lt;String&gt; {\r\n    private final ArrayDeque&lt;String&gt; src = IntStream.range(1, 10000)\r\n        .mapToObj(Integer::toString).collect(toCollection(ArrayDeque::new));\r\n\r\n    SillySpliterator() {\r\n        super(Long.MAX_VALUE, ORDERED | NONNULL);\r\n    }\r\n\r\n    @Override\r\n    public boolean tryAdvance(Consumer&lt;? super String&gt; action) {\r\n        String nextRecord = src.poll();\r\n        if(nextRecord == null) return false;\r\n        action.accept(nextRecord);\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nDepending on your real life case, you may also pass the actual deque size to the constructor and provide the `SIZED` characteristic.\r\n\r\nThen, you may use it like\r\n\r\n```java\r\nvar result = StreamSupport.stream(new SillySpliterator(), true)\r\n    .map(n -&gt; &quot;value = &quot; + n)\r\n    .collect(toList());\r\n```\r\n\r\n[The `Spliterator` documentation]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Spliterator.html","title":"Do parallel streams treat upstream iterators in a thread safe way?","body":"<p>Thread safety does not necessarily imply being accessed by only one thread. The important aspect is that there is no concurrent access, i.e. no access by more than one thread at the same time. If the access by different threads is temporally ordered and this ordering also ensures the necessary memory visibility, which is the responsibility of the caller, it still is a thread safe usage.</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Spliterator.html\" rel=\"nofollow noreferrer\">The <code>Spliterator</code> documentation</a> says:</p>\n<blockquote>\n<p>Despite their obvious utility in parallel algorithms, spliterators are not expected to be thread-safe; instead, implementations of parallel algorithms using spliterators should ensure that the spliterator is only used by one thread at a time. This is generally easy to attain via <em>serial thread-confinement</em>, which often is a natural consequence of typical parallel algorithms that work by recursive decomposition.</p>\n</blockquote>\n<p>The spliterator doesn’t need to be confined to the same thread throughout its lifetime, but there should be a clear handover at the caller’s side ensuring that the old thread stops using it before the new thread starts using it.</p>\n<p>But the important takeaway is, the spliterator doesn’t need to be thread safe, hence, the iterator wrapped by a spliterator also doesn’t need to be thread safe.</p>\n<p>Note that a typical behavior is splitting and handing over before starting traversal, but since an ordinary <code>Iterator</code> doesn’t support splitting, the wrapping spliterator has to iterate and buffer elements to implement splitting. Therefore, the <code>Iterator</code> experiences traversal by different threads (but one at a time) when the traversal has not been started from the <code>Stream</code> implementation’s perspective.</p>\n<hr />\n<p>That said, the <code>lines()</code> implementation of <code>BufferedReader</code> is a bad example which you should not follow. Since it’s centered around a single <code>readLine()</code> call, it would be natural to implement <code>Spliterator</code> directly instead of implementing a more complicated <code>Iterator</code> and have it wrapped via <code>spliteratorUnknownSize(…)</code>.</p>\n<p>Since your example is likewise centered around a single <code>poll()</code> call, it’s also straight-forward to implement <code>Spliterator</code> directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SillySpliterator extends Spliterators.AbstractSpliterator&lt;String&gt; {\n    private final ArrayDeque&lt;String&gt; src = IntStream.range(1, 10000)\n        .mapToObj(Integer::toString).collect(toCollection(ArrayDeque::new));\n\n    SillySpliterator() {\n        super(Long.MAX_VALUE, ORDERED | NONNULL);\n    }\n\n    @Override\n    public boolean tryAdvance(Consumer&lt;? super String&gt; action) {\n        String nextRecord = src.poll();\n        if(nextRecord == null) return false;\n        action.accept(nextRecord);\n        return true;\n    }\n}\n</code></pre>\n<p>Depending on your real life case, you may also pass the actual deque size to the constructor and provide the <code>SIZED</code> characteristic.</p>\n<p>Then, you may use it like</p>\n<pre class=\"lang-java prettyprint-override\"><code>var result = StreamSupport.stream(new SillySpliterator(), true)\n    .map(n -&gt; &quot;value = &quot; + n)\n    .collect(toList());\n</code></pre>\n"}],"owner":{"account_id":47296,"reputation":27247,"user_id":140037,"accept_rate":74,"display_name":"Brett Ryan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":70338679,"answer_count":1,"score":9,"last_activity_date":1639416788,"creation_date":1639311460,"question_id":70323454,"body_markdown":"Today I was using a stream that was performing a `parallel()` operation after a map, however; the underlying source is an iterator which is not thread safe which is similar to the [BufferedReader.lines][1] implementation.\r\n\r\nI originally thought that trySplit would be called on the created thread, however; I observed that the accesses to the iterator have come from multiple threads.\r\n\r\nBy example, the following silly iterator implementation is just setup with enough elements to cause splitting and also keeps track of the unique threads that accessed the `hasNext` method.\r\n\r\n    class SillyIterator implements Iterator&lt;String&gt; {\r\n    \r\n        private final ArrayDeque&lt;String&gt; src =\r\n            IntStream.range(1, 10000)\r\n                .mapToObj(Integer::toString)\r\n                .collect(toCollection(ArrayDeque::new));\r\n        private Map&lt;String, String&gt; ts = new ConcurrentHashMap&lt;&gt;();\r\n        public Set&lt;String&gt; threads() { return ts.keySet(); }\r\n        private String nextRecord = null;\r\n    \r\n        @Override\r\n        public boolean hasNext() {\r\n            var n = Thread.currentThread().getName();\r\n            ts.put(n, n);\r\n            if (nextRecord != null) {\r\n                return true;\r\n            } else {\r\n                nextRecord = src.poll();\r\n                return nextRecord != null;\r\n            }\r\n        }\r\n        @Override\r\n        public String next() {\r\n            if (nextRecord != null || hasNext()) {\r\n                var rec = nextRecord;\r\n                nextRecord = null;\r\n                return rec;\r\n            }\r\n            throw new NoSuchElementException();\r\n        }\r\n\r\n    }\r\n\r\nUsing this to create a stream as follows:\r\n\r\n    var iter = new SillyIterator();\r\n    StreamSupport\r\n        .stream(Spliterators.spliteratorUnknownSize(\r\n            iter, Spliterator.ORDERED | Spliterator.NONNULL\r\n        ), false)\r\n        .map(n -&gt; &quot;value = &quot; + n)\r\n        .parallel()\r\n        .collect(toList());\r\n\r\n    System.out.println(iter.threads());\r\n\r\nThis on my system output the two fork join threads as well as the main thread, which kind of scared me.\r\n\r\n    [ForkJoinPool.commonPool-worker-1, ForkJoinPool.commonPool-worker-2, main]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedReader.html#lines()","title":"Do parallel streams treat upstream iterators in a thread safe way?","body":"<p>Today I was using a stream that was performing a <code>parallel()</code> operation after a map, however; the underlying source is an iterator which is not thread safe which is similar to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedReader.html#lines()\" rel=\"noreferrer\">BufferedReader.lines</a> implementation.</p>\n<p>I originally thought that trySplit would be called on the created thread, however; I observed that the accesses to the iterator have come from multiple threads.</p>\n<p>By example, the following silly iterator implementation is just setup with enough elements to cause splitting and also keeps track of the unique threads that accessed the <code>hasNext</code> method.</p>\n<pre><code>class SillyIterator implements Iterator&lt;String&gt; {\n\n    private final ArrayDeque&lt;String&gt; src =\n        IntStream.range(1, 10000)\n            .mapToObj(Integer::toString)\n            .collect(toCollection(ArrayDeque::new));\n    private Map&lt;String, String&gt; ts = new ConcurrentHashMap&lt;&gt;();\n    public Set&lt;String&gt; threads() { return ts.keySet(); }\n    private String nextRecord = null;\n\n    @Override\n    public boolean hasNext() {\n        var n = Thread.currentThread().getName();\n        ts.put(n, n);\n        if (nextRecord != null) {\n            return true;\n        } else {\n            nextRecord = src.poll();\n            return nextRecord != null;\n        }\n    }\n    @Override\n    public String next() {\n        if (nextRecord != null || hasNext()) {\n            var rec = nextRecord;\n            nextRecord = null;\n            return rec;\n        }\n        throw new NoSuchElementException();\n    }\n\n}\n</code></pre>\n<p>Using this to create a stream as follows:</p>\n<pre><code>var iter = new SillyIterator();\nStreamSupport\n    .stream(Spliterators.spliteratorUnknownSize(\n        iter, Spliterator.ORDERED | Spliterator.NONNULL\n    ), false)\n    .map(n -&gt; &quot;value = &quot; + n)\n    .parallel()\n    .collect(toList());\n\nSystem.out.println(iter.threads());\n</code></pre>\n<p>This on my system output the two fork join threads as well as the main thread, which kind of scared me.</p>\n<pre><code>[ForkJoinPool.commonPool-worker-1, ForkJoinPool.commonPool-worker-2, main]\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1320240105,"post_id":7980364,"comment_id":9760405,"body_markdown":"It is impossible for any package to meet your *stated* requirement because it is so vague. Essentially, business hours are determined by a set of &quot;business rules&quot;. What kinds of business rules are you interested in?","body":"It is impossible for any package to meet your <i>stated</i> requirement because it is so vague. Essentially, business hours are determined by a set of &quot;business rules&quot;. What kinds of business rules are you interested in?"}],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1320237717,"creation_date":1320237295,"answer_id":7980393,"question_id":7980364,"body_markdown":"You can create a class by using `Calendar` and see if its working day and working hour now.\r\n\r\n    class BusinessHour{\r\n    \r\n    public void isOpenNow(){\r\n      Calendar calNow = Calendar.getInstance();\r\n        //check the rules for example , if day is MOn-FRi and time is 9-18.\r\n      }\r\n    }\r\n\r\nI don&#39;t think there would be a ready made because each business has its own specification, You could probably make if configurable so that it fixes for all the business, provide the conf parameter externally to the class for better design","title":"Which is the best way to represent the business opening hours in a Java object?","body":"<p>You can create a class by using <code>Calendar</code> and see if its working day and working hour now.</p>\n\n<pre><code>class BusinessHour{\n\npublic void isOpenNow(){\n  Calendar calNow = Calendar.getInstance();\n    //check the rules for example , if day is MOn-FRi and time is 9-18.\n  }\n}\n</code></pre>\n\n<p>I don't think there would be a ready made because each business has its own specification, You could probably make if configurable so that it fixes for all the business, provide the conf parameter externally to the class for better design</p>\n"},{"tags":[],"owner":{"account_id":74486,"reputation":105478,"user_id":214010,"accept_rate":83,"display_name":"mikera"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1320238275,"creation_date":1320238275,"answer_id":7980597,"question_id":7980364,"body_markdown":"There probably isn&#39;t a package that already implement your exact business logic. \r\n\r\nFor example, do you need to override the standard opening days on certain days of the year, e.g. closures for special events? What about public holidays, do you open for these?\r\n\r\nMy simple suggested solution would be:\r\n\r\n 1. Create a database table with (day, opening time, closing time) as fields \r\n 2. Create a function that take a day and time as parameters, and\r\n    looks up in the database table to see if is within the\r\n    opening/closing times for  given day \r\n 3. Provide an easy way for\r\n    business users to update the open/closing times after pre-populating\r\n    them with your standard times\r\n\r\n","title":"Which is the best way to represent the business opening hours in a Java object?","body":"<p>There probably isn't a package that already implement your exact business logic. </p>\n\n<p>For example, do you need to override the standard opening days on certain days of the year, e.g. closures for special events? What about public holidays, do you open for these?</p>\n\n<p>My simple suggested solution would be:</p>\n\n<ol>\n<li>Create a database table with (day, opening time, closing time) as fields </li>\n<li>Create a function that take a day and time as parameters, and\nlooks up in the database table to see if is within the\nopening/closing times for  given day </li>\n<li>Provide an easy way for\nbusiness users to update the open/closing times after pre-populating\nthem with your standard times</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":459717,"reputation":3789,"user_id":860350,"display_name":"vladaman"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1346672112,"creation_date":1346672112,"answer_id":12247046,"question_id":7980364,"body_markdown":"I use following Object to store OpeningHours in HashSet&lt;OpeningHours&gt;. Example bellow can be easily simplified using seconds from Midnight instead of &quot;800&quot; or &quot;1600&quot; for hours but I like it this way.\r\n\r\n&lt;!-- language:java --&gt;\r\n\r\n    public class OpeningHours {\r\n      public enum DAY {\r\n        MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY\r\n      }\r\n\r\n\tpublic OpeningHours(DAY day, Integer from, Integer to) {\r\n\t\tthis.day = day;\r\n\t\tthis.from = from; // format time using 800 for 8:00am or 2300 for 23:00\r\n\t\tthis.to = to;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;OpeningHours [day=&quot; + day + &quot;, from=&quot; + from + &quot;, to=&quot; + to + &quot;, isAllDay=&quot; + isAllDay + &quot;]&quot;;\r\n\t}\r\n\r\n\tpublic OpeningHours() {\r\n\r\n\t}\r\n\r\n\tpublic DAY day;\r\n\tpublic Integer from;\r\n\tpublic Integer to;\r\n\tpublic boolean isAllDay = false;\r\n\r\n\tpublic void isOpenx(DateTime start) {\r\n\r\n\t}\r\n\r\n\tpublic boolean isOpen(DateTime start) {\r\n\r\n\t\tif (day.ordinal() != start.getDayOfWeek() - 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (isAllDay)\r\n\t\t\treturn true;\r\n\r\n\t\tString f = String.format(&quot;%04d&quot;, from);\r\n\t\tString t = String.format(&quot;%04d&quot;, to);\r\n\r\n\t\tInteger fh = Integer.valueOf(f.substring(0, 2));\r\n\t\tInteger fm = Integer.valueOf(f.substring(2));\r\n\r\n\t\tInteger th = Integer.valueOf(t.substring(0, 2));\r\n\t\tInteger tm = Integer.valueOf(t.substring(2));\r\n\r\n\t\tDateTime intStart = start.withHourOfDay(fh).withMinuteOfHour(fm);\r\n\t\tDateTime intEnd = start.withHourOfDay(th).withMinuteOfHour(tm);\r\n\r\n\t\tif (intStart.equals(start) || intEnd.equals(start)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (intStart.isBefore(start) &amp;&amp; intEnd.isAfter(start)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n    }\r\n\r\n\r\n&lt;!-- language:java --&gt;\r\n\r\n    HashSet&lt;OpeningHours&gt; hours = new HashSet&lt;OpeningHours&gt;();\r\n    hours.add(new OpeningHours(OpeningHours.DAY.MONDAY, 800, 1200));\r\n    hours.add(new OpeningHours(OpeningHours.DAY.MONDAY, 1230, 1600));\r\n\r\n\r\n    DateTime dateToCheck = new DateTime(2012, 9, 4, 8, 00, 0, 0);\r\n\r\n    for (OpeningHours item : hours) {\r\n      boolean isOpen = item.isOpen(dateToCheck );\r\n      if (isOpen){\r\n        System.out.println(&quot;Is Open!&quot;);\r\n      }\r\n    }","title":"Which is the best way to represent the business opening hours in a Java object?","body":"<p>I use following Object to store OpeningHours in HashSet. Example bellow can be easily simplified using seconds from Midnight instead of \"800\" or \"1600\" for hours but I like it this way.</p>\n\n\n\n<pre><code>public class OpeningHours {\n  public enum DAY {\n    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY\n  }\n\npublic OpeningHours(DAY day, Integer from, Integer to) {\n    this.day = day;\n    this.from = from; // format time using 800 for 8:00am or 2300 for 23:00\n    this.to = to;\n}\n\n@Override\npublic String toString() {\n    return \"OpeningHours [day=\" + day + \", from=\" + from + \", to=\" + to + \", isAllDay=\" + isAllDay + \"]\";\n}\n\npublic OpeningHours() {\n\n}\n\npublic DAY day;\npublic Integer from;\npublic Integer to;\npublic boolean isAllDay = false;\n\npublic void isOpenx(DateTime start) {\n\n}\n\npublic boolean isOpen(DateTime start) {\n\n    if (day.ordinal() != start.getDayOfWeek() - 1) {\n        return false;\n    }\n\n    if (isAllDay)\n        return true;\n\n    String f = String.format(\"%04d\", from);\n    String t = String.format(\"%04d\", to);\n\n    Integer fh = Integer.valueOf(f.substring(0, 2));\n    Integer fm = Integer.valueOf(f.substring(2));\n\n    Integer th = Integer.valueOf(t.substring(0, 2));\n    Integer tm = Integer.valueOf(t.substring(2));\n\n    DateTime intStart = start.withHourOfDay(fh).withMinuteOfHour(fm);\n    DateTime intEnd = start.withHourOfDay(th).withMinuteOfHour(tm);\n\n    if (intStart.equals(start) || intEnd.equals(start)) {\n        return true;\n    }\n    if (intStart.isBefore(start) &amp;&amp; intEnd.isAfter(start)) {\n        return true;\n    }\n\n    return false;\n\n}\n}\n</code></pre>\n\n\n\n<pre><code>HashSet&lt;OpeningHours&gt; hours = new HashSet&lt;OpeningHours&gt;();\nhours.add(new OpeningHours(OpeningHours.DAY.MONDAY, 800, 1200));\nhours.add(new OpeningHours(OpeningHours.DAY.MONDAY, 1230, 1600));\n\n\nDateTime dateToCheck = new DateTime(2012, 9, 4, 8, 00, 0, 0);\n\nfor (OpeningHours item : hours) {\n  boolean isOpen = item.isOpen(dateToCheck );\n  if (isOpen){\n    System.out.println(\"Is Open!\");\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5071035,"reputation":5785,"user_id":4069782,"accept_rate":75,"display_name":"Emmanuel Osimosu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1475225262,"creation_date":1475225262,"answer_id":39787336,"question_id":7980364,"body_markdown":"In Java 8, you can represent it as a set of openingTimes objects:\r\n\r\nThe set:\r\n\r\n     Set&lt;OpeningTimes&gt; openingTimes = new HashSet&lt;&gt;();\r\n\r\nOpeningTimes\r\n\r\n    import java.time.DayOfWeek;\r\n    import java.time.LocalTime;\r\n    \r\n    public class OpeningTimes {\r\n        private DayOfWeek dayOfWeek;\r\n        private LocalTime from;\r\n        private LocalTime to;\r\n    \r\n        public DayOfWeek getDayOfWeek() {\r\n            return dayOfWeek;\r\n        }\r\n    \r\n        public void setDayOfWeek(DayOfWeek dayOfWeek) {\r\n            this.dayOfWeek = dayOfWeek;\r\n        }\r\n    \r\n        public LocalTime getFrom() {\r\n            return from;\r\n        }\r\n    \r\n        public void setFrom(LocalTime from) {\r\n            this.from = from;\r\n        }\r\n    \r\n        public LocalTime getTo() {\r\n            return to;\r\n        }\r\n    \r\n        public void setTo(LocalTime to) {\r\n            this.to = to;\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Which is the best way to represent the business opening hours in a Java object?","body":"<p>In Java 8, you can represent it as a set of openingTimes objects:</p>\n\n<p>The set:</p>\n\n<pre><code> Set&lt;OpeningTimes&gt; openingTimes = new HashSet&lt;&gt;();\n</code></pre>\n\n<p>OpeningTimes</p>\n\n<pre><code>import java.time.DayOfWeek;\nimport java.time.LocalTime;\n\npublic class OpeningTimes {\n    private DayOfWeek dayOfWeek;\n    private LocalTime from;\n    private LocalTime to;\n\n    public DayOfWeek getDayOfWeek() {\n        return dayOfWeek;\n    }\n\n    public void setDayOfWeek(DayOfWeek dayOfWeek) {\n        this.dayOfWeek = dayOfWeek;\n    }\n\n    public LocalTime getFrom() {\n        return from;\n    }\n\n    public void setFrom(LocalTime from) {\n        this.from = from;\n    }\n\n    public LocalTime getTo() {\n        return to;\n    }\n\n    public void setTo(LocalTime to) {\n        this.to = to;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6717294,"reputation":437,"user_id":5178726,"display_name":"Aron Hoogeveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639416728,"creation_date":1639416728,"answer_id":70338669,"question_id":7980364,"body_markdown":"The following class also takes into account the case when a thing (e.g. a building) is not open at all on the specified day.\r\n\r\n```java\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport java.time.LocalTime;\r\nimport java.util.Objects;\r\n\r\n/**\r\n * {@code OpeningHours} represents the opening hours of a single day of a &quot;thing&quot;\r\n * (e.g. a building). The opening- and closing hour are independent of timezones.\r\n */\r\npublic class OpeningHours {\r\n    private boolean opensToday;\r\n    private LocalTime openingHour;\r\n    private LocalTime closingHour;\r\n\r\n    /**\r\n     * A reusable {@code OpeningHours} that is always closed.\r\n     */\r\n    private static OpeningHours closedInstance = new OpeningHours();\r\n\r\n    /**\r\n     * Constructs a new {@code OpeningHours} for a thing that does not open at this specific day.\r\n     */\r\n    public OpeningHours() {\r\n        opensToday = false;\r\n    }\r\n\r\n    /**\r\n     * Constructs a new {@code OpeningHours} for a thing that does open today.\r\n     *\r\n     * @param openingHour the opening hour of the thing, inclusive. Must be strictly less than the closingHour\r\n     * @param closingHour the closing hour of the thing, exclusive. Must be strictly more than the openingHour\r\n     */\r\n    public OpeningHours(@NotNull LocalTime openingHour, @NotNull LocalTime closingHour) {\r\n        Objects.requireNonNull(openingHour);\r\n        Objects.requireNonNull(closingHour);\r\n\r\n        if (openingHour.compareTo(closingHour) &gt;= 0)\r\n            throw new IllegalArgumentException(&quot;the openingHour must be strictly less than the closingHour&quot;);\r\n\r\n        this.opensToday = true;\r\n        this.openingHour = openingHour;\r\n        this.closingHour = closingHour;\r\n    }\r\n\r\n    /**\r\n     * Returns whether the thing this {@code OpeningHours} belongs to will open today.\r\n     *\r\n     * @return the value of {@link #opensToday}\r\n     */\r\n    public boolean opensToday() {\r\n        return opensToday;\r\n    }\r\n\r\n    /**\r\n     * Returns whether the provided {@code time} is within the opening hours. More specifically this method returns\r\n     * {@code true} when {@code time} is equal to or greater than {@code this#getOpeningHour()} and strictly less\r\n     * than {@code this.getClosingHour()}.\r\n     *\r\n     * @param time the time at wh\r\n     * @return {@code true} if {@code time} is greater than or equal to {@link #openingHour} and strictly less than\r\n     *         {@link #closingHour}.\r\n     */\r\n    public boolean isOpen(LocalTime time) {\r\n        if (!opensToday)\r\n            return false;\r\n        return (openingHour.compareTo(time) &lt;= 0) &amp;&amp; (closingHour.compareTo(time) &gt; 0) ;\r\n    }\r\n\r\n    /**\r\n     * Returns whether the current time is within the opening hours.\r\n     * \r\n     * @see #isOpen(LocalTime)\r\n     */\r\n    public boolean isOpen() {\r\n        return this.isOpen(LocalTime.now());\r\n    }\r\n\r\n\r\n    /**\r\n     * @return an {@code OpeningHours} for a thing that is permanently closed on this day.\r\n     */\r\n    public OpeningHours getClosedInstance() {\r\n        return closedInstance;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n\r\n        OpeningHours that = (OpeningHours) o;\r\n\r\n        if (opensToday != that.opensToday) return false;\r\n        if (!Objects.equals(openingHour, that.openingHour)) return false;\r\n        return Objects.equals(closingHour, that.closingHour);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        int result = (opensToday ? 1 : 0);\r\n        result = 31 * result + (openingHour != null ? openingHour.hashCode() : 0);\r\n        result = 31 * result + (closingHour != null ? closingHour.hashCode() : 0);\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;OpeningHours{&quot; +\r\n                &quot;opensToday=&quot; + opensToday +\r\n                &quot;, openingHour=&quot; + openingHour +\r\n                &quot;, closingHour=&quot; + closingHour +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```","title":"Which is the best way to represent the business opening hours in a Java object?","body":"<p>The following class also takes into account the case when a thing (e.g. a building) is not open at all on the specified day.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jetbrains.annotations.NotNull;\n\nimport java.time.LocalTime;\nimport java.util.Objects;\n\n/**\n * {@code OpeningHours} represents the opening hours of a single day of a &quot;thing&quot;\n * (e.g. a building). The opening- and closing hour are independent of timezones.\n */\npublic class OpeningHours {\n    private boolean opensToday;\n    private LocalTime openingHour;\n    private LocalTime closingHour;\n\n    /**\n     * A reusable {@code OpeningHours} that is always closed.\n     */\n    private static OpeningHours closedInstance = new OpeningHours();\n\n    /**\n     * Constructs a new {@code OpeningHours} for a thing that does not open at this specific day.\n     */\n    public OpeningHours() {\n        opensToday = false;\n    }\n\n    /**\n     * Constructs a new {@code OpeningHours} for a thing that does open today.\n     *\n     * @param openingHour the opening hour of the thing, inclusive. Must be strictly less than the closingHour\n     * @param closingHour the closing hour of the thing, exclusive. Must be strictly more than the openingHour\n     */\n    public OpeningHours(@NotNull LocalTime openingHour, @NotNull LocalTime closingHour) {\n        Objects.requireNonNull(openingHour);\n        Objects.requireNonNull(closingHour);\n\n        if (openingHour.compareTo(closingHour) &gt;= 0)\n            throw new IllegalArgumentException(&quot;the openingHour must be strictly less than the closingHour&quot;);\n\n        this.opensToday = true;\n        this.openingHour = openingHour;\n        this.closingHour = closingHour;\n    }\n\n    /**\n     * Returns whether the thing this {@code OpeningHours} belongs to will open today.\n     *\n     * @return the value of {@link #opensToday}\n     */\n    public boolean opensToday() {\n        return opensToday;\n    }\n\n    /**\n     * Returns whether the provided {@code time} is within the opening hours. More specifically this method returns\n     * {@code true} when {@code time} is equal to or greater than {@code this#getOpeningHour()} and strictly less\n     * than {@code this.getClosingHour()}.\n     *\n     * @param time the time at wh\n     * @return {@code true} if {@code time} is greater than or equal to {@link #openingHour} and strictly less than\n     *         {@link #closingHour}.\n     */\n    public boolean isOpen(LocalTime time) {\n        if (!opensToday)\n            return false;\n        return (openingHour.compareTo(time) &lt;= 0) &amp;&amp; (closingHour.compareTo(time) &gt; 0) ;\n    }\n\n    /**\n     * Returns whether the current time is within the opening hours.\n     * \n     * @see #isOpen(LocalTime)\n     */\n    public boolean isOpen() {\n        return this.isOpen(LocalTime.now());\n    }\n\n\n    /**\n     * @return an {@code OpeningHours} for a thing that is permanently closed on this day.\n     */\n    public OpeningHours getClosedInstance() {\n        return closedInstance;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        OpeningHours that = (OpeningHours) o;\n\n        if (opensToday != that.opensToday) return false;\n        if (!Objects.equals(openingHour, that.openingHour)) return false;\n        return Objects.equals(closingHour, that.closingHour);\n    }\n\n    @Override\n    public int hashCode() {\n        int result = (opensToday ? 1 : 0);\n        result = 31 * result + (openingHour != null ? openingHour.hashCode() : 0);\n        result = 31 * result + (closingHour != null ? closingHour.hashCode() : 0);\n        return result;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;OpeningHours{&quot; +\n                &quot;opensToday=&quot; + opensToday +\n                &quot;, openingHour=&quot; + openingHour +\n                &quot;, closingHour=&quot; + closingHour +\n                '}';\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":537940,"reputation":158,"user_id":906201,"accept_rate":50,"display_name":"Igor Toma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7042,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":5,"score":11,"last_activity_date":1639416728,"creation_date":1320237199,"question_id":7980364,"body_markdown":"I need to represent opening hours, and a method which returns true/false for a certain day and time.\r\nIs there any package which has this functionality already?\r\n\r\nEdit: Basically I would need to construct an object with data out of db or a file, then perform a basic check against the object, like if it&#39;s closed at a certain moment.\r\n\r\nThe problem was that some businesses will have working hours after 00:00 so it overlaps the next day.\r\nIn this case I figure out that the object should be able to support multiple time frames per day, also to cover lunch brakes.\r\n\r\n","title":"Which is the best way to represent the business opening hours in a Java object?","body":"<p>I need to represent opening hours, and a method which returns true/false for a certain day and time.\nIs there any package which has this functionality already?</p>\n\n<p>Edit: Basically I would need to construct an object with data out of db or a file, then perform a basic check against the object, like if it's closed at a certain moment.</p>\n\n<p>The problem was that some businesses will have working hours after 00:00 so it overlaps the next day.\nIn this case I figure out that the object should be able to support multiple time frames per day, also to cover lunch brakes.</p>\n"},{"tags":["java","apache","log4j","log4j2"],"comments":[{"owner":{"account_id":1250857,"reputation":428,"user_id":1211304,"accept_rate":74,"display_name":"nandini"},"score":0,"creation_date":1461910616,"post_id":36930807,"comment_id":61421617,"body_markdown":"Why is it? I wan to know what happens when we parametrize. I don&#39;t seem to find the code for the parametrization one. Also, If for log4j logger.info allows only object and throwable. not multiple arguments.","body":"Why is it? I wan to know what happens when we parametrize. I don&#39;t seem to find the code for the parametrization one. Also, If for log4j logger.info allows only object and throwable. not multiple arguments."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1461910953,"post_id":36930807,"comment_id":61421794,"body_markdown":"Well, instead of using an ancient logging framework like `log4j`, use a better one (or preferably a logging facade like `SLF4J`).","body":"Well, instead of using an ancient logging framework like <code>log4j</code>, use a better one (or preferably a logging facade like <code>SLF4J</code>)."},{"owner":{"account_id":1250857,"reputation":428,"user_id":1211304,"accept_rate":74,"display_name":"nandini"},"score":0,"creation_date":1461911340,"post_id":36930807,"comment_id":61422009,"body_markdown":"Yeah.. I was editing someone else&#39;s code. They already had log4j. I will change it. Thanks. I knew parametrization is better, but didn&#39;t know the reason. Your answer explains that. Thanks @kayaman :)","body":"Yeah.. I was editing someone else&#39;s code. They already had log4j. I will change it. Thanks. I knew parametrization is better, but didn&#39;t know the reason. Your answer explains that. Thanks @kayaman :)"}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639416384,"creation_date":1461910862,"answer_id":36930920,"question_id":36930807,"body_markdown":"Even if there were nothing else, the additional [StringBuilder shenanigans][1] that happen when using `+` would make using parameters the obvious choice.\r\n\r\nNot to mention that when concatenating the values, the `toString()` method of all the parameters will be called even if the logging level isn&#39;t enabled, meaning that you&#39;re wasting CPU to build a String that will never be logged.\r\nThis would have an (albeit minor) effect if there are lots of `debug()` statements, when DEBUG level is usually disabled in production environments.\r\n\r\n  [1]: https://stackoverflow.com/questions/47605/string-concatenation-concat-vs-operator","title":"logger usage, is parameterization better or using + to add arguments?","body":"<p>Even if there were nothing else, the additional <a href=\"https://stackoverflow.com/questions/47605/string-concatenation-concat-vs-operator\">StringBuilder shenanigans</a> that happen when using <code>+</code> would make using parameters the obvious choice.</p>\n<p>Not to mention that when concatenating the values, the <code>toString()</code> method of all the parameters will be called even if the logging level isn't enabled, meaning that you're wasting CPU to build a String that will never be logged.\nThis would have an (albeit minor) effect if there are lots of <code>debug()</code> statements, when DEBUG level is usually disabled in production environments.</p>\n"},{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467294602,"creation_date":1461927140,"answer_id":36936437,"question_id":36930807,"body_markdown":"[Parameterized messages][1] avoid formatting the text until Log4j is certain that the message will be logged. This allows you to avoid surrounding the logger.debug(...) call with checks like `if (logger.isDebugEnabled())...` which gives cleaner code.\r\n\r\n&gt; This answer is based on modern logging frameworks, not outdated ones like Log4J.\r\n\r\nWhen you say &quot;outdated&quot; you must be talking about Log4j 1.x. As of 2014, Log4j 2 is the cutting edge open source logging framework. It takes some ideas from SLF4J, like [parameterized log messages][2], but adds a plugin system so you can easily add [custom appenders][3], custom layouts and [custom lookups][4]. Furthermore Log4j 2 has support for [custom log levels][5], [lambda expressions][6] and the lock-free and very performant [Async Loggers][7]. To spice things up, from release 2.6 Log4j 2 is [garbage-free][8].\r\n\r\nKayaman is probably talking about Log4j 1, which has been [End of Life][9] since August 2015.\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/2.x/manual/messages.html\r\n  [2]: http://logging.apache.org/log4j/2.x/log4j-api/xref/org/apache/logging/log4j/message/ParameterizedMessage.html\r\n  [3]: https://stackoverflow.com/questions/24205093/how-to-create-a-custom-appender-in-log4j2/24220688#24220688\r\n  [4]: https://stackoverflow.com/questions/29745938/log4j2-2-1-custom-plugin-not-detected-by-packages-attribute/29761346#29761346\r\n  [5]: http://logging.apache.org/log4j/2.x/manual/customloglevels.html\r\n  [6]: http://logging.apache.org/log4j/2.x/manual/api.html#LambdaSupport\r\n  [7]: http://logging.apache.org/log4j/2.x/manual/async.html#Performance\r\n  [8]: https://issues.apache.org/jira/browse/LOG4J2-1270\r\n  [9]: https://blogs.apache.org/foundation/entry/apache_logging_services_project_announces","title":"logger usage, is parameterization better or using + to add arguments?","body":"<p><a href=\"http://logging.apache.org/log4j/2.x/manual/messages.html\" rel=\"nofollow noreferrer\">Parameterized messages</a> avoid formatting the text until Log4j is certain that the message will be logged. This allows you to avoid surrounding the logger.debug(...) call with checks like <code>if (logger.isDebugEnabled())...</code> which gives cleaner code.</p>\n\n<blockquote>\n  <p>This answer is based on modern logging frameworks, not outdated ones like Log4J.</p>\n</blockquote>\n\n<p>When you say \"outdated\" you must be talking about Log4j 1.x. As of 2014, Log4j 2 is the cutting edge open source logging framework. It takes some ideas from SLF4J, like <a href=\"http://logging.apache.org/log4j/2.x/log4j-api/xref/org/apache/logging/log4j/message/ParameterizedMessage.html\" rel=\"nofollow noreferrer\">parameterized log messages</a>, but adds a plugin system so you can easily add <a href=\"https://stackoverflow.com/questions/24205093/how-to-create-a-custom-appender-in-log4j2/24220688#24220688\">custom appenders</a>, custom layouts and <a href=\"https://stackoverflow.com/questions/29745938/log4j2-2-1-custom-plugin-not-detected-by-packages-attribute/29761346#29761346\">custom lookups</a>. Furthermore Log4j 2 has support for <a href=\"http://logging.apache.org/log4j/2.x/manual/customloglevels.html\" rel=\"nofollow noreferrer\">custom log levels</a>, <a href=\"http://logging.apache.org/log4j/2.x/manual/api.html#LambdaSupport\" rel=\"nofollow noreferrer\">lambda expressions</a> and the lock-free and very performant <a href=\"http://logging.apache.org/log4j/2.x/manual/async.html#Performance\" rel=\"nofollow noreferrer\">Async Loggers</a>. To spice things up, from release 2.6 Log4j 2 is <a href=\"https://issues.apache.org/jira/browse/LOG4J2-1270\" rel=\"nofollow noreferrer\">garbage-free</a>.</p>\n\n<p>Kayaman is probably talking about Log4j 1, which has been <a href=\"https://blogs.apache.org/foundation/entry/apache_logging_services_project_announces\" rel=\"nofollow noreferrer\">End of Life</a> since August 2015.</p>\n"}],"owner":{"account_id":1250857,"reputation":428,"user_id":1211304,"accept_rate":74,"display_name":"nandini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":581,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":36930920,"answer_count":2,"score":3,"last_activity_date":1639416384,"creation_date":1461910431,"question_id":36930807,"body_markdown":"Which of the following is a better usage of logger? \r\n\r\n1. Parametrize (log4j 2)\r\n\r\n        logger.info(&quot;User {} has logged in using id {}&quot;, map.get(&quot;Name&quot;), user.getId());`\r\n\r\n2. Using + operator (log4j)\r\n       \r\n        logger.info(&quot;User&quot;+ map.get(&quot;Name&quot;) +&quot; has logged in using id &quot; +user.getId());`\r\n\r\nAnd why?","title":"logger usage, is parameterization better or using + to add arguments?","body":"<p>Which of the following is a better usage of logger? </p>\n\n<ol>\n<li><p>Parametrize (log4j 2)</p>\n\n<pre><code>logger.info(\"User {} has logged in using id {}\", map.get(\"Name\"), user.getId());`\n</code></pre></li>\n<li><p>Using + operator (log4j)</p>\n\n<pre><code>logger.info(\"User\"+ map.get(\"Name\") +\" has logged in using id \" +user.getId());`\n</code></pre></li>\n</ol>\n\n<p>And why?</p>\n"},{"tags":["java","dependency-management"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1639416573,"post_id":70338186,"comment_id":124337814,"body_markdown":"&quot;Is there a tool that can trace code execution and generate cut-down Java classes that capture the methods that actually got executed?&quot; - Yes, it is called a Java Profiler. The rest of what you are asking, I don&#39;t know if it is at all possible.","body":"&quot;Is there a tool that can trace code execution and generate cut-down Java classes that capture the methods that actually got executed?&quot; - Yes, it is called a Java Profiler. The rest of what you are asking, I don&#39;t know if it is at all possible."}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639416351,"creation_date":1639416351,"answer_id":70338591,"question_id":70338186,"body_markdown":"While it would be possible to create such a thing, it would depend on the runs being deterministic. If something changes, you&#39;d get a `MethodNotFoundError` when the control flow changes due to differences to the original run.\r\n\r\nImagine doing that to some calendar code, and then suddenly it&#39;s a leap year and the code that was &quot;optimized away&quot; needs to be run? Not a very robust solution, so not a part of a standard developer toolkit.\r\n\r\nIf you&#39;re trying to extract relevant code out of a spaghetti codebase, you could try running a profiler (`jvisualvm`) to see what code is being run. This would require that you get the software to the state that it&#39;s only running the code you&#39;re interested in, but so would your initial idea.","title":"Extract an execution thread into minimal java","body":"<p>While it would be possible to create such a thing, it would depend on the runs being deterministic. If something changes, you'd get a <code>MethodNotFoundError</code> when the control flow changes due to differences to the original run.</p>\n<p>Imagine doing that to some calendar code, and then suddenly it's a leap year and the code that was &quot;optimized away&quot; needs to be run? Not a very robust solution, so not a part of a standard developer toolkit.</p>\n<p>If you're trying to extract relevant code out of a spaghetti codebase, you could try running a profiler (<code>jvisualvm</code>) to see what code is being run. This would require that you get the software to the state that it's only running the code you're interested in, but so would your initial idea.</p>\n"}],"owner":{"account_id":7336061,"reputation":17,"user_id":5587405,"display_name":"Alan Wendt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1639416351,"creation_date":1639414491,"question_id":70338186,"body_markdown":"Is there a tool that can trace code execution and generate cut-down Java classes that capture the methods that actually got executed?  I&#39;m trying to pull some code out of\r\na big codebase without including tons of static dependencies.  Dynamic dependency\r\nextraction.\r\n\r\nFor example if method M of class C is never executed, the extracted code would leave that method out, along with everything that method uses and depends upon.","title":"Extract an execution thread into minimal java","body":"<p>Is there a tool that can trace code execution and generate cut-down Java classes that capture the methods that actually got executed?  I'm trying to pull some code out of\na big codebase without including tons of static dependencies.  Dynamic dependency\nextraction.</p>\n<p>For example if method M of class C is never executed, the extracted code would leave that method out, along with everything that method uses and depends upon.</p>\n"},{"tags":["java","jvm","classloader","instrumentation","javaagents"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1639404939,"post_id":70335946,"comment_id":124333013,"body_markdown":"ClassLoaders with modular Java changed, giving the feeling of: _snakess in the grass!_  An other way, like static jar patching would be better.","body":"ClassLoaders with modular Java changed, giving the feeling of: <i>snakess in the grass!</i>  An other way, like static jar patching would be better."}],"answers":[{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639405233,"creation_date":1639405233,"answer_id":70336132,"question_id":70335946,"body_markdown":"Have your Agent listen to the creation of new ClassLoaders and then attach instances of them to the new ClassLoaders.\r\n\r\nThis way you preserve your &quot;Agent listens to ClassLoader&quot; interface, even if it now extends beyond the one platform class loader you expected the Agent to listen to.","title":"Make a Java class visible from any ClassLoader","body":"<p>Have your Agent listen to the creation of new ClassLoaders and then attach instances of them to the new ClassLoaders.</p>\n<p>This way you preserve your &quot;Agent listens to ClassLoader&quot; interface, even if it now extends beyond the one platform class loader you expected the Agent to listen to.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639405873,"creation_date":1639405873,"answer_id":70336260,"question_id":70335946,"body_markdown":"You may be able to do something specific that works for `URLClassLoader`, but not all classes are loaded by an instance of URLClassLoader. Any OSGi project won&#39;t, most web servers also use their own classloaders in order to support hot reload, etc.\r\n\r\nAs far as I know there&#39;s no way to just casually update some &#39;global parent of all classloaders&#39; or inject one; there&#39;s no such parent, and even if there was, a classloader is free to ignore its parent entirely.\r\n\r\nTherefore the general answer is: __No__, you can&#39;t do that.\r\n\r\nBut, let&#39;s get our hacking hats on!\r\n\r\nYou&#39;re an agent already. One of the things you get to do as agent is to &#39;witness&#39; classes as they are being loaded. Just invoke `.addTransformer` on the instance of Instrumentation you get in your `agentmain` and register one.\r\n\r\nWhen you notice the `Program` class being loaded, do the following:\r\n\r\n* Take the bytecode and toss it through ASM, BCEL, Bytecode Buddy, or any other java &#39;class file reader/transformer&#39; framework.\r\n* Also open up a class from within your agent&#39;s code (I wouldn&#39;t use `Agent` itself, I&#39;d make a class called `ProgramAddonMethods` or whatnot as a container - everything inside is for the program to use / for your agent to &#39;inject&#39; into that program.\r\n* Add _every_ static member in `ProgramAddonMethods` directly to `Program`. As you do so, modify the typename on all accesses (both `INVOKESTATIC` and the read/write field opcodes) where the etypename is `ProgramAddonMethods` and make it the fully qualified name of the targeted class instead.\r\n* inject the INVOKESTATIC as you already do, but, rewrite it so that it&#39;s going to its own class, as you just copied all the static methods and fields over there.\r\n* Then return the bytecode of that modified class from your transformer.\r\n\r\nThis 100% guarantees you cannot possibly run into any module or classpath boundary issues and it will work with any classloader abstraction, guaranteed, but there are some caveats:\r\n\r\n* Just don&#39;t attempt to futz with instance anything. Make it all static methods and fields. You can make fake instance fields using an `IdentityHashMap` if you must (e.g. a `static IdentityHashMap&lt;Foo, String&gt; names;` is effectively identical to adding `private String name;` to the `Foo` class.. except it&#39;s a bit slower of course; presumably as you&#39;re already in a mess o reflection that&#39;s acceptable here).\r\n* Your code has to be &#39;dependency free&#39;. It cannot rely on anything else, no libraries other than `java.*`, not even a helper class. This idea quickly runs out of steam if the job you&#39;re injecting becomes complicated. If you must, __make__ a classloader for your own agent jar using the appropriate &#39;thread-safely initialize it only once&#39; guards, and have that load in a bundle that does have the benefit of allowing dependencies.\r\n\r\nThis is all highly complicated stuff but you appear to have already worked out how to inject INVOKESTATIC calls, so, I think you know how to do this.\r\n\r\nThis is precisely what lombok does to &#39;patch&#39; some methods in eclipse to ensure that things like save actions, auto-formatting, and syntax highlighting don&#39;t break - lombok injects knowledge of generated notes where appropriate and does it in this exact manner because eclipse uses a classloader platform called Equinox which makes any other solution problematic. You can look at it for inspiration or guidelines, though it&#39;s not particularly well documented. You&#39;re looking in particular at:\r\n\r\n* [The `lombok.eclipse.agent` package in the `eclipseAgent` source root](https://github.com/projectlombok/lombok/tree/master/src/eclipseAgent/lombok/eclipse/agent).\r\n* The [`lombok.patcher` project](https://github.com/projectlombok/lombok.patcher) which is lombok&#39;s only actual dependency, in particular the [`lombok.patcher.PatchScript.transplantMethod` method](https://github.com/projectlombok/lombok.patcher/blob/master/src/patcher/lombok/patcher/PatchScript.java#L196).\r\n\r\nNote that the next method may also interest you: lombok.patcher&#39;s &#39;insert&#39; doesn&#39;t move the method - it injects the body of the method directly in there (it &#39;inlines&#39;). This requires some serious finagling of the stack and is only advised for extremely simple one-liner-esque methods, and probably is excessive and unneccessary firepower for this problem.\r\n\r\nDISCLAIMER: I wrote most of that.\r\n","title":"Make a Java class visible from any ClassLoader","body":"<p>You may be able to do something specific that works for <code>URLClassLoader</code>, but not all classes are loaded by an instance of URLClassLoader. Any OSGi project won't, most web servers also use their own classloaders in order to support hot reload, etc.</p>\n<p>As far as I know there's no way to just casually update some 'global parent of all classloaders' or inject one; there's no such parent, and even if there was, a classloader is free to ignore its parent entirely.</p>\n<p>Therefore the general answer is: <strong>No</strong>, you can't do that.</p>\n<p>But, let's get our hacking hats on!</p>\n<p>You're an agent already. One of the things you get to do as agent is to 'witness' classes as they are being loaded. Just invoke <code>.addTransformer</code> on the instance of Instrumentation you get in your <code>agentmain</code> and register one.</p>\n<p>When you notice the <code>Program</code> class being loaded, do the following:</p>\n<ul>\n<li>Take the bytecode and toss it through ASM, BCEL, Bytecode Buddy, or any other java 'class file reader/transformer' framework.</li>\n<li>Also open up a class from within your agent's code (I wouldn't use <code>Agent</code> itself, I'd make a class called <code>ProgramAddonMethods</code> or whatnot as a container - everything inside is for the program to use / for your agent to 'inject' into that program.</li>\n<li>Add <em>every</em> static member in <code>ProgramAddonMethods</code> directly to <code>Program</code>. As you do so, modify the typename on all accesses (both <code>INVOKESTATIC</code> and the read/write field opcodes) where the etypename is <code>ProgramAddonMethods</code> and make it the fully qualified name of the targeted class instead.</li>\n<li>inject the INVOKESTATIC as you already do, but, rewrite it so that it's going to its own class, as you just copied all the static methods and fields over there.</li>\n<li>Then return the bytecode of that modified class from your transformer.</li>\n</ul>\n<p>This 100% guarantees you cannot possibly run into any module or classpath boundary issues and it will work with any classloader abstraction, guaranteed, but there are some caveats:</p>\n<ul>\n<li>Just don't attempt to futz with instance anything. Make it all static methods and fields. You can make fake instance fields using an <code>IdentityHashMap</code> if you must (e.g. a <code>static IdentityHashMap&lt;Foo, String&gt; names;</code> is effectively identical to adding <code>private String name;</code> to the <code>Foo</code> class.. except it's a bit slower of course; presumably as you're already in a mess o reflection that's acceptable here).</li>\n<li>Your code has to be 'dependency free'. It cannot rely on anything else, no libraries other than <code>java.*</code>, not even a helper class. This idea quickly runs out of steam if the job you're injecting becomes complicated. If you must, <strong>make</strong> a classloader for your own agent jar using the appropriate 'thread-safely initialize it only once' guards, and have that load in a bundle that does have the benefit of allowing dependencies.</li>\n</ul>\n<p>This is all highly complicated stuff but you appear to have already worked out how to inject INVOKESTATIC calls, so, I think you know how to do this.</p>\n<p>This is precisely what lombok does to 'patch' some methods in eclipse to ensure that things like save actions, auto-formatting, and syntax highlighting don't break - lombok injects knowledge of generated notes where appropriate and does it in this exact manner because eclipse uses a classloader platform called Equinox which makes any other solution problematic. You can look at it for inspiration or guidelines, though it's not particularly well documented. You're looking in particular at:</p>\n<ul>\n<li><a href=\"https://github.com/projectlombok/lombok/tree/master/src/eclipseAgent/lombok/eclipse/agent\" rel=\"nofollow noreferrer\">The <code>lombok.eclipse.agent</code> package in the <code>eclipseAgent</code> source root</a>.</li>\n<li>The <a href=\"https://github.com/projectlombok/lombok.patcher\" rel=\"nofollow noreferrer\"><code>lombok.patcher</code> project</a> which is lombok's only actual dependency, in particular the <a href=\"https://github.com/projectlombok/lombok.patcher/blob/master/src/patcher/lombok/patcher/PatchScript.java#L196\" rel=\"nofollow noreferrer\"><code>lombok.patcher.PatchScript.transplantMethod</code> method</a>.</li>\n</ul>\n<p>Note that the next method may also interest you: lombok.patcher's 'insert' doesn't move the method - it injects the body of the method directly in there (it 'inlines'). This requires some serious finagling of the stack and is only advised for extremely simple one-liner-esque methods, and probably is excessive and unneccessary firepower for this problem.</p>\n<p>DISCLAIMER: I wrote most of that.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1639411625,"creation_date":1639411293,"answer_id":70337508,"question_id":70335946,"body_markdown":"You can add classes to the bootstrap class loader using [`appendToBootstrapClassLoaderSearch`]. This makes the classes of the specified jar file available to all classes whose defining class loader follows the standard delegation pattern.\r\n\r\nBut this requires the classes to be packaged in a jar file. When you specify the Agent’s own jar file, you have to be aware that classes loaded through the bootstrap loader are distinct from the classes loaded through the app loader, even when they originate from the same jar file. Further, the classes loaded by the bootstrap loader must not have dependencies to classes loaded by by other class loaders.\r\n\r\nIf your `getCustomMultiplier` method is supposed to interact with the running Agent, you have to separate the agent and the class containing this method.\r\n\r\n[`appendToBootstrapClassLoaderSearch`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#appendToBootstrapClassLoaderSearch(java.util.jar.JarFile)","title":"Make a Java class visible from any ClassLoader","body":"<p>You can add classes to the bootstrap class loader using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#appendToBootstrapClassLoaderSearch(java.util.jar.JarFile)\" rel=\"nofollow noreferrer\"><code>appendToBootstrapClassLoaderSearch</code></a>. This makes the classes of the specified jar file available to all classes whose defining class loader follows the standard delegation pattern.</p>\n<p>But this requires the classes to be packaged in a jar file. When you specify the Agent’s own jar file, you have to be aware that classes loaded through the bootstrap loader are distinct from the classes loaded through the app loader, even when they originate from the same jar file. Further, the classes loaded by the bootstrap loader must not have dependencies to classes loaded by by other class loaders.</p>\n<p>If your <code>getCustomMultiplier</code> method is supposed to interact with the running Agent, you have to separate the agent and the class containing this method.</p>\n"}],"owner":{"account_id":10007522,"reputation":1374,"user_id":7401478,"accept_rate":56,"display_name":"user7401478"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2057,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":70337508,"answer_count":3,"score":5,"last_activity_date":1639415821,"creation_date":1639404333,"question_id":70335946,"body_markdown":"I&#39;m using a Java Agent (Agent.class) to transform a method in a program (Program.class) in a way that includes a call to the Agent class.\r\n\r\n```diff\r\npublic Program.getMultiplier()F:\r\n    ALOAD 1\r\n    ALOAD 2\r\n    FDIV\r\n+   INVOKESTATIC Agent.getCustomMultiplier(F)F\r\n    FRETURN\r\n```\r\nI&#39;ve inspected the class loaders and their parents of both Agent and Program classes, and their hierarchy looks like this:\r\n- Agent.class: `AppClassLoader` &lt;- `PlatformClassLoader` &lt;- `null`\r\n- Program.class: `URLClassLoader` &lt;- `PlatformClassLoader` &lt;- `null`\r\n\r\nWhen the Program executes the added `INVOKESTATIC` instruction, it throws a ClassNotFoundException -- it cannot find the Agent class as it was loaded by a different class loader.\r\n\r\nAs a temporary solution, I&#39;ve tried forcing `AppClassLoader` to become a parent of `URLClassLoader` with reflection, which works in older Java versions but has been removed since Java 12.\r\n\r\nIs there a more reliable way to make sure my Agent class is visible from any class loader?","title":"Make a Java class visible from any ClassLoader","body":"<p>I'm using a Java Agent (Agent.class) to transform a method in a program (Program.class) in a way that includes a call to the Agent class.</p>\n<pre><code>public Program.getMultiplier()F:\n    ALOAD 1\n    ALOAD 2\n    FDIV\n+   INVOKESTATIC Agent.getCustomMultiplier(F)F\n    FRETURN\n</code></pre>\n<p>I've inspected the class loaders and their parents of both Agent and Program classes, and their hierarchy looks like this:</p>\n<ul>\n<li>Agent.class: <code>AppClassLoader</code> &lt;- <code>PlatformClassLoader</code> &lt;- <code>null</code></li>\n<li>Program.class: <code>URLClassLoader</code> &lt;- <code>PlatformClassLoader</code> &lt;- <code>null</code></li>\n</ul>\n<p>When the Program executes the added <code>INVOKESTATIC</code> instruction, it throws a ClassNotFoundException -- it cannot find the Agent class as it was loaded by a different class loader.</p>\n<p>As a temporary solution, I've tried forcing <code>AppClassLoader</code> to become a parent of <code>URLClassLoader</code> with reflection, which works in older Java versions but has been removed since Java 12.</p>\n<p>Is there a more reliable way to make sure my Agent class is visible from any class loader?</p>\n"},{"tags":["java","android","android-studio","android-asynctask","jsoup"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":2,"creation_date":1639412608,"post_id":70337732,"comment_id":124336318,"body_markdown":"You are correct. What is the question?","body":"You are correct. What is the question?"},{"owner":{"account_id":23635986,"reputation":37,"user_id":17667046,"display_name":"NONAME"},"score":0,"creation_date":1639412727,"post_id":70337732,"comment_id":124336379,"body_markdown":"if the program enters this coded part of the program without the Internet, the program will crash.","body":"if the program enters this coded part of the program without the Internet, the program will crash."},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1639412749,"post_id":70337732,"comment_id":124336387,"body_markdown":"Yes, what is the question?","body":"Yes, what is the question?"},{"owner":{"account_id":23635986,"reputation":37,"user_id":17667046,"display_name":"NONAME"},"score":0,"creation_date":1639412882,"post_id":70337732,"comment_id":124336454,"body_markdown":"the program should not crash when I access this coded part without internet. just a toast message that the internet is not available is enough. how can i do?","body":"the program should not crash when I access this coded part without internet. just a toast message that the internet is not available is enough. how can i do?"},{"owner":{"account_id":23635986,"reputation":37,"user_id":17667046,"display_name":"NONAME"},"score":0,"creation_date":1639413283,"post_id":70337732,"comment_id":124336627,"body_markdown":"I updated my question. please help to me this is very important.","body":"I updated my question. please help to me this is very important."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1639413786,"post_id":70337732,"comment_id":124336814,"body_markdown":"Please post the entire stack trace when complaining about a crash.  But here it&#39;s almost certainly because text1 is null when the network call fails, and you can&#39;t toast a null value.  Add an if statement to check and don&#39;t toast if its null (or toast an error message)","body":"Please post the entire stack trace when complaining about a crash.  But here it&#39;s almost certainly because text1 is null when the network call fails, and you can&#39;t toast a null value.  Add an if statement to check and don&#39;t toast if its null (or toast an error message)"}],"answers":[{"tags":[],"owner":{"account_id":7582437,"reputation":5222,"user_id":5752737,"accept_rate":100,"display_name":"geco17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639414103,"creation_date":1639414103,"answer_id":70338096,"question_id":70337732,"body_markdown":"If what you&#39;re looking for is just a message that the request couldn&#39;t be completed normally, it should be enough to change the catch block a bit:\r\n\r\n            try {\r\n\r\n                Document doc = (Document) Jsoup.connect(&quot;(warn: here my web)&quot;).get();\r\n                test1 = doc.text();\r\n            } catch (Exception e) {\r\n                // TODO your error message here\r\n                test1 = &quot;An exception occurred and it wasn&#39;t possible to get the document&quot;;\r\n                // TODO use a logging framework!\r\n                e.printStackTrace();\r\n            }","title":"when the device internet does not work (or is turned off) exits the program. (Jsoup)","body":"<p>If what you're looking for is just a message that the request couldn't be completed normally, it should be enough to change the catch block a bit:</p>\n<pre><code>        try {\n\n            Document doc = (Document) Jsoup.connect(&quot;(warn: here my web)&quot;).get();\n            test1 = doc.text();\n        } catch (Exception e) {\n            // TODO your error message here\n            test1 = &quot;An exception occurred and it wasn't possible to get the document&quot;;\n            // TODO use a logging framework!\n            e.printStackTrace();\n        }\n</code></pre>\n"}],"owner":{"account_id":23635986,"reputation":37,"user_id":17667046,"display_name":"NONAME"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1639414386,"accepted_answer_id":70338096,"answer_count":1,"score":-1,"last_activity_date":1639414708,"creation_date":1639412341,"question_id":70337732,"body_markdown":"JSOUP\r\n\r\nwhen the device internet does not work (or is turned off) exits the program. \r\n\r\nbut it works without problems (without app crash) while the internet is running.\r\n\r\nif the program enters this coded part of the program without the Internet, the program will crash. the program should not crash when I access this coded part without internet. just a toast message that the internet is not available is enough. how can i do?\r\n\r\n**EDIT:**\r\n\r\nthe problem is when I don&#39;t add a toast message.","title":"when the device internet does not work (or is turned off) exits the program. (Jsoup)","body":"<p>JSOUP</p>\n<p>when the device internet does not work (or is turned off) exits the program.</p>\n<p>but it works without problems (without app crash) while the internet is running.</p>\n<p>if the program enters this coded part of the program without the Internet, the program will crash. the program should not crash when I access this coded part without internet. just a toast message that the internet is not available is enough. how can i do?</p>\n<p><strong>EDIT:</strong></p>\n<p>the problem is when I don't add a toast message.</p>\n"},{"tags":["java","graph","display","graphstream","viewpanel"],"owner":{"account_id":23636211,"reputation":11,"user_id":17667222,"display_name":"Bogo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639414355,"creation_date":1639414355,"question_id":70338157,"body_markdown":"The loading and parsing of the file proceeds without an obvious problem but the ViewPanel in which I try to display the graph does not show immediately when initiating the action that should lead to this. Instead the container in which the ViewPanel (=an object that inherits from JPanel) with the graph should show remains empty. This changes when I then click twice on the application window, for instance by first clicking the minimization icon and then enlarging the window again with a click on the corresponding icon. After these two clicks the desired graphs shows up on the screen which implies that the ViewPanel too is then doing what it should be doing. Those two clicks, however, are a nuisance, as far as I can see they have nothing to do with the code I wrote and they should not be necessary. How can I get rid of the necessity for them and have the graph displayed seamlessly after prompting the action that should lead to the graph being displayed? \r\n\r\nI am grateful for any kind of helpful advice. ","title":"Loading and parsing file and displaying said file as graph with Java GraphStream","body":"<p>The loading and parsing of the file proceeds without an obvious problem but the ViewPanel in which I try to display the graph does not show immediately when initiating the action that should lead to this. Instead the container in which the ViewPanel (=an object that inherits from JPanel) with the graph should show remains empty. This changes when I then click twice on the application window, for instance by first clicking the minimization icon and then enlarging the window again with a click on the corresponding icon. After these two clicks the desired graphs shows up on the screen which implies that the ViewPanel too is then doing what it should be doing. Those two clicks, however, are a nuisance, as far as I can see they have nothing to do with the code I wrote and they should not be necessary. How can I get rid of the necessity for them and have the graph displayed seamlessly after prompting the action that should lead to the graph being displayed?</p>\n<p>I am grateful for any kind of helpful advice.</p>\n"},{"tags":["java","kotlin","apache-httpclient-4.x","mockk","apache-httpasyncclient"],"owner":{"account_id":6464279,"reputation":51,"user_id":5006887,"display_name":"Celtivo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639414028,"creation_date":1639414028,"question_id":70338073,"body_markdown":"I am trying to figure out how to unit test the callback methods of a `FutureCallback&lt;HttpClient&gt;`, but can&#39;t quite figure it out.\r\n\r\nI have the following code:\r\n\r\n    val latch = CountDownLatch(10)\r\n    httpClient.execute(httpPost, object: FutureCallback&lt;HttpResponse&gt; {\r\n                    override fun completed(response: HttpResponse) {\r\n                                val outputStream = ByteArrayOutputStream()\r\n                                response.entity.writeTo(outputStream)\r\n                                result = DataObj.parseFrom(outputStream.toByteArray())\r\n                            } catch (e: IOException) {\r\n                                failed(e)\r\n                            } catch (e: InvalidProtocolBufferException) {\r\n                                e.printStackTrace()\r\n                            }\r\n                        }\r\n                        latch.countDown()\r\n                    }\r\n    \r\n                    override fun failed(e: Exception) {\r\n                        logger.error(e.localizedMessage, e)\r\n                        latch.countDown()\r\n                    }\r\n    \r\n                    override fun cancelled() {\r\n                        logger.error(&quot;Request cancelled.&quot;)\r\n                        latch.countDown()\r\n                    }\r\n                })\r\n\r\nI&#39;m unsure on how I can force the FutureCallback to excecute either completed, failed, or cancelled. Therefore the `latch.countDown()` is never called, meaning the test never ends.\r\n\r\nWhat is the correct method to test this kind of asynchronous function?","title":"How to unit test responses of FutureCallback with ApacheAsyncHttpClient","body":"<p>I am trying to figure out how to unit test the callback methods of a <code>FutureCallback&lt;HttpClient&gt;</code>, but can't quite figure it out.</p>\n<p>I have the following code:</p>\n<pre><code>val latch = CountDownLatch(10)\nhttpClient.execute(httpPost, object: FutureCallback&lt;HttpResponse&gt; {\n                override fun completed(response: HttpResponse) {\n                            val outputStream = ByteArrayOutputStream()\n                            response.entity.writeTo(outputStream)\n                            result = DataObj.parseFrom(outputStream.toByteArray())\n                        } catch (e: IOException) {\n                            failed(e)\n                        } catch (e: InvalidProtocolBufferException) {\n                            e.printStackTrace()\n                        }\n                    }\n                    latch.countDown()\n                }\n\n                override fun failed(e: Exception) {\n                    logger.error(e.localizedMessage, e)\n                    latch.countDown()\n                }\n\n                override fun cancelled() {\n                    logger.error(&quot;Request cancelled.&quot;)\n                    latch.countDown()\n                }\n            })\n</code></pre>\n<p>I'm unsure on how I can force the FutureCallback to excecute either completed, failed, or cancelled. Therefore the <code>latch.countDown()</code> is never called, meaning the test never ends.</p>\n<p>What is the correct method to test this kind of asynchronous function?</p>\n"},{"tags":["java","android","android-toolbar"],"answers":[{"tags":[],"owner":{"account_id":8456658,"reputation":20415,"user_id":6343685,"accept_rate":60,"display_name":"Harshad Pansuriya"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1464341852,"creation_date":1464339566,"answer_id":37479192,"question_id":37479043,"body_markdown":"Try this :\r\n\r\n     &lt;android.support.v7.widget.Toolbar\r\n        android:id=&quot;@+id/toolbar2&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;@dimen/double_height_toolbar&quot;\r\n        android:gravity=&quot;top&quot;\r\n        app:titleTextAppearance=&quot;@style/toolbarTitleText&quot;\r\n        android:background=&quot;@color/greyLight&quot;\r\n        android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;\r\n        app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot;&gt;\r\n        \r\n            &lt;TextView\r\n                android:id=&quot;@+id/product_details_title&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:gravity=&quot;top&quot;\r\n                android:title=&quot;@string/menuLabel1a&quot;\r\n                android:paddingTop=&quot;@dimen/padding_normal&quot;\r\n                style=&quot;@android:style/TextAppearance.Holo.Widget.ActionBar.Title.Inverse&quot;\r\n                android:maxLines=&quot;2&quot; /&gt;\r\n    \r\n    &lt;/android.support.v7.widget.Toolbar&gt;\r\n\r\n**Other Solution is for ActionBar**\r\n\r\nThe default TextView of the ActionBar does not support line wrapping, and there is no exposed method to set it to wrap. So you can create a flexible layout, like this: **action_bar_title_layout.xml**:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    &lt;TextView\r\n        android:id=&quot;@+id/action_bar_title&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:gravity=&quot;center_vertical&quot;\r\n        android:ellipsize=&quot;end&quot;\r\n        android:maxLines=&quot;2&quot;/&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\nThen set this as the custom layout on your ActionBar:\r\n\r\n    ActionBar actionBar = getActionBar();\r\n    actionBar.setDisplayShowCustomEnabled(true);\r\n    actionBar.setCustomView(R.layout.action_bar_title_layout);\r\n    ((TextView) findViewById(R.id.action_bar_title)).setText(\r\n        &quot;This is a long text title that will wrap to multiple lines, when necessary.&quot;);","title":"Android Multiline Toolbar Title","body":"<p>Try this :</p>\n\n<pre><code> &lt;android.support.v7.widget.Toolbar\n    android:id=\"@+id/toolbar2\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"@dimen/double_height_toolbar\"\n    android:gravity=\"top\"\n    app:titleTextAppearance=\"@style/toolbarTitleText\"\n    android:background=\"@color/greyLight\"\n    android:theme=\"@style/AppTheme.AppBarOverlay\"\n    app:popupTheme=\"@style/AppTheme.PopupOverlay\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/product_details_title\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:gravity=\"top\"\n            android:title=\"@string/menuLabel1a\"\n            android:paddingTop=\"@dimen/padding_normal\"\n            style=\"@android:style/TextAppearance.Holo.Widget.ActionBar.Title.Inverse\"\n            android:maxLines=\"2\" /&gt;\n\n&lt;/android.support.v7.widget.Toolbar&gt;\n</code></pre>\n\n<p><strong>Other Solution is for ActionBar</strong></p>\n\n<p>The default TextView of the ActionBar does not support line wrapping, and there is no exposed method to set it to wrap. So you can create a flexible layout, like this: <strong>action_bar_title_layout.xml</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n&lt;TextView\n    android:id=\"@+id/action_bar_title\"\n    android:layout_height=\"match_parent\"\n    android:layout_width=\"wrap_content\"\n    android:gravity=\"center_vertical\"\n    android:ellipsize=\"end\"\n    android:maxLines=\"2\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Then set this as the custom layout on your ActionBar:</p>\n\n<pre><code>ActionBar actionBar = getActionBar();\nactionBar.setDisplayShowCustomEnabled(true);\nactionBar.setCustomView(R.layout.action_bar_title_layout);\n((TextView) findViewById(R.id.action_bar_title)).setText(\n    \"This is a long text title that will wrap to multiple lines, when necessary.\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440369,"reputation":1181,"user_id":829900,"display_name":"Crisic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639413801,"creation_date":1639412971,"answer_id":70337862,"question_id":37479043,"body_markdown":"Found this solution who was work for me :\r\n\r\n    fun Toolbar.disableTitleSingleLine() {\r\n        for (i in 0..childCount) {\r\n            val child = getChildAt(i)\r\n            if (child is TextView) {\r\n                child.isSingleLine = false\r\n            }\r\n        }\r\n    }\r\n\r\nAccording `Toolbar` implementation, the title `TextView` is created when text been set.\r\nIt&#39;s important to call this extension after title set.","title":"Android Multiline Toolbar Title","body":"<p>Found this solution who was work for me :</p>\n<pre><code>fun Toolbar.disableTitleSingleLine() {\n    for (i in 0..childCount) {\n        val child = getChildAt(i)\n        if (child is TextView) {\n            child.isSingleLine = false\n        }\n    }\n}\n</code></pre>\n<p>According <code>Toolbar</code> implementation, the title <code>TextView</code> is created when text been set.\nIt's important to call this extension after title set.</p>\n"}],"owner":{"account_id":7967476,"reputation":1326,"user_id":6013291,"accept_rate":81,"display_name":"Dennis van Opstal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13039,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":37479192,"answer_count":2,"score":10,"last_activity_date":1639413801,"creation_date":1464339125,"question_id":37479043,"body_markdown":"I have a Toolbar that when in landscape mode isn&#39;t as wide as usual, but it has more height than usual and for that reason I want to set the title to be multiline (2 lines to be precise) when it is in landscape. I have tried some things where I put a TextView inside of the Toolbar, but when I try to access the TextView to set it&#39;s title (since the the title is variable) I get a NullPointer after using findViewById.\r\n\r\nHere is some code of the current situation (without multiline):\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar2);\r\n        setSupportActionBar(toolbar);\r\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {\r\n            Display display = getWindowManager().getDefaultDisplay();\r\n            Point size = new Point();\r\n            display.getSize(size);\r\n            int width = (int)( size.x * 0.37);\r\n            int height =  Math.round(size.x * 0.63f * 0.25f);\r\n            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(width,height);\r\n            toolbar.setLayoutParams(params);\r\n        }\r\n        if (executeOnResume) {\r\n            currentProject = getIntent().getParcelableExtra(&quot;Project&quot;);\r\n            getSupportActionBar().setTitle(&quot;This is a pretty long piece of text, I hope it fits&quot;);\r\n            // A lot of irrelevant code...\r\n            //...\r\n            //...\r\n        } else { loadStuff();}\r\n    }\r\n\r\nAnd here is the toolbar xml:\r\n\r\n    &lt;android.support.v7.widget.Toolbar\r\n            android:id=&quot;@+id/toolbar2&quot;\r\n            android:title=&quot;@string/menuLabel1a&quot;\r\n            app:layout_widthPercent=&quot;37%&quot;\r\n            app:layout_heightPercent=&quot;26%&quot;\r\n            android:gravity=&quot;top&quot;\r\n            app:titleTextAppearance=&quot;@style/toolbarTitleText&quot;\r\n            android:background=&quot;@color/greyLight&quot;\r\n            android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;\r\n            app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot; /&gt;","title":"Android Multiline Toolbar Title","body":"<p>I have a Toolbar that when in landscape mode isn't as wide as usual, but it has more height than usual and for that reason I want to set the title to be multiline (2 lines to be precise) when it is in landscape. I have tried some things where I put a TextView inside of the Toolbar, but when I try to access the TextView to set it's title (since the the title is variable) I get a NullPointer after using findViewById.</p>\n\n<p>Here is some code of the current situation (without multiline):</p>\n\n<pre><code>@Override\nprotected void onResume() {\n    super.onResume();\n    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar2);\n    setSupportActionBar(toolbar);\n    getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {\n        Display display = getWindowManager().getDefaultDisplay();\n        Point size = new Point();\n        display.getSize(size);\n        int width = (int)( size.x * 0.37);\n        int height =  Math.round(size.x * 0.63f * 0.25f);\n        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(width,height);\n        toolbar.setLayoutParams(params);\n    }\n    if (executeOnResume) {\n        currentProject = getIntent().getParcelableExtra(\"Project\");\n        getSupportActionBar().setTitle(\"This is a pretty long piece of text, I hope it fits\");\n        // A lot of irrelevant code...\n        //...\n        //...\n    } else { loadStuff();}\n}\n</code></pre>\n\n<p>And here is the toolbar xml:</p>\n\n<pre><code>&lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar2\"\n        android:title=\"@string/menuLabel1a\"\n        app:layout_widthPercent=\"37%\"\n        app:layout_heightPercent=\"26%\"\n        android:gravity=\"top\"\n        app:titleTextAppearance=\"@style/toolbarTitleText\"\n        android:background=\"@color/greyLight\"\n        android:theme=\"@style/AppTheme.AppBarOverlay\"\n        app:popupTheme=\"@style/AppTheme.PopupOverlay\" /&gt;\n</code></pre>\n"},{"tags":["java","javascript","jsp"],"answers":[{"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1402049299,"creation_date":1402048615,"answer_id":24079070,"question_id":24079031,"body_markdown":"&gt; Any new Technology or design pattern.\n\nYes, there is a new technology named `WebSocket`. It is bi-directional and full-duplex. That means server can trigger client. You can get support of `Websocket` on Java EE 7 or Spring 4.\n\n### See also:\n\n - [ Java EE 7 Websocket tutorial][1]\n - [Spring 4 Websocket tutorial][2]\n\n\n  [1]: http://docs.oracle.com/javaee/7/tutorial/doc/websocket.htm\n  [2]: http://syntx.io/using-websockets-in-java-using-spring-4/","title":"How to trigger a JSP page refresh from server.?","body":"<blockquote>\n<p>Any new Technology or design pattern.</p>\n</blockquote>\n<p>Yes, there is a new technology named <code>WebSocket</code>. It is bi-directional and full-duplex. That means server can trigger client. You can get support of <code>Websocket</code> on Java EE 7 or Spring 4.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"http://docs.oracle.com/javaee/7/tutorial/doc/websocket.htm\" rel=\"nofollow noreferrer\"> Java EE 7 Websocket tutorial</a></li>\n<li><a href=\"http://syntx.io/using-websockets-in-java-using-spring-4/\" rel=\"nofollow noreferrer\">Spring 4 Websocket tutorial</a></li>\n</ul>\n"}],"owner":{"account_id":2069349,"reputation":5382,"user_id":1844148,"accept_rate":67,"display_name":"Dileep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":865,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1639413634,"creation_date":1402048527,"question_id":24079031,"body_markdown":"**Requirement :** \r\n\r\nTrigger a jsp page refresh when some value in the server changes. \r\n\r\nAjax is an option, but refreshing the JSP at a particular interval will increase the load on the server. Since i am dealing with a system that handles large amount of data, optimizing with the best having the higher priority. \r\n\r\nAny new Technology or design pattern that may help is greatly appreciated. \r\n\r\n&gt; **NB :** I have seen the technologies that match my requirement in HTML 5. But i am looking for something that works with everything.","title":"How to trigger a JSP page refresh from server.?","body":"<p><strong>Requirement :</strong> </p>\n\n<p>Trigger a jsp page refresh when some value in the server changes. </p>\n\n<p>Ajax is an option, but refreshing the JSP at a particular interval will increase the load on the server. Since i am dealing with a system that handles large amount of data, optimizing with the best having the higher priority. </p>\n\n<p>Any new Technology or design pattern that may help is greatly appreciated. </p>\n\n<blockquote>\n  <p><strong>NB :</strong> I have seen the technologies that match my requirement in HTML 5. But i am looking for something that works with everything.</p>\n</blockquote>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1639401100,"post_id":70334723,"comment_id":124331429,"body_markdown":"Why do you think that the exception has anything to do with `wait()` or `notify()`? What is the complete exception message and stack trace? Does it tell you from what line of your code the exception was thrown? Have you tried running the program in a debugger? Also, you say you want us to answer the question in your title, but it looks like you never finished typing it. Please edit for clarity.","body":"Why do you think that the exception has anything to do with <code>wait()</code> or <code>notify()</code>? What is the complete exception message and stack trace? Does it tell you from what line of your code the exception was thrown? Have you tried running the program in a debugger? Also, you say you want us to answer the question in your title, but it looks like you never finished typing it. Please edit for clarity."},{"owner":{"account_id":19303224,"reputation":1,"user_id":14110649,"display_name":"white tears"},"score":0,"creation_date":1639402074,"post_id":70334723,"comment_id":124331786,"body_markdown":"@SolomonSlow the exception occurs in `event.getMessage()).notify()` it says so in the console, and I have already described everything I possibly understand about this problem in my question","body":"@SolomonSlow the exception occurs in <code>event.getMessage()).notify()</code> it says so in the console, and I have already described everything I possibly understand about this problem in my question"},{"owner":{"account_id":4200525,"reputation":61370,"user_id":3440745,"display_name":"Tsyvarev"},"score":0,"creation_date":1639406710,"post_id":70334723,"comment_id":124333804,"body_markdown":"&quot;I have already described everything I possibly understand about this problem in my question&quot; - Do not *describe* the error message, instead add to the question post **as is**. The error message could contain more information than noted in your description. Would you fully understand the error message... then you won&#39;t ask your question at all, don&#39;t you think so?","body":"&quot;I have already described everything I possibly understand about this problem in my question&quot; - Do not <i>describe</i> the error message, instead add to the question post <b>as is</b>. The error message could contain more information than noted in your description. Would you fully understand the error message... then you won&#39;t ask your question at all, don&#39;t you think so?"},{"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"score":0,"creation_date":1639428686,"post_id":70334723,"comment_id":124341749,"body_markdown":"Solomon Slow has given a good answer. But I&#39;d suggest refactoring your code. There is no need to create a new thread with each click of a button. Create one single thread (a Worker) which calls take() on a blocking queue in a while(true)-like loop. In onButtonClick() prepare an object with all required data and put it into the queue. This Job/Task Queue pattern will simplify the code and prevent some possible race conditions.","body":"Solomon Slow has given a good answer. But I&#39;d suggest refactoring your code. There is no need to create a new thread with each click of a button. Create one single thread (a Worker) which calls take() on a blocking queue in a while(true)-like loop. In onButtonClick() prepare an object with all required data and put it into the queue. This Job/Task Queue pattern will simplify the code and prevent some possible race conditions."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1639543729,"post_id":70334723,"comment_id":124372917,"body_markdown":"I&#39;d suggest reviewing a tutorial on `wait()` and `notify()` such as  https://www.baeldung.com/java-wait-notify. There are at least two problems here: 1) the code doesn&#39;t call `notify()` on the same object instance that `wait()` is called on; 2) the current thread doesn&#39;t own the monitor on the object that `notify()` is called on","body":"I&#39;d suggest reviewing a tutorial on <code>wait()</code> and <code>notify()</code> such as  <a href=\"https://www.baeldung.com/java-wait-notify\" rel=\"nofollow noreferrer\">baeldung.com/java-wait-notify</a>. There are at least two problems here: 1) the code doesn&#39;t call <code>notify()</code> on the same object instance that <code>wait()</code> is called on; 2) the current thread doesn&#39;t own the monitor on the object that <code>notify()</code> is called on"}],"owner":{"account_id":19303224,"reputation":1,"user_id":14110649,"display_name":"white tears"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639413583,"creation_date":1639398710,"question_id":70334723,"body_markdown":"Don&#39;t look at all of my code, just the wait() and notify() methods I need to pause the run() method after the loop has finished its work and resume it in the onButtonClick() class, but when I do this I get an exception: current thread is not owner. How do I implement what I wrote in the title of the question\r\n\r\n       private boolean isFirstPage;\r\n        private CommandContext ctx;\r\n        private ArrayList&lt;String&gt; linkQuestion;\r\n        private Message message;\r\n\r\n    private int page;\r\n\r\n    public QuestionListThreads(boolean isFirstPage, CommandContext ctx, ArrayList&lt;String&gt; linkQuestion, Message message) {\r\n        this.isFirstPage = isFirstPage;\r\n        this.ctx = ctx;\r\n        this.linkQuestion = linkQuestion;\r\n        this.message = message;\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        synchronized (this) {\r\n            EmbedBuilder eb = new EmbedBuilder();\r\n            if (isFirstPage) {\r\n                for (; page &lt; 3; page++) {\r\n                    eb.addField(&quot;page &quot; + page, &quot;[link]&quot; + linkQuestion.get(page), false);\r\n                }\r\n                ctx.getChannel().sendMessage(eb.build()).setActionRow(Button.secondary(&quot;next&quot;, &quot;next&quot;)).queue();\r\n            } else {\r\n                page = 3;\r\n                for (int i = 0; i &lt; 3; i++, page++) {\r\n                    eb.addField(&quot;page &quot; + page, &quot;[link]&quot; + linkQuestion.get(page), false);\r\n                    if (i == 2) {\r\n                        message.editMessage(eb.build()).setActionRow(Button.secondary(&quot;next&quot;, &quot;next&quot;)).queue();\r\n                        try {\r\n                            this.wait();\r\n                            i = 0;\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n       \r\n    public void onButtonClick(ButtonClickEvent event) {\r\n        if (event.getComponentId().equals(&quot;next&quot;)) {\r\n            new QuestionListThreads(false, null, QuestionListCommand2.getLinkQuestion(),\r\n                    event.getMessage()).notify();\r\n        }","title":"How to suspend and resume a non-mainstream","body":"<p>Don't look at all of my code, just the wait() and notify() methods I need to pause the run() method after the loop has finished its work and resume it in the onButtonClick() class, but when I do this I get an exception: current thread is not owner. How do I implement what I wrote in the title of the question</p>\n<pre><code>   private boolean isFirstPage;\n    private CommandContext ctx;\n    private ArrayList&lt;String&gt; linkQuestion;\n    private Message message;\n\nprivate int page;\n\npublic QuestionListThreads(boolean isFirstPage, CommandContext ctx, ArrayList&lt;String&gt; linkQuestion, Message message) {\n    this.isFirstPage = isFirstPage;\n    this.ctx = ctx;\n    this.linkQuestion = linkQuestion;\n    this.message = message;\n\n\n}\n\n@Override\npublic void run() {\n    synchronized (this) {\n        EmbedBuilder eb = new EmbedBuilder();\n        if (isFirstPage) {\n            for (; page &lt; 3; page++) {\n                eb.addField(&quot;page &quot; + page, &quot;[link]&quot; + linkQuestion.get(page), false);\n            }\n            ctx.getChannel().sendMessage(eb.build()).setActionRow(Button.secondary(&quot;next&quot;, &quot;next&quot;)).queue();\n        } else {\n            page = 3;\n            for (int i = 0; i &lt; 3; i++, page++) {\n                eb.addField(&quot;page &quot; + page, &quot;[link]&quot; + linkQuestion.get(page), false);\n                if (i == 2) {\n                    message.editMessage(eb.build()).setActionRow(Button.secondary(&quot;next&quot;, &quot;next&quot;)).queue();\n                    try {\n                        this.wait();\n                        i = 0;\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        }\n    }\n}\n   \npublic void onButtonClick(ButtonClickEvent event) {\n    if (event.getComponentId().equals(&quot;next&quot;)) {\n        new QuestionListThreads(false, null, QuestionListCommand2.getLinkQuestion(),\n                event.getMessage()).notify();\n    }\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639412784,"creation_date":1639412454,"answer_id":70337763,"question_id":70337657,"body_markdown":"The problem is that Spring is trying to create a bean for `TempRequest` (and the only constructor available requires 2 `int`s and 2 `String`s). You actually don&#39;t need `TempRequest` as a Spring-managed Bean, so remove `@Component` annotation:\r\n```java\r\npublic class TempRequest {\r\n    (...)\r\n}\r\n```\r\n\r\nThen you also need to remove `TempRequest` as a property in `ReadWeatherController` because you actually don&#39;t need it:\r\n```java\r\n@RestController\r\npublic class ReadWeatherController {\r\n\r\n    //이제 여기다가 API를 만들면됨\r\n    @GetMapping(&quot;/todayMaxMin&quot;)\r\n    public String readWeather(\r\n            @RequestParam(value=&quot;x&quot;) int x,\r\n            @RequestParam(value=&quot;y&quot;) int y,\r\n            @RequestParam(value=&quot;baseDate&quot;) String baseDate) {\r\n        \r\n        String tempKey = baseDate+String.valueOf(x) + String.valueOf(y);\r\n        \r\n        TempRequest tr = new TempRequest(x, y, baseDate, tempKey);\r\n        \r\n        return tr.toString();\r\n    }\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nAs a side note, please consider moving your main class `Application` to the package `com.wook` so that you avoid the need of adding all the packages in `@SpringBootApplication(scanBasePackages= {&quot;com.wook.controller&quot;,&quot;com.wook.model&quot;,&quot;com.wook.service&quot;})`:\r\n```java\r\npackage com.wook;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.scheduling.annotation.EnableScheduling;\r\n\r\n@EnableScheduling\r\n@SpringBootApplication\r\npublic class Application {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\n`@SpringBootApplication` encapsulates `@Configuration`, `@EnableAutoConfiguration`, and `@ComponentScan` annotations with their default attributes. The default value for `@ComponentScan` means that all the sub packages on the package the `@ComponentScan` is used are scanned. That is why it is usually a good practice to include the main class in the base package of the project.","title":"&quot;Bean type int could not be found&quot; error, how can I solve it?","body":"<p>The problem is that Spring is trying to create a bean for <code>TempRequest</code> (and the only constructor available requires 2 <code>int</code>s and 2 <code>String</code>s). You actually don't need <code>TempRequest</code> as a Spring-managed Bean, so remove <code>@Component</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TempRequest {\n    (...)\n}\n</code></pre>\n<p>Then you also need to remove <code>TempRequest</code> as a property in <code>ReadWeatherController</code> because you actually don't need it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class ReadWeatherController {\n\n    //이제 여기다가 API를 만들면됨\n    @GetMapping(&quot;/todayMaxMin&quot;)\n    public String readWeather(\n            @RequestParam(value=&quot;x&quot;) int x,\n            @RequestParam(value=&quot;y&quot;) int y,\n            @RequestParam(value=&quot;baseDate&quot;) String baseDate) {\n        \n        String tempKey = baseDate+String.valueOf(x) + String.valueOf(y);\n        \n        TempRequest tr = new TempRequest(x, y, baseDate, tempKey);\n        \n        return tr.toString();\n    }\n}\n</code></pre>\n<hr />\n<p>As a side note, please consider moving your main class <code>Application</code> to the package <code>com.wook</code> so that you avoid the need of adding all the packages in <code>@SpringBootApplication(scanBasePackages= {&quot;com.wook.controller&quot;,&quot;com.wook.model&quot;,&quot;com.wook.service&quot;})</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.wook;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.scheduling.annotation.EnableScheduling;\n\n@EnableScheduling\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p><code>@SpringBootApplication</code> encapsulates <code>@Configuration</code>, <code>@EnableAutoConfiguration</code>, and <code>@ComponentScan</code> annotations with their default attributes. The default value for <code>@ComponentScan</code> means that all the sub packages on the package the <code>@ComponentScan</code> is used are scanned. That is why it is usually a good practice to include the main class in the base package of the project.</p>\n"},{"tags":[],"owner":{"account_id":18674005,"reputation":485,"user_id":13612096,"display_name":"Shreyas B"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639412680,"creation_date":1639412680,"answer_id":70337803,"question_id":70337657,"body_markdown":"Do you really need a class-level variable `TempRequest tr` in `ReadWeatherController`? As I see no use of it, rather have a method level variable inside the `ReadWeatherController.readWeather()` method.\r\n\r\nWhat&#39;s happening is since you have `TempRequest tr` as a parameter in your  `ReadWeatherController` constructor, spring is trying to autowire `TempRequest` and `TempRequest` doesn&#39;t have a no-args constructor and the default all args constructor has int and string parameter in it. Since the first param in `TempRequest` constructor is type int and spring can&#39;t find bean type of int, spring is throwing `Consider defining a bean of type &#39;int&#39; in your configuration` error. Change the controller to the following\r\n\r\n```java\r\n@RestController\r\npublic class ReadWeatherController {\r\n\r\n\r\n    //이제 여기다가 API를 만들면됨\r\n    @GetMapping(&quot;/todayMaxMin&quot;)\r\n    public String readWeather(\r\n            @RequestParam(value=&quot;x&quot;)int x,\r\n            @RequestParam(value=&quot;y&quot;)int y,\r\n            @RequestParam(value=&quot;baseDate&quot;)String baseDate) {\r\n        \r\n        String tempKey = baseDate+String.valueOf(x)+String.valueOf(y);\r\n        \r\n        TempRequest tr = new TempRequest(x,y,baseDate,tempKey);\r\n        \r\n        return tr.toString();\r\n    }\r\n    \r\n}\r\n```\r\nThis should solve your problem.","title":"&quot;Bean type int could not be found&quot; error, how can I solve it?","body":"<p>Do you really need a class-level variable <code>TempRequest tr</code> in <code>ReadWeatherController</code>? As I see no use of it, rather have a method level variable inside the <code>ReadWeatherController.readWeather()</code> method.</p>\n<p>What's happening is since you have <code>TempRequest tr</code> as a parameter in your  <code>ReadWeatherController</code> constructor, spring is trying to autowire <code>TempRequest</code> and <code>TempRequest</code> doesn't have a no-args constructor and the default all args constructor has int and string parameter in it. Since the first param in <code>TempRequest</code> constructor is type int and spring can't find bean type of int, spring is throwing <code>Consider defining a bean of type 'int' in your configuration</code> error. Change the controller to the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class ReadWeatherController {\n\n\n    //이제 여기다가 API를 만들면됨\n    @GetMapping(&quot;/todayMaxMin&quot;)\n    public String readWeather(\n            @RequestParam(value=&quot;x&quot;)int x,\n            @RequestParam(value=&quot;y&quot;)int y,\n            @RequestParam(value=&quot;baseDate&quot;)String baseDate) {\n        \n        String tempKey = baseDate+String.valueOf(x)+String.valueOf(y);\n        \n        TempRequest tr = new TempRequest(x,y,baseDate,tempKey);\n        \n        return tr.toString();\n    }\n    \n}\n</code></pre>\n<p>This should solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":7582437,"reputation":5222,"user_id":5752737,"accept_rate":100,"display_name":"geco17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639413167,"creation_date":1639413167,"answer_id":70337903,"question_id":70337657,"body_markdown":"You have a `@Component` with a constructor as defined below:\r\n\r\n    @Component\r\n    public class TempRequest {\r\n    ...    \r\n        public TempRequest(int x, int y, String baseDate, String tempKey) {\r\n            ...\r\n        }\r\n\r\nThe error message is saying it can&#39;t find beans of type `int` as declared in the component&#39;s constructor.\r\n\r\nIf this TempRequest is intentionally a bean (component) I would suggest refactoring as follows:\r\n\r\n    @Component\r\n    public class TempRequest {\r\n        ...    \r\n        public TempRequest(TempRequestConfig trc) {\r\n            ...\r\n        }\r\n        ...\r\n    }\r\n\r\nAnd then you can define a `TempRequestConfig` bean:\r\n\r\n    @Component\r\n    public class TempRequestConfig {\r\n        public int getX() { ... }\r\n        public int getY() { ... }\r\n        public String getBaseDate() { ... }\r\n        public String getTempKey() { ... }\r\n    }\r\n\r\nThis way you can inject the config bean into your temp request bean with Spring&#39;s dependency injection.","title":"&quot;Bean type int could not be found&quot; error, how can I solve it?","body":"<p>You have a <code>@Component</code> with a constructor as defined below:</p>\n<pre><code>@Component\npublic class TempRequest {\n...    \n    public TempRequest(int x, int y, String baseDate, String tempKey) {\n        ...\n    }\n</code></pre>\n<p>The error message is saying it can't find beans of type <code>int</code> as declared in the component's constructor.</p>\n<p>If this TempRequest is intentionally a bean (component) I would suggest refactoring as follows:</p>\n<pre><code>@Component\npublic class TempRequest {\n    ...    \n    public TempRequest(TempRequestConfig trc) {\n        ...\n    }\n    ...\n}\n</code></pre>\n<p>And then you can define a <code>TempRequestConfig</code> bean:</p>\n<pre><code>@Component\npublic class TempRequestConfig {\n    public int getX() { ... }\n    public int getY() { ... }\n    public String getBaseDate() { ... }\n    public String getTempKey() { ... }\n}\n</code></pre>\n<p>This way you can inject the config bean into your temp request bean with Spring's dependency injection.</p>\n"}],"owner":{"account_id":21310254,"reputation":109,"user_id":15684755,"display_name":"codingRookie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":981,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70337763,"answer_count":3,"score":2,"last_activity_date":1639413167,"creation_date":1639411986,"question_id":70337657,"body_markdown":"I made a TempRequest class and registed as a bean\r\n\r\nThe code below is TempRequest class.\r\n\r\n    package com.wook.model.dto;\r\n    \r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class TempRequest {\r\n    \r\n    \tprivate int x;\r\n    \tprivate int y;\r\n    \tprivate String baseDate;\r\n    \tprivate String tempKey;\t\r\n    \t\r\n    \tpublic TempRequest(int x, int y, String baseDate, String tempKey) {\r\n    \t\tsuper();\r\n    \t\tthis.x = x;\r\n    \t\tthis.y = y;\r\n    \t\tthis.baseDate = baseDate;\r\n    \t\tthis.tempKey = tempKey;\r\n    \t}\r\n    \r\n    \tpublic String getTempKey() {\r\n    \t\treturn tempKey;\r\n    \t}\r\n    \r\n    \tpublic void setTempKey(String tempKey) {\r\n    \t\tthis.tempKey = tempKey;\r\n    \t}\r\n    \r\n    \tpublic int getX() {\r\n    \t\treturn x;\r\n    \t}\r\n    \r\n    \tpublic void setX(int x) {\r\n    \t\tthis.x = x;\r\n    \t}\r\n    \r\n    \tpublic int getY() {\r\n    \t\treturn y;\r\n    \t}\r\n    \r\n    \tpublic void setY(int y) {\r\n    \t\tthis.y = y;\r\n    \t}\r\n    \r\n    \tpublic String getBaseDate() {\r\n    \t\treturn baseDate;\r\n    \t}\r\n    \r\n    \tpublic void setBaseDate(String baseDate) {\r\n    \t\tthis.baseDate = baseDate;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;TempRequest [x=&quot; + x + &quot;, y=&quot; + y + &quot;, baseDate=&quot; + baseDate + &quot;, tempKey=&quot; + tempKey + &quot;]&quot;;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nTo use TempRequest class I Autowired at ReadWeatherController class\r\n\r\nReadWeatherController Class\r\n\r\n    package com.wook.controller;\r\n    \r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.wook.model.dto.TempRequest;\r\n    \r\n    @RestController\r\n    public class ReadWeatherController {\r\n    \r\n    \tprivate TempRequest tr;\r\n    \r\n    \tpublic ReadWeatherController(TempRequest tr) {\r\n    \t\tsuper();\r\n    \t\tthis.tr = tr;\r\n    \t}\r\n    \r\n    \r\n    \t//이제 여기다가 API를 만들면됨\r\n    \t@GetMapping(&quot;/todayMaxMin&quot;)\r\n    \tpublic String readWeather(\r\n    \t\t\t@RequestParam(value=&quot;x&quot;)int x,\r\n    \t\t\t@RequestParam(value=&quot;y&quot;)int y,\r\n    \t\t\t@RequestParam(value=&quot;baseDate&quot;)String baseDate) {\r\n    \t\t\r\n    \t\tString tempKey = baseDate+String.valueOf(x)+String.valueOf(y);\r\n    \t\t\r\n    \t\ttr = new TempRequest(x,y,baseDate,tempKey);\r\n    \t\t\r\n    \t\treturn tr.toString();\r\n    \t}\r\n    \t\r\n    }\r\n\r\nAnd to use these beans I added a packges with using scanBasePackages in main class.\r\nApplication Class\r\n\r\n    package com.wook.run;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.scheduling.annotation.EnableScheduling;\r\n    \r\n    @EnableScheduling\r\n    @SpringBootApplication(scanBasePackages= {&quot;com.wook.controller&quot;,&quot;com.wook.model&quot;,&quot;com.wook.service&quot;})\r\n    public class Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tSpringApplication.run(Application.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\nHowever with this code I get an error like this.\r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 0 of constructor in com.wook.model.dto.TempRequest required a bean of type &#39;int&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;int&#39; in your configuration.\r\n\r\n\r\nHow can I solve this problem?","title":"&quot;Bean type int could not be found&quot; error, how can I solve it?","body":"<p>I made a TempRequest class and registed as a bean</p>\n<p>The code below is TempRequest class.</p>\n<pre><code>package com.wook.model.dto;\n\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TempRequest {\n\n    private int x;\n    private int y;\n    private String baseDate;\n    private String tempKey; \n    \n    public TempRequest(int x, int y, String baseDate, String tempKey) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.baseDate = baseDate;\n        this.tempKey = tempKey;\n    }\n\n    public String getTempKey() {\n        return tempKey;\n    }\n\n    public void setTempKey(String tempKey) {\n        this.tempKey = tempKey;\n    }\n\n    public int getX() {\n        return x;\n    }\n\n    public void setX(int x) {\n        this.x = x;\n    }\n\n    public int getY() {\n        return y;\n    }\n\n    public void setY(int y) {\n        this.y = y;\n    }\n\n    public String getBaseDate() {\n        return baseDate;\n    }\n\n    public void setBaseDate(String baseDate) {\n        this.baseDate = baseDate;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;TempRequest [x=&quot; + x + &quot;, y=&quot; + y + &quot;, baseDate=&quot; + baseDate + &quot;, tempKey=&quot; + tempKey + &quot;]&quot;;\n    }\n    \n}\n</code></pre>\n<p>To use TempRequest class I Autowired at ReadWeatherController class</p>\n<p>ReadWeatherController Class</p>\n<pre><code>package com.wook.controller;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.wook.model.dto.TempRequest;\n\n@RestController\npublic class ReadWeatherController {\n\n    private TempRequest tr;\n\n    public ReadWeatherController(TempRequest tr) {\n        super();\n        this.tr = tr;\n    }\n\n\n    //이제 여기다가 API를 만들면됨\n    @GetMapping(&quot;/todayMaxMin&quot;)\n    public String readWeather(\n            @RequestParam(value=&quot;x&quot;)int x,\n            @RequestParam(value=&quot;y&quot;)int y,\n            @RequestParam(value=&quot;baseDate&quot;)String baseDate) {\n        \n        String tempKey = baseDate+String.valueOf(x)+String.valueOf(y);\n        \n        tr = new TempRequest(x,y,baseDate,tempKey);\n        \n        return tr.toString();\n    }\n    \n}\n</code></pre>\n<p>And to use these beans I added a packges with using scanBasePackages in main class.\nApplication Class</p>\n<pre><code>package com.wook.run;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.scheduling.annotation.EnableScheduling;\n\n@EnableScheduling\n@SpringBootApplication(scanBasePackages= {&quot;com.wook.controller&quot;,&quot;com.wook.model&quot;,&quot;com.wook.service&quot;})\npublic class Application {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>However with this code I get an error like this.</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Parameter 0 of constructor in com.wook.model.dto.TempRequest required a bean of type 'int' that could not be found.</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'int' in your configuration.</p>\n<p>How can I solve this problem?</p>\n"},{"tags":["java","amazon-web-services","mocking","mockito","amazon-kinesis"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639166308,"creation_date":1639166308,"answer_id":70309780,"question_id":70309649,"body_markdown":"Exception message you&#39;ve received tells that `worker.run()` method was never called within your test. You could changes the set-up of increase sleeping time. The test passes as soon as `worker.run()` is called at least once.","title":"Wanted but not invoked. Actually, there were zero interactions with this mock. Kinesis.Worker AWS","body":"<p>Exception message you've received tells that <code>worker.run()</code> method was never called within your test. You could changes the set-up of increase sleeping time. The test passes as soon as <code>worker.run()</code> is called at least once.</p>\n"}],"owner":{"account_id":4784964,"reputation":475,"user_id":3865734,"accept_rate":20,"display_name":"Allanh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1639413044,"creation_date":1639165439,"question_id":70309649,"body_markdown":"I have tried several things to solve this exception. This is an existent test in the application that I had never worked.\r\n\r\n     import com.amazonaws.services.kinesis.clientlibrary.lib.worker.KinesisClientLibConfiguration;\r\n    import com.amazonaws.services.kinesis.clientlibrary.lib.worker.Worker;\r\n    \r\n    @ExtendWith(MockitoExtension.class)\r\n    class TeamEventStreamWorkerTest {\r\n        @Mock\r\n        Worker worker;\r\n    \r\n        @Mock\r\n        KinesisClientLibConfiguration kinesisClientLibConfiguration;\r\n    \r\n        @Test\r\n        void onApplicationEvent() throws InterruptedException {\r\n            TeamEventStreamWorker teamEventStreamWorker = new TeamEventStreamWorker(null, null, null, kinesisClientLibConfiguration, null) {\r\n                Worker createDynamoDbStreamsWorker() {\r\n                    return worker;\r\n                }\r\n            };\r\n    \r\n            doNothing().when(worker).run();\r\n    \r\n            teamEventStreamWorker.onApplicationEvent(null);\r\n    \r\n            // Wait to make sure worker run is called by the async mechanism\r\n            Thread.sleep(1000);\r\n    \r\n            verify(worker).run();\r\n    \r\n        }\r\n    }\r\n\r\nI know the problem is with ***worker.run()*** method. worker and kinesis object are objects for the library of Kinesis from amazon.\r\n\r\nNote: The most strange thing is when I test in my local machine(IntelliJ) works perfect, but when I do a push and the Jenkins job starts to try, always returns the same error.\r\n","title":"Wanted but not invoked. Actually, there were zero interactions with this mock. Kinesis.Worker AWS","body":"<p>I have tried several things to solve this exception. This is an existent test in the application that I had never worked.</p>\n<pre><code> import com.amazonaws.services.kinesis.clientlibrary.lib.worker.KinesisClientLibConfiguration;\nimport com.amazonaws.services.kinesis.clientlibrary.lib.worker.Worker;\n\n@ExtendWith(MockitoExtension.class)\nclass TeamEventStreamWorkerTest {\n    @Mock\n    Worker worker;\n\n    @Mock\n    KinesisClientLibConfiguration kinesisClientLibConfiguration;\n\n    @Test\n    void onApplicationEvent() throws InterruptedException {\n        TeamEventStreamWorker teamEventStreamWorker = new TeamEventStreamWorker(null, null, null, kinesisClientLibConfiguration, null) {\n            Worker createDynamoDbStreamsWorker() {\n                return worker;\n            }\n        };\n\n        doNothing().when(worker).run();\n\n        teamEventStreamWorker.onApplicationEvent(null);\n\n        // Wait to make sure worker run is called by the async mechanism\n        Thread.sleep(1000);\n\n        verify(worker).run();\n\n    }\n}\n</code></pre>\n<p>I know the problem is with <em><strong>worker.run()</strong></em> method. worker and kinesis object are objects for the library of Kinesis from amazon.</p>\n<p>Note: The most strange thing is when I test in my local machine(IntelliJ) works perfect, but when I do a push and the Jenkins job starts to try, always returns the same error.</p>\n"},{"tags":["java","android","material-components-android","material-components"],"owner":{"account_id":15139628,"reputation":329,"user_id":10925023,"display_name":"Cyrille"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":657,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639412976,"creation_date":1638306048,"question_id":70176011,"body_markdown":"I&#39;m trying to update my theme with the new Material You, it&#39;s working when I select a color in Android parameter (Screenshot red part) but when I disable it (blue part) I&#39;ve got the default value color set in the SDK xml.\r\nExample with: @android:color/system_accent1_0\r\n\r\nI want to know how to check when user select it or not (red or blue part in screenshot), this way i will use another theme when disable. I guess I need to use the new method: applyToActivitiesIfAvailable :\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n            DynamicColors.applyToActivitiesIfAvailable(this, R.style.AppDynamicTheme, (activity, themeResId) -&gt; {\r\n            // ...implement your own logic here. Return `true` if dynamic colors should be applied.\r\n            return true; // &lt;- How to know if it&#39;s enable or disable in Android parameter ?\r\n    });}\r\n\r\nMy 2nd question is about the icon of the application, when i put blank color in background of ic_launcher.xml it works but not with another color, do you know why ?\r\n\r\nThanks\r\n\r\n[![Android 12 material you cokors][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3pEwU.jpg","title":"Android 12 and material you detection","body":"<p>I'm trying to update my theme with the new Material You, it's working when I select a color in Android parameter (Screenshot red part) but when I disable it (blue part) I've got the default value color set in the SDK xml.\nExample with: @android:color/system_accent1_0</p>\n<p>I want to know how to check when user select it or not (red or blue part in screenshot), this way i will use another theme when disable. I guess I need to use the new method: applyToActivitiesIfAvailable :</p>\n<pre><code>@Override\npublic void onCreate() {\n    super.onCreate();\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n        DynamicColors.applyToActivitiesIfAvailable(this, R.style.AppDynamicTheme, (activity, themeResId) -&gt; {\n        // ...implement your own logic here. Return `true` if dynamic colors should be applied.\n        return true; // &lt;- How to know if it's enable or disable in Android parameter ?\n});}\n</code></pre>\n<p>My 2nd question is about the icon of the application, when i put blank color in background of ic_launcher.xml it works but not with another color, do you know why ?</p>\n<p>Thanks</p>\n<p><a href=\"https://i.stack.imgur.com/3pEwU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3pEwU.jpg\" alt=\"Android 12 material you cokors\" /></a></p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"score":0,"creation_date":1481415585,"post_id":41081726,"comment_id":69369558,"body_markdown":"Have you tried something? It&#39;s not clear what you&#39;re stuck on.","body":"Have you tried something? It&#39;s not clear what you&#39;re stuck on."},{"owner":{"account_id":922885,"reputation":2206,"user_id":954224,"accept_rate":90,"display_name":"Rawr"},"score":0,"creation_date":1481416202,"post_id":41081726,"comment_id":69369661,"body_markdown":"Sorry about that, I&#39;ve tried to better explain the issue I&#39;m trying to solve with an example of one of the approaches I&#39;ve been trying to take.","body":"Sorry about that, I&#39;ve tried to better explain the issue I&#39;m trying to solve with an example of one of the approaches I&#39;ve been trying to take."}],"answers":[{"tags":[],"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1481435237,"creation_date":1481428446,"answer_id":41082832,"question_id":41081726,"body_markdown":"Jackson will do it for you. Just annotate your objects with `@JsonIdentityInfo`:\r\n\r\n    @JsonIdentityInfo(scope=School.class, generator=ObjectIdGenerators.PropertyGenerator.class, property=&quot;id&quot;)\r\n    public class School {\r\n        private Integer id;\r\n        private String name;\r\n\r\n        public School() {\r\n        }\r\n\r\n        public School(Integer id, String name) {\r\n            this.id = id;\r\n            this.name = name;\r\n        }\r\n\r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n\r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\n    @JsonIdentityInfo(scope=Student.class, generator=ObjectIdGenerators.PropertyGenerator.class, property=&quot;id&quot;)\r\n    public class Student {\r\n        private Integer id;\r\n        private String name;\r\n        private School school;\r\n\r\n        public Student() {\r\n        }\r\n\r\n        public Student(Integer id, String name, School school) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.school = school;\r\n        }\r\n\r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n\r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n\r\n        public School getSchool() {\r\n            return school;\r\n        }\r\n\r\n        public void setSchool(School school) {\r\n            this.school = school;\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        School school = new School(1, &quot;St Magdalene&#39;s&quot;);\r\n        Student mary = new Student(1, &quot;Mary&quot;, school);\r\n        Student bob = new Student(2, &quot;Bob&quot;, school);\r\n        Student[] students = new Student[] {mary, bob};\r\n\r\n        // Write out\r\n        String serialized = mapper.writeValueAsString(students);\r\n        System.out.println(&quot;Serialized: &quot; + serialized);\r\n        // Read in\r\n        Student[] deserialized = mapper.readValue(serialized, Student[].class);\r\n    }\r\n","title":"Deserialize with Jackson with reference to an existing object","body":"<p>Jackson will do it for you. Just annotate your objects with <code>@JsonIdentityInfo</code>:</p>\n\n<pre><code>@JsonIdentityInfo(scope=School.class, generator=ObjectIdGenerators.PropertyGenerator.class, property=\"id\")\npublic class School {\n    private Integer id;\n    private String name;\n\n    public School() {\n    }\n\n    public School(Integer id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n\n@JsonIdentityInfo(scope=Student.class, generator=ObjectIdGenerators.PropertyGenerator.class, property=\"id\")\npublic class Student {\n    private Integer id;\n    private String name;\n    private School school;\n\n    public Student() {\n    }\n\n    public Student(Integer id, String name, School school) {\n        this.id = id;\n        this.name = name;\n        this.school = school;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public School getSchool() {\n        return school;\n    }\n\n    public void setSchool(School school) {\n        this.school = school;\n    }\n}\n\npublic static void main(String[] args) throws IOException {\n    School school = new School(1, \"St Magdalene's\");\n    Student mary = new Student(1, \"Mary\", school);\n    Student bob = new Student(2, \"Bob\", school);\n    Student[] students = new Student[] {mary, bob};\n\n    // Write out\n    String serialized = mapper.writeValueAsString(students);\n    System.out.println(\"Serialized: \" + serialized);\n    // Read in\n    Student[] deserialized = mapper.readValue(serialized, Student[].class);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":994572,"reputation":8429,"user_id":1010868,"accept_rate":69,"display_name":"Tomasz Gawel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1639412373,"creation_date":1639412373,"answer_id":70337743,"question_id":41081726,"body_markdown":"With classes defined as below:\r\n   \r\n    @JsonIdentityInfo(property = &quot;id&quot;, generator = ObjectIdGenerators.PropertyGenerator.class)\r\n    class School {\r\n        public Integer id;\r\n        public String name;\r\n    }\r\n    \r\n    class Student {\r\n        public Integer id;\r\n        public String name;\r\n        @JsonIdentityReference(alwaysAsId = true)\r\n        public School school;\r\n    }\r\n\r\n    class All {\r\n        public List&lt;School&gt; schools;\r\n        public List&lt;Student&gt; students;\r\n    }\r\n\r\nThis works exactly as You intended:\r\n\r\n    @Test\r\n    public void test() throws JsonProcessingException {\r\n        var json = &quot;{&quot; +\r\n                &quot;\\&quot;schools\\&quot;:[&quot; +\r\n                &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;School A\\&quot;},&quot; +\r\n                &quot;{\\&quot;id\\&quot;:2,\\&quot;name\\&quot;:\\&quot;School B\\&quot;}&quot; +\r\n                &quot;],&quot; +\r\n                &quot;\\&quot;students\\&quot;:[&quot; +\r\n                &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Bobby\\&quot;,\\&quot;school\\&quot;:1}&quot; +\r\n                &quot;]&quot; +\r\n                &quot;}&quot;;\r\n        var mapper = new ObjectMapper();\r\n        var all =  mapper.readValue(json, All.class);\r\n        Assertions.assertThat(all.students.get(0).school).isSameAs(all.schools.get(0));\r\n    }\r\n","title":"Deserialize with Jackson with reference to an existing object","body":"<p>With classes defined as below:</p>\n<pre><code>@JsonIdentityInfo(property = &quot;id&quot;, generator = ObjectIdGenerators.PropertyGenerator.class)\nclass School {\n    public Integer id;\n    public String name;\n}\n\nclass Student {\n    public Integer id;\n    public String name;\n    @JsonIdentityReference(alwaysAsId = true)\n    public School school;\n}\n\nclass All {\n    public List&lt;School&gt; schools;\n    public List&lt;Student&gt; students;\n}\n</code></pre>\n<p>This works exactly as You intended:</p>\n<pre><code>@Test\npublic void test() throws JsonProcessingException {\n    var json = &quot;{&quot; +\n            &quot;\\&quot;schools\\&quot;:[&quot; +\n            &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;School A\\&quot;},&quot; +\n            &quot;{\\&quot;id\\&quot;:2,\\&quot;name\\&quot;:\\&quot;School B\\&quot;}&quot; +\n            &quot;],&quot; +\n            &quot;\\&quot;students\\&quot;:[&quot; +\n            &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Bobby\\&quot;,\\&quot;school\\&quot;:1}&quot; +\n            &quot;]&quot; +\n            &quot;}&quot;;\n    var mapper = new ObjectMapper();\n    var all =  mapper.readValue(json, All.class);\n    Assertions.assertThat(all.students.get(0).school).isSameAs(all.schools.get(0));\n}\n</code></pre>\n"}],"owner":{"account_id":922885,"reputation":2206,"user_id":954224,"accept_rate":90,"display_name":"Rawr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5492,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":41082832,"answer_count":2,"score":13,"last_activity_date":1639412373,"creation_date":1481415372,"question_id":41081726,"body_markdown":"JSON\r\n\r\n    {\r\n      &quot;schools&quot;: [\r\n        {\r\n          &quot;id&quot;: 1,\r\n          &quot;name&quot;: &quot;School A&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 2,\r\n          &quot;name&quot;: &quot;School B&quot;\r\n        }\r\n      ],\r\n      &quot;students&quot;: [\r\n        {\r\n          &quot;id&quot;: 1,\r\n          &quot;name&quot;: &quot;Bobby&quot;,\r\n          &quot;school&quot;: 1\r\n        }\r\n      ]\r\n    \r\n    }\r\n\r\nHow would I map the JSON into the following classes such that Bobby&#39;s school is mapped to the already instantiated School A.\r\n\r\n    public class School {\r\n      private Integer id;\r\n      private String name;\r\n    }\r\n    \r\n    public class Student {\r\n      private Integer id;\r\n      private String name;\r\n      private School school;\r\n    }\r\n\r\nI&#39;ve tried some weird stuff with the Student class...\r\n\r\n    public class Student {\r\n      private Integer id;\r\n      private String name;\r\n      private School school;\r\n    \r\n      @JsonProperty(&quot;school&quot;)\r\n      public void setSchool(Integer sid) {\r\n        for (School school : getSchools()) {\r\n          if (school.id == sid) {\r\n            this.school = school;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nThe problem I&#39;m having is that both the schools and the students are being parsed from the JSON at the same time, so I&#39;m not sure how to get a list of the schools. Maybe I should parse these separately so I have the list of schools first?","title":"Deserialize with Jackson with reference to an existing object","body":"<p>JSON</p>\n\n<pre><code>{\n  \"schools\": [\n    {\n      \"id\": 1,\n      \"name\": \"School A\"\n    },\n    {\n      \"id\": 2,\n      \"name\": \"School B\"\n    }\n  ],\n  \"students\": [\n    {\n      \"id\": 1,\n      \"name\": \"Bobby\",\n      \"school\": 1\n    }\n  ]\n\n}\n</code></pre>\n\n<p>How would I map the JSON into the following classes such that Bobby's school is mapped to the already instantiated School A.</p>\n\n<pre><code>public class School {\n  private Integer id;\n  private String name;\n}\n\npublic class Student {\n  private Integer id;\n  private String name;\n  private School school;\n}\n</code></pre>\n\n<p>I've tried some weird stuff with the Student class...</p>\n\n<pre><code>public class Student {\n  private Integer id;\n  private String name;\n  private School school;\n\n  @JsonProperty(\"school\")\n  public void setSchool(Integer sid) {\n    for (School school : getSchools()) {\n      if (school.id == sid) {\n        this.school = school;\n        break;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>The problem I'm having is that both the schools and the students are being parsed from the JSON at the same time, so I'm not sure how to get a list of the schools. Maybe I should parse these separately so I have the list of schools first?</p>\n"},{"tags":["java","recursion","completable-future"],"answers":[{"tags":[],"owner":{"account_id":14237487,"reputation":107,"user_id":10284903,"display_name":"Peter Kažmirsk&#253;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639412367,"creation_date":1639412367,"answer_id":70337740,"question_id":70306924,"body_markdown":"I transformed my original code to something like this and it seems to be working:\r\n\r\n```\r\nprotected CompletableFuture&lt;List&lt;APIResult&lt;String&gt;&gt;&gt; generateDomainReport(\r\n            ExtendedDomainConfiguration domain,\r\n            ZonedDateTime chunkStartDate,\r\n            ZonedDateTime chunkEndDate) {\r\n\r\n        CompletableFuture&lt;APIResult&lt;String&gt;&gt; response = runReport(domain.getDomainName(), chunkStartDate, chunkEndDate);\r\n        return response.thenApplyAsync(report -&gt; {\r\n            // in case that count of report rows hit the limit, split timeWindow into two half,\r\n            // calculate middle date and run report for both intervals: &lt;startDate, middleDate&gt;; &lt;middleDate, endDate&gt;\r\n            if (isReportMaxRowCountReached(report.getContent(), domain.getMaxReportRowCount())) {\r\n                LOGGER.warn(String.format(\r\n                        &quot;CSV report limit row counts was reached. &quot; +\r\n                                &quot;Splitting window &lt;%s, %s&gt; into 2 parts and rerunning report&quot;,\r\n                        chunkStartDate, chunkEndDate));\r\n                Duration timeWindow = Duration.between(chunkStartDate, chunkEndDate);\r\n                ZonedDateTime chunkMiddleDate = chunkEndDate.minus(Duration.ofSeconds(timeWindow.getSeconds() / 2));\r\n                // recursively repeat until count of returned rows is under the limit\r\n                return generateDomainReport(domain, chunkStartDate, chunkMiddleDate)\r\n                        .thenCombineAsync(generateDomainReport(domain, chunkMiddleDate, chunkEndDate),\r\n                                (result1, result2) -&gt; {\r\n                                    List&lt;APIResult&lt;String&gt;&gt; result = new ArrayList&lt;&gt;(result1.size() + result2.size());\r\n                                    result.addAll(result1);\r\n                                    result.addAll(result2);\r\n                                    return result;\r\n                                }).join();\r\n            } else {\r\n                return List.of(report);\r\n            }\r\n        });\r\n    }\r\n```","title":"Collect CompletableFuture results in recursive calls","body":"<p>I transformed my original code to something like this and it seems to be working:</p>\n<pre><code>protected CompletableFuture&lt;List&lt;APIResult&lt;String&gt;&gt;&gt; generateDomainReport(\n            ExtendedDomainConfiguration domain,\n            ZonedDateTime chunkStartDate,\n            ZonedDateTime chunkEndDate) {\n\n        CompletableFuture&lt;APIResult&lt;String&gt;&gt; response = runReport(domain.getDomainName(), chunkStartDate, chunkEndDate);\n        return response.thenApplyAsync(report -&gt; {\n            // in case that count of report rows hit the limit, split timeWindow into two half,\n            // calculate middle date and run report for both intervals: &lt;startDate, middleDate&gt;; &lt;middleDate, endDate&gt;\n            if (isReportMaxRowCountReached(report.getContent(), domain.getMaxReportRowCount())) {\n                LOGGER.warn(String.format(\n                        &quot;CSV report limit row counts was reached. &quot; +\n                                &quot;Splitting window &lt;%s, %s&gt; into 2 parts and rerunning report&quot;,\n                        chunkStartDate, chunkEndDate));\n                Duration timeWindow = Duration.between(chunkStartDate, chunkEndDate);\n                ZonedDateTime chunkMiddleDate = chunkEndDate.minus(Duration.ofSeconds(timeWindow.getSeconds() / 2));\n                // recursively repeat until count of returned rows is under the limit\n                return generateDomainReport(domain, chunkStartDate, chunkMiddleDate)\n                        .thenCombineAsync(generateDomainReport(domain, chunkMiddleDate, chunkEndDate),\n                                (result1, result2) -&gt; {\n                                    List&lt;APIResult&lt;String&gt;&gt; result = new ArrayList&lt;&gt;(result1.size() + result2.size());\n                                    result.addAll(result1);\n                                    result.addAll(result2);\n                                    return result;\n                                }).join();\n            } else {\n                return List.of(report);\n            }\n        });\n    }\n</code></pre>\n"}],"owner":{"account_id":14237487,"reputation":107,"user_id":10284903,"display_name":"Peter Kažmirsk&#253;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70337740,"answer_count":1,"score":2,"last_activity_date":1639412367,"creation_date":1639150511,"question_id":70306924,"body_markdown":"I have following code, that is getting reports for given time interval from web API that returns CompletableFuture. In case that count of rows for returned report was exceeded, time interval will be splited into 2 half and API will be called for both halfs. This will be recursively repeated until count of rows satisfy condition. \r\n\r\nI would like to get **CompletableFuture&lt;List&lt;APIResult&lt;String&gt;&gt;&gt;** or even better **List&lt;CompletableFuture&lt;APIResult&lt;String&gt;&gt;&gt;** as result of this method.\r\n\r\nMy code run ok when there is no need for interval splitting. In case when recursion call is needed it will return just empty list and recursive calls are executed later on asynchronously. \r\n\r\n     protected CompletableFuture&lt;List&lt;APIResult&lt;String&gt;&gt;&gt; generateDomainReport(\r\n            ExtendedDomainConfiguration domain,\r\n            ZonedDateTime chunkStartDate,\r\n            ZonedDateTime chunkEndDate,\r\n            List&lt;APIResult&lt;String&gt;&gt; result) {\r\n\r\n        CompletableFuture&lt;APIResult&lt;String&gt;&gt; response = runReport(domain.getDomainName(), chunkStartDate, chunkEndDate);\r\n        return response.thenApply(report -&gt; {\r\n            // in case that count of report rows hit the limit, split timeWindow into two half,\r\n            // calculate middle date and run report for both intervals: &lt;startDate, middleDate&gt;; &lt;middleDate, endDate&gt;\r\n            if (isReportMaxRowCountReached(report.getContent(), domain.getMaxReportRowCount())) {\r\n                LOGGER.warn(String.format(\r\n                        &quot;Report limit row counts was reached. &quot; +\r\n                                &quot;Splitting window &lt;%s, %s&gt; into 2 parts and rerunning report&quot;,\r\n                        chunkStartDate, chunkEndDate));\r\n                Duration timeWindow = Duration.between(chunkStartDate, chunkEndDate);\r\n                ZonedDateTime chunkMiddleDate = chunkEndDate.minus(Duration.ofSeconds(timeWindow.getSeconds() / 2));\r\n                // recursively repeat until count of returned rows is under the limit\r\n                generateDomainReport(domain, chunkStartDate, chunkMiddleDate, result);\r\n                generateDomainReport(domain, chunkMiddleDate, chunkEndDate, result);\r\n            } else {\r\n                result.add(report);\r\n            }\r\n            return result;\r\n        });\r\n    }\r\n\r\n  I also tried use something like that but it didn&#39;t helped: \r\n\r\n```\r\nresponse\r\n.thenAccept(r -&gt; generateDomainReport(domain, chunkStartDate, chunkMiddleDate, result))\r\n.thenAccept(r -&gt; generateDomainReport(domain, chunkMiddleDate, chunkEndDate, result));\r\n```\r\n\r\nI will be thankful for any idea what I am doing wrong. Thanks","title":"Collect CompletableFuture results in recursive calls","body":"<p>I have following code, that is getting reports for given time interval from web API that returns CompletableFuture. In case that count of rows for returned report was exceeded, time interval will be splited into 2 half and API will be called for both halfs. This will be recursively repeated until count of rows satisfy condition.</p>\n<p>I would like to get <strong>CompletableFuture&lt;List&lt;APIResult&gt;&gt;</strong> or even better <strong>List&lt;CompletableFuture&lt;APIResult&gt;&gt;</strong> as result of this method.</p>\n<p>My code run ok when there is no need for interval splitting. In case when recursion call is needed it will return just empty list and recursive calls are executed later on asynchronously.</p>\n<pre><code> protected CompletableFuture&lt;List&lt;APIResult&lt;String&gt;&gt;&gt; generateDomainReport(\n        ExtendedDomainConfiguration domain,\n        ZonedDateTime chunkStartDate,\n        ZonedDateTime chunkEndDate,\n        List&lt;APIResult&lt;String&gt;&gt; result) {\n\n    CompletableFuture&lt;APIResult&lt;String&gt;&gt; response = runReport(domain.getDomainName(), chunkStartDate, chunkEndDate);\n    return response.thenApply(report -&gt; {\n        // in case that count of report rows hit the limit, split timeWindow into two half,\n        // calculate middle date and run report for both intervals: &lt;startDate, middleDate&gt;; &lt;middleDate, endDate&gt;\n        if (isReportMaxRowCountReached(report.getContent(), domain.getMaxReportRowCount())) {\n            LOGGER.warn(String.format(\n                    &quot;Report limit row counts was reached. &quot; +\n                            &quot;Splitting window &lt;%s, %s&gt; into 2 parts and rerunning report&quot;,\n                    chunkStartDate, chunkEndDate));\n            Duration timeWindow = Duration.between(chunkStartDate, chunkEndDate);\n            ZonedDateTime chunkMiddleDate = chunkEndDate.minus(Duration.ofSeconds(timeWindow.getSeconds() / 2));\n            // recursively repeat until count of returned rows is under the limit\n            generateDomainReport(domain, chunkStartDate, chunkMiddleDate, result);\n            generateDomainReport(domain, chunkMiddleDate, chunkEndDate, result);\n        } else {\n            result.add(report);\n        }\n        return result;\n    });\n}\n</code></pre>\n<p>I also tried use something like that but it didn't helped:</p>\n<pre><code>response\n.thenAccept(r -&gt; generateDomainReport(domain, chunkStartDate, chunkMiddleDate, result))\n.thenAccept(r -&gt; generateDomainReport(domain, chunkMiddleDate, chunkEndDate, result));\n</code></pre>\n<p>I will be thankful for any idea what I am doing wrong. Thanks</p>\n"},{"tags":["java","spring","spring-boot","spring-test"],"comments":[{"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"score":0,"creation_date":1636624798,"post_id":69921762,"comment_id":123609033,"body_markdown":"What about removing `@Import(TestConfig.class)` for this particular test? Or are there multiple bean definitions in there? Also, can you try to name the `externalApi` differently for this integration test, maybe `innerExternalApi`. Somehow the Spring Context caching mechanism must identify that you&#39;re working with a different context here.","body":"What about removing <code>@Import(TestConfig.class)</code> for this particular test? Or are there multiple bean definitions in there? Also, can you try to name the <code>externalApi</code> differently for this integration test, maybe <code>innerExternalApi</code>. Somehow the Spring Context caching mechanism must identify that you&#39;re working with a different context here."}],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636591676,"creation_date":1636591676,"answer_id":69921967,"question_id":69921762,"body_markdown":"This _seems_ like a bug in the Spring runner; `@TestConfiguration` shouldn&#39;t be propagated. As a workaround, try adding `@DirtiesContext` to your test to force a refresh.","title":"Spring @TestConfiguration affecting other test classes","body":"<p>This <em>seems</em> like a bug in the Spring runner; <code>@TestConfiguration</code> shouldn't be propagated. As a workaround, try adding <code>@DirtiesContext</code> to your test to force a refresh.</p>\n"},{"tags":[],"owner":{"account_id":6701110,"reputation":188,"user_id":5167545,"display_name":"Madis M&#228;nni"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1639412345,"creation_date":1639412345,"answer_id":70337733,"question_id":69921762,"body_markdown":"This works:\r\n\r\nConfiguration class:\r\n\r\n    // @TestConfiguration\r\n    // Put this class in a separate file\r\n    // NB! Do not annotate this class with @TestConfiguration,\r\n    // or else the configuration will be propagated to other tests!\r\n    public class UkvServiceTestContextConfiguration {\r\n\r\n\r\nTest suite that uses this configuration:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    \r\n    // NB! Do not use a nested static configuration class, use an external configuration class.\r\n    // Nested static configuration class gets propagated to other tests!\r\n    @Import(UkvServiceTestContextConfiguration.class)\r\n\r\npublic class UkvServiceTest {","title":"Spring @TestConfiguration affecting other test classes","body":"<p>This works:</p>\n<p>Configuration class:</p>\n<pre><code>// @TestConfiguration\n// Put this class in a separate file\n// NB! Do not annotate this class with @TestConfiguration,\n// or else the configuration will be propagated to other tests!\npublic class UkvServiceTestContextConfiguration {\n</code></pre>\n<p>Test suite that uses this configuration:</p>\n<pre><code>@RunWith(SpringRunner.class)\n\n// NB! Do not use a nested static configuration class, use an external configuration class.\n// Nested static configuration class gets propagated to other tests!\n@Import(UkvServiceTestContextConfiguration.class)\n</code></pre>\n<p>public class UkvServiceTest {</p>\n"}],"owner":{"account_id":2006296,"reputation":992,"user_id":1796101,"accept_rate":86,"display_name":"Pedro Estev&#227;o"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1840,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1639412345,"creation_date":1636589947,"question_id":69921762,"body_markdown":"I have several integration test classes, they all import configuration from a single `@Configuration` class, which is creating an `externalApi` mocked bean in a particular way (for illustration purposes, passing `true` as a constructor argument):\r\n\r\n```\r\n@Configuration\r\npublic class TestConfig {\r\n  \r\n  @Bean\r\n  @Primary\r\n  ExternalApi externalApi() {\r\n    return new MockExternalApi(true); // &lt;-- true by default for all test classes\r\n  }\r\n}\r\n```\r\nBut for a particular integration test class, I need to create that bean differently (let&#39;s say passing `false` as a constructor argument). In order to do that, I tried using `@TestConfiguration` in a static inner class as follows:\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(&quot;spring.main.allow-bean-definition-overriding=true&quot;)\r\n@Import(TestConfig.class)\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class ExampleIT {\r\n\r\n  @TestConfiguration\r\n  public static class ExternalApiConfig {\r\n\r\n    @Bean\r\n    @Primary\r\n    ExternalApi externalApi() {\r\n      return new MockExternalApi(false); // &lt;-- false for this particular test class\r\n    }\r\n  }\r\n\r\n  @Test\r\n  public void someTest() {...}\r\n}\r\n```\r\nThat works, however, when executing all my integration test classes at once (with `maven verify`, for example), all test classes executing after this one break. Since they share the same context, it seems that, after changing that bean, it remains changed (i.e., with that `false` argument) for all subsequent test classes as well. I tried to fix that using `@DirtiesContext` at the class level, so the context could be reloaded for next test classes, but it didn&#39;t work.\r\n\r\nIs there a way to achieve what I&#39;m trying to do?\r\n\r\n**Note**: If I add that same `@TestConfiguration` static inner class to all my other integration test classes, doing the opposite, i.e., creating the `externalApi` bean back with `true` arg, then they all work. But I certainly don&#39;t wish having to do that.","title":"Spring @TestConfiguration affecting other test classes","body":"<p>I have several integration test classes, they all import configuration from a single <code>@Configuration</code> class, which is creating an <code>externalApi</code> mocked bean in a particular way (for illustration purposes, passing <code>true</code> as a constructor argument):</p>\n<pre><code>@Configuration\npublic class TestConfig {\n  \n  @Bean\n  @Primary\n  ExternalApi externalApi() {\n    return new MockExternalApi(true); // &lt;-- true by default for all test classes\n  }\n}\n</code></pre>\n<p>But for a particular integration test class, I need to create that bean differently (let's say passing <code>false</code> as a constructor argument). In order to do that, I tried using <code>@TestConfiguration</code> in a static inner class as follows:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(&quot;spring.main.allow-bean-definition-overriding=true&quot;)\n@Import(TestConfig.class)\n@ActiveProfiles(&quot;test&quot;)\npublic class ExampleIT {\n\n  @TestConfiguration\n  public static class ExternalApiConfig {\n\n    @Bean\n    @Primary\n    ExternalApi externalApi() {\n      return new MockExternalApi(false); // &lt;-- false for this particular test class\n    }\n  }\n\n  @Test\n  public void someTest() {...}\n}\n</code></pre>\n<p>That works, however, when executing all my integration test classes at once (with <code>maven verify</code>, for example), all test classes executing after this one break. Since they share the same context, it seems that, after changing that bean, it remains changed (i.e., with that <code>false</code> argument) for all subsequent test classes as well. I tried to fix that using <code>@DirtiesContext</code> at the class level, so the context could be reloaded for next test classes, but it didn't work.</p>\n<p>Is there a way to achieve what I'm trying to do?</p>\n<p><strong>Note</strong>: If I add that same <code>@TestConfiguration</code> static inner class to all my other integration test classes, doing the opposite, i.e., creating the <code>externalApi</code> bean back with <code>true</code> arg, then they all work. But I certainly don't wish having to do that.</p>\n"},{"tags":["java","android","android-studio","gradle"],"answers":[{"tags":[],"owner":{"account_id":14608154,"reputation":33,"user_id":10550338,"display_name":"Grindewald1900"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639412229,"creation_date":1639412229,"answer_id":70337708,"question_id":70337433,"body_markdown":"Try: \r\n\r\n1. `Build` -&gt; `Clean Project` and then `Build` again  \r\n2. `File` -&gt; `Invalidate cache/restart` \r\n3. check your `run/debug` configuration in the top toolbar, it should be `app` by default.  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AH5mv.png","title":"Gradle screwed up my app in AndroidStudio, how to fix?","body":"<p>Try:</p>\n<ol>\n<li><code>Build</code> -&gt; <code>Clean Project</code> and then <code>Build</code> again</li>\n<li><code>File</code> -&gt; <code>Invalidate cache/restart</code></li>\n<li>check your <code>run/debug</code> configuration in the top toolbar, it should be <code>app</code> by default.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/AH5mv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AH5mv.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2336055,"reputation":737,"user_id":2048374,"accept_rate":63,"display_name":"Berit Larsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639412229,"creation_date":1639410978,"question_id":70337433,"body_markdown":"I&#39;m working on a new app in AndroidStudio, everything was working fine, I was testing the app on my phone, etc.\r\nThen at some point AndroidStudio gave me a popup in the lower right corner, something about Gradle. I didn&#39;t quite understand it, and hit Accept or something like that. Then suddenly something happened to all my projects in AndroidStudio (not just the one I was working on):\r\n\r\n - All build modules are gone. \r\n - I can&#39;t make any new build modules, because &quot;Error: Gradle project sync failed. Please fix your project and try again&quot;. I never synced anything with Gradle previously, why do I suddenly need to do something like this?\r\n - Clicking &quot;Sync project with Gradle files&quot; doesn&#39;t work: &quot;Plugin [id: &#39;com.android.application&#39;] was not found in any of the following sources&quot;. Where does &quot;com.android.application&quot; even come from? I never added any plugins anywhere.\r\n - &quot;Everything&quot; is wrong in all my Java files, I even get &quot;Cannot resolve symbol &#39;AppCompatActivity&#39;&quot; and &quot;Cannot resolve method &#39;OnCreate(android.os.Bundle)&#39;&quot;. Wtf?\r\n - All my Java files have this red symbol, which says &quot;Java file outside of source root&quot;. Why are they suddenly in the wrong place?\r\n\r\nNothing is working anymore, restarting AndroidStudio doesn&#39;t change anything, switching project doesn&#39;t change anything, and where did my build modules go?\r\nHow do I make this go back to normal?","title":"Gradle screwed up my app in AndroidStudio, how to fix?","body":"<p>I'm working on a new app in AndroidStudio, everything was working fine, I was testing the app on my phone, etc.\nThen at some point AndroidStudio gave me a popup in the lower right corner, something about Gradle. I didn't quite understand it, and hit Accept or something like that. Then suddenly something happened to all my projects in AndroidStudio (not just the one I was working on):</p>\n<ul>\n<li>All build modules are gone.</li>\n<li>I can't make any new build modules, because &quot;Error: Gradle project sync failed. Please fix your project and try again&quot;. I never synced anything with Gradle previously, why do I suddenly need to do something like this?</li>\n<li>Clicking &quot;Sync project with Gradle files&quot; doesn't work: &quot;Plugin [id: 'com.android.application'] was not found in any of the following sources&quot;. Where does &quot;com.android.application&quot; even come from? I never added any plugins anywhere.</li>\n<li>&quot;Everything&quot; is wrong in all my Java files, I even get &quot;Cannot resolve symbol 'AppCompatActivity'&quot; and &quot;Cannot resolve method 'OnCreate(android.os.Bundle)'&quot;. Wtf?</li>\n<li>All my Java files have this red symbol, which says &quot;Java file outside of source root&quot;. Why are they suddenly in the wrong place?</li>\n</ul>\n<p>Nothing is working anymore, restarting AndroidStudio doesn't change anything, switching project doesn't change anything, and where did my build modules go?\nHow do I make this go back to normal?</p>\n"},{"tags":["java","count","floating-point","digits"],"comments":[{"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1639409470,"post_id":70337055,"comment_id":124335002,"body_markdown":"Try running your code in a debugger, so that you can step through it line by line and see what the values of variables are at each point in the code. Or try adding `System.out.println(...);` statements at strategic points to understand what&#39;s happening.","body":"Try running your code in a debugger, so that you can step through it line by line and see what the values of variables are at each point in the code. Or try adding <code>System.out.println(...);</code> statements at strategic points to understand what&#39;s happening."},{"owner":{"account_id":1437198,"reputation":15509,"user_id":1358308,"accept_rate":56,"display_name":"Sam Mason"},"score":0,"creation_date":1639422437,"post_id":70337055,"comment_id":124339849,"body_markdown":"using binary floating point types (e.g. `float` or `double`) cause a number of implementation artifacts for you to deal with. using `BigDecimal` might be more suitable unless you&#39;re specifically learning about ieee754 numbers","body":"using binary floating point types (e.g. <code>float</code> or <code>double</code>) cause a number of implementation artifacts for you to deal with. using <code>BigDecimal</code> might be more suitable unless you&#39;re specifically learning about ieee754 numbers"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639412078,"creation_date":1639412078,"answer_id":70337676,"question_id":70337055,"body_markdown":"If some debug logging is added to the second loop, it can be seen, that when multiplying a `double` number by 10, there is a tiny error which does not allow the comparison `n == (int) n` ever become true.\r\n\r\nIt is actually a known issue that floating-point arithmetics has a certain computation error, so it should be taken into account when comparing the `double n` to its counterpart with the decimal point shifted right:\r\n```java\r\ndo {\r\n    count++;\r\n    n = n * 10;\r\n    System.out.println(count + &quot; - &quot; + n);\r\n} while (Math.abs(n - (int) n) &gt; 1E-7);\r\n\r\nSystem.out.println(count + &quot; total digits present in the number.&quot;);\r\n```\r\nOutput:\r\n```\r\n58.234\r\nBefore Decimal Digits: 2\r\n3 - 582.34\r\n4 - 5823.400000000001\r\n5 - 58234.00000000001\r\n5 total digits present in the number.\r\n```","title":"Why does this java code to count digit of floating value goes in loop for this value?","body":"<p>If some debug logging is added to the second loop, it can be seen, that when multiplying a <code>double</code> number by 10, there is a tiny error which does not allow the comparison <code>n == (int) n</code> ever become true.</p>\n<p>It is actually a known issue that floating-point arithmetics has a certain computation error, so it should be taken into account when comparing the <code>double n</code> to its counterpart with the decimal point shifted right:</p>\n<pre class=\"lang-java prettyprint-override\"><code>do {\n    count++;\n    n = n * 10;\n    System.out.println(count + &quot; - &quot; + n);\n} while (Math.abs(n - (int) n) &gt; 1E-7);\n\nSystem.out.println(count + &quot; total digits present in the number.&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>58.234\nBefore Decimal Digits: 2\n3 - 582.34\n4 - 5823.400000000001\n5 - 58234.00000000001\n5 total digits present in the number.\n</code></pre>\n"}],"owner":{"account_id":23092994,"reputation":31,"user_id":17203573,"display_name":"Harsh Lakhara"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70337676,"answer_count":1,"score":1,"last_activity_date":1639412078,"creation_date":1639409211,"question_id":70337055,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\nclass FloatDigit {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tdouble n = sc.nextDouble();\r\n\t\tint x = (int) n;\r\n\t\tint count = 0;\r\n\t\tdo {\r\n\t\t\tcount++;\r\n\t\t\tx = x / 10;\r\n\t\t} while (x != 0);\r\n\r\n\t\tSystem.out.println(&quot;Before Decimal Digits: &quot; + count); \r\n        //it gets stuck from here only\r\n\r\n\t\tdo {\r\n\t\t\tcount++;\r\n\t\t\tn = n * 10;\r\n\t\t} while (n != (int) n);\r\n\t\tSystem.out.println(count + &quot; total digits present in there in number.&quot;);\r\n\t}\r\n}\r\n```\r\nThis goes in an infinite loop for the value: 58.2354/58.234. It is working fine with other values too and longer values too.","title":"Why does this java code to count digit of floating value goes in loop for this value?","body":"<pre><code>import java.util.Scanner;\n\nclass FloatDigit {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        double n = sc.nextDouble();\n        int x = (int) n;\n        int count = 0;\n        do {\n            count++;\n            x = x / 10;\n        } while (x != 0);\n\n        System.out.println(&quot;Before Decimal Digits: &quot; + count); \n        //it gets stuck from here only\n\n        do {\n            count++;\n            n = n * 10;\n        } while (n != (int) n);\n        System.out.println(count + &quot; total digits present in there in number.&quot;);\n    }\n}\n</code></pre>\n<p>This goes in an infinite loop for the value: 58.2354/58.234. It is working fine with other values too and longer values too.</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1615738082,"post_id":66616073,"comment_id":117778472,"body_markdown":"Maybe you missed to upgrade facing an already fixed issue: https://github.com/eclipse/lemminx/issues/419","body":"Maybe you missed to upgrade facing an already fixed issue: <a href=\"https://github.com/eclipse/lemminx/issues/419\" rel=\"nofollow noreferrer\">github.com/eclipse/lemminx/issues/419</a>"}],"answers":[{"tags":[],"owner":{"account_id":16707523,"reputation":391,"user_id":12138701,"display_name":"Cl&#233;ment Gibert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639412066,"creation_date":1624458585,"answer_id":68101818,"question_id":66616073,"body_markdown":"I have the same problem with each XML files in my Eclipse. In my case this is caused because I use an enterprise proxy and an &quot;older&quot; version of Eclipse (2019). That put a lot of &quot;red cross errors&quot; on all of my projects folders but that will not avoid it to work. I think you can fix it by configuring &quot;Network Connections&quot; in a newer version.","title":"error while downloading web-app_4_0.xsd in dynamic web app eclipse","body":"<p>I have the same problem with each XML files in my Eclipse. In my case this is caused because I use an enterprise proxy and an &quot;older&quot; version of Eclipse (2019). That put a lot of &quot;red cross errors&quot; on all of my projects folders but that will not avoid it to work. I think you can fix it by configuring &quot;Network Connections&quot; in a newer version.</p>\n"}],"owner":{"account_id":18344699,"reputation":37,"user_id":13360115,"display_name":"akalanka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1778,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68101818,"answer_count":1,"score":1,"last_activity_date":1639412066,"creation_date":1615653991,"question_id":66616073,"body_markdown":"when I try to make maven dynamic web project in eclipse this error occurred  \r\n\r\n&gt; Error while downloading &#39;http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&#39; to C:\\Users\\akalanka\\.lemminx\\cache\\http\\xmlns.jcp.org\\xml\\ns\\javaee\\web-app_4_0.xsd.\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n    \txsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\r\n    \tid=&quot;WebApp_ID&quot; version=&quot;4.0&quot;&gt;","title":"error while downloading web-app_4_0.xsd in dynamic web app eclipse","body":"<p>when I try to make maven dynamic web project in eclipse this error occurred</p>\n<blockquote>\n<p>Error while downloading 'http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd' to C:\\Users\\akalanka.lemminx\\cache\\http\\xmlns.jcp.org\\xml\\ns\\javaee\\web-app_4_0.xsd.</p>\n</blockquote>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\n    xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\n    id=&quot;WebApp_ID&quot; version=&quot;4.0&quot;&gt;\n</code></pre>\n"},{"tags":["java","maven","gradle","javafx","openjfx"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1639429631,"post_id":70335216,"comment_id":124342034,"body_markdown":"The javafx 17 modules in maven central (used by gradle) are broken, try using [javafx 17.0.1](https://stackoverflow.com/a/69137635/1155209).","body":"The javafx 17 modules in maven central (used by gradle) are broken, try using <a href=\"https://stackoverflow.com/a/69137635/1155209\">javafx 17.0.1</a>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1639429712,"post_id":70335216,"comment_id":124342049,"body_markdown":"All of the implementation is packed into the platform specific jars which will (if everything works correctly) also be downloaded and used for your environment without you having to specify anything else (at least maven works that way, I don&#39;t use gradle, but I believe it will be the same).  The non-platform specific jars are very small because they contain no implementation, it is just how the JavaFX team chose to package the maven artifacts.","body":"All of the implementation is packed into the platform specific jars which will (if everything works correctly) also be downloaded and used for your environment without you having to specify anything else (at least maven works that way, I don&#39;t use gradle, but I believe it will be the same).  The non-platform specific jars are very small because they contain no implementation, it is just how the JavaFX team chose to package the maven artifacts."},{"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"score":0,"creation_date":1639430553,"post_id":70335216,"comment_id":124342273,"body_markdown":"@jewelsea is doesn&#39;t download. Why would it?","body":"@jewelsea is doesn&#39;t download. Why would it?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1639430813,"post_id":70335216,"comment_id":124342355,"body_markdown":"I don&#39;t know how the mechanism works, I just know that it works, at least if you use Maven, and I am sure Gradle is not different in that respect.  You can see the [javafx-base artifacts here](https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/), javafx-base-17.0.1.jar is only 302 bytes.  javafx-base-17.0.1-win.jar is 746018 bytes.  Without the platform specific jars you don&#39;t have an implementation.","body":"I don&#39;t know how the mechanism works, I just know that it works, at least if you use Maven, and I am sure Gradle is not different in that respect.  You can see the <a href=\"https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/\" rel=\"nofollow noreferrer\">javafx-base artifacts here</a>, javafx-base-17.0.1.jar is only 302 bytes.  javafx-base-17.0.1-win.jar is 746018 bytes.  Without the platform specific jars you don&#39;t have an implementation."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1639430948,"post_id":70335216,"comment_id":124342401,"body_markdown":"I checked it out to see how it works, it&#39;s pretty simple, the platform specific artifact is a dependency of the the non-platform specific artifact.  See the [pom.xml](https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/javafx-base-17.0.1.pom).  Fetching transitive dependencies is something both maven and gradle will do by default.","body":"I checked it out to see how it works, it&#39;s pretty simple, the platform specific artifact is a dependency of the the non-platform specific artifact.  See the <a href=\"https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/javafx-base-17.0.1.pom\" rel=\"nofollow noreferrer\">pom.xml</a>.  Fetching transitive dependencies is something both maven and gradle will do by default."},{"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"score":1,"creation_date":1639431054,"post_id":70335216,"comment_id":124342433,"body_markdown":"Hm, it really worked. May be 17-th was really broken...","body":"Hm, it really worked. May be 17-th was really broken..."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1639431079,"post_id":70335216,"comment_id":124342444,"body_markdown":"Yes, it really is . . .","body":"Yes, it really is . . ."}],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1639431116,"answer_count":0,"score":0,"last_activity_date":1639411980,"creation_date":1639401090,"question_id":70335216,"body_markdown":"I wrote \r\n\r\n    // https://mvnrepository.com/artifact/org.openjfx/javafx-base\r\n    implementation group: &#39;org.openjfx&#39;, name: &#39;javafx-base&#39;, version: &#39;17.0.1&#39;\r\n\r\nin my geadle file and got empty jar. On [jars page][1] I see, that [generic jar][2] is really empty, while platform specific are not. \r\n\r\nHow should I describe my dependency here then?\r\n\r\n***\r\n\r\nNext I wrote\r\n\r\n    plugins {\r\n        id &#39;org.openjfx.javafxplugin&#39; version &#39;0.0.10&#39;\r\n    }\r\n    \r\n    javafx {\r\n        version = &quot;17&quot;\r\n        modules = [ &#39;javafx.base&#39; ]\r\n    }\r\n\r\nbut this didn&#39;t help\r\n\r\n\r\n  [1]: https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/\r\n  [2]: https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/javafx-base-17.0.1.jar","title":"Getting empty jars while importing javafx libraries with maven or gradle","body":"<p>I wrote</p>\n<pre><code>// https://mvnrepository.com/artifact/org.openjfx/javafx-base\nimplementation group: 'org.openjfx', name: 'javafx-base', version: '17.0.1'\n</code></pre>\n<p>in my geadle file and got empty jar. On <a href=\"https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/\" rel=\"nofollow noreferrer\">jars page</a> I see, that <a href=\"https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.1/javafx-base-17.0.1.jar\" rel=\"nofollow noreferrer\">generic jar</a> is really empty, while platform specific are not.</p>\n<p>How should I describe my dependency here then?</p>\n<hr />\n<p>Next I wrote</p>\n<pre><code>plugins {\n    id 'org.openjfx.javafxplugin' version '0.0.10'\n}\n\njavafx {\n    version = &quot;17&quot;\n    modules = [ 'javafx.base' ]\n}\n</code></pre>\n<p>but this didn't help</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8227,"page":1765,"page_size":100}
