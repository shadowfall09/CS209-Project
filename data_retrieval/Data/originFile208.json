{"items":[{"tags":["java","apache-kafka","jsonschema","confluent-schema-registry"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693516298,"post_id":77018866,"comment_id":135775513,"body_markdown":"1) Please show your property file, we don&#39;t know what serializer you&#39;re using 2) You probably shouldn&#39;t use `Object` for JSONSchema. Use [a custom class](https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java#L188) or a Map, which both need `age` fields/keys, not `myField1`","body":"1) Please show your property file, we don&#39;t know what serializer you&#39;re using 2) You probably shouldn&#39;t use <code>Object</code> for JSONSchema. Use <a href=\"https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java#L188\" rel=\"nofollow noreferrer\">a custom class</a> or a Map, which both need <code>age</code> fields/keys, not <code>myField1</code>"},{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":1,"creation_date":1693516326,"post_id":77018866,"comment_id":135775517,"body_markdown":"The schema has the attribute &#39;age&#39; and the code &#39;myField1&#39;. They are not the same.","body":"The schema has the attribute &#39;age&#39; and the code &#39;myField1&#39;. They are not the same."},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1693572675,"post_id":77018866,"comment_id":135782573,"body_markdown":"@OneCricketeer `myField1` was a typo.","body":"@OneCricketeer <code>myField1</code> was a typo."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693575091,"post_id":77018866,"comment_id":135783098,"body_markdown":"Okay. What happens when you don&#39;t use Object class as your value?","body":"Okay. What happens when you don&#39;t use Object class as your value?"},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1693578957,"post_id":77018866,"comment_id":135783898,"body_markdown":"@OneCricketeer what should I use instead?","body":"@OneCricketeer what should I use instead?"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693575547,"creation_date":1693575240,"answer_id":77023548,"question_id":77018866,"body_markdown":"You&#39;re sending a String that&#39;s been type erased to an Object.\r\n\r\nIt has no &quot;schema&quot; other than &quot;string&quot; (no age field)\r\n\r\nYou need to define the Producer with, and send, a Map or class _with fields_ that represents your schema (there&#39;s a [jsonschema2pojo maven plugin](https://github.com/joelittlejohn/jsonschema2pojo/wiki/Getting-Started) that can create such classes)\r\n\r\nYou can find examples in the unit tests for the json schema serializer\r\n\r\nhttps://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java\r\n\r\nSidenote: age should probably be a number, rather than a string ","title":"Message is being rejected for incompatible schema","body":"<p>You're sending a String that's been type erased to an Object.</p>\n<p>It has no &quot;schema&quot; other than &quot;string&quot; (no age field)</p>\n<p>You need to define the Producer with, and send, a Map or class <em>with fields</em> that represents your schema (there's a <a href=\"https://github.com/joelittlejohn/jsonschema2pojo/wiki/Getting-Started\" rel=\"nofollow noreferrer\">jsonschema2pojo maven plugin</a> that can create such classes)</p>\n<p>You can find examples in the unit tests for the json schema serializer</p>\n<p><a href=\"https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java\" rel=\"nofollow noreferrer\">https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java</a></p>\n<p>Sidenote: age should probably be a number, rather than a string</p>\n"}],"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693578931,"creation_date":1693511383,"question_id":77018866,"body_markdown":"I am trying to send the message to a Kafka topic with schema. Seems like the message matches with schema but message is being rejected with following error. \r\n\r\n**code**\r\n\r\n```java\r\n   String topic = &quot;gcp.test_schema&quot;;\r\n        final Properties props = new Properties();\r\n        InputStream inputStream = Files.newInputStream(Paths.get(&quot;src/main/resources/client.properties&quot;));\r\n        props.load(inputStream);\r\n        // Create Kafka producer\r\n        Producer&lt;String, Object&gt; producer = new KafkaProducer&lt;&gt;(props);\r\n\r\n        String jsonPayload = &quot;{\\&quot;age\\&quot;: \\&quot;30\\&quot;}&quot;;\r\n\r\n        // Create a Kafka record with JSON payload\r\n        ProducerRecord&lt;String, Object&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, jsonPayload);\r\n\r\n        // Send the record to Kafka topic\r\n        producer.send(kafkaRecord, (metadata, exception) -&gt; {\r\n            if (exception != null) {\r\n                exception.printStackTrace();\r\n            } else {\r\n                System.out.println(&quot;Message sent successfully!&quot;);\r\n                System.out.println(&quot;Partition: &quot; + metadata.partition());\r\n                System.out.println(&quot;Offset: &quot; + metadata.offset());\r\n            }\r\n        });\r\n\r\n    }\r\n```\r\n\r\n**topic details** \r\n```\r\n❯ ./bin/confluent kafka topic describe gcp.test_schema\r\n                   Name                   |                          Value                           | Read-Only\r\n------------------------------------------+----------------------------------------------------------+------------\r\n  cleanup.policy                          | delete                                                   | false\r\n  compression.type                        | producer                                                 | true\r\n  confluent.key.schema.validation         | false                                                    | false\r\n  confluent.key.subject.name.strategy     | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\r\n  confluent.value.schema.validation       | false                                                    | false\r\n  confluent.value.subject.name.strategy   | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\r\n```\r\n\r\n\r\n**Topic Schema** \r\n```json\r\n{\r\n  &quot;properties&quot;: {\r\n    &quot;age&quot;: {\r\n      &quot;type&quot;: &quot;string&quot;\r\n    }\r\n  }\r\n} \r\n```\r\n\r\n**property file**\r\n```\r\n# Required connection configs for Kafka producer, consumer, and admin\r\nbootstrap.servers=xxx.northamerica-northeast1.gcp.confluent.cloud:9092\r\nsecurity.protocol=SASL_SSL\r\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=&#39;xxx&#39; password=&#39;xxx/iQEXntX/xx&#39;;\r\nsasl.mechanism=PLAIN\r\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\r\n\r\nvalue.serializer=io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\r\nconfluent.value.schema.validation=true\r\n\r\n# Required connection configs for Confluent Cloud Schema Registry\r\nschema.registry.url=https://qqqq.us-east1.gcp.confluent.cloud\r\nbasic.auth.credentials.source=USER_INFO\r\nbasic.auth.user.info=ffff:ssd+ddd+YySi\r\n```\r\n\r\n**Error**\r\n```\r\norg.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \r\ndetails: [{errorType:&quot;TYPE_CHANGED&quot;, description:&quot;A type at path &#39;#/&#39; is different between the new schema and the old schema&#39;}, {oldSchemaVersion: 1}, {oldSchema: &#39;{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}&#39;}, {compatibility: &#39;BACKWARD&#39;}]; error code: 409; error code: 409\r\n\r\n```\r\n\r\n**Update**\r\n\r\n**Tried with Map**\r\n\r\n```java\r\nProducer&lt;String, Map&gt; producer = new KafkaProducer&lt;String, Map&gt;(props);\r\nProducerRecord&lt;String, Map&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, Map.of(&quot;age&quot;, &quot;30&quot;));\r\n\r\n```\r\n\r\n**Error**: ADDITIONAL_PROPERTIES_NARROWED\r\n```\r\norg.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \r\ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_NARROWED&quot;, description:&quot;An array or combined type at path &#39;#/additionalProperties&#39; has fewer elements in the new schema than the old schema&#39;}, {oldSchemaVersion: 1}, {oldSchema: &#39;{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}&#39;}, {compatibility: &#39;BACKWARD&#39;}]; error code: 409\r\n\r\n```\r\n\r\n**Update 2 - With class** \r\n\r\n```java\r\nclass User {\r\n    @JsonProperty\r\n    public String age;\r\n    public User() {}\r\n    public User(String age) {\r\n        this(age, null);\r\n    }\r\n    public User(String age, Object o) {\r\n    }\r\n}\r\n\r\n\r\nProducer&lt;String, User&gt; producer = new KafkaProducer&lt;String, User&gt;(props);\r\nUser user = new User(&quot;30&quot;);\r\nProducerRecord&lt;String, User&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, user);\r\n```\r\n\r\nError - ADDITIONAL_PROPERTIES_REMOVED\r\n```\r\norg.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \r\ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_REMOVED&quot;, description:&quot;The keyword at path &#39;#/additionalProperties&#39; in the new schema is not present in the old schema&#39;}, {oldSchemaVersion: 1}, {oldSchema: &#39;{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}&#39;}, {compatibility: &#39;BACKWARD&#39;}]; error code: 409; error code: 409\r\n```\r\n\r\n**Update 3:**\r\n\r\nI tried changing my schema to following \r\n\r\n```json\r\n{\r\n  &quot;$id&quot;: &quot;http://example.com/myURI.schema.json&quot;,\r\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\r\n  &quot;additionalProperties&quot;: false,\r\n  &quot;description&quot;: &quot;Sample schema to help you get started.&quot;,\r\n  &quot;properties&quot;: {\r\n    &quot;age&quot;: {\r\n      &quot;description&quot;: &quot;The string type is used for strings of text.&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    }\r\n  },\r\n  &quot;title&quot;: &quot;SampleRecord&quot;,\r\n  &quot;type&quot;: &quot;object&quot;\r\n}\r\n```\r\n\r\nNow this doesn&#39;t give me any error, but depends on what I use, either class or map, the schema gets a new version. The message never delivers to the topic, neither I get any error. \r\n\r\nI see following version after I use map \r\n```json \r\n{\r\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\r\n  &quot;additionalProperties&quot;: {},\r\n  &quot;title&quot;: &quot;Map 1&quot;,\r\n  &quot;type&quot;: &quot;object&quot;\r\n}\r\n```","title":"Message is being rejected for incompatible schema","body":"<p>I am trying to send the message to a Kafka topic with schema. Seems like the message matches with schema but message is being rejected with following error.</p>\n<p><strong>code</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>   String topic = &quot;gcp.test_schema&quot;;\n        final Properties props = new Properties();\n        InputStream inputStream = Files.newInputStream(Paths.get(&quot;src/main/resources/client.properties&quot;));\n        props.load(inputStream);\n        // Create Kafka producer\n        Producer&lt;String, Object&gt; producer = new KafkaProducer&lt;&gt;(props);\n\n        String jsonPayload = &quot;{\\&quot;age\\&quot;: \\&quot;30\\&quot;}&quot;;\n\n        // Create a Kafka record with JSON payload\n        ProducerRecord&lt;String, Object&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, jsonPayload);\n\n        // Send the record to Kafka topic\n        producer.send(kafkaRecord, (metadata, exception) -&gt; {\n            if (exception != null) {\n                exception.printStackTrace();\n            } else {\n                System.out.println(&quot;Message sent successfully!&quot;);\n                System.out.println(&quot;Partition: &quot; + metadata.partition());\n                System.out.println(&quot;Offset: &quot; + metadata.offset());\n            }\n        });\n\n    }\n</code></pre>\n<p><strong>topic details</strong></p>\n<pre><code>❯ ./bin/confluent kafka topic describe gcp.test_schema\n                   Name                   |                          Value                           | Read-Only\n------------------------------------------+----------------------------------------------------------+------------\n  cleanup.policy                          | delete                                                   | false\n  compression.type                        | producer                                                 | true\n  confluent.key.schema.validation         | false                                                    | false\n  confluent.key.subject.name.strategy     | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\n  confluent.value.schema.validation       | false                                                    | false\n  confluent.value.subject.name.strategy   | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\n</code></pre>\n<p><strong>Topic Schema</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;properties&quot;: {\n    &quot;age&quot;: {\n      &quot;type&quot;: &quot;string&quot;\n    }\n  }\n} \n</code></pre>\n<p><strong>property file</strong></p>\n<pre><code># Required connection configs for Kafka producer, consumer, and admin\nbootstrap.servers=xxx.northamerica-northeast1.gcp.confluent.cloud:9092\nsecurity.protocol=SASL_SSL\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username='xxx' password='xxx/iQEXntX/xx';\nsasl.mechanism=PLAIN\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\n\nvalue.serializer=io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\nconfluent.value.schema.validation=true\n\n# Required connection configs for Confluent Cloud Schema Registry\nschema.registry.url=https://qqqq.us-east1.gcp.confluent.cloud\nbasic.auth.credentials.source=USER_INFO\nbasic.auth.user.info=ffff:ssd+ddd+YySi\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>org.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \ndetails: [{errorType:&quot;TYPE_CHANGED&quot;, description:&quot;A type at path '#/' is different between the new schema and the old schema'}, {oldSchemaVersion: 1}, {oldSchema: '{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}'}, {compatibility: 'BACKWARD'}]; error code: 409; error code: 409\n\n</code></pre>\n<p><strong>Update</strong></p>\n<p><strong>Tried with Map</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Producer&lt;String, Map&gt; producer = new KafkaProducer&lt;String, Map&gt;(props);\nProducerRecord&lt;String, Map&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, Map.of(&quot;age&quot;, &quot;30&quot;));\n\n</code></pre>\n<p><strong>Error</strong>: ADDITIONAL_PROPERTIES_NARROWED</p>\n<pre><code>org.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_NARROWED&quot;, description:&quot;An array or combined type at path '#/additionalProperties' has fewer elements in the new schema than the old schema'}, {oldSchemaVersion: 1}, {oldSchema: '{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}'}, {compatibility: 'BACKWARD'}]; error code: 409\n\n</code></pre>\n<p><strong>Update 2 - With class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>class User {\n    @JsonProperty\n    public String age;\n    public User() {}\n    public User(String age) {\n        this(age, null);\n    }\n    public User(String age, Object o) {\n    }\n}\n\n\nProducer&lt;String, User&gt; producer = new KafkaProducer&lt;String, User&gt;(props);\nUser user = new User(&quot;30&quot;);\nProducerRecord&lt;String, User&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, user);\n</code></pre>\n<p>Error - ADDITIONAL_PROPERTIES_REMOVED</p>\n<pre><code>org.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_REMOVED&quot;, description:&quot;The keyword at path '#/additionalProperties' in the new schema is not present in the old schema'}, {oldSchemaVersion: 1}, {oldSchema: '{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}'}, {compatibility: 'BACKWARD'}]; error code: 409; error code: 409\n</code></pre>\n<p><strong>Update 3:</strong></p>\n<p>I tried changing my schema to following</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;$id&quot;: &quot;http://example.com/myURI.schema.json&quot;,\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\n  &quot;additionalProperties&quot;: false,\n  &quot;description&quot;: &quot;Sample schema to help you get started.&quot;,\n  &quot;properties&quot;: {\n    &quot;age&quot;: {\n      &quot;description&quot;: &quot;The string type is used for strings of text.&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    }\n  },\n  &quot;title&quot;: &quot;SampleRecord&quot;,\n  &quot;type&quot;: &quot;object&quot;\n}\n</code></pre>\n<p>Now this doesn't give me any error, but depends on what I use, either class or map, the schema gets a new version. The message never delivers to the topic, neither I get any error.</p>\n<p>I see following version after I use map</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\n  &quot;additionalProperties&quot;: {},\n  &quot;title&quot;: &quot;Map 1&quot;,\n  &quot;type&quot;: &quot;object&quot;\n}\n</code></pre>\n"},{"tags":["java","fatal-error","jvm-crash"],"comments":[{"owner":{"account_id":97762,"reputation":7689,"user_id":265022,"display_name":"lobster1234"},"score":0,"creation_date":1308789846,"post_id":6448163,"comment_id":7571507,"body_markdown":"Do the machines where it works have the same JRE versions as the one that&#39;s crashing?","body":"Do the machines where it works have the same JRE versions as the one that&#39;s crashing?"},{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308790433,"post_id":6448163,"comment_id":7571595,"body_markdown":"yes, it is the same JRE. I tried both, SUN and OpenJRE, the error appears in both cases.","body":"yes, it is the same JRE. I tried both, SUN and OpenJRE, the error appears in both cases."},{"owner":{"account_id":284299,"reputation":8756,"user_id":582320,"display_name":"jtoberon"},"score":3,"creation_date":1308790608,"post_id":6448163,"comment_id":7571619,"body_markdown":"Smells like a hardware problem. Have you tried running any diagnostics?","body":"Smells like a hardware problem. Have you tried running any diagnostics?"},{"owner":{"account_id":30304,"reputation":27134,"user_id":82559,"display_name":"alphazero"},"score":0,"creation_date":1308790696,"post_id":6448163,"comment_id":7571626,"body_markdown":"Agreed: first make certain it is not hardware before wasting more time chasing software issues.","body":"Agreed: first make certain it is not hardware before wasting more time chasing software issues."},{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308791053,"post_id":6448163,"comment_id":7571675,"body_markdown":"how could&#160;I find that out? could you give me a hint in that direction?","body":"how could I find that out? could you give me a hint in that direction?"},{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":1,"creation_date":1308794478,"post_id":6448163,"comment_id":7572075,"body_markdown":"I would try upgrading the JRE to the latest one and then try again. Of course it looks like from your code that you are not closing any resources.","body":"I would try upgrading the JRE to the latest one and then try again. Of course it looks like from your code that you are not closing any resources."},{"owner":{"account_id":125919,"reputation":5073,"user_id":322034,"accept_rate":67,"display_name":"user3111525"},"score":1,"creation_date":1326313155,"post_id":6448163,"comment_id":11017765,"body_markdown":"@evgeni can you share the details? What was the solution?","body":"@evgeni can you share the details? What was the solution?"},{"owner":{"account_id":8979682,"reputation":1220,"user_id":6695297,"accept_rate":56,"display_name":"Shubham Srivastava"},"score":0,"creation_date":1561445407,"post_id":6448163,"comment_id":100054626,"body_markdown":"Hi, if my answer is correct, please mark. Asking this very late...","body":"Hi, if my answer is correct, please mark. Asking this very late..."},{"owner":{"account_id":18648992,"reputation":931,"user_id":13592914,"display_name":"cs1349459"},"score":0,"creation_date":1630882227,"post_id":6448163,"comment_id":122069420,"body_markdown":"I had this same error, and it had to do with an IntBuffer. Even updating the OS and reinstalling java didn&#39;t fix it.","body":"I had this same error, and it had to do with an IntBuffer. Even updating the OS and reinstalling java didn&#39;t fix it."}],"answers":[{"tags":[],"owner":{"account_id":284299,"reputation":8756,"user_id":582320,"display_name":"jtoberon"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1415889782,"creation_date":1308791501,"answer_id":6448318,"question_id":6448163,"body_markdown":"Generally if something works on various computers but fails on only one computer, then there&#39;s something wrong with that computer. Here are a few things to check: &lt;br/&gt;\r\n(1) Are you running the same stuff on that computer -- OS including patches, etc. &lt;br/&gt;\r\n(2) Does the computer report problems? Where to look depends on the OS, but it looks like you&#39;re using linux, so check [syslog][1] &lt;br/&gt;\r\n(3) Run hardware diagnostics, e.g. the ones recommended [here][2]. Start with [memory][3] and [disk checks][4] in particular.\r\n\r\nIf you can&#39;t turn up any issues, then search for a similar issue in the bug parade for whichever VM you&#39;re using. Unfortunately if you&#39;re already on the latest version of the VM, then you won&#39;t necessarily find a fix.\r\n\r\nFinally, one more option is simply to try another VM -- e.g. OpenJDK or JRockit, instead of Oracle&#39;s standard.\r\n\r\n\r\n  [1]: http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch05_:_Troubleshooting_Linux_with_syslog\r\n  [2]: http://ubuntuforums.org/showthread.php?t=1467216\r\n  [3]: https://serverfault.com/questions/349020/how-to-diagnose-ram\r\n  [4]: https://superuser.com/questions/171195/how-to-check-the-health-of-a-hard-drive","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Generally if something works on various computers but fails on only one computer, then there's something wrong with that computer. Here are a few things to check: <br/>\n(1) Are you running the same stuff on that computer -- OS including patches, etc. <br/>\n(2) Does the computer report problems? Where to look depends on the OS, but it looks like you're using linux, so check <a href=\"http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch05_:_Troubleshooting_Linux_with_syslog\" rel=\"nofollow noreferrer\">syslog</a> <br/>\n(3) Run hardware diagnostics, e.g. the ones recommended <a href=\"http://ubuntuforums.org/showthread.php?t=1467216\" rel=\"nofollow noreferrer\">here</a>. Start with <a href=\"https://serverfault.com/questions/349020/how-to-diagnose-ram\">memory</a> and <a href=\"https://superuser.com/questions/171195/how-to-check-the-health-of-a-hard-drive\">disk checks</a> in particular.</p>\n\n<p>If you can't turn up any issues, then search for a similar issue in the bug parade for whichever VM you're using. Unfortunately if you're already on the latest version of the VM, then you won't necessarily find a fix.</p>\n\n<p>Finally, one more option is simply to try another VM -- e.g. OpenJDK or JRockit, instead of Oracle's standard.</p>\n"},{"tags":[],"owner":{"account_id":428914,"reputation":829,"user_id":811535,"display_name":"egridasov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1308805239,"creation_date":1308805239,"answer_id":6449527,"question_id":6448163,"body_markdown":"Here is assembly code:\r\n\r\n    7f0b024734be:       48 8d 14 f5 00 00 00    lea    rdx,[rsi*8]\r\n    7f0b024734c5:       00\r\n    7f0b024734c6:       48 03 13                add    rdx,QWORD PTR [rbx]\r\n    7f0b024734c9:       48 8d 7a 10             lea    rdi,[rdx+16]\r\n    7f0b024734cd:       8b 5f 08                mov    ebx,DWORD PTR [rdi+8]\r\n    7f0b024734d0:       89 d8                   mov    eax,ebx\r\n    7f0b024734d2:       c1 f8 03                sar    eax,0x3\r\n    7f0b024734d5:       85 db                   test   ebx,ebx\r\n    7f0b024734d7:       0f 8e cb 05 00 00       jle    0x7f0b02473aa8\r\n\r\nAnd what it does is:\r\n\r\n    rdx = 0x00007f0a808d4ed2 * 8; // equals 0x0003F854046A7690. WTF???\r\n    rdx = rdx + something from old gen heap; // results 0x000600007f090486\r\n    rdi = rdx + 16; // results 0x000600007f090496\r\n    ebx = something from edi address (0x000600007f090496) + 8\r\n\r\nWell I&#39;ve had a look at the address map and there is nothing mapped to **0x000600007f090496** which is why you are getting a SEGV. Are you getting the same error with 1.6.0_26 JVM? Can you try it on a 32bit JVM? Looks like a JVM issue to me. Why would it do the first **rdx=0x0... * 8** thing?","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Here is assembly code:</p>\n\n<pre><code>7f0b024734be:       48 8d 14 f5 00 00 00    lea    rdx,[rsi*8]\n7f0b024734c5:       00\n7f0b024734c6:       48 03 13                add    rdx,QWORD PTR [rbx]\n7f0b024734c9:       48 8d 7a 10             lea    rdi,[rdx+16]\n7f0b024734cd:       8b 5f 08                mov    ebx,DWORD PTR [rdi+8]\n7f0b024734d0:       89 d8                   mov    eax,ebx\n7f0b024734d2:       c1 f8 03                sar    eax,0x3\n7f0b024734d5:       85 db                   test   ebx,ebx\n7f0b024734d7:       0f 8e cb 05 00 00       jle    0x7f0b02473aa8\n</code></pre>\n\n<p>And what it does is:</p>\n\n<pre><code>rdx = 0x00007f0a808d4ed2 * 8; // equals 0x0003F854046A7690. WTF???\nrdx = rdx + something from old gen heap; // results 0x000600007f090486\nrdi = rdx + 16; // results 0x000600007f090496\nebx = something from edi address (0x000600007f090496) + 8\n</code></pre>\n\n<p>Well I've had a look at the address map and there is nothing mapped to <strong>0x000600007f090496</strong> which is why you are getting a SEGV. Are you getting the same error with 1.6.0_26 JVM? Can you try it on a 32bit JVM? Looks like a JVM issue to me. Why would it do the first <strong>rdx=0x0... * 8</strong> thing?</p>\n"},{"tags":[],"owner":{"account_id":928808,"reputation":161,"user_id":959077,"accept_rate":0,"display_name":"SudhirJ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316699338,"creation_date":1316699338,"answer_id":7515836,"question_id":6448163,"body_markdown":"after hardware check on the server and it was found out that memory had gone bad, replaced the memory and the server is now fully accessible.","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>after hardware check on the server and it was found out that memory had gone bad, replaced the memory and the server is now fully accessible.</p>\n"},{"tags":[],"owner":{"account_id":2637065,"reputation":7621,"user_id":2281472,"accept_rate":71,"display_name":"Develop4Life"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1580848689,"creation_date":1405930005,"answer_id":24860316,"question_id":6448163,"body_markdown":"# Here is your relief for the problem :\n\nI have a problem of running different versions of STS this morning, the application crash with the similar way as the question did.\n\nExcerpt of my log file.\n\n    A fatal error has been detected by the Java Runtime Environment:\n    #a\n    #  SIGSEGV (0xb) at pc=0x00007f459db082a1, pid=4577, tid=139939015632640\n    #\n    # JRE version: 6.0_30-b12\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM \n    (20.5-b03 mixed mode linux-amd64 compressed oops)\n    # Problematic frame:\n    # C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11\n\nnote that exception occured at # **C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11**\n\nOkay then little below the line:\n\n    R9 =0x00007f461829e550: &lt;offset 0xa85550&gt; in /usr/share/java/jdk1.6.0_30/jre/lib/amd64/server/libjvm.so at 0x00007f4617819000\n    R10=0x00007f461750f7c0 is pointing into the stack for thread: 0x00007f4610008000\n    R11=0x00007f459db08290: soup_session_feature_detach+0 in /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1 at 0x00007f459da9c000\n    R12=0x0000000000000000 is an unknown value\n    R13=0x000000074404c840 is an oop\n    {method} \n\nThis line tells you where the actual bug or crash is to investigate more on this crash issue please use below links to see more, but let&#39;s continue the crash investigation and how I resolved it and the novelty of this bug :)\n\nlinks are :\n\n[a fATAL ERROR JAVA][1] THIS ONE IS GREAT LOTS OF USER!\n\n[a fATAL ERROR JAVA 2][2]\n\n\n  [1]: https://bugs.launchpad.net/ubuntu-gnome/+bug/1163501\n  [2]: https://stackoverflow.com/questions/6448163/a-fatal-error-has-been-detected-by-the-java-runtime-environment-sigsegv-libjvm\n\nOkay, after that here&#39;s what I found out to casue this case and why it happens as general advise.\n\n 1. Most of the time, check that if you have installed, updated recently on Ubunu and Windows  there are libraries  like **libsoup** in linux which were the casuse of my crash.\n 2. Check also for a new hardware problem and try to investigate the `Logfile` which `STS` or `Java` generated and also `syslog` in `linux` by \n\n        tail - f /var/lib/messages or some other file\n\nThen by carfully looking at those files the one you have the crash log for ... you can really solve the issue as follows:\n\n&gt; sudo unlink /usr/lib/i386-linux-gnu/libsoup-2.4.so.1\n\nor\n\n&gt; sudo unlink /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1\n\n\n\n**Done !! Cheers!!**","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<h1>Here is your relief for the problem :</h1>\n<p>I have a problem of running different versions of STS this morning, the application crash with the similar way as the question did.</p>\n<p>Excerpt of my log file.</p>\n<pre><code>A fatal error has been detected by the Java Runtime Environment:\n#a\n#  SIGSEGV (0xb) at pc=0x00007f459db082a1, pid=4577, tid=139939015632640\n#\n# JRE version: 6.0_30-b12\n# Java VM: Java HotSpot(TM) 64-Bit Server VM \n(20.5-b03 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11\n</code></pre>\n<p>note that exception occured at # <strong>C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11</strong></p>\n<p>Okay then little below the line:</p>\n<pre><code>R9 =0x00007f461829e550: &lt;offset 0xa85550&gt; in /usr/share/java/jdk1.6.0_30/jre/lib/amd64/server/libjvm.so at 0x00007f4617819000\nR10=0x00007f461750f7c0 is pointing into the stack for thread: 0x00007f4610008000\nR11=0x00007f459db08290: soup_session_feature_detach+0 in /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1 at 0x00007f459da9c000\nR12=0x0000000000000000 is an unknown value\nR13=0x000000074404c840 is an oop\n{method} \n</code></pre>\n<p>This line tells you where the actual bug or crash is to investigate more on this crash issue please use below links to see more, but let's continue the crash investigation and how I resolved it and the novelty of this bug :)</p>\n<p>links are :</p>\n<p><a href=\"https://bugs.launchpad.net/ubuntu-gnome/+bug/1163501\" rel=\"nofollow noreferrer\">a fATAL ERROR JAVA</a> THIS ONE IS GREAT LOTS OF USER!</p>\n<p><a href=\"https://stackoverflow.com/questions/6448163/a-fatal-error-has-been-detected-by-the-java-runtime-environment-sigsegv-libjvm\">a fATAL ERROR JAVA 2</a></p>\n<p>Okay, after that here's what I found out to casue this case and why it happens as general advise.</p>\n<ol>\n<li><p>Most of the time, check that if you have installed, updated recently on Ubunu and Windows  there are libraries  like <strong>libsoup</strong> in linux which were the casuse of my crash.</p>\n</li>\n<li><p>Check also for a new hardware problem and try to investigate the <code>Logfile</code> which <code>STS</code> or <code>Java</code> generated and also <code>syslog</code> in <code>linux</code> by</p>\n<pre><code>tail - f /var/lib/messages or some other file\n</code></pre>\n</li>\n</ol>\n<p>Then by carfully looking at those files the one you have the crash log for ... you can really solve the issue as follows:</p>\n<blockquote>\n<p>sudo unlink /usr/lib/i386-linux-gnu/libsoup-2.4.so.1</p>\n</blockquote>\n<p>or</p>\n<blockquote>\n<p>sudo unlink /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1</p>\n</blockquote>\n<p><strong>Done !! Cheers!!</strong></p>\n"},{"tags":[],"owner":{"account_id":4215056,"reputation":72,"user_id":3451553,"display_name":"HASNEN LAXMIDHAR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470812290,"creation_date":1470812290,"answer_id":38866299,"question_id":6448163,"body_markdown":"**add new server (tomcat) with different location.** if i am not make mistake you are run multiple project with same tomcat and add same tomcat server on same location ..\r\n\r\n**add new tomcat for each new workspace.**","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p><strong>add new server (tomcat) with different location.</strong> if i am not make mistake you are run multiple project with same tomcat and add same tomcat server on same location ..</p>\n\n<p><strong>add new tomcat for each new workspace.</strong></p>\n"},{"tags":[],"owner":{"account_id":8979682,"reputation":1220,"user_id":6695297,"accept_rate":56,"display_name":"Shubham Srivastava"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1494914861,"creation_date":1473357530,"answer_id":39397405,"question_id":6448163,"body_markdown":"1.Set the following Environment Property on your active Shell.\r\n  - open bash terminal and type in:\r\n\r\n      $ export LD_BIND_NOW=1\r\n\r\n2. Re-Run the Jar or Java File\r\n\r\nNote: for superuser in bash type su and press enter","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>1.Set the following Environment Property on your active Shell.\n  - open bash terminal and type in:</p>\n\n<pre><code>  $ export LD_BIND_NOW=1\n</code></pre>\n\n<ol start=\"2\">\n<li>Re-Run the Jar or Java File</li>\n</ol>\n\n<p>Note: for superuser in bash type su and press enter</p>\n"},{"tags":[],"owner":{"account_id":9814729,"reputation":49,"user_id":7271579,"display_name":"Durgarao Maruboina"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586230006,"creation_date":1491376437,"answer_id":43224296,"question_id":6448163,"body_markdown":"It can happen because of native method calling in your application. For example, in Qtjambi if you use `QApplication.quit()` instead of `QApplication.closeAllWindows()` for closing a Java application it generates an error log.\r\n\r\nIn this case, you can get a stack trace right to your method that called the native code and caused the crash. Just look in the log file it tells you about: \r\n\r\n    # An error report file with more information is saved as hs_err_pid24139.log.\r\n\r\nThe stack trace looks quite unusual, since it has native code mixed with VM code and your code, but each line is prefixed so you can tell which lines are your own code. There&#39;s a key at the top of the stack trace to explain the prefixes:\r\n\r\n&gt; Native frames: (J=compiled Java code, A=aot compiled Java code,\r\n&gt; j=interpreted, Vv=VM code, C=native code)\r\n\r\n","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>It can happen because of native method calling in your application. For example, in Qtjambi if you use <code>QApplication.quit()</code> instead of <code>QApplication.closeAllWindows()</code> for closing a Java application it generates an error log.</p>\n\n<p>In this case, you can get a stack trace right to your method that called the native code and caused the crash. Just look in the log file it tells you about: </p>\n\n<pre><code># An error report file with more information is saved as hs_err_pid24139.log.\n</code></pre>\n\n<p>The stack trace looks quite unusual, since it has native code mixed with VM code and your code, but each line is prefixed so you can tell which lines are your own code. There's a key at the top of the stack trace to explain the prefixes:</p>\n\n<blockquote>\n  <p>Native frames: (J=compiled Java code, A=aot compiled Java code,\n  j=interpreted, Vv=VM code, C=native code)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525368546,"creation_date":1525368546,"answer_id":50160807,"question_id":6448163,"body_markdown":"Not really to answer OP&#39;s question (it&#39;s resolved anyway), but to help people who may stumble into the similar issue.\r\n\r\nHere is what we had:\r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x0000000000000000, pid=11, tid=139910430250752\r\n    #\r\n    # JRE version: Java(TM) SE Runtime Environment (8.0_77-b03) (build 1.8.0_77-b03)\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (25.77-b03 mixed mode linux-amd64 compressed oops)\r\n    # Problematic frame:\r\n    # C  0x0000000000000000\r\n    #\r\n    # Core dump written. Default location: /builds/c5b22963/0/reporting/arsng2/core or core.11\r\n    #\r\n\r\nThe reason was defective RAM. ","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Not really to answer OP's question (it's resolved anyway), but to help people who may stumble into the similar issue.</p>\n\n<p>Here is what we had:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x0000000000000000, pid=11, tid=139910430250752\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_77-b03) (build 1.8.0_77-b03)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.77-b03 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# C  0x0000000000000000\n#\n# Core dump written. Default location: /builds/c5b22963/0/reporting/arsng2/core or core.11\n#\n</code></pre>\n\n<p>The reason was defective RAM. </p>\n"},{"tags":[],"owner":{"account_id":5913142,"reputation":18650,"user_id":4652706,"accept_rate":100,"display_name":"KARTHIKEYAN.A"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1636339912,"creation_date":1531111514,"answer_id":51238344,"question_id":6448163,"body_markdown":"Try this cmd in terminal \r\n\r\n    $ ulimit -c unlimited\r\n\r\nWhere \r\n\r\n**ulimit** is admin access required Linux shell command which is used to see, set, or limit the resource usage of the current user. It is used to return the number of open file descriptors for each process. It is also used to set restrictions on the resources used by a process.\r\n\r\n**-c** is core file size (blocks, -c)\r\n\r\n**unlimited** is Size (o to unlimited)\r\n","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Try this cmd in terminal</p>\n<pre><code>$ ulimit -c unlimited\n</code></pre>\n<p>Where</p>\n<p><strong>ulimit</strong> is admin access required Linux shell command which is used to see, set, or limit the resource usage of the current user. It is used to return the number of open file descriptors for each process. It is also used to set restrictions on the resources used by a process.</p>\n<p><strong>-c</strong> is core file size (blocks, -c)</p>\n<p><strong>unlimited</strong> is Size (o to unlimited)</p>\n"},{"tags":[],"owner":{"account_id":8686155,"reputation":1,"user_id":6500519,"display_name":"Harshad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661729548,"creation_date":1661344201,"answer_id":73473205,"question_id":6448163,"body_markdown":"I was facing the same issue with JDK 11 in Eclipse, so I removed JDK 11 from the Installed JRE section and added back JDK 11 and then did an Eclipse restart. \r\n\r\nAfterwards, my issue was resolved.","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>I was facing the same issue with JDK 11 in Eclipse, so I removed JDK 11 from the Installed JRE section and added back JDK 11 and then did an Eclipse restart.</p>\n<p>Afterwards, my issue was resolved.</p>\n"},{"tags":[],"owner":{"account_id":19820147,"reputation":1,"user_id":15521802,"display_name":"Mercenary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677035568,"creation_date":1677035568,"answer_id":75527917,"question_id":6448163,"body_markdown":"For mac users, you should load the jdk file in Libaray.\r\nThen restart the Eclipse.\r\n\r\n[Setting -&gt; Java -&gt; Installed JREs][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S8Vmb.png","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>For mac users, you should load the jdk file in Libaray.\nThen restart the Eclipse.</p>\n<p><a href=\"https://i.stack.imgur.com/S8Vmb.png\" rel=\"nofollow noreferrer\">Setting -&gt; Java -&gt; Installed JREs</a></p>\n"},{"tags":[],"owner":{"account_id":2106132,"reputation":1,"user_id":9958382,"display_name":"Ragesh Gopinathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578866,"creation_date":1693578866,"answer_id":77023993,"question_id":6448163,"body_markdown":"Reinstalling Java package resolved the issue on RHEL 8.5","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Reinstalling Java package resolved the issue on RHEL 8.5</p>\n"}],"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217229,"favorite_count":0,"down_vote_count":1,"up_vote_count":64,"answer_count":12,"score":63,"last_activity_date":1693578866,"creation_date":1308789697,"question_id":6448163,"body_markdown":"Hi and thanks for reading,\r\n\r\nI have the following error while running my program and&#160;can&#39;t figure out what the solution would be. I also looked&#160;at all the topics with a similar error here, but could not resolve my issue. Here the error:\r\n\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\r\n    #\r\n    # JRE version: 6.0_15-b03\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\r\n    # Problematic frame:\r\n    # V  [libjvm.so+0x5df4cd]\r\n\r\nMy program takes some serialized objects and deserializes them, this is where the problem occurs. The strange thing however is, that the same code with the same objects to deserialize works perfectly fine on other machines with the same hardware, OS, etc. (I&#39;m not sure if this might be hardware related, but I guess its not). \r\n\r\nHere is the code, that I&#39;m executing in Java:\r\n\r\n    \t\tFileInputStream f_in = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part.data&quot;);\r\n    \t\tObjectInputStream obj_in = new ObjectInputStream (f_in);\r\n    \t\tObject obj = obj_in.readObject();\r\n    \t//ERROR\r\n    \t\tFileInputStream f_in5 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_clustIdx_pairClustIdxs_.data&quot;);\r\n    \t\tObjectInputStream obj_in5 = new ObjectInputStream (f_in5);\t\t\r\n    \t\tObject clustIdx_pairClustIdxs = obj_in5.readObject();\r\n    \t\t\r\n    \t\tFileInputStream f_in4 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_pairClustIdxs_pairPartRootNodeIds_.data&quot;);\r\n    \t\tObjectInputStream obj_in4 = new ObjectInputStream (f_in4);\t\t\r\n    \t\tObject pairClustIdxs_pairPartRootNodeIds = obj_in4.readObject();\r\n    \t\t\r\n    \t\tFileInputStream f_in3 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_clustIdx_partRootNodeIds_.data&quot;);\r\n    \t\tObjectInputStream obj_in3 = new ObjectInputStream (f_in3);\t\t\r\n    \t\tObject clustIdx_partRootNodeIds = obj_in3.readObject();\r\n    \t\t\r\n    \t\tFileInputStream f_in2 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_rootNodeId_Part.data&quot;);\r\n    \t\tObjectInputStream obj_in2 = new ObjectInputStream (f_in2);\r\n    \t\tObject rootNodeId_Part = obj_in2.readObject();  \r\n    \t\t  \t\t\r\n            Part part = (Part) obj;\r\n    \t\tpart.rootNodeId_part_ = (Map&lt;String, Part&gt;) rootNodeId_Part;\r\n    \t\tpart.clustIdx_partRootNodeIds_ = (Map&lt;Integer,TreeSet&lt;String&gt;&gt; ) clustIdx_partRootNodeIds;\r\n    \t\tpart.pairClustIdxs_pairPartRootNodeIds_ = (Map&lt;Pair&lt;Integer,Integer&gt;,Set&lt;Pair&lt;String,String&gt;&gt;&gt; ) pairClustIdxs_pairPartRootNodeIds;\r\n    \t\tpart.clustIdx_pairClustIdxs_ = (Map&lt;Integer,Set&lt;Pair&lt;Integer,Integer&gt;&gt;&gt; ) clustIdx_pairClustIdxs;\t\r\n\r\nThe error occurs after the first deserialization block. However, if I interchange it with any of the following blocks, the error is still in the second deserialization block. Again, the same code, with the same data works just fine on other machines. I tried reinstalling and&#160;updating Java, but it didn&#39;t help. \r\n\r\nHere the logfile of the error:\r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\r\n    #\r\n    # JRE version: 6.0_15-b03\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\r\n    # Problematic frame:\r\n    # V  [libjvm.so+0x5df4cd]\r\n    #\r\n    # If you would like to submit a bug report, please visit:\r\n    #   http://java.sun.com/webapps/bugreport/crash.jsp\r\n    #\r\n    \r\n    ---------------  T H R E A D  ---------------\r\n    \r\n    Current thread (0x00000000408c9000):  GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\r\n    \r\n    siginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\r\n    \r\n    Registers:\r\n    RAX=0x0000000000000001, RBX=0x00007f09184091a8, RCX=0x00007f0b02748cb0, RDX=0x000600007f090486\r\n    RSP=0x00007f0902bfce00, RBP=0x00007f0902bfce70, RSI=0x00007f0a808d4ed2, RDI=0x000600007f090496\r\n    R8 =0x0000000000000001, R9 =0x00000000aa10002f, R10=0x00007f09184091a8, R11=0x00007f09027a8218\r\n    R12=0x0708000000000000, R13=0x0000000000000000, R14=0x00007f0a808d4ed2, R15=0x0000000040914ef0\r\n    RIP=0x00007f0b024734cd, EFL=0x0000000000010246, CSGSFS=0x0000000000000033, ERR=0x0000000000000000\r\n      TRAPNO=0x000000000000000d\r\n    \r\n    Top of Stack: (sp=0x00007f0902bfce00)\r\n    0x00007f0902bfce00:   0000000000000400 00000000408c06a0\r\n    0x00007f0902bfce10:   0000000000000005 01007f090c6663b8\r\n    0x00007f0902bfce20:   00007f0902bfce50 00007f0b024741d0\r\n    0x00007f0902bfce30:   00007f0918408028 0000000000257071\r\n    0x00007f0902bfce40:   000000000025703f 00007f09184091a8\r\n    0x00007f0902bfce50:   0000000040914fa0 0000000000000000\r\n    0x00007f0902bfce60:   0000000000000001 00007f0902bfcefc\r\n    0x00007f0902bfce70:   00007f0902bfce90 00007f0b02473f50\r\n    0x00007f0902bfce80:   0000000000000001 0000000040914ef0\r\n    0x00007f0902bfce90:   00007f0902bfced0 00007f0b02473092\r\n    0x00007f0902bfcea0:   000000004095dc20 00007f09184091a8\r\n    0x00007f0902bfceb0:   0000000040914ef0 0000000000000002\r\n    0x00007f0902bfcec0:   00007f0b0275d4e0 000000004095dc20\r\n    0x00007f0902bfced0:   00007f0902bfcf30 00007f0b0247672d\r\n    0x00007f0902bfcee0:   00007f0902bfcef0 00007f0902bfcf00\r\n    0x00007f0902bfcef0:   00007f0902bfcf30 6cfb9568021cd407\r\n    0x00007f0902bfcf00:   00007f0ab4e04578 00007f0b027492a4\r\n    0x00007f0902bfcf10:   000000004095dc20 00000000408c9000\r\n    0x00007f0902bfcf20:   00007f0b025b0506 0000000000000000\r\n    0x00007f0902bfcf30:   00007f0902bfd030 00007f0b021ce67a\r\n    0x00007f0902bfcf40:   00007f0902bfcf80 00007f0902bfcf58\r\n    0x00007f0902bfcf50:   00007f0b02760f40 0000000000000000\r\n    0x00007f0902bfcf60:   00000000408c91e0 00000000408c9210\r\n    0x00007f0902bfcf70:   00000000408c9220 00000000408c95f8\r\n    0x00007f0902bfcf80:   00000000408c9000 00000000408c9600\r\n    0x00007f0902bfcf90:   00000000408c9630 00000000408c9640\r\n    0x00007f0902bfcfa0:   00000000408c9a18 00007f0902bfcfd0\r\n    0x00007f0902bfcfb0:   00000000408c91e0 00000000408c9210\r\n    0x00007f0902bfcfc0:   00000000408c9220 00000000408c95f8\r\n    0x00007f0902bfcfd0:   00000000408c9000 00000000408c9600\r\n    0x00007f0902bfcfe0:   00000000408c9630 00000000408c9640\r\n    0x00007f0902bfcff0:   00000000408c9a18 00000000408c9a20 \r\n    \r\n    Instructions: (pc=0x00007f0b024734cd)\r\n    0x00007f0b024734bd:   00 48 8d 14 f5 00 00 00 00 48 03 13 48 8d 7a 10\r\n    0x00007f0b024734cd:   8b 5f 08 89 d8 c1 f8 03 85 db 0f 8e cb 05 00 00 \r\n    \r\n    Stack: [0x00007f0902afd000,0x00007f0902bfe000],  sp=0x00007f0902bfce00,  free space=1023k\r\n    Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\n    V  [libjvm.so+0x5df4cd]\r\n    V  [libjvm.so+0x5dff50]\r\n    V  [libjvm.so+0x5df092]\r\n    V  [libjvm.so+0x5e272d]\r\n    V  [libjvm.so+0x33a67a]\r\n    V  [libjvm.so+0x5971af]\r\n    \r\n    \r\n    ---------------  P R O C E S S  ---------------\r\n    \r\n    Java Threads: ( =&gt; current thread )\r\n      0x0000000040946800 JavaThread &quot;Low Memory Detector&quot; daemon [_thread_blocked, id=21959, stack(0x00007f0902020000,0x00007f0902121000)]\r\n      0x0000000040942800 JavaThread &quot;CompilerThread1&quot; daemon [_thread_blocked, id=21958, stack(0x00007f0902121000,0x00007f0902222000)]\r\n      0x0000000040940000 JavaThread &quot;CompilerThread0&quot; daemon [_thread_blocked, id=21957, stack(0x00007f0902222000,0x00007f0902323000)]\r\n      0x000000004093d800 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=21956, stack(0x00007f0902323000,0x00007f0902424000)]\r\n      0x000000004091f800 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=21955, stack(0x00007f0902463000,0x00007f0902564000)]\r\n      0x000000004091d800 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=21954, stack(0x00007f0902564000,0x00007f0902665000)]\r\n      0x00000000408bb000 JavaThread &quot;main&quot; [_thread_blocked, id=21948, stack(0x00007f0b01b0f000,0x00007f0b01c10000)]\r\n    \r\n    Other Threads:\r\n      0x0000000040917000 VMThread [stack: 0x00007f0902665000,0x00007f0902766000] [id=21953]\r\n      0x0000000040949000 WatcherThread [stack: 0x00007f0901f1f000,0x00007f0902020000] [id=21960]\r\n    \r\n    =&gt;0x00000000408c9000 (exited) GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\r\n    \r\n    VM state:at safepoint (normal execution)\r\n    \r\n    VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\r\n    [0x00000000408b7c90] Threads_lock - owner thread: 0x0000000040917000\r\n    [0x00000000408b8190] Heap_lock - owner thread: 0x00000000408bb000\r\n    \r\n    Heap\r\n     PSYoungGen      total 1792000K, used 1536000K [0x00007f0a571c0000, 0x00007f0ad41c0000, 0x00007f0afdc60000)\r\n      eden space 1536000K, 100% used [0x00007f0a571c0000,0x00007f0ab4dc0000,0x00007f0ab4dc0000)\r\n      from space 256000K, 0% used [0x00007f0ac47c0000,0x00007f0ac47c0000,0x00007f0ad41c0000)\r\n      to   space 256000K, 99% used [0x00007f0ab4dc0000,0x00007f0ac47b8068,0x00007f0ac47c0000)\r\n     PSOldGen        total 4096000K, used 237896K [0x00007f0909c60000, 0x00007f0a03c60000, 0x00007f0a571c0000)\r\n      object space 4096000K, 5% used [0x00007f0909c60000,0x00007f09184b2028,0x00007f0a03c60000)\r\n     PSPermGen       total 21248K, used 3845K [0x00007f0904860000, 0x00007f0905d20000, 0x00007f0909c60000)\r\n      object space 21248K, 18% used [0x00007f0904860000,0x00007f0904c21718,0x00007f0905d20000)\r\n    \r\n    Dynamic libraries:\r\n    40000000-40009000 r-xp 00000000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\r\n    40108000-4010a000 rwxp 00008000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\r\n    408b2000-40d42000 rwxp 00000000 00:00 0                                  [heap]\r\n    7f08fc000000-7f08fc4aa000 rwxp 00000000 00:00 0 \r\n    7f08fc4aa000-7f0900000000 ---p 00000000 00:00 0 \r\n    7f0901f1f000-7f0901f20000 ---p 00000000 00:00 0 \r\n    7f0901f20000-7f0902020000 rwxp 00000000 00:00 0 \r\n    7f0902020000-7f0902023000 ---p 00000000 00:00 0 \r\n    7f0902023000-7f0902121000 rwxp 00000000 00:00 0 \r\n    7f0902121000-7f0902124000 ---p 00000000 00:00 0 \r\n    7f0902124000-7f0902222000 rwxp 00000000 00:00 0 \r\n    7f0902222000-7f0902225000 ---p 00000000 00:00 0 \r\n    7f0902225000-7f0902323000 rwxp 00000000 00:00 0 \r\n    7f0902323000-7f0902326000 ---p 00000000 00:00 0 \r\n    7f0902326000-7f0902424000 rwxp 00000000 00:00 0 \r\n    7f0902424000-7f0902463000 r-xp 00000000 08:01 688275                     /usr/lib/locale/en_US.utf8/LC_CTYPE\r\n    7f0902463000-7f0902466000 ---p 00000000 00:00 0 \r\n    7f0902466000-7f0902564000 rwxp 00000000 00:00 0 \r\n    7f0902564000-7f0902567000 ---p 00000000 00:00 0 \r\n    7f0902567000-7f0902665000 rwxp 00000000 00:00 0 \r\n    7f0902665000-7f0902666000 ---p 00000000 00:00 0 \r\n    7f0902666000-7f090283e000 rwxp 00000000 00:00 0 \r\n    7f090283e000-7f09029d4000 r-xs 02fb3000 08:01 803613                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/rt.jar\r\n    7f09029d4000-7f09029fc000 rwxp 00000000 00:00 0 \r\n    7f09029fc000-7f09029fd000 ---p 00000000 00:00 0 \r\n    7f09029fd000-7f0902afd000 rwxp 00000000 00:00 0 \r\n    7f0902afd000-7f0902afe000 ---p 00000000 00:00 0 \r\n    7f0902afe000-7f0902bfe000 rwxp 00000000 00:00 0 \r\n    7f0902bfe000-7f0902bff000 ---p 00000000 00:00 0 \r\n    7f0902bff000-7f0902cff000 rwxp 00000000 00:00 0 \r\n    7f0902cff000-7f0902d00000 ---p 00000000 00:00 0 \r\n    7f0902d00000-7f0902e0b000 rwxp 00000000 00:00 0 \r\n    7f0902e0b000-7f0902e2a000 rwxp 00000000 00:00 0 \r\n    7f0902e2a000-7f09035fa000 rwxp 00000000 00:00 0 \r\n    7f09035fa000-7f0903895000 rwxp 00000000 00:00 0 \r\n    7f0903895000-7f09038a0000 rwxp 00000000 00:00 0 \r\n    7f09038a0000-7f09038bf000 rwxp 00000000 00:00 0 \r\n    7f09038bf000-7f090408f000 rwxp 00000000 00:00 0 \r\n    7f090408f000-7f0904329000 rwxp 00000000 00:00 0 \r\n    7f0904329000-7f0904712000 rwxp 00000000 00:00 0 \r\n    7f0904712000-7f090485f000 rwxp 00000000 00:00 0 \r\n    7f090485f000-7f0905d20000 rwxp 00000000 00:00 0 \r\n    7f0905d20000-7f0909c60000 rwxp 00000000 00:00 0 \r\n    7f0909c60000-7f0a03c60000 rwxp 00000000 00:00 0 \r\n    7f0a03c60000-7f0a571c0000 rwxp 00000000 00:00 0 \r\n    7f0a571c0000-7f0ad41c0000 rwxp 00000000 00:00 0 \r\n    7f0ad41c0000-7f0afdc60000 rwxp 00000000 00:00 0 \r\n    7f0afdc6f000-7f0afdedf000 rwxp 00000000 00:00 0 \r\n    7f0afdedf000-7f0b00c6f000 rwxp 00000000 00:00 0 \r\n    7f0b00c6f000-7f0b00c7d000 r-xp 00000000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\r\n    7f0b00c7d000-7f0b00d7f000 ---p 0000e000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\r\n    7f0b00d7f000-7f0b00d82000 rwxp 00010000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\r\n    7f0b00d82000-7f0b00d83000 rwxp 00000000 00:00 0 \r\n    7f0b00d83000-7f0b00d8f000 r-xp 00000000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00d8f000-7f0b00f8e000 ---p 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00f8e000-7f0b00f8f000 r-xp 0000b000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00f8f000-7f0b00f90000 rwxp 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00f90000-7f0b00f9a000 r-xp 00000000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b00f9a000-7f0b01199000 ---p 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b01199000-7f0b0119a000 r-xp 00009000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b0119a000-7f0b0119b000 rwxp 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b0119b000-7f0b011a2000 r-xp 00000000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b011a2000-7f0b013a2000 ---p 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b013a2000-7f0b013a3000 r-xp 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b013a3000-7f0b013a4000 rwxp 00008000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b013a4000-7f0b013ab000 r-xp 00000000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\r\n    7f0b013ab000-7f0b014ac000 ---p 00007000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\r\n    7f0b014ac000-7f0b014ae000 rwxp 00008000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\r\n    7f0b014ae000-7f0b014af000 rwxp 00000000 00:00 0 \r\n    7f0b014af000-7f0b014c5000 r-xp 00000000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b014c5000-7f0b016c5000 ---p 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b016c5000-7f0b016c6000 r-xp 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b016c6000-7f0b016c7000 rwxp 00017000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b016c7000-7f0b016c9000 rwxp 00000000 00:00 0 \r\n    7f0b016c9000-7f0b016f2000 r-xp 00000000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\r\n    7f0b016f2000-7f0b017f1000 ---p 00029000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\r\n    7f0b017f1000-7f0b017f8000 rwxp 00028000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\r\n    7f0b017f8000-7f0b01805000 r-xp 00000000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\r\n    7f0b01805000-7f0b01904000 ---p 0000d000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\r\n    7f0b01904000-7f0b01907000 rwxp 0000c000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\r\n    7f0b01907000-7f0b0190e000 r-xp 00000000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b0190e000-7f0b01b0d000 ---p 00007000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b01b0d000-7f0b01b0e000 r-xp 00006000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b01b0e000-7f0b01b0f000 rwxp 00007000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b01b0f000-7f0b01b12000 ---p 00000000 00:00 0 \r\n    7f0b01b12000-7f0b01c10000 rwxp 00000000 00:00 0 \r\n    7f0b01c10000-7f0b01c92000 r-xp 00000000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01c92000-7f0b01e92000 ---p 00082000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01e92000-7f0b01e93000 r-xp 00082000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01e93000-7f0b01e94000 rwxp 00083000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01e94000-7f0b025f2000 r-xp 00000000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\r\n    7f0b025f2000-7f0b026f1000 ---p 0075e000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\r\n    7f0b026f1000-7f0b02869000 rwxp 0075d000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\r\n    7f0b02869000-7f0b028a7000 rwxp 00000000 00:00 0 \r\n    7f0b028a7000-7f0b02a0d000 r-xp 00000000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02a0d000-7f0b02c0c000 ---p 00166000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02c0c000-7f0b02c10000 r-xp 00165000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02c10000-7f0b02c11000 rwxp 00169000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02c11000-7f0b02c16000 rwxp 00000000 00:00 0 \r\n    7f0b02c16000-7f0b02c18000 r-xp 00000000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02c18000-7f0b02e18000 ---p 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02e18000-7f0b02e19000 r-xp 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02e19000-7f0b02e1a000 rwxp 00003000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02e1a000-7f0b02e31000 r-xp 00000000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b02e31000-7f0b03030000 ---p 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b03030000-7f0b03031000 r-xp 00016000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b03031000-7f0b03032000 rwxp 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b03032000-7f0b03036000 rwxp 00000000 00:00 0 \r\n    7f0b03036000-7f0b03055000 r-xp 00000000 08:01 1250947                    /lib/ld-2.10.1.so\r\n    7f0b03069000-7f0b03073000 rwxp 00000000 00:00 0 \r\n    7f0b03073000-7f0b03129000 rwxp 00000000 00:00 0 \r\n    7f0b03129000-7f0b0312b000 rwxp 00000000 00:00 0 \r\n    7f0b0312b000-7f0b03132000 r-xp 00000000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\r\n    7f0b03132000-7f0b03233000 ---p 00007000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\r\n    7f0b03233000-7f0b03235000 rwxp 00008000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\r\n    7f0b03235000-7f0b03236000 rwxp 00000000 00:00 0 \r\n    7f0b0323d000-7f0b03240000 r-xs 00033000 08:06 23371793                   /data/evgeny/usp/jars/pusp08.jar\r\n    7f0b03240000-7f0b03247000 r-xs 00000000 08:01 956835                     /usr/lib/gconv/gconv-modules.cache\r\n    7f0b03247000-7f0b0324f000 rwxs 00000000 08:01 531447                     /tmp/hsperfdata_evgeny/21947\r\n    7f0b0324f000-7f0b03250000 rwxp 00000000 00:00 0 \r\n    7f0b03250000-7f0b03251000 ---p 00000000 00:00 0 \r\n    7f0b03251000-7f0b03254000 rwxp 00000000 00:00 0 \r\n    7f0b03254000-7f0b03255000 r-xp 0001e000 08:01 1250947                    /lib/ld-2.10.1.so\r\n    7f0b03255000-7f0b03256000 rwxp 0001f000 08:01 1250947                    /lib/ld-2.10.1.so\r\n    7fffb0ea5000-7fffb0eba000 rwxp 00000000 00:00 0                          [stack]\r\n    7fffb0f10000-7fffb0f11000 r-xp 00000000 00:00 0                          [vdso]\r\n    ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\r\n    \r\n    VM Arguments:\r\n    jvm_args: -Xms6000m -Xmx8000m -Dfile.encoding=UTF8 -verbose:gc \r\n    java_command: usp.semantic.ParseCreateAgenda /data/evgeny/usp/serialized/pusp_abstracts /data/evgeny/usp/logs 3200 13 16 8 200 5 1\r\n    Launcher Type: SUN_STANDARD\r\n    \r\n    Environment Variables:\r\n    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\r\n    LD_LIBRARY_PATH=/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/../lib/amd64\r\n    SHELL=/bin/sh\r\n    \r\n    Signal Handlers:\r\n    SIGSEGV: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGBUS: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGFPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGPIPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGXFSZ: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGILL: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGUSR1: SIG_DFL, sa_mask[0]=0x00000000, sa_flags=0x00000000\r\n    SIGUSR2: [libjvm.so+0x597690], sa_mask[0]=0x00000000, sa_flags=0x10000004\r\n    SIGHUP: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGINT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGTERM: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGQUIT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    \r\n    \r\n    ---------------  S Y S T E M  ---------------\r\n    \r\n    OS:squeeze/sid\r\n    \r\n    uname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:05:01 UTC 2009 x86_64\r\n    libc:glibc 2.10.1 NPTL 2.10.1 \r\n    rlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity\r\n    load average:0.76 0.19 0.06\r\n    \r\n    CPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1\r\n    \r\n    Memory: 4k page, physical 8194680k(4274500k free), swap 9767480k(9755964k free)\r\n    \r\n    vm_info: Java HotSpot(TM) 64-Bit Server VM (14.1-b02) for linux-amd64 JRE (1.6.0_15-b03), built on Jul  2 2009 15:26:16 by &quot;java_re&quot; with gcc 3.2.2 (SuSE Linux)\r\n    \r\n    time: Wed Jun 22 10:52:33 2011\r\n    elapsed time: 17 seconds\r\n    \r\n        \r\n\r\nThanks for your help!\r\n\r\nAs suggested by the posters, it does sound like a hardware problem. I have changed the memory parameters of java and after some changes the program stops at different parts. I will investigate the diagnostics proposed below. I&#39;ll give an update as soon as I&#39;ve done that.\r\n\r\n@[egridasov][1], I tried JRE 1.6.0_26, but get the same problem: \r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x00007f51c12048e1, pid=29200, tid=139989005547792\r\n    #\r\n    # JRE version: 6.0_26-b03\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode linux-amd64 compressed oops)\r\n    # Problematic frame:\r\n    # V  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\r\n    #\r\n    # If you would like to submit a bug report, please visit:\r\n    #   http://java.sun.com/webapps/bugreport/crash.jsp\r\n    #\r\n    \r\n    ---------------  T H R E A D  ---------------\r\n    \r\n    Current thread (0x00000000418da800):  GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\r\n    \r\n    siginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\r\n    Register to memory mapping:\r\n    \r\n    RAX=0x0000000000000001 is an unknown value\r\n    RBX=0x0000000606e01eb8 is an oop\r\n    [[I \r\n     - klass: &#39;java/lang/Object&#39;[]\r\n     - length: 2\r\n    RCX=0x0000000000000003 is an unknown value\r\n    RDX=0x000000060ff12000 is an oop\r\n    \r\n    [error occurred during error reporting (printing register info), id 0xb]\r\n    \r\n    Stack: [0x00007f51bae2b000,0x00007f51baf2c000],  sp=0x00007f51baf2ae90,  free space=1023k\r\n    Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\n    V  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\r\n    V  [libjvm.so+0x76114d]  void PSScavenge::copy_and_push_safe_barrier&lt;unsigned&gt;(PSPromotionManager*, unsigned*)+0xcd\r\n    V  [libjvm.so+0x7605bf]  PSPromotionManager::drain_stacks_depth(bool)+0xdf\r\n    V  [libjvm.so+0x76382e]  StealTask::do_it(GCTaskManager*, unsigned)+0x2e\r\n    V  [libjvm.so+0x466efa]  GCTaskThread::run()+0x16a\r\n    V  [libjvm.so+0x710adf]  java_start(Thread*)+0x13f\r\n    \r\n    \r\n    ---------------  P R O C E S S  ---------------\r\n    \r\n    Java Threads: ( =&gt; current thread )\r\n      0x00007f51b406f800 JavaThread &quot;Low Memory Detector&quot; daemon [_thread_blocked, id=29212, stack(0x00007f51b9ce9000,0x00007f51b9dea000)]\r\n      0x00007f51b406d000 JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_blocked, id=29211, stack(0x00007f51b9dea000,0x00007f51b9eeb000)]\r\n      0x00007f51b406a000 JavaThread &quot;C2 CompilerThread0&quot; daemon [_thread_blocked, id=29210, stack(0x00007f51b9eeb000,0x00007f51b9fec000)]\r\n      0x00007f51b4068000 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=29209, stack(0x00007f51b9fec000,0x00007f51ba0ed000)]\r\n      0x00007f51b404c800 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=29208, stack(0x00007f51ba12c000,0x00007f51ba22d000)]\r\n      0x00007f51b404a800 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=29207, stack(0x00007f51ba22d000,0x00007f51ba32e000)]\r\n      0x00000000418c7800 JavaThread &quot;main&quot; [_thread_blocked, id=29201, stack(0x00007f51c071f000,0x00007f51c0820000)]\r\n    \r\n    Other Threads:\r\n      0x00007f51b4044000 VMThread [stack: 0x00007f51ba32e000,0x00007f51ba42f000] [id=29206]\r\n      0x00007f51b407a800 WatcherThread [stack: 0x00007f51b9be8000,0x00007f51b9ce9000] [id=29213]\r\n    \r\n    =&gt;0x00000000418da800 (exited) GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\r\n    \r\n    VM state:at safepoint (normal execution)\r\n    \r\n    VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\r\n    [0x00000000418c4530] Threads_lock - owner thread: 0x00007f51b4044000\r\n    [0x00000000418c4a30] Heap_lock - owner thread: 0x00000000418c7800\r\n    \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/811535/egridasov","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Hi and thanks for reading,</p>\n\n<p>I have the following error while running my program and can't figure out what the solution would be. I also looked at all the topics with a similar error here, but could not resolve my issue. Here the error:</p>\n\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\n#\n# JRE version: 6.0_15-b03\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\n# Problematic frame:\n# V  [libjvm.so+0x5df4cd]\n</code></pre>\n\n<p>My program takes some serialized objects and deserializes them, this is where the problem occurs. The strange thing however is, that the same code with the same objects to deserialize works perfectly fine on other machines with the same hardware, OS, etc. (I'm not sure if this might be hardware related, but I guess its not). </p>\n\n<p>Here is the code, that I'm executing in Java:</p>\n\n<pre><code>        FileInputStream f_in = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part.data\");\n        ObjectInputStream obj_in = new ObjectInputStream (f_in);\n        Object obj = obj_in.readObject();\n    //ERROR\n        FileInputStream f_in5 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_clustIdx_pairClustIdxs_.data\");\n        ObjectInputStream obj_in5 = new ObjectInputStream (f_in5);      \n        Object clustIdx_pairClustIdxs = obj_in5.readObject();\n\n        FileInputStream f_in4 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_pairClustIdxs_pairPartRootNodeIds_.data\");\n        ObjectInputStream obj_in4 = new ObjectInputStream (f_in4);      \n        Object pairClustIdxs_pairPartRootNodeIds = obj_in4.readObject();\n\n        FileInputStream f_in3 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_clustIdx_partRootNodeIds_.data\");\n        ObjectInputStream obj_in3 = new ObjectInputStream (f_in3);      \n        Object clustIdx_partRootNodeIds = obj_in3.readObject();\n\n        FileInputStream f_in2 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_rootNodeId_Part.data\");\n        ObjectInputStream obj_in2 = new ObjectInputStream (f_in2);\n        Object rootNodeId_Part = obj_in2.readObject();  \n\n        Part part = (Part) obj;\n        part.rootNodeId_part_ = (Map&lt;String, Part&gt;) rootNodeId_Part;\n        part.clustIdx_partRootNodeIds_ = (Map&lt;Integer,TreeSet&lt;String&gt;&gt; ) clustIdx_partRootNodeIds;\n        part.pairClustIdxs_pairPartRootNodeIds_ = (Map&lt;Pair&lt;Integer,Integer&gt;,Set&lt;Pair&lt;String,String&gt;&gt;&gt; ) pairClustIdxs_pairPartRootNodeIds;\n        part.clustIdx_pairClustIdxs_ = (Map&lt;Integer,Set&lt;Pair&lt;Integer,Integer&gt;&gt;&gt; ) clustIdx_pairClustIdxs;   \n</code></pre>\n\n<p>The error occurs after the first deserialization block. However, if I interchange it with any of the following blocks, the error is still in the second deserialization block. Again, the same code, with the same data works just fine on other machines. I tried reinstalling and updating Java, but it didn't help. </p>\n\n<p>Here the logfile of the error:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\n#\n# JRE version: 6.0_15-b03\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\n# Problematic frame:\n# V  [libjvm.so+0x5df4cd]\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00000000408c9000):  GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\n\nsiginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\n\nRegisters:\nRAX=0x0000000000000001, RBX=0x00007f09184091a8, RCX=0x00007f0b02748cb0, RDX=0x000600007f090486\nRSP=0x00007f0902bfce00, RBP=0x00007f0902bfce70, RSI=0x00007f0a808d4ed2, RDI=0x000600007f090496\nR8 =0x0000000000000001, R9 =0x00000000aa10002f, R10=0x00007f09184091a8, R11=0x00007f09027a8218\nR12=0x0708000000000000, R13=0x0000000000000000, R14=0x00007f0a808d4ed2, R15=0x0000000040914ef0\nRIP=0x00007f0b024734cd, EFL=0x0000000000010246, CSGSFS=0x0000000000000033, ERR=0x0000000000000000\n  TRAPNO=0x000000000000000d\n\nTop of Stack: (sp=0x00007f0902bfce00)\n0x00007f0902bfce00:   0000000000000400 00000000408c06a0\n0x00007f0902bfce10:   0000000000000005 01007f090c6663b8\n0x00007f0902bfce20:   00007f0902bfce50 00007f0b024741d0\n0x00007f0902bfce30:   00007f0918408028 0000000000257071\n0x00007f0902bfce40:   000000000025703f 00007f09184091a8\n0x00007f0902bfce50:   0000000040914fa0 0000000000000000\n0x00007f0902bfce60:   0000000000000001 00007f0902bfcefc\n0x00007f0902bfce70:   00007f0902bfce90 00007f0b02473f50\n0x00007f0902bfce80:   0000000000000001 0000000040914ef0\n0x00007f0902bfce90:   00007f0902bfced0 00007f0b02473092\n0x00007f0902bfcea0:   000000004095dc20 00007f09184091a8\n0x00007f0902bfceb0:   0000000040914ef0 0000000000000002\n0x00007f0902bfcec0:   00007f0b0275d4e0 000000004095dc20\n0x00007f0902bfced0:   00007f0902bfcf30 00007f0b0247672d\n0x00007f0902bfcee0:   00007f0902bfcef0 00007f0902bfcf00\n0x00007f0902bfcef0:   00007f0902bfcf30 6cfb9568021cd407\n0x00007f0902bfcf00:   00007f0ab4e04578 00007f0b027492a4\n0x00007f0902bfcf10:   000000004095dc20 00000000408c9000\n0x00007f0902bfcf20:   00007f0b025b0506 0000000000000000\n0x00007f0902bfcf30:   00007f0902bfd030 00007f0b021ce67a\n0x00007f0902bfcf40:   00007f0902bfcf80 00007f0902bfcf58\n0x00007f0902bfcf50:   00007f0b02760f40 0000000000000000\n0x00007f0902bfcf60:   00000000408c91e0 00000000408c9210\n0x00007f0902bfcf70:   00000000408c9220 00000000408c95f8\n0x00007f0902bfcf80:   00000000408c9000 00000000408c9600\n0x00007f0902bfcf90:   00000000408c9630 00000000408c9640\n0x00007f0902bfcfa0:   00000000408c9a18 00007f0902bfcfd0\n0x00007f0902bfcfb0:   00000000408c91e0 00000000408c9210\n0x00007f0902bfcfc0:   00000000408c9220 00000000408c95f8\n0x00007f0902bfcfd0:   00000000408c9000 00000000408c9600\n0x00007f0902bfcfe0:   00000000408c9630 00000000408c9640\n0x00007f0902bfcff0:   00000000408c9a18 00000000408c9a20 \n\nInstructions: (pc=0x00007f0b024734cd)\n0x00007f0b024734bd:   00 48 8d 14 f5 00 00 00 00 48 03 13 48 8d 7a 10\n0x00007f0b024734cd:   8b 5f 08 89 d8 c1 f8 03 85 db 0f 8e cb 05 00 00 \n\nStack: [0x00007f0902afd000,0x00007f0902bfe000],  sp=0x00007f0902bfce00,  free space=1023k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nV  [libjvm.so+0x5df4cd]\nV  [libjvm.so+0x5dff50]\nV  [libjvm.so+0x5df092]\nV  [libjvm.so+0x5e272d]\nV  [libjvm.so+0x33a67a]\nV  [libjvm.so+0x5971af]\n\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( =&gt; current thread )\n  0x0000000040946800 JavaThread \"Low Memory Detector\" daemon [_thread_blocked, id=21959, stack(0x00007f0902020000,0x00007f0902121000)]\n  0x0000000040942800 JavaThread \"CompilerThread1\" daemon [_thread_blocked, id=21958, stack(0x00007f0902121000,0x00007f0902222000)]\n  0x0000000040940000 JavaThread \"CompilerThread0\" daemon [_thread_blocked, id=21957, stack(0x00007f0902222000,0x00007f0902323000)]\n  0x000000004093d800 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=21956, stack(0x00007f0902323000,0x00007f0902424000)]\n  0x000000004091f800 JavaThread \"Finalizer\" daemon [_thread_blocked, id=21955, stack(0x00007f0902463000,0x00007f0902564000)]\n  0x000000004091d800 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=21954, stack(0x00007f0902564000,0x00007f0902665000)]\n  0x00000000408bb000 JavaThread \"main\" [_thread_blocked, id=21948, stack(0x00007f0b01b0f000,0x00007f0b01c10000)]\n\nOther Threads:\n  0x0000000040917000 VMThread [stack: 0x00007f0902665000,0x00007f0902766000] [id=21953]\n  0x0000000040949000 WatcherThread [stack: 0x00007f0901f1f000,0x00007f0902020000] [id=21960]\n\n=&gt;0x00000000408c9000 (exited) GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\n\nVM state:at safepoint (normal execution)\n\nVM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\n[0x00000000408b7c90] Threads_lock - owner thread: 0x0000000040917000\n[0x00000000408b8190] Heap_lock - owner thread: 0x00000000408bb000\n\nHeap\n PSYoungGen      total 1792000K, used 1536000K [0x00007f0a571c0000, 0x00007f0ad41c0000, 0x00007f0afdc60000)\n  eden space 1536000K, 100% used [0x00007f0a571c0000,0x00007f0ab4dc0000,0x00007f0ab4dc0000)\n  from space 256000K, 0% used [0x00007f0ac47c0000,0x00007f0ac47c0000,0x00007f0ad41c0000)\n  to   space 256000K, 99% used [0x00007f0ab4dc0000,0x00007f0ac47b8068,0x00007f0ac47c0000)\n PSOldGen        total 4096000K, used 237896K [0x00007f0909c60000, 0x00007f0a03c60000, 0x00007f0a571c0000)\n  object space 4096000K, 5% used [0x00007f0909c60000,0x00007f09184b2028,0x00007f0a03c60000)\n PSPermGen       total 21248K, used 3845K [0x00007f0904860000, 0x00007f0905d20000, 0x00007f0909c60000)\n  object space 21248K, 18% used [0x00007f0904860000,0x00007f0904c21718,0x00007f0905d20000)\n\nDynamic libraries:\n40000000-40009000 r-xp 00000000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\n40108000-4010a000 rwxp 00008000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\n408b2000-40d42000 rwxp 00000000 00:00 0                                  [heap]\n7f08fc000000-7f08fc4aa000 rwxp 00000000 00:00 0 \n7f08fc4aa000-7f0900000000 ---p 00000000 00:00 0 \n7f0901f1f000-7f0901f20000 ---p 00000000 00:00 0 \n7f0901f20000-7f0902020000 rwxp 00000000 00:00 0 \n7f0902020000-7f0902023000 ---p 00000000 00:00 0 \n7f0902023000-7f0902121000 rwxp 00000000 00:00 0 \n7f0902121000-7f0902124000 ---p 00000000 00:00 0 \n7f0902124000-7f0902222000 rwxp 00000000 00:00 0 \n7f0902222000-7f0902225000 ---p 00000000 00:00 0 \n7f0902225000-7f0902323000 rwxp 00000000 00:00 0 \n7f0902323000-7f0902326000 ---p 00000000 00:00 0 \n7f0902326000-7f0902424000 rwxp 00000000 00:00 0 \n7f0902424000-7f0902463000 r-xp 00000000 08:01 688275                     /usr/lib/locale/en_US.utf8/LC_CTYPE\n7f0902463000-7f0902466000 ---p 00000000 00:00 0 \n7f0902466000-7f0902564000 rwxp 00000000 00:00 0 \n7f0902564000-7f0902567000 ---p 00000000 00:00 0 \n7f0902567000-7f0902665000 rwxp 00000000 00:00 0 \n7f0902665000-7f0902666000 ---p 00000000 00:00 0 \n7f0902666000-7f090283e000 rwxp 00000000 00:00 0 \n7f090283e000-7f09029d4000 r-xs 02fb3000 08:01 803613                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/rt.jar\n7f09029d4000-7f09029fc000 rwxp 00000000 00:00 0 \n7f09029fc000-7f09029fd000 ---p 00000000 00:00 0 \n7f09029fd000-7f0902afd000 rwxp 00000000 00:00 0 \n7f0902afd000-7f0902afe000 ---p 00000000 00:00 0 \n7f0902afe000-7f0902bfe000 rwxp 00000000 00:00 0 \n7f0902bfe000-7f0902bff000 ---p 00000000 00:00 0 \n7f0902bff000-7f0902cff000 rwxp 00000000 00:00 0 \n7f0902cff000-7f0902d00000 ---p 00000000 00:00 0 \n7f0902d00000-7f0902e0b000 rwxp 00000000 00:00 0 \n7f0902e0b000-7f0902e2a000 rwxp 00000000 00:00 0 \n7f0902e2a000-7f09035fa000 rwxp 00000000 00:00 0 \n7f09035fa000-7f0903895000 rwxp 00000000 00:00 0 \n7f0903895000-7f09038a0000 rwxp 00000000 00:00 0 \n7f09038a0000-7f09038bf000 rwxp 00000000 00:00 0 \n7f09038bf000-7f090408f000 rwxp 00000000 00:00 0 \n7f090408f000-7f0904329000 rwxp 00000000 00:00 0 \n7f0904329000-7f0904712000 rwxp 00000000 00:00 0 \n7f0904712000-7f090485f000 rwxp 00000000 00:00 0 \n7f090485f000-7f0905d20000 rwxp 00000000 00:00 0 \n7f0905d20000-7f0909c60000 rwxp 00000000 00:00 0 \n7f0909c60000-7f0a03c60000 rwxp 00000000 00:00 0 \n7f0a03c60000-7f0a571c0000 rwxp 00000000 00:00 0 \n7f0a571c0000-7f0ad41c0000 rwxp 00000000 00:00 0 \n7f0ad41c0000-7f0afdc60000 rwxp 00000000 00:00 0 \n7f0afdc6f000-7f0afdedf000 rwxp 00000000 00:00 0 \n7f0afdedf000-7f0b00c6f000 rwxp 00000000 00:00 0 \n7f0b00c6f000-7f0b00c7d000 r-xp 00000000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\n7f0b00c7d000-7f0b00d7f000 ---p 0000e000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\n7f0b00d7f000-7f0b00d82000 rwxp 00010000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\n7f0b00d82000-7f0b00d83000 rwxp 00000000 00:00 0 \n7f0b00d83000-7f0b00d8f000 r-xp 00000000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00d8f000-7f0b00f8e000 ---p 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00f8e000-7f0b00f8f000 r-xp 0000b000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00f8f000-7f0b00f90000 rwxp 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00f90000-7f0b00f9a000 r-xp 00000000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b00f9a000-7f0b01199000 ---p 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b01199000-7f0b0119a000 r-xp 00009000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b0119a000-7f0b0119b000 rwxp 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b0119b000-7f0b011a2000 r-xp 00000000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b011a2000-7f0b013a2000 ---p 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b013a2000-7f0b013a3000 r-xp 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b013a3000-7f0b013a4000 rwxp 00008000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b013a4000-7f0b013ab000 r-xp 00000000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\n7f0b013ab000-7f0b014ac000 ---p 00007000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\n7f0b014ac000-7f0b014ae000 rwxp 00008000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\n7f0b014ae000-7f0b014af000 rwxp 00000000 00:00 0 \n7f0b014af000-7f0b014c5000 r-xp 00000000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b014c5000-7f0b016c5000 ---p 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b016c5000-7f0b016c6000 r-xp 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b016c6000-7f0b016c7000 rwxp 00017000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b016c7000-7f0b016c9000 rwxp 00000000 00:00 0 \n7f0b016c9000-7f0b016f2000 r-xp 00000000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\n7f0b016f2000-7f0b017f1000 ---p 00029000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\n7f0b017f1000-7f0b017f8000 rwxp 00028000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\n7f0b017f8000-7f0b01805000 r-xp 00000000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\n7f0b01805000-7f0b01904000 ---p 0000d000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\n7f0b01904000-7f0b01907000 rwxp 0000c000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\n7f0b01907000-7f0b0190e000 r-xp 00000000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b0190e000-7f0b01b0d000 ---p 00007000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b01b0d000-7f0b01b0e000 r-xp 00006000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b01b0e000-7f0b01b0f000 rwxp 00007000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b01b0f000-7f0b01b12000 ---p 00000000 00:00 0 \n7f0b01b12000-7f0b01c10000 rwxp 00000000 00:00 0 \n7f0b01c10000-7f0b01c92000 r-xp 00000000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01c92000-7f0b01e92000 ---p 00082000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01e92000-7f0b01e93000 r-xp 00082000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01e93000-7f0b01e94000 rwxp 00083000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01e94000-7f0b025f2000 r-xp 00000000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\n7f0b025f2000-7f0b026f1000 ---p 0075e000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\n7f0b026f1000-7f0b02869000 rwxp 0075d000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\n7f0b02869000-7f0b028a7000 rwxp 00000000 00:00 0 \n7f0b028a7000-7f0b02a0d000 r-xp 00000000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02a0d000-7f0b02c0c000 ---p 00166000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02c0c000-7f0b02c10000 r-xp 00165000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02c10000-7f0b02c11000 rwxp 00169000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02c11000-7f0b02c16000 rwxp 00000000 00:00 0 \n7f0b02c16000-7f0b02c18000 r-xp 00000000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02c18000-7f0b02e18000 ---p 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02e18000-7f0b02e19000 r-xp 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02e19000-7f0b02e1a000 rwxp 00003000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02e1a000-7f0b02e31000 r-xp 00000000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b02e31000-7f0b03030000 ---p 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b03030000-7f0b03031000 r-xp 00016000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b03031000-7f0b03032000 rwxp 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b03032000-7f0b03036000 rwxp 00000000 00:00 0 \n7f0b03036000-7f0b03055000 r-xp 00000000 08:01 1250947                    /lib/ld-2.10.1.so\n7f0b03069000-7f0b03073000 rwxp 00000000 00:00 0 \n7f0b03073000-7f0b03129000 rwxp 00000000 00:00 0 \n7f0b03129000-7f0b0312b000 rwxp 00000000 00:00 0 \n7f0b0312b000-7f0b03132000 r-xp 00000000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\n7f0b03132000-7f0b03233000 ---p 00007000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\n7f0b03233000-7f0b03235000 rwxp 00008000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\n7f0b03235000-7f0b03236000 rwxp 00000000 00:00 0 \n7f0b0323d000-7f0b03240000 r-xs 00033000 08:06 23371793                   /data/evgeny/usp/jars/pusp08.jar\n7f0b03240000-7f0b03247000 r-xs 00000000 08:01 956835                     /usr/lib/gconv/gconv-modules.cache\n7f0b03247000-7f0b0324f000 rwxs 00000000 08:01 531447                     /tmp/hsperfdata_evgeny/21947\n7f0b0324f000-7f0b03250000 rwxp 00000000 00:00 0 \n7f0b03250000-7f0b03251000 ---p 00000000 00:00 0 \n7f0b03251000-7f0b03254000 rwxp 00000000 00:00 0 \n7f0b03254000-7f0b03255000 r-xp 0001e000 08:01 1250947                    /lib/ld-2.10.1.so\n7f0b03255000-7f0b03256000 rwxp 0001f000 08:01 1250947                    /lib/ld-2.10.1.so\n7fffb0ea5000-7fffb0eba000 rwxp 00000000 00:00 0                          [stack]\n7fffb0f10000-7fffb0f11000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n\nVM Arguments:\njvm_args: -Xms6000m -Xmx8000m -Dfile.encoding=UTF8 -verbose:gc \njava_command: usp.semantic.ParseCreateAgenda /data/evgeny/usp/serialized/pusp_abstracts /data/evgeny/usp/logs 3200 13 16 8 200 5 1\nLauncher Type: SUN_STANDARD\n\nEnvironment Variables:\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\nLD_LIBRARY_PATH=/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/../lib/amd64\nSHELL=/bin/sh\n\nSignal Handlers:\nSIGSEGV: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGBUS: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGFPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGPIPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGXFSZ: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGILL: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGUSR1: SIG_DFL, sa_mask[0]=0x00000000, sa_flags=0x00000000\nSIGUSR2: [libjvm.so+0x597690], sa_mask[0]=0x00000000, sa_flags=0x10000004\nSIGHUP: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGINT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGTERM: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGQUIT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\n\n\n---------------  S Y S T E M  ---------------\n\nOS:squeeze/sid\n\nuname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:05:01 UTC 2009 x86_64\nlibc:glibc 2.10.1 NPTL 2.10.1 \nrlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity\nload average:0.76 0.19 0.06\n\nCPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1\n\nMemory: 4k page, physical 8194680k(4274500k free), swap 9767480k(9755964k free)\n\nvm_info: Java HotSpot(TM) 64-Bit Server VM (14.1-b02) for linux-amd64 JRE (1.6.0_15-b03), built on Jul  2 2009 15:26:16 by \"java_re\" with gcc 3.2.2 (SuSE Linux)\n\ntime: Wed Jun 22 10:52:33 2011\nelapsed time: 17 seconds\n</code></pre>\n\n<p>Thanks for your help!</p>\n\n<p>As suggested by the posters, it does sound like a hardware problem. I have changed the memory parameters of java and after some changes the program stops at different parts. I will investigate the diagnostics proposed below. I'll give an update as soon as I've done that.</p>\n\n<p>@<a href=\"https://stackoverflow.com/users/811535/egridasov\">egridasov</a>, I tried JRE 1.6.0_26, but get the same problem: </p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f51c12048e1, pid=29200, tid=139989005547792\n#\n# JRE version: 6.0_26-b03\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# V  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00000000418da800):  GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\n\nsiginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\nRegister to memory mapping:\n\nRAX=0x0000000000000001 is an unknown value\nRBX=0x0000000606e01eb8 is an oop\n[[I \n - klass: 'java/lang/Object'[]\n - length: 2\nRCX=0x0000000000000003 is an unknown value\nRDX=0x000000060ff12000 is an oop\n\n[error occurred during error reporting (printing register info), id 0xb]\n\nStack: [0x00007f51bae2b000,0x00007f51baf2c000],  sp=0x00007f51baf2ae90,  free space=1023k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nV  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\nV  [libjvm.so+0x76114d]  void PSScavenge::copy_and_push_safe_barrier&lt;unsigned&gt;(PSPromotionManager*, unsigned*)+0xcd\nV  [libjvm.so+0x7605bf]  PSPromotionManager::drain_stacks_depth(bool)+0xdf\nV  [libjvm.so+0x76382e]  StealTask::do_it(GCTaskManager*, unsigned)+0x2e\nV  [libjvm.so+0x466efa]  GCTaskThread::run()+0x16a\nV  [libjvm.so+0x710adf]  java_start(Thread*)+0x13f\n\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( =&gt; current thread )\n  0x00007f51b406f800 JavaThread \"Low Memory Detector\" daemon [_thread_blocked, id=29212, stack(0x00007f51b9ce9000,0x00007f51b9dea000)]\n  0x00007f51b406d000 JavaThread \"C2 CompilerThread1\" daemon [_thread_blocked, id=29211, stack(0x00007f51b9dea000,0x00007f51b9eeb000)]\n  0x00007f51b406a000 JavaThread \"C2 CompilerThread0\" daemon [_thread_blocked, id=29210, stack(0x00007f51b9eeb000,0x00007f51b9fec000)]\n  0x00007f51b4068000 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=29209, stack(0x00007f51b9fec000,0x00007f51ba0ed000)]\n  0x00007f51b404c800 JavaThread \"Finalizer\" daemon [_thread_blocked, id=29208, stack(0x00007f51ba12c000,0x00007f51ba22d000)]\n  0x00007f51b404a800 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=29207, stack(0x00007f51ba22d000,0x00007f51ba32e000)]\n  0x00000000418c7800 JavaThread \"main\" [_thread_blocked, id=29201, stack(0x00007f51c071f000,0x00007f51c0820000)]\n\nOther Threads:\n  0x00007f51b4044000 VMThread [stack: 0x00007f51ba32e000,0x00007f51ba42f000] [id=29206]\n  0x00007f51b407a800 WatcherThread [stack: 0x00007f51b9be8000,0x00007f51b9ce9000] [id=29213]\n\n=&gt;0x00000000418da800 (exited) GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\n\nVM state:at safepoint (normal execution)\n\nVM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\n[0x00000000418c4530] Threads_lock - owner thread: 0x00007f51b4044000\n[0x00000000418c4a30] Heap_lock - owner thread: 0x00000000418c7800\n</code></pre>\n"},{"tags":["java","spring-boot","jackson","spring-resttemplate"],"comments":[{"owner":{"account_id":2491981,"reputation":1372,"user_id":2169264,"display_name":"Michał Schielmann"},"score":1,"creation_date":1599246707,"post_id":63746595,"comment_id":112726013,"body_markdown":"have you tried building dependency tree to make sure that there are no transitive dependencies pulled? try using `mvn dependency:tree` and look for all lines with `jackson`.","body":"have you tried building dependency tree to make sure that there are no transitive dependencies pulled? try using <code>mvn dependency:tree</code> and look for all lines with <code>jackson</code>."},{"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"score":0,"creation_date":1599247369,"post_id":63746595,"comment_id":112726248,"body_markdown":"When building the dependency tree, all show the same `jackson` version: 2.10.1","body":"When building the dependency tree, all show the same <code>jackson</code> version: 2.10.1"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":2,"creation_date":1599249761,"post_id":63746595,"comment_id":112727027,"body_markdown":"The issue may be related to the `provided` scope that means that such dependency should be [provided by JDK or container](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope), then actual version of the dependency may differ in some environments.  If you use default `compile` scope, this issue should be resolved.","body":"The issue may be related to the <code>provided</code> scope that means that such dependency should be <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope\" rel=\"nofollow noreferrer\">provided by JDK or container</a>, then actual version of the dependency may differ in some environments.  If you use default <code>compile</code> scope, this issue should be resolved."},{"owner":{"account_id":2491981,"reputation":1372,"user_id":2169264,"display_name":"Michał Schielmann"},"score":0,"creation_date":1599249919,"post_id":63746595,"comment_id":112727080,"body_markdown":"In addition to Alexs comment - maybe it&#39;s worth checking the classpath when running the app, and check if it may contain some unexpected paths.","body":"In addition to Alexs comment - maybe it&#39;s worth checking the classpath when running the app, and check if it may contain some unexpected paths."},{"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"score":0,"creation_date":1599573795,"post_id":63746595,"comment_id":112811271,"body_markdown":"Tried changing the scope to compile but no luck - the issue persists!","body":"Tried changing the scope to compile but no luck - the issue persists!"}],"answers":[{"tags":[],"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1599761578,"creation_date":1599761578,"answer_id":63835462,"question_id":63746595,"body_markdown":"I *finally* worked out what was wrong here and it feels so absurd that I don&#39;t believe anyone would ever have gotten to the right answer without the code in their hands. It was only by pulling all the code back into one place and then seeking to find another means of mapping the object via Jackson (using an `ObjectMapper` directly as opposed to letting the `RestTemplate` figure that out) that I stumbled upon the true problem.\r\n\r\nThere is an audit class which is a property on my Person object which contains the normal, basic properties of created by, created date, modified by, modified date. These dates are `LocalDateTime` objects in the standard ISO-8601 format. It turns out that Jackson can no longer process the string straight into the `LocalDateTime` object and needs &quot;help&quot;. By adding a setter which takes the date as a string and does a `LocalDateTime.parse(date)` to set the actual property, I&#39;m now able to successfully hit the endpoints at will.\r\n\r\nI still have no clue why the exact error above was thrown, but there you have it. By not specifying a way to help translate from a `String` to the `LocalDateTime` object, I received the `JsonFormat$Value.hasLenient()` error from Jackson.","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p>I <em>finally</em> worked out what was wrong here and it feels so absurd that I don't believe anyone would ever have gotten to the right answer without the code in their hands. It was only by pulling all the code back into one place and then seeking to find another means of mapping the object via Jackson (using an <code>ObjectMapper</code> directly as opposed to letting the <code>RestTemplate</code> figure that out) that I stumbled upon the true problem.</p>\n<p>There is an audit class which is a property on my Person object which contains the normal, basic properties of created by, created date, modified by, modified date. These dates are <code>LocalDateTime</code> objects in the standard ISO-8601 format. It turns out that Jackson can no longer process the string straight into the <code>LocalDateTime</code> object and needs &quot;help&quot;. By adding a setter which takes the date as a string and does a <code>LocalDateTime.parse(date)</code> to set the actual property, I'm now able to successfully hit the endpoints at will.</p>\n<p>I still have no clue why the exact error above was thrown, but there you have it. By not specifying a way to help translate from a <code>String</code> to the <code>LocalDateTime</code> object, I received the <code>JsonFormat$Value.hasLenient()</code> error from Jackson.</p>\n"},{"tags":[],"owner":{"account_id":24665,"reputation":1563,"user_id":62881,"accept_rate":90,"display_name":"Clarkey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603817071,"creation_date":1603817071,"answer_id":64559094,"question_id":63746595,"body_markdown":"I had a similar issue.\r\n\r\nIn my case @Eyowzitgoin&#39;s answer helped me figure out my issue. I had a maven dependency conflict on the jackson annotations.\r\n\r\nI was trying to run some tests, and all was fine on the command line but intellij had an issue knowing which version to pick. I had `2.10.3` explicitly declared, but `2.8.5` was being picked up through a transitive dependency. \r\n\r\n`2.10.3` has a method `JsonFormat$Value.hasLenient`, but `2.8.5` doesn&#39;t.\r\n\r\nI was using the JsonFormat annotation on a String variable in a pojo, and intellij was expecting to be able to call the method, but was unable to do so.\r\n\r\nIn my case I didn&#39;t resolve the root of the problem because the variable should have been a LocalDate, so I changed the type and removed the annotation and the issue went away.\r\n\r\nI would expect that if I&#39;d left the types as they were and the annotation in place, and instead resolved the dependency issue and made sure that only one of the versions was present/declared the issue would also have been resolved.","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p>I had a similar issue.</p>\n<p>In my case @Eyowzitgoin's answer helped me figure out my issue. I had a maven dependency conflict on the jackson annotations.</p>\n<p>I was trying to run some tests, and all was fine on the command line but intellij had an issue knowing which version to pick. I had <code>2.10.3</code> explicitly declared, but <code>2.8.5</code> was being picked up through a transitive dependency.</p>\n<p><code>2.10.3</code> has a method <code>JsonFormat$Value.hasLenient</code>, but <code>2.8.5</code> doesn't.</p>\n<p>I was using the JsonFormat annotation on a String variable in a pojo, and intellij was expecting to be able to call the method, but was unable to do so.</p>\n<p>In my case I didn't resolve the root of the problem because the variable should have been a LocalDate, so I changed the type and removed the annotation and the issue went away.</p>\n<p>I would expect that if I'd left the types as they were and the annotation in place, and instead resolved the dependency issue and made sure that only one of the versions was present/declared the issue would also have been resolved.</p>\n"},{"tags":[],"owner":{"account_id":29345864,"reputation":1,"user_id":22484204,"display_name":"tzdun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578860,"creation_date":1693578576,"answer_id":77023959,"question_id":63746595,"body_markdown":"**Working on cucumber-report + playwright + java 1.8** &lt;br&gt;\r\nThese dependencies made my day:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p><strong>Working on cucumber-report + playwright + java 1.8</strong> <br>\nThese dependencies made my day:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2198,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63835462,"answer_count":3,"score":2,"last_activity_date":1693578860,"creation_date":1599245385,"question_id":63746595,"body_markdown":"I&#39;m building a set of microservices in Spring Boot. I&#39;ve got one service which interfaces with the database and has a series of RESTful endpoints which other apps can hit. Many of these table entities are complex objects and are served up as a JSON object but some are simple parameters and so are served as strings. When I hit the main DB service endpoints, all data is returned fine without issue.\r\n\r\nI have a series of other applications which consume this data in various ways. Because many objects are reused across applications (the DB service response shape, the person entity POJO, etc), I&#39;ve got a package made with some common classes. Each app imports these common classes and then makes calls to the main DB service via `RestTemplate`. Because the response is always wrapped in a standard way, I am getting the values by performing an exchange which expects a `ParameterizedTypeReference` of the response wrapper with the appropriate POJO or Java variable (String, int, etc).\r\n\r\nAs of 5 months ago, all was good. The app was deployed to a server and is still operating normally. However, I recently went back in to the code in order to make some modifications and now I find that when I run the app locally some of the endpoints fail with the following error:\r\n\r\n    java.lang.NoSuchMethodError: com.fasterxml.jackson.annotation.JsonFormat$Value.hasLenient()Z\r\n\r\nI thought at first that perhaps the two POMs were out of sync and one was pulling a newer version of Jackson but after hard coding the version in the POM to be 100% certain they were the same (version 2.10.1), it still has the same issue. It should also be noted that the method in the error message appears to have been added in version 2.9 and has not been deprecated as of this moment in time. This error only happens when trying to retrieve data from endpoints returning POJOs and not when the data type is a String. It may also be relevant that the call appears to never actually leave the app before throwing an error as the DB service endpoint never gets hit.\r\n\r\nAny ideas why I&#39;m getting this error and how I could resolve it?\r\n\r\nResponse Object:\r\n\r\n    public class DatabaseServiceResponse&lt;T&gt; {\r\n    \t@JsonInclude(Include.NON_NULL)\r\n    \tprivate List&lt;T&gt; entities;\r\n    \t\r\n    \t@JsonInclude(Include.NON_NULL)\r\n    \tprivate String error;\r\n    \t\r\n    \t[getters and setters ommitted]\r\n    }\r\n\r\nPerson Service:\r\n\r\n    public List&lt;Person&gt; getPeople() {\r\n    \tList&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n    \tHttpHeaders headers = getHeaders();\r\n    \tHttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\r\n    \tResponseEntity&lt;DatabaseServiceResponse&lt;Person&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;Person&gt;&gt;() {});  // Fails on this line\r\n    \tif (response.getStatusCode() == HttpStatus.OK) {\r\n    \t\tpeople = response.getBody().getEntities();\r\n    \t} else {\r\n    \t\tthrow new ServiceException(&quot;Error retrieving people&quot;);\r\n    \t}\r\n    \treturn people;\r\n    }\r\n    \r\n    public List&lt;String&gt; getPersonTypes() {\r\n    \tList&lt;String&gt; personTypes = new ArrayList&lt;&gt;();\r\n    \tHttpHeaders headers = getHeaders();\r\n    \tHttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\r\n    \tResponseEntity&lt;DatabaseServiceResponse&lt;String&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;String&gt;&gt;() {});  // Works fine here\r\n    \tif (response.getStatusCode() == HttpStatus.OK) {\r\n    \t\tpersonTypes = response.getBody().getEntities();\r\n    \t} else {\r\n    \t\tthrow new ServiceException(&quot;Error retrieving person types&quot;);\r\n    \t}\r\n    \treturn personTypes;\r\n    }\r\n\r\nPerson App POM:\r\n\r\n    &lt;parent&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\r\n    \t&lt;relativePath /&gt;\r\n    &lt;/parent&gt;\r\n\r\nCommon Elements POM:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.10.1&lt;/version&gt;\r\n    \t&lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n**UPDATE**\r\nI believe the external library and the potentially out-of-sync POM files was a red herring. I have copied all of the relevant classes into the main project to remove the dependency on the external package and I have the same issue. I&#39;ve also tried completely upgrading all versions to the latest and still no luck. Jackson, for whatever reason, will map JSON to a String or a list of Strings but just will not map my JSON to a POJO.","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p>I'm building a set of microservices in Spring Boot. I've got one service which interfaces with the database and has a series of RESTful endpoints which other apps can hit. Many of these table entities are complex objects and are served up as a JSON object but some are simple parameters and so are served as strings. When I hit the main DB service endpoints, all data is returned fine without issue.</p>\n<p>I have a series of other applications which consume this data in various ways. Because many objects are reused across applications (the DB service response shape, the person entity POJO, etc), I've got a package made with some common classes. Each app imports these common classes and then makes calls to the main DB service via <code>RestTemplate</code>. Because the response is always wrapped in a standard way, I am getting the values by performing an exchange which expects a <code>ParameterizedTypeReference</code> of the response wrapper with the appropriate POJO or Java variable (String, int, etc).</p>\n<p>As of 5 months ago, all was good. The app was deployed to a server and is still operating normally. However, I recently went back in to the code in order to make some modifications and now I find that when I run the app locally some of the endpoints fail with the following error:</p>\n<pre><code>java.lang.NoSuchMethodError: com.fasterxml.jackson.annotation.JsonFormat$Value.hasLenient()Z\n</code></pre>\n<p>I thought at first that perhaps the two POMs were out of sync and one was pulling a newer version of Jackson but after hard coding the version in the POM to be 100% certain they were the same (version 2.10.1), it still has the same issue. It should also be noted that the method in the error message appears to have been added in version 2.9 and has not been deprecated as of this moment in time. This error only happens when trying to retrieve data from endpoints returning POJOs and not when the data type is a String. It may also be relevant that the call appears to never actually leave the app before throwing an error as the DB service endpoint never gets hit.</p>\n<p>Any ideas why I'm getting this error and how I could resolve it?</p>\n<p>Response Object:</p>\n<pre><code>public class DatabaseServiceResponse&lt;T&gt; {\n    @JsonInclude(Include.NON_NULL)\n    private List&lt;T&gt; entities;\n    \n    @JsonInclude(Include.NON_NULL)\n    private String error;\n    \n    [getters and setters ommitted]\n}\n</code></pre>\n<p>Person Service:</p>\n<pre><code>public List&lt;Person&gt; getPeople() {\n    List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    HttpHeaders headers = getHeaders();\n    HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\n    ResponseEntity&lt;DatabaseServiceResponse&lt;Person&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;Person&gt;&gt;() {});  // Fails on this line\n    if (response.getStatusCode() == HttpStatus.OK) {\n        people = response.getBody().getEntities();\n    } else {\n        throw new ServiceException(&quot;Error retrieving people&quot;);\n    }\n    return people;\n}\n\npublic List&lt;String&gt; getPersonTypes() {\n    List&lt;String&gt; personTypes = new ArrayList&lt;&gt;();\n    HttpHeaders headers = getHeaders();\n    HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\n    ResponseEntity&lt;DatabaseServiceResponse&lt;String&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;String&gt;&gt;() {});  // Works fine here\n    if (response.getStatusCode() == HttpStatus.OK) {\n        personTypes = response.getBody().getEntities();\n    } else {\n        throw new ServiceException(&quot;Error retrieving person types&quot;);\n    }\n    return personTypes;\n}\n</code></pre>\n<p>Person App POM:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Common Elements POM:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>UPDATE</strong>\nI believe the external library and the potentially out-of-sync POM files was a red herring. I have copied all of the relevant classes into the main project to remove the dependency on the external package and I have the same issue. I've also tried completely upgrading all versions to the latest and still no luck. Jackson, for whatever reason, will map JSON to a String or a list of Strings but just will not map my JSON to a POJO.</p>\n"},{"tags":["java","xml","spring","apache-commons"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1693595067,"post_id":77023950,"comment_id":135786718,"body_markdown":"Unclear problem. That xml fragment can be parsed into a java object using jaxb for example. What apache commons has to do with this?","body":"Unclear problem. That xml fragment can be parsed into a java object using jaxb for example. What apache commons has to do with this?"}],"owner":{"account_id":16518030,"reputation":113,"user_id":11934922,"display_name":"Rishabh Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693578813,"creation_date":1693578487,"question_id":77023950,"body_markdown":"I am using spring and apache configuration library.\r\n\r\nIs there any way to get the list under authentication tag as an java object?\r\n\r\n    &lt;authentication&gt;\r\n     &lt;entry&gt;\r\n       &lt;key&gt; name  &lt;/key&gt;\r\n       &lt;value&gt; Rishabh &lt;/value&gt;\r\n     &lt;/entry&gt;\r\n      &lt;entry&gt;\r\n       &lt;key&gt; Id  &lt;/key&gt;\r\n       &lt;value&gt; 2515247 &lt;/value&gt;\r\n     &lt;/entry&gt;\r\n      &lt;entry&gt;\r\n       &lt;key&gt;  pass &lt;/key&gt;\r\n       &lt;value&gt;password &lt;/value&gt;\r\n     &lt;/entry&gt;\r\n    &lt;/authentication&gt;\r\nMy authentication POJO looks like this.\r\n\r\n    protected List&lt;Authentication.Entry&gt; entry;\r\n\r\nThanks in advance!!!","title":"Read List of Elements using apache commons","body":"<p>I am using spring and apache configuration library.</p>\n<p>Is there any way to get the list under authentication tag as an java object?</p>\n<pre><code>&lt;authentication&gt;\n &lt;entry&gt;\n   &lt;key&gt; name  &lt;/key&gt;\n   &lt;value&gt; Rishabh &lt;/value&gt;\n &lt;/entry&gt;\n  &lt;entry&gt;\n   &lt;key&gt; Id  &lt;/key&gt;\n   &lt;value&gt; 2515247 &lt;/value&gt;\n &lt;/entry&gt;\n  &lt;entry&gt;\n   &lt;key&gt;  pass &lt;/key&gt;\n   &lt;value&gt;password &lt;/value&gt;\n &lt;/entry&gt;\n&lt;/authentication&gt;\n</code></pre>\n<p>My authentication POJO looks like this.</p>\n<pre><code>protected List&lt;Authentication.Entry&gt; entry;\n</code></pre>\n<p>Thanks in advance!!!</p>\n"},{"tags":["java","maven","selenium-webdriver","testng","webdrivermanager-java"],"answers":[{"tags":[],"owner":{"account_id":11834138,"reputation":91,"user_id":8659981,"display_name":"Jack Vicky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689428978,"creation_date":1689428978,"answer_id":76694063,"question_id":76694062,"body_markdown":"The Error means that the dependency class may not compiled/downloaded correctly. To fix this issue you need to re-compile the maven file \r\n\r\nif using IntelliJ IDEA, go to maven and run &quot;clean&quot; command and run &quot;install&quot; command this will clean and re-download the dependency class files correctly. if required adjusts the TestNG maven dependency version to a stable version   ","title":"Error: java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file","body":"<p>The Error means that the dependency class may not compiled/downloaded correctly. To fix this issue you need to re-compile the maven file</p>\n<p>if using IntelliJ IDEA, go to maven and run &quot;clean&quot; command and run &quot;install&quot; command this will clean and re-download the dependency class files correctly. if required adjusts the TestNG maven dependency version to a stable version</p>\n"},{"tags":[],"owner":{"account_id":4420200,"reputation":4708,"user_id":3877746,"accept_rate":100,"display_name":"Boni Garc&#237;a"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693578716,"creation_date":1689861334,"answer_id":76730632,"question_id":76694062,"body_markdown":"You need to use Java 11 (or above) with WebDriverManager 5.4.0 (or above).\r\n\r\nUPDATE: To provide a solution to those that cannot bump to Java 11, I  released WebDriverManager 5.5.3, compiled with Java 8. \r\n\r\nIn any case, my personal opinion is that Java 8 is already an ancient version, and I recommend using at least Java 11+ as soon as possible.","title":"Error: java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file","body":"<p>You need to use Java 11 (or above) with WebDriverManager 5.4.0 (or above).</p>\n<p>UPDATE: To provide a solution to those that cannot bump to Java 11, I  released WebDriverManager 5.5.3, compiled with Java 8.</p>\n<p>In any case, my personal opinion is that Java 8 is already an ancient version, and I recommend using at least Java 11+ as soon as possible.</p>\n"}],"owner":{"account_id":11834138,"reputation":91,"user_id":8659981,"display_name":"Jack Vicky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1586,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693578716,"creation_date":1689428978,"question_id":76694062,"body_markdown":"when I run the below simple @Test selenium code with WebDriver Manager setup, I am facing the following error \r\n\r\n&gt; &quot;java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file class file has wrong version 55.0, should be 52.0\r\n\r\nCode Snippet:\r\n\r\n     @Test\r\n    public void driverSetUp(){\r\n        WebDriverManager.chromedriver().setup();\r\n        WebDriver driver = new ChromeDriver();\r\n        driver.get(&quot;https://www.google.com&quot;);\r\n        driver.close();\r\n        driver.quit();\r\n    }\r\n\r\npom.xml content,\r\n\r\n     &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n          &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n          &lt;version&gt;7.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n          &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n          &lt;version&gt;4.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n          &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.2&lt;/version&gt; &lt;!-- Use the appropriate version --&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;","title":"Error: java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file","body":"<p>when I run the below simple @Test selenium code with WebDriver Manager setup, I am facing the following error</p>\n<blockquote>\n<p>&quot;java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file class file has wrong version 55.0, should be 52.0</p>\n</blockquote>\n<p>Code Snippet:</p>\n<pre><code> @Test\npublic void driverSetUp(){\n    WebDriverManager.chromedriver().setup();\n    WebDriver driver = new ChromeDriver();\n    driver.get(&quot;https://www.google.com&quot;);\n    driver.close();\n    driver.quit();\n}\n</code></pre>\n<p>pom.xml content,</p>\n<pre><code> &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\n      &lt;version&gt;7.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;4.10.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n      &lt;version&gt;5.3.2&lt;/version&gt; &lt;!-- Use the appropriate version --&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","android","dagger-2"],"answers":[{"tags":[],"owner":{"account_id":12476573,"reputation":5021,"user_id":9082728,"display_name":"C&#244;ng Hải"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1591842046,"creation_date":1591842046,"answer_id":62316038,"question_id":62315281,"body_markdown":"You have to implementation `dagger` instead of `dagger-android`. Don&#39;t forget to make project or rebuild\r\n\r\n```\r\nimplementation &#39;com.google.dagger:dagger:2.27&#39;\r\nannotationProcessor &#39;com.google.dagger:dagger-compiler:2.27&#39;\r\n```","title":"Dagger 2 Component class not generated","body":"<p>You have to implementation <code>dagger</code> instead of <code>dagger-android</code>. Don't forget to make project or rebuild</p>\n\n<pre><code>implementation 'com.google.dagger:dagger:2.27'\nannotationProcessor 'com.google.dagger:dagger-compiler:2.27'\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user13651827"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591852043,"creation_date":1591852043,"answer_id":62317435,"question_id":62315281,"body_markdown":"Question you asked i encountered many times, And the lucky thing is i know how to solve it.\r\nhere are simple methods you can follow to solve it.\r\n\r\n1. You can clean/rebuild project to solve it.\r\n2. You can invalidate/cache restart your android studio to solve it.\r\n3. You can delete cache folder where you installed your android studio.but you have to make sure your android studio closed. Now you can restart it, your problem is gone.\r\n4. You can rename dagger component and rebuild your project to generate class. This solve your issue.\r\n\r\nHere are some quick methods,you can try to solve it.","title":"Dagger 2 Component class not generated","body":"<p>Question you asked i encountered many times, And the lucky thing is i know how to solve it.\nhere are simple methods you can follow to solve it.</p>\n\n<ol>\n<li>You can clean/rebuild project to solve it.</li>\n<li>You can invalidate/cache restart your android studio to solve it.</li>\n<li>You can delete cache folder where you installed your android studio.but you have to make sure your android studio closed. Now you can restart it, your problem is gone.</li>\n<li>You can rename dagger component and rebuild your project to generate class. This solve your issue.</li>\n</ol>\n\n<p>Here are some quick methods,you can try to solve it.</p>\n"},{"tags":[],"owner":{"account_id":14415045,"reputation":514,"user_id":10412712,"display_name":"jenos kon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668600771,"creation_date":1668600771,"answer_id":74460263,"question_id":62315281,"body_markdown":"If someone still faced this problem, just use those dependencies below it works for me : \r\n\r\n    implementation &#39;com.google.dagger:dagger-android:2.44.2&#39;\r\n    annotationProcessor &#39;com.google.dagger:dagger-android-processor:2.20&#39;\r\n    annotationProcessor &#39;com.google.dagger:dagger-compiler:2.20&#39;\r\n\r\ntry always to use the latest version of the dagger, use this link to get the latest version: https://github.com/google/dagger/releases","title":"Dagger 2 Component class not generated","body":"<p>If someone still faced this problem, just use those dependencies below it works for me :</p>\n<pre><code>implementation 'com.google.dagger:dagger-android:2.44.2'\nannotationProcessor 'com.google.dagger:dagger-android-processor:2.20'\nannotationProcessor 'com.google.dagger:dagger-compiler:2.20'\n</code></pre>\n<p>try always to use the latest version of the dagger, use this link to get the latest version: <a href=\"https://github.com/google/dagger/releases\" rel=\"nofollow noreferrer\">https://github.com/google/dagger/releases</a></p>\n"}],"owner":{"account_id":11294865,"reputation":147,"user_id":8282703,"display_name":"user8282703"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1212,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62316038,"answer_count":3,"score":1,"last_activity_date":1693578636,"creation_date":1591835931,"question_id":62315281,"body_markdown":" i&#39;m currently learn dagger2 but i have problem is daggercomponent class not generated and i can&#39;t know the reason \r\n\r\n    implementation &#39;com.google.dagger:dagger-android:2.27&#39;\r\n    implementation &#39;com.google.dagger:dagger-android-support:2.27&#39;  \r\n    annotationProcessor &#39;com.google.dagger:dagger-android-processor:2.27&#39;\r\n\r\n*****************************************************************************\r\n\r\n    public class Nugets {\r\n        @Inject\r\n        public Nugets() {\r\n        }\r\n    }\r\n***************************************\r\n\r\n    public class Water {\r\n    \r\n        @Inject\r\n        public Water() {\r\n        }\r\n    }\r\n****************************************\r\n\r\n    public class Coffee {\r\n    \r\n        Nugets nugets;\r\n        Water water;\r\n    \r\n        @Inject\r\n        public Coffee(Nugets nugets, Water water) {\r\n            this.nugets = nugets;\r\n            this.water = water;\r\n        }\r\n    }\r\n*****************************************************\r\n\r\n    @Component\r\n    public interface CoffeeComponent {\r\n        Coffee getCoffee();\r\n    }\r\n\r\n*****************************************************\r\nwhen i tried to to find DaggerCoffeeComponent class i didn&#39;t find it.\r\nnote i rebuild project \r\n","title":"Dagger 2 Component class not generated","body":"<p>i'm currently learn dagger2 but i have problem is daggercomponent class not generated and i can't know the reason </p>\n\n<pre><code>implementation 'com.google.dagger:dagger-android:2.27'\nimplementation 'com.google.dagger:dagger-android-support:2.27'  \nannotationProcessor 'com.google.dagger:dagger-android-processor:2.27'\n</code></pre>\n\n<hr>\n\n<pre><code>public class Nugets {\n    @Inject\n    public Nugets() {\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Water {\n\n    @Inject\n    public Water() {\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Coffee {\n\n    Nugets nugets;\n    Water water;\n\n    @Inject\n    public Coffee(Nugets nugets, Water water) {\n        this.nugets = nugets;\n        this.water = water;\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>@Component\npublic interface CoffeeComponent {\n    Coffee getCoffee();\n}\n</code></pre>\n\n<hr>\n\n<p>when i tried to to find DaggerCoffeeComponent class i didn't find it.\nnote i rebuild project </p>\n"},{"tags":["java","common-table-expression","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578225,"creation_date":1693578225,"answer_id":77023903,"question_id":77022303,"body_markdown":"You misplaced a parenthesis. You wrote:\r\n\r\n```java\r\n).asTable(&quot;q1&quot;)\r\n```\r\n\r\nWhen you should have written\r\n\r\n```java\r\n.asTable(&quot;q1&quot;))\r\n```\r\n\r\nIt becomes more obvious when you assign the derived table to a local variable like so:\r\n\r\n```java\r\nTable&lt;?&gt; q1 = \r\n    select(max(HISTORIES.ID), max(HISTORIES.CONTACT_ID))\r\n    .from(HISTORIES)\r\n    .groupBy(HISTORIES.CONTACT_ID)\r\n    .asTable(&quot;q1&quot;);\r\n```\r\n\r\nAnd then:\r\n\r\n```java\r\n...\r\n.from(q1)\r\n.join(HISTORIES)\r\n...\r\n```","title":"Jooq cte with joins not compiling","body":"<p>You misplaced a parenthesis. You wrote:</p>\n<pre class=\"lang-java prettyprint-override\"><code>).asTable(&quot;q1&quot;)\n</code></pre>\n<p>When you should have written</p>\n<pre class=\"lang-java prettyprint-override\"><code>.asTable(&quot;q1&quot;))\n</code></pre>\n<p>It becomes more obvious when you assign the derived table to a local variable like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Table&lt;?&gt; q1 = \n    select(max(HISTORIES.ID), max(HISTORIES.CONTACT_ID))\n    .from(HISTORIES)\n    .groupBy(HISTORIES.CONTACT_ID)\n    .asTable(&quot;q1&quot;);\n</code></pre>\n<p>And then:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n.from(q1)\n.join(HISTORIES)\n...\n</code></pre>\n"}],"owner":{"account_id":3572516,"reputation":141,"user_id":2982506,"display_name":"Dmitry Shabalin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693578225,"creation_date":1693563642,"question_id":77022303,"body_markdown":"I need in cte with joins. \r\nIn doc https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/with-clause/ just short example w/o any `joins` and `where` term. \r\n\r\nIf I use `joins` the type of will be TableOnConditionStep but for org.jooq.DerivedColumnList4#as required Select and faced with comile time error\r\n\r\n     method as in interface org.jooq.DerivedColumnList4 cannot be applied to given types;\r\n    [ERROR]   required: org.jooq.ResultQuery&lt;R&gt;\r\n    [ERROR]   found: org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt;\r\n    [ERROR]   reason: cannot infer type-variable(s) R\r\n    [ERROR]     (argument mismatch; org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt; cannot be converted to org.jooq.ResultQuery&lt;R&gt;)\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n     CommonTableExpression cte = name(&quot;amd&quot;)\r\n                .fields(&quot;contact_id&quot;, &quot;created_date&quot;, &quot;name&quot;, &quot;type&quot;)\r\n                .as(\r\n                    select(\r\n                        HISTORIES.CONTACT_ID,\r\n                        DSL.max(HISTORIES.CREATED_DATE),\r\n                        CONTACTS.NAME,\r\n                        CONTACTS.TYPE\r\n                    ).from(\r\n                            dslContext.select(\r\n                                    DSL.max(HISTORIES.ID),\r\n                                    DSL.max(HISTORIES.CONTACT_ID)\r\n                                ).from(HISTORIES)\r\n                                .groupBy(HISTORIES.CONTACT_ID)\r\n                        ).asTable(&quot;q1&quot;)\r\n                        .join(HISTORIES)\r\n                        .on(field(&quot;q1.id&quot;).eq(HISTORIES.ID))\r\n                        .join(CONTACTS)\r\n                        .on(DSL.coalesce(HISTORIES.CREATED_BY, HISTORIES.CONTACT_ID).eq(CONTACTS.ID))\r\n                );\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Jooq cte with joins not compiling","body":"<p>I need in cte with joins.\nIn doc <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/with-clause/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/with-clause/</a> just short example w/o any <code>joins</code> and <code>where</code> term.</p>\n<p>If I use <code>joins</code> the type of will be TableOnConditionStep but for org.jooq.DerivedColumnList4#as required Select and faced with comile time error</p>\n<pre><code> method as in interface org.jooq.DerivedColumnList4 cannot be applied to given types;\n[ERROR]   required: org.jooq.ResultQuery&lt;R&gt;\n[ERROR]   found: org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt;\n[ERROR]   reason: cannot infer type-variable(s) R\n[ERROR]     (argument mismatch; org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt; cannot be converted to org.jooq.ResultQuery&lt;R&gt;)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code> CommonTableExpression cte = name(&quot;amd&quot;)\n            .fields(&quot;contact_id&quot;, &quot;created_date&quot;, &quot;name&quot;, &quot;type&quot;)\n            .as(\n                select(\n                    HISTORIES.CONTACT_ID,\n                    DSL.max(HISTORIES.CREATED_DATE),\n                    CONTACTS.NAME,\n                    CONTACTS.TYPE\n                ).from(\n                        dslContext.select(\n                                DSL.max(HISTORIES.ID),\n                                DSL.max(HISTORIES.CONTACT_ID)\n                            ).from(HISTORIES)\n                            .groupBy(HISTORIES.CONTACT_ID)\n                    ).asTable(&quot;q1&quot;)\n                    .join(HISTORIES)\n                    .on(field(&quot;q1.id&quot;).eq(HISTORIES.ID))\n                    .join(CONTACTS)\n                    .on(DSL.coalesce(HISTORIES.CREATED_BY, HISTORIES.CONTACT_ID).eq(CONTACTS.ID))\n            );\n</code></pre>\n\n"},{"tags":["java","spring","spring-boot","liquibase"],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1650322101,"creation_date":1650322101,"answer_id":71917815,"question_id":71917324,"body_markdown":"Yeah, you can&#39;t really do that.  Once you&#39;ve applied a changeset it records the checksum in the config database, any changes (even whitespace) will cause this validation error.  If you&#39;re using maven or gradle you can clear the checksums and they will be recomputed on the next run by using the clearChecksums goal on the liquibase plugin.\r\n\r\nYou should pay close attention, when you use the SQL option (via `&lt;include file=&quot;` I presume), it DOES NOT differ the checksum on whitespace so there are probably other differences that you are not seeing.  If you&#39;re confident that the changes are inconsequential, add\r\n\r\n    --validCheckSum 8:47d241e6e1636203501ec72cafe4e5b6\r\n\r\nto the header of your SQL file and this will tell liquibase that even though the original checksum was calculated as `8:600cf084d9c1ea85df2ddaa4f7a8a309`, `8:47d241e6e1636203501ec72cafe4e5b6` is also a valid checksum for this file.\r\n\r\nSome good advice would be to have tighter control of these files using your RCS, otherwise you&#39;re going to be constantly fighting with this.","title":"How to fix ValidationFailedException in liquibase checksum?","body":"<p>Yeah, you can't really do that.  Once you've applied a changeset it records the checksum in the config database, any changes (even whitespace) will cause this validation error.  If you're using maven or gradle you can clear the checksums and they will be recomputed on the next run by using the clearChecksums goal on the liquibase plugin.</p>\n<p>You should pay close attention, when you use the SQL option (via <code>&lt;include file=&quot;</code> I presume), it DOES NOT differ the checksum on whitespace so there are probably other differences that you are not seeing.  If you're confident that the changes are inconsequential, add</p>\n<pre><code>--validCheckSum 8:47d241e6e1636203501ec72cafe4e5b6\n</code></pre>\n<p>to the header of your SQL file and this will tell liquibase that even though the original checksum was calculated as <code>8:600cf084d9c1ea85df2ddaa4f7a8a309</code>, <code>8:47d241e6e1636203501ec72cafe4e5b6</code> is also a valid checksum for this file.</p>\n<p>Some good advice would be to have tighter control of these files using your RCS, otherwise you're going to be constantly fighting with this.</p>\n"},{"tags":[],"owner":{"account_id":1443148,"reputation":561,"user_id":1362619,"display_name":"Andriy Boyko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578060,"creation_date":1693578060,"answer_id":77023886,"question_id":71917324,"body_markdown":"In my case with additions to liquibase SQL scripts the same error was resolved by exploring the `databasechangelog` table and manually deleting the last record from it: \r\n\r\n    DELETE FROM public.databasechangelog WHERE id = &#39;id_you_discovered&#39;\r\n","title":"How to fix ValidationFailedException in liquibase checksum?","body":"<p>In my case with additions to liquibase SQL scripts the same error was resolved by exploring the <code>databasechangelog</code> table and manually deleting the last record from it:</p>\n<pre><code>DELETE FROM public.databasechangelog WHERE id = 'id_you_discovered'\n</code></pre>\n"}],"owner":{"account_id":7938311,"reputation":537,"user_id":6164682,"display_name":"sub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4594,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":71917815,"answer_count":2,"score":1,"last_activity_date":1693578060,"creation_date":1650317602,"question_id":71917324,"body_markdown":"I am using liquibase with spring boot. I am having SQL changesets. I have not changed anything in the liquibase SQL scripts. but I am getting below error\r\n\r\n&gt; Error creating bean with name &#39;liquibase&#39; defined in class path\r\n&gt; resource: Invocation of init method failed; nested exception is\r\n&gt; liquibase.exception.ValidationFailedException: Validation Failed:\\r\\n \r\n&gt; 1 change sets check sum\\r\\n         \r\n&gt; liquibase/db/0001_sample.sql::sample1_2::admin was:\r\n&gt; 8:600cf084d9c1ea85df2ddaa4f7a8a309 but is now:\r\n&gt; 8:47d241e6e1636203501ec72cafe4e5b6\\r\\n&quot;,\r\n&gt;     &quot;class&quot;: &quot;org.springframework.beans.factory.BeanCreationException&quot;,\r\n\r\nBelow is my **0001_table1.sql**\r\n\t\r\n    --liquibase formatted sql\r\n    --changeset admin:sample1_1\r\n    create table....\r\n    --rollback DROP TABLE tablename\r\n    \r\n    --changeset admin:sample1_2\r\n    add column....\r\n\r\nI think this is due to formatting changing from my IDE to another ide. But I like to fix it. I am not looking for clearing checksum. Please suggest how to handle when using plain SQL with liquibase.\r\n\r\n**Note:** I have seen examples with xml version, but I am looking for SQL with liquibase.","title":"How to fix ValidationFailedException in liquibase checksum?","body":"<p>I am using liquibase with spring boot. I am having SQL changesets. I have not changed anything in the liquibase SQL scripts. but I am getting below error</p>\n<blockquote>\n<p>Error creating bean with name 'liquibase' defined in class path\nresource: Invocation of init method failed; nested exception is\nliquibase.exception.ValidationFailedException: Validation Failed:\\r\\n\n1 change sets check sum\\r\\n<br />\nliquibase/db/0001_sample.sql::sample1_2::admin was:\n8:600cf084d9c1ea85df2ddaa4f7a8a309 but is now:\n8:47d241e6e1636203501ec72cafe4e5b6\\r\\n&quot;,\n&quot;class&quot;: &quot;org.springframework.beans.factory.BeanCreationException&quot;,</p>\n</blockquote>\n<p>Below is my <strong>0001_table1.sql</strong></p>\n<pre><code>--liquibase formatted sql\n--changeset admin:sample1_1\ncreate table....\n--rollback DROP TABLE tablename\n\n--changeset admin:sample1_2\nadd column....\n</code></pre>\n<p>I think this is due to formatting changing from my IDE to another ide. But I like to fix it. I am not looking for clearing checksum. Please suggest how to handle when using plain SQL with liquibase.</p>\n<p><strong>Note:</strong> I have seen examples with xml version, but I am looking for SQL with liquibase.</p>\n"},{"tags":["java","android","scroll","android-recyclerview"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1414381334,"post_id":26580723,"comment_id":41778468,"body_markdown":"Are you calling `scrollToPosition` immediately after setting the adapter?","body":"Are you calling <code>scrollToPosition</code> immediately after setting the adapter?"},{"owner":{"account_id":2695345,"reputation":2101,"user_id":2327567,"accept_rate":75,"display_name":"waylaidwanderer"},"score":0,"creation_date":1414387845,"post_id":26580723,"comment_id":41779701,"body_markdown":"@ianhanniballake yes, it&#39;s right after `conversationView.setAdapter(conversationViewAdapter);`.","body":"@ianhanniballake yes, it&#39;s right after <code>conversationView.setAdapter(conversationViewAdapter);</code>."},{"owner":{"account_id":2373566,"reputation":560,"user_id":2077582,"display_name":"RCB"},"score":4,"creation_date":1455295428,"post_id":26580723,"comment_id":58441576,"body_markdown":"It is probably because you are calling +1 instead of -1   so the 5th element would be position [4] because it starts at 0. Doing +1 would give you an ArrayOutOfBounds ... did it not crash there?","body":"It is probably because you are calling +1 instead of -1   so the 5th element would be position [4] because it starts at 0. Doing +1 would give you an ArrayOutOfBounds ... did it not crash there?"},{"owner":{"account_id":4232985,"reputation":2632,"user_id":3464919,"display_name":"Codelaby"},"score":1,"creation_date":1474620982,"post_id":26580723,"comment_id":66615532,"body_markdown":"Add after setadapter mRecyclerView.scrollToPosition(carsList.size()-1);","body":"Add after setadapter mRecyclerView.scrollToPosition(carsList.size()-1);"}],"answers":[{"tags":[],"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1512334145,"creation_date":1414389250,"answer_id":26581863,"question_id":26580723,"body_markdown":"When you call `setAdapter`, that does not immediately lay out and position items on the screen (that takes a single layout pass) hence your `scrollToPosition()` call has no actual elements to scroll to when you call it.\r\n\r\nInstead, you should register a [ViewTreeObserver.OnGlobalLayoutListener][1] (via [addOnGlobalLayoutListner()][2] from a `ViewTreeObserver` created by `conversationView.getViewTreeObserver()`) which delays your `scrollToPosition()` until after the first layout pass:\r\n\r\n    conversationView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\r\n      public void onGlobalLayout() {\r\n        conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size();\r\n        // Unregister the listener to only call scrollToPosition once\r\n        conversationView.getViewTreeObserver().removeGlobalOnLayoutListener(this);\r\n        \r\n        // Use vto.removeOnGlobalLayoutListener(this) on API16+ devices as \r\n        // removeGlobalOnLayoutListener is deprecated.\r\n        // They do the same thing, just a rename so your choice.\r\n      }\r\n    });\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html\r\n  [2]: http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnGlobalLayoutListener(android.view.ViewTreeObserver.OnGlobalLayoutListener)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>When you call <code>setAdapter</code>, that does not immediately lay out and position items on the screen (that takes a single layout pass) hence your <code>scrollToPosition()</code> call has no actual elements to scroll to when you call it.</p>\n\n<p>Instead, you should register a <a href=\"http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html\" rel=\"nofollow noreferrer\">ViewTreeObserver.OnGlobalLayoutListener</a> (via <a href=\"http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnGlobalLayoutListener(android.view.ViewTreeObserver.OnGlobalLayoutListener)\" rel=\"nofollow noreferrer\">addOnGlobalLayoutListner()</a> from a <code>ViewTreeObserver</code> created by <code>conversationView.getViewTreeObserver()</code>) which delays your <code>scrollToPosition()</code> until after the first layout pass:</p>\n\n<pre><code>conversationView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\n  public void onGlobalLayout() {\n    conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size();\n    // Unregister the listener to only call scrollToPosition once\n    conversationView.getViewTreeObserver().removeGlobalOnLayoutListener(this);\n\n    // Use vto.removeOnGlobalLayoutListener(this) on API16+ devices as \n    // removeGlobalOnLayoutListener is deprecated.\n    // They do the same thing, just a rename so your choice.\n  }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3717858,"reputation":1233,"user_id":3093580,"accept_rate":30,"display_name":"Yuki  Yoshida"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1414503949,"creation_date":1414503949,"answer_id":26609979,"question_id":26580723,"body_markdown":"    class MyLayoutManager extends LinearLayoutManager {\r\n\r\n      public MyLayoutManager(Context context) {\r\n        super(context, LinearLayoutManager.VERTICAL, false);\r\n      }\r\n\r\n      @Override public void smoothScrollToPosition(RecyclerView recyclerView,\r\n          final RecyclerView.State state, final int position) {\r\n\r\n        int fcvip = findFirstCompletelyVisibleItemPosition();\r\n        int lcvip = findLastCompletelyVisibleItemPosition();\r\n\r\n        if (position &lt; fcvip || lcvip &lt; position) {\r\n          // scrolling to invisible position\r\n\r\n          float fcviY = findViewByPosition(fcvip).getY();\r\n          float lcviY = findViewByPosition(lcvip).getY();\r\n\r\n          recyclerView.setOnScrollListener(new RecyclerView.OnScrollListener() {\r\n\r\n            int currentState = RecyclerView.SCROLL_STATE_IDLE;\r\n\r\n            @Override public void onScrollStateChanged(RecyclerView recyclerView, int newState) {\r\n\r\n              if (currentState == RecyclerView.SCROLL_STATE_SETTLING\r\n                  &amp;&amp; newState == RecyclerView.SCROLL_STATE_IDLE) {\r\n\r\n                // recursive scrolling\r\n                smoothScrollToPosition(recyclerView, state, position);\r\n              }\r\n\r\n              currentState = newState;\r\n            }\r\n\r\n            @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\r\n\r\n              int fcvip = findFirstCompletelyVisibleItemPosition();\r\n              int lcvip = findLastCompletelyVisibleItemPosition();\r\n\r\n              if ((dy &lt; 0 &amp;&amp; fcvip == position) || (dy &gt; 0 &amp;&amp; lcvip == position)) {\r\n                // stop scrolling\r\n                recyclerView.setOnScrollListener(null);\r\n              }\r\n            }\r\n          });\r\n\r\n          if (position &lt; fcvip) {\r\n            // scroll up\r\n\r\n            recyclerView.smoothScrollBy(0, (int) (fcviY - lcviY));\r\n          } else {\r\n            // scroll down\r\n\r\n            recyclerView.smoothScrollBy(0, (int) (lcviY - fcviY));\r\n          }\r\n        } else {\r\n          // scrolling to visible position\r\n\r\n          float fromY = findViewByPosition(fcvip).getY();\r\n          float targetY = findViewByPosition(position).getY();\r\n\r\n          recyclerView.smoothScrollBy(0, (int) (targetY - fromY));\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nand\r\n\r\n    MyLayoutManager layoutManager = new MyLayoutManager(context);\r\n    recyclerView.setLayoutManager(layoutManager);\r\n\r\n    RecyclerView.Adapter adapter = new YourAdapter();\r\n    recyclerView.setAdapter(adapter);\r\n\r\n    recyclerView.smoothScrollToPosition(adapter.getItemCount() - 1);\r\n\r\n\r\nabove code works, but it&#39;s not smooth and not cool.","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<pre><code>class MyLayoutManager extends LinearLayoutManager {\n\n  public MyLayoutManager(Context context) {\n    super(context, LinearLayoutManager.VERTICAL, false);\n  }\n\n  @Override public void smoothScrollToPosition(RecyclerView recyclerView,\n      final RecyclerView.State state, final int position) {\n\n    int fcvip = findFirstCompletelyVisibleItemPosition();\n    int lcvip = findLastCompletelyVisibleItemPosition();\n\n    if (position &lt; fcvip || lcvip &lt; position) {\n      // scrolling to invisible position\n\n      float fcviY = findViewByPosition(fcvip).getY();\n      float lcviY = findViewByPosition(lcvip).getY();\n\n      recyclerView.setOnScrollListener(new RecyclerView.OnScrollListener() {\n\n        int currentState = RecyclerView.SCROLL_STATE_IDLE;\n\n        @Override public void onScrollStateChanged(RecyclerView recyclerView, int newState) {\n\n          if (currentState == RecyclerView.SCROLL_STATE_SETTLING\n              &amp;&amp; newState == RecyclerView.SCROLL_STATE_IDLE) {\n\n            // recursive scrolling\n            smoothScrollToPosition(recyclerView, state, position);\n          }\n\n          currentState = newState;\n        }\n\n        @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\n\n          int fcvip = findFirstCompletelyVisibleItemPosition();\n          int lcvip = findLastCompletelyVisibleItemPosition();\n\n          if ((dy &lt; 0 &amp;&amp; fcvip == position) || (dy &gt; 0 &amp;&amp; lcvip == position)) {\n            // stop scrolling\n            recyclerView.setOnScrollListener(null);\n          }\n        }\n      });\n\n      if (position &lt; fcvip) {\n        // scroll up\n\n        recyclerView.smoothScrollBy(0, (int) (fcviY - lcviY));\n      } else {\n        // scroll down\n\n        recyclerView.smoothScrollBy(0, (int) (lcviY - fcviY));\n      }\n    } else {\n      // scrolling to visible position\n\n      float fromY = findViewByPosition(fcvip).getY();\n      float targetY = findViewByPosition(position).getY();\n\n      recyclerView.smoothScrollBy(0, (int) (targetY - fromY));\n    }\n  }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>MyLayoutManager layoutManager = new MyLayoutManager(context);\nrecyclerView.setLayoutManager(layoutManager);\n\nRecyclerView.Adapter adapter = new YourAdapter();\nrecyclerView.setAdapter(adapter);\n\nrecyclerView.smoothScrollToPosition(adapter.getItemCount() - 1);\n</code></pre>\n\n<p>above code works, but it's not smooth and not cool.</p>\n"},{"tags":[],"owner":{"account_id":250813,"reputation":11515,"user_id":2191890,"accept_rate":56,"display_name":"Roc Boronat"},"down_vote_count":0,"up_vote_count":444,"is_accepted":false,"score":444,"last_activity_date":1524173683,"creation_date":1416578682,"answer_id":27063152,"question_id":26580723,"body_markdown":"I was looking at this post to find the answer but... I think everyone on this post was facing the same scenario as me: `scrollToPosition()` was fully ignored, for an evident reason.\r\n\r\nWhat I was using?\r\n\r\n    recyclerView.scrollToPosition(items.size());\r\n\r\n... what **WORKED**?\r\n\r\n    recyclerView.scrollToPosition(items.size() - 1);\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I was looking at this post to find the answer but... I think everyone on this post was facing the same scenario as me: <code>scrollToPosition()</code> was fully ignored, for an evident reason.</p>\n\n<p>What I was using?</p>\n\n<pre><code>recyclerView.scrollToPosition(items.size());\n</code></pre>\n\n<p>... what <strong>WORKED</strong>?</p>\n\n<pre><code>recyclerView.scrollToPosition(items.size() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":301114,"reputation":37863,"user_id":608649,"display_name":"yigit"},"down_vote_count":25,"up_vote_count":251,"is_accepted":true,"score":226,"last_activity_date":1468322684,"creation_date":1416601964,"answer_id":27069845,"question_id":26580723,"body_markdown":"Just set **`setStackFromEnd=true`** or **`setReverseLayout=true`** so that LLM will layout items from end.\r\n\r\nThe difference between these two is that `setStackFromEnd` will set the view to show the last element, the layout direction will remain the same. (So, in an left-to-right horizontal Recycler View, the last element will be shown and scrolling to the left will show the earlier elements)\r\n\r\nWhereas `setReverseLayout` will change the order of the elements added by the Adapter. The layout will start from the last element, which will be the left-most in an LTR Recycler View and then, scrolling to the right will show the earlier elements.\r\n\r\nSample:\r\n\r\n\tfinal LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getActivity());\r\n\tlinearLayoutManager.setReverseLayout(true);\r\n\t_listView.setLayoutManager(linearLayoutManager);\r\n\r\nSee [documentation][1] for details.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#setReverseLayout(boolean)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Just set <strong><code>setStackFromEnd=true</code></strong> or <strong><code>setReverseLayout=true</code></strong> so that LLM will layout items from end.</p>\n\n<p>The difference between these two is that <code>setStackFromEnd</code> will set the view to show the last element, the layout direction will remain the same. (So, in an left-to-right horizontal Recycler View, the last element will be shown and scrolling to the left will show the earlier elements)</p>\n\n<p>Whereas <code>setReverseLayout</code> will change the order of the elements added by the Adapter. The layout will start from the last element, which will be the left-most in an LTR Recycler View and then, scrolling to the right will show the earlier elements.</p>\n\n<p>Sample:</p>\n\n<pre><code>final LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getActivity());\nlinearLayoutManager.setReverseLayout(true);\n_listView.setLayoutManager(linearLayoutManager);\n</code></pre>\n\n<p>See <a href=\"https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#setReverseLayout(boolean)\" rel=\"noreferrer\">documentation</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":6549218,"reputation":2535,"user_id":5064151,"display_name":"Muhammad Umair Shafique"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1625837915,"creation_date":1446622434,"answer_id":33516129,"question_id":26580723,"body_markdown":"To scrolldown from any position in the recyclerview to bottom\r\n\r\n**Kotlin**\r\n\r\n    editText.setOnClickListener {\r\n        rv.postDelayed({                 \r\n            rv.scrollToPosition(rv.adapter.itemCount - 1)\r\n        }, 1000)\r\n    }\r\n\r\n\r\n**Java**\r\n    \r\n    edittext.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    rv.postDelayed(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                          rv.scrollToPosition(rv.getAdapter().getItemCount() - 1);\r\n                        }\r\n                    }, 1000);\r\n                }\r\n            });","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>To scrolldown from any position in the recyclerview to bottom</p>\n<p><strong>Kotlin</strong></p>\n<pre><code>editText.setOnClickListener {\n    rv.postDelayed({                 \n        rv.scrollToPosition(rv.adapter.itemCount - 1)\n    }, 1000)\n}\n</code></pre>\n<p><strong>Java</strong></p>\n<pre><code>edittext.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                rv.postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                      rv.scrollToPosition(rv.getAdapter().getItemCount() - 1);\n                    }\n                }, 1000);\n            }\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8429620,"reputation":701,"user_id":6325805,"display_name":"WritingForAnroid"},"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1505168832,"creation_date":1465457280,"answer_id":37719465,"question_id":26580723,"body_markdown":"I know its late to answer here, still if anybody want to know solution is below\r\n\r\n    conversationView.smoothScrollToPosition(conversationView.getAdapter().getItemCount() - 1);\r\n\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I know its late to answer here, still if anybody want to know solution is below</p>\n\n<pre><code>conversationView.smoothScrollToPosition(conversationView.getAdapter().getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9360863,"reputation":620,"user_id":6947235,"accept_rate":50,"display_name":"Anky An"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492775329,"creation_date":1492775329,"answer_id":43541967,"question_id":26580723,"body_markdown":"Only Ian&#39;s answer was able to make my `RecyclerView` scroll to a specified position. However, The `RecyclerView` was not able to scroll afterwards when I used `scrollToPosition()`. `smoothScrollToPosition()` worked but the initial animation made it too slow when the list was long. \r\nThe reason was the listener was not removed. I used the code below to remove the current `ViewTreeObserver` and it worked as a charm.\r\n\r\n        mRecyclerView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\r\n            @Override\r\n            public void onGlobalLayout() {\r\n                mRecyclerView.scrollToPosition(mPosition);\r\n                mRecyclerView.getViewTreeObserver().removeOnGlobalLayoutListener(this);\r\n            }\r\n        });\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Only Ian's answer was able to make my <code>RecyclerView</code> scroll to a specified position. However, The <code>RecyclerView</code> was not able to scroll afterwards when I used <code>scrollToPosition()</code>. <code>smoothScrollToPosition()</code> worked but the initial animation made it too slow when the list was long. \nThe reason was the listener was not removed. I used the code below to remove the current <code>ViewTreeObserver</code> and it worked as a charm.</p>\n\n<pre><code>    mRecyclerView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\n        @Override\n        public void onGlobalLayout() {\n            mRecyclerView.scrollToPosition(mPosition);\n            mRecyclerView.getViewTreeObserver().removeOnGlobalLayoutListener(this);\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":392231,"reputation":81,"user_id":3363817,"display_name":"Wasim Amin"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1495633428,"creation_date":1495631227,"answer_id":44159312,"question_id":26580723,"body_markdown":"IF you have adapter attached with recyclerView then just do this.\r\n\r\n   \r\n   \r\n   \r\n `mRecyclerView.smoothScrollToPosition(mRecyclerView.getAdapter().getItemCount());`","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>IF you have adapter attached with recyclerView then just do this.</p>\n\n<p><code>mRecyclerView.smoothScrollToPosition(mRecyclerView.getAdapter().getItemCount());</code></p>\n"},{"tags":[],"owner":{"account_id":4865394,"reputation":1989,"user_id":3923839,"accept_rate":75,"display_name":"abedfar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1498507840,"creation_date":1498507840,"answer_id":44767901,"question_id":26580723,"body_markdown":"Roc answer is a great help. I would like to add a small block to it:\r\n\r\n    mRecyclerView.scrollToPosition(mAdapter.getItemCount() - 1);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Roc answer is a great help. I would like to add a small block to it:</p>\n\n<pre><code>mRecyclerView.scrollToPosition(mAdapter.getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9823775,"reputation":543,"user_id":7277557,"display_name":"amaresh hiremani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500477272,"creation_date":1500475629,"answer_id":45194064,"question_id":26580723,"body_markdown":"This works perfectly fine for me:\r\n    \r\n    AdapterChart adapterChart = new AdapterChart(getContext(),messageList);\r\n    recyclerView.setAdapter(adapterChart);\r\n    recyclerView.scrollToPosition(recyclerView.getAdapter().getItemCount()-1);\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>This works perfectly fine for me:</p>\n\n<pre><code>AdapterChart adapterChart = new AdapterChart(getContext(),messageList);\nrecyclerView.setAdapter(adapterChart);\nrecyclerView.scrollToPosition(recyclerView.getAdapter().getItemCount()-1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440244,"reputation":3289,"user_id":829711,"accept_rate":85,"display_name":"galex"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1517403683,"creation_date":1517403683,"answer_id":48542833,"question_id":26580723,"body_markdown":"In my case where views do not have the same height, calling [**scrollToPosition on the LayoutManager**][1] worked to really scroll to the bottom and see fully the last item:\r\n\r\n    recycler.getLayoutManager().scrollToPosition(adapter.getItemCount() - 1);\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#scrollToPosition(int)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>In my case where views do not have the same height, calling <a href=\"https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#scrollToPosition(int)\" rel=\"nofollow noreferrer\"><strong>scrollToPosition on the LayoutManager</strong></a> worked to really scroll to the bottom and see fully the last item:</p>\n\n<pre><code>recycler.getLayoutManager().scrollToPosition(adapter.getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8429,"reputation":56686,"user_id":15187,"accept_rate":96,"display_name":"yanchenko"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1517786904,"creation_date":1517786904,"answer_id":48614054,"question_id":26580723,"body_markdown":"In Kotlin:\r\n\r\n    recyclerView.viewTreeObserver.addOnGlobalLayoutListener { scrollToEnd() }\r\n    \r\n    private fun scrollToEnd() =\r\n    \t\t(adapter.itemCount - 1).takeIf { it &gt; 0 }?.let(recyclerView::smoothScrollToPosition)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>In Kotlin:</p>\n\n<pre><code>recyclerView.viewTreeObserver.addOnGlobalLayoutListener { scrollToEnd() }\n\nprivate fun scrollToEnd() =\n        (adapter.itemCount - 1).takeIf { it &gt; 0 }?.let(recyclerView::smoothScrollToPosition)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9171232,"reputation":119,"user_id":9628146,"display_name":"hasanga lakdinu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523415684,"creation_date":1523415684,"answer_id":49765812,"question_id":26580723,"body_markdown":" this code will give you latest post first, i think this answer is helpful. \r\n\r\n        mInstaList=(RecyclerView)findViewById(R.id.insta_list);\r\n        mInstaList.setHasFixedSize(true);\r\n       \r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(this);\r\n        layoutManager.setOrientation(LinearLayoutManager.VERTICAL);\r\n\r\n        mInstaList.setLayoutManager(layoutManager);\r\n        layoutManager.setStackFromEnd(true);\r\n        layoutManager.setReverseLayout(true);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>this code will give you latest post first, i think this answer is helpful. </p>\n\n<pre><code>    mInstaList=(RecyclerView)findViewById(R.id.insta_list);\n    mInstaList.setHasFixedSize(true);\n\n    LinearLayoutManager layoutManager = new LinearLayoutManager(this);\n    layoutManager.setOrientation(LinearLayoutManager.VERTICAL);\n\n    mInstaList.setLayoutManager(layoutManager);\n    layoutManager.setStackFromEnd(true);\n    layoutManager.setReverseLayout(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9138695,"reputation":1262,"user_id":6797400,"display_name":"Shubham Agrawal"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1545487824,"creation_date":1530875515,"answer_id":51209140,"question_id":26580723,"body_markdown":"Add this code after sending message and before getting message from server\r\n\r\n    recyclerView.scrollToPosition(mChatList.size() - 1);\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Add this code after sending message and before getting message from server</p>\n\n<pre><code>recyclerView.scrollToPosition(mChatList.size() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1797509,"reputation":2459,"user_id":1636610,"accept_rate":20,"display_name":"AbhinayMe"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1540973604,"creation_date":1540973604,"answer_id":53078933,"question_id":26580723,"body_markdown":"Solution for **Kotlin**:\r\n\r\napply below code after setting &quot;recyclerView.adapter&quot; or after &quot;recyclerView.adapter.notifyDataSetChanged()&quot;\r\n\r\n    recyclerView.scrollToPosition(recyclerView.adapter.itemCount - 1)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Solution for <strong>Kotlin</strong>:</p>\n\n<p>apply below code after setting \"recyclerView.adapter\" or after \"recyclerView.adapter.notifyDataSetChanged()\"</p>\n\n<pre><code>recyclerView.scrollToPosition(recyclerView.adapter.itemCount - 1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558596454,"creation_date":1558544066,"answer_id":56261684,"question_id":26580723,"body_markdown":"Tried a method of [@galex][1], it worked until refactoring. So I used an answer of [@yanchenko][2] and changed a bit. Probably this is because I called scrolling from `onCreateView()`, where a fragment view was built (and probably didn&#39;t have right size).\r\n\r\n    private fun scrollPhotosToEnd(view: View) {\r\n        view.recycler_view.viewTreeObserver.addOnGlobalLayoutListener(object :\r\n            ViewTreeObserver.OnGlobalLayoutListener {\r\n            override fun onGlobalLayout() {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\r\n                    view.recycler_view.viewTreeObserver.removeOnGlobalLayoutListener(this)\r\n                } else {\r\n                    @Suppress(&quot;DEPRECATION&quot;)\r\n                    view.recycler_view.viewTreeObserver.removeGlobalOnLayoutListener(this)\r\n                }\r\n                adapter?.itemCount?.takeIf { it &gt; 0 }?.let {\r\n                    view.recycler_view.scrollToPosition(it - 1)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\nYou can also add a check of `viewTreeObserver.isAlive` like in https://stackoverflow.com/a/39001731/2914140.\r\n\r\n  [1]: https://stackoverflow.com/a/48542833/2914140\r\n  [2]: https://stackoverflow.com/a/48614054/2914140","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Tried a method of <a href=\"https://stackoverflow.com/a/48542833/2914140\">@galex</a>, it worked until refactoring. So I used an answer of <a href=\"https://stackoverflow.com/a/48614054/2914140\">@yanchenko</a> and changed a bit. Probably this is because I called scrolling from <code>onCreateView()</code>, where a fragment view was built (and probably didn't have right size).</p>\n\n<pre><code>private fun scrollPhotosToEnd(view: View) {\n    view.recycler_view.viewTreeObserver.addOnGlobalLayoutListener(object :\n        ViewTreeObserver.OnGlobalLayoutListener {\n        override fun onGlobalLayout() {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\n                view.recycler_view.viewTreeObserver.removeOnGlobalLayoutListener(this)\n            } else {\n                @Suppress(\"DEPRECATION\")\n                view.recycler_view.viewTreeObserver.removeGlobalOnLayoutListener(this)\n            }\n            adapter?.itemCount?.takeIf { it &gt; 0 }?.let {\n                view.recycler_view.scrollToPosition(it - 1)\n            }\n        }\n    })\n}\n</code></pre>\n\n<p>You can also add a check of <code>viewTreeObserver.isAlive</code> like in <a href=\"https://stackoverflow.com/a/39001731/2914140\">https://stackoverflow.com/a/39001731/2914140</a>.</p>\n"},{"tags":[],"owner":{"account_id":10660314,"reputation":648,"user_id":7848471,"display_name":"Dishant Kawatra"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1573822238,"creation_date":1559754751,"answer_id":56465126,"question_id":26580723,"body_markdown":"First time scroll when entering in recycler view first time then use \r\n\r\n    linearLayoutManager.scrollToPositionWithOffset(messageHashMap.size()-1\r\n\r\nput in minus for scroll down for scroll up put in positive value);\r\n        \r\n   if the view is very big in height then scrolltoposition particular offset is used for the top of view then you use \r\n    \r\n  \r\n\r\n    int overallXScroldl =chatMessageBinding.rvChat.computeVerticalScrollOffset();\r\n    chatMessageBinding.rvChat.smoothScrollBy(0, Math.abs(overallXScroldl));","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>First time scroll when entering in recycler view first time then use </p>\n\n<pre><code>linearLayoutManager.scrollToPositionWithOffset(messageHashMap.size()-1\n</code></pre>\n\n<p>put in minus for scroll down for scroll up put in positive value);</p>\n\n<p>if the view is very big in height then scrolltoposition particular offset is used for the top of view then you use </p>\n\n<pre><code>int overallXScroldl =chatMessageBinding.rvChat.computeVerticalScrollOffset();\nchatMessageBinding.rvChat.smoothScrollBy(0, Math.abs(overallXScroldl));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16430171,"reputation":408,"user_id":11869227,"display_name":"Arnaud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592787317,"creation_date":1592787317,"answer_id":62506029,"question_id":26580723,"body_markdown":"If none of these worked,\r\n\r\nyou should try to use :\r\n\r\n\r\n    ConstraintLayout targetView = (ConstraintLayout) recyclerView.findViewHolderForAdapterPosition(adapter.getItemCount()-1).itemView;\r\n    targetView.getParent().requestChildFocus(targetView, targetView);\r\n\r\nBy doing this, you are requesting a certain ConstraintLayout (Or whatever you have) to be displayed. The scroll is instant.\r\n\r\nI works even with keyboard shown.","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If none of these worked,</p>\n<p>you should try to use :</p>\n<pre><code>ConstraintLayout targetView = (ConstraintLayout) recyclerView.findViewHolderForAdapterPosition(adapter.getItemCount()-1).itemView;\ntargetView.getParent().requestChildFocus(targetView, targetView);\n</code></pre>\n<p>By doing this, you are requesting a certain ConstraintLayout (Or whatever you have) to be displayed. The scroll is instant.</p>\n<p>I works even with keyboard shown.</p>\n"},{"tags":[],"owner":{"account_id":15970785,"reputation":105,"user_id":11524988,"display_name":"Evgenii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600803493,"creation_date":1600803493,"answer_id":64016633,"question_id":26580723,"body_markdown":"You must hide `AppBarLayout` before `scrollToPosition` if you are using him","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>You must hide <code>AppBarLayout</code> before <code>scrollToPosition</code> if you are using him</p>\n"},{"tags":[],"owner":{"account_id":13717415,"reputation":1385,"user_id":9898251,"display_name":"Badri Paudel"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1609959711,"creation_date":1609959711,"answer_id":65601849,"question_id":26580723,"body_markdown":"The answer is \r\n \r\n\r\n    recyclerView.scrollToPosition(arrayList.size() - 1);\r\n\r\nEveryone has mentioned it. \r\n\r\n**But the** **problem** I was facing was that it was **not placed correctly**. \r\n\r\nI tried and placed just after the `adapter.notifyDataSetChanged();` and it worked. \r\nWhenever, data in your recycler view changes, it automatically scrolls to the bottom like after sending messages or you open the chat list for the first time.  \r\n\r\nNote : This code was tasted in Java.\r\n\r\nactual code for me was : \r\n\r\n    //scroll to bottom after sending message.\r\n    binding.chatRecyclerView.scrollToPosition(messageArrayList.size() - 1);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>The answer is</p>\n<pre><code>recyclerView.scrollToPosition(arrayList.size() - 1);\n</code></pre>\n<p>Everyone has mentioned it.</p>\n<p><strong>But the</strong> <strong>problem</strong> I was facing was that it was <strong>not placed correctly</strong>.</p>\n<p>I tried and placed just after the <code>adapter.notifyDataSetChanged();</code> and it worked.\nWhenever, data in your recycler view changes, it automatically scrolls to the bottom like after sending messages or you open the chat list for the first time.</p>\n<p>Note : This code was tasted in Java.</p>\n<p>actual code for me was :</p>\n<pre><code>//scroll to bottom after sending message.\nbinding.chatRecyclerView.scrollToPosition(messageArrayList.size() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5009087,"reputation":121,"user_id":4025848,"display_name":"jiong103"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612173651,"creation_date":1612173651,"answer_id":65990642,"question_id":26580723,"body_markdown":"  You can scroll to the bottom of the last item, if the height of the last item is too large, you need to offset \r\n\r\n     private void scrollToBottom(final RecyclerView recyclerView) {\r\n            // scroll to last item to get the view of last item\r\n            final LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();\r\n            final RecyclerView.Adapter adapter = recyclerView.getAdapter();\r\n            final int lastItemPosition = adapter.getItemCount() - 1;\r\n        \r\n            layoutManager.scrollToPositionWithOffset(lastItemPosition, 0);\r\n            recyclerView.post(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    // then scroll to specific offset\r\n                    View target = layoutManager.findViewByPosition(lastItemPosition);\r\n                    if (target != null) {\r\n                        int offset = recyclerView.getMeasuredHeight() - target.getMeasuredHeight();\r\n                        layoutManager.scrollToPositionWithOffset(lastItemPosition, offset);\r\n                    }\r\n                }\r\n            });\r\n    \r\n    \r\n    \r\n        }","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>You can scroll to the bottom of the last item, if the height of the last item is too large, you need to offset</p>\n<pre><code> private void scrollToBottom(final RecyclerView recyclerView) {\n        // scroll to last item to get the view of last item\n        final LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();\n        final RecyclerView.Adapter adapter = recyclerView.getAdapter();\n        final int lastItemPosition = adapter.getItemCount() - 1;\n    \n        layoutManager.scrollToPositionWithOffset(lastItemPosition, 0);\n        recyclerView.post(new Runnable() {\n            @Override\n            public void run() {\n                // then scroll to specific offset\n                View target = layoutManager.findViewByPosition(lastItemPosition);\n                if (target != null) {\n                    int offset = recyclerView.getMeasuredHeight() - target.getMeasuredHeight();\n                    layoutManager.scrollToPositionWithOffset(lastItemPosition, offset);\n                }\n            }\n        });\n\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11973176,"reputation":41,"user_id":8761109,"display_name":"Panagiotis Tzelalis"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1613167173,"creation_date":1613167173,"answer_id":66179581,"question_id":26580723,"body_markdown":"If you want just starting from the end use:\r\n\r\n\r\n    layoutManager.stackFromEnd = true\r\n\r\n(Kotlin solution) ","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If you want just starting from the end use:</p>\n<pre><code>layoutManager.stackFromEnd = true\n</code></pre>\n<p>(Kotlin solution)</p>\n"},{"tags":[],"owner":{"account_id":15736708,"reputation":434,"user_id":11355432,"display_name":"Ismail Osunlana"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1615680859,"creation_date":1615680859,"answer_id":66619839,"question_id":26580723,"body_markdown":"If you are having issues making recyclerview scroll to the latest, check that the recyclerview is not inside a nestedScrollView. That was my issue. I had to remove the nestedScrollview and then the below code worked.\r\n\r\n    binding.recyclerView.scrollToPosition(adapter.getItemCount() - 1);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If you are having issues making recyclerview scroll to the latest, check that the recyclerview is not inside a nestedScrollView. That was my issue. I had to remove the nestedScrollview and then the below code worked.</p>\n<pre><code>binding.recyclerView.scrollToPosition(adapter.getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20228607,"reputation":11,"user_id":14835786,"display_name":"Nauman Ansari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625846811,"creation_date":1625846811,"answer_id":68319796,"question_id":26580723,"body_markdown":"I know this is too late but this worked for me so that i am answering this question\r\n\r\nfirst,\r\n\r\n    LinearLayoutManager layoutManager=new LinearLayoutManager(this);\r\n    layoutManager.setStackFromEnd(true);\r\n    recyclerView.setLayoutManager(layoutManager);\r\nafter that,\r\n\r\n    database.addValueEventListener(....){\r\n    @override\r\n    public void onDataCange(...){\r\n    ....\r\n    ....\r\n    //put this line here\r\n    recyclerView.smoothScrollToPosition(recyclerView.getAdapter().getItemCount()-1);\r\n    }\r\n    }","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I know this is too late but this worked for me so that i am answering this question</p>\n<p>first,</p>\n<pre><code>LinearLayoutManager layoutManager=new LinearLayoutManager(this);\nlayoutManager.setStackFromEnd(true);\nrecyclerView.setLayoutManager(layoutManager);\n</code></pre>\n<p>after that,</p>\n<pre><code>database.addValueEventListener(....){\n@override\npublic void onDataCange(...){\n....\n....\n//put this line here\nrecyclerView.smoothScrollToPosition(recyclerView.getAdapter().getItemCount()-1);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22272840,"reputation":1,"user_id":16502519,"display_name":"Dranisht A"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1626954127,"creation_date":1626954127,"answer_id":68484223,"question_id":26580723,"body_markdown":"use only gravity for easy solution\r\n\r\n android:layout_gravity=&quot;bottom&quot;","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>use only gravity for easy solution</p>\n<p>android:layout_gravity=&quot;bottom&quot;</p>\n"},{"tags":[],"owner":{"account_id":14397383,"reputation":81,"user_id":10400229,"display_name":"Kiwan Park"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638411667,"creation_date":1638411667,"answer_id":70193485,"question_id":26580723,"body_markdown":"if you use kotlin, try this\r\n\r\n    conversationView.post {\r\n        scrollToPosition(conversationView?.adapter.itemCount - 1)\r\n    }","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>if you use kotlin, try this</p>\n<pre><code>conversationView.post {\n    scrollToPosition(conversationView?.adapter.itemCount - 1)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7643077,"reputation":1276,"user_id":5794571,"display_name":"Aaeb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645458753,"creation_date":1645458255,"answer_id":71209159,"question_id":26580723,"body_markdown":"If you working with reversedLayout &quot;chat interface&quot; specially if you have images, you can try the following:\r\n\r\nfirst, register DataObserver with the adapter\r\n\r\n       chatAdapter.registerAdapterDataObserver(object : \r\n                             RecyclerView.AdapterDataObserver() {\r\n\r\n       override fun onItemRangeInserted(positionStart: Int itemCount: Int) {\r\n\r\n          val messageCount: Int = chatAdapter.itemCount\r\n\r\n          val lastVisiblePosition: Int =\r\n                layoutManager.findLastCompletelyVisibleItemPosition()\r\n\r\n             if (lastVisiblePosition == -1 || positionStart &lt;= (messageCount - 1)) {\r\n                recyclerView.scrollToPosition(positionStart)\r\n            }\r\n        }\r\n    }) \r\n\r\n\r\nthis will be called once you set the data for the adapter\r\n\r\n\r\n\r\nsecond, you have to add a scroll listener to the recyclerView like this:\r\n\r\n       recyclerView.addOnScrollListener(object \r\n         :RecyclerView.OnScrollListener() {\r\n\r\n           override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: \r\n              Int) {\r\n                super.onScrolled(recyclerView, dx, dy)\r\n\r\n              val lastVisiblePosition: Int =\r\n                  layoutManager.findLastCompletelyVisibleItemPosition()\r\n            if (lastVisiblePosition != -1 &amp;&amp; lastVisiblePosition &lt; \r\n                    chatAdapter.itemCount - 1) {\r\n                recyclerView.smoothScrollToPosition(0)\r\n            }\r\n        }\r\n    })","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If you working with reversedLayout &quot;chat interface&quot; specially if you have images, you can try the following:</p>\n<p>first, register DataObserver with the adapter</p>\n<pre><code>   chatAdapter.registerAdapterDataObserver(object : \n                         RecyclerView.AdapterDataObserver() {\n\n   override fun onItemRangeInserted(positionStart: Int itemCount: Int) {\n\n      val messageCount: Int = chatAdapter.itemCount\n\n      val lastVisiblePosition: Int =\n            layoutManager.findLastCompletelyVisibleItemPosition()\n\n         if (lastVisiblePosition == -1 || positionStart &lt;= (messageCount - 1)) {\n            recyclerView.scrollToPosition(positionStart)\n        }\n    }\n}) \n</code></pre>\n<p>this will be called once you set the data for the adapter</p>\n<p>second, you have to add a scroll listener to the recyclerView like this:</p>\n<pre><code>   recyclerView.addOnScrollListener(object \n     :RecyclerView.OnScrollListener() {\n\n       override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: \n          Int) {\n            super.onScrolled(recyclerView, dx, dy)\n\n          val lastVisiblePosition: Int =\n              layoutManager.findLastCompletelyVisibleItemPosition()\n        if (lastVisiblePosition != -1 &amp;&amp; lastVisiblePosition &lt; \n                chatAdapter.itemCount - 1) {\n            recyclerView.smoothScrollToPosition(0)\n        }\n    }\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27304743,"reputation":1,"user_id":20820907,"display_name":"Akshay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675635404,"creation_date":1675406401,"answer_id":75332297,"question_id":26580723,"body_markdown":"use \r\n\r\n```\r\nvideo_frames?.smoothScrollToPosition(pos.toInt())\r\n```\r\n          \r\nthis work for me* \r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>use</p>\n<pre><code>video_frames?.smoothScrollToPosition(pos.toInt())\n</code></pre>\n<p>this work for me*</p>\n"},{"tags":[],"owner":{"account_id":29329924,"reputation":1,"user_id":22471598,"display_name":"Karam J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693577180,"creation_date":1693400328,"answer_id":77008271,"question_id":26580723,"body_markdown":"add this code for scroll to top  mRecyclerView.scrollToPosition(0)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>add this code for scroll to top  mRecyclerView.scrollToPosition(0)</p>\n"}],"owner":{"account_id":2695345,"reputation":2101,"user_id":2327567,"accept_rate":75,"display_name":"waylaidwanderer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232947,"favorite_count":0,"down_vote_count":1,"up_vote_count":199,"accepted_answer_id":27069845,"answer_count":29,"score":198,"last_activity_date":1693577180,"creation_date":1414379829,"question_id":26580723,"body_markdown":"I&#39;d like to scroll to the bottom of the RecyclerView list after loading the activity.\r\n\r\n    GENERIC_MESSAGE_LIST = (ArrayList) intent.getExtras().getParcelableArrayList(ConversationsAdapter.EXTRA_MESSAGE);\r\n    conversationView = (RecyclerView) findViewById(R.id.list_messages);\r\n    conversationView.setHasFixedSize(true);\r\n    conversationViewLayoutManager = new LinearLayoutManager(this);\r\n    conversationView.setLayoutManager(conversationViewLayoutManager);\r\n    conversationViewAdapter = new ConversationAdapter(GENERIC_MESSAGE_LIST, this);\r\n    conversationView.setAdapter(conversationViewAdapter);\r\n\r\n`conversationView.scrollTo(...)` throws an exception about being not supported in RecyclerView, and `conversationView.scrollToPosition(...)` doesn&#39;t seem to do anything.\r\n\r\nAfter the above block of code, I added\r\n\r\n    conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size() + 1)\r\n\r\nwhich doesn&#39;t work. There are 30 elements in `GENERIC_MESSAGE_LIST`.","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I'd like to scroll to the bottom of the RecyclerView list after loading the activity.</p>\n\n<pre><code>GENERIC_MESSAGE_LIST = (ArrayList) intent.getExtras().getParcelableArrayList(ConversationsAdapter.EXTRA_MESSAGE);\nconversationView = (RecyclerView) findViewById(R.id.list_messages);\nconversationView.setHasFixedSize(true);\nconversationViewLayoutManager = new LinearLayoutManager(this);\nconversationView.setLayoutManager(conversationViewLayoutManager);\nconversationViewAdapter = new ConversationAdapter(GENERIC_MESSAGE_LIST, this);\nconversationView.setAdapter(conversationViewAdapter);\n</code></pre>\n\n<p><code>conversationView.scrollTo(...)</code> throws an exception about being not supported in RecyclerView, and <code>conversationView.scrollToPosition(...)</code> doesn't seem to do anything.</p>\n\n<p>After the above block of code, I added</p>\n\n<pre><code>conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size() + 1)\n</code></pre>\n\n<p>which doesn't work. There are 30 elements in <code>GENERIC_MESSAGE_LIST</code>.</p>\n"},{"tags":["java","spring-boot","rest","lombok","spring-rest"],"comments":[{"owner":{"account_id":6790343,"reputation":1483,"user_id":5227721,"display_name":"Berk Kurkcuoglu"},"score":1,"creation_date":1591174766,"post_id":62168522,"comment_id":109952016,"body_markdown":"You don&#39;t need Getter and Data at the same time, Data already sets up your getters. Also Entity should be used with Table(name = &quot;table_name&quot;\n) annotation.","body":"You don&#39;t need Getter and Data at the same time, Data already sets up your getters. Also Entity should be used with Table(name = &quot;table_name&quot; ) annotation."},{"owner":{"account_id":124616,"reputation":3792,"user_id":1331935,"display_name":"Jeff"},"score":0,"creation_date":1591370706,"post_id":62168522,"comment_id":110039696,"body_markdown":"You shouldn&#39;t use @Data at all on JPA types since the &#39;toString&#39;, &#39;equals&#39;, and &#39;hashCode&#39; need to be handled properly.   Please see my answer for details https://stackoverflow.com/a/34299054/1331935.","body":"You shouldn&#39;t use @Data at all on JPA types since the &#39;toString&#39;, &#39;equals&#39;, and &#39;hashCode&#39; need to be handled properly.   Please see my answer for details <a href=\"https://stackoverflow.com/a/34299054/1331935\">stackoverflow.com/a/34299054/1331935</a>."}],"answers":[{"tags":[],"owner":{"account_id":4408002,"reputation":751,"user_id":3591785,"accept_rate":80,"display_name":"Tinku"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591174341,"creation_date":1591174341,"answer_id":62168754,"question_id":62168522,"body_markdown":"need to add Lombok plugin in maven or gradle file link https://stackoverflow.com/questions/42257379/how-to-configure-lombok-with-maven-compiler-plugin.\r\nIf you are  using IDE then need to install Lombok plugin link https://www.baeldung.com/lombok-ide","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>need to add Lombok plugin in maven or gradle file link <a href=\"https://stackoverflow.com/questions/42257379/how-to-configure-lombok-with-maven-compiler-plugin\">How to configure Lombok with maven-compiler-plugin?</a>.\nIf you are  using IDE then need to install Lombok plugin link <a href=\"https://www.baeldung.com/lombok-ide\" rel=\"nofollow noreferrer\">https://www.baeldung.com/lombok-ide</a></p>\n"},{"tags":[],"owner":{"account_id":10717399,"reputation":5816,"user_id":7887516,"display_name":"Ananthapadmanabhan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591371742,"creation_date":1591175276,"answer_id":62169062,"question_id":62168522,"body_markdown":"First of all , In spring it is not a good approach to return the entity object directly from  a controller to be converted to json. Use the DTO approach so that you will always have a DTO object returned from the controller endpoint. This way you will have more control over the type and structure of data you want to retun from the endpoint. \r\n\r\nRead [here][1] about the advantages of using a DTO .\r\n\r\nSecondly, verify that your tables follow the basic `spring jpa` naming conventions or is same as the entity class names if not please add the `@Table(name=&quot;&quot;)` annotation to specify the table name. Check that data is being populated to your entity classes.\r\n\r\n**Remove the `@Data` annotation.** \r\n\r\n`@Data` should not be used on JPA Entities as Entity `toString`, `equals`, and `hashCode` methods need to be authored in a very specific manner. See [here][2] for details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/36174516/rest-api-dtos-or-not#36175349\r\n  [2]: https://stackoverflow.com/a/34299054/1331935","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>First of all , In spring it is not a good approach to return the entity object directly from  a controller to be converted to json. Use the DTO approach so that you will always have a DTO object returned from the controller endpoint. This way you will have more control over the type and structure of data you want to retun from the endpoint. </p>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/36174516/rest-api-dtos-or-not#36175349\">here</a> about the advantages of using a DTO .</p>\n\n<p>Secondly, verify that your tables follow the basic <code>spring jpa</code> naming conventions or is same as the entity class names if not please add the <code>@Table(name=\"\")</code> annotation to specify the table name. Check that data is being populated to your entity classes.</p>\n\n<p><strong>Remove the <code>@Data</code> annotation.</strong> </p>\n\n<p><code>@Data</code> should not be used on JPA Entities as Entity <code>toString</code>, <code>equals</code>, and <code>hashCode</code> methods need to be authored in a very specific manner. See <a href=\"https://stackoverflow.com/a/34299054/1331935\">here</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":6929988,"reputation":193,"user_id":5319817,"display_name":"Tushar Girase"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1591180156,"creation_date":1591179838,"answer_id":62170545,"question_id":62168522,"body_markdown":"After searching a lot and looking on the answers to my question found a solution.\r\nIf I run my spring boot app using **java -jar** from cmd it works fine. But not with IDE so issue was with IDE configuration.\r\n\r\nI am using Eclipse IDE\r\n\r\n**Right Click on your project** -&gt; **Properties** \r\n\r\nThen from Properties window \r\n\r\n**Java Compiler** -&gt; **Annotation Processing** -&gt; **Enable Annotation Processing** \r\n\r\nThis option should be checked then annotations gets processed. I followed [https://www.baeldung.com/lombok-ide][1] from Tinku&#39;s answer on this question.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.baeldung.com/lombok-ide\r\n  [2]: https://i.stack.imgur.com/Q69EA.png","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>After searching a lot and looking on the answers to my question found a solution.\nIf I run my spring boot app using <strong>java -jar</strong> from cmd it works fine. But not with IDE so issue was with IDE configuration.</p>\n\n<p>I am using Eclipse IDE</p>\n\n<p><strong>Right Click on your project</strong> -> <strong>Properties</strong> </p>\n\n<p>Then from Properties window </p>\n\n<p><strong>Java Compiler</strong> -> <strong>Annotation Processing</strong> -> <strong>Enable Annotation Processing</strong> </p>\n\n<p>This option should be checked then annotations gets processed. I followed <a href=\"https://www.baeldung.com/lombok-ide\" rel=\"nofollow noreferrer\">https://www.baeldung.com/lombok-ide</a> from Tinku's answer on this question.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q69EA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q69EA.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":20888238,"reputation":21,"user_id":15344291,"display_name":"Florin Zfs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615581210,"creation_date":1615581210,"answer_id":66606846,"question_id":62168522,"body_markdown":"If you are using Eclipse check to have Lombok installed: \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9KDIf.png","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>If you are using Eclipse check to have Lombok installed:</p>\n<p><a href=\"https://i.stack.imgur.com/9KDIf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9KDIf.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":24575788,"reputation":1,"user_id":18481617,"display_name":"Acipenser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693577158,"creation_date":1693576987,"answer_id":77023760,"question_id":62168522,"body_markdown":"I&#39;m using IntelliJ IDEA, but neither enabling the Annotation Processing nor changing my code (e.g. remove @Data) helped me to solve this issue.\r\n\r\nI had added this line to my `build.gradle`\r\n```\r\ncompileOnly &#39;org.projectlombok:lombok:1.18.28&#39;\r\n```\r\nBut I was missing the following one to make it work:\r\n```\r\nannotationProcessor &#39;org.projectlombok:lombok:1.18.28&#39;\r\n```","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>I'm using IntelliJ IDEA, but neither enabling the Annotation Processing nor changing my code (e.g. remove @Data) helped me to solve this issue.</p>\n<p>I had added this line to my <code>build.gradle</code></p>\n<pre><code>compileOnly 'org.projectlombok:lombok:1.18.28'\n</code></pre>\n<p>But I was missing the following one to make it work:</p>\n<pre><code>annotationProcessor 'org.projectlombok:lombok:1.18.28'\n</code></pre>\n"}],"owner":{"account_id":6929988,"reputation":193,"user_id":5319817,"display_name":"Tushar Girase"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2977,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62170545,"answer_count":5,"score":2,"last_activity_date":1693577158,"creation_date":1591173503,"question_id":62168522,"body_markdown":"I have Spring Boot Application with Web, JPA, H2, Web, Lombok dependency.\r\nI have entities as follows\r\n\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@Getter\r\npublic class Book {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String name;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate Integer pageCount;\r\n\r\n\t@ManyToOne\r\n\t@JoinColumn(name = &quot;author_id&quot;)\r\n\tprivate Author author;\r\n\r\n}\r\n```\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@Getter\r\npublic class Author {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String firstName;\r\n\r\n\t@Column\r\n\tprivate String lastName;\r\n\r\n}\r\n```\r\nI am getting following JSON in repose for the /books REST endpoint\r\n\r\n```\r\n[\r\n    {},\r\n    {}\r\n]\r\n```\r\nIf I add getters and setters to entity it works fine. How can I get the actual values in response without adding getters setters as I am using @Data annotation","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>I have Spring Boot Application with Web, JPA, H2, Web, Lombok dependency.\nI have entities as follows</p>\n\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Entity\n@Getter\npublic class Book {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false)\n    private Integer pageCount;\n\n    @ManyToOne\n    @JoinColumn(name = \"author_id\")\n    private Author author;\n\n}\n</code></pre>\n\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Entity\n@Getter\npublic class Author {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String firstName;\n\n    @Column\n    private String lastName;\n\n}\n</code></pre>\n\n<p>I am getting following JSON in repose for the /books REST endpoint</p>\n\n<pre><code>[\n    {},\n    {}\n]\n</code></pre>\n\n<p>If I add getters and setters to entity it works fine. How can I get the actual values in response without adding getters setters as I am using @Data annotation</p>\n"},{"tags":["java","applet","mouseevent","awt"],"comments":[{"owner":{"account_id":281282,"reputation":3826,"user_id":577485,"accept_rate":71,"display_name":"Sibbo"},"score":1,"creation_date":1320012774,"post_id":7948224,"comment_id":9714567,"body_markdown":"So whats your problem? What is the output when you click anywhere?","body":"So whats your problem? What is the output when you click anywhere?"},{"owner":{"account_id":484897,"reputation":54322,"user_id":900873,"accept_rate":40,"display_name":"Kevin"},"score":1,"creation_date":1320012963,"post_id":7948224,"comment_id":9714606,"body_markdown":"Exactly what part are you having trouble with?  Does your `mouseClicked` method work?  If so, you have the point which the mouse was clicked and the bounds of the rectangle, what more do you need?","body":"Exactly what part are you having trouble with?  Does your <code>mouseClicked</code> method work?  If so, you have the point which the mouse was clicked and the bounds of the rectangle, what more do you need?"}],"answers":[{"tags":[],"owner":{"account_id":247861,"reputation":185,"user_id":522874,"accept_rate":80,"display_name":"Dalius Šidlauskas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320013016,"creation_date":1320013016,"answer_id":7948282,"question_id":7948224,"body_markdown":"    import java.applet.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    \r\n    public class AnAppletWithMouseEvents extends Applet implements MouseListener {\r\n    Color color = Color.green;\r\n    public void init()\r\n    {\r\n        addMouseListener(this);\r\n    }\r\n    public void paint(Graphics g)\r\n    {\r\n    \r\n        g.setColor(this.color);\r\n        g.drawRect(10, 30, 150, 150);\r\n    }\r\n    public void mouseClicked(MouseEvent e)\r\n    {\r\n        this.color = color.red;\r\n        this.repaint();\r\n    \r\n    }\r\n    public void mouseEntered(MouseEvent e) {}\r\n    public void mouseExited(MouseEvent e) {}\r\n    public void mousePressed(MouseEvent e) {}\r\n    public void mouseReleased(MouseEvent e) {}\r\n    }\r\n\r\nNow you need to count if the click was outside the bounds of rectangle.","title":"Changing the background color on mouse event","body":"<pre><code>import java.applet.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\npublic class AnAppletWithMouseEvents extends Applet implements MouseListener {\nColor color = Color.green;\npublic void init()\n{\n    addMouseListener(this);\n}\npublic void paint(Graphics g)\n{\n\n    g.setColor(this.color);\n    g.drawRect(10, 30, 150, 150);\n}\npublic void mouseClicked(MouseEvent e)\n{\n    this.color = color.red;\n    this.repaint();\n\n}\npublic void mouseEntered(MouseEvent e) {}\npublic void mouseExited(MouseEvent e) {}\npublic void mousePressed(MouseEvent e) {}\npublic void mouseReleased(MouseEvent e) {}\n}\n</code></pre>\n\n<p>Now you need to count if the click was outside the bounds of rectangle.</p>\n"},{"tags":[],"owner":{"account_id":115714,"reputation":8890,"user_id":303698,"accept_rate":75,"display_name":"laher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320013424,"creation_date":1320013424,"answer_id":7948331,"question_id":7948224,"body_markdown":"In the `mouseClicked` method, you should test that `e.getX()` and `e.getY()` are outside the rectangle, and then invoke `setBackground()` :\r\n\r\n`this.setBackground(Color.red);`\r\n\r\nThe rectangle border will stay green (is that what you want?)\r\n\r\nHTH\r\n\r\n","title":"Changing the background color on mouse event","body":"<p>In the <code>mouseClicked</code> method, you should test that <code>e.getX()</code> and <code>e.getY()</code> are outside the rectangle, and then invoke <code>setBackground()</code> :</p>\n\n<p><code>this.setBackground(Color.red);</code></p>\n\n<p>The rectangle border will stay green (is that what you want?)</p>\n\n<p>HTH</p>\n"}],"owner":{"account_id":1005319,"reputation":21,"user_id":1019248,"accept_rate":62,"display_name":"Mike Lolo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693577025,"creation_date":1320012480,"question_id":7948224,"body_markdown":"I want to change the background color when the mouse is clicked on the outside of the rectangle. I just dont know how to use the MouseEvent. \r\n\r\n\r\n    import java.applet.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n\r\n    public class AnAppletWithMouseEvents extends Applet implements MouseListener {\r\n    public void init()\r\n    {\r\n        addMouseListener(this);\r\n\t}\r\n\tpublic void paint(Graphics g)\r\n\t{\r\n\r\n\t\tg.setColor(Color.green);\r\n\t\tg.drawRect(10, 30, 150, 150);\r\n\t}\r\n    public void mouseClicked(MouseEvent e)\r\n    {\r\n        String clickDesc;\r\n        if (e.getClickCount() == 2)\r\n            clickDesc = &quot;double&quot;;\r\n        else\r\n            clickDesc = &quot;single&quot;;\r\n\r\n        System.out.println(&quot;Mouse was &quot; + clickDesc + &quot;-clicked at location (&quot; +\r\n            e.getX() + &quot;, &quot; + e.getY() + &quot;)&quot;);\r\n\r\n    }\r\n    public void mouseEntered(MouseEvent e) {}\r\n    public void mouseExited(MouseEvent e) {}\r\n    public void mousePressed(MouseEvent e) {}\r\n    public void mouseReleased(MouseEvent e) {}\r\n    }","title":"Changing the background color on mouse event","body":"<p>I want to change the background color when the mouse is clicked on the outside of the rectangle. I just dont know how to use the MouseEvent. </p>\n\n<pre><code>import java.applet.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\npublic class AnAppletWithMouseEvents extends Applet implements MouseListener {\npublic void init()\n{\n    addMouseListener(this);\n}\npublic void paint(Graphics g)\n{\n\n    g.setColor(Color.green);\n    g.drawRect(10, 30, 150, 150);\n}\npublic void mouseClicked(MouseEvent e)\n{\n    String clickDesc;\n    if (e.getClickCount() == 2)\n        clickDesc = \"double\";\n    else\n        clickDesc = \"single\";\n\n    System.out.println(\"Mouse was \" + clickDesc + \"-clicked at location (\" +\n        e.getX() + \", \" + e.getY() + \")\");\n\n}\npublic void mouseEntered(MouseEvent e) {}\npublic void mouseExited(MouseEvent e) {}\npublic void mousePressed(MouseEvent e) {}\npublic void mouseReleased(MouseEvent e) {}\n}\n</code></pre>\n"},{"tags":["java","ssl"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1693530863,"post_id":77020003,"comment_id":135776876,"body_markdown":"Can you elaborate on what &quot;runs on Redhat&quot; means?  Just the O/S or something else?","body":"Can you elaborate on what &quot;runs on Redhat&quot; means?  Just the O/S or something else?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693531805,"post_id":77020003,"comment_id":135776959,"body_markdown":"You need to understand the difference between a resource loaded via class loader, and a path on the filesystem.","body":"You need to understand the difference between a resource loaded via class loader, and a path on the filesystem."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693537759,"post_id":77020003,"comment_id":135777331,"body_markdown":"@tgdavies - Can you explain?  Are you saying that I&#39;d need to put the .p12 file into (for example) the resources folder in the Eclipse project?  And if so, do I need to set the value for the path to the .p12 file in that TEST_CLIENT_KEYSTORE_RESOURCE variable?  We actually want the files like the p12 with the client cert and the truststore/JKS file to be separate from the app.  Is it possible to do that with the code from that example, and if so how?","body":"@tgdavies - Can you explain?  Are you saying that I&#39;d need to put the .p12 file into (for example) the resources folder in the Eclipse project?  And if so, do I need to set the value for the path to the .p12 file in that TEST_CLIENT_KEYSTORE_RESOURCE variable?  We actually want the files like the p12 with the client cert and the truststore/JKS file to be separate from the app.  Is it possible to do that with the code from that example, and if so how?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693538105,"post_id":77020003,"comment_id":135777354,"body_markdown":"Can you update your question to explain where you&#39;re stuck? The method `loadKeyMaterial` takes a `URL`, `File.toURI().toURL()` should do what you want.","body":"Can you update your question to explain where you&#39;re stuck? The method <code>loadKeyMaterial</code> takes a <code>URL</code>, <code>File.toURI().toURL()</code> should do what you want."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693538123,"post_id":77020003,"comment_id":135777357,"body_markdown":"@stdunbar - I am working with Oracle&#39;s &quot;Unified Directory&quot; (OUD) product.  OUD supports plugins and what I am trying to use that example code for is to modify one of our existing OUD plugins to connect to another data source (a web service).  So when I aid &quot;runs on Redhat,&quot; I meant that the OUD (and the OUD plugins) are running on Redhat servers.  I mentioned that because, as I said I first tried the code by building it in Eclipse on a Windows machine, then I took the class/JAR file and ran it on one of our Redhat machines with no problem, and I am puzzled why I am encountering the problems.","body":"@stdunbar - I am working with Oracle&#39;s &quot;Unified Directory&quot; (OUD) product.  OUD supports plugins and what I am trying to use that example code for is to modify one of our existing OUD plugins to connect to another data source (a web service).  So when I aid &quot;runs on Redhat,&quot; I meant that the OUD (and the OUD plugins) are running on Redhat servers.  I mentioned that because, as I said I first tried the code by building it in Eclipse on a Windows machine, then I took the class/JAR file and ran it on one of our Redhat machines with no problem, and I am puzzled why I am encountering the problems."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693543333,"post_id":77020003,"comment_id":135777662,"body_markdown":"@tgdavies - I&#39;v updated the OP.  I guess I&#39;d like to figure out/find out how I can get the method that I made from the earlier thread working, because I am &quot;that close&quot; to having something, I think.","body":"@tgdavies - I&#39;v updated the OP.  I guess I&#39;d like to figure out/find out how I can get the method that I made from the earlier thread working, because I am &quot;that close&quot; to having something, I think."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693544335,"post_id":77020003,"comment_id":135777737,"body_markdown":"@tgdavies -I made a URL but I am not sure what you meant by &quot;should do what you want?  Are you saying replace &quot;FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next() &quot; with the URL?","body":"@tgdavies -I made a URL but I am not sure what you meant by &quot;should do what you want?  Are you saying replace &quot;FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOU&zwnj;&#8203;RCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next() &quot; with the URL?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693547027,"post_id":77020003,"comment_id":135778004,"body_markdown":"try `new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL()` in place of `FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE)`.","body":"try <code>new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL()</code> in place of <code>FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOUR&zwnj;&#8203;CE)</code>."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693548178,"post_id":77020003,"comment_id":135778137,"body_markdown":"@tgdavies - same error - e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!","body":"@tgdavies - same error - e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693548736,"post_id":77020003,"comment_id":135778206,"body_markdown":"Same error? Looks different to me.","body":"Same error? Looks different to me."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1693550883,"post_id":77020003,"comment_id":135778545,"body_markdown":"Your new error is indeed a different error (@user555303) and establishes that now the keystore file _is_ found, because the attempt to create a TrustManager occurs in `.build()` which is called only if `.loadKeyMaterial(...)` succeeded. However, `build()` attempts to use the default TrustManager and fails; though the specific exception is discarded, the most like causes are that your _truststore_ file either doesn&#39;t exist (which your code checks and should have logged) or can&#39;t be accessed with the default password &quot;changeit&quot; or isn&#39;t PKCS12 or JKS (check for those).","body":"Your new error is indeed a different error (@user555303) and establishes that now the keystore file <i>is</i> found, because the attempt to create a TrustManager occurs in <code>.build()</code> which is called only if <code>.loadKeyMaterial(...)</code> succeeded. However, <code>build()</code> attempts to use the default TrustManager and fails; though the specific exception is discarded, the most like causes are that your <i>truststore</i> file either doesn&#39;t exist (which your code checks and should have logged) or can&#39;t be accessed with the default password &quot;changeit&quot; or isn&#39;t PKCS12 or JKS (check for those)."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693564465,"post_id":77020003,"comment_id":135781083,"body_markdown":"@tgdavies - i should&#39;ve posted the last attempt by updating the OP instead of in comments (it was really late at night here), but I&#39;ve done that now (EDIT3, above).  The error message I got with the last change looks like the same as from EDIT2?  Sorry.  I am unclear why you said the EDIT3 error looks different thant the EDIT2 error message?","body":"@tgdavies - i should&#39;ve posted the last attempt by updating the OP instead of in comments (it was really late at night here), but I&#39;ve done that now (EDIT3, above).  The error message I got with the last change looks like the same as from EDIT2?  Sorry.  I am unclear why you said the EDIT3 error looks different thant the EDIT2 error message?"},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693566523,"post_id":77020003,"comment_id":135781403,"body_markdown":"@dave_thompson_085 - The truststore  is set inside the method using &quot;System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);&quot;  - is that not a valid way to set the truststore  (a JKS file)?  This code goes inside one of the OUD plugins, so there isn&#39;t really a &quot;command line&quot; to use a &quot;-D&quot; to set the system property.  I don&#39;t understand why doing that is not working :( ...","body":"@dave_thompson_085 - The truststore  is set inside the method using &quot;System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);&quot;  - is that not a valid way to set the truststore  (a JKS file)?  This code goes inside one of the OUD plugins, so there isn&#39;t really a &quot;command line&quot; to use a &quot;-D&quot; to set the system property.  I don&#39;t understand why doing that is not working :( ..."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693569274,"post_id":77020003,"comment_id":135781879,"body_markdown":"@dave_thompson_085 - I&#39;ve made some progress and updated the OP with the info - I think/hope I got past the trustmanager error but now getting a different error.  Thanks!","body":"@dave_thompson_085 - I&#39;ve made some progress and updated the OP with the info - I think/hope I got past the trustmanager error but now getting a different error.  Thanks!"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1693596648,"post_id":77020003,"comment_id":135786951,"body_markdown":"Yes you need to also set the truststore password if it differs from the default &quot;changeit&quot; -- that&#39;s why I told you to check it. Your newer error NoSuchElementException is a pretty generic and vague one. Try calling `e.printStackTrace()` to get (more) specific details -- this writes to `System.out` by default; if the OUD environment makes that inaccessible, direct it to a file or an in-memory stream that you then log or display or store or something.","body":"Yes you need to also set the truststore password if it differs from the default &quot;changeit&quot; -- that&#39;s why I told you to check it. Your newer error NoSuchElementException is a pretty generic and vague one. Try calling <code>e.printStackTrace()</code> to get (more) specific details -- this writes to <code>System.out</code> by default; if the OUD environment makes that inaccessible, direct it to a file or an in-memory stream that you then log or display or store or something."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693748011,"post_id":77020003,"comment_id":135798577,"body_markdown":"Hi All - Sorry I haven&#39;t posted in a few days... FYI, I found another way to do, described here:  https://www.w3docs.com/snippets/java/java-https-client-certificate-authentication.html and got that working.  Thanks for all the help!!","body":"Hi All - Sorry I haven&#39;t posted in a few days... FYI, I found another way to do, described here:  <a href=\"https://www.w3docs.com/snippets/java/java-https-client-certificate-authentication.html\" rel=\"nofollow noreferrer\">w3docs.com/snippets/java/&hellip;</a> and got that working.  Thanks for all the help!!"}],"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693576913,"creation_date":1693530443,"question_id":77020003,"body_markdown":"I am trying to get the example code in this older thread to work:\r\n\r\nhttps://stackoverflow.com/questions/18541813/how-do-i-pass-the-client-certificate-with-http-client/46821977#46821977\r\n\r\nI originally built the example in Eclipse on my Windows laptop, then copied the compiled class/JAR to a Redhat machine and ran it on the Redhat machine, and it worked. It was able to connect and send a request to a app that was configured for 2-way SSL.\r\n\r\nIn that Eclipse project I had a main() method and also most of the example in a separate method, because what my end-goal is to use that method on in an application (the application runs on Redhat) that we are working on.  Here is the method I ended up with (sorry there is lots of debug logging):\r\n\r\n    \t    protected String getRbsResponse(String strId, String pathToTruststore, String pathToClientCertPfx) {\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: V1.00&quot;);\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: strId=[&quot; + strId + &quot;]&quot;);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: pathToTruststore=[&quot; + pathToTruststore + &quot;]&quot;);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: pathToClientCertPfx=[&quot; + pathToClientCertPfx + &quot;]&quot;);\r\n\r\n\t    \tString TEST_URL = &quot;https://xxxx/ID=&quot; + strId;\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: TEST_URL=[&quot; + TEST_URL + &quot;]&quot;);\r\n\r\n\t    \t//String TEST_CLIENT_KEYSTORE_RESOURCE = pathToClientCertPfx;\r\n\t    \tString TEST_CLIENT_KEYSTORE_RESOURCE = &quot;/apps/common/certs/mutual-tls-keystore.p12&quot;;\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: TEST_CLIENT_KEYSTORE_RESOURCE=[&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;]&quot;);\r\n\r\n\t    \tString response = &quot;&quot;;\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: ABOUT TO CHECK IF IMPORTANT FILES EXIST !!!&quot;);\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: Check IF CLIENT CERT PFX [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\r\n\t    \tif (new File(TEST_CLIENT_KEYSTORE_RESOURCE).isFile()) {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: SUCCESS - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\r\n\t    \t} else {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: FAILED - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] DOES NOT EXIST !!!&quot;);\r\n\t    \t}\r\n\t    \t\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: Check IF TRUSTSTORE JKS [&quot; + pathToTruststore + &quot;] EXIST !!!&quot;);\r\n\t    \tif (new File(pathToTruststore).isFile()) {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: SUCCESS - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] EXISTS !!!&quot;);\r\n\t    \t} else {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: FAILED - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] DOES NOT EXIST !!!&quot;);\r\n\t    \t}\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: About to set SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\r\n\t    \tSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: FINISHED setting SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\r\n\t        \r\n\t        //Console console = System.console();\r\n\t        //char[] storePassword = console.readPassword(&quot;Key+Keystore password: &quot;);\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: About to set password for Client cert PFX and for TRUST STORE JKS into set SYSTEM PROPERTY javax.net.ssl.truststore to into two char arrays !!!&quot;);\r\n\r\n\t    \tString mypassword = &quot;password&quot;;\r\n\t        logger.error(&quot;---+++++ In getRbsResponse: BOTH passwords are set to=[&quot; + mypassword + &quot;]&quot;);\r\n\t        char[] storePassword = mypassword.toCharArray();\r\n\t        char[] keyPassword = storePassword;\r\n\r\n\t        SSLContext sslContext = null;\r\n\t        try {\r\n\t            sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\r\n\r\n\r\n\r\n\t        try (CloseableHttpClient httpclient = HttpClients.custom().setSSLContext(sslContext).build();\r\n\t        \t\t\r\n\t             CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\r\n\t            //console.writer().println(closeableHttpResponse.getStatusLine());\r\n\t            logger.error(&quot;---+++++ In getRbsResponse: closeableHttpResponse.getStatusLine()=[&quot; + closeableHttpResponse.getStatusLine() + &quot;]&quot;);\r\n\t            HttpEntity entity = closeableHttpResponse.getEntity();\r\n\t            try (InputStream content = entity.getContent();\r\n\t                 ReadableByteChannel src = Channels.newChannel(content);\r\n\t                 WritableByteChannel dest = Channels.newChannel(System.out)) {\r\n\t                ByteBuffer buffer = ByteBuffer.allocateDirect(16 * 1024);\r\n\t                while (src.read(buffer) != -1) {\r\n\t                    buffer.flip();\r\n\t                    dest.write(buffer);\r\n\t                    buffer.compact();\r\n\t                }\r\n\t                buffer.flip();\r\n\t                while (buffer.hasRemaining())\r\n\t                    dest.write(buffer);\r\n\t            }\r\n\t        }\r\n\t    \r\n\r\n\t      } catch (Exception e) {\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** e.getMessage()=&quot; + e.getMessage() + &quot;]!!&quot;);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** - [&quot;, e);\r\n\t    }\r\n\t        \r\n\t        // try moving catch above here....        \r\n\t        \r\n\t        logger.error(&quot;---+++++ Returning from getRbsResponse with response=[&quot; + response + &quot;]&quot;);\r\n\t        return response;\r\n\t    } // end getRbsResponse()\t\r\n\t\r\nHowever when our app (which again, is running on Redhat) calls the the above method an exception is being thrown on the following line:\r\n\r\n    sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\r\n\r\nThe message in the exception is:\r\n\r\n     e.getMmessage()=Keystore URL may not be null]!!\r\n\r\nAs you can see from the code above, I am also doing some checks that the truststore file and the file with the client cert exist, and those checks are succeeding.  The message from the exception seems to be saying that the &quot;URL&quot; is null?  \r\n\r\nI cannot figure out why I am getting that error :( , so I was hoping someone here might have some insight about that?\r\n\r\nThanks again, and sorry for the longish post !!\r\n\r\nJim\r\n\r\nEDIT1: Where I am getting stuck:  The &quot;TEST_CLIENT_KEYSTORE_RESOURCE&quot; contains a String, like &quot;/apps/certs/multi.p12&quot;, which is the path on the filesystem where the client cert is located.  When our app (an OUD plugin) calls the above method, I get an exception on that line and the e.Message says &quot;Keystore URL may not be null&quot;.  I understand from comments that (putting the path to the p12 file) is not what we should be doing, but I am trying to find out what I *SHOULD* be doing instead.\r\n\r\nEDIT2: Based on comments I tried changing this part of the code:\r\n```java\r\nFile file = new File(&quot;/apps/common/certs/mutual-tls-keystore.p12&quot;);\r\ntry {\r\n    url = file.toURI().toURL();\r\n} catch (Exception e) {\r\n    // TBD\r\n}\r\nSSLContext sslContext = null;\r\ntry {\r\n    //sslContext = SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()).build();\r\n    sslContext = SSLContexts.custom().loadKeyMaterial(file, storePassword, keyPassword).build();\r\n```\r\nThen, when I test I am getting a different error:\r\n\r\n    e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!\r\n\r\nEDIT 3: Based on additional comments I changed the sslContext to:\r\n\r\n    sslContext = SSLContexts.custom().loadKeyMaterial(new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL(), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\r\n\r\nand when I tested I got the error:\r\n\r\n    e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]\r\n\r\n\r\nEDIT4:  I think (HOPE) that I MAY be making some progress.  Based on comments from @tgdavies and @dave_thompson_085, I was doing searching about the Trustmanager error, and also using the system property, and I found this SO thread - https://stackoverflow.com/questions/38353944/keep-getting-no-x509trustmanager-implementation-available-error-when-trying-to-c.  \r\n\r\nIn there, it mentions about ALSO SETTING the System property for the truststore *PASSWORD*, WHICH I WAS NOT DOING!!  So, I added that and ran another tests, and I *THINK* it got past the Trustmanager error, but now is getting a different error:\r\n\r\n    e.getMessage()=java.util.NoSuchElementException\r\n\r\nThat error APPEARS to be on the line:\r\n\r\n    CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\r\n\r\nI&#39;m going to add some more debug but if anyone has any idea what might be causing that error, please let me know?\r\n\r\n\r\nEDIT5:  I&#39;ve added following, just to see if it was having problems with the URL in TEST_URL:\r\n\r\n    HttpGet doGetFromRbs = new HttpGet(URI.create(TEST_URL));\r\n\r\nbut that seems to work fine, and I even did &quot;doGetFromRbs.getURI().toString()&quot; after that, and it returned the same URL string as in TEST_URL.\r\n\r\nAlso, I can see the logging on the server that this request SHOULD be going to, and I confirmed that when I run a test, there is no request hitting the server side yet :(, so it seems like code is blowing up before it even sends a request to the server?","title":"Another question/problem with Mutual SSL Example Code","body":"<p>I am trying to get the example code in this older thread to work:</p>\n<p><a href=\"https://stackoverflow.com/questions/18541813/how-do-i-pass-the-client-certificate-with-http-client/46821977#46821977\">How do I pass the client certificate with HTTP client?</a></p>\n<p>I originally built the example in Eclipse on my Windows laptop, then copied the compiled class/JAR to a Redhat machine and ran it on the Redhat machine, and it worked. It was able to connect and send a request to a app that was configured for 2-way SSL.</p>\n<p>In that Eclipse project I had a main() method and also most of the example in a separate method, because what my end-goal is to use that method on in an application (the application runs on Redhat) that we are working on.  Here is the method I ended up with (sorry there is lots of debug logging):</p>\n<pre><code>        protected String getRbsResponse(String strId, String pathToTruststore, String pathToClientCertPfx) {\n        logger.error(&quot;---+++++ In getRbsResponse: V1.00&quot;);\n\n        logger.error(&quot;---+++++ In getRbsResponse: strId=[&quot; + strId + &quot;]&quot;);\n        logger.error(&quot;---+++++ In getRbsResponse: pathToTruststore=[&quot; + pathToTruststore + &quot;]&quot;);\n        logger.error(&quot;---+++++ In getRbsResponse: pathToClientCertPfx=[&quot; + pathToClientCertPfx + &quot;]&quot;);\n\n        String TEST_URL = &quot;https://xxxx/ID=&quot; + strId;\n        logger.error(&quot;---+++++ In getRbsResponse: TEST_URL=[&quot; + TEST_URL + &quot;]&quot;);\n\n        //String TEST_CLIENT_KEYSTORE_RESOURCE = pathToClientCertPfx;\n        String TEST_CLIENT_KEYSTORE_RESOURCE = &quot;/apps/common/certs/mutual-tls-keystore.p12&quot;;\n        logger.error(&quot;---+++++ In getRbsResponse: TEST_CLIENT_KEYSTORE_RESOURCE=[&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;]&quot;);\n\n        String response = &quot;&quot;;\n\n        logger.error(&quot;---+++++ In getRbsResponse: ABOUT TO CHECK IF IMPORTANT FILES EXIST !!!&quot;);\n\n        logger.error(&quot;---+++++ In getRbsResponse: Check IF CLIENT CERT PFX [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\n        if (new File(TEST_CLIENT_KEYSTORE_RESOURCE).isFile()) {\n            logger.error(&quot;---+++++ In getRbsResponse: SUCCESS - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\n        } else {\n            logger.error(&quot;---+++++ In getRbsResponse: FAILED - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] DOES NOT EXIST !!!&quot;);\n        }\n        \n\n        logger.error(&quot;---+++++ In getRbsResponse: Check IF TRUSTSTORE JKS [&quot; + pathToTruststore + &quot;] EXIST !!!&quot;);\n        if (new File(pathToTruststore).isFile()) {\n            logger.error(&quot;---+++++ In getRbsResponse: SUCCESS - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] EXISTS !!!&quot;);\n        } else {\n            logger.error(&quot;---+++++ In getRbsResponse: FAILED - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] DOES NOT EXIST !!!&quot;);\n        }\n\n        logger.error(&quot;---+++++ In getRbsResponse: About to set SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\n        System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);\n        logger.error(&quot;---+++++ In getRbsResponse: FINISHED setting SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\n        \n        //Console console = System.console();\n        //char[] storePassword = console.readPassword(&quot;Key+Keystore password: &quot;);\n\n        logger.error(&quot;---+++++ In getRbsResponse: About to set password for Client cert PFX and for TRUST STORE JKS into set SYSTEM PROPERTY javax.net.ssl.truststore to into two char arrays !!!&quot;);\n\n        String mypassword = &quot;password&quot;;\n        logger.error(&quot;---+++++ In getRbsResponse: BOTH passwords are set to=[&quot; + mypassword + &quot;]&quot;);\n        char[] storePassword = mypassword.toCharArray();\n        char[] keyPassword = storePassword;\n\n        SSLContext sslContext = null;\n        try {\n            sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\n\n\n\n        try (CloseableHttpClient httpclient = HttpClients.custom().setSSLContext(sslContext).build();\n                \n             CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\n            //console.writer().println(closeableHttpResponse.getStatusLine());\n            logger.error(&quot;---+++++ In getRbsResponse: closeableHttpResponse.getStatusLine()=[&quot; + closeableHttpResponse.getStatusLine() + &quot;]&quot;);\n            HttpEntity entity = closeableHttpResponse.getEntity();\n            try (InputStream content = entity.getContent();\n                 ReadableByteChannel src = Channels.newChannel(content);\n                 WritableByteChannel dest = Channels.newChannel(System.out)) {\n                ByteBuffer buffer = ByteBuffer.allocateDirect(16 * 1024);\n                while (src.read(buffer) != -1) {\n                    buffer.flip();\n                    dest.write(buffer);\n                    buffer.compact();\n                }\n                buffer.flip();\n                while (buffer.hasRemaining())\n                    dest.write(buffer);\n            }\n        }\n    \n\n      } catch (Exception e) {\n        logger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** e.getMessage()=&quot; + e.getMessage() + &quot;]!!&quot;);\n        logger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** - [&quot;, e);\n    }\n        \n        // try moving catch above here....        \n        \n        logger.error(&quot;---+++++ Returning from getRbsResponse with response=[&quot; + response + &quot;]&quot;);\n        return response;\n    } // end getRbsResponse()   \n</code></pre>\n<p>However when our app (which again, is running on Redhat) calls the the above method an exception is being thrown on the following line:</p>\n<pre><code>sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\n</code></pre>\n<p>The message in the exception is:</p>\n<pre><code> e.getMmessage()=Keystore URL may not be null]!!\n</code></pre>\n<p>As you can see from the code above, I am also doing some checks that the truststore file and the file with the client cert exist, and those checks are succeeding.  The message from the exception seems to be saying that the &quot;URL&quot; is null?</p>\n<p>I cannot figure out why I am getting that error :( , so I was hoping someone here might have some insight about that?</p>\n<p>Thanks again, and sorry for the longish post !!</p>\n<p>Jim</p>\n<p>EDIT1: Where I am getting stuck:  The &quot;TEST_CLIENT_KEYSTORE_RESOURCE&quot; contains a String, like &quot;/apps/certs/multi.p12&quot;, which is the path on the filesystem where the client cert is located.  When our app (an OUD plugin) calls the above method, I get an exception on that line and the e.Message says &quot;Keystore URL may not be null&quot;.  I understand from comments that (putting the path to the p12 file) is not what we should be doing, but I am trying to find out what I <em>SHOULD</em> be doing instead.</p>\n<p>EDIT2: Based on comments I tried changing this part of the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(&quot;/apps/common/certs/mutual-tls-keystore.p12&quot;);\ntry {\n    url = file.toURI().toURL();\n} catch (Exception e) {\n    // TBD\n}\nSSLContext sslContext = null;\ntry {\n    //sslContext = SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()).build();\n    sslContext = SSLContexts.custom().loadKeyMaterial(file, storePassword, keyPassword).build();\n</code></pre>\n<p>Then, when I test I am getting a different error:</p>\n<pre><code>e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!\n</code></pre>\n<p>EDIT 3: Based on additional comments I changed the sslContext to:</p>\n<pre><code>sslContext = SSLContexts.custom().loadKeyMaterial(new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL(), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\n</code></pre>\n<p>and when I tested I got the error:</p>\n<pre><code>e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]\n</code></pre>\n<p>EDIT4:  I think (HOPE) that I MAY be making some progress.  Based on comments from @tgdavies and @dave_thompson_085, I was doing searching about the Trustmanager error, and also using the system property, and I found this SO thread - <a href=\"https://stackoverflow.com/questions/38353944/keep-getting-no-x509trustmanager-implementation-available-error-when-trying-to-c\">Keep getting No X509TrustManager implementation available error when trying to connect to web socket server</a>.</p>\n<p>In there, it mentions about ALSO SETTING the System property for the truststore <em>PASSWORD</em>, WHICH I WAS NOT DOING!!  So, I added that and ran another tests, and I <em>THINK</em> it got past the Trustmanager error, but now is getting a different error:</p>\n<pre><code>e.getMessage()=java.util.NoSuchElementException\n</code></pre>\n<p>That error APPEARS to be on the line:</p>\n<pre><code>CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\n</code></pre>\n<p>I'm going to add some more debug but if anyone has any idea what might be causing that error, please let me know?</p>\n<p>EDIT5:  I've added following, just to see if it was having problems with the URL in TEST_URL:</p>\n<pre><code>HttpGet doGetFromRbs = new HttpGet(URI.create(TEST_URL));\n</code></pre>\n<p>but that seems to work fine, and I even did &quot;doGetFromRbs.getURI().toString()&quot; after that, and it returned the same URL string as in TEST_URL.</p>\n<p>Also, I can see the logging on the server that this request SHOULD be going to, and I confirmed that when I run a test, there is no request hitting the server side yet :(, so it seems like code is blowing up before it even sends a request to the server?</p>\n"},{"tags":["java","wiremock"],"answers":[{"tags":[],"owner":{"account_id":991044,"reputation":3556,"user_id":1008361,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693576564,"creation_date":1693576564,"answer_id":77023718,"question_id":77013714,"body_markdown":"The `absent` matcher is what you need here:\r\n\r\n```json\r\n&quot;bodyPatterns&quot;: [\r\n  {\r\n    &quot;matchesJsonPath&quot;: {\r\n      &quot;expression&quot;: &quot;cursor&quot;,\r\n      &quot;absent&quot;: true\r\n    }\r\n  }\r\n]\r\n```","title":"In Wiremock how to write a mappingBuilder which matches a requestBody containing a json, having matchingJsonPath value equal to null?","body":"<p>The <code>absent</code> matcher is what you need here:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;bodyPatterns&quot;: [\n  {\n    &quot;matchesJsonPath&quot;: {\n      &quot;expression&quot;: &quot;cursor&quot;,\n      &quot;absent&quot;: true\n    }\n  }\n]\n</code></pre>\n"}],"owner":{"account_id":3836409,"reputation":754,"user_id":3180578,"accept_rate":48,"display_name":"Nikunj Aggarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693576564,"creation_date":1693467348,"question_id":77013714,"body_markdown":"I want to write a java code which can produce following wiremock mapping-\r\n&quot;request&quot;: \r\n\r\n    {\r\n                    &quot;urlPattern&quot;: &quot;/kziwynya/ep1&quot;,\r\n                    &quot;method&quot;: &quot;POST&quot;,\r\n                    &quot;bodyPatterns&quot;: [\r\n                        {\r\n                            &quot;matchesJsonPath&quot;: {\r\n                                &quot;expression&quot;: &quot;cursor&quot;,\r\n                                &quot;equalTo&quot;: null\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n\r\nIf we write matchingJsonPath(&quot;cursor, equalTo(null)), it gives nullPointerException inside equalTo method.","title":"In Wiremock how to write a mappingBuilder which matches a requestBody containing a json, having matchingJsonPath value equal to null?","body":"<p>I want to write a java code which can produce following wiremock mapping-\n&quot;request&quot;:</p>\n<pre><code>{\n                &quot;urlPattern&quot;: &quot;/kziwynya/ep1&quot;,\n                &quot;method&quot;: &quot;POST&quot;,\n                &quot;bodyPatterns&quot;: [\n                    {\n                        &quot;matchesJsonPath&quot;: {\n                            &quot;expression&quot;: &quot;cursor&quot;,\n                            &quot;equalTo&quot;: null\n                        }\n                    }\n                ]\n            }\n</code></pre>\n<p>If we write matchingJsonPath(&quot;cursor, equalTo(null)), it gives nullPointerException inside equalTo method.</p>\n"},{"tags":["java","bouncycastle","public-key-encryption","pgp"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1614215355,"post_id":66360953,"comment_id":117320818,"body_markdown":"Please add the complete stack trace of the exception to your question.","body":"Please add the complete stack trace of the exception to your question."},{"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"score":0,"creation_date":1614216468,"post_id":66360953,"comment_id":117321049,"body_markdown":"@tgdavies Done. Thanks.","body":"@tgdavies Done. Thanks."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1614217037,"post_id":66360953,"comment_id":117321160,"body_markdown":"When you throw a new exception as you do in  `throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));` you *must* include the original exception as the `cause` of the new exception you are throwing. Otherwise you are losing necessary context. Please fix that and add the complete stacktfrace.","body":"When you throw a new exception as you do in  <code>throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));</code> you <i>must</i> include the original exception as the <code>cause</code> of the new exception you are throwing. Otherwise you are losing necessary context. Please fix that and add the complete stacktfrace."},{"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"score":0,"creation_date":1614218477,"post_id":66360953,"comment_id":117321477,"body_markdown":"@tgdavies Sorry about that. Done as suggested. I am now getting a more informative error thanks to your suggestion.","body":"@tgdavies Sorry about that. Done as suggested. I am now getting a more informative error thanks to your suggestion."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614221701,"creation_date":1614221701,"answer_id":66361734,"question_id":66360953,"body_markdown":"Your modified code works for me: (I have taken out the exception handling, but that should make no difference)\r\n```\r\npackage pgp;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\n\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\n\r\nimport java.security.SecureRandom;\r\n\r\nimport java.util.Date;\r\nimport java.util.Iterator;\r\n\r\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\r\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\r\nimport org.bouncycastle.openpgp.PGPException;\r\nimport org.bouncycastle.openpgp.PGPLiteralData;\r\nimport org.bouncycastle.openpgp.PGPLiteralDataGenerator;\r\nimport org.bouncycastle.openpgp.PGPPrivateKey;\r\nimport org.bouncycastle.openpgp.PGPPublicKey;\r\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\r\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\r\nimport org.bouncycastle.openpgp.PGPSecretKey;\r\nimport org.bouncycastle.openpgp.PGPUtil;\r\nimport org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\r\nimport org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\n\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\r\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\nimport org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\r\n\r\npublic class PgpImpl {\r\n\r\n    public PgpImpl() {\r\n    }\r\n\r\n    private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws PGPException, IOException {\r\n        BouncyCastleProvider provider = new BouncyCastleProvider();\r\n        String step = &quot;Step-0&quot;;\r\n        step = &quot;Step-1&quot;;\r\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n                        .setWithIntegrityPacket(true)\r\n                        .setSecureRandom(new SecureRandom())\r\n                        .setProvider(provider));\r\n\r\n        step = &quot;Step-2&quot;;\r\n        encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n                .setSecureRandom(new SecureRandom()).setProvider(provider));\r\n\r\n        step = &quot;Step-3&quot;;\r\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n\r\n        step = &quot;Step-4&quot;;\r\n        // create an indefinite length encrypted stream\r\n        OutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\r\n        step = &quot;Step-5&quot;;\r\n        // write out the literal data\r\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n        OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\r\n                new Date());\r\n        pOut.write(data);\r\n        pOut.close();\r\n        // finish the encryption\r\n        cOut.close();\r\n        step = &quot;Step-6&quot;;\r\n\r\n        return new String(encOut.toByteArray());\r\n    }\r\n\r\n    private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\r\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\r\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\r\n\r\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\r\n        decodedKey.close();\r\n\r\n        PGPPublicKey key = null;\r\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\r\n        while (key == null &amp;&amp; rIt.hasNext()) {\r\n            PGPPublicKeyRing kRing = rIt.next();\r\n            Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\r\n\r\n            while (key == null &amp;&amp; kIt.hasNext()) {\r\n                PGPPublicKey k = kIt.next();\r\n\r\n                if (k.isEncryptionKey()) {\r\n                    key = k;\r\n                }\r\n            }\r\n        }\r\n        if (key == null) {\r\n            throw new Exception(&quot;Can&#39;t find key&quot;);\r\n        }\r\n        return key;\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\r\n                           + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\r\n                           + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\r\n                           + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\r\n                           + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\r\n                           + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\r\n                           + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\r\n                           + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\r\n                           + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\r\n                           + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\r\n                           + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\r\n                           + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\r\n                           + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\r\n                           + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\r\n                           + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\r\n                           + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\r\n                           + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\r\n                           + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\r\n                           + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\r\n                           + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\r\n                           + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\r\n                           + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\r\n                           + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\r\n                           + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\r\n                           + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; +\r\n                           &quot;=Yc74\\r\\n&quot;\r\n                           + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\r\n\r\n        PGPPublicKey key = getPublicKey(publicKey);\r\n        System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\r\n    }\r\n}\r\n```\r\nMy pom.xml has:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.68&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.68&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nCan you run that code and see what happens locally?","title":"PGP Encrypt using BouncyCastle in Java","body":"<p>Your modified code works for me: (I have taken out the exception handling, but that should make no difference)</p>\n<pre><code>package pgp;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport java.security.SecureRandom;\n\nimport java.util.Date;\nimport java.util.Iterator;\n\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPLiteralDataGenerator;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPSecretKey;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\nimport org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\n\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\n\npublic class PgpImpl {\n\n    public PgpImpl() {\n    }\n\n    private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws PGPException, IOException {\n        BouncyCastleProvider provider = new BouncyCastleProvider();\n        String step = &quot;Step-0&quot;;\n        step = &quot;Step-1&quot;;\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                        .setWithIntegrityPacket(true)\n                        .setSecureRandom(new SecureRandom())\n                        .setProvider(provider));\n\n        step = &quot;Step-2&quot;;\n        encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n                .setSecureRandom(new SecureRandom()).setProvider(provider));\n\n        step = &quot;Step-3&quot;;\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n\n        step = &quot;Step-4&quot;;\n        // create an indefinite length encrypted stream\n        OutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\n        step = &quot;Step-5&quot;;\n        // write out the literal data\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n        OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\n                new Date());\n        pOut.write(data);\n        pOut.close();\n        // finish the encryption\n        cOut.close();\n        step = &quot;Step-6&quot;;\n\n        return new String(encOut.toByteArray());\n    }\n\n    private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\n\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\n        decodedKey.close();\n\n        PGPPublicKey key = null;\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\n        while (key == null &amp;&amp; rIt.hasNext()) {\n            PGPPublicKeyRing kRing = rIt.next();\n            Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\n\n            while (key == null &amp;&amp; kIt.hasNext()) {\n                PGPPublicKey k = kIt.next();\n\n                if (k.isEncryptionKey()) {\n                    key = k;\n                }\n            }\n        }\n        if (key == null) {\n            throw new Exception(&quot;Can't find key&quot;);\n        }\n        return key;\n    }\n\n    public static void main(String[] args) throws Exception {\n        String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\n                           + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\n                           + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\n                           + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\n                           + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\n                           + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\n                           + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\n                           + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\n                           + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\n                           + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\n                           + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\n                           + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\n                           + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\n                           + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\n                           + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\n                           + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\n                           + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\n                           + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\n                           + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\n                           + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\n                           + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\n                           + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\n                           + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\n                           + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\n                           + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; +\n                           &quot;=Yc74\\r\\n&quot;\n                           + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\n\n        PGPPublicKey key = getPublicKey(publicKey);\n        System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\n    }\n}\n</code></pre>\n<p>My pom.xml has:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.68&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.68&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Can you run that code and see what happens locally?</p>\n"},{"tags":[],"owner":{"account_id":26377396,"reputation":1,"user_id":20031133,"display_name":"Vrashabh Paliwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693576221,"creation_date":1693576221,"answer_id":77023671,"question_id":66360953,"body_markdown":"Caused by: java.security.NoSuchProviderException: no such provider: BC\r\n\r\nFor the above error which you were getting first, add below line of code at the starting\r\n\r\nSecurity.addProvider(new BouncyCastleProvider());","title":"PGP Encrypt using BouncyCastle in Java","body":"<p>Caused by: java.security.NoSuchProviderException: no such provider: BC</p>\n<p>For the above error which you were getting first, add below line of code at the starting</p>\n<p>Security.addProvider(new BouncyCastleProvider());</p>\n"}],"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5642,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693576221,"creation_date":1614214405,"question_id":66360953,"body_markdown":"I was given a task to build a java method to encrypt data (String or InputStream) using PGP. I have generated a test public key, private key with passphrase following the guide [here][1]. I then exported the public key using the command below and copy and pasted it to my java code.\r\n\r\n    gpg --armor --output pubkey.txt --export &#39;Your Name&#39;\r\n\r\nI am able to encrypt a file using the command below\r\n\r\n    gpg --encrypt --armor -r &#39;Your Name&#39; plaintext.txt\r\n\r\nAnd I get the below content which is what I&#39;m trying to achieve in my java program. I might need to sign it later as part of the requirement but all I want to do for now is to be able to successfully encrypt it like this.\r\n\r\n\t-----BEGIN PGP MESSAGE-----\r\n\tVersion: GnuPG v2.0.22 (GNU/Linux)\r\n\r\n\thQEMA0PxXau0Q30VAQf/RuWsN3f4L2HW2GJWOZUjetJsw0odXYbDc7Sug1gZULP8\r\n\tI0KRrvxnHgiiJgSlBZsws8E8iB1/LDCYJ8oJGj6olicz83iUT8VLdzdJZlc0+96/\r\n\tBHAvtSTtEv2PWZlh307nU+Zn9cuGAccaijyekCosS5/0JpDyXSFefsLTexMgphAL\r\n\tveXsxtsISyUU6S0xUux6Ac9HgUWTpCrlNaSdqBN1bk7y8YuvbZgbQ5akwY5FEbq1\r\n\tf9rxmgXgEgz3N+7f8n5yN2OvWiEyXb+qngVgDLzysD8NTtKDqtw5nViscvVF1h3v\r\n\tAebdxYxOKGYnWk6XAWhpIgIZdY0ZXG0yu9NJH5VfLtJSAc3c6d2/Nhb7g+k+f2Mn\r\n\tsrZW6XzHCeyGQQqSfr5YJfyUVdsW12udmhnc+ErbRkz84oDkMvFaxes6+2AAKrP/\r\n\tjdWXsp4fTPl454m+tG5ec/Kn0Q==\r\n\t=cZH2\r\n\t-----END PGP MESSAGE-----\r\n\r\nThe java method I need to build accepts a Public Key as a String parameter where I then use the following method to convert it to a PGPPublicKey.\r\n\r\n      private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\r\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\r\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\r\n\r\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\r\n        decodedKey.close();\r\n\r\n        PGPPublicKey key = null;\r\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\r\n        while (key == null &amp;&amp; rIt.hasNext()) {\r\n          PGPPublicKeyRing kRing = rIt.next();\r\n          Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\r\n\r\n          while (key == null &amp;&amp; kIt.hasNext()) {\r\n            PGPPublicKey k = kIt.next();\r\n\r\n            if (k.isEncryptionKey()) {\r\n              key = k;\r\n            }\r\n          }\r\n        }\r\n        if (key == null) {\r\n          throw new Exception(&quot;Can&#39;t find key&quot;);\r\n        }\r\n        return key;\r\n      }\r\n\r\nHowever, when I run the java program, I get an error &quot;exception constructing public key&quot; on the following line of code.\r\n\r\n          OutputStream cOut = encGen.open(encOut, new byte[4096]);\r\n\r\nComplete error below\r\n\r\n\torg.bouncycastle.openpgp.PGPException: exception constructing public key\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.getPublicKey(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator.encryptSessionInfo(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.PublicKeyKeyEncryptionMethodGenerator.generate(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat pgp.PgpImpl.encrypt(PgpImpl.java:84)\r\n\t\tat pgp.PgpImpl.main(PgpImpl.java:216)\r\n\tCaused by: java.security.NoSuchProviderException: no such provider: BC\r\n\t\tat sun.security.jca.GetInstance.getService(GetInstance.java:83)\r\n\t\tat sun.security.jca.GetInstance.getInstance(GetInstance.java:206)\r\n\t\tat java.security.KeyFactory.getInstance(KeyFactory.java:211)\r\n\t\tat org.bouncycastle.jcajce.util.NamedJcaJceHelper.createKeyFactory(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.OperatorHelper.createKeyFactory(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.implGeneratePublic(Unknown Source)\r\n\t\t... 7 more\r\n\r\nI followed the sample [here][2] but it didn&#39;t provide any information on how to construct the publickey coming from a String.\r\n\r\nHere&#39;s my code so far.\r\n\r\n    package pgp;\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n\r\n    import java.security.SecureRandom;\r\n\r\n    import java.util.Date;\r\n    import java.util.Iterator;\r\n\r\n    import org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\r\n    import org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPException;\r\n    import org.bouncycastle.openpgp.PGPLiteralData;\r\n    import org.bouncycastle.openpgp.PGPLiteralDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPPrivateKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyRing;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\r\n    import org.bouncycastle.openpgp.PGPSecretKey;\r\n    import org.bouncycastle.openpgp.PGPUtil;\r\n    import org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\r\n    import org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\n\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRing;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\n    import org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\r\n\r\n    public class PgpImpl {\r\n\r\n      public PgpImpl() {\r\n      }\r\n\r\n      private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws Exception {\r\n        String step = &quot;Step-0&quot;;\r\n        try {\r\n          step = &quot;Step-1&quot;;\r\n          PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n              new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n              .setWithIntegrityPacket(true)\r\n              .setSecureRandom(new SecureRandom())\r\n              .setProvider(&quot;BC&quot;));\r\n          \r\n          step = &quot;Step-2&quot;;\r\n          encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n              .setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\r\n\r\n          step = &quot;Step-3&quot;;\r\n          ByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n\r\n          step = &quot;Step-4&quot;;\r\n          // create an indefinite length encrypted stream\r\n          OutputStream cOut = encGen.open(encOut, new byte[4096]);\r\n          step = &quot;Step-5&quot;;\r\n          // write out the literal data\r\n          PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n          OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\r\n              new Date());\r\n          pOut.write(data);\r\n          pOut.close();\r\n          // finish the encryption\r\n          cOut.close();\r\n          step = &quot;Step-6&quot;;\r\n          \r\n          return new String(encOut.toByteArray());\r\n        } catch (Exception e) {\r\n          //throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\r\n          e.printStackTrace();\r\n        }\r\n        return new String(step);\r\n      }\r\n\r\n      private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\r\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\r\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\r\n\r\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\r\n        decodedKey.close();\r\n\r\n        PGPPublicKey key = null;\r\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\r\n        while (key == null &amp;&amp; rIt.hasNext()) {\r\n          PGPPublicKeyRing kRing = rIt.next();\r\n          Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\r\n\r\n          while (key == null &amp;&amp; kIt.hasNext()) {\r\n            PGPPublicKey k = kIt.next();\r\n\r\n            if (k.isEncryptionKey()) {\r\n              key = k;\r\n            }\r\n          }\r\n        }\r\n        if (key == null) {\r\n          throw new Exception(&quot;Can&#39;t find key&quot;);\r\n        }\r\n        return key;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\r\n            + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\r\n            + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\r\n            + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\r\n            + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\r\n            + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\r\n            + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\r\n            + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\r\n            + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\r\n            + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\r\n            + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\r\n            + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\r\n            + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\r\n            + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\r\n            + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\r\n            + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\r\n            + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\r\n            + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\r\n            + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\r\n            + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\r\n            + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\r\n            + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\r\n            + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\r\n            + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\r\n            + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; + &quot;=Yc74\\r\\n&quot;\r\n            + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\r\n\r\n        try {\r\n          PGPPublicKey key = getPublicKey(publicKey);\r\n          System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\r\n        } catch (IOException e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        } catch (PGPException e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        } catch (Exception e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\nAppreciate any help.\r\n\r\nUPDATE #1: After getting the stacktrace, I found out that the error is due to an invalid provider which I then change using\r\n\r\n    BouncyCastleProvider provider = new BouncyCastleProvider();\r\n\r\nSo I had to change all reference to the provider.\r\n\r\n\tprivate static String encrypt(byte[] data, PGPPublicKey encryptionKey) {\r\n\t\tBouncyCastleProvider provider = new BouncyCastleProvider();\r\n\t\tString step = &quot;Step-0&quot;;\r\n\t\ttry {\r\n\t\t\tstep = &quot;Step-1&quot;;\r\n\t\t\tPGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n\t\t\t\t\tnew JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n\t\t\t\t\t.setWithIntegrityPacket(true)\r\n\t\t\t\t\t.setSecureRandom(new SecureRandom())\r\n\t\t\t\t\t.setProvider(provider));\r\n\t\t\t\r\n\t\t\tstep = &quot;Step-2&quot;;\r\n\t\t\tencGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n\t\t\t\t\t.setSecureRandom(new SecureRandom()).setProvider(provider));\r\n\r\n\t\t\tstep = &quot;Step-3&quot;;\r\n\t\t\tByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n\r\n\t\t\tstep = &quot;Step-4&quot;;\r\n\t\t\t// create an indefinite length encrypted stream\r\n\t\t\tOutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\r\n\t\t\tstep = &quot;Step-5&quot;;\r\n\t\t\t// write out the literal data\r\n\t\t\tPGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n\t\t\tOutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\r\n\t\t\t\t\tnew Date());\r\n\t\t\tpOut.write(data);\r\n\t\t\tpOut.close();\r\n\t\t\t// finish the encryption\r\n\t\t\tcOut.close();\r\n\t\t\tstep = &quot;Step-6&quot;;\r\n\t\t\t\r\n\t\t\treturn new String(encOut.toByteArray());\r\n\t\t} catch (Exception e) {\r\n\t\t\t//throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn new String(&quot;&quot;);\r\n\t}\r\n\r\nBut now I&#39;m getting a different error.\r\n\r\n\torg.bouncycastle.openpgp.PGPException: Exception creating cipher\r\n\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat pgp.PgpImpl.encrypt(PgpImpl.java:85)\r\n\t\tat pgp.PgpImpl.main(PgpImpl.java:217)\r\n\tCaused by: org.bouncycastle.openpgp.PGPException: invalid key: Illegal key size\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder$MyPGPDataEncryptor.&lt;init&gt;(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder.build(Unknown Source)\r\n\t\t... 4 more\r\n\tCaused by: java.security.InvalidKeyException: Illegal key size\r\n\t\tat javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1034)\r\n\t\tat javax.crypto.Cipher.init(Cipher.java:1367)\r\n\t\tat javax.crypto.Cipher.init(Cipher.java:1301)\r\n\t\t... 6 more\r\n\r\nUPDATE#2: Did a bit of research and came across [this][3]. Followed the instructions there and got everything working.\r\n\r\n\r\n  [1]: https://edoceo.com/sys/gpg\r\n  [2]: https://stackoverflow.com/questions/61826843/java-pgp-encryption-using-bouncy-castle\r\n  [3]: https://help.mulesoft.com/s/article/Illegal-key-size-Error-when-using-PGP","title":"PGP Encrypt using BouncyCastle in Java","body":"<p>I was given a task to build a java method to encrypt data (String or InputStream) using PGP. I have generated a test public key, private key with passphrase following the guide <a href=\"https://edoceo.com/sys/gpg\" rel=\"nofollow noreferrer\">here</a>. I then exported the public key using the command below and copy and pasted it to my java code.</p>\n<pre><code>gpg --armor --output pubkey.txt --export 'Your Name'\n</code></pre>\n<p>I am able to encrypt a file using the command below</p>\n<pre><code>gpg --encrypt --armor -r 'Your Name' plaintext.txt\n</code></pre>\n<p>And I get the below content which is what I'm trying to achieve in my java program. I might need to sign it later as part of the requirement but all I want to do for now is to be able to successfully encrypt it like this.</p>\n<pre><code>-----BEGIN PGP MESSAGE-----\nVersion: GnuPG v2.0.22 (GNU/Linux)\n\nhQEMA0PxXau0Q30VAQf/RuWsN3f4L2HW2GJWOZUjetJsw0odXYbDc7Sug1gZULP8\nI0KRrvxnHgiiJgSlBZsws8E8iB1/LDCYJ8oJGj6olicz83iUT8VLdzdJZlc0+96/\nBHAvtSTtEv2PWZlh307nU+Zn9cuGAccaijyekCosS5/0JpDyXSFefsLTexMgphAL\nveXsxtsISyUU6S0xUux6Ac9HgUWTpCrlNaSdqBN1bk7y8YuvbZgbQ5akwY5FEbq1\nf9rxmgXgEgz3N+7f8n5yN2OvWiEyXb+qngVgDLzysD8NTtKDqtw5nViscvVF1h3v\nAebdxYxOKGYnWk6XAWhpIgIZdY0ZXG0yu9NJH5VfLtJSAc3c6d2/Nhb7g+k+f2Mn\nsrZW6XzHCeyGQQqSfr5YJfyUVdsW12udmhnc+ErbRkz84oDkMvFaxes6+2AAKrP/\njdWXsp4fTPl454m+tG5ec/Kn0Q==\n=cZH2\n-----END PGP MESSAGE-----\n</code></pre>\n<p>The java method I need to build accepts a Public Key as a String parameter where I then use the following method to convert it to a PGPPublicKey.</p>\n<pre><code>  private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\n    InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\n    InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\n\n    JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\n    decodedKey.close();\n\n    PGPPublicKey key = null;\n    Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\n    while (key == null &amp;&amp; rIt.hasNext()) {\n      PGPPublicKeyRing kRing = rIt.next();\n      Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\n\n      while (key == null &amp;&amp; kIt.hasNext()) {\n        PGPPublicKey k = kIt.next();\n\n        if (k.isEncryptionKey()) {\n          key = k;\n        }\n      }\n    }\n    if (key == null) {\n      throw new Exception(&quot;Can't find key&quot;);\n    }\n    return key;\n  }\n</code></pre>\n<p>However, when I run the java program, I get an error &quot;exception constructing public key&quot; on the following line of code.</p>\n<pre><code>      OutputStream cOut = encGen.open(encOut, new byte[4096]);\n</code></pre>\n<p>Complete error below</p>\n<pre><code>org.bouncycastle.openpgp.PGPException: exception constructing public key\n    at org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.getPublicKey(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator.encryptSessionInfo(Unknown Source)\n    at org.bouncycastle.openpgp.operator.PublicKeyKeyEncryptionMethodGenerator.generate(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at pgp.PgpImpl.encrypt(PgpImpl.java:84)\n    at pgp.PgpImpl.main(PgpImpl.java:216)\nCaused by: java.security.NoSuchProviderException: no such provider: BC\n    at sun.security.jca.GetInstance.getService(GetInstance.java:83)\n    at sun.security.jca.GetInstance.getInstance(GetInstance.java:206)\n    at java.security.KeyFactory.getInstance(KeyFactory.java:211)\n    at org.bouncycastle.jcajce.util.NamedJcaJceHelper.createKeyFactory(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.OperatorHelper.createKeyFactory(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.implGeneratePublic(Unknown Source)\n    ... 7 more\n</code></pre>\n<p>I followed the sample <a href=\"https://stackoverflow.com/questions/61826843/java-pgp-encryption-using-bouncy-castle\">here</a> but it didn't provide any information on how to construct the publickey coming from a String.</p>\n<p>Here's my code so far.</p>\n<pre><code>package pgp;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport java.security.SecureRandom;\n\nimport java.util.Date;\nimport java.util.Iterator;\n\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPLiteralDataGenerator;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPSecretKey;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\nimport org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\n\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\n\npublic class PgpImpl {\n\n  public PgpImpl() {\n  }\n\n  private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws Exception {\n    String step = &quot;Step-0&quot;;\n    try {\n      step = &quot;Step-1&quot;;\n      PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n          new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n          .setWithIntegrityPacket(true)\n          .setSecureRandom(new SecureRandom())\n          .setProvider(&quot;BC&quot;));\n      \n      step = &quot;Step-2&quot;;\n      encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n          .setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\n\n      step = &quot;Step-3&quot;;\n      ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n\n      step = &quot;Step-4&quot;;\n      // create an indefinite length encrypted stream\n      OutputStream cOut = encGen.open(encOut, new byte[4096]);\n      step = &quot;Step-5&quot;;\n      // write out the literal data\n      PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n      OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\n          new Date());\n      pOut.write(data);\n      pOut.close();\n      // finish the encryption\n      cOut.close();\n      step = &quot;Step-6&quot;;\n      \n      return new String(encOut.toByteArray());\n    } catch (Exception e) {\n      //throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\n      e.printStackTrace();\n    }\n    return new String(step);\n  }\n\n  private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\n    InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\n    InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\n\n    JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\n    decodedKey.close();\n\n    PGPPublicKey key = null;\n    Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\n    while (key == null &amp;&amp; rIt.hasNext()) {\n      PGPPublicKeyRing kRing = rIt.next();\n      Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\n\n      while (key == null &amp;&amp; kIt.hasNext()) {\n        PGPPublicKey k = kIt.next();\n\n        if (k.isEncryptionKey()) {\n          key = k;\n        }\n      }\n    }\n    if (key == null) {\n      throw new Exception(&quot;Can't find key&quot;);\n    }\n    return key;\n  }\n\n  public static void main(String[] args) {\n    String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\n        + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\n        + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\n        + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\n        + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\n        + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\n        + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\n        + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\n        + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\n        + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\n        + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\n        + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\n        + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\n        + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\n        + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\n        + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\n        + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\n        + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\n        + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\n        + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\n        + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\n        + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\n        + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\n        + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\n        + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; + &quot;=Yc74\\r\\n&quot;\n        + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\n\n    try {\n      PGPPublicKey key = getPublicKey(publicKey);\n      System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\n    } catch (IOException e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    } catch (PGPException e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    } catch (Exception e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Appreciate any help.</p>\n<p>UPDATE #1: After getting the stacktrace, I found out that the error is due to an invalid provider which I then change using</p>\n<pre><code>BouncyCastleProvider provider = new BouncyCastleProvider();\n</code></pre>\n<p>So I had to change all reference to the provider.</p>\n<pre><code>private static String encrypt(byte[] data, PGPPublicKey encryptionKey) {\n    BouncyCastleProvider provider = new BouncyCastleProvider();\n    String step = &quot;Step-0&quot;;\n    try {\n        step = &quot;Step-1&quot;;\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                .setWithIntegrityPacket(true)\n                .setSecureRandom(new SecureRandom())\n                .setProvider(provider));\n        \n        step = &quot;Step-2&quot;;\n        encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n                .setSecureRandom(new SecureRandom()).setProvider(provider));\n\n        step = &quot;Step-3&quot;;\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n\n        step = &quot;Step-4&quot;;\n        // create an indefinite length encrypted stream\n        OutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\n        step = &quot;Step-5&quot;;\n        // write out the literal data\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n        OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\n                new Date());\n        pOut.write(data);\n        pOut.close();\n        // finish the encryption\n        cOut.close();\n        step = &quot;Step-6&quot;;\n        \n        return new String(encOut.toByteArray());\n    } catch (Exception e) {\n        //throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\n        e.printStackTrace();\n    }\n    return new String(&quot;&quot;);\n}\n</code></pre>\n<p>But now I'm getting a different error.</p>\n<pre><code>org.bouncycastle.openpgp.PGPException: Exception creating cipher\n\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at pgp.PgpImpl.encrypt(PgpImpl.java:85)\n    at pgp.PgpImpl.main(PgpImpl.java:217)\nCaused by: org.bouncycastle.openpgp.PGPException: invalid key: Illegal key size\n    at org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder$MyPGPDataEncryptor.&lt;init&gt;(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder.build(Unknown Source)\n    ... 4 more\nCaused by: java.security.InvalidKeyException: Illegal key size\n    at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1034)\n    at javax.crypto.Cipher.init(Cipher.java:1367)\n    at javax.crypto.Cipher.init(Cipher.java:1301)\n    ... 6 more\n</code></pre>\n<p>UPDATE#2: Did a bit of research and came across <a href=\"https://help.mulesoft.com/s/article/Illegal-key-size-Error-when-using-PGP\" rel=\"nofollow noreferrer\">this</a>. Followed the instructions there and got everything working.</p>\n"},{"tags":["java","ssl","encryption"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693570799,"post_id":77022984,"comment_id":135782162,"body_markdown":"Your first command is using [streams](https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html). You can add a _filter_ before the _forEach_.","body":"Your first command is using <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\" rel=\"nofollow noreferrer\">streams</a>. You can add a <i>filter</i> before the <i>forEach</i>."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1693583146,"post_id":77022984,"comment_id":135784822,"body_markdown":"`jdk.tls.client.cipherSuites` is a _system_ property, not a security property; to set it you must [use `-D` on the command line or equivalent in an IDE etc, or call `System.setProperty`](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#how-to-specify-a-java-lang-system-property)","body":"<code>jdk.tls.client.cipherSuites</code> is a <i>system</i> property, not a security property; to set it you must <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#how-to-specify-a-java-lang-system-property\" rel=\"nofollow noreferrer\">use <code>-D</code> on the command line or equivalent in an IDE etc, or call <code>System.setProperty</code></a>"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1693588496,"post_id":77022984,"comment_id":135785697,"body_markdown":"While there might be a million questions and answers about cipher suites out there, there aren&#39;t so many that point out the correct reference for customizing them: [The JSSE Reference Guide](https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-93DEEE16-0B70-40E5-BBE7-55C3FD432345). There&#39;s an updated one for each version of Java, that link is for Java 17.","body":"While there might be a million questions and answers about cipher suites out there, there aren&#39;t so many that point out the correct reference for customizing them: <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-93DEEE16-0B70-40E5-BBE7-55C3FD432345\" rel=\"nofollow noreferrer\">The JSSE Reference Guide</a>. There&#39;s an updated one for each version of Java, that link is for Java 17."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693573320,"creation_date":1693573320,"answer_id":77023349,"question_id":77022984,"body_markdown":"[Java][1] is a dynamic language. Current version (at time of writing) is 20. When I run your command with Java 20, I get an error:\r\n&gt; script engine for language js can not be found\r\n\r\nIn fact, the documentation for [jrunscript][2] states:\r\n&gt; This tool is experimental and unsupported.\r\n\r\nHowever, since it appears to be working in the Java version that you are using (which I could not ascertain from your question), and since it is using [streams][3], you can add a *filter*. So try the following:\r\n```none\r\njava.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().filter(s -&gt; &quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s) || &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s)).forEach(println)\r\n```\r\nI suggest that you write a Java [class][4] and use the [java][5] command. Here is an example:\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport javax.net.ssl.SSLServerSocketFactory;\r\n\r\npublic class MyCiphers {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; desired = List.of(&quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;,\r\n                                       &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;);\r\n        SSLServerSocketFactory fact = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\r\n        String[] supported = fact.getSupportedCipherSuites();\r\n        Arrays.stream(supported)\r\n              .filter(s -&gt; desired.contains(s))\r\n              .forEach(System.out::println);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_(programming_language)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/jrunscript.html\r\n  [3]: https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\r\n  [4]: https://docs.oracle.com/javase/tutorial/\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html","title":"How do you configure specific cipher suites for Java","body":"<p><a href=\"https://en.wikipedia.org/wiki/Java_(programming_language)\" rel=\"nofollow noreferrer\">Java</a> is a dynamic language. Current version (at time of writing) is 20. When I run your command with Java 20, I get an error:</p>\n<blockquote>\n<p>script engine for language js can not be found</p>\n</blockquote>\n<p>In fact, the documentation for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jrunscript.html\" rel=\"nofollow noreferrer\">jrunscript</a> states:</p>\n<blockquote>\n<p>This tool is experimental and unsupported.</p>\n</blockquote>\n<p>However, since it appears to be working in the Java version that you are using (which I could not ascertain from your question), and since it is using <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\" rel=\"nofollow noreferrer\">streams</a>, you can add a <em>filter</em>. So try the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().filter(s -&gt; &quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s) || &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s)).forEach(println)\n</code></pre>\n<p>I suggest that you write a Java <a href=\"https://docs.oracle.com/javase/tutorial/\" rel=\"nofollow noreferrer\">class</a> and use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">java</a> command. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.List;\n\nimport javax.net.ssl.SSLServerSocketFactory;\n\npublic class MyCiphers {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; desired = List.of(&quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;,\n                                       &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;);\n        SSLServerSocketFactory fact = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\n        String[] supported = fact.getSupportedCipherSuites();\n        Arrays.stream(supported)\n              .filter(s -&gt; desired.contains(s))\n              .forEach(System.out::println);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1047031,"reputation":307,"user_id":1051817,"accept_rate":50,"display_name":"Jazz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693576178,"creation_date":1693576178,"answer_id":77023668,"question_id":77022984,"body_markdown":"Admittedly this is only tangenitally related to your question, but depending on what version of java your using, you might not have the full suite of cryptographic algorithms available to you.\r\n\r\nInitially, as strong encryption algorithms could not be shipped everywhere due to various legal restrictions, java was shipped with limited crypto algorithms.  To have the full suite of crypto algorithms (including the &#39;strong&#39; ones), you&#39;ll need to apply the official oracle Java Cryptographic Extension patch to both of your java installations.\r\n\r\nSee https://www.baeldung.com/jce-enable-unlimited-strength for more details.","title":"How do you configure specific cipher suites for Java","body":"<p>Admittedly this is only tangenitally related to your question, but depending on what version of java your using, you might not have the full suite of cryptographic algorithms available to you.</p>\n<p>Initially, as strong encryption algorithms could not be shipped everywhere due to various legal restrictions, java was shipped with limited crypto algorithms.  To have the full suite of crypto algorithms (including the 'strong' ones), you'll need to apply the official oracle Java Cryptographic Extension patch to both of your java installations.</p>\n<p>See <a href=\"https://www.baeldung.com/jce-enable-unlimited-strength\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jce-enable-unlimited-strength</a> for more details.</p>\n"}],"owner":{"account_id":5243225,"reputation":97,"user_id":4189713,"display_name":"Gene"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693576178,"creation_date":1693570173,"question_id":77022984,"body_markdown":"I&#39;m a novice when it comes to Java.  I&#39;m trying to eliminate weak ciphers from my systems.  Using wireshark I have a connection to another server and it shows 45 ciphers available.  I discovered that the connection made is done with java (by using netstat) and I found running the command:\r\n\r\n```\r\njrunscript -e &quot;java.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().forEach(println)&quot;\r\n```\r\ndisplays 45 ciphers.  So I suspect it&#39;s Java that is determining the ciphers.\r\n\r\nIs there a way to configure java to only use what ciphers I want, and if I ran the above command again, would it only display those ciphers?\r\n\r\nI&#39;ve already tried modifying the java.security file by adding the following line:\r\n```\r\njdk.tls.client.cipherSuites=TLS_DHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\r\n```\r\n\r\nBut that doesn&#39;t seem to work.  Google doesn&#39;t seem to turn up much else, so I come here as a last resort.  I&#39;m unable to copy/paste any config files as my systems are on another network.\r\n","title":"How do you configure specific cipher suites for Java","body":"<p>I'm a novice when it comes to Java.  I'm trying to eliminate weak ciphers from my systems.  Using wireshark I have a connection to another server and it shows 45 ciphers available.  I discovered that the connection made is done with java (by using netstat) and I found running the command:</p>\n<pre><code>jrunscript -e &quot;java.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().forEach(println)&quot;\n</code></pre>\n<p>displays 45 ciphers.  So I suspect it's Java that is determining the ciphers.</p>\n<p>Is there a way to configure java to only use what ciphers I want, and if I ran the above command again, would it only display those ciphers?</p>\n<p>I've already tried modifying the java.security file by adding the following line:</p>\n<pre><code>jdk.tls.client.cipherSuites=TLS_DHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n</code></pre>\n<p>But that doesn't seem to work.  Google doesn't seem to turn up much else, so I come here as a last resort.  I'm unable to copy/paste any config files as my systems are on another network.</p>\n"},{"tags":["java","spring-boot","hibernate-envers"],"comments":[{"owner":{"account_id":4806468,"reputation":3469,"user_id":3881354,"accept_rate":75,"display_name":"Elyas Hadizadeh"},"score":1,"creation_date":1606279595,"post_id":64998367,"comment_id":114913679,"body_markdown":"Check this out https://stackoverflow.com/a/51858463/3881354","body":"Check this out <a href=\"https://stackoverflow.com/a/51858463/3881354\">stackoverflow.com/a/51858463/3881354</a>"},{"owner":{"account_id":7122775,"reputation":1029,"user_id":5446775,"accept_rate":48,"display_name":"Yves Calaci"},"score":1,"creation_date":1606280162,"post_id":64998367,"comment_id":114913777,"body_markdown":"I was thinking of creating a Configuration for Hibernate Envers indeed, however this approach is the same as injecting an `PersistenceContext` (EntityManager) of type `PersistenceContextType.EXTENDED`. In other words, both approaches return an application-managed `EntityManager`, on which should be avoided, am I right?","body":"I was thinking of creating a Configuration for Hibernate Envers indeed, however this approach is the same as injecting an <code>PersistenceContext</code> (EntityManager) of type <code>PersistenceContextType.EXTENDED</code>. In other words, both approaches return an application-managed <code>EntityManager</code>, on which should be avoided, am I right?"},{"owner":{"account_id":266507,"reputation":344,"user_id":554117,"accept_rate":100,"display_name":"Giulio Pulina"},"score":0,"creation_date":1683365992,"post_id":64998367,"comment_id":134358298,"body_markdown":"@ElyasHadizadeh the answer you linked is wrong. Mine is correct: https://stackoverflow.com/a/70177753/554117","body":"@ElyasHadizadeh the answer you linked is wrong. Mine is correct: <a href=\"https://stackoverflow.com/a/70177753/554117\">stackoverflow.com/a/70177753/554117</a>"}],"answers":[{"tags":[],"owner":{"account_id":18486228,"reputation":13,"user_id":13467124,"display_name":"Mihai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693575844,"creation_date":1693575792,"answer_id":77023617,"question_id":64998367,"body_markdown":"I think I had the same issue, when running a `@SpringBootTest` I needed to get a hold of `EntityManager` like they showed in the Envers user-guide.\r\n\r\nIf you go to Hibernate Envers [github-project tests][1], you can see that they use the factory to get the `EntityManager`.\r\n\r\nI tried to annotate my `EntityManager` in the test with either `@Autowire` or `@PersistenceContext`, in both cases `EntityManager` object was opened but the delegate was closed like in your case. \r\nIt only worked when I autowired the factory:\r\n\r\n    @Autowired\r\n    private EntityManagerFactory entityManagerFactory;\r\n\r\nAnd then created an entityManager for my test like this:\r\n\r\n    var entityManager = entityManagerFactory.createEntityManager();\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/b82d4c3c74c88af484ac22924e89e7a797d430f3/hibernate-envers/src/test/java/org/hibernate/orm/test/envers/BaseEnversJPAFunctionalTestCase.java#L271\r\n","title":"Hibernate Envers claims EntityManager is closed","body":"<p>I think I had the same issue, when running a <code>@SpringBootTest</code> I needed to get a hold of <code>EntityManager</code> like they showed in the Envers user-guide.</p>\n<p>If you go to Hibernate Envers <a href=\"https://github.com/hibernate/hibernate-orm/blob/b82d4c3c74c88af484ac22924e89e7a797d430f3/hibernate-envers/src/test/java/org/hibernate/orm/test/envers/BaseEnversJPAFunctionalTestCase.java#L271\" rel=\"nofollow noreferrer\">github-project tests</a>, you can see that they use the factory to get the <code>EntityManager</code>.</p>\n<p>I tried to annotate my <code>EntityManager</code> in the test with either <code>@Autowire</code> or <code>@PersistenceContext</code>, in both cases <code>EntityManager</code> object was opened but the delegate was closed like in your case.\nIt only worked when I autowired the factory:</p>\n<pre><code>@Autowired\nprivate EntityManagerFactory entityManagerFactory;\n</code></pre>\n<p>And then created an entityManager for my test like this:</p>\n<pre><code>var entityManager = entityManagerFactory.createEntityManager();\n</code></pre>\n"}],"owner":{"account_id":7122775,"reputation":1029,"user_id":5446775,"accept_rate":48,"display_name":"Yves Calaci"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":932,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1693575844,"creation_date":1606276961,"question_id":64998367,"body_markdown":"I have a Spring (Boot) application on which I&#39;m trying to use Hibernate Envers.\r\n\r\nThe following `bar` function throws an `IllegalStateException: EntityManager is closed`, while the `foo` function works flawlessly:\r\n\r\n    @Service\r\n    public class FoobarService {\r\n    \r\n    \tprivate final EntityManager entityManager;\r\n    \r\n    \t@Autowired\r\n    \tpublic FoobarService(EntityManager entityManager) {\r\n    \t\tthis.entityManager = entityManager;\r\n    \t}\r\n    \r\n    \tpublic Iterable&lt;Foobar&gt; foo() {\r\n    \t\treturn entityManager.createQuery(&quot;select f from Foobar f&quot;, Foobar.class).getResultList();\r\n    \t}\r\n    \r\n    \tpublic Iterable&lt;Foobar&gt; bar() {\r\n    \t\tSystem.out.println(entityManager.isOpen()); // &lt;--- Returns true!\r\n\r\n    \t\tAuditReader auditReader = AuditReaderFactory.get(entityManager);\r\n    \t\tAuditQueryCreator queryCreator = auditReader.createQuery();\r\n    \t\tAuditQuery query = queryCreator.forRevisionsOfEntity(Foobar.class, true);\r\n    \r\n    \t\treturn query.getResultList();\r\n    \t}\r\n    \r\n    }\r\n\r\nDoes anybody know why it claims it&#39;s closed when the `foo` function clearly works (as stated above)?\r\n\r\nPS: I&#39;ve omitted the maven dependencies and entity mapping for brevity, as they&#39;re all working.\r\n\r\n\r\n\r\n**EDIT:**\r\n\r\nThere&#39;s something really weird I can&#39;t figure out. Within the `bar` function, we can see that:\r\n\r\n 1. `entityManager.isOpen()` returns true\r\n 2. `((Session) entityManager.getDelegate()).isOpen()` returns false\r\n\r\nThe `AuditReaderFactory.get(EntityManager entityManager)` function uses the second, this is why it complains the session is closed when it&#39;s not. I don&#39;t quite get why the `delegate` is closed, so:\r\n\r\n 1. Why does the the factory uses the `entityManager`&#39;s delegate instead?\r\n 2. Why the delegate is even closed?","title":"Hibernate Envers claims EntityManager is closed","body":"<p>I have a Spring (Boot) application on which I'm trying to use Hibernate Envers.</p>\n<p>The following <code>bar</code> function throws an <code>IllegalStateException: EntityManager is closed</code>, while the <code>foo</code> function works flawlessly:</p>\n<pre><code>@Service\npublic class FoobarService {\n\n    private final EntityManager entityManager;\n\n    @Autowired\n    public FoobarService(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n\n    public Iterable&lt;Foobar&gt; foo() {\n        return entityManager.createQuery(&quot;select f from Foobar f&quot;, Foobar.class).getResultList();\n    }\n\n    public Iterable&lt;Foobar&gt; bar() {\n        System.out.println(entityManager.isOpen()); // &lt;--- Returns true!\n\n        AuditReader auditReader = AuditReaderFactory.get(entityManager);\n        AuditQueryCreator queryCreator = auditReader.createQuery();\n        AuditQuery query = queryCreator.forRevisionsOfEntity(Foobar.class, true);\n\n        return query.getResultList();\n    }\n\n}\n</code></pre>\n<p>Does anybody know why it claims it's closed when the <code>foo</code> function clearly works (as stated above)?</p>\n<p>PS: I've omitted the maven dependencies and entity mapping for brevity, as they're all working.</p>\n<p><strong>EDIT:</strong></p>\n<p>There's something really weird I can't figure out. Within the <code>bar</code> function, we can see that:</p>\n<ol>\n<li><code>entityManager.isOpen()</code> returns true</li>\n<li><code>((Session) entityManager.getDelegate()).isOpen()</code> returns false</li>\n</ol>\n<p>The <code>AuditReaderFactory.get(EntityManager entityManager)</code> function uses the second, this is why it complains the session is closed when it's not. I don't quite get why the <code>delegate</code> is closed, so:</p>\n<ol>\n<li>Why does the the factory uses the <code>entityManager</code>'s delegate instead?</li>\n<li>Why the delegate is even closed?</li>\n</ol>\n"},{"tags":["java","selenium-webdriver","junit5","junit-jupiter","selenium-jupiter"],"comments":[{"owner":{"account_id":7527385,"reputation":2083,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"score":0,"creation_date":1534374877,"post_id":51867650,"comment_id":90687103,"body_markdown":"https://stackoverflow.com/questions/51319784/junit-5-collection-type-parameters-cause-errors-with-parameterizedtest","body":"<a href=\"https://stackoverflow.com/questions/51319784/junit-5-collection-type-parameters-cause-errors-with-parameterizedtest\" title=\"junit 5 collection type parameters cause errors with parameterizedtest\">stackoverflow.com/questions/51319784/&hellip;</a>"},{"owner":{"account_id":8431463,"reputation":1868,"user_id":6327046,"display_name":"Marc Philipp"},"score":2,"creation_date":1534400526,"post_id":51867650,"comment_id":90692819,"body_markdown":"JUnit needs to instantiate the test class using its constructor which has a `WebDriver` parameter. Thus, it looks for a registered `ParameterResolver` to resolve it but there&#39;s none registered. Do you have an extension that provides the `WebDriver` instance?","body":"JUnit needs to instantiate the test class using its constructor which has a <code>WebDriver</code> parameter. Thus, it looks for a registered <code>ParameterResolver</code> to resolve it but there&#39;s none registered. Do you have an extension that provides the <code>WebDriver</code> instance?"},{"owner":{"account_id":7527385,"reputation":2083,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"score":2,"creation_date":1534535867,"post_id":51867650,"comment_id":90755315,"body_markdown":"no, I don&#39;t have any. How would I do that ?","body":"no, I don&#39;t have any. How would I do that ?"}],"answers":[{"tags":[],"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1534760185,"creation_date":1534760185,"answer_id":51928592,"question_id":51867650,"body_markdown":"As Marc Philipp mentioned in his comment, you need to ensure that JUnit Jupiter can instantiate your test class.\r\n\r\nFor your particular scenario, you&#39;ll need to remove your custom constructor that accepts a `WebDriver`.\r\n\r\nThen you have two options:\r\n\r\n1. Create the `WebDriver` on your own -- for example, in an `@BeforeAll` or `@BeforeEach` method.\r\n2. Use an extension such as [Selenium Jupiter](https://bonigarcia.github.io/selenium-jupiter/) to help manage the `WebDriver` for you.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>As Marc Philipp mentioned in his comment, you need to ensure that JUnit Jupiter can instantiate your test class.</p>\n\n<p>For your particular scenario, you'll need to remove your custom constructor that accepts a <code>WebDriver</code>.</p>\n\n<p>Then you have two options:</p>\n\n<ol>\n<li>Create the <code>WebDriver</code> on your own -- for example, in an <code>@BeforeAll</code> or <code>@BeforeEach</code> method.</li>\n<li>Use an extension such as <a href=\"https://bonigarcia.github.io/selenium-jupiter/\" rel=\"noreferrer\">Selenium Jupiter</a> to help manage the <code>WebDriver</code> for you.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4965399,"reputation":1444,"user_id":3994927,"display_name":"Matilda Smeds"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1567330419,"creation_date":1567087494,"answer_id":57711946,"question_id":51867650,"body_markdown":"I also got `ParameterResolutionException` with JUnit 5.\r\n\r\n    org.junit.jupiter.api.extension.ParameterResolutionException: \r\n    No ParameterResolver registered for parameter [int[] arg0] in constructor (public my_package.MyClass(int[]))\r\n\r\n---\r\nI had written `@Test` methods inside the class I was testing.\r\n\r\nThis error could be fixed in two ways:\r\n\r\n1) Either replacing `import org.junit.jupiter.api.Test` with `import org.junit.Test`, or\r\n\r\n2) Writing tests in a separate TestClass.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I also got <code>ParameterResolutionException</code> with JUnit 5.</p>\n\n<pre><code>org.junit.jupiter.api.extension.ParameterResolutionException: \nNo ParameterResolver registered for parameter [int[] arg0] in constructor (public my_package.MyClass(int[]))\n</code></pre>\n\n<hr>\n\n<p>I had written <code>@Test</code> methods inside the class I was testing.</p>\n\n<p>This error could be fixed in two ways:</p>\n\n<p>1) Either replacing <code>import org.junit.jupiter.api.Test</code> with <code>import org.junit.Test</code>, or</p>\n\n<p>2) Writing tests in a separate TestClass.</p>\n"},{"tags":[],"owner":{"account_id":124735,"reputation":3920,"user_id":1287550,"display_name":"Will"},"down_vote_count":1,"up_vote_count":255,"is_accepted":false,"score":254,"last_activity_date":1574095039,"creation_date":1574095039,"answer_id":58919155,"question_id":51867650,"body_markdown":"I had both `@Test` and `@ParameterizedTest` annotating the same method. I removed the former.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had both <code>@Test</code> and <code>@ParameterizedTest</code> annotating the same method. I removed the former.</p>\n"},{"tags":[],"owner":{"account_id":7881416,"reputation":543,"user_id":6319815,"display_name":"muhin"},"down_vote_count":4,"up_vote_count":41,"is_accepted":false,"score":37,"last_activity_date":1579063500,"creation_date":1579061626,"answer_id":59745039,"question_id":51867650,"body_markdown":"This error appears when you try to use both `@Test` and `@ParameterizedTest` in the same test class. Removing `@Test` annotation will resolve the issue.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>This error appears when you try to use both <code>@Test</code> and <code>@ParameterizedTest</code> in the same test class. Removing <code>@Test</code> annotation will resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1584707150,"creation_date":1584707150,"answer_id":60774133,"question_id":51867650,"body_markdown":"I got this error because my test needed my Spring Boot server to be running first, so that dependency injection using @Autowired would get executed. I added these annotations:\r\n\r\n\r\n\r\n    @Transactional\r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = Server.class)\r\n    public MyTestClass () {\r\n    ...\r\n    \r\n    }","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I got this error because my test needed my Spring Boot server to be running first, so that dependency injection using @Autowired would get executed. I added these annotations:</p>\n\n<pre><code>@Transactional\n@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = Server.class)\npublic MyTestClass () {\n...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10872862,"reputation":21,"user_id":7994171,"display_name":"Krzysiek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590579203,"creation_date":1590579203,"answer_id":62042097,"question_id":51867650,"body_markdown":"Annotating test class with @ExtendWith(MockitoExtension.class) worked for me","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>Annotating test class with @ExtendWith(MockitoExtension.class) worked for me</p>\n"},{"tags":[],"owner":{"account_id":152480,"reputation":1164,"user_id":1384839,"display_name":"slonik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1616108644,"creation_date":1616108644,"answer_id":66700336,"question_id":51867650,"body_markdown":"For me, I was using\r\n\r\n    @ParameterizedTest\r\n    @CsvSource({\r\n            &quot;1st-param1&quot;,&quot;1st-param2&quot;,\r\n            &quot;2nd-param1&quot;,&quot;2nd-param2&quot;\r\n            })\r\n    public void isCompleted(String param1, String param2) {\r\n\r\n\r\nInstead of (quotes were wrong):\r\n\r\n    @ParameterizedTest\r\n    @CsvSource({\r\n            &quot;1st-param1,1st-param2&quot;,\r\n            &quot;2nd-param1,2nd-param2&quot;\r\n            })\r\n    public void isCompleted(String param1, String param2) {","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>For me, I was using</p>\n<pre><code>@ParameterizedTest\n@CsvSource({\n        &quot;1st-param1&quot;,&quot;1st-param2&quot;,\n        &quot;2nd-param1&quot;,&quot;2nd-param2&quot;\n        })\npublic void isCompleted(String param1, String param2) {\n</code></pre>\n<p>Instead of (quotes were wrong):</p>\n<pre><code>@ParameterizedTest\n@CsvSource({\n        &quot;1st-param1,1st-param2&quot;,\n        &quot;2nd-param1,2nd-param2&quot;\n        })\npublic void isCompleted(String param1, String param2) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2974733,"reputation":721,"user_id":2526021,"display_name":"marco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619957689,"creation_date":1619957689,"answer_id":67356270,"question_id":51867650,"body_markdown":"In my situation I had 2 parameters.  The first parameter was using @AggregateWith, the second parameter should not have been aggregated and was already of the correct type, but JUnit tried to aggregate it as well.\r\n\r\nSwitching parameter 0 and 1 solved the issue for me (that is, the parameter annotated with @AggregateWith is now at the end).","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>In my situation I had 2 parameters.  The first parameter was using @AggregateWith, the second parameter should not have been aggregated and was already of the correct type, but JUnit tried to aggregate it as well.</p>\n<p>Switching parameter 0 and 1 solved the issue for me (that is, the parameter annotated with @AggregateWith is now at the end).</p>\n"},{"tags":[],"owner":{"account_id":4418975,"reputation":449,"user_id":3599627,"accept_rate":29,"display_name":"Darshan"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1638457139,"creation_date":1630422162,"answer_id":69001076,"question_id":51867650,"body_markdown":"I had the similar issue I resolved it by removing the ```@Test``` annotation\r\n and introduce annotation ```@ParameterizedTest```\r\n","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had the similar issue I resolved it by removing the <code>@Test</code> annotation\nand introduce annotation <code>@ParameterizedTest</code></p>\n"},{"tags":[],"owner":{"account_id":11229684,"reputation":31,"user_id":8238181,"display_name":"Ravindra VL"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642009932,"creation_date":1642009932,"answer_id":70686210,"question_id":51867650,"body_markdown":"I had similar issue as my dependencies where using both junit4 &amp; junit5. I made `@Tests` to use from junit4 i.e, `import org.junit.Test`. This fixed the cause.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had similar issue as my dependencies where using both junit4 &amp; junit5. I made <code>@Tests</code> to use from junit4 i.e, <code>import org.junit.Test</code>. This fixed the cause.</p>\n"},{"tags":[],"owner":{"account_id":21583747,"reputation":1,"user_id":15914562,"display_name":"Lisen Saka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643210738,"creation_date":1643210738,"answer_id":70865920,"question_id":51867650,"body_markdown":"I think the WebDriver class in your project is not Annotated as a bean and it cannot be injected, i had the same problem and when i changed the injection way from constructor injection into instance variable injection, it throws NoSuchBeanDefinitionException (&quot;No qualifying bean of type &#39;...service.RsRepositoryService&lt;?, ?&gt;&#39; available: &quot;), it does not find the bean that we are trying to inject.\r\nHope this helps someone with this problem :)","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I think the WebDriver class in your project is not Annotated as a bean and it cannot be injected, i had the same problem and when i changed the injection way from constructor injection into instance variable injection, it throws NoSuchBeanDefinitionException (&quot;No qualifying bean of type '...service.RsRepositoryService' available: &quot;), it does not find the bean that we are trying to inject.\nHope this helps someone with this problem :)</p>\n"},{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1693575431,"creation_date":1654978796,"answer_id":72587626,"question_id":51867650,"body_markdown":"It is maybe not an answer to the question above, but for me using **Spring-Boot**, and **Lombok**s @RequiredArgsConstructor, JUnit couldn&#39;t autowire the dependencies. My class looked like that:\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\r\n@RequiredArgsConstructor\r\nclass MyRepositoryTest {\r\n\tprivate final MyRepository repository;\r\n\tprivate final TransactionTemplate tt;\r\n\r\n// test methods...\r\n\r\n\t@Configuration\r\n\t@EnableJpaRepositories(basePackageClasses = { MyRepository.class })\r\n\tstatic class TestConfiguration {}\r\n}\r\n```\r\n\r\n# Warning (experimental Lombok feature!)\r\n\r\nLomboks [onX](https://projectlombok.org/features/experimental/onX) is **experimental** and comes in different flavours.\r\n\r\nYou could add `onConstructor = @__(@Autowired)` to the RequiredArgsConstructor annotation:\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\nclass MyRepositoryTest {\r\n// everything as before\r\n}\r\n```\r\n\r\n# Without Lombok\r\n\r\nIMHO having an IDE generated constructor with @Autowired would be better. At least for now.\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\r\nclass MyRepositoryTest {\r\n    private final MyRepository repository;\r\n    private final TransactionTemplate tt;\r\n\r\n    @Autowired\r\n    MyRepositoryTest(MyRepository repository, TransactionTemplate tt) {\r\n        this.tt = tt;\r\n        this.repository = repository;\r\n    }\r\n// everything else as before\r\n}\r\n```","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>It is maybe not an answer to the question above, but for me using <strong>Spring-Boot</strong>, and <strong>Lombok</strong>s @RequiredArgsConstructor, JUnit couldn't autowire the dependencies. My class looked like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\n@RequiredArgsConstructor\nclass MyRepositoryTest {\n    private final MyRepository repository;\n    private final TransactionTemplate tt;\n\n// test methods...\n\n    @Configuration\n    @EnableJpaRepositories(basePackageClasses = { MyRepository.class })\n    static class TestConfiguration {}\n}\n</code></pre>\n<h1>Warning (experimental Lombok feature!)</h1>\n<p>Lomboks <a href=\"https://projectlombok.org/features/experimental/onX\" rel=\"nofollow noreferrer\">onX</a> is <strong>experimental</strong> and comes in different flavours.</p>\n<p>You could add <code>onConstructor = @__(@Autowired)</code> to the RequiredArgsConstructor annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\nclass MyRepositoryTest {\n// everything as before\n}\n</code></pre>\n<h1>Without Lombok</h1>\n<p>IMHO having an IDE generated constructor with @Autowired would be better. At least for now.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\nclass MyRepositoryTest {\n    private final MyRepository repository;\n    private final TransactionTemplate tt;\n\n    @Autowired\n    MyRepositoryTest(MyRepository repository, TransactionTemplate tt) {\n        this.tt = tt;\n        this.repository = repository;\n    }\n// everything else as before\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4999034,"reputation":1870,"user_id":6722075,"display_name":"Tohid Makari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655305686,"creation_date":1655305294,"answer_id":72633682,"question_id":51867650,"body_markdown":"Removing constructor and adding as parameter in test method, solved my problem in `JUnit 5`.\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;data&quot;)\r\n    public void check(String input, boolean expected) {\r\n        assertThat(inpu).isEqualTo(expected);\r\n    }\r\n    \r\n    private static Stream&lt;Arguments&gt; data() {\r\n        return Stream.of(\r\n                Arguments.of(&quot;A&quot;, false),\r\n                Arguments.of(&quot;B&quot;, false)\r\n        );\r\n    }","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>Removing constructor and adding as parameter in test method, solved my problem in <code>JUnit 5</code>.</p>\n<pre><code>@ParameterizedTest\n@MethodSource(&quot;data&quot;)\npublic void check(String input, boolean expected) {\n    assertThat(inpu).isEqualTo(expected);\n}\n\nprivate static Stream&lt;Arguments&gt; data() {\n    return Stream.of(\n            Arguments.of(&quot;A&quot;, false),\n            Arguments.of(&quot;B&quot;, false)\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7325773,"reputation":1251,"user_id":7093031,"accept_rate":25,"display_name":"Zoette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660883507,"creation_date":1660883507,"answer_id":73411860,"question_id":51867650,"body_markdown":"I had the same error while using a wrong separator (&quot;;&quot; instead of &quot;,&quot;)","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had the same error while using a wrong separator (&quot;;&quot; instead of &quot;,&quot;)</p>\n"},{"tags":[],"owner":{"account_id":2541359,"reputation":6751,"user_id":2521769,"accept_rate":73,"display_name":"Stefan van den Akker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675354193,"creation_date":1675354193,"answer_id":75325929,"question_id":51867650,"body_markdown":"If you&#39;re using Kotlin &amp; Spring Boot, using the primary constructor to inject dependencies (as you&#39;d normally do) would introduce this error. Solution: use property injection instead of constructor injection.\r\n\r\nNot working:\r\n\r\n```kotlin\r\n@SpringBootTest\r\nclass Failing(val someDependency: SomeDependency) {\r\n    @Test\r\n    fun foo() {}\r\n}\r\n```\r\n\r\nWorking:\r\n\r\n```kotlin\r\n@SpringBootTest\r\nclass Working {\r\n    @Autowired lateinit var someDependency: SomeDependency\r\n\r\n    @Test\r\n    fun foo() {}\r\n}\r\n```","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>If you're using Kotlin &amp; Spring Boot, using the primary constructor to inject dependencies (as you'd normally do) would introduce this error. Solution: use property injection instead of constructor injection.</p>\n<p>Not working:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SpringBootTest\nclass Failing(val someDependency: SomeDependency) {\n    @Test\n    fun foo() {}\n}\n</code></pre>\n<p>Working:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SpringBootTest\nclass Working {\n    @Autowired lateinit var someDependency: SomeDependency\n\n    @Test\n    fun foo() {}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677165771,"creation_date":1677165771,"answer_id":75546843,"question_id":51867650,"body_markdown":"I haven&#39;t seen the answer that worked for me. I got the error because I initiated my object using a constructor instead of for each. Don&#39;t use a constructor, use beforeEach, like this:\r\n\r\n``` \r\nclass Testclass {\r\n   private ObjectToRunTestsOn objectToRunTestsOn;\r\n\r\n\t@BeforeEach()\r\n\tvoid beforeEach() {\r\n\t\tobjectToRunTestsOn= new ObjectToRunTestsOn();\r\n\t}\r\n\t\r\n}\r\n ```","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I haven't seen the answer that worked for me. I got the error because I initiated my object using a constructor instead of for each. Don't use a constructor, use beforeEach, like this:</p>\n<pre><code>class Testclass {\n   private ObjectToRunTestsOn objectToRunTestsOn;\n\n    @BeforeEach()\n    void beforeEach() {\n        objectToRunTestsOn= new ObjectToRunTestsOn();\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28111828,"reputation":1,"user_id":21479483,"display_name":"FragoLanten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679644136,"creation_date":1679644136,"answer_id":75831104,"question_id":51867650,"body_markdown":"I have been investigated this issue in my project. I made a conclusion that this problem can occurs in 2 cases:\r\n1. You create a constructor with argument. The compiler cannot accept this. So you need delete argument in conctructor. Or you can make your test class abstract and delegate argument to inheritors.\r\n2. You create testMethod with argument. I advise to delete argument from these methods.\r\nAnnotation @ParameterizedTest do not help in solving this problem for me. I use only @Test annotation\r\n","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I have been investigated this issue in my project. I made a conclusion that this problem can occurs in 2 cases:</p>\n<ol>\n<li>You create a constructor with argument. The compiler cannot accept this. So you need delete argument in conctructor. Or you can make your test class abstract and delegate argument to inheritors.</li>\n<li>You create testMethod with argument. I advise to delete argument from these methods.\nAnnotation @ParameterizedTest do not help in solving this problem for me. I use only @Test annotation</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11878643,"reputation":1,"user_id":13489532,"display_name":"segadev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681641202,"creation_date":1681544932,"answer_id":76020989,"question_id":51867650,"body_markdown":"inject dependency as variant:\r\n\r\n    @Autowired\r\n    public WebDriver driver;","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>inject dependency as variant:</p>\n<pre><code>@Autowired\npublic WebDriver driver;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687734530,"creation_date":1687734530,"answer_id":76552738,"question_id":51867650,"body_markdown":"Using JUnit 4 keywords/annotations with JUnit 5\r\n==\r\nI had &quot;all of the above&quot;... well, not all, but some.\r\n\r\nI was constructing JUnit 4 test cases (@RunWith(Parameterized.class) @Test, constructor with arguments...) that would have been fine in a project with JUnit 4. In fact, their structure was copied from a similar test case for a similar class-under-test.\r\n\r\nThe problem was that, being a new project, we started with all the new stuff: left Java8 for Java11, used lambda everywhere possible, and migrate tests to JUnit 5.\r\n\r\nThe solution, then, was to write proper JUnit 5 test cases.\r\n- Loose @Parameters at the data generation method in favor of @MethodSource(&quot;methodName&quot;) at the test case, right after @ParameterizedTest\r\n- remove the constructor with parameters and put parameters in the test case instead\r\n- get rid of the @RunWith(Parameterized.class) at class level\r\n\r\nBy the way I still have @ParameterizedTest and @Test in the same class. The latter runs once and the former runs as many times as data the @MethodSource creates. This was not the problem.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<h1>Using JUnit 4 keywords/annotations with JUnit 5</h1>\n<p>I had &quot;all of the above&quot;... well, not all, but some.</p>\n<p>I was constructing JUnit 4 test cases (@RunWith(Parameterized.class) @Test, constructor with arguments...) that would have been fine in a project with JUnit 4. In fact, their structure was copied from a similar test case for a similar class-under-test.</p>\n<p>The problem was that, being a new project, we started with all the new stuff: left Java8 for Java11, used lambda everywhere possible, and migrate tests to JUnit 5.</p>\n<p>The solution, then, was to write proper JUnit 5 test cases.</p>\n<ul>\n<li>Loose @Parameters at the data generation method in favor of @MethodSource(&quot;methodName&quot;) at the test case, right after @ParameterizedTest</li>\n<li>remove the constructor with parameters and put parameters in the test case instead</li>\n<li>get rid of the @RunWith(Parameterized.class) at class level</li>\n</ul>\n<p>By the way I still have @ParameterizedTest and @Test in the same class. The latter runs once and the former runs as many times as data the @MethodSource creates. This was not the problem.</p>\n"}],"owner":{"account_id":7527385,"reputation":2083,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199553,"favorite_count":0,"down_vote_count":0,"up_vote_count":119,"accepted_answer_id":51928592,"answer_count":19,"score":119,"last_activity_date":1693575431,"creation_date":1534374789,"question_id":51867650,"body_markdown":"I can write up and execute Selenium script without any special test framework but I wanted to use Junit 5 (because we have dependency with other tools) and I have never seen such error `org.junit.jupiter.api.extension.ParameterResolutionException` while working with Junit 4.\r\n\r\nCurrently it&#39;s Junit 5 and \r\nI googled it to get some sort of idea but can not resolve the issue. \r\n\r\nTest script using `JUnit 5`, `Eclipse 4.8` and `Selenium`:\r\n\r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    import org.junit.jupiter.api.AfterEach;\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    \r\n    public  class loginTest  {\r\n    \tpublic  WebDriver driver = null;\r\n\r\n    \tpublic loginTest(WebDriver driver) {\r\n    \t    this.driver=driver;\r\n    \t}\r\n\r\n    \t@BeforeEach\r\n    \tpublic void setUp() throws Exception {\r\n    \t\tdriver.get(&quot;google.com&quot;);\r\n    \t\tSystem.out.println(&quot;Page title is: &quot; + driver.getTitle());\r\n    \t}\r\n\r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\t// some action here I have in original script\r\n    \t\tSystem.out.println(&quot;Page title is: &quot; + driver.getTitle());\r\n    \t}\r\n\r\n    \t@AfterEach\r\n    \tpublic void tearDown() throws Exception {\r\n    \t\tdriver.quit();\r\n    \t}\r\n    }\r\n\r\nStack trace:\r\n\r\n&gt;    org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [org.openqa.selenium.WebDriver arg0] in executable [public login.loginTest(org.openqa.selenium.WebDriver)].\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:191)","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I can write up and execute Selenium script without any special test framework but I wanted to use Junit 5 (because we have dependency with other tools) and I have never seen such error <code>org.junit.jupiter.api.extension.ParameterResolutionException</code> while working with Junit 4.</p>\n<p>Currently it's Junit 5 and\nI googled it to get some sort of idea but can not resolve the issue.</p>\n<p>Test script using <code>JUnit 5</code>, <code>Eclipse 4.8</code> and <code>Selenium</code>:</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.assertEquals;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\n\npublic  class loginTest  {\n    public  WebDriver driver = null;\n\n    public loginTest(WebDriver driver) {\n        this.driver=driver;\n    }\n\n    @BeforeEach\n    public void setUp() throws Exception {\n        driver.get(&quot;google.com&quot;);\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\n    }\n\n    @Test\n    public void test() {\n        // some action here I have in original script\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\n    }\n\n    @AfterEach\n    public void tearDown() throws Exception {\n        driver.quit();\n    }\n}\n</code></pre>\n<p>Stack trace:</p>\n<blockquote>\n<p>org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [org.openqa.selenium.WebDriver arg0] in executable [public login.loginTest(org.openqa.selenium.WebDriver)].\nat org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:191)</p>\n</blockquote>\n"},{"tags":["java","testing","cucumber","testng"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644873515,"creation_date":1644873515,"answer_id":71118391,"question_id":71113381,"body_markdown":"When extending `AbstractTestNGCucumberTests` you can filter the output from `scenarios()`\r\n\r\n```\r\npublic class RunCucumberTest extends AbstractTestNGCucumberTests {\r\n\r\n    @DataProvider(parallel = true)\r\n    @Override\r\n    public Object[][] scenarios() {\r\n        Object[][] scenarios = super.scenarios();\r\n        // Do filtering here\r\n        return scenarios;\r\n    }\r\n\r\n}\r\n```\r\n\r\nBecause the data provider is used to invoke the test methode you can safely cast the first array element to `PickleWrapper` and use the `pickleWrapper.getPickle().get tags()` to access the tags.","title":"Cucumber 7 + TestNG - Dynamic tags manipulation before test run start","body":"<p>When extending <code>AbstractTestNGCucumberTests</code> you can filter the output from <code>scenarios()</code></p>\n<pre><code>public class RunCucumberTest extends AbstractTestNGCucumberTests {\n\n    @DataProvider(parallel = true)\n    @Override\n    public Object[][] scenarios() {\n        Object[][] scenarios = super.scenarios();\n        // Do filtering here\n        return scenarios;\n    }\n\n}\n</code></pre>\n<p>Because the data provider is used to invoke the test methode you can safely cast the first array element to <code>PickleWrapper</code> and use the <code>pickleWrapper.getPickle().get tags()</code> to access the tags.</p>\n"},{"tags":[],"owner":{"account_id":29335506,"reputation":1,"user_id":22475974,"display_name":"AKP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693575280,"creation_date":1693575280,"answer_id":77023554,"question_id":71113381,"body_markdown":"This solution above is really good. It put me on the right track. I didn&#39;t understand how to overwrite the tags during run time. But I wanted the whole filtering thing work with usual &#39;and&#39; &#39;or&#39; &#39;not&#39; expressions of cucumber tag and also as simple as passing multiple tags separated by comma.\r\n\r\nSo, after whole day of digging around the cucumber classes starting from AbstractTestNGCucumberTests, I understood how exactly tags are handled. Then, I found the perfect solution. Here is the complete code.\r\n\r\n  \r\n    /**\r\n     * This runner is a hybrid runner which can run normally as local runner with Cucumber Options or run with tags variable passed from Pipeline tools or from any other sources\r\n     * &lt;br&gt;&lt;/br&gt;\r\n     * This runner works with either of them or both combined. Let&#39;s say You have passed &#39;@smoke&#39; tag in @CucumberOptions annotation which have 100 scenarios, then additionally you can also pass a runtime tag &quot;@Login&quot; and filter again.\r\n     */\r\n    @CucumberOptions( features = &quot;src/test/resources/features/&quot;,\r\n                      glue = { &quot;stepDefinitions&quot;, &quot;hooks&quot; },\r\n                      plugin = { &quot;pretty&quot;, &quot;com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter:&quot; },\r\n                      tags = &quot;&quot; )       //Pass tags here as usual\r\n    public class CucumberRunnerTest extends AbstractTestNGCucumberTests\r\n    {\r\n    \r\n    \t@DataProvider\r\n    \t@Override\r\n    \tpublic Object[][] scenarios()\r\n    \t{\r\n    \t\tObject[][] scenarios = super.scenarios();\r\n    \r\n    \t\tString dynamicTags = System.getenv(&quot;tags&quot;);   //passed from Pipeline \r\n            //Or add any other sources you want to get the tags from\r\n\r\n    \t\tif ( dynamicTags != null &amp;&amp; !dynamicTags.equals(&quot;&quot;) ) return (Arrays.stream(scenarios).filter(scenario -&gt; TagExpressionParser.parse(dynamicTags).evaluate((( PickleWrapper ) scenario[0]).getPickle().getTags())).collect(Collectors.toList())).toArray(new Object[0][0]);\r\n\t\t    else return scenarios;\r\n    \t}\r\n    }\r\n\r\nI narrowed it down to one simple line of TagExpression but it took me hours to find these and understand from so many different classes.\r\n\r\nTry this once, hope it helps.\r\n","title":"Cucumber 7 + TestNG - Dynamic tags manipulation before test run start","body":"<p>This solution above is really good. It put me on the right track. I didn't understand how to overwrite the tags during run time. But I wanted the whole filtering thing work with usual 'and' 'or' 'not' expressions of cucumber tag and also as simple as passing multiple tags separated by comma.</p>\n<p>So, after whole day of digging around the cucumber classes starting from AbstractTestNGCucumberTests, I understood how exactly tags are handled. Then, I found the perfect solution. Here is the complete code.</p>\n<pre><code>/**\n * This runner is a hybrid runner which can run normally as local runner with Cucumber Options or run with tags variable passed from Pipeline tools or from any other sources\n * &lt;br&gt;&lt;/br&gt;\n * This runner works with either of them or both combined. Let's say You have passed '@smoke' tag in @CucumberOptions annotation which have 100 scenarios, then additionally you can also pass a runtime tag &quot;@Login&quot; and filter again.\n */\n@CucumberOptions( features = &quot;src/test/resources/features/&quot;,\n                  glue = { &quot;stepDefinitions&quot;, &quot;hooks&quot; },\n                  plugin = { &quot;pretty&quot;, &quot;com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter:&quot; },\n                  tags = &quot;&quot; )       //Pass tags here as usual\npublic class CucumberRunnerTest extends AbstractTestNGCucumberTests\n{\n\n    @DataProvider\n    @Override\n    public Object[][] scenarios()\n    {\n        Object[][] scenarios = super.scenarios();\n\n        String dynamicTags = System.getenv(&quot;tags&quot;);   //passed from Pipeline \n        //Or add any other sources you want to get the tags from\n\n        if ( dynamicTags != null &amp;&amp; !dynamicTags.equals(&quot;&quot;) ) return (Arrays.stream(scenarios).filter(scenario -&gt; TagExpressionParser.parse(dynamicTags).evaluate((( PickleWrapper ) scenario[0]).getPickle().getTags())).collect(Collectors.toList())).toArray(new Object[0][0]);\n        else return scenarios;\n    }\n}\n</code></pre>\n<p>I narrowed it down to one simple line of TagExpression but it took me hours to find these and understand from so many different classes.</p>\n<p>Try this once, hope it helps.</p>\n"}],"owner":{"account_id":16379082,"reputation":355,"user_id":11830541,"display_name":"Serhii Kachan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71118391,"answer_count":2,"score":1,"last_activity_date":1693575280,"creation_date":1644848452,"question_id":71113381,"body_markdown":"I use TestNG and Cucumber in my project.\r\n\r\nUsed versions:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nAll works fine, but I need to make some dynamic tags manipulation before test run start.\r\nTo be more specific - I need to add additional filter tag expressions based on some conditions of environment.\r\n\r\nCurrent implementation is `AbstractTestNGCucumberTests` class with a `TestNGCucumberRunner` field.\r\n\r\nThe place where I need to change/add some lines of code is in the constructor of `TestNGCucumberRunner` class, since the runner initializes and starts the test run right there.\r\n\r\nProblem is that almost all classes in *cucumber-testng* dependency are not `public` and `final`. So I cannot extend classes and override some logic.\r\n\r\nOnly way I see is to duplicate all the classes in dependency to my source folder what is a weird and dumb idea.\r\n\r\nIs there any tips how can I achieve my goal ?","title":"Cucumber 7 + TestNG - Dynamic tags manipulation before test run start","body":"<p>I use TestNG and Cucumber in my project.</p>\n<p>Used versions:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;7.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n        &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n        &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>All works fine, but I need to make some dynamic tags manipulation before test run start.\nTo be more specific - I need to add additional filter tag expressions based on some conditions of environment.</p>\n<p>Current implementation is <code>AbstractTestNGCucumberTests</code> class with a <code>TestNGCucumberRunner</code> field.</p>\n<p>The place where I need to change/add some lines of code is in the constructor of <code>TestNGCucumberRunner</code> class, since the runner initializes and starts the test run right there.</p>\n<p>Problem is that almost all classes in <em>cucumber-testng</em> dependency are not <code>public</code> and <code>final</code>. So I cannot extend classes and override some logic.</p>\n<p>Only way I see is to duplicate all the classes in dependency to my source folder what is a weird and dumb idea.</p>\n<p>Is there any tips how can I achieve my goal ?</p>\n"},{"tags":["java","mongodb","illegalstateexception","mongodb-atlas","mongo-java-driver"],"comments":[{"owner":{"account_id":19354220,"reputation":90,"user_id":14150858,"display_name":"KarlMeierBE"},"score":0,"creation_date":1627570278,"post_id":68501141,"comment_id":121196558,"body_markdown":"Did you solve this issue by now?","body":"Did you solve this issue by now?"},{"owner":{"account_id":11541400,"reputation":463,"user_id":8456953,"accept_rate":0,"display_name":"Sajitha Liyanage"},"score":0,"creation_date":1627749700,"post_id":68501141,"comment_id":121241824,"body_markdown":"no. Still looking for an answer","body":"no. Still looking for an answer"},{"owner":{"account_id":19354220,"reputation":90,"user_id":14150858,"display_name":"KarlMeierBE"},"score":1,"creation_date":1628520030,"post_id":68501141,"comment_id":121436313,"body_markdown":"Have you tried retrieving the database in the same session? I ran into this issue and after I retrieved the database and then the collection from the same Mongo client, it was working fine for me.","body":"Have you tried retrieving the database in the same session? I ran into this issue and after I retrieved the database and then the collection from the same Mongo client, it was working fine for me."},{"owner":{"account_id":8487091,"reputation":547,"user_id":6364823,"display_name":"Satyaaditya"},"score":0,"creation_date":1683803143,"post_id":68501141,"comment_id":134423997,"body_markdown":"I tried to write a generic transaction function in a different class where session is not created. having collection retrieved from the same session solved issue for me.","body":"I tried to write a generic transaction function in a different class where session is not created. having collection retrieved from the same session solved issue for me."}],"answers":[{"tags":[],"owner":{"account_id":11541400,"reputation":463,"user_id":8456953,"accept_rate":0,"display_name":"Sajitha Liyanage"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693575222,"creation_date":1693575222,"answer_id":77023545,"question_id":68501141,"body_markdown":"I no longer encountered the previously mentioned error after setting the MongoDB client as follows (use this in a Singleton class).\r\n\r\n```java\r\nConnectionString connectionString = new ConnectionString(&quot;mongoUrl&quot;);\r\nCodecRegistry pojoCodecRegistry = CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\nCodecRegistry codecRegistry = CodecRegistries.fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\nMongoClientSettings clientSettings = MongoClientSettings.builder()\r\n                    .retryWrites(true)\r\n                    .applyConnectionString(connectionString)\r\n                    .codecRegistry(codecRegistry)\r\n                    .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; {\r\n                        builder.maxSize(mongoMaxPoolSize) //connections count\r\n                                .minSize(5)\r\n                                .maxConnectionLifeTime(30, TimeUnit.MINUTES)\r\n                                .maxConnectionIdleTime( 30000, TimeUnit.MILLISECONDS);\r\n                    })\r\n                    .applyToSocketSettings(builder -&gt; {\r\n                        builder.connectTimeout(2000, TimeUnit.MILLISECONDS);\r\n                    })\r\n                    .build();\r\nmongoClient = MongoClients.create(clientSettings);\r\n```","title":"MongoDB: java.lang.IllegalStateException: state should be: ClientSession from same MongoClient","body":"<p>I no longer encountered the previously mentioned error after setting the MongoDB client as follows (use this in a Singleton class).</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConnectionString connectionString = new ConnectionString(&quot;mongoUrl&quot;);\nCodecRegistry pojoCodecRegistry = CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build());\nCodecRegistry codecRegistry = CodecRegistries.fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\nMongoClientSettings clientSettings = MongoClientSettings.builder()\n                    .retryWrites(true)\n                    .applyConnectionString(connectionString)\n                    .codecRegistry(codecRegistry)\n                    .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; {\n                        builder.maxSize(mongoMaxPoolSize) //connections count\n                                .minSize(5)\n                                .maxConnectionLifeTime(30, TimeUnit.MINUTES)\n                                .maxConnectionIdleTime( 30000, TimeUnit.MILLISECONDS);\n                    })\n                    .applyToSocketSettings(builder -&gt; {\n                        builder.connectTimeout(2000, TimeUnit.MILLISECONDS);\n                    })\n                    .build();\nmongoClient = MongoClients.create(clientSettings);\n</code></pre>\n"}],"owner":{"account_id":11541400,"reputation":463,"user_id":8456953,"accept_rate":0,"display_name":"Sajitha Liyanage"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1036,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693575222,"creation_date":1627051979,"question_id":68501141,"body_markdown":"I have an application that stores data in the used **MongoDB Atlas (Cluster Tier:\r\nM0 Sandbox Shared RAM, 512 MB Storage)** collection as a transaction. The sample code is as follows.\r\n\r\n```java\r\nMongoClient mongoClient = MongoClients.create(&quot;Connection-URL&quot;);\r\nMongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;DATABASE&quot;);\r\n\r\nClientSession clientSession = mongoClient.startSession();\r\nclientSession.startTransaction();\r\nstatus = mongoDatabase.getCollection(collection).insertOne(clientSession, insertDocument);\r\n\r\nif (status == IS_SUCCESS) {\r\n   clientSession.commitTransaction();\r\n} else {\r\n   clientSession.abortTransaction();\r\n}\r\n\r\nclientSession.close();\r\n```\r\n\r\nThis works fine with multiple requests. However, after some time (can not say the exact time), I&#39;m getting the below exception if I invoke the above functionality.\r\n\r\n```\r\njava.lang.IllegalStateException: state should be: ClientSession from same MongoClient\r\n\tat com.mongodb.assertions.Assertions.isTrue(Assertions.java:72)\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.getClientSession(MongoClientDelegate.java:279)\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:206)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1053)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:503)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:499)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:492)\r\n\tat mongo.impl.InsertDocuments.insertItem(InsertDocuments.java:24)\r\n```\r\nand continues failing all the time...\r\n\r\nI&#39;m using the following client connector to connect from my JAVA application\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.12.8&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nDoes anyone know why this is happening?","title":"MongoDB: java.lang.IllegalStateException: state should be: ClientSession from same MongoClient","body":"<p>I have an application that stores data in the used <strong>MongoDB Atlas (Cluster Tier:\nM0 Sandbox Shared RAM, 512 MB Storage)</strong> collection as a transaction. The sample code is as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>MongoClient mongoClient = MongoClients.create(&quot;Connection-URL&quot;);\nMongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;DATABASE&quot;);\n\nClientSession clientSession = mongoClient.startSession();\nclientSession.startTransaction();\nstatus = mongoDatabase.getCollection(collection).insertOne(clientSession, insertDocument);\n\nif (status == IS_SUCCESS) {\n   clientSession.commitTransaction();\n} else {\n   clientSession.abortTransaction();\n}\n\nclientSession.close();\n</code></pre>\n<p>This works fine with multiple requests. However, after some time (can not say the exact time), I'm getting the below exception if I invoke the above functionality.</p>\n<pre><code>java.lang.IllegalStateException: state should be: ClientSession from same MongoClient\n    at com.mongodb.assertions.Assertions.isTrue(Assertions.java:72)\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.getClientSession(MongoClientDelegate.java:279)\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:206)\n    at com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1053)\n    at com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:503)\n    at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:499)\n    at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:492)\n    at mongo.impl.InsertDocuments.insertItem(InsertDocuments.java:24)\n</code></pre>\n<p>and continues failing all the time...</p>\n<p>I'm using the following client connector to connect from my JAVA application</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n    &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\n    &lt;version&gt;3.12.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Does anyone know why this is happening?</p>\n"},{"tags":["java","mysql","glassfish","connection","pool"],"comments":[{"owner":{"account_id":1192700,"reputation":2253,"user_id":1165132,"display_name":"Adrian"},"score":1,"creation_date":1355927419,"post_id":13950496,"comment_id":19246421,"body_markdown":"Try using the same or smaller timeout values within your application and database. For instance if your applications idle timeout is higher than the one from the database your application will try to reuse a connection which was already closed by the database server.","body":"Try using the same or smaller timeout values within your application and database. For instance if your applications idle timeout is higher than the one from the database your application will try to reuse a connection which was already closed by the database server."},{"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"score":0,"creation_date":1356615597,"post_id":13950496,"comment_id":19423874,"body_markdown":"Does it help increasing pool resize quantity? See the reason [here](http://docs.oracle.com/cd/E19316-01/820-4343/abehq/index.html)","body":"Does it help increasing pool resize quantity? See the reason <a href=\"http://docs.oracle.com/cd/E19316-01/820-4343/abehq/index.html\" rel=\"nofollow noreferrer\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1390373321,"creation_date":1355914262,"answer_id":13950687,"question_id":13950496,"body_markdown":"It most likely means that the database has restarted or the network connection to the database has been broken (e.g. a NAT connection has timed out) ... and your webapp is trying to use a stale database connection.\r\n\r\nIf the problem persists after restarting the web container, it could be something more serious.\r\n\r\n--------------------------\r\n\r\nYou asked the following:\r\n\r\n    How can the NumConnFree become 161 as I have Maximum Pool Size = 100 ?\r\n    How can the NumConnUsed become -136, a negative number ?\r\n    How can the NumConnDestroyed &gt; NumConnCreated ? \r\n\r\nOn the face of it, these don&#39;t make sense.  However, they could simply be the result of some usage counters being updated in a non-thread-safe way.  This is not necessarily related to your original problem.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>It most likely means that the database has restarted or the network connection to the database has been broken (e.g. a NAT connection has timed out) ... and your webapp is trying to use a stale database connection.</p>\n\n<p>If the problem persists after restarting the web container, it could be something more serious.</p>\n\n<hr>\n\n<p>You asked the following:</p>\n\n<pre><code>How can the NumConnFree become 161 as I have Maximum Pool Size = 100 ?\nHow can the NumConnUsed become -136, a negative number ?\nHow can the NumConnDestroyed &gt; NumConnCreated ? \n</code></pre>\n\n<p>On the face of it, these don't make sense.  However, they could simply be the result of some usage counters being updated in a non-thread-safe way.  This is not necessarily related to your original problem.</p>\n"},{"tags":[],"owner":{"account_id":2065327,"reputation":611,"user_id":1840928,"accept_rate":60,"display_name":"Puneet"},"down_vote_count":4,"up_vote_count":13,"is_accepted":false,"score":9,"last_activity_date":1356679532,"creation_date":1356679532,"answer_id":14066125,"question_id":13950496,"body_markdown":"This is EndOfFileException in java, happens when your cursor start point is on the end point or when database connection closed because of some unexpected exception.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>This is EndOfFileException in java, happens when your cursor start point is on the end point or when database connection closed because of some unexpected exception.</p>\n"},{"tags":[],"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1675352874,"creation_date":1356713277,"answer_id":14072822,"question_id":13950496,"body_markdown":"The connection has failed, possibly due to a firewall idle-timeout, etc. If you don&#39;t have your JDBC driver configured to reconnect on failure, then this error will not go away unless you open a new connection.\r\n\r\nIf you are using a database connection pool (you *are* using one, right?), then you probably want to enable it&#39;s connection-checking features like issuing a query to check to see if the connection is working before handing it back to the application. In Apache commons-dbcp, this is called the `validationQuery` and is often set to something simple like `SELECT 1`.\r\n\r\nSince you are using MySQL, you ought to use a Connector/J-specific &quot;ping&quot; query that is lighter-weight than actually issuing a true SQL query and set your validation query to `/* ping */ SELECT 1` (the ping part [needs to be exact](https://docs.oracle.com/cd/E17952_01/connector-j-5.1-relnotes-en/news-5-1-3.html)).","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>The connection has failed, possibly due to a firewall idle-timeout, etc. If you don't have your JDBC driver configured to reconnect on failure, then this error will not go away unless you open a new connection.</p>\n<p>If you are using a database connection pool (you <em>are</em> using one, right?), then you probably want to enable it's connection-checking features like issuing a query to check to see if the connection is working before handing it back to the application. In Apache commons-dbcp, this is called the <code>validationQuery</code> and is often set to something simple like <code>SELECT 1</code>.</p>\n<p>Since you are using MySQL, you ought to use a Connector/J-specific &quot;ping&quot; query that is lighter-weight than actually issuing a true SQL query and set your validation query to <code>/* ping */ SELECT 1</code> (the ping part <a href=\"https://docs.oracle.com/cd/E17952_01/connector-j-5.1-relnotes-en/news-5-1-3.html\" rel=\"nofollow noreferrer\">needs to be exact</a>).</p>\n"},{"tags":[],"owner":{"account_id":60096,"reputation":40513,"user_id":179630,"accept_rate":64,"display_name":"gerrytan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1357191761,"creation_date":1357191761,"answer_id":14133656,"question_id":13950496,"body_markdown":"While I don&#39;t have definitive solutions, it seems something is interfering communication between the app server and db. Following are few things you can try to isolate the problems:\r\n\r\n - Try to determine wether this is mysql problem or java code problem. Try connect to mysql using the command line tool from the same host as the app server and issue similar SQL to perform login. Test using a simple java code that does a select, deploy it to the same infrastructure, see what happen etc. Also check the mysql server log, see if you can find anything useful\r\n\r\n - There are two way an idle connection get closed: by the connection pool code that runs inside app server, or by mysql itself. Make sure you check the config on both sides\r\n\r\n - Check if any network infrastructure config has changed recently. Was there any new firewall rule in place interfering with app server &lt;--&gt; mysql connectivity? Was there any settings that prohibits open TCP connection idling longer than X?\r\n\r\n - Try a different connection pooling library just to eliminate the possibility it&#39;s the connection pooling\r\n\r\nGood luck","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>While I don't have definitive solutions, it seems something is interfering communication between the app server and db. Following are few things you can try to isolate the problems:</p>\n\n<ul>\n<li><p>Try to determine wether this is mysql problem or java code problem. Try connect to mysql using the command line tool from the same host as the app server and issue similar SQL to perform login. Test using a simple java code that does a select, deploy it to the same infrastructure, see what happen etc. Also check the mysql server log, see if you can find anything useful</p></li>\n<li><p>There are two way an idle connection get closed: by the connection pool code that runs inside app server, or by mysql itself. Make sure you check the config on both sides</p></li>\n<li><p>Check if any network infrastructure config has changed recently. Was there any new firewall rule in place interfering with app server &lt;--> mysql connectivity? Was there any settings that prohibits open TCP connection idling longer than X?</p></li>\n<li><p>Try a different connection pooling library just to eliminate the possibility it's the connection pooling</p></li>\n</ul>\n\n<p>Good luck</p>\n"},{"tags":[],"owner":{"account_id":1738132,"reputation":21,"user_id":1590225,"display_name":"Mani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357207912,"creation_date":1357207912,"answer_id":14136747,"question_id":13950496,"body_markdown":"It might be Firewall related problem.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>It might be Firewall related problem.</p>\n"},{"tags":[],"owner":{"account_id":8914098,"reputation":51,"user_id":6653231,"display_name":"macieks"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478561972,"creation_date":1478561972,"answer_id":40476616,"question_id":13950496,"body_markdown":"I had this problem but I it wasn&#39;t possible for me to make changes in MySQL database configuration. Therefore I ensured that in my sql connector class the connection is always closed before it&#39;s initiated again. Something like:\r\n\r\n    public static Connection getConnection() {\r\n\r\n        if (DatabaseConnnector.conn == null) {\r\n            initConn();\r\n        } else {\r\n            try {\r\n                DatabaseConnnector.conn.close();          \r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n              initConn();\r\n        }\r\n        return DatabaseConnnector.conn;\r\n    }\r\n\r\nAnd this solved the problem. \r\n","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>I had this problem but I it wasn't possible for me to make changes in MySQL database configuration. Therefore I ensured that in my sql connector class the connection is always closed before it's initiated again. Something like:</p>\n\n<pre><code>public static Connection getConnection() {\n\n    if (DatabaseConnnector.conn == null) {\n        initConn();\n    } else {\n        try {\n            DatabaseConnnector.conn.close();          \n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n          initConn();\n    }\n    return DatabaseConnnector.conn;\n}\n</code></pre>\n\n<p>And this solved the problem. </p>\n"},{"tags":[],"owner":{"account_id":14619189,"reputation":61,"user_id":10558422,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572359919,"creation_date":1572359919,"answer_id":58609658,"question_id":13950496,"body_markdown":"Got this error in PHPStorm while trying to connect and/or get some data from mysql server. Checkbox &quot;single connection mode&quot; fixed things for me.\r\nI&#39;ll just leave it here. Perhaps this will help some martyr in the future.\r\n\r\nhttps://www.jetbrains.com/help/phpstorm/configuring-database-connections.html","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>Got this error in PHPStorm while trying to connect and/or get some data from mysql server. Checkbox \"single connection mode\" fixed things for me.\nI'll just leave it here. Perhaps this will help some martyr in the future.</p>\n\n<p><a href=\"https://www.jetbrains.com/help/phpstorm/configuring-database-connections.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/phpstorm/configuring-database-connections.html</a></p>\n"},{"tags":[],"owner":{"account_id":10316841,"reputation":11,"user_id":7610917,"display_name":"zhuojl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587519050,"creation_date":1587519050,"answer_id":61355853,"question_id":13950496,"body_markdown":"i meet the same problem, it caused by lock for too much time.\r\n\r\nwe have a long transcation A, if execute it, the other trascation will be locked util transcation A finished, so the others always be killed by our mysql tool(pt-kill)","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>i meet the same problem, it caused by lock for too much time.</p>\n\n<p>we have a long transcation A, if execute it, the other trascation will be locked util transcation A finished, so the others always be killed by our mysql tool(pt-kill)</p>\n"},{"tags":[],"owner":{"account_id":1351343,"reputation":1331,"user_id":1290868,"display_name":"myuce"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632494186,"creation_date":1632493873,"answer_id":69316748,"question_id":13950496,"body_markdown":"In my case, it was the java mysql driver/connector version. I.e. (Even if the server was version 8) somehow when I used mysql driver/connector version 5.1.44, then it started working.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>In my case, it was the java mysql driver/connector version. I.e. (Even if the server was version 8) somehow when I used mysql driver/connector version 5.1.44, then it started working.</p>\n"},{"tags":[],"owner":{"account_id":9569662,"reputation":1,"user_id":7107701,"display_name":"Hero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670813116,"creation_date":1670813116,"answer_id":74766172,"question_id":13950496,"body_markdown":"it may be the server connection is full\r\ntry to reduce the server connection or modify the max connection param","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>it may be the server connection is full\ntry to reduce the server connection or modify the max connection param</p>\n"},{"tags":[],"owner":{"account_id":3603762,"reputation":1569,"user_id":3006465,"display_name":"electrobabe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693574770,"creation_date":1693574770,"answer_id":77023501,"question_id":13950496,"body_markdown":"In our case, we got the error &quot;Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedl lost&quot; (in IntelliJ) because of a Docker error.\r\n\r\nWe fixed it with simply running:\r\n\r\n    docker-compose --profile microservices --compatibility -f docker-compose.services.yml up\r\n\r\n","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>In our case, we got the error &quot;Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedl lost&quot; (in IntelliJ) because of a Docker error.</p>\n<p>We fixed it with simply running:</p>\n<pre><code>docker-compose --profile microservices --compatibility -f docker-compose.services.yml up\n</code></pre>\n"}],"owner":{"account_id":1418089,"reputation":2926,"user_id":1343275,"accept_rate":57,"display_name":"mukund"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96256,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":11,"score":54,"last_activity_date":1693574770,"creation_date":1355913594,"question_id":13950496,"body_markdown":"This question has been asked a couple of times in SO and many times in other sites. But I didn&#39;t get any satisfiable answer.  \r\n  \r\nMy problem:  \r\nI have a java web application which uses simple **JDBC** to connect to **mysql** database through **Glassfish** application server.  \r\n  \r\nI have used connection pooling in glassfish server with the following configurations:  \r\nInitial Pool Size: 25  \r\nMaximum Pool Size: 100  \r\nPool Resize Quantity: 2  \r\nIdle Timeout: 300 seconds  \r\nMax Wait Time: 60,000 milliseconds  \r\n  \r\nThe application has been deployed for last 3 months and it was running flawlessly too.  \r\nBut from last 2 days the following error is coming at the time of login.  \r\n  \r\n**Partial StackTrace**  \r\n  \r\n    com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed due to underlying exception/error:  \r\n  \r\n    ** BEGIN NESTED EXCEPTION **  \r\n  \r\n    com.mysql.jdbc.CommunicationsException  \r\n    MESSAGE: Communications link failure due to underlying exception:  \r\n  \r\n    ** BEGIN NESTED EXCEPTION **  \r\n  \r\n    java.io.EOFException  \r\n    MESSAGE: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \r\n  \r\n    STACKTRACE:  \r\n  \r\n    java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \r\n    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1997)  \r\n    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)  \r\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)  \r\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)  \r\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)  \r\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:3256)  \r\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)  \r\n    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1448)  \r\n    ............  \r\n    ............  \r\n    my application traces....  \r\n  \r\n  \r\n**What caused this error suddenly ?** I have lost a lot of time for this.\r\n  \r\n**EDIT :** The problem even persists after restarting the server. As per DBA two of the important mysql server configurations are:  \r\n**wait_timeout :** 1800 seconds  \r\n**connect_timeout :** 10 seconds  \r\n**NOTE :** Other applications deployed in the same server connecting to the same database and using different pools are running smoothly.  \r\n  \r\n**EDIT-2 :** After reading a lot of things and expecting some positive outcome I made these changes to my connection pool.  \r\n  \r\n**Max Wait Time :** 0 (previously it was 60 seconds)  \r\n**Connection Validation :** Required  \r\n**Validation Method :** table  \r\n**Table Name :** Demo  \r\n**Validate Atmost Once :** 40 seconds  \r\n**Creation Retry Attempts :** 1  \r\n**Retry Intervals :** 5 seconds  \r\n**Max Connection Usage :** 5  \r\n  \r\nAnd this worked as the application is running for 3 days consistently. But I got a very strange and interesting result of out this. While monitoring the connection pool, I found these figures:  \r\n  \r\n**NumConnAcquired :** 44919 Count  \r\n**NumConnReleased :** 44919 Count  \r\n**NumConnCreated :** 9748 Count  \r\n**NumConnDestroyed :** 9793 Count  \r\n**NumConnFailedValidation :** 70 Count  \r\n**NumConnFree :** 161 Count  \r\n**NumConnUsed :** -136 Count  \r\n  \r\n**How** can the `NumConnFree` become 161 as I have `Maximum Pool Size = 100` **?**  \r\n**How** can the `NumConnUsed` become -136, a *negative* number **?**  \r\n**How** can the `NumConnDestroyed` **&gt;** `NumConnCreated` **?**  \r\n","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>This question has been asked a couple of times in SO and many times in other sites. But I didn't get any satisfiable answer.  </p>\n\n<p>My problem:<br>\nI have a java web application which uses simple <strong>JDBC</strong> to connect to <strong>mysql</strong> database through <strong>Glassfish</strong> application server.  </p>\n\n<p>I have used connection pooling in glassfish server with the following configurations:<br>\nInitial Pool Size: 25<br>\nMaximum Pool Size: 100<br>\nPool Resize Quantity: 2<br>\nIdle Timeout: 300 seconds<br>\nMax Wait Time: 60,000 milliseconds  </p>\n\n<p>The application has been deployed for last 3 months and it was running flawlessly too.<br>\nBut from last 2 days the following error is coming at the time of login.  </p>\n\n<p><strong>Partial StackTrace</strong>  </p>\n\n<pre><code>com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed due to underlying exception/error:  \n\n** BEGIN NESTED EXCEPTION **  \n\ncom.mysql.jdbc.CommunicationsException  \nMESSAGE: Communications link failure due to underlying exception:  \n\n** BEGIN NESTED EXCEPTION **  \n\njava.io.EOFException  \nMESSAGE: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \n\nSTACKTRACE:  \n\njava.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \nat com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1997)  \nat com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)  \nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)  \nat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)  \nat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)  \nat com.mysql.jdbc.Connection.execSQL(Connection.java:3256)  \nat com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)  \nat com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1448)  \n............  \n............  \nmy application traces....  \n</code></pre>\n\n<p><strong>What caused this error suddenly ?</strong> I have lost a lot of time for this.</p>\n\n<p><strong>EDIT :</strong> The problem even persists after restarting the server. As per DBA two of the important mysql server configurations are:<br>\n<strong>wait_timeout :</strong> 1800 seconds<br>\n<strong>connect_timeout :</strong> 10 seconds<br>\n<strong>NOTE :</strong> Other applications deployed in the same server connecting to the same database and using different pools are running smoothly.  </p>\n\n<p><strong>EDIT-2 :</strong> After reading a lot of things and expecting some positive outcome I made these changes to my connection pool.  </p>\n\n<p><strong>Max Wait Time :</strong> 0 (previously it was 60 seconds)<br>\n<strong>Connection Validation :</strong> Required<br>\n<strong>Validation Method :</strong> table<br>\n<strong>Table Name :</strong> Demo<br>\n<strong>Validate Atmost Once :</strong> 40 seconds<br>\n<strong>Creation Retry Attempts :</strong> 1<br>\n<strong>Retry Intervals :</strong> 5 seconds<br>\n<strong>Max Connection Usage :</strong> 5  </p>\n\n<p>And this worked as the application is running for 3 days consistently. But I got a very strange and interesting result of out this. While monitoring the connection pool, I found these figures:  </p>\n\n<p><strong>NumConnAcquired :</strong> 44919 Count<br>\n<strong>NumConnReleased :</strong> 44919 Count<br>\n<strong>NumConnCreated :</strong> 9748 Count<br>\n<strong>NumConnDestroyed :</strong> 9793 Count<br>\n<strong>NumConnFailedValidation :</strong> 70 Count<br>\n<strong>NumConnFree :</strong> 161 Count<br>\n<strong>NumConnUsed :</strong> -136 Count  </p>\n\n<p><strong>How</strong> can the <code>NumConnFree</code> become 161 as I have <code>Maximum Pool Size = 100</code> <strong>?</strong><br>\n<strong>How</strong> can the <code>NumConnUsed</code> become -136, a <em>negative</em> number <strong>?</strong><br>\n<strong>How</strong> can the <code>NumConnDestroyed</code> <strong>></strong> <code>NumConnCreated</code> <strong>?</strong>  </p>\n"},{"tags":["java","spring-mvc","freemarker"],"answers":[{"tags":[],"owner":{"account_id":297076,"reputation":1893,"user_id":602398,"display_name":"Dirk"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1304508514,"creation_date":1304492413,"answer_id":5879673,"question_id":5879492,"body_markdown":"You could do something like\r\n  \r\n    &lt;#list payrollYears as year&gt; \r\n          &lt;option value=&quot;${year.year}&quot; &lt;#if !(year_has_next)&gt;selected&lt;/#if&gt; &gt;${year.yeardesc}&lt;/option&gt;\r\n    &lt;/#list&gt; ","title":"get last record from list in freemarker","body":"<p>You could do something like</p>\n\n<pre><code>&lt;#list payrollYears as year&gt; \n      &lt;option value=\"${year.year}\" &lt;#if !(year_has_next)&gt;selected&lt;/#if&gt; &gt;${year.yeardesc}&lt;/option&gt;\n&lt;/#list&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7647173,"reputation":2122,"user_id":5797400,"display_name":"jpllosa"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1462886932,"creation_date":1462886932,"answer_id":37140033,"question_id":5879492,"body_markdown":"For FreeMarker 2.3.24, you can do something like `year?has_next` instead of `year_has_next`.\r\n\r\n - `item_has_next` (deprecated by `item?has_next`): Boolean value that tells if the current item is the last in the sequence or not.\r\n\r\nSee [FreeMarker Docs][1]\r\n\r\n\r\n  [1]: http://freemarker.org/docs/ref_directive_list.html","title":"get last record from list in freemarker","body":"<p>For FreeMarker 2.3.24, you can do something like <code>year?has_next</code> instead of <code>year_has_next</code>.</p>\n\n<ul>\n<li><code>item_has_next</code> (deprecated by <code>item?has_next</code>): Boolean value that tells if the current item is the last in the sequence or not.</li>\n</ul>\n\n<p>See <a href=\"http://freemarker.org/docs/ref_directive_list.html\" rel=\"noreferrer\">FreeMarker Docs</a></p>\n"},{"tags":[],"owner":{"account_id":14651859,"reputation":67,"user_id":10581659,"display_name":"Vibhu Garg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1541053986,"creation_date":1540983251,"answer_id":53081676,"question_id":5879492,"body_markdown":"    &lt;#list body.result as school_names_list&gt;\r\n\t{\r\n\t  &quot;NAME&quot;: &lt;#if school_names_list.NAME??&gt;&quot;${school_names_list.NAME}&quot;&lt;#else&gt;&quot;&quot;&lt;/#if&gt;,\r\n\t  &quot;ADDRESS&quot;: &lt;#if school_names_list.ADDRESS??&gt;&quot;${school_names_list.ADDRESS}&quot;&lt;#else&gt;&quot;&quot;&lt;/#if&gt;,\r\n\t   &lt;#if school_names_list?is_last&gt;&lt;#else&gt;,&lt;/#if&gt;\r\n\t&lt;/#list&gt;\r\n\t\r\n\t\r\n\t//Here **school_names_list** is a list and we check the last element though **school_names_list?is_last** (where list name is school_names_list)\r\n\t\r\n\t//In this example, if it the last element, ***we&#39;ll avoid adding &quot;,&quot; else we add &quot;,&quot; as per JSON rules of a list.***","title":"get last record from list in freemarker","body":"<pre><code>&lt;#list body.result as school_names_list&gt;\n{\n  \"NAME\": &lt;#if school_names_list.NAME??&gt;\"${school_names_list.NAME}\"&lt;#else&gt;\"\"&lt;/#if&gt;,\n  \"ADDRESS\": &lt;#if school_names_list.ADDRESS??&gt;\"${school_names_list.ADDRESS}\"&lt;#else&gt;\"\"&lt;/#if&gt;,\n   &lt;#if school_names_list?is_last&gt;&lt;#else&gt;,&lt;/#if&gt;\n&lt;/#list&gt;\n\n\n//Here **school_names_list** is a list and we check the last element though **school_names_list?is_last** (where list name is school_names_list)\n\n//In this example, if it the last element, ***we'll avoid adding \",\" else we add \",\" as per JSON rules of a list.***\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13356990,"reputation":21,"user_id":9640213,"display_name":"Marius Hansen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693574629,"creation_date":1693574629,"answer_id":77023491,"question_id":5879492,"body_markdown":"Old question, but you can use `is_last`.\r\n\r\nUsing your code you could write your code like this;\r\n```\r\n&lt;select name=&quot;showYears&quot;&gt;\r\n  &lt;#list payrollYears as year&gt;\r\n    &lt;#if year?is_last&gt;\r\n      &lt;option value=&quot;${year.year}&quot; selected&gt;${year.yeardesc}&lt;/option&gt;\r\n    &lt;#else&gt;\r\n      &lt;option value=&quot;${year.year}&quot;&gt;${year.yeardesc}&lt;/option&gt;\r\n    &lt;/#if&gt;\r\n  &lt;/#list&gt;        \r\n&lt;/select&gt;\r\n```\r\n\r\n----\r\n\r\nA better way would be to add the `selected` straight to the HTML, and drop the whole `if` check around it, but **not entierly sure** how to add this directly to **HTML as valid syntax**.\r\n\r\n\r\nSo this probably WON&#39;T work, but my line of thinking is something like this;\r\n\r\n```\r\n&lt;select name=&quot;showYears&quot;&gt;\r\n  &lt;#list payrollYears as year&gt;\r\n    &lt;option value=&quot;${year.year}&quot; ${year?is_last?then(&#39;selected&#39;, &#39;&#39;)}&gt;${year.yeardesc}&lt;/option&gt;\r\n  &lt;/#list&gt;        \r\n&lt;/select&gt;\r\n```","title":"get last record from list in freemarker","body":"<p>Old question, but you can use <code>is_last</code>.</p>\n<p>Using your code you could write your code like this;</p>\n<pre><code>&lt;select name=&quot;showYears&quot;&gt;\n  &lt;#list payrollYears as year&gt;\n    &lt;#if year?is_last&gt;\n      &lt;option value=&quot;${year.year}&quot; selected&gt;${year.yeardesc}&lt;/option&gt;\n    &lt;#else&gt;\n      &lt;option value=&quot;${year.year}&quot;&gt;${year.yeardesc}&lt;/option&gt;\n    &lt;/#if&gt;\n  &lt;/#list&gt;        \n&lt;/select&gt;\n</code></pre>\n<hr />\n<p>A better way would be to add the <code>selected</code> straight to the HTML, and drop the whole <code>if</code> check around it, but <strong>not entierly sure</strong> how to add this directly to <strong>HTML as valid syntax</strong>.</p>\n<p>So this probably WON'T work, but my line of thinking is something like this;</p>\n<pre><code>&lt;select name=&quot;showYears&quot;&gt;\n  &lt;#list payrollYears as year&gt;\n    &lt;option value=&quot;${year.year}&quot; ${year?is_last?then('selected', '')}&gt;${year.yeardesc}&lt;/option&gt;\n  &lt;/#list&gt;        \n&lt;/select&gt;\n</code></pre>\n"}],"owner":{"account_id":380106,"reputation":55,"user_id":733912,"display_name":"Anil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15665,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":5879673,"answer_count":4,"score":5,"last_activity_date":1693574629,"creation_date":1304491043,"question_id":5879492,"body_markdown":"          \r\n\r\n        &lt;select name=&quot;showYears&quot;&gt;\r\n\t\t\t\t&lt;#list payrollYears as year&gt; \r\n\t\t\t\t\t&lt;option value=&quot;${year.year}&quot;&gt;${year.yeardesc}&lt;/option&gt;\r\n\t\t\t\t&lt;/#list&gt;\t\t\r\n\t\t&lt;/select&gt;\r\n\t\r\n\r\n\r\ni am getting payrollyears list from my controller and i am iterating the list in freemarker and adding value to select box i want my last value of list should be selected value in last how can i do that ","title":"get last record from list in freemarker","body":"<pre><code>    &lt;select name=\"showYears\"&gt;\n            &lt;#list payrollYears as year&gt; \n                &lt;option value=\"${year.year}\"&gt;${year.yeardesc}&lt;/option&gt;\n            &lt;/#list&gt;        \n    &lt;/select&gt;\n</code></pre>\n\n<p>i am getting payrollyears list from my controller and i am iterating the list in freemarker and adding value to select box i want my last value of list should be selected value in last how can i do that </p>\n"},{"tags":["javascript","java","println","system.out"],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1325707783,"creation_date":1325707249,"answer_id":8733196,"question_id":8733179,"body_markdown":"[`console.log()`][1].\r\n\r\nChrome, Safari, and IE 8+ come with built-in consoles (as part of a larger set of development tools). If you&#39;re using Firefox, [getfirebug.com](http://getfirebug.com).\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en/Debugging_JavaScript","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p><a href=\"https://developer.mozilla.org/en/Debugging_JavaScript\" rel=\"nofollow\"><code>console.log()</code></a>.</p>\n\n<p>Chrome, Safari, and IE 8+ come with built-in consoles (as part of a larger set of development tools). If you're using Firefox, <a href=\"http://getfirebug.com\" rel=\"nofollow\">getfirebug.com</a>.</p>\n"},{"tags":[],"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1325710353,"creation_date":1325707264,"answer_id":8733199,"question_id":8733179,"body_markdown":"Essentially `console.log(&quot;Put a message here.&quot;)` if the browser has a supporting console.\r\n\r\nAnother typical debugging method is using alerts, `alert(&quot;Put a message here.&quot;)`\r\n\r\n**RE: Update II**\r\n\r\nThis seems to make sense, you are trying to automate QUnit tests, from what I have read on QUnit this is an in-browser unit testing suite/library. QUnit expects to run in a browser and therefore expects the browser to recognize all of the JavaScript functions you are calling. \r\n\r\nBased on your Maven configuration it appears you are using Rhino to execute your Javascript at the command line/terminal. This is not going to work for testing browser specifics, you would likely need to look into Selenium for this. If you do not care about testing your JavaScript in a browser but are only testing JavaScript at a command line level (for reason I would not be familiar with) it appears that Rhino recognizes a **`print()`** method for evaluating expressions and printing them out. Checkout [this documentation][1].\r\n\r\nThese links might be of interest to you.\r\n\r\n[QUnit and Automated Testing][2]\r\n\r\n[JavaScript Unit Tests with QUnit][3]\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en/Rhino_Shell\r\n  [2]: http://forum.jquery.com/topic/qunit-and-automated-testing\r\n  [3]: http://whileonefork.blogspot.com/2011/07/javascript-unit-tests-with-qunit-ant.html","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>Essentially <code>console.log(\"Put a message here.\")</code> if the browser has a supporting console.</p>\n\n<p>Another typical debugging method is using alerts, <code>alert(\"Put a message here.\")</code></p>\n\n<p><strong>RE: Update II</strong></p>\n\n<p>This seems to make sense, you are trying to automate QUnit tests, from what I have read on QUnit this is an in-browser unit testing suite/library. QUnit expects to run in a browser and therefore expects the browser to recognize all of the JavaScript functions you are calling. </p>\n\n<p>Based on your Maven configuration it appears you are using Rhino to execute your Javascript at the command line/terminal. This is not going to work for testing browser specifics, you would likely need to look into Selenium for this. If you do not care about testing your JavaScript in a browser but are only testing JavaScript at a command line level (for reason I would not be familiar with) it appears that Rhino recognizes a <strong><code>print()</code></strong> method for evaluating expressions and printing them out. Checkout <a href=\"https://developer.mozilla.org/en/Rhino_Shell\" rel=\"noreferrer\">this documentation</a>.</p>\n\n<p>These links might be of interest to you.</p>\n\n<p><a href=\"http://forum.jquery.com/topic/qunit-and-automated-testing\" rel=\"noreferrer\">QUnit and Automated Testing</a></p>\n\n<p><a href=\"http://whileonefork.blogspot.com/2011/07/javascript-unit-tests-with-qunit-ant.html\" rel=\"noreferrer\">JavaScript Unit Tests with QUnit</a></p>\n"},{"tags":[],"owner":{"account_id":982488,"reputation":6452,"user_id":1001866,"accept_rate":75,"display_name":"Matt H"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1325707354,"creation_date":1325707354,"answer_id":8733221,"question_id":8733179,"body_markdown":"There isn&#39;t one, at least, not unless you are using a &quot;developer&quot; tool of some kind in your browser, e.g. Firebug in Firefox or the Developer tools in Safari. Then you can usually use `console.log`.\r\n\r\nIf I&#39;m doing something in, say, an iOS device, I might add a `&lt;div id=&quot;debug&quot; /&gt;` and then log to it.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>There isn't one, at least, not unless you are using a \"developer\" tool of some kind in your browser, e.g. Firebug in Firefox or the Developer tools in Safari. Then you can usually use <code>console.log</code>.</p>\n\n<p>If I'm doing something in, say, an iOS device, I might add a <code>&lt;div id=\"debug\" /&gt;</code> and then log to it.</p>\n"},{"tags":[],"owner":{"account_id":911378,"reputation":1747,"user_id":945157,"accept_rate":80,"display_name":"jamesTheProgrammer"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1325708323,"creation_date":1325708323,"answer_id":8733430,"question_id":8733179,"body_markdown":"You can always simply add an alert() prompt anywhere in a function.  Especially useful for knowing if a function was called, if a function completed or where a function fails.\r\n\r\n    alert(&#39;start of function x&#39;);\r\n    alert(&#39;end of function y&#39;);\r\n    alert(&#39;about to call function a&#39;);\r\n    alert(&#39;returned from function b&#39;);\r\n\r\nYou get the idea.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>You can always simply add an alert() prompt anywhere in a function.  Especially useful for knowing if a function was called, if a function completed or where a function fails.</p>\n\n<pre><code>alert('start of function x');\nalert('end of function y');\nalert('about to call function a');\nalert('returned from function b');\n</code></pre>\n\n<p>You get the idea.</p>\n"},{"tags":[],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1325708505,"creation_date":1325708505,"answer_id":8733468,"question_id":8733179,"body_markdown":"I found a solution:\r\n\r\n    print(&quot;My message here&quot;);","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I found a solution:</p>\n\n<pre><code>print(\"My message here\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":364094,"reputation":246,"user_id":708280,"accept_rate":40,"display_name":"Iqbal"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1325800296,"creation_date":1325800296,"answer_id":8750353,"question_id":8733179,"body_markdown":"I&#39;m also about to ask the same question. But from what I&#39;ve learned from codeacademy.com below code is enough to display the output or text?\r\n\r\n    print(&quot;hello world&quot;)  ","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I'm also about to ask the same question. But from what I've learned from codeacademy.com below code is enough to display the output or text?</p>\n\n<pre><code>print(\"hello world\")  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1160671,"reputation":6006,"user_id":1140227,"accept_rate":72,"display_name":"George"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379920795,"creation_date":1379920795,"answer_id":18953701,"question_id":8733179,"body_markdown":"I&#39;m using Chrome and **print()** literally prints the text on paper. This is what works for me:\r\n\r\n    document.write(&quot;My message&quot;);","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I'm using Chrome and <strong>print()</strong> literally prints the text on paper. This is what works for me:</p>\n\n<pre><code>document.write(\"My message\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3399193,"reputation":1046,"user_id":3195688,"display_name":"Erikas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554820500,"creation_date":1554817676,"answer_id":55594436,"question_id":8733179,"body_markdown":"In java `System.out.println()` prints something to console. In javascript same can be achieved using `console.log()`.\r\n\r\nYou need to view browser console by pressing `F12` key which opens developer tool and then switch to `console` tab.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>In java <code>System.out.println()</code> prints something to console. In javascript same can be achieved using <code>console.log()</code>.</p>\n\n<p>You need to view browser console by pressing <code>F12</code> key which opens developer tool and then switch to <code>console</code> tab.</p>\n"}],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151880,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":8733199,"answer_count":8,"score":20,"last_activity_date":1693574246,"creation_date":1325707191,"question_id":8733179,"body_markdown":"I am writing some tests for Javascript code and I need to dump some messages during the compile process when errors are encountered.\r\n\r\nIs there any equivalent to Java&#39;s `System.out.println()` in Javascript?\r\n\r\n**P.S.**: I also need to dump debug statements while implementing tests.\r\n\r\n**UPDATE**\r\n\r\nI am using a maven plugin on a file containing all merged tests:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                    &lt;phase&gt;test&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;java&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;org.mozilla.javascript.tools.shell.Main&lt;/mainClass&gt;\r\n                    &lt;arguments&gt;\r\n                        &lt;argument&gt;-opt&lt;/argument&gt;\r\n                        &lt;argument&gt;-1&lt;/argument&gt;\r\n                        &lt;argument&gt;${basedir}/src/main/webapp/html/js/test/test.js&lt;/argument&gt;\r\n                    &lt;/arguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n**UPDATE II**\r\n\r\nI tried `console.log(&quot;...&quot;)`, but I get:\r\n\r\n    js: &quot;src/main/webapp/html/js/concat/tests_all.js&quot;, line 147:\r\n    uncaught JavaScript runtime exception: ReferenceError: &quot;console&quot; is not defined\r\n\r\nThe code I am testing is a set of functions (like in a library). I am using QUnit.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I am writing some tests for Javascript code and I need to dump some messages during the compile process when errors are encountered.</p>\n\n<p>Is there any equivalent to Java's <code>System.out.println()</code> in Javascript?</p>\n\n<p><strong>P.S.</strong>: I also need to dump debug statements while implementing tests.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I am using a maven plugin on a file containing all merged tests:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                &lt;phase&gt;test&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;java&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;org.mozilla.javascript.tools.shell.Main&lt;/mainClass&gt;\n                &lt;arguments&gt;\n                    &lt;argument&gt;-opt&lt;/argument&gt;\n                    &lt;argument&gt;-1&lt;/argument&gt;\n                    &lt;argument&gt;${basedir}/src/main/webapp/html/js/test/test.js&lt;/argument&gt;\n                &lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p><strong>UPDATE II</strong></p>\n\n<p>I tried <code>console.log(\"...\")</code>, but I get:</p>\n\n<pre><code>js: \"src/main/webapp/html/js/concat/tests_all.js\", line 147:\nuncaught JavaScript runtime exception: ReferenceError: \"console\" is not defined\n</code></pre>\n\n<p>The code I am testing is a set of functions (like in a library). I am using QUnit.</p>\n"},{"tags":["java","spring","hibernate","hibernate-envers"],"answers":[{"tags":[],"owner":{"account_id":149784,"reputation":8168,"user_id":362531,"accept_rate":69,"display_name":"adamw"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411145289,"creation_date":1411145289,"answer_id":25938775,"question_id":25931281,"body_markdown":"Do you want to query the revision entity itself, or retrieve audited objects including the revision entity?\r\n\r\nIf you want to query the revision entity itself, it&#39;s a completely normal entity. Just query it as all other entities - not through an `AuditQuery`, but using an `EntityManager` or `Session`.\r\n\r\nIf you want to retrieve audited objects including the revision entity, then the above is correct, provided that there exist revision data for the revisions at which the object changed. Do you see data in the database corresponding to the returned revisions?","title":"How to query RevisionEntity in hibernate envers","body":"<p>Do you want to query the revision entity itself, or retrieve audited objects including the revision entity?</p>\n\n<p>If you want to query the revision entity itself, it's a completely normal entity. Just query it as all other entities - not through an <code>AuditQuery</code>, but using an <code>EntityManager</code> or <code>Session</code>.</p>\n\n<p>If you want to retrieve audited objects including the revision entity, then the above is correct, provided that there exist revision data for the revisions at which the object changed. Do you see data in the database corresponding to the returned revisions?</p>\n"},{"tags":[],"owner":{"account_id":2713080,"reputation":96,"user_id":2341035,"display_name":"Gregory"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418070053,"creation_date":1418070053,"answer_id":27366199,"question_id":25931281,"body_markdown":"You may need to actually use the object. Hibernate/Envers will return a lazy initialized object, and debuggers will probably not be able to see the values. Once you call the getters in code, the proper values should be populated.","title":"How to query RevisionEntity in hibernate envers","body":"<p>You may need to actually use the object. Hibernate/Envers will return a lazy initialized object, and debuggers will probably not be able to see the values. Once you call the getters in code, the proper values should be populated.</p>\n"},{"tags":[],"owner":{"account_id":18486228,"reputation":13,"user_id":13467124,"display_name":"Mihai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693574223,"creation_date":1693574075,"answer_id":77023425,"question_id":25931281,"body_markdown":"I know this is an old post, but I thought I had the same issue, and my explanation is similar in a way to @Gregory explanation from above.\r\n\r\nIn debug mode, I was able to see the null&#39;s of the fields of my @RevisionEntity annotated entity in the debug window of IntelliJ under the first level of the object. It is because this object is a Hibernate proxy actually and the &quot;real&quot;, not null values are one level deeper inside this proxy object.\r\n\r\nAfter I &quot;evaluated the expression&quot; in IntelliJ to inspect the content of the object, the correct values were returned:\r\n\r\n````\r\nMyCustomRevisionEntity revisionEntity = (MyCustomRevisionnEntity) ((Object[]) AuditReaderFactory\r\n                .get(entityManager)\r\n                .createQuery()\r\n                .forRevisionsOfEntity(Foo.class, false, false)\r\n                .add(AuditEntity.id().eq(1L))\r\n                .getResultList()\r\n                .get(3))\r\n                [1];\r\n````\r\n\r\nInside the `MyCustomRevisionEntity` object, my values were here in the `target` field:\r\n\r\n    ((ByteBuddyInterceptor)this.$$_hibernate_interceptor).target\r\n\r\nSo I was able to just fetch them like any other regular entity, and they were not null:\r\n\r\n    revisionEntity.getTimestamp()","title":"How to query RevisionEntity in hibernate envers","body":"<p>I know this is an old post, but I thought I had the same issue, and my explanation is similar in a way to @Gregory explanation from above.</p>\n<p>In debug mode, I was able to see the null's of the fields of my @RevisionEntity annotated entity in the debug window of IntelliJ under the first level of the object. It is because this object is a Hibernate proxy actually and the &quot;real&quot;, not null values are one level deeper inside this proxy object.</p>\n<p>After I &quot;evaluated the expression&quot; in IntelliJ to inspect the content of the object, the correct values were returned:</p>\n<pre><code>MyCustomRevisionEntity revisionEntity = (MyCustomRevisionnEntity) ((Object[]) AuditReaderFactory\n                .get(entityManager)\n                .createQuery()\n                .forRevisionsOfEntity(Foo.class, false, false)\n                .add(AuditEntity.id().eq(1L))\n                .getResultList()\n                .get(3))\n                [1];\n</code></pre>\n<p>Inside the <code>MyCustomRevisionEntity</code> object, my values were here in the <code>target</code> field:</p>\n<pre><code>((ByteBuddyInterceptor)this.$$_hibernate_interceptor).target\n</code></pre>\n<p>So I was able to just fetch them like any other regular entity, and they were not null:</p>\n<pre><code>revisionEntity.getTimestamp()\n</code></pre>\n"}],"owner":{"account_id":3295177,"reputation":656,"user_id":2772620,"accept_rate":38,"display_name":"Ujjwal Pathak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3610,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1693574223,"creation_date":1411120810,"question_id":25931281,"body_markdown":"I was trying to log additional user data with the revisions created by Envers. I was able to do that using RevisionEntity and RevisionListener but I&#39;m not able to retrieve the data that is logged.\r\nI tried the following code\r\n\r\n\t\tAuditQuery auditQuery = AuditReaderFactory\r\n\t\t\t\t.get(factory.getCurrentSession()).createQuery()\r\n\t\t\t\t.forRevisionsOfEntity(Currency.class, false, false)\r\n\t\t\t\t.add(AuditEntity.id().eq(&quot;ENV_US&quot;));\r\n\r\n\t\tList&lt;Object[]&gt; l = auditQuery.getResultList();\r\n\r\nThis returned a List&lt;Object[3]&gt;\r\nIn the object array first element is the Revision Second is of RevisionEntity and third is of RevisionType, but the values in RevisionEntity object are all null.\r\n\r\nHere is the pojo for RevisionEntity\r\n\r\n    @Entity\r\n    @Table(name = &quot;REVINFO&quot;)\r\n    @RevisionEntity(RevListener.class)\r\n    public class ExampleRevEntity {\r\n\t@Id\r\n\t@GeneratedValue\r\n\t@RevisionNumber\r\n\t@Column(name = &quot;REV&quot;)\r\n\tprivate int rev;\r\n\r\n\t@RevisionTimestamp\r\n\t@Column(name = &quot;REVTSTMP&quot;)\r\n\tprivate long revtstmp;\r\n\r\n\t@Column(name = &quot;USERID&quot;)\r\n\tprivate String userId;\r\n\r\n\tpublic String getUserId() {\r\n\t\treturn userId;\r\n\t}\r\n\r\n\tpublic void setUserId(String userId) {\r\n\t\tthis.userId = userId;\r\n\t}\r\n\r\n    }\r\nPlease let me know If I&#39;m doing any thing wrong.","title":"How to query RevisionEntity in hibernate envers","body":"<p>I was trying to log additional user data with the revisions created by Envers. I was able to do that using RevisionEntity and RevisionListener but I'm not able to retrieve the data that is logged.\nI tried the following code</p>\n\n<pre><code>    AuditQuery auditQuery = AuditReaderFactory\n            .get(factory.getCurrentSession()).createQuery()\n            .forRevisionsOfEntity(Currency.class, false, false)\n            .add(AuditEntity.id().eq(\"ENV_US\"));\n\n    List&lt;Object[]&gt; l = auditQuery.getResultList();\n</code></pre>\n\n<p>This returned a List\nIn the object array first element is the Revision Second is of RevisionEntity and third is of RevisionType, but the values in RevisionEntity object are all null.</p>\n\n<p>Here is the pojo for RevisionEntity</p>\n\n<pre><code>@Entity\n@Table(name = \"REVINFO\")\n@RevisionEntity(RevListener.class)\npublic class ExampleRevEntity {\n@Id\n@GeneratedValue\n@RevisionNumber\n@Column(name = \"REV\")\nprivate int rev;\n\n@RevisionTimestamp\n@Column(name = \"REVTSTMP\")\nprivate long revtstmp;\n\n@Column(name = \"USERID\")\nprivate String userId;\n\npublic String getUserId() {\n    return userId;\n}\n\npublic void setUserId(String userId) {\n    this.userId = userId;\n}\n\n}\n</code></pre>\n\n<p>Please let me know If I'm doing any thing wrong.</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa","jpa-2.0"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1693580016,"post_id":77022829,"comment_id":135784136,"body_markdown":"I&#39;m not clear on what you are after exactly. You want one query to return both HistoryTable and DataTable data, or are you looking at having a single, much more generic method to handle either HistoryTable or DataTable data instances? If the later, you&#39;d have to figure out a common denominator mappedSuperClass for them both.","body":"I&#39;m not clear on what you are after exactly. You want one query to return both HistoryTable and DataTable data, or are you looking at having a single, much more generic method to handle either HistoryTable or DataTable data instances? If the later, you&#39;d have to figure out a common denominator mappedSuperClass for them both."},{"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"score":0,"creation_date":1693581484,"post_id":77022829,"comment_id":135784456,"body_markdown":"Hi @Chris yes i need to return both HistoryTable and DataTable data using one method like which i mention above. simply i need to return pageable  object to return after join two table using criteriaBuilder. Thanks","body":"Hi @Chris yes i need to return both HistoryTable and DataTable data using one method like which i mention above. simply i need to return pageable  object to return after join two table using criteriaBuilder. Thanks"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693591509,"post_id":77022829,"comment_id":135786165,"body_markdown":"&quot;like which i mention above&quot; If you want both HistoryTable and DataTable data returned in one query, that isn&#39;t clear in your question. Pagination is the easiest part - You need to give us details on the query you are looking for, the data you are returning (is it a HistoryTable instance, a DataTable instance, a Tuple&lt;HistoryTable,DataTable&gt; or object array, or something else). Is it something like @Query(&quot;select h, d from HistoryTable h join DataTable d on d.groupId = h.groupId&quot;) you are looking for?","body":"&quot;like which i mention above&quot; If you want both HistoryTable and DataTable data returned in one query, that isn&#39;t clear in your question. Pagination is the easiest part - You need to give us details on the query you are looking for, the data you are returning (is it a HistoryTable instance, a DataTable instance, a Tuple&lt;HistoryTable,DataTable&gt; or object array, or something else). Is it something like @Query(&quot;select h, d from HistoryTable h join DataTable d on d.groupId = h.groupId&quot;) you are looking for?"},{"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"score":0,"creation_date":1693624228,"post_id":77022829,"comment_id":135788982,"body_markdown":"As per the above example @query won’t work for me cause there lots of filtration have on it.i think its preferred  like &lt;HistoryTable,Datatable&gt; kind of answer","body":"As per the above example @query won’t work for me cause there lots of filtration have on it.i think its preferred  like &lt;HistoryTable,Datatable&gt; kind of answer"}],"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693573622,"creation_date":1693568705,"question_id":77022829,"body_markdown":"I have two tables with no modeled relations. in my custom repository like below:\r\n\r\nMethod one\r\n\r\n    public Page&lt;HistoryTable&gt; findInquiryhistory(InquiryRequest req, int pageNumber, int pageSize){\r\n\t\tPageable pageable = PageRequest.of(pageNumber, pageSize);\r\n\t\treturn historyRepository.findAll(new Specification&lt;HistoryTable&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic Predicate toPredicate(Root&lt;HistoryTable&gt; root, CriteriaQuery&lt;?&gt; query,\r\n\t\t\t\t\t\t\t\t\t\t CriteriaBuilder criteriaBuilder) {\r\n\t\t\t\tList&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\t\t\t\tfilterByCarId(predicates,criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarId());\r\n\t\t\t\tfilterByCarnameId(predicates, criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarnameId());\r\n\t\t\t\treturn criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\r\n\t\t\t}\r\n\t\t}, pageable);\r\n\t}\r\n\r\nMethod two\r\n\r\n\tpublic Page&lt;DataTable&gt; findInquiry(InquiryRequest req, int pageNumber, int pageSize) {\r\n\t\tPageable pageable = PageRequest.of(pageNumber, pageSize);\r\n\t\treturn dataRepository.findAll(new Specification&lt;DataTable&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic Predicate toPredicate(Root&lt;DataTable&gt; root, CriteriaQuery&lt;?&gt; query,\r\n\t\t\t\t\t\t\t\t\t\t CriteriaBuilder criteriaBuilder) {\r\n\t\t\t\tList&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n\t\t\t\tfilterByCarId(predicates,criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarId());\r\n\t\t\t\tfilterByCarnameId(predicates, criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarnameId());\r\n\t\t\t\treturn criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\r\n\r\n\t\t\t}\r\n\t\t}, pageable);\r\n\t}\r\n\r\nIs there any possible way join above two method into one code using join, both tables contain groupId as a forign key but its not model relation just relation id wise.is there any possible way to connect above two method into one method use groupId as fk cause i need both in one resultset .Thanks\r\n\r\n","title":"Joining pageable tables without relation using JPA criteria","body":"<p>I have two tables with no modeled relations. in my custom repository like below:</p>\n<p>Method one</p>\n<pre><code>public Page&lt;HistoryTable&gt; findInquiryhistory(InquiryRequest req, int pageNumber, int pageSize){\n    Pageable pageable = PageRequest.of(pageNumber, pageSize);\n    return historyRepository.findAll(new Specification&lt;HistoryTable&gt;() {\n        @Override\n        public Predicate toPredicate(Root&lt;HistoryTable&gt; root, CriteriaQuery&lt;?&gt; query,\n                                     CriteriaBuilder criteriaBuilder) {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n            filterByCarId(predicates,criteriaBuilder, root,\n                    req.getCarId());\n            filterByCarnameId(predicates, criteriaBuilder, root,\n                    req.getCarnameId());\n            return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\n        }\n    }, pageable);\n}\n</code></pre>\n<p>Method two</p>\n<pre><code>public Page&lt;DataTable&gt; findInquiry(InquiryRequest req, int pageNumber, int pageSize) {\n    Pageable pageable = PageRequest.of(pageNumber, pageSize);\n    return dataRepository.findAll(new Specification&lt;DataTable&gt;() {\n        @Override\n        public Predicate toPredicate(Root&lt;DataTable&gt; root, CriteriaQuery&lt;?&gt; query,\n                                     CriteriaBuilder criteriaBuilder) {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n            filterByCarId(predicates,criteriaBuilder, root,\n                    req.getCarId());\n            filterByCarnameId(predicates, criteriaBuilder, root,\n                    req.getCarnameId());\n            return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\n\n        }\n    }, pageable);\n}\n</code></pre>\n<p>Is there any possible way join above two method into one code using join, both tables contain groupId as a forign key but its not model relation just relation id wise.is there any possible way to connect above two method into one method use groupId as fk cause i need both in one resultset .Thanks</p>\n"},{"tags":["java","spring","spring-boot","jetty","embedded-jetty"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1548843044,"post_id":54437826,"comment_id":95685422,"body_markdown":"I would suggest to remove that embedded container or not to use Spring Boot. You have competing containers. Also your container doesn&#39;t follow the principle that Spring Boot expects so it probably won&#39;t even work (reliably).","body":"I would suggest to remove that embedded container or not to use Spring Boot. You have competing containers. Also your container doesn&#39;t follow the principle that Spring Boot expects so it probably won&#39;t even work (reliably)."},{"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"score":0,"creation_date":1548843968,"post_id":54437826,"comment_id":95685975,"body_markdown":"@M.Deinum Thanks for responding. The app is a microservice actually. I am developing the microservice using using Spring Boot. So can&#39;t remove Spring Boot.","body":"@M.Deinum Thanks for responding. The app is a microservice actually. I am developing the microservice using using Spring Boot. So can&#39;t remove Spring Boot."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1548844009,"post_id":54437826,"comment_id":95685998,"body_markdown":"Judging from your question you are moving to Spring Boot so why wouldn&#39;t you be able to remove it.","body":"Judging from your question you are moving to Spring Boot so why wouldn&#39;t you be able to remove it."},{"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"score":0,"creation_date":1548844473,"post_id":54437826,"comment_id":95686299,"body_markdown":"Remove embedded container? I removed the default tomcat container from Spring Boot. I left the Jetty dependency (org.eclipse.jetty) as it is as I wanted to use the same. If I remove this as well I will need to use embedded Jetty from Spring Boot and make code change in classes depending on Jetty version 8.2 as there are changes between Jetty 8.2 and 9.4 which Spring Boot 2.1.1 will use.","body":"Remove embedded container? I removed the default tomcat container from Spring Boot. I left the Jetty dependency (org.eclipse.jetty) as it is as I wanted to use the same. If I remove this as well I will need to use embedded Jetty from Spring Boot and make code change in classes depending on Jetty version 8.2 as there are changes between Jetty 8.2 and 9.4 which Spring Boot 2.1.1 will use."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1548844967,"post_id":54437826,"comment_id":95686556,"body_markdown":"Spring Boot 2.1 doesn&#39;t work with Jetty 8....","body":"Spring Boot 2.1 doesn&#39;t work with Jetty 8...."}],"answers":[{"tags":[],"owner":{"account_id":462668,"reputation":6135,"user_id":865107,"display_name":"Selaron"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548843320,"creation_date":1548843320,"answer_id":54438120,"question_id":54437826,"body_markdown":"You are using a version of jetty incompatible to the selected version of spring boot.\r\n\r\nspring-boot-starter-web 2.1.1.RELEASE [depends on][1] spring-web 5.1.3.RELEASE which [depends on][2] jetty-server 9.4.14.v20181114.\r\n\r\nYou&#39;ll have to upgrade your jetty dependency.\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web/2.1.1.RELEASE\r\n  [2]: https://mvnrepository.com/artifact/org.springframework/spring-web/5.1.3.RELEASE","title":"Spring Boot APPLICATION FAILED TO START as class org.eclipse.jetty.server.Server does not exist","body":"<p>You are using a version of jetty incompatible to the selected version of spring boot.</p>\n\n<p>spring-boot-starter-web 2.1.1.RELEASE <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web/2.1.1.RELEASE\" rel=\"nofollow noreferrer\">depends on</a> spring-web 5.1.3.RELEASE which <a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web/5.1.3.RELEASE\" rel=\"nofollow noreferrer\">depends on</a> jetty-server 9.4.14.v20181114.</p>\n\n<p>You'll have to upgrade your jetty dependency.</p>\n"}],"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2535,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1693573423,"creation_date":1548842451,"question_id":54437826,"body_markdown":"I am migrating a web application to a Spring Boot application which fails to start and displays the following error message :\r\n\r\n\r\n \r\n\r\n        An attempt was made to call the method org.eclipse.jetty.server.Server. \r\n         &lt;init&gt;(Lorg/eclipse/jetty/util/thread/ThreadPool;)V but it does not \r\n         exist. \r\n         Its class, org.eclipse.jetty.server.Server, is available from the \r\n         following locations:\r\n    \r\n        jar:file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \r\n        server/8.2.0.v20160908/jetty-server- \r\n        8.2.0.v20160908.jar!/org/eclipse/jetty/server/Server.class\r\n    \r\n        It was loaded from the following location:\r\n    \r\n        file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \r\n        server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar\r\n    \r\n    \r\n        Action:\r\n    \r\n        Correct the classpath of your application so that it contains a single, \r\n        compatible version of org.eclipse.jetty.server.Server\r\n    \r\nAs there is just one location (C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \r\n        server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar) as pointed by Spring Boot, there should be no ambiguity. I have provided all the required maven dependencies with version 8.2.0.v20160908. I have excluded tomcat dependency (`spring-boot-starter-tomcat`) from `spring-boot-starter-web` as I need to work with jetty. But I have NOT included jetty spring boot starter dependency in `spring-boot-starter-web` as I already have embedded jetty dependencies with group id `org.eclipse.jetty` defined through which jetty dependencies (jetty-server, jetty-servlet, jetty-security, jetty-http, jetty-util, jetty-webapp, jetty-xml, jetty-io, jetty-deploy etc) are provided. \r\n    \r\nThe Spring Boot version is `v2.1.1.RELEASE`.\r\n    \r\nThe jetty server is defined as spring bean which is as follows \r\n    \r\n    \r\n          &lt;bean id=&quot;webServer&quot; class=&quot;org.someorg.server.jetty.Server&quot;&gt;\r\n    \t\t&lt;property name=&quot;threadPool&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;org.eclipse.jetty.util.thread.QueuedThreadPool&quot;&gt;\r\n    \t\t\t\t&lt;property name=&quot;minThreads&quot; value=&quot;8&quot; /&gt;\r\n    \t\t\t\t&lt;property name=&quot;maxThreads&quot; value=&quot;32&quot; /&gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;connectors&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.someorg.server.jetty.XmlConnector&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;port&quot; value=&quot;34347&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.eclipse.jetty.server.ssl.SslSelectChannelConnector&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;port&quot; value=&quot;34346&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;keystore&quot; value=&quot;classpath:keystore&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;password&quot; value=&quot;somepassword&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;keyPassword&quot; value=&quot;somekeypassword&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;truststore&quot; value=&quot;classpath:keystore&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;trustPassword&quot; value=&quot;sometrustpassword&quot; \r\n          /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t\t&lt;bean \r\n          class=&quot;org.eclipse.jetty.server.nio.SelectChannelConnector&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;port&quot; value=&quot;34345&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;handler&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;org.eclipse.jetty.server.handler.HandlerCollection&quot;&gt;\r\n    \t\t\t\t&lt;property name=&quot;handlers&quot;&gt;\r\n    \t\t\t\t\t&lt;list&gt;\r\n    \t\t\t\t\t\t&lt;ref bean=&quot;webContexts&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;bean id=&quot;defaultHandler&quot; \r\n           class=&quot;org.eclipse.jetty.server.handler.DefaultHandler&quot; /&gt;\r\n    \t\t\t\t\t&lt;/list&gt;\r\n    \t\t\t\t&lt;/property&gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;beans&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.eclipse.jetty.deploy.WebAppDeployer&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;contexts&quot; ref=&quot;webContexts&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;webAppDir&quot; value=&quot;webapps&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;stopAtShutdown&quot; value=&quot;false&quot; /&gt;\r\n    \t &lt;/bean&gt;`\r\n\r\nClass Server looks like the following : \r\n\r\n\r\n    public class Server extends org.eclipse.jetty.server.Server implements \r\n    ApplicationListener&lt;ApplicationContextEvent&gt; {\r\n\r\n     // code here\r\n\r\n    }\r\n\r\nI am not sure here what Spring Boot is expecting here. I do not have any other jetty versions as I see in Maven Dependency Hierarchy. All maven dependencies are on classpath. \r\n\r\nAny pointers ?\r\n\r\nThanks!\r\n\r\n","title":"Spring Boot APPLICATION FAILED TO START as class org.eclipse.jetty.server.Server does not exist","body":"<p>I am migrating a web application to a Spring Boot application which fails to start and displays the following error message :</p>\n\n<pre><code>    An attempt was made to call the method org.eclipse.jetty.server.Server. \n     &lt;init&gt;(Lorg/eclipse/jetty/util/thread/ThreadPool;)V but it does not \n     exist. \n     Its class, org.eclipse.jetty.server.Server, is available from the \n     following locations:\n\n    jar:file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \n    server/8.2.0.v20160908/jetty-server- \n    8.2.0.v20160908.jar!/org/eclipse/jetty/server/Server.class\n\n    It was loaded from the following location:\n\n    file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \n    server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar\n\n\n    Action:\n\n    Correct the classpath of your application so that it contains a single, \n    compatible version of org.eclipse.jetty.server.Server\n</code></pre>\n\n<p>As there is just one location (C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \n        server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar) as pointed by Spring Boot, there should be no ambiguity. I have provided all the required maven dependencies with version 8.2.0.v20160908. I have excluded tomcat dependency (<code>spring-boot-starter-tomcat</code>) from <code>spring-boot-starter-web</code> as I need to work with jetty. But I have NOT included jetty spring boot starter dependency in <code>spring-boot-starter-web</code> as I already have embedded jetty dependencies with group id <code>org.eclipse.jetty</code> defined through which jetty dependencies (jetty-server, jetty-servlet, jetty-security, jetty-http, jetty-util, jetty-webapp, jetty-xml, jetty-io, jetty-deploy etc) are provided. </p>\n\n<p>The Spring Boot version is <code>v2.1.1.RELEASE</code>.</p>\n\n<p>The jetty server is defined as spring bean which is as follows </p>\n\n<pre><code>      &lt;bean id=\"webServer\" class=\"org.someorg.server.jetty.Server\"&gt;\n        &lt;property name=\"threadPool\"&gt;\n            &lt;bean class=\"org.eclipse.jetty.util.thread.QueuedThreadPool\"&gt;\n                &lt;property name=\"minThreads\" value=\"8\" /&gt;\n                &lt;property name=\"maxThreads\" value=\"32\" /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"connectors\"&gt;\n            &lt;list&gt;\n                &lt;bean class=\"org.someorg.server.jetty.XmlConnector\"&gt;\n                    &lt;property name=\"port\" value=\"34347\" /&gt;\n                &lt;/bean&gt;\n                &lt;bean class=\"org.eclipse.jetty.server.ssl.SslSelectChannelConnector\"&gt;\n                    &lt;property name=\"port\" value=\"34346\" /&gt;\n                    &lt;property name=\"keystore\" value=\"classpath:keystore\" /&gt;\n                    &lt;property name=\"password\" value=\"somepassword\" /&gt;\n                    &lt;property name=\"keyPassword\" value=\"somekeypassword\" /&gt;\n                    &lt;property name=\"truststore\" value=\"classpath:keystore\" /&gt;\n                    &lt;property name=\"trustPassword\" value=\"sometrustpassword\" \n      /&gt;\n                &lt;/bean&gt;\n                &lt;bean \n      class=\"org.eclipse.jetty.server.nio.SelectChannelConnector\"&gt;\n                    &lt;property name=\"port\" value=\"34345\" /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"handler\"&gt;\n            &lt;bean class=\"org.eclipse.jetty.server.handler.HandlerCollection\"&gt;\n                &lt;property name=\"handlers\"&gt;\n                    &lt;list&gt;\n                        &lt;ref bean=\"webContexts\" /&gt;\n                        &lt;bean id=\"defaultHandler\" \n       class=\"org.eclipse.jetty.server.handler.DefaultHandler\" /&gt;\n                    &lt;/list&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"beans\"&gt;\n            &lt;list&gt;\n                &lt;bean class=\"org.eclipse.jetty.deploy.WebAppDeployer\"&gt;\n                    &lt;property name=\"contexts\" ref=\"webContexts\" /&gt;\n                    &lt;property name=\"webAppDir\" value=\"webapps\" /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"stopAtShutdown\" value=\"false\" /&gt;\n     &lt;/bean&gt;`\n</code></pre>\n\n<p>Class Server looks like the following : </p>\n\n<pre><code>public class Server extends org.eclipse.jetty.server.Server implements \nApplicationListener&lt;ApplicationContextEvent&gt; {\n\n // code here\n\n}\n</code></pre>\n\n<p>I am not sure here what Spring Boot is expecting here. I do not have any other jetty versions as I see in Maven Dependency Hierarchy. All maven dependencies are on classpath. </p>\n\n<p>Any pointers ?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","java-record"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693570169,"post_id":77022945,"comment_id":135782048,"body_markdown":"Does it have to be a [record](https://openjdk.org/jeps/395)? Looks like you could solve it quite easily by making `User` a [POJO](https://en.wikipedia.org/wiki/Plain_old_Java_object).","body":"Does it have to be a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>? Looks like you could solve it quite easily by making <code>User</code> a <a href=\"https://en.wikipedia.org/wiki/Plain_old_Java_object\" rel=\"nofollow noreferrer\">POJO</a>."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693570632,"post_id":77022945,"comment_id":135782127,"body_markdown":"How about adding a factory method? The record&#39;s canonical constructor must have `id` in it.","body":"How about adding a factory method? The record&#39;s canonical constructor must have <code>id</code> in it."},{"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"score":0,"creation_date":1693570706,"post_id":77022945,"comment_id":135782137,"body_markdown":"I want to achieve this using a Java record. But it seems that it&#39;s actually not possible with the current Java record spec..","body":"I want to achieve this using a Java record. But it seems that it&#39;s actually not possible with the current Java record spec.."},{"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"score":0,"creation_date":1693570843,"post_id":77022945,"comment_id":135782177,"body_markdown":"Why irritate the user of the record constructor with a constructor parameter (in this case `id`) that is always calculated inside the constructor? Not a good idea..","body":"Why irritate the user of the record constructor with a constructor parameter (in this case <code>id</code>) that is always calculated inside the constructor? Not a good idea.."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693572381,"creation_date":1693572381,"answer_id":77023238,"question_id":77022945,"body_markdown":"The semantic principle you want fundamentally means you don&#39;t actually have a record.\r\n\r\nRecords are a little more than just &#39;a class where I want java to take care of equals and hashCode and getter methods for me&#39;. For example, records also get an automatic deconstructor, and will therefore automatically support with-blocks, but, and herein lies the key issue, that fundamentally doesn&#39;t work with your take on how such a class works.\r\n\r\nHence, not a record.\r\n\r\nNow, deconstructors and with-blocks aren&#39;t in java. Yet. They are in advanced planning stages and will probably be in something along the lines of java 23 or so.\r\n\r\n## Deconstructor\r\n\r\nA deconstructor does what you&#39;d think: A constructor takes in a value for each field (well, parameter, but there&#39;s the notion, at least with records, that each parameter is just the value for each of the fields) and turns that into an object. A deconstructor does the reverse, taking in an instance of `User` and turning that into its constituent parts. It&#39;s not like a normal method, because normal methods can only return one thing, whereas a deconstructor returns a series of things (here, a UUID _and_ a name).\r\n\r\n## with-blocks\r\n\r\nwith blocks is one of a few features (the primary other one being pattern matching) that requires deconstructors to be a thing in order to &#39;work&#39;. A with-block looks like this:\r\n\r\n```\r\nUser u = new User(&quot;Joe&quot;);\r\n...\r\n\r\npublic User rename(User in, String newName) {\r\n  return u with {\r\n    name = newName;\r\n  };\r\n}\r\n```\r\n\r\n\r\nThe syntax isn&#39;t important (not fleshed out in the proposals yet, this is normal, syntax is generally not all that interesting and the last thing to be figured out), the point is: Inside &#39;with&#39;, the object (`u`, here) is deconstructed, i.e. inside the braces all the fields (here, `UUID id` and `String name`) exist as local variables you can write to, and at the end of the block, those locals are used to reconstitute a new instance, which is what the whole expression resolves to.\r\n\r\nFor all this to work, it __has to be possible__ for the java compiler to know how to go through the process of breaking an instance of `User` into its parts __and then recreating a new user object based on those parts later__, and that _requires_ that it is possible to create a user with a provided UUID instead of having your system random up a new id for them.\r\n\r\n","title":"Java records and default/derived finalized properties","body":"<p>The semantic principle you want fundamentally means you don't actually have a record.</p>\n<p>Records are a little more than just 'a class where I want java to take care of equals and hashCode and getter methods for me'. For example, records also get an automatic deconstructor, and will therefore automatically support with-blocks, but, and herein lies the key issue, that fundamentally doesn't work with your take on how such a class works.</p>\n<p>Hence, not a record.</p>\n<p>Now, deconstructors and with-blocks aren't in java. Yet. They are in advanced planning stages and will probably be in something along the lines of java 23 or so.</p>\n<h2>Deconstructor</h2>\n<p>A deconstructor does what you'd think: A constructor takes in a value for each field (well, parameter, but there's the notion, at least with records, that each parameter is just the value for each of the fields) and turns that into an object. A deconstructor does the reverse, taking in an instance of <code>User</code> and turning that into its constituent parts. It's not like a normal method, because normal methods can only return one thing, whereas a deconstructor returns a series of things (here, a UUID <em>and</em> a name).</p>\n<h2>with-blocks</h2>\n<p>with blocks is one of a few features (the primary other one being pattern matching) that requires deconstructors to be a thing in order to 'work'. A with-block looks like this:</p>\n<pre><code>User u = new User(&quot;Joe&quot;);\n...\n\npublic User rename(User in, String newName) {\n  return u with {\n    name = newName;\n  };\n}\n</code></pre>\n<p>The syntax isn't important (not fleshed out in the proposals yet, this is normal, syntax is generally not all that interesting and the last thing to be figured out), the point is: Inside 'with', the object (<code>u</code>, here) is deconstructed, i.e. inside the braces all the fields (here, <code>UUID id</code> and <code>String name</code>) exist as local variables you can write to, and at the end of the block, those locals are used to reconstitute a new instance, which is what the whole expression resolves to.</p>\n<p>For all this to work, it <strong>has to be possible</strong> for the java compiler to know how to go through the process of breaking an instance of <code>User</code> into its parts <strong>and then recreating a new user object based on those parts later</strong>, and that <em>requires</em> that it is possible to create a user with a provided UUID instead of having your system random up a new id for them.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693572420,"creation_date":1693572420,"answer_id":77023241,"question_id":77022945,"body_markdown":"A record has to have a canonical constructor, and that constructor&#39;s signature must match the record components. Therefore, if you want the record to only have a single-parameter `String` constructor, the record must only have the `name` component. \r\n\r\nTechnically, it is possible to associate an id to each created `User`, but since it can&#39;t be a record component, it isn&#39;t considered when generating the `hashCode`, `equals`, and `toString` methods, so it&#39;s not much shorter than if you had just written a regular `class`. All it saves is writing the getters for each of the other record components.\r\n\r\nHere&#39;s one way of doing this (note that this isn&#39;t thread safe) - the idea is to use a `Map` to store which id corresponds to which `User`.\r\n\r\nOf course, we can&#39;t put `User` objects directly into the `Map`, because their `hashCode` and `equals` are based on `name` alone. If you did, then you can&#39;t have users with duplicate names.\r\n\r\nSo we introduce a `Wrapper` inner class, whose `hashCode` and `equals` compare the reference equality of their outer instance.\r\n\r\n```\r\nrecord User(String name) {\r\n\r\n    private class Wrapper {\r\n\r\n        private User getUser() { return User.this; }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return System.identityHashCode(User.this);\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (obj instanceof Wrapper w) {\r\n                return User.this == w.getUser();\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    private static final Map&lt;Wrapper, UUID&gt; map = new HashMap&lt;&gt;();\r\n\r\n    public User {\r\n        map.put(new Wrapper(), UUID.randomUUID());\r\n    }\r\n\r\n    public UUID id() {\r\n        return map.get(new Wrapper());\r\n    }\r\n\r\n    // Here you would write your hashCode, equals, toString implementation that takes id into account...\r\n}\r\n```","title":"Java records and default/derived finalized properties","body":"<p>A record has to have a canonical constructor, and that constructor's signature must match the record components. Therefore, if you want the record to only have a single-parameter <code>String</code> constructor, the record must only have the <code>name</code> component.</p>\n<p>Technically, it is possible to associate an id to each created <code>User</code>, but since it can't be a record component, it isn't considered when generating the <code>hashCode</code>, <code>equals</code>, and <code>toString</code> methods, so it's not much shorter than if you had just written a regular <code>class</code>. All it saves is writing the getters for each of the other record components.</p>\n<p>Here's one way of doing this (note that this isn't thread safe) - the idea is to use a <code>Map</code> to store which id corresponds to which <code>User</code>.</p>\n<p>Of course, we can't put <code>User</code> objects directly into the <code>Map</code>, because their <code>hashCode</code> and <code>equals</code> are based on <code>name</code> alone. If you did, then you can't have users with duplicate names.</p>\n<p>So we introduce a <code>Wrapper</code> inner class, whose <code>hashCode</code> and <code>equals</code> compare the reference equality of their outer instance.</p>\n<pre><code>record User(String name) {\n\n    private class Wrapper {\n\n        private User getUser() { return User.this; }\n\n        @Override\n        public int hashCode() {\n            return System.identityHashCode(User.this);\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            if (obj instanceof Wrapper w) {\n                return User.this == w.getUser();\n            }\n            return false;\n        }\n    }\n    private static final Map&lt;Wrapper, UUID&gt; map = new HashMap&lt;&gt;();\n\n    public User {\n        map.put(new Wrapper(), UUID.randomUUID());\n    }\n\n    public UUID id() {\n        return map.get(new Wrapper());\n    }\n\n    // Here you would write your hashCode, equals, toString implementation that takes id into account...\n}\n</code></pre>\n"}],"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77023238,"answer_count":2,"score":0,"last_activity_date":1693572420,"creation_date":1693569881,"question_id":77022945,"body_markdown":"I have this:\r\n\r\n    // the id-constructor-parameter should not exist \r\n    // as the value should always be calculated within the constructor.\r\n    public record User(String id, String name) {\r\n\r\n\t\tpublic User {\r\n\t\t\tid = UUID.randomUUID();\r\n\t\t}\r\n\r\n\t\tpublic User(String name) {\r\n\t\t\tthis(null, name);\r\n\r\n\t\t}\r\n\t}\r\n\r\nHow can I remove the parameter `id` from the constructor of a java record? \r\n\r\nThe `id` will be always reassigned/computed within the constructor, so it should not be passed by the constructor (i.e. `id` is a generated/derived property). Something like this, unfortunately, does not work:\r\n\r\n\r\n    public record User(String name) {\r\n    \t// Unfortunately, this doesn&#39;t work in Java record\r\n        private final String id;\r\n    \tpublic User {\r\n    \t\tid = UUID.randomUUID();\r\n    \t}\r\n    }\r\n\r\n","title":"Java records and default/derived finalized properties","body":"<p>I have this:</p>\n<pre><code>// the id-constructor-parameter should not exist \n// as the value should always be calculated within the constructor.\npublic record User(String id, String name) {\n\n    public User {\n        id = UUID.randomUUID();\n    }\n\n    public User(String name) {\n        this(null, name);\n\n    }\n}\n</code></pre>\n<p>How can I remove the parameter <code>id</code> from the constructor of a java record?</p>\n<p>The <code>id</code> will be always reassigned/computed within the constructor, so it should not be passed by the constructor (i.e. <code>id</code> is a generated/derived property). Something like this, unfortunately, does not work:</p>\n<pre><code>public record User(String name) {\n    // Unfortunately, this doesn't work in Java record\n    private final String id;\n    public User {\n        id = UUID.randomUUID();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-data-jpa","entity-relationship"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570512,"creation_date":1693570512,"answer_id":77023029,"question_id":77022959,"body_markdown":"You have to set the `teacher` and `school` itself not only the `id`:\r\n\r\n    public Student addStudent(Student student) {\r\n            // set school name if it exists and teacher name if she exists\r\n    \r\n            School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\r\n            student.setSchool(school);\r\n    \r\n            Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\r\n            student.setTeacher(teacher);\r\n    return studentRepository.save(student);\r\n        }","title":"Springboot JPA relationship mapping error","body":"<p>You have to set the <code>teacher</code> and <code>school</code> itself not only the <code>id</code>:</p>\n<pre><code>public Student addStudent(Student student) {\n        // set school name if it exists and teacher name if she exists\n\n        School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\n        student.setSchool(school);\n\n        Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\n        student.setTeacher(teacher);\nreturn studentRepository.save(student);\n    }\n</code></pre>\n"}],"owner":{"account_id":4983029,"reputation":67,"user_id":4007419,"display_name":"Mausumi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693572293,"creation_date":1693569965,"question_id":77022959,"body_markdown":"Hi I am new to Springboot JPA. I am trying to learn about relationship mapping between the entities. I have 4 entities, Student, Address, Teacher and School. I am getting multiple errors latest being  detached entity passed to persist while inserting data to the entities. I think I have not done the mapping correcty. Please help me \r\n\r\n\r\n    public class Student {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;student_id_seq&quot;)\r\n        @SequenceGenerator(name =&quot;student_id_seq&quot;, allocationSize = 1, sequenceName = &quot;student_id_seq&quot;,initialValue = 1)\r\n        private long studentId;\r\n        private String name;\r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n        @JoinColumn(name=&quot;address_id&quot;,referencedColumnName = &quot;id&quot;)\r\n        private Address address;\r\n        @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n        @JoinColumn(name=&quot;teacher_id&quot;)\r\n        private Teacher teacher;\r\n    \r\n        @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\r\n        private School school;\r\n    }\r\n    \r\n    public class Address {\r\n        @Id\r\n        @GeneratedValue\r\n        private int id;\r\n        private String addressLine;\r\n        @OneToOne(mappedBy = &quot;address&quot;)\r\n        private Student student;\r\n    }\r\n    \r\n    public class School {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private long schoolId;\r\n        @Column(unique = true)\r\n        @GeneratedValue(strategy = GenerationType.UUID)\r\n        private UUID school_uuid;\r\n        private String schoolName;\r\n    \r\n        @OneToMany(mappedBy = &quot;school&quot;)\r\n        @JsonManagedReference\r\n        private List&lt;Teacher&gt; teachers;\r\n        @OneToMany(mappedBy = &quot;school&quot;)\r\n        private List&lt;Student&gt; students;\r\n    \r\n        @PrePersist\r\n        public void prePersistToUpdateUUid(){\r\n            System.out.println(&quot;prepersist called&quot;);\r\n            if(this.school_uuid == null){\r\n                this.setSchool_uuid(UUID.randomUUID());\r\n            }\r\n        }\r\n    }\r\n    \r\n    public class Teacher {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;teacher_id_seq&quot;)\r\n        @SequenceGenerator(name = &quot;teacher_id_seq&quot;, sequenceName = &quot;teacher_id_seq&quot;, allocationSize = 1, initialValue = 1)\r\n        private long teacherId;\r\n        private String teacherName;\r\n        private String course;\r\n        @ManyToOne\r\n        @JoinColumn(name=&quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\r\n        @JsonBackReference\r\n        private School school;\r\n        @OneToMany(mappedBy = &quot;teacher&quot;)\r\n        private List&lt;Student&gt; students;\r\n    \r\n    }\r\n\r\n\r\ntrying to persist student entity and getting error \r\n\r\n&gt; org.springframework.dao.InvalidDataAccessApiUsageException: detached\r\n\r\nentity passed to persist:\r\n\r\n     public Student addStudent(Student student) {\r\n            // set school name if it exists and teacher name if she exists\r\n    \r\n            School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\r\n            if(school!=null){\r\n                student.getSchool().setSchool_uuid(school.getSchool_uuid());;\r\n            }\r\n    \r\n            Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\r\n            if(teacher!=null){\r\n                student.getTeacher().setTeacherId(teacher.getTeacherId());\r\n            }\r\n    return studentRepository.save(student);\r\n        }\r\n","title":"Springboot JPA relationship mapping error","body":"<p>Hi I am new to Springboot JPA. I am trying to learn about relationship mapping between the entities. I have 4 entities, Student, Address, Teacher and School. I am getting multiple errors latest being  detached entity passed to persist while inserting data to the entities. I think I have not done the mapping correcty. Please help me</p>\n<pre><code>public class Student {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;student_id_seq&quot;)\n    @SequenceGenerator(name =&quot;student_id_seq&quot;, allocationSize = 1, sequenceName = &quot;student_id_seq&quot;,initialValue = 1)\n    private long studentId;\n    private String name;\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name=&quot;address_id&quot;,referencedColumnName = &quot;id&quot;)\n    private Address address;\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;teacher_id&quot;)\n    private Teacher teacher;\n\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\n    private School school;\n}\n\npublic class Address {\n    @Id\n    @GeneratedValue\n    private int id;\n    private String addressLine;\n    @OneToOne(mappedBy = &quot;address&quot;)\n    private Student student;\n}\n\npublic class School {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long schoolId;\n    @Column(unique = true)\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID school_uuid;\n    private String schoolName;\n\n    @OneToMany(mappedBy = &quot;school&quot;)\n    @JsonManagedReference\n    private List&lt;Teacher&gt; teachers;\n    @OneToMany(mappedBy = &quot;school&quot;)\n    private List&lt;Student&gt; students;\n\n    @PrePersist\n    public void prePersistToUpdateUUid(){\n        System.out.println(&quot;prepersist called&quot;);\n        if(this.school_uuid == null){\n            this.setSchool_uuid(UUID.randomUUID());\n        }\n    }\n}\n\npublic class Teacher {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;teacher_id_seq&quot;)\n    @SequenceGenerator(name = &quot;teacher_id_seq&quot;, sequenceName = &quot;teacher_id_seq&quot;, allocationSize = 1, initialValue = 1)\n    private long teacherId;\n    private String teacherName;\n    private String course;\n    @ManyToOne\n    @JoinColumn(name=&quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\n    @JsonBackReference\n    private School school;\n    @OneToMany(mappedBy = &quot;teacher&quot;)\n    private List&lt;Student&gt; students;\n\n}\n</code></pre>\n<p>trying to persist student entity and getting error</p>\n<blockquote>\n<p>org.springframework.dao.InvalidDataAccessApiUsageException: detached</p>\n</blockquote>\n<p>entity passed to persist:</p>\n<pre><code> public Student addStudent(Student student) {\n        // set school name if it exists and teacher name if she exists\n\n        School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\n        if(school!=null){\n            student.getSchool().setSchool_uuid(school.getSchool_uuid());;\n        }\n\n        Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\n        if(teacher!=null){\n            student.getTeacher().setTeacherId(teacher.getTeacherId());\n        }\nreturn studentRepository.save(student);\n    }\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa"],"owner":{"account_id":7558513,"reputation":759,"user_id":5737088,"accept_rate":83,"display_name":"Draaksward"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693571988,"creation_date":1693571988,"question_id":77023199,"body_markdown":"This is basically the question of `@GeneratedValue` but for a NON PRIMARY KEY.\r\n\r\nI have a function, let it be `createToken()` stored in DB, which I would like to call during Spring JPA/Hibernate `repository.save(myAwesomeObject)`. Or even a sequence...\r\n\r\nAs I&#39;ve said, I want it to be executed when an entity gets persisted/inserted.\r\n\r\nAnd I want it to be visible in my java code.\r\n\r\nThe only thing that I&#39;ve come up with is to have the \r\n```\r\nfield1 varchar(255) not null default myfunc()\r\n```\r\ndefined in the DDL. \r\n\r\nIt works, but:\r\na) see this as a solution &quot;when there are no good ideas&quot;\r\nb) this isn&#39;t reflected (a part from a comment) in the `@Entity`\r\nc) doing `repository.save(...)` returns the entity with that field as null (while the ID field is set), for which I need to basically make a second db call to get the actual entity. I do understand that if to switch on the DB, one would see that Hibernate&#39;s persist is far from one DB call, but every step of this solution smells like a workaround. And I don&#39;t enjoy my code being a &quot;meh, it will have to do&quot;.\r\n\r\nI saw a solution about Composite keys and stuff, but not I don&#39;t want to create a composite key just for that (and having to meddle with the fact of the composite key).\r\n\r\nIs there something (which I&#39;m maybe forgetting or simply don&#39;t know) like a `@OnInsert` for an entity field, which I can use and make my solution graceful.\r\n\r\nAlso, I do understand the fact that I can make a separate `@Query` to call `myfunc()` and set it before the entity goes to persist, but that eliminates the desire of having everything done clean (oh look, I generate @ID in one way, after which field B, which is similar, is done in a completely different manner...)","title":"Spring JPA. Calling a stored procedure on INSERT","body":"<p>This is basically the question of <code>@GeneratedValue</code> but for a NON PRIMARY KEY.</p>\n<p>I have a function, let it be <code>createToken()</code> stored in DB, which I would like to call during Spring JPA/Hibernate <code>repository.save(myAwesomeObject)</code>. Or even a sequence...</p>\n<p>As I've said, I want it to be executed when an entity gets persisted/inserted.</p>\n<p>And I want it to be visible in my java code.</p>\n<p>The only thing that I've come up with is to have the</p>\n<pre><code>field1 varchar(255) not null default myfunc()\n</code></pre>\n<p>defined in the DDL.</p>\n<p>It works, but:\na) see this as a solution &quot;when there are no good ideas&quot;\nb) this isn't reflected (a part from a comment) in the <code>@Entity</code>\nc) doing <code>repository.save(...)</code> returns the entity with that field as null (while the ID field is set), for which I need to basically make a second db call to get the actual entity. I do understand that if to switch on the DB, one would see that Hibernate's persist is far from one DB call, but every step of this solution smells like a workaround. And I don't enjoy my code being a &quot;meh, it will have to do&quot;.</p>\n<p>I saw a solution about Composite keys and stuff, but not I don't want to create a composite key just for that (and having to meddle with the fact of the composite key).</p>\n<p>Is there something (which I'm maybe forgetting or simply don't know) like a <code>@OnInsert</code> for an entity field, which I can use and make my solution graceful.</p>\n<p>Also, I do understand the fact that I can make a separate <code>@Query</code> to call <code>myfunc()</code> and set it before the entity goes to persist, but that eliminates the desire of having everything done clean (oh look, I generate @ID in one way, after which field B, which is similar, is done in a completely different manner...)</p>\n"},{"tags":["java","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":1752470,"reputation":346,"user_id":1601257,"display_name":"aietcn"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1553689661,"creation_date":1497866876,"answer_id":44627688,"question_id":43575538,"body_markdown":"Spring 5 provides a [WebHandler][1], and in the JavaDoc, there&#39;s the line:\r\n\r\n&gt; Use HttpWebHandlerAdapter to adapt a WebHandler to an HttpHandler. The WebHttpHandlerBuilder provides a convenient way to do that while also optionally configuring one or more filters and/or exception handlers.\r\n\r\nCurrently, the official documentation suggests that we should wrap the router function into an HttpHandler before booting up any server:\r\n\r\n    HttpHandler httpHandler = RouterFunctions.toHttpHandler(routerFunction);\r\n\r\nWith the help of [WebHttpHandlerBuilder][2], we can configure custom exception handlers:\r\n\r\n    HttpHandler httpHandler = WebHttpHandlerBuilder.webHandler(toHttpHandler(routerFunction))\r\n      .prependExceptionHandler((serverWebExchange, exception) -&gt; {\r\n\r\n          /* custom handling goes here */\r\n          return null;\r\n\r\n      }).build();\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/WebHandler.html\r\n  [2]: http://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/adapter/WebHttpHandlerBuilder.html","title":"what is the right way to handle errors in spring-webflux","body":"<p>Spring 5 provides a <a href=\"https://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/WebHandler.html\" rel=\"noreferrer\">WebHandler</a>, and in the JavaDoc, there's the line:</p>\n\n<blockquote>\n  <p>Use HttpWebHandlerAdapter to adapt a WebHandler to an HttpHandler. The WebHttpHandlerBuilder provides a convenient way to do that while also optionally configuring one or more filters and/or exception handlers.</p>\n</blockquote>\n\n<p>Currently, the official documentation suggests that we should wrap the router function into an HttpHandler before booting up any server:</p>\n\n<pre><code>HttpHandler httpHandler = RouterFunctions.toHttpHandler(routerFunction);\n</code></pre>\n\n<p>With the help of <a href=\"http://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/adapter/WebHttpHandlerBuilder.html\" rel=\"noreferrer\">WebHttpHandlerBuilder</a>, we can configure custom exception handlers:</p>\n\n<pre><code>HttpHandler httpHandler = WebHttpHandlerBuilder.webHandler(toHttpHandler(routerFunction))\n  .prependExceptionHandler((serverWebExchange, exception) -&gt; {\n\n      /* custom handling goes here */\n      return null;\n\n  }).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4779126,"reputation":570,"user_id":3861445,"display_name":"Alphaone"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1500042251,"creation_date":1500042251,"answer_id":45105327,"question_id":43575538,"body_markdown":"Why not do it the old fashioned way by throwing exceptions from handler functions and implementing your own WebExceptionHandler to catch &#39;em all:\r\n  \r\n\r\n  \r\n    @Component\r\n    class ExceptionHandler : WebExceptionHandler {\r\n        override fun handle(exchange: ServerWebExchange?, ex: Throwable?): Mono&lt;Void&gt; {\r\n            /* Handle different exceptions here */\r\n            when(ex!!) {\r\n                is NoSuchElementException -&gt; exchange!!.response.statusCode = HttpStatus.NOT_FOUND\r\n                is Exception -&gt; exchange!!.response.statusCode = HttpStatus.INTERNAL_SERVER_ERROR\r\n            }\r\n        \r\n            /* Do common thing like logging etc... */\r\n                \r\n            return Mono.empty()\r\n        }\r\n    }\r\n\r\nAbove example is in Kotlin, since I just copy pasted it from a project I&#180;m currently working on, and since the original question was not tagged for java anyway.","title":"what is the right way to handle errors in spring-webflux","body":"<p>Why not do it the old fashioned way by throwing exceptions from handler functions and implementing your own WebExceptionHandler to catch 'em all:</p>\n\n<pre><code>@Component\nclass ExceptionHandler : WebExceptionHandler {\n    override fun handle(exchange: ServerWebExchange?, ex: Throwable?): Mono&lt;Void&gt; {\n        /* Handle different exceptions here */\n        when(ex!!) {\n            is NoSuchElementException -&gt; exchange!!.response.statusCode = HttpStatus.NOT_FOUND\n            is Exception -&gt; exchange!!.response.statusCode = HttpStatus.INTERNAL_SERVER_ERROR\n        }\n\n        /* Do common thing like logging etc... */\n\n        return Mono.empty()\n    }\n}\n</code></pre>\n\n<p>Above example is in Kotlin, since I just copy pasted it from a project I´m currently working on, and since the original question was not tagged for java anyway.</p>\n"},{"tags":[],"owner":{"account_id":1339883,"reputation":963,"user_id":1281789,"accept_rate":83,"display_name":"adrien le roy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500900298,"creation_date":1500898770,"answer_id":45280499,"question_id":43575538,"body_markdown":"What I am currently doing is simply providing a bean my WebExceptionHandler :\r\n \r\n    @Bean\r\n    @Order(0)\r\n    public WebExceptionHandler responseStatusExceptionHandler() {\r\n        return new MyWebExceptionHandler();\r\n    }\r\n\r\nThe advantage than creating the `HttpHandler` myself is that I have a better integration with `WebFluxConfigurer` if I provide my own `ServerCodecConfigurer` for example or using `SpringSecurity`","title":"what is the right way to handle errors in spring-webflux","body":"<p>What I am currently doing is simply providing a bean my WebExceptionHandler :</p>\n\n<pre><code>@Bean\n@Order(0)\npublic WebExceptionHandler responseStatusExceptionHandler() {\n    return new MyWebExceptionHandler();\n}\n</code></pre>\n\n<p>The advantage than creating the <code>HttpHandler</code> myself is that I have a better integration with <code>WebFluxConfigurer</code> if I provide my own <code>ServerCodecConfigurer</code> for example or using <code>SpringSecurity</code></p>\n"},{"tags":[],"owner":{"account_id":11171319,"reputation":2160,"user_id":8198203,"accept_rate":75,"display_name":"Frischling"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1518599373,"creation_date":1518599373,"answer_id":48783313,"question_id":43575538,"body_markdown":"If you think, router functions are not the right place to handle exceptions, you throw HTTP Exceptions, that will result in the correct HTTP Error codes.\r\nFor Spring-Boot (also webflux) this is:\r\n      \r\n      import org.springframework.http.HttpStatus;\r\n      import org.springframework.web.server.ResponseStatusException;\r\n      .\r\n      .\r\n      . \r\n\r\n      new ResponseStatusException(HttpStatus.NOT_FOUND,  &quot;Collection not found&quot;);})\r\n\r\nspring securities AccessDeniedException will be handled correctly, too (403/401 response codes).\r\n\r\nIf you have a microservice, and want to use REST for it, this can be a good option, since those http exceptions are quite close to business logic, and should be placed near the business logic in this case.  And since in a microservice you shouldn&#39;t have to much businesslogic and exceptions, it shouldn&#39;t clutter your code, too... (but of course, it all depends).","title":"what is the right way to handle errors in spring-webflux","body":"<p>If you think, router functions are not the right place to handle exceptions, you throw HTTP Exceptions, that will result in the correct HTTP Error codes.\nFor Spring-Boot (also webflux) this is:</p>\n\n<pre><code>  import org.springframework.http.HttpStatus;\n  import org.springframework.web.server.ResponseStatusException;\n  .\n  .\n  . \n\n  new ResponseStatusException(HttpStatus.NOT_FOUND,  \"Collection not found\");})\n</code></pre>\n\n<p>spring securities AccessDeniedException will be handled correctly, too (403/401 response codes).</p>\n\n<p>If you have a microservice, and want to use REST for it, this can be a good option, since those http exceptions are quite close to business logic, and should be placed near the business logic in this case.  And since in a microservice you shouldn't have to much businesslogic and exceptions, it shouldn't clutter your code, too... (but of course, it all depends).</p>\n"},{"tags":[],"owner":{"account_id":4949274,"reputation":743,"user_id":3983812,"display_name":"Hartmut"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1529273752,"creation_date":1529273752,"answer_id":50900904,"question_id":43575538,"body_markdown":"A quick way to map your exceptions to http response status is to throw `org.springframework.web.server.ResponseStatusException` / or create your own subclasses...\r\n\r\nFull control over http response status + spring will add a response body with the option to add a `reason`.\r\n\r\nIn Kotlin it could look as simple as\r\n\r\n    @Component\r\n    class MyHandler(private val myRepository: MyRepository) {\r\n    \r\n        fun getById(req: ServerRequest) = req.pathVariable(&quot;id&quot;).toMono()\r\n                .map { id -&gt; uuidFromString(id) }  // throws ResponseStatusException\r\n                .flatMap { id -&gt; noteRepository.findById(id) }\r\n                .flatMap { entity -&gt; ok().json().body(entity.toMono()) }\r\n                .switchIfEmpty(notFound().build())  // produces 404 if not found\r\n    \r\n    }\r\n\r\n    fun uuidFromString(id: String?) = try { UUID.fromString(id) } catch (e: Throwable) { throw BadRequestStatusException(e.localizedMessage) }\r\n\r\n    class BadRequestStatusException(reason: String) : ResponseStatusException(HttpStatus.BAD_REQUEST, reason)\r\n\r\n\r\nResponse Body:\r\n\r\n    {\r\n    \t&quot;timestamp&quot;: 1529138182607,\r\n    \t&quot;path&quot;: &quot;/api/notes/f7b.491bc-5c86-4fe6-9ad7-111&quot;,\r\n    \t&quot;status&quot;: 400,\r\n    \t&quot;error&quot;: &quot;Bad Request&quot;,\r\n    \t&quot;message&quot;: &quot;For input string: \\&quot;f7b.491bc\\&quot;&quot;\r\n    }","title":"what is the right way to handle errors in spring-webflux","body":"<p>A quick way to map your exceptions to http response status is to throw <code>org.springframework.web.server.ResponseStatusException</code> / or create your own subclasses...</p>\n\n<p>Full control over http response status + spring will add a response body with the option to add a <code>reason</code>.</p>\n\n<p>In Kotlin it could look as simple as</p>\n\n<pre><code>@Component\nclass MyHandler(private val myRepository: MyRepository) {\n\n    fun getById(req: ServerRequest) = req.pathVariable(\"id\").toMono()\n            .map { id -&gt; uuidFromString(id) }  // throws ResponseStatusException\n            .flatMap { id -&gt; noteRepository.findById(id) }\n            .flatMap { entity -&gt; ok().json().body(entity.toMono()) }\n            .switchIfEmpty(notFound().build())  // produces 404 if not found\n\n}\n\nfun uuidFromString(id: String?) = try { UUID.fromString(id) } catch (e: Throwable) { throw BadRequestStatusException(e.localizedMessage) }\n\nclass BadRequestStatusException(reason: String) : ResponseStatusException(HttpStatus.BAD_REQUEST, reason)\n</code></pre>\n\n<p>Response Body:</p>\n\n<pre><code>{\n    \"timestamp\": 1529138182607,\n    \"path\": \"/api/notes/f7b.491bc-5c86-4fe6-9ad7-111\",\n    \"status\": 400,\n    \"error\": \"Bad Request\",\n    \"message\": \"For input string: \\\"f7b.491bc\\\"\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10375812,"reputation":2008,"user_id":7652010,"display_name":"Akhil Bojedla"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1570441135,"creation_date":1570441135,"answer_id":58266972,"question_id":43575538,"body_markdown":"You can write a Global exception handler with custom response data and response code as follows. The code is in Kotlin. But you can convert it to java easily:\r\n\r\n    @Component\r\n    @Order(-2)\r\n    class GlobalWebExceptionHandler(\r\n      private val objectMapper: ObjectMapper\r\n    ) : ErrorWebExceptionHandler {\r\n\r\n      override fun handle(exchange: ServerWebExchange, ex: Throwable): Mono&lt;Void&gt; {\r\n\r\n        val response = when (ex) {\r\n          // buildIOExceptionMessage should build relevant exception message as a serialisable object\r\n          is IOException -&gt; buildIOExceptionMessage(ex)\r\n          else -&gt; buildExceptionMessage(ex)\r\n        }\r\n\r\n        // Or you can also set them inside while conditions\r\n        exchange.response.headers.contentType = MediaType.APPLICATION_PROBLEM_JSON\r\n        exchange.response.statusCode = HttpStatus.valueOf(response.status)\r\n        val bytes = objectMapper.writeValueAsBytes(response)\r\n        val buffer = exchange.response.bufferFactory().wrap(bytes)\r\n        return exchange.response.writeWith(Mono.just(buffer))\r\n      }\r\n    }\r\n","title":"what is the right way to handle errors in spring-webflux","body":"<p>You can write a Global exception handler with custom response data and response code as follows. The code is in Kotlin. But you can convert it to java easily:</p>\n\n<pre><code>@Component\n@Order(-2)\nclass GlobalWebExceptionHandler(\n  private val objectMapper: ObjectMapper\n) : ErrorWebExceptionHandler {\n\n  override fun handle(exchange: ServerWebExchange, ex: Throwable): Mono&lt;Void&gt; {\n\n    val response = when (ex) {\n      // buildIOExceptionMessage should build relevant exception message as a serialisable object\n      is IOException -&gt; buildIOExceptionMessage(ex)\n      else -&gt; buildExceptionMessage(ex)\n    }\n\n    // Or you can also set them inside while conditions\n    exchange.response.headers.contentType = MediaType.APPLICATION_PROBLEM_JSON\n    exchange.response.statusCode = HttpStatus.valueOf(response.status)\n    val bytes = objectMapper.writeValueAsBytes(response)\n    val buffer = exchange.response.bufferFactory().wrap(bytes)\n    return exchange.response.writeWith(Mono.just(buffer))\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10603787,"reputation":63,"user_id":7809939,"display_name":"elesg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693571721,"creation_date":1693571173,"answer_id":77023109,"question_id":43575538,"body_markdown":"Extending [Akhil&#39;s](https://stackoverflow.com/a/58266972/7809939) answer to implement ErrorWebExceptionHandler in java.\r\n\r\n    public Mono&lt;Void&gt; handle(ServerWebExchange exchange, Throwable ex) {\r\n\t   return Mono.just(exchange.getResponse())\r\n\t\t\t.doOnNext(response -&gt; response.getHeaders().setContentType(MediaType.APPLICATION_JSON))\r\n\t\t\t.doOnNext(response-&gt;response.setStatusCode(HttpStatus.&lt;HTTP STATUS&gt;))\r\n\t\t\t.flatMap(response -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn response.writeWith(Mono.just(response.bufferFactory()\r\n\t\t\t\t\t\t\t\t\t.wrap(new ObjectMapper().writeValueAsBytes(new CustomResponseObject()))));\r\n\t\t\t\t} catch (JsonProcessingException e) {\r\n\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.doOnSuccess(e -&gt; log.info(&quot;Exception occurred&quot;, ex));\r\n    }\r\n\r\nshould replace **HTTP STATUS** and **CustomResponseObject** with expected one along with **ObjectMapper** instance.","title":"what is the right way to handle errors in spring-webflux","body":"<p>Extending <a href=\"https://stackoverflow.com/a/58266972/7809939\">Akhil's</a> answer to implement ErrorWebExceptionHandler in java.</p>\n<pre><code>public Mono&lt;Void&gt; handle(ServerWebExchange exchange, Throwable ex) {\n   return Mono.just(exchange.getResponse())\n        .doOnNext(response -&gt; response.getHeaders().setContentType(MediaType.APPLICATION_JSON))\n        .doOnNext(response-&gt;response.setStatusCode(HttpStatus.&lt;HTTP STATUS&gt;))\n        .flatMap(response -&gt; {\n            try {\n                return response.writeWith(Mono.just(response.bufferFactory()\n                                .wrap(new ObjectMapper().writeValueAsBytes(new CustomResponseObject()))));\n            } catch (JsonProcessingException e) {\n                throw new RuntimeException(e);\n            }\n        })\n        .doOnSuccess(e -&gt; log.info(&quot;Exception occurred&quot;, ex));\n}\n</code></pre>\n<p>should replace <strong>HTTP STATUS</strong> and <strong>CustomResponseObject</strong> with expected one along with <strong>ObjectMapper</strong> instance.</p>\n"}],"owner":{"account_id":10750902,"reputation":553,"user_id":7910403,"display_name":"Juan Medina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40637,"favorite_count":0,"down_vote_count":1,"up_vote_count":23,"accepted_answer_id":44627688,"answer_count":7,"score":22,"last_activity_date":1693571721,"creation_date":1492975477,"question_id":43575538,"body_markdown":"I&#39;ve been doing some research using spring-webflux and I like to understand what should be the right way to handle errors using Router Functions.\r\n\r\nI&#39;ve created an small project to test a couple of scenarios, and I like to get feedback about it, and see what other people is doing.\r\n\r\n\r\nSo far what I doing is.\r\n\r\nGiving the following routing function:\r\n\r\n    @Component\r\n    public class HelloRouter {\r\n        @Bean\r\n        RouterFunction&lt;?&gt; helloRouterFunction() {\r\n            HelloHandler handler = new HelloHandler();\r\n            ErrorHandler error = new ErrorHandler();\r\n\r\n            return nest(path(&quot;/hello&quot;),\r\n                    nest(accept(APPLICATION_JSON),\r\n                            route(GET(&quot;/&quot;), handler::defaultHello)\r\n                                    .andRoute(POST(&quot;/&quot;), handler::postHello)\r\n                                    .andRoute(GET(&quot;/{name}&quot;), handler::getHello)\r\n                    )).andOther(route(RequestPredicates.all(), error::notFound));\r\n        }\r\n    }\r\n\r\nI&#39;ve do this on my handler\r\n\r\n    class HelloHandler {\r\n\r\n        private ErrorHandler error;\r\n\r\n        private static final String DEFAULT_VALUE = &quot;world&quot;;\r\n\r\n        HelloHandler() {\r\n            error = new ErrorHandler();\r\n        }\r\n\r\n        private Mono&lt;ServerResponse&gt; getResponse(String value) {\r\n            if (value.equals(&quot;&quot;)) {\r\n                return Mono.error(new InvalidParametersException(&quot;bad parameters&quot;));\r\n            }\r\n            return ServerResponse.ok().body(Mono.just(new HelloResponse(value)), HelloResponse.class);\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; defaultHello(ServerRequest request) {\r\n            return getResponse(DEFAULT_VALUE);\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; getHello(ServerRequest request) {\r\n            return getResponse(request.pathVariable(&quot;name&quot;));\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; postHello(ServerRequest request) {\r\n            return request.bodyToMono(HelloRequest.class).flatMap(helloRequest -&gt; getResponse(helloRequest.getName()))\r\n                    .onErrorResume(error::badRequest);\r\n        }\r\n    }\r\n\r\n\r\nThem my error handler do:\r\n\r\n    class ErrorHandler {\r\n\r\n        private static Logger logger = LoggerFactory.getLogger(ErrorHandler.class);\r\n\r\n        private static BiFunction&lt;HttpStatus,String,Mono&lt;ServerResponse&gt;&gt; response =\r\n        (status,value)-&gt; ServerResponse.status(status).body(Mono.just(new ErrorResponse(value)),\r\n                ErrorResponse.class);\r\n\r\n        Mono&lt;ServerResponse&gt; notFound(ServerRequest request){\r\n            return response.apply(HttpStatus.NOT_FOUND, &quot;not found&quot;);\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; badRequest(Throwable error){\r\n            logger.error(&quot;error raised&quot;, error);\r\n            return response.apply(HttpStatus.BAD_REQUEST, error.getMessage());\r\n        }\r\n    }\r\n\r\nHere is the full sample repo:\r\n\r\nhttps://github.com/LearningByExample/reactive-ms-example","title":"what is the right way to handle errors in spring-webflux","body":"<p>I've been doing some research using spring-webflux and I like to understand what should be the right way to handle errors using Router Functions.</p>\n\n<p>I've created an small project to test a couple of scenarios, and I like to get feedback about it, and see what other people is doing.</p>\n\n<p>So far what I doing is.</p>\n\n<p>Giving the following routing function:</p>\n\n<pre><code>@Component\npublic class HelloRouter {\n    @Bean\n    RouterFunction&lt;?&gt; helloRouterFunction() {\n        HelloHandler handler = new HelloHandler();\n        ErrorHandler error = new ErrorHandler();\n\n        return nest(path(\"/hello\"),\n                nest(accept(APPLICATION_JSON),\n                        route(GET(\"/\"), handler::defaultHello)\n                                .andRoute(POST(\"/\"), handler::postHello)\n                                .andRoute(GET(\"/{name}\"), handler::getHello)\n                )).andOther(route(RequestPredicates.all(), error::notFound));\n    }\n}\n</code></pre>\n\n<p>I've do this on my handler</p>\n\n<pre><code>class HelloHandler {\n\n    private ErrorHandler error;\n\n    private static final String DEFAULT_VALUE = \"world\";\n\n    HelloHandler() {\n        error = new ErrorHandler();\n    }\n\n    private Mono&lt;ServerResponse&gt; getResponse(String value) {\n        if (value.equals(\"\")) {\n            return Mono.error(new InvalidParametersException(\"bad parameters\"));\n        }\n        return ServerResponse.ok().body(Mono.just(new HelloResponse(value)), HelloResponse.class);\n    }\n\n    Mono&lt;ServerResponse&gt; defaultHello(ServerRequest request) {\n        return getResponse(DEFAULT_VALUE);\n    }\n\n    Mono&lt;ServerResponse&gt; getHello(ServerRequest request) {\n        return getResponse(request.pathVariable(\"name\"));\n    }\n\n    Mono&lt;ServerResponse&gt; postHello(ServerRequest request) {\n        return request.bodyToMono(HelloRequest.class).flatMap(helloRequest -&gt; getResponse(helloRequest.getName()))\n                .onErrorResume(error::badRequest);\n    }\n}\n</code></pre>\n\n<p>Them my error handler do:</p>\n\n<pre><code>class ErrorHandler {\n\n    private static Logger logger = LoggerFactory.getLogger(ErrorHandler.class);\n\n    private static BiFunction&lt;HttpStatus,String,Mono&lt;ServerResponse&gt;&gt; response =\n    (status,value)-&gt; ServerResponse.status(status).body(Mono.just(new ErrorResponse(value)),\n            ErrorResponse.class);\n\n    Mono&lt;ServerResponse&gt; notFound(ServerRequest request){\n        return response.apply(HttpStatus.NOT_FOUND, \"not found\");\n    }\n\n    Mono&lt;ServerResponse&gt; badRequest(Throwable error){\n        logger.error(\"error raised\", error);\n        return response.apply(HttpStatus.BAD_REQUEST, error.getMessage());\n    }\n}\n</code></pre>\n\n<p>Here is the full sample repo:</p>\n\n<p><a href=\"https://github.com/LearningByExample/reactive-ms-example\" rel=\"noreferrer\">https://github.com/LearningByExample/reactive-ms-example</a></p>\n"},{"tags":["java","http","reactive","java-http-client"],"answers":[{"tags":[],"owner":{"account_id":14531657,"reputation":2813,"user_id":10496385,"display_name":"daniel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1541091176,"creation_date":1539363814,"answer_id":52784063,"question_id":52669764,"body_markdown":"You can print `ByteBuffer`s as they come, but there&#39;s no guarantee that a `ByteBuffer` corresponds to a chunk. Chunks are handled by the stack. One `ByteBuffer` slice will be pushed for every chunk - but if there isn’t enough space remaining in the buffer, then a partial chunk will be pushed. All the consumer sees is a stream of `ByteBuffer`s that contain the data.\r\nSo what you can do is print those `ByteBuffer`s as they come, but you have no guarantee that they correspond exactly one chunk each as was sent by the server.\r\n\r\nNote: If the body of your request is text based, then you can use\r\n`BodyHandlers.fromLineSubscriber(Subscriber&lt;? super String&gt; subscriber)` with a custom `Subscriber&lt;String&gt;` that will print each line as it comes.\r\nThe `BodyHandlers.fromLineSubscriber` does the hard word of decoding bytes into chars using the charset indicated in the response headers, buffering bytes if needed until they can be decoded (a ByteBuffer might end in the middle of an encoding sequence if the text contains chars encoded over multiple bytes), and splitting them at the line boundary. The Subscriber&lt;String&gt;::onNext method will be invoked once for each line in the text. See https://download.java.net/java/early_access/jdk11/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#fromLineSubscriber(java.util.concurrent.Flow.Subscriber) for more info.","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>You can print <code>ByteBuffer</code>s as they come, but there's no guarantee that a <code>ByteBuffer</code> corresponds to a chunk. Chunks are handled by the stack. One <code>ByteBuffer</code> slice will be pushed for every chunk - but if there isn’t enough space remaining in the buffer, then a partial chunk will be pushed. All the consumer sees is a stream of <code>ByteBuffer</code>s that contain the data.\nSo what you can do is print those <code>ByteBuffer</code>s as they come, but you have no guarantee that they correspond exactly one chunk each as was sent by the server.</p>\n\n<p>Note: If the body of your request is text based, then you can use\n<code>BodyHandlers.fromLineSubscriber(Subscriber&lt;? super String&gt; subscriber)</code> with a custom <code>Subscriber&lt;String&gt;</code> that will print each line as it comes.\nThe <code>BodyHandlers.fromLineSubscriber</code> does the hard word of decoding bytes into chars using the charset indicated in the response headers, buffering bytes if needed until they can be decoded (a ByteBuffer might end in the middle of an encoding sequence if the text contains chars encoded over multiple bytes), and splitting them at the line boundary. The Subscriber::onNext method will be invoked once for each line in the text. See <a href=\"https://download.java.net/java/early_access/jdk11/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#fromLineSubscriber(java.util.concurrent.Flow.Subscriber)\" rel=\"nofollow noreferrer\">https://download.java.net/java/early_access/jdk11/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#fromLineSubscriber(java.util.concurrent.Flow.Subscriber)</a> for more info.</p>\n"},{"tags":[],"owner":{"account_id":13027511,"reputation":136,"user_id":9415030,"display_name":"chegar999"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693475226,"creation_date":1539373073,"answer_id":52786014,"question_id":52669764,"body_markdown":"The python code does not ensure that the response body data is made available one [HTTP chunk][1] at a time. It just provides small amounts of data to the application, thus reducing the amount of memory consumed at the application level ( it could be buffered lower in the stack ). The Java 11 HTTP Client supports streaming through one of the streaming body handlers, `HttpResponse.BodyHandlers`:  `ofInputStream`, `ofByteArrayConsumer`, `ofLines`, etc.\r\n\r\nOr write your own handler / subscriber as demonstrated:\r\n  https://www.youtube.com/watch?v=qiaC0QMLz5Y\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc7230#section-4.1","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>The python code does not ensure that the response body data is made available one <a href=\"https://www.rfc-editor.org/rfc/rfc7230#section-4.1\" rel=\"nofollow noreferrer\">HTTP chunk</a> at a time. It just provides small amounts of data to the application, thus reducing the amount of memory consumed at the application level ( it could be buffered lower in the stack ). The Java 11 HTTP Client supports streaming through one of the streaming body handlers, <code>HttpResponse.BodyHandlers</code>:  <code>ofInputStream</code>, <code>ofByteArrayConsumer</code>, <code>ofLines</code>, etc.</p>\n<p>Or write your own handler / subscriber as demonstrated:\n<a href=\"https://www.youtube.com/watch?v=qiaC0QMLz5Y\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=qiaC0QMLz5Y</a></p>\n"},{"tags":[],"owner":{"account_id":19407,"reputation":1974,"user_id":45483,"display_name":"hohonuuli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1540912394,"creation_date":1540877153,"answer_id":53057925,"question_id":52669764,"body_markdown":"Thanks to @pavel and @chegar999 for their partial answers. They led me to my solution.\r\n\r\n### Overview\r\n\r\nThe solution I came up with is below. Basically, the solution is to use a custom `java.net.http.HttpResponse.BodySubscriber`. A BodySubscriber contains reactive methods (onSubscribe, onNext, onError, and onComplete) and a getBody method that basically returns a java [CompletableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) that will eventually produce the body of the HTTP request. Once you have your BodySubscriber in hand you can use it like:\r\n\r\n\r\n    HttpClient client = HttpClient.newHttpClient();\r\n    HttpRequest request = HttpRequest.newBuilder()\r\n        .uri(URI.create(uri))\r\n        .build();\r\n    \r\n    return client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\r\n        .whenComplete((r, t) -&gt; System.out.println(&quot;--- Status code &quot; + r.statusCode()))\r\n        .thenApply(HttpResponse::body);\r\n\r\nNote the line:\r\n\r\n`client.sendAsync(request, responseInfo -&gt; new StringSubscriber())`\r\n\r\nThat&#39;s where we register our custom BodySubscriber; in this case, my custom class is named `StringSubscriber`.\r\n\r\n### CustomSubscriber.java\r\n\r\nThis is a complete working example. Using Java 11, you can run it without compiling it. Just past it into a file named `CustomSubscriber.java`, then run the command `java CustomSubscriber &lt;some url&gt;`. It prints the contents of each chunk as it arrives. It also collects them and returns them as the body when the response has completed.\r\n\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpResponse.BodyHandlers;\r\n    import java.net.http.HttpResponse.BodySubscriber;\r\n    import java.net.URI;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.ArrayList;\r\n    import java.util.concurrent.CompletableFuture;\r\n    import java.util.concurrent.CompletionStage;\r\n    import java.util.concurrent.CopyOnWriteArrayList;\r\n    import java.util.concurrent.Flow;\r\n    import java.util.stream.Collectors;\r\n    import java.util.List;\r\n    \r\n    public class CustomSubscriber {\r\n    \r\n      public static void main(String[] args) {\r\n        CustomSubscriber cs = new CustomSubscriber();\r\n        String body = cs.get(args[0]).join();\r\n        System.out.println(&quot;--- Response body:\\n: ...&quot; + body + &quot;...&quot;);\r\n      }\r\n    \r\n      public CompletableFuture&lt;String&gt; get(String uri) {\r\n        HttpClient client = HttpClient.newHttpClient();\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n            .uri(URI.create(uri))\r\n            .build();\r\n    \r\n        return client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\r\n            .whenComplete((r, t) -&gt; System.out.println(&quot;--- Status code &quot; + r.statusCode()))\r\n            .thenApply(HttpResponse::body);\r\n      }\r\n    \r\n      static class StringSubscriber implements BodySubscriber&lt;String&gt; {\r\n    \r\n        final CompletableFuture&lt;String&gt; bodyCF = new CompletableFuture&lt;&gt;();\r\n        Flow.Subscription subscription;\r\n        List&lt;ByteBuffer&gt; responseData = new CopyOnWriteArrayList&lt;&gt;();\r\n    \r\n        @Override\r\n        public CompletionStage&lt;String&gt; getBody() {\r\n          return bodyCF;\r\n        }\r\n    \r\n        @Override\r\n        public void onSubscribe(Flow.Subscription subscription) {\r\n          this.subscription = subscription;\r\n          subscription.request(1); // Request first item\r\n        }\r\n    \r\n        @Override\r\n        public void onNext(List&lt;ByteBuffer&gt; buffers) {\r\n          System.out.println(&quot;-- onNext &quot; + buffers);\r\n          try {\r\n            System.out.println(&quot;\\tBuffer Content:\\n&quot; + asString(buffers));\r\n          } \r\n          catch (Exception e) {\r\n            System.out.println(&quot;\\tUnable to print buffer content&quot;);\r\n          }\r\n          buffers.forEach(ByteBuffer::rewind); // Rewind after reading\r\n          responseData.addAll(buffers);\r\n          subscription.request(1); // Request next item\r\n        }\r\n    \r\n        @Override\r\n        public void onError(Throwable throwable) {\r\n          bodyCF.completeExceptionally(throwable);\r\n        }\r\n    \r\n        @Override\r\n        public void onComplete() {\r\n          bodyCF.complete(asString(responseData));\r\n        }\r\n    \r\n        private String asString(List&lt;ByteBuffer&gt; buffers) {\r\n          return new String(toBytes(buffers), StandardCharsets.UTF_8);\r\n        }\r\n    \r\n        private byte[] toBytes(List&lt;ByteBuffer&gt; buffers) {\r\n          int size = buffers.stream()\r\n              .mapToInt(ByteBuffer::remaining)\r\n              .sum();\r\n          byte[] bs = new byte[size];\r\n          int offset = 0;\r\n          for (ByteBuffer buffer : buffers) {\r\n            int remaining = buffer.remaining();\r\n            buffer.get(bs, offset, remaining);\r\n            offset += remaining;\r\n          }\r\n          return bs;\r\n        }\r\n    \r\n      }\r\n    }\r\n\r\n### Trying it out\r\n\r\nTo test this solution, you&#39;ll need a server that sends a response that uses `Transfer-encoding: chunked` and sends it slow enough to watch the chunks arrive. I&#39;ve created one at &lt;https://github.com/hohonuuli/demo-chunk-server&gt; but you can spin it up using Docker like so:\r\n\r\n`docker run -p 8080:8080 hohonuuli/demo-chunk-server`\r\n\r\nThen run the CustomSubscriber.java code using `java CustomSubscriber.java http://localhost:8080/chunk/10`","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>Thanks to @pavel and @chegar999 for their partial answers. They led me to my solution.</p>\n\n<h3>Overview</h3>\n\n<p>The solution I came up with is below. Basically, the solution is to use a custom <code>java.net.http.HttpResponse.BodySubscriber</code>. A BodySubscriber contains reactive methods (onSubscribe, onNext, onError, and onComplete) and a getBody method that basically returns a java <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a> that will eventually produce the body of the HTTP request. Once you have your BodySubscriber in hand you can use it like:</p>\n\n<pre><code>HttpClient client = HttpClient.newHttpClient();\nHttpRequest request = HttpRequest.newBuilder()\n    .uri(URI.create(uri))\n    .build();\n\nreturn client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\n    .whenComplete((r, t) -&gt; System.out.println(\"--- Status code \" + r.statusCode()))\n    .thenApply(HttpResponse::body);\n</code></pre>\n\n<p>Note the line:</p>\n\n<p><code>client.sendAsync(request, responseInfo -&gt; new StringSubscriber())</code></p>\n\n<p>That's where we register our custom BodySubscriber; in this case, my custom class is named <code>StringSubscriber</code>.</p>\n\n<h3>CustomSubscriber.java</h3>\n\n<p>This is a complete working example. Using Java 11, you can run it without compiling it. Just past it into a file named <code>CustomSubscriber.java</code>, then run the command <code>java CustomSubscriber &lt;some url&gt;</code>. It prints the contents of each chunk as it arrives. It also collects them and returns them as the body when the response has completed.</p>\n\n<pre><code>import java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpResponse.BodyHandlers;\nimport java.net.http.HttpResponse.BodySubscriber;\nimport java.net.URI;\nimport java.nio.ByteBuffer;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionStage;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.Flow;\nimport java.util.stream.Collectors;\nimport java.util.List;\n\npublic class CustomSubscriber {\n\n  public static void main(String[] args) {\n    CustomSubscriber cs = new CustomSubscriber();\n    String body = cs.get(args[0]).join();\n    System.out.println(\"--- Response body:\\n: ...\" + body + \"...\");\n  }\n\n  public CompletableFuture&lt;String&gt; get(String uri) {\n    HttpClient client = HttpClient.newHttpClient();\n    HttpRequest request = HttpRequest.newBuilder()\n        .uri(URI.create(uri))\n        .build();\n\n    return client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\n        .whenComplete((r, t) -&gt; System.out.println(\"--- Status code \" + r.statusCode()))\n        .thenApply(HttpResponse::body);\n  }\n\n  static class StringSubscriber implements BodySubscriber&lt;String&gt; {\n\n    final CompletableFuture&lt;String&gt; bodyCF = new CompletableFuture&lt;&gt;();\n    Flow.Subscription subscription;\n    List&lt;ByteBuffer&gt; responseData = new CopyOnWriteArrayList&lt;&gt;();\n\n    @Override\n    public CompletionStage&lt;String&gt; getBody() {\n      return bodyCF;\n    }\n\n    @Override\n    public void onSubscribe(Flow.Subscription subscription) {\n      this.subscription = subscription;\n      subscription.request(1); // Request first item\n    }\n\n    @Override\n    public void onNext(List&lt;ByteBuffer&gt; buffers) {\n      System.out.println(\"-- onNext \" + buffers);\n      try {\n        System.out.println(\"\\tBuffer Content:\\n\" + asString(buffers));\n      } \n      catch (Exception e) {\n        System.out.println(\"\\tUnable to print buffer content\");\n      }\n      buffers.forEach(ByteBuffer::rewind); // Rewind after reading\n      responseData.addAll(buffers);\n      subscription.request(1); // Request next item\n    }\n\n    @Override\n    public void onError(Throwable throwable) {\n      bodyCF.completeExceptionally(throwable);\n    }\n\n    @Override\n    public void onComplete() {\n      bodyCF.complete(asString(responseData));\n    }\n\n    private String asString(List&lt;ByteBuffer&gt; buffers) {\n      return new String(toBytes(buffers), StandardCharsets.UTF_8);\n    }\n\n    private byte[] toBytes(List&lt;ByteBuffer&gt; buffers) {\n      int size = buffers.stream()\n          .mapToInt(ByteBuffer::remaining)\n          .sum();\n      byte[] bs = new byte[size];\n      int offset = 0;\n      for (ByteBuffer buffer : buffers) {\n        int remaining = buffer.remaining();\n        buffer.get(bs, offset, remaining);\n        offset += remaining;\n      }\n      return bs;\n    }\n\n  }\n}\n</code></pre>\n\n<h3>Trying it out</h3>\n\n<p>To test this solution, you'll need a server that sends a response that uses <code>Transfer-encoding: chunked</code> and sends it slow enough to watch the chunks arrive. I've created one at <a href=\"https://github.com/hohonuuli/demo-chunk-server\" rel=\"nofollow noreferrer\">https://github.com/hohonuuli/demo-chunk-server</a> but you can spin it up using Docker like so:</p>\n\n<p><code>docker run -p 8080:8080 hohonuuli/demo-chunk-server</code></p>\n\n<p>Then run the CustomSubscriber.java code using <code>java CustomSubscriber.java http://localhost:8080/chunk/10</code></p>\n"},{"tags":[],"owner":{"account_id":11697848,"reputation":1,"user_id":8563987,"display_name":"Mohamed Aly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603484093,"creation_date":1603484093,"answer_id":64506742,"question_id":52669764,"body_markdown":"There is now a new Java library to address this kind of requirements\r\nRxSON: &lt;https://github.com/rxson/rxson&gt;\r\nIt utilizes the JsonPath wit RxJava to read JSON streamed chunks from the response as soon as they arrive, and parse them to java objects.\r\n\r\nExample:\r\n```\r\nString serviceURL = &quot;https://think.cs.vt.edu/corgis/datasets/json/airlines/airlines.json&quot;;\r\n   HttpRequest req = HttpRequest.newBuilder(URI.create(serviceURL)).GET().build();\r\n   RxSON rxson = new RxSON.Builder().build();\r\n\r\n   String jsonPath = &quot;$[*].Airport.Name&quot;;\r\n   Flowable&lt;String&gt; airportStream = rxson.create(String.class, req, jsonPath);\r\n   airportStream\r\n       .doOnNext(it -&gt; System.out.println(&quot;Received new item: &quot; + it))\r\n       //Just for test\r\n       .toList()\r\n       .blockingGet();\r\n```","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>There is now a new Java library to address this kind of requirements\nRxSON: <a href=\"https://github.com/rxson/rxson\" rel=\"nofollow noreferrer\">https://github.com/rxson/rxson</a>\nIt utilizes the JsonPath wit RxJava to read JSON streamed chunks from the response as soon as they arrive, and parse them to java objects.</p>\n<p>Example:</p>\n<pre><code>String serviceURL = &quot;https://think.cs.vt.edu/corgis/datasets/json/airlines/airlines.json&quot;;\n   HttpRequest req = HttpRequest.newBuilder(URI.create(serviceURL)).GET().build();\n   RxSON rxson = new RxSON.Builder().build();\n\n   String jsonPath = &quot;$[*].Airport.Name&quot;;\n   Flowable&lt;String&gt; airportStream = rxson.create(String.class, req, jsonPath);\n   airportStream\n       .doOnNext(it -&gt; System.out.println(&quot;Received new item: &quot; + it))\n       //Just for test\n       .toList()\n       .blockingGet();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693571237,"creation_date":1693571237,"answer_id":77023117,"question_id":52669764,"body_markdown":"This is a trivial solution based on chegar999&#39;s answer:\r\n\r\n    httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofByteArrayConsumer((final Optional&lt;byte[]&gt; receivedBytesOptional) -&gt; {\r\n        if (receivedBytesOptional.isEmpty()) {\r\n            System.out.println(&quot;Done&quot;);\r\n        } else {\r\n            final byte[] receivedBytes = receivedBytesOptional.get();\r\n            final String received = new String(receivedBytes, StandardCharsets.UTF_8);\r\n            System.out.println(&quot;Received: &quot; + received);\r\n        }\r\n    }));\r\n\r\nIt works as long as your multi-byte characters aren&#39;t divided into two chunks (otherwise, use `java.nio.charset.CharsetDecoder#decode()`).\r\n\r\nIn my humble opinion, it&#39;s easier and less error prone than using a custom subscriber, which is more suitable in cases that require more flexibility.","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>This is a trivial solution based on chegar999's answer:</p>\n<pre><code>httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofByteArrayConsumer((final Optional&lt;byte[]&gt; receivedBytesOptional) -&gt; {\n    if (receivedBytesOptional.isEmpty()) {\n        System.out.println(&quot;Done&quot;);\n    } else {\n        final byte[] receivedBytes = receivedBytesOptional.get();\n        final String received = new String(receivedBytes, StandardCharsets.UTF_8);\n        System.out.println(&quot;Received: &quot; + received);\n    }\n}));\n</code></pre>\n<p>It works as long as your multi-byte characters aren't divided into two chunks (otherwise, use <code>java.nio.charset.CharsetDecoder#decode()</code>).</p>\n<p>In my humble opinion, it's easier and less error prone than using a custom subscriber, which is more suitable in cases that require more flexibility.</p>\n"}],"owner":{"account_id":19407,"reputation":1974,"user_id":45483,"display_name":"hohonuuli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6226,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":53057925,"answer_count":5,"score":1,"last_activity_date":1693571237,"creation_date":1538756562,"question_id":52669764,"body_markdown":"Java 11 introduces a new package, `java.net.http`, for making HTTP requests. For general usage, it&#39;s pretty straight forward.\r\n\r\nMy question is: how do I use `java.net.http` to handle chunked responses as each chunk is received by the client?\r\n\r\n`java.http.net` contains a reactive `BodySubscriber` which appears to be what I want, but I can&#39;t find an example of how it&#39;s used.\r\n\r\n### http_get_demo.py\r\n\r\nBelow is a python implementation that prints chunks as they arrive, I&#39;d like to the same thing with java.net.http:\r\n\r\n    import argparse\r\n    import requests\r\n    \r\n    \r\n    def main(url: str):\r\n        with requests.get(url, stream=True) as r:\r\n            for c in r.iter_content(chunk_size=1):\r\n                print(c.decode(&quot;UTF-8&quot;), end=&quot;&quot;)\r\n    \r\n    \r\n    if __name__ == &quot;__main__&quot;:\r\n        parser = argparse.ArgumentParser(\r\n            description=&quot;Read from a URL and print as text as chunks arrive&quot;)\r\n        parser.add_argument(&#39;url&#39;, type=str, help=&quot;A URL to read from&quot;)\r\n        args = parser.parse_args()\r\n    \r\n        main(args.url)\r\n\r\n\r\n### HttpGetDemo.java\r\n\r\nJust for completeness, here&#39;s a simple example of making a blocking request using java.net.http:\r\n\r\n\r\n    import java.net.URI;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpRequest;\r\n    \r\n    public class HttpGetDemo {\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n    \r\n        var request = HttpRequest.newBuilder()\r\n                .uri(URI.create(args[0]))\r\n                .build();\r\n    \r\n        var bodyHandler = HttpResponse.BodyHandlers\r\n                .ofString();\r\n    \r\n        var client = HttpClient.newHttpClient();\r\n        var response = client.send(request, bodyHandler);\r\n        System.out.println(response.body());\r\n    \r\n      }\r\n    }\r\n\r\n\r\n### HttpAsyncGetDemo.java\r\n\r\n\r\nAnd here&#39;s the example making an non-blocking/async request:\r\n\r\n    import java.net.URI;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpRequest;\r\n    \r\n    /**\r\n     * ReadChunked\r\n     */\r\n    public class HttpAsyncGetDemo {\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n    \r\n        var request = HttpRequest.newBuilder()\r\n                .uri(URI.create(args[0]))\r\n                .build();\r\n\r\n        var bodyHandler = HttpResponse.BodyHandlers\r\n                .ofString();\r\n\r\n        var client = HttpClient.newHttpClient();\r\n    \r\n        client.sendAsync(request, bodyHandler)\r\n                .thenApply(HttpResponse::body)\r\n                .thenAccept(System.out::println)\r\n                .join();\r\n    \r\n      }\r\n    }\r\n","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>Java 11 introduces a new package, <code>java.net.http</code>, for making HTTP requests. For general usage, it's pretty straight forward.</p>\n\n<p>My question is: how do I use <code>java.net.http</code> to handle chunked responses as each chunk is received by the client?</p>\n\n<p><code>java.http.net</code> contains a reactive <code>BodySubscriber</code> which appears to be what I want, but I can't find an example of how it's used.</p>\n\n<h3>http_get_demo.py</h3>\n\n<p>Below is a python implementation that prints chunks as they arrive, I'd like to the same thing with java.net.http:</p>\n\n<pre><code>import argparse\nimport requests\n\n\ndef main(url: str):\n    with requests.get(url, stream=True) as r:\n        for c in r.iter_content(chunk_size=1):\n            print(c.decode(\"UTF-8\"), end=\"\")\n\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser(\n        description=\"Read from a URL and print as text as chunks arrive\")\n    parser.add_argument('url', type=str, help=\"A URL to read from\")\n    args = parser.parse_args()\n\n    main(args.url)\n</code></pre>\n\n<h3>HttpGetDemo.java</h3>\n\n<p>Just for completeness, here's a simple example of making a blocking request using java.net.http:</p>\n\n<pre><code>import java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpRequest;\n\npublic class HttpGetDemo {\n\n  public static void main(String[] args) throws Exception {\n\n    var request = HttpRequest.newBuilder()\n            .uri(URI.create(args[0]))\n            .build();\n\n    var bodyHandler = HttpResponse.BodyHandlers\n            .ofString();\n\n    var client = HttpClient.newHttpClient();\n    var response = client.send(request, bodyHandler);\n    System.out.println(response.body());\n\n  }\n}\n</code></pre>\n\n<h3>HttpAsyncGetDemo.java</h3>\n\n<p>And here's the example making an non-blocking/async request:</p>\n\n<pre><code>import java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpRequest;\n\n/**\n * ReadChunked\n */\npublic class HttpAsyncGetDemo {\n\n  public static void main(String[] args) throws Exception {\n\n    var request = HttpRequest.newBuilder()\n            .uri(URI.create(args[0]))\n            .build();\n\n    var bodyHandler = HttpResponse.BodyHandlers\n            .ofString();\n\n    var client = HttpClient.newHttpClient();\n\n    client.sendAsync(request, bodyHandler)\n            .thenApply(HttpResponse::body)\n            .thenAccept(System.out::println)\n            .join();\n\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","ntlm","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":1,"creation_date":1636633163,"post_id":69928144,"comment_id":123612194,"body_markdown":"NTLM is authentication not authorization","body":"NTLM is authentication not authorization"},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1636633218,"post_id":69928144,"comment_id":123612217,"body_markdown":"Well, NTLM is crap. You need to leverage expect continue header to cope with non-repeatable requests.","body":"Well, NTLM is crap. You need to leverage expect continue header to cope with non-repeatable requests."},{"owner":{"account_id":3572259,"reputation":146,"user_id":2982299,"display_name":"maximusKon"},"score":0,"creation_date":1636635349,"post_id":69928144,"comment_id":123613079,"body_markdown":"@Michael-O how exactly expect continue header could help? I tried to add Expect: 100-Continue, but nothing is changed.","body":"@Michael-O how exactly expect continue header could help? I tried to add Expect: 100-Continue, but nothing is changed."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1636635605,"post_id":69928144,"comment_id":123613189,"body_markdown":"First of all, you need to do it [here](https://www.javadoc.io/static/org.apache.httpcomponents/httpclient/4.5.5/org/apache/http/client/config/RequestConfig.Builder.html#setExpectContinueEnabled(boolean)). The benefit of this is the client does *not* send the body, but the headers only and asks the server to evaluate them. So the server will tell you please authenticate first and keep the request body for you.","body":"First of all, you need to do it <a href=\"https://www.javadoc.io/static/org.apache.httpcomponents/httpclient/4.5.5/org/apache/http/client/config/RequestConfig.Builder.html#setExpectContinueEnabled(boolean)\" rel=\"nofollow noreferrer\">here</a>. The benefit of this is the client does <i>not</i> send the body, but the headers only and asks the server to evaluate them. So the server will tell you please authenticate first and keep the request body for you."},{"owner":{"account_id":3572259,"reputation":146,"user_id":2982299,"display_name":"maximusKon"},"score":0,"creation_date":1636639904,"post_id":69928144,"comment_id":123615102,"body_markdown":"@Michael-O Still the same result. I added code snippet of my prototype to question.","body":"@Michael-O Still the same result. I added code snippet of my prototype to question."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1636641651,"post_id":69928144,"comment_id":123615898,"body_markdown":"NTLM requires the NetBIOS domain to be provided. If nothing works you need to provide full debug logs to us.","body":"NTLM requires the NetBIOS domain to be provided. If nothing works you need to provide full debug logs to us."},{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":0,"creation_date":1636660962,"post_id":69928144,"comment_id":123623332,"body_markdown":"Do a cheap GET or HEAD first.","body":"Do a cheap GET or HEAD first."},{"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"score":0,"creation_date":1693905590,"post_id":69928144,"comment_id":135817708,"body_markdown":"please check my answer here:\nhttps://stackoverflow.com/questions/74575496/spring-webclient-windows-ntlm-authentication/77021558#77021558","body":"please check my answer here: <a href=\"https://stackoverflow.com/questions/74575496/spring-webclient-windows-ntlm-authentication/77021558#77021558\" title=\"spring webclient windows ntlm authentication\">stackoverflow.com/questions/74575496/&hellip;</a>"}],"owner":{"account_id":3572259,"reputation":146,"user_id":2982299,"display_name":"maximusKon"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":881,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1693571140,"creation_date":1636632876,"question_id":69928144,"body_markdown":"I try to execute HTTP requests using [Apache HttpClient 5][1] and I need NTLM authentication, which is supported by this client out of the box. But when I try to use it with Spring WebClient by HttpComponentsClientHttpConnector, there is an issue.\r\n\r\n[HttpComponentsClientHttpConnector][2] initializes [HttpComponentsClientHttpRequest][3] to execute request. But if the request has a body, [HttpComponentsClientHttpRequest][3] initializes ReactiveEntityProducer, which is not repeatable, so that, while I need [to execute 3 requests to authenticatу using NTLM][4], only one actually happens.\r\n\r\nIs it possible to change this behavior?\r\n\r\n**UPDATE**\r\n\r\nAdded my prototype java-code:\r\n\r\n```java\r\nBasicCredentialsProvider credsProvider = new BasicCredentialsProvider();\r\ncredsProvider.setCredentials(\r\n    new AuthScope(&quot;https&quot;, &quot;some-host&quot;, 443, null, StandardAuthScheme.NTLM),\r\n    new NTCredentials(&quot;test-user&quot;, &quot;test-password&quot;.toCharArray(), null, null)\r\n);\r\n\r\nWebClient webClient = WebClient.builder()\r\n    .clientConnector(new HttpComponentsClientHttpConnector\r\n        (HttpAsyncClients\r\n            .custom()\r\n            .setDefaultCredentialsProvider(credsProvider)\r\n            .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\r\n            .setDefaultRequestConfig(\r\n                RequestConfig.custom()\r\n                    .setAuthenticationEnabled(true)\r\n                    .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\r\n                    .setExpectContinueEnabled(true)\r\n                    .build())\r\n            .build()))\r\n    .build();\r\n\r\nwebClient\r\n    .method(HttpMethod.POST)\r\n    .uri(&quot;https://some-host/execute&quot;)\r\n    .header(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;)\r\n    .header(&quot;SOAPAction&quot;, &quot;http://schemas.microsoft.com/exchange/services/2006/messagesCreateItem&quot;)\r\n    .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\r\n    .header(&quot;Accept-Language&quot;, &quot;ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7&quot;)\r\n    .header(&quot;Expect&quot;, &quot;100-continue&quot;)\r\n    .body(BodyInserters.fromValue(\r\n        &quot;&lt;SOME_XML_BODY&gt;&quot;\r\n    ))\r\n    .exchangeToMono(clientResponse -&gt; {\r\n        return clientResponse.bodyToMono(Object.class);\r\n    })\r\n    .subscribe();\r\n```\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-5.1.x/\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpConnector.java\r\n  [3]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpRequest.java\r\n  [4]: http://davenport.sourceforge.net/ntlm.html","title":"Problem with NTLM authentication on executing http request by Spring WebClient and HttpComponentsClientHttpConnector","body":"<p>I try to execute HTTP requests using <a href=\"https://hc.apache.org/httpcomponents-client-5.1.x/\" rel=\"nofollow noreferrer\">Apache HttpClient 5</a> and I need NTLM authentication, which is supported by this client out of the box. But when I try to use it with Spring WebClient by HttpComponentsClientHttpConnector, there is an issue.</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpConnector.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpConnector</a> initializes <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpRequest.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpRequest</a> to execute request. But if the request has a body, <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpRequest.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpRequest</a> initializes ReactiveEntityProducer, which is not repeatable, so that, while I need <a href=\"http://davenport.sourceforge.net/ntlm.html\" rel=\"nofollow noreferrer\">to execute 3 requests to authenticatу using NTLM</a>, only one actually happens.</p>\n<p>Is it possible to change this behavior?</p>\n<p><strong>UPDATE</strong></p>\n<p>Added my prototype java-code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BasicCredentialsProvider credsProvider = new BasicCredentialsProvider();\ncredsProvider.setCredentials(\n    new AuthScope(&quot;https&quot;, &quot;some-host&quot;, 443, null, StandardAuthScheme.NTLM),\n    new NTCredentials(&quot;test-user&quot;, &quot;test-password&quot;.toCharArray(), null, null)\n);\n\nWebClient webClient = WebClient.builder()\n    .clientConnector(new HttpComponentsClientHttpConnector\n        (HttpAsyncClients\n            .custom()\n            .setDefaultCredentialsProvider(credsProvider)\n            .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\n            .setDefaultRequestConfig(\n                RequestConfig.custom()\n                    .setAuthenticationEnabled(true)\n                    .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\n                    .setExpectContinueEnabled(true)\n                    .build())\n            .build()))\n    .build();\n\nwebClient\n    .method(HttpMethod.POST)\n    .uri(&quot;https://some-host/execute&quot;)\n    .header(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;)\n    .header(&quot;SOAPAction&quot;, &quot;http://schemas.microsoft.com/exchange/services/2006/messagesCreateItem&quot;)\n    .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\n    .header(&quot;Accept-Language&quot;, &quot;ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7&quot;)\n    .header(&quot;Expect&quot;, &quot;100-continue&quot;)\n    .body(BodyInserters.fromValue(\n        &quot;&lt;SOME_XML_BODY&gt;&quot;\n    ))\n    .exchangeToMono(clientResponse -&gt; {\n        return clientResponse.bodyToMono(Object.class);\n    })\n    .subscribe();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-webclient"],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1693607551,"answer_count":0,"score":1,"last_activity_date":1693571120,"creation_date":1662647655,"question_id":73650844,"body_markdown":"I am using Spring WebClient to hit a Rest Service which requires NTLM Authentication. It works in Postman like below:\r\n\r\n1. Hit the URL - http://example.com:83/api/auth/token with authentication as NTLM authentication and provide the user name and password. When hitting this service, it returns a token.\r\n2. This token has to be passed in header as bearer token for the actual post service - \r\nhttp://example.com:89/api/v1/employee\r\n\r\nBut when I tried the same using Spring WebClient, I am facing `401 - Unauthorized error`. Below the code snippet I am using.\r\n\r\n    BasicCredentialsProvider tokenProvider = new BasicCredentialsProvider();\r\n        tokenProvider.setCredentials(\r\n            new AuthScope(&quot;http&quot;, &quot;example.com&quot;, 83, &quot;/api/auth/token&quot;, StandardAuthScheme.NTLM),\r\n            new NTCredentials(&quot;testuser&quot;, &quot;pwd&quot;.toCharArray(), null, null)\r\n        );\r\n        webClient = WebClient.builder()\r\n            .clientConnector(new HttpComponentsClientHttpConnector\r\n                (HttpAsyncClients\r\n                    .custom()\r\n                    .setDefaultCredentialsProvider(tokenProvider)\r\n                    .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\r\n                    .setDefaultRequestConfig(\r\n                        RequestConfig.custom()\r\n                            .setAuthenticationEnabled(true)\r\n                   .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\r\n                            .setExpectContinueEnabled(true)\r\n                            .build())\r\n                    .build()))\r\n            .build();\r\n    \r\n        ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt; result =\r\n            new ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt;() {};\r\n    \r\n        Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n        body.put(&quot;test-key&quot;, &quot;value&quot;);\r\n        webClient.post().uri(&quot;http://example.com:89/api/v1/employee&quot;).contentType(MediaType.APPLICATION_JSON).accept(MediaType.ALL).bodyValue(body).retrieve().bodyToMono(result).block();\r\n\r\nIs this right approach?\r\n","title":"Spring Boot Webclient with NTLM Authentication","body":"<p>I am using Spring WebClient to hit a Rest Service which requires NTLM Authentication. It works in Postman like below:</p>\n<ol>\n<li>Hit the URL - <a href=\"http://example.com:83/api/auth/token\" rel=\"nofollow noreferrer\">http://example.com:83/api/auth/token</a> with authentication as NTLM authentication and provide the user name and password. When hitting this service, it returns a token.</li>\n<li>This token has to be passed in header as bearer token for the actual post service -\n<a href=\"http://example.com:89/api/v1/employee\" rel=\"nofollow noreferrer\">http://example.com:89/api/v1/employee</a></li>\n</ol>\n<p>But when I tried the same using Spring WebClient, I am facing <code>401 - Unauthorized error</code>. Below the code snippet I am using.</p>\n<pre><code>BasicCredentialsProvider tokenProvider = new BasicCredentialsProvider();\n    tokenProvider.setCredentials(\n        new AuthScope(&quot;http&quot;, &quot;example.com&quot;, 83, &quot;/api/auth/token&quot;, StandardAuthScheme.NTLM),\n        new NTCredentials(&quot;testuser&quot;, &quot;pwd&quot;.toCharArray(), null, null)\n    );\n    webClient = WebClient.builder()\n        .clientConnector(new HttpComponentsClientHttpConnector\n            (HttpAsyncClients\n                .custom()\n                .setDefaultCredentialsProvider(tokenProvider)\n                .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\n                .setDefaultRequestConfig(\n                    RequestConfig.custom()\n                        .setAuthenticationEnabled(true)\n               .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\n                        .setExpectContinueEnabled(true)\n                        .build())\n                .build()))\n        .build();\n\n    ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt; result =\n        new ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt;() {};\n\n    Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n    body.put(&quot;test-key&quot;, &quot;value&quot;);\n    webClient.post().uri(&quot;http://example.com:89/api/v1/employee&quot;).contentType(MediaType.APPLICATION_JSON).accept(MediaType.ALL).bodyValue(body).retrieve().bodyToMono(result).block();\n</code></pre>\n<p>Is this right approach?</p>\n"},{"tags":["java","hibernate","postgresql","jdbc","ubuntu-14.04"],"comments":[{"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"score":0,"creation_date":1456847035,"post_id":35725306,"comment_id":59129204,"body_markdown":"hibernate.cfg.xml is in the src folder itself","body":"hibernate.cfg.xml is in the src folder itself"},{"owner":{"account_id":9198997,"reputation":366,"user_id":6836704,"display_name":"eaccmk"},"score":0,"creation_date":1619881782,"post_id":35725306,"comment_id":119040585,"body_markdown":"Detailed Answer with screen shot to fix below (  https://stackoverflow.com/a/67347700/6836704 )","body":"Detailed Answer with screen shot to fix below (  <a href=\"https://stackoverflow.com/a/67347700/6836704\">stackoverflow.com/a/67347700/6836704</a> )"}],"answers":[{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1532594752,"creation_date":1456842570,"answer_id":35725560,"question_id":35725306,"body_markdown":"If you have your `hibernate.cfg.xml` in the root of the source folder, just do \r\n\r\n    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\r\n\r\nIf it is in the package, for an example in the `org.nitish.caller`, specify path by this way\r\n\r\n     SessionFactory sessionFactory = new Configuration()\r\n        .configure(&quot;/org/nitish/caller/hibernate.cfg.xml&quot;).buildSessionFactory();\r\n\r\nYou need to close the `session` (in the `finally` block). Don&#39;t forget to add `rollback` code.\r\n\r\nPlease, add `@Table` annotation to the `UserDetails`.\r\n\r\n**Update**\r\n\r\nThe reason of the error that Hibernate can&#39;t find `org.postgresql.Driver` class. It resides in postgresql jar. You have that jar at your image, but may be you don&#39;t add it to the classpath. Refer [How to Add JARs to Project Build Paths in Eclipse (Java)](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29).\r\n\r\nTo close a `session` in the `finally` block you need to have `session` variable outside the `try` block.\r\n\r\n        Session session = sessionFactory.openSession();\r\n        \r\n        try{\r\n\r\n        } finally {\r\n            session.close();\r\n       }\r\n\r\n \r\n\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>If you have your <code>hibernate.cfg.xml</code> in the root of the source folder, just do </p>\n\n<pre><code>SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\n</code></pre>\n\n<p>If it is in the package, for an example in the <code>org.nitish.caller</code>, specify path by this way</p>\n\n<pre><code> SessionFactory sessionFactory = new Configuration()\n    .configure(\"/org/nitish/caller/hibernate.cfg.xml\").buildSessionFactory();\n</code></pre>\n\n<p>You need to close the <code>session</code> (in the <code>finally</code> block). Don't forget to add <code>rollback</code> code.</p>\n\n<p>Please, add <code>@Table</code> annotation to the <code>UserDetails</code>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>The reason of the error that Hibernate can't find <code>org.postgresql.Driver</code> class. It resides in postgresql jar. You have that jar at your image, but may be you don't add it to the classpath. Refer <a href=\"http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29\" rel=\"noreferrer\">How to Add JARs to Project Build Paths in Eclipse (Java)</a>.</p>\n\n<p>To close a <code>session</code> in the <code>finally</code> block you need to have <code>session</code> variable outside the <code>try</code> block.</p>\n\n<pre><code>    Session session = sessionFactory.openSession();\n\n    try{\n\n    } finally {\n        session.close();\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1645087,"reputation":3440,"user_id":1516759,"accept_rate":33,"display_name":"Visruth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486358577,"creation_date":1486358147,"answer_id":42060734,"question_id":35725306,"body_markdown":"`new Configuration().configure()` takes `hibernate.cfg.xml` from root of class path directory. `new Configuration().configure(&quot;/com/company/project/hibernate.cfg.xml&quot;)` takes from *root of class path + com/company/project/hibernate.cfg.xml*. \r\n\r\nIf you are using different file name for hibernate configuration from root of class path, then eg: `new Configuration().configure(&quot;/database.cfg.xml&quot;)`\r\n\r\nIf you want to give the full system path of the configuration file then `new Configuration().configure(new File(&quot;/home/visruth/config/hibernate.cfg.xml))` which takes the configuration file from the given exact location.\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p><code>new Configuration().configure()</code> takes <code>hibernate.cfg.xml</code> from root of class path directory. <code>new Configuration().configure(\"/com/company/project/hibernate.cfg.xml\")</code> takes from <em>root of class path + com/company/project/hibernate.cfg.xml</em>. </p>\n\n<p>If you are using different file name for hibernate configuration from root of class path, then eg: <code>new Configuration().configure(\"/database.cfg.xml\")</code></p>\n\n<p>If you want to give the full system path of the configuration file then <code>new Configuration().configure(new File(\"/home/visruth/config/hibernate.cfg.xml))</code> which takes the configuration file from the given exact location.</p>\n"},{"tags":[],"owner":{"account_id":4020772,"reputation":1000,"user_id":3311216,"accept_rate":40,"display_name":"ASH"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1567581266,"creation_date":1520788367,"answer_id":49222782,"question_id":35725306,"body_markdown":"I fixed this by moving my config file to `src/main/resources`. This is the standard directory for configuration files like hibernate.cfg.xml or hibernate.properties or application related properties files.","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>I fixed this by moving my config file to <code>src/main/resources</code>. This is the standard directory for configuration files like hibernate.cfg.xml or hibernate.properties or application related properties files.</p>\n"},{"tags":[],"owner":{"account_id":5746167,"reputation":11,"user_id":4537361,"display_name":"Parth Mehta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532242602,"creation_date":1532242075,"answer_id":51462692,"question_id":35725306,"body_markdown":"All the previous answers are perfect. However, if u need a really quick solution then I would recommend you to just put your hibernate.cfg.xml file in your source folder and write  \r\n    \r\n    SessionFactory sessionFactory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;).buildSessionFactory();\r\n\r\nThis is simple and works!","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>All the previous answers are perfect. However, if u need a really quick solution then I would recommend you to just put your hibernate.cfg.xml file in your source folder and write  </p>\n\n<pre><code>SessionFactory sessionFactory = new Configuration().configure(\"hibernate.cfg.xml\").buildSessionFactory();\n</code></pre>\n\n<p>This is simple and works!</p>\n"},{"tags":[],"owner":{"account_id":8154208,"reputation":4189,"user_id":6140314,"display_name":"Mohamed Anees A"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1534416518,"creation_date":1534416518,"answer_id":51875239,"question_id":35725306,"body_markdown":"    new Configuration().configure(new File(&quot;hibernate.cfg.xml&quot;)).buildSessionFactory());\r\n\r\nThis solved the error for me!","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<pre><code>new Configuration().configure(new File(\"hibernate.cfg.xml\")).buildSessionFactory());\n</code></pre>\n\n<p>This solved the error for me!</p>\n"},{"tags":[],"owner":{"account_id":6868647,"reputation":22249,"user_id":5279996,"display_name":"Braian Coronel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601203953,"creation_date":1601203953,"answer_id":64087629,"question_id":35725306,"body_markdown":"You have to use the absolute path of the file otherwise this will not work. Then with that path we build the file and pass it to the configuration.\r\n\r\n    private fun getFile(): File {\r\n        val currentWorkingDir = System.getProperty(&quot;user.dir&quot;)\r\n        val absoulutePath = &quot;$currentWorkingDir/src/main/resources/secret-hibernate.cfg.xml&quot;\r\n        println(&quot;Absolute Path of secret-hibernate.cfg.xml: $absoulutePath&quot;)\r\n        return File(absoulutePath)\r\n    }\r\n\r\nhttps://stackoverflow.com/a/64084771/5279996\r\n\r\nGL\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>You have to use the absolute path of the file otherwise this will not work. Then with that path we build the file and pass it to the configuration.</p>\n<pre><code>private fun getFile(): File {\n    val currentWorkingDir = System.getProperty(&quot;user.dir&quot;)\n    val absoulutePath = &quot;$currentWorkingDir/src/main/resources/secret-hibernate.cfg.xml&quot;\n    println(&quot;Absolute Path of secret-hibernate.cfg.xml: $absoulutePath&quot;)\n    return File(absoulutePath)\n}\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/64084771/5279996\">https://stackoverflow.com/a/64084771/5279996</a></p>\n<p>GL</p>\n"},{"tags":[],"owner":{"account_id":16563660,"reputation":1,"user_id":11968915,"display_name":"Shreyas K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614343931,"creation_date":1614343931,"answer_id":66386149,"question_id":35725306,"body_markdown":"Create a folder in src/main named &quot;resources&quot;\r\nPlace the hiberenate.cfg.xml file in it\r\nCreate the session factory object as\r\nSessionFactory factory = new Configuration().configure().buildSessionFactory();\r\n\r\nThis will successfully create the object\r\nYou can verify it by checking this should print false System.out.println(factory.isClosed());\r\n\r\nThis worked for me!\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Create a folder in src/main named &quot;resources&quot;\nPlace the hiberenate.cfg.xml file in it\nCreate the session factory object as\nSessionFactory factory = new Configuration().configure().buildSessionFactory();</p>\n<p>This will successfully create the object\nYou can verify it by checking this should print false System.out.println(factory.isClosed());</p>\n<p>This worked for me!</p>\n"},{"tags":[],"owner":{"account_id":9198997,"reputation":366,"user_id":6836704,"display_name":"eaccmk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619881659,"creation_date":1619881659,"answer_id":67347700,"question_id":35725306,"body_markdown":"Answer is right there in the first line of error (question) , if you read carefully , it says : \r\n`Could not locate cfg.xml resource` &gt;&gt; **resource**\r\n\r\nSeems there was nothing found in `resource` or may be `resource` is not set-up correctly\r\n\r\nIf you are using IDE such as Intellij :\r\n - Make sure you save your `hibernate.cfg.xml` under **src/main/resources/**&lt;Your_config_xml_here&gt;\r\n &gt; example : **src/main/resources/hibernate.cfg.xml**\r\n\r\n - This is important ( I have personally faced this almost always during initial set up of java/maven..) \r\n &gt; So, make sure you mark `resources` directory as **Resources root** so that it looks  \r\nexample , look at this image\r\n \r\n|**How to mark a folder as Resources root**|\r\n|:--:|\r\n|![](https://i.stack.imgur.com/iVdGv.png)|\r\n\r\n\r\n |**Before**|**After** _(look at 3 lines)_|\r\n |:----:|:----:|\r\n | ![](https://i.stack.imgur.com/uX0hO.png)|![](https://i.stack.imgur.com/qwoeN.png)|\r\n\r\nNow compile and build :\r\nA new jar will be build linking all files with latest changes , and you will no more be complained of missing  `hibernate.cfg.xml`\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Answer is right there in the first line of error (question) , if you read carefully , it says :\n<code>Could not locate cfg.xml resource</code> &gt;&gt; <strong>resource</strong></p>\n<p>Seems there was nothing found in <code>resource</code> or may be <code>resource</code> is not set-up correctly</p>\n<p>If you are using IDE such as Intellij :</p>\n<ul>\n<li>Make sure you save your <code>hibernate.cfg.xml</code> under <strong>src/main/resources/</strong>&lt;Your_config_xml_here&gt;</li>\n</ul>\n<blockquote>\n<p>example : <strong>src/main/resources/hibernate.cfg.xml</strong></p>\n</blockquote>\n<ul>\n<li>This is important ( I have personally faced this almost always during initial set up of java/maven..)</li>\n</ul>\n<blockquote>\n<p>So, make sure you mark <code>resources</code> directory as <strong>Resources root</strong> so that it looks<br />\nexample , look at this image</p>\n</blockquote>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"><strong>How to mark a folder as Resources root</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><img src=\"https://i.stack.imgur.com/iVdGv.png\" alt=\"\" /></td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"><strong>Before</strong></th>\n<th style=\"text-align: center;\"><strong>After</strong> <em>(look at 3 lines)</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><img src=\"https://i.stack.imgur.com/uX0hO.png\" alt=\"\" /></td>\n<td style=\"text-align: center;\"><img src=\"https://i.stack.imgur.com/qwoeN.png\" alt=\"\" /></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Now compile and build :\nA new jar will be build linking all files with latest changes , and you will no more be complained of missing  <code>hibernate.cfg.xml</code></p>\n"},{"tags":[],"owner":{"account_id":17051306,"reputation":1854,"user_id":12336882,"display_name":"Hamada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620740847,"creation_date":1620740847,"answer_id":67488114,"question_id":35725306,"body_markdown":"Create a file in the **src** or **root directory** project, named: &quot;hibernate.cfg.xml&quot;.\r\n\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n     &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n     &lt;hibernate-configuration&gt;\r\n       &lt;session-factory&gt;\r\n         &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n         &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/hibernate1&lt;/property&gt;     &lt;property name=&quot;connection.username&quot;&gt;hibernate1&lt;/property&gt;\r\n         &lt;property name=&quot;connection.password&quot;&gt;hibernate1&lt;/property&gt;\r\n         &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n         &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n       &lt;/session-factory&gt;\r\n     &lt;/hibernate-configuration&gt;\r\n\r\nIn your class\r\n\r\n \r\n\r\n      package io.yourPack;\r\n    \r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    \r\n    public class hibernateClass  {\r\n    \t\r\n    \t public static void main(String[] args) {\r\n    \t\t \r\n    \t\t SessionFactory myFactory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;).addAnnotatedClass(clima.class).buildSessionFactory();\r\n    \t\t\t\r\n    \t\t\tSession mySession = myFactory.openSession();\r\n    \t\t\t\r\n    \t\t\ttry {\r\n    \t\t\t\t\r\n    \t\t\t\tyourClass cl1 = new yourClass(&quot;java&quot;, &quot;1,2,3&quot;, 6);\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.beginTransaction();\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.save(cl1);\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.getTransaction().commit();\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(&quot;Inserted !!&quot;);\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.close();\r\n    \t\t\t\t\r\n    \t\t\t}finally {\r\n    \t\t\t\tmyFactory.close();\r\n    \t\t\t}\r\n    \t\t \r\n    \t }\r\n    \t\r\n    \r\n    }\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Create a file in the <strong>src</strong> or <strong>root directory</strong> project, named: &quot;hibernate.cfg.xml&quot;.</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n &lt;hibernate-configuration&gt;\n   &lt;session-factory&gt;\n     &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n     &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/hibernate1&lt;/property&gt;     &lt;property name=&quot;connection.username&quot;&gt;hibernate1&lt;/property&gt;\n     &lt;property name=&quot;connection.password&quot;&gt;hibernate1&lt;/property&gt;\n     &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n     &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n\n   &lt;/session-factory&gt;\n &lt;/hibernate-configuration&gt;\n</code></pre>\n<p>In your class</p>\n<pre><code>  package io.yourPack;\n\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\n\npublic class hibernateClass  {\n    \n     public static void main(String[] args) {\n         \n         SessionFactory myFactory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;).addAnnotatedClass(clima.class).buildSessionFactory();\n            \n            Session mySession = myFactory.openSession();\n            \n            try {\n                \n                yourClass cl1 = new yourClass(&quot;java&quot;, &quot;1,2,3&quot;, 6);\n                \n                mySession.beginTransaction();\n                \n                mySession.save(cl1);\n                \n                mySession.getTransaction().commit();\n                \n                System.out.println(&quot;Inserted !!&quot;);\n                \n                mySession.close();\n                \n            }finally {\n                myFactory.close();\n            }\n         \n     }\n    \n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16707658,"reputation":1,"user_id":12075758,"display_name":"Ashutosh kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649664447,"creation_date":1649664447,"answer_id":71824520,"question_id":35725306,"body_markdown":"If you are using maven build tool for hibernating configuration then you should use resource folder inside src/main folder. it will surely solve your problem. I was facing the same issue","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>If you are using maven build tool for hibernating configuration then you should use resource folder inside src/main folder. it will surely solve your problem. I was facing the same issue</p>\n"},{"tags":[],"owner":{"account_id":26800458,"reputation":1,"user_id":20392469,"display_name":"Devavrat Wadekar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680347065,"creation_date":1680347065,"answer_id":75905789,"question_id":35725306,"body_markdown":"&lt;property name=&quot;hbm2ddl.auto&quot;&gt;**update**&lt;/property&gt; \r\nmodify and write hibernate-cfg.xml file","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p><strong>update</strong>\nmodify and write hibernate-cfg.xml file</p>\n"},{"tags":[],"owner":{"account_id":29344746,"reputation":1,"user_id":22483396,"display_name":"HET PATEL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570294,"creation_date":1693570294,"answer_id":77023000,"question_id":35725306,"body_markdown":"Bro , I was facing same error and I realized that I was not having any folder called resources in my src/main so I just created one and make my hibernate.cfg.xml file there and it WORKS. \r\n\r\nThis is first time I&#39;m giving solution to someone on stackoverflow I hope it helps :)","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Bro , I was facing same error and I realized that I was not having any folder called resources in my src/main so I just created one and make my hibernate.cfg.xml file there and it WORKS.</p>\n<p>This is first time I'm giving solution to someone on stackoverflow I hope it helps :)</p>\n"}],"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52743,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":35725560,"answer_count":12,"score":11,"last_activity_date":1693570294,"creation_date":1456841839,"question_id":35725306,"body_markdown":"I am trying to connect to Postgresql9.1 in ubuntu with pgadmin3.\r\nMy Pgadmin3 GUI tool does not give any option to create tables by right clicking the database, but it is available in some videos I saw. Therefore, I used terminal to create the database and it showed up in pgadmin3.\r\n\r\n[my file structure][1]\r\n\r\n\r\nMy Userdetails file\r\n\r\n    package org.nitish.hiber;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n\r\n    @Entity\r\n    public class UserDetails {\r\n    \t@Id\r\n    \tprivate int userId;\r\n    \tprivate String userName;\r\n    \tpublic int getUserId() {\r\n    \t\treturn userId;\r\n    \t}\r\n    \tpublic void setUserId(int userId) {\r\n    \t\tthis.userId = userId;\r\n    \t}\r\n    \tpublic String getUserName() {\r\n    \t\treturn userName;\r\n    \t}\r\n    \tpublic void setUserName(String userName) {\r\n    \t\tthis.userName = userName;\r\n    \t}\r\n    }\r\n\r\nMy HibernateCaller file\r\n\r\n    package org.nitish.caller;\r\n    \r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.nitish.hiber.UserDetails;\r\n    \r\n    public class HibernateTest {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tUserDetails user = new UserDetails();\r\n    \t\tuser.setUserId(1);\r\n    \t\tuser.setUserName(&quot;First User&quot;);\r\n    \t\ttry {\r\n        \t\tSessionFactory sessionFactory = new Configuration().configure(&quot;/HibernateTest/src/hibernate.cfg.xml&quot;).buildSessionFactory();\r\n        \t\tSession session = sessionFactory.openSession();\r\n        \t\tsession.beginTransaction();\r\n        \t\tsession.save(user);\r\n        \t\tsession.getTransaction().commit();\r\n\r\n    \t\t} catch(HibernateException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\n    }\r\n\r\nHibernate.cfg.xml\r\n\r\n        &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC \r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \r\n            &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt; \r\n    &lt;!--\r\n      ~ Hibernate, Relational Persistence for Idiomatic Java\r\n      ~\r\n      ~ License: GNU Lesser General Public License (LGPL), version 2.1 or later.\r\n      ~ See the lgpl.txt file in the root directory or &lt;http://www.gnu.org/licenses/lgpl-2.1.html&gt;.\r\n      --&gt;\r\n    &lt;hibernate-configuration&gt;\r\n            \r\n      &lt;session-factory&gt;\r\n        &lt;!-- Database connection settings --&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver\t&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/hiber&lt;/property&gt;\r\n        &lt;property name=&quot;connection.username&quot;&gt;nitish&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n    \r\n        &lt;!-- JDBC connection pool (use the built-in) --&gt;\r\n        &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n    \r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\r\n    \r\n        &lt;!-- Enable Hibernate&#39;s automatic session context management --&gt;\r\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n    \r\n        &lt;!-- Disable the second-level cache  --&gt;\r\n        &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\r\n    \r\n        &lt;!-- Echo all executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n        &lt;!-- Drop and re-create the database schema on startup --&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n\r\n        &lt;mapping class=&quot;org.nitish.hiber.UserDetails&quot;/&gt;\r\n      &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nI am getting following error\r\n\r\n    Mar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Mar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment buildBytecodeProvider\r\n    INFO: HHH000021: Bytecode provider name : javassist\r\n    org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]\r\n    \tat org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlResource(ConfigLoader.java:53)\r\n    \tat org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:163)\r\n    \tat org.hibernate.cfg.Configuration.configure(Configuration.java:259)\r\n    \tat org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\r\n\r\n  [1]: https://i.stack.imgur.com/Tjazn.png\r\n\r\n\r\nAfter making few changes (could not use session.close() in finally block I think that should not cause this error)\r\n\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.1.0.Final}\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment buildBytecodeProvider\r\n    INFO: HHH000021: Bytecode provider name : javassist\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.boot.jaxb.internal.stax.LocalXmlResourceResolver resolveEntity\r\n    WARN: HHH90000012: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/hibernate-configuration. Use namespace http://www.hibernate.org/dtd/hibernate-configuration instead.  Support for obsolete DTD/XSD namespaces may be removed at any time.\r\n    Mar 1, 2016 10:13:35 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\r\n    Mar 1, 2016 10:13:35 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:244)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:208)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.handleTypes(MetadataBuildingProcess.java:352)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:111)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:83)\r\n    \tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:418)\r\n    \tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:87)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:692)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\r\n    \tat org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\r\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.postgresql.Driver]\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:229)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:161)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:117)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:88)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:234)\r\n    \t... 14 more\r\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.postgresql.Driver\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl$AggregatedClassLoader.findClass(ClassLoaderServiceImpl.java:217)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:323)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:268)\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:274)\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:226)\r\n    \t... 25 more","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>I am trying to connect to Postgresql9.1 in ubuntu with pgadmin3.\nMy Pgadmin3 GUI tool does not give any option to create tables by right clicking the database, but it is available in some videos I saw. Therefore, I used terminal to create the database and it showed up in pgadmin3.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tjazn.png\" rel=\"noreferrer\">my file structure</a></p>\n\n<p>My Userdetails file</p>\n\n<pre><code>package org.nitish.hiber;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class UserDetails {\n    @Id\n    private int userId;\n    private String userName;\n    public int getUserId() {\n        return userId;\n    }\n    public void setUserId(int userId) {\n        this.userId = userId;\n    }\n    public String getUserName() {\n        return userName;\n    }\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n}\n</code></pre>\n\n<p>My HibernateCaller file</p>\n\n<pre><code>package org.nitish.caller;\n\nimport org.hibernate.HibernateException;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\nimport org.nitish.hiber.UserDetails;\n\npublic class HibernateTest {\n\n    public static void main(String[] args) {\n        UserDetails user = new UserDetails();\n        user.setUserId(1);\n        user.setUserName(\"First User\");\n        try {\n            SessionFactory sessionFactory = new Configuration().configure(\"/HibernateTest/src/hibernate.cfg.xml\").buildSessionFactory();\n            Session session = sessionFactory.openSession();\n            session.beginTransaction();\n            session.save(user);\n            session.getTransaction().commit();\n\n        } catch(HibernateException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>Hibernate.cfg.xml</p>\n\n<pre><code>    &lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC \n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\" \n        \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt; \n&lt;!--\n  ~ Hibernate, Relational Persistence for Idiomatic Java\n  ~\n  ~ License: GNU Lesser General Public License (LGPL), version 2.1 or later.\n  ~ See the lgpl.txt file in the root directory or &lt;http://www.gnu.org/licenses/lgpl-2.1.html&gt;.\n  --&gt;\n&lt;hibernate-configuration&gt;\n\n  &lt;session-factory&gt;\n    &lt;!-- Database connection settings --&gt;\n    &lt;property name=\"connection.driver_class\"&gt;org.postgresql.Driver  &lt;/property&gt;\n    &lt;property name=\"connection.url\"&gt;jdbc:postgresql://localhost:5432/hiber&lt;/property&gt;\n    &lt;property name=\"connection.username\"&gt;nitish&lt;/property&gt;\n    &lt;property name=\"connection.password\"&gt;&lt;/property&gt;\n\n    &lt;!-- JDBC connection pool (use the built-in) --&gt;\n    &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n\n    &lt;!-- SQL dialect --&gt;\n    &lt;property name=\"dialect\"&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\n\n    &lt;!-- Enable Hibernate's automatic session context management --&gt;\n    &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n\n    &lt;!-- Disable the second-level cache  --&gt;\n    &lt;property name=\"cache.provider_class\"&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\n\n    &lt;!-- Echo all executed SQL to stdout --&gt;\n    &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n    &lt;!-- Drop and re-create the database schema on startup --&gt;\n    &lt;property name=\"hbm2ddl.auto\"&gt;create&lt;/property&gt;\n\n    &lt;mapping class=\"org.nitish.hiber.UserDetails\"/&gt;\n  &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>I am getting following error</p>\n\n<pre><code>Mar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nMar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\norg.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]\n    at org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlResource(ConfigLoader.java:53)\n    at org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:163)\n    at org.hibernate.cfg.Configuration.configure(Configuration.java:259)\n    at org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\n</code></pre>\n\n<p>After making few changes (could not use session.close() in finally block I think that should not cause this error)</p>\n\n<pre><code>Mar 1, 2016 10:13:34 AM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.1.0.Final}\nMar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nMar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\nMar 1, 2016 10:13:34 AM org.hibernate.boot.jaxb.internal.stax.LocalXmlResourceResolver resolveEntity\nWARN: HHH90000012: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/hibernate-configuration. Use namespace http://www.hibernate.org/dtd/hibernate-configuration instead.  Support for obsolete DTD/XSD namespaces may be removed at any time.\nMar 1, 2016 10:13:35 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\nMar 1, 2016 10:13:35 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\norg.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:244)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:208)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\n    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.handleTypes(MetadataBuildingProcess.java:352)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:111)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:83)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:418)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:87)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:692)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\n    at org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.postgresql.Driver]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:229)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:161)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:117)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:88)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:234)\n    ... 14 more\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : org.postgresql.Driver\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl$AggregatedClassLoader.findClass(ClassLoaderServiceImpl.java:217)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:274)\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:226)\n    ... 25 more\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542185236,"creation_date":1542183823,"answer_id":53295769,"question_id":53295725,"body_markdown":"In your loop `for(String word: strings)` you overwrite your `separatedByComma` variable.","title":"get a comma separated string using java stream","body":"<p>In your loop <code>for(String word: strings)</code> you overwrite your <code>separatedByComma</code> variable.</p>\n"},{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":1,"up_vote_count":33,"is_accepted":true,"score":32,"last_activity_date":1542184863,"creation_date":1542183943,"answer_id":53295809,"question_id":53295725,"body_markdown":"Each iteration of your `for` loop overwrites the value of `separatedByComma`. The first iteration assigns the `String` &quot;a&quot; to it, and the second replaces it with &quot;b&quot;.\r\n\r\nYou should `Stream` over the elements of the `strings` `List` in order to join the `String`s that match each of them into a single output `String`:\r\n\r\n    String separatedByComma = \r\n        strings.stream()\r\n               .flatMap(word -&gt; occList.stream()\r\n                                       .filter(occ -&gt; word.equalsIgnoreCase (occ.getOccSCd()))\r\n                                       .map (occ -&gt; occ.getOccSNm()))\r\n               .collect(Collectors.joining (&quot;,&quot;));\r\n\r\nOutput:\r\n\r\n    a,b","title":"get a comma separated string using java stream","body":"<p>Each iteration of your <code>for</code> loop overwrites the value of <code>separatedByComma</code>. The first iteration assigns the <code>String</code> \"a\" to it, and the second replaces it with \"b\".</p>\n\n<p>You should <code>Stream</code> over the elements of the <code>strings</code> <code>List</code> in order to join the <code>String</code>s that match each of them into a single output <code>String</code>:</p>\n\n<pre><code>String separatedByComma = \n    strings.stream()\n           .flatMap(word -&gt; occList.stream()\n                                   .filter(occ -&gt; word.equalsIgnoreCase (occ.getOccSCd()))\n                                   .map (occ -&gt; occ.getOccSNm()))\n           .collect(Collectors.joining (\",\"));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a,b\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1565312,"reputation":21,"user_id":1454254,"display_name":"Pribic Rubik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570088,"creation_date":1693570088,"answer_id":77022970,"question_id":53295725,"body_markdown":"You can also use `String.join(&quot;,&quot;, strings)`","title":"get a comma separated string using java stream","body":"<p>You can also use <code>String.join(&quot;,&quot;, strings)</code></p>\n"}],"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19264,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":53295809,"answer_count":3,"score":16,"last_activity_date":1693570088,"creation_date":1542183637,"question_id":53295725,"body_markdown":"I have the following code using java `Stream`.\r\n\r\nI am trying the get the function to build a string of value: &quot;a,b&quot; in this case.\r\nhowever, the output (`separatedByComma` in this case) is always &quot;b&quot;.\r\n\r\nCould somebody shed some light please?\r\n\r\n    @Test\r\n    public void testJoin() {\r\n        List&lt;MOccS&gt; occList = new ArrayList&lt;&gt; (  );\r\n        MOccS mOccS = new MOccS ();\r\n        mOccS.setOccSCd ( &quot;1&quot; );\r\n        mOccS.setOccSNm ( &quot;a&quot; );\r\n        occList.add ( mOccS );\r\n\r\n        MOccS mOccS2 = new MOccS ();\r\n        mOccS2.setOccSCd ( &quot;2&quot; );\r\n        mOccS2.setOccSNm ( &quot;b&quot; );\r\n        occList.add ( mOccS2 );\r\n\r\n\r\n        List&lt;String&gt; strings = new ArrayList&lt;&gt; (  );\r\n        strings.add ( &quot;1&quot; );\r\n        strings.add ( &quot;2&quot; );\r\n\r\n        String separatedByComma = &quot;&quot;;\r\n        for(String word: strings) {\r\n            separatedByComma = occList.stream ()\r\n                                      .filter ( occ -&gt; word.equalsIgnoreCase ( occ.getOccSCd () ) )         \r\n                                      .map ( occ -&gt; occ.getOccSNm () )\r\n                                      .collect ( Collectors.joining ( &quot;,&quot; ) );\r\n         }\r\n\r\n         System.out.println (separatedByComma);\r\n    }\r\n\r\n\r\n    class MOccS{\r\n        String occSCd;\r\n        String occSNm;\r\n        ...\r\n        getter/setter\r\n        ...\r\n    }\r\n\r\n\r\n   \r\n","title":"get a comma separated string using java stream","body":"<p>I have the following code using java <code>Stream</code>.</p>\n\n<p>I am trying the get the function to build a string of value: \"a,b\" in this case.\nhowever, the output (<code>separatedByComma</code> in this case) is always \"b\".</p>\n\n<p>Could somebody shed some light please?</p>\n\n<pre><code>@Test\npublic void testJoin() {\n    List&lt;MOccS&gt; occList = new ArrayList&lt;&gt; (  );\n    MOccS mOccS = new MOccS ();\n    mOccS.setOccSCd ( \"1\" );\n    mOccS.setOccSNm ( \"a\" );\n    occList.add ( mOccS );\n\n    MOccS mOccS2 = new MOccS ();\n    mOccS2.setOccSCd ( \"2\" );\n    mOccS2.setOccSNm ( \"b\" );\n    occList.add ( mOccS2 );\n\n\n    List&lt;String&gt; strings = new ArrayList&lt;&gt; (  );\n    strings.add ( \"1\" );\n    strings.add ( \"2\" );\n\n    String separatedByComma = \"\";\n    for(String word: strings) {\n        separatedByComma = occList.stream ()\n                                  .filter ( occ -&gt; word.equalsIgnoreCase ( occ.getOccSCd () ) )         \n                                  .map ( occ -&gt; occ.getOccSNm () )\n                                  .collect ( Collectors.joining ( \",\" ) );\n     }\n\n     System.out.println (separatedByComma);\n}\n\n\nclass MOccS{\n    String occSCd;\n    String occSNm;\n    ...\n    getter/setter\n    ...\n}\n</code></pre>\n"},{"tags":["java","mongodb","mongodb-query","aggregation-framework"],"answers":[{"tags":[],"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663331389,"creation_date":1663331389,"answer_id":73744848,"question_id":73744784,"body_markdown":"You should use the `$or` operator instead of `$and`.\r\n\r\nThis will fulfill:\r\n\r\n1. If `?0` is null, the document is selected.\r\n\r\n2. If `?0` is matched with `companyName` value, the document is selected.\r\n\r\n```\r\n{\r\n  $match: {\r\n    $expr: {\r\n      $or: [\r\n        { $eq: [?0, null] },\r\n        { $eq: [&quot;$companyName&quot;, ?0] }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\n```","title":"MongoDB Aggregation - Match if variable is not null","body":"<p>You should use the <code>$or</code> operator instead of <code>$and</code>.</p>\n<p>This will fulfill:</p>\n<ol>\n<li><p>If <code>?0</code> is null, the document is selected.</p>\n</li>\n<li><p>If <code>?0</code> is matched with <code>companyName</code> value, the document is selected.</p>\n</li>\n</ol>\n<pre><code>{\n  $match: {\n    $expr: {\n      $or: [\n        { $eq: [?0, null] },\n        { $eq: [&quot;$companyName&quot;, ?0] }\n      ]\n    }\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":17796153,"reputation":83,"user_id":12923941,"display_name":"PWJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73744848,"answer_count":1,"score":0,"last_activity_date":1693569859,"creation_date":1663331017,"question_id":73744784,"body_markdown":"I want to write a MongoDB Aggregation query to do the following:\r\n\r\n1. I pass a variable to the query method.\r\n2. If the variable is not null, I want to check if it matches.\r\n3. If the variable is null, no match is required\r\n\r\nFor example:\r\nI pass companyName as a variable and if it is not null, I get records for that company name, otherwise, if it is null, I get records for all company names.\r\n\r\nI have come up with something like this: (The match is a part of a larger aggregation query)\r\n\r\n```\r\n{ $match : { $and: [ { ?0: { $ne : null }} , {&#39;companyName&#39; : ?0}] }}\r\n\r\nList&lt;AggregationGroupSum&gt; getCountByCompany(String companyName)\r\n```\r\n\r\nThe `?0` is the variable companyName.\r\n\r\nI understand that the approach to check it is quite juvenile, but I am new to MongoDB and aggregation query and I would like any help on how to tackle this, whether it be through the aggregation or otherwise.\r\n\r\nThanks!","title":"MongoDB Aggregation - Match if variable is not null","body":"<p>I want to write a MongoDB Aggregation query to do the following:</p>\n<ol>\n<li>I pass a variable to the query method.</li>\n<li>If the variable is not null, I want to check if it matches.</li>\n<li>If the variable is null, no match is required</li>\n</ol>\n<p>For example:\nI pass companyName as a variable and if it is not null, I get records for that company name, otherwise, if it is null, I get records for all company names.</p>\n<p>I have come up with something like this: (The match is a part of a larger aggregation query)</p>\n<pre><code>{ $match : { $and: [ { ?0: { $ne : null }} , {'companyName' : ?0}] }}\n\nList&lt;AggregationGroupSum&gt; getCountByCompany(String companyName)\n</code></pre>\n<p>The <code>?0</code> is the variable companyName.</p>\n<p>I understand that the approach to check it is quite juvenile, but I am new to MongoDB and aggregation query and I would like any help on how to tackle this, whether it be through the aggregation or otherwise.</p>\n<p>Thanks!</p>\n"},{"tags":["java","web-services","soap","wsdl","jax-ws"],"answers":[{"tags":[],"owner":{"account_id":5347166,"reputation":383,"user_id":4262397,"display_name":"Nikhil D&#232;vr&#232;"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490044441,"creation_date":1490017212,"answer_id":42905108,"question_id":42897047,"body_markdown":"You can use this below line to add header before making a request, since you&#39;re using JAX-WS:\r\n\r\n    SOAPHeader header = envelope.addHeader();\r\n\r\n\r\nThere are plenty of tutorials that you could refer to.  Go to google and search for consuming SOAP Web Service. Here is one such tutorial you can refer to:\r\n\r\nhttp://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/\r\n\r\nHere is another good example you could use:\r\nhttps://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html\r\n\r\n\r\nHope this helps.\r\n\r\n","title":"How to set headers in Soap Request Java","body":"<p>You can use this below line to add header before making a request, since you're using JAX-WS:</p>\n\n<pre><code>SOAPHeader header = envelope.addHeader();\n</code></pre>\n\n<p>There are plenty of tutorials that you could refer to.  Go to google and search for consuming SOAP Web Service. Here is one such tutorial you can refer to:</p>\n\n<p><a href=\"http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/\" rel=\"nofollow noreferrer\">http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/</a></p>\n\n<p>Here is another good example you could use:\n<a href=\"https://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html\" rel=\"nofollow noreferrer\">https://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html</a></p>\n\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":2570248,"reputation":185,"user_id":2229181,"accept_rate":0,"display_name":"ROHIT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14098,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693569780,"creation_date":1489990980,"question_id":42897047,"body_markdown":"I am facing issue in forming a SOAP request.\r\n \r\nIn that request i am supposed to add username , password and some other info in header part not the part of payload.\r\n\r\nBelow the Entry in wsdl\r\n\r\n    &lt;wsdl:message name=&quot;InputUploadCustomerDocument_Headers&quot;&gt;\r\n    &lt;wsdl:part name=&quot;DocumentType&quot; element=&quot;tns:DocumentType&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;FileName&quot; element=&quot;tns:FileName&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;Password&quot; element=&quot;tns:Password&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;PinNo&quot; element=&quot;tns:PinNo&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;UserName&quot; element=&quot;tns:UserName&quot;/&gt;\r\n    &lt;/wsdl:message&gt;\r\n    &lt;wsdl:message name=&quot;ReturnUploadCustomerDocument&quot;&gt;\r\n    &lt;wsdl:part name=&quot;parameters&quot; element=&quot;tns:ReturnUploadCustomerDocument&quot;/&gt;\r\n    &lt;/wsdl:message&gt;\r\n\r\n\r\n    &lt;wsdl:operation name=&quot;UploadCustomerDocument&quot;&gt;\r\n    &lt;soap:operation soapAction=&quot;http://tempuri.org/ISend/UploadCustomerDocument&quot; style=&quot;document&quot;/&gt;\r\n    &lt;wsdl:input name=&quot;InputUploadCustomerDocument&quot;&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;DocumentType&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;FileName&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;Password&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;PinNo&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;UserName&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:body use=&quot;literal&quot;/&gt;\r\n    &lt;/wsdl:input&gt;\r\n    &lt;wsdl:output name=&quot;ReturnUploadCustomerDocument&quot;&gt;\r\n    &lt;soap:body use=&quot;literal&quot;/&gt;\r\n    &lt;/wsdl:output&gt;\r\n    &lt;/wsdl:operation&gt;\r\n\r\n\r\nAnd the InputUploadCustomerDocument Java File Below, the file don&#39;t have username, password and other fields, and i need to set these parameters before making reuqest\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n    &quot;fileData&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;InputUploadCustomerDocument&quot;)\r\n    public class InputUploadCustomerDocument {\r\n\r\n    @XmlElement(name = &quot;FileData&quot;, required = true)\r\n    protected byte[] fileData;\r\n  \r\n    /**\r\n     * Gets the value of the fileData property.\r\n     * \r\n     * @return\r\n     *     possible object is\r\n     *     byte[]\r\n     */\r\n    public byte[] getFileData() {\r\n        return fileData;\r\n    }\r\n\r\n    /**\r\n     * Sets the value of the fileData property.\r\n     * \r\n     * @param value\r\n     *     allowed object is\r\n     *     byte[]\r\n     */\r\n    public void setFileData(byte[] value) {\r\n        this.fileData = value;\r\n    }\r\n}\r\n\r\n\r\nHere is the function i need to call\r\n\r\n    @WebMethod(operationName = &quot;UploadCustomerDocument&quot;, action = &quot;http://tempuri.org/ISend/UploadCustomerDocument&quot;)\r\n    @WebResult(name = &quot;ReturnUploadCustomerDocument&quot;, targetNamespace = &quot;http://tempuri.org/&quot;, partName = &quot;parameters&quot;)\r\n    @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\r\n    public ReturnUploadCustomerDocument uploadCustomerDocument(\r\n        @WebParam(name = &quot;InputUploadCustomerDocument&quot;, targetNamespace = &quot;http://tempuri.org/&quot;, partName = &quot;parameters&quot;)\r\n        InputUploadCustomerDocument parameters);\r\n\r\nCan someone help how i can set these headers?","title":"How to set headers in Soap Request Java","body":"<p>I am facing issue in forming a SOAP request.</p>\n\n<p>In that request i am supposed to add username , password and some other info in header part not the part of payload.</p>\n\n<p>Below the Entry in wsdl</p>\n\n<pre><code>&lt;wsdl:message name=\"InputUploadCustomerDocument_Headers\"&gt;\n&lt;wsdl:part name=\"DocumentType\" element=\"tns:DocumentType\"/&gt;\n&lt;wsdl:part name=\"FileName\" element=\"tns:FileName\"/&gt;\n&lt;wsdl:part name=\"Password\" element=\"tns:Password\"/&gt;\n&lt;wsdl:part name=\"PinNo\" element=\"tns:PinNo\"/&gt;\n&lt;wsdl:part name=\"UserName\" element=\"tns:UserName\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"ReturnUploadCustomerDocument\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ReturnUploadCustomerDocument\"/&gt;\n&lt;/wsdl:message&gt;\n\n\n&lt;wsdl:operation name=\"UploadCustomerDocument\"&gt;\n&lt;soap:operation soapAction=\"http://tempuri.org/ISend/UploadCustomerDocument\" style=\"document\"/&gt;\n&lt;wsdl:input name=\"InputUploadCustomerDocument\"&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"DocumentType\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"FileName\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"Password\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"PinNo\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"UserName\" use=\"literal\"/&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:input&gt;\n&lt;wsdl:output name=\"ReturnUploadCustomerDocument\"&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n</code></pre>\n\n<p>And the InputUploadCustomerDocument Java File Below, the file don't have username, password and other fields, and i need to set these parameters before making reuqest</p>\n\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = \"\", propOrder = {\n\"fileData\"\n})\n@XmlRootElement(name = \"InputUploadCustomerDocument\")\npublic class InputUploadCustomerDocument {\n\n@XmlElement(name = \"FileData\", required = true)\nprotected byte[] fileData;\n\n/**\n * Gets the value of the fileData property.\n * \n * @return\n *     possible object is\n *     byte[]\n */\npublic byte[] getFileData() {\n    return fileData;\n}\n\n/**\n * Sets the value of the fileData property.\n * \n * @param value\n *     allowed object is\n *     byte[]\n */\npublic void setFileData(byte[] value) {\n    this.fileData = value;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Here is the function i need to call</p>\n\n<pre><code>@WebMethod(operationName = \"UploadCustomerDocument\", action = \"http://tempuri.org/ISend/UploadCustomerDocument\")\n@WebResult(name = \"ReturnUploadCustomerDocument\", targetNamespace = \"http://tempuri.org/\", partName = \"parameters\")\n@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\npublic ReturnUploadCustomerDocument uploadCustomerDocument(\n    @WebParam(name = \"InputUploadCustomerDocument\", targetNamespace = \"http://tempuri.org/\", partName = \"parameters\")\n    InputUploadCustomerDocument parameters);\n</code></pre>\n\n<p>Can someone help how i can set these headers?</p>\n"},{"tags":["java","kotlin","localdate"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693689505,"post_id":77022907,"comment_id":135794548,"body_markdown":"Stop using both `java.sql.Date` and `java.util.Date`. Both legacy classes were supplanted years ago by the modern *java.time* classes, replaced by `java.time.LocalDate` and `java.time.Instant` respectively. JDBC 4.2+ requires all JDBC drivers to support the *java.time* types.","body":"Stop using both <code>java.sql.Date</code> and <code>java.util.Date</code>. Both legacy classes were supplanted years ago by the modern <i>java.time</i> classes, replaced by <code>java.time.LocalDate</code> and <code>java.time.Instant</code> respectively. JDBC 4.2+ requires all JDBC drivers to support the <i>java.time</i> types."}],"owner":{"account_id":2881516,"reputation":77,"user_id":2472307,"display_name":"AAA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693569658,"answer_count":0,"score":0,"last_activity_date":1693569568,"creation_date":1693569568,"question_id":77022907,"body_markdown":"it.date is a &quot;Date&quot; type (we retrieve from mysql db) and I am trying to do a comparison of a LocalDate.now and return the value in LocalDate type. However, I couldn&#39;t find the right way to do this as I am getting parser errors     \r\n    \r\n    private val datePattern = &quot;M/d/yy&quot; \r\n            \r\n    if (LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern)) &gt; LocalDate.now().minusYears(1)){  \r\n             return LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern))\r\n    }","title":"Kotlin Date to LocalDate comparison","body":"<p>it.date is a &quot;Date&quot; type (we retrieve from mysql db) and I am trying to do a comparison of a LocalDate.now and return the value in LocalDate type. However, I couldn't find the right way to do this as I am getting parser errors</p>\n<pre><code>private val datePattern = &quot;M/d/yy&quot; \n        \nif (LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern)) &gt; LocalDate.now().minusYears(1)){  \n         return LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern))\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-3"],"comments":[{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693306943,"post_id":76999508,"comment_id":135740297,"body_markdown":"I think with minor changes and @Configuration itself you can make this work? Do you want to specifically use @Autoconfiguration?","body":"I think with minor changes and @Configuration itself you can make this work? Do you want to specifically use @Autoconfiguration?"},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1693314837,"post_id":76999508,"comment_id":135742038,"body_markdown":"`proxyBeanMethods = false` means that your `prototypeComponent` `@Bean` method is now an unproxied factory bean that must return a complete `PrototypeComponent`. You cannot rely on Spring to inject dependencies into it because there is no method proxy in place to do it. You can add more bean parameters to your `@Bean` method and spring will resolve them, or you can add them as members to your `TestPrototypeConfiguration` class because it is itself a bean.","body":"<code>proxyBeanMethods = false</code> means that your <code>prototypeComponent</code> <code>@Bean</code> method is now an unproxied factory bean that must return a complete <code>PrototypeComponent</code>. You cannot rely on Spring to inject dependencies into it because there is no method proxy in place to do it. You can add more bean parameters to your <code>@Bean</code> method and spring will resolve them, or you can add them as members to your <code>TestPrototypeConfiguration</code> class because it is itself a bean."},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693316013,"post_id":76999508,"comment_id":135742324,"body_markdown":"I think that the spring cannot resolve arguments which i would like to pass from my code :)","body":"I think that the spring cannot resolve arguments which i would like to pass from my code :)"}],"answers":[{"tags":[],"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693313730,"creation_date":1693307545,"answer_id":76999661,"question_id":76999508,"body_markdown":" here&#39;s the modified code that should work in Spring Boot 3\r\n    \r\n  \r\n       public class PrototypeComponent {\r\n        private final int value;\r\n    \r\n        public PrototypeComponent(int value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        // Other methods and properties\r\n    }\r\n\r\n\r\n    @Component\r\n    public class SingletonComponent {\r\n    \r\n        @Autowired\r\n        private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n    \r\n        public void test() {\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                PrototypeComponent instance = prototypeComponentFactory.getObject(i); // Pass argument here\r\n                // Use the instance as needed\r\n            }\r\n        }\r\n    }\r\n\r\n   \r\n\r\nIn this example, I&#39;ve used constructor injection to inject the prototype bean (PrototypeComponent) into the singleton bean (SingletonComponent). This way, each time you use the prototypeComponent field in the SingletonComponent class, you&#39;ll get a new instance of the prototype bean.\r\n\r\n*Please note that in Spring Boot 3, you don&#39;t need to manually define the bean creation logic using the supplier approach as in your initial code. Spring Boot&#39;s dependency injection mechanism will automatically take care of injecting the prototype bean when needed. This approach aligns with the principles of dependency injection and encapsulates the creation logic within the Spring framework.*\r\n","title":"How to create Prototype bean with parameters","body":"<p>here's the modified code that should work in Spring Boot 3</p>\n<pre><code>   public class PrototypeComponent {\n    private final int value;\n\n    public PrototypeComponent(int value) {\n        this.value = value;\n    }\n\n    // Other methods and properties\n}\n\n\n@Component\npublic class SingletonComponent {\n\n    @Autowired\n    private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            PrototypeComponent instance = prototypeComponentFactory.getObject(i); // Pass argument here\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>In this example, I've used constructor injection to inject the prototype bean (PrototypeComponent) into the singleton bean (SingletonComponent). This way, each time you use the prototypeComponent field in the SingletonComponent class, you'll get a new instance of the prototype bean.</p>\n<p><em>Please note that in Spring Boot 3, you don't need to manually define the bean creation logic using the supplier approach as in your initial code. Spring Boot's dependency injection mechanism will automatically take care of injecting the prototype bean when needed. This approach aligns with the principles of dependency injection and encapsulates the creation logic within the Spring framework.</em></p>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693568624,"creation_date":1693568624,"answer_id":77022824,"question_id":76999508,"body_markdown":"What I do, which works (i.e., this is in production and has been for a while and is fine on both Spring 5 and 6), is use an [`ObjectProvider`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/ObjectProvider.html).\r\n```java\r\n@Component\r\npublic class SingletonComponent {\r\n    @Autowired\r\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            var instance = prototypeComponentFactory.getObject(i);\r\n            // Use the instance as needed\r\n        }\r\n    }\r\n}\r\n```\r\nThis will pass the argument through, assuming you have suitably annotated objects and constructors (i.e., there is a bean of type `PrototypeComponent` with scope `PROTOTYPE` in your context whose constructor takes an `int` or `Integer`).\r\n\r\nI _prefer_ to wrap it slightly, like this, so that I have more type safety:\r\n```java\r\n@Component\r\npublic class SingletonComponent {\r\n    @Autowired\r\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n\r\n    private PrototypeComponent getComponent(int i) {\r\n        return prototypeComponentFactory.getObject(i);\r\n    }\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            var instance = getComponent(i);\r\n            // Use the instance as needed\r\n        }\r\n    }\r\n}\r\n```\r\nYou might delegate that wrapping to a bean, but that&#39;s not really necessary if you&#39;re only building instances for one place (which was true in my particular use-case).","title":"How to create Prototype bean with parameters","body":"<p>What I do, which works (i.e., this is in production and has been for a while and is fine on both Spring 5 and 6), is use an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/ObjectProvider.html\" rel=\"nofollow noreferrer\"><code>ObjectProvider</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SingletonComponent {\n    @Autowired\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            var instance = prototypeComponentFactory.getObject(i);\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>This will pass the argument through, assuming you have suitably annotated objects and constructors (i.e., there is a bean of type <code>PrototypeComponent</code> with scope <code>PROTOTYPE</code> in your context whose constructor takes an <code>int</code> or <code>Integer</code>).</p>\n<p>I <em>prefer</em> to wrap it slightly, like this, so that I have more type safety:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SingletonComponent {\n    @Autowired\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    private PrototypeComponent getComponent(int i) {\n        return prototypeComponentFactory.getObject(i);\n    }\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            var instance = getComponent(i);\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>You might delegate that wrapping to a bean, but that's not really necessary if you're only building instances for one place (which was true in my particular use-case).</p>\n"}],"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693568624,"creation_date":1693306175,"question_id":76999508,"body_markdown":"In Spring Boot 3 for jar-starters now we should use `@Autoconfiguration`. `@Autoconfiguration` is the `@Configuration` with `proxyBeanMethods = false` parameter.\r\n\r\nIn Spring Boot 2 i used the code like this. In singleton component i can create any count of prototype beans.\r\n\r\n```\r\n@Configuration\r\npublic class TestPrototypeConfiguration {\r\n\r\n    @Bean\r\n    public SingletonComponent singletoneComponent() {\r\n        return new SingletonComponent(this::prototypeComponent);\r\n    }\r\n\r\n    @Bean\r\n    @Scope(value = BeanDefinition.SCOPE_PROTOTYPE)\r\n    public PrototypeComponent prototypeComponent(int value) {\r\n        return new PrototypeComponent(value);\r\n    }\r\n\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class PrototypeComponent {\r\n\r\n    private final int value;\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class SingletonComponent {\r\n\r\n    private final IntFunction&lt;PrototypeComponent&gt; supplier;\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            supplier.apply(i);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut for Spring boot 3 if I simple change `@Configuration -&gt; @Autoconfiguration` the code will start work incorrect. Because when i call `supplier` the prototype bean will not construct as spring boot. It will be created as the simple java class.\r\n\r\nCan you provide me any suggestion about how to solve this problem, please? Is it possible to solve this problem w/o `ApplicationContext.getBean`?","title":"How to create Prototype bean with parameters","body":"<p>In Spring Boot 3 for jar-starters now we should use <code>@Autoconfiguration</code>. <code>@Autoconfiguration</code> is the <code>@Configuration</code> with <code>proxyBeanMethods = false</code> parameter.</p>\n<p>In Spring Boot 2 i used the code like this. In singleton component i can create any count of prototype beans.</p>\n<pre><code>@Configuration\npublic class TestPrototypeConfiguration {\n\n    @Bean\n    public SingletonComponent singletoneComponent() {\n        return new SingletonComponent(this::prototypeComponent);\n    }\n\n    @Bean\n    @Scope(value = BeanDefinition.SCOPE_PROTOTYPE)\n    public PrototypeComponent prototypeComponent(int value) {\n        return new PrototypeComponent(value);\n    }\n\n}\n\n@RequiredArgsConstructor\npublic class PrototypeComponent {\n\n    private final int value;\n}\n\n@RequiredArgsConstructor\npublic class SingletonComponent {\n\n    private final IntFunction&lt;PrototypeComponent&gt; supplier;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            supplier.apply(i);\n        }\n    }\n}\n</code></pre>\n<p>But for Spring boot 3 if I simple change <code>@Configuration -&gt; @Autoconfiguration</code> the code will start work incorrect. Because when i call <code>supplier</code> the prototype bean will not construct as spring boot. It will be created as the simple java class.</p>\n<p>Can you provide me any suggestion about how to solve this problem, please? Is it possible to solve this problem w/o <code>ApplicationContext.getBean</code>?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693513035,"post_id":77018738,"comment_id":135775006,"body_markdown":"If you are using Spring don&#39;t use a static variable to store an instance of class. Instead use `@Mapper(componentModel = &quot;spring&quot;)`. You are using Spring IOC incorrectly.","body":"If you are using Spring don&#39;t use a static variable to store an instance of class. Instead use <code>@Mapper(componentModel = &quot;spring&quot;)</code>. You are using Spring IOC incorrectly."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566835,"post_id":77018738,"comment_id":135781465,"body_markdown":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error.","body":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693567430,"post_id":77018738,"comment_id":135781568,"body_markdown":"Have you removed `ProductMapper MAPPER = Mappers.getMapper(ProductMapper.class);` from `ProductMapper`? I still see it in the code snippets.","body":"Have you removed <code>ProductMapper MAPPER = Mappers.getMapper(ProductMapper.class);</code> from <code>ProductMapper</code>? I still see it in the code snippets."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693568265,"post_id":77018738,"comment_id":135781704,"body_markdown":"I have updated the files and now i am getting an error, in question i have updated the stackrace.","body":"I have updated the files and now i am getting an error, in question i have updated the stackrace."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693576664,"post_id":77018738,"comment_id":135783416,"body_markdown":"Eclipse doesn&#39;t seem to see the generated code. I have no idea what is going wrong","body":"Eclipse doesn&#39;t seem to see the generated code. I have no idea what is going wrong"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693580795,"post_id":77018738,"comment_id":135784323,"body_markdown":"Thank you, I will try to solve the problem myself.","body":"Thank you, I will try to solve the problem myself."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693587922,"post_id":77018738,"comment_id":135785595,"body_markdown":"Made a new jetbrains account, took intellij idea for a month, launched the project and it works...","body":"Made a new jetbrains account, took intellij idea for a month, launched the project and it works..."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693590264,"post_id":77018738,"comment_id":135785993,"body_markdown":"Nothing surprising =) You can also download Intellij IDEA Community Edition, it is free and you don&#39;t need to create any account","body":"Nothing surprising =) You can also download Intellij IDEA Community Edition, it is free and you don&#39;t need to create any account"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693639501,"post_id":77018738,"comment_id":135789813,"body_markdown":"But this version lacks the tools for web development that are available in the ultimate version","body":"But this version lacks the tools for web development that are available in the ultimate version"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693639831,"post_id":77018738,"comment_id":135789841,"body_markdown":"I find that even the Community Edition is better than Eclipse","body":"I find that even the Community Edition is better than Eclipse"}],"answers":[{"tags":[],"owner":{"account_id":15455414,"reputation":41,"user_id":11149650,"display_name":"Peter Martin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693510931,"creation_date":1693510931,"answer_id":77018822,"question_id":77018738,"body_markdown":"In your mapper annotation you have to set the componentModel property.  You probably want spring.","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>In your mapper annotation you have to set the componentModel property.  You probably want spring.</p>\n"},{"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693530192,"creation_date":1693530192,"answer_id":77019991,"question_id":77018738,"body_markdown":"As mentioned in the comments, please use component model as `spring`.\r\n\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>As mentioned in the comments, please use component model as <code>spring</code>.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\n</code></pre>\n"}],"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77019991,"answer_count":2,"score":1,"last_activity_date":1693568573,"creation_date":1693510035,"question_id":77018738,"body_markdown":"Mapstruct cannot find implemention of my Mapper.Using latest version of mapstruct 1.5.5 Final,my IDE is eclipse.\r\nAnd I&#39;m getting this error:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField productMapper in com.example.springshop.service.ImageService required a bean of type &#39;com.example.springshop.mapper.ProductMapper&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.example.springshop.mapper.ProductMapper&#39; in your configuration.\r\n\r\n```\r\n\r\nProduct entity:\r\n```\r\npackage com.example.springshop.entity;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.time.LocalDateTime;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.PrePersist;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Product {\r\n\t@Id\r\n\t@Column(name = &quot;id&quot;)\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;title&quot;, nullable = false)\r\n\tprivate String title;\r\n\r\n\t@Column(name = &quot;description&quot;, nullable = false)\r\n\tprivate String description;\r\n\r\n\t@Column(name = &quot;price&quot;, nullable = false)\r\n\tprivate BigDecimal price;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\r\n\t@Builder.Default\r\n\tprivate List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n\t@Column(name = &quot;preview_image_id&quot;)\r\n\tprivate Long previewImageId;\r\n\r\n\t@Column(name = &quot;date_of_created&quot;)\r\n\tprivate LocalDateTime dateOfCreated;\r\n\r\n\t@PrePersist\r\n\tprivate void init() {\r\n\t\tdateOfCreated = LocalDateTime.now();\r\n\t}\r\n}\r\n```\r\n\r\nProductDTO class:\r\n```\r\npackage com.example.springshop.dto;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.util.List;\r\n\r\nimport com.example.springshop.entity.Image;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class ProductDTO {\r\n\tprivate String title;\r\n\tprivate String description;\r\n\tprivate BigDecimal price;\r\n\tprivate List&lt;Image&gt; images;\r\n\tprivate Long previewImageId;\r\n}\r\n```\r\n\r\nProduct Controller:\r\n```\r\npackage com.example.springshop.controllers;\r\n\r\nimport java.security.Principal;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\n\r\nimport com.example.springshop.repository.ProductRepository;\r\nimport com.example.springshop.service.ProductService;\r\n\r\n@Controller\r\npublic class ProductController {\r\n\t@Autowired\r\n\tprivate ProductRepository productRepository;\r\n\r\n\t@Autowired\r\n\tprivate ProductService productService;\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String mainPage(Model model) {\r\n\t\tmodel.addAttribute(&quot;products&quot;, productRepository.findAll());\r\n\t\treturn &quot;main&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/products/{id}&quot;)\r\n\tpublic String productInfo(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(&quot;product&quot;, productService.findProductById(id));\r\n\r\n\t\treturn &quot;product_info&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/products/{id}/bucket&quot;)\r\n\tpublic String addBucket(@PathVariable Long id, Principal principal) {\r\n\t\tif (principal == null) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tproductService.addToUserBucket(id, principal.getName());\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nAdmin controller:\r\n```\r\npackage com.example.springshop.controllers;\r\n\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.service.ProductService;\r\n\r\n@Controller\r\npublic class AdminController {\r\n\tprivate final ProductService productService;\r\n\r\n\tpublic AdminController(ProductService productService) {\r\n\t\tthis.productService = productService;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/create_product&quot;)\r\n\tpublic String productCreatePage() {\r\n\t\treturn &quot;create_product&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/create_product&quot;)\r\n\tpublic String productCreate(@RequestParam(&quot;file1&quot;) MultipartFile file1,\r\n\t\t\t@RequestParam(&quot;file2&quot;) MultipartFile file2,\r\n\t\t\t@RequestParam(&quot;file3&quot;) MultipartFile file3,\r\n\t\t\tProductDTO product) throws IOException {\r\n\t\tproductService.saveProduct(product, file1, file2, file3);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/edit_product/{id}&quot;)\r\n\tpublic String editProductPage(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\r\n\t\tList&lt;ProductDTO&gt; result = productService.findProductById(id);\r\n\r\n\t\tif (result == null) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(&quot;product&quot;, result);\r\n\r\n\t\treturn &quot;edit_product&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/edit_product/{id}&quot;)\r\n\tpublic String editProduct(ProductDTO productDTO) {\r\n\t\tproductService.editProduct(productDTO);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/delete_product/{id}&quot;)\r\n\tpublic String deleteProduct(@PathVariable(value = &quot;id&quot;) Long id) {\r\n\t\tproductService.deleteProduct(id);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nProduct Service:\r\n```\r\npackage com.example.springshop.service;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Bucket;\r\nimport com.example.springshop.entity.Image;\r\nimport com.example.springshop.entity.Product;\r\nimport com.example.springshop.entity.User;\r\nimport com.example.springshop.mapper.ImageMapper;\r\nimport com.example.springshop.mapper.ProductMapper;\r\nimport com.example.springshop.repository.ProductRepository;\r\nimport com.example.springshop.repository.UserRepository;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@Service\r\n@Slf4j\r\npublic class ProductService {\r\n\t@Autowired\r\n\tprivate ProductMapper productMapper;\r\n\t\r\n\t@Autowired\r\n\tprivate ImageMapper imageMapper;\r\n\r\n\tprivate final ProductRepository productRepository;\r\n\tprivate final UserRepository userRepository;\r\n\r\n\tprivate final BucketService bucketService;\r\n\tprivate final ImageService imageService;\r\n\r\n\tpublic ProductService(ProductRepository productRepository, UserRepository userRepository,\r\n\t\t\tBucketService bucketService, ImageService imageService) {\r\n\t\tthis.productRepository = productRepository;\r\n\t\tthis.userRepository = userRepository;\r\n\t\tthis.bucketService = bucketService;\r\n\t\tthis.imageService = imageService;\r\n\t}\r\n\r\n\tpublic List&lt;ProductDTO&gt; listOfProducts() {\r\n\t\treturn productMapper.fromProductList(productRepository.findAll());\r\n\t}\r\n\r\n\tpublic ProductDTO getProductById(Long id) {\r\n\t\treturn productMapper.fromProduct(productRepository.findById(id).orElse(null));\r\n\t}\r\n\r\n\tpublic void saveProduct(ProductDTO product, MultipartFile file1, MultipartFile file2, MultipartFile file3)\r\n\t\t\tthrows IOException {\r\n\t\tImage image1;\r\n\t\tImage image2;\r\n\t\tImage image3;\r\n\t\tif (file1.getSize() != 0) {\r\n\t\t\timage1 = imageMapper.fromMultipartToImage(file1);\r\n\t\t\timage1.setPreviewImage(true);\r\n\t\t\timageService.addImageToProduct(product, image1);\r\n\t\t}\r\n\t\tif (file2.getSize() != 0) {\r\n\t\t\timage2 = imageMapper.fromMultipartToImage(file2);\r\n\t\t\timageService.addImageToProduct(product, image2);\r\n\t\t}\r\n\t\tif (file3.getSize() != 0) {\r\n\t\t\timage3 = imageMapper.fromMultipartToImage(file3);\r\n\t\t\timageService.addImageToProduct(product, image3);\r\n\t\t}\r\n\t\tlog.info(&quot;Saving new Product. Title: {}&quot;, product.getTitle());\r\n\t\tProduct productFromDb = productRepository.save(productMapper.toProduct(product));\r\n\t\tproductFromDb.setPreviewImageId(productFromDb.getImages().get(0).getId());\r\n\t\tproductRepository.save(productMapper.toProduct(product));\r\n\t}\r\n\r\n\tpublic List&lt;ProductDTO&gt; findProductById(Long id) {\r\n\t\tList&lt;Product&gt; res = new ArrayList&lt;&gt;();\r\n\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tOptional&lt;Product&gt; product = productRepository.findById(id);\r\n\t\tproduct.ifPresent(res::add);\r\n\r\n\t\treturn productMapper.fromProductList(res);\r\n\r\n\t}\r\n\r\n\tpublic boolean deleteProduct(Long id) {\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tproductRepository.deleteById(id);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean editProduct(ProductDTO productDTO) {\r\n\t\tString title = productDTO.getTitle();\r\n\r\n\t\tif (productRepository.findByTitle(title) == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tProduct product = Product.builder()\r\n\t\t\t\t.title(title)\r\n\t\t\t\t.description(productDTO.getDescription())\r\n\t\t\t\t.price(productDTO.getPrice())\r\n\t\t\t\t.build();\r\n\r\n\t\tproductRepository.save(product);\r\n\r\n\t\tlog.info(&quot;Edit new User with title : {}&quot;, title);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Transactional\r\n\tpublic void addToUserBucket(Long productId, String username) {\r\n\t\tUser user = userRepository.findByUsername(username);\r\n\t\tif (user == null) {\r\n\t\t\tthrow new RuntimeException(&quot;User not found&quot; + username);\r\n\t\t}\r\n\r\n\t\tBucket bucket = user.getBucket();\r\n\t\tif (bucket == null) {\r\n\t\t\tBucket newBucket = bucketService.createBucket(user, Collections.singletonList(productId));\r\n\t\t\tuser.setBucket(newBucket);\r\n\t\t\tuserRepository.save(user);\r\n\t\t} else {\r\n\t\t\tbucketService.addProducts(bucket, Collections.singletonList(productId));\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\nImage Service:\r\n```\r\npackage com.example.springshop.service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Image;\r\nimport com.example.springshop.entity.Product;\r\nimport com.example.springshop.mapper.ProductMapper;\r\n\r\n@Service\r\npublic class ImageService {\r\n\t@Autowired\r\n\tprivate ProductMapper productMapper;\r\n\r\n\tpublic void addImageToProduct(ProductDTO productDTO, Image image) {\r\n\t\tProduct product = productMapper.toProduct(productDTO);\r\n\r\n\t\timage.setProduct(product);\r\n\t\tproduct.getImages().add(image);\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nMapper class:\r\n```\r\npackage com.example.springshop.mapper;\r\n\r\nimport java.util.List;\r\n\r\nimport org.mapstruct.InheritInverseConfiguration;\r\nimport org.mapstruct.Mapper;\r\nimport org.mapstruct.Mapping;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Product;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ProductMapper {\r\n\t@Mapping(target = &quot;id&quot;, ignore = true)\r\n\t@Mapping(target = &quot;dateOfCreated&quot;, ignore = true)\r\n\tProduct toProduct(ProductDTO productDTO);\r\n\r\n\t@InheritInverseConfiguration\r\n\tProductDTO fromProduct(Product product);\r\n\r\n\tList&lt;Product&gt; toProductList(List&lt;ProductDTO&gt; productDTOs);\r\n\r\n\tList&lt;ProductDTO&gt; fromProductList(List&lt;Product&gt; products);\r\n}\r\n```\r\n\r\nbuild.gradle:\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.2&#39;\r\n\tid &#39;com.diffplug.eclipse.apt&#39; version &#39;3.37.2&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n\tsourceCompatibility = &#39;20&#39;\r\n}\r\n\r\nconfigurations {\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n}\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa:3.1.2&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web:3.1.2&#39;\r\n\truntimeOnly &#39;org.postgresql:postgresql&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security:3.1.2&#39;\r\n\timplementation &#39;org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.2.RELEASE&#39;\r\n\timplementation &#39;org.mapstruct:mapstruct:1.5.5.Final&#39;\r\n\tannotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.5.Final&#39;\r\n\timplementation &#39;io.springfox:springfox-swagger2:3.0.0&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n```\r\n\r\nTried a lot of ways and nothing helped.\r\nPlease could you take a look where I&#39;m going wrong?\r\n","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>Mapstruct cannot find implemention of my Mapper.Using latest version of mapstruct 1.5.5 Final,my IDE is eclipse.\nAnd I'm getting this error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField productMapper in com.example.springshop.service.ImageService required a bean of type 'com.example.springshop.mapper.ProductMapper' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.example.springshop.mapper.ProductMapper' in your configuration.\n\n</code></pre>\n<p>Product entity:</p>\n<pre><code>package com.example.springshop.entity;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.PrePersist;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Product {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    @Column(name = &quot;description&quot;, nullable = false)\n    private String description;\n\n    @Column(name = &quot;price&quot;, nullable = false)\n    private BigDecimal price;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\n    @Builder.Default\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n    @Column(name = &quot;preview_image_id&quot;)\n    private Long previewImageId;\n\n    @Column(name = &quot;date_of_created&quot;)\n    private LocalDateTime dateOfCreated;\n\n    @PrePersist\n    private void init() {\n        dateOfCreated = LocalDateTime.now();\n    }\n}\n</code></pre>\n<p>ProductDTO class:</p>\n<pre><code>package com.example.springshop.dto;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\nimport com.example.springshop.entity.Image;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class ProductDTO {\n    private String title;\n    private String description;\n    private BigDecimal price;\n    private List&lt;Image&gt; images;\n    private Long previewImageId;\n}\n</code></pre>\n<p>Product Controller:</p>\n<pre><code>package com.example.springshop.controllers;\n\nimport java.security.Principal;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport com.example.springshop.repository.ProductRepository;\nimport com.example.springshop.service.ProductService;\n\n@Controller\npublic class ProductController {\n    @Autowired\n    private ProductRepository productRepository;\n\n    @Autowired\n    private ProductService productService;\n\n    @GetMapping(&quot;/&quot;)\n    public String mainPage(Model model) {\n        model.addAttribute(&quot;products&quot;, productRepository.findAll());\n        return &quot;main&quot;;\n    }\n\n    @GetMapping(&quot;/products/{id}&quot;)\n    public String productInfo(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\n        if (!productRepository.existsById(id)) {\n            return &quot;redirect:/&quot;;\n        }\n\n        model.addAttribute(&quot;product&quot;, productService.findProductById(id));\n\n        return &quot;product_info&quot;;\n    }\n\n    @GetMapping(&quot;/products/{id}/bucket&quot;)\n    public String addBucket(@PathVariable Long id, Principal principal) {\n        if (principal == null) {\n            return &quot;redirect:/&quot;;\n        }\n\n        productService.addToUserBucket(id, principal.getName());\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>Admin controller:</p>\n<pre><code>package com.example.springshop.controllers;\n\nimport java.io.IOException;\nimport java.util.List;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.service.ProductService;\n\n@Controller\npublic class AdminController {\n    private final ProductService productService;\n\n    public AdminController(ProductService productService) {\n        this.productService = productService;\n    }\n\n    @GetMapping(&quot;/create_product&quot;)\n    public String productCreatePage() {\n        return &quot;create_product&quot;;\n    }\n\n    @PostMapping(&quot;/create_product&quot;)\n    public String productCreate(@RequestParam(&quot;file1&quot;) MultipartFile file1,\n            @RequestParam(&quot;file2&quot;) MultipartFile file2,\n            @RequestParam(&quot;file3&quot;) MultipartFile file3,\n            ProductDTO product) throws IOException {\n        productService.saveProduct(product, file1, file2, file3);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/edit_product/{id}&quot;)\n    public String editProductPage(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\n        List&lt;ProductDTO&gt; result = productService.findProductById(id);\n\n        if (result == null) {\n            return &quot;redirect:/&quot;;\n        }\n\n        model.addAttribute(&quot;product&quot;, result);\n\n        return &quot;edit_product&quot;;\n    }\n\n    @PostMapping(&quot;/edit_product/{id}&quot;)\n    public String editProduct(ProductDTO productDTO) {\n        productService.editProduct(productDTO);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/delete_product/{id}&quot;)\n    public String deleteProduct(@PathVariable(value = &quot;id&quot;) Long id) {\n        productService.deleteProduct(id);\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>Product Service:</p>\n<pre><code>package com.example.springshop.service;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Bucket;\nimport com.example.springshop.entity.Image;\nimport com.example.springshop.entity.Product;\nimport com.example.springshop.entity.User;\nimport com.example.springshop.mapper.ImageMapper;\nimport com.example.springshop.mapper.ProductMapper;\nimport com.example.springshop.repository.ProductRepository;\nimport com.example.springshop.repository.UserRepository;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Service\n@Slf4j\npublic class ProductService {\n    @Autowired\n    private ProductMapper productMapper;\n    \n    @Autowired\n    private ImageMapper imageMapper;\n\n    private final ProductRepository productRepository;\n    private final UserRepository userRepository;\n\n    private final BucketService bucketService;\n    private final ImageService imageService;\n\n    public ProductService(ProductRepository productRepository, UserRepository userRepository,\n            BucketService bucketService, ImageService imageService) {\n        this.productRepository = productRepository;\n        this.userRepository = userRepository;\n        this.bucketService = bucketService;\n        this.imageService = imageService;\n    }\n\n    public List&lt;ProductDTO&gt; listOfProducts() {\n        return productMapper.fromProductList(productRepository.findAll());\n    }\n\n    public ProductDTO getProductById(Long id) {\n        return productMapper.fromProduct(productRepository.findById(id).orElse(null));\n    }\n\n    public void saveProduct(ProductDTO product, MultipartFile file1, MultipartFile file2, MultipartFile file3)\n            throws IOException {\n        Image image1;\n        Image image2;\n        Image image3;\n        if (file1.getSize() != 0) {\n            image1 = imageMapper.fromMultipartToImage(file1);\n            image1.setPreviewImage(true);\n            imageService.addImageToProduct(product, image1);\n        }\n        if (file2.getSize() != 0) {\n            image2 = imageMapper.fromMultipartToImage(file2);\n            imageService.addImageToProduct(product, image2);\n        }\n        if (file3.getSize() != 0) {\n            image3 = imageMapper.fromMultipartToImage(file3);\n            imageService.addImageToProduct(product, image3);\n        }\n        log.info(&quot;Saving new Product. Title: {}&quot;, product.getTitle());\n        Product productFromDb = productRepository.save(productMapper.toProduct(product));\n        productFromDb.setPreviewImageId(productFromDb.getImages().get(0).getId());\n        productRepository.save(productMapper.toProduct(product));\n    }\n\n    public List&lt;ProductDTO&gt; findProductById(Long id) {\n        List&lt;Product&gt; res = new ArrayList&lt;&gt;();\n\n        if (!productRepository.existsById(id)) {\n            return null;\n        }\n\n        Optional&lt;Product&gt; product = productRepository.findById(id);\n        product.ifPresent(res::add);\n\n        return productMapper.fromProductList(res);\n\n    }\n\n    public boolean deleteProduct(Long id) {\n        if (!productRepository.existsById(id)) {\n            return false;\n        }\n\n        productRepository.deleteById(id);\n\n        return true;\n    }\n\n    public boolean editProduct(ProductDTO productDTO) {\n        String title = productDTO.getTitle();\n\n        if (productRepository.findByTitle(title) == null) {\n            return false;\n        }\n\n        Product product = Product.builder()\n                .title(title)\n                .description(productDTO.getDescription())\n                .price(productDTO.getPrice())\n                .build();\n\n        productRepository.save(product);\n\n        log.info(&quot;Edit new User with title : {}&quot;, title);\n\n        return true;\n    }\n\n    @Transactional\n    public void addToUserBucket(Long productId, String username) {\n        User user = userRepository.findByUsername(username);\n        if (user == null) {\n            throw new RuntimeException(&quot;User not found&quot; + username);\n        }\n\n        Bucket bucket = user.getBucket();\n        if (bucket == null) {\n            Bucket newBucket = bucketService.createBucket(user, Collections.singletonList(productId));\n            user.setBucket(newBucket);\n            userRepository.save(user);\n        } else {\n            bucketService.addProducts(bucket, Collections.singletonList(productId));\n        }\n\n    }\n}\n</code></pre>\n<p>Image Service:</p>\n<pre><code>package com.example.springshop.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Image;\nimport com.example.springshop.entity.Product;\nimport com.example.springshop.mapper.ProductMapper;\n\n@Service\npublic class ImageService {\n    @Autowired\n    private ProductMapper productMapper;\n\n    public void addImageToProduct(ProductDTO productDTO, Image image) {\n        Product product = productMapper.toProduct(productDTO);\n\n        image.setProduct(product);\n        product.getImages().add(image);\n    }\n}\n</code></pre>\n<p>Mapper class:</p>\n<pre><code>package com.example.springshop.mapper;\n\nimport java.util.List;\n\nimport org.mapstruct.InheritInverseConfiguration;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Product;\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface ProductMapper {\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;dateOfCreated&quot;, ignore = true)\n    Product toProduct(ProductDTO productDTO);\n\n    @InheritInverseConfiguration\n    ProductDTO fromProduct(Product product);\n\n    List&lt;Product&gt; toProductList(List&lt;ProductDTO&gt; productDTOs);\n\n    List&lt;ProductDTO&gt; fromProductList(List&lt;Product&gt; products);\n}\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.2'\n    id 'io.spring.dependency-management' version '1.1.2'\n    id 'com.diffplug.eclipse.apt' version '3.37.2'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '20'\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:3.1.2'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    implementation 'org.springframework.boot:spring-boot-starter-web:3.1.2'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.springframework.boot:spring-boot-starter-security:3.1.2'\n    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.2.RELEASE'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    implementation 'io.springfox:springfox-swagger2:3.0.0'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>Tried a lot of ways and nothing helped.\nPlease could you take a look where I'm going wrong?</p>\n"},{"tags":["java","maven","dependencies","dependency-management"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1692113664,"post_id":76906867,"comment_id":135578894,"body_markdown":"You should share the actual dependencies you are using so others can understand what artifacts exactly are you using.","body":"You should share the actual dependencies you are using so others can understand what artifacts exactly are you using."}],"answers":[{"tags":[],"owner":{"account_id":24440814,"reputation":41,"user_id":18364543,"display_name":"Om Shreenidhi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693568418,"creation_date":1693568418,"answer_id":77022806,"question_id":76906867,"body_markdown":"You can download the targ.gz file from here -\r\nhttps://netty.io/downloads.html.  \r\n\r\nInside the &quot;all&quot; folder edit the pom.xml by adding this snippet in the `plugins` section - \r\n```\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n          &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;make-assembly&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n```\r\n\r\nand then run -\r\n```\r\nmvn clean package \r\n```\r\nThe jar you need will be created inside `all/target`. It&#39;ll have a prefix like *`-all-dependencies.jar`.","title":"Update Java Dependency from Fat Jar to Thin Jahr","body":"<p>You can download the targ.gz file from here -\n<a href=\"https://netty.io/downloads.html\" rel=\"nofollow noreferrer\">https://netty.io/downloads.html</a>.</p>\n<p>Inside the &quot;all&quot; folder edit the pom.xml by adding this snippet in the <code>plugins</code> section -</p>\n<pre><code>      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;make-assembly&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>and then run -</p>\n<pre><code>mvn clean package \n</code></pre>\n<p>The jar you need will be created inside <code>all/target</code>. It'll have a prefix like *<code>-all-dependencies.jar</code>.</p>\n"}],"owner":{"account_id":17060626,"reputation":49,"user_id":12344149,"display_name":"Mhanxsolo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693568418,"creation_date":1692110721,"question_id":76906867,"body_markdown":"I&#39;m currently working with Talend Studio, and in one of our projects, we need to update the netty-all library from version 4.1.68 to 4.1.96. After importing the newer jar file, we discovered that version 4.1.96 is significantly smaller than the previous one. Consequently, we encountered a series of ClassNotFoundException errors.\r\n\r\nTo resolve these issues, we had to manually import several specific Netty dependencies, such as netty-transport and netty-resolver. This approach feels cumbersome, and I&#39;m wondering if there might be a more efficient way to handle this update.\r\n\r\nSpecifically, I have two questions:\r\n\r\nIs there a method to generate a netty-all 4.1.96 jar file that includes all necessary dependencies (a fat jar)?\r\nIf the above solution is not feasible or optimal, what alternative approaches could be more efficient for updating the Netty library in our Talend Studio project?\r\nAny guidance or insights from those experienced with Netty and Talend Studio would be greatly appreciated. Thank you!","title":"Update Java Dependency from Fat Jar to Thin Jahr","body":"<p>I'm currently working with Talend Studio, and in one of our projects, we need to update the netty-all library from version 4.1.68 to 4.1.96. After importing the newer jar file, we discovered that version 4.1.96 is significantly smaller than the previous one. Consequently, we encountered a series of ClassNotFoundException errors.</p>\n<p>To resolve these issues, we had to manually import several specific Netty dependencies, such as netty-transport and netty-resolver. This approach feels cumbersome, and I'm wondering if there might be a more efficient way to handle this update.</p>\n<p>Specifically, I have two questions:</p>\n<p>Is there a method to generate a netty-all 4.1.96 jar file that includes all necessary dependencies (a fat jar)?\nIf the above solution is not feasible or optimal, what alternative approaches could be more efficient for updating the Netty library in our Talend Studio project?\nAny guidance or insights from those experienced with Netty and Talend Studio would be greatly appreciated. Thank you!</p>\n"},{"tags":["python","java","encryption","md5","pycrypto"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1693560482,"post_id":77021824,"comment_id":135780352,"body_markdown":"Did you check that `generateKeyAndIv()` and `generate_key_and_iv()` generate the same key and IV for the same input data?","body":"Did you check that <code>generateKeyAndIv()</code> and <code>generate_key_and_iv()</code> generate the same key and IV for the same input data?"},{"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"score":0,"creation_date":1693564799,"post_id":77021824,"comment_id":135781142,"body_markdown":"No, they are in completely different format, \nfor java its like this: \nkey: [101, 120, -81, 7, -122, 38, -36, 27, -51, 120, -105, 62, 38, -109, 94, 47, -10, 92, 42, 43, -7, 77, -70, -16, -125, -48, -125, -101, 32, -101, -26, -4]\n\nand in python:\n bytearray(b&quot;U\\xb2,\\x95\\x16\\&#39;\\x96\\x96\\\\x\\xf4=\\xd9\\xec\\nB!\\xc5Y\\xcc\\xa8]\\x86\\xd41\\x84\\xe2\\x06\\xb9\\n\\x1d\\x82&quot;)","body":"No, they are in completely different format,  for java its like this:  key: [101, 120, -81, 7, -122, 38, -36, 27, -51, 120, -105, 62, 38, -109, 94, 47, -10, 92, 42, 43, -7, 77, -70, -16, -125, -48, -125, -101, 32, -101, -26, -4]  and in python:  bytearray(b&quot;U\\xb2,\\x95\\x16\\&#39;\\x96\\x96\\\\x\\xf4=\\xd9\\xec\\nB!\\xc5&zwnj;&#8203;Y\\xcc\\xa8]\\x86\\xd41\\&zwnj;&#8203;x84\\xe2\\x06\\xb9\\n\\x1&zwnj;&#8203;d\\x82&quot;)"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1693567655,"post_id":77021824,"comment_id":135781599,"body_markdown":"The problem is a flaw in the key derivation, see my answer.","body":"The problem is a flaw in the key derivation, see my answer."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693568096,"creation_date":1693566198,"answer_id":77022566,"question_id":77021824,"body_markdown":"The bug is in the key derivation: The Java implementation of the digest automatically resets the instance to the initial state after a `digest()` call, unlike the Python implementation.  \r\nTherefore, in the Python implementation, the digest must be *explicitly* reset, e.g. by creating a new digest object.  \r\nAttention: This is necessary in two places (whereby the second modification is only noticeable for iterations greater than 1).\r\n\r\nThe following changes are required in `generate_key_and_iv()`:\r\n\r\n```py\r\n...\r\ntry:\r\n    while generated_length &lt; key_length + iv_length:\r\n        h = md() # create new instance (1.)\r\n        if generated_length &gt; 0:\r\n            h.update(generated_data[generated_length - digest_length:generated_length])\r\n        h.update(password)\r\n        if salt is not None:\r\n            h.update(salt[:8])\r\n        generated_data[generated_length:generated_length + digest_length] = h.digest()\r\n\r\n        for i in range(1, iterations):\r\n            h = md() # create new instance (2.)\r\n            h.update(generated_data[generated_length:generated_length + digest_length])\r\n            generated_data[generated_length:generated_length + digest_length] = h.digest()\r\n\r\n        generated_length += digest_length\r\n\t\t...\r\n```\r\n\r\nFor a test (and only for the test), a static salt can be used in both implementations. With identical plaintext and password, both encryptions then provide the same ciphertext.\r\n\r\nFor completeness, the key derivation implemented in the Java code is a lightweight implementation of [`EVP_BytesToKey()`][2].\r\n\r\n----------\r\n\r\nIn addition, a `safe=&#39;&#39;` should be passed as 2nd parameter in [`urllib.parse.quote()`][1] so that `/` is also replaced by an escape sequence.\r\n\r\n[1]: https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote\r\n[2]: https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html","title":"Converting AES 256 Java Encryption in python","body":"<p>The bug is in the key derivation: The Java implementation of the digest automatically resets the instance to the initial state after a <code>digest()</code> call, unlike the Python implementation.<br />\nTherefore, in the Python implementation, the digest must be <em>explicitly</em> reset, e.g. by creating a new digest object.<br />\nAttention: This is necessary in two places (whereby the second modification is only noticeable for iterations greater than 1).</p>\n<p>The following changes are required in <code>generate_key_and_iv()</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>...\ntry:\n    while generated_length &lt; key_length + iv_length:\n        h = md() # create new instance (1.)\n        if generated_length &gt; 0:\n            h.update(generated_data[generated_length - digest_length:generated_length])\n        h.update(password)\n        if salt is not None:\n            h.update(salt[:8])\n        generated_data[generated_length:generated_length + digest_length] = h.digest()\n\n        for i in range(1, iterations):\n            h = md() # create new instance (2.)\n            h.update(generated_data[generated_length:generated_length + digest_length])\n            generated_data[generated_length:generated_length + digest_length] = h.digest()\n\n        generated_length += digest_length\n        ...\n</code></pre>\n<p>For a test (and only for the test), a static salt can be used in both implementations. With identical plaintext and password, both encryptions then provide the same ciphertext.</p>\n<p>For completeness, the key derivation implemented in the Java code is a lightweight implementation of <a href=\"https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html\" rel=\"nofollow noreferrer\"><code>EVP_BytesToKey()</code></a>.</p>\n<hr />\n<p>In addition, a <code>safe=''</code> should be passed as 2nd parameter in <a href=\"https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote\" rel=\"nofollow noreferrer\"><code>urllib.parse.quote()</code></a> so that <code>/</code> is also replaced by an escape sequence.</p>\n"}],"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77022566,"answer_count":1,"score":0,"last_activity_date":1693568096,"creation_date":1693559049,"question_id":77021824,"body_markdown":"I have enryption code written in Java, and I am trying to write it in python, But the issue is python encryption and decryption is working fine but when trying to decrypt the  java encrypted string using python, its not working.\r\n\r\nThis is the Java code that I had. \r\n\r\n\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.net.URLEncoder;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.*;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\n\r\n@Slf4j\r\npublic class EncryptUsingAES {\r\n\r\n\r\n    /**\r\n     * This function takes a String as input and encrypts it using AES Algorithm\r\n     * @param stringToEncrypt\r\n     * @param publicKey\r\n     * @return\r\n     */\r\n    public String returnEncryptedString(String stringToEncrypt, String publicKey) {\r\n\r\n        Security.addProvider(new BouncyCastleProvider());\r\n        try{\r\n            SecureRandom sr = new SecureRandom();\r\n            byte[] salt = new byte[8];\r\n            sr.nextBytes(salt);\r\n            final byte[][] keyAndIV = generateKeyAndIV(salt, publicKey.getBytes(StandardCharsets.UTF_8), MessageDigest.getInstance(&quot;MD5&quot;));\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, BouncyCastleProvider.PROVIDER_NAME);\r\n            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(keyAndIV[0], &quot;AES&quot;), new IvParameterSpec(keyAndIV[1]));\r\n            byte[] encryptedData = cipher.doFinal(stringToEncrypt.getBytes(StandardCharsets.UTF_8));\r\n            byte[] prefixAndSaltAndEncryptedData = new byte[16 + encryptedData.length];\r\n\r\n            System.arraycopy(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8), 0, prefixAndSaltAndEncryptedData, 0, 8);\r\n\r\n            System.arraycopy(salt, 0, prefixAndSaltAndEncryptedData, 8, 8);\r\n\r\n            System.arraycopy(encryptedData, 0, prefixAndSaltAndEncryptedData, 16, encryptedData.length);\r\n            String encryptedString = URLEncoder.encode(Base64.getEncoder().encodeToString(prefixAndSaltAndEncryptedData),&quot;UTF-8&quot;);\r\n\r\n            return encryptedString;\r\n        } catch (Exception e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * this function creates key Initialisation Vector which is required for AES Encryption\r\n     * @param salt\r\n     * @param password\r\n     * @param md\r\n     * @return\r\n     */\r\n    protected byte[][] generateKeyAndIV(byte[] salt, byte[] password, MessageDigest md) {\r\n\r\n        int keyLength = 32;\r\n        int ivLength = 16;\r\n        int iterations = 1;\r\n        int digestLength = md.getDigestLength();\r\n        int requiredLength = (keyLength + ivLength + digestLength - 1) / digestLength * digestLength;\r\n        byte[] generatedData = new byte[requiredLength];\r\n        int generatedLength = 0;\r\n\r\n        try {\r\n            md.reset();\r\n\r\n            while (generatedLength &lt; keyLength + ivLength) {\r\n\r\n                if (generatedLength &gt; 0)\r\n                    md.update(generatedData, generatedLength - digestLength, digestLength);\r\n                md.update(password);\r\n                if (salt != null)\r\n                    md.update(salt, 0, 8);\r\n                md.digest(generatedData, generatedLength, digestLength);\r\n\r\n\r\n                for (int i = 1; i &lt; iterations; i++) {\r\n                    md.update(generatedData, generatedLength, digestLength);\r\n                    md.digest(generatedData, generatedLength, digestLength);\r\n                }\r\n\r\n                generatedLength += digestLength;\r\n            }\r\n\r\n            byte[][] result = new byte[2][];\r\n            result[0] = Arrays.copyOfRange(generatedData, 0, keyLength);\r\n            if (ivLength &gt; 0)\r\n                result[1] = Arrays.copyOfRange(generatedData, keyLength, keyLength + ivLength);\r\n\r\n            return result;\r\n\r\n        } catch (DigestException e) {\r\n            log.error(OrderStatusSmsTrackerConstants.ORDER_STATUS_SMS_TRACKER_SERVICE+ \r\n            return null;\r\n        } finally {\r\n\r\n            Arrays.fill(generatedData, (byte)0);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd this is my python encryption and decryption code, \r\n\r\n\r\n```\r\nfrom Crypto.Cipher import AES\r\nfrom Crypto.Util.Padding import pad, unpad\r\nfrom Crypto.Random import get_random_bytes\r\nimport base64\r\nimport urllib.parse\r\nimport hashlib\r\nimport logging\r\n\r\nclass EncryptUsingAES:\r\n    def return_encrypted_string(self, string_to_encrypt, public_key):\r\n        try:\r\n            salt = get_random_bytes(8)\r\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode(&#39;utf-8&#39;), hashlib.md5)\r\n\r\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\r\n            encrypted_data = cipher.encrypt(pad(string_to_encrypt.encode(&#39;utf-8&#39;), AES.block_size))\r\n\r\n            prefix_and_salt_and_encrypted_data = b&quot;Salted__&quot; + salt + encrypted_data\r\n            encrypted_string = urllib.parse.quote(base64.b64encode(prefix_and_salt_and_encrypted_data))\r\n\r\n            return encrypted_string\r\n        except Exception as e:\r\n            logging.error(&quot;Error when encrypting: &quot; + str(e))\r\n            return None\r\n        \r\n    def return_decrypted_string(self, encrypted_string, public_key):\r\n        try:\r\n            encrypted_data = base64.b64decode(urllib.parse.unquote(encrypted_string))\r\n            salt = encrypted_data[8:16]\r\n            encrypted_data = encrypted_data[16:]\r\n\r\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode(&#39;utf-8&#39;), hashlib.md5)\r\n\r\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\r\n            decrypted_data = unpad(cipher.decrypt(encrypted_data), AES.block_size)\r\n\r\n            return decrypted_data.decode(&#39;utf-8&#39;)\r\n        except Exception as e:\r\n            logging.error(&quot;Error when decrypting: &quot; + str(e))\r\n            return None\r\n\r\n    def generate_key_and_iv(self, salt, password, md):\r\n        key_length = 32\r\n        iv_length = 16\r\n        iterations = 1\r\n        digest_length = md().digest_size\r\n        required_length = (key_length + iv_length + digest_length - 1) // digest_length * digest_length\r\n        generated_data = bytearray([0]) * required_length\r\n        generated_length = 0\r\n\r\n        try:\r\n            md = md()\r\n            while generated_length &lt; key_length + iv_length:\r\n                if generated_length &gt; 0:\r\n                    md.update(generated_data[generated_length - digest_length:generated_length])\r\n                md.update(password)\r\n                if salt is not None:\r\n                    md.update(salt[:8])\r\n                generated_data[generated_length:generated_length + digest_length] = md.digest()\r\n\r\n                for i in range(1, iterations):\r\n                    md.update(generated_data[generated_length:generated_length + digest_length])\r\n                    generated_data[generated_length:generated_length + digest_length] = md.digest()\r\n\r\n                generated_length += digest_length\r\n\r\n            key = generated_data[:key_length]\r\n            iv = generated_data[key_length:key_length + iv_length]\r\n            return key, iv\r\n\r\n        except Exception as e:\r\n            logging.error(&quot;Error when generating key and IV: &quot; + str(e))\r\n            return None\r\n        finally:\r\n            for i in range(len(generated_data)):\r\n                generated_data[i] = 0\r\n```\r\n\r\nCan anyone help me on this. ","title":"Converting AES 256 Java Encryption in python","body":"<p>I have enryption code written in Java, and I am trying to write it in python, But the issue is python encryption and decryption is working fine but when trying to decrypt the  java encrypted string using python, its not working.</p>\n<p>This is the Java code that I had.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.security.*;\nimport java.util.Arrays;\nimport java.util.Base64;\n\n\n@Slf4j\npublic class EncryptUsingAES {\n\n\n    /**\n     * This function takes a String as input and encrypts it using AES Algorithm\n     * @param stringToEncrypt\n     * @param publicKey\n     * @return\n     */\n    public String returnEncryptedString(String stringToEncrypt, String publicKey) {\n\n        Security.addProvider(new BouncyCastleProvider());\n        try{\n            SecureRandom sr = new SecureRandom();\n            byte[] salt = new byte[8];\n            sr.nextBytes(salt);\n            final byte[][] keyAndIV = generateKeyAndIV(salt, publicKey.getBytes(StandardCharsets.UTF_8), MessageDigest.getInstance(&quot;MD5&quot;));\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, BouncyCastleProvider.PROVIDER_NAME);\n            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(keyAndIV[0], &quot;AES&quot;), new IvParameterSpec(keyAndIV[1]));\n            byte[] encryptedData = cipher.doFinal(stringToEncrypt.getBytes(StandardCharsets.UTF_8));\n            byte[] prefixAndSaltAndEncryptedData = new byte[16 + encryptedData.length];\n\n            System.arraycopy(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8), 0, prefixAndSaltAndEncryptedData, 0, 8);\n\n            System.arraycopy(salt, 0, prefixAndSaltAndEncryptedData, 8, 8);\n\n            System.arraycopy(encryptedData, 0, prefixAndSaltAndEncryptedData, 16, encryptedData.length);\n            String encryptedString = URLEncoder.encode(Base64.getEncoder().encodeToString(prefixAndSaltAndEncryptedData),&quot;UTF-8&quot;);\n\n            return encryptedString;\n        } catch (Exception e) {\n            return null;\n        }\n    }\n\n\n    /**\n     * this function creates key Initialisation Vector which is required for AES Encryption\n     * @param salt\n     * @param password\n     * @param md\n     * @return\n     */\n    protected byte[][] generateKeyAndIV(byte[] salt, byte[] password, MessageDigest md) {\n\n        int keyLength = 32;\n        int ivLength = 16;\n        int iterations = 1;\n        int digestLength = md.getDigestLength();\n        int requiredLength = (keyLength + ivLength + digestLength - 1) / digestLength * digestLength;\n        byte[] generatedData = new byte[requiredLength];\n        int generatedLength = 0;\n\n        try {\n            md.reset();\n\n            while (generatedLength &lt; keyLength + ivLength) {\n\n                if (generatedLength &gt; 0)\n                    md.update(generatedData, generatedLength - digestLength, digestLength);\n                md.update(password);\n                if (salt != null)\n                    md.update(salt, 0, 8);\n                md.digest(generatedData, generatedLength, digestLength);\n\n\n                for (int i = 1; i &lt; iterations; i++) {\n                    md.update(generatedData, generatedLength, digestLength);\n                    md.digest(generatedData, generatedLength, digestLength);\n                }\n\n                generatedLength += digestLength;\n            }\n\n            byte[][] result = new byte[2][];\n            result[0] = Arrays.copyOfRange(generatedData, 0, keyLength);\n            if (ivLength &gt; 0)\n                result[1] = Arrays.copyOfRange(generatedData, keyLength, keyLength + ivLength);\n\n            return result;\n\n        } catch (DigestException e) {\n            log.error(OrderStatusSmsTrackerConstants.ORDER_STATUS_SMS_TRACKER_SERVICE+ \n            return null;\n        } finally {\n\n            Arrays.fill(generatedData, (byte)0);\n        }\n    }\n}\n</code></pre>\n<p>And this is my python encryption and decryption code,</p>\n<pre><code>from Crypto.Cipher import AES\nfrom Crypto.Util.Padding import pad, unpad\nfrom Crypto.Random import get_random_bytes\nimport base64\nimport urllib.parse\nimport hashlib\nimport logging\n\nclass EncryptUsingAES:\n    def return_encrypted_string(self, string_to_encrypt, public_key):\n        try:\n            salt = get_random_bytes(8)\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode('utf-8'), hashlib.md5)\n\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\n            encrypted_data = cipher.encrypt(pad(string_to_encrypt.encode('utf-8'), AES.block_size))\n\n            prefix_and_salt_and_encrypted_data = b&quot;Salted__&quot; + salt + encrypted_data\n            encrypted_string = urllib.parse.quote(base64.b64encode(prefix_and_salt_and_encrypted_data))\n\n            return encrypted_string\n        except Exception as e:\n            logging.error(&quot;Error when encrypting: &quot; + str(e))\n            return None\n        \n    def return_decrypted_string(self, encrypted_string, public_key):\n        try:\n            encrypted_data = base64.b64decode(urllib.parse.unquote(encrypted_string))\n            salt = encrypted_data[8:16]\n            encrypted_data = encrypted_data[16:]\n\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode('utf-8'), hashlib.md5)\n\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\n            decrypted_data = unpad(cipher.decrypt(encrypted_data), AES.block_size)\n\n            return decrypted_data.decode('utf-8')\n        except Exception as e:\n            logging.error(&quot;Error when decrypting: &quot; + str(e))\n            return None\n\n    def generate_key_and_iv(self, salt, password, md):\n        key_length = 32\n        iv_length = 16\n        iterations = 1\n        digest_length = md().digest_size\n        required_length = (key_length + iv_length + digest_length - 1) // digest_length * digest_length\n        generated_data = bytearray([0]) * required_length\n        generated_length = 0\n\n        try:\n            md = md()\n            while generated_length &lt; key_length + iv_length:\n                if generated_length &gt; 0:\n                    md.update(generated_data[generated_length - digest_length:generated_length])\n                md.update(password)\n                if salt is not None:\n                    md.update(salt[:8])\n                generated_data[generated_length:generated_length + digest_length] = md.digest()\n\n                for i in range(1, iterations):\n                    md.update(generated_data[generated_length:generated_length + digest_length])\n                    generated_data[generated_length:generated_length + digest_length] = md.digest()\n\n                generated_length += digest_length\n\n            key = generated_data[:key_length]\n            iv = generated_data[key_length:key_length + iv_length]\n            return key, iv\n\n        except Exception as e:\n            logging.error(&quot;Error when generating key and IV: &quot; + str(e))\n            return None\n        finally:\n            for i in range(len(generated_data)):\n                generated_data[i] = 0\n</code></pre>\n<p>Can anyone help me on this.</p>\n"},{"tags":["java","swig"],"comments":[{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693562479,"post_id":77021846,"comment_id":135780727,"body_markdown":"I guess you can do so by creating a long variable in Java and passing it to the JNI function then in the JNI code, you can cast the long variable to a void** type and pass it to the C function...","body":"I guess you can do so by creating a long variable in Java and passing it to the JNI function then in the JNI code, you can cast the long variable to a void** type and pass it to the C function..."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693567660,"post_id":77021846,"comment_id":135781601,"body_markdown":"Create a c wrapper function that returns a pointer of the appropriate type. Your calling code will be much nicer.","body":"Create a c wrapper function that returns a pointer of the appropriate type. Your calling code will be much nicer."}],"owner":{"account_id":1702087,"reputation":88,"user_id":1561860,"display_name":"ITmindCo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693567673,"creation_date":1693559257,"question_id":77021846,"body_markdown":"There is the following function in shared library (dll):\r\n\r\n    intptr_t GetClassObject(void** pptr)\r\n    {\r\n        if(!*pptr)\r\n        {\r\n            int value = 10;\r\n            *pptr= &amp;value; //here is another code like new Obj()\r\n            return 0;\r\n        }\r\n    \r\n        return (intptr_t )*pptr;\r\n    }\r\n\r\n\r\nSWIG made the following wrapper:\r\n\r\n    SWIGEXPORT jint JNICALL Java_AddInSwigJNI_GetClassObject(JNIEnv *jenv, jclass jcls, jlong jarg1) {\r\n      jint jresult = 0 ;\r\n      void **arg1 = (void **) 0 ;\r\n      long result;\r\n      \r\n      (void)jenv;\r\n      (void)jcls;\r\n      arg1 = *(void***)&amp;jarg1; \r\n      result = (long)GetClassObject(arg1);\r\n      jresult = (jint)result; \r\n      return jresult;\r\n    }\r\n\r\njava:\r\n\r\n    public class AddInSwigJNI {\r\n      public final static native int GetClassObject(long jarg1);\r\n    }\r\n\r\nHow can I now make a null pointer in Java code and pass its address to this function?\r\nFurther, for example, I want to see the number 10 written at this pointer in java code","title":"How to pass null pointer (double pointer) to c function via java jni?","body":"<p>There is the following function in shared library (dll):</p>\n<pre><code>intptr_t GetClassObject(void** pptr)\n{\n    if(!*pptr)\n    {\n        int value = 10;\n        *pptr= &amp;value; //here is another code like new Obj()\n        return 0;\n    }\n\n    return (intptr_t )*pptr;\n}\n</code></pre>\n<p>SWIG made the following wrapper:</p>\n<pre><code>SWIGEXPORT jint JNICALL Java_AddInSwigJNI_GetClassObject(JNIEnv *jenv, jclass jcls, jlong jarg1) {\n  jint jresult = 0 ;\n  void **arg1 = (void **) 0 ;\n  long result;\n  \n  (void)jenv;\n  (void)jcls;\n  arg1 = *(void***)&amp;jarg1; \n  result = (long)GetClassObject(arg1);\n  jresult = (jint)result; \n  return jresult;\n}\n</code></pre>\n<p>java:</p>\n<pre><code>public class AddInSwigJNI {\n  public final static native int GetClassObject(long jarg1);\n}\n</code></pre>\n<p>How can I now make a null pointer in Java code and pass its address to this function?\nFurther, for example, I want to see the number 10 written at this pointer in java code</p>\n"},{"tags":["java","concurrency","reactive-programming","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1693297141,"post_id":76997701,"comment_id":135738548,"body_markdown":"I don&#39;t understand the `I would know at runtime what all methods I need to call` part. Can you elaborate?","body":"I don&#39;t understand the <code>I would know at runtime what all methods I need to call</code> part. Can you elaborate?"},{"owner":{"account_id":8696301,"reputation":1231,"user_id":6507527,"accept_rate":83,"display_name":"Akhil Prajapati"},"score":0,"creation_date":1693371649,"post_id":76997701,"comment_id":135750145,"body_markdown":"Based on the list of providers I would be getting in request, I would know what all APIs I need to call at runtime.","body":"Based on the list of providers I would be getting in request, I would know what all APIs I need to call at runtime."}],"answers":[{"tags":[],"owner":{"account_id":3568344,"reputation":645,"user_id":2979325,"display_name":"Serkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693566580,"creation_date":1693566580,"answer_id":77022616,"question_id":76997701,"body_markdown":"I’m typing this from my phone and out of my head, so apologies for errors but you should do something like this:\r\n\r\n    Uni&lt;Tuple&gt; parallelCalls(List params) {\r\n       return Uni.combine()\r\n                 .all()\r\n                 .unis(\r\n                    restCallA(params),    \r\n                    restCallB(params))\r\n                 .asTuple();\r\n    }\r\n\r\n\r\n    Uni&lt;ResultA&gt; restCallA(List params) {\r\n          return Multi.createFrom().iterable(params)\r\n                      .invoke(param-&gt; clientA.send(param))\r\n                      //combine results &amp; return as uni\r\n    }","title":"Call Rest APIs parallely and combina their results - Java + Quarkus","body":"<p>I’m typing this from my phone and out of my head, so apologies for errors but you should do something like this:</p>\n<pre><code>Uni&lt;Tuple&gt; parallelCalls(List params) {\n   return Uni.combine()\n             .all()\n             .unis(\n                restCallA(params),    \n                restCallB(params))\n             .asTuple();\n}\n\n\nUni&lt;ResultA&gt; restCallA(List params) {\n      return Multi.createFrom().iterable(params)\n                  .invoke(param-&gt; clientA.send(param))\n                  //combine results &amp; return as uni\n}\n</code></pre>\n"}],"owner":{"account_id":8696301,"reputation":1231,"user_id":6507527,"accept_rate":83,"display_name":"Akhil Prajapati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693566580,"creation_date":1693289247,"question_id":76997701,"body_markdown":"I need to call multiple APIs in parallel and combine their results as array and return to the consumer.\r\n\r\nHere is some context:\r\n\r\n - I would get the list of &quot;providers&quot; in the request. This list can have at least 1 or at most 10 values. This list could be different in different requests.\r\n - For each item in the list, I need to call a REST API. For example, if list contains [A,B], then I will be calling RestApiA and RestApiB, combine the result of both these APIs and return to the consumer.\r\n - These API calls will be independent of each other and should be called parallely. \r\n - If any of the API call fails, we should log an error but the rest of the API calls should still succeed. \r\n\r\nI came across this article https://quarkus.io/blog/mutiny-concurrent-uni/ but the problem here is I need to hardcode the functions I need to call concurrently. \r\n\r\nIn my case, I would know at runtime what all methods I need to call. ","title":"Call Rest APIs parallely and combina their results - Java + Quarkus","body":"<p>I need to call multiple APIs in parallel and combine their results as array and return to the consumer.</p>\n<p>Here is some context:</p>\n<ul>\n<li>I would get the list of &quot;providers&quot; in the request. This list can have at least 1 or at most 10 values. This list could be different in different requests.</li>\n<li>For each item in the list, I need to call a REST API. For example, if list contains [A,B], then I will be calling RestApiA and RestApiB, combine the result of both these APIs and return to the consumer.</li>\n<li>These API calls will be independent of each other and should be called parallely.</li>\n<li>If any of the API call fails, we should log an error but the rest of the API calls should still succeed.</li>\n</ul>\n<p>I came across this article <a href=\"https://quarkus.io/blog/mutiny-concurrent-uni/\" rel=\"nofollow noreferrer\">https://quarkus.io/blog/mutiny-concurrent-uni/</a> but the problem here is I need to hardcode the functions I need to call concurrently.</p>\n<p>In my case, I would know at runtime what all methods I need to call.</p>\n"},{"tags":["java","maven-2","compilation","package"],"comments":[{"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"score":1,"creation_date":1311213703,"post_id":6770455,"comment_id":8030411,"body_markdown":"Which version of maven compiler plugin?  Could you be hitting http://jira.codehaus.org/browse/MCOMPILER-71?  You could post the relevant pom snippet as well","body":"Which version of maven compiler plugin?  Could you be hitting <a href=\"http://jira.codehaus.org/browse/MCOMPILER-71\" rel=\"nofollow noreferrer\">jira.codehaus.org/browse/MCOMPILER-71</a>?  You could post the relevant pom snippet as well"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1311239790,"post_id":6770455,"comment_id":8034811,"body_markdown":"Raghuram, good catch, but ironically, when I added annotation, it started working :)Compiler plugin 2.3.2, source &amp; target = 1.6","body":"Raghuram, good catch, but ironically, when I added annotation, it started working :)Compiler plugin 2.3.2, source &amp; target = 1.6"}],"answers":[{"tags":[],"owner":{"account_id":350198,"reputation":15550,"user_id":685923,"accept_rate":70,"display_name":"Ed Staub"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1311214189,"creation_date":1311214189,"answer_id":6770598,"question_id":6770455,"body_markdown":"Works correctly in Maven 3; don&#39;t know about 2.  Is it possible that the package declaration in package-info.java is missing or wrong?","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Works correctly in Maven 3; don't know about 2.  Is it possible that the package declaration in package-info.java is missing or wrong?</p>\n"},{"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693565576,"creation_date":1311239539,"answer_id":6773781,"question_id":6770455,"body_markdown":"The error was that the `package-info.java` must have any annotation with `Retention=RUNTIME` to compile into a class. Otherwise, JDK 6 omits it.  \r\nI used `@Deprecated` which is the only one in Java SE (and I  didn&#39;t want to introduce an annotation just because of that).\r\n\r\n    @Deprecated\r\n    package cz.zizka.ondra.packageinfo.test","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>The error was that the <code>package-info.java</code> must have any annotation with <code>Retention=RUNTIME</code> to compile into a class. Otherwise, JDK 6 omits it.<br />\nI used <code>@Deprecated</code> which is the only one in Java SE (and I  didn't want to introduce an annotation just because of that).</p>\n<pre><code>@Deprecated\npackage cz.zizka.ondra.packageinfo.test\n</code></pre>\n"},{"tags":[],"owner":{"account_id":175470,"reputation":5175,"user_id":405505,"display_name":"zbyszek"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1648461088,"creation_date":1445022501,"answer_id":33177922,"question_id":6770455,"body_markdown":"Give `-Xpkginfo:always` option to javac.\r\n\r\nSee the \r\n\r\n - [`javac` 1.8 documentation](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)\r\n\r\n - [`javac` 17 documentation](https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html)","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Give <code>-Xpkginfo:always</code> option to javac.</p>\n<p>See the</p>\n<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\" rel=\"noreferrer\"><code>javac</code> 1.8 documentation</a></p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\" rel=\"noreferrer\"><code>javac</code> 17 documentation</a></p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13161416,"reputation":213,"user_id":11278676,"display_name":"Denis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690358803,"creation_date":1690358803,"answer_id":76769173,"question_id":6770455,"body_markdown":"Alternative solution (inspired by zbyszek&#39;s answer) is to add this to your `pom.xml`:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Alternative solution (inspired by zbyszek's answer) is to add this to your <code>pom.xml</code>:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7155,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":6773781,"answer_count":4,"score":8,"last_activity_date":1693565576,"creation_date":1311212379,"question_id":6770455,"body_markdown":"I have package-info.java in my package, Hibernate wants it for some features (programatic entity scanning).\r\n\r\nHowever, `mvn package` does not result in `package-info.class` being in `classes/` thus not in the artifact.\r\n\r\nHow can I force that happening?\r\n\r\n    mvn -v\r\n    Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)\r\n    Java version: 1.6.0_26\r\n    Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre\r\n    Default locale: en_US, platform encoding: UTF-8\r\n    OS name: &quot;linux&quot; version: &quot;2.6.35-30-generic&quot; arch: &quot;amd64&quot; Family: &quot;unix&quot;\r\n","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>I have package-info.java in my package, Hibernate wants it for some features (programatic entity scanning).</p>\n\n<p>However, <code>mvn package</code> does not result in <code>package-info.class</code> being in <code>classes/</code> thus not in the artifact.</p>\n\n<p>How can I force that happening?</p>\n\n<pre><code>mvn -v\nApache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)\nJava version: 1.6.0_26\nJava home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\" version: \"2.6.35-30-generic\" arch: \"amd64\" Family: \"unix\"\n</code></pre>\n"},{"tags":["java","testing","junit","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":543862,"reputation":53458,"user_id":913124,"accept_rate":100,"display_name":"Christos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602148759,"creation_date":1602148385,"answer_id":64259346,"question_id":64259197,"body_markdown":"You could try something like this:\r\n\r\n    import org.junit.runner.RunWith;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    \r\n    @RunWith( PowerMockRunner.class )\r\n    @PrepareForTest( NetworkReader.class )\r\n    public class Tests {\r\n    \r\n        @Test\r\n        public void testGetServerAddress() {\r\n            mockStatic(NetworkUtil.class);\r\n            when(NetworkReader.getLocalHostname()).thenThrow(new Exception(&quot;exception message));\r\n        \r\n            // Here you could test your interface. \r\n        }\r\n    }","title":"how to mock inetaddress.getlocalhost().gethostname() to throw an exception","body":"<p>You could try something like this:</p>\n<pre><code>import org.junit.runner.RunWith;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\n\n@RunWith( PowerMockRunner.class )\n@PrepareForTest( NetworkReader.class )\npublic class Tests {\n\n    @Test\n    public void testGetServerAddress() {\n        mockStatic(NetworkUtil.class);\n        when(NetworkReader.getLocalHostname()).thenThrow(new Exception(&quot;exception message));\n    \n        // Here you could test your interface. \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1594349,"reputation":1990,"user_id":1476921,"display_name":"chipiik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693565287,"creation_date":1693565287,"answer_id":77022475,"question_id":64259197,"body_markdown":"You can mock static methods even with Mockito (since 3.4.0). See [docs][1] or [tutorial][2].\r\n\r\nThe other possibility would be to wrap the static call into your own class and inject this into the final usage place. Your wrapper object could be then mocked in a standard way.\r\n\r\n  [1]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#48\r\n  [2]: https://www.baeldung.com/mockito-mock-static-methods","title":"how to mock inetaddress.getlocalhost().gethostname() to throw an exception","body":"<p>You can mock static methods even with Mockito (since 3.4.0). See <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#48\" rel=\"nofollow noreferrer\">docs</a> or <a href=\"https://www.baeldung.com/mockito-mock-static-methods\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n<p>The other possibility would be to wrap the static call into your own class and inject this into the final usage place. Your wrapper object could be then mocked in a standard way.</p>\n"}],"owner":{"account_id":15975342,"reputation":51,"user_id":11528412,"display_name":"t1808"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3243,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693565287,"creation_date":1602147830,"question_id":64259197,"body_markdown":"I want my junit test coverage to include default method from interface. Following is the method from the interface\r\n\r\n    public default String getServerAddress() {\r\n\t\ttry {\r\n\t\t\treturn InetAddress.getLocalHost().getHostAddress();\r\n\t\t} catch (Exception e) {\r\n\t\t\t return null;\r\n\t\t}\r\n\t}\r\nMy target is to cover exception part of this method. So i probably need to mock InetAddress to make it throw exception. But i&#39;m not sure how?\r\nI tried to mock inetAddress and do the following but doesn&#39;t seem to be working:\r\n\r\n    when(inetAddress.getLocalHost().getHostAddress()).thenThrow(Exception.class)\r\n","title":"how to mock inetaddress.getlocalhost().gethostname() to throw an exception","body":"<p>I want my junit test coverage to include default method from interface. Following is the method from the interface</p>\n<pre><code>public default String getServerAddress() {\n    try {\n        return InetAddress.getLocalHost().getHostAddress();\n    } catch (Exception e) {\n         return null;\n    }\n}\n</code></pre>\n<p>My target is to cover exception part of this method. So i probably need to mock InetAddress to make it throw exception. But i'm not sure how?\nI tried to mock inetAddress and do the following but doesn't seem to be working:</p>\n<pre><code>when(inetAddress.getLocalHost().getHostAddress()).thenThrow(Exception.class)\n</code></pre>\n"},{"tags":["java","user-interface","exception"],"comments":[{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":2,"creation_date":1693510890,"post_id":77018802,"comment_id":135774600,"body_markdown":"What does doing a quick search on that error bring to you? Did you try?","body":"What does doing a quick search on that error bring to you? Did you try?"},{"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"score":0,"creation_date":1693511275,"post_id":77018802,"comment_id":135774670,"body_markdown":"@esQmo_ i am literally trying to fix these errors for 3 days.....if you know the answer than help me","body":"@esQmo_ i am literally trying to fix these errors for 3 days.....if you know the answer than help me"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693512965,"post_id":77018802,"comment_id":135774992,"body_markdown":"This is your full code? I&#39;ve tested here and it works!","body":"This is your full code? I&#39;ve tested here and it works!"},{"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"score":0,"creation_date":1693513019,"post_id":77018802,"comment_id":135775004,"body_markdown":"u tested it in what IDE ?","body":"u tested it in what IDE ?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693513128,"post_id":77018802,"comment_id":135775019,"body_markdown":"Eclipse Version 2023-06","body":"Eclipse Version 2023-06"},{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693513559,"post_id":77018802,"comment_id":135775092,"body_markdown":"The goal is not to for us to fix your issue but to help you fix it yourself so that you can learn. I know it can be tough but it worth it.","body":"The goal is not to for us to fix your issue but to help you fix it yourself so that you can learn. I know it can be tough but it worth it."},{"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"score":0,"creation_date":1693514100,"post_id":77018802,"comment_id":135775158,"body_markdown":"@DiegoBorba I&#39;m using that eclipse version too..anyways that new code by you is working &amp; that my old code is working in VS code","body":"@DiegoBorba I&#39;m using that eclipse version too..anyways that new code by you is working &amp; that my old code is working in VS code"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693514241,"post_id":77018802,"comment_id":135775181,"body_markdown":"The problem are in the java version I gess... What java version are you using?","body":"The problem are in the java version I gess... What java version are you using?"},{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693514253,"post_id":77018802,"comment_id":135775184,"body_markdown":"The code is working. You get the exception when you dont fiil in age when promted","body":"The code is working. You get the exception when you dont fiil in age when promted"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693514399,"post_id":77018802,"comment_id":135775219,"body_markdown":"@esQmo_ I don&#39;t think so, when you dont fiil in age it returns a empty string and not null.","body":"@esQmo_ I don&#39;t think so, when you dont fiil in age it returns a empty string and not null."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693516721,"post_id":77018802,"comment_id":135775572,"body_markdown":"Always add a tag for your particular Java GUI framework, as we have several in Java (JavaFX, Swing, SWT, Vaadin, etc.). In this case, Swing. I did so for you this time.","body":"Always add a tag for your particular Java GUI framework, as we have several in Java (JavaFX, Swing, SWT, Vaadin, etc.). In this case, Swing. I did so for you this time."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1693560046,"creation_date":1693516188,"answer_id":77019285,"question_id":77018802,"body_markdown":"The exception you see means that the method `&#204;nteger.parseInt()` complains having to parse an unsuitable string (null). That null must have come from `JOptionPane.showInputDialog(...)`.\r\n\r\nWhen you look into the [API documentation][1] it does not mention that showInputDialog() can return null. But it also does not specify what happens if the user\r\n- enters data and presses Ok\r\n- enters no data and presses Ok\r\n- enters or not data and presses Cancel\r\n\r\nWhile the null value might indicate the user pressed Cancel (we still don&#39;t know), your code needs to deal with that situation. Either check for `null` before calling `parseInt()`, or call `parseInt()` regardless, catch the `NumberFormatException` and react in an appropriate way.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JOptionPane.html#showInputDialog(java.awt.Component,java.lang.Object)","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<p>The exception you see means that the method <code>Ìnteger.parseInt()</code> complains having to parse an unsuitable string (null). That null must have come from <code>JOptionPane.showInputDialog(...)</code>.</p>\n<p>When you look into the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JOptionPane.html#showInputDialog(java.awt.Component,java.lang.Object)\" rel=\"nofollow noreferrer\">API documentation</a> it does not mention that showInputDialog() can return null. But it also does not specify what happens if the user</p>\n<ul>\n<li>enters data and presses Ok</li>\n<li>enters no data and presses Ok</li>\n<li>enters or not data and presses Cancel</li>\n</ul>\n<p>While the null value might indicate the user pressed Cancel (we still don't know), your code needs to deal with that situation. Either check for <code>null</code> before calling <code>parseInt()</code>, or call <code>parseInt()</code> regardless, catch the <code>NumberFormatException</code> and react in an appropriate way.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693520358,"creation_date":1693520358,"answer_id":77019561,"question_id":77018802,"body_markdown":"&gt; _&quot;... IDK what happened I am new to java and not familiar with these types of errors... &quot;_\r\n\r\nIf you cancel the _age_ input dialog it will return _null_.  \r\nAnd, passing a _null_ argument to _[Integer#parseInt](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String))_ will produce a _[NumberFormatException](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/NumberFormatException.html)_.\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:627)\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:781)\r\n\tat test.main(test.java:13)\r\n```\r\n\r\nHere is the source for _Integer#parseInt_.  \r\n_[GitHub &amp;ndash; jdk/src/java.base/share/classes/java/lang/Integer.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L623)_.\r\n\r\n```java\r\npublic static int parseInt(String s, int radix)\r\n            throws NumberFormatException\r\n{\r\n    /* ... */\r\n\r\n    if (s == null) {\r\n        throw new NumberFormatException(&quot;Cannot parse null string&quot;);\r\n    }\r\n\r\n    ...\r\n```\r\n\r\nYou&#39;ll need to check for _null_.  \r\nI suggest using the _Integer_ and _Double_ classes, you can utilize the _null_ assignment.\r\n\r\n```java\r\nString name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\r\nJOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\r\n\r\nInteger age = null;\r\nString string = JOptionPane.showInputDialog (&quot;Enter your age&quot;);\r\nif (string != null &amp;&amp; !string.isBlank()) age = Integer.valueOf(string);\r\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\r\n\r\nDouble height = null;\r\nstring = JOptionPane.showInputDialog (&quot;Enter your height&quot;);\r\nif (string != null &amp;&amp; !string.isBlank()) height = Double.valueOf(string);\r\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\r\n```\r\n\r\nHere is the the tutorial on _Java Dialogs_.  \r\n_[How to Make Dialogs (The Java&amp;trade; Tutorials &amp;gt; Creating a GUI With Swing &amp;gt; Using Swing Components)](https://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)_.\r\n\r\n","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<blockquote>\n<p><em>&quot;... IDK what happened I am new to java and not familiar with these types of errors... &quot;</em></p>\n</blockquote>\n<p>If you cancel the <em>age</em> input dialog it will return <em>null</em>.<br />\nAnd, passing a <em>null</em> argument to <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"nofollow noreferrer\">Integer#parseInt</a></em> will produce a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/NumberFormatException.html\" rel=\"nofollow noreferrer\">NumberFormatException</a></em>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string\n    at java.base/java.lang.Integer.parseInt(Integer.java:627)\n    at java.base/java.lang.Integer.parseInt(Integer.java:781)\n    at test.main(test.java:13)\n</code></pre>\n<p>Here is the source for <em>Integer#parseInt</em>.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L623\" rel=\"nofollow noreferrer\">GitHub – jdk/src/java.base/share/classes/java/lang/Integer.java</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int parseInt(String s, int radix)\n            throws NumberFormatException\n{\n    /* ... */\n\n    if (s == null) {\n        throw new NumberFormatException(&quot;Cannot parse null string&quot;);\n    }\n\n    ...\n</code></pre>\n<p>You'll need to check for <em>null</em>.<br />\nI suggest using the <em>Integer</em> and <em>Double</em> classes, you can utilize the <em>null</em> assignment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\nJOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\n\nInteger age = null;\nString string = JOptionPane.showInputDialog (&quot;Enter your age&quot;);\nif (string != null &amp;&amp; !string.isBlank()) age = Integer.valueOf(string);\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\n\nDouble height = null;\nstring = JOptionPane.showInputDialog (&quot;Enter your height&quot;);\nif (string != null &amp;&amp; !string.isBlank()) height = Double.valueOf(string);\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\n</code></pre>\n<p>Here is the the tutorial on <em>Java Dialogs</em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html\" rel=\"nofollow noreferrer\">How to Make Dialogs (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Using Swing Components)</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693564857,"creation_date":1693564857,"answer_id":77022430,"question_id":77018802,"body_markdown":"So now you know the deal. To simply recap, the [Integer.parseInt()](https://www.tutorialspoint.com/java/number_parseint.htm) method can only accept a string consisting of *one* or *more* digits from **0** to **9** *(no spaces at all)* but, only up to [Integer.MAX_VALUE](https://www.educative.io/answers/what-is-integermaxvalue) which happens to be `2147483647` OR [Integer.MIN_VALUE](https://www.educative.io/answers/what-is-integerminvalue-in-java) which happens to be `-2147483648`. Yes, there are two specific characters the [Integer.parseInt()](https://www.tutorialspoint.com/java/number_parseint.htm) method will accept and they are the *plus* (**+**) character (which basically indicates an *unsigned*, positive value and is rarely used) and the **minus** (*-*) character which indicates a *signed* (negative) value.\r\n\r\nIf there are any alpha characters within the argument passed to the [Integer.parseInt()](https://www.tutorialspoint.com/java/number_parseint.htm) method (including any white-spaces) other than `+` or `-`, then the method will fail with a [NumberFormatException](https://docs.oracle.com/javase/8/docs/api/java/lang/NumberFormatException.html).\r\n\r\nThe [Double.parseDouble()](https://www.tutorialspoint.com/java/lang/double_parsedouble.htm) method works in very much the same fashion however, it does accept more alpha characters, for example:\r\n\r\n - `.` Decimal Point (period)       {only after the whole number portion\r\n   of the string: `&quot;234.342&quot;`);\r\n - `+` Unsigned designator          (only at the beginning of the\r\n   string: `&quot;+234.342&quot;`);\r\n - `-` Signed designator            (only at the beginning of the\r\n   string: `&quot;-234.342&quot;`);\r\n - `d` or `D` Double Type indicator (only at the end of the string: `&quot;234.342D&quot;`);\r\n - `f` or `F` Float Type indicator  (only at the end of the string: `&quot;234.342F&quot;`);\r\n - `e` or `E` Exponent Notation     (only within the decimal portion of\r\n   the string: `&quot;234.34E2&quot;`);\r\n\r\nAnd, you can also supply a string representation of an Integer value (whole number) to this method and it will convert it to Double Type, for example:\r\n\r\n    double dblValue = Double.parseDouble(&quot;234&quot;);\r\n\r\nThe `dbleValue` variable will hold: `234.0` \r\n\r\nAs already explained to you, the Input Dialog will return `null` when the &lt;kbd&gt;Cancel&lt;/kbd&gt; button is selected or the dialog window is closed with the &lt;kbd&gt;X&lt;/kbd&gt; button in the upper-right corner. Obviously, this needs to be dealt with and the best way to that is to **validate** the data you receive from the User. If the User makes a mistake then, inform that User and let him or her try again on the same prompt. Each bit of data entry provided from the User should be validated so to eliminate problems down the road. Deal with those problems at the entry level.\r\n\r\nHere is a runnable example. Be sure to read the comments in code. It looks like a lot of code but, if you delete all the commenting...it really isn&#39;t. Try it out if you like:\r\n\r\n```\r\npublic class Test {\r\n    \r\n    // Class member variables:\r\n    private final javax.swing.JFrame parent = new javax.swing.JFrame();\r\n        {\r\n            parent.setAlwaysOnTop(true);\r\n            parent.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\r\n            parent.setLocationRelativeTo(null);\r\n        }\r\n\r\n    private String name;\r\n    private int age;\r\n    private double height;\r\n\r\n\r\n    // Application entry point:\r\n    public static void main(String[] args) {\r\n        // This app takes no Command-Line arguments.\r\n\r\n        /* App started this way to avoid the need for \r\n           statics (unless we really want them):          */\r\n        new Test().startApp(args);\r\n    }\r\n\r\n    /* Code pertinent to this application is run here \r\n       and is initially called from the `main()` method: */\r\n    private void startApp(String[] args) {\r\n        // Outer Loop...Continues looping until User is happy with the entries:\r\n        int yesNo = 1; // Used in final JOptionPane Confirm Dialog:\r\n        while (yesNo != 0) {\r\n            // Initialize class member variables upon every iteration of the outer loop:\r\n            name = &quot;&quot;;\r\n            age = 0;\r\n            height = 0.0d;\r\n        \r\n            // PROMPT #1:\r\n            /* Name...If nothing is supplied the app ends (inner loop).\r\n               While name is empty...keep looping:            */\r\n            while (name.isEmpty()) {\r\n                // Get User&#39;s input:\r\n                name = javax.swing.JOptionPane.showInputDialog(parent,\r\n                        &quot;&lt;html&gt;&lt;b&gt;Please enter your name:&lt;/b&gt;&lt;br&gt;&quot;\r\n                        + &quot;&lt;font size=&#39;2&#39; color=gray&gt;If you enter nothing, this &quot;\r\n                        + &quot;application will close.&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\r\n                        &quot;Your Name?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\r\n                \r\n                // VALIDATION:\r\n                // If null or empty string is returned from dialog then end application:\r\n                if (name == null || name.trim().isEmpty()) {\r\n                    quit(); // Release the JFrame (parent) resource.\r\n                    return;\r\n                }\r\n                /* If there are numerical digits within the name then \r\n                   inform the User and allow to try again. Digits are\r\n                   not allowed in name for this particular case:   */\r\n                else if (name.matches(&quot;.*[0-9].*&quot;) || name.matches(&quot;.*?\\\\p{Punct}.*?&quot;)) {\r\n                    // Inform of Invalid Entry...\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;Invalid Name Supplied!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;There can be no numerical digits or special&lt;br&gt; characters in your name! &quot;\r\n                            + &quot;Select &lt;b&gt;OK&lt;/b&gt; to try&lt;br&gt;again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Name!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    name = &quot;&quot;;  // Empty name to ensure re-loop:\r\n                }\r\n            }\r\n            // If we&#39;ve made it here the &#39;name&#39; validation has passed.\r\n\r\n            \r\n            // PROMPT #2:\r\n            /* Age...Continue looping until a valid age is supplied:\r\n               If nothing is supplied then the application ends:\r\n               Allowable age range is from 1 to 120 years (inclusive): */\r\n            String theAge = &quot;&quot;;\r\n            while (theAge.isEmpty()) {\r\n                // Get User&#39;s input:\r\n                theAge = javax.swing.JOptionPane.showInputDialog(parent,\r\n                        &quot;&lt;html&gt;Hello &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, &quot;\r\n                        + &quot;now please enter your age:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Age?&quot;,\r\n                        javax.swing.JOptionPane.PLAIN_MESSAGE);\r\n                \r\n                // VALIDATION:\r\n                /* If Nothing was supplied or the Cancel or close \r\n                   buttons were selected then quit.           */\r\n                if (theAge == null || theAge.trim().isEmpty()) {\r\n                    quit();     // Release the JFrame (parent) resource.\r\n                    return;     // Simply returning effectively ends this appliction.\r\n                }\r\n                // If the User&#39;s entry all digits?\r\n                else if (!theAge.matches(&quot;\\\\d+&quot;)) {\r\n                    // No...Inform User and allow to try again:\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;Your age must contain numerical digits relating to an&lt;br&gt;&quot;\r\n                            + &quot;inclusive integer value from 1 (min) to 120 (max)!&lt;br&gt;&lt;br&gt;&quot;\r\n                            + &quot;Select the &lt;b&gt;OK&lt;/b&gt; button to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    theAge = &quot;&quot;;  // Empty name to ensure proper re-loop:\r\n                    continue;\r\n                }\r\n                \r\n                // Convert input to int:\r\n                age = Integer.parseInt(theAge);\r\n                \r\n                // Is &#39;age&#39; within a desire range? (1 to 120 years)\r\n                if (age &lt; 1 || age &gt; 120) {\r\n                    // No...Inform User and allow to try again...\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;Your age must a value from 1 (min) to 120 (max)!&lt;br&gt;&quot;\r\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    theAge = &quot;&quot;;  // Empty name to ensure re-loop:\r\n                    age = 0;      // Make sure &#39;age&#39; is reset to 0:\r\n                }\r\n            }\r\n            // If we&#39;ve made it here the `age` validation has passed.\r\n\r\n            \r\n            // PROMPT #3:\r\n            /* Height...Continue looping until a valid height is supplied:\r\n               Hieght range is from 8 inches to 102 inches:            */\r\n            String theHeight = &quot;&quot;;\r\n            while (theHeight.isEmpty()) {\r\n                // Get User&#39;s input:\r\n                theHeight = javax.swing.JOptionPane.showInputDialog(parent,\r\n                        &quot;&lt;html&gt;Well &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, we know &quot;\r\n                        + &quot;your name and we know that you are&lt;br&gt;&lt;font color=blue&gt;&lt;b&gt;&quot;\r\n                        + age + &quot;&lt;/b&gt;&lt;/font&gt; years old but, we still yet need to know &quot;\r\n                        + &quot;your height.&lt;br&gt;&lt;br&gt;Please supply your height in inches:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\r\n                        &quot;Your Height?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\r\n                \r\n                /* If Nothing was supplied or the Cancel or close \r\n                   buttons were selected then quit.           */\r\n                if (theHeight == null || theHeight.trim().isEmpty() || !theHeight.matches(&quot;\\\\d+(\\\\.\\\\d+)?&quot;)) {\r\n                    quit();     // Release the JFrame (parent) resource.\r\n                    return;\r\n                }\r\n                \r\n                // Convert input to double type:\r\n                height = Double.parseDouble(theHeight);\r\n\r\n                // Is &#39;height&#39; within a desire range? (8 to 102 inches)\r\n                if (height &lt; 8.0d || height &gt; 102.0d) {\r\n                    // No...inform User and allow to retry:\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Height!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + theHeight + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;Your height must a value from 8.0 (min) to 102.0 (max)!&lt;br&gt;&quot;\r\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Height!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    theHeight = &quot;&quot;;     // Empty name to ensure re-loop:\r\n                    height = 0.0d;      // Reset &#39;height&#39; to 0.0 (height is a double value):\r\n                }\r\n            }\r\n            // If we&#39;ve made it here the `age` validation has passed.\r\n            \r\n            \r\n            // FINAL PROMPT - DISPLAY:\r\n            /* Display Results...If User selects anything other than YES\r\n               then he/she is allowed to re-enter all the data otherwise\r\n               the application ends:                        :      */\r\n            yesNo = javax.swing.JOptionPane.showConfirmDialog(parent,\r\n                    &quot;&lt;html&gt;&quot;\r\n                    + &quot;So, overall, the information you provided is:&lt;br&gt;&quot;\r\n                    + &quot;&lt;ul&gt;&quot;\r\n                    + &quot;• &lt;b&gt;Name:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;&quot; + name + &quot;&lt;/font&gt;&lt;br&gt;&quot;\r\n                    + &quot;• &lt;b&gt;Age:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=red&gt;&quot; + age + &quot;&lt;/font&gt; years&lt;br&gt;&quot;\r\n                    + &quot;• &lt;b&gt;Height:&lt;/b&gt; &lt;font color=purple&gt;&quot; + height + &quot;&lt;/font&gt; inches&lt;br&gt;&quot;\r\n                    + &quot;&lt;/ul&gt;&quot;\r\n                    + &quot;Is this correct?&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\r\n                    &quot;Confirm your Input:&quot;, javax.swing.JOptionPane.YES_NO_OPTION,\r\n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\r\n        }\r\n\r\n        // YES WAS SELECTED SO QUIT:\r\n        /* Release the JFrame (parent) resource and, display \r\n          a Notification Box in the bottom-right corner of \r\n          your screen, that you have quit:               */\r\n        quit();\r\n        \r\n        // DONE\r\n    }\r\n    \r\n    /* Quits the Application:    */\r\n    private void quit() { \r\n        // Dispose of the JFrame used as parent for all the dialogs:\r\n        parent.dispose();\r\n        // Display a Quit Notification:\r\n        sendNotification(&quot;Quiting Demo Application!&quot;, &quot;Bye Bye For Now. Try it &quot;\r\n                       + &quot;again later.&quot;, java.awt.TrayIcon.MessageType.NONE);\r\n    }\r\n    \r\n    /**\r\n     * Displays a typical Windows Notification above the Taskbar. If a\r\n     * SystemTray is not supported within the system this method was called then\r\n     * nothing is displayed (the method is not processed).&lt;br&gt;\r\n     *\r\n     * @param title           (String) Message Title&lt;br&gt;\r\n     *\r\n     * @param message         (String) Message&lt;br&gt;\r\n     *\r\n     * @param messageTypeIcon (MessageType) The MessageType is a ENUM from the\r\n     *                        TrayIncon Class, for example: TrayIcon.MessageType.INFO&lt;pre&gt;\r\n     *  The different MessageTypes available are:\r\n     *\r\n     *      TrayIcon.MessageType.ERROR\r\n     *      TrayIcon.MessageType.INFO\r\n     *      TrayIcon.MessageType.NONE\r\n     *      TrayIcon.MessageType.WARNING&lt;/pre&gt;\r\n     */\r\n    private void sendNotification(String title, String message, java.awt.TrayIcon.MessageType messageTypeIcon) {\r\n        try {\r\n            //Obtain only one instance of the SystemTray object\r\n            java.awt.SystemTray tray = java.awt.SystemTray.getSystemTray();\r\n            if (!java.awt.SystemTray.isSupported()) {\r\n                return;\r\n            }\r\n            java.awt.Image image = java.awt.Toolkit.getDefaultToolkit().createImage(&quot;&quot;);\r\n            java.awt.TrayIcon trayIcon = new java.awt.TrayIcon(image, &quot;&quot;);\r\n            tray.add(trayIcon);\r\n            \r\n            trayIcon.displayMessage(title, message, messageTypeIcon);\r\n            tray.remove(trayIcon);\r\n        }\r\n        catch (java.awt.AWTException ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n}\r\n```","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<p>So now you know the deal. To simply recap, the <a href=\"https://www.tutorialspoint.com/java/number_parseint.htm\" rel=\"nofollow noreferrer\">Integer.parseInt()</a> method can only accept a string consisting of <em>one</em> or <em>more</em> digits from <strong>0</strong> to <strong>9</strong> <em>(no spaces at all)</em> but, only up to <a href=\"https://www.educative.io/answers/what-is-integermaxvalue\" rel=\"nofollow noreferrer\">Integer.MAX_VALUE</a> which happens to be <code>2147483647</code> OR <a href=\"https://www.educative.io/answers/what-is-integerminvalue-in-java\" rel=\"nofollow noreferrer\">Integer.MIN_VALUE</a> which happens to be <code>-2147483648</code>. Yes, there are two specific characters the <a href=\"https://www.tutorialspoint.com/java/number_parseint.htm\" rel=\"nofollow noreferrer\">Integer.parseInt()</a> method will accept and they are the <em>plus</em> (<strong>+</strong>) character (which basically indicates an <em>unsigned</em>, positive value and is rarely used) and the <strong>minus</strong> (<em>-</em>) character which indicates a <em>signed</em> (negative) value.</p>\n<p>If there are any alpha characters within the argument passed to the <a href=\"https://www.tutorialspoint.com/java/number_parseint.htm\" rel=\"nofollow noreferrer\">Integer.parseInt()</a> method (including any white-spaces) other than <code>+</code> or <code>-</code>, then the method will fail with a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/NumberFormatException.html\" rel=\"nofollow noreferrer\">NumberFormatException</a>.</p>\n<p>The <a href=\"https://www.tutorialspoint.com/java/lang/double_parsedouble.htm\" rel=\"nofollow noreferrer\">Double.parseDouble()</a> method works in very much the same fashion however, it does accept more alpha characters, for example:</p>\n<ul>\n<li><code>.</code> Decimal Point (period)       {only after the whole number portion\nof the string: <code>&quot;234.342&quot;</code>);</li>\n<li><code>+</code> Unsigned designator          (only at the beginning of the\nstring: <code>&quot;+234.342&quot;</code>);</li>\n<li><code>-</code> Signed designator            (only at the beginning of the\nstring: <code>&quot;-234.342&quot;</code>);</li>\n<li><code>d</code> or <code>D</code> Double Type indicator (only at the end of the string: <code>&quot;234.342D&quot;</code>);</li>\n<li><code>f</code> or <code>F</code> Float Type indicator  (only at the end of the string: <code>&quot;234.342F&quot;</code>);</li>\n<li><code>e</code> or <code>E</code> Exponent Notation     (only within the decimal portion of\nthe string: <code>&quot;234.34E2&quot;</code>);</li>\n</ul>\n<p>And, you can also supply a string representation of an Integer value (whole number) to this method and it will convert it to Double Type, for example:</p>\n<pre><code>double dblValue = Double.parseDouble(&quot;234&quot;);\n</code></pre>\n<p>The <code>dbleValue</code> variable will hold: <code>234.0</code></p>\n<p>As already explained to you, the Input Dialog will return <code>null</code> when the <kbd>Cancel</kbd> button is selected or the dialog window is closed with the <kbd>X</kbd> button in the upper-right corner. Obviously, this needs to be dealt with and the best way to that is to <strong>validate</strong> the data you receive from the User. If the User makes a mistake then, inform that User and let him or her try again on the same prompt. Each bit of data entry provided from the User should be validated so to eliminate problems down the road. Deal with those problems at the entry level.</p>\n<p>Here is a runnable example. Be sure to read the comments in code. It looks like a lot of code but, if you delete all the commenting...it really isn't. Try it out if you like:</p>\n<pre><code>public class Test {\n    \n    // Class member variables:\n    private final javax.swing.JFrame parent = new javax.swing.JFrame();\n        {\n            parent.setAlwaysOnTop(true);\n            parent.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\n            parent.setLocationRelativeTo(null);\n        }\n\n    private String name;\n    private int age;\n    private double height;\n\n\n    // Application entry point:\n    public static void main(String[] args) {\n        // This app takes no Command-Line arguments.\n\n        /* App started this way to avoid the need for \n           statics (unless we really want them):          */\n        new Test().startApp(args);\n    }\n\n    /* Code pertinent to this application is run here \n       and is initially called from the `main()` method: */\n    private void startApp(String[] args) {\n        // Outer Loop...Continues looping until User is happy with the entries:\n        int yesNo = 1; // Used in final JOptionPane Confirm Dialog:\n        while (yesNo != 0) {\n            // Initialize class member variables upon every iteration of the outer loop:\n            name = &quot;&quot;;\n            age = 0;\n            height = 0.0d;\n        \n            // PROMPT #1:\n            /* Name...If nothing is supplied the app ends (inner loop).\n               While name is empty...keep looping:            */\n            while (name.isEmpty()) {\n                // Get User's input:\n                name = javax.swing.JOptionPane.showInputDialog(parent,\n                        &quot;&lt;html&gt;&lt;b&gt;Please enter your name:&lt;/b&gt;&lt;br&gt;&quot;\n                        + &quot;&lt;font size='2' color=gray&gt;If you enter nothing, this &quot;\n                        + &quot;application will close.&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\n                        &quot;Your Name?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\n                \n                // VALIDATION:\n                // If null or empty string is returned from dialog then end application:\n                if (name == null || name.trim().isEmpty()) {\n                    quit(); // Release the JFrame (parent) resource.\n                    return;\n                }\n                /* If there are numerical digits within the name then \n                   inform the User and allow to try again. Digits are\n                   not allowed in name for this particular case:   */\n                else if (name.matches(&quot;.*[0-9].*&quot;) || name.matches(&quot;.*?\\\\p{Punct}.*?&quot;)) {\n                    // Inform of Invalid Entry...\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;Invalid Name Supplied!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;There can be no numerical digits or special&lt;br&gt; characters in your name! &quot;\n                            + &quot;Select &lt;b&gt;OK&lt;/b&gt; to try&lt;br&gt;again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Name!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    name = &quot;&quot;;  // Empty name to ensure re-loop:\n                }\n            }\n            // If we've made it here the 'name' validation has passed.\n\n            \n            // PROMPT #2:\n            /* Age...Continue looping until a valid age is supplied:\n               If nothing is supplied then the application ends:\n               Allowable age range is from 1 to 120 years (inclusive): */\n            String theAge = &quot;&quot;;\n            while (theAge.isEmpty()) {\n                // Get User's input:\n                theAge = javax.swing.JOptionPane.showInputDialog(parent,\n                        &quot;&lt;html&gt;Hello &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, &quot;\n                        + &quot;now please enter your age:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Age?&quot;,\n                        javax.swing.JOptionPane.PLAIN_MESSAGE);\n                \n                // VALIDATION:\n                /* If Nothing was supplied or the Cancel or close \n                   buttons were selected then quit.           */\n                if (theAge == null || theAge.trim().isEmpty()) {\n                    quit();     // Release the JFrame (parent) resource.\n                    return;     // Simply returning effectively ends this appliction.\n                }\n                // If the User's entry all digits?\n                else if (!theAge.matches(&quot;\\\\d+&quot;)) {\n                    // No...Inform User and allow to try again:\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;Your age must contain numerical digits relating to an&lt;br&gt;&quot;\n                            + &quot;inclusive integer value from 1 (min) to 120 (max)!&lt;br&gt;&lt;br&gt;&quot;\n                            + &quot;Select the &lt;b&gt;OK&lt;/b&gt; button to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    theAge = &quot;&quot;;  // Empty name to ensure proper re-loop:\n                    continue;\n                }\n                \n                // Convert input to int:\n                age = Integer.parseInt(theAge);\n                \n                // Is 'age' within a desire range? (1 to 120 years)\n                if (age &lt; 1 || age &gt; 120) {\n                    // No...Inform User and allow to try again...\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;Your age must a value from 1 (min) to 120 (max)!&lt;br&gt;&quot;\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    theAge = &quot;&quot;;  // Empty name to ensure re-loop:\n                    age = 0;      // Make sure 'age' is reset to 0:\n                }\n            }\n            // If we've made it here the `age` validation has passed.\n\n            \n            // PROMPT #3:\n            /* Height...Continue looping until a valid height is supplied:\n               Hieght range is from 8 inches to 102 inches:            */\n            String theHeight = &quot;&quot;;\n            while (theHeight.isEmpty()) {\n                // Get User's input:\n                theHeight = javax.swing.JOptionPane.showInputDialog(parent,\n                        &quot;&lt;html&gt;Well &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, we know &quot;\n                        + &quot;your name and we know that you are&lt;br&gt;&lt;font color=blue&gt;&lt;b&gt;&quot;\n                        + age + &quot;&lt;/b&gt;&lt;/font&gt; years old but, we still yet need to know &quot;\n                        + &quot;your height.&lt;br&gt;&lt;br&gt;Please supply your height in inches:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\n                        &quot;Your Height?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\n                \n                /* If Nothing was supplied or the Cancel or close \n                   buttons were selected then quit.           */\n                if (theHeight == null || theHeight.trim().isEmpty() || !theHeight.matches(&quot;\\\\d+(\\\\.\\\\d+)?&quot;)) {\n                    quit();     // Release the JFrame (parent) resource.\n                    return;\n                }\n                \n                // Convert input to double type:\n                height = Double.parseDouble(theHeight);\n\n                // Is 'height' within a desire range? (8 to 102 inches)\n                if (height &lt; 8.0d || height &gt; 102.0d) {\n                    // No...inform User and allow to retry:\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Height!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + theHeight + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;Your height must a value from 8.0 (min) to 102.0 (max)!&lt;br&gt;&quot;\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Height!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    theHeight = &quot;&quot;;     // Empty name to ensure re-loop:\n                    height = 0.0d;      // Reset 'height' to 0.0 (height is a double value):\n                }\n            }\n            // If we've made it here the `age` validation has passed.\n            \n            \n            // FINAL PROMPT - DISPLAY:\n            /* Display Results...If User selects anything other than YES\n               then he/she is allowed to re-enter all the data otherwise\n               the application ends:                        :      */\n            yesNo = javax.swing.JOptionPane.showConfirmDialog(parent,\n                    &quot;&lt;html&gt;&quot;\n                    + &quot;So, overall, the information you provided is:&lt;br&gt;&quot;\n                    + &quot;&lt;ul&gt;&quot;\n                    + &quot;• &lt;b&gt;Name:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;&quot; + name + &quot;&lt;/font&gt;&lt;br&gt;&quot;\n                    + &quot;• &lt;b&gt;Age:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=red&gt;&quot; + age + &quot;&lt;/font&gt; years&lt;br&gt;&quot;\n                    + &quot;• &lt;b&gt;Height:&lt;/b&gt; &lt;font color=purple&gt;&quot; + height + &quot;&lt;/font&gt; inches&lt;br&gt;&quot;\n                    + &quot;&lt;/ul&gt;&quot;\n                    + &quot;Is this correct?&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\n                    &quot;Confirm your Input:&quot;, javax.swing.JOptionPane.YES_NO_OPTION,\n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\n        }\n\n        // YES WAS SELECTED SO QUIT:\n        /* Release the JFrame (parent) resource and, display \n          a Notification Box in the bottom-right corner of \n          your screen, that you have quit:               */\n        quit();\n        \n        // DONE\n    }\n    \n    /* Quits the Application:    */\n    private void quit() { \n        // Dispose of the JFrame used as parent for all the dialogs:\n        parent.dispose();\n        // Display a Quit Notification:\n        sendNotification(&quot;Quiting Demo Application!&quot;, &quot;Bye Bye For Now. Try it &quot;\n                       + &quot;again later.&quot;, java.awt.TrayIcon.MessageType.NONE);\n    }\n    \n    /**\n     * Displays a typical Windows Notification above the Taskbar. If a\n     * SystemTray is not supported within the system this method was called then\n     * nothing is displayed (the method is not processed).&lt;br&gt;\n     *\n     * @param title           (String) Message Title&lt;br&gt;\n     *\n     * @param message         (String) Message&lt;br&gt;\n     *\n     * @param messageTypeIcon (MessageType) The MessageType is a ENUM from the\n     *                        TrayIncon Class, for example: TrayIcon.MessageType.INFO&lt;pre&gt;\n     *  The different MessageTypes available are:\n     *\n     *      TrayIcon.MessageType.ERROR\n     *      TrayIcon.MessageType.INFO\n     *      TrayIcon.MessageType.NONE\n     *      TrayIcon.MessageType.WARNING&lt;/pre&gt;\n     */\n    private void sendNotification(String title, String message, java.awt.TrayIcon.MessageType messageTypeIcon) {\n        try {\n            //Obtain only one instance of the SystemTray object\n            java.awt.SystemTray tray = java.awt.SystemTray.getSystemTray();\n            if (!java.awt.SystemTray.isSupported()) {\n                return;\n            }\n            java.awt.Image image = java.awt.Toolkit.getDefaultToolkit().createImage(&quot;&quot;);\n            java.awt.TrayIcon trayIcon = new java.awt.TrayIcon(image, &quot;&quot;);\n            tray.add(trayIcon);\n            \n            trayIcon.displayMessage(title, message, messageTypeIcon);\n            tray.remove(trayIcon);\n        }\n        catch (java.awt.AWTException ex) {\n            System.err.println(ex);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1693564857,"creation_date":1693510727,"question_id":77018802,"body_markdown":"\r\n```\r\npackage semester2;\r\nimport javax.swing.*;\r\n\r\npublic class test\r\n{\r\n  public static void main (String[]args)\r\n  {\r\n\t  \r\n    String name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\r\n      JOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\r\n      \r\n    int age =\r\n      Integer.parseInt (JOptionPane.showInputDialog (&quot;Enter your age&quot;));\r\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\r\n      \r\n    double height =\r\n      Double.parseDouble (JOptionPane.showInputDialog (&quot;Enter your height&quot;));\r\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\r\n      \r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n[These are the errors](https://i.stack.imgur.com/d5SA7.png)\r\n\r\n\r\nIDK what happened I am new to java and not familiar with these types of errors...\r\n   ","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<pre><code>package semester2;\nimport javax.swing.*;\n\npublic class test\n{\n  public static void main (String[]args)\n  {\n      \n    String name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\n      JOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\n      \n    int age =\n      Integer.parseInt (JOptionPane.showInputDialog (&quot;Enter your age&quot;));\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\n      \n    double height =\n      Double.parseDouble (JOptionPane.showInputDialog (&quot;Enter your height&quot;));\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\n      \n  }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/d5SA7.png\" rel=\"nofollow noreferrer\">These are the errors</a></p>\n<p>IDK what happened I am new to java and not familiar with these types of errors...</p>\n"},{"tags":["java","sorting","mergesort"],"comments":[{"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"score":0,"creation_date":1693563352,"post_id":77022263,"comment_id":135780880,"body_markdown":"Where the link bro?","body":"Where the link bro?"},{"owner":{"account_id":29215899,"reputation":13,"user_id":22382733,"display_name":"DJ PRAGO_28"},"score":0,"creation_date":1693563610,"post_id":77022263,"comment_id":135780921,"body_markdown":"Sorry man I forgot .Its posted now.","body":"Sorry man I forgot .Its posted now."}],"answers":[{"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693564359,"creation_date":1693564006,"answer_id":77022347,"question_id":77022263,"body_markdown":"You forgot to increment your `j` index while breaking down the original array into 2.\r\n\r\n    else{\r\n         rightArray[j++] = array[i];\r\n    }\r\n\r\nIn your code, you are just setting and replacing again and again the first element of the array, `rightArray`.","title":"MergeSort function in java displaying zeroes","body":"<p>You forgot to increment your <code>j</code> index while breaking down the original array into 2.</p>\n<pre><code>else{\n     rightArray[j++] = array[i];\n}\n</code></pre>\n<p>In your code, you are just setting and replacing again and again the first element of the array, <code>rightArray</code>.</p>\n"}],"owner":{"account_id":29215899,"reputation":13,"user_id":22382733,"display_name":"DJ PRAGO_28"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77022347,"answer_count":1,"score":1,"last_activity_date":1693564661,"creation_date":1693563261,"question_id":77022263,"body_markdown":"I followed a tutorial on mergesort algoorithm in java and it displayed 0000002468 as result.\r\n\r\nI gave input of number from 1,2,3...9,0.\r\nIt was supposed to sort in ascending order.\r\nI double checked with the tutorial also and found nothing wrong.\r\nI can&#39;t solve it myself since i didn&#39;t really understand.\r\nTutorial is by BroCode btw.\r\n\r\nCode:\r\n\r\n    class m{\r\n        public static void main(String[]args){\r\n            int array[] = {8,4,5,3,2,7,1,9,0,6};\r\n\r\n            mergeSort(array);\r\n        \r\n        for(int i =0;i&lt;array.length;i++){\r\n            System.out.print(array[i] + &quot;&quot;);\r\n\r\n        }\r\n\r\n    }\r\n    private static void mergeSort(int[]array){\r\n\r\n        int length = array.length;\r\n        if(length&lt;=1)return;//base case\r\n        int middle = length/2;\r\n        int leftArray[] = new int[middle];\r\n        int rightArray[] = new int[length-middle];\r\n        int i=0;//left array\r\n        int j = 0;//right array\r\n        for(;i&lt;length;i++){\r\n            if(i&lt;middle){\r\n                leftArray[i] = array[i];\r\n\r\n            }else{\r\n                rightArray[j] = array[i];\r\n            }\r\n        }mergeSort(leftArray);\r\n         mergeSort(rightArray);\r\n         merge(leftArray,rightArray,array);\r\n\r\n        }\r\n\r\n        private static void merge(int[]leftArray,int[]rightArray,int[]array){\r\n            int leftSize = array.length/2;\r\n            int rightSize = array.length-leftSize;\r\n            int i=0,l=0,r=0;\r\n\r\n            // check conditions for merging\r\n\r\n            while(l&lt;leftSize &amp;&amp; r&lt;rightSize){\r\n                if(leftArray[l]&lt;rightArray[r]){\r\n                    array[i] = leftArray[l];\r\n                    i++;\r\n                    l++;\r\n                }else{\r\n                    array[i] = rightArray[r];\r\n                    i++;\r\n                    r++;\r\n                }\r\n            }\r\n            while(l&lt;leftSize){\r\n                array[i] = leftArray[l];\r\n                i++;\r\n                l++;\r\n\r\n            }\r\n            while(r&lt;rightSize){\r\n                array[i] = rightArray[r];\r\n                i++;\r\n                r++;\r\n            }\r\n        }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","title":"MergeSort function in java displaying zeroes","body":"<p>I followed a tutorial on mergesort algoorithm in java and it displayed 0000002468 as result.</p>\n<p>I gave input of number from 1,2,3...9,0.\nIt was supposed to sort in ascending order.\nI double checked with the tutorial also and found nothing wrong.\nI can't solve it myself since i didn't really understand.\nTutorial is by BroCode btw.</p>\n<p>Code:</p>\n<pre><code>class m{\n    public static void main(String[]args){\n        int array[] = {8,4,5,3,2,7,1,9,0,6};\n\n        mergeSort(array);\n    \n    for(int i =0;i&lt;array.length;i++){\n        System.out.print(array[i] + &quot;&quot;);\n\n    }\n\n}\nprivate static void mergeSort(int[]array){\n\n    int length = array.length;\n    if(length&lt;=1)return;//base case\n    int middle = length/2;\n    int leftArray[] = new int[middle];\n    int rightArray[] = new int[length-middle];\n    int i=0;//left array\n    int j = 0;//right array\n    for(;i&lt;length;i++){\n        if(i&lt;middle){\n            leftArray[i] = array[i];\n\n        }else{\n            rightArray[j] = array[i];\n        }\n    }mergeSort(leftArray);\n     mergeSort(rightArray);\n     merge(leftArray,rightArray,array);\n\n    }\n\n    private static void merge(int[]leftArray,int[]rightArray,int[]array){\n        int leftSize = array.length/2;\n        int rightSize = array.length-leftSize;\n        int i=0,l=0,r=0;\n\n        // check conditions for merging\n\n        while(l&lt;leftSize &amp;&amp; r&lt;rightSize){\n            if(leftArray[l]&lt;rightArray[r]){\n                array[i] = leftArray[l];\n                i++;\n                l++;\n            }else{\n                array[i] = rightArray[r];\n                i++;\n                r++;\n            }\n        }\n        while(l&lt;leftSize){\n            array[i] = leftArray[l];\n            i++;\n            l++;\n\n        }\n        while(r&lt;rightSize){\n            array[i] = rightArray[r];\n            i++;\n            r++;\n        }\n    }\n</code></pre>\n<p>}</p>\n"},{"tags":["java","windows","batch-file","processbuilder","poc"],"comments":[{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692724979,"post_id":76952519,"comment_id":135662578,"body_markdown":"The first mistake is naming the batch file `start.bat`. Batch files should have never the name of any [Windows command](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/windows-commands). __START__ is an internal command of `cmd.exe`. No batch file should have ever `start` as file name. The batch file could be named `StartCalc.cmd`. Note: The file extension should be also nowadays `.cmd` and not `.bat` although the difference in processing the lines inside the batch file by `cmd.exe` depending on file extension of the batch file is minimal.","body":"The first mistake is naming the batch file <code>start.bat</code>. Batch files should have never the name of any <a href=\"https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/windows-commands\" rel=\"nofollow noreferrer\">Windows command</a>. <b>START</b> is an internal command of <code>cmd.exe</code>. No batch file should have ever <code>start</code> as file name. The batch file could be named <code>StartCalc.cmd</code>. Note: The file extension should be also nowadays <code>.cmd</code> and not <code>.bat</code> although the difference in processing the lines inside the batch file by <code>cmd.exe</code> depending on file extension of the batch file is minimal."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725226,"post_id":76952519,"comment_id":135662621,"body_markdown":"The Java [Class ProcessBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html) is on Windows a Java wrapper class for the the Windows kernel library function [CreateProcess](https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw). There can be run executables. A batch file is not an executable, it is a text file containing lines which `cmd.exe` can process and execute.","body":"The Java <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">Class ProcessBuilder</a> is on Windows a Java wrapper class for the the Windows kernel library function <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw\" rel=\"nofollow noreferrer\">CreateProcess</a>. There can be run executables. A batch file is not an executable, it is a text file containing lines which <code>cmd.exe</code> can process and execute."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725425,"post_id":76952519,"comment_id":135662646,"body_markdown":"A double click on a batch file results in `explorer.exe` calling `CreateProcess` for starting `%ComSpec%` with the option `/c` and with full qualified batch file name appended as command to execute by `cmd.exe` and then close. `ComSpec` is an environment variable which is defined by Windows default with `%SystemRoot%\\System32\\cmd.exe` which expands usually to `C:\\Windows\\System32\\cmd.exe`. The Java code should therefore get the string value of the environment variable `SystemRoot` (better than getting `ComSpec` value for several reasons).","body":"A double click on a batch file results in <code>explorer.exe</code> calling <code>CreateProcess</code> for starting <code>%ComSpec%</code> with the option <code>&#47;c</code> and with full qualified batch file name appended as command to execute by <code>cmd.exe</code> and then close. <code>ComSpec</code> is an environment variable which is defined by Windows default with <code>%SystemRoot%\\System32\\cmd.exe</code> which expands usually to <code>C:\\Windows\\System32\\cmd.exe</code>. The Java code should therefore get the string value of the environment variable <code>SystemRoot</code> (better than getting <code>ComSpec</code> value for several reasons)."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725663,"post_id":76952519,"comment_id":135662683,"body_markdown":"`SystemRoot` is usually always defined as Windows defines it already at a very early state on booting Windows because of many Windows services depend on `SystemRoot`. The only possibility existing for a not (correct) defined `SystemRoot` is that a user opens a console (command prompt or PowerShell console or Windows Terminal) and explicitly undefines or redefines `SystemRoot`. I have never seen that a user really did that as nearly no Windows program works anymore on starting next a program like `java.exe`. However, if there is no or an empty string returned, use `&quot;C:\\\\Windows&quot;` as replacement","body":"<code>SystemRoot</code> is usually always defined as Windows defines it already at a very early state on booting Windows because of many Windows services depend on <code>SystemRoot</code>. The only possibility existing for a not (correct) defined <code>SystemRoot</code> is that a user opens a console (command prompt or PowerShell console or Windows Terminal) and explicitly undefines or redefines <code>SystemRoot</code>. I have never seen that a user really did that as nearly no Windows program works anymore on starting next a program like <code>java.exe</code>. However, if there is no or an empty string returned, use <code>&quot;C:\\\\Windows&quot;</code> as replacement"},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725888,"post_id":76952519,"comment_id":135662728,"body_markdown":"Then concatenate the Windows system directory path string with `&quot;\\\\System32\\\\cmd.exe&quot;` for the fully qualified file name of the *Windows Command Processor*. There could be used next a simple check if this file really exist and inform the user if it does not. This might be useless at the moment but who knows if Windows in 20 years will still have `cmd.exe`. Then can be used `ProcessBuilder` with most likely the string `C:\\Windows\\System32\\cmd.exe` for the application to run with the arguments `/D` and `/C` and the fully qualified batch file name, best enclosed in `&quot;`.","body":"Then concatenate the Windows system directory path string with <code>&quot;\\\\System32\\\\cmd.exe&quot;</code> for the fully qualified file name of the <i>Windows Command Processor</i>. There could be used next a simple check if this file really exist and inform the user if it does not. This might be useless at the moment but who knows if Windows in 20 years will still have <code>cmd.exe</code>. Then can be used <code>ProcessBuilder</code> with most likely the string <code>C:\\Windows\\System32\\cmd.exe</code> for the application to run with the arguments <code>&#47;D</code> and <code>&#47;C</code> and the fully qualified batch file name, best enclosed in <code>&quot;</code>."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692726065,"post_id":76952519,"comment_id":135662771,"body_markdown":"Run in a command prompt window `cmd /?` and read the output usage help. I recommend using `/D` as too many users corrupt their *Command Processor* configuration by adding an `AutoRun` registry value which is not used __only__ by `cmd.exe` on the user opens a command prompt by running `cmd` from Windows shell, as most users think but on __every__ execution of `cmd.exe` from any process and not only `explorer.exe` running as Windows shell without usage of option `/D`. Then your Java application can at least run `cmd.exe` as you want it even on a misconfigured Windows.","body":"Run in a command prompt window <code>cmd &#47;?</code> and read the output usage help. I recommend using <code>&#47;D</code> as too many users corrupt their <i>Command Processor</i> configuration by adding an <code>AutoRun</code> registry value which is not used <b>only</b> by <code>cmd.exe</code> on the user opens a command prompt by running <code>cmd</code> from Windows shell, as most users think but on <b>every</b> execution of <code>cmd.exe</code> from any process and not only <code>explorer.exe</code> running as Windows shell without usage of option <code>&#47;D</code>. Then your Java application can at least run <code>cmd.exe</code> as you want it even on a misconfigured Windows."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692726855,"post_id":76952519,"comment_id":135662958,"body_markdown":"I have not installed Java on the computer which I use at the moment and can&#39;t verify the Java code for that reason if there is something else in the Java code responsible for failed execution of the *Windows Command Processor* for processing the batch file `C:\\\\22840c1a\\start.bat`. BTW: In the batch file can be used `cd /d &quot;%~dp0subfolder&quot; || (echo There is no &quot;subfolder&quot; in &quot;%~dp0&quot;&amp; exit /B)` and `&quot;%~dp0subfolder\\calc.exe&quot;` to get the batch file itself working independent on the name of the batch file folder (as long as not using a shared folder on a network resource and its UNC path).","body":"I have not installed Java on the computer which I use at the moment and can&#39;t verify the Java code for that reason if there is something else in the Java code responsible for failed execution of the <i>Windows Command Processor</i> for processing the batch file <code>C:\\\\22840c1a\\start.bat</code>. BTW: In the batch file can be used <code>cd &#47;d &quot;%~dp0subfolder&quot; || (echo There is no &quot;subfolder&quot; in &quot;%~dp0&quot;&amp; exit &#47;B)</code> and <code>&quot;%~dp0subfolder\\calc.exe&quot;</code> to get the batch file itself working independent on the name of the batch file folder (as long as not using a shared folder on a network resource and its UNC path)."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692765601,"post_id":76952519,"comment_id":135667301,"body_markdown":"I agree with you on the proper naming, but I don&#39;t think that it&#39;s the cause of the Problem. Also one thing to mention, it works with an absolute path but not with a relative path. For me it feels like ProcessBuilder is not using the working directory correctly.","body":"I agree with you on the proper naming, but I don&#39;t think that it&#39;s the cause of the Problem. Also one thing to mention, it works with an absolute path but not with a relative path. For me it feels like ProcessBuilder is not using the working directory correctly."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692766996,"post_id":76952519,"comment_id":135667444,"body_markdown":"I just updated the PoCs. As you can see both PoCs that use cmd /c (with and without absolute path work) also the PoC to start a batch file directly from an absolute path works as well. Only the version starting a batch file from a relative path with properly set working directory is not working.","body":"I just updated the PoCs. As you can see both PoCs that use cmd /c (with and without absolute path work) also the PoC to start a batch file directly from an absolute path works as well. Only the version starting a batch file from a relative path with properly set working directory is not working."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692772126,"post_id":76952519,"comment_id":135668091,"body_markdown":"There can be used the free Windows Sysinternals (Microsoft) tool [Process Monitor](https://learn.microsoft.com/en-us/sysinternals/downloads/procmon) to view how `java.exe` starts `cmd.exe` with which command line. Double click on first recorded `cmd.exe` line in log of Process Monitor after a line with `java.exe` and select the tab __Process__. It can be seen in the log in which directory `cmd.exe` searches first for `Start.bat` which is the current working directory set by `CreateProcess` which must not be the directory set by `ProcessBuilder` on starting `Start.bat` instead of `cmd.exe`.","body":"There can be used the free Windows Sysinternals (Microsoft) tool <a href=\"https://learn.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"nofollow noreferrer\">Process Monitor</a> to view how <code>java.exe</code> starts <code>cmd.exe</code> with which command line. Double click on first recorded <code>cmd.exe</code> line in log of Process Monitor after a line with <code>java.exe</code> and select the tab <b>Process</b>. It can be seen in the log in which directory <code>cmd.exe</code> searches first for <code>Start.bat</code> which is the current working directory set by <code>CreateProcess</code> which must not be the directory set by <code>ProcessBuilder</code> on starting <code>Start.bat</code> instead of <code>cmd.exe</code>."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692845755,"post_id":76952519,"comment_id":135680352,"body_markdown":"I just tried it myself, were you able to record how the Process is started in the not working example? What Filters do you set? But if i understand you correctly, ProcessBuilder tries to execute my command using Java built-ins, therefore one of these tries to call CreateProcess to execute my actual command. CreateProcess takes directory as a parameter. And normally I would expect that this parameter is set to the working directory. I just tried some other variations and it shows that only BatchScripts relative to their working directory don&#39;t work, executables are fine.","body":"I just tried it myself, were you able to record how the Process is started in the not working example? What Filters do you set? But if i understand you correctly, ProcessBuilder tries to execute my command using Java built-ins, therefore one of these tries to call CreateProcess to execute my actual command. CreateProcess takes directory as a parameter. And normally I would expect that this parameter is set to the working directory. I just tried some other variations and it shows that only BatchScripts relative to their working directory don&#39;t work, executables are fine."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692846027,"post_id":76952519,"comment_id":135680370,"body_markdown":"For me the fix is to use absolute paths, but i&#39;m still curious where the difference is between starting a batch script with absolute path or with relative path. I think if absolute works, relative should work as well. Unfortunately I wasn&#39;t able to monitor with Process Monitor, I think I set the wrong filters that&#39;s why I asked about yours.","body":"For me the fix is to use absolute paths, but i&#39;m still curious where the difference is between starting a batch script with absolute path or with relative path. I think if absolute works, relative should work as well. Unfortunately I wasn&#39;t able to monitor with Process Monitor, I think I set the wrong filters that&#39;s why I asked about yours."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692857099,"post_id":76952519,"comment_id":135681297,"body_markdown":"In this case use in addition to the default filters __Process Name is cmd.exe__ then __Include__ and __Process Name is java.exe__ then __Include__ and __Path ends with Start.bat__ then __Include__. It is advisable to toggle off in the toolbar the last five symbols with exception of the filing cabinet icon to get only the file system activity shown in the *Process Monitor* window and not the other activities (registry, network, process and thread, profiling events).","body":"In this case use in addition to the default filters <b>Process Name is cmd.exe</b> then <b>Include</b> and <b>Process Name is java.exe</b> then <b>Include</b> and <b>Path ends with Start.bat</b> then <b>Include</b>. It is advisable to toggle off in the toolbar the last five symbols with exception of the filing cabinet icon to get only the file system activity shown in the <i>Process Monitor</i> window and not the other activities (registry, network, process and thread, profiling events)."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693564344,"creation_date":1693563846,"answer_id":77022323,"question_id":76952519,"body_markdown":"The `ProcessBuilder` command line launch using a relative path as you&#39;ve used in `pocNotWorking()` isn&#39;t implemented as you think.\r\n\r\n`ProcessBuilder` is applying a normal search using `Path` of your JVM. It does not - rightly or wrongly - consider checking in proposed subprocess `workingDirectory` to resolve a relative pathname to the command.\r\n\r\nYou can verify this by appending `C:\\22840c1a` to the path BEFORE launching your JVM for the unit tests, and then I would expect all 4 tests to work:\r\n\r\n    set Path=%Path%;C:\\22840c1a\r\n\r\nI also tested `pocWorking/pocNotWorking` on Linux with a shell script `start.sh` and it gives consistent results to Windows when calling `pocWorking/pocNotWorking`. The relative path version won&#39;t run unless you adjust PATH beforehand so that `start.sh` is resolved in PATH rather than the working directory:\r\n\r\n    export PATH=$PATH:/somepathto/22840c1a\r\n\r\nNote that you cannot fix this by attempting to edit path for the subprocess via `pb.environment().set(&quot;Path&quot;, xxx)`, the path edit must be to the JVM parent process. \r\n\r\nOverall, it seems good practice to use absolute path to `ProcessBuilder` or resolve command as `workingDirectory + File.separator + relativeExeName`","title":"Executing a Batch Script with ProcessBuilder","body":"<p>The <code>ProcessBuilder</code> command line launch using a relative path as you've used in <code>pocNotWorking()</code> isn't implemented as you think.</p>\n<p><code>ProcessBuilder</code> is applying a normal search using <code>Path</code> of your JVM. It does not - rightly or wrongly - consider checking in proposed subprocess <code>workingDirectory</code> to resolve a relative pathname to the command.</p>\n<p>You can verify this by appending <code>C:\\22840c1a</code> to the path BEFORE launching your JVM for the unit tests, and then I would expect all 4 tests to work:</p>\n<pre><code>set Path=%Path%;C:\\22840c1a\n</code></pre>\n<p>I also tested <code>pocWorking/pocNotWorking</code> on Linux with a shell script <code>start.sh</code> and it gives consistent results to Windows when calling <code>pocWorking/pocNotWorking</code>. The relative path version won't run unless you adjust PATH beforehand so that <code>start.sh</code> is resolved in PATH rather than the working directory:</p>\n<pre><code>export PATH=$PATH:/somepathto/22840c1a\n</code></pre>\n<p>Note that you cannot fix this by attempting to edit path for the subprocess via <code>pb.environment().set(&quot;Path&quot;, xxx)</code>, the path edit must be to the JVM parent process.</p>\n<p>Overall, it seems good practice to use absolute path to <code>ProcessBuilder</code> or resolve command as <code>workingDirectory + File.separator + relativeExeName</code></p>\n"}],"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77022323,"answer_count":1,"score":1,"last_activity_date":1693564344,"creation_date":1692701191,"question_id":76952519,"body_markdown":"I&#39;m trying to execute a Batch Script with ProcessBuilder and can&#39;t figure out why it&#39;s not working. \r\n\r\nI built a small PoC to show my problem, in order for this to work you would need to create some folders on C Drive:\r\n\r\n22840c1a\r\n\r\n22840c1a\\subfolder\r\n\r\nThen copy your calc.exe into the subfolder. Next create start.bat inside of 22840c1a. Paste the following content into start.bat\r\n\r\n    @echo off\r\n    echo &quot;Set WorkingDirectory&quot;\r\n    cd /d C:\\22840c1a\\subfolder\r\n    echo &quot;Start&quot;\r\n    C:\\22840c1a\\subfolder\\calc.exe\r\n\r\n\r\n\r\nWith that you&#39;re able to run the following unit test and reproduce the problem:\r\n\r\nUpdate: Added working PoC\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    class BatchExecutionTest {\r\n        @Test\r\n        void pocWorking() {\r\n            execute(Arrays.asList(&quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n        @Test\r\n        void pocNotWorking() {\r\n            execute(Arrays.asList(&quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n        @Test\r\n        void pocWorkingCmd1() {\r\n            execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n        @Test\r\n        void pocWorkingCmd2() {\r\n            execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n    \r\n        public static void execute(List&lt;String&gt; commands, String workingDirectory) {\r\n            try {\r\n                final ProcessBuilder pb = new ProcessBuilder(commands);\r\n                pb.redirectErrorStream(true);\r\n                pb.directory(new File(workingDirectory));\r\n                pb.start();\r\n            } catch (IOException e) {\r\n                throw new IllegalStateException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nIf everything works as expected the Unit Test is not able to execute start.bat because the  File could not be found. However you can run start.bat from cmd and its working fine. Why is ProcessBuilder not able to execute the Batch Script?","title":"Executing a Batch Script with ProcessBuilder","body":"<p>I'm trying to execute a Batch Script with ProcessBuilder and can't figure out why it's not working.</p>\n<p>I built a small PoC to show my problem, in order for this to work you would need to create some folders on C Drive:</p>\n<p>22840c1a</p>\n<p>22840c1a\\subfolder</p>\n<p>Then copy your calc.exe into the subfolder. Next create start.bat inside of 22840c1a. Paste the following content into start.bat</p>\n<pre><code>@echo off\necho &quot;Set WorkingDirectory&quot;\ncd /d C:\\22840c1a\\subfolder\necho &quot;Start&quot;\nC:\\22840c1a\\subfolder\\calc.exe\n</code></pre>\n<p>With that you're able to run the following unit test and reproduce the problem:</p>\n<p>Update: Added working PoC</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.List;\n\nclass BatchExecutionTest {\n    @Test\n    void pocWorking() {\n        execute(Arrays.asList(&quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n    @Test\n    void pocNotWorking() {\n        execute(Arrays.asList(&quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n    @Test\n    void pocWorkingCmd1() {\n        execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n    @Test\n    void pocWorkingCmd2() {\n        execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n\n    public static void execute(List&lt;String&gt; commands, String workingDirectory) {\n        try {\n            final ProcessBuilder pb = new ProcessBuilder(commands);\n            pb.redirectErrorStream(true);\n            pb.directory(new File(workingDirectory));\n            pb.start();\n        } catch (IOException e) {\n            throw new IllegalStateException(e);\n        }\n    }\n}\n</code></pre>\n<p>If everything works as expected the Unit Test is not able to execute start.bat because the  File could not be found. However you can run start.bat from cmd and its working fine. Why is ProcessBuilder not able to execute the Batch Script?</p>\n"},{"tags":["java","graphql"],"comments":[{"owner":{"account_id":1076091,"reputation":1392,"user_id":2438538,"display_name":"Arel"},"score":0,"creation_date":1686676775,"post_id":44737043,"comment_id":134830953,"body_markdown":"You could go out of your way to introduce a `Void` type as shown below, but **the return value is how the client tells whether an operation succeeded.** It&#39;s possible for the request to succeed (e.g., status 200) and yet one or more mutations fail (e.g., because of a database error).","body":"You could go out of your way to introduce a <code>Void</code> type as shown below, but <b>the return value is how the client tells whether an operation succeeded.</b> It&#39;s possible for the request to succeed (e.g., status 200) and yet one or more mutations fail (e.g., because of a database error)."}],"answers":[{"tags":[],"owner":{"account_id":5692330,"reputation":3440,"user_id":4500001,"accept_rate":60,"display_name":"Locco0_0"},"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1583908241,"creation_date":1498544752,"answer_id":44773532,"question_id":44737043,"body_markdown":"According to this [Github issue][1] you cannot return nothing.\r\n\r\nYou can define a return type which is nullable e.g.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    type Mutation {\r\n      addElement(element: ElementData): ID\r\n      removeElement(id: ID): Boolean\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nBut I suggest you return the id of the deleted element, because if you want to work with a cached store you have to update the store when the delete mutation has ran successfully.\r\n\r\n  [1]: https://github.com/apollographql/graphql-tools/issues/277","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>According to this <a href=\"https://github.com/apollographql/graphql-tools/issues/277\" rel=\"noreferrer\">Github issue</a> you cannot return nothing.</p>\n\n<p>You can define a return type which is nullable e.g.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>type Mutation {\r\n  addElement(element: ElementData): ID\r\n  removeElement(id: ID): Boolean\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But I suggest you return the id of the deleted element, because if you want to work with a cached store you have to update the store when the delete mutation has ran successfully.</p>\n"},{"tags":[],"owner":{"account_id":1128545,"reputation":4322,"user_id":1115187,"accept_rate":71,"display_name":"maxkoryukov"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1631471600,"creation_date":1589123095,"answer_id":61714123,"question_id":44737043,"body_markdown":"## (A) Solution with `graphql-scalars`\r\n\r\nThe original answer is below.\r\n\r\nHere is another one solution with [`graphql-scalars`](https://www.npmjs.com/package/graphql-scalars) library:\r\n\r\n 1. install `npm install graphql-scalars` and then\r\n 2. import their `Void` type: https://www.graphql-scalars.dev/docs/scalars/void\r\n\r\n## (B) Solution with a custom `scalar`\r\n\r\n&gt; **Note**: design with `void`-result from mutations goes against [_&quot;GQL best practices&quot;_](https://graphql-rules.com/rules/mutation-payload)\r\n\r\nThis example was written for NodeJS Apollo Framework, but it is pretty easy to convert the implementation for your language/framework \r\n\r\nI&#39;m pretty sure: there is an NPM-package named `graphql-void` but if you don&#39;t want to add another one dependency just copy this code.\r\n\r\n### 1. define `Void`-scalar in your schema\r\n\r\n```graphql\r\n# file: ./schema.gql\r\n\r\nscalar Void\r\n```\r\n\r\n### 2. implement resolver\r\n\r\n```javascript\r\n// file ./scalar-void.js\r\n\r\nimport { GraphQLScalarType } from &#39;graphql&#39;\r\n\r\nconst Void = new GraphQLScalarType({\r\n\tname: &#39;Void&#39;,\r\n\r\n\tdescription: &#39;Represents NULL values&#39;,\r\n\r\n\tserialize() {\r\n\t\treturn null\r\n\t},\r\n\r\n\tparseValue() {\r\n\t\treturn null\r\n\t},\r\n\r\n\tparseLiteral() {\r\n\t\treturn null\r\n\t}\r\n})\r\nexport Void\r\n```\r\n\r\n### 3. add the resolver to ApolloServer\r\n\r\nAdd the `Void` resolver to the options of your instance of Apollo Server:\r\n \r\n```javascript\r\n# file: ./server.js\r\n\r\nimport { ApolloServer } from &#39;apollo-server-express&#39;\r\nimport { Void } from &#39;./scalar-void&#39;\r\n\r\nconst server = new ApolloServer({\r\n\ttypeDefs,  // use your schema\r\n\tresolvers: {\r\n\t\tVoid: Void,\r\n\t\t// ... your resolvers\r\n\t},\r\n\t\r\n})\r\n```\r\n\r\n### 4. use `Void` for your mutations in the schema\r\n\r\n**Finally**, use the new `scalar` in your schema:\r\n\r\n```graphql\r\n# file: ./schema.gql\r\n\r\ntype Mutation{\r\n\taddElement(element: ElementData): ID\r\n\tremoveElement(id: ID): Void\r\n}\r\n```\r\n","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<h2>(A) Solution with <code>graphql-scalars</code></h2>\n<p>The original answer is below.</p>\n<p>Here is another one solution with <a href=\"https://www.npmjs.com/package/graphql-scalars\" rel=\"noreferrer\"><code>graphql-scalars</code></a> library:</p>\n<ol>\n<li>install <code>npm install graphql-scalars</code> and then</li>\n<li>import their <code>Void</code> type: <a href=\"https://www.graphql-scalars.dev/docs/scalars/void\" rel=\"noreferrer\">https://www.graphql-scalars.dev/docs/scalars/void</a></li>\n</ol>\n<h2>(B) Solution with a custom <code>scalar</code></h2>\n<blockquote>\n<p><strong>Note</strong>: design with <code>void</code>-result from mutations goes against <a href=\"https://graphql-rules.com/rules/mutation-payload\" rel=\"noreferrer\"><em>&quot;GQL best practices&quot;</em></a></p>\n</blockquote>\n<p>This example was written for NodeJS Apollo Framework, but it is pretty easy to convert the implementation for your language/framework</p>\n<p>I'm pretty sure: there is an NPM-package named <code>graphql-void</code> but if you don't want to add another one dependency just copy this code.</p>\n<h3>1. define <code>Void</code>-scalar in your schema</h3>\n<pre><code># file: ./schema.gql\n\nscalar Void\n</code></pre>\n<h3>2. implement resolver</h3>\n<pre class=\"lang-js prettyprint-override\"><code>// file ./scalar-void.js\n\nimport { GraphQLScalarType } from 'graphql'\n\nconst Void = new GraphQLScalarType({\n    name: 'Void',\n\n    description: 'Represents NULL values',\n\n    serialize() {\n        return null\n    },\n\n    parseValue() {\n        return null\n    },\n\n    parseLiteral() {\n        return null\n    }\n})\nexport Void\n</code></pre>\n<h3>3. add the resolver to ApolloServer</h3>\n<p>Add the <code>Void</code> resolver to the options of your instance of Apollo Server:</p>\n<pre class=\"lang-js prettyprint-override\"><code># file: ./server.js\n\nimport { ApolloServer } from 'apollo-server-express'\nimport { Void } from './scalar-void'\n\nconst server = new ApolloServer({\n    typeDefs,  // use your schema\n    resolvers: {\n        Void: Void,\n        // ... your resolvers\n    },\n    \n})\n</code></pre>\n<h3>4. use <code>Void</code> for your mutations in the schema</h3>\n<p><strong>Finally</strong>, use the new <code>scalar</code> in your schema:</p>\n<pre><code># file: ./schema.gql\n\ntype Mutation{\n    addElement(element: ElementData): ID\n    removeElement(id: ID): Void\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":283069,"reputation":2943,"user_id":580371,"accept_rate":27,"display_name":"Leksat"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1597651542,"creation_date":1591272716,"answer_id":62194285,"question_id":44737043,"body_markdown":"If you use TypeScript and `graphql-codegen`:\r\n\r\n- In the GraphQL schema:  \r\n    ```gql\r\n    scalar Void\r\n\r\n    type Mutation {\r\n      removeElement(id: ID): Void\r\n    }\r\n    ```\r\n\r\n- In the codegen config for resolvers:\r\n    ```yaml\r\n    config:\r\n      scalars:\r\n        Void: &quot;void&quot;\r\n    ```\r\n\r\nWith this config TypeScript will ensure that nothing is returned from the `removeElement` mutation resolver. And the returning value for the mutation will always be `null` on the GraphQL side.","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>If you use TypeScript and <code>graphql-codegen</code>:</p>\n<ul>\n<li><p>In the GraphQL schema:</p>\n<pre><code>scalar Void\n\ntype Mutation {\n  removeElement(id: ID): Void\n}\n</code></pre>\n</li>\n<li><p>In the codegen config for resolvers:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>config:\n  scalars:\n    Void: &quot;void&quot;\n</code></pre>\n</li>\n</ul>\n<p>With this config TypeScript will ensure that nothing is returned from the <code>removeElement</code> mutation resolver. And the returning value for the mutation will always be <code>null</code> on the GraphQL side.</p>\n"},{"tags":[],"owner":{"account_id":1045369,"reputation":151,"user_id":1050483,"display_name":"user1050483"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630992197,"creation_date":1630095392,"answer_id":68958950,"question_id":44737043,"body_markdown":"Check out [graphql-scalars Void][1].  This is standard boilerplate for all of my GraphQL projects.\r\n\r\n    npm i graphql-scalars \r\n\r\n\r\n  [1]: https://www.graphql-scalars.dev/docs/scalars/void/","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>Check out <a href=\"https://www.graphql-scalars.dev/docs/scalars/void/\" rel=\"nofollow noreferrer\">graphql-scalars Void</a>.  This is standard boilerplate for all of my GraphQL projects.</p>\n<pre><code>npm i graphql-scalars \n</code></pre>\n"},{"tags":[],"owner":{"account_id":183306,"reputation":9428,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693564280,"creation_date":1693564280,"answer_id":77022375,"question_id":44737043,"body_markdown":"Here my solution...\r\n\r\n**mutation.graphql**\r\n\r\n```graphql\r\ntype Mutation {\r\n\r\n    invokeNullMutation: Void\r\n\r\n}\r\n```\r\n\r\n**GraphQLScalar.java**\r\n\r\n```java\r\n@Internal\r\npublic class GraphQLVoidScalar {\r\n\r\n    static final Coercing&lt;Void, Void&gt; COERCING = new Coercing&lt;&gt;() {\r\n\r\n        @Override\r\n        public Void serialize(Object dataFetcherResult, GraphQLContext graphQLContext, Locale locale) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Void parseValue(Object input, GraphQLContext graphQLContext, Locale locale) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Void parseLiteral(Value&lt;?&gt; input, CoercedVariables variables, GraphQLContext graphQLContext, Locale locale) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Value&lt;?&gt; valueToLiteral(Object input, GraphQLContext graphQLContext, Locale locale) {\r\n            return Coercing.super.valueToLiteral(input, graphQLContext, locale);\r\n        }\r\n    };\r\n\r\n    public static final GraphQLScalarType INSTANCE = GraphQLScalarType\r\n        .newScalar()\r\n        .name(&quot;Void&quot;)\r\n        .description(&quot;Void scalar wrapper&quot;)\r\n        .coercing(COERCING)\r\n        .build();\r\n\r\n}\r\n```\r\n\r\n**GraphQLConfiguration.java**\r\n\r\n```java\r\npublic class GraphQLConfiguration {\r\n\r\n    @Bean\r\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\r\n\r\n        return wiringBuilder -&gt; wiringBuilder\r\n            .scalar(GraphQLCustomScalars.VOID);\r\n\r\n    }\r\n\r\n}\r\n```","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>Here my solution...</p>\n<p><strong>mutation.graphql</strong></p>\n<pre><code>type Mutation {\n\n    invokeNullMutation: Void\n\n}\n</code></pre>\n<p><strong>GraphQLScalar.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Internal\npublic class GraphQLVoidScalar {\n\n    static final Coercing&lt;Void, Void&gt; COERCING = new Coercing&lt;&gt;() {\n\n        @Override\n        public Void serialize(Object dataFetcherResult, GraphQLContext graphQLContext, Locale locale) {\n            return null;\n        }\n\n        @Override\n        public Void parseValue(Object input, GraphQLContext graphQLContext, Locale locale) {\n            return null;\n        }\n\n        @Override\n        public Void parseLiteral(Value&lt;?&gt; input, CoercedVariables variables, GraphQLContext graphQLContext, Locale locale) {\n            return null;\n        }\n\n        @Override\n        public Value&lt;?&gt; valueToLiteral(Object input, GraphQLContext graphQLContext, Locale locale) {\n            return Coercing.super.valueToLiteral(input, graphQLContext, locale);\n        }\n    };\n\n    public static final GraphQLScalarType INSTANCE = GraphQLScalarType\n        .newScalar()\n        .name(&quot;Void&quot;)\n        .description(&quot;Void scalar wrapper&quot;)\n        .coercing(COERCING)\n        .build();\n\n}\n</code></pre>\n<p><strong>GraphQLConfiguration.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GraphQLConfiguration {\n\n    @Bean\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\n\n        return wiringBuilder -&gt; wiringBuilder\n            .scalar(GraphQLCustomScalars.VOID);\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3680938,"reputation":3864,"user_id":3065924,"accept_rate":82,"display_name":"angrykoala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94421,"favorite_count":0,"down_vote_count":0,"up_vote_count":98,"accepted_answer_id":61714123,"answer_count":5,"score":98,"last_activity_date":1693564331,"creation_date":1498311900,"question_id":44737043,"body_markdown":"I have several GraphQL queries and mutations, now I&#39;m trying to implement a _delete_ mutation without returning any data:\r\n\r\n```\r\n    type Mutation{\r\n        addElement(element: ElementData): ID\r\n        removeElement(id: ID): &#191;?\r\n    }\r\n```\r\n\r\nHowever, it seems to be required to have a return value for the delete operation. Is there a way to perform an &quot;empty&quot; response in GraphQL? I would like to avoid things like returning a boolean or status flag if possible. \r\n\r\nI&#39;m not sure on what are the best practices for GraphQL delete operations.","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>I have several GraphQL queries and mutations, now I'm trying to implement a <em>delete</em> mutation without returning any data:</p>\n\n<pre><code>    type Mutation{\n        addElement(element: ElementData): ID\n        removeElement(id: ID): ¿?\n    }\n</code></pre>\n\n<p>However, it seems to be required to have a return value for the delete operation. Is there a way to perform an \"empty\" response in GraphQL? I would like to avoid things like returning a boolean or status flag if possible. </p>\n\n<p>I'm not sure on what are the best practices for GraphQL delete operations.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":6370022,"reputation":1,"user_id":4942722,"display_name":"Ryan Song"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472544247,"creation_date":1472519382,"answer_id":39217384,"question_id":26516254,"body_markdown":"I had the same issue and the followings are what I&#39;ve found out:\r\n\r\n 1. Can&#39;t use switchTo within lambda which driver instance is a parameter \r\n    e.g:\r\n\r\n         wait.Until( driver =&gt;  driver.SwitchTo().Alert() );\r\n   would cause unstable behavior (sometimes works, sometimes not as it hangs). I think it&#39;s because `driver.switchTo()` changes driver state where lamdba parameter is supposed to be immutable.\r\n\r\n 2. Incompatible browser driver version, Just change driver version would resolve this issue.\r\n","title":"Webdriver hangs when trying to handle alerts","body":"<p>I had the same issue and the followings are what I've found out:</p>\n\n<ol>\n<li><p>Can't use switchTo within lambda which driver instance is a parameter \ne.g:</p>\n\n<pre><code> wait.Until( driver =&gt;  driver.SwitchTo().Alert() );\n</code></pre>\n\n<p>would cause unstable behavior (sometimes works, sometimes not as it hangs). I think it's because <code>driver.switchTo()</code> changes driver state where lamdba parameter is supposed to be immutable.</p></li>\n<li><p>Incompatible browser driver version, Just change driver version would resolve this issue.</p></li>\n</ol>\n"}],"owner":{"account_id":5216831,"reputation":11,"user_id":4171513,"display_name":"FlashAzul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":834,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693564021,"creation_date":1414008702,"question_id":26516254,"body_markdown":"I&#39;m using the code from [this question](https://stackoverflow.com/questions/12893478/selenium-webdriver-cant-accept-alert). For some reason any time my test hits anything with an alert it will not return. It hits this:\r\n\r\n    webDriver.switchTo().alert();\r\n\r\nand then just spins forever, never returning. I expect the no alert present exception, but nothing happens.\r\n\r\nI&#39;ve also tried [this](https://stackoverflow.com/questions/8244723/alert-handling-in-selenium-webdriver-selenium-2-with-java) with no success. As soon as it hits the\r\n\r\n    wait.until(ExpectedConditions.alertIsPresent());\r\n\r\nit spins forever. I have noticed that if I close the browser manually it will skip past it without throwing an exception. I&#39;m using Ubuntu 14, latest version of Chrome, latest version of Webdriver and Chrome driver. My IDE is IntelliJ IDEA.\r\n\r\nI&#39;ve looked for quite a while with little success. Can anyone tell me how to fix my problem?\r\n\r\n---\r\n**(UPDATE)**\r\n\r\nI&#39;ve played around with this quite a bit and I&#39;ve noticed something strange. In my test if I use alert functions in the main body of code it works just fine. However, if I make a call from the main body of code to another function, and then in the function make a call to the alert functions, it will never return from the call. Not sure if that helps but I have no idea why that would matter. ","title":"Webdriver hangs when trying to handle alerts","body":"<p>I'm using the code from <a href=\"https://stackoverflow.com/questions/12893478/selenium-webdriver-cant-accept-alert\">this question</a>. For some reason any time my test hits anything with an alert it will not return. It hits this:</p>\n\n<pre><code>webDriver.switchTo().alert();\n</code></pre>\n\n<p>and then just spins forever, never returning. I expect the no alert present exception, but nothing happens.</p>\n\n<p>I've also tried <a href=\"https://stackoverflow.com/questions/8244723/alert-handling-in-selenium-webdriver-selenium-2-with-java\">this</a> with no success. As soon as it hits the</p>\n\n<pre><code>wait.until(ExpectedConditions.alertIsPresent());\n</code></pre>\n\n<p>it spins forever. I have noticed that if I close the browser manually it will skip past it without throwing an exception. I'm using Ubuntu 14, latest version of Chrome, latest version of Webdriver and Chrome driver. My IDE is IntelliJ IDEA.</p>\n\n<p>I've looked for quite a while with little success. Can anyone tell me how to fix my problem?</p>\n\n<hr>\n\n<p><strong>(UPDATE)</strong></p>\n\n<p>I've played around with this quite a bit and I've noticed something strange. In my test if I use alert functions in the main body of code it works just fine. However, if I make a call from the main body of code to another function, and then in the function make a call to the alert functions, it will never return from the call. Not sure if that helps but I have no idea why that would matter. </p>\n"},{"tags":["java","jsp","struts-1"],"comments":[{"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1306746920,"post_id":6110075,"comment_id":7178571,"body_markdown":"I don&#39;t see your mappings of `UserAction` in your `struts-config.xml`.","body":"I don&#39;t see your mappings of <code>UserAction</code> in your <code>struts-config.xml</code>."}],"answers":[{"tags":[],"owner":{"account_id":1519726,"reputation":9,"user_id":1419743,"display_name":"vikas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1338091816,"creation_date":1338091816,"answer_id":10771592,"question_id":6110075,"body_markdown":"Simply pass method name to your parameter variable, which you want to call \r\n\r\n\r\n&lt;action-mappings&gt;\r\n    &lt;action input=&quot;/index.jsp&quot; parameter=&quot;methodtocall&quot; name=&quot;UserForm&quot; path=&quot;/UserAction&quot; scope=&quot;session&quot; type=&quot;com.tk20.UserAction&quot;&gt;\r\n        &lt;forward name=&quot;success&quot; path=&quot;/dispatch.do?getMethodtocall= METHOD NAME&quot; /&gt;\r\n    &lt;/action&gt;\r\n\r\n    &lt;action path=&quot;/dispatch.do?getMethodtocall=display&quot; parameter=&quot;getMethodtocall&quot; name=&quot;UserForm&quot; scope=&quot;session&quot; type=&quot;com.tk20.TestDispatchAction&quot;&gt;\r\n        &lt;forward name=&quot;success&quot; path=&quot;/index.jsp&quot; /&gt;\r\n    &lt;/action&gt;\r\n\r\n    &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot; /&gt;\r\n&lt;/action-mappings&gt;\r\n","title":"Struts : call a a method of DispatchAction from another DispatchAction","body":"<p>Simply pass method name to your parameter variable, which you want to call </p>\n\n<p>\n    \n        \n    </p>\n\n<pre><code>&lt;action path=\"/dispatch.do?getMethodtocall=display\" parameter=\"getMethodtocall\" name=\"UserForm\" scope=\"session\" type=\"com.tk20.TestDispatchAction\"&gt;\n    &lt;forward name=\"success\" path=\"/index.jsp\" /&gt;\n&lt;/action&gt;\n\n&lt;action path=\"/Welcome\" forward=\"/welcomeStruts.jsp\" /&gt;\n</code></pre>\n\n<p></p>\n"}],"owner":{"account_id":756581,"reputation":11,"user_id":767669,"display_name":"amit4444"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8394,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693562835,"creation_date":1306238547,"question_id":6110075,"body_markdown":"I want to call a a method of dispatchAction from another dispatch action.\r\nI want that when I click on update or delete &quot;Inside display user method&quot; will be diplayed on my jsp.\r\n\r\n**Struts config file**\r\n\r\n    &lt;action-mappings&gt;\r\n    \t&lt;action input=&quot;/index.jsp&quot; parameter=&quot;methodtocall&quot; name=&quot;UserForm&quot; path=&quot;/UserAction&quot; scope=&quot;session&quot; type=&quot;com.tk20.UserAction&quot;&gt;\r\n    \t\t&lt;forward name=&quot;success&quot; path=&quot;/dispatch.do?getMethodtocall=display.do&quot; /&gt;\r\n    \t&lt;/action&gt;\r\n    \t\r\n    \t&lt;action path=&quot;/dispatch.do?getMethodtocall=display&quot; parameter=&quot;getMethodtocall&quot; name=&quot;UserForm&quot; scope=&quot;session&quot; type=&quot;com.tk20.TestDispatchAction&quot;&gt;\r\n    \t\t&lt;forward name=&quot;success&quot; path=&quot;/index.jsp&quot; /&gt;\r\n    \t&lt;/action&gt;\r\n    \t\r\n    \t&lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot; /&gt;\r\n    &lt;/action-mappings&gt;\r\n   \r\n\r\n**dispactch action classes**\r\n\r\n    public class UserAction extends DispatchAction {\r\n    \r\n        /* forward name=&quot;success&quot; path=&quot;&quot; */\r\n        private final static String SUCCESS = &quot;success&quot;;\r\n    \r\n        /**\r\n         * This is the Struts action method called on\r\n         * http://.../actionPath?method=myAction1,\r\n         * where &quot;method&quot; is the value specified in &lt;action&gt; element : \r\n         * ( &lt;action parameter=&quot;method&quot; .../&gt; )\r\n         */\r\n        public ActionForward add(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n       \r\n            return mapping.findForward(&quot;dispatch&quot;);\r\n        }\r\n       \r\n        \r\n        public ActionForward update(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n            userForm.setMessage(&quot;Inside update user method.&quot;);\r\n            return mapping.findForward(SUCCESS);\r\n        }\r\n    \r\n        public ActionForward delete(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n            userForm.setMessage(&quot;Inside delete user method.&quot;);\r\n            return mapping.findForward(SUCCESS);\r\n        }\r\n    }\r\n&lt;p&gt;\r\n\r\n    public class TestDispatchAction extends DispatchAction {\r\n    \r\n        /* forward name=&quot;success&quot; path=&quot;&quot; */\r\n        private final static String SUCCESS = &quot;success&quot;;\r\n    \r\n        /**\r\n         * This is the Struts action method called on\r\n         * http://.../actionPath?method=myAction1,\r\n         * where &quot;method&quot; is the value specified in &lt;action&gt; element : \r\n         * ( &lt;action parameter=&quot;method&quot; .../&gt; )\r\n         */\r\n        public ActionForward display(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n            userForm.setMessage(&quot;Inside display user method.&quot;);\r\n            return mapping.findForward(SUCCESS);\r\n        }\r\n        \r\n    }\r\n\r\nJSP page\r\n\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;script type=&quot;text/javascript&quot;&gt;\r\n    \tfunction submitForm() {\r\n    \t\tdocument.forms[0].action = &quot;UserAction.do?methodtocall=add&quot;;\r\n    \t\tdocument.forms[0].submit();\r\n    \t}\r\n    &lt;/script&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;html:form action=&quot;UserAction&quot;&gt;\r\n    \t&lt;table&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;bean:write name=&quot;UserForm&quot; property=&quot;message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;html:submit value=&quot;Add&quot; onclick=&quot;submitForm()&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;html:submit property=&quot;methodtocall&quot; value=&quot;update&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;html:submit property=&quot;methodtocall&quot;&gt;delete&lt;/html:submit&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/html:form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nthanks\r\n","title":"Struts : call a a method of DispatchAction from another DispatchAction","body":"<p>I want to call a a method of dispatchAction from another dispatch action.\nI want that when I click on update or delete \"Inside display user method\" will be diplayed on my jsp.</p>\n\n<p><strong>Struts config file</strong></p>\n\n<pre><code>&lt;action-mappings&gt;\n    &lt;action input=\"/index.jsp\" parameter=\"methodtocall\" name=\"UserForm\" path=\"/UserAction\" scope=\"session\" type=\"com.tk20.UserAction\"&gt;\n        &lt;forward name=\"success\" path=\"/dispatch.do?getMethodtocall=display.do\" /&gt;\n    &lt;/action&gt;\n\n    &lt;action path=\"/dispatch.do?getMethodtocall=display\" parameter=\"getMethodtocall\" name=\"UserForm\" scope=\"session\" type=\"com.tk20.TestDispatchAction\"&gt;\n        &lt;forward name=\"success\" path=\"/index.jsp\" /&gt;\n    &lt;/action&gt;\n\n    &lt;action path=\"/Welcome\" forward=\"/welcomeStruts.jsp\" /&gt;\n&lt;/action-mappings&gt;\n</code></pre>\n\n<p><strong>dispactch action classes</strong></p>\n\n<pre><code>public class UserAction extends DispatchAction {\n\n    /* forward name=\"success\" path=\"\" */\n    private final static String SUCCESS = \"success\";\n\n    /**\n     * This is the Struts action method called on\n     * http://.../actionPath?method=myAction1,\n     * where \"method\" is the value specified in &lt;action&gt; element : \n     * ( &lt;action parameter=\"method\" .../&gt; )\n     */\n    public ActionForward add(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n\n        return mapping.findForward(\"dispatch\");\n    }\n\n\n    public ActionForward update(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n        userForm.setMessage(\"Inside update user method.\");\n        return mapping.findForward(SUCCESS);\n    }\n\n    public ActionForward delete(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n        userForm.setMessage(\"Inside delete user method.\");\n        return mapping.findForward(SUCCESS);\n    }\n}\n</code></pre>\n\n<p><p></p>\n\n<pre><code>public class TestDispatchAction extends DispatchAction {\n\n    /* forward name=\"success\" path=\"\" */\n    private final static String SUCCESS = \"success\";\n\n    /**\n     * This is the Struts action method called on\n     * http://.../actionPath?method=myAction1,\n     * where \"method\" is the value specified in &lt;action&gt; element : \n     * ( &lt;action parameter=\"method\" .../&gt; )\n     */\n    public ActionForward display(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n        userForm.setMessage(\"Inside display user method.\");\n        return mapping.findForward(SUCCESS);\n    }\n\n}\n</code></pre>\n\n<p>JSP page</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function submitForm() {\n        document.forms[0].action = \"UserAction.do?methodtocall=add\";\n        document.forms[0].submit();\n    }\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;html:form action=\"UserAction\"&gt;\n    &lt;table&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;bean:write name=\"UserForm\" property=\"message\" /&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;html:submit value=\"Add\" onclick=\"submitForm()\" /&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;html:submit property=\"methodtocall\" value=\"update\" /&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;html:submit property=\"methodtocall\"&gt;delete&lt;/html:submit&gt;&lt;/td&gt;&lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/html:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["java","xml","spring","yaml","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1693582031,"post_id":77021421,"comment_id":135784558,"body_markdown":"It is probably a quoting problem, see [YAML: Do I need quotes for strings in YAML?](https://stackoverflow.com/q/19109912/11748454).","body":"It is probably a quoting problem, see <a href=\"https://stackoverflow.com/q/19109912/11748454\">YAML: Do I need quotes for strings in YAML?</a>."}],"answers":[{"tags":[],"owner":{"account_id":20867359,"reputation":101,"user_id":15328090,"display_name":"Igor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693562119,"creation_date":1693562119,"answer_id":77022138,"question_id":77021421,"body_markdown":"I was able to successfully run a simple app with your configuration and small additions(added Policies to RollingFileAppender and a couple Loggers, see the listings below).\r\n\r\nSource files:\r\n\r\n**Main.java**\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    \r\n    public class Main {\r\n        private static final Logger logger = LogManager.getLogger(Main.class);\r\n    \r\n        public static void main(String[] args) {\r\n           logger.info(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\n**log4j2.yaml**\r\n\r\n    Configuration:\r\n      packages: &quot;com.igorgoose&quot;\r\n    \r\n      Properties:\r\n        Property:\r\n          - name: log-path\r\n            value: &quot;C:\\\\Users\\\\i.shchepov\\\\Desktop\\\\projects\\\\log4j2-yaml-test&quot;\r\n          - name: log-name\r\n            value: &quot;my-service&quot;\r\n    \r\n      Appenders:\r\n        Console:\r\n          name: Console\r\n          target: SYSTEM_OUT\r\n          PatternLayout:\r\n            pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\r\n    \r\n        RollingFile:\r\n          name: File\r\n          Policies:\r\n            SizeBasedTriggeringPolicy:\r\n              size: 1 KB\r\n          fileName: ${log-path}/${log-name}.log\r\n          append: true\r\n          filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\r\n          PatternLayout:\r\n            charset: &quot;UTF-8&quot;\r\n            pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\r\n    \r\n      Loggers:\r\n        Root:\r\n          level: debug\r\n          AppenderRef:\r\n            - ref: Console\r\n        Logger:\r\n          - name: com.igorgoose\r\n            level: debug\r\n            AppenderRef:\r\n              - ref: File\r\n\r\n**pom.xml**\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.13.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.13.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nHowever, I was able to reproduce your issue by accidentally messing up the indentation in the log4j2 config, so that `Loggers` attribute was on the same level as `Configuration`.\r\n\r\n**log4j2.yaml(messed up)**\r\n\r\n    Configuration:\r\n      packages: &quot;com.igorgoose&quot;\r\n    \r\n    # ------the rest of configuration-----------\r\n    \r\n    Loggers:\r\n      Root:\r\n        level: debug\r\n        AppenderRef:\r\n          - ref: Console\r\n      Logger:\r\n        - name: com.igorgoose\r\n          level: debug\r\n          AppenderRef:\r\n            - ref: File\r\n\r\nSo please make sure that your indentations are correct and let me know if the issue is still there. Hope this helps!","title":"Declare multiple property variables in log4j2.yml configuration file","body":"<p>I was able to successfully run a simple app with your configuration and small additions(added Policies to RollingFileAppender and a couple Loggers, see the listings below).</p>\n<p>Source files:</p>\n<p><strong>Main.java</strong></p>\n<pre><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\npublic class Main {\n    private static final Logger logger = LogManager.getLogger(Main.class);\n\n    public static void main(String[] args) {\n       logger.info(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p><strong>log4j2.yaml</strong></p>\n<pre><code>Configuration:\n  packages: &quot;com.igorgoose&quot;\n\n  Properties:\n    Property:\n      - name: log-path\n        value: &quot;C:\\\\Users\\\\i.shchepov\\\\Desktop\\\\projects\\\\log4j2-yaml-test&quot;\n      - name: log-name\n        value: &quot;my-service&quot;\n\n  Appenders:\n    Console:\n      name: Console\n      target: SYSTEM_OUT\n      PatternLayout:\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\n\n    RollingFile:\n      name: File\n      Policies:\n        SizeBasedTriggeringPolicy:\n          size: 1 KB\n      fileName: ${log-path}/${log-name}.log\n      append: true\n      filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\n      PatternLayout:\n        charset: &quot;UTF-8&quot;\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\n\n  Loggers:\n    Root:\n      level: debug\n      AppenderRef:\n        - ref: Console\n    Logger:\n      - name: com.igorgoose\n        level: debug\n        AppenderRef:\n          - ref: File\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.13.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.13.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>However, I was able to reproduce your issue by accidentally messing up the indentation in the log4j2 config, so that <code>Loggers</code> attribute was on the same level as <code>Configuration</code>.</p>\n<p><strong>log4j2.yaml(messed up)</strong></p>\n<pre><code>Configuration:\n  packages: &quot;com.igorgoose&quot;\n\n# ------the rest of configuration-----------\n\nLoggers:\n  Root:\n    level: debug\n    AppenderRef:\n      - ref: Console\n  Logger:\n    - name: com.igorgoose\n      level: debug\n      AppenderRef:\n        - ref: File\n</code></pre>\n<p>So please make sure that your indentations are correct and let me know if the issue is still there. Hope this helps!</p>\n"}],"owner":{"account_id":17353082,"reputation":1,"user_id":12571132,"display_name":"Trong Nghia Vu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693562119,"creation_date":1693555224,"question_id":77021421,"body_markdown":"I am facing problems with these property variables when converting config files of log4j2 from .xml to .yml.\r\nMy well working .xml file looks like this, with 2 property variables &quot;log-path&quot; and &quot;log-name&quot;:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration xmlns=&quot;http://logging.apache.org/log4j/2.0/config&quot; packages=&quot;com.mypackage&quot;&gt;\r\n\r\n    &lt;Properties&gt;\r\n        &lt;Property name=&quot;log-path&quot;&gt;/var/work/logs/my-service&lt;/Property&gt;\r\n        &lt;Property name=&quot;log-name&quot;&gt;my-service&lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\r\n        &lt;/Console&gt;\r\n\r\n        &lt;RollingFile name=&quot;File&quot; fileName=&quot;${log-path}/${log-name}.log&quot; append=&quot;true&quot;\r\n                     filePattern=&quot;${log-path}/${log-name}-%d{yyyy-MM}/${log-name}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;200 MB&quot; /&gt;\r\n                &lt;TimeBasedTriggeringPolicy /&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10000&quot; compressionLevel=&quot;9&quot;/&gt;\r\n        &lt;/RollingFile&gt;\r\n//..............................\r\n```\r\n\r\nMy .yml file looks like this:\r\n\r\n```\r\nConfiguration:\r\n  packages: &quot;com.mypackage&quot;\r\n\r\n  Properties:\r\n    Property:\r\n      - name: log-path\r\n        value: &quot;/var/work/logs/my-service&quot;\r\n      - name: log-name\r\n        value: &quot;my-service&quot;\r\n\r\n  Appenders:\r\n    Console:\r\n      name: Console\r\n      target: SYSTEM_OUT\r\n      PatternLayout:\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\r\n\r\n    RollingFile:\r\n      name: File\r\n      fileName: ${log-path}/${log-name}.log\r\n      append: true\r\n      filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\r\n      PatternLayout:\r\n        charset: &quot;UTF-8&quot;\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\r\n// ......................\r\n```\r\n\r\nThe problem here is that the values ​​of &quot;log-path&quot; and &quot;log-name&quot; are not retrieved as I expected: `&quot;/var/work/logs/my-service/my-service.log&quot;`, instead the log file is generated right in my application directory with the path: `&quot;${log-path}/${log-name}.log&quot;`.\r\n\r\nBut it only has problems when I declare more than 1 variable. If I just declare a variable like this, everything works fine again:\r\n\r\n```\r\nConfiguration:\r\n  packages: &quot;com.mypackage&quot;\r\n\r\n  Properties:\r\n    Property:\r\n      name: log-path\r\n      value: &quot;/var/work/logs/my-service&quot;\r\n\r\n  Appenders:\r\n    Console:\r\n      name: Console\r\n      target: SYSTEM_OUT\r\n      PatternLayout:\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\r\n\r\n    RollingFile:\r\n      name: File\r\n      fileName: ${log-path}/my-service.log\r\n      append: true\r\n      filePattern: ${log-path}/my-service.log-%d{yyyy-MM}/my-service.log-%d{yyyy-MM-dd}-%i.log.gz\r\n      PatternLayout:\r\n        charset: &quot;UTF-8&quot;\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\r\n// ......................\r\n```\r\n\r\nI tried searching but couldn&#39;t find anything. Can you guys help me? How do I declare multiple property variables?","title":"Declare multiple property variables in log4j2.yml configuration file","body":"<p>I am facing problems with these property variables when converting config files of log4j2 from .xml to .yml.\nMy well working .xml file looks like this, with 2 property variables &quot;log-path&quot; and &quot;log-name&quot;:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration xmlns=&quot;http://logging.apache.org/log4j/2.0/config&quot; packages=&quot;com.mypackage&quot;&gt;\n\n    &lt;Properties&gt;\n        &lt;Property name=&quot;log-path&quot;&gt;/var/work/logs/my-service&lt;/Property&gt;\n        &lt;Property name=&quot;log-name&quot;&gt;my-service&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingFile name=&quot;File&quot; fileName=&quot;${log-path}/${log-name}.log&quot; append=&quot;true&quot;\n                     filePattern=&quot;${log-path}/${log-name}-%d{yyyy-MM}/${log-name}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;200 MB&quot; /&gt;\n                &lt;TimeBasedTriggeringPolicy /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10000&quot; compressionLevel=&quot;9&quot;/&gt;\n        &lt;/RollingFile&gt;\n//..............................\n</code></pre>\n<p>My .yml file looks like this:</p>\n<pre><code>Configuration:\n  packages: &quot;com.mypackage&quot;\n\n  Properties:\n    Property:\n      - name: log-path\n        value: &quot;/var/work/logs/my-service&quot;\n      - name: log-name\n        value: &quot;my-service&quot;\n\n  Appenders:\n    Console:\n      name: Console\n      target: SYSTEM_OUT\n      PatternLayout:\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\n\n    RollingFile:\n      name: File\n      fileName: ${log-path}/${log-name}.log\n      append: true\n      filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\n      PatternLayout:\n        charset: &quot;UTF-8&quot;\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\n// ......................\n</code></pre>\n<p>The problem here is that the values ​​of &quot;log-path&quot; and &quot;log-name&quot; are not retrieved as I expected: <code>&quot;/var/work/logs/my-service/my-service.log&quot;</code>, instead the log file is generated right in my application directory with the path: <code>&quot;${log-path}/${log-name}.log&quot;</code>.</p>\n<p>But it only has problems when I declare more than 1 variable. If I just declare a variable like this, everything works fine again:</p>\n<pre><code>Configuration:\n  packages: &quot;com.mypackage&quot;\n\n  Properties:\n    Property:\n      name: log-path\n      value: &quot;/var/work/logs/my-service&quot;\n\n  Appenders:\n    Console:\n      name: Console\n      target: SYSTEM_OUT\n      PatternLayout:\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\n\n    RollingFile:\n      name: File\n      fileName: ${log-path}/my-service.log\n      append: true\n      filePattern: ${log-path}/my-service.log-%d{yyyy-MM}/my-service.log-%d{yyyy-MM-dd}-%i.log.gz\n      PatternLayout:\n        charset: &quot;UTF-8&quot;\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\n// ......................\n</code></pre>\n<p>I tried searching but couldn't find anything. Can you guys help me? How do I declare multiple property variables?</p>\n"},{"tags":["java","code-generation","neovim","vscode-snippets","nvim.cmp"],"comments":[{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1693562059,"post_id":77022008,"comment_id":135780666,"body_markdown":"Have you tried doing a search for &quot;auto complete&quot; or intellisense plugins?","body":"Have you tried doing a search for &quot;auto complete&quot; or intellisense plugins?"},{"owner":{"account_id":29173721,"reputation":1,"user_id":22349421,"display_name":"wuhelang"},"score":0,"creation_date":1693661445,"post_id":77022008,"comment_id":135791784,"body_markdown":"yes intellisense plugin","body":"yes intellisense plugin"}],"owner":{"account_id":29173721,"reputation":1,"user_id":22349421,"display_name":"wuhelang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693561974,"creation_date":1693560901,"question_id":77022008,"body_markdown":" 1. when new a ArrayList in Jetbrains IDEA , like:\r\n\r\n    ```java\r\n      new ArrayList&lt;String&gt;()\r\n    ```\r\n\r\n 2. then write  &#39;.var&#39; at last\r\n\r\n    ```java\r\n     new ArrayList&lt;String&gt;().var\r\n    ```\r\n\r\n 3. then press Tab,IDEA automatic generate the local variable\r\n     ```java\r\n      ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n     ```\r\n 4. Question: if use neovim, is there any plugin for this scene? \r\n        now i use Luasnip plugin and friendly-snippets plugin\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/z60E7.png","title":"How to automatic generate variable in neovim like in Jetbrains IDEA","body":"<ol>\n<li><p>when new a ArrayList in Jetbrains IDEA , like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  new ArrayList&lt;String&gt;()\n</code></pre>\n</li>\n<li><p>then write  '.var' at last</p>\n<pre class=\"lang-java prettyprint-override\"><code> new ArrayList&lt;String&gt;().var\n</code></pre>\n</li>\n<li><p>then press Tab,IDEA automatic generate the local variable</p>\n<pre class=\"lang-java prettyprint-override\"><code> ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;();\n</code></pre>\n</li>\n<li><p>Question: if use neovim, is there any plugin for this scene?\nnow i use Luasnip plugin and friendly-snippets plugin</p>\n</li>\n</ol>\n"},{"tags":["java","openldap","lsc"],"answers":[{"tags":[],"owner":{"account_id":29333276,"reputation":1,"user_id":22474241,"display_name":"Marcin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693561893,"creation_date":1693561846,"answer_id":77022112,"question_id":77012025,"body_markdown":"Resolution is to make rjs script for all three attributes:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    &lt;dataset&gt;\r\n    \t\t&lt;name&gt;proxyAddresses&lt;/name&gt;\r\n    \t\t&lt;policy&gt;FORCE&lt;/policy&gt;\r\n            &lt;forceValues&gt;\r\n    \t\t&lt;string&gt;\r\n    \t\t&lt;![CDATA[rjs:\r\n    \t\t\t\tvar number = &quot;smtp:&quot; + srcBean.getDatasetValuesById(&quot;employeeNumber&quot;);\r\n    \t\t\t\tvar str = number.toString().toLowerCase();\r\n    \t\t\t\tvar emptystr = str.replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    \t\t\t\tif (srcBean.getDatasetValuesById(&quot;employeeNumber&quot;) != null &amp;&amp; !srcBean.getDatasetValuesById(&quot;employeeNumber&quot;).isEmpty()) {\r\n    \t\t\t\t\temptystr;\r\n                   } else {\r\n    \t\t\t\t\tnull;\r\n    \t\t\r\n    \t\t\t\t}\r\n    \t\t]]&gt;\t\t\r\n    \t\t&lt;/string&gt;\t\t\r\n    \t\t&lt;string&gt;\r\n    \t\t&lt;![CDATA[rjs:\t\t\r\n    \t\t\t\tvar type = &quot;smtp:&quot; + srcBean.getDatasetValuesById(&quot;employeeType&quot;);\r\n    \t\t\t\tvar str2 = type.toString().toLowerCase();\r\n    \t\t\t\tvar emptystr2 = str2.replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    \t\t\t\tif (srcBean.getDatasetValuesById(&quot;employeeType&quot;) != null &amp;&amp; !srcBean.getDatasetValuesById(&quot;employeeType&quot;).isEmpty()) {\r\n    \t\t\t\t\temptystr2;\r\n                   } else {\r\n    \t\t\t\t\tnull;\r\n    \t\t\t\t}\r\n    \t\t]]&gt;\r\n    \t\t&lt;/string&gt;\r\n    \t\t&lt;string&gt;\r\n    \t\t&lt;![CDATA[rjs:\r\n    \t\t\t\tvar umail = &quot;SMTP:&quot; + srcBean.getDatasetValuesById(&quot;mail&quot;);\r\n    \t\t\t\tvar str3 = umail.toString();\r\n    \t\t\t\tvar emptystr3 = str3.replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    \t\t\t\tif (srcBean.getDatasetValuesById(&quot;mail&quot;) != null &amp;&amp; !srcBean.getDatasetValuesById(&quot;mail&quot;).isEmpty()) {\r\n    \t\t\t\t\temptystr3;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tnull;\r\n    \t\t\t\t}\r\n    \t\t]]&gt;\r\n    \t\t&lt;/string&gt;\r\n    \t\t&lt;/forceValues&gt;\r\n    \t\t&lt;/dataset&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"LSC check if attribute is not null","body":"<p>Resolution is to make rjs script for all three attributes:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;dataset&gt;\n        &lt;name&gt;proxyAddresses&lt;/name&gt;\n        &lt;policy&gt;FORCE&lt;/policy&gt;\n        &lt;forceValues&gt;\n        &lt;string&gt;\n        &lt;![CDATA[rjs:\n                var number = \"smtp:\" + srcBean.getDatasetValuesById(\"employeeNumber\");\n                var str = number.toString().toLowerCase();\n                var emptystr = str.replace(\"[\", \"\").replace(\"]\", \"\");\n                if (srcBean.getDatasetValuesById(\"employeeNumber\") != null &amp;&amp; !srcBean.getDatasetValuesById(\"employeeNumber\").isEmpty()) {\n                    emptystr;\n               } else {\n                    null;\n        \n                }\n        ]]&gt;     \n        &lt;/string&gt;       \n        &lt;string&gt;\n        &lt;![CDATA[rjs:       \n                var type = \"smtp:\" + srcBean.getDatasetValuesById(\"employeeType\");\n                var str2 = type.toString().toLowerCase();\n                var emptystr2 = str2.replace(\"[\", \"\").replace(\"]\", \"\");\n                if (srcBean.getDatasetValuesById(\"employeeType\") != null &amp;&amp; !srcBean.getDatasetValuesById(\"employeeType\").isEmpty()) {\n                    emptystr2;\n               } else {\n                    null;\n                }\n        ]]&gt;\n        &lt;/string&gt;\n        &lt;string&gt;\n        &lt;![CDATA[rjs:\n                var umail = \"SMTP:\" + srcBean.getDatasetValuesById(\"mail\");\n                var str3 = umail.toString();\n                var emptystr3 = str3.replace(\"[\", \"\").replace(\"]\", \"\");\n                if (srcBean.getDatasetValuesById(\"mail\") != null &amp;&amp; !srcBean.getDatasetValuesById(\"mail\").isEmpty()) {\n                    emptystr3;\n                } else {\n                    null;\n                }\n        ]]&gt;\n        &lt;/string&gt;\n        &lt;/forceValues&gt;\n        &lt;/dataset&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":29333276,"reputation":1,"user_id":22474241,"display_name":"Marcin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693561893,"creation_date":1693437037,"question_id":77012025,"body_markdown":"I&#39;m using `LSC` to sync `OpenLDAP` to AD `DS`. I need to sync two attributes from `OpenLDAP` to one (`proxyaddresses`) in AD DS, with &quot;smtp:&quot; added before attribute. Attribute need to be senced only when it is not null in `OpenLDAP`.\r\n\r\n    &lt;dataset&gt;\t&lt;name&gt;proxyAddresses&lt;/name&gt;\t\t\t\t&lt;!-- Add proxyAddresses from employeeType and employeeNumber and mail --&gt;\r\n    \t\t&lt;policy&gt;FORCE&lt;/policy&gt;\r\n            &lt;forceValues&gt;\r\n    \t&lt;string&gt;js:(srcBean.getDatasetFirstValueById(&quot;employeeType&quot;) != null ? ((&quot;smtp:&quot;) + (srcBean.getDatasetFirstValueById(&quot;employeeType&quot;))) : null) &lt;/string&gt;\r\n    \t&lt;/forceValues&gt;\r\n    \t&lt;/dataset&gt;\r\n\r\nAbove is not working. When attribute employeeType is null in OpenLDAP, it is syncing only &quot;smtp:&quot;.\r\n\r\nHow to sync attribute with prefix, but only when it is not null?\r\n\r\nTired changing attribute from OpenLDAP.","title":"LSC check if attribute is not null","body":"<p>I'm using <code>LSC</code> to sync <code>OpenLDAP</code> to AD <code>DS</code>. I need to sync two attributes from <code>OpenLDAP</code> to one (<code>proxyaddresses</code>) in AD DS, with &quot;smtp:&quot; added before attribute. Attribute need to be senced only when it is not null in <code>OpenLDAP</code>.</p>\n<pre><code>&lt;dataset&gt;   &lt;name&gt;proxyAddresses&lt;/name&gt;             &lt;!-- Add proxyAddresses from employeeType and employeeNumber and mail --&gt;\n        &lt;policy&gt;FORCE&lt;/policy&gt;\n        &lt;forceValues&gt;\n    &lt;string&gt;js:(srcBean.getDatasetFirstValueById(&quot;employeeType&quot;) != null ? ((&quot;smtp:&quot;) + (srcBean.getDatasetFirstValueById(&quot;employeeType&quot;))) : null) &lt;/string&gt;\n    &lt;/forceValues&gt;\n    &lt;/dataset&gt;\n</code></pre>\n<p>Above is not working. When attribute employeeType is null in OpenLDAP, it is syncing only &quot;smtp:&quot;.</p>\n<p>How to sync attribute with prefix, but only when it is not null?</p>\n<p>Tired changing attribute from OpenLDAP.</p>\n"},{"tags":["java","multiplexing"],"comments":[{"owner":{"account_id":395867,"reputation":2757,"user_id":759049,"accept_rate":96,"display_name":"Pateman"},"score":0,"creation_date":1692947999,"post_id":76974991,"comment_id":135696602,"body_markdown":"Did you check the example in the JavaDoc of `java.util.concurrent.BlockingQueue`?","body":"Did you check the example in the JavaDoc of <code>java.util.concurrent.BlockingQueue</code>?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1692948163,"post_id":76974991,"comment_id":135696643,"body_markdown":"Why do you need to have multiple `BlockingQueue`s and listen to them from one thread?","body":"Why do you need to have multiple <code>BlockingQueue</code>s and listen to them from one thread?"}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693561850,"creation_date":1692948669,"answer_id":76975142,"question_id":76974991,"body_markdown":"If you come across a situation like this, I would recommend you to first think about why you need to listen to multiple `BlockingQueue`s. If possible, try inserting to the same `BlockingQueue` in all of the producer tasks. This should be applicable if all consumer tasks are want to listen to all of the queues.\r\n\r\n---\r\n\r\nYou can create another (master) `BlockingQueue` that gets entries from all other `BlockingQueue` and one Thread for each `BlockingQueue` you want to listen to that moves data to the master `BlockingQueue`:\r\n\r\n```java\r\n//data\r\nprivate BlockingQueue&lt;T&gt; masterQueue = new LinkedBlockingQueue&lt;T&gt;(1);\r\nprivate List&lt;BlockingQueue&lt;T&gt;&gt; toListenFrom = new ArrayList&lt;&gt;();//assume that has elements\r\n\r\nprivate ExecutorService queueDistributorExecutor = Executors.newVirtualThreadPerTaskExecutor();//use virtual threads if they are available - if not, use a different executor\r\n```\r\n\r\n```java\r\n// distribute elements\r\nfor(BlockingQueue queue : toListenFrom){\r\n    queueDistributorExecutor.execute(()-&gt;{\r\n        try {\r\n            while(true) {\r\n                masterQueue.put(queue.take());\r\n            }\r\n        } catch(InterruptedException e){\r\n            Thread.currentThread().interrupt();\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nThen, you can read from all queues by reading from `masterQueue`.\r\n\r\nThis code makes the assumptions that it&#39;s no problem if elements from `toListenFrom` queues are removed for `masterQueue` even if `masterQueue` is full (these will be inserted later).  \r\nDue to that, my implementation is not &quot;fair&quot;. The threads reading from the `masterQueue` would &quot;reserve&quot; one element from each other queue.","title":"Is there a way for a thread to listen to multiple BlockingQueues in Java?","body":"<p>If you come across a situation like this, I would recommend you to first think about why you need to listen to multiple <code>BlockingQueue</code>s. If possible, try inserting to the same <code>BlockingQueue</code> in all of the producer tasks. This should be applicable if all consumer tasks are want to listen to all of the queues.</p>\n<hr />\n<p>You can create another (master) <code>BlockingQueue</code> that gets entries from all other <code>BlockingQueue</code> and one Thread for each <code>BlockingQueue</code> you want to listen to that moves data to the master <code>BlockingQueue</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//data\nprivate BlockingQueue&lt;T&gt; masterQueue = new LinkedBlockingQueue&lt;T&gt;(1);\nprivate List&lt;BlockingQueue&lt;T&gt;&gt; toListenFrom = new ArrayList&lt;&gt;();//assume that has elements\n\nprivate ExecutorService queueDistributorExecutor = Executors.newVirtualThreadPerTaskExecutor();//use virtual threads if they are available - if not, use a different executor\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// distribute elements\nfor(BlockingQueue queue : toListenFrom){\n    queueDistributorExecutor.execute(()-&gt;{\n        try {\n            while(true) {\n                masterQueue.put(queue.take());\n            }\n        } catch(InterruptedException e){\n            Thread.currentThread().interrupt();\n        }\n    });\n}\n</code></pre>\n<p>Then, you can read from all queues by reading from <code>masterQueue</code>.</p>\n<p>This code makes the assumptions that it's no problem if elements from <code>toListenFrom</code> queues are removed for <code>masterQueue</code> even if <code>masterQueue</code> is full (these will be inserted later).<br />\nDue to that, my implementation is not &quot;fair&quot;. The threads reading from the <code>masterQueue</code> would &quot;reserve&quot; one element from each other queue.</p>\n"}],"owner":{"account_id":20102709,"reputation":47,"user_id":14740858,"display_name":"spin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76975142,"answer_count":1,"score":0,"last_activity_date":1693561850,"creation_date":1692947325,"question_id":76974991,"body_markdown":"In Java, is there a way for a thread to listen to multiple `java.util.concurrent.BlockingQueue`? Just like `java.nio.channels.Selector` listen to multiple `java.nio.channels.SocketChannel`.","title":"Is there a way for a thread to listen to multiple BlockingQueues in Java?","body":"<p>In Java, is there a way for a thread to listen to multiple <code>java.util.concurrent.BlockingQueue</code>? Just like <code>java.nio.channels.Selector</code> listen to multiple <code>java.nio.channels.SocketChannel</code>.</p>\n"},{"tags":["java","kotlin","encryption","bouncycastle","ed25519"],"comments":[{"owner":{"account_id":29330050,"reputation":76,"user_id":22471702,"display_name":"user22471702"},"score":2,"creation_date":1693511598,"post_id":77018840,"comment_id":135774740,"body_markdown":"related [How to create an OpenSSH compatible ED25519 key with Bouncy Castle?](https://stackoverflow.com/q/67273915/22471702)","body":"related <a href=\"https://stackoverflow.com/q/67273915/22471702\">How to create an OpenSSH compatible ED25519 key with Bouncy Castle?</a>"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1693522413,"post_id":77018840,"comment_id":135776265,"body_markdown":"The public key conversion is analogous to the private key conversion in the linked post, but using `PublicKeyFactory.createKey()` and `OpenSSHPublicKeyUtil.encodePublicKey()`. The PEM conversion is to be omitted. Instead, a Base64 encoding is sufficient, which gives the central part of the key (`AAAAC3...`) following `ssh-ed25519` (see e.g. [here](https://www.thedigitalcatonline.com/blog/2018/04/25/rsa-keys/#:~:text=The%20OpenSSH%20public%20key%20format) for a format description).","body":"The public key conversion is analogous to the private key conversion in the linked post, but using <code>PublicKeyFactory.createKey()</code> and <code>OpenSSHPublicKeyUtil.encodePublicKey()</code>. The PEM conversion is to be omitted. Instead, a Base64 encoding is sufficient, which gives the central part of the key (<code>AAAAC3...</code>) following <code>ssh-ed25519</code> (see e.g. <a href=\"https://www.thedigitalcatonline.com/blog/2018/04/25/rsa-keys/#:~:text=The%20OpenSSH%20public%20key%20format\" rel=\"nofollow noreferrer\">here</a> for a format description)."}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693524373,"creation_date":1693524373,"answer_id":77019767,"question_id":77018840,"body_markdown":"First, that isn&#39;t Java, although it is some language that compiles to run in the JVM and access Java libraries -- I&#39;m guessing Scala or Kotlin, although I&#39;m not familiar enough with either to say which. Second, you can&#39;t be using _only_ bcpkix, because the classes you use aren&#39;t there; they are in bcprov (or bcprov-ext).\r\n\r\nYour problem is the &#39;blob&#39; in **OpenSSH publickey format uses the SSH protocol&#39;s encoding** for the relevant keytype, which for ed25519 adds prefix lengths and a (redundant) copy of the keytype string. This can be done by hand, but since you&#39;re already using Bouncy it can do most of it for you:\r\n```Java\r\n// I only know Java, translate back to your language as needed\r\n// invoke keyPairGenerator as you have, with result AsymmetricCipherKeyPair keyPair\r\nbyte[] wire = OpenSSHPublicKeyUtils.encodePublicKey(keyPair.getPublic());\r\nString line = &quot;ssh-ed25519 &quot; + Base64.getEncoder().encodeToString(wire) + &quot; comment_field&quot;;\r\n// write that to a file, or display it, or whatever you need\r\n```\r\nFor OpenSSH the third component doesn&#39;t have to be an email address, it can be any information you want to associate with the key. I don&#39;t know if GitHub is stricter here, but as you have a working value you might as well keep it.","title":"Generate Ed25519 keys in Java","body":"<p>First, that isn't Java, although it is some language that compiles to run in the JVM and access Java libraries -- I'm guessing Scala or Kotlin, although I'm not familiar enough with either to say which. Second, you can't be using <em>only</em> bcpkix, because the classes you use aren't there; they are in bcprov (or bcprov-ext).</p>\n<p>Your problem is the 'blob' in <strong>OpenSSH publickey format uses the SSH protocol's encoding</strong> for the relevant keytype, which for ed25519 adds prefix lengths and a (redundant) copy of the keytype string. This can be done by hand, but since you're already using Bouncy it can do most of it for you:</p>\n<pre><code>// I only know Java, translate back to your language as needed\n// invoke keyPairGenerator as you have, with result AsymmetricCipherKeyPair keyPair\nbyte[] wire = OpenSSHPublicKeyUtils.encodePublicKey(keyPair.getPublic());\nString line = &quot;ssh-ed25519 &quot; + Base64.getEncoder().encodeToString(wire) + &quot; comment_field&quot;;\n// write that to a file, or display it, or whatever you need\n</code></pre>\n<p>For OpenSSH the third component doesn't have to be an email address, it can be any information you want to associate with the key. I don't know if GitHub is stricter here, but as you have a working value you might as well keep it.</p>\n"}],"owner":{"account_id":26942366,"reputation":171,"user_id":20512942,"display_name":"wiiznokes3"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693560734,"creation_date":1693511055,"question_id":77018840,"body_markdown":"I&#39;m trying to generate keys of type Ed25519 on Android. Right now i use the library `org.bouncycastle:bcpkix-jdk15on`.\r\n\r\nThis is my code:\r\n```\r\nval keyPairGenerator = Ed25519KeyPairGenerator()\r\nkeyPairGenerator.init(Ed25519KeyGenerationParameters(SecureRandom()))\r\n\r\nval keyPair = keyPairGenerator.generateKeyPair()\r\n\r\nval privateKey = (keyPair.private as Ed25519PrivateKeyParameters).encoded\r\nval publicKey = (keyPair.public as Ed25519PublicKeyParameters).encoded\r\n\r\nval privateKeyBase64 = Base64.toBase64String(privateKey)\r\nval publicKeyBase64 = Base64.toBase64String(publicKey)\r\nLog.d(TAG, publicKeyBase64)\r\n```\r\n\r\nThis print this public key (one example):\r\n`JU+YTj99pb35tX+pLZAZAzdpwVp7GMGPkX0TcmsC7iQ=`\r\n\r\nThis is an example of a public key I generated with the command line tool `ssh-keygen`:\r\n\r\n`\r\nssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKuDxTrKvkL3HbXrFuU796bmi9+KbKLTzT0QLumiJFmk example@gmail.com\r\n`\r\n\r\nYou can see the payload has not the same size.\r\n\r\nThen, when i try to use it on Github, the one generated by `ssh-keygen` works, but the other one don&#39;t. Even if i add `ssh-ed25519` and the email.\r\n\r\nThis is the error message i get:\r\n`Key is invalid. You must supply a key in OpenSSH public key format`.\r\n\r\nSo how can i generate a key in the right format with Java?","title":"Generate Ed25519 keys in Java","body":"<p>I'm trying to generate keys of type Ed25519 on Android. Right now i use the library <code>org.bouncycastle:bcpkix-jdk15on</code>.</p>\n<p>This is my code:</p>\n<pre><code>val keyPairGenerator = Ed25519KeyPairGenerator()\nkeyPairGenerator.init(Ed25519KeyGenerationParameters(SecureRandom()))\n\nval keyPair = keyPairGenerator.generateKeyPair()\n\nval privateKey = (keyPair.private as Ed25519PrivateKeyParameters).encoded\nval publicKey = (keyPair.public as Ed25519PublicKeyParameters).encoded\n\nval privateKeyBase64 = Base64.toBase64String(privateKey)\nval publicKeyBase64 = Base64.toBase64String(publicKey)\nLog.d(TAG, publicKeyBase64)\n</code></pre>\n<p>This print this public key (one example):\n<code>JU+YTj99pb35tX+pLZAZAzdpwVp7GMGPkX0TcmsC7iQ=</code></p>\n<p>This is an example of a public key I generated with the command line tool <code>ssh-keygen</code>:</p>\n<p><code>ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKuDxTrKvkL3HbXrFuU796bmi9+KbKLTzT0QLumiJFmk example@gmail.com</code></p>\n<p>You can see the payload has not the same size.</p>\n<p>Then, when i try to use it on Github, the one generated by <code>ssh-keygen</code> works, but the other one don't. Even if i add <code>ssh-ed25519</code> and the email.</p>\n<p>This is the error message i get:\n<code>Key is invalid. You must supply a key in OpenSSH public key format</code>.</p>\n<p>So how can i generate a key in the right format with Java?</p>\n"},{"tags":["java","micronaut","micronaut-client"],"answers":[{"tags":[],"owner":{"account_id":468677,"reputation":7486,"user_id":874814,"display_name":"Babl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693559746,"creation_date":1620650963,"answer_id":67470729,"question_id":67470130,"body_markdown":"Seems you are using the _Binding from Multiple Query values_ functionality which under the hood is just creating the map of the query parameters you passed in and uses the Jackson to convert the map into your own POJO. So it does not rely on the system converters but only on the Jackson itself.\r\n\r\nWhat you can do is just use Jacksons `@JsonCreator` annotation to customize the conversation.\r\n\r\nSomething like this should work.\r\n\r\n    public enum TransactionType {\r\n        A (&quot;A&quot;),\r\n        B (&quot;B&quot;);\r\n\r\n        private final String transactionType;\r\n\r\n        TransactionType(String transactionType){\r\n            this.transactionType = transactionType;\r\n        }\r\n\r\n        public String getTransactionType() {\r\n            return transactionType;\r\n        }\r\n\r\n        @JsonCreator\r\n        public static TransactionType forValue(Collection&lt;String&gt; values) {           \r\n            if(values == null || values.isEmpty()){\r\n                return null;\r\n            }\r\n            String value = values.get(0);\r\n            return Arrays.stream(TransactionType.values())\r\n                .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\r\n                .findFirst().orElse(null);\r\n        }\r\n    }\r\n","title":"Micronaut fails to load and use my TypeConverter implementation","body":"<p>Seems you are using the <em>Binding from Multiple Query values</em> functionality which under the hood is just creating the map of the query parameters you passed in and uses the Jackson to convert the map into your own POJO. So it does not rely on the system converters but only on the Jackson itself.</p>\n<p>What you can do is just use Jacksons <code>@JsonCreator</code> annotation to customize the conversation.</p>\n<p>Something like this should work.</p>\n<pre><code>public enum TransactionType {\n    A (&quot;A&quot;),\n    B (&quot;B&quot;);\n\n    private final String transactionType;\n\n    TransactionType(String transactionType){\n        this.transactionType = transactionType;\n    }\n\n    public String getTransactionType() {\n        return transactionType;\n    }\n\n    @JsonCreator\n    public static TransactionType forValue(Collection&lt;String&gt; values) {           \n        if(values == null || values.isEmpty()){\n            return null;\n        }\n        String value = values.get(0);\n        return Arrays.stream(TransactionType.values())\n            .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\n            .findFirst().orElse(null);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13846532,"reputation":319,"user_id":9995556,"display_name":"pbthorste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693558859,"creation_date":1693558859,"answer_id":77021805,"question_id":67470130,"body_markdown":"An alternative way to do this, if you cannot change the sourcecode of the class you need to load, would be to create a Jackson module. By default micronaut will scan and load modules into jackson if they are defined as beans. Example:\r\n\r\n```java\r\nimport com.fasterxml.jackson.core.JacksonException;\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport jakarta.inject.Singleton;\r\n\r\nimport java.io.IOException;\r\n\r\n@Singleton\r\npublic class TransactionTypeDeserializer extends StdDeserializer&lt;TransactionType&gt; {\r\n\r\n    public TransactionTypeDeserializer() {\r\n        this(null);\r\n    }\r\n\r\n    public TransactionTypeDeserializer(Class&lt;?&gt; vc) {\r\n        super(vc);\r\n    }\r\n\r\n    @Override\r\n    public TransactionType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JacksonException {\r\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n        // Do conversion\r\n        return result;\r\n    }\r\n}\r\n\r\n```","title":"Micronaut fails to load and use my TypeConverter implementation","body":"<p>An alternative way to do this, if you cannot change the sourcecode of the class you need to load, would be to create a Jackson module. By default micronaut will scan and load modules into jackson if they are defined as beans. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JacksonException;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport jakarta.inject.Singleton;\n\nimport java.io.IOException;\n\n@Singleton\npublic class TransactionTypeDeserializer extends StdDeserializer&lt;TransactionType&gt; {\n\n    public TransactionTypeDeserializer() {\n        this(null);\n    }\n\n    public TransactionTypeDeserializer(Class&lt;?&gt; vc) {\n        super(vc);\n    }\n\n    @Override\n    public TransactionType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JacksonException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        // Do conversion\n        return result;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":82452,"reputation":15242,"user_id":231821,"accept_rate":92,"display_name":"Jim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":819,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67470729,"answer_count":2,"score":0,"last_activity_date":1693559746,"creation_date":1620648372,"question_id":67470130,"body_markdown":"I have a controller method, that takes in a POJO.\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    \r\n    public class Dto {    \r\n        private LocalDate endDate;\r\n        private String token;\r\n        private TransactionType type;   \r\n    }\r\n\r\nTransaction type is a simple `enum`, but I want to use a custom conversion from the inbound value to the transaction type.\r\n\r\n    @Slf4j\r\n    @Controller(&quot;/api/transactions&quot;)\r\n    public class IssuerTransactionController {\r\n        @Get(value = &quot;/{?tr*}&quot;, produces = APPLICATION_JSON)\r\n        public List&lt;String&gt; get(Dto tr) {\r\n            return new ArrayList&lt;&gt;();\r\n        }\r\n    }\r\n\r\nI have written a converter:\r\n\r\n    @Slf4j\r\n    @Singleton\r\n    public class TransactionTypeConverter implements TypeConverter&lt;String, TransactionType&gt; {\r\n        @Override\r\n        public Optional&lt;TransactionType&gt; convert(String value, Class&lt;TransactionType&gt; targetType, ConversionContext context) {\r\n            return Arrays.stream(TransactionType.values())\r\n                    .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\r\n                    .findFirst();\r\n        }\r\n    }\r\n\r\nMicronaut is not using the type converter to transform the inbound value?  \r\nIs some special registration process needed in order for Micronaut to know that it should be using the converter?\r\n\r\nIf I add a constructor to `TransactionTypeConverter` I can see that the class is never actually created by Micronaut at all.\r\n\r\nIf I add it as a regular dependency to the controller, it&#39;s loaded (no surprise there), but still not used. Is there a step I am missing?","title":"Micronaut fails to load and use my TypeConverter implementation","body":"<p>I have a controller method, that takes in a POJO.</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n\npublic class Dto {    \n    private LocalDate endDate;\n    private String token;\n    private TransactionType type;   \n}\n</code></pre>\n<p>Transaction type is a simple <code>enum</code>, but I want to use a custom conversion from the inbound value to the transaction type.</p>\n<pre><code>@Slf4j\n@Controller(&quot;/api/transactions&quot;)\npublic class IssuerTransactionController {\n    @Get(value = &quot;/{?tr*}&quot;, produces = APPLICATION_JSON)\n    public List&lt;String&gt; get(Dto tr) {\n        return new ArrayList&lt;&gt;();\n    }\n}\n</code></pre>\n<p>I have written a converter:</p>\n<pre><code>@Slf4j\n@Singleton\npublic class TransactionTypeConverter implements TypeConverter&lt;String, TransactionType&gt; {\n    @Override\n    public Optional&lt;TransactionType&gt; convert(String value, Class&lt;TransactionType&gt; targetType, ConversionContext context) {\n        return Arrays.stream(TransactionType.values())\n                .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\n                .findFirst();\n    }\n}\n</code></pre>\n<p>Micronaut is not using the type converter to transform the inbound value?<br />\nIs some special registration process needed in order for Micronaut to know that it should be using the converter?</p>\n<p>If I add a constructor to <code>TransactionTypeConverter</code> I can see that the class is never actually created by Micronaut at all.</p>\n<p>If I add it as a regular dependency to the controller, it's loaded (no surprise there), but still not used. Is there a step I am missing?</p>\n"},{"tags":["python","java","information-retrieval"],"owner":{"account_id":16241689,"reputation":25,"user_id":15557400,"display_name":"TheTenthBox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693559456,"creation_date":1693559456,"question_id":77021871,"body_markdown":"I am trying to use PyTerrier to conduct information retrieval experiments.There are several weighting models implemented in the original Java code and in the original Terrier documentation - http://terrier.org/docs/current/javadoc/org/terrier/matching/models/package-summary.html\r\n\r\nHowever, I am unable to tune and assign parameter values for models mentioned in the Java documentation but not in the PyTerrier docs:\r\n\r\n\r\n```\r\ndfr = pt.BatchRetrieve(index, wmodel=&quot;DFR_BM25&quot;, controls={&quot;c.0&quot;:10, &quot;c.1&quot;:0},metadata=[&quot;docno&quot;,&#39;text&#39;], num_results=100)\r\n```\r\n\r\nFor example, here I am unable to set the control properties/parameters for the DFR_BM25 model. The results of this retrieval does not change with changing values of &#39;c.0&#39; or &#39;c.1&#39;. The documentation does not state what each model&#39;s parameters are, except for the standard ones like BM25.","title":"PyTerrier - Assigning parameter values to non-standard models","body":"<p>I am trying to use PyTerrier to conduct information retrieval experiments.There are several weighting models implemented in the original Java code and in the original Terrier documentation - <a href=\"http://terrier.org/docs/current/javadoc/org/terrier/matching/models/package-summary.html\" rel=\"nofollow noreferrer\">http://terrier.org/docs/current/javadoc/org/terrier/matching/models/package-summary.html</a></p>\n<p>However, I am unable to tune and assign parameter values for models mentioned in the Java documentation but not in the PyTerrier docs:</p>\n<pre><code>dfr = pt.BatchRetrieve(index, wmodel=&quot;DFR_BM25&quot;, controls={&quot;c.0&quot;:10, &quot;c.1&quot;:0},metadata=[&quot;docno&quot;,'text'], num_results=100)\n</code></pre>\n<p>For example, here I am unable to set the control properties/parameters for the DFR_BM25 model. The results of this retrieval does not change with changing values of 'c.0' or 'c.1'. The documentation does not state what each model's parameters are, except for the standard ones like BM25.</p>\n"},{"tags":["java","junit","mockito","parameter-passing","junit5"],"answers":[{"tags":[],"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693559075,"creation_date":1693558022,"answer_id":77021710,"question_id":77021328,"body_markdown":"you are using myRepository.findComponentByKey_1()\r\n\r\nto build your arguments stream but your repository is not initialized at this point.\r\n\r\nFirst your TestParameter class will be initalized to be passed into a function. It will happen before @Mock annotation will work to mock an instance of your repository\r\n\r\nThen your repository will be initialized by @Mock\r\n\r\nThen your @BeforeEach function will fire\r\n\r\nAnd lastly your test function will be called\r\n\r\nI hope that clears things for you.\r\n\r\n\r\nEdit:\r\n\r\nYou could add another function with annotation @BeforeAll it needs to be static then inside that you need to manually mock your repository\r\nand it should work since @BeforeAll function will fire before generating argument source\r\n\r\n    myRepository = mock(MyRepository.class);","title":"NullPointerException Parameterized Test passing input using Mockitos","body":"<p>you are using myRepository.findComponentByKey_1()</p>\n<p>to build your arguments stream but your repository is not initialized at this point.</p>\n<p>First your TestParameter class will be initalized to be passed into a function. It will happen before @Mock annotation will work to mock an instance of your repository</p>\n<p>Then your repository will be initialized by @Mock</p>\n<p>Then your @BeforeEach function will fire</p>\n<p>And lastly your test function will be called</p>\n<p>I hope that clears things for you.</p>\n<p>Edit:</p>\n<p>You could add another function with annotation @BeforeAll it needs to be static then inside that you need to manually mock your repository\nand it should work since @BeforeAll function will fire before generating argument source</p>\n<pre><code>myRepository = mock(MyRepository.class);\n</code></pre>\n"}],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77021710,"answer_count":1,"score":0,"last_activity_date":1693559075,"creation_date":1693554211,"question_id":77021328,"body_markdown":"```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class MyServiceTest\r\n{\r\n   @Mock\r\n   private static MyRepository myRepository;\r\n   private MyService myService;\r\n\r\n   @BeforeEach\r\n   void setUp()\r\n   {\r\n      myService = new MyService(myRepository);\r\n   }\r\n\r\n@ParameterizedTest\r\n   @ArgumentsSource(TestParameter.class)\r\n   void findAllTest(Map&lt;String, String&gt; allParamaters, List&lt;Element&gt; methodCall) throws JsonProcessingException\r\n   {\r\n\r\n      Element element = Element.builder().identification(&quot;id&quot;).build();\r\n\r\n      when(methodCall).thenReturn(List.of(element));\r\n\r\n      var expectedResponse = myService.excute(allParamaters);\r\n\r\n      //assert....;\r\n   }\r\n\r\n   private static class TestParameter implements ArgumentsProvider\r\n   {\r\n      @Override\r\n      public Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context)\r\n      {\r\n         return Stream.of(\r\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_1(....)),\r\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_2(....)),\r\n         );\r\n      }\r\n   }\r\n```\r\n\r\ni get a NullPointerException of `myRepository` in `provideArguments(ExtensionContext context)`. ","title":"NullPointerException Parameterized Test passing input using Mockitos","body":"<pre><code>@ExtendWith(MockitoExtension.class)\npublic class MyServiceTest\n{\n   @Mock\n   private static MyRepository myRepository;\n   private MyService myService;\n\n   @BeforeEach\n   void setUp()\n   {\n      myService = new MyService(myRepository);\n   }\n\n@ParameterizedTest\n   @ArgumentsSource(TestParameter.class)\n   void findAllTest(Map&lt;String, String&gt; allParamaters, List&lt;Element&gt; methodCall) throws JsonProcessingException\n   {\n\n      Element element = Element.builder().identification(&quot;id&quot;).build();\n\n      when(methodCall).thenReturn(List.of(element));\n\n      var expectedResponse = myService.excute(allParamaters);\n\n      //assert....;\n   }\n\n   private static class TestParameter implements ArgumentsProvider\n   {\n      @Override\n      public Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context)\n      {\n         return Stream.of(\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_1(....)),\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_2(....)),\n         );\n      }\n   }\n</code></pre>\n<p>i get a NullPointerException of <code>myRepository</code> in <code>provideArguments(ExtensionContext context)</code>.</p>\n"},{"tags":["java","arrays","arraylist","clone","deep-copy"],"comments":[{"owner":{"account_id":8915282,"reputation":4892,"user_id":6654077,"display_name":"Fabien"},"score":0,"creation_date":1502225847,"post_id":45577876,"comment_id":78115255,"body_markdown":"Honestly, this does not look ugly! You&#39;re a prefectionistah ;-)","body":"Honestly, this does not look ugly! You&#39;re a prefectionistah ;-)"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1502226205,"post_id":45577876,"comment_id":78115412,"body_markdown":"do you have java-8?","body":"do you have java-8?"},{"owner":{"account_id":1491409,"reputation":6134,"user_id":1398418,"display_name":"Oleg"},"score":0,"creation_date":1502226431,"post_id":45577876,"comment_id":78115500,"body_markdown":"`.getPlayers().addAll(teams[i].getPlayers())` can save you nested `for`","body":"<code>.getPlayers().addAll(teams[i].getPlayers())</code> can save you nested <code>for</code>"}],"answers":[{"tags":[],"owner":{"account_id":322516,"reputation":121953,"user_id":641955,"accept_rate":72,"display_name":"janos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1502226621,"creation_date":1502226456,"answer_id":45578041,"question_id":45577876,"body_markdown":"Your current solution is equivalent to this simpler form:\r\n\r\n    private Team[] deepClone(Team[] teams) {\r\n        Team[] new_teams = new Team[teams.length];\r\n        for (int i = 0; i &lt; teams.length; i++) {\r\n            new_teams[i] = new Team();\r\n            new_teams[i].getPlayers().addAll(teams[i].getPlayers());\r\n        }\r\n        return new_teams;\r\n    }\r\n\r\nYou can make this more elegant without the loop indexes using streams and lambdas:\r\n\r\n    private Team[] deepClone(Team[] teams) {\r\n        return Stream.of(teams).map(team -&gt; {\r\n            Team newTeam = new Team();\r\n            return newTeam.getPlayers().addAll(team.getPlayers());\r\n        }).toArray(Team[]::new);\r\n    }\r\n\r\n","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>Your current solution is equivalent to this simpler form:</p>\n\n<pre><code>private Team[] deepClone(Team[] teams) {\n    Team[] new_teams = new Team[teams.length];\n    for (int i = 0; i &lt; teams.length; i++) {\n        new_teams[i] = new Team();\n        new_teams[i].getPlayers().addAll(teams[i].getPlayers());\n    }\n    return new_teams;\n}\n</code></pre>\n\n<p>You can make this more elegant without the loop indexes using streams and lambdas:</p>\n\n<pre><code>private Team[] deepClone(Team[] teams) {\n    return Stream.of(teams).map(team -&gt; {\n        Team newTeam = new Team();\n        return newTeam.getPlayers().addAll(team.getPlayers());\n    }).toArray(Team[]::new);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3412987,"reputation":415,"user_id":2862544,"display_name":"user2862544"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502243594,"creation_date":1502243594,"answer_id":45580493,"question_id":45577876,"body_markdown":"ideally you should clone Players also if you wanna do perfect deep cloning , we should always write clone method in each class and just call that clone method to get clone, anyways you can go in below way .  \r\n\r\n    class Team {\r\n            //fields contain:\r\n            ArrayList&lt;Player&gt; players;\r\n            public Team clone() {\r\n               Team team = new Team();\r\n               team.players.addAll(players);\r\n               return team;\r\n            }\r\n        }\r\n    \r\n    // ...\r\n    \r\n        Team[] deepCloneTeams(Team[] teams) {\r\n            Team[] newTeams = new Team[teams.length];\r\n            for (int i = 0; i &lt; teams.length; i++)\r\n                newTeams[i] = teams[i].clone();\r\n            return newTeams;\r\n        }","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>ideally you should clone Players also if you wanna do perfect deep cloning , we should always write clone method in each class and just call that clone method to get clone, anyways you can go in below way .  </p>\n\n<pre><code>class Team {\n        //fields contain:\n        ArrayList&lt;Player&gt; players;\n        public Team clone() {\n           Team team = new Team();\n           team.players.addAll(players);\n           return team;\n        }\n    }\n\n// ...\n\n    Team[] deepCloneTeams(Team[] teams) {\n        Team[] newTeams = new Team[teams.length];\n        for (int i = 0; i &lt; teams.length; i++)\n            newTeams[i] = teams[i].clone();\n        return newTeams;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1882784,"reputation":21,"user_id":1702587,"display_name":"ferrema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693558824,"creation_date":1693558227,"answer_id":77021747,"question_id":45577876,"body_markdown":"you&#39;re not technically cloning players, you&#39;re using the same reference of players. \r\nYou should have some method that instances a new player and copies the (immutable) values of player and clones the mutable object attributes of player if you want to actually (deep) clone them.\r\n\r\nSomething along the lines of:\r\n\r\n\r\n    class Player{\r\n        // your attributes and methods\r\n        Player getClone(){\r\n            Player p = new Player();\r\n            // set all immutable attributes and clone all mutable attribute objects\r\n            return p;\r\n        }\r\n    }\r\n    \r\n    class Team {\r\n        //fields contain:\r\n        ArrayList&lt;Player&gt; players;\r\n        public Team clone() {\r\n            Team team = new Team();\r\n            team.players.addAll(players.stream().forEach(p-&gt;p.getClone()).collect(Collectors.toList());\r\n            return team;\r\n        }\r\n    }\r\n\r\nThere&#39;s a nice example here https://howtodoinjava.com/java/collections/arraylist/arraylist-clone-deep-copy/","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>you're not technically cloning players, you're using the same reference of players.\nYou should have some method that instances a new player and copies the (immutable) values of player and clones the mutable object attributes of player if you want to actually (deep) clone them.</p>\n<p>Something along the lines of:</p>\n<pre><code>class Player{\n    // your attributes and methods\n    Player getClone(){\n        Player p = new Player();\n        // set all immutable attributes and clone all mutable attribute objects\n        return p;\n    }\n}\n\nclass Team {\n    //fields contain:\n    ArrayList&lt;Player&gt; players;\n    public Team clone() {\n        Team team = new Team();\n        team.players.addAll(players.stream().forEach(p-&gt;p.getClone()).collect(Collectors.toList());\n        return team;\n    }\n}\n</code></pre>\n<p>There's a nice example here <a href=\"https://howtodoinjava.com/java/collections/arraylist/arraylist-clone-deep-copy/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/java/collections/arraylist/arraylist-clone-deep-copy/</a></p>\n"}],"owner":{"account_id":10793876,"reputation":1326,"user_id":8315934,"display_name":"Tobi208"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45578041,"answer_count":3,"score":1,"last_activity_date":1693558824,"creation_date":1502225726,"question_id":45577876,"body_markdown":"deepest element:\r\n\r\n    class Player {\r\n        //fields contain:\r\n        int value;\r\n    }\r\n\r\ncollected in:\r\n\r\n    class Team {\r\n        //fields contain:\r\n        ArrayList&lt;Player&gt; players;\r\n    }\r\n\r\ncollected in:\r\n\r\n    class Splitter {\r\n        //fields contain:\r\n        Teams[] teams;\r\n    }\r\n\r\nIn a function in `Splitter` I have to clone `teams`. I basically have to clone the array `teams` by cloning each `Team` object, which each contains an ArrayList `players` I have to clone. I *do not* want to clone the Player objects themselves.\r\n\r\nMy solution thus far looks something like this:\r\n\r\n    private Team[] deepClone(Team[] teams) {\r\n        Team[] new_teams = new Team[teams.length];\r\n        for (int i = 0; i &lt; teams.length; i++) {\r\n            new_teams[i] = new Team();\r\n            for (Player player : teams[i].getPlayers())\r\n                new_teams[i].getPlayers().add(player);\r\n        }\r\n        return new_teams;\r\n    }\r\n\r\nanything I could change to make this more efficient or elegant?","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>deepest element:</p>\n\n<pre><code>class Player {\n    //fields contain:\n    int value;\n}\n</code></pre>\n\n<p>collected in:</p>\n\n<pre><code>class Team {\n    //fields contain:\n    ArrayList&lt;Player&gt; players;\n}\n</code></pre>\n\n<p>collected in:</p>\n\n<pre><code>class Splitter {\n    //fields contain:\n    Teams[] teams;\n}\n</code></pre>\n\n<p>In a function in <code>Splitter</code> I have to clone <code>teams</code>. I basically have to clone the array <code>teams</code> by cloning each <code>Team</code> object, which each contains an ArrayList <code>players</code> I have to clone. I <em>do not</em> want to clone the Player objects themselves.</p>\n\n<p>My solution thus far looks something like this:</p>\n\n<pre><code>private Team[] deepClone(Team[] teams) {\n    Team[] new_teams = new Team[teams.length];\n    for (int i = 0; i &lt; teams.length; i++) {\n        new_teams[i] = new Team();\n        for (Player player : teams[i].getPlayers())\n            new_teams[i].getPlayers().add(player);\n    }\n    return new_teams;\n}\n</code></pre>\n\n<p>anything I could change to make this more efficient or elegant?</p>\n"},{"tags":["java","jenkins","jelly"],"owner":{"account_id":7713782,"reputation":321,"user_id":5842254,"accept_rate":75,"display_name":"epR8GaYuh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693558446,"creation_date":1693414195,"question_id":77010035,"body_markdown":"I am trying to test Jelly templates of a Jenkins plugin for their HTML rendering without having to rely on using some interactive session or similar.\r\n\r\nThis is my current code:\r\n\r\n```java\r\nimport java.io.OutputStream;\r\nimport java.io.ByteArrayOutputStream;\r\n\r\nimport org.apache.commons.jelly.Script;\r\nimport org.apache.commons.jelly.XMLOutput;\r\nimport org.apache.commons.jelly.test.BaseJellyTest;\r\n\r\nimport org.junit.Test;\r\nimport static org.hamcrest.MatcherAssert.assertThat;\r\nimport static org.hamcrest.CoreMatchers.containsString;\r\n\r\npublic class JellyTest extends BaseJellyTest {\r\n\r\n    public JellyTest() {\r\n        super(&quot;dummy&quot;);\r\n    }\r\n\r\n    public int getKey() {\r\n        return 42;\r\n    }\r\n\r\n    public String getDescription(Object job) {\r\n        return &quot;abc&quot;;\r\n    }\r\n\r\n    @Test\r\n    public void testRendering() throws Exception {\r\n        setUpScript(&quot;/testing.jelly&quot;);\r\n        Script script = getJelly().compileScript();\r\n        getJellyContext().setVariable(&quot;it&quot;, this);\r\n\r\n        OutputStream outputStream = new ByteArrayOutputStream();\r\n        XMLOutput output = XMLOutput.createXMLOutput(outputStream);\r\n        script.run(getJellyContext(), output);\r\n        output.flush();\r\n        String result = outputStream.toString();\r\n\r\n        assertThat(result, containsString(&quot;42&quot;));\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe corresponding `testing.jelly` looks something like this:\r\n\r\n```xml\r\n&lt;?jelly escape-by-default=&#39;true?&gt;\r\n&lt;j:jelly xmlns:j=&quot;jelly:core&quot; xmlns:l=&quot;/lib/layout&quot;&gt;\r\n    &lt;j:set var=&quot;key&quot; value=&quot;${it.getKey()}&quot;/&gt;\r\n    &lt;j:set var=&quot;description&quot; value=&quot;${it.getDescription(job)}&quot;/&gt;\r\n    &lt;p&gt;${key}&lt;/p&gt;\r\n    &lt;j:if test=&quot;${description}&quot;&gt;\r\n        &lt;j:out value=&quot;${description}&quot;/&gt;\r\n    &lt;/j:if&gt;\r\n    &lt;p&gt;${%translationKey}&lt;/p&gt;\r\n&lt;/j:jelly&gt;\r\n```\r\n\r\nThe test will not succeed and fail with\r\n\r\n&gt; org.apache.commons.jelly.JellyException: could not parse Jelly script\r\n\r\ndue to using the Jenkins-specific `${#` syntax for translations. If I remove this section, the error goes away, but this does not allow for Jenkins-specific functionality inside the templates at all.\r\n\r\nExpected result:\r\n\r\n```xml\r\n&lt;p&gt;42&lt;/p&gt;\r\n&lt;p&gt;abc&lt;/p&gt;\r\n```\r\n\r\nWhat is the correct approach to write such tests? How to inject a custom `Job` instance to the template?","title":"Testing Jenkins Jelly template HTML output","body":"<p>I am trying to test Jelly templates of a Jenkins plugin for their HTML rendering without having to rely on using some interactive session or similar.</p>\n<p>This is my current code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.OutputStream;\nimport java.io.ByteArrayOutputStream;\n\nimport org.apache.commons.jelly.Script;\nimport org.apache.commons.jelly.XMLOutput;\nimport org.apache.commons.jelly.test.BaseJellyTest;\n\nimport org.junit.Test;\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.CoreMatchers.containsString;\n\npublic class JellyTest extends BaseJellyTest {\n\n    public JellyTest() {\n        super(&quot;dummy&quot;);\n    }\n\n    public int getKey() {\n        return 42;\n    }\n\n    public String getDescription(Object job) {\n        return &quot;abc&quot;;\n    }\n\n    @Test\n    public void testRendering() throws Exception {\n        setUpScript(&quot;/testing.jelly&quot;);\n        Script script = getJelly().compileScript();\n        getJellyContext().setVariable(&quot;it&quot;, this);\n\n        OutputStream outputStream = new ByteArrayOutputStream();\n        XMLOutput output = XMLOutput.createXMLOutput(outputStream);\n        script.run(getJellyContext(), output);\n        output.flush();\n        String result = outputStream.toString();\n\n        assertThat(result, containsString(&quot;42&quot;));\n    }\n\n}\n</code></pre>\n<p>The corresponding <code>testing.jelly</code> looks something like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?jelly escape-by-default='true?&gt;\n&lt;j:jelly xmlns:j=&quot;jelly:core&quot; xmlns:l=&quot;/lib/layout&quot;&gt;\n    &lt;j:set var=&quot;key&quot; value=&quot;${it.getKey()}&quot;/&gt;\n    &lt;j:set var=&quot;description&quot; value=&quot;${it.getDescription(job)}&quot;/&gt;\n    &lt;p&gt;${key}&lt;/p&gt;\n    &lt;j:if test=&quot;${description}&quot;&gt;\n        &lt;j:out value=&quot;${description}&quot;/&gt;\n    &lt;/j:if&gt;\n    &lt;p&gt;${%translationKey}&lt;/p&gt;\n&lt;/j:jelly&gt;\n</code></pre>\n<p>The test will not succeed and fail with</p>\n<blockquote>\n<p>org.apache.commons.jelly.JellyException: could not parse Jelly script</p>\n</blockquote>\n<p>due to using the Jenkins-specific <code>${#</code> syntax for translations. If I remove this section, the error goes away, but this does not allow for Jenkins-specific functionality inside the templates at all.</p>\n<p>Expected result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;p&gt;42&lt;/p&gt;\n&lt;p&gt;abc&lt;/p&gt;\n</code></pre>\n<p>What is the correct approach to write such tests? How to inject a custom <code>Job</code> instance to the template?</p>\n"},{"tags":["java","android","progressdialog"],"comments":[{"owner":{"account_id":6017569,"reputation":3366,"user_id":8007341,"display_name":"Kishan Maurya"},"score":0,"creation_date":1693561968,"post_id":77021766,"comment_id":135780647,"body_markdown":"Actually in updateDialog(), you are setting value for textView which is actually null. No view is initialised yet.  After initialising your ProgressDialog class , you are immediately calling  updateDialog.  ProgressDialog has its own lifecycle. After onCreateDialog, try to set value.","body":"Actually in updateDialog(), you are setting value for textView which is actually null. No view is initialised yet.  After initialising your ProgressDialog class , you are immediately calling  updateDialog.  ProgressDialog has its own lifecycle. After onCreateDialog, try to set value."},{"owner":{"account_id":6017569,"reputation":3366,"user_id":8007341,"display_name":"Kishan Maurya"},"score":0,"creation_date":1693562103,"post_id":77021766,"comment_id":135780672,"body_markdown":"Once dialog is created, then set value.  So store passed value and set after view init.\n\nupdateDialog(String title, @Nullable String message) {\n        this.title = title;\n        this.message = message;\n  }","body":"Once dialog is created, then set value.  So store passed value and set after view init.  updateDialog(String title, @Nullable String message) {         this.title = title;         this.message = message;   }"}],"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693558388,"creation_date":1693558388,"question_id":77021766,"body_markdown":"I am trying to create a customized version of the ProgressDialog as it does not meet my current layout requirements.\r\n\r\nI would like to render a vertically stacked ProgressDialog with the title centered on top of a centered spinner and the centered spinner on top of a message that typically receives updates on percentage of completion in a string format.\r\n\r\nWhile trying to update the ProgressDialog&#39;s title and message, I am returned NullPointerException for the components.\r\n\r\nHow do I attempt to update the title and message of the progress dialog periodically ?\r\n\r\nMy code for the `ProgressDialog.java` class:\r\n\r\n    public class ProgressDialog extends AppCompatDialogFragment {\r\n        public volatile TextView progressDialogMessage = null;\r\n        public volatile TextView progressDialogTitle = null;\r\n        private View view = null;\r\n        private volatile AlertDialog aldialogInst = null;\r\n        private String title = &quot;&quot;;\r\n        private String message = &quot;&quot;;\r\n    \r\n        public ProgressDialog() {\r\n        }\r\n    \r\n        public ProgressDialog(String title, String message) {\r\n            this.title = title;\r\n            this.message = message;\r\n        }\r\n    \r\n        @Override\r\n        public AlertDialog onCreateDialog(@Nullable Bundle savedInstanceState) {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.CustomAlertDialog);\r\n            LayoutInflater inflater = getActivity().getLayoutInflater();\r\n            view = inflater.inflate(R.layout.activity_progress_dialog, null);\r\n            progressDialogMessage = view.findViewById(R.id.progressDialogMessage);\r\n            progressDialogTitle = view.findViewById(R.id.progressDialogTitle);\r\n    \r\n            System.out.println(&quot;[INF] ProgressDialog :: onCreate :: started ...&quot;);\r\n    \r\n            if (progressDialogTitle == null) {\r\n                System.out.println(&quot;DIALOG TITLE IS NULL !!!&quot;);\r\n            }\r\n    \r\n            builder.setView(view).setTitle(null);\r\n    \r\n            progressDialogTitle.setText(this.title);\r\n            progressDialogMessage.setText(this.message);\r\n    \r\n            aldialogInst = builder.create();\r\n    \r\n            return aldialogInst;\r\n        }\r\n    \r\n        @Override\r\n        public void onAttach(Context context) {\r\n            super.onAttach(context);\r\n            System.out.println(&quot;[INF] ProgressDialog :: onAttach :: started ...&quot;);\r\n        }\r\n    \r\n        public void updateDialog(String title, @Nullable String message) {\r\n            progressDialogTitle.setText(title);\r\n            progressDialogMessage.setText(message);\r\n            progressDialogTitle.invalidate();\r\n            progressDialogMessage.invalidate();\r\n        }\r\n    \r\n        public boolean isReady() {\r\n            if (aldialogInst != null) {\r\n                return true;\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    \r\n        public AlertDialog getAlertDialog() {\r\n            return aldialogInst;\r\n        }\r\n    }\r\n\r\nThe XML for layout `activity_progress_dialog.xml`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/progressDialogTitle&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginTop=&quot;32dp&quot;\r\n            android:layout_marginEnd=&quot;16dp&quot;\r\n            android:fontFamily=&quot;@font/lexend_deca_bold&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textColor=&quot;@color/ventac_black&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/progressDialogMessage&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginTop=&quot;32dp&quot;\r\n            android:layout_marginEnd=&quot;16dp&quot;\r\n            android:fontFamily=&quot;@font/lexend_deca_light&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textColor=&quot;@color/ventac_gray_1&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogSpinner&quot; /&gt;\r\n    \r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progressDialogSpinner&quot;\r\n            style=&quot;?android:attr/progressBarStyleLarge&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;32dp&quot;\r\n            android:indeterminateDrawable=&quot;@drawable/spinner&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogTitle&quot; /&gt;\r\n    \r\n        &lt;Space\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;32dp&quot;\r\n            android:layout_marginStart=&quot;157dp&quot;\r\n            android:layout_marginEnd=&quot;218dp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogMessage&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nThe `MainActivity.java` class:\r\n\r\n    package com.xxx.yyy.ui;\r\n    \r\n    import androidx.activity.OnBackPressedCallback;\r\n    import androidx.annotation.RequiresApi;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.lifecycle.LiveData;\r\n    import androidx.work.Operation;\r\n    import androidx.work.PeriodicWorkRequest;\r\n    import androidx.work.WorkInfo;\r\n    import androidx.work.WorkManager;\r\n    \r\n    import android.app.ActivityManager;\r\n    import android.app.ApplicationExitInfo;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.graphics.drawable.Drawable;\r\n    import android.hardware.usb.UsbDevice;\r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.view.Gravity;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.security.Security;\r\n    import java.util.List;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private static Context myContext = null;\r\n    \r\n        @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);    \r\n            myContext = this;\r\n            System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG START =====&quot;);\r\n    \r\n            ProgressDialog dialog = new ProgressDialog(&quot;Downloading Provenance&quot;, &quot;0%&quot;);\r\n            dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;progdialog&quot;);\r\n            dialog.updateDialog(&quot;HELLO&quot;, &quot;100%&quot;);\r\n            System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG END =====&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n        }\r\n    \r\n        @Override\r\n        protected void onStop() {\r\n            super.onStop();\r\n        }\r\n    \r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n        }\r\n    }\r\n\r\nThe error message:\r\n\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.TextView.setText(java.lang.CharSequence)&#39; on a null object reference\r\n    at com.watchlink.keepertag.ui.ProgressDialog.updateDialog(ProgressDialog.java:69)\r\n    at com.watchlink.keepertag.ui.MainActivity.onCreate(MainActivity.java:45)\r\n    at android.app.Activity.performCreate(Activity.java:8591)\r\n    at android.app.Activity.performCreate(Activity.java:8570)\r\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1384)\r\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4150)","title":"Custom Progress Dialog not able to access components","body":"<p>I am trying to create a customized version of the ProgressDialog as it does not meet my current layout requirements.</p>\n<p>I would like to render a vertically stacked ProgressDialog with the title centered on top of a centered spinner and the centered spinner on top of a message that typically receives updates on percentage of completion in a string format.</p>\n<p>While trying to update the ProgressDialog's title and message, I am returned NullPointerException for the components.</p>\n<p>How do I attempt to update the title and message of the progress dialog periodically ?</p>\n<p>My code for the <code>ProgressDialog.java</code> class:</p>\n<pre><code>public class ProgressDialog extends AppCompatDialogFragment {\n    public volatile TextView progressDialogMessage = null;\n    public volatile TextView progressDialogTitle = null;\n    private View view = null;\n    private volatile AlertDialog aldialogInst = null;\n    private String title = &quot;&quot;;\n    private String message = &quot;&quot;;\n\n    public ProgressDialog() {\n    }\n\n    public ProgressDialog(String title, String message) {\n        this.title = title;\n        this.message = message;\n    }\n\n    @Override\n    public AlertDialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.CustomAlertDialog);\n        LayoutInflater inflater = getActivity().getLayoutInflater();\n        view = inflater.inflate(R.layout.activity_progress_dialog, null);\n        progressDialogMessage = view.findViewById(R.id.progressDialogMessage);\n        progressDialogTitle = view.findViewById(R.id.progressDialogTitle);\n\n        System.out.println(&quot;[INF] ProgressDialog :: onCreate :: started ...&quot;);\n\n        if (progressDialogTitle == null) {\n            System.out.println(&quot;DIALOG TITLE IS NULL !!!&quot;);\n        }\n\n        builder.setView(view).setTitle(null);\n\n        progressDialogTitle.setText(this.title);\n        progressDialogMessage.setText(this.message);\n\n        aldialogInst = builder.create();\n\n        return aldialogInst;\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        System.out.println(&quot;[INF] ProgressDialog :: onAttach :: started ...&quot;);\n    }\n\n    public void updateDialog(String title, @Nullable String message) {\n        progressDialogTitle.setText(title);\n        progressDialogMessage.setText(message);\n        progressDialogTitle.invalidate();\n        progressDialogMessage.invalidate();\n    }\n\n    public boolean isReady() {\n        if (aldialogInst != null) {\n            return true;\n        }\n\n        return false;\n    }\n\n    public AlertDialog getAlertDialog() {\n        return aldialogInst;\n    }\n}\n</code></pre>\n<p>The XML for layout <code>activity_progress_dialog.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/progressDialogTitle&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginStart=&quot;16dp&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:layout_marginEnd=&quot;16dp&quot;\n        android:fontFamily=&quot;@font/lexend_deca_bold&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textColor=&quot;@color/ventac_black&quot;\n        android:textSize=&quot;20sp&quot;\n        android:textStyle=&quot;bold&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/progressDialogMessage&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginStart=&quot;16dp&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:layout_marginEnd=&quot;16dp&quot;\n        android:fontFamily=&quot;@font/lexend_deca_light&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textColor=&quot;@color/ventac_gray_1&quot;\n        android:textSize=&quot;18sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogSpinner&quot; /&gt;\n\n    &lt;ProgressBar\n        android:id=&quot;@+id/progressDialogSpinner&quot;\n        style=&quot;?android:attr/progressBarStyleLarge&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:indeterminateDrawable=&quot;@drawable/spinner&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogTitle&quot; /&gt;\n\n    &lt;Space\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;32dp&quot;\n        android:layout_marginStart=&quot;157dp&quot;\n        android:layout_marginEnd=&quot;218dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogMessage&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>The <code>MainActivity.java</code> class:</p>\n<pre><code>package com.xxx.yyy.ui;\n\nimport androidx.activity.OnBackPressedCallback;\nimport androidx.annotation.RequiresApi;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.lifecycle.LiveData;\nimport androidx.work.Operation;\nimport androidx.work.PeriodicWorkRequest;\nimport androidx.work.WorkInfo;\nimport androidx.work.WorkManager;\n\nimport android.app.ActivityManager;\nimport android.app.ApplicationExitInfo;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.drawable.Drawable;\nimport android.hardware.usb.UsbDevice;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.view.Gravity;\nimport android.view.View;\nimport android.widget.Button;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.security.Security;\nimport java.util.List;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.TimeUnit;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static Context myContext = null;\n\n    @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);    \n        myContext = this;\n        System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG START =====&quot;);\n\n        ProgressDialog dialog = new ProgressDialog(&quot;Downloading Provenance&quot;, &quot;0%&quot;);\n        dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;progdialog&quot;);\n        dialog.updateDialog(&quot;HELLO&quot;, &quot;100%&quot;);\n        System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG END =====&quot;);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n    }\n}\n</code></pre>\n<p>The error message:</p>\n<pre><code>Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.TextView.setText(java.lang.CharSequence)' on a null object reference\nat com.watchlink.keepertag.ui.ProgressDialog.updateDialog(ProgressDialog.java:69)\nat com.watchlink.keepertag.ui.MainActivity.onCreate(MainActivity.java:45)\nat android.app.Activity.performCreate(Activity.java:8591)\nat android.app.Activity.performCreate(Activity.java:8570)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1384)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4150)\n</code></pre>\n"},{"tags":["java","spring","windows-authentication","spring-webclient","ntlm-authentication"],"answers":[{"tags":[],"owner":{"account_id":9238932,"reputation":69,"user_id":6862684,"display_name":"spCH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670267172,"creation_date":1670257577,"answer_id":74691339,"question_id":74575496,"body_markdown":"I have recently been looking into NTLM for Spring WebClient. First I tried it with Apache HttpClient, but got no response on request. I didn&#39;t investigate the cause further...\r\n\r\nSince I wanted to use the netty HttpClient anyway, I implemented my own `ExchangeFilterFunction` using the JCIFS implementation (the same as Apache HttpClient uses). Similar to that:\r\n\r\n```java\r\npublic final class NtlmAuthorizedClientExchangeFilterFunction implements ExchangeFilterFunction {\r\n\r\n    private final NtlmPasswordAuthentication ntlmPasswordAuthentication;\r\n    private final boolean doSigning;\r\n\r\n    public NtlmAuthorizedClientExchangeFilterFunction(String domain, String username, String password, boolean doSigning, int lmCompatibility) {\r\n        this.ntlmPasswordAuthentication = new NtlmPasswordAuthentication(domain, username, password);\r\n        this.doSigning = doSigning;\r\n        System.setProperty(&quot;jcifs.smb.lmCompatibility&quot;, Integer.toString(lmCompatibility));\r\n    }\r\n\r\n\r\n    @Override\r\n    public Mono&lt;ClientResponse&gt; filter(final ClientRequest request, final ExchangeFunction next) {\r\n        NtlmContext ntlmContext = new NtlmContext(ntlmPasswordAuthentication, doSigning);\r\n        try {\r\n            return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(new byte[0], 0, 0)))\r\n                .publishOn(Schedulers.single()) // this is necessary to make sure that the requests are processed sequential and thus http keep alive is working\r\n                .flatMap(clientResponse -&gt; {\r\n                    List&lt;String&gt; ntlmAuthHeaders = getNtlmAuthHeaders(clientResponse);\r\n                    if (ntlmAuthHeaders.isEmpty()) return Mono.error(...);\r\n                    String ntlmHeader = ntlmAuthHeaders.get(0);\r\n                    if (ntlmHeader.length() &lt;= 5) return Mono.error(...);\r\n                    try {\r\n                        byte[] type2 = Base64.decode(ntlmHeader.substring(5));\r\n                        return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(type2, 0, type2.length)));\r\n                    } catch (IOException e) {\r\n                        return Mono.error(...);\r\n                    }\r\n                });\r\n        } catch (SmbException e) {\r\n            return Mono.error(...);\r\n        }\r\n    }\r\n\r\n    @NotNull\r\n    private static List&lt;String&gt; getNtlmAuthHeaders(ClientResponse clientResponse) {\r\n        List&lt;String&gt; wwwAuthHeaders = clientResponse.headers().header(HttpHeaders.WWW_AUTHENTICATE);\r\n        List&lt;String&gt; ntlmAuthHeaders = wwwAuthHeaders.stream().filter(h -&gt; h.startsWith(&quot;NTLM&quot;)).sorted(Comparator.comparingInt(String::length)).collect(Collectors.toList());\r\n        return ntlmAuthHeaders;\r\n    }\r\n\r\n    private ClientRequest addNtlmHeader(ClientRequest clientRequest, byte[] ntlmPayload) {\r\n        ClientRequest.Builder request = ClientRequest\r\n            .from(clientRequest)\r\n            .header(HttpHeaders.AUTHORIZATION, &quot;NTLM &quot;.concat(Base64.encode(ntlmPayload)));\r\n        return request.build();\r\n    }\r\n```\r\n\r\nI don&#39;t have an answer to your second question. My system was a Linux.","title":"Spring WebClient Windows NTLM Authentication","body":"<p>I have recently been looking into NTLM for Spring WebClient. First I tried it with Apache HttpClient, but got no response on request. I didn't investigate the cause further...</p>\n<p>Since I wanted to use the netty HttpClient anyway, I implemented my own <code>ExchangeFilterFunction</code> using the JCIFS implementation (the same as Apache HttpClient uses). Similar to that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class NtlmAuthorizedClientExchangeFilterFunction implements ExchangeFilterFunction {\n\n    private final NtlmPasswordAuthentication ntlmPasswordAuthentication;\n    private final boolean doSigning;\n\n    public NtlmAuthorizedClientExchangeFilterFunction(String domain, String username, String password, boolean doSigning, int lmCompatibility) {\n        this.ntlmPasswordAuthentication = new NtlmPasswordAuthentication(domain, username, password);\n        this.doSigning = doSigning;\n        System.setProperty(&quot;jcifs.smb.lmCompatibility&quot;, Integer.toString(lmCompatibility));\n    }\n\n\n    @Override\n    public Mono&lt;ClientResponse&gt; filter(final ClientRequest request, final ExchangeFunction next) {\n        NtlmContext ntlmContext = new NtlmContext(ntlmPasswordAuthentication, doSigning);\n        try {\n            return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(new byte[0], 0, 0)))\n                .publishOn(Schedulers.single()) // this is necessary to make sure that the requests are processed sequential and thus http keep alive is working\n                .flatMap(clientResponse -&gt; {\n                    List&lt;String&gt; ntlmAuthHeaders = getNtlmAuthHeaders(clientResponse);\n                    if (ntlmAuthHeaders.isEmpty()) return Mono.error(...);\n                    String ntlmHeader = ntlmAuthHeaders.get(0);\n                    if (ntlmHeader.length() &lt;= 5) return Mono.error(...);\n                    try {\n                        byte[] type2 = Base64.decode(ntlmHeader.substring(5));\n                        return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(type2, 0, type2.length)));\n                    } catch (IOException e) {\n                        return Mono.error(...);\n                    }\n                });\n        } catch (SmbException e) {\n            return Mono.error(...);\n        }\n    }\n\n    @NotNull\n    private static List&lt;String&gt; getNtlmAuthHeaders(ClientResponse clientResponse) {\n        List&lt;String&gt; wwwAuthHeaders = clientResponse.headers().header(HttpHeaders.WWW_AUTHENTICATE);\n        List&lt;String&gt; ntlmAuthHeaders = wwwAuthHeaders.stream().filter(h -&gt; h.startsWith(&quot;NTLM&quot;)).sorted(Comparator.comparingInt(String::length)).collect(Collectors.toList());\n        return ntlmAuthHeaders;\n    }\n\n    private ClientRequest addNtlmHeader(ClientRequest clientRequest, byte[] ntlmPayload) {\n        ClientRequest.Builder request = ClientRequest\n            .from(clientRequest)\n            .header(HttpHeaders.AUTHORIZATION, &quot;NTLM &quot;.concat(Base64.encode(ntlmPayload)));\n        return request.build();\n    }\n</code></pre>\n<p>I don't have an answer to your second question. My system was a Linux.</p>\n"},{"tags":[],"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693556552,"creation_date":1693556552,"answer_id":77021558,"question_id":74575496,"body_markdown":"```\r\nwebClientBuilder.filter((request, next) -&gt; {\r\n\r\n            final NtlmPasswordAuthentication ntlmPasswordAuthentication =\r\n                    new NtlmPasswordAuthentication(\r\n                            domain,\r\n                            username,\r\n                            password);\r\n            final NtlmContext ctxt = new NtlmContext(ntlmPasswordAuthentication, true);\r\n\r\n            final byte[] token1 = ntlm(ctxt, new byte[0]);\r\n\r\n            final ClientRequest ntlmChallenge = ClientRequest.from(request)\r\n                    .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token1)))\r\n                    .build();\r\n\r\n\r\n            final ExchangeFunction exchangeFunction = ExchangeFunctions.create(singleConnKeepAliveConnector());\r\n\r\n            return exchangeFunction\r\n                    .exchange(ntlmChallenge)\r\n                    .flatMap(clientResponse -&gt; {\r\n\r\n                        byte[] token2 = ntlm(ctxt, Base64.decode(extractNtlmHeaderValue(clientResponse)));\r\n\r\n                        return exchangeFunction.exchange(ClientRequest.from(request)\r\n                                .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token2)))\r\n                                .build());\r\n                    });\r\n        });\r\n```\r\n\r\n---\r\n\r\n```\r\nprivate byte[] ntlm(NtlmContext ctxt, byte[] token) {\r\n        try {\r\n            return ctxt.initSecContext(token, 0, token.length);\r\n        } catch (SmbException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\n---\r\n\r\n```\r\nprivate String extractNtlmHeaderValue(ClientResponse response) {\r\n        return response\r\n                .headers()\r\n                .header(HttpHeaders.WWW_AUTHENTICATE).get(0).replace(NTLM_PREFIX, &quot;&quot;);\r\n         \r\n    }\r\n```\r\n---\r\n```\r\n    private ClientHttpConnector singleConnKeepAliveConnector() {\r\n\r\n        final HttpClient httpClient = HttpClient.create(\r\n                ConnectionProvider.builder(&quot;single-conn&quot;).maxConnections(1).build());\r\n\r\n        return new ReactorClientHttpConnector(httpClient);\r\n    }\r\n```\r\n\r\n---\r\n```\r\nNTLM_PREFIX=&quot;NTLM &quot;\r\n```","title":"Spring WebClient Windows NTLM Authentication","body":"<pre><code>webClientBuilder.filter((request, next) -&gt; {\n\n            final NtlmPasswordAuthentication ntlmPasswordAuthentication =\n                    new NtlmPasswordAuthentication(\n                            domain,\n                            username,\n                            password);\n            final NtlmContext ctxt = new NtlmContext(ntlmPasswordAuthentication, true);\n\n            final byte[] token1 = ntlm(ctxt, new byte[0]);\n\n            final ClientRequest ntlmChallenge = ClientRequest.from(request)\n                    .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token1)))\n                    .build();\n\n\n            final ExchangeFunction exchangeFunction = ExchangeFunctions.create(singleConnKeepAliveConnector());\n\n            return exchangeFunction\n                    .exchange(ntlmChallenge)\n                    .flatMap(clientResponse -&gt; {\n\n                        byte[] token2 = ntlm(ctxt, Base64.decode(extractNtlmHeaderValue(clientResponse)));\n\n                        return exchangeFunction.exchange(ClientRequest.from(request)\n                                .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token2)))\n                                .build());\n                    });\n        });\n</code></pre>\n<hr />\n<pre><code>private byte[] ntlm(NtlmContext ctxt, byte[] token) {\n        try {\n            return ctxt.initSecContext(token, 0, token.length);\n        } catch (SmbException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<hr />\n<pre><code>private String extractNtlmHeaderValue(ClientResponse response) {\n        return response\n                .headers()\n                .header(HttpHeaders.WWW_AUTHENTICATE).get(0).replace(NTLM_PREFIX, &quot;&quot;);\n         \n    }\n</code></pre>\n<hr />\n<pre><code>    private ClientHttpConnector singleConnKeepAliveConnector() {\n\n        final HttpClient httpClient = HttpClient.create(\n                ConnectionProvider.builder(&quot;single-conn&quot;).maxConnections(1).build());\n\n        return new ReactorClientHttpConnector(httpClient);\n    }\n</code></pre>\n<hr />\n<pre><code>NTLM_PREFIX=&quot;NTLM &quot;\n</code></pre>\n"}],"owner":{"account_id":55837,"reputation":3854,"user_id":167304,"accept_rate":33,"display_name":"Jason"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":766,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693556552,"creation_date":1669393154,"question_id":74575496,"body_markdown":"I can&#39;t find any good sample or doc that explains this clearly.  I can successfully authenticate with the (older) RestTemplate:\r\n\r\n    HttpClientBuilder httpClient = HttpClients.custom();\r\n    BasicCredentialsProvider provider = new BasicCredentialsProvider();\r\n    Credentials cred = new NTCredentials(&quot;my-user&quot;, &quot;my-password&quot;, null, &quot;my-domain&quot;);\r\n    \r\n    provider.setCredentials(AuthScope.ANY, cred);\r\n    httpClient.setDefaultCredentialsProvider(provider);\r\n    \r\n    HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\r\n    requestFactory.httpClient = httpClient.build();\r\n    \r\n    RestTemplate restTemplate = new RestTemplate(request);\r\n    \r\n    restTemplate.getForEntity(&quot;https://my.url.com&quot;, String.class)\r\n\r\nI haven&#39;t been able to find a way to pass `NTCredentials` (or `Credentials`) to WebClient, have tried\r\n\r\n    WebClient client = WebClient.builder()\r\n    .filter(ExchangeFilterFunctions.basicAuthentication(&quot;user&quot;, &quot;password&quot;))\r\n    .build();\r\n\r\nalso\r\n\r\n    WebClient client = WebClient.builder().build();\r\n    client.get().headers(h -&gt; h.setBasicAuth(&quot;user&quot;, &quot;password&quot;))...\r\n\r\nBut neither approach worked with WebClient\r\n\r\n**Questions:**\r\n\r\n 1. How do you do Windows/NTLM authentication with Spring WebClient?\r\n 2. Is there anyway I can get NTLM or Windows auth working without\r\n    supplying user/password when running in Windows using currrent user\r\n    context?","title":"Spring WebClient Windows NTLM Authentication","body":"<p>I can't find any good sample or doc that explains this clearly.  I can successfully authenticate with the (older) RestTemplate:</p>\n<pre><code>HttpClientBuilder httpClient = HttpClients.custom();\nBasicCredentialsProvider provider = new BasicCredentialsProvider();\nCredentials cred = new NTCredentials(&quot;my-user&quot;, &quot;my-password&quot;, null, &quot;my-domain&quot;);\n\nprovider.setCredentials(AuthScope.ANY, cred);\nhttpClient.setDefaultCredentialsProvider(provider);\n\nHttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\nrequestFactory.httpClient = httpClient.build();\n\nRestTemplate restTemplate = new RestTemplate(request);\n\nrestTemplate.getForEntity(&quot;https://my.url.com&quot;, String.class)\n</code></pre>\n<p>I haven't been able to find a way to pass <code>NTCredentials</code> (or <code>Credentials</code>) to WebClient, have tried</p>\n<pre><code>WebClient client = WebClient.builder()\n.filter(ExchangeFilterFunctions.basicAuthentication(&quot;user&quot;, &quot;password&quot;))\n.build();\n</code></pre>\n<p>also</p>\n<pre><code>WebClient client = WebClient.builder().build();\nclient.get().headers(h -&gt; h.setBasicAuth(&quot;user&quot;, &quot;password&quot;))...\n</code></pre>\n<p>But neither approach worked with WebClient</p>\n<p><strong>Questions:</strong></p>\n<ol>\n<li>How do you do Windows/NTLM authentication with Spring WebClient?</li>\n<li>Is there anyway I can get NTLM or Windows auth working without\nsupplying user/password when running in Windows using currrent user\ncontext?</li>\n</ol>\n"},{"tags":["java","eclipse","maven","selenium-webdriver"],"comments":[{"owner":{"account_id":29343325,"reputation":1,"user_id":22482256,"display_name":"Bhumika Sonawane"},"score":0,"creation_date":1693555872,"post_id":77021486,"comment_id":135779439,"body_markdown":"I have downloaded chrome version of 116","body":"I have downloaded chrome version of 116"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1693556034,"post_id":77021486,"comment_id":135779465,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, [edit] your question to include the code as properly formatted text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, <a href=\"https://stackoverflow.com/posts/77021486/edit\">edit</a> your question to include the code as properly formatted text."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693556432,"post_id":77021486,"comment_id":135779534,"body_markdown":"No errors there, only warnings","body":"No errors there, only warnings"},{"owner":{"account_id":29343325,"reputation":1,"user_id":22482256,"display_name":"Bhumika Sonawane"},"score":0,"creation_date":1693557346,"post_id":77021486,"comment_id":135779715,"body_markdown":"Yes definitely I am remember that thing at next time  @seenukarthi","body":"Yes definitely I am remember that thing at next time  @seenukarthi"}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693556334,"creation_date":1693556334,"answer_id":77021543,"question_id":77021486,"body_markdown":"Assuming you are using selenium `v4.11.0`, refer the below screenshot. Selenium supports only up to `CDP 115`. This is the reason for the WARN which you are seeing in your console. Having said that, it is just a warning and not error, it will not stop your code from running.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p1a5E.png\r\n\r\nSource : https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG","title":"unable to find an exact match of CDP version 116","body":"<p>Assuming you are using selenium <code>v4.11.0</code>, refer the below screenshot. Selenium supports only up to <code>CDP 115</code>. This is the reason for the WARN which you are seeing in your console. Having said that, it is just a warning and not error, it will not stop your code from running.</p>\n<p><a href=\"https://i.stack.imgur.com/p1a5E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p1a5E.png\" alt=\"enter image description here\" /></a></p>\n<p>Source : <a href=\"https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG</a></p>\n"}],"owner":{"account_id":29343325,"reputation":1,"user_id":22482256,"display_name":"Bhumika Sonawane"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":296,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693556443,"creation_date":1693555768,"question_id":77021486,"body_markdown":"Console log:\r\n````\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nSep 01, 2023 1:10:54 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\nWARNING: Unable to find an exact match for CDP version 116, so returning the closest version found: 115\r\n````\r\n\r\nCode:\r\n\r\n![enter image description here](https://i.stack.imgur.com/XFqS5.png)","title":"unable to find an exact match of CDP version 116","body":"<p>Console log:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nSep 01, 2023 1:10:54 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\nWARNING: Unable to find an exact match for CDP version 116, so returning the closest version found: 115\n</code></pre>\n<p>Code:</p>\n<p><img src=\"https://i.stack.imgur.com/XFqS5.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","rest","jax-rs","resteasy"],"answers":[{"tags":[],"owner":{"account_id":4444082,"reputation":122,"user_id":3617903,"accept_rate":83,"display_name":"fbutter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1431981107,"creation_date":1431981107,"answer_id":30312306,"question_id":30124365,"body_markdown":"The best solution i found was to use a Filter to process the incoming response header.\r\n\r\n    public class HeaderFilter implements ClientResponseFilter {\r\n\r\n\r\n\t  private Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n\t\r\n\t  private List&lt;String&gt; headerFilter = new ArrayList&lt;&gt;();\r\n\t\r\n\r\n\t  public final void addHeaderFilter(final String header) {\r\n\t\t\r\n\t\t  headerFilter.add(header);\r\n\t  }\r\n\r\n\t  public final void removeHeaderFilter(final String header) {\r\n\t\r\n\t\t  headerFilter.remove(header);\r\n\t  }\r\n\r\n\t  public final String getHeader(final String header) {\r\n\t\t\r\n\t\t  return headers.get(header);\r\n\t  }\r\n\t\r\n\t  @Override\r\n\t  public final void filter(final ClientRequestContext requestContext,\r\n\t\t\t  final ClientResponseContext responseContext) \r\n\t\t\t\t\t\t\t\t\t\t  throws IOException {\r\n\r\n\t\t  headers = new HashMap&lt;&gt;();\r\n\t\t\r\n\t\t  for (String headerToLookFor : headerFilter) {\r\n\t\t\t\r\n\t\t\t  String header = responseContext.getHeaderString(headerToLookFor);\r\n\t\t\t\r\n\t\t\t  if (header != null) {\r\n\t\t\t\t\r\n\t\t\t\t  headers.put(headerToLookFor, header);\r\n\t\t\t  } else {\r\n\t\t\t\t\r\n\t\t\t\t  ...\r\n\t\t\t  }\r\n\t\t  }\r\n\t  }\r\n    }","title":"How to get the response header in a RestEasy client?","body":"<p>The best solution i found was to use a Filter to process the incoming response header.</p>\n\n<pre><code>public class HeaderFilter implements ClientResponseFilter {\n\n\n  private Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n\n  private List&lt;String&gt; headerFilter = new ArrayList&lt;&gt;();\n\n\n  public final void addHeaderFilter(final String header) {\n\n      headerFilter.add(header);\n  }\n\n  public final void removeHeaderFilter(final String header) {\n\n      headerFilter.remove(header);\n  }\n\n  public final String getHeader(final String header) {\n\n      return headers.get(header);\n  }\n\n  @Override\n  public final void filter(final ClientRequestContext requestContext,\n          final ClientResponseContext responseContext) \n                                      throws IOException {\n\n      headers = new HashMap&lt;&gt;();\n\n      for (String headerToLookFor : headerFilter) {\n\n          String header = responseContext.getHeaderString(headerToLookFor);\n\n          if (header != null) {\n\n              headers.put(headerToLookFor, header);\n          } else {\n\n              ...\n          }\n      }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20441512,"reputation":1,"user_id":14998258,"display_name":"ksu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693555600,"creation_date":1693554115,"answer_id":77021321,"question_id":30124365,"body_markdown":"@ResposeObject can be used for it. It marks interface which will give access to the response. Using annotaions like @Body, @HeaderParam, @Status one can get those parameters from the response. See the examples below.\r\n\r\n&gt; a client proxy method returns an interface that represents the information contained in a javax.ws.rs.core.Response. Such an interface must be annotated with @ResponseObject from package org.jboss.resteasy.annotations, and its methods may be further annotated with @Body, @LinkHeaderParam, and @Status from the same package, as well as javax.ws.rs.HeaderParam.\r\n\r\nThere are some more example in documentation, see here: [Link for the RestEasy documentation][1]\r\n\r\n\r\nMy example:\r\n\r\n        @ResponseObject\r\n        public interface MyResponseObject {\r\n        \r\n            @HeaderParam(&quot;my_header_name&quot;)\r\n            String myHeader();\r\n        \r\n            @Body\r\n            MyBody body();\r\n        }\r\n        \r\n        public class MyBody {        \r\n         List&lt;MyDto&gt; value;\r\n        }\r\n    \r\n    \r\n        @Path(&quot;test&quot;)\r\n        public interface TestClient {\r\n       \r\n           @GET\r\n           MyResponseObject get();\r\n        }\r\n\r\n\r\n  [1]: https://docs.jboss.org/resteasy/docs/3.5.1.Final/userguide/html_single/index.html","title":"How to get the response header in a RestEasy client?","body":"<p>@ResposeObject can be used for it. It marks interface which will give access to the response. Using annotaions like @Body, @HeaderParam, @Status one can get those parameters from the response. See the examples below.</p>\n<blockquote>\n<p>a client proxy method returns an interface that represents the information contained in a javax.ws.rs.core.Response. Such an interface must be annotated with @ResponseObject from package org.jboss.resteasy.annotations, and its methods may be further annotated with @Body, @LinkHeaderParam, and @Status from the same package, as well as javax.ws.rs.HeaderParam.</p>\n</blockquote>\n<p>There are some more example in documentation, see here: <a href=\"https://docs.jboss.org/resteasy/docs/3.5.1.Final/userguide/html_single/index.html\" rel=\"nofollow noreferrer\">Link for the RestEasy documentation</a></p>\n<p>My example:</p>\n<pre><code>    @ResponseObject\n    public interface MyResponseObject {\n    \n        @HeaderParam(&quot;my_header_name&quot;)\n        String myHeader();\n    \n        @Body\n        MyBody body();\n    }\n    \n    public class MyBody {        \n     List&lt;MyDto&gt; value;\n    }\n\n\n    @Path(&quot;test&quot;)\n    public interface TestClient {\n   \n       @GET\n       MyResponseObject get();\n    }\n</code></pre>\n"}],"owner":{"account_id":4444082,"reputation":122,"user_id":3617903,"accept_rate":83,"display_name":"fbutter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2947,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":30312306,"answer_count":2,"score":1,"last_activity_date":1693555600,"creation_date":1431089475,"question_id":30124365,"body_markdown":"i&#180;m implementing a Restful service using Jax-RS 2.0 ([Resteasy 3.0.7.Final][1]) and share the interface between client and service.\r\n\r\nThe return value is void because ClientResponse is deprecated since RestEasy introduced JAX-RS 2.0 in version 3+.\r\n\r\nTo return the location of the new created object i inject the response, using the `@Context` annotation, and add the Content-Location header.\r\n\r\nFor example:\r\n\r\nShared Interface:\r\n\r\n       @Path(&quot;/&quot;)\r\n       @Consumes(&quot;application/xml&quot;)\r\n       @Produces(&quot;application/xml&quot;)\r\n       interface Resource {\r\n\r\n           \t@Path(&quot;createSomething&quot;)\r\n\t        void createSomething(AnyObject object);\r\n\r\n            ...\r\n       }\r\n\r\nImplementation class (The Service):\r\n\r\n        class ResourceImpl {\r\n        \r\n             ...\r\n             @Context org.jboss.resteasy.spi.HttpResponse response;\r\n             ...\r\n    \t     \r\n             @Override\r\n             void createSomething(AnyObject object) throws AnyException {\r\n         \r\n                 String id = service.create(object);\r\n\r\n                 response.getOutputHeaders().putSingle(&quot;Content-Location&quot;,\r\n\t\t\t\t\t  &quot;/createSomething/&quot; + id);\r\n\t\t\t\r\n\t             response.setStatus(Response.Status.CREATED.getStatusCode());\r\n             }\r\n\r\n        }\r\n\r\nThe client (build with the Resteasy Proxy Framework):\r\n\r\n\r\n         ...\r\n         ResteasyClient client = new ResteasyClientBuilder().build();\r\n\t     ResteasyWebTarget target = client.target(baseUrl);\r\n\r\n\t     Resource resource = (Resource) target.proxy(Resource.class);\t\r\n\r\n         resource.createSomething(anyObject);\r\n         ...\r\n\r\n\r\n\r\nHow can i retrieve Header information (and others, like Atom Links) which has been  injected by the service?\r\n\r\nIs it reasonable to use client side Filters and Interceptors?\r\n\r\n\r\nThank You\r\n\r\n  [1]: http://docs.jboss.org/resteasy/docs/3.0.7.Final/userguide/html_single/index.html","title":"How to get the response header in a RestEasy client?","body":"<p>i´m implementing a Restful service using Jax-RS 2.0 (<a href=\"http://docs.jboss.org/resteasy/docs/3.0.7.Final/userguide/html_single/index.html\" rel=\"nofollow\">Resteasy 3.0.7.Final</a>) and share the interface between client and service.</p>\n\n<p>The return value is void because ClientResponse is deprecated since RestEasy introduced JAX-RS 2.0 in version 3+.</p>\n\n<p>To return the location of the new created object i inject the response, using the <code>@Context</code> annotation, and add the Content-Location header.</p>\n\n<p>For example:</p>\n\n<p>Shared Interface:</p>\n\n<pre><code>   @Path(\"/\")\n   @Consumes(\"application/xml\")\n   @Produces(\"application/xml\")\n   interface Resource {\n\n        @Path(\"createSomething\")\n        void createSomething(AnyObject object);\n\n        ...\n   }\n</code></pre>\n\n<p>Implementation class (The Service):</p>\n\n<pre><code>    class ResourceImpl {\n\n         ...\n         @Context org.jboss.resteasy.spi.HttpResponse response;\n         ...\n\n         @Override\n         void createSomething(AnyObject object) throws AnyException {\n\n             String id = service.create(object);\n\n             response.getOutputHeaders().putSingle(\"Content-Location\",\n                  \"/createSomething/\" + id);\n\n             response.setStatus(Response.Status.CREATED.getStatusCode());\n         }\n\n    }\n</code></pre>\n\n<p>The client (build with the Resteasy Proxy Framework):</p>\n\n<pre><code>     ...\n     ResteasyClient client = new ResteasyClientBuilder().build();\n     ResteasyWebTarget target = client.target(baseUrl);\n\n     Resource resource = (Resource) target.proxy(Resource.class);   \n\n     resource.createSomething(anyObject);\n     ...\n</code></pre>\n\n<p>How can i retrieve Header information (and others, like Atom Links) which has been  injected by the service?</p>\n\n<p>Is it reasonable to use client side Filters and Interceptors?</p>\n\n<p>Thank You</p>\n"},{"tags":["java","spring","spring-mvc","logging","log4j"],"answers":[{"tags":[],"owner":{"account_id":960456,"reputation":949,"user_id":984929,"accept_rate":50,"display_name":"lincolnadym"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458606829,"creation_date":1458606829,"answer_id":36144201,"question_id":36143287,"body_markdown":"Try moving the log4j.properties file to ./WEB-INF/.  Your Spring Resources handler is certainly ok with looking in ./WEB-INF/resources/.  I don&#39;t believe log4j knows anything about spring, nor does log4j care about spring.  Log4j is going to look in the classpath for a properties file unless you expicitly tell log4j to look elsewhere.\r\n\r\nI think right now, you&#39;ve only told spring where to look for things.","title":"How to configure log4j in a Spring Mvc application configured with Java Annotations and using a log4j.properties file","body":"<p>Try moving the log4j.properties file to ./WEB-INF/.  Your Spring Resources handler is certainly ok with looking in ./WEB-INF/resources/.  I don't believe log4j knows anything about spring, nor does log4j care about spring.  Log4j is going to look in the classpath for a properties file unless you expicitly tell log4j to look elsewhere.</p>\n\n<p>I think right now, you've only told spring where to look for things.</p>\n"},{"tags":[],"owner":{"account_id":416079,"reputation":1214,"user_id":791260,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458606844,"creation_date":1458606844,"answer_id":36144204,"question_id":36143287,"body_markdown":"I believe it&#39;s the invalid placement of the log4j.properties file that&#39;s breaking your expectations.\r\nYou could have a look at the answers presented in this stack article about [log4j-properties-file-where-to-put-it][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it","title":"How to configure log4j in a Spring Mvc application configured with Java Annotations and using a log4j.properties file","body":"<p>I believe it's the invalid placement of the log4j.properties file that's breaking your expectations.\nYou could have a look at the answers presented in this stack article about <a href=\"https://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it\">log4j-properties-file-where-to-put-it</a></p>\n"}],"owner":{"account_id":4808362,"reputation":483,"user_id":3882606,"accept_rate":29,"display_name":"StackQuestion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11650,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693555305,"creation_date":1458601531,"question_id":36143287,"body_markdown":"I&#39;m working on a Maven Web application using `Spring MVC 4.2.5.RELEASE`, I&#39;m using `Netbeans` IDE with `GlassFishSErver 4.1`, I want to use `log4j 1.2.17` so I created a log4j.properties file but it seems like my properties file it&#39;s not being found because I get the following error: \r\n\r\n    log4j:WARN No appenders could be found for logger (org.springframework.web.servlet.DispatcherServlet).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n\r\nI configured my Spring application using java annotations here is my configuration\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan({&quot;config&quot;, &quot;controllers&quot;})\r\n    public class ConfigMVC extends WebMvcConfigurerAdapter {\r\n\r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/WEB-INF/resources/&quot;);\r\n    }\r\n\r\n    @Bean\r\n    public UrlBasedViewResolver setupViewResolver() {\r\n        UrlBasedViewResolver resolver = new UrlBasedViewResolver();\r\n        resolver.setPrefix(&quot;/WEB-INF/jsp/&quot;);\r\n        resolver.setSuffix(&quot;.jsp&quot;);\r\n        resolver.setViewClass(JstlView.class);\r\n        return resolver;\r\n    }\r\n\r\n}\r\n\r\nhere is my WebInitializer\r\n\r\n    public class WebInicializar implements WebApplicationInitializer {\r\n    \r\n        @Override\r\n        public void onStartup(ServletContext servletContext) throws ServletException {\r\n            AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();\r\n            ctx.register(ConfigMVC.class);\r\n            ctx.setServletContext(servletContext);\r\n            Dynamic servlet = servletContext.addServlet(&quot;dispatcher&quot;, new DispatcherServlet(ctx));\r\n            servlet.addMapping(&quot;/&quot;);\r\n            servlet.setLoadOnStartup(1);\r\n            servlet.setInitParameter(&quot;throwExceptionIfNoHandlerFound&quot;, &quot;true&quot;);\r\n        }\r\n    }\r\n\r\nand here is my controller\r\n\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        private static final Logger logger = Logger.getLogger(HomeController.class);\r\n      \r\n        @RequestMapping(value = &quot;/myPage&quot;, method = RequestMethod.GET)\r\n        public String paginaSinMap(ModelMap map) {\r\n    \r\n        logger.info(&quot;This is an info log entry&quot;);\r\n        logger.error(&quot;This is an error log entry&quot;);\r\n    \r\n        return &quot;myPage&quot;;\r\n    }\r\n\r\nand here it&#39;s my `log4j.properties`\r\n\r\n    # LOG4J configuration\r\n    log4j.rootLogger=INFO, Appender1, Appender2\r\n     \r\n    log4j.appender.Appender1=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.Appender1.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.Appender1.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\r\n     \r\n    log4j.appender.Appender2=org.apache.log4j.FileAppender\r\n    log4j.appender.Appender2.File=D:/Logs/SpringMVC.log\r\n    log4j.appender.Appender2.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.Appender2.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\r\n\r\nand I put this log4j.properties in my resources folder, here is my project structure\r\n\r\nEDIT: I didn&#39;t mention that my project is a maven web application using spring \r\nand this is my project structure\r\n\r\n    MyWebAppProjectName\r\n    --Web Pages\r\n      --WEB-INF\r\n        --jsp\r\n             index.jsp\r\n        --resources\r\n          --js\r\n             js.js\r\n          --css\r\n             site.css\r\n          log4j.properties\r\n    --Source Packages\r\n      --config\r\n          ConfigMVC.java\r\n          WebInitializaer.java\r\n      --controllers\r\n          HomeController.java\r\n    --Test Packages\r\n    --Other Resources\r\n      --src/main/resources\r\n        --default package\r\n    --Dependencies\r\n    --Java Dependencies\r\n    --Project FIles\r\n\r\nSo I put the log4j.properties in the `Other Resources/src/main/resources` and when I did this Netbeans created a `default Package` with the file inside like this `default package/log4j-properties` and it worked the logs starting to appear in the output and everything worked fine as expected. \r\n\r\nI tried to create a package named `Log4jResource` inside this path `src/main/resources` but when I did this it stopped to work and the error showed again, so it&#39;s there a way to put this file in that folder but without having to use `default package` that NetBeans creates when I put the folder in there.\r\n\r\nI tried doing refactor rename the default package but it shows me this error `Module JPA Refactoring threw java.lang.NullPointerException. Please report a bug against JPA Refactoring module and attach your var/log/messages.log.`\r\n\r\nMy final project structure looks like this\r\n\r\n    MyWebAppProjectName\r\n    --Web Pages\r\n      --WEB-INF\r\n        --jsp\r\n             index.jsp\r\n        --resources\r\n          --js\r\n             js.js\r\n          --css\r\n             site.css\r\n          log4j.properties\r\n    --Source Packages\r\n      --config\r\n          ConfigMVC.java\r\n          WebInitializaer.java\r\n      --controllers\r\n          HomeController.java\r\n    --Test Packages\r\n    --Other Resources\r\n      --src/main/resources\r\n        --default package\r\n          --log4j.properties\r\n    --Dependencies\r\n    --Java Dependencies\r\n    --Project FIles","title":"How to configure log4j in a Spring Mvc application configured with Java Annotations and using a log4j.properties file","body":"<p>I'm working on a Maven Web application using <code>Spring MVC 4.2.5.RELEASE</code>, I'm using <code>Netbeans</code> IDE with <code>GlassFishSErver 4.1</code>, I want to use <code>log4j 1.2.17</code> so I created a log4j.properties file but it seems like my properties file it's not being found because I get the following error: </p>\n\n<pre><code>log4j:WARN No appenders could be found for logger (org.springframework.web.servlet.DispatcherServlet).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\n</code></pre>\n\n<p>I configured my Spring application using java annotations here is my configuration</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan({\"config\", \"controllers\"})\npublic class ConfigMVC extends WebMvcConfigurerAdapter {\n\n@Override\npublic void addResourceHandlers(ResourceHandlerRegistry registry) {\n    registry.addResourceHandler(\"/resources/**\").addResourceLocations(\"/WEB-INF/resources/\");\n}\n\n@Bean\npublic UrlBasedViewResolver setupViewResolver() {\n    UrlBasedViewResolver resolver = new UrlBasedViewResolver();\n    resolver.setPrefix(\"/WEB-INF/jsp/\");\n    resolver.setSuffix(\".jsp\");\n    resolver.setViewClass(JstlView.class);\n    return resolver;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>here is my WebInitializer</p>\n\n<pre><code>public class WebInicializar implements WebApplicationInitializer {\n\n    @Override\n    public void onStartup(ServletContext servletContext) throws ServletException {\n        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();\n        ctx.register(ConfigMVC.class);\n        ctx.setServletContext(servletContext);\n        Dynamic servlet = servletContext.addServlet(\"dispatcher\", new DispatcherServlet(ctx));\n        servlet.addMapping(\"/\");\n        servlet.setLoadOnStartup(1);\n        servlet.setInitParameter(\"throwExceptionIfNoHandlerFound\", \"true\");\n    }\n}\n</code></pre>\n\n<p>and here is my controller</p>\n\n<pre><code>@Controller\npublic class HomeController {\n\n    private static final Logger logger = Logger.getLogger(HomeController.class);\n\n    @RequestMapping(value = \"/myPage\", method = RequestMethod.GET)\n    public String paginaSinMap(ModelMap map) {\n\n    logger.info(\"This is an info log entry\");\n    logger.error(\"This is an error log entry\");\n\n    return \"myPage\";\n}\n</code></pre>\n\n<p>and here it's my <code>log4j.properties</code></p>\n\n<pre><code># LOG4J configuration\nlog4j.rootLogger=INFO, Appender1, Appender2\n\nlog4j.appender.Appender1=org.apache.log4j.ConsoleAppender\nlog4j.appender.Appender1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Appender1.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\n\nlog4j.appender.Appender2=org.apache.log4j.FileAppender\nlog4j.appender.Appender2.File=D:/Logs/SpringMVC.log\nlog4j.appender.Appender2.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Appender2.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\n</code></pre>\n\n<p>and I put this log4j.properties in my resources folder, here is my project structure</p>\n\n<p>EDIT: I didn't mention that my project is a maven web application using spring \nand this is my project structure</p>\n\n<pre><code>MyWebAppProjectName\n--Web Pages\n  --WEB-INF\n    --jsp\n         index.jsp\n    --resources\n      --js\n         js.js\n      --css\n         site.css\n      log4j.properties\n--Source Packages\n  --config\n      ConfigMVC.java\n      WebInitializaer.java\n  --controllers\n      HomeController.java\n--Test Packages\n--Other Resources\n  --src/main/resources\n    --default package\n--Dependencies\n--Java Dependencies\n--Project FIles\n</code></pre>\n\n<p>So I put the log4j.properties in the <code>Other Resources/src/main/resources</code> and when I did this Netbeans created a <code>default Package</code> with the file inside like this <code>default package/log4j-properties</code> and it worked the logs starting to appear in the output and everything worked fine as expected. </p>\n\n<p>I tried to create a package named <code>Log4jResource</code> inside this path <code>src/main/resources</code> but when I did this it stopped to work and the error showed again, so it's there a way to put this file in that folder but without having to use <code>default package</code> that NetBeans creates when I put the folder in there.</p>\n\n<p>I tried doing refactor rename the default package but it shows me this error <code>Module JPA Refactoring threw java.lang.NullPointerException. Please report a bug against JPA Refactoring module and attach your var/log/messages.log.</code></p>\n\n<p>My final project structure looks like this</p>\n\n<pre><code>MyWebAppProjectName\n--Web Pages\n  --WEB-INF\n    --jsp\n         index.jsp\n    --resources\n      --js\n         js.js\n      --css\n         site.css\n      log4j.properties\n--Source Packages\n  --config\n      ConfigMVC.java\n      WebInitializaer.java\n  --controllers\n      HomeController.java\n--Test Packages\n--Other Resources\n  --src/main/resources\n    --default package\n      --log4j.properties\n--Dependencies\n--Java Dependencies\n--Project FIles\n</code></pre>\n"},{"tags":["java","hashmap","hashcode"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":5,"creation_date":1693544568,"post_id":77020612,"comment_id":135777759,"body_markdown":"&quot;hashCode needs to be different for different objects&quot;. That&#39;s not true. It just has to be the same for equal objects.","body":"&quot;hashCode needs to be different for different objects&quot;. That&#39;s not true. It just has to be the same for equal objects."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693561424,"post_id":77020612,"comment_id":135780536,"body_markdown":"There’s an infinite number of possible maps. How could you expect to get a distinct 32 bit number for each of them?","body":"There’s an infinite number of possible maps. How could you expect to get a distinct 32 bit number for each of them?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693547356,"creation_date":1693545348,"answer_id":77020652,"question_id":77020612,"body_markdown":"As [Commented][1], your statement:\r\n\r\n&gt; hashCode needs to be different for different objects\r\n\r\nis incorrect.\r\n\r\nA [hash function][2] takes an input, and returns a value derived from the input. The returned value is consistent. The same input always returns the same hash value.\r\n\r\nHowever, two inputs *can* indeed coincidentally return the same hash value. This is known as a *collision*. One aspect of a good hash function is that collisions are unlikely. But collisions are always possible. Inputs are infinite but hash values are finite; so obviously collisions *must* be possible.\r\n\r\nLet&#39;s test your assertion your two example maps result in the same hash value.\r\n\r\n```java\r\nMap &lt; String, Integer &gt; mapX =\r\n        new HashMap &lt;&gt; (\r\n                Map.of (\r\n                        &quot;u&quot; , 0 ,\r\n                        &quot;h&quot; , 3\r\n                )\r\n        );\r\n\r\nMap &lt; String, Integer &gt; mapY =\r\n        new HashMap &lt;&gt; (\r\n                Map.of (\r\n                        &quot;t&quot; , 3 ,\r\n                        &quot;i&quot; , 0\r\n                )\r\n        );\r\n\r\nMap &lt; String, Integer &gt; mapZ =\r\n        new HashMap &lt;&gt; (\r\n                Map.of (\r\n                        &quot;Alphabet&quot; , 7 ,\r\n                        &quot;Street&quot; , 42\r\n                )\r\n        );\r\n\r\nint hashX = mapX.hashCode ( );\r\nint hashY = mapY.hashCode ( );\r\nint hashZ = mapZ.hashCode ( );\r\n```\r\n\r\nDump to console.\r\n\r\n```java\r\nSystem.out.println ( &quot;mapX = &quot; + mapX );\r\nSystem.out.println ( &quot;mapY = &quot; + mapY );\r\nSystem.out.println ( &quot;mapZ = &quot; + mapZ );\r\n\r\nSystem.out.println ( &quot;hashX = &quot; + hashX );\r\nSystem.out.println ( &quot;hashY = &quot; + hashY );\r\nSystem.out.println ( &quot;hashZ = &quot; + hashZ );\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nmapX = {h=3, u=0}\r\nmapY = {t=3, i=0}\r\nmapZ = {Alphabet=7, Street=42}\r\nhashX = 224\r\nhashY = 224\r\nhashZ = 177047197\r\n```\r\n\r\nIndeed, both your maps result in the same value returned from `hashCode`: 224. Our third map results in a different hash value: 177,047,197.\r\n\r\nIf you want to know exactly why those particular inputs result in the same hash value, study the [source code from OpenJDK](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java). \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77020612/two-different-hashmap-returning-the-same-hashcode#comment135777759_77020612\r\n  [2]: https://en.wikipedia.org/wiki/Hash_function","title":"Two different HashMap returning the same hashCode","body":"<p>As <a href=\"https://stackoverflow.com/questions/77020612/two-different-hashmap-returning-the-same-hashcode#comment135777759_77020612\">Commented</a>, your statement:</p>\n<blockquote>\n<p>hashCode needs to be different for different objects</p>\n</blockquote>\n<p>is incorrect.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/Hash_function\" rel=\"nofollow noreferrer\">hash function</a> takes an input, and returns a value derived from the input. The returned value is consistent. The same input always returns the same hash value.</p>\n<p>However, two inputs <em>can</em> indeed coincidentally return the same hash value. This is known as a <em>collision</em>. One aspect of a good hash function is that collisions are unlikely. But collisions are always possible. Inputs are infinite but hash values are finite; so obviously collisions <em>must</em> be possible.</p>\n<p>Let's test your assertion your two example maps result in the same hash value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; String, Integer &gt; mapX =\n        new HashMap &lt;&gt; (\n                Map.of (\n                        &quot;u&quot; , 0 ,\n                        &quot;h&quot; , 3\n                )\n        );\n\nMap &lt; String, Integer &gt; mapY =\n        new HashMap &lt;&gt; (\n                Map.of (\n                        &quot;t&quot; , 3 ,\n                        &quot;i&quot; , 0\n                )\n        );\n\nMap &lt; String, Integer &gt; mapZ =\n        new HashMap &lt;&gt; (\n                Map.of (\n                        &quot;Alphabet&quot; , 7 ,\n                        &quot;Street&quot; , 42\n                )\n        );\n\nint hashX = mapX.hashCode ( );\nint hashY = mapY.hashCode ( );\nint hashZ = mapZ.hashCode ( );\n</code></pre>\n<p>Dump to console.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;mapX = &quot; + mapX );\nSystem.out.println ( &quot;mapY = &quot; + mapY );\nSystem.out.println ( &quot;mapZ = &quot; + mapZ );\n\nSystem.out.println ( &quot;hashX = &quot; + hashX );\nSystem.out.println ( &quot;hashY = &quot; + hashY );\nSystem.out.println ( &quot;hashZ = &quot; + hashZ );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mapX = {h=3, u=0}\nmapY = {t=3, i=0}\nmapZ = {Alphabet=7, Street=42}\nhashX = 224\nhashY = 224\nhashZ = 177047197\n</code></pre>\n<p>Indeed, both your maps result in the same value returned from <code>hashCode</code>: 224. Our third map results in a different hash value: 177,047,197.</p>\n<p>If you want to know exactly why those particular inputs result in the same hash value, study the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java\" rel=\"nofollow noreferrer\">source code from OpenJDK</a>.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693555079,"creation_date":1693546385,"answer_id":77020707,"question_id":77020612,"body_markdown":"You are perhaps misunderstanding the point of the `hashCode()` method.\r\n\r\n`hashCode()` is a method that works in tandem with `equals(Object)`:\r\n\r\n* `equals(Object)` is for telling you if two objects are definitely equal\r\n* `hashCode()` if for telling you if two objects are definitely _not_ equal:\r\n  * Two objects with different `hashCode()` values are definitely not equal\r\n  * Two objects with the same `hashCode()` values may be equal\r\n\r\nThis might sound a bit odd: it&#39;s kinda vague to know if things aren&#39;t equal: you have to do something more to determine if they _are_ equal (that is, use the `equals(Object)` method).\r\n\r\nWhat&#39;s the point of having two methods, one vague, one precise, to determine equality?\r\n\r\nLet&#39;s say you&#39;ve got 1000 objects, and you want to know which ones are equal: armed only with the `equals` method, you&#39;ve got to do a pairwise comparison between all of them, so, roughly 500000 comparisons.\r\n\r\nEnter `hashCode()`: you can use the hash of each object to put them into buckets: there&#39;s no point in checking if objects with different hash codes are `equals`, because they won&#39;t be (assuming correct implementation of `hashCode()`). You only have to do 1000 bucket operations.\r\n\r\nMaybe you end up with only one item in each bucket; maybe you end up with 5 things in one bucket; now, you only have to do 12 pairwise comparisons to find which ones are equal.\r\n\r\n`hashCode()` is really an ugly internal implementation detail: it is only present in order to support `HashMap`, `HashTable` etc (as described in the Javadoc).\r\n\r\nYou shouldn&#39;t ever really care about or use its value. All equal objects will have the same value, but some unequal objects will also have the same value. `hashCode()` is a source of bugs because it needs to be implemented consistently with `equals(Object)`, but there is no language-level support to ensure that consistency. In an ideal world, it wouldn&#39;t be visible to us.\r\n\r\nDon&#39;t expect it to have any properties beyond what it&#39;s designed for.","title":"Two different HashMap returning the same hashCode","body":"<p>You are perhaps misunderstanding the point of the <code>hashCode()</code> method.</p>\n<p><code>hashCode()</code> is a method that works in tandem with <code>equals(Object)</code>:</p>\n<ul>\n<li><code>equals(Object)</code> is for telling you if two objects are definitely equal</li>\n<li><code>hashCode()</code> if for telling you if two objects are definitely <em>not</em> equal:\n<ul>\n<li>Two objects with different <code>hashCode()</code> values are definitely not equal</li>\n<li>Two objects with the same <code>hashCode()</code> values may be equal</li>\n</ul>\n</li>\n</ul>\n<p>This might sound a bit odd: it's kinda vague to know if things aren't equal: you have to do something more to determine if they <em>are</em> equal (that is, use the <code>equals(Object)</code> method).</p>\n<p>What's the point of having two methods, one vague, one precise, to determine equality?</p>\n<p>Let's say you've got 1000 objects, and you want to know which ones are equal: armed only with the <code>equals</code> method, you've got to do a pairwise comparison between all of them, so, roughly 500000 comparisons.</p>\n<p>Enter <code>hashCode()</code>: you can use the hash of each object to put them into buckets: there's no point in checking if objects with different hash codes are <code>equals</code>, because they won't be (assuming correct implementation of <code>hashCode()</code>). You only have to do 1000 bucket operations.</p>\n<p>Maybe you end up with only one item in each bucket; maybe you end up with 5 things in one bucket; now, you only have to do 12 pairwise comparisons to find which ones are equal.</p>\n<p><code>hashCode()</code> is really an ugly internal implementation detail: it is only present in order to support <code>HashMap</code>, <code>HashTable</code> etc (as described in the Javadoc).</p>\n<p>You shouldn't ever really care about or use its value. All equal objects will have the same value, but some unequal objects will also have the same value. <code>hashCode()</code> is a source of bugs because it needs to be implemented consistently with <code>equals(Object)</code>, but there is no language-level support to ensure that consistency. In an ideal world, it wouldn't be visible to us.</p>\n<p>Don't expect it to have any properties beyond what it's designed for.</p>\n"}],"owner":{"account_id":20065617,"reputation":11,"user_id":14711352,"display_name":"Anguraj Dinesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693555079,"creation_date":1693544419,"question_id":77020612,"body_markdown":"I have two different sets of HashMap (**{u=0, h=3}** and **{t=3, i=0}**), and it is returning the **same hashCode** (**224**). I don&#39;t understand this, hashCode needs to be different for different objects, and here the HashMap contains different sets of key and value pairs, but it still returns the same hashCode. **Can someone please explain how this works?**\r\n\r\ntrying to get the hashcode of the hashmap in java","title":"Two different HashMap returning the same hashCode","body":"<p>I have two different sets of HashMap (<strong>{u=0, h=3}</strong> and <strong>{t=3, i=0}</strong>), and it is returning the <strong>same hashCode</strong> (<strong>224</strong>). I don't understand this, hashCode needs to be different for different objects, and here the HashMap contains different sets of key and value pairs, but it still returns the same hashCode. <strong>Can someone please explain how this works?</strong></p>\n<p>trying to get the hashcode of the hashmap in java</p>\n"},{"tags":["java","algorithm","statistics"],"comments":[{"owner":{"account_id":61302,"reputation":7370,"user_id":182768,"accept_rate":92,"display_name":"James Goodwin"},"score":2,"creation_date":1261167692,"post_id":1930454,"comment_id":1838835,"body_markdown":"Define &quot;average&quot;, could be mean, median or mode. The last two don&#39;t require you to add up all the values.","body":"Define &quot;average&quot;, could be mean, median or mode. The last two don&#39;t require you to add up all the values."},{"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"score":1,"creation_date":1261168376,"post_id":1930454,"comment_id":1838894,"body_markdown":"I was using it in the vernacular sense, i.e. arithmetic mean.","body":"I was using it in the vernacular sense, i.e. arithmetic mean."},{"owner":{"account_id":18674,"reputation":5411,"user_id":43012,"accept_rate":100,"display_name":"Will Bickford"},"score":14,"creation_date":1261170100,"post_id":1930454,"comment_id":1839082,"body_markdown":"@James Very few people would say &#39;average&#39; when they want the median or the mode.  While I agree it isn&#39;t precise, generally outside of statistics departments most people assume average == mean.","body":"@James Very few people would say &#39;average&#39; when they want the median or the mode.  While I agree it isn&#39;t precise, generally outside of statistics departments most people assume average == mean."},{"owner":{"account_id":35310,"reputation":1041,"user_id":99978,"accept_rate":100,"display_name":"j.p."},"score":5,"creation_date":1261658656,"post_id":1930454,"comment_id":1870802,"body_markdown":"An efficient and numerically stable algorithm for mean and empirical variance you can find at http://www.johndcook.com/standard_deviation.html or for parallel computation in http://infoserve.sandia.gov/sand_doc/2008/086212.pdf","body":"An efficient and numerically stable algorithm for mean and empirical variance you can find at <a href=\"http://www.johndcook.com/standard_deviation.html\" rel=\"nofollow noreferrer\">johndcook.com/standard_deviation.html</a> or for parallel computation in <a href=\"http://infoserve.sandia.gov/sand_doc/2008/086212.pdf\" rel=\"nofollow noreferrer\">infoserve.sandia.gov/sand_doc/2008/086212.pdf</a>"},{"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"score":0,"creation_date":1261817853,"post_id":1930454,"comment_id":1876435,"body_markdown":"@jug, if you had posted this as an answer I would have upvoted you!  Plus I can&#39;t get to your second link, is it broken?","body":"@jug, if you had posted this as an answer I would have upvoted you!  Plus I can&#39;t get to your second link, is it broken?"},{"owner":{"account_id":35310,"reputation":1041,"user_id":99978,"accept_rate":100,"display_name":"j.p."},"score":0,"creation_date":1262019983,"post_id":1930454,"comment_id":1884608,"body_markdown":"@Simon: If I click the second link, then it works for me (it&#39;s a pdf by Phillippe Pebay with the title &quot;Formulas for Robust, One-Pass Parallel Computation of Covariances and Arbitrary-Order Statistical Moments&quot;). You get it also on second place on google&#39;s advanced search with the two words pebay and covariance in the field &quot;all these words&quot;. By the way I used a comment so that the references don&#39;t get buried below all the answers given.","body":"@Simon: If I click the second link, then it works for me (it&#39;s a pdf by Phillippe Pebay with the title &quot;Formulas for Robust, One-Pass Parallel Computation of Covariances and Arbitrary-Order Statistical Moments&quot;). You get it also on second place on google&#39;s advanced search with the two words pebay and covariance in the field &quot;all these words&quot;. By the way I used a comment so that the references don&#39;t get buried below all the answers given."},{"owner":{"account_id":56876,"reputation":44038,"user_id":170352,"accept_rate":94,"display_name":"Brandon Bertelsen"},"score":0,"creation_date":1262152877,"post_id":1930454,"comment_id":1893908,"body_markdown":"How accurate do you have to be? You could divide each number by 10^9, and chop the result to say 4-6 digits (decimal places) - divide by #of values and mutiply again by 10^9.","body":"How accurate do you have to be? You could divide each number by 10^9, and chop the result to say 4-6 digits (decimal places) - divide by #of values and mutiply again by 10^9."}],"answers":[{"tags":[],"owner":{"account_id":30464,"reputation":71749,"user_id":83109,"accept_rate":100,"display_name":"David M"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1261172986,"creation_date":1261167662,"answer_id":1930463,"question_id":1930454,"body_markdown":"You could take the average of averages of equal-sized subsets of numbers that don&#39;t exceed the limit. ","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>You could take the average of averages of equal-sized subsets of numbers that don't exceed the limit. </p>\n"},{"tags":[],"owner":{"account_id":71650,"reputation":4872,"user_id":207223,"display_name":"Alon"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1261167668,"creation_date":1261167668,"answer_id":1930464,"question_id":1930454,"body_markdown":"divide all values by the set size and then sum it up ","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>divide all values by the set size and then sum it up </p>\n"},{"tags":[],"owner":{"account_id":78982,"reputation":59009,"user_id":224346,"display_name":"Anon."},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1261167763,"creation_date":1261167763,"answer_id":1930478,"question_id":1930454,"body_markdown":"Option 1 is to use an arbitrary-precision library so you don&#39;t have an upper-bound.\r\n\r\nOther options (which lose precision) are to sum in groups rather than all at once, or to divide before summing.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Option 1 is to use an arbitrary-precision library so you don't have an upper-bound.</p>\n\n<p>Other options (which lose precision) are to sum in groups rather than all at once, or to divide before summing.</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1261167949,"creation_date":1261167949,"answer_id":1930492,"question_id":1930454,"body_markdown":"Apart from using the better approaches already suggested, you can use &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/math/BigDecimal.html&quot;&gt;BigDecimal&lt;/a&gt; to make your calculations. (Bear in mind it is immutable)","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Apart from using the better approaches already suggested, you can use <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/math/BigDecimal.html\" rel=\"noreferrer\">BigDecimal</a> to make your calculations. (Bear in mind it is immutable)</p>\n"},{"tags":[],"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"down_vote_count":3,"up_vote_count":14,"is_accepted":false,"score":11,"last_activity_date":1261173303,"creation_date":1261168250,"answer_id":1930514,"question_id":1930454,"body_markdown":"IMHO, the most robust way of solving your problem is\r\n\r\n 1. sort your set\r\n 2. split in groups of elements whose sum wouldn&#39;t overflow - since they are sorted, this is fast and easy\r\n 3. do the sum in each group - and divide by the group size\r\n 4. do the sum of the group&#39;s sum&#39;s (possibly calling this same algorithm recursively) - be aware that if the groups will not be equally sized, you&#39;ll have to weight them by their size\r\n\r\nOne nice thing of this approach is that it scales nicely if you have a really large number of elements to sum - and a large number of processors/machines to use to do the math","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>IMHO, the most robust way of solving your problem is</p>\n\n<ol>\n<li>sort your set</li>\n<li>split in groups of elements whose sum wouldn't overflow - since they are sorted, this is fast and easy</li>\n<li>do the sum in each group - and divide by the group size</li>\n<li>do the sum of the group's sum's (possibly calling this same algorithm recursively) - be aware that if the groups will not be equally sized, you'll have to weight them by their size</li>\n</ol>\n\n<p>One nice thing of this approach is that it scales nicely if you have a really large number of elements to sum - and a large number of processors/machines to use to do the math</p>\n"},{"tags":[],"owner":{"account_id":83845,"reputation":33704,"user_id":234815,"display_name":"John Knoeller"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1261170533,"creation_date":1261170533,"answer_id":1930694,"question_id":1930454,"body_markdown":"A double can be divided by a power of 2 without loss of precision. So if your only problem if the absolute size of the sum you could pre-scale your numbers before summing them.  But with a dataset of this size, there is still the risk that you will hit a situation where you are adding small numbers to a large one, and the small numbers will end up being mostly (or completely) ignored. \r\n\r\nfor instance,  when you add  2.2e-20  to 9.0e20 the result is 9.0e20 because once the scales are adjusted so that they numbers can be added together, the smaller number is 0.  Doubles can only hold about 17 digits, and you would need more than 40 digits to add these two numbers together without loss.\r\n\r\nSo, depending on your data set and how many digits of precision you can afford to loose, you may need to do other things.   Breaking the data into sets will help, but a better way to preserve precision might be to determine a rough average (you may already know this number).  then subtract each value from the rough average before you sum it.  That way you are summing the distances from the average, so your sum should never get very large.  \r\n\r\nThen you take the average delta, and add it to your rough sum to get the correct average.  Keeping track of the min and max delta will also tell you how much precision you lost during the summing process.  If you have lots of time and need a very accurate result, you can iterate.\r\n\r\n\r\n\r\n\r\n\r\n","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>A double can be divided by a power of 2 without loss of precision. So if your only problem if the absolute size of the sum you could pre-scale your numbers before summing them.  But with a dataset of this size, there is still the risk that you will hit a situation where you are adding small numbers to a large one, and the small numbers will end up being mostly (or completely) ignored. </p>\n\n<p>for instance,  when you add  2.2e-20  to 9.0e20 the result is 9.0e20 because once the scales are adjusted so that they numbers can be added together, the smaller number is 0.  Doubles can only hold about 17 digits, and you would need more than 40 digits to add these two numbers together without loss.</p>\n\n<p>So, depending on your data set and how many digits of precision you can afford to loose, you may need to do other things.   Breaking the data into sets will help, but a better way to preserve precision might be to determine a rough average (you may already know this number).  then subtract each value from the rough average before you sum it.  That way you are summing the distances from the average, so your sum should never get very large.  </p>\n\n<p>Then you take the average delta, and add it to your rough sum to get the correct average.  Keeping track of the min and max delta will also tell you how much precision you lost during the summing process.  If you have lots of time and need a very accurate result, you can iterate.</p>\n"},{"tags":[],"owner":{"account_id":213,"reputation":383039,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"down_vote_count":6,"up_vote_count":18,"is_accepted":false,"score":12,"last_activity_date":1261171634,"creation_date":1261170784,"answer_id":1930714,"question_id":1930454,"body_markdown":"The very first issue I&#39;d like to ask you is this:\r\n\r\n* Do you know the number of values beforehand?\r\n\r\nIf not, then you have little choice but to sum, and count, and divide, to do the average. If `Double` isn&#39;t high enough precision to handle this, then tough luck, you can&#39;t use `Double`, you need to find a data type that can handle it.\r\n\r\nIf, on the other hand, you *do* know the number of values beforehand, you can look at what you&#39;re really doing and change *how* you do it, but keep the overall result.\r\n\r\nThe average of N values, stored in some collection A, is this:\r\n\r\n    A[0]   A[1]   A[2]   A[3]          A[N-1]   A[N]\r\n    ---- + ---- + ---- + ---- + .... + ------ + ----\r\n     N      N      N      N               N       N\r\n\r\nTo calculate subsets of this result, you can split up the calculation into equally sized sets, so you can do this, for 3-valued sets (assuming the number of values is divisable by 3, otherwise you need a different divisor)\r\n\r\n    / A[0]   A[1]   A[2] \\   / A[3]   A[4]   A[5] \\   //      A[N-1]   A[N] \\\r\n    | ---- + ---- + ---- |   | ---- + ---- + ---- |   \\\\    + ------ + ---- |\r\n    \\  3      3      3   /   \\  3      3      3   /   //        3       3   /\r\n     --------------------- +  --------------------  + \\\\      --------------\r\n              N                        N                        N\r\n             ---                      ---                      ---\r\n              3                        3                        3\r\n\r\nNote that you need **equally sized sets**, otherwise numbers in the last set, which will not have enough values compared to all the sets before it, will have a higher impact on the final result.\r\n\r\nConsider the numbers 1-7 in sequence, if you pick a set-size of 3, you&#39;ll get this result:\r\n\r\n    / 1   2   3 \\   / 4   5   6 \\   / 7 \\ \r\n    | - + - + - | + | - + - + - | + | - |\r\n    \\ 3   3   3 /   \\ 3   3   3 /   \\ 3 /\r\n     -----------     -----------     ---\r\n          y               y           y\r\n\r\nwhich gives:\r\n\r\n         2   5   7/3\r\n         - + - + ---\r\n         y   y    y\r\n\r\nIf y is 3 for all the sets, you get this:\r\n\r\n         2   5   7/3\r\n         - + - + ---\r\n         3   3    3\r\n\r\nwhich gives:\r\n\r\n    2*3   5*3    7\r\n    --- + --- + ---\r\n     9     9     9\r\n\r\nwhich is:\r\n\r\n    6   15   7\r\n    - + -- + -\r\n    9    9   9\r\n\r\nwhich totals:\r\n\r\n    28\r\n    -- ~ 3,1111111111111111111111.........1111111.........\r\n     9\r\n\r\nThe average of 1-7, is 4. Obviously this won&#39;t work. Note that if you do the above exercise with the numbers 1, 2, 3, 4, 5, 6, 7, 0, 0 (note the two zeroes at the end there), then you&#39;ll get the above result.\r\n\r\nIn other words, if you can&#39;t split the number of values up into equally sized sets, the last set will be counted as though it has the same number of values as all the sets preceeding it, but it will be padded with zeroes for all the missing values.\r\n\r\nSo, **you need equally sized sets**. Tough luck if your original input set consists of a prime number of values.\r\n\r\nWhat I&#39;m worried about here though is loss of precision. I&#39;m not entirely sure `Double` will give you good enough precision in such a case, if it initially cannot hold the entire sum of the values.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>The very first issue I'd like to ask you is this:</p>\n\n<ul>\n<li>Do you know the number of values beforehand?</li>\n</ul>\n\n<p>If not, then you have little choice but to sum, and count, and divide, to do the average. If <code>Double</code> isn't high enough precision to handle this, then tough luck, you can't use <code>Double</code>, you need to find a data type that can handle it.</p>\n\n<p>If, on the other hand, you <em>do</em> know the number of values beforehand, you can look at what you're really doing and change <em>how</em> you do it, but keep the overall result.</p>\n\n<p>The average of N values, stored in some collection A, is this:</p>\n\n<pre><code>A[0]   A[1]   A[2]   A[3]          A[N-1]   A[N]\n---- + ---- + ---- + ---- + .... + ------ + ----\n N      N      N      N               N       N\n</code></pre>\n\n<p>To calculate subsets of this result, you can split up the calculation into equally sized sets, so you can do this, for 3-valued sets (assuming the number of values is divisable by 3, otherwise you need a different divisor)</p>\n\n<pre><code>/ A[0]   A[1]   A[2] \\   / A[3]   A[4]   A[5] \\   //      A[N-1]   A[N] \\\n| ---- + ---- + ---- |   | ---- + ---- + ---- |   \\\\    + ------ + ---- |\n\\  3      3      3   /   \\  3      3      3   /   //        3       3   /\n --------------------- +  --------------------  + \\\\      --------------\n          N                        N                        N\n         ---                      ---                      ---\n          3                        3                        3\n</code></pre>\n\n<p>Note that you need <strong>equally sized sets</strong>, otherwise numbers in the last set, which will not have enough values compared to all the sets before it, will have a higher impact on the final result.</p>\n\n<p>Consider the numbers 1-7 in sequence, if you pick a set-size of 3, you'll get this result:</p>\n\n<pre><code>/ 1   2   3 \\   / 4   5   6 \\   / 7 \\ \n| - + - + - | + | - + - + - | + | - |\n\\ 3   3   3 /   \\ 3   3   3 /   \\ 3 /\n -----------     -----------     ---\n      y               y           y\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>     2   5   7/3\n     - + - + ---\n     y   y    y\n</code></pre>\n\n<p>If y is 3 for all the sets, you get this:</p>\n\n<pre><code>     2   5   7/3\n     - + - + ---\n     3   3    3\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>2*3   5*3    7\n--- + --- + ---\n 9     9     9\n</code></pre>\n\n<p>which is:</p>\n\n<pre><code>6   15   7\n- + -- + -\n9    9   9\n</code></pre>\n\n<p>which totals:</p>\n\n<pre><code>28\n-- ~ 3,1111111111111111111111.........1111111.........\n 9\n</code></pre>\n\n<p>The average of 1-7, is 4. Obviously this won't work. Note that if you do the above exercise with the numbers 1, 2, 3, 4, 5, 6, 7, 0, 0 (note the two zeroes at the end there), then you'll get the above result.</p>\n\n<p>In other words, if you can't split the number of values up into equally sized sets, the last set will be counted as though it has the same number of values as all the sets preceeding it, but it will be padded with zeroes for all the missing values.</p>\n\n<p>So, <strong>you need equally sized sets</strong>. Tough luck if your original input set consists of a prime number of values.</p>\n\n<p>What I'm worried about here though is loss of precision. I'm not entirely sure <code>Double</code> will give you good enough precision in such a case, if it initially cannot hold the entire sum of the values.</p>\n"},{"tags":[],"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1261171237,"creation_date":1261171237,"answer_id":1930748,"question_id":1930454,"body_markdown":"Check out the section for [cummulative moving average][1]\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Moving_average","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Check out the section for <a href=\"http://en.wikipedia.org/wiki/Moving_average\" rel=\"nofollow noreferrer\">cummulative moving average</a></p>\n"},{"tags":[],"owner":{"account_id":56079,"reputation":7550,"user_id":167973,"accept_rate":82,"display_name":"Carl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1261173667,"creation_date":1261173667,"answer_id":1930913,"question_id":1930454,"body_markdown":"So I don&#39;t repeat myself so much, let me state that I am assuming that the list of numbers is normally distributed, and that you can sum many numbers before you overflow.  The technique still works for non-normal distros, but somethings will not meet the expectations I describe below.\r\n\r\n--\r\n\r\nSum up a sub-series, keeping track of how many numbers you eat, until you approach the overflow, then take the average.  This will give you an average a0, and count n0.  Repeat until you exhaust the list.  Now you should have many ai, ni.\r\n\r\nEach ai and ni should be relatively close, with the possible exception of the last bite of the list.  You can mitigate that by under-biting near the end of the list.\r\n\r\nYou can combine any subset of these ai, ni by picking any ni in the subset (call it np) and dividing all the ni in the subset by that value.  The max size of the subsets to combine is the roughly constant value of the n&#39;s.\r\n\r\nThe ni/np should be close to one.  Now sum ni/np * ai and multiple by np/(sum ni), keeping track of sum ni.  This gives you a new ni, ai combination, if you need to repeat the procedure.\r\n\r\nIf you will need to repeat (i.e., the number of ai, ni pairs is much larger than the typical ni), try to keep relative n sizes constant by combining all the averages at one n level first, then combining at the next level, and so on.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>So I don't repeat myself so much, let me state that I am assuming that the list of numbers is normally distributed, and that you can sum many numbers before you overflow.  The technique still works for non-normal distros, but somethings will not meet the expectations I describe below.</p>\n\n<p>--</p>\n\n<p>Sum up a sub-series, keeping track of how many numbers you eat, until you approach the overflow, then take the average.  This will give you an average a0, and count n0.  Repeat until you exhaust the list.  Now you should have many ai, ni.</p>\n\n<p>Each ai and ni should be relatively close, with the possible exception of the last bite of the list.  You can mitigate that by under-biting near the end of the list.</p>\n\n<p>You can combine any subset of these ai, ni by picking any ni in the subset (call it np) and dividing all the ni in the subset by that value.  The max size of the subsets to combine is the roughly constant value of the n's.</p>\n\n<p>The ni/np should be close to one.  Now sum ni/np * ai and multiple by np/(sum ni), keeping track of sum ni.  This gives you a new ni, ai combination, if you need to repeat the procedure.</p>\n\n<p>If you will need to repeat (i.e., the number of ai, ni pairs is much larger than the typical ni), try to keep relative n sizes constant by combining all the averages at one n level first, then combining at the next level, and so on.</p>\n"},{"tags":[],"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1261800728,"creation_date":1261198226,"answer_id":1931999,"question_id":1930454,"body_markdown":"A random sampling of a small set of the full dataset will often result in a &#39;good enough&#39; solution.  You obviously have to make this determination yourself based on system requirements.  Sample size can be remarkably small and still obtain reasonably good answers.  This can be adaptively computed by calculating the average of an increasing number of randomly chosen  samples - the average will converge within some interval.\r\n\r\nSampling not only addresses the double overflow concern, but is much, much faster.  Not applicable for all problems, but certainly useful for many problems.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>A random sampling of a small set of the full dataset will often result in a 'good enough' solution.  You obviously have to make this determination yourself based on system requirements.  Sample size can be remarkably small and still obtain reasonably good answers.  This can be adaptively computed by calculating the average of an increasing number of randomly chosen  samples - the average will converge within some interval.</p>\n\n<p>Sampling not only addresses the double overflow concern, but is much, much faster.  Not applicable for all problems, but certainly useful for many problems.</p>\n"},{"tags":[],"owner":{"account_id":16612,"reputation":29113,"user_id":36388,"accept_rate":91,"display_name":"P Daddy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1261242174,"creation_date":1261242174,"answer_id":1933470,"question_id":1930454,"body_markdown":"I posted [an answer][a] to [a question][q] spawned from this one, realizing afterwards that my answer is better suited to this question than to that one.  I&#39;ve reproduced it below.  I notice though, that my answer is similar to a combination of [Bozho&#39;s][Bozho] and [Anon&lt;sub&gt;&lt;sup&gt;.&lt;/sup&gt;&lt;/sub&gt;&#39;s][Anon.].\r\n\r\nAs the other question was tagged language-agnostic, I chose C# for the code sample I&#39;ve included.  Its relative ease of use and easy-to-follow syntax, along with its inclusion of a couple of features facilitating this routine (a DivRem function in the BCL, and support for iterator functions), as well as my own familiarity with it, made it a good choice for this problem.  Since the OP here is interested in a Java solution, but I&#39;m not Java-fluent enough to write it effectively, it might be nice if someone could add a translation of this code to Java.\r\n\r\n---------------------------------------------------------\r\n\r\nSome of the mathematical solutions here are very good.  Here&#39;s a simple technical solution.\r\n\r\nUse a larger data type.  This breaks down into two possibilities:\r\n\r\n1. Use a high-precision floating point library.  One who encounters a need to average a billion numbers probably has the resources to purchase, or the brain power to write, a 128-bit (or longer) floating point library.\r\n\r\n   I understand the drawbacks here.  It would certainly be slower than using intrinsic types. You still might over/underflow if the number of values grows too high.  Yada yada.\r\n\r\n2. If your values are integers or can be easily scaled to integers, keep your sum in a list of integers.  When you overflow, simply add another integer.  This is essentially a simplified implementation of the first option.  A simple &lt;s&gt;(untested)&lt;/s&gt; example in C# follows\r\n\r\n&lt;b&gt;&lt;/b&gt;\r\n\r\n    class BigMeanSet{\r\n        List&lt;uint&gt; list = new List&lt;uint&gt;();\r\n\r\n        public double GetAverage(IEnumerable&lt;uint&gt; values){\r\n            list.Clear();\r\n            list.Add(0);\r\n\r\n            uint count = 0;\r\n\r\n            foreach(uint value in values){\r\n                Add(0, value);\r\n                count++;\r\n            }\r\n\r\n            return DivideBy(count);\r\n        }\r\n\r\n        void Add(int listIndex, uint value){\r\n            if((list[listIndex] += value) &lt; value){ // then overflow has ocurred\r\n                if(list.Count == listIndex + 1)\r\n                    list.Add(0);\r\n                Add(listIndex + 1, 1);\r\n            }\r\n        }\r\n\r\n        double DivideBy(uint count){\r\n            const double shift = 4.0 * 1024 * 1024 * 1024;\r\n\r\n            double rtn       = 0;\r\n            long   remainder = 0;\r\n\r\n            for(int i = list.Count - 1; i &gt;= 0; i--){\r\n                rtn *= shift;\r\n                remainder &lt;&lt;= 32;\r\n                rtn += Math.DivRem(remainder + list[i], count, out remainder);\r\n            }\r\n\r\n            rtn += remainder / (double)count;\r\n\r\n            return rtn;\r\n        }\r\n    }\r\n\r\n&lt;s&gt;Like I said, this is untested—I don&#39;t have a billion values I really want to average—so I&#39;ve probably made a mistake or two, especially in the `DivideBy` function, but it should demonstrate the general idea.&lt;/s&gt;\r\n\r\nThis should provide as much accuracy as a double can represent and should work for any number of 32-bit elements, up to 2&lt;sup&gt;32&lt;/sup&gt; - 1.  If more elements are needed, then the `count` variable will need be expanded and the `DivideBy` function will increase in complexity, but I&#39;ll leave that as an exercise for the reader.\r\n\r\nIn terms of efficiency, it should be as fast or faster than any other technique here, as it only requires iterating through the list once, only performs one division operation (well, one set of them), and does most of its work with integers.  I didn&#39;t optimize it, though, and I&#39;m pretty certain it could be made slightly faster still if necessary.  Ditching the recursive function call and list indexing would be a good start.  Again, an exercise for the reader.  The code is intended to be easy to understand.\r\n\r\n&lt;s&gt;If anybody more motivated than I am at the moment feels like verifying the correctness of the code, and fixing whatever problems there might be, please be my guest.&lt;/s&gt;\r\n\r\n-----------------------------------------\r\n\r\nI&#39;ve now tested this code, and made a couple of small corrections (a missing pair of parentheses in the `List&lt;uint&gt;` constructor call, and an incorrect divisor in the final division of the `DivideBy` function).\r\n\r\nI tested it by first running it through 1000 sets of random length (ranging between 1 and 1000) filled with random integers (ranging between 0 and 2&lt;sup&gt;32&lt;/sup&gt; - 1).  These were sets for which I could easily and quickly verify accuracy by also running a canonical mean on them.\r\n\r\nI then tested with 100&lt;sup&gt;*&lt;/sup&gt; large series, with random length between 10&lt;sup&gt;5&lt;/sup&gt; and 10&lt;sup&gt;9&lt;/sup&gt;.  The lower and upper bounds of these series were also chosen at random, constrained so that the series would fit within the range of a 32-bit integer.  For any series, the results are easily verifiable as `(lowerbound + upperbound) / 2`.\r\n\r\n&lt;sup&gt;&lt;sub&gt;&lt;sup&gt;*&lt;/sup&gt;Okay, that&#39;s a little white lie.  I aborted the large-series test after about 20 or 30 successful runs.  A series of length 10&lt;sup&gt;9&lt;/sup&gt; takes just under a minute and a half to run on my machine, so half an hour or so of testing this routine was enough for my tastes.&lt;/sub&gt;&lt;/sup&gt;\r\n\r\nFor those interested, my test code is below:\r\n\r\n    static IEnumerable&lt;uint&gt; GetSeries(uint lowerbound, uint upperbound){\r\n        for(uint i = lowerbound; i &lt;= upperbound; i++)\r\n            yield return i;\r\n    }\r\n\r\n    static void Test(){\r\n        Console.BufferHeight = 1200;\r\n        Random rnd = new Random();\r\n\r\n        for(int i = 0; i &lt; 1000; i++){\r\n            uint[] numbers = new uint[rnd.Next(1, 1000)];\r\n            for(int j = 0; j &lt; numbers.Length; j++)\r\n                numbers[j] = (uint)rnd.Next();\r\n\r\n            double sum = 0;\r\n            foreach(uint n in numbers)\r\n                sum += n;\r\n\r\n            double avg = sum / numbers.Length;\r\n            double ans = new BigMeanSet().GetAverage(numbers);\r\n\r\n            Console.WriteLine(&quot;{0}: {1} - {2} = {3}&quot;, numbers.Length, avg, ans, avg - ans);\r\n\r\n            if(avg != ans)\r\n                Debugger.Break();\r\n        }\r\n\r\n        for(int i = 0; i &lt; 100; i++){\r\n            uint length     = (uint)rnd.Next(100000, 1000000001);\r\n            uint lowerbound = (uint)rnd.Next(int.MaxValue - (int)length);\r\n            uint upperbound = lowerbound + length;\r\n\r\n            double avg = ((double)lowerbound + upperbound) / 2;\r\n            double ans = new BigMeanSet().GetAverage(GetSeries(lowerbound, upperbound));\r\n\r\n            Console.WriteLine(&quot;{0}: {1} - {2} = {3}&quot;, length, avg, ans, avg - ans);\r\n\r\n            if(avg != ans)\r\n                Debugger.Break();\r\n        }\r\n    }\r\n\r\n\r\n[a]: https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/1931759#1931759\r\n[q]: https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/\r\n[Bozho]: https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930492#1930492\r\n[Anon.]: https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930478#1930478","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>I posted <a href=\"https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/1931759#1931759\">an answer</a> to <a href=\"https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/\">a question</a> spawned from this one, realizing afterwards that my answer is better suited to this question than to that one.  I've reproduced it below.  I notice though, that my answer is similar to a combination of <a href=\"https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930492#1930492\">Bozho's</a> and <a href=\"https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930478#1930478\">Anon<sub><sup>.</sup></sub>'s</a>.</p>\n\n<p>As the other question was tagged language-agnostic, I chose C# for the code sample I've included.  Its relative ease of use and easy-to-follow syntax, along with its inclusion of a couple of features facilitating this routine (a DivRem function in the BCL, and support for iterator functions), as well as my own familiarity with it, made it a good choice for this problem.  Since the OP here is interested in a Java solution, but I'm not Java-fluent enough to write it effectively, it might be nice if someone could add a translation of this code to Java.</p>\n\n<hr>\n\n<p>Some of the mathematical solutions here are very good.  Here's a simple technical solution.</p>\n\n<p>Use a larger data type.  This breaks down into two possibilities:</p>\n\n<ol>\n<li><p>Use a high-precision floating point library.  One who encounters a need to average a billion numbers probably has the resources to purchase, or the brain power to write, a 128-bit (or longer) floating point library.</p>\n\n<p>I understand the drawbacks here.  It would certainly be slower than using intrinsic types. You still might over/underflow if the number of values grows too high.  Yada yada.</p></li>\n<li><p>If your values are integers or can be easily scaled to integers, keep your sum in a list of integers.  When you overflow, simply add another integer.  This is essentially a simplified implementation of the first option.  A simple <s>(untested)</s> example in C# follows</p></li>\n</ol>\n\n<p><b></b></p>\n\n<pre><code>class BigMeanSet{\n    List&lt;uint&gt; list = new List&lt;uint&gt;();\n\n    public double GetAverage(IEnumerable&lt;uint&gt; values){\n        list.Clear();\n        list.Add(0);\n\n        uint count = 0;\n\n        foreach(uint value in values){\n            Add(0, value);\n            count++;\n        }\n\n        return DivideBy(count);\n    }\n\n    void Add(int listIndex, uint value){\n        if((list[listIndex] += value) &lt; value){ // then overflow has ocurred\n            if(list.Count == listIndex + 1)\n                list.Add(0);\n            Add(listIndex + 1, 1);\n        }\n    }\n\n    double DivideBy(uint count){\n        const double shift = 4.0 * 1024 * 1024 * 1024;\n\n        double rtn       = 0;\n        long   remainder = 0;\n\n        for(int i = list.Count - 1; i &gt;= 0; i--){\n            rtn *= shift;\n            remainder &lt;&lt;= 32;\n            rtn += Math.DivRem(remainder + list[i], count, out remainder);\n        }\n\n        rtn += remainder / (double)count;\n\n        return rtn;\n    }\n}\n</code></pre>\n\n<p><s>Like I said, this is untested—I don't have a billion values I really want to average—so I've probably made a mistake or two, especially in the <code>DivideBy</code> function, but it should demonstrate the general idea.</s></p>\n\n<p>This should provide as much accuracy as a double can represent and should work for any number of 32-bit elements, up to 2<sup>32</sup> - 1.  If more elements are needed, then the <code>count</code> variable will need be expanded and the <code>DivideBy</code> function will increase in complexity, but I'll leave that as an exercise for the reader.</p>\n\n<p>In terms of efficiency, it should be as fast or faster than any other technique here, as it only requires iterating through the list once, only performs one division operation (well, one set of them), and does most of its work with integers.  I didn't optimize it, though, and I'm pretty certain it could be made slightly faster still if necessary.  Ditching the recursive function call and list indexing would be a good start.  Again, an exercise for the reader.  The code is intended to be easy to understand.</p>\n\n<p><s>If anybody more motivated than I am at the moment feels like verifying the correctness of the code, and fixing whatever problems there might be, please be my guest.</s></p>\n\n<hr>\n\n<p>I've now tested this code, and made a couple of small corrections (a missing pair of parentheses in the <code>List&lt;uint&gt;</code> constructor call, and an incorrect divisor in the final division of the <code>DivideBy</code> function).</p>\n\n<p>I tested it by first running it through 1000 sets of random length (ranging between 1 and 1000) filled with random integers (ranging between 0 and 2<sup>32</sup> - 1).  These were sets for which I could easily and quickly verify accuracy by also running a canonical mean on them.</p>\n\n<p>I then tested with 100<sup>*</sup> large series, with random length between 10<sup>5</sup> and 10<sup>9</sup>.  The lower and upper bounds of these series were also chosen at random, constrained so that the series would fit within the range of a 32-bit integer.  For any series, the results are easily verifiable as <code>(lowerbound + upperbound) / 2</code>.</p>\n\n<p><sup><sub><sup>*</sup>Okay, that's a little white lie.  I aborted the large-series test after about 20 or 30 successful runs.  A series of length 10<sup>9</sup> takes just under a minute and a half to run on my machine, so half an hour or so of testing this routine was enough for my tastes.</sub></sup></p>\n\n<p>For those interested, my test code is below:</p>\n\n<pre><code>static IEnumerable&lt;uint&gt; GetSeries(uint lowerbound, uint upperbound){\n    for(uint i = lowerbound; i &lt;= upperbound; i++)\n        yield return i;\n}\n\nstatic void Test(){\n    Console.BufferHeight = 1200;\n    Random rnd = new Random();\n\n    for(int i = 0; i &lt; 1000; i++){\n        uint[] numbers = new uint[rnd.Next(1, 1000)];\n        for(int j = 0; j &lt; numbers.Length; j++)\n            numbers[j] = (uint)rnd.Next();\n\n        double sum = 0;\n        foreach(uint n in numbers)\n            sum += n;\n\n        double avg = sum / numbers.Length;\n        double ans = new BigMeanSet().GetAverage(numbers);\n\n        Console.WriteLine(\"{0}: {1} - {2} = {3}\", numbers.Length, avg, ans, avg - ans);\n\n        if(avg != ans)\n            Debugger.Break();\n    }\n\n    for(int i = 0; i &lt; 100; i++){\n        uint length     = (uint)rnd.Next(100000, 1000000001);\n        uint lowerbound = (uint)rnd.Next(int.MaxValue - (int)length);\n        uint upperbound = lowerbound + length;\n\n        double avg = ((double)lowerbound + upperbound) / 2;\n        double ans = new BigMeanSet().GetAverage(GetSeries(lowerbound, upperbound));\n\n        Console.WriteLine(\"{0}: {1} - {2} = {3}\", length, avg, ans, avg - ans);\n\n        if(avg != ans)\n            Debugger.Break();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4495,"reputation":335853,"user_id":6782,"accept_rate":78,"display_name":"Alnitak"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1261262705,"creation_date":1261243134,"answer_id":1933544,"question_id":1930454,"body_markdown":"Please clarify the potential ranges of the values.\r\n\r\nGiven that a double has a range ~= +/-10^308, and you&#39;re summing 10^9 values, the apparent range suggested in your question is values of the order of 10^299.\r\n\r\nThat seems somewhat, well, unlikely...\r\n\r\nIf your values really _are_ that large, then with a normal double you&#39;ve got only 17 significant decimal digits to play with, so you&#39;ll be throwing away about 280 digits worth of information before you can even think about averaging the values.\r\n\r\nI would also note (since no-one else has) that for any set of numbers `X`:\r\n\r\n    mean(X) = sum(X[i] - c)  +  c\r\n              -------------\r\n                    N\r\n\r\nfor any arbitrary constant `c`.\r\n\r\nIn this particular problem, setting `c = min(X)` _might_ dramatically reduce the risk of overflow during the summation.\r\n\r\nMay I humbly suggest that the problem statement is incomplete...?","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Please clarify the potential ranges of the values.</p>\n\n<p>Given that a double has a range ~= +/-10^308, and you're summing 10^9 values, the apparent range suggested in your question is values of the order of 10^299.</p>\n\n<p>That seems somewhat, well, unlikely...</p>\n\n<p>If your values really <em>are</em> that large, then with a normal double you've got only 17 significant decimal digits to play with, so you'll be throwing away about 280 digits worth of information before you can even think about averaging the values.</p>\n\n<p>I would also note (since no-one else has) that for any set of numbers <code>X</code>:</p>\n\n<pre><code>mean(X) = sum(X[i] - c)  +  c\n          -------------\n                N\n</code></pre>\n\n<p>for any arbitrary constant <code>c</code>.</p>\n\n<p>In this particular problem, setting <code>c = min(X)</code> <em>might</em> dramatically reduce the risk of overflow during the summation.</p>\n\n<p>May I humbly suggest that the problem statement is incomplete...?</p>\n"},{"tags":[],"owner":{"account_id":12436,"reputation":27545,"user_id":24468,"accept_rate":100,"display_name":"akuhn"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1261259498,"creation_date":1261250014,"answer_id":1933869,"question_id":1930454,"body_markdown":"First of all, make yourself familiar with the internal representation of `double` values. Wikipedia should be a good starting point.\r\n\r\nThen, consider that doubles are expressed as &quot;value plus exponent&quot; where exponent is a power of two. The limit of the largest double value is an upper limit of the exponent, and not a limit of the value! So you may divide all large input numbers by a large enough power of two. This should be safe for all large enough numbers. You can re-multiply the result with the factor to check whether you lost precision with the multiplication.\r\n\r\nHere we go with an algorithm\r\n\r\n    public static double sum(double[] numbers) { \r\n      double eachSum, tempSum;\r\n      double factor = Math.pow(2.0,30); // about as large as 10^9\r\n      for (double each: numbers) {\r\n        double temp = each / factor;\r\n        if (t * factor != each) {\r\n          eachSum += each;\r\n        else {\r\n          tempSum += temp;\r\n        }\r\n      }\r\n      return (tempSum / numbers.length) * factor + (eachSum / numbers.length);\r\n    }\r\n\r\nand dont be worried by the additional division and multiplication. The FPU will optimize the hell out of them since they are done with a power of two (for comparison imagine adding and removing digits at the end of a decimal numbers).\r\n\r\n&amp;nbsp;\r\n\r\nPS: *in addition, you may want to use [Kahan summation](http://en.wikipedia.org/wiki/Kahan_summation_algorithm) to improve the precision. Kahan summation avoids loss of precision when very large and very small numbers are summed up.*","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>First of all, make yourself familiar with the internal representation of <code>double</code> values. Wikipedia should be a good starting point.</p>\n\n<p>Then, consider that doubles are expressed as \"value plus exponent\" where exponent is a power of two. The limit of the largest double value is an upper limit of the exponent, and not a limit of the value! So you may divide all large input numbers by a large enough power of two. This should be safe for all large enough numbers. You can re-multiply the result with the factor to check whether you lost precision with the multiplication.</p>\n\n<p>Here we go with an algorithm</p>\n\n<pre><code>public static double sum(double[] numbers) { \n  double eachSum, tempSum;\n  double factor = Math.pow(2.0,30); // about as large as 10^9\n  for (double each: numbers) {\n    double temp = each / factor;\n    if (t * factor != each) {\n      eachSum += each;\n    else {\n      tempSum += temp;\n    }\n  }\n  return (tempSum / numbers.length) * factor + (eachSum / numbers.length);\n}\n</code></pre>\n\n<p>and dont be worried by the additional division and multiplication. The FPU will optimize the hell out of them since they are done with a power of two (for comparison imagine adding and removing digits at the end of a decimal numbers).</p>\n\n<p>&nbsp;</p>\n\n<p>PS: <em>in addition, you may want to use <a href=\"http://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation</a> to improve the precision. Kahan summation avoids loss of precision when very large and very small numbers are summed up.</em></p>\n"},{"tags":[],"owner":{"account_id":20245,"reputation":17785,"user_id":48181,"accept_rate":100,"display_name":"martinus"},"down_vote_count":0,"up_vote_count":218,"is_accepted":true,"score":218,"last_activity_date":1441922082,"creation_date":1261260495,"answer_id":1934266,"question_id":1930454,"body_markdown":"You can [calculate the mean iteratively][1]. This algorithm is simple, fast, you have to process each value just once, and the variables never get larger than the largest value in the set, so you won&#39;t get an overflow.\r\n\r\n    double mean(double[] ary) {\r\n      double avg = 0;\r\n      int t = 1;\r\n      for (double x : ary) {\r\n        avg += (x - avg) / t;\r\n        ++t;\r\n      }\r\n      return avg;\r\n    }\r\n\r\nInside the loop `avg` always is the average value of all values processed so far. In other words, if all the values are finite you should not get an overflow.\r\n\r\n  [1]: http://www.heikohoffmann.de/htmlthesis/node134.html\r\n\r\n","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>You can <a href=\"http://www.heikohoffmann.de/htmlthesis/node134.html\" rel=\"noreferrer\">calculate the mean iteratively</a>. This algorithm is simple, fast, you have to process each value just once, and the variables never get larger than the largest value in the set, so you won't get an overflow.</p>\n\n<pre><code>double mean(double[] ary) {\n  double avg = 0;\n  int t = 1;\n  for (double x : ary) {\n    avg += (x - avg) / t;\n    ++t;\n  }\n  return avg;\n}\n</code></pre>\n\n<p>Inside the loop <code>avg</code> always is the average value of all values processed so far. In other words, if all the values are finite you should not get an overflow.</p>\n"},{"tags":[],"owner":{"account_id":36964,"reputation":126505,"user_id":105570,"accept_rate":67,"display_name":"Dan Tao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1261265008,"creation_date":1261264664,"answer_id":1934431,"question_id":1930454,"body_markdown":"Consider this:\r\n\r\n    avg(n1)         : n1                               = a1\r\n    avg(n1, n2)     : ((1/2)*n1)+((1/2)*n2)            = ((1/2)*a1)+((1/2)*n2) = a2\r\n    avg(n1, n2, n3) : ((1/3)*n1)+((1/3)*n2)+((1/3)*n3) = ((2/3)*a2)+((1/3)*n3) = a3\r\n\r\nSo for any set of doubles of arbitrary size, you could do this (this is in C#, but I&#39;m pretty sure it could be easily translated to Java):\r\n\r\n    static double GetAverage(IEnumerable&lt;double&gt; values) {\r\n        int i = 0;\r\n        double avg = 0.0;\r\n        foreach (double value in values) {\r\n            avg = (((double)i / (double)(i + 1)) * avg) + ((1.0 / (double)(i + 1)) * value);\r\n            i++;\r\n        }\r\n        \r\n        return avg;\r\n    }\r\n\r\nActually, this simplifies nicely into (already provided by martinus):\r\n\r\n    static double GetAverage(IEnumerable&lt;double&gt; values) {\r\n        int i = 1;\r\n        double avg = 0.0;\r\n        foreach (double value in values) {\r\n            avg += (value - avg) / (i++);\r\n        }\r\n\r\n        return avg;\r\n    }\r\n\r\nI wrote a quick test to try this function out against the more conventional method of summing up the values and dividing by the count (`GetAverage_old`). For my input I wrote this quick function to return as many random positive doubles as desired:\r\n\r\n    static IEnumerable&lt;double&gt; GetRandomDoubles(long numValues, double maxValue, int seed) {\r\n        Random r = new Random(seed);\r\n        for (long i = 0L; i &lt; numValues; i++)\r\n            yield return r.NextDouble() * maxValue;\r\n\r\n        yield break;\r\n    }\r\n\r\nAnd here are the results of a few test trials:\r\n\r\n    long N = 100L;\r\n    double max = double.MaxValue * 0.01;\r\n\r\n    IEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\r\n    double oldWay = GetAverage_old(doubles); // 1.00535024998431E+306\r\n    double newWay = GetAverage(doubles); // 1.00535024998431E+306\r\n\r\n    doubles = GetRandomDoubles(N, max, 1);\r\n    oldWay = GetAverage_old(doubles); // 8.75142021696299E+305\r\n    newWay = GetAverage(doubles); // 8.75142021696299E+305\r\n\r\n    doubles = GetRandomDoubles(N, max, 2);\r\n    oldWay = GetAverage_old(doubles); // 8.70772312848651E+305\r\n    newWay = GetAverage(doubles); // 8.70772312848651E+305\r\n\r\nOK, but what about for 10^9 values?\r\n\r\n    long N = 1000000000;\r\n    double max = 100.0; // we start small, to verify accuracy\r\n    \r\n    IEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\r\n    double oldWay = GetAverage_old(doubles); // 49.9994879713857\r\n    double newWay = GetAverage(doubles); // 49.9994879713868 -- pretty close\r\n    \r\n    max = double.MaxValue * 0.001; // now let&#39;s try something enormous\r\n\r\n    doubles = GetRandomDoubles(N, max, 0);\r\n    oldWay = GetAverage_old(doubles); // Infinity\r\n    newWay = GetAverage(doubles); // 8.98837362725198E+305 -- no overflow\r\n\r\nNaturally, how acceptable this solution is will depend on your accuracy requirements. But it&#39;s worth considering.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Consider this:</p>\n\n<pre><code>avg(n1)         : n1                               = a1\navg(n1, n2)     : ((1/2)*n1)+((1/2)*n2)            = ((1/2)*a1)+((1/2)*n2) = a2\navg(n1, n2, n3) : ((1/3)*n1)+((1/3)*n2)+((1/3)*n3) = ((2/3)*a2)+((1/3)*n3) = a3\n</code></pre>\n\n<p>So for any set of doubles of arbitrary size, you could do this (this is in C#, but I'm pretty sure it could be easily translated to Java):</p>\n\n<pre><code>static double GetAverage(IEnumerable&lt;double&gt; values) {\n    int i = 0;\n    double avg = 0.0;\n    foreach (double value in values) {\n        avg = (((double)i / (double)(i + 1)) * avg) + ((1.0 / (double)(i + 1)) * value);\n        i++;\n    }\n\n    return avg;\n}\n</code></pre>\n\n<p>Actually, this simplifies nicely into (already provided by martinus):</p>\n\n<pre><code>static double GetAverage(IEnumerable&lt;double&gt; values) {\n    int i = 1;\n    double avg = 0.0;\n    foreach (double value in values) {\n        avg += (value - avg) / (i++);\n    }\n\n    return avg;\n}\n</code></pre>\n\n<p>I wrote a quick test to try this function out against the more conventional method of summing up the values and dividing by the count (<code>GetAverage_old</code>). For my input I wrote this quick function to return as many random positive doubles as desired:</p>\n\n<pre><code>static IEnumerable&lt;double&gt; GetRandomDoubles(long numValues, double maxValue, int seed) {\n    Random r = new Random(seed);\n    for (long i = 0L; i &lt; numValues; i++)\n        yield return r.NextDouble() * maxValue;\n\n    yield break;\n}\n</code></pre>\n\n<p>And here are the results of a few test trials:</p>\n\n<pre><code>long N = 100L;\ndouble max = double.MaxValue * 0.01;\n\nIEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\ndouble oldWay = GetAverage_old(doubles); // 1.00535024998431E+306\ndouble newWay = GetAverage(doubles); // 1.00535024998431E+306\n\ndoubles = GetRandomDoubles(N, max, 1);\noldWay = GetAverage_old(doubles); // 8.75142021696299E+305\nnewWay = GetAverage(doubles); // 8.75142021696299E+305\n\ndoubles = GetRandomDoubles(N, max, 2);\noldWay = GetAverage_old(doubles); // 8.70772312848651E+305\nnewWay = GetAverage(doubles); // 8.70772312848651E+305\n</code></pre>\n\n<p>OK, but what about for 10^9 values?</p>\n\n<pre><code>long N = 1000000000;\ndouble max = 100.0; // we start small, to verify accuracy\n\nIEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\ndouble oldWay = GetAverage_old(doubles); // 49.9994879713857\ndouble newWay = GetAverage(doubles); // 49.9994879713868 -- pretty close\n\nmax = double.MaxValue * 0.001; // now let's try something enormous\n\ndoubles = GetRandomDoubles(N, max, 0);\noldWay = GetAverage_old(doubles); // Infinity\nnewWay = GetAverage(doubles); // 8.98837362725198E+305 -- no overflow\n</code></pre>\n\n<p>Naturally, how acceptable this solution is will depend on your accuracy requirements. But it's worth considering.</p>\n"},{"tags":[],"owner":{"account_id":621217,"reputation":9,"user_id":356139,"display_name":"Anil"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1647791861,"creation_date":1275460413,"answer_id":2955488,"question_id":1930454,"body_markdown":"Why so many complicated long answers. Here is the simplest way to find the running average till now without any need to know how many elements or size etc..\r\n```\r\nlong int i = 0;\r\ndouble average = 0;\r\nwhile(there are still elements)\r\n{\r\n   average = average * (i / i+1) + X[i] / (i+1);\r\n   i++;\r\n}\r\nreturn average;\r\n```","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Why so many complicated long answers. Here is the simplest way to find the running average till now without any need to know how many elements or size etc..</p>\n<pre><code>long int i = 0;\ndouble average = 0;\nwhile(there are still elements)\n{\n   average = average * (i / i+1) + X[i] / (i+1);\n   i++;\n}\nreturn average;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1602299,"reputation":594,"user_id":1483126,"accept_rate":60,"display_name":"Toomtarm Kung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528892825,"creation_date":1528886913,"answer_id":50835306,"question_id":1930454,"body_markdown":"In order to keep logic simple, and keep performance not the best but acceptable, i recommend you to use BigDecimal together with the primitive type. \r\nThe concept is very simple, you use primitive type to sum values together, whenever the value will underflow or overflow, you move the calculate value to the BigDecimal, then reset it for the next sum calculation. One more thing you should aware is when you construct BigDecimal, you ought to always use String instead of double.\r\n\r\n    BigDecimal average(double[] values){\r\n        BigDecimal totalSum = BigDecimal.ZERO;\r\n        double tempSum = 0.00;\r\n        for (double value : values){\r\n            if (isOutOfRange(tempSum, value)) {\r\n                totalSum = sum(totalSum, tempSum);\r\n                tempSum = 0.00;\r\n            }\r\n            tempSum += value;\r\n        }\r\n        totalSum = sum(totalSum, tempSum);\r\n        BigDecimal count = new BigDecimal(values.length);\r\n        return totalSum.divide(count);\r\n    }\r\n    \r\n    BigDecimal sum(BigDecimal val1, double val2){\r\n        BigDecimal val = new BigDecimal(String.valueOf(val2));\r\n        return val1.add(val);\r\n    }\r\n    \r\n    boolean isOutOfRange(double sum, double value){\r\n        // because sum + value &gt; max will be error if both sum and value are positive\r\n        // so I adapt the equation to be value &gt; max - sum \r\n        if(sum &gt;= 0.00 &amp;&amp; value &gt; Double.MAX - sum){\r\n            return true;\r\n        }\r\n    \r\n        // because sum + value &lt; min will be error if both sum and value are negative\r\n        // so I adapt the equation to be value &lt; min - sum\r\n        if(sum &lt; 0.00 &amp;&amp; value &lt; Double.MIN - sum){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\nFrom this concept, every time the result is underflow or overflow, we will keep that value into the bigger variable, this solution might a bit slowdown the performance due to the BigDecimal calculation, but it guarantee the runtime stability.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>In order to keep logic simple, and keep performance not the best but acceptable, i recommend you to use BigDecimal together with the primitive type. \nThe concept is very simple, you use primitive type to sum values together, whenever the value will underflow or overflow, you move the calculate value to the BigDecimal, then reset it for the next sum calculation. One more thing you should aware is when you construct BigDecimal, you ought to always use String instead of double.</p>\n\n<pre><code>BigDecimal average(double[] values){\n    BigDecimal totalSum = BigDecimal.ZERO;\n    double tempSum = 0.00;\n    for (double value : values){\n        if (isOutOfRange(tempSum, value)) {\n            totalSum = sum(totalSum, tempSum);\n            tempSum = 0.00;\n        }\n        tempSum += value;\n    }\n    totalSum = sum(totalSum, tempSum);\n    BigDecimal count = new BigDecimal(values.length);\n    return totalSum.divide(count);\n}\n\nBigDecimal sum(BigDecimal val1, double val2){\n    BigDecimal val = new BigDecimal(String.valueOf(val2));\n    return val1.add(val);\n}\n\nboolean isOutOfRange(double sum, double value){\n    // because sum + value &gt; max will be error if both sum and value are positive\n    // so I adapt the equation to be value &gt; max - sum \n    if(sum &gt;= 0.00 &amp;&amp; value &gt; Double.MAX - sum){\n        return true;\n    }\n\n    // because sum + value &lt; min will be error if both sum and value are negative\n    // so I adapt the equation to be value &lt; min - sum\n    if(sum &lt; 0.00 &amp;&amp; value &lt; Double.MIN - sum){\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>From this concept, every time the result is underflow or overflow, we will keep that value into the bigger variable, this solution might a bit slowdown the performance due to the BigDecimal calculation, but it guarantee the runtime stability.</p>\n"},{"tags":[],"owner":{"account_id":20013438,"reputation":1,"user_id":22482038,"display_name":"Manuel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693554971,"creation_date":1693554971,"answer_id":77021393,"question_id":1930454,"body_markdown":"There are two ways, already mentioned:\r\n\r\n    int i = 1;\r\n    for ( double x : arr ){\r\n        mean = mean + (x-mean)/n;\r\n        ++n;\r\n    }\r\n\r\nif the (x-mean)/n part becomes too small you can use\r\n\r\n    int i = 1;\r\n    for (double x : arr){\r\n        mean = mean*((i-1)/i) + x/i;\r\n        ++i; \r\n    }\r\n\r\nCalculating (i-1)/i first makes approaching zero, so x/i should be your only concern.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>There are two ways, already mentioned:</p>\n<pre><code>int i = 1;\nfor ( double x : arr ){\n    mean = mean + (x-mean)/n;\n    ++n;\n}\n</code></pre>\n<p>if the (x-mean)/n part becomes too small you can use</p>\n<pre><code>int i = 1;\nfor (double x : arr){\n    mean = mean*((i-1)/i) + x/i;\n    ++i; \n}\n</code></pre>\n<p>Calculating (i-1)/i first makes approaching zero, so x/i should be your only concern.</p>\n"}],"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43354,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":1934266,"answer_count":18,"score":55,"last_activity_date":1693554971,"creation_date":1261167528,"question_id":1930454,"body_markdown":"I have a requirement to calculate the average of a very large set of doubles (10^9 values).  The sum of the values exceeds the upper bound of a double, so does anyone know any neat little tricks for calculating an average that doesn&#39;t require also calculating the sum?\r\n\r\nI am using Java 1.5.  ","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>I have a requirement to calculate the average of a very large set of doubles (10^9 values).  The sum of the values exceeds the upper bound of a double, so does anyone know any neat little tricks for calculating an average that doesn't require also calculating the sum?</p>\n\n<p>I am using Java 1.5.  </p>\n"},{"tags":["java","android","multiple-instances","android-handler"],"answers":[{"tags":[],"owner":{"account_id":6485263,"reputation":623,"user_id":5021056,"display_name":"ryankuck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693554502,"creation_date":1693554502,"answer_id":77021357,"question_id":77021137,"body_markdown":"You should call the removeCallbacksAndMessages function when the activity ends using onDestroy(). This will clean up the handler so that there will only be one running at a time.","title":"Manage handler execution in multiple instance of activity running","body":"<p>You should call the removeCallbacksAndMessages function when the activity ends using onDestroy(). This will clean up the handler so that there will only be one running at a time.</p>\n"}],"owner":{"account_id":1931992,"reputation":4921,"user_id":1741203,"accept_rate":57,"display_name":"Rajeev Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693554502,"creation_date":1693551851,"question_id":77021137,"body_markdown":"I have been running a activity with `mode = singleInstance` in my app. In this activity onStart() method i am initializing a handler like this\r\n  \r\n    Handler handler;\r\n    @Override\r\n    protected void onStart() { // running handler with post delayed of 5 seconds\r\n       handler = new Handler();\r\n       handler.postDelayed(() -&gt; {\r\n         // doing something\r\n       }\r\n    }, 5000);\r\n\r\nNow sometime when user comes back to my activity from any other app following sequence of Activity life cycle events fires\r\n\r\n    -&gt; onCreate() // first instance created\r\n    -&gt; onStart() // on start of first instance called\r\n    -&gt; onCreate() // second instance created\r\n    -&gt; onStart() // on start of second instance called\r\n    -&gt; onDestroy() // first instance on destroy called\r\n\r\nNow handler running twice as onStart() called twice for two different instance created. \r\nI want to stop the handler execution of first instance as it destroyed immidiately after created. I i use `handler.removeCallbacksAndMessages(null);` it is stopping the second instance handler execution. \r\n\r\nHow can i make sure that only running activity handler instance executes ?\r\n\r\n\r\n\r\n","title":"Manage handler execution in multiple instance of activity running","body":"<p>I have been running a activity with <code>mode = singleInstance</code> in my app. In this activity onStart() method i am initializing a handler like this</p>\n<pre><code>Handler handler;\n@Override\nprotected void onStart() { // running handler with post delayed of 5 seconds\n   handler = new Handler();\n   handler.postDelayed(() -&gt; {\n     // doing something\n   }\n}, 5000);\n</code></pre>\n<p>Now sometime when user comes back to my activity from any other app following sequence of Activity life cycle events fires</p>\n<pre><code>-&gt; onCreate() // first instance created\n-&gt; onStart() // on start of first instance called\n-&gt; onCreate() // second instance created\n-&gt; onStart() // on start of second instance called\n-&gt; onDestroy() // first instance on destroy called\n</code></pre>\n<p>Now handler running twice as onStart() called twice for two different instance created.\nI want to stop the handler execution of first instance as it destroyed immidiately after created. I i use <code>handler.removeCallbacksAndMessages(null);</code> it is stopping the second instance handler execution.</p>\n<p>How can i make sure that only running activity handler instance executes ?</p>\n"},{"tags":["java","logging","mapreduce","hadoop-yarn"],"owner":{"account_id":18697505,"reputation":3,"user_id":13630477,"display_name":"Canerc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693554390,"creation_date":1693482620,"question_id":77015571,"body_markdown":"In the Hadoop JobHistory WEB UI, I see all applications, running, killed, finished(succeeded), etc. However, I can not access **some** of the MapReduce jobs tracking URL history logs. \r\n\r\nWhen I run `hadoop fs -ls /user/history/done/2023/08/31/00003/` command, I see job_XXXXXX_404 jhist and xml logs. So log exists but web ui not found job. (When I click the history button, (http://server:19888/jobhistory/job/job_XXXXXX_4047 page) only one sentence appears: Not found: job_XXXXXX_4047 )\r\n\r\n\r\n\r\nhadoop-hdfs-historyserver-XXX.Log:\r\n**ERROR** `org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047`\r\n\r\nThen I changed log level INFO to DEBUG:\r\n\r\nhadoop-hdfs-historyserver-XXX.Log:\r\n\r\n~~~\r\nDEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/root\r\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\r\n~~~\r\n\r\nSome other jobs, hadoop-hdfs-historyserver-XXX.Log logs like\r\n\r\n\r\n~~~\r\nDEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate dir hdfs://ha-cluster:8020/user/history/done_intermediate/root\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Found 0 files\r\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\r\n~~~\r\n\r\n\r\n[Hadoop HistoryFileManager.java](https://github.com/apache/hadoop/blob/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java#L1087):\r\n```\r\n...\r\n  public HistoryFileInfo getFileInfo(JobId jobId) throws IOException {\r\n    // FileInfo available in cache.\r\n    HistoryFileInfo fileInfo = jobListCache.get(jobId);\r\n    if (fileInfo != null) {\r\n      return fileInfo;\r\n    }\r\n    // OK so scan the intermediate to be sure we did not lose it that way\r\n    scanIntermediateDirectory();\r\n    fileInfo = jobListCache.get(jobId);\r\n    if (fileInfo != null) {\r\n      return fileInfo;\r\n    }\r\n\r\n    // Intermediate directory does not contain job. Search through older ones.\r\n    fileInfo = scanOldDirsForJob(jobId);\r\n    if (fileInfo != null) {\r\n      return fileInfo;\r\n    }\r\n    return null;\r\n  }\r\n...\r\n```\r\nFinally, I restarted the history server service(`mapred --daemon stop historyserver, mapred --daemon start historyser`), and I saw the logs. But I&#39;m tired of restarting the service. Why can&#39;t the history server find the job logs?\r\n","title":"Hadoop Map Reduce History Server UI - unable to find job logs (but log exists at hdfs)","body":"<p>In the Hadoop JobHistory WEB UI, I see all applications, running, killed, finished(succeeded), etc. However, I can not access <strong>some</strong> of the MapReduce jobs tracking URL history logs.</p>\n<p>When I run <code>hadoop fs -ls /user/history/done/2023/08/31/00003/</code> command, I see job_XXXXXX_404 jhist and xml logs. So log exists but web ui not found job. (When I click the history button, (http://server:19888/jobhistory/job/job_XXXXXX_4047 page) only one sentence appears: Not found: job_XXXXXX_4047 )</p>\n<p>hadoop-hdfs-historyserver-XXX.Log:\n<strong>ERROR</strong> <code>org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047</code></p>\n<p>Then I changed log level INFO to DEBUG:</p>\n<p>hadoop-hdfs-historyserver-XXX.Log:</p>\n<pre><code>DEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/root\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\n</code></pre>\n<p>Some other jobs, hadoop-hdfs-historyserver-XXX.Log logs like</p>\n<pre><code>DEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate dir hdfs://ha-cluster:8020/user/history/done_intermediate/root\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Found 0 files\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\n</code></pre>\n<p><a href=\"https://github.com/apache/hadoop/blob/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java#L1087\" rel=\"nofollow noreferrer\">Hadoop HistoryFileManager.java</a>:</p>\n<pre><code>...\n  public HistoryFileInfo getFileInfo(JobId jobId) throws IOException {\n    // FileInfo available in cache.\n    HistoryFileInfo fileInfo = jobListCache.get(jobId);\n    if (fileInfo != null) {\n      return fileInfo;\n    }\n    // OK so scan the intermediate to be sure we did not lose it that way\n    scanIntermediateDirectory();\n    fileInfo = jobListCache.get(jobId);\n    if (fileInfo != null) {\n      return fileInfo;\n    }\n\n    // Intermediate directory does not contain job. Search through older ones.\n    fileInfo = scanOldDirsForJob(jobId);\n    if (fileInfo != null) {\n      return fileInfo;\n    }\n    return null;\n  }\n...\n</code></pre>\n<p>Finally, I restarted the history server service(<code>mapred --daemon stop historyserver, mapred --daemon start historyser</code>), and I saw the logs. But I'm tired of restarting the service. Why can't the history server find the job logs?</p>\n"},{"tags":["java","spring-boot","intellij-idea","microservices","mapstruct"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693406069,"post_id":77008817,"comment_id":135757022,"body_markdown":"if you will remove `lombok` from `NotificationGetDTO ` and `Notification` is it will work ?","body":"if you will remove <code>lombok</code> from <code>NotificationGetDTO </code> and <code>Notification</code> is it will work ?"},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1693408174,"post_id":77008817,"comment_id":135757531,"body_markdown":"IMO this annotation should not cause runtime problems as it is a source code level annotation. Do you have the stack trace of the runtime issue you are facing ?","body":"IMO this annotation should not cause runtime problems as it is a source code level annotation. Do you have the stack trace of the runtime issue you are facing ?"},{"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"score":0,"creation_date":1693465715,"post_id":77008817,"comment_id":135765198,"body_markdown":"@greg Well, I&#39;m not facing any real runtime problems, it&#39;s just that when I try to see the Mappings in IDEA, it doesn&#39;t display the actual mappings and endpoints and just states the error. As for now, it seems to be running, but I don&#39;t want to deploy the service like that. My biggest concern is the the &quot;residual&quot; javax import, which is not supposed to be there.","body":"@greg Well, I&#39;m not facing any real runtime problems, it&#39;s just that when I try to see the Mappings in IDEA, it doesn&#39;t display the actual mappings and endpoints and just states the error. As for now, it seems to be running, but I don&#39;t want to deploy the service like that. My biggest concern is the the &quot;residual&quot; javax import, which is not supposed to be there."},{"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"score":0,"creation_date":1693466199,"post_id":77008817,"comment_id":135765301,"body_markdown":"@AndreiLisa I tried that, but it didn&#39;t yield any changes to the behavior of the service.","body":"@AndreiLisa I tried that, but it didn&#39;t yield any changes to the behavior of the service."}],"answers":[{"tags":[],"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693554094,"creation_date":1693552561,"answer_id":77021194,"question_id":77008817,"body_markdown":"So, I discovered it wasn&#39;t a code-based problem at all. \r\nStill not really sure, why it was happening, but I uninstalled the IDE and installed the new version of IntellijIDEA. Now everything is working just fine. \r\nI mean, the generated annotation is no longer using the javax dependency and the error is no longer displayed. \r\n\r\nThank yall for your help. ","title":"Javax dependency in mapstruct generated file after upgrading to spring boot 3","body":"<p>So, I discovered it wasn't a code-based problem at all.\nStill not really sure, why it was happening, but I uninstalled the IDE and installed the new version of IntellijIDEA. Now everything is working just fine.\nI mean, the generated annotation is no longer using the javax dependency and the error is no longer displayed.</p>\n<p>Thank yall for your help.</p>\n"}],"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":458,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77021194,"answer_count":1,"score":2,"last_activity_date":1693554094,"creation_date":1693404571,"question_id":77008817,"body_markdown":"I was tasked with upgrading one rest service in our hub so that it uses spring boot 3. Among others, I removed all javax imports and substituted them with jakarta imports instead. \r\nBut when I maven package my app I&#39;m getting a javax import in one of the generated files. \r\n\r\nSpecifically, the import is in this generated class (if the implementation of this class is important to paint the problem I&#39;ll add it): \r\n\r\n```\r\nimport cz.cvut.fel.czm.api.dto.NotificationGetDTO;\r\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\r\nimport cz.cvut.fel.czm.model.notification.Notification;\r\nimport java.time.LocalDateTime;\r\nimport javax.annotation.processing.Generated;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Generated(\r\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n    date = &quot;2023-08-30T15:34:27+0200&quot;,\r\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 17.0.2 (Oracle Corporation)&quot;\r\n)\r\n@Component\r\npublic class NotificationMapperImpl implements NotificationMapper {\r\n\r\n...\r\n}\r\n```\r\n\r\nAnd this is the actual mapper: \r\n\r\n```\r\nimport cz.cvut.fel.czm.api.dto.NotificationGetDTO;\r\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\r\nimport cz.cvut.fel.czm.model.notification.Notification;\r\nimport org.mapstruct.Mapper;\r\n\r\nimport java.time.LocalDateTime;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;, imports = {LocalDateTime.class})\r\npublic interface NotificationMapper {\r\n    NotificationGetDTO toDTO(Notification notification);\r\n\r\n    Notification toModel(NotificationPostDTO notificationPostDTO);\r\n}\r\n```\r\n\r\nI&#39;m using a custom parent for the service, so I&#39;m not in charge of changing the versions of dependencies. But there could be a bug somewhere in the parent files too. \r\n\r\nThis is my mapstruct dependency from the pom: \r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\n\r\nAnd this is the maven plugin configuration I&#39;m using: \r\n\r\n```\r\n&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.projectlombok.lombok.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.mapstruct.mapstruct.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;compilerArg&gt;-Amapstruct.defaultComponentModel=spring&lt;/compilerArg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nI reviewed it and the version of mapstruct we&#39;re using is 1.5.5final. \r\n\r\n\r\nIt appears that when I run the service locally, the endpoints are avaliable and working, when I access them via Insomnia, but when I open it in InteliJIDEA, I&#39;m met with\r\n&quot;javax.management.InstanceNotFoundException: orh.springframework.boot:type=Endpoint,name=Mappings,*&quot;\r\nmessage. \r\n\r\nI tried hardcoding the version of the mapstruct dependency, but it doesn&#39;t seem to be the reason for the problem. \r\nI also researched which other dependencies could result in the javax dependency, but I couldn&#39;t find the culprit. \r\n\r\nIn other words, everything works, but I&#39;d hate it if this minor thing caused any problems later in production. I checked with other services that had already been migrated, and I don&#39;t think any of those had this thing happening.\r\n\r\nThank you for any suggestions. ","title":"Javax dependency in mapstruct generated file after upgrading to spring boot 3","body":"<p>I was tasked with upgrading one rest service in our hub so that it uses spring boot 3. Among others, I removed all javax imports and substituted them with jakarta imports instead.\nBut when I maven package my app I'm getting a javax import in one of the generated files.</p>\n<p>Specifically, the import is in this generated class (if the implementation of this class is important to paint the problem I'll add it):</p>\n<pre><code>import cz.cvut.fel.czm.api.dto.NotificationGetDTO;\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\nimport cz.cvut.fel.czm.model.notification.Notification;\nimport java.time.LocalDateTime;\nimport javax.annotation.processing.Generated;\nimport org.springframework.stereotype.Component;\n\n@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2023-08-30T15:34:27+0200&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 17.0.2 (Oracle Corporation)&quot;\n)\n@Component\npublic class NotificationMapperImpl implements NotificationMapper {\n\n...\n}\n</code></pre>\n<p>And this is the actual mapper:</p>\n<pre><code>import cz.cvut.fel.czm.api.dto.NotificationGetDTO;\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\nimport cz.cvut.fel.czm.model.notification.Notification;\nimport org.mapstruct.Mapper;\n\nimport java.time.LocalDateTime;\n\n@Mapper(componentModel = &quot;spring&quot;, imports = {LocalDateTime.class})\npublic interface NotificationMapper {\n    NotificationGetDTO toDTO(Notification notification);\n\n    Notification toModel(NotificationPostDTO notificationPostDTO);\n}\n</code></pre>\n<p>I'm using a custom parent for the service, so I'm not in charge of changing the versions of dependencies. But there could be a bug somewhere in the parent files too.</p>\n<p>This is my mapstruct dependency from the pom:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>And this is the maven plugin configuration I'm using:</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${org.projectlombok.lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${org.mapstruct.mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;compilerArg&gt;-Amapstruct.defaultComponentModel=spring&lt;/compilerArg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I reviewed it and the version of mapstruct we're using is 1.5.5final.</p>\n<p>It appears that when I run the service locally, the endpoints are avaliable and working, when I access them via Insomnia, but when I open it in InteliJIDEA, I'm met with\n&quot;javax.management.InstanceNotFoundException: orh.springframework.boot:type=Endpoint,name=Mappings,*&quot;\nmessage.</p>\n<p>I tried hardcoding the version of the mapstruct dependency, but it doesn't seem to be the reason for the problem.\nI also researched which other dependencies could result in the javax dependency, but I couldn't find the culprit.</p>\n<p>In other words, everything works, but I'd hate it if this minor thing caused any problems later in production. I checked with other services that had already been migrated, and I don't think any of those had this thing happening.</p>\n<p>Thank you for any suggestions.</p>\n"},{"tags":["java","vaadin","add-on"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1693588231,"post_id":77021301,"comment_id":135785657,"body_markdown":"If you inspect the element, is the shadow DOM rendered? Try `zXingVaadin.setSizeFull()`.","body":"If you inspect the element, is the shadow DOM rendered? Try <code>zXingVaadin.setSizeFull()</code>."}],"owner":{"account_id":27518510,"reputation":91,"user_id":20999057,"display_name":"Ji Lin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1693553787,"creation_date":1693553787,"question_id":77021301,"body_markdown":"I want to use the zXingVaadin Addon, in case to provide the function to scan QR Codes.\r\nUsing the following code:\r\n\r\n    public ZXingVaadinReader zXingVaadin;\r\n\tFlexLayout flexLayout;\r\n\r\n\tpublic FlexLayout getQRScanButton() {\r\n\t\tflexLayout = new FlexLayout();\r\n\t\tDiv div = new Div();\r\n\t\tdiv.getStyle().set(&quot;height&quot;, &quot;100px&quot;).set(&quot;width&quot;, &quot;100px&quot;).set(&quot;background-color&quot;, &quot;grey&quot;);\r\n\t\tdiv.add(getzXingVaadinReader());\r\n\t\tflexLayout.add(div);\r\n\t\tflexLayout.setId(&quot;outerQRDiv&quot;);\r\n\r\n\t\treturn flexLayout;\r\n\t}\r\n\r\n\tprivate ZXingVaadinReader getzXingVaadinReader() {\r\n\t\tzXingVaadin = new ZXingVaadinReader();\r\n\t\tzXingVaadin.setFrom(Constants.From.camera);\r\n\t\tzXingVaadin.setId(&quot;video&quot;);\r\n\t\treturn zXingVaadin;\r\n\t}\r\n\r\n\r\nand this in the MainView:\r\n\r\n    QrScanButton qrScanButton = new QrScanButton();\r\n        add(qrScanButton.getQRScanButton());\r\n\r\ni only get an empty zXingVaadinReader Component with the size 0x0. I dont understand what the problem is.\r\n\r\nLink to the Vaadin Addon: \r\nhttps://vaadin.com/directory/component/zxingvaadin\r\n\r\nI also imported the dependency as shown on the website in the pom.xml file","title":"Vaadin Addon doesnt work, not showing component","body":"<p>I want to use the zXingVaadin Addon, in case to provide the function to scan QR Codes.\nUsing the following code:</p>\n<pre><code>public ZXingVaadinReader zXingVaadin;\nFlexLayout flexLayout;\n\npublic FlexLayout getQRScanButton() {\n    flexLayout = new FlexLayout();\n    Div div = new Div();\n    div.getStyle().set(&quot;height&quot;, &quot;100px&quot;).set(&quot;width&quot;, &quot;100px&quot;).set(&quot;background-color&quot;, &quot;grey&quot;);\n    div.add(getzXingVaadinReader());\n    flexLayout.add(div);\n    flexLayout.setId(&quot;outerQRDiv&quot;);\n\n    return flexLayout;\n}\n\nprivate ZXingVaadinReader getzXingVaadinReader() {\n    zXingVaadin = new ZXingVaadinReader();\n    zXingVaadin.setFrom(Constants.From.camera);\n    zXingVaadin.setId(&quot;video&quot;);\n    return zXingVaadin;\n}\n</code></pre>\n<p>and this in the MainView:</p>\n<pre><code>QrScanButton qrScanButton = new QrScanButton();\n    add(qrScanButton.getQRScanButton());\n</code></pre>\n<p>i only get an empty zXingVaadinReader Component with the size 0x0. I dont understand what the problem is.</p>\n<p>Link to the Vaadin Addon:\n<a href=\"https://vaadin.com/directory/component/zxingvaadin\" rel=\"nofollow noreferrer\">https://vaadin.com/directory/component/zxingvaadin</a></p>\n<p>I also imported the dependency as shown on the website in the pom.xml file</p>\n"},{"tags":["java","string","lambda","java-stream"],"comments":[{"owner":{"account_id":1405229,"reputation":8733,"user_id":1333133,"accept_rate":51,"display_name":"Satya"},"score":2,"creation_date":1511762379,"post_id":47504758,"comment_id":81965309,"body_markdown":"a) What have you tried so far? b) Are you trying to re-invent the wheel?","body":"a) What have you tried so far? b) Are you trying to re-invent the wheel?"},{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":9,"creation_date":1511762441,"post_id":47504758,"comment_id":81965333,"body_markdown":"Why do you insist on lambdas and streams?","body":"Why do you insist on lambdas and streams?"},{"owner":{"account_id":11474562,"reputation":847,"user_id":8410408,"display_name":"Abhijeetk431"},"score":0,"creation_date":1511762685,"post_id":47504758,"comment_id":81965429,"body_markdown":"Hello and welcome! It might be worth having a look at [this article](https://stackoverflow.com/help/how-to-ask) which has some tips on how to ask a great question that&#39;ll get you the answer you&#39;re looking for.","body":"Hello and welcome! It might be worth having a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">this article</a> which has some tips on how to ask a great question that&#39;ll get you the answer you&#39;re looking for."},{"owner":{"account_id":5715909,"reputation":15062,"user_id":4516110,"accept_rate":81,"display_name":"Mehraj Malik"},"score":1,"creation_date":1511775532,"post_id":47504758,"comment_id":81971230,"body_markdown":"Why to invent **Wheel** again? Cannot use library function??","body":"Why to invent <b>Wheel</b> again? Cannot use library function??"}],"answers":[{"tags":[],"owner":{"account_id":3869926,"reputation":3576,"user_id":3205437,"accept_rate":100,"display_name":"Vishnu T S"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1511764697,"creation_date":1511762691,"answer_id":47504825,"question_id":47504758,"body_markdown":"Try this for reverse a string using lambda and streams\r\n\r\n   \r\n\r\n    import java.util.stream.Stream;\r\n    import java.util.stream.Collectors;\r\n        \r\n        public class Test  {\r\n        \r\n          \r\n            public static void main(String[] args) {\r\n        \r\n        \t    System.out.println(reverse(&quot;Anirudh&quot;));;\r\n            }\r\n            public static String reverse(String string) {\r\n                return Stream.of(string)\r\n                    .map(word-&gt;new StringBuilder(word).reverse())\r\n                    .collect(Collectors.joining(&quot; &quot;));\r\n            }\r\n        }","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Try this for reverse a string using lambda and streams</p>\n\n<pre><code>import java.util.stream.Stream;\nimport java.util.stream.Collectors;\n\n    public class Test  {\n\n\n        public static void main(String[] args) {\n\n            System.out.println(reverse(\"Anirudh\"));;\n        }\n        public static String reverse(String string) {\n            return Stream.of(string)\n                .map(word-&gt;new StringBuilder(word).reverse())\n                .collect(Collectors.joining(\" \"));\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4708838,"reputation":3351,"user_id":3810024,"accept_rate":94,"display_name":"shinjw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511764601,"creation_date":1511764601,"answer_id":47505198,"question_id":47504758,"body_markdown":"Another approach to reversing your String. You can use an IntStream to pull the correct character out of a `char` array.\r\n\r\n    public static void main(String[] args) {\r\n        char[] charArray = &quot;Aniruddh&quot;.toCharArray();\r\n        IntStream.range(0, charArray.length)\r\n            .mapToObj(i -&gt; charArray[(charArray.length - 1) - i])\r\n            .forEach(System.out::print);\r\n    }","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Another approach to reversing your String. You can use an IntStream to pull the correct character out of a <code>char</code> array.</p>\n\n<pre><code>public static void main(String[] args) {\n    char[] charArray = \"Aniruddh\".toCharArray();\n    IntStream.range(0, charArray.length)\n        .mapToObj(i -&gt; charArray[(charArray.length - 1) - i])\n        .forEach(System.out::print);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522927184,"creation_date":1511784780,"answer_id":47510744,"question_id":47504758,"body_markdown":"If you *really* want to do it for learning purposes, why not reverse the char array?\r\n\r\n    public static String reverse(String test) {\r\n        return IntStream.range(0, test.length())\r\n                .map(i -&gt; test.charAt(test.length() - i - 1))\r\n                .collect(StringBuilder::new, (sb, c) -&gt; sb.append((char) c), StringBuilder::append)\r\n                .toString();\r\n    }\r\n\r\n          ","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>If you <em>really</em> want to do it for learning purposes, why not reverse the char array?</p>\n\n<pre><code>public static String reverse(String test) {\n    return IntStream.range(0, test.length())\n            .map(i -&gt; test.charAt(test.length() - i - 1))\n            .collect(StringBuilder::new, (sb, c) -&gt; sb.append((char) c), StringBuilder::append)\n            .toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7505,"reputation":7034,"user_id":13075,"accept_rate":83,"display_name":"Henrik Aasted S&#248;rensen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1511785256,"creation_date":1511785256,"answer_id":47510887,"question_id":47504758,"body_markdown":"The easiest way to achieve what you&#39;re asking using streams is probably this:\r\n\r\n    String result = Stream.of(&quot;Aniruddh&quot;).map(__ -&gt; &quot;hddurinA&quot;).findFirst().get();","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>The easiest way to achieve what you're asking using streams is probably this:</p>\n\n<pre><code>String result = Stream.of(\"Aniruddh\").map(__ -&gt; \"hddurinA\").findFirst().get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1684747501,"creation_date":1511794168,"answer_id":47513712,"question_id":47504758,"body_markdown":"Given a string like\r\n\r\n    String str = &quot;Aniruddh&quot;;\r\n\r\nthe idiomatic solution is\r\n\r\n    String reversed = new StringBuilder(str).reverse().toString();\r\n\r\nIf, perhaps for educational purposes, you want to solve this by streaming over the string’s characters, you can do it like\r\n\r\n    String reversed = str.chars()\r\n        .mapToObj(c -&gt; (char)c)\r\n        .reduce(&quot;&quot;, (s,c) -&gt; c+s, (s1,s2) -&gt; s2+s1);\r\n\r\nThis is not only much more complicated, it also has performance drawbacks.\r\n\r\nThe following solution eliminates boxing related overhead\r\n\r\n    String reversed = str.chars()\r\n        .collect(StringBuilder::new,\r\n                 (b, c) -&gt; b.insert(0, (char)c), (b1, b2) -&gt; b1.insert(0, b2))\r\n        .toString();\r\n\r\nbut is still less efficient because inserting into the beginning of an array based buffer implies copying all previously collected data.\r\n\r\nThe bottom line is, for real applications, stay with the idiomatic solution shown at the beginning.\r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Given a string like</p>\n<pre><code>String str = &quot;Aniruddh&quot;;\n</code></pre>\n<p>the idiomatic solution is</p>\n<pre><code>String reversed = new StringBuilder(str).reverse().toString();\n</code></pre>\n<p>If, perhaps for educational purposes, you want to solve this by streaming over the string’s characters, you can do it like</p>\n<pre><code>String reversed = str.chars()\n    .mapToObj(c -&gt; (char)c)\n    .reduce(&quot;&quot;, (s,c) -&gt; c+s, (s1,s2) -&gt; s2+s1);\n</code></pre>\n<p>This is not only much more complicated, it also has performance drawbacks.</p>\n<p>The following solution eliminates boxing related overhead</p>\n<pre><code>String reversed = str.chars()\n    .collect(StringBuilder::new,\n             (b, c) -&gt; b.insert(0, (char)c), (b1, b2) -&gt; b1.insert(0, b2))\n    .toString();\n</code></pre>\n<p>but is still less efficient because inserting into the beginning of an array based buffer implies copying all previously collected data.</p>\n<p>The bottom line is, for real applications, stay with the idiomatic solution shown at the beginning.</p>\n"},{"tags":[],"owner":{"account_id":11968607,"reputation":29,"user_id":8757622,"display_name":"Rohan Aggarwal"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1570960741,"creation_date":1570956649,"answer_id":58361965,"question_id":47504758,"body_markdown":"```\r\nFunction&lt;String, String&gt; reverse = s -&gt; new StringBuilder(s).reverse().toString();\r\n```","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>Function&lt;String, String&gt; reverse = s -&gt; new StringBuilder(s).reverse().toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1163881,"reputation":13899,"user_id":1142881,"accept_rate":99,"display_name":"SkyWalker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575413071,"creation_date":1575413071,"answer_id":59166517,"question_id":47504758,"body_markdown":"Here is another way, doesn&#39;t seem super efficient but will explain why:\r\n\r\n    String s = &quot;blast&quot;;\r\n    IntStream.range(0, s.length()).           // create index [0 .. s.length - 1] \r\n       boxed().                               // the next step requires them boxed\r\n       sorted(Collections.reverseOrder()).    // indices in reverse order\r\n       map(i -&gt; String.valueOf(s.charAt(i))). // grab each index&#39;s character \r\n       collect(Collectors.joining());         // join each single-character String into the final String\r\n\r\nIt would be better if there was a way to append all the Characters without converting each to `String` and then joining them. That&#39;s why I said it doesn&#39;t seem super efficient.\r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Here is another way, doesn't seem super efficient but will explain why:</p>\n\n<pre><code>String s = \"blast\";\nIntStream.range(0, s.length()).           // create index [0 .. s.length - 1] \n   boxed().                               // the next step requires them boxed\n   sorted(Collections.reverseOrder()).    // indices in reverse order\n   map(i -&gt; String.valueOf(s.charAt(i))). // grab each index's character \n   collect(Collectors.joining());         // join each single-character String into the final String\n</code></pre>\n\n<p>It would be better if there was a way to append all the Characters without converting each to <code>String</code> and then joining them. That's why I said it doesn't seem super efficient.</p>\n"},{"tags":[],"owner":{"account_id":8696462,"reputation":1,"user_id":6507654,"display_name":"Chinmay Bhat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578370742,"creation_date":1578370742,"answer_id":59622113,"question_id":47504758,"body_markdown":"Another alternative way would be to split the string into an array of string and use reduce() on it.\r\n\r\n    Stream.of(&quot;Aniruddh&quot;.split(&quot;&quot;)).reduce(&quot;&quot;, (reversed, character) -&gt; character + reversed);","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Another alternative way would be to split the string into an array of string and use reduce() on it.</p>\n\n<pre><code>Stream.of(\"Aniruddh\".split(\"\")).reduce(\"\", (reversed, character) -&gt; character + reversed);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4288616,"reputation":39,"user_id":3505544,"display_name":"Mehdi najafian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581973298,"creation_date":1581967082,"answer_id":60269079,"question_id":47504758,"body_markdown":"Given a String of length S, reverse the whole string without reversing the individual words in it. Words are separated by dots.\r\n\r\n    String str=&quot;abcd.efg.qwerty&quot;;\r\n    \r\n    String reversed = Arrays.asList(str.split(&quot;\\\\.&quot;)).stream().map(m -&gt; new \r\n    StringBuilder(m).reverse().toString()).collect(Collectors.joining(&quot;.&quot;));\r\n    \r\n    System.out.println(reversed);\r\n\r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Given a String of length S, reverse the whole string without reversing the individual words in it. Words are separated by dots.</p>\n\n<pre><code>String str=\"abcd.efg.qwerty\";\n\nString reversed = Arrays.asList(str.split(\"\\\\.\")).stream().map(m -&gt; new \nStringBuilder(m).reverse().toString()).collect(Collectors.joining(\".\"));\n\nSystem.out.println(reversed);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3991944,"reputation":1372,"user_id":3290584,"display_name":"Noorus Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635798565,"creation_date":1635798565,"answer_id":69802476,"question_id":47504758,"body_markdown":"    String str = &quot;Noorus Khan&quot;;\r\n           int len = str.length();\r\n            IntStream.range(0, len)\r\n                    .map(i -&gt; len - 1 - i)\r\n                    .mapToObj(j-&gt;str.charAt(j))\r\n                    .forEach(System.out::print);\r\n\r\n\r\noutput :: nahK surooN","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>String str = &quot;Noorus Khan&quot;;\n       int len = str.length();\n        IntStream.range(0, len)\n                .map(i -&gt; len - 1 - i)\n                .mapToObj(j-&gt;str.charAt(j))\n                .forEach(System.out::print);\n</code></pre>\n<p>output :: nahK surooN</p>\n"},{"tags":[],"owner":{"account_id":8274627,"reputation":95,"user_id":6221281,"display_name":"imshikhararora"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643576109,"creation_date":1643575695,"answer_id":70918788,"question_id":47504758,"body_markdown":"Following is another approach to reverse the input String `str` using Java 8 streams API.\r\n\r\n    String abc = Arrays.asList(str).stream()\r\n        .map(s -&gt; new StringBuilder(s).reverse().toString())\r\n        .collect(Collectors.toList()).get(0);","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Following is another approach to reverse the input String <code>str</code> using Java 8 streams API.</p>\n<pre><code>String abc = Arrays.asList(str).stream()\n    .map(s -&gt; new StringBuilder(s).reverse().toString())\n    .collect(Collectors.toList()).get(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7850898,"reputation":353,"user_id":5934386,"display_name":"ITIB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646929020,"creation_date":1646929020,"answer_id":71427398,"question_id":47504758,"body_markdown":"You can use the below technique to reverse a string using stream.    \r\n\r\n    String str = &quot;Aniruddh&quot;;\r\n\r\n    Stream.iterate(str.length()-1, n-&gt; n &gt;= 0, n-&gt; n-1)\r\n            .map(input::charAt)\r\n            .forEach(System.out::print);","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>You can use the below technique to reverse a string using stream.</p>\n<pre><code>String str = &quot;Aniruddh&quot;;\n\nStream.iterate(str.length()-1, n-&gt; n &gt;= 0, n-&gt; n-1)\n        .map(input::charAt)\n        .forEach(System.out::print);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650251235,"creation_date":1650251235,"answer_id":71907225,"question_id":47504758,"body_markdown":"A **custom collector** can be handy if you want to achieve it with **Stream API** (*I&#39;m treating this task exclusively as an exercise*).\r\n\r\nSince none of the contributors of this question mentioned this possibility, here&#39;s a brief description of how to do that.\r\n\r\n&lt;h3&gt;Creating a Custom Collector&lt;/h3&gt;\r\n\r\nYou can create a *custom collector* either inline by using one of the versions of the static method [`Collector.of()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.function.Function,java.util.stream.Collector.Characteristics...)) or by creating a `class` that implements the `Collector` interface.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n* **Supplier** `Supplier&lt;A&gt;` is meant to provide a *mutable container* which store elements of the stream. It could be a `Collection`, `StringBuilder` or any other mutable object.\r\n* **Accumulator** BiConsumer&lt;A,T&gt; defines how to add elements into the *container* provided by the *supplier*.\r\n* **Combiner** `BinaryOperator&lt;A&gt; combiner()` establishes a rule on how to merge two *containers* in case of parallel execution.\r\n* **Finisher** `Function&lt;A,R&gt;` is meant to produce the final result by transforming the mutable container.\r\n* **Characteristics** allows to provide additional information, for instance `Collector.Characteristics.UNORDERED` signifies that the collector does not guarantee to preserve initial order of elements when the source of the stream is ordered, which can provide better performance in parallel.\r\n\r\n\r\nThe minimum set of parameters boils down to **supplier**, **accumulator** and **combiner** which resembles the arguments of [`collect()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)) operation with one difference - combiner argument expected by `of()` (*as well as the return type of the* `combiner()` *method*) is `BinaryOperator&lt;A&gt;`.\r\n\r\n&lt;h3&gt;Implementations&lt;/h3&gt;\r\n\r\nThe idea behind the first collector is to use `ArrayDeque` as a *mutable container* and add each element from the stream of *code points* to the front of the *deque*.\r\n\r\nPortions of tasks created in parallel will result into several *deques* has to be combined in reversed order. Therefore, in the *combiner* the *left deque* (*containing values from closer to the start of the source string*) gets appended to the *right deque* (*containing values from closer to the end of the source string*), and the *right deque* is being returned as a result.\r\n\r\nFinisher produces an array `int[]` of code point and returns a string based on it.\r\n\r\n`Collector&lt;Integer, Deque&lt;Integer&gt;, String&gt;`\r\n```\r\nString source = &quot;abcdefgh&quot;;\r\n\r\nString reversed = source.codePoints()\r\n    .boxed()\r\n    .collect(Collector.of(\r\n        ArrayDeque::new,\r\n        Deque::addFirst,\r\n        (Deque&lt;Integer&gt; left, Deque&lt;Integer&gt; right) -&gt; { right.addAll(left); return right; },\r\n        (Deque&lt;Integer&gt; deque) -&gt; new String(\r\n            deque.stream().mapToInt(Integer::intValue).toArray(),\r\n            0,\r\n            deque.size())\r\n    ));\r\n```\r\nThe second collector utilizes `char[]` as its mutable container which is being populated according to the indices of the source `IntStream`.\r\n\r\nCombiner merges two arrays by peek the largest value for each position of the array.\r\n\r\nFinisher utilizes constructor `new String(char[])` to generate the resulting string.\r\n\r\n`Collector&lt;Integer, char[], String&gt;`\r\n```\r\nString reversed = IntStream.range(0, source.length())\r\n    .boxed()\r\n    .collect(Collector.of(\r\n        () -&gt; new char[source.length()],\r\n        (char[] arr, Integer i) -&gt; arr[(source.length() - 1) - i] = source.charAt(i),\r\n        (char[] left, char[] right) -&gt; {\r\n            for (int i = 0; i &lt; left.length; i++) left[i] = (char) Math.max(left[i], right[i]); return left;\r\n        },\r\n        String::new\r\n    ));\r\n```\r\n**Output** (*for string* `&quot;abcdefgh&quot;`)\r\n```\r\nhgfedcba\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/e77Xjl.jpg","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>A <strong>custom collector</strong> can be handy if you want to achieve it with <strong>Stream API</strong> (<em>I'm treating this task exclusively as an exercise</em>).</p>\n<p>Since none of the contributors of this question mentioned this possibility, here's a brief description of how to do that.</p>\n<h3>Creating a Custom Collector</h3>\n<p>You can create a <em>custom collector</em> either inline by using one of the versions of the static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.function.Function,java.util.stream.Collector.Characteristics...)\" rel=\"nofollow noreferrer\"><code>Collector.of()</code></a> or by creating a <code>class</code> that implements the <code>Collector</code> interface.</p>\n<p><a href=\"https://i.stack.imgur.com/e77Xjl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e77Xjl.jpg\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li><strong>Supplier</strong> <code>Supplier&lt;A&gt;</code> is meant to provide a <em>mutable container</em> which store elements of the stream. It could be a <code>Collection</code>, <code>StringBuilder</code> or any other mutable object.</li>\n<li><strong>Accumulator</strong> BiConsumer&lt;A,T&gt; defines how to add elements into the <em>container</em> provided by the <em>supplier</em>.</li>\n<li><strong>Combiner</strong> <code>BinaryOperator&lt;A&gt; combiner()</code> establishes a rule on how to merge two <em>containers</em> in case of parallel execution.</li>\n<li><strong>Finisher</strong> <code>Function&lt;A,R&gt;</code> is meant to produce the final result by transforming the mutable container.</li>\n<li><strong>Characteristics</strong> allows to provide additional information, for instance <code>Collector.Characteristics.UNORDERED</code> signifies that the collector does not guarantee to preserve initial order of elements when the source of the stream is ordered, which can provide better performance in parallel.</li>\n</ul>\n<p>The minimum set of parameters boils down to <strong>supplier</strong>, <strong>accumulator</strong> and <strong>combiner</strong> which resembles the arguments of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>collect()</code></a> operation with one difference - combiner argument expected by <code>of()</code> (<em>as well as the return type of the</em> <code>combiner()</code> <em>method</em>) is <code>BinaryOperator&lt;A&gt;</code>.</p>\n<h3>Implementations</h3>\n<p>The idea behind the first collector is to use <code>ArrayDeque</code> as a <em>mutable container</em> and add each element from the stream of <em>code points</em> to the front of the <em>deque</em>.</p>\n<p>Portions of tasks created in parallel will result into several <em>deques</em> has to be combined in reversed order. Therefore, in the <em>combiner</em> the <em>left deque</em> (<em>containing values from closer to the start of the source string</em>) gets appended to the <em>right deque</em> (<em>containing values from closer to the end of the source string</em>), and the <em>right deque</em> is being returned as a result.</p>\n<p>Finisher produces an array <code>int[]</code> of code point and returns a string based on it.</p>\n<p><code>Collector&lt;Integer, Deque&lt;Integer&gt;, String&gt;</code></p>\n<pre><code>String source = &quot;abcdefgh&quot;;\n\nString reversed = source.codePoints()\n    .boxed()\n    .collect(Collector.of(\n        ArrayDeque::new,\n        Deque::addFirst,\n        (Deque&lt;Integer&gt; left, Deque&lt;Integer&gt; right) -&gt; { right.addAll(left); return right; },\n        (Deque&lt;Integer&gt; deque) -&gt; new String(\n            deque.stream().mapToInt(Integer::intValue).toArray(),\n            0,\n            deque.size())\n    ));\n</code></pre>\n<p>The second collector utilizes <code>char[]</code> as its mutable container which is being populated according to the indices of the source <code>IntStream</code>.</p>\n<p>Combiner merges two arrays by peek the largest value for each position of the array.</p>\n<p>Finisher utilizes constructor <code>new String(char[])</code> to generate the resulting string.</p>\n<p><code>Collector&lt;Integer, char[], String&gt;</code></p>\n<pre><code>String reversed = IntStream.range(0, source.length())\n    .boxed()\n    .collect(Collector.of(\n        () -&gt; new char[source.length()],\n        (char[] arr, Integer i) -&gt; arr[(source.length() - 1) - i] = source.charAt(i),\n        (char[] left, char[] right) -&gt; {\n            for (int i = 0; i &lt; left.length; i++) left[i] = (char) Math.max(left[i], right[i]); return left;\n        },\n        String::new\n    ));\n</code></pre>\n<p><strong>Output</strong> (<em>for string</em> <code>&quot;abcdefgh&quot;</code>)</p>\n<pre><code>hgfedcba\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27826588,"reputation":1,"user_id":21245880,"display_name":"vijay babu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676828107,"creation_date":1676828107,"answer_id":75502112,"question_id":47504758,"body_markdown":"      public static String reverseStreams(String ex)\r\n      {\r\n    \tchar[] charray=ex.toCharArray();\r\n    \tStringWriter str=new StringWriter();\r\n    \t  IntStream.range(0, charray.length)\r\n    \t    .mapToObj(i-&gt;(charray[(charray.length-1)-i]))\r\n    \t //   .collect(Collectors.toList())\r\n    \t    \r\n    \t    .forEach(s-&gt;str.append(s));\r\n    \t    return str.toString();\r\n    \t    \r\n    \t\r\n    \t\r\n    \r\n       }","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>  public static String reverseStreams(String ex)\n  {\n    char[] charray=ex.toCharArray();\n    StringWriter str=new StringWriter();\n      IntStream.range(0, charray.length)\n        .mapToObj(i-&gt;(charray[(charray.length-1)-i]))\n     //   .collect(Collectors.toList())\n        \n        .forEach(s-&gt;str.append(s));\n        return str.toString();\n        \n    \n    \n\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681899264,"creation_date":1681899264,"answer_id":76053303,"question_id":47504758,"body_markdown":"    public static void main(String[] args) {\r\n        String str = &quot;I am Vishwa Ratna&quot;;\r\n        String[] split = str.split(&quot;&quot;);\r\n        int len = str.length();\r\n        String collect = IntStream.range(0, len).mapToObj(s -&gt; {\r\n            int k = len - 1;\r\n            String sq = &quot;&quot;;\r\n            sq = split[k - s];\r\n            --k;\r\n            return sq;\r\n\r\n        }).collect(Collectors.joining(&quot;&quot;));\r\n        System.out.println(collect);\r\n    }\r\n\r\nFirst you convert your `String` to `String array` then you iterate through it in reverse order using `Intstream` and then you `collect` your stream to string by `joining`.","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>public static void main(String[] args) {\n    String str = &quot;I am Vishwa Ratna&quot;;\n    String[] split = str.split(&quot;&quot;);\n    int len = str.length();\n    String collect = IntStream.range(0, len).mapToObj(s -&gt; {\n        int k = len - 1;\n        String sq = &quot;&quot;;\n        sq = split[k - s];\n        --k;\n        return sq;\n\n    }).collect(Collectors.joining(&quot;&quot;));\n    System.out.println(collect);\n}\n</code></pre>\n<p>First you convert your <code>String</code> to <code>String array</code> then you iterate through it in reverse order using <code>Intstream</code> and then you <code>collect</code> your stream to string by <code>joining</code>.</p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684155872,"creation_date":1684155872,"answer_id":76254379,"question_id":47504758,"body_markdown":"One more approach could be writing a custom comparator (this could help reverse any element in collection/array) which would always return &quot;-1&quot;.&quot;-1&quot; being whenever 2 objects are compared the second object will be prior to first in placing order.\r\n\r\n\r\n        Comparator&lt;String&gt; comparator = (s1,s2) -&gt; -1;\r\n        \r\n        String reversed = Arrays.stream(input.split(&quot;&quot;))\r\n                               .sorted(comparator)\r\n                               .collect(Collectors.joining());\r\n                \r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>One more approach could be writing a custom comparator (this could help reverse any element in collection/array) which would always return &quot;-1&quot;.&quot;-1&quot; being whenever 2 objects are compared the second object will be prior to first in placing order.</p>\n<pre><code>    Comparator&lt;String&gt; comparator = (s1,s2) -&gt; -1;\n    \n    String reversed = Arrays.stream(input.split(&quot;&quot;))\n                           .sorted(comparator)\n                           .collect(Collectors.joining());\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9913536,"reputation":33,"user_id":7339305,"display_name":"AmolRavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693483930,"creation_date":1693483930,"answer_id":77015721,"question_id":47504758,"body_markdown":"The simple Approach I used is\r\n\r\n    String str = &quot;INDIA&quot;;\r\n        IntStream.range(0, str.length()).forEach(i -&gt; System.out.print(str.charAt(str.length() - 1 - i)));","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>The simple Approach I used is</p>\n<pre><code>String str = &quot;INDIA&quot;;\n    IntStream.range(0, str.length()).forEach(i -&gt; System.out.print(str.charAt(str.length() - 1 - i)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3872677,"reputation":1,"user_id":3207578,"display_name":"nasakh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693553667,"creation_date":1693553515,"answer_id":77021283,"question_id":47504758,"body_markdown":"```\r\nString str = &quot;abc&quot;;\r\nStringBuilder result = new StringBuilder(&quot;&quot;);\r\nStream.of(str.split(&quot;&quot;)).forEach(c -&gt; result.insert(0,c));\r\n```","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>String str = &quot;abc&quot;;\nStringBuilder result = new StringBuilder(&quot;&quot;);\nStream.of(str.split(&quot;&quot;)).forEach(c -&gt; result.insert(0,c));\n</code></pre>\n"}],"owner":{"account_id":1813648,"reputation":259,"user_id":1649217,"display_name":"Aniruddh Dwivedi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71737,"favorite_count":0,"down_vote_count":2,"up_vote_count":21,"answer_count":18,"score":19,"last_activity_date":1693553667,"creation_date":1511762295,"question_id":47504758,"body_markdown":"I have one string say `&quot;Aniruddh&quot;` and I want to reverse it using lambdas and streams in Java 8. How can I do it?","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>I have one string say <code>\"Aniruddh\"</code> and I want to reverse it using lambdas and streams in Java 8. How can I do it?</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1693552658,"creation_date":1693552658,"answer_id":77021204,"question_id":77020800,"body_markdown":"Certainly! You should include both slf4j-api and log4j-over-slf4j libraries in your project. They serve different roles within the SLF4J logging framework.\r\n\r\nslf4j-api: Think of this as the &quot;logging interface&quot; you use in your code to make log statements. It&#39;s like the language you speak when you want to log something. Without it, you won&#39;t be able to write log messages using SLF4J.\r\n\r\nlog4j-over-slf4j: This library acts like a bridge between SLF4J and the Log4j logging system. It allows you to use Log4j for actual logging while speaking SLF4J. This can be handy if you have other parts of your project that rely on Log4j but you prefer using SLF4J for your application&#39;s logging.\r\n\r\nSince you mentioned that removing slf4j-api would cause compile-time issues, it means your code relies on SLF4J for logging. So, you should keep both slf4j-api and log4j-over-slf4j in your project dependencies. This way, your code can continue to use the SLF4J API for logging, and the log4j-over-slf4j library will make sure those log calls get directed to Log4j behind the scenes.\r\n\r\nIn summary, having both slf4j-api and log4j-over-slf4j in your build.gradle is the way to go to ensure your logging works as expected.","title":"How to handle library specific implicit dependencies in gradle","body":"<p>Certainly! You should include both slf4j-api and log4j-over-slf4j libraries in your project. They serve different roles within the SLF4J logging framework.</p>\n<p>slf4j-api: Think of this as the &quot;logging interface&quot; you use in your code to make log statements. It's like the language you speak when you want to log something. Without it, you won't be able to write log messages using SLF4J.</p>\n<p>log4j-over-slf4j: This library acts like a bridge between SLF4J and the Log4j logging system. It allows you to use Log4j for actual logging while speaking SLF4J. This can be handy if you have other parts of your project that rely on Log4j but you prefer using SLF4J for your application's logging.</p>\n<p>Since you mentioned that removing slf4j-api would cause compile-time issues, it means your code relies on SLF4J for logging. So, you should keep both slf4j-api and log4j-over-slf4j in your project dependencies. This way, your code can continue to use the SLF4J API for logging, and the log4j-over-slf4j library will make sure those log calls get directed to Log4j behind the scenes.</p>\n<p>In summary, having both slf4j-api and log4j-over-slf4j in your build.gradle is the way to go to ensure your logging works as expected.</p>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77021204,"answer_count":1,"score":0,"last_activity_date":1693552658,"creation_date":1693548051,"question_id":77020800,"body_markdown":"./gradlew dependencies shows the following slf4j libraries, should I include both of these libraries or should I use log4j-over-slf4j alone since it includes the slf4j-api\r\n\r\n    +--- org.slf4j:slf4j-api:2.0.7\r\n    +--- org.slf4j:log4j-over-slf4j:2.0.7\r\n    |    \\--- org.slf4j:slf4j-api:2.0.7\r\n\r\n\r\nRight now, I include both of the libraries in build.gradle. If I remove slf4j-api, I would run into compile time issues","title":"How to handle library specific implicit dependencies in gradle","body":"<p>./gradlew dependencies shows the following slf4j libraries, should I include both of these libraries or should I use log4j-over-slf4j alone since it includes the slf4j-api</p>\n<pre><code>+--- org.slf4j:slf4j-api:2.0.7\n+--- org.slf4j:log4j-over-slf4j:2.0.7\n|    \\--- org.slf4j:slf4j-api:2.0.7\n</code></pre>\n<p>Right now, I include both of the libraries in build.gradle. If I remove slf4j-api, I would run into compile time issues</p>\n"},{"tags":["java","string","expression","evaluator"],"comments":[{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":1,"creation_date":1285861710,"post_id":3832323,"comment_id":4069318,"body_markdown":"That&#39;s not remotely syntactically correct Java code. Is that intentional?","body":"That&#39;s not remotely syntactically correct Java code. Is that intentional?"},{"owner":{"account_id":26091,"reputation":178004,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":1,"creation_date":1285861822,"post_id":3832323,"comment_id":4069343,"body_markdown":"I guess it is. He&#39;s looking for a Java-Evaluator for a Non-Java-Language (string and mathematical expressions).","body":"I guess it is. He&#39;s looking for a Java-Evaluator for a Non-Java-Language (string and mathematical expressions)."},{"owner":{"account_id":26091,"reputation":178004,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":0,"creation_date":1285861846,"post_id":3832323,"comment_id":4069348,"body_markdown":"Take a look at JEKS: http://www.eteks.com/jeks/en/","body":"Take a look at JEKS: <a href=\"http://www.eteks.com/jeks/en/\" rel=\"nofollow noreferrer\">eteks.com/jeks/en</a>"},{"owner":{"account_id":175182,"reputation":5658,"user_id":405022,"accept_rate":57,"display_name":"Andez"},"score":0,"creation_date":1285862386,"post_id":3832323,"comment_id":4069436,"body_markdown":"We use Jeks...  But I cannot see how you can evaluate IF(&quot;Test 1&quot; = &quot;Test 2&quot;)","body":"We use Jeks...  But I cannot see how you can evaluate IF(&quot;Test 1&quot; = &quot;Test 2&quot;)"}],"answers":[{"tags":[],"owner":{"account_id":648221,"reputation":2065,"user_id":442720,"display_name":"Anon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285862842,"creation_date":1285862842,"answer_id":3832542,"question_id":3832323,"body_markdown":"There are a lot of tools out there to evaluate expressions; the correct answer will depend on your exact goals.\r\n\r\nTwo things that I&#39;d look at:\r\n\r\n - [Commons EL][1], which evaluates [JSP 2.0 expression language][2].\r\n - [Rhino][3], which evaluates JavaScript (I think this is part of JDK 1.6, but haven&#39;t used it as such).\r\n\r\n\r\n  [1]: http://commons.apache.org/el/\r\n  [2]: http://java.sun.com/products/jsp/syntax/2.0/syntaxref207.html\r\n  [3]: http://www.mozilla.org/rhino/","title":"Java String and Mathematical Expression Evaluators","body":"<p>There are a lot of tools out there to evaluate expressions; the correct answer will depend on your exact goals.</p>\n\n<p>Two things that I'd look at:</p>\n\n<ul>\n<li><a href=\"http://commons.apache.org/el/\" rel=\"nofollow\">Commons EL</a>, which evaluates <a href=\"http://java.sun.com/products/jsp/syntax/2.0/syntaxref207.html\" rel=\"nofollow\">JSP 2.0 expression language</a>.</li>\n<li><a href=\"http://www.mozilla.org/rhino/\" rel=\"nofollow\">Rhino</a>, which evaluates JavaScript (I think this is part of JDK 1.6, but haven't used it as such).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":175182,"reputation":5658,"user_id":405022,"accept_rate":57,"display_name":"Andez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1287069109,"creation_date":1287069109,"answer_id":3934680,"question_id":3832323,"body_markdown":"The answer was a posting on the Jeks forum.  I got an answer from Manu.  I thought it was not active especially as I could not register on it - but that got sorted.\r\n\r\nBut if anyone has the same problem then the following lines of code will get it working:\r\n\r\n    ExpressionParser parser; // we did have = new ExpressionParser(new JeksExpressionSyntax(), null);\r\n    JeksInterpreter interpreter; // \r\n\r\nAnd to create the interpreter:\r\n\r\n    interpreter = new JeksInterpreter() {\r\n            \r\n          @Override\r\n          public Object getBinaryOperatorValue (Object binaryOperatorKey, Object param1, Object param2)\r\n          {\r\n            // Only functions may take a cell set as parameter\r\n            if ( param1 instanceof JeksCellSet || param2 instanceof JeksCellSet)\r\n              throw new IllegalArgumentException ();\r\n            // Enabled comparison between any type supported by Jeks\r\n            else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_EQUAL))\r\n              return param1 != null &amp;&amp; param1.equals (param2)\r\n                       ? Boolean.TRUE : Boolean.FALSE;\r\n            // Enabled comparison between any type supported by Jeks\r\n            else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_DIFFERENT))\r\n              return param1 != null &amp;&amp; param1.equals (param2) ? Boolean.FALSE : Boolean.TRUE;\r\n            else\r\n              return super.getBinaryOperatorValue (binaryOperatorKey, param1, param2);\r\n          }\r\n        };\r\n\r\n        parser = new ExpressionParser(new JeksExpressionSyntax(), null);","title":"Java String and Mathematical Expression Evaluators","body":"<p>The answer was a posting on the Jeks forum.  I got an answer from Manu.  I thought it was not active especially as I could not register on it - but that got sorted.</p>\n\n<p>But if anyone has the same problem then the following lines of code will get it working:</p>\n\n<pre><code>ExpressionParser parser; // we did have = new ExpressionParser(new JeksExpressionSyntax(), null);\nJeksInterpreter interpreter; // \n</code></pre>\n\n<p>And to create the interpreter:</p>\n\n<pre><code>interpreter = new JeksInterpreter() {\n\n      @Override\n      public Object getBinaryOperatorValue (Object binaryOperatorKey, Object param1, Object param2)\n      {\n        // Only functions may take a cell set as parameter\n        if ( param1 instanceof JeksCellSet || param2 instanceof JeksCellSet)\n          throw new IllegalArgumentException ();\n        // Enabled comparison between any type supported by Jeks\n        else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_EQUAL))\n          return param1 != null &amp;&amp; param1.equals (param2)\n                   ? Boolean.TRUE : Boolean.FALSE;\n        // Enabled comparison between any type supported by Jeks\n        else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_DIFFERENT))\n          return param1 != null &amp;&amp; param1.equals (param2) ? Boolean.FALSE : Boolean.TRUE;\n        else\n          return super.getBinaryOperatorValue (binaryOperatorKey, param1, param2);\n      }\n    };\n\n    parser = new ExpressionParser(new JeksExpressionSyntax(), null);\n</code></pre>\n"}],"owner":{"account_id":175182,"reputation":5658,"user_id":405022,"accept_rate":57,"display_name":"Andez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2805,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":3934680,"answer_count":2,"score":1,"last_activity_date":1693552391,"creation_date":1285861650,"question_id":3832323,"body_markdown":"We use the Jeks parser at present to evaluate expressions.  I cannot see a way to evaluate string expressions with it - for example:\r\n\r\n**IF( &quot;Test 1&quot; = &quot;Test 2&quot;)**\r\n\r\nIs there anything out there that can evaluate string and mathematical expressions in Java?  Preferably free or open source.\r\n","title":"Java String and Mathematical Expression Evaluators","body":"<p>We use the Jeks parser at present to evaluate expressions.  I cannot see a way to evaluate string expressions with it - for example:</p>\n<p><strong>IF( &quot;Test 1&quot; = &quot;Test 2&quot;)</strong></p>\n<p>Is there anything out there that can evaluate string and mathematical expressions in Java?  Preferably free or open source.</p>\n"},{"tags":["java","string","math","scriptengine","symja"],"comments":[{"owner":{"account_id":3467749,"reputation":926,"user_id":2902894,"accept_rate":80,"display_name":"drgPP"},"score":1,"creation_date":1427276606,"post_id":29252057,"comment_id":46707940,"body_markdown":"can you give a example of string you are using ?","body":"can you give a example of string you are using ?"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1460687152,"post_id":29252057,"comment_id":60869382,"body_markdown":"The ScriptEngine solution you are already using is a complete JavaScript interpreter, so it already supports functions.","body":"The ScriptEngine solution you are already using is a complete JavaScript interpreter, so it already supports functions."}],"answers":[{"tags":[],"owner":{"account_id":3914698,"reputation":469,"user_id":3238865,"accept_rate":77,"display_name":"grey00"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427277515,"creation_date":1427277515,"answer_id":29252490,"question_id":29252057,"body_markdown":"Take a look at the Math and String classes of the javadoc. If you know the format of the string, you should be able to search through it to find the specific numbers and functions you&#39;re using. If you are only using one of the avg/max/min per input, it should be pretty easy.\r\n\r\nHere&#39;s an example, lets say you want it formatted like so (it&#39;s easy if theres a comma after every value):\r\n\r\n&quot;FUNCTION(a, b, c,)&quot; -&gt; &quot;MIN(3,6,8,)&quot;\r\n\r\nThe first thing you want to do is have it figure out which function you&#39;re doing. Using the indexOf method, we can figure out if it contains MIN or MAX or whatever.\r\n\r\n     if(expression.indexOf(&quot;MIN&quot; != -1){\r\n          //calculate min value\r\n     }\r\n\r\nYou&#39;ll also need to create a list of all the numbers you&#39;re using.\r\n     \r\n     int lastIndex = exression.indexOf(&quot;(&quot;);\r\n     while(lastIndex &lt; expression.lastIndexOf(&quot;,&quot;){\r\n          listOfNums.add(Integer.parseInt(expression.subString(lastIndex + 1, expression.indexOf(&quot;,&quot;, lastIndex + 1)));\r\n          lastIndex = expression.indexOf(&quot;,&quot;, lastIndex + 1);\r\n      }","title":"How to evaluate string math expression in java","body":"<p>Take a look at the Math and String classes of the javadoc. If you know the format of the string, you should be able to search through it to find the specific numbers and functions you're using. If you are only using one of the avg/max/min per input, it should be pretty easy.</p>\n\n<p>Here's an example, lets say you want it formatted like so (it's easy if theres a comma after every value):</p>\n\n<p>\"FUNCTION(a, b, c,)\" -> \"MIN(3,6,8,)\"</p>\n\n<p>The first thing you want to do is have it figure out which function you're doing. Using the indexOf method, we can figure out if it contains MIN or MAX or whatever.</p>\n\n<pre><code> if(expression.indexOf(\"MIN\" != -1){\n      //calculate min value\n }\n</code></pre>\n\n<p>You'll also need to create a list of all the numbers you're using.</p>\n\n<pre><code> int lastIndex = exression.indexOf(\"(\");\n while(lastIndex &lt; expression.lastIndexOf(\",\"){\n      listOfNums.add(Integer.parseInt(expression.subString(lastIndex + 1, expression.indexOf(\",\", lastIndex + 1)));\n      lastIndex = expression.indexOf(\",\", lastIndex + 1);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3058979,"reputation":169,"user_id":2592073,"display_name":"Michael Couck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693552383,"creation_date":1427285172,"answer_id":29255203,"question_id":29252057,"body_markdown":"There are two very good expression parsers, JEP(paid now unfortunately - http://www.singularsys.com/jep/) and Jexl(much more than just an expression parser - http://commons.apache.org/proper/commons-jexl/).\r\n\r\nI prefer Jexl, so here is an example:\r\n\r\n    JexlEngine jexl = new JexlEngine();\r\n    // The expression to evaluate\r\n    Expression e = jexl.createExpression(&quot;((a || b) || !c) &amp;&amp; !(d &amp;&amp; e)&quot;);\r\n\r\n    // Populate the context\r\n    JexlContext context = new MapContext();\r\n    context.set(&quot;a&quot;, true);\r\n    context.set(&quot;b&quot;, true);\r\n    context.set(&quot;c&quot;, true);\r\n    context.set(&quot;d&quot;, true);\r\n    context.set(&quot;e&quot;, true);\r\n\r\n    // Work it out\r\n    Object result = e.evaluate(context);\r\n\r\nMore examples - http://commons.apache.org/proper/commons-jexl/reference/examples.html\r\n","title":"How to evaluate string math expression in java","body":"<p>There are two very good expression parsers, JEP(paid now unfortunately - <a href=\"http://www.singularsys.com/jep/\" rel=\"nofollow noreferrer\">http://www.singularsys.com/jep/</a>) and Jexl(much more than just an expression parser - <a href=\"http://commons.apache.org/proper/commons-jexl/\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-jexl/</a>).</p>\n<p>I prefer Jexl, so here is an example:</p>\n<pre><code>JexlEngine jexl = new JexlEngine();\n// The expression to evaluate\nExpression e = jexl.createExpression(&quot;((a || b) || !c) &amp;&amp; !(d &amp;&amp; e)&quot;);\n\n// Populate the context\nJexlContext context = new MapContext();\ncontext.set(&quot;a&quot;, true);\ncontext.set(&quot;b&quot;, true);\ncontext.set(&quot;c&quot;, true);\ncontext.set(&quot;d&quot;, true);\ncontext.set(&quot;e&quot;, true);\n\n// Work it out\nObject result = e.evaluate(context);\n</code></pre>\n<p>More examples - <a href=\"http://commons.apache.org/proper/commons-jexl/reference/examples.html\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-jexl/reference/examples.html</a></p>\n"}],"owner":{"account_id":5996884,"reputation":1,"user_id":4711290,"display_name":"Fridolin Amadou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1460687190,"answer_count":2,"score":0,"last_activity_date":1693552383,"creation_date":1427276402,"question_id":29252057,"body_markdown":"\r\nI want to evaluate a sting math expression in java. This string should contain functions (avg, max, min, ...)  applied to vectors or simple numbers.\r\nI already use ScriptEngineManager with javasript engine but it just use numbers. I also see symja lib but it look too complicated et not documented. How to do?\r\nThanks","title":"How to evaluate string math expression in java","body":"<p>I want to evaluate a sting math expression in java. This string should contain functions (avg, max, min, ...)  applied to vectors or simple numbers.\nI already use ScriptEngineManager with javasript engine but it just use numbers. I also see symja lib but it look too complicated et not documented. How to do?\nThanks</p>\n"},{"tags":["java","apache-fop"],"comments":[{"owner":{"account_id":5624664,"reputation":3721,"user_id":4453460,"display_name":"lfurini"},"score":0,"creation_date":1693570096,"post_id":77020497,"comment_id":135782028,"body_markdown":"Do you have any `&lt;directory&gt;/path/to/folder&lt;directory&gt;` or `&lt;auto-detect/&gt;` element in your configuration? If that&#39;s the case, there could be an unusual font in the folder that FOP cannot configure automatically, and the error would pop up only when the [font cache](https://xmlgraphics.apache.org/fop/2.9/fonts.html#font-cache) is built.","body":"Do you have any <code>&lt;directory&gt;&#47;path&#47;to&#47;folder&lt;directory&gt;</code> or <code>&lt;auto-detect&#47;&gt;</code> element in your configuration? If that&#39;s the case, there could be an unusual font in the folder that FOP cannot configure automatically, and the error would pop up only when the <a href=\"https://xmlgraphics.apache.org/fop/2.9/fonts.html#font-cache\" rel=\"nofollow noreferrer\">font cache</a> is built."},{"owner":{"account_id":1826220,"reputation":795,"user_id":1658941,"accept_rate":22,"display_name":"Naveen"},"score":0,"creation_date":1693946840,"post_id":77020497,"comment_id":135826139,"body_markdown":"I dont have &lt;auto-detect/&gt; in project,  directory folder exist in pom.xml. &lt;build&gt; &lt;resources&gt;&lt;directory&gt;src/main/resources&lt;/directory&gt;...","body":"I dont have &lt;auto-detect/&gt; in project,  directory folder exist in pom.xml. &lt;build&gt; &lt;resources&gt;&lt;directory&gt;src/main/resources&lt;/directory&gt;..."}],"owner":{"account_id":1826220,"reputation":795,"user_id":1658941,"accept_rate":22,"display_name":"Naveen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693552030,"creation_date":1693542356,"question_id":77020497,"body_markdown":"I am getting intermittent error while generating PDF using FOP.\r\n\r\n   \r\n\r\n     org.apache.fop.apps.FOPException: font without font-triplet\r\n    \tat org.apache.fop.util.LogUtil.handleError(LogUtil.java:42)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parseFonts(DefaultFontConfig.java:146)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parse(DefaultFontConfig.java:113)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:108)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:84)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$DefaultFontConfigParser.parse(DefaultFontConfig.java:74)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:126)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:109)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:101)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:97)\r\n    \tat org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:310)\r\n    \tat org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\r\n    Wrapped by: org.apache.fop.apps.FOPException: font without font-triplet\r\n    \tat org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:313)\r\n    \tat org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\r\n    \tat org.apache.fop.render.RendererFactory.createDocumentHandler(RendererFactory.java:397)\r\n    \tat org.apache.fop.render.RendererFactory.tryIFDocumentHandlerMaker(RendererFactory.java:297)\r\n\r\nI have configured font triplets:\r\n\r\n            &lt;font embed-url=&quot;classpath:/fop/static/fonts/arial.ttf&quot;&gt;\r\n              &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;normal&quot;/&gt;\r\n            &lt;/font&gt;\r\n            &lt;font embed-url=&quot;classpath:/fop/static/fonts/arialbd.ttf&quot;&gt;\r\n              &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;bold&quot;/&gt;\r\n            &lt;/font&gt;\r\n            .........\r\n\r\nThis issue is happening randomly most of the time PDF is generated successfully. Error is not specific for which font its not able to find font-triplet. \r\n\r\n","title":"org.apache.fop.apps.FOPException: font without font-triplet","body":"<p>I am getting intermittent error while generating PDF using FOP.</p>\n<pre><code> org.apache.fop.apps.FOPException: font without font-triplet\n    at org.apache.fop.util.LogUtil.handleError(LogUtil.java:42)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parseFonts(DefaultFontConfig.java:146)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parse(DefaultFontConfig.java:113)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:108)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:84)\n    at org.apache.fop.fonts.DefaultFontConfig$DefaultFontConfigParser.parse(DefaultFontConfig.java:74)\n    at org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:126)\n    at org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:109)\n    at org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:101)\n    at org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:97)\n    at org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:310)\n    at org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\n    at org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\nWrapped by: org.apache.fop.apps.FOPException: font without font-triplet\n    at org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:313)\n    at org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\n    at org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\n    at org.apache.fop.render.RendererFactory.createDocumentHandler(RendererFactory.java:397)\n    at org.apache.fop.render.RendererFactory.tryIFDocumentHandlerMaker(RendererFactory.java:297)\n</code></pre>\n<p>I have configured font triplets:</p>\n<pre><code>        &lt;font embed-url=&quot;classpath:/fop/static/fonts/arial.ttf&quot;&gt;\n          &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;normal&quot;/&gt;\n        &lt;/font&gt;\n        &lt;font embed-url=&quot;classpath:/fop/static/fonts/arialbd.ttf&quot;&gt;\n          &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;bold&quot;/&gt;\n        &lt;/font&gt;\n        .........\n</code></pre>\n<p>This issue is happening randomly most of the time PDF is generated successfully. Error is not specific for which font its not able to find font-triplet.</p>\n"},{"tags":["java","json","jackson","deserialization"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":6,"creation_date":1398278855,"post_id":16570073,"comment_id":35581125,"body_markdown":"Are you certain `@JsonUnwrapped` is working for deserialization? I just tried it and am getting `Could not read JSON: Unrecognized field...` errors when I try to deserialize the flattened JSON.","body":"Are you certain <code>@JsonUnwrapped</code> is working for deserialization? I just tried it and am getting <code>Could not read JSON: Unrecognized field...</code> errors when I try to deserialize the flattened JSON."}],"answers":[{"tags":[],"owner":{"account_id":2014980,"reputation":9943,"user_id":1802512,"accept_rate":80,"display_name":"hoaz"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1368635225,"creation_date":1368635225,"answer_id":16570333,"question_id":16570073,"body_markdown":"You can use `@JsonCreator` with `@JsonProperty` for each field:\r\n\r\n\t@JsonCreator\r\n\tpublic Parent(@JsonProperty(&quot;age&quot;) Integer age, @JsonProperty(&quot;firstName&quot;) String firstName,\r\n            @JsonProperty(&quot;lastName&quot;) String lastName) {\r\n\t\tthis.age = age;\r\n\t\tthis.name = new Name(firstName, lastName);\r\n\t}\r\n\r\nJackson does type checking and unknown field checking for you in this case.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>You can use <code>@JsonCreator</code> with <code>@JsonProperty</code> for each field:</p>\n\n<pre><code>@JsonCreator\npublic Parent(@JsonProperty(\"age\") Integer age, @JsonProperty(\"firstName\") String firstName,\n        @JsonProperty(\"lastName\") String lastName) {\n    this.age = age;\n    this.name = new Name(firstName, lastName);\n}\n</code></pre>\n\n<p>Jackson does type checking and unknown field checking for you in this case.</p>\n"},{"tags":[],"owner":{"account_id":3941187,"reputation":797,"user_id":3255540,"display_name":"Jan Mares"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1529606936,"creation_date":1529606936,"answer_id":50975650,"question_id":16570073,"body_markdown":"For those who googled here like me, trying to resolve issue when deserializing unwrapepd `Map`, there is a solution with `@JsonAnySetter`:\r\n\r\n    public class CountryList\r\n    {\r\n\r\n    \tMap&lt;String, Country&gt; countries = new HashMap&lt;&gt;();\r\n\r\n    \t@JsonAnySetter\r\n    \tpublic void setCountry(String key, Country value)\r\n\t    {\r\n\t\t    countries.put(key, value);\r\n\t    }\r\n\r\n    }\r\n","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>For those who googled here like me, trying to resolve issue when deserializing unwrapepd <code>Map</code>, there is a solution with <code>@JsonAnySetter</code>:</p>\n\n<pre><code>public class CountryList\n{\n\n    Map&lt;String, Country&gt; countries = new HashMap&lt;&gt;();\n\n    @JsonAnySetter\n    public void setCountry(String key, Country value)\n    {\n        countries.put(key, value);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1381048,"reputation":3561,"user_id":1314028,"accept_rate":75,"display_name":"spinlok"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1535396211,"creation_date":1535396211,"answer_id":52045439,"question_id":16570073,"body_markdown":"It does work for deserialization as well, although it&#39;s not mentioned in the docs explicitly, like you said. See the unit test for deserialization of `@JsonUnwrapped` here for confirmation - https://github.com/FasterXML/jackson-databind/blob/d2c083a6220f2875c97c29f4823d9818972511dc/src/test/java/com/fasterxml/jackson/databind/struct/TestUnwrapped.java#L138","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>It does work for deserialization as well, although it's not mentioned in the docs explicitly, like you said. See the unit test for deserialization of <code>@JsonUnwrapped</code> here for confirmation - <a href=\"https://github.com/FasterXML/jackson-databind/blob/d2c083a6220f2875c97c29f4823d9818972511dc/src/test/java/com/fasterxml/jackson/databind/struct/TestUnwrapped.java#L138\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-databind/blob/d2c083a6220f2875c97c29f4823d9818972511dc/src/test/java/com/fasterxml/jackson/databind/struct/TestUnwrapped.java#L138</a></p>\n"},{"tags":[],"owner":{"account_id":7173795,"reputation":159,"user_id":5480471,"display_name":"Artem Areshko"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1581008519,"creation_date":1580998894,"answer_id":60097109,"question_id":16570073,"body_markdown":"`@JsonUnwrapped` works for both serialization and deserialization, you shouldn&#39;t need to take any additional steps.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p><code>@JsonUnwrapped</code> works for both serialization and deserialization, you shouldn't need to take any additional steps.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1693551529,"creation_date":1612549284,"answer_id":66068579,"question_id":16570073,"body_markdown":"No changes are needed to your source object using `@JsonUnwrapped` to deserialize JSON back into the `Parent` class.\r\n\r\nDespite not being mentioned in the Javadocs prior to Jackson 2.13 (per [\r\njackson-annotations#184](https://github.com/FasterXML/jackson-annotations/issues/184)), the `@JsonUnwrapped` annotation applies to deserialization as well as serialization, so no additional configuration is needed to support deserialization of a field using the annotation.\r\n\r\nThe Jackson 2.13 [Javadocs for `@JsonUnwrapped`](http://fasterxml.github.io/jackson-annotations/javadoc/2.13/com/fasterxml/jackson/annotation/JsonUnwrapped.html) clarify that the annotation applies to deserialization as well as serialization:\r\n\r\n&gt; Annotation used to indicate that a property should be serialized &quot;unwrapped&quot; -- that is, if it would be serialized as JSON Object, its properties are instead included as properties of its containing Object -- and deserialized reproducing &quot;missing&quot; structure. \r\n&gt;\r\n&gt; [...]\r\n&gt;\r\n&gt; When values are deserialized &quot;wrapping&quot; is applied so that serialized output can be read back in.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>No changes are needed to your source object using <code>@JsonUnwrapped</code> to deserialize JSON back into the <code>Parent</code> class.</p>\n<p>Despite not being mentioned in the Javadocs prior to Jackson 2.13 (per <a href=\"https://github.com/FasterXML/jackson-annotations/issues/184\" rel=\"nofollow noreferrer\">\njackson-annotations#184</a>), the <code>@JsonUnwrapped</code> annotation applies to deserialization as well as serialization, so no additional configuration is needed to support deserialization of a field using the annotation.</p>\n<p>The Jackson 2.13 <a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.13/com/fasterxml/jackson/annotation/JsonUnwrapped.html\" rel=\"nofollow noreferrer\">Javadocs for <code>@JsonUnwrapped</code></a> clarify that the annotation applies to deserialization as well as serialization:</p>\n<blockquote>\n<p>Annotation used to indicate that a property should be serialized &quot;unwrapped&quot; -- that is, if it would be serialized as JSON Object, its properties are instead included as properties of its containing Object -- and deserialized reproducing &quot;missing&quot; structure.</p>\n<p>[...]</p>\n<p>When values are deserialized &quot;wrapping&quot; is applied so that serialized output can be read back in.</p>\n</blockquote>\n"}],"owner":{"account_id":146532,"reputation":2490,"user_id":357026,"accept_rate":69,"display_name":"Shaun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29561,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":16570333,"answer_count":5,"score":62,"last_activity_date":1693551753,"creation_date":1368634381,"question_id":16570073,"body_markdown":"Say I have the following class:\r\n\r\n```lang-java\r\npublic class Parent {\r\n  public int age;\r\n  @JsonUnwrapped\r\n  public Name name;\r\n}\r\n```\r\n\r\nProducing JSON:\r\n\r\n```lang-json\r\n{\r\n  &quot;age&quot; : 18,\r\n  &quot;first&quot; : &quot;Joey&quot;,\r\n  &quot;last&quot; : &quot;Sixpack&quot;\r\n}\r\n```\r\n\r\nHow do I deserialize this back into the Parent class? I could use `@JsonCreator`:\r\n\r\n```lang-java\r\n@JsonCreator\r\npublic Parent(Map&lt;String,String&gt; jsonMap) {\r\n  age = jsonMap.get(&quot;age&quot;);\r\n  name = new Name(jsonMap.get(&quot;first&quot;), jsonMap.get(&quot;last&quot;));\r\n}\r\n```\r\n\r\nBut this also effectively adds `@JsonIgnoreProperties(ignoreUnknown=true)` to the `Parent` class, as all properties map to here. So if you wanted unknown JSON fields to throw an exception, you&#39;d have to do that yourself. In addition, if the map values could be something other than Strings, you&#39;d have to do some manual type checking and conversion. Is there a way for Jackson to handle this case automatically?\r\n\r\n**Edit:**\r\nI might be crazy, but this actually appears to work despite never being explicitly mentioned in the documentation: [`JsonUnwrapped`](http://fasterxml.github.io/jackson-annotations/javadoc/2.2/com/fasterxml/jackson/annotation/JsonUnwrapped.html). \r\nI was pretty sure it didn&#39;t work for me previously. Still, the proposed `@JsonCreator` approach might be preferred when custom logic is required to deserialize unwrapped polymorphic types.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>Say I have the following class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Parent {\n  public int age;\n  @JsonUnwrapped\n  public Name name;\n}\n</code></pre>\n<p>Producing JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;age&quot; : 18,\n  &quot;first&quot; : &quot;Joey&quot;,\n  &quot;last&quot; : &quot;Sixpack&quot;\n}\n</code></pre>\n<p>How do I deserialize this back into the Parent class? I could use <code>@JsonCreator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonCreator\npublic Parent(Map&lt;String,String&gt; jsonMap) {\n  age = jsonMap.get(&quot;age&quot;);\n  name = new Name(jsonMap.get(&quot;first&quot;), jsonMap.get(&quot;last&quot;));\n}\n</code></pre>\n<p>But this also effectively adds <code>@JsonIgnoreProperties(ignoreUnknown=true)</code> to the <code>Parent</code> class, as all properties map to here. So if you wanted unknown JSON fields to throw an exception, you'd have to do that yourself. In addition, if the map values could be something other than Strings, you'd have to do some manual type checking and conversion. Is there a way for Jackson to handle this case automatically?</p>\n<p><strong>Edit:</strong>\nI might be crazy, but this actually appears to work despite never being explicitly mentioned in the documentation: <a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.2/com/fasterxml/jackson/annotation/JsonUnwrapped.html\" rel=\"nofollow noreferrer\"><code>JsonUnwrapped</code></a>.\nI was pretty sure it didn't work for me previously. Still, the proposed <code>@JsonCreator</code> approach might be preferred when custom logic is required to deserialize unwrapped polymorphic types.</p>\n"},{"tags":["java","postgresql","querydsl"],"answers":[{"tags":[],"owner":{"account_id":12334308,"reputation":11,"user_id":8999242,"display_name":"Kyung Song"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693551079,"creation_date":1693551079,"answer_id":77021065,"question_id":76661197,"body_markdown":"probably way too late, but check to see if you are using the correct &quot;list&quot; method\r\n\r\nyou should use list from\r\n\r\n    import static com.querydsl.core.group.GroupBy.list;\r\n\r\nNOT\r\n\r\n    import static com.querydsl.core.types.Projections.list;","title":"Querydsl SQL one-to-many relation Projection into object with nested list not working correctly","body":"<p>probably way too late, but check to see if you are using the correct &quot;list&quot; method</p>\n<p>you should use list from</p>\n<pre><code>import static com.querydsl.core.group.GroupBy.list;\n</code></pre>\n<p>NOT</p>\n<pre><code>import static com.querydsl.core.types.Projections.list;\n</code></pre>\n"}],"owner":{"account_id":4343059,"reputation":436,"user_id":3545829,"display_name":"Marek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693551079,"creation_date":1689072468,"question_id":76661197,"body_markdown":"I have simple relation in database\r\n\r\n\r\nACCOUNT\r\n\r\n|id|name |\r\n|--| --- |\r\n|1 | Euro account |\r\n|2 | Dolar account |\r\n\r\n\r\nACCOUNT_SETTING\r\n\r\n|id|account_id|name|value|\r\n|--| --- | --- | --- |\r\n|1 | 1|primary |true|\r\n|2 |1|active|true|\r\n|3 |1|temporal|false|\r\n|4 |2|active|false|\r\n\r\n\r\nI would like to get joined data from both tables projected into following DTO classes:\r\n\r\n```\r\npublic class Account {\r\n  private Long id;\r\n  private String name;\r\n  private List&lt;AccountSetting&gt; accountSettings;\r\n\r\n  public Account(Long id, String name, List&lt;AccountSetting&gt; accountSettings) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.accountSettings = accountSettings;\r\n  }\r\n\r\n  // getters setters\r\n} \r\n```\r\n\r\n\r\n```\r\npublic class AccountSetting {\r\n  private String name;\r\n  private boolean value;\r\n\r\n  public AccountSetting(String name, boolean value) {\r\n    this.name = name;\r\n    this.value = value;\r\n  }\r\n\r\n  // getters setters\r\n}\r\n```\r\n\r\nI have generated Q-classes for this database.\r\n\r\nI&#39;ve tried to set projection using grouping: \r\n\r\n```\r\nPostgreSQLQuery&lt;Tuple&gt; result = sqlQueryFactory\r\n      .select(\r\n        account.id,\r\n        account.name,\r\n        accountSetting.name,\r\n        accountSetting.value)\r\n      .from(account)\r\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\r\n\r\nMap&lt;Long, Account&gt; resultMap = result.transform(\r\n      GroupBy.groupBy(\r\n        account.id\r\n      ).as(\r\n        Projections.constructor(\r\n          Account.class,\r\n          account.id,\r\n          account.name,\r\n          list(Projections.constructor(\r\n              AccountSetting.class,\r\n              accountSetting.name,\r\n              accountSetting.value\r\n            )\r\n          )\r\n        )\r\n      )\r\n    );\r\n```\r\n\r\nAlso tied projection in select as follow:\r\n\r\n```\r\n    PostgreSQLQuery&lt;Account&gt; accountRows = sqlQueryFactory\r\n      .select(Projections.constructor(\r\n          Account.class,\r\n          account.id,\r\n          account.name,\r\n          list(Projections.constructor(\r\n              AccountSetting.class,\r\n              accountSetting.name,\r\n              accountSetting.value\r\n            )\r\n          )\r\n        )\r\n      )\r\n      .from(account)\r\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\r\n```\r\n\r\n\r\nEach time I&#39;m getting nested single-element-list of accountSettings (instead of 3 settings for account.id=1 and 1 setting list for account.id=2\r\n\r\n\r\nI&#39;m using querydsl v5.0.0.\r\n\r\nI will appreciate any advice...\r\n\r\nI found many answers (mostly related to QueryDSL JPA or QueryDSL Collections) related to QueryDSL resutls projections. Might be that for QueryDSL SQL I&#39;m doing something wrong?\r\n\r\nI&#39;ve checked already:\r\nhttps://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-collections/src/test/java/com/querydsl/collections/GroupByTest.java#L219C17-L219C42\r\n\r\nor \r\n\r\nhttps://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-core/src/test/java/com/querydsl/core/group/GroupByListTest.java#L185\r\n\r\nas a reference but it just doesn&#39;t work as expected for me.","title":"Querydsl SQL one-to-many relation Projection into object with nested list not working correctly","body":"<p>I have simple relation in database</p>\n<p>ACCOUNT</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>Euro account</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Dolar account</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>ACCOUNT_SETTING</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>account_id</th>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>primary</td>\n<td>true</td>\n</tr>\n<tr>\n<td>2</td>\n<td>1</td>\n<td>active</td>\n<td>true</td>\n</tr>\n<tr>\n<td>3</td>\n<td>1</td>\n<td>temporal</td>\n<td>false</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2</td>\n<td>active</td>\n<td>false</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I would like to get joined data from both tables projected into following DTO classes:</p>\n<pre><code>public class Account {\n  private Long id;\n  private String name;\n  private List&lt;AccountSetting&gt; accountSettings;\n\n  public Account(Long id, String name, List&lt;AccountSetting&gt; accountSettings) {\n    this.id = id;\n    this.name = name;\n    this.accountSettings = accountSettings;\n  }\n\n  // getters setters\n} \n</code></pre>\n<pre><code>public class AccountSetting {\n  private String name;\n  private boolean value;\n\n  public AccountSetting(String name, boolean value) {\n    this.name = name;\n    this.value = value;\n  }\n\n  // getters setters\n}\n</code></pre>\n<p>I have generated Q-classes for this database.</p>\n<p>I've tried to set projection using grouping:</p>\n<pre><code>PostgreSQLQuery&lt;Tuple&gt; result = sqlQueryFactory\n      .select(\n        account.id,\n        account.name,\n        accountSetting.name,\n        accountSetting.value)\n      .from(account)\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\n\nMap&lt;Long, Account&gt; resultMap = result.transform(\n      GroupBy.groupBy(\n        account.id\n      ).as(\n        Projections.constructor(\n          Account.class,\n          account.id,\n          account.name,\n          list(Projections.constructor(\n              AccountSetting.class,\n              accountSetting.name,\n              accountSetting.value\n            )\n          )\n        )\n      )\n    );\n</code></pre>\n<p>Also tied projection in select as follow:</p>\n<pre><code>    PostgreSQLQuery&lt;Account&gt; accountRows = sqlQueryFactory\n      .select(Projections.constructor(\n          Account.class,\n          account.id,\n          account.name,\n          list(Projections.constructor(\n              AccountSetting.class,\n              accountSetting.name,\n              accountSetting.value\n            )\n          )\n        )\n      )\n      .from(account)\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\n</code></pre>\n<p>Each time I'm getting nested single-element-list of accountSettings (instead of 3 settings for account.id=1 and 1 setting list for account.id=2</p>\n<p>I'm using querydsl v5.0.0.</p>\n<p>I will appreciate any advice...</p>\n<p>I found many answers (mostly related to QueryDSL JPA or QueryDSL Collections) related to QueryDSL resutls projections. Might be that for QueryDSL SQL I'm doing something wrong?</p>\n<p>I've checked already:\n<a href=\"https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-collections/src/test/java/com/querydsl/collections/GroupByTest.java#L219C17-L219C42\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-collections/src/test/java/com/querydsl/collections/GroupByTest.java#L219C17-L219C42</a></p>\n<p>or</p>\n<p><a href=\"https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-core/src/test/java/com/querydsl/core/group/GroupByListTest.java#L185\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-core/src/test/java/com/querydsl/core/group/GroupByListTest.java#L185</a></p>\n<p>as a reference but it just doesn't work as expected for me.</p>\n"},{"tags":["java","wicket"],"answers":[{"tags":[],"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693550467,"creation_date":1693550467,"answer_id":77021011,"question_id":76982811,"body_markdown":"    I expect setresponsePage to call the right constructor only once and pass the model.\r\n\r\nMe too! But I need to debug it to see why this happens.\r\n\r\nYou could try with:\r\n\r\n    @Override\r\n    public void onSubmit() {\r\n        throw new RestartResponseException(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\r\n    }","title":"Wicket setResponsePage calls constructor multiple times","body":"<pre><code>I expect setresponsePage to call the right constructor only once and pass the model.\n</code></pre>\n<p>Me too! But I need to debug it to see why this happens.</p>\n<p>You could try with:</p>\n<pre><code>@Override\npublic void onSubmit() {\n    throw new RestartResponseException(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\n}\n</code></pre>\n"}],"owner":{"account_id":7509469,"reputation":1,"user_id":5704932,"display_name":"Jack Sparrow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693550467,"creation_date":1693050375,"question_id":76982811,"body_markdown":"Trying to pass a model from one page to another. \r\nApplication.init\r\n`getRequestCycleSettings().setRenderStrategy(RequestCycleSettings.RenderStrategy.ONE_PASS_RENDER)`\r\n\r\n\r\nI have two pages, both defined with 3 constructors each. PageOne has a form. OnSubmit is supposed to pass the page model from PageOne to PageTwo.\r\n\r\nThe call to setResponsePage first calls the constructor WebPage​(IModel&lt;?&gt; model) and passes the model, as expected.\r\n\r\nBut immediately after that, it also calls the WebPage​() (noargs) _and_ the WebPage​(PageParameters parameters) constructor. \r\nAs a result, PageTwo gets constructed 3 times and ends up having a null DefaultModel.\r\n\r\nHow can i tell Wicket to stop after calling the WebPage​(IModel&lt;?&gt; model) contructor?\r\n\r\nHere is the code:\r\n\r\n```\r\npublic class PageOne extends WebPage {\r\n    // Similar constructors for PageTwo\r\n    public PageOne() {\r\n        super();\r\n    }\r\n\r\n    public PageOne(PageParameters p) {\r\n        super(p);\r\n    }\r\n\r\n    public PageOne(IModel&lt;?&gt; model) {\r\n        super(model);\r\n    }\r\n\r\n   @Override\r\n   protected void onInitialize() {\r\n       super.onInitialize();\r\n\r\n       Form&lt;Void&gt; form = new Form&lt;Void&gt;(&quot;form&quot;) {\r\n           @Override\r\n           public void onSubmit() {\r\n               setResponsePage(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\r\n           }\r\n      };\r\n   }\r\n}\r\n```\r\n\r\nThank you\r\n\r\nWicket version is 9.13.0\r\n\r\nApplication is a Springboot App (springboot version 2.7.11), in case that matters.\r\n\r\nI expect setresponsePage to call the right constructor only once and pass the model.","title":"Wicket setResponsePage calls constructor multiple times","body":"<p>Trying to pass a model from one page to another.\nApplication.init\n<code>getRequestCycleSettings().setRenderStrategy(RequestCycleSettings.RenderStrategy.ONE_PASS_RENDER)</code></p>\n<p>I have two pages, both defined with 3 constructors each. PageOne has a form. OnSubmit is supposed to pass the page model from PageOne to PageTwo.</p>\n<p>The call to setResponsePage first calls the constructor WebPage​(IModel&lt;?&gt; model) and passes the model, as expected.</p>\n<p>But immediately after that, it also calls the WebPage​() (noargs) <em>and</em> the WebPage​(PageParameters parameters) constructor.\nAs a result, PageTwo gets constructed 3 times and ends up having a null DefaultModel.</p>\n<p>How can i tell Wicket to stop after calling the WebPage​(IModel&lt;?&gt; model) contructor?</p>\n<p>Here is the code:</p>\n<pre><code>public class PageOne extends WebPage {\n    // Similar constructors for PageTwo\n    public PageOne() {\n        super();\n    }\n\n    public PageOne(PageParameters p) {\n        super(p);\n    }\n\n    public PageOne(IModel&lt;?&gt; model) {\n        super(model);\n    }\n\n   @Override\n   protected void onInitialize() {\n       super.onInitialize();\n\n       Form&lt;Void&gt; form = new Form&lt;Void&gt;(&quot;form&quot;) {\n           @Override\n           public void onSubmit() {\n               setResponsePage(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\n           }\n      };\n   }\n}\n</code></pre>\n<p>Thank you</p>\n<p>Wicket version is 9.13.0</p>\n<p>Application is a Springboot App (springboot version 2.7.11), in case that matters.</p>\n<p>I expect setresponsePage to call the right constructor only once and pass the model.</p>\n"},{"tags":["java","apache-kafka","apache-flink","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639687111,"creation_date":1639687111,"answer_id":70385328,"question_id":70384274,"body_markdown":"Sure, you can download whatever you want from wherever before you give a properties object to a KafkaConsumer. However, the user running the Java process will need some access to the local filesystem in order to download files. \r\n\r\nI think packaging the files as part of your application JAR makes more sense, however, I don&#39;t know an easy way to refer to a classpath resource as if it were a regular filesystem path. If the code runs in YARN cluster, you can try using `yarn.provided.lib.dirs` option when submitting as well","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>Sure, you can download whatever you want from wherever before you give a properties object to a KafkaConsumer. However, the user running the Java process will need some access to the local filesystem in order to download files.</p>\n<p>I think packaging the files as part of your application JAR makes more sense, however, I don't know an easy way to refer to a classpath resource as if it were a regular filesystem path. If the code runs in YARN cluster, you can try using <code>yarn.provided.lib.dirs</code> option when submitting as well</p>\n"},{"tags":[],"owner":{"account_id":25611257,"reputation":1,"user_id":19384650,"display_name":"William Chukwu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655829649,"creation_date":1655828987,"answer_id":72704241,"question_id":70384274,"body_markdown":"I used a workaround tempoarily, upload your certificates to a fileshare and make your application, during initialization, dowload the certificates from the file share and save it to the location of choice like /home/site/ca.p12 then kakfa properties should read \r\n...\r\nssl.truststore.location=/home/site/ca.p12\r\n...\r\n\r\nHere are few lines of code to help you download and save your certificate.\r\n\r\n```    CloudStorageAccount storageAccount = CloudStorageAccount.parse(connectionString);\r\n// Create the Azure Files client.\r\n    CloudFileClient fileClient = storageAccount.createCloudFileClient();\r\n// Get a reference to the file share\r\n    CloudFileShare share = fileClient.getShareReference(&quot;[SHARENAME]&quot;);\r\n// Get a reference to the root directory for the share.\r\n    CloudFileDirectory rootDir = share.getRootDirectoryReference();\r\n// Get a reference to the directory where the file to be deleted is in\r\n    CloudFileDirectory containerDir = rootDir.getDirectoryReference(&quot;[DIRECTORY]&quot;);\r\n    CloudFile file = containerDir.getFileReference(&quot;[FILENAME]&quot;);\r\nfile.downloadToFile(&quot;/home/site/ca.p12&quot;);\r\n```","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>I used a workaround tempoarily, upload your certificates to a fileshare and make your application, during initialization, dowload the certificates from the file share and save it to the location of choice like /home/site/ca.p12 then kakfa properties should read\n...\nssl.truststore.location=/home/site/ca.p12\n...</p>\n<p>Here are few lines of code to help you download and save your certificate.</p>\n<pre><code>// Create the Azure Files client.\n    CloudFileClient fileClient = storageAccount.createCloudFileClient();\n// Get a reference to the file share\n    CloudFileShare share = fileClient.getShareReference(&quot;[SHARENAME]&quot;);\n// Get a reference to the root directory for the share.\n    CloudFileDirectory rootDir = share.getRootDirectoryReference();\n// Get a reference to the directory where the file to be deleted is in\n    CloudFileDirectory containerDir = rootDir.getDirectoryReference(&quot;[DIRECTORY]&quot;);\n    CloudFile file = containerDir.getFileReference(&quot;[FILENAME]&quot;);\nfile.downloadToFile(&quot;/home/site/ca.p12&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1531501,"reputation":487,"user_id":1428596,"accept_rate":100,"display_name":"DoNuT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693550160,"creation_date":1693550160,"answer_id":77020981,"question_id":70384274,"body_markdown":"You can use alternate settings to provide the files dynamically without going the way around of dumping it in the file system.\r\n\r\n**ssl.truststore.certificates**\r\n\r\n&gt; Trusted certificates in the format specified by &#39;ssl.truststore.type&#39;. Default SSL engine factory supports only PEM format with X.509 certificates.\r\n\r\n**ssl.keystore.key**\r\n\r\n&gt; Certificate chain in the format specified by &#39;ssl.keystore.type&#39;. Default SSL engine factory supports only PEM format with a list of X.509 certificates\r\n\r\nFor example, see samples in https://cwiki.apache.org/confluence/display/KAFKA/KIP-651+-+Support+PEM+format+for+SSL+certificates+and+private+key#KIP651SupportPEMformatforSSLcertificatesandprivatekey-ProposedChanges\r\n\r\n    ssl.keystore.certificate.chain=-----BEGIN CERTIFICATE----- \\\r\n    MIIC4jCCAcqgAwIBAgIIJHw42Lu1+w8wDQYJKoZIhvcNAQEFBQAwJDEPMA0GA1UE \\\r\n    AwwGY2xpZW50MREwDwYDVQQKDAhBIGNsaWVudDAeFw0yMDA4MDMwOTU4MTZaFw0y \\\r\n    MDA5MDIwOTU4MTZaMCQxDzANBgNVBAMMBmNsaWVudDERMA8GA1UECgwIQSBjbGll \\\r\n    bnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwTUf499MROpsz8LFr \\\r\n    EOZEvUH6e1qks6AJEWjD7BY/SmwRijNPAaJhHaogYaVPrDEmFfexZDVhtc4eDkDI \\\r\n    rW6+ZlkpNZupkINCR4R49f7JCjFz6rwGl4lSpa3mIhkXS/ZD0pjCYB9t2xBuTWVq \\\r\n    ap40WqbQDsJHNH+9V/nzktX0ZOB6AgUuzFwLu3YDKS8XFD5TAdZKIu8rtxFzL1Uo \\\r\n    HmiWFU9EoHROs23xJn7jCEOBq3L2b5IEE/ZHZVw/ooi/jJIID21bkiI731RWOoE3 \\\r\n    ClEsh7CQHWlXwyoJmMP2dZrXbERpZclH0ozb5JJwJiMtB1uxUiD3wKF/rlcfRAcZ \\\r\n    AR4vAgMBAAGjGDAWMBQGA1UdEQQNMAuCCWxvY2FsaG9zdDANBgkqhkiG9w0BAQUF \\\r\n    AAOCAQEAOqNAWknyUljdFeC/O5fDwoGYqHJY3dkinhjfiDEQm+RLLli64xjlNyRJ \\\r\n    u4ZMHqEE4yQBnQGFxHkKIcA/poDgntSJrSFsfnpHzZJ5kz5zQdNDT9BYQIPWqoe2 \\\r\n    0plNB6NjZeUn2OH+hAJIbclye0PXMrLwnDVUOJPS9xnlfgbrvIM0HCjtG95oeWv4 \\\r\n    VLLOKaxiNYEX0xx9fT/lKjnqgi7OPAMTvfp5y1t4BCoe/43o8Pd0Ih2hdgVE6rLn \\\r\n    mxEaTdlbQNp1ju70Ztl3NNt17+tceq0VbfTRI1xufTB5dCPWeeg0ekC9jMMs42R+ \\\r\n    PiGYp7h8A3hRC5m8pYnKLSJp5ymITg== \\\r\n    -----END CERTIFICATE-----\r\n     \r\n    ssl.keystore.key=-----BEGIN ENCRYPTED PRIVATE KEY----- \\\r\n    ... \\\r\n    -----END ENCRYPTED PRIVATE KEY--\r\n\r\nThis method of providing the keys is more convenient when keys are not packaged or static.","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>You can use alternate settings to provide the files dynamically without going the way around of dumping it in the file system.</p>\n<p><strong>ssl.truststore.certificates</strong></p>\n<blockquote>\n<p>Trusted certificates in the format specified by 'ssl.truststore.type'. Default SSL engine factory supports only PEM format with X.509 certificates.</p>\n</blockquote>\n<p><strong>ssl.keystore.key</strong></p>\n<blockquote>\n<p>Certificate chain in the format specified by 'ssl.keystore.type'. Default SSL engine factory supports only PEM format with a list of X.509 certificates</p>\n</blockquote>\n<p>For example, see samples in <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-651+-+Support+PEM+format+for+SSL+certificates+and+private+key#KIP651SupportPEMformatforSSLcertificatesandprivatekey-ProposedChanges\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/KAFKA/KIP-651+-+Support+PEM+format+for+SSL+certificates+and+private+key#KIP651SupportPEMformatforSSLcertificatesandprivatekey-ProposedChanges</a></p>\n<pre><code>ssl.keystore.certificate.chain=-----BEGIN CERTIFICATE----- \\\nMIIC4jCCAcqgAwIBAgIIJHw42Lu1+w8wDQYJKoZIhvcNAQEFBQAwJDEPMA0GA1UE \\\nAwwGY2xpZW50MREwDwYDVQQKDAhBIGNsaWVudDAeFw0yMDA4MDMwOTU4MTZaFw0y \\\nMDA5MDIwOTU4MTZaMCQxDzANBgNVBAMMBmNsaWVudDERMA8GA1UECgwIQSBjbGll \\\nbnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwTUf499MROpsz8LFr \\\nEOZEvUH6e1qks6AJEWjD7BY/SmwRijNPAaJhHaogYaVPrDEmFfexZDVhtc4eDkDI \\\nrW6+ZlkpNZupkINCR4R49f7JCjFz6rwGl4lSpa3mIhkXS/ZD0pjCYB9t2xBuTWVq \\\nap40WqbQDsJHNH+9V/nzktX0ZOB6AgUuzFwLu3YDKS8XFD5TAdZKIu8rtxFzL1Uo \\\nHmiWFU9EoHROs23xJn7jCEOBq3L2b5IEE/ZHZVw/ooi/jJIID21bkiI731RWOoE3 \\\nClEsh7CQHWlXwyoJmMP2dZrXbERpZclH0ozb5JJwJiMtB1uxUiD3wKF/rlcfRAcZ \\\nAR4vAgMBAAGjGDAWMBQGA1UdEQQNMAuCCWxvY2FsaG9zdDANBgkqhkiG9w0BAQUF \\\nAAOCAQEAOqNAWknyUljdFeC/O5fDwoGYqHJY3dkinhjfiDEQm+RLLli64xjlNyRJ \\\nu4ZMHqEE4yQBnQGFxHkKIcA/poDgntSJrSFsfnpHzZJ5kz5zQdNDT9BYQIPWqoe2 \\\n0plNB6NjZeUn2OH+hAJIbclye0PXMrLwnDVUOJPS9xnlfgbrvIM0HCjtG95oeWv4 \\\nVLLOKaxiNYEX0xx9fT/lKjnqgi7OPAMTvfp5y1t4BCoe/43o8Pd0Ih2hdgVE6rLn \\\nmxEaTdlbQNp1ju70Ztl3NNt17+tceq0VbfTRI1xufTB5dCPWeeg0ekC9jMMs42R+ \\\nPiGYp7h8A3hRC5m8pYnKLSJp5ymITg== \\\n-----END CERTIFICATE-----\n \nssl.keystore.key=-----BEGIN ENCRYPTED PRIVATE KEY----- \\\n... \\\n-----END ENCRYPTED PRIVATE KEY--\n</code></pre>\n<p>This method of providing the keys is more convenient when keys are not packaged or static.</p>\n"}],"owner":{"account_id":1888553,"reputation":18649,"user_id":1767106,"accept_rate":78,"display_name":"clay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5573,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77020981,"answer_count":3,"score":0,"last_activity_date":1693550160,"creation_date":1639681069,"question_id":70384274,"body_markdown":"I can successfully connect to an SSL secured Kafka cluster with the following client properties:\r\n\r\n    security.protocol=SSL\r\n    ssl.truststore.type=PKCS12\r\n    ssl.truststore.location=ca.p12\r\n    ssl.truststore.password=&lt;redacted&gt;\r\n    ssl.keystore.type=PKCS12\r\n    ssl.keystore.location=user.p12\r\n    ssl.keystore.password=&lt;redacted&gt;\r\n\r\nHowever, I’m writing a Java app that is running in a managed cloud environment, where I don’t have access to the file system.  So I can’t just give it a local file path to .p12 files.\r\n\r\nAre there any other alternatives, like using loading from S3, or from memory, or from a JVM classpath resource?\r\n\r\nSpecifically, this is a Flink app running on Amazon&#39;s Kinesis Analytics Managed Flink cluster service.","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>I can successfully connect to an SSL secured Kafka cluster with the following client properties:</p>\n<pre><code>security.protocol=SSL\nssl.truststore.type=PKCS12\nssl.truststore.location=ca.p12\nssl.truststore.password=&lt;redacted&gt;\nssl.keystore.type=PKCS12\nssl.keystore.location=user.p12\nssl.keystore.password=&lt;redacted&gt;\n</code></pre>\n<p>However, I’m writing a Java app that is running in a managed cloud environment, where I don’t have access to the file system.  So I can’t just give it a local file path to .p12 files.</p>\n<p>Are there any other alternatives, like using loading from S3, or from memory, or from a JVM classpath resource?</p>\n<p>Specifically, this is a Flink app running on Amazon's Kinesis Analytics Managed Flink cluster service.</p>\n"},{"tags":["java","pdf","pdfbox","fillable"],"comments":[{"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"score":0,"creation_date":1693485005,"post_id":77014863,"comment_id":135769156,"body_markdown":"@TilmanHausherr changing the version to 2.0.29 didn&#39;t help either.","body":"@TilmanHausherr changing the version to 2.0.29 didn&#39;t help either."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693488176,"post_id":77014863,"comment_id":135769835,"body_markdown":"Please share the PDF. If you can&#39;t share the PDF, try to reproduce the problem with a non confidential document and share that one. We do support comb fields. Btw setTextField() is too complex, you can access the field directly with `acroform.getField(name)`.","body":"Please share the PDF. If you can&#39;t share the PDF, try to reproduce the problem with a non confidential document and share that one. We do support comb fields. Btw setTextField() is too complex, you can access the field directly with <code>acroform.getField(name)</code>."},{"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"score":0,"creation_date":1693489228,"post_id":77014863,"comment_id":135770139,"body_markdown":"https://drive.google.com/file/d/11u_gQQbshb1ARFVMU1VMZDarKT9nhnUV/view?usp=sharing.\n@TilmanHausherr, Please find above the fillable pdf document. Also, thanks for the suggestion.","body":"<a href=\"https://drive.google.com/file/d/11u_gQQbshb1ARFVMU1VMZDarKT9nhnUV/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/11u_gQQbshb1ARFVMU1VMZDarKT9nhnUV/&hellip;</a>. @TilmanHausherr, Please find above the fillable pdf document. Also, thanks for the suggestion."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693505197,"post_id":77014863,"comment_id":135773621,"body_markdown":"I had a look... the glyphs look better on my machine. But I think what you&#39;re complaining about is that you&#39;re missing the combs. The PDF specification doesn&#39;t mention these, although I see that Adobe does them. Maybe it didn&#39;t at the time this was written.","body":"I had a look... the glyphs look better on my machine. But I think what you&#39;re complaining about is that you&#39;re missing the combs. The PDF specification doesn&#39;t mention these, although I see that Adobe does them. Maybe it didn&#39;t at the time this was written."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693505388,"post_id":77014863,"comment_id":135773655,"body_markdown":"Here&#39;s how it looks: https://imgur.com/a/3ZQabae","body":"Here&#39;s how it looks: <a href=\"https://imgur.com/a/3ZQabae\" rel=\"nofollow noreferrer\">imgur.com/a/3ZQabae</a>"},{"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"score":1,"creation_date":1693549608,"post_id":77014863,"comment_id":135778333,"body_markdown":"Figured out that it was an issue with the pdf. Flattened the pdf and recreated the form fields using adobe acrobat. Now it is working just fine. Thanks @KJ &amp; TilmanHausherr.","body":"Figured out that it was an issue with the pdf. Flattened the pdf and recreated the form fields using adobe acrobat. Now it is working just fine. Thanks @KJ &amp; TilmanHausherr."}],"answers":[{"tags":[],"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693549882,"creation_date":1693549882,"answer_id":77020958,"question_id":77014863,"body_markdown":"It was an issue with the pdf i was using. Flattening the pdf and then recreating the form fields using adobe acrobat made it work. \r\n\r\nAlso, a smaller optimisation in setTextField method(suggested by @TilmanHausherr)\r\n\r\n    private void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\r\n\t\tif (value != null) {\r\n\t\t\tacroForm.getField(fieldName).setValue(value);\r\n\t\t\tif(isCombField) {\r\n\t\t\t\t((PDTextField)acroForm.getField(fieldName)).setComb(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Apache PDFBox segmented digits display not working","body":"<p>It was an issue with the pdf i was using. Flattening the pdf and then recreating the form fields using adobe acrobat made it work.</p>\n<p>Also, a smaller optimisation in setTextField method(suggested by @TilmanHausherr)</p>\n<pre><code>private void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\n    if (value != null) {\n        acroForm.getField(fieldName).setValue(value);\n        if(isCombField) {\n            ((PDTextField)acroForm.getField(fieldName)).setComb(true);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020958,"answer_count":1,"score":1,"last_activity_date":1693549882,"creation_date":1693476555,"question_id":77014863,"body_markdown":"I have a fillable pdf in which i have a field IFSC code to be filled.\r\n\r\n[![This is the fillable field that needs to be filled in segments][1]][1]\r\n\r\nThis is my code to fill the acroform\r\n\r\n```\r\npublic String generatePreFilledMandateForm(PnachDownloadRequestDto request) {\r\n\t\tByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n\t\ttry {\r\n\t\t\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(Constants.DATE_FORMAT_DD_MM_YYYY);\r\n\t\t\tLocalDateTime now = LocalDateTime.now();\r\n\t\t\tString currentDate = dtf.format(now);\r\n\t\t\tString currentDateAdded10Years = dtf.format(now.plusYears(10));\r\n\r\n\t\t\tPDDocument pdfDocument = PDDocument.load(new ClassPathResource(&quot;templates/IDFCPnachForm.pdf&quot;).getInputStream());\r\n\r\n\t\t\tByteArrayOutputStream byteData = new ByteArrayOutputStream();\r\n\r\n\t\t\tPDAcroForm acroForm = pdfDocument.getDocumentCatalog().getAcroForm();\r\n\t\t\tsetTextField(acroForm,&quot;date&quot;,currentDate,true);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleWithBank&quot;,request.getBankName().toUpperCase(),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleBankAcNumber&quot;,request.getAccountNumber(),true);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleIfscMicr&quot;,request.getIfscCode(),true);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleAmountWords&quot;,MoneyConverterDigitToWordsUtil.convertToWord(request.getAmountInRupees().toString()),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleAmount&quot;,request.getAmountInRupees().toString() + &quot;/-&quot;,false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleReference1&quot;,request.getLoanNo(),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleMobileNo&quot;,request.getPhoneNo(),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectanglePrimaryNameField&quot;,request.getCustomerName(),false);\r\n\t\t\tsetTextField(acroForm,&quot;fromDate&quot;,currentDate,true);\r\n\t\t\tsetTextField(acroForm,&quot;toDate&quot;,currentDateAdded10Years,true);\r\n\r\n\t\t\tacroForm.flatten();\r\n\r\n\t\t\tpdfDocument.save(byteArrayOutputStream);\r\n\r\n\t\t\tpdfDocument.close();\r\n\t\t\tString base64EncodedPdf = Base64.getEncoder().encodeToString(byteArrayOutputStream.toByteArray());\r\n\r\n\t\t\treturn base64EncodedPdf;\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(&quot;Exception in generatePreFilledMandateForm {}&quot;,e.getMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\nprivate void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\r\n\t\tif (value != null) {\r\n\t\t\tList&lt;PDField&gt; fields = acroForm.getFields();\r\n\t\t\tfor (PDField field : fields) {\r\n\t\t\t\tif (field.getFullyQualifiedName().equals(fieldName)) {\r\n\t\t\t\t\tif (isCombField) {\r\n\t\t\t\t\t\t((PDTextField) field).setComb(true);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfield.setValue(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nBut post filling and flattening. The response pdf doesn&#39;t have proper comb structure. PFB Response.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAlso,\r\nI am using Apache PDFBox 2.0.29.\r\n\r\n\r\nExpected form:\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XJgqW.png\r\n  [2]: https://i.stack.imgur.com/pvWyU.png\r\n  [3]: https://i.stack.imgur.com/SfdsE.png","title":"Apache PDFBox segmented digits display not working","body":"<p>I have a fillable pdf in which i have a field IFSC code to be filled.</p>\n<p><a href=\"https://i.stack.imgur.com/XJgqW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XJgqW.png\" alt=\"This is the fillable field that needs to be filled in segments\" /></a></p>\n<p>This is my code to fill the acroform</p>\n<pre><code>public String generatePreFilledMandateForm(PnachDownloadRequestDto request) {\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        try {\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(Constants.DATE_FORMAT_DD_MM_YYYY);\n            LocalDateTime now = LocalDateTime.now();\n            String currentDate = dtf.format(now);\n            String currentDateAdded10Years = dtf.format(now.plusYears(10));\n\n            PDDocument pdfDocument = PDDocument.load(new ClassPathResource(&quot;templates/IDFCPnachForm.pdf&quot;).getInputStream());\n\n            ByteArrayOutputStream byteData = new ByteArrayOutputStream();\n\n            PDAcroForm acroForm = pdfDocument.getDocumentCatalog().getAcroForm();\n            setTextField(acroForm,&quot;date&quot;,currentDate,true);\n            setTextField(acroForm,&quot;rectangleWithBank&quot;,request.getBankName().toUpperCase(),false);\n            setTextField(acroForm,&quot;rectangleBankAcNumber&quot;,request.getAccountNumber(),true);\n            setTextField(acroForm,&quot;rectangleIfscMicr&quot;,request.getIfscCode(),true);\n            setTextField(acroForm,&quot;rectangleAmountWords&quot;,MoneyConverterDigitToWordsUtil.convertToWord(request.getAmountInRupees().toString()),false);\n            setTextField(acroForm,&quot;rectangleAmount&quot;,request.getAmountInRupees().toString() + &quot;/-&quot;,false);\n            setTextField(acroForm,&quot;rectangleReference1&quot;,request.getLoanNo(),false);\n            setTextField(acroForm,&quot;rectangleMobileNo&quot;,request.getPhoneNo(),false);\n            setTextField(acroForm,&quot;rectanglePrimaryNameField&quot;,request.getCustomerName(),false);\n            setTextField(acroForm,&quot;fromDate&quot;,currentDate,true);\n            setTextField(acroForm,&quot;toDate&quot;,currentDateAdded10Years,true);\n\n            acroForm.flatten();\n\n            pdfDocument.save(byteArrayOutputStream);\n\n            pdfDocument.close();\n            String base64EncodedPdf = Base64.getEncoder().encodeToString(byteArrayOutputStream.toByteArray());\n\n            return base64EncodedPdf;\n        } catch (Exception e) {\n            log.error(&quot;Exception in generatePreFilledMandateForm {}&quot;,e.getMessage());\n            e.printStackTrace();\n        }\n        return null;\n    }\n\nprivate void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\n        if (value != null) {\n            List&lt;PDField&gt; fields = acroForm.getFields();\n            for (PDField field : fields) {\n                if (field.getFullyQualifiedName().equals(fieldName)) {\n                    if (isCombField) {\n                        ((PDTextField) field).setComb(true);\n\n                    }\n                    field.setValue(value);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>But post filling and flattening. The response pdf doesn't have proper comb structure. PFB Response.</p>\n<p><a href=\"https://i.stack.imgur.com/pvWyU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pvWyU.png\" alt=\"enter image description here\" /></a></p>\n<p>Also,\nI am using Apache PDFBox 2.0.29.</p>\n<p>Expected form:\n<a href=\"https://i.stack.imgur.com/SfdsE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SfdsE.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","grpc","grpc-java"],"answers":[{"tags":[],"owner":{"account_id":14947494,"reputation":506,"user_id":10792320,"display_name":"San P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693459146,"creation_date":1693459146,"answer_id":77012994,"question_id":77005163,"body_markdown":"&gt; but in Java , ConfigFileInfo not generate , I can not find this class, how to fix it ?\r\n\r\nIn Java too this will be a nested (inner) class inside `GetTaskConfigsReply`. So if you find `GetTaskConfigsReply.java`, you will see `ConfigFileInfo` class defined as a nested class inside `GetTaskConfigsReply`","title":"Java gRPC, nested class not generate","body":"<blockquote>\n<p>but in Java , ConfigFileInfo not generate , I can not find this class, how to fix it ?</p>\n</blockquote>\n<p>In Java too this will be a nested (inner) class inside <code>GetTaskConfigsReply</code>. So if you find <code>GetTaskConfigsReply.java</code>, you will see <code>ConfigFileInfo</code> class defined as a nested class inside <code>GetTaskConfigsReply</code></p>\n"},{"tags":[],"owner":{"account_id":16242465,"reputation":61,"user_id":11728446,"display_name":"nsj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693549820,"creation_date":1693549820,"answer_id":77020949,"question_id":77005163,"body_markdown":"Ok, this should be use `Maven` to compiler, everything is ok now. ","title":"Java gRPC, nested class not generate","body":"<p>Ok, this should be use <code>Maven</code> to compiler, everything is ok now.</p>\n"}],"owner":{"account_id":16242465,"reputation":61,"user_id":11728446,"display_name":"nsj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020949,"answer_count":2,"score":1,"last_activity_date":1693549820,"creation_date":1693372978,"question_id":77005163,"body_markdown":"\r\n\r\npart of proto:\r\n```\r\nmessage GetTaskConfigsReply{\r\n  message ConfigFileInfo{\r\n    string name = 1;\r\n    string path = 2;\r\n    string modified_time = 3;\r\n  }\r\n  repeated ConfigFileInfo configs = 1;\r\n}\r\n```\r\n\r\nHi,I&#39;m new in Java,I want to use gRPC to remote control another C# Application,The C# Application will send this Java Application `GetTaskConfigsReply`, C# application works good,but in Java , `ConfigFileInfo` not generate , I can not find this class, how to fix it ? Thank you!\r\n\r\npom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;\r\n  &lt;artifactId&gt;xx&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;xx&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n &lt;!-- &lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;google-maven&lt;/id&gt;\r\n        &lt;name&gt;Google Maven Repository&lt;/name&gt;\r\n        &lt;url&gt;https://maven.pkg.github.com/grpc/grpc-java&lt;/url&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt; --&gt;\r\n\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;grpc-netty-shaded&lt;/artifactId&gt;\r\n      &lt;version&gt;1.41.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\r\n      &lt;version&gt;1.41.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\r\n      &lt;version&gt;1.41.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt; &lt;!-- necessary for Java 9+ --&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;annotations-api&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.53&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to\r\n      parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;!-- clean lifecycle, see\r\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- default lifecycle, jar packaging: see\r\n        https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- site lifecycle, see\r\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n    &lt;extensions&gt;\r\n      &lt;extension&gt;\r\n        &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7.1&lt;/version&gt;\r\n      &lt;/extension&gt;\r\n    &lt;/extensions&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.6.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;protocArtifact&gt;com.google.protobuf:protoc:3.19.6:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\r\n          &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\r\n          &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:1.41.3:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;\r\n          &lt;clearOutputDirectory&gt;false&lt;/clearOutputDirectory&gt;\r\n          &lt;outputDirectory&gt;${basedir}/src/main/java&lt;/outputDirectory&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;compile&lt;/goal&gt;\r\n              &lt;goal&gt;compile-custom&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nproto:\r\n```\r\nsyntax = &quot;proto3&quot;;\r\n\r\nservice RemoteControl {\r\n  rpc GetTaskConfigs(GetTaskConfigsRequest) returns (GetTaskConfigsReply);\r\n  \r\n}\r\n\r\nmessage GetTaskConfigsRequest {\r\n\r\n}\r\n\r\nmessage GetTaskConfigsReply{\r\n  message ConfigFileInfo{\r\n    string name = 1;\r\n    string path = 2;\r\n    string modified_time = 3;\r\n  }\r\n  repeated ConfigFileInfo configs = 1;\r\n}\r\n```\r\nJava code:\r\n```\r\n private static List&lt;ConfigFileInfo&gt; GetTaskConfigs(RemoteControlBlockingStub remoteControlBlockingStub) {\r\n        GetTaskConfigsRequest request = GetTaskConfigsRequest.newBuilder().build();\r\n\r\n        GetTaskConfigsReply reply = remoteControlBlockingStub.getTaskConfigs(request);\r\n        List&lt;ConfigFileInfo&gt; configFileInfos = new ArrayList&lt;ConfigFileInfo&gt;();\r\n        for (int i = 0; i &lt; reply.getConfigsCount(); i++) {\r\n            configFileInfos.add(reply.getConfigs(i));\r\n        }\r\n        return configFileInfos;\r\n    }\r\n```\r\n","title":"Java gRPC, nested class not generate","body":"<p>part of proto:</p>\n<pre><code>message GetTaskConfigsReply{\n  message ConfigFileInfo{\n    string name = 1;\n    string path = 2;\n    string modified_time = 3;\n  }\n  repeated ConfigFileInfo configs = 1;\n}\n</code></pre>\n<p>Hi,I'm new in Java,I want to use gRPC to remote control another C# Application,The C# Application will send this Java Application <code>GetTaskConfigsReply</code>, C# application works good,but in Java , <code>ConfigFileInfo</code> not generate , I can not find this class, how to fix it ? Thank you!</p>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;\n  &lt;artifactId&gt;xx&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;xx&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n &lt;!-- &lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;google-maven&lt;/id&gt;\n        &lt;name&gt;Google Maven Repository&lt;/name&gt;\n        &lt;url&gt;https://maven.pkg.github.com/grpc/grpc-java&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt; --&gt;\n\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n      &lt;artifactId&gt;grpc-netty-shaded&lt;/artifactId&gt;\n      &lt;version&gt;1.41.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n      &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\n      &lt;version&gt;1.41.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n      &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\n      &lt;version&gt;1.41.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt; &lt;!-- necessary for Java 9+ --&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;annotations-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.53&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to\n      parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see\n        https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n    &lt;extensions&gt;\n      &lt;extension&gt;\n        &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.7.1&lt;/version&gt;\n      &lt;/extension&gt;\n    &lt;/extensions&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.6.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;protocArtifact&gt;com.google.protobuf:protoc:3.19.6:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\n          &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\n          &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:1.41.3:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;\n          &lt;clearOutputDirectory&gt;false&lt;/clearOutputDirectory&gt;\n          &lt;outputDirectory&gt;${basedir}/src/main/java&lt;/outputDirectory&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n              &lt;goal&gt;compile-custom&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>proto:</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\nservice RemoteControl {\n  rpc GetTaskConfigs(GetTaskConfigsRequest) returns (GetTaskConfigsReply);\n  \n}\n\nmessage GetTaskConfigsRequest {\n\n}\n\nmessage GetTaskConfigsReply{\n  message ConfigFileInfo{\n    string name = 1;\n    string path = 2;\n    string modified_time = 3;\n  }\n  repeated ConfigFileInfo configs = 1;\n}\n</code></pre>\n<p>Java code:</p>\n<pre><code> private static List&lt;ConfigFileInfo&gt; GetTaskConfigs(RemoteControlBlockingStub remoteControlBlockingStub) {\n        GetTaskConfigsRequest request = GetTaskConfigsRequest.newBuilder().build();\n\n        GetTaskConfigsReply reply = remoteControlBlockingStub.getTaskConfigs(request);\n        List&lt;ConfigFileInfo&gt; configFileInfos = new ArrayList&lt;ConfigFileInfo&gt;();\n        for (int i = 0; i &lt; reply.getConfigsCount(); i++) {\n            configFileInfos.add(reply.getConfigs(i));\n        }\n        return configFileInfos;\n    }\n</code></pre>\n"},{"tags":["java","bytecode","string-concatenation","java-bytecode-asm","bytecode-manipulation"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1693483728,"post_id":77015657,"comment_id":135768900,"body_markdown":"You seem to asking how the compiler decides which bytecode emits in each case rather than how bytecode works. What is the actual issue that you have? Why do you need to control the generation of code for concatenating strings?","body":"You seem to asking how the compiler decides which bytecode emits in each case rather than how bytecode works. What is the actual issue that you have? Why do you need to control the generation of code for concatenating strings?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1693483869,"post_id":77015657,"comment_id":135768929,"body_markdown":"You seem to be saying that the same class is compiled to two different bytecode sequences in &quot;different places&quot;.  This doesn&#39;t make a lot of sense.  Normally a Java (source code) class is only compiled once.  Are you actually saying that you have two .class files from different builds?   If yes, the probable explanation is that they were compiled with different `javac` compilers from different JDKs.   The first version looks like an older compiler.","body":"You seem to be saying that the same class is compiled to two different bytecode sequences in &quot;different places&quot;.  This doesn&#39;t make a lot of sense.  Normally a Java (source code) class is only compiled once.  Are you actually saying that you have two .class files from different builds?   If yes, the probable explanation is that they were compiled with different <code>javac</code> compilers from different JDKs.   The first version looks like an older compiler."},{"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":0,"creation_date":1693484015,"post_id":77015657,"comment_id":135768962,"body_markdown":"Do you have two source files with _exactly the same_ content in your application? If not, please edit your question to also show the second one. (FWIW, using javac 20.0.2 from OpenJDK, compiling your first code I get the bytecode from the second one.)","body":"Do you have two source files with <i>exactly the same</i> content in your application? If not, please edit your question to also show the second one. (FWIW, using javac 20.0.2 from OpenJDK, compiling your first code I get the bytecode from the second one.)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1693484047,"post_id":77015657,"comment_id":135768969,"body_markdown":"See https://www.baeldung.com/java-string-concatenation-invoke-dynamic.  The use of `invokedynamic` for string concatenation was introduced in Java 9.","body":"See <a href=\"https://www.baeldung.com/java-string-concatenation-invoke-dynamic\" rel=\"nofollow noreferrer\">baeldung.com/java-string-concatenation-invoke-dynamic</a>.  The use of <code>invokedynamic</code> for string concatenation was introduced in Java 9."},{"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":0,"creation_date":1693484124,"post_id":77015657,"comment_id":135768978,"body_markdown":"@StephenC Are you suggesting that the first was compiled using Java 8 or before, and the second with Java 9 or later?","body":"@StephenC Are you suggesting that the first was compiled using Java 8 or before, and the second with Java 9 or later?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693484165,"post_id":77015657,"comment_id":135768988,"body_markdown":"Probably.  I don&#39;t think this feature was back-ported.  Ask a **real** expert :-)","body":"Probably.  I don&#39;t think this feature was back-ported.  Ask a <b>real</b> expert :-)"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1693485230,"post_id":77015657,"comment_id":135769207,"body_markdown":"Here&#39;s the [JEP](https://openjdk.org/jeps/280) for &quot;Indify String concatenation&quot; that was done in Java 9.","body":"Here&#39;s the <a href=\"https://openjdk.org/jeps/280\" rel=\"nofollow noreferrer\">JEP</a> for &quot;Indify String concatenation&quot; that was done in Java 9."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693486557,"post_id":77015657,"comment_id":135769482,"body_markdown":"The last section suggests that you have an actual task to solve which you didn’t describe. And no, the first variant does not consist of a single `ldc` instruction, the entire sequence from `new  #1 // java/lang/StringBuilder` up to `invokevirtual #13 // java/lang/StringBuilder.toString:()Ljava/lang/String;` is the string concatenation. Likewise, the second variant also consists of more than one instruction, as the `aload_1` preceding the `invokedynamic` instruction also belongs to the string concatenation. Whether you have to consider more than these variants depends on your actual task.","body":"The last section suggests that you have an actual task to solve which you didn’t describe. And no, the first variant does not consist of a single <code>ldc</code> instruction, the entire sequence from <code>new  #1 &#47;&#47; java&#47;lang&#47;StringBuilder</code> up to <code>invokevirtual #13 &#47;&#47; java&#47;lang&#47;StringBuilder.toString:()Ljava&#47;lang&#47;String;</code> is the string concatenation. Likewise, the second variant also consists of more than one instruction, as the <code>aload_1</code> preceding the <code>invokedynamic</code> instruction also belongs to the string concatenation. Whether you have to consider more than these variants depends on your actual task."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693488524,"post_id":77015657,"comment_id":135769943,"body_markdown":"There are at least four strategies you may encounter in practice. But do you need to identify code that is a string concatenation *semantically*, then you’d also have to consider, e.g. `&quot;This is the message: &quot; .concat(msg)` or `String.join(&quot;&quot;, &quot;This is the message: &quot;, msg)`, or *literally*, then you have the problem that you can’t distinguish the first variant from the code produced by the source code fragment `new StringBuilder().append(&quot;This is the message: &quot;).append(msg) .toString()`. What about future Java versions, do you need to detect `STR .&quot;This&#160;is&#160;the&#160;message:&#160;\\{msg}&quot;` or not?","body":"There are at least four strategies you may encounter in practice. But do you need to identify code that is a string concatenation <i>semantically</i>, then you’d also have to consider, e.g. <code>&quot;This is the message: &quot; .concat(msg)</code> or <code>String.join(&quot;&quot;, &quot;This is the message: &quot;, msg)</code>, or <i>literally</i>, then you have the problem that you can’t distinguish the first variant from the code produced by the source code fragment <code>new StringBuilder().append(&quot;This is the message: &quot;).append(msg) .toString()</code>. What about future Java versions, do you need to detect <code>STR .&quot;This is the message: \\{msg}&quot;</code> or not?"}],"answers":[{"tags":[],"owner":{"account_id":10775834,"reputation":528,"user_id":9165920,"display_name":"Irfan Latif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693549611,"creation_date":1693549611,"answer_id":77020935,"question_id":77015657,"body_markdown":"String concatenation behavior was changed in Java 9.\r\n\r\nIn the former case, the class belongs to the main app which was built using `-source 8 -target 8`. While in the latter case, the class belongs to a library which is (a dependency of the app but) built with `-source 11 -target 11`. So the compiled bytecode differs w.r.t. string concatenation.\r\n\r\nThanks to [@Stephen C](https://stackoverflow.com/users/139985) and [@Kayaman](https://stackoverflow.com/users/2541560) for the links:\r\n- [String Concatenation with Invoke Dynamic](https://www.baeldung.com/java-string-concatenation-invoke-dynamic)\r\n- [JEP 280: Indify String Concatenation](https://openjdk.org/jeps/280)\r\n\r\n---\r\n\r\nFor the sake of completeness, as [@Holger](https://stackoverflow.com/users/2711488) mentioned in comments, `StringBuilder`, `String.concat()` and `String.join()` are identical when it comes to string manipulation in the compiled bytecode. Because in all three cases the string constant is first pushed onto the stack using `ldc` (where it can be simply manipulated). But in the case of `StringConcatFactory.makeConcatWithConstants()`, references of local string variables are first pushed onto the stack using `aload`.","title":"How is string concatenation handled in Java bytecode compilation?","body":"<p>String concatenation behavior was changed in Java 9.</p>\n<p>In the former case, the class belongs to the main app which was built using <code>-source 8 -target 8</code>. While in the latter case, the class belongs to a library which is (a dependency of the app but) built with <code>-source 11 -target 11</code>. So the compiled bytecode differs w.r.t. string concatenation.</p>\n<p>Thanks to <a href=\"https://stackoverflow.com/users/139985\">@Stephen C</a> and <a href=\"https://stackoverflow.com/users/2541560\">@Kayaman</a> for the links:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-string-concatenation-invoke-dynamic\" rel=\"nofollow noreferrer\">String Concatenation with Invoke Dynamic</a></li>\n<li><a href=\"https://openjdk.org/jeps/280\" rel=\"nofollow noreferrer\">JEP 280: Indify String Concatenation</a></li>\n</ul>\n<hr />\n<p>For the sake of completeness, as <a href=\"https://stackoverflow.com/users/2711488\">@Holger</a> mentioned in comments, <code>StringBuilder</code>, <code>String.concat()</code> and <code>String.join()</code> are identical when it comes to string manipulation in the compiled bytecode. Because in all three cases the string constant is first pushed onto the stack using <code>ldc</code> (where it can be simply manipulated). But in the case of <code>StringConcatFactory.makeConcatWithConstants()</code>, references of local string variables are first pushed onto the stack using <code>aload</code>.</p>\n"}],"owner":{"account_id":10775834,"reputation":528,"user_id":9165920,"display_name":"Irfan Latif"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693549611,"creation_date":1693483322,"question_id":77015657,"body_markdown":"```\r\npublic class TestException extends Exception {\r\n\r\n  public TestException(String msg) {\r\n    super(&quot;This is the message: &quot; + msg);\r\n  }\r\n}\r\n```\r\n\r\nThe above code is compiled to:\r\n```\r\npublic class TestException extends java.lang.Exception {\r\n  public TestException(java.lang.String);\r\n    Code:\r\n       0: aload_0\r\n       1: new           #1                  // class java/lang/StringBuilder\r\n       4: dup\r\n       5: invokespecial #3                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V\r\n       8: ldc           #7                  // String This is the message:\r\n      10: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\r\n      13: aload_1\r\n      14: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\r\n      17: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;\r\n      20: invokespecial #17                 // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n      23: return\r\n}\r\n```\r\nHere a `StringBuilder` object is created to concatenate the strings.\r\n\r\nWhile in the same app at another place an exactly similar class is compiled to:\r\n```\r\npublic class TestException extends java.lang.Exception {\r\n  public TestException(java.lang.String);\r\n    Code:\r\n       0: aload_0\r\n       1: aload_1\r\n       2: invokedynamic #1,  0              // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;\r\n       7: invokespecial #5                  // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n      10: return\r\n}\r\n```\r\nHere `StringConcatFactory.makeConcatWithConstants()` is invoked to concatenate the strings.\r\n\r\nWhich factors determine this different behavior? How it can be predicted / controlled?\r\n\r\n---\r\n\r\n**PS:**  \r\nIn the former case `ldc` instruction is called, which can be intercepted by overriding the [`MethodVisitor.visitLdcInsn()`](https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitLdcInsn(java.lang.Object)) method and the String can be manipulated.\r\n\r\nTo address the latter behavior [`MethodVisitor.visitInvokeDynamicInsn()`](https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitInvokeDynamicInsn(java.lang.String,java.lang.String,org.objectweb.asm.Handle,java.lang.Object...)) callback also needs to be overridden.\r\n\r\nAnd I&#39;m not sure if there are other possible behaviors too.","title":"How is string concatenation handled in Java bytecode compilation?","body":"<pre><code>public class TestException extends Exception {\n\n  public TestException(String msg) {\n    super(&quot;This is the message: &quot; + msg);\n  }\n}\n</code></pre>\n<p>The above code is compiled to:</p>\n<pre><code>public class TestException extends java.lang.Exception {\n  public TestException(java.lang.String);\n    Code:\n       0: aload_0\n       1: new           #1                  // class java/lang/StringBuilder\n       4: dup\n       5: invokespecial #3                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V\n       8: ldc           #7                  // String This is the message:\n      10: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      13: aload_1\n      14: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      17: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;\n      20: invokespecial #17                 // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\n      23: return\n}\n</code></pre>\n<p>Here a <code>StringBuilder</code> object is created to concatenate the strings.</p>\n<p>While in the same app at another place an exactly similar class is compiled to:</p>\n<pre><code>public class TestException extends java.lang.Exception {\n  public TestException(java.lang.String);\n    Code:\n       0: aload_0\n       1: aload_1\n       2: invokedynamic #1,  0              // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;\n       7: invokespecial #5                  // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\n      10: return\n}\n</code></pre>\n<p>Here <code>StringConcatFactory.makeConcatWithConstants()</code> is invoked to concatenate the strings.</p>\n<p>Which factors determine this different behavior? How it can be predicted / controlled?</p>\n<hr />\n<p><strong>PS:</strong><br />\nIn the former case <code>ldc</code> instruction is called, which can be intercepted by overriding the <a href=\"https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitLdcInsn(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>MethodVisitor.visitLdcInsn()</code></a> method and the String can be manipulated.</p>\n<p>To address the latter behavior <a href=\"https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitInvokeDynamicInsn(java.lang.String,java.lang.String,org.objectweb.asm.Handle,java.lang.Object...)\" rel=\"nofollow noreferrer\"><code>MethodVisitor.visitInvokeDynamicInsn()</code></a> callback also needs to be overridden.</p>\n<p>And I'm not sure if there are other possible behaviors too.</p>\n"},{"tags":["java","angular","typescript"],"comments":[{"owner":{"account_id":6263943,"reputation":249,"user_id":4870257,"display_name":"Sumit Kumar"},"score":0,"creation_date":1693481204,"post_id":77015254,"comment_id":135768344,"body_markdown":"please share code along with classes and imports.","body":"please share code along with classes and imports."},{"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"score":0,"creation_date":1693482465,"post_id":77015254,"comment_id":135768610,"body_markdown":"Added all necessary information","body":"Added all necessary information"},{"owner":{"account_id":6263943,"reputation":249,"user_id":4870257,"display_name":"Sumit Kumar"},"score":0,"creation_date":1693493418,"post_id":77015254,"comment_id":135771148,"body_markdown":"From where are you calling the assetService.getAssets()?","body":"From where are you calling the assetService.getAssets()?"},{"owner":{"account_id":6263943,"reputation":249,"user_id":4870257,"display_name":"Sumit Kumar"},"score":0,"creation_date":1693493633,"post_id":77015254,"comment_id":135771194,"body_markdown":"It&#39;s working fine. \nhttps://stackblitz.com/edit/stackblitz-starters-ujegec?file=src%2Fmain.ts","body":"It&#39;s working fine.  <a href=\"https://stackblitz.com/edit/stackblitz-starters-ujegec?file=src%2Fmain.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a>"},{"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"score":0,"creation_date":1693548127,"post_id":77015254,"comment_id":135778129,"body_markdown":"Do I need caching expiration mechanism to work? Added place where it called from","body":"Do I need caching expiration mechanism to work? Added place where it called from"}],"answers":[{"tags":[],"owner":{"account_id":475852,"reputation":2089,"user_id":886432,"accept_rate":29,"display_name":"FunkMonkey33"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693481326,"creation_date":1693481326,"answer_id":77015404,"question_id":77015254,"body_markdown":"You forgot to subscribe() to your observable. The Angular HttpClient&#39;s get() method returns an observable, not a Promise.\r\n\r\nJust add .subscribe() after the closing parentheses and you should be good.","title":"Angular HttpClient not interacting with Spring Controller","body":"<p>You forgot to subscribe() to your observable. The Angular HttpClient's get() method returns an observable, not a Promise.</p>\n<p>Just add .subscribe() after the closing parentheses and you should be good.</p>\n"}],"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693548190,"creation_date":1693480123,"question_id":77015254,"body_markdown":"I have encountered an issue where my Angular application&#39;s HttpClient doesn&#39;t seem to be interacting correctly with my Spring Controller. I have configured the necessary endpoints and methods in the Spring Controller. The Angular service isn&#39;t making the corresponding HTTP requests using HttpClient.\r\n\r\nI have verified the correctness of the API URLs, ensured that the CORS configuration is properly set up, and checked for any error messages in the browser&#39;s developer console. Developer console shows no call to endpoint. All checks was made in incognito mode, cache issues are excluded.\r\n\r\nI would appreciate any insights, suggestions, or troubleshooting steps that can help me diagnose and resolve this issue effectively.\r\n\r\nController:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;&quot; + Role.MANAGER_ROLE_NAME + &quot;&#39;) or hasRole(&#39;&quot; + Role.STORE_ROLE_NAME + &quot;&#39;)&quot;)\r\n\t@GetMapping(value = &quot;{organizationId}&quot;)\r\n\tpublic List&lt;SapAsset&gt; getAssets(@PathVariable final long organizationId) {\r\n\t\treturn sapAssetService.getStoreAssets(organizationId);\r\n\t}\r\n\r\nAngular:\r\n```\r\nimport {Injectable} from &#39;@angular/core&#39;;\r\nimport {SecureHttpClientService} from &#39;../../core/services/secure-http-client.service&#39;;\r\nimport {Asset} from &quot;../models/asset&quot;;\r\nimport {DateTimeFormatterService} from &quot;../../core/services/date-time-formatter.service&quot;;\r\nimport {AlertService} from &quot;../../core/services/alert.service&quot;;\r\n\r\n@Injectable()\r\nexport class AssetService {\r\n\r\n\tprotected url = &#39;/assets&#39;;\r\n\tprivate readonly storeAssetsCacheKey = &#39;cachedStoreAssets&#39;;\r\n\tprivate readonly dcAssetsCacheKey = &#39;cachedDcAssets&#39;;\r\n\r\n\tconstructor(private secureHttpClient: SecureHttpClientService, private dateTimeFormatterService: DateTimeFormatterService,\r\n\t\t\t\tprivate alertService: AlertService) {\r\n\t}\r\n\r\n\tpublic getAssets(storeId: number): Promise&lt;Asset[]&gt; {\r\n\t\tconst cachedStoreAssets = this.getFromCache(this.storeAssetsCacheKey);\r\n\t\tif (Array.isArray(cachedStoreAssets)) {\r\n\t\t\treturn Promise.resolve(cachedStoreAssets);\r\n\t\t}\r\n\r\n\t\treturn this.secureHttpClient.get(this.url + &#39;/&#39; + storeId)\r\n\t\t\t.then((response: Asset[]) =&gt; {\r\n\t\t\t\tthis.saveToCache(response, this.storeAssetsCacheKey);\r\n\t\t\t\treturn response;\r\n\t\t\t})\r\n\t\t\t.catch((error: any) =&gt; {\r\n\t\t\t\tthis.alertService.error(&quot;general.sap_error&quot;);\r\n\t\t\t});\r\n\t}\r\n```\r\n\r\nAngular rest wrapper:\r\n```\r\nimport {Injectable} from &#39;@angular/core&#39;;\r\nimport {HttpClientService} from &#39;./http-client.service&#39;;\r\nimport {HttpHeaders} from &#39;@angular/common/http&#39;;\r\nimport {AuthService} from &#39;../../authentication/services/auth.service&#39;;\r\n\r\n@Injectable()\r\nexport class SecureHttpClientService {\r\n\r\n\tapiUrl: string;\r\n\r\n\tconstructor(private httpClient: HttpClientService, private authService: AuthService) {\r\n\t}\r\n\r\n\tprivate createAuthHeader() {\r\n\t\tconst headers = new HttpHeaders({\r\n\t\t\tAuthorization: &#39;Bearer &#39; + this.authService.getToken(),\r\n\t\t});\r\n\r\n\t\tconst options = {\r\n\t\t\theaders\r\n\t\t};\r\n\r\n\t\treturn options;\r\n\t}\r\n\r\n\tpublic get(url: string): any {\r\n\t\treturn this.httpClient.get(url, this.createAuthHeader());\r\n\t}\r\n```\r\n    \r\n\r\nAngular get service:\r\n\r\n```\r\nimport {Injectable} from &#39;@angular/core&#39;;\r\nimport {EnvironmentSpecificService} from &#39;./environment-specific.service&#39;;\r\nimport {EnvSpecific} from &#39;../models/env-specific&#39;;\r\nimport {HttpClient} from &#39;@angular/common/http&#39;;\r\nimport {PageLoadingService} from &#39;../../../services/page-loading.service&#39;;\r\n\r\n@Injectable()\r\nexport class HttpClientService {\r\n\r\n\tapiUrl: string;\r\n\r\n\tconstructor(private http: HttpClient, private environmentSpecificService: EnvironmentSpecificService, private pageLoadingService: PageLoadingService) {\r\n\t\tenvironmentSpecificService.subscribe(this, this.setApiUrl);\r\n\t}\r\n\r\n\tprivate setApiUrl(caller: any, es: EnvSpecific) {\r\n\t\tconst thisCaller = caller as HttpClientService;\r\n\t\tcaller.apiUrl = es.apiUrl;\r\n\t}\r\n\r\n\tpublic getApiUrl(url: string): string {\r\n\t\treturn this.apiUrl + url;\r\n\t}\r\n\r\n\tprivate extractBase64ImageData(response: Response): String {\r\n\t\treturn &#39;data:image/png;base64,&#39; + response.text();\r\n\t}\r\n\r\n\tprivate handleError(error: Response | any) {\r\n\t\tlet errMsg: string;\r\n\t\tif (error instanceof Response) {\r\n\t\t\tconst body = error || &#39;&#39;;\r\n\t\t\tconst err = JSON.stringify(body);\r\n\t\t\terrMsg = `${error.status} - ${error.statusText || &#39;&#39;} ${err}`;\r\n\t\t} else {\r\n\t\t\terrMsg = error.message ? error.message : error.toString();\r\n\t\t}\r\n\t\tconsole.error(error);\r\n\t\treturn Promise.reject(errMsg);\r\n\t}\r\n\r\n\tpublic get(url: string, options?: any): any {\r\n\t\tconst promise = this.http.get(this.getApiUrl(url), options).toPromise();\r\n\t\tthis.pageLoadingService.addPromise(promise);\r\n\t\treturn promise.catch(this.handleError);\r\n\t}\r\n```\r\n\r\nPlace where it called from:\r\n```\r\nimport {Component, NgZone, OnInit} from &#39;@angular/core&#39;;\r\nimport {Router} from &#39;@angular/router&#39;;\r\nimport {AlertService} from &quot;../../../../core/services/alert.service&quot;;\r\nimport {DateTimeFormatterService} from &quot;../../../../core/services/date-time-formatter.service&quot;;\r\nimport {NotificationService} from &quot;../../../../core/services/notification.service&quot;;\r\nimport {Asset} from &quot;../../../models/asset&quot;;\r\nimport {Organization} from &quot;../../../../organizations/models/organization&quot;;\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from &quot;@angular/forms&quot;;\r\nimport {AuthService} from &quot;../../../../authentication/services/auth.service&quot;;\r\nimport {OrganizationService} from &quot;../../../../organizations/services/organization.service&quot;;\r\nimport {MatSelectChange} from &quot;@angular/material/select&quot;;\r\nimport {Utils} from &quot;../../../../core/utils/utils&quot;;\r\nimport {AssetService} from &quot;../../../services/asset.service&quot;;\r\nimport {RoleEnum} from &quot;../../../../authentication/enums/role-enum&quot;;\r\nimport {ExternalMovementsService} from &quot;../../../services/external-movements.service&quot;;\r\nimport {FormUtils} from &quot;../../../../shared/utils/form-utils&quot;;\r\n\r\n@Component({\r\n\tselector: &#39;create-external-order&#39;,\r\n\ttemplateUrl: &#39;./create-external-movement-order.component.html&#39;,\r\n\tstyleUrls: [&#39;./create-external-movement-order.component.css&#39;]\r\n})\r\nexport class CreateExternalMovementOrderComponent implements OnInit {\r\n\r\n\tfilterValue: string = &quot;&quot;;\r\n\tassignableOrganizations: Organization[] = [];\r\n\tfilteredOrganizations: Organization[];\r\n\tassignableAssets: Asset[] = [];\r\n\tfilteredAssets: Asset[] = [];\r\n\r\n\tpublic storeFilterControl = new FormControl();\r\n\r\n\tform: FormGroup;\r\n\r\n\tconstructor(private dateTimeFormatterService: DateTimeFormatterService, private zone: NgZone,\r\n\t            private alertService: AlertService, private router: Router,\r\n\t            private notificationService: NotificationService,\r\n\t            private formBuilder: FormBuilder,\r\n\t            private externalMovementsService: ExternalMovementsService,\r\n\t            private authService: AuthService,\r\n\t            private organizationService: OrganizationService,\r\n\t            private assetService: AssetService) {\r\n\r\n\t\tthis.form = this.formBuilder.group({\r\n\t\t\tfromOrganizationId: [null, Validators.compose([])],\r\n\t\t\ttoOrganization: [null, Validators.compose([Validators.required])],\r\n\t\t});\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tif ((this.authService.getRole() == RoleEnum.MANAGER)) {\r\n\t\t\tthis.organizationService.getAssignableWithDc().then(result =&gt; {\r\n\t\t\t\tthis.assignableOrganizations = result.filter(item =&gt; item.externalId != null);\r\n\t\t\t\tthis.filteredOrganizations = this.assignableOrganizations;\r\n\r\n\t\t\t\tconst sourceOrganization = this.externalMovementsService.getOrderSourceOrganization();\r\n\t\t\t\tif (!sourceOrganization) {\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValidators(Validators.compose([Validators.required]));\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).updateValueAndValidity();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValue(sourceOrganization.id);\r\n\t\t\t\t\tthis.loadAssets(sourceOrganization.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst destinationOrganization = this.externalMovementsService.getOrderDestinationOrganization();\r\n\t\t\t\tthis.form.get(&quot;toOrganization&quot;).setValue(destinationOrganization);\r\n\t\t\t}, error =&gt; {\r\n\t\t\t\tthis.alertService.genericError();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst storeId = this.authService.getOrganizationId();\r\n\t\t\tthis.assignableOrganizations = [this.authService.getOrganization()];\r\n\t\t\tthis.filteredOrganizations = [this.authService.getOrganization()];\r\n\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValue(storeId);\r\n\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).disable();\r\n\r\n\t\t\tthis.loadAssetsAndSelectOrganization(storeId);\r\n\t\t}\r\n\t}\r\n\r\n\tnavigateToCheckout() {\r\n\t\tFormUtils.validateAllFormFields(this.form);\r\n\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.externalMovementsService.setOrderDestinationOrganization(this.form.get(&quot;toOrganization&quot;).value);\r\n\t\t\tthis.router.navigateByUrl(&#39;/movements/external/create/checkout&#39;);\r\n\t\t}\r\n\t}\r\n\r\n\tloadAssets(storeId: number) {\r\n\t\tthis.assetService.getAssets(storeId).then(result =&gt; {\r\n\t\t\tthis.assignableAssets = result;\r\n\t\t\tthis.filteredAssets = result;\r\n\t\t}, error =&gt; {\r\n\t\t\tthis.alertService.genericError();\r\n\t\t});\r\n\t}\r\n\r\n\tfromOrganizationSelected(event: MatSelectChange) {\r\n\t\tconst storeId = event.value;\r\n\t\tthis.updateSelectedOrganization(storeId);\r\n\t}\r\n\r\n\tupdateSelectedOrganization(organizationId: number) {\r\n\t\tconst previousOrganizationId = this.externalMovementsService.getOrderSourceOrganization()?.id || null;\r\n\t\tconst orderHasItems = this.externalMovementsService.getOrderItems().length &gt; 0;\r\n\r\n\t\tif (previousOrganizationId !== null &amp;&amp; previousOrganizationId !== organizationId) {\r\n\t\t\tif (orderHasItems) {\r\n\t\t\t\tthis.alertService.confirm(() =&gt; {\r\n\t\t\t\t\tthis.externalMovementsService.clearOrder();\r\n\t\t\t\t\tthis.loadAssetsAndSelectOrganization(organizationId);\r\n\t\t\t\t}, &quot;You are about to change order organization, all cart items will be lost, proceed?&quot;, null, () =&gt; {\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValue(previousOrganizationId);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.loadAssetsAndSelectOrganization(organizationId);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.loadAssetsAndSelectOrganization(organizationId);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate loadAssetsAndSelectOrganization(organizationId: number) {\r\n\t\tthis.assignableAssets = [];\r\n\t\tthis.loadAssets(organizationId);\r\n\t\tconst organization = this.assignableOrganizations.filter(item =&gt; item.id == organizationId).pop();\r\n\t\tthis.externalMovementsService.setOrderSourceOrganization(organization);\r\n\t}\r\n\r\n\tisItemAlreadyAddedToCart(asset: Asset) {\r\n\t\treturn this.externalMovementsService.isItemAlreadyAddedToCart(asset.assetId);\r\n\t}\r\n\r\n\taddToOrder(asset: Asset) {\r\n\t\tthis.externalMovementsService.addToOrder(asset);\r\n\t}\r\n\r\n\tfilterUpdated(filterValue) {\r\n\t\tif (filterValue == null || filterValue == &quot;&quot;) {\r\n\t\t\tthis.filteredAssets = this.assignableAssets;\r\n\t\t} else {\r\n\t\t\tthis.filteredAssets = this.assignableAssets.filter(element =&gt; {\r\n\t\t\t\tfor (let value of Object.values(element)) {\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tif (value.toString().toLowerCase().indexOf(filterValue.toLowerCase()) &gt; -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tremoveFromOrder(asset: Asset) {\r\n\t\tthis.externalMovementsService.deleteFromOrder(asset.assetId);\r\n\t}\r\n\r\n\tclearOrder() {\r\n\t\tthis.externalMovementsService.clearOrder();\r\n\t}\r\n\r\n\tshoppingCartIsNotEmpty() {\r\n\t\treturn this.externalMovementsService.getOrderItems().length != 0;\r\n\t}\r\n\r\n\tnavigateBack() {\r\n\t\tthis.router.navigateByUrl(&#39;/movements/external&#39;);\r\n\t}\r\n\r\n\tformatOrganizationTitle(organization: Organization): string {\r\n\t\tif (!Utils.isNullOrUndefinedOrEmpty(organization.externalId)) {\r\n\t\t\treturn organization.name + &quot; (&quot; + organization.externalId + &quot;)&quot;;\r\n\t\t}\r\n\r\n\t\treturn organization.name;\r\n\t}\r\n\r\n\r\n\tgetFormattedDate(date: number): string {\r\n\t\treturn this.dateTimeFormatterService.formatTimestampToDisplayDate(date);\r\n\t}\r\n\r\n\tupdateFilteredOrganizations() {\r\n\t\tconst value = this.storeFilterControl.value;\r\n\t\tif (!value) {\r\n\t\t\tthis.filteredOrganizations = this.assignableOrganizations;\r\n\t\t} else {\r\n\t\t\tthis.filteredOrganizations = this.assignableOrganizations\r\n\t\t\t\t.filter(item =&gt; {\r\n\t\t\t\t\tconst searchIn = item.name + &#39; &#39; + item.externalId;\r\n\t\t\t\t\treturn searchIn.toLocaleLowerCase().includes(value.toLowerCase());\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonPanelClose() {\r\n\t\tthis.storeFilterControl.setValue(&#39;&#39;);\r\n\t\tthis.updateFilteredOrganizations();\r\n\t}\r\n\r\n\tgetAssetTooltip(asset: Asset) {\r\n\t\treturn this.assetService.getAssetTooltip(asset);\r\n\t}\r\n}\r\n\r\n```","title":"Angular HttpClient not interacting with Spring Controller","body":"<p>I have encountered an issue where my Angular application's HttpClient doesn't seem to be interacting correctly with my Spring Controller. I have configured the necessary endpoints and methods in the Spring Controller. The Angular service isn't making the corresponding HTTP requests using HttpClient.</p>\n<p>I have verified the correctness of the API URLs, ensured that the CORS configuration is properly set up, and checked for any error messages in the browser's developer console. Developer console shows no call to endpoint. All checks was made in incognito mode, cache issues are excluded.</p>\n<p>I would appreciate any insights, suggestions, or troubleshooting steps that can help me diagnose and resolve this issue effectively.</p>\n<p>Controller:</p>\n<pre><code>@PreAuthorize(&quot;hasRole('&quot; + Role.MANAGER_ROLE_NAME + &quot;') or hasRole('&quot; + Role.STORE_ROLE_NAME + &quot;')&quot;)\n@GetMapping(value = &quot;{organizationId}&quot;)\npublic List&lt;SapAsset&gt; getAssets(@PathVariable final long organizationId) {\n    return sapAssetService.getStoreAssets(organizationId);\n}\n</code></pre>\n<p>Angular:</p>\n<pre><code>import {Injectable} from '@angular/core';\nimport {SecureHttpClientService} from '../../core/services/secure-http-client.service';\nimport {Asset} from &quot;../models/asset&quot;;\nimport {DateTimeFormatterService} from &quot;../../core/services/date-time-formatter.service&quot;;\nimport {AlertService} from &quot;../../core/services/alert.service&quot;;\n\n@Injectable()\nexport class AssetService {\n\n    protected url = '/assets';\n    private readonly storeAssetsCacheKey = 'cachedStoreAssets';\n    private readonly dcAssetsCacheKey = 'cachedDcAssets';\n\n    constructor(private secureHttpClient: SecureHttpClientService, private dateTimeFormatterService: DateTimeFormatterService,\n                private alertService: AlertService) {\n    }\n\n    public getAssets(storeId: number): Promise&lt;Asset[]&gt; {\n        const cachedStoreAssets = this.getFromCache(this.storeAssetsCacheKey);\n        if (Array.isArray(cachedStoreAssets)) {\n            return Promise.resolve(cachedStoreAssets);\n        }\n\n        return this.secureHttpClient.get(this.url + '/' + storeId)\n            .then((response: Asset[]) =&gt; {\n                this.saveToCache(response, this.storeAssetsCacheKey);\n                return response;\n            })\n            .catch((error: any) =&gt; {\n                this.alertService.error(&quot;general.sap_error&quot;);\n            });\n    }\n</code></pre>\n<p>Angular rest wrapper:</p>\n<pre><code>import {Injectable} from '@angular/core';\nimport {HttpClientService} from './http-client.service';\nimport {HttpHeaders} from '@angular/common/http';\nimport {AuthService} from '../../authentication/services/auth.service';\n\n@Injectable()\nexport class SecureHttpClientService {\n\n    apiUrl: string;\n\n    constructor(private httpClient: HttpClientService, private authService: AuthService) {\n    }\n\n    private createAuthHeader() {\n        const headers = new HttpHeaders({\n            Authorization: 'Bearer ' + this.authService.getToken(),\n        });\n\n        const options = {\n            headers\n        };\n\n        return options;\n    }\n\n    public get(url: string): any {\n        return this.httpClient.get(url, this.createAuthHeader());\n    }\n</code></pre>\n<p>Angular get service:</p>\n<pre><code>import {Injectable} from '@angular/core';\nimport {EnvironmentSpecificService} from './environment-specific.service';\nimport {EnvSpecific} from '../models/env-specific';\nimport {HttpClient} from '@angular/common/http';\nimport {PageLoadingService} from '../../../services/page-loading.service';\n\n@Injectable()\nexport class HttpClientService {\n\n    apiUrl: string;\n\n    constructor(private http: HttpClient, private environmentSpecificService: EnvironmentSpecificService, private pageLoadingService: PageLoadingService) {\n        environmentSpecificService.subscribe(this, this.setApiUrl);\n    }\n\n    private setApiUrl(caller: any, es: EnvSpecific) {\n        const thisCaller = caller as HttpClientService;\n        caller.apiUrl = es.apiUrl;\n    }\n\n    public getApiUrl(url: string): string {\n        return this.apiUrl + url;\n    }\n\n    private extractBase64ImageData(response: Response): String {\n        return 'data:image/png;base64,' + response.text();\n    }\n\n    private handleError(error: Response | any) {\n        let errMsg: string;\n        if (error instanceof Response) {\n            const body = error || '';\n            const err = JSON.stringify(body);\n            errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n        } else {\n            errMsg = error.message ? error.message : error.toString();\n        }\n        console.error(error);\n        return Promise.reject(errMsg);\n    }\n\n    public get(url: string, options?: any): any {\n        const promise = this.http.get(this.getApiUrl(url), options).toPromise();\n        this.pageLoadingService.addPromise(promise);\n        return promise.catch(this.handleError);\n    }\n</code></pre>\n<p>Place where it called from:</p>\n<pre><code>import {Component, NgZone, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {AlertService} from &quot;../../../../core/services/alert.service&quot;;\nimport {DateTimeFormatterService} from &quot;../../../../core/services/date-time-formatter.service&quot;;\nimport {NotificationService} from &quot;../../../../core/services/notification.service&quot;;\nimport {Asset} from &quot;../../../models/asset&quot;;\nimport {Organization} from &quot;../../../../organizations/models/organization&quot;;\nimport {FormBuilder, FormControl, FormGroup, Validators} from &quot;@angular/forms&quot;;\nimport {AuthService} from &quot;../../../../authentication/services/auth.service&quot;;\nimport {OrganizationService} from &quot;../../../../organizations/services/organization.service&quot;;\nimport {MatSelectChange} from &quot;@angular/material/select&quot;;\nimport {Utils} from &quot;../../../../core/utils/utils&quot;;\nimport {AssetService} from &quot;../../../services/asset.service&quot;;\nimport {RoleEnum} from &quot;../../../../authentication/enums/role-enum&quot;;\nimport {ExternalMovementsService} from &quot;../../../services/external-movements.service&quot;;\nimport {FormUtils} from &quot;../../../../shared/utils/form-utils&quot;;\n\n@Component({\n    selector: 'create-external-order',\n    templateUrl: './create-external-movement-order.component.html',\n    styleUrls: ['./create-external-movement-order.component.css']\n})\nexport class CreateExternalMovementOrderComponent implements OnInit {\n\n    filterValue: string = &quot;&quot;;\n    assignableOrganizations: Organization[] = [];\n    filteredOrganizations: Organization[];\n    assignableAssets: Asset[] = [];\n    filteredAssets: Asset[] = [];\n\n    public storeFilterControl = new FormControl();\n\n    form: FormGroup;\n\n    constructor(private dateTimeFormatterService: DateTimeFormatterService, private zone: NgZone,\n                private alertService: AlertService, private router: Router,\n                private notificationService: NotificationService,\n                private formBuilder: FormBuilder,\n                private externalMovementsService: ExternalMovementsService,\n                private authService: AuthService,\n                private organizationService: OrganizationService,\n                private assetService: AssetService) {\n\n        this.form = this.formBuilder.group({\n            fromOrganizationId: [null, Validators.compose([])],\n            toOrganization: [null, Validators.compose([Validators.required])],\n        });\n    }\n\n    ngOnInit(): void {\n        if ((this.authService.getRole() == RoleEnum.MANAGER)) {\n            this.organizationService.getAssignableWithDc().then(result =&gt; {\n                this.assignableOrganizations = result.filter(item =&gt; item.externalId != null);\n                this.filteredOrganizations = this.assignableOrganizations;\n\n                const sourceOrganization = this.externalMovementsService.getOrderSourceOrganization();\n                if (!sourceOrganization) {\n                    this.form.get('fromOrganizationId').setValidators(Validators.compose([Validators.required]));\n                    this.form.get('fromOrganizationId').updateValueAndValidity();\n                } else {\n                    this.form.get('fromOrganizationId').setValue(sourceOrganization.id);\n                    this.loadAssets(sourceOrganization.id);\n                }\n\n                const destinationOrganization = this.externalMovementsService.getOrderDestinationOrganization();\n                this.form.get(&quot;toOrganization&quot;).setValue(destinationOrganization);\n            }, error =&gt; {\n                this.alertService.genericError();\n            });\n        } else {\n            const storeId = this.authService.getOrganizationId();\n            this.assignableOrganizations = [this.authService.getOrganization()];\n            this.filteredOrganizations = [this.authService.getOrganization()];\n            this.form.get('fromOrganizationId').setValue(storeId);\n            this.form.get('fromOrganizationId').disable();\n\n            this.loadAssetsAndSelectOrganization(storeId);\n        }\n    }\n\n    navigateToCheckout() {\n        FormUtils.validateAllFormFields(this.form);\n\n        if (this.form.valid) {\n            this.externalMovementsService.setOrderDestinationOrganization(this.form.get(&quot;toOrganization&quot;).value);\n            this.router.navigateByUrl('/movements/external/create/checkout');\n        }\n    }\n\n    loadAssets(storeId: number) {\n        this.assetService.getAssets(storeId).then(result =&gt; {\n            this.assignableAssets = result;\n            this.filteredAssets = result;\n        }, error =&gt; {\n            this.alertService.genericError();\n        });\n    }\n\n    fromOrganizationSelected(event: MatSelectChange) {\n        const storeId = event.value;\n        this.updateSelectedOrganization(storeId);\n    }\n\n    updateSelectedOrganization(organizationId: number) {\n        const previousOrganizationId = this.externalMovementsService.getOrderSourceOrganization()?.id || null;\n        const orderHasItems = this.externalMovementsService.getOrderItems().length &gt; 0;\n\n        if (previousOrganizationId !== null &amp;&amp; previousOrganizationId !== organizationId) {\n            if (orderHasItems) {\n                this.alertService.confirm(() =&gt; {\n                    this.externalMovementsService.clearOrder();\n                    this.loadAssetsAndSelectOrganization(organizationId);\n                }, &quot;You are about to change order organization, all cart items will be lost, proceed?&quot;, null, () =&gt; {\n                    this.form.get('fromOrganizationId').setValue(previousOrganizationId);\n                });\n            } else {\n                this.loadAssetsAndSelectOrganization(organizationId);\n            }\n        } else {\n            this.loadAssetsAndSelectOrganization(organizationId);\n        }\n    }\n\n    private loadAssetsAndSelectOrganization(organizationId: number) {\n        this.assignableAssets = [];\n        this.loadAssets(organizationId);\n        const organization = this.assignableOrganizations.filter(item =&gt; item.id == organizationId).pop();\n        this.externalMovementsService.setOrderSourceOrganization(organization);\n    }\n\n    isItemAlreadyAddedToCart(asset: Asset) {\n        return this.externalMovementsService.isItemAlreadyAddedToCart(asset.assetId);\n    }\n\n    addToOrder(asset: Asset) {\n        this.externalMovementsService.addToOrder(asset);\n    }\n\n    filterUpdated(filterValue) {\n        if (filterValue == null || filterValue == &quot;&quot;) {\n            this.filteredAssets = this.assignableAssets;\n        } else {\n            this.filteredAssets = this.assignableAssets.filter(element =&gt; {\n                for (let value of Object.values(element)) {\n                    if (value) {\n                        if (value.toString().toLowerCase().indexOf(filterValue.toLowerCase()) &gt; -1) {\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            });\n        }\n    }\n\n    removeFromOrder(asset: Asset) {\n        this.externalMovementsService.deleteFromOrder(asset.assetId);\n    }\n\n    clearOrder() {\n        this.externalMovementsService.clearOrder();\n    }\n\n    shoppingCartIsNotEmpty() {\n        return this.externalMovementsService.getOrderItems().length != 0;\n    }\n\n    navigateBack() {\n        this.router.navigateByUrl('/movements/external');\n    }\n\n    formatOrganizationTitle(organization: Organization): string {\n        if (!Utils.isNullOrUndefinedOrEmpty(organization.externalId)) {\n            return organization.name + &quot; (&quot; + organization.externalId + &quot;)&quot;;\n        }\n\n        return organization.name;\n    }\n\n\n    getFormattedDate(date: number): string {\n        return this.dateTimeFormatterService.formatTimestampToDisplayDate(date);\n    }\n\n    updateFilteredOrganizations() {\n        const value = this.storeFilterControl.value;\n        if (!value) {\n            this.filteredOrganizations = this.assignableOrganizations;\n        } else {\n            this.filteredOrganizations = this.assignableOrganizations\n                .filter(item =&gt; {\n                    const searchIn = item.name + ' ' + item.externalId;\n                    return searchIn.toLocaleLowerCase().includes(value.toLowerCase());\n                });\n        }\n    }\n\n    onPanelClose() {\n        this.storeFilterControl.setValue('');\n        this.updateFilteredOrganizations();\n    }\n\n    getAssetTooltip(asset: Asset) {\n        return this.assetService.getAssetTooltip(asset);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","multithreading","spring-boot","spring-batch","nosuchelementexception"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1673379950,"post_id":75074922,"comment_id":132484459,"body_markdown":"Multiple threads call `hasNext` all get `true` they all call `next()`.. That fails. `Iterator` isn&#39;t thread-safe so your solution is wrong. It also feels wrong to have an iterator to list files and then read them in a processor. Feels like you should be using a `MultiResourceItemReader` with a `FlatFileItemReader` instead. But that depends on what you are all doing in your processor. Else wrap the `IteratorItemReader` in a `SynchronizedItemStreamReader` to make it (sort of) thread-safe.","body":"Multiple threads call <code>hasNext</code> all get <code>true</code> they all call <code>next()</code>.. That fails. <code>Iterator</code> isn&#39;t thread-safe so your solution is wrong. It also feels wrong to have an iterator to list files and then read them in a processor. Feels like you should be using a <code>MultiResourceItemReader</code> with a <code>FlatFileItemReader</code> instead. But that depends on what you are all doing in your processor. Else wrap the <code>IteratorItemReader</code> in a <code>SynchronizedItemStreamReader</code> to make it (sort of) thread-safe."},{"owner":{"account_id":27163278,"reputation":11,"user_id":20701131,"display_name":"Guest_017"},"score":0,"creation_date":1673414838,"post_id":75074922,"comment_id":132491003,"body_markdown":"Hi @M.Denium thanks for your time and your inputs, i just have one doubt adding **synchronized** to reader method will do any magic here? like `public synchronized ItemReader&lt;File&gt; testReader(){ }`","body":"Hi @M.Denium thanks for your time and your inputs, i just have one doubt adding <b>synchronized</b> to reader method will do any magic here? like <code>public synchronized ItemReader&lt;File&gt; testReader(){ }</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673420877,"post_id":75074922,"comment_id":132492207,"body_markdown":"No it won&#39;t. As stated you need to wrap it in the `SynchronizedItemStreamReader`.","body":"No it won&#39;t. As stated you need to wrap it in the <code>SynchronizedItemStreamReader</code>."},{"owner":{"account_id":27163278,"reputation":11,"user_id":20701131,"display_name":"Guest_017"},"score":0,"creation_date":1673443577,"post_id":75074922,"comment_id":132499863,"body_markdown":"i&#39;m very new to this spring batch can you please provide sample of how to wrap it in the `SynchronizedItemStreamReader`","body":"i&#39;m very new to this spring batch can you please provide sample of how to wrap it in the <code>SynchronizedItemStreamReader</code>"}],"answers":[{"tags":[],"owner":{"account_id":5071493,"reputation":95,"user_id":8068699,"display_name":"Aliabbas Merchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693548079,"creation_date":1693548079,"answer_id":77020803,"question_id":75074922,"body_markdown":"Directly wrapping it in a `SynchronizedItemStreamReader` does not work, as that needs an `ItemStreamReader`, but `IteratorItemReader` is not an `ItemStreamReader`.\r\nI figure that the best way out would be to create a custom `SynchronizedIteratorItemReader`. It would be the exact same as an `IteratorItemReader`, just that the `read()` method should be marked as synchronized.","title":"Spring batch multithreading problem with Iterator Item Reader","body":"<p>Directly wrapping it in a <code>SynchronizedItemStreamReader</code> does not work, as that needs an <code>ItemStreamReader</code>, but <code>IteratorItemReader</code> is not an <code>ItemStreamReader</code>.\nI figure that the best way out would be to create a custom <code>SynchronizedIteratorItemReader</code>. It would be the exact same as an <code>IteratorItemReader</code>, just that the <code>read()</code> method should be marked as synchronized.</p>\n"}],"owner":{"account_id":27163278,"reputation":11,"user_id":20701131,"display_name":"Guest_017"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693548079,"creation_date":1673378907,"question_id":75074922,"body_markdown":"I&#39;m new to spring batch and still learning, I have batch configuration with IteratorItemReader , Custom Processor and Custom Writer as below,\r\n\r\n```\r\n@Autowired\r\nJobBuilderFactory jobBuilderFactory;\r\n@Autowired\r\nStepBuilderFactory stepBuilderFactory;\r\n@Value(&quot;${inputFile.location}&quot;)\r\nprivate String inputFile;\r\n\r\n@Bean\r\npublic Job testJob() throws IOException {\r\n\treturn jobBuilderFactory.get(&quot;testJob&quot;)\r\n                .incrementer(new RunIdIncrementer())\r\n                .start(testStep())\r\n                .listener(new JobListener())\r\n                .build();\r\n}\r\n\r\n@Bean\r\npublic Step testStep() throws IOException {\r\n\treturn stepBuilderFactory.get(&quot;testStep&quot;)\r\n                .&lt;File, File&gt;chunk(1)\r\n                .reader(testReader())\r\n                .processor(testProcessor())\r\n                .writer(testWriter())\r\n                .taskExecutor(threadPoolTaskExecutor())\r\n                .build();\r\n}\r\n\r\n@Bean\r\npublic ItemReader&lt;File&gt; testReader() throws IOException {\r\n\tList&lt;File&gt; files = Files.walk(Paths.get(inputFile), 1)\r\n                    .filter(Files::isRegularFile)\r\n                    .map(Path::toFile)\r\n                    .collect(Collectors.toList());\r\n\r\n        return new IteratorItemReader&lt;&gt;(files);\r\n}\r\n\r\n@Bean\r\npublic CustomProcessor testProcessor() {\r\n\treturn new CustomProcessor();\r\n}\r\n\r\n@Bean\r\npublic CustomWriter testWriter() {\r\n\treturn new CustomWriter();\r\n}\r\n@Bean\r\npublic ThreadPoolTaskExecutor threadPoolTaskExecutor() {\r\n\tThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n\texecutor.setCorePoolSize(4);\r\n\texecutor.setMaxPoolSize(6);\r\n\texecutor.setQueueCapacity(4);\r\n\texecutor.initialize();\r\n\treturn executor;\r\n}\r\n```\r\n\r\nHere testReader() will check the given input path and list all the files into a List then it returns IteratorItemReader, and then in processor business logic is happening.\r\n\r\nwith multithreading  If there are multiple files (more than one) in the input location everything is working fine, i&#39;m not getting any error but,\r\n\r\nProblem Statement :   Let&#39;s say there&#39;s only one file in the input location (Ex: C:/User/documents/abc.txt), one thread will process the file completely everything is ok but in the end i&#39;m getting this below exception,\r\n\r\n```\r\nERROR - Encountered an error executing step testStep in job testJob\r\njava.util.NoSuchElementException: null\r\nat java.util.ArrayList$Itr.next(ArrayList.java:864)\r\nat org.springframework.batch.item.support.IteratorItemReader.read  (IteratorItemReader.java:70)\r\nat org.springframework.batch.core.step.item.SimpleChunkProvider.doRead (SimpleChunk Provider.java:99)\r\nat org.springframework.batch.core.step.item.SimpleChunkProvider.read (SimpleChunkProvider.java:180)\r\nat org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration (SimpleChunk Provider.java:126)\r\nat org.springframework.batch.repeat.support.RepeatTemplate.getNextResult (RepeatTemplate.java:375)\r\nat org.springframework.batch.repeat.support.RepeatTemplate.executeInternal (RepeatTemplate.java:215)\r\nat org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)\r\nat org.springframework.batch.core.step.item.SimpleChunk Provider.provide (SimpleChunkProvider.java:118)\r\nat org.springframework.batch.core.step.item. ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:71)\r\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction (TaskletStep.java:407)\r\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)\r\nat org.springframework.transaction.support. Transaction Template.execute(Transaction Template.java:140)\r\nat org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext (TaskletStep.java:273)\r\nat org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration (StepContextRepeatCallback.java:82)\r\nat org.springframework.batch.repeat.support.TaskExecutorRepeatTemplate$ExecutingRunnable.run (TaskExecutorRepeatTemplate.java:262)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nat java.lang.Thread.run(Thread.java:750)\r\n```\r\n\r\nThis Exception is happening because of multithreading only, when i tried to look into the **IteratorItemReader** class line number **70** i&#39;ve found this below code,\r\n\r\n```\r\nif (iterator.hasNext())\r\n\treturn iterator.next();\r\nelse\r\n\treturn null; // end of data\r\n```\r\n\r\nWhat will be the best solution to over come this issue please provide your inputs on this, \r\n\r\nThanks in advance.\r\n\r\nany suggestions would be helpful.","title":"Spring batch multithreading problem with Iterator Item Reader","body":"<p>I'm new to spring batch and still learning, I have batch configuration with IteratorItemReader , Custom Processor and Custom Writer as below,</p>\n<pre><code>@Autowired\nJobBuilderFactory jobBuilderFactory;\n@Autowired\nStepBuilderFactory stepBuilderFactory;\n@Value(&quot;${inputFile.location}&quot;)\nprivate String inputFile;\n\n@Bean\npublic Job testJob() throws IOException {\n    return jobBuilderFactory.get(&quot;testJob&quot;)\n                .incrementer(new RunIdIncrementer())\n                .start(testStep())\n                .listener(new JobListener())\n                .build();\n}\n\n@Bean\npublic Step testStep() throws IOException {\n    return stepBuilderFactory.get(&quot;testStep&quot;)\n                .&lt;File, File&gt;chunk(1)\n                .reader(testReader())\n                .processor(testProcessor())\n                .writer(testWriter())\n                .taskExecutor(threadPoolTaskExecutor())\n                .build();\n}\n\n@Bean\npublic ItemReader&lt;File&gt; testReader() throws IOException {\n    List&lt;File&gt; files = Files.walk(Paths.get(inputFile), 1)\n                    .filter(Files::isRegularFile)\n                    .map(Path::toFile)\n                    .collect(Collectors.toList());\n\n        return new IteratorItemReader&lt;&gt;(files);\n}\n\n@Bean\npublic CustomProcessor testProcessor() {\n    return new CustomProcessor();\n}\n\n@Bean\npublic CustomWriter testWriter() {\n    return new CustomWriter();\n}\n@Bean\npublic ThreadPoolTaskExecutor threadPoolTaskExecutor() {\n    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n    executor.setCorePoolSize(4);\n    executor.setMaxPoolSize(6);\n    executor.setQueueCapacity(4);\n    executor.initialize();\n    return executor;\n}\n</code></pre>\n<p>Here testReader() will check the given input path and list all the files into a List then it returns IteratorItemReader, and then in processor business logic is happening.</p>\n<p>with multithreading  If there are multiple files (more than one) in the input location everything is working fine, i'm not getting any error but,</p>\n<p>Problem Statement :   Let's say there's only one file in the input location (Ex: C:/User/documents/abc.txt), one thread will process the file completely everything is ok but in the end i'm getting this below exception,</p>\n<pre><code>ERROR - Encountered an error executing step testStep in job testJob\njava.util.NoSuchElementException: null\nat java.util.ArrayList$Itr.next(ArrayList.java:864)\nat org.springframework.batch.item.support.IteratorItemReader.read  (IteratorItemReader.java:70)\nat org.springframework.batch.core.step.item.SimpleChunkProvider.doRead (SimpleChunk Provider.java:99)\nat org.springframework.batch.core.step.item.SimpleChunkProvider.read (SimpleChunkProvider.java:180)\nat org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration (SimpleChunk Provider.java:126)\nat org.springframework.batch.repeat.support.RepeatTemplate.getNextResult (RepeatTemplate.java:375)\nat org.springframework.batch.repeat.support.RepeatTemplate.executeInternal (RepeatTemplate.java:215)\nat org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)\nat org.springframework.batch.core.step.item.SimpleChunk Provider.provide (SimpleChunkProvider.java:118)\nat org.springframework.batch.core.step.item. ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:71)\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction (TaskletStep.java:407)\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)\nat org.springframework.transaction.support. Transaction Template.execute(Transaction Template.java:140)\nat org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext (TaskletStep.java:273)\nat org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration (StepContextRepeatCallback.java:82)\nat org.springframework.batch.repeat.support.TaskExecutorRepeatTemplate$ExecutingRunnable.run (TaskExecutorRepeatTemplate.java:262)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>This Exception is happening because of multithreading only, when i tried to look into the <strong>IteratorItemReader</strong> class line number <strong>70</strong> i've found this below code,</p>\n<pre><code>if (iterator.hasNext())\n    return iterator.next();\nelse\n    return null; // end of data\n</code></pre>\n<p>What will be the best solution to over come this issue please provide your inputs on this,</p>\n<p>Thanks in advance.</p>\n<p>any suggestions would be helpful.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1296164806,"creation_date":1296164806,"answer_id":4822268,"question_id":4822256,"body_markdown":"    String[] subset = Arrays.copyOfRange(originalArray, 1, originalArray.length);\r\n\r\n**See Also:**\r\n\r\n- [java.util.Arrays][1]\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html","title":"Java: is there an easy way to select a subset of an array?","body":"<pre><code>String[] subset = Arrays.copyOfRange(originalArray, 1, originalArray.length);\n</code></pre>\n\n<p><strong>See Also:</strong></p>\n\n<ul>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">java.util.Arrays</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":136,"is_accepted":true,"score":136,"last_activity_date":1693547112,"creation_date":1296164846,"answer_id":4822280,"question_id":4822256,"body_markdown":"Use [`copyOfRange`][1], available since Java 1.6:\r\n\r\n    Arrays.copyOfRange(array, 1, array.length);\r\n\r\nAlternatives include:\r\n\r\n- [`ArrayUtils.subarray(array, 1, array.length)`](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#subarray-T:A-int-int-) from Apache [commons-lang][2]\r\n- [`System.arraycopy(...)`][3] - rather unfriendly with the long param list.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\r\n  [2]: http://commons.apache.org/lang/\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)","title":"Java: is there an easy way to select a subset of an array?","body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\" rel=\"nofollow noreferrer\"><code>copyOfRange</code></a>, available since Java 1.6:</p>\n<pre><code>Arrays.copyOfRange(array, 1, array.length);\n</code></pre>\n<p>Alternatives include:</p>\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#subarray-T:A-int-int-\" rel=\"nofollow noreferrer\"><code>ArrayUtils.subarray(array, 1, array.length)</code></a> from Apache <a href=\"http://commons.apache.org/lang/\" rel=\"nofollow noreferrer\">commons-lang</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)\" rel=\"nofollow noreferrer\"><code>System.arraycopy(...)</code></a> - rather unfriendly with the long param list.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1576394306,"creation_date":1500968310,"answer_id":45296832,"question_id":4822256,"body_markdown":"Stream API could be used too:\r\n\r\n    String[] array = {&quot;A&quot;, &quot;B&quot;};\r\n        \r\n    Arrays.stream(array).skip(1).toArray(String[]::new);\r\n\r\nHowever, the answer from Bozho should be preferred.","title":"Java: is there an easy way to select a subset of an array?","body":"<p>Stream API could be used too:</p>\n\n<pre><code>String[] array = {\"A\", \"B\"};\n\nArrays.stream(array).skip(1).toArray(String[]::new);\n</code></pre>\n\n<p>However, the answer from Bozho should be preferred.</p>\n"}],"owner":{"account_id":146405,"reputation":62778,"user_id":356849,"accept_rate":88,"display_name":"NullVoxPopuli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103343,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":4822280,"answer_count":3,"score":77,"last_activity_date":1693547112,"creation_date":1296164717,"question_id":4822256,"body_markdown":"I have a `String[]` that has at least 2 elements.\r\n\r\nI want to create a new `String[]` that has elements 1 through the rest of them. So.. basically, just skipping the first one.\r\n\r\nCan this be done in one line? easily?","title":"Java: is there an easy way to select a subset of an array?","body":"<p>I have a <code>String[]</code> that has at least 2 elements.</p>\n\n<p>I want to create a new <code>String[]</code> that has elements 1 through the rest of them. So.. basically, just skipping the first one.</p>\n\n<p>Can this be done in one line? easily?</p>\n"},{"tags":["java","encoding","xom"],"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1693382656,"post_id":77006003,"comment_id":135751707,"body_markdown":"The console may be badly configured, so when  it receives the bytes misinterpret them. Change the console encoding to the correct value.","body":"The console may be badly configured, so when  it receives the bytes misinterpret them. Change the console encoding to the correct value."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1693383131,"post_id":77006003,"comment_id":135751805,"body_markdown":"&quot;I tried many different things with different encodings&quot; please show these things.","body":"&quot;I tried many different things with different encodings&quot; please show these things."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1693383980,"post_id":77006003,"comment_id":135751985,"body_markdown":"Why do you care? The String encoding of binary data isn&#39;t useful, and neither is streaming serializations to `System.out`. Print out the actual bytes. You will find they are exactly the same and that you have nothing to worry about.","body":"Why do you care? The String encoding of binary data isn&#39;t useful, and neither is streaming serializations to <code>System.out</code>. Print out the actual bytes. You will find they are exactly the same and that you have nothing to worry about."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693385462,"post_id":77006003,"comment_id":135752313,"body_markdown":"The problem is actually that I am sending this xml to another service which is saying invalid UTF-8. I thought if I can just get the output of the correct stream to System.out somehow it should work. And the System.out only shows the correct string if I use UTF-8, so I think it is the correct encoding.","body":"The problem is actually that I am sending this xml to another service which is saying invalid UTF-8. I thought if I can just get the output of the correct stream to System.out somehow it should work. And the System.out only shows the correct string if I use UTF-8, so I think it is the correct encoding."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1693385971,"post_id":77006003,"comment_id":135752431,"body_markdown":"What `Serializer` class are you using? And how are you sending the data to the server? If that involves `String` or `Writer`, don&#39;t. Send the bytes.","body":"What <code>Serializer</code> class are you using? And how are you sending the data to the server? If that involves <code>String</code> or <code>Writer</code>, don&#39;t. Send the bytes."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693386214,"post_id":77006003,"comment_id":135752472,"body_markdown":"I am using the nu.xom.Serializer. I could solve the console problem by setting the encoding of the console to UTF-8. I still have to figure out why my other service is throwing an error, thought that would be related, but this question is solved.","body":"I am using the nu.xom.Serializer. I could solve the console problem by setting the encoding of the console to UTF-8. I still have to figure out why my other service is throwing an error, thought that would be related, but this question is solved."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693386298,"post_id":77006003,"comment_id":135752492,"body_markdown":"Ah sending the bytes is a good call, I will try that thanks.","body":"Ah sending the bytes is a good call, I will try that thanks."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693386415,"post_id":77006003,"comment_id":135752517,"body_markdown":"Yeah, sending the bytes and not a string also solved my other problem, thank you!","body":"Yeah, sending the bytes and not a string also solved my other problem, thank you!"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1693547004,"post_id":77006003,"comment_id":135778001,"body_markdown":"@MichaelLamprecht FYI, I edited your question to remove the solution to your problem, which you have posted as an answer. Please don&#39;t edit your question to do that. It is simply not how things are done here, and it is confusing to readers.","body":"@MichaelLamprecht FYI, I edited your question to remove the solution to your problem, which you have posted as an answer. Please don&#39;t edit your question to do that. It is simply not how things are done here, and it is confusing to readers."}],"answers":[{"tags":[],"owner":{"account_id":11624596,"reputation":1170,"user_id":8514772,"display_name":"Pradipta Sarma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693384551,"creation_date":1693384551,"answer_id":77006264,"question_id":77006003,"body_markdown":"You get the right output with `serializer2` maybe because the console probably uses the default encoding of your system (mostlikely UTF8, which can display the special characters correctly).\r\n\r\nWith `serializer` you&#39;re using ByteArrayOutputStream, which may not inherently handle character encoding like Console does. You can try explicitly providing the encoding while converting the ByteArrayOutputStream to a string. Something like `new String(stream.toByteArray(), StandardCharsets.UTF_8)`.","title":"Why is the output different when serializing to different streams? (Java)","body":"<p>You get the right output with <code>serializer2</code> maybe because the console probably uses the default encoding of your system (mostlikely UTF8, which can display the special characters correctly).</p>\n<p>With <code>serializer</code> you're using ByteArrayOutputStream, which may not inherently handle character encoding like Console does. You can try explicitly providing the encoding while converting the ByteArrayOutputStream to a string. Something like <code>new String(stream.toByteArray(), StandardCharsets.UTF_8)</code>.</p>\n"},{"tags":[],"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693402134,"creation_date":1693402134,"answer_id":77008506,"question_id":77006003,"body_markdown":"Putting the line `System.setOut(new PrintStream(System.out, true, StandardCharsets.UTF_8));` above the console output solved the problem, now the console is always showing the correct string.","title":"Why is the output different when serializing to different streams? (Java)","body":"<p>Putting the line <code>System.setOut(new PrintStream(System.out, true, StandardCharsets.UTF_8));</code> above the console output solved the problem, now the console is always showing the correct string.</p>\n"}],"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77008506,"answer_count":2,"score":-1,"last_activity_date":1693547081,"creation_date":1693382413,"question_id":77006003,"body_markdown":"I have a problem with an xml that contains special characters (the problematic string is **l&#246;&#246;&#246;schee\\`\\*‘‘&#167;a**). The xml comes as an XOM Object in Java.\r\nWhile investigating the problem I tried to print out the text of the xml with a serializer.\r\nI noticed that streaming directly to System.out was the only way to get the correct string.\r\n\r\nHere is the code I used for printing out the xml:\r\n\r\n```\r\nElement pEntry; //this is the XOM object I get, it contains the xml\r\nDocument document = pEntry.getDocument();\r\nByteArrayOutputStream stream = new ByteArrayOutputStream();\r\nSerializer serializer = new Serializer(stream);\r\nSerializer serializer2 = new Serializer(System.out);\r\ntry {\r\n    serializer.write(document);\r\n    serializer2.write(document);\r\n} catch (IOException e) {\r\n    System.out.println(e.getMessage());\r\n}\r\nSystem.out.println(&quot;#####################################################################&quot;);\r\nSystem.out.println(stream);\r\n```\r\n\r\nSo serializer2 writes directly to System.out, there the string is as it should be.\r\nThe System.out.println prints the string as **l??????schee\\`\\*????????a**. I tried many different things with different encodings (the standard encoding for the serializer is &quot;UTF-8&quot; which seems correct), but the only way I found, that prints out the correct string is directly streaming to System.out.&lt;br&gt;\r\nI also printed the bytes of the first stream, that does not work and this was the output:&lt;br&gt;\r\n6c ffffffc3 ffffffb6 ffffffc3 ffffffb6 ffffffc3 ffffffb6 73 63 68 65 65 60 2a ffffffe2 ffffff80 ffffff98 ffffffe2 ffffff80 ffffff98 ffffffc2 ffffffa7 61.&lt;br&gt;\r\nI don&#39;t really know if this is correct and I can&#39;t print out the bytes that are streaming directly to System.out. I saw that c3 b6 for example should be an &#246;, which would be correct, but I don&#39;t know about the ffffffs.&lt;br&gt;\r\nWhy are they different, even if they use the same encoding?\r\n\r\nOther things I tried:\r\n - adding -J-Dfile.encoding=UTF-8 to the javac command -&gt; didn&#39;t make a difference\r\n - initializing the serializers with different encodings (UTF-8, UTF-16, US-ASII) -&gt; the only thing that worked correct for serializer2 was UTF-8 so I assume this is the correct encoding\r\n - Instead of `System.out.println(stream)` putting\r\n   ```\r\n   String xmlContent = stream.toString(StandardCharsets.UTF_8);\r\n   System.out.println(xmlContent);\r\n   ```\r\n   -&gt; this was at least an improvement I think, the string then looked like **l???schee\\`\\*?????a**\r\n\r\n","title":"Why is the output different when serializing to different streams? (Java)","body":"<p>I have a problem with an xml that contains special characters (the problematic string is <strong>löööschee`*‘‘§a</strong>). The xml comes as an XOM Object in Java.\nWhile investigating the problem I tried to print out the text of the xml with a serializer.\nI noticed that streaming directly to System.out was the only way to get the correct string.</p>\n<p>Here is the code I used for printing out the xml:</p>\n<pre><code>Element pEntry; //this is the XOM object I get, it contains the xml\nDocument document = pEntry.getDocument();\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nSerializer serializer = new Serializer(stream);\nSerializer serializer2 = new Serializer(System.out);\ntry {\n    serializer.write(document);\n    serializer2.write(document);\n} catch (IOException e) {\n    System.out.println(e.getMessage());\n}\nSystem.out.println(&quot;#####################################################################&quot;);\nSystem.out.println(stream);\n</code></pre>\n<p>So serializer2 writes directly to System.out, there the string is as it should be.\nThe System.out.println prints the string as <strong>l??????schee`*????????a</strong>. I tried many different things with different encodings (the standard encoding for the serializer is &quot;UTF-8&quot; which seems correct), but the only way I found, that prints out the correct string is directly streaming to System.out.<br>\nI also printed the bytes of the first stream, that does not work and this was the output:<br>\n6c ffffffc3 ffffffb6 ffffffc3 ffffffb6 ffffffc3 ffffffb6 73 63 68 65 65 60 2a ffffffe2 ffffff80 ffffff98 ffffffe2 ffffff80 ffffff98 ffffffc2 ffffffa7 61.<br>\nI don't really know if this is correct and I can't print out the bytes that are streaming directly to System.out. I saw that c3 b6 for example should be an ö, which would be correct, but I don't know about the ffffffs.<br>\nWhy are they different, even if they use the same encoding?</p>\n<p>Other things I tried:</p>\n<ul>\n<li>adding -J-Dfile.encoding=UTF-8 to the javac command -&gt; didn't make a difference</li>\n<li>initializing the serializers with different encodings (UTF-8, UTF-16, US-ASII) -&gt; the only thing that worked correct for serializer2 was UTF-8 so I assume this is the correct encoding</li>\n<li>Instead of <code>System.out.println(stream)</code> putting\n<pre><code>String xmlContent = stream.toString(StandardCharsets.UTF_8);\nSystem.out.println(xmlContent);\n</code></pre>\n-&gt; this was at least an improvement I think, the string then looked like <strong>l???schee`*?????a</strong></li>\n</ul>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":153578,"reputation":15120,"user_id":368926,"accept_rate":63,"display_name":"elias"},"down_vote_count":0,"up_vote_count":594,"is_accepted":true,"score":594,"last_activity_date":1693546787,"creation_date":1339522184,"answer_id":11001759,"question_id":11001720,"body_markdown":"The length of an array in Java is immutable. So, you need to copy the desired part into a new array.  \r\n\r\nUse [`copyOfRange`][1] method from [`java.util.Arrays`][2] class:\r\n\r\n    int[] newArray = Arrays.copyOfRange(oldArray, startIndex, endIndex);\r\n\r\n&gt; **startIndex** is the initial index of the range to be copied, inclusive.&lt;br&gt;\r\n**endIndex** is the final index of the range to be copied, exclusive. (This index may lie outside the array)\r\n\r\nE.g.:\r\n  \r\n       //index   0   1   2   3   4\r\n    int[] arr = {10, 20, 30, 40, 50};\r\n    Arrays.copyOfRange(arr, 0, 2);          // returns {10, 20}\r\n    Arrays.copyOfRange(arr, 1, 4);          // returns {20, 30, 40}\r\n    Arrays.copyOfRange(arr, 2, arr.length); // returns {30, 40, 50} (length = 5)\r\n\r\n\r\n    \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html","title":"Get only part of an Array in Java?","body":"<p>The length of an array in Java is immutable. So, you need to copy the desired part into a new array.</p>\n<p>Use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\" rel=\"nofollow noreferrer\"><code>copyOfRange</code></a> method from <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html\" rel=\"nofollow noreferrer\"><code>java.util.Arrays</code></a> class:</p>\n<pre><code>int[] newArray = Arrays.copyOfRange(oldArray, startIndex, endIndex);\n</code></pre>\n<blockquote>\n<p><strong>startIndex</strong> is the initial index of the range to be copied, inclusive.<br>\n<strong>endIndex</strong> is the final index of the range to be copied, exclusive. (This index may lie outside the array)</p>\n</blockquote>\n<p>E.g.:</p>\n<pre><code>   //index   0   1   2   3   4\nint[] arr = {10, 20, 30, 40, 50};\nArrays.copyOfRange(arr, 0, 2);          // returns {10, 20}\nArrays.copyOfRange(arr, 1, 4);          // returns {20, 30, 40}\nArrays.copyOfRange(arr, 2, arr.length); // returns {30, 40, 50} (length = 5)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1339523495,"creation_date":1339522197,"answer_id":11001763,"question_id":11001720,"body_markdown":"Yes, you can use [Arrays.copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)\r\n\r\nIt does about the same thing (note there is a copy : you don&#39;t change the initial array).","title":"Get only part of an Array in Java?","body":"<p>Yes, you can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">Arrays.copyOfRange</a></p>\n\n<p>It does about the same thing (note there is a copy : you don't change the initial array).</p>\n"},{"tags":[],"owner":{"account_id":38160,"reputation":54658,"user_id":109360,"accept_rate":98,"display_name":"dcp"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1517610949,"creation_date":1339522199,"answer_id":11001765,"question_id":11001720,"body_markdown":"Check out [copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean\\[\\],%20int,%20int%29); and example:\r\n\r\n    int[] arr2 = Arrays.copyOfRange(arr,0,3);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29","title":"Get only part of an Array in Java?","body":"<p>Check out <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean[],%20int,%20int%29\" rel=\"nofollow noreferrer\">copyOfRange</a>; and example:</p>\n\n<pre><code>int[] arr2 = Arrays.copyOfRange(arr,0,3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":888101,"reputation":80674,"user_id":927034,"accept_rate":100,"display_name":"K-ballo"},"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1339523344,"creation_date":1339522211,"answer_id":11001772,"question_id":11001720,"body_markdown":"You could wrap your array as a list, and request a sublist of it.\r\n\r\n    MyClass[] array = ...;\r\n    List&lt;MyClass&gt; subArray = Arrays.asList(array).subList(index, array.length);","title":"Get only part of an Array in Java?","body":"<p>You could wrap your array as a list, and request a sublist of it.</p>\n\n<pre><code>MyClass[] array = ...;\nList&lt;MyClass&gt; subArray = Arrays.asList(array).subList(index, array.length);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":35717,"reputation":131899,"user_id":101258,"accept_rate":100,"display_name":"Justin Ethier"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1339523066,"creation_date":1339522329,"answer_id":11001798,"question_id":11001720,"body_markdown":"If you are using Java 1.6 or greater, you can use [`Arrays.copyOfRange`][1] to copy a portion of the array. From the javadoc:\r\n\r\n&gt; Copies the specified range of the specified array into a new array. The initial index of the range (from) must lie between zero and `original.length`, inclusive. The value at `original[from]` is placed into the initial element of the copy (unless `from == original.length` or `from == to`). Values from subsequent elements in the original array are placed into subsequent elements in the copy. The final index of the range (`to`), which must be greater than or equal to `from`, may be greater than `original.length`, in which case `false` is placed in all elements of the copy whose index is greater than or equal to `original.length - from`. The length of the returned array will be `to - from`.\r\n\r\nHere is a [simple example][2]:\r\n\r\n    /**\r\n     * @Program that Copies the specified range of the specified array into a new \r\n     * array.\r\n     * CopyofRange8Array.java \r\n     * Author:-RoseIndia Team\r\n     * Date:-15-May-2008\r\n     */\r\n    import java.util.*;\r\n    public class CopyofRange8Array {\r\n        public static void main(String[] args) {\r\n           //creating a short array\r\n           Object T[]={&quot;Rose&quot;,&quot;India&quot;,&quot;Net&quot;,&quot;Limited&quot;,&quot;Rohini&quot;};\r\n            // //Copies the specified  short array upto specified range,\r\n            Object T1[] = Arrays.copyOfRange(T, 1,5);\r\n            for (int i = 0; i &lt; T1.length; i++) \r\n                //Displaying the Copied short array upto specified range\r\n                System.out.println(T1[i]);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29\r\n  [2]: http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html","title":"Get only part of an Array in Java?","body":"<p>If you are using Java 1.6 or greater, you can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29\"><code>Arrays.copyOfRange</code></a> to copy a portion of the array. From the javadoc:</p>\n\n<blockquote>\n  <p>Copies the specified range of the specified array into a new array. The initial index of the range (from) must lie between zero and <code>original.length</code>, inclusive. The value at <code>original[from]</code> is placed into the initial element of the copy (unless <code>from == original.length</code> or <code>from == to</code>). Values from subsequent elements in the original array are placed into subsequent elements in the copy. The final index of the range (<code>to</code>), which must be greater than or equal to <code>from</code>, may be greater than <code>original.length</code>, in which case <code>false</code> is placed in all elements of the copy whose index is greater than or equal to <code>original.length - from</code>. The length of the returned array will be <code>to - from</code>.</p>\n</blockquote>\n\n<p>Here is a <a href=\"http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html\">simple example</a>:</p>\n\n<pre><code>/**\n * @Program that Copies the specified range of the specified array into a new \n * array.\n * CopyofRange8Array.java \n * Author:-RoseIndia Team\n * Date:-15-May-2008\n */\nimport java.util.*;\npublic class CopyofRange8Array {\n    public static void main(String[] args) {\n       //creating a short array\n       Object T[]={\"Rose\",\"India\",\"Net\",\"Limited\",\"Rohini\"};\n        // //Copies the specified  short array upto specified range,\n        Object T1[] = Arrays.copyOfRange(T, 1,5);\n        for (int i = 0; i &lt; T1.length; i++) \n            //Displaying the Copied short array upto specified range\n            System.out.println(T1[i]);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1448307459,"creation_date":1448307459,"answer_id":33879200,"question_id":11001720,"body_markdown":"You can try: \r\n\r\n    System.arraycopy(sourceArray, 0, targetArray, 0, targetArray.length);// copies whole array\r\n\r\n    // copies elements 1 and 2 from sourceArray to targetArray\r\n    System.arraycopy(sourceArray, 1, targetArray, 0, 2); \r\n\r\nSee [javadoc for System][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html","title":"Get only part of an Array in Java?","body":"<p>You can try: </p>\n\n<pre><code>System.arraycopy(sourceArray, 0, targetArray, 0, targetArray.length);// copies whole array\n\n// copies elements 1 and 2 from sourceArray to targetArray\nSystem.arraycopy(sourceArray, 1, targetArray, 0, 2); \n</code></pre>\n\n<p>See <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html\" rel=\"noreferrer\">javadoc for System</a>.</p>\n"},{"tags":[],"owner":{"account_id":12354613,"reputation":35,"user_id":9011591,"display_name":"A. Ab"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1569168904,"creation_date":1569168904,"answer_id":58051085,"question_id":11001720,"body_markdown":"You can use `subList(int fromIndex, int toIndex)` method on your integers arr, something like this:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt; arr = new ArrayList&lt;&gt;();\r\n            arr.add(1);\r\n            arr.add(2);\r\n            arr.add(3);\r\n            arr.add(4);\r\n            List&lt;Integer&gt; partialArr = arr.subList(1, 3);\r\n            \r\n            // print the subArr\r\n            for (Integer i: partialArr)\r\n                System.out.println(i + &quot; &quot;);\r\n        }\r\n    }\r\n\r\nOutput will be: `2 3`.\r\n\r\nNote that `subList(int fromIndex, int toIndex)` method performs minus 1 on the 2nd variable it receives (var2 - 1), i don&#39;t know exactly why, but that&#39;s what happens, maybe to reduce the chance of exceeding the size of the array.\r\n\r\n\r\n","title":"Get only part of an Array in Java?","body":"<p>You can use <code>subList(int fromIndex, int toIndex)</code> method on your integers arr, something like this:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; arr = new ArrayList&lt;&gt;();\n        arr.add(1);\n        arr.add(2);\n        arr.add(3);\n        arr.add(4);\n        List&lt;Integer&gt; partialArr = arr.subList(1, 3);\n\n        // print the subArr\n        for (Integer i: partialArr)\n            System.out.println(i + \" \");\n    }\n}\n</code></pre>\n\n<p>Output will be: <code>2 3</code>.</p>\n\n<p>Note that <code>subList(int fromIndex, int toIndex)</code> method performs minus 1 on the 2nd variable it receives (var2 - 1), i don't know exactly why, but that's what happens, maybe to reduce the chance of exceeding the size of the array.</p>\n"},{"tags":[],"owner":{"account_id":16323110,"reputation":11,"user_id":11788371,"display_name":"Persons123"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601903419,"creation_date":1601903419,"answer_id":64209302,"question_id":11001720,"body_markdown":"```\r\npublic static int[] range(int[] array, int start, int end){\r\n        int returner[] = new int[end-start];\r\n        for(int x = 0; x &lt;= end-start-1; x++){\r\n            returner[x] = array[x+start];\r\n        }\r\n        return returner;\r\n    }\r\n```\r\nthis is a way to do the same thing as Array.copyOfRange but without importing anything","title":"Get only part of an Array in Java?","body":"<pre><code>public static int[] range(int[] array, int start, int end){\n        int returner[] = new int[end-start];\n        for(int x = 0; x &lt;= end-start-1; x++){\n            returner[x] = array[x+start];\n        }\n        return returner;\n    }\n</code></pre>\n<p>this is a way to do the same thing as Array.copyOfRange but without importing anything</p>\n"}],"owner":{"account_id":451722,"reputation":15865,"user_id":847773,"accept_rate":69,"display_name":"Borut Flis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":542747,"favorite_count":0,"down_vote_count":2,"up_vote_count":366,"closed_date":1615639939,"accepted_answer_id":11001759,"answer_count":8,"score":364,"last_activity_date":1693546787,"creation_date":1339522040,"question_id":11001720,"body_markdown":"I have an array of Integers in Java, I would like use only a part of it. I know in Python you can do something like this array[index:] and it returns the array from the index. Is something like this possible in Java.","title":"Get only part of an Array in Java?","body":"<p>I have an array of Integers in Java, I would like use only a part of it. I know in Python you can do something like this array[index:] and it returns the array from the index. Is something like this possible in Java.</p>\n"},{"tags":["java","android","android-gradle-plugin","android-api-31"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693551738,"post_id":77020725,"comment_id":135778697,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27751241,"reputation":1,"user_id":21185644,"display_name":"SAGAR DIXIT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693546702,"creation_date":1693546702,"question_id":77020725,"body_markdown":"Failed to apply plugin class &#39;org.gradle.plugins.ide.idea.IdeaPlugin&#39;.\r\nCannot run Project.afterEvaluate(Action) when the project is already evaluated.\r\n\r\n\r\nI am New to android programming  and i face this error when try to open build view i serach about it but not found the solution \r\nthank you","title":"I face an error when try to open build view","body":"<p>Failed to apply plugin class 'org.gradle.plugins.ide.idea.IdeaPlugin'.\nCannot run Project.afterEvaluate(Action) when the project is already evaluated.</p>\n<p>I am New to android programming  and i face this error when try to open build view i serach about it but not found the solution\nthank you</p>\n"},{"tags":["java","docker","jdbc","mysql-connector","graalvm"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1655966064,"post_id":72723781,"comment_id":128457856,"body_markdown":"The error indicates that the resource file `com/mysql/cj/LocalizedErrorMessages.properties` is missing. I have never used Graal, but https://www.graalvm.org/22.0/reference-manual/native-image/Resources/ mentions _&quot;By default, the native-image tool will not integrate any of the resources which are on the classpath during the generation into the final image. To make calls such as Class.getResource() or Class.getResourceAsStream() (or their corresponding ClassLoader methods) return specific resources (instead of null), you must specify the resources that should be accessible at run time.&quot;_","body":"The error indicates that the resource file <code>com&#47;mysql&#47;cj&#47;LocalizedErrorMessages.properties</code> is missing. I have never used Graal, but <a href=\"https://www.graalvm.org/22.0/reference-manual/native-image/Resources/\" rel=\"nofollow noreferrer\">graalvm.org/22.0/reference-manual/native-image/Resources</a> mentions <i>&quot;By default, the native-image tool will not integrate any of the resources which are on the classpath during the generation into the final image. To make calls such as Class.getResource() or Class.getResourceAsStream() (or their corresponding ClassLoader methods) return specific resources (instead of null), you must specify the resources that should be accessible at run time.&quot;</i>"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1655966148,"post_id":72723781,"comment_id":128457889,"body_markdown":"In other words, you will need to identify all resources needed by your application and its dependencies, and specify them to be included. Also read the section title [_&quot;Resource Bundles in Native Image&quot;_](https://www.graalvm.org/22.0/reference-manual/native-image/Resources/#resource-bundles-in-native-image) as that seems to be specifically relevant to your case.","body":"In other words, you will need to identify all resources needed by your application and its dependencies, and specify them to be included. Also read the section title <a href=\"https://www.graalvm.org/22.0/reference-manual/native-image/Resources/#resource-bundles-in-native-image\" rel=\"nofollow noreferrer\"><i>&quot;Resource Bundles in Native Image&quot;</i></a> as that seems to be specifically relevant to your case."},{"owner":{"account_id":94604,"reputation":1021,"user_id":258182,"display_name":"EderBaum"},"score":0,"creation_date":1656002660,"post_id":72723781,"comment_id":128471606,"body_markdown":"Thank you very much Mark. Fixed the current error, but as expected we have a new one. I&#39;ll put the details right away.","body":"Thank you very much Mark. Fixed the current error, but as expected we have a new one. I&#39;ll put the details right away."},{"owner":{"account_id":12527141,"reputation":747,"user_id":9390343,"display_name":"jms"},"score":0,"creation_date":1656390187,"post_id":72723781,"comment_id":128553715,"body_markdown":"I&#39;m not very familiar with GraalVM, but from what I see, you are copying an uber/fat jar into the container which contains all the dependencies. Could it be that the mysql-connecter library included in this fat jar(which your build tool downloaded for your current architecture) is one compatible with `amazoncorretto:18-alpine` and not compatible with `ghcr.io/graalvm/graalvm-ce:latest` ?","body":"I&#39;m not very familiar with GraalVM, but from what I see, you are copying an uber/fat jar into the container which contains all the dependencies. Could it be that the mysql-connecter library included in this fat jar(which your build tool downloaded for your current architecture) is one compatible with <code>amazoncorretto:18-alpine</code> and not compatible with <code>ghcr.io&#47;graalvm&#47;graalvm-ce:latest</code> ?"},{"owner":{"account_id":94604,"reputation":1021,"user_id":258182,"display_name":"EderBaum"},"score":0,"creation_date":1656421508,"post_id":72723781,"comment_id":128564123,"body_markdown":"The command `RUN native-image -jar ./app.jar --verbose --no-fallback` transforms the java code to native. In my example on GitHub I changed the docker file to use a `FROM scratch`  image, where the code that &quot;was java&quot;, now runs without even needing an OS or VM. I tested several versions of `mysql-connector-java`, all are in the maven repository which in principle works on different platforms.","body":"The command <code>RUN native-image -jar .&#47;app.jar --verbose --no-fallback</code> transforms the java code to native. In my example on GitHub I changed the docker file to use a <code>FROM scratch</code>  image, where the code that &quot;was java&quot;, now runs without even needing an OS or VM. I tested several versions of <code>mysql-connector-java</code>, all are in the maven repository which in principle works on different platforms."}],"owner":{"account_id":94604,"reputation":1021,"user_id":258182,"display_name":"EderBaum"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":734,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1693546243,"creation_date":1655950096,"question_id":72723781,"body_markdown":"I&#39;m trying to do a basic SQL query using JDBC and mysql-connector-java on an image with Graalvm (The cause of the problem). \r\n\r\nApparently everyone who tries to use GraalVM with JDBC/MySQL and Docker will have the same problem every time.\r\n\r\nI&#39;m having the following Exception\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n\t   at com.mysql.cj.Constants.&lt;clinit&gt;(Constants.java:49)\r\n\t   at com.mysql.cj.util.Util.&lt;clinit&gt;(Util.java:67)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\r\n\t   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\r\n\t   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:229)\r\n\t   at com.me.test.Main.testJDBC(Main.java:73)\r\n\t   at com.me.test.Main.main(Main.java:94)\r\n    Caused by: java.lang.RuntimeException: Can&#39;t load resource bundle due to underlying     exception java.util.MissingResourceException: Can&#39;t find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\r\n\t   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:60)\r\n\t... 10 more\r\n    Caused by: java.util.MissingResourceException: Can&#39;t find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\r\n\t   at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:2045)\r\n\t   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1683)\r\n\t   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1586)\r\n\t   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1549)\r\n\t   at java.util.ResourceBundle.getBundle(ResourceBundle.java:858)\r\n\t   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:58)\r\n\t... 10 more\r\n\r\nMy Dockerfile\r\n\r\n    FROM ghcr.io/graalvm/graalvm-ce:latest\r\n\r\n    RUN gu install native-image\r\n    WORKDIR /tmp/dist\r\n    ADD ./app.jar ./app.jar\r\n\r\n    COPY ./reflect-config.json ./reflect-config.json\r\n\r\n    RUN native-image -jar ./app.jar --verbose --no-fallback\r\n    RUN  microdnf install zip\r\n\r\n    ADD bootstrap bootstrap\r\n\r\n    RUN chmod +x bootstrap\r\n    RUN chmod +x ./app\r\n\r\n    RUN zip -j function.zip bootstrap app\r\n\r\n\r\n    ENTRYPOINT [&quot;./app&quot;]\r\n\r\n\r\n\r\nDependencies in my pom file\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n  &lt;version&gt;8.0.29&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n  &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n  &lt;version&gt;21.5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd finally my java code:\r\n\r\n```java\r\npublic void testJDBC() throws SQLException, IOException {\r\n    String url = &quot;jdbc:mysql://foo.blabla.aws-region.rds.amazonaws.com:3306/database&quot;;\r\n    String user = &quot;root&quot;;\r\n    String password = &quot;password&quot;;\r\n    try(java.sql.Connection conn = java.sql.DriverManager.getConnection(url, user, password)){\r\n        doSomething(conn);\r\n    }\r\n}\r\n```\r\n\r\n**EDIT 1:**\r\n\r\nI followed Mark Rotteveel&#39;s recommendation, and added a *&quot;resource-config.json&quot;* file with the following:\r\n\r\n    {\r\n      &quot;resources&quot;: {\r\n        &quot;includes&quot;: [\r\n          {&quot;pattern&quot;: &quot;com.mysql.cj.LocalizedErrorMessages.properties&quot;}\r\n        ]\r\n      }\r\n    }\r\n\r\nAnd in the *&quot;native-image.properties&quot;* file the following\r\n\r\n    Args = -H:EnableURLProtocols=http,https -H:ReflectionConfigurationFiles=/tmp/dist/reflect-config.json -H:ResourceConfigurationFiles=/tmp/dist/resource-config.json\r\n\r\nFixed the current error, but as expected we have a new one:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.WrongArgumentException\r\n\t   at com.mysql.cj.util.Util.getInstance(Util.java:169)\r\n\t   at com.mysql.cj.util.Util.getInstance(Util.java:174)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\r\n\t   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\r\n\t   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:229)\r\n\t   at com.me.test.Main.testJDBC(Main.java:77)\r\n\t   at com.me.test.Main.main(Main.java:98)\r\n\r\n\r\n**EDIT 2:**\r\n\r\nI configured the following in the file *&quot;reflect-config.json&quot;*\r\n\r\n    [\r\n    \r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.SingleConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },  {\r\n      &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiConnectionUrl&quot;,\r\n      &quot;allDeclaredFields&quot;: true,\r\n      &quot;allDeclaredMethods&quot;: true,\r\n      &quot;allDeclaredConstructors&quot;: true\r\n    },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.log.Jdk14Logger&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.log.NullLogger&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n            &quot;name&quot;: &quot;com.mysql.cj.log.Slf4JLogger&quot;,\r\n            &quot;allDeclaredFields&quot;: true,\r\n            &quot;allDeclaredMethods&quot;: true,\r\n            &quot;allDeclaredConstructors&quot;: true\r\n        },\r\n      {\r\n      &quot;name&quot;: &quot;com.mysql.cj.log.StandardLogger&quot;,\r\n      &quot;allDeclaredFields&quot;: true,\r\n      &quot;allDeclaredMethods&quot;: true,\r\n      &quot;allDeclaredConstructors&quot;: true\r\n    },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.jdbc.Driver&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n    \r\n      {\r\n        &quot;name&quot;:&quot;oracle.jdbc.OracleDriver&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.jdbc.driver.T4CDriverExtension&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot; : &quot;oracle.jdbc.driver.T2CDriverExtension&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.Ano&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.AuthenticationService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.DataIntegrityService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.EncryptionService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.SupervisorService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      }\r\n    ]\r\n\r\nBut for some reason there is a connection error (Tested With AWS RDS, and host.docker.internal). \r\n\r\n    Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Cannot connect to MySQL server on foo.blabla.aws-region.rds.amazonaws.com:3,306.\r\n    \r\n    Make sure that there is a MySQL server running on the machine/port you are trying to connect to and that the machine this software is running on is able to connect to this host/port (i.e. not firewalled). Also make sure that the server has not been started with the --skip-networking flag.\r\n    \r\n    \r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:462)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\r\n    \tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:229)\r\n    \tat com.me.test.Main.testJDBC(Main.java:104)\r\n    \tat com.me.test.Main.main(Main.java:125)\r\n    Caused by: java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.UnableToConnectException\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\r\n    \t... 6 more\r\n\r\n\r\nThis error only occurs using *&quot;ghcr.io/graalvm/graalvm-ce:latest&quot;*, if I use another VM like *&quot;amazoncorretto:18-alpine&quot;* everything works perfect.\r\n\r\nFull Source Code: https://github.com/ederbaum/MySQLGraalVM\r\n\r\nAny possible solution?","title":"MySQL connector does not work with GraalVM and Docker","body":"<p>I'm trying to do a basic SQL query using JDBC and mysql-connector-java on an image with Graalvm (The cause of the problem).</p>\n<p>Apparently everyone who tries to use GraalVM with JDBC/MySQL and Docker will have the same problem every time.</p>\n<p>I'm having the following Exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\n   at com.mysql.cj.Constants.&lt;clinit&gt;(Constants.java:49)\n   at com.mysql.cj.util.Util.&lt;clinit&gt;(Util.java:67)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\n   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\n   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\n   at java.sql.DriverManager.getConnection(DriverManager.java:681)\n   at java.sql.DriverManager.getConnection(DriverManager.java:229)\n   at com.me.test.Main.testJDBC(Main.java:73)\n   at com.me.test.Main.main(Main.java:94)\nCaused by: java.lang.RuntimeException: Can't load resource bundle due to underlying     exception java.util.MissingResourceException: Can't find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\n   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:60)\n... 10 more\nCaused by: java.util.MissingResourceException: Can't find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\n   at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:2045)\n   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1683)\n   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1586)\n   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1549)\n   at java.util.ResourceBundle.getBundle(ResourceBundle.java:858)\n   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:58)\n... 10 more\n</code></pre>\n<p>My Dockerfile</p>\n<pre><code>FROM ghcr.io/graalvm/graalvm-ce:latest\n\nRUN gu install native-image\nWORKDIR /tmp/dist\nADD ./app.jar ./app.jar\n\nCOPY ./reflect-config.json ./reflect-config.json\n\nRUN native-image -jar ./app.jar --verbose --no-fallback\nRUN  microdnf install zip\n\nADD bootstrap bootstrap\n\nRUN chmod +x bootstrap\nRUN chmod +x ./app\n\nRUN zip -j function.zip bootstrap app\n\n\nENTRYPOINT [&quot;./app&quot;]\n</code></pre>\n<p>Dependencies in my pom file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;mysql&lt;/groupId&gt;\n  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n  &lt;version&gt;8.0.29&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n  &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n  &lt;version&gt;21.5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And finally my java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void testJDBC() throws SQLException, IOException {\n    String url = &quot;jdbc:mysql://foo.blabla.aws-region.rds.amazonaws.com:3306/database&quot;;\n    String user = &quot;root&quot;;\n    String password = &quot;password&quot;;\n    try(java.sql.Connection conn = java.sql.DriverManager.getConnection(url, user, password)){\n        doSomething(conn);\n    }\n}\n</code></pre>\n<p><strong>EDIT 1:</strong></p>\n<p>I followed Mark Rotteveel's recommendation, and added a <em>&quot;resource-config.json&quot;</em> file with the following:</p>\n<pre><code>{\n  &quot;resources&quot;: {\n    &quot;includes&quot;: [\n      {&quot;pattern&quot;: &quot;com.mysql.cj.LocalizedErrorMessages.properties&quot;}\n    ]\n  }\n}\n</code></pre>\n<p>And in the <em>&quot;native-image.properties&quot;</em> file the following</p>\n<pre><code>Args = -H:EnableURLProtocols=http,https -H:ReflectionConfigurationFiles=/tmp/dist/reflect-config.json -H:ResourceConfigurationFiles=/tmp/dist/resource-config.json\n</code></pre>\n<p>Fixed the current error, but as expected we have a new one:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.WrongArgumentException\n   at com.mysql.cj.util.Util.getInstance(Util.java:169)\n   at com.mysql.cj.util.Util.getInstance(Util.java:174)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\n   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\n   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\n   at java.sql.DriverManager.getConnection(DriverManager.java:681)\n   at java.sql.DriverManager.getConnection(DriverManager.java:229)\n   at com.me.test.Main.testJDBC(Main.java:77)\n   at com.me.test.Main.main(Main.java:98)\n</code></pre>\n<p><strong>EDIT 2:</strong></p>\n<p>I configured the following in the file <em>&quot;reflect-config.json&quot;</em></p>\n<pre><code>[\n\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.SingleConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },  {\n  &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiConnectionUrl&quot;,\n  &quot;allDeclaredFields&quot;: true,\n  &quot;allDeclaredMethods&quot;: true,\n  &quot;allDeclaredConstructors&quot;: true\n},\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.log.Jdk14Logger&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.log.NullLogger&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n        &quot;name&quot;: &quot;com.mysql.cj.log.Slf4JLogger&quot;,\n        &quot;allDeclaredFields&quot;: true,\n        &quot;allDeclaredMethods&quot;: true,\n        &quot;allDeclaredConstructors&quot;: true\n    },\n  {\n  &quot;name&quot;: &quot;com.mysql.cj.log.StandardLogger&quot;,\n  &quot;allDeclaredFields&quot;: true,\n  &quot;allDeclaredMethods&quot;: true,\n  &quot;allDeclaredConstructors&quot;: true\n},\n  {\n    &quot;name&quot;: &quot;com.mysql.jdbc.Driver&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n\n  {\n    &quot;name&quot;:&quot;oracle.jdbc.OracleDriver&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.jdbc.driver.T4CDriverExtension&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot; : &quot;oracle.jdbc.driver.T2CDriverExtension&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.Ano&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.AuthenticationService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.DataIntegrityService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.EncryptionService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.SupervisorService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  }\n]\n</code></pre>\n<p>But for some reason there is a connection error (Tested With AWS RDS, and host.docker.internal).</p>\n<pre><code>Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Cannot connect to MySQL server on foo.blabla.aws-region.rds.amazonaws.com:3,306.\n\nMake sure that there is a MySQL server running on the machine/port you are trying to connect to and that the machine this software is running on is able to connect to this host/port (i.e. not firewalled). Also make sure that the server has not been started with the --skip-networking flag.\n\n\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:462)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\n    at java.sql.DriverManager.getConnection(DriverManager.java:681)\n    at java.sql.DriverManager.getConnection(DriverManager.java:229)\n    at com.me.test.Main.testJDBC(Main.java:104)\n    at com.me.test.Main.main(Main.java:125)\nCaused by: java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.UnableToConnectException\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\n    ... 6 more\n</code></pre>\n<p>This error only occurs using <em>&quot;ghcr.io/graalvm/graalvm-ce:latest&quot;</em>, if I use another VM like <em>&quot;amazoncorretto:18-alpine&quot;</em> everything works perfect.</p>\n<p>Full Source Code: <a href=\"https://github.com/ederbaum/MySQLGraalVM\" rel=\"nofollow noreferrer\">https://github.com/ederbaum/MySQLGraalVM</a></p>\n<p>Any possible solution?</p>\n"},{"tags":["java","freemarker"],"answers":[{"tags":[],"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457640848,"creation_date":1457640848,"answer_id":35926330,"question_id":35918052,"body_markdown":"There&#39;s no such feature out of the box, but it&#39;s just the question of the `TemplateHashModel` implementation you pass in as the data model. (The data model is always a `TemplateHashModel`, though if you pass in a POJO FreeMarker will adapt it automatically via the `ObjectWrapper` in the `Configuration`.) You could easily write a `TemplateHashModel` implementation that encloses a list of other `TemplateHashModel`-s, and whose `get(String)` returns the requested variable from the first enclosed `TemplateHashModel` whose `get(String)` returns non-`null`. To adapt your POJO (`CDATA1` etc.) to `TemplateHashModel` call `cfg.getObjectWrapper().wrap(myObject)`, where `cfg` is the `freemarker.template.Configuration` object.","title":"Java: Using 2 or more Classes for Freemarker Data Model processing","body":"<p>There's no such feature out of the box, but it's just the question of the <code>TemplateHashModel</code> implementation you pass in as the data model. (The data model is always a <code>TemplateHashModel</code>, though if you pass in a POJO FreeMarker will adapt it automatically via the <code>ObjectWrapper</code> in the <code>Configuration</code>.) You could easily write a <code>TemplateHashModel</code> implementation that encloses a list of other <code>TemplateHashModel</code>-s, and whose <code>get(String)</code> returns the requested variable from the first enclosed <code>TemplateHashModel</code> whose <code>get(String)</code> returns non-<code>null</code>. To adapt your POJO (<code>CDATA1</code> etc.) to <code>TemplateHashModel</code> call <code>cfg.getObjectWrapper().wrap(myObject)</code>, where <code>cfg</code> is the <code>freemarker.template.Configuration</code> object.</p>\n"},{"tags":[],"owner":{"account_id":12025007,"reputation":83,"user_id":8797251,"display_name":"mohd sabahat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693545573,"creation_date":1693545573,"answer_id":77020658,"question_id":35918052,"body_markdown":"I know i am too late but why not do something like\r\n```java\r\nMap&lt;String, Object&gt; dataModel = new HashMap&lt;&gt;();\r\ndataModel.put(&quot;CDATA1&quot;, config_generator.CDATA1);\r\ndataModel.put(&quot;CDATA2&quot;, config_generator.CDATA2);\r\ntemplateValues.process(dataModel, stringWriter);\r\n```\r\nCorrect me if I got something wrong.","title":"Java: Using 2 or more Classes for Freemarker Data Model processing","body":"<p>I know i am too late but why not do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Object&gt; dataModel = new HashMap&lt;&gt;();\ndataModel.put(&quot;CDATA1&quot;, config_generator.CDATA1);\ndataModel.put(&quot;CDATA2&quot;, config_generator.CDATA2);\ntemplateValues.process(dataModel, stringWriter);\n</code></pre>\n<p>Correct me if I got something wrong.</p>\n"}],"owner":{"account_id":7943601,"reputation":15,"user_id":5996770,"display_name":"Marcus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693545573,"creation_date":1457616942,"question_id":35918052,"body_markdown":"I&#39;ve got a problem with understanding the Freemarker Data Model and how to work with it correctly.\r\nI currently have 1 Core Data Class.\r\nIt is stuffed as hell (a lot of variables with getters and setters) and I want to split it into different Classes.\r\n\r\nBut my Core Class is fueling a Freemarker processing... And I just don&#39;t get, how to get this working with several classes.\r\n\r\nCurrently I use this:\r\n\r\n    templateValues.process(config_generator.CDATA, stringWriter);\r\nCDATA is my Core Data Class...\r\nI checked the Freemarker guide several times, but I just don&#39;t get it.\r\n\r\nIf I would implement 2 Classes (CDATA1 &amp; CDATA2 i.e.) how would I set up the processing? And would this work with even more Classes as well? (CDATA3 to X).","title":"Java: Using 2 or more Classes for Freemarker Data Model processing","body":"<p>I've got a problem with understanding the Freemarker Data Model and how to work with it correctly.\nI currently have 1 Core Data Class.\nIt is stuffed as hell (a lot of variables with getters and setters) and I want to split it into different Classes.</p>\n\n<p>But my Core Class is fueling a Freemarker processing... And I just don't get, how to get this working with several classes.</p>\n\n<p>Currently I use this:</p>\n\n<pre><code>templateValues.process(config_generator.CDATA, stringWriter);\n</code></pre>\n\n<p>CDATA is my Core Data Class...\nI checked the Freemarker guide several times, but I just don't get it.</p>\n\n<p>If I would implement 2 Classes (CDATA1 &amp; CDATA2 i.e.) how would I set up the processing? And would this work with even more Classes as well? (CDATA3 to X).</p>\n"},{"tags":["java","arrays","arraylist"],"answers":[{"tags":[],"owner":{"account_id":244572,"reputation":2040,"user_id":2266682,"accept_rate":75,"display_name":"Aqeel Ashiq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693542330,"creation_date":1693541173,"answer_id":77020446,"question_id":77020391,"body_markdown":"`arr` is an `ArrayList`. Its syntax is little bit different from `Array`.\r\n\r\nTo get a value: `arr.get(i)` \r\n\r\nTo get length: `arr.size()`\r\n\r\n**Update:**\r\n\r\nTo update a value in `ArrayList`, you cannot do `arr.get(left) = arr.get(right)` or `arr.get(right) = temp`. Rather you have to do:\r\n\r\n    \r\n    arr.set(left, arr.get(right));\r\n    arr.set(right, temp);\r\n","title":"Reverse the array after a fixed position","body":"<p><code>arr</code> is an <code>ArrayList</code>. Its syntax is little bit different from <code>Array</code>.</p>\n<p>To get a value: <code>arr.get(i)</code></p>\n<p>To get length: <code>arr.size()</code></p>\n<p><strong>Update:</strong></p>\n<p>To update a value in <code>ArrayList</code>, you cannot do <code>arr.get(left) = arr.get(right)</code> or <code>arr.get(right) = temp</code>. Rather you have to do:</p>\n<pre><code>arr.set(left, arr.get(right));\narr.set(right, temp);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1693544911,"creation_date":1693544372,"answer_id":77020610,"question_id":77020391,"body_markdown":"```java\r\npublic static void reverse(int[] arr, int m) {\r\n    int lo = Math.max(0, m + 1);\r\n    int hi = arr.length - 1;\r\n\r\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\r\n        // swap arr[i] and arr[j]\r\n        int tmp = arr[i];\r\n        arr[i] = arr[j];\r\n        arr[j] = tmp;\r\n    }\r\n}\r\n```\r\n\r\n**Demo:**\r\n```java\r\nint[] arr = { 0, 1, 2, 3, 4, 5, 6 };\r\nreverse(arr, 3);\r\nSystem.out.println(Arrays.toString(arr));    // [0, 1, 2, 3, 6, 5, 4]\r\n```\r\n---\r\nIn case you have a `ArrayList`, then you shuld do similar:\r\n```java\r\npublic static void reverse(List&lt;Integer&gt; arr, int m) {\r\n    int lo = Math.max(0, m + 1);\r\n    int hi = arr.size() - 1;\r\n\r\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\r\n        // swap arr[i] and arr[j]\r\n        int tmp = arr.get(i);\r\n        arr.set(i, arr.get(j));\r\n        arr.set(j, tmp);\r\n    }\r\n}\r\n``` ","title":"Reverse the array after a fixed position","body":"<pre class=\"lang-java prettyprint-override\"><code>public static void reverse(int[] arr, int m) {\n    int lo = Math.max(0, m + 1);\n    int hi = arr.length - 1;\n\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\n        // swap arr[i] and arr[j]\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n}\n</code></pre>\n<p><strong>Demo:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] arr = { 0, 1, 2, 3, 4, 5, 6 };\nreverse(arr, 3);\nSystem.out.println(Arrays.toString(arr));    // [0, 1, 2, 3, 6, 5, 4]\n</code></pre>\n<hr />\n<p>In case you have a <code>ArrayList</code>, then you shuld do similar:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void reverse(List&lt;Integer&gt; arr, int m) {\n    int lo = Math.max(0, m + 1);\n    int hi = arr.size() - 1;\n\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\n        // swap arr[i] and arr[j]\n        int tmp = arr.get(i);\n        arr.set(i, arr.get(j));\n        arr.set(j, tmp);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29342033,"reputation":1,"user_id":22481220,"display_name":"Immortal Sugimoto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1693544911,"creation_date":1693539974,"question_id":77020391,"body_markdown":"Given an ArrayList &#39;arr&#39; of integers and a position &#39;m&#39; . You have to reverse the array after that position.\r\n\r\nExample\r\n```\r\nWe have an Array arr = {1, 2, 3, 4, 5, 6} and m = 3, considering O based indexing so the subarray   {5, 6} will be reversed and our output array will be {1, 2, 3, 4, 6, 5}\r\n```\r\n\r\nConstraints\r\n```\r\n1&lt;=T&lt;=10\r\n0 &lt;= M &lt;= N &lt;= 5*10^4\r\n10^(-9) &lt;= arr[i] &lt;= 10^(9)\r\nTime Limit: 1 second\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nfor this question this is what I did\r\n\r\n```\r\nimport java.util.* ;\r\nimport java.io.*; \r\nimport java.util.ArrayList;\r\n\r\npublic class Solution \r\n{\r\n    \r\n    public static void reverseArray(ArrayList&lt;Integer&gt; arr, int m)\r\n    {\r\n        ArrayList&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\r\n\r\n        for(int i = 0; i&lt;= m ; i++){\r\n            nums.add(arr.get[i]);\r\n        }\r\n        int left = m+1;\r\n        int right = arr.length -1;\r\n        while(left&lt;right){\r\n            int temp = arr.get[left];\r\n            arr.get[left] = arr.get[right];\r\n            arr.get[right] = temp;\r\n\r\n            teft++;\r\n            right--;\r\n        }\r\n        for(int i = m+1; i&lt; arr.length; i++){\r\n            nums.add(arr.get[m+1]);\r\n        }\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\non running it shows this error\r\n\r\n```\r\nCompilation Failed\r\n./Solution.java:13: error: cannot find symbol\r\n            nums.add(arr.get[i]);\r\n                        ^\r\n  symbol:   variable get\r\n  location: variable arr of type ArrayList\r\n./Solution.java:16: error: cannot find symbol\r\n        int right = arr.length -1;\r\n                       ^\r\n  symbol:   variable length\r\n  location: variable arr of type ArrayList\r\n./Solution.java:18: error: cannot find symbol\r\n            int temp = arr.get[left];\r\n                          ^\r\n  symbol:   variable get\r\n  location: variable arr of type ArrayList\r\n\r\n```\r\n\r\nCan you help in identifying my mistake in the code and as well as how to read the compilation error like I&#39;m not able to understand them.\r\n","title":"Reverse the array after a fixed position","body":"<p>Given an ArrayList 'arr' of integers and a position 'm' . You have to reverse the array after that position.</p>\n<p>Example</p>\n<pre><code>We have an Array arr = {1, 2, 3, 4, 5, 6} and m = 3, considering O based indexing so the subarray   {5, 6} will be reversed and our output array will be {1, 2, 3, 4, 6, 5}\n</code></pre>\n<p>Constraints</p>\n<pre><code>1&lt;=T&lt;=10\n0 &lt;= M &lt;= N &lt;= 5*10^4\n10^(-9) &lt;= arr[i] &lt;= 10^(9)\nTime Limit: 1 second\n</code></pre>\n<p>for this question this is what I did</p>\n<pre><code>import java.util.* ;\nimport java.io.*; \nimport java.util.ArrayList;\n\npublic class Solution \n{\n    \n    public static void reverseArray(ArrayList&lt;Integer&gt; arr, int m)\n    {\n        ArrayList&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\n\n        for(int i = 0; i&lt;= m ; i++){\n            nums.add(arr.get[i]);\n        }\n        int left = m+1;\n        int right = arr.length -1;\n        while(left&lt;right){\n            int temp = arr.get[left];\n            arr.get[left] = arr.get[right];\n            arr.get[right] = temp;\n\n            teft++;\n            right--;\n        }\n        for(int i = m+1; i&lt; arr.length; i++){\n            nums.add(arr.get[m+1]);\n        }\n\n    }\n}\n\n</code></pre>\n<p>on running it shows this error</p>\n<pre><code>Compilation Failed\n./Solution.java:13: error: cannot find symbol\n            nums.add(arr.get[i]);\n                        ^\n  symbol:   variable get\n  location: variable arr of type ArrayList\n./Solution.java:16: error: cannot find symbol\n        int right = arr.length -1;\n                       ^\n  symbol:   variable length\n  location: variable arr of type ArrayList\n./Solution.java:18: error: cannot find symbol\n            int temp = arr.get[left];\n                          ^\n  symbol:   variable get\n  location: variable arr of type ArrayList\n\n</code></pre>\n<p>Can you help in identifying my mistake in the code and as well as how to read the compilation error like I'm not able to understand them.</p>\n"},{"tags":["java","spring-boot","testing"],"answers":[{"tags":[],"owner":{"account_id":5853192,"reputation":58,"user_id":4611288,"display_name":"Randi Trigger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614567351,"creation_date":1614567351,"answer_id":66416049,"question_id":66415881,"body_markdown":"It sounds like you&#39;ll want to define a ContentNegotiationCongiurer. Here&#39;s a doc: https://www.baeldung.com/spring-mvc-content-negotiation-json-xml\r\n\r\nThe short answer is to add something like this to the Spring context\r\n\r\n```\r\n@Configuration\r\npublic class WebConfig extends WebMvcConfigurerAdapter {\r\n    @Override\r\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\r\n        configurer.defaultContentType(MediaType.APPLICATION_JSON);\r\n    }\r\n}\r\n```","title":"How to force springboot return Json response with global settings","body":"<p>It sounds like you'll want to define a ContentNegotiationCongiurer. Here's a doc: <a href=\"https://www.baeldung.com/spring-mvc-content-negotiation-json-xml\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-content-negotiation-json-xml</a></p>\n<p>The short answer is to add something like this to the Spring context</p>\n<pre><code>@Configuration\npublic class WebConfig extends WebMvcConfigurerAdapter {\n    @Override\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\n        configurer.defaultContentType(MediaType.APPLICATION_JSON);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8609684,"reputation":996,"user_id":6448518,"display_name":"rougou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693543459,"creation_date":1693543459,"answer_id":77020564,"question_id":66415881,"body_markdown":"You can force a JSON response with the following configuration:\r\n\r\n    @Configuration\r\n    public class WebConfig implements WebMvcConfigurer {\r\n\r\n        @Override\r\n        public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\r\n            configurer.strategies(List.of(new FixedContentNegotiationStrategy(MediaType.APPLICATION_JSON)));\r\n        }\r\n    }","title":"How to force springboot return Json response with global settings","body":"<p>You can force a JSON response with the following configuration:</p>\n<pre><code>@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\n        configurer.strategies(List.of(new FixedContentNegotiationStrategy(MediaType.APPLICATION_JSON)));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20100957,"reputation":285,"user_id":14739428,"display_name":"william"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1595,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693543459,"creation_date":1614565595,"question_id":66415881,"body_markdown":"Here are problems. They who are testing my application told me that when they trying to directly input the url into address to query a GET url by chrome. My api will always return a XML formatted response like this.\r\n[![enter image description here][1]][1]\r\n&lt;br&gt;&lt;br&gt;\r\nBut all the response should be formatted in JSON string ! XML is unacceptable !\r\n&lt;br&gt;&lt;br&gt;\r\nI tried to analyze the source code and found request sending by chrome directly will bear attributes like this:\r\n&lt;br&gt;&lt;br&gt;\r\naccept= text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\r\n&lt;br&gt;\r\ncontent-type=null\r\n&lt;br&gt;&lt;br&gt;\r\nwhile any other application will send request with:\r\n&lt;br&gt;&lt;br&gt;\r\naccept= \\*/*   (or accept = application/json)\r\n&lt;br&gt;\r\ncontent-type = application/json\r\n&lt;br&gt;&lt;br&gt;\r\nIn this case , springboot will then response XML to the request send by chrome because of the missing content-type and specified accept properties.\r\n&lt;br&gt;&lt;br&gt;\r\nThere is a way to fix this case by excluding jackson for XML in pom. But I don&#39;t think it is a graceful way.\r\n&lt;br&gt;&lt;br&gt;\r\nSo far I refused to fix this problem because I have told Front-end code colleague to send request with specified &quot;application/json&quot; attribute and no problem occured again.\r\n&lt;br&gt;&lt;br&gt;\r\nBut still, I think I have responsibilities to fix it and there should be ways more graceful to fix this problem.\r\n&lt;br&gt;&lt;br&gt;\r\nThere are too many api deployed in my application and there is no way to set a response type for every controller. I&#39;m looking for a global setting for this case.\r\n&lt;br&gt;&lt;br&gt;\r\nI think there should be some way to act like RequestInterceptor to set headers of a request, but I found that impossible to directly modify the headers from those request in my gateway service.\r\n&lt;br&gt;&lt;br&gt;\r\nHelp me with this case please. Thanks a lot!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8BNrQ.png","title":"How to force springboot return Json response with global settings","body":"<p>Here are problems. They who are testing my application told me that when they trying to directly input the url into address to query a GET url by chrome. My api will always return a XML formatted response like this.\n<a href=\"https://i.stack.imgur.com/8BNrQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8BNrQ.png\" alt=\"enter image description here\" /></a>\n<br><br>\nBut all the response should be formatted in JSON string ! XML is unacceptable !\n<br><br>\nI tried to analyze the source code and found request sending by chrome directly will bear attributes like this:\n<br><br>\naccept= text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,<em>/</em>;q=0.8,application/signed-exchange;v=b3;q=0.9\n<br>\ncontent-type=null\n<br><br>\nwhile any other application will send request with:\n<br><br>\naccept= */*   (or accept = application/json)\n<br>\ncontent-type = application/json\n<br><br>\nIn this case , springboot will then response XML to the request send by chrome because of the missing content-type and specified accept properties.\n<br><br>\nThere is a way to fix this case by excluding jackson for XML in pom. But I don't think it is a graceful way.\n<br><br>\nSo far I refused to fix this problem because I have told Front-end code colleague to send request with specified &quot;application/json&quot; attribute and no problem occured again.\n<br><br>\nBut still, I think I have responsibilities to fix it and there should be ways more graceful to fix this problem.\n<br><br>\nThere are too many api deployed in my application and there is no way to set a response type for every controller. I'm looking for a global setting for this case.\n<br><br>\nI think there should be some way to act like RequestInterceptor to set headers of a request, but I found that impossible to directly modify the headers from those request in my gateway service.\n<br><br>\nHelp me with this case please. Thanks a lot!</p>\n"},{"tags":["java","spring-webflux","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693543220,"creation_date":1693543220,"answer_id":77020552,"question_id":77001146,"body_markdown":"You can use `switchIfEmpty` operator to handle empty responses and as an option return error\r\n\r\n```\r\nwebClient.get()\r\n  .uri(&quot;&lt;endpoint&gt;&quot;)\r\n  .retrieve()\r\n  .bodyToMono(Response.class)\r\n  .switchIfEmpty(Mono.error(new RuntimeException(&quot;Error response&quot;)));\r\n```","title":"Handle empty response with Spring WebClient in a reactive way","body":"<p>You can use <code>switchIfEmpty</code> operator to handle empty responses and as an option return error</p>\n<pre><code>webClient.get()\n  .uri(&quot;&lt;endpoint&gt;&quot;)\n  .retrieve()\n  .bodyToMono(Response.class)\n  .switchIfEmpty(Mono.error(new RuntimeException(&quot;Error response&quot;)));\n</code></pre>\n"}],"owner":{"account_id":896384,"reputation":163,"user_id":933547,"accept_rate":71,"display_name":"Christof Buechi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020552,"answer_count":1,"score":1,"last_activity_date":1693543255,"creation_date":1693319686,"question_id":77001146,"body_markdown":"Is there a way to react on empty responses in Spring WebClient without checking the http status code? The endpoint from which I get data does return http200 even if an error occurs, which is why I need to check the payload itself. In case of an error it returns empty, in case of success it returns a valid payload which should be mapped into a POJO. \r\n\r\nAs the payload could only consumed once, is a there a way to handle this in a reactive way?","title":"Handle empty response with Spring WebClient in a reactive way","body":"<p>Is there a way to react on empty responses in Spring WebClient without checking the http status code? The endpoint from which I get data does return http200 even if an error occurs, which is why I need to check the payload itself. In case of an error it returns empty, in case of success it returns a valid payload which should be mapped into a POJO.</p>\n<p>As the payload could only consumed once, is a there a way to handle this in a reactive way?</p>\n"},{"tags":["java","android","kotlin","android-developer-api"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693514409,"post_id":77009709,"comment_id":135775221,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":21095103,"reputation":11,"user_id":15506243,"display_name":"Axim Amin"},"score":0,"creation_date":1693542876,"post_id":77009709,"comment_id":135777630,"body_markdown":"code added. please help.;","body":"code added. please help.;"}],"owner":{"account_id":21095103,"reputation":11,"user_id":15506243,"display_name":"Axim Amin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693542855,"creation_date":1693411250,"question_id":77009709,"body_markdown":"I&#39;m currently facing an issue where the overlay layout fails to appear upon launching the system settings app. The intended functionality is reminiscent of an app lock feature: upon tapping the settings app, an overlay layout should activate, requesting a pattern input to initiate the unlocking process. However, I&#39;m unable to achieve this behavior successfully.\r\n\r\nAfter successfully granting permission for the top app overlay. The desired behavior is similar to an app lock functionality, where upon clicking the settings app, an overlay layout should appear asking for a pattern to unlock. \r\n\r\nWhile my overlay layouts work seamlessly in various apps, they don&#39;t seem to function as intended in the system settings app, particularly on Android versions above 10.\r\n\r\n\r\n    private fun CheckOverlayPermission() {\r\n        // Choose a request code\r\n    \r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\r\n            // If the permission is not granted, open the overlay permission settings\r\n            val intent = Intent(\r\n                Settings.ACTION_MANAGE_OVERLAY_PERMISSION,\r\n                Uri.parse(&quot;package:$packageName&quot;)\r\n            )\r\n            startActivityForResult(intent, overlayPermissionCode)\r\n        } else {\r\n            // Permission is already granted or not needed on this version\r\n            // Your overlay logic here\r\n        }\r\n    \r\n    }\r\n    // this function to to check the package name if exist in the \r\n    database and show the overlay layout \r\n    \r\n    private fun onAppForeground(foregroundAppPackage: String) {\r\n    \r\n        hideOverlay()\r\n    \r\n        //UnInstall Application............\r\n    \r\n        //Lock overlay work\r\n        if (lockedAppPackageSet.contains(foregroundAppPackage)) {\r\n            if (appLockerPreferences.getFingerPrintEnabled() || PermissionChecker.checkOverlayPermission(\r\n                    applicationContext\r\n                ).not()\r\n            ) {\r\n                val intent =\r\n                    OverlayValidationActivity.newIntent(applicationContext, foregroundAppPackage)\r\n                if (lastForegroundAppPackage == applicationContext.packageName) {\r\n                    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\r\n                } else {\r\n                    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\r\n                }\r\n    \r\n                startActivity(intent)\r\n    \r\n            } else {\r\n                showOverlay(foregroundAppPackage)\r\n            }\r\n        }\r\n        lastForegroundAppPackage = foregroundAppPackage\r\n    }\r\n    \r\n    // show overlay layout \r\n    \r\n    private fun showOverlay(lockedAppPackageName: String) {\r\n        if (isOverlayShowing.not()) {\r\n            isOverlayShowing = true\r\n            overlayView.setHiddenDrawingMode(appLockerPreferences.getHiddenDrawingMode())\r\n            overlayView.setAppPackageName(lockedAppPackageName)\r\n            windowManager.addView(overlayView, overlayParams);\r\n        }\r\n    }\r\n    \r\n    // forground observer to checks the locked apps\r\n    \r\n    \r\n    //         for above 10 or 11\r\n    \r\n        private fun getForegroundObservableaboveQ(): Flowable&lt;String&gt;? {\r\n            return Flowable.interval(0, TimeUnit.MILLISECONDS)\r\n                .filter { PermissionChecker.checkUsageAccessPermission(context) }\r\n                .map {\r\n                    val mUsageStatsManager =\r\n                        context.getSystemService(Service.USAGE_STATS_SERVICE) as UsageStatsManager\r\n                    val time = System.currentTimeMillis()\r\n    \r\n                    val usageEvents =\r\n                        mUsageStatsManager.queryUsageStats(INTERVAL_DAILY, time - 10000, time)\r\n                    val sortedUsageEvents = usageEvents.sortedBy { it.lastTimeUsed }\r\n                    val usageEvent = sortedUsageEvents.lastOrNull()\r\n    \r\n                    UsageEventWrapper(usageEvent)\r\n                }\r\n                .filter { it.usageEvent != null }\r\n                .map { it.usageEvent }\r\n                .filter { it.packageName != null }\r\n                .map { it.packageName }\r\n                .distinctUntilChanged()\r\n        }\r\n    \r\n    // overlay layouts params\r\n    \r\n    \r\n    object OverlayViewLayoutParams {\r\n    \r\n        fun get(): WindowManager.LayoutParams {\r\n            val layoutFlag: Int = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY\r\n            } else {\r\n                WindowManager.LayoutParams.TYPE_PHONE\r\n            }\r\n    \r\n    \r\n            return WindowManager.LayoutParams(\r\n                    WindowManager.LayoutParams.MATCH_PARENT,\r\n                    WindowManager.LayoutParams.MATCH_PARENT,\r\n                    layoutFlag,\r\n                    WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH or\r\n                            WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN or\r\n                            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL or\r\n    \r\n                            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\r\n                    PixelFormat.TRANSLUCENT\r\n                )\r\n        }\r\n    } \r\n\r\n","title":"why overlay layout does not work on the system settings app?","body":"<p>I'm currently facing an issue where the overlay layout fails to appear upon launching the system settings app. The intended functionality is reminiscent of an app lock feature: upon tapping the settings app, an overlay layout should activate, requesting a pattern input to initiate the unlocking process. However, I'm unable to achieve this behavior successfully.</p>\n<p>After successfully granting permission for the top app overlay. The desired behavior is similar to an app lock functionality, where upon clicking the settings app, an overlay layout should appear asking for a pattern to unlock.</p>\n<p>While my overlay layouts work seamlessly in various apps, they don't seem to function as intended in the system settings app, particularly on Android versions above 10.</p>\n<pre><code>private fun CheckOverlayPermission() {\n    // Choose a request code\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\n        // If the permission is not granted, open the overlay permission settings\n        val intent = Intent(\n            Settings.ACTION_MANAGE_OVERLAY_PERMISSION,\n            Uri.parse(&quot;package:$packageName&quot;)\n        )\n        startActivityForResult(intent, overlayPermissionCode)\n    } else {\n        // Permission is already granted or not needed on this version\n        // Your overlay logic here\n    }\n\n}\n// this function to to check the package name if exist in the \ndatabase and show the overlay layout \n\nprivate fun onAppForeground(foregroundAppPackage: String) {\n\n    hideOverlay()\n\n    //UnInstall Application............\n\n    //Lock overlay work\n    if (lockedAppPackageSet.contains(foregroundAppPackage)) {\n        if (appLockerPreferences.getFingerPrintEnabled() || PermissionChecker.checkOverlayPermission(\n                applicationContext\n            ).not()\n        ) {\n            val intent =\n                OverlayValidationActivity.newIntent(applicationContext, foregroundAppPackage)\n            if (lastForegroundAppPackage == applicationContext.packageName) {\n                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\n            } else {\n                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n            }\n\n            startActivity(intent)\n\n        } else {\n            showOverlay(foregroundAppPackage)\n        }\n    }\n    lastForegroundAppPackage = foregroundAppPackage\n}\n\n// show overlay layout \n\nprivate fun showOverlay(lockedAppPackageName: String) {\n    if (isOverlayShowing.not()) {\n        isOverlayShowing = true\n        overlayView.setHiddenDrawingMode(appLockerPreferences.getHiddenDrawingMode())\n        overlayView.setAppPackageName(lockedAppPackageName)\n        windowManager.addView(overlayView, overlayParams);\n    }\n}\n\n// forground observer to checks the locked apps\n\n\n//         for above 10 or 11\n\n    private fun getForegroundObservableaboveQ(): Flowable&lt;String&gt;? {\n        return Flowable.interval(0, TimeUnit.MILLISECONDS)\n            .filter { PermissionChecker.checkUsageAccessPermission(context) }\n            .map {\n                val mUsageStatsManager =\n                    context.getSystemService(Service.USAGE_STATS_SERVICE) as UsageStatsManager\n                val time = System.currentTimeMillis()\n\n                val usageEvents =\n                    mUsageStatsManager.queryUsageStats(INTERVAL_DAILY, time - 10000, time)\n                val sortedUsageEvents = usageEvents.sortedBy { it.lastTimeUsed }\n                val usageEvent = sortedUsageEvents.lastOrNull()\n\n                UsageEventWrapper(usageEvent)\n            }\n            .filter { it.usageEvent != null }\n            .map { it.usageEvent }\n            .filter { it.packageName != null }\n            .map { it.packageName }\n            .distinctUntilChanged()\n    }\n\n// overlay layouts params\n\n\nobject OverlayViewLayoutParams {\n\n    fun get(): WindowManager.LayoutParams {\n        val layoutFlag: Int = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY\n        } else {\n            WindowManager.LayoutParams.TYPE_PHONE\n        }\n\n\n        return WindowManager.LayoutParams(\n                WindowManager.LayoutParams.MATCH_PARENT,\n                WindowManager.LayoutParams.MATCH_PARENT,\n                layoutFlag,\n                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH or\n                        WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN or\n                        WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL or\n\n                        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\n                PixelFormat.TRANSLUCENT\n            )\n    }\n} \n</code></pre>\n"},{"tags":["java","xpath","pmd"],"answers":[{"tags":[],"owner":{"account_id":27243397,"reputation":1316,"user_id":20769158,"display_name":"scrhartley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693349761,"creation_date":1693349127,"answer_id":77004012,"question_id":76974522,"body_markdown":"I don&#39;t know anything about PMD and didn&#39;t succeed in getting it set up, so here&#39;s a guess based upon my XPath experience:\r\n```xpath\r\n//Name[@Image=&#39;System&#39;]/Name[@Image=&#39;out&#39;]/Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\nAt any point in the tree,  \r\n  look for a Name element with an Image attribute of &quot;System&quot;,  \r\n  find its Name child element with an Image attribute of &quot;out&quot;,  \r\n  find its Name child element with an Image attribute of &quot;println&quot;,\r\n  and it also has a predicate for not having an IfStatement ancestor.\r\n\r\nXPath refresher: https://www.w3schools.com/xml/xpath_syntax.asp","title":"Xpath expression not working to identify print statements in java code using eclipse-PMD","body":"<p>I don't know anything about PMD and didn't succeed in getting it set up, so here's a guess based upon my XPath experience:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>//Name[@Image='System']/Name[@Image='out']/Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<p>At any point in the tree,<br />\nlook for a Name element with an Image attribute of &quot;System&quot;,<br />\nfind its Name child element with an Image attribute of &quot;out&quot;,<br />\nfind its Name child element with an Image attribute of &quot;println&quot;,\nand it also has a predicate for not having an IfStatement ancestor.</p>\n<p>XPath refresher: <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/xml/xpath_syntax.asp</a></p>\n"},{"tags":[],"owner":{"account_id":22162173,"reputation":186,"user_id":16408987,"display_name":"DeLorean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693542236,"creation_date":1693542236,"answer_id":77020493,"question_id":76974522,"body_markdown":"After 3 days of beating my head, I finally figured it out. I&#39;m not too fond of the documentation of the PMD\r\n\r\nanyways here is the solution\r\n```\r\n//MethodCall[ starts-with(@MethodName, &#39;print&#39;) ]\r\n  /FieldAccess[ @Name = (&#39;err&#39;, &#39;out&#39;) ]\r\n  /TypeExpression[ pmd-java:typeIsExactly(&#39;java.lang.System&#39;) ]\r\n  [not(ancestor::IfStatement[VariableAccess[@Name = &#39;verbose&#39;]])]\r\n```\r\n\r\nThis expression is used to select the print statements in Java code that are not inside an if statement whose condition is not verbose. Let me break it down for you:\r\n\r\n - `//MethodCall[ starts-with(@MethodName, &#39;print&#39;) ]` : This part selects all the method calls that start with the word print, such as println, printf, or printStackTrace.\r\n\r\n- `/FieldAccess[ @Name = (&#39;err&#39;, &#39;out&#39;) ]` : This part selects the field accesses that have the name err or out, such as System.err or System.out.\r\n\r\n- `/TypeExpression[ pmd-java:typeIsExactly(&#39;java.lang.System&#39;) ]` : This part selects the type expressions that are exactly the java.lang.System class, such as System or (System).\r\n\r\n- `[not(ancestor::IfStatement[VariableAccess[@Name != &#39;verbose&#39;]])]` : This part filters out the nodes that have an ancestor (parent, grandparent, etc.) that is an if statement whose condition is a variable access with a name that is not verbose, such as if (DEBUG) or if (flag).","title":"Xpath expression not working to identify print statements in java code using eclipse-PMD","body":"<p>After 3 days of beating my head, I finally figured it out. I'm not too fond of the documentation of the PMD</p>\n<p>anyways here is the solution</p>\n<pre><code>//MethodCall[ starts-with(@MethodName, 'print') ]\n  /FieldAccess[ @Name = ('err', 'out') ]\n  /TypeExpression[ pmd-java:typeIsExactly('java.lang.System') ]\n  [not(ancestor::IfStatement[VariableAccess[@Name = 'verbose']])]\n</code></pre>\n<p>This expression is used to select the print statements in Java code that are not inside an if statement whose condition is not verbose. Let me break it down for you:</p>\n<ul>\n<li><p><code>//MethodCall[ starts-with(@MethodName, 'print') ]</code> : This part selects all the method calls that start with the word print, such as println, printf, or printStackTrace.</p>\n</li>\n<li><p><code>/FieldAccess[ @Name = ('err', 'out') ]</code> : This part selects the field accesses that have the name err or out, such as System.err or System.out.</p>\n</li>\n<li><p><code>/TypeExpression[ pmd-java:typeIsExactly('java.lang.System') ]</code> : This part selects the type expressions that are exactly the java.lang.System class, such as System or (System).</p>\n</li>\n<li><p><code>[not(ancestor::IfStatement[VariableAccess[@Name != 'verbose']])]</code> : This part filters out the nodes that have an ancestor (parent, grandparent, etc.) that is an if statement whose condition is a variable access with a name that is not verbose, such as if (DEBUG) or if (flag).</p>\n</li>\n</ul>\n"}],"owner":{"account_id":22162173,"reputation":186,"user_id":16408987,"display_name":"DeLorean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77020493,"answer_count":2,"score":2,"last_activity_date":1693542236,"creation_date":1692942222,"question_id":76974522,"body_markdown":"I want to identify print statements that are not inside the conditional statements (i.e., to check if the print statement has any if statement as its ancestor)\r\n\r\nfew test cases are as follows :\r\n\r\n* Identify all the print statements in the snippet below\r\n\r\n```\r\nint x = 5;\r\nint y = 10;\r\nSystem.out.println(&quot;The value of x is &quot; + x);\r\nSystem.out.println(&quot;The value of y is &quot; + y);\r\n```\r\n\r\n\r\n* Ignore the first print statement and identify the second print statement as the second print statement is not inside an if statement.\r\n```\r\nif (x &gt; 10) {\r\n    System.out.println(&quot;x is greater than 10&quot;);\r\n}\r\nSystem.out.println(&quot;This is the end of the program&quot;);\r\n\r\n```\r\n\r\n\r\nI have tried the below Xpath expressions but have had no luck could anyone help me out with it?\r\n\r\n * Expression 1\r\n```\r\n//Name[@Image=&#39;System&#39;]/following-sibling::Name[@Image=&#39;out&#39;]/following-sibling::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 2\r\n```\r\n//Name[@Image=&#39;System&#39;]/descendant-or-self::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 3\r\n```\r\n//Name[@Image=&#39;System&#39;]/child::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 4\r\n```\r\n//attribute::Image[.=&#39;System&#39;]/parent::Name/following-sibling::Name[attribute::Image=&#39;out&#39;]/following-sibling::Name[attribute::Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 5\r\n```\r\n//Name[@Image=&#39;System&#39;]/preceding-sibling::Name[@Image=&#39;out&#39;]/preceding-sibling::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\nPlease note I am using PMD rule designer from PMD to test the XPath expressions.\r\n\r\nThanks in advance.\r\n\r\n","title":"Xpath expression not working to identify print statements in java code using eclipse-PMD","body":"<p>I want to identify print statements that are not inside the conditional statements (i.e., to check if the print statement has any if statement as its ancestor)</p>\n<p>few test cases are as follows :</p>\n<ul>\n<li>Identify all the print statements in the snippet below</li>\n</ul>\n<pre><code>int x = 5;\nint y = 10;\nSystem.out.println(&quot;The value of x is &quot; + x);\nSystem.out.println(&quot;The value of y is &quot; + y);\n</code></pre>\n<ul>\n<li>Ignore the first print statement and identify the second print statement as the second print statement is not inside an if statement.</li>\n</ul>\n<pre><code>if (x &gt; 10) {\n    System.out.println(&quot;x is greater than 10&quot;);\n}\nSystem.out.println(&quot;This is the end of the program&quot;);\n\n</code></pre>\n<p>I have tried the below Xpath expressions but have had no luck could anyone help me out with it?</p>\n<ul>\n<li>Expression 1</li>\n</ul>\n<pre><code>//Name[@Image='System']/following-sibling::Name[@Image='out']/following-sibling::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 2</li>\n</ul>\n<pre><code>//Name[@Image='System']/descendant-or-self::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 3</li>\n</ul>\n<pre><code>//Name[@Image='System']/child::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 4</li>\n</ul>\n<pre><code>//attribute::Image[.='System']/parent::Name/following-sibling::Name[attribute::Image='out']/following-sibling::Name[attribute::Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 5</li>\n</ul>\n<pre><code>//Name[@Image='System']/preceding-sibling::Name[@Image='out']/preceding-sibling::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<p>Please note I am using PMD rule designer from PMD to test the XPath expressions.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","jenkins","maven-surefire-plugin"],"comments":[{"owner":{"account_id":4872208,"reputation":1786,"user_id":3928295,"accept_rate":80,"display_name":"Manmohan_singh"},"score":0,"creation_date":1575546328,"post_id":59194387,"comment_id":104607208,"body_markdown":"add more [Error] logs please.","body":"add more [Error] logs please."}],"answers":[{"tags":[],"owner":{"account_id":3277032,"reputation":1073,"user_id":2758738,"display_name":"tibor17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577482479,"creation_date":1577482479,"answer_id":59506242,"question_id":59194387,"body_markdown":"@Nivi\r\nFirst of all, the rule is not to read all what the people write on the Google because they also write bad pages. The right thing is to read the original tutorial from the Apache Maven.\r\n\r\nCan you read this documentation properly and see all occurences of the word **&quot;suiteXmlFiles&quot;** on the page https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html that these configuration parameters, you have used in your POM, should not be combined.\r\n\r\nNext that you use absolute paths completely breaks all what the Maven is about. Your file **Learning_Suite.xml** should be a realtive path to module&#39;s base dir. Therefore it is a resource file and the configuration looks like this `&lt;file&gt;src/test/resources/suite.xml&lt;/file&gt;` in the documentation:\r\nhttps://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html\r\n\r\nAdditionally, the version **&lt;java.version&gt;1.8.0_222&lt;/java.version&gt;** is something what nobody should use. This is enough and transparent for every POM:\r\n\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;","title":"Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test)","body":"<p>@Nivi\nFirst of all, the rule is not to read all what the people write on the Google because they also write bad pages. The right thing is to read the original tutorial from the Apache Maven.</p>\n\n<p>Can you read this documentation properly and see all occurences of the word <strong>\"suiteXmlFiles\"</strong> on the page <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html</a> that these configuration parameters, you have used in your POM, should not be combined.</p>\n\n<p>Next that you use absolute paths completely breaks all what the Maven is about. Your file <strong>Learning_Suite.xml</strong> should be a realtive path to module's base dir. Therefore it is a resource file and the configuration looks like this <code>&lt;file&gt;src/test/resources/suite.xml&lt;/file&gt;</code> in the documentation:\n<a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html</a></p>\n\n<p>Additionally, the version <strong>1.8.0_222</strong> is something what nobody should use. This is enough and transparent for every POM:</p>\n\n<pre><code>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13133212,"reputation":1,"user_id":9487115,"display_name":"Gabri EL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585897375,"creation_date":1585895340,"answer_id":61006202,"question_id":59194387,"body_markdown":"    &lt;suiteXmlFile&gt;src/test/resources/${suiteXmlFile}.xml&lt;/suiteXmlFile&gt;\r\n\r\nAny name will have the XML file, the tests will run","title":"Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test)","body":"<pre><code>&lt;suiteXmlFile&gt;src/test/resources/${suiteXmlFile}.xml&lt;/suiteXmlFile&gt;\n</code></pre>\n\n<p>Any name will have the XML file, the tests will run</p>\n"}],"owner":{"account_id":7170593,"reputation":1,"user_id":5478188,"display_name":"Nivi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8670,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693541255,"creation_date":1575546160,"question_id":59194387,"body_markdown":"I am facing this issue with maven-surefire-plugin 3.0.0-M4 and Maven versions 3.6.3, 3.6.0 and 3.3.9 with jdk1.8.0_222 (Ubuntu 18.0.4). My pom.xml is as follows:\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\t    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t  &lt;groupId&gt;Expertus&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;Expertus&lt;/artifactId&gt;\r\n\t  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t  &lt;name&gt;ExpertusONE_4.5&lt;/name&gt;\r\n\t  &lt;description&gt;ExpertusONE_4.5&lt;/description&gt;\r\n\t  &lt;dependencies&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t      &lt;version&gt;3.141.59&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t      &lt;version&gt;7.0.0&lt;/version&gt;\r\n\t      &lt;scope&gt;test&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t      &lt;version&gt;1.2.17&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.1.1&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.1.1&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n\t      &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n\t      &lt;scope&gt;test&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t  &lt;/dependencies&gt;\r\n\t  &lt;packaging&gt;war&lt;/packaging&gt;\r\n\t  &lt;build&gt;\r\n\t    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n\t    &lt;resources&gt;\r\n\t      &lt;resource&gt;\r\n\t        &lt;directory&gt;src&lt;/directory&gt;\r\n\t      &lt;/resource&gt;\r\n\t    &lt;/resources&gt;\r\n\t    &lt;plugins&gt;\r\n\t      &lt;plugin&gt;\r\n\t        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t        &lt;version&gt;3.8.0&lt;/version&gt;\r\n\t        &lt;configuration&gt;\r\n\t          &lt;source&gt;1.8&lt;/source&gt;\r\n\t          &lt;target&gt;1.8&lt;/target&gt;\r\n\t        &lt;/configuration&gt;\r\n\t      &lt;/plugin&gt;\r\n\t      &lt;plugin&gt;\r\n\t        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t        &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n\t        &lt;configuration&gt;\r\n\t          &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\r\n\t          &lt;includes&gt;\r\n\t            &lt;include&gt;CreateOrganization.java&lt;/include&gt;\r\n\t          &lt;/includes&gt;\r\n\t          &lt;suiteXmlFiles&gt;\r\n\t            &lt;suiteXmlFile&gt;/home/nivedab/Desktop/LocalCode/ExpertusONE_4.5/Learning_Suite.xml&lt;/suiteXmlFile&gt;\r\n\t          &lt;/suiteXmlFiles&gt;\r\n\t        &lt;/configuration&gt;\r\n\t      &lt;/plugin&gt;\r\n\t    &lt;/plugins&gt;\r\n\t  &lt;/build&gt;\r\n\t  &lt;properties&gt;\r\n\t    &lt;java.version&gt;1.8.0_222&lt;/java.version&gt;\r\n\t    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t  &lt;/properties&gt;\r\n\t&lt;/project&gt;\r\n\r\nJenkins output is as follows:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test\r\n      (default-test) on project Expertus: There are test failures.","title":"Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test)","body":"<p>I am facing this issue with maven-surefire-plugin 3.0.0-M4 and Maven versions 3.6.3, 3.6.0 and 3.3.9 with jdk1.8.0_222 (Ubuntu 18.0.4). My pom.xml is as follows:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;Expertus&lt;/groupId&gt;\n  &lt;artifactId&gt;Expertus&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;ExpertusONE_4.5&lt;/name&gt;\n  &lt;description&gt;ExpertusONE_4.5&lt;/description&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;3.141.59&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\n      &lt;version&gt;7.0.0&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n      &lt;version&gt;1.2.17&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n      &lt;artifactId&gt;poi&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n      &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0-M4&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;directory&gt;src&lt;/directory&gt;\n      &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M4&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n          &lt;includes&gt;\n            &lt;include&gt;CreateOrganization.java&lt;/include&gt;\n          &lt;/includes&gt;\n          &lt;suiteXmlFiles&gt;\n            &lt;suiteXmlFile&gt;/home/nivedab/Desktop/LocalCode/ExpertusONE_4.5/Learning_Suite.xml&lt;/suiteXmlFile&gt;\n          &lt;/suiteXmlFiles&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;properties&gt;\n    &lt;java.version&gt;1.8.0_222&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Jenkins output is as follows:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test\n  (default-test) on project Expertus: There are test failures.\n</code></pre>\n"},{"tags":["java","fonts","pdfbox"],"answers":[{"tags":[],"owner":{"account_id":15306923,"reputation":35,"user_id":11043320,"display_name":"A. O&#39;Mary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634672749,"creation_date":1634672749,"answer_id":69636858,"question_id":69635887,"body_markdown":"I removed version 3.0.0-alpha2 and added 2.0.24 and was able to pick the font. 3.0.0-alpha2 was not working for me.","title":"HELVETICA cannot be resolved or is not a field","body":"<p>I removed version 3.0.0-alpha2 and added 2.0.24 and was able to pick the font. 3.0.0-alpha2 was not working for me.</p>\n"},{"tags":[],"owner":{"account_id":25824501,"reputation":71,"user_id":19562950,"display_name":"HS Nain."},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1693540878,"creation_date":1693540878,"answer_id":77020431,"question_id":69635887,"body_markdown":"Use this line of code instead.\r\n\r\n     contentStream.setFont(new PDType1Font(Standard14Fonts.FontName.HELVETICA), 14);\r\n\r\n","title":"HELVETICA cannot be resolved or is not a field","body":"<p>Use this line of code instead.</p>\n<pre><code> contentStream.setFont(new PDType1Font(Standard14Fonts.FontName.HELVETICA), 14);\n</code></pre>\n"}],"owner":{"account_id":15306923,"reputation":35,"user_id":11043320,"display_name":"A. O&#39;Mary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2428,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693540878,"creation_date":1634667441,"question_id":69635887,"body_markdown":"I am following a tutorial online. I am working with PDFBox with Eclipse and am having issues with loading the font that is suppose to be in the libraries. I&#39;ve loaded all 9 jars into my external libraries and the different fonts give me the same &quot;cannot be resolved or is not a field&quot;.\r\n```\r\nimport java.io.IOException;  \r\nimport org.apache.pdfbox.pdmodel.*;\r\nimport org.apache.pdfbox.pdmodel.font.PDType1Font;\r\nimport org.apache.pdfbox.pdmodel.font.PDFont;\r\n\r\npublic class PCSRR {\r\n\t\r\n\tpublic static void main(String[] args)throws IOException {\r\n\t     PDDocument doc = new PDDocument();   \r\n\t     PDPage blankPage = new PDPage();  \r\n\t\t doc.addPage( blankPage );  \r\n\t\t \r\n\t\t PDPage page = doc.getPage(1);  \r\n         PDPageContentStream contentStream = new PDPageContentStream(doc, page);  \r\n         \r\n         //Begin the Content stream   \r\n         contentStream.beginText();   \r\n         contentStream.setFont(PDType1Font.HELVETICA , 14);\r\n         contentStream.newLineAtOffset(20, 450);  \r\n         \tString text = &quot;Hi!!! This is the first sample PDF document.&quot;;  \r\n         contentStream.showText(text);        \r\n         contentStream.endText();  \r\n         \tSystem.out.println(&quot;New Text Content is added in the PDF Document.&quot;);  \r\n         contentStream.close();  \r\n         \r\n         doc.save(&quot;C:\\\\Users\\\\Aaron\\\\Desktop\\\\pdfbox\\\\practice.pdf&quot;);  \r\n\t\t\tSystem.out.println(&quot;PDF created&quot;); \r\n\t\t doc.close();  \r\n\t}\r\n}\r\n```\r\n[![External Jars][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xENq3.png","title":"HELVETICA cannot be resolved or is not a field","body":"<p>I am following a tutorial online. I am working with PDFBox with Eclipse and am having issues with loading the font that is suppose to be in the libraries. I've loaded all 9 jars into my external libraries and the different fonts give me the same &quot;cannot be resolved or is not a field&quot;.</p>\n<pre><code>import java.io.IOException;  \nimport org.apache.pdfbox.pdmodel.*;\nimport org.apache.pdfbox.pdmodel.font.PDType1Font;\nimport org.apache.pdfbox.pdmodel.font.PDFont;\n\npublic class PCSRR {\n    \n    public static void main(String[] args)throws IOException {\n         PDDocument doc = new PDDocument();   \n         PDPage blankPage = new PDPage();  \n         doc.addPage( blankPage );  \n         \n         PDPage page = doc.getPage(1);  \n         PDPageContentStream contentStream = new PDPageContentStream(doc, page);  \n         \n         //Begin the Content stream   \n         contentStream.beginText();   \n         contentStream.setFont(PDType1Font.HELVETICA , 14);\n         contentStream.newLineAtOffset(20, 450);  \n            String text = &quot;Hi!!! This is the first sample PDF document.&quot;;  \n         contentStream.showText(text);        \n         contentStream.endText();  \n            System.out.println(&quot;New Text Content is added in the PDF Document.&quot;);  \n         contentStream.close();  \n         \n         doc.save(&quot;C:\\\\Users\\\\Aaron\\\\Desktop\\\\pdfbox\\\\practice.pdf&quot;);  \n            System.out.println(&quot;PDF created&quot;); \n         doc.close();  \n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xENq3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xENq3.png\" alt=\"External Jars\" /></a></p>\n"},{"tags":["java","lombok","non-nullable","java-annotations","nullaway"],"comments":[{"owner":{"account_id":1880443,"reputation":11,"user_id":1700773,"display_name":"user1700773"},"score":0,"creation_date":1693524337,"post_id":77019739,"comment_id":135776430,"body_markdown":"From the docs: &quot;@RequiredArgsConstructor generates a constructor with 1 parameter for each field that requires special handling. All non-initialized final fields get a parameter, as well as any fields that are marked as @NonNull that aren&#39;t initialized where they are declared.&quot;\n\nEssentially what I&#39;d like to do is change what it means to &quot;require special handling&quot;.\n\nhttps://projectlombok.org/features/constructor","body":"From the docs: &quot;@RequiredArgsConstructor generates a constructor with 1 parameter for each field that requires special handling. All non-initialized final fields get a parameter, as well as any fields that are marked as @NonNull that aren&#39;t initialized where they are declared.&quot;  Essentially what I&#39;d like to do is change what it means to &quot;require special handling&quot;.  <a href=\"https://projectlombok.org/features/constructor\" rel=\"nofollow noreferrer\">projectlombok.org/features/constructor</a>"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693531025,"post_id":77019739,"comment_id":135776889,"body_markdown":"Did you read [this section](https://github.com/uber/NullAway#lombok) of the NullAway readme?","body":"Did you read <a href=\"https://github.com/uber/NullAway#lombok\" rel=\"nofollow noreferrer\">this section</a> of the NullAway readme?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693540603,"creation_date":1693540603,"answer_id":77020418,"question_id":77019739,"body_markdown":"Make a text file and name it `lombok.config`. Inside, stick some lines of text. See [the documentation](https://projectlombok.org/features/configuration#addNullAnnotations) of the feature. You can tell lombok about your nullable annotations. You can also tell it to add `@Generated` annotations which [NullAway understands](https://github.com/uber/NullAway#lombok) - thanks to @Sweeper who linked to that section of the NullAway docs in the comments.\r\n\r\nlombok.config can be in a package, or any parent directory of it; even `/` / `C:\\` though that&#39;d perhaps be a bit weird. Generally you&#39;d put this either in `projectroot` or `projectroot/src`.","title":"How to use Lombok&#39;s RequiredArgsConstructor with Nullaway?","body":"<p>Make a text file and name it <code>lombok.config</code>. Inside, stick some lines of text. See <a href=\"https://projectlombok.org/features/configuration#addNullAnnotations\" rel=\"nofollow noreferrer\">the documentation</a> of the feature. You can tell lombok about your nullable annotations. You can also tell it to add <code>@Generated</code> annotations which <a href=\"https://github.com/uber/NullAway#lombok\" rel=\"nofollow noreferrer\">NullAway understands</a> - thanks to @Sweeper who linked to that section of the NullAway docs in the comments.</p>\n<p>lombok.config can be in a package, or any parent directory of it; even <code>/</code> / <code>C:\\</code> though that'd perhaps be a bit weird. Generally you'd put this either in <code>projectroot</code> or <code>projectroot/src</code>.</p>\n"}],"owner":{"account_id":1880443,"reputation":11,"user_id":1700773,"display_name":"user1700773"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693540603,"creation_date":1693523724,"question_id":77019739,"body_markdown":"We&#39;re trying to add &quot;Nullaway&quot; (https://github.com/uber/NullAway) to our repo. This is a tool that assumes everything not annotated with @Nullable can&#39;t be null and enforces it in compile time. \r\n\r\nWe also use Lombok, with focus on @Data. Lombok decides which fields to add to the RequiredArgsConstructor based on a @NonNull annotation. Furthermore, Nullaway requires that all constructurs set a value to all the fields not marked as @Nullable.\r\n\r\nOur issue is - we don&#39;t wish to annotate all fields (both with @Nonnull and @Nullable), as it&#39;s redundant. We&#39;d like to have one of them be a &quot;default&quot; (preferably the @Nonnull option).\r\n\r\nHow can we solve this? An ideal solution would be to configure the RequiredArgsConstructor to treat any field not marked as @Nullable as required, but that option doesn&#39;t exist. We&#39;re open to any and all creative ideas.\r\n\r\nI tried looking for such a configuration in Lombok, which doesn&#39;t exist. I also tried annotating at the class level to no avail.","title":"How to use Lombok&#39;s RequiredArgsConstructor with Nullaway?","body":"<p>We're trying to add &quot;Nullaway&quot; (<a href=\"https://github.com/uber/NullAway\" rel=\"nofollow noreferrer\">https://github.com/uber/NullAway</a>) to our repo. This is a tool that assumes everything not annotated with @Nullable can't be null and enforces it in compile time.</p>\n<p>We also use Lombok, with focus on @Data. Lombok decides which fields to add to the RequiredArgsConstructor based on a @NonNull annotation. Furthermore, Nullaway requires that all constructurs set a value to all the fields not marked as @Nullable.</p>\n<p>Our issue is - we don't wish to annotate all fields (both with @Nonnull and @Nullable), as it's redundant. We'd like to have one of them be a &quot;default&quot; (preferably the @Nonnull option).</p>\n<p>How can we solve this? An ideal solution would be to configure the RequiredArgsConstructor to treat any field not marked as @Nullable as required, but that option doesn't exist. We're open to any and all creative ideas.</p>\n<p>I tried looking for such a configuration in Lombok, which doesn't exist. I also tried annotating at the class level to no avail.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9784,"page":208,"page_size":100}
