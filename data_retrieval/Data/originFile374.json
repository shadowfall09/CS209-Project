{"items":[{"tags":["java","spring-boot","jakarta-ee"],"owner":{"account_id":19534758,"reputation":31,"user_id":14293770,"display_name":"rwd762"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686666248,"creation_date":1686053118,"question_id":76414454,"body_markdown":"Im very new to JEE and monolithic applications.\r\nI&#39;m facing an architectural/concept problem while migrating a Java EE service to a Rest Spring Boot service. The Java EE service is part of a large monolithic business logic module.\r\nThe Goal is to incrementally migrate everything to spring boot, starting with my service.\r\n\r\nCurrently the rough scheme looks like this:\r\n 1. The function handling the logic of the service is invoked from yet another service. Lets say Service A invokes a function foo(param)  from service B\r\n 2. The Service B then stores the param in a csv and additionally returns the file using new File(name) \r\n\r\nAll of that is part of a batchProcess that is used for fileExports.\r\n\r\nMy current idea looks as follows:\r\n1. In class A replace the invokation of B.foo(param) with a REST call. maybe not directly but through some service that implements a method to call the endpoint.\r\n2. I would have my new Spring Service as a module to the current monolith. It would have regular endpoints to receive that param throug a POST call. Afterwards I would simply store it in a csv\r\n\r\nThats it.\r\n\r\nMy question for developing a high level concept of how to implement that would be:\r\n 1. Is the current JEE class A, that invokes the method of service class B a good place to add a call to a REST endpoint?\r\nMy idea behind this is: Since I want to replace the rgular invokation of B.foo(param), I would rather make a  POST call to the REST endpoint, pass the param, and the Spring Boot services takes it and puts it in csv\r\n 2. What about dependencies? my current service class B has a couple of dependencies injected through @Inject. Is there anything apart from replacing @Inject with @Autowire, that I need to take care of?\r\n\r\n\r\n\r\nWhat are your thoughts on this?","title":"Migrate Java EE service to Spring Boot Rest service","body":"<p>Im very new to JEE and monolithic applications.\nI'm facing an architectural/concept problem while migrating a Java EE service to a Rest Spring Boot service. The Java EE service is part of a large monolithic business logic module.\nThe Goal is to incrementally migrate everything to spring boot, starting with my service.</p>\n<p>Currently the rough scheme looks like this:</p>\n<ol>\n<li>The function handling the logic of the service is invoked from yet another service. Lets say Service A invokes a function foo(param)  from service B</li>\n<li>The Service B then stores the param in a csv and additionally returns the file using new File(name)</li>\n</ol>\n<p>All of that is part of a batchProcess that is used for fileExports.</p>\n<p>My current idea looks as follows:</p>\n<ol>\n<li>In class A replace the invokation of B.foo(param) with a REST call. maybe not directly but through some service that implements a method to call the endpoint.</li>\n<li>I would have my new Spring Service as a module to the current monolith. It would have regular endpoints to receive that param throug a POST call. Afterwards I would simply store it in a csv</li>\n</ol>\n<p>Thats it.</p>\n<p>My question for developing a high level concept of how to implement that would be:</p>\n<ol>\n<li>Is the current JEE class A, that invokes the method of service class B a good place to add a call to a REST endpoint?\nMy idea behind this is: Since I want to replace the rgular invokation of B.foo(param), I would rather make a  POST call to the REST endpoint, pass the param, and the Spring Boot services takes it and puts it in csv</li>\n<li>What about dependencies? my current service class B has a couple of dependencies injected through @Inject. Is there anything apart from replacing @Inject with @Autowire, that I need to take care of?</li>\n</ol>\n<p>What are your thoughts on this?</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686654948,"post_id":76464142,"comment_id":134825782,"body_markdown":"OT, but what is a &quot;sellar&quot;?","body":"OT, but what is a &quot;sellar&quot;?"},{"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"score":0,"creation_date":1686655233,"post_id":76464142,"comment_id":134825860,"body_markdown":"Sellars is a table having the city id. and city is having child zipcodes. city&#39;s parent is state -&gt; country @g00se","body":"Sellars is a table having the city id. and city is having child zipcodes. city&#39;s parent is state -&gt; country @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686656784,"post_id":76464142,"comment_id":134826230,"body_markdown":"Do you mean &#39;seller&#39;?","body":"Do you mean &#39;seller&#39;?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686658954,"post_id":76464142,"comment_id":134826707,"body_markdown":"The fields are `@Transient` thus they are ignored, regardless of the fact if they are in the result or not. Create a DTO and map the result to that instead of your entity.","body":"The fields are <code>@Transient</code> thus they are ignored, regardless of the fact if they are in the result or not. Create a DTO and map the result to that instead of your entity."},{"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"score":0,"creation_date":1686678813,"post_id":76464142,"comment_id":134831381,"body_markdown":"@M.Deinum I have created the DTO class. still it is null as sellars don&#39;t have those country,state fields. I have added those country ,state, city in DTO class","body":"@M.Deinum I have created the DTO class. still it is null as sellars don&#39;t have those country,state fields. I have added those country ,state, city in DTO class"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686678887,"post_id":76464142,"comment_id":134831400,"body_markdown":"You need to put the DTO in the query and let JPA create it, you shouldn&#39;t use the entity to map to a dto.","body":"You need to put the DTO in the query and let JPA create it, you shouldn&#39;t use the entity to map to a dto."},{"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"score":0,"creation_date":1686679464,"post_id":76464142,"comment_id":134831489,"body_markdown":"@M.Deinum let me give a try","body":"@M.Deinum let me give a try"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686662716,"creation_date":1686662716,"answer_id":76465449,"question_id":76464142,"body_markdown":"As your attributes are annotated with `@Transient` they will not be handled by Hibernate and are therefore null","title":"Data coming Null even when join query is having values in Spring Boot","body":"<p>As your attributes are annotated with <code>@Transient</code> they will not be handled by Hibernate and are therefore null</p>\n"},{"tags":[],"owner":{"account_id":28780885,"reputation":11,"user_id":22042536,"display_name":"parad0X"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686665974,"creation_date":1686665919,"answer_id":76465905,"question_id":76464142,"body_markdown":"```@Transient``` annotation is used to mark a field to be transient for the mapping framework, which means the field marked with ```@Transient``` is ignored by mapping framework and the field not mapped to any database column (in RDBMS) or Document property (in NOSQL). Thus the property will not be persisted to data store.\r\n\r\nSource: https://javabydeveloper.com/using-transient-in-spring-boot-examples/","title":"Data coming Null even when join query is having values in Spring Boot","body":"<p><code>@Transient</code> annotation is used to mark a field to be transient for the mapping framework, which means the field marked with <code>@Transient</code> is ignored by mapping framework and the field not mapped to any database column (in RDBMS) or Document property (in NOSQL). Thus the property will not be persisted to data store.</p>\n<p>Source: <a href=\"https://javabydeveloper.com/using-transient-in-spring-boot-examples/\" rel=\"nofollow noreferrer\">https://javabydeveloper.com/using-transient-in-spring-boot-examples/</a></p>\n"}],"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686665974,"creation_date":1686653471,"question_id":76464142,"body_markdown":"I have a dependency Table Sellars which is having the City ID only. But while showing the sellars I need to show the Sellar country, state. I have written the join query it is returning rest of the sellar details except country,city and state as null. I haven&#39;t kept any relation like @manytoOne as it will also show the zipcode list under the city as there is a relation.\r\n\r\n    @Entity(name = &quot;tbl_sellars&quot;)\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n    public class Sellars extends CommonEntity {\r\n    \t\r\n    \t@Column(name = &quot;sellarName&quot;)\r\n    \tString sellarName;\r\n    \t@JsonIgnore\r\n    \t@Column(name = &quot;fk_city_id&quot;)   // this contains the city Id\r\n    \tString fk_city_id;\r\n    \t\r\n    \t@Transient             //Kept these variable Transient as I Don&#39;t need these in Entity\r\n    \tString country;\r\n    \t@Transient\r\n    \t@JsonProperty\r\n    \tString state;\r\n    \t@Transient\r\n    \t@JsonProperty\r\n    \tString cityName;\r\n    }\r\n\r\n\r\n    @Entity(name= &quot;tbl_city&quot;)\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n    public class City extends CommonEntity {\r\n    \t\r\n    \tString cityName;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;fk_state_id&quot;)\r\n    \tprivate State state;\r\n    \t\r\n    \t@OneToMany(cascade = CascadeType.ALL)\r\n    \t@JoinColumn(name = &quot;fk_city_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    \tprivate List&lt;ZipCode&gt; zipcodes;\r\n    }\r\n\r\n    @Repository\r\n    public interface SellarsRepository extends JpaRepository&lt;Sellars, Long&gt;{\r\n    \t  @Query(value = &quot;SELECT u.*, c.country, s.state,ci.cityName&quot; +\r\n    \t  &quot; FROM tbl_sellars u&quot; + &quot; JOIN tbl_city ci ON u.fk_city_id = ci.id&quot; +\r\n    \t  &quot; JOIN tbl_state s ON ci.fk_state_id = s.id&quot; +\r\n    \t  &quot; JOIN tbl_country c ON s.fk_country_id = c.id&quot;, nativeQuery = true)\r\n    \t  List&lt;Sellars&gt; getAllSellarsWithRegion();\r\n    }\r\n\r\nJson Returned like \r\n\r\n    [\r\n      {\r\n        &quot;id&quot;: 2,\r\n        &quot;sellarName&quot;: &quot;Avik ray&quot;,\r\n        &quot;country&quot;: null,\r\n        &quot;state&quot;: null,\r\n        &quot;cityName&quot;: null\r\n      }\r\n    ]\r\n\r\n\r\n","title":"Data coming Null even when join query is having values in Spring Boot","body":"<p>I have a dependency Table Sellars which is having the City ID only. But while showing the sellars I need to show the Sellar country, state. I have written the join query it is returning rest of the sellar details except country,city and state as null. I haven't kept any relation like @manytoOne as it will also show the zipcode list under the city as there is a relation.</p>\n<pre><code>@Entity(name = &quot;tbl_sellars&quot;)\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class Sellars extends CommonEntity {\n    \n    @Column(name = &quot;sellarName&quot;)\n    String sellarName;\n    @JsonIgnore\n    @Column(name = &quot;fk_city_id&quot;)   // this contains the city Id\n    String fk_city_id;\n    \n    @Transient             //Kept these variable Transient as I Don't need these in Entity\n    String country;\n    @Transient\n    @JsonProperty\n    String state;\n    @Transient\n    @JsonProperty\n    String cityName;\n}\n\n\n@Entity(name= &quot;tbl_city&quot;)\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class City extends CommonEntity {\n    \n    String cityName;\n    \n    @ManyToOne\n    @JoinColumn(name = &quot;fk_state_id&quot;)\n    private State state;\n    \n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;fk_city_id&quot;, referencedColumnName = &quot;id&quot;)\n    private List&lt;ZipCode&gt; zipcodes;\n}\n\n@Repository\npublic interface SellarsRepository extends JpaRepository&lt;Sellars, Long&gt;{\n      @Query(value = &quot;SELECT u.*, c.country, s.state,ci.cityName&quot; +\n      &quot; FROM tbl_sellars u&quot; + &quot; JOIN tbl_city ci ON u.fk_city_id = ci.id&quot; +\n      &quot; JOIN tbl_state s ON ci.fk_state_id = s.id&quot; +\n      &quot; JOIN tbl_country c ON s.fk_country_id = c.id&quot;, nativeQuery = true)\n      List&lt;Sellars&gt; getAllSellarsWithRegion();\n}\n</code></pre>\n<p>Json Returned like</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 2,\n    &quot;sellarName&quot;: &quot;Avik ray&quot;,\n    &quot;country&quot;: null,\n    &quot;state&quot;: null,\n    &quot;cityName&quot;: null\n  }\n]\n</code></pre>\n"},{"tags":["java","messaging","rabbitmq"],"comments":[{"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"score":1,"creation_date":1330878768,"post_id":9556235,"comment_id":12112797,"body_markdown":"I&#39;m not very familiar with RabbitMQ, but isn&#39;t this a matter of creating multiple consumers, one per queue? But it&#39;s not clear how you will move each machine from phase1 to phase2 (presumably using your coordinator). Why not use a single queue and tag the tasks so that the recipient can tell what to do with it (i.e. which phase the task is for)?","body":"I&#39;m not very familiar with RabbitMQ, but isn&#39;t this a matter of creating multiple consumers, one per queue? But it&#39;s not clear how you will move each machine from phase1 to phase2 (presumably using your coordinator). Why not use a single queue and tag the tasks so that the recipient can tell what to do with it (i.e. which phase the task is for)?"},{"owner":{"account_id":321625,"reputation":25233,"user_id":640558,"accept_rate":97,"display_name":"Lostsoul"},"score":0,"creation_date":1330879620,"post_id":9556235,"comment_id":12112978,"body_markdown":"@DNA Thank you! Thats actually a good idea, I didn&#39;t think about it but that could work.  My coordinator program will need to keep track of what phase its in but other than that it would also be easy to add/remove phases in my main program.  I&#39;m just not sure if its possible to send multiple arguments with rabbitmq but i&#39;ll start looking it right now.","body":"@DNA Thank you! Thats actually a good idea, I didn&#39;t think about it but that could work.  My coordinator program will need to keep track of what phase its in but other than that it would also be easy to add/remove phases in my main program.  I&#39;m just not sure if its possible to send multiple arguments with rabbitmq but i&#39;ll start looking it right now."}],"answers":[{"tags":[],"owner":{"account_id":227927,"reputation":1632,"user_id":489888,"display_name":"Steve Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1330955776,"creation_date":1330955776,"answer_id":9567830,"question_id":9556235,"body_markdown":"Another approach would be to separate the different phases in to different modules/services/processes and have all of them running concurrently. \r\n\r\nEach phase&#39;s consumer listens to a different queue. Each phase is responsible for producing messages for the next phase&#39;s queue. \r\n\r\nThis way you have reduced complexity by having single responsibilities. Each process consumes from a particular queue and produces for another queue. You can then, if need be, scale these separate processes up and/or out.\r\n\r\nThis is a pattern that we use. We have an initial job from which up to 100 times more sub jobs are ultimately created. The initial jobs are very small and quick to run whereas the sub jobs are potentially long-running requests which we service with a small army of cloud instances. These jobs then return their results via another queue, the results of which are then collated and added to a database.","title":"Is it possible to have Java listen to multiple RabbitMQ queues?","body":"<p>Another approach would be to separate the different phases in to different modules/services/processes and have all of them running concurrently. </p>\n\n<p>Each phase's consumer listens to a different queue. Each phase is responsible for producing messages for the next phase's queue. </p>\n\n<p>This way you have reduced complexity by having single responsibilities. Each process consumes from a particular queue and produces for another queue. You can then, if need be, scale these separate processes up and/or out.</p>\n\n<p>This is a pattern that we use. We have an initial job from which up to 100 times more sub jobs are ultimately created. The initial jobs are very small and quick to run whereas the sub jobs are potentially long-running requests which we service with a small army of cloud instances. These jobs then return their results via another queue, the results of which are then collated and added to a database.</p>\n"}],"owner":{"account_id":321625,"reputation":25233,"user_id":640558,"accept_rate":97,"display_name":"Lostsoul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2603,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":9567830,"answer_count":1,"score":1,"last_activity_date":1686665149,"creation_date":1330875660,"question_id":9556235,"body_markdown":"I suspect this is possible but I can&#39;t seem to figure out exactly how to do it.  I went through the tutorials on rabbitmq&#39;s site and they were really helpful and did what I wanted except it didn&#39;t show how to listen to multiple queues in the same program.\r\n\r\nMy program structure is basically a few phases..for example, phase 1 gathers a lot of data and then phase 2 processes it and loads it in a database, phase 3 analyzes it against other data, etc..Each phase cannot start until the previous phase is done and I wanted to use a queue system to use multiple machines to finish each phase quicker(so all consumers work on phase1 then once all of them are done, they go and work on phase 2 together,etc).\r\n\r\nI think I can&#39;t just do each phase once because the queue could be empty and the computer would move to the next queue and I have no way of knowing if its empty because all the work is done or if its done because we haven&#39;t started putting work in the queue yet.  So I thought (correct me if I&#39;m wrong) a better way was to listen to all queues associated with all phases and as work gets put into phase1Queue it works on it and if work gets put into phase2Queue it works on it right after (I have another processes outside of the process I&#39;m describing that monitors when each phase is done and sets up for the next phase). \r\n\r\nThe code in the queue sample is helpful for a consumer listening to one queue but how can I make it listen to multiple (and call different programs depending on different queues).  If there&#39;s a function for this already then awesome but I&#39;m kind of looking for the logic I can use to implement this in Java (worst case I have thought of running 5 separate programs listening to each queue but I&#39;m trying to find out if there&#39;s a better way, having one application with all my work in it would make managing distribution easier).\r\n\r\np.s. here&#39;s the consumer code that works for [rabbitmq][1] (but as you can see it only defines one queue):\r\n\r\n    import java.io.IOException;\r\n    import com.rabbitmq.client.ConnectionFactory;\r\n    import com.rabbitmq.client.Connection;\r\n    import com.rabbitmq.client.Channel;\r\n    import com.rabbitmq.client.QueueingConsumer;\r\n    \r\n    public class Worker {\r\n    \r\n      private static final String TASK_QUEUE_NAME = &quot;task_queue&quot;;\r\n    \r\n      public static void main(String[] argv)\r\n                          throws java.io.IOException,\r\n                          java.lang.InterruptedException {\r\n    \r\n        ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setHost(&quot;localhost&quot;);\r\n        Connection connection = factory.newConnection();\r\n        Channel channel = connection.createChannel();\r\n    \r\n        channel.queueDeclare(TASK_QUEUE_NAME, true, false, false, null);\r\n        System.out.println(&quot; [*] Waiting for messages. To exit press CTRL+C&quot;);\r\n    \r\n        channel.basicQos(1);\r\n    \r\n        QueueingConsumer consumer = new QueueingConsumer(channel);\r\n        channel.basicConsume(TASK_QUEUE_NAME, false, consumer);\r\n    \r\n        while (true) {\r\n          QueueingConsumer.Delivery delivery = consumer.nextDelivery();\r\n          String message = new String(delivery.getBody());\r\n    \r\n          System.out.println(&quot; [x] Received &#39;&quot; + message + &quot;&#39;&quot;);   \r\n          doWork(message); \r\n          System.out.println(&quot; [x] Done&quot; );\r\n    \r\n          channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\r\n        }\r\n      }\r\n      //...\r\n    }\r\n\r\nUpdate\r\n---\r\n\r\nI thought my explanation may be too verbose so I think a simple way of thinking of what I&#39;m trying to do is: I have multiple worker nodes that I want to utilize them for different tasks (and those different tasks come from different queues). Currently I only know how to make them listen to a single queue which is associated to a single type of work but I want them to listen to different queues so as different work comes up the same cluster of nodes can handle them.\r\n \r\nUpdate\r\n---\r\n\r\nAs per comment, the coordinator process is super simple.  Its just a program that monitors from Phase1Queue and once that queue is empty it simply starts a process to fill up Phase2Queue, etc.\r\n\r\n\r\n  [1]: http://www.rabbitmq.com/tutorials/tutorial-two-java.html","title":"Is it possible to have Java listen to multiple RabbitMQ queues?","body":"<p>I suspect this is possible but I can't seem to figure out exactly how to do it.  I went through the tutorials on rabbitmq's site and they were really helpful and did what I wanted except it didn't show how to listen to multiple queues in the same program.</p>\n<p>My program structure is basically a few phases..for example, phase 1 gathers a lot of data and then phase 2 processes it and loads it in a database, phase 3 analyzes it against other data, etc..Each phase cannot start until the previous phase is done and I wanted to use a queue system to use multiple machines to finish each phase quicker(so all consumers work on phase1 then once all of them are done, they go and work on phase 2 together,etc).</p>\n<p>I think I can't just do each phase once because the queue could be empty and the computer would move to the next queue and I have no way of knowing if its empty because all the work is done or if its done because we haven't started putting work in the queue yet.  So I thought (correct me if I'm wrong) a better way was to listen to all queues associated with all phases and as work gets put into phase1Queue it works on it and if work gets put into phase2Queue it works on it right after (I have another processes outside of the process I'm describing that monitors when each phase is done and sets up for the next phase).</p>\n<p>The code in the queue sample is helpful for a consumer listening to one queue but how can I make it listen to multiple (and call different programs depending on different queues).  If there's a function for this already then awesome but I'm kind of looking for the logic I can use to implement this in Java (worst case I have thought of running 5 separate programs listening to each queue but I'm trying to find out if there's a better way, having one application with all my work in it would make managing distribution easier).</p>\n<p>p.s. here's the consumer code that works for <a href=\"http://www.rabbitmq.com/tutorials/tutorial-two-java.html\" rel=\"nofollow noreferrer\">rabbitmq</a> (but as you can see it only defines one queue):</p>\n<pre><code>import java.io.IOException;\nimport com.rabbitmq.client.ConnectionFactory;\nimport com.rabbitmq.client.Connection;\nimport com.rabbitmq.client.Channel;\nimport com.rabbitmq.client.QueueingConsumer;\n\npublic class Worker {\n\n  private static final String TASK_QUEUE_NAME = &quot;task_queue&quot;;\n\n  public static void main(String[] argv)\n                      throws java.io.IOException,\n                      java.lang.InterruptedException {\n\n    ConnectionFactory factory = new ConnectionFactory();\n    factory.setHost(&quot;localhost&quot;);\n    Connection connection = factory.newConnection();\n    Channel channel = connection.createChannel();\n\n    channel.queueDeclare(TASK_QUEUE_NAME, true, false, false, null);\n    System.out.println(&quot; [*] Waiting for messages. To exit press CTRL+C&quot;);\n\n    channel.basicQos(1);\n\n    QueueingConsumer consumer = new QueueingConsumer(channel);\n    channel.basicConsume(TASK_QUEUE_NAME, false, consumer);\n\n    while (true) {\n      QueueingConsumer.Delivery delivery = consumer.nextDelivery();\n      String message = new String(delivery.getBody());\n\n      System.out.println(&quot; [x] Received '&quot; + message + &quot;'&quot;);   \n      doWork(message); \n      System.out.println(&quot; [x] Done&quot; );\n\n      channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\n    }\n  }\n  //...\n}\n</code></pre>\n<h2>Update</h2>\n<p>I thought my explanation may be too verbose so I think a simple way of thinking of what I'm trying to do is: I have multiple worker nodes that I want to utilize them for different tasks (and those different tasks come from different queues). Currently I only know how to make them listen to a single queue which is associated to a single type of work but I want them to listen to different queues so as different work comes up the same cluster of nodes can handle them.</p>\n<h2>Update</h2>\n<p>As per comment, the coordinator process is super simple.  Its just a program that monitors from Phase1Queue and once that queue is empty it simply starts a process to fill up Phase2Queue, etc.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1559139860,"post_id":56362807,"comment_id":99328939,"body_markdown":"Putting `}}` at the end of lines and haphazard indentation make your code harder to read. You are more likely to get people to read your code if it is readable.","body":"Putting <code>}}</code> at the end of lines and haphazard indentation make your code harder to read. You are more likely to get people to read your code if it is readable."},{"owner":{"account_id":15988,"reputation":872908,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":1,"creation_date":1559139878,"post_id":56362807,"comment_id":99328942,"body_markdown":"Yes; calling a method causes the method to be called.  What don&#39;t you understand?","body":"Yes; calling a method causes the method to be called.  What don&#39;t you understand?"},{"owner":{"account_id":3526421,"reputation":20884,"user_id":2947378,"display_name":"rdas"},"score":0,"creation_date":1559139903,"post_id":56362807,"comment_id":99328965,"body_markdown":"Java will only do something if you tell it to. So you need to call `init.init()` if you want `ipconfig` to run.","body":"Java will only do something if you tell it to. So you need to call <code>init.init()</code> if you want <code>ipconfig</code> to run."}],"answers":[{"comments":[{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1559140096,"post_id":56362879,"comment_id":99329079,"body_markdown":"Maybe that was just the result of poor English skills","body":"Maybe that was just the result of poor English skills"},{"owner":{"account_id":5018541,"reputation":12090,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":0,"creation_date":1559140252,"post_id":56362879,"comment_id":99329170,"body_markdown":"@JoakimDanielson The OP seems to have confusion about when this will be called.","body":"@JoakimDanielson The OP seems to have confusion about when this will be called."}],"tags":[],"owner":{"account_id":5018541,"reputation":12090,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559140354,"creation_date":1559139954,"answer_id":56362879,"question_id":56362807,"body_markdown":"You&#39;re *not* assigning the method itself to a variable - you&#39;re calling the method, and then assigning the return value of the method to a variable.\r\n\r\nWith regards to\r\n&gt; or would i have to call init.init(); everytime i wanted the command to run?\r\n\r\nAs written, the method call will definitely be executed. If you wanted to run `init()` a second time, though, then yes, you&#39;d have to call it again.","title":"If I assign a method to a variable is the method called in java?","body":"<p>You're <em>not</em> assigning the method itself to a variable - you're calling the method, and then assigning the return value of the method to a variable.</p>\n\n<p>With regards to</p>\n\n<blockquote>\n  <p>or would i have to call init.init(); everytime i wanted the command to run?</p>\n</blockquote>\n\n<p>As written, the method call will definitely be executed. If you wanted to run <code>init()</code> a second time, though, then yes, you'd have to call it again.</p>\n"},{"tags":[],"owner":{"account_id":10671650,"reputation":272,"user_id":7856535,"display_name":"Rapwnzel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1559140085,"creation_date":1559140085,"answer_id":56362926,"question_id":56362807,"body_markdown":"You are storing a String in your variable inti1.\r\nTherefore, if you &quot;initialize&quot; init1, you will get the String that your first call of init.init() returned. This is the only line where your init.init() call is done. If you reference init1 afterwards, no function gets called because the variable is just a String.\r\n\r\nIf you want to call a function in Java, you have to call the function. You can not store a function in a variable name and call the variable name as you could in JS.\r\n","title":"If I assign a method to a variable is the method called in java?","body":"<p>You are storing a String in your variable inti1.\nTherefore, if you \"initialize\" init1, you will get the String that your first call of init.init() returned. This is the only line where your init.init() call is done. If you reference init1 afterwards, no function gets called because the variable is just a String.</p>\n\n<p>If you want to call a function in Java, you have to call the function. You can not store a function in a variable name and call the variable name as you could in JS.</p>\n"},{"tags":[],"owner":{"account_id":20717463,"reputation":190,"user_id":15212573,"display_name":"roudlek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686665094,"creation_date":1686662057,"answer_id":76465355,"question_id":56362807,"body_markdown":"The answer is Yes, it is called !\r\nbut if you have like too much code is better to put it in a method and add the return type you want, and then you can call it, it becomes more readable and short!\r\n\r\nthen you call that new method in your code, this way you will call your method for once!","title":"If I assign a method to a variable is the method called in java?","body":"<p>The answer is Yes, it is called !\nbut if you have like too much code is better to put it in a method and add the return type you want, and then you can call it, it becomes more readable and short!</p>\n<p>then you call that new method in your code, this way you will call your method for once!</p>\n"}],"owner":{"account_id":14997822,"reputation":23,"user_id":10826564,"display_name":"Shawn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":451,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":56362926,"answer_count":3,"score":-1,"last_activity_date":1686665094,"creation_date":1559139726,"question_id":56362807,"body_markdown":"these are my two classes\r\n\r\n       public class Main {\r\n             public static void main(String[] args) throws IOException {\r\n              Init init = new Init();\r\n             final String init1 = init.init(); }}\r\n\r\n    public class Init {\r\n\r\n    protected String init() throws IOException {\r\n         final String command = &quot;ipconfig&quot;;\r\n         Runtime rt = Runtime.getRuntime(); //executing commands on cmd\r\n         Process process = rt.exec(command);\r\n         InputStream is = process.getInputStream();\r\n        Scanner s = new Scanner(is).useDelimiter(&quot;\\\\A&quot;);\r\n        String val = &quot;&quot;;\r\n\r\n        if (s.hasNext()){\r\n            val = s.next();\r\n        } else {\r\n            val = &quot;&quot;;\r\n        }\r\n\r\n        return val;\r\n\r\n\r\n\r\nwould init1 being initialized cause my program to execute the command line command? or would i have to call init.init(); everytime i wanted the command to run?\r\n\r\n","title":"If I assign a method to a variable is the method called in java?","body":"<p>these are my two classes</p>\n\n<pre><code>   public class Main {\n         public static void main(String[] args) throws IOException {\n          Init init = new Init();\n         final String init1 = init.init(); }}\n\npublic class Init {\n\nprotected String init() throws IOException {\n     final String command = \"ipconfig\";\n     Runtime rt = Runtime.getRuntime(); //executing commands on cmd\n     Process process = rt.exec(command);\n     InputStream is = process.getInputStream();\n    Scanner s = new Scanner(is).useDelimiter(\"\\\\A\");\n    String val = \"\";\n\n    if (s.hasNext()){\n        val = s.next();\n    } else {\n        val = \"\";\n    }\n\n    return val;\n</code></pre>\n\n<p>would init1 being initialized cause my program to execute the command line command? or would i have to call init.init(); everytime i wanted the command to run?</p>\n"},{"tags":["java","caching","hazelcast","serializable"],"comments":[{"owner":{"account_id":4720152,"reputation":1442,"user_id":3818303,"accept_rate":38,"display_name":"instanceof"},"score":0,"creation_date":1686663339,"post_id":61828737,"comment_id":134827786,"body_markdown":"Hi @Rrue, have you managed to find a solution to this? I am having the exact same issue.","body":"Hi @Rrue, have you managed to find a solution to this? I am having the exact same issue."}],"answers":[{"comments":[{"owner":{"account_id":18595664,"reputation":31,"user_id":13551771,"display_name":"Rrue"},"score":0,"creation_date":1589640637,"post_id":61829066,"comment_id":109376243,"body_markdown":"Hi, first of all, thanks! sorry, it is my first time asking here. I am using java 11, spring boot 2.1.6.RELEASE, I&#39;m using spring cache and hazelcast, i&#39;m just trying to save the response in the cache. But I&#39;m having several problems trying to mix both technologies.","body":"Hi, first of all, thanks! sorry, it is my first time asking here. I am using java 11, spring boot 2.1.6.RELEASE, I&#39;m using spring cache and hazelcast, i&#39;m just trying to save the response in the cache. But I&#39;m having several problems trying to mix both technologies."},{"owner":{"account_id":383617,"reputation":1175,"user_id":739583,"display_name":"Nicolas"},"score":0,"creation_date":1589655487,"post_id":61829066,"comment_id":109382157,"body_markdown":"I assume you want to create a page cache, with a URL as a key and the `ResponseEntity` as the content. Is that correct?","body":"I assume you want to create a page cache, with a URL as a key and the <code>ResponseEntity</code> as the content. Is that correct?"},{"owner":{"account_id":18595664,"reputation":31,"user_id":13551771,"display_name":"Rrue"},"score":0,"creation_date":1589665183,"post_id":61829066,"comment_id":109385463,"body_markdown":"Exactly, But it seems like the ResponseEntity.ok (package org.springframework.http;) is not a candidate to be serialized","body":"Exactly, But it seems like the ResponseEntity.ok (package org.springframework.http;) is not a candidate to be serialized"},{"owner":{"account_id":383617,"reputation":1175,"user_id":739583,"display_name":"Nicolas"},"score":0,"creation_date":1589706351,"post_id":61829066,"comment_id":109394511,"body_markdown":"Back to my initial answer. Why do you want to cache the `ResponseEntity` and not the DTO itself? Or you can change the default serialization mechanism (cf. https://docs.hazelcast.org/docs/latest/manual/html-single/#serialization)","body":"Back to my initial answer. Why do you want to cache the <code>ResponseEntity</code> and not the DTO itself? Or you can change the default serialization mechanism (cf. <a href=\"https://docs.hazelcast.org/docs/latest/manual/html-single/#serialization\" rel=\"nofollow noreferrer\">docs.hazelcast.org/docs/latest/manual/html-single/&hellip;</a>)"},{"owner":{"account_id":18595664,"reputation":31,"user_id":13551771,"display_name":"Rrue"},"score":0,"creation_date":1589748426,"post_id":61829066,"comment_id":109410525,"body_markdown":"Because I can not change anything else, the service or its classes, I must just add the cache but i can not change the response or any line in the classes already used, that&#39;s why I can just change the only class used in the controller and its the ResponseEntity class.","body":"Because I can not change anything else, the service or its classes, I must just add the cache but i can not change the response or any line in the classes already used, that&#39;s why I can just change the only class used in the controller and its the ResponseEntity class."},{"owner":{"account_id":383617,"reputation":1175,"user_id":739583,"display_name":"Nicolas"},"score":0,"creation_date":1589787566,"post_id":61829066,"comment_id":109420912,"body_markdown":"Did you check the documentation I linked to? Changing the serialization mechanism doesn&#39;t touch the application.\n\nIf you can only change the controller, then cache the `ResultDTO`. If you need more _e.g._ the HTTP code, create a wrapper class that embeds the DTO and the code. I&#39;m sorry, but in the absence of more context, I cannot help you further.","body":"Did you check the documentation I linked to? Changing the serialization mechanism doesn&#39;t touch the application.  If you can only change the controller, then cache the <code>ResultDTO</code>. If you need more <i>e.g.</i> the HTTP code, create a wrapper class that embeds the DTO and the code. I&#39;m sorry, but in the absence of more context, I cannot help you further."}],"tags":[],"owner":{"account_id":383617,"reputation":1175,"user_id":739583,"display_name":"Nicolas"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1589580200,"creation_date":1589580200,"answer_id":61829066,"question_id":61828737,"body_markdown":"To answer you question, you have basically 2 options:\r\n\r\n - Change the serialization strategy to something that doesn&#39;t need to change the class hierarchy (since you cannot) _e.g._ JSON serialization\r\n - Think whether you want to serialize the `ResponseEntity`, or more likely the underlying DTO that you can make `Serializable`\r\n\r\nBut the thing is, I don&#39;t understand how you cache, or from where, or even why. In order to help you in the best way possible, please remember to define the context first, then state the problem you try to solve by caching, and only then can you describe what how you implemented caching and the exception.\r\n\r\nFor example, in your question, I infer you&#39;re using Spring, but I don&#39;t know which version, if it&#39;s Spring Boot or not, what dependencies you have, etc.","title":"Failed to serialize &#39;org.springframework.http.ResponseEntity&#39; HazelcastCache","body":"<p>To answer you question, you have basically 2 options:</p>\n\n<ul>\n<li>Change the serialization strategy to something that doesn't need to change the class hierarchy (since you cannot) <em>e.g.</em> JSON serialization</li>\n<li>Think whether you want to serialize the <code>ResponseEntity</code>, or more likely the underlying DTO that you can make <code>Serializable</code></li>\n</ul>\n\n<p>But the thing is, I don't understand how you cache, or from where, or even why. In order to help you in the best way possible, please remember to define the context first, then state the problem you try to solve by caching, and only then can you describe what how you implemented caching and the exception.</p>\n\n<p>For example, in your question, I infer you're using Spring, but I don't know which version, if it's Spring Boot or not, what dependencies you have, etc.</p>\n"},{"tags":[],"owner":{"account_id":4720152,"reputation":1442,"user_id":3818303,"accept_rate":38,"display_name":"instanceof"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686665085,"creation_date":1686665085,"answer_id":76465773,"question_id":61828737,"body_markdown":"What I ended up doing was split my code into two methods, one that returns the `ResponseEntity` object, and one that returns the input to the `ResponseEntity` object, which in your case appears to be your `ResponseDto` object. I then adapted that custom class to implement `Serializable`, so that it can be cached by Hazelcast. Then lastly I put the `@Cacheable` annotation above the method that returns that object, instead of the method that returns `ResponseEntity`. In doing so, I no longer received that error.","title":"Failed to serialize &#39;org.springframework.http.ResponseEntity&#39; HazelcastCache","body":"<p>What I ended up doing was split my code into two methods, one that returns the <code>ResponseEntity</code> object, and one that returns the input to the <code>ResponseEntity</code> object, which in your case appears to be your <code>ResponseDto</code> object. I then adapted that custom class to implement <code>Serializable</code>, so that it can be cached by Hazelcast. Then lastly I put the <code>@Cacheable</code> annotation above the method that returns that object, instead of the method that returns <code>ResponseEntity</code>. In doing so, I no longer received that error.</p>\n"}],"owner":{"account_id":18595664,"reputation":31,"user_id":13551771,"display_name":"Rrue"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1527,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686665085,"creation_date":1589578558,"question_id":61828737,"body_markdown":"I am using Hazelcast for cache, \r\n\r\nMy Controller looks like this one:\r\n\r\npublic ResponseEntity&lt;ResponseDto&gt; find(String user) {\r\n\r\n.....\r\n\r\nreturn ResponseEntity.ok(new ResponseDto(list, null));\r\n\r\n\r\n}\r\n\r\nWhen the Hazelcast is trying to save in cache:\r\n Exception: Failed to serialize &#39;org.springframework.http.ResponseEntity\r\n\r\nResponseEntity is not serializable\r\n\r\nAny idea?\r\nThanks in advance.\r\n\r\n","title":"Failed to serialize &#39;org.springframework.http.ResponseEntity&#39; HazelcastCache","body":"<p>I am using Hazelcast for cache, </p>\n\n<p>My Controller looks like this one:</p>\n\n<p>public ResponseEntity find(String user) {</p>\n\n<p>.....</p>\n\n<p>return ResponseEntity.ok(new ResponseDto(list, null));</p>\n\n<p>}</p>\n\n<p>When the Hazelcast is trying to save in cache:\n Exception: Failed to serialize 'org.springframework.http.ResponseEntity</p>\n\n<p>ResponseEntity is not serializable</p>\n\n<p>Any idea?\nThanks in advance.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1686664920,"post_id":76464306,"comment_id":134828149,"body_markdown":"Can you share the URL if it can be shareable in public?","body":"Can you share the URL if it can be shareable in public?"}],"answers":[{"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1686656869,"post_id":76464379,"comment_id":134826250,"body_markdown":"I still don&#39;t find `By.xpath(&quot;(//input..` in OP&#39;s code trials.","body":"I still don&#39;t find <code>By.xpath(&quot;(&#47;&#47;input..</code> in OP&#39;s code trials."}],"tags":[],"owner":{"account_id":4920526,"reputation":53,"user_id":3963201,"accept_rate":75,"display_name":"Munish Gupta"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686659260,"creation_date":1686655169,"answer_id":76464379,"question_id":76464306,"body_markdown":"You have added extra slash in the beginning and middle of your code.\r\n\r\nInstead of:\r\n\r\n    By.xpath(&quot;(//input[@id=&#39;address&#39;])[1]&quot;)).sendKeys(&quot;banglore&quot;);\r\n\r\nit should be:\r\n\r\n    By.xpath(&quot;//input[@id=&#39;address&#39;][1]&quot;)).sendKeys(&quot;banglore&quot;);\r\n\r\nIf that also does not work, kindly share your html url. Will check again.","title":"Exception in thread &quot;main&quot; org.openqa.selenium.JavascriptException: javascript error: a.tagName.toUpperCase is not a function","body":"<p>You have added extra slash in the beginning and middle of your code.</p>\n<p>Instead of:</p>\n<pre><code>By.xpath(&quot;(//input[@id='address'])[1]&quot;)).sendKeys(&quot;banglore&quot;);\n</code></pre>\n<p>it should be:</p>\n<pre><code>By.xpath(&quot;//input[@id='address'][1]&quot;)).sendKeys(&quot;banglore&quot;);\n</code></pre>\n<p>If that also does not work, kindly share your html url. Will check again.</p>\n"}],"owner":{"account_id":28646297,"reputation":1,"user_id":21934233,"display_name":"Nolimits"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686664787,"creation_date":1686654608,"question_id":76464306,"body_markdown":"I&#39;m trying to send values to this XPath but getting the above error. I&#39;m just not able to interact with that element only. \r\n\r\nsometimes for same element I&#39;ll get error like `element not intarectable`\r\n````\r\ndriver.findElement(By.xpath(&quot;(//input[@id=&#39;address&#39;])[1]&quot;)).sendKeys(&quot;banglore&quot;);\r\n````\r\n\r\nI also tried -\r\n````\r\nString Shipper_citynstate= &quot;Aberdeen, SD, United States&quot;;\r\nWebElement csShipper = driver.findElement(By.xpath(&quot;//input[@id=&#39;address&#39;])[1]&quot;));\r\nactions.sendKeys(csShipper,Shipper_citynstate).perform();\r\n````\r\nwhen I try this the script will run successfully but its not taking value.\r\n\r\nI also tried `JavascriptExecutor` it is also not working.","title":"Exception in thread &quot;main&quot; org.openqa.selenium.JavascriptException: javascript error: a.tagName.toUpperCase is not a function","body":"<p>I'm trying to send values to this XPath but getting the above error. I'm just not able to interact with that element only.</p>\n<p>sometimes for same element I'll get error like <code>element not intarectable</code></p>\n<pre><code>driver.findElement(By.xpath(&quot;(//input[@id='address'])[1]&quot;)).sendKeys(&quot;banglore&quot;);\n</code></pre>\n<p>I also tried -</p>\n<pre><code>String Shipper_citynstate= &quot;Aberdeen, SD, United States&quot;;\nWebElement csShipper = driver.findElement(By.xpath(&quot;//input[@id='address'])[1]&quot;));\nactions.sendKeys(csShipper,Shipper_citynstate).perform();\n</code></pre>\n<p>when I try this the script will run successfully but its not taking value.</p>\n<p>I also tried <code>JavascriptExecutor</code> it is also not working.</p>\n"},{"tags":["java","android","android-activity"],"comments":[{"owner":{"account_id":12924971,"reputation":2766,"user_id":9346054,"accept_rate":100,"display_name":"Ticherhaz FreePalestine"},"score":0,"creation_date":1686622045,"post_id":76461169,"comment_id":134820939,"body_markdown":"When you move to new Activity, did you finish() the activity?","body":"When you move to new Activity, did you finish() the activity?"},{"owner":{"account_id":23472744,"reputation":37,"user_id":17525988,"display_name":"Feras"},"score":0,"creation_date":1686630875,"post_id":76461169,"comment_id":134821611,"body_markdown":"@TicherhazFreePalestine no. I just move to it in the same way I did from MainActivity to DataActivity, and I&#39;m going back to the DataActivity using the arrow in the action bar.","body":"@TicherhazFreePalestine no. I just move to it in the same way I did from MainActivity to DataActivity, and I&#39;m going back to the DataActivity using the arrow in the action bar."}],"answers":[{"tags":[],"owner":{"account_id":28269166,"reputation":76,"user_id":21612640,"display_name":"hcl2000"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686664539,"creation_date":1686664539,"answer_id":76465695,"question_id":76461169,"body_markdown":"Could make `tableName` static. I think this would work for you?\r\n\r\n```\r\n\r\nprivate static String tableName;\r\n\r\n[...]\r\n\r\nif (intent.getStringExtra(&quot;tableName&quot;) != null){\r\n   // tableName was passed by intent\r\n   tableName = intent.getStringExtra(&quot;tableName&quot;);\r\n   setTitle(tableName);\r\n} else if (tableName != null) {\r\n   // tableName is non-null, but was not passed by intent.\r\n   setTitle(tableName);\r\n} else {\r\n   // No passed tableName, tableName is null\r\n   // Could throw an error here\r\n}\r\n```","title":"How to pass the label of an action bar","body":"<p>Could make <code>tableName</code> static. I think this would work for you?</p>\n<pre><code>\nprivate static String tableName;\n\n[...]\n\nif (intent.getStringExtra(&quot;tableName&quot;) != null){\n   // tableName was passed by intent\n   tableName = intent.getStringExtra(&quot;tableName&quot;);\n   setTitle(tableName);\n} else if (tableName != null) {\n   // tableName is non-null, but was not passed by intent.\n   setTitle(tableName);\n} else {\n   // No passed tableName, tableName is null\n   // Could throw an error here\n}\n</code></pre>\n"}],"owner":{"account_id":23472744,"reputation":37,"user_id":17525988,"display_name":"Feras"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686664539,"creation_date":1686619478,"question_id":76461169,"body_markdown":"I&#39;m new to Android developing with Java, in my ```MainActivity``` I have many buttons (Show Types, Show Materials, etc..) and when I click on one of them I go to another activity ```DataActivity``` but in ```DataActivity``` where I display my data I want the label in the action bar to be named after the type of data I&#39;m displaying (Types, Materials...), I&#39;m using this method now (for example when I click the Show Types button):\r\n\r\n```MainActivity```:\r\n```\r\nIntent intent = new Intent(MainActivity.this, DataActivity.class);\r\nintent.putExtra(&quot;tableName&quot;, &quot;Types&quot;);\r\nstartActivity(intent);\r\n```\r\n```DataActivity```:\r\n```\r\nIntent intent = getIntent();\r\ntableName = intent.getStringExtra(&quot;tableName&quot;);\r\nsetTitle(tableName);\r\n```\r\nAnd it works! but if from ```DataActivity``` I moved to a new Activity then I went back to the ```DataActivity``` the action bar is empty now and it doesn&#39;t display the ```tableName```. how can I solve this?","title":"How to pass the label of an action bar","body":"<p>I'm new to Android developing with Java, in my <code>MainActivity</code> I have many buttons (Show Types, Show Materials, etc..) and when I click on one of them I go to another activity <code>DataActivity</code> but in <code>DataActivity</code> where I display my data I want the label in the action bar to be named after the type of data I'm displaying (Types, Materials...), I'm using this method now (for example when I click the Show Types button):</p>\n<p><code>MainActivity</code>:</p>\n<pre><code>Intent intent = new Intent(MainActivity.this, DataActivity.class);\nintent.putExtra(&quot;tableName&quot;, &quot;Types&quot;);\nstartActivity(intent);\n</code></pre>\n<p><code>DataActivity</code>:</p>\n<pre><code>Intent intent = getIntent();\ntableName = intent.getStringExtra(&quot;tableName&quot;);\nsetTitle(tableName);\n</code></pre>\n<p>And it works! but if from <code>DataActivity</code> I moved to a new Activity then I went back to the <code>DataActivity</code> the action bar is empty now and it doesn't display the <code>tableName</code>. how can I solve this?</p>\n"},{"tags":["java","oracle","spring-boot","jdbc","hikaricp"],"comments":[{"owner":{"account_id":26151806,"reputation":151,"user_id":19839660,"display_name":"Iv&#225;n Larios"},"score":0,"creation_date":1686679636,"post_id":76465465,"comment_id":134831516,"body_markdown":"have you checked that the table exists in the database, the user used by jdbc for the queries has permissions on this table, and if the schema selected when performing the query is the correct one?","body":"have you checked that the table exists in the database, the user used by jdbc for the queries has permissions on this table, and if the schema selected when performing the query is the correct one?"}],"owner":{"account_id":15040147,"reputation":11,"user_id":10855078,"display_name":"John Williams"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686664323,"creation_date":1686662840,"question_id":76465465,"body_markdown":"I have a service that takes data from a database, then collects it into one object and sends it to another service.\r\nThe service itself works, but for some reason, after some time, I get the error: `table or view does not exist`. \r\n\r\n\r\nIf the table exists in every schema, What could be causing this error? \r\n\r\n    PreparedStatementCallback; bad SQL grammar [\r\n    \r\n        select /*+ index ( a idx_claim_list) */ \r\n          ... \r\n        ]; \r\n        nested exception is java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n\r\n**I have 4 such services and each of them has a timer.**\r\n\r\n    @Service\r\n    public class AlterSession {\r\n    \r\n        @Autowired\r\n        private JdbcTemplate jdbcTemplate;\r\n    \r\n    \t\tpublic void alterSession(String branch) {\r\n    \t\ttry {\r\n    \t\t\tString schemaName = jdbcTemplate.queryForObject(&quot;SELECT schema_name FROM list_market WHERE branch = ?&quot;, String.class, branch);\t\r\n    \t\t\tjdbcTemplate.execute(&quot;ALTER SESSION SET CURRENT_SCHEMA = &quot; + schemaName);\r\n    \t\t\tjdbcTemplate.execute(&quot;CALL MARKET.OPEN()&quot;);\r\n    \t\t\tjdbcTemplate.execute(&quot;ALTER SESSION SET NLS_DATE_FORMAT =&#39;dd.mm.yyyy&#39;&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlog.error(&quot;alterSessionException: &quot; + e.getMessage(), e);\r\n    \t\t}\r\n        }\r\n    }\r\n    \r\n    @Slf4j\r\n    @Service\r\n    @Scope(&quot;singleton&quot;)\r\n    public class ClaimService {\r\n    \r\n    @Autowired\r\n    private JdbcTemplate jdbcTemplate;\r\n    \r\n    @Autowired\r\n    private AlterSession alterSession;\r\n    \r\n    \r\n    \tpublic ClaimRequest getClaim(String branch, Long id) {\r\n    \r\n    \t\t\tAtomicReference&lt;ClaimRequest&gt; claimRequest = new AtomicReference&lt;&gt;(new ClaimRequest());\r\n    \t\t\tAtomicReference&lt;String&gt; subType = new AtomicReference&lt;&gt;(&quot;&quot;);\r\n    \t\t\tAtomicReference&lt;String&gt; clientId = new AtomicReference&lt;&gt;(&quot;&quot;);\r\n    \t\t\tAtomicReference&lt;String&gt; claimType = new AtomicReference&lt;&gt;(&quot;&quot;);\r\n    \r\n    \t\t\ttry {\r\n    \t\t\t\talterSession.alterSession(branch);\r\n    \t\t\t\tlog.info(branch +&quot; -&gt; &quot;+ String.valueOf(id));\r\n    \t\t\t\tjdbcTemplate.query(&quot;select /*+ index ( a idx_claim_list) */ \r\n    \t\t\t\t\t\t\t\t\t  ... from table1 a, table2 p&quot;, (ResultSet rs) -&gt; {\r\n    \r\n    \t\t\t\t\tsubType.set(rs.getString(&quot;type&quot;));\r\n    \t\t\t\t\tclientId.set(rs.getString(&quot;id_c&quot;));\r\n    \t\t\t\t\tclaimType.set(rs.getString(&quot;CLAIM_TYPE&quot;));\r\n    \r\n    \t\t\t\t\tclaimRequest.set(new ClaimRequest(\r\n    \t\t\t\t\t\t\trs.getString(&quot;CLAIM_TYPE&quot;) == null ? &quot;1&quot; : &quot;5&quot;,\r\n    \t\t\t\t\t\t\tnew BrokerInfo(\r\n    \t\t\t\t\t\t\t\t\t&quot;FB29763-23-132&quot;,\r\n    \t\t\t\t\t\t\t\t\tbranch                                \r\n    \t\t\t\t\t\t\t),\r\n    \t\t\t\t\t\t\tnew ClaimInfo(                                \r\n    \t\t\t\t\t\t\t\t\trs.getString(&quot;ID&quot;),\r\n    \t\t\t\t\t\t\t\t\tclaimType.get()\r\n    \t\t\t\t\t\t\t),\r\n    \t\t\t\t\t\t\tnew ScoreInfo(\r\n    \t\t\t\t\t\t\t\t\tsubType.get(),\r\n    \t\t\t\t\t\t\t\t\t(claimType.get().equals(&quot;01&quot;)) ? rs.getString(&quot;SCORE_TYPE&quot;) : &quot;&quot;,\r\n    \t\t\t\t\t\t\t\t\trs.getString(&quot;CURRENCY&quot;),\r\n    \t\t\t\t\t\t\t\t\trs.getString(&quot;AMOUNT&quot;),\r\n    \t\t\t\t\t\t\t\t\t(claimType.get().equals(&quot;01&quot;) || claimType.get().equals(&quot;02&quot;)) ? rs.getString(&quot;RATE&quot;) : null,\r\n    \t\t\t\t\t\t\t\t\trs.getString(&quot;PERIOD&quot;),\r\n    \t\t\t\t\t\t\t\t\t(claimType.get().equals(&quot;01&quot;)) ? new String[]{rs.getString(&quot;TARGET&quot;)} : null\r\n    \t\t\t\t\t\t\t)                       \r\n    \t\t\t\t\t));\r\n    \r\n    \t\t\t\t}, id, branch);          \r\n    \r\n    \r\n    \t\t\t\treturn claimRequest.get();\r\n    \r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\tlog.error(branch + &quot;-&quot; + id + &quot; &quot; + e.getMessage());\r\n    \t\t\t\tif (jdbcTemplate.update(&quot;UPDATE list_claim SET state = 5 WHERE branch = ? and id = ?&quot;, branch, id) == 0) {\r\n    \t\t\t\t\tjdbcTemplate.update(&quot;INSERT INTO list_claim (branch, id, state) VALUES (?,?,5) &quot;, branch, id);\r\n    \t\t\t\t}            \r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t}\r\n    \r\n    \t@Scheduled(fixedDelay = 180000)\r\n    \tpublic void claim() {\r\n    \r\n    \t\tList&lt;String&gt; branches = jdbcTemplate.queryForList(&quot;SELECT branch FROM list_market&quot;, String.class);\r\n    \r\n    \t\tbranches.forEach(branch -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\talterSession.alterSession(branch);\r\n    \r\n    \t\t\t\tList&lt;Long&gt; claimList = jdbcTemplate.queryForList(&quot;select id from claim_list where branch = ? where state = 1&quot;, Long.class, branch);\r\n    \r\n    \t\t\t\tclaimList.parallelStream().forEach(x -&gt; {                \r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tClaimRequest claimRequest = getClaim(branch, x);\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t.....\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\t\tlog.error(e.getMessage(), e);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\tlog.error(e.getMessage(), e);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"jdbc-template ORA-00942 table or view does not exist","body":"<p>I have a service that takes data from a database, then collects it into one object and sends it to another service.\nThe service itself works, but for some reason, after some time, I get the error: <code>table or view does not exist</code>.</p>\n<p>If the table exists in every schema, What could be causing this error?</p>\n<pre><code>PreparedStatementCallback; bad SQL grammar [\n\n    select /*+ index ( a idx_claim_list) */ \n      ... \n    ]; \n    nested exception is java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\n</code></pre>\n<p><strong>I have 4 such services and each of them has a timer.</strong></p>\n<pre><code>@Service\npublic class AlterSession {\n\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n\n        public void alterSession(String branch) {\n        try {\n            String schemaName = jdbcTemplate.queryForObject(&quot;SELECT schema_name FROM list_market WHERE branch = ?&quot;, String.class, branch);  \n            jdbcTemplate.execute(&quot;ALTER SESSION SET CURRENT_SCHEMA = &quot; + schemaName);\n            jdbcTemplate.execute(&quot;CALL MARKET.OPEN()&quot;);\n            jdbcTemplate.execute(&quot;ALTER SESSION SET NLS_DATE_FORMAT ='dd.mm.yyyy'&quot;);\n        } catch (Exception e) {\n            log.error(&quot;alterSessionException: &quot; + e.getMessage(), e);\n        }\n    }\n}\n\n@Slf4j\n@Service\n@Scope(&quot;singleton&quot;)\npublic class ClaimService {\n\n@Autowired\nprivate JdbcTemplate jdbcTemplate;\n\n@Autowired\nprivate AlterSession alterSession;\n\n\n    public ClaimRequest getClaim(String branch, Long id) {\n\n            AtomicReference&lt;ClaimRequest&gt; claimRequest = new AtomicReference&lt;&gt;(new ClaimRequest());\n            AtomicReference&lt;String&gt; subType = new AtomicReference&lt;&gt;(&quot;&quot;);\n            AtomicReference&lt;String&gt; clientId = new AtomicReference&lt;&gt;(&quot;&quot;);\n            AtomicReference&lt;String&gt; claimType = new AtomicReference&lt;&gt;(&quot;&quot;);\n\n            try {\n                alterSession.alterSession(branch);\n                log.info(branch +&quot; -&gt; &quot;+ String.valueOf(id));\n                jdbcTemplate.query(&quot;select /*+ index ( a idx_claim_list) */ \n                                      ... from table1 a, table2 p&quot;, (ResultSet rs) -&gt; {\n\n                    subType.set(rs.getString(&quot;type&quot;));\n                    clientId.set(rs.getString(&quot;id_c&quot;));\n                    claimType.set(rs.getString(&quot;CLAIM_TYPE&quot;));\n\n                    claimRequest.set(new ClaimRequest(\n                            rs.getString(&quot;CLAIM_TYPE&quot;) == null ? &quot;1&quot; : &quot;5&quot;,\n                            new BrokerInfo(\n                                    &quot;FB29763-23-132&quot;,\n                                    branch                                \n                            ),\n                            new ClaimInfo(                                \n                                    rs.getString(&quot;ID&quot;),\n                                    claimType.get()\n                            ),\n                            new ScoreInfo(\n                                    subType.get(),\n                                    (claimType.get().equals(&quot;01&quot;)) ? rs.getString(&quot;SCORE_TYPE&quot;) : &quot;&quot;,\n                                    rs.getString(&quot;CURRENCY&quot;),\n                                    rs.getString(&quot;AMOUNT&quot;),\n                                    (claimType.get().equals(&quot;01&quot;) || claimType.get().equals(&quot;02&quot;)) ? rs.getString(&quot;RATE&quot;) : null,\n                                    rs.getString(&quot;PERIOD&quot;),\n                                    (claimType.get().equals(&quot;01&quot;)) ? new String[]{rs.getString(&quot;TARGET&quot;)} : null\n                            )                       \n                    ));\n\n                }, id, branch);          \n\n\n                return claimRequest.get();\n\n            } catch (Exception e) {\n                log.error(branch + &quot;-&quot; + id + &quot; &quot; + e.getMessage());\n                if (jdbcTemplate.update(&quot;UPDATE list_claim SET state = 5 WHERE branch = ? and id = ?&quot;, branch, id) == 0) {\n                    jdbcTemplate.update(&quot;INSERT INTO list_claim (branch, id, state) VALUES (?,?,5) &quot;, branch, id);\n                }            \n                return null;\n            }\n    }\n\n    @Scheduled(fixedDelay = 180000)\n    public void claim() {\n\n        List&lt;String&gt; branches = jdbcTemplate.queryForList(&quot;SELECT branch FROM list_market&quot;, String.class);\n\n        branches.forEach(branch -&gt; {\n            try {\n                alterSession.alterSession(branch);\n\n                List&lt;Long&gt; claimList = jdbcTemplate.queryForList(&quot;select id from claim_list where branch = ? where state = 1&quot;, Long.class, branch);\n\n                claimList.parallelStream().forEach(x -&gt; {                \n                    try {\n                        ClaimRequest claimRequest = getClaim(branch, x);\n                        \n                        .....\n                        \n                    } catch (Exception e) {\n                        log.error(e.getMessage(), e);\n                    }\n                });\n\n            } catch (Exception e) {\n                log.error(e.getMessage(), e);\n            }\n        });\n    }\n\n}\n</code></pre>\n"},{"tags":["java","design-patterns","interface"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1686664460,"post_id":76465656,"comment_id":134828048,"body_markdown":"You have several options: Use a wrapper (delegate all `MyInterface` methods manually), use a Proxy (delegate them using reflection), or use a language that makes this easy. For example in Kotlin you could use `by` to avoid having to explicitly delegate all `MyInterface` methods.","body":"You have several options: Use a wrapper (delegate all <code>MyInterface</code> methods manually), use a Proxy (delegate them using reflection), or use a language that makes this easy. For example in Kotlin you could use <code>by</code> to avoid having to explicitly delegate all <code>MyInterface</code> methods."},{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":0,"creation_date":1686665042,"post_id":76465656,"comment_id":134828177,"body_markdown":"Adding `oneExtraMethod` as a no-op default method to `MyInterface` would solve all your problems without any (ugly) workarounds.","body":"Adding <code>oneExtraMethod</code> as a no-op default method to <code>MyInterface</code> would solve all your problems without any (ugly) workarounds."},{"owner":{"account_id":28812600,"reputation":11,"user_id":22066969,"display_name":"Scott Spencer"},"score":0,"creation_date":1686665250,"post_id":76465656,"comment_id":134828229,"body_markdown":"@ThomasBehr that&#39;s where I&#39;m at, but there are some details I&#39;ve omitted that make that less than ideal. But It&#39;s probably the best solution for most people looking at this question.","body":"@ThomasBehr that&#39;s where I&#39;m at, but there are some details I&#39;ve omitted that make that less than ideal. But It&#39;s probably the best solution for most people looking at this question."},{"owner":{"account_id":28812600,"reputation":11,"user_id":22066969,"display_name":"Scott Spencer"},"score":0,"creation_date":1686665373,"post_id":76465656,"comment_id":134828249,"body_markdown":"@Jorn by wrapper, do you mean the example I have in the question? Can you link me to a resource or give a bit more details to the Proxy approach so that I can look on my own?","body":"@Jorn by wrapper, do you mean the example I have in the question? Can you link me to a resource or give a bit more details to the Proxy approach so that I can look on my own?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686665609,"post_id":76465656,"comment_id":134828292,"body_markdown":"Yes, your example is basically a wrapper, except you&#39;d probably make an implementation class with a `MyInterface delegate` field. For proxies, you can look at [this](https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Proxy.html).","body":"Yes, your example is basically a wrapper, except you&#39;d probably make an implementation class with a <code>MyInterface delegate</code> field. For proxies, you can look at <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Proxy.html\" rel=\"nofollow noreferrer\">this</a>."}],"owner":{"account_id":28812600,"reputation":11,"user_id":22066969,"display_name":"Scott Spencer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686664295,"creation_date":1686664295,"question_id":76465656,"body_markdown":"I would like to &quot;cast&quot; an instance of an interface MyInterface and to a subinterface MyInterfacePlus that only implements the methods in the subinterface.\r\n\r\nI can&#39;t seem to find an elegant solution. In the example below, MyInterface and OtherInterface are long established and implemented/used extensively by users. I would like to make no changes to MyInterface and add only a default method to OtherInterface. For all existing implementations of OtherInterface, the `oneExtraMethod` in the result of `getMyInterfacePlus` will do nothing. That is, the method needs to be there to be called, but it should do nothing. \r\n\r\n```\r\npublic interface MyInterface {\r\n    ...//lots of methods\r\n}\r\npublic interface MyInterfacePlus extends MyInterface {\r\n    void oneExtraMethod();\r\n}\r\npublic interface OtherInterface {\r\n    MyInterface getMyInterface();\r\n\r\n    // ANY ELEGANT WAY TO DO THIS?\r\n    default MyInterfacePlus getMyInterfacePlus() {\r\n        MyInterface mi = getMyInterface();\r\n        return new MyInterfacePlus() {\r\n            @Override\r\n            void oneExtraMethod(){};\r\n            // override all (many) methods `methodX` in MyInterface to return `mi.methodX`\r\n        }\r\n    }\r\n}\r\n```","title":"Cast Interface to Subinterface to implement a single method in Java","body":"<p>I would like to &quot;cast&quot; an instance of an interface MyInterface and to a subinterface MyInterfacePlus that only implements the methods in the subinterface.</p>\n<p>I can't seem to find an elegant solution. In the example below, MyInterface and OtherInterface are long established and implemented/used extensively by users. I would like to make no changes to MyInterface and add only a default method to OtherInterface. For all existing implementations of OtherInterface, the <code>oneExtraMethod</code> in the result of <code>getMyInterfacePlus</code> will do nothing. That is, the method needs to be there to be called, but it should do nothing.</p>\n<pre><code>public interface MyInterface {\n    ...//lots of methods\n}\npublic interface MyInterfacePlus extends MyInterface {\n    void oneExtraMethod();\n}\npublic interface OtherInterface {\n    MyInterface getMyInterface();\n\n    // ANY ELEGANT WAY TO DO THIS?\n    default MyInterfacePlus getMyInterfacePlus() {\n        MyInterface mi = getMyInterface();\n        return new MyInterfacePlus() {\n            @Override\n            void oneExtraMethod(){};\n            // override all (many) methods `methodX` in MyInterface to return `mi.methodX`\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","retrofit2","okhttp","openai-api"],"comments":[{"owner":{"account_id":19400960,"reputation":1653,"user_id":14187529,"display_name":"Kamal Nayan"},"score":0,"creation_date":1686665404,"post_id":76465648,"comment_id":134828257,"body_markdown":"have you written `progaurd-rules` ?","body":"have you written <code>progaurd-rules</code> ?"},{"owner":{"account_id":25458197,"reputation":1,"user_id":19258476,"display_name":"SHIVA VERMA"},"score":0,"creation_date":1686673827,"post_id":76465648,"comment_id":134830365,"body_markdown":"No , i haven&#39;t added any progaurd-rules related to  retrofit , i will add them now if that sort my problem, thanks","body":"No , i haven&#39;t added any progaurd-rules related to  retrofit , i will add them now if that sort my problem, thanks"},{"owner":{"account_id":19400960,"reputation":1653,"user_id":14187529,"display_name":"Kamal Nayan"},"score":0,"creation_date":1686762962,"post_id":76465648,"comment_id":134845118,"body_markdown":"Also you need to write progaurd rules in order to prevent your data classes from being obfuscated while creating release build.","body":"Also you need to write progaurd rules in order to prevent your data classes from being obfuscated while creating release build."}],"owner":{"account_id":25458197,"reputation":1,"user_id":19258476,"display_name":"SHIVA VERMA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686664268,"creation_date":1686664268,"question_id":76465648,"body_markdown":"I want to call OpenAI Chat-gpt-3.5 turbo API using Retrofit in Android Java application for my chat application , but while testing in Android Studio emulator and in debugging devices its working fine , \r\nbut in after making a signed APK , while calling the api it start giving error i.e. \r\njava.lang.IllegalArgumentException: Unable to create call adapter for interface d6.g                                                                                  for method a.a                                                                              \tat e4.a.O(SourceFile:40)                                                                              \tat d6.y0.a(SourceFile:2751)                                                                              \tat d6.x0.b(SourceFile:25)                                                                          \tat d6.w0.invoke(SourceFile:45).....\r\nand  java.lang.IllegalArgumentException: Call return type must be parameterized as Call&lt;Foo&gt; or Call&lt;? extends Foo&gt;.....\r\nPlease if anybody know the problem help me solve this , i tried every possible solution available , \r\nalso i am begineer in using retrofit \r\n\r\n//here is my request function :\r\n\r\n```\r\nprivate void sendRequest(String query) {\r\n        JSONObject jsonObject = new JSONObject();\r\n        try {\r\n            jsonObject.put ( &quot;model&quot;,&quot;gpt-3.5-turbo&quot; );\r\n            JSONArray jsonArray = new JSONArray ();\r\n            JSONObject jsonObject1 = new JSONObject ();\r\n            jsonObject1.put ( &quot;role&quot;,&quot;system&quot; );\r\n            jsonObject1.put ( &quot;content&quot;,query );\r\n            jsonArray.put ( 0, jsonObject1);\r\n            jsonObject.put(&quot;messages&quot;,jsonArray);\r\n\r\n        } catch (JSONException e) {\r\n            Log.d ( TAG,e.getMessage () );\r\n            throw new RuntimeException ( e );\r\n        }\r\n        RequestBody requestBody = new RequestBody() {\r\n            @Override\r\n            public MediaType contentType() {\r\n                return MediaType.parse(&quot;application/json&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void writeTo(BufferedSink sink) throws IOException {\r\n                sink.writeUtf8(jsonObject.toString());\r\n            }\r\n        };\r\n        Call&lt;ChatCompletionResponse&gt; call = RetrofitInstance.getInstance ().apiInterface.getData ( requestBody );\r\n        call.enqueue ( new Callback&lt;ChatCompletionResponse&gt; () {\r\n            @Override\r\n            public void onResponse(@NonNull Call&lt;ChatCompletionResponse&gt; call, @NonNull Response&lt;ChatCompletionResponse&gt; response) {\r\n                if(response.isSuccessful ()){\r\n                    assert response.body () != null;\r\n                    String content = response.body ().getChoices ()[0].getMessage ().getContent ();\r\n                    TextMessage textMessage = new TextMessage ( user.getUid (),content, CometChatConstants.RECEIVER_TYPE_USER );\r\n                    textMessage.setSender ( user );\r\n                    addMessage ( textMessage );\r\n                    setIndicator ( false );\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(@NonNull Call&lt;ChatCompletionResponse&gt; call, @NonNull Throwable t) {\r\n                Log.d ( TAG,&quot;failurse occued&quot; + t.getMessage () );\r\n                String msg = &quot;Request failed !!&quot;;\r\n                TextMessage textMessage = new TextMessage ( logedinuser.getUid (),msg, CometChatConstants.RECEIVER_TYPE_USER );\r\n                textMessage.setSender ( logedinuser );\r\n                addMessage ( textMessage );\r\n            }\r\n        } );\r\n    }\r\n```\r\n\r\n// And My RetrofitInstance.java class :\r\n\r\n```\r\npublic class RetrofitInstance {\r\n    public static RetrofitInstance instance;\r\n    public APIInterface apiInterface;\r\n    static String BASE_URL = &quot;https://api.openai.com/v1/chat/&quot;;\r\n    RetrofitInstance(){\r\n        OkHttpClient client = new OkHttpClient.Builder()\r\n                .addInterceptor(new Interceptor () {\r\n                    @NonNull\r\n                    @Override\r\n                    public Response intercept(@NonNull Chain chain) throws IOException {\r\n                        Request newRequest = chain.request().newBuilder()\r\n                                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + AppKeys.GPT_TOKEN )\r\n                                .build();\r\n                        return chain.proceed(newRequest);\r\n                    }\r\n                })\r\n                .build();\r\n\r\n\r\n        apiInterface = new Retrofit.Builder ()\r\n                .client ( client )\r\n                .baseUrl ( BASE_URL )\r\n                .addConverterFactory ( GsonConverterFactory.create () )\r\n                .build ().create ( APIInterface.class );\r\n    }\r\n    public static RetrofitInstance getInstance(){\r\n        if(instance == null){\r\n            instance = new RetrofitInstance ();\r\n        }\r\n        return instance;\r\n    }\r\n}\r\n```\r\n\r\n// My API Interface :\r\n\r\n```\r\npublic interface APIInterface {\r\n    @POST(&quot;completions&quot;)\r\n    Call&lt;ChatCompletionResponse&gt; getData(\r\n            @Body RequestBody body\r\n    );\r\n}\r\n\r\n```\r\n\r\n//And ChatCompletionResponse.java class :\r\n\r\n```\r\n\r\npublic class ChatCompletionResponse {\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getObject() {\r\n        return object;\r\n    }\r\n\r\n    public long getCreated() {\r\n        return created;\r\n    }\r\n\r\n    public String getModel() {\r\n        return model;\r\n    }\r\n\r\n    public UsageData getUsage() {\r\n        return usage;\r\n    }\r\n\r\n    public Choice[] getChoices() {\r\n        return choices;\r\n    }\r\n\r\n    @SerializedName(&quot;id&quot;)\r\n    private String id;\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public void setObject(String object) {\r\n        this.object = object;\r\n    }\r\n\r\n    public void setCreated(long created) {\r\n        this.created = created;\r\n    }\r\n\r\n    public void setModel(String model) {\r\n        this.model = model;\r\n    }\r\n\r\n    public void setUsage(UsageData usage) {\r\n        this.usage = usage;\r\n    }\r\n\r\n    public void setChoices(Choice[] choices) {\r\n        this.choices = choices;\r\n    }\r\n\r\n    @SerializedName(&quot;object&quot;)\r\n    private String object;\r\n\r\n    @SerializedName(&quot;created&quot;)\r\n    private long created;\r\n\r\n    public ChatCompletionResponse(String id, String object, long created, String model, UsageData usage, Choice[] choices) {\r\n        this.id = id;\r\n        this.object = object;\r\n        this.created = created;\r\n        this.model = model;\r\n        this.usage = usage;\r\n        this.choices = choices;\r\n    }\r\n\r\n    @SerializedName(&quot;model&quot;)\r\n    private String model;\r\n\r\n    @SerializedName(&quot;usage&quot;)\r\n    private UsageData usage;\r\n\r\n    @SerializedName(&quot;choices&quot;)\r\n    private Choice[] choices;\r\n\r\n    // Getters and setters\r\n\r\n    public static class UsageData {\r\n        @SerializedName(&quot;prompt_tokens&quot;)\r\n        private int promptTokens;\r\n\r\n        @SerializedName(&quot;completion_tokens&quot;)\r\n        private int completionTokens;\r\n\r\n        @SerializedName(&quot;total_tokens&quot;)\r\n        private int totalTokens;\r\n\r\n        // Getters and setters\r\n    }\r\n\r\n    public static class Choice {\r\n        public Choice(Message message, String finishReason, int index) {\r\n            this.message = message;\r\n            this.finishReason = finishReason;\r\n            this.index = index;\r\n        }\r\n\r\n        public void setMessage(Message message) {\r\n            this.message = message;\r\n        }\r\n\r\n        public void setFinishReason(String finishReason) {\r\n            this.finishReason = finishReason;\r\n        }\r\n\r\n        public void setIndex(int index) {\r\n            this.index = index;\r\n        }\r\n\r\n        @SerializedName(&quot;message&quot;)\r\n        private Message message;\r\n\r\n        public Message getMessage() {\r\n            return message;\r\n        }\r\n\r\n        public String getFinishReason() {\r\n            return finishReason;\r\n        }\r\n\r\n        public int getIndex() {\r\n            return index;\r\n        }\r\n\r\n        @SerializedName(&quot;finish_reason&quot;)\r\n        private String finishReason;\r\n\r\n        @SerializedName(&quot;index&quot;)\r\n        private int index;\r\n\r\n        // Getters and setters\r\n    }\r\n\r\n    public static class Message {\r\n        @SerializedName(&quot;role&quot;)\r\n        private String role;\r\n\r\n        public String getContent() {\r\n            return content;\r\n        }\r\n\r\n        public Message(String role, String content) {\r\n            this.role = role;\r\n            this.content = content;\r\n        }\r\n\r\n        public void setRole(String role) {\r\n            this.role = role;\r\n        }\r\n\r\n        public void setContent(String content) {\r\n            this.content = content;\r\n        }\r\n\r\n        @SerializedName(&quot;content&quot;)\r\n        private String content;\r\n\r\n        // Getters and setters\r\n    }\r\n}\r\n```\r\n","title":"Retrofit2 working fine on emulator but after generating signed APK , it gives java.lang.IllegalArgumentException","body":"<p>I want to call OpenAI Chat-gpt-3.5 turbo API using Retrofit in Android Java application for my chat application , but while testing in Android Studio emulator and in debugging devices its working fine ,\nbut in after making a signed APK , while calling the api it start giving error i.e.\njava.lang.IllegalArgumentException: Unable to create call adapter for interface d6.g                                                                                  for method a.a                                                                                at e4.a.O(SourceFile:40)                                                                                at d6.y0.a(SourceFile:2751)                                                                                 at d6.x0.b(SourceFile:25)                                                                           at d6.w0.invoke(SourceFile:45).....\nand  java.lang.IllegalArgumentException: Call return type must be parameterized as Call or Call&lt;? extends Foo&gt;.....\nPlease if anybody know the problem help me solve this , i tried every possible solution available ,\nalso i am begineer in using retrofit</p>\n<p>//here is my request function :</p>\n<pre><code>private void sendRequest(String query) {\n        JSONObject jsonObject = new JSONObject();\n        try {\n            jsonObject.put ( &quot;model&quot;,&quot;gpt-3.5-turbo&quot; );\n            JSONArray jsonArray = new JSONArray ();\n            JSONObject jsonObject1 = new JSONObject ();\n            jsonObject1.put ( &quot;role&quot;,&quot;system&quot; );\n            jsonObject1.put ( &quot;content&quot;,query );\n            jsonArray.put ( 0, jsonObject1);\n            jsonObject.put(&quot;messages&quot;,jsonArray);\n\n        } catch (JSONException e) {\n            Log.d ( TAG,e.getMessage () );\n            throw new RuntimeException ( e );\n        }\n        RequestBody requestBody = new RequestBody() {\n            @Override\n            public MediaType contentType() {\n                return MediaType.parse(&quot;application/json&quot;);\n            }\n\n            @Override\n            public void writeTo(BufferedSink sink) throws IOException {\n                sink.writeUtf8(jsonObject.toString());\n            }\n        };\n        Call&lt;ChatCompletionResponse&gt; call = RetrofitInstance.getInstance ().apiInterface.getData ( requestBody );\n        call.enqueue ( new Callback&lt;ChatCompletionResponse&gt; () {\n            @Override\n            public void onResponse(@NonNull Call&lt;ChatCompletionResponse&gt; call, @NonNull Response&lt;ChatCompletionResponse&gt; response) {\n                if(response.isSuccessful ()){\n                    assert response.body () != null;\n                    String content = response.body ().getChoices ()[0].getMessage ().getContent ();\n                    TextMessage textMessage = new TextMessage ( user.getUid (),content, CometChatConstants.RECEIVER_TYPE_USER );\n                    textMessage.setSender ( user );\n                    addMessage ( textMessage );\n                    setIndicator ( false );\n                }\n            }\n\n            @Override\n            public void onFailure(@NonNull Call&lt;ChatCompletionResponse&gt; call, @NonNull Throwable t) {\n                Log.d ( TAG,&quot;failurse occued&quot; + t.getMessage () );\n                String msg = &quot;Request failed !!&quot;;\n                TextMessage textMessage = new TextMessage ( logedinuser.getUid (),msg, CometChatConstants.RECEIVER_TYPE_USER );\n                textMessage.setSender ( logedinuser );\n                addMessage ( textMessage );\n            }\n        } );\n    }\n</code></pre>\n<p>// And My RetrofitInstance.java class :</p>\n<pre><code>public class RetrofitInstance {\n    public static RetrofitInstance instance;\n    public APIInterface apiInterface;\n    static String BASE_URL = &quot;https://api.openai.com/v1/chat/&quot;;\n    RetrofitInstance(){\n        OkHttpClient client = new OkHttpClient.Builder()\n                .addInterceptor(new Interceptor () {\n                    @NonNull\n                    @Override\n                    public Response intercept(@NonNull Chain chain) throws IOException {\n                        Request newRequest = chain.request().newBuilder()\n                                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + AppKeys.GPT_TOKEN )\n                                .build();\n                        return chain.proceed(newRequest);\n                    }\n                })\n                .build();\n\n\n        apiInterface = new Retrofit.Builder ()\n                .client ( client )\n                .baseUrl ( BASE_URL )\n                .addConverterFactory ( GsonConverterFactory.create () )\n                .build ().create ( APIInterface.class );\n    }\n    public static RetrofitInstance getInstance(){\n        if(instance == null){\n            instance = new RetrofitInstance ();\n        }\n        return instance;\n    }\n}\n</code></pre>\n<p>// My API Interface :</p>\n<pre><code>public interface APIInterface {\n    @POST(&quot;completions&quot;)\n    Call&lt;ChatCompletionResponse&gt; getData(\n            @Body RequestBody body\n    );\n}\n\n</code></pre>\n<p>//And ChatCompletionResponse.java class :</p>\n<pre><code>\npublic class ChatCompletionResponse {\n    public String getId() {\n        return id;\n    }\n\n    public String getObject() {\n        return object;\n    }\n\n    public long getCreated() {\n        return created;\n    }\n\n    public String getModel() {\n        return model;\n    }\n\n    public UsageData getUsage() {\n        return usage;\n    }\n\n    public Choice[] getChoices() {\n        return choices;\n    }\n\n    @SerializedName(&quot;id&quot;)\n    private String id;\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public void setObject(String object) {\n        this.object = object;\n    }\n\n    public void setCreated(long created) {\n        this.created = created;\n    }\n\n    public void setModel(String model) {\n        this.model = model;\n    }\n\n    public void setUsage(UsageData usage) {\n        this.usage = usage;\n    }\n\n    public void setChoices(Choice[] choices) {\n        this.choices = choices;\n    }\n\n    @SerializedName(&quot;object&quot;)\n    private String object;\n\n    @SerializedName(&quot;created&quot;)\n    private long created;\n\n    public ChatCompletionResponse(String id, String object, long created, String model, UsageData usage, Choice[] choices) {\n        this.id = id;\n        this.object = object;\n        this.created = created;\n        this.model = model;\n        this.usage = usage;\n        this.choices = choices;\n    }\n\n    @SerializedName(&quot;model&quot;)\n    private String model;\n\n    @SerializedName(&quot;usage&quot;)\n    private UsageData usage;\n\n    @SerializedName(&quot;choices&quot;)\n    private Choice[] choices;\n\n    // Getters and setters\n\n    public static class UsageData {\n        @SerializedName(&quot;prompt_tokens&quot;)\n        private int promptTokens;\n\n        @SerializedName(&quot;completion_tokens&quot;)\n        private int completionTokens;\n\n        @SerializedName(&quot;total_tokens&quot;)\n        private int totalTokens;\n\n        // Getters and setters\n    }\n\n    public static class Choice {\n        public Choice(Message message, String finishReason, int index) {\n            this.message = message;\n            this.finishReason = finishReason;\n            this.index = index;\n        }\n\n        public void setMessage(Message message) {\n            this.message = message;\n        }\n\n        public void setFinishReason(String finishReason) {\n            this.finishReason = finishReason;\n        }\n\n        public void setIndex(int index) {\n            this.index = index;\n        }\n\n        @SerializedName(&quot;message&quot;)\n        private Message message;\n\n        public Message getMessage() {\n            return message;\n        }\n\n        public String getFinishReason() {\n            return finishReason;\n        }\n\n        public int getIndex() {\n            return index;\n        }\n\n        @SerializedName(&quot;finish_reason&quot;)\n        private String finishReason;\n\n        @SerializedName(&quot;index&quot;)\n        private int index;\n\n        // Getters and setters\n    }\n\n    public static class Message {\n        @SerializedName(&quot;role&quot;)\n        private String role;\n\n        public String getContent() {\n            return content;\n        }\n\n        public Message(String role, String content) {\n            this.role = role;\n            this.content = content;\n        }\n\n        public void setRole(String role) {\n            this.role = role;\n        }\n\n        public void setContent(String content) {\n            this.content = content;\n        }\n\n        @SerializedName(&quot;content&quot;)\n        private String content;\n\n        // Getters and setters\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","class-diagram"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1686666507,"post_id":76465638,"comment_id":134828532,"body_markdown":"start with the inventory - that&#39;s your data model. I&#39;m not sure you need a separate sales management class; instead, you need functionality for moving products in and out which maybe you could define through interfaces. Finally, give your admin and director the proper interfaces for the functionality they should have","body":"start with the inventory - that&#39;s your data model. I&#39;m not sure you need a separate sales management class; instead, you need functionality for moving products in and out which maybe you could define through interfaces. Finally, give your admin and director the proper interfaces for the functionality they should have"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1686666744,"post_id":76465638,"comment_id":134828605,"body_markdown":"I wouldn&#39;t have a separate Login class - you can use a JPanel with JOptionPane to get login information, or you could use this: https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/dialogs/ParamDialog.java","body":"I wouldn&#39;t have a separate Login class - you can use a JPanel with JOptionPane to get login information, or you could use this: <a href=\"https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/dialogs/ParamDialog.java\" rel=\"nofollow noreferrer\">sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/dialogs/&hellip;</a>"},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686672953,"post_id":76465638,"comment_id":134830182,"body_markdown":"I don&#39;t understand why not just have a User class with an admin/director attribute.","body":"I don&#39;t understand why not just have a User class with an admin/director attribute."},{"owner":{"account_id":27971545,"reputation":11,"user_id":21361160,"display_name":"TrignoLord"},"score":0,"creation_date":1686693663,"post_id":76465638,"comment_id":134833881,"body_markdown":"But then how do I deal with different interfaces between the admin and director after having an user class with an admin/director","body":"But then how do I deal with different interfaces between the admin and director after having an user class with an admin/director"},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686709187,"post_id":76465638,"comment_id":134835187,"body_markdown":"That&#39;s a different question.  Create a `JFrame` with a main `JPanel` using a `CardLayout`.  Create `JPanels` for both the admin and director.  Show the admin `JPanels` for the admin and the director `JPanels` for the director.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.","body":"That&#39;s a different question.  Create a <code>JFrame</code> with a main <code>JPanel</code> using a <code>CardLayout</code>.  Create <code>JPanels</code> for both the admin and director.  Show the admin <code>JPanels</code> for the admin and the director <code>JPanels</code> for the director.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686735583,"post_id":76465638,"comment_id":134838856,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27971545,"reputation":11,"user_id":21361160,"display_name":"TrignoLord"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686664171,"creation_date":1686664171,"question_id":76465638,"body_markdown":"So basically I am supposed to create a gui swing project about an inventory and sales management system. So I have multiple interfaces where I can add products and manage stocks and stuff. So the first interface is login which requires the user to select either admin or director. Admin has similar interface and same functionality as director but director has 3 extra interfaces which the admin dont have. So I already have a class called login with attributes username, password and method login(). Idk how do I proceed after this because of the confusion about the two modes.\r\n\r\nSo I tried creating a class each called admin and director and my mind just fell blank. I dont know how to proceed since both of them have a couple of similar interfaces with the same functionality. (Only the design part is different for them). I tried and tried and Im just stuck here. So I have other interfaces like add products, view stocks etc which is included in both the modes with the only difference being the design. Idk how to draw a class diagram for this.","title":"How do I draw a class diagram where theres two user modes which is decided upon login and each user mode have different interfaces","body":"<p>So basically I am supposed to create a gui swing project about an inventory and sales management system. So I have multiple interfaces where I can add products and manage stocks and stuff. So the first interface is login which requires the user to select either admin or director. Admin has similar interface and same functionality as director but director has 3 extra interfaces which the admin dont have. So I already have a class called login with attributes username, password and method login(). Idk how do I proceed after this because of the confusion about the two modes.</p>\n<p>So I tried creating a class each called admin and director and my mind just fell blank. I dont know how to proceed since both of them have a couple of similar interfaces with the same functionality. (Only the design part is different for them). I tried and tried and Im just stuck here. So I have other interfaces like add products, view stocks etc which is included in both the modes with the only difference being the design. Idk how to draw a class diagram for this.</p>\n"},{"tags":["java","maven","compilation","lombok"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686664147,"post_id":76465616,"comment_id":134827988,"body_markdown":"Ctrl-Shift-A -&gt; &quot;plugins&quot; -&gt; find the Lombok plugin -&gt; Update","body":"Ctrl-Shift-A -&gt; &quot;plugins&quot; -&gt; find the Lombok plugin -&gt; Update"}],"owner":{"account_id":28812895,"reputation":1,"user_id":22067217,"display_name":"Anischr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686664017,"creation_date":1686664017,"question_id":76465616,"body_markdown":"I&#39;m trying to compile a java file but I get a lombok error, I searched for a solution and apparenly I got to update lombok.\r\n\r\n\r\nI searched for how to update it on IntelliJ but I didn&#39;t find anything.\r\n\r\nCan someone please help me ?\r\n\r\n[error](https://i.stack.imgur.com/R9XRm.png)\r\n\r\nUnable to make field private com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors com.sun.tools.javac.processing.JavacProcessingEnvironment.discoveredProcs accessible: module jdk.compiler does not &quot;opens com.sun.tools.javac.processing&quot; to unnamed module @265bd546\r\n","title":"Lombok issues compilating my java project","body":"<p>I'm trying to compile a java file but I get a lombok error, I searched for a solution and apparenly I got to update lombok.</p>\n<p>I searched for how to update it on IntelliJ but I didn't find anything.</p>\n<p>Can someone please help me ?</p>\n<p><a href=\"https://i.stack.imgur.com/R9XRm.png\" rel=\"nofollow noreferrer\">error</a></p>\n<p>Unable to make field private com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors com.sun.tools.javac.processing.JavacProcessingEnvironment.discoveredProcs accessible: module jdk.compiler does not &quot;opens com.sun.tools.javac.processing&quot; to unnamed module @265bd546</p>\n"},{"tags":["javascript","java","regex"],"comments":[{"owner":{"account_id":4229706,"reputation":10684,"user_id":3462319,"accept_rate":85,"display_name":"depperm"},"score":3,"creation_date":1614704021,"post_id":66443675,"comment_id":117463879,"body_markdown":"java or javascript? have you made any attempt of this yourself?","body":"java or javascript? have you made any attempt of this yourself?"},{"owner":{"account_id":13685445,"reputation":39,"user_id":9874647,"display_name":"Kush Sharma"},"score":0,"creation_date":1614704496,"post_id":66443675,"comment_id":117464135,"body_markdown":"I am trying in Java. I tried ^//\\\\D+\\\\n.*$ but it doesn&#39;t work. Yeah delimiter can change. Even if we get to match pattern till \\n then also my work is done!","body":"I am trying in Java. I tried ^//\\\\D+\\\\n.*$ but it doesn&#39;t work. Yeah delimiter can change. Even if we get to match pattern till \\n then also my work is done!"}],"answers":[{"tags":[],"owner":{"account_id":8155075,"reputation":15,"user_id":6140924,"display_name":"Nate"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1614705070,"creation_date":1614704492,"answer_id":66443819,"question_id":66443675,"body_markdown":"Sample: `//;\\n2;3;4;5`\r\n\r\nAnswer: `[/]{2}[;]\\\\[n](\\d[;]){1,999}\\d`\r\n\r\nThis will allow further combinations of a decimal followed by ; \r\n\\d is added at the end in the case a semicolon is not added judging by your sample\r\n\r\n","title":"Regex pattern for //;\\n2;3;4","body":"<p>Sample: <code>//;\\n2;3;4;5</code></p>\n<p>Answer: <code>[/]{2}[;]\\\\[n](\\d[;]){1,999}\\d</code></p>\n<p>This will allow further combinations of a decimal followed by ;\n\\d is added at the end in the case a semicolon is not added judging by your sample</p>\n"},{"comments":[{"owner":{"account_id":13685445,"reputation":39,"user_id":9874647,"display_name":"Kush Sharma"},"score":0,"creation_date":1614706042,"post_id":66443832,"comment_id":117464863,"body_markdown":"Basically there is a string which starts with // followed by a delimiter and then in new line, there are any number of numbers seperated by that delimiter. I have to add these numbers. Hence, I need a regex to first find the string is valid and then retrieve the numbers,","body":"Basically there is a string which starts with // followed by a delimiter and then in new line, there are any number of numbers seperated by that delimiter. I have to add these numbers. Hence, I need a regex to first find the string is valid and then retrieve the numbers,"}],"tags":[],"owner":{"account_id":12884078,"reputation":197,"user_id":9318217,"display_name":"Jacob Riches"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1614713423,"creation_date":1614704556,"answer_id":66443832,"question_id":66443675,"body_markdown":"Okay based on your additional comment this could work. It&#39;s very messy but it may just get the job done.\r\n\r\n```\r\nvar string = &quot;//;\\n2;3;4;5&quot;;\r\n\r\nconsole.log(\r\n  \r\n  string.replace(/[^0-9,.]+/g,&quot; &quot;).trim().split(&quot; &quot;).map(function(x){return parseInt(x, 10);}).reduce(function(a, b){return a + b;}, 0)\r\n\r\n);\r\n```\r\nConsole log results in 14","title":"Regex pattern for //;\\n2;3;4","body":"<p>Okay based on your additional comment this could work. It's very messy but it may just get the job done.</p>\n<pre><code>var string = &quot;//;\\n2;3;4;5&quot;;\n\nconsole.log(\n  \n  string.replace(/[^0-9,.]+/g,&quot; &quot;).trim().split(&quot; &quot;).map(function(x){return parseInt(x, 10);}).reduce(function(a, b){return a + b;}, 0)\n\n);\n</code></pre>\n<p>Console log results in 14</p>\n"}],"owner":{"account_id":13685445,"reputation":39,"user_id":9874647,"display_name":"Kush Sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1686663992,"creation_date":1614703960,"question_id":66443675,"body_markdown":"I am trying to find a regex which supports a pattern like below:\r\n1) String starts with //\r\n2) String has a delimiter after //; (suppose ; is the delimiter)\r\n3) String has \\n after demiliter (//;\\n)\r\n4) Finally String contains any number of digits with that delimiter (//;\\n2;3;4;5)\r\n\r\nI tried `^//\\\\D+\\\\n.*$` but it doesn&#39;t work.","title":"Regex pattern for //;\\n2;3;4","body":"<p>I am trying to find a regex which supports a pattern like below:</p>\n<ol>\n<li>String starts with //</li>\n<li>String has a delimiter after //; (suppose ; is the delimiter)</li>\n<li>String has \\n after demiliter (//;\\n)</li>\n<li>Finally String contains any number of digits with that delimiter (//;\\n2;3;4;5)</li>\n</ol>\n<p>I tried <code>^//\\\\D+\\\\n.*$</code> but it doesn't work.</p>\n"},{"tags":["java","exception","error-handling","invariants"],"answers":[{"comments":[{"owner":{"account_id":444530,"reputation":22214,"user_id":836390,"accept_rate":44,"display_name":"joshlf"},"score":0,"creation_date":1372889561,"post_id":17458837,"comment_id":25367841,"body_markdown":"I&#39;m finding many different implementations from various companies - can you provide a link? Thanks.","body":"I&#39;m finding many different implementations from various companies - can you provide a link? Thanks."},{"owner":{"account_id":126748,"reputation":5288,"user_id":323447,"accept_rate":92,"display_name":"Paolo Fulgoni"},"score":0,"creation_date":1401441980,"post_id":17458837,"comment_id":36895419,"body_markdown":"I&#39;m not sure the definition of `IllegalStateException` fits very well with the invariant issue: `method has been invoked at an illegal or inappropriate time`.","body":"I&#39;m not sure the definition of <code>IllegalStateException</code> fits very well with the invariant issue: <code>method has been invoked at an illegal or inappropriate time</code>."}],"tags":[],"owner":{"account_id":2468174,"reputation":9217,"user_id":2150749,"accept_rate":100,"display_name":"Jashaszun"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686663928,"creation_date":1372888875,"answer_id":17458837,"question_id":17458812,"body_markdown":"Throw an [`IllegalStateException`](https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html). It is meant specifically for purposes like this.","title":"Java invariant exception","body":"<p>Throw an <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html\" rel=\"nofollow noreferrer\"><code>IllegalStateException</code></a>. It is meant specifically for purposes like this.</p>\n"},{"comments":[{"owner":{"account_id":444530,"reputation":22214,"user_id":836390,"accept_rate":44,"display_name":"joshlf"},"score":0,"creation_date":1372892255,"post_id":17459262,"comment_id":25368656,"body_markdown":"Hey, I just clarified my question a bit in response to your answer (which, given what I&#39;d written before, was totally reasonable, and still is). According to the documentation: &quot;Signals that a method has been invoked at an illegal or inappropriate time.&quot; This isn&#39;t quite the right thing, since it&#39;s not that this variable shouldn&#39;t have this value right /now/, but rather that it should /never/ have that value. Still, it&#39;s really close. It&#39;s almost the right thing, just not quite.","body":"Hey, I just clarified my question a bit in response to your answer (which, given what I&#39;d written before, was totally reasonable, and still is). According to the documentation: &quot;Signals that a method has been invoked at an illegal or inappropriate time.&quot; This isn&#39;t quite the right thing, since it&#39;s not that this variable shouldn&#39;t have this value right /now/, but rather that it should /never/ have that value. Still, it&#39;s really close. It&#39;s almost the right thing, just not quite."},{"owner":{"account_id":53013,"reputation":3590,"user_id":158508,"accept_rate":62,"display_name":"diy"},"score":0,"creation_date":1372893432,"post_id":17459262,"comment_id":25369011,"body_markdown":"Ok.Why won&#39;t you try the following : Split the computation in a sequence of logical methods.Each method would use the data from previous steps, but perform checks on it first and throw IllegalArgumentException if check fails.Constructors for the initial set of values should do the same to check that they got right input parameters.This way you&#39;ll have ensure that on each step you&#39;ll have correct inputs","body":"Ok.Why won&#39;t you try the following : Split the computation in a sequence of logical methods.Each method would use the data from previous steps, but perform checks on it first and throw IllegalArgumentException if check fails.Constructors for the initial set of values should do the same to check that they got right input parameters.This way you&#39;ll have ensure that on each step you&#39;ll have correct inputs"},{"owner":{"account_id":444530,"reputation":22214,"user_id":836390,"accept_rate":44,"display_name":"joshlf"},"score":0,"creation_date":1373249704,"post_id":17459262,"comment_id":25472198,"body_markdown":"In this particular context, that wouldn&#39;t work, but I like the idea in theory. In any case, I think I&#39;m going to go with IllegalStateException because it&#39;s the closest that I&#39;ve found.","body":"In this particular context, that wouldn&#39;t work, but I like the idea in theory. In any case, I think I&#39;m going to go with IllegalStateException because it&#39;s the closest that I&#39;ve found."}],"tags":[],"owner":{"account_id":53013,"reputation":3590,"user_id":158508,"accept_rate":62,"display_name":"diy"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372891448,"creation_date":1372891448,"answer_id":17459262,"question_id":17458812,"body_markdown":"Deciding how your application would react to a broken invariant would be a sensible first step \r\n\r\nIn case a broken invariant is unrecoverable and basically means a bug a code, i second an answer about [IllegalStateException.html][1] (you may want to add some useful context for debug purposes ,e.g. variables in broken invariant) - such unchecked exception would stop a running thread \r\n\r\nIn case you can recover from broken invariant (by replacing some arguments with sensible default, giving it a second try) - you may want to throw a checked exception and catch it on one of upper layers and execute plan B\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html","title":"Java invariant exception","body":"<p>Deciding how your application would react to a broken invariant would be a sensible first step </p>\n\n<p>In case a broken invariant is unrecoverable and basically means a bug a code, i second an answer about <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html\" rel=\"nofollow\">IllegalStateException.html</a> (you may want to add some useful context for debug purposes ,e.g. variables in broken invariant) - such unchecked exception would stop a running thread </p>\n\n<p>In case you can recover from broken invariant (by replacing some arguments with sensible default, giving it a second try) - you may want to throw a checked exception and catch it on one of upper layers and execute plan B</p>\n"}],"owner":{"account_id":444530,"reputation":22214,"user_id":836390,"accept_rate":44,"display_name":"joshlf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1392,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17458837,"answer_count":2,"score":2,"last_activity_date":1686663928,"creation_date":1372888731,"question_id":17458812,"body_markdown":"I have a project in which certain data has invariants which are not enforceable using language constructs, but I&#39;ve intended to write my code such that they are maintained. If they are for some reason broken, it means that my code is buggy. I have some sanity check code which can discover if these invariants have been broken, but I&#39;m not sure what is the canonical Java approach to responding to such a condition - is there some standard exception that I should throw? Use an assert?\r\n\r\nNote that this is an issue of a value being set incorrectly at some point. The error itself does not occur at the time of the sanity check, but rather it occurred in the past, and the sanity check is just now discovering it (ie, it&#39;s not bad that the sanity check itself is running, it&#39;s just bad that the check failed).","title":"Java invariant exception","body":"<p>I have a project in which certain data has invariants which are not enforceable using language constructs, but I've intended to write my code such that they are maintained. If they are for some reason broken, it means that my code is buggy. I have some sanity check code which can discover if these invariants have been broken, but I'm not sure what is the canonical Java approach to responding to such a condition - is there some standard exception that I should throw? Use an assert?</p>\n<p>Note that this is an issue of a value being set incorrectly at some point. The error itself does not occur at the time of the sanity check, but rather it occurred in the past, and the sanity check is just now discovering it (ie, it's not bad that the sanity check itself is running, it's just bad that the check failed).</p>\n"},{"tags":["java","picocli"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686663112,"creation_date":1686656655,"answer_id":76464590,"question_id":76464552,"body_markdown":"This looks like it&#39;s almost certainly a matter of your shell&#39;s handling of the command line argument rather than anything to do with Java or picocli. You can validate that by just echoing the command line argument:\r\n\r\n```sh\r\n$ echo &quot;test23$34&quot;\r\ntest234\r\n```\r\n\r\nAssuming something like bash, either use single quotes around the password to prevent variable substitution: `&#39;test23$34&#39;` or escape the dollar with a backslash: `&quot;test23\\$34&quot;`.\r\n\r\n\r\n\r\n","title":"PicoCLI ignoring dollar sign in a given string","body":"<p>This looks like it's almost certainly a matter of your shell's handling of the command line argument rather than anything to do with Java or picocli. You can validate that by just echoing the command line argument:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ echo &quot;test23$34&quot;\ntest234\n</code></pre>\n<p>Assuming something like bash, either use single quotes around the password to prevent variable substitution: <code>'test23$34'</code> or escape the dollar with a backslash: <code>&quot;test23\\$34&quot;</code>.</p>\n"}],"owner":{"account_id":1836887,"reputation":147,"user_id":1667075,"accept_rate":25,"display_name":"Panda1667075"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686663760,"creation_date":1686656388,"question_id":76464552,"body_markdown":"I am using picocli as a utility to encrypt a given password. In my CLI, I have the option to pass the password String, and a key file. The key file will be used to encrypt the password string.\r\n\r\nWhen the password string is containing a dollar ($) sign, picocli is ignoring it.\r\n\r\nFor example,\r\n\r\n&lt;code&gt;java -jar encryption.jar passwd-enc -password &quot;test23$34&quot; -key /user/local/key.txt.&lt;/code&gt;\r\n\r\nThe password parsed by *java* is **&quot;test234&quot;** instead of **&quot;test23$34&quot;**.\r\n\r\nHow can I solve this?\r\n\r\n","title":"PicoCLI ignoring dollar sign in a given string","body":"<p>I am using picocli as a utility to encrypt a given password. In my CLI, I have the option to pass the password String, and a key file. The key file will be used to encrypt the password string.</p>\n<p>When the password string is containing a dollar ($) sign, picocli is ignoring it.</p>\n<p>For example,</p>\n<p><code>java -jar encryption.jar passwd-enc -password &quot;test23$34&quot; -key /user/local/key.txt.</code></p>\n<p>The password parsed by <em>java</em> is <strong>&quot;test234&quot;</strong> instead of <strong>&quot;test23$34&quot;</strong>.</p>\n<p>How can I solve this?</p>\n"},{"tags":["java","maven","bouncycastle"],"owner":{"account_id":14424776,"reputation":199,"user_id":10419901,"display_name":"Renee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686663430,"creation_date":1686663430,"question_id":76465534,"body_markdown":"I am working on a jar file in java. To work on that I need bouncy castle installed. I will later convert this into java google cloud function so I don&#39;t want any dependency with the system. When I try to run my project I am getting the mentioned error.\r\n\r\nI have created a java project using maven. \r\nThis is command I have used:\r\n\r\n```\r\nmvn archetype:generate -DgroupId=com.example -DartifactId=my-function -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\r\n```\r\n\r\nMy java function is (MyFunction.java):\r\n```\r\npackage com.example; \r\n\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider; \r\nimport org.bouncycastle.pqc.jcajce.provider.BouncyCastlePQCProvider; \r\nimport java.io.*; \r\nimport java.security.Security; \r\n\r\npublic class MyFunction { \r\n  @Override public void service() throws IOException { \r\n\r\n    Security.addProvider(new BouncyCastleProvider()); \r\n    Security.addProvider(new BouncyCastlePQCProvider()); \r\n    try { \r\n      String path = &quot;C:\\\\Users\\\\Downloads\\\\temp.jar&quot;; \r\n      ProcessBuilder processBuilder = new ProcessBuilder(&quot;java&quot;,&quot;-jar&quot;,path); \r\n  \r\n      processBuilder.redirectErrorStream(true); \r\n      Process process = processBuilder.start(); \r\n      BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream())); \r\n      StringBuilder op = new StringBuilder(); \r\n      String l; \r\n      while((l = reader.readLine()) != null) { \r\n        op.append(l).append(&quot;\\n&quot;); \r\n      } \r\n      int exitCode = process.waitFor(); \r\n      System.out.println(&quot;Output: \\n&quot; + op.toString()); \r\n    } catch (Exception e) { \r\n      System.out.println(&quot;Error&quot;) \r\n    } \r\n  } \r\n}\r\n```\r\n\r\nI am running the project with commands:\r\n```\r\nmvn clean package\r\nmvn function:run\r\n```\r\n\r\nWhenever I run it I am getting the below message:\r\n``` \r\nJCE cannot authenticate the provider BC \r\n```\r\n\r\nPom file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;my-function&lt;/artifactId&gt;\r\n   &lt;packaging&gt;jar&lt;/packaging&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n  &lt;name&gt;my-function&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.cloud.functions&lt;/groupId&gt;\r\n      &lt;artifactId&gt;functions-framework-api&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0.4&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15to18 --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n      &lt;artifactId&gt;bcprov-jdk15to18&lt;/artifactId&gt;\r\n      &lt;version&gt;1.72&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;artifactSet&gt;\r\n            &lt;excludes&gt;\r\n              &lt;exclude&gt;org.bouncycastle:*:*:*&lt;/exclude&gt;\r\n            &lt;/excludes&gt;\r\n          &lt;/artifactSet&gt;\r\n          &lt;transformers&gt;\r\n            &lt;transformer\r\n                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n              &lt;manifestEntries&gt;\r\n                &lt;Main-Class&gt;com.example.Main&lt;/Main-Class&gt;\r\n                &lt;Class-Path&gt;. ./lib/bcprov-jdk15to18-1.72.jar&lt;/Class-Path&gt;\r\n              &lt;/manifestEntries&gt;\r\n            &lt;/transformer&gt;\r\n          &lt;/transformers&gt;\r\n          &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n          &lt;shadedClassifierName&gt;fat&lt;/shadedClassifierName&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;shade&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n     \r\n      &lt;plugin&gt;\r\n          &lt;groupId&gt;com.google.cloud.functions&lt;/groupId&gt;\r\n          &lt;artifactId&gt;function-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;0.10.0&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n              &lt;functionTarget&gt;com.example.MyFunction&lt;/functionTarget&gt;\r\n          &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nMaven version:  Apache maven 3.8.8\r\nJava version: 17.0.2\r\n\r\nWhat am I doing wrong? I have added registered bouncy castle under security provider and also added bouncy castle as a dependency in pom (as an alternate to adding jar file in installed java folder).","title":"How to resolve JCE cannot authenticate the provider BC?","body":"<p>I am working on a jar file in java. To work on that I need bouncy castle installed. I will later convert this into java google cloud function so I don't want any dependency with the system. When I try to run my project I am getting the mentioned error.</p>\n<p>I have created a java project using maven.\nThis is command I have used:</p>\n<pre><code>mvn archetype:generate -DgroupId=com.example -DartifactId=my-function -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\n</code></pre>\n<p>My java function is (MyFunction.java):</p>\n<pre><code>package com.example; \n\nimport org.bouncycastle.jce.provider.BouncyCastleProvider; \nimport org.bouncycastle.pqc.jcajce.provider.BouncyCastlePQCProvider; \nimport java.io.*; \nimport java.security.Security; \n\npublic class MyFunction { \n  @Override public void service() throws IOException { \n\n    Security.addProvider(new BouncyCastleProvider()); \n    Security.addProvider(new BouncyCastlePQCProvider()); \n    try { \n      String path = &quot;C:\\\\Users\\\\Downloads\\\\temp.jar&quot;; \n      ProcessBuilder processBuilder = new ProcessBuilder(&quot;java&quot;,&quot;-jar&quot;,path); \n  \n      processBuilder.redirectErrorStream(true); \n      Process process = processBuilder.start(); \n      BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream())); \n      StringBuilder op = new StringBuilder(); \n      String l; \n      while((l = reader.readLine()) != null) { \n        op.append(l).append(&quot;\\n&quot;); \n      } \n      int exitCode = process.waitFor(); \n      System.out.println(&quot;Output: \\n&quot; + op.toString()); \n    } catch (Exception e) { \n      System.out.println(&quot;Error&quot;) \n    } \n  } \n}\n</code></pre>\n<p>I am running the project with commands:</p>\n<pre><code>mvn clean package\nmvn function:run\n</code></pre>\n<p>Whenever I run it I am getting the below message:</p>\n<pre><code>JCE cannot authenticate the provider BC \n</code></pre>\n<p>Pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;my-function&lt;/artifactId&gt;\n   &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n  &lt;name&gt;my-function&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.cloud.functions&lt;/groupId&gt;\n      &lt;artifactId&gt;functions-framework-api&lt;/artifactId&gt;\n      &lt;version&gt;1.0.4&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15to18 --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n      &lt;artifactId&gt;bcprov-jdk15to18&lt;/artifactId&gt;\n      &lt;version&gt;1.72&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;artifactSet&gt;\n            &lt;excludes&gt;\n              &lt;exclude&gt;org.bouncycastle:*:*:*&lt;/exclude&gt;\n            &lt;/excludes&gt;\n          &lt;/artifactSet&gt;\n          &lt;transformers&gt;\n            &lt;transformer\n                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n              &lt;manifestEntries&gt;\n                &lt;Main-Class&gt;com.example.Main&lt;/Main-Class&gt;\n                &lt;Class-Path&gt;. ./lib/bcprov-jdk15to18-1.72.jar&lt;/Class-Path&gt;\n              &lt;/manifestEntries&gt;\n            &lt;/transformer&gt;\n          &lt;/transformers&gt;\n          &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n          &lt;shadedClassifierName&gt;fat&lt;/shadedClassifierName&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n     \n      &lt;plugin&gt;\n          &lt;groupId&gt;com.google.cloud.functions&lt;/groupId&gt;\n          &lt;artifactId&gt;function-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;0.10.0&lt;/version&gt;\n          &lt;configuration&gt;\n              &lt;functionTarget&gt;com.example.MyFunction&lt;/functionTarget&gt;\n          &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Maven version:  Apache maven 3.8.8\nJava version: 17.0.2</p>\n<p>What am I doing wrong? I have added registered bouncy castle under security provider and also added bouncy castle as a dependency in pom (as an alternate to adding jar file in installed java folder).</p>\n"},{"tags":["java","spring-boot","maven","soap","jaxb"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686667048,"post_id":76465524,"comment_id":134828699,"body_markdown":"Why do you generate your jaxb classes into `src/main/java` (`&lt;generateDirectory&gt;${project.basedir}/src/main/java&lt;/generateDirectory&gt;`)?","body":"Why do you generate your jaxb classes into <code>src&#47;main&#47;java</code> (<code>&lt;generateDirectory&gt;${project.basedir}&#47;src&#47;main&#47;java&lt;&#47;genera&zwnj;&#8203;teDirectory&gt;</code>)?"},{"owner":{"account_id":1927774,"reputation":13,"user_id":1737835,"display_name":"ram prasad"},"score":0,"creation_date":1686738255,"post_id":76465524,"comment_id":134839414,"body_markdown":"For the first time, I tried without adding &lt;generateDirectory&gt; tag in pom.xml. But getting the same error.","body":"For the first time, I tried without adding &lt;generateDirectory&gt; tag in pom.xml. But getting the same error."},{"owner":{"account_id":1927774,"reputation":13,"user_id":1737835,"display_name":"ram prasad"},"score":0,"creation_date":1686747249,"post_id":76465524,"comment_id":134841385,"body_markdown":"This is the example i am following for my application. https://github.com/spring-guides/gs-consuming-web-service/issues/57 how to add updated plugin jaxb to pom.xml ?","body":"This is the example i am following for my application. <a href=\"https://github.com/spring-guides/gs-consuming-web-service/issues/57\" rel=\"nofollow noreferrer\">github.com/spring-guides/gs-consuming-web-service/issues/57</a> how to add updated plugin jaxb to pom.xml ?"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686811211,"post_id":76465524,"comment_id":134851082,"body_markdown":"You should follow the complete examples: https://github.com/spring-guides/gs-consuming-web-service/tree/main/complete","body":"You should follow the complete examples: <a href=\"https://github.com/spring-guides/gs-consuming-web-service/tree/main/complete\" rel=\"nofollow noreferrer\">github.com/spring-guides/gs-consuming-web-service/tree/main/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":5986634,"reputation":91,"user_id":4704035,"display_name":"Alex Dobrin"},"score":0,"creation_date":1697636258,"post_id":76465524,"comment_id":136304831,"body_markdown":"did you solve the issue? I&#39;m facing the same on spring boot 3.1.1 and java 17","body":"did you solve the issue? I&#39;m facing the same on spring boot 3.1.1 and java 17"}],"owner":{"account_id":1927774,"reputation":13,"user_id":1737835,"display_name":"ram prasad"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1053,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686663340,"creation_date":1686663340,"question_id":76465524,"body_markdown":"Followed the link https://spring.io/guides/gs/consuming-web-service/ to consume SOAP we  b service. it is working with spring boot 2.7.12 and java 11.\r\nI have upgraded spring boot to 3.1.0 and java 11, it is throwing below error\r\n\r\n```\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:772) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:753) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:317) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat com.poc.SpringWebServiceApplication.main(SpringWebServiceApplication.java:14) ~[classes/:na]\r\nCaused by: org.springframework.oxm.UncategorizedMappingException: Unknown JAXB exception\r\n\tat org.springframework.oxm.jaxb.Jaxb2Marshaller.convertJaxbException(Jaxb2Marshaller.java:958) ~[spring-oxm-6.0.8.jar:6.0.8]\r\n\tat org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:716) ~[spring-oxm-6.0.8.jar:6.0.8]\r\n\tat org.springframework.ws.support.MarshallingUtils.marshal(MarshallingUtils.java:80) ~[spring-ws-core-4.0.3.jar:na]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate$2.doWithMessage(WebServiceTemplate.java:399) ~[spring-ws-core-4.0.3.jar:na]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:569) ~[spring-ws-core-4.0.3.jar:na]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:539) ~[spring-ws-core-4.0.3.jar:na]\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:391) ~[spring-ws-core-4.0.3.jar:na]\r\n\tat com.poc.CountryClient.getCountry(CountryClient.java:24) ~[classes/:na]\r\n\tat com.poc.SpringWebServiceApplication.lambda$0(SpringWebServiceApplication.java:25) ~[classes/:na]\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:769) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\t... 5 common frames omitted\r\nCaused by: jakarta.xml.bind.JAXBException: class com.poc.consumingwebservice.wsdl.GetCountryRequest nor any of its super class is known to this context.\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:543) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:444) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:265) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:197) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\r\n\tat org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:712) ~[spring-oxm-6.0.8.jar:6.0.8]\r\n```\r\npom.xml files are \r\n\r\nWorking: spring boot 2.7.12 and java 11 pom file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.12&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.poc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-soap-consumer&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;spring-soap-consumer&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;java11&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;jdk&gt;[11,)&lt;/jdk&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\r\n\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;/dependencies&gt;\r\n\t\t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.14.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;schemaLanguage&gt;WSDL&lt;/schemaLanguage&gt;\r\n\t\t\t\t\t&lt;generatePackage&gt;com.poc.consumingwebservice.wsdl&lt;/generatePackage&gt;\r\n\t\t\t\t\t&lt;schemas&gt;\r\n\t\t\t\t\t\t&lt;schema&gt;\r\n\t\t\t\t\t\t\t&lt;url&gt;http://localhost:8080/ws/countries.wsdl&lt;/url&gt;\r\n\t\t\t\t\t\t&lt;/schema&gt;\r\n\t\t\t\t\t&lt;/schemas&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nNot Working: spring boot 3.1.0 and java 17 pom file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.poc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-web-service&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;spring-web-service&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.14.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;schemaLanguage&gt;WSDL&lt;/schemaLanguage&gt;\r\n\t\t\t\t\t&lt;generateDirectory&gt;${project.basedir}/src/main/java&lt;/generateDirectory&gt;\r\n\t\t\t\t\t&lt;generatePackage&gt;com.poc.consumingwebservice.wsdl&lt;/generatePackage&gt;\r\n\t\t\t\t\t&lt;schemas&gt;\r\n\t\t\t\t\t\t&lt;schema&gt;\r\n\t\t\t\t\t\t\t&lt;url&gt;http://localhost:8080/ws/countries.wsdl&lt;/url&gt;\r\n\t\t\t\t\t\t&lt;/schema&gt;\r\n\t\t\t\t\t&lt;/schemas&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nPlease help me to fix it. Thanks in advance.","title":"jakarta.xml.bind.JAXBException: class com.poc.consumingwebservice.wsdl.GetCountryRequest nor any of its super class is known to this context","body":"<p>Followed the link <a href=\"https://spring.io/guides/gs/consuming-web-service/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/consuming-web-service/</a> to consume SOAP we  b service. it is working with spring boot 2.7.12 and java 11.\nI have upgraded spring boot to 3.1.0 and java 11, it is throwing below error</p>\n<pre><code>\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:772) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:753) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:317) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.6.jar:3.0.6]\n    at com.poc.SpringWebServiceApplication.main(SpringWebServiceApplication.java:14) ~[classes/:na]\nCaused by: org.springframework.oxm.UncategorizedMappingException: Unknown JAXB exception\n    at org.springframework.oxm.jaxb.Jaxb2Marshaller.convertJaxbException(Jaxb2Marshaller.java:958) ~[spring-oxm-6.0.8.jar:6.0.8]\n    at org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:716) ~[spring-oxm-6.0.8.jar:6.0.8]\n    at org.springframework.ws.support.MarshallingUtils.marshal(MarshallingUtils.java:80) ~[spring-ws-core-4.0.3.jar:na]\n    at org.springframework.ws.client.core.WebServiceTemplate$2.doWithMessage(WebServiceTemplate.java:399) ~[spring-ws-core-4.0.3.jar:na]\n    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:569) ~[spring-ws-core-4.0.3.jar:na]\n    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:539) ~[spring-ws-core-4.0.3.jar:na]\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:391) ~[spring-ws-core-4.0.3.jar:na]\n    at com.poc.CountryClient.getCountry(CountryClient.java:24) ~[classes/:na]\n    at com.poc.SpringWebServiceApplication.lambda$0(SpringWebServiceApplication.java:25) ~[classes/:na]\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:769) ~[spring-boot-3.0.6.jar:3.0.6]\n    ... 5 common frames omitted\nCaused by: jakarta.xml.bind.JAXBException: class com.poc.consumingwebservice.wsdl.GetCountryRequest nor any of its super class is known to this context.\n    at org.glassfish.jaxb.runtime.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:543) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\n    at org.glassfish.jaxb.runtime.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:444) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\n    at org.glassfish.jaxb.runtime.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:265) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\n    at org.glassfish.jaxb.runtime.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:197) ~[jaxb-runtime-4.0.2.jar:4.0.2 - d104f19]\n    at org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:712) ~[spring-oxm-6.0.8.jar:6.0.8]\n</code></pre>\n<p>pom.xml files are</p>\n<p>Working: spring boot 2.7.12 and java 11 pom file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.12&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.poc&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-soap-consumer&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-soap-consumer&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;java11&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;jdk&gt;[11,)&lt;/jdk&gt;\n            &lt;/activation&gt;\n\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n                    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.14.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;schemaLanguage&gt;WSDL&lt;/schemaLanguage&gt;\n                    &lt;generatePackage&gt;com.poc.consumingwebservice.wsdl&lt;/generatePackage&gt;\n                    &lt;schemas&gt;\n                        &lt;schema&gt;\n                            &lt;url&gt;http://localhost:8080/ws/countries.wsdl&lt;/url&gt;\n                        &lt;/schema&gt;\n                    &lt;/schemas&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Not Working: spring boot 3.1.0 and java 17 pom file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.poc&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-web-service&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.14.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;schemaLanguage&gt;WSDL&lt;/schemaLanguage&gt;\n                    &lt;generateDirectory&gt;${project.basedir}/src/main/java&lt;/generateDirectory&gt;\n                    &lt;generatePackage&gt;com.poc.consumingwebservice.wsdl&lt;/generatePackage&gt;\n                    &lt;schemas&gt;\n                        &lt;schema&gt;\n                            &lt;url&gt;http://localhost:8080/ws/countries.wsdl&lt;/url&gt;\n                        &lt;/schema&gt;\n                    &lt;/schemas&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Please help me to fix it. Thanks in advance.</p>\n"},{"tags":["java","enums","log4j2"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1686515815,"post_id":76452309,"comment_id":134805448,"body_markdown":"Which signature of `Logger.info` gets called when you don&#39;t call the `toString()` on the enum? I would have expected `Logger.info(String, Object)` with and without the `toString()` method and this should result in the `toString()` method to be called on the `Object` anyways.","body":"Which signature of <code>Logger.info</code> gets called when you don&#39;t call the <code>toString()</code> on the enum? I would have expected <code>Logger.info(String, Object)</code> with and without the <code>toString()</code> method and this should result in the <code>toString()</code> method to be called on the <code>Object</code> anyways."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686520578,"post_id":76452309,"comment_id":134805882,"body_markdown":"@cyberbrain Though that&#39;s likely almost always the case `Logger` is an interface and its [`info(String message, Object p0)`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#info-java.lang.String-java.lang.Object-)&#39;s doc doesn&#39;t say anything about implicit `toString()` in an implementation.","body":"@cyberbrain Though that&#39;s likely almost always the case <code>Logger</code> is an interface and its <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#info-java.lang.String-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>info(String message, Object p0)</code></a>&#39;s doc doesn&#39;t say anything about implicit <code>toString()</code> in an implementation."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1686541329,"post_id":76452309,"comment_id":134807358,"body_markdown":"@GeroldBroser--OnStrike: the Javadoc is underspecified, but for compatibility with the existent implementations `info(String, Object)` should stringify the message like [`ParameterizedMessage#getFormattedMessage()`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/ParameterizedMessage.html) does. Hence a programmer can expect `toString()` to be called.","body":"@GeroldBroser--OnStrike: the Javadoc is underspecified, but for compatibility with the existent implementations <code>info(String, Object)</code> should stringify the message like <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/ParameterizedMessage.html\" rel=\"nofollow noreferrer\"><code>ParameterizedMessage#getFormattedMessage()</code></a> does. Hence a programmer can expect <code>toString()</code> to be called."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686569552,"post_id":76452309,"comment_id":134811756,"body_markdown":"This is an example how sticking to some arbitrary rules dogmatically make a programmer’s life unnecessarily hard. What if you simply used `enum LoggingCategory { CategoryOne, CategoryTwo, CategoryThree}`? Your code would be shorter and you wouldn’t have to think about the difference between the name and the string representation of an enum constant. But well, somebody once said, these constants should have all-uppercase names and so we’re creating more code, just to obey that guy’s rule…","body":"This is an example how sticking to some arbitrary rules dogmatically make a programmer’s life unnecessarily hard. What if you simply used <code>enum LoggingCategory { CategoryOne, CategoryTwo, CategoryThree}</code>? Your code would be shorter and you wouldn’t have to think about the difference between the name and the string representation of an enum constant. But well, somebody once said, these constants should have all-uppercase names and so we’re creating more code, just to obey that guy’s rule…"},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686638253,"post_id":76452309,"comment_id":134822390,"body_markdown":"@Holger This  convention (not rule) absolutly makes sense, especially here at logging, to distinguish classes and domain-specific categories.","body":"@Holger This  convention (not rule) absolutly makes sense, especially here at logging, to distinguish classes and domain-specific categories."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686640457,"post_id":76452309,"comment_id":134822822,"body_markdown":"@GeroldBroser then, it would make more sense to keep the all-uppercase name through all logging layers and especially in text files, as that’s the place where these names would be hardest to distinguish. I was addressing the OP’s case where the logged string is *not* matching the name of the static field. If you prefer, e.g. `enum LoggingCategory { CATEGORY_ONE, CATEGORY_TWO, CATEGORY_THREE }`(again, without a contradicting `toString()` method), I wouldn’t object.","body":"@GeroldBroser then, it would make more sense to keep the all-uppercase name through all logging layers and especially in text files, as that’s the place where these names would be hardest to distinguish. I was addressing the OP’s case where the logged string is <i>not</i> matching the name of the static field. If you prefer, e.g. <code>enum LoggingCategory { CATEGORY_ONE, CATEGORY_TWO, CATEGORY_THREE }</code>(again, without a contradicting <code>toString()</code> method), I wouldn’t object."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686660852,"post_id":76452309,"comment_id":134827190,"body_markdown":"@Holger From this POV you&#39;re right. I, however, had a better approach (in my mind internally, so, agreed, not detectable for others) when writing this comment. See [my answer](https://stackoverflow.com/a/76452493/1744774) herein.","body":"@Holger From this POV you&#39;re right. I, however, had a better approach (in my mind internally, so, agreed, not detectable for others) when writing this comment. See <a href=\"https://stackoverflow.com/a/76452493/1744774\">my answer</a> herein."}],"answers":[{"comments":[{"owner":{"account_id":21720552,"reputation":63,"user_id":16030876,"display_name":"ad_valle"},"score":0,"creation_date":1686514582,"post_id":76452351,"comment_id":134805305,"body_markdown":"The logger is declared properly, here is just an example to clarify that `logger` is a Log4j2 Logger type.\nUnfortunately, it won&#39;t work if I don&#39;t explicitly call `toString`","body":"The logger is declared properly, here is just an example to clarify that <code>logger</code> is a Log4j2 Logger type. Unfortunately, it won&#39;t work if I don&#39;t explicitly call <code>toString</code>"},{"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"score":0,"creation_date":1686514632,"post_id":76452351,"comment_id":134805311,"body_markdown":"I&#39;m not saying it&#39;s not but why are you then need to introduce artificial category and format it manually?","body":"I&#39;m not saying it&#39;s not but why are you then need to introduce artificial category and format it manually?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1686514982,"post_id":76452351,"comment_id":134805351,"body_markdown":"You still could use three different loggers with &quot;MyLogger.CategoryOne&quot;, &quot;MyLogger.CategoryTwo&quot; and &quot;MyLogger.CategoryThree&quot; as names.","body":"You still could use three different loggers with &quot;MyLogger.CategoryOne&quot;, &quot;MyLogger.CategoryTwo&quot; and &quot;MyLogger.CategoryThree&quot; as names."}],"tags":[],"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686515068,"creation_date":1686514468,"answer_id":76452351,"question_id":76452309,"body_markdown":"First of all you should avoid this kind of custom logging and instead use [appropriate factory method][1]\r\n\r\n    private static final Logger logger = LogManager.getLogger(&quot;HelloWorld&quot;);\r\n\r\nThis will add you appropriate identifier in your log message that will work as the category you want to introduce artificially.\r\n\r\nAnyway - due to the good programming practices, however I find using enum here as some kind of overhead then saying that calling `toString` will affect performance is just a nonsense or, more politely saying, [premature optimization.][2] \r\n\r\nNo matter which approach you will use - both are basically just fine and both are probably not really necessary in this particular scenario.\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/api.html\r\n  [2]: https://stackify.com/premature-optimization-evil/","title":"Better approach on use of enum vs class with constants java","body":"<p>First of all you should avoid this kind of custom logging and instead use <a href=\"https://logging.apache.org/log4j/2.x/manual/api.html\" rel=\"nofollow noreferrer\">appropriate factory method</a></p>\n<pre><code>private static final Logger logger = LogManager.getLogger(&quot;HelloWorld&quot;);\n</code></pre>\n<p>This will add you appropriate identifier in your log message that will work as the category you want to introduce artificially.</p>\n<p>Anyway - due to the good programming practices, however I find using enum here as some kind of overhead then saying that calling <code>toString</code> will affect performance is just a nonsense or, more politely saying, <a href=\"https://stackify.com/premature-optimization-evil/\" rel=\"nofollow noreferrer\">premature optimization.</a></p>\n<p>No matter which approach you will use - both are basically just fine and both are probably not really necessary in this particular scenario.</p>\n"},{"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686663220,"creation_date":1686517093,"answer_id":76452493,"question_id":76452309,"body_markdown":"I always like to go with `enum`s whenever possible because of their [type safety][WP]. That doesn&#39;t apply that much to library classes/methods the signature of which you can&#39;t change anyway (which basically is your case). But if it is in _your_ own hands in _your_ code...\r\n\r\nI&#39;d use `enum`&#39;s anyway and declare them just as:\r\n```\r\npublic enum LoggingCategory {\r\n\r\n    ONE,\r\n    TWO,\r\n    THREE,\r\n    ...\r\n}\r\n```\r\nBecause:\r\n\r\n* that each of these represent a category is already stated in the `enum`&#39;s name. Compare the usage `LoggingCategory.CATEGORY_ONE` to `LoggingCategory.ONE`.\r\n* the `enum` doesn&#39;t need the members: variable, constructor, `toString()` since it supplies an implicit [`toString()`][ts] which:\r\n\r\n  &gt; Returns the name of this enum constant, as contained in the declaration. This method may be overridden, though it typically isn&#39;t necessary or desirable. An enum class should override this method when a more &quot;programmer-friendly&quot; string form exists.\r\n* All uppercase for categories&#39; names is better to distinguish them from class names (in the logs).\r\n* If you place your `enum`s in an external (to your business library) _commons_ library they also can be used by others without the burden of importing and referencing (and loading into heap memory implicitily) full-featured business classes.\r\n\r\n[WP]: https://en.wikipedia.org/wiki/Type_safety#Java\r\n[ts]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#toString()\r\n","title":"Better approach on use of enum vs class with constants java","body":"<p>I always like to go with <code>enum</code>s whenever possible because of their <a href=\"https://en.wikipedia.org/wiki/Type_safety#Java\" rel=\"nofollow noreferrer\">type safety</a>. That doesn't apply that much to library classes/methods the signature of which you can't change anyway (which basically is your case). But if it is in <em>your</em> own hands in <em>your</em> code...</p>\n<p>I'd use <code>enum</code>'s anyway and declare them just as:</p>\n<pre><code>public enum LoggingCategory {\n\n    ONE,\n    TWO,\n    THREE,\n    ...\n}\n</code></pre>\n<p>Because:</p>\n<ul>\n<li><p>that each of these represent a category is already stated in the <code>enum</code>'s name. Compare the usage <code>LoggingCategory.CATEGORY_ONE</code> to <code>LoggingCategory.ONE</code>.</p>\n</li>\n<li><p>the <code>enum</code> doesn't need the members: variable, constructor, <code>toString()</code> since it supplies an implicit <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#toString()\" rel=\"nofollow noreferrer\"><code>toString()</code></a> which:</p>\n<blockquote>\n<p>Returns the name of this enum constant, as contained in the declaration. This method may be overridden, though it typically isn't necessary or desirable. An enum class should override this method when a more &quot;programmer-friendly&quot; string form exists.</p>\n</blockquote>\n</li>\n<li><p>All uppercase for categories' names is better to distinguish them from class names (in the logs).</p>\n</li>\n<li><p>If you place your <code>enum</code>s in an external (to your business library) <em>commons</em> library they also can be used by others without the burden of importing and referencing (and loading into heap memory implicitily) full-featured business classes.</p>\n</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":2,"creation_date":1686518910,"post_id":76452557,"comment_id":134805739,"body_markdown":"The difference is probably in the 10s or 100s of nanos. Log4j 2 can print around a million of messages per second and the `toString()` call will certainly not be a bottleneck.","body":"The difference is probably in the 10s or 100s of nanos. Log4j 2 can print around a million of messages per second and the <code>toString()</code> call will certainly not be a bottleneck."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686519821,"post_id":76452557,"comment_id":134805820,"body_markdown":"Re &quot;_an_ enum _object is converted into, at compile time._&quot; – There are no _objects_ (as we know them from a running JRE) at compile time. :) But you&#39;re basically right with: _A `*.class` file with `public static final` fields_.","body":"Re &quot;<i>an</i> enum <i>object is converted into, at compile time.</i>&quot; – There are no <i>objects</i> (as we know them from a running JRE) at compile time. :) But you&#39;re basically right with: <i>A <code>*.class</code> file with <code>public static final</code> fields</i>."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686518471,"creation_date":1686518471,"answer_id":76452557,"question_id":76452309,"body_markdown":"&gt; _&quot;So, is it true? The explicit call of the method affects performance?&quot;_\r\n\r\nThe argument here is whether you&#39;re working in a professional environment or not.\r\n\r\nIf these are merely friends, or acquaintances, who are providing recommendations, then I would simply choose whichever approach offers the more scalable interface, than the other.  \r\nThe mark in performance would be a millisecond measurement.\r\n\r\nIf it _is_ a professional environment, then the latter recommendation is correct; that the _enum_&#39;s conversion to a _String_ will decrease performance.  \r\nThe debate to provide some sort of latency threshold—e.g., 1 ms versus 5 ms—is not a topic, since the performance requirement is simply a standardization among the business.  \r\nIf it can be displayed on a graph, then it&#39;s logical.\r\n\r\nI prefer _enum_ classes, they provide the ability to quickly enumerate a set of unique values, while also creating an easily scalable interface.\r\n\r\nOn the contrary, the first recommendation&amp;mdash;of constant string values&amp;mdash;can be a trivial design practice.\r\n\r\nFor example, in another situation, where you may be storing numerical values, in which their sequencing values are depended on, by calling objects.  \r\nThe scalability is reduced significantly.\r\n\r\nThe _[Pattern](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_ class uses this concept, to define _regular-expression_ modes.  \r\nI&#39;ve also seen it within the _Android API_.  \r\nAnd, if I&#39;m not mistaken, I believe the _[Java AWT](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/package-summary.html)_ framework uses this pattern quite extensively.\r\n\r\nConsider the following.\r\n\r\n```java\r\nstatic int VALUE_A = 1;\r\nstatic int VALUE_B = 2;\r\nstatic int VALUE_C = 3;\r\nstatic int VALUE_D = 4;\r\n```\r\n\r\nIf, in a future version of the program, I need to remove _VALUE_C_, it would require me to now edit the value of _VALUE_D_, along with any subsequent fields.  \r\nWhich, consequently, would error the program at run-time, if not changed.\r\n\r\nSince you are using _String_ values, this isn&#39;t the case.&amp;nbsp; As, you know for a fact that it _will work_, since the scalability isn&#39;t really an issue.  \r\nThis can be analogous to adding an _@SuppressWarnings_ annotation above a statement.  \r\nYou know there is a better design, and are telling the compiler to ignore it.\r\n\r\nAs a final note, I believe that the reason you are being told to choose the more archaic approach is because that is what, essentially, an _enum_ object is converted into, at compile time.  \r\nAn object with static fields.  \r\nDon&#39;t quote me on that.","title":"Better approach on use of enum vs class with constants java","body":"<blockquote>\n<p><em>&quot;So, is it true? The explicit call of the method affects performance?&quot;</em></p>\n</blockquote>\n<p>The argument here is whether you're working in a professional environment or not.</p>\n<p>If these are merely friends, or acquaintances, who are providing recommendations, then I would simply choose whichever approach offers the more scalable interface, than the other.<br />\nThe mark in performance would be a millisecond measurement.</p>\n<p>If it <em>is</em> a professional environment, then the latter recommendation is correct; that the <em>enum</em>'s conversion to a <em>String</em> will decrease performance.<br />\nThe debate to provide some sort of latency threshold—e.g., 1 ms versus 5 ms—is not a topic, since the performance requirement is simply a standardization among the business.<br />\nIf it can be displayed on a graph, then it's logical.</p>\n<p>I prefer <em>enum</em> classes, they provide the ability to quickly enumerate a set of unique values, while also creating an easily scalable interface.</p>\n<p>On the contrary, the first recommendation—of constant string values—can be a trivial design practice.</p>\n<p>For example, in another situation, where you may be storing numerical values, in which their sequencing values are depended on, by calling objects.<br />\nThe scalability is reduced significantly.</p>\n<p>The <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a></em> class uses this concept, to define <em>regular-expression</em> modes.<br />\nI've also seen it within the <em>Android API</em>.<br />\nAnd, if I'm not mistaken, I believe the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/package-summary.html\" rel=\"nofollow noreferrer\">Java AWT</a></em> framework uses this pattern quite extensively.</p>\n<p>Consider the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static int VALUE_A = 1;\nstatic int VALUE_B = 2;\nstatic int VALUE_C = 3;\nstatic int VALUE_D = 4;\n</code></pre>\n<p>If, in a future version of the program, I need to remove <em>VALUE_C</em>, it would require me to now edit the value of <em>VALUE_D</em>, along with any subsequent fields.<br />\nWhich, consequently, would error the program at run-time, if not changed.</p>\n<p>Since you are using <em>String</em> values, this isn't the case.  As, you know for a fact that it <em>will work</em>, since the scalability isn't really an issue.<br />\nThis can be analogous to adding an <em>@SuppressWarnings</em> annotation above a statement.<br />\nYou know there is a better design, and are telling the compiler to ignore it.</p>\n<p>As a final note, I believe that the reason you are being told to choose the more archaic approach is because that is what, essentially, an <em>enum</em> object is converted into, at compile time.<br />\nAn object with static fields.<br />\nDon't quote me on that.</p>\n"},{"comments":[{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686529601,"post_id":76452666,"comment_id":134806450,"body_markdown":"I&#39;m a bit confused, TBH. First you write: &quot;_You should however prefer: ... &lt;enum examples&gt; ..._&quot;. Then you write: &quot;_Using an enum is IMHO an overkill_&quot;. :) +1 anyway.","body":"I&#39;m a bit confused, TBH. First you write: &quot;<i>You should however prefer: ... &lt;enum examples&gt; ...</i>&quot;. Then you write: &quot;<i>Using an enum is IMHO an overkill</i>&quot;. :) +1 anyway."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1686540164,"post_id":76452666,"comment_id":134807282,"body_markdown":"Thanks, I edited the answer to clarify that part. The `toString()` method should never be used explicitly, since it will be called by the backend if the log message is printed. There is even an [OpenRewrite option for that](https://docs.openrewrite.org/recipes/java/logging/parameterizedlogging).","body":"Thanks, I edited the answer to clarify that part. The <code>toString()</code> method should never be used explicitly, since it will be called by the backend if the log message is printed. There is even an <a href=\"https://docs.openrewrite.org/recipes/java/logging/parameterizedlogging\" rel=\"nofollow noreferrer\">OpenRewrite option for that</a>."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686543328,"post_id":76452666,"comment_id":134807463,"body_markdown":"Thanks for that link. But doesn&#39;t the `rewrite.yml` there have an error? [YAML&#39;s Booleans are `true` or `false`](https://yaml.org/spec/1.2.2/#10212-boolean) as usual, not `null`.","body":"Thanks for that link. But doesn&#39;t the <code>rewrite.yml</code> there have an error? <a href=\"https://yaml.org/spec/1.2.2/#10212-boolean\" rel=\"nofollow noreferrer\">YAML&#39;s Booleans are <code>true</code> or <code>false</code></a> as usual, not <code>null</code>."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1686550596,"post_id":76452666,"comment_id":134808064,"body_markdown":"I suppose that OpenRewrite&#39;s parser accepts both YAML booleans and nulls.","body":"I suppose that OpenRewrite&#39;s parser accepts both YAML booleans and nulls."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1686584804,"post_id":76452666,"comment_id":134815458,"body_markdown":"@Holger, oops, I honestly didn&#39;t notice the parentheses.","body":"@Holger, oops, I honestly didn&#39;t notice the parentheses."}],"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686584760,"creation_date":1686520783,"answer_id":76452666,"question_id":76452309,"body_markdown":"The performance of the `toString()` is not an issue. If it has an impact, it is several orders of magnitude smaller than the performance of the logging call.\r\n\r\nUsing an enum is IMHO an overkill, since you don&#39;t really profit from the type safety it introduces. But if you want to use it, you should prefer:\r\n```lang-java\r\nlogger.info(&quot;{}: This is a log&quot;, LoggingCategory.CATEGORY_ONE);\r\n```\r\nover\r\n```lang-java\r\nlogger.info(&quot;{}: This is a log&quot;, LoggingCategory.CATEGORY_ONE.toString());\r\n```\r\nsince the first line will only call `toString()` if `INFO` is enabled.\r\n\r\n### Note about the general approach ###\r\n\r\nAdding the logging category as a string in the message is probably not the best idea, since you lose most filtering features. I would rather use:\r\n\r\n1. Multiple loggers:\r\n   ```lang-java\r\n   public class Loggers {\r\n       public static final Logger CATEGORY_ONE = LogManager.getLogger(&quot;CategoryOne&quot;);\r\n       public static final Logger CATEGORY_TWO = LogManager.getLogger(&quot;CategoryTwo&quot;);\r\n       public static final Logger CATEGORY_THREE = LogManager.getLogger(&quot;CategoryThree&quot;);\r\n       ...\r\n   }\r\n   ```\r\n   Loggers are usually named after the class that uses them, but nothing prevents you from using you own names. They have excellent filtering features and are supported by **all Log4j API backends**. Logging backends are optimized to filter according to logger names.\r\n2. Or I would use markers:\r\n   ```\r\n   public class Markers {\r\n       public static final Marker CATEGORY_ONE = MarkerManager.getMarker(&quot;CategoryOne&quot;);\r\n       public static final Marker CATEGORY_TWO = MarkerManager.getMarker(&quot;CategoryTwo&quot;);\r\n       public static final Marker CATEGORY_THREE = MarkerManager.getMarker(&quot;CategoryThree&quot;);\r\n       ...\r\n   }\r\n   ```\r\n   that you can use as:\r\n   ```lang-java\r\n   logger.info(Markers.CATEGORY_ONE, &quot;This is a log&quot;);\r\n   ```\r\n   These are only supported by Logback and Log4j 2.x Core, but still offer adequate filtering features, although these come at a slight performance cost.","title":"Better approach on use of enum vs class with constants java","body":"<p>The performance of the <code>toString()</code> is not an issue. If it has an impact, it is several orders of magnitude smaller than the performance of the logging call.</p>\n<p>Using an enum is IMHO an overkill, since you don't really profit from the type safety it introduces. But if you want to use it, you should prefer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>logger.info(&quot;{}: This is a log&quot;, LoggingCategory.CATEGORY_ONE);\n</code></pre>\n<p>over</p>\n<pre class=\"lang-java prettyprint-override\"><code>logger.info(&quot;{}: This is a log&quot;, LoggingCategory.CATEGORY_ONE.toString());\n</code></pre>\n<p>since the first line will only call <code>toString()</code> if <code>INFO</code> is enabled.</p>\n<h3>Note about the general approach</h3>\n<p>Adding the logging category as a string in the message is probably not the best idea, since you lose most filtering features. I would rather use:</p>\n<ol>\n<li>Multiple loggers:\n<pre class=\"lang-java prettyprint-override\"><code>public class Loggers {\n    public static final Logger CATEGORY_ONE = LogManager.getLogger(&quot;CategoryOne&quot;);\n    public static final Logger CATEGORY_TWO = LogManager.getLogger(&quot;CategoryTwo&quot;);\n    public static final Logger CATEGORY_THREE = LogManager.getLogger(&quot;CategoryThree&quot;);\n    ...\n}\n</code></pre>\nLoggers are usually named after the class that uses them, but nothing prevents you from using you own names. They have excellent filtering features and are supported by <strong>all Log4j API backends</strong>. Logging backends are optimized to filter according to logger names.</li>\n<li>Or I would use markers:\n<pre><code>public class Markers {\n    public static final Marker CATEGORY_ONE = MarkerManager.getMarker(&quot;CategoryOne&quot;);\n    public static final Marker CATEGORY_TWO = MarkerManager.getMarker(&quot;CategoryTwo&quot;);\n    public static final Marker CATEGORY_THREE = MarkerManager.getMarker(&quot;CategoryThree&quot;);\n    ...\n}\n</code></pre>\nthat you can use as:\n<pre class=\"lang-java prettyprint-override\"><code>logger.info(Markers.CATEGORY_ONE, &quot;This is a log&quot;);\n</code></pre>\nThese are only supported by Logback and Log4j 2.x Core, but still offer adequate filtering features, although these come at a slight performance cost.</li>\n</ol>\n"}],"owner":{"account_id":21720552,"reputation":63,"user_id":16030876,"display_name":"ad_valle"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1686663220,"creation_date":1686513712,"question_id":76452309,"body_markdown":"I&#39;m still learning Java, and I have an issue where two, more experienced, engineers are asking me to follow two different approaches.\r\nI&#39;d like an opinion from more experienced java developers to choose one or the other approach and being able to defend that choice.\r\n\r\nWe&#39;re logging events using `Log4j2`. I&#39;ve been asked to add categories to each log, as a prefix, as a way to tell where that log was created.\r\n\r\nTo avoid writing the category each time I was asked first to use a class, something like\r\n\r\n    public class LogCategory()\r\n    {\r\n        public static final String CATEGORY_ONE   = &quot;CategoryOne&quot;;\r\n        public static final String CATEGORY_TWO   = &quot;CategoryTwo&quot;;\r\n        public static final String CATEGORY_THREE = &quot;CategoryThree&quot;;\r\n        ...\r\n    }\r\n     \r\nAnd it will be called using a `log4j2` logger like\r\n\r\n    private Logger logger = LogManager.getLogger(&quot;MyLogger&quot;);\r\n    logger.info(&quot;{}: This is a log&quot;, LogCategory.CATEGORY_ONE);\r\n\r\nThe`{}` works as the placeholder to prefix the string.\r\n\r\nthis method works fine. But then, another engineer asked me to replace that class for an enum, since this would be what the enum should be used for.\r\nThe enum was then declared like this\r\n\r\n    public enum LoggingCategory \r\n    {\r\n        CATEGORY_ONE(&quot;CategoryOne&quot;),\r\n        CATEGORY_TWO(&quot;CategoryTwo&quot;),\r\n        CATEGORY_THREE(&quot;CategoryThree&quot;),\r\n        ...\r\n\r\n        private final String str;\r\n\r\n        LoggingCategory(final String str)\r\n        {\r\n            this.str = str;\r\n        }\r\n\r\n\r\n        @Override\r\n        public String toString()\r\n        {\r\n            return str;\r\n        }\r\n    }\r\n\r\nBut due to the multiple signature that `log4j2` has for loggin methods, the `toString` method won&#39;t work unless explicitly called.\r\nAnd it will be called using a `log4j2` logger like\r\n\r\n    private Logger logger = LogManager.getLogger(&quot;MyLogger&quot;);\r\n    logger.info(&quot;{}: This is a log&quot;, LoggingCategory.CATEGORY_ONE.toString());\r\n\r\nNow I&#39;ve been told that this explicit call of the `toString` method will affect performance, and it would be better to go back to the class.\r\n\r\nSo, is it true? The explicit call of the method affects performance?","title":"Better approach on use of enum vs class with constants java","body":"<p>I'm still learning Java, and I have an issue where two, more experienced, engineers are asking me to follow two different approaches.\nI'd like an opinion from more experienced java developers to choose one or the other approach and being able to defend that choice.</p>\n<p>We're logging events using <code>Log4j2</code>. I've been asked to add categories to each log, as a prefix, as a way to tell where that log was created.</p>\n<p>To avoid writing the category each time I was asked first to use a class, something like</p>\n<pre><code>public class LogCategory()\n{\n    public static final String CATEGORY_ONE   = &quot;CategoryOne&quot;;\n    public static final String CATEGORY_TWO   = &quot;CategoryTwo&quot;;\n    public static final String CATEGORY_THREE = &quot;CategoryThree&quot;;\n    ...\n}\n \n</code></pre>\n<p>And it will be called using a <code>log4j2</code> logger like</p>\n<pre><code>private Logger logger = LogManager.getLogger(&quot;MyLogger&quot;);\nlogger.info(&quot;{}: This is a log&quot;, LogCategory.CATEGORY_ONE);\n</code></pre>\n<p>The<code>{}</code> works as the placeholder to prefix the string.</p>\n<p>this method works fine. But then, another engineer asked me to replace that class for an enum, since this would be what the enum should be used for.\nThe enum was then declared like this</p>\n<pre><code>public enum LoggingCategory \n{\n    CATEGORY_ONE(&quot;CategoryOne&quot;),\n    CATEGORY_TWO(&quot;CategoryTwo&quot;),\n    CATEGORY_THREE(&quot;CategoryThree&quot;),\n    ...\n\n    private final String str;\n\n    LoggingCategory(final String str)\n    {\n        this.str = str;\n    }\n\n\n    @Override\n    public String toString()\n    {\n        return str;\n    }\n}\n</code></pre>\n<p>But due to the multiple signature that <code>log4j2</code> has for loggin methods, the <code>toString</code> method won't work unless explicitly called.\nAnd it will be called using a <code>log4j2</code> logger like</p>\n<pre><code>private Logger logger = LogManager.getLogger(&quot;MyLogger&quot;);\nlogger.info(&quot;{}: This is a log&quot;, LoggingCategory.CATEGORY_ONE.toString());\n</code></pre>\n<p>Now I've been told that this explicit call of the <code>toString</code> method will affect performance, and it would be better to go back to the class.</p>\n<p>So, is it true? The explicit call of the method affects performance?</p>\n"},{"tags":["java","spring-boot","intellij-idea","jetbrains-ide"],"comments":[{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":1,"creation_date":1533917943,"post_id":51790354,"comment_id":90538322,"body_markdown":"Try to reinstall Intellij IDEA. When installing, he asks about install the &quot;Coverage&quot; plugin.","body":"Try to reinstall Intellij IDEA. When installing, he asks about install the &quot;Coverage&quot; plugin."},{"owner":{"account_id":1441892,"reputation":13687,"user_id":1361787,"accept_rate":68,"display_name":"ChiefTwoPencils"},"score":1,"creation_date":1533918482,"post_id":51790354,"comment_id":90538616,"body_markdown":"If it&#39;s a matter of the plugin not being installed, you don&#39;t have to reinstall the IDE to solve it...just install the plugin.","body":"If it&#39;s a matter of the plugin not being installed, you don&#39;t have to reinstall the IDE to solve it...just install the plugin."},{"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"score":1,"creation_date":1533919476,"post_id":51790354,"comment_id":90539058,"body_markdown":"@ChiefTwoPencils Guys the coverage plugin is already installed, see my edit !","body":"@ChiefTwoPencils Guys the coverage plugin is already installed, see my edit !"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1533929906,"post_id":51790354,"comment_id":90543697,"body_markdown":"@K.Ayoub please share [Minimal, Complete, and Verifiable example](http://stackoverflow.com/help/mcve).","body":"@K.Ayoub please share <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."},{"owner":{"account_id":1302409,"reputation":5542,"user_id":1252056,"accept_rate":91,"display_name":"streetturtle"},"score":0,"creation_date":1534187384,"post_id":51790354,"comment_id":90612530,"body_markdown":"I ran tests with coverage of the SpringBoot app with IntelliJ IDEA **2018.2** (Build #IU-182.3684.101, built on July 24, 2018) and then with IntelliJ IDEA **2018.2.1** (Build #IU-182.3911.36, built on August 6, 2018) Coverage window showed in both cases. So it doesn&#39;t look like an update issue.","body":"I ran tests with coverage of the SpringBoot app with IntelliJ IDEA <b>2018.2</b> (Build #IU-182.3684.101, built on July 24, 2018) and then with IntelliJ IDEA <b>2018.2.1</b> (Build #IU-182.3911.36, built on August 6, 2018) Coverage window showed in both cases. So it doesn&#39;t look like an update issue."},{"owner":{"account_id":3169,"reputation":24414,"user_id":4510,"display_name":"Bas Leijdekkers"},"score":0,"creation_date":1534278341,"post_id":51790354,"comment_id":90651744,"body_markdown":"Have you tried the `Analyze | Show Coverage Data...` menu item?","body":"Have you tried the <code>Analyze | Show Coverage Data...</code> menu item?"},{"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"score":0,"creation_date":1534279443,"post_id":51790354,"comment_id":90652213,"body_markdown":"@BasLeijdekkers yes it gives me &quot;No coverage suites configured&quot;","body":"@BasLeijdekkers yes it gives me &quot;No coverage suites configured&quot;"},{"owner":{"account_id":6000533,"reputation":1215,"user_id":4713952,"display_name":"Jacob Lockard"},"score":0,"creation_date":1637423696,"post_id":51790354,"comment_id":123824828,"body_markdown":"In case anyone else ran into this: In my case, that plugin had become disabled after my JetBrains subscription temporarily expired. I had to re-enable it and then re-activate it.","body":"In case anyone else ran into this: In my case, that plugin had become disabled after my JetBrains subscription temporarily expired. I had to re-enable it and then re-activate it."}],"answers":[{"comments":[{"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"score":2,"creation_date":1533922136,"post_id":51791220,"comment_id":90540227,"body_markdown":"Thanks for your answer, i checked all what&#39;s you say but nothing works.","body":"Thanks for your answer, i checked all what&#39;s you say but nothing works."},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1533922185,"post_id":51791220,"comment_id":90540251,"body_markdown":"@K.Ayoub are you running IntelliJ on some kind of ancient JDK 6 or beading edge JDK 10/11?","body":"@K.Ayoub are you running IntelliJ on some kind of ancient JDK 6 or beading edge JDK 10/11?"},{"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"score":0,"creation_date":1533922361,"post_id":51791220,"comment_id":90540320,"body_markdown":"I&#39;m running Intellij on JDK 10","body":"I&#39;m running Intellij on JDK 10"},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1533922418,"post_id":51791220,"comment_id":90540355,"body_markdown":"@K.Ayoub coverage is based on bytecode instrumentation or other low level JDK features. Try downgrading to 8 or 9 and see if it helps with this particular plugin.","body":"@K.Ayoub coverage is based on bytecode instrumentation or other low level JDK features. Try downgrading to 8 or 9 and see if it helps with this particular plugin."}],"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1533921621,"creation_date":1533921277,"answer_id":51791220,"question_id":51790354,"body_markdown":"Potentially the Coverage plugin is installed but disabled on your machine e.g. IntelliJ wasn&#39;t restarted after plugin was enabled. Try restarting after double checking that Coverage plugin is enabled. As per [IntelliJ Code Coverage docs][1]:\r\n\r\n&gt; Prerequisite\r\n&gt; ---\r\n&gt; Make sure the Code Coverage plugin is enabled. The plugin is activated by default. If the plugin is disabled, enable it on the Plugins settings page as described in Managing Plugins. If the plugin is disabled, the code coverage tabs will not be visible in the run/debug configuration dialogs.\r\n\r\n\r\nTry opening Settings &gt; Build, Execution, Deployment &gt; Coverage and check the &quot;Activate Coverage View&quot; checkbox. After that run another test with Coverage.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/code-coverage.html","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>Potentially the Coverage plugin is installed but disabled on your machine e.g. IntelliJ wasn't restarted after plugin was enabled. Try restarting after double checking that Coverage plugin is enabled. As per <a href=\"https://www.jetbrains.com/help/idea/code-coverage.html\" rel=\"noreferrer\">IntelliJ Code Coverage docs</a>:</p>\n\n<blockquote>\n  <h2>Prerequisite</h2>\n  \n  <p>Make sure the Code Coverage plugin is enabled. The plugin is activated by default. If the plugin is disabled, enable it on the Plugins settings page as described in Managing Plugins. If the plugin is disabled, the code coverage tabs will not be visible in the run/debug configuration dialogs.</p>\n</blockquote>\n\n<p>Try opening Settings > Build, Execution, Deployment > Coverage and check the \"Activate Coverage View\" checkbox. After that run another test with Coverage.</p>\n"},{"comments":[{"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"score":0,"creation_date":1534342894,"post_id":51853491,"comment_id":90673300,"body_markdown":"The first radio box already selected, the shift+f9 didn&#39;t help.","body":"The first radio box already selected, the shift+f9 didn&#39;t help."},{"owner":{"account_id":8071244,"reputation":690,"user_id":6083943,"display_name":"Ammar Ali"},"score":0,"creation_date":1534384803,"post_id":51853491,"comment_id":90689092,"body_markdown":"After running with coverage, press on debugging then it&#39;ll work.","body":"After running with coverage, press on debugging then it&#39;ll work."}],"tags":[],"owner":{"account_id":8071244,"reputation":690,"user_id":6083943,"display_name":"Ammar Ali"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1534311659,"creation_date":1534311659,"answer_id":51853491,"question_id":51790354,"body_markdown":"It&#39;s not a problem with JDK or latest version of IntelliJ.\r\n\r\nHere is the step you follow and see the coverage window. Run project with coverage, sometimes coverage window not shown if you are unable to see coverage window then \r\n\r\n - press **shift+f9**\r\n - then press on **stop and rerun**\r\n\r\nAfter this, your coverage window is shown.\r\n\r\nStill, if you are unable to see coverage window then please double check is coverage view enable or not follow these steps:\r\n\r\n - press **ctrl+alt+s**\r\n - extend **build, execution and deployment**\r\n - press **coverage**\r\n - select first radio box and activate coverage view\r\n - press apply and then ok\r\n\r\nAgain follow the above step run with coverage, press shift+f9 etc.\r\n\r\nHope this help.  \r\n\r\n ","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>It's not a problem with JDK or latest version of IntelliJ.</p>\n\n<p>Here is the step you follow and see the coverage window. Run project with coverage, sometimes coverage window not shown if you are unable to see coverage window then </p>\n\n<ul>\n<li>press <strong>shift+f9</strong></li>\n<li>then press on <strong>stop and rerun</strong></li>\n</ul>\n\n<p>After this, your coverage window is shown.</p>\n\n<p>Still, if you are unable to see coverage window then please double check is coverage view enable or not follow these steps:</p>\n\n<ul>\n<li>press <strong>ctrl+alt+s</strong></li>\n<li>extend <strong>build, execution and deployment</strong></li>\n<li>press <strong>coverage</strong></li>\n<li>select first radio box and activate coverage view</li>\n<li>press apply and then ok</li>\n</ul>\n\n<p>Again follow the above step run with coverage, press shift+f9 etc.</p>\n\n<p>Hope this help.  </p>\n"},{"comments":[{"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"score":1,"creation_date":1534342937,"post_id":51853664,"comment_id":90673323,"body_markdown":"Intellij Idea is selected by default.","body":"Intellij Idea is selected by default."}],"tags":[],"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1534312961,"creation_date":1534312961,"answer_id":51853664,"question_id":51790354,"body_markdown":"Try and go to \r\n\r\n    Run--&gt;edit configurations--&gt;select code coverage ( then you can select IDEA/EMMA/...)\r\n\r\n","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>Try and go to </p>\n\n<pre><code>Run--&gt;edit configurations--&gt;select code coverage ( then you can select IDEA/EMMA/...)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10318865,"reputation":315,"user_id":7612419,"display_name":"Sushan Baskota"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567316526,"creation_date":1567316526,"answer_id":57743503,"question_id":51790354,"body_markdown":"I am not sure whether you have figured the solution till date but I ran with the same issue and got solved.\r\n\r\nIn my case, the issue was with coverage jars were not able to pick up due to spaces on the directory name.\r\n\r\nPlease follow below thread and let me know if it helps.\r\n\r\n[Intellij Coverage not working][1]\r\n\r\nThanks.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/57742666/test-coverage-not-working-in-intellij-idea","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>I am not sure whether you have figured the solution till date but I ran with the same issue and got solved.</p>\n\n<p>In my case, the issue was with coverage jars were not able to pick up due to spaces on the directory name.</p>\n\n<p>Please follow below thread and let me know if it helps.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/57742666/test-coverage-not-working-in-intellij-idea\">Intellij Coverage not working</a></p>\n\n<p>Thanks.</p>\n"},{"comments":[{"owner":{"account_id":16347167,"reputation":918,"user_id":11806619,"display_name":"Captain Jacky"},"score":0,"creation_date":1663837124,"post_id":72973840,"comment_id":130334599,"body_markdown":"This did work. But what if I want my test package name to be different?","body":"This did work. But what if I want my test package name to be different?"}],"tags":[],"owner":{"account_id":2431775,"reputation":566,"user_id":2122524,"display_name":"user2122524"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1657756684,"creation_date":1657756684,"answer_id":72973840,"question_id":51790354,"body_markdown":"For me, I verified all the settings in Intellij and all were correct. My test class was in the wrong package due to which Intellij was not showing the coverage. \r\n\r\nIf the code is in the package: *com.company.domain.module*\r\ntest class should also be in *com.company.domain.module*\r\n\r\nOnce I corrected the package, the coverage started appearing. ","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>For me, I verified all the settings in Intellij and all were correct. My test class was in the wrong package due to which Intellij was not showing the coverage.</p>\n<p>If the code is in the package: <em>com.company.domain.module</em>\ntest class should also be in <em>com.company.domain.module</em></p>\n<p>Once I corrected the package, the coverage started appearing.</p>\n"},{"tags":[],"owner":{"account_id":20518165,"reputation":25,"user_id":15058338,"display_name":"Ioanaa 98"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668765523,"creation_date":1668765523,"answer_id":74487868,"question_id":51790354,"body_markdown":"In case anyone is looking for the same issue, I found the option in More Run/Debug section.","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>In case anyone is looking for the same issue, I found the option in More Run/Debug section.</p>\n"},{"tags":[],"owner":{"account_id":12616917,"reputation":21,"user_id":9174054,"display_name":"Animesh Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669652238,"creation_date":1669652078,"answer_id":74603481,"question_id":51790354,"body_markdown":"The package of the classes was the issue for me.\r\nThe test class and the source class should have same package path\r\n\r\nFor example-\r\n\r\nIf the code is in the package: *src.main.***com.company.domain.module**\r\ntest class should also be in *src.test.***com.company.domain.module**\r\n\r\nYou can either rename your packages\r\n\r\nOR\r\n\r\nIf you don&#39;t want to rename your packages, then try this\r\n\r\n**Modify run configurations -&gt; Code Coverage -&gt; You will see the path of test class there. Add your source classes path also.**","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>The package of the classes was the issue for me.\nThe test class and the source class should have same package path</p>\n<p>For example-</p>\n<p>If the code is in the package: *src.main.*<strong>com.company.domain.module</strong>\ntest class should also be in *src.test.*<strong>com.company.domain.module</strong></p>\n<p>You can either rename your packages</p>\n<p>OR</p>\n<p>If you don't want to rename your packages, then try this</p>\n<p><strong>Modify run configurations -&gt; Code Coverage -&gt; You will see the path of test class there. Add your source classes path also.</strong></p>\n"},{"tags":[],"owner":{"account_id":9558024,"reputation":648,"user_id":7099872,"display_name":"kavinda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686663024,"creation_date":1686635437,"answer_id":76462005,"question_id":51790354,"body_markdown":"In my case, all the settings in IntelliJ were correct. My test class was in the wrong package due to which IntelliJ was not showing the coverage.\r\n\r\nAs suggested in https://stackoverflow.com/a/72973840/7099872, if the code is in the package `com.company.domain.module` test class should also be in `com.company.domain.module`.\r\n\r\nHowever, instead of changing packages names, you can add coverage using below steps if you really need to use a different package naming.\r\n\r\nGo to Modify run configurations.\r\n\r\n[![menu][1]][1]\r\n\r\nThen add the actual (production code) package.\r\n\r\n[![code coverage package][2]][2]\r\n\r\nAfter running with coverage, now the production class is covered. When you open the production class, its lines would be highlighted using red/green lines.\r\n\r\n[![coverage report][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2AEb4.png\r\n  [2]: https://i.stack.imgur.com/rBzzp.png\r\n  [3]: https://i.stack.imgur.com/XT6cZ.png","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>In my case, all the settings in IntelliJ were correct. My test class was in the wrong package due to which IntelliJ was not showing the coverage.</p>\n<p>As suggested in <a href=\"https://stackoverflow.com/a/72973840/7099872\">https://stackoverflow.com/a/72973840/7099872</a>, if the code is in the package <code>com.company.domain.module</code> test class should also be in <code>com.company.domain.module</code>.</p>\n<p>However, instead of changing packages names, you can add coverage using below steps if you really need to use a different package naming.</p>\n<p>Go to Modify run configurations.</p>\n<p><a href=\"https://i.stack.imgur.com/2AEb4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2AEb4.png\" alt=\"menu\" /></a></p>\n<p>Then add the actual (production code) package.</p>\n<p><a href=\"https://i.stack.imgur.com/rBzzp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rBzzp.png\" alt=\"code coverage package\" /></a></p>\n<p>After running with coverage, now the production class is covered. When you open the production class, its lines would be highlighted using red/green lines.</p>\n<p><a href=\"https://i.stack.imgur.com/XT6cZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XT6cZ.png\" alt=\"coverage report\" /></a></p>\n"}],"owner":{"account_id":14089434,"reputation":416,"user_id":10178280,"display_name":"K. Ayoub"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32410,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"answer_count":8,"score":8,"last_activity_date":1686663024,"creation_date":1533917409,"question_id":51790354,"body_markdown":"I&#39;m using Spring Boot project with the last version of IntelliJ IDEA (2018.2.1 Ultimate Edition).\r\n\r\nWhen I run all my test with coverage the Coverage window doesn&#39;t show, and there&#39;s no percentage beside my main classes.\r\n\r\nI&#39;ve tried enabling the coverage window by going to `View -&gt; Tool Windows -&gt; Coverage`, but the coverage tab is disabled (not clickable).\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf I remember correctly the coverage was working fine before I update IntelliJ. Is that a bug with the last version ?\r\n\r\n\r\n**Edit**  \r\nthe coverage plugin is already installed  \r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/luGgV.png\r\n  [2]: https://i.stack.imgur.com/dmCeP.png","title":"IntelliJ IDEA Test Coverage window doesn&#39;t show","body":"<p>I'm using Spring Boot project with the last version of IntelliJ IDEA (2018.2.1 Ultimate Edition).</p>\n\n<p>When I run all my test with coverage the Coverage window doesn't show, and there's no percentage beside my main classes.</p>\n\n<p>I've tried enabling the coverage window by going to <code>View -&gt; Tool Windows -&gt; Coverage</code>, but the coverage tab is disabled (not clickable).</p>\n\n<p><a href=\"https://i.stack.imgur.com/luGgV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/luGgV.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I remember correctly the coverage was working fine before I update IntelliJ. Is that a bug with the last version ?</p>\n\n<p><strong>Edit</strong><br>\nthe coverage plugin is already installed<br>\n<a href=\"https://i.stack.imgur.com/dmCeP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dmCeP.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring","rest","swagger"],"comments":[{"owner":{"account_id":4613607,"reputation":688,"user_id":3740914,"display_name":"bart.s"},"score":0,"creation_date":1487627697,"post_id":42354886,"comment_id":71860479,"body_markdown":"Try this: http://localhost:8080/myapp/swagger-ui.html","body":"Try this: <a href=\"http://localhost:8080/myapp/swagger-ui.html\" rel=\"nofollow noreferrer\">localhost:8080/myapp/swagger-ui.html</a>"},{"owner":{"account_id":178454,"reputation":5330,"user_id":410439,"accept_rate":81,"display_name":"Ravi Parekh"},"score":0,"creation_date":1613660616,"post_id":42354886,"comment_id":117149010,"body_markdown":"Simple configuration - https://stackoverflow.com/a/64333853/410439","body":"Simple configuration - <a href=\"https://stackoverflow.com/a/64333853/410439\">stackoverflow.com/a/64333853/410439</a>"}],"answers":[{"comments":[{"owner":{"account_id":1397292,"reputation":91,"user_id":1326822,"accept_rate":17,"display_name":"TKPhillyBurb"},"score":0,"creation_date":1487681973,"post_id":42355482,"comment_id":71885721,"body_markdown":"Thank you, an additional question, the &quot;myapp&quot; portion of the URL is this the name of the class in which my &quot;main&quot; resides?","body":"Thank you, an additional question, the &quot;myapp&quot; portion of the URL is this the name of the class in which my &quot;main&quot; resides?"},{"owner":{"account_id":1397292,"reputation":91,"user_id":1326822,"accept_rate":17,"display_name":"TKPhillyBurb"},"score":0,"creation_date":1487685026,"post_id":42355482,"comment_id":71887845,"body_markdown":"I&#39;m not even seeing the port 8080 being used when looking at netstat.","body":"I&#39;m not even seeing the port 8080 being used when looking at netstat."},{"owner":{"account_id":5471611,"reputation":11,"user_id":4350831,"display_name":"fbak"},"score":0,"creation_date":1487756147,"post_id":42355482,"comment_id":71923566,"body_markdown":"http://stackoverflow.com/questions/24452072/how-do-i-choose-the-url-for-my-spring-boot-webapp","body":"<a href=\"http://stackoverflow.com/questions/24452072/how-do-i-choose-the-url-for-my-spring-boot-webapp\" title=\"how do i choose the url for my spring boot webapp\">stackoverflow.com/questions/24452072/&hellip;</a>"}],"tags":[],"owner":{"account_id":5471611,"reputation":11,"user_id":4350831,"display_name":"fbak"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487630266,"creation_date":1487630266,"answer_id":42355482,"question_id":42354886,"body_markdown":"As you can see on the following documentation :\r\nhttps://springfox.github.io/springfox/docs/snapshot/#springfox-swagger-ui\r\n\r\nThe endpoint is now on swagger-ui.html, for your case, it will be http://localhost:8080/myapp/swagger-ui.html","title":"Swagger REST API documentation with Spring Boot","body":"<p>As you can see on the following documentation :\n<a href=\"https://springfox.github.io/springfox/docs/snapshot/#springfox-swagger-ui\" rel=\"nofollow noreferrer\">https://springfox.github.io/springfox/docs/snapshot/#springfox-swagger-ui</a></p>\n\n<p>The endpoint is now on swagger-ui.html, for your case, it will be <a href=\"http://localhost:8080/myapp/swagger-ui.html\" rel=\"nofollow noreferrer\">http://localhost:8080/myapp/swagger-ui.html</a></p>\n"},{"tags":[],"owner":{"account_id":8347798,"reputation":131,"user_id":6270984,"display_name":"Gaganam Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647344055,"creation_date":1647343926,"answer_id":71481529,"question_id":42354886,"body_markdown":"I used, `&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;` with \r\n\r\n    public class OpenApiConfiguration{\r\n\r\n         @Bean\r\n         public GroupedOpenApi abcApp(){\r\n            String[] abcAppRootPath={&quot;com.stockoverflow.swagger&quot;};\r\n            return GroupedOpenApi.builder().group(&quot;my app&quot;).packagesToScan(abcAppRootPath).build();\r\n        }\r\n    }\r\n\r\nreference : https://springdoc.org/#getting-started\r\n         \r\n      ","title":"Swagger REST API documentation with Spring Boot","body":"<p>I used, <code>&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;</code> with</p>\n<pre><code>public class OpenApiConfiguration{\n\n     @Bean\n     public GroupedOpenApi abcApp(){\n        String[] abcAppRootPath={&quot;com.stockoverflow.swagger&quot;};\n        return GroupedOpenApi.builder().group(&quot;my app&quot;).packagesToScan(abcAppRootPath).build();\n    }\n}\n</code></pre>\n<p>reference : <a href=\"https://springdoc.org/#getting-started\" rel=\"nofollow noreferrer\">https://springdoc.org/#getting-started</a></p>\n"},{"tags":[],"owner":{"account_id":1887892,"reputation":240,"user_id":1706743,"display_name":"Rupendra Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685651718,"creation_date":1685651718,"answer_id":76385534,"question_id":42354886,"body_markdown":"    1- Use this url to access swagger documentation- \r\n       http://localhost:8080/swagger-ui/index.html\r\n       http://localhost:8080/swagger-ui.html\r\n    2- To view OpenAPI description-\r\n       http://localhost:8080/v3/api-docs\r\n   Here you can find integration example with sample source code- &lt;br/&gt;\r\n   &lt;https://javadrill.com/spring-boot-3-swagger-integration-example&gt;","title":"Swagger REST API documentation with Spring Boot","body":"<pre><code>1- Use this url to access swagger documentation- \n   http://localhost:8080/swagger-ui/index.html\n   http://localhost:8080/swagger-ui.html\n2- To view OpenAPI description-\n   http://localhost:8080/v3/api-docs\n</code></pre>\n<p>Here you can find integration example with sample source code- <br/>\n<a href=\"https://javadrill.com/spring-boot-3-swagger-integration-example\" rel=\"nofollow noreferrer\">https://javadrill.com/spring-boot-3-swagger-integration-example</a></p>\n"},{"tags":[],"owner":{"account_id":28780885,"reputation":11,"user_id":22042536,"display_name":"parad0X"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686662881,"creation_date":1686657175,"answer_id":76464657,"question_id":42354886,"body_markdown":"Since the required dependencies are already being used in the ```pom.xml``` file, here is the implementation that can be used for Swagger 2 in the spring boot project for all the rest-controller classes.\r\n\r\n```java\r\npackage com.example.config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\nimport springfox.documentation.builders.PathSelectors;\r\nimport springfox.documentation.builders.RequestHandlerSelectors;\r\nimport springfox.documentation.spi.DocumentationType;\r\nimport springfox.documentation.spring.web.plugins.Docket;\r\nimport springfox.documentation.swagger.web.UiConfiguration;\r\nimport springfox.documentation.swagger.web.UiConfigurationBuilder;\r\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\r\n\r\n@Configuration\r\n@EnableSwagger2\r\n@EnableWebMvc\r\npublic class SwaggerConfig implements WebMvcConfigurer {\r\n\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n\r\n        registry\r\n                .addResourceHandler(&quot;swagger-ui.html&quot;)\r\n                .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);\r\n\r\n        registry\r\n                .addResourceHandler(&quot;/webjars/**&quot;)\r\n                .addResourceLocations(&quot;classpath://META-INF/resources/webjars/&quot;);\r\n    }\r\n\r\n    @Bean\r\n    public Docket docket() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.withClassAnnotation(RestController.class))\r\n                .paths(PathSelectors.any())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    UiConfiguration uiConfiguration() {\r\n        return UiConfigurationBuilder.builder()\r\n                .defaultModelExpandDepth(-1)\r\n                .build();\r\n    }\r\n}\r\n```\r\nThe following config file can be modified and used as per needs especially in the ```uiConfiguration()``` method. The rest-controller wherever is needed can be annotated with ```@Api``` on the class and ```@ApiOperation``` on the method of interest such as either a ```post/get``` call. Feel free to explore.\r\n","title":"Swagger REST API documentation with Spring Boot","body":"<p>Since the required dependencies are already being used in the <code>pom.xml</code> file, here is the implementation that can be used for Swagger 2 in the spring boot project for all the rest-controller classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger.web.UiConfiguration;\nimport springfox.documentation.swagger.web.UiConfigurationBuilder;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\n@EnableWebMvc\npublic class SwaggerConfig implements WebMvcConfigurer {\n\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n\n        registry\n                .addResourceHandler(&quot;swagger-ui.html&quot;)\n                .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);\n\n        registry\n                .addResourceHandler(&quot;/webjars/**&quot;)\n                .addResourceLocations(&quot;classpath://META-INF/resources/webjars/&quot;);\n    }\n\n    @Bean\n    public Docket docket() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.withClassAnnotation(RestController.class))\n                .paths(PathSelectors.any())\n                .build();\n    }\n\n    @Bean\n    UiConfiguration uiConfiguration() {\n        return UiConfigurationBuilder.builder()\n                .defaultModelExpandDepth(-1)\n                .build();\n    }\n}\n</code></pre>\n<p>The following config file can be modified and used as per needs especially in the <code>uiConfiguration()</code> method. The rest-controller wherever is needed can be annotated with <code>@Api</code> on the class and <code>@ApiOperation</code> on the method of interest such as either a <code>post/get</code> call. Feel free to explore.</p>\n"}],"owner":{"account_id":1397292,"reputation":91,"user_id":1326822,"accept_rate":17,"display_name":"TKPhillyBurb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2950,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1686662881,"creation_date":1487627522,"question_id":42354886,"body_markdown":"I want to use Swagger 2.0 with my Spring Boot RESTful web service to generate documentation.  I have searched quite a bit for an answer to this.  Basically I have a Spring Boot project with a set of controllers and I want to document the API&#39;s.  I have the following dependencies setup in my POM file. \r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThis is my Swagger configuration class with the @Configuration and @EnableSwagger2:\r\n \r\n\r\n          @Configuration\r\n          @EnableSwagger2\r\n    public class SwaggerConfig {\r\n    \r\n        @Bean\r\n        public Docket api(){\r\n            return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.any())\r\n                .paths(PathSelectors.regex(&quot;/api/.*&quot;))\r\n                .build()\r\n                .apiInfo(apiInfo());\r\n        }\r\n    \r\n        private ApiInfo apiInfo() {\r\n            return new ApiInfoBuilder()\r\n                .title(&quot;My application title&quot;)\r\n                .description(&quot;This is a test of documenting EST API&#39;s&quot;)\r\n                .version(&quot;V1.2&quot;)\r\n                .termsOfServiceUrl(&quot;http://terms-of-services.url&quot;)\r\n                .license(&quot;LICENSE&quot;)\r\n                .licenseUrl(&quot;http://url-to-license.com&quot;)\r\n                .build();\r\n        }\r\n    \r\n    }\r\n\r\nFrom what I have gathered in reading a couple of other answers here that at this point I should be able to see something at a URL such as http://myapp/v2/api-docs or alternatively http://localhost:8080/myapp/api-docs  I have made the assumption that the &quot;myapp&quot; portion of the above URL refers to the name of the class in which my main resides (is this correct)?  Also I have tried this with port 8080 and port 80 and the bottom line is that I see nothing other than site can&#39;t be reached.  I have looked at the answers provided [here][1] and [here][2] however I&#39;m not having any success.  Any help would be much appreciated, thank you in advance.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26720090/a-simple-way-to-implement-swagger-in-a-spring-mvc-application\r\n  [2]: https://stackoverflow.com/questions/26807791/swagger-for-spring-mvc-project","title":"Swagger REST API documentation with Spring Boot","body":"<p>I want to use Swagger 2.0 with my Spring Boot RESTful web service to generate documentation.  I have searched quite a bit for an answer to this.  Basically I have a Spring Boot project with a set of controllers and I want to document the API's.  I have the following dependencies setup in my POM file. </p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n        &lt;version&gt;2.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>This is my Swagger configuration class with the @Configuration and @EnableSwagger2:</p>\n\n<pre><code>      @Configuration\n      @EnableSwagger2\npublic class SwaggerConfig {\n\n    @Bean\n    public Docket api(){\n        return new Docket(DocumentationType.SWAGGER_2)\n            .select()\n            .apis(RequestHandlerSelectors.any())\n            .paths(PathSelectors.regex(\"/api/.*\"))\n            .build()\n            .apiInfo(apiInfo());\n    }\n\n    private ApiInfo apiInfo() {\n        return new ApiInfoBuilder()\n            .title(\"My application title\")\n            .description(\"This is a test of documenting EST API's\")\n            .version(\"V1.2\")\n            .termsOfServiceUrl(\"http://terms-of-services.url\")\n            .license(\"LICENSE\")\n            .licenseUrl(\"http://url-to-license.com\")\n            .build();\n    }\n\n}\n</code></pre>\n\n<p>From what I have gathered in reading a couple of other answers here that at this point I should be able to see something at a URL such as <a href=\"http://myapp/v2/api-docs\" rel=\"nofollow noreferrer\">http://myapp/v2/api-docs</a> or alternatively <a href=\"http://localhost:8080/myapp/api-docs\" rel=\"nofollow noreferrer\">http://localhost:8080/myapp/api-docs</a>  I have made the assumption that the \"myapp\" portion of the above URL refers to the name of the class in which my main resides (is this correct)?  Also I have tried this with port 8080 and port 80 and the bottom line is that I see nothing other than site can't be reached.  I have looked at the answers provided <a href=\"https://stackoverflow.com/questions/26720090/a-simple-way-to-implement-swagger-in-a-spring-mvc-application\">here</a> and <a href=\"https://stackoverflow.com/questions/26807791/swagger-for-spring-mvc-project\">here</a> however I'm not having any success.  Any help would be much appreciated, thank you in advance.</p>\n"},{"tags":["java","tomcat","war","tomcat8"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1687018547,"post_id":76465425,"comment_id":134880009,"body_markdown":"Far as I know, there are no such configuration to create folders with different user in Tomcat, server.xml or otherwise. What you could try is after the Tomcat starts issue chmod at the end of the script and change the permissions, that probably would work.","body":"Far as I know, there are no such configuration to create folders with different user in Tomcat, server.xml or otherwise. What you could try is after the Tomcat starts issue chmod at the end of the script and change the permissions, that probably would work."}],"owner":{"account_id":15539213,"reputation":346,"user_id":11210547,"display_name":"P&#233;ter Bar&#225;th"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686662542,"creation_date":1686662542,"question_id":76465425,"body_markdown":"I have two users in a Linux environment. \r\nLet&#39;s say: **prod** and **run**. They have different responsibilities. \r\n\r\n**prod** installs a java war based application with an external Tomcat. And it also updates this application. Installation and update use same script. This script responsibilities here:\r\n\r\n - If there is a Tomcat already - the process removes it.\r\n - Copies the selected Tomcat to the right place\r\n - etc etc.\r\n\r\n**run** starts Tomcat and the application.\r\n\r\nUse case:\r\n \r\n - I installed the application with **prod**\r\n - Then, started the application with **run** - When I did this, work/Catalina and other Catalina subdirectories were created. The owner of these folders is the **run** user. (it is important information for the problem)\r\n - Stop the application with **run**\r\n - I tried to use update script with **prod** user but I got errors because this user didn&#39;t have permission to delete Catalina folders. \r\n\r\nThis is the infos of a Catalina folder:\r\n\r\n    drwxr-x---. 3 **run** groupOwner 23 Jun 13 11:55 Catalina\r\n\r\n  \r\nHow can I change the write permission of the Catalina folder to Group level at the creation time of this?\r\nIs there any configuration for it, for example in server.xml? At the Service or Engine tags? \r\n\r\nOr how can I trigger Tomcat (not start) for creating the Catalina folders during installation? With this process, the owner of the Catalina folder would be the **prod** and it could remove it.\r\n\r\n \r\n\r\n","title":"Catalina folders handling with two different users","body":"<p>I have two users in a Linux environment.\nLet's say: <strong>prod</strong> and <strong>run</strong>. They have different responsibilities.</p>\n<p><strong>prod</strong> installs a java war based application with an external Tomcat. And it also updates this application. Installation and update use same script. This script responsibilities here:</p>\n<ul>\n<li>If there is a Tomcat already - the process removes it.</li>\n<li>Copies the selected Tomcat to the right place</li>\n<li>etc etc.</li>\n</ul>\n<p><strong>run</strong> starts Tomcat and the application.</p>\n<p>Use case:</p>\n<ul>\n<li>I installed the application with <strong>prod</strong></li>\n<li>Then, started the application with <strong>run</strong> - When I did this, work/Catalina and other Catalina subdirectories were created. The owner of these folders is the <strong>run</strong> user. (it is important information for the problem)</li>\n<li>Stop the application with <strong>run</strong></li>\n<li>I tried to use update script with <strong>prod</strong> user but I got errors because this user didn't have permission to delete Catalina folders.</li>\n</ul>\n<p>This is the infos of a Catalina folder:</p>\n<pre><code>drwxr-x---. 3 **run** groupOwner 23 Jun 13 11:55 Catalina\n</code></pre>\n<p>How can I change the write permission of the Catalina folder to Group level at the creation time of this?\nIs there any configuration for it, for example in server.xml? At the Service or Engine tags?</p>\n<p>Or how can I trigger Tomcat (not start) for creating the Catalina folders during installation? With this process, the owner of the Catalina folder would be the <strong>prod</strong> and it could remove it.</p>\n"},{"tags":["java","opc-ua","milo"],"comments":[{"owner":{"account_id":31322,"reputation":6580,"user_id":85927,"accept_rate":50,"display_name":"Kevin Herron"},"score":0,"creation_date":1686658556,"post_id":76463589,"comment_id":134826605,"body_markdown":"Can you include the full error and stack trace?","body":"Can you include the full error and stack trace?"},{"owner":{"account_id":10075413,"reputation":61,"user_id":7447700,"display_name":"Giuseppe Castellano"},"score":0,"creation_date":1686662398,"post_id":76463589,"comment_id":134827555,"body_markdown":"Included...thanks","body":"Included...thanks"},{"owner":{"account_id":31322,"reputation":6580,"user_id":85927,"accept_rate":50,"display_name":"Kevin Herron"},"score":0,"creation_date":1686668093,"post_id":76463589,"comment_id":134828971,"body_markdown":"It&#39;s hard to understand this. It&#39;s not formatted and not complete. What line is it happening at? Are the endpoints being retrieved? or is the connect failing?","body":"It&#39;s hard to understand this. It&#39;s not formatted and not complete. What line is it happening at? Are the endpoints being retrieved? or is the connect failing?"},{"owner":{"account_id":10075413,"reputation":61,"user_id":7447700,"display_name":"Giuseppe Castellano"},"score":0,"creation_date":1686733597,"post_id":76463589,"comment_id":134838449,"body_markdown":"at cf.get(), the endpoint being retrived correctly by discovery service.","body":"at cf.get(), the endpoint being retrived correctly by discovery service."},{"owner":{"account_id":31322,"reputation":6580,"user_id":85927,"accept_rate":50,"display_name":"Kevin Herron"},"score":0,"creation_date":1686745530,"post_id":76463589,"comment_id":134840961,"body_markdown":"Does the first endpoint in the list have a user token policy that allows username/password? Can you get a Wireshark capture?","body":"Does the first endpoint in the list have a user token policy that allows username/password? Can you get a Wireshark capture?"}],"owner":{"account_id":10075413,"reputation":61,"user_id":7447700,"display_name":"Giuseppe Castellano"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686662386,"creation_date":1686649299,"question_id":76463589,"body_markdown":"I&#39;m using eclipse milo to connect to an opcua server I get StacklessClosedChannelException. Trying with a client like OPCUA Explorer I can connect correctly and read the variables. Below is my code:\r\n\r\n\t\tint codMacchina = macchina.getCodMacchina();\r\n\t\t\tString ipServer = macchina.getIpServer();\r\n\t\t\tString porta = macchina.getPorta();\r\n\t\t\tString username = macchina.getUsername();\r\n\t\t\tString password = macchina.getPassword();\r\n\t\t\t\r\n            try {\r\n\t\t\t\tList&lt;EndpointDescription&gt; endpoints = \r\n                DiscoveryClient.getEndpoints(&quot;opc.tcp://&quot; + ipServer + &quot;:&quot; + porta).get();\r\n\t            EndpointDescription configPoint = endpoints.get(0);\r\n\t           \r\n\t            OpcUaClientConfigBuilder cfg = new OpcUaClientConfigBuilder();\r\n\t            cfg.setEndpoint(configPoint);\r\n\t            cfg.setIdentityProvider(new UsernameProvider(username, password));\r\n\r\n\t            OpcUaClient client = OpcUaClient.create(cfg.build());\r\n\t            CompletableFuture&lt;UaClient&gt; cf = client.connect();\r\n\t            cf.get();\r\n\r\n            .....\r\n\r\n\r\ndo you have any idea what i&#39;m doing wrong?\r\n\r\n\r\nINCLUDE STACK TRACE:\r\n\r\n[2023-06-13][15:16:28:847][ERROR][AbstractLoggingWriter][71][java.util.concurrent.ExecutionException: io.netty.channel.StacklessClosedChannelException\r\n]\r\n[2023-06-13][15:16:28:885][ERROR][AbstractLoggingWriter][71][\tat java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)\r\n]\r\n[2023-06-13][15:16:28:899][ERROR][AbstractLoggingWriter][71][\tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)\r\n]\r\n[2023-06-13][15:16:28:913][ERROR][AbstractLoggingWriter][71][\tat deployment.GnuttiHubEar.ear.GnuttiHub.war//it.gnuttihub.job.ImportaDatiOPCUAJob.lambda$0(ImportaDatiOPCUAJob.java:70)\r\n]\r\n[2023-06-13][15:16:28:932][ERROR][AbstractLoggingWriter][71][\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)\r\n]\r\n[2023-06-13][15:16:28:947][ERROR][AbstractLoggingWriter][71][\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n]\r\n[2023-06-13][15:16:28:961][ERROR][AbstractLoggingWriter][71][\tat deployment.GnuttiHubEar.ear.GnuttiHub.war//it.gnuttihub.job.ImportaDatiOPCUAJob.executeJob(ImportaDatiOPCUAJob.java:53)\r\n]\r\n[2023-06-13][15:16:28:974][ERROR][AbstractLoggingWriter][71][\tat deployment.GnuttiHubEar.ear.GnuttiHub.war//it.gnuttihub.job.AbstractJob.execute(AbstractJob.java:24)\r\n]\r\n[2023-06-13][15:16:28:988][ERROR][AbstractLoggingWriter][71][\tat deployment.GnuttiHubEar.ear.GnuttiHub.war//org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n]\r\n[2023-06-13][15:16:29:001][ERROR][AbstractLoggingWriter][71][\tat deployment.GnuttiHubEar.ear.GnuttiHub.war//org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\n]\r\n[2023-06-13][15:16:29:018][ERROR][AbstractLoggingWriter][71][Caused by: io.netty.channel.StacklessClosedChannelException\r\n]\r\n[2023-06-13][15:16:29:031][ERROR][AbstractLoggingWriter][71][\tat io.netty.channel.AbstractChannel$AbstractUnsafe.ensureOpen(ChannelPromise)(Unknown Source)","title":"Eclipse Milo OPCUA StacklessClosedChannelException","body":"<p>I'm using eclipse milo to connect to an opcua server I get StacklessClosedChannelException. Trying with a client like OPCUA Explorer I can connect correctly and read the variables. Below is my code:</p>\n<pre><code>    int codMacchina = macchina.getCodMacchina();\n        String ipServer = macchina.getIpServer();\n        String porta = macchina.getPorta();\n        String username = macchina.getUsername();\n        String password = macchina.getPassword();\n        \n        try {\n            List&lt;EndpointDescription&gt; endpoints = \n            DiscoveryClient.getEndpoints(&quot;opc.tcp://&quot; + ipServer + &quot;:&quot; + porta).get();\n            EndpointDescription configPoint = endpoints.get(0);\n           \n            OpcUaClientConfigBuilder cfg = new OpcUaClientConfigBuilder();\n            cfg.setEndpoint(configPoint);\n            cfg.setIdentityProvider(new UsernameProvider(username, password));\n\n            OpcUaClient client = OpcUaClient.create(cfg.build());\n            CompletableFuture&lt;UaClient&gt; cf = client.connect();\n            cf.get();\n\n        .....\n</code></pre>\n<p>do you have any idea what i'm doing wrong?</p>\n<p>INCLUDE STACK TRACE:</p>\n<p>[2023-06-13][15:16:28:847][ERROR][AbstractLoggingWriter][71][java.util.concurrent.ExecutionException: io.netty.channel.StacklessClosedChannelException\n]\n[2023-06-13][15:16:28:885][ERROR][AbstractLoggingWriter][71][   at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)\n]\n[2023-06-13][15:16:28:899][ERROR][AbstractLoggingWriter][71][   at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)\n]\n[2023-06-13][15:16:28:913][ERROR][AbstractLoggingWriter][71][   at deployment.GnuttiHubEar.ear.GnuttiHub.war//it.gnuttihub.job.ImportaDatiOPCUAJob.lambda$0(ImportaDatiOPCUAJob.java:70)\n]\n[2023-06-13][15:16:28:932][ERROR][AbstractLoggingWriter][71][   at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)\n]\n[2023-06-13][15:16:28:947][ERROR][AbstractLoggingWriter][71][   at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\n]\n[2023-06-13][15:16:28:961][ERROR][AbstractLoggingWriter][71][   at deployment.GnuttiHubEar.ear.GnuttiHub.war//it.gnuttihub.job.ImportaDatiOPCUAJob.executeJob(ImportaDatiOPCUAJob.java:53)\n]\n[2023-06-13][15:16:28:974][ERROR][AbstractLoggingWriter][71][   at deployment.GnuttiHubEar.ear.GnuttiHub.war//it.gnuttihub.job.AbstractJob.execute(AbstractJob.java:24)\n]\n[2023-06-13][15:16:28:988][ERROR][AbstractLoggingWriter][71][   at deployment.GnuttiHubEar.ear.GnuttiHub.war//org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n]\n[2023-06-13][15:16:29:001][ERROR][AbstractLoggingWriter][71][   at deployment.GnuttiHubEar.ear.GnuttiHub.war//org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\n]\n[2023-06-13][15:16:29:018][ERROR][AbstractLoggingWriter][71][Caused by: io.netty.channel.StacklessClosedChannelException\n]\n[2023-06-13][15:16:29:031][ERROR][AbstractLoggingWriter][71][   at io.netty.channel.AbstractChannel$AbstractUnsafe.ensureOpen(ChannelPromise)(Unknown Source)</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1686660196,"post_id":76464985,"comment_id":134827037,"body_markdown":"Hello. Please [ask one question per post](https://meta.stackexchange.com/q/222735). BTW most JSON libraries are open source so you can take a look at any method and see how it works. Regarding order of `type` vs `number` JSONObject doesn&#39;t guarantee order of keys (just like HashMap).","body":"Hello. Please <a href=\"https://meta.stackexchange.com/q/222735\">ask one question per post</a>. BTW most JSON libraries are open source so you can take a look at any method and see how it works. Regarding order of <code>type</code> vs <code>number</code> JSONObject doesn&#39;t guarantee order of keys (just like HashMap)."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686660200,"post_id":76464985,"comment_id":134827038,"body_markdown":"How about adding the code that explains how `itr2` is initialized, as well as explaining what `ja` is? I&#39;m guessing JSONArray but... why don&#39;t you parse the whole annonymous json (`Map.Entry pair` in your case) into a class that has `String type; String number;` members and then print `type` followed by `number` explicitly instead of relying on whatever the JSONArray decided is key/value ?","body":"How about adding the code that explains how <code>itr2</code> is initialized, as well as explaining what <code>ja</code> is? I&#39;m guessing JSONArray but... why don&#39;t you parse the whole annonymous json (<code>Map.Entry pair</code> in your case) into a class that has <code>String type; String number;</code> members and then print <code>type</code> followed by <code>number</code> explicitly instead of relying on whatever the JSONArray decided is key/value ?"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":3,"creation_date":1686660560,"post_id":76464985,"comment_id":134827116,"body_markdown":"The order of the map-elements depend on the implementation of the map. Maintaining the order of the JSON is not guaranteed. If you require a consistent order for the keys, you should change the implementation to either parse each phoneNumber as an object or explicitly extract each field from the maps you iterate over","body":"The order of the map-elements depend on the implementation of the map. Maintaining the order of the JSON is not guaranteed. If you require a consistent order for the keys, you should change the implementation to either parse each phoneNumber as an object or explicitly extract each field from the maps you iterate over"},{"owner":{"account_id":23527255,"reputation":59,"user_id":17573553,"display_name":"Souvik Dey"},"score":0,"creation_date":1686661078,"post_id":76464985,"comment_id":134827238,"body_markdown":"I see the comments, problem is with the &quot;Iteration&quot;, why suddenly number came before type? @Shark","body":"I see the comments, problem is with the &quot;Iteration&quot;, why suddenly number came before type? @Shark"},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686663447,"post_id":76464985,"comment_id":134827819,"body_markdown":"To tie in with @ODDminus1 answer - the order of the map-elements depands on the Map&#39;s implementation. The `Map.Entry pair` decided one of the is going to be Key and the other is going to be Value. It&#39;s implementation dependant, I cant (don&#39;t) know why, but you should either parse the entry into a class, or get the JSONObject and fetch the `type` and `number` yourself instead of expecting the order to be preserved, since JSON is unordered.","body":"To tie in with @ODDminus1 answer - the order of the map-elements depands on the Map&#39;s implementation. The <code>Map.Entry pair</code> decided one of the is going to be Key and the other is going to be Value. It&#39;s implementation dependant, I cant (don&#39;t) know why, but you should either parse the entry into a class, or get the JSONObject and fetch the <code>type</code> and <code>number</code> yourself instead of expecting the order to be preserved, since JSON is unordered."}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686662376,"creation_date":1686661541,"answer_id":76465281,"question_id":76464985,"body_markdown":"You can use Jackson to parse the JSON file into a `JsonNode`, grab the `phoneNumbers` field and iterate through the nodes. Jackson uses a `LinkedHashMap` under the hood, so they original order of they keys should be preserved.\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.util.Iterator;\r\nimport java.util.Map.Entry;\r\nimport com.fasterxml.jackson.core.exc.StreamReadException;\r\nimport com.fasterxml.jackson.databind.*;\r\n\r\npublic class JsonReaderExample {\r\n    private static ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            ClassLoader classLoader = JsonReaderExample.class.getClassLoader();\r\n            InputStream inputStream = classLoader.getResourceAsStream(&quot;input.json&quot;);\r\n            JsonNode person = objectMapper.readTree(inputStream);\r\n            JsonNode phoneNumbers = person.get(&quot;phoneNumbers&quot;);\r\n            if (phoneNumbers.isArray()) {\r\n                for (final JsonNode phoneNumber : phoneNumbers) {\r\n                    Iterator&lt;Entry&lt;String, JsonNode&gt;&gt; it = phoneNumber.fields();\r\n                    while (it.hasNext()) {\r\n                        Entry&lt;String, JsonNode&gt; entry = it.next();\r\n                        System.out.printf(&quot;%s: %s%n&quot;, entry.getKey(), entry.getValue());\r\n                    }\r\n                }\r\n            }\r\n        } catch (StreamReadException e) {\r\n            e.printStackTrace();\r\n        } catch (DatabindException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYour safest bet would be to deserialize the JSON as a POJO. You can use Jackson to read the JSON data and parse it into a `Person`.\r\n\r\n```java\r\nimport java.io.*;\r\nimport com.fasterxml.jackson.core.exc.StreamReadException;\r\nimport com.fasterxml.jackson.databind.*;\r\n\r\npublic class JsonReaderExample {\r\n    private static ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            ClassLoader classLoader = JsonReaderExample.class.getClassLoader();\r\n            InputStream inputStream = classLoader.getResourceAsStream(&quot;input.json&quot;);\r\n            Person person = objectMapper.readValue(inputStream, Person.class);\r\n\r\n            for (PhoneNumber phoneNumber : person.phoneNumbers) {\r\n                System.out.printf(&quot;type: %s%n&quot;, phoneNumber.type);\r\n                System.out.printf(&quot;number: %s%n&quot;, phoneNumber.number);\r\n            }\r\n        } catch (StreamReadException e) {\r\n            e.printStackTrace();\r\n        } catch (DatabindException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static class Person {\r\n        public String firstName;\r\n        public String lastName;\r\n        public Address address;\r\n        public int age;\r\n        public PhoneNumber[] phoneNumbers;\r\n    }\r\n\r\n    private static class PhoneNumber {\r\n        public String type;\r\n        public String number;\r\n    }\r\n\r\n    private static class Address {\r\n        public String streetAddress;\r\n        public String city;\r\n        public String state;\r\n        public int postalCode;\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\ntype: personal\r\nnumber: #######23\r\ntype: office\r\nnumber: ########\r\n```","title":"Why Iterator suddenly printed the map elements in reverse order?","body":"<p>You can use Jackson to parse the JSON file into a <code>JsonNode</code>, grab the <code>phoneNumbers</code> field and iterate through the nodes. Jackson uses a <code>LinkedHashMap</code> under the hood, so they original order of they keys should be preserved.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.Iterator;\nimport java.util.Map.Entry;\nimport com.fasterxml.jackson.core.exc.StreamReadException;\nimport com.fasterxml.jackson.databind.*;\n\npublic class JsonReaderExample {\n    private static ObjectMapper objectMapper = new ObjectMapper();\n\n    public static void main(String[] args) {\n        try {\n            ClassLoader classLoader = JsonReaderExample.class.getClassLoader();\n            InputStream inputStream = classLoader.getResourceAsStream(&quot;input.json&quot;);\n            JsonNode person = objectMapper.readTree(inputStream);\n            JsonNode phoneNumbers = person.get(&quot;phoneNumbers&quot;);\n            if (phoneNumbers.isArray()) {\n                for (final JsonNode phoneNumber : phoneNumbers) {\n                    Iterator&lt;Entry&lt;String, JsonNode&gt;&gt; it = phoneNumber.fields();\n                    while (it.hasNext()) {\n                        Entry&lt;String, JsonNode&gt; entry = it.next();\n                        System.out.printf(&quot;%s: %s%n&quot;, entry.getKey(), entry.getValue());\n                    }\n                }\n            }\n        } catch (StreamReadException e) {\n            e.printStackTrace();\n        } catch (DatabindException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Your safest bet would be to deserialize the JSON as a POJO. You can use Jackson to read the JSON data and parse it into a <code>Person</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport com.fasterxml.jackson.core.exc.StreamReadException;\nimport com.fasterxml.jackson.databind.*;\n\npublic class JsonReaderExample {\n    private static ObjectMapper objectMapper = new ObjectMapper();\n\n    public static void main(String[] args) {\n        try {\n            ClassLoader classLoader = JsonReaderExample.class.getClassLoader();\n            InputStream inputStream = classLoader.getResourceAsStream(&quot;input.json&quot;);\n            Person person = objectMapper.readValue(inputStream, Person.class);\n\n            for (PhoneNumber phoneNumber : person.phoneNumbers) {\n                System.out.printf(&quot;type: %s%n&quot;, phoneNumber.type);\n                System.out.printf(&quot;number: %s%n&quot;, phoneNumber.number);\n            }\n        } catch (StreamReadException e) {\n            e.printStackTrace();\n        } catch (DatabindException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static class Person {\n        public String firstName;\n        public String lastName;\n        public Address address;\n        public int age;\n        public PhoneNumber[] phoneNumbers;\n    }\n\n    private static class PhoneNumber {\n        public String type;\n        public String number;\n    }\n\n    private static class Address {\n        public String streetAddress;\n        public String city;\n        public String state;\n        public int postalCode;\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>type: personal\nnumber: #######23\ntype: office\nnumber: ########\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"score":0,"creation_date":1686662379,"post_id":76465365,"comment_id":134827543,"body_markdown":"Alternatively, you could use the equivalent of a pull-parser, such as GSON JsonReader, which would access elements in the same order they are read from the document.","body":"Alternatively, you could use the equivalent of a pull-parser, such as GSON JsonReader, which would access elements in the same order they are read from the document."},{"owner":{"account_id":23527255,"reputation":59,"user_id":17573553,"display_name":"Souvik Dey"},"score":0,"creation_date":1686662755,"post_id":76465365,"comment_id":134827646,"body_markdown":"Thanks, so is it just a coincident that, iterator is printing in reverse order? I tried more(3,4,5) elements inside that map and still it printed in reverse order. @phatfingers","body":"Thanks, so is it just a coincident that, iterator is printing in reverse order? I tried more(3,4,5) elements inside that map and still it printed in reverse order. @phatfingers"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686671848,"post_id":76465365,"comment_id":134829920,"body_markdown":"Yes, it is just a coincidence.","body":"Yes, it is just a coincidence."},{"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"score":0,"creation_date":1686692872,"post_id":76465365,"comment_id":134833776,"body_markdown":"@desouvik Although not guaranteed to be, the ordering is influenced by the hash value of each key.  So, it will appear consistent for multiple sets but it&#39;s not safe to rely on that consistency across different versions of Java.","body":"@desouvik Although not guaranteed to be, the ordering is influenced by the hash value of each key.  So, it will appear consistent for multiple sets but it&#39;s not safe to rely on that consistency across different versions of Java."}],"tags":[],"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686662124,"creation_date":1686662124,"answer_id":76465365,"question_id":76464985,"body_markdown":"Map elements in JSON are not regarded as ordered data.  It comes out in a different order for reasons similar to the ordering of a HashMap&#39;s contents.  You shouldn&#39;t expect a HashMap to iterate in the same order that you put content into it, and the same is true for mapped content from a JSON source.\r\n\r\nIf you want to preserve the order of mapped data in JSON, then you should transform the mapped data to an array and store that in JSON.","title":"Why Iterator suddenly printed the map elements in reverse order?","body":"<p>Map elements in JSON are not regarded as ordered data.  It comes out in a different order for reasons similar to the ordering of a HashMap's contents.  You shouldn't expect a HashMap to iterate in the same order that you put content into it, and the same is true for mapped content from a JSON source.</p>\n<p>If you want to preserve the order of mapped data in JSON, then you should transform the mapped data to an array and store that in JSON.</p>\n"}],"owner":{"account_id":23527255,"reputation":59,"user_id":17573553,"display_name":"Souvik Dey"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76465365,"answer_count":2,"score":-3,"last_activity_date":1686662376,"creation_date":1686659527,"question_id":76464985,"body_markdown":"Suppose we have a block of JAVA code which is iterating through the JSON file. \r\n\r\n**JAVAfile**\r\n```   \r\n        // getting phoneNumbers\r\n        JSONArray ja = (JSONArray) jo.get(&quot;phoneNumbers&quot;);//jo is the JSONObject of the given JSON \r\n        //Iterating through phonenumbers \r\n        Iterator itr2 = ja.iterator();\r\n          \r\n        while (itr2.hasNext()) \r\n        {\r\n            Iterator&lt;Map.Entry&gt;itr1 = ((Map)itr2.next()).entrySet().iterator();\r\n            while (itr1.hasNext()) {\r\n                Map.Entry pair = itr1.next();\r\n                System.out.println(pair.getKey() + &quot; : &quot; + pair.getValue());\r\n            }\r\n        }\r\n```\r\n\r\n**JSONfile**\r\n```\r\n{\r\n    &quot;firstName&quot;: &quot;Souvik&quot;,\r\n    &quot;lastName&quot;: &quot;Dey&quot;,\r\n    &quot;address&quot;: {\r\n        &quot;streetAddress&quot;: &quot;D P Rd&quot;,\r\n        &quot;city&quot;: &quot;Barasat&quot;,\r\n        &quot;state&quot;: &quot;WB&quot;,\r\n        &quot;postalCode&quot;: 700126\r\n    },\r\n    &quot;age&quot;: 23,\r\n    &quot;phoneNumbers&quot;: [\r\n        {\r\n            &quot;type&quot;: &quot;personal&quot;,\r\n            &quot;number&quot;: &quot;#######23&quot;\r\n        },\r\n        {\r\n            &quot;type&quot;: &quot;office&quot;,\r\n            &quot;number&quot;: &quot;########&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\n**Question** \r\n\r\nWhy am I getting this: \r\n_____________________________________________________________\r\n**Output**\r\n\r\n&gt; number : #######23  \r\n&gt; type : personal  \r\n&gt; number : ########  \r\n&gt; type : office\r\n\r\n**Expectations**\r\n\r\n&gt; type : personal  \r\n&gt; number : #######23  \r\n&gt; type : office   \r\n&gt; number : ########  \r\n______________________________________________________________","title":"Why Iterator suddenly printed the map elements in reverse order?","body":"<p>Suppose we have a block of JAVA code which is iterating through the JSON file.</p>\n<p><strong>JAVAfile</strong></p>\n<pre><code>        // getting phoneNumbers\n        JSONArray ja = (JSONArray) jo.get(&quot;phoneNumbers&quot;);//jo is the JSONObject of the given JSON \n        //Iterating through phonenumbers \n        Iterator itr2 = ja.iterator();\n          \n        while (itr2.hasNext()) \n        {\n            Iterator&lt;Map.Entry&gt;itr1 = ((Map)itr2.next()).entrySet().iterator();\n            while (itr1.hasNext()) {\n                Map.Entry pair = itr1.next();\n                System.out.println(pair.getKey() + &quot; : &quot; + pair.getValue());\n            }\n        }\n</code></pre>\n<p><strong>JSONfile</strong></p>\n<pre><code>{\n    &quot;firstName&quot;: &quot;Souvik&quot;,\n    &quot;lastName&quot;: &quot;Dey&quot;,\n    &quot;address&quot;: {\n        &quot;streetAddress&quot;: &quot;D P Rd&quot;,\n        &quot;city&quot;: &quot;Barasat&quot;,\n        &quot;state&quot;: &quot;WB&quot;,\n        &quot;postalCode&quot;: 700126\n    },\n    &quot;age&quot;: 23,\n    &quot;phoneNumbers&quot;: [\n        {\n            &quot;type&quot;: &quot;personal&quot;,\n            &quot;number&quot;: &quot;#######23&quot;\n        },\n        {\n            &quot;type&quot;: &quot;office&quot;,\n            &quot;number&quot;: &quot;########&quot;\n        }\n    ]\n}\n</code></pre>\n<p><strong>Question</strong></p>\n<p>Why am I getting this:</p>\n<hr />\n<p><strong>Output</strong></p>\n<blockquote>\n<p>number : #######23<br />\ntype : personal<br />\nnumber : ########<br />\ntype : office</p>\n</blockquote>\n<p><strong>Expectations</strong></p>\n<blockquote>\n<p>type : personal<br />\nnumber : #######23<br />\ntype : office<br />\nnumber : ########</p>\n</blockquote>\n<hr />\n"},{"tags":["java","spring-boot","cassandra","cqlsh","spring-data-cassandra"],"answers":[{"comments":[{"owner":{"account_id":6932559,"reputation":9427,"user_id":5321614,"accept_rate":89,"display_name":"Prafulla Kumar Sahu"},"score":0,"creation_date":1686665652,"post_id":76465201,"comment_id":134828298,"body_markdown":"There are annotation like `@SASI.NonTokenizingAnalyzed` and `@SASI.StandardAnalyzed` I tried both but it does not work, the above table structure is with `@SASI.NonTokenizingAnalyzed` but not working, will check how to use Cassandra.yaml file in springboot.","body":"There are annotation like <code>@SASI.NonTokenizingAnalyzed</code> and <code>@SASI.StandardAnalyzed</code> I tried both but it does not work, the above table structure is with <code>@SASI.NonTokenizingAnalyzed</code> but not working, will check how to use Cassandra.yaml file in springboot."},{"owner":{"account_id":6932559,"reputation":9427,"user_id":5321614,"accept_rate":89,"display_name":"Prafulla Kumar Sahu"},"score":1,"creation_date":1686846273,"post_id":76465201,"comment_id":134857494,"body_markdown":"With docker, I could not change the Cassandra.yaml file I changed and copied inside container multiple times with `docker cp /opt/homebrew/var/services/git/hipi-cassandra-be-service/cassandra.yaml cassandra:\\etc\\cassandra\\cassandra.yaml` it does not work, but without docker, I could change it and get it work. path of the file in macOS is /opt/homebrew/etc/cassandra/cassandra.yaml. Thank you so much.","body":"With docker, I could not change the Cassandra.yaml file I changed and copied inside container multiple times with <code>docker cp &#47;opt&#47;homebrew&#47;var&#47;services&#47;git&#47;hipi-cassandra-be-service&#47;cas&zwnj;&#8203;sandra.yaml cassandra:\\etc\\cassandra\\cassandra.yaml</code> it does not work, but without docker, I could change it and get it work. path of the file in macOS is /opt/homebrew/etc/cassandra/cassandra.yaml. Thank you so much."},{"owner":{"account_id":60456,"reputation":55971,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"score":1,"creation_date":1686852279,"post_id":76465201,"comment_id":134858701,"body_markdown":"@PrafullaKumarSahu excellent!  Glad you got it figured out.","body":"@PrafullaKumarSahu excellent!  Glad you got it figured out."}],"tags":[],"owner":{"account_id":60456,"reputation":55971,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686661047,"creation_date":1686661047,"answer_id":76465201,"question_id":76463629,"body_markdown":"To use `LIKE` filtering in CQL, you need to build your index as a SSTable Attached Secondary Index (SASI).  SASI indexes are considered to be &quot;experimental,&quot; so they are disabled by default.  To enable them, flip this setting in the `cassandra.yaml` for all nodes, and restart the cluster:\r\n\r\n    sasi_indexes_enabled: true\r\n\r\nNext, create your index like this:\r\n\r\n    CREATE CUSTOM INDEX books_name_idx ON abc.books (name)\r\n        USING &#39;org.apache.cassandra.index.sasi.SASIIndex&#39;;\r\n\r\nThen, this should work:\r\n\r\n    &gt; SELECT * FROM books WHERE name LIKE &#39;Mastering%&#39;;\r\n    \r\n     author_id | name                           | created_at                      | status\r\n    -----------+--------------------------------+---------------------------------+--------\r\n          6866 | Mastering Apache Cassandra 3.x | 2023-06-13 12:51:12.802000+0000 |   True\r\n    \r\n    (1 rows)\r\n\r\n","title":"spring data Cassandra LIKE query on secondary indexed cluster column","body":"<p>To use <code>LIKE</code> filtering in CQL, you need to build your index as a SSTable Attached Secondary Index (SASI).  SASI indexes are considered to be &quot;experimental,&quot; so they are disabled by default.  To enable them, flip this setting in the <code>cassandra.yaml</code> for all nodes, and restart the cluster:</p>\n<pre><code>sasi_indexes_enabled: true\n</code></pre>\n<p>Next, create your index like this:</p>\n<pre><code>CREATE CUSTOM INDEX books_name_idx ON abc.books (name)\n    USING 'org.apache.cassandra.index.sasi.SASIIndex';\n</code></pre>\n<p>Then, this should work:</p>\n<pre><code>&gt; SELECT * FROM books WHERE name LIKE 'Mastering%';\n\n author_id | name                           | created_at                      | status\n-----------+--------------------------------+---------------------------------+--------\n      6866 | Mastering Apache Cassandra 3.x | 2023-06-13 12:51:12.802000+0000 |   True\n\n(1 rows)\n</code></pre>\n"}],"owner":{"account_id":6932559,"reputation":9427,"user_id":5321614,"accept_rate":89,"display_name":"Prafulla Kumar Sahu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76465201,"answer_count":1,"score":1,"last_activity_date":1686662071,"creation_date":1686649606,"question_id":76463629,"body_markdown":"Java Version:\r\n \r\n    openjdk version &quot;20&quot; 2023-03-21\r\n    OpenJDK Runtime Environment (build 20+37)\r\n    OpenJDK 64-Bit Server VM (build 20+37, mixed mode, sharing)\r\n\r\nSpringboot Version: `3.0.1`\r\nCassandra Version: \r\n\r\n    cqlsh:hipi&gt; SHOW version;\r\n    [cqlsh 6.0.0 | Cassandra 4.0.7 | CQL spec 3.4.5 | Native protocol v5]\r\n\r\nTable description\r\n\r\n    cqlsh:abc&gt; DESCRIBE TABLE books;\r\n    \r\n    CREATE TABLE abc.books (\r\n        author_id text,\r\n        name text,\r\n        created_at timestamp,\r\n        status boolean,\r\n        PRIMARY KEY (author_id, name)\r\n    ) WITH CLUSTERING ORDER BY (name ASC)\r\n        AND additional_write_policy = &#39;99p&#39;\r\n        AND bloom_filter_fp_chance = 0.01\r\n        AND caching = {&#39;keys&#39;: &#39;ALL&#39;, &#39;rows_per_partition&#39;: &#39;NONE&#39;}\r\n        AND cdc = false\r\n        AND comment = &#39;&#39;\r\n        AND compaction = {&#39;class&#39;: &#39;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&#39;, &#39;max_threshold&#39;: &#39;32&#39;, &#39;min_threshold&#39;: &#39;4&#39;}\r\n        AND compression = {&#39;chunk_length_in_kb&#39;: &#39;16&#39;, &#39;class&#39;: &#39;org.apache.cassandra.io.compress.LZ4Compressor&#39;}\r\n        AND crc_check_chance = 1.0\r\n        AND default_time_to_live = 0\r\n        AND extensions = {}\r\n        AND gc_grace_seconds = 864000\r\n        AND max_index_interval = 2048\r\n        AND memtable_flush_period_in_ms = 0\r\n        AND min_index_interval = 128\r\n        AND read_repair = &#39;BLOCKING&#39;\r\n        AND speculative_retry = &#39;99p&#39;;\r\n    \r\n    CREATE INDEX books_name_idx ON abc.books (name);\r\n\r\n\r\n\r\nWhile querying with WHEN =\r\n\r\n    SELECT * FROM books WHERE name=&#39;8b481c6e-48a0-4552-a624-9e8fbad4f930&#39;;\r\n\r\nResult\r\n\r\n    cqlsh:hipi&gt; SELECT * FROM books WHERE name =&#39;8b481c6e-48a0-4552-a624-9e8fbad4f930&#39;;\r\n     author_id                            | name                                 | created_at                      | status\r\n    --------------------------------------+--------------------------------------+---------------------------------+--------\r\n     a1c08312-d8fe-46f8-b625-bf43da2a2920 | 8b481c6e-48a0-4552-a624-9e8fbad4f930 | 2023-06-13 09:36:07.311000+0000 |   True\r\n\r\nBut while using with LIKE\r\n\r\n    SELECT * FROM books WHERE name LIKE &#39;%8b4%&#39;;\r\n\r\nResult\r\n\r\n*InvalidRequest: Error from server: code=2200 [Invalid query] message=&quot;LIKE restriction is only supported on properly indexed columns. name LIKE &#39;%8b4%&#39; is not valid.&quot;*\r\n\r\n\r\n\r\n","title":"spring data Cassandra LIKE query on secondary indexed cluster column","body":"<p>Java Version:</p>\n<pre><code>openjdk version &quot;20&quot; 2023-03-21\nOpenJDK Runtime Environment (build 20+37)\nOpenJDK 64-Bit Server VM (build 20+37, mixed mode, sharing)\n</code></pre>\n<p>Springboot Version: <code>3.0.1</code>\nCassandra Version:</p>\n<pre><code>cqlsh:hipi&gt; SHOW version;\n[cqlsh 6.0.0 | Cassandra 4.0.7 | CQL spec 3.4.5 | Native protocol v5]\n</code></pre>\n<p>Table description</p>\n<pre><code>cqlsh:abc&gt; DESCRIBE TABLE books;\n\nCREATE TABLE abc.books (\n    author_id text,\n    name text,\n    created_at timestamp,\n    status boolean,\n    PRIMARY KEY (author_id, name)\n) WITH CLUSTERING ORDER BY (name ASC)\n    AND additional_write_policy = '99p'\n    AND bloom_filter_fp_chance = 0.01\n    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}\n    AND cdc = false\n    AND comment = ''\n    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}\n    AND compression = {'chunk_length_in_kb': '16', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}\n    AND crc_check_chance = 1.0\n    AND default_time_to_live = 0\n    AND extensions = {}\n    AND gc_grace_seconds = 864000\n    AND max_index_interval = 2048\n    AND memtable_flush_period_in_ms = 0\n    AND min_index_interval = 128\n    AND read_repair = 'BLOCKING'\n    AND speculative_retry = '99p';\n\nCREATE INDEX books_name_idx ON abc.books (name);\n</code></pre>\n<p>While querying with WHEN =</p>\n<pre><code>SELECT * FROM books WHERE name='8b481c6e-48a0-4552-a624-9e8fbad4f930';\n</code></pre>\n<p>Result</p>\n<pre><code>cqlsh:hipi&gt; SELECT * FROM books WHERE name ='8b481c6e-48a0-4552-a624-9e8fbad4f930';\n author_id                            | name                                 | created_at                      | status\n--------------------------------------+--------------------------------------+---------------------------------+--------\n a1c08312-d8fe-46f8-b625-bf43da2a2920 | 8b481c6e-48a0-4552-a624-9e8fbad4f930 | 2023-06-13 09:36:07.311000+0000 |   True\n</code></pre>\n<p>But while using with LIKE</p>\n<pre><code>SELECT * FROM books WHERE name LIKE '%8b4%';\n</code></pre>\n<p>Result</p>\n<p><em>InvalidRequest: Error from server: code=2200 [Invalid query] message=&quot;LIKE restriction is only supported on properly indexed columns. name LIKE '%8b4%' is not valid.&quot;</em></p>\n"},{"tags":["java","hibernate","tomcat"],"answers":[{"comments":[{"owner":{"account_id":6320729,"reputation":99,"user_id":4908914,"display_name":"Jakub Kr&#243;likowski"},"score":0,"creation_date":1686656322,"post_id":76460118,"comment_id":134826137,"body_markdown":"I believe that increasing _removeAbandonedTimeout_ parameter does not solve the issue and that is not what I asked. I am looking for a way to make `getCurrentSession` always take an active connection.  \nIn the second advice you are wrong. Closing the session is required when I would do `openSession` on _sessionFactory_. When I use `getCurrentSession` the session should not be closed. This is well explained [here](https://stackoverflow.com/questions/8046662/hibernate-opensession-vs-getcurrentsession).\nThe other comments are comments on code style and do not address my questions.","body":"I believe that increasing <i>removeAbandonedTimeout</i> parameter does not solve the issue and that is not what I asked. I am looking for a way to make <code>getCurrentSession</code> always take an active connection.   In the second advice you are wrong. Closing the session is required when I would do <code>openSession</code> on <i>sessionFactory</i>. When I use <code>getCurrentSession</code> the session should not be closed. This is well explained <a href=\"https://stackoverflow.com/questions/8046662/hibernate-opensession-vs-getcurrentsession\">here</a>. The other comments are comments on code style and do not address my questions."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686661746,"creation_date":1686601746,"answer_id":76460118,"question_id":76459650,"body_markdown":"**Advice No 1**\r\n\r\nAccording to Tomcat documentation:\r\n\r\n&gt; *removeAbandonedTimeout* - (int) Timeout in seconds before an abandoned(in use) connection can be removed. The default value is 60 (60 seconds). The value should be set to the longest running query your applications might have.\r\n\r\nYour setting is (only) 30 seconds. Set it *to the longest running query your applications might have*.\r\n\r\n**Advice No 2**\r\n\r\nThe code shared in the post can be improved: \r\n\r\n1. Call of session.beginTransaction() should be inside of the try/catch block.\r\n2. Exception must be re-thrown and not just logged.\r\n3. Session must be closed immediately when an exception occurred and transaction has been rolled back. In your code session is not closed at all. Add finally block like here:\r\n\r\n```\r\nSession session = sessionFactory.getCurrentSession();\r\nTransaction tx = null;\r\ntry {\r\n    tx = session.beginTransaction();\r\n    // …\r\n    tx.commit();\r\n} catch (Exception ex) {\r\n    if (tx != null) tx.rollback();\r\n    throw ex;\r\n}\r\nfinally {\r\n    session.close();\r\n}\r\n","title":"Hibernate, Tomcat JDBC Connection Pool and &quot;java.sql.SQLException: Connection has already been closed&quot;","body":"<p><strong>Advice No 1</strong></p>\n<p>According to Tomcat documentation:</p>\n<blockquote>\n<p><em>removeAbandonedTimeout</em> - (int) Timeout in seconds before an abandoned(in use) connection can be removed. The default value is 60 (60 seconds). The value should be set to the longest running query your applications might have.</p>\n</blockquote>\n<p>Your setting is (only) 30 seconds. Set it <em>to the longest running query your applications might have</em>.</p>\n<p><strong>Advice No 2</strong></p>\n<p>The code shared in the post can be improved:</p>\n<ol>\n<li>Call of session.beginTransaction() should be inside of the try/catch block.</li>\n<li>Exception must be re-thrown and not just logged.</li>\n<li>Session must be closed immediately when an exception occurred and transaction has been rolled back. In your code session is not closed at all. Add finally block like here:</li>\n</ol>\n<pre><code>Session session = sessionFactory.getCurrentSession();\nTransaction tx = null;\ntry {\n    tx = session.beginTransaction();\n    // …\n    tx.commit();\n} catch (Exception ex) {\n    if (tx != null) tx.rollback();\n    throw ex;\n}\nfinally {\n    session.close();\n}\n</code></pre>\n"}],"owner":{"account_id":6320729,"reputation":99,"user_id":4908914,"display_name":"Jakub Kr&#243;likowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686661746,"creation_date":1686597042,"question_id":76459650,"body_markdown":"I need help troubleshooting a problem that has been recurring for years.\r\nIt is about a web application, running on Tomcat 9. I am using Hibernate, Postgresql and Tomcat JDBC Connection Pool.\r\nThe application is running in autocommit=false and CURRENT_SESSION_CONTEXT_CLASS=thread mode.\r\n\r\nThese are the settings of Tomcat data source (JDBC connection pool):\r\n  \r\n\r\n      &lt;Resource name=&quot;xxx&quot; auth=&quot;Container&quot;\r\n              type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;org.postgresql.Driver&quot; factory=&quot;org.apache.tomcat.jdbc.pool.DataSourceFactory&quot;\r\n              url=&quot;jdbc:postgresql://localhost:5432/db&quot;\r\n              username=&quot;xxx&quot; password=&quot;xxx&quot; maxActive=&quot;200&quot; maxIdle=&quot;50&quot; minIdle=&quot;30&quot;\r\n              defaultAutoCommit=&quot;false&quot; jmxEnabled=&quot;false&quot;\r\n              jdbcInterceptors=&quot;org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport&quot;\r\n                removeAbandoned=&quot;true&quot;\r\n                removeAbandonedTimeout=&quot;30&quot;\r\n                logAbandoned=&quot;true&quot;\r\n                suspectTimeout=&quot;20&quot;\r\n                validationQuery=&quot;SELECT 1&quot;\r\n                testWhileIdle=&quot;true&quot;\r\n                timeBetweenEvictionRunsMillis=&quot;5000&quot;\r\n                minEvictableIdleTimeMillis=&quot;60000&quot;\r\n                testOnBorrow=&quot;true&quot;\r\n                validationInterval=&quot;10000&quot;\r\n                closeMethod=&quot;close&quot;\r\n    \r\n    /&gt;\r\n\r\nand Hibernate sessionFactory:\r\n\r\n    ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder().applySettings(...)\r\n    .applySetting( AvailableSettings.TRANSACTION_COORDINATOR_STRATEGY, &quot;jdbc&quot; )\r\n    .applySetting( AvailableSettings.CURRENT_SESSION_CONTEXT_CLASS, &quot;thread&quot; )\r\n    .applySetting( AvailableSettings.USE_NEW_ID_GENERATOR_MAPPINGS, false )\r\n    .applySetting( AvailableSettings.DIALECT, &quot;org.hibernate.dialect.PostgreSQL10Dialect&quot; )\r\n    .applySetting( AvailableSettings.DEFAULT_SCHEMA, &quot;public&quot; )\r\n    .applySetting( AvailableSettings.DRIVER, &quot;org.postgresql.Driver&quot; )\r\n    .applySetting( &quot;hibernate.temp.use_jdbc_metadata_defaults&quot;, false )\r\n    .build();\r\n    Metadata metadata = new MetadataSources(serviceRegistry)\r\n    \t\t\t.addAnnotatedClass(…).getMetadataBuilder().build();\r\n    sessionFactory = metadata.getSessionFactoryBuilder().build();\r\n\r\n\r\n\r\nThe pattern of executing commands to the database looks like this:\r\n\r\n    Session s = sessionFactory.getCurrentSession();\r\n    s.beginTransaction();\r\n    try {\r\n      …\r\n      …\r\n      s.getTransaction().commit();\r\n    } catch (Exception x) {\r\n      x.printStackTrace();\r\n      s.getTransaction().rollback();\r\n    }\r\n\r\n\r\nOnce in a while it happens that an operation in a try-catch takes a very long time to execute or there is a transaction leak due to a bug in the code and the transaction is not completed by either commit() or rollback(). These are obviously code bugs that need to be corrected.\r\nHowever, they are very costly, because they cause Tomcat to mark these transactions as &quot;abandoned&quot; after some time and remove them from the pool.\r\nThe problem is that Hibernate reacts badly to this, and in such a situation dozens of exceptions suddenly start being thrown:\r\n\r\n\r\n    org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [dispatcher] in context with path\r\n     [] threw exception [Request processing failed; nested exception is org.hibernate.TransactionException: JDBC begin transaction failed: ] with root cause\r\n            java.sql.SQLException: Connection has already been closed.\r\n                    at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:121)\r\n                    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\r\n                    at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:79)\r\n                    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\r\n                    at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:39)\r\n                    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\r\n                    at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:79)\r\n                    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\r\n                    at org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)\r\n                    at jdk.proxy2/jdk.proxy2.$Proxy92.setAutoCommit(Unknown Source)\r\n                    at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.begin(AbstractLogicalConnectionImplementor.java:72)\r\n                    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:285)\r\n                    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:246)\r\n                    at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)\r\n                    at org.hibernate.internal.AbstractSharedSessionContract.beginTransaction(AbstractSharedSessionContract.java:503)\r\n                    at jdk.internal.reflect.GeneratedMethodAccessor191.invoke(Unknown Source)\r\n                    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n                    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:351)\r\n                    at jdk.proxy3/jdk.proxy3.$Proxy91.beginTransaction(Unknown Source)\r\n\r\n\r\n\r\nThis exception is thrown at `Session.beginTransaction`.\r\n\r\nI have two questions:\r\n\r\n1. How to force Hibernate to simply take a new open connection from the Tomcat JDBC connection pool in such a situation? And report some kind of warning to System.out or log file.\r\n\r\n2. What methods do you use to find the bug in the code and locate uncommited transaction? \r\n\r\n","title":"Hibernate, Tomcat JDBC Connection Pool and &quot;java.sql.SQLException: Connection has already been closed&quot;","body":"<p>I need help troubleshooting a problem that has been recurring for years.\nIt is about a web application, running on Tomcat 9. I am using Hibernate, Postgresql and Tomcat JDBC Connection Pool.\nThe application is running in autocommit=false and CURRENT_SESSION_CONTEXT_CLASS=thread mode.</p>\n<p>These are the settings of Tomcat data source (JDBC connection pool):</p>\n<pre><code>  &lt;Resource name=&quot;xxx&quot; auth=&quot;Container&quot;\n          type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;org.postgresql.Driver&quot; factory=&quot;org.apache.tomcat.jdbc.pool.DataSourceFactory&quot;\n          url=&quot;jdbc:postgresql://localhost:5432/db&quot;\n          username=&quot;xxx&quot; password=&quot;xxx&quot; maxActive=&quot;200&quot; maxIdle=&quot;50&quot; minIdle=&quot;30&quot;\n          defaultAutoCommit=&quot;false&quot; jmxEnabled=&quot;false&quot;\n          jdbcInterceptors=&quot;org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport&quot;\n            removeAbandoned=&quot;true&quot;\n            removeAbandonedTimeout=&quot;30&quot;\n            logAbandoned=&quot;true&quot;\n            suspectTimeout=&quot;20&quot;\n            validationQuery=&quot;SELECT 1&quot;\n            testWhileIdle=&quot;true&quot;\n            timeBetweenEvictionRunsMillis=&quot;5000&quot;\n            minEvictableIdleTimeMillis=&quot;60000&quot;\n            testOnBorrow=&quot;true&quot;\n            validationInterval=&quot;10000&quot;\n            closeMethod=&quot;close&quot;\n\n/&gt;\n</code></pre>\n<p>and Hibernate sessionFactory:</p>\n<pre><code>ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder().applySettings(...)\n.applySetting( AvailableSettings.TRANSACTION_COORDINATOR_STRATEGY, &quot;jdbc&quot; )\n.applySetting( AvailableSettings.CURRENT_SESSION_CONTEXT_CLASS, &quot;thread&quot; )\n.applySetting( AvailableSettings.USE_NEW_ID_GENERATOR_MAPPINGS, false )\n.applySetting( AvailableSettings.DIALECT, &quot;org.hibernate.dialect.PostgreSQL10Dialect&quot; )\n.applySetting( AvailableSettings.DEFAULT_SCHEMA, &quot;public&quot; )\n.applySetting( AvailableSettings.DRIVER, &quot;org.postgresql.Driver&quot; )\n.applySetting( &quot;hibernate.temp.use_jdbc_metadata_defaults&quot;, false )\n.build();\nMetadata metadata = new MetadataSources(serviceRegistry)\n            .addAnnotatedClass(…).getMetadataBuilder().build();\nsessionFactory = metadata.getSessionFactoryBuilder().build();\n</code></pre>\n<p>The pattern of executing commands to the database looks like this:</p>\n<pre><code>Session s = sessionFactory.getCurrentSession();\ns.beginTransaction();\ntry {\n  …\n  …\n  s.getTransaction().commit();\n} catch (Exception x) {\n  x.printStackTrace();\n  s.getTransaction().rollback();\n}\n</code></pre>\n<p>Once in a while it happens that an operation in a try-catch takes a very long time to execute or there is a transaction leak due to a bug in the code and the transaction is not completed by either commit() or rollback(). These are obviously code bugs that need to be corrected.\nHowever, they are very costly, because they cause Tomcat to mark these transactions as &quot;abandoned&quot; after some time and remove them from the pool.\nThe problem is that Hibernate reacts badly to this, and in such a situation dozens of exceptions suddenly start being thrown:</p>\n<pre><code>org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [dispatcher] in context with path\n [] threw exception [Request processing failed; nested exception is org.hibernate.TransactionException: JDBC begin transaction failed: ] with root cause\n        java.sql.SQLException: Connection has already been closed.\n                at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:121)\n                at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\n                at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:79)\n                at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\n                at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:39)\n                at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\n                at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:79)\n                at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:109)\n                at org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)\n                at jdk.proxy2/jdk.proxy2.$Proxy92.setAutoCommit(Unknown Source)\n                at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.begin(AbstractLogicalConnectionImplementor.java:72)\n                at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:285)\n                at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:246)\n                at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)\n                at org.hibernate.internal.AbstractSharedSessionContract.beginTransaction(AbstractSharedSessionContract.java:503)\n                at jdk.internal.reflect.GeneratedMethodAccessor191.invoke(Unknown Source)\n                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n                at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:351)\n                at jdk.proxy3/jdk.proxy3.$Proxy91.beginTransaction(Unknown Source)\n</code></pre>\n<p>This exception is thrown at <code>Session.beginTransaction</code>.</p>\n<p>I have two questions:</p>\n<ol>\n<li><p>How to force Hibernate to simply take a new open connection from the Tomcat JDBC connection pool in such a situation? And report some kind of warning to System.out or log file.</p>\n</li>\n<li><p>What methods do you use to find the bug in the code and locate uncommited transaction?</p>\n</li>\n</ol>\n"},{"tags":["java","sql","sqlite"],"comments":[{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1686650681,"post_id":76463755,"comment_id":134824910,"body_markdown":"If you want to select all columns why not just do `select * from your_table` ?","body":"If you want to select all columns why not just do <code>select * from your_table</code> ?"},{"owner":{"account_id":2501724,"reputation":370,"user_id":2176630,"display_name":"redead"},"score":0,"creation_date":1686652693,"post_id":76463755,"comment_id":134825309,"body_markdown":"Guess I can&#39;t see the wood for the trees. I&#39;ll give it a shot and would hope that this is the easy fix.","body":"Guess I can&#39;t see the wood for the trees. I&#39;ll give it a shot and would hope that this is the easy fix."}],"answers":[{"comments":[{"owner":{"account_id":2501724,"reputation":370,"user_id":2176630,"display_name":"redead"},"score":0,"creation_date":1686652616,"post_id":76463881,"comment_id":134825290,"body_markdown":"Unless I&#39;m missing something this won&#39;t work as it will only use the default value &#39;no_column&#39; if the content of d is null. d however must exist in this solution.","body":"Unless I&#39;m missing something this won&#39;t work as it will only use the default value &#39;no_column&#39; if the content of d is null. d however must exist in this solution."},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1686653451,"post_id":76463881,"comment_id":134825486,"body_markdown":"oh shoot, you&#39;re right - we did this before using PRAGMA. We opened up a connection, then did a check to see column existed. If it did, then we chose which query to run. Let me go back an check","body":"oh shoot, you&#39;re right - we did this before using PRAGMA. We opened up a connection, then did a check to see column existed. If it did, then we chose which query to run. Let me go back an check"},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1686658842,"post_id":76463881,"comment_id":134826675,"body_markdown":"@redead Revised answer, I think this is what you need","body":"@redead Revised answer, I think this is what you need"}],"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658781,"creation_date":1686651518,"answer_id":76463881,"question_id":76463755,"body_markdown":"Use ```PRAGMA``` function with SQLite - [PRAGMA schema.table_info(table-name);][1]\r\n\r\n```java\r\n  String jdbc = &quot;jdbc:sqlite:your_database.db&quot;;\r\n  String tableName = &quot;data_table&quot;;\r\n  String columnName = &quot;d&quot;;\r\n\r\n  try (Connection conn = DriverManager.getConnection(jdbcUrl);\r\n       Statement statement = conn.createStatement()) {\r\n\r\n      // Check that column exists\r\n      ResultSet columns = statement.executeQuery(&quot;PRAGMA table_info(&quot; + tableName + &quot;)&quot;);\r\n      boolean columnExists = false;\r\n      while (columns.next()) {\r\n          if (columns.getString(&quot;name&quot;).equalsIgnoreCase(columnName)) {\r\n              columnExists = true;\r\n              break;\r\n          }\r\n      }\r\n\r\n      String query;\r\n      if (columnExists) {\r\n          query = &quot;SELECT a, b, c, d FROM &quot; + tableName;\r\n      } else {\r\n          query = &quot;SELECT a, b, c FROM &quot; + tableName;\r\n      }\r\n\r\n      ResultSet result = statement.executeQuery(query);\r\n\r\n```\r\n\r\n\r\n  [1]: https://www.sqlite.org/pragma.html#pragma_table_info","title":"SQL conditionally select optional column","body":"<p>Use <code>PRAGMA</code> function with SQLite - <a href=\"https://www.sqlite.org/pragma.html#pragma_table_info\" rel=\"nofollow noreferrer\">PRAGMA schema.table_info(table-name);</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>  String jdbc = &quot;jdbc:sqlite:your_database.db&quot;;\n  String tableName = &quot;data_table&quot;;\n  String columnName = &quot;d&quot;;\n\n  try (Connection conn = DriverManager.getConnection(jdbcUrl);\n       Statement statement = conn.createStatement()) {\n\n      // Check that column exists\n      ResultSet columns = statement.executeQuery(&quot;PRAGMA table_info(&quot; + tableName + &quot;)&quot;);\n      boolean columnExists = false;\n      while (columns.next()) {\n          if (columns.getString(&quot;name&quot;).equalsIgnoreCase(columnName)) {\n              columnExists = true;\n              break;\n          }\n      }\n\n      String query;\n      if (columnExists) {\n          query = &quot;SELECT a, b, c, d FROM &quot; + tableName;\n      } else {\n          query = &quot;SELECT a, b, c FROM &quot; + tableName;\n      }\n\n      ResultSet result = statement.executeQuery(query);\n\n</code></pre>\n"}],"owner":{"account_id":2501724,"reputation":370,"user_id":2176630,"display_name":"redead"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686661585,"creation_date":1686650474,"question_id":76463755,"body_markdown":"I&#39;m given an SQLite db that contains either the columns a,b,c or a,b,c,d based on its version which I&#39;m unaware of.\r\n\r\nIs there an elegant way to select d if it exists and not crash if it doesn&#39;t?\r\nI can catch the occurring exception when executing the query and try a select without d, but this seems to me like an unsafe way.","title":"SQL conditionally select optional column","body":"<p>I'm given an SQLite db that contains either the columns a,b,c or a,b,c,d based on its version which I'm unaware of.</p>\n<p>Is there an elegant way to select d if it exists and not crash if it doesn't?\nI can catch the occurring exception when executing the query and try a select without d, but this seems to me like an unsafe way.</p>\n"},{"tags":["java","mongodb","spring-boot","mongotemplate"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686659303,"post_id":76464925,"comment_id":134826821,"body_markdown":"Have you tried `mongoTemplate.findAll(Hierarchy.class)`?","body":"Have you tried <code>mongoTemplate.findAll(Hierarchy.class)</code>?"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1686659709,"post_id":76464925,"comment_id":134826921,"body_markdown":"Thanks but this would apply only for a searching documents use case. But I need to pass Query to update, remove and other methods. So I am seeking for {} query.","body":"Thanks but this would apply only for a searching documents use case. But I need to pass Query to update, remove and other methods. So I am seeking for {} query."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686660302,"post_id":76464925,"comment_id":134827058,"body_markdown":"have you tried `new BasicQuery(&quot;{}&quot;)` instead of the `Query` interface? That allows you to specify the exact query, which should give you what you want/need?","body":"have you tried <code>new BasicQuery(&quot;{}&quot;)</code> instead of the <code>Query</code> interface? That allows you to specify the exact query, which should give you what you want/need?"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1686661268,"post_id":76464925,"comment_id":134827281,"body_markdown":"Cool, I did not know this subclass","body":"Cool, I did not know this subclass"}],"answers":[{"tags":[],"owner":{"account_id":12271613,"reputation":561,"user_id":8956618,"display_name":"Subhash Rawat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686661526,"creation_date":1686661526,"answer_id":76465276,"question_id":76464925,"body_markdown":"you can use the following code to retrieve all documents from a collection using the MongoTemplate API in Java:\r\n\r\n```\r\nList&lt;Hierarchy&gt; hierarchies = mongoTemplate.find(new Query(),Hierarchy.class);\r\n```","title":"MongoTemplate equivalent of match all Criteria","body":"<p>you can use the following code to retrieve all documents from a collection using the MongoTemplate API in Java:</p>\n<pre><code>List&lt;Hierarchy&gt; hierarchies = mongoTemplate.find(new Query(),Hierarchy.class);\n</code></pre>\n"}],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76465276,"answer_count":1,"score":2,"last_activity_date":1686661526,"creation_date":1686659118,"question_id":76464925,"body_markdown":"In Mongosh I can pass an empty object `{}` to match all documents. I cannot find an equivalent in Java MongoTemplate API. The closest is:\r\n\r\n    Query query = Query.query(Criteria.where(&quot;_id&quot;).exists(true));\r\n    List&lt;Hierarchy&gt; hierarchies = mongoTemplate.find(query, Hierarchy.class);\r\n\r\nwhich translates as\r\n\r\n    { &quot;_id&quot; : { &quot;$exists&quot; : true}}\r\n\r\nIs there some better way?","title":"MongoTemplate equivalent of match all Criteria","body":"<p>In Mongosh I can pass an empty object <code>{}</code> to match all documents. I cannot find an equivalent in Java MongoTemplate API. The closest is:</p>\n<pre><code>Query query = Query.query(Criteria.where(&quot;_id&quot;).exists(true));\nList&lt;Hierarchy&gt; hierarchies = mongoTemplate.find(query, Hierarchy.class);\n</code></pre>\n<p>which translates as</p>\n<pre><code>{ &quot;_id&quot; : { &quot;$exists&quot; : true}}\n</code></pre>\n<p>Is there some better way?</p>\n"},{"tags":["java","arrays","json","collections"],"comments":[{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1686641913,"post_id":76461978,"comment_id":134823104,"body_markdown":"please write the code you have tried so far , so that we can help you better","body":"please write the code you have tried so far , so that we can help you better"},{"owner":{"account_id":3963844,"reputation":23,"user_id":3270348,"display_name":"arunpatil1988"},"score":0,"creation_date":1686661154,"post_id":76461978,"comment_id":134827249,"body_markdown":"@ShilaMosammami : I have added the code to make it more easy to understand what i have tried. Thanks for the input.","body":"@ShilaMosammami : I have added the code to make it more easy to understand what i have tried. Thanks for the input."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686672911,"post_id":76461978,"comment_id":134830173,"body_markdown":"Why do you think that you need to “know before hand how many array elements are going to be there”?","body":"Why do you think that you need to “know before hand how many array elements are going to be there”?"},{"owner":{"account_id":3963844,"reputation":23,"user_id":3270348,"display_name":"arunpatil1988"},"score":0,"creation_date":1686676294,"post_id":76461978,"comment_id":134830850,"body_markdown":"@Holger Oh that is because, The user can go on and on giving input of his choice. He can give multiple set of  getuserValue1 /2/3. If i knew there would be 5 times then I can declare 5objects of XYZ and access that n5number of objects in Class B. Since i don&#39;t know the value of XYZ array, i created array of XYZ objects, initially declaring the size of array to be 20.","body":"@Holger Oh that is because, The user can go on and on giving input of his choice. He can give multiple set of  getuserValue1 /2/3. If i knew there would be 5 times then I can declare 5objects of XYZ and access that n5number of objects in Class B. Since i don&#39;t know the value of XYZ array, i created array of XYZ objects, initially declaring the size of array to be 20."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686725753,"post_id":76461978,"comment_id":134836845,"body_markdown":"If you think, the challenge is the dynamic number of elements, implement a working solution for a fixed number of elements and come back. We will be happy to help you then. The thing you’ve posted contains scrambled elements of the Java programming language, but not an honest attempt to solve the problem.","body":"If you think, the challenge is the dynamic number of elements, implement a working solution for a fixed number of elements and come back. We will be happy to help you then. The thing you’ve posted contains scrambled elements of the Java programming language, but not an honest attempt to solve the problem."},{"owner":{"account_id":3963844,"reputation":23,"user_id":3270348,"display_name":"arunpatil1988"},"score":0,"creation_date":1686759448,"post_id":76461978,"comment_id":134844365,"body_markdown":"Thanks, i think the above code works , the issue was with how i am reading the Json elements in class B. Fixed it in the code","body":"Thanks, i think the above code works , the issue was with how i am reading the Json elements in class B. Fixed it in the code"}],"owner":{"account_id":3963844,"reputation":23,"user_id":3270348,"display_name":"arunpatil1988"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686661094,"creation_date":1686635050,"question_id":76461978,"body_markdown":"I need to create a json , which has an array with multiple elements. I am able to create json array dynamically and add it json object. However my situation is i would not know before hand how many array elements are going to be there. Its dynamic based on users session. \r\nExample \r\n```\r\n{\r\n    &quot;ABC&quot;: {\r\n        &quot;name&quot;: &quot;&quot;,\r\n        &quot;dob&quot;: &quot;&quot;,\r\n        &quot;zip&quot;: &quot;&quot;\r\n    },\t\r\n\t&quot;XYZ&quot;: [\r\n        {\r\n            &quot;XYZ_1&quot;: &quot;&quot;,\r\n            &quot;XYZ_2&quot;: &quot;&quot;,\r\n            &quot;XYZ_3&quot;: &quot;&quot;,         \r\n        },\r\n\t    {\r\n            &quot;XYZ_1&quot;: &quot;&quot;,\r\n            &quot;XYZ_2&quot;: &quot;&quot;,\r\n            &quot;XYZ_3&quot;: &quot;&quot;,\r\n        }\r\n    ]\r\n}\r\n\r\n```\r\nI have class A, where i collect value of XYZ_1,XYZ_2..3. I am able to collect these values as string from user. Again some processing happens and Class A is called and same set of data is collected. It is dynamic as to how many times the XYZ array elements are collected. Only at the end of the session is where i have prepare this json from say Class B and post it as json. How would i do this is Java. I tried many ways using a bean class (setter and getter). Create object array, store the array and read it at class B. But often ended up with null pointer exception. Even I couldn&#39;t make chatGPT answer me. Kindly help.\r\n\r\nThe code i have written so far.\r\n\r\n```\r\n\r\n@Data\r\npublic class XYZ{\r\nprivate String XYZ_1;\r\nprivate String XYZ_2;\r\nprivate String XYZ_3; \r\nprivate static List&lt;XYZ&gt; myList = new ArrayList&lt;&gt;();\r\nprivate static XYZ[] xyzArray;\r\n\r\npublic XYZ(string a, String b, String c){\r\n    this.XYZ_1 = a;\r\n\tthis.XYZ_1 = b;\r\n\tthis.XYZ_1 = c;\r\n}\r\npublic static void setXYZArray(XYZ array1) {\r\n\tmyList.add(array1);\r\n}\r\npublic static void setXYZArray2(XYZ[] array1) {\r\n    xyzArray = array1;\r\n}\r\n\r\npublic static XYZ[] getXYZArray() {\r\n    return xyzArray;\r\n}\r\n}\r\n\r\nClass A{\r\n//Trying to set the values and objects to read later\r\npublic static void main(mysession){\r\npublic static XYZ[] details = new  XYZ[20];\r\nString xyz_1=mysession.getuserValue1();\r\nString xyz_2=mysession.getuserValue2();\r\nString xyz_3=mysession.getuserValue3();\r\nint counter = mysession.getCounter();\r\n\r\ndetails[counter] = new XYZ (xyz_1, xyz_2, xyz_3);\r\nXYZ.setXYZArray2(details); //try1\r\nXYZ.setXYZArray(details[Counter]); //try2\r\n}\r\n}\r\n\r\nClass B{\r\n//trying to read the values and generate the Json\r\nXYZ xyzDet = new XYZ();\r\nList&lt;XYZ&gt; myList = xyzDet.getMyList();\r\nXYZ[] xyzArray = XYZ.getXYZArray();\r\nJSONObject xyzObj = new JSONObject();\r\nJSONArray xyzArray = new JSONArray();\r\nJSONObject json = new JSONObject();\r\n\r\nfor(XYZ details : myList)\r\n{\r\n    xyzObj.put(&quot;xyz_1&quot;, details.xyz_1());\r\n\txyzObj.put(&quot;xyz_2&quot;,details.xyz_2());\r\n\txyzObj.put(&quot;xyz_3&quot;,details.xyz_3());\r\n    xyzArray.put(xyzObj);\r\n\r\n}\r\njson.put(&quot;XYZ&quot;,xyzArray)\r\n\r\n```\r\nAppreciate and thank you in advance.","title":"Java collections to create dynamic json array","body":"<p>I need to create a json , which has an array with multiple elements. I am able to create json array dynamically and add it json object. However my situation is i would not know before hand how many array elements are going to be there. Its dynamic based on users session.\nExample</p>\n<pre><code>{\n    &quot;ABC&quot;: {\n        &quot;name&quot;: &quot;&quot;,\n        &quot;dob&quot;: &quot;&quot;,\n        &quot;zip&quot;: &quot;&quot;\n    },  \n    &quot;XYZ&quot;: [\n        {\n            &quot;XYZ_1&quot;: &quot;&quot;,\n            &quot;XYZ_2&quot;: &quot;&quot;,\n            &quot;XYZ_3&quot;: &quot;&quot;,         \n        },\n        {\n            &quot;XYZ_1&quot;: &quot;&quot;,\n            &quot;XYZ_2&quot;: &quot;&quot;,\n            &quot;XYZ_3&quot;: &quot;&quot;,\n        }\n    ]\n}\n\n</code></pre>\n<p>I have class A, where i collect value of XYZ_1,XYZ_2..3. I am able to collect these values as string from user. Again some processing happens and Class A is called and same set of data is collected. It is dynamic as to how many times the XYZ array elements are collected. Only at the end of the session is where i have prepare this json from say Class B and post it as json. How would i do this is Java. I tried many ways using a bean class (setter and getter). Create object array, store the array and read it at class B. But often ended up with null pointer exception. Even I couldn't make chatGPT answer me. Kindly help.</p>\n<p>The code i have written so far.</p>\n<pre><code>\n@Data\npublic class XYZ{\nprivate String XYZ_1;\nprivate String XYZ_2;\nprivate String XYZ_3; \nprivate static List&lt;XYZ&gt; myList = new ArrayList&lt;&gt;();\nprivate static XYZ[] xyzArray;\n\npublic XYZ(string a, String b, String c){\n    this.XYZ_1 = a;\n    this.XYZ_1 = b;\n    this.XYZ_1 = c;\n}\npublic static void setXYZArray(XYZ array1) {\n    myList.add(array1);\n}\npublic static void setXYZArray2(XYZ[] array1) {\n    xyzArray = array1;\n}\n\npublic static XYZ[] getXYZArray() {\n    return xyzArray;\n}\n}\n\nClass A{\n//Trying to set the values and objects to read later\npublic static void main(mysession){\npublic static XYZ[] details = new  XYZ[20];\nString xyz_1=mysession.getuserValue1();\nString xyz_2=mysession.getuserValue2();\nString xyz_3=mysession.getuserValue3();\nint counter = mysession.getCounter();\n\ndetails[counter] = new XYZ (xyz_1, xyz_2, xyz_3);\nXYZ.setXYZArray2(details); //try1\nXYZ.setXYZArray(details[Counter]); //try2\n}\n}\n\nClass B{\n//trying to read the values and generate the Json\nXYZ xyzDet = new XYZ();\nList&lt;XYZ&gt; myList = xyzDet.getMyList();\nXYZ[] xyzArray = XYZ.getXYZArray();\nJSONObject xyzObj = new JSONObject();\nJSONArray xyzArray = new JSONArray();\nJSONObject json = new JSONObject();\n\nfor(XYZ details : myList)\n{\n    xyzObj.put(&quot;xyz_1&quot;, details.xyz_1());\n    xyzObj.put(&quot;xyz_2&quot;,details.xyz_2());\n    xyzObj.put(&quot;xyz_3&quot;,details.xyz_3());\n    xyzArray.put(xyzObj);\n\n}\njson.put(&quot;XYZ&quot;,xyzArray)\n\n</code></pre>\n<p>Appreciate and thank you in advance.</p>\n"},{"tags":["java","list","file"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1544097275,"post_id":53650506,"comment_id":94159729,"body_markdown":"A) read about java naming conventions &quot;_&quot; has no place in class names. B) this site is primarily English. So posting a lot of non-English source code *dramatically* \n decreases your chances of getting good answers C) read about **clean code** . Your poor method is doing way too many things. You should put each &quot;functionality&quot; in its own method (or class), with clear, reasonable interfaces between them.","body":"A) read about java naming conventions &quot;_&quot; has no place in class names. B) this site is primarily English. So posting a lot of non-English source code <i>dramatically</i>   decreases your chances of getting good answers C) read about <b>clean code</b> . Your poor method is doing way too many things. You should put each &quot;functionality&quot; in its own method (or class), with clear, reasonable interfaces between them."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1544097351,"post_id":53650506,"comment_id":94159771,"body_markdown":"In other words: just the way you present your input here makes me think &quot;I dont want to spend my time reading it&quot;. Others obviously don&#39;t mind, yet: the more people *want* to read your code, the better for you.","body":"In other words: just the way you present your input here makes me think &quot;I dont want to spend my time reading it&quot;. Others obviously don&#39;t mind, yet: the more people <i>want</i> to read your code, the better for you."},{"owner":{"account_id":331275,"reputation":3837,"user_id":655855,"display_name":"Shamit Verma"},"score":0,"creation_date":1544101564,"post_id":53650506,"comment_id":94162332,"body_markdown":"What is the elapsed time if you comment out string building code ?","body":"What is the elapsed time if you comment out string building code ?"},{"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"score":0,"creation_date":1544107560,"post_id":53650506,"comment_id":94166248,"body_markdown":"@Shamit Verma, 13 minutes.","body":"@Shamit Verma, 13 minutes."},{"owner":{"account_id":331275,"reputation":3837,"user_id":655855,"display_name":"Shamit Verma"},"score":0,"creation_date":1544107963,"post_id":53650506,"comment_id":94166507,"body_markdown":"Can you create a reproducible test-case ? (I.e. maybe post data + code after removing / masking sensitive data)","body":"Can you create a reproducible test-case ? (I.e. maybe post data + code after removing / masking sensitive data)"},{"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"score":0,"creation_date":1544111138,"post_id":53650506,"comment_id":94168397,"body_markdown":"@Shamit Verma, i update my question. Was that what you were talking about?","body":"@Shamit Verma, i update my question. Was that what you were talking about?"}],"answers":[{"comments":[{"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"score":0,"creation_date":1544097034,"post_id":53650714,"comment_id":94159624,"body_markdown":"The problem &#233; my function ? Could you explain?","body":"The problem &#233; my function ? Could you explain?"}],"tags":[],"owner":{"account_id":9232169,"reputation":755,"user_id":6857910,"display_name":"Hans Schreuder"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544097085,"creation_date":1544096611,"answer_id":53650714,"question_id":53650506,"body_markdown":"    private File writeRecords(String filenaam, List&lt;String&gt; records) throws IOException\r\n    {\r\n        File file = new File(filenaam);\r\n        try (FileOutputStream fos = new FileOutputStream(file); \r\n             PrintWriter writer = new PrintWriter(fos))\r\n        {\r\n            records.forEach(rec -&gt; writer.println(rec));\r\n            writer.flush();\r\n        }\r\n        return file;\r\n    }\r\n\r\nAnd if you want to compress the file:\r\n    \r\n    private void compressFiles(String zipfile, List&lt;File&gt; files) throws IOException\r\n    {\r\n        try (FileOutputStream fos = new FileOutputStream(zipfile);\r\n                ZipOutputStream zos = new ZipOutputStream(new BufferedOutputStream(fos)))\r\n        {\r\n            for (File file : files)\r\n            {\r\n                ZipEntry entry = new ZipEntry(file.getName());\r\n                byte[] bytes = Files.readAllBytes(Paths.get(file.getAbsolutePath()));\r\n                zos.putNextEntry(entry);\r\n                zos.write(bytes, 0, bytes.length);\r\n                zos.closeEntry();\r\n            }\r\n            zos.finish();\r\n            zos.flush();\r\n        }\r\n    }","title":"Fastest way to write a list of object extracted from two databases to an txt file in Java","body":"<pre><code>private File writeRecords(String filenaam, List&lt;String&gt; records) throws IOException\n{\n    File file = new File(filenaam);\n    try (FileOutputStream fos = new FileOutputStream(file); \n         PrintWriter writer = new PrintWriter(fos))\n    {\n        records.forEach(rec -&gt; writer.println(rec));\n        writer.flush();\n    }\n    return file;\n}\n</code></pre>\n\n<p>And if you want to compress the file:</p>\n\n<pre><code>private void compressFiles(String zipfile, List&lt;File&gt; files) throws IOException\n{\n    try (FileOutputStream fos = new FileOutputStream(zipfile);\n            ZipOutputStream zos = new ZipOutputStream(new BufferedOutputStream(fos)))\n    {\n        for (File file : files)\n        {\n            ZipEntry entry = new ZipEntry(file.getName());\n            byte[] bytes = Files.readAllBytes(Paths.get(file.getAbsolutePath()));\n            zos.putNextEntry(entry);\n            zos.write(bytes, 0, bytes.length);\n            zos.closeEntry();\n        }\n        zos.finish();\n        zos.flush();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"score":0,"creation_date":1544097917,"post_id":53650871,"comment_id":94160119,"body_markdown":"I updated with the result of the query. After retrieving the giant text, I write. At each turn, I need to update the status of each item ... because I can not update later","body":"I updated with the result of the query. After retrieving the giant text, I write. At each turn, I need to update the status of each item ... because I can not update later"}],"tags":[],"owner":{"account_id":182324,"reputation":398,"user_id":416932,"display_name":"Wojtek Mlodzianowski"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544097159,"creation_date":1544097159,"answer_id":53650871,"question_id":53650506,"body_markdown":"You have 2 problems:\r\n\r\n1 - you are actually not doing the write to the file, but returning some big String. I don&#39;t think processing such large lists in memory is good idea.\r\n\r\n2 - How are you doing the update? I guess the problem is that you are hitting db every row. You should think how to do it at once.","title":"Fastest way to write a list of object extracted from two databases to an txt file in Java","body":"<p>You have 2 problems:</p>\n\n<p>1 - you are actually not doing the write to the file, but returning some big String. I don't think processing such large lists in memory is good idea.</p>\n\n<p>2 - How are you doing the update? I guess the problem is that you are hitting db every row. You should think how to do it at once.</p>\n"},{"comments":[{"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"score":0,"creation_date":1544107666,"post_id":53650887,"comment_id":94166330,"body_markdown":"I did some tests, but the time was the same","body":"I did some tests, but the time was the same"}],"tags":[],"owner":{"account_id":14436755,"reputation":448,"user_id":10428563,"display_name":"Java-Dev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544097211,"creation_date":1544097211,"answer_id":53650887,"question_id":53650506,"body_markdown":"This link may helpful for your performance issue,\r\nthis may be not file writing problem but as far as I believe the issue is String manipulation problem. \r\n[What&#39;s the fastest way to concatenate two Strings in Java?\r\n][1] \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5076740/whats-the-fastest-way-to-concatenate-two-strings-in-java","title":"Fastest way to write a list of object extracted from two databases to an txt file in Java","body":"<p>This link may helpful for your performance issue,\nthis may be not file writing problem but as far as I believe the issue is String manipulation problem. \n<a href=\"https://stackoverflow.com/questions/5076740/whats-the-fastest-way-to-concatenate-two-strings-in-java\">What's the fastest way to concatenate two Strings in Java?\n</a> </p>\n"},{"tags":[],"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1544607935,"creation_date":1544607935,"answer_id":53740166,"question_id":53650506,"body_markdown":"i solved my problem. I&#39;ve changed logic. The actual problem was doing many SELECT in the database and this was making it extremely slow. Now is a single SELECT. The total time is now **6 seconds.**","title":"Fastest way to write a list of object extracted from two databases to an txt file in Java","body":"<p>i solved my problem. I've changed logic. The actual problem was doing many SELECT in the database and this was making it extremely slow. Now is a single SELECT. The total time is now <strong>6 seconds.</strong></p>\n"}],"owner":{"account_id":8148831,"reputation":625,"user_id":6136603,"display_name":"Edi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1101,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":53740166,"answer_count":4,"score":2,"last_activity_date":1686661009,"creation_date":1544095969,"question_id":53650506,"body_markdown":"I have a function that searches for a list and for each item in the list I have another list. These two lists will have to be transformed into a text file to be imported into a software. The problem I&#39;m having is slow ... \r\n\r\nMy first list has about 500 records, and every record in that list has another list that can range from 1 record to infinity. This takes about 20 minutes to complete. **When I comment the updates (updates the status of each item of the 2 list) the time drops to 9 minutes**. \r\n\r\nCan someone help me ?\r\n\r\n    private String getExportacaoApontamento(\r\n                String idsExportar,\r\n                String dataInicial,\r\n                String dataFinal,\r\n                String status,\r\n                String tipoFiltro,\r\n                String filtro,\r\n                String turma,\r\n                boolean exportarTodos) throws SQLException {\r\n            StringBuilder stringBuilder = new StringBuilder();        \r\n    \r\n            try (\r\n                    Connection conMySql = U_Conexao.getConexaoMySQL();\r\n                    Connection conOracle = U_Conexao.getConexaoOracle()) {\r\n    \r\n                if (conMySql != null) {\r\n                    List&lt;C_Sequencia&gt; listSequencia;\r\n                    R_Sequencia r_Sequencia = new R_Sequencia(conMySql, null);\r\n    \r\n                    if (status.equals(String.valueOf(C_Status.TODOS))) {\r\n                        status = C_Status.PENDENTE + &quot;, &quot; + C_Status.EXPORTADO;\r\n                    }\r\n    \r\n                    String orderBy = &quot;S.&quot; + C_Sequencia.DATA + &quot;, S.&quot; + C_Sequencia.COD_COLETOR + &quot;, S.&quot; + C_Sequencia.COD_FISCAL;\r\n    \r\n                    if (exportarTodos == false) {\r\n                        listSequencia = r_Sequencia.listExportarId(idsExportar, dataInicial, dataFinal, orderBy);\r\n                    } else {\r\n                        tipoFiltro = verificarFiltroApontamento(tipoFiltro);\r\n    \r\n                        if (filtro == null || filtro.isEmpty()) {\r\n                            listSequencia = r_Sequencia.listExportarData(dataInicial, dataFinal, status, turma, orderBy);\r\n                        } else {\r\n                            listSequencia = r_Sequencia.listExportarFiltro(dataInicial, dataFinal, tipoFiltro, filtro, status, turma, orderBy);\r\n                        }\r\n                    }\r\n    \r\n                    if (!listSequencia.isEmpty()) {\r\n    \r\n                        if (!verificarLiberacoes(listSequencia, conMySql, conOracle)) {\r\n                            return &quot;-1&quot;;\r\n                        }\r\n    \r\n                        C_Sequencia seqAntiga = null;\r\n                        R_Producao r_Producao = new R_Producao(conMySql, conOracle);\r\n    \r\n                        for (C_Sequencia sequencia : listSequencia) {\r\n    \r\n                            C_Sequencia seqNova = sequencia;\r\n    \r\n                            String retornoSequencia = gerarSequencia(seqAntiga, seqNova);\r\n    \r\n                            if (!retornoSequencia.isEmpty()) {\r\n                                stringBuilder.append(retornoSequencia);                             \r\n                            }\r\n                            \r\n                            List&lt;C_Producao&gt; listProducao = r_Producao.getProducaoExportar(sequencia.getChave(), status);\r\n                            for (C_Producao producao : listProducao) {\r\n                                DecimalFormat decimal = new DecimalFormat(&quot;########.00&quot;);\r\n                                String prod = String.valueOf(decimal.format(Double.parseDouble(producao.getProducao())));\r\n                                String meta = String.valueOf(decimal.format(Double.parseDouble(producao.getMeta())));\r\n                                prod = prod.replace(&quot;,&quot;, &quot;&quot;);\r\n                                meta = meta.replace(&quot;,&quot;, &quot;&quot;);\r\n                                stringBuilder.append(&quot;02;&quot;)\r\n                                        .append(String.format(&quot;%5d&quot;, producao.getCodColetor())).append(&quot;;&quot;)\r\n                                        .append(U_DataHora.formatarData(producao.getDataHora(), U_DataHora.DDMMYYYY_HHMMSS, U_DataHora.DDMMYYYY)).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%10d&quot;, producao.getFuncionario().getMatricula())).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%9d&quot;, sequencia.getCodCc())).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%4d&quot;, sequencia.getCodOp())).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%4d&quot;, sequencia.getCodOp())).append(&quot;;&quot;)\r\n                                        .append(&quot;      ;&quot;)\r\n                                        .append(String.format(&quot;%6d&quot;, Long.parseLong(sequencia.getCodFazenda()))).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%6d&quot;, Long.parseLong(sequencia.getCodTalhao()))).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%10s&quot;, prod)).append(&quot;;&quot;)\r\n                                        .append(&quot;        0000000;&quot;)\r\n                                        .append(&quot;;&quot;)\r\n                                        .append(&quot;          ;&quot;)\r\n                                        .append(String.format(&quot;%9s&quot;, meta)).append(&quot;;&quot;)\r\n                                        .append(String.format(&quot;%4d&quot;, sequencia.getCodSequencia())).append(&quot;;&quot;)\r\n                                        .append(&quot; ;&quot;)\r\n                                        .append(&quot; ;&quot;)\r\n                                        .append(&quot;     ;&quot;)\r\n                                        .append(&quot;     ;&quot;)\r\n                                        .append(&quot; ;&quot;)\r\n                                        .append(&quot; ;&quot;)\r\n                                        .append(String.format(&quot;%9d&quot;, sequencia.getCodOs())).append(&quot;;&quot;)\r\n                                        .append(&quot;\\r\\n&quot;);\r\n    \r\n                                if (producao.getStatus().getStatus() != C_Status.EXPORTADO) {\r\n                                    r_Producao.atualizarStatus(producao.getChave(), C_Status.EXPORTADO); // Atualiza status para exportado\r\n                                }\r\n                            }\r\n                            \r\n                            // Atualiza o status de todas as produ&#231;&#245;es da sequencia da posi&#231;&#227;o atual\r\n                            //r_Producao.atualizaStatusProducoesPorChaveSequencia(sequencia.getChave(), C_Status.EXPORTADO); \r\n    \r\n                            seqAntiga = seqNova;\r\n    \r\n                            if (sequencia.getStatus().getStatus() != C_Status.EXPORTADO) {\r\n                                r_Sequencia.atualizarStatus(sequencia.getChave(), C_Status.EXPORTADO); // Atualiza status para exportado\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n                U_Log.erro(TAG, e.toString());\r\n                return e.toString();\r\n            }\r\n            return stringBuilder.toString();\r\n        }\r\n\r\n    private String gerarSequencia(C_Sequencia seqAntiga, C_Sequencia seqNova) {\r\n            StringBuilder sequenciaBuilder = new StringBuilder();\r\n            String texto = sequenciaBuilder.append(&quot;01;&quot;)\r\n                    .append(String.format(&quot;%5d&quot;, seqNova.getCodColetor())).append(&quot;;&quot;)\r\n                    .append(U_DataHora.formatarData(seqNova.getData(), U_DataHora.DDMMYYYY_HHMMSS, U_DataHora.DDMMYYYY)).append(&quot;;&quot;)\r\n                    .append(String.format(&quot;%10d&quot;, seqNova.getCodFiscal())).append(&quot;;&quot;)\r\n                    .append(String.format(&quot;%10d&quot;, seqNova.getCodFiscal())).append(&quot;;&quot;)\r\n                    .append(&quot;\\r\\n&quot;).toString();\r\n    \r\n            if (seqAntiga != null) {\r\n                if (!seqAntiga.getData().equals(seqNova.getData())\r\n                        || !Objects.equals(seqAntiga.getCodColetor(), seqNova.getCodColetor())\r\n                        || !Objects.equals(seqAntiga.getCodFiscal(), seqNova.getCodFiscal())) {\r\n    \r\n                    return texto;\r\n    \r\n                } else {\r\n                    return &quot;&quot;;\r\n                }\r\n            } else {\r\n                return texto;\r\n            }\r\n        }\r\n\r\n[Result here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jX4KC.png\r\n\r\nHere i commented update in the DB\r\n\r\n    for (C_Sequencia sequencia : listSequencia) {\r\n      ...\r\n      for (C_Producao producao : listProducao) {\r\n        ... \r\n        // update status in DB\r\n        if (producao.getStatus().getStatus() != C_Status.EXPORTADO) {\r\n          r_Producao.atualizarStatus(producao.getChave(), C_Status.EXPORTADO);\r\n        }\r\n      }\r\n     // update status in DB\r\n     if (sequencia.getStatus().getStatus() != C_Status.EXPORTADO) {\r\n       r_Sequencia.atualizarStatus(sequencia.getChave(), C_Status.EXPORTADO); \r\n     }\r\n    }\r\n\r\n**Result: Total time 9 minutes**\r\n\r\nNow, i commented the part that I built string\r\n\r\n    for (C_Sequencia sequencia : listSequencia) {\r\n          ...\r\n          // here build a part of the string in method &quot; gerarSequencia &quot;\r\n          // i commented a part inside method &quot; gerarSequencia &quot;\r\n          String retornoSequencia = gerarSequencia(seqAntiga, seqNova);\r\n          ...\r\n\r\n          for (C_Producao producao : listProducao) {\r\n            ... \r\n            // Here i commented another part of the string\r\n             ...\r\n          }\r\n     }\r\n\r\n**Result: Total time is 14 minutes** - \r\nPractically running only the updates lines","title":"Fastest way to write a list of object extracted from two databases to an txt file in Java","body":"<p>I have a function that searches for a list and for each item in the list I have another list. These two lists will have to be transformed into a text file to be imported into a software. The problem I'm having is slow ... </p>\n\n<p>My first list has about 500 records, and every record in that list has another list that can range from 1 record to infinity. This takes about 20 minutes to complete. <strong>When I comment the updates (updates the status of each item of the 2 list) the time drops to 9 minutes</strong>. </p>\n\n<p>Can someone help me ?</p>\n\n<pre><code>private String getExportacaoApontamento(\n            String idsExportar,\n            String dataInicial,\n            String dataFinal,\n            String status,\n            String tipoFiltro,\n            String filtro,\n            String turma,\n            boolean exportarTodos) throws SQLException {\n        StringBuilder stringBuilder = new StringBuilder();        \n\n        try (\n                Connection conMySql = U_Conexao.getConexaoMySQL();\n                Connection conOracle = U_Conexao.getConexaoOracle()) {\n\n            if (conMySql != null) {\n                List&lt;C_Sequencia&gt; listSequencia;\n                R_Sequencia r_Sequencia = new R_Sequencia(conMySql, null);\n\n                if (status.equals(String.valueOf(C_Status.TODOS))) {\n                    status = C_Status.PENDENTE + \", \" + C_Status.EXPORTADO;\n                }\n\n                String orderBy = \"S.\" + C_Sequencia.DATA + \", S.\" + C_Sequencia.COD_COLETOR + \", S.\" + C_Sequencia.COD_FISCAL;\n\n                if (exportarTodos == false) {\n                    listSequencia = r_Sequencia.listExportarId(idsExportar, dataInicial, dataFinal, orderBy);\n                } else {\n                    tipoFiltro = verificarFiltroApontamento(tipoFiltro);\n\n                    if (filtro == null || filtro.isEmpty()) {\n                        listSequencia = r_Sequencia.listExportarData(dataInicial, dataFinal, status, turma, orderBy);\n                    } else {\n                        listSequencia = r_Sequencia.listExportarFiltro(dataInicial, dataFinal, tipoFiltro, filtro, status, turma, orderBy);\n                    }\n                }\n\n                if (!listSequencia.isEmpty()) {\n\n                    if (!verificarLiberacoes(listSequencia, conMySql, conOracle)) {\n                        return \"-1\";\n                    }\n\n                    C_Sequencia seqAntiga = null;\n                    R_Producao r_Producao = new R_Producao(conMySql, conOracle);\n\n                    for (C_Sequencia sequencia : listSequencia) {\n\n                        C_Sequencia seqNova = sequencia;\n\n                        String retornoSequencia = gerarSequencia(seqAntiga, seqNova);\n\n                        if (!retornoSequencia.isEmpty()) {\n                            stringBuilder.append(retornoSequencia);                             \n                        }\n\n                        List&lt;C_Producao&gt; listProducao = r_Producao.getProducaoExportar(sequencia.getChave(), status);\n                        for (C_Producao producao : listProducao) {\n                            DecimalFormat decimal = new DecimalFormat(\"########.00\");\n                            String prod = String.valueOf(decimal.format(Double.parseDouble(producao.getProducao())));\n                            String meta = String.valueOf(decimal.format(Double.parseDouble(producao.getMeta())));\n                            prod = prod.replace(\",\", \"\");\n                            meta = meta.replace(\",\", \"\");\n                            stringBuilder.append(\"02;\")\n                                    .append(String.format(\"%5d\", producao.getCodColetor())).append(\";\")\n                                    .append(U_DataHora.formatarData(producao.getDataHora(), U_DataHora.DDMMYYYY_HHMMSS, U_DataHora.DDMMYYYY)).append(\";\")\n                                    .append(String.format(\"%10d\", producao.getFuncionario().getMatricula())).append(\";\")\n                                    .append(String.format(\"%9d\", sequencia.getCodCc())).append(\";\")\n                                    .append(String.format(\"%4d\", sequencia.getCodOp())).append(\";\")\n                                    .append(String.format(\"%4d\", sequencia.getCodOp())).append(\";\")\n                                    .append(\"      ;\")\n                                    .append(String.format(\"%6d\", Long.parseLong(sequencia.getCodFazenda()))).append(\";\")\n                                    .append(String.format(\"%6d\", Long.parseLong(sequencia.getCodTalhao()))).append(\";\")\n                                    .append(String.format(\"%10s\", prod)).append(\";\")\n                                    .append(\"        0000000;\")\n                                    .append(\";\")\n                                    .append(\"          ;\")\n                                    .append(String.format(\"%9s\", meta)).append(\";\")\n                                    .append(String.format(\"%4d\", sequencia.getCodSequencia())).append(\";\")\n                                    .append(\" ;\")\n                                    .append(\" ;\")\n                                    .append(\"     ;\")\n                                    .append(\"     ;\")\n                                    .append(\" ;\")\n                                    .append(\" ;\")\n                                    .append(String.format(\"%9d\", sequencia.getCodOs())).append(\";\")\n                                    .append(\"\\r\\n\");\n\n                            if (producao.getStatus().getStatus() != C_Status.EXPORTADO) {\n                                r_Producao.atualizarStatus(producao.getChave(), C_Status.EXPORTADO); // Atualiza status para exportado\n                            }\n                        }\n\n                        // Atualiza o status de todas as produções da sequencia da posição atual\n                        //r_Producao.atualizaStatusProducoesPorChaveSequencia(sequencia.getChave(), C_Status.EXPORTADO); \n\n                        seqAntiga = seqNova;\n\n                        if (sequencia.getStatus().getStatus() != C_Status.EXPORTADO) {\n                            r_Sequencia.atualizarStatus(sequencia.getChave(), C_Status.EXPORTADO); // Atualiza status para exportado\n                        }\n                    }\n                }\n            }\n        } catch (Exception e) {\n            U_Log.erro(TAG, e.toString());\n            return e.toString();\n        }\n        return stringBuilder.toString();\n    }\n\nprivate String gerarSequencia(C_Sequencia seqAntiga, C_Sequencia seqNova) {\n        StringBuilder sequenciaBuilder = new StringBuilder();\n        String texto = sequenciaBuilder.append(\"01;\")\n                .append(String.format(\"%5d\", seqNova.getCodColetor())).append(\";\")\n                .append(U_DataHora.formatarData(seqNova.getData(), U_DataHora.DDMMYYYY_HHMMSS, U_DataHora.DDMMYYYY)).append(\";\")\n                .append(String.format(\"%10d\", seqNova.getCodFiscal())).append(\";\")\n                .append(String.format(\"%10d\", seqNova.getCodFiscal())).append(\";\")\n                .append(\"\\r\\n\").toString();\n\n        if (seqAntiga != null) {\n            if (!seqAntiga.getData().equals(seqNova.getData())\n                    || !Objects.equals(seqAntiga.getCodColetor(), seqNova.getCodColetor())\n                    || !Objects.equals(seqAntiga.getCodFiscal(), seqNova.getCodFiscal())) {\n\n                return texto;\n\n            } else {\n                return \"\";\n            }\n        } else {\n            return texto;\n        }\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jX4KC.png\" rel=\"nofollow noreferrer\">Result here</a></p>\n\n<p>Here i commented update in the DB</p>\n\n<pre><code>for (C_Sequencia sequencia : listSequencia) {\n  ...\n  for (C_Producao producao : listProducao) {\n    ... \n    // update status in DB\n    if (producao.getStatus().getStatus() != C_Status.EXPORTADO) {\n      r_Producao.atualizarStatus(producao.getChave(), C_Status.EXPORTADO);\n    }\n  }\n // update status in DB\n if (sequencia.getStatus().getStatus() != C_Status.EXPORTADO) {\n   r_Sequencia.atualizarStatus(sequencia.getChave(), C_Status.EXPORTADO); \n }\n}\n</code></pre>\n\n<p><strong>Result: Total time 9 minutes</strong></p>\n\n<p>Now, i commented the part that I built string</p>\n\n<pre><code>for (C_Sequencia sequencia : listSequencia) {\n      ...\n      // here build a part of the string in method \" gerarSequencia \"\n      // i commented a part inside method \" gerarSequencia \"\n      String retornoSequencia = gerarSequencia(seqAntiga, seqNova);\n      ...\n\n      for (C_Producao producao : listProducao) {\n        ... \n        // Here i commented another part of the string\n         ...\n      }\n }\n</code></pre>\n\n<p><strong>Result: Total time is 14 minutes</strong> - \nPractically running only the updates lines</p>\n"},{"tags":["java","performance","string"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":1,"creation_date":1298370154,"post_id":5076740,"comment_id":5686922,"body_markdown":"bottleneck in string concatenation? That would mean all java programs are having preformance issues. Don&#39;t microoptimize.","body":"bottleneck in string concatenation? That would mean all java programs are having preformance issues. Don&#39;t microoptimize."},{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":12,"creation_date":1299195960,"post_id":5076740,"comment_id":5830067,"body_markdown":"But he has profiled the code, and this is the bottleneck. This isn&#39;t micro-optimization, nor premature optimization, it&#39;s just optimization.","body":"But he has profiled the code, and this is the bottleneck. This isn&#39;t micro-optimization, nor premature optimization, it&#39;s just optimization."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1299200092,"post_id":5076740,"comment_id":5830580,"body_markdown":"@Duncan, actually that&#39;s one of the issues. The real issues the ccy code generation into the loop. It contains multiple allocations+memory barriers,  +not so fast hash code (14 mul+add; assuming ccy pairs are like &quot;eur/usdusd/jpy&quot;), and then equals. Using a holding pair w/ references to the 2 strings will be a lot better solution.","body":"@Duncan, actually that&#39;s one of the issues. The real issues the ccy code generation into the loop. It contains multiple allocations+memory barriers,  +not so fast hash code (14 mul+add; assuming ccy pairs are like &quot;eur/usdusd/jpy&quot;), and then equals. Using a holding pair w/ references to the 2 strings will be a lot better solution."}],"answers":[{"comments":[{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":1,"creation_date":1298370037,"post_id":5076784,"comment_id":5686896,"body_markdown":"do you have any sample code to prevent the bottleneck since you might know the implementation part","body":"do you have any sample code to prevent the bottleneck since you might know the implementation part"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1298372683,"post_id":5076784,"comment_id":5687407,"body_markdown":"@Deepak, I don&#39;t believe this to be a bottleneck, but the easiest way to create such a class in Eclipse 3.6 is to create a new class, give it the fields ccy1, and ccy2, ask Eclipse to create an constructor based on fields, and to generate the hashCode() and equals() methods.","body":"@Deepak, I don&#39;t believe this to be a bottleneck, but the easiest way to create such a class in Eclipse 3.6 is to create a new class, give it the fields ccy1, and ccy2, ask Eclipse to create an constructor based on fields, and to generate the hashCode() and equals() methods."}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1686660911,"creation_date":1298369584,"answer_id":5076784,"question_id":5076740,"body_markdown":"The reason why these routines show up in the benchmark is because that is how the compiler implements your &quot;+&quot; under the covers.\r\n\r\nIf you really need the concatenated string, you should let the compiler do its magic with the &quot;+&quot;.  If all you need is a key for map lookup, a key class holding both strings with suitable `equals` and `hashMap` implementations might be a good idea as it avoids the copying step.\r\n\r\n2023 edit:  With Java 16 came records where the compiler does the hard work automatically under the covers.  Just create a record with two string fields and you&#39;re done.\r\n\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>The reason why these routines show up in the benchmark is because that is how the compiler implements your &quot;+&quot; under the covers.</p>\n<p>If you really need the concatenated string, you should let the compiler do its magic with the &quot;+&quot;.  If all you need is a key for map lookup, a key class holding both strings with suitable <code>equals</code> and <code>hashMap</code> implementations might be a good idea as it avoids the copying step.</p>\n<p>2023 edit:  With Java 16 came records where the compiler does the hard work automatically under the covers.  Just create a record with two string fields and you're done.</p>\n"},{"comments":[{"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"score":2,"creation_date":1298370229,"post_id":5076796,"comment_id":5686938,"body_markdown":"StringBuffer will definitely not perform better here since StringBuilder is its not threadsafe counterpart, avoiding the unnecessary synchronisation overhead.","body":"StringBuffer will definitely not perform better here since StringBuilder is its not threadsafe counterpart, avoiding the unnecessary synchronisation overhead."},{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":1,"creation_date":1299196152,"post_id":5076796,"comment_id":5830095,"body_markdown":"Indeed - StringBuilder is significantly faster","body":"Indeed - StringBuilder is significantly faster"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1299201290,"post_id":5076796,"comment_id":5830710,"body_markdown":"actually - you end up w/ &quot;ccy1ccy2&quot; always.","body":"actually - you end up w/ &quot;ccy1ccy2&quot; always."}],"tags":[],"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1528720556,"creation_date":1298369631,"answer_id":5076796,"question_id":5076740,"body_markdown":"    StringBuffer ccyPair =  new StringBuffer();      \r\n    ccyPair.append(&quot;ccy1&quot;).append(&quot;ccy2&quot;); \r\n\r\nHave you tried using a String Buffer and then use a profiler to examine where is the bottleneck.Give it a try and see what happens.","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<pre><code>StringBuffer ccyPair =  new StringBuffer();      \nccyPair.append(\"ccy1\").append(\"ccy2\"); \n</code></pre>\n\n<p>Have you tried using a String Buffer and then use a profiler to examine where is the bottleneck.Give it a try and see what happens.</p>\n"},{"comments":[{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":0,"creation_date":1299194698,"post_id":5076797,"comment_id":5829849,"body_markdown":"Do you have any evidence for &quot;you cannot improve String concatenation per se&quot;?","body":"Do you have any evidence for &quot;you cannot improve String concatenation per se&quot;?"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1299200316,"post_id":5076797,"comment_id":5830605,"body_markdown":"@Stephen, look at String.concat() impl. there is NO surprise and it has been the best method for concatenating 2 strings ONLY. It allocates exactly as needed char[] and copies via `System.arrayCopy` (so one char[] alloc, 2 memcpy, one string alloc, cant beat that ever), but most of all, it&#39;s the only way to create a String w/o extra copy of the char array (as of now, back in the day StringBuffer didn&#39;t copy either)","body":"@Stephen, look at String.concat() impl. there is NO surprise and it has been the best method for concatenating 2 strings ONLY. It allocates exactly as needed char[] and copies via <code>System.arrayCopy</code> (so one char[] alloc, 2 memcpy, one string alloc, cant beat that ever), but most of all, it&#39;s the only way to create a String w/o extra copy of the char array (as of now, back in the day StringBuffer didn&#39;t copy either)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1299200789,"post_id":5076797,"comment_id":5830657,"body_markdown":"The surprise is that they *can&#39;t* use `s.concat(s2)` for `s + s2`.  But it makes sense; see above.","body":"The surprise is that they <i>can&#39;t</i> use <code>s.concat(s2)</code> for <code>s + s2</code>.  But it makes sense; see above."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1299201069,"post_id":5076797,"comment_id":5830683,"body_markdown":"@Stephen, yes, it doesn&#39;t work if any of the strings is null. But consider this: `String.valueOf(s1).contact(String.valueOf(s2))`; actually I&#39;d swear I have seen JBuilder does it (but it was at least 8 years ago, so I&#39;d not swear for real)","body":"@Stephen, yes, it doesn&#39;t work if any of the strings is null. But consider this: <code>String.valueOf(s1).contact(String.valueOf(s2))</code>; actually I&#39;d swear I have seen JBuilder does it (but it was at least 8 years ago, so I&#39;d not swear for real)"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1299201928,"post_id":5076797,"comment_id":5830785,"body_markdown":"@Stephen, the custom map (2 value map) is the best solution to the problem. I guess I can post one.","body":"@Stephen, the custom map (2 value map) is the best solution to the problem. I guess I can post one."},{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":0,"creation_date":1299315227,"post_id":5076797,"comment_id":5849350,"body_markdown":"@Stephen C - you can&#39;t have it both ways - saying that I have too much time on my hands and then complain that I only give results for one VM and set of input strings!","body":"@Stephen C - you can&#39;t have it both ways - saying that I have too much time on my hands and then complain that I only give results for one VM and set of input strings!"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1299321625,"post_id":5076797,"comment_id":5849887,"body_markdown":"@Duncan McGregor - I&#39;m not complaining.  I&#39;m just noting that the results may not be valid across the board ... which is something that you neglected to mention.","body":"@Duncan McGregor - I&#39;m not complaining.  I&#39;m just noting that the results may not be valid across the board ... which is something that you neglected to mention."},{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":0,"creation_date":1299328683,"post_id":5076797,"comment_id":5850552,"body_markdown":"@Stephen C - indeed, but I did give the conditions that I did use. I&#39;d wager good odds that you&#39;d find the similar odds for other VMs and strings - probably better for concat with longer strings - but I don&#39;t have reliable evidence for that hunch ;-)","body":"@Stephen C - indeed, but I did give the conditions that I did use. I&#39;d wager good odds that you&#39;d find the similar odds for other VMs and strings - probably better for concat with longer strings - but I don&#39;t have reliable evidence for that hunch ;-)"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299201666,"creation_date":1298369640,"answer_id":5076797,"question_id":5076740,"body_markdown":"@Duncan McGregor&#39;s answer gives some benchmark numbers for one particular example (sizes of input string) and one JVM version.  In this case, it looks like `String.concat()` is the winner by a significant factor.  This result may or may not generalize.\r\n\r\nAside: This surprises me!  I&#39;d have thought that the compiler writers would have chosen to use String.concat in cases where it is likely to be faster.  The explanation is in the evaluation of [this bug report][1] ... and is rooted in the definition of the String concatenation operator.  \r\n\r\n(If a String-typed operand of `+` is `null`, the JLS states that the String `&quot;null&quot;` is used in its place.  That wouldn&#39;t work if they code generated `s + s2` as `s.concat(s2)` and `s` or `s2` happened to be `null`; you&#39;d get NPEs.  And the case of `s == null` means that an alternative version of `concat` doesn&#39;t solve the NPE problem.)\r\n\r\n-------------------------------\r\n\r\nHowever, @unwind&#39;s answer has given me an idea for an alternative solution that avoids the need for String concatenation.\r\n\r\nIf the concatenations of `ccy1` and `ccy2` are just done to join two keys, then maybe you could get better performance by defining a special hash table class that takes two keys instead of one.  It would have operations like:\r\n\r\n        public Object get(String key1, String key2) ...\r\n\r\n        public void put(String key1, String key2, Object value) ...\r\n\r\nThe effect would be like a `Map&lt;Pair&lt;String, String&gt;, Object&gt;` (see @KitsuneYMG&#39;s answer) except that you don&#39;t need to create `Pair&lt;String, String&gt;` objects each time you want to do a `get` or `put`.  The downside is:\r\n\r\n   - you have to implement a new hash table class from the ground up, and\r\n   - the new class won&#39;t conform to the `Map` interface.\r\n\r\nNormally, I would not recommend doing this.  However if the string concatenation and map lookup are really a critical bottleneck, a custom multi-key hash table might give you a significant speedup.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4946065","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>@Duncan McGregor's answer gives some benchmark numbers for one particular example (sizes of input string) and one JVM version.  In this case, it looks like <code>String.concat()</code> is the winner by a significant factor.  This result may or may not generalize.</p>\n<p>Aside: This surprises me!  I'd have thought that the compiler writers would have chosen to use String.concat in cases where it is likely to be faster.  The explanation is in the evaluation of <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4946065\" rel=\"nofollow noreferrer\">this bug report</a> ... and is rooted in the definition of the String concatenation operator.</p>\n<p>(If a String-typed operand of <code>+</code> is <code>null</code>, the JLS states that the String <code>&quot;null&quot;</code> is used in its place.  That wouldn't work if they code generated <code>s + s2</code> as <code>s.concat(s2)</code> and <code>s</code> or <code>s2</code> happened to be <code>null</code>; you'd get NPEs.  And the case of <code>s == null</code> means that an alternative version of <code>concat</code> doesn't solve the NPE problem.)</p>\n<hr />\n<p>However, @unwind's answer has given me an idea for an alternative solution that avoids the need for String concatenation.</p>\n<p>If the concatenations of <code>ccy1</code> and <code>ccy2</code> are just done to join two keys, then maybe you could get better performance by defining a special hash table class that takes two keys instead of one.  It would have operations like:</p>\n<pre><code>    public Object get(String key1, String key2) ...\n\n    public void put(String key1, String key2, Object value) ...\n</code></pre>\n<p>The effect would be like a <code>Map&lt;Pair&lt;String, String&gt;, Object&gt;</code> (see @KitsuneYMG's answer) except that you don't need to create <code>Pair&lt;String, String&gt;</code> objects each time you want to do a <code>get</code> or <code>put</code>.  The downside is:</p>\n<ul>\n<li>you have to implement a new hash table class from the ground up, and</li>\n<li>the new class won't conform to the <code>Map</code> interface.</li>\n</ul>\n<p>Normally, I would not recommend doing this.  However if the string concatenation and map lookup are really a critical bottleneck, a custom multi-key hash table might give you a significant speedup.</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1298370026,"post_id":5076801,"comment_id":5686890,"body_markdown":"That doesn&#39;t help for a regular hashmap.","body":"That doesn&#39;t help for a regular hashmap."}],"tags":[],"owner":{"account_id":13903,"reputation":393623,"user_id":28169,"accept_rate":88,"display_name":"unwind"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298369646,"creation_date":1298369646,"answer_id":5076801,"question_id":5076740,"body_markdown":"Perhaps you can go around the problem by computing the hashes of the two strings individually, and then combining them, perhaps with a separate hash function that works on integers?\r\n\r\nSomething like:\r\n\r\n    int h1 = ccy1.hashCode(), h2 = ccy2.hashCode(), h = h1 ^ h2;\r\n\r\nThat could well be faster, since concatenating strings only to compute the hash of the concatenation seems wasteful.\r\n\r\nNote that the above combines the two hashes with binary-XOR (the &lt;code&gt;^&lt;/code&gt; operator) which often works but you might want to investigate that further.\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>Perhaps you can go around the problem by computing the hashes of the two strings individually, and then combining them, perhaps with a separate hash function that works on integers?</p>\n\n<p>Something like:</p>\n\n<pre><code>int h1 = ccy1.hashCode(), h2 = ccy2.hashCode(), h = h1 ^ h2;\n</code></pre>\n\n<p>That could well be faster, since concatenating strings only to compute the hash of the concatenation seems wasteful.</p>\n\n<p>Note that the above combines the two hashes with binary-XOR (the <code>^</code> operator) which often works but you might want to investigate that further.</p>\n"},{"comments":[{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":1,"creation_date":1298370007,"post_id":5076813,"comment_id":5686886,"body_markdown":"@KitsuneYMG,Can you post a complete working example so that it is handy for tackling such issues in futures.","body":"@KitsuneYMG,Can you post a complete working example so that it is handy for tackling such issues in futures."},{"owner":{"account_id":31498,"reputation":12813,"user_id":86515,"accept_rate":100,"display_name":"KitsuneYMG"},"score":0,"creation_date":1298380056,"post_id":5076813,"comment_id":5688852,"body_markdown":"@Deepak see edits. It you need a triple, quad, etc, it&#39;s very easy to use this as a base to add more.","body":"@Deepak see edits. It you need a triple, quad, etc, it&#39;s very easy to use this as a base to add more."},{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":0,"creation_date":1298460682,"post_id":5076813,"comment_id":5703838,"body_markdown":"@KitsuneYMG,can you post the `public static void main method` for you pair class so that it can be handy for further reference","body":"@KitsuneYMG,can you post the <code>public static void main method</code> for you pair class so that it can be handy for further reference"},{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":0,"creation_date":1299196247,"post_id":5076813,"comment_id":5830112,"body_markdown":"I&#39;d be interested to know if this is actually quicker in use, as it doesn&#39;t cache the Pair&#39;s hashCode, whereas the concatenated string&#39;s hashCode is cached.","body":"I&#39;d be interested to know if this is actually quicker in use, as it doesn&#39;t cache the Pair&#39;s hashCode, whereas the concatenated string&#39;s hashCode is cached."},{"owner":{"account_id":31498,"reputation":12813,"user_id":86515,"accept_rate":100,"display_name":"KitsuneYMG"},"score":0,"creation_date":1299198745,"post_id":5076813,"comment_id":5830422,"body_markdown":"@Duncan you could easily cache the hashcode and discard it upon set*. This should be faster than concatenating two strings which requires two memcpy&#39;s (unless the particular JVM uses ropes).","body":"@Duncan you could easily cache the hashcode and discard it upon set*. This should be faster than concatenating two strings which requires two memcpy&#39;s (unless the particular JVM uses ropes)."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1299201689,"post_id":5076813,"comment_id":5830757,"body_markdown":"side notes: the eclipse generated hashcode/equals suck (esp. visually), you probably want the class serializable; hashcode caching may not be needed (due to how hashmap works). Also declaring T1 and T2 `String` will help the compiler to statically link equals and hashcode (now it will probably fall back to inline caches though, not so shabby but still)","body":"side notes: the eclipse generated hashcode/equals suck (esp. visually), you probably want the class serializable; hashcode caching may not be needed (due to how hashmap works). Also declaring T1 and T2 <code>String</code> will help the compiler to statically link equals and hashcode (now it will probably fall back to inline caches though, not so shabby but still)"}],"tags":[],"owner":{"account_id":31498,"reputation":12813,"user_id":86515,"accept_rate":100,"display_name":"KitsuneYMG"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1298380046,"creation_date":1298369732,"answer_id":5076813,"question_id":5076740,"body_markdown":"Perhaps instead of concatenation, you should create a Pair class?\r\n\r\n    public class Pair&lt;T1, T2&gt; {\r\n        private T1 first;\r\n        private T2 second;\r\n\r\n        public static &lt;U1,U2&gt; Pair&lt;U1,U2&gt; create(U1 first, U2 second) {\r\n            return new Pair&lt;U1,U2&gt;(U1,U2);\r\n        }\r\n    \r\n        public Pair( ) {}\r\n    \r\n        public Pair( T1 first, T2 second ) {\r\n            this.first = first;\r\n            this.second = second;\r\n        }\r\n    \r\n        public T1 getFirst( ) {\r\n            return first;\r\n        }\r\n    \r\n        public void setFirst( T1 first ) {\r\n            this.first = first;\r\n        }\r\n    \r\n        public T2 getSecond( ) {\r\n            return second;\r\n        }\r\n    \r\n        public void setSecond( T2 second ) {\r\n            this.second = second;\r\n        }\r\n    \r\n        @Override\r\n        public String toString( ) {\r\n            return &quot;Pair [first=&quot; + first + &quot;, second=&quot; + second + &quot;]&quot;;\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode( ) {\r\n            final int prime = 31;\r\n            int result = 1;\r\n            result = prime * result + ((first == null)?0:first.hashCode());\r\n            result = prime * result + ((second == null)?0:second.hashCode());\r\n            return result;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals( Object obj ) {\r\n            if ( this == obj )\r\n                return true;\r\n            if ( obj == null )\r\n                return false;\r\n            if ( getClass() != obj.getClass() )\r\n                return false;\r\n            Pair&lt;?, ?&gt; other = (Pair&lt;?, ?&gt;) obj;\r\n            if ( first == null ) {\r\n                if ( other.first != null )\r\n                    return false;\r\n            }\r\n            else if ( !first.equals(other.first) )\r\n                return false;\r\n            if ( second == null ) {\r\n                if ( other.second != null )\r\n                    return false;\r\n            }\r\n            else if ( !second.equals(other.second) )\r\n                return false;\r\n            return true;\r\n        }\r\n    \r\n    }\r\n\r\nAnd use this as your key in your HashMap\r\n\r\nInstead of `HashMap&lt;String,Whatever&gt;` use `HashMap&lt;Pair&lt;String,String&gt;,Whatever&gt;`\r\n\r\nIn your tight loop instead of `map.get( str1 + str2 )` you&#39;d use `map.get( Pair.create(str1,str2) )`.\r\n\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>Perhaps instead of concatenation, you should create a Pair class?</p>\n\n<pre><code>public class Pair&lt;T1, T2&gt; {\n    private T1 first;\n    private T2 second;\n\n    public static &lt;U1,U2&gt; Pair&lt;U1,U2&gt; create(U1 first, U2 second) {\n        return new Pair&lt;U1,U2&gt;(U1,U2);\n    }\n\n    public Pair( ) {}\n\n    public Pair( T1 first, T2 second ) {\n        this.first = first;\n        this.second = second;\n    }\n\n    public T1 getFirst( ) {\n        return first;\n    }\n\n    public void setFirst( T1 first ) {\n        this.first = first;\n    }\n\n    public T2 getSecond( ) {\n        return second;\n    }\n\n    public void setSecond( T2 second ) {\n        this.second = second;\n    }\n\n    @Override\n    public String toString( ) {\n        return \"Pair [first=\" + first + \", second=\" + second + \"]\";\n    }\n\n    @Override\n    public int hashCode( ) {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + ((first == null)?0:first.hashCode());\n        result = prime * result + ((second == null)?0:second.hashCode());\n        return result;\n    }\n\n    @Override\n    public boolean equals( Object obj ) {\n        if ( this == obj )\n            return true;\n        if ( obj == null )\n            return false;\n        if ( getClass() != obj.getClass() )\n            return false;\n        Pair&lt;?, ?&gt; other = (Pair&lt;?, ?&gt;) obj;\n        if ( first == null ) {\n            if ( other.first != null )\n                return false;\n        }\n        else if ( !first.equals(other.first) )\n            return false;\n        if ( second == null ) {\n            if ( other.second != null )\n                return false;\n        }\n        else if ( !second.equals(other.second) )\n            return false;\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>And use this as your key in your HashMap</p>\n\n<p>Instead of <code>HashMap&lt;String,Whatever&gt;</code> use <code>HashMap&lt;Pair&lt;String,String&gt;,Whatever&gt;</code></p>\n\n<p>In your tight loop instead of <code>map.get( str1 + str2 )</code> you'd use <code>map.get( Pair.create(str1,str2) )</code>.</p>\n"},{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298369845,"creation_date":1298369845,"answer_id":5076832,"question_id":5076740,"body_markdown":"Ok, so what is your question?\r\nNothing to do: if you have to concatenate strings just do it. It is fine that you profiled your code. Now you can see the fact that string concatenation operator + automatically uses StringBuilder&#39;s append() method, so using \r\n\r\n    StringBuilder ccyPair = new StringBuilder(ccy1)\r\n    ccyPair.append(ccy2);\r\n\r\ndoes not give you serious advantages.\r\n\r\nThe only serious way to optimize your code is probably change your design to omit the concatenation at all. But do it only if you really need it, i.e. the concatenation takes significant part of CPU time.\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>Ok, so what is your question?\nNothing to do: if you have to concatenate strings just do it. It is fine that you profiled your code. Now you can see the fact that string concatenation operator + automatically uses StringBuilder's append() method, so using </p>\n\n<pre><code>StringBuilder ccyPair = new StringBuilder(ccy1)\nccyPair.append(ccy2);\n</code></pre>\n\n<p>does not give you serious advantages.</p>\n\n<p>The only serious way to optimize your code is probably change your design to omit the concatenation at all. But do it only if you really need it, i.e. the concatenation takes significant part of CPU time.</p>\n"},{"tags":[],"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1298370591,"creation_date":1298370591,"answer_id":5076942,"question_id":5076740,"body_markdown":"I&#39;d recommend to try Thorbj&#248;rn Ravn Andersens suggestion.\r\n\r\nIf you need the concatenated Strings, dependent on the length of the two parts, it might perform slightly better to create the StringBuilder instance with the required size to avoid reallocation. The default StringBuilder constructor reserves 16 Characters in the current implementation - at least on my machine. So, if the concatenated String is longer than the initial buffer size, the StringBuilder has to reallocate.\r\n\r\nTry this out and tell us what your profiler has to say about it:\r\n\r\n    StringBuilder ccyPair = new StringBuilder(ccy1.length()+ccy2.length());\r\n    ccyPair.append(ccy1); \r\n    ccyPair.append(ccy2); ","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>I'd recommend to try Thorbjørn Ravn Andersens suggestion.</p>\n\n<p>If you need the concatenated Strings, dependent on the length of the two parts, it might perform slightly better to create the StringBuilder instance with the required size to avoid reallocation. The default StringBuilder constructor reserves 16 Characters in the current implementation - at least on my machine. So, if the concatenated String is longer than the initial buffer size, the StringBuilder has to reallocate.</p>\n\n<p>Try this out and tell us what your profiler has to say about it:</p>\n\n<pre><code>StringBuilder ccyPair = new StringBuilder(ccy1.length()+ccy2.length());\nccyPair.append(ccy1); \nccyPair.append(ccy2); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1298384740,"post_id":5077107,"comment_id":5689910,"body_markdown":"Is the StringBuilder variant really much more inefficient than concat?","body":"Is the StringBuilder variant really much more inefficient than concat?"}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1298371688,"creation_date":1298371688,"answer_id":5077107,"question_id":5076740,"body_markdown":"For the question in the title: `String.concat` will typically be the fastest way to concat two `String`s (but do note `null`s). No [oversized] intermediate buffer or other object is involved. Strangely `+` gets compiled into relatively inefficient code involving `StringBuilder`.\r\n\r\nHowever, the body of you question points to other problems. String concatenation to generate keys for a map is a common &quot;anti-idiom&quot;. It is a hack and error-prone. Are you sure that the generated key is unique? Will it remain unique after your code is maintained for some as yet unknown requirement? The best approach is to create an immutable value class for the key. Using a `List` and generic tuple class is a sloppy hack.","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>For the question in the title: <code>String.concat</code> will typically be the fastest way to concat two <code>String</code>s (but do note <code>null</code>s). No [oversized] intermediate buffer or other object is involved. Strangely <code>+</code> gets compiled into relatively inefficient code involving <code>StringBuilder</code>.</p>\n\n<p>However, the body of you question points to other problems. String concatenation to generate keys for a map is a common \"anti-idiom\". It is a hack and error-prone. Are you sure that the generated key is unique? Will it remain unique after your code is maintained for some as yet unknown requirement? The best approach is to create an immutable value class for the key. Using a <code>List</code> and generic tuple class is a sloppy hack.</p>\n"},{"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":6,"creation_date":1299199820,"post_id":5188182,"comment_id":5830549,"body_markdown":"the code will be dead optimized, so you are effectively testing not-optimized code. This is how you dont write micro-benchmarks. Nonetheless, String.contact should be the fastest for 2 strings.","body":"the code will be dead optimized, so you are effectively testing not-optimized code. This is how you dont write micro-benchmarks. Nonetheless, String.contact should be the fastest for 2 strings."},{"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"score":1,"creation_date":1299314917,"post_id":5188182,"comment_id":5849327,"body_markdown":"I am guilty of not further examining the results as they were exactly what I expected! But I don&#39;t understand how I am testing not optimised code. If Hotspot were removing code with no side effects all these loops would take the same time, and if it isn&#39;t, then I am testing the time to run the statements (plus the loop). The thing that we don&#39;t know is the time taken by the loops, but not having too much time on my hands I didn&#39;t account for that ;-)","body":"I am guilty of not further examining the results as they were exactly what I expected! But I don&#39;t understand how I am testing not optimised code. If Hotspot were removing code with no side effects all these loops would take the same time, and if it isn&#39;t, then I am testing the time to run the statements (plus the loop). The thing that we don&#39;t know is the time taken by the loops, but not having too much time on my hands I didn&#39;t account for that ;-)"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1525561445,"post_id":5188182,"comment_id":87406594,"body_markdown":"@DuncanMcGregor It takes a while before the JVM optimizes the code.","body":"@DuncanMcGregor It takes a while before the JVM optimizes the code."},{"owner":{"account_id":11793534,"reputation":982,"user_id":8628851,"display_name":"Georgi Peev"},"score":1,"creation_date":1559728090,"post_id":5188182,"comment_id":99507949,"body_markdown":"StringBuilder is a way to fast with big strings ,but is slow with small.","body":"StringBuilder is a way to fast with big strings ,but is slow with small."}],"tags":[],"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"comment_count":4,"down_vote_count":1,"up_vote_count":52,"is_accepted":false,"score":51,"last_activity_date":1299196921,"creation_date":1299196921,"answer_id":5188182,"question_id":5076740,"body_markdown":"Lots of theory - time for some practice!\r\n\r\n    private final String s1 = new String(&quot;1234567890&quot;);\r\n    private final String s2 = new String(&quot;1234567890&quot;);\r\n\r\nUsing plain for loops of 10,000,000, on a warmed-up 64-bit Hotspot, 1.6.0_22 on Intel Mac OS. \r\n\r\neg\r\n\r\n    @Test public void testConcatenation() {\r\n        for (int i = 0; i &lt; COUNT; i++) {\r\n            String s3 = s1 + s2;\r\n        }\r\n    }\r\n\r\nWith the following statements in the loops\r\n\r\n    String s3 = s1 + s2; \r\n1.33s\r\n\r\n    String s3 = new StringBuilder(s1).append(s2).toString();\r\n1.28s\r\n\r\n    String s3 = new StringBuffer(s1).append(s2).toString();\r\n1.92s\r\n\r\n    String s3 = s1.concat(s2);\r\n0.70s\r\n\r\n    String s3 = &quot;1234567890&quot; + &quot;1234567890&quot;;\r\n0.0s\r\n\r\nSo concat is the clear winner, unless you have static strings, in which case the compiler will have taken care of you already.","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>Lots of theory - time for some practice!</p>\n\n<pre><code>private final String s1 = new String(\"1234567890\");\nprivate final String s2 = new String(\"1234567890\");\n</code></pre>\n\n<p>Using plain for loops of 10,000,000, on a warmed-up 64-bit Hotspot, 1.6.0_22 on Intel Mac OS. </p>\n\n<p>eg</p>\n\n<pre><code>@Test public void testConcatenation() {\n    for (int i = 0; i &lt; COUNT; i++) {\n        String s3 = s1 + s2;\n    }\n}\n</code></pre>\n\n<p>With the following statements in the loops</p>\n\n<pre><code>String s3 = s1 + s2; \n</code></pre>\n\n<p>1.33s</p>\n\n<pre><code>String s3 = new StringBuilder(s1).append(s2).toString();\n</code></pre>\n\n<p>1.28s</p>\n\n<pre><code>String s3 = new StringBuffer(s1).append(s2).toString();\n</code></pre>\n\n<p>1.92s</p>\n\n<pre><code>String s3 = s1.concat(s2);\n</code></pre>\n\n<p>0.70s</p>\n\n<pre><code>String s3 = \"1234567890\" + \"1234567890\";\n</code></pre>\n\n<p>0.0s</p>\n\n<p>So concat is the clear winner, unless you have static strings, in which case the compiler will have taken care of you already.</p>\n"},{"tags":[],"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299264076,"creation_date":1299207184,"answer_id":5189142,"question_id":5076740,"body_markdown":"Here it is a full implementation of  linear-probe map w/ double keys, single value. It should outperform java.util.HashMap nicely as well.\r\n\r\nWarning, it&#39;s written in the very early hours of the day from scratch, so it might contain bugs. Please feel free to edit it.\r\n\r\nThe solution must beat any wrapper, concat one at any time. The no allocation on get/put also makes it quick general purpose map.\r\n\r\nHope this solves the issue. (The code comes w/ some simple tests that are unneeded)\r\n\r\n-----\r\n\r\n    package bestsss.util;\r\n    \r\n    \r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public class DoubleKeyMap&lt;K1, K2, V&gt; {\r\n    \tprivate static final int MAX_CAPACITY =  1&lt;&lt;29;\t\r\n    \t\r\n    \tprivate static final Object TOMBSTONE = new String(&quot;TOMBSTONE&quot;);\r\n    \t\r\n    \tObject[] kvs; \r\n    \tint[] hashes;\r\n    \tint count = 0;\r\n    \r\n    \tfinal int rehashOnProbes;\t\r\n    \r\n    \tpublic DoubleKeyMap(){\r\n    \t\tthis(8, 5);\r\n    \t}\r\n    \r\n    \tpublic DoubleKeyMap(int capacity, int rehashOnProbes){\r\n    \t\tcapacity = nextCapacity(Math.max(2, capacity-1));\r\n    \t\tif (rehashOnProbes&gt;capacity){\r\n    \t\t\tthrow new IllegalArgumentException(&quot;rehashOnProbes too high&quot;);\r\n    \t\t}\r\n    \t\thashes = new int[capacity];\r\n    \t\tkvs = new Object[kvsIndex(capacity)];\t\t\r\n    \t\tcount = 0;\r\n    \t\tthis.rehashOnProbes = rehashOnProbes;\r\n    \t}\r\n    \r\n    \tprivate static int nextCapacity(int c) {\r\n    \t\tint n = Integer.highestOneBit(c)&lt;&lt;1;\r\n    \t\tif (n&lt;0 || n&gt;MAX_CAPACITY){\r\n    \t\t\tthrow new Error(&quot;map too large&quot;);\r\n    \t\t}\r\n    \t\treturn n;\r\n    \t}\r\n    \t\r\n    \t//alternatively this method can become non-static, protected and overriden, the perfoamnce can drop a little\r\n    \t//but if better spread of the lowest bit is possible, all good and proper\r\n    \tprivate static&lt;K1, K2&gt; int hash(K1 key1, K2 key2){\r\n    \t\t//spread more, if need be\r\n    \t\tint h1 = key1.hashCode();\r\n    \t\tint h2 = key2.hashCode();\r\n    \t\treturn h1+ (h2&lt;&lt;4) + h2; //h1+h2*17\r\n    \t}\r\n    \r\n    \tprivate static int kvsIndex(int baseIdx){\r\n    \t\tint idx = baseIdx;  \r\n    \t\tidx+=idx&lt;&lt;1;//idx*3\r\n    \t\treturn idx;\r\n    \t}\r\n    \r\n    \tprivate int baseIdx(int hash){\r\n    \t\treturn hash &amp; (hashes.length-1);\r\n    \t}\r\n    \r\n    \tpublic V get(K1 key1, K2 key2){\r\n    \t\tfinal int hash = hash(key1, key2);\r\n    \r\n    \r\n    \t\tfinal int[] hashes = this.hashes;\r\n    \t\tfinal Object[] kvs = this.kvs;\r\n    \t\tfinal int mask = hashes.length-1;\r\n    \r\n    \t\tfor(int base = baseIdx(hash);;base=(base+1)&amp;mask){\r\n    \t\t\tint k = kvsIndex(base);\r\n    \t\t\tK1 k1 = (K1) kvs[k];\r\n    \t\t\tif (k1==null)\r\n    \t\t\t\treturn null;//null met; no such value\r\n    \r\n    \t\t\tObject value;\r\n    \t\t\tif (hashes[base]!=hash || TOMBSTONE==(value=kvs[k+2]))\r\n    \t\t\t\tcontinue;//next\r\n    \r\n    \t\t\tK2 k2 = (K2) kvs[k+1];\r\n    \t\t\tif ( (key1==k1 || key1.equals(k1)) &amp;&amp; (key2==k2 || key2.equals(k2)) ){\r\n    \t\t\t\treturn (V) value;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \tpublic boolean contains(K1 key1, K2 key2){\r\n    \t\treturn get(key1, key2)!=null;\r\n    \t}\r\n    \r\n    \tpublic boolean containsValue(final V value){\r\n    \t\tfinal Object[] kvs = this.kvs;\r\n    \t\tif (value==null)\r\n    \t\t\treturn false;\r\n    \t\t\r\n    \t\tfor(int i=0;i&lt;kvs.length;i+=3){\r\n    \t\t\tObject v = kvs[2];\r\n    \t\t\tif (v==null || v==TOMBSTONE)\r\n    \t\t\t\tcontinue;\r\n    \t\t\tif (value==v || value.equals(v))\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \tpublic V put(K1 key1, K2 key2, V value){\r\n    \t\tint hash = hash(key1, key2);\r\n    \t\treturn doPut(key1, key2, value, hash);\r\n    \t}\r\n    \tpublic V remove(K1 key1, K2 key2){\r\n    \t\tint hash = hash(key1, key2);\r\n    \t\treturn doPut(key1, key2, null, hash);  \t\r\n    \t}\r\n    \r\n    \t//note, instead of remove a TOMBSTONE is used to mark the deletion\r\n    \t//this may leak keys but deletion doesn&#39;t need to shift the array like in Knuth 6.4\r\n    \tprotected V doPut(final K1 key1, final K2 key2, Object value, final int hash){\r\n    \t\t//null value -&gt; remove\r\n    \t\tint probes = 0;\r\n    \t\tfinal int[] hashes = this.hashes;\r\n    \t\tfinal Object[] kvs = this.kvs;\r\n    \t\tfinal int mask = hashes.length-1;\r\n    \r\n    \t\t//conservative resize: when too many probes and the count is greater than the half of the capacity\r\n    \t\tfor(int base = baseIdx(hash);probes&lt;rehashOnProbes || count&lt;(mask&gt;&gt;1);base=(base+1)&amp;mask, probes++){\r\n    \t\t\tfinal int k = kvsIndex(base);\r\n    \t\t\tK1 k1 = (K1) kvs[k];\r\n    \t\t\tK2 k2;\r\n    \t\t\t//find a gap, or resize\r\n    \t\t\tObject  old  = kvs[k+2];\r\n    \t\t\tfinal boolean emptySlot = k1==null || (value!=null &amp;&amp; old==TOMBSTONE); \r\n    \t\t\tif (emptySlot || (\r\n    \t\t\t\t\thashes[base] == hash &amp;&amp;\r\n    \t\t\t\t\t(k1==key1  || k1.equals(key1)) &amp;&amp;\r\n    \t\t\t\t\t((k2=(K2) kvs[k+1])==key2 || k2.equals(key2))) \r\n    \t\t\t){\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\tif (value==null){//remove()\r\n    \t\t\t\t\tif (emptySlot)\r\n    \t\t\t\t\t\treturn null;//not found, and no value -&gt;nothing to do\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tvalue = TOMBSTONE;\r\n    \t\t\t\t\tcount-=2;//offset the ++later\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tif (emptySlot){//new entry, update keys\r\n    \t\t\t\t\thashes[base] = hash;\t\t\t\t\r\n    \t\t\t\t\tkvs[k] = key1;\r\n    \t\t\t\t\tkvs[k+1] = key2;\r\n    \t\t\t\t}//else -&gt; keys and hash are equal\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t\tif (old==TOMBSTONE) \r\n    \t\t\t\t\told=null;\r\n    \t\t\t\t\r\n    \t\t\t\tkvs[k+2] = value;\r\n    \t\t\t\tcount++;\r\n    \t\t\t\t\r\n    \t\t\t\treturn (V) old;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tresize();\r\n    \t\treturn doPut(key1, key2, value, hash);//hack w/ recursion, after the resize\r\n    \t}\r\n    \r\n    \t//optimized version during resize, doesn&#39;t check equals which is the slowest part\t\r\n    \tprotected void doPutForResize(K1 key1, K2 key2, V value, final int hash){\r\n    \t\tfinal int[] hashes = this.hashes;\r\n    \t\tfinal Object[] kvs = this.kvs;\r\n    \t\tfinal int mask = hashes.length-1;\r\n    \t\t\r\n    \t\t//find the 1st gap and insert there\r\n    \t\tfor(int base = baseIdx(hash);;base=(base+1)&amp;mask){//it&#39;s ensured, no equal keys exist, so skip equals part\r\n    \t\t\tfinal int k = kvsIndex(base);\r\n    \t\t\tK1 k1 = (K1) kvs[k];\r\n    \t\t\tif (k1!=null) \r\n    \t\t\t\tcontinue;\r\n    \t\t\t\r\n    \t\t\thashes[base] = hash;\t\t\t\t\r\n    \t\t\tkvs[k] = key1;\r\n    \t\t\tkvs[k+1] = key2;\r\n    \t\t\tkvs[k+2] = value;\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t//resizes the map by doubling the capacity, \r\n    \t//the method uses altervative varian of put that doesn&#39;t check equality, or probes; just inserts at a gap\r\n    \tprotected void resize(){\t\t\r\n    \t\tfinal int[] hashes = this.hashes;\r\n    \t\tfinal Object[] kvs = this.kvs;\r\n    \t\tfinal int capacity = nextCapacity(hashes.length);\r\n    \t\t\r\n    \t\tthis.hashes = new int[capacity];\r\n    \t\tthis.kvs = new Object[kvsIndex(capacity)];\r\n    \r\n    \t\tfor (int i=0;i&lt;hashes.length; i++){\r\n    \t\t\tint k = kvsIndex(i);\r\n    \t\t\tK1 key1 = (K1) kvs[k];\r\n    \t\t\tObject value = kvs[k+2];\r\n    \t\t\tif (key1!=null &amp;&amp; TOMBSTONE!=value){\r\n    \t\t\t\tK2 key2 = (K2) kvs[k+1];\r\n    \t\t\t\tdoPutForResize(key1, key2, (V) value, hashes[i]);\r\n    \t\t\t}\r\n    \t\t}  \t\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tDoubleKeyMap&lt;String, String, Integer&gt; map = new DoubleKeyMap&lt;String, String, Integer&gt;(4,2);\r\n    \t\tmap.put(&quot;eur/usd&quot;, &quot;usd/jpy&quot;, 1);\r\n    \t\tmap.put(&quot;eur/usd&quot;, &quot;usd/jpy&quot;, 2);\r\n    \r\n    \t\tmap.put(&quot;eur/jpy&quot;, &quot;usd/jpy&quot;, 3);\r\n    \r\n    \t\tSystem.out.println(map.get(&quot;eur/jpy&quot;, &quot;usd/jpy&quot;));\r\n    \t\tSystem.out.println(map.get(&quot;eur/usd&quot;, &quot;usd/jpy&quot;));\r\n    \t\tSystem.out.println(&quot;======&quot;);\r\n    \r\n    \t\tmap.remove(&quot;eur/usd&quot;, &quot;usd/jpy&quot;);\r\n    \t\tSystem.out.println(map.get(&quot;eur/jpy&quot;, &quot;usd/jpy&quot;));\r\n    \t\tSystem.out.println(map.get(&quot;eur/usd&quot;, &quot;usd/jpy&quot;));\r\n    \t\tSystem.out.println(&quot;======&quot;);\r\n    \t\ttestResize();\r\n    \t}\r\n    \tstatic void testResize(){\r\n    \t\tDoubleKeyMap&lt;String, Integer, Integer&gt; map = new DoubleKeyMap&lt;String, Integer, Integer&gt;(18, 17);\r\n    \t\tlong s = 0;\r\n    \t\tString pref=&quot;xxx&quot;;\r\n    \t\t\r\n    \t\tfor (int i=0;i&lt;14000;i++){\r\n    \t\t\tmap.put(pref+i, i, i);\r\n    \t\t\t\r\n    \t\t\tif ((i&amp;1)==1)\r\n    \t\t\t\tmap.remove(pref+i, i);\r\n    \t\t\telse\r\n    \t\t\t\ts+=i;\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;sum: &quot;+s);\r\n    \t\tlong sum = 0;\r\n    \r\n    \t\tfor (int i=0;i&lt;14000;i++){\r\n    \t\t\tInteger n = map.get(pref+i, i);\r\n    \t\t\tif (n!=null &amp;&amp; n!=i){\r\n    \t\t\t\tthrow new AssertionError(); \r\n    \t\t\t}\r\n    \t\t\tif (n!=null){\r\n    \t\t\t\tSystem.out.println(n);\r\n    \t\t\t\tsum+=n;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;1st sum: &quot;+s);\r\n    \t\tSystem.out.println(&quot;2nd sum: &quot;+sum);\r\n    \t\t\r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>Here it is a full implementation of  linear-probe map w/ double keys, single value. It should outperform java.util.HashMap nicely as well.</p>\n\n<p>Warning, it's written in the very early hours of the day from scratch, so it might contain bugs. Please feel free to edit it.</p>\n\n<p>The solution must beat any wrapper, concat one at any time. The no allocation on get/put also makes it quick general purpose map.</p>\n\n<p>Hope this solves the issue. (The code comes w/ some simple tests that are unneeded)</p>\n\n<hr>\n\n<pre><code>package bestsss.util;\n\n\n@SuppressWarnings(\"unchecked\")\npublic class DoubleKeyMap&lt;K1, K2, V&gt; {\n    private static final int MAX_CAPACITY =  1&lt;&lt;29; \n\n    private static final Object TOMBSTONE = new String(\"TOMBSTONE\");\n\n    Object[] kvs; \n    int[] hashes;\n    int count = 0;\n\n    final int rehashOnProbes;   \n\n    public DoubleKeyMap(){\n        this(8, 5);\n    }\n\n    public DoubleKeyMap(int capacity, int rehashOnProbes){\n        capacity = nextCapacity(Math.max(2, capacity-1));\n        if (rehashOnProbes&gt;capacity){\n            throw new IllegalArgumentException(\"rehashOnProbes too high\");\n        }\n        hashes = new int[capacity];\n        kvs = new Object[kvsIndex(capacity)];       \n        count = 0;\n        this.rehashOnProbes = rehashOnProbes;\n    }\n\n    private static int nextCapacity(int c) {\n        int n = Integer.highestOneBit(c)&lt;&lt;1;\n        if (n&lt;0 || n&gt;MAX_CAPACITY){\n            throw new Error(\"map too large\");\n        }\n        return n;\n    }\n\n    //alternatively this method can become non-static, protected and overriden, the perfoamnce can drop a little\n    //but if better spread of the lowest bit is possible, all good and proper\n    private static&lt;K1, K2&gt; int hash(K1 key1, K2 key2){\n        //spread more, if need be\n        int h1 = key1.hashCode();\n        int h2 = key2.hashCode();\n        return h1+ (h2&lt;&lt;4) + h2; //h1+h2*17\n    }\n\n    private static int kvsIndex(int baseIdx){\n        int idx = baseIdx;  \n        idx+=idx&lt;&lt;1;//idx*3\n        return idx;\n    }\n\n    private int baseIdx(int hash){\n        return hash &amp; (hashes.length-1);\n    }\n\n    public V get(K1 key1, K2 key2){\n        final int hash = hash(key1, key2);\n\n\n        final int[] hashes = this.hashes;\n        final Object[] kvs = this.kvs;\n        final int mask = hashes.length-1;\n\n        for(int base = baseIdx(hash);;base=(base+1)&amp;mask){\n            int k = kvsIndex(base);\n            K1 k1 = (K1) kvs[k];\n            if (k1==null)\n                return null;//null met; no such value\n\n            Object value;\n            if (hashes[base]!=hash || TOMBSTONE==(value=kvs[k+2]))\n                continue;//next\n\n            K2 k2 = (K2) kvs[k+1];\n            if ( (key1==k1 || key1.equals(k1)) &amp;&amp; (key2==k2 || key2.equals(k2)) ){\n                return (V) value;\n            }\n        }\n    }\n    public boolean contains(K1 key1, K2 key2){\n        return get(key1, key2)!=null;\n    }\n\n    public boolean containsValue(final V value){\n        final Object[] kvs = this.kvs;\n        if (value==null)\n            return false;\n\n        for(int i=0;i&lt;kvs.length;i+=3){\n            Object v = kvs[2];\n            if (v==null || v==TOMBSTONE)\n                continue;\n            if (value==v || value.equals(v))\n                return true;\n        }\n        return false;\n    }\n\n    public V put(K1 key1, K2 key2, V value){\n        int hash = hash(key1, key2);\n        return doPut(key1, key2, value, hash);\n    }\n    public V remove(K1 key1, K2 key2){\n        int hash = hash(key1, key2);\n        return doPut(key1, key2, null, hash);   \n    }\n\n    //note, instead of remove a TOMBSTONE is used to mark the deletion\n    //this may leak keys but deletion doesn't need to shift the array like in Knuth 6.4\n    protected V doPut(final K1 key1, final K2 key2, Object value, final int hash){\n        //null value -&gt; remove\n        int probes = 0;\n        final int[] hashes = this.hashes;\n        final Object[] kvs = this.kvs;\n        final int mask = hashes.length-1;\n\n        //conservative resize: when too many probes and the count is greater than the half of the capacity\n        for(int base = baseIdx(hash);probes&lt;rehashOnProbes || count&lt;(mask&gt;&gt;1);base=(base+1)&amp;mask, probes++){\n            final int k = kvsIndex(base);\n            K1 k1 = (K1) kvs[k];\n            K2 k2;\n            //find a gap, or resize\n            Object  old  = kvs[k+2];\n            final boolean emptySlot = k1==null || (value!=null &amp;&amp; old==TOMBSTONE); \n            if (emptySlot || (\n                    hashes[base] == hash &amp;&amp;\n                    (k1==key1  || k1.equals(key1)) &amp;&amp;\n                    ((k2=(K2) kvs[k+1])==key2 || k2.equals(key2))) \n            ){\n\n                if (value==null){//remove()\n                    if (emptySlot)\n                        return null;//not found, and no value -&gt;nothing to do\n\n                    value = TOMBSTONE;\n                    count-=2;//offset the ++later\n                }\n\n                if (emptySlot){//new entry, update keys\n                    hashes[base] = hash;                \n                    kvs[k] = key1;\n                    kvs[k+1] = key2;\n                }//else -&gt; keys and hash are equal\n\n\n                if (old==TOMBSTONE) \n                    old=null;\n\n                kvs[k+2] = value;\n                count++;\n\n                return (V) old;\n            }\n        }\n        resize();\n        return doPut(key1, key2, value, hash);//hack w/ recursion, after the resize\n    }\n\n    //optimized version during resize, doesn't check equals which is the slowest part   \n    protected void doPutForResize(K1 key1, K2 key2, V value, final int hash){\n        final int[] hashes = this.hashes;\n        final Object[] kvs = this.kvs;\n        final int mask = hashes.length-1;\n\n        //find the 1st gap and insert there\n        for(int base = baseIdx(hash);;base=(base+1)&amp;mask){//it's ensured, no equal keys exist, so skip equals part\n            final int k = kvsIndex(base);\n            K1 k1 = (K1) kvs[k];\n            if (k1!=null) \n                continue;\n\n            hashes[base] = hash;                \n            kvs[k] = key1;\n            kvs[k+1] = key2;\n            kvs[k+2] = value;\n            return;\n        }\n    }\n\n    //resizes the map by doubling the capacity, \n    //the method uses altervative varian of put that doesn't check equality, or probes; just inserts at a gap\n    protected void resize(){        \n        final int[] hashes = this.hashes;\n        final Object[] kvs = this.kvs;\n        final int capacity = nextCapacity(hashes.length);\n\n        this.hashes = new int[capacity];\n        this.kvs = new Object[kvsIndex(capacity)];\n\n        for (int i=0;i&lt;hashes.length; i++){\n            int k = kvsIndex(i);\n            K1 key1 = (K1) kvs[k];\n            Object value = kvs[k+2];\n            if (key1!=null &amp;&amp; TOMBSTONE!=value){\n                K2 key2 = (K2) kvs[k+1];\n                doPutForResize(key1, key2, (V) value, hashes[i]);\n            }\n        }   \n    }\n\n    public static void main(String[] args) {\n        DoubleKeyMap&lt;String, String, Integer&gt; map = new DoubleKeyMap&lt;String, String, Integer&gt;(4,2);\n        map.put(\"eur/usd\", \"usd/jpy\", 1);\n        map.put(\"eur/usd\", \"usd/jpy\", 2);\n\n        map.put(\"eur/jpy\", \"usd/jpy\", 3);\n\n        System.out.println(map.get(\"eur/jpy\", \"usd/jpy\"));\n        System.out.println(map.get(\"eur/usd\", \"usd/jpy\"));\n        System.out.println(\"======\");\n\n        map.remove(\"eur/usd\", \"usd/jpy\");\n        System.out.println(map.get(\"eur/jpy\", \"usd/jpy\"));\n        System.out.println(map.get(\"eur/usd\", \"usd/jpy\"));\n        System.out.println(\"======\");\n        testResize();\n    }\n    static void testResize(){\n        DoubleKeyMap&lt;String, Integer, Integer&gt; map = new DoubleKeyMap&lt;String, Integer, Integer&gt;(18, 17);\n        long s = 0;\n        String pref=\"xxx\";\n\n        for (int i=0;i&lt;14000;i++){\n            map.put(pref+i, i, i);\n\n            if ((i&amp;1)==1)\n                map.remove(pref+i, i);\n            else\n                s+=i;\n        }\n        System.out.println(\"sum: \"+s);\n        long sum = 0;\n\n        for (int i=0;i&lt;14000;i++){\n            Integer n = map.get(pref+i, i);\n            if (n!=null &amp;&amp; n!=i){\n                throw new AssertionError(); \n            }\n            if (n!=null){\n                System.out.println(n);\n                sum+=n;\n            }\n        }\n        System.out.println(\"1st sum: \"+s);\n        System.out.println(\"2nd sum: \"+sum);\n\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":206751,"reputation":1117,"user_id":456228,"accept_rate":67,"display_name":"Martin Podval"},"score":0,"creation_date":1382697332,"post_id":9330396,"comment_id":29070831,"body_markdown":"Nice comment. I&#39;ve been looking for speed of string.format and now I see that it&#39;s little bit slow :-) I&#39;ll use concat instead.","body":"Nice comment. I&#39;ve been looking for speed of string.format and now I see that it&#39;s little bit slow :-) I&#39;ll use concat instead."}],"tags":[],"owner":{"account_id":325354,"reputation":796,"user_id":646490,"display_name":"sfosdal"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1329490580,"creation_date":1329490580,"answer_id":9330396,"question_id":5076740,"body_markdown":"I believe the answer might have already been determined, but I post to share the code.\r\n    \r\nShort answer, if pure concatenation is all you are looking for, is:  String.concat(...)\r\n\r\n**Output:**\r\n\r\n    ITERATION_LIMIT1: 1\r\n    ITERATION_LIMIT2: 10000000\r\n    s1: STRING1-1111111111111111111111\r\n    s2: STRING2-2222222222222222222222\r\n\r\n    iteration: 1\r\n                                              null:    1.7 nanos\r\n                                     s1.concat(s2):  106.1 nanos\r\n                                           s1 + s2:  251.7 nanos\r\n       new StringBuilder(s1).append(s2).toString():  246.6 nanos\r\n        new StringBuffer(s1).append(s2).toString():  404.7 nanos\r\n                     String.format(&quot;%s%s&quot;, s1, s2): 3276.0 nanos\r\n\r\n    Tests complete\r\n\r\n**Sample Code:**\r\n    \r\n    package net.fosdal.scratch;\r\n    \r\n    public class StringConcatenationPerformance {\r\n    \tprivate static final int\tITERATION_LIMIT1\t= 1;\r\n    \tprivate static final int\tITERATION_LIMIT2\t= 10000000;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString s1 = &quot;STRING1-1111111111111111111111&quot;;\r\n    \t\tString s2 = &quot;STRING2-2222222222222222222222&quot;;\r\n    \t\tString methodName;\r\n    \t\tlong startNanos, durationNanos;\r\n    \t\tint iteration2;\r\n    \r\n    \t\tSystem.out.println(&quot;ITERATION_LIMIT1: &quot; + ITERATION_LIMIT1);\r\n    \t\tSystem.out.println(&quot;ITERATION_LIMIT2: &quot; + ITERATION_LIMIT2);\r\n    \t\tSystem.out.println(&quot;s1: &quot; + s1);\r\n    \t\tSystem.out.println(&quot;s2: &quot; + s2);\r\n    \t\tint iteration1 = 0;\r\n    \t\twhile (iteration1++ &lt; ITERATION_LIMIT1) {\r\n    \t\t\tSystem.out.println();\r\n    \t\t\tSystem.out.println(&quot;iteration: &quot; + iteration1);\r\n    \r\n    \t\t\t// method #0\r\n    \t\t\tmethodName = &quot;null&quot;;\r\n    \t\t\titeration2 = 0;\r\n    \t\t\tstartNanos = System.nanoTime();\r\n    \t\t\twhile (iteration2++ &lt; ITERATION_LIMIT2) {\r\n    \t\t\t\tmethod0(s1, s2);\r\n    \t\t\t}\r\n    \t\t\tdurationNanos = System.nanoTime() - startNanos;\r\n    \t\t\tSystem.out.println(String.format(&quot;%50s: %6.1f nanos&quot;, methodName, ((double) durationNanos) / ITERATION_LIMIT2));\r\n    \r\n    \t\t\t// method #1\r\n    \t\t\tmethodName = &quot;s1.concat(s2)&quot;;\r\n    \t\t\titeration2 = 0;\r\n    \t\t\tstartNanos = System.nanoTime();\r\n    \t\t\twhile (iteration2++ &lt; ITERATION_LIMIT2) {\r\n    \t\t\t\tmethod1(s1, s2);\r\n    \t\t\t}\r\n    \t\t\tdurationNanos = System.nanoTime() - startNanos;\r\n    \t\t\tSystem.out.println(String.format(&quot;%50s: %6.1f nanos&quot;, methodName, ((double) durationNanos) / ITERATION_LIMIT2));\r\n    \r\n    \t\t\t// method #2\r\n    \t\t\titeration2 = 0;\r\n    \t\t\tstartNanos = System.nanoTime();\r\n    \t\t\tmethodName = &quot;s1 + s2&quot;;\r\n    \t\t\twhile (iteration2++ &lt; ITERATION_LIMIT2) {\r\n    \t\t\t\tmethod2(s1, s2);\r\n    \t\t\t}\r\n    \t\t\tdurationNanos = System.nanoTime() - startNanos;\r\n    \t\t\tSystem.out.println(String.format(&quot;%50s: %6.1f nanos&quot;, methodName, ((double) durationNanos) / ITERATION_LIMIT2));\r\n    \r\n    \t\t\t// method #3\r\n    \t\t\titeration2 = 0;\r\n    \t\t\tstartNanos = System.nanoTime();\r\n    \t\t\tmethodName = &quot;new StringBuilder(s1).append(s2).toString()&quot;;\r\n    \t\t\twhile (iteration2++ &lt; ITERATION_LIMIT2) {\r\n    \t\t\t\tmethod3(s1, s2);\r\n    \t\t\t}\r\n    \t\t\tdurationNanos = System.nanoTime() - startNanos;\r\n    \t\t\tSystem.out.println(String.format(&quot;%50s: %6.1f nanos&quot;, methodName, ((double) durationNanos) / ITERATION_LIMIT2));\r\n    \r\n    \t\t\t// method #4\r\n    \t\t\titeration2 = 0;\r\n    \t\t\tstartNanos = System.nanoTime();\r\n    \t\t\tmethodName = &quot;new StringBuffer(s1).append(s2).toString()&quot;;\r\n    \t\t\twhile (iteration2++ &lt; ITERATION_LIMIT2) {\r\n    \t\t\t\tmethod4(s1, s2);\r\n    \t\t\t}\r\n    \t\t\tdurationNanos = System.nanoTime() - startNanos;\r\n    \t\t\tSystem.out.println(String.format(&quot;%50s: %6.1f nanos&quot;, methodName, ((double) durationNanos) / ITERATION_LIMIT2));\r\n    \r\n    \t\t\t// method #5\r\n    \t\t\titeration2 = 0;\r\n    \t\t\tstartNanos = System.nanoTime();\r\n    \t\t\tmethodName = &quot;String.format(\\&quot;%s%s\\&quot;, s1, s2)&quot;;\r\n    \t\t\twhile (iteration2++ &lt; ITERATION_LIMIT2) {\r\n    \t\t\t\tmethod5(s1, s2);\r\n    \t\t\t}\r\n    \t\t\tdurationNanos = System.nanoTime() - startNanos;\r\n    \t\t\tSystem.out.println(String.format(&quot;%50s: %6.1f nanos&quot;, methodName, ((double) durationNanos) / ITERATION_LIMIT2));\r\n    \r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t\tSystem.out.println(&quot;Tests complete&quot;);\r\n    \r\n    \t}\r\n    \r\n    \tpublic static String method0(String s1, String s2) {\r\n    \t\treturn &quot;&quot;;\r\n    \t}\r\n    \r\n    \tpublic static String method1(String s1, String s2) {\r\n    \t\treturn s1.concat(s2);\r\n    \t}\r\n    \r\n    \tpublic static String method2(String s1, String s2) {\r\n    \t\treturn s1 + s2;\r\n    \t}\r\n    \r\n    \tpublic static String method3(String s1, String s2) {\r\n    \t\treturn new StringBuilder(s1).append(s2).toString();\r\n    \t}\r\n    \r\n    \tpublic static String method4(String s1, String s2) {\r\n    \t\treturn new StringBuffer(s1).append(s2).toString();\r\n    \t}\r\n    \r\n    \tpublic static String method5(String s1, String s2) {\r\n    \t\treturn String.format(&quot;%s%s&quot;, s1, s2);\r\n    \t}\r\n    \r\n    }\r\n    ","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>I believe the answer might have already been determined, but I post to share the code.</p>\n\n<p>Short answer, if pure concatenation is all you are looking for, is:  String.concat(...)</p>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>ITERATION_LIMIT1: 1\nITERATION_LIMIT2: 10000000\ns1: STRING1-1111111111111111111111\ns2: STRING2-2222222222222222222222\n\niteration: 1\n                                          null:    1.7 nanos\n                                 s1.concat(s2):  106.1 nanos\n                                       s1 + s2:  251.7 nanos\n   new StringBuilder(s1).append(s2).toString():  246.6 nanos\n    new StringBuffer(s1).append(s2).toString():  404.7 nanos\n                 String.format(\"%s%s\", s1, s2): 3276.0 nanos\n\nTests complete\n</code></pre>\n\n<p><strong>Sample Code:</strong></p>\n\n<pre><code>package net.fosdal.scratch;\n\npublic class StringConcatenationPerformance {\n    private static final int    ITERATION_LIMIT1    = 1;\n    private static final int    ITERATION_LIMIT2    = 10000000;\n\n    public static void main(String[] args) {\n        String s1 = \"STRING1-1111111111111111111111\";\n        String s2 = \"STRING2-2222222222222222222222\";\n        String methodName;\n        long startNanos, durationNanos;\n        int iteration2;\n\n        System.out.println(\"ITERATION_LIMIT1: \" + ITERATION_LIMIT1);\n        System.out.println(\"ITERATION_LIMIT2: \" + ITERATION_LIMIT2);\n        System.out.println(\"s1: \" + s1);\n        System.out.println(\"s2: \" + s2);\n        int iteration1 = 0;\n        while (iteration1++ &lt; ITERATION_LIMIT1) {\n            System.out.println();\n            System.out.println(\"iteration: \" + iteration1);\n\n            // method #0\n            methodName = \"null\";\n            iteration2 = 0;\n            startNanos = System.nanoTime();\n            while (iteration2++ &lt; ITERATION_LIMIT2) {\n                method0(s1, s2);\n            }\n            durationNanos = System.nanoTime() - startNanos;\n            System.out.println(String.format(\"%50s: %6.1f nanos\", methodName, ((double) durationNanos) / ITERATION_LIMIT2));\n\n            // method #1\n            methodName = \"s1.concat(s2)\";\n            iteration2 = 0;\n            startNanos = System.nanoTime();\n            while (iteration2++ &lt; ITERATION_LIMIT2) {\n                method1(s1, s2);\n            }\n            durationNanos = System.nanoTime() - startNanos;\n            System.out.println(String.format(\"%50s: %6.1f nanos\", methodName, ((double) durationNanos) / ITERATION_LIMIT2));\n\n            // method #2\n            iteration2 = 0;\n            startNanos = System.nanoTime();\n            methodName = \"s1 + s2\";\n            while (iteration2++ &lt; ITERATION_LIMIT2) {\n                method2(s1, s2);\n            }\n            durationNanos = System.nanoTime() - startNanos;\n            System.out.println(String.format(\"%50s: %6.1f nanos\", methodName, ((double) durationNanos) / ITERATION_LIMIT2));\n\n            // method #3\n            iteration2 = 0;\n            startNanos = System.nanoTime();\n            methodName = \"new StringBuilder(s1).append(s2).toString()\";\n            while (iteration2++ &lt; ITERATION_LIMIT2) {\n                method3(s1, s2);\n            }\n            durationNanos = System.nanoTime() - startNanos;\n            System.out.println(String.format(\"%50s: %6.1f nanos\", methodName, ((double) durationNanos) / ITERATION_LIMIT2));\n\n            // method #4\n            iteration2 = 0;\n            startNanos = System.nanoTime();\n            methodName = \"new StringBuffer(s1).append(s2).toString()\";\n            while (iteration2++ &lt; ITERATION_LIMIT2) {\n                method4(s1, s2);\n            }\n            durationNanos = System.nanoTime() - startNanos;\n            System.out.println(String.format(\"%50s: %6.1f nanos\", methodName, ((double) durationNanos) / ITERATION_LIMIT2));\n\n            // method #5\n            iteration2 = 0;\n            startNanos = System.nanoTime();\n            methodName = \"String.format(\\\"%s%s\\\", s1, s2)\";\n            while (iteration2++ &lt; ITERATION_LIMIT2) {\n                method5(s1, s2);\n            }\n            durationNanos = System.nanoTime() - startNanos;\n            System.out.println(String.format(\"%50s: %6.1f nanos\", methodName, ((double) durationNanos) / ITERATION_LIMIT2));\n\n        }\n        System.out.println();\n        System.out.println(\"Tests complete\");\n\n    }\n\n    public static String method0(String s1, String s2) {\n        return \"\";\n    }\n\n    public static String method1(String s1, String s2) {\n        return s1.concat(s2);\n    }\n\n    public static String method2(String s1, String s2) {\n        return s1 + s2;\n    }\n\n    public static String method3(String s1, String s2) {\n        return new StringBuilder(s1).append(s2).toString();\n    }\n\n    public static String method4(String s1, String s2) {\n        return new StringBuffer(s1).append(s2).toString();\n    }\n\n    public static String method5(String s1, String s2) {\n        return String.format(\"%s%s\", s1, s2);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":75320,"reputation":2529,"user_id":216104,"accept_rate":91,"display_name":"Redandwhite"},"score":0,"creation_date":1360323445,"post_id":13589209,"comment_id":20678402,"body_markdown":"Can you provide details on the JVM you tested these with?","body":"Can you provide details on the JVM you tested these with?"},{"owner":{"account_id":1517760,"reputation":407,"user_id":1449559,"accept_rate":80,"display_name":"leoismyname"},"score":2,"creation_date":1360604131,"post_id":13589209,"comment_id":20756543,"body_markdown":"@Redandwhite\njava version &quot;1.6.0_31&quot;\nJava(TM) SE Runtime Environment (build 1.6.0_31-b05)\nJava HotSpot(TM) Client VM (build 20.6-b01, mixed mode, sharing)","body":"@Redandwhite java version &quot;1.6.0_31&quot; Java(TM) SE Runtime Environment (build 1.6.0_31-b05) Java HotSpot(TM) Client VM (build 20.6-b01, mixed mode, sharing)"}],"tags":[],"owner":{"account_id":1517760,"reputation":407,"user_id":1449559,"accept_rate":80,"display_name":"leoismyname"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1354035805,"creation_date":1354035492,"answer_id":13589209,"question_id":5076740,"body_markdown":"For me concat3 method as below is the fastest way after doing benchmark on my windows and remote linux machine:-\r\nThough i believe concat1 performance is JVM implementation and optimization dependent and may perform better in future version\r\n\r\n        public class StringConcat {\r\n    \r\n        public static void main(String[] args) {\r\n            int run = 100 * 100 * 1000;\r\n            long startTime, total = 0;\r\n    \r\n            final String a = &quot;a&quot;;\r\n            final String b = &quot;assdfsaf&quot;;\r\n            final String c = &quot;aasfasfsaf&quot;;\r\n            final String d = &quot;afafafdaa&quot;;\r\n            final String e = &quot;afdassadf&quot;;\r\n    \r\n            startTime = System.currentTimeMillis();\r\n            concat1(run, a, b, c, d, e);\r\n            total = System.currentTimeMillis() - startTime;\r\n            System.out.println(total);\r\n    \r\n            startTime = System.currentTimeMillis();\r\n            concat2(run, a, b, c, d, e);\r\n            total = System.currentTimeMillis() - startTime;\r\n            System.out.println(total);\r\n            \r\n            startTime = System.currentTimeMillis();\r\n            concat3(run, a, b, c, d, e);\r\n            total = System.currentTimeMillis() - startTime;\r\n            System.out.println(total);\r\n        }\r\n    \r\n        private static void concat3(int run, String a, String b, String c, String d, String e) {\r\n            for (int i = 0; i &lt; run; i++) {\r\n                String str = new StringBuilder(a.length() + b.length() + c.length() + d.length() + e.length()).append(a)\r\n                        .append(b).append(c).append(d).append(e).toString();\r\n            }\r\n        }\r\n    \r\n        private static void concat2(int run, String a, String b, String c, String d, String e) {\r\n            for (int i = 0; i &lt; run; i++) {\r\n                String str = new StringBuilder(a).append(b).append(c).append(d).append(e).toString();\r\n            }\r\n        }\r\n    \r\n        private static void concat1(int run, String a, String b, String c, String d, String e) {\r\n            for (int i = 0; i &lt; run; i++) {\r\n                String str = a + b + c + d + e;\r\n            }\r\n        }\r\n    }\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>For me concat3 method as below is the fastest way after doing benchmark on my windows and remote linux machine:-\nThough i believe concat1 performance is JVM implementation and optimization dependent and may perform better in future version</p>\n\n<pre><code>    public class StringConcat {\n\n    public static void main(String[] args) {\n        int run = 100 * 100 * 1000;\n        long startTime, total = 0;\n\n        final String a = \"a\";\n        final String b = \"assdfsaf\";\n        final String c = \"aasfasfsaf\";\n        final String d = \"afafafdaa\";\n        final String e = \"afdassadf\";\n\n        startTime = System.currentTimeMillis();\n        concat1(run, a, b, c, d, e);\n        total = System.currentTimeMillis() - startTime;\n        System.out.println(total);\n\n        startTime = System.currentTimeMillis();\n        concat2(run, a, b, c, d, e);\n        total = System.currentTimeMillis() - startTime;\n        System.out.println(total);\n\n        startTime = System.currentTimeMillis();\n        concat3(run, a, b, c, d, e);\n        total = System.currentTimeMillis() - startTime;\n        System.out.println(total);\n    }\n\n    private static void concat3(int run, String a, String b, String c, String d, String e) {\n        for (int i = 0; i &lt; run; i++) {\n            String str = new StringBuilder(a.length() + b.length() + c.length() + d.length() + e.length()).append(a)\n                    .append(b).append(c).append(d).append(e).toString();\n        }\n    }\n\n    private static void concat2(int run, String a, String b, String c, String d, String e) {\n        for (int i = 0; i &lt; run; i++) {\n            String str = new StringBuilder(a).append(b).append(c).append(d).append(e).toString();\n        }\n    }\n\n    private static void concat1(int run, String a, String b, String c, String d, String e) {\n        for (int i = 0; i &lt; run; i++) {\n            String str = a + b + c + d + e;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2478109,"reputation":2505,"user_id":2158271,"accept_rate":56,"display_name":"haba713"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1410858011,"creation_date":1410858011,"answer_id":25864597,"question_id":5076740,"body_markdown":"You should test with a String generated at run time (like UUID.randomUUID().toString()) not at compile time (like &quot;my string&quot;). My results are\r\n\r\n    plus:     118 ns\r\n    concat:    52 ns\r\n    builder1: 102 ns\r\n    builder2:  66 ns\r\n    buffer1:  119 ns\r\n    buffer2:   87 ns\r\n\r\nwith this implementation:\r\n\r\n    private static long COUNT = 10000000;\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String s1 = UUID.randomUUID().toString();\r\n        String s2 = UUID.randomUUID().toString();\r\n        for(String methodName : new String[] {\r\n                &quot;none&quot;, &quot;plus&quot;, &quot;concat&quot;, &quot;builder1&quot;, &quot;builder2&quot;, &quot;buffer1&quot;, &quot;buffer2&quot;\r\n        }) {\r\n            Method method = ConcatPerformanceTest.class.getMethod(methodName, String.class, String.class);\r\n            long time = System.nanoTime();\r\n            for(int i = 0; i &lt; COUNT; i++) {\r\n                method.invoke((Object) null, s1, s2);\r\n            }\r\n            System.out.println(methodName + &quot;: &quot; + (System.nanoTime() - time)/COUNT + &quot; ns&quot;);\r\n        }\r\n    }\r\n    \r\n    public static String none(String s1, String s2) {\r\n        return null;\r\n    }\r\n    \r\n    public static String plus(String s1, String s2) {\r\n        return s1 + s2;\r\n    }\r\n\r\n    public static String concat(String s1, String s2) {\r\n        return s1.concat(s2);\r\n    }\r\n\r\n    public static String builder1(String s1, String s2) {\r\n        return new StringBuilder(s1).append(s2).toString();\r\n    }\r\n\r\n    public static String builder2(String s1, String s2) {\r\n        return new StringBuilder(s1.length() + s2.length()).append(s1).append(s2).toString();\r\n    }\r\n\r\n    public static String buffer1(String s1, String s2) {\r\n        return new StringBuffer(s1).append(s2).toString();\r\n    }\r\n\r\n    public static String buffer2(String s1, String s2) {\r\n        return new StringBuffer(s1.length() + s2.length()).append(s1).append(s2).toString();\r\n    }","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>You should test with a String generated at run time (like UUID.randomUUID().toString()) not at compile time (like \"my string\"). My results are</p>\n\n<pre><code>plus:     118 ns\nconcat:    52 ns\nbuilder1: 102 ns\nbuilder2:  66 ns\nbuffer1:  119 ns\nbuffer2:   87 ns\n</code></pre>\n\n<p>with this implementation:</p>\n\n<pre><code>private static long COUNT = 10000000;\n\npublic static void main(String[] args) throws Exception {\n    String s1 = UUID.randomUUID().toString();\n    String s2 = UUID.randomUUID().toString();\n    for(String methodName : new String[] {\n            \"none\", \"plus\", \"concat\", \"builder1\", \"builder2\", \"buffer1\", \"buffer2\"\n    }) {\n        Method method = ConcatPerformanceTest.class.getMethod(methodName, String.class, String.class);\n        long time = System.nanoTime();\n        for(int i = 0; i &lt; COUNT; i++) {\n            method.invoke((Object) null, s1, s2);\n        }\n        System.out.println(methodName + \": \" + (System.nanoTime() - time)/COUNT + \" ns\");\n    }\n}\n\npublic static String none(String s1, String s2) {\n    return null;\n}\n\npublic static String plus(String s1, String s2) {\n    return s1 + s2;\n}\n\npublic static String concat(String s1, String s2) {\n    return s1.concat(s2);\n}\n\npublic static String builder1(String s1, String s2) {\n    return new StringBuilder(s1).append(s2).toString();\n}\n\npublic static String builder2(String s1, String s2) {\n    return new StringBuilder(s1.length() + s2.length()).append(s1).append(s2).toString();\n}\n\npublic static String buffer1(String s1, String s2) {\n    return new StringBuffer(s1).append(s2).toString();\n}\n\npublic static String buffer2(String s1, String s2) {\n    return new StringBuffer(s1.length() + s2.length()).append(s1).append(s2).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8206803,"reputation":2009,"user_id":6176277,"accept_rate":64,"display_name":"ThatDataGuy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546871089,"creation_date":1546871089,"answer_id":54076200,"question_id":5076740,"body_markdown":"Bear in mind that if you are concatenating millions of strings, then string.concat will most likely generate millions of new string object refs. This will have an increased CPU utilisation.","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>Bear in mind that if you are concatenating millions of strings, then string.concat will most likely generate millions of new string object refs. This will have an increased CPU utilisation.</p>\n"},{"tags":[],"owner":{"account_id":1682106,"reputation":3953,"user_id":1546137,"accept_rate":67,"display_name":"ihebiheb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548184676,"creation_date":1548184676,"answer_id":54315020,"question_id":5076740,"body_markdown":"According to the [Java specification][1] ([and since the very first version of Java][2]), in the section &quot;String Concatenation Operator +&quot; it is said that :\r\n\r\n&gt; To increase the performance of repeated string concatenation, a Java\r\n&gt; compiler may use the StringBuffer class or a similar technique to\r\n&gt; reduce the number of intermediate String objects that are created by\r\n&gt; evaluation of an expression\r\n\r\nSo basically, using the `+ operator` or `StringBuilder.append` for variables is basically the same. \r\n\r\n\r\n----------\r\n\r\n\r\nOther thing, I know that in your question you mentioned adding only 2 Strings, but have in mind that adding 3 or more Strings will lead to different results :\r\n\r\nI used a slightly modified @Duncan McGregor example. I have 5 methods concatenating 2 to 6 strings using concat and 5 methods concatenating 2 to 6 strings using StringBuilder :\r\n\r\n    // Initialization\r\n        private final String s1 = new String(&quot;1234567890&quot;);\r\n    \tprivate final String s2 = new String(&quot;1234567890&quot;);\r\n    \tprivate final String s3 = new String(&quot;1234567890&quot;);\r\n    \tprivate final String s4 = new String(&quot;1234567890&quot;);\r\n    \tprivate final String s5 = new String(&quot;1234567890&quot;);\r\n    \tprivate final String s6 = new String(&quot;1234567890&quot;);\r\n\r\n    // testing the concat\r\n    \tpublic void testConcatenation2stringsConcat(int count) {\r\n    \t\tfor (int i = 0; i &lt; count; i++) {\r\n    \t\t\tString s100 = s1.concat(s2);\r\n    \t\t}\r\n    \t}\r\n    \tpublic void testConcatenation3stringsConcat(int count) {\r\n    \t\tfor (int i = 0; i &lt; count; i++) {\r\n    \t\t\tString s100 = s1.concat(s2).concat(s3);\r\n    \t\t}\r\n    \t}\r\n    \tpublic void testConcatenation4stringsConcat(int count) {\r\n    \t\tfor (int i = 0; i &lt; count; i++) {\r\n    \t\t\tString s100 = s1.concat(s2).concat(s3).concat(s4);\r\n    \t\t}\r\n    \t}\r\n    \tpublic void testConcatenation5stringsConcat(int count) {\r\n    \t\tfor (int i = 0; i &lt; count; i++) {\r\n    \t\t\tString s100 = s1.concat(s2).concat(s3).concat(s4).concat(s5);\r\n    \t\t}\r\n    \t}\r\n    \tpublic void testConcatenation6stringsConcat(int count) {\r\n    \t\tfor (int i = 0; i &lt; count; i++) {\r\n    \t\t\tString s100 = s1.concat(s2).concat(s3).concat(s4).concat(s5).concat(s6);\r\n    \t\t}\r\n    \t}\r\n\r\n    //testing the StringBuilder\r\n        public void testConcatenation2stringsSB(int count) {\r\n    \t    for (int i = 0; i &lt; count; i++) {\r\n    \t    \tString s100 = new StringBuilder(s1).append(s2).toString();\r\n    \t    }\r\n    \t}\r\n    \tpublic void testConcatenation3stringsSB(int count) {\r\n    \t    for (int i = 0; i &lt; count; i++) {\r\n    \t    \tString s100 = new StringBuilder(s1).append(s2).append(s3).toString();\r\n    \t    }\r\n    \t}\r\n    \tpublic void testConcatenation4stringsSB(int count) {\r\n    \t    for (int i = 0; i &lt; count; i++) {\r\n    \t    \tString s100 = new StringBuilder(s1).append(s2).append(s3).append(s4).toString();\r\n    \t    }\r\n    \t}\r\n    \tpublic void testConcatenation5stringsSB(int count) {\r\n    \t    for (int i = 0; i &lt; count; i++) {\r\n    \t    \tString s100 = new StringBuilder(s1).append(s2).append(s3).append(s4).append(s5).toString();\r\n    \t    }\r\n    \t}\r\n    \tpublic void testConcatenation6stringsSB(int count) {\r\n    \t    for (int i = 0; i &lt; count; i++) {\r\n    \t    \tString s100 = new StringBuilder(s1).append(s2).append(s3).append(s4).append(s5).append(s6).toString();\r\n    \t    }\r\n    \t}\r\n\r\nI obtained these results (in seconds) :\r\n\r\n**testConcatenation2stringsConcat** : 0.018 |||||||||||||||| **testConcatenation2stringsSB** : 0.2\r\n**testConcatenation3stringsConcat** : 0.35 ||||||||||||||||||| **testConcatenation3stringsSB** : 0.25\r\n**testConcatenation4stringsConcat** : 0.5 |||||||||||||||||||||| **testConcatenation4stringsSB** : 0.3\r\n**testConcatenation5stringsConcat** : 0.67 ||||||||||||||||||| **testConcatenation5stringsSB** : 0.38\r\n**testConcatenation5stringsConcat** : 0.9 |||||||||||||||||||||| **testConcatenation5stringsSB** : 0.43\r\n\r\n - You can see that concat is faster than StringBuilder only when\r\n   concatenating only 2 Strings\r\n - See that when adding more and more Strings, the StringBuilder resulting time is increasing more\r\n   slowly that using the concat\r\n - Note that the difference will be more significant when the strings\r\n   are very long\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.18.1\r\n  [2]: http://web.archive.org/web/20041205170952/http://java.sun.com:80/docs/books/jls/first_edition/html/15.doc.html#40226","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>According to the <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.18.1\" rel=\"nofollow noreferrer\">Java specification</a> (<a href=\"http://web.archive.org/web/20041205170952/http://java.sun.com:80/docs/books/jls/first_edition/html/15.doc.html#40226\" rel=\"nofollow noreferrer\">and since the very first version of Java</a>), in the section \"String Concatenation Operator +\" it is said that :</p>\n\n<blockquote>\n  <p>To increase the performance of repeated string concatenation, a Java\n  compiler may use the StringBuffer class or a similar technique to\n  reduce the number of intermediate String objects that are created by\n  evaluation of an expression</p>\n</blockquote>\n\n<p>So basically, using the <code>+ operator</code> or <code>StringBuilder.append</code> for variables is basically the same. </p>\n\n<hr>\n\n<p>Other thing, I know that in your question you mentioned adding only 2 Strings, but have in mind that adding 3 or more Strings will lead to different results :</p>\n\n<p>I used a slightly modified @Duncan McGregor example. I have 5 methods concatenating 2 to 6 strings using concat and 5 methods concatenating 2 to 6 strings using StringBuilder :</p>\n\n<pre><code>// Initialization\n    private final String s1 = new String(\"1234567890\");\n    private final String s2 = new String(\"1234567890\");\n    private final String s3 = new String(\"1234567890\");\n    private final String s4 = new String(\"1234567890\");\n    private final String s5 = new String(\"1234567890\");\n    private final String s6 = new String(\"1234567890\");\n\n// testing the concat\n    public void testConcatenation2stringsConcat(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = s1.concat(s2);\n        }\n    }\n    public void testConcatenation3stringsConcat(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = s1.concat(s2).concat(s3);\n        }\n    }\n    public void testConcatenation4stringsConcat(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = s1.concat(s2).concat(s3).concat(s4);\n        }\n    }\n    public void testConcatenation5stringsConcat(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = s1.concat(s2).concat(s3).concat(s4).concat(s5);\n        }\n    }\n    public void testConcatenation6stringsConcat(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = s1.concat(s2).concat(s3).concat(s4).concat(s5).concat(s6);\n        }\n    }\n\n//testing the StringBuilder\n    public void testConcatenation2stringsSB(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = new StringBuilder(s1).append(s2).toString();\n        }\n    }\n    public void testConcatenation3stringsSB(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = new StringBuilder(s1).append(s2).append(s3).toString();\n        }\n    }\n    public void testConcatenation4stringsSB(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = new StringBuilder(s1).append(s2).append(s3).append(s4).toString();\n        }\n    }\n    public void testConcatenation5stringsSB(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = new StringBuilder(s1).append(s2).append(s3).append(s4).append(s5).toString();\n        }\n    }\n    public void testConcatenation6stringsSB(int count) {\n        for (int i = 0; i &lt; count; i++) {\n            String s100 = new StringBuilder(s1).append(s2).append(s3).append(s4).append(s5).append(s6).toString();\n        }\n    }\n</code></pre>\n\n<p>I obtained these results (in seconds) :</p>\n\n<p><strong>testConcatenation2stringsConcat</strong> : 0.018 |||||||||||||||| <strong>testConcatenation2stringsSB</strong> : 0.2\n<strong>testConcatenation3stringsConcat</strong> : 0.35 ||||||||||||||||||| <strong>testConcatenation3stringsSB</strong> : 0.25\n<strong>testConcatenation4stringsConcat</strong> : 0.5 |||||||||||||||||||||| <strong>testConcatenation4stringsSB</strong> : 0.3\n<strong>testConcatenation5stringsConcat</strong> : 0.67 ||||||||||||||||||| <strong>testConcatenation5stringsSB</strong> : 0.38\n<strong>testConcatenation5stringsConcat</strong> : 0.9 |||||||||||||||||||||| <strong>testConcatenation5stringsSB</strong> : 0.43</p>\n\n<ul>\n<li>You can see that concat is faster than StringBuilder only when\nconcatenating only 2 Strings</li>\n<li>See that when adding more and more Strings, the StringBuilder resulting time is increasing more\nslowly that using the concat</li>\n<li>Note that the difference will be more significant when the strings\nare very long</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":0,"creation_date":1675527733,"post_id":61288006,"comment_id":132950073,"body_markdown":"How does this perform, I have not used it before (in comparison to string  builder or simple concatenation?","body":"How does this perform, I have not used it before (in comparison to string  builder or simple concatenation?"},{"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"score":0,"creation_date":1675619439,"post_id":61288006,"comment_id":132963838,"body_markdown":"@ggb667 `StringBuilder` is definitely faster when concatenating two strings seamlessly than `StringJoiner(&quot;&quot;)`. As soon as you want to have a separator between the strings, the speed should not differ noticeably anymore. A benchmark would certainly be interesting here. In the latter case, I would prefer `StringJoiner` for better readability.","body":"@ggb667 <code>StringBuilder</code> is definitely faster when concatenating two strings seamlessly than <code>StringJoiner(&quot;&quot;)</code>. As soon as you want to have a separator between the strings, the speed should not differ noticeably anymore. A benchmark would certainly be interesting here. In the latter case, I would prefer <code>StringJoiner</code> for better readability."}],"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587207619,"creation_date":1587207619,"answer_id":61288006,"question_id":5076740,"body_markdown":"*Interestingly,* `StringJoiner` *isn&#39;t mentioned here…*\r\n\r\nUsually a separator has to be inserted between the strings, eg. `&quot;, &quot;`.&lt;br /&gt;The code is easier to read using `StringJoiner` than using `StringBuilder` and similarly fast.\r\n\r\n    StringJoiner joiner = new StringJoiner( &quot;, &quot; );\r\n    joiner.add( ccy1 ).add( ccy2 );\r\n\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p><em>Interestingly,</em> <code>StringJoiner</code> <em>isn't mentioned here…</em></p>\n\n<p>Usually a separator has to be inserted between the strings, eg. <code>\", \"</code>.<br />The code is easier to read using <code>StringJoiner</code> than using <code>StringBuilder</code> and similarly fast.</p>\n\n<pre><code>StringJoiner joiner = new StringJoiner( \", \" );\njoiner.add( ccy1 ).add( ccy2 );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14459744,"reputation":67,"user_id":10444843,"display_name":"Fyodor Iz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587221214,"creation_date":1587221214,"answer_id":61291053,"question_id":5076740,"body_markdown":"I decided to try to benchmark it and here is what my results are. I guess using default &quot;+&quot; concatenation is the easiest and fastest (or almost one of the fastest) way to go.\r\n\r\n    JMH version: 1.19\r\n    VM version: JDK 1.8.0_211, VM 25.211-b12\r\n    VM options: -Xms2G -Xmx2G\r\n    Warmup: 10 iterations, 1 s each\r\n    Measurement: 30 iterations, 1 s each\r\n    Timeout: 10 min per iteration\r\n    Threads: 1 thread, will synchronize iterations\r\n    Benchmark mode: Average time, time/op\r\n    Parameters: (N = 1000000)\r\n     \r\n    Benchmark          (N)  Mode  Cnt  Score     Error  Units\r\n    concat         1000000  avgt   30  24.839  &#177; 0.211  ms/op\r\n    plus           1000000  avgt   30  15.072  &#177; 0.155  ms/op\r\n    stringBuffer   1000000  avgt   30  14.835  &#177; 0.118  ms/op\r\n    stringBuilder  1000000  avgt   30  14.775  &#177; 0.205  ms/op\r\n\r\nHere is the bench code:\r\n\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n    @State(Scope.Benchmark)\r\n    @Fork(value = 2, jvmArgs = {&quot;-Xms2G&quot;, &quot;-Xmx2G&quot;})\r\n    @Warmup(iterations = 10)\r\n    @Measurement(iterations = 30)\r\n    public class BenchmarkString {\r\n    \r\n        @Param({&quot;1000000&quot;})\r\n        private int N;\r\n        private final String s1 = new String(&quot;1234567890124567890&quot;);\r\n        private final String s2 = new String(&quot;1234567890124567890&quot;);\r\n    \r\n        public static void main(String[] args) throws RunnerException {\r\n    \r\n            Options opt = new OptionsBuilder()\r\n                    .include(BenchmarkString.class.getSimpleName())\r\n                    .forks(1)\r\n                    .build();\r\n    \r\n            new Runner(opt).run();\r\n        }\r\n    \r\n        @Benchmark\r\n        public void plus() {\r\n            for (int i = 0; i &lt; N; i++) {\r\n                String s = s1 + s2;\r\n            }\r\n        }\r\n    \r\n        @Benchmark\r\n        public void stringBuilder() {\r\n            for (int i = 0; i &lt; N; i++) {\r\n                String s = new StringBuilder(s1).append(s2).toString();\r\n            }\r\n        }\r\n    \r\n        @Benchmark\r\n        public void stringBuffer() {\r\n            for (int i = 0; i &lt; N; i++) {\r\n                String s = new StringBuffer(s1).append(s2).toString();\r\n            }\r\n        }\r\n    \r\n        @Benchmark\r\n        public void concat() {\r\n            for (int i = 0; i &lt; N; i++) {\r\n                String s = s1.concat(s2);\r\n            }\r\n        }\r\n    }","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>I decided to try to benchmark it and here is what my results are. I guess using default \"+\" concatenation is the easiest and fastest (or almost one of the fastest) way to go.</p>\n\n<pre><code>JMH version: 1.19\nVM version: JDK 1.8.0_211, VM 25.211-b12\nVM options: -Xms2G -Xmx2G\nWarmup: 10 iterations, 1 s each\nMeasurement: 30 iterations, 1 s each\nTimeout: 10 min per iteration\nThreads: 1 thread, will synchronize iterations\nBenchmark mode: Average time, time/op\nParameters: (N = 1000000)\n\nBenchmark          (N)  Mode  Cnt  Score     Error  Units\nconcat         1000000  avgt   30  24.839  ± 0.211  ms/op\nplus           1000000  avgt   30  15.072  ± 0.155  ms/op\nstringBuffer   1000000  avgt   30  14.835  ± 0.118  ms/op\nstringBuilder  1000000  avgt   30  14.775  ± 0.205  ms/op\n</code></pre>\n\n<p>Here is the bench code:</p>\n\n<pre><code>@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\n@State(Scope.Benchmark)\n@Fork(value = 2, jvmArgs = {\"-Xms2G\", \"-Xmx2G\"})\n@Warmup(iterations = 10)\n@Measurement(iterations = 30)\npublic class BenchmarkString {\n\n    @Param({\"1000000\"})\n    private int N;\n    private final String s1 = new String(\"1234567890124567890\");\n    private final String s2 = new String(\"1234567890124567890\");\n\n    public static void main(String[] args) throws RunnerException {\n\n        Options opt = new OptionsBuilder()\n                .include(BenchmarkString.class.getSimpleName())\n                .forks(1)\n                .build();\n\n        new Runner(opt).run();\n    }\n\n    @Benchmark\n    public void plus() {\n        for (int i = 0; i &lt; N; i++) {\n            String s = s1 + s2;\n        }\n    }\n\n    @Benchmark\n    public void stringBuilder() {\n        for (int i = 0; i &lt; N; i++) {\n            String s = new StringBuilder(s1).append(s2).toString();\n        }\n    }\n\n    @Benchmark\n    public void stringBuffer() {\n        for (int i = 0; i &lt; N; i++) {\n            String s = new StringBuffer(s1).append(s2).toString();\n        }\n    }\n\n    @Benchmark\n    public void concat() {\n        for (int i = 0; i &lt; N; i++) {\n            String s = s1.concat(s2);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":92393,"reputation":9711,"user_id":253231,"accept_rate":84,"display_name":"Dan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63688,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":5076784,"answer_count":17,"score":46,"last_activity_date":1686660911,"creation_date":1298369331,"question_id":5076740,"body_markdown":"What&#39;s the fastest way to concatenate two Strings in Java?\r\n\r\ni.e \r\n\r\n    String ccyPair = ccy1 + ccy2;\r\n\r\nI&#39;m using `cyPair` as a key in a `HashMap` and it&#39;s called in a very tight loop to retrieve values.\r\n\r\nWhen I profile then this is the bottleneck\r\n\r\n    java.lang.StringBuilder.append(StringBuilder.java:119)  \r\n    java.lang.StringBuilder.(StringBuilder.java:93)\r\n\r\n","title":"What&#39;s the fastest way to concatenate two Strings in Java?","body":"<p>What's the fastest way to concatenate two Strings in Java?</p>\n\n<p>i.e </p>\n\n<pre><code>String ccyPair = ccy1 + ccy2;\n</code></pre>\n\n<p>I'm using <code>cyPair</code> as a key in a <code>HashMap</code> and it's called in a very tight loop to retrieve values.</p>\n\n<p>When I profile then this is the bottleneck</p>\n\n<pre><code>java.lang.StringBuilder.append(StringBuilder.java:119)  \njava.lang.StringBuilder.(StringBuilder.java:93)\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","microsoft-graph-sdks","microsoft-graph-teams","microsoft-graph-calendar"],"answers":[{"tags":[],"owner":{"account_id":3104530,"reputation":392,"user_id":2627745,"display_name":"Samir Seetal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686660431,"creation_date":1686660431,"answer_id":76465122,"question_id":74688642,"body_markdown":"It looks like the body of the original event is appended with text relating to the Teams Meeting. When you set the body in the updated event, you are overwriting it. Refer to\r\n\r\nhttps://stackoverflow.com/questions/65202246/updating-event-via-ms-graph-api-removing-join-button-in-the-event\r\n\r\nYou need to get the existing event and the update only part of the body. Something like \r\n\r\n    Event existingEvent = graphClient.users(senderEmail).events(eventId).buildRequest().get();\r\n\r\n    Event event = new Event();\r\n    ItemBody body1 = new ItemBody();\r\n        \r\n    body1.contentType = BodyType.HTML;\r\n    String existingContent = existingEvent.body.content;\r\n    int startBody = existingContent.indexOf(&quot;=\\&quot;PlainText\\&quot;&gt;&quot;);\r\n    int endBody = existingContent.indexOf(&quot;.....&quot;);\r\n    String replaced = existingContent.substring(0, startBody + 13) + \r\n    templateBody.replace(&quot;\\n&quot;, &quot;&lt;br/&gt;&quot;) + existingContent.substring(endBody);\r\n    body1.content = replaced;\r\n    event.body = body1;","title":"Microsoft Graph API - Event patching is removing online meeting from the Event","body":"<p>It looks like the body of the original event is appended with text relating to the Teams Meeting. When you set the body in the updated event, you are overwriting it. Refer to</p>\n<p><a href=\"https://stackoverflow.com/questions/65202246/updating-event-via-ms-graph-api-removing-join-button-in-the-event\">Updating event via MS Graph API removing Join Button in the event</a></p>\n<p>You need to get the existing event and the update only part of the body. Something like</p>\n<pre><code>Event existingEvent = graphClient.users(senderEmail).events(eventId).buildRequest().get();\n\nEvent event = new Event();\nItemBody body1 = new ItemBody();\n    \nbody1.contentType = BodyType.HTML;\nString existingContent = existingEvent.body.content;\nint startBody = existingContent.indexOf(&quot;=\\&quot;PlainText\\&quot;&gt;&quot;);\nint endBody = existingContent.indexOf(&quot;.....&quot;);\nString replaced = existingContent.substring(0, startBody + 13) + \ntemplateBody.replace(&quot;\\n&quot;, &quot;&lt;br/&gt;&quot;) + existingContent.substring(endBody);\nbody1.content = replaced;\nevent.body = body1;\n</code></pre>\n"}],"owner":{"account_id":17940452,"reputation":383,"user_id":16946039,"display_name":"Hugo Vinhal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686660431,"creation_date":1670245393,"question_id":74688642,"body_markdown":"I have been searching for a solution for this problem and it seems like any answer is helping me.\r\n\r\nI am trying to do a patch on an Event using the graph client, like this: \r\n\r\n    graphClient.me().events(eventId).buildRequest().patchAsync(graphEvent);\r\n\r\nAs it says in the documentation, if I need to update the body of the Event, I need to get the old one and only make changes to its content, like I am doing here:\r\n\r\n    oldEvent.body.content = &quot;new content&quot;;\r\n\r\nIn the documentation is also mentioned that I need to preserve the meeting blob for the online meeting, but what does this mean? Am I doing anything wrong here? I am literally just setting the content of the body and the meeting url just gets lost because of it.\r\n\r\nThere are several threads online that also say that I should not update the body for this to work, and despite that &quot;solution&quot; being valid, it is not a solution, it is just a workaround because in my case I really need to be able to update the body content of the event without losing the link!\r\n\r\nI am doing this in Java and using the 5.18.0 microsoft-graph dependency version if that helps.\r\n\r\n","title":"Microsoft Graph API - Event patching is removing online meeting from the Event","body":"<p>I have been searching for a solution for this problem and it seems like any answer is helping me.</p>\n<p>I am trying to do a patch on an Event using the graph client, like this:</p>\n<pre><code>graphClient.me().events(eventId).buildRequest().patchAsync(graphEvent);\n</code></pre>\n<p>As it says in the documentation, if I need to update the body of the Event, I need to get the old one and only make changes to its content, like I am doing here:</p>\n<pre><code>oldEvent.body.content = &quot;new content&quot;;\n</code></pre>\n<p>In the documentation is also mentioned that I need to preserve the meeting blob for the online meeting, but what does this mean? Am I doing anything wrong here? I am literally just setting the content of the body and the meeting url just gets lost because of it.</p>\n<p>There are several threads online that also say that I should not update the body for this to work, and despite that &quot;solution&quot; being valid, it is not a solution, it is just a workaround because in my case I really need to be able to update the body content of the event without losing the link!</p>\n<p>I am doing this in Java and using the 5.18.0 microsoft-graph dependency version if that helps.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"score":0,"creation_date":1681435269,"post_id":76010043,"comment_id":134059744,"body_markdown":"Question on your first answer. You have two catch blocks where the first catch block is just catching MyException and then throwing it again. Why is that good practice? Since my original answer will have both MyException and Exception thrown so there is no loss of information.","body":"Question on your first answer. You have two catch blocks where the first catch block is just catching MyException and then throwing it again. Why is that good practice? Since my original answer will have both MyException and Exception thrown so there is no loss of information."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1681439127,"post_id":76010043,"comment_id":134060078,"body_markdown":"Because it ensure the _second_ catch block will not catch `MyException`. Yo uwant `MyException` to fall through, and anything else to be wrapped. _if_ you dealt with all other points.","body":"Because it ensure the <i>second</i> catch block will not catch <code>MyException</code>. Yo uwant <code>MyException</code> to fall through, and anything else to be wrapped. <i>if</i> you dealt with all other points."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681422129,"creation_date":1681422129,"answer_id":76010043,"question_id":76009579,"body_markdown":"The specific code snippet is bad practice. The _general principle_ can be acceptable, but there&#39;s a nicer style way to do it.\r\n\r\nLet&#39;s take it step by step\r\n\r\n## The snippet is silly\r\n\r\nHere you will actually catch the very exception you throw and then just throw a new one. In other words, `&quot;Error occurred&quot;` __cannot possibly__ be the message of the MyEx that this method throws, and the stack trace will be pointing at the second `throw new` line. The first `throw new` line is pretty much just a really weird, unreadable way to say &#39;go to catch block and ignore this exception&#39;.\r\n\r\nWe can trivially fix this:\r\n\r\n```\r\ntry {\r\n  throw new MyException(&quot;msg1&quot;);\r\n} catch (MyException e) {\r\n  throw e;\r\n} catch (Exception e) {\r\n  throw new MyException(&quot;msg2&quot;, e);\r\n}\r\n```\r\n\r\n## error 1: Failure to preserve causal chain\r\n\r\nWhen throwing an exception due to _another_ exception, you should add the original exception to the causal chain. The original exception (the one that caused your catch block to trigger) presumably  contains important information. See the above snippet, where you pass along the caught exception as second argument. Yes, you will have to update your own exception, you can just:\r\n\r\n```\r\nclass MyEx extends Exception {\r\n  public MyEx(String msg) {\r\n    super(msg);\r\n  }\r\n\r\n  public MyEx(String msg, Throwable cause) {\r\n    super(msg, cause);\r\n  }\r\n}\r\n```\r\n\r\nIf you are working with a code base that simply doesn&#39;t have this and you cannot change it, you can call `.initCause()` which is designed _solely_ to be used in cases where you are working with legacy code that you cannot change.\r\n\r\n## error 2: The message is silly\r\n\r\nThis may simply have been code written for the question and not your real code, but exception type names need to be about what the problem is, and the message needs to contain that information that is useful __on top of__ the type. Don&#39;t repeat things. For example, this is the perfect exception behaviour:\r\n\r\n\r\n```\r\n// Some hypothetical file system driver\r\nif (!someFileSystemCheckForFileExistence(filePathToLookfor)) {\r\n  throw new NoSuchFileException(filePathToLookFor);\r\n```\r\n\r\nNote that:\r\n\r\n* The exception&#39;s type name itself accurately describes the issue, namely: A file was requested that does not exist.\r\n* The message solely adds pertinent information and doesn&#39;t repeat itself. It&#39;s just the file name.\r\n\r\nExamples of bad takes:\r\n\r\n* `throw new RuntimeException(&quot;Something went wrong&quot;);`\r\n\r\nNeither the message nor the type is useful here. Very bad.\r\n\r\n* `throw new RuntimeException(&quot;File not found&quot;);`\r\n\r\nThe type isn&#39;t useful so it&#39;s hard to programatically react to this (if ever you are disassembling the message with `substring` or regexes, you know you messed this up). Also, the message could be more useful by indicating _which_ file wasn&#39;t found.\r\n\r\n* `throw new NoSuchFileException(&quot;Not found: &quot; + filePath);`\r\n\r\nDecent but could be better - `Not found: ` is superfluous; the exception type already covers the idea that something wasn&#39;t found, there&#39;s no need for the message to _also_ say it.\r\n\r\n* `throw new NoSuchFileException(&quot;Error: &quot; + filePath + &quot;!&quot;);`\r\n\r\nDo not end exception messages in punctuation, _especially_ exclamation mark. Yes, yes, it&#39;s an error, errors bad. We already know this, it&#39;s annoying for everybody (readers and those writing the code that throws them) to add an exclamation mark. It&#39;s an exception that made it to human eyeballs. Involved parties understand this is a bad thing, there is no need for hysterics with the exclamation marks.\r\n\r\n## error 3: Catching generic exception\r\n\r\ncatching `Throwable`, `Exception`, or `RuntimeException` _can be_ fine, but you need to know what you are doing. It&#39;s fine _only_ in cases where you are a &#39;launch point runner&#39;.\r\n\r\nLaunch Points are places where code more or less starts. You&#39;re surely already familiar with one various obvious LP, which is `public static void main(String[] args) {}`. That method is a launch point. But it&#39;s not the only one - if you&#39;re writing code in a web framework, you tend not to write your own main. Even if you do, what you really write is a collection of tiny little apps - one app per URL to be handled. Each &#39;URL handler&#39; is itself a launch point.\r\n\r\nLaunch Points should usually be declared to `throws Exception` (that&#39;s what your `main` should look like!), and, whether it does or not, the code that _calls_ a launch point, should catch _ALL_ exceptions. Often you do not, yourself, write such code: The OpenJDK team wrote the code that calls `main`, you don&#39;t. Generally you have some web framework like dropwizard or spring you&#39;re using, and the authors of that framework wrote the code that calls your URL endpoint handlers. But _that_ code either uses `catch (Exception e)` (and that would be correct), or they don&#39;t and their framework is kinda crappy as a result.\r\n\r\nThe reason you want that is that any exception anywhere generally means execution should bubble up and abort every method call in the chain until we get to the launch point runner itself, and it generally can add a ton of information. Imagine a URL endpoint: If an error happens that you cannot recover from (say, the DB is down and someone tries to log in. The user account info is in the db we cannot get to, so what possible point is there to continuing? The one and only option left to us, is to tell the user some error occurred, to log the issue, and to trigger any &#39;call the sysops team for help&#39; routines that are available if required (i.e. if they don&#39;t trigger off of watchdogs or log messages).\r\n\r\n__all__ of that is generic, in the sense that you have boatloads of endpoints that are all in the same boat: if DB down, there&#39;s nothing left to do except those 3 things.\r\n\r\nYou really, _really_ do not want to repeat those 3 complex steps in all 384 URL endpoint handlers your webapp has. The best strategy by far is to ensure your endpoint handlers can easily trigger this &#39;okay, show error to user, log it properly, trigger sysop calls if needed&#39; code and to never be enticed into writing simpler, worse handling code.\r\n\r\nThe best way? Simply. Leave. Exceptions. Be. Let them bubble up to the place that knows how to handle them generically. For example, a URL launch point runner will catch all exceptions, and log them _with_ pertinent info from the request, such as headers or the IP (which will help if the exception is caused by some malicious actor probing for weaknesses in your site!). The standard exception handler doesn&#39;t know how to add IP info, so if you ever write, anywhere:\r\n\r\n```\r\ntry {\r\n  stuff();\r\n} catch (Exception e) {\r\n  e.printStackTrace();\r\n}\r\n```\r\n\r\nstop what you are doing - that&#39;s always bad code. That code will fail to trigger the baked in Launch Point Runner mechanism, and will in fact continue which will likely result in more exceptions. Assuming all exception handling is written as above, then 1 error causes 50 stack traces, most of which are completely useless, and none of the failsafes are triggered. Horrible.\r\n\r\nSolution: The &#39;fire and forget&#39; catch block is best written as:\r\n\r\n```\r\ntry {\r\n  code();\r\n} catch (Exception e) {\r\n  throw new RuntimeException(&quot;unhandled&quot;, e);\r\n}\r\n```\r\n\r\nWhich will ensure the exception can bubble up, aborts code execution, ensures the LPR can deal with it and add what it needs to add, is easy to write. Yes, open your editor, update its templates.\r\n\r\n__other__ than &quot;I am writing a Launch Point Runner&quot; it is unlikely that `catch (Exception e)` is proper code style. Wrapping exceptions often is correct, but catch the specific issues, not &#39;all exceptions&#39;.\r\n","title":"Throwing custom exception inside try, while throwing same custom exception in catch","body":"<p>The specific code snippet is bad practice. The <em>general principle</em> can be acceptable, but there's a nicer style way to do it.</p>\n<p>Let's take it step by step</p>\n<h2>The snippet is silly</h2>\n<p>Here you will actually catch the very exception you throw and then just throw a new one. In other words, <code>&quot;Error occurred&quot;</code> <strong>cannot possibly</strong> be the message of the MyEx that this method throws, and the stack trace will be pointing at the second <code>throw new</code> line. The first <code>throw new</code> line is pretty much just a really weird, unreadable way to say 'go to catch block and ignore this exception'.</p>\n<p>We can trivially fix this:</p>\n<pre><code>try {\n  throw new MyException(&quot;msg1&quot;);\n} catch (MyException e) {\n  throw e;\n} catch (Exception e) {\n  throw new MyException(&quot;msg2&quot;, e);\n}\n</code></pre>\n<h2>error 1: Failure to preserve causal chain</h2>\n<p>When throwing an exception due to <em>another</em> exception, you should add the original exception to the causal chain. The original exception (the one that caused your catch block to trigger) presumably  contains important information. See the above snippet, where you pass along the caught exception as second argument. Yes, you will have to update your own exception, you can just:</p>\n<pre><code>class MyEx extends Exception {\n  public MyEx(String msg) {\n    super(msg);\n  }\n\n  public MyEx(String msg, Throwable cause) {\n    super(msg, cause);\n  }\n}\n</code></pre>\n<p>If you are working with a code base that simply doesn't have this and you cannot change it, you can call <code>.initCause()</code> which is designed <em>solely</em> to be used in cases where you are working with legacy code that you cannot change.</p>\n<h2>error 2: The message is silly</h2>\n<p>This may simply have been code written for the question and not your real code, but exception type names need to be about what the problem is, and the message needs to contain that information that is useful <strong>on top of</strong> the type. Don't repeat things. For example, this is the perfect exception behaviour:</p>\n<pre><code>// Some hypothetical file system driver\nif (!someFileSystemCheckForFileExistence(filePathToLookfor)) {\n  throw new NoSuchFileException(filePathToLookFor);\n</code></pre>\n<p>Note that:</p>\n<ul>\n<li>The exception's type name itself accurately describes the issue, namely: A file was requested that does not exist.</li>\n<li>The message solely adds pertinent information and doesn't repeat itself. It's just the file name.</li>\n</ul>\n<p>Examples of bad takes:</p>\n<ul>\n<li><code>throw new RuntimeException(&quot;Something went wrong&quot;);</code></li>\n</ul>\n<p>Neither the message nor the type is useful here. Very bad.</p>\n<ul>\n<li><code>throw new RuntimeException(&quot;File not found&quot;);</code></li>\n</ul>\n<p>The type isn't useful so it's hard to programatically react to this (if ever you are disassembling the message with <code>substring</code> or regexes, you know you messed this up). Also, the message could be more useful by indicating <em>which</em> file wasn't found.</p>\n<ul>\n<li><code>throw new NoSuchFileException(&quot;Not found: &quot; + filePath);</code></li>\n</ul>\n<p>Decent but could be better - <code>Not found: </code> is superfluous; the exception type already covers the idea that something wasn't found, there's no need for the message to <em>also</em> say it.</p>\n<ul>\n<li><code>throw new NoSuchFileException(&quot;Error: &quot; + filePath + &quot;!&quot;);</code></li>\n</ul>\n<p>Do not end exception messages in punctuation, <em>especially</em> exclamation mark. Yes, yes, it's an error, errors bad. We already know this, it's annoying for everybody (readers and those writing the code that throws them) to add an exclamation mark. It's an exception that made it to human eyeballs. Involved parties understand this is a bad thing, there is no need for hysterics with the exclamation marks.</p>\n<h2>error 3: Catching generic exception</h2>\n<p>catching <code>Throwable</code>, <code>Exception</code>, or <code>RuntimeException</code> <em>can be</em> fine, but you need to know what you are doing. It's fine <em>only</em> in cases where you are a 'launch point runner'.</p>\n<p>Launch Points are places where code more or less starts. You're surely already familiar with one various obvious LP, which is <code>public static void main(String[] args) {}</code>. That method is a launch point. But it's not the only one - if you're writing code in a web framework, you tend not to write your own main. Even if you do, what you really write is a collection of tiny little apps - one app per URL to be handled. Each 'URL handler' is itself a launch point.</p>\n<p>Launch Points should usually be declared to <code>throws Exception</code> (that's what your <code>main</code> should look like!), and, whether it does or not, the code that <em>calls</em> a launch point, should catch <em>ALL</em> exceptions. Often you do not, yourself, write such code: The OpenJDK team wrote the code that calls <code>main</code>, you don't. Generally you have some web framework like dropwizard or spring you're using, and the authors of that framework wrote the code that calls your URL endpoint handlers. But <em>that</em> code either uses <code>catch (Exception e)</code> (and that would be correct), or they don't and their framework is kinda crappy as a result.</p>\n<p>The reason you want that is that any exception anywhere generally means execution should bubble up and abort every method call in the chain until we get to the launch point runner itself, and it generally can add a ton of information. Imagine a URL endpoint: If an error happens that you cannot recover from (say, the DB is down and someone tries to log in. The user account info is in the db we cannot get to, so what possible point is there to continuing? The one and only option left to us, is to tell the user some error occurred, to log the issue, and to trigger any 'call the sysops team for help' routines that are available if required (i.e. if they don't trigger off of watchdogs or log messages).</p>\n<p><strong>all</strong> of that is generic, in the sense that you have boatloads of endpoints that are all in the same boat: if DB down, there's nothing left to do except those 3 things.</p>\n<p>You really, <em>really</em> do not want to repeat those 3 complex steps in all 384 URL endpoint handlers your webapp has. The best strategy by far is to ensure your endpoint handlers can easily trigger this 'okay, show error to user, log it properly, trigger sysop calls if needed' code and to never be enticed into writing simpler, worse handling code.</p>\n<p>The best way? Simply. Leave. Exceptions. Be. Let them bubble up to the place that knows how to handle them generically. For example, a URL launch point runner will catch all exceptions, and log them <em>with</em> pertinent info from the request, such as headers or the IP (which will help if the exception is caused by some malicious actor probing for weaknesses in your site!). The standard exception handler doesn't know how to add IP info, so if you ever write, anywhere:</p>\n<pre><code>try {\n  stuff();\n} catch (Exception e) {\n  e.printStackTrace();\n}\n</code></pre>\n<p>stop what you are doing - that's always bad code. That code will fail to trigger the baked in Launch Point Runner mechanism, and will in fact continue which will likely result in more exceptions. Assuming all exception handling is written as above, then 1 error causes 50 stack traces, most of which are completely useless, and none of the failsafes are triggered. Horrible.</p>\n<p>Solution: The 'fire and forget' catch block is best written as:</p>\n<pre><code>try {\n  code();\n} catch (Exception e) {\n  throw new RuntimeException(&quot;unhandled&quot;, e);\n}\n</code></pre>\n<p>Which will ensure the exception can bubble up, aborts code execution, ensures the LPR can deal with it and add what it needs to add, is easy to write. Yes, open your editor, update its templates.</p>\n<p><strong>other</strong> than &quot;I am writing a Launch Point Runner&quot; it is unlikely that <code>catch (Exception e)</code> is proper code style. Wrapping exceptions often is correct, but catch the specific issues, not 'all exceptions'.</p>\n"},{"tags":[],"owner":{"account_id":22809059,"reputation":1,"user_id":18040297,"display_name":"Gabriel Mathiuce"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686659965,"creation_date":1681474252,"answer_id":76014965,"question_id":76009579,"body_markdown":"Welcome to SO.\r\nI dont think this can be considered as a bad pratice, but why would you do this?\r\nYou use try/catch blocks to handle exceptions, the purpose of a &quot;try&quot; its to run a block of code without errors.\r\nInstead of this, you could declare multiple catches, e.g:\r\n\r\n    public void method() {\r\n    try {\r\n       //your logic here\r\n    } \r\n    catch(Exception e) {\r\n       throw new MyException(&quot;My first error message&quot;);\r\n    }\r\n    catch(Exception e) {\r\n       throw new MyException(&quot;My second error message&quot;);\r\n    }\r\n}\r\n\r\nOr you could use a multicatch, e.g.:\r\n\r\n    try {\r\n       //your logic here\r\n    } \r\n    catch(Exception1 | Exception2  e) {\r\n       throw new MyException(&quot;The same message for any of the exceptions above&quot;);\r\n    }","title":"Throwing custom exception inside try, while throwing same custom exception in catch","body":"<p>Welcome to SO.\nI dont think this can be considered as a bad pratice, but why would you do this?\nYou use try/catch blocks to handle exceptions, the purpose of a &quot;try&quot; its to run a block of code without errors.\nInstead of this, you could declare multiple catches, e.g:</p>\n<pre><code>public void method() {\ntry {\n   //your logic here\n} \ncatch(Exception e) {\n   throw new MyException(&quot;My first error message&quot;);\n}\ncatch(Exception e) {\n   throw new MyException(&quot;My second error message&quot;);\n}\n</code></pre>\n<p>}</p>\n<p>Or you could use a multicatch, e.g.:</p>\n<pre><code>try {\n   //your logic here\n} \ncatch(Exception1 | Exception2  e) {\n   throw new MyException(&quot;The same message for any of the exceptions above&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76010043,"answer_count":2,"score":0,"last_activity_date":1686659965,"creation_date":1681417659,"question_id":76009579,"body_markdown":"Is this acceptable or considered bad practice?\r\n\r\n    public void method() {\r\n        try {\r\n           throw new MyException(&quot;Error occurred&quot;);\r\n        } catch(Exception e) {\r\n           throw new MyException(&quot;Something went wrong&quot;);\r\n        }\r\n    }\r\n\r\nI am throwing my custom exception but catching generic exception.","title":"Throwing custom exception inside try, while throwing same custom exception in catch","body":"<p>Is this acceptable or considered bad practice?</p>\n<pre><code>public void method() {\n    try {\n       throw new MyException(&quot;Error occurred&quot;);\n    } catch(Exception e) {\n       throw new MyException(&quot;Something went wrong&quot;);\n    }\n}\n</code></pre>\n<p>I am throwing my custom exception but catching generic exception.</p>\n"},{"tags":["java","trino","apache-ranger"],"answers":[{"tags":[],"owner":{"account_id":11868094,"reputation":21,"user_id":8685077,"display_name":"Marlon Eduardo Klobukoski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686659643,"creation_date":1686659643,"answer_id":76465003,"question_id":76023754,"body_markdown":"Trino plugin in Ranger is available only for JDK 11. So, you must build Ranger project passing the profile `ranger-jdk11` to `mvn` params.\r\nYou can try this:\r\n```\r\nmvn clean compile package \\\r\n-P ranger-jdk11,-linux \\\r\neclipse:eclipse\r\n```\r\nYou must have JDK 11 installed and configured on your machine to this works, inclusive the `JAVA_HOME` pointing to `jdk11`.\r\nThis will create the necessary `jars` into `ranger-2.3.0-admin/ews/webapp/WEB-INF/classes/ranger-plugins/trino`, then the Ranger Admin will not through this error message.\r\n```\r\nll /usr/lib/ranger/ranger-2.3.0-admin/ews/webapp/WEB-INF/classes/ranger-plugins/trino\r\ntotal 7424\r\ndrwxr-xr-x  2 root   root      4096 Jun 13 09:20 ./\r\ndrwxr-xr-x 22 ranger ranger    4096 Jun 13 09:20 ../\r\n-rw-r--r--  1 root   root     53162 Jun 13 09:20 ranger-trino-plugin-2.3.0.jar\r\n-rw-r--r--  1 root   root   6735843 Jun 13 09:20 trino-jdbc-377.jar\r\n-rw-r--r--  1 root   root    801586 Jun 13 09:20 trino-spi-377.jar\r\n```","title":"Ranger-trino connect: trino failed to find service class org.apache.ranger.services.trino.RangerServiceTrino","body":"<p>Trino plugin in Ranger is available only for JDK 11. So, you must build Ranger project passing the profile <code>ranger-jdk11</code> to <code>mvn</code> params.\nYou can try this:</p>\n<pre><code>mvn clean compile package \\\n-P ranger-jdk11,-linux \\\neclipse:eclipse\n</code></pre>\n<p>You must have JDK 11 installed and configured on your machine to this works, inclusive the <code>JAVA_HOME</code> pointing to <code>jdk11</code>.\nThis will create the necessary <code>jars</code> into <code>ranger-2.3.0-admin/ews/webapp/WEB-INF/classes/ranger-plugins/trino</code>, then the Ranger Admin will not through this error message.</p>\n<pre><code>ll /usr/lib/ranger/ranger-2.3.0-admin/ews/webapp/WEB-INF/classes/ranger-plugins/trino\ntotal 7424\ndrwxr-xr-x  2 root   root      4096 Jun 13 09:20 ./\ndrwxr-xr-x 22 ranger ranger    4096 Jun 13 09:20 ../\n-rw-r--r--  1 root   root     53162 Jun 13 09:20 ranger-trino-plugin-2.3.0.jar\n-rw-r--r--  1 root   root   6735843 Jun 13 09:20 trino-jdbc-377.jar\n-rw-r--r--  1 root   root    801586 Jun 13 09:20 trino-spi-377.jar\n</code></pre>\n"}],"owner":{"account_id":4718922,"reputation":121,"user_id":3817378,"accept_rate":30,"display_name":"user3817378"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686659643,"creation_date":1681580146,"question_id":76023754,"body_markdown":"I am trying to create a trino service in apache ranger in local using docker. I tried below steps:\r\n1. Build the ranger code \r\n2. `./ranger_in_docker up` \r\nThe ranger UI is coming up and ranger server starts without any issue, and I am able to login to it.\r\n\r\nSimilarly I build the trino in local and started the server , which also starts on default port : 8080 in local.\r\n\r\nNow when i try to create trino service in ranger , its giving me this error: \r\n\r\n&gt; trino failed to find service class\r\n&gt; org.apache.ranger.services.trino.RangerServiceTrino. Resource lookup\r\n&gt; will not be available. Please make sure plugin jar is in the correct\r\n&gt; place\r\n\r\n I tried checking the ranger and trino logs , but there is no entry in both about this request. \r\n\r\nAlso i tried putting the trino ranger-3.0.0-SNAPSHOT-trino-plugin jar to trino&#39;s plugin folder and restarted the whole ranger and trino but it still gives the same error. \r\n\r\nCan someone please help me about this error.\r\n\r\nThanks in advance","title":"Ranger-trino connect: trino failed to find service class org.apache.ranger.services.trino.RangerServiceTrino","body":"<p>I am trying to create a trino service in apache ranger in local using docker. I tried below steps:</p>\n<ol>\n<li>Build the ranger code</li>\n<li><code>./ranger_in_docker up</code>\nThe ranger UI is coming up and ranger server starts without any issue, and I am able to login to it.</li>\n</ol>\n<p>Similarly I build the trino in local and started the server , which also starts on default port : 8080 in local.</p>\n<p>Now when i try to create trino service in ranger , its giving me this error:</p>\n<blockquote>\n<p>trino failed to find service class\norg.apache.ranger.services.trino.RangerServiceTrino. Resource lookup\nwill not be available. Please make sure plugin jar is in the correct\nplace</p>\n</blockquote>\n<p>I tried checking the ranger and trino logs , but there is no entry in both about this request.</p>\n<p>Also i tried putting the trino ranger-3.0.0-SNAPSHOT-trino-plugin jar to trino's plugin folder and restarted the whole ranger and trino but it still gives the same error.</p>\n<p>Can someone please help me about this error.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","selenium-webdriver","iframe"],"comments":[{"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"score":0,"creation_date":1686663768,"post_id":76465002,"comment_id":134827889,"body_markdown":"Before worrying about anything else fix your problem with clicking `id=&quot;ebx_generatedId_100&quot;`. Run the test and debug your code, put a breakpoint just before where you are trying to click the span, and see what is going wrong.","body":"Before worrying about anything else fix your problem with clicking <code>id=&quot;ebx_generatedId_100&quot;</code>. Run the test and debug your code, put a breakpoint just before where you are trying to click the span, and see what is going wrong."},{"owner":{"account_id":13688997,"reputation":658,"user_id":9877340,"display_name":"kenneth"},"score":1,"creation_date":1686666715,"post_id":76465002,"comment_id":134828593,"body_markdown":"Can you add the HTML element of the iFrame you are switching to?","body":"Can you add the HTML element of the iFrame you are switching to?"}],"owner":{"account_id":10568126,"reputation":33,"user_id":7976147,"display_name":"Programming_guy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686659635,"creation_date":1686659635,"question_id":76465002,"body_markdown":"Im having trouble while trying to click on a particular tab which is inside a &quot;sub-iframe&quot;.\r\nI guess that problem is related to that.\r\n\r\nMainly, i clicked on a button from an iframe and it redirects me to a second form:\r\n\r\n```\r\n    driver.switchTo().defaultContent();\r\n    WebDriverWait wait994234 = new WebDriverWait(driver, Duration.ofSeconds(100));\r\n    WebElement iframe2342 = wait994234.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;ebx-legacy-component&quot;)));\r\n    driver.switchTo().frame(iframe2342);\r\n    WebDriverWait wait9942332434 = new WebDriverWait(driver, Duration.ofSeconds(100));\r\n    WebElement iframe2342432 = wait9942332434.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;ebx_SubSessioniFrame&quot;)));\r\n    driver.switchTo().frame(iframe2342432);\r\n```\r\n\r\ni used `driver.switchTo().defaultContent();` right after when i click on the first buttom from iframe#1 (the parent) and again, i called the parent iframe and the second iframe (the child iframe)\r\n\r\nThe problem is that i wont be able to click on the tab because it always says:\r\nException in thread &quot;main&quot; org.openqa.selenium.TimeoutException: Expected condition failed: waiting for visibility of element located by By.id: ebx_generatedId_100 (tried for 20 second(s) with 500 milliseconds interval)\r\n\r\n```\r\n    WebDriverWait wait11020 = new WebDriverWait(driver, Duration.ofSeconds(20));\r\n    WebElement accionesButton2 = wait11020.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;ebx_generatedId_100&quot;)));\r\n    JavascriptExecutor jsExecutor23 = (JavascriptExecutor) driver;\r\n    jsExecutor23.executeScript(&quot;arguments[0].click();&quot;, accionesButton2);\r\n```\r\n\r\nThe button has this:\r\n\r\n`&lt;em&gt;&lt;span id=&quot;ebx_generatedId_100&quot;&gt;Categories&lt;/span&gt;&lt;/em&gt;`\r\n\r\nI tried SO MANY TIMES","title":"Element not found in a sub-iframe - Exception in thread &quot;main&quot; org.openqa.selenium.TimeoutException","body":"<p>Im having trouble while trying to click on a particular tab which is inside a &quot;sub-iframe&quot;.\nI guess that problem is related to that.</p>\n<p>Mainly, i clicked on a button from an iframe and it redirects me to a second form:</p>\n<pre><code>    driver.switchTo().defaultContent();\n    WebDriverWait wait994234 = new WebDriverWait(driver, Duration.ofSeconds(100));\n    WebElement iframe2342 = wait994234.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;ebx-legacy-component&quot;)));\n    driver.switchTo().frame(iframe2342);\n    WebDriverWait wait9942332434 = new WebDriverWait(driver, Duration.ofSeconds(100));\n    WebElement iframe2342432 = wait9942332434.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;ebx_SubSessioniFrame&quot;)));\n    driver.switchTo().frame(iframe2342432);\n</code></pre>\n<p>i used <code>driver.switchTo().defaultContent();</code> right after when i click on the first buttom from iframe#1 (the parent) and again, i called the parent iframe and the second iframe (the child iframe)</p>\n<p>The problem is that i wont be able to click on the tab because it always says:\nException in thread &quot;main&quot; org.openqa.selenium.TimeoutException: Expected condition failed: waiting for visibility of element located by By.id: ebx_generatedId_100 (tried for 20 second(s) with 500 milliseconds interval)</p>\n<pre><code>    WebDriverWait wait11020 = new WebDriverWait(driver, Duration.ofSeconds(20));\n    WebElement accionesButton2 = wait11020.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;ebx_generatedId_100&quot;)));\n    JavascriptExecutor jsExecutor23 = (JavascriptExecutor) driver;\n    jsExecutor23.executeScript(&quot;arguments[0].click();&quot;, accionesButton2);\n</code></pre>\n<p>The button has this:</p>\n<p><code>&lt;em&gt;&lt;span id=&quot;ebx_generatedId_100&quot;&gt;Categories&lt;/span&gt;&lt;/em&gt;</code></p>\n<p>I tried SO MANY TIMES</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1686663549,"post_id":76464990,"comment_id":134827839,"body_markdown":"Which Java do you use with which Eclipse? What do you have configured in the preferences _Java &gt; Installed JRE_? Does the _Problems_ view show errors and if yes, what are the error messages?","body":"Which Java do you use with which Eclipse? What do you have configured in the preferences <i>Java &gt; Installed JRE</i>? Does the <i>Problems</i> view show errors and if yes, what are the error messages?"}],"owner":{"account_id":28644476,"reputation":1,"user_id":21932846,"display_name":"CodingPanda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686659538,"creation_date":1686659538,"question_id":76464990,"body_markdown":"&gt; Just got a new laptop- every time I have to manually go to project -&gt; build path -&gt; add libraries to add the JRE System Library. If I don’t then I get an error “The type Java.lang.Object cannot be resolved. It is indirectly referenced from required .class files \r\n\r\nI tried restarting eclipse and following steps from other posts but the problem still remains. It wasn’t like this on my old pc, so is anyone experiencing the same issue or knows how to fix it?","title":"Eclipse: Why is my JRE System Library not appearing when I create a new Java Project?","body":"<blockquote>\n<p>Just got a new laptop- every time I have to manually go to project -&gt; build path -&gt; add libraries to add the JRE System Library. If I don’t then I get an error “The type Java.lang.Object cannot be resolved. It is indirectly referenced from required .class files</p>\n</blockquote>\n<p>I tried restarting eclipse and following steps from other posts but the problem still remains. It wasn’t like this on my old pc, so is anyone experiencing the same issue or knows how to fix it?</p>\n"},{"tags":["java","discord","discord-jda"],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1618650039,"creation_date":1618650039,"answer_id":67136412,"question_id":67133700,"body_markdown":"The documentation for [JDABuilder#build](https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/JDABuilder.html#build()) states:\r\n\r\n&gt; The login process runs in a different thread, so while this will return immediately, JDA has not finished loading, thus many JDA methods have the chance to return incorrect information. For example **JDA.getGuilds() might return an empty list** or JDA.getUserById(long) might return null for arbitrary user IDs. \r\n&gt; \r\n&gt; __If you wish to be sure that the JDA information is correct, please use JDA.awaitReady() or register an EventListener to listen for the ReadyEvent.__\r\n\r\nSo all you gotta do is call `awaitReady()` to block the main thread until JDA is ready. Only then can you reliably access the JDA cache.","title":"The JDA#getGuilds() method is returning an empty list","body":"<p>The documentation for <a href=\"https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/JDABuilder.html#build()\" rel=\"nofollow noreferrer\">JDABuilder#build</a> states:</p>\n<blockquote>\n<p>The login process runs in a different thread, so while this will return immediately, JDA has not finished loading, thus many JDA methods have the chance to return incorrect information. For example <strong>JDA.getGuilds() might return an empty list</strong> or JDA.getUserById(long) might return null for arbitrary user IDs.</p>\n<p><strong>If you wish to be sure that the JDA information is correct, please use JDA.awaitReady() or register an EventListener to listen for the ReadyEvent.</strong></p>\n</blockquote>\n<p>So all you gotta do is call <code>awaitReady()</code> to block the main thread until JDA is ready. Only then can you reliably access the JDA cache.</p>\n"},{"tags":[],"owner":{"account_id":3520186,"reputation":447,"user_id":2942694,"display_name":"A. Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686659211,"creation_date":1686659211,"answer_id":76464937,"question_id":67133700,"body_markdown":"While the accepted answer might work, I think the proper way to do this is to add an onReady override in an event listener.\r\n\r\nCreate an event listener class Example.java\r\n\r\n    public class Example extends ListenerAdapter {\r\n     @Override\r\n     public void onReady(ReadyEvent event) {\r\n      for(Guild g : jda.getGuilds()) {\r\n            System.out.println(g.getName());\r\n      }\r\n     }\r\n    }\r\n\r\nAfter you&#39;ve created your listener class, added it to your jdabuilder\r\n\r\n    JDABuilder jdab = JDABuilder.create(&quot;token&quot;,GatewayIntent.DIRECT_MESSAGES)\r\n                                .addEventListener(new Example());\r\n\r\nYou&#39;ll want to keep your main class clean of any business logic, most of your work will be done in event listeners, so getting into the habit of that will help later.","title":"The JDA#getGuilds() method is returning an empty list","body":"<p>While the accepted answer might work, I think the proper way to do this is to add an onReady override in an event listener.</p>\n<p>Create an event listener class Example.java</p>\n<pre><code>public class Example extends ListenerAdapter {\n @Override\n public void onReady(ReadyEvent event) {\n  for(Guild g : jda.getGuilds()) {\n        System.out.println(g.getName());\n  }\n }\n}\n</code></pre>\n<p>After you've created your listener class, added it to your jdabuilder</p>\n<pre><code>JDABuilder jdab = JDABuilder.create(&quot;token&quot;,GatewayIntent.DIRECT_MESSAGES)\n                            .addEventListener(new Example());\n</code></pre>\n<p>You'll want to keep your main class clean of any business logic, most of your work will be done in event listeners, so getting into the habit of that will help later.</p>\n"}],"owner":{"account_id":17973766,"reputation":11,"user_id":13061879,"display_name":"Okaam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67136412,"answer_count":2,"score":1,"last_activity_date":1686659211,"creation_date":1618620443,"question_id":67133700,"body_markdown":"So I am experiencing things with the discord JDA api. I tried to get my bot&#39;s servers but it doesn&#39;t work at all.\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        JDABuilder jdab = JDABuilder.create(&quot;token&quot;,GatewayIntent.DIRECT_MESSAGES);\r\n        JDA jda = null;\r\n        try { jda = jdab.build();\r\n        } catch (LoginException e) { e.printStackTrace(); }\r\n        assert jda != null;\r\n        System.out.println(jda.getGuilds().size());\r\n        for(Guild g : jda.getGuilds()) {\r\n            System.out.println(g.getName());\r\n        }\r\n   }\r\n```\r\n\r\nBut in fact it doesn&#39;t show anything but 0, meaning the getGuilds() method&#39;s list is empty.\r\n\r\nAny help would be appreciated, and thanks for any answer","title":"The JDA#getGuilds() method is returning an empty list","body":"<p>So I am experiencing things with the discord JDA api. I tried to get my bot's servers but it doesn't work at all.</p>\n<pre><code>public static void main(String[] args) {\n        JDABuilder jdab = JDABuilder.create(&quot;token&quot;,GatewayIntent.DIRECT_MESSAGES);\n        JDA jda = null;\n        try { jda = jdab.build();\n        } catch (LoginException e) { e.printStackTrace(); }\n        assert jda != null;\n        System.out.println(jda.getGuilds().size());\n        for(Guild g : jda.getGuilds()) {\n            System.out.println(g.getName());\n        }\n   }\n</code></pre>\n<p>But in fact it doesn't show anything but 0, meaning the getGuilds() method's list is empty.</p>\n<p>Any help would be appreciated, and thanks for any answer</p>\n"},{"tags":["java","maven","apache-spark","hbase"],"comments":[{"owner":{"account_id":24418385,"reputation":731,"user_id":18632985,"display_name":"Hoang Minh Quang FX15045"},"score":0,"creation_date":1686646745,"post_id":76461816,"comment_id":134824100,"body_markdown":"Please add your spark-submit command","body":"Please add your spark-submit command"},{"owner":{"account_id":10907252,"reputation":319,"user_id":8017619,"display_name":"pain"},"score":0,"creation_date":1686734649,"post_id":76461816,"comment_id":134838658,"body_markdown":"already resolved. Because lack of some jar while submit job","body":"already resolved. Because lack of some jar while submit job"}],"answers":[{"tags":[],"owner":{"account_id":13342760,"reputation":1334,"user_id":9630486,"display_name":"Egor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686658958,"creation_date":1686658958,"answer_id":76464898,"question_id":76461816,"body_markdown":"If you start your job with `spark-submit`, add `--jars` parameter with the path to your jar. It will be added to the executor&#39;s classpath.","title":"SparkException cause by java.lang.NoClassDefFoundError: org/apache/htrace/core/HTraceConfiguration","body":"<p>If you start your job with <code>spark-submit</code>, add <code>--jars</code> parameter with the path to your jar. It will be added to the executor's classpath.</p>\n"}],"owner":{"account_id":10907252,"reputation":319,"user_id":8017619,"display_name":"pain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686658958,"creation_date":1686632593,"question_id":76461816,"body_markdown":"It seems no class HTraceConfiguration found in jar package. But, I do found this class in jar package.\r\n\r\n```sh\r\njar ftv app.jar  | grep HTraceConfiguration\r\n\r\n2814 Tue Jul 10 17:26:52 CST 2018 org/apache/hadoop/hbase/trace/HBaseHTraceConfiguration.class\r\n1202 Thu Sep 15 10:07:46 CST 2016 org/apache/htrace/core/HTraceConfiguration$MapConf.class\r\n3249 Thu Sep 15 10:07:46 CST 2016 org/apache/htrace/core/HTraceConfiguration.class\r\n```\r\n\r\nBut, why NoClassDefFoundError thrown while exec task?\r\n\r\nHere is exception stack trace\r\n\r\n```\r\naused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 31 in stage 119.0 failed 4 times, most recent failure: Lost task 31.3 in stage 119.0 (TID 1024) (172.20.2.15 executor 2): org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 1 action: java.lang.NoClassDefFoundError: org/apache/htrace/core/HTraceConfiguration: 1 time, servers with issues: null\r\n\tat org.apache.hadoop.hbase.client.BatchErrors.makeException(BatchErrors.java:50)\r\n\tat org.apache.hadoop.hbase.client.AsyncRequestFutureImpl.getErrors(AsyncRequestFutureImpl.java:1195)\r\n\tat org.apache.hadoop.hbase.client.BufferedMutatorImpl.doFlush(BufferedMutatorImpl.java:298)\r\n\tat org.apache.hadoop.hbase.client.BufferedMutatorImpl.flush(BufferedMutatorImpl.java:270)\r\n\tat org.apache.hadoop.hbase.spark.HBaseContext.hbaseForeachPartition(HBaseContext.scala:481)\r\n\tat org.apache.hadoop.hbase.spark.HBaseContext.$anonfun$bulkPut$1$adapted(HBaseContext.scala:221)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$foreachPartition$2(RDD.scala:1011)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$foreachPartition$2$adapted(RDD.scala:1011)\r\n\tat org.apache.spark.SparkContext.$anonfun$runJob$5(SparkContext.scala:2278)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:136)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:548)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1504)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:551)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\nDriver stacktrace:\r\n\tat org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2672)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2608)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2607)\r\n\tat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2607)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1182)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1182)\r\n\tat scala.Option.foreach(Option.scala:407)\r\n\tat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1182)\r\n\tat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:952)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2238)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\r\n\tat org.apache.spark.rdd.RDD.withScope(RDD.scala:406)\r\n\tat org.apache.spark.rdd.RDD.foreachPartition(RDD.scala:1009)\r\n\tat org.apache.hadoop.hbase.spark.HBaseContext.bulkPut(HBaseContext.scala:221)\r\n\tat org.apache.hadoop.hbase.spark.HBaseRDDFunctions$GenericHBaseRDDFunctions.hbaseBulkPut(HBaseRDDFunctions.scala:60)\r\n\tat scala.collection.Iterator.foreach(Iterator.scala:943)\r\n\tat scala.collection.IterableLike.foreach$(IterableLike.scala:73)\r\n\tat scala.collection.AbstractIterable.foreach(Iterable.scala:56)\r\n\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n```\r\n\r\nCould you tell me, what happened?","title":"SparkException cause by java.lang.NoClassDefFoundError: org/apache/htrace/core/HTraceConfiguration","body":"<p>It seems no class HTraceConfiguration found in jar package. But, I do found this class in jar package.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jar ftv app.jar  | grep HTraceConfiguration\n\n2814 Tue Jul 10 17:26:52 CST 2018 org/apache/hadoop/hbase/trace/HBaseHTraceConfiguration.class\n1202 Thu Sep 15 10:07:46 CST 2016 org/apache/htrace/core/HTraceConfiguration$MapConf.class\n3249 Thu Sep 15 10:07:46 CST 2016 org/apache/htrace/core/HTraceConfiguration.class\n</code></pre>\n<p>But, why NoClassDefFoundError thrown while exec task?</p>\n<p>Here is exception stack trace</p>\n<pre><code>aused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 31 in stage 119.0 failed 4 times, most recent failure: Lost task 31.3 in stage 119.0 (TID 1024) (172.20.2.15 executor 2): org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 1 action: java.lang.NoClassDefFoundError: org/apache/htrace/core/HTraceConfiguration: 1 time, servers with issues: null\n    at org.apache.hadoop.hbase.client.BatchErrors.makeException(BatchErrors.java:50)\n    at org.apache.hadoop.hbase.client.AsyncRequestFutureImpl.getErrors(AsyncRequestFutureImpl.java:1195)\n    at org.apache.hadoop.hbase.client.BufferedMutatorImpl.doFlush(BufferedMutatorImpl.java:298)\n    at org.apache.hadoop.hbase.client.BufferedMutatorImpl.flush(BufferedMutatorImpl.java:270)\n    at org.apache.hadoop.hbase.spark.HBaseContext.hbaseForeachPartition(HBaseContext.scala:481)\n    at org.apache.hadoop.hbase.spark.HBaseContext.$anonfun$bulkPut$1$adapted(HBaseContext.scala:221)\n    at org.apache.spark.rdd.RDD.$anonfun$foreachPartition$2(RDD.scala:1011)\n    at org.apache.spark.rdd.RDD.$anonfun$foreachPartition$2$adapted(RDD.scala:1011)\n    at org.apache.spark.SparkContext.$anonfun$runJob$5(SparkContext.scala:2278)\n    at org.apache.spark.scheduler.Task.run(Task.scala:136)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:548)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1504)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:551)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n\nDriver stacktrace:\n    at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2672)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2608)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2607)\n    at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2607)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1182)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1182)\n    at scala.Option.foreach(Option.scala:407)\n    at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1182)\n    at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:952)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2238)\n    at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\n    at org.apache.spark.rdd.RDD.withScope(RDD.scala:406)\n    at org.apache.spark.rdd.RDD.foreachPartition(RDD.scala:1009)\n    at org.apache.hadoop.hbase.spark.HBaseContext.bulkPut(HBaseContext.scala:221)\n    at org.apache.hadoop.hbase.spark.HBaseRDDFunctions$GenericHBaseRDDFunctions.hbaseBulkPut(HBaseRDDFunctions.scala:60)\n    at scala.collection.Iterator.foreach(Iterator.scala:943)\n    at scala.collection.IterableLike.foreach$(IterableLike.scala:73)\n    at scala.collection.AbstractIterable.foreach(Iterable.scala:56)\n\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n</code></pre>\n<p>Could you tell me, what happened?</p>\n"},{"tags":["java","java-8","java-time"],"comments":[{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1560016570,"post_id":35298214,"comment_id":99604804,"body_markdown":"I have discussed the theory behind `java.time` at length here: https://stackoverflow.com/a/56508200/145989","body":"I have discussed the theory behind <code>java.time</code> at length here: <a href=\"https://stackoverflow.com/a/56508200/145989\">stackoverflow.com/a/56508200/145989</a>"}],"answers":[{"comments":[{"owner":{"account_id":59864,"reputation":11232,"user_id":179014,"accept_rate":60,"display_name":"asmaier"},"score":0,"creation_date":1455039887,"post_id":35298408,"comment_id":58307509,"body_markdown":"Thanks. That works for me. I somehow assumed the OffsetDateTime.parse() method would do these steps internally for me.","body":"Thanks. That works for me. I somehow assumed the OffsetDateTime.parse() method would do these steps internally for me."},{"owner":{"account_id":7780081,"reputation":65,"user_id":5886766,"display_name":"BenBen"},"score":0,"creation_date":1536854462,"post_id":35298408,"comment_id":91582474,"body_markdown":"This one works perfectly, I somehow thought the same thing as OP. This looks neat!","body":"This one works perfectly, I somehow thought the same thing as OP. This looks neat!"}],"tags":[],"owner":{"account_id":317896,"reputation":233694,"user_id":634824,"accept_rate":87,"display_name":"Matt Johnson-Pint"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1455039078,"creation_date":1455039078,"answer_id":35298408,"question_id":35298214,"body_markdown":"There&#39;s no offset in your source data, and thus `OffsetDateTime` is not the correct type to use during parsing.\r\n\r\nInstead, use a `LocalDateTime`, since that is the type that most closely resembles the data you have.  Then use `atZone` to assign it a time zone, and if you still need an `OffsetDateTime`, you can call `toOffsetDateTime` from there.\r\n\r\n    String datum = &quot;20130419233512&quot;;\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyyMMddHHmmss&quot;);\r\n    LocalDateTime datetime = LocalDateTime.parse(datum, formatter);\r\n    ZonedDateTime zoned = datetime.atZone(ZoneId.of(&quot;Europe/Berlin&quot;));\r\n    OffsetDateTime result = zoned.toOffsetDateTime();\r\n    ","title":"Unable to obtain OffsetDateTime from TemporalAccessor","body":"<p>There's no offset in your source data, and thus <code>OffsetDateTime</code> is not the correct type to use during parsing.</p>\n\n<p>Instead, use a <code>LocalDateTime</code>, since that is the type that most closely resembles the data you have.  Then use <code>atZone</code> to assign it a time zone, and if you still need an <code>OffsetDateTime</code>, you can call <code>toOffsetDateTime</code> from there.</p>\n\n<pre><code>String datum = \"20130419233512\";\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyyMMddHHmmss\");\nLocalDateTime datetime = LocalDateTime.parse(datum, formatter);\nZonedDateTime zoned = datetime.atZone(ZoneId.of(\"Europe/Berlin\"));\nOffsetDateTime result = zoned.toOffsetDateTime();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":317896,"reputation":233694,"user_id":634824,"accept_rate":87,"display_name":"Matt Johnson-Pint"},"score":2,"creation_date":1455039786,"post_id":35298482,"comment_id":58307436,"body_markdown":"I like that you do this in one step, rather than in two like I showed.  I&#39;ll leave my answer since both will work, but I&#39;d recommend yours for the green checkmark. :)","body":"I like that you do this in one step, rather than in two like I showed.  I&#39;ll leave my answer since both will work, but I&#39;d recommend yours for the green checkmark. :)"},{"owner":{"account_id":59864,"reputation":11232,"user_id":179014,"accept_rate":60,"display_name":"asmaier"},"score":4,"creation_date":1455040154,"post_id":35298482,"comment_id":58307675,"body_markdown":"Since I need OffsetDateTime I use now `OffsetDateTime datetime = ZonedDateTime.parse(datum, formatter).toOffsetDateTime();` .","body":"Since I need OffsetDateTime I use now <code>OffsetDateTime datetime = ZonedDateTime.parse(datum, formatter).toOffsetDateTime();</code> ."},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":1,"creation_date":1455040233,"post_id":35298482,"comment_id":58307728,"body_markdown":"@asmaier Yep, that&#39;s what I commented also. You can use that to convert to an `OffsetDateTime`.","body":"@asmaier Yep, that&#39;s what I commented also. You can use that to convert to an <code>OffsetDateTime</code>."},{"owner":{"account_id":718174,"reputation":1284,"user_id":647151,"accept_rate":75,"display_name":"malthe"},"score":0,"creation_date":1664743904,"post_id":35298482,"comment_id":130536528,"body_markdown":"The documentation of that method says &quot;The zone ID is ignored&quot;. What does that mean exactly?","body":"The documentation of that method says &quot;The zone ID is ignored&quot;. What does that mean exactly?"}],"tags":[],"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"comment_count":4,"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1468273635,"creation_date":1455039342,"answer_id":35298482,"question_id":35298214,"body_markdown":"The problem is that there is a difference between what a `ZoneId` is and a `ZoneOffset` is. To create a `OffsetDateTime`, you need an zone offset. But [there is no one-to-one mapping between a `ZoneId` and a `ZoneOffset`](https://stackoverflow.com/q/32626733/1743880) because it actually depends on the current daylight saving time. For the same `ZoneId` like &quot;Europe/Berlin&quot;, there is one offset for summer and a different offset for winter.\r\n\r\nFor this case, it would be easier to use a `ZonedDateTime` instead of an `OffsetDateTime`. During parsing, the `ZonedDateTime` will correctly be set to the `&quot;Europe/Berlin&quot;` zone id and the offset will also be set according to the daylight saving time in effect for the date to parse:\r\n\r\n    public static void main(String[] args) {\r\n    \tString datum = &quot;20130419233512&quot;;\r\n    \tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyyMMddHHmmss&quot;).withZone(ZoneId.of(&quot;Europe/Berlin&quot;));\r\n    \tZonedDateTime datetime = ZonedDateTime.parse(datum, formatter);\r\n    \t\r\n    \tSystem.out.println(datetime.getZone()); // prints &quot;Europe/Berlin&quot;\r\n    \tSystem.out.println(datetime.getOffset()); // prints &quot;+02:00&quot; (for this time of year)\r\n    }\r\n\r\nNote that if you really want an `OffsetDateTime`, you can use [`ZonedDateTime.toOffsetDateTime()`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html#toOffsetDateTime--) to convert a `ZonedDateTime` into an `OffsetDateTime`.","title":"Unable to obtain OffsetDateTime from TemporalAccessor","body":"<p>The problem is that there is a difference between what a <code>ZoneId</code> is and a <code>ZoneOffset</code> is. To create a <code>OffsetDateTime</code>, you need an zone offset. But <a href=\"https://stackoverflow.com/q/32626733/1743880\">there is no one-to-one mapping between a <code>ZoneId</code> and a <code>ZoneOffset</code></a> because it actually depends on the current daylight saving time. For the same <code>ZoneId</code> like \"Europe/Berlin\", there is one offset for summer and a different offset for winter.</p>\n\n<p>For this case, it would be easier to use a <code>ZonedDateTime</code> instead of an <code>OffsetDateTime</code>. During parsing, the <code>ZonedDateTime</code> will correctly be set to the <code>\"Europe/Berlin\"</code> zone id and the offset will also be set according to the daylight saving time in effect for the date to parse:</p>\n\n<pre><code>public static void main(String[] args) {\n    String datum = \"20130419233512\";\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyyMMddHHmmss\").withZone(ZoneId.of(\"Europe/Berlin\"));\n    ZonedDateTime datetime = ZonedDateTime.parse(datum, formatter);\n\n    System.out.println(datetime.getZone()); // prints \"Europe/Berlin\"\n    System.out.println(datetime.getOffset()); // prints \"+02:00\" (for this time of year)\n}\n</code></pre>\n\n<p>Note that if you really want an <code>OffsetDateTime</code>, you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html#toOffsetDateTime--\" rel=\"noreferrer\"><code>ZonedDateTime.toOffsetDateTime()</code></a> to convert a <code>ZonedDateTime</code> into an <code>OffsetDateTime</code>.</p>\n"},{"tags":[],"owner":{"account_id":17899572,"reputation":31,"user_id":16543524,"display_name":"SleeplessChallenger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658891,"creation_date":1686658891,"answer_id":76464889,"question_id":35298214,"body_markdown":"Actually, I faced similar issue when I made a parsing from String to ZonedDateTime and needed to get OffsetDateTime.\r\n\r\nThere is excellent answer: https://stackoverflow.com/a/53071826/16543524\r\n(can&#39;t make comments)","title":"Unable to obtain OffsetDateTime from TemporalAccessor","body":"<p>Actually, I faced similar issue when I made a parsing from String to ZonedDateTime and needed to get OffsetDateTime.</p>\n<p>There is excellent answer: <a href=\"https://stackoverflow.com/a/53071826/16543524\">https://stackoverflow.com/a/53071826/16543524</a>\n(can't make comments)</p>\n"}],"owner":{"account_id":59864,"reputation":11232,"user_id":179014,"accept_rate":60,"display_name":"asmaier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33769,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":35298482,"answer_count":3,"score":33,"last_activity_date":1686658891,"creation_date":1455038469,"question_id":35298214,"body_markdown":"When I do this\r\n\r\n    String datum = &quot;20130419233512&quot;;\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyyMMddHHmmss&quot;).withZone(ZoneId.of(&quot;Europe/Berlin&quot;));\r\n    OffsetDateTime datetime = OffsetDateTime.parse(datum, formatter);\r\n\r\nI get the following exception:\r\n\r\n        java.time.format.DateTimeParseException: Text &#39;20130419233512&#39; could not be parsed: \r\n    Unable to obtain OffsetDateTime from TemporalAccessor: {InstantSeconds=1366407312},ISO,Europe/Berlin resolved \r\n    to 2013-04-19T23:35:12 of type java.time.format.Parsed\r\n\r\nHow can I parse my datetime string so that it is interpreted as always being from the timezone &quot;Europe/Berlin&quot; ?\r\n","title":"Unable to obtain OffsetDateTime from TemporalAccessor","body":"<p>When I do this</p>\n\n<pre><code>String datum = \"20130419233512\";\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyyMMddHHmmss\").withZone(ZoneId.of(\"Europe/Berlin\"));\nOffsetDateTime datetime = OffsetDateTime.parse(datum, formatter);\n</code></pre>\n\n<p>I get the following exception:</p>\n\n<pre><code>    java.time.format.DateTimeParseException: Text '20130419233512' could not be parsed: \nUnable to obtain OffsetDateTime from TemporalAccessor: {InstantSeconds=1366407312},ISO,Europe/Berlin resolved \nto 2013-04-19T23:35:12 of type java.time.format.Parsed\n</code></pre>\n\n<p>How can I parse my datetime string so that it is interpreted as always being from the timezone \"Europe/Berlin\" ?</p>\n"},{"tags":["java","youtube"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686658628,"post_id":76464832,"comment_id":134826624,"body_markdown":"Shorts are just videos. For more info, see https://stackoverflow.com/q/71192605/8681.","body":"Shorts are just videos. For more info, see <a href=\"https://stackoverflow.com/q/71192605/8681\">stackoverflow.com/q/71192605/8681</a>."}],"owner":{"account_id":2390165,"reputation":1301,"user_id":2090153,"accept_rate":30,"display_name":"selvi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686658523,"creation_date":1686658523,"question_id":76464832,"body_markdown":"I am trying to implement the shorts feature in Java using the client library com.google.api.services.youtube. But I don&#39;t find any shorts related files in this java doc in this [link][1]. Is there a way to fetch shorts video using youtube api v3 ?\r\n\r\n\r\n  [1]: https://javadoc.io/doc/com.google.apis/google-api-services-youtube/latest/index.html","title":"How to implement the shorts feature in youtube using java library com.google.api.services.youtube?","body":"<p>I am trying to implement the shorts feature in Java using the client library com.google.api.services.youtube. But I don't find any shorts related files in this java doc in this <a href=\"https://javadoc.io/doc/com.google.apis/google-api-services-youtube/latest/index.html\" rel=\"nofollow noreferrer\">link</a>. Is there a way to fetch shorts video using youtube api v3 ?</p>\n"},{"tags":["java","java-8","hashmap","java-stream","hashset"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686655885,"post_id":76464455,"comment_id":134826031,"body_markdown":"The groupBy looks pretty much correct. All you need to do now is split the phone numbers (try using `String.split`) and then combining the collection of arrays into one set (probably using some kind of `flatMap`)","body":"The groupBy looks pretty much correct. All you need to do now is split the phone numbers (try using <code>String.split</code>) and then combining the collection of arrays into one set (probably using some kind of <code>flatMap</code>)"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686657133,"creation_date":1686656461,"answer_id":76464564,"question_id":76464455,"body_markdown":"As always with this type of question, the imperative approach is much easier to read and reason about:\r\n\r\n```\r\n        Map&lt;Integer, Set&lt;String&gt;&gt; result = new HashMap&lt;&gt;();\r\n        for (Employee employee : employeeList) {\r\n            Set&lt;String&gt; set = result.result.computeIfAbsent(employee.getProjectId(), id -&gt; new HashSet&lt;&gt;());\r\n            set.addAll(Arrays.asList(employee.getMobileNumbers().split(&quot;,&quot;)));\r\n        }\r\n```\r\n\r\nOnce you understand this approach, you may even be able to turn it into a functional pipeline. But if you want this code to be maintainable, you probably shouldn&#39;t.","title":"How to convert List&lt;Object&gt; to Map&lt;Integer,Set&lt;Set&lt;String&gt;&gt; in Java 8 stream","body":"<p>As always with this type of question, the imperative approach is much easier to read and reason about:</p>\n<pre><code>        Map&lt;Integer, Set&lt;String&gt;&gt; result = new HashMap&lt;&gt;();\n        for (Employee employee : employeeList) {\n            Set&lt;String&gt; set = result.result.computeIfAbsent(employee.getProjectId(), id -&gt; new HashSet&lt;&gt;());\n            set.addAll(Arrays.asList(employee.getMobileNumbers().split(&quot;,&quot;)));\n        }\n</code></pre>\n<p>Once you understand this approach, you may even be able to turn it into a functional pipeline. But if you want this code to be maintainable, you probably shouldn't.</p>\n"},{"tags":[],"owner":{"account_id":48020,"reputation":33723,"user_id":142446,"display_name":"Brett Kail"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686656566,"creation_date":1686656566,"answer_id":76464578,"question_id":76464455,"body_markdown":"To use streams only, you need the [flatMapping](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#flatMapping(java.util.function.Function,java.util.stream.Collector)) method, which was not added until Java 9.  [This answer](https://stackoverflow.com/questions/54287457/java-8-stream-api-java-9-collectors-flatmapping-rewritten-in-java-8) has a starting point, and then you need code like this:\r\n```\r\nMap&lt;Integer,Set&lt;String&gt;&gt; result2 = employeeList.stream()\r\n    .collect(Collectors.groupingBy(\r\n        Employee::getProjectId,\r\n        flatMapping(\r\n            e -&gt; Arrays.stream(e.getMobileNumbers().split(&quot;,&quot;)),\r\n            Collectors.toSet())));\r\n```","title":"How to convert List&lt;Object&gt; to Map&lt;Integer,Set&lt;Set&lt;String&gt;&gt; in Java 8 stream","body":"<p>To use streams only, you need the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#flatMapping(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">flatMapping</a> method, which was not added until Java 9.  <a href=\"https://stackoverflow.com/questions/54287457/java-8-stream-api-java-9-collectors-flatmapping-rewritten-in-java-8\">This answer</a> has a starting point, and then you need code like this:</p>\n<pre><code>Map&lt;Integer,Set&lt;String&gt;&gt; result2 = employeeList.stream()\n    .collect(Collectors.groupingBy(\n        Employee::getProjectId,\n        flatMapping(\n            e -&gt; Arrays.stream(e.getMobileNumbers().split(&quot;,&quot;)),\n            Collectors.toSet())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686656976,"creation_date":1686656976,"answer_id":76464632,"question_id":76464455,"body_markdown":"You need to split the grouped values and flatmap into `Set` in the downstream collector:\r\n\r\n```\r\nMap&lt;Integer, Set&lt;String&gt;&gt; result2 = employeeList.stream()\r\n\t.collect(Collectors.groupingBy(Employee::getProjectId,\r\n\t\tCollectors.mapping(Employee::getMobileNumbers,\r\n\t\t\tCollectors.flatMapping(s -&gt; Arrays.stream(s.split(&quot;,&quot;)), \r\n\t\t\t\tCollectors.toSet()))));\r\n```\r\n&gt; ```\r\n&gt; {1=[33333, 1111, 2222], 2=[44444, 5555]}\r\n&gt; ```","title":"How to convert List&lt;Object&gt; to Map&lt;Integer,Set&lt;Set&lt;String&gt;&gt; in Java 8 stream","body":"<p>You need to split the grouped values and flatmap into <code>Set</code> in the downstream collector:</p>\n<pre><code>Map&lt;Integer, Set&lt;String&gt;&gt; result2 = employeeList.stream()\n    .collect(Collectors.groupingBy(Employee::getProjectId,\n        Collectors.mapping(Employee::getMobileNumbers,\n            Collectors.flatMapping(s -&gt; Arrays.stream(s.split(&quot;,&quot;)), \n                Collectors.toSet()))));\n</code></pre>\n<blockquote>\n<pre><code>{1=[33333, 1111, 2222], 2=[44444, 5555]}\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6528860,"reputation":621,"user_id":5050691,"display_name":"SkogensKonung"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658315,"creation_date":1686657835,"answer_id":76464741,"question_id":76464455,"body_markdown":"If I understand correctly, you want to have a `Map&lt;Integer, Set&lt;Set&lt;String&gt;&gt;&gt;`, and not a `Map&lt;Integer, Set&lt;String&gt;&gt;` as in the previous solutions.\r\nIn my opinion, making the partitions using `Streams` makes the code illegible. Thus, I&#39;d resort to an additional function to check the set conditions. \r\nTo construct the example, I chose three as the maximum number of elements in a set, so you must adjust the answer according to your needs.\r\n\r\n```\r\n   final List&lt;Employee&gt; employees = Arrays.asList(\r\n                new Employee(1, 1, &quot;1111,2222&quot;),\r\n                new Employee(2, 1, &quot;33333,4444&quot;),\r\n                new Employee(3, 2, &quot;44444,5555&quot;)\r\n        );\r\n\r\n        final Map&lt;Integer, Set&lt;Set&lt;String&gt;&gt;&gt; idToNumberPartitions = employees.stream()\r\n                .collect(Collectors.groupingBy(\r\n                        Employee::getProjectId,\r\n                        Collector.of(\r\n                                HashSet::new,\r\n                                (set, employee) -&gt; addNumbersToPartition(set, employee.getMobileNumbers().split(&quot;,&quot;)),\r\n                                (set1, set2) -&gt; {\r\n                                    set1.addAll(set2);\r\n                                    return set1;\r\n                                }\r\n                        )\r\n                ));\r\n\r\n\r\n    }\r\n\r\n    private static void addNumbersToPartition(final Set&lt;Set&lt;String&gt;&gt; allSets, final String[] numbers) {\r\n        Set&lt;String&gt; currentSet = null;\r\n        for (final String number : numbers) {\r\n            if (currentSet == null || currentSet.size() &gt;= 3) {\r\n                currentSet = new HashSet&lt;&gt;();\r\n                allSets.add(currentSet);\r\n            }\r\n            currentSet.add(number);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFor the example above, this prints:\r\n```\r\n{1=[[1111, 2222], [33333, 4444]], 2=[[44444, 5555]]}\r\n```\r\n\r\nConsult the docs to find out more about the custom Collector:\r\n```\r\n    public static&lt;T, R&gt; Collector&lt;T, R, R&gt; of(Supplier&lt;R&gt; supplier,\r\n                                              BiConsumer&lt;R, T&gt; accumulator,\r\n                                              BinaryOperator&lt;R&gt; combiner,\r\n                                              Characteristics... characteristics)\r\n```","title":"How to convert List&lt;Object&gt; to Map&lt;Integer,Set&lt;Set&lt;String&gt;&gt; in Java 8 stream","body":"<p>If I understand correctly, you want to have a <code>Map&lt;Integer, Set&lt;Set&lt;String&gt;&gt;&gt;</code>, and not a <code>Map&lt;Integer, Set&lt;String&gt;&gt;</code> as in the previous solutions.\nIn my opinion, making the partitions using <code>Streams</code> makes the code illegible. Thus, I'd resort to an additional function to check the set conditions.\nTo construct the example, I chose three as the maximum number of elements in a set, so you must adjust the answer according to your needs.</p>\n<pre><code>   final List&lt;Employee&gt; employees = Arrays.asList(\n                new Employee(1, 1, &quot;1111,2222&quot;),\n                new Employee(2, 1, &quot;33333,4444&quot;),\n                new Employee(3, 2, &quot;44444,5555&quot;)\n        );\n\n        final Map&lt;Integer, Set&lt;Set&lt;String&gt;&gt;&gt; idToNumberPartitions = employees.stream()\n                .collect(Collectors.groupingBy(\n                        Employee::getProjectId,\n                        Collector.of(\n                                HashSet::new,\n                                (set, employee) -&gt; addNumbersToPartition(set, employee.getMobileNumbers().split(&quot;,&quot;)),\n                                (set1, set2) -&gt; {\n                                    set1.addAll(set2);\n                                    return set1;\n                                }\n                        )\n                ));\n\n\n    }\n\n    private static void addNumbersToPartition(final Set&lt;Set&lt;String&gt;&gt; allSets, final String[] numbers) {\n        Set&lt;String&gt; currentSet = null;\n        for (final String number : numbers) {\n            if (currentSet == null || currentSet.size() &gt;= 3) {\n                currentSet = new HashSet&lt;&gt;();\n                allSets.add(currentSet);\n            }\n            currentSet.add(number);\n        }\n    }\n}\n</code></pre>\n<p>For the example above, this prints:</p>\n<pre><code>{1=[[1111, 2222], [33333, 4444]], 2=[[44444, 5555]]}\n</code></pre>\n<p>Consult the docs to find out more about the custom Collector:</p>\n<pre><code>    public static&lt;T, R&gt; Collector&lt;T, R, R&gt; of(Supplier&lt;R&gt; supplier,\n                                              BiConsumer&lt;R, T&gt; accumulator,\n                                              BinaryOperator&lt;R&gt; combiner,\n                                              Characteristics... characteristics)\n</code></pre>\n"}],"owner":{"account_id":28811774,"reputation":21,"user_id":22066325,"display_name":"KFH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1686658315,"creation_date":1686655652,"question_id":76464455,"body_markdown":"\r\n```\r\n    class Employee{\r\n      private Integer employeeId;\r\n      private Integer projectId;\r\n      private String mobileNumbers;\r\n    }\r\n```\r\n\r\nI want to convert List of employees to Map of projectId &amp; mobile numbers. Mobile numbers can have multiple values comma separated(eg: mobileNumbers=&quot;7364567347,5784345445&quot;)\r\n\r\nI want to split mobile number with partition of 100. Hence the value datatype is Set&lt;Set&lt;String&gt;&gt;\r\n\r\nTwo things which I am not able to achieve in Java 8 using stream\r\n 1.Not able to split multiple mobileNumber as individual element in Set object.\r\n 2.Not able to partition \r\n\r\n\r\nEg: \r\n```\r\n  Employee[employeeId=1,projectId=1,mobileNumbers=&quot;1111,2222&quot;]\r\n  Employee[employeeId=2,projectId=1,mobileNumbers=&quot;33333&quot;]\r\n  Employee[employeeId=3,projectId=2,mobileNumbers=&quot;44444,5555&quot;]\r\n```\r\n\r\nExpected :\r\n  {1=[[&quot;1111&quot;,&quot;2222&quot;,&quot;33333&quot;]], 2=[[&quot;44444&quot;,&quot;5555&quot;]]}\r\n\r\nI am able to proceed till Map&lt;ProjectId,Set&lt;mobileNumbers&gt;&gt;. I am not able to split mobileNumbers\r\n\r\n     \r\n```\r\nMap&lt;Integer,Set&lt;String&gt;&gt; result2=employeeList.stream()\r\n         .collect(\r\n          Collectors.groupingBy(Employee::getProjectId,\r\n              Collectors.mapping(Employee::getMobileNumbers, Collectors.toSet()))\r\n      );\r\n```\r\n\r\nTwo things which I am not able to achieve in Java 8 using stream\r\n 1.Not able to split multiple mobileNumber as individual element in Set object.\r\n 2.Not able to partition `","title":"How to convert List&lt;Object&gt; to Map&lt;Integer,Set&lt;Set&lt;String&gt;&gt; in Java 8 stream","body":"<pre><code>    class Employee{\n      private Integer employeeId;\n      private Integer projectId;\n      private String mobileNumbers;\n    }\n</code></pre>\n<p>I want to convert List of employees to Map of projectId &amp; mobile numbers. Mobile numbers can have multiple values comma separated(eg: mobileNumbers=&quot;7364567347,5784345445&quot;)</p>\n<p>I want to split mobile number with partition of 100. Hence the value datatype is Set&lt;Set&gt;</p>\n<p>Two things which I am not able to achieve in Java 8 using stream\n1.Not able to split multiple mobileNumber as individual element in Set object.\n2.Not able to partition</p>\n<p>Eg:</p>\n<pre><code>  Employee[employeeId=1,projectId=1,mobileNumbers=&quot;1111,2222&quot;]\n  Employee[employeeId=2,projectId=1,mobileNumbers=&quot;33333&quot;]\n  Employee[employeeId=3,projectId=2,mobileNumbers=&quot;44444,5555&quot;]\n</code></pre>\n<p>Expected :\n{1=[[&quot;1111&quot;,&quot;2222&quot;,&quot;33333&quot;]], 2=[[&quot;44444&quot;,&quot;5555&quot;]]}</p>\n<p>I am able to proceed till Map&lt;ProjectId,Set&gt;. I am not able to split mobileNumbers</p>\n<pre><code>Map&lt;Integer,Set&lt;String&gt;&gt; result2=employeeList.stream()\n         .collect(\n          Collectors.groupingBy(Employee::getProjectId,\n              Collectors.mapping(Employee::getMobileNumbers, Collectors.toSet()))\n      );\n</code></pre>\n<p>Two things which I am not able to achieve in Java 8 using stream\n1.Not able to split multiple mobileNumber as individual element in Set object.\n2.Not able to partition `</p>\n"},{"tags":["java","jpa","filter","jpql","optional-parameters"],"answers":[{"comments":[{"owner":{"account_id":3861308,"reputation":10880,"user_id":3198983,"display_name":"Jesus Iniesta"},"score":0,"creation_date":1572711282,"post_id":50569466,"comment_id":103647541,"body_markdown":"`ano != null` means human, `ano == null` would mean inhuman I guess &#129315;","body":"<code>ano != null</code> means human, <code>ano == null</code> would mean inhuman I guess 🤣"}],"tags":[],"owner":{"account_id":203353,"reputation":4509,"user_id":450951,"display_name":"Ilya Dyoshin"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1527520940,"creation_date":1527520940,"answer_id":50569466,"question_id":50569238,"body_markdown":"JPQL doesn&#39;t supports optional parameters. \r\n\r\nActually you should think that not parameters are optional but rather conditions are optional.  This idea will lead you to creating &quot;dynamic&quot; queries. And this in place will lead you next to switch from JPQL to Criteria API.  And this will lead you to writting something like this: \r\n\r\n\r\n        // Actually can be generated during build, and thus can be ommited\r\n        @StaticMetamodel(Moneda.class)\r\n        abstract class Moneda_ {\r\n            public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; cantidad;\r\n            public static volatile SingularAttribute&lt;Moneda, Divisia&gt; divisia;\r\n            public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; ano;\r\n        }\r\n\r\n        final CriteriaBuilder cb = em.getCriteriaBuilder();\r\n        \r\n        final CriteriaQuery&lt;Moneda&gt; cq = cb.createQuery(Moneda.class);\r\n        final Root&lt;Moneda&gt; root = cq.from(Moneda.class);\r\n        \r\n        Set&lt;Predicate&gt; predicates = new HashSet&lt;&gt;(3);\r\n        if (cantidad != null) {\r\n            predicates.add(cb.equal(root.get(Moneda_.cantidad), cantidad));\r\n        }\r\n        \r\n        if (ano != null) {\r\n            predicates.add(cb.equal(root.get(Moneda_.ano), ano));\r\n        }\r\n        \r\n        if (divisia != null) {\r\n            predicates.add(cb.equal(root.get(Moneda_.divisia), divisia));\r\n        }\r\n        \r\n        cq.where(predicates.toArray(new Predicate[predicates.size()]));\r\n        \r\n        em.createQuery(cq).getResultList();\r\n\r\n        // and do whatever you want ","title":"Set optional parameters in JPQL Query","body":"<p>JPQL doesn't supports optional parameters. </p>\n\n<p>Actually you should think that not parameters are optional but rather conditions are optional.  This idea will lead you to creating \"dynamic\" queries. And this in place will lead you next to switch from JPQL to Criteria API.  And this will lead you to writting something like this: </p>\n\n<pre><code>    // Actually can be generated during build, and thus can be ommited\n    @StaticMetamodel(Moneda.class)\n    abstract class Moneda_ {\n        public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; cantidad;\n        public static volatile SingularAttribute&lt;Moneda, Divisia&gt; divisia;\n        public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; ano;\n    }\n\n    final CriteriaBuilder cb = em.getCriteriaBuilder();\n\n    final CriteriaQuery&lt;Moneda&gt; cq = cb.createQuery(Moneda.class);\n    final Root&lt;Moneda&gt; root = cq.from(Moneda.class);\n\n    Set&lt;Predicate&gt; predicates = new HashSet&lt;&gt;(3);\n    if (cantidad != null) {\n        predicates.add(cb.equal(root.get(Moneda_.cantidad), cantidad));\n    }\n\n    if (ano != null) {\n        predicates.add(cb.equal(root.get(Moneda_.ano), ano));\n    }\n\n    if (divisia != null) {\n        predicates.add(cb.equal(root.get(Moneda_.divisia), divisia));\n    }\n\n    cq.where(predicates.toArray(new Predicate[predicates.size()]));\n\n    em.createQuery(cq).getResultList();\n\n    // and do whatever you want \n</code></pre>\n"},{"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1576258739,"post_id":58672871,"comment_id":104854065,"body_markdown":"Nice! Clever solution. I&#39;m in similar situation and ended up with some ugly code with lots of `if` statements. This should do the trick.","body":"Nice! Clever solution. I&#39;m in similar situation and ended up with some ugly code with lots of <code>if</code> statements. This should do the trick."},{"owner":{"account_id":11875529,"reputation":1253,"user_id":8690676,"display_name":"Bernhard"},"score":4,"creation_date":1583481405,"post_id":58672871,"comment_id":107138903,"body_markdown":"We used to use this solution for a while, until we did a load test and realized that this for some reason decreases the performance of the query considerably for cases where the optional parameters are not used. (Big table, few million entries, DB2, about four/five optional parameters).","body":"We used to use this solution for a while, until we did a load test and realized that this for some reason decreases the performance of the query considerably for cases where the optional parameters are not used. (Big table, few million entries, DB2, about four/five optional parameters)."},{"owner":{"account_id":8164177,"reputation":858,"user_id":6147174,"accept_rate":55,"display_name":"Wecherowski"},"score":0,"creation_date":1590230364,"post_id":58672871,"comment_id":109605655,"body_markdown":"@Bernhard can you give more information on that? Have you found out the reason for this behavior?","body":"@Bernhard can you give more information on that? Have you found out the reason for this behavior?"},{"owner":{"account_id":11875529,"reputation":1253,"user_id":8690676,"display_name":"Bernhard"},"score":1,"creation_date":1590318341,"post_id":58672871,"comment_id":109630075,"body_markdown":"@Wecherowski Sadly no, I&#39;m not that familar with DB internals, it&#39;s just sth. we observed and rewriting the queries using native Queries where you can have actual optional parameters increased the perfomance significantly.","body":"@Wecherowski Sadly no, I&#39;m not that familar with DB internals, it&#39;s just sth. we observed and rewriting the queries using native Queries where you can have actual optional parameters increased the perfomance significantly."},{"owner":{"account_id":1446452,"reputation":4027,"user_id":1364747,"accept_rate":69,"display_name":"Teddy"},"score":0,"creation_date":1634278388,"post_id":58672871,"comment_id":122986371,"body_markdown":"This might work with = as it just evaluates to false, however, it doesn&#39;t work with IN as IN operator doesn&#39;t allow either empty list or null on the values side (atleast in postgres), which is what I asked Google and it brought me here :-D","body":"This might work with = as it just evaluates to false, however, it doesn&#39;t work with IN as IN operator doesn&#39;t allow either empty list or null on the values side (atleast in postgres), which is what I asked Google and it brought me here :-D"},{"owner":{"account_id":7369213,"reputation":312,"user_id":5609968,"display_name":"Xfox"},"score":0,"creation_date":1636128029,"post_id":58672871,"comment_id":123482165,"body_markdown":"@Teddy I answered the question with a solution for the IN operator. :)","body":"@Teddy I answered the question with a solution for the IN operator. :)"},{"owner":{"account_id":3887283,"reputation":329,"user_id":3218334,"display_name":"A. Parolini"},"score":0,"creation_date":1649843392,"post_id":58672871,"comment_id":126976436,"body_markdown":"Same as @Bernhard: Bad perfs using this technique.","body":"Same as @Bernhard: Bad perfs using this technique."},{"owner":{"account_id":2474006,"reputation":65,"user_id":2155064,"display_name":"Nicky"},"score":0,"creation_date":1674141960,"post_id":58672871,"comment_id":132655618,"body_markdown":"Seconding what @Bernhard and A._Parolini are saying about performance. I&#39;ve lost weeks trying to resolve this, but somewhere in the Spring/Hibernate/JPA/JDBC pipeline introducing a bunch of these conditionals creates some sort of leak. Even though the query itself, if executed directly against the SQL server, performs fine, when executed through JPA it will take 5+ seconds to return a result, and often takes an additional several seconds to return the connection to the pool.","body":"Seconding what @Bernhard and A._Parolini are saying about performance. I&#39;ve lost weeks trying to resolve this, but somewhere in the Spring/Hibernate/JPA/JDBC pipeline introducing a bunch of these conditionals creates some sort of leak. Even though the query itself, if executed directly against the SQL server, performs fine, when executed through JPA it will take 5+ seconds to return a result, and often takes an additional several seconds to return the connection to the pool."}],"tags":[],"owner":{"account_id":3861308,"reputation":10880,"user_id":3198983,"display_name":"Jesus Iniesta"},"comment_count":8,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1572711200,"creation_date":1572711200,"answer_id":58672871,"question_id":50569238,"body_markdown":"After reading Ilya Dyoshin&#39;s comment, and the smart thinking behind *&quot;you should think that not parameters are optional but rather conditions are optional&quot;* I decided to go my own way by using JPQL with @Query annotation, and creating one dynamic SQL query which works beautifully.\r\n\r\nThe key is to apply some SQL logic to make the conditions optional rather than the parameters:\r\n\r\n```java\r\n    @Query(&quot;SELECT a &quot; +\r\n           &quot;FROM amazing &quot; +\r\n           &quot;WHERE (:filterSuperAwesome IS NULL &quot; +\r\n                        &quot;OR a.filterSuperAwesome = :filterSuperAwesome)&quot;); \r\n\r\n    List&lt;FilterSuperAwesome&gt; filterAwesomeORSuperAwesome(\r\n                    @Param(&quot;filterSuperAwesome &quot;) FilterSuperAwesome filterSuperAwesome);\r\n\r\n```\r\nNote how here ☝️,  I use an OR statement based on the fact that my parameter can present two forms, an instance of FilterSuperAwesome or NULL. When NULL, the condition is always True, as if it wasn&#39;t there.\r\n\r\nThis works just fine inside a JpaRepository class of a JHipster project.\r\n","title":"Set optional parameters in JPQL Query","body":"<p>After reading Ilya Dyoshin's comment, and the smart thinking behind <em>\"you should think that not parameters are optional but rather conditions are optional\"</em> I decided to go my own way by using JPQL with @Query annotation, and creating one dynamic SQL query which works beautifully.</p>\n\n<p>The key is to apply some SQL logic to make the conditions optional rather than the parameters:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Query(\"SELECT a \" +\n           \"FROM amazing \" +\n           \"WHERE (:filterSuperAwesome IS NULL \" +\n                        \"OR a.filterSuperAwesome = :filterSuperAwesome)\"); \n\n    List&lt;FilterSuperAwesome&gt; filterAwesomeORSuperAwesome(\n                    @Param(\"filterSuperAwesome \") FilterSuperAwesome filterSuperAwesome);\n\n</code></pre>\n\n<p>Note how here ☝️,  I use an OR statement based on the fact that my parameter can present two forms, an instance of FilterSuperAwesome or NULL. When NULL, the condition is always True, as if it wasn't there.</p>\n\n<p>This works just fine inside a JpaRepository class of a JHipster project.</p>\n"},{"comments":[{"owner":{"account_id":2315749,"reputation":57,"user_id":2032860,"display_name":"kulas"},"score":0,"creation_date":1642758942,"post_id":69855937,"comment_id":125162455,"body_markdown":"Have you checked this against MSSQL for example? From my experience this could work for Oracle and PostgreSQL but for MSSQL if will fail as it does not allow nulls only in coalesce.\n\nJust call `select coalesce(null, null)` to check.","body":"Have you checked this against MSSQL for example? From my experience this could work for Oracle and PostgreSQL but for MSSQL if will fail as it does not allow nulls only in coalesce.  Just call <code>select coalesce(null, null)</code> to check."},{"owner":{"account_id":7369213,"reputation":312,"user_id":5609968,"display_name":"Xfox"},"score":0,"creation_date":1642849773,"post_id":69855937,"comment_id":125185015,"body_markdown":"Hi @kulas, no I dind&#39;t try it against MSSQL, only Oracle.","body":"Hi @kulas, no I dind&#39;t try it against MSSQL, only Oracle."},{"owner":{"account_id":17940452,"reputation":383,"user_id":16946039,"display_name":"Hugo Vinhal"},"score":0,"creation_date":1649949985,"post_id":69855937,"comment_id":127008716,"body_markdown":"I have tried this approach but the code breaks when a null value or an empty list is passed, saying &quot;org.hibernate.exception.SQLGrammarException: could not extract ResultSet&quot;. This is happening because of the first condition where he tries to check if COLUMN_X is in null. Anyone else with this issue?","body":"I have tried this approach but the code breaks when a null value or an empty list is passed, saying &quot;org.hibernate.exception.SQLGrammarException: could not extract ResultSet&quot;. This is happening because of the first condition where he tries to check if COLUMN_X is in null. Anyone else with this issue?"},{"owner":{"account_id":7369213,"reputation":312,"user_id":5609968,"display_name":"Xfox"},"score":0,"creation_date":1650090847,"post_id":69855937,"comment_id":127038645,"body_markdown":"That&#39;s odd, are you sure your final Object correctly maps the result you are trying to extract? I suggest to google the error you&#39;re getting.","body":"That&#39;s odd, are you sure your final Object correctly maps the result you are trying to extract? I suggest to google the error you&#39;re getting."},{"owner":{"account_id":432924,"reputation":105,"user_id":2376653,"display_name":"Abdul Mohsin"},"score":0,"creation_date":1654153268,"post_id":69855937,"comment_id":128024548,"body_markdown":"For SQLServer you can use below : \n\nFor List&lt;String&gt; :\n\n(&lt;column&gt; in (:categories) or COALESCE(:categories, &#39;NULL&#39;) =&#39;NULL&#39;) )\n\nFor List&lt;Integer&gt;\n(&lt;column&gt; in (:employeeIds) or COALESCE(:employeeIds, -1) =-1) )\n\nFor list of integers make sure to set a fixed value as per your columns data","body":"For SQLServer you can use below :   For List&lt;String&gt; :  (&lt;column&gt; in (:categories) or COALESCE(:categories, &#39;NULL&#39;) =&#39;NULL&#39;) )  For List&lt;Integer&gt; (&lt;column&gt; in (:employeeIds) or COALESCE(:employeeIds, -1) =-1) )  For list of integers make sure to set a fixed value as per your columns data"}],"tags":[],"owner":{"account_id":7369213,"reputation":312,"user_id":5609968,"display_name":"Xfox"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636127645,"creation_date":1636127645,"answer_id":69855937,"question_id":50569238,"body_markdown":"In my case I had the problem that my optional parameter was a ```List&lt;String&gt;``` and the solution was the following:\r\n\r\n```\r\n@Query(value = &quot;SELECT *\r\n                FROM ...\r\n                 WHERE (COLUMN_X IN :categories OR COALESCE(:categories, null) IS NULL)&quot;\r\n, nativeQuery = true)\r\nList&lt;Archive&gt; findByCustomCriteria1(@Param(&quot;categories&quot;) List&lt;String&gt; categories);\r\n```\r\n\r\nThis way:\r\n\r\n - If the **parameter** **has *one or more values*** it is selected by the **left side** of the *OR* operator\r\n - If the **parameter** *categories* **is *null***, meaning that i have to select all values for *COLUMN_X*, will always return TRUE by the **right side** of the *OR* operator\r\n\r\n# Why `COALESCE` and why a *null* value inside of it?\r\n## Let&#39;s explore the `WHERE` clause in all conditions:\r\n\r\n**Case 1:** `categories = null`\r\n\r\n```\r\n(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\r\n```\r\nThe left part of the *OR* will return false, while the right part of the *OR* will always return true, in fact [`COALESCE`][1] will return the first non-null value if present and returns null if all arguments are null.\r\n\r\n**Case 2:** `categories = ()`\r\n\r\n```\r\n(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\r\n```\r\n\r\nJPA will automatically identify an empty list as a null value, hence same result of Case 1.\r\n\r\n**Case 3:** `categories = (&#39;ONE_VALUE&#39;)`\r\n\r\n```\r\n(COLUMN_X IN (&#39;ONE_VALUE&#39;) OR COALESCE(&#39;ONE_VALUE&#39;, null) IS NULL)\r\n```\r\nThe left part of the *OR* will return true only for those values for which `COLUMN_X = &#39;ONE_VALUE&#39;` while the right part of the *OR* will never return true, because it is equals to `&#39;ONE_VALUE&#39; IS NULL` (that is false).\r\n\r\nWhy the null as second parameter? Well, that&#39;s because `COALESCE` needs at least two parameters.\r\n\r\n**Case 4:** `categories = (&#39;ONE_VALUE&#39;, &#39;TWO_VALUE&#39;)`\r\n\r\n```\r\n(COLUMN_X IN (&#39;ONE_VALUE&#39;, &#39;TWO_VALUE&#39;) OR COALESCE(&#39;ONE_VALUE&#39;, &#39;TWO_VALUE&#39;, null) IS NULL)\r\n```\r\n\r\nAs in Case 3, the left part of the *OR* operator will select only the rows for which `COLUMN_X` is equale to `&#39;ONE_VALUE&#39;` or  `&#39;TWO_VALUE&#39;`.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javadb/10.8.3.0/ref/rreffunccoalesce.html","title":"Set optional parameters in JPQL Query","body":"<p>In my case I had the problem that my optional parameter was a <code>List&lt;String&gt;</code> and the solution was the following:</p>\n<pre><code>@Query(value = &quot;SELECT *\n                FROM ...\n                 WHERE (COLUMN_X IN :categories OR COALESCE(:categories, null) IS NULL)&quot;\n, nativeQuery = true)\nList&lt;Archive&gt; findByCustomCriteria1(@Param(&quot;categories&quot;) List&lt;String&gt; categories);\n</code></pre>\n<p>This way:</p>\n<ul>\n<li>If the <strong>parameter</strong> <strong>has <em>one or more values</em></strong> it is selected by the <strong>left side</strong> of the <em>OR</em> operator</li>\n<li>If the <strong>parameter</strong> <em>categories</em> <strong>is <em>null</em></strong>, meaning that i have to select all values for <em>COLUMN_X</em>, will always return TRUE by the <strong>right side</strong> of the <em>OR</em> operator</li>\n</ul>\n<h1>Why <code>COALESCE</code> and why a <em>null</em> value inside of it?</h1>\n<h2>Let's explore the <code>WHERE</code> clause in all conditions:</h2>\n<p><strong>Case 1:</strong> <code>categories = null</code></p>\n<pre><code>(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\n</code></pre>\n<p>The left part of the <em>OR</em> will return false, while the right part of the <em>OR</em> will always return true, in fact <a href=\"https://docs.oracle.com/javadb/10.8.3.0/ref/rreffunccoalesce.html\" rel=\"nofollow noreferrer\"><code>COALESCE</code></a> will return the first non-null value if present and returns null if all arguments are null.</p>\n<p><strong>Case 2:</strong> <code>categories = ()</code></p>\n<pre><code>(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\n</code></pre>\n<p>JPA will automatically identify an empty list as a null value, hence same result of Case 1.</p>\n<p><strong>Case 3:</strong> <code>categories = ('ONE_VALUE')</code></p>\n<pre><code>(COLUMN_X IN ('ONE_VALUE') OR COALESCE('ONE_VALUE', null) IS NULL)\n</code></pre>\n<p>The left part of the <em>OR</em> will return true only for those values for which <code>COLUMN_X = 'ONE_VALUE'</code> while the right part of the <em>OR</em> will never return true, because it is equals to <code>'ONE_VALUE' IS NULL</code> (that is false).</p>\n<p>Why the null as second parameter? Well, that's because <code>COALESCE</code> needs at least two parameters.</p>\n<p><strong>Case 4:</strong> <code>categories = ('ONE_VALUE', 'TWO_VALUE')</code></p>\n<pre><code>(COLUMN_X IN ('ONE_VALUE', 'TWO_VALUE') OR COALESCE('ONE_VALUE', 'TWO_VALUE', null) IS NULL)\n</code></pre>\n<p>As in Case 3, the left part of the <em>OR</em> operator will select only the rows for which <code>COLUMN_X</code> is equale to <code>'ONE_VALUE'</code> or  <code>'TWO_VALUE'</code>.</p>\n"},{"tags":[],"owner":{"account_id":22415841,"reputation":31,"user_id":16623933,"display_name":"Tiran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658234,"creation_date":1686658234,"answer_id":76464793,"question_id":50569238,"body_markdown":"this for native queries, \r\nSimply pass null values when parameter values need to be optional.\r\ncheck whether the parameter is null or not in the query.\r\n\r\n    &quot;SELECT m FROM Moneda m WHERE&quot;\r\n    + &quot;(:divisa is null || m.divisa = :divisa) &quot;\r\n    + &quot;AND (:cantidad is null || m.cantidad= :cantidad) &quot;\r\n    + &quot;AND (:ano is null || m.ano = :ano)&quot;","title":"Set optional parameters in JPQL Query","body":"<p>this for native queries,\nSimply pass null values when parameter values need to be optional.\ncheck whether the parameter is null or not in the query.</p>\n<pre><code>&quot;SELECT m FROM Moneda m WHERE&quot;\n+ &quot;(:divisa is null || m.divisa = :divisa) &quot;\n+ &quot;AND (:cantidad is null || m.cantidad= :cantidad) &quot;\n+ &quot;AND (:ano is null || m.ano = :ano)&quot;\n</code></pre>\n"}],"owner":{"account_id":13293002,"reputation":131,"user_id":9596931,"display_name":"Nacho Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26507,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":4,"score":13,"last_activity_date":1686658234,"creation_date":1527520029,"question_id":50569238,"body_markdown":"[I got this list of coins that i want to filter with that 3 optional parameters(Currency, quantity and year)][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GFudY.png\r\n\r\nHow can I set parameters in JPQL as optional? I dont want to do 9 &quot;if else&quot; for checking if its null\r\n\r\nI got the function filtradoMonedas (filterCoins) that filter the object Moneda(coin) using that 3 OPTIONAL parameters but its not working if there&#180;s a null parameter.\r\n\r\nThis just work well if dont set empty parameters, if cantidad or ano is &quot;&quot; returns exception of bad query. Just want it as an optional. Heres the method:\r\n\r\n  \r\n    public List&lt;Moneda&gt; filtradoMonedas(Divisa divisa, BigDecimal cantidad, \r\n\t\t\tBigDecimal ano){\r\n\r\n\t\tEntityManager em = getEntityManager();\r\n\t\t\r\n\t\tQuery consulta = em.createQuery(&quot;SELECT m FROM Moneda m &quot;\r\n\t\t\t\t+ &quot;WHERE m.divisa = :divisa &quot;\r\n\t\t\t\t+ &quot;AND m.cantidad= :cantidad &quot;\r\n\t\t\t\t+ &quot;AND m.ano = :ano&quot;);\r\n\r\n\t\tconsulta.setParameter(&quot;divisa&quot;, divisa);\r\n\t\tconsulta.setParameter(&quot;cantidad&quot;, cantidad);\r\n\t\tconsulta.setParameter(&quot;ano&quot;, ano);\r\n\t\t\r\n\t\tList&lt;Moneda&gt; filtradoMonedas = (List&lt;Moneda&gt;) consulta.getResultList();\r\n\t\t// sincronizar los objetos devueltos con la base de datos\r\n\t\tfor (Moneda m : filtradoMonedas) {\r\n\t\t\tem.refresh(m);\r\n\t\t}\r\n\r\n\t\tem.close();\r\n\t\treturn filtradoMonedas;\r\n\t}\r\n","title":"Set optional parameters in JPQL Query","body":"<p><a href=\"https://i.stack.imgur.com/GFudY.png\" rel=\"noreferrer\">I got this list of coins that i want to filter with that 3 optional parameters(Currency, quantity and year)</a></p>\n\n<p>How can I set parameters in JPQL as optional? I dont want to do 9 \"if else\" for checking if its null</p>\n\n<p>I got the function filtradoMonedas (filterCoins) that filter the object Moneda(coin) using that 3 OPTIONAL parameters but its not working if there´s a null parameter.</p>\n\n<p>This just work well if dont set empty parameters, if cantidad or ano is \"\" returns exception of bad query. Just want it as an optional. Heres the method:</p>\n\n<pre><code>public List&lt;Moneda&gt; filtradoMonedas(Divisa divisa, BigDecimal cantidad, \n        BigDecimal ano){\n\n    EntityManager em = getEntityManager();\n\n    Query consulta = em.createQuery(\"SELECT m FROM Moneda m \"\n            + \"WHERE m.divisa = :divisa \"\n            + \"AND m.cantidad= :cantidad \"\n            + \"AND m.ano = :ano\");\n\n    consulta.setParameter(\"divisa\", divisa);\n    consulta.setParameter(\"cantidad\", cantidad);\n    consulta.setParameter(\"ano\", ano);\n\n    List&lt;Moneda&gt; filtradoMonedas = (List&lt;Moneda&gt;) consulta.getResultList();\n    // sincronizar los objetos devueltos con la base de datos\n    for (Moneda m : filtradoMonedas) {\n        em.refresh(m);\n    }\n\n    em.close();\n    return filtradoMonedas;\n}\n</code></pre>\n"},{"tags":["javascript","java"],"answers":[{"tags":[],"owner":{"account_id":18885497,"reputation":102,"user_id":13777039,"display_name":"Adityan.P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608299572,"creation_date":1608261362,"answer_id":65351354,"question_id":60201722,"body_markdown":"***Hi***, i think you need to generate an actual ```order_id``` from server side as it is mentioned in their docs [here][1]. Instead of the sample ```order id```.\r\n\r\n\r\n  [1]: https://razorpay.com/docs/payment-gateway/web-integration/standard/","title":"How I can integrate Razorpay in website using JavaScript or Java?","body":"<p><em><strong>Hi</strong></em>, i think you need to generate an actual <code>order_id</code> from server side as it is mentioned in their docs <a href=\"https://razorpay.com/docs/payment-gateway/web-integration/standard/\" rel=\"nofollow noreferrer\">here</a>. Instead of the sample <code>order id</code>.</p>\n"},{"tags":[],"owner":{"account_id":26792337,"reputation":1,"user_id":20385551,"display_name":"brijesh revella"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658210,"creation_date":1686658210,"answer_id":76464789,"question_id":60201722,"body_markdown":"The Below Code Works.\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;PaymentGateway&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;https://checkout.razorpay.com/v1/razorpay.js&quot;&gt;&lt;/script&gt;\r\n&lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script&gt;\r\n$(document).ready(function() {\r\n  // Single instance on page.\r\n  var razorpay = new Razorpay({\r\n    key: &#39;rzp_test_tCLhPLootU4w3M&#39;,\r\n    // logo, displayed in the payment processing popup\r\n    image: &#39;https://i.imgur.com/n5tjHFD.png&#39;,\r\n  });\r\n\r\n  // Fetching the payment.\r\n  razorpay.once(&#39;ready&#39;, function(response) {\r\n    console.log(response.methods);\r\n  });\r\n\r\n  // Submitting the data.\r\n  var data = {\r\n    amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\r\n    currency: &quot;INR&quot;, // Default is INR. We support more than 90 currencies.\r\n    email: &#39;test.appmomos@gmail.com&#39;,\r\n    contact: &#39;9123456780&#39;,\r\n    notes: {\r\n      address: &#39;Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru&#39;,\r\n    },\r\n    // order_id: &#39;123&#39;,\r\n    method: &#39;netbanking&#39;,\r\n    // method specific fields\r\n    bank: &#39;HDFC&#39;\r\n  };\r\n\r\n  $(&quot;#razorGateway&quot;).click(function() {\r\n    alert(&quot;Payment clicked&quot;);\r\n    // has to be placed within a user-initiated context, such as click, in order for popup to open.\r\n    razorpay.createPayment(data);\r\n\r\n    razorpay.on(&#39;payment.success&#39;, function(resp) {\r\n      alert(&quot;Payment success.&quot;);\r\n      alert(resp.razorpay_payment_id);\r\n      alert(resp.razorpay_order_id);\r\n      alert(resp.razorpay_signature);\r\n    }); // will pass payment ID, order ID, and Razorpay signature to success handler.\r\n\r\n    razorpay.on(&#39;payment.error&#39;, function(resp) {\r\n      alert(resp.error.description);\r\n    }); // will pass error object to error handler\r\n  });\r\n});\r\n&lt;/script&gt;\r\n&lt;body&gt;\r\n  &lt;input type=&quot;button&quot; id=&quot;razorGateway&quot; name=&quot;submit&quot; class=&quot;submit action-button&quot; value=&quot;Pay&quot; /&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n","title":"How I can integrate Razorpay in website using JavaScript or Java?","body":"<p>The Below Code Works.</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;PaymentGateway&lt;/title&gt;\n&lt;/head&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;https://checkout.razorpay.com/v1/razorpay.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt;\n&lt;script&gt;\n$(document).ready(function() {\n  // Single instance on page.\n  var razorpay = new Razorpay({\n    key: 'rzp_test_tCLhPLootU4w3M',\n    // logo, displayed in the payment processing popup\n    image: 'https://i.imgur.com/n5tjHFD.png',\n  });\n\n  // Fetching the payment.\n  razorpay.once('ready', function(response) {\n    console.log(response.methods);\n  });\n\n  // Submitting the data.\n  var data = {\n    amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\n    currency: &quot;INR&quot;, // Default is INR. We support more than 90 currencies.\n    email: 'test.appmomos@gmail.com',\n    contact: '9123456780',\n    notes: {\n      address: 'Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru',\n    },\n    // order_id: '123',\n    method: 'netbanking',\n    // method specific fields\n    bank: 'HDFC'\n  };\n\n  $(&quot;#razorGateway&quot;).click(function() {\n    alert(&quot;Payment clicked&quot;);\n    // has to be placed within a user-initiated context, such as click, in order for popup to open.\n    razorpay.createPayment(data);\n\n    razorpay.on('payment.success', function(resp) {\n      alert(&quot;Payment success.&quot;);\n      alert(resp.razorpay_payment_id);\n      alert(resp.razorpay_order_id);\n      alert(resp.razorpay_signature);\n    }); // will pass payment ID, order ID, and Razorpay signature to success handler.\n\n    razorpay.on('payment.error', function(resp) {\n      alert(resp.error.description);\n    }); // will pass error object to error handler\n  });\n});\n&lt;/script&gt;\n&lt;body&gt;\n  &lt;input type=&quot;button&quot; id=&quot;razorGateway&quot; name=&quot;submit&quot; class=&quot;submit action-button&quot; value=&quot;Pay&quot; /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}],"owner":{"account_id":7888325,"reputation":1,"user_id":5959496,"display_name":"Akshay Gautam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686658210,"creation_date":1581575521,"question_id":60201722,"body_markdown":"I am totally a beginner in payment gateway no idea how to approach it. But I went through Razorpay side and all the other stackoverflow questions and from 2 days I am struggling to integrate the Razorpay gateway in my project. Now I am approaching the payment gateway by using JavaScript.\r\nMy project is a online shopping website which is based on java but I used JavaScript for giving the functionality in the website.\r\n\r\n1. I don&#39;t have any idea about Reactjs and I am trying to integrate the gateway using basic Js.\r\n   directly into the jsp .\r\n\r\n```&lt;head&gt;\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;https://checkout.razorpay.com/v1/razorpay.js&quot;&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n&lt;input type=&quot;button&quot; id=&quot;razorGateway&quot; name=&quot;submit&quot; class=&quot;submit action-button&quot;\r\n\t\t\t\t\t\t\t\t\tvalue=&quot;Pay&quot; /&gt;\r\n&lt;script type=&quot;text/javascript&quot;&gt;\t\r\n\t        var options = {\r\n\t\t    &quot;key&quot;: &quot;rzp_test_1234567UHGSssj&quot;, // Enter the Key ID generated from the Dashboard\r\n\t\t    &quot;amount&quot;: &quot;50000&quot;, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise or INR 500.\r\n\t\t    &quot;currency&quot;: &quot;INR&quot;,\r\n\t\t    &quot;name&quot;: &quot;Acme Corp&quot;,\r\n\t\t    &quot;description&quot;: &quot;Ecommerce&quot;,\r\n\t\t    &quot;image&quot;: &quot;image&quot;,\r\n\t\t    &quot;order_id&quot;: &quot;order_9A33XWu170gUtm&quot;,//This is a sample Order ID. Create an Order using Orders API. (https://razorpay.com/docs/payment-gateway/orders/integration/#step-1-create-an-order). Refer the Checkout form table given below\r\n\t\t    &quot;handler&quot;: function (response){\r\n\t\t        alert(response.razorpay_payment_id);\r\n\t\t    },\r\n\t\t    &quot;prefill&quot;: {\r\n\t\t        &quot;name&quot;: &quot;Gaurav Kumar&quot;,\r\n\t\t        &quot;email&quot;: &quot;gaurav.kumar@example.com&quot;,\r\n\t\t        &quot;contact&quot;: &quot;9999999999&quot;\r\n\t\t    },\r\n\t\t    &quot;notes&quot;: {\r\n\t\t        &quot;address&quot;: &quot;note value&quot;\r\n\t\t    },\r\n\t\t    &quot;theme&quot;: {\r\n\t\t        &quot;color&quot;: &quot;#EA5B29&quot;\r\n\t\t    }\r\n\t\t};\r\n\t    var rzp1 = new window.Razorpay(options);\r\n\t\tdocument.getElementById(&#39;razorGateway&#39;).onclick = function(e){\r\n\t\t    rzp1.open();\r\n\t\t    e.preventDefault();\r\n\t\t}\r\n&lt;/script&gt;\r\n```\r\n\r\nAfter debugging I am getting an error message. rzp1.open().\r\n[Screenshot][1]\r\n\r\n\r\n----------\r\n\r\n\r\nWhen I am not able to integrate with above method I went with another way.\r\n\r\n```\r\n&lt;script&gt;\r\n\t// Single instance on page.\r\n      var razorpay = new Razorpay({\r\n\t  key: &#39;rzp_test_1234567UHGSssj&#39;,\r\n\t    // logo, displayed in the payment processing popup\r\n\t  image: &#39;https://i.imgur.com/n5tjHFD.png&#39;,\r\n\t  });\r\n\t\r\n    //Fetching the payment.\r\n      razorpay.once(&#39;ready&#39;, function(response) {\r\n\t  console.log(response.methods);\r\n\t  })\r\n\t\r\n\t //Submitting the data.\r\n     var data = {\r\n\t\t\t  amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\r\n\t\t\t  currency: &quot;INR&quot;,// Default is INR. We support more than 90 currencies.\r\n\t\t\t  email: &#39;test.appmomos@gmail.com&#39;,\r\n\t\t\t  contact: &#39;9123456780&#39;,\r\n\t\t\t  notes: {\r\n\t\t\t    address: &#39;Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru&#39;,\r\n\t\t\t  },\r\n\t\t\t // order_id: &#39;123&#39;,\r\n\t\t\t  method: &#39;netbanking&#39;,\r\n\t\t\t  // method specific fields\r\n\t\t\t  bank: &#39;HDFC&#39;\r\n     };\r\n\r\n    $(&quot;#razorGateway&quot;).click (function(){\r\n    \talert(&quot;payment clicked&quot;);\r\n  // has to be placed within user initiated context, such as click, in order for popup to open.\r\n     razorpay.createPayment(data);\r\n\r\n\t\t  razorpay.on(&#39;payment.success&#39;, function(resp) {\r\n\t\t\t  alert(&quot;payment checking.&quot;);\r\n\t\t    alert(resp.razorpay_payment_id),\r\n\t\t    alert(resp.razorpay_order_id),\r\n\t\t    alert(resp.razorpay_signature)}); // will pass payment ID, order ID, and Razorpay signature to success handler.\r\n\t\t\r\n\t\t  razorpay.on(&#39;payment.error&#39;, function(resp){alert(resp.error.description)}); // will pass error object to error handler\r\n\r\n})\r\n&lt;/script&gt;\r\n```\r\nHere I am able to hit the razorpay and pop-up is also visible but as it is hard coded I am not able to get the various options of payment method as it is shown in the demo. Directly it is giving me success and fail message(last page of gateway).\r\nhttps://razorpay.com/demo\r\n\r\nThis option I am not getting it.[Different payment methods][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AU3an.png\r\n  [2]: https://i.stack.imgur.com/rnH0b.png\r\n\r\nI will be at cloud no.9 if I get the answer or I am able to integrate it in either way or any other way. If options of integrating in Java is also welcomed. ","title":"How I can integrate Razorpay in website using JavaScript or Java?","body":"<p>I am totally a beginner in payment gateway no idea how to approach it. But I went through Razorpay side and all the other stackoverflow questions and from 2 days I am struggling to integrate the Razorpay gateway in my project. Now I am approaching the payment gateway by using JavaScript.\nMy project is a online shopping website which is based on java but I used JavaScript for giving the functionality in the website.</p>\n\n<ol>\n<li>I don't have any idea about Reactjs and I am trying to integrate the gateway using basic Js.\ndirectly into the jsp .</li>\n</ol>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://checkout.razorpay.com/v1/razorpay.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;input type=\"button\" id=\"razorGateway\" name=\"submit\" class=\"submit action-button\"\n                                    value=\"Pay\" /&gt;\n&lt;script type=\"text/javascript\"&gt; \n            var options = {\n            \"key\": \"rzp_test_1234567UHGSssj\", // Enter the Key ID generated from the Dashboard\n            \"amount\": \"50000\", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise or INR 500.\n            \"currency\": \"INR\",\n            \"name\": \"Acme Corp\",\n            \"description\": \"Ecommerce\",\n            \"image\": \"image\",\n            \"order_id\": \"order_9A33XWu170gUtm\",//This is a sample Order ID. Create an Order using Orders API. (https://razorpay.com/docs/payment-gateway/orders/integration/#step-1-create-an-order). Refer the Checkout form table given below\n            \"handler\": function (response){\n                alert(response.razorpay_payment_id);\n            },\n            \"prefill\": {\n                \"name\": \"Gaurav Kumar\",\n                \"email\": \"gaurav.kumar@example.com\",\n                \"contact\": \"9999999999\"\n            },\n            \"notes\": {\n                \"address\": \"note value\"\n            },\n            \"theme\": {\n                \"color\": \"#EA5B29\"\n            }\n        };\n        var rzp1 = new window.Razorpay(options);\n        document.getElementById('razorGateway').onclick = function(e){\n            rzp1.open();\n            e.preventDefault();\n        }\n&lt;/script&gt;\n</code></pre>\n\n<p>After debugging I am getting an error message. rzp1.open().\n<a href=\"https://i.stack.imgur.com/AU3an.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<hr>\n\n<p>When I am not able to integrate with above method I went with another way.</p>\n\n<pre><code>&lt;script&gt;\n    // Single instance on page.\n      var razorpay = new Razorpay({\n      key: 'rzp_test_1234567UHGSssj',\n        // logo, displayed in the payment processing popup\n      image: 'https://i.imgur.com/n5tjHFD.png',\n      });\n\n    //Fetching the payment.\n      razorpay.once('ready', function(response) {\n      console.log(response.methods);\n      })\n\n     //Submitting the data.\n     var data = {\n              amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\n              currency: \"INR\",// Default is INR. We support more than 90 currencies.\n              email: 'test.appmomos@gmail.com',\n              contact: '9123456780',\n              notes: {\n                address: 'Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru',\n              },\n             // order_id: '123',\n              method: 'netbanking',\n              // method specific fields\n              bank: 'HDFC'\n     };\n\n    $(\"#razorGateway\").click (function(){\n        alert(\"payment clicked\");\n  // has to be placed within user initiated context, such as click, in order for popup to open.\n     razorpay.createPayment(data);\n\n          razorpay.on('payment.success', function(resp) {\n              alert(\"payment checking.\");\n            alert(resp.razorpay_payment_id),\n            alert(resp.razorpay_order_id),\n            alert(resp.razorpay_signature)}); // will pass payment ID, order ID, and Razorpay signature to success handler.\n\n          razorpay.on('payment.error', function(resp){alert(resp.error.description)}); // will pass error object to error handler\n\n})\n&lt;/script&gt;\n</code></pre>\n\n<p>Here I am able to hit the razorpay and pop-up is also visible but as it is hard coded I am not able to get the various options of payment method as it is shown in the demo. Directly it is giving me success and fail message(last page of gateway).\n<a href=\"https://razorpay.com/demo\" rel=\"nofollow noreferrer\">https://razorpay.com/demo</a></p>\n\n<p>This option I am not getting it.<a href=\"https://i.stack.imgur.com/rnH0b.png\" rel=\"nofollow noreferrer\">Different payment methods</a></p>\n\n<p>I will be at cloud no.9 if I get the answer or I am able to integrate it in either way or any other way. If options of integrating in Java is also welcomed. </p>\n"},{"tags":["java","groovy","gremlin","gremlin-java"],"answers":[{"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686658025,"creation_date":1686658025,"answer_id":76464762,"question_id":76463183,"body_markdown":"I think you are running into a variation of this problem: [TINKERPOP-2953](https://issues.apache.org/jira/browse/TINKERPOP-2953)\r\n\r\nBasically, the upgrade that was done to Groovy seemed to change the way that certain imports were loaded and so your `and()` step is being treated like `Operator.and`. This issue should only affect script submission. Bytecode-based requests should not have this problem as they don&#39;t rely on Groovy.\r\n\r\nThe workaround as noted in the issue is to explicitly use the step by using the anonymous traversal class of `__`, as in `__.and(...)`.","title":"No signature of method exception after upgrading Apache Gremlin 3.6.2 to any newer version","body":"<p>I think you are running into a variation of this problem: <a href=\"https://issues.apache.org/jira/browse/TINKERPOP-2953\" rel=\"nofollow noreferrer\">TINKERPOP-2953</a></p>\n<p>Basically, the upgrade that was done to Groovy seemed to change the way that certain imports were loaded and so your <code>and()</code> step is being treated like <code>Operator.and</code>. This issue should only affect script submission. Bytecode-based requests should not have this problem as they don't rely on Groovy.</p>\n<p>The workaround as noted in the issue is to explicitly use the step by using the anonymous traversal class of <code>__</code>, as in <code>__.and(...)</code>.</p>\n"}],"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686658025,"creation_date":1686646128,"question_id":76463183,"body_markdown":"This is an existing project that works properly with Apache Gremlin 3.6.2 but fails to pass unit tests after upgrading to any newer version of Gremlin - 3.6.3 or 3.6.4:\r\n```java\r\n[2023-06-13T11:34:57,445][Warning] [{}] [o.a.t.g.s.o.AbstractEvalOpProcessor]: Exception processing a script on request [RequestMessage{, requestId=31af5d9f-f623-4091-b915-9ff86be97a09, op=&#39;eval&#39;, processor=&#39;&#39;, args={gremlin=g.V(&#39;89885718930341148618906941499288497180&#39;).outE(&#39;related-account&#39;).or(and(has(&#39;effectiveDate&#39;, lte(datetime(&#39;2023-09-13T11:34:56.951Z&#39;))), has(&#39;expirationDate&#39;, gte(datetime(&#39;2023-09-13T11:34:56.951Z&#39;)))),  and(has(&#39;effectiveDate&#39;, lte(datetime(&#39;2023-09-13T11:34:56.951Z&#39;))), hasNot(&#39;expirationDate&#39;))).project(&#39;effectiveDate&#39;, &#39;expirationDate&#39;, &#39;accountId&#39;, &#39;relationTypeCd&#39;, &#39;status&#39;).by(&#39;effectiveDate&#39;).by(coalesce(values(&#39;expirationDate&#39;),constant(null))).by(inV().coalesce(values(&#39;accountId&#39;),constant(null))).by(&#39;relationTypeCd&#39;).by(coalesce(values(&#39;status&#39;),constant(null))).limit(10), batchSize=64}}].\r\ngroovy.lang.MissingMethodException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\r\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\n        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:70) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at Script5.run(Script5.groovy:1) ~[?:?]\r\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:679) ~[gremlin-groovy-3.6.4.jar:3.6.4]\r\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:381) ~[gremlin-groovy-3.6.4.jar:3.6.4]\r\n        at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:233) ~[java.scripting:?]\r\n        at org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.lambda$eval$0(GremlinExecutor.java:272) ~[gremlin-groovy-3.6.4.jar:3.6.4]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at java.lang.Thread.run(Thread.java:834) ~[?:?]\r\n[2023-06-13T11:34:57,467][Error] [{LogCorrelationId=6d9a746e-c465-447e-a6ec-5a9dbf05c253, TenantId=5e9e47c6-9158-4386-b631-29b48da0a7c8}] [c.a.x.p.g.c.NeptuneDbProvider]: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\njava.util.concurrent.ExecutionException: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\r\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\n        at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395) ~[?:?]\r\n        at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999) ~[?:?]\r\n...\r\nCaused by: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\r\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:245) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:200) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:126) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:68) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n```\r\nHow to fix that `No signature of method` exception?","title":"No signature of method exception after upgrading Apache Gremlin 3.6.2 to any newer version","body":"<p>This is an existing project that works properly with Apache Gremlin 3.6.2 but fails to pass unit tests after upgrading to any newer version of Gremlin - 3.6.3 or 3.6.4:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[2023-06-13T11:34:57,445][Warning] [{}] [o.a.t.g.s.o.AbstractEvalOpProcessor]: Exception processing a script on request [RequestMessage{, requestId=31af5d9f-f623-4091-b915-9ff86be97a09, op='eval', processor='', args={gremlin=g.V('89885718930341148618906941499288497180').outE('related-account').or(and(has('effectiveDate', lte(datetime('2023-09-13T11:34:56.951Z'))), has('expirationDate', gte(datetime('2023-09-13T11:34:56.951Z')))),  and(has('effectiveDate', lte(datetime('2023-09-13T11:34:56.951Z'))), hasNot('expirationDate'))).project('effectiveDate', 'expirationDate', 'accountId', 'relationTypeCd', 'status').by('effectiveDate').by(coalesce(values('expirationDate'),constant(null))).by(inV().coalesce(values('accountId'),constant(null))).by('relationTypeCd').by(coalesce(values('status'),constant(null))).limit(10), batchSize=64}}].\ngroovy.lang.MissingMethodException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\nPossible solutions: wait(), name(), any(), values(), find(), dump()\n        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:70) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at Script5.run(Script5.groovy:1) ~[?:?]\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:679) ~[gremlin-groovy-3.6.4.jar:3.6.4]\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:381) ~[gremlin-groovy-3.6.4.jar:3.6.4]\n        at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:233) ~[java.scripting:?]\n        at org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.lambda$eval$0(GremlinExecutor.java:272) ~[gremlin-groovy-3.6.4.jar:3.6.4]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\n        at java.lang.Thread.run(Thread.java:834) ~[?:?]\n[2023-06-13T11:34:57,467][Error] [{LogCorrelationId=6d9a746e-c465-447e-a6ec-5a9dbf05c253, TenantId=5e9e47c6-9158-4386-b631-29b48da0a7c8}] [c.a.x.p.g.c.NeptuneDbProvider]: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\\nPossible solutions: wait(), name(), any(), values(), find(), dump()\njava.util.concurrent.ExecutionException: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\nPossible solutions: wait(), name(), any(), values(), find(), dump()\n        at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395) ~[?:?]\n        at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999) ~[?:?]\n...\nCaused by: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\nPossible solutions: wait(), name(), any(), values(), find(), dump()\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:245) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:200) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:126) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:68) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n</code></pre>\n<p>How to fix that <code>No signature of method</code> exception?</p>\n"},{"tags":["java","unit-testing","enums","togglz"],"answers":[{"comments":[{"owner":{"account_id":1649956,"reputation":528,"user_id":1520749,"accept_rate":10,"display_name":"pannu"},"score":0,"creation_date":1529993384,"post_id":38383556,"comment_id":89063580,"body_markdown":"can we mock parameter with TooglzRule as well ?","body":"can we mock parameter with TooglzRule as well ?"},{"owner":{"account_id":169224,"reputation":5608,"user_id":395181,"display_name":"chkal"},"score":0,"creation_date":1530027621,"post_id":38383556,"comment_id":89084560,"body_markdown":"You are talking about feature strategy parameters? No, in your tests you should just verify that your code works if the feature is on or off. There won&#39;t be any strategy in your test, so parameters make no sense.","body":"You are talking about feature strategy parameters? No, in your tests you should just verify that your code works if the feature is on or off. There won&#39;t be any strategy in your test, so parameters make no sense."},{"owner":{"account_id":4710848,"reputation":435,"user_id":3811390,"accept_rate":100,"display_name":"jack"},"score":0,"creation_date":1552585593,"post_id":38383556,"comment_id":97077328,"body_markdown":"This would result in flaky test cases, as unit tests can run in parallel and this TogglzRule has static behaviour.","body":"This would result in flaky test cases, as unit tests can run in parallel and this TogglzRule has static behaviour."}],"tags":[],"owner":{"account_id":169224,"reputation":5608,"user_id":395181,"display_name":"chkal"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1468527532,"creation_date":1468527532,"answer_id":38383556,"question_id":38380837,"body_markdown":"You don&#39;t need to mock anything. Togglz ships with a special module for unit testing feature toggles. Have a look here:\r\n\r\nhttp://www.togglz.org/documentation/testing.html\r\n\r\nThere is for example a JUnit rule which provides a simple way to toggle features:\r\n\r\n    public class SomeJunitTest {\r\n    \r\n      @Rule\r\n      public TogglzRule togglzRule = TogglzRule.allEnabled(MyFeatures.class);\r\n    \r\n      @Test\r\n      public void testToggleFeature() {\r\n    \r\n        // all features are active by default  \r\n        assertTrue(MyFeatures.FEATURE_ONE.isActive());\r\n    \r\n        // you can easily modify the feature state using the TogglzRule\r\n        togglzRule.disable(MyFeatures.FEATURE_ONE);\r\n        assertFalse(MyFeatures.FEATURE_ONE.isActive());\r\n    \r\n      }\r\n    \r\n    }","title":"Unit test for togglz feature on and off","body":"<p>You don't need to mock anything. Togglz ships with a special module for unit testing feature toggles. Have a look here:</p>\n\n<p><a href=\"http://www.togglz.org/documentation/testing.html\" rel=\"noreferrer\">http://www.togglz.org/documentation/testing.html</a></p>\n\n<p>There is for example a JUnit rule which provides a simple way to toggle features:</p>\n\n<pre><code>public class SomeJunitTest {\n\n  @Rule\n  public TogglzRule togglzRule = TogglzRule.allEnabled(MyFeatures.class);\n\n  @Test\n  public void testToggleFeature() {\n\n    // all features are active by default  \n    assertTrue(MyFeatures.FEATURE_ONE.isActive());\n\n    // you can easily modify the feature state using the TogglzRule\n    togglzRule.disable(MyFeatures.FEATURE_ONE);\n    assertFalse(MyFeatures.FEATURE_ONE.isActive());\n\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12633381,"reputation":449,"user_id":9183844,"display_name":"dos4dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621461086,"creation_date":1621461086,"answer_id":67611373,"question_id":38380837,"body_markdown":"    featureManager.setFeatureState(new FeatureState(MyFeatures.FOO, true))\r\n\r\n[FeatureManager][1] \r\n\r\n\r\n  [1]: https://github.com/togglz/togglz/blob/1008527c088ba857cfc4371342aee6ebfd410fbf/core/src/main/java/org/togglz/core/manager/FeatureManager.java#L23","title":"Unit test for togglz feature on and off","body":"<pre><code>featureManager.setFeatureState(new FeatureState(MyFeatures.FOO, true))\n</code></pre>\n<p><a href=\"https://github.com/togglz/togglz/blob/1008527c088ba857cfc4371342aee6ebfd410fbf/core/src/main/java/org/togglz/core/manager/FeatureManager.java#L23\" rel=\"nofollow noreferrer\">FeatureManager</a></p>\n"},{"comments":[{"owner":{"account_id":1521806,"reputation":11725,"user_id":1421254,"accept_rate":100,"display_name":"Dmitriusan"},"score":1,"creation_date":1654245408,"post_id":71497148,"comment_id":128049789,"body_markdown":"While the comment overall is useful, the mentioned togglz-junit5 dependency is wrong. It has been stuck on outdated 2.8.0 version, and official documentation https://www.togglz.org/documentation/testing.html  mentions using togglz-junit dependency instead (without *5 suffix)","body":"While the comment overall is useful, the mentioned togglz-junit5 dependency is wrong. It has been stuck on outdated 2.8.0 version, and official documentation <a href=\"https://www.togglz.org/documentation/testing.html\" rel=\"nofollow noreferrer\">togglz.org/documentation/testing.html</a>  mentions using togglz-junit dependency instead (without *5 suffix)"},{"owner":{"account_id":2136170,"reputation":112,"user_id":1895900,"display_name":"Daan Callaert"},"score":0,"creation_date":1654693465,"post_id":71497148,"comment_id":128151589,"body_markdown":"Thanks for reporting this, I included your remark in the original post.","body":"Thanks for reporting this, I included your remark in the original post."}],"tags":[],"owner":{"account_id":2136170,"reputation":112,"user_id":1895900,"display_name":"Daan Callaert"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654693408,"creation_date":1647433963,"answer_id":71497148,"question_id":38380837,"body_markdown":"Since the JUnit5 implementation of the Togglz test library, it is even easier to perform this by using an annotation.\r\n\r\n**maven dependency**\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.togglz&lt;/groupId&gt;\r\n        &lt;artifactId&gt;togglz-junit&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**JUnit 5 test code using the Togglz annotations**\r\n\r\n    @Test\r\n    @AllEnabled(MyFeature.class)\r\n    void isActive_whenEnabled() {\r\n        Assertions.assertThat(MyFeature.ONE.isActive()).isTrue();\r\n    }\r\n\r\n    @Test\r\n    @AllDisabled(MyFeature.class)\r\n    void isActive_whenDisabled() {\r\n        Assertions.assertThat(MyFeature.ONE.isActive()).isFalse();\r\n    }\r\n\r\n","title":"Unit test for togglz feature on and off","body":"<p>Since the JUnit5 implementation of the Togglz test library, it is even easier to perform this by using an annotation.</p>\n<p><strong>maven dependency</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.togglz&lt;/groupId&gt;\n    &lt;artifactId&gt;togglz-junit&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>JUnit 5 test code using the Togglz annotations</strong></p>\n<pre><code>@Test\n@AllEnabled(MyFeature.class)\nvoid isActive_whenEnabled() {\n    Assertions.assertThat(MyFeature.ONE.isActive()).isTrue();\n}\n\n@Test\n@AllDisabled(MyFeature.class)\nvoid isActive_whenDisabled() {\n    Assertions.assertThat(MyFeature.ONE.isActive()).isFalse();\n}\n</code></pre>\n"}],"owner":{"account_id":2415940,"reputation":539,"user_id":2109943,"accept_rate":44,"display_name":"dunfa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6570,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":38383556,"answer_count":3,"score":7,"last_activity_date":1686657660,"creation_date":1468518250,"question_id":38380837,"body_markdown":"We are using Togglz to turn functionalities on and off in our project. The following TogglzFeature Enum is implementing org.togglz.core.Feature interface\r\n\r\n    public enum TogglzFeature implements Feature {\r\n    \r\n        @EnabledByDefault\r\n        @Label(&quot;Current XSLT code&quot;)\r\n        FEATURE_XSLT,\r\n    \r\n        @Label(&quot;NEW JAXB code&quot;)\r\n        FEATURE_JAXB;\r\n    \r\n        public boolean isActive() {\r\n            FeatureManager manager = FeatureContext.getFeatureManager();\r\n            return manager.isActive(this);\r\n        }\r\n    \r\n    }\r\n\r\nThen one of the methods under test (say `mut_1(params)`) is checking the enum, something like \r\n  \r\n\r\n    if(TogglzFeature.FEATURE_JAXB.isActive()) { dothings();}\r\n\r\nNote that togglz feature is not in the params of mut_1. The mut_1 just picks it up from context in runtime.\r\n\r\nSo what is the best way to let the mut_1() know that I want `TogglzFeature.FEATURE_JAXB.isActive()` to return true?\r\n\r\nI tried this with Mockito/PowerMock\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({TogglzFeature.class})\r\n    public class myTestClass {\r\n    \r\n    \t//private members and set up\r\n    \r\n    \t@Test\r\n    \tpublic void testTogglz(){\r\n    \t\tPowerMockito.mockStatic(TogglzFeature.class);\r\n    \t\tBDDMockito.given(TogglzFeature.FEATURE_JAXB.isActive()).willReturn(true);\r\n    \t\t\r\n    \t\t//execution and verification\r\n    \t}\r\n    }\r\n\r\nAnd the system spits all these on me\r\n\r\n    java.lang.VerifyError: Inconsistent stackmap frames at branch target 128\r\n    Exception Details:\r\n      Location:\r\n        com/lmig/ci/rate/togglz/TogglzFeature.values()[Lcom/lmig/ci/rate/togglz/TogglzFeature; @128: ldc\r\n      Reason:\r\n        Type &#39;java/lang/Object&#39; (current frame, locals[1]) is not assignable to &#39;[Lcom/lmig/ci/rate/togglz/TogglzFeature;&#39; (stack map, locals[1])\r\n      Current Frame:\r\n        bci: @120\r\n        flags: { }\r\n        locals: { top, &#39;java/lang/Object&#39;, null, null }\r\n        stack: { &#39;java/lang/Object&#39;, null }\r\n      Stackmap Frame:\r\n        bci: @128\r\n        flags: { }\r\n        locals: { top, &#39;[Lcom/lmig/ci/rate/togglz/TogglzFeature;&#39; }\r\n        stack: { }\r\n      Bytecode:\r\n        0x0000000: 1248 b800 4e12 4f03 bd00 5112 53b8 0057\r\n        0x0000010: 1259 b800 5f4b 2a01 4c01 4d2b 127e b800\r\n        0x0000020: 8012 8112 82b8 0085 b800 894e 2db2 0063\r\n        0x0000030: a600 0ab2 0063 4da7 0008 2dc0 008a 4d2c\r\n        0x0000040: a500 082a c000 64b0 014c 014d 2b12 8bb8\r\n        0x0000050: 0080 128c 128d b800 85b8 0089 4e2d b200\r\n        0x0000060: 63a6 000a b200 014d a700 082d c000 644d\r\n        0x0000070: 2c4c 014d 014e 2b01 a500 082b 4ea7 0009\r\n        0x0000080: 128f b800 804e 2d12 9003 bd00 5112 91b8\r\n        0x0000090: 0093 1295 b800 963a 0419 04b2 0063 a600\r\n        0x00000a0: 0b2b b600 984d a700 0919 04c0 008a 4d2c\r\n        0x00000b0: c000 03b0                              \r\n      Stackmap Table:\r\n        full_frame(@58,{Object[#81],Top,Top,Object[#81]},{Object[#81]})\r\n        full_frame(@63,{Object[#81],Top,Object[#81]},{Object[#81]})\r\n        chop_frame(@72,3)\r\n        full_frame(@107,{Top,Top,Top,Object[#81]},{})\r\n        full_frame(@112,{Top,Top,Object[#81]},{})\r\n        full_frame(@128,{Top,Object[#50]},{})\r\n        append_frame(@134,Top,Object[#81])\r\n        full_frame(@169,{Top,Top,Top,Top,Object[#81]},{})\r\n        full_frame(@175,{Top,Top,Object[#81]},{})\r\n    \r\n    \tat java.lang.Class.getDeclaredConstructors0(Native Method)\r\n    \tat java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\r\n    \tat java.lang.Class.getDeclaredConstructors(Class.java:2020)\r\n    \tat org.powermock.api.mockito.repackaged.ClassImposterizer.setConstructorsAccessible(ClassImposterizer.java:86)\r\n    \tat org.powermock.api.mockito.repackaged.ClassImposterizer.imposterise(ClassImposterizer.java:72)\r\n    \tat org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:122)\r\n    \tat org.powermock.api.mockito.internal.mockcreation.MockCreator.createMock(MockCreator.java:70)\r\n    \tat org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:47)\r\n    \tat org.powermock.api.mockito.PowerMockito.mockStatic(PowerMockito.java:71)\r\n    \tat com.lmig.ci.rate.orchestration.OrchestratorTest.workerCompShouldGoThroughSteppedAudit(OrchestratorTest.java:97)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:316)\r\n    \tat org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\r\n    \tat org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:300)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)\r\n    \tat org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\r\n    \tat org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)\r\n    \tat org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\r\n    \tat org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)\r\n    \tat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)\r\n    \tat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\r\n    \tat org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\r\n\r\n","title":"Unit test for togglz feature on and off","body":"<p>We are using Togglz to turn functionalities on and off in our project. The following TogglzFeature Enum is implementing org.togglz.core.Feature interface</p>\n\n<pre><code>public enum TogglzFeature implements Feature {\n\n    @EnabledByDefault\n    @Label(\"Current XSLT code\")\n    FEATURE_XSLT,\n\n    @Label(\"NEW JAXB code\")\n    FEATURE_JAXB;\n\n    public boolean isActive() {\n        FeatureManager manager = FeatureContext.getFeatureManager();\n        return manager.isActive(this);\n    }\n\n}\n</code></pre>\n\n<p>Then one of the methods under test (say <code>mut_1(params)</code>) is checking the enum, something like </p>\n\n<pre><code>if(TogglzFeature.FEATURE_JAXB.isActive()) { dothings();}\n</code></pre>\n\n<p>Note that togglz feature is not in the params of mut_1. The mut_1 just picks it up from context in runtime.</p>\n\n<p>So what is the best way to let the mut_1() know that I want <code>TogglzFeature.FEATURE_JAXB.isActive()</code> to return true?</p>\n\n<p>I tried this with Mockito/PowerMock</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({TogglzFeature.class})\npublic class myTestClass {\n\n    //private members and set up\n\n    @Test\n    public void testTogglz(){\n        PowerMockito.mockStatic(TogglzFeature.class);\n        BDDMockito.given(TogglzFeature.FEATURE_JAXB.isActive()).willReturn(true);\n\n        //execution and verification\n    }\n}\n</code></pre>\n\n<p>And the system spits all these on me</p>\n\n<pre><code>java.lang.VerifyError: Inconsistent stackmap frames at branch target 128\nException Details:\n  Location:\n    com/lmig/ci/rate/togglz/TogglzFeature.values()[Lcom/lmig/ci/rate/togglz/TogglzFeature; @128: ldc\n  Reason:\n    Type 'java/lang/Object' (current frame, locals[1]) is not assignable to '[Lcom/lmig/ci/rate/togglz/TogglzFeature;' (stack map, locals[1])\n  Current Frame:\n    bci: @120\n    flags: { }\n    locals: { top, 'java/lang/Object', null, null }\n    stack: { 'java/lang/Object', null }\n  Stackmap Frame:\n    bci: @128\n    flags: { }\n    locals: { top, '[Lcom/lmig/ci/rate/togglz/TogglzFeature;' }\n    stack: { }\n  Bytecode:\n    0x0000000: 1248 b800 4e12 4f03 bd00 5112 53b8 0057\n    0x0000010: 1259 b800 5f4b 2a01 4c01 4d2b 127e b800\n    0x0000020: 8012 8112 82b8 0085 b800 894e 2db2 0063\n    0x0000030: a600 0ab2 0063 4da7 0008 2dc0 008a 4d2c\n    0x0000040: a500 082a c000 64b0 014c 014d 2b12 8bb8\n    0x0000050: 0080 128c 128d b800 85b8 0089 4e2d b200\n    0x0000060: 63a6 000a b200 014d a700 082d c000 644d\n    0x0000070: 2c4c 014d 014e 2b01 a500 082b 4ea7 0009\n    0x0000080: 128f b800 804e 2d12 9003 bd00 5112 91b8\n    0x0000090: 0093 1295 b800 963a 0419 04b2 0063 a600\n    0x00000a0: 0b2b b600 984d a700 0919 04c0 008a 4d2c\n    0x00000b0: c000 03b0                              \n  Stackmap Table:\n    full_frame(@58,{Object[#81],Top,Top,Object[#81]},{Object[#81]})\n    full_frame(@63,{Object[#81],Top,Object[#81]},{Object[#81]})\n    chop_frame(@72,3)\n    full_frame(@107,{Top,Top,Top,Object[#81]},{})\n    full_frame(@112,{Top,Top,Object[#81]},{})\n    full_frame(@128,{Top,Object[#50]},{})\n    append_frame(@134,Top,Object[#81])\n    full_frame(@169,{Top,Top,Top,Top,Object[#81]},{})\n    full_frame(@175,{Top,Top,Object[#81]},{})\n\n    at java.lang.Class.getDeclaredConstructors0(Native Method)\n    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\n    at java.lang.Class.getDeclaredConstructors(Class.java:2020)\n    at org.powermock.api.mockito.repackaged.ClassImposterizer.setConstructorsAccessible(ClassImposterizer.java:86)\n    at org.powermock.api.mockito.repackaged.ClassImposterizer.imposterise(ClassImposterizer.java:72)\n    at org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:122)\n    at org.powermock.api.mockito.internal.mockcreation.MockCreator.createMock(MockCreator.java:70)\n    at org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:47)\n    at org.powermock.api.mockito.PowerMockito.mockStatic(PowerMockito.java:71)\n    at com.lmig.ci.rate.orchestration.OrchestratorTest.workerCompShouldGoThroughSteppedAudit(OrchestratorTest.java:97)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:316)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:300)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)\n    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)\n    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\n    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\n</code></pre>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":25838667,"reputation":322,"user_id":19574650,"display_name":"I.sh."},"score":1,"creation_date":1686519304,"post_id":76451803,"comment_id":134805772,"body_markdown":"First of all it sounds like you didn&#39;t tried to debug it. sec, share with us the website link if you can.","body":"First of all it sounds like you didn&#39;t tried to debug it. sec, share with us the website link if you can."},{"owner":{"account_id":23420907,"reputation":64,"user_id":17481130,"display_name":"VondeTaconadis"},"score":0,"creation_date":1686657706,"post_id":76451803,"comment_id":134826412,"body_markdown":"@I.sh. I updated the post with the link","body":"@I.sh. I updated the post with the link"}],"owner":{"account_id":23420907,"reputation":64,"user_id":17481130,"display_name":"VondeTaconadis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686657653,"creation_date":1686506520,"question_id":76451803,"body_markdown":"I&#39;m trying to get the html code from a page.\r\nThe page has javascript, but if I try to disable it in my broswer I see in the HTML source code that the elements I&#39;m searching exists (but there are not in the String that I get in return from Selenium)\r\nI tried also doing a GET request with postman and the html that I get back is correct (and also different from the one I get from Selenium)\r\n\r\nWhen running the code, Selenium succesful opens the broswer and show me the page, if I do f12 and copy the html, the html code is corrected, but if I try to get it from the code with driver.getSourcePage() the string i get back is not correct.\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Program Files\\\\chromedriver\\\\chromedriver.exe&quot;);\r\n                ChromeOptions options = new ChromeOptions();\r\n               // options.addArguments(&quot;--headless=new&quot;);\r\n                WebDriver driver = new ChromeDriver(options);\r\n    \r\n                driver.get(link);\r\n                Thread.sleep(5000);\r\n                WebElement acceptButton = driver.findElement(By.className(&quot;cookie-alert-extended-button&quot;));\r\n                acceptButton.click();\r\n                System.out.println(driver.getPageSource());\r\n\r\nEverything works fine, even the accept cookie button, but on the System.out.println the html page that I get doesen&#39;t have the thing I need \r\n(The page is fully loaded, because between the time of thread sleep if I copy the html code before the cookie button is clicked, I can see that the html code is full and correct, but when the code resume and the button is clicked, if I check my console the html code that I get is not correct.\r\n\r\n\r\nVERSION OF MY CHROME: 114.0.5735.110\r\n\r\nVERSION OF CHROMEDRIVER: 114.0.5735.90 (the latest avaiable on the chromedriver website)\r\n\r\nWebsite I&#39;m trying to get: https://www.lidl.it/c/le-offerte-per-la-tua-spesa/a10019307?tabCode=Current_Sales_Week\r\n(the products that are in sales)","title":"Java selenium getPageSource() doesen&#39;t return full page","body":"<p>I'm trying to get the html code from a page.\nThe page has javascript, but if I try to disable it in my broswer I see in the HTML source code that the elements I'm searching exists (but there are not in the String that I get in return from Selenium)\nI tried also doing a GET request with postman and the html that I get back is correct (and also different from the one I get from Selenium)</p>\n<p>When running the code, Selenium succesful opens the broswer and show me the page, if I do f12 and copy the html, the html code is corrected, but if I try to get it from the code with driver.getSourcePage() the string i get back is not correct.</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Program Files\\\\chromedriver\\\\chromedriver.exe&quot;);\n            ChromeOptions options = new ChromeOptions();\n           // options.addArguments(&quot;--headless=new&quot;);\n            WebDriver driver = new ChromeDriver(options);\n\n            driver.get(link);\n            Thread.sleep(5000);\n            WebElement acceptButton = driver.findElement(By.className(&quot;cookie-alert-extended-button&quot;));\n            acceptButton.click();\n            System.out.println(driver.getPageSource());\n</code></pre>\n<p>Everything works fine, even the accept cookie button, but on the System.out.println the html page that I get doesen't have the thing I need\n(The page is fully loaded, because between the time of thread sleep if I copy the html code before the cookie button is clicked, I can see that the html code is full and correct, but when the code resume and the button is clicked, if I check my console the html code that I get is not correct.</p>\n<p>VERSION OF MY CHROME: 114.0.5735.110</p>\n<p>VERSION OF CHROMEDRIVER: 114.0.5735.90 (the latest avaiable on the chromedriver website)</p>\n<p>Website I'm trying to get: <a href=\"https://www.lidl.it/c/le-offerte-per-la-tua-spesa/a10019307?tabCode=Current_Sales_Week\" rel=\"nofollow noreferrer\">https://www.lidl.it/c/le-offerte-per-la-tua-spesa/a10019307?tabCode=Current_Sales_Week</a>\n(the products that are in sales)</p>\n"},{"tags":["java","virtual-reality","oculusquest"],"owner":{"account_id":2806607,"reputation":6517,"user_id":2413722,"accept_rate":91,"display_name":"Enijar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686657617,"creation_date":1686657617,"question_id":76464713,"body_markdown":"I have a web app that I am trying to wrap inside an SDK. I already have the app wrapped in the [official APK wrapper](https://developer.oculus.com/documentation/web/pwa-packaging/), which just loads the web app remotely. \r\n\r\nI&#39;m now building my own APK wrapper using a WebView. The app works fine, but when I add the required AndroidManifest.xml settings of `&lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;`, the app loads with a black screen and three animating dots. [This is the only relevant resource](https://communityforums.atmeta.com/t5/Get-Help/Black-screen-with-3-dots-FIX-maybe/m-p/988297/highlight/true#M152106) on the community forum, but isn&#39;t helpful as the HTML I&#39;m loading is just `&lt;h1&gt;Test&lt;/h1&gt;` from a local HTML file in the assets folder.\r\n\r\nDoes anyone know if this is a bug on Oculus Quest 2 devices or something I&#39;m doing wrong?\r\n\r\nRelevant code:\r\n\r\n**AndroidManifest.xml**\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.enijar.test&quot;\r\n    android:excludeFromRecents=&quot;true&quot; android:installLocation=&quot;auto&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.vr.headtracking&quot; android:required=&quot;true&quot;\r\n        android:version=&quot;1&quot; /&gt;\r\n    &lt;application android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot; android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar.FullScreen&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot; android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;landscape&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;!-- This is the line that causes the infinite loading screen --&gt;\r\n                &lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\n**MainActivity.java**\r\n\r\n```java\r\npackage com.enijar.test;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    WebView webView;\r\n\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        webView = findViewById(R.id.myWebView);\r\n        WebSettings webSettings = webView.getSettings();\r\n        webSettings.setBuiltInZoomControls(true);\r\n        webSettings.setJavaScriptEnabled(true);\r\n        webView.setWebViewClient(new Callback());\r\n        webView.loadUrl(&quot;file:///android_asset/index.html&quot;);\r\n    }\r\n\r\n    private static class Callback extends WebViewClient {\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (webView != null &amp;&amp; webView.canGoBack()) {\r\n            webView.goBack();\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**assets/index.html**\r\n\r\n```html\r\n&lt;h1&gt;Test&lt;/h1&gt;\r\n```","title":"Load a web app inside a WebView on the Oculus Quest 2 VR headset","body":"<p>I have a web app that I am trying to wrap inside an SDK. I already have the app wrapped in the <a href=\"https://developer.oculus.com/documentation/web/pwa-packaging/\" rel=\"nofollow noreferrer\">official APK wrapper</a>, which just loads the web app remotely.</p>\n<p>I'm now building my own APK wrapper using a WebView. The app works fine, but when I add the required AndroidManifest.xml settings of <code>&lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;</code>, the app loads with a black screen and three animating dots. <a href=\"https://communityforums.atmeta.com/t5/Get-Help/Black-screen-with-3-dots-FIX-maybe/m-p/988297/highlight/true#M152106\" rel=\"nofollow noreferrer\">This is the only relevant resource</a> on the community forum, but isn't helpful as the HTML I'm loading is just <code>&lt;h1&gt;Test&lt;/h1&gt;</code> from a local HTML file in the assets folder.</p>\n<p>Does anyone know if this is a bug on Oculus Quest 2 devices or something I'm doing wrong?</p>\n<p>Relevant code:</p>\n<p><strong>AndroidManifest.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.enijar.test&quot;\n    android:excludeFromRecents=&quot;true&quot; android:installLocation=&quot;auto&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.vr.headtracking&quot; android:required=&quot;true&quot;\n        android:version=&quot;1&quot; /&gt;\n    &lt;application android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot; android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar.FullScreen&quot;\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot; android:exported=&quot;true&quot;\n            android:screenOrientation=&quot;landscape&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;!-- This is the line that causes the infinite loading screen --&gt;\n                &lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p><strong>MainActivity.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.enijar.test;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\npublic class MainActivity extends AppCompatActivity {\n    WebView webView;\n\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        webView = findViewById(R.id.myWebView);\n        WebSettings webSettings = webView.getSettings();\n        webSettings.setBuiltInZoomControls(true);\n        webSettings.setJavaScriptEnabled(true);\n        webView.setWebViewClient(new Callback());\n        webView.loadUrl(&quot;file:///android_asset/index.html&quot;);\n    }\n\n    private static class Callback extends WebViewClient {\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            return false;\n        }\n    }\n\n    @Override\n    public void onBackPressed() {\n        if (webView != null &amp;&amp; webView.canGoBack()) {\n            webView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n}\n</code></pre>\n<p><strong>assets/index.html</strong></p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;Test&lt;/h1&gt;\n</code></pre>\n"},{"tags":["java","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686657535,"creation_date":1686657535,"answer_id":76464704,"question_id":76456241,"body_markdown":"There is one way to do so by creating `ExchangeFilterFunction` to handle server error, and there define retry strategy. Although, it sounds great there are some kickbacks. Finally, I came up with solution based on https://stackoverflow.com/questions/50752021/adding-a-retry-all-requests-of-webclient \r\n","title":"Reactor HttpClient with retry strategy","body":"<p>There is one way to do so by creating <code>ExchangeFilterFunction</code> to handle server error, and there define retry strategy. Although, it sounds great there are some kickbacks. Finally, I came up with solution based on <a href=\"https://stackoverflow.com/questions/50752021/adding-a-retry-all-requests-of-webclient\">Adding a retry all requests of WebClient</a></p>\n"}],"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686657535,"creation_date":1686569462,"question_id":76456241,"body_markdown":"Right now I define retry strategy for each webClient call (like below) \r\n```\r\n    public ModelResponse exampleMethod() {\r\n\r\n        return webClient\r\n                .get()\r\n                .uri(&quot;/example&quot;)\r\n                .retrieve()\r\n                .bodyToMono(ModelResponse.class)\r\n                .retryWhen(Retry.backoff(3, Duration.ofSeconds(1))\r\n                        .filter(throwable -&gt; throwable instanceof WebClientResponseException\r\n                                &amp;&amp; ((WebClientResponseException) throwable).getStatusCode().is5xxServerError()))\r\n                .block();\r\n    }\r\n```\r\n\r\nI&#39;d like to share the same retry strategy among all WebClients calls (for different methods and http requests).  \r\n\r\nIs it possible to set retry strategy on `reactor.netty.http.client.HttpClient` and then use it to create `WebClient` ? \r\n","title":"Reactor HttpClient with retry strategy","body":"<p>Right now I define retry strategy for each webClient call (like below)</p>\n<pre><code>    public ModelResponse exampleMethod() {\n\n        return webClient\n                .get()\n                .uri(&quot;/example&quot;)\n                .retrieve()\n                .bodyToMono(ModelResponse.class)\n                .retryWhen(Retry.backoff(3, Duration.ofSeconds(1))\n                        .filter(throwable -&gt; throwable instanceof WebClientResponseException\n                                &amp;&amp; ((WebClientResponseException) throwable).getStatusCode().is5xxServerError()))\n                .block();\n    }\n</code></pre>\n<p>I'd like to share the same retry strategy among all WebClients calls (for different methods and http requests).</p>\n<p>Is it possible to set retry strategy on <code>reactor.netty.http.client.HttpClient</code> and then use it to create <code>WebClient</code> ?</p>\n"},{"tags":["java","android","broadcastreceiver","android-wifi","android-networking"],"comments":[{"owner":{"account_id":99491,"reputation":9093,"user_id":713789,"accept_rate":90,"display_name":"Anirudha Gupta"},"score":1,"creation_date":1364540922,"post_id":15698790,"comment_id":22292350,"body_markdown":"Please check http://stackoverflow.com/questions/10273614/why-is-my-broadcastreceiver-receiving-action-user-present-twice","body":"Please check <a href=\"http://stackoverflow.com/questions/10273614/why-is-my-broadcastreceiver-receiving-action-user-present-twice\" title=\"why is my broadcastreceiver receiving action user present twice\">stackoverflow.com/questions/10273614/&hellip;</a>"},{"owner":{"account_id":2922622,"reputation":1030,"user_id":2504569,"accept_rate":20,"display_name":"Lucky Rana"},"score":0,"creation_date":1561318035,"post_id":15698790,"comment_id":100014104,"body_markdown":"Try this library, all works so smoothly. https://github.com/andrefio/Rx.Network","body":"Try this library, all works so smoothly. <a href=\"https://github.com/andrefio/Rx.Network\" rel=\"nofollow noreferrer\">github.com/andrefio/Rx.Network</a>"}],"answers":[{"comments":[{"owner":{"account_id":1299099,"reputation":26248,"user_id":2218452,"accept_rate":36,"display_name":"Nikhil Agrawal"},"score":0,"creation_date":1364623090,"post_id":15700728,"comment_id":22321474,"body_markdown":"No my second Query is I want notification when only the network is available but if the phone is loosing the network then to it is notifying me.","body":"No my second Query is I want notification when only the network is available but if the phone is loosing the network then to it is notifying me."},{"owner":{"account_id":1109086,"reputation":2201,"user_id":1099884,"accept_rate":60,"display_name":"Yeung"},"score":8,"creation_date":1367997429,"post_id":15700728,"comment_id":23570145,"body_markdown":"same here. I just have `&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;` registered but my receiver still get called twice. It is not really big problem but I would like to know why.","body":"same here. I just have <code>&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; &#47;&gt;</code> registered but my receiver still get called twice. It is not really big problem but I would like to know why."},{"owner":{"account_id":3531083,"reputation":6261,"user_id":2950618,"accept_rate":43,"display_name":"Josh"},"score":1,"creation_date":1405418855,"post_id":15700728,"comment_id":38408286,"body_markdown":"I am familiar with all of this , but I have doubts. I did some tests and found out that these broadcast receivers detect if your wifi / phone radio goes ON or OFF, or simply, if your device has an IP address. The problem comes when for example my phone is connected to a WiFi access point but such access point has no Internet. The code/phone tell me it a data connection regardless if the access point is providing it with Internet or Not. Does anybody know how to create a real Data-Internet listener, not just a WiFI/On/Off Listener?","body":"I am familiar with all of this , but I have doubts. I did some tests and found out that these broadcast receivers detect if your wifi / phone radio goes ON or OFF, or simply, if your device has an IP address. The problem comes when for example my phone is connected to a WiFi access point but such access point has no Internet. The code/phone tell me it a data connection regardless if the access point is providing it with Internet or Not. Does anybody know how to create a real Data-Internet listener, not just a WiFI/On/Off Listener?"},{"owner":{"account_id":948610,"reputation":13558,"user_id":975292,"accept_rate":85,"display_name":"Seshu Vinay"},"score":6,"creation_date":1405666035,"post_id":15700728,"comment_id":38527976,"body_markdown":"@JosueGalindo onReceiving, you can use this code to know if device is connected to internet http://pastebin.com/dV3pJjkm","body":"@JosueGalindo onReceiving, you can use this code to know if device is connected to internet <a href=\"http://pastebin.com/dV3pJjkm\" rel=\"nofollow noreferrer\">pastebin.com/dV3pJjkm</a>"},{"owner":{"account_id":1233554,"reputation":4946,"user_id":1197638,"accept_rate":54,"display_name":"erik"},"score":0,"creation_date":1429880250,"post_id":15700728,"comment_id":47822091,"body_markdown":"does this really check if the internet is available? or if it is just connected to a network where internet SHOULD be available.. if it is connected to a wifi network for instance that doesn&#39;t have an internet connection won&#39;t this still return true?","body":"does this really check if the internet is available? or if it is just connected to a network where internet SHOULD be available.. if it is connected to a wifi network for instance that doesn&#39;t have an internet connection won&#39;t this still return true?"},{"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"score":0,"creation_date":1432652161,"post_id":15700728,"comment_id":49004618,"body_markdown":"@erik Yes, you will have to check directly if you want to access a specific internet site/service.","body":"@erik Yes, you will have to check directly if you want to access a specific internet site/service."},{"owner":{"account_id":1387192,"reputation":61110,"user_id":1318946,"accept_rate":52,"display_name":"Pratik Butani"},"score":2,"creation_date":1478857852,"post_id":15700728,"comment_id":68329023,"body_markdown":"*Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.* now ????","body":"<i>Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.</i> now ????"},{"owner":{"account_id":9207807,"reputation":1207,"user_id":6842344,"display_name":"ParSa"},"score":0,"creation_date":1588342188,"post_id":15700728,"comment_id":108865521,"body_markdown":"netInfo.isConnected() is deprecated now","body":"netInfo.isConnected() is deprecated now"}],"tags":[],"owner":{"display_name":"user1381827"},"comment_count":8,"down_vote_count":1,"up_vote_count":256,"is_accepted":true,"score":255,"last_activity_date":1686654484,"creation_date":1364549975,"answer_id":15700728,"question_id":15698790,"body_markdown":"**Answer to your first question**: Your broadcast receiver is being called two times because \r\n\r\nYou have added two `&lt;intent-filter&gt;` \r\n\r\n1. Change in network connection :  \r\n`&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;`\r\n\r\n2. Change in WiFi state:  \r\n`&lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;`\r\n\r\nJust use one:  \r\n `&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;`.\r\n\r\nIt will respond to only one action instead of two. See [here][1] for more information.\r\n\r\n\r\n**Answer to your second question** (you want the receiver to call only one time if an internet connection is available):\r\n\r\nYour code is perfect; you notify only when the internet is available.\r\n\r\n**UPDATE**\r\n\r\nYou can use this method to check your connectivity if you want just to check whether your mobile is connected to the internet or not.\r\n\r\n    public boolean isOnline(Context context) {\r\n      \r\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n        //should check null because in airplane mode it will be a null\r\n        return (netInfo != null &amp;&amp; netInfo.isConnected());\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/15546897/1168654","title":"Broadcast receiver for checking internet connection in android app","body":"<p><strong>Answer to your first question</strong>: Your broadcast receiver is being called two times because</p>\n<p>You have added two <code>&lt;intent-filter&gt;</code></p>\n<ol>\n<li><p>Change in network connection :<br />\n<code>&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;</code></p>\n</li>\n<li><p>Change in WiFi state:<br />\n<code>&lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;</code></p>\n</li>\n</ol>\n<p>Just use one:<br />\n<code>&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;</code>.</p>\n<p>It will respond to only one action instead of two. See <a href=\"https://stackoverflow.com/a/15546897/1168654\">here</a> for more information.</p>\n<p><strong>Answer to your second question</strong> (you want the receiver to call only one time if an internet connection is available):</p>\n<p>Your code is perfect; you notify only when the internet is available.</p>\n<p><strong>UPDATE</strong></p>\n<p>You can use this method to check your connectivity if you want just to check whether your mobile is connected to the internet or not.</p>\n<pre><code>public boolean isOnline(Context context) {\n  \n    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo netInfo = cm.getActiveNetworkInfo();\n    //should check null because in airplane mode it will be a null\n    return (netInfo != null &amp;&amp; netInfo.isConnected());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3643526,"reputation":158,"user_id":3037126,"display_name":"Ani"},"comment_count":0,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1445011093,"creation_date":1385537357,"answer_id":20236314,"question_id":15698790,"body_markdown":"    public static boolean isNetworkAvailable(Context context) {\r\n    \t\tboolean isMobile = false, isWifi = false;\r\n    \r\n    \t\tNetworkInfo[] infoAvailableNetworks = getConnectivityManagerInstance(\r\n    \t\t\t\tcontext).getAllNetworkInfo();\r\n    \r\n    \t\tif (infoAvailableNetworks != null) {\r\n    \t\t\tfor (NetworkInfo network : infoAvailableNetworks) {\r\n    \r\n    \t\t\t\tif (network.getType() == ConnectivityManager.TYPE_WIFI) {\r\n    \t\t\t\t\tif (network.isConnected() &amp;&amp; network.isAvailable())\r\n    \t\t\t\t\t\tisWifi = true;\r\n    \t\t\t\t}\r\n    \t\t\t\tif (network.getType() == ConnectivityManager.TYPE_MOBILE) {\r\n    \t\t\t\t\tif (network.isConnected() &amp;&amp; network.isAvailable())\r\n    \t\t\t\t\t\tisMobile = true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn isMobile || isWifi;\r\n    \t}\r\n    \r\n    /* You can write such method somewhere in utility class and call it NetworkChangeReceiver like below */\r\n    public class NetworkChangedReceiver extends BroadcastReceiver \r\n    {\r\n    @Override\r\n    \tpublic void onReceive(Context context, Intent intent) {\r\n    \r\n    \t\tif (isNetworkAvailable(context)) \r\n                    {\r\n    \t\t     Toast.makeText(context, &quot;Network Available Do operations&quot;,Toast.LENGTH_LONG).show(); \r\n    \r\n    \t\t\t\r\n    \t}\r\n        }\r\n    }\r\nThis above broadcast receiver will be called only when Network state change to connected and not on disconnected.\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<pre><code>public static boolean isNetworkAvailable(Context context) {\n        boolean isMobile = false, isWifi = false;\n\n        NetworkInfo[] infoAvailableNetworks = getConnectivityManagerInstance(\n                context).getAllNetworkInfo();\n\n        if (infoAvailableNetworks != null) {\n            for (NetworkInfo network : infoAvailableNetworks) {\n\n                if (network.getType() == ConnectivityManager.TYPE_WIFI) {\n                    if (network.isConnected() &amp;&amp; network.isAvailable())\n                        isWifi = true;\n                }\n                if (network.getType() == ConnectivityManager.TYPE_MOBILE) {\n                    if (network.isConnected() &amp;&amp; network.isAvailable())\n                        isMobile = true;\n                }\n            }\n        }\n\n        return isMobile || isWifi;\n    }\n\n/* You can write such method somewhere in utility class and call it NetworkChangeReceiver like below */\npublic class NetworkChangedReceiver extends BroadcastReceiver \n{\n@Override\n    public void onReceive(Context context, Intent intent) {\n\n        if (isNetworkAvailable(context)) \n                {\n             Toast.makeText(context, \"Network Available Do operations\",Toast.LENGTH_LONG).show(); \n\n\n    }\n    }\n}\n</code></pre>\n\n<p>This above broadcast receiver will be called only when Network state change to connected and not on disconnected.</p>\n"},{"comments":[{"owner":{"account_id":346626,"reputation":10196,"user_id":680268,"accept_rate":66,"display_name":"Stealth Rabbi"},"score":1,"creation_date":1453921885,"post_id":26036628,"comment_id":57816260,"body_markdown":"And how do you register this receiver? What intent filter?","body":"And how do you register this receiver? What intent filter?"}],"tags":[],"owner":{"account_id":1688051,"reputation":1121,"user_id":1550939,"accept_rate":0,"display_name":"ayesh don"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1572455667,"creation_date":1411641974,"answer_id":26036628,"question_id":15698790,"body_markdown":"Try with this \r\n\r\n    public class ConnectionBroadcastReceiver extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        \r\n        if (&lt;Check internet connection available &gt;) { \r\n        \tToast.makeText(context, &quot;connect to the internet&quot;, Toast.LENGTH_LONG).show();\r\n        \t\r\n        \t/*upload background upload service*/\r\n        \tIntent serviceIntent = new Intent(context,&lt;your service class&gt;);\r\n            context.startService(serviceIntent);\r\n        \t\r\n        \t\r\n\t\t}else{\r\n\t\t\tToast.makeText(context, &quot;Connection failed&quot;, Toast.LENGTH_LONG).show();\r\n\t\t\t\r\n\t\t}\r\n        }\r\n    }\r\n\r\nAs soon as internet connection trigger, this (BroadcastReciever) will be loaded\r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Try with this </p>\n\n<pre><code>public class ConnectionBroadcastReceiver extends BroadcastReceiver {\n@Override\npublic void onReceive(Context context, Intent intent) {\n\n\n    if (&lt;Check internet connection available &gt;) { \n        Toast.makeText(context, \"connect to the internet\", Toast.LENGTH_LONG).show();\n\n        /*upload background upload service*/\n        Intent serviceIntent = new Intent(context,&lt;your service class&gt;);\n        context.startService(serviceIntent);\n\n\n    }else{\n        Toast.makeText(context, \"Connection failed\", Toast.LENGTH_LONG).show();\n\n    }\n    }\n}\n</code></pre>\n\n<p>As soon as internet connection trigger, this (BroadcastReciever) will be loaded</p>\n"},{"comments":[{"owner":{"account_id":2811020,"reputation":622,"user_id":2417273,"accept_rate":40,"display_name":"manivannan"},"score":4,"creation_date":1412060773,"post_id":26114247,"comment_id":40927114,"body_markdown":"for me the problem was receiver gets called twice on network change?","body":"for me the problem was receiver gets called twice on network change?"},{"owner":{"account_id":301805,"reputation":5671,"user_id":609782,"accept_rate":46,"display_name":"Darpan"},"score":11,"creation_date":1435217295,"post_id":26114247,"comment_id":50110250,"body_markdown":"why would you use a ContextWrapper? Want to understand","body":"why would you use a ContextWrapper? Want to understand"},{"owner":{"account_id":1552258,"reputation":157,"user_id":1444390,"accept_rate":100,"display_name":"venkat"},"score":4,"creation_date":1466572635,"post_id":26114247,"comment_id":63365561,"body_markdown":"me also getting @manivannan problem... reciever calling twice on network change... is there any solution for that","body":"me also getting @manivannan problem... reciever calling twice on network change... is there any solution for that"},{"owner":{"account_id":5634731,"reputation":350,"user_id":4460535,"accept_rate":55,"display_name":"Yogesh Seralia"},"score":0,"creation_date":1467285367,"post_id":26114247,"comment_id":63674652,"body_markdown":"No need to extend ServiceManager with ContextWrapper.","body":"No need to extend ServiceManager with ContextWrapper."},{"owner":{"account_id":1741826,"reputation":1818,"user_id":1593007,"accept_rate":76,"display_name":"nww04"},"score":0,"creation_date":1487041294,"post_id":26114247,"comment_id":71595426,"body_markdown":"What the hell is this for? `ServiceManager extends ContextWrapper`? Why do you need to extend ContextWrapper? WHY!?","body":"What the hell is this for? <code>ServiceManager extends ContextWrapper</code>? Why do you need to extend ContextWrapper? WHY!?"}],"tags":[],"owner":{"account_id":3766062,"reputation":5113,"user_id":3129572,"display_name":"Vaishali Sutariya"},"comment_count":5,"down_vote_count":2,"up_vote_count":92,"is_accepted":false,"score":90,"last_activity_date":1612283251,"creation_date":1412059016,"answer_id":26114247,"question_id":15698790,"body_markdown":"    public class NetworkChangeReceiver extends BroadcastReceiver {\r\n    \r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n            if (checkInternet(context)) {\r\n                Toast.makeText(context, &quot;Network Available Do operations&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    \r\n        boolean checkInternet(Context context) {\r\n            ServiceManager serviceManager = new ServiceManager(context);\r\n            return serviceManager.isNetworkAvailable()\r\n        }\r\n    }\r\n\r\nServiceManager.java\r\n\r\n    public class ServiceManager {\r\n    \r\n        Context context;\r\n    \r\n        public ServiceManager(Context base) {\r\n            context = base;\r\n        }\r\n    \r\n        public boolean isNetworkAvailable() {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = cm.getActiveNetworkInfo();\r\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n        }\r\n    }\r\n    \r\npermissions:\r\n\r\n     &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n     &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        if (checkInternet(context)) {\n            Toast.makeText(context, &quot;Network Available Do operations&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n\n    boolean checkInternet(Context context) {\n        ServiceManager serviceManager = new ServiceManager(context);\n        return serviceManager.isNetworkAvailable()\n    }\n}\n</code></pre>\n<p>ServiceManager.java</p>\n<pre><code>public class ServiceManager {\n\n    Context context;\n\n    public ServiceManager(Context base) {\n        context = base;\n    }\n\n    public boolean isNetworkAvailable() {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = cm.getActiveNetworkInfo();\n        return networkInfo != null &amp;&amp; networkInfo.isConnected();\n    }\n}\n</code></pre>\n<p>permissions:</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5563660,"reputation":2326,"user_id":4519859,"display_name":"Aj 27"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1441344775,"creation_date":1441344775,"answer_id":32390749,"question_id":15698790,"body_markdown":"Use this method to check the network state:\r\n\r\n    private void checkInternetConnection() {\r\n\r\n        if (br == null) {\r\n\r\n            br = new BroadcastReceiver() {\r\n\r\n                @Override\r\n                public void onReceive(Context context, Intent intent) {\r\n\r\n                    Bundle extras = intent.getExtras();\r\n\r\n                    NetworkInfo info = (NetworkInfo) extras\r\n                            .getParcelable(&quot;networkInfo&quot;);\r\n\r\n                    State state = info.getState();\r\n                    Log.d(&quot;TEST Internet&quot;, info.toString() + &quot; &quot;\r\n                            + state.toString());\r\n\r\n                    if (state == State.CONNECTED) {\r\n                          Toast.makeText(getApplicationContext(), &quot;Internet connection is on&quot;, Toast.LENGTH_LONG).show();\r\n\r\n                    } else {\r\n                           Toast.makeText(getApplicationContext(), &quot;Internet connection is Off&quot;, Toast.LENGTH_LONG).show();\r\n                    }\r\n\r\n                }\r\n            };\r\n\r\n            final IntentFilter intentFilter = new IntentFilter();\r\n            intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\r\n            registerReceiver((BroadcastReceiver) br, intentFilter);\r\n        }\r\n    }\r\n\r\nremember to unregister service in onDestroy.\r\n\r\nCheers!!","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Use this method to check the network state:</p>\n\n<pre><code>private void checkInternetConnection() {\n\n    if (br == null) {\n\n        br = new BroadcastReceiver() {\n\n            @Override\n            public void onReceive(Context context, Intent intent) {\n\n                Bundle extras = intent.getExtras();\n\n                NetworkInfo info = (NetworkInfo) extras\n                        .getParcelable(\"networkInfo\");\n\n                State state = info.getState();\n                Log.d(\"TEST Internet\", info.toString() + \" \"\n                        + state.toString());\n\n                if (state == State.CONNECTED) {\n                      Toast.makeText(getApplicationContext(), \"Internet connection is on\", Toast.LENGTH_LONG).show();\n\n                } else {\n                       Toast.makeText(getApplicationContext(), \"Internet connection is Off\", Toast.LENGTH_LONG).show();\n                }\n\n            }\n        };\n\n        final IntentFilter intentFilter = new IntentFilter();\n        intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n        registerReceiver((BroadcastReceiver) br, intentFilter);\n    }\n}\n</code></pre>\n\n<p>remember to unregister service in onDestroy.</p>\n\n<p>Cheers!!</p>\n"},{"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":0,"creation_date":1503930908,"post_id":34450770,"comment_id":78801742,"body_markdown":"AsynTasks should be used for something really small. You should use Service instead.","body":"AsynTasks should be used for something really small. You should use Service instead."}],"tags":[],"owner":{"account_id":3993466,"reputation":49,"user_id":3291641,"display_name":"Farzad Rohani"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1450950702,"creation_date":1450950702,"answer_id":34450770,"question_id":15698790,"body_markdown":"    public class AsyncCheckInternet extends AsyncTask&lt;String, Void, Boolean&gt; {\r\n\r\n\tpublic static final int TIME_OUT = 10 * 1000;\r\n\r\n\tprivate OnCallBack listener;\r\n\r\n\tpublic interface OnCallBack {\r\n\r\n\t\tpublic void onBack(Boolean value);\r\n\t}\r\n\r\n\tpublic AsyncCheckInternet(OnCallBack listener) {\r\n\t\tthis.listener = listener;\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void onPreExecute() {\r\n\t}\r\n\r\n\t@Override\r\n\tprotected Boolean doInBackground(String... params) {\r\n\r\n\t\tConnectivityManager connectivityManager = (ConnectivityManager) General.context\r\n\t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n\t\tNetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n\r\n\t\tif ((networkInfo != null &amp;&amp; networkInfo.isConnected())\r\n\t\t\t\t&amp;&amp; ((networkInfo.getType() == ConnectivityManager.TYPE_WIFI) || (networkInfo\r\n\t\t\t\t\t\t.getType() == ConnectivityManager.TYPE_MOBILE))) {\r\n\t\t\tHttpURLConnection urlc;\r\n\t\t\ttry {\r\n\t\t\t\turlc = (HttpURLConnection) (new URL(&quot;http://www.google.com&quot;)\r\n\t\t\t\t\t\t.openConnection());\r\n\t\t\t\turlc.setConnectTimeout(TIME_OUT);\r\n\t\t\t\turlc.connect();\r\n\t\t\t\tif (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} catch (MalformedURLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void onPostExecute(Boolean result) {\r\n\t\tif (listener != null) {\r\n\t\t\tlistener.onBack(result);\r\n\t\t}\r\n\t}\r\n}\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<pre><code>public class AsyncCheckInternet extends AsyncTask&lt;String, Void, Boolean&gt; {\n\npublic static final int TIME_OUT = 10 * 1000;\n\nprivate OnCallBack listener;\n\npublic interface OnCallBack {\n\n    public void onBack(Boolean value);\n}\n\npublic AsyncCheckInternet(OnCallBack listener) {\n    this.listener = listener;\n}\n\n@Override\nprotected void onPreExecute() {\n}\n\n@Override\nprotected Boolean doInBackground(String... params) {\n\n    ConnectivityManager connectivityManager = (ConnectivityManager) General.context\n            .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n\n    if ((networkInfo != null &amp;&amp; networkInfo.isConnected())\n            &amp;&amp; ((networkInfo.getType() == ConnectivityManager.TYPE_WIFI) || (networkInfo\n                    .getType() == ConnectivityManager.TYPE_MOBILE))) {\n        HttpURLConnection urlc;\n        try {\n            urlc = (HttpURLConnection) (new URL(\"http://www.google.com\")\n                    .openConnection());\n            urlc.setConnectTimeout(TIME_OUT);\n            urlc.connect();\n            if (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {\n                return true;\n            } else {\n                return false;\n            }\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n            return false;\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            return false;\n\n        }\n    } else {\n        return false;\n    }\n}\n\n@Override\nprotected void onPostExecute(Boolean result) {\n    if (listener != null) {\n        listener.onBack(result);\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":5954888,"reputation":1706,"user_id":4681874,"accept_rate":95,"display_name":"Erich Garc&#237;a"},"score":0,"creation_date":1505618854,"post_id":37654006,"comment_id":79484151,"body_markdown":"Yes, I just want to suggest the same, wifi.isConnected() fix","body":"Yes, I just want to suggest the same, wifi.isConnected() fix"}],"tags":[],"owner":{"account_id":1616629,"reputation":3102,"user_id":1494133,"accept_rate":71,"display_name":"Nativ"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1466438013,"creation_date":1465205665,"answer_id":37654006,"question_id":15698790,"body_markdown":"I know this thread is old and fully answered but I feel that the following might help some people.\r\n\r\nThe code in the body of the question contains a bug which no one here addressed.\r\n@Nikhil is checking whether the wifi/mobile is available and not if it&#39;s connected.\r\n\r\nThe fix is here:\r\n\r\n    \r\n\r\n    @Override\r\n    public void onReceive(final Context context, final Intent intent) {\r\n        final ConnectivityManager connMgr = (ConnectivityManager) context\r\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        final android.net.NetworkInfo wifi = connMgr\r\n                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n\r\n        final android.net.NetworkInfo mobile = connMgr\r\n                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n\r\n        if (wifi.isConnected() || mobile.isConnected()) {\r\n          // do stuff\r\n        }\r\n    }\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>I know this thread is old and fully answered but I feel that the following might help some people.</p>\n\n<p>The code in the body of the question contains a bug which no one here addressed.\n@Nikhil is checking whether the wifi/mobile is available and not if it's connected.</p>\n\n<p>The fix is here:</p>\n\n<pre><code>@Override\npublic void onReceive(final Context context, final Intent intent) {\n    final ConnectivityManager connMgr = (ConnectivityManager) context\n            .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    final android.net.NetworkInfo wifi = connMgr\n            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n\n    final android.net.NetworkInfo mobile = connMgr\n            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n    if (wifi.isConnected() || mobile.isConnected()) {\n      // do stuff\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6230966,"reputation":6483,"user_id":4847767,"display_name":"Alex Zaraos"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1470958868,"creation_date":1470958303,"answer_id":38907643,"question_id":15698790,"body_markdown":"manifest:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;receiver android:name=&quot;.your.namepackage.here.ConnectivityReceiver&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;/&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/receiver&gt;\r\n\r\nclass for receiver:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ConnectivityReceiver extends BroadcastReceiver{\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            final String action = intent.getAction();\r\n            switch (action) {\r\n                case ConnectivityManager.CONNECTIVITY_ACTION:\r\n                    DebugUtils.logDebug(&quot;BROADCAST&quot;, &quot;network change&quot;);\r\n                    if(NetworkUtils.isConnect()){\r\n                        //do action here\r\n                    }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\nand classs utils like example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class NetworkUtils {\r\n    \r\n        public static boolean isConnect() {\r\n            ConnectivityManager connectivityManager = (ConnectivityManager) Application.getInstance().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                Network[] netArray = connectivityManager.getAllNetworks();\r\n                NetworkInfo netInfo;\r\n                for (Network net : netArray) {\r\n                    netInfo = connectivityManager.getNetworkInfo(net);\r\n                    if ((netInfo.getTypeName().equalsIgnoreCase(&quot;WIFI&quot;) || netInfo.getTypeName().equalsIgnoreCase(&quot;MOBILE&quot;)) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\r\n                        //if (netInfo.getState().equals(NetworkInfo.State.CONNECTED)) {\r\n                        Log.d(&quot;Network&quot;, &quot;NETWORKNAME: &quot; + netInfo.getTypeName());\r\n                        return true;\r\n                    }\r\n                }\r\n            } else {\r\n                if (connectivityManager != null) {\r\n                    @SuppressWarnings(&quot;deprecation&quot;)\r\n                    NetworkInfo[] netInfoArray = connectivityManager.getAllNetworkInfo();\r\n                    if (netInfoArray != null) {\r\n                        for (NetworkInfo netInfo : netInfoArray) {\r\n                            if ((netInfo.getTypeName().equalsIgnoreCase(&quot;WIFI&quot;) || netInfo.getTypeName().equalsIgnoreCase(&quot;MOBILE&quot;)) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\r\n                                //if (netInfo.getState() == NetworkInfo.State.CONNECTED) {\r\n                                Log.d(&quot;Network&quot;, &quot;NETWORKNAME: &quot; + netInfo.getTypeName());\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>manifest:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;receiver android:name=\".your.namepackage.here.ConnectivityReceiver\"&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\"/&gt;\n    &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p>class for receiver:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ConnectivityReceiver extends BroadcastReceiver{\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        final String action = intent.getAction();\n        switch (action) {\n            case ConnectivityManager.CONNECTIVITY_ACTION:\n                DebugUtils.logDebug(\"BROADCAST\", \"network change\");\n                if(NetworkUtils.isConnect()){\n                    //do action here\n                }\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>and classs utils like example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class NetworkUtils {\n\n    public static boolean isConnect() {\n        ConnectivityManager connectivityManager = (ConnectivityManager) Application.getInstance().getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            Network[] netArray = connectivityManager.getAllNetworks();\n            NetworkInfo netInfo;\n            for (Network net : netArray) {\n                netInfo = connectivityManager.getNetworkInfo(net);\n                if ((netInfo.getTypeName().equalsIgnoreCase(\"WIFI\") || netInfo.getTypeName().equalsIgnoreCase(\"MOBILE\")) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\n                    //if (netInfo.getState().equals(NetworkInfo.State.CONNECTED)) {\n                    Log.d(\"Network\", \"NETWORKNAME: \" + netInfo.getTypeName());\n                    return true;\n                }\n            }\n        } else {\n            if (connectivityManager != null) {\n                @SuppressWarnings(\"deprecation\")\n                NetworkInfo[] netInfoArray = connectivityManager.getAllNetworkInfo();\n                if (netInfoArray != null) {\n                    for (NetworkInfo netInfo : netInfoArray) {\n                        if ((netInfo.getTypeName().equalsIgnoreCase(\"WIFI\") || netInfo.getTypeName().equalsIgnoreCase(\"MOBILE\")) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\n                            //if (netInfo.getState() == NetworkInfo.State.CONNECTED) {\n                            Log.d(\"Network\", \"NETWORKNAME: \" + netInfo.getTypeName());\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2675746,"reputation":2464,"user_id":2334534,"accept_rate":50,"display_name":"Ajit Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477666194,"creation_date":1477666194,"answer_id":40307672,"question_id":15698790,"body_markdown":"Add a broadcast receiver which can listen to network connectivity change. Then check wether device is connected to internet or not using ConnectivityManager. Refer to this [post][1] or [video][2] for detailed understanding. Below is the code:\r\n\r\n    public class NetworkStateChangeReceiver extends BroadcastReceiver {\r\n      public static final String NETWORK_AVAILABLE_ACTION = &quot;com.ajit.singh.NetworkAvailable&quot;;\r\n      public static final String IS_NETWORK_AVAILABLE = &quot;isNetworkAvailable&quot;;\r\n     \r\n      @Override\r\n      public void onReceive(Context context, Intent intent) {\r\n        Intent networkStateIntent = new Intent(NETWORK_AVAILABLE_ACTION);\r\n        networkStateIntent.putExtra(IS_NETWORK_AVAILABLE,  isConnectedToInternet(context));\r\n        LocalBroadcastManager.getInstance(context).sendBroadcast(networkStateIntent);\r\n      }\r\n     \r\n      private boolean isConnectedToInternet(Context context) {\r\n        try {\r\n          if (context != null) {\r\n            ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n          }\r\n          return false;\r\n        } catch (Exception e) {\r\n          Log.e(NetworkStateChangeReceiver.class.getName(), e.getMessage());\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\nI wrote this receiver to show a notification on the Screen, that&#39;s why you see a local broadcast with the network status. Here is the code to show the notification.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n     \r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n     \r\n        IntentFilter intentFilter = new IntentFilter(NetworkStateChangeReceiver.NETWORK_AVAILABLE_ACTION);\r\n        LocalBroadcastManager.getInstance(this).registerReceiver(new BroadcastReceiver() {\r\n          @Override\r\n          public void onReceive(Context context, Intent intent) {\r\n            boolean isNetworkAvailable = intent.getBooleanExtra(IS_NETWORK_AVAILABLE, false);\r\n            String networkStatus = isNetworkAvailable ? &quot;connected&quot; : &quot;disconnected&quot;;\r\n     \r\n            Snackbar.make(findViewById(R.id.activity_main), &quot;Network Status: &quot; + networkStatus, Snackbar.LENGTH_LONG).show();\r\n          }\r\n        }, intentFilter);\r\n      }\r\n    }\r\n\r\nActivity listens to the intent broadcasted by the network receiver and shows the notification on the screen.\r\n\r\n\r\n  [1]: http://www.singhajit.com/notify-android-device-network-status-changes/\r\n  [2]: https://www.youtube.com/watch?v=ubvWRlFnr74","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Add a broadcast receiver which can listen to network connectivity change. Then check wether device is connected to internet or not using ConnectivityManager. Refer to this <a href=\"http://www.singhajit.com/notify-android-device-network-status-changes/\" rel=\"nofollow\">post</a> or <a href=\"https://www.youtube.com/watch?v=ubvWRlFnr74\" rel=\"nofollow\">video</a> for detailed understanding. Below is the code:</p>\n\n<pre><code>public class NetworkStateChangeReceiver extends BroadcastReceiver {\n  public static final String NETWORK_AVAILABLE_ACTION = \"com.ajit.singh.NetworkAvailable\";\n  public static final String IS_NETWORK_AVAILABLE = \"isNetworkAvailable\";\n\n  @Override\n  public void onReceive(Context context, Intent intent) {\n    Intent networkStateIntent = new Intent(NETWORK_AVAILABLE_ACTION);\n    networkStateIntent.putExtra(IS_NETWORK_AVAILABLE,  isConnectedToInternet(context));\n    LocalBroadcastManager.getInstance(context).sendBroadcast(networkStateIntent);\n  }\n\n  private boolean isConnectedToInternet(Context context) {\n    try {\n      if (context != null) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n        return networkInfo != null &amp;&amp; networkInfo.isConnected();\n      }\n      return false;\n    } catch (Exception e) {\n      Log.e(NetworkStateChangeReceiver.class.getName(), e.getMessage());\n      return false;\n    }\n  }\n}\n</code></pre>\n\n<p>I wrote this receiver to show a notification on the Screen, that's why you see a local broadcast with the network status. Here is the code to show the notification.</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    IntentFilter intentFilter = new IntentFilter(NetworkStateChangeReceiver.NETWORK_AVAILABLE_ACTION);\n    LocalBroadcastManager.getInstance(this).registerReceiver(new BroadcastReceiver() {\n      @Override\n      public void onReceive(Context context, Intent intent) {\n        boolean isNetworkAvailable = intent.getBooleanExtra(IS_NETWORK_AVAILABLE, false);\n        String networkStatus = isNetworkAvailable ? \"connected\" : \"disconnected\";\n\n        Snackbar.make(findViewById(R.id.activity_main), \"Network Status: \" + networkStatus, Snackbar.LENGTH_LONG).show();\n      }\n    }, intentFilter);\n  }\n}\n</code></pre>\n\n<p>Activity listens to the intent broadcasted by the network receiver and shows the notification on the screen.</p>\n"},{"tags":[],"owner":{"account_id":3225868,"reputation":1863,"user_id":2722270,"display_name":"Weiyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1490938469,"creation_date":1490938469,"answer_id":43133106,"question_id":15698790,"body_markdown":"just for someone else who wanna register a broadcast dynamicly:\r\n\r\n    BroadcastReceiver mWifiReceiver = new BroadcastReceiver() {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            if (checkWifiConnect()) {\r\n                Log.d(TAG, &quot;wifi has connected&quot;);\r\n                // TODO\r\n            }\r\n        }\r\n    };\r\n\r\n    private void registerWifiReceiver() {\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);\r\n        filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);\r\n        filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        mContext.registerReceiver(mWifiReceiver, filter);\r\n    }\r\n\r\n    private void unregisterWifiReceiver() {\r\n        mContext.unregisterReceiver(mWifiReceiver);\r\n    }\r\n\r\n    private boolean checkWifiConnect() {\r\n        ConnectivityManager manager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo = manager.getActiveNetworkInfo();\r\n        if (networkInfo != null\r\n                &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_WIFI\r\n                &amp;&amp; networkInfo.isConnected()) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }","title":"Broadcast receiver for checking internet connection in android app","body":"<p>just for someone else who wanna register a broadcast dynamicly:</p>\n\n<pre><code>BroadcastReceiver mWifiReceiver = new BroadcastReceiver() {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (checkWifiConnect()) {\n            Log.d(TAG, \"wifi has connected\");\n            // TODO\n        }\n    }\n};\n\nprivate void registerWifiReceiver() {\n    IntentFilter filter = new IntentFilter();\n    filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);\n    filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);\n    filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n    mContext.registerReceiver(mWifiReceiver, filter);\n}\n\nprivate void unregisterWifiReceiver() {\n    mContext.unregisterReceiver(mWifiReceiver);\n}\n\nprivate boolean checkWifiConnect() {\n    ConnectivityManager manager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo = manager.getActiveNetworkInfo();\n    if (networkInfo != null\n            &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_WIFI\n            &amp;&amp; networkInfo.isConnected()) {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6925725,"reputation":10963,"user_id":5316872,"display_name":"Keshav Gera"},"score":0,"creation_date":1503387183,"post_id":44881551,"comment_id":78580432,"body_markdown":"Its Very usefull same as youtube every time check online ,offline","body":"Its Very usefull same as youtube every time check online ,offline"},{"owner":{"account_id":2816376,"reputation":1822,"user_id":2421320,"display_name":"Amir"},"score":0,"creation_date":1503715539,"post_id":44881551,"comment_id":78742193,"body_markdown":"Thanks for your great post. Why did you add this: Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) in registerNetworkBroadcastForNougat? The manifest is not working in android N and Up and M shoud be fine","body":"Thanks for your great post. Why did you add this: Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) in registerNetworkBroadcastForNougat? The manifest is not working in android N and Up and M shoud be fine"},{"owner":{"account_id":5306083,"reputation":313,"user_id":4233930,"display_name":"lenhuy2106"},"score":6,"creation_date":1516311494,"post_id":44881551,"comment_id":83647258,"body_markdown":"duplicate code at registerNetworkBroadcastForNougat()","body":"duplicate code at registerNetworkBroadcastForNougat()"},{"owner":{"account_id":263142,"reputation":9391,"user_id":548526,"accept_rate":70,"display_name":"Siddharth"},"score":0,"creation_date":1527683342,"post_id":44881551,"comment_id":88218705,"body_markdown":"shouldnt there be a else in this code segment ? &#39;if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\n        } else\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\n        }&#39;","body":"shouldnt there be a else in this code segment ? &#39;if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {             registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));         } else         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {             registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));         }&#39;"},{"owner":{"account_id":10091500,"reputation":120,"user_id":7458349,"display_name":"Sim&#227;o Garcia"},"score":0,"creation_date":1540814217,"post_id":44881551,"comment_id":92989261,"body_markdown":"Expected behaviour. Thanks!","body":"Expected behaviour. Thanks!"},{"owner":{"account_id":7338755,"reputation":702,"user_id":5589166,"display_name":"Sovary"},"score":1,"creation_date":1541256194,"post_id":44881551,"comment_id":93158194,"body_markdown":"This will not work if device connected internet, but there is no bandwidth.","body":"This will not work if device connected internet, but there is no bandwidth."},{"owner":{"account_id":6925725,"reputation":10963,"user_id":5316872,"display_name":"Keshav Gera"},"score":0,"creation_date":1567074405,"post_id":44881551,"comment_id":101858384,"body_markdown":"@MujahidKhan Like my post if it&#39;s useful to you","body":"@MujahidKhan Like my post if it&#39;s useful to you"}],"tags":[],"owner":{"account_id":6925725,"reputation":10963,"user_id":5316872,"display_name":"Keshav Gera"},"comment_count":7,"down_vote_count":1,"up_vote_count":66,"is_accepted":false,"score":65,"last_activity_date":1548089075,"creation_date":1499072520,"answer_id":44881551,"question_id":15698790,"body_markdown":"Checking internet status every time using Broadcast Receiver:\r\n    \r\n[![internet status implementation][1]][1]\r\n\r\n[Full source code available on Google Drive](https://drive.google.com/open?id=0BzBKpZ4nzNzUYjhZamFIZTh6VTQ).\r\n\r\n**AndroidManifest.xml**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;receiver android:name=&quot;.receivers.NetworkChangeReceiver&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n    &lt;/receiver&gt;\r\n    \r\n**BroadcastReciever**\r\n\r\n    package com.keshav.networkchangereceiverexample.receivers;\r\n    \r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.net.ConnectivityManager;\r\n    import android.net.NetworkInfo;\r\n    import android.util.Log;\r\n    \r\n    import static com.keshav.networkchangereceiverexample.MainActivity.dialog;\r\n    \r\n    public class NetworkChangeReceiver extends BroadcastReceiver\r\n    {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent)\r\n        {\r\n            try\r\n            {\r\n                if (isOnline(context)) {\r\n                    dialog(true);\r\n                    Log.e(&quot;keshav&quot;, &quot;Online Connect Intenet &quot;);\r\n                } else {\r\n                    dialog(false);\r\n                    Log.e(&quot;keshav&quot;, &quot;Conectivity Failure !!! &quot;);\r\n                }\r\n            } catch (NullPointerException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private boolean isOnline(Context context) {\r\n            try {\r\n                ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                NetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n                //should check null because in airplane mode it will be null\r\n                return (netInfo != null &amp;&amp; netInfo.isConnected());\r\n            } catch (NullPointerException e) {\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n**MainActivity.java**\r\n\r\n    package com.keshav.networkchangereceiverexample;\r\n    \r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Intent;\r\n    import android.content.IntentFilter;\r\n    import android.graphics.Color;\r\n    import android.net.ConnectivityManager;\r\n    import android.os.Build;\r\n    import android.os.Handler;\r\n    import android.os.Looper;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.view.animation.Animation;\r\n    import android.view.animation.AnimationUtils;\r\n    import android.widget.TextView;\r\n    \r\n    import com.keshav.networkchangereceiverexample.receivers.NetworkChangeReceiver;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private BroadcastReceiver mNetworkReceiver;\r\n        static TextView tv_check_connection;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            tv_check_connection=(TextView) findViewById(R.id.tv_check_connection);\r\n            mNetworkReceiver = new NetworkChangeReceiver();\r\n            registerNetworkBroadcastForNougat();\r\n    \r\n        }\r\n    \r\n        public static void dialog(boolean value){\r\n    \r\n            if(value){\r\n                tv_check_connection.setText(&quot;We are back !!!&quot;);\r\n                tv_check_connection.setBackgroundColor(Color.GREEN);\r\n                tv_check_connection.setTextColor(Color.WHITE);\r\n    \r\n                Handler handler = new Handler();\r\n                Runnable delayrunnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        tv_check_connection.setVisibility(View.GONE);\r\n                    }\r\n                };\r\n                handler.postDelayed(delayrunnable, 3000);\r\n            }else {\r\n                tv_check_connection.setVisibility(View.VISIBLE);\r\n                tv_check_connection.setText(&quot;Could not Connect to internet&quot;);\r\n                tv_check_connection.setBackgroundColor(Color.RED);\r\n                tv_check_connection.setTextColor(Color.WHITE);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void registerNetworkBroadcastForNougat() {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n                registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\r\n            }\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\r\n            }\r\n        }\r\n    \r\n        protected void unregisterNetworkChanges() {\r\n            try {\r\n                unregisterReceiver(mNetworkReceiver);\r\n            } catch (IllegalArgumentException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n            unregisterNetworkChanges();\r\n        }\r\n    }\r\n    \r\n**activity_main.xml**\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.keshav.networkchangereceiverexample.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/tv_check_connection&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Connection establised !&quot;\r\n            android:padding=&quot;25dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            android:gravity=&quot;center&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DoOg3.png","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Checking internet status every time using Broadcast Receiver:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DoOg3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DoOg3.png\" alt=\"internet status implementation\"></a></p>\n\n<p><a href=\"https://drive.google.com/open?id=0BzBKpZ4nzNzUYjhZamFIZTh6VTQ\" rel=\"noreferrer\">Full source code available on Google Drive</a>.</p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;receiver android:name=\".receivers.NetworkChangeReceiver\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p><strong>BroadcastReciever</strong></p>\n\n<pre><code>package com.keshav.networkchangereceiverexample.receivers;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.util.Log;\n\nimport static com.keshav.networkchangereceiverexample.MainActivity.dialog;\n\npublic class NetworkChangeReceiver extends BroadcastReceiver\n{\n    @Override\n    public void onReceive(Context context, Intent intent)\n    {\n        try\n        {\n            if (isOnline(context)) {\n                dialog(true);\n                Log.e(\"keshav\", \"Online Connect Intenet \");\n            } else {\n                dialog(false);\n                Log.e(\"keshav\", \"Conectivity Failure !!! \");\n            }\n        } catch (NullPointerException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private boolean isOnline(Context context) {\n        try {\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo netInfo = cm.getActiveNetworkInfo();\n            //should check null because in airplane mode it will be null\n            return (netInfo != null &amp;&amp; netInfo.isConnected());\n        } catch (NullPointerException e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>package com.keshav.networkchangereceiverexample;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.graphics.Color;\nimport android.net.ConnectivityManager;\nimport android.os.Build;\nimport android.os.Handler;\nimport android.os.Looper;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.animation.Animation;\nimport android.view.animation.AnimationUtils;\nimport android.widget.TextView;\n\nimport com.keshav.networkchangereceiverexample.receivers.NetworkChangeReceiver;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private BroadcastReceiver mNetworkReceiver;\n    static TextView tv_check_connection;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        tv_check_connection=(TextView) findViewById(R.id.tv_check_connection);\n        mNetworkReceiver = new NetworkChangeReceiver();\n        registerNetworkBroadcastForNougat();\n\n    }\n\n    public static void dialog(boolean value){\n\n        if(value){\n            tv_check_connection.setText(\"We are back !!!\");\n            tv_check_connection.setBackgroundColor(Color.GREEN);\n            tv_check_connection.setTextColor(Color.WHITE);\n\n            Handler handler = new Handler();\n            Runnable delayrunnable = new Runnable() {\n                @Override\n                public void run() {\n                    tv_check_connection.setVisibility(View.GONE);\n                }\n            };\n            handler.postDelayed(delayrunnable, 3000);\n        }else {\n            tv_check_connection.setVisibility(View.VISIBLE);\n            tv_check_connection.setText(\"Could not Connect to internet\");\n            tv_check_connection.setBackgroundColor(Color.RED);\n            tv_check_connection.setTextColor(Color.WHITE);\n        }\n    }\n\n\n    private void registerNetworkBroadcastForNougat() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\n        }\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\n        }\n    }\n\n    protected void unregisterNetworkChanges() {\n        try {\n            unregisterReceiver(mNetworkReceiver);\n        } catch (IllegalArgumentException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        unregisterNetworkChanges();\n    }\n}\n</code></pre>\n\n<p><strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.keshav.networkchangereceiverexample.MainActivity\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/tv_check_connection\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Connection establised !\"\n        android:padding=\"25dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        android:gravity=\"center\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2049063,"reputation":101,"user_id":1828452,"display_name":"BJDM"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1499226917,"creation_date":1499225558,"answer_id":44916596,"question_id":15698790,"body_markdown":"[CONNECTIVITY_ACTION docs](https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION):\r\n\r\n&gt;Apps targeting Android 7.0 (API level 24) and higher do not receive this broadcast if they declare the broadcast receiver in their manifest. Apps will still receive broadcasts if they register their BroadcastReceiver with Context.registerReceiver() and that context is still valid.\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p><a href=\"https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION\" rel=\"noreferrer\">CONNECTIVITY_ACTION docs</a>:</p>\n\n<blockquote>\n  <p>Apps targeting Android 7.0 (API level 24) and higher do not receive this broadcast if they declare the broadcast receiver in their manifest. Apps will still receive broadcasts if they register their BroadcastReceiver with Context.registerReceiver() and that context is still valid.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7376361,"reputation":839,"user_id":5614815,"display_name":"Bapusaheb Shinde"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505458172,"creation_date":1505458172,"answer_id":46233405,"question_id":15698790,"body_markdown":"Broadcast receiver code to check internet connectivity change:\r\n\r\n    public class BroadCastDetecter extends BroadcastReceiver {\r\n        public static boolean internet_status = false;\r\n        public static void checkInternetConenction(Context context) {\r\n            internet_status = false;\r\n            ConnectivityManager check = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            if (check != null) {\r\n                NetworkInfo[] info = check.getAllNetworkInfo();\r\n                if (info != null)\r\n                    for (int i = 0; i &lt; info.length; i++)\r\n                    {\r\n                        if (info[i].getState() == NetworkInfo.State.CONNECTED) {\r\n                            internet_status = true;\r\n                        }\r\n                    }\r\n                if(internet_status)\r\n                {\r\n                   //do what you want to if internet connection is available\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent)\r\n        {\r\n            try {\r\n                checkInternetConenction(context);\r\n            }catch(Exception e){\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nadd this in manifest file:\r\n\r\n     &lt;receiver android:name=&quot;.BroadCastDetecter&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Broadcast receiver code to check internet connectivity change:</p>\n\n<pre><code>public class BroadCastDetecter extends BroadcastReceiver {\n    public static boolean internet_status = false;\n    public static void checkInternetConenction(Context context) {\n        internet_status = false;\n        ConnectivityManager check = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (check != null) {\n            NetworkInfo[] info = check.getAllNetworkInfo();\n            if (info != null)\n                for (int i = 0; i &lt; info.length; i++)\n                {\n                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {\n                        internet_status = true;\n                    }\n                }\n            if(internet_status)\n            {\n               //do what you want to if internet connection is available\n            }\n        }\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent)\n    {\n        try {\n            checkInternetConenction(context);\n        }catch(Exception e){\n\n        }\n    }\n}\n</code></pre>\n\n<p>add this in manifest file:</p>\n\n<pre><code> &lt;receiver android:name=\".BroadCastDetecter\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1523528416,"creation_date":1523448456,"answer_id":49774730,"question_id":15698790,"body_markdown":"Here&#39;s a comfortable way to do it for activity, fragment or context. It will also auto-unregister if you do it for activity/fragment (in onDestroy), if you wish:\r\n\r\n    abstract class ConnectionBroadcastReceiver : BroadcastReceiver() {\r\n        companion object {\r\n            @JvmStatic\r\n            fun registerWithoutAutoUnregister(context: Context, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\r\n                context.registerReceiver(connectionBroadcastReceiver, IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION))\r\n            }\r\n\r\n            @JvmStatic\r\n            fun registerToFragmentAndAutoUnregister(context: Context, fragment: Fragment, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\r\n                val applicationContext = context.applicationContext\r\n                registerWithoutAutoUnregister(applicationContext, connectionBroadcastReceiver)\r\n                fragment.lifecycle.addObserver(object : LifecycleObserver {\r\n                    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\r\n                    fun onDestroy() {\r\n                        applicationContext.unregisterReceiver(connectionBroadcastReceiver)\r\n                    }\r\n                })\r\n            }\r\n\r\n            @JvmStatic\r\n            fun registerToActivityAndAutoUnregister(activity: AppCompatActivity, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\r\n                registerWithoutAutoUnregister(activity, connectionBroadcastReceiver)\r\n                activity.lifecycle.addObserver(object : LifecycleObserver {\r\n                    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\r\n                    fun onDestroy() {\r\n                        activity.unregisterReceiver(connectionBroadcastReceiver)\r\n                    }\r\n                })\r\n            }\r\n\r\n            @JvmStatic\r\n            fun hasInternetConnection(context: Context): Boolean {\r\n                val info = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo\r\n                return !(info == null || !info.isConnectedOrConnecting)\r\n            }\r\n        }\r\n\r\n        override fun onReceive(context: Context, intent: Intent) {\r\n            val hasConnection = !intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false)\r\n    //        Log.d(&quot;AppLog&quot;, &quot;conenctivity changed. hasConnection? $hasConnection&quot;)\r\n            onConnectionChanged(hasConnection)\r\n        }\r\n\r\n        abstract fun onConnectionChanged(hasConnection: Boolean)\r\n    }\r\n\r\nUsage in fragment:\r\n\r\n        ConnectionBroadcastReceiver.registerToFragmentAndAutoUnregister(activity!!, this, object : ConnectionBroadcastReceiver() {\r\n            override fun onConnectionChanged(hasConnection: Boolean) {\r\n                // Log.d(&quot;AppLog&quot;, &quot;onConnectionChanged:&quot; + hasConnection)\r\n            }\r\n        })\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Here's a comfortable way to do it for activity, fragment or context. It will also auto-unregister if you do it for activity/fragment (in onDestroy), if you wish:</p>\n\n<pre><code>abstract class ConnectionBroadcastReceiver : BroadcastReceiver() {\n    companion object {\n        @JvmStatic\n        fun registerWithoutAutoUnregister(context: Context, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\n            context.registerReceiver(connectionBroadcastReceiver, IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION))\n        }\n\n        @JvmStatic\n        fun registerToFragmentAndAutoUnregister(context: Context, fragment: Fragment, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\n            val applicationContext = context.applicationContext\n            registerWithoutAutoUnregister(applicationContext, connectionBroadcastReceiver)\n            fragment.lifecycle.addObserver(object : LifecycleObserver {\n                @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n                fun onDestroy() {\n                    applicationContext.unregisterReceiver(connectionBroadcastReceiver)\n                }\n            })\n        }\n\n        @JvmStatic\n        fun registerToActivityAndAutoUnregister(activity: AppCompatActivity, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\n            registerWithoutAutoUnregister(activity, connectionBroadcastReceiver)\n            activity.lifecycle.addObserver(object : LifecycleObserver {\n                @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n                fun onDestroy() {\n                    activity.unregisterReceiver(connectionBroadcastReceiver)\n                }\n            })\n        }\n\n        @JvmStatic\n        fun hasInternetConnection(context: Context): Boolean {\n            val info = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo\n            return !(info == null || !info.isConnectedOrConnecting)\n        }\n    }\n\n    override fun onReceive(context: Context, intent: Intent) {\n        val hasConnection = !intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false)\n//        Log.d(\"AppLog\", \"conenctivity changed. hasConnection? $hasConnection\")\n        onConnectionChanged(hasConnection)\n    }\n\n    abstract fun onConnectionChanged(hasConnection: Boolean)\n}\n</code></pre>\n\n<p>Usage in fragment:</p>\n\n<pre><code>    ConnectionBroadcastReceiver.registerToFragmentAndAutoUnregister(activity!!, this, object : ConnectionBroadcastReceiver() {\n        override fun onConnectionChanged(hasConnection: Boolean) {\n            // Log.d(\"AppLog\", \"onConnectionChanged:\" + hasConnection)\n        }\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10603585,"reputation":3549,"user_id":7809801,"display_name":"Job M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550869836,"creation_date":1550869836,"answer_id":54835233,"question_id":15698790,"body_markdown":"It&#39;s easier to use https://github.com/JobGetabu/DroidNet\r\n\r\n     @Override\r\n        public void onInternetConnectivityChanged(boolean isConnected) {\r\n          \r\n            if (isConnected) {\r\n                //do Stuff with internet\r\n                netIsOn();\r\n            } else {\r\n                //no internet\r\n                netIsOff();\r\n            }\r\n        }\r\n    \r\n        private void netIsOn(){...}\r\n    \r\n        private void netIsOff(){...}","title":"Broadcast receiver for checking internet connection in android app","body":"<p>It's easier to use <a href=\"https://github.com/JobGetabu/DroidNet\" rel=\"nofollow noreferrer\">https://github.com/JobGetabu/DroidNet</a></p>\n\n<pre><code> @Override\n    public void onInternetConnectivityChanged(boolean isConnected) {\n\n        if (isConnected) {\n            //do Stuff with internet\n            netIsOn();\n        } else {\n            //no internet\n            netIsOff();\n        }\n    }\n\n    private void netIsOn(){...}\n\n    private void netIsOff(){...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8061212,"reputation":2593,"user_id":6076692,"accept_rate":100,"display_name":"Mohamed AbdelraZek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558215005,"creation_date":1558215005,"answer_id":56202992,"question_id":15698790,"body_markdown":"This only checks if the network interface is available, doesn&#39;t guarantee a particular network service is available, for example, there could be low signal or server downtime\r\n\r\n      private boolean isNetworkInterfaceAvailable(Context context) {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n            return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\r\n        }\r\nif you want to make a real connection to make sure your connection can gather data from a server or any url:\r\n  \r\n\r\n      private boolean isAbleToConnect(String url, int timeout) {\r\n            try {\r\n                URL myUrl = new URL(url);\r\n                URLConnection connection = myUrl.openConnection();\r\n                connection.setConnectTimeout(timeout);\r\n                connection.connect();\r\n                return true;\r\n            } catch (Exception e) {\r\n                Log.i(&quot;exception&quot;, &quot;&quot; + e.getMessage());\r\n                return false;\r\n            }\r\n        }\r\n\r\nThis function needs to be wrapped in a background thread :\r\n\r\n    final String action = intent.getAction();\r\n            if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\r\n                checkConnectivity(context);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void checkConnectivity(final Context context) {\r\n            if (!isNetworkInterfaceAvailable(context)) {\r\n                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n    \r\n            final Handler handler = new Handler();\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    final boolean isConnected = isAbleToConnect(&quot;http://www.google.com&quot;, 1000);\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            if (isConnected)\r\n                                Toast.makeText(context, &quot;You are ONLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                            else\r\n                                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n    \r\n                }\r\n            }).start();\r\n    \r\n        }\r\nAdd required permissions:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n            &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n\r\n\r\n\r\n Add this line under application in manifest file: \r\n\r\n    android:usesCleartextTraffic=&quot;true&quot;\r\n\r\nAdd receiver to manifest file:\r\n \r\n\r\n    &lt;receiver android:name=&quot;.ConnectivityChangeReceiver&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n    \r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;    \r\n\r\nRegister/Unregister the BR in you Activity:\r\n\r\n    @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            IntentFilter filter = new IntentFilter(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;);\r\n            registerReceiver(connectivityChangeReceiver, filter);\r\n        }\r\n    \r\n        @Override\r\n        protected void onDestroy() {\r\n            super.onDestroy();\r\n            unregisterReceiver(connectivityChangeReceiver);\r\n        }\r\nthis is the entire Broadcast class : \r\n\r\n\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.net.ConnectivityManager;\r\n    import android.net.NetworkInfo;\r\n    import android.os.Handler;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n    \r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    \r\n    public class ConnectivityChangeReceiver extends BroadcastReceiver {\r\n    \r\n    \r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n    \r\n            final String action = intent.getAction();\r\n            if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\r\n                checkConnectivity(context);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void checkConnectivity(final Context context) {\r\n            if (!isNetworkInterfaceAvailable(context)) {\r\n                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n    \r\n            final Handler handler = new Handler();\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    final boolean isConnected = isAbleToConnect(&quot;http://www.google.com&quot;, 1000);\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            if (isConnected)\r\n                                Toast.makeText(context, &quot;You are ONLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                            else\r\n                                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n    \r\n                }\r\n            }).start();\r\n    \r\n        }\r\n    \r\n        //This only checks if the network interface is available, doesn&#39;t guarantee a particular network service is available, for example, there could be low signal or server downtime\r\n        private boolean isNetworkInterfaceAvailable(Context context) {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n            return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\r\n        }\r\n    \r\n        //This makes a real connection to an url and checks if you can connect to this url, this needs to be wrapped in a background thread\r\n        private boolean isAbleToConnect(String url, int timeout) {\r\n            try {\r\n                URL myUrl = new URL(url);\r\n                URLConnection connection = myUrl.openConnection();\r\n                connection.setConnectTimeout(timeout);\r\n                connection.connect();\r\n                return true;\r\n            } catch (Exception e) {\r\n                Log.i(&quot;exception&quot;, &quot;&quot; + e.getMessage());\r\n                return false;\r\n            }\r\n        }\r\n    } \r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>This only checks if the network interface is available, doesn't guarantee a particular network service is available, for example, there could be low signal or server downtime</p>\n\n<pre><code>  private boolean isNetworkInterfaceAvailable(Context context) {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\n    }\n</code></pre>\n\n<p>if you want to make a real connection to make sure your connection can gather data from a server or any url:</p>\n\n<pre><code>  private boolean isAbleToConnect(String url, int timeout) {\n        try {\n            URL myUrl = new URL(url);\n            URLConnection connection = myUrl.openConnection();\n            connection.setConnectTimeout(timeout);\n            connection.connect();\n            return true;\n        } catch (Exception e) {\n            Log.i(\"exception\", \"\" + e.getMessage());\n            return false;\n        }\n    }\n</code></pre>\n\n<p>This function needs to be wrapped in a background thread :</p>\n\n<pre><code>final String action = intent.getAction();\n        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\n            checkConnectivity(context);\n        }\n    }\n\n\n    private void checkConnectivity(final Context context) {\n        if (!isNetworkInterfaceAvailable(context)) {\n            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        final Handler handler = new Handler();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                final boolean isConnected = isAbleToConnect(\"http://www.google.com\", 1000);\n                handler.post(new Runnable() {\n                    @Override\n                    public void run() {\n                        if (isConnected)\n                            Toast.makeText(context, \"You are ONLINE!\", Toast.LENGTH_SHORT).show();\n                        else\n                            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n            }\n        }).start();\n\n    }\n</code></pre>\n\n<p>Add required permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n        &lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n\n<p>Add this line under application in manifest file: </p>\n\n<pre><code>android:usesCleartextTraffic=\"true\"\n</code></pre>\n\n<p>Add receiver to manifest file:</p>\n\n<pre><code>&lt;receiver android:name=\".ConnectivityChangeReceiver\" &gt;\n            &lt;intent-filter&gt;\n\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;    \n</code></pre>\n\n<p>Register/Unregister the BR in you Activity:</p>\n\n<pre><code>@Override\n    protected void onStart() {\n        super.onStart();\n        IntentFilter filter = new IntentFilter(\"android.net.conn.CONNECTIVITY_CHANGE\");\n        registerReceiver(connectivityChangeReceiver, filter);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        unregisterReceiver(connectivityChangeReceiver);\n    }\n</code></pre>\n\n<p>this is the entire Broadcast class : </p>\n\n<pre><code>import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.os.Handler;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport java.net.URL;\nimport java.net.URLConnection;\n\npublic class ConnectivityChangeReceiver extends BroadcastReceiver {\n\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n\n        final String action = intent.getAction();\n        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\n            checkConnectivity(context);\n        }\n    }\n\n\n    private void checkConnectivity(final Context context) {\n        if (!isNetworkInterfaceAvailable(context)) {\n            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        final Handler handler = new Handler();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                final boolean isConnected = isAbleToConnect(\"http://www.google.com\", 1000);\n                handler.post(new Runnable() {\n                    @Override\n                    public void run() {\n                        if (isConnected)\n                            Toast.makeText(context, \"You are ONLINE!\", Toast.LENGTH_SHORT).show();\n                        else\n                            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n            }\n        }).start();\n\n    }\n\n    //This only checks if the network interface is available, doesn't guarantee a particular network service is available, for example, there could be low signal or server downtime\n    private boolean isNetworkInterfaceAvailable(Context context) {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\n    }\n\n    //This makes a real connection to an url and checks if you can connect to this url, this needs to be wrapped in a background thread\n    private boolean isAbleToConnect(String url, int timeout) {\n        try {\n            URL myUrl = new URL(url);\n            URLConnection connection = myUrl.openConnection();\n            connection.setConnectTimeout(timeout);\n            connection.connect();\n            return true;\n        } catch (Exception e) {\n            Log.i(\"exception\", \"\" + e.getMessage());\n            return false;\n        }\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":8152269,"reputation":3283,"user_id":6138892,"accept_rate":40,"display_name":"Rahul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581415595,"creation_date":1581415595,"answer_id":60166367,"question_id":15698790,"body_markdown":"Add permissions:\r\n\r\n \r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n     &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\nCreate Receiver to check for connection\r\n\r\n    public class NetworkChangeReceiver extends BroadcastReceiver {\r\n    \r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n    \r\n            if(checkInternet(context))\r\n            {\r\n                Toast.makeText(context, &quot;Network Available Do operations&quot;,Toast.LENGTH_LONG).show(); \r\n            }\r\n    \r\n        }\r\n    \r\n        boolean checkInternet(Context context) {\r\n            ServiceManager serviceManager = new ServiceManager(context);\r\n            if (serviceManager.isNetworkAvailable()) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nServiceManager.java\r\n\r\n    public class ServiceManager {\r\n    \r\n        Context context;\r\n    \r\n        public ServiceManager(Context base) {\r\n            context = base;\r\n        }\r\n    \r\n        public boolean isNetworkAvailable() {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = cm.getActiveNetworkInfo();\r\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n        }\r\n    }","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Add permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>Create Receiver to check for connection</p>\n\n<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n\n        if(checkInternet(context))\n        {\n            Toast.makeText(context, \"Network Available Do operations\",Toast.LENGTH_LONG).show(); \n        }\n\n    }\n\n    boolean checkInternet(Context context) {\n        ServiceManager serviceManager = new ServiceManager(context);\n        if (serviceManager.isNetworkAvailable()) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n}\n</code></pre>\n\n<p>ServiceManager.java</p>\n\n<pre><code>public class ServiceManager {\n\n    Context context;\n\n    public ServiceManager(Context base) {\n        context = base;\n    }\n\n    public boolean isNetworkAvailable() {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = cm.getActiveNetworkInfo();\n        return networkInfo != null &amp;&amp; networkInfo.isConnected();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11628583,"reputation":195,"user_id":8517602,"display_name":"safal bhatia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582291668,"creation_date":1582285065,"answer_id":60337913,"question_id":15698790,"body_markdown":"1) In manifest : - call receiver like below code\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\t&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\t\txmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n\t\tpackage=&quot;com.safal.checkinternet&quot;&gt;\r\n\t\r\n\t\t&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\t\t&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\t\r\n\t\t&lt;application\r\n\t\t\tandroid:allowBackup=&quot;true&quot;\r\n\t\t\tandroid:icon=&quot;@mipmap/ic_launcher&quot;\r\n\t\t\tandroid:label=&quot;@string/app_name&quot;\r\n\t\t\tandroid:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n\t\t\tandroid:supportsRtl=&quot;true&quot;\r\n\t\t\tandroid:theme=&quot;@style/AppTheme&quot;\r\n\t\t\ttools:ignore=&quot;AllowBackup,GoogleAppIndexingWarning&quot;&gt;\r\n\t\t\t&lt;receiver android:name=&quot;.NetworkChangeReceiver&quot; &gt;\r\n\t\t\t\t&lt;intent-filter&gt;\r\n\t\t\t\t\t&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n\t\t\t\t&lt;/intent-filter&gt;\r\n\t\t\t&lt;/receiver&gt;\r\n\t\t\t&lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n\t\t\t\t&lt;intent-filter&gt;\r\n\t\t\t\t\t&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\t\r\n\t\t\t\t\t&lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n\t\t\t\t&lt;/intent-filter&gt;\r\n\t\t\t&lt;/activity&gt;\r\n\t\t&lt;/application&gt;\r\n\t\r\n\t&lt;/manifest&gt;\r\n\t\r\n\t\r\n2) Make one Broad Cast Receiver Class: - In This class add code of Network Check\r\n\r\n\tpackage com.safal.checkinternet;\r\n\t\r\n\timport android.content.BroadcastReceiver;\r\n\timport android.content.Context;\r\n\timport android.content.Intent;\r\n\timport android.net.ConnectivityManager;\r\n\timport android.net.NetworkInfo;\r\n\timport android.util.Log;\r\n\timport android.widget.Toast;\r\n\t\r\n\tpublic class NetworkChangeReceiver extends BroadcastReceiver {\r\n\t\r\n\t\t@Override\r\n\t\tpublic void onReceive(final Context context, final Intent intent) {\r\n\t\t\tif (isOnline(context)){\r\n\t\t\t\tToast.makeText(context, &quot;Available&quot;, Toast.LENGTH_SHORT).show();\r\n\t\t\t}else {\r\n\t\t\t\tToast.makeText(context, &quot;Not Available&quot;, Toast.LENGTH_SHORT).show();\r\n\t\t\t}\r\n\t\t}\r\n\t\tpublic boolean isOnline(Context context) {\r\n\t\r\n\t\t\tConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t\tassert cm != null;\r\n\t\t\tNetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n\t\t\treturn (netInfo != null &amp;&amp; netInfo.isConnected());\r\n\t\t}    \r\n\t} \r\n\t\r\n3) In your Activity call to Broad Cast Receiver : -\r\n\r\n\tpackage com.safal.checkinternet;\r\n\t\r\n\timport androidx.appcompat.app.AppCompatActivity;\r\n\t\r\n\timport android.content.Intent;\r\n\timport android.content.IntentFilter;\r\n\timport android.os.Bundle;\r\n\t\r\n\tpublic class MainActivity extends AppCompatActivity {\r\n\t\r\n\t\t@Override\r\n\t\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\t\tsuper.onCreate(savedInstanceState);\r\n\t\t\tsetContentView(R.layout.activity_main);\r\n    //Call Broad cast Receiver \r\n\t\t\tIntentFilter filter = new IntentFilter();\r\n\t\t\tfilter.addAction(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;);\r\n\t\t\tregisterReceiver(new NetworkChangeReceiver(), filter);\r\n\t\t}\r\n\t}","title":"Broadcast receiver for checking internet connection in android app","body":"<p>1) In manifest : - call receiver like below code</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.safal.checkinternet\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"\n        tools:ignore=\"AllowBackup,GoogleAppIndexingWarning\"&gt;\n        &lt;receiver android:name=\".NetworkChangeReceiver\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>2) Make one Broad Cast Receiver Class: - In This class add code of Network Check</p>\n\n<pre><code>package com.safal.checkinternet;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.util.Log;\nimport android.widget.Toast;\n\npublic class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        if (isOnline(context)){\n            Toast.makeText(context, \"Available\", Toast.LENGTH_SHORT).show();\n        }else {\n            Toast.makeText(context, \"Not Available\", Toast.LENGTH_SHORT).show();\n        }\n    }\n    public boolean isOnline(Context context) {\n\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        assert cm != null;\n        NetworkInfo netInfo = cm.getActiveNetworkInfo();\n        return (netInfo != null &amp;&amp; netInfo.isConnected());\n    }    \n} \n</code></pre>\n\n<p>3) In your Activity call to Broad Cast Receiver : -</p>\n\n<pre><code>package com.safal.checkinternet;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Bundle;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n//Call Broad cast Receiver \n        IntentFilter filter = new IntentFilter();\n        filter.addAction(\"android.net.conn.CONNECTIVITY_CHANGE\");\n        registerReceiver(new NetworkChangeReceiver(), filter);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6554099,"reputation":211,"user_id":5067436,"accept_rate":80,"display_name":"Nemanja"},"score":0,"creation_date":1628089048,"post_id":61082387,"comment_id":121329122,"body_markdown":"Is there a Java version of this?","body":"Is there a Java version of this?"},{"owner":{"account_id":2482949,"reputation":147,"user_id":2162041,"display_name":"Akoder"},"score":0,"creation_date":1657612426,"post_id":61082387,"comment_id":128845812,"body_markdown":"@Sumit Jain How can we use this approach when our application is not active and is closed ? Basically I want to get to know internet availability when my application is not open.","body":"@Sumit Jain How can we use this approach when our application is not active and is closed ? Basically I want to get to know internet availability when my application is not open."}],"tags":[],"owner":{"account_id":11234005,"reputation":1120,"user_id":8240915,"display_name":"Sumit Jain"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1586270352,"creation_date":1586269763,"answer_id":61082387,"question_id":15698790,"body_markdown":"Warning: ``` Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.```\r\n\r\nAs `CONNECTIVITY_CHANGE` is deprecated then we should use another way of doing the same stuff \r\n\r\nFollowing `NetworkConnectionLiveData` will handle all the OS Version till now and also if target SDK is less than `Build.VERSION_CODES.LOLLIPOP` then only we can use `broadcastReceiver`\r\n\r\nBest Part is this class uses `LiveData` so no need to register any receiver use `LiveData` and it will handle all the things\r\n\r\n    class NetworkConnectionLiveData(val context: Context) : LiveData&lt;Boolean&gt;() {\r\n    \r\n        private var connectivityManager: ConnectivityManager = context.getSystemService(CONNECTIVITY_SERVICE) as ConnectivityManager\r\n    \r\n        private lateinit var connectivityManagerCallback: ConnectivityManager.NetworkCallback\r\n    \r\n        override fun onActive() {\r\n            super.onActive()\r\n            updateConnection()\r\n            when {\r\n                Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N -&gt; connectivityManager.registerDefaultNetworkCallback(getConnectivityManagerCallback())\r\n                Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP -&gt; lollipopNetworkAvailableRequest()\r\n                else -&gt; {\r\n                    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\r\n                        context.registerReceiver(networkReceiver, IntentFilter(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;))\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        override fun onInactive() {\r\n            super.onInactive()\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                connectivityManager.unregisterNetworkCallback(connectivityManagerCallback)\r\n            } else {\r\n                context.unregisterReceiver(networkReceiver)\r\n            }\r\n        }\r\n    \r\n        @TargetApi(Build.VERSION_CODES.LOLLIPOP)\r\n        private fun lollipopNetworkAvailableRequest() {\r\n            val builder = NetworkRequest.Builder()\r\n                    .addTransportType(android.net.NetworkCapabilities.TRANSPORT_CELLULAR)\r\n                    .addTransportType(android.net.NetworkCapabilities.TRANSPORT_WIFI)\r\n            connectivityManager.registerNetworkCallback(builder.build(), getConnectivityManagerCallback())\r\n        }\r\n    \r\n        private fun getConnectivityManagerCallback(): ConnectivityManager.NetworkCallback {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n    \r\n                connectivityManagerCallback = object : ConnectivityManager.NetworkCallback() {\r\n                    override fun onAvailable(network: Network?) {\r\n                        postValue(true)\r\n                    }\r\n    \r\n                    override fun onLost(network: Network?) {\r\n                        postValue(false)\r\n                    }\r\n                }\r\n                return connectivityManagerCallback\r\n            } else {\r\n                throw IllegalAccessError(&quot;Should not happened&quot;)\r\n            }\r\n        }\r\n    \r\n        private val networkReceiver = object : BroadcastReceiver() {\r\n            override fun onReceive(context: Context, intent: Intent) {\r\n                updateConnection()\r\n            }\r\n        }\r\n    \r\n        private fun updateConnection() {\r\n            val activeNetwork: NetworkInfo? = connectivityManager.activeNetworkInfo\r\n            postValue(activeNetwork?.isConnected == true)\r\n        }\r\n    } \r\n\r\nUse of the LiveData into any class:\r\n\r\n    NetworkConnectionLiveData(context ?: return)\r\n        .observe(viewLifecycleOwner, Observer { isConnected -&gt;\r\n            if (!isConnected) {\r\n                // Internet Not Available\r\n                return@Observer\r\n            }\r\n            // Internet Available\r\n    })\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Warning: <code>Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.</code></p>\n\n<p>As <code>CONNECTIVITY_CHANGE</code> is deprecated then we should use another way of doing the same stuff </p>\n\n<p>Following <code>NetworkConnectionLiveData</code> will handle all the OS Version till now and also if target SDK is less than <code>Build.VERSION_CODES.LOLLIPOP</code> then only we can use <code>broadcastReceiver</code></p>\n\n<p>Best Part is this class uses <code>LiveData</code> so no need to register any receiver use <code>LiveData</code> and it will handle all the things</p>\n\n<pre><code>class NetworkConnectionLiveData(val context: Context) : LiveData&lt;Boolean&gt;() {\n\n    private var connectivityManager: ConnectivityManager = context.getSystemService(CONNECTIVITY_SERVICE) as ConnectivityManager\n\n    private lateinit var connectivityManagerCallback: ConnectivityManager.NetworkCallback\n\n    override fun onActive() {\n        super.onActive()\n        updateConnection()\n        when {\n            Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N -&gt; connectivityManager.registerDefaultNetworkCallback(getConnectivityManagerCallback())\n            Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP -&gt; lollipopNetworkAvailableRequest()\n            else -&gt; {\n                if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\n                    context.registerReceiver(networkReceiver, IntentFilter(\"android.net.conn.CONNECTIVITY_CHANGE\"))\n                }\n            }\n        }\n    }\n\n    override fun onInactive() {\n        super.onInactive()\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            connectivityManager.unregisterNetworkCallback(connectivityManagerCallback)\n        } else {\n            context.unregisterReceiver(networkReceiver)\n        }\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    private fun lollipopNetworkAvailableRequest() {\n        val builder = NetworkRequest.Builder()\n                .addTransportType(android.net.NetworkCapabilities.TRANSPORT_CELLULAR)\n                .addTransportType(android.net.NetworkCapabilities.TRANSPORT_WIFI)\n        connectivityManager.registerNetworkCallback(builder.build(), getConnectivityManagerCallback())\n    }\n\n    private fun getConnectivityManagerCallback(): ConnectivityManager.NetworkCallback {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n\n            connectivityManagerCallback = object : ConnectivityManager.NetworkCallback() {\n                override fun onAvailable(network: Network?) {\n                    postValue(true)\n                }\n\n                override fun onLost(network: Network?) {\n                    postValue(false)\n                }\n            }\n            return connectivityManagerCallback\n        } else {\n            throw IllegalAccessError(\"Should not happened\")\n        }\n    }\n\n    private val networkReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            updateConnection()\n        }\n    }\n\n    private fun updateConnection() {\n        val activeNetwork: NetworkInfo? = connectivityManager.activeNetworkInfo\n        postValue(activeNetwork?.isConnected == true)\n    }\n} \n</code></pre>\n\n<p>Use of the LiveData into any class:</p>\n\n<pre><code>NetworkConnectionLiveData(context ?: return)\n    .observe(viewLifecycleOwner, Observer { isConnected -&gt;\n        if (!isConnected) {\n            // Internet Not Available\n            return@Observer\n        }\n        // Internet Available\n})\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2482949,"reputation":147,"user_id":2162041,"display_name":"Akoder"},"score":0,"creation_date":1657612501,"post_id":72661263,"comment_id":128845838,"body_markdown":"can we use this approach when our application is closed ?","body":"can we use this approach when our application is closed ?"},{"owner":{"account_id":13117480,"reputation":371,"user_id":9476147,"display_name":"Syed Faizan Ali"},"score":1,"creation_date":1657699538,"post_id":72661263,"comment_id":128869931,"body_markdown":"I don&#39;t think so and haven&#39;t tested it for that kind of scenario. You might have to find a workaround solution with WorkManager. As of now, WorkManager is the recommended solution for all kinds of background tasks.","body":"I don&#39;t think so and haven&#39;t tested it for that kind of scenario. You might have to find a workaround solution with WorkManager. As of now, WorkManager is the recommended solution for all kinds of background tasks."}],"tags":[],"owner":{"account_id":13117480,"reputation":371,"user_id":9476147,"display_name":"Syed Faizan Ali"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1655477668,"creation_date":1655477668,"answer_id":72661263,"question_id":15698790,"body_markdown":"As of 2022 none of the above BroadcastReceiver approaches will work. The BroadcastReceiver method will not work anymore due to the restrictions imposed on Android 7.0. The latest and easiest way of checking whether the internet is available or not is using the following code. ***(Working on Android 12 tested)***\r\n\r\n    val networkRequest = NetworkRequest.Builder()\r\n            .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\r\n            .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n            .addTransportType(NetworkCapabilities.TRANSPORT_CELLULAR)\r\n            .build()\r\n    \r\n    private val networkCallback = object : ConnectivityManager.NetworkCallback() {\r\n        // network is available for use\r\n        override fun onAvailable(network: Network) {\r\n            super.onAvailable(network)\r\n        }\r\n    \r\n        // Network capabilities have changed for the network\r\n        override fun onCapabilitiesChanged(\r\n                network: Network,\r\n                networkCapabilities: NetworkCapabilities\r\n        ) {\r\n            super.onCapabilitiesChanged(network, networkCapabilities)\r\n            val unmetered = networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_NOT_METERED)\r\n        }\r\n    \r\n        // lost network connection\r\n        override fun onLost(network: Network) {\r\n            super.onLost(network)\r\n        }\r\n    }\r\n    \r\n    val connectivityManager = getSystemService(ConnectivityManager::class.java) as ConnectivityManager\r\n    connectivityManager.requestNetwork(networkRequest, networkCallback\r\n\r\nPlace this piece of code in a function and call this in **onCreate()** of your activity/fragment. You will be notified everytime when internet is connected or disconnected in **onAvailable()** and **onLost()** functions. Along with this, you can use liveData or whatever you like to broadcast these updates in other activities/fragments. \r\nThe official docs link: https://developer.android.com/training/monitoring-device-state/connectivity-status-type","title":"Broadcast receiver for checking internet connection in android app","body":"<p>As of 2022 none of the above BroadcastReceiver approaches will work. The BroadcastReceiver method will not work anymore due to the restrictions imposed on Android 7.0. The latest and easiest way of checking whether the internet is available or not is using the following code. <em><strong>(Working on Android 12 tested)</strong></em></p>\n<pre><code>val networkRequest = NetworkRequest.Builder()\n        .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\n        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n        .addTransportType(NetworkCapabilities.TRANSPORT_CELLULAR)\n        .build()\n\nprivate val networkCallback = object : ConnectivityManager.NetworkCallback() {\n    // network is available for use\n    override fun onAvailable(network: Network) {\n        super.onAvailable(network)\n    }\n\n    // Network capabilities have changed for the network\n    override fun onCapabilitiesChanged(\n            network: Network,\n            networkCapabilities: NetworkCapabilities\n    ) {\n        super.onCapabilitiesChanged(network, networkCapabilities)\n        val unmetered = networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_NOT_METERED)\n    }\n\n    // lost network connection\n    override fun onLost(network: Network) {\n        super.onLost(network)\n    }\n}\n\nval connectivityManager = getSystemService(ConnectivityManager::class.java) as ConnectivityManager\nconnectivityManager.requestNetwork(networkRequest, networkCallback\n</code></pre>\n<p>Place this piece of code in a function and call this in <strong>onCreate()</strong> of your activity/fragment. You will be notified everytime when internet is connected or disconnected in <strong>onAvailable()</strong> and <strong>onLost()</strong> functions. Along with this, you can use liveData or whatever you like to broadcast these updates in other activities/fragments.\nThe official docs link: <a href=\"https://developer.android.com/training/monitoring-device-state/connectivity-status-type\" rel=\"nofollow noreferrer\">https://developer.android.com/training/monitoring-device-state/connectivity-status-type</a></p>\n"},{"tags":[],"owner":{"account_id":1087775,"reputation":42376,"user_id":1083093,"accept_rate":67,"display_name":"Devrath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677679878,"creation_date":1677679878,"answer_id":75604825,"question_id":15698790,"body_markdown":" - Now you don&#39;t need a broadcast receiver to observe the network\r\n   changes\r\n - We can achieve this using the flow\r\n\r\n***[Here is a better working solution with source code and demo implemented in my github][1]***\r\n\r\n\r\n  [1]: https://github.com/devrath/droid-network-observer","title":"Broadcast receiver for checking internet connection in android app","body":"<ul>\n<li>Now you don't need a broadcast receiver to observe the network\nchanges</li>\n<li>We can achieve this using the flow</li>\n</ul>\n<p><em><strong><a href=\"https://github.com/devrath/droid-network-observer\" rel=\"nofollow noreferrer\">Here is a better working solution with source code and demo implemented in my github</a></strong></em></p>\n"}],"owner":{"account_id":1299099,"reputation":26248,"user_id":2218452,"accept_rate":36,"display_name":"Nikhil Agrawal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":331087,"favorite_count":0,"down_vote_count":0,"up_vote_count":273,"accepted_answer_id":15700728,"answer_count":21,"score":273,"last_activity_date":1686656855,"creation_date":1364540075,"question_id":15698790,"body_markdown":"I am developing an Android broadcast receiver for checking the internet connection.\r\n\r\nThe problem is that my broadcast receiver is being called two times. I want it to get called only when the network is available. If it is unavailable, I don&#39;t want to be notified.\r\n\r\nThis is the broadcast receiver\r\n\r\n    public class NetworkChangeReceiver extends BroadcastReceiver {\r\n    \r\n    \t@Override\r\n    \tpublic void onReceive(final Context context, final Intent intent) {\r\n    \t\tfinal ConnectivityManager connMgr = (ConnectivityManager) context\r\n    \t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \r\n    \t\tfinal android.net.NetworkInfo wifi = connMgr\r\n    \t\t\t\t.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n    \r\n    \t\tfinal android.net.NetworkInfo mobile = connMgr\r\n    \t\t\t\t.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n    \r\n    \t\tif (wifi.isAvailable() || mobile.isAvailable()) {\r\n    \t\t\t// Do something\r\n    \r\n    \t\t\tLog.d(&quot;Network Available &quot;, &quot;Flag No 1&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\nThis is the manifest.xml\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.broadcastreceiverforinternetconnection&quot;\r\n        android:versionCode=&quot;1&quot;\r\n        android:versionName=&quot;1.0&quot; &gt;\r\n    \r\n        &lt;uses-sdk\r\n            android:minSdkVersion=&quot;8&quot;\r\n            android:targetSdkVersion=&quot;17&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@drawable/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/AppTheme&quot; &gt;\r\n            &lt;receiver android:name=&quot;.NetworkChangeReceiver&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;","title":"Broadcast receiver for checking internet connection in android app","body":"<p>I am developing an Android broadcast receiver for checking the internet connection.</p>\n<p>The problem is that my broadcast receiver is being called two times. I want it to get called only when the network is available. If it is unavailable, I don't want to be notified.</p>\n<p>This is the broadcast receiver</p>\n<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        final ConnectivityManager connMgr = (ConnectivityManager) context\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n        final android.net.NetworkInfo wifi = connMgr\n                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n\n        final android.net.NetworkInfo mobile = connMgr\n                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n        if (wifi.isAvailable() || mobile.isAvailable()) {\n            // Do something\n\n            Log.d(&quot;Network Available &quot;, &quot;Flag No 1&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This is the manifest.xml</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.broadcastreceiverforinternetconnection&quot;\n    android:versionCode=&quot;1&quot;\n    android:versionName=&quot;1.0&quot; &gt;\n\n    &lt;uses-sdk\n        android:minSdkVersion=&quot;8&quot;\n        android:targetSdkVersion=&quot;17&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@drawable/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:theme=&quot;@style/AppTheme&quot; &gt;\n        &lt;receiver android:name=&quot;.NetworkChangeReceiver&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\n                &lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","gzipinputstream"],"comments":[{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1686651098,"post_id":76463730,"comment_id":134824978,"body_markdown":"So which command did you use to unzip the compressed file on console?","body":"So which command did you use to unzip the compressed file on console?"},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1686651280,"post_id":76463730,"comment_id":134825023,"body_markdown":"gzip -d application.log.gz","body":"gzip -d application.log.gz"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1686651471,"post_id":76463730,"comment_id":134825063,"body_markdown":"IIRC, `gzip -d` does this same as `gunzip`, which does _&quot;gunzip can currently decompress files created by gzip, zip, compress, compress -H or pack. The detection of the input format is automatic.&quot;_, so maybe your file isn&#39;t actually gzip compressed, but using a different format.","body":"IIRC, <code>gzip -d</code> does this same as <code>gunzip</code>, which does <i>&quot;gunzip can currently decompress files created by gzip, zip, compress, compress -H or pack. The detection of the input format is automatic.&quot;</i>, so maybe your file isn&#39;t actually gzip compressed, but using a different format."},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1686652201,"post_id":76463730,"comment_id":134825208,"body_markdown":"But if i check the validity of the file $ gzip -v -t application.2.log.gz . I get this reponse - \napplication.2.log.gz:     OK","body":"But if i check the validity of the file $ gzip -v -t application.2.log.gz . I get this reponse -  application.2.log.gz:     OK"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1686652682,"post_id":76463730,"comment_id":134825304,"body_markdown":"If `-d` decompress various formats, why do you assume that `-t` wouldn&#39;t be able to test those various formats? What are the first two bytes of the file? If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip.","body":"If <code>-d</code> decompress various formats, why do you assume that <code>-t</code> wouldn&#39;t be able to test those various formats? What are the first two bytes of the file? If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686656231,"post_id":76463730,"comment_id":134826111,"body_markdown":"*If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip* And setting those two leading bytes to zero on a valid gzipped file will give you exactly that exception","body":"<i>If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip</i> And setting those two leading bytes to zero on a valid gzipped file will give you exactly that exception"}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686656097,"post_id":76464257,"comment_id":134826077,"body_markdown":"The gzipped file has nothing to do with the charset parameter. That&#39;s for the `Reader` decoding *the text* that is the content of the gzipped file","body":"The gzipped file has nothing to do with the charset parameter. That&#39;s for the <code>Reader</code> decoding <i>the text</i> that is the content of the gzipped file"},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1686656616,"post_id":76464257,"comment_id":134826190,"body_markdown":"@g00se you are correct, just noticed that it was not GZIPInputStream constructor parameter. Just modified my answer to remove the charset detail","body":"@g00se you are correct, just noticed that it was not GZIPInputStream constructor parameter. Just modified my answer to remove the charset detail"},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1686657485,"post_id":76464257,"comment_id":134826374,"body_markdown":"The logs are generated by me and i zip them in the correct format. Maybe my approach of zipping the logs is wrong","body":"The logs are generated by me and i zip them in the correct format. Maybe my approach of zipping the logs is wrong"},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1686658619,"post_id":76464257,"comment_id":134826620,"body_markdown":"Write a small java program that zips some text file and create a zip. See if you can unzip it with your java code and if so see how your 2 zips differ","body":"Write a small java program that zips some text file and create a zip. See if you can unzip it with your java code and if so see how your 2 zips differ"},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1686659948,"post_id":76464257,"comment_id":134826982,"body_markdown":"I will try that. Thank You :)","body":"I will try that. Thank You :)"}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686656644,"creation_date":1686654307,"answer_id":76464257,"question_id":76463730,"body_markdown":"Your code looks correct I think that your file may be compressed in format that is not GZIP and that format is supported gzip command line utility but not by `GZIPInputStream` class. If this is the case one of the workarounds would be is to invoke command line utility from Java using [ProcessBuilder][1] class. This is definitely not ideal as your immediately becomes operating system dependent, but it will work. Other options would be to request that your log files provided to you be compressed in GZIP (but that depends on who is your log files supplier and if they can and willing to co-operate with you) or look for 3d party java library that supports the format in which your files are compressed \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html","title":"Not in GZIP format java while reading the zip dynamically","body":"<p>Your code looks correct I think that your file may be compressed in format that is not GZIP and that format is supported gzip command line utility but not by <code>GZIPInputStream</code> class. If this is the case one of the workarounds would be is to invoke command line utility from Java using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">ProcessBuilder</a> class. This is definitely not ideal as your immediately becomes operating system dependent, but it will work. Other options would be to request that your log files provided to you be compressed in GZIP (but that depends on who is your log files supplier and if they can and willing to co-operate with you) or look for 3d party java library that supports the format in which your files are compressed</p>\n"},{"tags":[],"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686655593,"creation_date":1686655593,"answer_id":76464449,"question_id":76463730,"body_markdown":"Ok, so it&#39;s not GZip but it could be ZIP right?\r\n\r\n```\r\n        String fileZip = &quot;src/main/resources/unzipTest/compressed.zip&quot;;\r\n        File destDir = new File(&quot;src/main/resources/unzipTest&quot;);\r\n\r\n        byte[] buffer = new byte[1024];\r\n        ZipInputStream zis = new ZipInputStream(new FileInputStream(fileZip));\r\n        ZipEntry zipEntry = zis.getNextEntry();\r\n        \r\n\t\twhile (zipEntry != null) {\r\n\t\t\tFile newFile = newFile(destDir, zipEntry);\r\n\t\t\tif (zipEntry.isDirectory()) {\r\n\t\t\t\tif (!newFile.isDirectory() &amp;&amp; !newFile.mkdirs()) {\r\n\t\t\t\t\tthrow new IOException(&quot;Failed to create directory &quot; + newFile);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// fix for Windows-created archives\r\n\t\t\t\tFile parent = newFile.getParentFile();\r\n\t\t\t\tif (!parent.isDirectory() &amp;&amp; !parent.mkdirs()) {\r\n\t\t\t\t\tthrow new IOException(&quot;Failed to create directory &quot; + parent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// write file content\r\n\t\t\t\tFileOutputStream fos = new FileOutputStream(newFile);\r\n\t\t\t\tint len;\r\n\t\t\t\twhile ((len = zis.read(buffer)) &gt; 0) {\r\n\t\t\t\t\tfos.write(buffer, 0, len);\r\n\t\t\t\t}\r\n\t\t\t\tfos.close();\r\n\t\t\t}\r\n\t\t\tzipEntry = zis.getNextEntry();\r\n\t\t}\r\n\r\n        zis.closeEntry();\r\n        zis.close();\r\n```\r\n\r\nas well as this:\r\n```\r\npublic static File newFile(File destinationDir, ZipEntry zipEntry) throws IOException {\r\n    File destFile = new File(destinationDir, zipEntry.getName());\r\n\r\n    String destDirPath = destinationDir.getCanonicalPath();\r\n    String destFilePath = destFile.getCanonicalPath();\r\n\r\n    if (!destFilePath.startsWith(destDirPath + File.separator)) {\r\n        throw new IOException(&quot;Entry is outside of the target dir: &quot; + zipEntry.getName());\r\n    }\r\n\r\n    return destFile;\r\n}\r\n```\r\n\r\ngive that a shot.","title":"Not in GZIP format java while reading the zip dynamically","body":"<p>Ok, so it's not GZip but it could be ZIP right?</p>\n<pre><code>        String fileZip = &quot;src/main/resources/unzipTest/compressed.zip&quot;;\n        File destDir = new File(&quot;src/main/resources/unzipTest&quot;);\n\n        byte[] buffer = new byte[1024];\n        ZipInputStream zis = new ZipInputStream(new FileInputStream(fileZip));\n        ZipEntry zipEntry = zis.getNextEntry();\n        \n        while (zipEntry != null) {\n            File newFile = newFile(destDir, zipEntry);\n            if (zipEntry.isDirectory()) {\n                if (!newFile.isDirectory() &amp;&amp; !newFile.mkdirs()) {\n                    throw new IOException(&quot;Failed to create directory &quot; + newFile);\n                }\n            } else {\n                // fix for Windows-created archives\n                File parent = newFile.getParentFile();\n                if (!parent.isDirectory() &amp;&amp; !parent.mkdirs()) {\n                    throw new IOException(&quot;Failed to create directory &quot; + parent);\n                }\n\n                // write file content\n                FileOutputStream fos = new FileOutputStream(newFile);\n                int len;\n                while ((len = zis.read(buffer)) &gt; 0) {\n                    fos.write(buffer, 0, len);\n                }\n                fos.close();\n            }\n            zipEntry = zis.getNextEntry();\n        }\n\n        zis.closeEntry();\n        zis.close();\n</code></pre>\n<p>as well as this:</p>\n<pre><code>public static File newFile(File destinationDir, ZipEntry zipEntry) throws IOException {\n    File destFile = new File(destinationDir, zipEntry.getName());\n\n    String destDirPath = destinationDir.getCanonicalPath();\n    String destFilePath = destFile.getCanonicalPath();\n\n    if (!destFilePath.startsWith(destDirPath + File.separator)) {\n        throw new IOException(&quot;Entry is outside of the target dir: &quot; + zipEntry.getName());\n    }\n\n    return destFile;\n}\n</code></pre>\n<p>give that a shot.</p>\n"}],"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686656644,"creation_date":1686650273,"question_id":76463730,"body_markdown":"my requirement is to unzip a log file dynamically and write it in the console. But I am getting an exception \r\n\r\n```\r\njava.util.zip.ZipException: Not in GZIP format\r\n\tat java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166) ~[?:?]\r\n\tat java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80) ~[?:?]\r\n\tat java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92) ~[?:?]\r\n```\r\n\r\nhere is my code \r\n\r\n``` java\r\n\r\n private static void readLogFile(File f) {\r\n        try(BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(new FileInputStream(f)), &quot;UTF-8&quot;))) {\r\n            String  nextLine;\r\n            while ((nextLine = reader.readLine()) != null) {\r\n                System.out.println(nextLine);\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            logger.error(&quot;file doesn&#39;t exist.&quot; );\r\n        } catch (IOException e) {\r\n            logger.error(&quot;Error reading the file&quot;, e);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nThe size of my file is around 50 MB\r\nThe size of my .gz file is 2.4 MB\r\n\r\nI have already tried unzipping the file in the terminal and it works so the file is not corrupt as well\r\n\r\ncan someone help me with what is going wrong here?\r\n","title":"Not in GZIP format java while reading the zip dynamically","body":"<p>my requirement is to unzip a log file dynamically and write it in the console. But I am getting an exception</p>\n<pre><code>java.util.zip.ZipException: Not in GZIP format\n    at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166) ~[?:?]\n    at java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80) ~[?:?]\n    at java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92) ~[?:?]\n</code></pre>\n<p>here is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n private static void readLogFile(File f) {\n        try(BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(new FileInputStream(f)), &quot;UTF-8&quot;))) {\n            String  nextLine;\n            while ((nextLine = reader.readLine()) != null) {\n                System.out.println(nextLine);\n            }\n        } catch (FileNotFoundException e) {\n            logger.error(&quot;file doesn't exist.&quot; );\n        } catch (IOException e) {\n            logger.error(&quot;Error reading the file&quot;, e);\n        }\n    }\n\n</code></pre>\n<p>The size of my file is around 50 MB\nThe size of my .gz file is 2.4 MB</p>\n<p>I have already tried unzipping the file in the terminal and it works so the file is not corrupt as well</p>\n<p>can someone help me with what is going wrong here?</p>\n"},{"tags":["java","gradle","cucumber"],"comments":[{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1498559973,"post_id":44776319,"comment_id":76536818,"body_markdown":"I just tested and it works fine here. Can you provide an [MCVE](http://stackoverflow.com/help/mcve)?","body":"I just tested and it works fine here. Can you provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"}],"answers":[{"comments":[{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1498556997,"post_id":44776664,"comment_id":76534801,"body_markdown":"How should that help at all? Setting system properties on the Gradle process is fine. Setting the properties as project properties does not help at all in resolving the question of the OP at all.","body":"How should that help at all? Setting system properties on the Gradle process is fine. Setting the properties as project properties does not help at all in resolving the question of the OP at all."}],"tags":[],"owner":{"account_id":11197635,"reputation":82,"user_id":8215796,"display_name":"codespawner"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1498555520,"creation_date":1498555520,"answer_id":44776664,"question_id":44776319,"body_markdown":"gradle is having -P or --project-prop option. Try this one and see.\r\n\r\n-P, --project-prop      Set project property for the build script","title":"Passing jvm arguments to Gradle test task","body":"<p>gradle is having -P or --project-prop option. Try this one and see.</p>\n\n<p>-P, --project-prop      Set project property for the build script</p>\n"}],"owner":{"account_id":3239543,"reputation":173,"user_id":2732921,"accept_rate":20,"display_name":"Softengilker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3745,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1686656259,"creation_date":1498554535,"question_id":44776319,"body_markdown":"I would like to pass JVM parameters to my Gradle test task. I use the parameters in a Cucumber feature file: `${app.url}`. In the `build.gradle` file, I put those lines:\r\n\r\n    test {\r\n        testLogging.showStandardStreams = true\r\n        systemProperties System.getProperties()\r\n    }\r\n\r\nWhen I execute `gradle test -Dapp.url=http://.....`, I don&#39;t see the parameter was passed to the application. I also tried the below, but the result is the same:\r\n\r\n    test {\r\n        testLogging.showStandardStreams = true\r\n        systemProperty &quot;app.url&quot;, System.getProperty(&quot;app.url&quot;)\r\n    }\r\n\r\nWhen I use Maven and pass the same parameters as Jvm arguments, it works fine. Now I would like to switch to the Gradle, but I am stuck with passing parameters.\r\n\r\n","title":"Passing jvm arguments to Gradle test task","body":"<p>I would like to pass JVM parameters to my Gradle test task. I use the parameters in a Cucumber feature file: <code>${app.url}</code>. In the <code>build.gradle</code> file, I put those lines:</p>\n\n<pre><code>test {\n    testLogging.showStandardStreams = true\n    systemProperties System.getProperties()\n}\n</code></pre>\n\n<p>When I execute <code>gradle test -Dapp.url=http://.....</code>, I don't see the parameter was passed to the application. I also tried the below, but the result is the same:</p>\n\n<pre><code>test {\n    testLogging.showStandardStreams = true\n    systemProperty \"app.url\", System.getProperty(\"app.url\")\n}\n</code></pre>\n\n<p>When I use Maven and pass the same parameters as Jvm arguments, it works fine. Now I would like to switch to the Gradle, but I am stuck with passing parameters.</p>\n"},{"tags":["java","junit"],"answers":[{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1633235838,"post_id":69422096,"comment_id":122703259,"body_markdown":"One way to do this is to use a `@BeforeEach` annotation on the setup method which creates the `AppointmentService`.","body":"One way to do this is to use a <code>@BeforeEach</code> annotation on the setup method which creates the <code>AppointmentService</code>."},{"owner":{"account_id":19552430,"reputation":31,"user_id":14307685,"display_name":"EEngvall"},"score":0,"creation_date":1633236335,"post_id":69422096,"comment_id":122703335,"body_markdown":"So I assumed that was the case and switched the ```@BeforeAll``` to ```@BeforeEach``` and at that point the tests did not run at all.  Am I missing something for that to work correctly?","body":"So I assumed that was the case and switched the <code>@BeforeAll</code> to <code>@BeforeEach</code> and at that point the tests did not run at all.  Am I missing something for that to work correctly?"},{"owner":{"account_id":6645863,"reputation":687,"user_id":5129997,"accept_rate":75,"display_name":"THe_strOX"},"score":0,"creation_date":1633270879,"post_id":69422096,"comment_id":122709791,"body_markdown":"Do this in your @BeforeAll `appointmentService = new AppointmentService()`. Also remove the `reference` field and `getService` method. They are useless and is also a bad practice.","body":"Do this in your @BeforeAll <code>appointmentService = new AppointmentService()</code>. Also remove the <code>reference</code> field and <code>getService</code> method. They are useless and is also a bad practice."},{"owner":{"account_id":19552430,"reputation":31,"user_id":14307685,"display_name":"EEngvall"},"score":0,"creation_date":1633281422,"post_id":69422096,"comment_id":122712595,"body_markdown":"I removed both the reference and the getService method and was able to run my tests successfully.  I used the singleton due to it being how a previous assignment approached a similar problem and me unfortunately approaching this one the same way. Thanks for all the help!","body":"I removed both the reference and the getService method and was able to run my tests successfully.  I used the singleton due to it being how a previous assignment approached a similar problem and me unfortunately approaching this one the same way. Thanks for all the help!"}],"tags":[],"owner":{"account_id":6645863,"reputation":687,"user_id":5129997,"accept_rate":75,"display_name":"THe_strOX"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633235623,"creation_date":1633235623,"answer_id":69422096,"question_id":69422083,"body_markdown":"You are using same `appointmentService` instance for your 2 test and adding the appointment with same id (&quot;123456&quot;) in your 2 test. So, when tests are ran together, you next test will always fail as you are assuming that the id &quot;123456&quot; is not present in second test, but it is.\r\n\r\nYou should create a new `appointmentService` for each test as unit test = test in isolation, especially when your testing instance has some states.","title":"Junit Tests pass individually but fail when run together","body":"<p>You are using same <code>appointmentService</code> instance for your 2 test and adding the appointment with same id (&quot;123456&quot;) in your 2 test. So, when tests are ran together, you next test will always fail as you are assuming that the id &quot;123456&quot; is not present in second test, but it is.</p>\n<p>You should create a new <code>appointmentService</code> for each test as unit test = test in isolation, especially when your testing instance has some states.</p>\n"},{"comments":[{"owner":{"account_id":19552430,"reputation":31,"user_id":14307685,"display_name":"EEngvall"},"score":0,"creation_date":1633244292,"post_id":69422316,"comment_id":122704298,"body_markdown":"I tried your suggestions and I&#39;m still running into the same issue, all tests pass when ran alone, but when run together I get 4 failures.","body":"I tried your suggestions and I&#39;m still running into the same issue, all tests pass when ran alone, but when run together I get 4 failures."},{"owner":{"account_id":11890894,"reputation":143,"user_id":8701784,"display_name":"Yakim"},"score":1,"creation_date":1633260622,"post_id":69422316,"comment_id":122707513,"body_markdown":"The reason is private STATIC AppointmentService reference = new AppointmentService(); staic in calls (not test).  Since it is statijc you have the same reference for each test in suite. Any particular reason it is static? I can guess you want just a singleton, it does not look like usual singleton. If there is not any reason to have self-made singleton (it is antipattern by the way) make just refacror code itself (get rid of static field reference)","body":"The reason is private STATIC AppointmentService reference = new AppointmentService(); staic in calls (not test).  Since it is statijc you have the same reference for each test in suite. Any particular reason it is static? I can guess you want just a singleton, it does not look like usual singleton. If there is not any reason to have self-made singleton (it is antipattern by the way) make just refacror code itself (get rid of static field reference)"},{"owner":{"account_id":19552430,"reputation":31,"user_id":14307685,"display_name":"EEngvall"},"score":1,"creation_date":1633281332,"post_id":69422316,"comment_id":122712576,"body_markdown":"Thank you  very much for all the feedback and advice.  The reason I had used static and created the singleton was because that is how my professor coded the solution to the last assignment which is very similar so I assumed I would approach this problem the same way. I made the changes you suggested and I was able to process all of the tests successfully when ran together and independently.  Thank you!","body":"Thank you  very much for all the feedback and advice.  The reason I had used static and created the singleton was because that is how my professor coded the solution to the last assignment which is very similar so I assumed I would approach this problem the same way. I made the changes you suggested and I was able to process all of the tests successfully when ran together and independently.  Thank you!"}],"tags":[],"owner":{"account_id":11890894,"reputation":143,"user_id":8701784,"display_name":"Yakim"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633260754,"creation_date":1633239045,"answer_id":69422316,"question_id":69422083,"body_markdown":"Remove static in here \r\n\r\n    private static AppointmentService appointmentService;\\\r\n\r\nAnd fot setUp method too. Also change @BeforeAll to @BeforeEach it will make create new appointmentService for each test to isolate test cases. \r\n\r\nAlso if there is no any reason to have reference as static then class itself it&#39;s better to refactor (get rid of static reference) self-made singleton is kind of anti-pattern. \r\nNow when code calls getReference it returns always the same instance, that&#39;s why it does not work while running all tests.\r\n\r\nSee also https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\r\nI hope it helps","title":"Junit Tests pass individually but fail when run together","body":"<p>Remove static in here</p>\n<pre><code>private static AppointmentService appointmentService;\\\n</code></pre>\n<p>And fot setUp method too. Also change @BeforeAll to @BeforeEach it will make create new appointmentService for each test to isolate test cases.</p>\n<p>Also if there is no any reason to have reference as static then class itself it's better to refactor (get rid of static reference) self-made singleton is kind of anti-pattern.\nNow when code calls getReference it returns always the same instance, that's why it does not work while running all tests.</p>\n<p>See also <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html</a>\nI hope it helps</p>\n"},{"tags":[],"owner":{"account_id":12632991,"reputation":1,"user_id":9183605,"display_name":"Th3Arock"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686656022,"creation_date":1686656022,"answer_id":76464505,"question_id":69422083,"body_markdown":"Use @beforeEach instead @beforeAll \r\n\r\n \r\n\r\n    @BeforeAll\r\n        static void setUp() {\r\n            appointmentService = AppointmentService.getService();\r\n        }","title":"Junit Tests pass individually but fail when run together","body":"<p>Use @beforeEach instead @beforeAll</p>\n<pre><code>@BeforeAll\n    static void setUp() {\n        appointmentService = AppointmentService.getService();\n    }\n</code></pre>\n"}],"owner":{"account_id":19552430,"reputation":31,"user_id":14307685,"display_name":"EEngvall"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11873,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1686656022,"creation_date":1633235340,"question_id":69422083,"body_markdown":"I&#39;m currently working on an assignment for school and I&#39;m struggling with the testing portion.  For some reason the unit tests run fine when run individually but not when run together.  I know this has something to do with me sharing the object between them when I shouldn&#39;t be based on my prior searches, but I can not for the life of me figure out what needs to be changed to remedy this problem.  The code is below for both the AppointmentService class as well as the AppointmentServiceTest class.  Any help would be greatly appreciated as I&#39;ve been stuck on this for some time now and know it&#39;s probably something that someone else will see immediately. \r\n\r\nThe AppointmentServiceTest class\r\n\r\n```package test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport main.Appointment;\r\nimport main.AppointmentService;\r\n\r\nclass AppointmentServiceTest {\r\n\r\n\tprivate static AppointmentService appointmentService;\r\n\t\r\n\t@BeforeAll\r\n\tstatic void setUp() {\r\n\t\tappointmentService = AppointmentService.getService();\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testAddAppointmentSuccess() throws ParseException {\r\n\t\tAppointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tassertTrue(appointmentService.addAppointment(appointment));\r\n\t\t\r\n\t\tAppointment cachedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(cachedAppointment != null);\r\n\t\tassertTrue(cachedAppointment.getAppointmentId().equals(&quot;123456&quot;));\r\n\t\tassertTrue(cachedAppointment.getAppointmentDate().equals(&quot;2022-10-01&quot;));\r\n\t\tassertTrue(cachedAppointment.getAppointmentDescription().equals(&quot;Appointment Description String&quot;));\t\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testAddMultipleAppointmentsSuccess() throws ParseException {\r\n\t\tAppointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tAppointment appointment2 = new Appointment(&quot;1234567&quot;, &quot;2022-10-02&quot;, &quot;Appointment Description String2&quot;);\r\n\t\t\r\n\t\tassertTrue(appointmentService.addAppointment(appointment1));\r\n\t\tAppointment cachedAppointment1 = appointmentService.getAppointment(appointment1.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(cachedAppointment1 != null);\r\n\t\tassertTrue(cachedAppointment1.getAppointmentId().equals(&quot;123456&quot;));\r\n\t\tassertTrue(cachedAppointment1.getAppointmentDate().equals(&quot;2022-10-01&quot;));\r\n\t\tassertTrue(cachedAppointment1.getAppointmentDescription().equals(&quot;Appointment Description String&quot;));\t\r\n\t\t\r\n\t\tassertTrue(appointmentService.addAppointment(appointment2));\r\n\t\tAppointment cachedAppointment2 = appointmentService.getAppointment(appointment1.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(cachedAppointment2 != null);\r\n\t\tassertTrue(cachedAppointment2.getAppointmentId().equals(&quot;1234567&quot;));\r\n\t\tassertTrue(cachedAppointment2.getAppointmentDate().equals(&quot;2022-10-02&quot;));\r\n\t\tassertTrue(cachedAppointment2.getAppointmentDescription().equals(&quot;Appointment Description String2&quot;));\r\n\t\t\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testAddAppoitnmentDuplicateIdFail() throws ParseException {\r\n\t\tAppointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tAppointment appointment2 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\r\n\r\n\t\tassertTrue(appointmentService.addAppointment(appointment1));\r\n\t\tassertFalse(appointmentService.addAppointment(appointment2));\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testGetAppointmentAndUpdateSuccess() throws ParseException {\r\n\t\tAppointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tassertTrue(appointmentService.addAppointment(appointment));\r\n\t\t\r\n\t\tAppointment updatedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\r\n\t\tupdatedAppointment.setAppointmentDate(&quot;2022-10-02&quot;);\r\n\t\tupdatedAppointment.setAppointmentDescription(&quot;New Description&quot;);\r\n\t\t\r\n\t\tupdatedAppointment = appointmentService.getAppointment(updatedAppointment.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(updatedAppointment.getAppointmentDescription().equals(&quot;New Description&quot;));\r\n\t\tassertTrue(updatedAppointment.getAppointmentDate().equals(&quot;2022-10-02&quot;));\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testGetAppointmentAndDeleteSuccess() throws ParseException {\r\n\t\tAppointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\t\r\n\t\tassertTrue(appointmentService.addAppointment(appointment));\r\n\t\t\r\n\t\tappointment = appointmentService.getAppointment(appointment.getAppointmentId());\r\n\t\tassertTrue(appointment != null);\r\n\t\t\r\n\t\tassertTrue(appointmentService.deleteAppointment(appointment.getAppointmentId()));\r\n\t\tassertTrue(appointmentService.getAppointment(appointment.getAppointmentId()) == null);\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testDeleteInvalidAppointmentFail() {\r\n\t\tString invalidAppointmentIdString = &quot;123&quot;;\r\n\t\t\r\n\t\tassertFalse(appointmentService.deleteAppointment(invalidAppointmentIdString));\r\n\t}\r\n```\r\n\r\nAnd the AppointmentService Class\r\n```package main;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class AppointmentService {\r\n\r\n\tprivate static AppointmentService reference = new AppointmentService();\r\n\tprivate final Map&lt;String, Appointment&gt; appointmentList;\r\n\t\r\n\tAppointmentService() {\r\n\t\tthis.appointmentList = new HashMap&lt;String, Appointment&gt;();\r\n\t}\r\n\t\r\n\tpublic static AppointmentService getService() {\r\n\t\treturn reference;\r\n\t}\r\n\t\r\n\tpublic boolean addAppointment(Appointment appointment) {\r\n\t\tboolean isSuccess = false;\r\n\t\t\r\n\t\tif(!appointmentList.containsKey(appointment.getAppointmentId())) {\r\n\t\t\tappointmentList.put(appointment.getAppointmentId(), appointment);\r\n\t\t\tisSuccess = true;\r\n\t\t}\r\n\t\treturn isSuccess;\r\n\t}\r\n\t\r\n\tpublic boolean deleteAppointment(String appointmentId) {\r\n\t\treturn appointmentList.remove(appointmentId) != null;\r\n\t}\r\n\t\r\n\tpublic Appointment getAppointment(String appointmentId) {\r\n\t\treturn appointmentList.get(appointmentId);\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n ","title":"Junit Tests pass individually but fail when run together","body":"<p>I'm currently working on an assignment for school and I'm struggling with the testing portion.  For some reason the unit tests run fine when run individually but not when run together.  I know this has something to do with me sharing the object between them when I shouldn't be based on my prior searches, but I can not for the life of me figure out what needs to be changed to remedy this problem.  The code is below for both the AppointmentService class as well as the AppointmentServiceTest class.  Any help would be greatly appreciated as I've been stuck on this for some time now and know it's probably something that someone else will see immediately.</p>\n<p>The AppointmentServiceTest class</p>\n<pre><code>\nimport static org.junit.jupiter.api.Assertions.*;\n\nimport java.text.ParseException;\n\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport main.Appointment;\nimport main.AppointmentService;\n\nclass AppointmentServiceTest {\n\n    private static AppointmentService appointmentService;\n    \n    @BeforeAll\n    static void setUp() {\n        appointmentService = AppointmentService.getService();\n    }\n    \n    @Test\n    void testAddAppointmentSuccess() throws ParseException {\n        Appointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        assertTrue(appointmentService.addAppointment(appointment));\n        \n        Appointment cachedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\n        \n        assertTrue(cachedAppointment != null);\n        assertTrue(cachedAppointment.getAppointmentId().equals(&quot;123456&quot;));\n        assertTrue(cachedAppointment.getAppointmentDate().equals(&quot;2022-10-01&quot;));\n        assertTrue(cachedAppointment.getAppointmentDescription().equals(&quot;Appointment Description String&quot;)); \n    }\n    \n    @Test\n    void testAddMultipleAppointmentsSuccess() throws ParseException {\n        Appointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        Appointment appointment2 = new Appointment(&quot;1234567&quot;, &quot;2022-10-02&quot;, &quot;Appointment Description String2&quot;);\n        \n        assertTrue(appointmentService.addAppointment(appointment1));\n        Appointment cachedAppointment1 = appointmentService.getAppointment(appointment1.getAppointmentId());\n        \n        assertTrue(cachedAppointment1 != null);\n        assertTrue(cachedAppointment1.getAppointmentId().equals(&quot;123456&quot;));\n        assertTrue(cachedAppointment1.getAppointmentDate().equals(&quot;2022-10-01&quot;));\n        assertTrue(cachedAppointment1.getAppointmentDescription().equals(&quot;Appointment Description String&quot;));    \n        \n        assertTrue(appointmentService.addAppointment(appointment2));\n        Appointment cachedAppointment2 = appointmentService.getAppointment(appointment1.getAppointmentId());\n        \n        assertTrue(cachedAppointment2 != null);\n        assertTrue(cachedAppointment2.getAppointmentId().equals(&quot;1234567&quot;));\n        assertTrue(cachedAppointment2.getAppointmentDate().equals(&quot;2022-10-02&quot;));\n        assertTrue(cachedAppointment2.getAppointmentDescription().equals(&quot;Appointment Description String2&quot;));\n        \n    }\n    \n    @Test\n    void testAddAppoitnmentDuplicateIdFail() throws ParseException {\n        Appointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        Appointment appointment2 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n\n\n        assertTrue(appointmentService.addAppointment(appointment1));\n        assertFalse(appointmentService.addAppointment(appointment2));\n    }\n    \n    @Test\n    void testGetAppointmentAndUpdateSuccess() throws ParseException {\n        Appointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        assertTrue(appointmentService.addAppointment(appointment));\n        \n        Appointment updatedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\n        updatedAppointment.setAppointmentDate(&quot;2022-10-02&quot;);\n        updatedAppointment.setAppointmentDescription(&quot;New Description&quot;);\n        \n        updatedAppointment = appointmentService.getAppointment(updatedAppointment.getAppointmentId());\n        \n        assertTrue(updatedAppointment.getAppointmentDescription().equals(&quot;New Description&quot;));\n        assertTrue(updatedAppointment.getAppointmentDate().equals(&quot;2022-10-02&quot;));\n    }\n    \n    @Test\n    void testGetAppointmentAndDeleteSuccess() throws ParseException {\n        Appointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        \n        assertTrue(appointmentService.addAppointment(appointment));\n        \n        appointment = appointmentService.getAppointment(appointment.getAppointmentId());\n        assertTrue(appointment != null);\n        \n        assertTrue(appointmentService.deleteAppointment(appointment.getAppointmentId()));\n        assertTrue(appointmentService.getAppointment(appointment.getAppointmentId()) == null);\n    }\n    \n    @Test\n    void testDeleteInvalidAppointmentFail() {\n        String invalidAppointmentIdString = &quot;123&quot;;\n        \n        assertFalse(appointmentService.deleteAppointment(invalidAppointmentIdString));\n    }\n</code></pre>\n<p>And the AppointmentService Class</p>\n<pre><code>\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class AppointmentService {\n\n    private static AppointmentService reference = new AppointmentService();\n    private final Map&lt;String, Appointment&gt; appointmentList;\n    \n    AppointmentService() {\n        this.appointmentList = new HashMap&lt;String, Appointment&gt;();\n    }\n    \n    public static AppointmentService getService() {\n        return reference;\n    }\n    \n    public boolean addAppointment(Appointment appointment) {\n        boolean isSuccess = false;\n        \n        if(!appointmentList.containsKey(appointment.getAppointmentId())) {\n            appointmentList.put(appointment.getAppointmentId(), appointment);\n            isSuccess = true;\n        }\n        return isSuccess;\n    }\n    \n    public boolean deleteAppointment(String appointmentId) {\n        return appointmentList.remove(appointmentId) != null;\n    }\n    \n    public Appointment getAppointment(String appointmentId) {\n        return appointmentList.get(appointmentId);\n    }\n    \n}\n\n\n \n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","build","java-home"],"comments":[{"owner":{"account_id":13474768,"reputation":3872,"user_id":9722122,"display_name":"Mustahsan"},"score":0,"creation_date":1686578642,"post_id":76457418,"comment_id":134813898,"body_markdown":"did you try changing SDK in intelliJ config in File &gt; Project Structure &gt; Project and also on File &gt; Project Structure &gt; Modules","body":"did you try changing SDK in intelliJ config in File &gt; Project Structure &gt; Project and also on File &gt; Project Structure &gt; Modules"},{"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"score":0,"creation_date":1686579866,"post_id":76457418,"comment_id":134814209,"body_markdown":"Oh yeah I tried. I really tried everything I found on internet. (btw i&#39;m using Intelij 2021.2.4)","body":"Oh yeah I tried. I really tried everything I found on internet. (btw i&#39;m using Intelij 2021.2.4)"}],"answers":[{"tags":[],"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686655900,"creation_date":1686655862,"answer_id":76464488,"question_id":76457418,"body_markdown":"OK actually to fix this I just unistalled all java instalations (even in programfiles/java) and re install intellij/java and it worked. ","title":"&quot;Java home is different.&quot; when building gradle project on Intelij","body":"<p>OK actually to fix this I just unistalled all java instalations (even in programfiles/java) and re install intellij/java and it worked.</p>\n"}],"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76464488,"answer_count":1,"score":0,"last_activity_date":1686655900,"creation_date":1686578462,"question_id":76457418,"body_markdown":"I tried to import a gradle project on InteliJ but I get this error when it&#39;s building :\r\n\r\n&gt; `Java home is different. Expecting: &#39;C:\\Program Files\\Java\\jdk-1.8&#39;\r\n&gt; but was: &#39;C:\\Program Files\\Java\\jdk-1.8\\jre&#39;.\r\n&gt; \r\n&gt; Please configure the JDK to match the expected one.\r\n&gt; \r\n&gt; Open JDK Settings`\r\n\r\nI understand this error BUT, when i change my JAVA_HOME nothing happened !!! Even if I use SDK 17, the error still &quot; jdk-1.8......&quot;. Each time I change JAVA_HOME I check my &quot;java -version&quot;.\r\n\r\nIn case, I give my parameters:\r\n\r\nJAVA_HOME:\r\n`echo %JAVA_HOME%\r\nC:\\Program Files\\Java\\jdk-1.8`\r\n\r\nMy Path : \r\n`echo %Path%\r\nC:\\Program Files\\Java\\jdk-1.8\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\TNC Client Plugin\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\DTS\\Binn\\;C:\\Users\\a904778\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\a904778\\Downloads\\gradle-3.0-bin\\gradle-3.0\\bin;`\r\n\r\nPS: I even tried to unistall/ install InteliJ but same error.\r\n\r\n\r\n\r\nI checked ALL the forum before and nothing worked. ","title":"&quot;Java home is different.&quot; when building gradle project on Intelij","body":"<p>I tried to import a gradle project on InteliJ but I get this error when it's building :</p>\n<blockquote>\n<p>`Java home is different. Expecting: 'C:\\Program Files\\Java\\jdk-1.8'\nbut was: 'C:\\Program Files\\Java\\jdk-1.8\\jre'.</p>\n<p>Please configure the JDK to match the expected one.</p>\n<p>Open JDK Settings`</p>\n</blockquote>\n<p>I understand this error BUT, when i change my JAVA_HOME nothing happened !!! Even if I use SDK 17, the error still &quot; jdk-1.8......&quot;. Each time I change JAVA_HOME I check my &quot;java -version&quot;.</p>\n<p>In case, I give my parameters:</p>\n<p>JAVA_HOME:\n<code>echo %JAVA_HOME% C:\\Program Files\\Java\\jdk-1.8</code></p>\n<p>My Path :\n<code>echo %Path% C:\\Program Files\\Java\\jdk-1.8\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\TNC Client Plugin\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\DTS\\Binn\\;C:\\Users\\a904778\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\a904778\\Downloads\\gradle-3.0-bin\\gradle-3.0\\bin;</code></p>\n<p>PS: I even tried to unistall/ install InteliJ but same error.</p>\n<p>I checked ALL the forum before and nothing worked.</p>\n"},{"tags":["java","kotlin","pdfbox","pdfa"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":2,"creation_date":1686649509,"post_id":76461368,"comment_id":134824689,"body_markdown":"PDFBox can&#39;t do it, there are so many flaws in PDFs in the wild. You&#39;ll need a commercial product, unless the PDFs are all of the same kind and you can correct the flaws easily (e.g. just set the XMP and the OutputIntent). Use PDFBox Preflight or VeraPDF to check what flaws you have in your PDFs.","body":"PDFBox can&#39;t do it, there are so many flaws in PDFs in the wild. You&#39;ll need a commercial product, unless the PDFs are all of the same kind and you can correct the flaws easily (e.g. just set the XMP and the OutputIntent). Use PDFBox Preflight or VeraPDF to check what flaws you have in your PDFs."}],"owner":{"account_id":28808825,"reputation":21,"user_id":22064033,"display_name":"screwedDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1686654546,"creation_date":1686623536,"question_id":76461368,"body_markdown":"How to convert PDF to PDF/A using free and open source library?\r\n\r\nThis is my code which convert word to pdf, I want to generate PDFA format pdf (A-4 standard is preferrable)\r\n\r\n\r\ncode:\r\n\r\n```\r\n@GetMapping(value = [&quot;/generate-pdf&quot;], produces = [MediaType.APPLICATION_PDF_VALUE])\r\n    fun generatePdf(): ResponseEntity&lt;FileSystemResource&gt; {\r\n        // Load the Word template\r\n        val initialFile = File(&quot;src/main/resources/template.docx&quot;)\r\n        val templateFile = FileInputStream(initialFile)\r\n        val document = XWPFDocument(templateFile)\r\n\r\n        // Modify the document as needed\r\n        val paragraphs: List&lt;XWPFParagraph&gt; = document.paragraphs\r\n        for (paragraph in paragraphs) {\r\n            val runs: List&lt;XWPFRun&gt; = paragraph.runs\r\n            for (run in runs) {\r\n                val text = run.getText(0)\r\n                if (text != null) {\r\n                    val replacedText = text.replace(&quot;{{name}}&quot;, &quot;John Doe&quot;).replace(&quot;{{product}}&quot;, &quot;Sample Product&quot;)\r\n                    run.setText(replacedText, 0)\r\n                }\r\n            }\r\n        }\r\n        val out: OutputStream = FileOutputStream(&quot;outputfile.pdf&quot;)\r\n        val options: PdfOptions? = null\r\n        PdfConverter.getInstance().convert(document, out, options)\r\n\r\n        val file = FileSystemResource(&quot;outputfile.pdf&quot;)\r\n\r\n        val responseHeaders = HttpHeaders()\r\n        responseHeaders.contentType = MediaType.APPLICATION_PDF\r\n        responseHeaders.contentLength = file.contentLength()\r\n        responseHeaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=outputfile.pdf&quot;)\r\n\r\n        // Load the converted PDF\r\n        val pdfFile = File(&quot;outputfile.pdf&quot;)\r\n        val pdfDocument = PDDocument.load(pdfFile)\r\n\r\n        return ResponseEntity.ok().headers(responseHeaders).body(file)\r\n\r\n    }```\r\n\r\n\r\nHow can i convert from PDF to PDF/A \r\nI want free and open source library. Spire pdf i have seen. it adds some warning text on top. \r\n\r\nOther IText and aspose are paid and come with some licence","title":"How to convert PDF to PDF/A using free and open source library?","body":"<p>How to convert PDF to PDF/A using free and open source library?</p>\n<p>This is my code which convert word to pdf, I want to generate PDFA format pdf (A-4 standard is preferrable)</p>\n<p>code:</p>\n<pre><code>@GetMapping(value = [&quot;/generate-pdf&quot;], produces = [MediaType.APPLICATION_PDF_VALUE])\n    fun generatePdf(): ResponseEntity&lt;FileSystemResource&gt; {\n        // Load the Word template\n        val initialFile = File(&quot;src/main/resources/template.docx&quot;)\n        val templateFile = FileInputStream(initialFile)\n        val document = XWPFDocument(templateFile)\n\n        // Modify the document as needed\n        val paragraphs: List&lt;XWPFParagraph&gt; = document.paragraphs\n        for (paragraph in paragraphs) {\n            val runs: List&lt;XWPFRun&gt; = paragraph.runs\n            for (run in runs) {\n                val text = run.getText(0)\n                if (text != null) {\n                    val replacedText = text.replace(&quot;{{name}}&quot;, &quot;John Doe&quot;).replace(&quot;{{product}}&quot;, &quot;Sample Product&quot;)\n                    run.setText(replacedText, 0)\n                }\n            }\n        }\n        val out: OutputStream = FileOutputStream(&quot;outputfile.pdf&quot;)\n        val options: PdfOptions? = null\n        PdfConverter.getInstance().convert(document, out, options)\n\n        val file = FileSystemResource(&quot;outputfile.pdf&quot;)\n\n        val responseHeaders = HttpHeaders()\n        responseHeaders.contentType = MediaType.APPLICATION_PDF\n        responseHeaders.contentLength = file.contentLength()\n        responseHeaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=outputfile.pdf&quot;)\n\n        // Load the converted PDF\n        val pdfFile = File(&quot;outputfile.pdf&quot;)\n        val pdfDocument = PDDocument.load(pdfFile)\n\n        return ResponseEntity.ok().headers(responseHeaders).body(file)\n\n    }```\n\n\nHow can i convert from PDF to PDF/A \nI want free and open source library. Spire pdf i have seen. it adds some warning text on top. \n\nOther IText and aspose are paid and come with some licence\n</code></pre>\n"},{"tags":["java","spring","exception","spring-restcontroller"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1686645149,"post_id":76462994,"comment_id":134823720,"body_markdown":"You can do whatever java let you. In particular, catch an exception an throw another one. However, random exception with end with 500 response code by default. What&#39;s the final goal, response with specific code/body??","body":"You can do whatever java let you. In particular, catch an exception an throw another one. However, random exception with end with 500 response code by default. What&#39;s the final goal, response with specific code/body??"},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":1,"creation_date":1686645461,"post_id":76462994,"comment_id":134823768,"body_markdown":"you should be use multiple catch statements and then in your specific exception send email https://www.javatpoint.com/multiple-catch-block-in-java","body":"you should be use multiple catch statements and then in your specific exception send email <a href=\"https://www.javatpoint.com/multiple-catch-block-in-java\" rel=\"nofollow noreferrer\">javatpoint.com/multiple-catch-block-in-java</a>"}],"owner":{"account_id":2090997,"reputation":844,"user_id":7516740,"display_name":"elvis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686654518,"creation_date":1686644615,"question_id":76462994,"body_markdown":"I&#39;m working on a Spring Boot project at the Rest Controller, and I need some help regarding how to send an exception to the client in a REST API.\r\n\r\nSo, I have this type of code:\r\n\r\n    @GetMapping(value = &quot;/users&quot;)\r\n    public Users getUsers() { \r\n       service.getUsers();\r\n    }\r\n\r\nI want to do an implementation and if there is an error send an email to an admin. I can&#39;t use ResponseEntity or ControllerAdvice. I just want to use a try-catch, can I catch the Exception and then inside the catch to find the exact exception and throw it, or should I catch the exact exception and how can I make it?\r\n\r\n    try {\r\n       service.getUsers();\r\n    } catch (Exception ex) {\r\n       // implementation to send the email\r\n       throw new NotFoundException or BadException, etc\r\n    }\r\n\r\nAny feedback will be appreciated!\r\n","title":"How to find the exact exception without ControllerAdvice in Spring Boot?","body":"<p>I'm working on a Spring Boot project at the Rest Controller, and I need some help regarding how to send an exception to the client in a REST API.</p>\n<p>So, I have this type of code:</p>\n<pre><code>@GetMapping(value = &quot;/users&quot;)\npublic Users getUsers() { \n   service.getUsers();\n}\n</code></pre>\n<p>I want to do an implementation and if there is an error send an email to an admin. I can't use ResponseEntity or ControllerAdvice. I just want to use a try-catch, can I catch the Exception and then inside the catch to find the exact exception and throw it, or should I catch the exact exception and how can I make it?</p>\n<pre><code>try {\n   service.getUsers();\n} catch (Exception ex) {\n   // implementation to send the email\n   throw new NotFoundException or BadException, etc\n}\n</code></pre>\n<p>Any feedback will be appreciated!</p>\n"},{"tags":["java","rmi"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686655429,"post_id":76464133,"comment_id":134825908,"body_markdown":"The client becomes unreferenced when the server releases the client stub, which depends on the DGC interval.  When that happens you can unexport it. You don&#39;t need a list. NB (1) The result of `LocateRegistry.createRegistry()` should be stored in a static variable. NB (2) The result of `exportObject()` is not a skeleton but a stub.","body":"The client becomes unreferenced when the server releases the client stub, which depends on the DGC interval.  When that happens you can unexport it. You don&#39;t need a list. NB (1) The result of <code>LocateRegistry.createRegistry()</code> should be stored in a static variable. NB (2) The result of <code>exportObject()</code> is not a skeleton but a stub."},{"owner":{"account_id":13432952,"reputation":171,"user_id":9692251,"display_name":"MichaelS"},"score":0,"creation_date":1686656833,"post_id":76464133,"comment_id":134826239,"body_markdown":"thank you for your answer. Suppose my approach to implement 2 way communication is correct: how would a clean client application shut down look like? how can I instruct the server to release the stub on my exported object since I am about to shut down the application?","body":"thank you for your answer. Suppose my approach to implement 2 way communication is correct: how would a clean client application shut down look like? how can I instruct the server to release the stub on my exported object since I am about to shut down the application?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1686708602,"post_id":76464133,"comment_id":134835135,"body_markdown":"Add a remote method, `logout()` for example, that causes the server to do that. Then either wait for `unreferenced()` to fire and forcibly unexport the object then, or unexport it immediately after the logout call if you trust the server not to be about to make another callback.","body":"Add a remote method, <code>logout()</code> for example, that causes the server to do that. Then either wait for <code>unreferenced()</code> to fire and forcibly unexport the object then, or unexport it immediately after the logout call if you trust the server not to be about to make another callback."},{"owner":{"account_id":13432952,"reputation":171,"user_id":9692251,"display_name":"MichaelS"},"score":0,"creation_date":1686929519,"post_id":76464133,"comment_id":134870718,"body_markdown":"I am not sure what the `logout()` method shall do. in above example, the server does not hold any reference (variable) to the client object - it is just a method argument which the server invokes a method on.","body":"I am not sure what the <code>logout()</code> method shall do. in above example, the server does not hold any reference (variable) to the client object - it is just a method argument which the server invokes a method on."}],"owner":{"account_id":13432952,"reputation":171,"user_id":9692251,"display_name":"MichaelS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653746,"creation_date":1686653410,"question_id":76464133,"body_markdown":"I am currently trying to understand how to work with Java RMI and `UnicastRemoteObject` to enable 2-way communication (Client invokes Server-Methods and Server invokes Client-Methods).  \r\n\r\nI have a RMI Server application creating a registry and binding a service. A client extending `UnicastRemoteObject` and implementing `Remote` can be passed as a reference to the server. The server can then also invoke methods on the client object.\r\n\r\nMinimal working example:\r\n\r\n# Server #\r\n## Server Main ##\r\n```java\r\npublic class Server {\r\n    public static void main(String[] args) throws RemoteException, MalformedURLException {\r\n        LocateRegistry.createRegistry(1099);\r\n        var service = new ServiceImpl();\r\n        var serviceSkel = (Service) UnicastRemoteObject.exportObject(service, 0);\r\n        var url = String.format(&quot;rmi://%s%s&quot;, &quot;localhost:1099&quot;, &quot;/Service&quot;);\r\n        Naming.rebind(url, serviceSkel);\r\n    }\r\n}\r\n```\r\n\r\n## Service Interface ##\r\n```java\r\npublic interface Service extends Remote {\r\n    void WriteOnServer(Client c) throws RemoteException;\r\n}\r\n```\r\n\r\n## Service Implementation ##\r\n```java\r\npublic class ServiceImpl implements Service{\r\n    @Override\r\n    public void WriteOnServer(Client c) throws RemoteException {\r\n        System.out.println(&quot;client executed this method&quot;);\r\n        c.WriteOnClient();\r\n    }\r\n}\r\n```\r\n\r\n# Client #\r\n\r\n## Client Interface ##\r\n\r\n```java\r\npublic interface Client extends Remote {\r\n    void WriteOnClient() throws RemoteException;\r\n}\r\n```\r\n\r\n## Client Implementation + Main ##\r\n\r\n```java\r\npublic class ClientImpl extends UnicastRemoteObject implements Client {\r\n    protected ClientImpl() throws RemoteException {\r\n        super();\r\n    }\r\n\r\n    @Override\r\n    public void WriteOnClient() throws RemoteException {\r\n        System.out.println(&quot;server executed this method&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) throws RemoteException, MalformedURLException, NotBoundException {\r\n        var client = new ClientImpl();\r\n        var service = (Service) Naming.lookup(&quot;rmi://localhost:1099/Service&quot;);\r\n        service.WriteOnServer(client);\r\n\r\n        // with following line: client application exits cleanly\r\n        // without following line: client application never exits\r\n        UnicastRemoteObject.unexportObject(client, false);\r\n    }\r\n}\r\n```\r\n\r\n## Problem / Question ##\r\n\r\nEverything works as expected meaning...\r\n\r\n 1. Server starts and binds service to registry\r\n 2. Client starts, retrieves service object from registry\r\n 3. Client invokes the service remote method and passes itself as argument\r\n 4. Server prints to console and then invokes the remote method on the client reference\r\n 5. Client prints to console\r\n\r\n... but the client application never exits the JVM if I do not manually unexport the client object because (i guess) RMI is keeping a non-daemon thread alive waiting for further remote invocations.\r\n\r\nIs this expected?  \r\nDo I have to store a list of all exported Objects and call `UnicastRemoteObject.unexportObject(Object, Boolean)` on all of them manually?  \r\n\r\nI also tried to implement `Unreferenced` in `ClientImpl` but the method `unreferenced()` is never called:\r\n\r\n```java\r\n\r\npublic class ClientImpl extends UnicastRemoteObject implements Client, Unreferenced {\r\n\r\n.\r\n.\r\n.\r\n\r\n    @Override\r\n    public void unreferenced() {\r\n        try {\r\n            UnicastRemoteObject.unexportObject(this, true);\r\n        } catch (NoSuchObjectException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```","title":"Java RMI - Object of Class extending UnicastRemoteObject keeps JVM alive","body":"<p>I am currently trying to understand how to work with Java RMI and <code>UnicastRemoteObject</code> to enable 2-way communication (Client invokes Server-Methods and Server invokes Client-Methods).</p>\n<p>I have a RMI Server application creating a registry and binding a service. A client extending <code>UnicastRemoteObject</code> and implementing <code>Remote</code> can be passed as a reference to the server. The server can then also invoke methods on the client object.</p>\n<p>Minimal working example:</p>\n<h1>Server</h1>\n<h2>Server Main</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class Server {\n    public static void main(String[] args) throws RemoteException, MalformedURLException {\n        LocateRegistry.createRegistry(1099);\n        var service = new ServiceImpl();\n        var serviceSkel = (Service) UnicastRemoteObject.exportObject(service, 0);\n        var url = String.format(&quot;rmi://%s%s&quot;, &quot;localhost:1099&quot;, &quot;/Service&quot;);\n        Naming.rebind(url, serviceSkel);\n    }\n}\n</code></pre>\n<h2>Service Interface</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Service extends Remote {\n    void WriteOnServer(Client c) throws RemoteException;\n}\n</code></pre>\n<h2>Service Implementation</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class ServiceImpl implements Service{\n    @Override\n    public void WriteOnServer(Client c) throws RemoteException {\n        System.out.println(&quot;client executed this method&quot;);\n        c.WriteOnClient();\n    }\n}\n</code></pre>\n<h1>Client</h1>\n<h2>Client Interface</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Client extends Remote {\n    void WriteOnClient() throws RemoteException;\n}\n</code></pre>\n<h2>Client Implementation + Main</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class ClientImpl extends UnicastRemoteObject implements Client {\n    protected ClientImpl() throws RemoteException {\n        super();\n    }\n\n    @Override\n    public void WriteOnClient() throws RemoteException {\n        System.out.println(&quot;server executed this method&quot;);\n    }\n\n    public static void main(String[] args) throws RemoteException, MalformedURLException, NotBoundException {\n        var client = new ClientImpl();\n        var service = (Service) Naming.lookup(&quot;rmi://localhost:1099/Service&quot;);\n        service.WriteOnServer(client);\n\n        // with following line: client application exits cleanly\n        // without following line: client application never exits\n        UnicastRemoteObject.unexportObject(client, false);\n    }\n}\n</code></pre>\n<h2>Problem / Question</h2>\n<p>Everything works as expected meaning...</p>\n<ol>\n<li>Server starts and binds service to registry</li>\n<li>Client starts, retrieves service object from registry</li>\n<li>Client invokes the service remote method and passes itself as argument</li>\n<li>Server prints to console and then invokes the remote method on the client reference</li>\n<li>Client prints to console</li>\n</ol>\n<p>... but the client application never exits the JVM if I do not manually unexport the client object because (i guess) RMI is keeping a non-daemon thread alive waiting for further remote invocations.</p>\n<p>Is this expected?<br />\nDo I have to store a list of all exported Objects and call <code>UnicastRemoteObject.unexportObject(Object, Boolean)</code> on all of them manually?</p>\n<p>I also tried to implement <code>Unreferenced</code> in <code>ClientImpl</code> but the method <code>unreferenced()</code> is never called:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class ClientImpl extends UnicastRemoteObject implements Client, Unreferenced {\n\n.\n.\n.\n\n    @Override\n    public void unreferenced() {\n        try {\n            UnicastRemoteObject.unexportObject(this, true);\n        } catch (NoSuchObjectException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","gradle","groovy","import","jar"],"comments":[{"owner":{"account_id":1857554,"reputation":20310,"user_id":1682820,"accept_rate":70,"display_name":"injecteer"},"score":0,"creation_date":1686663028,"post_id":76464150,"comment_id":134827709,"body_markdown":"check the output of `gradlew dependencies` -&gt; do you see jackson there?","body":"check the output of <code>gradlew dependencies</code> -&gt; do you see jackson there?"},{"owner":{"account_id":11449092,"reputation":19,"user_id":8391938,"display_name":"Partha Debnath"},"score":0,"creation_date":1686709470,"post_id":76464150,"comment_id":134835211,"body_markdown":"I executed the above command and I am able to see it under compile classpath section.","body":"I executed the above command and I am able to see it under compile classpath section."}],"owner":{"account_id":11449092,"reputation":19,"user_id":8391938,"display_name":"Partha Debnath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653501,"creation_date":1686653501,"question_id":76464150,"body_markdown":"I am new to the Gradle and Groovy worlds. I have created a sample gradle-groovy project where I have added a dependency, and I want to make calls to those dependency classes and methods from my groovy file.\r\nBut unfortunately, I am not able to build the project due to imported classes not being identified by my Groovy file, and I am getting an error message.\r\n\r\n```\r\nunable to resolve class com.fasterxml.jackson.databind.ObjectMapper\r\n @ line 3, column 1.\r\n   import com.fasterxml.jackson.databind.ObjectMapper\r\n```\r\n\r\nBelow added my project structure and build.gradle file\r\n\r\n\r\n\r\n[![enter image description here](https://i.stack.imgur.com/7Xon8.png)](https://i.stack.imgur.com/7Xon8.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/SLjdc.png)](https://i.stack.imgur.com/SLjdc.png)\r\n\r\n\r\nI am trying to import com.fasterxml.jackson.core:jackson-databind:2.15.1 jar from maven central repository and trying to create an object of ObjectMapper class.\r\n\r\nFor checking whether I am doing it correctly or not, I have created a gradle-java project, and from it I have added the same com.fasterxml.jackson.core:jackson-databind:2.15.1 dependency, and as expected, I was able to create an object of the ObjectMapper class provided by com.fasterxml.jackson.core:jackson-databind:2.15.1 and build the project.\r\nWhat am I doing wrong here?","title":"Dependency jar file classes are not importing in Gradle Groovy project","body":"<p>I am new to the Gradle and Groovy worlds. I have created a sample gradle-groovy project where I have added a dependency, and I want to make calls to those dependency classes and methods from my groovy file.\nBut unfortunately, I am not able to build the project due to imported classes not being identified by my Groovy file, and I am getting an error message.</p>\n<pre><code>unable to resolve class com.fasterxml.jackson.databind.ObjectMapper\n @ line 3, column 1.\n   import com.fasterxml.jackson.databind.ObjectMapper\n</code></pre>\n<p>Below added my project structure and build.gradle file</p>\n<p><a href=\"https://i.stack.imgur.com/7Xon8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Xon8.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/SLjdc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SLjdc.png\" alt=\"enter image description here\" /></a></p>\n<p>I am trying to import com.fasterxml.jackson.core:jackson-databind:2.15.1 jar from maven central repository and trying to create an object of ObjectMapper class.</p>\n<p>For checking whether I am doing it correctly or not, I have created a gradle-java project, and from it I have added the same com.fasterxml.jackson.core:jackson-databind:2.15.1 dependency, and as expected, I was able to create an object of the ObjectMapper class provided by com.fasterxml.jackson.core:jackson-databind:2.15.1 and build the project.\nWhat am I doing wrong here?</p>\n"},{"tags":["java","selenium-webdriver","groovy","katalon-studio"],"comments":[{"owner":{"account_id":28104311,"reputation":1,"user_id":21473140,"display_name":"Mert Sert&#246;z"},"score":0,"creation_date":1686657598,"post_id":76464037,"comment_id":134826394,"body_markdown":"i think problem is in the If part but i cant fix it","body":"i think problem is in the If part but i cant fix it"},{"owner":{"account_id":28104311,"reputation":1,"user_id":21473140,"display_name":"Mert Sert&#246;z"},"score":0,"creation_date":1686730439,"post_id":76464037,"comment_id":134837796,"body_markdown":"`for (int i = 1; i &lt; rows.size(); i++) {\n    WebElement row = rows.get(i)\n    WebElement firstCell = row.findElement(By.xpath(&quot;.//div[@data-field=&#39;nameSurname&#39;]&quot;))\n    String user = firstCell.getText()\n\tprintln &quot;&gt;${user}&lt;&quot;\n\n    if (user.contains(&quot;QA Tester&quot;)) {\n        WebElement deleteIcon = row.findElement(By.xpath(&quot;//a[@aria-label=&#39;Delete&#39;]&quot;))\n        deleteIcon.click()\n        WebUI.click(findTestObject(&#39;Object Repository/Users Page Objects/Add Patient Details/deleteButton&#39;))\n\t\tbreak\n    }\n}`\ni used contains instead of equals its working now","body":"<code>for (int i = 1; i &lt; rows.size(); i++) {     WebElement row = rows.get(i)     WebElement firstCell = row.findElement(By.xpath(&quot;.&#47;&#47;div[@data-field=&#39;nameSurname&#39;]&quot;&zwnj;&#8203;))     String user = firstCell.getText() \tprintln &quot;&gt;${user}&lt;&quot;      if (user.contains(&quot;QA Tester&quot;)) {         WebElement deleteIcon = row.findElement(By.xpath(&quot;&#47;&#47;a[@aria-label=&#39;Delete&#39;]&quot;))         deleteIcon.click()         WebUI.click(findTestObject(&#39;Object Repository&#47;Users Page Objects&#47;Add Patient Details&#47;deleteButton&#39;)) \t\tbreak     } }</code> i used contains instead of equals its working now"}],"owner":{"account_id":28104311,"reputation":1,"user_id":21473140,"display_name":"Mert Sert&#246;z"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653306,"creation_date":1686652739,"question_id":76464037,"body_markdown":"```WebUI.callTestCase(findTestCase(&#39;Login Page/*********&#39;), [:], FailureHandling.STOP_ON_FAILURE)\r\nWebUI.waitForPageLoad(3)\r\nCustomKeywords.&#39;userTable.sidebar.sidebarUsersClick&#39;()\r\n\r\nWebUI.setText(findTestObject(&#39;Object Repository/Overview Page Objects/overview searchbar&#39;), &quot;Tester&quot;) //Search for the user.\r\n\r\nList&lt;WebElement&gt; rows = WebUI.findWebElements(findTestObject(&#39;Object Repository/Overview Page Objects/patientList_Row&#39;), 10) //create list from user results after search\r\n\r\nfor(int i = 1 ; i &lt; rows.size() ; i++) {\r\n\tWebElement row = rows.get(i) //get the current row element\r\n\tWebElement firstCell = row.findElement(By.xpath(&quot;.//div[@data-field=&#39;nameSurname&#39;]&quot;)) // get the text of the first cell (username and surname)\r\n\tString user = firstCell.getText()\r\n\tprintln user\r\n\t\tif(user.equals(&quot;QA Tester&quot;)) {\r\n\t\t\tWebElement deleteIcon = row.findElement(By.xpath(&quot;//a[@aria-label=&#39;Delete&#39;]&quot;))\r\n\t\t\tdeleteIcon.click()\r\n\t\t\tWebUI.click(findTestObject(&#39;Object Repository/Users Page Objects/Add Patient Details/deleteButton&#39;))\r\n\t\t}\r\n}\r\n```\r\n\r\n\r\n[Username xpath][1]\r\n\r\n[deleteicon xpath][2]\r\n\r\nBasicly in this code block. Firstly im searching a user name in searchbox, then make a List&lt;WebElement&gt; for the results of users, and creating loop for to find the user i want (QA Tester), then when loop finds the user i want, i want it to click the Delete Icon.\r\nwhen i run this code. The loop ends successfully, but does not click the delete icon.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xxGEi.png\r\n  [2]: https://i.stack.imgur.com/QOM9W.png","title":"katalon studio, can&#39;t click a icon in a loop","body":"<pre><code>WebUI.waitForPageLoad(3)\nCustomKeywords.'userTable.sidebar.sidebarUsersClick'()\n\nWebUI.setText(findTestObject('Object Repository/Overview Page Objects/overview searchbar'), &quot;Tester&quot;) //Search for the user.\n\nList&lt;WebElement&gt; rows = WebUI.findWebElements(findTestObject('Object Repository/Overview Page Objects/patientList_Row'), 10) //create list from user results after search\n\nfor(int i = 1 ; i &lt; rows.size() ; i++) {\n    WebElement row = rows.get(i) //get the current row element\n    WebElement firstCell = row.findElement(By.xpath(&quot;.//div[@data-field='nameSurname']&quot;)) // get the text of the first cell (username and surname)\n    String user = firstCell.getText()\n    println user\n        if(user.equals(&quot;QA Tester&quot;)) {\n            WebElement deleteIcon = row.findElement(By.xpath(&quot;//a[@aria-label='Delete']&quot;))\n            deleteIcon.click()\n            WebUI.click(findTestObject('Object Repository/Users Page Objects/Add Patient Details/deleteButton'))\n        }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xxGEi.png\" rel=\"nofollow noreferrer\">Username xpath</a></p>\n<p><a href=\"https://i.stack.imgur.com/QOM9W.png\" rel=\"nofollow noreferrer\">deleteicon xpath</a></p>\n<p>Basicly in this code block. Firstly im searching a user name in searchbox, then make a List for the results of users, and creating loop for to find the user i want (QA Tester), then when loop finds the user i want, i want it to click the Delete Icon.\nwhen i run this code. The loop ends successfully, but does not click the delete icon.</p>\n"},{"tags":["java","rmi"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686655573,"post_id":76464105,"comment_id":134825964,"body_markdown":"Are you trying to unexport stubs? Unexporting the result of a lookup looks very like that. You can&#39;t unexport a stub, only the actual remote object, which you don&#39;t normally get from a `Registry` lookup.","body":"Are you trying to unexport stubs? Unexporting the result of a lookup looks very like that. You can&#39;t unexport a stub, only the actual remote object, which you don&#39;t normally get from a <code>Registry</code> lookup."},{"owner":{"account_id":22060220,"reputation":19,"user_id":16323042,"display_name":"jack"},"score":0,"creation_date":1686658792,"post_id":76464105,"comment_id":134826663,"body_markdown":"So I can&#39;t get the remote object via lookup and have to supply it via argument? No problem doing that, but, again: that exact process works for the database service, no issues at all. What&#39;s making me crazy is *why* does it work on one service but not the others.","body":"So I can&#39;t get the remote object via lookup and have to supply it via argument? No problem doing that, but, again: that exact process works for the database service, no issues at all. What&#39;s making me crazy is <i>why</i> does it work on one service but not the others."},{"owner":{"account_id":22060220,"reputation":19,"user_id":16323042,"display_name":"jack"},"score":0,"creation_date":1686659114,"post_id":76464105,"comment_id":134826756,"body_markdown":"Jesus Christ it worked. This is black magic and I absolutely HATE that it works without knowing why. A million thanks, but could you please elaborate a little on the reason this works inconsistently and why am I able to unexport the database stub?","body":"Jesus Christ it worked. This is black magic and I absolutely HATE that it works without knowing why. A million thanks, but could you please elaborate a little on the reason this works inconsistently and why am I able to unexport the database stub?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686708383,"post_id":76464105,"comment_id":134835113,"body_markdown":"The reason is that you didn&#39;t get a remote object from the Regsitry,  as I said. You get the stub, and you can&#39;t unexport that. If however you created the Registry yourself with `createRegistry()` *and* you use the result of that method to call `bind()`, instead of using `getRegistry()` or `Naming`, you aren&#39;t doing RMI to the registry, you are doing local method invocation: so the RMI stub substitution doesn&#39;t occur.","body":"The reason is that you didn&#39;t get a remote object from the Regsitry,  as I said. You get the stub, and you can&#39;t unexport that. If however you created the Registry yourself with <code>createRegistry()</code> <i>and</i> you use the result of that method to call <code>bind()</code>, instead of using <code>getRegistry()</code> or <code>Naming</code>, you aren&#39;t doing RMI to the registry, you are doing local method invocation: so the RMI stub substitution doesn&#39;t occur."}],"owner":{"account_id":22060220,"reputation":19,"user_id":16323042,"display_name":"jack"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653305,"creation_date":1686653305,"question_id":76464105,"body_markdown":"I&#39;m building a simple program for an assignment, which consists of:\r\n- A .jar file that launches a registry and a database service.\r\n- Another .jar file that connects to the registry and launches another two services (auth and management), both connecting via registry to the database service.\r\n- A third .jar file that can be executed several times, each launching a separate user client that connects to both auth and management services, and also launches its callback. \r\n\r\nThe services and callback inherit from UnicastRemoteObject so I don&#39;t needd to export them when initializing everything. Everything works flawlessly until the time comes to shut everything down. For reference, this is the code for launching, getting and stopping the services. It&#39;s the same for all three, since the URL are defined when the registry is created. The closeCallback method receives its own URL, that&#39;s all.\r\n\r\n\r\n```\r\npublic String launchDataServ(ServicioDatosInterface dataServ) throws RegException {\r\n\ttry {\r\n\t\tthis.reg.bind(this.dataServURL, dataServ);\r\n\t} catch (RemoteException e) {\r\n\t\tthrow new RegException(&quot;error message 1&quot;);\r\n\t} catch (AlreadyBoundException e) {\r\n\t\tthrow new RegException(&quot;error message 2&quot;);\r\n\t}\r\n\t\r\n\treturn this.dataServURL;\r\n}\r\n\r\n\r\npublic ServicioDatosInterface getDataServ() throws RegException {\r\n\ttry {\r\n\t\treturn (ServicioDatosInterface) this.reg.lookup(this.dataServURL);\r\n\t} catch (RemoteException e) {\r\n\t\tthrow new RegException(&quot;error message 1&quot;);\r\n\t} catch (NotBoundException e) {\r\n\t\tthrow new RegException(&quot;error message 2&quot;);\r\n\t}\r\n}\r\n\r\n\r\npublic void closeDataServ() throws RegException {\r\n\ttry {\r\n\t\tUnicastRemoteObject.unexportObject(this.getDataServ(), true);\r\n\t\t this.reg.unbind(this.dataServURL);\r\n\t} catch (RemoteException e) {\r\n\t\tthrow new RegException(&quot;error message 1&quot;);\r\n\t} catch (NotBoundException e) {\r\n\t\tthrow new RegException(&quot;error message 2&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nWhen I exit the user clients, they throw a NoSuchObjectException when invoking unexportObject() on their callbacks. When I exit the &quot;server&quot;, it throws a NoSuchObjectException when invoking unexportObject() on either the auth or the management service. But when I exit the database, it doesn&#39;t throw any exception.\r\n\r\nNeedless to say, I don&#39;t call the close() methods anywhere in the code except for the final part, when the program ends, and everything works perfectly up until that point.\r\n\r\nCommenting unexportObject() makes the program hang up instead of making a clean exit because I haven&#39;t unexported the services, so apparently they are exported just until the moment I need to unexport them. Also, I don&#39;t understand why this issue doesn&#39;t happen with the database service.","title":"Issue unexporting remote object in Java","body":"<p>I'm building a simple program for an assignment, which consists of:</p>\n<ul>\n<li>A .jar file that launches a registry and a database service.</li>\n<li>Another .jar file that connects to the registry and launches another two services (auth and management), both connecting via registry to the database service.</li>\n<li>A third .jar file that can be executed several times, each launching a separate user client that connects to both auth and management services, and also launches its callback.</li>\n</ul>\n<p>The services and callback inherit from UnicastRemoteObject so I don't needd to export them when initializing everything. Everything works flawlessly until the time comes to shut everything down. For reference, this is the code for launching, getting and stopping the services. It's the same for all three, since the URL are defined when the registry is created. The closeCallback method receives its own URL, that's all.</p>\n<pre><code>public String launchDataServ(ServicioDatosInterface dataServ) throws RegException {\n    try {\n        this.reg.bind(this.dataServURL, dataServ);\n    } catch (RemoteException e) {\n        throw new RegException(&quot;error message 1&quot;);\n    } catch (AlreadyBoundException e) {\n        throw new RegException(&quot;error message 2&quot;);\n    }\n    \n    return this.dataServURL;\n}\n\n\npublic ServicioDatosInterface getDataServ() throws RegException {\n    try {\n        return (ServicioDatosInterface) this.reg.lookup(this.dataServURL);\n    } catch (RemoteException e) {\n        throw new RegException(&quot;error message 1&quot;);\n    } catch (NotBoundException e) {\n        throw new RegException(&quot;error message 2&quot;);\n    }\n}\n\n\npublic void closeDataServ() throws RegException {\n    try {\n        UnicastRemoteObject.unexportObject(this.getDataServ(), true);\n         this.reg.unbind(this.dataServURL);\n    } catch (RemoteException e) {\n        throw new RegException(&quot;error message 1&quot;);\n    } catch (NotBoundException e) {\n        throw new RegException(&quot;error message 2&quot;);\n    }\n}\n</code></pre>\n<p>When I exit the user clients, they throw a NoSuchObjectException when invoking unexportObject() on their callbacks. When I exit the &quot;server&quot;, it throws a NoSuchObjectException when invoking unexportObject() on either the auth or the management service. But when I exit the database, it doesn't throw any exception.</p>\n<p>Needless to say, I don't call the close() methods anywhere in the code except for the final part, when the program ends, and everything works perfectly up until that point.</p>\n<p>Commenting unexportObject() makes the program hang up instead of making a clean exit because I haven't unexported the services, so apparently they are exported just until the moment I need to unexport them. Also, I don't understand why this issue doesn't happen with the database service.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":22489106,"reputation":179,"user_id":16687077,"display_name":"Jason Chuang"},"score":0,"creation_date":1673400827,"post_id":75077454,"comment_id":132489053,"body_markdown":"In my code, there is no servlet.http.HttpServletRequest","body":"In my code, there is no servlet.http.HttpServletRequest"},{"owner":{"account_id":10500252,"reputation":878,"user_id":7739171,"accept_rate":88,"display_name":"Sivvie Lim"},"score":0,"creation_date":1673401556,"post_id":75077454,"comment_id":132489163,"body_markdown":"I checked your source code and I think this dependency is using the `javax.servlet`: https://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE\n\nThe `Provided Dependency` is showing `javax.servlet`, so when you run your apps, this dependency will be used.","body":"I checked your source code and I think this dependency is using the <code>javax.servlet</code>: <a href=\"https://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.springframework.social/&hellip;</a>  The <code>Provided Dependency</code> is showing <code>javax.servlet</code>, so when you run your apps, this dependency will be used."},{"owner":{"account_id":22489106,"reputation":179,"user_id":16687077,"display_name":"Jason Chuang"},"score":0,"creation_date":1673446294,"post_id":75077454,"comment_id":132500964,"body_markdown":"Thanks for your suggestion. I made it work for spring-boot-3.0\nhttps://chuangtc.com/Java/spring-boot-30-facebook-login.php","body":"Thanks for your suggestion. I made it work for spring-boot-3.0 <a href=\"https://chuangtc.com/Java/spring-boot-30-facebook-login.php\" rel=\"nofollow noreferrer\">chuangtc.com/Java/spring-boot-30-facebook-login.php</a>"},{"owner":{"account_id":10500252,"reputation":878,"user_id":7739171,"accept_rate":88,"display_name":"Sivvie Lim"},"score":0,"creation_date":1674009335,"post_id":75077454,"comment_id":132622022,"body_markdown":"I&#39;m glad it helps! If it is okay please marked it as answer :)","body":"I&#39;m glad it helps! If it is okay please marked it as answer :)"},{"owner":{"account_id":8866868,"reputation":280,"user_id":6621774,"accept_rate":60,"display_name":"Harry Developer"},"score":0,"creation_date":1675367139,"post_id":75077454,"comment_id":132919488,"body_markdown":"Saved may day! I would have never guessed that. But you need to include jakarta.servlet-api.","body":"Saved may day! I would have never guessed that. But you need to include jakarta.servlet-api."}],"tags":[],"owner":{"account_id":10500252,"reputation":878,"user_id":7739171,"accept_rate":88,"display_name":"Sivvie Lim"},"comment_count":5,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1673401685,"creation_date":1673400197,"answer_id":75077454,"question_id":75077401,"body_markdown":"You don&#39;t have to add jakarta servlet api 6.0 into the `pom.xml`.\r\nAccording to documentation [here][1], it is already included.\r\n\r\nIn your code whichever is using `javax.servlet.http.HttpServletRequest`, you need to change the `javax` to `jakarta`. \r\n\r\nSo the whole line will be something like this:\r\n`import jakarta.servlet.http.HttpServletRequest`\r\n\r\nI faced this error before when I upgrade my service as well and I solved it using this way. Maybe you can try it. \r\n\r\n[EDIT]\r\n\r\nI see that one of your dependency is using the `javax.servlet`: \r\nhttps://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE\r\n\r\nAnd following this github, it seems this packages is no longer actively maintained and being archived, so it is likely they do not upgrade for Spring Boot 3. \r\n\r\nI would recommend find other ways to work on the social login for Facebook, maybe you can try this way?\r\n\r\nhttps://www.codejava.net/frameworks/spring-boot/social-login-with-facebook-example\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#Jakarta-EE","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>You don't have to add jakarta servlet api 6.0 into the <code>pom.xml</code>.\nAccording to documentation <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#Jakarta-EE\" rel=\"noreferrer\">here</a>, it is already included.</p>\n<p>In your code whichever is using <code>javax.servlet.http.HttpServletRequest</code>, you need to change the <code>javax</code> to <code>jakarta</code>.</p>\n<p>So the whole line will be something like this:\n<code>import jakarta.servlet.http.HttpServletRequest</code></p>\n<p>I faced this error before when I upgrade my service as well and I solved it using this way. Maybe you can try it.</p>\n<p>[EDIT]</p>\n<p>I see that one of your dependency is using the <code>javax.servlet</code>:\n<a href=\"https://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE</a></p>\n<p>And following this github, it seems this packages is no longer actively maintained and being archived, so it is likely they do not upgrade for Spring Boot 3.</p>\n<p>I would recommend find other ways to work on the social login for Facebook, maybe you can try this way?</p>\n<p><a href=\"https://www.codejava.net/frameworks/spring-boot/social-login-with-facebook-example\" rel=\"noreferrer\">https://www.codejava.net/frameworks/spring-boot/social-login-with-facebook-example</a></p>\n"},{"tags":[],"owner":{"account_id":2518622,"reputation":753,"user_id":2189421,"display_name":"Aparna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681732733,"creation_date":1681732733,"answer_id":76034931,"question_id":75077401,"body_markdown":"You can also try adding new dependencies as follows. With the below dependencies I was able to retain javax.servlet class.\r\n\r\n     &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n      &lt;/dependency&gt; \r\n      &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2.12&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n    \t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t&lt;/dependency&gt; ","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>You can also try adding new dependencies as follows. With the below dependencies I was able to retain javax.servlet class.</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n  &lt;/dependency&gt; \n  &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686653244,"creation_date":1686653244,"answer_id":76464093,"question_id":75077401,"body_markdown":"In my case I had the following dependencies:\r\n```\r\nimplementation &quot;io.springfox:springfox-swagger2&quot;\r\nimplementation &quot;io.springfox:springfox-swagger-ui&quot;\r\n```\r\n\r\nWhich apparently somehow depended on the old api, because commenting them solved the issue. ","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>In my case I had the following dependencies:</p>\n<pre><code>implementation &quot;io.springfox:springfox-swagger2&quot;\nimplementation &quot;io.springfox:springfox-swagger-ui&quot;\n</code></pre>\n<p>Which apparently somehow depended on the old api, because commenting them solved the issue.</p>\n"}],"owner":{"account_id":22489106,"reputation":179,"user_id":16687077,"display_name":"Jason Chuang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24488,"favorite_count":0,"down_vote_count":1,"up_vote_count":19,"accepted_answer_id":75077454,"answer_count":3,"score":18,"last_activity_date":1686653244,"creation_date":1673399355,"question_id":75077401,"body_markdown":"When I ran spring-boot-2.7, there is no issue. However when I changed code and tailored it to spring-boot-3.0, there is java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest\r\n\r\nCould someone help me to download the source code and run on your computer? After run it, and you click &quot;Login using Facebook&quot;, you will see the exception.\r\nhttps://github.com/chuangtc/spring-boot-3.0-security-social-login\r\n\r\nI tried adding jarkarta servlet api 6.0, but the exception is still there.","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>When I ran spring-boot-2.7, there is no issue. However when I changed code and tailored it to spring-boot-3.0, there is java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest</p>\n<p>Could someone help me to download the source code and run on your computer? After run it, and you click &quot;Login using Facebook&quot;, you will see the exception.\n<a href=\"https://github.com/chuangtc/spring-boot-3.0-security-social-login\" rel=\"noreferrer\">https://github.com/chuangtc/spring-boot-3.0-security-social-login</a></p>\n<p>I tried adding jarkarta servlet api 6.0, but the exception is still there.</p>\n"},{"tags":["java","cassandra"],"comments":[{"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"score":1,"creation_date":1686656239,"post_id":76464079,"comment_id":134826113,"body_markdown":"We would need the full error stack. You expressed here the symptom, not the root cause.  Also, where is cassandra running .. in a docker container close to the application ?","body":"We would need the full error stack. You expressed here the symptom, not the root cause.  Also, where is cassandra running .. in a docker container close to the application ?"}],"owner":{"account_id":28811650,"reputation":1,"user_id":22066225,"display_name":"dynamic dude"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653149,"creation_date":1686653149,"question_id":76464079,"body_markdown":"`[INFO] BUILD FAILURE Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.1.0:run \r\n(default-cli)`your text` on project myproject: Process terminated with exit code: 1 -&gt; [Help 1]\r\n\r\n \r\n To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n\r\n Re-run Maven using the -X switch to enable full debug logging.\r\n For more information about the errors and possible solutions, please read the following \r\narticles\r\n [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n\r\ni was exepecting it to run on localhost`","title":"i am trying to run my web application (java springboot ) has a cassandra db and i keep getting this error","body":"<p><code>[INFO] BUILD FAILURE Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.1.0:run  (default-cli)</code>your text` on project myproject: Process terminated with exit code: 1 -&gt; [Help 1]</p>\n<p>To see the full stack trace of the errors, re-run Maven with the -e switch.</p>\n<p>Re-run Maven using the -X switch to enable full debug logging.\nFor more information about the errors and possible solutions, please read the following\narticles\n[Help 1] <a href=\"http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\" rel=\"nofollow noreferrer\">http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</a></p>\n<p>i was exepecting it to run on localhost`</p>\n"},{"tags":["java","spring","spring-boot","jackson","springdoc"],"answers":[{"tags":[],"owner":{"account_id":6745083,"reputation":11,"user_id":7333091,"display_name":"Andrew Barhatov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686653066,"creation_date":1686653066,"answer_id":76464071,"question_id":76287717,"body_markdown":"My nearest solution after many tests — add wrapper class and a number of annotations:\r\n\r\n```\r\npackage test.controllers;\r\n\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class TestController {\r\n    @XmlRootElement(name = &quot;Person&quot;)\r\n    public static class Person {\r\n        public String fullName;\r\n\r\n        public Person(String fullName) {\r\n            this.fullName = fullName;\r\n        }\r\n    }\r\n\r\n    @RequiredArgsConstructor\r\n    @JacksonXmlRootElement(localName = &quot;Persons&quot;)\r\n    @XmlRootElement(name = &quot;Persons&quot;)\r\n    public static class PersonsList {\r\n        private final List&lt;Person&gt; persons;\r\n\r\n        @JacksonXmlElementWrapper(useWrapping = false)\r\n        @JacksonXmlProperty(localName = &quot;Person&quot;)\r\n        public List&lt;Person&gt; getPersons() {\r\n            return persons;\r\n        }\r\n    }\r\n\r\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\r\n    public PersonsList getPeople() {\r\n        return new PersonsList(Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;)));\r\n    }\r\n}\r\n```\r\n\r\nBut JSON structure has changed: the list is now in a field `Persons`.\r\n","title":"springdoc: Incorrect XML schema for a REST-method that returns a list","body":"<p>My nearest solution after many tests — add wrapper class and a number of annotations:</p>\n<pre><code>package test.controllers;\n\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport javax.xml.bind.annotation.XmlRootElement;\nimport java.util.Arrays;\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class TestController {\n    @XmlRootElement(name = &quot;Person&quot;)\n    public static class Person {\n        public String fullName;\n\n        public Person(String fullName) {\n            this.fullName = fullName;\n        }\n    }\n\n    @RequiredArgsConstructor\n    @JacksonXmlRootElement(localName = &quot;Persons&quot;)\n    @XmlRootElement(name = &quot;Persons&quot;)\n    public static class PersonsList {\n        private final List&lt;Person&gt; persons;\n\n        @JacksonXmlElementWrapper(useWrapping = false)\n        @JacksonXmlProperty(localName = &quot;Person&quot;)\n        public List&lt;Person&gt; getPersons() {\n            return persons;\n        }\n    }\n\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\n    public PersonsList getPeople() {\n        return new PersonsList(Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;)));\n    }\n}\n</code></pre>\n<p>But JSON structure has changed: the list is now in a field <code>Persons</code>.</p>\n"}],"owner":{"account_id":6745083,"reputation":11,"user_id":7333091,"display_name":"Andrew Barhatov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686653066,"creation_date":1684488138,"question_id":76287717,"body_markdown":"I have such @RestController in my Spring Boot application:\r\n\r\n```\r\npackage test.controllers;\r\n\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class TestController {\r\n    public static class Person {\r\n        public String fullName;\r\n\r\n        public Person(String fullName) {\r\n            this.fullName = fullName;\r\n        }\r\n    }\r\n\r\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\r\n    public List&lt;Person&gt; getPeople() {\r\n        return Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;));\r\n    }\r\n}\r\n```\r\n\r\nIt returns such XML:\r\n\r\n```\r\n&lt;List&gt;\r\n  &lt;item&gt;\r\n    &lt;FullName&gt;Name1&lt;/FullName&gt;\r\n  &lt;/item&gt;\r\n  &lt;item&gt;\r\n    &lt;FullName&gt;Name2&lt;/FullName&gt;\r\n  &lt;/item&gt;\r\n&lt;/List&gt;\r\n```\r\n\r\nAnd such JSON:\r\n\r\n```\r\n[{&quot;FullName&quot;:&quot;Name1&quot;},{&quot;FullName&quot;:&quot;Name2&quot;}]\r\n```\r\n\r\nThis structure almost suits me.\r\n\r\nspringdoc generate such openapi code:\r\n\r\n```\r\n{\r\n\t&quot;/test&quot; : {\r\n\t\t&quot;get&quot; : {\r\n\t\t\t&quot;tags&quot; : [\r\n\t\t\t\t&quot;test-controller&quot;\r\n\t\t\t],\r\n\t\t\t&quot;operationId&quot; : &quot;getPeople&quot;,\r\n\t\t\t&quot;responses&quot; : {\r\n\t\t\t\t&quot;200&quot; : {\r\n\t\t\t\t\t&quot;description&quot; : &quot;OK&quot;,\r\n\t\t\t\t\t&quot;content&quot; : {\r\n\t\t\t\t\t\t&quot;application/json&quot; : {\r\n\t\t\t\t\t\t\t&quot;schema&quot; : {\r\n\t\t\t\t\t\t\t\t&quot;type&quot; : &quot;array&quot;,\r\n\t\t\t\t\t\t\t\t&quot;items&quot; : {\r\n\t\t\t\t\t\t\t\t\t&quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t&quot;application/xml&quot; : {\r\n\t\t\t\t\t\t\t&quot;schema&quot; : {\r\n\t\t\t\t\t\t\t\t&quot;type&quot; : &quot;array&quot;,\r\n\t\t\t\t\t\t\t\t&quot;items&quot; : {\r\n\t\t\t\t\t\t\t\t\t&quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t&quot;components&quot; : {\r\n\t\t&quot;schemas&quot; : {\r\n\t\t\t&quot;Person&quot; : {\r\n\t\t\t\t&quot;type&quot; : &quot;object&quot;,\r\n\t\t\t\t&quot;properties&quot; : {\r\n\t\t\t\t\t&quot;fullName&quot; : {\r\n\t\t\t\t\t\t&quot;type&quot; : &quot;string&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t&quot;description&quot; : &quot;&quot;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n1) There is no problems with JSON, but for XML format there are no mentions of *List*/*item* tags and error in swagger-ui for XML example &quot;XML example cannot be generated; root element name is undefined&quot;. What is the right thing to do if the REST-method must return a list and openapi documentation is needed?\r\n\r\n2) How to change the names of the *List* and *item* XML tags?\r\n\r\nI tried to extend ArrayList, make the List\\&lt;Person\\&gt; a field of my class, use various annotations, but did not achieve the desired effect (subject to saving the desired response structure).","title":"springdoc: Incorrect XML schema for a REST-method that returns a list","body":"<p>I have such @RestController in my Spring Boot application:</p>\n<pre><code>package test.controllers;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Arrays;\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class TestController {\n    public static class Person {\n        public String fullName;\n\n        public Person(String fullName) {\n            this.fullName = fullName;\n        }\n    }\n\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\n    public List&lt;Person&gt; getPeople() {\n        return Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;));\n    }\n}\n</code></pre>\n<p>It returns such XML:</p>\n<pre><code>&lt;List&gt;\n  &lt;item&gt;\n    &lt;FullName&gt;Name1&lt;/FullName&gt;\n  &lt;/item&gt;\n  &lt;item&gt;\n    &lt;FullName&gt;Name2&lt;/FullName&gt;\n  &lt;/item&gt;\n&lt;/List&gt;\n</code></pre>\n<p>And such JSON:</p>\n<pre><code>[{&quot;FullName&quot;:&quot;Name1&quot;},{&quot;FullName&quot;:&quot;Name2&quot;}]\n</code></pre>\n<p>This structure almost suits me.</p>\n<p>springdoc generate such openapi code:</p>\n<pre><code>{\n    &quot;/test&quot; : {\n        &quot;get&quot; : {\n            &quot;tags&quot; : [\n                &quot;test-controller&quot;\n            ],\n            &quot;operationId&quot; : &quot;getPeople&quot;,\n            &quot;responses&quot; : {\n                &quot;200&quot; : {\n                    &quot;description&quot; : &quot;OK&quot;,\n                    &quot;content&quot; : {\n                        &quot;application/json&quot; : {\n                            &quot;schema&quot; : {\n                                &quot;type&quot; : &quot;array&quot;,\n                                &quot;items&quot; : {\n                                    &quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\n                                }\n                            }\n                        },\n                        &quot;application/xml&quot; : {\n                            &quot;schema&quot; : {\n                                &quot;type&quot; : &quot;array&quot;,\n                                &quot;items&quot; : {\n                                    &quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    },\n    &quot;components&quot; : {\n        &quot;schemas&quot; : {\n            &quot;Person&quot; : {\n                &quot;type&quot; : &quot;object&quot;,\n                &quot;properties&quot; : {\n                    &quot;fullName&quot; : {\n                        &quot;type&quot; : &quot;string&quot;\n                    }\n                },\n                &quot;description&quot; : &quot;&quot;\n            }\n        }\n    }\n}\n</code></pre>\n<ol>\n<li><p>There is no problems with JSON, but for XML format there are no mentions of <em>List</em>/<em>item</em> tags and error in swagger-ui for XML example &quot;XML example cannot be generated; root element name is undefined&quot;. What is the right thing to do if the REST-method must return a list and openapi documentation is needed?</p>\n</li>\n<li><p>How to change the names of the <em>List</em> and <em>item</em> XML tags?</p>\n</li>\n</ol>\n<p>I tried to extend ArrayList, make the List&lt;Person&gt; a field of my class, use various annotations, but did not achieve the desired effect (subject to saving the desired response structure).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3438670,"reputation":812,"user_id":2881114,"accept_rate":83,"display_name":"tourniquet_grab"},"score":0,"creation_date":1427174017,"post_id":29225415,"comment_id":46658751,"body_markdown":"You could use `\\t` if the numbers are not too big.","body":"You could use <code>\\t</code> if the numbers are not too big."}],"answers":[{"tags":[],"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1427174538,"creation_date":1427174110,"answer_id":29225476,"question_id":29225415,"body_markdown":"Use [`format`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format(java.lang.String,%20java.lang.Object...)) like this:\r\n\r\n    System.out.format(&quot;%4d&quot;, table[t][i]);\r\n\r\nThe output then looks like this:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n       1   2   3   4   5   6\r\n       7   8   9  10  11  12\r\n      13  14  15  16  17  18\r\n      19  20  21  22  23  24\r\n      25  26  27  28  29  30\r\n\r\nOr if you prefer to have the numbers aligned to the left:\r\n\r\n    System.out.format(&quot;%-4d&quot;, table[t][i]);\r\n\r\nWhich results in this output:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    1   2   3   4   5   6   \r\n    7   8   9   10  11  12  \r\n    13  14  15  16  17  18  \r\n    19  20  21  22  23  24  \r\n    25  26  27  28  29  30  ","title":"Java 2d array formatting?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow\"><code>format</code></a> like this:</p>\n\n<pre><code>System.out.format(\"%4d\", table[t][i]);\n</code></pre>\n\n<p>The output then looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   1   2   3   4   5   6\n   7   8   9  10  11  12\n  13  14  15  16  17  18\n  19  20  21  22  23  24\n  25  26  27  28  29  30\n</code></pre>\n\n<p>Or if you prefer to have the numbers aligned to the left:</p>\n\n<pre><code>System.out.format(\"%-4d\", table[t][i]);\n</code></pre>\n\n<p>Which results in this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1   2   3   4   5   6   \n7   8   9   10  11  12  \n13  14  15  16  17  18  \n19  20  21  22  23  24  \n25  26  27  28  29  30  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427174124,"creation_date":1427174124,"answer_id":29225483,"question_id":29225415,"body_markdown":"You should use `printf` instead of `print`\r\n\r\n    System.out.printf(&quot;%3d&quot;, table[t][i]);","title":"Java 2d array formatting?","body":"<p>You should use <code>printf</code> instead of <code>print</code></p>\n\n<pre><code>System.out.printf(\"%3d\", table[t][i]);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1525510654,"post_id":29225491,"comment_id":87391827,"body_markdown":"or just add the spaces in the format `...printf(&quot;%2d    &quot;,...` not that harder to read (eventually easier if having more fields).","body":"or just add the spaces in the format <code>...printf(&quot;%2d    &quot;,...</code> not that harder to read (eventually easier if having more fields)."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1525511110,"post_id":29225491,"comment_id":87391978,"body_markdown":"@CarlosHeuberger Depends on your requirements, I find using `%4s` this way is easier to read in code, but that&#39;s me","body":"@CarlosHeuberger Depends on your requirements, I find using <code>%4s</code> this way is easier to read in code, but that&#39;s me"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1427174160,"creation_date":1427174160,"answer_id":29225491,"question_id":29225415,"body_markdown":"Take a look at [`PrintStream#printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...)) and [`String#format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)) and [Formatted Strings](http://www.homeandlearn.co.uk/java/java_formatted_strings.html)\r\n\r\nBasically, for each row, each column needs to be formated to allow for a minimum of two spaces...\r\n\r\n    System.printf(&quot;%2d&quot;, table[t][i])\r\n\r\nThe next problem comes from the fact that the proceeding columns need extra space inbetween them ;)\r\n\r\n    System.printf(&quot;%2d%4s&quot;, table[t][i], &quot;&quot;)\r\n\r\nWhich can result in something like...\r\n\r\n     1     2     3     4     5     6    \r\n     7     8     9    10    11    12    \r\n    13    14    15    16    17    18    \r\n    19    20    21    22    23    24    \r\n    25    26    27    28    29    30    ","title":"Java 2d array formatting?","body":"<p>Take a look at <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow\"><code>PrintStream#printf</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow\"><code>String#format</code></a> and <a href=\"http://www.homeandlearn.co.uk/java/java_formatted_strings.html\" rel=\"nofollow\">Formatted Strings</a></p>\n\n<p>Basically, for each row, each column needs to be formated to allow for a minimum of two spaces...</p>\n\n<pre><code>System.printf(\"%2d\", table[t][i])\n</code></pre>\n\n<p>The next problem comes from the fact that the proceeding columns need extra space inbetween them ;)</p>\n\n<pre><code>System.printf(\"%2d%4s\", table[t][i], \"\")\n</code></pre>\n\n<p>Which can result in something like...</p>\n\n<pre><code> 1     2     3     4     5     6    \n 7     8     9    10    11    12    \n13    14    15    16    17    18    \n19    20    21    22    23    24    \n25    26    27    28    29    30    \n</code></pre>\n"},{"comments":[{"owner":{"account_id":19501442,"reputation":2332,"user_id":14267427,"display_name":"Tyler2P"},"score":1,"creation_date":1686652747,"post_id":76453423,"comment_id":134825325,"body_markdown":"Your answer could be improved by adding more information on what the code does and how it helps the OP.","body":"Your answer could be improved by adding more information on what the code does and how it helps the OP."}],"tags":[],"owner":{"account_id":28801485,"reputation":1,"user_id":22058287,"display_name":"Omar Alnhdi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686652732,"creation_date":1686539145,"answer_id":76453423,"question_id":29225415,"body_markdown":"You can take my handle\r\n\r\n```\r\nfor (t = 0; t &lt; 5; t++) {\r\n  for (i=0;i &lt; 6; i++) {\r\n    table[t][i] = (t*6)+i+1;\r\n    if (table[t][i] &gt; 9)\r\n      System.out.print(table[t][i] + &quot; &quot;);\r\n    else\r\n      System.out.print(table[t][i] + &quot;  &quot;);\r\n  }\r\n  System.out.println();\r\n}\r\n```","title":"Java 2d array formatting?","body":"<p>You can take my handle</p>\n<pre><code>for (t = 0; t &lt; 5; t++) {\n  for (i=0;i &lt; 6; i++) {\n    table[t][i] = (t*6)+i+1;\n    if (table[t][i] &gt; 9)\n      System.out.print(table[t][i] + &quot; &quot;);\n    else\n      System.out.print(table[t][i] + &quot;  &quot;);\n  }\n  System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":5377561,"reputation":61,"user_id":4283897,"accept_rate":100,"display_name":"madauewo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4557,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":29225476,"answer_count":4,"score":1,"last_activity_date":1686652732,"creation_date":1427173839,"question_id":29225415,"body_markdown":"I there, I am having problems formatting this 2d array. I was thinking about doing system.out.printf, but every time I do something like maybe %2f or something like that it doesn&#39;t work.\r\n\r\n\r\n      public static void main(String[] args) {\r\n        int t,i;\r\n        int[][] table = new int[5][6];\r\n        \r\n        for (t = 0; t &lt; 5; t++) {\r\n            for (i=0;i &lt; 6; i++) {\r\n                table[t][i] = (t*6)+i+1;\r\n                System.out.print(table[t][i] + &quot;  &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n    This is the output:\r\n    \r\n    1  2  3  4  5  6  \r\n    7  8  9  10  11  12  \r\n    13  14  15  16  17  18  \r\n    19  20  21  22  23  24  \r\n    25  26  27  28  29  30  \r\n\r\nThe output should have the spaces perfectly aligned like this : http://prntscr.com/6kn2pq","title":"Java 2d array formatting?","body":"<p>I there, I am having problems formatting this 2d array. I was thinking about doing system.out.printf, but every time I do something like maybe %2f or something like that it doesn't work.</p>\n\n<pre><code>  public static void main(String[] args) {\n    int t,i;\n    int[][] table = new int[5][6];\n\n    for (t = 0; t &lt; 5; t++) {\n        for (i=0;i &lt; 6; i++) {\n            table[t][i] = (t*6)+i+1;\n            System.out.print(table[t][i] + \"  \");\n        }\n        System.out.println();\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>This is the output:\n\n1  2  3  4  5  6  \n7  8  9  10  11  12  \n13  14  15  16  17  18  \n19  20  21  22  23  24  \n25  26  27  28  29  30  \n</code></pre>\n\n<p>The output should have the spaces perfectly aligned like this : <a href=\"http://prntscr.com/6kn2pq\" rel=\"nofollow\">http://prntscr.com/6kn2pq</a></p>\n"},{"tags":["java","api","automation","serenity-bdd"],"comments":[{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1686653348,"post_id":76463536,"comment_id":134825462,"body_markdown":"Where is your second request? Don&#39;t see it. Pls provide full code to reproduce this.","body":"Where is your second request? Don&#39;t see it. Pls provide full code to reproduce this."},{"owner":{"account_id":28490665,"reputation":66,"user_id":21803364,"display_name":"Tamas Demeny"},"score":0,"creation_date":1686655225,"post_id":76463536,"comment_id":134825858,"body_markdown":"@lucas-nguyen-17 I can&#39;t provide second request due to company policy. But any request should produce the same result","body":"@lucas-nguyen-17 I can&#39;t provide second request due to company policy. But any request should produce the same result"},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1686707451,"post_id":76463536,"comment_id":134835055,"body_markdown":"Why don&#39;t you add a random request to demonstrate your problem?","body":"Why don&#39;t you add a random request to demonstrate your problem?"}],"owner":{"account_id":28490665,"reputation":66,"user_id":21803364,"display_name":"Tamas Demeny"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686652532,"creation_date":1686648945,"question_id":76463536,"body_markdown":"So basically in some cases my `lastresponse()` method gets stuck with a previous response and won&#39;t update to a real &#39;last&#39; response.\r\nFor example if I execute this request\r\n`SerenityRest.given() .accept(&quot;*/*&quot;) .header(&quot;X-Api-Key&quot;, &quot;api key&quot;) .when() .get(&quot;https://randommer.io/api/Finance/Iban/&quot;.concat(countryUri)).getBody().as(String.class);`\r\nI get back a random IBAN from the given country. When I make another request after this, and after the second request I call `restAssuredThat( lastResponse -&gt; lastResponse.body(containsString(message)));`\r\nThe `lastResponse` will contain the first requests IBAN, instead of the second requests body. I have encountered this issue with post requests, when I use multipart to upload a file.\r\n\r\nI have tried adding `Thread.sleep()` delays, executing two requests in the same step.\r\n\r\nSo has anyone encountered this? Is there a fix or a workaround?","title":"SerenityRest lastResponse() method returns response from previous response","body":"<p>So basically in some cases my <code>lastresponse()</code> method gets stuck with a previous response and won't update to a real 'last' response.\nFor example if I execute this request\n<code>SerenityRest.given() .accept(&quot;*/*&quot;) .header(&quot;X-Api-Key&quot;, &quot;api key&quot;) .when() .get(&quot;https://randommer.io/api/Finance/Iban/&quot;.concat(countryUri)).getBody().as(String.class);</code>\nI get back a random IBAN from the given country. When I make another request after this, and after the second request I call <code>restAssuredThat( lastResponse -&gt; lastResponse.body(containsString(message)));</code>\nThe <code>lastResponse</code> will contain the first requests IBAN, instead of the second requests body. I have encountered this issue with post requests, when I use multipart to upload a file.</p>\n<p>I have tried adding <code>Thread.sleep()</code> delays, executing two requests in the same step.</p>\n<p>So has anyone encountered this? Is there a fix or a workaround?</p>\n"},{"tags":["java","android","nfc","smartcard","android-anr-dialog"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686652688,"post_id":76464000,"comment_id":134825307,"body_markdown":"Are you performing the NFC reading on a background thread, or the activity thread? Performing it on the Activity thread would explain the ANRs.","body":"Are you performing the NFC reading on a background thread, or the activity thread? Performing it on the Activity thread would explain the ANRs."},{"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"score":0,"creation_date":1686652838,"post_id":76464000,"comment_id":134825344,"body_markdown":"It uses an NfcAdapter.ReaderCallback and calls a new thread in handler.","body":"It uses an NfcAdapter.ReaderCallback and calls a new thread in handler."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686653194,"post_id":76464000,"comment_id":134825431,"body_markdown":"And what are you using for the Handler&#39;s backing thead? By &quot;backing thread&quot; i mean - which `Looper` is it using? Are you sure it&#39;s not using the UI thread, since I just see the `new Handler()` - i know it **shouldn&#39;t** default to the UI thread, however try looking at [this answer](https://stackoverflow.com/a/29389627/1101692) and fix your Handler initialization to make sure it&#39;s running on a background thread.","body":"And what are you using for the Handler&#39;s backing thead? By &quot;backing thread&quot; i mean - which <code>Looper</code> is it using? Are you sure it&#39;s not using the UI thread, since I just see the <code>new Handler()</code> - i know it <b>shouldn&#39;t</b> default to the UI thread, however try looking at <a href=\"https://stackoverflow.com/a/29389627/1101692\">this answer</a> and fix your Handler initialization to make sure it&#39;s running on a background thread."},{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1686656191,"post_id":76464000,"comment_id":134826101,"body_markdown":"Not sure why you are using both `enableForegroundDispatch` and `enableReaderMode` as really `enableReaderMode` is a newer and better replacement for `enableForegroundDispatch`. Also not sure why you are creating a new thread in `onTagDiscovered` as that is already in it&#39;s own thread. Possibly with all the extra threading you have added, it&#39;s got back to the UI Thread as normally in `onTagDiscovered` you cannot interact with the UI thread and do things like show a dialog.","body":"Not sure why you are using both <code>enableForegroundDispatch</code> and <code>enableReaderMode</code> as really <code>enableReaderMode</code> is a newer and better replacement for <code>enableForegroundDispatch</code>. Also not sure why you are creating a new thread in <code>onTagDiscovered</code> as that is already in it&#39;s own thread. Possibly with all the extra threading you have added, it&#39;s got back to the UI Thread as normally in <code>onTagDiscovered</code> you cannot interact with the UI thread and do things like show a dialog."}],"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686652474,"creation_date":1686652474,"question_id":76464000,"body_markdown":"I am trying to access an ISO-14443-4 NFC tag to read a rather substantial amount of data from the NFC tag and I am getting ANR frequently.\r\n\r\nMy Activity Code:\r\n```\r\npublic class CardPairingActivity extends AppCompatActivity implements InfoDialogCopyDialog.InfoDialogCopyDialogListener, AlertCallbackDialog.AlertDialogListener {\r\n\r\n    private static String username = &quot;&quot;;\r\n    private static String password = &quot;&quot;;\r\n    private static final byte role = Constants.USER_KEYMAN;\r\n    private NfcAdapter nfcAdapter = null;\r\n    private IntentFilter[] intentFiltersArray = null;\r\n    private String[][] techListsArray = null;\r\n    private PendingIntent pendingIntent = null;\r\n    private APDUResult apduRes = null;\r\n    private static Handler handler = new Handler();\r\n    private static Runnable runnable = null;\r\n    private static Context myContext = null;\r\n    private static IsoDep iso14443 = null;\r\n    private static Intent _intent = null;\r\n    public static int READER_FLAGS = NfcAdapter.FLAG_READER_NFC_A | NfcAdapter.FLAG_READER_SKIP_NDEF_CHECK;\r\n    private static PairingCallBack callBack = null;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_card_pairing);\r\n\r\n        myContext = this;\r\n        callBack = new PairingCallBack();\r\n        callBack.setContext(myContext);\r\n\r\n        NfcManager nfcManager = (NfcManager) getSystemService(Context.NFC_SERVICE);\r\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\r\n        nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\r\n\r\n        if (nfcManager != null) {\r\n            System.out.println(&quot;NFC Manager ready ...&quot;);\r\n        }\r\n\r\n        if (nfcAdapter != null) {\r\n            System.out.println(&quot;NFC Adapter ready ...&quot;);\r\n        }\r\n\r\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\r\n        intentFiltersArray = new IntentFilter[]{new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED)};\r\n        techListsArray = new String[][]{new String[]{NfcA.class.getName()}, new String[]{NfcB.class.getName()}, new String[]{IsoDep.class.getName()}};\r\n\r\n        if (android.os.Build.VERSION.SDK_INT &gt; 9) {\r\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n            StrictMode.setThreadPolicy(policy);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        Intent intent = new Intent();\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n        PendingIntent nfcPendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n        if (nfcAdapter != null) {\r\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray, techListsArray);\r\n            nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\r\n        }\r\n    }\r\n\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        if (nfcAdapter != null) {\r\n            try {\r\n                nfcAdapter.disableForegroundDispatch(this);\r\n                nfcAdapter.disableReaderMode(this);\r\n            } catch (IllegalStateException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error disabling NFC foreground dispatch&quot;, ex);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void infoDialogCopyDialog() {\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    public static void continueExec() throws InvalidAlgorithmParameterException, InvalidSizeException, NoSuchPaddingException, IllegalBlockSizeException, IOException, NoSuchAlgorithmException, BadPaddingException, InvalidKeyException, ShortBufferException, InvalidParameterSpecException, InvalidKeySpecException, NoSuchProviderException, IllegalFormatException {\r\n        handler.post(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                System.out.println(&quot;Authenticating to card ...&quot;);\r\n                System.out.println(&quot;Card User Role: &quot; + (int) role);\r\n                System.out.println(&quot;Card Username: &quot; + username);\r\n                System.out.println(&quot;Card Secret: &quot; + password);\r\n\r\n                try {\r\n                    if (API.cardAuthenticate(Constants.USER_KEYMAN, username, password.toCharArray())) {\r\n                        // Login success\r\n                        // DO VERY LONG CARD READING\r\n                        API.readAndStoreNFCUserProfileData();\r\n                    } else {\r\n                        // Login fail\r\n                        System.out.println(&quot;[ERR] Card Login FAILED ...&quot;);\r\n                        int tries = API.adminCardLoginTriesRemaining(role, null);\r\n                        if (tries != -1) {\r\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed. \\r\\nLogin Retries Left: &quot; + tries, &quot;OK&quot;, myContext, MainActivity.class);\r\n                        } else {\r\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed.&quot;, &quot;OK&quot;, myContext, MainActivity.class);\r\n                        }\r\n                    }\r\n//                    SharedResource.getIsoDep().close();\r\n//                    SharedResource.setIsoDep(null);\r\n                } catch (InvalidAlgorithmParameterException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidSizeException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (NoSuchPaddingException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (ShortBufferException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (IllegalBlockSizeException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (NoSuchAlgorithmException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidParameterSpecException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidKeySpecException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (BadPaddingException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidKeyException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (NoSuchProviderException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (IllegalFormatException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    public void alertCallbackDialog() {\r\n        System.out.println(&quot;AlertCallbackDialog runs ...&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNFC Callback\r\n\r\n```\r\npublic class PairingCallBack implements NfcAdapter.ReaderCallback {\r\n    Context myContext = null;\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    public void onTagDiscovered(Tag tag) {\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                boolean hasIsoDep = false;\r\n\r\n                if (tag != null) {\r\n                    System.out.println(&quot;New tag found !!!&quot;);\r\n                    System.out.println(&quot;Tag ID: &quot; + BinUtils.toHexString(tag.getId()));\r\n                    System.out.println(&quot;\\r\\n&quot;);\r\n                    for (String tagTech : tag.getTechList()) {\r\n                        System.out.println(&quot;Tech: &quot; + tagTech);\r\n                        if (tagTech.equals(&quot;android.nfc.tech.IsoDep&quot;)) {\r\n                            hasIsoDep = true;\r\n                        }\r\n                    }\r\n                } else {\r\n                    System.out.println(&quot;No new tag found !!!&quot;);\r\n                }\r\n\r\n                if (hasIsoDep) {\r\n                    try {\r\n                        IsoDep iso14443 = IsoDep.get(tag);\r\n                        iso14443.connect();\r\n                        iso14443.setTimeout(120000);\r\n                        SharedResource.setIsoDep(iso14443);\r\n                        System.out.println(&quot;Selecting KeyVault applet ...&quot;);\r\n\r\n                        boolean isSuccess = API.adminInit();\r\n                        boolean isContinue = true;\r\n\r\n                        System.out.println(&quot;-- PairingCallBack :: IsSuccess: &quot; + isSuccess);\r\n                        System.out.println(&quot;-- PairingCallBack :: IsContinue: &quot; + isContinue);\r\n\r\n                        if (isSuccess) {\r\n                            if (isContinue) {\r\n\r\n\r\n                                if ((byte) (SharedResource.getHwInfo().getInteractiveCapabilities() &amp; Constants.INTERACT_SCREEN) == Constants.INTERACT_SCREEN) {\r\n                                    System.out.println(&quot;[INF] Found interactive card ...&quot;);\r\n                                    String toShow = &quot;Please verify OTP Code:\\n&quot; + SharedResource.getSessionData().getOtpCode();\r\n                                    String title = &quot;Secure Card Session&quot;;\r\n                                    AlertCallbackDialog dialog = new AlertCallbackDialog(title, toShow, myContext);\r\n                                    dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;aldialog&quot;);\r\n                                } else {\r\n                                    System.out.println(&quot;[INF] Not interactive card ...&quot;);\r\n                                    CardPairingActivity.continueExec();\r\n                                }\r\n\r\n                            }\r\n                        } else {\r\n                            System.out.println(&quot;[ERR] Failed to select applet !!!&quot;);\r\n                        }\r\n                    } catch (IOException | InvalidSizeException | InvalidAlgorithmParameterException |\r\n                             NoSuchPaddingException | ShortBufferException | IllegalBlockSizeException |\r\n                             NoSuchAlgorithmException | InvalidParameterSpecException |\r\n                             InvalidKeySpecException | BadPaddingException | InvalidKeyException |\r\n                             NoSuchProviderException ex) {\r\n                        Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n                    } catch (IllegalFormatException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    public void setContext(Context context) {\r\n        myContext = context;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAlert dialog box to display an OTP secure channel code before downloading user profile from card\r\n```\r\npublic class AlertCallbackDialog extends AppCompatDialogFragment {\r\n\r\n    private AlertCallbackDialog.AlertDialogListener listener;\r\n    private String title = &quot;&quot;;\r\n    private String message = &quot;&quot;;\r\n    private View view = null;\r\n\r\n    public AlertCallbackDialog(String title, String message, Context context) {\r\n        this.title = title;\r\n        this.message = message;\r\n    }\r\n\r\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\r\n        System.out.println(&quot;[INF] Creating AlertCallbackDialog ...&quot;);\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n        builder.setTitle(title);\r\n        builder.setMessage(message);\r\n        return builder.create();\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    public void onDismiss(@NonNull DialogInterface dialog) {\r\n        super.onDismiss(dialog);\r\n        System.out.println(&quot;[INF] Dismissed AlertCallbackDialog ...&quot;);\r\n        try {\r\n            CardPairingActivity.continueExec();\r\n        } catch (InvalidAlgorithmParameterException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidSizeException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchPaddingException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IllegalBlockSizeException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchAlgorithmException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (BadPaddingException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidKeyException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (ShortBufferException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidParameterSpecException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidKeySpecException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchProviderException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IllegalFormatException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onAttach(Context context) {\r\n        super.onAttach(context);\r\n        try {\r\n            System.out.println(&quot;[INF] Attaching AlertCallbackDialog ...&quot;);\r\n            listener = (AlertCallbackDialog.AlertDialogListener) context;\r\n        } catch (ClassCastException e) {\r\n            throw new ClassCastException(context.toString() + &quot; must implement AlertDialogListener&quot;);\r\n        }\r\n    }\r\n\r\n    public interface AlertDialogListener {\r\n        void alertCallbackDialog();\r\n    }\r\n}\r\n```\r\n\r\nI am wondering if there&#39;s something that is causing the ANR to as I have attempted to spawn off a new thread in handler and tried to remove as many things in the activity.","title":"Getting ANR while performing long NFC routines","body":"<p>I am trying to access an ISO-14443-4 NFC tag to read a rather substantial amount of data from the NFC tag and I am getting ANR frequently.</p>\n<p>My Activity Code:</p>\n<pre><code>public class CardPairingActivity extends AppCompatActivity implements InfoDialogCopyDialog.InfoDialogCopyDialogListener, AlertCallbackDialog.AlertDialogListener {\n\n    private static String username = &quot;&quot;;\n    private static String password = &quot;&quot;;\n    private static final byte role = Constants.USER_KEYMAN;\n    private NfcAdapter nfcAdapter = null;\n    private IntentFilter[] intentFiltersArray = null;\n    private String[][] techListsArray = null;\n    private PendingIntent pendingIntent = null;\n    private APDUResult apduRes = null;\n    private static Handler handler = new Handler();\n    private static Runnable runnable = null;\n    private static Context myContext = null;\n    private static IsoDep iso14443 = null;\n    private static Intent _intent = null;\n    public static int READER_FLAGS = NfcAdapter.FLAG_READER_NFC_A | NfcAdapter.FLAG_READER_SKIP_NDEF_CHECK;\n    private static PairingCallBack callBack = null;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_card_pairing);\n\n        myContext = this;\n        callBack = new PairingCallBack();\n        callBack.setContext(myContext);\n\n        NfcManager nfcManager = (NfcManager) getSystemService(Context.NFC_SERVICE);\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\n        nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\n\n        if (nfcManager != null) {\n            System.out.println(&quot;NFC Manager ready ...&quot;);\n        }\n\n        if (nfcAdapter != null) {\n            System.out.println(&quot;NFC Adapter ready ...&quot;);\n        }\n\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\n        intentFiltersArray = new IntentFilter[]{new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED)};\n        techListsArray = new String[][]{new String[]{NfcA.class.getName()}, new String[]{NfcB.class.getName()}, new String[]{IsoDep.class.getName()}};\n\n        if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n            StrictMode.setThreadPolicy(policy);\n        }\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Intent intent = new Intent();\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\n        PendingIntent nfcPendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\n        if (nfcAdapter != null) {\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray, techListsArray);\n            nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\n        }\n    }\n\n    protected void onPause() {\n        super.onPause();\n\n        if (nfcAdapter != null) {\n            try {\n                nfcAdapter.disableForegroundDispatch(this);\n                nfcAdapter.disableReaderMode(this);\n            } catch (IllegalStateException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error disabling NFC foreground dispatch&quot;, ex);\n            }\n        }\n    }\n\n    @Override\n    public void infoDialogCopyDialog() {\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    public static void continueExec() throws InvalidAlgorithmParameterException, InvalidSizeException, NoSuchPaddingException, IllegalBlockSizeException, IOException, NoSuchAlgorithmException, BadPaddingException, InvalidKeyException, ShortBufferException, InvalidParameterSpecException, InvalidKeySpecException, NoSuchProviderException, IllegalFormatException {\n        handler.post(new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(&quot;Authenticating to card ...&quot;);\n                System.out.println(&quot;Card User Role: &quot; + (int) role);\n                System.out.println(&quot;Card Username: &quot; + username);\n                System.out.println(&quot;Card Secret: &quot; + password);\n\n                try {\n                    if (API.cardAuthenticate(Constants.USER_KEYMAN, username, password.toCharArray())) {\n                        // Login success\n                        // DO VERY LONG CARD READING\n                        API.readAndStoreNFCUserProfileData();\n                    } else {\n                        // Login fail\n                        System.out.println(&quot;[ERR] Card Login FAILED ...&quot;);\n                        int tries = API.adminCardLoginTriesRemaining(role, null);\n                        if (tries != -1) {\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed. \\r\\nLogin Retries Left: &quot; + tries, &quot;OK&quot;, myContext, MainActivity.class);\n                        } else {\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed.&quot;, &quot;OK&quot;, myContext, MainActivity.class);\n                        }\n                    }\n//                    SharedResource.getIsoDep().close();\n//                    SharedResource.setIsoDep(null);\n                } catch (InvalidAlgorithmParameterException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidSizeException e) {\n                    throw new RuntimeException(e);\n                } catch (NoSuchPaddingException e) {\n                    throw new RuntimeException(e);\n                } catch (ShortBufferException e) {\n                    throw new RuntimeException(e);\n                } catch (IllegalBlockSizeException e) {\n                    throw new RuntimeException(e);\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                } catch (NoSuchAlgorithmException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidParameterSpecException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidKeySpecException e) {\n                    throw new RuntimeException(e);\n                } catch (BadPaddingException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidKeyException e) {\n                    throw new RuntimeException(e);\n                } catch (NoSuchProviderException e) {\n                    throw new RuntimeException(e);\n                } catch (IllegalFormatException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        });\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    public void alertCallbackDialog() {\n        System.out.println(&quot;AlertCallbackDialog runs ...&quot;);\n    }\n}\n</code></pre>\n<p>NFC Callback</p>\n<pre><code>public class PairingCallBack implements NfcAdapter.ReaderCallback {\n    Context myContext = null;\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    public void onTagDiscovered(Tag tag) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                boolean hasIsoDep = false;\n\n                if (tag != null) {\n                    System.out.println(&quot;New tag found !!!&quot;);\n                    System.out.println(&quot;Tag ID: &quot; + BinUtils.toHexString(tag.getId()));\n                    System.out.println(&quot;\\r\\n&quot;);\n                    for (String tagTech : tag.getTechList()) {\n                        System.out.println(&quot;Tech: &quot; + tagTech);\n                        if (tagTech.equals(&quot;android.nfc.tech.IsoDep&quot;)) {\n                            hasIsoDep = true;\n                        }\n                    }\n                } else {\n                    System.out.println(&quot;No new tag found !!!&quot;);\n                }\n\n                if (hasIsoDep) {\n                    try {\n                        IsoDep iso14443 = IsoDep.get(tag);\n                        iso14443.connect();\n                        iso14443.setTimeout(120000);\n                        SharedResource.setIsoDep(iso14443);\n                        System.out.println(&quot;Selecting KeyVault applet ...&quot;);\n\n                        boolean isSuccess = API.adminInit();\n                        boolean isContinue = true;\n\n                        System.out.println(&quot;-- PairingCallBack :: IsSuccess: &quot; + isSuccess);\n                        System.out.println(&quot;-- PairingCallBack :: IsContinue: &quot; + isContinue);\n\n                        if (isSuccess) {\n                            if (isContinue) {\n\n\n                                if ((byte) (SharedResource.getHwInfo().getInteractiveCapabilities() &amp; Constants.INTERACT_SCREEN) == Constants.INTERACT_SCREEN) {\n                                    System.out.println(&quot;[INF] Found interactive card ...&quot;);\n                                    String toShow = &quot;Please verify OTP Code:\\n&quot; + SharedResource.getSessionData().getOtpCode();\n                                    String title = &quot;Secure Card Session&quot;;\n                                    AlertCallbackDialog dialog = new AlertCallbackDialog(title, toShow, myContext);\n                                    dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;aldialog&quot;);\n                                } else {\n                                    System.out.println(&quot;[INF] Not interactive card ...&quot;);\n                                    CardPairingActivity.continueExec();\n                                }\n\n                            }\n                        } else {\n                            System.out.println(&quot;[ERR] Failed to select applet !!!&quot;);\n                        }\n                    } catch (IOException | InvalidSizeException | InvalidAlgorithmParameterException |\n                             NoSuchPaddingException | ShortBufferException | IllegalBlockSizeException |\n                             NoSuchAlgorithmException | InvalidParameterSpecException |\n                             InvalidKeySpecException | BadPaddingException | InvalidKeyException |\n                             NoSuchProviderException ex) {\n                        Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n                    } catch (IllegalFormatException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n            }\n        }).start();\n    }\n\n    public void setContext(Context context) {\n        myContext = context;\n    }\n\n}\n</code></pre>\n<p>Alert dialog box to display an OTP secure channel code before downloading user profile from card</p>\n<pre><code>public class AlertCallbackDialog extends AppCompatDialogFragment {\n\n    private AlertCallbackDialog.AlertDialogListener listener;\n    private String title = &quot;&quot;;\n    private String message = &quot;&quot;;\n    private View view = null;\n\n    public AlertCallbackDialog(String title, String message, Context context) {\n        this.title = title;\n        this.message = message;\n    }\n\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n        System.out.println(&quot;[INF] Creating AlertCallbackDialog ...&quot;);\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n        builder.setTitle(title);\n        builder.setMessage(message);\n        return builder.create();\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    public void onDismiss(@NonNull DialogInterface dialog) {\n        super.onDismiss(dialog);\n        System.out.println(&quot;[INF] Dismissed AlertCallbackDialog ...&quot;);\n        try {\n            CardPairingActivity.continueExec();\n        } catch (InvalidAlgorithmParameterException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidSizeException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchPaddingException e) {\n            throw new RuntimeException(e);\n        } catch (IllegalBlockSizeException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(e);\n        } catch (BadPaddingException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidKeyException e) {\n            throw new RuntimeException(e);\n        } catch (ShortBufferException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidParameterSpecException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidKeySpecException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchProviderException e) {\n            throw new RuntimeException(e);\n        } catch (IllegalFormatException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        try {\n            System.out.println(&quot;[INF] Attaching AlertCallbackDialog ...&quot;);\n            listener = (AlertCallbackDialog.AlertDialogListener) context;\n        } catch (ClassCastException e) {\n            throw new ClassCastException(context.toString() + &quot; must implement AlertDialogListener&quot;);\n        }\n    }\n\n    public interface AlertDialogListener {\n        void alertCallbackDialog();\n    }\n}\n</code></pre>\n<p>I am wondering if there's something that is causing the ANR to as I have attempted to spawn off a new thread in handler and tried to remove as many things in the activity.</p>\n"},{"tags":["java","apache-spark","spark-streaming","spark-structured-streaming"],"answers":[{"tags":[],"owner":{"account_id":21426549,"reputation":427,"user_id":15783777,"display_name":"catGPT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686652013,"creation_date":1686652013,"answer_id":76463938,"question_id":76463396,"body_markdown":"Write groupby in this way\r\n\r\n```\r\n.groupBy(\r\n     window(col(&quot;timestamp&quot;),&quot;5 minutes&quot;),\r\n     col(&quot;value&quot;)\r\n).count();","title":"Watermark not showing correct output in spark","body":"<p>Write groupby in this way</p>\n<pre><code>.groupBy(\n     window(col(&quot;timestamp&quot;),&quot;5 minutes&quot;),\n     col(&quot;value&quot;)\n).count();\n</code></pre>\n"}],"owner":{"account_id":21426549,"reputation":427,"user_id":15783777,"display_name":"catGPT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76463938,"answer_count":1,"score":1,"last_activity_date":1686652013,"creation_date":1686647861,"question_id":76463396,"body_markdown":"I am sending streaming data to spark using netcat server:\r\n```\r\nnc -lk 9999\r\n```\r\nI am sending data in following format:\r\n```\r\nTime,number\r\n```\r\nIn spark, I am splitting them and performing a groupby operation. Here is my code:\r\n```\r\npackage org.example;\r\n\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.SparkSession;\r\nimport org.apache.spark.sql.*;\r\nimport org.apache.spark.sql.streaming.StreamingQuery;\r\nimport org.apache.spark.sql.streaming.StreamingQueryException;\r\n\r\nimport java.util.concurrent.TimeoutException;\r\nimport static org.apache.spark.sql.functions.*;\r\nimport org.apache.spark.sql.streaming.Trigger;\r\n\r\n\r\npublic class SampleProgram {\r\n    public static void main(String args[]) {\r\n        SparkSession spark = SparkSession\r\n                .builder()\r\n                .appName(&quot;Spark-Kafka-Integration&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n        spark.sparkContext().setLogLevel(&quot;ERROR&quot;);\r\n\r\n        Dataset&lt;Row&gt; lines = spark\r\n                .readStream()\r\n                .format(&quot;socket&quot;)\r\n                .option(&quot;host&quot;, &quot;localhost&quot;)\r\n                .option(&quot;port&quot;, 9999)\r\n                .load();\r\n\r\n        lines.printSchema();\r\n\r\n       Dataset&lt;Row&gt; temp_data = lines.selectExpr(&quot;split(value,&#39;,&#39;)[0] as timestamp&quot;,&quot;split(value,&#39;,&#39;)[1] as value&quot;);\r\n       Dataset&lt;Row&gt; data = temp_data.selectExpr(&quot;CAST(timestamp AS TIMESTAMP)&quot;, &quot;CAST(value AS INT)&quot;);\r\n\r\n        Dataset&lt;Row&gt; windowedCounts = data\r\n                .withWatermark(&quot;timestamp&quot;, &quot;10 minutes&quot;)\r\n                .groupBy(\r\n                    functions.window(data.col(&quot;timestamp&quot;), &quot;5 minutes&quot;),\r\n                        col(&quot;value&quot;)\r\n                ) .count();\r\n\r\n        StreamingQuery query = null;\r\n        try {\r\n            query = windowedCounts.writeStream()\r\n                    .outputMode(&quot;update&quot;)\r\n                    .option(&quot;truncate&quot;, &quot;false&quot;)\r\n                    .format(&quot;console&quot;)\r\n                    .trigger(Trigger.ProcessingTime(&quot; 45 seconds&quot;))\r\n                    .start();\r\n        } catch (TimeoutException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        try {\r\n            query.awaitTermination();\r\n        } catch (StreamingQueryException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n```\r\nThe issue which I am facing is this -\r\n\r\nWhen I give the input, say, 10:00:00,5 it gives this output.\r\n\r\n[![Output given][1]][1]\r\n\r\n\r\nNow, at this point of time, max event time is 10:00:00 and I have specified watermark as 10 minutes, so any event before (10:00:00-00:10:00) i.e. 09:50:00 should be rejected. However, when I give input say 09:48:00,10 it gives this output - \r\n\r\n[![output given][2]][2]\r\n\r\n\r\nWhich seems incorrect to me because the data is already too late, it should be rejected by spark, but spark is considering it. What am I missing here ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nrwoT.png\r\n  [2]: https://i.stack.imgur.com/0q5nI.png","title":"Watermark not showing correct output in spark","body":"<p>I am sending streaming data to spark using netcat server:</p>\n<pre><code>nc -lk 9999\n</code></pre>\n<p>I am sending data in following format:</p>\n<pre><code>Time,number\n</code></pre>\n<p>In spark, I am splitting them and performing a groupby operation. Here is my code:</p>\n<pre><code>package org.example;\n\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.SparkSession;\nimport org.apache.spark.sql.*;\nimport org.apache.spark.sql.streaming.StreamingQuery;\nimport org.apache.spark.sql.streaming.StreamingQueryException;\n\nimport java.util.concurrent.TimeoutException;\nimport static org.apache.spark.sql.functions.*;\nimport org.apache.spark.sql.streaming.Trigger;\n\n\npublic class SampleProgram {\n    public static void main(String args[]) {\n        SparkSession spark = SparkSession\n                .builder()\n                .appName(&quot;Spark-Kafka-Integration&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n        spark.sparkContext().setLogLevel(&quot;ERROR&quot;);\n\n        Dataset&lt;Row&gt; lines = spark\n                .readStream()\n                .format(&quot;socket&quot;)\n                .option(&quot;host&quot;, &quot;localhost&quot;)\n                .option(&quot;port&quot;, 9999)\n                .load();\n\n        lines.printSchema();\n\n       Dataset&lt;Row&gt; temp_data = lines.selectExpr(&quot;split(value,',')[0] as timestamp&quot;,&quot;split(value,',')[1] as value&quot;);\n       Dataset&lt;Row&gt; data = temp_data.selectExpr(&quot;CAST(timestamp AS TIMESTAMP)&quot;, &quot;CAST(value AS INT)&quot;);\n\n        Dataset&lt;Row&gt; windowedCounts = data\n                .withWatermark(&quot;timestamp&quot;, &quot;10 minutes&quot;)\n                .groupBy(\n                    functions.window(data.col(&quot;timestamp&quot;), &quot;5 minutes&quot;),\n                        col(&quot;value&quot;)\n                ) .count();\n\n        StreamingQuery query = null;\n        try {\n            query = windowedCounts.writeStream()\n                    .outputMode(&quot;update&quot;)\n                    .option(&quot;truncate&quot;, &quot;false&quot;)\n                    .format(&quot;console&quot;)\n                    .trigger(Trigger.ProcessingTime(&quot; 45 seconds&quot;))\n                    .start();\n        } catch (TimeoutException e) {\n            throw new RuntimeException(e);\n        }\n\n        try {\n            query.awaitTermination();\n        } catch (StreamingQueryException e) {\n            throw new RuntimeException(e);\n        }\n\n\n    }\n}\n\n</code></pre>\n<p>The issue which I am facing is this -</p>\n<p>When I give the input, say, 10:00:00,5 it gives this output.</p>\n<p><a href=\"https://i.stack.imgur.com/nrwoT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nrwoT.png\" alt=\"Output given\" /></a></p>\n<p>Now, at this point of time, max event time is 10:00:00 and I have specified watermark as 10 minutes, so any event before (10:00:00-00:10:00) i.e. 09:50:00 should be rejected. However, when I give input say 09:48:00,10 it gives this output -</p>\n<p><a href=\"https://i.stack.imgur.com/0q5nI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0q5nI.png\" alt=\"output given\" /></a></p>\n<p>Which seems incorrect to me because the data is already too late, it should be rejected by spark, but spark is considering it. What am I missing here ?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686336369,"post_id":76442835,"comment_id":134790068,"body_markdown":"What about `javac -version`?","body":"What about <code>javac -version</code>?"},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1686336628,"post_id":76442835,"comment_id":134790113,"body_markdown":"@g00se I have updated answer: 17.0.6","body":"@g00se I have updated answer: 17.0.6"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686341250,"post_id":76442835,"comment_id":134790839,"body_markdown":"Strange. Personally I don&#39;t do Gradle but somehow it *seems* a compiler (or runtime) &lt; 17 is being used","body":"Strange. Personally I don&#39;t do Gradle but somehow it <i>seems</i> a compiler (or runtime) &lt; 17 is being used"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":3,"creation_date":1686356697,"post_id":76442835,"comment_id":134792359,"body_markdown":"Your problem is that you are using Spring Boot 2.2.4 with Java 17. Either downgrade your Java version, or upgrade your Spring Boot version. [From this accepted SO answer](https://stackoverflow.com/a/75503865/2985643): _&quot;Spring Boot 2.5 is minimal version that supports JRE 17.&quot;_ There is probably a helpful matrix documenting the JDKs supported/required for each Spring Boot version somewhere, but I can&#39;t find it.","body":"Your problem is that you are using Spring Boot 2.2.4 with Java 17. Either downgrade your Java version, or upgrade your Spring Boot version. <a href=\"https://stackoverflow.com/a/75503865/2985643\">From this accepted SO answer</a>: <i>&quot;Spring Boot 2.5 is minimal version that supports JRE 17.&quot;</i> There is probably a helpful matrix documenting the JDKs supported/required for each Spring Boot version somewhere, but I can&#39;t find it."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":2,"creation_date":1686357188,"post_id":76442835,"comment_id":134792389,"body_markdown":"...Also, I couldn&#39;t find release notes specific to release 2.2.4, but I did find this in [the Spring Boot documentation for 2.2.x](https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/getting-started.html#getting-started.system-requirements): _&quot;Spring Boot 2.2.13.RELEASE requires Java 8 and is compatible up to Java 15 (included).&quot;_ So you definitely can&#39;t use a JDK &gt;= 15 with 2.2.4, and it might even be lower than 15.","body":"...Also, I couldn&#39;t find release notes specific to release 2.2.4, but I did find this in <a href=\"https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"nofollow noreferrer\">the Spring Boot documentation for 2.2.x</a>: <i>&quot;Spring Boot 2.2.13.RELEASE requires Java 8 and is compatible up to Java 15 (included).&quot;</i> So you definitely can&#39;t use a JDK &gt;= 15 with 2.2.4, and it might even be lower than 15."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1686572482,"post_id":76442835,"comment_id":134812380,"body_markdown":"@skomisa You are right. I had updated spring-framework version to 2.7.3 and now all works well.","body":"@skomisa You are right. I had updated spring-framework version to 2.7.3 and now all works well."},{"owner":{"account_id":371244,"reputation":443,"user_id":17825391,"display_name":"user213769"},"score":0,"creation_date":1689796595,"post_id":76442835,"comment_id":135266090,"body_markdown":"Does this answer your question? [What minimal Spring Boot 2.x version can run for sure on Java 17?](https://stackoverflow.com/questions/75503517/what-minimal-spring-boot-2-x-version-can-run-for-sure-on-java-17)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75503517/what-minimal-spring-boot-2-x-version-can-run-for-sure-on-java-17\">What minimal Spring Boot 2.x version can run for sure on Java 17?</a>"}],"answers":[{"tags":[],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686651979,"creation_date":1686651979,"answer_id":76463935,"question_id":76442835,"body_markdown":"Since I used an example to investigate the node and npm integration to the spring project I used the same spring-framework version as in their repository (2.2.4). But I didn&#39;t consider that this version isn&#39;t compatible with Java 17. Thanks to @skomisa tip I only updated the spring version to 2.7.3 and it all. \r\n\r\n```\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;2.7.3&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &#39;java&#39;\r\n}\r\n```","title":"Unsupported class file major version 61 with Java 17 and spring-framework 2.2.4","body":"<p>Since I used an example to investigate the node and npm integration to the spring project I used the same spring-framework version as in their repository (2.2.4). But I didn't consider that this version isn't compatible with Java 17. Thanks to @skomisa tip I only updated the spring version to 2.7.3 and it all.</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.3'\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'java'\n}\n</code></pre>\n"}],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1113,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76463935,"answer_count":1,"score":-2,"last_activity_date":1686651979,"creation_date":1686335195,"question_id":76442835,"body_markdown":"I am developing a spring-boot project.\r\nThis project should be integrated with React, so, from any reasons I have to use exactly 2.2.4 spring-boot. But in this case, I can&#39;t build project because I am receiving error Unsupported class file major version 61.\r\n\r\nSo, my gradle.build:\r\n\r\n```groovy\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.2.4.RELEASE&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n}\r\n\r\ntasks.withType(JavaCompile) {\r\n\tsourceCompatibility = &#39;17&#39;\r\n\ttargetCompatibility = &#39;17&#39;\r\n}\r\n\r\ngroup = &#39;com.hrzc&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\next {\r\n\tlombok_version = &#39;1.18.24&#39;\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-rest&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\truntimeOnly &#39;com.h2database:h2&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n\t//lombok\r\n\tcompileOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\r\n\truntimeOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\r\n\tannotationProcessor &quot;org.projectlombok:lombok:${lombok_version}&quot;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nI use java 17:\r\n`java --version`:\r\n\r\n&gt; openjdk 17.0.6 2023-01-17 LTS OpenJDK Runtime Environment  \r\n&gt; Corretto-17.0.6.10.1 (build 17.0.6+10-LTS) OpenJDK 64-Bit Server VM  \r\n&gt; Corretto-17.0.6.10.1 (build 17.0.6+10-LTS, mixed mode, sharing)\r\n\r\n`javac --version`:\r\n\r\n&gt; javac 17.0.6\r\n\r\nAnd gradle 7.5:\r\n\r\n`gradle --version`:\r\n\r\n&gt; Gradle 7.5\r\n&gt; \r\n&gt; \r\n&gt; Build time:   2022-07-14 12:48:15 UTC Revision:    \r\n&gt; c7db7b958189ad2b0c1472b6fe663e6d654a5103  \r\n&gt;   \r\n&gt; Kotlin:       1.6.21 Groovy:       3.0.10 Ant:          Apache Ant(TM)  \r\n&gt; version 1.10.11 compiled on July 10 2021 JVM:          17.0.6  \r\n&gt; (Amazon.com Inc. 17.0.6+10-LTS) OS:           Windows 10 10.0 amd64  \r\n\r\n----\r\n\r\nWhy do I am receiving error:\r\n\r\nUnsupported class file major version 61\r\n\r\n","title":"Unsupported class file major version 61 with Java 17 and spring-framework 2.2.4","body":"<p>I am developing a spring-boot project.\nThis project should be integrated with React, so, from any reasons I have to use exactly 2.2.4 spring-boot. But in this case, I can't build project because I am receiving error Unsupported class file major version 61.</p>\n<p>So, my gradle.build:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.2.4.RELEASE'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n\ntasks.withType(JavaCompile) {\n    sourceCompatibility = '17'\n    targetCompatibility = '17'\n}\n\ngroup = 'com.hrzc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    lombok_version = '1.18.24'\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-rest'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    runtimeOnly 'com.h2database:h2'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n    //lombok\n    compileOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\n    runtimeOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\n    annotationProcessor &quot;org.projectlombok:lombok:${lombok_version}&quot;\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>I use java 17:\n<code>java --version</code>:</p>\n<blockquote>\n<p>openjdk 17.0.6 2023-01-17 LTS OpenJDK Runtime Environment<br />\nCorretto-17.0.6.10.1 (build 17.0.6+10-LTS) OpenJDK 64-Bit Server VM<br />\nCorretto-17.0.6.10.1 (build 17.0.6+10-LTS, mixed mode, sharing)</p>\n</blockquote>\n<p><code>javac --version</code>:</p>\n<blockquote>\n<p>javac 17.0.6</p>\n</blockquote>\n<p>And gradle 7.5:</p>\n<p><code>gradle --version</code>:</p>\n<blockquote>\n<p>Gradle 7.5</p>\n<p>Build time:   2022-07-14 12:48:15 UTC Revision:<br />\nc7db7b958189ad2b0c1472b6fe663e6d654a5103</p>\n<p>Kotlin:       1.6.21 Groovy:       3.0.10 Ant:          Apache Ant(TM)<br />\nversion 1.10.11 compiled on July 10 2021 JVM:          17.0.6<br />\n(Amazon.com Inc. 17.0.6+10-LTS) OS:           Windows 10 10.0 amd64</p>\n</blockquote>\n<hr />\n<p>Why do I am receiving error:</p>\n<p>Unsupported class file major version 61</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1618995809,"post_id":67192456,"comment_id":118768666,"body_markdown":"You can, but it will most likely be slower than a native library.","body":"You can, but it will most likely be slower than a native library."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1618996416,"post_id":67192456,"comment_id":118768905,"body_markdown":"You can do anything in any programming language, given sufficient effort. Are you willing to write your own codec? Probably not","body":"You can do anything in any programming language, given sufficient effort. Are you willing to write your own codec? Probably not"}],"answers":[{"tags":[],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686651939,"creation_date":1664014936,"answer_id":73836456,"question_id":67192456,"body_markdown":"There is a [git repo][1] which encode decodes webp with animation support but It does not support the transparent background yet. I had to set image background as solid color to use those image for encode decode.\r\n\r\n\r\nTo make changes in this project or add alpha channel support (transparency) you should learn about [googl&#39;s webp container specifications][2]\r\n\r\nPS: I have fixed the alpha channel issue and published to github and jitpack/maven. https://github.com/KishorJena/Webp_Transcoder\r\n\r\n\r\n  [1]: https://github.com/b4rtaz/android-webp-encoder\r\n  [2]: https://developers.google.com/speed/webp/docs/riff_container","title":"Can you encode/decode image into WebP in Pure Java without any native library?","body":"<p>There is a <a href=\"https://github.com/b4rtaz/android-webp-encoder\" rel=\"nofollow noreferrer\">git repo</a> which encode decodes webp with animation support but It does not support the transparent background yet. I had to set image background as solid color to use those image for encode decode.</p>\n<p>To make changes in this project or add alpha channel support (transparency) you should learn about <a href=\"https://developers.google.com/speed/webp/docs/riff_container\" rel=\"nofollow noreferrer\">googl's webp container specifications</a></p>\n<p>PS: I have fixed the alpha channel issue and published to github and jitpack/maven. <a href=\"https://github.com/KishorJena/Webp_Transcoder\" rel=\"nofollow noreferrer\">https://github.com/KishorJena/Webp_Transcoder</a></p>\n"}],"owner":{"account_id":18436169,"reputation":991,"user_id":13429959,"display_name":"Fireburn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1686651939,"creation_date":1618995242,"question_id":67192456,"body_markdown":"Can you encode/decode image into WebP in Pure Java without any native library? \r\n\r\nWhat I&#39;ve seen are implementations that use external library, either embedded or otherwise to the library. \r\n","title":"Can you encode/decode image into WebP in Pure Java without any native library?","body":"<p>Can you encode/decode image into WebP in Pure Java without any native library?</p>\n<p>What I've seen are implementations that use external library, either embedded or otherwise to the library.</p>\n"},{"tags":["java","android","android-service","android-permissions"],"comments":[{"owner":{"account_id":10239293,"reputation":702,"user_id":7557205,"display_name":"Aswin P Ashok"},"score":1,"creation_date":1578906016,"post_id":59645936,"comment_id":105577692,"body_markdown":"https://stackoverflow.com/a/40355440/7557205 Check this answer","body":"<a href=\"https://stackoverflow.com/a/40355440/7557205\">stackoverflow.com/a/40355440/7557205</a> Check this answer"},{"owner":{"account_id":10239293,"reputation":702,"user_id":7557205,"display_name":"Aswin P Ashok"},"score":1,"creation_date":1578906204,"post_id":59645936,"comment_id":105577778,"body_markdown":"Does this answer your question? [How to programmatically grant the &quot;draw over other apps&quot; permission in android?](https://stackoverflow.com/questions/40355344/how-to-programmatically-grant-the-draw-over-other-apps-permission-in-android)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40355344/how-to-programmatically-grant-the-draw-over-other-apps-permission-in-android\">How to programmatically grant the &quot;draw over other apps&quot; permission in android?</a>"},{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1578989303,"post_id":59645936,"comment_id":105608754,"body_markdown":"Sorry @AswinPAshok, I am using the above solution already, but that is not what I am looking for. Any how thank you so much for the reply. :) I have edited the question with an image for better clarity.","body":"Sorry @AswinPAshok, I am using the above solution already, but that is not what I am looking for. Any how thank you so much for the reply. :) I have edited the question with an image for better clarity."},{"owner":{"account_id":3045053,"reputation":11928,"user_id":2580975,"accept_rate":71,"display_name":"Shayan Pourvatan"},"score":0,"creation_date":1580636222,"post_id":59645936,"comment_id":106156328,"body_markdown":"@SidharthMA Did you got any solution for it?","body":"@SidharthMA Did you got any solution for it?"},{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1580724645,"post_id":59645936,"comment_id":106178027,"body_markdown":"Hi @ShayanPourvatan, Sorry to say this, I am still finding a solution!. Do you have any clue?","body":"Hi @ShayanPourvatan, Sorry to say this, I am still finding a solution!. Do you have any clue?"},{"owner":{"account_id":3045053,"reputation":11928,"user_id":2580975,"accept_rate":71,"display_name":"Shayan Pourvatan"},"score":1,"creation_date":1580725203,"post_id":59645936,"comment_id":106178347,"body_markdown":"@SidharthMA No, as I&#39;ve searched we cannot to change permission in runtime, only solution is show headsUp notification to user and ask him to enable it, but we need another permission to show headsUp notification for those user that we can&#39;t permit it unfortunately ( show floating notification )","body":"@SidharthMA No, as I&#39;ve searched we cannot to change permission in runtime, only solution is show headsUp notification to user and ask him to enable it, but we need another permission to show headsUp notification for those user that we can&#39;t permit it unfortunately ( show floating notification )"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1583229543,"post_id":59645936,"comment_id":107037058,"body_markdown":"Does Android 10 fix this, removing this weird setting? I noticed that now it&#39;s on the docs, that some cases will be excluded for Android 10 : https://developer.android.com/guide/components/activities/background-starts#exceptions , but I think it&#39;s still turned off by default.","body":"Does Android 10 fix this, removing this weird setting? I noticed that now it&#39;s on the docs, that some cases will be excluded for Android 10 : <a href=\"https://developer.android.com/guide/components/activities/background-starts#exceptions\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/activities/&hellip;</a> , but I think it&#39;s still turned off by default."},{"owner":{"account_id":2004398,"reputation":1950,"user_id":1866771,"accept_rate":65,"display_name":"Bhavin Chauhan"},"score":0,"creation_date":1589299121,"post_id":59645936,"comment_id":109235617,"body_markdown":"@SidharthMA interesting question. Is there any solution?  I&#39;ve seen that Facebook auto on this permission.","body":"@SidharthMA interesting question. Is there any solution?  I&#39;ve seen that Facebook auto on this permission."},{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1599550574,"post_id":59645936,"comment_id":112799926,"body_markdown":"@BhavinChauhan, unfortunately no. But I did check the Facebook settings page and found that this permission was turned ON by default. Dont know how!!","body":"@BhavinChauhan, unfortunately no. But I did check the Facebook settings page and found that this permission was turned ON by default. Dont know how!!"},{"owner":{"account_id":2004398,"reputation":1950,"user_id":1866771,"accept_rate":65,"display_name":"Bhavin Chauhan"},"score":3,"creation_date":1599570411,"post_id":59645936,"comment_id":112809426,"body_markdown":"@SidharthMA also I know its default on for white listed all like Uber, Facebook etc","body":"@SidharthMA also I know its default on for white listed all like Uber, Facebook etc"}],"answers":[{"comments":[{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1579091336,"post_id":59713041,"comment_id":105649237,"body_markdown":"Hi, the solutions works in a way.. but i would prefer with a permission. Thank you :)","body":"Hi, the solutions works in a way.. but i would prefer with a permission. Thank you :)"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1583230346,"post_id":59713041,"comment_id":107037528,"body_markdown":"Why the need to call &quot;System.exit(2);&quot; , and why 2 as a parameter?","body":"Why the need to call &quot;System.exit(2);&quot; , and why 2 as a parameter?"},{"owner":{"account_id":5585595,"reputation":720,"user_id":4426063,"display_name":"littlebear333"},"score":0,"creation_date":1583283497,"post_id":59713041,"comment_id":107061574,"body_markdown":"System.exit() terminates the currently running Java Virtual Machine. The argument serves as a status code; by convention, a nonzero status code indicates abnormal termination. So exit(0)  generally used to indicate successful termination. And other parameters such as 1,2,-1 all  indicates unsuccessful termination. There is no difference.","body":"System.exit() terminates the currently running Java Virtual Machine. The argument serves as a status code; by convention, a nonzero status code indicates abnormal termination. So exit(0)  generally used to indicate successful termination. And other parameters such as 1,2,-1 all  indicates unsuccessful termination. There is no difference."},{"owner":{"account_id":6162518,"reputation":1857,"user_id":4803607,"accept_rate":50,"display_name":"Muhammad chhota"},"score":2,"creation_date":1598848146,"post_id":59713041,"comment_id":112579628,"body_markdown":"How to check that permission is already granted or not?","body":"How to check that permission is already granted or not?"}],"tags":[],"owner":{"account_id":5585595,"reputation":720,"user_id":4426063,"display_name":"littlebear333"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578904744,"creation_date":1578904744,"answer_id":59713041,"question_id":59645936,"body_markdown":"Try the following code.\r\n\r\n     Intent rIntent = context.getPackageManager()\r\n                        .getLaunchIntentForPackage(context.getPackageName() );\r\n                PendingIntent intent = PendingIntent.getActivity(\r\n                        context, 0,\r\n                        rIntent, PendingIntent.FLAG_CANCEL_CURRENT);\r\n                AlarmManager manager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n                manager.set(AlarmManager.RTC, System.currentTimeMillis(), intent);\r\n                System.exit(2);","title":"Displaying popup windows while running in the background?","body":"<p>Try the following code.</p>\n\n<pre><code> Intent rIntent = context.getPackageManager()\n                    .getLaunchIntentForPackage(context.getPackageName() );\n            PendingIntent intent = PendingIntent.getActivity(\n                    context, 0,\n                    rIntent, PendingIntent.FLAG_CANCEL_CURRENT);\n            AlarmManager manager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n            manager.set(AlarmManager.RTC, System.currentTimeMillis(), intent);\n            System.exit(2);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":925996,"reputation":5668,"user_id":956779,"display_name":"cobberboy"},"score":1,"creation_date":1606445649,"post_id":64195154,"comment_id":114970348,"body_markdown":"See @Kasun Thilina&#39;s clever response below to address the issue: &quot;now the problem is you can&#39;t check if the user grant the permission or not&quot;","body":"See @Kasun Thilina&#39;s clever response below to address the issue: &quot;now the problem is you can&#39;t check if the user grant the permission or not&quot;"},{"owner":{"account_id":6903404,"reputation":1719,"user_id":5302251,"accept_rate":44,"display_name":"Mohd Sakib Syed"},"score":1,"creation_date":1646718062,"post_id":64195154,"comment_id":126186949,"body_markdown":"How to check if user has grant permission for this ?","body":"How to check if user has grant permission for this ?"}],"tags":[],"owner":{"account_id":8630696,"reputation":969,"user_id":6462382,"display_name":"elhoucine ayoub"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1609412399,"creation_date":1601817776,"answer_id":64195154,"question_id":59645936,"body_markdown":"This is common problem in Xiaomi devices for developers,\r\n\r\nthe solution we have for the moment is to redirect users to `other permissions` screen and let the users give the permission manually :\r\n\r\n    if (&quot;xiaomi&quot; == Build.MANUFACTURER.toLowerCase(Locale.ROOT)) {\r\n        val intent = Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;)\r\n        intent.setClassName(&quot;com.miui.securitycenter&quot;,\r\n                &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;)\r\n        intent.putExtra(&quot;extra_pkgname&quot;, getPackageName())\r\n        startActivity(intent)\r\n    }\r\n\r\nYou can use `Settings.canDrawOverlays(this)` to test only if the user has given the **Display pop-up windows** which means the app can draw over the system ui.\r\n \r\nThe other two permissions can not be verified if the user has given them or not :\r\n\r\n 1. **Display pop-up windows while running in the background** : this one means to allow the app to draw over the system ui while the app is running in the background like `services` and `broadcast` \r\n 2. **Show on lock screen** : this one gives the app the permission to run even when the screen is locked like social apps (whatsApp , Viber , Messnger ...)\r\n\r\n \r\n\r\n","title":"Displaying popup windows while running in the background?","body":"<p>This is common problem in Xiaomi devices for developers,</p>\n<p>the solution we have for the moment is to redirect users to <code>other permissions</code> screen and let the users give the permission manually :</p>\n<pre><code>if (&quot;xiaomi&quot; == Build.MANUFACTURER.toLowerCase(Locale.ROOT)) {\n    val intent = Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;)\n    intent.setClassName(&quot;com.miui.securitycenter&quot;,\n            &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;)\n    intent.putExtra(&quot;extra_pkgname&quot;, getPackageName())\n    startActivity(intent)\n}\n</code></pre>\n<p>You can use <code>Settings.canDrawOverlays(this)</code> to test only if the user has given the <strong>Display pop-up windows</strong> which means the app can draw over the system ui.</p>\n<p>The other two permissions can not be verified if the user has given them or not :</p>\n<ol>\n<li><strong>Display pop-up windows while running in the background</strong> : this one means to allow the app to draw over the system ui while the app is running in the background like <code>services</code> and <code>broadcast</code></li>\n<li><strong>Show on lock screen</strong> : this one gives the app the permission to run even when the screen is locked like social apps (whatsApp , Viber , Messnger ...)</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":6906340,"reputation":1061,"user_id":5304075,"display_name":"Arul"},"score":0,"creation_date":1669655367,"post_id":64924622,"comment_id":131686574,"body_markdown":"`Settings.canDrawOverlays(this)`  Will this assure `Display pop-up windows` is given ?","body":"<code>Settings.canDrawOverlays(this)</code>  Will this assure <code>Display pop-up windows</code> is given ?"},{"owner":{"account_id":942071,"reputation":4012,"user_id":969984,"accept_rate":43,"display_name":"nizam.sp"},"score":0,"creation_date":1701927425,"post_id":64924622,"comment_id":136836214,"body_markdown":"I am not able to understand this solution. Can you please elaborate it a bit please?","body":"I am not able to understand this solution. Can you please elaborate it a bit please?"}],"tags":[],"owner":{"account_id":10626790,"reputation":1563,"user_id":7826205,"display_name":"Kasun Thilina"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1605852507,"creation_date":1605852507,"answer_id":64924622,"question_id":59645936,"body_markdown":"Since there is no official way to check the &quot;Display pop-up windows while running in the background&quot; permission, \r\nI used a little trick to check the permissions.\r\n\r\nCheck if the app can draw overlays like below and then if the device is xiaomi navigate the user to the specific settings screen like below.\r\n&lt;br&gt; \r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                if (!Settings.canDrawOverlays(this)) {\r\n                    if (&quot;xiaomi&quot;.equals(Build.MANUFACTURER.toLowerCase(Locale.ROOT))) {\r\n                        final Intent intent =new Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;);\r\n                        intent.setClassName(&quot;com.miui.securitycenter&quot;,\r\n                                &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;);\r\n                        intent.putExtra(&quot;extra_pkgname&quot;, getPackageName());\r\n                        new AlertDialog.Builder(this)\r\n                                .setTitle(&quot;Please Enable the additional permissions&quot;)\r\n                                .setMessage(&quot;You will not receive notifications while the app is in background if you disable these permissions&quot;)\r\n                                .setPositiveButton(&quot;Go to Settings&quot;, new DialogInterface.OnClickListener() {\r\n                                    public void onClick(DialogInterface dialog, int which) {\r\n                                        startActivity(intent);\r\n                                    }\r\n                                })\r\n                                .setIcon(android.R.drawable.ic_dialog_info)\r\n                                .setCancelable(false)\r\n                                .show();\r\n                    }else {\r\n                        Intent overlaySettings = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:&quot; + getPackageName()));\r\n                        startActivityForResult(overlaySettings, OVERLAY_REQUEST_CODE);\r\n                    }\r\n                }\r\n            }","title":"Displaying popup windows while running in the background?","body":"<p>Since there is no official way to check the &quot;Display pop-up windows while running in the background&quot; permission,\nI used a little trick to check the permissions.</p>\n<p>Check if the app can draw overlays like below and then if the device is xiaomi navigate the user to the specific settings screen like below.\n<br></p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            if (!Settings.canDrawOverlays(this)) {\n                if (&quot;xiaomi&quot;.equals(Build.MANUFACTURER.toLowerCase(Locale.ROOT))) {\n                    final Intent intent =new Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;);\n                    intent.setClassName(&quot;com.miui.securitycenter&quot;,\n                            &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;);\n                    intent.putExtra(&quot;extra_pkgname&quot;, getPackageName());\n                    new AlertDialog.Builder(this)\n                            .setTitle(&quot;Please Enable the additional permissions&quot;)\n                            .setMessage(&quot;You will not receive notifications while the app is in background if you disable these permissions&quot;)\n                            .setPositiveButton(&quot;Go to Settings&quot;, new DialogInterface.OnClickListener() {\n                                public void onClick(DialogInterface dialog, int which) {\n                                    startActivity(intent);\n                                }\n                            })\n                            .setIcon(android.R.drawable.ic_dialog_info)\n                            .setCancelable(false)\n                            .show();\n                }else {\n                    Intent overlaySettings = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:&quot; + getPackageName()));\n                    startActivityForResult(overlaySettings, OVERLAY_REQUEST_CODE);\n                }\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26781455,"reputation":26,"user_id":20376238,"display_name":"asdf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686651388,"creation_date":1686651388,"answer_id":76463865,"question_id":59645936,"body_markdown":"I manage to work around my project by following this gist https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522\r\n\r\n```\r\n@ReactMethod()\r\n    public void isMiuiCanDisplayOverlay(Promise ps){\r\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\r\n        boolean isGranted = XiaomiUtilities.isPermissionGranted(reactContext,XiaomiUtilities.OP_BACKGROUND_START_ACTIVITY);\r\n        if(isXiaomi){\r\n            ps.resolve(isGranted);\r\n        }else{\r\n            ps.resolve(true);\r\n        }\r\n    }\r\n    @ReactMethod()\r\n    public void openMiuiDisplayOverlayPermission(Promise ps){\r\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\r\n        try{\r\n            if(isXiaomi){\r\n                XiaomiUtilities.goToMiuiPermissionActivity_V8(reactContext);\r\n                ps.resolve(true);\r\n            }else{\r\n                ps.resolve(false);\r\n            }\r\n        }catch (Exception e){\r\n            String version = XiaomiUtilities.getMiuiVersion();\r\n            Log.d(LOG_TAG,&quot;Cannot open Miui Display Pop-up window while running in background&quot; + version + e.toString());\r\n        }\r\n    }\r\n\r\n    \r\n\r\ncode above I created in react native to bridge to javascript","title":"Displaying popup windows while running in the background?","body":"<p>I manage to work around my project by following this gist <a href=\"https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522\" rel=\"nofollow noreferrer\">https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522</a></p>\n<pre><code>@ReactMethod()\n    public void isMiuiCanDisplayOverlay(Promise ps){\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\n        boolean isGranted = XiaomiUtilities.isPermissionGranted(reactContext,XiaomiUtilities.OP_BACKGROUND_START_ACTIVITY);\n        if(isXiaomi){\n            ps.resolve(isGranted);\n        }else{\n            ps.resolve(true);\n        }\n    }\n    @ReactMethod()\n    public void openMiuiDisplayOverlayPermission(Promise ps){\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\n        try{\n            if(isXiaomi){\n                XiaomiUtilities.goToMiuiPermissionActivity_V8(reactContext);\n                ps.resolve(true);\n            }else{\n                ps.resolve(false);\n            }\n        }catch (Exception e){\n            String version = XiaomiUtilities.getMiuiVersion();\n            Log.d(LOG_TAG,&quot;Cannot open Miui Display Pop-up window while running in background&quot; + version + e.toString());\n        }\n    }\n\n    \n\ncode above I created in react native to bridge to javascript\n</code></pre>\n"}],"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22675,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":4,"score":27,"last_activity_date":1686651388,"creation_date":1578486620,"question_id":59645936,"body_markdown":"I am trying to open an activity from a class that extends Service. I am performing this task when the app is not in foreground/not being used. I can see in the logs that my service class triggered start activity with Intent.FLAG_ACTIVITY_NEW_TASK flag. But the activity does not open. But when the service triggers the same activity when the app is in foreground/being used, the activity opens. \r\n\r\nAfter few searches I found out that I need to manually give the permission &quot;display popup windows while running in the background android&quot; in the other permissions section in the app settings. \r\n\r\nThe display over other apps permission SYSTEM_ALERT_WINDOW only gives access to &quot;Display popup window&quot;.\r\n\r\n[![Other permissions][1]][1]\r\n\r\nIn the image above, SYSTEM_ALERT_WINDOW will only grant you access to &quot;Display popup window&quot; and this works fine if the app is in foreground/being used but the permission marked in red if granted will give you access to open any activity directly from a class extending Service.\r\n\r\nHow do I check or ask the user to give &quot;Display popup windows while running in the background&quot; permission? or Is this permission restricted?\r\n\r\nI see apps like Whatsapp have this checked by default.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0iyn7.png","title":"Displaying popup windows while running in the background?","body":"<p>I am trying to open an activity from a class that extends Service. I am performing this task when the app is not in foreground/not being used. I can see in the logs that my service class triggered start activity with Intent.FLAG_ACTIVITY_NEW_TASK flag. But the activity does not open. But when the service triggers the same activity when the app is in foreground/being used, the activity opens.</p>\n<p>After few searches I found out that I need to manually give the permission &quot;display popup windows while running in the background android&quot; in the other permissions section in the app settings.</p>\n<p>The display over other apps permission SYSTEM_ALERT_WINDOW only gives access to &quot;Display popup window&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/0iyn7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0iyn7.png\" alt=\"Other permissions\" /></a></p>\n<p>In the image above, SYSTEM_ALERT_WINDOW will only grant you access to &quot;Display popup window&quot; and this works fine if the app is in foreground/being used but the permission marked in red if granted will give you access to open any activity directly from a class extending Service.</p>\n<p>How do I check or ask the user to give &quot;Display popup windows while running in the background&quot; permission? or Is this permission restricted?</p>\n<p>I see apps like Whatsapp have this checked by default.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":11474570,"reputation":79,"user_id":8410413,"display_name":"hammad"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1686650991,"creation_date":1686650991,"answer_id":76463814,"question_id":76463613,"body_markdown":"In Android 11 and above, the concept of scoped storage was introduced, which provides more secure and controlled access to app-specific files and directories. To save a PDF file from your app-specific directory to Android shared storage, you need to follow these steps:\r\n\r\n 1. Request the necessary permissions: Add the following permission to your AndroidManifest.xml file:\r\n    \r\n    `&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;`\r\n\r\n 2. Check for the runtime permission: Request the **WRITE_EXTERNAL_STORAGE** permission from the user at runtime. You can use the **checkSelfPermission()** method to check if the permission is already granted, and if not, request it using the **requestPermissions()** method.\r\n\r\n 3. Use the MediaStore API to copy the file: Android 11 introduced the MediaStore API, which allows you to interact with shared media files. You can use this API to copy the PDF file from your app-specific directory to a location in shared storage.\r\n\r\nHere&#39;s an example code snippet that demonstrates how to save a PDF file from your app-specific directory to shared storage:\r\n\r\n```\r\nimport android.content.ContentResolver;\r\nimport android.content.ContentValues;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.provider.MediaStore;\r\n\r\n// Get the PDF file from your app-specific directory\r\nFile pdfFile = new File(getFilesDir(), &quot;example.pdf&quot;);\r\n\r\n// Prepare the content values for the new file\r\nContentValues values = new ContentValues();\r\nvalues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;example.pdf&quot;);\r\nvalues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;application/pdf&quot;);\r\n\r\n// Determine the appropriate content URI based on the device&#39;s API level\r\nUri uri;\r\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n    // For Android 10 and above, use MediaStore API with MediaStore.Downloads\r\n    values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS);\r\n    uri = MediaStore.Downloads.EXTERNAL_CONTENT_URI;\r\n} else {\r\n    // For Android 9 and below, use the deprecated MediaStore API with MediaStore.Files\r\n    uri = MediaStore.Files.getContentUri(&quot;external&quot;);\r\n}\r\n\r\n// Insert the file into the media store\r\nContentResolver resolver = getContentResolver();\r\nUri newUri = resolver.insert(uri, values);\r\n\r\n// Copy the file content from the app-specific directory to the shared storage\r\ntry {\r\n    OutputStream outputStream = resolver.openOutputStream(newUri);\r\n    FileInputStream inputStream = new FileInputStream(pdfFile);\r\n    byte[] buffer = new byte[4096];\r\n    int bytesRead;\r\n    while ((bytesRead = inputStream.read(buffer)) != -1) {\r\n        outputStream.write(buffer, 0, bytesRead);\r\n    }\r\n    outputStream.close();\r\n    inputStream.close();\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\nIn this code snippet, the **example.pdf** file is retrieved from the app-specific directory using **getFilesDir()**. Then, ContentValues are created to store the metadata of the new file, including its display name and MIME type. The appropriate content URI is determined based on the device&#39;s API level, and the file is inserted into the media store using **insert()**.\r\n\r\nFinally, the file content is copied from the app-specific directory to the shared storage by opening an output stream to the **newUri** and reading the content from the input stream obtained from the app-specific file.\r\n","title":"Saving file on Android 11+","body":"<p>In Android 11 and above, the concept of scoped storage was introduced, which provides more secure and controlled access to app-specific files and directories. To save a PDF file from your app-specific directory to Android shared storage, you need to follow these steps:</p>\n<ol>\n<li><p>Request the necessary permissions: Add the following permission to your AndroidManifest.xml file:</p>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</code></p>\n</li>\n<li><p>Check for the runtime permission: Request the <strong>WRITE_EXTERNAL_STORAGE</strong> permission from the user at runtime. You can use the <strong>checkSelfPermission()</strong> method to check if the permission is already granted, and if not, request it using the <strong>requestPermissions()</strong> method.</p>\n</li>\n<li><p>Use the MediaStore API to copy the file: Android 11 introduced the MediaStore API, which allows you to interact with shared media files. You can use this API to copy the PDF file from your app-specific directory to a location in shared storage.</p>\n</li>\n</ol>\n<p>Here's an example code snippet that demonstrates how to save a PDF file from your app-specific directory to shared storage:</p>\n<pre><code>import android.content.ContentResolver;\nimport android.content.ContentValues;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.provider.MediaStore;\n\n// Get the PDF file from your app-specific directory\nFile pdfFile = new File(getFilesDir(), &quot;example.pdf&quot;);\n\n// Prepare the content values for the new file\nContentValues values = new ContentValues();\nvalues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;example.pdf&quot;);\nvalues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;application/pdf&quot;);\n\n// Determine the appropriate content URI based on the device's API level\nUri uri;\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n    // For Android 10 and above, use MediaStore API with MediaStore.Downloads\n    values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS);\n    uri = MediaStore.Downloads.EXTERNAL_CONTENT_URI;\n} else {\n    // For Android 9 and below, use the deprecated MediaStore API with MediaStore.Files\n    uri = MediaStore.Files.getContentUri(&quot;external&quot;);\n}\n\n// Insert the file into the media store\nContentResolver resolver = getContentResolver();\nUri newUri = resolver.insert(uri, values);\n\n// Copy the file content from the app-specific directory to the shared storage\ntry {\n    OutputStream outputStream = resolver.openOutputStream(newUri);\n    FileInputStream inputStream = new FileInputStream(pdfFile);\n    byte[] buffer = new byte[4096];\n    int bytesRead;\n    while ((bytesRead = inputStream.read(buffer)) != -1) {\n        outputStream.write(buffer, 0, bytesRead);\n    }\n    outputStream.close();\n    inputStream.close();\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>In this code snippet, the <strong>example.pdf</strong> file is retrieved from the app-specific directory using <strong>getFilesDir()</strong>. Then, ContentValues are created to store the metadata of the new file, including its display name and MIME type. The appropriate content URI is determined based on the device's API level, and the file is inserted into the media store using <strong>insert()</strong>.</p>\n<p>Finally, the file content is copied from the app-specific directory to the shared storage by opening an output stream to the <strong>newUri</strong> and reading the content from the input stream obtained from the app-specific file.</p>\n"}],"owner":{"account_id":20096189,"reputation":15,"user_id":22065887,"display_name":"T LABS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76463814,"answer_count":1,"score":0,"last_activity_date":1686650991,"creation_date":1686649464,"question_id":76463613,"body_markdown":"I want to save cache pdf file from my app-specific directory to Android shared storage for Android 11+ devices. How can I do this\r\n\r\nI tried to understand concept of scoped storage but unable to implement. I&#39;m developing application in java","title":"Saving file on Android 11+","body":"<p>I want to save cache pdf file from my app-specific directory to Android shared storage for Android 11+ devices. How can I do this</p>\n<p>I tried to understand concept of scoped storage but unable to implement. I'm developing application in java</p>\n"},{"tags":["java","android","ios","reactjs","react-native"],"comments":[{"owner":{"account_id":6426353,"reputation":435,"user_id":4981359,"display_name":"Mayank Pandav"},"score":0,"creation_date":1580726610,"post_id":60037559,"comment_id":106179052,"body_markdown":"do you have linked your module using react-native link and builded through Android studio?","body":"do you have linked your module using react-native link and builded through Android studio?"},{"owner":{"account_id":16582079,"reputation":2545,"user_id":11982418,"display_name":"Prakash Karena"},"score":0,"creation_date":1580726859,"post_id":60037559,"comment_id":106179181,"body_markdown":"add your package.json file as well","body":"add your package.json file as well"}],"answers":[{"tags":[],"owner":{"account_id":15736516,"reputation":11500,"user_id":11355303,"display_name":"Gaurav Roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580726998,"creation_date":1580726998,"answer_id":60037701,"question_id":60037559,"body_markdown":"Try running this command in the android folde, and it hsoould solve it:\r\n\r\n\r\n    ./gradlew assembleRelease -x bundleReleaseJsAndAssets \r\n\r\nHope it helps.","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>Try running this command in the android folde, and it hsoould solve it:</p>\n\n<pre><code>./gradlew assembleRelease -x bundleReleaseJsAndAssets \n</code></pre>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":14929863,"reputation":51,"user_id":10779554,"display_name":"Mark Roger Cabadsan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1581049789,"creation_date":1581049789,"answer_id":60107103,"question_id":60037559,"body_markdown":"This problem is already solved. Also, Thanks [Mayank Pandav][1] for pointing that out. As you thought, I forgot to run `react-native link @react-native-community/viewpager` since auto-linking is not done on react native versions &lt; 0.60. After linking, I still had some problem, the usual error with Nullable thingy in react native android but I was able to solve it by migrating to AndroidX thru following this [link][2] and adding the following lines in my **gradle.properties** file:\r\n\r\n&gt; android.useAndroidX=true;\r\n&gt; \r\n&gt; android.enableJetifier=true;\r\n\r\nAnd after re-running, the error is gone. Thanks everyone.\r\n\r\n  [1]: https://stackoverflow.com/users/4981359/mayank-pandav\r\n  [2]: https://developer.android.com/jetpack/androidx/migrate\r\n","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>This problem is already solved. Also, Thanks <a href=\"https://stackoverflow.com/users/4981359/mayank-pandav\">Mayank Pandav</a> for pointing that out. As you thought, I forgot to run <code>react-native link @react-native-community/viewpager</code> since auto-linking is not done on react native versions &lt; 0.60. After linking, I still had some problem, the usual error with Nullable thingy in react native android but I was able to solve it by migrating to AndroidX thru following this <a href=\"https://developer.android.com/jetpack/androidx/migrate\" rel=\"nofollow noreferrer\">link</a> and adding the following lines in my <strong>gradle.properties</strong> file:</p>\n\n<blockquote>\n  <p>android.useAndroidX=true;</p>\n  \n  <p>android.enableJetifier=true;</p>\n</blockquote>\n\n<p>And after re-running, the error is gone. Thanks everyone.</p>\n"},{"tags":[],"owner":{"account_id":28811454,"reputation":1,"user_id":22066067,"display_name":"Nivesh Nadarajan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686650724,"creation_date":1686650724,"answer_id":76463781,"question_id":60037559,"body_markdown":"Downgrade the  react-native-gesture-handler version to 1.10.3\r\n\r\n","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>Downgrade the  react-native-gesture-handler version to 1.10.3</p>\n"}],"owner":{"account_id":14929863,"reputation":51,"user_id":10779554,"display_name":"Mark Roger Cabadsan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3922,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60107103,"answer_count":3,"score":0,"last_activity_date":1686650724,"creation_date":1580726524,"question_id":60037559,"body_markdown":"I need to use react-native-scrollable-tab-view and accompanying that, I also installed/setup react-native-viewpager following this [link][1]. This error suddenly appeared and currently, I still can&#39;t find a way to solve it. I hope someone encountered it already and help me. I just started working with React Native 1 wk ago but this project I&#39;ve been working on have been existing for more than a year so not all dependencies are updated including react-native which version is 0.59.10. I&#39;ve already tried using react-native-scrollable-tab-view with a sample project using latest version of react-native and it works fine but unfortunately I don&#39;t think I can upgrade this project cause there are just so many dependencies that will be affected that complicates things. I hope there is a way to resolve it without having to affect other dependencies. Here is the error part of the log:\r\n\r\n&gt; Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\r\nmansion/gesturehandler/react/RNGestureHandlerEvent.java:3: error: package android.support.v4.util does not exist\r\nimport android.support.v4.util.Pools;\r\n                              ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\r\nmansion/gesturehandler/react/RNGestureHandlerEvent.java:19: error: package Pools does not exist\r\n  private static final Pools.SynchronizedPool&lt;RNGestureHandlerEvent&gt; EVENTS_POOL =\r\n                            ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:3: error: package android.support.v4.util does not exist\r\nimport android.support.v4.util.Pools;\r\n                              ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:19: error: package Pools does not exist\r\n  private static final Pools.SynchronizedPool&lt;RNGestureHandlerStateChangeEvent&gt; EVENTS_POOL =\r\n                            ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerEvent.java:20: error: package Pools does not exist\r\n          new Pools.SynchronizedPool&lt;&gt;(TOUCH_EVENTS_POOL_SIZE);\r\n                   ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:20: error: package Pools does not exist\r\n          new Pools.SynchronizedPool&lt;&gt;(TOUCH_EVENTS_POOL_SIZE);\r\n                   ^\r\nNote: /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerButtonViewManager.java uses or overrides a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n6 errors\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:react-native-gesture-handler:compileDebugJavaWithJavac&#39;.\r\n&gt; Compilation failed; see the compiler error output for details.\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\r\nUse &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\nSee https://docs.gradle.org/4.10.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 24s\r\n251 actionable tasks: 27 executed, 224 up-to-date\r\nerror Could not install the app on the device, read the error above for details.\r\nMake sure you have an Android emulator running or a device connected and have\r\nset up your Android development environment:\r\nhttps://facebook.github.io/react-native/docs/getting-started.html\r\nerror Command failed: ./gradlew app:installDebug. Run CLI with --verbose flag for more details.\r\nMarks-MacBook-Pro:endless-aisle-hybrid markrogercabadsan$ \r\n\r\n\r\n  [1]: https://github.com/react-native-community/react-native-viewpager/blob/master/README.md#mostly-automatic","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>I need to use react-native-scrollable-tab-view and accompanying that, I also installed/setup react-native-viewpager following this <a href=\"https://github.com/react-native-community/react-native-viewpager/blob/master/README.md#mostly-automatic\" rel=\"nofollow noreferrer\">link</a>. This error suddenly appeared and currently, I still can't find a way to solve it. I hope someone encountered it already and help me. I just started working with React Native 1 wk ago but this project I've been working on have been existing for more than a year so not all dependencies are updated including react-native which version is 0.59.10. I've already tried using react-native-scrollable-tab-view with a sample project using latest version of react-native and it works fine but unfortunately I don't think I can upgrade this project cause there are just so many dependencies that will be affected that complicates things. I hope there is a way to resolve it without having to affect other dependencies. Here is the error part of the log:</p>\n\n<blockquote>\n  <p>Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\n  mansion/gesturehandler/react/RNGestureHandlerEvent.java:3: error: package android.support.v4.util does not exist\n  import android.support.v4.util.Pools;\n                                ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\n  mansion/gesturehandler/react/RNGestureHandlerEvent.java:19: error: package Pools does not exist\n    private static final Pools.SynchronizedPool EVENTS_POOL =\n                              ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:3: error: package android.support.v4.util does not exist\n  import android.support.v4.util.Pools;\n                                ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:19: error: package Pools does not exist\n    private static final Pools.SynchronizedPool EVENTS_POOL =\n                              ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerEvent.java:20: error: package Pools does not exist\n            new Pools.SynchronizedPool&lt;>(TOUCH_EVENTS_POOL_SIZE);\n                     ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:20: error: package Pools does not exist\n            new Pools.SynchronizedPool&lt;>(TOUCH_EVENTS_POOL_SIZE);\n                     ^\n  Note: /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerButtonViewManager.java uses or overrides a deprecated API.\n  Note: Recompile with -Xlint:deprecation for details.\n  Note: Some input files use unchecked or unsafe operations.\n  Note: Recompile with -Xlint:unchecked for details.\n  6 errors</p>\n</blockquote>\n\n<p>FAILURE: Build failed with an exception.</p>\n\n<ul>\n<li><p>What went wrong:\nExecution failed for task ':react-native-gesture-handler:compileDebugJavaWithJavac'.</p>\n\n<blockquote>\n  <p>Compilation failed; see the compiler error output for details.</p>\n</blockquote></li>\n<li><p>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</p></li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></p></li>\n</ul>\n\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee <a href=\"https://docs.gradle.org/4.10.1/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/4.10.1/userguide/command_line_interface.html#sec:command_line_warnings</a></p>\n\n<p>BUILD FAILED in 24s\n251 actionable tasks: 27 executed, 224 up-to-date\nerror Could not install the app on the device, read the error above for details.\nMake sure you have an Android emulator running or a device connected and have\nset up your Android development environment:\n<a href=\"https://facebook.github.io/react-native/docs/getting-started.html\" rel=\"nofollow noreferrer\">https://facebook.github.io/react-native/docs/getting-started.html</a>\nerror Command failed: ./gradlew app:installDebug. Run CLI with --verbose flag for more details.\nMarks-MacBook-Pro:endless-aisle-hybrid markrogercabadsan$ </p>\n"},{"tags":["java","resteasy"],"answers":[{"tags":[],"owner":{"account_id":219080,"reputation":589,"user_id":475756,"accept_rate":100,"display_name":"tveon"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1329385409,"creation_date":1329385409,"answer_id":9308838,"question_id":9099790,"body_markdown":"In RESTeasy processing headers are supported by using interceptors, which are described in the [Reference Guide](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html-single/RESTEasy_Reference_Guide/index.html#Interceptors).\r\n\r\nWhat you want, is probably a PreProcessInterceptor which intercepts the call, looks for the header and changes the method string/redirects as necessary.\r\n","title":"RESTeasy and X-HTTP-Method-Override","body":"<p>In RESTeasy processing headers are supported by using interceptors, which are described in the <a href=\"http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html-single/RESTEasy_Reference_Guide/index.html#Interceptors\" rel=\"nofollow\">Reference Guide</a>.</p>\n\n<p>What you want, is probably a PreProcessInterceptor which intercepts the call, looks for the header and changes the method string/redirects as necessary.</p>\n"},{"tags":[],"owner":{"account_id":2453287,"reputation":3192,"user_id":2139038,"accept_rate":67,"display_name":"rand0m86"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1686650516,"creation_date":1385729289,"answer_id":20286225,"question_id":9099790,"body_markdown":"Recently I had the same problem and the best solution I&#39;ve found is:\r\n\r\n    @Provider\r\n    @PreMatching\r\n    public class OverrideHttpMethodFilter implements ContainerRequestFilter {\r\n\r\n\t@Override\r\n\tpublic void filter(ContainerRequestContext requestContext)\r\n\t\t\tthrows IOException {\t\t\r\n\t\tString receivedMethod = requestContext.getMethod();\r\n\t\tString methodFromHeader = requestContext.getHeaderString(&quot;X-HTTP-Method-Override&quot;);\r\n\t\tif (methodFromHeader != null &amp;&amp; !methodFromHeader.equals(receivedMethod)) {\r\n\t\t\trequestContext.setMethod(methodFromHeader);\r\n\t\t}\r\n\t  }\r\n    }","title":"RESTeasy and X-HTTP-Method-Override","body":"<p>Recently I had the same problem and the best solution I've found is:</p>\n<pre><code>@Provider\n@PreMatching\npublic class OverrideHttpMethodFilter implements ContainerRequestFilter {\n\n@Override\npublic void filter(ContainerRequestContext requestContext)\n        throws IOException {        \n    String receivedMethod = requestContext.getMethod();\n    String methodFromHeader = requestContext.getHeaderString(&quot;X-HTTP-Method-Override&quot;);\n    if (methodFromHeader != null &amp;&amp; !methodFromHeader.equals(receivedMethod)) {\n        requestContext.setMethod(methodFromHeader);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":141866,"reputation":1635,"user_id":349206,"accept_rate":36,"display_name":"A_J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2664,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":9308838,"answer_count":2,"score":5,"last_activity_date":1686650516,"creation_date":1328115099,"question_id":9099790,"body_markdown":"Are there any way that support the X-HTTP-Method-Override request header\r\n(automatically/transparently) in RESTeasy? \r\n\r\nThis would\r\nmake it much easier to support clients that cannot send PUT/DELETE requests.\r\n\r\nYes, overriding POST is less than ideal but I think the Google convention of\r\nusing X-HTTP-Method-Override is a reasonable/convenient work-around. \r\n\r\nIf RESTeasy\r\ncould dispatch POST requests with the X-HTTP-Method-Override header\r\nautomatically it would be a big time saver. I think Jersey just added something\r\nlike this via a filtering approach, but I&#39;d prefer to stick with RESTeasy.","title":"RESTeasy and X-HTTP-Method-Override","body":"<p>Are there any way that support the X-HTTP-Method-Override request header\n(automatically/transparently) in RESTeasy? </p>\n\n<p>This would\nmake it much easier to support clients that cannot send PUT/DELETE requests.</p>\n\n<p>Yes, overriding POST is less than ideal but I think the Google convention of\nusing X-HTTP-Method-Override is a reasonable/convenient work-around. </p>\n\n<p>If RESTeasy\ncould dispatch POST requests with the X-HTTP-Method-Override header\nautomatically it would be a big time saver. I think Jersey just added something\nlike this via a filtering approach, but I'd prefer to stick with RESTeasy.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2116606,"reputation":923,"user_id":1880761,"accept_rate":60,"display_name":"trebor"},"score":1,"creation_date":1659403667,"post_id":30889478,"comment_id":129281311,"body_markdown":"Note that you are wanting to read a property at runtime, not an environment (`System.getProperty(&quot;xxx&quot;)` vs `System.getenv(&quot;xxx&quot;)`).","body":"Note that you are wanting to read a property at runtime, not an environment (<code>System.getProperty(&quot;xxx&quot;)</code> vs <code>System.getenv(&quot;xxx&quot;)</code>)."}],"answers":[{"comments":[{"owner":{"account_id":3746661,"reputation":1429,"user_id":3115189,"accept_rate":100,"display_name":"Dilan"},"score":1,"creation_date":1434542448,"post_id":30889558,"comment_id":49821020,"body_markdown":"It work Sathish but when I put System.getenv(&quot;configDir&quot;) it prints null. Could you give a solution to this.... thanks","body":"It work Sathish but when I put System.getenv(&quot;configDir&quot;) it prints null. Could you give a solution to this.... thanks"},{"owner":{"account_id":5903825,"reputation":5005,"user_id":4646346,"accept_rate":83,"display_name":"Sathish"},"score":1,"creation_date":1434542769,"post_id":30889558,"comment_id":49821285,"body_markdown":"Hi, use System.getProperty(&quot;configDir&quot;) insteadof getenv() method.","body":"Hi, use System.getProperty(&quot;configDir&quot;) insteadof getenv() method."},{"owner":{"account_id":3746661,"reputation":1429,"user_id":3115189,"accept_rate":100,"display_name":"Dilan"},"score":1,"creation_date":1434543279,"post_id":30889558,"comment_id":49821704,"body_markdown":"Thanks a lot Sathish it works.... I ask this question if it is not a disturbance to u.  When I run it through IDE the   System.getenv(&quot;configDir&quot;)  works fine. But when i run it through terminal using above command the System.getProperty(&quot;configDir&quot;) working fine.. I cannot think why is this...","body":"Thanks a lot Sathish it works.... I ask this question if it is not a disturbance to u.  When I run it through IDE the   System.getenv(&quot;configDir&quot;)  works fine. But when i run it through terminal using above command the System.getProperty(&quot;configDir&quot;) working fine.. I cannot think why is this..."},{"owner":{"account_id":5903825,"reputation":5005,"user_id":4646346,"accept_rate":83,"display_name":"Sathish"},"score":0,"creation_date":1434550903,"post_id":30889558,"comment_id":49827918,"body_markdown":"You are welcome Dilan, I did not get what is not working. Can you please explain? I&#39;ll try to help if i know the answer. Thanks !","body":"You are welcome Dilan, I did not get what is not working. Can you please explain? I&#39;ll try to help if i know the answer. Thanks !"}],"tags":[],"owner":{"account_id":5903825,"reputation":5005,"user_id":4646346,"accept_rate":83,"display_name":"Sathish"},"comment_count":4,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1686650507,"creation_date":1434538635,"answer_id":30889558,"question_id":30889478,"body_markdown":"Try giving following command,\r\n\r\n    java -DconfigDir=/etc/myconfig-config/ -cp test-tool.jar service.ScriptGenerator $clinic_count $client_files_count \r\n\r\nNote that the given parameters should be accessed from code as follow:\r\n\r\n    System.getProperty(&quot;configDir&quot;)","title":"passing environment variable to a java class in command line","body":"<p>Try giving following command,</p>\n<pre><code>java -DconfigDir=/etc/myconfig-config/ -cp test-tool.jar service.ScriptGenerator $clinic_count $client_files_count \n</code></pre>\n<p>Note that the given parameters should be accessed from code as follow:</p>\n<pre><code>System.getProperty(&quot;configDir&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":447545,"reputation":2029,"user_id":841221,"accept_rate":75,"display_name":"Aakash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1434538673,"creation_date":1434538673,"answer_id":30889575,"question_id":30889478,"body_markdown":"Your command should be like\r\n\r\n    java  -cp test-tool.jar -DconfigDir=/etc/myconfig-config/ service.ScriptGenerator $clinic_count $client_files_count ","title":"passing environment variable to a java class in command line","body":"<p>Your command should be like</p>\n\n<pre><code>java  -cp test-tool.jar -DconfigDir=/etc/myconfig-config/ service.ScriptGenerator $clinic_count $client_files_count \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4685065,"reputation":485,"user_id":3792674,"display_name":"Asif"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1606129261,"creation_date":1606129261,"answer_id":64967140,"question_id":30889478,"body_markdown":"Try this command\r\n\r\n**`export VARNAME=&#39;variable-value&#39;`**\r\n\r\nThen run your Java main class from the same command line.","title":"passing environment variable to a java class in command line","body":"<p>Try this command</p>\n<p><strong><code>export VARNAME='variable-value'</code></strong></p>\n<p>Then run your Java main class from the same command line.</p>\n"}],"owner":{"account_id":3746661,"reputation":1429,"user_id":3115189,"accept_rate":100,"display_name":"Dilan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50591,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":30889558,"answer_count":3,"score":14,"last_activity_date":1686650507,"creation_date":1434538418,"question_id":30889478,"body_markdown":"I have a necessity to read some properties from a file located in local `etc/myconfig-config/` folder. I need to give this file path in the command line. I have given it as mentioned below. But there is an error and it displays like \r\n\r\n    Error: Could not find or load main class test-tool.jar. \r\n\r\nthe command given is\r\n\r\n    java  -cp -DconfigDir=/etc/myconfig-config/ test-tool.jar \r\n    service.ScriptGenerator $clinic_count $client_files_count \r\n\r\n\r\ncan anybody please help me to resolve this.\r\n\r\nthanks","title":"passing environment variable to a java class in command line","body":"<p>I have a necessity to read some properties from a file located in local <code>etc/myconfig-config/</code> folder. I need to give this file path in the command line. I have given it as mentioned below. But there is an error and it displays like </p>\n\n<pre><code>Error: Could not find or load main class test-tool.jar. \n</code></pre>\n\n<p>the command given is</p>\n\n<pre><code>java  -cp -DconfigDir=/etc/myconfig-config/ test-tool.jar \nservice.ScriptGenerator $clinic_count $client_files_count \n</code></pre>\n\n<p>can anybody please help me to resolve this.</p>\n\n<p>thanks</p>\n"},{"tags":["java","spring-boot","maven","model-view-controller","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686650776,"post_id":76463749,"comment_id":134824928,"body_markdown":"What have you tried so far, what errors are you getting? Have you read the (migration) documentation? Which dependencies are you using. So in short too little information to answer this.","body":"What have you tried so far, what errors are you getting? Have you read the (migration) documentation? Which dependencies are you using. So in short too little information to answer this."},{"owner":{"account_id":28811384,"reputation":1,"user_id":22066003,"display_name":"user22066003"},"score":0,"creation_date":1686893436,"post_id":76463749,"comment_id":134863449,"body_markdown":"Actually i created bean and methods according to the spring security 6 documentation but still I get unsatisfied dependency exception","body":"Actually i created bean and methods according to the spring security 6 documentation but still I get unsatisfied dependency exception"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686898163,"post_id":76463749,"comment_id":134864132,"body_markdown":"Please **show** what you have done so far, don&#39;t describe. Show your configuration **and** the error stacktrace (the **full stacktrace**) that you get.","body":"Please <b>show</b> what you have done so far, don&#39;t describe. Show your configuration <b>and</b> the error stacktrace (the <b>full stacktrace</b>) that you get."}],"owner":{"account_id":28811384,"reputation":1,"user_id":22066003,"display_name":"user22066003"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686650451,"creation_date":1686650451,"question_id":76463749,"body_markdown":"I am getting error while doing with all the existing methods for creating ldap authentication server using spring security 6\r\n\r\nAnd cant even verify the data using the .ldif file given and grant authentication .I have an .ldif file and need the credentials authenticate against this file.","title":"How to do ldap authentication in spring security 6","body":"<p>I am getting error while doing with all the existing methods for creating ldap authentication server using spring security 6</p>\n<p>And cant even verify the data using the .ldif file given and grant authentication .I have an .ldif file and need the credentials authenticate against this file.</p>\n"},{"tags":["java","lambda","java-8","java-stream"],"answers":[{"comments":[{"owner":{"account_id":186752,"reputation":8053,"user_id":424353,"accept_rate":88,"display_name":"Bogdan Calmac"},"score":176,"creation_date":1425405589,"post_id":20363874,"comment_id":45946660,"body_markdown":"As a side note, even after Java 8, the JDK still can&#39;t compete in a brevity contest. The Guava alternative looks so much readable: `Maps.uniqueIndex(choices, Choice::getName)`.","body":"As a side note, even after Java 8, the JDK still can&#39;t compete in a brevity contest. The Guava alternative looks so much readable: <code>Maps.uniqueIndex(choices, Choice::getName)</code>."},{"owner":{"account_id":346470,"reputation":481,"user_id":680021,"display_name":"lukens"},"score":4,"creation_date":1489826737,"post_id":20363874,"comment_id":72849580,"body_markdown":"Using (statically imported) `Seq` from the [JOOL](https://github.com/jOOQ/jOOL) library (which I&#39;d recommend to anyone using Java 8), you can also improve the brevity with:\n\n`seq(choices).toMap(Choice::getName)`","body":"Using (statically imported) <code>Seq</code> from the <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">JOOL</a> library (which I&#39;d recommend to anyone using Java 8), you can also improve the brevity with:  <code>seq(choices).toMap(Choice::getName)</code>"},{"owner":{"account_id":148782,"reputation":23519,"user_id":360811,"accept_rate":55,"display_name":"shabunc"},"score":7,"creation_date":1496148578,"post_id":20363874,"comment_id":75533450,"body_markdown":"Are there any benefits from using Function.identity? I mean, it -&gt; it is shorter","body":"Are there any benefits from using Function.identity? I mean, it -&gt; it is shorter"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":10,"creation_date":1496149040,"post_id":20363874,"comment_id":75533805,"body_markdown":"@shabunc I don&#39;t know of any benefit and actually use `it -&gt; it` myself. `Function.identity()` is used here mostly because it&#39;s used in the referenced documentation and that was all I knew about lambdas at the time of writing","body":"@shabunc I don&#39;t know of any benefit and actually use <code>it -&gt; it</code> myself. <code>Function.identity()</code> is used here mostly because it&#39;s used in the referenced documentation and that was all I knew about lambdas at the time of writing"},{"owner":{"account_id":148782,"reputation":23519,"user_id":360811,"accept_rate":55,"display_name":"shabunc"},"score":13,"creation_date":1496151566,"post_id":20363874,"comment_id":75535809,"body_markdown":"@zapl, oh, actually it turns out there are reasons behind this - https://stackoverflow.com/questions/28032827/java-8-lambdas-function-identity-or-t-t","body":"@zapl, oh, actually it turns out there are reasons behind this - <a href=\"https://stackoverflow.com/questions/28032827/java-8-lambdas-function-identity-or-t-t\" title=\"java 8 lambdas function identity or t t\">stackoverflow.com/questions/28032827/&hellip;</a>"},{"owner":{"account_id":3057654,"reputation":5535,"user_id":2590960,"accept_rate":54,"display_name":"grep"},"score":0,"creation_date":1531528215,"post_id":20363874,"comment_id":89643794,"body_markdown":"you can see my answer. how to convert list to map using generics and inversion of control: https://stackoverflow.com/a/51334242/2590960","body":"you can see my answer. how to convert list to map using generics and inversion of control: <a href=\"https://stackoverflow.com/a/51334242/2590960\">stackoverflow.com/a/51334242/2590960</a>"},{"owner":{"account_id":2282282,"reputation":1401,"user_id":2007101,"display_name":"Chinmoy"},"score":0,"creation_date":1540527803,"post_id":20363874,"comment_id":92906937,"body_markdown":"Please check the answer by @Ulises if you need to consider duplicate Keys. Need to use Map&lt;String, List&lt;Choice&gt;&gt; instead of a Map&lt;String, Choice&gt;","body":"Please check the answer by @Ulises if you need to consider duplicate Keys. Need to use Map&lt;String, List&lt;Choice&gt;&gt; instead of a Map&lt;String, Choice&gt;"},{"owner":{"account_id":4868888,"reputation":895,"user_id":3926106,"accept_rate":50,"display_name":"Fernando Pie"},"score":0,"creation_date":1548363165,"post_id":20363874,"comment_id":95525389,"body_markdown":"hot to access  for example to Choice::getOtherObject::geName ? please","body":"hot to access  for example to Choice::getOtherObject::geName ? please"},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1561407924,"post_id":20363874,"comment_id":100045875,"body_markdown":"What&#39;s the performance difference between Guava and using streams?","body":"What&#39;s the performance difference between Guava and using streams?"},{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":0,"creation_date":1602763137,"post_id":20363874,"comment_id":113826261,"body_markdown":"@BogdanCalmac &amp; @lukens: While Guava and jOOλ are nice choices, just using JDK with static imports alone does make it a lot shorter already: `.collect(toMap(Choice::getName, identity()))`.","body":"@BogdanCalmac &amp; @lukens: While Guava and jOOλ are nice choices, just using JDK with static imports alone does make it a lot shorter already: <code>.collect(toMap(Choice::getName, identity()))</code>."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":2,"creation_date":1630357176,"post_id":20363874,"comment_id":121929585,"body_markdown":"I&#39;ve run into so many issues with this implementation and do not recommend it in general. This throws an exception if it comes across duplicate keys. If you&#39;re _100 percent_ sure that&#39;s okay, use it, but this has caused me more problems than it&#39;s solved. In every case where this has thrown an exception (a couple times in production), it&#39;s been okay to overwrite the existing entry. I always just iterate now and flag this usage in code review.","body":"I&#39;ve run into so many issues with this implementation and do not recommend it in general. This throws an exception if it comes across duplicate keys. If you&#39;re <i>100 percent</i> sure that&#39;s okay, use it, but this has caused me more problems than it&#39;s solved. In every case where this has thrown an exception (a couple times in production), it&#39;s been okay to overwrite the existing entry. I always just iterate now and flag this usage in code review."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1630506547,"post_id":20363874,"comment_id":121975288,"body_markdown":"@ChristopherSchneider True, there is a fairly hidden risk of getting an exception here. Not sure if I&#39;d prefer a version that silently deletes data instead, but if you wanted, there&#39;s a 3 parameter overload for `toMap` which takes a merge function and e.g. `(a,b) -&gt; b` would give you the overwrite behavior you mentioned. (`choices.stream().collect(Collectors.toMap(Choice::getName, Function.identity(), (a, b) -&gt; b))` in the example)","body":"@ChristopherSchneider True, there is a fairly hidden risk of getting an exception here. Not sure if I&#39;d prefer a version that silently deletes data instead, but if you wanted, there&#39;s a 3 parameter overload for <code>toMap</code> which takes a merge function and e.g. <code>(a,b) -&gt; b</code> would give you the overwrite behavior you mentioned. (<code>choices.stream().collect(Collectors.toMap(Choice::getName, Function.identity(), (a, b) -&gt; b))</code> in the example)"}],"tags":[],"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"comment_count":12,"down_vote_count":2,"up_vote_count":1511,"is_accepted":true,"score":1509,"last_activity_date":1426087031,"creation_date":1386113458,"answer_id":20363874,"question_id":20363719,"body_markdown":"Based on [`Collectors` documentation](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-) it&#39;s as simple as:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n        choices.stream().collect(Collectors.toMap(Choice::getName,\r\n                                                  Function.identity()));\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Based on <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"noreferrer\"><code>Collectors</code> documentation</a> it's as simple as:</p>\n\n<pre><code>Map&lt;String, Choice&gt; result =\n    choices.stream().collect(Collectors.toMap(Choice::getName,\n                                              Function.identity()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27109,"reputation":1920,"user_id":71159,"accept_rate":100,"display_name":"Richard Nichols"},"score":77,"creation_date":1414557678,"post_id":25453317,"comment_id":41855995,"body_markdown":"This actually gives you Map&lt;String, List&lt;Choice&gt;&gt; which deals with the possibility of non-unique keys, but isn&#39;t what the OP requested. In Guava, Multimaps.index(choices, Choice::getName) is probably a better option if this is what you want anyhow.","body":"This actually gives you Map&lt;String, List&lt;Choice&gt;&gt; which deals with the possibility of non-unique keys, but isn&#39;t what the OP requested. In Guava, Multimaps.index(choices, Choice::getName) is probably a better option if this is what you want anyhow."},{"owner":{"account_id":2798921,"reputation":565,"user_id":2407563,"display_name":"Neeraj B."},"score":0,"creation_date":1530885817,"post_id":25453317,"comment_id":89405190,"body_markdown":"or rather use Guava&#39;s Multimap&lt;String, Choice&gt; which comes quite handy in scenarios where same key maps to multiple values. There are various utility methods readily available in Guava to use such data structures rather than creating a Map&lt;String, List&lt;Choice&gt;&gt;","body":"or rather use Guava&#39;s Multimap&lt;String, Choice&gt; which comes quite handy in scenarios where same key maps to multiple values. There are various utility methods readily available in Guava to use such data structures rather than creating a Map&lt;String, List&lt;Choice&gt;&gt;"},{"owner":{"account_id":4535031,"reputation":1556,"user_id":3684479,"accept_rate":35,"display_name":"theyuv"},"score":1,"creation_date":1541080075,"post_id":25453317,"comment_id":93100680,"body_markdown":"@RichardNichols why is the guava `Multimaps` method a better option? It can be an inconvenience since it doesn&#39;t return a `Map` Object.","body":"@RichardNichols why is the guava <code>Multimaps</code> method a better option? It can be an inconvenience since it doesn&#39;t return a <code>Map</code> Object."},{"owner":{"account_id":4190387,"reputation":1275,"user_id":3433137,"accept_rate":75,"display_name":"ElectRocnic"},"score":2,"creation_date":1611659966,"post_id":25453317,"comment_id":116516509,"body_markdown":"@RichardNichols it might no be what OP requested but I was looking for exactly this and am so happy that this answer exists!","body":"@RichardNichols it might no be what OP requested but I was looking for exactly this and am so happy that this answer exists!"}],"tags":[],"owner":{"account_id":2453502,"reputation":9195,"user_id":2139222,"display_name":"Ulises"},"comment_count":4,"down_vote_count":19,"up_vote_count":378,"is_accepted":false,"score":359,"last_activity_date":1496102759,"creation_date":1408731622,"answer_id":25453317,"question_id":20363719,"body_markdown":"If your key is **NOT** guaranteed to be unique for all elements in the list, you should convert it to a `Map&lt;String, List&lt;Choice&gt;&gt;` instead of a `Map&lt;String, Choice&gt;`\r\n\r\n    Map&lt;String, List&lt;Choice&gt;&gt; result =\r\n     choices.stream().collect(Collectors.groupingBy(Choice::getName));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>If your key is <strong>NOT</strong> guaranteed to be unique for all elements in the list, you should convert it to a <code>Map&lt;String, List&lt;Choice&gt;&gt;</code> instead of a <code>Map&lt;String, Choice&gt;</code></p>\n\n<pre><code>Map&lt;String, List&lt;Choice&gt;&gt; result =\n choices.stream().collect(Collectors.groupingBy(Choice::getName));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3091555,"reputation":5673,"user_id":2617546,"accept_rate":53,"display_name":"Mayank Jain"},"score":22,"creation_date":1425109100,"post_id":28779227,"comment_id":45836021,"body_markdown":"Please write some description so that user can understand.","body":"Please write some description so that user can understand."},{"owner":{"account_id":3490045,"reputation":3759,"user_id":2919971,"accept_rate":100,"display_name":"MadConan"},"score":4,"creation_date":1448373020,"post_id":28779227,"comment_id":55553406,"body_markdown":"It&#39;s really too bad there isn&#39;t more details here, because I like this answer best.","body":"It&#39;s really too bad there isn&#39;t more details here, because I like this answer best."},{"owner":{"account_id":2583201,"reputation":876,"user_id":2239431,"display_name":"waterscar"},"score":9,"creation_date":1452065353,"post_id":28779227,"comment_id":57000842,"body_markdown":"It&#39;s equal to \n    \n`choices.stream().collect(Collectors.toMap(choice -&gt; choice.getName(),choice -&gt; choice));`\n\nFirst function for key, second function for value","body":"It&#39;s equal to       <code>choices.stream().collect(Collectors.toMap(choice -&gt; choice.getName(),choice -&gt; choice));</code>  First function for key, second function for value"},{"owner":{"account_id":4264083,"reputation":6317,"user_id":3487617,"display_name":"Hank D"},"score":21,"creation_date":1460236008,"post_id":28779227,"comment_id":60650213,"body_markdown":"I know how easy it is to see and understand `c -&gt; c` but `Function.identity()` carries more semantic information.  I usually use a static import so that i can just use `identity()`","body":"I know how easy it is to see and understand <code>c -&gt; c</code> but <code>Function.identity()</code> carries more semantic information.  I usually use a static import so that i can just use <code>identity()</code>"}],"tags":[],"owner":{"account_id":1859358,"reputation":42899,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"comment_count":4,"down_vote_count":0,"up_vote_count":180,"is_accepted":false,"score":180,"last_activity_date":1559501651,"creation_date":1425107895,"answer_id":28779227,"question_id":20363719,"body_markdown":"Use `getName()` as the key and `Choice` itself as the value of the map:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n        choices.stream().collect(Collectors.toMap(Choice::getName, c -&gt; c));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Use <code>getName()</code> as the key and <code>Choice</code> itself as the value of the map:</p>\n\n<pre><code>Map&lt;String, Choice&gt; result =\n    choices.stream().collect(Collectors.toMap(Choice::getName, c -&gt; c));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":11,"creation_date":1433432569,"post_id":29855930,"comment_id":49360251,"body_markdown":"`groupingBy` creates a `Map&lt;K,List&lt;V&gt;&gt;`, not a `Map&lt;K,V&gt;`.","body":"<code>groupingBy</code> creates a <code>Map&lt;K,List&lt;V&gt;&gt;</code>, not a <code>Map&lt;K,V&gt;</code>."},{"owner":{"account_id":34011,"reputation":5855,"user_id":95674,"display_name":"Barett"},"score":4,"creation_date":1449082417,"post_id":29855930,"comment_id":55855842,"body_markdown":"Dup of ulises answer. And, `String getName();` (not Integer)","body":"Dup of ulises answer. And, <code>String getName();</code> (not Integer)"}],"tags":[],"owner":{"account_id":2363527,"reputation":167,"user_id":2069723,"display_name":"user2069723"},"comment_count":2,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1429903865,"creation_date":1429903865,"answer_id":29855930,"question_id":20363719,"body_markdown":"I use this syntax\r\n\r\n    Map&lt;Integer, List&lt;Choice&gt;&gt; choiceMap = \r\n    choices.stream().collect(Collectors.groupingBy(choice -&gt; choice.getName()));\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I use this syntax</p>\n\n<pre><code>Map&lt;Integer, List&lt;Choice&gt;&gt; choiceMap = \nchoices.stream().collect(Collectors.groupingBy(choice -&gt; choice.getName()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7482232,"reputation":353,"user_id":5686651,"display_name":"iZian"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1452249835,"creation_date":1452249835,"answer_id":34675066,"question_id":20363719,"body_markdown":"I was trying to do this and found that, using the answers above, when using `Functions.identity()` for the key to the Map, then I had issues with using a local method like `this::localMethodName` to actually work because of typing issues.\r\n\r\n`Functions.identity()` actually does something to the typing in this case so the method would only work by returning `Object` and accepting a param of `Object`\r\n\r\nTo solve this, I ended up ditching `Functions.identity()` and using `s-&gt;s` instead.\r\n\r\nSo my code, in my case to list all directories inside a directory, and for each one use the name of the directory as the key to the map and then call a method with the directory name and return a collection of items, looks like:\r\n\r\n    Map&lt;String, Collection&lt;ItemType&gt;&gt; items = Arrays.stream(itemFilesDir.listFiles(File::isDirectory))\r\n    .map(File::getName)\r\n    .collect(Collectors.toMap(s-&gt;s, this::retrieveBrandItems));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I was trying to do this and found that, using the answers above, when using <code>Functions.identity()</code> for the key to the Map, then I had issues with using a local method like <code>this::localMethodName</code> to actually work because of typing issues.</p>\n\n<p><code>Functions.identity()</code> actually does something to the typing in this case so the method would only work by returning <code>Object</code> and accepting a param of <code>Object</code></p>\n\n<p>To solve this, I ended up ditching <code>Functions.identity()</code> and using <code>s-&gt;s</code> instead.</p>\n\n<p>So my code, in my case to list all directories inside a directory, and for each one use the name of the directory as the key to the map and then call a method with the directory name and return a collection of items, looks like:</p>\n\n<pre><code>Map&lt;String, Collection&lt;ItemType&gt;&gt; items = Arrays.stream(itemFilesDir.listFiles(File::isDirectory))\n.map(File::getName)\n.collect(Collectors.toMap(s-&gt;s, this::retrieveBrandItems));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453654543,"creation_date":1453653831,"answer_id":34978466,"question_id":20363719,"body_markdown":"    Map&lt;String, Set&lt;String&gt;&gt; collect = Arrays.asList(Locale.getAvailableLocales()).stream().collect(Collectors\r\n    \t\t\t\t.toMap(l -&gt; l.getDisplayCountry(), l -&gt; Collections.singleton(l.getDisplayLanguage())));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>Map&lt;String, Set&lt;String&gt;&gt; collect = Arrays.asList(Locale.getAvailableLocales()).stream().collect(Collectors\n                .toMap(l -&gt; l.getDisplayCountry(), l -&gt; Collections.singleton(l.getDisplayLanguage())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"comment_count":0,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1456335907,"creation_date":1456335907,"answer_id":35609333,"question_id":20363719,"body_markdown":"If you don&#39;t mind using 3rd party libraries, AOL&#39;s [cyclops-react][1] lib (disclosure I am a contributor) has extensions for all [JDK Collection][2] types, including [List][3] and [Map][4].\r\n\r\n    ListX&lt;Choices&gt; choices;\r\n    Map&lt;String, Choice&gt; map = choices.toMap(c-&gt; c.getName(),c-&gt;c);\r\n\r\n\r\n [1]: https://github.com/aol/cyclops-react\r\n [2]: https://medium.com/@johnmcclean/extending-jdk-8-collections-8ae8d43dd75e#.j5lxtrqze\r\n [3]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/ListX.html\r\n [4]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/MapX.html","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>If you don't mind using 3rd party libraries, AOL's <a href=\"https://github.com/aol/cyclops-react\">cyclops-react</a> lib (disclosure I am a contributor) has extensions for all <a href=\"https://medium.com/@johnmcclean/extending-jdk-8-collections-8ae8d43dd75e#.j5lxtrqze\">JDK Collection</a> types, including <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/ListX.html\">List</a> and <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/MapX.html\">Map</a>.</p>\n\n<pre><code>ListX&lt;Choices&gt; choices;\nMap&lt;String, Choice&gt; map = choices.toMap(c-&gt; c.getName(),c-&gt;c);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2606443,"reputation":464,"user_id":2257531,"display_name":"Swapnil Gangrade"},"score":1,"creation_date":1468851773,"post_id":36726795,"comment_id":64283942,"body_markdown":"Which is better to use then `Collectors.toMap()` or our own HashMap as you showed in above example?","body":"Which is better to use then <code>Collectors.toMap()</code> or our own HashMap as you showed in above example?"},{"owner":{"account_id":1983986,"reputation":4449,"user_id":1779829,"accept_rate":83,"display_name":"th3morg"},"score":1,"creation_date":1492739506,"post_id":36726795,"comment_id":74117607,"body_markdown":"This example provided an example for how to place something else in the map. I wanted a value not provided by a method call. Thanks!","body":"This example provided an example for how to place something else in the map. I wanted a value not provided by a method call. Thanks!"},{"owner":{"account_id":1823079,"reputation":1261,"user_id":1656663,"accept_rate":50,"display_name":"jesantana"},"score":2,"creation_date":1500626056,"post_id":36726795,"comment_id":77431317,"body_markdown":"The third argument function is not correct. There you should provide some function to merge two Hashmaps, something like Hashmap::putAll","body":"The third argument function is not correct. There you should provide some function to merge two Hashmaps, something like Hashmap::putAll"}],"tags":[],"owner":{"account_id":2379289,"reputation":814,"user_id":2081702,"accept_rate":50,"display_name":"Emre Colak"},"comment_count":3,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1461091117,"creation_date":1461091117,"answer_id":36726795,"question_id":20363719,"body_markdown":"Here&#39;s another one in case you don&#39;t want to use Collectors.toMap()\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n       choices.stream().collect(HashMap&lt;String, Choice&gt;::new, \r\n                               (m, c) -&gt; m.put(c.getName(), c),\r\n                               (m, u) -&gt; {});","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Here's another one in case you don't want to use Collectors.toMap()</p>\n\n<pre><code>Map&lt;String, Choice&gt; result =\n   choices.stream().collect(HashMap&lt;String, Choice&gt;::new, \n                           (m, c) -&gt; m.put(c.getName(), c),\n                           (m, u) -&gt; {});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4265759,"reputation":279,"user_id":3488928,"display_name":"Ashish Lohia"},"score":4,"creation_date":1499837978,"post_id":43271662,"comment_id":77072128,"body_markdown":"There is no viable difference in using this or java 7 type.","body":"There is no viable difference in using this or java 7 type."},{"owner":{"account_id":5715909,"reputation":15062,"user_id":4516110,"accept_rate":81,"display_name":"Mehraj Malik"},"score":2,"creation_date":1522408151,"post_id":43271662,"comment_id":86153931,"body_markdown":"The SO asked with Java 8 Streams.","body":"The SO asked with Java 8 Streams."}],"tags":[],"owner":{"account_id":474223,"reputation":567,"user_id":883770,"accept_rate":0,"display_name":"Renukeswar"},"comment_count":2,"down_vote_count":4,"up_vote_count":27,"is_accepted":false,"score":23,"last_activity_date":1491548560,"creation_date":1491548560,"answer_id":43271662,"question_id":20363719,"body_markdown":"    \r\n\r\n&gt; One more option in simple way\r\n\r\n    Map&lt;String,Choice&gt; map = new HashMap&lt;&gt;();\r\n    choices.forEach(e-&gt;map.put(e.getName(),e));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<blockquote>\n  <p>One more option in simple way</p>\n</blockquote>\n\n<pre><code>Map&lt;String,Choice&gt; map = new HashMap&lt;&gt;();\nchoices.forEach(e-&gt;map.put(e.getName(),e));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1496980287,"creation_date":1496980287,"answer_id":44449016,"question_id":20363719,"body_markdown":"Here is solution by [StreamEx][1]\r\n\r\n    StreamEx.of(choices).toMap(Choice::getName, c -&gt; c);\r\n\r\n\r\n  [1]: https://github.com/amaembo/streamex","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Here is solution by <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a></p>\n\n<pre><code>StreamEx.of(choices).toMap(Choice::getName, c -&gt; c);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6932166,"reputation":782,"user_id":5321324,"display_name":"Nicolas Nobelis"},"score":2,"creation_date":1505902188,"post_id":44449953,"comment_id":79599281,"body_markdown":"This is not a good option because you do a get() call for every element, hence increasing the complexity of the operation ( o(n * k) if items is an hashmap).","body":"This is not a good option because you do a get() call for every element, hence increasing the complexity of the operation ( o(n * k) if items is an hashmap)."},{"owner":{"account_id":2515313,"reputation":256,"user_id":2186897,"accept_rate":50,"display_name":"Ivo van der Veeken"},"score":0,"creation_date":1537282899,"post_id":44449953,"comment_id":91723861,"body_markdown":"Isn&#39;t get(i) on a hashmap O(1)?","body":"Isn&#39;t get(i) on a hashmap O(1)?"},{"owner":{"account_id":35585,"reputation":7037,"user_id":100836,"accept_rate":100,"display_name":"Zaki"},"score":0,"creation_date":1540467857,"post_id":44449953,"comment_id":92882005,"body_markdown":"@IvovanderVeeken the get(i) in the code snippet is on the list, not the map.","body":"@IvovanderVeeken the get(i) in the code snippet is on the list, not the map."},{"owner":{"account_id":2515313,"reputation":256,"user_id":2186897,"accept_rate":50,"display_name":"Ivo van der Veeken"},"score":0,"creation_date":1540476513,"post_id":44449953,"comment_id":92887876,"body_markdown":"@Zaki I was talking about Nicolas&#39; remark. I don&#39;t see the n*k complexity if items is a hashmap instead of a list.","body":"@Zaki I was talking about Nicolas&#39; remark. I don&#39;t see the n*k complexity if items is a hashmap instead of a list."}],"tags":[],"owner":{"account_id":10160323,"reputation":522,"user_id":7504001,"accept_rate":40,"display_name":"Vikas Suryawanshi"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1496986391,"creation_date":1496986391,"answer_id":44449953,"question_id":20363719,"body_markdown":"You can create a Stream of the indices using an IntStream and then convert them to a Map :\r\n\r\n    Map&lt;Integer,Item&gt; map = \r\n    IntStream.range(0,items.size())\r\n             .boxed()\r\n             .collect(Collectors.toMap (i -&gt; i, i -&gt; items.get(i)));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>You can create a Stream of the indices using an IntStream and then convert them to a Map :</p>\n\n<pre><code>Map&lt;Integer,Item&gt; map = \nIntStream.range(0,items.size())\n         .boxed()\n         .collect(Collectors.toMap (i -&gt; i, i -&gt; items.get(i)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2125197,"reputation":1387,"user_id":1887560,"accept_rate":3,"display_name":"Rajeev Akotkar"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1501033936,"creation_date":1499832264,"answer_id":45048226,"question_id":20363719,"body_markdown":"    Map&lt;String,Choice&gt; map=list.stream().collect(Collectors.toMap(Choice::getName, s-&gt;s));\r\n\r\nEven  serves this purpose for me,\r\n\r\n    Map&lt;String,Choice&gt; map=  list1.stream().collect(()-&gt; new HashMap&lt;String,Choice&gt;(), \r\n        \t\t(r,s) -&gt; r.put(s.getString(),s),(r,s) -&gt; r.putAll(s));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>Map&lt;String,Choice&gt; map=list.stream().collect(Collectors.toMap(Choice::getName, s-&gt;s));\n</code></pre>\n\n<p>Even  serves this purpose for me,</p>\n\n<pre><code>Map&lt;String,Choice&gt; map=  list1.stream().collect(()-&gt; new HashMap&lt;String,Choice&gt;(), \n            (r,s) -&gt; r.put(s.getString(),s),(r,s) -&gt; r.putAll(s));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4670913,"reputation":3692,"user_id":3782729,"display_name":"Piotr Rogowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1541411210,"creation_date":1508504767,"answer_id":46849728,"question_id":20363719,"body_markdown":"For example, if you want convert object fields to map:\r\n\r\nExample object:\r\n\r\n    class Item{\r\n            private String code;\r\n            private String name;\r\n            \r\n            public Item(String code, String name) {\r\n                this.code = code;\r\n                this.name = name;\r\n            }\r\n\r\n            //getters and setters\r\n        }\r\n\r\nAnd operation convert List To Map:\r\n\r\n    List&lt;Item&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(new Item(&quot;code1&quot;, &quot;name1&quot;));\r\n    list.add(new Item(&quot;code2&quot;, &quot;name2&quot;));\r\n            \r\n    Map&lt;String,String&gt; map = list.stream()\r\n         .collect(Collectors.toMap(Item::getCode, Item::getName));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>For example, if you want convert object fields to map:</p>\n\n<p>Example object:</p>\n\n<pre><code>class Item{\n        private String code;\n        private String name;\n\n        public Item(String code, String name) {\n            this.code = code;\n            this.name = name;\n        }\n\n        //getters and setters\n    }\n</code></pre>\n\n<p>And operation convert List To Map:</p>\n\n<pre><code>List&lt;Item&gt; list = new ArrayList&lt;&gt;();\nlist.add(new Item(\"code1\", \"name1\"));\nlist.add(new Item(\"code2\", \"name2\"));\n\nMap&lt;String,String&gt; map = list.stream()\n     .collect(Collectors.toMap(Item::getCode, Item::getName));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8802416,"reputation":171,"user_id":6578100,"display_name":"raja emani"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1528109105,"creation_date":1528109105,"answer_id":50678791,"question_id":20363719,"body_markdown":"This can be done in 2 ways. Let person be the class we are going to use to demonstrate it.\r\n\r\n    public class Person {\r\n    \r\n        private String name;\r\n        private int age;\r\n    \r\n        public String getAge() {\r\n            return age;\r\n        }\r\n    }\r\nLet **persons** be the list of Persons to be converted to the map\r\n\r\n1.Using Simple foreach and a Lambda Expression on the List\r\n\r\n    Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = new HashMap&lt;&gt;();\r\n    persons.forEach(p-&gt;mapPersons.put(p.getAge(),p));\r\n\r\n2.Using Collectors on Stream defined on the given List.\r\n\r\n   \r\n\r\n     Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = \r\n               persons.stream().collect(Collectors.groupingBy(Person::getAge));\r\n\r\n \r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>This can be done in 2 ways. Let person be the class we are going to use to demonstrate it.</p>\n\n<pre><code>public class Person {\n\n    private String name;\n    private int age;\n\n    public String getAge() {\n        return age;\n    }\n}\n</code></pre>\n\n<p>Let <strong>persons</strong> be the list of Persons to be converted to the map</p>\n\n<p>1.Using Simple foreach and a Lambda Expression on the List</p>\n\n<pre><code>Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = new HashMap&lt;&gt;();\npersons.forEach(p-&gt;mapPersons.put(p.getAge(),p));\n</code></pre>\n\n<p>2.Using Collectors on Stream defined on the given List.</p>\n\n<pre><code> Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = \n           persons.stream().collect(Collectors.groupingBy(Person::getAge));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":381422,"reputation":11633,"user_id":736054,"accept_rate":80,"display_name":"Kamila Borowska"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1530533136,"creation_date":1530533136,"answer_id":51135842,"question_id":20363719,"body_markdown":"It&#39;s possible to use streams to do this. To remove the need to explicitly use `Collectors`, it&#39;s possible to import `toMap` statically (as recommended by Effective Java, third edition).\r\n\r\n    import static java.util.stream.Collectors.toMap;\r\n\r\n    private static Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return choices.stream().collect(toMap(Choice::getName, it -&gt; it));\r\n    }","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>It's possible to use streams to do this. To remove the need to explicitly use <code>Collectors</code>, it's possible to import <code>toMap</code> statically (as recommended by Effective Java, third edition).</p>\n\n<pre><code>import static java.util.stream.Collectors.toMap;\n\nprivate static Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return choices.stream().collect(toMap(Choice::getName, it -&gt; it));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3057654,"reputation":5535,"user_id":2590960,"accept_rate":54,"display_name":"grep"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1531529977,"creation_date":1531528167,"answer_id":51334242,"question_id":20363719,"body_markdown":"I will write how to convert list to map using **generics** and **inversion of control**. Just **universal method!**\r\n\r\n**Maybe** we have **list of Integers** or list of **objects.** So the question is the following: what should be **key of the map?**\r\n\r\ncreate interface\r\n\r\n    public interface KeyFinder&lt;K, E&gt; {\r\n        K getKey(E e);\r\n    }\r\n\r\n\r\n\r\nnow using inversion of control:\r\n\r\n      static &lt;K, E&gt; Map&lt;K, E&gt; listToMap(List&lt;E&gt; list, KeyFinder&lt;K, E&gt; finder) {\r\n            return  list.stream().collect(Collectors.toMap(e -&gt; finder.getKey(e) , e -&gt; e));\r\n        }\r\n\r\n\r\nFor example, if we have objects of book , this class is to choose key for the map  \r\n\r\n    public class BookKeyFinder implements KeyFinder&lt;Long, Book&gt; {\r\n        @Override\r\n        public Long getKey(Book e) {\r\n            return e.getPrice()\r\n        }\r\n    }","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I will write how to convert list to map using <strong>generics</strong> and <strong>inversion of control</strong>. Just <strong>universal method!</strong></p>\n\n<p><strong>Maybe</strong> we have <strong>list of Integers</strong> or list of <strong>objects.</strong> So the question is the following: what should be <strong>key of the map?</strong></p>\n\n<p>create interface</p>\n\n<pre><code>public interface KeyFinder&lt;K, E&gt; {\n    K getKey(E e);\n}\n</code></pre>\n\n<p>now using inversion of control:</p>\n\n<pre><code>  static &lt;K, E&gt; Map&lt;K, E&gt; listToMap(List&lt;E&gt; list, KeyFinder&lt;K, E&gt; finder) {\n        return  list.stream().collect(Collectors.toMap(e -&gt; finder.getKey(e) , e -&gt; e));\n    }\n</code></pre>\n\n<p>For example, if we have objects of book , this class is to choose key for the map  </p>\n\n<pre><code>public class BookKeyFinder implements KeyFinder&lt;Long, Book&gt; {\n    @Override\n    public Long getKey(Book e) {\n        return e.getPrice()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575780,"reputation":10830,"user_id":1462282,"accept_rate":100,"display_name":"Sahil Chhabra"},"comment_count":0,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1686650442,"creation_date":1534488335,"answer_id":51889780,"question_id":20363719,"body_markdown":"Most of the answers listed miss a case when the **list has duplicate items**. In that case, their answer will throw `IllegalStateException`. Refer to the below code **to handle list duplicates** as well:\r\n\r\n    public Map&lt;String, Choice&gt; convertListToMap(List&lt;Choice&gt; choices) {\r\n        return choices.stream()\r\n            .collect(Collectors.toMap(Choice::getName, choice -&gt; choice,\r\n                (oldValue, newValue) -&gt; newValue));\r\n      }","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Most of the answers listed miss a case when the <strong>list has duplicate items</strong>. In that case, their answer will throw <code>IllegalStateException</code>. Refer to the below code <strong>to handle list duplicates</strong> as well:</p>\n<pre><code>public Map&lt;String, Choice&gt; convertListToMap(List&lt;Choice&gt; choices) {\n    return choices.stream()\n        .collect(Collectors.toMap(Choice::getName, choice -&gt; choice,\n            (oldValue, newValue) -&gt; newValue));\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1538577623,"post_id":52627607,"comment_id":92192579,"body_markdown":"Sorry, but this does not do what the OP asked for (i.e. create a `Map&lt;String, Choice&gt;`)","body":"Sorry, but this does not do what the OP asked for (i.e. create a <code>Map&lt;String, Choice&gt;</code>)"}],"tags":[],"owner":{"account_id":8279939,"reputation":272,"user_id":6224955,"display_name":"Rajeev Ranjan"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1538571566,"creation_date":1538571566,"answer_id":52627607,"question_id":20363719,"body_markdown":"    List&lt;Integer&gt; listA = new ArrayList&lt;&gt;();\r\n\t\tlistA.add(1);\r\n\t\tlistA.add(5);\r\n\t\tlistA.add(3);\r\n\t\tlistA.add(4);\t\t\r\n\t\t\r\n\t\t\r\n\t\tSystem.out.println(listA.stream().collect(Collectors.toMap(x -&gt;x, x-&gt;x)));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>List&lt;Integer&gt; listA = new ArrayList&lt;&gt;();\n    listA.add(1);\n    listA.add(5);\n    listA.add(3);\n    listA.add(4);       \n\n\n    System.out.println(listA.stream().collect(Collectors.toMap(x -&gt;x, x-&gt;x)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5660675,"reputation":575,"user_id":4478439,"display_name":"Vaneet Kataria"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1565790797,"creation_date":1548181707,"answer_id":54314411,"question_id":20363719,"body_markdown":"If every new value for the same key name has to be overridden:\r\n\r\n```java\r\npublic Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\r\n    return choices.stream()\r\n        .collect(Collectors.toMap(Choice::getName,\r\n            Function.identity(),\r\n            (oldValue, newValue) - &gt; newValue));\r\n}\r\n```\r\n    \r\nIf all choices have to be grouped in a list for a name:\r\n    \r\n```java\r\npublic Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\r\n    return choices.stream().collect(Collectors.groupingBy(Choice::getName));\r\n}\r\n```","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>If every new value for the same key name has to be overridden:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\n    return choices.stream()\n        .collect(Collectors.toMap(Choice::getName,\n            Function.identity(),\n            (oldValue, newValue) - &gt; newValue));\n}\n</code></pre>\n\n<p>If all choices have to be grouped in a list for a name:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\n    return choices.stream().collect(Collectors.groupingBy(Choice::getName));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1721101,"reputation":799,"user_id":1576929,"accept_rate":58,"display_name":"navderm"},"score":3,"creation_date":1553540563,"post_id":54369850,"comment_id":97414286,"body_markdown":"What are you trying to do here ?? Did you read the question ?","body":"What are you trying to do here ?? Did you read the question ?"}],"tags":[],"owner":{"account_id":3178228,"reputation":4984,"user_id":2685581,"display_name":"Ajay Kumar"},"comment_count":1,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1626003523,"creation_date":1548436118,"answer_id":54369850,"question_id":20363719,"body_markdown":"    String array[] = {&quot;ASDFASDFASDF&quot;,&quot;AA&quot;, &quot;BBB&quot;, &quot;CCCC&quot;, &quot;DD&quot;, &quot;EEDDDAD&quot;};\r\n        List&lt;String&gt; list = Arrays.asList(array);\r\n        Map&lt;Integer, String&gt; map = list.stream()\r\n                .collect(Collectors.toMap(s -&gt; s.length(), s -&gt; s, (x, y) -&gt; {\r\n                    System.out.println(&quot;Dublicate key&quot; + x);\r\n                    return x;\r\n                },()-&gt; new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo(s1))));\r\n        System.out.println(map);\r\n\r\n\r\nDublicate key AA\r\n\r\n```\r\n{12=ASDFASDFASDF, 7=EEDDDAD, 4=CCCC, 3=BBB, 2=AA}\r\n```","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>String array[] = {&quot;ASDFASDFASDF&quot;,&quot;AA&quot;, &quot;BBB&quot;, &quot;CCCC&quot;, &quot;DD&quot;, &quot;EEDDDAD&quot;};\n    List&lt;String&gt; list = Arrays.asList(array);\n    Map&lt;Integer, String&gt; map = list.stream()\n            .collect(Collectors.toMap(s -&gt; s.length(), s -&gt; s, (x, y) -&gt; {\n                System.out.println(&quot;Dublicate key&quot; + x);\n                return x;\n            },()-&gt; new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo(s1))));\n    System.out.println(map);\n</code></pre>\n<p>Dublicate key AA</p>\n<pre><code>{12=ASDFASDFASDF, 7=EEDDDAD, 4=CCCC, 3=BBB, 2=AA}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3726112,"reputation":61,"user_id":3099977,"display_name":"vaibhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566541737,"creation_date":1566530193,"answer_id":57619468,"question_id":20363719,"body_markdown":"    List&lt;V&gt; choices; // your list\r\n    Map&lt;K,V&gt; result = choices.stream().collect(Collectors.toMap(choice::getKey(),choice));\r\n    //assuming class &quot;V&quot; has a method to get the key, this method must handle case of duplicates too and provide a unique key.\r\n\r\n\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>List&lt;V&gt; choices; // your list\nMap&lt;K,V&gt; result = choices.stream().collect(Collectors.toMap(choice::getKey(),choice));\n//assuming class \"V\" has a method to get the key, this method must handle case of duplicates too and provide a unique key.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6120309,"reputation":3055,"user_id":4774054,"accept_rate":0,"display_name":"Frank Neblung"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1574675753,"creation_date":1574675753,"answer_id":59029166,"question_id":20363719,"body_markdown":"As an alternative to `guava` one can use [kotlin-stdlib](https://search.maven.org/artifact/org.jetbrains.kotlin/kotlin-stdlib)\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return CollectionsKt.associateBy(choices, Choice::getName);\r\n    }\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>As an alternative to <code>guava</code> one can use <a href=\"https://search.maven.org/artifact/org.jetbrains.kotlin/kotlin-stdlib\" rel=\"nofollow noreferrer\">kotlin-stdlib</a></p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return CollectionsKt.associateBy(choices, Choice::getName);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":479050,"reputation":9672,"user_id":891479,"accept_rate":79,"display_name":"L. G."},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1603294580,"creation_date":1603294580,"answer_id":64467028,"question_id":20363719,"body_markdown":"Another possibility only present in comments yet:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n    choices.stream().collect(Collectors.toMap(c -&gt; c.getName(), c -&gt; c)));\r\n\r\n\r\nUseful if you want to use a parameter of a sub-object as Key:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n    choices.stream().collect(Collectors.toMap(c -&gt; c.getUser().getName(), c -&gt; c)));\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Another possibility only present in comments yet:</p>\n<pre><code>Map&lt;String, Choice&gt; result =\nchoices.stream().collect(Collectors.toMap(c -&gt; c.getName(), c -&gt; c)));\n</code></pre>\n<p>Useful if you want to use a parameter of a sub-object as Key:</p>\n<pre><code>Map&lt;String, Choice&gt; result =\nchoices.stream().collect(Collectors.toMap(c -&gt; c.getUser().getName(), c -&gt; c)));\n</code></pre>\n"}],"owner":{"account_id":1834770,"reputation":15878,"user_id":1665365,"accept_rate":78,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":749607,"favorite_count":0,"down_vote_count":1,"up_vote_count":1048,"accepted_answer_id":20363874,"answer_count":23,"score":1047,"last_activity_date":1686650442,"creation_date":1386112729,"question_id":20363719,"body_markdown":"I want to translate a List of objects into a Map using Java 8&#39;s streams and lambdas.\r\n\r\nThis is how I would write it in Java 7 and below.\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n            final Map&lt;String, Choice&gt; hashMap = new HashMap&lt;&gt;();\r\n            for (final Choice choice : choices) {\r\n                hashMap.put(choice.getName(), choice);\r\n            }\r\n            return hashMap;\r\n    }\r\n\r\nI can accomplish this easily using Java 8 and Guava but I would like to know how to do this without Guava.\r\n\r\nIn Guava:\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return Maps.uniqueIndex(choices, new Function&lt;Choice, String&gt;() {\r\n    \r\n            @Override\r\n            public String apply(final Choice input) {\r\n                return input.getName();\r\n            }\r\n        });\r\n    }\r\n    \r\n\r\nAnd Guava with Java 8 lambdas.\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return Maps.uniqueIndex(choices, Choice::getName);\r\n    }\r\n\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I want to translate a List of objects into a Map using Java 8's streams and lambdas.</p>\n\n<p>This is how I would write it in Java 7 and below.</p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n        final Map&lt;String, Choice&gt; hashMap = new HashMap&lt;&gt;();\n        for (final Choice choice : choices) {\n            hashMap.put(choice.getName(), choice);\n        }\n        return hashMap;\n}\n</code></pre>\n\n<p>I can accomplish this easily using Java 8 and Guava but I would like to know how to do this without Guava.</p>\n\n<p>In Guava:</p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return Maps.uniqueIndex(choices, new Function&lt;Choice, String&gt;() {\n\n        @Override\n        public String apply(final Choice input) {\n            return input.getName();\n        }\n    });\n}\n</code></pre>\n\n<p>And Guava with Java 8 lambdas.</p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return Maps.uniqueIndex(choices, Choice::getName);\n}\n</code></pre>\n"},{"tags":["java","hibernate","jdbc","aspectj","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686506567,"post_id":76450431,"comment_id":134804459,"body_markdown":"Weaving should work, but the woven Hibernate classes will be part of your application JAR. If you still have the original Hibernate library on the classpath, you might get conflicts with duplicate classes. This can be solved, but it strongly depends on your actual POM or set of POMs. I cannot answer that in one sentence. Maybe instead of post-compile weaving, load-time weaving would make life simpler for you. I can help you, but I need more than a POM snippet. Please publish an [MCVE](https://stackoverflow.com/help/mcve) reproducing the problem on GitHub","body":"Weaving should work, but the woven Hibernate classes will be part of your application JAR. If you still have the original Hibernate library on the classpath, you might get conflicts with duplicate classes. This can be solved, but it strongly depends on your actual POM or set of POMs. I cannot answer that in one sentence. Maybe instead of post-compile weaving, load-time weaving would make life simpler for you. I can help you, but I need more than a POM snippet. Please publish an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> reproducing the problem on GitHub"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686507198,"post_id":76450431,"comment_id":134804557,"body_markdown":"You also seem to be using Lombok, which can lead to problems during compile time in connection with AspectJ. But I do not want to speculate. I need to see a minimal version of your project, as small as possible, just big enough to reproduce the compilation problems. Then I can analyse it and suggest a solution.","body":"You also seem to be using Lombok, which can lead to problems during compile time in connection with AspectJ. But I do not want to speculate. I need to see a minimal version of your project, as small as possible, just big enough to reproduce the compilation problems. Then I can analyse it and suggest a solution."},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686578179,"post_id":76450431,"comment_id":134813780,"body_markdown":"The library with aspect https://github.com/niallrox/db-analyzer\nApplication with aspect dependency https://github.com/niallrox/djidjya-java-kubernetes-template","body":"The library with aspect <a href=\"https://github.com/niallrox/db-analyzer\" rel=\"nofollow noreferrer\">github.com/niallrox/db-analyzer</a> Application with aspect dependency <a href=\"https://github.com/niallrox/djidjya-java-kubernetes-template\" rel=\"nofollow noreferrer\">github.com/niallrox/djidjya-java-kubernetes-template</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686580037,"post_id":76450431,"comment_id":134814268,"body_markdown":"&quot;The POM for com.djidjya.team:djidjya-boot-starter:jar:2.10 is missing, no dependency information available&quot;. Besides, your project has a weave dependency not on Hibernate but on Spring JDBC. Your question describes it differently.","body":"&quot;The POM for com.djidjya.team:djidjya-boot-starter:jar:2.10 is missing, no dependency information available&quot;. Besides, your project has a weave dependency not on Hibernate but on Spring JDBC. Your question describes it differently."},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686594232,"post_id":76450431,"comment_id":134817377,"body_markdown":"djidjya-boot-starter is private library and it has not any db libs inside. I wrote about spring jdbc at start of question. For causing error u have to switch jdbc starter dependency to jpa starter and weave another lib as I wrote in description. I will remove my starter from dependencies fort easily reproducing","body":"djidjya-boot-starter is private library and it has not any db libs inside. I wrote about spring jdbc at start of question. For causing error u have to switch jdbc starter dependency to jpa starter and weave another lib as I wrote in description. I will remove my starter from dependencies fort easily reproducing"},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686599783,"post_id":76450431,"comment_id":134818301,"body_markdown":"@kriegaex I update app(remove starter and include hibernate lib to weave config in pom) https://github.com/niallrox/djidjya-java-kubernetes-template","body":"@kriegaex I update app(remove starter and include hibernate lib to weave config in pom) <a href=\"https://github.com/niallrox/djidjya-java-kubernetes-template\" rel=\"nofollow noreferrer\">github.com/niallrox/djidjya-java-kubernetes-template</a>"}],"answers":[{"comments":[{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686645263,"post_id":76462610,"comment_id":134823734,"body_markdown":"Thank you! Which repo include this snapshots? Now I have `The POM for org.aspectj:aspectjweaver:jar:1.9.20-SNAPSHOT is missing, no dependency information available`","body":"Thank you! Which repo include this snapshots? Now I have <code>The POM for org.aspectj:aspectjweaver:jar:1.9.20-SNAPSHOT is missing, no dependency information available</code>"},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686647390,"post_id":76462610,"comment_id":134824236,"body_markdown":"I found a repo. Thank you, thats solution help me with compile, but my spring jpa repository call(PersonRepository.findAll) doesn&#39;t trigger the aspect. Do you know why this problem? Maybe I haven&#39;t weaved important dependencies?","body":"I found a repo. Thank you, thats solution help me with compile, but my spring jpa repository call(PersonRepository.findAll) doesn&#39;t trigger the aspect. Do you know why this problem? Maybe I haven&#39;t weaved important dependencies?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686650497,"post_id":76462610,"comment_id":134824874,"body_markdown":"Sorry, I forgot to add the repo to the PRs, but just now updated my answer above. I built AspectJ locally, so I did not notice that you would not be able to find the snapshots without an extra repo. As for your other question, I am too busy at the moment to look into that. I would have to analyse your aspects and how they are woven. That is a separate question, unrelated to this one.","body":"Sorry, I forgot to add the repo to the PRs, but just now updated my answer above. I built AspectJ locally, so I did not notice that you would not be able to find the snapshots without an extra repo. As for your other question, I am too busy at the moment to look into that. I would have to analyse your aspects and how they are woven. That is a separate question, unrelated to this one."},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686651069,"post_id":76462610,"comment_id":134824972,"body_markdown":"I agree with you, I will create another one","body":"I agree with you, I will create another one"}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686650383,"creation_date":1686641555,"answer_id":76462610,"question_id":76450431,"body_markdown":"Thanks for the two [MCVE](https://stackoverflow.com/help/mcve) projects. They helped me to reproduce the problem, and it is actually an AspectJ problem. There are missing null checks for a certain method call in the weaver, which subsequently leads to errors in case of parsing method signatures in pointcuts, pointing to methods unavailable during weaving. Imagine that a `call()` pointcut is woven into a class, but then a dependency class is unavailable or is present in a different version with different methods. It is an edge case, but you bumped into it.\r\n\r\nI am in the process of fixing the problem, see [AspectJ issue #243](https://github.com/eclipse-aspectj/aspectj/issues/243).\r\n\r\nFurthermore, I sent you two PRs for your projects:\r\n  * https://github.com/niallrox/db-analyzer/pull/1\r\n  * https://github.com/niallrox/djidjya-java-kubernetes-template/pull/1\r\n\r\nYou are using Java 17 in one of them, so you should use the AspectJ.dev version of AspectJ Maven Plugin, because the Mojohaus version still does not support Java 17 in version 1.14.0. The AspectJ.dev version is also the version recommended by the AspectJ project, because it is better maintained and has a few more features. In the PRs, I also updated the AspectJ version to the latest snapshot containing the fix for your problem, so you can easily retest. _Not important here, but FYI, the snapshot also has Java 20 compilation support, while the latest release 1.9.19 only supports Java 19._\r\n\r\n---\r\n\r\n**Update:** In order to use an AspectJ snapshot, you need this repository:\r\n\r\n```xml\r\n&lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;ossrh-snapshots&lt;/id&gt;\r\n        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\r\n        &lt;releases&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n        &lt;/releases&gt;\r\n        &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n        &lt;/snapshots&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt;\r\n```\r\n","title":"How to weave hibernate by aspectj?","body":"<p>Thanks for the two <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> projects. They helped me to reproduce the problem, and it is actually an AspectJ problem. There are missing null checks for a certain method call in the weaver, which subsequently leads to errors in case of parsing method signatures in pointcuts, pointing to methods unavailable during weaving. Imagine that a <code>call()</code> pointcut is woven into a class, but then a dependency class is unavailable or is present in a different version with different methods. It is an edge case, but you bumped into it.</p>\n<p>I am in the process of fixing the problem, see <a href=\"https://github.com/eclipse-aspectj/aspectj/issues/243\" rel=\"nofollow noreferrer\">AspectJ issue #243</a>.</p>\n<p>Furthermore, I sent you two PRs for your projects:</p>\n<ul>\n<li><a href=\"https://github.com/niallrox/db-analyzer/pull/1\" rel=\"nofollow noreferrer\">https://github.com/niallrox/db-analyzer/pull/1</a></li>\n<li><a href=\"https://github.com/niallrox/djidjya-java-kubernetes-template/pull/1\" rel=\"nofollow noreferrer\">https://github.com/niallrox/djidjya-java-kubernetes-template/pull/1</a></li>\n</ul>\n<p>You are using Java 17 in one of them, so you should use the AspectJ.dev version of AspectJ Maven Plugin, because the Mojohaus version still does not support Java 17 in version 1.14.0. The AspectJ.dev version is also the version recommended by the AspectJ project, because it is better maintained and has a few more features. In the PRs, I also updated the AspectJ version to the latest snapshot containing the fix for your problem, so you can easily retest. <em>Not important here, but FYI, the snapshot also has Java 20 compilation support, while the latest release 1.9.19 only supports Java 19.</em></p>\n<hr />\n<p><strong>Update:</strong> In order to use an AspectJ snapshot, you need this repository:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;ossrh-snapshots&lt;/id&gt;\n        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/releases&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n"}],"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76462610,"answer_count":1,"score":0,"last_activity_date":1686650383,"creation_date":1686485646,"question_id":76450431,"body_markdown":"I have a library with aspect which scan all statement executions and doing some logic with sql sentence.\r\n```java\r\n@Pointcut(&quot;target(java.sql.Statement)&quot;)\r\npublic void statement() {}\r\n\r\n@AfterReturning(&quot;!within(AnalyzerAspect) &amp;&amp; statement() &amp;&amp; args(sql)&quot;)\r\npublic void after(JoinPoint jp, String sql) throws Throwable {\r\n  // some logic\r\n}\r\n```\r\n\r\nWhen I use it for jdbc operations it works fine. I also used it with spring-jdbc like that\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;weaveDependencies&gt;\r\n      &lt;weaveDependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n      &lt;/weaveDependency&gt;\r\n    &lt;/weaveDependencies&gt;\r\n    &lt;aspectLibraries&gt;\r\n      &lt;aspectLibrary&gt;\r\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\r\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\r\n      &lt;/aspectLibrary&gt;\r\n    &lt;/aspectLibraries&gt;\r\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;compile&lt;/goal&gt;\r\n        &lt;goal&gt;test-compile&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nBut when I try to weave hibernate core dependency the same way\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;weaveDependencies&gt;\r\n      &lt;weaveDependency&gt;\r\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n      &lt;/weaveDependency&gt;\r\n    &lt;/weaveDependencies&gt;\r\n    &lt;aspectLibraries&gt;\r\n      &lt;aspectLibrary&gt;\r\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\r\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\r\n      &lt;/aspectLibrary&gt;\r\n    &lt;/aspectLibraries&gt;\r\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;compile&lt;/goal&gt;\r\n        &lt;goal&gt;test-compile&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nI have an error on aspectj compile task.\r\n\r\nIn logs I found a lot of NPE&#39;s(264) like that\r\n\r\n```none\r\nend public class org.hibernate.metamodel.mapping.ordering.ast.ParseTreeVisitor\r\n -- (NullPointerException) Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\r\nCannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\r\njava.lang.NullPointerException: Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\r\n```\r\n\r\nHow to resolve that? Maybe aspectj plugin has an option to skip some weaves if they causes an error or maybe I have to put some properties to resolve that generic parameter types?\r\n\r\n[Full aspectj compiler log](https://storage.yandexcloud.net/hack-bucket/reports/ajcore.20230611.144650.527.txt)\r\n\r\nI don&#39;t find any links with same problem in weaving, but there is one with closest exception: [link](https://stackoverflow.com/questions/8859987/aspectj-methodsignature-returning-null-for-getparameternames)","title":"How to weave hibernate by aspectj?","body":"<p>I have a library with aspect which scan all statement executions and doing some logic with sql sentence.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;target(java.sql.Statement)&quot;)\npublic void statement() {}\n\n@AfterReturning(&quot;!within(AnalyzerAspect) &amp;&amp; statement() &amp;&amp; args(sql)&quot;)\npublic void after(JoinPoint jp, String sql) throws Throwable {\n  // some logic\n}\n</code></pre>\n<p>When I use it for jdbc operations it works fine. I also used it with spring-jdbc like that</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;weaveDependencies&gt;\n      &lt;weaveDependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n      &lt;/weaveDependency&gt;\n    &lt;/weaveDependencies&gt;\n    &lt;aspectLibraries&gt;\n      &lt;aspectLibrary&gt;\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\n      &lt;/aspectLibrary&gt;\n    &lt;/aspectLibraries&gt;\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;goal&gt;test-compile&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>But when I try to weave hibernate core dependency the same way</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;weaveDependencies&gt;\n      &lt;weaveDependency&gt;\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n      &lt;/weaveDependency&gt;\n    &lt;/weaveDependencies&gt;\n    &lt;aspectLibraries&gt;\n      &lt;aspectLibrary&gt;\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\n      &lt;/aspectLibrary&gt;\n    &lt;/aspectLibraries&gt;\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;goal&gt;test-compile&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I have an error on aspectj compile task.</p>\n<p>In logs I found a lot of NPE's(264) like that</p>\n<pre class=\"lang-none prettyprint-override\"><code>end public class org.hibernate.metamodel.mapping.ordering.ast.ParseTreeVisitor\n -- (NullPointerException) Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\nCannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\njava.lang.NullPointerException: Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\n</code></pre>\n<p>How to resolve that? Maybe aspectj plugin has an option to skip some weaves if they causes an error or maybe I have to put some properties to resolve that generic parameter types?</p>\n<p><a href=\"https://storage.yandexcloud.net/hack-bucket/reports/ajcore.20230611.144650.527.txt\" rel=\"nofollow noreferrer\">Full aspectj compiler log</a></p>\n<p>I don't find any links with same problem in weaving, but there is one with closest exception: <a href=\"https://stackoverflow.com/questions/8859987/aspectj-methodsignature-returning-null-for-getparameternames\">link</a></p>\n"},{"tags":["java","difference"],"comments":[{"owner":{"account_id":2079767,"reputation":6298,"user_id":1852033,"accept_rate":77,"display_name":"Leo Ufimtsev"},"score":4,"creation_date":1541804929,"post_id":22358071,"comment_id":93355507,"body_markdown":"This might also be relevant if you&#39;re planning on moving from Oracle to OpenJDK since Oracle isn&#39;t free anymore. https://developers.redhat.com/blog/2018/11/05/migrating-from-oracle-jdk-to-openjdk-on-red-hat-enterprise-linux-what-you-need-to-know/","body":"This might also be relevant if you&#39;re planning on moving from Oracle to OpenJDK since Oracle isn&#39;t free anymore. <a href=\"https://developers.redhat.com/blog/2018/11/05/migrating-from-oracle-jdk-to-openjdk-on-red-hat-enterprise-linux-what-you-need-to-know/\" rel=\"nofollow noreferrer\">developers.redhat.com/blog/2018/11/05/&hellip;</a>"},{"owner":{"account_id":90378,"reputation":2824,"user_id":248847,"accept_rate":85,"display_name":"KrishPrabakar"},"score":3,"creation_date":1595492763,"post_id":22358071,"comment_id":111495144,"body_markdown":"Found a better answer: https://stackoverflow.com/a/59041992/248847","body":"Found a better answer: <a href=\"https://stackoverflow.com/a/59041992/248847\">stackoverflow.com/a/59041992/248847</a>"}],"answers":[{"comments":[{"owner":{"account_id":4509047,"reputation":3905,"user_id":3665698,"display_name":"mcoolive"},"score":52,"creation_date":1426676611,"post_id":22358234,"comment_id":46467399,"body_markdown":"Also there are licensing differences.","body":"Also there are licensing differences."},{"owner":{"account_id":312425,"reputation":3919,"user_id":626485,"accept_rate":76,"display_name":"astroanu"},"score":10,"creation_date":1427692360,"post_id":22358234,"comment_id":46865259,"body_markdown":"thanks i found a better answer.  http://stackoverflow.com/questions/17360011/technically-what-is-the-main-difference-between-oracle-jdk-and-open-jdk#comment27153592_17364418","body":"thanks i found a better answer.  <a href=\"http://stackoverflow.com/questions/17360011/technically-what-is-the-main-difference-between-oracle-jdk-and-open-jdk#comment27153592_17364418\" title=\"technically what is the main difference between oracle jdk and open jdk%23comment27153592_17364418\">stackoverflow.com/questions/17360011/&hellip;</a>"},{"owner":{"account_id":1292849,"reputation":10302,"user_id":1244588,"display_name":"dualed"},"score":9,"creation_date":1441886574,"post_id":22358234,"comment_id":52862044,"body_markdown":"On ARM at least those two seem to be significantly different in performance. I would have to do some profiling on why it is happening, but the subjective difference is &quot;Oracle JDK is ok&quot; and &quot;OpenJDK is completely unusable&quot;.","body":"On ARM at least those two seem to be significantly different in performance. I would have to do some profiling on why it is happening, but the subjective difference is &quot;Oracle JDK is ok&quot; and &quot;OpenJDK is completely unusable&quot;."},{"owner":{"account_id":103956,"reputation":4401,"user_id":278174,"accept_rate":85,"display_name":"powder366"},"score":0,"creation_date":1451570482,"post_id":22358234,"comment_id":56836578,"body_markdown":"@radai So why does not Oracle only use Open JDK and on top deliver the closed-source. Thus only one JDK.","body":"@radai So why does not Oracle only use Open JDK and on top deliver the closed-source. Thus only one JDK."},{"owner":{"account_id":96393,"reputation":23995,"user_id":262022,"accept_rate":87,"display_name":"radai"},"score":0,"creation_date":1451788696,"post_id":22358234,"comment_id":56890562,"body_markdown":"@powder366 - it is very much what theyre doing. except for specific corner cases dealing with copyright (in the encryption subsystem) or enterprise features (see oracle flight recorder and mission control) they are the exact same code base. see a good example here https://technfun.wordpress.com/2013/01/18/last-difference-openjdk-oracle-jdk/","body":"@powder366 - it is very much what theyre doing. except for specific corner cases dealing with copyright (in the encryption subsystem) or enterprise features (see oracle flight recorder and mission control) they are the exact same code base. see a good example here <a href=\"https://technfun.wordpress.com/2013/01/18/last-difference-openjdk-oracle-jdk/\" rel=\"nofollow noreferrer\">technfun.wordpress.com/2013/01/18/&hellip;</a>"},{"owner":{"account_id":1702821,"reputation":3300,"user_id":1562477,"accept_rate":54,"display_name":"Johnny Doe"},"score":1,"creation_date":1452026703,"post_id":22358234,"comment_id":56987391,"body_markdown":"@dualed nevertheless android is moving to openjdk starting from android 7. Looks like they are prepairing significant improvements. http://venturebeat.com/2015/12/29/google-confirms-next-android-version-wont-use-oracles-proprietary-java-apis/","body":"@dualed nevertheless android is moving to openjdk starting from android 7. Looks like they are prepairing significant improvements. <a href=\"http://venturebeat.com/2015/12/29/google-confirms-next-android-version-wont-use-oracles-proprietary-java-apis/\" rel=\"nofollow noreferrer\">venturebeat.com/2015/12/29/&hellip;</a>"},{"owner":{"account_id":1292849,"reputation":10302,"user_id":1244588,"display_name":"dualed"},"score":1,"creation_date":1452262253,"post_id":22358234,"comment_id":57103150,"body_markdown":"@JohnnyDoe Lets hope that if google is moving to OpenJDK, they will provide upstream with performance patches so that it runs well on ARM outside of Android as well!","body":"@JohnnyDoe Lets hope that if google is moving to OpenJDK, they will provide upstream with performance patches so that it runs well on ARM outside of Android as well!"},{"owner":{"account_id":1049806,"reputation":552,"user_id":1054014,"display_name":"Hinotori"},"score":0,"creation_date":1456447819,"post_id":22358234,"comment_id":58964145,"body_markdown":"and openjdk maintains powerpc","body":"and openjdk maintains powerpc"},{"owner":{"account_id":3111325,"reputation":3304,"user_id":2632991,"accept_rate":42,"display_name":"El Mac"},"score":0,"creation_date":1459338899,"post_id":22358234,"comment_id":60239568,"body_markdown":"@JohnnyDoe they are moving because of the biiig lawsuit Oracle vs Google. They don&#39;t want to pay licenses.","body":"@JohnnyDoe they are moving because of the biiig lawsuit Oracle vs Google. They don&#39;t want to pay licenses."},{"owner":{"account_id":2135155,"reputation":448,"user_id":2563447,"accept_rate":71,"display_name":"baibo"},"score":0,"creation_date":1464387815,"post_id":22358234,"comment_id":62482431,"body_markdown":"@dualed Android uses it&#39;s own *implementation* of the Java virtual machine called Dalvik (which uses the ART ahead-of-time compiler in android M). Google will be changing the *API* from the Oracle to the OpenJDK one (API `!=` implementation). Although OP asked for difference &quot;in sources&quot; which is ambiguous, I suspect he meant difference in the implementation. Therefore, you are wrong, since Dalvik VM is a completely different beast from the OpenJDK implementation (or the Oracle one). Also, when you say ARM, which version of the architecture are you referring to?","body":"@dualed Android uses it&#39;s own <i>implementation</i> of the Java virtual machine called Dalvik (which uses the ART ahead-of-time compiler in android M). Google will be changing the <i>API</i> from the Oracle to the OpenJDK one (API <code>!=</code> implementation). Although OP asked for difference &quot;in sources&quot; which is ambiguous, I suspect he meant difference in the implementation. Therefore, you are wrong, since Dalvik VM is a completely different beast from the OpenJDK implementation (or the Oracle one). Also, when you say ARM, which version of the architecture are you referring to?"},{"owner":{"account_id":1292849,"reputation":10302,"user_id":1244588,"display_name":"dualed"},"score":1,"creation_date":1464629332,"post_id":22358234,"comment_id":62552467,"body_markdown":"@baibo actually Dalvik is EOL new one is ART and Dalvik never had AOT only ART has it, the venturebeat article specifically mentions that Google had their own API implementation, NOT Oracle and that they are moving to OpenJDK from their code  though I CBA to verify the truth of this. Anyway I can&#39;t see where I even *can* be wrong, I stated a subjective observation and hope - nothing more, both is intrinsically true.","body":"@baibo actually Dalvik is EOL new one is ART and Dalvik never had AOT only ART has it, the venturebeat article specifically mentions that Google had their own API implementation, NOT Oracle and that they are moving to OpenJDK from their code  though I CBA to verify the truth of this. Anyway I can&#39;t see where I even <i>can</i> be wrong, I stated a subjective observation and hope - nothing more, both is intrinsically true."}],"tags":[],"owner":{"account_id":96393,"reputation":23995,"user_id":262022,"accept_rate":87,"display_name":"radai"},"comment_count":11,"down_vote_count":1,"up_vote_count":347,"is_accepted":false,"score":346,"last_activity_date":1686650302,"creation_date":1394642590,"answer_id":22358234,"question_id":22358071,"body_markdown":"For **Java 7**, nothing crucial. The OpenJDK project is mostly based on [HotSpot][1] source code donated by Sun.\r\n\r\nMoreover, OpenJDK was selected to be the [reference implementation for Java 7][2] and is maintained by Oracle engineers.\r\n\r\nThere&#39;s a more detailed answer from 2012 on [difference between JVM, JDK, JRE &amp; OpenJDK][3], which links to [an Oracle blog post][4]:\r\n\r\n&gt; **Q**: What is the difference between the source code found in the OpenJDK\r\n&gt; repository, and the code you use to build the Oracle JDK?\r\n&gt;\r\n&gt; **A**: It is very close - our build process for Oracle JDK releases builds\r\n&gt; on OpenJDK 7 by adding just a couple of pieces, like the deployment code,\r\n&gt; which includes Oracle&#39;s implementation of the Java Plugin and Java\r\n&gt; WebStart, as well as some closed source third party components like a\r\n&gt; graphics rasterizer, some open source third party components, like\r\n&gt; Rhino, and a few bits and pieces here and there, like additional\r\n&gt; documentation or third party fonts. Moving forward, our intent is to\r\n&gt; open source all pieces of the Oracle JDK except those that we consider\r\n&gt; commercial features such as JRockit Mission Control (not yet available\r\n&gt; in Oracle JDK), and replace encumbered third party components with\r\n&gt; open source alternatives to achieve closer parity between the code\r\n&gt; bases.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/HotSpot_(virtual_machine)\r\n  [2]: https://web.archive.org/web/20160413162542/https://blogs.oracle.com/henrik/entry/moving_to_openjdk_as_the\r\n  [3]: https://stackoverflow.com/questions/11547458/what-is-differences-between-jvm-jdk-jre-openjdk\r\n  [4]: https://web.archive.org/web/20150629214653/https://blogs.oracle.com/henrik/entry/java_7_questions_answers","title":"Differences between Oracle JDK and OpenJDK","body":"<p>For <strong>Java 7</strong>, nothing crucial. The OpenJDK project is mostly based on <a href=\"https://en.wikipedia.org/wiki/HotSpot_(virtual_machine)\" rel=\"nofollow noreferrer\">HotSpot</a> source code donated by Sun.</p>\n<p>Moreover, OpenJDK was selected to be the <a href=\"https://web.archive.org/web/20160413162542/https://blogs.oracle.com/henrik/entry/moving_to_openjdk_as_the\" rel=\"nofollow noreferrer\">reference implementation for Java 7</a> and is maintained by Oracle engineers.</p>\n<p>There's a more detailed answer from 2012 on <a href=\"https://stackoverflow.com/questions/11547458/what-is-differences-between-jvm-jdk-jre-openjdk\">difference between JVM, JDK, JRE &amp; OpenJDK</a>, which links to <a href=\"https://web.archive.org/web/20150629214653/https://blogs.oracle.com/henrik/entry/java_7_questions_answers\" rel=\"nofollow noreferrer\">an Oracle blog post</a>:</p>\n<blockquote>\n<p><strong>Q</strong>: What is the difference between the source code found in the OpenJDK\nrepository, and the code you use to build the Oracle JDK?</p>\n<p><strong>A</strong>: It is very close - our build process for Oracle JDK releases builds\non OpenJDK 7 by adding just a couple of pieces, like the deployment code,\nwhich includes Oracle's implementation of the Java Plugin and Java\nWebStart, as well as some closed source third party components like a\ngraphics rasterizer, some open source third party components, like\nRhino, and a few bits and pieces here and there, like additional\ndocumentation or third party fonts. Moving forward, our intent is to\nopen source all pieces of the Oracle JDK except those that we consider\ncommercial features such as JRockit Mission Control (not yet available\nin Oracle JDK), and replace encumbered third party components with\nopen source alternatives to achieve closer parity between the code\nbases.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1157423,"reputation":37963,"user_id":1137669,"accept_rate":54,"display_name":"basickarl"},"score":21,"creation_date":1471696659,"post_id":38685948,"comment_id":65457536,"body_markdown":"So your saying that openjdk is the baseline for all the other jdks just that they copy it and then tweak it after it&#39;s own specifications?","body":"So your saying that openjdk is the baseline for all the other jdks just that they copy it and then tweak it after it&#39;s own specifications?"},{"owner":{"account_id":112627,"reputation":1655,"user_id":297007,"accept_rate":48,"display_name":"Kefka"},"score":38,"creation_date":1517018830,"post_id":38685948,"comment_id":83937809,"body_markdown":"I&#39;m late to the party, but I&#39;ll ask anyway. What does jdk bring to the table that openjdk doesn&#39;t? All these answers make openjdk sound like it&#39;s equal to or superior in every way, but if that&#39;s the case why does Oracle even bother maintaining jdk?","body":"I&#39;m late to the party, but I&#39;ll ask anyway. What does jdk bring to the table that openjdk doesn&#39;t? All these answers make openjdk sound like it&#39;s equal to or superior in every way, but if that&#39;s the case why does Oracle even bother maintaining jdk?"},{"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"score":0,"creation_date":1517896956,"post_id":38685948,"comment_id":84269372,"body_markdown":"@ Karl Morrison\nAs far I know,.. everyone implementing JVM spec doing that way only.. but there is no explicit rule that one has to follow that way...","body":"@ Karl Morrison As far I know,.. everyone implementing JVM spec doing that way only.. but there is no explicit rule that one has to follow that way..."},{"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"score":16,"creation_date":1517896964,"post_id":38685948,"comment_id":84269374,"body_markdown":"@ Mella \nOpenJDK &lt;= OracleJDK \nFor example, \n  Oracle JDK has Few trusted keys set up, which were not in OpenJDK(Now a days people are just importing them to fill this gap)\n  Oracle JDK has some SWING libraries which are proprietory for speeding up rendering..(Who ever doing server apps, might be irrelevant for them)\n  Oracle JDK has Applet plugin (Same reason above works)\n  Oracle JDK bugfix/hotfix would be distributed and handle properly by Oracle where As OpenJDK it is little technical to ensure all the patches are applied and what conflict they would have","body":"@ Mella  OpenJDK &lt;= OracleJDK  For example,    Oracle JDK has Few trusted keys set up, which were not in OpenJDK(Now a days people are just importing them to fill this gap)   Oracle JDK has some SWING libraries which are proprietory for speeding up rendering..(Who ever doing server apps, might be irrelevant for them)   Oracle JDK has Applet plugin (Same reason above works)   Oracle JDK bugfix/hotfix would be distributed and handle properly by Oracle where As OpenJDK it is little technical to ensure all the patches are applied and what conflict they would have"},{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":0,"creation_date":1525930458,"post_id":38685948,"comment_id":87550141,"body_markdown":"Note with the new release model for java, Oracle plans to reduce the gap as much as possible between both jdk&#39;s. Are there other open source contributors to open jdk other than oracle developers? This is to understand if there would be enough support to backport a fix from the latest version to the previous version. Any thoughts?","body":"Note with the new release model for java, Oracle plans to reduce the gap as much as possible between both jdk&#39;s. Are there other open source contributors to open jdk other than oracle developers? This is to understand if there would be enough support to backport a fix from the latest version to the previous version. Any thoughts?"},{"owner":{"account_id":5117622,"reputation":2841,"user_id":4500798,"display_name":"Stephen Kitt"},"score":0,"creation_date":1526732166,"post_id":38685948,"comment_id":87865066,"body_markdown":"@Andy yes, there are OpenJDK contributors outside Oracle, and some are involved in backporting fixes to older releases. In fact OpenJDK 6 and 7 are officially maintained by Red Hat, not Oracle.","body":"@Andy yes, there are OpenJDK contributors outside Oracle, and some are involved in backporting fixes to older releases. In fact OpenJDK 6 and 7 are officially maintained by Red Hat, not Oracle."},{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":0,"creation_date":1526879815,"post_id":38685948,"comment_id":87898688,"body_markdown":"@StephenKitt - I am not sure if I follow you completely. Are you saying that OpenJDK 9 would get security/bug fixes post JDK 10 release? I really doubt that. Also I understand that OpenJDK is managed by Oracle while AdoptOpenJDK is the one that is managed by multiple sponsors including Oracle, IBM etc. Even AdoptOpenJDK builds too would not be supported for more than 6 months except LTS releases like JDK 8 &amp; 11.","body":"@StephenKitt - I am not sure if I follow you completely. Are you saying that OpenJDK 9 would get security/bug fixes post JDK 10 release? I really doubt that. Also I understand that OpenJDK is managed by Oracle while AdoptOpenJDK is the one that is managed by multiple sponsors including Oracle, IBM etc. Even AdoptOpenJDK builds too would not be supported for more than 6 months except LTS releases like JDK 8 &amp; 11."},{"owner":{"account_id":5117622,"reputation":2841,"user_id":4500798,"display_name":"Stephen Kitt"},"score":0,"creation_date":1526881575,"post_id":38685948,"comment_id":87899200,"body_markdown":"@Andy now I’m not sure I’m following you either. You asked “Are there other open source contributors to open jdk other than oracle developers?” and the answer to that is yes. You qualified your question with “This is to understand if there would be enough support to backport a fix from the latest version to the previous version.” and the answer there is also yes. I didn’t comment on any specific version other than 6 and 7. As you say, I wouldn’t expect 9 and 10 to receive extended support anywhere but there’s nothing preventing motivated third-parties from providing it if they choose to.","body":"@Andy now I’m not sure I’m following you either. You asked “Are there other open source contributors to open jdk other than oracle developers?” and the answer to that is yes. You qualified your question with “This is to understand if there would be enough support to backport a fix from the latest version to the previous version.” and the answer there is also yes. I didn’t comment on any specific version other than 6 and 7. As you say, I wouldn’t expect 9 and 10 to receive extended support anywhere but there’s nothing preventing motivated third-parties from providing it if they choose to."},{"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"score":0,"creation_date":1539505362,"post_id":38685948,"comment_id":92520494,"body_markdown":"@Mella OpenJDK has GC&#39;s like Serial, Parallel, CMS and G1 and recently experimental ZGC. Azul has it&#39;s own C4, which said to be pauseless..\nRef: https://www.opsian.com/blog/javas-new-zgc-is-very-exciting/","body":"@Mella OpenJDK has GC&#39;s like Serial, Parallel, CMS and G1 and recently experimental ZGC. Azul has it&#39;s own C4, which said to be pauseless.. Ref: <a href=\"https://www.opsian.com/blog/javas-new-zgc-is-very-exciting/\" rel=\"nofollow noreferrer\">opsian.com/blog/javas-new-zgc-is-very-exciting</a>"},{"owner":{"account_id":2640892,"reputation":2951,"user_id":2284570,"accept_rate":44,"display_name":"user2284570"},"score":0,"creation_date":1585214270,"post_id":38685948,"comment_id":107684627,"body_markdown":"@VenkateswaraRao isn’t there performance differences between the 2 jre? I read for example that the open source version doesn’t use the additional registers the x86_64 provide for jit (or rather not through assembly) unlike the version given by Oracle.","body":"@VenkateswaraRao isn’t there performance differences between the 2 jre? I read for example that the open source version doesn’t use the additional registers the x86_64 provide for jit (or rather not through assembly) unlike the version given by Oracle."},{"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"score":0,"creation_date":1585590125,"post_id":38685948,"comment_id":107808348,"body_markdown":"@user2284570  There seems to be few additional behaviors added to the same. But this is just small part and does not seem to be considerable difference in performance as of now.","body":"@user2284570  There seems to be few additional behaviors added to the same. But this is just small part and does not seem to be considerable difference in performance as of now."},{"owner":{"account_id":7134601,"reputation":61,"user_id":5454725,"display_name":"BodhiOne"},"score":0,"creation_date":1588126851,"post_id":38685948,"comment_id":108778441,"body_markdown":"&quot;Oracle JDK without subscription could stop working&quot; - I see no evidence of this.  The question of JDK expiration in the Java 8u space has been talked about in various places.  There are different descriptions of what JDK/JRE &#39;expiration&#39; means.  From giving warnings when an app starts to nothing at all.  This thing about a JDK/JRE just stopping to work after expiration is FUD, there is no evidence for it.","body":"&quot;Oracle JDK without subscription could stop working&quot; - I see no evidence of this.  The question of JDK expiration in the Java 8u space has been talked about in various places.  There are different descriptions of what JDK/JRE &#39;expiration&#39; means.  From giving warnings when an app starts to nothing at all.  This thing about a JDK/JRE just stopping to work after expiration is FUD, there is no evidence for it."}],"tags":[],"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"comment_count":12,"down_vote_count":2,"up_vote_count":427,"is_accepted":true,"score":425,"last_activity_date":1539486508,"creation_date":1469981501,"answer_id":38685948,"question_id":22358071,"body_markdown":"Both OpenJDK and Oracle JDK are created and maintained currently by Oracle only.\r\n\r\nOpenJDK and Oracle JDK are implementations of the same Java specification passed the TCK (Java Technology Certification Kit).\r\n\r\nMost of the vendors of JDK are written on top of OpenJDK by doing a few tweaks to [mostly to replace licensed proprietary parts / replace with more high-performance items that only work on specific OS] components without breaking the TCK compatibility.\r\n\r\nMany vendors implemented the Java specification and got TCK passed. For example, IBM J9, Azul Zulu, Azul Zing, and Oracle JDK.\r\n\r\nAlmost every existing JDK is derived from OpenJDK.\r\n\r\nAs suggested by many, licensing is a change between JDKs.  \r\n\r\nStarting with JDK 11 accessing the long time support Oracle JDK/Java SE will now require a commercial license. You should now pay attention to which JDK you&#39;re installing as Oracle JDK without subscription could stop working. [source](https://www.infoworld.com/article/3284164/java/oracle-now-requires-a-subscription-to-use-java-se.html)\r\n\r\nRef: *[List of Java virtual machines][1]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/List_of_Java_virtual_machines#Proprietary_implementations\r\n\r\n","title":"Differences between Oracle JDK and OpenJDK","body":"<p>Both OpenJDK and Oracle JDK are created and maintained currently by Oracle only.</p>\n\n<p>OpenJDK and Oracle JDK are implementations of the same Java specification passed the TCK (Java Technology Certification Kit).</p>\n\n<p>Most of the vendors of JDK are written on top of OpenJDK by doing a few tweaks to [mostly to replace licensed proprietary parts / replace with more high-performance items that only work on specific OS] components without breaking the TCK compatibility.</p>\n\n<p>Many vendors implemented the Java specification and got TCK passed. For example, IBM J9, Azul Zulu, Azul Zing, and Oracle JDK.</p>\n\n<p>Almost every existing JDK is derived from OpenJDK.</p>\n\n<p>As suggested by many, licensing is a change between JDKs.  </p>\n\n<p>Starting with JDK 11 accessing the long time support Oracle JDK/Java SE will now require a commercial license. You should now pay attention to which JDK you're installing as Oracle JDK without subscription could stop working. <a href=\"https://www.infoworld.com/article/3284164/java/oracle-now-requires-a-subscription-to-use-java-se.html\" rel=\"noreferrer\">source</a></p>\n\n<p>Ref: <em><a href=\"https://en.wikipedia.org/wiki/List_of_Java_virtual_machines#Proprietary_implementations\" rel=\"noreferrer\">List of Java virtual machines</a></em></p>\n"},{"comments":[{"owner":{"account_id":2146622,"reputation":465,"user_id":1904113,"accept_rate":75,"display_name":"MKesper"},"score":5,"creation_date":1540468751,"post_id":45078661,"comment_id":92882532,"body_markdown":"For Android Studio, this is no longer true: A copy of the latest OpenJDK comes bundled with Android Studio 2.2 and higher, and this is the JDK version we recommend you use for your Android projects. Source: https://developer.android.com/studio/intro/studio-config#jdk","body":"For Android Studio, this is no longer true: A copy of the latest OpenJDK comes bundled with Android Studio 2.2 and higher, and this is the JDK version we recommend you use for your Android projects. Source: <a href=\"https://developer.android.com/studio/intro/studio-config#jdk\" rel=\"nofollow noreferrer\">developer.android.com/studio/intro/studio-config#jdk</a>"},{"owner":{"account_id":1255624,"reputation":138,"user_id":2663568,"display_name":"Moillead&#243;ir"},"score":1,"creation_date":1584503455,"post_id":45078661,"comment_id":107453687,"body_markdown":"“Software like Minecraft expects Oracle JDK to be used. In fact, warns.” Actually, in Ubuntu, Mojang’s official .deb installer pulls in OpenJDK when installing the launcher.","body":"“Software like Minecraft expects Oracle JDK to be used. In fact, warns.” Actually, in Ubuntu, Mojang’s official .deb installer pulls in OpenJDK when installing the launcher."}],"tags":[],"owner":{"account_id":7002959,"reputation":581,"user_id":6640190,"display_name":"45hook"},"comment_count":2,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1545861353,"creation_date":1499943526,"answer_id":45078661,"question_id":22358071,"body_markdown":"For **Java 8**, Oracle JDK vs. OpenJDK my take of key differences:\r\n\r\n - OpenJDK is an open source implementation of the Java Standard Edition platform with contribution from Oracle and the open Java community.\r\n\r\n - OpenJDK is released under license GPL v2 wherein Oracle JDK is licensed under Oracle Binary Code License Agreement.\r\n\r\n - Actually, Oracle JDK’s build process builds from OpenJDK source code. So there is no major technical difference between Oracle JDK and OpenJDK.\r\nApart from the base code, Oracle JDK includes, Oracle’s implementation of Java Plugin and Java WebStart. It also includes third-party closed source and open source components like graphics rasterizer and [Rhino][1] respectively.\r\nOpenJDK Font Renderer and Oracle JDK Flight Recorder are the noticeable major differences between Oracle JDK and OpenJDK.\r\n - Rockit was the Oracle’s JVM and from Java SE 7, HotSpot and JRockit merged into a single JVM. So now we have only the merged HotSpot JVM available.\r\n - There are instances where people claim that they had issues while running OpenJDK and that got solved when switched over to Oracle JDK.\r\n - Twitter has its own JDK.\r\n - Software like Minecraft expects Oracle JDK to be used. In fact, warns.\r\n\r\nFor a full list of differences please see the source article: [Oracle JDK vs OpenJDK and Java JDK Development Process][2]\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29\r\n  [2]: http://javapapers.com/java/oracle-jdk-vs-openjdk-and-java-jdk-development-process/\r\n\r\n","title":"Differences between Oracle JDK and OpenJDK","body":"<p>For <strong>Java 8</strong>, Oracle JDK vs. OpenJDK my take of key differences:</p>\n\n<ul>\n<li><p>OpenJDK is an open source implementation of the Java Standard Edition platform with contribution from Oracle and the open Java community.</p></li>\n<li><p>OpenJDK is released under license GPL v2 wherein Oracle JDK is licensed under Oracle Binary Code License Agreement.</p></li>\n<li><p>Actually, Oracle JDK’s build process builds from OpenJDK source code. So there is no major technical difference between Oracle JDK and OpenJDK.\nApart from the base code, Oracle JDK includes, Oracle’s implementation of Java Plugin and Java WebStart. It also includes third-party closed source and open source components like graphics rasterizer and <a href=\"http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29\" rel=\"noreferrer\">Rhino</a> respectively.\nOpenJDK Font Renderer and Oracle JDK Flight Recorder are the noticeable major differences between Oracle JDK and OpenJDK.</p></li>\n<li>Rockit was the Oracle’s JVM and from Java SE 7, HotSpot and JRockit merged into a single JVM. So now we have only the merged HotSpot JVM available.</li>\n<li>There are instances where people claim that they had issues while running OpenJDK and that got solved when switched over to Oracle JDK.</li>\n<li>Twitter has its own JDK.</li>\n<li>Software like Minecraft expects Oracle JDK to be used. In fact, warns.</li>\n</ul>\n\n<p>For a full list of differences please see the source article: <a href=\"http://javapapers.com/java/oracle-jdk-vs-openjdk-and-java-jdk-development-process/\" rel=\"noreferrer\">Oracle JDK vs OpenJDK and Java JDK Development Process</a></p>\n"},{"comments":[{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":3,"creation_date":1525930559,"post_id":48714102,"comment_id":87550183,"body_markdown":"Long term releases require you to buy commercial support to get updates after 6 months of the java release.  What is the significance of long term releases when compared with short term releases? Do short term releases like JDK 9/10 do not have commercial support from Oracle?","body":"Long term releases require you to buy commercial support to get updates after 6 months of the java release.  What is the significance of long term releases when compared with short term releases? Do short term releases like JDK 9/10 do not have commercial support from Oracle?"},{"owner":{"account_id":3410182,"reputation":12151,"user_id":2860319,"accept_rate":75,"display_name":"The Gilbert Arenas Dagger"},"score":0,"creation_date":1525970875,"post_id":48714102,"comment_id":87572129,"body_markdown":"@AndyDufresne why do you think you will have to pay for support after only 6 months?  My understanding is that the timeline is TBD.  6 month seems awfully short though... I doubt we can expect public updates for 5 years, like Java 8 is getting, but I wouldn&#39;t be surprised if there were public updates for 2 or 3 years.  Reference - This is per:  http://www.oracle.com/technetwork/java/eol-135779.html.","body":"@AndyDufresne why do you think you will have to pay for support after only 6 months?  My understanding is that the timeline is TBD.  6 month seems awfully short though... I doubt we can expect public updates for 5 years, like Java 8 is getting, but I wouldn&#39;t be surprised if there were public updates for 2 or 3 years.  Reference - This is per:  <a href=\"http://www.oracle.com/technetwork/java/eol-135779.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/eol-135779.html</a>."},{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":1,"creation_date":1526023211,"post_id":48714102,"comment_id":87590025,"body_markdown":"The oracle link mentions &quot;For e.g, the LTS release for Oracle JDK 11 (18.9 LTS)  will be supported for at least 5 years as described in the Oracle Lifetime Support Policy&quot;. The policy has 3 levels of support none of them look to be free. Also I mention this after looking at azul CTO&#39;s comment here - https://blog.takipi.com/java-11-will-include-more-than-just-features/#comment-3809022222. The main goal of this new release strategy is to not spend time in maintaining old releases. If the support were free the model would be the same as it has been till now.","body":"The oracle link mentions &quot;For e.g, the LTS release for Oracle JDK 11 (18.9 LTS)  will be supported for at least 5 years as described in the Oracle Lifetime Support Policy&quot;. The policy has 3 levels of support none of them look to be free. Also I mention this after looking at azul CTO&#39;s comment here - <a href=\"https://blog.takipi.com/java-11-will-include-more-than-just-features/#comment-3809022222\" rel=\"nofollow noreferrer\">blog.takipi.com/java-11-will-include-more-than-just-features&zwnj;&#8203;/&hellip;</a>. The main goal of this new release strategy is to not spend time in maintaining old releases. If the support were free the model would be the same as it has been till now."}],"tags":[],"owner":{"account_id":3410182,"reputation":12151,"user_id":2860319,"accept_rate":75,"display_name":"The Gilbert Arenas Dagger"},"comment_count":3,"down_vote_count":0,"up_vote_count":113,"is_accepted":false,"score":113,"last_activity_date":1518210445,"creation_date":1518210445,"answer_id":48714102,"question_id":22358071,"body_markdown":"A key difference going forward is the release schedule and support policy.  \r\n\r\nOpenJDK\r\n-------\r\n\r\nOpenJDK will have a feature release every 6 months which is only supported until the next feature release. It&#39;s essentially a continuous stream of releases targeted to developers.  \r\n\r\nOracle JDK\r\n----------\r\n\r\nThe Oracle JDK is targeted more towards an enterprise audience which values stability.  It&#39;s based on one of the OpenJDK releases but\r\n is then given long term support (LTS).  The Oracle JDK has releases planned every 3 years. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nSource: https://www.oracle.com/java/java9-screencasts.html?bcid=5582439790001&amp;playerType=single-social&amp;size=events\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mmVJs.png","title":"Differences between Oracle JDK and OpenJDK","body":"<p>A key difference going forward is the release schedule and support policy.  </p>\n\n<h2>OpenJDK</h2>\n\n<p>OpenJDK will have a feature release every 6 months which is only supported until the next feature release. It's essentially a continuous stream of releases targeted to developers.  </p>\n\n<h2>Oracle JDK</h2>\n\n<p>The Oracle JDK is targeted more towards an enterprise audience which values stability.  It's based on one of the OpenJDK releases but\n is then given long term support (LTS).  The Oracle JDK has releases planned every 3 years. </p>\n\n<p><a href=\"https://i.stack.imgur.com/mmVJs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mmVJs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Source: <a href=\"https://www.oracle.com/java/java9-screencasts.html?bcid=5582439790001&amp;playerType=single-social&amp;size=events\" rel=\"noreferrer\">https://www.oracle.com/java/java9-screencasts.html?bcid=5582439790001&amp;playerType=single-social&amp;size=events</a></p>\n"},{"comments":[{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":8,"creation_date":1539081295,"post_id":51865483,"comment_id":92363171,"body_markdown":"Thank you for pointing at the *real* differences: code not running is a real-life matter. From where did you base your `diff` on?","body":"Thank you for pointing at the <i>real</i> differences: code not running is a real-life matter. From where did you base your <code>diff</code> on?"}],"tags":[],"owner":{"account_id":14161964,"reputation":471,"user_id":10231012,"display_name":"mars"},"comment_count":1,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1534362596,"creation_date":1534362596,"answer_id":51865483,"question_id":22358071,"body_markdown":"The Oracle and OpenJDK JVMs are the same and have the same GC features (as of the latest versions 10+). Prior to Oracle managing the OpenJDK JVM there were concrete differences that made that old Openjdk JVM almost unusable in many environments. The JVMs are now the same.\r\n\r\nThe JDKs which include the JVM as part of the Kit, differ by licensing, release and maintenance schedule, and the software libraries included in the JDK. Crucial differences to me also mean things that would make code not run if not present.  Not only licensing. \r\n\r\n    diff --brief -r openjdk oraclejdk\r\n\r\nCrucially the following files are missing in addition to a bunch of others on the linux JDK (So if you &#39;claimed&#39; that code didn&#39;t work on OpenJDK and did so on OracleJDK while you were using javafx then you were correct):\r\n\r\n\r\n    Only in jdk-10.0.1/bin: javapackager\r\n    Only in jdk-10.0.1/bin: javaws\r\n    Only in jdk-10.0.1/bin: jcontrol\r\n    Only in jdk-10.0.1/bin: jmc\r\n    Only in jdk-10.0.1/bin: jweblauncher\r\n    Only in jdk-10.0.1/lib: ant-javafx.jar\r\n    Only in jdk-10.0.1/lib: deploy\r\n    Only in jdk-10.0.1/lib: deploy.jar\r\n    Only in jdk-10.0.1/lib: desktop\r\n    Only in jdk-10.0.1/lib: fontconfig.bfc\r\n    Only in jdk-10.0.1/lib: fontconfig.properties.src\r\n    Only in jdk-10.0.1/lib: fontconfig.RedHat.6.bfc\r\n    Only in jdk-10.0.1/lib: fontconfig.RedHat.6.properties.src\r\n    Only in jdk-10.0.1/lib: fontconfig.SuSE.11.bfc\r\n    Only in jdk-10.0.1/lib: fontconfig.SuSE.11.properties.src\r\n    Only in jdk-10.0.1/lib: fonts\r\n    Only in jdk-10.0.1/lib: javafx.properties\r\n    Only in jdk-10.0.1/lib: javafx-swt.jar\r\n    Only in jdk-10.0.1/lib: java.jnlp.jar\r\n    Only in jdk-10.0.1/lib: javaws.jar\r\n    Only in jdk-10.0.1/lib: jdk.deploy.jar\r\n    Only in jdk-10.0.1/lib: jdk.javaws.jar\r\n    Only in jdk-10.0.1/lib: jdk.plugin.jar\r\n    Only in jdk-10.0.1/lib: jfr\r\n    Only in jdk-10.0.1/lib: libavplugin-53.so\r\n    Only in jdk-10.0.1/lib: libavplugin-54.so\r\n    Only in jdk-10.0.1/lib: libavplugin-55.so\r\n    Only in jdk-10.0.1/lib: libavplugin-56.so\r\n    Only in jdk-10.0.1/lib: libavplugin-57.so\r\n    Only in jdk-10.0.1/lib: libavplugin-ffmpeg-56.so\r\n    Only in jdk-10.0.1/lib: libavplugin-ffmpeg-57.so\r\n    Only in jdk-10.0.1/lib: libbci.so\r\n    Only in jdk-10.0.1/lib: libcmm.so\r\n    Only in jdk-10.0.1/lib: libdecora_sse.so\r\n    Only in jdk-10.0.1/lib: libdeploy.so\r\n    Only in jdk-10.0.1/lib: libfxplugins.so\r\n    Only in jdk-10.0.1/lib: libglassgtk2.so\r\n    Only in jdk-10.0.1/lib: libglassgtk3.so\r\n    Only in jdk-10.0.1/lib: libglass.so\r\n    Only in jdk-10.0.1/lib: libgstreamer-lite.so\r\n    Only in jdk-10.0.1/lib: libjavafx_font_freetype.so\r\n    Only in jdk-10.0.1/lib: libjavafx_font_pango.so\r\n    Only in jdk-10.0.1/lib: libjavafx_font.so\r\n    Only in jdk-10.0.1/lib: libjavafx_iio.so\r\n    Only in jdk-10.0.1/lib: libjfxmedia.so\r\n    Only in jdk-10.0.1/lib: libjfxwebkit.so\r\n    Only in jdk-10.0.1/lib: libnpjp2.so\r\n    Only in jdk-10.0.1/lib: libprism_common.so\r\n    Only in jdk-10.0.1/lib: libprism_es2.so\r\n    Only in jdk-10.0.1/lib: libprism_sw.so\r\n    Only in jdk-10.0.1/lib: librm.so\r\n    Only in jdk-10.0.1/lib: libt2k.so\r\n    Only in jdk-10.0.1/lib: locale\r\n    Only in jdk-10.0.1/lib: missioncontrol\r\n    Only in jdk-10.0.1/lib: oblique-fonts\r\n    Only in jdk-10.0.1/lib: plugin.jar\r\n    Only in jdk-10.0.1/lib: plugin-legacy.jar\r\n    Only in jdk-10.0.1/lib/security: blacklist\r\n    Only in jdk-10.0.1/lib/security: public_suffix_list.dat\r\n    Only in jdk-10.0.1/lib/security: trusted.libraries\r\n    Only in openjdk-10.0.1: man`","title":"Differences between Oracle JDK and OpenJDK","body":"<p>The Oracle and OpenJDK JVMs are the same and have the same GC features (as of the latest versions 10+). Prior to Oracle managing the OpenJDK JVM there were concrete differences that made that old Openjdk JVM almost unusable in many environments. The JVMs are now the same.</p>\n\n<p>The JDKs which include the JVM as part of the Kit, differ by licensing, release and maintenance schedule, and the software libraries included in the JDK. Crucial differences to me also mean things that would make code not run if not present.  Not only licensing. </p>\n\n<pre><code>diff --brief -r openjdk oraclejdk\n</code></pre>\n\n<p>Crucially the following files are missing in addition to a bunch of others on the linux JDK (So if you 'claimed' that code didn't work on OpenJDK and did so on OracleJDK while you were using javafx then you were correct):</p>\n\n<pre><code>Only in jdk-10.0.1/bin: javapackager\nOnly in jdk-10.0.1/bin: javaws\nOnly in jdk-10.0.1/bin: jcontrol\nOnly in jdk-10.0.1/bin: jmc\nOnly in jdk-10.0.1/bin: jweblauncher\nOnly in jdk-10.0.1/lib: ant-javafx.jar\nOnly in jdk-10.0.1/lib: deploy\nOnly in jdk-10.0.1/lib: deploy.jar\nOnly in jdk-10.0.1/lib: desktop\nOnly in jdk-10.0.1/lib: fontconfig.bfc\nOnly in jdk-10.0.1/lib: fontconfig.properties.src\nOnly in jdk-10.0.1/lib: fontconfig.RedHat.6.bfc\nOnly in jdk-10.0.1/lib: fontconfig.RedHat.6.properties.src\nOnly in jdk-10.0.1/lib: fontconfig.SuSE.11.bfc\nOnly in jdk-10.0.1/lib: fontconfig.SuSE.11.properties.src\nOnly in jdk-10.0.1/lib: fonts\nOnly in jdk-10.0.1/lib: javafx.properties\nOnly in jdk-10.0.1/lib: javafx-swt.jar\nOnly in jdk-10.0.1/lib: java.jnlp.jar\nOnly in jdk-10.0.1/lib: javaws.jar\nOnly in jdk-10.0.1/lib: jdk.deploy.jar\nOnly in jdk-10.0.1/lib: jdk.javaws.jar\nOnly in jdk-10.0.1/lib: jdk.plugin.jar\nOnly in jdk-10.0.1/lib: jfr\nOnly in jdk-10.0.1/lib: libavplugin-53.so\nOnly in jdk-10.0.1/lib: libavplugin-54.so\nOnly in jdk-10.0.1/lib: libavplugin-55.so\nOnly in jdk-10.0.1/lib: libavplugin-56.so\nOnly in jdk-10.0.1/lib: libavplugin-57.so\nOnly in jdk-10.0.1/lib: libavplugin-ffmpeg-56.so\nOnly in jdk-10.0.1/lib: libavplugin-ffmpeg-57.so\nOnly in jdk-10.0.1/lib: libbci.so\nOnly in jdk-10.0.1/lib: libcmm.so\nOnly in jdk-10.0.1/lib: libdecora_sse.so\nOnly in jdk-10.0.1/lib: libdeploy.so\nOnly in jdk-10.0.1/lib: libfxplugins.so\nOnly in jdk-10.0.1/lib: libglassgtk2.so\nOnly in jdk-10.0.1/lib: libglassgtk3.so\nOnly in jdk-10.0.1/lib: libglass.so\nOnly in jdk-10.0.1/lib: libgstreamer-lite.so\nOnly in jdk-10.0.1/lib: libjavafx_font_freetype.so\nOnly in jdk-10.0.1/lib: libjavafx_font_pango.so\nOnly in jdk-10.0.1/lib: libjavafx_font.so\nOnly in jdk-10.0.1/lib: libjavafx_iio.so\nOnly in jdk-10.0.1/lib: libjfxmedia.so\nOnly in jdk-10.0.1/lib: libjfxwebkit.so\nOnly in jdk-10.0.1/lib: libnpjp2.so\nOnly in jdk-10.0.1/lib: libprism_common.so\nOnly in jdk-10.0.1/lib: libprism_es2.so\nOnly in jdk-10.0.1/lib: libprism_sw.so\nOnly in jdk-10.0.1/lib: librm.so\nOnly in jdk-10.0.1/lib: libt2k.so\nOnly in jdk-10.0.1/lib: locale\nOnly in jdk-10.0.1/lib: missioncontrol\nOnly in jdk-10.0.1/lib: oblique-fonts\nOnly in jdk-10.0.1/lib: plugin.jar\nOnly in jdk-10.0.1/lib: plugin-legacy.jar\nOnly in jdk-10.0.1/lib/security: blacklist\nOnly in jdk-10.0.1/lib/security: public_suffix_list.dat\nOnly in jdk-10.0.1/lib/security: trusted.libraries\nOnly in openjdk-10.0.1: man`\n</code></pre>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1536840735,"post_id":52311057,"comment_id":91573941,"body_markdown":"I noticed that most of your answers had a signature in them. I have edited them out. Please read [Are taglines &amp; signatures disallowed?](https://meta.stackexchange.com/questions/5029/are-taglines-signatures-disallowed) and https://stackoverflow.com/help/behavior (specifically section &quot;Do not use signature, taglines, or greetings.&quot;)","body":"I noticed that most of your answers had a signature in them. I have edited them out. Please read <a href=\"https://meta.stackexchange.com/questions/5029/are-taglines-signatures-disallowed\">Are taglines &amp; signatures disallowed?</a> and <a href=\"https://stackoverflow.com/help/behavior\">stackoverflow.com/help/behavior</a> (specifically section &quot;Do not use signature, taglines, or greetings.&quot;)"}],"tags":[],"owner":{"account_id":11380205,"reputation":667,"user_id":8343290,"display_name":"Dalibor Topic"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1536924407,"creation_date":1536832123,"answer_id":52311057,"question_id":22358071,"body_markdown":"A list of the few remaining cosmetic and packaging differences between Oracle JDK 11 and OpenJDK 11 can be found in this blog post:\r\n\r\nhttps://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later\r\n\r\nIn short:\r\n\r\n - Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option,\r\n - it can be configured to provide usage log data to the “Advanced Management Console” tool, \r\n - it has always required third party cryptographic providers to be signed by a known certificate, \r\n - it will continue to include installers, branding and JRE packaging,\r\n - while the javac --release command behaves slightly differently for the Java 9 and Java 10 targets, and \r\n - the output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds.","title":"Differences between Oracle JDK and OpenJDK","body":"<p>A list of the few remaining cosmetic and packaging differences between Oracle JDK 11 and OpenJDK 11 can be found in this blog post:</p>\n\n<p><a href=\"https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later\" rel=\"noreferrer\">https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later</a></p>\n\n<p>In short:</p>\n\n<ul>\n<li>Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option,</li>\n<li>it can be configured to provide usage log data to the “Advanced Management Console” tool, </li>\n<li>it has always required third party cryptographic providers to be signed by a known certificate, </li>\n<li>it will continue to include installers, branding and JRE packaging,</li>\n<li>while the javac --release command behaves slightly differently for the Java 9 and Java 10 targets, and </li>\n<li>the output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2374287,"reputation":4246,"user_id":2078093,"accept_rate":62,"display_name":"Naresh Joshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1545553924,"creation_date":1544639302,"answer_id":53749226,"question_id":22358071,"body_markdown":"According to the oracle blog, [Oracle JDK Releases for Java 11 and Later][1]\r\n\r\nStarting with Java 11, Oracle will provide JDK releases under the open source [GNU General Public License v2, with the Classpath Exception (GPLv2+CPE)](http://openjdk.java.net/legal/gplv2+ce.html), and under a commercial license for those using the Oracle JDK as part of an Oracle product or service, or who do not wish to use open source software.  This combination of using an open source license and a commercial license replaces the historical “[BCL](https://java.com/license)” license, which had a combination of free and paid commercial terms.\r\n\r\nDifferent builds will be provided for each license, but these builds are functionally identical aside from some cosmetic and packaging differences, described in detail below.\r\n\r\n**From the BCL to the GPL**\r\n\r\nThe [Binary Code License for Oracle Java SE technologies (“BCL”)](https://java.com/license) has been the primary license for Oracle Java SE technologies for well over a decade. The BCL permits use without license fees under certain conditions.  To simplify things going forward, Oracle started [providing open source licensed OpenJDK builds](http://jdk.java.net/) as of Java 9, using the same license model as the Linux platform. If you are used to getting Oracle Java SE binaries for free, you can simply continue doing so with Oracle’s OpenJDK builds available at [jdk.java.net](http://jdk.java.net/).  If you are used to getting Oracle Java SE binaries as part of a commercial product or service from Oracle, then you can continue to get Oracle JDK releases through [My Oracle Support](https://support.oracle.com/epmos/faces/MosIndex.jspx) (MOS), and other locations.\r\n\r\n**Functionally identical and interchangeable...**\r\n\r\nOracle’s BCL-licensed JDK historically contained “commercial features” that were not available in OpenJDK builds. [As promised](http://mail.openjdk.java.net/pipermail/discuss/2017-September/004281.html), however, over the past year Oracle has contributed these features to the OpenJDK Community, including:\r\n\r\n- [Java Flight Recorder](http://openjdk.java.net/jeps/328),\r\n- [Java Mission Control](http://openjdk.java.net/projects/jmc/),\r\n- [Application Class-Data Sharing](http://openjdk.java.net/jeps/310), and\r\n- [ZGC](http://openjdk.java.net/jeps/333).\r\n\r\nFrom Java 11 forward, therefore, Oracle JDK builds and [OpenJDK builds](http://jdk.java.net/) will be essentially identical.\r\n\r\n**...yet with some cosmetic and packaging differences**\r\n\r\nThere do remain a small number of differences, some intentional and cosmetic, and some simply because more time to discuss with OpenJDK contributors is warranted.\r\n\r\n- Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds this option results in an error. This option was never part of OpenJDK and it would not make sense to add it now, since there are no commercial features in OpenJDK. This difference remains in order to make it easier for users of Oracle JDK 10 and earlier releases to migrate to Oracle JDK 11 and later. \r\n- Oracle JDK 11 can be configured to provide usage log data to the “[Advanced Management Console](https://www.oracle.com/technetwork/java/javaseproducts/advanced-mgmt/advancedmanagementconsole-2254207.html)” tool, which is a separate commercial Oracle product.  We will work with other OpenJDK contributors to discuss how such usage data may be useful in OpenJDK in future releases, if at all.   This difference remains primarily to provide a consistent experience to Oracle customers until such decisions are made.\r\n- The javac --release command behaves differently for the Java 9 and Java 10 targets, since in those releases the Oracle JDK contained some additional modules that were not part of corresponding OpenJDK releases:\r\n  - javafx.base\r\n  - javafx.controls\r\n  - javafx.fxml\r\n  - javafx.graphics\r\n  - javafx.media\r\n  - javafx.web\r\n  - java.jnlp\r\n  - jdk.jfr\r\n  - jdk.management.cmm\r\n  - jdk.management.jfr\r\n  - jdk.management.resource\r\n  - jdk.packager.services\r\n  - jdk.snmp\r\n\r\nThis difference remains in order to provide a consistent experience for specific kinds of legacy use. These modules are either now available separately as part of [OpenJFX](http://openjdk.java.net/projects/openjfx/), are now in both OpenJDK and the Oracle JDK because they were commercial features which Oracle contributed to OpenJDK (e.g., Flight Recorder), or were removed from Oracle JDK 11 (e.g., JNLP).\r\n\r\n- The output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds, so that support teams can diagnose any issues that may exist.  Specifically, running java --version with an Oracle JDK 11 build results in:\r\n\r\njava 11 2018-09-25\r\n\r\nJava(TM) SE Runtime Environment 18.9 (build 11+28)\r\n\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\nAnd for an OpenJDK 11 build:\r\n\r\nopenjdk version &quot;11&quot; 2018-09-25\r\n\r\nOpenJDK Runtime Environment 18.9 (build 11+28)\r\n\r\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\n- The Oracle JDK has always required third party cryptographic providers to be signed by a known certificate.  The cryptography framework in OpenJDK has an open cryptographic interface, meaning it does not restrict which providers can be used.  Oracle JDK 11 will continue to [require](https://docs.oracle.com/javase/10/security/howtoimplaprovider.htm#JSSEC-GUID-2D4432F9-1C3C-4A91-8612-2B2840188B36) a valid signature, and Oracle OpenJDK builds will continue to allow the use of either a valid signature or unsigned third party crypto provider. \r\n- Oracle JDK 11 will continue to include installers, branding and JRE packaging for an experience consistent with legacy desktop uses.  Oracle OpenJDK builds are currently available as zip and tar.gz files, while alternative distribution formats are being considered.\r\n\r\n\r\n  [1]: https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later","title":"Differences between Oracle JDK and OpenJDK","body":"<p>According to the oracle blog, <a href=\"https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later\" rel=\"noreferrer\">Oracle JDK Releases for Java 11 and Later</a></p>\n\n<p>Starting with Java 11, Oracle will provide JDK releases under the open source <a href=\"http://openjdk.java.net/legal/gplv2+ce.html\" rel=\"noreferrer\">GNU General Public License v2, with the Classpath Exception (GPLv2+CPE)</a>, and under a commercial license for those using the Oracle JDK as part of an Oracle product or service, or who do not wish to use open source software.  This combination of using an open source license and a commercial license replaces the historical “<a href=\"https://java.com/license\" rel=\"noreferrer\">BCL</a>” license, which had a combination of free and paid commercial terms.</p>\n\n<p>Different builds will be provided for each license, but these builds are functionally identical aside from some cosmetic and packaging differences, described in detail below.</p>\n\n<p><strong>From the BCL to the GPL</strong></p>\n\n<p>The <a href=\"https://java.com/license\" rel=\"noreferrer\">Binary Code License for Oracle Java SE technologies (“BCL”)</a> has been the primary license for Oracle Java SE technologies for well over a decade. The BCL permits use without license fees under certain conditions.  To simplify things going forward, Oracle started <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">providing open source licensed OpenJDK builds</a> as of Java 9, using the same license model as the Linux platform. If you are used to getting Oracle Java SE binaries for free, you can simply continue doing so with Oracle’s OpenJDK builds available at <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">jdk.java.net</a>.  If you are used to getting Oracle Java SE binaries as part of a commercial product or service from Oracle, then you can continue to get Oracle JDK releases through <a href=\"https://support.oracle.com/epmos/faces/MosIndex.jspx\" rel=\"noreferrer\">My Oracle Support</a> (MOS), and other locations.</p>\n\n<p><strong>Functionally identical and interchangeable...</strong></p>\n\n<p>Oracle’s BCL-licensed JDK historically contained “commercial features” that were not available in OpenJDK builds. <a href=\"http://mail.openjdk.java.net/pipermail/discuss/2017-September/004281.html\" rel=\"noreferrer\">As promised</a>, however, over the past year Oracle has contributed these features to the OpenJDK Community, including:</p>\n\n<ul>\n<li><a href=\"http://openjdk.java.net/jeps/328\" rel=\"noreferrer\">Java Flight Recorder</a>,</li>\n<li><a href=\"http://openjdk.java.net/projects/jmc/\" rel=\"noreferrer\">Java Mission Control</a>,</li>\n<li><a href=\"http://openjdk.java.net/jeps/310\" rel=\"noreferrer\">Application Class-Data Sharing</a>, and</li>\n<li><a href=\"http://openjdk.java.net/jeps/333\" rel=\"noreferrer\">ZGC</a>.</li>\n</ul>\n\n<p>From Java 11 forward, therefore, Oracle JDK builds and <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">OpenJDK builds</a> will be essentially identical.</p>\n\n<p><strong>...yet with some cosmetic and packaging differences</strong></p>\n\n<p>There do remain a small number of differences, some intentional and cosmetic, and some simply because more time to discuss with OpenJDK contributors is warranted.</p>\n\n<ul>\n<li>Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds this option results in an error. This option was never part of OpenJDK and it would not make sense to add it now, since there are no commercial features in OpenJDK. This difference remains in order to make it easier for users of Oracle JDK 10 and earlier releases to migrate to Oracle JDK 11 and later. </li>\n<li>Oracle JDK 11 can be configured to provide usage log data to the “<a href=\"https://www.oracle.com/technetwork/java/javaseproducts/advanced-mgmt/advancedmanagementconsole-2254207.html\" rel=\"noreferrer\">Advanced Management Console</a>” tool, which is a separate commercial Oracle product.  We will work with other OpenJDK contributors to discuss how such usage data may be useful in OpenJDK in future releases, if at all.   This difference remains primarily to provide a consistent experience to Oracle customers until such decisions are made.</li>\n<li>The javac --release command behaves differently for the Java 9 and Java 10 targets, since in those releases the Oracle JDK contained some additional modules that were not part of corresponding OpenJDK releases:\n\n<ul>\n<li>javafx.base</li>\n<li>javafx.controls</li>\n<li>javafx.fxml</li>\n<li>javafx.graphics</li>\n<li>javafx.media</li>\n<li>javafx.web</li>\n<li>java.jnlp</li>\n<li>jdk.jfr</li>\n<li>jdk.management.cmm</li>\n<li>jdk.management.jfr</li>\n<li>jdk.management.resource</li>\n<li>jdk.packager.services</li>\n<li>jdk.snmp</li>\n</ul></li>\n</ul>\n\n<p>This difference remains in order to provide a consistent experience for specific kinds of legacy use. These modules are either now available separately as part of <a href=\"http://openjdk.java.net/projects/openjfx/\" rel=\"noreferrer\">OpenJFX</a>, are now in both OpenJDK and the Oracle JDK because they were commercial features which Oracle contributed to OpenJDK (e.g., Flight Recorder), or were removed from Oracle JDK 11 (e.g., JNLP).</p>\n\n<ul>\n<li>The output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds, so that support teams can diagnose any issues that may exist.  Specifically, running java --version with an Oracle JDK 11 build results in:</li>\n</ul>\n\n<p>java 11 2018-09-25</p>\n\n<p>Java(TM) SE Runtime Environment 18.9 (build 11+28)</p>\n\n<p>Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)</p>\n\n<p>And for an OpenJDK 11 build:</p>\n\n<p>openjdk version \"11\" 2018-09-25</p>\n\n<p>OpenJDK Runtime Environment 18.9 (build 11+28)</p>\n\n<p>OpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)</p>\n\n<ul>\n<li>The Oracle JDK has always required third party cryptographic providers to be signed by a known certificate.  The cryptography framework in OpenJDK has an open cryptographic interface, meaning it does not restrict which providers can be used.  Oracle JDK 11 will continue to <a href=\"https://docs.oracle.com/javase/10/security/howtoimplaprovider.htm#JSSEC-GUID-2D4432F9-1C3C-4A91-8612-2B2840188B36\" rel=\"noreferrer\">require</a> a valid signature, and Oracle OpenJDK builds will continue to allow the use of either a valid signature or unsigned third party crypto provider. </li>\n<li>Oracle JDK 11 will continue to include installers, branding and JRE packaging for an experience consistent with legacy desktop uses.  Oracle OpenJDK builds are currently available as zip and tar.gz files, while alternative distribution formats are being considered.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":502326,"reputation":6232,"user_id":2693875,"accept_rate":67,"display_name":"Greg Dubicki"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1545511592,"creation_date":1545511592,"answer_id":53899189,"question_id":22358071,"body_markdown":"Also for **Java 8** an [interesting performance benchmark for reactive (non-blocking) Spring Boot REST application being hosted on various JVMs by AMIS Technology Blog has been published in Nov 2018][1] showing that, among other differences:\r\n\r\n* OpenJDK has higher CPU usage than OracleJDK,\r\n* OpenJDK has slightly lower response time than OracleJDK,\r\n* OpenJDK has higher memory usage than OracleJDK,\r\n\r\nFor details please see the source article.\r\n\r\nOf course YMMV, this is just one of the benchmarks.\r\n\r\n  [1]: https://technology.amis.nl/2018/11/23/comparing-jvm-performance-zulu-openjdk-openjdk-oracle-jdk-graalvm-ce/","title":"Differences between Oracle JDK and OpenJDK","body":"<p>Also for <strong>Java 8</strong> an <a href=\"https://technology.amis.nl/2018/11/23/comparing-jvm-performance-zulu-openjdk-openjdk-oracle-jdk-graalvm-ce/\" rel=\"noreferrer\">interesting performance benchmark for reactive (non-blocking) Spring Boot REST application being hosted on various JVMs by AMIS Technology Blog has been published in Nov 2018</a> showing that, among other differences:</p>\n\n<ul>\n<li>OpenJDK has higher CPU usage than OracleJDK,</li>\n<li>OpenJDK has slightly lower response time than OracleJDK,</li>\n<li>OpenJDK has higher memory usage than OracleJDK,</li>\n</ul>\n\n<p>For details please see the source article.</p>\n\n<p>Of course YMMV, this is just one of the benchmarks.</p>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1547041069,"creation_date":1546016596,"answer_id":53961911,"question_id":22358071,"body_markdown":"Aside from the obvious licensing difference, the major difference between OpenJDK and OracleJDK 11 are stability and performance updates.\r\n\r\nSource: https://www.youtube.com/watch?v=Adv9--6IcQI&amp;t=385\r\n\r\nEvery 6 months the two codebases will be in-sync. But during the 6 month window OpenJDK will only receive security updates while OracleJDK will receive additional stability and performance updates.\r\n\r\nGiven that update releases only occur every 3 months for both OpenJDK and OracleJDK this means that you are missing out on (at most) 3 months worth of fixes until the next major release comes out and you upgrade. However, if you choose to stick to LTS releases then a commercial license begins to make more sense.","title":"Differences between Oracle JDK and OpenJDK","body":"<p>Aside from the obvious licensing difference, the major difference between OpenJDK and OracleJDK 11 are stability and performance updates.</p>\n\n<p>Source: <a href=\"https://www.youtube.com/watch?v=Adv9--6IcQI&amp;t=385\" rel=\"noreferrer\">https://www.youtube.com/watch?v=Adv9--6IcQI&amp;t=385</a></p>\n\n<p>Every 6 months the two codebases will be in-sync. But during the 6 month window OpenJDK will only receive security updates while OracleJDK will receive additional stability and performance updates.</p>\n\n<p>Given that update releases only occur every 3 months for both OpenJDK and OracleJDK this means that you are missing out on (at most) 3 months worth of fixes until the next major release comes out and you upgrade. However, if you choose to stick to LTS releases then a commercial license begins to make more sense.</p>\n"},{"comments":[{"owner":{"account_id":1532595,"reputation":4652,"user_id":1429432,"accept_rate":68,"display_name":"Yousha Aleayoub"},"score":0,"creation_date":1575104128,"post_id":57140286,"comment_id":104459762,"body_markdown":"https://technology.amis.nl/2018/11/23/comparing-jvm-performance-zulu-openjdk-openjdk-oracle-jdk-graalvm-ce/","body":"<a href=\"https://technology.amis.nl/2018/11/23/comparing-jvm-performance-zulu-openjdk-openjdk-oracle-jdk-graalvm-ce/\" rel=\"nofollow noreferrer\">technology.amis.nl/2018/11/23/&hellip;</a>"},{"owner":{"account_id":4177132,"reputation":6156,"user_id":3423324,"accept_rate":67,"display_name":"luckydonald"},"score":0,"creation_date":1691154218,"post_id":57140286,"comment_id":135457118,"body_markdown":"Maybe you could put the information of the image here as a table instead? It takes on a lot of screen estate, and isn&#39;t really screen reader friendly. Also, the logo under Development being misaligned is bothering me a lot.","body":"Maybe you could put the information of the image here as a table instead? It takes on a lot of screen estate, and isn&#39;t really screen reader friendly. Also, the logo under Development being misaligned is bothering me a lot."}],"tags":[],"owner":{"account_id":8868539,"reputation":2197,"user_id":6622913,"display_name":"Istiaque Hossain"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1566711702,"creation_date":1563777143,"answer_id":57140286,"question_id":22358071,"body_markdown":" 1.  Oracle will deliver releases every three years, while OpenJDK will be released  every six months.\r\n 2. Oracle provides long term support for its releases. On the other\r\n    hand, OpenJDK supports the changes to a release only until the next\r\n    version is released.\r\n 3. Oracle JDK was licensed under Oracle Binary Code License Agreement,\r\n    whereas OpenJDK has the GNU General Public License (GNU GPL) version\r\n    2 with a linking exception.\r\n 4. Oracle product has Flight Recorder, Java Mission Control, and\r\n    Application Class-Data Sharing features, while OpenJDK has the Font\r\n    Renderer feature.Also, Oracle has more Garbage Collection options\r\n    and better renderers,\r\n 5. Oracle JDK is fully developed by Oracle Corporation whereas the\r\n    OpenJDK is developed by Oracle, OpenJDK, and the Java Community.\r\n    However, the top-notch companies like Red Hat, Azul Systems, IBM,\r\n    Apple Inc., SAP AG also take an active part in its development.\r\n\r\n\r\n----------\r\nFrom Java 11 turn to a big change \r\n\r\nOracle will change its historical “BCL” license with a combination of an open source  and commercial license\r\n\r\n   - Oracle’s kit for Java 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds, this option results in an error\r\n   - Oracle JDK offers a configuration to provide usage log data to the “Advanced Management Console” tool\r\n   - Oracle has always required third party cryptographic providers to be signed by a known certificate, while cryptography framework in OpenJDK has an open cryptographic interface, which means there is no restriction as to which providers can be used\r\n   - Oracle JDK 11 will continue to include installers, branding, and JRE packaging, whereas OpenJDK builds are currently available as zip and tar.gz files\r\n   - The javac –release command behaves differently for the Java 9 and Java 10 targets due to the presence of some additional modules in Oracle’s release\r\n   - The output of the java –version and java -fullversion commands will distinguish Oracle’s builds from OpenJDK builds\r\n\r\n\r\n----------\r\n\r\n\r\n----------\r\nUpdate  : **25-Aug-2019**\r\n\r\n\r\n----------\r\n\r\n\r\n----------\r\n[![enter image description here][1]][1]\r\n\r\nfor more details [oracle-vs-openjdk][2]\r\n\r\n  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nLJUc.jpg\r\n  [2]: https://www.educba.com/oracle-vs-openjdk/","title":"Differences between Oracle JDK and OpenJDK","body":"<ol>\n<li>Oracle will deliver releases every three years, while OpenJDK will be released  every six months.</li>\n<li>Oracle provides long term support for its releases. On the other\nhand, OpenJDK supports the changes to a release only until the next\nversion is released.</li>\n<li>Oracle JDK was licensed under Oracle Binary Code License Agreement,\nwhereas OpenJDK has the GNU General Public License (GNU GPL) version\n2 with a linking exception.</li>\n<li>Oracle product has Flight Recorder, Java Mission Control, and\nApplication Class-Data Sharing features, while OpenJDK has the Font\nRenderer feature.Also, Oracle has more Garbage Collection options\nand better renderers,</li>\n<li>Oracle JDK is fully developed by Oracle Corporation whereas the\nOpenJDK is developed by Oracle, OpenJDK, and the Java Community.\nHowever, the top-notch companies like Red Hat, Azul Systems, IBM,\nApple Inc., SAP AG also take an active part in its development.</li>\n</ol>\n\n<hr>\n\n<p>From Java 11 turn to a big change </p>\n\n<p>Oracle will change its historical “BCL” license with a combination of an open source  and commercial license</p>\n\n<ul>\n<li>Oracle’s kit for Java 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds, this option results in an error</li>\n<li>Oracle JDK offers a configuration to provide usage log data to the “Advanced Management Console” tool</li>\n<li>Oracle has always required third party cryptographic providers to be signed by a known certificate, while cryptography framework in OpenJDK has an open cryptographic interface, which means there is no restriction as to which providers can be used</li>\n<li>Oracle JDK 11 will continue to include installers, branding, and JRE packaging, whereas OpenJDK builds are currently available as zip and tar.gz files</li>\n<li>The javac –release command behaves differently for the Java 9 and Java 10 targets due to the presence of some additional modules in Oracle’s release</li>\n<li>The output of the java –version and java -fullversion commands will distinguish Oracle’s builds from OpenJDK builds</li>\n</ul>\n\n<hr>\n\n<hr>\n\n<p>Update  : <strong>25-Aug-2019</strong></p>\n\n<hr>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/nLJUc.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nLJUc.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>for more details <a href=\"https://www.educba.com/oracle-vs-openjdk/\" rel=\"noreferrer\">oracle-vs-openjdk</a></p>\n"},{"comments":[{"owner":{"account_id":45041,"reputation":1162,"user_id":132510,"display_name":"A. L. Flanagan"},"score":2,"creation_date":1576516095,"post_id":57873644,"comment_id":104916430,"body_markdown":"This may no longer be true as of JDK 13. There is a new license for Oracle JDK, according to Oracle: &quot;The new license permits certain uses, such as personal use and development use, at no cost -- but other uses authorized under prior Oracle JDK licenses may no longer be available&quot; . See https://www.oracle.com/downloads/licenses/javase-license1.html.","body":"This may no longer be true as of JDK 13. There is a new license for Oracle JDK, according to Oracle: &quot;The new license permits certain uses, such as personal use and development use, at no cost -- but other uses authorized under prior Oracle JDK licenses may no longer be available&quot; . See <a href=\"https://www.oracle.com/downloads/licenses/javase-license1.html\" rel=\"nofollow noreferrer\">oracle.com/downloads/licenses/javase-license1.html</a>."},{"owner":{"account_id":4493207,"reputation":317,"user_id":4287445,"display_name":"Nirav Shah"},"score":0,"creation_date":1582371719,"post_id":57873644,"comment_id":106759942,"body_markdown":"Just wanted to know, Current release of oracle jdk8u241 is free for production use ?","body":"Just wanted to know, Current release of oracle jdk8u241 is free for production use ?"}],"tags":[],"owner":{"account_id":1535526,"reputation":628,"user_id":1431690,"accept_rate":60,"display_name":"nettie"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1568128609,"creation_date":1568128088,"answer_id":57873644,"question_id":22358071,"body_markdown":"My understanding is that Oracle JDK can&#39;t be used in production, therefore I cannot legally use it (without paying), for the web application I am building for my company. I have to use OpenJDK. Please correct me if I am wrong! From [this article][1].\r\n\r\n&gt; Starting with Java 11, the Oracle JDK is restricted to development and\r\n&gt; testing environments. Oracle JDKs may only be used in production if\r\n&gt; you buy the commercial support. Instead, Oracle will provide Java\r\n&gt; builds based on OpenJDK for free which can be used in production. But\r\n&gt; for the official Oracle JDK the real roadmap will look like this:\r\n\r\n**UPDATE:** I&#39;m wrong. I can use Oracle JDK for free but won&#39;t get security updates after 6 mos and we&#39;ll have to assume the risk. Look at the above linked article section &quot;What does the new release train mean to my company?&quot;.\r\n\r\n\r\n  [1]: https://dev.karakun.com/java/2018/06/25/java-releases.html","title":"Differences between Oracle JDK and OpenJDK","body":"<p>My understanding is that Oracle JDK can't be used in production, therefore I cannot legally use it (without paying), for the web application I am building for my company. I have to use OpenJDK. Please correct me if I am wrong! From <a href=\"https://dev.karakun.com/java/2018/06/25/java-releases.html\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<blockquote>\n  <p>Starting with Java 11, the Oracle JDK is restricted to development and\n  testing environments. Oracle JDKs may only be used in production if\n  you buy the commercial support. Instead, Oracle will provide Java\n  builds based on OpenJDK for free which can be used in production. But\n  for the official Oracle JDK the real roadmap will look like this:</p>\n</blockquote>\n\n<p><strong>UPDATE:</strong> I'm wrong. I can use Oracle JDK for free but won't get security updates after 6 mos and we'll have to assume the risk. Look at the above linked article section \"What does the new release train mean to my company?\".</p>\n"},{"tags":[],"owner":{"account_id":19442866,"reputation":1,"user_id":14221171,"display_name":"Cyberradar academy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607938328,"creation_date":1607938328,"answer_id":65286556,"question_id":22358071,"body_markdown":"It is very close - our build process for Oracle JDK releases builds on OpenJDK 7 by adding just a couple of pieces, like the deployment code, which includes Oracle&#39;s implementation of the Java Plugin and Java WebStart, as well as some closed source third-party components like a graphics rasterizer, some open-source third party components, like Rhino, and a few bits and pieces here and there, like additional documentation or third-party fonts. Moving forward, we intend to open source all pieces of the Oracle JDK except those that we consider commercial features such as JRockit Mission Control (not yet available in Oracle JDK) and replace encumbered third-party components with open source alternatives to achieve closer parity between the codebases.\r\n\r\n&#183;         Yes, the garbage collection and other JVM parameters are the same.\r\n\r\n&#183;         The performance of GC is the same in both.","title":"Differences between Oracle JDK and OpenJDK","body":"<p>It is very close - our build process for Oracle JDK releases builds on OpenJDK 7 by adding just a couple of pieces, like the deployment code, which includes Oracle's implementation of the Java Plugin and Java WebStart, as well as some closed source third-party components like a graphics rasterizer, some open-source third party components, like Rhino, and a few bits and pieces here and there, like additional documentation or third-party fonts. Moving forward, we intend to open source all pieces of the Oracle JDK except those that we consider commercial features such as JRockit Mission Control (not yet available in Oracle JDK) and replace encumbered third-party components with open source alternatives to achieve closer parity between the codebases.</p>\n<p>·         Yes, the garbage collection and other JVM parameters are the same.</p>\n<p>·         The performance of GC is the same in both.</p>\n"},{"tags":[],"owner":{"account_id":14387497,"reputation":1756,"user_id":10393067,"display_name":"logbasex"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1624699273,"creation_date":1624699273,"answer_id":68140942,"question_id":22358071,"body_markdown":"**OpenJDK**\r\n\r\n- OpenJDK is opened source code, it is maintained and developed by Oracle, but allows communities and other companies to participate in this development, such as Red Hat, Azul Systems, IBM, Apple Inc, etc. OpenJDK is both a JDK product and a specification, any company or organization that wants to use OpenJDK to create a new variant must comply with those specifications.\r\nOpenJDK is developed by Oracle and the community contributions. We sometimes have issues on its stability; however, based on user feedback, it will be upgraded to perform better. OpenJDK is regularly updated, around every 6 months.\r\n\r\n**Oracle JDK**\r\n- Oracle JDK is maintained and developed by Oracle. It complies with OpenJDK specifications, but it is not opened source code. Oracle JDK is much better in terms of the JVM responsiveness and productivity. It focuses more on the stability due to its importance to the corporate customers.\r\n\r\nSource: https://o7planning.org/12571/history-of-java-and-the-difference-between-oracle-jdk-and-openjdk","title":"Differences between Oracle JDK and OpenJDK","body":"<p><strong>OpenJDK</strong></p>\n<ul>\n<li>OpenJDK is opened source code, it is maintained and developed by Oracle, but allows communities and other companies to participate in this development, such as Red Hat, Azul Systems, IBM, Apple Inc, etc. OpenJDK is both a JDK product and a specification, any company or organization that wants to use OpenJDK to create a new variant must comply with those specifications.\nOpenJDK is developed by Oracle and the community contributions. We sometimes have issues on its stability; however, based on user feedback, it will be upgraded to perform better. OpenJDK is regularly updated, around every 6 months.</li>\n</ul>\n<p><strong>Oracle JDK</strong></p>\n<ul>\n<li>Oracle JDK is maintained and developed by Oracle. It complies with OpenJDK specifications, but it is not opened source code. Oracle JDK is much better in terms of the JVM responsiveness and productivity. It focuses more on the stability due to its importance to the corporate customers.</li>\n</ul>\n<p>Source: <a href=\"https://o7planning.org/12571/history-of-java-and-the-difference-between-oracle-jdk-and-openjdk\" rel=\"noreferrer\">https://o7planning.org/12571/history-of-java-and-the-difference-between-oracle-jdk-and-openjdk</a></p>\n"}],"owner":{"account_id":1414701,"reputation":19249,"user_id":1340582,"accept_rate":53,"display_name":"user1340582"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":658784,"favorite_count":0,"down_vote_count":1,"up_vote_count":820,"accepted_answer_id":38685948,"answer_count":13,"score":819,"last_activity_date":1686650302,"creation_date":1394642192,"question_id":22358071,"body_markdown":"&gt; NOTE:  This question is from 2014.  As of Java 11 OpenJDK and Oracle\r\n&gt; JDK are converging.\r\n\r\nAre there any crucial differences between Oracle and OpenJDK?\r\n\r\nFor example, are the garbage collection and other JVM parameters the same?\r\n\r\nDoes GC work differently between the two?\r\n","title":"Differences between Oracle JDK and OpenJDK","body":"<blockquote>\n  <p>NOTE:  This question is from 2014.  As of Java 11 OpenJDK and Oracle\n  JDK are converging.</p>\n</blockquote>\n\n<p>Are there any crucial differences between Oracle and OpenJDK?</p>\n\n<p>For example, are the garbage collection and other JVM parameters the same?</p>\n\n<p>Does GC work differently between the two?</p>\n"},{"tags":["java","jgit","apache-sshd"],"answers":[{"tags":[],"owner":{"account_id":1970837,"reputation":1438,"user_id":1769835,"accept_rate":69,"display_name":"J&#246;rn Guy S&#252;&#223;"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622765164,"creation_date":1622765164,"answer_id":67830006,"question_id":67767455,"body_markdown":"I do not think you are missing anything. There is a callback hook that can be used on the commands, where you can insert the configuration code. I never got that to work with MINA. I  [asked a similar question][1], but never got an answer here. Please post if you find out how to do it, as this is a particularly challenging subject.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/66592989/jgit-transportconfigcallback-implementation-with-apache-mina","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>I do not think you are missing anything. There is a callback hook that can be used on the commands, where you can insert the configuration code. I never got that to work with MINA. I  <a href=\"https://stackoverflow.com/questions/66592989/jgit-transportconfigcallback-implementation-with-apache-mina\">asked a similar question</a>, but never got an answer here. Please post if you find out how to do it, as this is a particularly challenging subject.</p>\n"},{"comments":[{"owner":{"account_id":57416,"reputation":7345,"user_id":171991,"accept_rate":86,"display_name":"marverix"},"score":0,"creation_date":1653898014,"post_id":69280603,"comment_id":127954812,"body_markdown":"This is working for me as well. And I&#39;m using id_ed25519 key.","body":"This is working for me as well. And I&#39;m using id_ed25519 key."},{"owner":{"account_id":121799,"reputation":825,"user_id":315152,"accept_rate":71,"display_name":"juhanic"},"score":0,"creation_date":1656660568,"post_id":69280603,"comment_id":128631161,"body_markdown":"I ended up using this(which is more or less as I had it). I&#39;m not really happy with having to set the home directory to make it work, but it does work once you brute force everything into the home directory(which doesn&#39;t exactly exist on the docker container, and why I expected the ssh directory to be applied throughout)","body":"I ended up using this(which is more or less as I had it). I&#39;m not really happy with having to set the home directory to make it work, but it does work once you brute force everything into the home directory(which doesn&#39;t exactly exist on the docker container, and why I expected the ssh directory to be applied throughout)"},{"owner":{"account_id":2395793,"reputation":444,"user_id":2094616,"accept_rate":75,"display_name":"Priyal"},"score":0,"creation_date":1686502064,"post_id":69280603,"comment_id":134803989,"body_markdown":"you can set the passphrase for the key by setting a KeyPasswordProvider to the builder.\n .setKeyPasswordProvider(cp -&gt; new IdentityPasswordProvider(cp)\n        {\n          @Override\n          protected char[] getPassword(URIish uri, String message)\n          {\n            return passphrase.toCharArray();\n          }\n        })","body":"you can set the passphrase for the key by setting a KeyPasswordProvider to the builder.  .setKeyPasswordProvider(cp -&gt; new IdentityPasswordProvider(cp)         {           @Override           protected char[] getPassword(URIish uri, String message)           {             return passphrase.toCharArray();           }         })"}],"tags":[],"owner":{"account_id":6086349,"reputation":46,"user_id":4750243,"display_name":"Pratik Shende"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659515907,"creation_date":1632298924,"answer_id":69280603,"question_id":67767455,"body_markdown":"```\r\nFile sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\r\nSshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\r\n\t\t.setPreferredAuthentications(&quot;publickey&quot;)\r\n\t\t.setHomeDirectory(FS.DETECTED.userHome())\r\n\t\t.setSshDirectory(sshDir)\r\n\t\t.build(null);\r\n```\r\nThe above code worked for me, just need to have the `id_rsa` file in the `.ssh` folder.\r\nand the key has to be without a passphrase.\r\nStill looking for a way to pass a passphrase with a key.\r\n\r\nYou can use this link for better understanding: \r\nhttps://medium.com/@pratikshende99/how-to-clone-git-repo-with-ssh-url-by-executing-command-through-java-using-processbuilder-e162010266f5","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<pre><code>File sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\nSshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\n        .setPreferredAuthentications(&quot;publickey&quot;)\n        .setHomeDirectory(FS.DETECTED.userHome())\n        .setSshDirectory(sshDir)\n        .build(null);\n</code></pre>\n<p>The above code worked for me, just need to have the <code>id_rsa</code> file in the <code>.ssh</code> folder.\nand the key has to be without a passphrase.\nStill looking for a way to pass a passphrase with a key.</p>\n<p>You can use this link for better understanding:\n<a href=\"https://medium.com/@pratikshende99/how-to-clone-git-repo-with-ssh-url-by-executing-command-through-java-using-processbuilder-e162010266f5\" rel=\"nofollow noreferrer\">https://medium.com/@pratikshende99/how-to-clone-git-repo-with-ssh-url-by-executing-command-through-java-using-processbuilder-e162010266f5</a></p>\n"},{"tags":[],"owner":{"account_id":1548429,"reputation":3528,"user_id":1441374,"accept_rate":68,"display_name":"Omkar Shetkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641793759,"creation_date":1641782031,"answer_id":70647202,"question_id":67767455,"body_markdown":"With the JGit version 6.0.0.202111291000-r, I am able to execute a transport command using Apache MINA SSHD.\r\nFor this,\r\n\r\n - Set `CustomSshSessionFactory` in the callback for `TransportCommand`.\r\n\r\n```\r\ncmd.setTransportConfigCallback(\r\ntransport -&gt; {\r\n  if(transport instanceOf SshTransport) {\r\n    SshTransport sshTransport = (SshTransport) transport;\r\n    // Set passphrase using a CustomCredentialsProvider\r\n    sshTransport.setCredentialsProvider(new CustomCredentialProvider(passphrase));\r\n    // Provide private key to `CustomSshSessionFactory`\r\n    SshSessionFactory sshFactory = new CustomSshSessionFactory(privatekey);\r\n\tsshTransport.setSshSessionFactory(sshFactory);\r\n\r\n  }\r\n});\r\n\r\n```\r\n\r\n - Created implementation of `SshdSessionFactory`. You can use `SshdSessionFactoryBuilder` as well. \r\n\r\n```\r\npublic final class CustomSshSessionFactory extends SshdSessionFactory {\r\n\r\n\r\n    public static final Path SSH_DIR = Path.of(&quot;some-path&quot;);\r\n\r\n    private final Path privateKeyFile;\r\n    private final byte[] sshKey;\r\n\r\n    public CustomSshSessionFactory(byte[] sshKey) {\r\n        this.sshKey = sshKey;\r\n        privateKeyFile = Path.of(&quot;some-name&quot;, SSH_DIR.toString());\r\n    }\r\n\r\n    @Override\r\n    public File getSshDirectory() {\r\n        try {\r\n            return Files.createDirectories(SSH_DIR).toFile();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n// Return paths to private key files\r\n    @Override\r\n    protected List&lt;Path&gt; getDefaultIdentities(File sshDir) {\r\n        try {\r\n            Files.write(privateKeyFile, sshKey);\r\n            return Collections.singletonList(privateKeyFile);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return Collections.emptyList();\r\n    }\r\n\r\n}\r\n```\r\n\r\n- Created custom implementation of `CredentialsProvider`\r\n\r\n```\r\npublic class CustomCredentialProvider extends CredentialsProvider {\r\n\r\n    private final List&lt;String&gt; stringStore;\r\n\r\n    private final String passphrase;\r\n\r\n    public CustomCredentialProvider(String passphrase) {\r\n        this.passphrase = passphrase;\r\n    }\r\n\r\n    @Override\r\n    public boolean isInteractive() {\r\n        // Set this according to your requirement\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(CredentialItem... items) {\r\n        // Set this according to your requirement\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean get(URIish uri, CredentialItem... items)\r\n            throws UnsupportedCredentialItem {\r\n\r\n        for (CredentialItem item : items) {\r\n            if (item instanceof CredentialItem.InformationalMessage) {\r\n                continue;\r\n            }\r\n            if (item instanceof CredentialItem.YesNoType) {\r\n                // Set this according to your requirement\r\n                ((CredentialItem.YesNoType) item).setValue(true);\r\n            } else if (item instanceof CredentialItem.CharArrayType) {\r\n                if (passphrase != null) {\r\n                    ((CredentialItem.CharArrayType) item)\r\n                            .setValue(passphrase.toCharArray());\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else if (item instanceof CredentialItem.StringType) {\r\n                if (passphrase != null) {\r\n                    ((CredentialItem.StringType) item)\r\n                            .setValue(passphrase);\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n```\r\n\r\nHere, important things to note are \r\n\r\n- setting passphrase through custom implementations of `CredentialsProvider`\r\n- private key is provided as a file input to `SshSessionFactory`\r\n","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>With the JGit version 6.0.0.202111291000-r, I am able to execute a transport command using Apache MINA SSHD.\nFor this,</p>\n<ul>\n<li>Set <code>CustomSshSessionFactory</code> in the callback for <code>TransportCommand</code>.</li>\n</ul>\n<pre><code>cmd.setTransportConfigCallback(\ntransport -&gt; {\n  if(transport instanceOf SshTransport) {\n    SshTransport sshTransport = (SshTransport) transport;\n    // Set passphrase using a CustomCredentialsProvider\n    sshTransport.setCredentialsProvider(new CustomCredentialProvider(passphrase));\n    // Provide private key to `CustomSshSessionFactory`\n    SshSessionFactory sshFactory = new CustomSshSessionFactory(privatekey);\n    sshTransport.setSshSessionFactory(sshFactory);\n\n  }\n});\n\n</code></pre>\n<ul>\n<li>Created implementation of <code>SshdSessionFactory</code>. You can use <code>SshdSessionFactoryBuilder</code> as well.</li>\n</ul>\n<pre><code>public final class CustomSshSessionFactory extends SshdSessionFactory {\n\n\n    public static final Path SSH_DIR = Path.of(&quot;some-path&quot;);\n\n    private final Path privateKeyFile;\n    private final byte[] sshKey;\n\n    public CustomSshSessionFactory(byte[] sshKey) {\n        this.sshKey = sshKey;\n        privateKeyFile = Path.of(&quot;some-name&quot;, SSH_DIR.toString());\n    }\n\n    @Override\n    public File getSshDirectory() {\n        try {\n            return Files.createDirectories(SSH_DIR).toFile();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n// Return paths to private key files\n    @Override\n    protected List&lt;Path&gt; getDefaultIdentities(File sshDir) {\n        try {\n            Files.write(privateKeyFile, sshKey);\n            return Collections.singletonList(privateKeyFile);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return Collections.emptyList();\n    }\n\n}\n</code></pre>\n<ul>\n<li>Created custom implementation of <code>CredentialsProvider</code></li>\n</ul>\n<pre><code>public class CustomCredentialProvider extends CredentialsProvider {\n\n    private final List&lt;String&gt; stringStore;\n\n    private final String passphrase;\n\n    public CustomCredentialProvider(String passphrase) {\n        this.passphrase = passphrase;\n    }\n\n    @Override\n    public boolean isInteractive() {\n        // Set this according to your requirement\n        return false;\n    }\n\n    @Override\n    public boolean supports(CredentialItem... items) {\n        // Set this according to your requirement\n        return true;\n    }\n\n    @Override\n    public boolean get(URIish uri, CredentialItem... items)\n            throws UnsupportedCredentialItem {\n\n        for (CredentialItem item : items) {\n            if (item instanceof CredentialItem.InformationalMessage) {\n                continue;\n            }\n            if (item instanceof CredentialItem.YesNoType) {\n                // Set this according to your requirement\n                ((CredentialItem.YesNoType) item).setValue(true);\n            } else if (item instanceof CredentialItem.CharArrayType) {\n                if (passphrase != null) {\n                    ((CredentialItem.CharArrayType) item)\n                            .setValue(passphrase.toCharArray());\n                } else {\n                    return false;\n                }\n            } else if (item instanceof CredentialItem.StringType) {\n                if (passphrase != null) {\n                    ((CredentialItem.StringType) item)\n                            .setValue(passphrase);\n                } else {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\n</code></pre>\n<p>Here, important things to note are</p>\n<ul>\n<li>setting passphrase through custom implementations of <code>CredentialsProvider</code></li>\n<li>private key is provided as a file input to <code>SshSessionFactory</code></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":10455387,"reputation":1093,"user_id":8387076,"display_name":"Wrichik Basu"},"score":0,"creation_date":1647794674,"post_id":71547112,"comment_id":126455407,"body_markdown":"Could you elaborate your answer, stating the generic structure of the `known_hosts` file, and where it should be placed?","body":"Could you elaborate your answer, stating the generic structure of the <code>known_hosts</code> file, and where it should be placed?"},{"owner":{"account_id":24619926,"reputation":1,"user_id":18520441,"display_name":"Vakhtang Donadze"},"score":0,"creation_date":1647883189,"post_id":71547112,"comment_id":126478200,"body_markdown":"So, I had the same code as in answer by Pratik Shende. The only difference being, instead of default `/.ssh` I wanted to use ssh keys from my custom location.  for example `/.ssh/custom-dir` I changed value of `sshDir`  to appropriate one, however I was getting **Server key did not validate** error. finally when I placed `known_hosts` file in `/.ssh/custom-dir` it worked. Regarding the structure of `known_hosts` file you can find it here: [link](https://www.techrepublic.com/article/how-to-easily-add-an-ssh-fingerprint-to-your-knownhosts-file-in-linux/)","body":"So, I had the same code as in answer by Pratik Shende. The only difference being, instead of default <code>&#47;.ssh</code> I wanted to use ssh keys from my custom location.  for example <code>&#47;.ssh&#47;custom-dir</code> I changed value of <code>sshDir</code>  to appropriate one, however I was getting <b>Server key did not validate</b> error. finally when I placed <code>known_hosts</code> file in <code>&#47;.ssh&#47;custom-dir</code> it worked. Regarding the structure of <code>known_hosts</code> file you can find it here: <a href=\"https://www.techrepublic.com/article/how-to-easily-add-an-ssh-fingerprint-to-your-knownhosts-file-in-linux/\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":24619926,"reputation":1,"user_id":18520441,"display_name":"Vakhtang Donadze"},"score":0,"creation_date":1647883450,"post_id":71547112,"comment_id":126478288,"body_markdown":"Surely there are other, more complex solutions trough `CredentialsProvider` if you dont want to manually manage  `known_hosts` but for the basic code using `SshdSessionFactoryBuilder` just placing `known_hosts` in the same directory as ssh keys worked for me.","body":"Surely there are other, more complex solutions trough <code>CredentialsProvider</code> if you dont want to manually manage  <code>known_hosts</code> but for the basic code using <code>SshdSessionFactoryBuilder</code> just placing <code>known_hosts</code> in the same directory as ssh keys worked for me."}],"tags":[],"owner":{"account_id":24619926,"reputation":1,"user_id":18520441,"display_name":"Vakhtang Donadze"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647782435,"creation_date":1647782435,"answer_id":71547112,"question_id":67767455,"body_markdown":"I&#39;ve been facing the same problem for several days. For me the solution was adding `known_hosts` file to my custom directory for ssh keys. Also make sure that your keys have default names.","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>I've been facing the same problem for several days. For me the solution was adding <code>known_hosts</code> file to my custom directory for ssh keys. Also make sure that your keys have default names.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":2,"creation_date":1659720894,"post_id":73217697,"comment_id":129369942,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73217697/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11761764,"reputation":11,"user_id":8607566,"display_name":"JMCui"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686650223,"creation_date":1659511061,"answer_id":73217697,"question_id":67767455,"body_markdown":"With following one can set the passphrase for the private key while building the `SshdSessionFactory`.\r\n\r\n      File sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\r\n      SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder().setPreferredAuthentications(&quot;publickey&quot;)\r\n        .setHomeDirectory(FS.DETECTED.userHome()).setSshDirectory(sshDir)\r\n        .setKeyPasswordProvider(cp -&gt; new IdentityPasswordProvider(cp)\r\n        {\r\n          @Override\r\n          protected char[] getPassword(URIish uri, String message)\r\n          {\r\n            return passphrase.toCharArray();\r\n          }\r\n        }).build(null);\r\n-------------------------------------\r\nHow to set the KeyPasswordProvider with Kotlin (Original content before edit)\r\n\r\n    sshdSessionFactoryBuilder.setKeyPasswordProvider {\r\n                            object : IdentityPasswordProvider(it) {\r\n                                override fun getPassword(uri: URIish?, message: String?): CharArray {\r\n                                    return sshPassword.toCharArray()\r\n                                }\r\n\r\n                            }\r\n                        }","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>With following one can set the passphrase for the private key while building the <code>SshdSessionFactory</code>.</p>\n<pre><code>  File sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\n  SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder().setPreferredAuthentications(&quot;publickey&quot;)\n    .setHomeDirectory(FS.DETECTED.userHome()).setSshDirectory(sshDir)\n    .setKeyPasswordProvider(cp -&gt; new IdentityPasswordProvider(cp)\n    {\n      @Override\n      protected char[] getPassword(URIish uri, String message)\n      {\n        return passphrase.toCharArray();\n      }\n    }).build(null);\n</code></pre>\n<hr />\n<p>How to set the KeyPasswordProvider with Kotlin (Original content before edit)</p>\n<pre><code>sshdSessionFactoryBuilder.setKeyPasswordProvider {\n                        object : IdentityPasswordProvider(it) {\n                            override fun getPassword(uri: URIish?, message: String?): CharArray {\n                                return sshPassword.toCharArray()\n                            }\n\n                        }\n                    }\n</code></pre>\n"}],"owner":{"account_id":121799,"reputation":825,"user_id":315152,"accept_rate":71,"display_name":"juhanic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5880,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69280603,"answer_count":5,"score":3,"last_activity_date":1686650223,"creation_date":1622430119,"question_id":67767455,"body_markdown":"I&#39;m running git commands using jgit from a java application running in a kubernetes container, so I want to allow customizing the ssh key storage location and the like.\r\n\r\nMy first approach was with ssh supported with the jsch implementation but ran into troubles(I checked the methodology here https://stackoverflow.com/questions/13686643/using-keys-with-jgit-to-access-a-git-repository-securely and have had no luck with it) so I&#39;m adding the ssh support via the org.eclipse.jgit.ssh.apache artifact. Using an external ssh app isn&#39;t really an option due to the way this is being packaged/distributed.\r\n\r\nI haven&#39;t had much luck finding information but assume that I just want to be emulating the jsch approach and replacing the session factory used in calls. Initially the approach I took was setting up a session factory with the desired ssh path\r\n\r\n```\r\n        final SshdSessionFactoryBuilder builder = new SshdSessionFactoryBuilder();\r\n        builder.setHomeDirectory(new File(homeDir))\r\n                .setConfigFile((f)-&gt; new File(f, &quot;config&quot;))\r\n                .setSshDirectory(new File(sshDir));\r\n\r\n        return builder.build(null);\r\n```\r\n\r\nand passing this factory to the various commands.\r\n\r\n```\r\nfinal CloneCommand cmd = Git.cloneRepository().setDirectory(new File(basePath))\r\n                            .setURI(remotePath);\r\n                    if (sshSessionFactory != null) {\r\n                        cmd.setTransportConfigCallback(new TransportConfigCallback() {\r\n                            @Override\r\n                            public void configure(Transport transport) {\r\n                                final SshTransport sshTransport = (SshTransport)transport;\r\n                                ((SshTransport) transport).setSshSessionFactory(sshSessionFactory);\r\n                            }\r\n                        });\r\n                    }\r\n                    git = cmd.call();\r\n```\r\n\r\nHowever with this approach, commands like clone would fail to auth with the git repo, attempting to use the default ssh keys. On following this in the debugger I found that inside the clone command, it&#39;s generating a fetch command but isn&#39;t passing the session factory or session to it, so the fetch simply builds a default config and fails to auth.\r\n\r\n```\r\n2021-05-31 11:48:09,793 INFO  GitChainRepository.java:114 - Couldn&#39;t find git dir, creating it\r\n2021-05-31 11:48:10,748 INFO  AbstractSecurityProviderRegistrar.java:112 - getOrCreateProvider(EdDSA) created instance of net.i2p.crypto.eddsa.EdDSASecurityProvider\r\n2021-05-31 11:48:10,970 INFO  DefaultIoServiceFactoryFactory.java:67 - No detected/configured IoServiceFactoryFactory using Nio2ServiceFactoryFactory\r\n2021-05-31 11:48:12,206 INFO  GitChainRepository.java:133 - Initialized by clone of remote\r\n2021-05-31 11:48:12,207 INFO  GitChainRepository.java:159 - Prepping remote repo git@ghe.snip/gitchainstore-synctest.git\r\n2021-05-31 11:48:12,318 WARN  LoggingUtils.java:634 - exceptionCaught(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22])[state=Opened] SshException: Server key did not validate\r\norg.apache.sshd.common.SshException: Server key did not validate\r\n\tat org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:?]\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37) [sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127) [?:?]\r\n\tat sun.nio.ch.Invoker$2.run(Invoker.java:219) [?:?]\r\n\tat sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n\tat java.lang.Thread.run(Thread.java:834) [?:?]\r\n2021-05-31 11:48:12,331 INFO  SessionHelper.java:1034 - Disconnecting(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22]): SSH2_DISCONNECT_HOST_KEY_NOT_VERIFIABLE - Server key did not validate\r\n\r\norg.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\r\n\r\n\tat org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224)\r\n\tat org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263)\r\n\tat snip.GitChainRepository.setupRemote(GitChainRepository.java:173)\r\n\tat snip.GitChainRepository.start(GitChainRepository.java:144)\r\n\tat snip.GitChainRepositoryTest.setupGit(GitChainRepositoryTest.java:59)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\r\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1)\r\n\tat org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107)\r\n\tat org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281)\r\n\tat org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153)\r\n\tat org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142)\r\n\tat org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94)\r\n\tat org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309)\r\n\tat org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213)\r\n\t... 31 more\r\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\r\n\tat org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:126)\r\n\tat org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39)\r\n\tat org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32)\r\n\tat org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:68)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:164)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:99)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:235)\r\n\t... 39 more\r\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\r\n\tat org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388)\r\n\tat org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64)\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358)\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335)\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332)\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37)\r\n\tat java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)\r\n\tat java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)\r\n\tat java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\n\r\nProcess finished with exit code -1\r\n\r\n```\r\n\r\nEventually I settled to just overriding the default session factory, which sort of works, but not really.\r\n\r\n```\r\nSshSessionFactory.setInstance(sshSessionFactory);\r\n```\r\n\r\nThis ends up working for a bit but then falls apart unable to create new sessions from the factory(I haven&#39;t figured why but I&#39;d prefer not to be overriding the default instance anyway hence posting this question)\r\n\r\n```\r\norg.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\r\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at snip.GitChainRepository.updateRemote(GitChainRepository.java:190) ~[core-0.1.0-28.jar:?]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\r\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n        at java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        ... 8 more\r\nCaused by: java.io.IOException: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.register(SshdSessionFactory.java:272) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:234) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        ... 8 more\r\n```\r\n\r\nSo in conclusion: *What is the correct way to customize ssh session creation and make sure it persists through porcelain commands that call other commands*? Is this a bug with jgit? Am I missing something, or doing something here wrong?","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>I'm running git commands using jgit from a java application running in a kubernetes container, so I want to allow customizing the ssh key storage location and the like.</p>\n<p>My first approach was with ssh supported with the jsch implementation but ran into troubles(I checked the methodology here <a href=\"https://stackoverflow.com/questions/13686643/using-keys-with-jgit-to-access-a-git-repository-securely\">Using Keys with JGit to Access a Git Repository Securely</a> and have had no luck with it) so I'm adding the ssh support via the org.eclipse.jgit.ssh.apache artifact. Using an external ssh app isn't really an option due to the way this is being packaged/distributed.</p>\n<p>I haven't had much luck finding information but assume that I just want to be emulating the jsch approach and replacing the session factory used in calls. Initially the approach I took was setting up a session factory with the desired ssh path</p>\n<pre><code>        final SshdSessionFactoryBuilder builder = new SshdSessionFactoryBuilder();\n        builder.setHomeDirectory(new File(homeDir))\n                .setConfigFile((f)-&gt; new File(f, &quot;config&quot;))\n                .setSshDirectory(new File(sshDir));\n\n        return builder.build(null);\n</code></pre>\n<p>and passing this factory to the various commands.</p>\n<pre><code>final CloneCommand cmd = Git.cloneRepository().setDirectory(new File(basePath))\n                            .setURI(remotePath);\n                    if (sshSessionFactory != null) {\n                        cmd.setTransportConfigCallback(new TransportConfigCallback() {\n                            @Override\n                            public void configure(Transport transport) {\n                                final SshTransport sshTransport = (SshTransport)transport;\n                                ((SshTransport) transport).setSshSessionFactory(sshSessionFactory);\n                            }\n                        });\n                    }\n                    git = cmd.call();\n</code></pre>\n<p>However with this approach, commands like clone would fail to auth with the git repo, attempting to use the default ssh keys. On following this in the debugger I found that inside the clone command, it's generating a fetch command but isn't passing the session factory or session to it, so the fetch simply builds a default config and fails to auth.</p>\n<pre><code>2021-05-31 11:48:09,793 INFO  GitChainRepository.java:114 - Couldn't find git dir, creating it\n2021-05-31 11:48:10,748 INFO  AbstractSecurityProviderRegistrar.java:112 - getOrCreateProvider(EdDSA) created instance of net.i2p.crypto.eddsa.EdDSASecurityProvider\n2021-05-31 11:48:10,970 INFO  DefaultIoServiceFactoryFactory.java:67 - No detected/configured IoServiceFactoryFactory using Nio2ServiceFactoryFactory\n2021-05-31 11:48:12,206 INFO  GitChainRepository.java:133 - Initialized by clone of remote\n2021-05-31 11:48:12,207 INFO  GitChainRepository.java:159 - Prepping remote repo git@ghe.snip/gitchainstore-synctest.git\n2021-05-31 11:48:12,318 WARN  LoggingUtils.java:634 - exceptionCaught(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22])[state=Opened] SshException: Server key did not validate\norg.apache.sshd.common.SshException: Server key did not validate\n    at org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n    at org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at java.security.AccessController.doPrivileged(Native Method) ~[?:?]\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37) [sshd-osgi-2.6.0.jar:2.6.0]\n    at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127) [?:?]\n    at sun.nio.ch.Invoker$2.run(Invoker.java:219) [?:?]\n    at sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\n    at java.lang.Thread.run(Thread.java:834) [?:?]\n2021-05-31 11:48:12,331 INFO  SessionHelper.java:1034 - Disconnecting(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22]): SSH2_DISCONNECT_HOST_KEY_NOT_VERIFIABLE - Server key did not validate\n\norg.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\n\n    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224)\n    at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263)\n    at snip.GitChainRepository.setupRemote(GitChainRepository.java:173)\n    at snip.GitChainRepository.start(GitChainRepository.java:144)\n    at snip.GitChainRepositoryTest.setupGit(GitChainRepositoryTest.java:59)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248)\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1)\n    at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107)\n    at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281)\n    at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153)\n    at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142)\n    at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94)\n    at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309)\n    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213)\n    ... 31 more\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\n    at org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:126)\n    at org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39)\n    at org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32)\n    at org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:68)\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:164)\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:99)\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:235)\n    ... 39 more\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\n    at org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583)\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611)\n    at org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500)\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428)\n    at org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463)\n    at org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388)\n    at org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197)\n    at org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64)\n    at org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358)\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335)\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332)\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37)\n    at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)\n    at java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)\n    at java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n\n\nProcess finished with exit code -1\n\n</code></pre>\n<p>Eventually I settled to just overriding the default session factory, which sort of works, but not really.</p>\n<pre><code>SshSessionFactory.setInstance(sshSessionFactory);\n</code></pre>\n<p>This ends up working for a bit but then falls apart unable to create new sessions from the factory(I haven't figured why but I'd prefer not to be overriding the default instance anyway hence posting this question)</p>\n<pre><code>org.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at snip.GitChainRepository.updateRemote(GitChainRepository.java:190) ~[core-0.1.0-28.jar:?]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\n        at java.lang.Thread.run(Thread.java:829) [?:?]\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        ... 8 more\nCaused by: java.io.IOException: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.register(SshdSessionFactory.java:272) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:234) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        ... 8 more\n</code></pre>\n<p>So in conclusion: <em>What is the correct way to customize ssh session creation and make sure it persists through porcelain commands that call other commands</em>? Is this a bug with jgit? Am I missing something, or doing something here wrong?</p>\n"},{"tags":["java","apache-commons-cli"],"answers":[{"comments":[{"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"score":0,"creation_date":1476696012,"post_id":40082497,"comment_id":67437858,"body_markdown":"your solution it is more like defining new exception. But in my case ParseException is not throw from parse method, when args contains invalid options.","body":"your solution it is more like defining new exception. But in my case ParseException is not throw from parse method, when args contains invalid options."},{"owner":{"account_id":9297011,"reputation":797,"user_id":6903610,"display_name":"Jay Prakash"},"score":0,"creation_date":1476696294,"post_id":40082497,"comment_id":67438037,"body_markdown":"@ArturSkrzydło Please read Answer carefully second part of answer containing you code with modification and third part of answer showing change  in calling of method","body":"@ArturSkrzydło Please read Answer carefully second part of answer containing you code with modification and third part of answer showing change  in calling of method"},{"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"score":0,"creation_date":1476700888,"post_id":40082497,"comment_id":67440995,"body_markdown":"you&#39;ve created new Exception and throw it when ParseExcpetion is thrown from parse method. It has not any sense in this case, because i never reach the catch statement when i define argument which is not valid.","body":"you&#39;ve created new Exception and throw it when ParseExcpetion is thrown from parse method. It has not any sense in this case, because i never reach the catch statement when i define argument which is not valid."},{"owner":{"account_id":9297011,"reputation":797,"user_id":6903610,"display_name":"Jay Prakash"},"score":0,"creation_date":1476702010,"post_id":40082497,"comment_id":67441747,"body_markdown":"@ArturSkrzydło now see the answer if parse get exception it will throw ParseException","body":"@ArturSkrzydło now see the answer if parse get exception it will throw ParseException"},{"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"score":0,"creation_date":1476703074,"post_id":40082497,"comment_id":67442444,"body_markdown":"Look at my question again - &#39;I was thinking, that invalid options cause parser to throw ParseException, however it&#39;s not.&#39; It means that when i type invalid option name then ParseException is not thrown. So your solution is pointless. Additionaly what is sense in rethrowing exception. I could just ommit try-catch statement and define it in &#39;throws&#39;  in method declaration","body":"Look at my question again - &#39;I was thinking, that invalid options cause parser to throw ParseException, however it&#39;s not.&#39; It means that when i type invalid option name then ParseException is not thrown. So your solution is pointless. Additionaly what is sense in rethrowing exception. I could just ommit try-catch statement and define it in &#39;throws&#39;  in method declaration"}],"tags":[],"owner":{"account_id":9297011,"reputation":797,"user_id":6903610,"display_name":"Jay Prakash"},"comment_count":5,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1476701949,"creation_date":1476695608,"answer_id":40082497,"question_id":40082191,"body_markdown":"Yes you can , you have to create custom Exception like:\r\n\r\n    public class ParseException extends Exception{\r\n            ParseException(String msg){\r\n                 super(msg);  \r\n            }\r\n    }\r\n\r\nAnd into code :\r\n\r\n   \r\n\r\n    CommandLineParser parser = new BasicParser();\r\n        try {\r\n            CommandLine line = parser.parse(getOptions(), args);\r\n        }\r\n        catch( Exception exp ) {\r\n           throw new ParseException(&quot;Invalid Arguments&quot;);\r\n        }       \r\n        return true;\r\nAnd above method should throw \r\n\r\n \r\n\r\n    throws ParseException\r\n\r\nSo its caller if pass invalid argument will get ParseException \r\n\r\n","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>Yes you can , you have to create custom Exception like:</p>\n\n<pre><code>public class ParseException extends Exception{\n        ParseException(String msg){\n             super(msg);  \n        }\n}\n</code></pre>\n\n<p>And into code :</p>\n\n<pre><code>CommandLineParser parser = new BasicParser();\n    try {\n        CommandLine line = parser.parse(getOptions(), args);\n    }\n    catch( Exception exp ) {\n       throw new ParseException(\"Invalid Arguments\");\n    }       \n    return true;\n</code></pre>\n\n<p>And above method should throw </p>\n\n<pre><code>throws ParseException\n</code></pre>\n\n<p>So its caller if pass invalid argument will get ParseException </p>\n"},{"comments":[{"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"score":0,"creation_date":1476717170,"post_id":40089868,"comment_id":67452488,"body_markdown":"Ok, i understand this, but i thought that in commons-cli library i would be able to validate ALL command lines argument","body":"Ok, i understand this, but i thought that in commons-cli library i would be able to validate ALL command lines argument"},{"owner":{"account_id":8784377,"reputation":376,"user_id":6566965,"display_name":"adamreeve"},"score":0,"creation_date":1476720405,"post_id":40089868,"comment_id":67454612,"body_markdown":"Sadly, not as far as I know :( Which is why you can often tell when something uses commons-cli - because everything is a `--` option :)","body":"Sadly, not as far as I know :( Which is why you can often tell when something uses commons-cli - because everything is a <code>--</code> option :)"}],"tags":[],"owner":{"account_id":8784377,"reputation":376,"user_id":6566965,"display_name":"adamreeve"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1476716858,"creation_date":1476716858,"answer_id":40089868,"question_id":40082191,"body_markdown":"Command lines have two types of entry other than the program name, Options (which are specified with a `-` or `--`) and what I will call parameters (which probably have a better name but I don&#39;t know what it is!) which don&#39;t have a prefix. For example, for `ls`:\r\n\r\n`ls -la foo`\r\n\r\nThe options are `-l` and `-a`, and parameter is `foo` (the directory to list). When you parse a command line with commons-cli it _only_ cares about the options, it ignores everything else. Which is why it doesn&#39;t fail if you add `Test` (not an option) but does if you add `-Test`. ","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>Command lines have two types of entry other than the program name, Options (which are specified with a <code>-</code> or <code>--</code>) and what I will call parameters (which probably have a better name but I don't know what it is!) which don't have a prefix. For example, for <code>ls</code>:</p>\n\n<p><code>ls -la foo</code></p>\n\n<p>The options are <code>-l</code> and <code>-a</code>, and parameter is <code>foo</code> (the directory to list). When you parse a command line with commons-cli it <em>only</em> cares about the options, it ignores everything else. Which is why it doesn't fail if you add <code>Test</code> (not an option) but does if you add <code>-Test</code>. </p>\n"},{"tags":[],"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478159765,"creation_date":1478159765,"answer_id":40396355,"question_id":40082191,"body_markdown":"Although answer provided by [adamreeve][1] is really fine and I accept it, I&#39;ve decided to extend default parser capabilities to prevent typing invalid option even without &#39;-&#39; or &#39;--&#39; symbols. I made my own custom parser :\r\n\r\n    public class StrictParser extends Parser {\r\n    \r\n    \t@Override\r\n    \tprotected String[] flatten(Options opts, String[] arguments, boolean stopAtNonOption) {\r\n    \t\treturn arguments;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic CommandLine parse(Options options, String[] arguments, boolean stopAtNonOption) throws ParseException {\r\n    \r\n    \t\tCommandLine cmd = null;\r\n    \t\tList&lt;String&gt; tokenList = Arrays.asList(flatten(getOptions(), arguments, stopAtNonOption));\r\n    \t\tListIterator&lt;String&gt; iterator = tokenList.listIterator();\r\n    \r\n    \t\tboolean eatTheRest = false;\r\n    \t\tsetOptions(options);\r\n    \t\tcmd = super.parse(options, arguments, stopAtNonOption);\r\n    \r\n    \t\twhile (iterator.hasNext()) {\r\n    \t\t\tString token = (String) iterator.next();\r\n    \t\t\tif (!token.startsWith(&quot;--&quot;) &amp;&amp; !token.startsWith(&quot;-&quot;)) {\r\n    \t\t\t\tif (stopAtNonOption) {\r\n    \t\t\t            throw new UnrecognizedOptionException(&quot;Unrecognized option: &quot; + token +&quot;. Every option must start with &#39;--&#39; or &#39;-&#39;&quot;, token);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\teatTheRest = true;\r\n    \t\t\t}\r\n    \r\n    \t\t\tif (eatTheRest) {\r\n    \t\t\t\titerator.next();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn cmd;\r\n    \t}\r\n    }\r\n\r\nIn this solution any cli parameters typed without &#39;--&#39; or &#39;-&#39; throw UnrecognizedOptionException. This is no perfect solution, but it show how it can be done, and can be a good starting point to other solutions. For instance we could accept options without &#39;--&#39; and &#39;-&#39; but check if that option is correct. Then we need to change \r\n\r\n            if (stopAtNonOption) {\r\n                    throw new UnrecognizedOptionException(&quot;Unrecognized option: &quot; + token +&quot;. Every option must start with &#39;--&#39; or &#39;-&#39;&quot;, token);\r\n            }\r\n\r\nto \r\n\r\n\t\t\tif (stopAtNonOption) {\t\t\t\t\t\r\n\t\t\t\tif(!getOptions().hasOption(token)){\t\t\t\t\t\t\r\n\t\t\t\t\tthrow new UnrecognizedOptionException(\r\n\t\t\t\t\t\t\t&quot;Unrecognized option: &quot; + token, token);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n(ignore this ugly three nested ifs ;))\r\nThis also accepts only one argument per option,but as I&#39;ve mentioned it&#39;s only starting point to implement other modifications to default parser\r\n\r\n  [1]: https://stackoverflow.com/users/6566965/adamreeve","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>Although answer provided by <a href=\"https://stackoverflow.com/users/6566965/adamreeve\">adamreeve</a> is really fine and I accept it, I've decided to extend default parser capabilities to prevent typing invalid option even without '-' or '--' symbols. I made my own custom parser :</p>\n\n<pre><code>public class StrictParser extends Parser {\n\n    @Override\n    protected String[] flatten(Options opts, String[] arguments, boolean stopAtNonOption) {\n        return arguments;\n    }\n\n    @Override\n    public CommandLine parse(Options options, String[] arguments, boolean stopAtNonOption) throws ParseException {\n\n        CommandLine cmd = null;\n        List&lt;String&gt; tokenList = Arrays.asList(flatten(getOptions(), arguments, stopAtNonOption));\n        ListIterator&lt;String&gt; iterator = tokenList.listIterator();\n\n        boolean eatTheRest = false;\n        setOptions(options);\n        cmd = super.parse(options, arguments, stopAtNonOption);\n\n        while (iterator.hasNext()) {\n            String token = (String) iterator.next();\n            if (!token.startsWith(\"--\") &amp;&amp; !token.startsWith(\"-\")) {\n                if (stopAtNonOption) {\n                        throw new UnrecognizedOptionException(\"Unrecognized option: \" + token +\". Every option must start with '--' or '-'\", token);\n                }\n            } else {\n                eatTheRest = true;\n            }\n\n            if (eatTheRest) {\n                iterator.next();\n            }\n        }\n        return cmd;\n    }\n}\n</code></pre>\n\n<p>In this solution any cli parameters typed without '--' or '-' throw UnrecognizedOptionException. This is no perfect solution, but it show how it can be done, and can be a good starting point to other solutions. For instance we could accept options without '--' and '-' but check if that option is correct. Then we need to change </p>\n\n<pre><code>        if (stopAtNonOption) {\n                throw new UnrecognizedOptionException(\"Unrecognized option: \" + token +\". Every option must start with '--' or '-'\", token);\n        }\n</code></pre>\n\n<p>to </p>\n\n<pre><code>        if (stopAtNonOption) {                  \n            if(!getOptions().hasOption(token)){                     \n                throw new UnrecognizedOptionException(\n                        \"Unrecognized option: \" + token, token);\n            }\n        }\n</code></pre>\n\n<p>(ignore this ugly three nested ifs ;))\nThis also accepts only one argument per option,but as I've mentioned it's only starting point to implement other modifications to default parser</p>\n"}],"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2555,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40089868,"answer_count":3,"score":2,"last_activity_date":1686650198,"creation_date":1476694652,"question_id":40082191,"body_markdown":"I would like to have a printed usage help message, when an option which is specified as a program argument is not valid (not available in the predefined options list).\r\n\r\n    \t  CommandLineParser parser = new BasicParser();\r\n\t    try {\r\n\t        CommandLine line = parser.parse(getOptions(), args);\r\n\t    }\r\n\t    catch( ParseException exp ) {\r\n\t\t\tgetLogger().info(&quot;Invalid command line option name. &quot;+exp.getMessage());\r\n\t        HelpFormatter hf = new HelpFormatter();\r\n\t        hf.printHelp(&quot;destDir&quot;, getOptions());\r\n\t        return false;\r\n\t    }\t    \r\n\t    return true;\r\n\r\nI type as a parameter the &#39;Test&#39; string. I was thinking, that invalid options cause the parser to throw ParseException, however they do not. How can I achieve that behaviour? Is it possible with this library at all? Now it just omits parameters which are not valid.  \r\n\r\n**UPDATE**\r\nActually it throws exception when option has a &#39;-&#39; prefix. So &#39;-Test&#39; cause throwing an exception, but &#39;Test&#39; does not. My question anyway is still valid, how to force parser to throw an exception on an invalid parameter.","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>I would like to have a printed usage help message, when an option which is specified as a program argument is not valid (not available in the predefined options list).</p>\n<pre><code>      CommandLineParser parser = new BasicParser();\n    try {\n        CommandLine line = parser.parse(getOptions(), args);\n    }\n    catch( ParseException exp ) {\n        getLogger().info(&quot;Invalid command line option name. &quot;+exp.getMessage());\n        HelpFormatter hf = new HelpFormatter();\n        hf.printHelp(&quot;destDir&quot;, getOptions());\n        return false;\n    }       \n    return true;\n</code></pre>\n<p>I type as a parameter the 'Test' string. I was thinking, that invalid options cause the parser to throw ParseException, however they do not. How can I achieve that behaviour? Is it possible with this library at all? Now it just omits parameters which are not valid.</p>\n<p><strong>UPDATE</strong>\nActually it throws exception when option has a '-' prefix. So '-Test' cause throwing an exception, but 'Test' does not. My question anyway is still valid, how to force parser to throw an exception on an invalid parameter.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686644383,"post_id":76462938,"comment_id":134823577,"body_markdown":"It depends on the library. Some, like jOOQ, support properly parameterized queries and return types. Some do not. I&#39;m not sure if JPA does, in this case. So if your library doesn&#39;t allow you to write this in a type-safe way, a cast is indeed the way to go.","body":"It depends on the library. Some, like jOOQ, support properly parameterized queries and return types. Some do not. I&#39;m not sure if JPA does, in this case. So if your library doesn&#39;t allow you to write this in a type-safe way, a cast is indeed the way to go."}],"answers":[{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686646653,"creation_date":1686646653,"answer_id":76463250,"question_id":76462938,"body_markdown":"There really isn&#39;t another good way to solve this. You can&#39;t do an ```instanceof``` check because of the type erasure and the signature of ```Criteria#list()``` uses a raw type.\r\nThe only thing you could do is to run an ```instanceof``` check on every item in the resulting list but it&#39;s reasonable to trust the framework to only return objects that match your criteria in this case. Also checking every item will still not get rid of the ```unchecked``` warning.\r\nSo ```@SuppressWarnings``` is the right thing to do here.","title":"Getting warning for casting list, Type safety: Unchecked cast from List, Is this wrong way of writing query?","body":"<p>There really isn't another good way to solve this. You can't do an <code>instanceof</code> check because of the type erasure and the signature of <code>Criteria#list()</code> uses a raw type.\nThe only thing you could do is to run an <code>instanceof</code> check on every item in the resulting list but it's reasonable to trust the framework to only return objects that match your criteria in this case. Also checking every item will still not get rid of the <code>unchecked</code> warning.\nSo <code>@SuppressWarnings</code> is the right thing to do here.</p>\n"},{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686650027,"creation_date":1686648992,"answer_id":76463541,"question_id":76462938,"body_markdown":"Please think for 5 minutes and tell me, is the following code type safe?\r\n\r\n\r\n    public class Stackoverflow {\r\n        public static void main(String[] args) {\r\n            Stackoverflow sof = new Stackoverflow();\r\n            Cage cage = sof.getCage();\r\n            // are the dogs safe???????\r\n            List&lt;Dog&gt; dogs = (List&lt;Dog&gt;) cage.list();\r\n        }\r\n        public Cage getCage() {\r\n            List cage = new ArrayList&lt;&gt;();\r\n            cage.add(new Lion());\r\n            cage.add(new Dog());\r\n            return new Cage(cage);\r\n        }\r\n    \r\n        class Cage {\r\n            List cage;\r\n            public Cage(List cage) {\r\n                this.cage = cage;\r\n            }\r\n            public List list() {\r\n                return cage;\r\n            }\r\n        }\r\n    \r\n        class Animal {\r\n            public void eat() {}\r\n        }\r\n        class Lion extends Animal {\r\n            public void eat() {\r\n                System.out.println(&quot;eat the animals around&quot;);\r\n            }\r\n        }\r\n        class Dog extends Animal {\r\n            public void eat() {\r\n                System.out.println(&quot;eat bones&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n5 minutes later. \r\n\r\nDogs are not safe because of lions in cages.\r\n\r\nBecause the original type (`List`) is used, the generic feature is lost, and it cannot be checked at compile time. The error will be left in the code and leaked at runtime (that is, the dog was eaten by a lion)\r\n\r\nWhen you can ensure that the data in your collection is safe, then you can use `@SupressWarnings` to ignore compile-time checks.\r\n\r\nFor example, if your `getCage` method is written like this, you can guarantee type safety\r\n\r\n    public Cage getCage() {\r\n        List cage = new ArrayList&lt;&gt;();\r\n        cage.add(new Dog()); // Here, instead of putting a lion in a cage, a dog is put in a cage\r\n        cage.add(new Dog());\r\n        return new Cage(cage);\r\n    }\r\n\r\n\r\nFor your code, I think it is safe. just use `@SupressWarnings` to ignore compile-time checks.\r\n\r\nThis should be guaranteed for the `createCriteria(getPersistentClass())` method. \r\nThe premise is that the return value of `getPersistentClass()` is `HealthEntity.class`","title":"Getting warning for casting list, Type safety: Unchecked cast from List, Is this wrong way of writing query?","body":"<p>Please think for 5 minutes and tell me, is the following code type safe?</p>\n<pre><code>public class Stackoverflow {\n    public static void main(String[] args) {\n        Stackoverflow sof = new Stackoverflow();\n        Cage cage = sof.getCage();\n        // are the dogs safe???????\n        List&lt;Dog&gt; dogs = (List&lt;Dog&gt;) cage.list();\n    }\n    public Cage getCage() {\n        List cage = new ArrayList&lt;&gt;();\n        cage.add(new Lion());\n        cage.add(new Dog());\n        return new Cage(cage);\n    }\n\n    class Cage {\n        List cage;\n        public Cage(List cage) {\n            this.cage = cage;\n        }\n        public List list() {\n            return cage;\n        }\n    }\n\n    class Animal {\n        public void eat() {}\n    }\n    class Lion extends Animal {\n        public void eat() {\n            System.out.println(&quot;eat the animals around&quot;);\n        }\n    }\n    class Dog extends Animal {\n        public void eat() {\n            System.out.println(&quot;eat bones&quot;);\n        }\n    }\n}\n</code></pre>\n<p>5 minutes later.</p>\n<p>Dogs are not safe because of lions in cages.</p>\n<p>Because the original type (<code>List</code>) is used, the generic feature is lost, and it cannot be checked at compile time. The error will be left in the code and leaked at runtime (that is, the dog was eaten by a lion)</p>\n<p>When you can ensure that the data in your collection is safe, then you can use <code>@SupressWarnings</code> to ignore compile-time checks.</p>\n<p>For example, if your <code>getCage</code> method is written like this, you can guarantee type safety</p>\n<pre><code>public Cage getCage() {\n    List cage = new ArrayList&lt;&gt;();\n    cage.add(new Dog()); // Here, instead of putting a lion in a cage, a dog is put in a cage\n    cage.add(new Dog());\n    return new Cage(cage);\n}\n</code></pre>\n<p>For your code, I think it is safe. just use <code>@SupressWarnings</code> to ignore compile-time checks.</p>\n<p>This should be guaranteed for the <code>createCriteria(getPersistentClass())</code> method.\nThe premise is that the return value of <code>getPersistentClass()</code> is <code>HealthEntity.class</code></p>\n"}],"owner":{"account_id":18067214,"reputation":51,"user_id":13132740,"display_name":"Abhishikth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686650027,"creation_date":1686644175,"question_id":76462938,"body_markdown":"\t\r\n\r\n  I am a getting yellow line under the line:\r\n\r\n    return (List&lt;HealthEntity&gt;) criteria.list();\r\nin the following code samle. The warning says:\r\n\r\n&gt; Type safety: Unchecked cast from List to List&lt;HealthEntity&gt;\r\n\r\nand suggests me to use @SupressWarnings &#39;unchecked&#39; to the method.\r\n\r\n    public List&lt;HealthEntity&gt; findByCustomerIds(List&lt;Long&gt; customerId) {\r\n\t\tCriteria criteria = getSession().createCriteria(getPersistentClass());\r\n\t\tcriteria.add(Restrictions.in(&quot;customerId&quot;, customerId));\r\n\t\tif (customerId != null &amp;&amp; !customerId.isEmpty()) {\r\n\t\t\treturn (List&lt;HealthEntity&gt;) criteria.list();\r\n\t\t} else {\r\n\t\t\treturn new ArrayList&lt;&gt;(1);\r\n\t\t}\r\n\t}\r\n\r\nIs this the correct way to return my list of entities or am I making any mistake? Should I just use @SuppressWarnings?","title":"Getting warning for casting list, Type safety: Unchecked cast from List, Is this wrong way of writing query?","body":"<p>I am a getting yellow line under the line:</p>\n<pre><code>return (List&lt;HealthEntity&gt;) criteria.list();\n</code></pre>\n<p>in the following code samle. The warning says:</p>\n<blockquote>\n<p>Type safety: Unchecked cast from List to List</p>\n</blockquote>\n<p>and suggests me to use @SupressWarnings 'unchecked' to the method.</p>\n<pre><code>public List&lt;HealthEntity&gt; findByCustomerIds(List&lt;Long&gt; customerId) {\n    Criteria criteria = getSession().createCriteria(getPersistentClass());\n    criteria.add(Restrictions.in(&quot;customerId&quot;, customerId));\n    if (customerId != null &amp;&amp; !customerId.isEmpty()) {\n        return (List&lt;HealthEntity&gt;) criteria.list();\n    } else {\n        return new ArrayList&lt;&gt;(1);\n    }\n}\n</code></pre>\n<p>Is this the correct way to return my list of entities or am I making any mistake? Should I just use @SuppressWarnings?</p>\n"},{"tags":["java","swing","jtable","abstracttablemodel","jtableheader"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686666093,"post_id":76463655,"comment_id":134828402,"body_markdown":"What does PopulateData do? Does it recreate the TableModel? I think when you recreate the model you need to reset the sorter.","body":"What does PopulateData do? Does it recreate the TableModel? I think when you recreate the model you need to reset the sorter."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686672369,"post_id":76463655,"comment_id":134830049,"body_markdown":"If you&#39;re updating the table every 4 seconds, the user doesn&#39;t have time to do anything with the table.","body":"If you&#39;re updating the table every 4 seconds, the user doesn&#39;t have time to do anything with the table."},{"owner":{"account_id":26105703,"reputation":1,"user_id":19800439,"display_name":"Muthu0044"},"score":0,"creation_date":1686734232,"post_id":76463655,"comment_id":134838572,"body_markdown":"@camickr the populateData function sets the values in the cells","body":"@camickr the populateData function sets the values in the cells"},{"owner":{"account_id":26105703,"reputation":1,"user_id":19800439,"display_name":"Muthu0044"},"score":0,"creation_date":1686734451,"post_id":76463655,"comment_id":134838615,"body_markdown":"@GilbertLeBlanc This table is to show some data of the devices we got, so the only thing user going to do is Start/Stop the device by right clicking the rows. It&#39;ll be helpful if they can select multiple row and do Start/Stop. Also need sorting of table by clicking the headers.","body":"@GilbertLeBlanc This table is to show some data of the devices we got, so the only thing user going to do is Start/Stop the device by right clicking the rows. It&#39;ll be helpful if they can select multiple row and do Start/Stop. Also need sorting of table by clicking the headers."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686736079,"post_id":76463655,"comment_id":134838954,"body_markdown":"Fine.  There&#39;s no need to update the table every 4 seconds.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [How to Use Tables](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html) section.","body":"Fine.  There&#39;s no need to update the table every 4 seconds.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">How to Use Tables</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686749873,"post_id":76463655,"comment_id":134842035,"body_markdown":"Post an [mre] demonstrating the problem.","body":"Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem."}],"owner":{"account_id":26105703,"reputation":1,"user_id":19800439,"display_name":"Muthu0044"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686649767,"creation_date":1686649767,"question_id":76463655,"body_markdown":"I&#39;m using AbstractTableModel, enabled sorting and multiple row selection. the cells are being updated for every 4 secs, when I enable this populating services, sorting is not working and the selected rows gets unselected.\r\n\r\n\r\n**This is the TableModel I&#39;m using.**\r\n\r\n```\r\npublic class TableModel extends AbstractTableModel {\r\n    private static final long serialVersionUID = 1L;\r\n    private final String[] columnNames = {null, null, null, null, null, null, null, null, null, null}; //length = 10\r\n    public Object[][] RowData = new Object[TableProperties.row][TableProperties.column];\r\n\r\n    public TableModel() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;?&gt; getColumnClass(int columnIndex) {\r\n        return columnIndex == 0 ? Date.class : Integer.class;\r\n    }\r\n\r\n    @Override\r\n    public String getColumnName(int col) {\r\n        return columnNames[col];\r\n    }\r\n\r\n    @Override\r\n    public int getColumnCount() {\r\n        return columnNames.length;\r\n    }\r\n\r\n    public boolean isCellEditable(int row, int column) {\r\n        return false;// Added for disable the table cell Edit.\r\n    }\r\n\r\n    public int getRowCount() {\r\n        return RowData.length;\r\n    }\r\n\r\n    public void setValueAt(Object value, int row, int col) {\r\n        RowData[row][col] = value;\r\n        fireTableCellUpdated(row, col);\r\n    }\r\n    public void removeRow(int row) {\r\n        // remove a row from your internal data structure\r\n        fireTableRowsDeleted(row, row);\r\n    }\r\n\r\n    @Override\r\n    public Object getValueAt(int rowIndex, int columnIndex) {\r\n        return RowData[rowIndex][columnIndex];\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n**This is how I enabled row selection and column sorting.\r\n**\r\n```\r\nmod = new TableModel();\r\n        mainTable = new TableView(mod);\r\n        //tr = new ColorRenderer();\r\n        mainTable.setCellSelectionEnabled(false);\r\n        mainTable.setRowSelectionAllowed(true);\r\n        mainTable.setRowHeight(cellHeight);\r\n        mainTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);\r\n        //mainTable.setAutoCreateRowSorter(true);  //enables sorting for all columns\r\n\r\n        //Enables sorting for custom columns\r\n        TableRowSorter&lt;TableModel&gt; sorter = new TableRowSorter&lt;TableModel&gt;(mod) {\r\n            @Override\r\n            public boolean isSortable(int column) {\r\n                // Define which columns are sortable\r\n                List&lt;Integer&gt; sortableColumns = new ArrayList&lt;&gt;();\r\n                sortableColumns.add(0); // Column 0 (Dev)\r\n                sortableColumns.add(1); // Column 1 (Type)\r\n                sortableColumns.add(3); // Column 3 (Active)\r\n                sortableColumns.add(5); // Column 5 (Status)\r\n                sortableColumns.add(9); // Column 9 (Location)\r\n\r\n                return sortableColumns.contains(column);\r\n            }\r\n        };\r\n        mainTable.setRowSorter(sorter);\r\n```\r\n\r\n**This is how I&#39;m running service codes.**\r\n\r\n```\r\n  public void serviceMethod() {\r\n        scheduler = Executors.newScheduledThreadPool(1);\r\n        scheduler.scheduleAtFixedRate(new PopulateData(), 0, 4, TimeUnit.SECONDS);\r\n        //PopulateData sd = new PopulateData();\r\n        //sd.run();\r\n    }\r\n```\r\n\r\n\r\n","title":"How to keep selections and make sorting to work on AbstractTableModel in java when the cells are updating frequently?","body":"<p>I'm using AbstractTableModel, enabled sorting and multiple row selection. the cells are being updated for every 4 secs, when I enable this populating services, sorting is not working and the selected rows gets unselected.</p>\n<p><strong>This is the TableModel I'm using.</strong></p>\n<pre><code>public class TableModel extends AbstractTableModel {\n    private static final long serialVersionUID = 1L;\n    private final String[] columnNames = {null, null, null, null, null, null, null, null, null, null}; //length = 10\n    public Object[][] RowData = new Object[TableProperties.row][TableProperties.column];\n\n    public TableModel() {\n\n    }\n\n    @Override\n    public Class&lt;?&gt; getColumnClass(int columnIndex) {\n        return columnIndex == 0 ? Date.class : Integer.class;\n    }\n\n    @Override\n    public String getColumnName(int col) {\n        return columnNames[col];\n    }\n\n    @Override\n    public int getColumnCount() {\n        return columnNames.length;\n    }\n\n    public boolean isCellEditable(int row, int column) {\n        return false;// Added for disable the table cell Edit.\n    }\n\n    public int getRowCount() {\n        return RowData.length;\n    }\n\n    public void setValueAt(Object value, int row, int col) {\n        RowData[row][col] = value;\n        fireTableCellUpdated(row, col);\n    }\n    public void removeRow(int row) {\n        // remove a row from your internal data structure\n        fireTableRowsDeleted(row, row);\n    }\n\n    @Override\n    public Object getValueAt(int rowIndex, int columnIndex) {\n        return RowData[rowIndex][columnIndex];\n    }\n\n\n}\n</code></pre>\n<p>**This is how I enabled row selection and column sorting.\n**</p>\n<pre><code>mod = new TableModel();\n        mainTable = new TableView(mod);\n        //tr = new ColorRenderer();\n        mainTable.setCellSelectionEnabled(false);\n        mainTable.setRowSelectionAllowed(true);\n        mainTable.setRowHeight(cellHeight);\n        mainTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);\n        //mainTable.setAutoCreateRowSorter(true);  //enables sorting for all columns\n\n        //Enables sorting for custom columns\n        TableRowSorter&lt;TableModel&gt; sorter = new TableRowSorter&lt;TableModel&gt;(mod) {\n            @Override\n            public boolean isSortable(int column) {\n                // Define which columns are sortable\n                List&lt;Integer&gt; sortableColumns = new ArrayList&lt;&gt;();\n                sortableColumns.add(0); // Column 0 (Dev)\n                sortableColumns.add(1); // Column 1 (Type)\n                sortableColumns.add(3); // Column 3 (Active)\n                sortableColumns.add(5); // Column 5 (Status)\n                sortableColumns.add(9); // Column 9 (Location)\n\n                return sortableColumns.contains(column);\n            }\n        };\n        mainTable.setRowSorter(sorter);\n</code></pre>\n<p><strong>This is how I'm running service codes.</strong></p>\n<pre><code>  public void serviceMethod() {\n        scheduler = Executors.newScheduledThreadPool(1);\n        scheduler.scheduleAtFixedRate(new PopulateData(), 0, 4, TimeUnit.SECONDS);\n        //PopulateData sd = new PopulateData();\n        //sd.run();\n    }\n</code></pre>\n"},{"tags":["java","log4j2"],"owner":{"account_id":1900514,"reputation":331,"user_id":1716464,"accept_rate":50,"display_name":"Suyash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686649631,"creation_date":1686649631,"question_id":76463633,"body_markdown":"I have a requirement where I need to zip log files everyday, but this is not for application log files. In my application there are various feeder directories where input files are placed and processed and at same place this logs are generated for individual input files. there are many feeder directories I want to use Log4j utilities to create zip for this log files on everyday basis. \r\nThe bad way will be to write appenders for all this directory locations, can anyone suggest if there is any generic approach ?","title":"can we set log4j Appenders in subfiolders","body":"<p>I have a requirement where I need to zip log files everyday, but this is not for application log files. In my application there are various feeder directories where input files are placed and processed and at same place this logs are generated for individual input files. there are many feeder directories I want to use Log4j utilities to create zip for this log files on everyday basis.\nThe bad way will be to write appenders for all this directory locations, can anyone suggest if there is any generic approach ?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"comments":[{"owner":{"account_id":27597592,"reputation":3,"user_id":21063492,"display_name":"php fox"},"score":0,"creation_date":1681022652,"post_id":75969120,"comment_id":133990424,"body_markdown":"yes it&#39;s signed with the key","body":"yes it&#39;s signed with the key"}],"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681022379,"creation_date":1681022379,"answer_id":75969120,"question_id":75969076,"body_markdown":"Are you a privlidged system app signed with the system&#39;s key?  Because you can&#39;t get READ_PRIVLIEGED_PHONE_STATE as a normal app, or as anything from the play store.","title":"Unable to Retrieve SIM Phone Number and IMSI Number in Real Devices with Android API 29 and Above Using Kotlin Code","body":"<p>Are you a privlidged system app signed with the system's key?  Because you can't get READ_PRIVLIEGED_PHONE_STATE as a normal app, or as anything from the play store.</p>\n"},{"tags":[],"owner":{"account_id":13681938,"reputation":191,"user_id":9872069,"display_name":"Javad Zobeidi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686649584,"creation_date":1686649584,"answer_id":76463626,"question_id":75969076,"body_markdown":"you need to get the imsi from ``` telephonyManager.subscriberId ``` \r\n\r\n\r\n\r\n```\r\n\r\n\r\n    private var carrierName: String? = null\r\n    private var displayName: String? = null\r\n    private var slotIndex = 0\r\n    private var number: String? = null\r\n    private var countryIso: String? = null\r\n    private var imsi: String? = null\r\n    private var simId: String? = null\r\n\r\n    init {\r\n        carrierName = &quot;&quot;\r\n        displayName = &quot;&quot;\r\n        slotIndex = 0\r\n        number = &quot;&quot;\r\n        countryIso = &quot;&quot;\r\n        imsi = &quot;&quot;\r\n        simId = &quot;&quot;\r\n\r\n        imsi = telephonyManager.subscriberId\r\n        number = telephonyManager.line1Number\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\r\n            carrierName = subscriptionInfo.carrierName.toString()\r\n            displayName = subscriptionInfo.displayName.toString()\r\n            slotIndex = subscriptionInfo.simSlotIndex\r\n            \r\n            simId = subscriptionInfo.iccId\r\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\r\n                countryIso = subscriptionInfo.countryIso\r\n            } else if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n        }else {\r\n            if (telephonyManager.simOperator != null) {\r\n                carrierName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simOperator != null) {\r\n                displayName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n\r\n            if (telephonyManager.simSerialNumber != null) {\r\n                simId = telephonyManager.simSerialNumber\r\n            }\r\n\r\n        }\r\n\r\n```","title":"Unable to Retrieve SIM Phone Number and IMSI Number in Real Devices with Android API 29 and Above Using Kotlin Code","body":"<p>you need to get the imsi from <code>telephonyManager.subscriberId</code></p>\n<pre><code>\n\n    private var carrierName: String? = null\n    private var displayName: String? = null\n    private var slotIndex = 0\n    private var number: String? = null\n    private var countryIso: String? = null\n    private var imsi: String? = null\n    private var simId: String? = null\n\n    init {\n        carrierName = &quot;&quot;\n        displayName = &quot;&quot;\n        slotIndex = 0\n        number = &quot;&quot;\n        countryIso = &quot;&quot;\n        imsi = &quot;&quot;\n        simId = &quot;&quot;\n\n        imsi = telephonyManager.subscriberId\n        number = telephonyManager.line1Number\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\n            carrierName = subscriptionInfo.carrierName.toString()\n            displayName = subscriptionInfo.displayName.toString()\n            slotIndex = subscriptionInfo.simSlotIndex\n            \n            simId = subscriptionInfo.iccId\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\n                countryIso = subscriptionInfo.countryIso\n            } else if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n        }else {\n            if (telephonyManager.simOperator != null) {\n                carrierName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simOperator != null) {\n                displayName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n\n            if (telephonyManager.simSerialNumber != null) {\n                simId = telephonyManager.simSerialNumber\n            }\n\n        }\n\n</code></pre>\n"}],"owner":{"account_id":27597592,"reputation":3,"user_id":21063492,"display_name":"php fox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76463626,"answer_count":2,"score":0,"last_activity_date":1686649584,"creation_date":1681021427,"question_id":75969076,"body_markdown":"I tried to retrieve the SIM phone number and IMSI number using Kotlin. However, it&#39;s not working on real devices with Android API 29 or above. The code works fine on emulators and Android 7.\r\n\r\nI have included the required permissions in the manifest file. Here is my Kotlin code. Can anyone suggest a solution to this issue?\r\n\r\n\r\n\r\n```\r\n\r\n    private var carrierName: String? = null\r\n    private var displayName: String? = null\r\n    private var slotIndex = 0\r\n    private var number: String? = null\r\n    private var countryIso: String? = null\r\n    private var imsi: String? = null\r\n    private var simId: String? = null\r\n\r\n\r\n\r\n\r\n    init {\r\n        carrierName = &quot;&quot;\r\n        displayName = &quot;&quot;\r\n        slotIndex = 0\r\n        number = &quot;&quot;\r\n        countryIso = &quot;&quot;\r\n        imsi = &quot;&quot;\r\n        simId = &quot;&quot;\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\r\n            carrierName = subscriptionInfo.carrierName.toString()\r\n            displayName = subscriptionInfo.displayName.toString()\r\n            slotIndex = subscriptionInfo.simSlotIndex\r\n            number = subscriptionInfo.number\r\n            imsi = subscriptionInfo.subscriptionId.toString()\r\n            simId = subscriptionInfo.iccId\r\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\r\n                countryIso = subscriptionInfo.countryIso\r\n            } else if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n        }else {\r\n            if (telephonyManager.simOperator != null) {\r\n                carrierName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simOperator != null) {\r\n                displayName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n            if (telephonyManager.subscriberId != null) {\r\n                imsi = telephonyManager.subscriberId\r\n            }\r\n\r\n            if (telephonyManager.simSerialNumber != null) {\r\n                simId = telephonyManager.simSerialNumber\r\n            }\r\n\r\n            if (telephonyManager.line1Number != null &amp;&amp; telephonyManager.line1Number.isNotEmpty()) {\r\n                number = telephonyManager.line1Number\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\nManifest\r\n\r\n```\r\n &lt;uses-permission android:name=&quot;android.permission.READ_PRIVILEGED_PHONE_STATE&quot; /&gt;\r\n &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\r\n\r\n```","title":"Unable to Retrieve SIM Phone Number and IMSI Number in Real Devices with Android API 29 and Above Using Kotlin Code","body":"<p>I tried to retrieve the SIM phone number and IMSI number using Kotlin. However, it's not working on real devices with Android API 29 or above. The code works fine on emulators and Android 7.</p>\n<p>I have included the required permissions in the manifest file. Here is my Kotlin code. Can anyone suggest a solution to this issue?</p>\n<pre><code>\n    private var carrierName: String? = null\n    private var displayName: String? = null\n    private var slotIndex = 0\n    private var number: String? = null\n    private var countryIso: String? = null\n    private var imsi: String? = null\n    private var simId: String? = null\n\n\n\n\n    init {\n        carrierName = &quot;&quot;\n        displayName = &quot;&quot;\n        slotIndex = 0\n        number = &quot;&quot;\n        countryIso = &quot;&quot;\n        imsi = &quot;&quot;\n        simId = &quot;&quot;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\n            carrierName = subscriptionInfo.carrierName.toString()\n            displayName = subscriptionInfo.displayName.toString()\n            slotIndex = subscriptionInfo.simSlotIndex\n            number = subscriptionInfo.number\n            imsi = subscriptionInfo.subscriptionId.toString()\n            simId = subscriptionInfo.iccId\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\n                countryIso = subscriptionInfo.countryIso\n            } else if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n        }else {\n            if (telephonyManager.simOperator != null) {\n                carrierName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simOperator != null) {\n                displayName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n            if (telephonyManager.subscriberId != null) {\n                imsi = telephonyManager.subscriberId\n            }\n\n            if (telephonyManager.simSerialNumber != null) {\n                simId = telephonyManager.simSerialNumber\n            }\n\n            if (telephonyManager.line1Number != null &amp;&amp; telephonyManager.line1Number.isNotEmpty()) {\n                number = telephonyManager.line1Number\n            }\n        }\n    }\n\n</code></pre>\n<p>Manifest</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.READ_PRIVILEGED_PHONE_STATE&quot; /&gt;\n &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\n\n</code></pre>\n"},{"tags":["java","logback","slf4j"],"comments":[{"owner":{"account_id":9330948,"reputation":2709,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":3,"creation_date":1563981130,"post_id":41255503,"comment_id":100882586,"body_markdown":"SLF4J has already implemented it in their latest version slf4j-api-2.0.0-alpha0 https://www.slf4j.org/manual.html#fluent","body":"SLF4J has already implemented it in their latest version slf4j-api-2.0.0-alpha0 <a href=\"https://www.slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">slf4j.org/manual.html#fluent</a>"},{"owner":{"account_id":372736,"reputation":2561,"user_id":721956,"accept_rate":54,"display_name":"Askar Kalykov"},"score":0,"creation_date":1686649249,"post_id":41255503,"comment_id":134824635,"body_markdown":"The case when simple comment is much more helpful than the top voted answer.","body":"The case when simple comment is much more helpful than the top voted answer."}],"answers":[{"comments":[{"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"score":2,"creation_date":1534360040,"post_id":43077306,"comment_id":90682014,"body_markdown":"Does this actually defer the execution if the debug level isn&#39;t set? I believe the JVM will in fact invoke the defer() method which will invoke the lambda. Maybe you could put a branch in there to check the log level","body":"Does this actually defer the execution if the debug level isn&#39;t set? I believe the JVM will in fact invoke the defer() method which will invoke the lambda. Maybe you could put a branch in there to check the log level"},{"owner":{"account_id":562,"reputation":3657,"user_id":728,"accept_rate":91,"display_name":"TJR"},"score":1,"creation_date":1534450984,"post_id":43077306,"comment_id":90721108,"body_markdown":"Don&#39;t take my word for it. Try it out and test it. :)","body":"Don&#39;t take my word for it. Try it out and test it. :)"},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1540137709,"post_id":43077306,"comment_id":92744251,"body_markdown":"@JonathanS.Fisher `defer` will be invoked and return a LogString object. The lambda will not be invoked (it&#39;s a lambda, not an expression!). Only if the debug level is set and slf4j calls LogString::toString, will the lambda execute.","body":"@JonathanS.Fisher <code>defer</code> will be invoked and return a LogString object. The lambda will not be invoked (it&#39;s a lambda, not an expression!). Only if the debug level is set and slf4j calls LogString::toString, will the lambda execute."},{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1640641935,"post_id":43077306,"comment_id":124624129,"body_markdown":"Unfortunately this trick creates extra object on stack (`LogString` with factory `LogString.defer()`).","body":"Unfortunately this trick creates extra object on stack (<code>LogString</code> with factory <code>LogString.defer()</code>)."},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":1,"creation_date":1656708665,"post_id":43077306,"comment_id":128646499,"body_markdown":"@gavenkoa Hence the poster&#39;s comment about &quot;You&#39;ll need to determine if the cost ...&quot; because if `compute()` is expensive, it still may be worth it","body":"@gavenkoa Hence the poster&#39;s comment about &quot;You&#39;ll need to determine if the cost ...&quot; because if <code>compute()</code> is expensive, it still may be worth it"}],"tags":[],"owner":{"account_id":562,"reputation":3657,"user_id":728,"accept_rate":91,"display_name":"TJR"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1490725941,"creation_date":1490725941,"answer_id":43077306,"question_id":41255503,"body_markdown":"Maybe something like this would work. You&#39;ll need to determine if the cost of `new`&#39;ing instances is better than doing it another way.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    logger.debug(&quot;This {} and {} with {} &quot;,\r\n        defer(() -&gt; this),\r\n        defer(() -&gt; that),\r\n        defer(() -&gt; compute()));\r\n\r\nThen with this...\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import lombok.NonNull;\r\n    import lombok.RequiredArgsConstructor;\r\n    \r\n    @RequiredArgsConstructor(staticName = &quot;defer&quot;)\r\n    public class LogString {\r\n        @NonNull private final StringGenerator generator;\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return generator.createString();\r\n        }\r\n    \r\n        public interface StringGenerator {\r\n            String createString();\r\n        }\r\n    }\r\n\r\n","title":"Lambda support for SLF4J API","body":"<p>Maybe something like this would work. You'll need to determine if the cost of <code>new</code>'ing instances is better than doing it another way.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>logger.debug(\"This {} and {} with {} \",\n    defer(() -&gt; this),\n    defer(() -&gt; that),\n    defer(() -&gt; compute()));\n</code></pre>\n\n<p>Then with this...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor(staticName = \"defer\")\npublic class LogString {\n    @NonNull private final StringGenerator generator;\n\n    @Override\n    public String toString() {\n        return generator.createString();\n    }\n\n    public interface StringGenerator {\n        String createString();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1287025,"reputation":749,"user_id":1239904,"accept_rate":64,"display_name":"Mahatma_Fatal_Error"},"score":1,"creation_date":1566379180,"post_id":43681657,"comment_id":101634123,"body_markdown":"Will come with 2.0.0-alpha1","body":"Will come with 2.0.0-alpha1"},{"owner":{"account_id":165044,"reputation":4235,"user_id":388185,"accept_rate":84,"display_name":"Alkanshel"},"score":1,"creation_date":1587774522,"post_id":43681657,"comment_id":108651051,"body_markdown":"I&#39;m trying 2.0.0-alpah1 and the methods still don&#39;t take lambdas. Not sure what gives.","body":"I&#39;m trying 2.0.0-alpah1 and the methods still don&#39;t take lambdas. Not sure what gives."},{"owner":{"account_id":953557,"reputation":1673,"user_id":1028367,"accept_rate":57,"display_name":"Matthew Madson"},"score":1,"creation_date":1597198582,"post_id":43681657,"comment_id":112052825,"body_markdown":"I wonder how much longer we&#39;ll have to wait until v2 goes GA.","body":"I wonder how much longer we&#39;ll have to wait until v2 goes GA."},{"owner":{"account_id":1056956,"reputation":5781,"user_id":1059446,"accept_rate":89,"display_name":"Aleksandr Kravets"},"score":0,"creation_date":1668169171,"post_id":43681657,"comment_id":131346241,"body_markdown":"So the current version is 2.0.3. Is it supported already?","body":"So the current version is 2.0.3. Is it supported already?"}],"tags":[],"owner":{"account_id":236329,"reputation":4384,"user_id":503743,"accept_rate":67,"display_name":"Mariano Ruiz"},"comment_count":4,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1493386830,"creation_date":1493386830,"answer_id":43681657,"question_id":41255503,"body_markdown":"Unfortunately, this is not supported yet: https://jira.qos.ch/browse/SLF4J-371","title":"Lambda support for SLF4J API","body":"<p>Unfortunately, this is not supported yet: <a href=\"https://jira.qos.ch/browse/SLF4J-371\" rel=\"noreferrer\">https://jira.qos.ch/browse/SLF4J-371</a></p>\n"},{"comments":[{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":7,"creation_date":1522309666,"post_id":48725206,"comment_id":86108355,"body_markdown":"@downvoters Please leave a comment why you dislike this answer. Is it because you don&#39;t want to add another library or because this library currently has 7 stars on GitHub only?","body":"@downvoters Please leave a comment why you dislike this answer. Is it because you don&#39;t want to add another library or because this library currently has 7 stars on GitHub only?"},{"owner":{"account_id":369660,"reputation":3532,"user_id":717177,"accept_rate":41,"display_name":"Mr. Cat"},"score":11,"creation_date":1523373722,"post_id":48725206,"comment_id":86529703,"body_markdown":"Because we don&#39;t want more dependencies in logging libs zoo. There is a request to support lambdas in slf4j(https://jira.qos.ch/browse/SLF4J-371) and there is already such feature in log4j. Please, rather than create another lib, propose a pull request in slf4j.","body":"Because we don&#39;t want more dependencies in logging libs zoo. There is a request to support lambdas in slf4j(<a href=\"https://jira.qos.ch/browse/SLF4J-371\" rel=\"nofollow noreferrer\">jira.qos.ch/browse/SLF4J-371</a>) and there is already such feature in log4j. Please, rather than create another lib, propose a pull request in slf4j."},{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":7,"creation_date":1523378180,"post_id":48725206,"comment_id":86532477,"body_markdown":"@Mr.Cat Please approach the author of the lib and/or take the code and integrate it in slf4j. Double check the license before &#128519;","body":"@Mr.Cat Please approach the author of the lib and/or take the code and integrate it in slf4j. Double check the license before 😇"},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":4,"creation_date":1533777006,"post_id":48725206,"comment_id":90474511,"body_markdown":"https://jira.qos.ch/browse/SLF4J-371 has been sitting there since 2016. Old discussion here http://slf4j.42922.n3.nabble.com/Lambda-support-in-SLF4J-td4026483.html.","body":"<a href=\"https://jira.qos.ch/browse/SLF4J-371\" rel=\"nofollow noreferrer\">jira.qos.ch/browse/SLF4J-371</a> has been sitting there since 2016. Old discussion here <a href=\"http://slf4j.42922.n3.nabble.com/Lambda-support-in-SLF4J-td4026483.html\" rel=\"nofollow noreferrer\">slf4j.42922.n3.nabble.com/&hellip;</a>."}],"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"comment_count":4,"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1522309622,"creation_date":1518294154,"answer_id":48725206,"question_id":41255503,"body_markdown":"[slf4j-lambda](https://github.com/kwon37xi/slf4j-lambda) supports that:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import kr.pe.kwonnam.slf4jlambda.LambdaLogger;\r\n    import kr.pe.kwonnam.slf4jlambda.LambdaLoggerFactory;\r\n\r\n    LambdaLogger log = LambdaLoggerFactory.getLogger(YourClass.class);\r\n\r\n    // lambda for message itself\r\n    log.debug(() -&gt; createMessage(&quot;debug level&quot;));\r\n\r\n    // lambda for message format&#39;s arguments\r\n    log.info(&quot;info lambda formatter number {}, string {}&quot;, () -&gt; 123, () -&gt; &quot;Hello LambdaLogger&quot;);\r\n\r\n    // method reference\r\n    public String longRunnigMethod() {\r\n        return &quot;some long running method&quot;;\r\n    }\r\n\r\n    log.debug(&quot;Long running method logging {}&quot;, this::longRunnigMethod);\r\n\r\n    // exception logging\r\n    log.error(() -&gt; &quot;error lambda exception msg - &quot; + ex.getMessage(), ex);","title":"Lambda support for SLF4J API","body":"<p><a href=\"https://github.com/kwon37xi/slf4j-lambda\" rel=\"noreferrer\">slf4j-lambda</a> supports that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import kr.pe.kwonnam.slf4jlambda.LambdaLogger;\nimport kr.pe.kwonnam.slf4jlambda.LambdaLoggerFactory;\n\nLambdaLogger log = LambdaLoggerFactory.getLogger(YourClass.class);\n\n// lambda for message itself\nlog.debug(() -&gt; createMessage(\"debug level\"));\n\n// lambda for message format's arguments\nlog.info(\"info lambda formatter number {}, string {}\", () -&gt; 123, () -&gt; \"Hello LambdaLogger\");\n\n// method reference\npublic String longRunnigMethod() {\n    return \"some long running method\";\n}\n\nlog.debug(\"Long running method logging {}\", this::longRunnigMethod);\n\n// exception logging\nlog.error(() -&gt; \"error lambda exception msg - \" + ex.getMessage(), ex);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":165044,"reputation":4235,"user_id":388185,"accept_rate":84,"display_name":"Alkanshel"},"score":1,"creation_date":1587774654,"post_id":59132131,"comment_id":108651072,"body_markdown":"Using 2.0.0-alpha1, doesn&#39;t seem like that&#39;s the case unforunately","body":"Using 2.0.0-alpha1, doesn&#39;t seem like that&#39;s the case unforunately"},{"owner":{"account_id":4116425,"reputation":595,"user_id":3377857,"display_name":"Klemens Morbe"},"score":1,"creation_date":1622458665,"post_id":59132131,"comment_id":119790747,"body_markdown":"sadly it&#39;s still in alpha","body":"sadly it&#39;s still in alpha"},{"owner":{"account_id":53765,"reputation":1307,"user_id":160799,"accept_rate":75,"display_name":"Gregor"},"score":0,"creation_date":1631631106,"post_id":59132131,"comment_id":122271763,"body_markdown":"still at alpha-5 only, what&#39;s going on with SLF4J?","body":"still at alpha-5 only, what&#39;s going on with SLF4J?"},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1638401644,"post_id":59132131,"comment_id":124081959,"body_markdown":"At least in the current alpha there is a method taking `Supplier&lt;String&gt;`, just sadly only on the new fluent API and not on `Logger`","body":"At least in the current alpha there is a method taking <code>Supplier&lt;String&gt;</code>, just sadly only on the new fluent API and not on <code>Logger</code>"},{"owner":{"account_id":135407,"reputation":10653,"user_id":338249,"accept_rate":100,"display_name":"rjdkolb"},"score":0,"creation_date":1673635513,"post_id":59132131,"comment_id":132551406,"body_markdown":"Slf4j2 is released. Please update this answer.","body":"Slf4j2 is released. Please update this answer."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1674279094,"post_id":59132131,"comment_id":132685630,"body_markdown":"@rjdkolb Done. Thanks for the suggestion. FYI, on Stack Overflow you are welcome to make such update modifications yourself to any Question or Answer. Content here is open-source.","body":"@rjdkolb Done. Thanks for the suggestion. FYI, on Stack Overflow you are welcome to make such update modifications yourself to any Question or Answer. Content here is open-source."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":6,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1686649444,"creation_date":1575255741,"answer_id":59132131,"question_id":41255503,"body_markdown":"# SLF4J – version 2\r\n\r\n\r\nVersion 2 of [SLF4J][1] has [support][5] for lambda syntax. This new version also brings a [fluent API][2]. \r\n\r\nVersion 2 is now the current generation of SLF4J. Latest release is 2.0.6 as of 2023-01. Requires [Java 8][3] or later.\r\n\r\nMaven POM setting:\r\n\r\n```xml\r\n&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nSee the [*Download*](http://www.slf4j.org/download.html) page. See [this repository][4]. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/SLF4J\r\n  [2]: https://en.wikipedia.org/wiki/Fluent_interface\r\n  [3]: https://en.m.wikipedia.org/wiki/Java_version_history#Java_8\r\n  [4]: https://mvnrepository.com/artifact/org.slf4j/slf4j-api\r\n  [5]: https://slf4j.org/manual.html#fluent","title":"Lambda support for SLF4J API","body":"<h1>SLF4J – version 2</h1>\n<p>Version 2 of <a href=\"https://en.wikipedia.org/wiki/SLF4J\" rel=\"nofollow noreferrer\">SLF4J</a> has <a href=\"https://slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">support</a> for lambda syntax. This new version also brings a <a href=\"https://en.wikipedia.org/wiki/Fluent_interface\" rel=\"nofollow noreferrer\">fluent API</a>.</p>\n<p>Version 2 is now the current generation of SLF4J. Latest release is 2.0.6 as of 2023-01. Requires <a href=\"https://en.m.wikipedia.org/wiki/Java_version_history#Java_8\" rel=\"nofollow noreferrer\">Java 8</a> or later.</p>\n<p>Maven POM setting:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;2.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>See the <a href=\"http://www.slf4j.org/download.html\" rel=\"nofollow noreferrer\"><em>Download</em></a> page. See <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-api\" rel=\"nofollow noreferrer\">this repository</a>.</p>\n"},{"tags":[],"owner":{"account_id":11875805,"reputation":45,"user_id":8690885,"display_name":"Zhnz"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661265341,"creation_date":1661265341,"answer_id":73460629,"question_id":41255503,"body_markdown":"**As of August 20th SLF4j version 2.0 was released with support for lambdas.**\r\n\r\nCurrently only the newly added optional fluent API supports lambdas. They can also be combined with traditional variable parameters. See the following example:\r\n\r\n    logger.atDebug().setMessage(&quot;Temperature set to {}. Old value was {}.&quot;).addArgument(() -&gt; someSupplier()).addArgument(oldT).log();\r\n\r\nReference: [SLF4J Manual - Fluent][1]\r\n\r\n\r\n  [1]: https://www.slf4j.org/manual.html#fluent","title":"Lambda support for SLF4J API","body":"<p><strong>As of August 20th SLF4j version 2.0 was released with support for lambdas.</strong></p>\n<p>Currently only the newly added optional fluent API supports lambdas. They can also be combined with traditional variable parameters. See the following example:</p>\n<pre><code>logger.atDebug().setMessage(&quot;Temperature set to {}. Old value was {}.&quot;).addArgument(() -&gt; someSupplier()).addArgument(oldT).log();\n</code></pre>\n<p>Reference: <a href=\"https://www.slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">SLF4J Manual - Fluent</a></p>\n"}],"owner":{"account_id":1240801,"reputation":1229,"user_id":1203446,"accept_rate":55,"display_name":"Souvik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22632,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"answer_count":5,"score":48,"last_activity_date":1686649444,"creation_date":1482296947,"question_id":41255503,"body_markdown":"In Log4j latest API we have Lambda support where I can manage the Debug option easily.\r\n\r\nExample: \r\n\r\n    logger.debug(&quot;This {} and {} with {} &quot;, \r\n      () -&gt; this, () -&gt; that, () -&gt; compute());\r\n\r\nBut for slf4j/logback is there any option to have lambda enabled as mentioned above. Please let me know the syntax then.","title":"Lambda support for SLF4J API","body":"<p>In Log4j latest API we have Lambda support where I can manage the Debug option easily.</p>\n\n<p>Example: </p>\n\n<pre><code>logger.debug(\"This {} and {} with {} \", \n  () -&gt; this, () -&gt; that, () -&gt; compute());\n</code></pre>\n\n<p>But for slf4j/logback is there any option to have lambda enabled as mentioned above. Please let me know the syntax then.</p>\n"},{"tags":["java","spring","zipkin"],"owner":{"account_id":25101814,"reputation":1,"user_id":18952452,"display_name":"petergram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686649328,"creation_date":1686649328,"question_id":76463593,"body_markdown":"I would like to know how to propagate the trace_id within the Java Stream API in Spring Cloud Zipkin.\r\n\r\nIn the code below, the trace_id is not propagated, and each client ends up having an individual trace_id.\r\n\r\n\r\n```java\r\nTestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\r\nSpan span = tracer.nextSpan(tracer.currentSpan());\r\n\r\ntestForkJoinPool.submit(() -&gt; {\r\n    try (SpanInScope ignored = tracer.withSpan(span)) {\r\n        IntStream.range(1, 20).parallel().forEach(idx -&gt; {\r\n            client.get(1000L);\r\n        });\r\n    } finally {\r\n        span.end();\r\n    }\r\n}).get();\r\n```\r\n\r\nHowever, if we modify the above code as shown below, the trace_id is propagated.\r\n\r\n```java\r\nTestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\r\nSpan span = tracer.nextSpan(tracer.currentSpan());\r\n\r\ntestForkJoinPool.submit(() -&gt; {\r\n    IntStream.range(1, 20).parallel().forEach(idx -&gt; {\r\n        try (SpanInScope ignored = tracer.withSpan(span)) {\r\n            client.get(1000L);\r\n        } finally {\r\n            span.end();\r\n        }\r\n    });\r\n}).get();\r\n```\r\n\r\nUnfortunately, applying SpanInScope to all existing Stream API code as mentioned above has its limitations. Is there a way to inject SpanInScope with minimal modifications to the existing Stream API code?\r\n\r\nThank you.\r\n\r\n\r\npropagate the trace_id within the Java Stream API in Spring Cloud Zipkin.","title":"how to propagate the trace_id within the Java Stream API in Spring Cloud Zipkin","body":"<p>I would like to know how to propagate the trace_id within the Java Stream API in Spring Cloud Zipkin.</p>\n<p>In the code below, the trace_id is not propagated, and each client ends up having an individual trace_id.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\nSpan span = tracer.nextSpan(tracer.currentSpan());\n\ntestForkJoinPool.submit(() -&gt; {\n    try (SpanInScope ignored = tracer.withSpan(span)) {\n        IntStream.range(1, 20).parallel().forEach(idx -&gt; {\n            client.get(1000L);\n        });\n    } finally {\n        span.end();\n    }\n}).get();\n</code></pre>\n<p>However, if we modify the above code as shown below, the trace_id is propagated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\nSpan span = tracer.nextSpan(tracer.currentSpan());\n\ntestForkJoinPool.submit(() -&gt; {\n    IntStream.range(1, 20).parallel().forEach(idx -&gt; {\n        try (SpanInScope ignored = tracer.withSpan(span)) {\n            client.get(1000L);\n        } finally {\n            span.end();\n        }\n    });\n}).get();\n</code></pre>\n<p>Unfortunately, applying SpanInScope to all existing Stream API code as mentioned above has its limitations. Is there a way to inject SpanInScope with minimal modifications to the existing Stream API code?</p>\n<p>Thank you.</p>\n<p>propagate the trace_id within the Java Stream API in Spring Cloud Zipkin.</p>\n"},{"tags":["java","picocli","javalin"],"answers":[{"tags":[],"owner":{"account_id":105534,"reputation":833,"user_id":281570,"accept_rate":83,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686649149,"creation_date":1686649149,"answer_id":76463562,"question_id":76461848,"body_markdown":"I think I found a solution. I just had to not exit the app after starting the `Runnable`/`Callable`. Like so: \r\n\r\n```java\r\npublic static void main(String... args) {\r\n    new CommandLine(new Main()).execute(args);\r\n}\r\n\r\n```","title":"Picocli with long running Javalin Thread","body":"<p>I think I found a solution. I just had to not exit the app after starting the <code>Runnable</code>/<code>Callable</code>. Like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    new CommandLine(new Main()).execute(args);\n}\n\n</code></pre>\n"}],"owner":{"account_id":105534,"reputation":833,"user_id":281570,"accept_rate":83,"display_name":"Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686649149,"creation_date":1686633113,"question_id":76461848,"body_markdown":"I want to build a simple [Javalin](https://javalin.io/) API and configure the HTTP port with a command line arg with [Picocli](https://picocli.info/). It looks a bit like this:\r\n\r\n```java\r\npublic class Main implements Runnable {\r\n\r\n    @CommandLine.Option(names = {&quot;-p&quot;, &quot;--port&quot;})\r\n    int httpPort = 9080;\r\n\r\n    public static void main(String... args) {\r\n        int exitCode = new CommandLine(new Main()).execute(args);\r\n        System.exit(exitCode);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        Javalin.create()\r\n            .get(&quot;/some/endpoint&quot;, new EndpointHandler())\r\n            .start(&quot;0.0.0.0&quot;, httpPort);\r\n    }\r\n}\r\n```\r\n\r\nThe problem is, that Picocli seems to start the Javalin thread and returns or exits immediatly. How can I either get Picocli to wait for Javalin or have Javalin block in such a way that my app does not exit instantly?\r\n","title":"Picocli with long running Javalin Thread","body":"<p>I want to build a simple <a href=\"https://javalin.io/\" rel=\"nofollow noreferrer\">Javalin</a> API and configure the HTTP port with a command line arg with <a href=\"https://picocli.info/\" rel=\"nofollow noreferrer\">Picocli</a>. It looks a bit like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main implements Runnable {\n\n    @CommandLine.Option(names = {&quot;-p&quot;, &quot;--port&quot;})\n    int httpPort = 9080;\n\n    public static void main(String... args) {\n        int exitCode = new CommandLine(new Main()).execute(args);\n        System.exit(exitCode);\n    }\n\n    @Override\n    public void run() {\n        Javalin.create()\n            .get(&quot;/some/endpoint&quot;, new EndpointHandler())\n            .start(&quot;0.0.0.0&quot;, httpPort);\n    }\n}\n</code></pre>\n<p>The problem is, that Picocli seems to start the Javalin thread and returns or exits immediatly. How can I either get Picocli to wait for Javalin or have Javalin block in such a way that my app does not exit instantly?</p>\n"},{"tags":["java","flask","apache-kafka","apache-flink","flink-streaming"],"answers":[{"comments":[{"owner":{"account_id":26959396,"reputation":11,"user_id":20527272,"display_name":"Arjun"},"score":0,"creation_date":1686631898,"post_id":76461096,"comment_id":134821692,"body_markdown":"Hey, thank you for reaching out. From my perspective, I&#39;ve already tried the Kafka solution, but it&#39;s taking time. I&#39;m looking for a better solution with less delay, especially since we need to run multiple jobs, which can potentially cause time delays.","body":"Hey, thank you for reaching out. From my perspective, I&#39;ve already tried the Kafka solution, but it&#39;s taking time. I&#39;m looking for a better solution with less delay, especially since we need to run multiple jobs, which can potentially cause time delays."},{"owner":{"account_id":19778321,"reputation":41,"user_id":14483834,"display_name":"hilmialf"},"score":0,"creation_date":1686647217,"post_id":76461096,"comment_id":134824205,"body_markdown":"How about using the side outputs I mentioned above?","body":"How about using the side outputs I mentioned above?"},{"owner":{"account_id":26959396,"reputation":11,"user_id":20527272,"display_name":"Arjun"},"score":0,"creation_date":1687934819,"post_id":76461096,"comment_id":135004674,"body_markdown":"Hi, we have achieved the required solution by sending mutiple datastream from a single job with parellelism, it helped us to get what we expected. Anyway thanks for the help","body":"Hi, we have achieved the required solution by sending mutiple datastream from a single job with parellelism, it helped us to get what we expected. Anyway thanks for the help"},{"owner":{"account_id":19778321,"reputation":41,"user_id":14483834,"display_name":"hilmialf"},"score":0,"creation_date":1688112632,"post_id":76461096,"comment_id":135032959,"body_markdown":"could you share detail how you achieved this? Specifically, what do you mean by &quot;with parallelism&quot;?","body":"could you share detail how you achieved this? Specifically, what do you mean by &quot;with parallelism&quot;?"},{"owner":{"account_id":26959396,"reputation":11,"user_id":20527272,"display_name":"Arjun"},"score":0,"creation_date":1688966231,"post_id":76461096,"comment_id":135140322,"body_markdown":"https://stackoverflow.com/questions/76650772/is-it-possible-to-run-3-streams-in-flink-parallely-each-stream-calls-a-flask-api\nHey can you check this out this is the same thing we have done to get the required solution, but it is also taking time, can you check this out?","body":"<a href=\"https://stackoverflow.com/questions/76650772/is-it-possible-to-run-3-streams-in-flink-parallely-each-stream-calls-a-flask-api\" title=\"is it possible to run 3 streams in flink parallely each stream calls a flask api\">stackoverflow.com/questions/76650772/&hellip;</a> Hey can you check this out this is the same thing we have done to get the required solution, but it is also taking time, can you check this out?"}],"tags":[],"owner":{"account_id":19778321,"reputation":41,"user_id":14483834,"display_name":"hilmialf"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686617576,"creation_date":1686617576,"answer_id":76461096,"question_id":76456079,"body_markdown":"Well, there are multiple ways to achieve this which might be really opinionated.\r\n\r\nWhen running multiple jobs (`execute()` call) under the same application, it actually blocks. So your call to another `execute()` will wait the previous execute() call to complete. See [here][1].\r\n\r\n&gt; Compared to the Per-Job (deprecated) mode, the Application Mode allows the submission of applications consisting of multiple jobs. The order of job execution is not affected by the deployment mode but by the call used to launch the job. Using execute(), which is blocking, establishes an order and it will lead to the execution of the “next” job being postponed until “this” job finishes. Using executeAsync(), which is non-blocking, will lead to the “next” job starting before “this” job finishes.\r\n\r\n&gt;The Application Mode allows for multi-execute() applications but High-Availability is not supported in these cases. High-Availability in Application Mode is only supported for single-execute() applications.\r\n\r\n&gt;Additionally, when any of multiple running jobs in Application Mode (submitted for example using executeAsync()) gets cancelled, all jobs will be stopped and the JobManager will shut down. Regular job completions (by the sources shutting down) are supported.\r\n\r\nApart of the above, I am not fan of running multiple job inside one application since it [does not offer high-availability][1]. So I would normally do either:\r\n\r\n 1. I am thinking you can use [side outputs][2] here. The rough idea would be to put splitted records into different side output. Then from each independent side output, you can do your further processing.\r\n\r\n 2. In your main app, just split the records and produce back to different kafka topic for each job type. Then you can create another job that consume from that particular topic and do the processing.\r\n\r\n\r\n  [1]: https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/overview/#application-mode\r\n  [2]: https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/datastream/side_output/","title":"Can I use a flink job to split and send data to multiple jobs according to the incoming data via kafka?","body":"<p>Well, there are multiple ways to achieve this which might be really opinionated.</p>\n<p>When running multiple jobs (<code>execute()</code> call) under the same application, it actually blocks. So your call to another <code>execute()</code> will wait the previous execute() call to complete. See <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/overview/#application-mode\" rel=\"nofollow noreferrer\">here</a>.</p>\n<blockquote>\n<p>Compared to the Per-Job (deprecated) mode, the Application Mode allows the submission of applications consisting of multiple jobs. The order of job execution is not affected by the deployment mode but by the call used to launch the job. Using execute(), which is blocking, establishes an order and it will lead to the execution of the “next” job being postponed until “this” job finishes. Using executeAsync(), which is non-blocking, will lead to the “next” job starting before “this” job finishes.</p>\n</blockquote>\n<blockquote>\n<p>The Application Mode allows for multi-execute() applications but High-Availability is not supported in these cases. High-Availability in Application Mode is only supported for single-execute() applications.</p>\n</blockquote>\n<blockquote>\n<p>Additionally, when any of multiple running jobs in Application Mode (submitted for example using executeAsync()) gets cancelled, all jobs will be stopped and the JobManager will shut down. Regular job completions (by the sources shutting down) are supported.</p>\n</blockquote>\n<p>Apart of the above, I am not fan of running multiple job inside one application since it <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/overview/#application-mode\" rel=\"nofollow noreferrer\">does not offer high-availability</a>. So I would normally do either:</p>\n<ol>\n<li><p>I am thinking you can use <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/datastream/side_output/\" rel=\"nofollow noreferrer\">side outputs</a> here. The rough idea would be to put splitted records into different side output. Then from each independent side output, you can do your further processing.</p>\n</li>\n<li><p>In your main app, just split the records and produce back to different kafka topic for each job type. Then you can create another job that consume from that particular topic and do the processing.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":26959396,"reputation":11,"user_id":20527272,"display_name":"Arjun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686649122,"creation_date":1686568217,"question_id":76456079,"body_markdown":"I&#39;m new to `Flink`. So, this is a flink job which consumes data from kafka and split the data according to some keys and values.\r\n\r\n\r\nThis is the SplitJob Class\r\n\r\n\r\n    public class SplitJob {\r\n        public static void main(String[] args) throws Exception {   \r\n    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    long startTime = System.currentTimeMillis();\r\n    \r\n    //For recieving data from kafka\r\n    //        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder().setBootstrapServers(&quot;localhost:9092&quot;).setTopics(&quot;input-topic&quot;).setGroupId(&quot;my-group&quot;).setStartingOffsets(OffsetsInitializer.latest()).setValueOnlyDeserializer(new SimpleStringSchema()).build();\r\n    \r\n    //        DataStream&lt;String&gt; sourceStream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\r\n    \r\n    \r\n            DataStream&lt;String&gt; sourceStream = env.fromElements(&quot;{\\&quot;deviceId\\&quot;:\\&quot;0\\&quot;,\\&quot;sessionId\\&quot;:\\&quot;0\\&quot;,\\&quot;component\\&quot;:[DATAS....}]}&quot;);\r\n            DataStream&lt;ObjectNode&gt; jsonStream = sourceStream.map(value -&gt; mapper.readTree(value).deepCopy());\r\n    \r\n            DataStream&lt;String&gt; data1 = processComponentTwo(jsonStream, &quot;data1&quot;, &quot;hr&quot;);\r\n            DataStream&lt;String&gt; data2 = processComponentTwo(jsonStream, &quot;data2&quot;, &quot;hr&quot;);\r\n            DataStream&lt;String&gt; data3 = processComponentTwo(jsonStream, &quot;data3&quot;, &quot;value&quot;);\r\n            \r\n    \r\n            Job1.consumeDataStream(data1, data3);\r\n            Job2.consumeDataStream(data2, data3);\r\n    \r\n    \r\n            long endTime = System.currentTimeMillis();\r\n            long elapsedTime = endTime - startTime;\r\n            System.out.println(&quot;Elapsed time in splitjob:::::: &quot; + elapsedTime + &quot;ms&quot;);\r\n    \r\n    \r\n            env.execute(&quot;SplitJob&quot;);\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        private static void processComponent(ObjectNode jsonNodes, String code, String field, Collector&lt;String&gt; collector) {\r\n            List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\r\n            for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\r\n                String componentCode = component.get(&quot;code&quot;).asText();\r\n                if (componentCode.equals(code)) {\r\n                    resultList.add(component.get(field).toString());\r\n                }\r\n            }\r\n            collector.collect(resultList.toString());\r\n    \r\n        }\r\n    \r\n    \r\n        private static DataStream&lt;String&gt; processComponentTwo(DataStream&lt;ObjectNode&gt; jsonStream, String componentCode, String field) {\r\n            return jsonStream.flatMap(new FlatMapFunction&lt;ObjectNode, String&gt;() {\r\n                @Override\r\n                public void flatMap(ObjectNode jsonNodes, Collector&lt;String&gt; collector) throws Exception {\r\n                    List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\r\n                    for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\r\n                        String code = component.get(&quot;code&quot;).asText();\r\n                        if (code.equals(componentCode)) {\r\n                            resultList.add(component.get(field).toString());\r\n                        }\r\n                    }\r\n                    collector.collect(resultList.toString());\r\n                }\r\n            });\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n&gt; This is the job1 class\r\n\r\n    public class Job1 {\r\n        public static DataStream&lt;String&gt; consumeDataStream(DataStream&lt;String&gt; data, DataStream&lt;String&gt; pdata) throws Exception {\r\n    \r\n            StreamExecutionEnvironment env2 = StreamExecutionEnvironment.getExecutionEnvironment();\r\n            env2.setParallelism(2);\r\n    \r\n    \r\n            ArrayList&lt;String&gt; cdata = new ArrayList&lt;&gt;();\r\n            Iterator&lt;String&gt; cOutput = DataStreamUtils.collect(data);\r\n            while (cOutput.hasNext())\r\n                cdata.add(cOutput.next());\r\n    \r\n            ArrayList&lt;String&gt; pList = new ArrayList&lt;&gt;();\r\n            Iterator&lt;String&gt; pOutput = DataStreamUtils.collect(pdata);\r\n            while (parentOutput.hasNext())\r\n                pList.add(pOutput.next());\r\n    \r\n            HashMap&lt;String, ArrayList&lt;String&gt;&gt; mergedData = new HashMap&lt;&gt;();\r\n            mergedData.put(&quot;fhr1&quot;, cdata);\r\n            mergedData.put(&quot;utrine&quot;, pList);\r\n    \r\n            DataStream&lt;String&gt; streams = env2.fromElements(mergedData.toString());\r\n            DataStream&lt;String&gt; processedStream = streams.map(new MapFunction&lt;String, String&gt;() {\r\n                @Override\r\n                public String map(String value) throws Exception {\r\n                    RequestSpecification request = RestAssured.given();\r\n                    request.header(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n                    request.body(mergedData.toString());\r\n                    request.post(&quot;http://localhost:5002/fhr1&quot;);\r\n                    return value.concat(&quot; job 1&quot;);\r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n            env2.execute(&quot;Job 1&quot;);\r\n    \r\n    \r\n            return fhr;\r\n    \r\n    \r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\nSimilar to this we have job2 class. Not familiar with flink so I don&#39;t know if this is the correct way to use it. Anyway what I&#39;m trying to do is, Get data from kafka, split it and send to multiple jobs like job1, and I want to send the data from job1 to a flask api. This sending data to flask API should be on every other jobs created.  so this is taking way too much time, the methods used here are scrapped from internet.\r\nAlso we need to scale up the jobs like job1 according to the data splitting.\r\n\r\nThe flink version using is : `1.17.0`\r\n\r\n\r\nI have tried multithreading in splitjob class, I don&#39;t think it worked.\r\nCurrently using a hardcoded data other that data from kafka.\r\nThe overall structure is working but the performance is very poor, and it is taking way too much time to complete. I need to reduce the time to below 10ms, currently its taking 10s.\r\nIs it even possible or should I try any other methods.\r\n\r\n\r\n\r\n","title":"Can I use a flink job to split and send data to multiple jobs according to the incoming data via kafka?","body":"<p>I'm new to <code>Flink</code>. So, this is a flink job which consumes data from kafka and split the data according to some keys and values.</p>\n<p>This is the SplitJob Class</p>\n<pre><code>public class SplitJob {\n    public static void main(String[] args) throws Exception {   \nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\nObjectMapper mapper = new ObjectMapper();\nlong startTime = System.currentTimeMillis();\n\n//For recieving data from kafka\n//        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder().setBootstrapServers(&quot;localhost:9092&quot;).setTopics(&quot;input-topic&quot;).setGroupId(&quot;my-group&quot;).setStartingOffsets(OffsetsInitializer.latest()).setValueOnlyDeserializer(new SimpleStringSchema()).build();\n\n//        DataStream&lt;String&gt; sourceStream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\n\n\n        DataStream&lt;String&gt; sourceStream = env.fromElements(&quot;{\\&quot;deviceId\\&quot;:\\&quot;0\\&quot;,\\&quot;sessionId\\&quot;:\\&quot;0\\&quot;,\\&quot;component\\&quot;:[DATAS....}]}&quot;);\n        DataStream&lt;ObjectNode&gt; jsonStream = sourceStream.map(value -&gt; mapper.readTree(value).deepCopy());\n\n        DataStream&lt;String&gt; data1 = processComponentTwo(jsonStream, &quot;data1&quot;, &quot;hr&quot;);\n        DataStream&lt;String&gt; data2 = processComponentTwo(jsonStream, &quot;data2&quot;, &quot;hr&quot;);\n        DataStream&lt;String&gt; data3 = processComponentTwo(jsonStream, &quot;data3&quot;, &quot;value&quot;);\n        \n\n        Job1.consumeDataStream(data1, data3);\n        Job2.consumeDataStream(data2, data3);\n\n\n        long endTime = System.currentTimeMillis();\n        long elapsedTime = endTime - startTime;\n        System.out.println(&quot;Elapsed time in splitjob:::::: &quot; + elapsedTime + &quot;ms&quot;);\n\n\n        env.execute(&quot;SplitJob&quot;);\n\n\n\n    }\n\n    private static void processComponent(ObjectNode jsonNodes, String code, String field, Collector&lt;String&gt; collector) {\n        List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\n        for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\n            String componentCode = component.get(&quot;code&quot;).asText();\n            if (componentCode.equals(code)) {\n                resultList.add(component.get(field).toString());\n            }\n        }\n        collector.collect(resultList.toString());\n\n    }\n\n\n    private static DataStream&lt;String&gt; processComponentTwo(DataStream&lt;ObjectNode&gt; jsonStream, String componentCode, String field) {\n        return jsonStream.flatMap(new FlatMapFunction&lt;ObjectNode, String&gt;() {\n            @Override\n            public void flatMap(ObjectNode jsonNodes, Collector&lt;String&gt; collector) throws Exception {\n                List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\n                for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\n                    String code = component.get(&quot;code&quot;).asText();\n                    if (code.equals(componentCode)) {\n                        resultList.add(component.get(field).toString());\n                    }\n                }\n                collector.collect(resultList.toString());\n            }\n        });\n    }\n}\n}\n</code></pre>\n<blockquote>\n<p>This is the job1 class</p>\n</blockquote>\n<pre><code>public class Job1 {\n    public static DataStream&lt;String&gt; consumeDataStream(DataStream&lt;String&gt; data, DataStream&lt;String&gt; pdata) throws Exception {\n\n        StreamExecutionEnvironment env2 = StreamExecutionEnvironment.getExecutionEnvironment();\n        env2.setParallelism(2);\n\n\n        ArrayList&lt;String&gt; cdata = new ArrayList&lt;&gt;();\n        Iterator&lt;String&gt; cOutput = DataStreamUtils.collect(data);\n        while (cOutput.hasNext())\n            cdata.add(cOutput.next());\n\n        ArrayList&lt;String&gt; pList = new ArrayList&lt;&gt;();\n        Iterator&lt;String&gt; pOutput = DataStreamUtils.collect(pdata);\n        while (parentOutput.hasNext())\n            pList.add(pOutput.next());\n\n        HashMap&lt;String, ArrayList&lt;String&gt;&gt; mergedData = new HashMap&lt;&gt;();\n        mergedData.put(&quot;fhr1&quot;, cdata);\n        mergedData.put(&quot;utrine&quot;, pList);\n\n        DataStream&lt;String&gt; streams = env2.fromElements(mergedData.toString());\n        DataStream&lt;String&gt; processedStream = streams.map(new MapFunction&lt;String, String&gt;() {\n            @Override\n            public String map(String value) throws Exception {\n                RequestSpecification request = RestAssured.given();\n                request.header(&quot;Content-Type&quot;, &quot;application/json&quot;);\n                request.body(mergedData.toString());\n                request.post(&quot;http://localhost:5002/fhr1&quot;);\n                return value.concat(&quot; job 1&quot;);\n\n            }\n        });\n\n\n        env2.execute(&quot;Job 1&quot;);\n\n\n        return fhr;\n\n\n\n\n    }\n\n\n}\n</code></pre>\n<p>Similar to this we have job2 class. Not familiar with flink so I don't know if this is the correct way to use it. Anyway what I'm trying to do is, Get data from kafka, split it and send to multiple jobs like job1, and I want to send the data from job1 to a flask api. This sending data to flask API should be on every other jobs created.  so this is taking way too much time, the methods used here are scrapped from internet.\nAlso we need to scale up the jobs like job1 according to the data splitting.</p>\n<p>The flink version using is : <code>1.17.0</code></p>\n<p>I have tried multithreading in splitjob class, I don't think it worked.\nCurrently using a hardcoded data other that data from kafka.\nThe overall structure is working but the performance is very poor, and it is taking way too much time to complete. I need to reduce the time to below 10ms, currently its taking 10s.\nIs it even possible or should I try any other methods.</p>\n"},{"tags":["java","spring","spring-boot","swagger","springfox"],"comments":[{"owner":{"account_id":159637,"reputation":2203,"user_id":379173,"display_name":"Enrico Giurin"},"score":0,"creation_date":1678988586,"post_id":74649600,"comment_id":133644163,"body_markdown":"I added the same issue and I sorted it by adding: management.server.port=8082","body":"I added the same issue and I sorted it by adding: management.server.port=8082"}],"answers":[{"tags":[],"owner":{"account_id":21083132,"reputation":3240,"user_id":15496965,"display_name":"Henning"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672494466,"creation_date":1672494466,"answer_id":74969944,"question_id":74649600,"body_markdown":"Springfox has not been maintained for quite some time now. Getting it to work with Spring Boot 2.7 is possible by disabling more recent Spring Boot features but probably not worth your time. It&#39;s unlikely to work at all with Spring Boot 3.\r\n\r\nYou can use Springdoc instead. The migration is usually not much work: https://springdoc.org/migrating-from-springfox.html","title":"Spring Actuator conflicting with Springfox: &#39;documentationPluginsBootstrapper&#39; exception","body":"<p>Springfox has not been maintained for quite some time now. Getting it to work with Spring Boot 2.7 is possible by disabling more recent Spring Boot features but probably not worth your time. It's unlikely to work at all with Spring Boot 3.</p>\n<p>You can use Springdoc instead. The migration is usually not much work: <a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">https://springdoc.org/migrating-from-springfox.html</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1686293428,"post_id":76432214,"comment_id":134781712,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76432214/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":24269568,"reputation":21,"user_id":18217883,"display_name":"Ali"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686648831,"creation_date":1686229883,"answer_id":76432214,"question_id":74649600,"body_markdown":"this also work for me  by using the below property at my bootstrap.properties\r\nmanagement.server.port=0","title":"Spring Actuator conflicting with Springfox: &#39;documentationPluginsBootstrapper&#39; exception","body":"<p>this also work for me  by using the below property at my bootstrap.properties\nmanagement.server.port=0</p>\n"}],"owner":{"account_id":20511311,"reputation":597,"user_id":15053014,"display_name":"ima.technophyle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":835,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1686648831,"creation_date":1669940544,"question_id":74649600,"body_markdown":"I have upgraded my Spring Boot project to 2.7.4 &amp; Springfox to 3.0.0. \r\nBut this resulted in the exception,\r\n\r\n&gt; **Failed to start bean &#39;documentationPluginsBootstrapper&#39;; nested exception is java.lang.NullPointerException**\r\n\r\n\r\nAfter doing some research, I added the following config in the `application.properties`, but the issue was still not fixed.\r\n\r\n    spring.mvc.pathmatch.matching-strategy=ant-path-matcher\r\n\r\nThen I found out that, **Spring Actuator** is causing this issue, and setting the following property fixed the issue.\r\n\r\n    management.server.port=8082\r\n\r\nI don&#39;t want to define a custom management port, instead I want it to take the default server port. \r\n\r\nWhy is Actuator conflicting with Springfox? How do I fix this issue?\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;spring.cloud-version&gt;2021.0.4&lt;/spring.cloud-version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n**Springfox Swagger Config**\r\n\r\n    @Configuration\r\n    @EnableSwagger2\r\n    public class SwaggerConfig {\r\n    \r\n        @Bean\r\n    \tpublic Docket productApi() {\r\n    \t\treturn new Docket(DocumentationType.SWAGGER_2).select()\r\n    \t\t\t\t.apis(RequestHandlerSelectors.basePackage(&quot;com.swagger.io&quot;)).paths(PathSelectors.any()).build();\r\n    \t}\r\n    }\r\n\r\n","title":"Spring Actuator conflicting with Springfox: &#39;documentationPluginsBootstrapper&#39; exception","body":"<p>I have upgraded my Spring Boot project to 2.7.4 &amp; Springfox to 3.0.0.\nBut this resulted in the exception,</p>\n<blockquote>\n<p><strong>Failed to start bean 'documentationPluginsBootstrapper'; nested exception is java.lang.NullPointerException</strong></p>\n</blockquote>\n<p>After doing some research, I added the following config in the <code>application.properties</code>, but the issue was still not fixed.</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy=ant-path-matcher\n</code></pre>\n<p>Then I found out that, <strong>Spring Actuator</strong> is causing this issue, and setting the following property fixed the issue.</p>\n<pre><code>management.server.port=8082\n</code></pre>\n<p>I don't want to define a custom management port, instead I want it to take the default server port.</p>\n<p>Why is Actuator conflicting with Springfox? How do I fix this issue?</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;relativePath /&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring.cloud-version&gt;2021.0.4&lt;/spring.cloud-version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p><strong>Springfox Swagger Config</strong></p>\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n\n    @Bean\n    public Docket productApi() {\n        return new Docket(DocumentationType.SWAGGER_2).select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.swagger.io&quot;)).paths(PathSelectors.any()).build();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-data","spring-data-jpa"],"comments":[{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1526472931,"post_id":50370376,"comment_id":87757220,"body_markdown":"Post your hibernate `Entity` and `service`, `DAO` class","body":"Post your hibernate <code>Entity</code> and <code>service</code>, <code>DAO</code> class"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1526477326,"post_id":50370376,"comment_id":87760366,"body_markdown":"It is a single transaction and thus atomic either everything succeeds or everything fails. If that isn&#39;t happening with plain SQL then it isn&#39;t transactional and each statement is executed in its own transaction. So I would say the error is on your plain sql side and not the Spring side (as it adhere&#39;s to the ACID principles of the transaction whereas the SQL one isn&#39;t).","body":"It is a single transaction and thus atomic either everything succeeds or everything fails. If that isn&#39;t happening with plain SQL then it isn&#39;t transactional and each statement is executed in its own transaction. So I would say the error is on your plain sql side and not the Spring side (as it adhere&#39;s to the ACID principles of the transaction whereas the SQL one isn&#39;t)."},{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1593436383,"post_id":50370376,"comment_id":110772450,"body_markdown":"Make sure that transactions are even enabled in Spring. It&#39;s usually done with `@EnableTransactionManagement` annotation on application class or any included `@Configuration` class","body":"Make sure that transactions are even enabled in Spring. It&#39;s usually done with <code>@EnableTransactionManagement</code> annotation on application class or any included <code>@Configuration</code> class"}],"answers":[{"tags":[],"owner":{"account_id":7268607,"reputation":174,"user_id":5542464,"display_name":"RKT"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1526472311,"creation_date":1526472311,"answer_id":50370469,"question_id":50370376,"body_markdown":"Use flush between deleteall and save.","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>Use flush between deleteall and save.</p>\n"},{"comments":[{"owner":{"account_id":5557928,"reputation":2328,"user_id":4408619,"display_name":"Azzabi Haythem"},"score":0,"creation_date":1620219090,"post_id":62637878,"comment_id":119135026,"body_markdown":"good answer but is better to use JpaRepository or CrudRepository","body":"good answer but is better to use JpaRepository or CrudRepository"},{"owner":{"account_id":5359035,"reputation":173,"user_id":4270929,"display_name":"Paweł Sosnowski"},"score":0,"creation_date":1689757575,"post_id":62637878,"comment_id":135257105,"body_markdown":"Flush is needed to send instructions to database, but is not committing them so you can still rollback if one instruction fails. If you won&#39;t flush, all instructions are cached and executed when you commit them, that&#39;s why it is failing. https://stackoverflow.com/a/4275973/4270929","body":"Flush is needed to send instructions to database, but is not committing them so you can still rollback if one instruction fails. If you won&#39;t flush, all instructions are cached and executed when you commit them, that&#39;s why it is failing. <a href=\"https://stackoverflow.com/a/4275973/4270929\">stackoverflow.com/a/4275973/4270929</a>"}],"tags":[],"owner":{"account_id":16342236,"reputation":111,"user_id":11802878,"display_name":"runtime_expection"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1593432781,"creation_date":1593432781,"answer_id":62637878,"question_id":50370376,"body_markdown":"Anyone else stumbling upon this problem. I managed to get it work with writing own deleteAll Method in RepositoryInterface and setting annotation like this:\r\n\r\n    @Modifying(flushAutomatically = true)\r\n    @Query(&quot;delete from MyEntity&quot;)\r\n    void deleteAllCustom()\r\n\r\n","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>Anyone else stumbling upon this problem. I managed to get it work with writing own deleteAll Method in RepositoryInterface and setting annotation like this:</p>\n<pre><code>@Modifying(flushAutomatically = true)\n@Query(&quot;delete from MyEntity&quot;)\nvoid deleteAllCustom()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13291674,"reputation":865,"user_id":11423910,"display_name":"soufiane ELAMMARI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650541520,"creation_date":1650541520,"answer_id":71953907,"question_id":50370376,"body_markdown":"  Heey Warriors,finally this works for me.\r\n  \r\n    @Modifying(flushAutomatically = true)\r\n    @Transactional\r\n    void deleteByProjet(Projet projet);\r\n\r\n  Good Luck ;) ","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>Heey Warriors,finally this works for me.</p>\n<pre><code>@Modifying(flushAutomatically = true)\n@Transactional\nvoid deleteByProjet(Projet projet);\n</code></pre>\n<p>Good Luck ;)</p>\n"},{"comments":[{"owner":{"account_id":1711539,"reputation":154,"user_id":1569502,"display_name":"Shaolin"},"score":0,"creation_date":1686649000,"post_id":72452608,"comment_id":134824581,"body_markdown":"The order of actions is defined. See my answer.","body":"The order of actions is defined. See my answer."},{"owner":{"account_id":3378723,"reputation":948,"user_id":2836301,"display_name":"Tonsic"},"score":0,"creation_date":1686864581,"post_id":72452608,"comment_id":134860892,"body_markdown":"Cool, but deleteAllInBatch is still much better than deleteAll+flushs, because it prevents the items I mentioned, plus IMHO avoids the dev having to know the low-level order of actions of a flush, something that should be transparent, abstracted away detail.","body":"Cool, but deleteAllInBatch is still much better than deleteAll+flushs, because it prevents the items I mentioned, plus IMHO avoids the dev having to know the low-level order of actions of a flush, something that should be transparent, abstracted away detail."}],"tags":[],"owner":{"account_id":3378723,"reputation":948,"user_id":2836301,"display_name":"Tonsic"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654021988,"creation_date":1654021988,"answer_id":72452608,"question_id":50370376,"body_markdown":"I just changed from `deleteAll` to `deleteAllInBatch` (`JpaRepository` interface) and it worked.\r\n\r\n`deleteAllInBatch` results in Hibernate registering a prepared statement `delete from yourtable` right when `deleteAllInBatch` is called.\r\n\r\nWith `deleteAll`, Hibernate\r\n1. select all your data into memory, as entities\r\n1. for each entity, it calls EntityManager.delete\r\n1. each delete generates a `EntityDeleteAction` which will be called when transaction ends and session flushes. But for whatever reason, the actions for the inserts end up being called before the deletes (maybe the order is unpredictable, I&#39;m not sure).","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>I just changed from <code>deleteAll</code> to <code>deleteAllInBatch</code> (<code>JpaRepository</code> interface) and it worked.</p>\n<p><code>deleteAllInBatch</code> results in Hibernate registering a prepared statement <code>delete from yourtable</code> right when <code>deleteAllInBatch</code> is called.</p>\n<p>With <code>deleteAll</code>, Hibernate</p>\n<ol>\n<li>select all your data into memory, as entities</li>\n<li>for each entity, it calls EntityManager.delete</li>\n<li>each delete generates a <code>EntityDeleteAction</code> which will be called when transaction ends and session flushes. But for whatever reason, the actions for the inserts end up being called before the deletes (maybe the order is unpredictable, I'm not sure).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1711539,"reputation":154,"user_id":1569502,"display_name":"Shaolin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686648797,"creation_date":1686648797,"answer_id":76463510,"question_id":50370376,"body_markdown":"It&#39;s important to understand why it happens. There is a defined order of actions performed while flushing the transaction:\r\n\r\n\r\n    OrphanRemovalAction\r\n    AbstractEntityInsertAction\r\n    EntityUpdateAction\r\n    QueuedOperationCollectionAction\r\n    CollectionRemoveAction\r\n    CollectionUpdateAction\r\n    CollectionRecreateAction\r\n    EntityDeleteAction\r\n\r\nAs you can see. The deletion actions are performed after insert actions.\r\n\r\nTo avoid possible constraint problems you need to flush between deleteAll and inserts.","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>It's important to understand why it happens. There is a defined order of actions performed while flushing the transaction:</p>\n<pre><code>OrphanRemovalAction\nAbstractEntityInsertAction\nEntityUpdateAction\nQueuedOperationCollectionAction\nCollectionRemoveAction\nCollectionUpdateAction\nCollectionRecreateAction\nEntityDeleteAction\n</code></pre>\n<p>As you can see. The deletion actions are performed after insert actions.</p>\n<p>To avoid possible constraint problems you need to flush between deleteAll and inserts.</p>\n"}],"owner":{"account_id":186428,"reputation":51,"user_id":9799756,"display_name":"Shameer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12074,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1686648797,"creation_date":1526472015,"question_id":50370376,"body_markdown":"I am trying to achieve below native query logic using hibernate (Spring JPA). But save(Iterable) throws exception and rollback the entire transaction if one of the record fails to persist. Is there any way to do to catch the record error and proceed with insertion on other records.\r\n\r\neg:- \r\n\r\nNative Sql Query\r\n\r\n    set autocommit=false\r\n    delete from EMPLOYEE;\r\n    insert into EMPLOYEE(id, name, sal) values(2, ‘Roy’, ‘rt’); —-stmt1\r\n    insert into EMPLOYEE(id, name, sal) values(2, ‘Joe’, 3000);\r\n    commit;\r\n\r\nNote: sal column is numeric in EMPLOYEE table. Execution continues eventhough stmt1 failed.\r\n\r\nHibernate (CrudRepository)\r\n\r\n    \r\n    @Autowired\r\n    CrudRepository employeeRepository;\r\n\r\n    @Transactional\r\n    public void saveToDB(List dataList) {\r\n       employeeRepository.deleteAll();\r\n       employeeRepository.save(dataList);\r\n    }\r\n\r\n\r\n\r\n","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>I am trying to achieve below native query logic using hibernate (Spring JPA). But save(Iterable) throws exception and rollback the entire transaction if one of the record fails to persist. Is there any way to do to catch the record error and proceed with insertion on other records.</p>\n\n<p>eg:- </p>\n\n<p>Native Sql Query</p>\n\n<pre><code>set autocommit=false\ndelete from EMPLOYEE;\ninsert into EMPLOYEE(id, name, sal) values(2, ‘Roy’, ‘rt’); —-stmt1\ninsert into EMPLOYEE(id, name, sal) values(2, ‘Joe’, 3000);\ncommit;\n</code></pre>\n\n<p>Note: sal column is numeric in EMPLOYEE table. Execution continues eventhough stmt1 failed.</p>\n\n<p>Hibernate (CrudRepository)</p>\n\n<pre><code>@Autowired\nCrudRepository employeeRepository;\n\n@Transactional\npublic void saveToDB(List dataList) {\n   employeeRepository.deleteAll();\n   employeeRepository.save(dataList);\n}\n</code></pre>\n"},{"tags":["java","jms","messaging","spring-messaging"],"owner":{"account_id":28810991,"reputation":1,"user_id":22065694,"display_name":"Praneeth Kukunuru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686647242,"creation_date":1686647242,"question_id":76463315,"body_markdown":"I am new to JMS and APIs. I started working on a messaging platform to try and connect the Glassfish local server to start sending and receiving messages through the server. \r\nHowever, I don&#39;t understand how to set up the Initial Context to recognize where the server is, and what to connect to. \r\nWhen I run this, I get a NoInitialContextException.\r\n\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\nimport javax.naming.*;\r\nimport javax.jms.*;\r\n\r\npublic class Sender {\r\n    public static void main(String[] args) {\r\n        try {\r\n            InitialContext ctx = new InitialContext();\r\n            QueueConnectionFactory f = (QueueConnectionFactory)ctx.lookup(&quot;java:comp/DefaultJMSConnectionFactory&quot;);\r\n            QueueConnection con = f.createQueueConnection();\r\n            con.start();\r\n            QueueSession ses=con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\r\n            //3) get the Queue object\r\n            Queue t=(Queue)ctx.lookup(&quot;PTPQueue&quot;);\r\n            //4)create QueueSender object\r\n            QueueSender sender=ses.createSender(t);\r\n            //5) create TextMessage object\r\n            TextMessage msg=ses.createTextMessage();\r\n\r\n            //6) write message\r\n            BufferedReader b=new BufferedReader(new InputStreamReader(System.in));\r\n            while (true) {\r\n                System.out.println(&quot;Enter Msg, end to terminate:&quot;);\r\n                String s=b.readLine();\r\n                if (s.equals(&quot;end&quot;)) {\r\n                    break;\r\n                }\r\n                msg.setText(s);\r\n                //7) send message\r\n                sender.send(msg);\r\n                System.out.println(&quot;Message successfully sent.&quot;);\r\n            }\r\n            //8) connection close\r\n            con.close();\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI expected it to try to connect with the server, but nothing happened. How do I change this so that I can access the server? I have heard of a jndi.properties file but I am not sure how to use that here.\r\nI am using Intellij, so is there an easy fix to connect the server there and work from there?\r\n","title":"JMS: How do I connect my localhost glassfish server to the project I am working on?","body":"<p>I am new to JMS and APIs. I started working on a messaging platform to try and connect the Glassfish local server to start sending and receiving messages through the server.\nHowever, I don't understand how to set up the Initial Context to recognize where the server is, and what to connect to.\nWhen I run this, I get a NoInitialContextException.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport javax.naming.*;\nimport javax.jms.*;\n\npublic class Sender {\n    public static void main(String[] args) {\n        try {\n            InitialContext ctx = new InitialContext();\n            QueueConnectionFactory f = (QueueConnectionFactory)ctx.lookup(&quot;java:comp/DefaultJMSConnectionFactory&quot;);\n            QueueConnection con = f.createQueueConnection();\n            con.start();\n            QueueSession ses=con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n            //3) get the Queue object\n            Queue t=(Queue)ctx.lookup(&quot;PTPQueue&quot;);\n            //4)create QueueSender object\n            QueueSender sender=ses.createSender(t);\n            //5) create TextMessage object\n            TextMessage msg=ses.createTextMessage();\n\n            //6) write message\n            BufferedReader b=new BufferedReader(new InputStreamReader(System.in));\n            while (true) {\n                System.out.println(&quot;Enter Msg, end to terminate:&quot;);\n                String s=b.readLine();\n                if (s.equals(&quot;end&quot;)) {\n                    break;\n                }\n                msg.setText(s);\n                //7) send message\n                sender.send(msg);\n                System.out.println(&quot;Message successfully sent.&quot;);\n            }\n            //8) connection close\n            con.close();\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\n\n</code></pre>\n<p>I expected it to try to connect with the server, but nothing happened. How do I change this so that I can access the server? I have heard of a jndi.properties file but I am not sure how to use that here.\nI am using Intellij, so is there an easy fix to connect the server there and work from there?</p>\n"},{"tags":["java","spring-boot","graalvm-native-image","jasypt","spring-native"],"comments":[{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1685549289,"post_id":76366216,"comment_id":134676832,"body_markdown":"The file should be named `reflect-config.json`. Also, its location is important. What&#39;s its path relative to the root of your project?","body":"The file should be named <code>reflect-config.json</code>. Also, its location is important. What&#39;s its path relative to the root of your project?"},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685634229,"post_id":76366216,"comment_id":134691037,"body_markdown":"I use the graalvmNative plugin from gradle with the configuration option &#39;ReflectionConfigurationFiles&#39;. The value points to the file &#39;./../../src/main/resources/reflect-config.json&#39;.","body":"I use the graalvmNative plugin from gradle with the configuration option &#39;ReflectionConfigurationFiles&#39;. The value points to the file &#39;./../../src/main/resources/reflect-config.json&#39;."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1685648882,"post_id":76366216,"comment_id":134693973,"body_markdown":"Why does the path begin `../../../`? Have you verified that Graal is finding and using it when building the image?","body":"Why does the path begin <code>..&#47;..&#47;..&#47;</code>? Have you verified that Graal is finding and using it when building the image?"},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685655784,"post_id":76366216,"comment_id":134695209,"body_markdown":"Without the trailing &#39;../../../&#39; the reflect-config.json cannot be found and the build fails with an appropriate error message.\n\nWhen I search for the &quot;com.ibm.icu.text.Normalizer&quot; value in the target image, the following files are present:\n./src/main/resources/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\n./src/main/resources/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;,\n./build/resources/main/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\n./build/resources/main/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;,","body":"Without the trailing &#39;../../../&#39; the reflect-config.json cannot be found and the build fails with an appropriate error message.  When I search for the &quot;com.ibm.icu.text.Normalizer&quot; value in the target image, the following files are present: ./src/main/resources/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;, ./src/main/resources/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;, ./build/resources/main/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;, ./build/resources/main/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;,"},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685694122,"post_id":76366216,"comment_id":134699723,"body_markdown":"Of course, I didn&#39;t mean &#39;trailing&#39; but prefixed.","body":"Of course, I didn&#39;t mean &#39;trailing&#39; but prefixed."},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685702224,"post_id":76366216,"comment_id":134701366,"body_markdown":"I have added a small demo repository to demonstrate the problem, I hope this is helpful (https://github.com/benocms/spring-native.test.git).","body":"I have added a small demo repository to demonstrate the problem, I hope this is helpful (<a href=\"https://github.com/benocms/spring-native.test.git\" rel=\"nofollow noreferrer\">github.com/benocms/spring-native.test.git</a>)."}],"answers":[{"comments":[{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685521466,"post_id":76367090,"comment_id":134670245,"body_markdown":"Thank you very much for the hint. I tried to add some reflection hints in the json file (see my updated question). Unfortunately without success.","body":"Thank you very much for the hint. I tried to add some reflection hints in the json file (see my updated question). Unfortunately without success."}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685466187,"creation_date":1685466187,"answer_id":76367090,"question_id":76366216,"body_markdown":"Jasypt [uses reflection](https://github.com/jasypt/jasypt/blob/d384f9a755af2938bc142f7575365bee42ba5f22/jasypt/src/main/java/org/jasypt/normalization/Normalizer.java) to load the normalizer classes. It tries `com.ibm.icu.text.Normalizer` first and then, if that doesn&#39;t work, it tries `java.text.Normalizer`.\r\n\r\nGraalVM can&#39;t tell that these classes are required so they aren&#39;t included in the native image and aren&#39;t, therefore, available to be loaded via reflection. You can correct this by [providing some hints to GraalVM](https://docs.spring.io/spring-framework/reference/core/aot.html#aot.hints).","title":"Spring Boot Native: Error withe the &#39; jasypt-spring-boot&#39; module","body":"<p>Jasypt <a href=\"https://github.com/jasypt/jasypt/blob/d384f9a755af2938bc142f7575365bee42ba5f22/jasypt/src/main/java/org/jasypt/normalization/Normalizer.java\" rel=\"nofollow noreferrer\">uses reflection</a> to load the normalizer classes. It tries <code>com.ibm.icu.text.Normalizer</code> first and then, if that doesn't work, it tries <code>java.text.Normalizer</code>.</p>\n<p>GraalVM can't tell that these classes are required so they aren't included in the native image and aren't, therefore, available to be loaded via reflection. You can correct this by <a href=\"https://docs.spring.io/spring-framework/reference/core/aot.html#aot.hints\" rel=\"nofollow noreferrer\">providing some hints to GraalVM</a>.</p>\n"}],"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686646315,"creation_date":1685459218,"question_id":76366216,"body_markdown":"I am trying to create a native executable from my Spring Boot 3.0.7 app (Java 17) using GraalVM. I am using GraalVM in a Docker build to create the native executable. I am using the &quot;jasypt-spring-boot&quot; (3.0.5) library to store the required app passwords in encrypted form.\r\n\r\nThe compilation of the app also seems to work from my point of view. However, the following error occurs when starting the app:\r\n\r\n&gt; *************************** \r\n&gt; APPLICATION FAILED TO START\r\n&gt; ***************************\r\n&gt; \r\n&gt; Description:\r\n&gt; \r\n&gt; Failed to bind properties under &#39;bla.passwd&#39; to java.lang.String:\r\n&gt; \r\n&gt; Reason: org.jasypt.exceptions.EncryptionInitializationException:\r\n&gt; Cannot find a valid UNICODE normalizer: neither java.text.Normalizer\r\n&gt; nor com.ibm.icu.text.Normalizer have been found at the classpath. If\r\n&gt; you are using a version of the JDK older than JavaSE 6, you should\r\n&gt; include the icu4j library in your classpath.\r\n\r\nThe encrypted passwords contain only ASCII characters. \r\n\r\n**Update:**\r\nI tried adding some reflection hints in my reflection-config.json, unfortunately without success:\r\n\r\n      {\r\n        &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\r\n        &quot;allDeclaredConstructors&quot;: true,\r\n        &quot;allPublicConstructors&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allPublicMethods&quot;: true,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allPublicFields&quot;: true,\r\n        &quot;allDeclaredClasses&quot;: true,\r\n        &quot;allPublicClasses&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;java.text.Normalizer&quot;,\r\n        &quot;allDeclaredConstructors&quot;: true,\r\n        &quot;allPublicConstructors&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allPublicMethods&quot;: true,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allPublicFields&quot;: true,\r\n        &quot;allDeclaredClasses&quot;: true,\r\n        &quot;allPublicClasses&quot;: true\r\n      }\r\n\r\nIn my gradle script I have set the following configuration:\r\n\r\n    graalvmNative {\r\n        binaries {\r\n            all {\r\n                resources.autodetect()\r\n            }\r\n            main {\r\n                imageName.set(&#39;my-service&#39;)\r\n                buildArgs.add(&#39;--verbose&#39;)\r\n                buildArgs.add(&#39;-H:ReflectionConfigurationFiles=../../../src/main/resources/reflect-config.json&#39;)\r\n            }\r\n        }\r\n    }\r\n\r\nI have added a small demo repository to demonstrate the issue:\r\nhttps://github.com/benocms/spring-native.test.git\r\n\r\nHas anyone here had similar experiences and can possibly give me a hint? \r\n\r\nThank you very much.\r\n","title":"Spring Boot Native: Error withe the &#39; jasypt-spring-boot&#39; module","body":"<p>I am trying to create a native executable from my Spring Boot 3.0.7 app (Java 17) using GraalVM. I am using GraalVM in a Docker build to create the native executable. I am using the &quot;jasypt-spring-boot&quot; (3.0.5) library to store the required app passwords in encrypted form.</p>\n<p>The compilation of the app also seems to work from my point of view. However, the following error occurs when starting the app:</p>\n<blockquote>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Failed to bind properties under 'bla.passwd' to java.lang.String:</p>\n<p>Reason: org.jasypt.exceptions.EncryptionInitializationException:\nCannot find a valid UNICODE normalizer: neither java.text.Normalizer\nnor com.ibm.icu.text.Normalizer have been found at the classpath. If\nyou are using a version of the JDK older than JavaSE 6, you should\ninclude the icu4j library in your classpath.</p>\n</blockquote>\n<p>The encrypted passwords contain only ASCII characters.</p>\n<p><strong>Update:</strong>\nI tried adding some reflection hints in my reflection-config.json, unfortunately without success:</p>\n<pre><code>  {\n    &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\n    &quot;allDeclaredConstructors&quot;: true,\n    &quot;allPublicConstructors&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allPublicMethods&quot;: true,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allPublicFields&quot;: true,\n    &quot;allDeclaredClasses&quot;: true,\n    &quot;allPublicClasses&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;java.text.Normalizer&quot;,\n    &quot;allDeclaredConstructors&quot;: true,\n    &quot;allPublicConstructors&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allPublicMethods&quot;: true,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allPublicFields&quot;: true,\n    &quot;allDeclaredClasses&quot;: true,\n    &quot;allPublicClasses&quot;: true\n  }\n</code></pre>\n<p>In my gradle script I have set the following configuration:</p>\n<pre><code>graalvmNative {\n    binaries {\n        all {\n            resources.autodetect()\n        }\n        main {\n            imageName.set('my-service')\n            buildArgs.add('--verbose')\n            buildArgs.add('-H:ReflectionConfigurationFiles=../../../src/main/resources/reflect-config.json')\n        }\n    }\n}\n</code></pre>\n<p>I have added a small demo repository to demonstrate the issue:\n<a href=\"https://github.com/benocms/spring-native.test.git\" rel=\"nofollow noreferrer\">https://github.com/benocms/spring-native.test.git</a></p>\n<p>Has anyone here had similar experiences and can possibly give me a hint?</p>\n<p>Thank you very much.</p>\n"},{"tags":["java","file-io","xls"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1337945236,"post_id":10753562,"comment_id":13975216,"body_markdown":"You&#39;ve given us a lot of code - please show which exact line throws the exception. (Print the exception stack trace to find it out - not just the message...)","body":"You&#39;ve given us a lot of code - please show which exact line throws the exception. (Print the exception stack trace to find it out - not just the message...)"},{"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"score":0,"creation_date":1337945535,"post_id":10753562,"comment_id":13975340,"body_markdown":"i didnt debug the code.problem is when i am giving less numbers in contacts.txt file i am not getting this error. when i am running with 36000 numbers in contacts.txt file its giving the invalid row number error","body":"i didnt debug the code.problem is when i am giving less numbers in contacts.txt file i am not getting this error. when i am running with 36000 numbers in contacts.txt file its giving the invalid row number error"},{"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"score":0,"creation_date":1337945641,"post_id":10753562,"comment_id":13975377,"body_markdown":"I would try running with a subset of your file and examining the output. It&#39;s possible that you&#39;re creating multiple rows per contact.","body":"I would try running with a subset of your file and examining the output. It&#39;s possible that you&#39;re creating multiple rows per contact."},{"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"score":0,"creation_date":1337946347,"post_id":10753562,"comment_id":13975642,"body_markdown":"yes i am creating multiple rows per contact .. i want the output  in that way only","body":"yes i am creating multiple rows per contact .. i want the output  in that way only"}],"answers":[{"tags":[],"owner":{"account_id":232474,"reputation":5506,"user_id":497339,"display_name":"brain"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1337945243,"creation_date":1337945243,"answer_id":10753591,"question_id":10753562,"body_markdown":"Excel (perhaps only older versions) only allow 65535 rows.\r\n\r\nHere&#39;s a [link][1]to the Excel 2003 limits, which is indeed 65535 rows. It got increased for 2010 to [1,048,576][2]. \r\n\r\n\r\n  [1]: http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx\r\n  [2]: http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=5&amp;origin=HP005199291","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>Excel (perhaps only older versions) only allow 65535 rows.</p>\n\n<p>Here's a <a href=\"http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx\" rel=\"nofollow\">link</a>to the Excel 2003 limits, which is indeed 65535 rows. It got increased for 2010 to <a href=\"http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=5&amp;origin=HP005199291\" rel=\"nofollow\">1,048,576</a>. </p>\n"},{"comments":[{"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"score":2,"creation_date":1337946882,"post_id":10753655,"comment_id":13975824,"body_markdown":"It may be as simple as replacing `new HSSFWorkbook()` with `new XSSFWorkbook()`, and removing references to `HSSF` from method calls. The APIs are supposed to be pretty similar, according  to http://poi.apache.org/spreadsheet/converting.html, which you should read through. Make sure you are using a recent version of the poi JAR.","body":"It may be as simple as replacing <code>new HSSFWorkbook()</code> with <code>new XSSFWorkbook()</code>, and removing references to <code>HSSF</code> from method calls. The APIs are supposed to be pretty similar, according  to <a href=\"http://poi.apache.org/spreadsheet/converting.html\" rel=\"nofollow noreferrer\">poi.apache.org/spreadsheet/converting.html</a>, which you should read through. Make sure you are using a recent version of the poi JAR."},{"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"score":0,"creation_date":1338192813,"post_id":10753655,"comment_id":14021239,"body_markdown":"finally used 8 jars and executed successfully","body":"finally used 8 jars and executed successfully"}],"tags":[],"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"comment_count":2,"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1337947037,"creation_date":1337945481,"answer_id":10753655,"question_id":10753562,"body_markdown":"HSSF targets a version of Excel (Excel 2003) which only supports a maximum of 65536 rows.\r\n\r\nYou could try using the newer [XSSF][1] API instead, which supports later versions of Excel which have a more generous row limit.\r\n\r\nThere is a [conversion guide][2] which will help you convert between the two APIs.\r\n\r\n  [1]: http://poi.apache.org/spreadsheet/index.html\r\n  [2]: http://poi.apache.org/spreadsheet/converting.html","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>HSSF targets a version of Excel (Excel 2003) which only supports a maximum of 65536 rows.</p>\n\n<p>You could try using the newer <a href=\"http://poi.apache.org/spreadsheet/index.html\" rel=\"noreferrer\">XSSF</a> API instead, which supports later versions of Excel which have a more generous row limit.</p>\n\n<p>There is a <a href=\"http://poi.apache.org/spreadsheet/converting.html\" rel=\"noreferrer\">conversion guide</a> which will help you convert between the two APIs.</p>\n"},{"tags":[],"owner":{"account_id":968470,"reputation":5711,"user_id":991479,"display_name":"Ewald"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1337945657,"creation_date":1337945657,"answer_id":10753703,"question_id":10753562,"body_markdown":"If you only have 36000 items in the text file, something else must be wrong.\r\n\r\nCreate a small sample, of let&#39;s say, 100 entries, and test with that.\r\n\r\nTake a careful look at the resulting Excel file, if you can. It looks as if the following piece of code is your problem:\r\n\r\n    while(rs.next()){                   \r\n\r\n            external_person_org_id = rs.getInt(1);\r\n\r\n            HSSFRow row = sheet.createRow(index);\r\n                row.createCell(0).setCellValue(person_org_id);\r\n                row.createCell(1).setCellValue(external_person_org_id);\r\n                index++;\r\n            }       \r\n\r\nI&#39;m just guessing, but won&#39;t the fact that the index++ is in the WHILE cause it to create a new row each time for EVERY entry in a record set? ","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>If you only have 36000 items in the text file, something else must be wrong.</p>\n\n<p>Create a small sample, of let's say, 100 entries, and test with that.</p>\n\n<p>Take a careful look at the resulting Excel file, if you can. It looks as if the following piece of code is your problem:</p>\n\n<pre><code>while(rs.next()){                   \n\n        external_person_org_id = rs.getInt(1);\n\n        HSSFRow row = sheet.createRow(index);\n            row.createCell(0).setCellValue(person_org_id);\n            row.createCell(1).setCellValue(external_person_org_id);\n            index++;\n        }       \n</code></pre>\n\n<p>I'm just guessing, but won't the fact that the index++ is in the WHILE cause it to create a new row each time for EVERY entry in a record set? </p>\n"},{"comments":[{"owner":{"account_id":9815,"reputation":1263,"user_id":18274,"accept_rate":92,"display_name":"AtliB"},"score":1,"creation_date":1516202854,"post_id":41036175,"comment_id":83594016,"body_markdown":"Data type &#180;short&#180; has that range, not int:  By default, the int data type is a 32-bit signed two&#39;s complement integer, which has a minimum value of -2^31 and a maximum value of 2^31-1. In Java SE 8 and later, you can use the int data type to represent an unsigned 32-bit integer, which has a minimum value of 0 and a maximum value of 2^32-1. Use the Integer class to use int data type as an unsigned integer","body":"Data type &#180;short&#180; has that range, not int:  By default, the int data type is a 32-bit signed two&#39;s complement integer, which has a minimum value of -2^31 and a maximum value of 2^31-1. In Java SE 8 and later, you can use the int data type to represent an unsigned 32-bit integer, which has a minimum value of 0 and a maximum value of 2^32-1. Use the Integer class to use int data type as an unsigned integer"}],"tags":[],"owner":{"account_id":9807620,"reputation":1,"user_id":7266847,"display_name":"Zechreich"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481195255,"creation_date":1481190089,"answer_id":41036175,"question_id":10753562,"body_markdown":"&lt;!-- language: c++ --&gt;\r\n\r\n    int person_org_id, external_person_org_id;\r\n\r\nyou need to change int variable become Integer, there are limit from primitive and cannot more than `-32767` to `32767`","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<pre class=\"lang-cpp prettyprint-override\"><code>int person_org_id, external_person_org_id;\n</code></pre>\n\n<p>you need to change int variable become Integer, there are limit from primitive and cannot more than <code>-32767</code> to <code>32767</code></p>\n"},{"tags":[],"owner":{"account_id":28801825,"reputation":1,"user_id":22058521,"display_name":"ravi kumar p"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686644599,"creation_date":1686547228,"answer_id":76453801,"question_id":10753562,"body_markdown":"    &lt;h:commandButton styleClass=&quot;dataExporter&quot;\r\n      value=&quot;#{o:translate(&#39;Export As Excel&#39;)}&quot; style=&quot;margin-left:5px&quot;&gt;\r\n    \t&lt;p:dataExporter type=&quot;**xls**&quot; target=&quot;deviceAuditTable&quot; fileName=&quot;DeviceAudit&quot;/&gt;\r\n    &lt;/h:commandButton&gt;\r\n\r\nWhen you `new HSSFWorkbook()` with `new XSSFWorkbook()`, and removing references to HSSF from method calls and also make sure file extension also, for `new XSSFWorkBook()` here the file type **xlsx** \r\n\t\r\n    &lt;h:commandButton styleClass=&quot;dataExporter&quot;\r\n    \t\t\t\t\t\t\tvalue=&quot;#{o:translate(&#39;Export As Excel&#39;)}&quot; style=&quot;margin-left:5px&quot;&gt;\r\n    \t&lt;p:dataExporter type=&quot;xlsx&quot; target=&quot;deviceAuditTable&quot;\r\n    \t\t\t\t\t\t\t\tfileName=&quot;DeviceAudit&quot; /&gt;\r\n    &lt;/h:commandButton&gt;\r\n\r\n","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<pre><code>&lt;h:commandButton styleClass=&quot;dataExporter&quot;\n  value=&quot;#{o:translate('Export As Excel')}&quot; style=&quot;margin-left:5px&quot;&gt;\n    &lt;p:dataExporter type=&quot;**xls**&quot; target=&quot;deviceAuditTable&quot; fileName=&quot;DeviceAudit&quot;/&gt;\n&lt;/h:commandButton&gt;\n</code></pre>\n<p>When you <code>new HSSFWorkbook()</code> with <code>new XSSFWorkbook()</code>, and removing references to HSSF from method calls and also make sure file extension also, for <code>new XSSFWorkBook()</code> here the file type <strong>xlsx</strong></p>\n<pre><code>&lt;h:commandButton styleClass=&quot;dataExporter&quot;\n                            value=&quot;#{o:translate('Export As Excel')}&quot; style=&quot;margin-left:5px&quot;&gt;\n    &lt;p:dataExporter type=&quot;xlsx&quot; target=&quot;deviceAuditTable&quot;\n                                fileName=&quot;DeviceAudit&quot; /&gt;\n&lt;/h:commandButton&gt;\n</code></pre>\n"}],"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61231,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":10753655,"answer_count":5,"score":29,"last_activity_date":1686644599,"creation_date":1337945148,"question_id":10753562,"body_markdown":"I am reading integers from a text file, giving them as input to a query and getting the query output and writing to an xls file.\r\n\r\n    ResultSet rs;\r\n    Connection con = null;\r\n    PreparedStatement ps = null;\r\n    int person_org_id, external_person_org_id;\r\n    File f = null;\r\n    Scanner scan = null;\r\n\t\t\t\t\r\n    try {\r\n        System.out.println(&quot;----------checkpoint-----------&quot;);\r\n        Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\r\n        System.out.println(&quot;----------checkpoint 1-----------&quot;);\r\n        con = DriverManager.getConnection(&quot;jdbc:oracle:thin:@ksdjf.kjdlk.jkd.com:2222:edb&quot;, &quot;aaaaa&quot;, &quot;aaaa&quot;);\r\n        System.out.println(&quot;----------checkpoint 2 ----------&quot;);\r\n        if (con == null) {\r\n            System.out.println(&quot;unable to connect to database&quot;);\r\n        }\r\n        System.out.println(&quot;----------checkpoint 3::connected to database---------&quot;);\r\n        StringBuffer sql = new StringBuffer();\r\n        sql.append(&quot;select abd from edb.abd where customer_id=510 and person_org_id =? &quot;);\r\n        ps = con.prepareStatement(sql.toString());\r\n\r\n        HSSFWorkbook wb = new HSSFWorkbook();\r\n        HSSFSheet sheet = wb.createSheet(&quot;Excel Sheet&quot;);\r\n        HSSFRow rowhead = sheet.createRow(0);\r\n        rowhead.createCell(0).setCellValue(&quot;ABC&quot;);\r\n        rowhead.createCell(1).setCellValue(&quot;DEF&quot;);\r\n\t\t\t\r\n        f = new File(&quot;/tmp/contacts.txt&quot;);\r\n        scan = new Scanner(f);\r\n        int index=1;\r\n\t\t\t\r\n        while (scan.hasNextInt()) {\r\n\r\n            person_org_id = scan.nextInt();\r\n\t\t\t\t\r\n            ps.setInt(1,person_org_id);\r\n            rs= ps.executeQuery();\r\n\t\t\t\t\t\t\t\r\n            while (rs.next()) {\t\t\t\t\t\r\n\t\t\t\t\r\n                external_person_org_id = rs.getInt(1);\r\n\t\t\t\t\t\t\t\t\r\n                HSSFRow row = sheet.createRow(index);\r\n                row.createCell(0).setCellValue(person_org_id);\r\n                row.createCell(1).setCellValue(external_person_org_id);\r\n                index++;\r\n            }\t\t\t\r\n\t\t\t\r\n        }\t\r\n        FileOutputStream fileOut = new FileOutputStream(new File(&quot;/tmp/External_contact_id.xls&quot;));\r\n        wb.write(fileOut);\r\n        fileOut.close();\r\n        System.out.println(&quot;--------checkpoint 4:: writing data to xls completed------------&quot;);\r\n    }\r\n    catch (Exception e) {\r\n        System.out.println(e.getMessage());\r\n    }\r\n\t\r\nI am getting error `Invalid row number (65536) outside allowable range (0..65535)` \r\n\r\nMy `contacts.txt` file has around 36000 numbers.","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>I am reading integers from a text file, giving them as input to a query and getting the query output and writing to an xls file.</p>\n\n<pre><code>ResultSet rs;\nConnection con = null;\nPreparedStatement ps = null;\nint person_org_id, external_person_org_id;\nFile f = null;\nScanner scan = null;\n\ntry {\n    System.out.println(\"----------checkpoint-----------\");\n    Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n    System.out.println(\"----------checkpoint 1-----------\");\n    con = DriverManager.getConnection(\"jdbc:oracle:thin:@ksdjf.kjdlk.jkd.com:2222:edb\", \"aaaaa\", \"aaaa\");\n    System.out.println(\"----------checkpoint 2 ----------\");\n    if (con == null) {\n        System.out.println(\"unable to connect to database\");\n    }\n    System.out.println(\"----------checkpoint 3::connected to database---------\");\n    StringBuffer sql = new StringBuffer();\n    sql.append(\"select abd from edb.abd where customer_id=510 and person_org_id =? \");\n    ps = con.prepareStatement(sql.toString());\n\n    HSSFWorkbook wb = new HSSFWorkbook();\n    HSSFSheet sheet = wb.createSheet(\"Excel Sheet\");\n    HSSFRow rowhead = sheet.createRow(0);\n    rowhead.createCell(0).setCellValue(\"ABC\");\n    rowhead.createCell(1).setCellValue(\"DEF\");\n\n    f = new File(\"/tmp/contacts.txt\");\n    scan = new Scanner(f);\n    int index=1;\n\n    while (scan.hasNextInt()) {\n\n        person_org_id = scan.nextInt();\n\n        ps.setInt(1,person_org_id);\n        rs= ps.executeQuery();\n\n        while (rs.next()) {                 \n\n            external_person_org_id = rs.getInt(1);\n\n            HSSFRow row = sheet.createRow(index);\n            row.createCell(0).setCellValue(person_org_id);\n            row.createCell(1).setCellValue(external_person_org_id);\n            index++;\n        }           \n\n    }   \n    FileOutputStream fileOut = new FileOutputStream(new File(\"/tmp/External_contact_id.xls\"));\n    wb.write(fileOut);\n    fileOut.close();\n    System.out.println(\"--------checkpoint 4:: writing data to xls completed------------\");\n}\ncatch (Exception e) {\n    System.out.println(e.getMessage());\n}\n</code></pre>\n\n<p>I am getting error <code>Invalid row number (65536) outside allowable range (0..65535)</code> </p>\n\n<p>My <code>contacts.txt</code> file has around 36000 numbers.</p>\n"},{"tags":["java","spring-boot","api","spring-webflux"],"owner":{"account_id":7454325,"reputation":131,"user_id":5668022,"display_name":"igarciadev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686643997,"creation_date":1686643997,"question_id":76462917,"body_markdown":"In a Spring project, where I&#39;m using the following library:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand using the following code snippet to make a request:\r\n\r\n    return webClient.get()\r\n                    .uri(&quot;/user/&quot; + userId+ &quot;/address&quot;)\r\n                    .headers(headers())\r\n                    .retrieve()\r\n                    .onStatus(HttpStatus::is4xxClientError, clientResponse -&gt; {\r\n                        throw new BadRequestException(&quot;API Client Error&quot;);})\r\n                    .onStatus(HttpStatus::is5xxServerError, clientResponse -&gt; {\r\n                        throw new InternalServerException(&quot;API Internal Server Exception&quot;);})\r\n                    .onStatus(HttpStatus.NO_CONTENT::equals, clientResponse -&gt; Mono.empty())\r\n                    .bodyToMono(new ParameterizedTypeReference&lt;List&lt;UserAddressResponse&gt;&gt;() {})\r\n                    .block();\r\n\r\nwhen making a request that returns an HTTP status code 204 NO CONTENT, I&#39;m receiving the following exception:\r\n\r\n    2023-06-13 09:54:23.965 DEBUG 16168 --- [nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Failed to complete request: org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type &#39;text/plain;charset=UTF-8&#39; not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;\r\n    2023-06-13 09:54:23.975 ERROR 16168 --- [nio-8081-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type &#39;text/plain;charset=UTF-8&#39; not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;] with root cause\r\n\r\n\r\nHow can I improve my code to avoid this exception?","title":"Spring Webflux exception making a request that returns an HTTP status code 204 NO CONTENT","body":"<p>In a Spring project, where I'm using the following library:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and using the following code snippet to make a request:</p>\n<pre><code>return webClient.get()\n                .uri(&quot;/user/&quot; + userId+ &quot;/address&quot;)\n                .headers(headers())\n                .retrieve()\n                .onStatus(HttpStatus::is4xxClientError, clientResponse -&gt; {\n                    throw new BadRequestException(&quot;API Client Error&quot;);})\n                .onStatus(HttpStatus::is5xxServerError, clientResponse -&gt; {\n                    throw new InternalServerException(&quot;API Internal Server Exception&quot;);})\n                .onStatus(HttpStatus.NO_CONTENT::equals, clientResponse -&gt; Mono.empty())\n                .bodyToMono(new ParameterizedTypeReference&lt;List&lt;UserAddressResponse&gt;&gt;() {})\n                .block();\n</code></pre>\n<p>when making a request that returns an HTTP status code 204 NO CONTENT, I'm receiving the following exception:</p>\n<pre><code>2023-06-13 09:54:23.965 DEBUG 16168 --- [nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Failed to complete request: org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'text/plain;charset=UTF-8' not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;\n2023-06-13 09:54:23.975 ERROR 16168 --- [nio-8081-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'text/plain;charset=UTF-8' not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;] with root cause\n</code></pre>\n<p>How can I improve my code to avoid this exception?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":4,"creation_date":1686642426,"post_id":76462687,"comment_id":134823204,"body_markdown":"This is one of many reasons why you don&#39;t use `public static` variables. Instead, encapsulate them and make a method to access them.","body":"This is one of many reasons why you don&#39;t use <code>public static</code> variables. Instead, encapsulate them and make a method to access them."}],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686642761,"post_id":76462735,"comment_id":134823258,"body_markdown":"I don&#39;t recommend this approach. It&#39;s hard to test, and hard to recover if something goes wrong. You&#39;re better off initializing explicitly somewhere during startup.","body":"I don&#39;t recommend this approach. It&#39;s hard to test, and hard to recover if something goes wrong. You&#39;re better off initializing explicitly somewhere during startup."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1686643078,"post_id":76462735,"comment_id":134823323,"body_markdown":"@Jorn I agree. If you want to be testable, I don&#39;t think you should make everything static in the first place. But I didn&#39;t want to completely deny the OP&#39;s premise of using static final fields.","body":"@Jorn I agree. If you want to be testable, I don&#39;t think you should make everything static in the first place. But I didn&#39;t want to completely deny the OP&#39;s premise of using static final fields."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686643977,"post_id":76462735,"comment_id":134823487,"body_markdown":"@Jorn I&#39;ve added a more &quot;testable&quot; approach.","body":"@Jorn I&#39;ve added a more &quot;testable&quot; approach."},{"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"score":0,"creation_date":1686644550,"post_id":76462735,"comment_id":134823617,"body_markdown":"I think I will go with the initial approach you suggested (I tried using a static block, but got an error message before so I abandonded it. tried again after your reply and got it to work), but I&#39;m curious why the second approach is considered better. To me it just seems a lot more bloated and the method calls for the getters would slow it down (albiet negligibly)","body":"I think I will go with the initial approach you suggested (I tried using a static block, but got an error message before so I abandonded it. tried again after your reply and got it to work), but I&#39;m curious why the second approach is considered better. To me it just seems a lot more bloated and the method calls for the getters would slow it down (albiet negligibly)"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686644983,"post_id":76462735,"comment_id":134823692,"body_markdown":"@user21749640 Static blocks are executed whenever the class is initialised and never again. When exactly is a class initialised (though well-defined) may not be obvious and depends heavily on how you use the class. So it&#39;s awkward to test the static block. And if it throws an unchecked exception, it&#39;s hard for the client code to know where to catch it.","body":"@user21749640 Static blocks are executed whenever the class is initialised and never again. When exactly is a class initialised (though well-defined) may not be obvious and depends heavily on how you use the class. So it&#39;s awkward to test the static block. And if it throws an unchecked exception, it&#39;s hard for the client code to know where to catch it."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686643772,"creation_date":1686642570,"answer_id":76462735,"question_id":76462687,"body_markdown":"You can initialise `static final` fields in a `static` block.\r\n\r\nSo remove the `ini` method, and replace it with:\r\n\r\n    static {\r\n       // the code that used to be in the ini method here...\r\n    }\r\n\r\nNote that a `static` block cannot throw checked exceptions, so you need to handle the exception when creating a `Scanner`:\r\n\r\n```\r\ntry {\r\n    Scanner lineScanner = new Scanner(f);\r\n    // the rest of your code...\r\n} catch (FileNotFoundException e) {\r\n    // handle the exception here...\r\n    // perhaps set the fields to something default\r\n}\r\n```\r\n\r\nI would also recommend making the fields private add getters for them. Also consider not having them `static` at all, and instead have a static `currentConfig` field that can be set with a public setter. It would look something like this:\r\n\r\n```\r\nclass Config {\r\n\r\n    private final int n = 4;\r\n    private String[] values = new String[n];\r\n    private final String MUSIC_PATH;\r\n    private final String SAVE_PATH;\r\n    private final int WIDTH;\r\n    private final int HEIGHT;\r\n\r\n    // getters for the private fields...\r\n\r\n    private static Config currentConfig;\r\n\r\n    public static Config getCurrentConfig() {\r\n        return currentConfig;\r\n    }\r\n\r\n    public static void setCurrentConfig(Config currentConfig) {\r\n        Config.currentConfig = currentConfig;\r\n    }\r\n\r\n    private Config(File configFile) throws FileNotFoundException {\r\n        // initialise the final fields using the configFile&#39;s contents...\r\n    }\r\n}\r\n```\r\n\r\nAt the start of your program you&#39;d then do something like this:\r\n\r\n```\r\nConfig.setCurrentConfig(new Config(new File(&quot;config.txt&quot;)));\r\n```","title":"Cannot assign value to static final variable","body":"<p>You can initialise <code>static final</code> fields in a <code>static</code> block.</p>\n<p>So remove the <code>ini</code> method, and replace it with:</p>\n<pre><code>static {\n   // the code that used to be in the ini method here...\n}\n</code></pre>\n<p>Note that a <code>static</code> block cannot throw checked exceptions, so you need to handle the exception when creating a <code>Scanner</code>:</p>\n<pre><code>try {\n    Scanner lineScanner = new Scanner(f);\n    // the rest of your code...\n} catch (FileNotFoundException e) {\n    // handle the exception here...\n    // perhaps set the fields to something default\n}\n</code></pre>\n<p>I would also recommend making the fields private add getters for them. Also consider not having them <code>static</code> at all, and instead have a static <code>currentConfig</code> field that can be set with a public setter. It would look something like this:</p>\n<pre><code>class Config {\n\n    private final int n = 4;\n    private String[] values = new String[n];\n    private final String MUSIC_PATH;\n    private final String SAVE_PATH;\n    private final int WIDTH;\n    private final int HEIGHT;\n\n    // getters for the private fields...\n\n    private static Config currentConfig;\n\n    public static Config getCurrentConfig() {\n        return currentConfig;\n    }\n\n    public static void setCurrentConfig(Config currentConfig) {\n        Config.currentConfig = currentConfig;\n    }\n\n    private Config(File configFile) throws FileNotFoundException {\n        // initialise the final fields using the configFile's contents...\n    }\n}\n</code></pre>\n<p>At the start of your program you'd then do something like this:</p>\n<pre><code>Config.setCurrentConfig(new Config(new File(&quot;config.txt&quot;)));\n</code></pre>\n"}],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76462735,"answer_count":1,"score":-1,"last_activity_date":1686643772,"creation_date":1686642180,"question_id":76462687,"body_markdown":"I am trying to create a config file system for my game, and I want the config info from the user to be stored as public static final variables in a Config class, so all classes within the game can access the config data safely. Here is the code I have written so far:\r\n```\r\nimport java.io.*;\r\nimport java.util.Scanner;\r\n\r\npublic class Config {\r\n\r\n\tprivate static final int n = 4;\r\n\tprivate static String[] values = new String[n];\r\n\tpublic static final String MUSIC_PATH;\r\n\tpublic static final String SAVE_PATH;\r\n\tpublic static final int WIDTH;\r\n\tpublic static final int HEIGHT;\r\n\r\n\tpublic static void ini() throws FileNotFoundException, IOException  {\r\n\t\tFile f = new File(&quot;config.txt&quot;);\r\n\t\tScanner lineScanner = new Scanner(f);\r\n\t\tfor (int i = 0; i&lt;n; i++) {\r\n\t\t\tScanner valueGetter = new Scanner(lineScanner.nextLine());\r\n\t\t\tvalueGetter.useDelimiter(&quot;: &quot;);\r\n\t\t\tvalueGetter.next();\r\n\t\t\tvalues[i] = valueGetter.next();\r\n\t\t}\r\n\t\tWIDTH = Integer.parseInt(values[0]);\r\n\t\tHEIGHT = Integer.parseInt(values[1]);\r\n\t\tSAVE_PATH = values[2];\r\n\t\tMUSIC_PATH = values[3];\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nWhen I try to compile the code I get the error &quot;cannot assign a value to final variable&quot;. I am able to get the code working if I remove the final, however I would prefer not to do this as they are public variables I don&#39;t want them getting messed up or anything.\r\n\r\nI figure there is no easy way to get around this issue with the way I have currently done it, but if anyone can look at this and tell me a way to accomplish what I want then I would appreciate :)","title":"Cannot assign value to static final variable","body":"<p>I am trying to create a config file system for my game, and I want the config info from the user to be stored as public static final variables in a Config class, so all classes within the game can access the config data safely. Here is the code I have written so far:</p>\n<pre><code>import java.io.*;\nimport java.util.Scanner;\n\npublic class Config {\n\n    private static final int n = 4;\n    private static String[] values = new String[n];\n    public static final String MUSIC_PATH;\n    public static final String SAVE_PATH;\n    public static final int WIDTH;\n    public static final int HEIGHT;\n\n    public static void ini() throws FileNotFoundException, IOException  {\n        File f = new File(&quot;config.txt&quot;);\n        Scanner lineScanner = new Scanner(f);\n        for (int i = 0; i&lt;n; i++) {\n            Scanner valueGetter = new Scanner(lineScanner.nextLine());\n            valueGetter.useDelimiter(&quot;: &quot;);\n            valueGetter.next();\n            values[i] = valueGetter.next();\n        }\n        WIDTH = Integer.parseInt(values[0]);\n        HEIGHT = Integer.parseInt(values[1]);\n        SAVE_PATH = values[2];\n        MUSIC_PATH = values[3];\n\n    }\n\n}\n</code></pre>\n<p>When I try to compile the code I get the error &quot;cannot assign a value to final variable&quot;. I am able to get the code working if I remove the final, however I would prefer not to do this as they are public variables I don't want them getting messed up or anything.</p>\n<p>I figure there is no easy way to get around this issue with the way I have currently done it, but if anyone can look at this and tell me a way to accomplish what I want then I would appreciate :)</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1683105184,"post_id":76162154,"comment_id":134314069,"body_markdown":"You really don&#39;t need the ifs, just set all attributes from DTO into the `Products` instance. Also I would consider a function like `updateProductsFromDTO()` that returns the updated `Products` instance instead of having that here.","body":"You really don&#39;t need the ifs, just set all attributes from DTO into the <code>Products</code> instance. Also I would consider a function like <code>updateProductsFromDTO()</code> that returns the updated <code>Products</code> instance instead of having that here."},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":1,"creation_date":1683105730,"post_id":76162154,"comment_id":134314189,"body_markdown":"I believe the dto is a different class so that can&#39;t easily be swapped like this","body":"I believe the dto is a different class so that can&#39;t easily be swapped like this"},{"owner":{"account_id":16871523,"reputation":706,"user_id":12199915,"display_name":"Alex"},"score":0,"creation_date":1686645528,"post_id":76162154,"comment_id":134823784,"body_markdown":"You don&#39;t need to check equality of fields because in any case nothing will be changed in your entity even if set field which are equal. So your `if` are redundant","body":"You don&#39;t need to check equality of fields because in any case nothing will be changed in your entity even if set field which are equal. So your <code>if</code> are redundant"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683106153,"creation_date":1683106153,"answer_id":76162336,"question_id":76162154,"body_markdown":"Do you want to copy all the fields? or just a part of them? is your `dto` a different class (ProductDto) or is it an instance of Product? One option would be to use something like this:\r\n\r\n```java\r\nProduct update = mapToProduct(dto);\r\nProduct product = oldProduct.get(); \r\nproduct.update(update);\r\n```\r\nAnd, add the update method in the Product class:\r\n```java\r\nclass Product {\r\n\tString name;\r\n\tString price;\r\n\tString quantity;\r\n\r\n\tpublic void update(Product other) {\r\n\t\tname = other.name;\r\n\t\tprice = other.price;\r\n\t\tquantity = other.quantity;\r\n\t}\r\n}\r\n```\r\nOr, you can also use BeanUtils like this:\r\n```\r\npublic void update(Product other) {\r\n    BeanUtils.copyProperties(other, this);\r\n}\r\n```\r\n\r\nIt even allows you to ignore some of the fields, for example, the &quot;id&quot;:\r\n\r\n    BeanUtils.copyProperties(other, this, &quot;id&quot;);\r\n\r\nPS: I am not a big fan of `BeanUtils` and I would advise you not to use it on objects from different classes.","title":"Update only few fields of an entity whitout using multiple if","body":"<p>Do you want to copy all the fields? or just a part of them? is your <code>dto</code> a different class (ProductDto) or is it an instance of Product? One option would be to use something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Product update = mapToProduct(dto);\nProduct product = oldProduct.get(); \nproduct.update(update);\n</code></pre>\n<p>And, add the update method in the Product class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Product {\n    String name;\n    String price;\n    String quantity;\n\n    public void update(Product other) {\n        name = other.name;\n        price = other.price;\n        quantity = other.quantity;\n    }\n}\n</code></pre>\n<p>Or, you can also use BeanUtils like this:</p>\n<pre><code>public void update(Product other) {\n    BeanUtils.copyProperties(other, this);\n}\n</code></pre>\n<p>It even allows you to ignore some of the fields, for example, the &quot;id&quot;:</p>\n<pre><code>BeanUtils.copyProperties(other, this, &quot;id&quot;);\n</code></pre>\n<p>PS: I am not a big fan of <code>BeanUtils</code> and I would advise you not to use it on objects from different classes.</p>\n"},{"tags":[],"owner":{"account_id":13975980,"reputation":1,"user_id":10093403,"display_name":"Alvaro G&#243;mez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683115530,"creation_date":1683115530,"answer_id":76163617,"question_id":76162154,"body_markdown":"If you are willing to use [MapStruct][1] you can use this aproach\r\n\r\nThis will be the equivalent to your &quot;Products&quot; class\r\n\r\n    import com.google.api.client.util.DateTime;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n\r\n    @AllArgsConstructor\r\n    @Data\r\n    public class Entity {\r\n      private int id;\r\n      \r\n      private String name;\r\n      \r\n      private double price;\r\n      \r\n      private int quantity;\r\n      \r\n      private DateTime availableFrom;\r\n      \r\n      private DateTime availableUntil;\r\n    \r\n      private List&lt;String&gt; references;\r\n      \r\n      private boolean moreVariables;\r\n    }\r\n\r\nThis the equivalent of the DTO example you gave to us\r\n\r\n    import com.google.api.client.util.DateTime;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    \r\n    @AllArgsConstructor\r\n    @Data\r\n    public class EntityDto {\r\n      private Integer id;\r\n      \r\n      private String name;\r\n      \r\n      private Double price;\r\n      \r\n      private Integer quantity;\r\n      \r\n      private DateTime availableFrom;\r\n      \r\n      private DateTime availableUntil;\r\n    }\r\n\r\nThis is the approach to overwrite only the given parameters (not null) to the old product entity\r\n\r\n    import org.mapstruct.Mapper;\r\n    import org.mapstruct.MappingTarget;\r\n    import org.mapstruct.NullValuePropertyMappingStrategy;\r\n    import org.mapstruct.factory.Mappers;\r\n    \r\n    @Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\n    public interface MapperExample {\r\n\r\n      void updateEntity(@MappingTarget Entity entity, final EntityDto dto);\r\n      \r\n    }\r\n\r\nThen when you compile the project is as easy as this to call the mapper \r\n\r\n    public class YourClass {\r\n      @Autowired\r\n      private MapperExample mapper;\r\n    \r\n      ...\r\n    \r\n      public ResponseEntity&lt;?&gt; editProduct(EntityDto dto) { \r\n        Optional&lt;Entity&gt; entity = productsRepository.findById(dto.getId());\r\n        mapper.updateEntity(entity.get(), dto);\r\n        productsRepository.save(entity.get());\r\n\r\n      ...\r\n\r\n      }\r\n    }\r\n\r\nPD: @AllArgsConstructor and @Data are [Lombok annotations][2] that helps to avoid writing extra code like constructors or all getters and setters.\r\n\r\nHere you have some links to the documentation of MapStruct if you need more info about [@Mapper][3] or [@MappingTarget][4] annotations\r\n\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: https://projectlombok.org/features/\r\n  [3]: https://mapstruct.org/documentation/stable/api/org/mapstruct/Mapper.html\r\n  [4]: https://mapstruct.org/documentation/stable/api/org/mapstruct/MappingTarget.html\r\n","title":"Update only few fields of an entity whitout using multiple if","body":"<p>If you are willing to use <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> you can use this aproach</p>\n<p>This will be the equivalent to your &quot;Products&quot; class</p>\n<pre><code>import com.google.api.client.util.DateTime;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@AllArgsConstructor\n@Data\npublic class Entity {\n  private int id;\n  \n  private String name;\n  \n  private double price;\n  \n  private int quantity;\n  \n  private DateTime availableFrom;\n  \n  private DateTime availableUntil;\n\n  private List&lt;String&gt; references;\n  \n  private boolean moreVariables;\n}\n</code></pre>\n<p>This the equivalent of the DTO example you gave to us</p>\n<pre><code>import com.google.api.client.util.DateTime;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@AllArgsConstructor\n@Data\npublic class EntityDto {\n  private Integer id;\n  \n  private String name;\n  \n  private Double price;\n  \n  private Integer quantity;\n  \n  private DateTime availableFrom;\n  \n  private DateTime availableUntil;\n}\n</code></pre>\n<p>This is the approach to overwrite only the given parameters (not null) to the old product entity</p>\n<pre><code>import org.mapstruct.Mapper;\nimport org.mapstruct.MappingTarget;\nimport org.mapstruct.NullValuePropertyMappingStrategy;\nimport org.mapstruct.factory.Mappers;\n\n@Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\npublic interface MapperExample {\n\n  void updateEntity(@MappingTarget Entity entity, final EntityDto dto);\n  \n}\n</code></pre>\n<p>Then when you compile the project is as easy as this to call the mapper</p>\n<pre><code>public class YourClass {\n  @Autowired\n  private MapperExample mapper;\n\n  ...\n\n  public ResponseEntity&lt;?&gt; editProduct(EntityDto dto) { \n    Optional&lt;Entity&gt; entity = productsRepository.findById(dto.getId());\n    mapper.updateEntity(entity.get(), dto);\n    productsRepository.save(entity.get());\n\n  ...\n\n  }\n}\n</code></pre>\n<p>PD: @AllArgsConstructor and @Data are <a href=\"https://projectlombok.org/features/\" rel=\"nofollow noreferrer\">Lombok annotations</a> that helps to avoid writing extra code like constructors or all getters and setters.</p>\n<p>Here you have some links to the documentation of MapStruct if you need more info about <a href=\"https://mapstruct.org/documentation/stable/api/org/mapstruct/Mapper.html\" rel=\"nofollow noreferrer\">@Mapper</a> or <a href=\"https://mapstruct.org/documentation/stable/api/org/mapstruct/MappingTarget.html\" rel=\"nofollow noreferrer\">@MappingTarget</a> annotations</p>\n"},{"tags":[],"owner":{"account_id":25629488,"reputation":49,"user_id":19400075,"display_name":"asdrubalo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686643267,"creation_date":1686643267,"answer_id":76462829,"question_id":76162154,"body_markdown":"I found out that the simplest solition may be the following.\r\n\r\nIf someone needs to edit a product or anything, it should get all the attribute first. From a front end point of wiew i have to do a GET request to get the fields value to be displaied, then i need to submit the infos to the backend\r\nInstead of submitting just the edited attributes, the front end will submit evrything, old values + the new values\r\n\r\nOf course in the backend there will be some checks to prevent changing attribute such as the primary key ecc.\r\n\r\nI don&#39;t think this is the best practice, for sure there is soething better, but it works and I think it&#39;s saving a lot of useless code","title":"Update only few fields of an entity whitout using multiple if","body":"<p>I found out that the simplest solition may be the following.</p>\n<p>If someone needs to edit a product or anything, it should get all the attribute first. From a front end point of wiew i have to do a GET request to get the fields value to be displaied, then i need to submit the infos to the backend\nInstead of submitting just the edited attributes, the front end will submit evrything, old values + the new values</p>\n<p>Of course in the backend there will be some checks to prevent changing attribute such as the primary key ecc.</p>\n<p>I don't think this is the best practice, for sure there is soething better, but it works and I think it's saving a lot of useless code</p>\n"}],"owner":{"account_id":25629488,"reputation":49,"user_id":19400075,"display_name":"asdrubalo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76462829,"answer_count":3,"score":0,"last_activity_date":1686643267,"creation_date":1683104907,"question_id":76162154,"body_markdown":"I&#39;m building an e-shop as an excercise to practice new things, I&#39;m now at the point were i should made the service to edit the products, but i think it can be optimized somehow \r\n\r\nI want to be able to change an undefined number of attributes.\r\n\r\nExample: i may want to change the name on a product, then i may want to change the price and the availability status on another product\r\n\r\nI managed to do such thing using multiple if statements for each attribute of the Product class \r\n\r\npublic ResponseEntity&lt;?&gt; editProduct(ProductsDto productDto){\r\n\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy HH:mm:ss&quot;);\r\n        try {\r\n            Optional&lt;Products&gt; oldProduct = productsRepository.findById(productDto.getId());\r\n\r\n            if (oldProduct.isEmpty()){\r\n                return ResponseEntity.badRequest().body(&quot;Product with id: &quot;+productDto.getId()+&quot; not found.&quot;);\r\n            }\r\n            \r\n            if (!oldProduct.get().getName().equals(productDto.getName())){\r\n                oldProduct.get().setName(productDto.getName());\r\n            }\r\n            if (!oldProduct.get().getPrice().equals(productDto.getPrice())){\r\n                oldProduct.get().setPrice(productDto.getPrice());\r\n            }\r\n            if (!oldProduct.get().getQuantity().equals(productDto.getQuantity())){\r\n                oldProduct.get().setQuantity(productDto.getQuantity());\r\n            }\r\n\r\n        /* n if statements for each attribute in the object */\r\n\r\n            productsRepository.save(oldProduct.get());\r\n        }catch(Exception e){\r\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());\r\n        }\r\n\r\n        return ResponseEntity.ok().body(&quot;New Product added correctly&quot;);\r\n    }\r\n\r\n\r\n\r\nThere is a way i can make it more efficient, and maybe in a way that if i add an attribute in the object i don&#39;t need to add another if ?\r\n\r\nThanks\r\n\r\nJava version 17\r\n\r\n**---- EDIT ----**\r\n\r\nThe ProductDto class is not the same as the Products class, they have different attributes, for example Products references the user who created it\r\n\r\nIn the case where the productDto is a reflection of the Product class i could just update the product like this : `productsRepository.save(productDto);`\r\n\r\nBut what should i do in the case where the dto has only few of the fields valorized. I can&#39;t just save it, otherwise i&#39;ll lose some data\r\n\r\nFor example:\r\n\r\n    {\r\n        &quot;id&quot;:  &quot;6&quot;,\r\n        &quot;name&quot; : &quot;Brioche&quot;,\r\n        &quot;price&quot; : &quot;&quot;,\r\n        &quot;quantity&quot; : 10,\r\n        &quot;availableFrom&quot; : &quot;&quot;,\r\n        &quot;availableUntil&quot; : &quot;13/06/2023 10:00:00&quot;\r\n    }\r\n\r\nin this case im only changing the name, quantity and availableUntil\r\n","title":"Update only few fields of an entity whitout using multiple if","body":"<p>I'm building an e-shop as an excercise to practice new things, I'm now at the point were i should made the service to edit the products, but i think it can be optimized somehow</p>\n<p>I want to be able to change an undefined number of attributes.</p>\n<p>Example: i may want to change the name on a product, then i may want to change the price and the availability status on another product</p>\n<p>I managed to do such thing using multiple if statements for each attribute of the Product class</p>\n<p>public ResponseEntity&lt;?&gt; editProduct(ProductsDto productDto){</p>\n<pre><code>    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy HH:mm:ss&quot;);\n    try {\n        Optional&lt;Products&gt; oldProduct = productsRepository.findById(productDto.getId());\n\n        if (oldProduct.isEmpty()){\n            return ResponseEntity.badRequest().body(&quot;Product with id: &quot;+productDto.getId()+&quot; not found.&quot;);\n        }\n        \n        if (!oldProduct.get().getName().equals(productDto.getName())){\n            oldProduct.get().setName(productDto.getName());\n        }\n        if (!oldProduct.get().getPrice().equals(productDto.getPrice())){\n            oldProduct.get().setPrice(productDto.getPrice());\n        }\n        if (!oldProduct.get().getQuantity().equals(productDto.getQuantity())){\n            oldProduct.get().setQuantity(productDto.getQuantity());\n        }\n\n    /* n if statements for each attribute in the object */\n\n        productsRepository.save(oldProduct.get());\n    }catch(Exception e){\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());\n    }\n\n    return ResponseEntity.ok().body(&quot;New Product added correctly&quot;);\n}\n</code></pre>\n<p>There is a way i can make it more efficient, and maybe in a way that if i add an attribute in the object i don't need to add another if ?</p>\n<p>Thanks</p>\n<p>Java version 17</p>\n<p><strong>---- EDIT ----</strong></p>\n<p>The ProductDto class is not the same as the Products class, they have different attributes, for example Products references the user who created it</p>\n<p>In the case where the productDto is a reflection of the Product class i could just update the product like this : <code>productsRepository.save(productDto);</code></p>\n<p>But what should i do in the case where the dto has only few of the fields valorized. I can't just save it, otherwise i'll lose some data</p>\n<p>For example:</p>\n<pre><code>{\n    &quot;id&quot;:  &quot;6&quot;,\n    &quot;name&quot; : &quot;Brioche&quot;,\n    &quot;price&quot; : &quot;&quot;,\n    &quot;quantity&quot; : 10,\n    &quot;availableFrom&quot; : &quot;&quot;,\n    &quot;availableUntil&quot; : &quot;13/06/2023 10:00:00&quot;\n}\n</code></pre>\n<p>in this case im only changing the name, quantity and availableUntil</p>\n"},{"tags":["java","spring","hibernate","boot","graalvm"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1686413139,"post_id":76447003,"comment_id":134796682,"body_markdown":"What version of Spring Native?","body":"What version of Spring Native?"},{"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"score":0,"creation_date":1686413300,"post_id":76447003,"comment_id":134796698,"body_markdown":"id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.20&#39;\n id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;","body":"id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.20&#39;  id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;"}],"answers":[{"tags":[],"owner":{"account_id":28810384,"reputation":31,"user_id":22065211,"display_name":"dpittori"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686643262,"creation_date":1686643262,"answer_id":76462827,"question_id":76447003,"body_markdown":"As described in [this Spring issue][1], you need to provide bytecode enhancement at build time through *hibernate-enhance-maven-plugin*\r\n\r\ngradle\r\n\r\n    plugins {\r\n        id &quot;org.hibernate.orm&quot; version &quot;&lt;version-to-use&gt;&quot;\r\n    }\r\n\r\n    hibernate {\r\n        enhancement {\r\n            lazyInitialization true\r\n        }\r\n    }\r\n\r\nmaven\r\n\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.hibernate.orm.tooling&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-enhance-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;$currentHibernateVersion&lt;/version&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnError&gt;true&lt;/failOnError&gt;\r\n                        &lt;enableLazyInitialization&gt;true&lt;/enableLazyInitialization&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;enhance&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n\r\nAlso consider that in latest Hibernate version 6.2, *enableLazyInitialization* param used in the plugin has been deprecated and enabled by default :\r\n[HHH-15641][2]\r\n\r\nFor more information about bytecode enhancement see [Hibernate docs][3]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/29779\r\n  [2]: https://hibernate.atlassian.net/browse/HHH-15641\r\n  [3]: https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#tooling-enhancement","title":"In Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider","body":"<p>As described in <a href=\"https://github.com/spring-projects/spring-framework/issues/29779\" rel=\"nofollow noreferrer\">this Spring issue</a>, you need to provide bytecode enhancement at build time through <em>hibernate-enhance-maven-plugin</em></p>\n<p>gradle</p>\n<pre><code>plugins {\n    id &quot;org.hibernate.orm&quot; version &quot;&lt;version-to-use&gt;&quot;\n}\n\nhibernate {\n    enhancement {\n        lazyInitialization true\n    }\n}\n</code></pre>\n<p>maven</p>\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.hibernate.orm.tooling&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-enhance-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;$currentHibernateVersion&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;configuration&gt;\n                    &lt;failOnError&gt;true&lt;/failOnError&gt;\n                    &lt;enableLazyInitialization&gt;true&lt;/enableLazyInitialization&gt;\n                &lt;/configuration&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;enhance&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>Also consider that in latest Hibernate version 6.2, <em>enableLazyInitialization</em> param used in the plugin has been deprecated and enabled by default :\n<a href=\"https://hibernate.atlassian.net/browse/HHH-15641\" rel=\"nofollow noreferrer\">HHH-15641</a></p>\n<p>For more information about bytecode enhancement see <a href=\"https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#tooling-enhancement\" rel=\"nofollow noreferrer\">Hibernate docs</a></p>\n"}],"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686643262,"creation_date":1686412715,"question_id":76447003,"body_markdown":"I have a User entity that has Lazy relations \r\n\r\n     @JoinTable(name = &quot;user_identities&quot;, joinColumns = {\r\n                @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\r\n                @JoinColumn(name = &quot;user_identity_id&quot;)})\r\n        @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true)\r\n        private Set&lt;Identity&gt; identities;\r\n    \r\n        @JoinTable(name = &quot;user_roles&quot;, joinColumns = {\r\n                @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\r\n                @JoinColumn(name = &quot;role_id&quot;)})\r\n        @OneToMany(fetch = FetchType.LAZY)\r\n        private Set&lt;Role&gt; roles;\r\n\r\nI execute hibernate\r\n\r\n    @Query(&quot;SELECT u FROM User u JOIN u.identities i JOIN FETCH u.roles r WHERE i.sub = :sub AND i.issuer = :issuer&quot;)\r\n    Optional&lt;User&gt; findByIdentitySubAndIssuer(String sub, String issuer);\r\n\r\nIn jvm mode (not native) everything works fine, but in native image, i am getting the following error:\r\n\r\n*Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider is &#39;none&#39;; your model requires a more advanced BytecodeProvider to be enabled..*\r\n\r\nI am using spring boot 3.1.0\r\n\r\nHibernate version 6.2.2 Final\r\n\r\n\r\nI was trying to enable hibernate enhancer, adding to properties\r\n jpa:\r\n    properties:\r\n      hibernate:\r\n        enhancer:\r\n          enable: true\r\n\r\nwhich resulted in another exception on application startup in native mode\r\n*Failed to initialize JPA EntityManagerFactory: Default-resolver threw exception*\r\n*Could not instantiate named strategy class [org.hibernate.boot.model.relational.ColumnOrderingStrategyStandard]*\r\n\r\nUPDATE:\r\nwith\r\nid &#39;org.springframework.boot&#39; version &#39;3.0.7&#39;\r\nand\r\nid &#39;org.hibernate.orm&#39; version &quot;6.1.7.Final\r\n\r\nstill getting \r\nIn Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider\r\n\r\nPlease help.\r\ntnx\r\n","title":"In Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider","body":"<p>I have a User entity that has Lazy relations</p>\n<pre><code> @JoinTable(name = &quot;user_identities&quot;, joinColumns = {\n            @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\n            @JoinColumn(name = &quot;user_identity_id&quot;)})\n    @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true)\n    private Set&lt;Identity&gt; identities;\n\n    @JoinTable(name = &quot;user_roles&quot;, joinColumns = {\n            @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\n            @JoinColumn(name = &quot;role_id&quot;)})\n    @OneToMany(fetch = FetchType.LAZY)\n    private Set&lt;Role&gt; roles;\n</code></pre>\n<p>I execute hibernate</p>\n<pre><code>@Query(&quot;SELECT u FROM User u JOIN u.identities i JOIN FETCH u.roles r WHERE i.sub = :sub AND i.issuer = :issuer&quot;)\nOptional&lt;User&gt; findByIdentitySubAndIssuer(String sub, String issuer);\n</code></pre>\n<p>In jvm mode (not native) everything works fine, but in native image, i am getting the following error:</p>\n<p><em>Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider is 'none'; your model requires a more advanced BytecodeProvider to be enabled..</em></p>\n<p>I am using spring boot 3.1.0</p>\n<p>Hibernate version 6.2.2 Final</p>\n<p>I was trying to enable hibernate enhancer, adding to properties\njpa:\nproperties:\nhibernate:\nenhancer:\nenable: true</p>\n<p>which resulted in another exception on application startup in native mode\n<em>Failed to initialize JPA EntityManagerFactory: Default-resolver threw exception</em>\n<em>Could not instantiate named strategy class [org.hibernate.boot.model.relational.ColumnOrderingStrategyStandard]</em></p>\n<p>UPDATE:\nwith\nid 'org.springframework.boot' version '3.0.7'\nand\nid 'org.hibernate.orm' version &quot;6.1.7.Final</p>\n<p>still getting\nIn Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider</p>\n<p>Please help.\ntnx</p>\n"},{"tags":["java","error-handling","web.xml"],"answers":[{"tags":[],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1510814408,"creation_date":1510814408,"answer_id":47323184,"question_id":47323154,"body_markdown":"This should be sufficient, along with few customer error related pages, you can add default page. So all error other than **404**, **500** , will be redirected to generic page `error.html`\r\n\r\n    &lt;error-page&gt;\r\n        &lt;location&gt;/error.html&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nor more customized, using **Exception** class, can be your custom exception class as well.\r\n \r\n\r\n    &lt;error-page&gt;\r\n      &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;\r\n      &lt;location&gt;/error.html&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nSo code becomes,\r\n\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;404&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;500&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n    &lt;error-page&gt;\r\n        &lt;location&gt;/error.html&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n","title":"How to specify common error page excluding 404 and 500 in web.xml","body":"<p>This should be sufficient, along with few customer error related pages, you can add default page. So all error other than <strong>404</strong>, <strong>500</strong> , will be redirected to generic page <code>error.html</code></p>\n\n<pre><code>&lt;error-page&gt;\n    &lt;location&gt;/error.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n\n<p>or more customized, using <strong>Exception</strong> class, can be your custom exception class as well.</p>\n\n<pre><code>&lt;error-page&gt;\n  &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;\n  &lt;location&gt;/error.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n\n<p>So code becomes,</p>\n\n<pre><code>&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n&lt;error-page&gt;\n    &lt;error-code&gt;500&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n&lt;error-page&gt;\n    &lt;location&gt;/error.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686643105,"creation_date":1686643105,"answer_id":76462801,"question_id":47323154,"body_markdown":"You could do the following to tackle 400 and 500 `status error` codes. \r\n\r\nAdd the below lines in `web.xml` files\r\n\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;404&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n    \r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;500&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nIn addition to above, you can also use the `Exception` type: See below:\r\n\r\n    &lt;error-page&gt;\r\n        &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;\r\n        &lt;location&gt;/WEB-INF/error/exception.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\n\r\nThe difference is: `&lt;error-code&gt;` and `&lt;exception-type&gt;` depends on which is used. \r\n","title":"How to specify common error page excluding 404 and 500 in web.xml","body":"<p>You could do the following to tackle 400 and 500 <code>status error</code> codes.</p>\n<p>Add the below lines in <code>web.xml</code> files</p>\n<pre><code>&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n\n&lt;error-page&gt;\n    &lt;error-code&gt;500&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>In addition to above, you can also use the <code>Exception</code> type: See below:</p>\n<pre><code>&lt;error-page&gt;\n    &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;\n    &lt;location&gt;/WEB-INF/error/exception.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>The difference is: <code>&lt;error-code&gt;</code> and <code>&lt;exception-type&gt;</code> depends on which is used.</p>\n"}],"owner":{"account_id":5206598,"reputation":2016,"user_id":4164297,"accept_rate":89,"display_name":"Dil."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2888,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47323184,"answer_count":2,"score":0,"last_activity_date":1686643105,"creation_date":1510814222,"question_id":47323154,"body_markdown":"&lt;br/&gt;\r\nI already have two web pages designed for 404 and 500 error pages in web.xml\r\n&lt;br/&gt;\r\n\r\n\r\n\r\n     &lt;error-page&gt;\r\n            &lt;error-code&gt;404&lt;/error-code&gt;\r\n            &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\r\n        &lt;/error-page&gt;\r\n        &lt;error-page&gt;\r\n            &lt;error-code&gt;500&lt;/error-code&gt;\r\n            &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\r\n        &lt;/error-page&gt;\r\nI want to redirect to a predesignated page for all the other errors.\r\n&lt;br/&gt;\r\nPlease help.\r\nThank you\r\n\r\n","title":"How to specify common error page excluding 404 and 500 in web.xml","body":"<p><br/>\nI already have two web pages designed for 404 and 500 error pages in web.xml\n<br/></p>\n\n<pre><code> &lt;error-page&gt;\n        &lt;error-code&gt;404&lt;/error-code&gt;\n        &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\n    &lt;/error-page&gt;\n    &lt;error-page&gt;\n        &lt;error-code&gt;500&lt;/error-code&gt;\n        &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\n    &lt;/error-page&gt;\n</code></pre>\n\n<p>I want to redirect to a predesignated page for all the other errors.\n<br/>\nPlease help.\nThank you</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1686578823,"post_id":76457337,"comment_id":134813943,"body_markdown":"What does &quot;block&quot; mean? Your server should respond somehow to the request anyway. It responds with &quot;400 - bad request&quot; which looks appropriate","body":"What does &quot;block&quot; mean? Your server should respond somehow to the request anyway. It responds with &quot;400 - bad request&quot; which looks appropriate"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686579473,"post_id":76457337,"comment_id":134814098,"body_markdown":"Wouldn&#39;t you be better off getting rid of that at the client?","body":"Wouldn&#39;t you be better off getting rid of that at the client?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686580344,"post_id":76457337,"comment_id":134814354,"body_markdown":"@g00se No, at least not *just* in the client. Always design your API to be resilient to bad actors which are not your own client.","body":"@g00se No, at least not <i>just</i> in the client. Always design your API to be resilient to bad actors which are not your own client."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686580861,"post_id":76457337,"comment_id":134814466,"body_markdown":"Well, as @gdomo said, it seems the server is already responding properly","body":"Well, as @gdomo said, it seems the server is already responding properly"},{"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"score":0,"creation_date":1686582268,"post_id":76457337,"comment_id":134814842,"body_markdown":"Well, my tester demand it should show &quot;our error code&quot; for incorrect input parameter, but not `400 - bad request`. sigh","body":"Well, my tester demand it should show &quot;our error code&quot; for incorrect input parameter, but not <code>400 - bad request</code>. sigh"}],"answers":[{"comments":[{"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"score":0,"creation_date":1686638723,"post_id":76457461,"comment_id":134822469,"body_markdown":"infomative, but doesn&#39;t seem like I could reply our own error code and msg and say your input is not a number to the client with your deserialize function?","body":"infomative, but doesn&#39;t seem like I could reply our own error code and msg and say your input is not a number to the client with your deserialize function?"},{"owner":{"account_id":22633544,"reputation":588,"user_id":16810646,"display_name":"Ananta"},"score":0,"creation_date":1686642424,"post_id":76457461,"comment_id":134823202,"body_markdown":"@Kaninchen, I edited the answer. Hope it helps you.","body":"@Kaninchen, I edited the answer. Hope it helps you."},{"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"score":0,"creation_date":1686663050,"post_id":76457461,"comment_id":134827715,"body_markdown":"Hmm, that made the complexity for code maintainence increased. I think parsing it from string using object mapper would be simpler.","body":"Hmm, that made the complexity for code maintainence increased. I think parsing it from string using object mapper would be simpler."}],"tags":[],"owner":{"account_id":22633544,"reputation":588,"user_id":16810646,"display_name":"Ananta"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686642947,"creation_date":1686578768,"answer_id":76457461,"question_id":76457337,"body_markdown":"You can create custom deserializer to handle invalid value:\r\n```\r\npublic class BigIntegerDeserializer extends StdDeserializer&lt;BigInteger&gt; {\r\n\r\n    protected BigIntegerDeserializer() {\r\n        super(BigInteger.class);\r\n    }\r\n    @Override\r\n    public BigInteger deserialize(final JsonParser jsonParser, final DeserializationContext deserializationContext) throws IOException, JacksonException {\r\n        final String input = jsonParser.getText();\r\n        try {\r\n            return BigInteger.valueOf(Long.parseLong(input));\r\n        } catch (final NumberFormatException e) {\r\n            throw new IllegalArgumentException(&quot;Value must be a number.&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nThen annotate that deserializer to your field:\r\n```\r\n@Getter\r\n@Setter\r\npublic class InputRequest {\r\n\r\n\r\n    @JsonDeserialize(using = BigIntegerDeserializer.class) // Here\r\n    private BigInteger num;\r\n}\r\n\r\n```\r\nIn case you want to return the message &quot;Value must a number&quot; back to tester. You can handle the exception using ExceptionHandler:\r\n```\r\n    @ExceptionHandler(HttpMessageNotReadableException.class)\r\n    public static ResponseEntity&lt;String&gt; handleHttpMessageNotReadableException(\r\n        @NonNull final HttpMessageNotReadableException exception\r\n    ) {\r\n        // Since Jackson wrap your IllegalArgumentException exception before throwing. You have to find the cause exception inside it.\r\n        Throwable rootCause = org.apache.commons.lang3.exception.ExceptionUtils.getRootCause(exception);\r\n        final String message = rootCause.getMessage(); // Value must be a number.\r\n        return ...;\r\n    }\r\n```","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>You can create custom deserializer to handle invalid value:</p>\n<pre><code>public class BigIntegerDeserializer extends StdDeserializer&lt;BigInteger&gt; {\n\n    protected BigIntegerDeserializer() {\n        super(BigInteger.class);\n    }\n    @Override\n    public BigInteger deserialize(final JsonParser jsonParser, final DeserializationContext deserializationContext) throws IOException, JacksonException {\n        final String input = jsonParser.getText();\n        try {\n            return BigInteger.valueOf(Long.parseLong(input));\n        } catch (final NumberFormatException e) {\n            throw new IllegalArgumentException(&quot;Value must be a number.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Then annotate that deserializer to your field:</p>\n<pre><code>@Getter\n@Setter\npublic class InputRequest {\n\n\n    @JsonDeserialize(using = BigIntegerDeserializer.class) // Here\n    private BigInteger num;\n}\n\n</code></pre>\n<p>In case you want to return the message &quot;Value must a number&quot; back to tester. You can handle the exception using ExceptionHandler:</p>\n<pre><code>    @ExceptionHandler(HttpMessageNotReadableException.class)\n    public static ResponseEntity&lt;String&gt; handleHttpMessageNotReadableException(\n        @NonNull final HttpMessageNotReadableException exception\n    ) {\n        // Since Jackson wrap your IllegalArgumentException exception before throwing. You have to find the cause exception inside it.\n        Throwable rootCause = org.apache.commons.lang3.exception.ExceptionUtils.getRootCause(exception);\n        final String message = rootCause.getMessage(); // Value must be a number.\n        return ...;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1437483,"reputation":1908,"user_id":1358551,"display_name":"charybr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686580525,"creation_date":1686580525,"answer_id":76457706,"question_id":76457337,"body_markdown":"Validation of request body can be done using Validation \r\nFor example - https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>Validation of request body can be done using Validation\nFor example - <a href=\"https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/\" rel=\"nofollow noreferrer\">https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/</a></p>\n"},{"comments":[{"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"score":0,"creation_date":1686667023,"post_id":76458102,"comment_id":134828691,"body_markdown":"this is the simplest way to achieve what I need. thx","body":"this is the simplest way to achieve what I need. thx"}],"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686583380,"creation_date":1686583380,"answer_id":76458102,"question_id":76457337,"body_markdown":"The functionality you see is the expected functionality.\r\n\r\nIf you want to handle non-number values,\r\nconsider changing the handler method to receive a String value and then parse\r\nit yourself.\r\n\r\nHere is some sample code:\r\n```Java\r\nimport org.apache.commons.lang3.math.NumberUtils;\r\n\r\n@RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\r\npublic String test(@RequestBody String requestBody) throws Exception\r\n{\r\n\tString returnValue;\r\n\t\r\n\tif (StringUtils.isNotEmpty(requestBody)))\r\n\t{\r\n\t\tfinal InputRequest inputRequest;\r\n\t\t\r\n\t\ttry\r\n\t\t{\r\n\t\t\tinputRequest = objectMapper.readValue(requestBody, InputRequest.class);\r\n\t\t\t\r\n\t\t\treturnValue = &quot;blam&quot;;  // handle success\r\n\t\t}\r\n\t\tcatch (some exception type)\r\n\t\t{\r\n\t\t\treturnValue = &quot;kapow&quot;; // handle parse error.\r\n\t\t\t// handle parse exceptions here.\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturnValue = &quot;blam&quot;; // handle no request body here.\r\n\t}\r\n\t\r\n\treturn returnValue;\r\n}\r\n\r\n\r\n// The dependency for commons lang3\r\n//      &lt;dependency&gt;\r\n//        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n//        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n//        &lt;version&gt;3.5&lt;/version&gt;\r\n//      &lt;/dependency&gt;\r\n```","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>The functionality you see is the expected functionality.</p>\n<p>If you want to handle non-number values,\nconsider changing the handler method to receive a String value and then parse\nit yourself.</p>\n<p>Here is some sample code:</p>\n<pre><code>import org.apache.commons.lang3.math.NumberUtils;\n\n@RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\npublic String test(@RequestBody String requestBody) throws Exception\n{\n    String returnValue;\n    \n    if (StringUtils.isNotEmpty(requestBody)))\n    {\n        final InputRequest inputRequest;\n        \n        try\n        {\n            inputRequest = objectMapper.readValue(requestBody, InputRequest.class);\n            \n            returnValue = &quot;blam&quot;;  // handle success\n        }\n        catch (some exception type)\n        {\n            returnValue = &quot;kapow&quot;; // handle parse error.\n            // handle parse exceptions here.\n        }\n    }\n    else\n    {\n        returnValue = &quot;blam&quot;; // handle no request body here.\n    }\n    \n    return returnValue;\n}\n\n\n// The dependency for commons lang3\n//      &lt;dependency&gt;\n//        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n//        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n//        &lt;version&gt;3.5&lt;/version&gt;\n//      &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686585135,"creation_date":1686583787,"answer_id":76458153,"question_id":76457337,"body_markdown":"You can simply define an [@ExceptionHandler][1] annotated method in your controller:\r\n```java\r\n@ExceptionHandler\r\nResponseEntity&lt;String&gt; handleMessageNotReadable(HttpMessageNotReadableException e) {\r\n  // change the status below according to requirements\r\n  return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_ACCEPTABLE);\r\n}\r\n```\r\nFor handling exceptions globally use [@ControllerAdvice][2], for more details about exception handling check [the blog post][3]. \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\r\n  [3]: https://reflectoring.io/spring-boot-exception-handling/","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>You can simply define an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html\" rel=\"nofollow noreferrer\">@ExceptionHandler</a> annotated method in your controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExceptionHandler\nResponseEntity&lt;String&gt; handleMessageNotReadable(HttpMessageNotReadableException e) {\n  // change the status below according to requirements\n  return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_ACCEPTABLE);\n}\n</code></pre>\n<p>For handling exceptions globally use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\" rel=\"nofollow noreferrer\">@ControllerAdvice</a>, for more details about exception handling check <a href=\"https://reflectoring.io/spring-boot-exception-handling/\" rel=\"nofollow noreferrer\">the blog post</a>.</p>\n"}],"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76458102,"answer_count":4,"score":0,"last_activity_date":1686642947,"creation_date":1686577826,"question_id":76457337,"body_markdown":"I have a API like below, it receive and process a number that is given by user\r\n\r\n    @RestController\r\n    @RequestMapping(produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public class MainController {\r\n    \r\n        @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\r\n        public String test(@Validated @RequestBody InputRequest input) throws Exception {\r\n    \t\treturn &quot;{\\&quot;num\\&quot;:&quot; + String.valueOf(input.getNum()) +&quot;}&quot;;\r\n    \t}\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    public class InputRequest{\r\n    \tprivate BigInteger num;\r\n    }\r\n\r\nAnd then my tester sent a string of junk like `&quot;!@#$^!&amp;*&quot;` to `num` field, my API show Http 400 and a line of exception pop up\r\n\r\n    Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from String &quot;!@#$%^&amp;*()_+&lt;&gt;?~!&quot;: not a valid representation; ...\r\n\r\nIs there any way to block such junk input or handle this exception by my own? Without change the data type of `num`?","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>I have a API like below, it receive and process a number that is given by user</p>\n<pre><code>@RestController\n@RequestMapping(produces = MediaType.APPLICATION_JSON_VALUE)\npublic class MainController {\n\n    @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\n    public String test(@Validated @RequestBody InputRequest input) throws Exception {\n        return &quot;{\\&quot;num\\&quot;:&quot; + String.valueOf(input.getNum()) +&quot;}&quot;;\n    }\n}\n\n\n@Getter\n@Setter\npublic class InputRequest{\n    private BigInteger num;\n}\n</code></pre>\n<p>And then my tester sent a string of junk like <code>&quot;!@#$^!&amp;*&quot;</code> to <code>num</code> field, my API show Http 400 and a line of exception pop up</p>\n<pre><code>Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from String &quot;!@#$%^&amp;*()_+&lt;&gt;?~!&quot;: not a valid representation; ...\n</code></pre>\n<p>Is there any way to block such junk input or handle this exception by my own? Without change the data type of <code>num</code>?</p>\n"},{"tags":["java","spring","mongodb","spring-boot","maven"],"answers":[{"comments":[{"owner":{"account_id":11262459,"reputation":140,"user_id":8260352,"display_name":"Akash Sinha"},"score":0,"creation_date":1686304257,"post_id":76338428,"comment_id":134783654,"body_markdown":"Dude you saved me. Very very thank you.&#128522;","body":"Dude you saved me. Very very thank you.😊"}],"tags":[],"owner":{"account_id":12644481,"reputation":71,"user_id":9190721,"display_name":"BadassBilal"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1685085185,"creation_date":1685085185,"answer_id":76338428,"question_id":76335121,"body_markdown":"Just your fellow learner here, following the same tutorial.\r\n\r\nI jumped to the documentation and it seems you just have to add `/movie-api-db` at the end of your URI, to get access to the database collection:\r\n\r\n`spring.data.mongodb.uri=mongodb+srv://&lt;username&gt;:&lt;pwd&gt;@&lt;cluster&gt;.mongodb.net/movie-api-db`\r\n\r\nHope, it&#39;ll help! \r\n","title":"How to resolve the &#39;Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty&#39; error in Spring Boot?","body":"<p>Just your fellow learner here, following the same tutorial.</p>\n<p>I jumped to the documentation and it seems you just have to add <code>/movie-api-db</code> at the end of your URI, to get access to the database collection:</p>\n<p><code>spring.data.mongodb.uri=mongodb+srv://&lt;username&gt;:&lt;pwd&gt;@&lt;cluster&gt;.mongodb.net/movie-api-db</code></p>\n<p>Hope, it'll help!</p>\n"},{"tags":[],"owner":{"account_id":18646085,"reputation":81,"user_id":13590693,"display_name":"Max"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1686642322,"creation_date":1686642322,"answer_id":76462697,"question_id":76335121,"body_markdown":"For anyone else using Springboot 3.1.0 specifically, there is a solution offered in the github issue [here](https://github.com/spring-projects/spring-boot/issues/35566#issuecomment-1561295798).\r\n\r\nBasically, `spring.data.mongodb.database` is ignored if you&#39;ve set `spring.data.mongodb.uri`, which causes the error seen in the post. Adding the string template into the uri solves the issue.\r\n\r\nThis has been [fixed](https://github.com/spring-projects/spring-boot/commit/593fa1dc42177cc33b076643bd2ba6c66e84a3db) for version 3.1.1 which will be released at a later date.","title":"How to resolve the &#39;Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty&#39; error in Spring Boot?","body":"<p>For anyone else using Springboot 3.1.0 specifically, there is a solution offered in the github issue <a href=\"https://github.com/spring-projects/spring-boot/issues/35566#issuecomment-1561295798\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Basically, <code>spring.data.mongodb.database</code> is ignored if you've set <code>spring.data.mongodb.uri</code>, which causes the error seen in the post. Adding the string template into the uri solves the issue.</p>\n<p>This has been <a href=\"https://github.com/spring-projects/spring-boot/commit/593fa1dc42177cc33b076643bd2ba6c66e84a3db\" rel=\"nofollow noreferrer\">fixed</a> for version 3.1.1 which will be released at a later date.</p>\n"}],"owner":{"account_id":28680765,"reputation":41,"user_id":21962009,"display_name":"smlksmth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2995,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1686642322,"creation_date":1685038023,"question_id":76335121,"body_markdown":"`Error creating bean with name &#39;mongoDatabaseFactory&#39; defined in class path resource. Failed to instantiate [org.springframework.data.mongodb.core.MongoDatabaseFactorySupport]: Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty`\r\n\r\nI&#39;m not sure what I&#39;m doing wrong here. \r\n\r\n*error message*\r\n![](https://i.stack.imgur.com/jLOGD.jpg)\r\n\r\n*application.properties*\r\n![](https://i.stack.imgur.com/HHItT.png)\r\n\r\nI can&#39;t seem to figure out how to get rid of this message. I have a DB name set in the application.properties. I have MongoDB running and I&#39;m still getting this every time I try to start my server. ","title":"How to resolve the &#39;Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty&#39; error in Spring Boot?","body":"<p><code>Error creating bean with name 'mongoDatabaseFactory' defined in class path resource. Failed to instantiate [org.springframework.data.mongodb.core.MongoDatabaseFactorySupport]: Factory method 'mongoDatabaseFactory' threw exception with message: Database name must not be empty</code></p>\n<p>I'm not sure what I'm doing wrong here.</p>\n<p><em>error message</em>\n<img src=\"https://i.stack.imgur.com/jLOGD.jpg\" alt=\"\" /></p>\n<p><em>application.properties</em>\n<img src=\"https://i.stack.imgur.com/HHItT.png\" alt=\"\" /></p>\n<p>I can't seem to figure out how to get rid of this message. I have a DB name set in the application.properties. I have MongoDB running and I'm still getting this every time I try to start my server.</p>\n"},{"tags":["java","spring","spring-mvc","spring-security","roles"],"comments":[{"owner":{"account_id":1176426,"reputation":709,"user_id":1152335,"display_name":"Bruno"},"score":0,"creation_date":1445259836,"post_id":33205236,"comment_id":54234208,"body_markdown":"Possible duplicate of [Spring Security Role Prefix and Custom User Details Service](http://stackoverflow.com/questions/4951832/spring-security-role-prefix-and-custom-user-details-service)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4951832/spring-security-role-prefix-and-custom-user-details-service\">Spring Security Role Prefix and Custom User Details Service</a>"}],"answers":[{"comments":[{"owner":{"account_id":4474969,"reputation":1676,"user_id":3640307,"accept_rate":71,"display_name":"Sajib Acharya"},"score":0,"creation_date":1463060421,"post_id":33206127,"comment_id":61909937,"body_markdown":"Just a question, does Spring add ROLE_ by default if I add a role in @Secured annotation? Like If I add @Secured(&quot;abc&quot;), will Spring check for ROLE_abc or just abc?","body":"Just a question, does Spring add ROLE_ by default if I add a role in @Secured annotation? Like If I add @Secured(&quot;abc&quot;), will Spring check for ROLE_abc or just abc?"},{"owner":{"account_id":5116480,"reputation":3101,"user_id":4101415,"accept_rate":64,"display_name":"walsh"},"score":0,"creation_date":1471337500,"post_id":33206127,"comment_id":65294680,"body_markdown":"@SajibAcharya you can change the default `ROLE_`. please see http://stackoverflow.com/questions/38134121/how-do-i-remove-the-role-prefix-from-spring-security-with-javaconfig/38970309#38970309","body":"@SajibAcharya you can change the default <code>ROLE_</code>. please see <a href=\"http://stackoverflow.com/questions/38134121/how-do-i-remove-the-role-prefix-from-spring-security-with-javaconfig/38970309#38970309\" title=\"how do i remove the role prefix from spring security with javaconfig\">stackoverflow.com/questions/38134121/&hellip;</a>"}],"tags":[],"owner":{"account_id":5670123,"reputation":1557,"user_id":4485032,"accept_rate":100,"display_name":"jmcg"},"comment_count":2,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1568878602,"creation_date":1445224822,"answer_id":33206127,"question_id":33205236,"body_markdown":"Spring security adds the prefix &quot;**ROLE_**&quot; by default.\r\n\r\nIf you want this removed or changed, take a look at \r\n\r\n[How to change role from interceptor-url?][1]\r\n\r\nEDIT: found this as well:\r\n[Spring Security remove RoleVoter prefix][2]\r\n\r\n[1]: https://web.archive.org/web/20180201001929/http://forum.spring.io/forum/spring-projects/security/51066-how-to-change-role-from-interceptor-url\r\n\r\n[2]: https://stackoverflow.com/questions/21620076/spring-security-remove-rolevoter-prefix","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>Spring security adds the prefix \"<strong>ROLE_</strong>\" by default.</p>\n\n<p>If you want this removed or changed, take a look at </p>\n\n<p><a href=\"https://web.archive.org/web/20180201001929/http://forum.spring.io/forum/spring-projects/security/51066-how-to-change-role-from-interceptor-url\" rel=\"noreferrer\">How to change role from interceptor-url?</a></p>\n\n<p>EDIT: found this as well:\n<a href=\"https://stackoverflow.com/questions/21620076/spring-security-remove-rolevoter-prefix\">Spring Security remove RoleVoter prefix</a></p>\n"},{"tags":[],"owner":{"account_id":306491,"reputation":1448,"user_id":617271,"accept_rate":94,"display_name":"olyanren"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1472581622,"creation_date":1472581622,"answer_id":39234629,"question_id":33205236,"body_markdown":"In Spring 4, there are two methods `hasAuthority()` and `hasAnyAuthority()` defined in `org.springframework.security.access.expression.SecurityExpressionRoot` class. These two methods checks only your custom role name **without** adding `ROLE_` prefix. Definition as follows:\r\n\r\n\tpublic final boolean hasAuthority(String authority) {\r\n\t\treturn hasAnyAuthority(authority);\r\n\t}\r\n    public final boolean hasAnyAuthority(String... authorities) {\r\n\t\treturn hasAnyAuthorityName(null, authorities);\r\n\t}\r\n\tprivate boolean hasAnyAuthorityName(String prefix, String... roles) {\r\n\t\tSet&lt;String&gt; roleSet = getAuthoritySet();\r\n\r\n\t\tfor (String role : roles) {\r\n\t\t\tString defaultedRole = getRoleWithDefaultPrefix(prefix, role);\r\n\t\t\tif (roleSet.contains(defaultedRole)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\tprivate static String getRoleWithDefaultPrefix(String defaultRolePrefix, String role) {\r\n\t\tif (role == null) {\r\n\t\t\treturn role;\r\n\t\t}\r\n\t\tif (defaultRolePrefix == null || defaultRolePrefix.length() == 0) {\r\n\t\t\treturn role;\r\n\t\t}\r\n\t\tif (role.startsWith(defaultRolePrefix)) {\r\n\t\t\treturn role;\r\n\t\t}\r\n\t\treturn defaultRolePrefix + role;\r\n\t}\r\n\r\n\r\nExample usage:\r\n  \r\n&gt;     &lt;http auto-config=&quot;false&quot; use-expressions=&quot;true&quot; pattern=&quot;/user/**&quot;\r\n&gt;           entry-point-ref=&quot;loginUrlAuthenticationEntryPoint&quot;&gt;\r\n&gt;         &lt;!--If we use hasAnyAuthority, we can remove ROLE_ prefix--&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/yoneticiler&quot; access=&quot;hasAnyAuthority(&#39;FULL_ADMIN&#39;,&#39;ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/addUser&quot; access=&quot;hasAnyAuthority(&#39;FULL_ADMIN&#39;,&#39;ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/addUserGroup&quot; access=&quot;hasAuthority(&#39;FULL_ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/deleteUserGroup&quot; access=&quot;hasAuthority(&#39;FULL_ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/**&quot; access=&quot;hasAnyAuthority(&#39;FULL_ADMIN&#39;,&#39;ADMIN&#39;,&#39;EDITOR&#39;,&#39;NORMAL&#39;)&quot;/&gt;\r\n&gt;         &lt;access-denied-handler error-page=&quot;/403&quot;/&gt;\r\n&gt;         &lt;custom-filter position=&quot;FORM_LOGIN_FILTER&quot; ref=&quot;customUsernamePasswordAuthenticationFilter&quot;/&gt;\r\n&gt;         &lt;logout logout-url=&quot;/user/logout&quot;\r\n&gt;                 invalidate-session=&quot;true&quot;\r\n&gt;                 logout-success-url=&quot;/user/index?logout&quot;/&gt;\r\n&gt;         &lt;!-- enable csrf protection --&gt;\r\n&gt;         &lt;csrf/&gt;\r\n&gt;     &lt;/http&gt;   &lt;beans:bean id=&quot;loginUrlAuthenticationEntryPoint&quot;\r\n&gt;                 class=&quot;org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint&quot;&gt;\r\n&gt;         &lt;beans:constructor-arg value=&quot;/user&quot;/&gt;\r\n&gt;     &lt;/beans:bean&gt;","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>In Spring 4, there are two methods <code>hasAuthority()</code> and <code>hasAnyAuthority()</code> defined in <code>org.springframework.security.access.expression.SecurityExpressionRoot</code> class. These two methods checks only your custom role name <strong>without</strong> adding <code>ROLE_</code> prefix. Definition as follows:</p>\n\n<pre><code>public final boolean hasAuthority(String authority) {\n    return hasAnyAuthority(authority);\n}\npublic final boolean hasAnyAuthority(String... authorities) {\n    return hasAnyAuthorityName(null, authorities);\n}\nprivate boolean hasAnyAuthorityName(String prefix, String... roles) {\n    Set&lt;String&gt; roleSet = getAuthoritySet();\n\n    for (String role : roles) {\n        String defaultedRole = getRoleWithDefaultPrefix(prefix, role);\n        if (roleSet.contains(defaultedRole)) {\n            return true;\n        }\n    }\n\n    return false;\n}\nprivate static String getRoleWithDefaultPrefix(String defaultRolePrefix, String role) {\n    if (role == null) {\n        return role;\n    }\n    if (defaultRolePrefix == null || defaultRolePrefix.length() == 0) {\n        return role;\n    }\n    if (role.startsWith(defaultRolePrefix)) {\n        return role;\n    }\n    return defaultRolePrefix + role;\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<blockquote>\n<pre><code>&lt;http auto-config=\"false\" use-expressions=\"true\" pattern=\"/user/**\"\n      entry-point-ref=\"loginUrlAuthenticationEntryPoint\"&gt;\n    &lt;!--If we use hasAnyAuthority, we can remove ROLE_ prefix--&gt;\n    &lt;intercept-url pattern=\"/user/home/yoneticiler\" access=\"hasAnyAuthority('FULL_ADMIN','ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/addUser\" access=\"hasAnyAuthority('FULL_ADMIN','ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/addUserGroup\" access=\"hasAuthority('FULL_ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/deleteUserGroup\" access=\"hasAuthority('FULL_ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/**\" access=\"hasAnyAuthority('FULL_ADMIN','ADMIN','EDITOR','NORMAL')\"/&gt;\n    &lt;access-denied-handler error-page=\"/403\"/&gt;\n    &lt;custom-filter position=\"FORM_LOGIN_FILTER\" ref=\"customUsernamePasswordAuthenticationFilter\"/&gt;\n    &lt;logout logout-url=\"/user/logout\"\n            invalidate-session=\"true\"\n            logout-success-url=\"/user/index?logout\"/&gt;\n    &lt;!-- enable csrf protection --&gt;\n    &lt;csrf/&gt;\n&lt;/http&gt;   &lt;beans:bean id=\"loginUrlAuthenticationEntryPoint\"\n            class=\"org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint\"&gt;\n    &lt;beans:constructor-arg value=\"/user\"/&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5534377,"reputation":284,"user_id":6078959,"accept_rate":80,"display_name":"Svitlana  Onish"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1675243951,"creation_date":1497614392,"answer_id":44588758,"question_id":33205236,"body_markdown":"As @olyanren said, you can use `hasAuthority()` method in Spring 4 instead of `hasRole()`. I am adding JavaConfig example:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\t    .authorizeRequests()\r\n        .antMatchers(&quot;/api/**&quot;)\r\n        .access(&quot;hasAuthority(&#39;ADMIN&#39;)&quot;)\r\n        .and()\r\n        .httpBasic().and().csrf().disable();\r\n    }","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>As @olyanren said, you can use <code>hasAuthority()</code> method in Spring 4 instead of <code>hasRole()</code>. I am adding JavaConfig example:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    .authorizeRequests()\n    .antMatchers(&quot;/api/**&quot;)\n    .access(&quot;hasAuthority('ADMIN')&quot;)\n    .and()\n    .httpBasic().and().csrf().disable();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1895890,"reputation":4097,"user_id":1712880,"accept_rate":27,"display_name":"Hamid Mohayeji"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1614346855,"creation_date":1539893843,"answer_id":52881899,"question_id":33205236,"body_markdown":"You can create a mapper to add `ROLE_` at the beginning of all of your roles:\r\n\r\n    @Bean\r\n    public GrantedAuthoritiesMapper authoritiesMapper() {\r\n        SimpleAuthorityMapper mapper = new SimpleAuthorityMapper();\r\n        mapper.setPrefix(&quot;ROLE_&quot;); // this line is not required \r\n        mapper.setConvertToUpperCase(true); // convert your roles to uppercase\r\n        mapper.setDefaultAuthority(&quot;USER&quot;); // set a default role\r\n    \r\n        return mapper;\r\n    }\r\n\r\nThe you should add the mapper to your provider:\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n        // your config ...\r\n        provider.setAuthoritiesMapper(authoritiesMapper());\r\n    \r\n        return provider;\r\n    }","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>You can create a mapper to add <code>ROLE_</code> at the beginning of all of your roles:</p>\n<pre><code>@Bean\npublic GrantedAuthoritiesMapper authoritiesMapper() {\n    SimpleAuthorityMapper mapper = new SimpleAuthorityMapper();\n    mapper.setPrefix(&quot;ROLE_&quot;); // this line is not required \n    mapper.setConvertToUpperCase(true); // convert your roles to uppercase\n    mapper.setDefaultAuthority(&quot;USER&quot;); // set a default role\n\n    return mapper;\n}\n</code></pre>\n<p>The you should add the mapper to your provider:</p>\n<pre><code>@Bean\npublic DaoAuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n    // your config ...\n    provider.setAuthoritiesMapper(authoritiesMapper());\n\n    return provider;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16652565,"reputation":103,"user_id":12034987,"display_name":"Hashan Mahesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587838552,"creation_date":1587838552,"answer_id":61430390,"question_id":33205236,"body_markdown":"_ROLE prefix is used by spring security, to identify that it is as a role. A role has a set of privileges a.k.a Authorities, these authorities define varies permissions for a role.\r\n    ex:-  EDIT_PROFILE, DELETE_PROFILE\r\n\r\nYou can define both the roles and authorities, if you are defining a role then it must be prefixed with &quot;ROLE_&quot;\r\n\r\nIn your case you are looking for a role, so by default spring security looks for a string that is prefixed with &quot;ROLE_&quot;.\r\n\r\n\r\n","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>_ROLE prefix is used by spring security, to identify that it is as a role. A role has a set of privileges a.k.a Authorities, these authorities define varies permissions for a role.\n    ex:-  EDIT_PROFILE, DELETE_PROFILE</p>\n\n<p>You can define both the roles and authorities, if you are defining a role then it must be prefixed with \"ROLE_\"</p>\n\n<p>In your case you are looking for a role, so by default spring security looks for a string that is prefixed with \"ROLE_\".</p>\n"}],"owner":{"account_id":2587562,"reputation":1090,"user_id":2242903,"accept_rate":89,"display_name":"Gustavo Rozolin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48079,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":33206127,"answer_count":5,"score":40,"last_activity_date":1686641626,"creation_date":1445217938,"question_id":33205236,"body_markdown":"I have this code in my Web Security Config:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/api/**&quot;)\r\n                .hasRole(&quot;ADMIN&quot;)\r\n                .and()\r\n                .httpBasic().and().csrf().disable();\r\n\r\n    }\r\n\r\nSo I added an user with &quot;ADMIN&quot; role in my database and I always get 403 error when I tryed loggin with this user, then I enabled log for spring and I found this line:\r\n\r\n    2015-10-18 23:13:24.112 DEBUG 4899 --- [nio-8080-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /api/user/login; Attributes: [hasRole(&#39;ROLE_ADMIN&#39;)]\r\n\r\nWhy Spring Security is looking for &quot;ROLE_ADMIN&quot; instead &quot;ADMIN&quot;? ","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>I have this code in my Web Security Config:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .authorizeRequests()\n            .antMatchers(&quot;/api/**&quot;)\n            .hasRole(&quot;ADMIN&quot;)\n            .and()\n            .httpBasic().and().csrf().disable();\n\n}\n</code></pre>\n<p>So I added an user with &quot;ADMIN&quot; role in my database and I always get 403 error when I tryed loggin with this user, then I enabled log for spring and I found this line:</p>\n<pre><code>2015-10-18 23:13:24.112 DEBUG 4899 --- [nio-8080-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /api/user/login; Attributes: [hasRole('ROLE_ADMIN')]\n</code></pre>\n<p>Why Spring Security is looking for &quot;ROLE_ADMIN&quot; instead &quot;ADMIN&quot;?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1299863598,"creation_date":1299863598,"answer_id":5276056,"question_id":5276031,"body_markdown":"Just use:\r\n\r\n- [`Collections#singletonList()`](http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList%28T%29), which returns a [`List`][1], or\r\n- [`Collections#singleton()`](http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singleton%28T%29), which returns a [`Set`][2].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/List.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/Set.html","title":"java one element list","body":"<p>Just use:</p>\n\n<ul>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList%28T%29\" rel=\"noreferrer\"><code>Collections#singletonList()</code></a>, which returns a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/List.html\" rel=\"noreferrer\"><code>List</code></a>, or</li>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singleton%28T%29\" rel=\"noreferrer\"><code>Collections#singleton()</code></a>, which returns a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1503148167,"post_id":5276086,"comment_id":78501951,"body_markdown":"@Cœur the point of the forum is to provide a good answer to the question. The same answer was already given and this did not provide any other useful information. There is no reason the poster can&#39;t just delete the answer. Two others did delete the answer. And my comment is for the future as well so people learn.","body":"@Cœur the point of the forum is to provide a good answer to the question. The same answer was already given and this did not provide any other useful information. There is no reason the poster can&#39;t just delete the answer. Two others did delete the answer. And my comment is for the future as well so people learn."},{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1503154642,"post_id":5276086,"comment_id":78503962,"body_markdown":"@Cœur I realize that  you are a monkey, so I&#39;ll try to keep this simple.  This answer landed almost at the same time as the other.  It is not uncommon for two people to be answering a question at the same time and the answers to post within minutes of each other.","body":"@Cœur I realize that  you are a monkey, so I&#39;ll try to keep this simple.  This answer landed almost at the same time as the other.  It is not uncommon for two people to be answering a question at the same time and the answers to post within minutes of each other."},{"owner":{"account_id":1023850,"reputation":37494,"user_id":1033581,"accept_rate":66,"display_name":"Cœur"},"score":0,"creation_date":1503154930,"post_id":5276086,"comment_id":78504061,"body_markdown":"As in my Chinese zodiac sign? Anyway, I&#39;m removing my comment. And note that I can&#39;t see deleted posts like you, guys.","body":"As in my Chinese zodiac sign? Anyway, I&#39;m removing my comment. And note that I can&#39;t see deleted posts like you, guys."}],"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1299863772,"creation_date":1299863772,"answer_id":5276086,"question_id":5276031,"body_markdown":"Consider &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList(T)&quot;&gt;Collections.singletonList()&lt;/a&gt; for a list of 1 element.","title":"java one element list","body":"<p>Consider <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList(T)\" rel=\"nofollow\">Collections.singletonList()</a> for a list of 1 element.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686641340,"creation_date":1686641340,"answer_id":76462590,"question_id":5276031,"body_markdown":"As an alternative to [`Collections.singletonList(T o)`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#singletonList(T)) mentioned in other answers, there&#39;s [`List.of(E e1)`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E)).  This is the single-element overload of the [unmodifiable lists](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#unmodifiable) static factory methods, which create unmodifiable lists of arbitrary sizes.\r\n\r\nWhile the current implementation has a small bit of additional overhead compared to `singletonList`, it is likely to be similarly performant to `singletonList` in practice.","title":"java one element list","body":"<p>As an alternative to <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#singletonList(T)\" rel=\"nofollow noreferrer\"><code>Collections.singletonList(T o)</code></a> mentioned in other answers, there's <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E)\" rel=\"nofollow noreferrer\"><code>List.of(E e1)</code></a>.  This is the single-element overload of the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable lists</a> static factory methods, which create unmodifiable lists of arbitrary sizes.</p>\n<p>While the current implementation has a small bit of additional overhead compared to <code>singletonList</code>, it is likely to be similarly performant to <code>singletonList</code> in practice.</p>\n"}],"owner":{"account_id":20044,"reputation":4699,"user_id":47508,"accept_rate":62,"display_name":"richs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":5276056,"answer_count":3,"score":6,"last_activity_date":1686641340,"creation_date":1299863461,"question_id":5276031,"body_markdown":"What is the most efficient (performant) way to create a list with just one element? ","title":"java one element list","body":"<p>What is the most efficient (performant) way to create a list with just one element? </p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9851,"page":374,"page_size":100}
