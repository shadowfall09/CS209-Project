{"items":[{"tags":["java","java-stream","java-17"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":3,"creation_date":1637102861,"post_id":69996916,"comment_id":123735645,"body_markdown":"Do you want a single collection of all distinct operations for all users? Or the collection of operations for a given user? What is the type of the result you seek?","body":"Do you want a single collection of all distinct operations for all users? Or the collection of operations for a given user? What is the type of the result you seek?"},{"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"score":0,"creation_date":1637102972,"post_id":69996916,"comment_id":123735674,"body_markdown":"Exactly: a single collection of all the operations","body":"Exactly: a single collection of all the operations"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1637103001,"post_id":69996916,"comment_id":123735680,"body_markdown":"All operations for a single user, or all operations for all users?","body":"All operations for a single user, or all operations for all users?"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637103035,"creation_date":1637103035,"answer_id":69996964,"question_id":69996916,"body_markdown":"It sounds like what you want is just\r\n\r\n\r\n    userList.stream()\r\n      .flatMap(user -&gt; user.getUserTypes().stream())\r\n      .flatMap(userType -&gt; userType.getOperations().stream())\r\n      .toArray(Operation[]::new);\r\n\r\n...assuming you&#39;re using getters.  This gives you every operation for every user type for every user.","title":"How can I use the Java stream in order to create an array iterating in all the element of a nested collection?","body":"<p>It sounds like what you want is just</p>\n<pre><code>userList.stream()\n  .flatMap(user -&gt; user.getUserTypes().stream())\n  .flatMap(userType -&gt; userType.getOperations().stream())\n  .toArray(Operation[]::new);\n</code></pre>\n<p>...assuming you're using getters.  This gives you every operation for every user type for every user.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637103692,"creation_date":1637103139,"answer_id":69996977,"question_id":69996916,"body_markdown":"Use `flatMap()` on the operations `Set`, with `distinct()`:\r\n\r\n    Operation[] operations = user.getUserTypes().stream()\r\n      .map(UserType::getOperations)\r\n      .flatMap(Set::stream)\r\n      .distinct()\r\n      .toArray(Operation[]::new);","title":"How can I use the Java stream in order to create an array iterating in all the element of a nested collection?","body":"<p>Use <code>flatMap()</code> on the operations <code>Set</code>, with <code>distinct()</code>:</p>\n<pre><code>Operation[] operations = user.getUserTypes().stream()\n  .map(UserType::getOperations)\n  .flatMap(Set::stream)\n  .distinct()\n  .toArray(Operation[]::new);\n</code></pre>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":69996977,"answer_count":2,"score":4,"last_activity_date":1637103692,"creation_date":1637102642,"question_id":69996916,"body_markdown":"I am working on a Java application and I am trying to understand if **Stream** concept can be useful for my use case.\r\n\r\nI am trying to do something similar to what I found into an example but my use case seems to be more complex. This was the original example:\r\n\r\n    String[] profili = utente.getRuoli()\r\n    \t\t\t\t .stream().map(a -&gt; &quot;ROLE_&quot; + a).toArray(String[]::new);\r\n\r\nBasically it is creating an array starting from a stream.\r\n\r\nFollowing my situation. I have this main **User** DTO class representing an user:\r\n\r\n    @Data\r\n    public class User {\r\n    \tprivate int id;\r\n    \tprivate String firstName;\r\n    \tprivate String middleName;\r\n    \tprivate String surname;\r\n    \tprivate char sex;\r\n    \tprivate Date birthdate;\r\n    \tprivate String taxCode;\r\n    \tprivate String eMail;\r\n    \tprivate String pswd;\r\n    \tprivate String contactNumber;\r\n    \tprivate Date createdAt;\r\n    \tprivate Set&lt;Address&gt; addressesList;\r\n    \tprivate Set&lt;UserType&gt; userTypes;   \r\n    }\r\n\r\nThe previous DTO class contains this field representing a collection of user types (for example &quot;ADMIN&quot;, &quot;READER&quot;, &quot;WRITER&quot;, etcetc). This because an user can have multiple types: \r\n\r\n    private Set&lt;UserType&gt; userTypes;\r\n\r\nThis is the **UserType** structure:\r\n\r\n    @Data\r\n    public class UserType {\r\n    \tprivate int id;\r\n    \tprivate String typeName;\r\n    \tprivate String description;\r\n    \tSet&lt;Operation&gt; operations;\r\n    }\r\n\r\nAlso this class contains a field representing  a collection of operations (this because a user type can have multiple operation that can perform on the system), this field:\r\n\r\n    Set&lt;Operation&gt; operations;\r\n\r\nNow I am asking if I can use the stream in a similar way to the original example in order to create an array  of all the operations contained into all the user types.\r\n\r\nIs it possible? What could be a smart solution? Or maybe the best way is the &quot;old style&quot; (iterate on all the object into the **userTypes** Set, then iterate on all the element into the **operations** Set and manually add to an array?). It will work but what could be a neat and elegant solution using stream? (if exist)\r\n\r\n","title":"How can I use the Java stream in order to create an array iterating in all the element of a nested collection?","body":"<p>I am working on a Java application and I am trying to understand if <strong>Stream</strong> concept can be useful for my use case.</p>\n<p>I am trying to do something similar to what I found into an example but my use case seems to be more complex. This was the original example:</p>\n<pre><code>String[] profili = utente.getRuoli()\n                 .stream().map(a -&gt; &quot;ROLE_&quot; + a).toArray(String[]::new);\n</code></pre>\n<p>Basically it is creating an array starting from a stream.</p>\n<p>Following my situation. I have this main <strong>User</strong> DTO class representing an user:</p>\n<pre><code>@Data\npublic class User {\n    private int id;\n    private String firstName;\n    private String middleName;\n    private String surname;\n    private char sex;\n    private Date birthdate;\n    private String taxCode;\n    private String eMail;\n    private String pswd;\n    private String contactNumber;\n    private Date createdAt;\n    private Set&lt;Address&gt; addressesList;\n    private Set&lt;UserType&gt; userTypes;   \n}\n</code></pre>\n<p>The previous DTO class contains this field representing a collection of user types (for example &quot;ADMIN&quot;, &quot;READER&quot;, &quot;WRITER&quot;, etcetc). This because an user can have multiple types:</p>\n<pre><code>private Set&lt;UserType&gt; userTypes;\n</code></pre>\n<p>This is the <strong>UserType</strong> structure:</p>\n<pre><code>@Data\npublic class UserType {\n    private int id;\n    private String typeName;\n    private String description;\n    Set&lt;Operation&gt; operations;\n}\n</code></pre>\n<p>Also this class contains a field representing  a collection of operations (this because a user type can have multiple operation that can perform on the system), this field:</p>\n<pre><code>Set&lt;Operation&gt; operations;\n</code></pre>\n<p>Now I am asking if I can use the stream in a similar way to the original example in order to create an array  of all the operations contained into all the user types.</p>\n<p>Is it possible? What could be a smart solution? Or maybe the best way is the &quot;old style&quot; (iterate on all the object into the <strong>userTypes</strong> Set, then iterate on all the element into the <strong>operations</strong> Set and manually add to an array?). It will work but what could be a neat and elegant solution using stream? (if exist)</p>\n"},{"tags":["java","json","android-animation","lottie"],"comments":[{"owner":{"account_id":4500391,"reputation":2003,"user_id":3659052,"accept_rate":55,"display_name":"logger"},"score":0,"creation_date":1558555895,"post_id":56264263,"comment_id":99144942,"body_markdown":"will this code ever reach else statement?","body":"will this code ever reach else statement?"},{"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"score":0,"creation_date":1558556143,"post_id":56264263,"comment_id":99145046,"body_markdown":"Yes, I edited the question. my mistake","body":"Yes, I edited the question. my mistake"},{"owner":{"account_id":4500391,"reputation":2003,"user_id":3659052,"accept_rate":55,"display_name":"logger"},"score":0,"creation_date":1558556578,"post_id":56264263,"comment_id":99145273,"body_markdown":"just try to log or print out `something` before it enter the statement it will give you an idea why it behaves like this","body":"just try to log or print out <code>something</code> before it enter the statement it will give you an idea why it behaves like this"},{"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"score":0,"creation_date":1558658667,"post_id":56264263,"comment_id":99182747,"body_markdown":"Yes, i&#39;ve done this, I also logged the frames and progress when the animation is played. the frames and progress seem to change and respond to the condition correctly, but sometimes the animation just doesn&#39;t play, or plays incorrectly :/","body":"Yes, i&#39;ve done this, I also logged the frames and progress when the animation is played. the frames and progress seem to change and respond to the condition correctly, but sometimes the animation just doesn&#39;t play, or plays incorrectly :/"},{"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"score":0,"creation_date":1558742705,"post_id":56264263,"comment_id":99213333,"body_markdown":"setting the animation to loop did the trick, silly of me to overlook","body":"setting the animation to loop did the trick, silly of me to overlook"}],"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637103570,"creation_date":1558555703,"question_id":56264263,"body_markdown":"I&#39;m using the Lottie library to add animation to my app. I want the animation to play the first half of the animation if some condition is true, and the other half of the animation if the condition is false. below is some code for what I&#39;ve tried, it seems to work on and off and very buggy, not sure if a lottie issue, or if I&#39;m doing something wrong. thanks for any help!\r\n\r\n\r\n```\r\n       if (something==true) {\r\n            lottieAnimationView.setMinFrame(0);\r\n            lottieAnimationView.setMaxFrame(28);\r\n            lottieAnimationView.playAnimation();\r\n        } else {\r\n            lottieAnimationView.setMinFrame(28);\r\n            lottieAnimationView.setMaxFrame(70);\r\n            lottieAnimationView.playAnimation();\r\n        }\r\n```\r\n\r\nSolution:\r\n Setting a loop to the animation and using playAnimation(), pauseAnimation() and resumeAnimation()\r\n```\r\nlottieAnimationView.loop(true);","title":"Lottie animation not behaving as expected","body":"<p>I'm using the Lottie library to add animation to my app. I want the animation to play the first half of the animation if some condition is true, and the other half of the animation if the condition is false. below is some code for what I've tried, it seems to work on and off and very buggy, not sure if a lottie issue, or if I'm doing something wrong. thanks for any help!</p>\n\n<pre><code>       if (something==true) {\n            lottieAnimationView.setMinFrame(0);\n            lottieAnimationView.setMaxFrame(28);\n            lottieAnimationView.playAnimation();\n        } else {\n            lottieAnimationView.setMinFrame(28);\n            lottieAnimationView.setMaxFrame(70);\n            lottieAnimationView.playAnimation();\n        }\n</code></pre>\n\n<p>Solution:\n Setting a loop to the animation and using playAnimation(), pauseAnimation() and resumeAnimation()</p>\n\n<pre><code>lottieAnimationView.loop(true);\n</code></pre>\n"},{"tags":["java","android","android-animation","lottie"],"comments":[{"owner":{"account_id":6247715,"reputation":434,"user_id":4858967,"accept_rate":67,"display_name":"Ahmet Yılmaz"},"score":0,"creation_date":1566892658,"post_id":57669953,"comment_id":101787676,"body_markdown":"https://lottiefiles.com/ lottie library I mean","body":"<a href=\"https://lottiefiles.com/\" rel=\"nofollow noreferrer\">lottiefiles.com</a> lottie library I mean"},{"owner":{"account_id":3493727,"reputation":1793,"user_id":2938633,"accept_rate":65,"display_name":"Blnpwr"},"score":0,"creation_date":1566893024,"post_id":57669953,"comment_id":101787851,"body_markdown":"You can use boolean values to determine if the button is clicked or not. If you click the button set a bool to true, do your logic inside a if condition and at the end, set the bool value again to false.","body":"You can use boolean values to determine if the button is clicked or not. If you click the button set a bool to true, do your logic inside a if condition and at the end, set the bool value again to false."}],"answers":[{"tags":[],"owner":{"account_id":15166930,"reputation":451,"user_id":10944196,"display_name":"Sergio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566894214,"creation_date":1566893443,"answer_id":57670314,"question_id":57669953,"body_markdown":"Use 2 different functions, once for the initial animation and the other for the reverse one. I would recommend you use an `animator listener` aswell. Use the `removeAllAnimatorListeners` to reset the animation.\r\n\r\n(The example was made in Kotlin, but is pretty much the same) Then call these 2 methods in your booleans.\r\n\r\n\r\n    private fun initAnimation() {\r\n        imgIconLike?.playAnimation()\r\n\r\n        imgIconLike?.addAnimatorListener(object : Animator.AnimatorListener {\r\n            override fun onAnimationCancel(animation: Animator?) {}\r\n            override fun onAnimationStart(animation: Animator?) {}\r\n            override fun onAnimationRepeat(animation: Animator?) {}\r\n            override fun onAnimationEnd(animation: Animator?) {\r\n                imgIconLike?.removeAllAnimatorListeners()\r\n            }\r\n        })\r\n    }\r\n    \r\n    private fun revertInitAnimation() {\r\n        imgIconLike?.speed = -1F\r\n        imgIconLike?.playAnimation()\r\n\r\n        sendBtn?.addAnimatorListener(object : Animator.AnimatorListener {\r\n            override fun onAnimationCancel(animation: Animator?) {}\r\n            override fun onAnimationStart(animation: Animator?) {}\r\n            override fun onAnimationRepeat(animation: Animator?) {}\r\n            override fun onAnimationEnd(animation: Animator?) {\r\n                imgIconLike?.removeAllAnimatorListeners()\r\n            }\r\n        })\r\n    }\r\n","title":"How can make a like button with lottie animation?","body":"<p>Use 2 different functions, once for the initial animation and the other for the reverse one. I would recommend you use an <code>animator listener</code> aswell. Use the <code>removeAllAnimatorListeners</code> to reset the animation.</p>\n\n<p>(The example was made in Kotlin, but is pretty much the same) Then call these 2 methods in your booleans.</p>\n\n<pre><code>private fun initAnimation() {\n    imgIconLike?.playAnimation()\n\n    imgIconLike?.addAnimatorListener(object : Animator.AnimatorListener {\n        override fun onAnimationCancel(animation: Animator?) {}\n        override fun onAnimationStart(animation: Animator?) {}\n        override fun onAnimationRepeat(animation: Animator?) {}\n        override fun onAnimationEnd(animation: Animator?) {\n            imgIconLike?.removeAllAnimatorListeners()\n        }\n    })\n}\n\nprivate fun revertInitAnimation() {\n    imgIconLike?.speed = -1F\n    imgIconLike?.playAnimation()\n\n    sendBtn?.addAnimatorListener(object : Animator.AnimatorListener {\n        override fun onAnimationCancel(animation: Animator?) {}\n        override fun onAnimationStart(animation: Animator?) {}\n        override fun onAnimationRepeat(animation: Animator?) {}\n        override fun onAnimationEnd(animation: Animator?) {\n            imgIconLike?.removeAllAnimatorListeners()\n        }\n    })\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9056380,"reputation":3051,"user_id":6744566,"accept_rate":20,"display_name":"Prithvi Bhola"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1566900483,"creation_date":1566893551,"answer_id":57670351,"question_id":57669953,"body_markdown":"&gt; I want it to get white again after I click a second time\r\n\r\nYou can do this in 2 ways:\r\n\r\n1. Set the visibility of the view to `GONE` when clicked second time, but this won&#39;t show the animation.\r\n2. Reverse the animation of `lottie view` using `setSpeed(float)` and passing `-1F` to the method.\r\n\r\nSo try this:\r\n\r\n    if (!isAnimated){ \r\n              imgIconLike.setSpeed(3f); \r\n              isAnimated=true; \r\n              imgIconLike.playAnimation();\r\n    } else { \r\n              imgIconLike.setSpeed(-1F); \r\n              isAnimated=false; \r\n              imgIconLike.playAnimation();\r\n    }","title":"How can make a like button with lottie animation?","body":"<blockquote>\n  <p>I want it to get white again after I click a second time</p>\n</blockquote>\n\n<p>You can do this in 2 ways:</p>\n\n<ol>\n<li>Set the visibility of the view to <code>GONE</code> when clicked second time, but this won't show the animation.</li>\n<li>Reverse the animation of <code>lottie view</code> using <code>setSpeed(float)</code> and passing <code>-1F</code> to the method.</li>\n</ol>\n\n<p>So try this:</p>\n\n<pre><code>if (!isAnimated){ \n          imgIconLike.setSpeed(3f); \n          isAnimated=true; \n          imgIconLike.playAnimation();\n} else { \n          imgIconLike.setSpeed(-1F); \n          isAnimated=false; \n          imgIconLike.playAnimation();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5757344,"reputation":445,"user_id":4544797,"display_name":"Abu Noman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566897541,"creation_date":1566897092,"answer_id":57671293,"question_id":57669953,"body_markdown":"You can do this by stopping animation and set progress to `0.0f`, follow the code below:\r\n\r\n    private var isLiked: Boolean = false\r\n    \r\n    animationLike.setOnClickListener {\r\n        isLiked = !isLiked\r\n        animationLike.apply {\r\n            if (isLiked) {\r\n                playAnimation()\r\n            } else {\r\n                cancelAnimation()\r\n                progress = 0.0f\r\n            }\r\n        }\r\n    }\r\n\r\nXML looks like:\r\n\r\n    &lt;com.airbnb.lottie.LottieAnimationView\r\n                android:id=&quot;@+id/animation_like&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                app:lottie_rawRes=&quot;@raw/heart&quot;/&gt;","title":"How can make a like button with lottie animation?","body":"<p>You can do this by stopping animation and set progress to <code>0.0f</code>, follow the code below:</p>\n\n<pre><code>private var isLiked: Boolean = false\n\nanimationLike.setOnClickListener {\n    isLiked = !isLiked\n    animationLike.apply {\n        if (isLiked) {\n            playAnimation()\n        } else {\n            cancelAnimation()\n            progress = 0.0f\n        }\n    }\n}\n</code></pre>\n\n<p>XML looks like:</p>\n\n<pre><code>&lt;com.airbnb.lottie.LottieAnimationView\n            android:id=\"@+id/animation_like\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:lottie_rawRes=\"@raw/heart\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":6247715,"reputation":434,"user_id":4858967,"accept_rate":67,"display_name":"Ahmet Yılmaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":57670351,"answer_count":3,"score":0,"last_activity_date":1637103295,"creation_date":1566892059,"question_id":57669953,"body_markdown":"I want to make a `like` `button` in my app with lottie animation. I have downloaded a `json` file ofvthe animation that I want. It works after clicking. But the heart icon is white as default. After I click it, it gets red with the animation. I want it to get white again after I click a second time. I just can&#39;t do it. How can I do it?\r\n\r\nProductActivity.java\r\n\r\n       public class ProductActivity extends AppCompatActivity {\r\n        LottieAnimationView imgIconLike;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_product);\r\n            imgIconLike = findViewById(R.id.img_icon_like);\r\n            }\r\n    \r\n         /* I did isAnimated boolean to handle second time click. Also\r\n           try pauseAnimation, cancelAnimation and another else. I can&#39;t success it anyways. */\r\n    \r\n        private void registerHandler() {\r\n            imgIconLike.setOnClickListener(new View.OnClickListener() {\r\n                boolean isAnimated=false;\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                   if (!isAnimated){\r\n                    imgIconLike.playAnimation();\r\n                    imgIconLike.setSpeed(3f);\r\n                    isAnimated=true;}\r\n                    else {\r\n                        imgIconLike.cancelAnimation;\r\n                        isAnimated=false;\r\n                    }\r\n    \r\n                }\r\n            });\r\n        }\r\n      }\r\n\r\nactivity_product.xml\r\n\r\n    &lt;com.airbnb.lottie.LottieAnimationView\r\n                android:id=&quot;@+id/img_icon_like&quot;\r\n                android:layout_width=&quot;50dp&quot;\r\n                android:layout_height=&quot;58dp&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;@+id/textFollow_cost&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/textFollow_cost&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;@+id/textFollow_cost&quot;\r\n                app:lottie_autoPlay=&quot;false&quot;\r\n                app:lottie_fileName=&quot;1087-heart.json&quot;\r\n                app:lottie_loop=&quot;false&quot; /&gt;\r\n","title":"How can make a like button with lottie animation?","body":"<p>I want to make a <code>like</code> <code>button</code> in my app with lottie animation. I have downloaded a <code>json</code> file ofvthe animation that I want. It works after clicking. But the heart icon is white as default. After I click it, it gets red with the animation. I want it to get white again after I click a second time. I just can't do it. How can I do it?</p>\n\n<p>ProductActivity.java</p>\n\n<pre><code>   public class ProductActivity extends AppCompatActivity {\n    LottieAnimationView imgIconLike;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_product);\n        imgIconLike = findViewById(R.id.img_icon_like);\n        }\n\n     /* I did isAnimated boolean to handle second time click. Also\n       try pauseAnimation, cancelAnimation and another else. I can't success it anyways. */\n\n    private void registerHandler() {\n        imgIconLike.setOnClickListener(new View.OnClickListener() {\n            boolean isAnimated=false;\n            @Override\n            public void onClick(View v) {\n\n               if (!isAnimated){\n                imgIconLike.playAnimation();\n                imgIconLike.setSpeed(3f);\n                isAnimated=true;}\n                else {\n                    imgIconLike.cancelAnimation;\n                    isAnimated=false;\n                }\n\n            }\n        });\n    }\n  }\n</code></pre>\n\n<p>activity_product.xml</p>\n\n<pre><code>&lt;com.airbnb.lottie.LottieAnimationView\n            android:id=\"@+id/img_icon_like\"\n            android:layout_width=\"50dp\"\n            android:layout_height=\"58dp\"\n            app:layout_constraintBottom_toBottomOf=\"@+id/textFollow_cost\"\n            app:layout_constraintEnd_toStartOf=\"@+id/textFollow_cost\"\n            app:layout_constraintTop_toTopOf=\"@+id/textFollow_cost\"\n            app:lottie_autoPlay=\"false\"\n            app:lottie_fileName=\"1087-heart.json\"\n            app:lottie_loop=\"false\" /&gt;\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","spring-mvc","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15429444,"reputation":3,"user_id":11131278,"display_name":"Andrea Depaul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637102533,"creation_date":1637102533,"answer_id":69996898,"question_id":69988318,"body_markdown":"The solution I&#39;ve found is creating a different Entity for each query. Not the best option but it&#39;s all I&#39;ve got right now. ","title":"Two different queries returning the same object Spring Boot JPA","body":"<p>The solution I've found is creating a different Entity for each query. Not the best option but it's all I've got right now.</p>\n"}],"owner":{"account_id":15429444,"reputation":3,"user_id":11131278,"display_name":"Andrea Depaul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":651,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637102533,"creation_date":1637062094,"question_id":69988318,"body_markdown":"I created a Repository with 3 different queries. Each query returns a different result. But when it comes to mapping the first query result goes to the second query result. If I change the order of the queries the first result will be the result of the next query. I even tried to create two different Repositories\r\n\r\nThese are the result objects query:\r\n[First Result][1]\r\n[Second Result][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zTP9T.png\r\n\r\n\r\n\r\n\r\n  [2]: https://i.stack.imgur.com/S7nc2.png\r\n\r\n\r\nThis is my First repository: \r\n\r\n    package com.springboot.first.app;\r\n\r\n\r\n    @Repository\r\n    public interface TotalSRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\r\n\t\r\n\t\r\n\t@Query(value= &quot;select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tcountQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tnativeQuery = true)\r\n\t\t\tList&lt;TotalEntity&gt; findSpeseTotalsContanti(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\r\n\t\r\n\t@Query(value= &quot;select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tcountQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tnativeQuery = true)\r\n\t\t\tList&lt;TotalEntity&gt; findSpeseTotalsBanca(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\r\n\r\n    }\r\n\r\n\r\nThis is the second repo\r\n\r\n    @Repository\r\n    public interface TotalRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\r\n\t\r\n\t@Query(value= &quot;select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \r\n\t\t\tcountQuery = &quot;SELECT count(*) from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \r\n\t\t\tnativeQuery = true)\r\n\t\t\tList&lt;TotalEntity&gt; findIncassiTotals(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\r\n\t\r\n\r\n    }\r\n\r\n\r\nThis is the entity \r\n\r\n    @Entity\r\n    public class TotalEntity {\r\n    private Date data;\r\n    private Double totaleBanca; \r\n    private Double totaleContanti; \r\n    \r\n\r\n    public TotalEntity() {\r\n    }\r\n\r\n\r\n    @Id\r\n    @Column(name = &quot;data&quot;)\r\n\tpublic Date getData() {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tpublic void setData(Date data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n    @Basic\r\n    @Column(name = &quot;totalebanca&quot;)\r\n\tpublic double getTotaleBanca() {\r\n\t\treturn totaleBanca;\r\n\t}\r\n\r\n\tpublic void setTotaleBanca(double importoC) {\r\n\t\tthis.totaleBanca = importoC;\r\n\t}\r\n\r\n\t\r\n    @Basic\r\n    @Column(name = &quot;totalecontanti&quot;)\r\n\tpublic double getTotaleContanti() {\r\n\t\treturn totaleContanti;\r\n\t}\r\n\r\n\tpublic void setTotaleContanti(double importoC) {\r\n\t\tthis.totaleContanti = importoC;\r\n\t}\r\n \r\n\t\r\n\t\r\n    }\r\n\r\n\r\nI tried to execute the Hibernate logged query \r\n\r\n    Hibernate: select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = ? and YEAR(i.`data`) = ? group by i.`data`\r\n    Hibernate: select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag NOT IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`\r\n    Hibernate: select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`\r\n\r\n\r\nand the results are correct. But the mapped object in debug is the same. Any suggestion?","title":"Two different queries returning the same object Spring Boot JPA","body":"<p>I created a Repository with 3 different queries. Each query returns a different result. But when it comes to mapping the first query result goes to the second query result. If I change the order of the queries the first result will be the result of the next query. I even tried to create two different Repositories</p>\n<p>These are the result objects query:\n<a href=\"https://i.stack.imgur.com/zTP9T.png\" rel=\"nofollow noreferrer\">First Result</a>\n<a href=\"https://i.stack.imgur.com/S7nc2.png\" rel=\"nofollow noreferrer\">Second Result</a></p>\n<p>This is my First repository:</p>\n<pre><code>package com.springboot.first.app;\n\n\n@Repository\npublic interface TotalSRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\n\n\n@Query(value= &quot;select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        countQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        nativeQuery = true)\n        List&lt;TotalEntity&gt; findSpeseTotalsContanti(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\n\n@Query(value= &quot;select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        countQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        nativeQuery = true)\n        List&lt;TotalEntity&gt; findSpeseTotalsBanca(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\n\n}\n</code></pre>\n<p>This is the second repo</p>\n<pre><code>@Repository\npublic interface TotalRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\n\n@Query(value= &quot;select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \n        countQuery = &quot;SELECT count(*) from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \n        nativeQuery = true)\n        List&lt;TotalEntity&gt; findIncassiTotals(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\n\n\n}\n</code></pre>\n<p>This is the entity</p>\n<pre><code>@Entity\npublic class TotalEntity {\nprivate Date data;\nprivate Double totaleBanca; \nprivate Double totaleContanti; \n\n\npublic TotalEntity() {\n}\n\n\n@Id\n@Column(name = &quot;data&quot;)\npublic Date getData() {\n    return data;\n}\n\npublic void setData(Date data) {\n    this.data = data;\n}\n\n@Basic\n@Column(name = &quot;totalebanca&quot;)\npublic double getTotaleBanca() {\n    return totaleBanca;\n}\n\npublic void setTotaleBanca(double importoC) {\n    this.totaleBanca = importoC;\n}\n\n\n@Basic\n@Column(name = &quot;totalecontanti&quot;)\npublic double getTotaleContanti() {\n    return totaleContanti;\n}\n\npublic void setTotaleContanti(double importoC) {\n    this.totaleContanti = importoC;\n}\n\n\n\n}\n</code></pre>\n<p>I tried to execute the Hibernate logged query</p>\n<pre><code>Hibernate: select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = ? and YEAR(i.`data`) = ? group by i.`data`\nHibernate: select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag NOT IN('CONTANTI', 'VOUCHER') group by s.`data`\nHibernate: select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag IN('CONTANTI', 'VOUCHER') group by s.`data`\n</code></pre>\n<p>and the results are correct. But the mapped object in debug is the same. Any suggestion?</p>\n"},{"tags":["java","okhttp"],"comments":[{"owner":{"account_id":6894157,"reputation":1612,"user_id":5296683,"accept_rate":83,"display_name":"Med Elgarnaoui"},"score":0,"creation_date":1617283669,"post_id":66905117,"comment_id":118265673,"body_markdown":"add okhttp jar to your project build path","body":"add okhttp jar to your project build path"}],"answers":[{"tags":[],"owner":{"account_id":5940172,"reputation":3457,"user_id":4671717,"accept_rate":25,"display_name":"Chris Maggiulli"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1637102275,"creation_date":1617283270,"answer_id":66905320,"question_id":66905117,"body_markdown":"\r\n# Download Dependency\r\n\r\nYou can download the jar file from [maven central][2].\r\n\r\n[![download jar][3]][3]\r\n\r\n# Add to Project Classpath\r\n\r\nThen you need to add it to your classpath.\r\n\r\n## Shell\r\nIf you&#39;re compiling from the terminal place your okhttp.jar file in the same directory as your Java class.  You can then run the following command\r\n\r\n    javac -cp okhttp-2.7.5.jar MyClass.java\r\n\r\n&gt; You need to replace okhttp-2.7.5.jar with the actual name of the okhttp jar, and replace MyClass.java with the actually name of your Java file\r\n\r\n## Eclipse\r\n\r\n1. Right click on project\r\n2. Build Path...\r\n3. Configure Build Path....\r\n4. Add External Jar\r\n5. Select the jar file \r\n\r\n[![right click][4]][4]\r\n[![add external jar][5]][5]\r\n\r\n&gt; The method outlined above is the simplest way to add dependencies to a project.  However, there are specific technologies such as *Ant*, *Maven*, and *Gradle* which allow you to include dependencies through XML or other DSL&#39;s\r\n\r\n  [1]: https://stackoverflow.com/help/minimal-reproducible-example\r\n  [2]: https://mvnrepository.com/artifact/com.squareup.okhttp/okhttp/2.7.5\r\n  [3]: https://i.stack.imgur.com/rZoGv.png\r\n  [4]: https://i.stack.imgur.com/VR2qX.png\r\n  [5]: https://i.stack.imgur.com/Sl2XD.png","title":"How to import okhttp in a standard java program?","body":"<h1>Download Dependency</h1>\n<p>You can download the jar file from <a href=\"https://mvnrepository.com/artifact/com.squareup.okhttp/okhttp/2.7.5\" rel=\"nofollow noreferrer\">maven central</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/rZoGv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rZoGv.png\" alt=\"download jar\" /></a></p>\n<h1>Add to Project Classpath</h1>\n<p>Then you need to add it to your classpath.</p>\n<h2>Shell</h2>\n<p>If you're compiling from the terminal place your okhttp.jar file in the same directory as your Java class.  You can then run the following command</p>\n<pre><code>javac -cp okhttp-2.7.5.jar MyClass.java\n</code></pre>\n<blockquote>\n<p>You need to replace okhttp-2.7.5.jar with the actual name of the okhttp jar, and replace MyClass.java with the actually name of your Java file</p>\n</blockquote>\n<h2>Eclipse</h2>\n<ol>\n<li>Right click on project</li>\n<li>Build Path...</li>\n<li>Configure Build Path....</li>\n<li>Add External Jar</li>\n<li>Select the jar file</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/VR2qX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VR2qX.png\" alt=\"right click\" /></a>\n<a href=\"https://i.stack.imgur.com/Sl2XD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sl2XD.png\" alt=\"add external jar\" /></a></p>\n<blockquote>\n<p>The method outlined above is the simplest way to add dependencies to a project.  However, there are specific technologies such as <em>Ant</em>, <em>Maven</em>, and <em>Gradle</em> which allow you to include dependencies through XML or other DSL's</p>\n</blockquote>\n"}],"owner":{"account_id":19980047,"reputation":81,"user_id":14643438,"display_name":"Antoine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6801,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":66905320,"answer_count":1,"score":4,"last_activity_date":1637102275,"creation_date":1617282397,"question_id":66905117,"body_markdown":"I am trying to import the okhttp package in a java program, but I have not been able to find how to do it.\r\n\r\nFor now, I have downloaded the package on my computer (from the following git hub link : https://github.com/square/okhttp) but I do not understand how to import the package in my program.\r\n\r\nAny suggestion on how to use this package?","title":"How to import okhttp in a standard java program?","body":"<p>I am trying to import the okhttp package in a java program, but I have not been able to find how to do it.</p>\n<p>For now, I have downloaded the package on my computer (from the following git hub link : <a href=\"https://github.com/square/okhttp\" rel=\"nofollow noreferrer\">https://github.com/square/okhttp</a>) but I do not understand how to import the package in my program.</p>\n<p>Any suggestion on how to use this package?</p>\n"},{"tags":["javascript","java","android","kotlin","authentication"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1637102344,"post_id":69996741,"comment_id":123735526,"body_markdown":"Its going to depend on their code, it could do authentication in a dozen different ways, from HTTP Basic Auth, to a custom solution.  You&#39;d need to reverse engineer their website to figure it out.  Generally solutions like this are not recommended and are very fragile, you should find another way to get that info instead, such as public API.","body":"Its going to depend on their code, it could do authentication in a dozen different ways, from HTTP Basic Auth, to a custom solution.  You&#39;d need to reverse engineer their website to figure it out.  Generally solutions like this are not recommended and are very fragile, you should find another way to get that info instead, such as public API."},{"owner":{"account_id":20888183,"reputation":146,"user_id":15344254,"display_name":"ChocolateChapta"},"score":0,"creation_date":1637104347,"post_id":69996741,"comment_id":123735978,"body_markdown":"@GabeSechan Okay, thank you for your response. Is there some way to at least log in manually through a `WebView`?","body":"@GabeSechan Okay, thank you for your response. Is there some way to at least log in manually through a <code>WebView</code>?"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1637104614,"post_id":69996741,"comment_id":123736024,"body_markdown":"You should be able to, as long as WebView isn&#39;t confused by the site.  Of course that login would only be good within that webview, it wouldn&#39;t automatically make any other request work.  Although if you were to scour the cookies and headers of the response, you might be able to find how they store the login token and use that in a future request.","body":"You should be able to, as long as WebView isn&#39;t confused by the site.  Of course that login would only be good within that webview, it wouldn&#39;t automatically make any other request work.  Although if you were to scour the cookies and headers of the response, you might be able to find how they store the login token and use that in a future request."},{"owner":{"account_id":771526,"reputation":629,"user_id":804509,"display_name":"Michael"},"score":0,"creation_date":1637501610,"post_id":69996741,"comment_id":123837569,"body_markdown":"As said by Gabe, this depends on the method of authentication used by the site. Using basic auth, you might be able to use `http://user:password@domain.com/` (note however that this might be visible in server logs!). Check with developer tools which response is given to the initial request. If manageable, programmatically handle the request and then show the result in the WebView (instead of letting the WebView handle the URL call).","body":"As said by Gabe, this depends on the method of authentication used by the site. Using basic auth, you might be able to use <code>http:&#47;&#47;user:password@domain.com&#47;</code> (note however that this might be visible in server logs!). Check with developer tools which response is given to the initial request. If manageable, programmatically handle the request and then show the result in the WebView (instead of letting the WebView handle the URL call)."}],"owner":{"account_id":20888183,"reputation":146,"user_id":15344254,"display_name":"ChocolateChapta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637101922,"creation_date":1637101353,"question_id":69996741,"body_markdown":"I want to download an `XML` file from a web server, but the server requires a login. There is no custom login form, just a browser dialog, which `WebView` can&#39;t even show. I have tried to do some research, but I couldn&#39;t really find information about this type of login.\r\n\r\n[![screenshot of login dialog][2]][2]\r\n\r\nThis screenshot shows the login dialog in the Opera browser. How can I log into the server and save the file that should then be shown?\r\n\r\n  [2]: https://i.stack.imgur.com/4n3PY.png","title":"How to download XML from protected server to Android device?","body":"<p>I want to download an <code>XML</code> file from a web server, but the server requires a login. There is no custom login form, just a browser dialog, which <code>WebView</code> can't even show. I have tried to do some research, but I couldn't really find information about this type of login.</p>\n<p><a href=\"https://i.stack.imgur.com/4n3PY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4n3PY.png\" alt=\"screenshot of login dialog\" /></a></p>\n<p>This screenshot shows the login dialog in the Opera browser. How can I log into the server and save the file that should then be shown?</p>\n"},{"tags":["java","javascript","ajax"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1298624482,"creation_date":1298624482,"answer_id":5115358,"question_id":5115225,"body_markdown":"You need to transform your array of Java objects into something JavaScript understands. There are two obvious choices : XML (AJAX means Asynchronous Javascript And XML), or [JSON][1]. JSON is probably easier and more lightweight. \r\n\r\nAll the AJAX JavaScript libraries (JQuery, etc.) have good support for JSON. See http://api.jquery.com/jQuery.getJSON/ for example. \r\n\r\nThere are also several Java APIs to transform Java objects into JSON (look at [GSON][2] for example).\r\n\r\nYou&#39;ll have to modify the content type of the response : it&#39;s not text/html, but application/json if you use JSON.\r\n\r\n\r\n  [1]: http://json.org/\r\n  [2]: http://code.google.com/p/google-gson/","title":"Handle java object in javascript","body":"<p>You need to transform your array of Java objects into something JavaScript understands. There are two obvious choices : XML (AJAX means Asynchronous Javascript And XML), or <a href=\"http://json.org/\" rel=\"nofollow\">JSON</a>. JSON is probably easier and more lightweight. </p>\n\n<p>All the AJAX JavaScript libraries (JQuery, etc.) have good support for JSON. See <a href=\"http://api.jquery.com/jQuery.getJSON/\" rel=\"nofollow\">http://api.jquery.com/jQuery.getJSON/</a> for example. </p>\n\n<p>There are also several Java APIs to transform Java objects into JSON (look at <a href=\"http://code.google.com/p/google-gson/\" rel=\"nofollow\">GSON</a> for example).</p>\n\n<p>You'll have to modify the content type of the response : it's not text/html, but application/json if you use JSON.</p>\n"},{"tags":[],"owner":{"account_id":172198,"reputation":5240,"user_id":628006,"accept_rate":90,"display_name":"р&#252;ффп"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637101812,"creation_date":1298637640,"answer_id":5117319,"question_id":5115225,"body_markdown":"As already said jQuery is very good for ajax manipulation. \r\n\r\nAnother good framework I liked to use was DWR: https://github.com/directwebremoting/dwr\r\n\r\nIt is quite lighter than jQuery (because only focused on Ajax calls and not components) and very easy to understand.\r\n\r\n","title":"Handle java object in javascript","body":"<p>As already said jQuery is very good for ajax manipulation.</p>\n<p>Another good framework I liked to use was DWR: <a href=\"https://github.com/directwebremoting/dwr\" rel=\"nofollow noreferrer\">https://github.com/directwebremoting/dwr</a></p>\n<p>It is quite lighter than jQuery (because only focused on Ajax calls and not components) and very easy to understand.</p>\n"},{"tags":[],"owner":{"account_id":156786,"reputation":8774,"user_id":374293,"accept_rate":40,"display_name":"Isaac Truett"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1298638213,"creation_date":1298638213,"answer_id":5117422,"question_id":5115225,"body_markdown":"Have you considered using [Google Web Toolkit][1]? With GWT you have a number of choices for sending objects between client and server, including [GWT RPC][2], [RequestFactory][3], and [JSON][4].\r\n\r\n\r\n  [1]: http://code.google.com/webtoolkit/\r\n  [2]: http://code.google.com/webtoolkit/doc/latest/DevGuideServerCommunication.html\r\n  [3]: http://code.google.com/webtoolkit/doc/latest/DevGuideRequestFactory.html\r\n  [4]: http://code.google.com/webtoolkit/doc/latest/DevGuideCodingBasicsJSON.html","title":"Handle java object in javascript","body":"<p>Have you considered using <a href=\"http://code.google.com/webtoolkit/\" rel=\"nofollow\">Google Web Toolkit</a>? With GWT you have a number of choices for sending objects between client and server, including <a href=\"http://code.google.com/webtoolkit/doc/latest/DevGuideServerCommunication.html\" rel=\"nofollow\">GWT RPC</a>, <a href=\"http://code.google.com/webtoolkit/doc/latest/DevGuideRequestFactory.html\" rel=\"nofollow\">RequestFactory</a>, and <a href=\"http://code.google.com/webtoolkit/doc/latest/DevGuideCodingBasicsJSON.html\" rel=\"nofollow\">JSON</a>.</p>\n"}],"owner":{"account_id":245943,"reputation":5001,"user_id":519755,"accept_rate":84,"display_name":"Varun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7991,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":5117422,"answer_count":3,"score":6,"last_activity_date":1637101812,"creation_date":1298623529,"question_id":5115225,"body_markdown":"I am using Ajax in my JavaScript and that sets an array of objects of following class in a response:\r\n\r\n    public class RetrieveTempSecVersions {\r\n    \r\n    \tprivate String templateName;\r\n    \tprivate int[] versionNumber;\r\n    \t\r\n    \tpublic String getTemplateName() {\r\n    \t\treturn templateName;\r\n    \t}\r\n    \r\n    \tpublic void setTemplateName(String templateName) {\r\n    \t\tthis.templateName = templateName;\r\n    \t}\r\n    \r\n    \tpublic int[] getVersionNumber() {\r\n    \t\treturn versionNumber;\r\n    \t}\r\n    \r\n    \tpublic void setVersionNumber(int[] i) {\r\n    \t\tthis.versionNumber = i;\r\n    \t}\r\n    }\r\n\r\nusing: \r\n\r\n    aoRes.setContentType(&quot;text/xml&quot;);\r\n    aoRes.setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\r\n    aoRes.getWriter().write(template[]);\r\n\r\nNow I want to read all the elements from template array and its details into my JavaScript.\r\n\r\n\r\nCan anyone help me in how to do that?","title":"Handle java object in javascript","body":"<p>I am using Ajax in my JavaScript and that sets an array of objects of following class in a response:</p>\n\n<pre><code>public class RetrieveTempSecVersions {\n\n    private String templateName;\n    private int[] versionNumber;\n\n    public String getTemplateName() {\n        return templateName;\n    }\n\n    public void setTemplateName(String templateName) {\n        this.templateName = templateName;\n    }\n\n    public int[] getVersionNumber() {\n        return versionNumber;\n    }\n\n    public void setVersionNumber(int[] i) {\n        this.versionNumber = i;\n    }\n}\n</code></pre>\n\n<p>using: </p>\n\n<pre><code>aoRes.setContentType(\"text/xml\");\naoRes.setHeader(\"Cache-Control\", \"no-cache\");\naoRes.getWriter().write(template[]);\n</code></pre>\n\n<p>Now I want to read all the elements from template array and its details into my JavaScript.</p>\n\n<p>Can anyone help me in how to do that?</p>\n"},{"tags":["java","apache-camel","apache-karaf","blueprint-osgi","apache-servicemix"],"answers":[{"tags":[],"owner":{"account_id":172198,"reputation":5240,"user_id":628006,"accept_rate":90,"display_name":"р&#252;ффп"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637101626,"creation_date":1429613429,"answer_id":29770085,"question_id":29768685,"body_markdown":"I would discourage the use of static access to the Property file in a OSGI environment. \r\n\r\nFor me the best way is to create an OSGI service which expose validation method or the properties themselves (with getter/setter) like this:\r\n\r\n\t&lt;service ref=&quot;myConfig&quot;&gt;\r\n\t\t&lt;interfaces&gt;\r\n\t\t\t&lt;value&gt;org.osgi.service.cm.ManagedService&lt;/value&gt;\r\n\t\t\t&lt;value&gt;com.mycompany.services.common.api.MyConfig&lt;/value&gt;\r\n\t\t&lt;/interfaces&gt;\r\n\t\t&lt;service-properties&gt;\r\n\t\t\t&lt;entry key=&quot;service.pid&quot; value=&quot;config.properties&quot; /&gt;\r\n\t\t&lt;/service-properties&gt;\r\n\t&lt;/service&gt;\r\n\r\n\t&lt;bean id=&quot;myConfig&quot; class=&quot;com.mycompany.services.common.config.MyConfigImpl&quot; /&gt;\r\n\r\nAfter in any OSGI bundle which needs to access the property, it can referenced by: \r\n\r\n\t&lt;reference id=&quot;myConfig&quot; interface=&quot;com.mycompany.services.common.api.MyConfig&quot;\r\n\t\tactivation=&quot;eager&quot; availability=&quot;mandatory&quot; /&gt;\r\n\r\nBefore using this way we had a lot of deadlocks between bundles because the usage of static method and LOCK&#39;s. \r\nSince we use the OSGI service, it work very well without problem when refreshing / deploying the bundles.\r\n\r\nI assume you want to access your property file through any other OSGI bundle, not external code from the OSGI context.\r\nIf you want to access the property file outside the OSGI context, I suggest to create a (REST) Web-service over the mentioned interface (`&lt;reference&gt;`).\r\n\r\nImplementation example: \r\n\r\n    public class MyConfigImpl implements MyConfig, ManagedService {\r\n    \r\n    \t// This is just the property keys \r\n    \tprivate final static String COLORS = &quot;my.valid.colors&quot;;\r\n    \tprivate final static String PROP1 = &quot;my.property.1&quot;;\r\n    \tprivate final static String PROP2 = &quot;my.property.2&quot;;\r\n    \tprivate final static String PROP3 = &quot;my.property.3&quot;;\r\n    \r\n    \t// For validating against some properties\r\n    \tprivate List&lt;String&gt; colors = new ArrayList&lt;&gt;();\r\n    \r\n    \t// For extracting a subset of properties\r\n    \tprivate String prop1;\r\n    \tprivate String prop2;\r\n    \tprivate String prop3;\r\n    \r\n    \t// The whole set of properties published as Dictionary (could be transformed in Map as well)\r\n    \tprivate Dictionary props;\r\n    \t\r\n    \t@Override // Implements MyConfig.isValidColor(String color)\r\n    \tpublic Boolean isValidColor(String color) {\r\n    \t\tif (colors.contains(color)) {\r\n    \t\t\treturn true;\r\n    \t\t} else {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getPropertyOne()\r\n    \tpublic String getPropertyOne(){\r\n    \t\treturn prop1;\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getPropertyTwo()\r\n    \tpublic String getPropertyTwo(){\r\n    \t\treturn prop2;\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getPropertyThree()\r\n    \tpublic String getPropertyThree(){\r\n    \t\treturn prop3;\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getProperties()\r\n    \tpublic Dictionary getProperties(){\r\n    \t\treturn props;\r\n    \t}\r\n    \r\n    \r\n    \t// This implements the ManagedService.updated()\r\n    \t@Override \r\n    \tpublic void updated(@SuppressWarnings(&quot;rawtypes&quot;) Dictionary properties) throws ConfigurationException {\r\n    \t\t\r\n    \t\tlog.debug(&quot;Reading properties: {}&quot;, properties);\r\n    \t\tif (properties == null) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tupdateConfiguration(properties);\r\n    \r\n    \t}\r\n    \r\n    \tprivate void updateConfiguration(Dictionary properties) {\r\n    \r\n    \t\t// MyUtil.asListOfString is just a helper to convert comma separated string to list of String\r\n    \t\t// This is just an example\r\n    \t\tthis.colors = MyUtil.asListOfStrings((String) properties.get(COLORS));\r\n    \r\n    \t\tthis.prop1 = properties.get(PROP1);\r\n    \t\tthis.prop2 = properties.get(PROP2);\r\n    \t\tthis.prop3 = properties.get(PROP3);\r\n    \t\tthis.props = properties;\r\n    \t}\r\n    }","title":"Populate java.util.Properties from camel property placeholder","body":"<p>I would discourage the use of static access to the Property file in a OSGI environment.</p>\n<p>For me the best way is to create an OSGI service which expose validation method or the properties themselves (with getter/setter) like this:</p>\n<pre><code>&lt;service ref=&quot;myConfig&quot;&gt;\n    &lt;interfaces&gt;\n        &lt;value&gt;org.osgi.service.cm.ManagedService&lt;/value&gt;\n        &lt;value&gt;com.mycompany.services.common.api.MyConfig&lt;/value&gt;\n    &lt;/interfaces&gt;\n    &lt;service-properties&gt;\n        &lt;entry key=&quot;service.pid&quot; value=&quot;config.properties&quot; /&gt;\n    &lt;/service-properties&gt;\n&lt;/service&gt;\n\n&lt;bean id=&quot;myConfig&quot; class=&quot;com.mycompany.services.common.config.MyConfigImpl&quot; /&gt;\n</code></pre>\n<p>After in any OSGI bundle which needs to access the property, it can referenced by:</p>\n<pre><code>&lt;reference id=&quot;myConfig&quot; interface=&quot;com.mycompany.services.common.api.MyConfig&quot;\n    activation=&quot;eager&quot; availability=&quot;mandatory&quot; /&gt;\n</code></pre>\n<p>Before using this way we had a lot of deadlocks between bundles because the usage of static method and LOCK's.\nSince we use the OSGI service, it work very well without problem when refreshing / deploying the bundles.</p>\n<p>I assume you want to access your property file through any other OSGI bundle, not external code from the OSGI context.\nIf you want to access the property file outside the OSGI context, I suggest to create a (REST) Web-service over the mentioned interface (<code>&lt;reference&gt;</code>).</p>\n<p>Implementation example:</p>\n<pre><code>public class MyConfigImpl implements MyConfig, ManagedService {\n\n    // This is just the property keys \n    private final static String COLORS = &quot;my.valid.colors&quot;;\n    private final static String PROP1 = &quot;my.property.1&quot;;\n    private final static String PROP2 = &quot;my.property.2&quot;;\n    private final static String PROP3 = &quot;my.property.3&quot;;\n\n    // For validating against some properties\n    private List&lt;String&gt; colors = new ArrayList&lt;&gt;();\n\n    // For extracting a subset of properties\n    private String prop1;\n    private String prop2;\n    private String prop3;\n\n    // The whole set of properties published as Dictionary (could be transformed in Map as well)\n    private Dictionary props;\n    \n    @Override // Implements MyConfig.isValidColor(String color)\n    public Boolean isValidColor(String color) {\n        if (colors.contains(color)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    @Override // Implements MyConfig.getPropertyOne()\n    public String getPropertyOne(){\n        return prop1;\n    }\n\n    @Override // Implements MyConfig.getPropertyTwo()\n    public String getPropertyTwo(){\n        return prop2;\n    }\n\n    @Override // Implements MyConfig.getPropertyThree()\n    public String getPropertyThree(){\n        return prop3;\n    }\n\n    @Override // Implements MyConfig.getProperties()\n    public Dictionary getProperties(){\n        return props;\n    }\n\n\n    // This implements the ManagedService.updated()\n    @Override \n    public void updated(@SuppressWarnings(&quot;rawtypes&quot;) Dictionary properties) throws ConfigurationException {\n        \n        log.debug(&quot;Reading properties: {}&quot;, properties);\n        if (properties == null) {\n            return;\n        }\n\n        updateConfiguration(properties);\n\n    }\n\n    private void updateConfiguration(Dictionary properties) {\n\n        // MyUtil.asListOfString is just a helper to convert comma separated string to list of String\n        // This is just an example\n        this.colors = MyUtil.asListOfStrings((String) properties.get(COLORS));\n\n        this.prop1 = properties.get(PROP1);\n        this.prop2 = properties.get(PROP2);\n        this.prop3 = properties.get(PROP3);\n        this.props = properties;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1018719,"reputation":1232,"user_id":1029684,"accept_rate":52,"display_name":"ishan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1861,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":29770085,"answer_count":1,"score":2,"last_activity_date":1637101626,"creation_date":1429609841,"question_id":29768685,"body_markdown":"I have just started learning OSGi and camel and I am working on some services that are already implemented. I have a bundle that is configured to run on Servicemix with the help of OSGi blueprint somewhat like this:\r\n\r\n    &lt;blueprint xmlns=&quot;http://www.osgi.org/xmlns/blueprint/v1.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:camel-cxf=&quot;http://camel.apache.org/schema/blueprint/cxf&quot;\r\n\txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; xmlns:cxf=&quot;http://cxf.apache.org/blueprint/core&quot;\r\n\txsi:schemaLocation=&quot;\r\n\t\thttp://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n\t\thttp://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\r\n\t\thttp://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\r\n\t\thttp://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd&quot;&gt;\r\n\r\n\t&lt;camelContext id=&quot;ctx1&quot;\r\n\t\txmlns=&quot;http://camel.apache.org/schema/blueprint&quot;\r\n\t\txsi:schemaLocation=&quot;http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd&quot;&gt;\r\n\t\t&lt;propertyPlaceholder location=&quot;properties/config.properties&quot;/&gt;\r\n\t\t&lt;routeBuilder ref=&quot;...&quot; /&gt;\r\n\t&lt;/camelContext&gt;\r\n\r\n&lt;/blueprint&gt;\t\r\n\r\nCurrently, the `config.properties` is located inside the bundle but I am trying to externalize it. \r\n\r\nSo, I changed my blueprint to:\r\n\r\n    &lt;blueprint xmlns=&quot;http://www.osgi.org/xmlns/blueprint/v1.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:camel-cxf=&quot;http://camel.apache.org/schema/blueprint/cxf&quot;\r\n\txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; xmlns:cxf=&quot;http://cxf.apache.org/blueprint/core&quot;\r\n\txsi:schemaLocation=&quot;\r\n\t\thttp://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n\t\thttp://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\r\n\t\thttp://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\r\n\t\thttp://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd&quot;&gt;\r\n\r\n\t&lt;camelContext id=&quot;ctx1&quot;\r\n\t\txmlns=&quot;http://camel.apache.org/schema/blueprint&quot;\r\n\t\txsi:schemaLocation=&quot;http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd&quot;&gt;\r\n\t\t&lt;propertyPlaceholder location=&quot;${karaf.home}/etc/config.properties&quot;/&gt;\r\n\t\t&lt;routeBuilder ref=&quot;...&quot; /&gt;\r\n\t&lt;/camelContext&gt;\r\n\r\n&lt;/blueprint&gt;\t\r\n\r\n... and this configuration works perfectly fine. \r\n\r\nThe problem I am facing is that this property file is also used in multiple locations via java.util.properties loaded as a simple file within a static code block in a util file.\r\n\r\nCan I use the properties loaded inside camel context in my Java code (other than camel code)? \r\n\r\nIf that is not possible, then how should I load the property files located in servicemix classpath to be used in both camel context and java code, **with minimal code changes** in my current implementation.","title":"Populate java.util.Properties from camel property placeholder","body":"<p>I have just started learning OSGi and camel and I am working on some services that are already implemented. I have a bundle that is configured to run on Servicemix with the help of OSGi blueprint somewhat like this:</p>\n\n<pre><code>&lt;blueprint xmlns=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:camel-cxf=\"http://camel.apache.org/schema/blueprint/cxf\"\nxmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" xmlns:cxf=\"http://cxf.apache.org/blueprint/core\"\nxsi:schemaLocation=\"\n    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n    http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\n    http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\n    http://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd\"&gt;\n\n&lt;camelContext id=\"ctx1\"\n    xmlns=\"http://camel.apache.org/schema/blueprint\"\n    xsi:schemaLocation=\"http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd\"&gt;\n    &lt;propertyPlaceholder location=\"properties/config.properties\"/&gt;\n    &lt;routeBuilder ref=\"...\" /&gt;\n&lt;/camelContext&gt;\n</code></pre>\n\n<p>    </p>\n\n<p>Currently, the <code>config.properties</code> is located inside the bundle but I am trying to externalize it. </p>\n\n<p>So, I changed my blueprint to:</p>\n\n<pre><code>&lt;blueprint xmlns=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:camel-cxf=\"http://camel.apache.org/schema/blueprint/cxf\"\nxmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" xmlns:cxf=\"http://cxf.apache.org/blueprint/core\"\nxsi:schemaLocation=\"\n    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n    http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\n    http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\n    http://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd\"&gt;\n\n&lt;camelContext id=\"ctx1\"\n    xmlns=\"http://camel.apache.org/schema/blueprint\"\n    xsi:schemaLocation=\"http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd\"&gt;\n    &lt;propertyPlaceholder location=\"${karaf.home}/etc/config.properties\"/&gt;\n    &lt;routeBuilder ref=\"...\" /&gt;\n&lt;/camelContext&gt;\n</code></pre>\n\n<p>    </p>\n\n<p>... and this configuration works perfectly fine. </p>\n\n<p>The problem I am facing is that this property file is also used in multiple locations via java.util.properties loaded as a simple file within a static code block in a util file.</p>\n\n<p>Can I use the properties loaded inside camel context in my Java code (other than camel code)? </p>\n\n<p>If that is not possible, then how should I load the property files located in servicemix classpath to be used in both camel context and java code, <strong>with minimal code changes</strong> in my current implementation.</p>\n"},{"tags":["java","java.util.scanner","nosuchelementexception","system.in"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1637100902,"post_id":69996612,"comment_id":123735111,"body_markdown":"This famous issue occurs when closing a `Scanner` instance created on `System.in` also closes `System.in` so the user input cannot be read afterwards.","body":"This famous issue occurs when closing a <code>Scanner</code> instance created on <code>System.in</code> also closes <code>System.in</code> so the user input cannot be read afterwards."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637101087,"creation_date":1637101087,"answer_id":69996697,"question_id":69996612,"body_markdown":"Either you closed System.in, or, the next token isn&#39;t parsable as a double. It could be either issue; they&#39;d both result in a `NoSuchElementException`.\r\n\r\n## You closed `System.in`\r\n\r\nPerhaps you closed it before ever calling this code (which doesn&#39;t close `System.in`, fortunately), which is easier than you might think. This will do it:\r\n\r\n```\r\ntry (Scanner s = new Scanner(System.in)) {\r\n // stuff here\r\n}\r\n```\r\n\r\nAfter that try block is done, System.in is now closed (solution: Don&#39;t close `System.in`; don&#39;t close anything that you wrapped around `System.in` either).\r\n\r\n## There&#39;s no double there\r\n\r\nIt could also simply be that the next token available __is not a double__, then you also get this exact same behaviour. To &#39;detect&#39; that, call `.next()` instead, see if you do get something (and, what that is, for example by printing it). Could be that you&#39;re entering `5,20` and the system was expecting you to use dots for decimal separators (e.g. `5.20`) instead, thus concluding the next token isn&#39;t a double, and throwing that same exception.\r\n","title":"How can I prevent java.util.Scanner from throwing NoSuchElementException when reading from System.in?","body":"<p>Either you closed System.in, or, the next token isn't parsable as a double. It could be either issue; they'd both result in a <code>NoSuchElementException</code>.</p>\n<h2>You closed <code>System.in</code></h2>\n<p>Perhaps you closed it before ever calling this code (which doesn't close <code>System.in</code>, fortunately), which is easier than you might think. This will do it:</p>\n<pre><code>try (Scanner s = new Scanner(System.in)) {\n // stuff here\n}\n</code></pre>\n<p>After that try block is done, System.in is now closed (solution: Don't close <code>System.in</code>; don't close anything that you wrapped around <code>System.in</code> either).</p>\n<h2>There's no double there</h2>\n<p>It could also simply be that the next token available <strong>is not a double</strong>, then you also get this exact same behaviour. To 'detect' that, call <code>.next()</code> instead, see if you do get something (and, what that is, for example by printing it). Could be that you're entering <code>5,20</code> and the system was expecting you to use dots for decimal separators (e.g. <code>5.20</code>) instead, thus concluding the next token isn't a double, and throwing that same exception.</p>\n"}],"owner":{"account_id":15157756,"reputation":11,"user_id":17432485,"display_name":"Irish Jet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1637102065,"answer_count":1,"score":1,"last_activity_date":1637101087,"creation_date":1637100500,"question_id":69996612,"body_markdown":"I&#39;m attempting to ask the user for a double value, using Scanner.nextDouble(); but I&#39;m getting a NoSuchElementException before I have a chance to type anything.  From what I can see in the documentation, this means that Scanner is at the end of the input.  However, I don&#39;t understand how that can happen when the Scanner is reading from System.in, not a file.\r\n\r\nIs it possible that having other Scanners open is causing this?  I don&#39;t think that *should* be the case, as another method is successfully run before this code that opens and closes another Scanner.  But I don&#39;t really know enough about the ins and outs of Scanner (or much else!) to know if that is the issue.\r\n\r\nHere&#39;s where I&#39;m at currently, after a lot of failed attempts to re-write this code to get it working:\r\n\r\n    public static double collectDepositAmount(int accountNum){\r\n        System.out.print(&quot;Enter how much you would like to deposit in Account #&quot; + accountNum + &quot;: $&quot;);\r\n        Scanner userInput = new Scanner(System.in);\r\n        double finalDeposit;\r\n        try{\r\n            double inputDeposit;\r\n            inputDeposit = userInput.nextDouble();\r\n\r\nThere&#39;s more after that, but the exception always gets thrown at `userInput.nextDouble();`.  The `catch` block is only looking for InputMismatchException, and I close `userInput` right before I return a valid double.","title":"How can I prevent java.util.Scanner from throwing NoSuchElementException when reading from System.in?","body":"<p>I'm attempting to ask the user for a double value, using Scanner.nextDouble(); but I'm getting a NoSuchElementException before I have a chance to type anything.  From what I can see in the documentation, this means that Scanner is at the end of the input.  However, I don't understand how that can happen when the Scanner is reading from System.in, not a file.</p>\n<p>Is it possible that having other Scanners open is causing this?  I don't think that <em>should</em> be the case, as another method is successfully run before this code that opens and closes another Scanner.  But I don't really know enough about the ins and outs of Scanner (or much else!) to know if that is the issue.</p>\n<p>Here's where I'm at currently, after a lot of failed attempts to re-write this code to get it working:</p>\n<pre><code>public static double collectDepositAmount(int accountNum){\n    System.out.print(&quot;Enter how much you would like to deposit in Account #&quot; + accountNum + &quot;: $&quot;);\n    Scanner userInput = new Scanner(System.in);\n    double finalDeposit;\n    try{\n        double inputDeposit;\n        inputDeposit = userInput.nextDouble();\n</code></pre>\n<p>There's more after that, but the exception always gets thrown at <code>userInput.nextDouble();</code>.  The <code>catch</code> block is only looking for InputMismatchException, and I close <code>userInput</code> right before I return a valid double.</p>\n"},{"tags":["java","windows","apache-kafka"],"comments":[{"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"score":1,"creation_date":1510338770,"post_id":47222957,"comment_id":81408603,"body_markdown":"Can you provide the full error message ?\nWhile it seems you get the error message when starting zookeeper, please note that Windows is not a supported platform with Kafka 1.0.0. See http://kafka.apache.org/documentation/#os","body":"Can you provide the full error message ? While it seems you get the error message when starting zookeeper, please note that Windows is not a supported platform with Kafka 1.0.0. See <a href=\"http://kafka.apache.org/documentation/#os\" rel=\"nofollow noreferrer\">kafka.apache.org/documentation/#os</a>"},{"owner":{"account_id":9848824,"reputation":86,"user_id":7295498,"display_name":"rackdevelop247"},"score":0,"creation_date":1510375663,"post_id":47222957,"comment_id":81419439,"body_markdown":"How do i get full error message in cmd. while giving this cmd zookeeper-server-start.bat ....\\config\\zookeeper.properties it is only showing The system can not find the path specified.","body":"How do i get full error message in cmd. while giving this cmd zookeeper-server-start.bat ....\\config\\zookeeper.properties it is only showing The system can not find the path specified."}],"answers":[{"tags":[],"owner":{"account_id":9848824,"reputation":86,"user_id":7295498,"display_name":"rackdevelop247"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1510390515,"creation_date":1510390515,"answer_id":47236116,"question_id":47222957,"body_markdown":"I solved the problem and now it is working fine. I mentioned JAVA_HOME path as C:\\Program Files\\Java\\jre1.8.0_121\\bin. \r\nIt should be C:\\Program Files\\Java\\jre1.8.0_121. Then there is no error. zookeeper started. kafka started. Thanks to those who tried.  ","title":"Kafka setup in windows 10","body":"<p>I solved the problem and now it is working fine. I mentioned JAVA_HOME path as C:\\Program Files\\Java\\jre1.8.0_121\\bin. \nIt should be C:\\Program Files\\Java\\jre1.8.0_121. Then there is no error. zookeeper started. kafka started. Thanks to those who tried.  </p>\n"},{"tags":[],"owner":{"account_id":21157393,"reputation":11,"user_id":15556374,"display_name":"bhaskar raju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637100981,"creation_date":1637100981,"answer_id":69996673,"question_id":47222957,"body_markdown":"I have followed the following way to install Kafka in Windows.\r\n\r\nStep 1: Download kafka from this link http://mirrors.sonic.net/apache/kafka/2.6.0/kafka_2.13-2.6.0.tgz\r\n\r\nStep 2: Create a folder named kafka in C drive.\r\n\r\nStep 3: Extract the downloaded tgz file in C:\\kafka\r\n\r\nStep 4: Create two folders zookeeper_data and kafka_logs in kafka directory\r\n\r\nStep 5: Goto server.properties present in C:\\kafka\\config.\r\n              \r\nChange log.dirs=/tmp/kafka-logs to log.dirs=C:\\kafka\\kafka_logs\r\n\r\nStep 6: Goto zookeeper.properties present in C:\\kafka\\config.\r\n\r\nChange dataDir=/tmp/zookeeper to dataDir=C:\\kafka\\zookeeper_data\r\n\r\nStep 7: Set C:\\kafka\\bin in environment variable. \r\n\r\n\r\nStep 8:\r\n\r\nKafka needs zookeeper.\r\n\r\nStarting zookeeper.\r\n\r\nOpen cmd and type C:\\kafka\\bin\\zookeeper-server-start.bat C:\\kafka\\config\\zookeeper.properties\r\n\r\n\r\nStep 9:\r\n\r\nStart Kafka.\r\n\r\nOpen another cmd and type C:\\kafka\\bin\\kafka-server-start.bat C:\\kafka\\config\\server.properties\r\n\r\n\r\nP.S. Though the above steps help us in installing Kafka in Windows, there is an inherent defect in using Kafka with Windows. There is an error in the current Kafka for windows, which stops the Kafka server every time the log files are purged of the data.\r\n","title":"Kafka setup in windows 10","body":"<p>I have followed the following way to install Kafka in Windows.</p>\n<p>Step 1: Download kafka from this link <a href=\"http://mirrors.sonic.net/apache/kafka/2.6.0/kafka_2.13-2.6.0.tgz\" rel=\"nofollow noreferrer\">http://mirrors.sonic.net/apache/kafka/2.6.0/kafka_2.13-2.6.0.tgz</a></p>\n<p>Step 2: Create a folder named kafka in C drive.</p>\n<p>Step 3: Extract the downloaded tgz file in C:\\kafka</p>\n<p>Step 4: Create two folders zookeeper_data and kafka_logs in kafka directory</p>\n<p>Step 5: Goto server.properties present in C:\\kafka\\config.</p>\n<p>Change log.dirs=/tmp/kafka-logs to log.dirs=C:\\kafka\\kafka_logs</p>\n<p>Step 6: Goto zookeeper.properties present in C:\\kafka\\config.</p>\n<p>Change dataDir=/tmp/zookeeper to dataDir=C:\\kafka\\zookeeper_data</p>\n<p>Step 7: Set C:\\kafka\\bin in environment variable.</p>\n<p>Step 8:</p>\n<p>Kafka needs zookeeper.</p>\n<p>Starting zookeeper.</p>\n<p>Open cmd and type C:\\kafka\\bin\\zookeeper-server-start.bat C:\\kafka\\config\\zookeeper.properties</p>\n<p>Step 9:</p>\n<p>Start Kafka.</p>\n<p>Open another cmd and type C:\\kafka\\bin\\kafka-server-start.bat C:\\kafka\\config\\server.properties</p>\n<p>P.S. Though the above steps help us in installing Kafka in Windows, there is an inherent defect in using Kafka with Windows. There is an error in the current Kafka for windows, which stops the Kafka server every time the log files are purged of the data.</p>\n"}],"owner":{"account_id":9848824,"reputation":86,"user_id":7295498,"display_name":"rackdevelop247"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47236116,"answer_count":2,"score":0,"last_activity_date":1637100981,"creation_date":1510317452,"question_id":47222957,"body_markdown":"I am using windows 10 and I already have java installed in my machine \r\nThe JAVA_HOME user variable is set to C:\\Program Files\\Java\\jre1.8.0_121\\bin path and same path for environment variable.  \r\nI want to use Kafka in my machine for a project. \r\nI download kafka from the link &lt;a href=&quot;http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz&quot;&gt;http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz&lt;/a&gt;\r\n\r\nI extracted it to my C drive in a folder named as Kafka. I made the changes in zookeeper.properties file for dataDir as C:/Kafka/kafka_2.11-1.0.0/zookeeper-data and I also made changes in server.properties for log.dirs as C:/Kafka/kafka_2.11-1.0.0/kafka-logs.\r\n\r\nI opened cmd in C:\\Kafka\\kafka_2.11-1.0.0\\bin\\windows path and gave the following command in order to run the zookeeper server zookeeper-server-start.bat ..\\..\\config\\zookeeper.properties   \r\nThe cmd is giving me error message as The system can not find the path specified. This is all I am getting. Kindly guide me to fix it and help me to run kafka. Thanks ","title":"Kafka setup in windows 10","body":"<p>I am using windows 10 and I already have java installed in my machine \nThe JAVA_HOME user variable is set to C:\\Program Files\\Java\\jre1.8.0_121\\bin path and same path for environment variable.<br>\nI want to use Kafka in my machine for a project. \nI download kafka from the link <a href=\"http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz\" rel=\"nofollow noreferrer\"><a href=\"http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz\" rel=\"nofollow noreferrer\">http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz</a></a></p>\n\n<p>I extracted it to my C drive in a folder named as Kafka. I made the changes in zookeeper.properties file for dataDir as C:/Kafka/kafka_2.11-1.0.0/zookeeper-data and I also made changes in server.properties for log.dirs as C:/Kafka/kafka_2.11-1.0.0/kafka-logs.</p>\n\n<p>I opened cmd in C:\\Kafka\\kafka_2.11-1.0.0\\bin\\windows path and gave the following command in order to run the zookeeper server zookeeper-server-start.bat ....\\config\\zookeeper.properties<br>\nThe cmd is giving me error message as The system can not find the path specified. This is all I am getting. Kindly guide me to fix it and help me to run kafka. Thanks </p>\n"},{"tags":["java","swing","jtextpane","println","styleddocument"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":1,"creation_date":1637100441,"post_id":69996556,"comment_id":123734983,"body_markdown":"The console is using a monospaced font.  It looks like your text pane is not.","body":"The console is using a monospaced font.  It looks like your text pane is not."},{"owner":{"account_id":23290244,"reputation":29,"user_id":17372437,"display_name":"carlb710"},"score":0,"creation_date":1637100573,"post_id":69996556,"comment_id":123735025,"body_markdown":"Good eye! so would specifying a monospaced font for the styled doc that the TextPane references be the best way to go about fixing that? Something like the answer in this post? https://stackoverflow.com/questions/16279781/getting-jtextarea-to-display-fixed-width-font-without-antialiasing","body":"Good eye! so would specifying a monospaced font for the styled doc that the TextPane references be the best way to go about fixing that? Something like the answer in this post? <a href=\"https://stackoverflow.com/questions/16279781/getting-jtextarea-to-display-fixed-width-font-without-antialiasing\" title=\"getting jtextarea to display fixed width font without antialiasing\">stackoverflow.com/questions/16279781/&hellip;</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":6,"creation_date":1637101221,"post_id":69996556,"comment_id":123735200,"body_markdown":"Don&#39;t use formatted text **for tabular data, *use a `JTable`*.**","body":"Don&#39;t use formatted text <b>for tabular data, <i>use a <code>JTable</code></i>.</b>"}],"owner":{"account_id":23290244,"reputation":29,"user_id":17372437,"display_name":"carlb710"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637100947,"creation_date":1637100113,"question_id":69996556,"body_markdown":"I want to print out what essentially looks like a table to a JTextPane, something like this: \r\n\r\n![table print out][1]\r\n\r\nWhat my output looks like currently is this:\r\n\r\n![my current output][2]\r\n\r\nAs you can see the columns do not line up really at all. In the console however it is perfect, and looks like this:\r\n\r\n![console print out][3] \r\n\r\n(a little cut off but you get the point, it&#39;s aligned!)\r\n\r\n\r\n\r\nI&#39;m borrowing some code from https://github.com/htorun/dbtableprinter in order to do this. The code is built around printing to console, however, so I am converting a few bits to work with my code, namely the print method, since I do not want the output in the console. I am calling 2 methods from my GUI class in lieu of print and println:\r\n\r\n```java\r\n\r\n//to replace print\r\n\r\n\r\npublic void printTableText(String toPrint){\r\n    try {\r\n        doc.insertString(doc.getLength(), toPrint, null);\r\n    } catch (BadLocationException ex) {\r\n        ex.printStackTrace();\r\n    }\r\n}\r\n\r\n```\r\n------------------\r\n\r\n```java\r\n\r\n//to replace println\r\n\r\npublic void printText(String toPrint){\r\n    try {\r\n        toPrint = &quot;\\n&quot; +  toPrint;\r\n        doc.insertString(doc.getLength(), toPrint, null);\r\n    } catch (BadLocationException ex) {\r\n        ex.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nEssentially their code parses through the metadata in a JDBC table to get the number of rows, columns, and their respective data types for a given query, and sets column width, padding, etc to format what is essentially a printed table view in the console. It does so with the following code: (note print related code using methods above is mine, all else is not)\r\n\r\n```java\r\n\r\n public void printResultSet(ResultSet rs, int maxStringColWidth) {\r\n        try {\r\n            if (rs == null) {\r\n                System.err.println(&quot;DBTablePrinter Error: Result set is null!&quot;);\r\n                return;\r\n            }\r\n            if (rs.isClosed()) {\r\n                System.err.println(&quot;DBTablePrinter Error: Result Set is closed!&quot;);\r\n                return;\r\n            }\r\n            if (maxStringColWidth &lt; 1) {\r\n                System.err.println(&quot;DBTablePrinter Info: Invalid max. varchar column width. Using default!&quot;);\r\n                maxStringColWidth = DEFAULT_MAX_TEXT_COL_WIDTH;\r\n            }\r\n\r\n            // Get the meta data object of this ResultSet.\r\n            ResultSetMetaData rsmd;\r\n            rsmd = rs.getMetaData();\r\n\r\n            // Total number of columns in this ResultSet\r\n            int columnCount = rsmd.getColumnCount();\r\n\r\n            // List of Column objects to store each columns of the ResultSet\r\n            // and the String representation of their values.\r\n            List&lt;Column&gt; columns = new ArrayList&lt;&gt;(columnCount);\r\n\r\n            // List of table names. Can be more than one if it is a joined\r\n            // table query\r\n            List&lt;String&gt; tableNames = new ArrayList&lt;&gt;(columnCount);\r\n\r\n            // Get the columns and their meta data.\r\n            // NOTE: columnIndex for rsmd.getXXX methods STARTS AT 1 NOT 0\r\n            for (int i = 1; i &lt;= columnCount; i++) {\r\n                Column c = new Column(rsmd.getColumnLabel(i),\r\n                        rsmd.getColumnType(i), rsmd.getColumnTypeName(i));\r\n                c.setWidth(c.getLabel().length());\r\n                c.setTypeCategory(whichCategory(c.getType()));\r\n                columns.add(c);\r\n\r\n                if (!tableNames.contains(rsmd.getTableName(i))) {\r\n                    tableNames.add(rsmd.getTableName(i));\r\n                }\r\n            }\r\n\r\n            // Go through each row, get values of each column and adjust\r\n            // column widths.\r\n            int rowCount = 0;\r\n            while (rs.next()) {\r\n\r\n                // NOTE: columnIndex for rs.getXXX methods STARTS AT 1 NOT 0\r\n                for (int i = 0; i &lt; columnCount; i++) {\r\n                    Column c = columns.get(i);\r\n                    String value;\r\n                    int category = c.getTypeCategory();\r\n\r\n                    if (category == CATEGORY_OTHER) {\r\n\r\n                        // Use generic SQL type name instead of the actual value\r\n                        // for column types BLOB, BINARY etc.\r\n                        value = &quot;(&quot; + c.getTypeName() + &quot;)&quot;;\r\n\r\n                    } else {\r\n                        value = rs.getString(i+1) == null ? &quot;NULL&quot; : rs.getString(i+1);\r\n                    }\r\n                    switch (category) {\r\n                        case CATEGORY_DOUBLE:\r\n\r\n                            // For real numbers, format the string value to have 3 digits\r\n                            // after the point. THIS IS TOTALLY ARBITRARY and can be\r\n                            // improved to be CONFIGURABLE.\r\n                            if (!value.equals(&quot;NULL&quot;)) {\r\n                                Double dValue = rs.getDouble(i+1);\r\n                                value = String.format(&quot;%.3f&quot;, dValue);\r\n                            }\r\n                            break;\r\n\r\n                        case CATEGORY_STRING:\r\n\r\n                            // Left justify the text columns\r\n                            c.justifyLeft();\r\n\r\n                            // and apply the width limit\r\n                            if (value.length() &gt; maxStringColWidth) {\r\n                                value = value.substring(0, maxStringColWidth - 3) + &quot;...&quot;;\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                    // Adjust the column width\r\n                    c.setWidth(value.length() &gt; c.getWidth() ? value.length() : c.getWidth());\r\n                    c.addValue(value);\r\n                } // END of for loop columnCount\r\n                rowCount++;\r\n\r\n            } // END of while (rs.next)\r\n\r\n            /*\r\n            At this point we have gone through meta data, get the\r\n            columns and created all Column objects, iterated over the\r\n            ResultSet rows, populated the column values and adjusted\r\n            the column widths.\r\n\r\n            We cannot start printing just yet because we have to prepare\r\n            a row separator String.\r\n             */\r\n\r\n            // For the fun of it, I will use StringBuilder\r\n            StringBuilder strToPrint = new StringBuilder();\r\n            StringBuilder rowSeparator = new StringBuilder();\r\n\r\n            /*\r\n            Prepare column labels to print as well as the row separator.\r\n            It should look something like this:\r\n            +--------+------------+------------+-----------+  (row separator)\r\n            | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME |  (labels row)\r\n            +--------+------------+------------+-----------+  (row separator)\r\n             */\r\n\r\n            // Iterate over columns\r\n            for (Column c : columns) {\r\n                int width = c.getWidth();\r\n\r\n              // Center the column label\r\n                String toPrint;\r\n                String name = c.getLabel();\r\n                int diff = width - name.length();\r\n\r\n                if ((diff%2) == 1) {\r\n                    // diff is not divisible by 2, add 1 to width (and diff)\r\n                    // so that we can have equal padding to the left and right\r\n                    // of the column label.\r\n                    width++;\r\n                    diff++;\r\n                    c.setWidth(width);\r\n                }\r\n\r\n                int paddingSize = diff/2; // InteliJ says casting to int is redundant.\r\n\r\n                // Cool String repeater code thanks to user102008 at stackoverflow.com\r\n             \r\n                String padding = new String(new char[paddingSize]).replace(&quot;\\0&quot;, &quot; &quot;);\r\n\r\n                toPrint = &quot;| &quot; + padding + name + padding + &quot; &quot;;\r\n              // END centering the column label\r\n\r\n                strToPrint.append(toPrint);\r\n\r\n                rowSeparator.append(&quot;+&quot;);\r\n                rowSeparator.append(new String(new char[width + 2]).replace(&quot;\\0&quot;, &quot;-&quot;));\r\n            }\r\n\r\n            String lineSeparator = System.getProperty(&quot;line.separator&quot;);\r\n\r\n            // Is this really necessary ??\r\n            lineSeparator = lineSeparator == null ? &quot;\\n&quot; : lineSeparator;\r\n\r\n            rowSeparator.append(&quot;+&quot;).append(lineSeparator);\r\n\r\n            strToPrint.append(&quot;|&quot;).append(lineSeparator);\r\n            strToPrint.insert(0, rowSeparator);\r\n            strToPrint.append(rowSeparator);\r\n\r\n            StringJoiner sj = new StringJoiner(&quot;, &quot;);\r\n            for (String name : tableNames) {\r\n                sj.add(name);\r\n            }\r\n\r\n            String info = &quot;Printing &quot; + rowCount;\r\n            info += rowCount &gt; 1 ? &quot; rows from &quot; : &quot; row from &quot;;\r\n            info += tableNames.size() &gt; 1 ? &quot;tables &quot; : &quot;table &quot;;\r\n            info += sj.toString();\r\n\r\n            window.printTableText(info);\r\n            System.out.println(info);\r\n\r\n            // Print out the formatted column labels\r\n            System.out.print(strToPrint.toString());\r\n            window.printTableText(strToPrint.toString());\r\n\r\n            String format;\r\n\r\n            // Print out the rows\r\n            for (int i = 0; i &lt; rowCount; i++) {\r\n                for (Column c : columns) {\r\n\r\n                    // This should form a format string like: &quot;%-60s&quot;\r\n                    format = String.format(&quot;| %%%s%ds &quot;, c.getJustifyFlag(), c.getWidth());\r\n                    System.out.print(\r\n                            String.format(format, c.getValue(i))\r\n                    );\r\n                    window.printTableText(String.format(format, c.getValue(i)));\r\n                }\r\n\r\n                System.out.println(&quot;|&quot;);\r\n                System.out.print(rowSeparator);\r\n                window.printText(&quot;|&quot;);\r\n                window.printTableText(String.valueOf(rowSeparator));\r\n            }\r\n\r\n            System.out.println();\r\n\r\n            /*\r\n                Hopefully this should have printed something like this:\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n                | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME | GENDER |  HIRE_DATE  |\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n                |  10001 | 1953-09-02 | Georgi     | Facello   | M      |  1986-06-26 |\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n                |  10002 | 1964-06-02 | Bezalel    | Simmel    | F      |  1985-11-21 |\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n             */\r\n\r\n        } catch (SQLException e) {\r\n            System.err.println(&quot;SQL exception in DBTablePrinter. Message:&quot;);\r\n            System.err.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nGiven the fact that the console output is perfect, the conclusion I&#39;ve reached is that there is some issue with either my print methods, or, with how StyledDocuments handle the formatting used in the DBTablePrinter class I&#39;ve borrowed. I&#39;m new to JTextPanes and StyledDocuments, so maybe there&#39;s just something simple going on that I&#39;m not aware of here.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aaHYa.png\r\n  [2]: https://i.stack.imgur.com/2UASZ.png\r\n  [3]: https://i.stack.imgur.com/sQME7.png","title":"Why does the formatting differ from console output and JTextPane?","body":"<p>I want to print out what essentially looks like a table to a JTextPane, something like this:</p>\n<p><img src=\"https://i.stack.imgur.com/aaHYa.png\" alt=\"table print out\" /></p>\n<p>What my output looks like currently is this:</p>\n<p><img src=\"https://i.stack.imgur.com/2UASZ.png\" alt=\"my current output\" /></p>\n<p>As you can see the columns do not line up really at all. In the console however it is perfect, and looks like this:</p>\n<p><img src=\"https://i.stack.imgur.com/sQME7.png\" alt=\"console print out\" /></p>\n<p>(a little cut off but you get the point, it's aligned!)</p>\n<p>I'm borrowing some code from <a href=\"https://github.com/htorun/dbtableprinter\" rel=\"nofollow noreferrer\">https://github.com/htorun/dbtableprinter</a> in order to do this. The code is built around printing to console, however, so I am converting a few bits to work with my code, namely the print method, since I do not want the output in the console. I am calling 2 methods from my GUI class in lieu of print and println:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n//to replace print\n\n\npublic void printTableText(String toPrint){\n    try {\n        doc.insertString(doc.getLength(), toPrint, null);\n    } catch (BadLocationException ex) {\n        ex.printStackTrace();\n    }\n}\n\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>\n//to replace println\n\npublic void printText(String toPrint){\n    try {\n        toPrint = &quot;\\n&quot; +  toPrint;\n        doc.insertString(doc.getLength(), toPrint, null);\n    } catch (BadLocationException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<p>Essentially their code parses through the metadata in a JDBC table to get the number of rows, columns, and their respective data types for a given query, and sets column width, padding, etc to format what is essentially a printed table view in the console. It does so with the following code: (note print related code using methods above is mine, all else is not)</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n public void printResultSet(ResultSet rs, int maxStringColWidth) {\n        try {\n            if (rs == null) {\n                System.err.println(&quot;DBTablePrinter Error: Result set is null!&quot;);\n                return;\n            }\n            if (rs.isClosed()) {\n                System.err.println(&quot;DBTablePrinter Error: Result Set is closed!&quot;);\n                return;\n            }\n            if (maxStringColWidth &lt; 1) {\n                System.err.println(&quot;DBTablePrinter Info: Invalid max. varchar column width. Using default!&quot;);\n                maxStringColWidth = DEFAULT_MAX_TEXT_COL_WIDTH;\n            }\n\n            // Get the meta data object of this ResultSet.\n            ResultSetMetaData rsmd;\n            rsmd = rs.getMetaData();\n\n            // Total number of columns in this ResultSet\n            int columnCount = rsmd.getColumnCount();\n\n            // List of Column objects to store each columns of the ResultSet\n            // and the String representation of their values.\n            List&lt;Column&gt; columns = new ArrayList&lt;&gt;(columnCount);\n\n            // List of table names. Can be more than one if it is a joined\n            // table query\n            List&lt;String&gt; tableNames = new ArrayList&lt;&gt;(columnCount);\n\n            // Get the columns and their meta data.\n            // NOTE: columnIndex for rsmd.getXXX methods STARTS AT 1 NOT 0\n            for (int i = 1; i &lt;= columnCount; i++) {\n                Column c = new Column(rsmd.getColumnLabel(i),\n                        rsmd.getColumnType(i), rsmd.getColumnTypeName(i));\n                c.setWidth(c.getLabel().length());\n                c.setTypeCategory(whichCategory(c.getType()));\n                columns.add(c);\n\n                if (!tableNames.contains(rsmd.getTableName(i))) {\n                    tableNames.add(rsmd.getTableName(i));\n                }\n            }\n\n            // Go through each row, get values of each column and adjust\n            // column widths.\n            int rowCount = 0;\n            while (rs.next()) {\n\n                // NOTE: columnIndex for rs.getXXX methods STARTS AT 1 NOT 0\n                for (int i = 0; i &lt; columnCount; i++) {\n                    Column c = columns.get(i);\n                    String value;\n                    int category = c.getTypeCategory();\n\n                    if (category == CATEGORY_OTHER) {\n\n                        // Use generic SQL type name instead of the actual value\n                        // for column types BLOB, BINARY etc.\n                        value = &quot;(&quot; + c.getTypeName() + &quot;)&quot;;\n\n                    } else {\n                        value = rs.getString(i+1) == null ? &quot;NULL&quot; : rs.getString(i+1);\n                    }\n                    switch (category) {\n                        case CATEGORY_DOUBLE:\n\n                            // For real numbers, format the string value to have 3 digits\n                            // after the point. THIS IS TOTALLY ARBITRARY and can be\n                            // improved to be CONFIGURABLE.\n                            if (!value.equals(&quot;NULL&quot;)) {\n                                Double dValue = rs.getDouble(i+1);\n                                value = String.format(&quot;%.3f&quot;, dValue);\n                            }\n                            break;\n\n                        case CATEGORY_STRING:\n\n                            // Left justify the text columns\n                            c.justifyLeft();\n\n                            // and apply the width limit\n                            if (value.length() &gt; maxStringColWidth) {\n                                value = value.substring(0, maxStringColWidth - 3) + &quot;...&quot;;\n                            }\n                            break;\n                    }\n\n                    // Adjust the column width\n                    c.setWidth(value.length() &gt; c.getWidth() ? value.length() : c.getWidth());\n                    c.addValue(value);\n                } // END of for loop columnCount\n                rowCount++;\n\n            } // END of while (rs.next)\n\n            /*\n            At this point we have gone through meta data, get the\n            columns and created all Column objects, iterated over the\n            ResultSet rows, populated the column values and adjusted\n            the column widths.\n\n            We cannot start printing just yet because we have to prepare\n            a row separator String.\n             */\n\n            // For the fun of it, I will use StringBuilder\n            StringBuilder strToPrint = new StringBuilder();\n            StringBuilder rowSeparator = new StringBuilder();\n\n            /*\n            Prepare column labels to print as well as the row separator.\n            It should look something like this:\n            +--------+------------+------------+-----------+  (row separator)\n            | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME |  (labels row)\n            +--------+------------+------------+-----------+  (row separator)\n             */\n\n            // Iterate over columns\n            for (Column c : columns) {\n                int width = c.getWidth();\n\n              // Center the column label\n                String toPrint;\n                String name = c.getLabel();\n                int diff = width - name.length();\n\n                if ((diff%2) == 1) {\n                    // diff is not divisible by 2, add 1 to width (and diff)\n                    // so that we can have equal padding to the left and right\n                    // of the column label.\n                    width++;\n                    diff++;\n                    c.setWidth(width);\n                }\n\n                int paddingSize = diff/2; // InteliJ says casting to int is redundant.\n\n                // Cool String repeater code thanks to user102008 at stackoverflow.com\n             \n                String padding = new String(new char[paddingSize]).replace(&quot;\\0&quot;, &quot; &quot;);\n\n                toPrint = &quot;| &quot; + padding + name + padding + &quot; &quot;;\n              // END centering the column label\n\n                strToPrint.append(toPrint);\n\n                rowSeparator.append(&quot;+&quot;);\n                rowSeparator.append(new String(new char[width + 2]).replace(&quot;\\0&quot;, &quot;-&quot;));\n            }\n\n            String lineSeparator = System.getProperty(&quot;line.separator&quot;);\n\n            // Is this really necessary ??\n            lineSeparator = lineSeparator == null ? &quot;\\n&quot; : lineSeparator;\n\n            rowSeparator.append(&quot;+&quot;).append(lineSeparator);\n\n            strToPrint.append(&quot;|&quot;).append(lineSeparator);\n            strToPrint.insert(0, rowSeparator);\n            strToPrint.append(rowSeparator);\n\n            StringJoiner sj = new StringJoiner(&quot;, &quot;);\n            for (String name : tableNames) {\n                sj.add(name);\n            }\n\n            String info = &quot;Printing &quot; + rowCount;\n            info += rowCount &gt; 1 ? &quot; rows from &quot; : &quot; row from &quot;;\n            info += tableNames.size() &gt; 1 ? &quot;tables &quot; : &quot;table &quot;;\n            info += sj.toString();\n\n            window.printTableText(info);\n            System.out.println(info);\n\n            // Print out the formatted column labels\n            System.out.print(strToPrint.toString());\n            window.printTableText(strToPrint.toString());\n\n            String format;\n\n            // Print out the rows\n            for (int i = 0; i &lt; rowCount; i++) {\n                for (Column c : columns) {\n\n                    // This should form a format string like: &quot;%-60s&quot;\n                    format = String.format(&quot;| %%%s%ds &quot;, c.getJustifyFlag(), c.getWidth());\n                    System.out.print(\n                            String.format(format, c.getValue(i))\n                    );\n                    window.printTableText(String.format(format, c.getValue(i)));\n                }\n\n                System.out.println(&quot;|&quot;);\n                System.out.print(rowSeparator);\n                window.printText(&quot;|&quot;);\n                window.printTableText(String.valueOf(rowSeparator));\n            }\n\n            System.out.println();\n\n            /*\n                Hopefully this should have printed something like this:\n                +--------+------------+------------+-----------+--------+-------------+\n                | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME | GENDER |  HIRE_DATE  |\n                +--------+------------+------------+-----------+--------+-------------+\n                |  10001 | 1953-09-02 | Georgi     | Facello   | M      |  1986-06-26 |\n                +--------+------------+------------+-----------+--------+-------------+\n                |  10002 | 1964-06-02 | Bezalel    | Simmel    | F      |  1985-11-21 |\n                +--------+------------+------------+-----------+--------+-------------+\n             */\n\n        } catch (SQLException e) {\n            System.err.println(&quot;SQL exception in DBTablePrinter. Message:&quot;);\n            System.err.println(e.getMessage());\n        }\n    }\n\n</code></pre>\n<p>Given the fact that the console output is perfect, the conclusion I've reached is that there is some issue with either my print methods, or, with how StyledDocuments handle the formatting used in the DBTablePrinter class I've borrowed. I'm new to JTextPanes and StyledDocuments, so maybe there's just something simple going on that I'm not aware of here.</p>\n"},{"tags":["java","maven","intellij-idea","guava"],"comments":[{"owner":{"account_id":18132414,"reputation":934,"user_id":13187363,"display_name":"IntoVoid"},"score":0,"creation_date":1616936943,"post_id":66841726,"comment_id":118153020,"body_markdown":"you could just create a gradle project (in IntelliJ) and add the dependencies using implementation","body":"you could just create a gradle project (in IntelliJ) and add the dependencies using implementation"},{"owner":{"account_id":925583,"reputation":5282,"user_id":956435,"accept_rate":59,"display_name":"Ramon de Klein"},"score":0,"creation_date":1616954524,"post_id":66841726,"comment_id":118158225,"body_markdown":"@IntoVoid I don&#39;t want to use Gradle, because everything else is in Maven. But I just found out it&#39;s only a problem on my Windows box :-(","body":"@IntoVoid I don&#39;t want to use Gradle, because everything else is in Maven. But I just found out it&#39;s only a problem on my Windows box :-("}],"answers":[{"tags":[],"owner":{"account_id":16362850,"reputation":102,"user_id":11818002,"display_name":"arellak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616937056,"creation_date":1616937056,"answer_id":66841788,"question_id":66841726,"body_markdown":"Can you share your whole pom.xml and explain what exactly you mean by &quot;debugging&quot;? The IntelliJ Debugger?\r\nI tried to reproduce your error but it didn&#39;t worked. I can run the program without any errors, in &quot;normal&quot; run mode and in debug mode.\r\nDid you correctly imported the dependency like this?\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;30.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nDid you reload the Maven project so it really downloaded the dependency? [See how to reload][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1n5sF.png","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>Can you share your whole pom.xml and explain what exactly you mean by &quot;debugging&quot;? The IntelliJ Debugger?\nI tried to reproduce your error but it didn't worked. I can run the program without any errors, in &quot;normal&quot; run mode and in debug mode.\nDid you correctly imported the dependency like this?</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;30.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Did you reload the Maven project so it really downloaded the dependency? <a href=\"https://i.stack.imgur.com/1n5sF.png\" rel=\"nofollow noreferrer\">See how to reload</a></p>\n"},{"tags":[],"owner":{"account_id":925583,"reputation":5282,"user_id":956435,"accept_rate":59,"display_name":"Ramon de Klein"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616957531,"creation_date":1616957531,"answer_id":66845030,"question_id":66841726,"body_markdown":"I guess something was wrong with my IntelliJ settings. I did the following steps and then it worked:\r\n1. Remove all Java installations on my system.\r\n1. Remove IntelliJ\r\n1. Remove all JDKs and files in &lt;HOME&gt;/.m2.\r\n1. Remove all .idea folders, .iml files and target folders.\r\n1. Reinstalled IntelliJ\r\n1. Reinstalled Zulu 15 JDK\r\n1. Run File - Manage IDE Settings - Restore default settings\r\n1. Load the project\r\n\r\nThen debugging works. Don&#39;t know why...","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>I guess something was wrong with my IntelliJ settings. I did the following steps and then it worked:</p>\n<ol>\n<li>Remove all Java installations on my system.</li>\n<li>Remove IntelliJ</li>\n<li>Remove all JDKs and files in /.m2.</li>\n<li>Remove all .idea folders, .iml files and target folders.</li>\n<li>Reinstalled IntelliJ</li>\n<li>Reinstalled Zulu 15 JDK</li>\n<li>Run File - Manage IDE Settings - Restore default settings</li>\n<li>Load the project</li>\n</ol>\n<p>Then debugging works. Don't know why...</p>\n"},{"tags":[],"owner":{"account_id":2909887,"reputation":11,"user_id":2494385,"display_name":"LuZcila"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619458804,"creation_date":1619458804,"answer_id":67271347,"question_id":66841726,"body_markdown":"I had the same problem this morning and I fixed it by doing the following steps:\r\n\r\n1) Close Intellij\r\n2) remove folder [HOME]/.m2/repository\r\n3) remove folder [MY_PROJECT]/.idea/libraries\r\n4) Open Intellij\r\n5) mvn dependency:resolve\r\n6) mvn install\r\n\r\nI think doing only 6 (without 5) may work the same\r\n\r\n\r\n\r\n","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>I had the same problem this morning and I fixed it by doing the following steps:</p>\n<ol>\n<li>Close Intellij</li>\n<li>remove folder [HOME]/.m2/repository</li>\n<li>remove folder [MY_PROJECT]/.idea/libraries</li>\n<li>Open Intellij</li>\n<li>mvn dependency:resolve</li>\n<li>mvn install</li>\n</ol>\n<p>I think doing only 6 (without 5) may work the same</p>\n"},{"tags":[],"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637100450,"creation_date":1637100450,"answer_id":69996599,"question_id":66841726,"body_markdown":"Check to see if the dependency (package) that could not be found is annotated as being required only for `runtime`. This is clearly not true if it is refered to in an `import` statement in which case it is also required for `compile`. \r\n\r\nIf this is the case, then\r\n\r\n- For maven : remove `&lt;scope&gt;runtime&lt;/scope&gt;` below the dependency declaration\r\n- For gradle : change `runtime` in front of the dependency declaration to `compile` or `implementation`.\r\n\r\n","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>Check to see if the dependency (package) that could not be found is annotated as being required only for <code>runtime</code>. This is clearly not true if it is refered to in an <code>import</code> statement in which case it is also required for <code>compile</code>.</p>\n<p>If this is the case, then</p>\n<ul>\n<li>For maven : remove <code>&lt;scope&gt;runtime&lt;/scope&gt;</code> below the dependency declaration</li>\n<li>For gradle : change <code>runtime</code> in front of the dependency declaration to <code>compile</code> or <code>implementation</code>.</li>\n</ul>\n"}],"owner":{"account_id":925583,"reputation":5282,"user_id":956435,"accept_rate":59,"display_name":"Ramon de Klein"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5580,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1637100450,"creation_date":1616936610,"question_id":66841726,"body_markdown":"I am pretty new to the whole Java eco-system and I am already spending hours to get an external dependency to work with IntelliJ. I use a simple Java application that contains an `App.java` containing:\r\n```\r\npackage com.example.maven;\r\n\r\nimport com.google.common.collect.ImmutableList;\r\n\r\npublic class App\r\n{\r\n    public static void main( String[] args )\r\n    {\r\n        ImmutableList&lt;String&gt; list = ImmutableList.of(&quot;hello&quot;, &quot;world&quot;);\r\n        for (String item : list) {\r\n            System.out.println( item );\r\n        }\r\n    }\r\n}\r\n```\r\nThe `pom.xml` contains a dependency to com.google.guava (required for `ImmutableList`) that looks like this:\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n  &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n  &lt;version&gt;30.1-jre&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nWhenever I try to debug, I get the error that `com.google.common.collect.ImmutableList` cannot be loaded.  I also tried to clone https://github.com/tfnico/guava-example (updated Java version to a supported version), but no luck.\r\n\r\nIt seems to be an issue with my Windows PC. My Mac doesn&#39;t have any issues, but I have removed everything from my Windows PC (Java JRE, SDKs, IntelliJ and reinstalled it again). I don&#39;t want to develop on my Mac. Why doesn&#39;t this work on Windows???","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>I am pretty new to the whole Java eco-system and I am already spending hours to get an external dependency to work with IntelliJ. I use a simple Java application that contains an <code>App.java</code> containing:</p>\n<pre><code>package com.example.maven;\n\nimport com.google.common.collect.ImmutableList;\n\npublic class App\n{\n    public static void main( String[] args )\n    {\n        ImmutableList&lt;String&gt; list = ImmutableList.of(&quot;hello&quot;, &quot;world&quot;);\n        for (String item : list) {\n            System.out.println( item );\n        }\n    }\n}\n</code></pre>\n<p>The <code>pom.xml</code> contains a dependency to com.google.guava (required for <code>ImmutableList</code>) that looks like this:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n  &lt;artifactId&gt;guava&lt;/artifactId&gt;\n  &lt;version&gt;30.1-jre&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Whenever I try to debug, I get the error that <code>com.google.common.collect.ImmutableList</code> cannot be loaded.  I also tried to clone <a href=\"https://github.com/tfnico/guava-example\" rel=\"nofollow noreferrer\">https://github.com/tfnico/guava-example</a> (updated Java version to a supported version), but no luck.</p>\n<p>It seems to be an issue with my Windows PC. My Mac doesn't have any issues, but I have removed everything from my Windows PC (Java JRE, SDKs, IntelliJ and reinstalled it again). I don't want to develop on my Mac. Why doesn't this work on Windows???</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1637010371,"post_id":69979562,"comment_id":123706180,"body_markdown":"You have already added the table to the scroll pane and the scroll pane to your reference panel when the frame is created. `Don&#39;t create a new JTable`. If you want to change the data just create a new TableModel and use the `setModel(...)` method of the JTable.","body":"You have already added the table to the scroll pane and the scroll pane to your reference panel when the frame is created. <code>Don&#39;t create a new JTable</code>. If you want to change the data just create a new TableModel and use the <code>setModel(...)</code> method of the JTable."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1637019874,"post_id":69979562,"comment_id":123708656,"body_markdown":"*&quot;I have even tried some sample data&quot;* If @camickr&#39;s tips don&#39;t solve this, or for future questions involving code, post a [mre] along with that sample data. It doesn&#39;t need to be much data, if you can figure how to add two rows, adding 100 (thousand) is just as easy. But seriously, look to update the model. If it comes to making an MRE for this question, be sure to trim the two tables to one, and add it to something when the frame is created. A good place to add a table is direct to a `JScrollPane`.","body":"<i>&quot;I have even tried some sample data&quot;</i> If @camickr&#39;s tips don&#39;t solve this, or for future questions involving code, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> along with that sample data. It doesn&#39;t need to be much data, if you can figure how to add two rows, adding 100 (thousand) is just as easy. But seriously, look to update the model. If it comes to making an MRE for this question, be sure to trim the two tables to one, and add it to something when the frame is created. A good place to add a table is direct to a <code>JScrollPane</code>."}],"answers":[{"tags":[],"owner":{"account_id":23298828,"reputation":41,"user_id":17379819,"display_name":"codejunkie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637099885,"creation_date":1637076636,"answer_id":69991922,"question_id":69979562,"body_markdown":"This is based on what cmickr and Andrew Thompson posted.  I modified the following functions to work.\r\n\r\n    \r\n\tpublic void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\r\n\t\tDefaultTableModel model = new DefaultTableModel(vectorize(items), makeHeaderVector());\r\n\t\trefTable.setModel(model);\r\n\t\trefListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\r\n\t}\r\n\r\n    private Vector vectorize(ArrayList&lt;Item&gt; items) {\r\n\t\tVector results = new Vector();\r\n\t\tfor (int i = 0; i &lt; items.size(); i++) {\r\n\t\t\tresults.addElement(items.get(i).vectorize());\r\n\t\t}\r\n\t\treturn results;\r\n\t}\r\n\r\n    private Vector makeHeaderVector() {\r\n \t\tString[] cols = { ... }; // hid application specific string array\r\n\t\tVector&lt;String&gt; results = new Vector&lt;String&gt;(Arrays.asList(cols));\r\n\t\treturn results;\r\n\t}\r\n\r\nThis is my basic understanding of vectors, since I do not use them much.  Also, this may not be the fastest way of approaching the problem, but my first goal is to get it working, then improve it.  The important part was to use a TableModel, in my case DefaultTableModel, and then `setModel()` of the the JTable to the new model, like was referenced.","title":"Unable to show JTable in JPanel from dynamically retrieved data","body":"<p>This is based on what cmickr and Andrew Thompson posted.  I modified the following functions to work.</p>\n<pre><code>public void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\n    DefaultTableModel model = new DefaultTableModel(vectorize(items), makeHeaderVector());\n    refTable.setModel(model);\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\n}\n\nprivate Vector vectorize(ArrayList&lt;Item&gt; items) {\n    Vector results = new Vector();\n    for (int i = 0; i &lt; items.size(); i++) {\n        results.addElement(items.get(i).vectorize());\n    }\n    return results;\n}\n\nprivate Vector makeHeaderVector() {\n    String[] cols = { ... }; // hid application specific string array\n    Vector&lt;String&gt; results = new Vector&lt;String&gt;(Arrays.asList(cols));\n    return results;\n}\n</code></pre>\n<p>This is my basic understanding of vectors, since I do not use them much.  Also, this may not be the fastest way of approaching the problem, but my first goal is to get it working, then improve it.  The important part was to use a TableModel, in my case DefaultTableModel, and then <code>setModel()</code> of the the JTable to the new model, like was referenced.</p>\n"}],"owner":{"account_id":23298828,"reputation":41,"user_id":17379819,"display_name":"codejunkie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69991922,"answer_count":1,"score":1,"last_activity_date":1637099885,"creation_date":1637002994,"question_id":69979562,"body_markdown":"I haven&#39;t been able to show a JTable inside a JPanel from dynamically generated data.  I have even tried adding a layout manager so that I don&#39;t end up with a null layout manager and no table.  Here is the code I&#39;m using.\r\n\r\n    public void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\r\n\t\tString[] columns = {&quot;first&quot;, &quot;last&quot;};\r\n\t\tString[][] data = {{&quot;Adam&quot;, &quot;Smith&quot;}, {&quot;Jon&quot;, &quot;Bon Jovi&quot;},{&quot;John&quot;, &quot;Doe&quot;}};\r\n\t\tJTable sample = new JTable(data, columns);\r\n\t\trefListingPanel.add(sample);\r\n        refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\r\n    }\r\n\r\nand earlier in the same file.\r\n\r\n    private JMenuBar menuBar;\r\n\r\n\tprivate JPanel testListingPanel;\r\n\tprivate JScrollPane testScroller;\r\n\tprivate JPanel refListingPanel;\r\n\tprivate JScrollPane refScroller;\r\n\r\n\tprivate static Dimension listingDefault = new Dimension(350, 230);\r\n\tprivate IDiffPresenter presenter;\r\n\tprivate boolean allItems;\r\n\tprivate boolean unChangedItems;\r\n\tprivate boolean changedItems;\r\n\tprivate JTable refTable;\r\n\tprivate JTable testTable;\r\n\r\n    public MasterFrame (IDiffPresenter presenter) {\r\n\t\tsuper(&quot;Magic Diff - Under Construction&quot;);\r\n\t\tthis.presenter = presenter;\t\r\n\t\tmenuBar = new JMenuBar();\t\t\r\n\t\tsetupFileMenu(presenter);\r\n\t\tsetupExportMenu(presenter);\t\r\n\t\tsetupDisplayChangedMenu();\r\n\t\tsetupAboutMenu();\r\n\t\r\n\t\tsetupReferencePanel();\r\n\r\n\t\tsetupTestPanel();\r\n\t\tgetContentPane().setLayout(new GridLayout(1,2));\r\n\t\tsetJMenuBar(menuBar);\r\n\t\tthis.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tthis.setSize((int)listingDefault.getWidth() + 10, (int)listingDefault.getHeight() + 60); \r\n\t\tDimension DimMax = Toolkit.getDefaultToolkit().getScreenSize();\r\n\t\tthis.setMaximumSize(DimMax);\r\n\r\n\t\tthis.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n        ...\r\n    }\r\n    private void setupReferencePanel() {\r\n\t\trefListingPanel = new JPanel();\r\n\t\trefListingPanel.setLayout(new BorderLayout());\r\n\t\trefListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File&quot;));\r\n\t\trefScroller = new JScrollPane(refListingPanel);\r\n\t\tgetContentPane().add(refScroller);\r\n\t}\r\nWhat am I missing or failing to do?  I have even tried some sample data, what is currently in the code, and I get the same issue.","title":"Unable to show JTable in JPanel from dynamically retrieved data","body":"<p>I haven't been able to show a JTable inside a JPanel from dynamically generated data.  I have even tried adding a layout manager so that I don't end up with a null layout manager and no table.  Here is the code I'm using.</p>\n<pre><code>public void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\n    String[] columns = {&quot;first&quot;, &quot;last&quot;};\n    String[][] data = {{&quot;Adam&quot;, &quot;Smith&quot;}, {&quot;Jon&quot;, &quot;Bon Jovi&quot;},{&quot;John&quot;, &quot;Doe&quot;}};\n    JTable sample = new JTable(data, columns);\n    refListingPanel.add(sample);\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\n}\n</code></pre>\n<p>and earlier in the same file.</p>\n<pre><code>private JMenuBar menuBar;\n\nprivate JPanel testListingPanel;\nprivate JScrollPane testScroller;\nprivate JPanel refListingPanel;\nprivate JScrollPane refScroller;\n\nprivate static Dimension listingDefault = new Dimension(350, 230);\nprivate IDiffPresenter presenter;\nprivate boolean allItems;\nprivate boolean unChangedItems;\nprivate boolean changedItems;\nprivate JTable refTable;\nprivate JTable testTable;\n\npublic MasterFrame (IDiffPresenter presenter) {\n    super(&quot;Magic Diff - Under Construction&quot;);\n    this.presenter = presenter; \n    menuBar = new JMenuBar();       \n    setupFileMenu(presenter);\n    setupExportMenu(presenter); \n    setupDisplayChangedMenu();\n    setupAboutMenu();\n\n    setupReferencePanel();\n\n    setupTestPanel();\n    getContentPane().setLayout(new GridLayout(1,2));\n    setJMenuBar(menuBar);\n    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    this.setSize((int)listingDefault.getWidth() + 10, (int)listingDefault.getHeight() + 60); \n    Dimension DimMax = Toolkit.getDefaultToolkit().getScreenSize();\n    this.setMaximumSize(DimMax);\n\n    this.setExtendedState(JFrame.MAXIMIZED_BOTH);\n    ...\n}\nprivate void setupReferencePanel() {\n    refListingPanel = new JPanel();\n    refListingPanel.setLayout(new BorderLayout());\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File&quot;));\n    refScroller = new JScrollPane(refListingPanel);\n    getContentPane().add(refScroller);\n}\n</code></pre>\n<p>What am I missing or failing to do?  I have even tried some sample data, what is currently in the code, and I get the same issue.</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637099319,"creation_date":1637099319,"answer_id":69996428,"question_id":69985504,"body_markdown":"I think you actually dont have to add `--add-exports`.  If you look at the Mongodb Java driver code, you see it is already adding `dns:` \r\n\r\nThis was a PR https://github.com/mongodb/mongo-java-driver/pull/554\r\n\r\n\r\nIt might be JVM related, but hard to prove on this. Can you run it on a docker container using OpenJDK 11 and see? Or different versions?\r\n\r\n        /*\r\n          It&#39;s unfortunate that we take a runtime dependency on com.sun.jndi.dns.DnsContextFactory.\r\n          This is not guaranteed to work on all JVMs but in practice is expected to work on most.\r\n        */\r\n        private static InitialDirContext createDnsDirContext() {\r\n            Hashtable&lt;String, String&gt; envProps = new Hashtable&lt;String, String&gt;();\r\n            envProps.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\r\n            envProps.put(Context.PROVIDER_URL, &quot;dns:&quot;);\r\n            try {\r\n                return new InitialDirContext(envProps);\r\n            } catch (NamingException e) {\r\n                throw new MongoClientException(&quot;Unable to support mongodb+srv// style connections as the &#39;com.sun.jndi.dns.DnsContextFactory&#39; &quot;\r\n                        + &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records.&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nhttps://github.com/mongodb/mongo-java-driver/blob/master/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java","title":"Unable to instantiate Mongo related beans in Spring context when DNS records (SRV and TXT) are being used","body":"<p>I think you actually dont have to add <code>--add-exports</code>.  If you look at the Mongodb Java driver code, you see it is already adding <code>dns:</code></p>\n<p>This was a PR <a href=\"https://github.com/mongodb/mongo-java-driver/pull/554\" rel=\"nofollow noreferrer\">https://github.com/mongodb/mongo-java-driver/pull/554</a></p>\n<p>It might be JVM related, but hard to prove on this. Can you run it on a docker container using OpenJDK 11 and see? Or different versions?</p>\n<pre><code>    /*\n      It's unfortunate that we take a runtime dependency on com.sun.jndi.dns.DnsContextFactory.\n      This is not guaranteed to work on all JVMs but in practice is expected to work on most.\n    */\n    private static InitialDirContext createDnsDirContext() {\n        Hashtable&lt;String, String&gt; envProps = new Hashtable&lt;String, String&gt;();\n        envProps.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\n        envProps.put(Context.PROVIDER_URL, &quot;dns:&quot;);\n        try {\n            return new InitialDirContext(envProps);\n        } catch (NamingException e) {\n            throw new MongoClientException(&quot;Unable to support mongodb+srv// style connections as the 'com.sun.jndi.dns.DnsContextFactory' &quot;\n                    + &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records.&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://github.com/mongodb/mongo-java-driver/blob/master/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java\" rel=\"nofollow noreferrer\">https://github.com/mongodb/mongo-java-driver/blob/master/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java</a></p>\n"}],"owner":{"account_id":4421843,"reputation":564,"user_id":3601527,"accept_rate":84,"display_name":"SocketM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637099319,"creation_date":1637049164,"question_id":69985504,"body_markdown":"I was using without any Mongo beans instantiation issue a Java maven project with Java 8 and Spring Data MongoDb Reactive. Currently, I’m trying to upgrade the same project from Java 8 project to Java 11 (jvm 11.0.8+10-LTS). My updated spring boot version is 2.5.6 with Jetty server (9.4.44.v20210927), and the corresponding Mongo reactive version is based on 2.5.6. When Spring is trying to create the mongo related beans in order to add them in the context the following error appears:\r\n\r\n    Unable to support mongodb+srv// style connections as the ‘com.sun.jndi.dns.DnsContextFactory’ &quot;\r\n    + &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records\r\n\r\n\r\nAmong others I&#39;ve tried the following:\r\n\r\nadd a jndi.properties file that sets a property \r\n\r\n`java.naming.provider.url=dns:.`\r\n\r\nadd -exports argument to the maven compiler plugin\r\n\r\n   \r\n\r\n     &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                            &lt;release&gt;11&lt;/release&gt;\r\n                        &lt;compilerArgs&gt;\r\n                            &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                            &lt;arg&gt;jdk.naming.dns/com.sun.jndi.dns=java.naming&lt;/arg&gt;\r\n                        &lt;/compilerArgs&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n\r\nupgraded to the latest jetty server version compatible with java 11\r\n\r\n  \r\n\r\n     &lt;jetty.version&gt;9.4.44.v20210927&lt;/jetty.version&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;\r\n     &lt;version&gt;${jetty.version}&lt;/version&gt;\r\n     &lt;scope&gt;provided&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\n\r\nCan you please advise me with a solution?\r\n","title":"Unable to instantiate Mongo related beans in Spring context when DNS records (SRV and TXT) are being used","body":"<p>I was using without any Mongo beans instantiation issue a Java maven project with Java 8 and Spring Data MongoDb Reactive. Currently, I’m trying to upgrade the same project from Java 8 project to Java 11 (jvm 11.0.8+10-LTS). My updated spring boot version is 2.5.6 with Jetty server (9.4.44.v20210927), and the corresponding Mongo reactive version is based on 2.5.6. When Spring is trying to create the mongo related beans in order to add them in the context the following error appears:</p>\n<pre><code>Unable to support mongodb+srv// style connections as the ‘com.sun.jndi.dns.DnsContextFactory’ &quot;\n+ &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records\n</code></pre>\n<p>Among others I've tried the following:</p>\n<p>add a jndi.properties file that sets a property</p>\n<p><code>java.naming.provider.url=dns:.</code></p>\n<p>add -exports argument to the maven compiler plugin</p>\n<pre><code> &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                        &lt;release&gt;11&lt;/release&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\n                        &lt;arg&gt;jdk.naming.dns/com.sun.jndi.dns=java.naming&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>upgraded to the latest jetty server version compatible with java 11</p>\n<pre><code> &lt;jetty.version&gt;9.4.44.v20210927&lt;/jetty.version&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n  &lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;\n &lt;version&gt;${jetty.version}&lt;/version&gt;\n &lt;scope&gt;provided&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>Can you please advise me with a solution?</p>\n"},{"tags":["java","spring","eclipse","gradle"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637078123,"post_id":69991904,"comment_id":123726833,"body_markdown":"There are different Eclipse IDE package with different JavaScript editors. Unfortunately, your question does not tell [how to reproduce this issue](https://stackoverflow.com/help/minimal-reproducible-example). Did you use [Eclipse Wild Web Developer](https://github.com/eclipse/wildwebdeveloper) which exists for more than three years? Which documentation did you follow?","body":"There are different Eclipse IDE package with different JavaScript editors. Unfortunately, your question does not tell <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to reproduce this issue</a>. Did you use <a href=\"https://github.com/eclipse/wildwebdeveloper\" rel=\"nofollow noreferrer\">Eclipse Wild Web Developer</a> which exists for more than three years? Which documentation did you follow?"},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637080013,"post_id":69991904,"comment_id":123727724,"body_markdown":"I downloaded the Windows Eclipse installer, ran it, selected the option that looked most appropriate – something about java and web; second on the list – and used that. From there, the easy way to recreate the issue is to download a basic empty Java 17 gradle project from Spring Initializr; it gives some of the same issues with not recognising the imports, not recognising the root application class…","body":"I downloaded the Windows Eclipse installer, ran it, selected the option that looked most appropriate – something about java and web; second on the list – and used that. From there, the easy way to recreate the issue is to download a basic empty Java 17 gradle project from Spring Initializr; it gives some of the same issues with not recognising the imports, not recognising the root application class…"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1637080935,"post_id":69991904,"comment_id":123728085,"body_markdown":"All of the packages use Wild Web Developer for JavaScript/ECMAScript files.","body":"All of the packages use Wild Web Developer for JavaScript/ECMAScript files."},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637081804,"post_id":69991904,"comment_id":123728507,"body_markdown":"Wild Web Developer is installed. I downlaoded the Maven equivalent empty Spring Initializr project and that doesn&#39;t give any errors. There was some mention in some error of it having built with Gradle 6.8.3, even though it was configured to build with 7.2; maybe the issue is there.","body":"Wild Web Developer is installed. I downlaoded the Maven equivalent empty Spring Initializr project and that doesn&#39;t give any errors. There was some mention in some error of it having built with Gradle 6.8.3, even though it was configured to build with 7.2; maybe the issue is there."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637089749,"post_id":69991904,"comment_id":123731519,"body_markdown":"Instead of making assumptions, just tell how to reproduce your issue. Please edit your question and provide an example file with which your issue can be reproduced. Are you talking about a *.js file? With which editor did you open it?","body":"Instead of making assumptions, just tell how to reproduce your issue. Please edit your question and provide an example file with which your issue can be reproduced. Are you talking about a *.js file? With which editor did you open it?"},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637091860,"post_id":69991904,"comment_id":123732224,"body_markdown":"My partial reproduction is a fresh Windows install of Eclipse – using the installer, second IDE variant option – and get a Spring Initializr project (Java 17) with no dependencis configured. Open that project and the imports fail. I don&#39;t know how you want me to give you more; yes, there&#39;s the more complex version whereby opening an exising project throws up other errors, including in *.js files, but as there&#39;s a basic problem with the cleanest project I can put in it, that&#39;s the best place to start.","body":"My partial reproduction is a fresh Windows install of Eclipse – using the installer, second IDE variant option – and get a Spring Initializr project (Java 17) with no dependencis configured. Open that project and the imports fail. I don&#39;t know how you want me to give you more; yes, there&#39;s the more complex version whereby opening an exising project throws up other errors, including in *.js files, but as there&#39;s a basic problem with the cleanest project I can put in it, that&#39;s the best place to start."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637094362,"post_id":69991904,"comment_id":123733145,"body_markdown":"Please show a [minimal(!) reproducible(!) example](https://stackoverflow.com/help/minimal-reproducible-example) focusing of one issue only. You have to show some code (as text), tell with which editor to open it (show an screenshot when you cannot name the editor) and also tell what you expect instead.","body":"Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal(!) reproducible(!) example</a> focusing of one issue only. You have to show some code (as text), tell with which editor to open it (show an screenshot when you cannot name the editor) and also tell what you expect instead."},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637099332,"post_id":69991904,"comment_id":123734684,"body_markdown":"Edited to focus on its behaviour with a simple Springboot project (and hoping that the same cause as all the other issues which I can&#39;t offer in any reproducible form as you won&#39;t have the same project to work with.)","body":"Edited to focus on its behaviour with a simple Springboot project (and hoping that the same cause as all the other issues which I can&#39;t offer in any reproducible form as you won&#39;t have the same project to work with.)"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1637114691,"post_id":69991904,"comment_id":123737756,"body_markdown":"Expand the node for &quot;Project and External Dependencies&quot;. If the project can&#39;t find `java.lang.String`, a JRE is somehow missing from the Build Path.","body":"Expand the node for &quot;Project and External Dependencies&quot;. If the project can&#39;t find <code>java.lang.String</code>, a JRE is somehow missing from the Build Path."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637134551,"post_id":69991904,"comment_id":123741503,"body_markdown":"In the first project the _JRE System Library_ node is missing in the _Project Explorer_. Without knowing what is in _Project &gt; Properties: Java Build Path_, in the `build.gradle` file and the error message (shown in the _Problems_ view), it is hard to guess what&#39;s wrong here. It is also a bit wired that you do not use [https://spring.io/tools](https://spring.io/tools) for a Spring based project. The original title now seems to be unrelated. Take your time and learn the basics before making assumptions about the tools you use.","body":"In the first project the <i>JRE System Library</i> node is missing in the <i>Project Explorer</i>. Without knowing what is in <i>Project &gt; Properties: Java Build Path</i>, in the <code>build.gradle</code> file and the error message (shown in the <i>Problems</i> view), it is hard to guess what&#39;s wrong here. It is also a bit wired that you do not use <a href=\"https://spring.io/tools\" rel=\"nofollow noreferrer\">https://spring.io/tools</a> for a Spring based project. The original title now seems to be unrelated. Take your time and learn the basics before making assumptions about the tools you use."},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637137488,"post_id":69991904,"comment_id":123742406,"body_markdown":"Thanks @howlger. I had no reason to know that Spring Tools even existed; why would I? (Now installed, makes no difference.) And &quot;learning&quot; about it means using it, or banging my head against it without meaningful guidance. (Anything I search for comes up with information on years-old versions that are no longer relevant.) Yes, _JRE System Library_ is missing. In the Libraries tab in _Project Explorer_, it is under Classpath with an error icon, and is marked as &quot;(unbound)&quot;; in the Maven version, it&#39;s under Modulepath. I didn&#39;t put any of those there; as I said, clean Initializr projects.","body":"Thanks @howlger. I had no reason to know that Spring Tools even existed; why would I? (Now installed, makes no difference.) And &quot;learning&quot; about it means using it, or banging my head against it without meaningful guidance. (Anything I search for comes up with information on years-old versions that are no longer relevant.) Yes, <i>JRE System Library</i> is missing. In the Libraries tab in <i>Project Explorer</i>, it is under Classpath with an error icon, and is marked as &quot;(unbound)&quot;; in the Maven version, it&#39;s under Modulepath. I didn&#39;t put any of those there; as I said, clean Initializr projects."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1650267112,"post_id":69991904,"comment_id":127067815,"body_markdown":"_&quot;(unbound)&quot;_ means here you have to configure a Java of the appropriate version in the preferences (_Window &gt; Preferences_) in _Java &gt; Installed JREs_.","body":"<i>&quot;(unbound)&quot;</i> means here you have to configure a Java of the appropriate version in the preferences (<i>Window &gt; Preferences</i>) in <i>Java &gt; Installed JREs</i>."}],"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637099242,"creation_date":1637076571,"question_id":69991904,"body_markdown":"I am trying out Eclipse (because of frustrations with apparent version incompatibilities when upgrading another IDE), but it is proving equally problematic. This is a perfectly clean Eclipse installation (windows installer, second variant option), so it&#39;s an ootb issue.\r\n\r\n(Simplified, theoretically-reproducable version): I downloaded two copies of a basic Java 17 project from Spring Initializr with no dependencies; one as Gradle, one as Maven (tester &amp; tester2 respectively). The Gradle build shows errors where there are none, per the screenshot.\r\n\r\n[![Eclipse with different builds of the same project, one errors][1]][1]\r\n\r\nNote that in the one class in the besic, clean SpringBoot application, it sees the package name, the class name, and even the definition of `String` as being errors. But the same code in the Maven version is fine.\r\n\r\nThere are further issues that appear to derive from this, but keeping it simple…\r\n\r\nAt some point during my testing, some message/error showed up that suggested it was building with Gradle 6.8.3, which I believe would be a problem as that version doesn&#39;t support Java 16+. Eclipse is configured to use 7.3.\r\n\r\nHow do I tell Eclipse to recognise a valid project, so it can be worked with?\r\n\r\n  [1]: https://i.stack.imgur.com/RcqcG.png","title":"How to get Eclipse to work properly with Gradle?","body":"<p>I am trying out Eclipse (because of frustrations with apparent version incompatibilities when upgrading another IDE), but it is proving equally problematic. This is a perfectly clean Eclipse installation (windows installer, second variant option), so it's an ootb issue.</p>\n<p>(Simplified, theoretically-reproducable version): I downloaded two copies of a basic Java 17 project from Spring Initializr with no dependencies; one as Gradle, one as Maven (tester &amp; tester2 respectively). The Gradle build shows errors where there are none, per the screenshot.</p>\n<p><a href=\"https://i.stack.imgur.com/RcqcG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RcqcG.png\" alt=\"Eclipse with different builds of the same project, one errors\" /></a></p>\n<p>Note that in the one class in the besic, clean SpringBoot application, it sees the package name, the class name, and even the definition of <code>String</code> as being errors. But the same code in the Maven version is fine.</p>\n<p>There are further issues that appear to derive from this, but keeping it simple…</p>\n<p>At some point during my testing, some message/error showed up that suggested it was building with Gradle 6.8.3, which I believe would be a problem as that version doesn't support Java 16+. Eclipse is configured to use 7.3.</p>\n<p>How do I tell Eclipse to recognise a valid project, so it can be worked with?</p>\n"},{"tags":["java","spring-webflux","reactive","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637099129,"creation_date":1637099129,"answer_id":69996398,"question_id":69992427,"body_markdown":"If your output has an empty state you can do something like:\r\n```java\r\n.onErrorResume(CustomException.class, e -&gt; Model.empty())\r\n```\r\n\r\nIf you don&#39;t have empty state you should wrap the output into `Optional`:\r\n```java\r\n.map(Optional::of)\r\n.onErrorResume(CustomException.class, e -&gt; Optional.empty())\r\n```\r\n\r\nIn any case these operators should be chained to the `getCall` method. For example:\r\n```java\r\npublic Mono&lt;Model&gt; getCall(String path) {\r\n    return webClient.get()\r\n            .uri(path)\r\n            .retrieve()\r\n            .onStatus(HttpStatus::isError, errorHandler())     \r\n            .retrieve()\r\n            .bodyToMono(Model.class)\r\n            .onErrorResume(CustomException.class, e -&gt; Model.empty());\r\n}\r\n```","title":"Exception from a Spring WebFlux Mono interrupts Mono.zip","body":"<p>If your output has an empty state you can do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.onErrorResume(CustomException.class, e -&gt; Model.empty())\n</code></pre>\n<p>If you don't have empty state you should wrap the output into <code>Optional</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.map(Optional::of)\n.onErrorResume(CustomException.class, e -&gt; Optional.empty())\n</code></pre>\n<p>In any case these operators should be chained to the <code>getCall</code> method. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;Model&gt; getCall(String path) {\n    return webClient.get()\n            .uri(path)\n            .retrieve()\n            .onStatus(HttpStatus::isError, errorHandler())     \n            .retrieve()\n            .bodyToMono(Model.class)\n            .onErrorResume(CustomException.class, e -&gt; Model.empty());\n}\n</code></pre>\n"}],"owner":{"account_id":12869604,"reputation":158,"user_id":9308543,"display_name":"Hosten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69996398,"answer_count":1,"score":0,"last_activity_date":1637099129,"creation_date":1637078628,"question_id":69992427,"body_markdown":"Let&#39;s say that I have two calls using spring webclient. Both are defined as follow, with an exception thrown in .**onStatus** :\r\n\r\n   \r\n\r\n    public Mono&lt;Model&gt; getCall(String path) {\r\n        webClient.get()\r\n                .uri(path)\r\n                .retrieve()\r\n                .onStatus(HttpStatus::isError, errorHandler())}\r\n\r\nAnd this is the Exception function **errorHandler()** :\r\n\r\n    private Function&lt;ClientResponse, Mono&lt;? extends Throwable&gt;&gt; errorHandler() {\r\n        return clientResponse -&gt; clientResponse.bodyToMono(ErrorResponse.class).\r\n                flatMap(errorBody -&gt; Mono.error(new CustomException(clientResponse.statusCode().value(), &quot;exception&quot;, errorBody)));\r\n\r\nOn my Mono.zip, I defined it as follow :\r\n\r\n    Mono.zip(getCall(call1),\r\n             getCall(call2))\r\n             .block;\r\n\r\nThe problem is, if one of the calls throws an exception, I can no longer get at least one of the result. Tried using :\r\n\r\n    .onErrorContinue(CustomException.class, (error, output) -&gt; log.error(&quot;CustomException !&quot; + error + output))\r\n\r\nSo how can I handle exceptions with Mono.zip, like we do with try catch, but without stopping the execution and getting the results of successful calls ?\r\nAnd Thank you","title":"Exception from a Spring WebFlux Mono interrupts Mono.zip","body":"<p>Let's say that I have two calls using spring webclient. Both are defined as follow, with an exception thrown in .<strong>onStatus</strong> :</p>\n<pre><code>public Mono&lt;Model&gt; getCall(String path) {\n    webClient.get()\n            .uri(path)\n            .retrieve()\n            .onStatus(HttpStatus::isError, errorHandler())}\n</code></pre>\n<p>And this is the Exception function <strong>errorHandler()</strong> :</p>\n<pre><code>private Function&lt;ClientResponse, Mono&lt;? extends Throwable&gt;&gt; errorHandler() {\n    return clientResponse -&gt; clientResponse.bodyToMono(ErrorResponse.class).\n            flatMap(errorBody -&gt; Mono.error(new CustomException(clientResponse.statusCode().value(), &quot;exception&quot;, errorBody)));\n</code></pre>\n<p>On my Mono.zip, I defined it as follow :</p>\n<pre><code>Mono.zip(getCall(call1),\n         getCall(call2))\n         .block;\n</code></pre>\n<p>The problem is, if one of the calls throws an exception, I can no longer get at least one of the result. Tried using :</p>\n<pre><code>.onErrorContinue(CustomException.class, (error, output) -&gt; log.error(&quot;CustomException !&quot; + error + output))\n</code></pre>\n<p>So how can I handle exceptions with Mono.zip, like we do with try catch, but without stopping the execution and getting the results of successful calls ?\nAnd Thank you</p>\n"},{"tags":["java","android-studio","android-recyclerview","crash","adapter"],"answers":[{"tags":[],"owner":{"account_id":19021361,"reputation":401,"user_id":13885374,"display_name":"Jake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637098999,"creation_date":1637098999,"answer_id":69996375,"question_id":69995100,"body_markdown":"Solution is \r\n\r\n```\r\n    @Override\r\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\r\n\r\n        DataModel model = list.get(position);\r\n        holder.sn.setText(model.getSn().toString());\r\n        holder.date.setText(model.getDate());\r\n        holder.name.setText(model.getName());\r\n        holder.weight.setText(model.getWeight().toString());\r\n        holder.rate.setText(model.getRate().toString());\r\n        holder.total.setText(model.getTotal().toString());\r\n\r\n    }\r\n```\r\n\r\nReason of crush is model.getSn(), model.getWeight(), model.getRate(), model.getTotal() return Integer and textView.setText() calls `public final void setText(@StringRes int resid)` which tries to find string by Integers which you provided from your model.","title":"App crash while implementing Recycle Adapter","body":"<p>Solution is</p>\n<pre><code>    @Override\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\n\n        DataModel model = list.get(position);\n        holder.sn.setText(model.getSn().toString());\n        holder.date.setText(model.getDate());\n        holder.name.setText(model.getName());\n        holder.weight.setText(model.getWeight().toString());\n        holder.rate.setText(model.getRate().toString());\n        holder.total.setText(model.getTotal().toString());\n\n    }\n</code></pre>\n<p>Reason of crush is model.getSn(), model.getWeight(), model.getRate(), model.getTotal() return Integer and textView.setText() calls <code>public final void setText(@StringRes int resid)</code> which tries to find string by Integers which you provided from your model.</p>\n"}],"owner":{"account_id":19503231,"reputation":3,"user_id":14268786,"display_name":"Prabesh Regmi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69996375,"answer_count":1,"score":0,"last_activity_date":1637098999,"creation_date":1637091454,"question_id":69995100,"body_markdown":"\r\nI&#39;m creating an app to simply store the records of a tractions and able to see the record.\r\n\r\nIn IteamListActivity I want to see my records of tractions.\r\n\r\nI want to list all the data item in recycle view.\r\n\r\nWhen I click &#39;View&#39; button in activity_home xml, app crashes.\r\n\r\nGitHub Link of the project is [Here](https://github.com/prabesh-regmi/NoteBook)\r\n\r\n\r\nCode is \r\n\r\nAdapter \r\n\r\n    \r\n    public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.viewHolder&gt;{\r\n\r\n    ArrayList&lt;DataModel&gt; list;\r\n    Context context;\r\n\r\n    public DataAdapter(ArrayList&lt;DataModel&gt; list, Context context) {\r\n        this.list = list;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = \r\n     LayoutInflater.from(context).inflate(R.layout.data_list_design,parent,false);\r\n        return new viewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\r\n\r\n        DataModel model = list.get(position);\r\n        holder.sn.setText(model.getSn());\r\n        holder.date.setText(model.getDate());\r\n        holder.name.setText(model.getName());\r\n        holder.weight.setText(model.getWeight());\r\n        holder.rate.setText(model.getRate());\r\n        holder.total.setText(model.getTotal());\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public class viewHolder extends  RecyclerView.ViewHolder {\r\n\r\n    TextView sn,date,name,weight,rate,total;\r\n    public viewHolder(@NonNull View itemView) {\r\n\r\n        super(itemView);\r\n\r\n        sn = itemView.findViewById(R.id.snTitle);\r\n        date = itemView.findViewById(R.id.dateTitle);\r\n        name = itemView.findViewById(R.id.nameTitle);\r\n        weight = itemView.findViewById(R.id.weightTitle);\r\n        rate = itemView.findViewById(R.id.rateTitle);\r\n        total = itemView.findViewById(R.id.totalTitle);\r\n     }\r\n     }\r\n\r\n     }\r\n\r\n\r\nHomeActivity\r\n\r\n            binding.listview.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(HomeActivity.this,ItemListActivity.class );\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n  \r\n       \r\nItemListActivity\r\n\r\n \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityItemListBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n            ArrayList&lt;DataModel&gt; list = new ArrayList&lt;&gt;();\r\n            list.add(new DataModel(1,&quot;2021-07-29&quot;,&quot;Potato&quot;, 76,50,100));\r\n            list.add(new DataModel(2,&quot;2021-07-30&quot;,&quot;Potato&quot;, 106,60,100));\r\n            list.add(new DataModel(3,&quot;2021-08-02&quot;,&quot;Potato&quot;, 83,80,100));\r\n            list.add(new DataModel(4,&quot;2021-08-03&quot;,&quot;Potato&quot;, 67,90,100));\r\n            list.add(new DataModel(5,&quot;2021-08-05&quot;,&quot;Potato&quot;, 70,70,100));\r\n\r\n            DataAdapter adapter = new DataAdapter(list,this);\r\n            LinearLayoutManager linearLayoutManager = new \r\n            LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false);\r\n            binding.datalistRv.setLayoutManager(linearLayoutManager);\r\n            binding.datalistRv.setNestedScrollingEnabled(false);\r\n            binding.datalistRv.setAdapter(adapter);\r\n\r\n        }\r\n","title":"App crash while implementing Recycle Adapter","body":"<p>I'm creating an app to simply store the records of a tractions and able to see the record.</p>\n<p>In IteamListActivity I want to see my records of tractions.</p>\n<p>I want to list all the data item in recycle view.</p>\n<p>When I click 'View' button in activity_home xml, app crashes.</p>\n<p>GitHub Link of the project is <a href=\"https://github.com/prabesh-regmi/NoteBook\" rel=\"nofollow noreferrer\">Here</a></p>\n<p>Code is</p>\n<p>Adapter</p>\n<pre><code>public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.viewHolder&gt;{\n\nArrayList&lt;DataModel&gt; list;\nContext context;\n\npublic DataAdapter(ArrayList&lt;DataModel&gt; list, Context context) {\n    this.list = list;\n    this.context = context;\n}\n\n@NonNull\n@Override\npublic viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View view = \n LayoutInflater.from(context).inflate(R.layout.data_list_design,parent,false);\n    return new viewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull viewHolder holder, int position) {\n\n    DataModel model = list.get(position);\n    holder.sn.setText(model.getSn());\n    holder.date.setText(model.getDate());\n    holder.name.setText(model.getName());\n    holder.weight.setText(model.getWeight());\n    holder.rate.setText(model.getRate());\n    holder.total.setText(model.getTotal());\n\n}\n\n@Override\npublic int getItemCount() {\n    return list.size();\n}\n\npublic class viewHolder extends  RecyclerView.ViewHolder {\n\nTextView sn,date,name,weight,rate,total;\npublic viewHolder(@NonNull View itemView) {\n\n    super(itemView);\n\n    sn = itemView.findViewById(R.id.snTitle);\n    date = itemView.findViewById(R.id.dateTitle);\n    name = itemView.findViewById(R.id.nameTitle);\n    weight = itemView.findViewById(R.id.weightTitle);\n    rate = itemView.findViewById(R.id.rateTitle);\n    total = itemView.findViewById(R.id.totalTitle);\n }\n }\n\n }\n</code></pre>\n<p>HomeActivity</p>\n<pre><code>        binding.listview.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(HomeActivity.this,ItemListActivity.class );\n                startActivity(intent);\n            }\n        });\n\n   \n</code></pre>\n<p>ItemListActivity</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = ActivityItemListBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n        ArrayList&lt;DataModel&gt; list = new ArrayList&lt;&gt;();\n        list.add(new DataModel(1,&quot;2021-07-29&quot;,&quot;Potato&quot;, 76,50,100));\n        list.add(new DataModel(2,&quot;2021-07-30&quot;,&quot;Potato&quot;, 106,60,100));\n        list.add(new DataModel(3,&quot;2021-08-02&quot;,&quot;Potato&quot;, 83,80,100));\n        list.add(new DataModel(4,&quot;2021-08-03&quot;,&quot;Potato&quot;, 67,90,100));\n        list.add(new DataModel(5,&quot;2021-08-05&quot;,&quot;Potato&quot;, 70,70,100));\n\n        DataAdapter adapter = new DataAdapter(list,this);\n        LinearLayoutManager linearLayoutManager = new \n        LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false);\n        binding.datalistRv.setLayoutManager(linearLayoutManager);\n        binding.datalistRv.setNestedScrollingEnabled(false);\n        binding.datalistRv.setAdapter(adapter);\n\n    }\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa","spring-data","hibernate-mapping"],"answers":[{"tags":[],"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637098563,"creation_date":1575760685,"answer_id":59231091,"question_id":58996129,"body_markdown":"Long story short, no, these settings do not exclude each other.\r\n\r\nImagine, we have the following model.\r\n``` lang-sql\r\ncreate table APP_USER\r\n(\r\n   USER_ID number,\r\n   USER_NAME varchar2(400),\r\n   \r\n   constraint APP_USER_PK primary key(USER_ID)\r\n);\r\n\r\ncreate table APP_BILLING_NUMBER\r\n(\r\n   BILL_ID number,\r\n   BILL_ACCOUNT varchar2(20),\r\n   BILL_BANK_NAME varchar2(300),\r\n   BILL_USER_ID number,\r\n   \r\n   constraint APP_BILLING_NUMBER_PK primary key(BILL_ID),\r\n);\r\n```\r\n\r\nAnd appropriate hibernate mapping:\r\n```\r\n@Entity\r\n@Table(name = &quot;APP_USER&quot;)\r\npublic class User\r\n{\r\n   @Id\r\n   @Column(name = &quot;USER_ID&quot;)\r\n   private Long id;\r\n   \r\n   @Column(name = &quot;USER_NAME&quot;)\r\n   private String name;\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;APP_BILLING_NUMBER&quot;)\r\npublic class BillingNumber\r\n{\r\n   @Id\r\n   @Column(name = &quot;BILL_ID&quot;)\r\n   private Long id;\r\n   \r\n   @Column(name = &quot;BILL_ACCOUNT&quot;)\r\n   private String account;\r\n   \r\n   @Column(name = &quot;BILL_BANK_NAME&quot;)\r\n   private String bankName;\r\n   \r\n   @ManyToOne\r\n   @JoinColumn(name=&quot;BILL_USER_ID&quot;)\r\n   private User user;\r\n}\r\n```\r\n\r\nIf we try to do something like this:\r\n```\r\n  User user = new User();\r\n  user.setId(1L);\r\n  user.setName(&quot;Alex&quot;);\r\n      \r\n  BillingNumber bill = new BillingNumber();\r\n  bill.setId(1L);\r\n  bill.setAccount(&quot;EA12345678&quot;);\r\n  bill.setBankName(&quot;BNP Paribas&quot;);\r\n  bill.setUser(user);\r\n      \r\n  session.persist(bill);\r\n```\r\n\r\nWe will find out that the bill was added to the `APP_BILLING_NUMBER` table,\r\n```\r\nSQL&gt; select * from APP_BILLING_NUMBER;\r\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\r\n------- ------------ -------------- ------------\r\n1       EA12345678   BNP Paribas    1\r\n```\r\nbut the user was not. It happened because by default we have `@ManyToOne(cascade={})`. If we want to persist a `User` entity with a `BillingNumber` entity we should add `CascadeType.PERSIST`:\r\n``` lang-java\r\n  @ManyToOne(cascade = {CascadeType.PERSIST})\r\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;)\r\n  private User user;\r\n```\r\nthen, if we are going to use `session.merge(bill)` operation we should add `CascadeType.MERGE` as well.\r\n\r\nNow imagine, we have\r\n\r\n``` lang-java\r\n  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;, insertable = false, updatable = false)\r\n  private User user;\r\n```\r\n\r\nAfter executing the above persist operation we will have:\r\n```\r\nSQL&gt; select * from APP_USER;\r\nUSER_ID USER_NAME\r\n------- ---------\r\n1       Alex\r\n\r\nSQL&gt; select * from APP_BILLING_NUMBER;\r\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\r\n------- ------------ -------------- ------------\r\n1       EA12345678   BNP Paribas    (null)\r\n```\r\n\r\nAs you can see, both entities were inserted but the `APP_BILLING_NUMBER.BILL_USER_ID` reference is `null` because of `@JoinColumn(..., insertable = false, ...)`. And you can not update it because of `updatable = false`.\r\n\r\nSo, this is valid but quite exotic case.","title":"Do CascadeType.ALL and &quot;insertable = false, updatable = false&quot; exclude each other?","body":"<p>Long story short, no, these settings do not exclude each other.</p>\n<p>Imagine, we have the following model.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table APP_USER\n(\n   USER_ID number,\n   USER_NAME varchar2(400),\n   \n   constraint APP_USER_PK primary key(USER_ID)\n);\n\ncreate table APP_BILLING_NUMBER\n(\n   BILL_ID number,\n   BILL_ACCOUNT varchar2(20),\n   BILL_BANK_NAME varchar2(300),\n   BILL_USER_ID number,\n   \n   constraint APP_BILLING_NUMBER_PK primary key(BILL_ID),\n);\n</code></pre>\n<p>And appropriate hibernate mapping:</p>\n<pre><code>@Entity\n@Table(name = &quot;APP_USER&quot;)\npublic class User\n{\n   @Id\n   @Column(name = &quot;USER_ID&quot;)\n   private Long id;\n   \n   @Column(name = &quot;USER_NAME&quot;)\n   private String name;\n}\n\n@Entity\n@Table(name = &quot;APP_BILLING_NUMBER&quot;)\npublic class BillingNumber\n{\n   @Id\n   @Column(name = &quot;BILL_ID&quot;)\n   private Long id;\n   \n   @Column(name = &quot;BILL_ACCOUNT&quot;)\n   private String account;\n   \n   @Column(name = &quot;BILL_BANK_NAME&quot;)\n   private String bankName;\n   \n   @ManyToOne\n   @JoinColumn(name=&quot;BILL_USER_ID&quot;)\n   private User user;\n}\n</code></pre>\n<p>If we try to do something like this:</p>\n<pre><code>  User user = new User();\n  user.setId(1L);\n  user.setName(&quot;Alex&quot;);\n      \n  BillingNumber bill = new BillingNumber();\n  bill.setId(1L);\n  bill.setAccount(&quot;EA12345678&quot;);\n  bill.setBankName(&quot;BNP Paribas&quot;);\n  bill.setUser(user);\n      \n  session.persist(bill);\n</code></pre>\n<p>We will find out that the bill was added to the <code>APP_BILLING_NUMBER</code> table,</p>\n<pre><code>SQL&gt; select * from APP_BILLING_NUMBER;\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\n------- ------------ -------------- ------------\n1       EA12345678   BNP Paribas    1\n</code></pre>\n<p>but the user was not. It happened because by default we have <code>@ManyToOne(cascade={})</code>. If we want to persist a <code>User</code> entity with a <code>BillingNumber</code> entity we should add <code>CascadeType.PERSIST</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @ManyToOne(cascade = {CascadeType.PERSIST})\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;)\n  private User user;\n</code></pre>\n<p>then, if we are going to use <code>session.merge(bill)</code> operation we should add <code>CascadeType.MERGE</code> as well.</p>\n<p>Now imagine, we have</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;, insertable = false, updatable = false)\n  private User user;\n</code></pre>\n<p>After executing the above persist operation we will have:</p>\n<pre><code>SQL&gt; select * from APP_USER;\nUSER_ID USER_NAME\n------- ---------\n1       Alex\n\nSQL&gt; select * from APP_BILLING_NUMBER;\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\n------- ------------ -------------- ------------\n1       EA12345678   BNP Paribas    (null)\n</code></pre>\n<p>As you can see, both entities were inserted but the <code>APP_BILLING_NUMBER.BILL_USER_ID</code> reference is <code>null</code> because of <code>@JoinColumn(..., insertable = false, ...)</code>. And you can not update it because of <code>updatable = false</code>.</p>\n<p>So, this is valid but quite exotic case.</p>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1575793728,"creation_date":1575789734,"answer_id":59233311,"question_id":58996129,"body_markdown":"They mean different things and do not conflict with each other. \r\n\r\nSo given the following mapping :\r\n\r\n``` java\r\n@Entity\r\n@Table(name=&quot;player&quot;)\r\npublic class Player {\r\n\r\n\r\n   @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n   @JoinColumn(name = &quot;team_id&quot;, nullable = false, insertable = false, updatable = false)\r\n   Team team;\r\n\r\n}\r\n```\r\n\r\n - `cascade` means that when using `EntityManager` to `persist()` or `merge()` on a `player` , JPA will **automatically** call `persist()` / `merge()` on this player &#39;s team  too.\r\n\r\n - `insertable` and `updatable` is about if allow to assign a new team or update the team for a player . In term of the DB table , it is about if the value of `Player` table &#39;s `team_id` column is allowed to be inserted or updated. \r\n\r\nSo one is about inserting/updating records in the `Team` table while another is about inserting/updating the value of the `Player` table &#39;s `team_id` column , which are totally different things.\r\n\r\n\r\n\r\n\r\n","title":"Do CascadeType.ALL and &quot;insertable = false, updatable = false&quot; exclude each other?","body":"<p>They mean different things and do not conflict with each other. </p>\n\n<p>So given the following mapping :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name=\"player\")\npublic class Player {\n\n\n   @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n   @JoinColumn(name = \"team_id\", nullable = false, insertable = false, updatable = false)\n   Team team;\n\n}\n</code></pre>\n\n<ul>\n<li><p><code>cascade</code> means that when using <code>EntityManager</code> to <code>persist()</code> or <code>merge()</code> on a <code>player</code> , JPA will <strong>automatically</strong> call <code>persist()</code> / <code>merge()</code> on this player 's team  too.</p></li>\n<li><p><code>insertable</code> and <code>updatable</code> is about if allow to assign a new team or update the team for a player . In term of the DB table , it is about if the value of <code>Player</code> table 's <code>team_id</code> column is allowed to be inserted or updated. </p></li>\n</ul>\n\n<p>So one is about inserting/updating records in the <code>Team</code> table while another is about inserting/updating the value of the <code>Player</code> table 's <code>team_id</code> column , which are totally different things.</p>\n"}],"owner":{"account_id":11297246,"reputation":241,"user_id":8284380,"accept_rate":100,"display_name":"Pixel-Killer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4135,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":59233311,"answer_count":2,"score":3,"last_activity_date":1637098563,"creation_date":1574432401,"question_id":58996129,"body_markdown":"If I have the configuration like this, can it work?\r\n\r\n``` lang-java\r\n@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n@JoinColumn(name = &quot;FOREIGN_ID&quot;, nullable = false, insertable = false, updatable = false)\r\nForeignClass foreignClass;\r\n```\r\n\r\nI think not, because the behaviour of the cascade types is in conflict with the insertable and updatable parameters.\r\n\r\nWhat do you think?","title":"Do CascadeType.ALL and &quot;insertable = false, updatable = false&quot; exclude each other?","body":"<p>If I have the configuration like this, can it work?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n@JoinColumn(name = \"FOREIGN_ID\", nullable = false, insertable = false, updatable = false)\nForeignClass foreignClass;\n</code></pre>\n\n<p>I think not, because the behaviour of the cascade types is in conflict with the insertable and updatable parameters.</p>\n\n<p>What do you think?</p>\n"},{"tags":["java","memory-leaks","buffer","bytebuffer"],"comments":[{"owner":{"account_id":26075,"reputation":41643,"user_id":67566,"accept_rate":73,"display_name":"James Black"},"score":0,"creation_date":1260075685,"post_id":1854398,"comment_id":1749191,"body_markdown":"Are you certain that nothing else is holding a reference to this ByteBuffer?","body":"Are you certain that nothing else is holding a reference to this ByteBuffer?"},{"owner":{"account_id":56395,"reputation":1400,"user_id":168930,"accept_rate":56,"display_name":"mglmnc"},"score":0,"creation_date":1260077603,"post_id":1854398,"comment_id":1749265,"body_markdown":"Yes, im pretty sure, I instantiate method level classes that hold the buffers which go out of scope as soon as the method finishes invocation.","body":"Yes, im pretty sure, I instantiate method level classes that hold the buffers which go out of scope as soon as the method finishes invocation."},{"owner":{"account_id":75307,"reputation":69281,"user_id":216063,"accept_rate":64,"display_name":"Gregory Pakosz"},"score":2,"creation_date":1260309479,"post_id":1854398,"comment_id":1767544,"body_markdown":"related: http://stackoverflow.com/questions/1744533/jna-bytebuffer-not-getting-freed-and-causing-c-heap-to-run-out-of-memory/1775542#1775542","body":"related: <a href=\"http://stackoverflow.com/questions/1744533/jna-bytebuffer-not-getting-freed-and-causing-c-heap-to-run-out-of-memory/1775542#1775542\" title=\"jna bytebuffer not getting freed and causing c heap to run out of memory\">stackoverflow.com/questions/1744533/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1260076147,"creation_date":1260075502,"answer_id":1854406,"question_id":1854398,"body_markdown":"I suspect that somewhere your application has a reference to the ByteBuffer instance(s) and that is preventing it from being garbage collected.\r\n\r\nThe buffer memory for a direct ByteBuffer is allocated outside of the normal heap (so that the GC doesn&#39;t move it!!).  However, the ByteBuffer API provides no method for explicitly disposing of / deallocating a buffer.  So I assume that the garbage collector will do it ... once it determines that the ByteBuffer object is no longer referenced.\r\n","title":"How to garbage collect a direct buffer in Java","body":"<p>I suspect that somewhere your application has a reference to the ByteBuffer instance(s) and that is preventing it from being garbage collected.</p>\n\n<p>The buffer memory for a direct ByteBuffer is allocated outside of the normal heap (so that the GC doesn't move it!!).  However, the ByteBuffer API provides no method for explicitly disposing of / deallocating a buffer.  So I assume that the garbage collector will do it ... once it determines that the ByteBuffer object is no longer referenced.</p>\n"},{"tags":[],"owner":{"account_id":680,"reputation":960675,"user_id":893,"accept_rate":84,"display_name":"Greg Hewgill"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1260075850,"creation_date":1260075850,"answer_id":1854414,"question_id":1854398,"body_markdown":"The [`ByteBuffer`](http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html) documentation says:\r\n\r\n&gt; A direct byte buffer may be created by invoking the [`allocateDirect`][1] factory method of this class. The buffers returned by this method typically have somewhat higher allocation and deallocation costs than non-direct buffers. The contents of direct buffers may reside outside of the normal garbage-collected heap, and so their impact upon the memory footprint of an application might not be obvious. It is therefore recommended that direct buffers be allocated primarily for large, long-lived buffers that are subject to the underlying system&#39;s native I/O operations. In general it is best to allocate direct buffers only when they yield a measureable gain in program performance.\r\n\r\nIn particular, the statement &quot;may reside outside of the normal garbage-collected heap&quot; seems relevant to your example.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)","title":"How to garbage collect a direct buffer in Java","body":"<p>The <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html\" rel=\"noreferrer\"><code>ByteBuffer</code></a> documentation says:</p>\n\n<blockquote>\n  <p>A direct byte buffer may be created by invoking the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)\" rel=\"noreferrer\"><code>allocateDirect</code></a> factory method of this class. The buffers returned by this method typically have somewhat higher allocation and deallocation costs than non-direct buffers. The contents of direct buffers may reside outside of the normal garbage-collected heap, and so their impact upon the memory footprint of an application might not be obvious. It is therefore recommended that direct buffers be allocated primarily for large, long-lived buffers that are subject to the underlying system's native I/O operations. In general it is best to allocate direct buffers only when they yield a measureable gain in program performance.</p>\n</blockquote>\n\n<p>In particular, the statement \"may reside outside of the normal garbage-collected heap\" seems relevant to your example.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1260088678,"creation_date":1260088678,"answer_id":1854785,"question_id":1854398,"body_markdown":"The allocated memory is realized through a native libary. This memory will be freed when the ByteBuffer#finalize method is called, iaw when the Buffer is gc&#39;d. Have a look at the allocate() and finalize() implementations of [DirectByteBufferImpl][1].\r\n\r\n`buff.clear()` is not necessary, `System.gc()` will only help if, like others already mentioned, there&#39;s no more reference left to the ByteBuffer object.\r\n\r\n\r\n  [1]: http://www.docjar.com/html/api/java/nio/DirectByteBufferImpl.java.html","title":"How to garbage collect a direct buffer in Java","body":"<p>The allocated memory is realized through a native libary. This memory will be freed when the ByteBuffer#finalize method is called, iaw when the Buffer is gc'd. Have a look at the allocate() and finalize() implementations of <a href=\"http://www.docjar.com/html/api/java/nio/DirectByteBufferImpl.java.html\" rel=\"noreferrer\">DirectByteBufferImpl</a>.</p>\n\n<p><code>buff.clear()</code> is not necessary, <code>System.gc()</code> will only help if, like others already mentioned, there's no more reference left to the ByteBuffer object.</p>\n"},{"tags":[],"owner":{"account_id":269824,"reputation":486,"user_id":559404,"accept_rate":75,"display_name":"Li Pi"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1321670816,"creation_date":1321670816,"answer_id":8191493,"question_id":1854398,"body_markdown":"The DBB will be deallocated once it hits the reference queue, and the finalizer is run. However, as we cannot depend on a finalizer to run, we can use reflection to manually call its &quot;cleaner&quot;.\r\n\r\n\r\nUsing reflection:\r\n\r\n    /**\r\n    * DirectByteBuffers are garbage collected by using a phantom reference and a\r\n    * reference queue. Every once a while, the JVM checks the reference queue and\r\n    * cleans the DirectByteBuffers. However, as this doesn&#39;t happen\r\n    * immediately after discarding all references to a DirectByteBuffer, it&#39;s\r\n    * easy to OutOfMemoryError yourself using DirectByteBuffers. This function\r\n    * explicitly calls the Cleaner method of a DirectByteBuffer.\r\n    * \r\n    * @param toBeDestroyed\r\n    *          The DirectByteBuffer that will be &quot;cleaned&quot;. Utilizes reflection.\r\n    *          \r\n    */\r\n    public static void destroyDirectByteBuffer(ByteBuffer toBeDestroyed)\r\n        throws IllegalArgumentException, IllegalAccessException,\r\n        InvocationTargetException, SecurityException, NoSuchMethodException {\r\n\r\n      Preconditions.checkArgument(toBeDestroyed.isDirect(),\r\n          &quot;toBeDestroyed isn&#39;t direct!&quot;);\r\n\r\n      Method cleanerMethod = toBeDestroyed.getClass().getMethod(&quot;cleaner&quot;);\r\n      cleanerMethod.setAccessible(true);\r\n      Object cleaner = cleanerMethod.invoke(toBeDestroyed);\r\n      Method cleanMethod = cleaner.getClass().getMethod(&quot;clean&quot;);\r\n      cleanMethod.setAccessible(true);\r\n      cleanMethod.invoke(cleaner);\r\n\r\n    }","title":"How to garbage collect a direct buffer in Java","body":"<p>The DBB will be deallocated once it hits the reference queue, and the finalizer is run. However, as we cannot depend on a finalizer to run, we can use reflection to manually call its \"cleaner\".</p>\n\n<p>Using reflection:</p>\n\n<pre><code>/**\n* DirectByteBuffers are garbage collected by using a phantom reference and a\n* reference queue. Every once a while, the JVM checks the reference queue and\n* cleans the DirectByteBuffers. However, as this doesn't happen\n* immediately after discarding all references to a DirectByteBuffer, it's\n* easy to OutOfMemoryError yourself using DirectByteBuffers. This function\n* explicitly calls the Cleaner method of a DirectByteBuffer.\n* \n* @param toBeDestroyed\n*          The DirectByteBuffer that will be \"cleaned\". Utilizes reflection.\n*          \n*/\npublic static void destroyDirectByteBuffer(ByteBuffer toBeDestroyed)\n    throws IllegalArgumentException, IllegalAccessException,\n    InvocationTargetException, SecurityException, NoSuchMethodException {\n\n  Preconditions.checkArgument(toBeDestroyed.isDirect(),\n      \"toBeDestroyed isn't direct!\");\n\n  Method cleanerMethod = toBeDestroyed.getClass().getMethod(\"cleaner\");\n  cleanerMethod.setAccessible(true);\n  Object cleaner = cleanerMethod.invoke(toBeDestroyed);\n  Method cleanMethod = cleaner.getClass().getMethod(\"clean\");\n  cleanMethod.setAccessible(true);\n  cleanMethod.invoke(cleaner);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1842243,"reputation":1676,"user_id":1671431,"accept_rate":89,"display_name":"Antoine CHAMBILLE"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1381236037,"creation_date":1381236037,"answer_id":19247969,"question_id":1854398,"body_markdown":"Here is a refined implementation that will work for any direct buffer:\r\n\r\n\tpublic static void destroyBuffer(Buffer buffer) {\r\n\t\tif(buffer.isDirect()) {\r\n\t\t\ttry {\r\n\t\t\t\tif(!buffer.getClass().getName().equals(&quot;java.nio.DirectByteBuffer&quot;)) {\r\n\t\t\t\t\tField attField = buffer.getClass().getDeclaredField(&quot;att&quot;);\r\n\t\t\t\t\tattField.setAccessible(true);\r\n\t\t\t\t\tbuffer = (Buffer) attField.get(buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tMethod cleanerMethod = buffer.getClass().getMethod(&quot;cleaner&quot;);\r\n\t\t\t\tcleanerMethod.setAccessible(true);\r\n\t\t\t\tObject cleaner = cleanerMethod.invoke(buffer);\r\n\t\t\t\tMethod cleanMethod = cleaner.getClass().getMethod(&quot;clean&quot;);\r\n\t\t\t\tcleanMethod.setAccessible(true);\r\n\t\t\t\tcleanMethod.invoke(cleaner);\r\n\t\t\t} catch(Exception e) {\r\n\t\t\t\tthrow new QuartetRuntimeException(&quot;Could not destroy direct buffer &quot; + buffer, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How to garbage collect a direct buffer in Java","body":"<p>Here is a refined implementation that will work for any direct buffer:</p>\n\n<pre><code>public static void destroyBuffer(Buffer buffer) {\n    if(buffer.isDirect()) {\n        try {\n            if(!buffer.getClass().getName().equals(\"java.nio.DirectByteBuffer\")) {\n                Field attField = buffer.getClass().getDeclaredField(\"att\");\n                attField.setAccessible(true);\n                buffer = (Buffer) attField.get(buffer);\n            }\n\n            Method cleanerMethod = buffer.getClass().getMethod(\"cleaner\");\n            cleanerMethod.setAccessible(true);\n            Object cleaner = cleanerMethod.invoke(buffer);\n            Method cleanMethod = cleaner.getClass().getMethod(\"clean\");\n            cleanMethod.setAccessible(true);\n            cleanMethod.invoke(cleaner);\n        } catch(Exception e) {\n            throw new QuartetRuntimeException(\"Could not destroy direct buffer \" + buffer, e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":677225,"reputation":6228,"user_id":676877,"display_name":"Brett Okken"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388678831,"creation_date":1388678831,"answer_id":20886832,"question_id":1854398,"body_markdown":"As long as you are relying on sun (oracle) specific implementation, a better choice than trying to change the visibility of java.nio.DirectByteBuffer is to use the sun.nio.ch.DirectBuffer interface via reflections.\r\n\r\n\r\n    /**\r\n     * Sun specific mechanisms to clean up resources associated with direct byte buffers.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private static final Class&lt;? extends ByteBuffer&gt; SUN_DIRECT_BUFFER = (Class&lt;? extends ByteBuffer&gt;) lookupClassQuietly(&quot;sun.nio.ch.DirectBuffer&quot;);\r\n    \r\n    private static final Method SUN_BUFFER_CLEANER;\r\n    \r\n    private static final Method SUN_CLEANER_CLEAN;\r\n    \r\n    static\r\n    {\r\n        Method bufferCleaner = null;\r\n        Method cleanerClean = null;\r\n        try\r\n        {\r\n            // operate under the assumption that if the sun direct buffer class exists,\r\n            // all of the sun classes exist\r\n            if (SUN_DIRECT_BUFFER != null)\r\n            {\r\n                bufferCleaner = SUN_DIRECT_BUFFER.getMethod(&quot;cleaner&quot;, (Class[]) null);\r\n                Class&lt;?&gt; cleanClazz = lookupClassQuietly(&quot;sun.misc.Cleaner&quot;);\r\n                cleanerClean = cleanClazz.getMethod(&quot;clean&quot;, (Class[]) null);\r\n            }\r\n        }\r\n        catch (Throwable t)\r\n        {\r\n            t.printStackTrace();\r\n        }\r\n        SUN_BUFFER_CLEANER = bufferCleaner;\r\n        SUN_CLEANER_CLEAN = cleanerClean;\r\n    }\r\n    \r\n    public static void releaseDirectByteBuffer(ByteBuffer buffer)\r\n    {\r\n        if (SUN_DIRECT_BUFFER != null &amp;&amp; SUN_DIRECT_BUFFER.isAssignableFrom(buffer.getClass()))\r\n        {\r\n            try\r\n            {\r\n                Object cleaner = SUN_BUFFER_CLEANER.invoke(buffer, (Object[]) null);\r\n                SUN_CLEANER_CLEAN.invoke(cleaner, (Object[]) null);\r\n            }\r\n            catch (Throwable t)\r\n            {\r\n                logger.trace(&quot;Exception occurred attempting to clean up Sun specific DirectByteBuffer.&quot;, t);\r\n            }\r\n        }\r\n    }","title":"How to garbage collect a direct buffer in Java","body":"<p>As long as you are relying on sun (oracle) specific implementation, a better choice than trying to change the visibility of java.nio.DirectByteBuffer is to use the sun.nio.ch.DirectBuffer interface via reflections.</p>\n\n<pre><code>/**\n * Sun specific mechanisms to clean up resources associated with direct byte buffers.\n */\n@SuppressWarnings(\"unchecked\")\nprivate static final Class&lt;? extends ByteBuffer&gt; SUN_DIRECT_BUFFER = (Class&lt;? extends ByteBuffer&gt;) lookupClassQuietly(\"sun.nio.ch.DirectBuffer\");\n\nprivate static final Method SUN_BUFFER_CLEANER;\n\nprivate static final Method SUN_CLEANER_CLEAN;\n\nstatic\n{\n    Method bufferCleaner = null;\n    Method cleanerClean = null;\n    try\n    {\n        // operate under the assumption that if the sun direct buffer class exists,\n        // all of the sun classes exist\n        if (SUN_DIRECT_BUFFER != null)\n        {\n            bufferCleaner = SUN_DIRECT_BUFFER.getMethod(\"cleaner\", (Class[]) null);\n            Class&lt;?&gt; cleanClazz = lookupClassQuietly(\"sun.misc.Cleaner\");\n            cleanerClean = cleanClazz.getMethod(\"clean\", (Class[]) null);\n        }\n    }\n    catch (Throwable t)\n    {\n        t.printStackTrace();\n    }\n    SUN_BUFFER_CLEANER = bufferCleaner;\n    SUN_CLEANER_CLEAN = cleanerClean;\n}\n\npublic static void releaseDirectByteBuffer(ByteBuffer buffer)\n{\n    if (SUN_DIRECT_BUFFER != null &amp;&amp; SUN_DIRECT_BUFFER.isAssignableFrom(buffer.getClass()))\n    {\n        try\n        {\n            Object cleaner = SUN_BUFFER_CLEANER.invoke(buffer, (Object[]) null);\n            SUN_CLEANER_CLEAN.invoke(cleaner, (Object[]) null);\n        }\n        catch (Throwable t)\n        {\n            logger.trace(\"Exception occurred attempting to clean up Sun specific DirectByteBuffer.\", t);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637098295,"creation_date":1637097680,"answer_id":69996167,"question_id":1854398,"body_markdown":"There are many caveats missing from the existing answers to this question, e.g. requirements when running under JDK 9+ for the module descriptor to contain `requires jdk.unsupported`, the inability to access `MappedByteBuffer.cleaner()` without workarounds under JDK 16+ due to the enforcement of strong encapsulation, the requirements if running with a `SecurityManager` under JDK 7-16, etc. I go over the full details here:\r\n\r\nhttps://stackoverflow.com/a/54046774/3950982","title":"How to garbage collect a direct buffer in Java","body":"<p>There are many caveats missing from the existing answers to this question, e.g. requirements when running under JDK 9+ for the module descriptor to contain <code>requires jdk.unsupported</code>, the inability to access <code>MappedByteBuffer.cleaner()</code> without workarounds under JDK 16+ due to the enforcement of strong encapsulation, the requirements if running with a <code>SecurityManager</code> under JDK 7-16, etc. I go over the full details here:</p>\n<p><a href=\"https://stackoverflow.com/a/54046774/3950982\">https://stackoverflow.com/a/54046774/3950982</a></p>\n"}],"owner":{"account_id":56395,"reputation":1400,"user_id":168930,"accept_rate":56,"display_name":"mglmnc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48826,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":1854406,"answer_count":7,"score":32,"last_activity_date":1637098295,"creation_date":1260075087,"question_id":1854398,"body_markdown":"I have a memory leak that I have isolated to incorrectly disposed direct byte buffers.\r\n\r\n&lt;pre&gt;ByteBuffer buff = ByteBuffer.allocateDirect(7777777);&lt;/pre&gt;\r\n\r\nThe GC collects the objects that harbor these buffers but does not dispose of the buffer itself. If I instantiate enough of the transient objects containing buffers, I get this encouraging message:\r\n\r\n&lt;pre&gt;java.lang.OutOfMemoryError: Direct buffer memory&lt;/pre&gt;\r\n\r\nI have been searching up this problem and apparently \r\n\r\n&lt;pre&gt;buff.clear();&lt;/pre&gt;\r\n\r\nand\r\n\r\n&lt;pre&gt;System.gc();&lt;/pre&gt;\r\n\r\ndo not work.\r\n","title":"How to garbage collect a direct buffer in Java","body":"<p>I have a memory leak that I have isolated to incorrectly disposed direct byte buffers.</p>\n\n<pre>ByteBuffer buff = ByteBuffer.allocateDirect(7777777);</pre>\n\n<p>The GC collects the objects that harbor these buffers but does not dispose of the buffer itself. If I instantiate enough of the transient objects containing buffers, I get this encouraging message:</p>\n\n<pre>java.lang.OutOfMemoryError: Direct buffer memory</pre>\n\n<p>I have been searching up this problem and apparently </p>\n\n<pre>buff.clear();</pre>\n\n<p>and</p>\n\n<pre>System.gc();</pre>\n\n<p>do not work.</p>\n"},{"tags":["java","wildfly","derby"],"answers":[{"tags":[],"owner":{"account_id":23359128,"reputation":31,"user_id":17431663,"display_name":"Stiven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637098089,"creation_date":1637098089,"answer_id":69996239,"question_id":69995007,"body_markdown":"Ok. It turned out all i needed to do is to add derbyclient.jar into CLASSPATH in windows 7. And copy via what ever method derbyclient.jar to Wildfly modules folder.","title":"Fail to register embedded Derby driver into WildFly 25","body":"<p>Ok. It turned out all i needed to do is to add derbyclient.jar into CLASSPATH in windows 7. And copy via what ever method derbyclient.jar to Wildfly modules folder.</p>\n"}],"owner":{"account_id":23359128,"reputation":31,"user_id":17431663,"display_name":"Stiven"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637098089,"creation_date":1637090867,"question_id":69995007,"body_markdown":"I have a task from my teacher to make Wildfly+embedded Debry server, but on windows, Wildfly just refusing to register the embedded driver.\r\n\r\nI have derby jars and module.xml inside WildFly modules folder. But when im trying to register them as modules via Jboss-cli.bat, with commands:\r\n\r\n    `/subsystem=datasources/jdbc-driver=derby-embedded:add(driver-name=derby-embedded, \\\r\n     driver-module-name=org.apache.derby, \\\r\n     driver-class-name=org.apache.derby.jdbc.EmbeddedDriver, \\\r\n     driver-datasource-class-name=org.apache.derby.jdbc.EmbeddedDataSource, \\\r\n     driver-xa-datasource-class-name=org.apache.derby.jdbc.EmbeddedXADataSource)`\r\n\r\n\r\nAll what i getting in server log is:\r\n\r\n   \r\n\r\n     21:14:49,310 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;clinit&gt;(EmbeddedDriver.java:95)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \t... 39 more\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;init&gt;(EmbeddedDriver.java:102)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \t... 39 more\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.AutoloadedDriver.getDriverModule(AutoloadedDriver.java:217)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getDriverModule(EmbeddedDriver.java:184)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getMajorVersion(EmbeddedDriver.java:145)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.startDriverServices(JdbcDriverAdd.java:179)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:169)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \t... 37 more\r\n        \r\n        21:14:49,323 WARN  [org.jboss.as.connector.subsystems.datasources] (management-handler-thread - 1) WFLYJCA0003: Unable to instantiate driver class &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;: java.lang.NullPointerException: Cannot invoke &quot;java.sql.Driver.getMajorVersion()&quot; because the return value of &quot;org.apache.derby.jdbc.EmbeddedDriver.getDriverModule()&quot; is null\r\n        21:14:49,324 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\r\n            (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\r\n            (&quot;jdbc-driver&quot; =&gt; &quot;derby-embedded&quot;)\r\n        ]) - failure description: &quot;WFLYJCA0034: Unable to instantiate driver class \\&quot;org.apache.derby.jdbc.EmbeddedDriver\\&quot;. See log (WARN) for more details&quot;\r\n\r\n\r\nWhat can cause this problem? Derby version is 10.15.2.0, WildFly wildfly-25.0.1.Final. \r\n\r\n\r\n","title":"Fail to register embedded Derby driver into WildFly 25","body":"<p>I have a task from my teacher to make Wildfly+embedded Debry server, but on windows, Wildfly just refusing to register the embedded driver.</p>\n<p>I have derby jars and module.xml inside WildFly modules folder. But when im trying to register them as modules via Jboss-cli.bat, with commands:</p>\n<pre><code>`/subsystem=datasources/jdbc-driver=derby-embedded:add(driver-name=derby-embedded, \\\n driver-module-name=org.apache.derby, \\\n driver-class-name=org.apache.derby.jdbc.EmbeddedDriver, \\\n driver-datasource-class-name=org.apache.derby.jdbc.EmbeddedDataSource, \\\n driver-xa-datasource-class-name=org.apache.derby.jdbc.EmbeddedXADataSource)`\n</code></pre>\n<p>All what i getting in server log is:</p>\n<pre><code> 21:14:49,310 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;clinit&gt;(EmbeddedDriver.java:95)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.Thread.run(Thread.java:833)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     ... 39 more\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;init&gt;(EmbeddedDriver.java:102)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.Thread.run(Thread.java:833)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     ... 39 more\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.AutoloadedDriver.getDriverModule(AutoloadedDriver.java:217)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getDriverModule(EmbeddedDriver.java:184)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getMajorVersion(EmbeddedDriver.java:145)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.startDriverServices(JdbcDriverAdd.java:179)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:169)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.Thread.run(Thread.java:833)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     ... 37 more\n    \n    21:14:49,323 WARN  [org.jboss.as.connector.subsystems.datasources] (management-handler-thread - 1) WFLYJCA0003: Unable to instantiate driver class &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;: java.lang.NullPointerException: Cannot invoke &quot;java.sql.Driver.getMajorVersion()&quot; because the return value of &quot;org.apache.derby.jdbc.EmbeddedDriver.getDriverModule()&quot; is null\n    21:14:49,324 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\n        (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\n        (&quot;jdbc-driver&quot; =&gt; &quot;derby-embedded&quot;)\n    ]) - failure description: &quot;WFLYJCA0034: Unable to instantiate driver class \\&quot;org.apache.derby.jdbc.EmbeddedDriver\\&quot;. See log (WARN) for more details&quot;\n</code></pre>\n<p>What can cause this problem? Derby version is 10.15.2.0, WildFly wildfly-25.0.1.Final.</p>\n"},{"tags":["java","hadoop","hdfs","hadoop3"],"comments":[{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586011015,"post_id":61029653,"comment_id":107970179,"body_markdown":"Datanode is not running. Could you please update the post with your cluster setup, configuration files and the output of `jps` command.","body":"Datanode is not running. Could you please update the post with your cluster setup, configuration files and the output of <code>jps</code> command."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586013414,"post_id":61029653,"comment_id":107971156,"body_markdown":"cmd:-jps  \n 16832 NodeManager\n11716\n5556 ResourceManager\n18280 NameNode\n11708 Jps","body":"cmd:-jps    16832 NodeManager 11716 5556 ResourceManager 18280 NameNode 11708 Jps"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586013873,"post_id":61029653,"comment_id":107971330,"body_markdown":"As you can see, datanode and secondary namenode daemons aren&#39;t running. Could you post the `hdfs-site.xml` and `core-site.xml`","body":"As you can see, datanode and secondary namenode daemons aren&#39;t running. Could you post the <code>hdfs-site.xml</code> and <code>core-site.xml</code>"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586015014,"post_id":61029653,"comment_id":107971780,"body_markdown":"core-site.xml:\n&lt;configuration&gt;\n   &lt;property&gt;\n \n       &lt;name&gt;fs.default.name&lt;/name&gt;\n \n       &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;\n \n   &lt;/property&gt;\n&lt;property&gt;\n \n       &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n       &lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt;\n \n   &lt;/property&gt;\n   \n&lt;/configuration&gt;","body":"core-site.xml: &lt;configuration&gt;    &lt;property&gt;          &lt;name&gt;fs.default.name&lt;/name&gt;          &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;      &lt;/property&gt; &lt;property&gt;          &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;        &lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt;      &lt;/property&gt;     &lt;/configuration&gt;"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586015064,"post_id":61029653,"comment_id":107971797,"body_markdown":"hdfs-site.xml:\n&lt;configuration&gt;\n\t&lt;property&gt;\n\t\t&lt;name&gt;dfs.replication&lt;/name&gt;\n\t\t&lt;value&gt;1&lt;/value&gt;\n\t&lt;/property&gt;\n\t&lt;property&gt;\n\t\t&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;\n\t\t&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt;\n\t&lt;/property&gt;\n\t&lt;property&gt;\n\t\t&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;\n\t\t&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt;\n\t&lt;/property&gt;\n         &lt;property&gt;\n\t\t&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt;\n\t\t&lt;value&gt;0&lt;/value&gt;\n\t&lt;/property&gt;\n&lt;/configuration&gt;","body":"hdfs-site.xml: &lt;configuration&gt; \t&lt;property&gt; \t\t&lt;name&gt;dfs.replication&lt;/name&gt; \t\t&lt;value&gt;1&lt;/value&gt; \t&lt;/property&gt; \t&lt;property&gt; \t\t&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; \t\t&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt; \t&lt;/property&gt; \t&lt;property&gt; \t\t&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; \t\t&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt; \t&lt;/property&gt;          &lt;property&gt; \t\t&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt; \t\t&lt;value&gt;0&lt;/value&gt; \t&lt;/property&gt; &lt;/configuration&gt;"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586015733,"post_id":61029653,"comment_id":107972047,"body_markdown":"Can you paste the datanode logs in pastebin.com and share!","body":"Can you paste the datanode logs in pastebin.com and share!"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586017138,"post_id":61029653,"comment_id":107972601,"body_markdown":"https://pastebin.com/5j4STmCJ","body":"<a href=\"https://pastebin.com/5j4STmCJ\" rel=\"nofollow noreferrer\">pastebin.com/5j4STmCJ</a>"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586018155,"post_id":61029653,"comment_id":107973027,"body_markdown":"Did you format the namenode later at any point while your cluster was functional? Or to put it in other words, how many times have you formatted the namenode?","body":"Did you format the namenode later at any point while your cluster was functional? Or to put it in other words, how many times have you formatted the namenode?"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586018308,"post_id":61029653,"comment_id":107973098,"body_markdown":"two time i did that because of some error was occuring that time.","body":"two time i did that because of some error was occuring that time."},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586018376,"post_id":61029653,"comment_id":107973123,"body_markdown":"Okay, can you post the log for secondary namenode in pastebin.","body":"Okay, can you post the log for secondary namenode in pastebin."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586018444,"post_id":61029653,"comment_id":107973150,"body_markdown":"where will i find secondary namenode ?? i am not able to locate the directory","body":"where will i find secondary namenode ?? i am not able to locate the directory"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586018884,"post_id":61029653,"comment_id":107973300,"body_markdown":"Logs will be in the same directory as the one where datanode logs were written.","body":"Logs will be in the same directory as the one where datanode logs were written."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586019154,"post_id":61029653,"comment_id":107973407,"body_markdown":"I still could not locate it\nI got a another version file in datanode\nnamespaceID=1442950721\ncTime=1585992740024\nblockpoolID=BP-1166567974-192.168.1.6-1585992740024\nlayoutVersion=-57","body":"I still could not locate it I got a another version file in datanode namespaceID=1442950721 cTime=1585992740024 blockpoolID=BP-1166567974-192.168.1.6-1585992740024 layoutVersion=-57"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586019387,"post_id":61029653,"comment_id":107973502,"body_markdown":"Okay, I will update the answer.","body":"Okay, I will update the answer."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":1,"creation_date":1586019543,"post_id":61029653,"comment_id":107973570,"body_markdown":"this complete datanode logs. https://pastebin.com/0vJbN8HS","body":"this complete datanode logs. <a href=\"https://pastebin.com/0vJbN8HS\" rel=\"nofollow noreferrer\">pastebin.com/0vJbN8HS</a>"}],"answers":[{"tags":[],"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1586020626,"creation_date":1586020626,"answer_id":61031871,"question_id":61029653,"body_markdown":"The Mapreduce job fails because it is unable to access HDFS since `There are 0 datanode(s) running and 0 node(s) are excluded in this operation.` \r\n\r\nAnd from the datanode logs, it is understood that the `Datanode` daemon is unable to register itself with the HDFS cluster due to `Incompatible clusterIDs`. \r\n\r\nWhen a namenode is formatted (during installation and setup), a `clusterID` is generated and this clusterID is stored in the `VERSION` file of each daemon when they initialize. This clusterID acts as the identifier for the datanodes, letting them to rejoin the cluster whenever they are stopped and started. \r\n\r\nIncompatible clusterIDs among the nodes can happen when the namenode is formatted on an active cluster and the other daemons are not re-initialized. \r\n\r\nTo get the cluster back in form, \r\n\r\n 1. Stop the cluster \r\n 2. Delete the contents of the following\r\n    directories `C:\\hadoop\\hdfstmp`, `C:\\hadoop\\data\\namenode`,\r\n    `C:\\hadoop\\data\\datanode`\r\n 3. Format the namenode\r\n 4. Start the cluster\r\n\r\nYou have recopy the data required for the Mapreduce job and run the job.\r\n\r\n","title":"Exception in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException) for hadoop 3.1.3","body":"<p>The Mapreduce job fails because it is unable to access HDFS since <code>There are 0 datanode(s) running and 0 node(s) are excluded in this operation.</code> </p>\n\n<p>And from the datanode logs, it is understood that the <code>Datanode</code> daemon is unable to register itself with the HDFS cluster due to <code>Incompatible clusterIDs</code>. </p>\n\n<p>When a namenode is formatted (during installation and setup), a <code>clusterID</code> is generated and this clusterID is stored in the <code>VERSION</code> file of each daemon when they initialize. This clusterID acts as the identifier for the datanodes, letting them to rejoin the cluster whenever they are stopped and started. </p>\n\n<p>Incompatible clusterIDs among the nodes can happen when the namenode is formatted on an active cluster and the other daemons are not re-initialized. </p>\n\n<p>To get the cluster back in form, </p>\n\n<ol>\n<li>Stop the cluster </li>\n<li>Delete the contents of the following\ndirectories <code>C:\\hadoop\\hdfstmp</code>, <code>C:\\hadoop\\data\\namenode</code>,\n<code>C:\\hadoop\\data\\datanode</code></li>\n<li>Format the namenode</li>\n<li>Start the cluster</li>\n</ol>\n\n<p>You have recopy the data required for the Mapreduce job and run the job.</p>\n"},{"tags":[],"owner":{"account_id":3012144,"reputation":2604,"user_id":5060792,"accept_rate":53,"display_name":"Clay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637098024,"creation_date":1637098024,"answer_id":69996226,"question_id":61029653,"body_markdown":"I do not have the option to shut down and restart my cluster.  However, running the following command solved the problem without causing any other issue that I could see.\r\n\r\n    hdfs dfsadmin -safemode leave\r\n\r\nSee the following: \r\n1. https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#DFSAdmin_Command\r\n1. https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Safemode\r\n\r\n\r\n\r\n","title":"Exception in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException) for hadoop 3.1.3","body":"<p>I do not have the option to shut down and restart my cluster.  However, running the following command solved the problem without causing any other issue that I could see.</p>\n<pre><code>hdfs dfsadmin -safemode leave\n</code></pre>\n<p>See the following:</p>\n<ol>\n<li><a href=\"https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#DFSAdmin_Command\" rel=\"nofollow noreferrer\">https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#DFSAdmin_Command</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Safemode\" rel=\"nofollow noreferrer\">https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Safemode</a></li>\n</ol>\n"}],"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3739,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61031871,"answer_count":2,"score":1,"last_activity_date":1637098024,"creation_date":1586010844,"question_id":61029653,"body_markdown":"I am trying to run a mapreduce job but I am getting error for Hadoop-3.1.3 \r\n```\r\nhadoop jar WordCount.jar WordcountDemo.WordCount  /mapwork/Mapwork /r_out\r\n```\r\n**Error**\r\n```\r\n2020-04-04 19:59:11,379 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\r\n2020-04-04 19:59:12,499 WARN mapreduce.JobResourceUploader: Hadoop command-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.\r\n2020-04-04 19:59:12,569 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\r\n2020-04-04 19:59:12,727 WARN hdfs.DataStreamer: DataStreamer Exception\r\norg.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\r\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\r\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\r\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\r\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at javax.security.auth.Subject.doAs(Subject.java:422)\r\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\r\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\r\n\r\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\r\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\r\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\r\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\r\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\r\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\r\n2020-04-04 19:59:12,734 INFO mapreduce.JobSubmitter: Cleaning up the staging area /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\r\nException in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\r\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\r\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\r\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\r\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at javax.security.auth.Subject.doAs(Subject.java:422)\r\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\r\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\r\n\r\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\r\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\r\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\r\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\r\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\r\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\r\n```\r\n\r\n**Update** (from comments):\r\n\r\n`core-site.xml`\r\n```\r\n&lt;configuration&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;fs.default.name&lt;/name&gt; \r\n&lt;value&gt;hdfs://localhost:9000&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; \r\n&lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;/configuration&gt; \r\n```\r\n`hdfs-site.xml`\r\n```\r\n&lt;configuration&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.replication&lt;/name&gt; \r\n&lt;value&gt;1&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; \r\n&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; \r\n&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt; \r\n&lt;value&gt;0&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;/configuration&gt;\r\n```\r\n\r\nOutput of `jps`:\r\n```\r\n16832 NodeManager \r\n5556 ResourceManager \r\n18280 NameNode \r\n11708 Jps\r\n```\r\n\r\n`datanode` error log:\r\n```\r\n2020-04-04 21:42:25,150 WARN common.Storage: Failed to add storage directory [DISK]file:/C:/hadoop/data/datanode\r\njava.io.IOException: Incompatible clusterIDs in C:\\hadoop\\data\\datanode: namenode clusterID = CID-199fd5c5-1f1d-4c44-9e39-80995486695e; datanode clusterID = CID-16d0af22-57e1-4531-a5c8-4bf3eefd351d\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.doTransition(DataStorage.java:744)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadStorageDirectory(DataStorage.java:294)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadDataStorage(DataStorage.java:407)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.addStorageLocations(DataStorage.java:387)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:559)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n2020-04-04 21:42:25,156 ERROR datanode.DataNode: Initialization failed for Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000. Exiting.\r\njava.io.IOException: All specified directories have failed to load.\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:560)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n2020-04-04 21:42:25,158 WARN datanode.DataNode: Ending block pool service for: Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000\r\n2020-04-04 21:42:25,261 INFO datanode.DataNode: Removed Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474)\r\n2020-04-04 21:42:27,274 WARN datanode.DataNode: Exiting Datanode\r\n```","title":"Exception in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException) for hadoop 3.1.3","body":"<p>I am trying to run a mapreduce job but I am getting error for Hadoop-3.1.3 </p>\n\n<pre><code>hadoop jar WordCount.jar WordcountDemo.WordCount  /mapwork/Mapwork /r_out\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>2020-04-04 19:59:11,379 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\n2020-04-04 19:59:12,499 WARN mapreduce.JobResourceUploader: Hadoop command-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.\n2020-04-04 19:59:12,569 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\n2020-04-04 19:59:12,727 WARN hdfs.DataStreamer: DataStreamer Exception\norg.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:422)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\n\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\n2020-04-04 19:59:12,734 INFO mapreduce.JobSubmitter: Cleaning up the staging area /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\nException in thread \"main\" org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:422)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\n\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\n</code></pre>\n\n<p><strong>Update</strong> (from comments):</p>\n\n<p><code>core-site.xml</code></p>\n\n<pre><code>&lt;configuration&gt; \n&lt;property&gt; \n&lt;name&gt;fs.default.name&lt;/name&gt; \n&lt;value&gt;hdfs://localhost:9000&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; \n&lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt; \n&lt;/property&gt; \n&lt;/configuration&gt; \n</code></pre>\n\n<p><code>hdfs-site.xml</code></p>\n\n<pre><code>&lt;configuration&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.replication&lt;/name&gt; \n&lt;value&gt;1&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; \n&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; \n&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt; \n&lt;value&gt;0&lt;/value&gt; \n&lt;/property&gt; \n&lt;/configuration&gt;\n</code></pre>\n\n<p>Output of <code>jps</code>:</p>\n\n<pre><code>16832 NodeManager \n5556 ResourceManager \n18280 NameNode \n11708 Jps\n</code></pre>\n\n<p><code>datanode</code> error log:</p>\n\n<pre><code>2020-04-04 21:42:25,150 WARN common.Storage: Failed to add storage directory [DISK]file:/C:/hadoop/data/datanode\njava.io.IOException: Incompatible clusterIDs in C:\\hadoop\\data\\datanode: namenode clusterID = CID-199fd5c5-1f1d-4c44-9e39-80995486695e; datanode clusterID = CID-16d0af22-57e1-4531-a5c8-4bf3eefd351d\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.doTransition(DataStorage.java:744)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadStorageDirectory(DataStorage.java:294)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadDataStorage(DataStorage.java:407)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.addStorageLocations(DataStorage.java:387)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:559)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\n        at java.lang.Thread.run(Thread.java:748)\n2020-04-04 21:42:25,156 ERROR datanode.DataNode: Initialization failed for Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000. Exiting.\njava.io.IOException: All specified directories have failed to load.\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:560)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\n        at java.lang.Thread.run(Thread.java:748)\n2020-04-04 21:42:25,158 WARN datanode.DataNode: Ending block pool service for: Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000\n2020-04-04 21:42:25,261 INFO datanode.DataNode: Removed Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474)\n2020-04-04 21:42:27,274 WARN datanode.DataNode: Exiting Datanode\n</code></pre>\n"},{"tags":["java","memory-mapped-files"],"comments":[{"owner":{"account_id":98784,"reputation":10491,"user_id":267197,"accept_rate":68,"display_name":"dma_k"},"score":2,"creation_date":1337178946,"post_id":2972986,"comment_id":13763860,"body_markdown":"I hit the same problem painfully. In my case I was trying to map thousands of files into the memory and it results `OutOfMemoryError`, which I believe is the result of exhausted file handlers. Having no instrument to unmap leads to unpredictive behaviour, even though map will try to `sleep(100)` &amp; `System.gc()` on `OutOfMemoryError` − it just postpones the convulsions.","body":"I hit the same problem painfully. In my case I was trying to map thousands of files into the memory and it results <code>OutOfMemoryError</code>, which I believe is the result of exhausted file handlers. Having no instrument to unmap leads to unpredictive behaviour, even though map will try to <code>sleep(100)</code> &amp; <code>System.gc()</code> on <code>OutOfMemoryError</code> − it just postpones the convulsions."}],"answers":[{"tags":[],"owner":{"account_id":38846,"reputation":29745,"user_id":111777,"accept_rate":82,"display_name":"Edward Dale"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1275645493,"creation_date":1275645493,"answer_id":2973059,"question_id":2972986,"body_markdown":"From the `MappedByteBuffer` javadoc:\r\n\r\n&gt;  A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected. \r\n\r\nTry calling `System.gc()`? Even that&#39;s only a suggestion to the VM.\r\n\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>From the <code>MappedByteBuffer</code> javadoc:</p>\n\n<blockquote>\n  <p>A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected. </p>\n</blockquote>\n\n<p>Try calling <code>System.gc()</code>? Even that's only a suggestion to the VM.</p>\n"},{"tags":[],"owner":{"account_id":18922,"reputation":4064,"user_id":43850,"accept_rate":100,"display_name":"BenM"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1275645546,"creation_date":1275645546,"answer_id":2973068,"question_id":2972986,"body_markdown":"The mapped memory is used until it is freed by the garbage collector.\r\n\r\nFrom [FileChannel][1] docs\r\n\r\n&gt; A mapping, once established, is not dependent upon the file channel that was used to create it. Closing the channel, in particular, has no effect upon the validity of the mapping.\r\n\r\nFrom [MappedByteBuffer][2] java doc\r\n\r\n&gt; A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected.\r\n\r\nSo I would suggest ensuring there are no remaining references to the mapped byte buffer and then requesting a garbage collection.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/nio/MappedByteBuffer.html","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>The mapped memory is used until it is freed by the garbage collector.</p>\n\n<p>From <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html\" rel=\"nofollow noreferrer\">FileChannel</a> docs</p>\n\n<blockquote>\n  <p>A mapping, once established, is not dependent upon the file channel that was used to create it. Closing the channel, in particular, has no effect upon the validity of the mapping.</p>\n</blockquote>\n\n<p>From <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/MappedByteBuffer.html\" rel=\"nofollow noreferrer\">MappedByteBuffer</a> java doc</p>\n\n<blockquote>\n  <p>A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected.</p>\n</blockquote>\n\n<p>So I would suggest ensuring there are no remaining references to the mapped byte buffer and then requesting a garbage collection.</p>\n"},{"tags":[],"owner":{"account_id":210105,"reputation":673,"user_id":461529,"display_name":"Timur Yusupov"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1477341107,"creation_date":1297985159,"answer_id":5036003,"question_id":2972986,"body_markdown":"Following static method could be used:\r\n\r\n    public static void unmap(MappedByteBuffer buffer)\r\n    {\r\n       sun.misc.Cleaner cleaner = ((DirectBuffer) buffer).cleaner();\r\n       cleaner.clean();\r\n    }\r\n\r\nBut this is unsafe solution because of following:  \r\n1) Lead to failures if someone use MappedByteBuffer after unmap  \r\n2) It relies on MappedByteBuffer implementation details  ","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>Following static method could be used:</p>\n\n<pre><code>public static void unmap(MappedByteBuffer buffer)\n{\n   sun.misc.Cleaner cleaner = ((DirectBuffer) buffer).cleaner();\n   cleaner.clean();\n}\n</code></pre>\n\n<p>But this is unsafe solution because of following:<br>\n1) Lead to failures if someone use MappedByteBuffer after unmap<br>\n2) It relies on MappedByteBuffer implementation details  </p>\n"},{"tags":[],"owner":{"account_id":358460,"reputation":5078,"user_id":699240,"display_name":"Mr Ed"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326964935,"creation_date":1326964935,"answer_id":8923594,"question_id":2972986,"body_markdown":"To work around this bug in Java, I had to do the following, which will work ok for small to medium-sized files:\r\n\r\n        // first open the file for random access\r\n        RandomAccessFile raf = new RandomAccessFile(file, &quot;r&quot;);\r\n\r\n        // extract a file channel\r\n        FileChannel channel = raf.getChannel();\r\n\r\n        // you can memory-map a byte-buffer, but it keeps the file locked\r\n        //ByteBuffer buf =\r\n        //        channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());\r\n\r\n        // or, since map locks the file... just read the whole file into memory\r\n        ByteBuffer buf = ByteBuffer.allocate((int)file.length());\r\n        int read = channel.read(buf);\r\n\r\n        // .... do something with buf\r\n\r\n        channel.force(false);  // doesn&#39;t help\r\n        channel.close();       // doesn&#39;t help\r\n        channel = null;        // doesn&#39;t help\r\n        buf = null;            // doesn&#39;t help\r\n        raf.close();           // try to make sure that this thing is closed!!!!!\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>To work around this bug in Java, I had to do the following, which will work ok for small to medium-sized files:</p>\n\n<pre><code>    // first open the file for random access\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n\n    // extract a file channel\n    FileChannel channel = raf.getChannel();\n\n    // you can memory-map a byte-buffer, but it keeps the file locked\n    //ByteBuffer buf =\n    //        channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());\n\n    // or, since map locks the file... just read the whole file into memory\n    ByteBuffer buf = ByteBuffer.allocate((int)file.length());\n    int read = channel.read(buf);\n\n    // .... do something with buf\n\n    channel.force(false);  // doesn't help\n    channel.close();       // doesn't help\n    channel = null;        // doesn't help\n    buf = null;            // doesn't help\n    raf.close();           // try to make sure that this thing is closed!!!!!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3122394,"reputation":1,"user_id":2641917,"display_name":"somedude"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1375357496,"creation_date":1375357496,"answer_id":17993147,"question_id":2972986,"body_markdown":"If the mapped file buffer object can be guaranteed to be eligible for garbage collection, you don&#39;t need to GC the whole VM to get the buffer&#39;s mapped memory to be released. You can call System.runFinalization() .  This will call the finalize() method on the mapped file buffer object (if it there are no references to it in your app threads) which will release the mapped memory.\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>If the mapped file buffer object can be guaranteed to be eligible for garbage collection, you don't need to GC the whole VM to get the buffer's mapped memory to be released. You can call System.runFinalization() .  This will call the finalize() method on the mapped file buffer object (if it there are no references to it in your app threads) which will release the mapped memory.</p>\n"},{"tags":[],"owner":{"account_id":327698,"reputation":5680,"user_id":650228,"accept_rate":78,"display_name":"kittylyst"},"down_vote_count":15,"up_vote_count":2,"is_accepted":false,"score":-13,"last_activity_date":1375714564,"creation_date":1375714564,"answer_id":18061291,"question_id":2972986,"body_markdown":"The correct solution here is to use try-with-resources. \r\n\r\nThis allows the creation of the Channel &amp; the other resources to be scoped to a block. Once the block exits, the Channel &amp; other resources are gone &amp; subsequently cannot be used (as nothing has a reference to them). \r\n\r\nThe memory-mapping still won&#39;t be undone until the next GC run, but at least there aren&#39;t any dangling references to it.","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>The correct solution here is to use try-with-resources. </p>\n\n<p>This allows the creation of the Channel &amp; the other resources to be scoped to a block. Once the block exits, the Channel &amp; other resources are gone &amp; subsequently cannot be used (as nothing has a reference to them). </p>\n\n<p>The memory-mapping still won't be undone until the next GC run, but at least there aren't any dangling references to it.</p>\n"},{"tags":[],"owner":{"account_id":62450,"reputation":10263,"user_id":185565,"accept_rate":91,"display_name":"Whome"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1546682199,"creation_date":1382093176,"answer_id":19447758,"question_id":2972986,"body_markdown":"[WinXP,SunJDK1.6] I had a mapped ByteBuffer taken from filechannel. After reading SO posts finally managed to call a cleaner through reflection without any sun.* package imports. No longer file lock is lingering.\r\n\r\n**edit** Added JDK9+ code(Luke Hutchison).\r\n\r\n\r\n\tprivate static void closeDirectBuffer(ByteBuffer cb) {\r\n\t\tif (cb==null || !cb.isDirect()) return;\r\n\t\t// we could use this type cast and call functions without reflection code,\r\n\t\t// but static import from sun.* package is risky for non-SUN virtual machine.\r\n\t\t//try { ((sun.nio.ch.DirectBuffer)cb).cleaner().clean(); } catch (Exception ex) { }\r\n\r\n\t\t// JavaSpecVer: 1.6, 1.7, 1.8, 9, 10\r\n\t\tboolean isOldJDK = System.getProperty(&quot;java.specification.version&quot;,&quot;99&quot;).startsWith(&quot;1.&quot;);\t\r\n\t\ttry {\r\n\t\t\tif (isOldJDK) {\r\n\t\t\t\tMethod cleaner = cb.getClass().getMethod(&quot;cleaner&quot;);\r\n\t\t\t\tcleaner.setAccessible(true);\r\n\t\t\t\tMethod clean = Class.forName(&quot;sun.misc.Cleaner&quot;).getMethod(&quot;clean&quot;);\r\n\t\t\t\tclean.setAccessible(true);\r\n\t\t\t\tclean.invoke(cleaner.invoke(cb));\r\n\t\t\t} else {\r\n\t\t\t\tClass unsafeClass;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tunsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n\t\t\t\t} catch(Exception ex) {\r\n\t\t\t\t\t// jdk.internal.misc.Unsafe doesn&#39;t yet have an invokeCleaner() method,\r\n\t\t\t\t\t// but that method should be added if sun.misc.Unsafe is removed.\r\n\t\t\t\t\tunsafeClass = Class.forName(&quot;jdk.internal.misc.Unsafe&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tMethod clean = unsafeClass.getMethod(&quot;invokeCleaner&quot;, ByteBuffer.class);\r\n\t\t\t\tclean.setAccessible(true);\r\n\t\t\t\tField theUnsafeField = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\r\n\t\t\t\ttheUnsafeField.setAccessible(true);\r\n\t\t\t\tObject theUnsafe = theUnsafeField.get(null);\r\n\t\t\t\tclean.invoke(theUnsafe, cb);\r\n\t\t\t}\r\n\t\t} catch(Exception ex) { }\r\n\t\tcb = null;\r\n\t}\r\n\r\n\r\n\r\nIdeas were taken from these posts.&lt;br/&gt;\r\n* https://stackoverflow.com/questions/2972986/how-to-unmap-a-file-from-memory-mapped-using-filechannel-in-java &lt;br/&gt;\r\n* https://stackoverflow.com/questions/8462200/examples-of-forcing-freeing-of-native-memory-direct-bytebuffer-has-allocated-us &lt;br/&gt;\r\n* https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40 &lt;br/&gt;\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>[WinXP,SunJDK1.6] I had a mapped ByteBuffer taken from filechannel. After reading SO posts finally managed to call a cleaner through reflection without any sun.* package imports. No longer file lock is lingering.</p>\n\n<p><strong>edit</strong> Added JDK9+ code(Luke Hutchison).</p>\n\n<pre><code>private static void closeDirectBuffer(ByteBuffer cb) {\n    if (cb==null || !cb.isDirect()) return;\n    // we could use this type cast and call functions without reflection code,\n    // but static import from sun.* package is risky for non-SUN virtual machine.\n    //try { ((sun.nio.ch.DirectBuffer)cb).cleaner().clean(); } catch (Exception ex) { }\n\n    // JavaSpecVer: 1.6, 1.7, 1.8, 9, 10\n    boolean isOldJDK = System.getProperty(\"java.specification.version\",\"99\").startsWith(\"1.\");  \n    try {\n        if (isOldJDK) {\n            Method cleaner = cb.getClass().getMethod(\"cleaner\");\n            cleaner.setAccessible(true);\n            Method clean = Class.forName(\"sun.misc.Cleaner\").getMethod(\"clean\");\n            clean.setAccessible(true);\n            clean.invoke(cleaner.invoke(cb));\n        } else {\n            Class unsafeClass;\n            try {\n                unsafeClass = Class.forName(\"sun.misc.Unsafe\");\n            } catch(Exception ex) {\n                // jdk.internal.misc.Unsafe doesn't yet have an invokeCleaner() method,\n                // but that method should be added if sun.misc.Unsafe is removed.\n                unsafeClass = Class.forName(\"jdk.internal.misc.Unsafe\");\n            }\n            Method clean = unsafeClass.getMethod(\"invokeCleaner\", ByteBuffer.class);\n            clean.setAccessible(true);\n            Field theUnsafeField = unsafeClass.getDeclaredField(\"theUnsafe\");\n            theUnsafeField.setAccessible(true);\n            Object theUnsafe = theUnsafeField.get(null);\n            clean.invoke(theUnsafe, cb);\n        }\n    } catch(Exception ex) { }\n    cb = null;\n}\n</code></pre>\n\n<p>Ideas were taken from these posts.<br/>\n* <a href=\"https://stackoverflow.com/questions/2972986/how-to-unmap-a-file-from-memory-mapped-using-filechannel-in-java\">How to unmap a file from memory mapped using FileChannel in java?</a> <br/>\n* <a href=\"https://stackoverflow.com/questions/8462200/examples-of-forcing-freeing-of-native-memory-direct-bytebuffer-has-allocated-us\">Examples of forcing freeing of native memory direct ByteBuffer has allocated, using sun.misc.Unsafe?</a> <br/>\n* <a href=\"https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40\" rel=\"noreferrer\">https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40</a> <br/></p>\n"},{"tags":[],"owner":{"account_id":2868895,"reputation":299,"user_id":2462633,"display_name":"Dmytro Voloshyn"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1437668514,"creation_date":1437668514,"answer_id":31592947,"question_id":2972986,"body_markdown":"sun.misc.Cleaner javadoc says:\r\n&gt; General-purpose phantom-reference-based cleaners. \r\nCleaners are a lightweight and more robust alternative to finalization. They are lightweight because they are not created by the VM and thus do not require a JNI upcall to be created, and because their cleanup code is invoked directly by the reference-handler thread rather than by the finalizer thread. They are more robust because they use phantom references, the weakest type of reference object, thereby avoiding the nasty ordering problems inherent to finalization. \r\nA cleaner tracks a referent object and encapsulates a thunk of arbitrary cleanup code. Some time after the GC detects that a cleaner&#39;s referent has become phantom-reachable, the reference-handler thread will run the cleaner. Cleaners may also be invoked directly; they are thread safe and ensure that they run their thunks at most once. \r\nCleaners are not a replacement for finalization. They should be used only when the cleanup code is extremely simple and straightforward. Nontrivial cleaners are inadvisable since they risk blocking the reference-handler thread and delaying further cleanup and finalization. \r\n\r\nRunning System.gc() is acceptable solution if your buffers total size is small, but if I was mapping gigabytes of files I would try to implement like this:\r\n\r\n    ((DirectBuffer) buffer).cleaner().clean()\r\n\r\nBut! Make sure you don&#39;t access that buffer after cleaning or you will end up with:\r\n\r\n&gt; A fatal error has been detected by the Java Runtime Environment: EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000002bcf700,\r\n&gt; pid=7592, tid=10184 JRE version: Java(TM) SE Runtime Environment\r\n&gt; (8.0_40-b25) (build 1.8.0_40-b25) Java VM: Java HotSpot(TM) 64-Bit\r\n&gt; Server VM (25.40-b25 mixed mode windows-amd64 compressed oops)\r\n&gt; Problematic frame: J 85 C2 java.nio.DirectByteBuffer.get(I)B (16\r\n&gt; bytes) @ 0x0000000002bcf700 [0x0000000002bcf6c0+0x40] Failed to write\r\n&gt; core dump. Minidumps are not enabled by default on client versions of\r\n&gt; Windows An error report file with more information is saved as:\r\n&gt; C:\\Users\\?????\\Programs\\testApp\\hs_err_pid7592.log Compiled method\r\n&gt; (c2)   42392   85       4       java.nio.DirectByteBuffer::get (16\r\n&gt; bytes)  total in heap  [0x0000000002bcf590,0x0000000002bcf828] = 664 \r\n&gt; relocation     [0x0000000002bcf6b0,0x0000000002bcf6c0] = 16  main code\r\n&gt; [0x0000000002bcf6c0,0x0000000002bcf760] = 160  stub code     \r\n&gt; [0x0000000002bcf760,0x0000000002bcf778] = 24  oops          \r\n&gt; [0x0000000002bcf778,0x0000000002bcf780] = 8  metadata      \r\n&gt; [0x0000000002bcf780,0x0000000002bcf798] = 24  scopes data   \r\n&gt; [0x0000000002bcf798,0x0000000002bcf7e0] = 72  scopes pcs    \r\n&gt; [0x0000000002bcf7e0,0x0000000002bcf820] = 64  dependencies  \r\n&gt; [0x0000000002bcf820,0x0000000002bcf828] = 8\r\n\r\nGood luck!","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>sun.misc.Cleaner javadoc says:</p>\n\n<blockquote>\n  <p>General-purpose phantom-reference-based cleaners. \n  Cleaners are a lightweight and more robust alternative to finalization. They are lightweight because they are not created by the VM and thus do not require a JNI upcall to be created, and because their cleanup code is invoked directly by the reference-handler thread rather than by the finalizer thread. They are more robust because they use phantom references, the weakest type of reference object, thereby avoiding the nasty ordering problems inherent to finalization. \n  A cleaner tracks a referent object and encapsulates a thunk of arbitrary cleanup code. Some time after the GC detects that a cleaner's referent has become phantom-reachable, the reference-handler thread will run the cleaner. Cleaners may also be invoked directly; they are thread safe and ensure that they run their thunks at most once. \n  Cleaners are not a replacement for finalization. They should be used only when the cleanup code is extremely simple and straightforward. Nontrivial cleaners are inadvisable since they risk blocking the reference-handler thread and delaying further cleanup and finalization. </p>\n</blockquote>\n\n<p>Running System.gc() is acceptable solution if your buffers total size is small, but if I was mapping gigabytes of files I would try to implement like this:</p>\n\n<pre><code>((DirectBuffer) buffer).cleaner().clean()\n</code></pre>\n\n<p>But! Make sure you don't access that buffer after cleaning or you will end up with:</p>\n\n<blockquote>\n  <p>A fatal error has been detected by the Java Runtime Environment: EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000002bcf700,\n  pid=7592, tid=10184 JRE version: Java(TM) SE Runtime Environment\n  (8.0_40-b25) (build 1.8.0_40-b25) Java VM: Java HotSpot(TM) 64-Bit\n  Server VM (25.40-b25 mixed mode windows-amd64 compressed oops)\n  Problematic frame: J 85 C2 java.nio.DirectByteBuffer.get(I)B (16\n  bytes) @ 0x0000000002bcf700 [0x0000000002bcf6c0+0x40] Failed to write\n  core dump. Minidumps are not enabled by default on client versions of\n  Windows An error report file with more information is saved as:\n  C:\\Users\\?????\\Programs\\testApp\\hs_err_pid7592.log Compiled method\n  (c2)   42392   85       4       java.nio.DirectByteBuffer::get (16\n  bytes)  total in heap  [0x0000000002bcf590,0x0000000002bcf828] = 664 \n  relocation     [0x0000000002bcf6b0,0x0000000002bcf6c0] = 16  main code\n  [0x0000000002bcf6c0,0x0000000002bcf760] = 160  stub code<br>\n  [0x0000000002bcf760,0x0000000002bcf778] = 24  oops<br>\n  [0x0000000002bcf778,0x0000000002bcf780] = 8  metadata<br>\n  [0x0000000002bcf780,0x0000000002bcf798] = 24  scopes data<br>\n  [0x0000000002bcf798,0x0000000002bcf7e0] = 72  scopes pcs<br>\n  [0x0000000002bcf7e0,0x0000000002bcf820] = 64  dependencies<br>\n  [0x0000000002bcf820,0x0000000002bcf828] = 8</p>\n</blockquote>\n\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":10288467,"reputation":41,"user_id":7590921,"display_name":"饒夢楠"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527084322,"creation_date":1494314409,"answer_id":43863563,"question_id":2972986,"body_markdown":"I found out information about `unmap`, it is a method of `FileChannelImpl` and not accessible, so you can invoke it by java reflect like: \r\n\r\n    public static void unMapBuffer(MappedByteBuffer buffer, Class channelClass) {\r\n        if (buffer == null) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            Method unmap = channelClass.getDeclaredMethod(&quot;unmap&quot;, MappedByteBuffer.class);\r\n            unmap.setAccessible(true);\r\n            unmap.invoke(channelClass, buffer);\r\n        } catch (NoSuchMethodException e) {\r\n            e.printStackTrace();\r\n        } catch (IllegalAccessException e) {\r\n            e.printStackTrace();\r\n        } catch (InvocationTargetException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>I found out information about <code>unmap</code>, it is a method of <code>FileChannelImpl</code> and not accessible, so you can invoke it by java reflect like: </p>\n\n<pre><code>public static void unMapBuffer(MappedByteBuffer buffer, Class channelClass) {\n    if (buffer == null) {\n        return;\n    }\n\n    try {\n        Method unmap = channelClass.getDeclaredMethod(\"unmap\", MappedByteBuffer.class);\n        unmap.setAccessible(true);\n        unmap.invoke(channelClass, buffer);\n    } catch (NoSuchMethodException e) {\n        e.printStackTrace();\n    } catch (IllegalAccessException e) {\n        e.printStackTrace();\n    } catch (InvocationTargetException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3348103,"reputation":923,"user_id":2812818,"accept_rate":20,"display_name":"Droid Teahouse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503532235,"creation_date":1503532235,"answer_id":45850877,"question_id":2972986,"body_markdown":" It is funny to see so many recommendations to do what Item 7 in &#39;Effective Java&#39; specifically says not to do.  A termination method like what @Whome did and no references to the buffer is what is needed. GC cannot be forced.\r\nBut that doesn&#39;t stop developers from trying.  Another workaround I found was to use WeakReferences from  http://jan.baresovi.cz/dr/en/java#memoryMap\r\n   \r\n\r\n    final MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, size);\r\n    ....\r\n    final WeakReference&lt;mappedbytebuffer&gt; bufferWeakRef = new WeakReference&lt;mappedbytebuffer&gt;(bb);\r\n    bb = null;\r\n     \r\n    final long startTime = System.currentTimeMillis();\r\n    while(null != bufferWeakRef.get()) {\r\n      if(System.currentTimeMillis() - startTime &gt; 10)\r\n    // give up\r\n        return;\r\n        System.gc();\r\n        Thread.yield();\r\n    }\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>It is funny to see so many recommendations to do what Item 7 in 'Effective Java' specifically says not to do.  A termination method like what @Whome did and no references to the buffer is what is needed. GC cannot be forced.\nBut that doesn't stop developers from trying.  Another workaround I found was to use WeakReferences from  <a href=\"http://jan.baresovi.cz/dr/en/java#memoryMap\" rel=\"nofollow noreferrer\">http://jan.baresovi.cz/dr/en/java#memoryMap</a></p>\n\n<pre><code>final MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, size);\n....\nfinal WeakReference&lt;mappedbytebuffer&gt; bufferWeakRef = new WeakReference&lt;mappedbytebuffer&gt;(bb);\nbb = null;\n\nfinal long startTime = System.currentTimeMillis();\nwhile(null != bufferWeakRef.get()) {\n  if(System.currentTimeMillis() - startTime &gt; 10)\n// give up\n    return;\n    System.gc();\n    Thread.yield();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2525327,"reputation":381,"user_id":4806428,"display_name":"martins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507790345,"creation_date":1507789876,"answer_id":46702886,"question_id":2972986,"body_markdown":"I would try JNI:\r\n\r\n    #ifdef _WIN32\r\n    UnmapViewOfFile(env-&gt;GetDirectBufferAddress(buffer));\r\n    #else\r\n    munmap(env-&gt;GetDirectBufferAddress(buffer), env-&gt;GetDirectBufferCapacity(buffer));\r\n    #endif\r\n\r\nInclude files: windows.h for Windows, sys/mmap.h for BSD, Linux, OSX.","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>I would try JNI:</p>\n\n<pre><code>#ifdef _WIN32\nUnmapViewOfFile(env-&gt;GetDirectBufferAddress(buffer));\n#else\nmunmap(env-&gt;GetDirectBufferAddress(buffer), env-&gt;GetDirectBufferCapacity(buffer));\n#endif\n</code></pre>\n\n<p>Include files: windows.h for Windows, sys/mmap.h for BSD, Linux, OSX.</p>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1637097985,"creation_date":1546639575,"answer_id":54046774,"question_id":2972986,"body_markdown":"The method covered in other answers that employs `((DirectBuffer) byteBuffer).cleaner().clean()` doesn&#39;t work on JDK 9+ (even in reflective form) without displaying an `An illegal reflective access operation has occurred` warning. This will stop working altogether in some future JDK version. Fortunately `sun.misc.Unsafe.invokeCleaner(ByteBuffer)` can make that exact same call for you without the warning: (from OpenJDK 11 source):\r\n\r\n    public void invokeCleaner(java.nio.ByteBuffer directBuffer) {\r\n        if (!directBuffer.isDirect())\r\n            throw new IllegalArgumentException(&quot;buffer is non-direct&quot;);\r\n\r\n        DirectBuffer db = (DirectBuffer)directBuffer;\r\n        if (db.attachment() != null)\r\n            throw new IllegalArgumentException(&quot;duplicate or slice&quot;);\r\n\r\n        Cleaner cleaner = db.cleaner();\r\n        if (cleaner != null) {\r\n            cleaner.clean();\r\n        }\r\n    }\r\n\r\nBeing a `sun.misc` class, it will be removed at some point. Interestingly all calls but this one in `sun.misc.Unsafe` are proxied directly to `jdk.internal.misc.Unsafe`. I don&#39;t know why `invokeCleaner(ByteBuffer)` is not proxied in the same way as all the other methods -- it was probably omitted because there will be a new way to directly free memory references (including `DirectByteBuffer` instances) as of about JDK 15.\r\n\r\nI wrote the following code that is able to clean/close/unmap DirectByteBuffer/MappedByteBuffer instances on JDK 7/8, as well as JDK 9+, and this does not give the reflection warning:\r\n\r\n    private static boolean PRE_JAVA_9 = \r\n            System.getProperty(&quot;java.specification.version&quot;,&quot;9&quot;).startsWith(&quot;1.&quot;);\r\n\r\n    private static Method cleanMethod;\r\n    private static Method attachmentMethod;\r\n    private static Object theUnsafe;\r\n\r\n    static void getCleanMethodPrivileged() {\r\n        if (PRE_JAVA_9) {\r\n            try {\r\n                cleanMethod = Class.forName(&quot;sun.misc.Cleaner&quot;).getMethod(&quot;clean&quot;);\r\n                cleanMethod.setAccessible(true);\r\n                final Class&lt;?&gt; directByteBufferClass =\r\n                        Class.forName(&quot;sun.nio.ch.DirectBuffer&quot;);\r\n                attachmentMethod = directByteBufferClass.getMethod(&quot;attachment&quot;);\r\n                attachmentMethod.setAccessible(true);\r\n            } catch (final Exception ex) {\r\n            }\r\n        } else {\r\n            try {\r\n                Class&lt;?&gt; unsafeClass;\r\n                try {\r\n                    unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n                } catch (Exception e) {\r\n                    // jdk.internal.misc.Unsafe doesn&#39;t yet have invokeCleaner(),\r\n                    // but that method should be added if sun.misc.Unsafe is removed.\r\n                    unsafeClass = Class.forName(&quot;jdk.internal.misc.Unsafe&quot;);\r\n                }\r\n                cleanMethod = unsafeClass.getMethod(&quot;invokeCleaner&quot;, ByteBuffer.class);\r\n                cleanMethod.setAccessible(true);\r\n                final Field theUnsafeField = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\r\n                theUnsafeField.setAccessible(true);\r\n                theUnsafe = theUnsafeField.get(null);\r\n            } catch (final Exception ex) {\r\n            }\r\n        }\r\n    }\r\n\r\n    static {\r\n        AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() {\r\n            @Override\r\n            public Object run() {\r\n                getCleanMethodPrivileged();\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n\r\n    private static boolean closeDirectByteBufferPrivileged(\r\n                final ByteBuffer byteBuffer, final LogNode log) {\r\n        try {\r\n            if (cleanMethod == null) {\r\n                if (log != null) {\r\n                    log.log(&quot;Could not unmap ByteBuffer, cleanMethod == null&quot;);\r\n                }\r\n                return false;\r\n            }\r\n            if (PRE_JAVA_9) {\r\n                if (attachmentMethod == null) {\r\n                    if (log != null) {\r\n                        log.log(&quot;Could not unmap ByteBuffer, attachmentMethod == null&quot;);\r\n                    }\r\n                    return false;\r\n                }\r\n                // Make sure duplicates and slices are not cleaned, since this can result in\r\n                // duplicate attempts to clean the same buffer, which trigger a crash with:\r\n                // &quot;A fatal error has been detected by the Java Runtime Environment:\r\n                // EXCEPTION_ACCESS_VIOLATION&quot;\r\n                // See: https://stackoverflow.com/a/31592947/3950982\r\n                if (attachmentMethod.invoke(byteBuffer) != null) {\r\n                    // Buffer is a duplicate or slice\r\n                    return false;\r\n                }\r\n                // Invoke ((DirectBuffer) byteBuffer).cleaner().clean()\r\n                final Method cleaner = byteBuffer.getClass().getMethod(&quot;cleaner&quot;);\r\n                cleaner.setAccessible(true);\r\n                cleanMethod.invoke(cleaner.invoke(byteBuffer));\r\n                return true;\r\n            } else {\r\n                if (theUnsafe == null) {\r\n                    if (log != null) {\r\n                        log.log(&quot;Could not unmap ByteBuffer, theUnsafe == null&quot;);\r\n                    }\r\n                    return false;\r\n                }\r\n                // In JDK9+, calling the above code gives a reflection warning on stderr,\r\n                // need to call Unsafe.theUnsafe.invokeCleaner(byteBuffer) , which makes\r\n                // the same call, but does not print the reflection warning.\r\n                try {\r\n                    cleanMethod.invoke(theUnsafe, byteBuffer);\r\n                    return true;\r\n                } catch (final IllegalArgumentException e) {\r\n                    // Buffer is a duplicate or slice\r\n                    return false;\r\n                }\r\n            }\r\n        } catch (final Exception e) {\r\n            if (log != null) {\r\n                log.log(&quot;Could not unmap ByteBuffer: &quot; + e);\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Close a {@code DirectByteBuffer} -- in particular, will unmap a\r\n     * {@link MappedByteBuffer}.\r\n     * \r\n     * @param byteBuffer\r\n     *            The {@link ByteBuffer} to close/unmap.\r\n     * @param log\r\n     *            The log.\r\n     * @return True if the byteBuffer was closed/unmapped (or if the ByteBuffer\r\n     *            was null or non-direct).\r\n     */\r\n    public static boolean closeDirectByteBuffer(final ByteBuffer byteBuffer,\r\n                final Log log) {\r\n        if (byteBuffer != null &amp;&amp; byteBuffer.isDirect()) {\r\n            return AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() {\r\n                @Override\r\n                public Boolean run() {\r\n                    return closeDirectByteBufferPrivileged(byteBuffer, log);\r\n                }\r\n            });\r\n        } else {\r\n            // Nothing to unmap\r\n            return false;\r\n        }\r\n    }\r\n\r\nNote that you will need to add the `requires jdk.unsupported` to your module descriptor in a modular runtime on JDK 9+ (needed for the use of `Unsafe`).\r\n\r\nYour jar may also need `RuntimePermission(&quot;accessClassInPackage.sun.misc&quot;)`, `RuntimePermission(&quot;accessClassInPackage.jdk.internal.misc&quot;)`, and `ReflectPermission(&quot;suppressAccessChecks&quot;)`.\r\n\r\nA more complete method for garbage collecting a `MappedByteBuffer` or a `DirectByteBuffer` is implemented in ClassGraph (I am the author) -- the entry point is the `closeDirectByteBuffer()` method at the end of `FileUtils`:\r\n\r\nhttps://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/utils/FileUtils.java#L543\r\n\r\nThis code is written to use reflection, since the Java APIs that are used (including `Unsafe`) are going away in the near future.\r\n\r\n**Note that there&#39;s an additional problem in JDK 16+:**\r\n\r\nthis code will not work out of the box in JDK 16+ unless you use the [Narcissus][1] or [JVM-Driver][2] libraries to circumvent strong encapsulation.  This is because `MappedByteBuffer.clean()` is a private method, and JDK 16 enforces strong encapsulation. ClassGraph abstracts away access to private encapsulated methods by calling Narcissus or JVM-driver through reflection at runtime:\r\n\r\nhttps://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/reflection/ReflectionUtils.java\r\n\r\n**Warning: if you try to access the `DirectByteBuffer` after it is cleaned (freed), it will crash the VM.**\r\n\r\nThere are other security considerations, discussed in the last comment in this bug report:\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-4724038\r\n\r\n  [1]: https://github.com/toolfactory/narcissus\r\n  [2]: https://github.com/toolfactory/jvm-driver\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>The method covered in other answers that employs <code>((DirectBuffer) byteBuffer).cleaner().clean()</code> doesn't work on JDK 9+ (even in reflective form) without displaying an <code>An illegal reflective access operation has occurred</code> warning. This will stop working altogether in some future JDK version. Fortunately <code>sun.misc.Unsafe.invokeCleaner(ByteBuffer)</code> can make that exact same call for you without the warning: (from OpenJDK 11 source):</p>\n<pre><code>public void invokeCleaner(java.nio.ByteBuffer directBuffer) {\n    if (!directBuffer.isDirect())\n        throw new IllegalArgumentException(&quot;buffer is non-direct&quot;);\n\n    DirectBuffer db = (DirectBuffer)directBuffer;\n    if (db.attachment() != null)\n        throw new IllegalArgumentException(&quot;duplicate or slice&quot;);\n\n    Cleaner cleaner = db.cleaner();\n    if (cleaner != null) {\n        cleaner.clean();\n    }\n}\n</code></pre>\n<p>Being a <code>sun.misc</code> class, it will be removed at some point. Interestingly all calls but this one in <code>sun.misc.Unsafe</code> are proxied directly to <code>jdk.internal.misc.Unsafe</code>. I don't know why <code>invokeCleaner(ByteBuffer)</code> is not proxied in the same way as all the other methods -- it was probably omitted because there will be a new way to directly free memory references (including <code>DirectByteBuffer</code> instances) as of about JDK 15.</p>\n<p>I wrote the following code that is able to clean/close/unmap DirectByteBuffer/MappedByteBuffer instances on JDK 7/8, as well as JDK 9+, and this does not give the reflection warning:</p>\n<pre><code>private static boolean PRE_JAVA_9 = \n        System.getProperty(&quot;java.specification.version&quot;,&quot;9&quot;).startsWith(&quot;1.&quot;);\n\nprivate static Method cleanMethod;\nprivate static Method attachmentMethod;\nprivate static Object theUnsafe;\n\nstatic void getCleanMethodPrivileged() {\n    if (PRE_JAVA_9) {\n        try {\n            cleanMethod = Class.forName(&quot;sun.misc.Cleaner&quot;).getMethod(&quot;clean&quot;);\n            cleanMethod.setAccessible(true);\n            final Class&lt;?&gt; directByteBufferClass =\n                    Class.forName(&quot;sun.nio.ch.DirectBuffer&quot;);\n            attachmentMethod = directByteBufferClass.getMethod(&quot;attachment&quot;);\n            attachmentMethod.setAccessible(true);\n        } catch (final Exception ex) {\n        }\n    } else {\n        try {\n            Class&lt;?&gt; unsafeClass;\n            try {\n                unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\n            } catch (Exception e) {\n                // jdk.internal.misc.Unsafe doesn't yet have invokeCleaner(),\n                // but that method should be added if sun.misc.Unsafe is removed.\n                unsafeClass = Class.forName(&quot;jdk.internal.misc.Unsafe&quot;);\n            }\n            cleanMethod = unsafeClass.getMethod(&quot;invokeCleaner&quot;, ByteBuffer.class);\n            cleanMethod.setAccessible(true);\n            final Field theUnsafeField = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\n            theUnsafeField.setAccessible(true);\n            theUnsafe = theUnsafeField.get(null);\n        } catch (final Exception ex) {\n        }\n    }\n}\n\nstatic {\n    AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() {\n        @Override\n        public Object run() {\n            getCleanMethodPrivileged();\n            return null;\n        }\n    });\n}\n\nprivate static boolean closeDirectByteBufferPrivileged(\n            final ByteBuffer byteBuffer, final LogNode log) {\n    try {\n        if (cleanMethod == null) {\n            if (log != null) {\n                log.log(&quot;Could not unmap ByteBuffer, cleanMethod == null&quot;);\n            }\n            return false;\n        }\n        if (PRE_JAVA_9) {\n            if (attachmentMethod == null) {\n                if (log != null) {\n                    log.log(&quot;Could not unmap ByteBuffer, attachmentMethod == null&quot;);\n                }\n                return false;\n            }\n            // Make sure duplicates and slices are not cleaned, since this can result in\n            // duplicate attempts to clean the same buffer, which trigger a crash with:\n            // &quot;A fatal error has been detected by the Java Runtime Environment:\n            // EXCEPTION_ACCESS_VIOLATION&quot;\n            // See: https://stackoverflow.com/a/31592947/3950982\n            if (attachmentMethod.invoke(byteBuffer) != null) {\n                // Buffer is a duplicate or slice\n                return false;\n            }\n            // Invoke ((DirectBuffer) byteBuffer).cleaner().clean()\n            final Method cleaner = byteBuffer.getClass().getMethod(&quot;cleaner&quot;);\n            cleaner.setAccessible(true);\n            cleanMethod.invoke(cleaner.invoke(byteBuffer));\n            return true;\n        } else {\n            if (theUnsafe == null) {\n                if (log != null) {\n                    log.log(&quot;Could not unmap ByteBuffer, theUnsafe == null&quot;);\n                }\n                return false;\n            }\n            // In JDK9+, calling the above code gives a reflection warning on stderr,\n            // need to call Unsafe.theUnsafe.invokeCleaner(byteBuffer) , which makes\n            // the same call, but does not print the reflection warning.\n            try {\n                cleanMethod.invoke(theUnsafe, byteBuffer);\n                return true;\n            } catch (final IllegalArgumentException e) {\n                // Buffer is a duplicate or slice\n                return false;\n            }\n        }\n    } catch (final Exception e) {\n        if (log != null) {\n            log.log(&quot;Could not unmap ByteBuffer: &quot; + e);\n        }\n        return false;\n    }\n}\n\n/**\n * Close a {@code DirectByteBuffer} -- in particular, will unmap a\n * {@link MappedByteBuffer}.\n * \n * @param byteBuffer\n *            The {@link ByteBuffer} to close/unmap.\n * @param log\n *            The log.\n * @return True if the byteBuffer was closed/unmapped (or if the ByteBuffer\n *            was null or non-direct).\n */\npublic static boolean closeDirectByteBuffer(final ByteBuffer byteBuffer,\n            final Log log) {\n    if (byteBuffer != null &amp;&amp; byteBuffer.isDirect()) {\n        return AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() {\n            @Override\n            public Boolean run() {\n                return closeDirectByteBufferPrivileged(byteBuffer, log);\n            }\n        });\n    } else {\n        // Nothing to unmap\n        return false;\n    }\n}\n</code></pre>\n<p>Note that you will need to add the <code>requires jdk.unsupported</code> to your module descriptor in a modular runtime on JDK 9+ (needed for the use of <code>Unsafe</code>).</p>\n<p>Your jar may also need <code>RuntimePermission(&quot;accessClassInPackage.sun.misc&quot;)</code>, <code>RuntimePermission(&quot;accessClassInPackage.jdk.internal.misc&quot;)</code>, and <code>ReflectPermission(&quot;suppressAccessChecks&quot;)</code>.</p>\n<p>A more complete method for garbage collecting a <code>MappedByteBuffer</code> or a <code>DirectByteBuffer</code> is implemented in ClassGraph (I am the author) -- the entry point is the <code>closeDirectByteBuffer()</code> method at the end of <code>FileUtils</code>:</p>\n<p><a href=\"https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/utils/FileUtils.java#L543\" rel=\"nofollow noreferrer\">https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/utils/FileUtils.java#L543</a></p>\n<p>This code is written to use reflection, since the Java APIs that are used (including <code>Unsafe</code>) are going away in the near future.</p>\n<p><strong>Note that there's an additional problem in JDK 16+:</strong></p>\n<p>this code will not work out of the box in JDK 16+ unless you use the <a href=\"https://github.com/toolfactory/narcissus\" rel=\"nofollow noreferrer\">Narcissus</a> or <a href=\"https://github.com/toolfactory/jvm-driver\" rel=\"nofollow noreferrer\">JVM-Driver</a> libraries to circumvent strong encapsulation.  This is because <code>MappedByteBuffer.clean()</code> is a private method, and JDK 16 enforces strong encapsulation. ClassGraph abstracts away access to private encapsulated methods by calling Narcissus or JVM-driver through reflection at runtime:</p>\n<p><a href=\"https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/reflection/ReflectionUtils.java\" rel=\"nofollow noreferrer\">https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/reflection/ReflectionUtils.java</a></p>\n<p><strong>Warning: if you try to access the <code>DirectByteBuffer</code> after it is cleaned (freed), it will crash the VM.</strong></p>\n<p>There are other security considerations, discussed in the last comment in this bug report:</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-4724038\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-4724038</a></p>\n"},{"tags":[],"owner":{"account_id":187950,"reputation":2035,"user_id":426371,"accept_rate":82,"display_name":"neXus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591628427,"creation_date":1591628427,"answer_id":62265017,"question_id":2972986,"body_markdown":"Try [https://github.com/real-logic/agrona][1]\r\n\r\nIts IOUtil class has an [`unmap(MappedByteBuffer)`][2] method that does exactly what you need. It allows to explicitly unmap a MappedByteBuffer.\r\n\r\nHowever, it uses `sun.misc.Unsafe` internally, but that&#39;s not any different from the other answers here.\r\n\r\n  [1]: https://github.com/real-logic/agrona#agrona\r\n  [2]: https://github.com/real-logic/agrona/blob/1.5.1/agrona/src/main/java/org/agrona/IoUtil.java#L511-L520","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>Try <a href=\"https://github.com/real-logic/agrona#agrona\" rel=\"nofollow noreferrer\">https://github.com/real-logic/agrona</a></p>\n\n<p>Its IOUtil class has an <a href=\"https://github.com/real-logic/agrona/blob/1.5.1/agrona/src/main/java/org/agrona/IoUtil.java#L511-L520\" rel=\"nofollow noreferrer\"><code>unmap(MappedByteBuffer)</code></a> method that does exactly what you need. It allows to explicitly unmap a MappedByteBuffer.</p>\n\n<p>However, it uses <code>sun.misc.Unsafe</code> internally, but that's not any different from the other answers here.</p>\n"}],"owner":{"account_id":619370,"reputation":573,"user_id":358304,"display_name":"learner135"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31193,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":2973059,"answer_count":13,"score":56,"last_activity_date":1637097985,"creation_date":1275644820,"question_id":2972986,"body_markdown":"I am mapping a file(&quot;sample.txt&quot;) to memory using `FileChannel.map()` and then closing the channel using `fc.close()`. After this when I write to the file using FileOutputStream, I am getting the following error:\r\n\r\n&gt;    java.io.FileNotFoundException:\r\n&gt; sample.txt (The requested operation\r\n&gt; cannot be per formed on a file with a\r\n&gt; user-mapped section open)\r\n\r\n    File f = new File(&quot;sample.txt&quot;);\r\n    RandomAccessFile raf = new RandomAccessFile(f,&quot;rw&quot;);\r\n    FileChannel fc = raf.getChannel();\r\n    MappedByteBuffer mbf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\r\n    fc.close();\r\n    raf.close();\r\n\r\n    FileOutputStream fos = new FileOutputStream(f);\r\n    fos.write(str.getBytes());\r\n    fos.close();\r\n\r\nI presume this may be due to file being still mapped to the memory even after I close the `FileChannel`. Am I right?. If so, how can I &quot;unmap&quot; the file from memory?(I can&#39;t find any methods for this in the API).\r\nThanks.\r\n\r\nEdit:\r\nLooks like it(adding an unmap method) was submitted as RFE to sun some time back:\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=4724038","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>I am mapping a file(&quot;sample.txt&quot;) to memory using <code>FileChannel.map()</code> and then closing the channel using <code>fc.close()</code>. After this when I write to the file using FileOutputStream, I am getting the following error:</p>\n<blockquote>\n<p>java.io.FileNotFoundException:\nsample.txt (The requested operation\ncannot be per formed on a file with a\nuser-mapped section open)</p>\n</blockquote>\n<pre><code>File f = new File(&quot;sample.txt&quot;);\nRandomAccessFile raf = new RandomAccessFile(f,&quot;rw&quot;);\nFileChannel fc = raf.getChannel();\nMappedByteBuffer mbf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\nfc.close();\nraf.close();\n\nFileOutputStream fos = new FileOutputStream(f);\nfos.write(str.getBytes());\nfos.close();\n</code></pre>\n<p>I presume this may be due to file being still mapped to the memory even after I close the <code>FileChannel</code>. Am I right?. If so, how can I &quot;unmap&quot; the file from memory?(I can't find any methods for this in the API).\nThanks.</p>\n<p>Edit:\nLooks like it(adding an unmap method) was submitted as RFE to sun some time back:\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4724038\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=4724038</a></p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-security","spring-data-jpa"],"comments":[{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":1,"creation_date":1637096804,"post_id":69994829,"comment_id":123733990,"body_markdown":"@xerx593 I just added the security config","body":"@xerx593 I just added the security config"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637096888,"post_id":69994829,"comment_id":123734024,"body_markdown":"Doesn&#39;t `antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;, &quot;/**&quot;).permitAll()` renders it unnecessary to authenticate to call `@GetMapping(value=&quot;marketers/customers&quot;)`?","body":"Doesn&#39;t <code>antMatchers(&quot;&#47;auth&#47;login&quot;, &quot;&#47;validate&quot;, &quot;&#47;**&quot;).permitAll()</code> renders it unnecessary to authenticate to call <code>@GetMapping(value=&quot;marketers&#47;customers&quot;)</code>?"},{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":0,"creation_date":1637096982,"post_id":69994829,"comment_id":123734050,"body_markdown":"@Jo&#227;oDias i thought the &quot;/**&quot; mean all other endpoints ?","body":"@Jo&#227;oDias i thought the &quot;/**&quot; mean all other endpoints ?"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637097525,"post_id":69994829,"comment_id":123734226,"body_markdown":"Exactly, which means that basically all endpoints will require no authentication, hence you will have an empty `SecurityContext` on such calls.","body":"Exactly, which means that basically all endpoints will require no authentication, hence you will have an empty <code>SecurityContext</code> on such calls."},{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":0,"creation_date":1637098671,"post_id":69994829,"comment_id":123734496,"body_markdown":"@Jo&#227;oDias what should I do ? i removed the   &quot;/**&quot;  and changed to  &quot;/marketers/customers&quot; but getting same null","body":"@Jo&#227;oDias what should I do ? i removed the   &quot;/**&quot;  and changed to  &quot;/marketers/customers&quot; but getting same null"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1637098681,"post_id":69994829,"comment_id":123734500,"body_markdown":"spring security has had JWT support since 2018, writing a custom JWTFilter is bad practice, writing any type of custom security is bad practice. Remove the JWTFilter and please implement JWTs in accordance according to the official spring security documentation https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","body":"spring security has had JWT support since 2018, writing a custom JWTFilter is bad practice, writing any type of custom security is bad practice. Remove the JWTFilter and please implement JWTs in accordance according to the official spring security documentation <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637097740,"creation_date":1637097740,"answer_id":69996182,"question_id":69994829,"body_markdown":"It seems to me that you don&#39;t want all your endpoints to not require authentication. In order to achieve it you will need to remove `/**` from your `permitAll()` in the security configuration as follows:\r\n```java\r\n@Override\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n  http.cors().and().csrf().disable()\r\n  .authorizeRequests()\r\n  .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;).permitAll()\r\n  .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n    \r\n  .anyRequest().authenticated()\r\n  .and()\r\n    .exceptionHandling()\r\n  .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n  \r\n  .and()\r\n  .formLogin().permitAll()\r\n  \r\n  .and()\r\n  .sessionManagement()\r\n  .maximumSessions(1)\r\n  .and()\r\n  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n  .and()\r\n  .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\r\n  .deleteCookies(&quot;JSESSIONID&quot;);\r\n  http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n}\r\n```","title":"Why is Spring security Authentication returning a Null authentication object?","body":"<p>It seems to me that you don't want all your endpoints to not require authentication. In order to achieve it you will need to remove <code>/**</code> from your <code>permitAll()</code> in the security configuration as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n  http.cors().and().csrf().disable()\n  .authorizeRequests()\n  .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;).permitAll()\n  .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n    \n  .anyRequest().authenticated()\n  .and()\n    .exceptionHandling()\n  .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n  \n  .and()\n  .formLogin().permitAll()\n  \n  .and()\n  .sessionManagement()\n  .maximumSessions(1)\n  .and()\n  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n  .and()\n  .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\n  .deleteCookies(&quot;JSESSIONID&quot;);\n  http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n"}],"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2866,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69996182,"answer_count":1,"score":-1,"last_activity_date":1637097740,"creation_date":1637089788,"question_id":69994829,"body_markdown":"**I need to get the User object details for the currently signed in User so that I can get the customers assigned to the User** but I keep getting a null object when I printed to the console. I can sign in successfully with a generated token for the user type , but i keep getting null response when the logged in username is queried by Spring authentication.\r\n\r\n**Controller**\r\n\r\n```java\r\n@RestController\r\npublic class CustomerController {\r\n\t\r\n@Autowired\r\nCustomerAccountService customerRepo;\r\n\t    \r\n@Autowired\r\nUserAccountService  userRepo;\r\n\r\n @GetMapping(value=&quot;marketers/customers&quot;)\r\npublic List&lt;Customer&gt; getLlistByMarketerName()\r\n{\r\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\t \r\nUser loggedInUser = userRepo.findByUserName(authentication.getName());\r\nSystem.out.println(&quot;logged in user:&quot;+ loggedInUser);\r\nreturn customerRepo.findByMarketer(loggedInUser);\r\n}\r\n\t\r\n```\r\n\r\n**The repository**\r\n\r\n```\r\n\r\npublic interface CustomerAccountRepo extends JpaRepository &lt;Customer, Long  &gt; \r\n\r\n{\r\n@Query(&quot;select customer from Customer customer join customer.marketer marketer where marketer = :marketer&quot;)\r\n     List&lt;Customer&gt; findByMarketer(User marketer);\r\n}\r\n```\r\n\r\n**UserDetails Service** \r\n\r\n```\r\n@Service\r\npublic class UserAccountService implements UserDetailsService {\r\n\t\r\n\t\r\n@Autowired\t\r\nprivate UserAccountRepository userRepository;\r\n\t    \r\nprivate PasswordEncoder bCryptPasswordEncoder;\r\n\t   \r\npublic  UserAccountService (PasswordEncoder bCryptPasswordEncoder) {\r\nthis.bCryptPasswordEncoder = bCryptPasswordEncoder;\r\n\t\t \r\n\t   }\r\n\t\r\n@Override\r\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\nUser user = userRepository.findByUserName(username);\r\nif(user == null) {\r\nthrow new UsernameNotFoundException(&quot;User not found&quot;);\r\n}\r\n\t        \r\n\t       // List&lt;SimpleGrantedAuthority&gt; authorities = Arrays.asList(new SimpleGrantedAuthority(user.getUserRole()));\r\n\t        \r\n          return MyUserDetails.build(user);\r\n}\r\n\r\n```\r\n\r\n**JWT Request filter** \r\n\r\n```\r\n@Component\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n\t@Autowired\r\nprivate JwtTokenUtil jwtTokenUtil;\r\nprivate final UserAccountService userAccountService;\r\n\t\r\n@Autowired\r\npublic JwtRequestFilter( @Lazy final UserAccountService userAccountService) {\r\nthis.userAccountService = userAccountService;\r\n\t\t\r\n}\r\n\t\r\n@Override\r\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n\t\t\tthrows ServletException, IOException {\r\n\r\nfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\nString username = null;\r\nString jwtToken = null;\r\nif (requestTokenHeader != null) {\r\njwtToken = requestTokenHeader.substring(7);\r\ntry {\r\nusername = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n} catch (IllegalArgumentException e) {\r\nSystem.out.println(&quot;Unable to get JWT Token&quot;);\r\n} catch (ExpiredJwtException e) {\r\nSystem.out.println(&quot;JWT Token has expired&quot;);\r\n}\r\n} \r\n\r\nif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\nUserDetails userDetails = this.userAccountService.loadUserByUsername(username);\r\nif (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\nuserDetails, null, userDetails.getAuthorities());\r\nString authorities = userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority)\r\n.collect(Collectors.joining());\r\nSystem.out.println(&quot;Authorities granted : &quot; + authorities);\r\nusernamePasswordAuthenticationToken\r\n.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n\t\t\t}\r\nelse {\r\n System.out.println(&quot;Not Valid Token&quot;);\r\n        }\r\n\r\n\t\t}\r\nchain.doFilter(request, response);\r\n}\r\n\r\n```\r\n\r\n**The User entity**\r\n\r\n```\r\n@Entity\r\npublic class User {\r\n\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t\r\n\tprivate String firstName ;\r\n\tprivate String lastName;\r\n\t\r\n\t@Column(name=&quot;user_name&quot;, unique=true)\r\n\tprivate String userName;\r\n\t\r\n\tprivate String password;\r\n\tprivate String Gender; \r\n    private String phoneNumber;\r\n\tprivate String email;\r\n\t\r\n\t@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n    @ManyToOne(targetEntity = Branch.class, \r\n\t fetch = FetchType.LAZY )\r\n\t@JoinColumn(name=&quot;branch_id&quot;) \r\n    private Branch branch;\r\n    \r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private Date createdDate;\r\n    \r\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @JoinTable(\r\n    name = &quot;users_roles&quot;, \r\n    joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n    inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;)\r\n    )\r\n    private Set&lt;UserRole&gt; userRole = new HashSet&lt;&gt;();\r\n    \r\n    @Enumerated(EnumType.STRING)\r\n    private UserStatus status;\r\n    \r\n    @JsonBackReference\r\n\t@OneToMany(mappedBy=&quot;marketer&quot;,cascade = CascadeType.ALL, targetEntity=Customer.class)\r\n    private List &lt;Customer&gt; customer;\r\n\r\n```\r\n\r\nThis is **MyUserDetails class** that provides the username and password authentication details\r\n\r\n```\r\npublic class MyUserDetails implements UserDetails {\r\n\t\r\nprivate static final long serialVersionUID = -2456373662763511974L;\r\n\r\nprivate Long id;\r\nprivate String username;\r\nprivate String password;\r\nprivate String email;\r\nprivate Collection&lt;? extends GrantedAuthority&gt; authorities;\r\n    \r\npublic MyUserDetails() {}\r\n\t\r\npublic MyUserDetails(Long id, String username, String email, String password,\r\nCollection&lt;? extends GrantedAuthority&gt; authorities)\r\n\t{\r\n\t\tthis.id = id;\r\n\t\tthis.username = username;\r\n\t\tthis.email = email;\r\n\t\tthis.password = password;\r\n\t\tthis.authorities = authorities;\r\n\t}\r\npublic static MyUserDetails build(User user) {\r\nList&lt;GrantedAuthority&gt; authorities = user.getUserRole()\r\n.stream().map(role -&gt; new SimpleGrantedAuthority\r\n(role.getName()))\r\n.collect(Collectors.toList());\r\nreturn new MyUserDetails(user.getId(),\r\nuser.getUserName(),\r\nuser.getEmail(),\r\nuser.getPassword(),\r\nauthorities);\r\n\t\t\r\n}\r\n\r\n```\r\n\r\n**UPDATED:** Security config file . This is my first big project in Java , forgive my errors\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\t\r\n\t@Autowired\r\n\tprivate JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\r\n\r\n\t@Autowired\r\n  private UserDetailsService myUserDetailsService;\r\n\t\r\n\tpublic void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n      exposeDirectory(&quot;customer-photos&quot;, registry);\r\n  }\r\n\t\r\n\tprivate void exposeDirectory(String dirName, ResourceHandlerRegistry registry) {\r\n      Path uploadDir = Paths.get(dirName);\r\n      String uploadPath = uploadDir.toFile().getAbsolutePath();\r\n       \r\n      if (dirName.startsWith(&quot;../&quot;)) dirName = dirName.replace(&quot;../&quot;, &quot;&quot;);\r\n       \r\n      registry.addResourceHandler(&quot;/&quot; + dirName + &quot;/**&quot;).addResourceLocations(&quot;file:/&quot;+ uploadPath + &quot;/&quot;);\r\n  }\r\n\r\n  @Autowired \r\n\tprivate JwtRequestFilter jwtRequestFilter;\r\n\t \r\n\t@Bean\r\n\tpublic BCryptPasswordEncoder passwordEncoder() {\r\n\t    return new BCryptPasswordEncoder();\r\n\t}\r\n\t\r\n\t @Bean\r\n\t public DaoAuthenticationProvider daoAuthenticationProvider(PasswordEncoder passwordEncoder, UserDetailsService userDetailsService) { \r\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\r\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\r\n        return daoAuthenticationProvider;\r\n    }\r\n\t \r\n\t @Override\r\n\t @Bean\r\n\t public AuthenticationManager authenticationManagerBean() throws Exception {\r\n\t     return super.authenticationManagerBean();\r\n\t }\r\n\r\n   @Override\r\n\t protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n       auth.userDetailsService(myUserDetailsService).passwordEncoder(passwordEncoder());\r\n\t }\r\n\r\n  @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t  http.cors().and().csrf().disable()\r\n\t  .authorizeRequests()\r\n\t  .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;, &quot;/**&quot;).permitAll()\r\n\t  .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n      \r\n\t  .anyRequest().authenticated()\r\n\t  .and()\r\n      .exceptionHandling()\r\n\t  .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n\t  \r\n\t  .and()\r\n\t  .formLogin().permitAll()\r\n\t  \r\n\t  .and()\r\n\t  .sessionManagement()\r\n\t  .maximumSessions(1)\r\n\t  .and()\r\n\t  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n\t  .and()\r\n\t  .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\r\n\t  .deleteCookies(&quot;JSESSIONID&quot;);\r\n\t  http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n\t}\r\n}  \r\n```","title":"Why is Spring security Authentication returning a Null authentication object?","body":"<p><strong>I need to get the User object details for the currently signed in User so that I can get the customers assigned to the User</strong> but I keep getting a null object when I printed to the console. I can sign in successfully with a generated token for the user type , but i keep getting null response when the logged in username is queried by Spring authentication.</p>\n<p><strong>Controller</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class CustomerController {\n    \n@Autowired\nCustomerAccountService customerRepo;\n        \n@Autowired\nUserAccountService  userRepo;\n\n @GetMapping(value=&quot;marketers/customers&quot;)\npublic List&lt;Customer&gt; getLlistByMarketerName()\n{\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();  \nUser loggedInUser = userRepo.findByUserName(authentication.getName());\nSystem.out.println(&quot;logged in user:&quot;+ loggedInUser);\nreturn customerRepo.findByMarketer(loggedInUser);\n}\n    \n</code></pre>\n<p><strong>The repository</strong></p>\n<pre><code>\npublic interface CustomerAccountRepo extends JpaRepository &lt;Customer, Long  &gt; \n\n{\n@Query(&quot;select customer from Customer customer join customer.marketer marketer where marketer = :marketer&quot;)\n     List&lt;Customer&gt; findByMarketer(User marketer);\n}\n</code></pre>\n<p><strong>UserDetails Service</strong></p>\n<pre><code>@Service\npublic class UserAccountService implements UserDetailsService {\n    \n    \n@Autowired  \nprivate UserAccountRepository userRepository;\n        \nprivate PasswordEncoder bCryptPasswordEncoder;\n       \npublic  UserAccountService (PasswordEncoder bCryptPasswordEncoder) {\nthis.bCryptPasswordEncoder = bCryptPasswordEncoder;\n         \n       }\n    \n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\nUser user = userRepository.findByUserName(username);\nif(user == null) {\nthrow new UsernameNotFoundException(&quot;User not found&quot;);\n}\n            \n           // List&lt;SimpleGrantedAuthority&gt; authorities = Arrays.asList(new SimpleGrantedAuthority(user.getUserRole()));\n            \n          return MyUserDetails.build(user);\n}\n\n</code></pre>\n<p><strong>JWT Request filter</strong></p>\n<pre><code>@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n    @Autowired\nprivate JwtTokenUtil jwtTokenUtil;\nprivate final UserAccountService userAccountService;\n    \n@Autowired\npublic JwtRequestFilter( @Lazy final UserAccountService userAccountService) {\nthis.userAccountService = userAccountService;\n        \n}\n    \n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n\nfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n\nString username = null;\nString jwtToken = null;\nif (requestTokenHeader != null) {\njwtToken = requestTokenHeader.substring(7);\ntry {\nusername = jwtTokenUtil.getUsernameFromToken(jwtToken);\n} catch (IllegalArgumentException e) {\nSystem.out.println(&quot;Unable to get JWT Token&quot;);\n} catch (ExpiredJwtException e) {\nSystem.out.println(&quot;JWT Token has expired&quot;);\n}\n} \n\nif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\nUserDetails userDetails = this.userAccountService.loadUserByUsername(username);\nif (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\nuserDetails, null, userDetails.getAuthorities());\nString authorities = userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority)\n.collect(Collectors.joining());\nSystem.out.println(&quot;Authorities granted : &quot; + authorities);\nusernamePasswordAuthenticationToken\n.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\nelse {\n System.out.println(&quot;Not Valid Token&quot;);\n        }\n\n        }\nchain.doFilter(request, response);\n}\n\n</code></pre>\n<p><strong>The User entity</strong></p>\n<pre><code>@Entity\npublic class User {\n\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n    \n    private String firstName ;\n    private String lastName;\n    \n    @Column(name=&quot;user_name&quot;, unique=true)\n    private String userName;\n    \n    private String password;\n    private String Gender; \n    private String phoneNumber;\n    private String email;\n    \n    @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\n    @ManyToOne(targetEntity = Branch.class, \n     fetch = FetchType.LAZY )\n    @JoinColumn(name=&quot;branch_id&quot;) \n    private Branch branch;\n    \n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n    private Date createdDate;\n    \n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinTable(\n    name = &quot;users_roles&quot;, \n    joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n    inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;)\n    )\n    private Set&lt;UserRole&gt; userRole = new HashSet&lt;&gt;();\n    \n    @Enumerated(EnumType.STRING)\n    private UserStatus status;\n    \n    @JsonBackReference\n    @OneToMany(mappedBy=&quot;marketer&quot;,cascade = CascadeType.ALL, targetEntity=Customer.class)\n    private List &lt;Customer&gt; customer;\n\n</code></pre>\n<p>This is <strong>MyUserDetails class</strong> that provides the username and password authentication details</p>\n<pre><code>public class MyUserDetails implements UserDetails {\n    \nprivate static final long serialVersionUID = -2456373662763511974L;\n\nprivate Long id;\nprivate String username;\nprivate String password;\nprivate String email;\nprivate Collection&lt;? extends GrantedAuthority&gt; authorities;\n    \npublic MyUserDetails() {}\n    \npublic MyUserDetails(Long id, String username, String email, String password,\nCollection&lt;? extends GrantedAuthority&gt; authorities)\n    {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.authorities = authorities;\n    }\npublic static MyUserDetails build(User user) {\nList&lt;GrantedAuthority&gt; authorities = user.getUserRole()\n.stream().map(role -&gt; new SimpleGrantedAuthority\n(role.getName()))\n.collect(Collectors.toList());\nreturn new MyUserDetails(user.getId(),\nuser.getUserName(),\nuser.getEmail(),\nuser.getPassword(),\nauthorities);\n        \n}\n\n</code></pre>\n<p><strong>UPDATED:</strong> Security config file . This is my first big project in Java , forgive my errors</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    \n    @Autowired\n    private JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\n\n    @Autowired\n  private UserDetailsService myUserDetailsService;\n    \n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n      exposeDirectory(&quot;customer-photos&quot;, registry);\n  }\n    \n    private void exposeDirectory(String dirName, ResourceHandlerRegistry registry) {\n      Path uploadDir = Paths.get(dirName);\n      String uploadPath = uploadDir.toFile().getAbsolutePath();\n       \n      if (dirName.startsWith(&quot;../&quot;)) dirName = dirName.replace(&quot;../&quot;, &quot;&quot;);\n       \n      registry.addResourceHandler(&quot;/&quot; + dirName + &quot;/**&quot;).addResourceLocations(&quot;file:/&quot;+ uploadPath + &quot;/&quot;);\n  }\n\n  @Autowired \n    private JwtRequestFilter jwtRequestFilter;\n     \n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n    \n     @Bean\n     public DaoAuthenticationProvider daoAuthenticationProvider(PasswordEncoder passwordEncoder, UserDetailsService userDetailsService) { \n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\n        return daoAuthenticationProvider;\n    }\n     \n     @Override\n     @Bean\n     public AuthenticationManager authenticationManagerBean() throws Exception {\n         return super.authenticationManagerBean();\n     }\n\n   @Override\n     protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n       auth.userDetailsService(myUserDetailsService).passwordEncoder(passwordEncoder());\n     }\n\n  @Override\n    protected void configure(HttpSecurity http) throws Exception {\n      http.cors().and().csrf().disable()\n      .authorizeRequests()\n      .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;, &quot;/**&quot;).permitAll()\n      .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n      \n      .anyRequest().authenticated()\n      .and()\n      .exceptionHandling()\n      .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n      \n      .and()\n      .formLogin().permitAll()\n      \n      .and()\n      .sessionManagement()\n      .maximumSessions(1)\n      .and()\n      .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n      .and()\n      .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\n      .deleteCookies(&quot;JSESSIONID&quot;);\n      http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n}  \n</code></pre>\n"},{"tags":["java","dependencies","quarkus","quarkus-native"],"answers":[{"tags":[],"owner":{"account_id":9649540,"reputation":26,"user_id":9484684,"display_name":"Quorcs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637097542,"creation_date":1637097542,"answer_id":69996147,"question_id":69945196,"body_markdown":"Quarkus Native not includes external dependencies.\r\nYou needs to include by yourself\r\n\r\n[Link to SoF response][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58311514/how-can-you-access-resources-in-transitive-jar-used-in-native-image","title":"Quarkus, Gradle, and External dependencies; Objects from external dependency not serializable only in native mode","body":"<p>Quarkus Native not includes external dependencies.\nYou needs to include by yourself</p>\n<p><a href=\"https://stackoverflow.com/questions/58311514/how-can-you-access-resources-in-transitive-jar-used-in-native-image\">Link to SoF response</a></p>\n"}],"owner":{"account_id":3615835,"reputation":1759,"user_id":3015723,"accept_rate":100,"display_name":"Snappawapa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69996147,"answer_count":1,"score":1,"last_activity_date":1637097542,"creation_date":1636730519,"question_id":69945196,"body_markdown":"I have a quarkus app, https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/open-qm-base-station that relies on a dependency I make and build locally (it is available in the local maven repo). I have taken the steps necessary to make this work with Quarkus (empty `beans.xml` file), and works fine when operating in regular jar mode.\r\n\r\nHowever,  when I operate in Native mode, the code can&#39;t make heads or tails of the objects from the dependency, typically throwing fits when de/serialization happens:\r\n\r\n`Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.ebp.openQuarterMaster.lib.core.rest.ErrorMessage and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)`\r\n\r\nI have tests running that confirm this (and seen in practice); when running in dev/ jar mode everything is fine. Native is a no-go. Is there anything I am missing on how to bring in non-jandex dependencies? I have attempted jandex plugins before but never seen them actually function.\r\n\r\nTo be clear:\r\n\r\n`./gradlew test` -&gt; works fine\r\n\r\n`./gradlew testNative` -&gt; fails \r\n\r\nIf testing for yourself, you will need to publish the dependency locally before attempting the quarkus app using `./gradlew publishToMavenLocal`: https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/libs/open-qm-core ","title":"Quarkus, Gradle, and External dependencies; Objects from external dependency not serializable only in native mode","body":"<p>I have a quarkus app, <a href=\"https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/open-qm-base-station\" rel=\"nofollow noreferrer\">https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/open-qm-base-station</a> that relies on a dependency I make and build locally (it is available in the local maven repo). I have taken the steps necessary to make this work with Quarkus (empty <code>beans.xml</code> file), and works fine when operating in regular jar mode.</p>\n<p>However,  when I operate in Native mode, the code can't make heads or tails of the objects from the dependency, typically throwing fits when de/serialization happens:</p>\n<p><code>Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.ebp.openQuarterMaster.lib.core.rest.ErrorMessage and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)</code></p>\n<p>I have tests running that confirm this (and seen in practice); when running in dev/ jar mode everything is fine. Native is a no-go. Is there anything I am missing on how to bring in non-jandex dependencies? I have attempted jandex plugins before but never seen them actually function.</p>\n<p>To be clear:</p>\n<p><code>./gradlew test</code> -&gt; works fine</p>\n<p><code>./gradlew testNative</code> -&gt; fails</p>\n<p>If testing for yourself, you will need to publish the dependency locally before attempting the quarkus app using <code>./gradlew publishToMavenLocal</code>: <a href=\"https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/libs/open-qm-core\" rel=\"nofollow noreferrer\">https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/libs/open-qm-core</a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1637034340,"post_id":69982232,"comment_id":123711029,"body_markdown":"When you hit the breakpoint in `setApplicationContext`, which classloader has loaded `ApplicationContextListener`? Which classloader has loaded `ApplicationContextListener` in `getMyBean`?","body":"When you hit the breakpoint in <code>setApplicationContext</code>, which classloader has loaded <code>ApplicationContextListener</code>? Which classloader has loaded <code>ApplicationContextListener</code> in <code>getMyBean</code>?"},{"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"score":0,"creation_date":1637089794,"post_id":69982232,"comment_id":123731530,"body_markdown":"Apparently, those are two distinct class loaders.\nUpdating the question with additional info.","body":"Apparently, those are two distinct class loaders. Updating the question with additional info."}],"answers":[{"tags":[],"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637097499,"creation_date":1637097499,"answer_id":69996139,"question_id":69982232,"body_markdown":"The reason is the [Spring Boot Automatic Restart feature][1] enabled by default via dependency to the `spring-boot-devtools` added by the [Spring Initializer][2] that I used to create the project.\r\n\r\nThat feature enables loading bean classes via additional class loader.\r\n\r\nIn this situation one way to get access to the static variable is like follows:\r\n\r\n\tprivate static ApplicationContext getContext() {\r\n\t\ttry {\r\n\t\t\treturn (ApplicationContext) getClass(ApplicationListenerContext.class.getName())\r\n\t\t\t\t.getField(&quot;CONTEXT&quot;).get(null);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static Class getClass(String classname) throws ClassNotFoundException {\r\n\t\tClassLoader classLoader = Thread.currentThread().getContextClassLoader();\r\n\t\tif(classLoader == null) {\r\n\t\t\tclassLoader = ApplicationListenerContext.class.getClassLoader();\r\n\t\t}\r\n\t\treturn classLoader.loadClass(classname);\r\n\t}\r\n\r\nOn the other hand, that workaround is not really needed. It is possible to switch off Automatic Restart feature by passing `-Dspring.devtools.restart.enabled=false` to the application startup parameters.\r\n\r\nEven simpler solution is to exclude `spring-boot-devtools` dependency from the exploded libraries that I package into the service Docker image:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;install&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                            &lt;excludeArtifactIds&gt;spring-boot-devtools&lt;/excludeArtifactIds&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\nThe following SO questions provide more details on this topic:\r\n\r\nhttps://stackoverflow.com/questions/57750294/class-loader-error-unnamed-module-of-loader-org-springframework-boot-devtools\r\n\r\nhttps://stackoverflow.com/questions/39173982/what-is-a-nosuchbeandefinitionexception-and-how-do-i-fix-it\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.devtools.restart\r\n  [2]: http://start.spring.io","title":"Static variable gets unset after being initialized during Spring Boot application startup","body":"<p>The reason is the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.devtools.restart\" rel=\"nofollow noreferrer\">Spring Boot Automatic Restart feature</a> enabled by default via dependency to the <code>spring-boot-devtools</code> added by the <a href=\"http://start.spring.io\" rel=\"nofollow noreferrer\">Spring Initializer</a> that I used to create the project.</p>\n<p>That feature enables loading bean classes via additional class loader.</p>\n<p>In this situation one way to get access to the static variable is like follows:</p>\n<pre><code>private static ApplicationContext getContext() {\n    try {\n        return (ApplicationContext) getClass(ApplicationListenerContext.class.getName())\n            .getField(&quot;CONTEXT&quot;).get(null);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate static Class getClass(String classname) throws ClassNotFoundException {\n    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\n    if(classLoader == null) {\n        classLoader = ApplicationListenerContext.class.getClassLoader();\n    }\n    return classLoader.loadClass(classname);\n}\n</code></pre>\n<p>On the other hand, that workaround is not really needed. It is possible to switch off Automatic Restart feature by passing <code>-Dspring.devtools.restart.enabled=false</code> to the application startup parameters.</p>\n<p>Even simpler solution is to exclude <code>spring-boot-devtools</code> dependency from the exploded libraries that I package into the service Docker image:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;install&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                        &lt;excludeArtifactIds&gt;spring-boot-devtools&lt;/excludeArtifactIds&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>The following SO questions provide more details on this topic:</p>\n<p><a href=\"https://stackoverflow.com/questions/57750294/class-loader-error-unnamed-module-of-loader-org-springframework-boot-devtools\">Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader</a></p>\n<p><a href=\"https://stackoverflow.com/questions/39173982/what-is-a-nosuchbeandefinitionexception-and-how-do-i-fix-it\">What is a NoSuchBeanDefinitionException and how do I fix it?</a></p>\n"}],"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":766,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69996139,"answer_count":1,"score":1,"last_activity_date":1637097499,"creation_date":1637019801,"question_id":69982232,"body_markdown":"I am trying to get access to the beans instantiated in my Spring Boot ApplicationContext from within static code for Java service provider (META-INF/services). I am using Java 14 (openjdk:14-jdk-slim).\r\n\r\nIn the remote debugger session, I can see that the static variable for the application context `CONTEXT` is getting set to the right value:\r\n```\r\n@Component\r\n@Slf4j\r\npublic class ApplicationContextListener implements ApplicationContextAware {\r\n\tprivate static volatile ApplicationContext CONTEXT;\r\n\r\n\t@Override\r\n\tpublic void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n\t\tCONTEXT = applicationContext;\r\n\t}\r\n...\r\n```\r\n\r\nNext time it is getting accessed at runtime later (from another thread), the variable `CONTEXT` is null, e.g. here:\r\n```\r\n\tpublic static MyBean getMyBean() {\r\n\t\treturn CONTEXT.getBean(MyBean.class);\r\n    }\r\n```\r\n\r\nI suspect that the problem is that the class holding the static variable gets &quot;unloaded&quot; in between. But 1) why would that happen to a class defining a valid bean in the application context 2) how can I avoid that?\r\n\r\nWhat can be the reason for the static variable to become null later during the application execution? There is no code setting the variable except for the one listed above. The `setApplicationContext` is only gets invoked once.\r\n\r\nIf the issue is related to the class unloading, how can I avoid that?\r\n\r\nMaybe my initialization code is executed against static variable in a class loaded by classloader A and access is taking place to the not initialized static variable in the same class loaded by the classlaoder B? Assuming this is the reason, how could I fix this problem?\r\n\r\nThank you!\r\n\r\n**Update**\r\n\r\nThe classloader of the class `ApplicationContextListener` instance when in the method `setApplicationContext` is `org.springframework.boot.devtools.restart.classloader.RestartClassLoader` as returned by `this.getClass().getClassLoader()`.\r\n\r\nWhen the debugger stops later in the `ApplicationContextListener` class static methods the debugger shows `ClassLoaders$AppClassLoader` for the `ApplicationContextListener.class.getClassLoader()`\r\n\r\nThe `Thread.currentThread().getContextClassLoader()` in the latter case (in static get) shows `org.springframework.boot.devtools.restart.classloader.RestartClassLoader` too.\r\n","title":"Static variable gets unset after being initialized during Spring Boot application startup","body":"<p>I am trying to get access to the beans instantiated in my Spring Boot ApplicationContext from within static code for Java service provider (META-INF/services). I am using Java 14 (openjdk:14-jdk-slim).</p>\n<p>In the remote debugger session, I can see that the static variable for the application context <code>CONTEXT</code> is getting set to the right value:</p>\n<pre><code>@Component\n@Slf4j\npublic class ApplicationContextListener implements ApplicationContextAware {\n    private static volatile ApplicationContext CONTEXT;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        CONTEXT = applicationContext;\n    }\n...\n</code></pre>\n<p>Next time it is getting accessed at runtime later (from another thread), the variable <code>CONTEXT</code> is null, e.g. here:</p>\n<pre><code>    public static MyBean getMyBean() {\n        return CONTEXT.getBean(MyBean.class);\n    }\n</code></pre>\n<p>I suspect that the problem is that the class holding the static variable gets &quot;unloaded&quot; in between. But 1) why would that happen to a class defining a valid bean in the application context 2) how can I avoid that?</p>\n<p>What can be the reason for the static variable to become null later during the application execution? There is no code setting the variable except for the one listed above. The <code>setApplicationContext</code> is only gets invoked once.</p>\n<p>If the issue is related to the class unloading, how can I avoid that?</p>\n<p>Maybe my initialization code is executed against static variable in a class loaded by classloader A and access is taking place to the not initialized static variable in the same class loaded by the classlaoder B? Assuming this is the reason, how could I fix this problem?</p>\n<p>Thank you!</p>\n<p><strong>Update</strong></p>\n<p>The classloader of the class <code>ApplicationContextListener</code> instance when in the method <code>setApplicationContext</code> is <code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader</code> as returned by <code>this.getClass().getClassLoader()</code>.</p>\n<p>When the debugger stops later in the <code>ApplicationContextListener</code> class static methods the debugger shows <code>ClassLoaders$AppClassLoader</code> for the <code>ApplicationContextListener.class.getClassLoader()</code></p>\n<p>The <code>Thread.currentThread().getContextClassLoader()</code> in the latter case (in static get) shows <code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader</code> too.</p>\n"},{"tags":["java","maven","exec-maven-plugin"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1637097778,"post_id":69996130,"comment_id":123734287,"body_markdown":"Is there a specific reason you defined the plugin in the `pluginManagement` section instead of in the `plugins` section ? Normally, the plugins in the `pluginManagement` section are inherited to &quot;children&quot; of that module, but not executed on the module itself.","body":"Is there a specific reason you defined the plugin in the <code>pluginManagement</code> section instead of in the <code>plugins</code> section ? Normally, the plugins in the <code>pluginManagement</code> section are inherited to &quot;children&quot; of that module, but not executed on the module itself."},{"owner":{"account_id":756193,"reputation":765,"user_id":764027,"accept_rate":74,"display_name":"Russ Petersen"},"score":0,"creation_date":1637099240,"post_id":69996130,"comment_id":123734657,"body_markdown":"The only reason I did there (or the fact I even have a pluginManagement sections) is because of my ignorance (I&#39;m very new to it all). I&#39;ll give that a try and report back. Thanks Turing85.","body":"The only reason I did there (or the fact I even have a pluginManagement sections) is because of my ignorance (I&#39;m very new to it all). I&#39;ll give that a try and report back. Thanks Turing85."},{"owner":{"account_id":756193,"reputation":765,"user_id":764027,"accept_rate":74,"display_name":"Russ Petersen"},"score":0,"creation_date":1637099735,"post_id":69996130,"comment_id":123734783,"body_markdown":"Ding, ding, ding we have a winner. I removed the `pluginManagement` tags and the plugins that were not needed by this sub-module and *voila*, it works. Comes down to my lack of experience. Thanks again!","body":"Ding, ding, ding we have a winner. I removed the <code>pluginManagement</code> tags and the plugins that were not needed by this sub-module and <i>voila</i>, it works. Comes down to my lack of experience. Thanks again!"}],"owner":{"account_id":756193,"reputation":765,"user_id":764027,"accept_rate":74,"display_name":"Russ Petersen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637101864,"answer_count":0,"score":0,"last_activity_date":1637097435,"creation_date":1637097435,"question_id":69996130,"body_markdown":"I&#39;ve configured *exec-mavein-plugin* in my module&#39;s pom.xml file, but something isn&#39;t quite right.\r\n\r\nI can invoke the goal directory `mvn exec:exec` and it works correctly and creates an executable file. \r\n\r\nI believe it is configured correctly to be attached to the *package* phase. But when the package phase is invoked the output file is not created. I&#39;m hoping a small tweak to the configuration will fix it.\r\n\r\nHere is the pom.xml file.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.exache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;parent&gt;\r\n    ...\r\n  &lt;/parent&gt;\r\n\r\n  &lt;artifactId&gt;rmqcm&lt;/artifactId&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;rmqcm&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;type&gt;maven-plugin&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;\r\n      &lt;plugins&gt;\r\n        ...\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n          &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n          &lt;executions&gt;\r\n            &lt;execution&gt;\r\n              &lt;id&gt;Create Executable&lt;/id&gt;\r\n              &lt;phase&gt;package&lt;/phase&gt;\r\n              &lt;goals&gt;\r\n                &lt;goal&gt;exec&lt;/goal&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n          &lt;configuration&gt;\r\n            &lt;executable&gt;${project.basedir}/scripts/make_rmqcm.bat&lt;/executable&gt;\r\n            &lt;arguments&gt;\r\n              &lt;argument&gt;${project.basedir}\\scripts\\executable_java_stub.sh&lt;/argument&gt;\r\n              &lt;argument&gt;${project.build.directory}\\${project.build.finalName}.jar&lt;/argument&gt;\r\n              &lt;argument&gt;${project.build.directory}\\${project.name}&lt;/argument&gt;\r\n            &lt;/arguments&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;        \r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nI appreciate your help.\r\n\r\nRuss Petersen","title":"How can I make the exec-maven-plugin goal be invoked with the Maven package phase?","body":"<p>I've configured <em>exec-mavein-plugin</em> in my module's pom.xml file, but something isn't quite right.</p>\n<p>I can invoke the goal directory <code>mvn exec:exec</code> and it works correctly and creates an executable file.</p>\n<p>I believe it is configured correctly to be attached to the <em>package</em> phase. But when the package phase is invoked the output file is not created. I'm hoping a small tweak to the configuration will fix it.</p>\n<p>Here is the pom.xml file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.exache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;parent&gt;\n    ...\n  &lt;/parent&gt;\n\n  &lt;artifactId&gt;rmqcm&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;rmqcm&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;type&gt;maven-plugin&lt;/type&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        ...\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n          &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n          &lt;executions&gt;\n            &lt;execution&gt;\n              &lt;id&gt;Create Executable&lt;/id&gt;\n              &lt;phase&gt;package&lt;/phase&gt;\n              &lt;goals&gt;\n                &lt;goal&gt;exec&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n          &lt;/executions&gt;\n          &lt;configuration&gt;\n            &lt;executable&gt;${project.basedir}/scripts/make_rmqcm.bat&lt;/executable&gt;\n            &lt;arguments&gt;\n              &lt;argument&gt;${project.basedir}\\scripts\\executable_java_stub.sh&lt;/argument&gt;\n              &lt;argument&gt;${project.build.directory}\\${project.build.finalName}.jar&lt;/argument&gt;\n              &lt;argument&gt;${project.build.directory}\\${project.name}&lt;/argument&gt;\n            &lt;/arguments&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;        \n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>I appreciate your help.</p>\n<p>Russ Petersen</p>\n"},{"tags":["java","file","ioexception","randomaccessfile","filechannel"],"comments":[{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":0,"creation_date":1501600022,"post_id":45441249,"comment_id":77843981,"body_markdown":"is this file memory mapped?","body":"is this file memory mapped?"},{"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"score":0,"creation_date":1501602050,"post_id":45441249,"comment_id":77845340,"body_markdown":"@diginoise, yes","body":"@diginoise, yes"},{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":1,"creation_date":1501602642,"post_id":45441249,"comment_id":77845704,"body_markdown":"heh, see here (section Windows File Delete): http://www.mapdb.org/blog/mmap_files_alloc_and_jvm_crash/ \nthe workaround is not to use NIO package :/","body":"heh, see here (section Windows File Delete): <a href=\"http://www.mapdb.org/blog/mmap_files_alloc_and_jvm_crash/\" rel=\"nofollow noreferrer\">mapdb.org/blog/mmap_files_alloc_and_jvm_crash</a>  the workaround is not to use NIO package :/"},{"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"score":0,"creation_date":1501604159,"post_id":45441249,"comment_id":77846650,"body_markdown":"This is really useful, thanks for the resource. After adding memory mapping and manipulation of the mapped buffer to my test app, I can now reliably get failures outside of my main wildfly application. Thanks a lot for pointing me to this resource.","body":"This is really useful, thanks for the resource. After adding memory mapping and manipulation of the mapped buffer to my test app, I can now reliably get failures outside of my main wildfly application. Thanks a lot for pointing me to this resource."}],"answers":[{"tags":[],"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637097411,"creation_date":1501617272,"answer_id":45446608,"question_id":45441249,"body_markdown":"There doesn&#39;t appear to be a proper answer / solution to my question, but at least I came across some details which inform the problem, thanks to the link @diginoise posted as a comment.\r\n\r\nI was getting the exception because I was trying to truncate a file for which there was a memory mapped byte buffer still &quot;active&quot;. Apparently there is no way for a user to manually unmap / release Windows&#39; handle on that memory (see [JDK bug][1] in oracle&#39;s bug database).\r\n\r\nIn the end, I think the answer is simply to NOT try truncate / delete these files when I&#39;m done with them but rather keep track of them and process them next time the application starts, that way they&#39;re guaranteed to not have active memory maps.\r\n\r\nBy the way, a `File.deleteOnExit()` also fails under these memory mapped file conditions.\r\n\r\nUntil I implement the more permanent fix of handling the files on next startup, I&#39;ve elected to [manually unmap][2] the memory via reflection. \r\n  \r\n  \r\nThis mitigation does function without throwing errors, it does allow truncation, and does allow deleteOnExit, but this is a short-term unsustainable workaround. It&#39;s not good practice to be using reflection to invoke a method that may not be there depending on the FileChannel implementation. With another implementation of FilChannel I might have broken temp files laying around that never get cleaned up.\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-4724038 &quot;JDK Bug 4724038&quot;\r\n  [2]: http://lotusandjava.blogspot.com/2012/02/how-to-unmap-mappedbytebuffer.html &quot;manual unmapping&quot;","title":"Why does Java FileChannel.truncate fail predictably on Windows only?","body":"<p>There doesn't appear to be a proper answer / solution to my question, but at least I came across some details which inform the problem, thanks to the link @diginoise posted as a comment.</p>\n<p>I was getting the exception because I was trying to truncate a file for which there was a memory mapped byte buffer still &quot;active&quot;. Apparently there is no way for a user to manually unmap / release Windows' handle on that memory (see <a href=\"https://bugs.openjdk.java.net/browse/JDK-4724038\" rel=\"nofollow noreferrer\" title=\"JDK Bug 4724038\">JDK bug</a> in oracle's bug database).</p>\n<p>In the end, I think the answer is simply to NOT try truncate / delete these files when I'm done with them but rather keep track of them and process them next time the application starts, that way they're guaranteed to not have active memory maps.</p>\n<p>By the way, a <code>File.deleteOnExit()</code> also fails under these memory mapped file conditions.</p>\n<p>Until I implement the more permanent fix of handling the files on next startup, I've elected to <a href=\"http://lotusandjava.blogspot.com/2012/02/how-to-unmap-mappedbytebuffer.html\" rel=\"nofollow noreferrer\" title=\"manual unmapping\">manually unmap</a> the memory via reflection.</p>\n<p>This mitigation does function without throwing errors, it does allow truncation, and does allow deleteOnExit, but this is a short-term unsustainable workaround. It's not good practice to be using reflection to invoke a method that may not be there depending on the FileChannel implementation. With another implementation of FilChannel I might have broken temp files laying around that never get cleaned up.</p>\n"}],"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1011,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1501692081,"accepted_answer_id":45446608,"answer_count":1,"score":4,"last_activity_date":1637097411,"creation_date":1501599391,"question_id":45441249,"body_markdown":"I have a web application running in Wildfly, and part of the application uses a temporary file via:\r\n`File.createTempFile(...)`.\r\nThat temporary file is then used as the destination file for a read-write java.io.RandomAccessFile stream. The java.nio.channels.FileChannel for that RandomAccessFile is what is interacted with and eventually truncated (when I&#39;m done with it). Portions of the file do get read-write mapped via `FileChannel.map()`\r\n\r\nAfter all interaction with the file is done, the file is truncated to the proper size using `fileChannel.truncate(size)`. This is where an IOException is always thrown  \r\n `at sun.nio.ch.FileDispatcherImpl.truncate0(Native Method)`\r\n  \r\nThe IOException message is generic:  \r\n`java.io.IOException: The requested operation cannot be performed on a file with a user-mapped section open`.\r\n\r\nThis is a temp file created explicitly by the same process and it has remained open for the duration of work with it, a matter of a few seconds probably. Googling around suggests maybe AV software has a handle on the file, or some other application is using it, but I&#39;ve tried running this on various VM&#39;s and regular windows boxes with different configurations and the problem are reliably reproducible. I think there must be some real abuse of the File facilities occurring, but I&#39;m at a loss.\r\n\r\nAlso, this exception is never seen on a Linux machine, the truncation works reliably. There is no file locking being performed, this is the only file in use, things are being buffered and written to the channel, but nothing very strange is going on.\r\n\r\nFor the record, I have created some sample test apps creating streams, channels, temp files, performing truncations, etc and I am unable to reproduce the problem in a standalone app. Unfortunately, I can&#39;t share the source directly, so I am doing my best to describe what&#39;s occurring in the hopes that someone has run into something similar and can offer some guidance.","title":"Why does Java FileChannel.truncate fail predictably on Windows only?","body":"<p>I have a web application running in Wildfly, and part of the application uses a temporary file via:\n<code>File.createTempFile(...)</code>.\nThat temporary file is then used as the destination file for a read-write java.io.RandomAccessFile stream. The java.nio.channels.FileChannel for that RandomAccessFile is what is interacted with and eventually truncated (when I'm done with it). Portions of the file do get read-write mapped via <code>FileChannel.map()</code></p>\n\n<p>After all interaction with the file is done, the file is truncated to the proper size using <code>fileChannel.truncate(size)</code>. This is where an IOException is always thrown<br>\n <code>at sun.nio.ch.FileDispatcherImpl.truncate0(Native Method)</code></p>\n\n<p>The IOException message is generic:<br>\n<code>java.io.IOException: The requested operation cannot be performed on a file with a user-mapped section open</code>.</p>\n\n<p>This is a temp file created explicitly by the same process and it has remained open for the duration of work with it, a matter of a few seconds probably. Googling around suggests maybe AV software has a handle on the file, or some other application is using it, but I've tried running this on various VM's and regular windows boxes with different configurations and the problem are reliably reproducible. I think there must be some real abuse of the File facilities occurring, but I'm at a loss.</p>\n\n<p>Also, this exception is never seen on a Linux machine, the truncation works reliably. There is no file locking being performed, this is the only file in use, things are being buffered and written to the channel, but nothing very strange is going on.</p>\n\n<p>For the record, I have created some sample test apps creating streams, channels, temp files, performing truncations, etc and I am unable to reproduce the problem in a standalone app. Unfortunately, I can't share the source directly, so I am doing my best to describe what's occurring in the hopes that someone has run into something similar and can offer some guidance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1637097241,"post_id":69996074,"comment_id":123734144,"body_markdown":"When you have a field `xy` and you assign it `xy=xx` is actually a shorthand notation for `this.xy=xx`.","body":"When you have a field <code>xy</code> and you assign it <code>xy=xx</code> is actually a shorthand notation for <code>this.xy=xx</code>."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":2,"creation_date":1637097308,"post_id":69996074,"comment_id":123734170,"body_markdown":"Also, when somebody says &quot;class variable&quot; they probably mean a &#39;static&#39; variable. Maybe you can make a more concrete example to illustrate your question?","body":"Also, when somebody says &quot;class variable&quot; they probably mean a &#39;static&#39; variable. Maybe you can make a more concrete example to illustrate your question?"}],"owner":{"account_id":18362363,"reputation":29,"user_id":13374208,"display_name":"Shervin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637097426,"answer_count":0,"score":0,"last_activity_date":1637097388,"creation_date":1637097084,"question_id":69996074,"body_markdown":"Does it make no difference whether I assign the values directly to the object via the constructor (within the class) (this.xy = xx) or whether I assign it to the class variable (xy = xx).\r\n\r\nI understood it to mean that the class itself was just a kind of construction plan. I thought that if you create an object from a class (Class class = new Class (xx)) and this calls the constructor, that at that point in time the object has already been created and now only the values are assigned for the first time. According to this understanding, it should actually not be possible to assign the values to the class and its attributes, but rather I would have to assign it directly to the object. But apparently it works anyway. Maybe someone can explain to me what I didn&#39;t quite understand.","title":"Difference between assignment to object variable and class variable/attribute","body":"<p>Does it make no difference whether I assign the values directly to the object via the constructor (within the class) (this.xy = xx) or whether I assign it to the class variable (xy = xx).</p>\n<p>I understood it to mean that the class itself was just a kind of construction plan. I thought that if you create an object from a class (Class class = new Class (xx)) and this calls the constructor, that at that point in time the object has already been created and now only the values are assigned for the first time. According to this understanding, it should actually not be possible to assign the values to the class and its attributes, but rather I would have to assign it directly to the object. But apparently it works anyway. Maybe someone can explain to me what I didn't quite understand.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1637097237,"post_id":69995881,"comment_id":123734141,"body_markdown":"Do you have to use a regular expression?  `&quot;/SearchServer&quot;.equals(new URI(string).getPath())` will check for a valid URI syntax.","body":"Do you have to use a regular expression?  <code>&quot;&#47;SearchServer&quot;.equals(new URI(string).getPath())</code> will check for a valid URI syntax."}],"answers":[{"tags":[],"owner":{"account_id":11054990,"reputation":713,"user_id":8118052,"display_name":"Ofer Skulsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637097387,"creation_date":1637097387,"answer_id":69996124,"question_id":69995881,"body_markdown":"you can start with:\r\n```java\r\nfinal String regex = &quot;((tcp|http|https):\\\\/\\\\/)?[\\\\w.]+(:\\\\d+)\\\\/[\\\\/\\\\w]*&quot;;\r\nfinal String string = &quot;tcp://serverName:8080/SearchServer&quot;;\r\n```\r\nso you optionally have the `protocol` with `://`,  \r\nfollowed by mix of letters and `.`, optional `:port` and then a mix of letters and `/`\r\n\r\nthere are more things to add, but this is a good start :)","title":"RegEx to check URL syntax","body":"<p>you can start with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String regex = &quot;((tcp|http|https):\\\\/\\\\/)?[\\\\w.]+(:\\\\d+)\\\\/[\\\\/\\\\w]*&quot;;\nfinal String string = &quot;tcp://serverName:8080/SearchServer&quot;;\n</code></pre>\n<p>so you optionally have the <code>protocol</code> with <code>://</code>,<br />\nfollowed by mix of letters and <code>.</code>, optional <code>:port</code> and then a mix of letters and <code>/</code></p>\n<p>there are more things to add, but this is a good start :)</p>\n"}],"owner":{"account_id":23359803,"reputation":21,"user_id":17432223,"display_name":"Ryan E"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1637097387,"creation_date":1637095852,"question_id":69995881,"body_markdown":"I&#39;m trying to use Regex to verify the syntax and pattern of a URL before it is used for testing. Regex is not my forte, however I thought it would be fairly simple. \r\n\r\nThe url pattern is a follows tcp://serverName:port/SearchServer\r\n\r\nWhat I have tried is this. However it fails what should be a valid syntax\r\n`String regex = &quot;(tcp:\\\\/\\\\/)?[A-Za-z0-9]?&quot; + &quot;/^:/$&quot; + &quot;[0-9]?&quot; + &quot;/^/SearchServer$/&quot;;`\r\n","title":"RegEx to check URL syntax","body":"<p>I'm trying to use Regex to verify the syntax and pattern of a URL before it is used for testing. Regex is not my forte, however I thought it would be fairly simple.</p>\n<p>The url pattern is a follows tcp://serverName:port/SearchServer</p>\n<p>What I have tried is this. However it fails what should be a valid syntax\n<code>String regex = &quot;(tcp:\\\\/\\\\/)?[A-Za-z0-9]?&quot; + &quot;/^:/$&quot; + &quot;[0-9]?&quot; + &quot;/^/SearchServer$/&quot;;</code></p>\n"},{"tags":["java","java-time"],"comments":[{"owner":{"account_id":6066704,"reputation":589,"user_id":4736732,"accept_rate":77,"display_name":"whydoieven"},"score":0,"creation_date":1532610923,"post_id":51539709,"comment_id":90047126,"body_markdown":"Hi Michael, sorry, messed that up. it is java.time","body":"Hi Michael, sorry, messed that up. it is java.time"},{"owner":{"account_id":6422582,"reputation":200,"user_id":4978856,"display_name":"ante_f"},"score":0,"creation_date":1532612596,"post_id":51539709,"comment_id":90048333,"body_markdown":"Hi @Sriram, I believe Tim&#39;s answer is better than mine and it should be accepted instead of mine.","body":"Hi @Sriram, I believe Tim&#39;s answer is better than mine and it should be accepted instead of mine."},{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1532613433,"post_id":51539709,"comment_id":90048853,"body_markdown":"@nytez Nah...your code runs, I tested it.  Enjoy the onslaught of green points in your inbox :P","body":"@nytez Nah...your code runs, I tested it.  Enjoy the onslaught of green points in your inbox :P"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1532693629,"post_id":51539709,"comment_id":90082146,"body_markdown":"There should be no reason to switch back to `Calendar` (and many reasons not to). Median? Do you mean average? The median between two points doesn’t seem very interesting, and I know of a couple of different definitions of what it is.","body":"There should be no reason to switch back to <code>Calendar</code> (and many reasons not to). Median? Do you mean average? The median between two points doesn’t seem very interesting, and I know of a couple of different definitions of what it is."}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1532612079,"creation_date":1532610999,"answer_id":51539802,"question_id":51539709,"body_markdown":"Try using `DAYS.between()`:\r\n\r\n    LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\r\n    LocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\r\n    long numDays = ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax);\r\n    LocalDate median = gerbutsmin.plusDays(numDays / 2L);  // plusDays takes a long\r\n    System.out.println(median);\r\n\r\n    2019-03-17\r\n    (output as of today, which is 2019-07-26)\r\n\r\n[&lt;h2&gt;Demo&lt;/h2&gt;][1]\r\n\r\nThere is a boundary condition should the difference between your min and max dates be an odd number.  In this case, there is no formal median day, but rather the median would fall in between two days.\r\n\r\n**Note:**\r\n\r\nIf you&#39;re wondering what happens exactly in the edge case, if the low date were today (`2018-07-26`) and the high date three days away (`2018-07-29`), then the median would be reported as `2018-07-27`.\r\n\r\n  [1]: http://rextester.com/HLPTP88325","title":"Find the Median Date between two dates using Java 8","body":"<p>Try using <code>DAYS.between()</code>:</p>\n\n<pre><code>LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\nLocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\nlong numDays = ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax);\nLocalDate median = gerbutsmin.plusDays(numDays / 2L);  // plusDays takes a long\nSystem.out.println(median);\n\n2019-03-17\n(output as of today, which is 2019-07-26)\n</code></pre>\n\n<p><a href=\"http://rextester.com/HLPTP88325\" rel=\"noreferrer\"><h2>Demo</h2></a></p>\n\n<p>There is a boundary condition should the difference between your min and max dates be an odd number.  In this case, there is no formal median day, but rather the median would fall in between two days.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>If you're wondering what happens exactly in the edge case, if the low date were today (<code>2018-07-26</code>) and the high date three days away (<code>2018-07-29</code>), then the median would be reported as <code>2018-07-27</code>.</p>\n"},{"tags":[],"owner":{"account_id":6422582,"reputation":200,"user_id":4978856,"display_name":"ante_f"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1532611165,"creation_date":1532611153,"answer_id":51539859,"question_id":51539709,"body_markdown":"    LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\r\n    LocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\r\n    \r\n    LocalDate median = gerbutsmin.plusDays(ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax) / 2);","title":"Find the Median Date between two dates using Java 8","body":"<pre><code>LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\nLocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\n\nLocalDate median = gerbutsmin.plusDays(ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax) / 2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12547420,"reputation":353,"user_id":9130223,"display_name":"MBaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532611348,"creation_date":1532611348,"answer_id":51539943,"question_id":51539709,"body_markdown":"&quot;Middle of two dates&quot; is not unambiguously defined - you must decide how to handle dates an odd number of days apart (e.g. what is the middle date between 1st and 4th of a month, or between 1st and 2nd), and what to do with the time portion of the date object.\r\n\r\nThe concrete problem with your approach is that dates are not numbers, so you cannot add them and divide them by two. To do that, use the getTime() method to obtain the number of seconds since the epoch, and operate on that:\r\n\r\n    var middate = new Date((startdate.getTime() + enddate.getTime()) / 2.0);\r\nThis will give you the middle between two dates, treating them as points in time.\r\n\r\nClick [here](https://stackoverflow.com/a/21603229/9130223)","title":"Find the Median Date between two dates using Java 8","body":"<p>\"Middle of two dates\" is not unambiguously defined - you must decide how to handle dates an odd number of days apart (e.g. what is the middle date between 1st and 4th of a month, or between 1st and 2nd), and what to do with the time portion of the date object.</p>\n\n<p>The concrete problem with your approach is that dates are not numbers, so you cannot add them and divide them by two. To do that, use the getTime() method to obtain the number of seconds since the epoch, and operate on that:</p>\n\n<pre><code>var middate = new Date((startdate.getTime() + enddate.getTime()) / 2.0);\n</code></pre>\n\n<p>This will give you the middle between two dates, treating them as points in time.</p>\n\n<p>Click <a href=\"https://stackoverflow.com/a/21603229/9130223\">here</a></p>\n"},{"tags":[],"owner":{"account_id":4270832,"reputation":1,"user_id":7455006,"display_name":"manoj panwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637097211,"creation_date":1637097211,"answer_id":69996092,"question_id":51539709,"body_markdown":"\tLocalDateTime startime = LocalDateTime.now();\r\n\tLocalDateTime endtime = startime.plusDays(4);\r\n\t\t\r\n\tlong diff = endtime.until(startime, ChronoUnit.MINUTES);\r\n\tLocalDateTime middleTime = startime.plusMinutes(diff / 2); ","title":"Find the Median Date between two dates using Java 8","body":"<pre><code>LocalDateTime startime = LocalDateTime.now();\nLocalDateTime endtime = startime.plusDays(4);\n    \nlong diff = endtime.until(startime, ChronoUnit.MINUTES);\nLocalDateTime middleTime = startime.plusMinutes(diff / 2); \n</code></pre>\n"}],"owner":{"account_id":6066704,"reputation":589,"user_id":4736732,"accept_rate":77,"display_name":"whydoieven"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3006,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":51539859,"answer_count":4,"score":4,"last_activity_date":1637097211,"creation_date":1532610728,"question_id":51539709,"body_markdown":"I&#39;m finding it difficult that what it sounds. \r\n\r\nSo, I have a max date and a min date and I need to find the median date between these two dates. I use Java 8 to find my max and min dates, \r\n\r\n    LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\r\n    LocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\r\n\r\nHow would I go ahead after this? Maybe I need to switch back to Calander? ","title":"Find the Median Date between two dates using Java 8","body":"<p>I'm finding it difficult that what it sounds. </p>\n\n<p>So, I have a max date and a min date and I need to find the median date between these two dates. I use Java 8 to find my max and min dates, </p>\n\n<pre><code>LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\nLocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\n</code></pre>\n\n<p>How would I go ahead after this? Maybe I need to switch back to Calander? </p>\n"},{"tags":["java","raspberry-pi","pwm","pi4j"],"answers":[{"tags":[],"owner":{"account_id":32369,"reputation":51044,"user_id":89766,"accept_rate":92,"display_name":"George Profenza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637097148,"creation_date":1637097148,"answer_id":69996085,"question_id":69995901,"body_markdown":"I haven&#39;t used NeoPixels directly on a Pi before (though I have many times used [FadeCandy][1] which is a USB LED controller that also does some nice dithering/frame blending).\r\n\r\nDriving NeoPixels isn&#39;t as straight forward as plain PWM on individual LEDs.\r\n\r\nThere&#39;s a good [Adafruit RaspberryPi NeoPixel wiring/coding tutorial][2].\r\nThe notes on wiring/power are super useful. Even though the code is in Python,\r\nit&#39;s still useful to test/run.\r\n\r\nHaving a quick look at the pi4j documentation, while it has all the &quot;ingredients&quot;, it doesn&#39;t have built-in support for NeoPixels.\r\nDoing a quick search I spotted [the diozero library][3] which seems to have [support for NeoPixels][4].\r\n\r\nI haven&#39;t tested `diozero`, but it&#39;s worth giving it a go.\r\n\r\n\r\n  [1]: https://www.adafruit.com/product/1689\r\n  [2]: https://learn.adafruit.com/neopixels-on-raspberry-pi?view=all\r\n  [3]: https://www.diozero.com/\r\n  [4]: https://www.diozero.com/devices/ledstrips.html","title":"How to control adressable RGB leds with raspberryPi in Java","body":"<p>I haven't used NeoPixels directly on a Pi before (though I have many times used <a href=\"https://www.adafruit.com/product/1689\" rel=\"nofollow noreferrer\">FadeCandy</a> which is a USB LED controller that also does some nice dithering/frame blending).</p>\n<p>Driving NeoPixels isn't as straight forward as plain PWM on individual LEDs.</p>\n<p>There's a good <a href=\"https://learn.adafruit.com/neopixels-on-raspberry-pi?view=all\" rel=\"nofollow noreferrer\">Adafruit RaspberryPi NeoPixel wiring/coding tutorial</a>.\nThe notes on wiring/power are super useful. Even though the code is in Python,\nit's still useful to test/run.</p>\n<p>Having a quick look at the pi4j documentation, while it has all the &quot;ingredients&quot;, it doesn't have built-in support for NeoPixels.\nDoing a quick search I spotted <a href=\"https://www.diozero.com/\" rel=\"nofollow noreferrer\">the diozero library</a> which seems to have <a href=\"https://www.diozero.com/devices/ledstrips.html\" rel=\"nofollow noreferrer\">support for NeoPixels</a>.</p>\n<p>I haven't tested <code>diozero</code>, but it's worth giving it a go.</p>\n"}],"owner":{"account_id":19436193,"reputation":120,"user_id":14215608,"display_name":"error13660"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":747,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69996085,"answer_count":1,"score":2,"last_activity_date":1637097148,"creation_date":1637096003,"question_id":69995901,"body_markdown":"I have a strip of WS2811 adressable RGB leds and I am trying to control them using my raspberry pi. I am programming in java.\r\nTo access the GPIO I am using a java library called Pi4j (version 1.2; java 8).\r\nThis version has built-in PWM control.\r\n\r\nMy question is the following:\r\nHow can I send the data to the leds trough a GPIO pin?\r\n\r\n(I am still a beginner when it comes to physical computing, so please be gentle)","title":"How to control adressable RGB leds with raspberryPi in Java","body":"<p>I have a strip of WS2811 adressable RGB leds and I am trying to control them using my raspberry pi. I am programming in java.\nTo access the GPIO I am using a java library called Pi4j (version 1.2; java 8).\nThis version has built-in PWM control.</p>\n<p>My question is the following:\nHow can I send the data to the leds trough a GPIO pin?</p>\n<p>(I am still a beginner when it comes to physical computing, so please be gentle)</p>\n"},{"tags":["java","android","android-permissions","android-10.0"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620971386,"post_id":67529541,"comment_id":119360422,"body_markdown":"Requesting legacy external storage in manifest should be enough to access the Documents folder in the classic way under Android 10.","body":"Requesting legacy external storage in manifest should be enough to access the Documents folder in the classic way under Android 10."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620971464,"post_id":67529541,"comment_id":119360436,"body_markdown":"Of course the user can browse the whole external storage when the gui for ACTION_OPEN_DOCUMENTS_TREE opens. Learn the user how to browse. Indeed some things are tricky. That gui does not show internal/external storage by default..","body":"Of course the user can browse the whole external storage when the gui for ACTION_OPEN_DOCUMENTS_TREE opens. Learn the user how to browse. Indeed some things are tricky. That gui does not show internal/external storage by default.."},{"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"score":0,"creation_date":1620972579,"post_id":67529541,"comment_id":119360711,"body_markdown":"Thanks. I suspect requesting legacy storage might be being ignored when targeting Android 30.","body":"Thanks. I suspect requesting legacy storage might be being ignored when targeting Android 30."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620977225,"post_id":67529541,"comment_id":119362055,"body_markdown":"No. It is not for an Android 10 device.","body":"No. It is not for an Android 10 device."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620983881,"post_id":67529541,"comment_id":119364313,"body_markdown":"You will not have forgotten to add code for requesting  runtime permissions? And can you use the Pictures or DCIM directory?","body":"You will not have forgotten to add code for requesting  runtime permissions? And can you use the Pictures or DCIM directory?"},{"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"score":0,"creation_date":1620986074,"post_id":67529541,"comment_id":119365081,"body_markdown":"Found the problem (see answer below). Thanks for your help.","body":"Found the problem (see answer below). Thanks for your help."},{"owner":{"account_id":2605326,"reputation":670,"user_id":2256592,"display_name":"Joe Okatch"},"score":1,"creation_date":1633733079,"post_id":67529541,"comment_id":122847514,"body_markdown":"I think there&#39;s a slight confusion. I noticed that it should be Environment.getExternalStoragePublicDirectory and not Environment.getExternalPublicStorageDirectory","body":"I think there&#39;s a slight confusion. I noticed that it should be Environment.getExternalStoragePublicDirectory and not Environment.getExternalPublicStorageDirectory"},{"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"score":0,"creation_date":1637097089,"post_id":67529541,"comment_id":123734078,"body_markdown":"Thanks. You are right. I have corrected this.","body":"Thanks. You are right. I have corrected this."}],"answers":[{"tags":[],"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637097054,"creation_date":1620984017,"answer_id":67531936,"question_id":67529541,"body_markdown":"Actually, the problem was that on this particular Android 10 device there was no &quot;Documents&quot; folder. Manually creating one fixed it. So the real gotcha is that ```Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)``` sometimes doesn&#39;t give you a &quot;Documents&quot; directory depending on the device.\r\n\r\nHowever, I&#39;m not convinced this is the correct way to do this with Android 11 (even though it&#39;s currently working for me).","title":"Read/Write access to &#39;Documents&#39; folder for all Android versions?","body":"<p>Actually, the problem was that on this particular Android 10 device there was no &quot;Documents&quot; folder. Manually creating one fixed it. So the real gotcha is that <code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)</code> sometimes doesn't give you a &quot;Documents&quot; directory depending on the device.</p>\n<p>However, I'm not convinced this is the correct way to do this with Android 11 (even though it's currently working for me).</p>\n"}],"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637097054,"creation_date":1620970899,"question_id":67529541,"body_markdown":"I&#39;m currently using ```Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)``` as a path. I have requested ```android.permission.WRITE_EXTERNAL_STORAGE```. I am targeting SDK 30. I have had success reading and writing a file on Android 8 and Android 11, but not Android 10. Adding ```android:ignore=&quot;ScopedStorage&quot;``` and ```android:requestLegacyExternalStorage=&quot;true&quot;``` to my AndroidManifest.xml didn&#39;t work.\r\n\r\nReading through the official docs, it&#39;s very confusing. I tried an alternative approach with an  ```ACTION_OPEN_DOCUMENT_TREE``` indent, but all I could navigate was the Downloads folder. I couldn&#39;t get to the Documents folder.\r\n\r\nThere are multiple questions on here that are similar, but don&#39;t quite get to the nub of the matter for me. Can anyone please share some light on how to do something as basic as simple file access to the Documents folder?\r\n","title":"Read/Write access to &#39;Documents&#39; folder for all Android versions?","body":"<p>I'm currently using <code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)</code> as a path. I have requested <code>android.permission.WRITE_EXTERNAL_STORAGE</code>. I am targeting SDK 30. I have had success reading and writing a file on Android 8 and Android 11, but not Android 10. Adding <code>android:ignore=&quot;ScopedStorage&quot;</code> and <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> to my AndroidManifest.xml didn't work.</p>\n<p>Reading through the official docs, it's very confusing. I tried an alternative approach with an  <code>ACTION_OPEN_DOCUMENT_TREE</code> indent, but all I could navigate was the Downloads folder. I couldn't get to the Documents folder.</p>\n<p>There are multiple questions on here that are similar, but don't quite get to the nub of the matter for me. Can anyone please share some light on how to do something as basic as simple file access to the Documents folder?</p>\n"},{"tags":["java","mysql","gis","jooq"],"comments":[{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1495449403,"post_id":44075098,"comment_id":75240642,"body_markdown":"What&#39;s the expected SQL string you&#39;re trying to generate?","body":"What&#39;s the expected SQL string you&#39;re trying to generate?"},{"owner":{"account_id":1316021,"reputation":169,"user_id":2815142,"display_name":"Desiderantes"},"score":0,"creation_date":1495484350,"post_id":44075098,"comment_id":75262227,"body_markdown":"Something like `INSERT INTO table_test (poly ) VALUES (ST_GeomFromText ( &#39;POLYGON (00,11,00)&#39;));`\n\n`SELECT ST_AsWKT(table_test.poly) from poly WHERE ...`","body":"Something like <code>INSERT INTO table_test (poly ) VALUES (ST_GeomFromText ( &#39;POLYGON (00,11,00)&#39;));</code>  <code>SELECT ST_AsWKT(table_test.poly) from poly WHERE ...</code>"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637096622,"creation_date":1495547705,"answer_id":44136850,"question_id":44075098,"body_markdown":"*Note that starting from jOOQ 3.16 ([see #982][1]), jOOQ supports various popular GIS implementations out of the box.*\r\n\r\nFrom what I understand, you&#39;d like two things to happen automatically:\r\n\r\n### String bind values should be wrapped with the `ST_GeomFromText()` function\r\n\r\nThis is the &quot;easy&quot; part and you almost got it right:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Override\r\n    public void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\r\n        ctx.render()\r\n           .sql(&quot;ST_GeomFromText(&quot;)\r\n           // This will use your converter to convert from a Polygon to &quot;Object&quot;\r\n           // prior to binding the variable\r\n           .visit(DSL.val(ctx.convert(converter()).value()))\r\n           .sql(&quot;)&quot;);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\r\n        // No wrapping of the bind variable in functions can be done here!\r\n        ctx.statement().setString(ctx.index(), ctx.convert(converter()).value());\r\n    }\r\n\r\n### Polygon type columns should be formatted with the `ST_AsWKT()` function\r\n\r\nYou (probably) don&#39;t have to do anything specific here inside of the binding, as your binding cannot influence any expression where no bind variable is involved (e.g. an ordinary column expression).\r\n\r\nInstead, you might need to adapt your converter (the one inside the binding) to be able to read any type that comes back from the JDBC driver and convert that into a `Polygon`\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/982","title":"MySQL POLYGON ←→ Jts Polygon with JOOQ (as WKT)","body":"<p><em>Note that starting from jOOQ 3.16 (<a href=\"https://github.com/jOOQ/jOOQ/issues/982\" rel=\"nofollow noreferrer\">see #982</a>), jOOQ supports various popular GIS implementations out of the box.</em></p>\n<p>From what I understand, you'd like two things to happen automatically:</p>\n<h3>String bind values should be wrapped with the <code>ST_GeomFromText()</code> function</h3>\n<p>This is the &quot;easy&quot; part and you almost got it right:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\n    ctx.render()\n       .sql(&quot;ST_GeomFromText(&quot;)\n       // This will use your converter to convert from a Polygon to &quot;Object&quot;\n       // prior to binding the variable\n       .visit(DSL.val(ctx.convert(converter()).value()))\n       .sql(&quot;)&quot;);\n}\n\n\n@Override\npublic void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\n    // No wrapping of the bind variable in functions can be done here!\n    ctx.statement().setString(ctx.index(), ctx.convert(converter()).value());\n}\n</code></pre>\n<h3>Polygon type columns should be formatted with the <code>ST_AsWKT()</code> function</h3>\n<p>You (probably) don't have to do anything specific here inside of the binding, as your binding cannot influence any expression where no bind variable is involved (e.g. an ordinary column expression).</p>\n<p>Instead, you might need to adapt your converter (the one inside the binding) to be able to read any type that comes back from the JDBC driver and convert that into a <code>Polygon</code></p>\n"}],"owner":{"account_id":1316021,"reputation":169,"user_id":2815142,"display_name":"Desiderantes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44136850,"answer_count":1,"score":1,"last_activity_date":1637096622,"creation_date":1495212177,"question_id":44075098,"body_markdown":"I&#39;m trying to get a seamlessly conversion between MySQL POLYGON type, and Jts Polygon while using jOOQ (3.9.x). Ideally, I want to just parse the WKT (well known text) from the DB into the Jts type. However, the generated queries are not working, I see that they get simple quote marks around the function that converts to text, rendering it just text. Here&#39;s the converter and the binding that I&#39;m using. Am I doing this right? How should I approach the conversion via ST_AsWKT and ST_GeomFromText?\r\n\r\n    public class PolygonConverter implements Converter&lt;Object, Polygon&gt; {\r\n    \r\n    \r\n        /**\r\n         * Convert WK string into Polygon\r\n         */\r\n    \r\n        @Override\r\n        public Polygon from(Object databaseObject) {\r\n            if (databaseObject == null) {\r\n                return null;\r\n            }\r\n            String wkString = databaseObject.toString();\r\n            WKTReader reader = JtsSpatialContext.GEO.getWktShapeParser();\r\n            try {\r\n                Polygon poly = (Polygon)reader.parse(wkString);\r\n                return poly;\r\n            } catch (java.text.ParseException e) {\r\n                throw new IllegalArgumentException(e);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Object to(Polygon userObject) {\r\n            if (userObject == null) {\r\n                return null;\r\n            }\r\n            return userObject.toString();\r\n        }\r\n    \r\n        @Override\r\n        public Class&lt;Object&gt; fromType() {\r\n            return Object.class;\r\n        }\r\n    \r\n        @Override\r\n        public Class&lt;Polygon&gt; toType() {\r\n            return Polygon.class;\r\n        }\r\n    }\r\n\r\nThe Binding:\r\n\r\n    public class MySQLPolygonBinding implements Binding&lt;Object, Polygon&gt; {\r\n        @Override\r\n        public Converter&lt;Object, Polygon&gt; converter() {\r\n            return new PolygonConverter();\r\n        }\r\n    \r\n        @Override\r\n        public void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            ctx.render().visit(DSL.sql(&quot;ST_AsWKT(?)&quot;));\r\n        }\r\n    \r\n        @Override\r\n        public void register(BindingRegisterContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            throw new SQLFeatureNotSupportedException();\r\n        }\r\n    \r\n        @Override\r\n        public void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            String resultStr = null;\r\n            Object obj = ctx.convert(converter()).value();\r\n            if (obj != null) {\r\n                resultStr = String.format(&quot;ST_GeomFromText(&#39;%s&#39;)&quot;, obj,toString() );\r\n            }\r\n            ctx.statement().setObject(ctx.index(), resultStr);\r\n        }\r\n    \r\n        @Override\r\n        public void set(BindingSetSQLOutputContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            throw new SQLFeatureNotSupportedException();\r\n        }\r\n    \r\n        @Override\r\n        public void get(BindingGetResultSetContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            ctx.convert(converter()).value(ctx.resultSet().getString(ctx.index()));\r\n        }\r\n    \r\n        @Override\r\n        public void get(BindingGetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            ctx.convert(converter()).value(ctx.statement().getString(ctx.index()));\r\n        }\r\n    \r\n        @Override\r\n        public void get(BindingGetSQLInputContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            throw new SQLFeatureNotSupportedException();\r\n        }\r\n    }","title":"MySQL POLYGON ←→ Jts Polygon with JOOQ (as WKT)","body":"<p>I'm trying to get a seamlessly conversion between MySQL POLYGON type, and Jts Polygon while using jOOQ (3.9.x). Ideally, I want to just parse the WKT (well known text) from the DB into the Jts type. However, the generated queries are not working, I see that they get simple quote marks around the function that converts to text, rendering it just text. Here's the converter and the binding that I'm using. Am I doing this right? How should I approach the conversion via ST_AsWKT and ST_GeomFromText?</p>\n\n<pre><code>public class PolygonConverter implements Converter&lt;Object, Polygon&gt; {\n\n\n    /**\n     * Convert WK string into Polygon\n     */\n\n    @Override\n    public Polygon from(Object databaseObject) {\n        if (databaseObject == null) {\n            return null;\n        }\n        String wkString = databaseObject.toString();\n        WKTReader reader = JtsSpatialContext.GEO.getWktShapeParser();\n        try {\n            Polygon poly = (Polygon)reader.parse(wkString);\n            return poly;\n        } catch (java.text.ParseException e) {\n            throw new IllegalArgumentException(e);\n        }\n    }\n\n    @Override\n    public Object to(Polygon userObject) {\n        if (userObject == null) {\n            return null;\n        }\n        return userObject.toString();\n    }\n\n    @Override\n    public Class&lt;Object&gt; fromType() {\n        return Object.class;\n    }\n\n    @Override\n    public Class&lt;Polygon&gt; toType() {\n        return Polygon.class;\n    }\n}\n</code></pre>\n\n<p>The Binding:</p>\n\n<pre><code>public class MySQLPolygonBinding implements Binding&lt;Object, Polygon&gt; {\n    @Override\n    public Converter&lt;Object, Polygon&gt; converter() {\n        return new PolygonConverter();\n    }\n\n    @Override\n    public void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\n        ctx.render().visit(DSL.sql(\"ST_AsWKT(?)\"));\n    }\n\n    @Override\n    public void register(BindingRegisterContext&lt;Polygon&gt; ctx) throws SQLException {\n        throw new SQLFeatureNotSupportedException();\n    }\n\n    @Override\n    public void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\n        String resultStr = null;\n        Object obj = ctx.convert(converter()).value();\n        if (obj != null) {\n            resultStr = String.format(\"ST_GeomFromText('%s')\", obj,toString() );\n        }\n        ctx.statement().setObject(ctx.index(), resultStr);\n    }\n\n    @Override\n    public void set(BindingSetSQLOutputContext&lt;Polygon&gt; ctx) throws SQLException {\n        throw new SQLFeatureNotSupportedException();\n    }\n\n    @Override\n    public void get(BindingGetResultSetContext&lt;Polygon&gt; ctx) throws SQLException {\n        ctx.convert(converter()).value(ctx.resultSet().getString(ctx.index()));\n    }\n\n    @Override\n    public void get(BindingGetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\n        ctx.convert(converter()).value(ctx.statement().getString(ctx.index()));\n    }\n\n    @Override\n    public void get(BindingGetSQLInputContext&lt;Polygon&gt; ctx) throws SQLException {\n        throw new SQLFeatureNotSupportedException();\n    }\n}\n</code></pre>\n"},{"tags":["java","fonts","graphics","character","awt"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637097861,"post_id":69995985,"comment_id":123734305,"body_markdown":"You&#39;re really going to want to spend some time reading through [Working with Text APIs](https://docs.oracle.com/javase/tutorial/2d/text/index.html). For [example](https://stackoverflow.com/questions/14284754/java-center-text-in-rectangle/14287270#14287270), [example](https://stackoverflow.com/questions/29247833/in-java-graphics2d-how-can-text-be-center-aligned-on-a-rectangle/29247946#29247946), [example](https://stackoverflow.com/questions/20794285/creating-a-string-inside-a-rectangle/20794440#20794440),","body":"You&#39;re really going to want to spend some time reading through <a href=\"https://docs.oracle.com/javase/tutorial/2d/text/index.html\" rel=\"nofollow noreferrer\">Working with Text APIs</a>. For <a href=\"https://stackoverflow.com/questions/14284754/java-center-text-in-rectangle/14287270#14287270\">example</a>, <a href=\"https://stackoverflow.com/questions/29247833/in-java-graphics2d-how-can-text-be-center-aligned-on-a-rectangle/29247946#29247946\">example</a>, <a href=\"https://stackoverflow.com/questions/20794285/creating-a-string-inside-a-rectangle/20794440#20794440\">example</a>,"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637097888,"post_id":69995985,"comment_id":123734312,"body_markdown":"[example](https://stackoverflow.com/questions/18565066/centering-string-in-panel/18565132#18565132), [example](https://stackoverflow.com/questions/69308312/java-having-difficulty-centering-textlayouts-on-a-graphics2d-with-various-letter/69308607#69308607)","body":"<a href=\"https://stackoverflow.com/questions/18565066/centering-string-in-panel/18565132#18565132\">example</a>, <a href=\"https://stackoverflow.com/questions/69308312/java-having-difficulty-centering-textlayouts-on-a-graphics2d-with-various-letter/69308607#69308607\">example</a>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637098133,"post_id":69995985,"comment_id":123734374,"body_markdown":"Now, having said that, I might consider a different approach, which might seem more complicated, but might make it easier to maintain. I might start with a custom layout manager (depending on the complexity of the layout) and have it control the layout of the &quot;boxes&quot;, which would be custom panels (transparent, paint the borders all that) and then simply use a `JLabel` for the text.  This allows the panel and label to control all the issues with calculating layout position of the text AND you get some extra support with limited HTML (if you want to do something fancy)","body":"Now, having said that, I might consider a different approach, which might seem more complicated, but might make it easier to maintain. I might start with a custom layout manager (depending on the complexity of the layout) and have it control the layout of the &quot;boxes&quot;, which would be custom panels (transparent, paint the borders all that) and then simply use a <code>JLabel</code> for the text.  This allows the panel and label to control all the issues with calculating layout position of the text AND you get some extra support with limited HTML (if you want to do something fancy)"}],"owner":{"account_id":20231569,"reputation":85,"user_id":14837971,"display_name":"AdmosJagashvili"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637096548,"creation_date":1637096548,"question_id":69995985,"body_markdown":"I am currently working on a project to mass-produce graphics such as you see below:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ipaKZ.png\r\n\r\nThe part I want to be able to swap out with any other word is is &quot;&lt;Table&quot;&gt;. For aesthetic reasons, I want this text to always be dead-center in the rounded rectangle. I am using Graphics2D to achieve this; here is the code that generated the text:\r\n```\r\n\t\tg2D.setColor(Color.WHITE);\r\n\t\tint fontSize = 55;\r\n\t\tint fontX = 410;\r\n\t\tint fontY = 75;\r\n\t\tg2D.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, fontSize));\r\n\t\tg2D.drawString(&quot;&lt;Table&gt;&quot;, fontX, fontY);\r\n```\r\nI am going to create a method that generates fontSize, fontX, and fontY based on what would make it centered. If all characters were the same width, I would obviously not need help, but I am wondering how to handle very thin characters such as &quot;i&quot;. I am not asking for anyone to solve the problem for me or give me the answer; in fact I would like to be able to figure it out myself. However, I do want some pointer on what to research/look up in order to solve this problem, as well as other considerations I didn&#39;t consider.","title":"How to get started figuring out a character-width puzzle","body":"<p>I am currently working on a project to mass-produce graphics such as you see below:\n<a href=\"https://i.stack.imgur.com/ipaKZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ipaKZ.png\" alt=\"enter image description here\" /></a></p>\n<p>The part I want to be able to swap out with any other word is is &quot;&lt;Table&quot;&gt;. For aesthetic reasons, I want this text to always be dead-center in the rounded rectangle. I am using Graphics2D to achieve this; here is the code that generated the text:</p>\n<pre><code>        g2D.setColor(Color.WHITE);\n        int fontSize = 55;\n        int fontX = 410;\n        int fontY = 75;\n        g2D.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, fontSize));\n        g2D.drawString(&quot;&lt;Table&gt;&quot;, fontX, fontY);\n</code></pre>\n<p>I am going to create a method that generates fontSize, fontX, and fontY based on what would make it centered. If all characters were the same width, I would obviously not need help, but I am wondering how to handle very thin characters such as &quot;i&quot;. I am not asking for anyone to solve the problem for me or give me the answer; in fact I would like to be able to figure it out myself. However, I do want some pointer on what to research/look up in order to solve this problem, as well as other considerations I didn't consider.</p>\n"},{"tags":["java","sql","postgresql","postgis","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1637096403,"creation_date":1468563275,"answer_id":38389020,"question_id":38370831,"body_markdown":"### Using jOOQ 3.16 out-of-the-box GIS support\r\n\r\nStarting with jOOQ 3.16 ([see #982][1]), jOOQ will offer out-of-the-box support for the most popular GIS implementations, including PostGIS\r\n\r\nAs always with jOOQ, just translate your query to the equivalent jOOQ query:\r\n\r\n```java\r\nctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\r\n   .from(SENSOR_LOCATION)\r\n   .where(stWithin(\r\n       SENSOR_LOCATION.LOCATION_POINT,\r\n       // The ST_Polygon(...) wrapper isn&#39;t really needed\r\n       stGeomFromText(&quot;LINESTRING(...)&quot;, 0\r\n   ))\r\n   .fetch();\r\n```\r\n\r\n### Historic answer, or when something is still missing\r\n\r\n... then, using [plain SQL][2] will certainly do the trick. Here&#39;s one example, how to do that:\r\n\r\n    ctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\r\n       .from(SENSOR_LOCATION)\r\n       .where(&quot;ST_WITHIN({0}, ST_Polygon(ST_GeomFromText(&#39;...&#39;), 0))&quot;, \r\n              SENSOR_LOCATION.LOCATION_POINT)\r\n       .fetch();\r\n\r\nNote how you can still use some type safety by using the plain SQL templating mechanism as shown above\r\n\r\n### If you&#39;re running lots of GIS queries\r\n\r\nIn this case, you probably want to build your own API that encapsulates all the plain SQL usage. Here&#39;s an idea how to get started with that:\r\n\r\n    public static Condition stWithin(Field&lt;?&gt; left, Field&lt;?&gt; right) {\r\n        return DSL.condition(&quot;ST_WITHIN({0}, {1})&quot;, left, right);\r\n    }\r\n\r\n    public static Field&lt;?&gt; stPolygon(Field&lt;?&gt; geom, int value) {\r\n        return DSL.field(&quot;ST_Polygon({0}, {1})&quot;, Object.class, geom, DSL.val(value));\r\n    }\r\n\r\nIf you also want to support binding GIS data types to the JDBC driver, then indeed, custom data type bindings will be the way to go:\r\n\r\nhttp://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-bindings\r\n\r\nYou will then use your custom data types rather than the above `Object.class`, and you can then use `Field&lt;YourType&gt;` rather than `Field&lt;?&gt;` for additional type safety.\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/982\r\n  [2]: http://www.jooq.org/doc/latest/manual/sql-building/plain-sql/","title":"How to select points within polygon in PostGIS using jOOQ?","body":"<h3>Using jOOQ 3.16 out-of-the-box GIS support</h3>\n<p>Starting with jOOQ 3.16 (<a href=\"https://github.com/jOOQ/jOOQ/issues/982\" rel=\"nofollow noreferrer\">see #982</a>), jOOQ will offer out-of-the-box support for the most popular GIS implementations, including PostGIS</p>\n<p>As always with jOOQ, just translate your query to the equivalent jOOQ query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\n   .from(SENSOR_LOCATION)\n   .where(stWithin(\n       SENSOR_LOCATION.LOCATION_POINT,\n       // The ST_Polygon(...) wrapper isn't really needed\n       stGeomFromText(&quot;LINESTRING(...)&quot;, 0\n   ))\n   .fetch();\n</code></pre>\n<h3>Historic answer, or when something is still missing</h3>\n<p>... then, using <a href=\"http://www.jooq.org/doc/latest/manual/sql-building/plain-sql/\" rel=\"nofollow noreferrer\">plain SQL</a> will certainly do the trick. Here's one example, how to do that:</p>\n<pre><code>ctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\n   .from(SENSOR_LOCATION)\n   .where(&quot;ST_WITHIN({0}, ST_Polygon(ST_GeomFromText('...'), 0))&quot;, \n          SENSOR_LOCATION.LOCATION_POINT)\n   .fetch();\n</code></pre>\n<p>Note how you can still use some type safety by using the plain SQL templating mechanism as shown above</p>\n<h3>If you're running lots of GIS queries</h3>\n<p>In this case, you probably want to build your own API that encapsulates all the plain SQL usage. Here's an idea how to get started with that:</p>\n<pre><code>public static Condition stWithin(Field&lt;?&gt; left, Field&lt;?&gt; right) {\n    return DSL.condition(&quot;ST_WITHIN({0}, {1})&quot;, left, right);\n}\n\npublic static Field&lt;?&gt; stPolygon(Field&lt;?&gt; geom, int value) {\n    return DSL.field(&quot;ST_Polygon({0}, {1})&quot;, Object.class, geom, DSL.val(value));\n}\n</code></pre>\n<p>If you also want to support binding GIS data types to the JDBC driver, then indeed, custom data type bindings will be the way to go:</p>\n<p><a href=\"http://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-bindings\" rel=\"nofollow noreferrer\">http://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-bindings</a></p>\n<p>You will then use your custom data types rather than the above <code>Object.class</code>, and you can then use <code>Field&lt;YourType&gt;</code> rather than <code>Field&lt;?&gt;</code> for additional type safety.</p>\n"},{"tags":[],"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574760553,"creation_date":1574760553,"answer_id":59047675,"question_id":38370831,"body_markdown":"I found jooq-postgis-spatial spatial support: https://github.com/dmitry-zhuravlev/jooq-postgis-spatial\r\n\r\nIt allows working with geometries either using jts or postgis types.","title":"How to select points within polygon in PostGIS using jOOQ?","body":"<p>I found jooq-postgis-spatial spatial support: <a href=\"https://github.com/dmitry-zhuravlev/jooq-postgis-spatial\" rel=\"nofollow noreferrer\">https://github.com/dmitry-zhuravlev/jooq-postgis-spatial</a></p>\n\n<p>It allows working with geometries either using jts or postgis types.</p>\n"}],"owner":{"account_id":1302735,"reputation":2978,"user_id":1252334,"accept_rate":38,"display_name":"Defozo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3154,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":38389020,"answer_count":2,"score":7,"last_activity_date":1637096403,"creation_date":1468489459,"question_id":38370831,"body_markdown":"I have a table `sensor_location`:\r\n\r\n    CREATE TABLE public.sensor_location (\r\n      sensor_id INTEGER NOT NULL,\r\n      location_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,\r\n      location_point public.geometry NOT NULL,\r\n      CONSTRAINT sensor_location_sensor_id_fkey FOREIGN KEY (sensor_id)\r\n        REFERENCES public.sensor(id)\r\n        ON DELETE NO ACTION\r\n        ON UPDATE NO ACTION\r\n        NOT DEFERRABLE\r\n    ) \r\nI want a query which will return `sensor_id`s of sensors and `location_time`s within selected polygon.\r\n\r\nThe query should look something like:\r\n\r\n    SELECT \r\n      sensor_id,\r\n      location_time,\r\n    FROM \r\n      public.sensor_location\r\n    WHERE\r\n      ST_Within(location_point, ST_Polygon(ST_GeomFromText(&#39;LINESTRING(-71.050316 48.422044,-71.070316 48.422044,-71.070316 48.462044,-71.050316 48.462044,-71.050316 48.422044)&#39;), 0));\r\n\r\nHow can I do that using jOOQ? Is it even possible to use jOOQ with PostGIS? Do I have to write my own sql query and just execute it with jOOQ?\r\n\r\nI found [this][1] but I have no idea how to use it. I&#39;m still a novice Java programmer.\r\n\r\n\r\n  [1]: http://www.jooq.org/doc/3.8/manual/code-generation/custom-data-type-bindings/","title":"How to select points within polygon in PostGIS using jOOQ?","body":"<p>I have a table <code>sensor_location</code>:</p>\n\n<pre><code>CREATE TABLE public.sensor_location (\n  sensor_id INTEGER NOT NULL,\n  location_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,\n  location_point public.geometry NOT NULL,\n  CONSTRAINT sensor_location_sensor_id_fkey FOREIGN KEY (sensor_id)\n    REFERENCES public.sensor(id)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION\n    NOT DEFERRABLE\n) \n</code></pre>\n\n<p>I want a query which will return <code>sensor_id</code>s of sensors and <code>location_time</code>s within selected polygon.</p>\n\n<p>The query should look something like:</p>\n\n<pre><code>SELECT \n  sensor_id,\n  location_time,\nFROM \n  public.sensor_location\nWHERE\n  ST_Within(location_point, ST_Polygon(ST_GeomFromText('LINESTRING(-71.050316 48.422044,-71.070316 48.422044,-71.070316 48.462044,-71.050316 48.462044,-71.050316 48.422044)'), 0));\n</code></pre>\n\n<p>How can I do that using jOOQ? Is it even possible to use jOOQ with PostGIS? Do I have to write my own sql query and just execute it with jOOQ?</p>\n\n<p>I found <a href=\"http://www.jooq.org/doc/3.8/manual/code-generation/custom-data-type-bindings/\" rel=\"noreferrer\">this</a> but I have no idea how to use it. I'm still a novice Java programmer.</p>\n"},{"tags":["java","mockito","powermock"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":1,"creation_date":1637096589,"post_id":69995928,"comment_id":123733924,"body_markdown":"That&#39;s not the powermock documentation, that&#39;s a random site&#39;s tutorial. Baeldung are consultants; you can apply to write articles for them for a tiny amount of money.","body":"That&#39;s not the powermock documentation, that&#39;s a random site&#39;s tutorial. Baeldung are consultants; you can apply to write articles for them for a tiny amount of money."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1637096979,"post_id":69995928,"comment_id":123734049,"body_markdown":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems). 2. No, it only prepares; To &quot;replace&quot; you have to `PowerMockito.mockStatic(FooBar.class);`","body":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems). 2. No, it only prepares; To &quot;replace&quot; you have to <code>PowerMockito.mockStatic(FooBar.class);</code>"},{"owner":{"account_id":70341,"reputation":1235,"user_id":204069,"accept_rate":0,"display_name":"user204069"},"score":0,"creation_date":1637099469,"post_id":69995928,"comment_id":123734712,"body_markdown":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems)  -You mean, for any class under fullyQualifiedNames I just have to create a class with name prepending Mock and mock class is ready ?","body":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems)  -You mean, for any class under fullyQualifiedNames I just have to create a class with name prepending Mock and mock class is ready ?"}],"owner":{"account_id":70341,"reputation":1235,"user_id":204069,"accept_rate":0,"display_name":"user204069"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637096391,"creation_date":1637096203,"question_id":69995928,"body_markdown":"I have couple of doubts as I was going through the PowerMock documentation:\r\nhttps://www.baeldung.com/intro-to-powermock\r\n\r\nIts mentioned to use a folder and place all Mock classes there:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;)\r\n\r\nMy doubt is when the PowerMock will run, How will it identify which Mock is for which Real class, is how will it relate Util.java to MockUtil.java at runtime if Some class A has dependency to Util.java.\r\n\r\nOther question is, just by placing     @PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;) will Real classes be replaced with Mock Classes at runtime when tests are executed.\r\n","title":"PowerMock Doubts","body":"<p>I have couple of doubts as I was going through the PowerMock documentation:\n<a href=\"https://www.baeldung.com/intro-to-powermock\" rel=\"nofollow noreferrer\">https://www.baeldung.com/intro-to-powermock</a></p>\n<p>Its mentioned to use a folder and place all Mock classes there:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;)\n</code></pre>\n<p>My doubt is when the PowerMock will run, How will it identify which Mock is for which Real class, is how will it relate Util.java to MockUtil.java at runtime if Some class A has dependency to Util.java.</p>\n<p>Other question is, just by placing     @PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;) will Real classes be replaced with Mock Classes at runtime when tests are executed.</p>\n"},{"tags":["java","json","mongodb","spring-boot","serialization"],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637096251,"creation_date":1636741206,"question_id":69947464,"body_markdown":"Serialization of Mongo objects leaves an `_id` and `_class` field in the json. I could live with `_id`  but I would like to remove `_class` field from the JSON.\r\n\r\nI have a Spring-Boot app reading JSON from a Mongo db.\r\n\r\nHow can I turn it off, so that only the objects explicit fields are saved into the Mongo json document (on the write)?\r\n\r\n    {\r\n        &quot;_id&quot;: {\r\n            &quot;$oid&quot;: &quot;618da8804b421f7f5e1e756c&quot;\r\n        },\r\n        ...\r\n        &quot;_class&quot;: &quot;com.whatever.my.ApplicationObj&quot;\r\n    }\r\n\r\n\r\nNOTE1: `_id` is mentioned [here][1] as being a &#39;read-only&#39; field: \r\n\r\nNOTE2: `_class` is mentioned [here][2] also: \r\n\r\nNOTE3: `_id` is mentioned [here][3] as being required.\r\n\r\nDo I need a custom serializer?\r\n\r\n\r\n  [1]: https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/\r\n  [2]: https://kb.objectrocket.com/mongo-db/how-to-insert-mongodb-document-using-spring-data-part-2-1090\r\n  [3]: https://stackoverflow.com/questions/12378320/mongodb-inserting-doc-without-id-field","title":"Serialization of Mongo objects leaves a &#39;_id&#39; and &#39;_class&#39; field in the json. How can I turn that off?","body":"<p>Serialization of Mongo objects leaves an <code>_id</code> and <code>_class</code> field in the json. I could live with <code>_id</code>  but I would like to remove <code>_class</code> field from the JSON.</p>\n<p>I have a Spring-Boot app reading JSON from a Mongo db.</p>\n<p>How can I turn it off, so that only the objects explicit fields are saved into the Mongo json document (on the write)?</p>\n<pre><code>{\n    &quot;_id&quot;: {\n        &quot;$oid&quot;: &quot;618da8804b421f7f5e1e756c&quot;\n    },\n    ...\n    &quot;_class&quot;: &quot;com.whatever.my.ApplicationObj&quot;\n}\n</code></pre>\n<p>NOTE1: <code>_id</code> is mentioned <a href=\"https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/\" rel=\"nofollow noreferrer\">here</a> as being a 'read-only' field:</p>\n<p>NOTE2: <code>_class</code> is mentioned <a href=\"https://kb.objectrocket.com/mongo-db/how-to-insert-mongodb-document-using-spring-data-part-2-1090\" rel=\"nofollow noreferrer\">here</a> also:</p>\n<p>NOTE3: <code>_id</code> is mentioned <a href=\"https://stackoverflow.com/questions/12378320/mongodb-inserting-doc-without-id-field\">here</a> as being required.</p>\n<p>Do I need a custom serializer?</p>\n"},{"tags":["java","android","firebaseui"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637161403,"post_id":69985207,"comment_id":123752209,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":23332400,"reputation":13,"user_id":17408611,"display_name":"MM Vadhaniya"},"score":0,"creation_date":1638197105,"post_id":69985207,"comment_id":124017100,"body_markdown":"I want to know what is the current version of the FirebaseUI dependency.","body":"I want to know what is the current version of the FirebaseUI dependency."}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637095762,"creation_date":1637095762,"answer_id":69995875,"question_id":69985207,"body_markdown":"Well I dont see 8.0.1 on the official Firebase website either, that is why your build is failing:\r\n\r\nInformation/Documentation: https://firebaseopensource.com/projects/firebase/firebaseui-android/\r\n\r\nReleases page is: https://github.com/firebase/FirebaseUI-Android/releases\r\n\r\n**To Install Version 8.0:**\r\n\r\n    dependencies {\r\n        // FirebaseUI for Firebase Realtime Database\r\n        implementation &#39;com.firebaseui:firebase-ui-database:8.0.0&#39;\r\n    \r\n        // FirebaseUI for Cloud Firestore\r\n        implementation &#39;com.firebaseui:firebase-ui-firestore:8.0.0&#39;\r\n    \r\n        // FirebaseUI for Firebase Auth\r\n        implementation &#39;com.firebaseui:firebase-ui-auth:8.0.0&#39;\r\n    \r\n        // FirebaseUI for Cloud Storage\r\n        implementation &#39;com.firebaseui:firebase-ui-storage:8.0.0&#39;\r\n    }\r\n\r\n**Dependencies:**\r\n\r\n&gt; Compatibility with Firebase / Google Play Services libraries\r\n&gt; \r\n&gt; FirebaseUI libraries have the following transitive dependencies on the\r\n\r\n    Firebase SDK:\r\n    \r\n    firebase-ui-auth\r\n    |--- com.google.firebase:firebase-auth\r\n    |--- com.google.android.gms:play-services-auth\r\n    \r\n    firebase-ui-database\r\n    |--- com.google.firebase:firebase-database\r\n    \r\n    firebase-ui-firestore\r\n    |--- com.google.firebase:firebase-firestore\r\n    \r\n    firebase-ui-storage\r\n    |--- com.google.firebase:firebase-storage\r\n\r\n&gt; You can see the specific dependencies associated with each release on\r\n&gt; the Releases page.\r\n\r\n\r\nhttps://github.com/firebase/firebaseui-android#dependencies\r\n\r\n\r\n\r\n","title":"How to find Firebase UI Dependency for Android Studio 2020.3.1","body":"<p>Well I dont see 8.0.1 on the official Firebase website either, that is why your build is failing:</p>\n<p>Information/Documentation: <a href=\"https://firebaseopensource.com/projects/firebase/firebaseui-android/\" rel=\"nofollow noreferrer\">https://firebaseopensource.com/projects/firebase/firebaseui-android/</a></p>\n<p>Releases page is: <a href=\"https://github.com/firebase/FirebaseUI-Android/releases\" rel=\"nofollow noreferrer\">https://github.com/firebase/FirebaseUI-Android/releases</a></p>\n<p><strong>To Install Version 8.0:</strong></p>\n<pre><code>dependencies {\n    // FirebaseUI for Firebase Realtime Database\n    implementation 'com.firebaseui:firebase-ui-database:8.0.0'\n\n    // FirebaseUI for Cloud Firestore\n    implementation 'com.firebaseui:firebase-ui-firestore:8.0.0'\n\n    // FirebaseUI for Firebase Auth\n    implementation 'com.firebaseui:firebase-ui-auth:8.0.0'\n\n    // FirebaseUI for Cloud Storage\n    implementation 'com.firebaseui:firebase-ui-storage:8.0.0'\n}\n</code></pre>\n<p><strong>Dependencies:</strong></p>\n<blockquote>\n<p>Compatibility with Firebase / Google Play Services libraries</p>\n<p>FirebaseUI libraries have the following transitive dependencies on the</p>\n</blockquote>\n<pre><code>Firebase SDK:\n\nfirebase-ui-auth\n|--- com.google.firebase:firebase-auth\n|--- com.google.android.gms:play-services-auth\n\nfirebase-ui-database\n|--- com.google.firebase:firebase-database\n\nfirebase-ui-firestore\n|--- com.google.firebase:firebase-firestore\n\nfirebase-ui-storage\n|--- com.google.firebase:firebase-storage\n</code></pre>\n<blockquote>\n<p>You can see the specific dependencies associated with each release on\nthe Releases page.</p>\n</blockquote>\n<p><a href=\"https://github.com/firebase/firebaseui-android#dependencies\" rel=\"nofollow noreferrer\">https://github.com/firebase/firebaseui-android#dependencies</a></p>\n"}],"owner":{"account_id":23332400,"reputation":13,"user_id":17408611,"display_name":"MM Vadhaniya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637095762,"creation_date":1637047459,"question_id":69985207,"body_markdown":"I&#39;m getting errors while I try to run my program. An error like this.[enter image description here][1] You can see in below image.(It&#39;s showing that &quot;Could not find Could not find com.firebaseui:firebase-ui-firestor:8.0.1.&quot;)\r\n\r\nPlease tell me what is current virsion of Firebaseui dependency virsion.\r\n\r\nAnd also tell me how can I find others dependency virsion in future.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OtlLj.png","title":"How to find Firebase UI Dependency for Android Studio 2020.3.1","body":"<p>I'm getting errors while I try to run my program. An error like this.<a href=\"https://i.stack.imgur.com/OtlLj.png\" rel=\"nofollow noreferrer\">enter image description here</a> You can see in below image.(It's showing that &quot;Could not find Could not find com.firebaseui:firebase-ui-firestor:8.0.1.&quot;)</p>\n<p>Please tell me what is current virsion of Firebaseui dependency virsion.</p>\n<p>And also tell me how can I find others dependency virsion in future.</p>\n"},{"tags":["java","awt-eventqueue"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1397708801,"post_id":23124582,"comment_id":35353017,"body_markdown":"How do you convert `&quot;1 &quot;` to a number? Why have you posted so much irrelevant code?","body":"How do you convert <code>&quot;1 &quot;</code> to a number? Why have you posted so much irrelevant code?"}],"answers":[{"tags":[],"owner":{"account_id":243084,"reputation":31440,"user_id":515034,"accept_rate":59,"display_name":"Abimaran Kugathasan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1397708949,"creation_date":1397708949,"answer_id":23124613,"question_id":23124582,"body_markdown":"You have an additional space in the end. Trim it to remove that spcace.\r\n\r\n    quantityInteger = Integer.parseInt(quantityString.trim());","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>You have an additional space in the end. Trim it to remove that spcace.</p>\n\n<pre><code>quantityInteger = Integer.parseInt(quantityString.trim());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2051638,"reputation":6978,"user_id":1830513,"accept_rate":80,"display_name":"Sazzadur Rahaman"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1397708958,"creation_date":1397708958,"answer_id":23124614,"question_id":23124582,"body_markdown":"Change your `Integer.parseInt(quantityString);` to `Integer.parseInt(quantityString.trim());` and your code will work fine!\r\n","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>Change your <code>Integer.parseInt(quantityString);</code> to <code>Integer.parseInt(quantityString.trim());</code> and your code will work fine!</p>\n"},{"tags":[],"owner":{"account_id":1064631,"reputation":729,"user_id":1065520,"accept_rate":50,"display_name":"optimus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397709123,"creation_date":1397709123,"answer_id":23124644,"question_id":23124582,"body_markdown":"try this i found an empty space in the console message &quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input **string: &quot;1 &quot;**(after one there is a space)\r\nso try to find if there is any empty space taken into account by mistake, so parserint is trying to parse string + empty space.\r\n","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>try this i found an empty space in the console message \"Exception in thread \"AWT-EventQueue-0\" java.lang.NumberFormatException: For input <strong>string: \"1 \"</strong>(after one there is a space)\nso try to find if there is any empty space taken into account by mistake, so parserint is trying to parse string + empty space.</p>\n"}],"owner":{"account_id":4340371,"reputation":21,"user_id":3543736,"display_name":"Warren Xie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19083,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1637095521,"creation_date":1397708761,"question_id":23124582,"body_markdown":"   I am very to new to Java programming and I am taking a class based on Java. I am currently doing this coffee project which is based on boolean and RadioButtons. I believe I am almost done with it except I get this error message on the console. If there is any other mistakes please let me know so I can fix it!\r\n    \r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;\r\n\tat java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.lang.Integer.parseInt(Unknown Source)\r\n\tat java.lang.Integer.parseInt(Unknown Source)\r\n\r\n---\r\n\r\n    \tpublic void purchase()\r\n    \t{\r\n    \t    //local variables\r\n    \t\tString  quantityString, buttonString, nameString, coffeeType;\r\n\t\t\t\r\n     \t    float subTotalFloat, priceFloat, taxFloat, grandTotalFloat;\r\n     \t    int quantityInteger;\r\n     \t    \r\n\t\t\t//Format the values to currency format\r\n\t\t\tDecimalFormat valueDecimalFormat = new DecimalFormat(&quot;$#0.00&quot;);\r\n\r\n    \t    //retrieve the input from the  user\r\n\t\t\tnameString = nameTextField.getText();\r\n\t\t\tquantityString = quantityTextField.getText();\r\n\t\t    buttonString = coffeeType ();\r\n\t\t\t\r\n\t\t\t//change data types\r\n\t\t\tquantityInteger = Integer.parseInt(quantityString);\r\n            ...\r\n        }\r\n\r\n  \t\t\r\n  ","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>I am very to new to Java programming and I am taking a class based on Java. I am currently doing this coffee project which is based on boolean and RadioButtons. I believe I am almost done with it except I get this error message on the console. If there is any other mistakes please let me know so I can fix it!</p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.NumberFormatException: For input string: \"1 \"\nat java.lang.NumberFormatException.forInputString(Unknown Source)\nat java.lang.Integer.parseInt(Unknown Source)\nat java.lang.Integer.parseInt(Unknown Source)\n</code></pre>\n\n<hr>\n\n<pre><code>    public void purchase()\n    {\n        //local variables\n        String  quantityString, buttonString, nameString, coffeeType;\n\n        float subTotalFloat, priceFloat, taxFloat, grandTotalFloat;\n        int quantityInteger;\n\n        //Format the values to currency format\n        DecimalFormat valueDecimalFormat = new DecimalFormat(\"$#0.00\");\n\n        //retrieve the input from the  user\n        nameString = nameTextField.getText();\n        quantityString = quantityTextField.getText();\n        buttonString = coffeeType ();\n\n        //change data types\n        quantityInteger = Integer.parseInt(quantityString);\n        ...\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","jsp","apache-tiles"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637095482,"creation_date":1637095482,"answer_id":69995835,"question_id":69985171,"body_markdown":"Well based on the exception, it seems it is not allowed to have `&lt;%  %&gt;` inside tags\r\n\r\nCould you try the following options:\r\n\r\nOption 1:\r\n\r\n    &lt;% request.setAttribute(&quot;content&quot;, new java.util.Date()); %&gt;\r\n    &lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\r\n        ${content}\r\n    &lt;/tiles:insertTemplate&gt;\r\n    \r\n\r\n\r\n----------\r\nOption 2:\r\n\r\n    \r\n    &lt;c:set var=&quot;content&quot;&gt;\r\n               &lt;% out.println(new java.util.Date()); %&gt;\r\n    &lt;/c:set&gt;\r\n    \r\n    &lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\r\n        ${content}\r\n    &lt;/tiles:insertTemplate&gt;\r\n\r\n\r\nPlease do confirm if this worked for you,\r\n","title":"How to use scripting elements within apache tiles in spring boot","body":"<p>Well based on the exception, it seems it is not allowed to have <code>&lt;%  %&gt;</code> inside tags</p>\n<p>Could you try the following options:</p>\n<p>Option 1:</p>\n<pre><code>&lt;% request.setAttribute(&quot;content&quot;, new java.util.Date()); %&gt;\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\n    ${content}\n&lt;/tiles:insertTemplate&gt;\n</code></pre>\n<hr />\n<p>Option 2:</p>\n<pre><code>&lt;c:set var=&quot;content&quot;&gt;\n           &lt;% out.println(new java.util.Date()); %&gt;\n&lt;/c:set&gt;\n\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\n    ${content}\n&lt;/tiles:insertTemplate&gt;\n</code></pre>\n<p>Please do confirm if this worked for you,</p>\n"}],"owner":{"account_id":23351921,"reputation":3,"user_id":17425375,"display_name":"k2-kubo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995835,"answer_count":1,"score":0,"last_activity_date":1637095482,"creation_date":1637047240,"question_id":69985171,"body_markdown":"I&#39;m trying to add apache tiles to spring boot.\r\n\r\nWhenever I try to put in real jsp code with tags like\r\n```\r\n&lt;%@ taglib prefix=&quot;tiles&quot; uri=&quot;http://tiles.apache.org/tags-tiles&quot; %&gt;\r\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\r\n\t&lt;% out.println(new java.util.Date()); %&gt;\r\n&lt;/tiles:insertTemplate&gt;\r\n```\r\nThis throws this error.\r\n```\r\nScripting elements ( &amp;lt;%!, &amp;lt;jsp:declaration, &amp;lt;%=, &amp;lt;jsp:expression, &amp;lt;%, &amp;lt;jsp:scriptlet ) are disallowed here.\r\n```\r\nI have &quot;scripting-invalid&quot; set to &quot;false&quot; for .jsp and I don&#39;t know how to solve this.\r\n\r\nAny help or suggestions are appreciated.","title":"How to use scripting elements within apache tiles in spring boot","body":"<p>I'm trying to add apache tiles to spring boot.</p>\n<p>Whenever I try to put in real jsp code with tags like</p>\n<pre><code>&lt;%@ taglib prefix=&quot;tiles&quot; uri=&quot;http://tiles.apache.org/tags-tiles&quot; %&gt;\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\n    &lt;% out.println(new java.util.Date()); %&gt;\n&lt;/tiles:insertTemplate&gt;\n</code></pre>\n<p>This throws this error.</p>\n<pre><code>Scripting elements ( &amp;lt;%!, &amp;lt;jsp:declaration, &amp;lt;%=, &amp;lt;jsp:expression, &amp;lt;%, &amp;lt;jsp:scriptlet ) are disallowed here.\n</code></pre>\n<p>I have &quot;scripting-invalid&quot; set to &quot;false&quot; for .jsp and I don't know how to solve this.</p>\n<p>Any help or suggestions are appreciated.</p>\n"},{"tags":["java","spring-boot","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637095205,"creation_date":1637095205,"answer_id":69995786,"question_id":69885575,"body_markdown":"I found the solution with a different approach, with a custom TestExecutionListener. \r\n\r\n\r\nmore details in https://stackoverflow.com/a/69995757/3067542 ","title":"test a Spring Boot WebClient outside of a HttpServletRequest context","body":"<p>I found the solution with a different approach, with a custom TestExecutionListener.</p>\n<p>more details in <a href=\"https://stackoverflow.com/a/69995757/3067542\">https://stackoverflow.com/a/69995757/3067542</a></p>\n"}],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":886,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995786,"answer_count":1,"score":0,"last_activity_date":1637095205,"creation_date":1636383539,"question_id":69885575,"body_markdown":"My Spring boot 2.5 application is a fairly standard web application that exposes some endpoints and calls other services. \r\nIn the usual use cases, an external request comes in, and applies some business logic, which is going to call other services, using WebClient configured with Oauth2.\r\n\r\nHowever, my application also contains a scheduled task that needs to make some calls to other services. \r\n\r\nThat&#39;s where the problems are starting : I believe I face the same issue as in https://stackoverflow.com/questions/55308918/spring-security-5-calling-oauth2-secured-api-in-application-runner-results-in-il , ie `servletRequest cannot be null` when using webClient from a non Servlet environment. \r\n\r\nI thought I would be able to reproduce this easily through an integration test, but I am not. I already have a `SpringBootTest` for the scheduled task, in which I load the Spring context, get access to the class that has the logic, and simply call the method that is scheduled when deployed in prod... but it&#39;s not failing : I am not able to reproduce. \r\n\r\nWhen I debug the test, I see the servletRequest is indeed not null when I run the test (while it is when it runs in prod) : there&#39;s a Spring `MockhttpServletrequest`, so I don&#39;t have the same problem as in prod. \r\n\r\n[![enter image description here][1]][1] \r\n\r\nI have tried to run the test with no &quot;web&quot; support at all, with \r\n\r\n    @SpringBootTest(webEnvironment = WebEnvironment.NONE) \r\n\r\nBut when I do that, some of the required elements are missing for my application to start : I have 2 webClients configured in my application, the &quot;normal&quot; one, and the one I plan to use for the scheduler  : \r\n\r\n```\r\n  @Bean\r\n  @Primary\r\n  WebClient servletWebClient(ClientRegistrationRepository clientRegistrations,\r\n                             OAuth2AuthorizedClientRepository authorizedClients) {\r\n\r\n    //this constructor  will configure internally a RemoveAuthorizedClientOAuth2AuthorizationFailureHandler,\r\n    // and onAuthorizationFailure will be called on it when we get a 401\r\n    var oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrations, authorizedClients);\r\n\r\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\r\n\r\n\r\n    return WebClient.builder()\r\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n        .apply(oauth.oauth2Configuration())\r\n        .build();\r\n  }\r\n\r\n  @Bean\r\n  @Qualifier(&quot;forScheduler&quot;)\r\n  WebClient schedulerWebClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n\r\n    ServletOAuth2AuthorizedClientExchangeFilterFunction oauth =new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n\r\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\r\n\r\n    return WebClient.builder()\r\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n        .apply(oauth.oauth2Configuration())\r\n        .build();\r\n  }\r\n\r\n  @Bean\r\n  public OAuth2AuthorizedClientManager authorizedClientManagerForScheduler(\r\n      ClientRegistrationRepository clientRegistrationRepository,\r\n      OAuth2AuthorizedClientService clientService)\r\n  {\r\n\r\n    OAuth2AuthorizedClientProvider authorizedClientProvider =\r\n        OAuth2AuthorizedClientProviderBuilder.builder()\r\n            .clientCredentials()\r\n            .build();\r\n\r\n    AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\r\n        new AuthorizedClientServiceOAuth2AuthorizedClientManager(\r\n            clientRegistrationRepository, clientService);\r\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n    return authorizedClientManager;\r\n  }\r\n```\r\n \r\nBut when configuring my test with `webEnvironment = WebEnvironment.NONE` , then no `ClientRegistrationRepository` gets loaded, and the declared `servletWebClient` can&#39;t be instantiated, as it&#39;s one of its dependencies.\r\n\r\nTesting this manually is quite difficult/expensive, so I would really like to get some kind of validations through my integration tests that my change with 2 webClients will work before I deploy it. \r\n\r\n\r\nHow can I test that scenario correctly ? or in other words, is there a way to have a default Spring Boot test, but without a mockServletContext being initialized by Spring ? \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3dqQd.png","title":"test a Spring Boot WebClient outside of a HttpServletRequest context","body":"<p>My Spring boot 2.5 application is a fairly standard web application that exposes some endpoints and calls other services.\nIn the usual use cases, an external request comes in, and applies some business logic, which is going to call other services, using WebClient configured with Oauth2.</p>\n<p>However, my application also contains a scheduled task that needs to make some calls to other services.</p>\n<p>That's where the problems are starting : I believe I face the same issue as in <a href=\"https://stackoverflow.com/questions/55308918/spring-security-5-calling-oauth2-secured-api-in-application-runner-results-in-il\">Spring Security 5 Calling OAuth2 Secured API in Application Runner results in IllegalArgumentException</a> , ie <code>servletRequest cannot be null</code> when using webClient from a non Servlet environment.</p>\n<p>I thought I would be able to reproduce this easily through an integration test, but I am not. I already have a <code>SpringBootTest</code> for the scheduled task, in which I load the Spring context, get access to the class that has the logic, and simply call the method that is scheduled when deployed in prod... but it's not failing : I am not able to reproduce.</p>\n<p>When I debug the test, I see the servletRequest is indeed not null when I run the test (while it is when it runs in prod) : there's a Spring <code>MockhttpServletrequest</code>, so I don't have the same problem as in prod.</p>\n<p><a href=\"https://i.stack.imgur.com/3dqQd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3dqQd.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried to run the test with no &quot;web&quot; support at all, with</p>\n<pre><code>@SpringBootTest(webEnvironment = WebEnvironment.NONE) \n</code></pre>\n<p>But when I do that, some of the required elements are missing for my application to start : I have 2 webClients configured in my application, the &quot;normal&quot; one, and the one I plan to use for the scheduler  :</p>\n<pre><code>  @Bean\n  @Primary\n  WebClient servletWebClient(ClientRegistrationRepository clientRegistrations,\n                             OAuth2AuthorizedClientRepository authorizedClients) {\n\n    //this constructor  will configure internally a RemoveAuthorizedClientOAuth2AuthorizationFailureHandler,\n    // and onAuthorizationFailure will be called on it when we get a 401\n    var oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrations, authorizedClients);\n\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\n\n\n    return WebClient.builder()\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n        .apply(oauth.oauth2Configuration())\n        .build();\n  }\n\n  @Bean\n  @Qualifier(&quot;forScheduler&quot;)\n  WebClient schedulerWebClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n\n    ServletOAuth2AuthorizedClientExchangeFilterFunction oauth =new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\n\n    return WebClient.builder()\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n        .apply(oauth.oauth2Configuration())\n        .build();\n  }\n\n  @Bean\n  public OAuth2AuthorizedClientManager authorizedClientManagerForScheduler(\n      ClientRegistrationRepository clientRegistrationRepository,\n      OAuth2AuthorizedClientService clientService)\n  {\n\n    OAuth2AuthorizedClientProvider authorizedClientProvider =\n        OAuth2AuthorizedClientProviderBuilder.builder()\n            .clientCredentials()\n            .build();\n\n    AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\n        new AuthorizedClientServiceOAuth2AuthorizedClientManager(\n            clientRegistrationRepository, clientService);\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n    return authorizedClientManager;\n  }\n</code></pre>\n<p>But when configuring my test with <code>webEnvironment = WebEnvironment.NONE</code> , then no <code>ClientRegistrationRepository</code> gets loaded, and the declared <code>servletWebClient</code> can't be instantiated, as it's one of its dependencies.</p>\n<p>Testing this manually is quite difficult/expensive, so I would really like to get some kind of validations through my integration tests that my change with 2 webClients will work before I deploy it.</p>\n<p>How can I test that scenario correctly ? or in other words, is there a way to have a default Spring Boot test, but without a mockServletContext being initialized by Spring ?</p>\n"},{"tags":["java","testng"],"comments":[{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1390431685,"post_id":15220262,"comment_id":32093424,"body_markdown":"I do this by using a TestNG report listener to trigger a class that builds my HTML out of the ISuite result.  To display arbitrary data in the test report, such as test argument values, I think you would have to add data to the ITestContext for each test so that the report writer has access to the additional data.  Fortunately the method name is already part of that context and you can retrieve it.","body":"I do this by using a TestNG report listener to trigger a class that builds my HTML out of the ISuite result.  To display arbitrary data in the test report, such as test argument values, I think you would have to add data to the ITestContext for each test so that the report writer has access to the additional data.  Fortunately the method name is already part of that context and you can retrieve it."}],"answers":[{"tags":[],"owner":{"account_id":74561,"reputation":4982,"user_id":214178,"accept_rate":100,"display_name":"artdanil"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1363119615,"creation_date":1363037862,"answer_id":15349158,"question_id":15220262,"body_markdown":"I had the same problem, and found that it helps to set the field storing test case name in the method annotated with `@BeforeMethod`, using [native injection of TestNG][1] to provide method name and test parameters. The test name is taken from test parameters supplied by the `DataProvider`. If your test method does not have parameters, just report the method name.\r\n\r\n    //oversimplified for demontration purposes\r\n    public class TestParameters {\r\n    \tprivate String testName = null;\r\n    \tprivate String testDescription = null;\r\n    \t\r\n    \tpublic TestParameters(String name,\r\n    \t\t\t\t\t\t  String description) {\r\n    \t\tthis.testName = name;\r\n    \t\tthis.testDescription = description;\r\n    \t}\r\n    \t\r\n    \tpublic String getTestName() {\r\n    \t\treturn testName;\r\n    \t}\r\n    \tpublic String getTestDescription() {\r\n    \t\treturn testDescription;\r\n    \t}\r\n    }\r\n    \r\n    public class SampleTest implements ITest {\r\n        // Has to be set to prevent NullPointerException from reporters\r\n    \tprotected String mTestCaseName = &quot;&quot;;\r\n    \t\r\n    \t@DataProvider(name=&quot;BasicDataProvider&quot;)\r\n    \tpublic Object[][] getTestData() {\r\n    \t\tObject[][] data = new Object[][] {\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase1&quot;, &quot;Sample test 1&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase2&quot;, &quot;Sample test 2&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase3&quot;, &quot;Sample test 3&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase4&quot;, &quot;Sample test 4&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase5&quot;, &quot;Sample test 5&quot;) }\r\n    \t\t};\r\n    \t\treturn data;\r\n    \t}\r\n    \t\r\n    \t@BeforeMethod(alwaysRun = true)\r\n    \tpublic void testData(Method method, Object[] testData) {\r\n    \t\tString testCase = &quot;&quot;;\r\n    \t\tif (testData != null &amp;&amp; testData.length &gt; 0) {\r\n    \t\t\tTestParameters testParams = null;\r\n    \t\t\t//Check if test method has actually received required parameters\r\n    \t\t\tfor (Object testParameter : testData) {\r\n    \t\t\t\tif (testParameter instanceof TestParameters) {\r\n    \t\t\t\t\ttestParams = (TestParameters)testParameter;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif (testParams != null) {\r\n    \t\t\t\ttestCase = testParams.getTestName();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tthis.mTestCaseName = String.format(&quot;%s(%s)&quot;, method.getName(), testCase);\r\n        }\r\n    \r\n    \t@Override\r\n    \tpublic String getTestName() {\r\n    \t\treturn this.mTestCaseName;\r\n    \t}\r\n    \r\n        @Test(dataProvider=&quot;BasicDataProvider&quot;)\r\n    \tpublic void testSample1(TestParameters testParams){\r\n            //test code here\r\n        }\r\n    \r\n        @Test(dataProvider=&quot;BasicDataProvider&quot;)\r\n    \tpublic void testSample2(TestParameters testParams){\r\n            //test code here\r\n        }\r\n        \r\n        @Test\r\n    \tpublic void testSample3(){\r\n            //test code here\r\n        }\r\n    }\r\n\r\n**EDIT:** Based on the comments below, I realized a sample from report will be useful.\r\n\r\nExtract from the report from running code above:\r\n\r\n    &lt;testng-results skipped=&quot;0&quot; failed=&quot;0&quot; total=&quot;5&quot; passed=&quot;5&quot;&gt;\r\n      &lt;suite name=&quot;SampleTests&quot; duration-ms=&quot;2818&quot; started-at=&quot;&lt;some-time&gt;&quot; finished-at=&quot;&lt;some-time&gt;&quot;&gt;\r\n        &lt;test name=&quot;Test1&quot; duration-ms=&quot;2818&quot; started-at=&quot;&lt;some-time&gt;&quot; finished-at=&quot;&lt;some-time&gt;&quot;&gt;\r\n            &lt;test-method \r\n                status=&quot;PASS&quot; \r\n                signature=&quot;testSample1(org.example.test.TestParameters)[pri:0, instance:org.example.test.TimeTest@c9d92c]&quot;\r\n                test-instance-name=&quot;testSample1(TestCase5)&quot;\r\n                name=&quot;testSample1&quot; \r\n                duration-ms=&quot;1014&quot;\r\n                started-at=&quot;&lt;some-time-before&gt;&quot; \r\n                data-provider=&quot;BasicDataProvider&quot; \r\n                finished-at=&quot;&lt;some-time-later&gt;&quot; &gt;\r\n                &lt;!-- excluded for demonstration purposes --&gt;\r\n            &lt;/test-method&gt;\r\n            &lt;!-- the rest of test results excluded for brevity --&gt;\r\n        &lt;/test&gt;\r\n      &lt;/suite&gt;\r\n    &lt;/testng-result&gt;\r\n\r\nNote, that the value returned from `getTestName()` method is in the `test-instance-name` attribute, and not in the `name` attribute.\r\n\r\n  [1]: http://testng.org/doc/documentation-main.html#native-dependency-injection","title":"Custom test method name in TestNG reports","body":"<p>I had the same problem, and found that it helps to set the field storing test case name in the method annotated with <code>@BeforeMethod</code>, using <a href=\"http://testng.org/doc/documentation-main.html#native-dependency-injection\">native injection of TestNG</a> to provide method name and test parameters. The test name is taken from test parameters supplied by the <code>DataProvider</code>. If your test method does not have parameters, just report the method name.</p>\n\n<pre><code>//oversimplified for demontration purposes\npublic class TestParameters {\n    private String testName = null;\n    private String testDescription = null;\n\n    public TestParameters(String name,\n                          String description) {\n        this.testName = name;\n        this.testDescription = description;\n    }\n\n    public String getTestName() {\n        return testName;\n    }\n    public String getTestDescription() {\n        return testDescription;\n    }\n}\n\npublic class SampleTest implements ITest {\n    // Has to be set to prevent NullPointerException from reporters\n    protected String mTestCaseName = \"\";\n\n    @DataProvider(name=\"BasicDataProvider\")\n    public Object[][] getTestData() {\n        Object[][] data = new Object[][] {\n                { new TestParameters(\"TestCase1\", \"Sample test 1\")},\n                { new TestParameters(\"TestCase2\", \"Sample test 2\")},\n                { new TestParameters(\"TestCase3\", \"Sample test 3\")},\n                { new TestParameters(\"TestCase4\", \"Sample test 4\")},\n                { new TestParameters(\"TestCase5\", \"Sample test 5\") }\n        };\n        return data;\n    }\n\n    @BeforeMethod(alwaysRun = true)\n    public void testData(Method method, Object[] testData) {\n        String testCase = \"\";\n        if (testData != null &amp;&amp; testData.length &gt; 0) {\n            TestParameters testParams = null;\n            //Check if test method has actually received required parameters\n            for (Object testParameter : testData) {\n                if (testParameter instanceof TestParameters) {\n                    testParams = (TestParameters)testParameter;\n                    break;\n                }\n            }\n            if (testParams != null) {\n                testCase = testParams.getTestName();\n            }\n        }\n        this.mTestCaseName = String.format(\"%s(%s)\", method.getName(), testCase);\n    }\n\n    @Override\n    public String getTestName() {\n        return this.mTestCaseName;\n    }\n\n    @Test(dataProvider=\"BasicDataProvider\")\n    public void testSample1(TestParameters testParams){\n        //test code here\n    }\n\n    @Test(dataProvider=\"BasicDataProvider\")\n    public void testSample2(TestParameters testParams){\n        //test code here\n    }\n\n    @Test\n    public void testSample3(){\n        //test code here\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Based on the comments below, I realized a sample from report will be useful.</p>\n\n<p>Extract from the report from running code above:</p>\n\n<pre><code>&lt;testng-results skipped=\"0\" failed=\"0\" total=\"5\" passed=\"5\"&gt;\n  &lt;suite name=\"SampleTests\" duration-ms=\"2818\" started-at=\"&lt;some-time&gt;\" finished-at=\"&lt;some-time&gt;\"&gt;\n    &lt;test name=\"Test1\" duration-ms=\"2818\" started-at=\"&lt;some-time&gt;\" finished-at=\"&lt;some-time&gt;\"&gt;\n        &lt;test-method \n            status=\"PASS\" \n            signature=\"testSample1(org.example.test.TestParameters)[pri:0, instance:org.example.test.TimeTest@c9d92c]\"\n            test-instance-name=\"testSample1(TestCase5)\"\n            name=\"testSample1\" \n            duration-ms=\"1014\"\n            started-at=\"&lt;some-time-before&gt;\" \n            data-provider=\"BasicDataProvider\" \n            finished-at=\"&lt;some-time-later&gt;\" &gt;\n            &lt;!-- excluded for demonstration purposes --&gt;\n        &lt;/test-method&gt;\n        &lt;!-- the rest of test results excluded for brevity --&gt;\n    &lt;/test&gt;\n  &lt;/suite&gt;\n&lt;/testng-result&gt;\n</code></pre>\n\n<p>Note, that the value returned from <code>getTestName()</code> method is in the <code>test-instance-name</code> attribute, and not in the <code>name</code> attribute.</p>\n"},{"tags":[],"owner":{"account_id":161315,"reputation":19,"user_id":4360367,"display_name":"Stanislav Fedii"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1420416208,"creation_date":1420416208,"answer_id":27771741,"question_id":15220262,"body_markdown":"Try implementing the org.testng.ITest interface that requires a getTestName() method.\r\nThis way reporting handles the returned value properly.","title":"Custom test method name in TestNG reports","body":"<p>Try implementing the org.testng.ITest interface that requires a getTestName() method.\nThis way reporting handles the returned value properly.</p>\n"},{"tags":[],"owner":{"account_id":5922848,"reputation":144,"user_id":4659696,"display_name":"pilotg2"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426517585,"creation_date":1426099788,"answer_id":28994972,"question_id":15220262,"body_markdown":"I ran into a similar problem.\r\nFirst I implemented the ITest strategy already mentioned. And this is part of the solution, but not completely.\r\n\r\nTestNG, for some reason, when building different reports, calls getName() on the test while building the report. This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\r\nIf you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem. As the ITest strategy leaves the name for the test as the name set by the last run.\r\n\r\nSo I had to implement a very custom getName(). SOme assumptions (in my particular case):\r\n\r\n&gt; 1. Only three reports are run: TestHTMLReporter, EmailableReporter, XMLSuiteResultWriter.\r\n&gt; 2. When ever get name is not called as a result of one of the assumed reporters, then returning the currently set name is fine.\r\n&gt; 3. When a reporter is running, it makes its getName() calls in order and only 1 time for each run.\r\n\r\n    public String getTestName()\r\n    {\r\n        String name = testName;\r\n        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();//.toString();\r\n        if(calledFrom(stackTrace, &quot;XMLSuiteResultWriter&quot;))\r\n        {\r\n            name = testNames.size()&gt;0?testNames.get(xmlNameIndex&lt;testNames.size()?xmlNameIndex:0):&quot;undefined&quot;;\r\n            xmlNameIndex++;\r\n            if(xmlNameIndex&gt;=testNames.size())\r\n                xmlNameIndex = 0;\r\n        }\r\n        else if(calledFrom(stackTrace, &quot;EmailableReporter&quot;))\r\n        {\r\n            name = testNames.size()&gt;0?testNames.get(emailNameIndex&lt;testNames.size()?emailNameIndex:0):&quot;undefined&quot;;\r\n            emailNameIndex++;\r\n            if(emailNameIndex&gt;=testNames.size())\r\n                emailNameIndex = 0;\r\n        }\r\n        if(calledFrom(stackTrace, &quot;TestHTMLReporter&quot;))\r\n        {\r\n            if(testNames.size()&lt;0)\r\n            {\r\n                name = &quot;undefined&quot;;\r\n            }\r\n            else\r\n            {\r\n                if(htmlNameIndex &lt; testNamesFailed.size())\r\n                {\r\n                    name = testNamesFailed.get(htmlNameIndex);\r\n                }\r\n                else\r\n                {\r\n                    int htmlPassedIndex = htmlNameIndex - testNamesFailed.size();\r\n                    if(htmlPassedIndex &lt; testNamesPassed.size())\r\n                    {\r\n                        name = testNamesPassed.get(htmlPassedIndex);\r\n                    }\r\n                    else\r\n                    {\r\n                        name = &quot;undefined&quot;;\r\n                    }\r\n                }\r\n            }\r\n            htmlNameIndex++;\r\n            if(htmlNameIndex&gt;=testNames.size())\r\n                htmlNameIndex = 0;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    private boolean calledFrom(StackTraceElement[] stackTrace, String checkForMethod)\r\n    {\r\n        boolean calledFrom = false;\r\n        for(StackTraceElement element : stackTrace)\r\n        {\r\n            String stack = element.toString();\r\n            if(stack.contains(checkForMethod))\r\n                calledFrom = true;\r\n        }\r\n        return calledFrom;\r\n    }\r\n\r\nWhen setting the name for the run (I did this in the @BeforeMethod(alwaysRun=true) method I defined following the ITest strategy) I added the name to an ArrayList&lt;String&gt; testNames. But then the html report was not correct. Most of the other reports pulls the information in order, like the XMLSuiteResultWriter, but TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests. So I had to implement to additional ArrayLists: testNamesFailed and testNamesPassed and add the test names to them when the test finished based on whether they passed or not.\r\n\r\nAnd I will freely admit this is very much a hack and very fragile. Ideally, TestNG adds the tests to a collection while running, and gets the name from that collection instead of from the original test. If you have TestNG to run other reports you will have to figure out what order they request the names and what is a unique enough string to search for in the thread stack trace.\r\n\r\n--Edit 1\r\n\r\nAlternatively, use the ITest Strategy and the factory pattern (@factory annotations).\r\n\r\nhttps://stackoverflow.com/questions/22915267/testng-using-factory-and-dataprovider\r\n\r\nhttp://beust.com/weblog/2004/09/27/testngs-factory/\r\n\r\nIt does require some minor changes. This includes creating a constructor with the same parameters as the original test method. The test method now has no parameters. You can set the name in the new constructor and simply return that in the getTestName method. Make sure to remove the data provider specification from the test method.","title":"Custom test method name in TestNG reports","body":"<p>I ran into a similar problem.\nFirst I implemented the ITest strategy already mentioned. And this is part of the solution, but not completely.</p>\n\n<p>TestNG, for some reason, when building different reports, calls getName() on the test while building the report. This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\nIf you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem. As the ITest strategy leaves the name for the test as the name set by the last run.</p>\n\n<p>So I had to implement a very custom getName(). SOme assumptions (in my particular case):</p>\n\n<blockquote>\n  <ol>\n  <li>Only three reports are run: TestHTMLReporter, EmailableReporter, XMLSuiteResultWriter.</li>\n  <li>When ever get name is not called as a result of one of the assumed reporters, then returning the currently set name is fine.</li>\n  <li>When a reporter is running, it makes its getName() calls in order and only 1 time for each run.</li>\n  </ol>\n</blockquote>\n\n<pre><code>public String getTestName()\n{\n    String name = testName;\n    StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();//.toString();\n    if(calledFrom(stackTrace, \"XMLSuiteResultWriter\"))\n    {\n        name = testNames.size()&gt;0?testNames.get(xmlNameIndex&lt;testNames.size()?xmlNameIndex:0):\"undefined\";\n        xmlNameIndex++;\n        if(xmlNameIndex&gt;=testNames.size())\n            xmlNameIndex = 0;\n    }\n    else if(calledFrom(stackTrace, \"EmailableReporter\"))\n    {\n        name = testNames.size()&gt;0?testNames.get(emailNameIndex&lt;testNames.size()?emailNameIndex:0):\"undefined\";\n        emailNameIndex++;\n        if(emailNameIndex&gt;=testNames.size())\n            emailNameIndex = 0;\n    }\n    if(calledFrom(stackTrace, \"TestHTMLReporter\"))\n    {\n        if(testNames.size()&lt;0)\n        {\n            name = \"undefined\";\n        }\n        else\n        {\n            if(htmlNameIndex &lt; testNamesFailed.size())\n            {\n                name = testNamesFailed.get(htmlNameIndex);\n            }\n            else\n            {\n                int htmlPassedIndex = htmlNameIndex - testNamesFailed.size();\n                if(htmlPassedIndex &lt; testNamesPassed.size())\n                {\n                    name = testNamesPassed.get(htmlPassedIndex);\n                }\n                else\n                {\n                    name = \"undefined\";\n                }\n            }\n        }\n        htmlNameIndex++;\n        if(htmlNameIndex&gt;=testNames.size())\n            htmlNameIndex = 0;\n    }\n    return name;\n}\n\nprivate boolean calledFrom(StackTraceElement[] stackTrace, String checkForMethod)\n{\n    boolean calledFrom = false;\n    for(StackTraceElement element : stackTrace)\n    {\n        String stack = element.toString();\n        if(stack.contains(checkForMethod))\n            calledFrom = true;\n    }\n    return calledFrom;\n}\n</code></pre>\n\n<p>When setting the name for the run (I did this in the @BeforeMethod(alwaysRun=true) method I defined following the ITest strategy) I added the name to an ArrayList testNames. But then the html report was not correct. Most of the other reports pulls the information in order, like the XMLSuiteResultWriter, but TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests. So I had to implement to additional ArrayLists: testNamesFailed and testNamesPassed and add the test names to them when the test finished based on whether they passed or not.</p>\n\n<p>And I will freely admit this is very much a hack and very fragile. Ideally, TestNG adds the tests to a collection while running, and gets the name from that collection instead of from the original test. If you have TestNG to run other reports you will have to figure out what order they request the names and what is a unique enough string to search for in the thread stack trace.</p>\n\n<p>--Edit 1</p>\n\n<p>Alternatively, use the ITest Strategy and the factory pattern (@factory annotations).</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22915267/testng-using-factory-and-dataprovider\">TestNG Using @Factory and @DataProvider</a></p>\n\n<p><a href=\"http://beust.com/weblog/2004/09/27/testngs-factory/\" rel=\"nofollow noreferrer\">http://beust.com/weblog/2004/09/27/testngs-factory/</a></p>\n\n<p>It does require some minor changes. This includes creating a constructor with the same parameters as the original test method. The test method now has no parameters. You can set the name in the new constructor and simply return that in the getTestName method. Make sure to remove the data provider specification from the test method.</p>\n"},{"tags":[],"owner":{"account_id":4891136,"reputation":1058,"user_id":3942248,"accept_rate":89,"display_name":"jersey-city-ninja"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1493681849,"creation_date":1493681849,"answer_id":43727975,"question_id":15220262,"body_markdown":"If you want to change the name in the HTML report, it&#39;ll be a total hack. \r\nHere&#39;s how I did it:\r\n\r\n    public class NinjaTest {\r\n    ...\r\n    ...\r\n    @AfterMethod (alwaysRun = true)\r\n    public void afterMethod(ITestResult result, Method method) {\r\n        try {\r\n            //I have XML test suites organized in directories. \r\n            String xmlFile = result.getTestContext().getCurrentXmlTest().getSuite().getFileName();\r\n            String suiteName = xmlFile.substring(xmlFile.lastIndexOf(&quot;\\\\&quot;) + 1, xmlFile.lastIndexOf(&quot;.xml&quot;));\r\n            String pathToFile = xmlFile.substring(0, xmlFile.lastIndexOf(&quot;\\\\&quot;) );\r\n            String directory = pathToFile.substring(pathToFile.lastIndexOf(&quot;\\\\&quot;) + 1);\r\n            String testMethodName = String.format(&quot;%s/%s - %s&quot;, directory, suiteName, method.getName());\r\n\r\n            //Total hack to change display name in HTML report  ＼(^o^)／ \r\n            Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(&quot;m_methodName&quot;);\r\n            methodName.setAccessible(true);\r\n            methodName.set(result.getMethod(), testMethodName);\r\n        } catch (Exception e) {\r\n            // Eh....  &#175;\\_(ツ)_/&#175;\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    ...\r\n    ...\r\n\r\n\r\n","title":"Custom test method name in TestNG reports","body":"<p>If you want to change the name in the HTML report, it'll be a total hack. \nHere's how I did it:</p>\n\n<pre><code>public class NinjaTest {\n...\n...\n@AfterMethod (alwaysRun = true)\npublic void afterMethod(ITestResult result, Method method) {\n    try {\n        //I have XML test suites organized in directories. \n        String xmlFile = result.getTestContext().getCurrentXmlTest().getSuite().getFileName();\n        String suiteName = xmlFile.substring(xmlFile.lastIndexOf(\"\\\\\") + 1, xmlFile.lastIndexOf(\".xml\"));\n        String pathToFile = xmlFile.substring(0, xmlFile.lastIndexOf(\"\\\\\") );\n        String directory = pathToFile.substring(pathToFile.lastIndexOf(\"\\\\\") + 1);\n        String testMethodName = String.format(\"%s/%s - %s\", directory, suiteName, method.getName());\n\n        //Total hack to change display name in HTML report  ＼(^o^)／ \n        Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(\"m_methodName\");\n        methodName.setAccessible(true);\n        methodName.set(result.getMethod(), testMethodName);\n    } catch (Exception e) {\n        // Eh....  ¯\\_(ツ)_/¯\n        e.printStackTrace();\n    }\n}\n...\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3720377,"reputation":1016,"user_id":3095589,"display_name":"Radadiya Nikunj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522184941,"creation_date":1522184941,"answer_id":49522435,"question_id":15220262,"body_markdown":"Please find following code for set custom name of testcase in TestNG reports.\r\n        \r\nFollowing features are available in this code.\r\n        \r\n- Dynamic execution on same test-case in multiple time\r\n- Set custom test-case name for reports\r\n- Set parallel execution of multiple test-cases execution\r\n\r\n\r\n    \timport java.lang.reflect.Field;\r\n        import org.testng.ITest;\r\n        import org.testng.ITestResult;\r\n        import org.testng.Reporter;\r\n        import org.testng.annotations.AfterMethod;\r\n        import org.testng.annotations.DataProvider;\r\n        import org.testng.annotations.Factory;\r\n        import org.testng.annotations.Test;\r\n        import org.testng.internal.BaseTestMethod;\r\n        import com.test.data.ServiceProcessData;\r\n        \r\n        public class ServiceTest implements ITest {\r\n    \r\n    \tprotected ServiceProcessData serviceProcessData;\r\n    \tprotected String testCaseName = &quot;&quot;;\r\n    \r\n    \t@Test\r\n    \tpublic void executeServiceTest() {\r\n    \t\tSystem.out.println(this.serviceProcessData.toString());\r\n    \t}\r\n    \r\n    \t@Factory(dataProvider = &quot;processDataList&quot;)\r\n    \tpublic RiskServiceTest(ServiceProcessData serviceProcessData) {\r\n    \t\tthis.serviceProcessData = serviceProcessData;\r\n    \t}\r\n    \r\n    \t@DataProvider(name = &quot;processDataList&quot;, parallel = true)\r\n    \tpublic static Object[] getProcessDataList() {\r\n    \r\n    \t\tObject[] serviceProcessDataList = new Object[0];\r\n    \t\t//Set data in serviceProcessDataList\r\n    \t\treturn serviceProcessDataList;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getTestName() {\r\n    \r\n    \t\tthis.testCaseName = &quot;User custom testcase name&quot;;\r\n    \r\n    \t\treturn this.testCaseName;\r\n    \t}\r\n    \r\n    \t@AfterMethod(alwaysRun = true)\r\n    \tpublic void setResultTestName(ITestResult result) {\r\n    \t\ttry {\r\n    \t\t\tBaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod();\r\n    \t\t\tField f = baseTestMethod.getClass().getSuperclass().getDeclaredField(&quot;m_methodName&quot;);\r\n    \t\t\tf.setAccessible(true);\r\n    \t\t\tf.set(baseTestMethod, this.testCaseName);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tErrorMessageHelper.getInstance().setErrorMessage(e);\r\n    \t\t\tReporter.log(&quot;Exception : &quot; + e.getMessage());\r\n    \t\t}\r\n    \t}}\r\n    \r\n\r\n    Thanks","title":"Custom test method name in TestNG reports","body":"<p>Please find following code for set custom name of testcase in TestNG reports.</p>\n\n<p>Following features are available in this code.</p>\n\n<ul>\n<li>Dynamic execution on same test-case in multiple time</li>\n<li>Set custom test-case name for reports</li>\n<li><p>Set parallel execution of multiple test-cases execution</p>\n\n<pre><code>import java.lang.reflect.Field;\nimport org.testng.ITest;\nimport org.testng.ITestResult;\nimport org.testng.Reporter;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Factory;\nimport org.testng.annotations.Test;\nimport org.testng.internal.BaseTestMethod;\nimport com.test.data.ServiceProcessData;\n\npublic class ServiceTest implements ITest {\n\nprotected ServiceProcessData serviceProcessData;\nprotected String testCaseName = \"\";\n\n@Test\npublic void executeServiceTest() {\n    System.out.println(this.serviceProcessData.toString());\n}\n\n@Factory(dataProvider = \"processDataList\")\npublic RiskServiceTest(ServiceProcessData serviceProcessData) {\n    this.serviceProcessData = serviceProcessData;\n}\n\n@DataProvider(name = \"processDataList\", parallel = true)\npublic static Object[] getProcessDataList() {\n\n    Object[] serviceProcessDataList = new Object[0];\n    //Set data in serviceProcessDataList\n    return serviceProcessDataList;\n}\n\n@Override\npublic String getTestName() {\n\n    this.testCaseName = \"User custom testcase name\";\n\n    return this.testCaseName;\n}\n\n@AfterMethod(alwaysRun = true)\npublic void setResultTestName(ITestResult result) {\n    try {\n        BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod();\n        Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField(\"m_methodName\");\n        f.setAccessible(true);\n        f.set(baseTestMethod, this.testCaseName);\n    } catch (Exception e) {\n        ErrorMessageHelper.getInstance().setErrorMessage(e);\n        Reporter.log(\"Exception : \" + e.getMessage());\n    }\n}}\n</code></pre>\n\n<p>Thanks</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4177498,"reputation":416,"user_id":3423570,"display_name":"Rohit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1591623545,"creation_date":1591623545,"answer_id":62263418,"question_id":15220262,"body_markdown":"The answer by artdanil did not completely solve my problem, the test name is not updated in emailable report. \r\n\r\nAnswer posted by @jersey-city-ninja does update the name in Emailable report but it repeats the same-last updated testname for all the Dataprovider values because what pilotg2 posted is true for tests that consume Dataprovider i.e. the getTestName method keeps returning the last set name for a method and all the testnames for a dataprovider are same.  \r\n    \r\n**So here is the answer** that is combination of answer posted by @pilotg2 and @jersey-city-ninja and with additional step to overcome duplicate method names.\r\n    \r\n**Note** this updates the testname in Emailable report, XML report, HTML report, Junit report. \r\nI don&#39;t see it updating the Eclipse - TestNg execution view - will update if I found something\r\n    \r\n    import org.testng.Assert;\r\n    import org.testng.ITest;\r\n    import org.testng.ITestContext;\r\n    import org.testng.ITestResult;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeClass;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class NewDataProviderTest implements ITest {\r\n    \t//The Java ThreadLocal class enables you to create variables that can only be read and written by the same thread\r\n    \tprivate ThreadLocal&lt;String&gt; testName = new ThreadLocal&lt;&gt;();\r\n    \r\n    \t/*\r\n    \t* TestNG, for some reason, when building different reports, calls getName() on the test while building the report.\r\n    \t* This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\r\n    \t* If you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem.\r\n    \t* As the ITest strategy returns the name for the test as the name set by the last run.\r\n    \t* */\r\n    \tprivate int emailNameIndex = 0;\r\n    \tprivate int htmlNameIndex = 0;\r\n    \tprivate int xmlNameIndex = 0;\r\n    \tprivate ArrayList&lt;String&gt; allTests = new ArrayList&lt;String&gt;();\r\n    \t/*\r\n    \t* TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests\r\n    \t* Hence keeping them in 2 separate lists\r\n    \t* */\r\n    \tprivate ArrayList&lt;String&gt; passedTests = new ArrayList&lt;String&gt;();\r\n    \tprivate ArrayList&lt;String&gt; failedTests = new ArrayList&lt;String&gt;();\r\n    \t\r\n    \t@BeforeClass(alwaysRun = true)\r\n    \tpublic void initialize() {\r\n    \t\tthis.testName.set(&quot;&quot;);\r\n    \t}\r\n        \r\n    \t@BeforeMethod(alwaysRun = true)\r\n    \tpublic void setCustomTestcaseName(Method method, Object[] testData) {\r\n    \t\t//Set the default name\r\n    \t\tthis.testName.set(method.getName());\r\n    \t\t//Change the test name only if Dataprovider is used\r\n    \t\t//Check if data provider is used in the test\r\n    \t\tif (testData != null &amp;&amp; testData.length &gt; 0) {\r\n    \t\t\tSystem.out.println(&quot;\\n\\nParameters &quot;+testData[0]+&quot; are passed to the test - &quot;+method.getName());\r\n    \t\t\t//Taking 1st field in the Dataprovider for updating testname - can be changed as desired maybe using a variable\r\n    \t\t\t//I&#39;m changing the name only if the Dataprovider field is String\r\n    \t\t\tif (testData[0] instanceof String) {\r\n    \t\t\t\t//Taking 1st field in the Dataprovider for updating testname - can be changed as desired\r\n    \t\t\t\tSystem.out.println(&quot;I&#39;m setting custom name to the test as &quot;+method.getName() + &quot;_&quot; + testData[0]);\r\n    \t\t\t\tthis.testName.set(method.getName() + &quot;_&quot; + testData[0]);\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t\t//Add the name to the collection that stores all list names\r\n    \t\tallTests.add(testName.get());\r\n    \r\n    \t}\r\n    \t \r\n    \t @AfterMethod (alwaysRun = true)\r\n    \t public void setTheTestcaseNameInResult(ITestResult result, Method method) {\r\n    \t\t//Fill the Passed and Failed tests collections\r\n    \t     try {\r\n    \t    \t if(result.getStatus() == ITestResult.SUCCESS) {\r\n    \t    \t\t System.out.println(&quot;Adding &quot;+ result.getTestName() + &quot; to passed tests collection&quot;);\r\n    \t    \t\t passedTests.add(result.getTestName());\r\n    \t    \t }\r\n    \t    \t if(result.getStatus() == ITestResult.FAILURE) {\r\n    \t\t\t\t System.out.println(&quot;Adding &quot; + result.getTestName() + &quot; to FAILURE tests collection&quot;);\r\n    \t\t\t\t failedTests.add(result.getTestName());\r\n    \t\t\t }\r\n    \t     } catch (Exception e) {\r\n    \t         e.printStackTrace();\r\n    \t     }\r\n    \t\t // To change display name in HTML report\r\n             //Only changing the name if the parameter is instance of String\r\n    \t\t if(iTestResult.getParameters().length &gt; 0) {\r\n    \t\t\t if (iTestResult.getParameters()[0] instanceof String) {\r\n    \t\t\t\t System.out.println(&quot;Updating the name as Parameters are passed to the test-&quot;+method.getName());\r\n    \t\t\t\t try {\r\n                         /* This helps in setting unique name to method for each test instance for a data provider*/\r\n    \t\t\t\t\t Field resultMethod = TestResult.class.getDeclaredField(&quot;m_method&quot;);\r\n    \t\t\t\t\t resultMethod.setAccessible(true);\r\n    \t\t\t\t\t resultMethod.set(iTestResult, iTestResult.getMethod().clone());\r\n    \r\n    \t\t\t\t\t Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(&quot;m_methodName&quot;);\r\n    \t\t\t\t\t methodName.setAccessible(true);\r\n    \t\t\t\t\t methodName.set(iTestResult.getMethod(), this.getTestName());\r\n    \t\t\t\t } catch (Exception e) {\r\n    \t\t\t\t\t e.printStackTrace();\r\n    \t\t\t\t }\r\n    \t\t\t\t System.out.println(&quot;New Name is - &quot; + iTestResult.getMethod().getMethodName());\r\n    \r\n    \t\t\t }\r\n    \t\t }\r\n    \t }\r\n    \r\n    \t@Override\r\n    \tpublic String getTestName() {\r\n    \t\tString name = testName.get();\r\n    \t\tStackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();// .toString();\r\n    \t\t//This is called\r\n    \t\tif (isCalledFromMethod(stackTrace, &quot;XMLSuiteResultWriter&quot;)) {\r\n    \t\t\t//System.out.println(&quot;Got called from XMLSuiteResultWriter&quot;);\r\n    \t\t\tif (allTestNames.size() &gt; 0) {\r\n    \t\t\t\tif (xmlNameIndex &lt; allTestNames.size()) {\r\n    \t\t\t\t\tname = allTestNames.get(xmlNameIndex);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tname = allTestNames.get(0);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t}\r\n    \t\t\txmlNameIndex++;\r\n    \t\t\tif (xmlNameIndex &gt;= allTestNames.size()) {\r\n    \t\t\t\txmlNameIndex = 0;\r\n    \t\t\t}\r\n    \t\t\t// System.out.println(&quot;Got called from XMLSuiteResultWriter returning name - &quot;+name);\r\n    \t\t} else if (isCalledFromMethod(stackTrace, &quot;EmailableReporter&quot;)) {\r\n    \t\t\tif (allTestNames.size() &gt; 0) {\r\n    \t\t\t\tif (emailNameIndex &lt; allTestNames.size()) {\r\n    \t\t\t\t\tname = allTestNames.get(emailNameIndex);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tname = allTestNames.get(0);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t}\r\n    \t\t\temailNameIndex++;\r\n    \t\t\tif (emailNameIndex &gt;= allTestNames.size()) {\r\n    \t\t\t\temailNameIndex = 0;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;Got called from EmailableReporter returning name -&quot;+name);\r\n    \t\t}\r\n    \t\tif (isCalledFromMethod(stackTrace, &quot;TestHTMLReporter&quot;)) {\r\n    \t\t\tif (allTestNames.size() &lt;= 0) {\r\n    \t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t} else {\r\n    \t\t\t\tif (htmlNameIndex &lt; failedTestNames.size()) {\r\n    \t\t\t\t\tname = failedTestNames.get(htmlNameIndex);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tint htmlPassedIndex = htmlNameIndex - failedTestNames.size();\r\n    \t\t\t\t\tif (htmlPassedIndex &lt; passedTestNames.size()) {\r\n    \t\t\t\t\t\tname = passedTestNames.get(htmlPassedIndex);\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\thtmlNameIndex++;\r\n    \t\t\tif (htmlNameIndex &gt;= allTestNames.size()) {\r\n    \t\t\t\thtmlNameIndex = 0;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;Got called from TestHTMLReporter returning name - &quot;+name);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Returning testname as-&quot;+name);\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tprivate boolean isCalledFromMethod(StackTraceElement[] stackTrace, String checkForMethod) {\r\n    \t\tboolean calledFrom = false;\r\n    \t\tfor (StackTraceElement element : stackTrace) {\r\n    \t\t\tString stack = element.toString();\r\n    \t\t\t// System.out.println(&quot;Rohit the called from value is:&quot;+stack);\r\n    \t\t\tif (stack.contains(checkForMethod))\r\n    \t\t\t\tcalledFrom = true;\r\n    \t\t}\r\n    \t\treturn calledFrom;\r\n    \t}\r\n    \t \r\n    \t \r\n      @Test(groups= {&quot;L1&quot;, &quot;L2&quot;, &quot;L3&quot;}, dataProvider = &quot;dp1&quot;)\r\n      public void dataProviderTest(String username) {\r\n    \t  System.out.println(&quot;\\n\\nI&#39;m in dataProviderTest with data-&quot;+username);\r\n    \t  /* Fail the test if value is L2 - deliberately so that we have failed test in report */ \r\n          if(username.contains(&quot;L2&quot;)) {\r\n    \t\t  Assert.fail();\r\n    \t  }\r\n    \t  \r\n      }\r\n      \r\n      @Test(dependsOnMethods = &quot;dataProviderTest&quot;, groups= {&quot;L1&quot;, &quot;L2&quot;, &quot;L3&quot;}, dataProvider = &quot;dp1&quot;)\r\n      public void dataProviderDependentTest(String username) {\r\n    \t  System.out.println(&quot;\\n\\nI&#39;m in dataProvider DEPENDENT Test with data-&quot;+username);\r\n    \t \r\n      }\r\n      \r\n      //This test consumes data of type list so the name will not be updated in report\r\n      @Test(groups= {&quot;L1&quot;, &quot;L2&quot;, &quot;L3&quot;}, dataProvider = &quot;dp2&quot;)\r\n      public void dataListProviderTest(List&lt;String[]&gt; list) {\r\n    \t  Object[] arr = list.get(0);\r\n    \t\tList&lt;Object&gt; arrList = Arrays.asList(arr);\r\n    \t\tIterator&lt;Object&gt; iterator = arrList.iterator();\r\n    \t\twhile (iterator.hasNext()) {\r\n    \t\t\t\r\n    \t\tString[] data = (String[]) iterator.next();\r\n    \t\tSystem.out.println(&quot;In list test - &quot;+data[0]);\r\n    \t\t}\t \r\n    \t  \r\n      }\r\n      \r\n      @DataProvider(name=&quot;dp1&quot;)\r\n      public Object[][] getDataForTest(ITestContext iTestContext){\r\n    \t  Object[][] L1 = new Object[][] {\r\n    \t\t  {&quot;L1&quot;}, {&quot;L2&quot;}, {&quot;L3&quot;}\r\n    \t  };\r\n  \r\n    \t  \r\n    \t  return L1;\r\n      }\r\n      \r\n      \r\n      @DataProvider(name=&quot;dp2&quot;)\r\n      public Object[][] getDataListForTest(ITestContext iTestContext){\r\n    \t  List&lt;Object[][]&gt; list = new ArrayList&lt;Object[][]&gt;();\r\n    \t  Object[][] L1 = new Object[][] {\r\n    \t\t  new String [] {&quot;L1&quot;, &quot;l1&quot;}, \r\n    \t\t  new String [] {&quot;L1&quot;, &quot;l1&quot;}\r\n    \t  };\r\n    \t  \r\n    \t list.add(L1);\r\n    \t  return new Object[][] { { list } };\r\n      }\r\n      \r\n    }\r\n\r\n","title":"Custom test method name in TestNG reports","body":"<p>The answer by artdanil did not completely solve my problem, the test name is not updated in emailable report. </p>\n\n<p>Answer posted by @jersey-city-ninja does update the name in Emailable report but it repeats the same-last updated testname for all the Dataprovider values because what pilotg2 posted is true for tests that consume Dataprovider i.e. the getTestName method keeps returning the last set name for a method and all the testnames for a dataprovider are same.  </p>\n\n<p><strong>So here is the answer</strong> that is combination of answer posted by @pilotg2 and @jersey-city-ninja and with additional step to overcome duplicate method names.</p>\n\n<p><strong>Note</strong> this updates the testname in Emailable report, XML report, HTML report, Junit report. \nI don't see it updating the Eclipse - TestNg execution view - will update if I found something</p>\n\n<pre><code>import org.testng.Assert;\nimport org.testng.ITest;\nimport org.testng.ITestContext;\nimport org.testng.ITestResult;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;\n\nimport java.lang.reflect.Method;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.List;\n\n\npublic class NewDataProviderTest implements ITest {\n    //The Java ThreadLocal class enables you to create variables that can only be read and written by the same thread\n    private ThreadLocal&lt;String&gt; testName = new ThreadLocal&lt;&gt;();\n\n    /*\n    * TestNG, for some reason, when building different reports, calls getName() on the test while building the report.\n    * This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\n    * If you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem.\n    * As the ITest strategy returns the name for the test as the name set by the last run.\n    * */\n    private int emailNameIndex = 0;\n    private int htmlNameIndex = 0;\n    private int xmlNameIndex = 0;\n    private ArrayList&lt;String&gt; allTests = new ArrayList&lt;String&gt;();\n    /*\n    * TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests\n    * Hence keeping them in 2 separate lists\n    * */\n    private ArrayList&lt;String&gt; passedTests = new ArrayList&lt;String&gt;();\n    private ArrayList&lt;String&gt; failedTests = new ArrayList&lt;String&gt;();\n\n    @BeforeClass(alwaysRun = true)\n    public void initialize() {\n        this.testName.set(\"\");\n    }\n\n    @BeforeMethod(alwaysRun = true)\n    public void setCustomTestcaseName(Method method, Object[] testData) {\n        //Set the default name\n        this.testName.set(method.getName());\n        //Change the test name only if Dataprovider is used\n        //Check if data provider is used in the test\n        if (testData != null &amp;&amp; testData.length &gt; 0) {\n            System.out.println(\"\\n\\nParameters \"+testData[0]+\" are passed to the test - \"+method.getName());\n            //Taking 1st field in the Dataprovider for updating testname - can be changed as desired maybe using a variable\n            //I'm changing the name only if the Dataprovider field is String\n            if (testData[0] instanceof String) {\n                //Taking 1st field in the Dataprovider for updating testname - can be changed as desired\n                System.out.println(\"I'm setting custom name to the test as \"+method.getName() + \"_\" + testData[0]);\n                this.testName.set(method.getName() + \"_\" + testData[0]);\n            }\n\n        }\n        //Add the name to the collection that stores all list names\n        allTests.add(testName.get());\n\n    }\n\n     @AfterMethod (alwaysRun = true)\n     public void setTheTestcaseNameInResult(ITestResult result, Method method) {\n        //Fill the Passed and Failed tests collections\n         try {\n             if(result.getStatus() == ITestResult.SUCCESS) {\n                 System.out.println(\"Adding \"+ result.getTestName() + \" to passed tests collection\");\n                 passedTests.add(result.getTestName());\n             }\n             if(result.getStatus() == ITestResult.FAILURE) {\n                 System.out.println(\"Adding \" + result.getTestName() + \" to FAILURE tests collection\");\n                 failedTests.add(result.getTestName());\n             }\n         } catch (Exception e) {\n             e.printStackTrace();\n         }\n         // To change display name in HTML report\n         //Only changing the name if the parameter is instance of String\n         if(iTestResult.getParameters().length &gt; 0) {\n             if (iTestResult.getParameters()[0] instanceof String) {\n                 System.out.println(\"Updating the name as Parameters are passed to the test-\"+method.getName());\n                 try {\n                     /* This helps in setting unique name to method for each test instance for a data provider*/\n                     Field resultMethod = TestResult.class.getDeclaredField(\"m_method\");\n                     resultMethod.setAccessible(true);\n                     resultMethod.set(iTestResult, iTestResult.getMethod().clone());\n\n                     Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(\"m_methodName\");\n                     methodName.setAccessible(true);\n                     methodName.set(iTestResult.getMethod(), this.getTestName());\n                 } catch (Exception e) {\n                     e.printStackTrace();\n                 }\n                 System.out.println(\"New Name is - \" + iTestResult.getMethod().getMethodName());\n\n             }\n         }\n     }\n\n    @Override\n    public String getTestName() {\n        String name = testName.get();\n        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();// .toString();\n        //This is called\n        if (isCalledFromMethod(stackTrace, \"XMLSuiteResultWriter\")) {\n            //System.out.println(\"Got called from XMLSuiteResultWriter\");\n            if (allTestNames.size() &gt; 0) {\n                if (xmlNameIndex &lt; allTestNames.size()) {\n                    name = allTestNames.get(xmlNameIndex);\n                } else {\n                    name = allTestNames.get(0);\n                }\n            } else {\n                name = \"undefined\";\n            }\n            xmlNameIndex++;\n            if (xmlNameIndex &gt;= allTestNames.size()) {\n                xmlNameIndex = 0;\n            }\n            // System.out.println(\"Got called from XMLSuiteResultWriter returning name - \"+name);\n        } else if (isCalledFromMethod(stackTrace, \"EmailableReporter\")) {\n            if (allTestNames.size() &gt; 0) {\n                if (emailNameIndex &lt; allTestNames.size()) {\n                    name = allTestNames.get(emailNameIndex);\n                } else {\n                    name = allTestNames.get(0);\n                }\n            } else {\n                name = \"undefined\";\n            }\n            emailNameIndex++;\n            if (emailNameIndex &gt;= allTestNames.size()) {\n                emailNameIndex = 0;\n            }\n            System.out.println(\"Got called from EmailableReporter returning name -\"+name);\n        }\n        if (isCalledFromMethod(stackTrace, \"TestHTMLReporter\")) {\n            if (allTestNames.size() &lt;= 0) {\n                name = \"undefined\";\n            } else {\n                if (htmlNameIndex &lt; failedTestNames.size()) {\n                    name = failedTestNames.get(htmlNameIndex);\n                } else {\n                    int htmlPassedIndex = htmlNameIndex - failedTestNames.size();\n                    if (htmlPassedIndex &lt; passedTestNames.size()) {\n                        name = passedTestNames.get(htmlPassedIndex);\n                    } else {\n                        name = \"undefined\";\n                    }\n                }\n            }\n            htmlNameIndex++;\n            if (htmlNameIndex &gt;= allTestNames.size()) {\n                htmlNameIndex = 0;\n            }\n            System.out.println(\"Got called from TestHTMLReporter returning name - \"+name);\n        }\n        System.out.println(\"Returning testname as-\"+name);\n        return name;\n    }\n\n    private boolean isCalledFromMethod(StackTraceElement[] stackTrace, String checkForMethod) {\n        boolean calledFrom = false;\n        for (StackTraceElement element : stackTrace) {\n            String stack = element.toString();\n            // System.out.println(\"Rohit the called from value is:\"+stack);\n            if (stack.contains(checkForMethod))\n                calledFrom = true;\n        }\n        return calledFrom;\n    }\n\n\n  @Test(groups= {\"L1\", \"L2\", \"L3\"}, dataProvider = \"dp1\")\n  public void dataProviderTest(String username) {\n      System.out.println(\"\\n\\nI'm in dataProviderTest with data-\"+username);\n      /* Fail the test if value is L2 - deliberately so that we have failed test in report */ \n      if(username.contains(\"L2\")) {\n          Assert.fail();\n      }\n\n  }\n\n  @Test(dependsOnMethods = \"dataProviderTest\", groups= {\"L1\", \"L2\", \"L3\"}, dataProvider = \"dp1\")\n  public void dataProviderDependentTest(String username) {\n      System.out.println(\"\\n\\nI'm in dataProvider DEPENDENT Test with data-\"+username);\n\n  }\n\n  //This test consumes data of type list so the name will not be updated in report\n  @Test(groups= {\"L1\", \"L2\", \"L3\"}, dataProvider = \"dp2\")\n  public void dataListProviderTest(List&lt;String[]&gt; list) {\n      Object[] arr = list.get(0);\n        List&lt;Object&gt; arrList = Arrays.asList(arr);\n        Iterator&lt;Object&gt; iterator = arrList.iterator();\n        while (iterator.hasNext()) {\n\n        String[] data = (String[]) iterator.next();\n        System.out.println(\"In list test - \"+data[0]);\n        }    \n\n  }\n\n  @DataProvider(name=\"dp1\")\n  public Object[][] getDataForTest(ITestContext iTestContext){\n      Object[][] L1 = new Object[][] {\n          {\"L1\"}, {\"L2\"}, {\"L3\"}\n      };\n\n\n      return L1;\n  }\n\n\n  @DataProvider(name=\"dp2\")\n  public Object[][] getDataListForTest(ITestContext iTestContext){\n      List&lt;Object[][]&gt; list = new ArrayList&lt;Object[][]&gt;();\n      Object[][] L1 = new Object[][] {\n          new String [] {\"L1\", \"l1\"}, \n          new String [] {\"L1\", \"l1\"}\n      };\n\n     list.add(L1);\n      return new Object[][] { { list } };\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":343525,"reputation":675,"user_id":675295,"display_name":"ghm1014"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637094836,"creation_date":1637094836,"answer_id":69995725,"question_id":15220262,"body_markdown":"Running into the same issue this is how we solved it:\r\n\r\nThe problem is that all ITestResult result objects share a single ITestNGMethod object instance, so when the method name is changed it affects all results. \r\n\r\nFrom:\r\norg.testng.reporters.XMLSuiteResultWriter#getTestResultAttributes\r\n\r\n        attributes.setProperty(XMLReporterConfig.ATTR_NAME, testResult.getMethod().getMethodName());\r\n\r\nThe name attribute is being read from testResult.getMethod().getMethodName()\r\n\r\nBasically we cloned the method object for each result, so each can have an independent getMethod().\r\n\r\nWe added this code:\r\n\r\n      @AfterMethod(alwaysRun = true)\r\n    public void setResultTestName(ITestResult result, ITestContext context) {\r\n        try {\r\n            BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod().clone();\r\n\r\n            String featureName = StringUtils.substringBetween(result.getParameters()[1].toString(), &quot;[&quot;, &quot;]&quot;);\r\n            String scenarioName = result.getParameters()[0].toString().replace(&quot;\\&quot;&quot;, &quot;&quot;);\r\n            Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField(&quot;m_methodName&quot;);\r\n            f.setAccessible(true);\r\n            f.set(baseTestMethod, featureName + &quot; - &quot; + scenarioName);\r\n\r\n            f = result.getClass().getDeclaredField(&quot;m_method&quot;);\r\n            f.setAccessible(true);\r\n            f.set(result, baseTestMethod);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Custom test method name in TestNG reports","body":"<p>Running into the same issue this is how we solved it:</p>\n<p>The problem is that all ITestResult result objects share a single ITestNGMethod object instance, so when the method name is changed it affects all results.</p>\n<p>From:\norg.testng.reporters.XMLSuiteResultWriter#getTestResultAttributes</p>\n<pre><code>    attributes.setProperty(XMLReporterConfig.ATTR_NAME, testResult.getMethod().getMethodName());\n</code></pre>\n<p>The name attribute is being read from testResult.getMethod().getMethodName()</p>\n<p>Basically we cloned the method object for each result, so each can have an independent getMethod().</p>\n<p>We added this code:</p>\n<pre><code>  @AfterMethod(alwaysRun = true)\npublic void setResultTestName(ITestResult result, ITestContext context) {\n    try {\n        BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod().clone();\n\n        String featureName = StringUtils.substringBetween(result.getParameters()[1].toString(), &quot;[&quot;, &quot;]&quot;);\n        String scenarioName = result.getParameters()[0].toString().replace(&quot;\\&quot;&quot;, &quot;&quot;);\n        Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField(&quot;m_methodName&quot;);\n        f.setAccessible(true);\n        f.set(baseTestMethod, featureName + &quot; - &quot; + scenarioName);\n\n        f = result.getClass().getDeclaredField(&quot;m_method&quot;);\n        f.setAccessible(true);\n        f.set(result, baseTestMethod);\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":465422,"reputation":3287,"user_id":869488,"accept_rate":32,"display_name":"rajesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37497,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":7,"score":24,"last_activity_date":1637094836,"creation_date":1362475943,"question_id":15220262,"body_markdown":"I am working on a project where I need to invoke TestNG programatically(using data providers). Things are fine except that in the report, we are getting the name of the @Test method, which is a generic one to handle many cases. What we would like is to get a meaningful name in the report.\r\n\r\nI was researching on this and found 3 ways, but unfortunately, all are failing for me.\r\n\r\n**1) Implement ITest**\r\n\r\nI have found about this [here](https://groups.google.com/forum/?fromgroups=#!topic/testng-users/a6v0PkSVmM0) and [here](https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703)\r\n\r\nI am setting the name I want as soon as I enter the @Test method(For all 3 ways i tried,this is how I am setting the name).This name is returned from getTestName(). What i observed is that getTestName() is getting called before and after my @Test. Initially, it is returning null(for handling NullPointerException, I return &quot;&quot; instead of null) and later it returns correct value. But i dont see this getting reflected in the report\r\n\r\n**Edit**:Also tried setting the name from@BeforeMethod as suggested by artdanil\r\n\r\n**2 and 3**\r\n\r\nBoth are based on solutions given in the [second link above](https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703)\r\n\r\nBy overriding setName in XmlSuite, I am getting\r\n\r\n   \r\n\r\n    Exception in thread &quot;main&quot; java.lang.AssertionError: l should not be null\r\n            at org.testng.ClassMethodMap.removeAndCheckIfLast(ClassMethodMap.java:58)\r\n            at org.testng.internal.TestMethodWorker.invokeAfterClassMethods(TestMethodWorker.java:208)\r\n            at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:114)\r\n            at org.testng.TestRunner.privateRun(TestRunner.java:767)\r\n            ...\r\n\r\nBy overriding toString(), I see these in logs (with my comments) but no updates in report\r\n\r\n    [2013-03-05 14:53:22,174] (Main.java:30) - calling execute \r\n        [2013-03-05 14:53:22,346] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor\r\n        [2013-03-05 14:53:22,372] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//this followed by 3 invocations before arriving at @Test method**\r\n        [2013-03-05 14:53:22,410] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \r\n        [2013-03-05 14:53:22,416] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \r\n        [2013-03-05 14:53:22,455] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \r\n        [2013-03-05 14:53:22,892] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor \r\n        [2013-03-05 14:53:23,178] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//again blank as i havent set it yet**\r\n        [2013-03-05 14:53:23,182] GenericFunctionTest.getResult(GenericFunctionTest.java:69) - inside with test case:TestCase{signature=Signature{...}}**//I am setting it immedietely after this**\r\n        [2013-03-05 14:53:23,293] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **//What i want**\r\n        [2013-03-05 14:53:23,299] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **// again**\r\n\r\n**Edit:** tried again all 3 by hardcoding a value rather than setting it on entry of my test method. But same results","title":"Custom test method name in TestNG reports","body":"<p>I am working on a project where I need to invoke TestNG programatically(using data providers). Things are fine except that in the report, we are getting the name of the @Test method, which is a generic one to handle many cases. What we would like is to get a meaningful name in the report.</p>\n\n<p>I was researching on this and found 3 ways, but unfortunately, all are failing for me.</p>\n\n<p><strong>1) Implement ITest</strong></p>\n\n<p>I have found about this <a href=\"https://groups.google.com/forum/?fromgroups=#!topic/testng-users/a6v0PkSVmM0\" rel=\"noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703\">here</a></p>\n\n<p>I am setting the name I want as soon as I enter the @Test method(For all 3 ways i tried,this is how I am setting the name).This name is returned from getTestName(). What i observed is that getTestName() is getting called before and after my @Test. Initially, it is returning null(for handling NullPointerException, I return \"\" instead of null) and later it returns correct value. But i dont see this getting reflected in the report</p>\n\n<p><strong>Edit</strong>:Also tried setting the name from@BeforeMethod as suggested by artdanil</p>\n\n<p><strong>2 and 3</strong></p>\n\n<p>Both are based on solutions given in the <a href=\"https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703\">second link above</a></p>\n\n<p>By overriding setName in XmlSuite, I am getting</p>\n\n<pre><code>Exception in thread \"main\" java.lang.AssertionError: l should not be null\n        at org.testng.ClassMethodMap.removeAndCheckIfLast(ClassMethodMap.java:58)\n        at org.testng.internal.TestMethodWorker.invokeAfterClassMethods(TestMethodWorker.java:208)\n        at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:114)\n        at org.testng.TestRunner.privateRun(TestRunner.java:767)\n        ...\n</code></pre>\n\n<p>By overriding toString(), I see these in logs (with my comments) but no updates in report</p>\n\n<pre><code>[2013-03-05 14:53:22,174] (Main.java:30) - calling execute \n    [2013-03-05 14:53:22,346] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor\n    [2013-03-05 14:53:22,372] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//this followed by 3 invocations before arriving at @Test method**\n    [2013-03-05 14:53:22,410] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \n    [2013-03-05 14:53:22,416] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \n    [2013-03-05 14:53:22,455] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \n    [2013-03-05 14:53:22,892] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor \n    [2013-03-05 14:53:23,178] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//again blank as i havent set it yet**\n    [2013-03-05 14:53:23,182] GenericFunctionTest.getResult(GenericFunctionTest.java:69) - inside with test case:TestCase{signature=Signature{...}}**//I am setting it immedietely after this**\n    [2013-03-05 14:53:23,293] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **//What i want**\n    [2013-03-05 14:53:23,299] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **// again**\n</code></pre>\n\n<p><strong>Edit:</strong> tried again all 3 by hardcoding a value rather than setting it on entry of my test method. But same results</p>\n"},{"tags":["java","jsse"],"comments":[{"owner":{"account_id":1633932,"reputation":2930,"user_id":1507941,"accept_rate":83,"display_name":"Pluto"},"score":1,"creation_date":1536179763,"post_id":9745193,"comment_id":91335800,"body_markdown":"The use of an exclamation mark in the exception message made me lol","body":"The use of an exclamation mark in the exception message made me lol"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1440688615,"creation_date":1331937085,"answer_id":9745323,"question_id":9745193,"body_markdown":"Rather than mixing runtime and policy file versions, you should use [the policy files for Java 7.][1]\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>Rather than mixing runtime and policy file versions, you should use <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html\">the policy files for Java 7.</a></p>\n"},{"tags":[],"owner":{"account_id":1010812,"reputation":7229,"user_id":1023421,"accept_rate":62,"display_name":"prageeth"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1440659205,"creation_date":1374065101,"answer_id":17700110,"question_id":9745193,"body_markdown":"This happens when Java version does not match with the version of policy files. You can download the relevant policy files from following links.\r\n\r\n[Policy jars for Java 8][1]&lt;br/&gt;\r\n[Policy jars for Java 7][2]&lt;br/&gt;\r\n[Policy jars for Java 6][3]\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html\r\n  [2]: http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html\r\n  [3]: http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>This happens when Java version does not match with the version of policy files. You can download the relevant policy files from following links.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html\" rel=\"noreferrer\">Policy jars for Java 8</a><br/>\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html\" rel=\"noreferrer\">Policy jars for Java 7</a><br/>\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html\" rel=\"noreferrer\">Policy jars for Java 6</a></p>\n"},{"tags":[],"owner":{"account_id":5039122,"reputation":51,"user_id":4047099,"display_name":"kpamu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410883011,"creation_date":1410883011,"answer_id":25873361,"question_id":9745193,"body_markdown":"This could happen if there are standard policy jar files somewhere in the classpath. I suggest to find and replace all the local_policy.jar and us_export_policy.jar files  with the unrestricted versions of these jars in your machine. If you are using IBM&#39;s WAS/Portal Server/RAD, here is the link to the unrestricted JCE policy &lt;a href=&quot;https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source=jcesdk&quot;&gt;jars&lt;/a&gt;.","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>This could happen if there are standard policy jar files somewhere in the classpath. I suggest to find and replace all the local_policy.jar and us_export_policy.jar files  with the unrestricted versions of these jars in your machine. If you are using IBM's WAS/Portal Server/RAD, here is the link to the unrestricted JCE policy <a href=\"https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source=jcesdk\" rel=\"noreferrer\">jars</a>.</p>\n"},{"tags":[],"owner":{"account_id":255184,"reputation":7191,"user_id":535060,"accept_rate":94,"display_name":"Somaiah Kumbera"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1461229013,"creation_date":1461229013,"answer_id":36764619,"question_id":9745193,"body_markdown":"Its possible that you have different versions of the JDK. For example if your JAVA_HOME points to version 7, but in your path version 6 shows up before version 7, this error could pop up.\r\n\r\n","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>Its possible that you have different versions of the JDK. For example if your JAVA_HOME points to version 7, but in your path version 6 shows up before version 7, this error could pop up.</p>\n"},{"tags":[],"owner":{"account_id":7304266,"reputation":561,"user_id":5565746,"display_name":"Vineela Thonupunuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637094702,"creation_date":1637094702,"answer_id":69995704,"question_id":9745193,"body_markdown":"\r\nWhile changing the version in your local or server, \r\nYou should copy original jre/lib/security folder as security8 and remove cacerts which refers to efs and instead copy from old security8. \r\nThis worked for me. ","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>While changing the version in your local or server,\nYou should copy original jre/lib/security folder as security8 and remove cacerts which refers to efs and instead copy from old security8.\nThis worked for me.</p>\n"}],"owner":{"account_id":13432,"reputation":4622,"user_id":26976,"accept_rate":56,"display_name":"Richard T"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87595,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":9745323,"answer_count":5,"score":44,"last_activity_date":1637094702,"creation_date":1331936149,"question_id":9745193,"body_markdown":"In working on a different problem (related to RMI), I upgraded the system&#39;s &quot;security folder&quot; with the &quot;unlimited strength&quot; policy files and now my applicaiton fails in a different way. I get a long stack dump, of which following bits appear pertinent:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    \r\n    [...crop...]\r\n    \r\n    Caused by: java.lang.SecurityException: Can not initialize cryptographic mechanism\r\n            at javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:86)\r\n            ... 17 more\r\n    Caused by: java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer!\r\n    \r\n    [...crop...]\r\n\r\n\r\nUm, WTF? The ONLY change was that I moved the orignal jar files aside and added the unlimited ones in $JAVA_HOME/lib/security. That directory now looks like this:\r\n\r\n\r\n    $ ls\r\n    blacklist      javaws.policy               trusted.libraries\r\n    cacerts        local_policy.jar            US_export_policy.jar\r\n    java.policy    local_policy.jar.strong     US_export_policy.jar.strong\r\n    java.security  local_policy.jar.unlimited  US_export_policy.jar.unlimited\r\n\r\nOf course, the .strong and .unlimited version are there so I can switch back quickly.\r\n\r\nThe directions were short and plain, and it would appear that they ONLY envision the replacement of these two files (local_policy.jar and US_exportpolicy.jar).\r\n\r\nWhat else is there to do?\r\n\r\nNote that the versions of java and the policy files are the very youngest to date: 1.7.0_03, and jce_policy-6, respectively.\r\n\r\nP.S. The article of similar title, found [here][1], was of no help at all.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1443871/jurisdiction-policy-files-are-not-signed-by-trusted-signers","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>In working on a different problem (related to RMI), I upgraded the system's \"security folder\" with the \"unlimited strength\" policy files and now my applicaiton fails in a different way. I get a long stack dump, of which following bits appear pertinent:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ExceptionInInitializerError\n\n[...crop...]\n\nCaused by: java.lang.SecurityException: Can not initialize cryptographic mechanism\n        at javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:86)\n        ... 17 more\nCaused by: java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer!\n\n[...crop...]\n</code></pre>\n\n<p>Um, WTF? The ONLY change was that I moved the orignal jar files aside and added the unlimited ones in $JAVA_HOME/lib/security. That directory now looks like this:</p>\n\n<pre><code>$ ls\nblacklist      javaws.policy               trusted.libraries\ncacerts        local_policy.jar            US_export_policy.jar\njava.policy    local_policy.jar.strong     US_export_policy.jar.strong\njava.security  local_policy.jar.unlimited  US_export_policy.jar.unlimited\n</code></pre>\n\n<p>Of course, the .strong and .unlimited version are there so I can switch back quickly.</p>\n\n<p>The directions were short and plain, and it would appear that they ONLY envision the replacement of these two files (local_policy.jar and US_exportpolicy.jar).</p>\n\n<p>What else is there to do?</p>\n\n<p>Note that the versions of java and the policy files are the very youngest to date: 1.7.0_03, and jce_policy-6, respectively.</p>\n\n<p>P.S. The article of similar title, found <a href=\"https://stackoverflow.com/questions/1443871/jurisdiction-policy-files-are-not-signed-by-trusted-signers\">here</a>, was of no help at all.</p>\n"},{"tags":["java","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1637010894,"post_id":69974740,"comment_id":123706327,"body_markdown":"Can you tell us where you are getting stuck? For example: Can you create your `List&lt;String&gt; contentImages` successfully? If not, can you show us how you tried? Your Thymeleaf looks OK - it just needs an iterator - for example: `&lt;img class=&quot;post-image&quot; th:each=&quot;contentImage : ${contentImages}&quot; th:src=&quot;@{&#39;data:image/jpeg;base64,&#39;+${contentImage}}&quot;&gt;`.","body":"Can you tell us where you are getting stuck? For example: Can you create your <code>List&lt;String&gt; contentImages</code> successfully? If not, can you show us how you tried? Your Thymeleaf looks OK - it just needs an iterator - for example: <code>&lt;img class=&quot;post-image&quot; th:each=&quot;contentImage : ${contentImages}&quot; th:src=&quot;@{&#39;data:image&#47;jpeg;base64,&#39;+${contentImage}}&quot;&gt;</code>."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1637071920,"post_id":69974740,"comment_id":123723761,"body_markdown":"I would recommend naming your Java list as `contentImages` (multiple images) not `contentImage`, just for clarity. And then, you need to use the Thymeleaf `th:each` iterator I mentioned in my first comment, which means: _&quot;for each `contentImage` in the list of `contentImages`, display the image...&quot;_.","body":"I would recommend naming your Java list as <code>contentImages</code> (multiple images) not <code>contentImage</code>, just for clarity. And then, you need to use the Thymeleaf <code>th:each</code> iterator I mentioned in my first comment, which means: <i>&quot;for each <code>contentImage</code> in the list of <code>contentImages</code>, display the image...&quot;</i>."},{"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"score":0,"creation_date":1637072021,"post_id":69974740,"comment_id":123723811,"body_markdown":"I tryed do that via `while (postMain.iterator().hasText())`.  Inside this I created a byte array like this: `byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());` , and after array I creating String with base64 code, then adding that all in `List&lt;String&gt;` which I initialized before this cycle","body":"I tryed do that via <code>while (postMain.iterator().hasText())</code>.  Inside this I created a byte array like this: <code>byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());</code> , and after array I creating String with base64 code, then adding that all in <code>List&lt;String&gt;</code> which I initialized before this cycle"},{"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"score":0,"creation_date":1637072152,"post_id":69974740,"comment_id":123723876,"body_markdown":"Okay, Thank you for good advices, I will know in future. I got &quot;Java heap space&quot; now (`th:each` already was used)","body":"Okay, Thank you for good advices, I will know in future. I got &quot;Java heap space&quot; now (<code>th:each</code> already was used)"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1637072656,"post_id":69974740,"comment_id":123724117,"body_markdown":"OK - understood. If you are already using `th:each` then you can [edit] your question to show that - and the other code you have added in your comments.","body":"OK - understood. If you are already using <code>th:each</code> then you can <a href=\"https://stackoverflow.com/posts/69974740/edit\">edit</a> your question to show that - and the other code you have added in your comments."},{"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"score":0,"creation_date":1637086694,"post_id":69974740,"comment_id":123730459,"body_markdown":"Thank you very much for help and your advices!","body":"Thank you very much for help and your advices!"}],"answers":[{"tags":[],"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637094643,"creation_date":1637083375,"answer_id":69993538,"question_id":69974740,"body_markdown":"This problem was solved.\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public ModelAndView home ( Model model) throws UnsupportedEncodingException {\r\n        ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\r\n        List&lt;PostModel&gt; postsMain = (List&lt;PostModel&gt;) postRepository.findAll();\r\n\r\n        int size = Iterables.size(postsMain); //Receiving size of Iterator\r\n        byte[] encodeBase64 = new byte[size];\r\n\r\n        for(int count = 0; count &lt; size; count++) {\r\n            encodeBase64 = Base64.encodeBase64(postsMain.get(count).getImage());\r\n            String base64Encoded = base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\r\n            postsMain.get(count).setMainPageImage(base64Encoded);\r\n        }\r\n\r\n        modelAndView.addObject(&quot;posts_main&quot;, postsMain);\r\n\r\n        return modelAndView;\r\n    }\r\n\r\n\r\nUPDATED: I added another, similar field in my `PostModel` (That also have getters ans setters) This field will not uploaded to DB:\r\n\r\n    private String mainPageImage;  \r\n    \r\nThen I setting received `Base64` code via setter in `for` loop (above) like this:\r\n\r\n    postsMain.get(count).setMainPageImage(base64Encoded);\r\n\r\nAnd finally, We&#39;re got this `HTML` section where displaying the picture and title from single collection:\r\n\r\n    &lt;main&gt;\r\n      &lt;div class=&quot;post-section&quot;&gt;\r\n         &lt;div class=&quot;main-post&quot; th:each=&quot;post : ${posts_main}&quot;&gt;\r\n             &lt;div class=&quot;container&quot;&gt;\r\n                 &lt;img class=&quot;post-image&quot; th:src=&quot;@{&#39;data:image/jpeg;base64,&#39;+${post.mainPageImage}}&quot;/&gt;\r\n                 &lt;a href=&quot;/&quot;&gt;&lt;span th:text=&quot;${post.title}&quot;&gt;&lt;/span&gt;&lt;/a&gt;\r\n             &lt;/div&gt;\r\n         &lt;/div&gt;\r\n       &lt;/div&gt;\r\n    &lt;/main&gt;\r\n\r\n \r\n  ","title":"How to display multiple base64 encoded images in Spring MVC","body":"<p>This problem was solved.</p>\n<pre><code>@GetMapping(&quot;/&quot;)\npublic ModelAndView home ( Model model) throws UnsupportedEncodingException {\n    ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\n    List&lt;PostModel&gt; postsMain = (List&lt;PostModel&gt;) postRepository.findAll();\n\n    int size = Iterables.size(postsMain); //Receiving size of Iterator\n    byte[] encodeBase64 = new byte[size];\n\n    for(int count = 0; count &lt; size; count++) {\n        encodeBase64 = Base64.encodeBase64(postsMain.get(count).getImage());\n        String base64Encoded = base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\n        postsMain.get(count).setMainPageImage(base64Encoded);\n    }\n\n    modelAndView.addObject(&quot;posts_main&quot;, postsMain);\n\n    return modelAndView;\n}\n</code></pre>\n<p>UPDATED: I added another, similar field in my <code>PostModel</code> (That also have getters ans setters) This field will not uploaded to DB:</p>\n<pre><code>private String mainPageImage;  \n</code></pre>\n<p>Then I setting received <code>Base64</code> code via setter in <code>for</code> loop (above) like this:</p>\n<pre><code>postsMain.get(count).setMainPageImage(base64Encoded);\n</code></pre>\n<p>And finally, We're got this <code>HTML</code> section where displaying the picture and title from single collection:</p>\n<pre><code>&lt;main&gt;\n  &lt;div class=&quot;post-section&quot;&gt;\n     &lt;div class=&quot;main-post&quot; th:each=&quot;post : ${posts_main}&quot;&gt;\n         &lt;div class=&quot;container&quot;&gt;\n             &lt;img class=&quot;post-image&quot; th:src=&quot;@{'data:image/jpeg;base64,'+${post.mainPageImage}}&quot;/&gt;\n             &lt;a href=&quot;/&quot;&gt;&lt;span th:text=&quot;${post.title}&quot;&gt;&lt;/span&gt;&lt;/a&gt;\n         &lt;/div&gt;\n     &lt;/div&gt;\n   &lt;/div&gt;\n&lt;/main&gt;\n</code></pre>\n"}],"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69993538,"answer_count":1,"score":0,"last_activity_date":1637094643,"creation_date":1636980992,"question_id":69974740,"body_markdown":"I have a question... I can to display titles of all posts that received from database via `Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();` (it also contains blob-images). But I can&#39;t understand correctly: For displaying of single image I getting byte code from DB and encoding it in base64 code, How do this with multiple images and display them like titles?\r\n\r\nI displaying single image like this:\r\n\r\n        Optional&lt;PostModel&gt; post = postRepository.findById(id);\r\n        byte[] encodeBase64 = Base64.encodeBase64(post.get().getImage());\r\n        String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\r\n        modelAndView.addObject(&quot;contentImage&quot;, base64Encoded );\r\n\r\nHTML-source: `&lt;img class=&quot;post-image&quot; th:src=&quot;@{&#39;data:image/jpeg;base64,&#39;+${contentImage}}&quot;&gt;`\r\n\r\nI tryed to create `List` where I adding an base64 encoded string values.\r\n\r\nMy controller:\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public ModelAndView home ( Model model) throws UnsupportedEncodingException {\r\n        ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\r\n        Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();\r\n\r\n        List&lt;String&gt; contentImages = new ArrayList&lt;&gt;();\r\n\r\n        int size = Iterables.size(postsMain);\r\n\r\n        for(int count = 0; count &lt;= size; count++) {\r\n\r\n            byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());\r\n            String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\r\n            contentImages.add(base64Encoded);\r\n        }\r\n\r\n        modelAndView.addObject(&quot;contentImages&quot;, contentImages);\r\n        modelAndView.addObject(&quot;posts_main&quot;, postsMain);\r\n\r\n        return modelAndView;\r\n    }\r\n\r\n  \r\n\r\nGood wishes.\r\n\r\n","title":"How to display multiple base64 encoded images in Spring MVC","body":"<p>I have a question... I can to display titles of all posts that received from database via <code>Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();</code> (it also contains blob-images). But I can't understand correctly: For displaying of single image I getting byte code from DB and encoding it in base64 code, How do this with multiple images and display them like titles?</p>\n<p>I displaying single image like this:</p>\n<pre><code>    Optional&lt;PostModel&gt; post = postRepository.findById(id);\n    byte[] encodeBase64 = Base64.encodeBase64(post.get().getImage());\n    String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\n    modelAndView.addObject(&quot;contentImage&quot;, base64Encoded );\n</code></pre>\n<p>HTML-source: <code>&lt;img class=&quot;post-image&quot; th:src=&quot;@{'data:image/jpeg;base64,'+${contentImage}}&quot;&gt;</code></p>\n<p>I tryed to create <code>List</code> where I adding an base64 encoded string values.</p>\n<p>My controller:</p>\n<pre><code>@GetMapping(&quot;/&quot;)\npublic ModelAndView home ( Model model) throws UnsupportedEncodingException {\n    ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\n    Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();\n\n    List&lt;String&gt; contentImages = new ArrayList&lt;&gt;();\n\n    int size = Iterables.size(postsMain);\n\n    for(int count = 0; count &lt;= size; count++) {\n\n        byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());\n        String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\n        contentImages.add(base64Encoded);\n    }\n\n    modelAndView.addObject(&quot;contentImages&quot;, contentImages);\n    modelAndView.addObject(&quot;posts_main&quot;, postsMain);\n\n    return modelAndView;\n}\n</code></pre>\n<p>Good wishes.</p>\n"},{"tags":["java","multithreading","exception"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1637063634,"post_id":69988662,"comment_id":123720138,"body_markdown":"Why post poorly formatted code? It&#39;s hard enough to understand someone else&#39;s code, why make it harder than it has to be?","body":"Why post poorly formatted code? It&#39;s hard enough to understand someone else&#39;s code, why make it harder than it has to be?"},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1637063701,"post_id":69988662,"comment_id":123720164,"body_markdown":"Also, `suspend()` is deprecated -- so you should not be calling this method (or extending Thread, for that matter).","body":"Also, <code>suspend()</code> is deprecated -- so you should not be calling this method (or extending Thread, for that matter)."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1637063712,"post_id":69988662,"comment_id":123720171,"body_markdown":"Same goes for that wall of text in the beginning. You want other humans to spend their time to help you, so please make that as easy as possible: by writing up content that is EASY to digest.","body":"Same goes for that wall of text in the beginning. You want other humans to spend their time to help you, so please make that as easy as possible: by writing up content that is EASY to digest."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1637063740,"post_id":69988662,"comment_id":123720183,"body_markdown":"And then: empty catch blocks is a really bad practice. Never do that, at least PRINT the exception. otherwise, you are just suppressing errors.","body":"And then: empty catch blocks is a really bad practice. Never do that, at least PRINT the exception. otherwise, you are just suppressing errors."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1637063950,"post_id":69988662,"comment_id":123720273,"body_markdown":"I have put in the effort to format your code. In the future, please put in this effort yourself. Again, no sense in making your code and question harder to understand than it has to be, no?","body":"I have put in the effort to format your code. In the future, please put in this effort yourself. Again, no sense in making your code and question harder to understand than it has to be, no?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1637066644,"post_id":69988662,"comment_id":123721298,"body_markdown":"**Do not** call [suspend](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#suspend()) or [resume](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#resume()) under any circumstances.  They don’t work properly.  Read the links to understand why.  In general, it is essential for Java programmers to get in the habit of reading the documentation of the methods they use.  Cooperation between threads is normally done with synchronization or with the classes in java.util.concurrent.","body":"<b>Do not</b> call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#suspend()\" rel=\"nofollow noreferrer\">suspend</a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#resume()\" rel=\"nofollow noreferrer\">resume</a> under any circumstances.  They don’t work properly.  Read the links to understand why.  In general, it is essential for Java programmers to get in the habit of reading the documentation of the methods they use.  Cooperation between threads is normally done with synchronization or with the classes in java.util.concurrent."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1637094741,"post_id":69988662,"comment_id":123733288,"body_markdown":"I have to wonder whether you understood the exercise. Usually, when anybody asks here about threads printing odd and even numbers, they want the numbers printed in ascending order, but they want the two threads to _take turns_ printing them. (i.e., the &quot;odd&quot; thread prints &quot;1&quot;, then the &quot;even&quot; thread prints &quot;2&quot;, then the &quot;odd&quot; thread prints &quot;3&quot;, and so on.)","body":"I have to wonder whether you understood the exercise. Usually, when anybody asks here about threads printing odd and even numbers, they want the numbers printed in ascending order, but they want the two threads to <i>take turns</i> printing them. (i.e., the &quot;odd&quot; thread prints &quot;1&quot;, then the &quot;even&quot; thread prints &quot;2&quot;, then the &quot;odd&quot; thread prints &quot;3&quot;, and so on.)"}],"answers":[{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1637086249,"creation_date":1637085902,"answer_id":69994060,"question_id":69988662,"body_markdown":"&gt; After this the program isn&#39;t exiting, I have to exit the program manually (ctrl+c) in the terminal.\r\n\r\nAside from the fact that you should not be using `suspend()` and `resume()`, I believe your problem is a classic race condition.  The main thread is calling `t2.start()` and then `t2.resume()` but the thread is not suspended yet.  The main thread throws an exception and then the `t2` thread finishes its printing and calls `suspend()`.  There is no one left to resume it so the thread never finishes and you have to control-c your program.\r\n\r\nYou should make a couple of change to your example code.  First off use wait/notify instead of `suspend()`.  For example, have the `Hello` thread do:\r\n\r\n\t// t2 thread shouldn&#39;t use suspend which is deprecated for good reason\r\n\tsynchronized (this) {\r\n\t\twait();\r\n\t}\r\n\r\nThen in the main thread you need to loop until the thread is in a wait state before notify-ing it.   Something like:\r\n\r\n\twhile (true) {\r\n\t\tif (t2.getState() == State.WAITING) {\r\n\t\t\tsynchronized (t2) {\r\n\t\t\t\tt2.notify();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tThread.sleep(100);\r\n\t}\r\n\r\nThese sorts of thread exercises where one thread is locked stepped with another (aside from a `join()` at the end) are a bad example of threading IMO.\r\n\r\nCouple other comments.  You should `join()` with the `Hello` thread at the end of your code, never catch `Exception` if you can help it since it hides exceptions that may be the source of problems (at least print them as @GhostCat recommended), and also always re-interrupt your threads when you catch `InterruptedException`:\r\n\r\n\ttry {\r\n\t\tt2.join();\r\n\t} catch (InterruptedException e) {\r\n\t\t// always a good pattern\r\n\t\tThread.currentThread().interrupt();\r\n\t\te.printStackTrace();\r\n\t}\r\n","title":"Problems suspending and resuming a thread","body":"<blockquote>\n<p>After this the program isn't exiting, I have to exit the program manually (ctrl+c) in the terminal.</p>\n</blockquote>\n<p>Aside from the fact that you should not be using <code>suspend()</code> and <code>resume()</code>, I believe your problem is a classic race condition.  The main thread is calling <code>t2.start()</code> and then <code>t2.resume()</code> but the thread is not suspended yet.  The main thread throws an exception and then the <code>t2</code> thread finishes its printing and calls <code>suspend()</code>.  There is no one left to resume it so the thread never finishes and you have to control-c your program.</p>\n<p>You should make a couple of change to your example code.  First off use wait/notify instead of <code>suspend()</code>.  For example, have the <code>Hello</code> thread do:</p>\n<pre><code>// t2 thread shouldn't use suspend which is deprecated for good reason\nsynchronized (this) {\n    wait();\n}\n</code></pre>\n<p>Then in the main thread you need to loop until the thread is in a wait state before notify-ing it.   Something like:</p>\n<pre><code>while (true) {\n    if (t2.getState() == State.WAITING) {\n        synchronized (t2) {\n            t2.notify();\n        }\n        break;\n    }\n    Thread.sleep(100);\n}\n</code></pre>\n<p>These sorts of thread exercises where one thread is locked stepped with another (aside from a <code>join()</code> at the end) are a bad example of threading IMO.</p>\n<p>Couple other comments.  You should <code>join()</code> with the <code>Hello</code> thread at the end of your code, never catch <code>Exception</code> if you can help it since it hides exceptions that may be the source of problems (at least print them as @GhostCat recommended), and also always re-interrupt your threads when you catch <code>InterruptedException</code>:</p>\n<pre><code>try {\n    t2.join();\n} catch (InterruptedException e) {\n    // always a good pattern\n    Thread.currentThread().interrupt();\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637094349,"creation_date":1637092044,"answer_id":69995232,"question_id":69988662,"body_markdown":"&gt; when i call `t2.resume()` that doesn&#39;t continue printing 13 to 21. Why it isn&#39;t printing the rest?\r\n\r\n[@Gray answered that one](https://stackoverflow.com/a/69994060/801894). TLDR: Your main thread calls `t2.resume()` _before_ your `t2` thread calls `suspend()`.\r\n\r\nI am curious to know what Java version you are using. I&#39;m running JDK11 on macOS, and I can&#39;t get your program to throw that `java.lang.IllegalThreadStateException`, but I&#39;m _guessing_ that in whatever JDK and OS you are using, the exception is thrown when your main thread tries to `resume()` a thread that isn&#39;t suspended.\r\n\r\n---------------------\r\n\r\n&gt; how can I make it resume?\r\n\r\nI would use a [`Semaphore`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Semaphore.html).\r\n\r\nLet the `t2` thread wait to `acquire()` a &quot;permit&quot; from a semaphore, and let the main thread `release()` a permit _to_ the semaphore at the appropriate time.\r\n\r\nI changed your program by replacing the `suspend()` call with `sem.acquire()`, and by replacing the `resume()` call with `sem.release()`. I also threw a call to `Thread.sleep()` into the main thread before it releases the semaphore so that you can see the pause.  Here&#39;s the whole thing:\r\n\r\n``` lang-java\r\nimport java.util.concurrent.Semaphore;\r\n\r\nclass Hi extends Thread {   // This class is exactly the same as yours.\r\n    public void run(){\r\n        try{\r\n            for(int i=0; i&lt;=10; i++){\r\n                System.out.println(&quot;1st: &quot; + (2*i));\r\n                sleep(100);\r\n            }\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\nclass Hello extends Thread {\r\n\r\n    private Semaphore sem;          // new member variable\r\n\r\n    public Hello(Semaphore sem) {   // new constructor to set the new member.\r\n        this.sem = sem;\r\n    }\r\n    \r\n    public void run(){\r\n        try {\r\n            for(int i=0; i&lt;=5; i++){\r\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\r\n            }\r\n\r\n            // Wait to &quot;acquire&quot; a permit from the semaphore. This won&#39;t\r\n            //  return until the main thread &quot;releases&quot; a permit _to_ the\r\n            //  semaphore.\r\n            sem.acquire();\r\n\r\n            System.out.println(&quot; Resumes again&quot;);\r\n            for(int i=6; i&lt;=10; i++){\r\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\r\n            }\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }     \r\n    }\r\n}\r\n\r\npublic class Wonk {\r\n\r\n    public static void main(String args[]){\r\n\r\n        // Create a semaphore that initially has 0 &quot;permits.&quot;\r\n        Semaphore s = new Semaphore(0);\r\n\r\n        Hi t1 = new Hi();\r\n        Hello t2 = new Hello(s);\r\n        t1.start();\r\n        try {\r\n            t1.join();\r\n        } catch (Exception e) {\r\n        }\r\n\r\n        t2.start();\r\n        waitabit(5000);  // Sleep 5 seconds, and then...\r\n        s.release();     // ...Release the Hounds!!\r\n    }\r\n\r\n    private static void waitabit(int numMilliseconds) {\r\n        try {\r\n            Thread.sleep(numMilliseconds);\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Problems suspending and resuming a thread","body":"<blockquote>\n<p>when i call <code>t2.resume()</code> that doesn't continue printing 13 to 21. Why it isn't printing the rest?</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/a/69994060/801894\">@Gray answered that one</a>. TLDR: Your main thread calls <code>t2.resume()</code> <em>before</em> your <code>t2</code> thread calls <code>suspend()</code>.</p>\n<p>I am curious to know what Java version you are using. I'm running JDK11 on macOS, and I can't get your program to throw that <code>java.lang.IllegalThreadStateException</code>, but I'm <em>guessing</em> that in whatever JDK and OS you are using, the exception is thrown when your main thread tries to <code>resume()</code> a thread that isn't suspended.</p>\n<hr />\n<blockquote>\n<p>how can I make it resume?</p>\n</blockquote>\n<p>I would use a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a>.</p>\n<p>Let the <code>t2</code> thread wait to <code>acquire()</code> a &quot;permit&quot; from a semaphore, and let the main thread <code>release()</code> a permit <em>to</em> the semaphore at the appropriate time.</p>\n<p>I changed your program by replacing the <code>suspend()</code> call with <code>sem.acquire()</code>, and by replacing the <code>resume()</code> call with <code>sem.release()</code>. I also threw a call to <code>Thread.sleep()</code> into the main thread before it releases the semaphore so that you can see the pause.  Here's the whole thing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.Semaphore;\n\nclass Hi extends Thread {   // This class is exactly the same as yours.\n    public void run(){\n        try{\n            for(int i=0; i&lt;=10; i++){\n                System.out.println(&quot;1st: &quot; + (2*i));\n                sleep(100);\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\nclass Hello extends Thread {\n\n    private Semaphore sem;          // new member variable\n\n    public Hello(Semaphore sem) {   // new constructor to set the new member.\n        this.sem = sem;\n    }\n    \n    public void run(){\n        try {\n            for(int i=0; i&lt;=5; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n\n            // Wait to &quot;acquire&quot; a permit from the semaphore. This won't\n            //  return until the main thread &quot;releases&quot; a permit _to_ the\n            //  semaphore.\n            sem.acquire();\n\n            System.out.println(&quot; Resumes again&quot;);\n            for(int i=6; i&lt;=10; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }     \n    }\n}\n\npublic class Wonk {\n\n    public static void main(String args[]){\n\n        // Create a semaphore that initially has 0 &quot;permits.&quot;\n        Semaphore s = new Semaphore(0);\n\n        Hi t1 = new Hi();\n        Hello t2 = new Hello(s);\n        t1.start();\n        try {\n            t1.join();\n        } catch (Exception e) {\n        }\n\n        t2.start();\n        waitabit(5000);  // Sleep 5 seconds, and then...\n        s.release();     // ...Release the Hounds!!\n    }\n\n    private static void waitabit(int numMilliseconds) {\n        try {\n            Thread.sleep(numMilliseconds);\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23353754,"reputation":11,"user_id":17427008,"display_name":"Gairik Sajjan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":350,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1637094349,"creation_date":1637063525,"question_id":69988662,"body_markdown":"I am new to java programming and trying threading for the first time. I have created a thread to print the even numbers, and then a thread to print odd numbers. In the odd number thread there is a suspend() method after the number 11 to be printed. And after that there is another block to print odd numbers from 13 to 21. In main() I joined the 2 threads. In main function first I called thread t1(even number) and then joined it with thread t2(odd number). As there is suspend it will suspend the output after printing 11 it pauses there. But after that when i call t2.resume() that doesn&#39;t continue printing 13 to 21. Why it isn&#39;t printing the rest? and how can I make it resume?\r\n\r\nHere&#39;s the code, please take a look:\r\n\r\n\tclass Hi extends Thread {\r\n\t\t\r\n\t\tpublic void run(){\r\n\t\t\ttry{\r\n\t\t\t\tfor(int i=0; i&lt;=10; i++){\r\n\t\t\t\t\tSystem.out.println(&quot;1st: &quot; + (2*i));\r\n\t\t\t\t\tsleep(100);\r\n\t\t\t\t}\r\n\t\t\t} catch(Exception e){\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n&lt;!-- --&gt;\t\r\n\r\n\tclass Hello extends Thread {\r\n\t\t\r\n\t\tpublic void run(){\r\n\t\t\ttry {\r\n\t\t\t\tfor(int i=0; i&lt;=5; i++){\r\n\t\t\t\t\tSystem.out.println(&quot;2nd: &quot; +(2*i+1));\r\n\t\t\t\t}\r\n\t\t\t\tsuspend();\r\n\t\t\t\tSystem.out.println(&quot; Resumes again&quot;);\r\n\t\t\t\tfor(int i=6; i&lt;=10; i++){\r\n\t\t\t\t\tSystem.out.println(&quot;2nd: &quot; +(2*i+1));\r\n\t\t\t\t}\r\n\t\t\t} catch(Exception e){\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t}     \r\n\t\t}\r\n\t}\r\n\r\n&lt;!-- --&gt;\t\r\n\r\n\tpublic class thread {\r\n\r\n\t\tpublic static void main(String args[]){\r\n\t\t\tHi t1 = new Hi();\r\n\t\t\tHello t2 = new Hello();\r\n\t\t\tt1.start();\r\n\t\t\ttry {\r\n\t\t\t\tt1.join();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t}\r\n\t\t\tt2.start();\r\n\t\t\tt2.resume();\r\n\t\t}\r\n\t}\t\r\n\r\n  OUTPUT:\r\n\r\n```\r\n1st: 0\r\n1st: 2\r\n1st: 4\r\n1st: 6\r\n1st: 8\r\n1st: 10\r\n1st: 12\r\n1st: 14\r\n1st: 16\r\n1st: 18\r\n1st: 20\r\nException in thread &quot;main&quot; 2nd: 1\r\njava.lang.IllegalThreadStateException\r\n2nd: 3\r\n2nd: 5\r\n2nd: 7\r\n2nd: 9\r\n2nd: 11\r\n\tat java.base/java.lang.Thread.start(Thread.java:791)\r\n\tat thread.main(thread.java:57)\r\n```\r\n\r\nAfter this the program isn&#39;t exiting, I have to exit the program manually (ctrl+c) in the terminal.","title":"Problems suspending and resuming a thread","body":"<p>I am new to java programming and trying threading for the first time. I have created a thread to print the even numbers, and then a thread to print odd numbers. In the odd number thread there is a suspend() method after the number 11 to be printed. And after that there is another block to print odd numbers from 13 to 21. In main() I joined the 2 threads. In main function first I called thread t1(even number) and then joined it with thread t2(odd number). As there is suspend it will suspend the output after printing 11 it pauses there. But after that when i call t2.resume() that doesn't continue printing 13 to 21. Why it isn't printing the rest? and how can I make it resume?</p>\n<p>Here's the code, please take a look:</p>\n<pre><code>class Hi extends Thread {\n    \n    public void run(){\n        try{\n            for(int i=0; i&lt;=10; i++){\n                System.out.println(&quot;1st: &quot; + (2*i));\n                sleep(100);\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n    \n<pre><code>class Hello extends Thread {\n    \n    public void run(){\n        try {\n            for(int i=0; i&lt;=5; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n            suspend();\n            System.out.println(&quot; Resumes again&quot;);\n            for(int i=6; i&lt;=10; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }     \n    }\n}\n</code></pre>\n    \n<pre><code>public class thread {\n\n    public static void main(String args[]){\n        Hi t1 = new Hi();\n        Hello t2 = new Hello();\n        t1.start();\n        try {\n            t1.join();\n        } catch (Exception e) {\n        }\n        t2.start();\n        t2.resume();\n    }\n}   \n</code></pre>\n<p>OUTPUT:</p>\n<pre><code>1st: 0\n1st: 2\n1st: 4\n1st: 6\n1st: 8\n1st: 10\n1st: 12\n1st: 14\n1st: 16\n1st: 18\n1st: 20\nException in thread &quot;main&quot; 2nd: 1\njava.lang.IllegalThreadStateException\n2nd: 3\n2nd: 5\n2nd: 7\n2nd: 9\n2nd: 11\n    at java.base/java.lang.Thread.start(Thread.java:791)\n    at thread.main(thread.java:57)\n</code></pre>\n<p>After this the program isn't exiting, I have to exit the program manually (ctrl+c) in the terminal.</p>\n"},{"tags":["java","raspberry-pi","classpath","pi4j"],"answers":[{"tags":[],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637094111,"creation_date":1637094111,"answer_id":69995598,"question_id":69985205,"body_markdown":"I managed to fix it.\r\n\r\nThe issue with the Pi Zero W is that the default version of Java JDK that is commonly used was giving an unsupported ARM error. So I installed the Zulu version as per the instruction&#39;s here :\r\n\r\nhttps://webtechie.be/post/2020-08-27-azul-zulu-java-11-and-gluon-javafx-11-on-armv6-raspberry-pi/\r\n\r\nWhen doing remote execution from my desktop IDE the rasperberry.properties file has a value that points to default-java folder under /usr/lib/jvm/default-java but the zulu version of Java JDK I installed doesn&#39;t create this folder.\r\n\r\nThe fix for me was to change the following line in `rasperberry.properties` :\r\n\r\n    #target.remote.jre=/usr/lib/jvm/default-javam #COMMENT OUT THIS LINE\r\n    target.remote.jre=/usr/lib/jvm/zulu11.41.75-ca-jdk11.0.8-linux_aarch32hf #PUT YOUR JAVA PATH HERE\r\n\r\n","title":"Pi4J Classpath Error - Intellij running remotely on Pi Zero W","body":"<p>I managed to fix it.</p>\n<p>The issue with the Pi Zero W is that the default version of Java JDK that is commonly used was giving an unsupported ARM error. So I installed the Zulu version as per the instruction's here :</p>\n<p><a href=\"https://webtechie.be/post/2020-08-27-azul-zulu-java-11-and-gluon-javafx-11-on-armv6-raspberry-pi/\" rel=\"nofollow noreferrer\">https://webtechie.be/post/2020-08-27-azul-zulu-java-11-and-gluon-javafx-11-on-armv6-raspberry-pi/</a></p>\n<p>When doing remote execution from my desktop IDE the rasperberry.properties file has a value that points to default-java folder under /usr/lib/jvm/default-java but the zulu version of Java JDK I installed doesn't create this folder.</p>\n<p>The fix for me was to change the following line in <code>rasperberry.properties</code> :</p>\n<pre><code>#target.remote.jre=/usr/lib/jvm/default-javam #COMMENT OUT THIS LINE\ntarget.remote.jre=/usr/lib/jvm/zulu11.41.75-ca-jdk11.0.8-linux_aarch32hf #PUT YOUR JAVA PATH HERE\n</code></pre>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637094111,"creation_date":1637047449,"question_id":69985205,"body_markdown":"**PROBLEM SUMMARY**\r\n\r\nI am getting a class path error when I try to code on my desktop and deploy it remotely to my Pi Zero W.\r\n\r\n**BACKGROUND**\r\n\r\nThe [Pi4J][1] v2.0[enter link description here][2] library provides a Maven Archetype to help with Development and instructions for developing on a remote PC. \r\n\r\n**ENVIROMENT**\r\n\r\n    IDE: Intellij Ultimate \r\n    Development PC is Windows 10\r\n    Java 11.0.2\r\n    Maven 3.8.3\r\n\r\n    Rasp Pi Zero W\r\n    Open jdk java 11.0.8\r\n    Maven 3.8.3\r\n\r\n**STEPS TAKEN SO FAR**\r\n\r\nOn development PC I have installed the Archetype per:\r\n\r\n    INSTALL ARCHETYPE\r\n    cd pi4j-maven-archetype-master\r\n    mvn install\r\n    ...\r\n    BUILD SUCCESS\r\n\r\n    CREATE PROJECT\r\n    mkdir pitest2\r\n    mvn archetype:generate -DarchetypeCatalog=local\r\n    ....\r\n    answer questions per instructions\r\n    BUILD SUCCESS\r\n\r\nThen I open the project in Intellij and refresh it with maven and edit the raspberry.properties to my pi IP address and login.\r\n\r\nWhen building and deploying the sample code included with Archetype the instructions state:\r\n\r\n    The project declares in the pom.xml the following maven/ant goals that you can execute with the command shown :\r\n\r\n    mvn clean : delete all compiled files from local and remote project\r\n    mvn install : builds the project, uploads the required jars to the remote target RPI board\r\n    mvn antrun:run@exec : runs the program on the remote target\r\n    mvn antrun:run@debug : runs a remote debugging session on the target RPI.\r\n\r\nThe command `mvn install` works and a file is copied to Pi.\r\n\r\nWhen I attempt the `mvn antrun:run@exec` command results in:\r\n\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  16.818 s\r\n    [INFO] Finished at: 2021-11-16T20:15:56+13:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:3.0.0:run (exec) on project pitest2: An Ant BuildException has occured: The following error occurred while executing this line:\r\n    [ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:166: The following error occurred while executing this line:\r\n    [ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:123: Remote command failed with exit status 1\r\n    [ERROR] around Ant part ...&lt;ant antfile=&quot;antrun/build.xml&quot; target=&quot;run-remote&quot; /&gt;... @ 9:59 in C:\\Users\\RM\\IdeaProjects\\pitest2\\target\\antrun\\build-main.xml\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n**OTHER STEPS TAKEN**\r\n\r\nThe output from the deploy shows that the pitest.jar is copied to the Pi with its dependencies.\r\n\r\n    pi@raspberrypi: ls\r\n    pi4j-core.jar\r\n    pi4j-library-pigpio.jar\r\n    pi4j-plugin-pigpio.jar\r\n    pi4j-plugin-raspberrypi.jar\r\n    pitest2.jar\r\n    pitest2-jar-with-dependencies.jar\r\n    slf4j-api.jar\r\n    slf4j-simple.jar\r\n\r\n\r\nOther attempts to execute on the pi directly:\r\n\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar\r\n    Error: Could not find or load main class pitest2.jar\r\n    Caused by: java.lang.ClassNotFoundException: pitest2.jar\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar com.geekhelp.Main\r\n    Error: Could not find or load main class pitest2.jar\r\n    Caused by: java.lang.ClassNotFoundException: pitest2.jar\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp ./ pitest2.jar com.geekhelp.Main\r\n    Error: Could not find or load main class pitest2.jar\r\n    Caused by: java.lang.ClassNotFoundException: pitest2.jar\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp pitest2.jar com.geekhelp.Main\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/pi4j/util/Console\r\n            at com.geekhelp.Main.&lt;clinit&gt;(Main.java:24)\r\n    Caused by: java.lang.ClassNotFoundException: com.pi4j.util.Console\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n            ... 1 more\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $\r\n\r\nAnd what appears to be a fat jar under /dist\r\n\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist $ java -cp pitest2.jar com.geekhelp.Main\r\n    21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\r\n    21:01:58 [main] INFO com.pi4j.util.Console - |  Hello Rasbian world !  |\r\n    21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\r\n    21:01:58 [main] INFO com.pi4j.Pi4J - New auto context\r\n    21:01:58 [main] INFO com.pi4j.Pi4J - New context builder\r\n    ...\r\n    ...    \r\n    21:02:02 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - platforms loaded [1]\r\n    21:02:02 [main] DEBUG com.pi4j.runtime.impl.DefaultRuntime - Pi4J context/runtime successfully initialized.&#39;\r\n    21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContext - Pi4J runtime context successfully created &amp; initialized.&#39;\r\n    21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContextBuilder - Pi4J successfully created and initialized a new runtime &#39;Context&#39;.&#39;\r\n    21:02:02 [main] INFO com.pi4j.util.Console - --------------------\r\n    21:02:02 [main] INFO com.pi4j.util.Console - |  Pi4J PLATFORMS  |\r\n    21:02:02 [main] INFO com.pi4j.util.Console - --------------------\r\n    21:02:02 [main] INFO com.pi4j.util.Console -\r\n    PLATFORMS: [1] &quot;Pi4J Runtime Platforms&quot; &lt;com.pi4j.platform.impl.DefaultPlatforms&gt;\r\n    └─PLATFORM: &quot;RaspberryPi Platform&quot; {raspberrypi} &lt;com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform&gt; {Pi4J Platform for the RaspberryPi series of products.}\r\n    21:02:03 [main] INFO com.pi4j.util.Console -\r\n    com.pi4j.provider.exception.ProviderNotFoundException: Pi4J provider [pigpio-digital-output] could not be found.  Please include this &#39;provider&#39; JAR in the classpath.\r\n            at com.pi4j.provider.impl.DefaultRuntimeProviders.get(DefaultRuntimeProviders.java:238)\r\n            at com.pi4j.provider.impl.DefaultProviders.get(DefaultProviders.java:147)\r\n            at com.pi4j.provider.Providers.get(Providers.java:253)\r\n            at com.pi4j.context.Context.create(Context.java:316)\r\n            at com.pi4j.internal.IOCreator.create(IOCreator.java:58)\r\n            at com.pi4j.internal.IOCreator.create(IOCreator.java:96)\r\n            at com.pi4j.internal.IOCreator.create(IOCreator.java:176)\r\n            at com.geekhelp.Main.run(Main.java:63)\r\n            at com.geekhelp.Main.main(Main.java:34)\r\n    21:02:03 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - removed platform from managed platform map [id=raspberrypi; name=RaspberryPi Platform; class=com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform]\r\n\r\n\r\nA associate has downloaded my project from GitHub (which is unchanged from the Archetype) and run it successfully on a Rasp Pi 4 (not Zero W).\r\n\r\nQ: Why is the code not seeing the dependencies? when run?\r\n\r\n  [1]: https://pi4j.com/\r\n  [2]: https://github.com/Pi4J/pi4j-maven-archetype\r\n","title":"Pi4J Classpath Error - Intellij running remotely on Pi Zero W","body":"<p><strong>PROBLEM SUMMARY</strong></p>\n<p>I am getting a class path error when I try to code on my desktop and deploy it remotely to my Pi Zero W.</p>\n<p><strong>BACKGROUND</strong></p>\n<p>The <a href=\"https://pi4j.com/\" rel=\"nofollow noreferrer\">Pi4J</a> v2.0<a href=\"https://github.com/Pi4J/pi4j-maven-archetype\" rel=\"nofollow noreferrer\">enter link description here</a> library provides a Maven Archetype to help with Development and instructions for developing on a remote PC.</p>\n<p><strong>ENVIROMENT</strong></p>\n<pre><code>IDE: Intellij Ultimate \nDevelopment PC is Windows 10\nJava 11.0.2\nMaven 3.8.3\n\nRasp Pi Zero W\nOpen jdk java 11.0.8\nMaven 3.8.3\n</code></pre>\n<p><strong>STEPS TAKEN SO FAR</strong></p>\n<p>On development PC I have installed the Archetype per:</p>\n<pre><code>INSTALL ARCHETYPE\ncd pi4j-maven-archetype-master\nmvn install\n...\nBUILD SUCCESS\n\nCREATE PROJECT\nmkdir pitest2\nmvn archetype:generate -DarchetypeCatalog=local\n....\nanswer questions per instructions\nBUILD SUCCESS\n</code></pre>\n<p>Then I open the project in Intellij and refresh it with maven and edit the raspberry.properties to my pi IP address and login.</p>\n<p>When building and deploying the sample code included with Archetype the instructions state:</p>\n<pre><code>The project declares in the pom.xml the following maven/ant goals that you can execute with the command shown :\n\nmvn clean : delete all compiled files from local and remote project\nmvn install : builds the project, uploads the required jars to the remote target RPI board\nmvn antrun:run@exec : runs the program on the remote target\nmvn antrun:run@debug : runs a remote debugging session on the target RPI.\n</code></pre>\n<p>The command <code>mvn install</code> works and a file is copied to Pi.</p>\n<p>When I attempt the <code>mvn antrun:run@exec</code> command results in:</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  16.818 s\n[INFO] Finished at: 2021-11-16T20:15:56+13:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:3.0.0:run (exec) on project pitest2: An Ant BuildException has occured: The following error occurred while executing this line:\n[ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:166: The following error occurred while executing this line:\n[ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:123: Remote command failed with exit status 1\n[ERROR] around Ant part ...&lt;ant antfile=&quot;antrun/build.xml&quot; target=&quot;run-remote&quot; /&gt;... @ 9:59 in C:\\Users\\RM\\IdeaProjects\\pitest2\\target\\antrun\\build-main.xml\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p><strong>OTHER STEPS TAKEN</strong></p>\n<p>The output from the deploy shows that the pitest.jar is copied to the Pi with its dependencies.</p>\n<pre><code>pi@raspberrypi: ls\npi4j-core.jar\npi4j-library-pigpio.jar\npi4j-plugin-pigpio.jar\npi4j-plugin-raspberrypi.jar\npitest2.jar\npitest2-jar-with-dependencies.jar\nslf4j-api.jar\nslf4j-simple.jar\n</code></pre>\n<p>Other attempts to execute on the pi directly:</p>\n<pre><code>pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar\nError: Could not find or load main class pitest2.jar\nCaused by: java.lang.ClassNotFoundException: pitest2.jar\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar com.geekhelp.Main\nError: Could not find or load main class pitest2.jar\nCaused by: java.lang.ClassNotFoundException: pitest2.jar\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp ./ pitest2.jar com.geekhelp.Main\nError: Could not find or load main class pitest2.jar\nCaused by: java.lang.ClassNotFoundException: pitest2.jar\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp pitest2.jar com.geekhelp.Main\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/pi4j/util/Console\n        at com.geekhelp.Main.&lt;clinit&gt;(Main.java:24)\nCaused by: java.lang.ClassNotFoundException: com.pi4j.util.Console\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n        ... 1 more\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $\n</code></pre>\n<p>And what appears to be a fat jar under /dist</p>\n<pre><code>pi@raspberrypi:~/IdeaProjects/pitest2/dist $ java -cp pitest2.jar com.geekhelp.Main\n21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\n21:01:58 [main] INFO com.pi4j.util.Console - |  Hello Rasbian world !  |\n21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\n21:01:58 [main] INFO com.pi4j.Pi4J - New auto context\n21:01:58 [main] INFO com.pi4j.Pi4J - New context builder\n...\n...    \n21:02:02 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - platforms loaded [1]\n21:02:02 [main] DEBUG com.pi4j.runtime.impl.DefaultRuntime - Pi4J context/runtime successfully initialized.'\n21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContext - Pi4J runtime context successfully created &amp; initialized.'\n21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContextBuilder - Pi4J successfully created and initialized a new runtime 'Context'.'\n21:02:02 [main] INFO com.pi4j.util.Console - --------------------\n21:02:02 [main] INFO com.pi4j.util.Console - |  Pi4J PLATFORMS  |\n21:02:02 [main] INFO com.pi4j.util.Console - --------------------\n21:02:02 [main] INFO com.pi4j.util.Console -\nPLATFORMS: [1] &quot;Pi4J Runtime Platforms&quot; &lt;com.pi4j.platform.impl.DefaultPlatforms&gt;\n└─PLATFORM: &quot;RaspberryPi Platform&quot; {raspberrypi} &lt;com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform&gt; {Pi4J Platform for the RaspberryPi series of products.}\n21:02:03 [main] INFO com.pi4j.util.Console -\ncom.pi4j.provider.exception.ProviderNotFoundException: Pi4J provider [pigpio-digital-output] could not be found.  Please include this 'provider' JAR in the classpath.\n        at com.pi4j.provider.impl.DefaultRuntimeProviders.get(DefaultRuntimeProviders.java:238)\n        at com.pi4j.provider.impl.DefaultProviders.get(DefaultProviders.java:147)\n        at com.pi4j.provider.Providers.get(Providers.java:253)\n        at com.pi4j.context.Context.create(Context.java:316)\n        at com.pi4j.internal.IOCreator.create(IOCreator.java:58)\n        at com.pi4j.internal.IOCreator.create(IOCreator.java:96)\n        at com.pi4j.internal.IOCreator.create(IOCreator.java:176)\n        at com.geekhelp.Main.run(Main.java:63)\n        at com.geekhelp.Main.main(Main.java:34)\n21:02:03 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - removed platform from managed platform map [id=raspberrypi; name=RaspberryPi Platform; class=com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform]\n</code></pre>\n<p>A associate has downloaded my project from GitHub (which is unchanged from the Archetype) and run it successfully on a Rasp Pi 4 (not Zero W).</p>\n<p>Q: Why is the code not seeing the dependencies? when run?</p>\n"},{"tags":["java","mysql","list","loops"],"answers":[{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637094059,"creation_date":1637094059,"answer_id":69995590,"question_id":69983589,"body_markdown":"Generate this IODKU (upsert) query:\r\n\r\n    INSERT INTO tbl\r\n            (key, col2, col3)\r\n        VALUES\r\n            (11, 22, 33),\r\n            (43, 54, 65),\r\n            ...\r\n        ON DUPLICATE KEY UPDATE\r\n            col2 = VALUES(col2),\r\n            col3 = VALUES(col3) ;\r\n\r\nThis requires that the column `key` be `UNIQUE` or `PRIMARY`.  It will try to insert the given rows, but discover that they exist.  Then it will switch to Updating the columns specified.\r\n\r\nMySQL 8.0 needs this syntax instead:\r\n\r\n            col2 = NEW.col2,\r\n","title":"is there anyway to SQL update multiple element in List without using for loops?","body":"<p>Generate this IODKU (upsert) query:</p>\n<pre><code>INSERT INTO tbl\n        (key, col2, col3)\n    VALUES\n        (11, 22, 33),\n        (43, 54, 65),\n        ...\n    ON DUPLICATE KEY UPDATE\n        col2 = VALUES(col2),\n        col3 = VALUES(col3) ;\n</code></pre>\n<p>This requires that the column <code>key</code> be <code>UNIQUE</code> or <code>PRIMARY</code>.  It will try to insert the given rows, but discover that they exist.  Then it will switch to Updating the columns specified.</p>\n<p>MySQL 8.0 needs this syntax instead:</p>\n<pre><code>        col2 = NEW.col2,\n</code></pre>\n"}],"owner":{"account_id":17683082,"reputation":55,"user_id":12836503,"display_name":"Thanh Hiếu Nguyễn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995590,"answer_count":1,"score":0,"last_activity_date":1637094059,"creation_date":1637035110,"question_id":69983589,"body_markdown":"I&#39;m working on my function and it runs well but i want to optimize the method to get better performance, here&#39;s my code:\r\n\r\n    for (Foo foo: duplicateElement) {\r\n            \tString replace = duplicateElement.getName()\r\n\t\t\t\t\t\t.replace( split + name + split, split);\r\n\t\t\t\tduplicateElement.setName(replace);\r\n\t\t\t\tfoo.updateFoo(duplicateElement);\r\n\t\t\t}\r\nThe code above runs, but can i somehow take the ***updateFoo*** SQL call out of the for loops and still make it work? Thanks in advance!","title":"is there anyway to SQL update multiple element in List without using for loops?","body":"<p>I'm working on my function and it runs well but i want to optimize the method to get better performance, here's my code:</p>\n<pre><code>for (Foo foo: duplicateElement) {\n            String replace = duplicateElement.getName()\n                    .replace( split + name + split, split);\n            duplicateElement.setName(replace);\n            foo.updateFoo(duplicateElement);\n        }\n</code></pre>\n<p>The code above runs, but can i somehow take the <em><strong>updateFoo</strong></em> SQL call out of the for loops and still make it work? Thanks in advance!</p>\n"},{"tags":["java","jdbc","lambda","java-8","try-with-resources"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":1,"creation_date":1447466564,"post_id":33703905,"comment_id":55180914,"body_markdown":"Possible duplicate of [How should I use try-with-resources with JDBC?](http://stackoverflow.com/questions/8066501/how-should-i-use-try-with-resources-with-jdbc)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/8066501/how-should-i-use-try-with-resources-with-jdbc\">How should I use try-with-resources with JDBC?</a>"},{"owner":{"account_id":876647,"reputation":1405,"user_id":44605,"accept_rate":75,"display_name":"AlexC"},"score":0,"creation_date":1447467557,"post_id":33703905,"comment_id":55181091,"body_markdown":"I am hoping to find a way to do the init for PreparedStatement using a lambda instead of a class instance, almost like streaming the parameters into the PreparedStatement.","body":"I am hoping to find a way to do the init for PreparedStatement using a lambda instead of a class instance, almost like streaming the parameters into the PreparedStatement."}],"answers":[{"tags":[],"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1447488775,"creation_date":1447488300,"answer_id":33706394,"question_id":33703905,"body_markdown":"First off, your `PreparedStatementSetter` class is awkward:\r\n\r\n - it is a typed class but the type is not used.\r\n - the constructor is explicitly calling an overridable method, [which is a bad practice](https://stackoverflow.com/q/3404301/1743880).\r\n\r\nConsider the following interface instead (inspired from the [Spring interface](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/PreparedStatementSetter.html) of the same name).\r\n\r\n\tpublic interface PreparedStatementSetter {\r\n    \tvoid setValues(PreparedStatement ps) throws SQLException;\r\n    }\r\n\r\nThis interface defines a contract of what a `PreparedStatementSetter` is supposed to do: set values of a `PreparedStatement`, nothing more.\r\n\r\nThen, it would be better to do the creation and initialization of the `PreparedStatement` inside a single method. Consider this addition inside your `DatabaseManager` class:\r\n\r\n    public static PreparedStatement prepareStatement(Connection connection, String sql, PreparedStatementSetter setter) throws SQLException {\r\n        PreparedStatement ps = connection.prepareStatement(sql);\r\n        setter.setValues(ps);\r\n        return ps;\r\n    }\r\n\r\nWith this static method, you can then write:\r\n\r\n    try (\r\n        Connection connection = DatabaseManager.getConnection();\r\n        PreparedStatement stmt = DatabaseManager.prepareStatement(connection, SQL, ps -&gt; ps.setString(1, &quot;foo&quot;));\r\n        ResultSet rs = stmt.executeQuery()\r\n    ) {\r\n        // rest of code\r\n    }\r\n\r\nNotice how the `PreparedStatementSetter` was written here with a lambda expression. That&#39;s one of the advantage of using an interface instead of an abstract class: it actually is a functional interface in this case (because there is a single abstract method) and so can be written as a lambda.","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>First off, your <code>PreparedStatementSetter</code> class is awkward:</p>\n\n<ul>\n<li>it is a typed class but the type is not used.</li>\n<li>the constructor is explicitly calling an overridable method, <a href=\"https://stackoverflow.com/q/3404301/1743880\">which is a bad practice</a>.</li>\n</ul>\n\n<p>Consider the following interface instead (inspired from the <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/PreparedStatementSetter.html\" rel=\"nofollow noreferrer\">Spring interface</a> of the same name).</p>\n\n<pre><code>public interface PreparedStatementSetter {\n    void setValues(PreparedStatement ps) throws SQLException;\n}\n</code></pre>\n\n<p>This interface defines a contract of what a <code>PreparedStatementSetter</code> is supposed to do: set values of a <code>PreparedStatement</code>, nothing more.</p>\n\n<p>Then, it would be better to do the creation and initialization of the <code>PreparedStatement</code> inside a single method. Consider this addition inside your <code>DatabaseManager</code> class:</p>\n\n<pre><code>public static PreparedStatement prepareStatement(Connection connection, String sql, PreparedStatementSetter setter) throws SQLException {\n    PreparedStatement ps = connection.prepareStatement(sql);\n    setter.setValues(ps);\n    return ps;\n}\n</code></pre>\n\n<p>With this static method, you can then write:</p>\n\n<pre><code>try (\n    Connection connection = DatabaseManager.getConnection();\n    PreparedStatement stmt = DatabaseManager.prepareStatement(connection, SQL, ps -&gt; ps.setString(1, \"foo\"));\n    ResultSet rs = stmt.executeQuery()\n) {\n    // rest of code\n}\n</code></pre>\n\n<p>Notice how the <code>PreparedStatementSetter</code> was written here with a lambda expression. That's one of the advantage of using an interface instead of an abstract class: it actually is a functional interface in this case (because there is a single abstract method) and so can be written as a lambda.</p>\n"},{"tags":[],"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1447715056,"creation_date":1447551572,"answer_id":33715469,"question_id":33703905,"body_markdown":"Extending from @Tunaki&#39;s answer, it&#39;s also possible to factor-in the _try-with-resources_ and `rs.executeQuery()` such that the `DatabaseManager` handles all of this for you and only asks for the SQL, a `PreparedStatementSetter` and a `ResultSet` handler.\r\n\r\nThis would avoid repeating this everywhere you make a query. Actual API will depend on your usage however – e.g. will you make several queries with the same connection?\r\n\r\nSupposing you will, I propose the following:\r\n\r\n    public class DatabaseManager implements AutoCloseable {\r\n    \r\n        /* Use local file for database */\r\n        private static final String JDBC_CONNECTION = &quot;jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL&quot;;\r\n    \r\n        static {\r\n            try {\r\n                Class.forName(&quot;org.h2.Driver&quot;);  // Init H2 DB driver\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private final Connection connection;\r\n    \r\n        private DatabaseManager() throws SQLException {\r\n            this.connection = getConnection();\r\n        }\r\n    \r\n        @Override\r\n        public void close() throws SQLException {\r\n            connection.close();\r\n        }\r\n    \r\n        public interface PreparedStatementSetter {\r\n            void setValues(PreparedStatement ps) throws SQLException;\r\n        }\r\n    \r\n        public interface Work {\r\n            void doWork(DatabaseManager manager) throws SQLException;\r\n        }\r\n    \r\n        public interface ResultSetHandler {\r\n            void process(ResultSet resultSet) throws SQLException;\r\n        }\r\n    \r\n        /**\r\n         * @return Database connection\r\n         * @throws SQLException\r\n         */\r\n        private static Connection getConnection() throws SQLException {\r\n            return DriverManager.getConnection(JDBC_CONNECTION, &quot;su&quot;, &quot;&quot;);\r\n        }\r\n    \r\n        private PreparedStatement prepareStatement(String sql, PreparedStatementSetter setter) throws SQLException {\r\n            PreparedStatement ps = connection.prepareStatement(sql);\r\n            setter.setValues(ps);\r\n            return ps;\r\n        }\r\n    \r\n        public static void executeWork(Work work) throws SQLException {\r\n            try (DatabaseManager dm = new DatabaseManager()) {\r\n                work.doWork(dm);\r\n            }\r\n        }\r\n    \r\n        public void executeQuery(String sql, PreparedStatementSetter setter, ResultSetHandler handler) throws SQLException {\r\n            try (PreparedStatement ps = prepareStatement(sql, setter);\r\n                ResultSet rs = ps.executeQuery()) {\r\n                handler.process(rs);\r\n            }\r\n        }\r\n    }\r\n\r\nIt wraps the connection as an instance field of `DatabaseManager`, which will handle the life-cycle of the connection, thanks to its implementation of `AutoCloseable`.\r\n\r\nIt also defines 2 new functional interfaces (additionally to @Tunaki&#39;s `PreparedStatementSetter`) :\r\n\r\n* `Work` defines some work to do with a `DatabaseManager` via the `executeWork` static method\r\n* `ResultSetHandler` defines how the `ResultSet` must be handled when executing a query via the new `executeQuery` instance method.\r\n\r\nIt can be used as follows:\r\n\r\n\t\tfinal String SQL = &quot;select * from NVPAIR where name=?&quot;;\r\n\t\ttry {\r\n\t\t\tDatabaseManager.executeWork(dm -&gt; {\r\n\t\t\t\tdm.executeQuery(SQL, ps -&gt; ps.setString(1, &quot;foo&quot;), rs -&gt; {\r\n\t\t\t\t\twhile (rs.next()) {\r\n\t\t\t\t\t\tSystem.out.println(rs.getString(&quot;name&quot;) + &quot;=&quot; + rs.getString(&quot;value&quot;));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// other queries are possible here\r\n\t\t\t});\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\nAs you see, you don&#39;t have to worry about resource handling any\r\nmore.\r\n\r\nI left `SQLException` handling outside the api since you might want to let it propagate.\r\n\r\n&lt;sub&gt;This solution was inspired by [Design Patterns in the Light of Lambda Expressions by Subramaniam][1].&lt;/sub&gt;\r\n\r\n  [1]: https://youtu.be/e4MT_OguDKg?t=46m16s","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>Extending from @Tunaki's answer, it's also possible to factor-in the <em>try-with-resources</em> and <code>rs.executeQuery()</code> such that the <code>DatabaseManager</code> handles all of this for you and only asks for the SQL, a <code>PreparedStatementSetter</code> and a <code>ResultSet</code> handler.</p>\n\n<p>This would avoid repeating this everywhere you make a query. Actual API will depend on your usage however – e.g. will you make several queries with the same connection?</p>\n\n<p>Supposing you will, I propose the following:</p>\n\n<pre><code>public class DatabaseManager implements AutoCloseable {\n\n    /* Use local file for database */\n    private static final String JDBC_CONNECTION = \"jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL\";\n\n    static {\n        try {\n            Class.forName(\"org.h2.Driver\");  // Init H2 DB driver\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private final Connection connection;\n\n    private DatabaseManager() throws SQLException {\n        this.connection = getConnection();\n    }\n\n    @Override\n    public void close() throws SQLException {\n        connection.close();\n    }\n\n    public interface PreparedStatementSetter {\n        void setValues(PreparedStatement ps) throws SQLException;\n    }\n\n    public interface Work {\n        void doWork(DatabaseManager manager) throws SQLException;\n    }\n\n    public interface ResultSetHandler {\n        void process(ResultSet resultSet) throws SQLException;\n    }\n\n    /**\n     * @return Database connection\n     * @throws SQLException\n     */\n    private static Connection getConnection() throws SQLException {\n        return DriverManager.getConnection(JDBC_CONNECTION, \"su\", \"\");\n    }\n\n    private PreparedStatement prepareStatement(String sql, PreparedStatementSetter setter) throws SQLException {\n        PreparedStatement ps = connection.prepareStatement(sql);\n        setter.setValues(ps);\n        return ps;\n    }\n\n    public static void executeWork(Work work) throws SQLException {\n        try (DatabaseManager dm = new DatabaseManager()) {\n            work.doWork(dm);\n        }\n    }\n\n    public void executeQuery(String sql, PreparedStatementSetter setter, ResultSetHandler handler) throws SQLException {\n        try (PreparedStatement ps = prepareStatement(sql, setter);\n            ResultSet rs = ps.executeQuery()) {\n            handler.process(rs);\n        }\n    }\n}\n</code></pre>\n\n<p>It wraps the connection as an instance field of <code>DatabaseManager</code>, which will handle the life-cycle of the connection, thanks to its implementation of <code>AutoCloseable</code>.</p>\n\n<p>It also defines 2 new functional interfaces (additionally to @Tunaki's <code>PreparedStatementSetter</code>) :</p>\n\n<ul>\n<li><code>Work</code> defines some work to do with a <code>DatabaseManager</code> via the <code>executeWork</code> static method</li>\n<li><code>ResultSetHandler</code> defines how the <code>ResultSet</code> must be handled when executing a query via the new <code>executeQuery</code> instance method.</li>\n</ul>\n\n<p>It can be used as follows:</p>\n\n<pre><code>    final String SQL = \"select * from NVPAIR where name=?\";\n    try {\n        DatabaseManager.executeWork(dm -&gt; {\n            dm.executeQuery(SQL, ps -&gt; ps.setString(1, \"foo\"), rs -&gt; {\n                while (rs.next()) {\n                    System.out.println(rs.getString(\"name\") + \"=\" + rs.getString(\"value\"));\n                }\n            });\n            // other queries are possible here\n        });\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>As you see, you don't have to worry about resource handling any\nmore.</p>\n\n<p>I left <code>SQLException</code> handling outside the api since you might want to let it propagate.</p>\n\n<p><sub>This solution was inspired by <a href=\"https://youtu.be/e4MT_OguDKg?t=46m16s\" rel=\"nofollow\">Design Patterns in the Light of Lambda Expressions by Subramaniam</a>.</sub></p>\n"},{"tags":[],"owner":{"account_id":876647,"reputation":1405,"user_id":44605,"accept_rate":75,"display_name":"AlexC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447864831,"creation_date":1447864831,"answer_id":33785583,"question_id":33703905,"body_markdown":"I found another way of doing this which may be helpful to people:\r\n\r\nPreparedStatementExecutor.java:\r\n\r\n    /**\r\n     * Execute PreparedStatement to generate ResultSet\r\n     */\r\n    public interface PreparedStatementExecutor {\r\n        ResultSet execute(PreparedStatement pstmt) throws SQLException;\r\n    }\r\n\r\n\r\nPreparedStatementSetter.java:\r\n\r\n    /**\r\n     * Lambda interface to help initialize PreparedStatement\r\n     */\r\n    public interface PreparedStatementSetter {\r\n        void prepare(PreparedStatement pstmt) throws SQLException;\r\n    }\r\n\r\n\r\nJdbcTriple.java:\r\n\r\n    /**\r\n     * Contains DB objects that close when done\r\n     */\r\n    public class JdbcTriple implements AutoCloseable {\r\n        Connection connection;\r\n        PreparedStatement preparedStatement;\r\n        ResultSet resultSet;\r\n    \r\n        /**\r\n         * Create Connection/PreparedStatement/ResultSet\r\n         *\r\n         * @param sql String SQL\r\n         * @param setter Setter for PreparedStatement\r\n         * @return JdbcTriple\r\n         * @throws SQLException\r\n         */\r\n        public static JdbcTriple create(String sql, PreparedStatementSetter setter) throws SQLException {\r\n            JdbcTriple triple = new JdbcTriple();\r\n            triple.connection = DatabaseManager.getConnection();\r\n            triple.preparedStatement = DatabaseManager.prepareStatement(triple.connection, sql, setter);\r\n            triple.resultSet = triple.preparedStatement.executeQuery();\r\n            return triple;\r\n        }\r\n    \r\n        public Connection getConnection() {\r\n            return connection;\r\n        }\r\n    \r\n        public PreparedStatement getPreparedStatement() {\r\n            return preparedStatement;\r\n        }\r\n    \r\n        public ResultSet getResultSet() {\r\n            return resultSet;\r\n        }\r\n    \r\n        @Override\r\n        public void close() throws Exception {\r\n            if (resultSet != null)\r\n                resultSet.close();\r\n            if (preparedStatement != null)\r\n                preparedStatement.close();\r\n            if (connection != null)\r\n                connection.close();\r\n        }\r\n    }\r\n\r\n\r\nDatabaseManager.java:\r\n\r\n    /**\r\n     * Initialize script\r\n     * -----\r\n     * CREATE TABLE NVPAIR;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\r\n     * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\r\n     *\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;foo&#39;, &#39;foo-value&#39;);\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;bar&#39;, &#39;bar-value&#39;);\r\n     */\r\n    public class DatabaseManager {\r\n        /* Use local file for database */\r\n        private static final String JDBC_CONNECTION = &quot;jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL&quot;;\r\n    \r\n        static {\r\n            try {\r\n                Class.forName(&quot;org.h2.Driver&quot;);  // Init H2 DB driver\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return Database connection\r\n         * @throws SQLException\r\n         */\r\n        public static Connection getConnection() throws SQLException {\r\n            return DriverManager.getConnection(JDBC_CONNECTION, &quot;su&quot;, &quot;&quot;);\r\n        }\r\n    \r\n        /** Prepare statement */\r\n        public static PreparedStatement prepareStatement(Connection conn, String SQL, PreparedStatementSetter setter) throws SQLException {\r\n            PreparedStatement pstmt = conn.prepareStatement(SQL);\r\n            setter.prepare(pstmt);\r\n            return pstmt;\r\n        }\r\n    \r\n        /** Execute statement */\r\n        public static ResultSet executeStatement(PreparedStatement pstmt, PreparedStatementExecutor executor) throws SQLException {\r\n            return executor.execute(pstmt);\r\n        }\r\n    }\r\n\r\n\r\nMain.java:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            final String SQL = &quot;select * from NVPAIR where name=?&quot;;\r\n            try (\r\n                JdbcTriple triple = JdbcTriple.create(SQL, pstmt -&gt; { pstmt.setString(1, &quot;foo&quot;); })\r\n            ){\r\n                while (triple.getResultSet().next()) {\r\n                    System.out.println(triple.getResultSet().getString(&quot;name&quot;) + &quot;=&quot; + triple.getResultSet().getString(&quot;value&quot;));\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nWhile this doesn&#39;t handle cases where you may need to return an ID from insert or transactions, it does offer a quick way to run a query, set parameters and get a ResultSet, which in my case is bulk of the DB code.\r\n","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>I found another way of doing this which may be helpful to people:</p>\n\n<p>PreparedStatementExecutor.java:</p>\n\n<pre><code>/**\n * Execute PreparedStatement to generate ResultSet\n */\npublic interface PreparedStatementExecutor {\n    ResultSet execute(PreparedStatement pstmt) throws SQLException;\n}\n</code></pre>\n\n<p>PreparedStatementSetter.java:</p>\n\n<pre><code>/**\n * Lambda interface to help initialize PreparedStatement\n */\npublic interface PreparedStatementSetter {\n    void prepare(PreparedStatement pstmt) throws SQLException;\n}\n</code></pre>\n\n<p>JdbcTriple.java:</p>\n\n<pre><code>/**\n * Contains DB objects that close when done\n */\npublic class JdbcTriple implements AutoCloseable {\n    Connection connection;\n    PreparedStatement preparedStatement;\n    ResultSet resultSet;\n\n    /**\n     * Create Connection/PreparedStatement/ResultSet\n     *\n     * @param sql String SQL\n     * @param setter Setter for PreparedStatement\n     * @return JdbcTriple\n     * @throws SQLException\n     */\n    public static JdbcTriple create(String sql, PreparedStatementSetter setter) throws SQLException {\n        JdbcTriple triple = new JdbcTriple();\n        triple.connection = DatabaseManager.getConnection();\n        triple.preparedStatement = DatabaseManager.prepareStatement(triple.connection, sql, setter);\n        triple.resultSet = triple.preparedStatement.executeQuery();\n        return triple;\n    }\n\n    public Connection getConnection() {\n        return connection;\n    }\n\n    public PreparedStatement getPreparedStatement() {\n        return preparedStatement;\n    }\n\n    public ResultSet getResultSet() {\n        return resultSet;\n    }\n\n    @Override\n    public void close() throws Exception {\n        if (resultSet != null)\n            resultSet.close();\n        if (preparedStatement != null)\n            preparedStatement.close();\n        if (connection != null)\n            connection.close();\n    }\n}\n</code></pre>\n\n<p>DatabaseManager.java:</p>\n\n<pre><code>/**\n * Initialize script\n * -----\n * CREATE TABLE NVPAIR;\n * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\n * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\n * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\n *\n * INSERT INTO NVPAIR(name, value) VALUES('foo', 'foo-value');\n * INSERT INTO NVPAIR(name, value) VALUES('bar', 'bar-value');\n */\npublic class DatabaseManager {\n    /* Use local file for database */\n    private static final String JDBC_CONNECTION = \"jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL\";\n\n    static {\n        try {\n            Class.forName(\"org.h2.Driver\");  // Init H2 DB driver\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * @return Database connection\n     * @throws SQLException\n     */\n    public static Connection getConnection() throws SQLException {\n        return DriverManager.getConnection(JDBC_CONNECTION, \"su\", \"\");\n    }\n\n    /** Prepare statement */\n    public static PreparedStatement prepareStatement(Connection conn, String SQL, PreparedStatementSetter setter) throws SQLException {\n        PreparedStatement pstmt = conn.prepareStatement(SQL);\n        setter.prepare(pstmt);\n        return pstmt;\n    }\n\n    /** Execute statement */\n    public static ResultSet executeStatement(PreparedStatement pstmt, PreparedStatementExecutor executor) throws SQLException {\n        return executor.execute(pstmt);\n    }\n}\n</code></pre>\n\n<p>Main.java:</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        final String SQL = \"select * from NVPAIR where name=?\";\n        try (\n            JdbcTriple triple = JdbcTriple.create(SQL, pstmt -&gt; { pstmt.setString(1, \"foo\"); })\n        ){\n            while (triple.getResultSet().next()) {\n                System.out.println(triple.getResultSet().getString(\"name\") + \"=\" + triple.getResultSet().getString(\"value\"));\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>While this doesn't handle cases where you may need to return an ID from insert or transactions, it does offer a quick way to run a query, set parameters and get a ResultSet, which in my case is bulk of the DB code.</p>\n"},{"tags":[],"owner":{"account_id":130294,"reputation":329,"user_id":329456,"display_name":"tisaksen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637093892,"creation_date":1637093892,"answer_id":69995565,"question_id":33703905,"body_markdown":"A much cleaner solution would simply be to nest your try-with-resource calls\r\n    \r\n    try (Connection connection = dataSource.getConnection()) \r\n    {\r\n        try (PreparedStatement stmt = connection.prepareStatement(query)) \r\n        {\r\n            stmt.setString(1, value);\r\n            \r\n            try (ResultSet resultSet = stmt.executeQuery()) {\r\n                // tickle your data here...\r\n            }\r\n        }\r\n    } \r\n    catch (Exception e) {\r\n        log.error(&quot;Oopsie daisy!&quot;, e);\r\n    }","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>A much cleaner solution would simply be to nest your try-with-resource calls</p>\n<pre><code>try (Connection connection = dataSource.getConnection()) \n{\n    try (PreparedStatement stmt = connection.prepareStatement(query)) \n    {\n        stmt.setString(1, value);\n        \n        try (ResultSet resultSet = stmt.executeQuery()) {\n            // tickle your data here...\n        }\n    }\n} \ncatch (Exception e) {\n    log.error(&quot;Oopsie daisy!&quot;, e);\n}\n</code></pre>\n"}],"owner":{"account_id":876647,"reputation":1405,"user_id":44605,"accept_rate":75,"display_name":"AlexC"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5763,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":33706394,"answer_count":4,"score":10,"last_activity_date":1637093892,"creation_date":1447461814,"question_id":33703905,"body_markdown":"Here is the `Main.java`:\r\n\r\n    package foo.sandbox.db;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            final String SQL = &quot;select * from NVPAIR where name=?&quot;;\r\n            try (\r\n                    Connection connection = DatabaseManager.getConnection();\r\n                    PreparedStatement stmt = connection.prepareStatement(SQL);\r\n                    DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt; ignored = new DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt;(stmt) {\r\n                        @Override\r\n                        public void init(PreparedStatement ps) throws SQLException {\r\n                            ps.setString(1, &quot;foo&quot;);\r\n                        }\r\n                    };\r\n                    ResultSet rs = stmt.executeQuery()\r\n            ) {\r\n                while (rs.next()) {\r\n                    System.out.println(rs.getString(&quot;name&quot;) + &quot;=&quot; + rs.getString(&quot;value&quot;));\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nAnd here is `DatabaseManager.java`\r\n\r\n    package foo.sandbox.db;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n    \r\n    /**\r\n     * Initialize script\r\n     * -----\r\n     * CREATE TABLE NVPAIR;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\r\n     * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\r\n     *\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;foo&#39;, &#39;foo-value&#39;);\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;bar&#39;, &#39;bar-value&#39;);\r\n     */\r\n    public class DatabaseManager {\r\n        /**\r\n         * Class to allow PreparedStatement to initialize parmaters inside try-with-resource\r\n         * @param &lt;T&gt; extends Statement\r\n         */\r\n        public static abstract class PreparedStatementSetter&lt;T extends Statement&gt; implements AutoCloseable {\r\n            public PreparedStatementSetter(PreparedStatement pstmt) throws SQLException {\r\n                init(pstmt);\r\n            }\r\n    \r\n            @Override\r\n            public void close() throws Exception {\r\n            }\r\n    \r\n            public abstract void init(PreparedStatement pstmt) throws SQLException;\r\n        }\r\n    \r\n        /* Use local file for database */\r\n        private static final String JDBC_CONNECTION = &quot;jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL&quot;;\r\n    \r\n        static {\r\n            try {\r\n                Class.forName(&quot;org.h2.Driver&quot;);  // Init H2 DB driver\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return Database connection\r\n         * @throws SQLException\r\n         */\r\n        public static Connection getConnection() throws SQLException {\r\n            return DriverManager.getConnection(JDBC_CONNECTION, &quot;su&quot;, &quot;&quot;);\r\n        }\r\n    }\r\n\r\n\r\n*I am using H2 database for simplicity since it&#39;s a file based one that is easy to create and test on.*\r\n\r\n\r\nSo everything works and resources get cleaned up as expected, however I just feel there may be a cleaner way to set the `PreparedStatement` parameters from inside the try-with-resources block (and I don&#39;t want to use nested try/catch blocks as those look &#39;awkward&#39;).  Maybe there already exists a helper class in JDBC that does just this, but I have not been able to find one.\r\n\r\nPreferably with a lambda function to initialize the `PreparedStatement` but it would still require allocating an `AutoCloseable` object so it can be inside the try-with-resources.","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>Here is the <code>Main.java</code>:</p>\n\n<pre><code>package foo.sandbox.db;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class Main {\n    public static void main(String[] args) {\n        final String SQL = \"select * from NVPAIR where name=?\";\n        try (\n                Connection connection = DatabaseManager.getConnection();\n                PreparedStatement stmt = connection.prepareStatement(SQL);\n                DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt; ignored = new DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt;(stmt) {\n                    @Override\n                    public void init(PreparedStatement ps) throws SQLException {\n                        ps.setString(1, \"foo\");\n                    }\n                };\n                ResultSet rs = stmt.executeQuery()\n        ) {\n            while (rs.next()) {\n                System.out.println(rs.getString(\"name\") + \"=\" + rs.getString(\"value\"));\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>And here is <code>DatabaseManager.java</code></p>\n\n<pre><code>package foo.sandbox.db;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\n/**\n * Initialize script\n * -----\n * CREATE TABLE NVPAIR;\n * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\n * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\n * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\n *\n * INSERT INTO NVPAIR(name, value) VALUES('foo', 'foo-value');\n * INSERT INTO NVPAIR(name, value) VALUES('bar', 'bar-value');\n */\npublic class DatabaseManager {\n    /**\n     * Class to allow PreparedStatement to initialize parmaters inside try-with-resource\n     * @param &lt;T&gt; extends Statement\n     */\n    public static abstract class PreparedStatementSetter&lt;T extends Statement&gt; implements AutoCloseable {\n        public PreparedStatementSetter(PreparedStatement pstmt) throws SQLException {\n            init(pstmt);\n        }\n\n        @Override\n        public void close() throws Exception {\n        }\n\n        public abstract void init(PreparedStatement pstmt) throws SQLException;\n    }\n\n    /* Use local file for database */\n    private static final String JDBC_CONNECTION = \"jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL\";\n\n    static {\n        try {\n            Class.forName(\"org.h2.Driver\");  // Init H2 DB driver\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * @return Database connection\n     * @throws SQLException\n     */\n    public static Connection getConnection() throws SQLException {\n        return DriverManager.getConnection(JDBC_CONNECTION, \"su\", \"\");\n    }\n}\n</code></pre>\n\n<p><em>I am using H2 database for simplicity since it's a file based one that is easy to create and test on.</em></p>\n\n<p>So everything works and resources get cleaned up as expected, however I just feel there may be a cleaner way to set the <code>PreparedStatement</code> parameters from inside the try-with-resources block (and I don't want to use nested try/catch blocks as those look 'awkward').  Maybe there already exists a helper class in JDBC that does just this, but I have not been able to find one.</p>\n\n<p>Preferably with a lambda function to initialize the <code>PreparedStatement</code> but it would still require allocating an <code>AutoCloseable</code> object so it can be inside the try-with-resources.</p>\n"},{"tags":["java","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637133462,"post_id":69976129,"comment_id":123741208,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637093735,"creation_date":1637092995,"answer_id":69995412,"question_id":69976129,"body_markdown":"I&#39;m not sure if this has anything to do with Sleuth.\r\nYou can modify your log settings and add what you want. Sleuth modifies the level in the pattern (`logging.pattern.level`) and adds these details there.\r\n\r\nYou can check this answer to see how sleuth does this: https://stackoverflow.com/a/65851232/971735","title":"what should I do to add new tags in sleuth, such as client ip address, I want to add the client ip address in logs, of course, with traceId, spanId","body":"<p>I'm not sure if this has anything to do with Sleuth.\nYou can modify your log settings and add what you want. Sleuth modifies the level in the pattern (<code>logging.pattern.level</code>) and adds these details there.</p>\n<p>You can check this answer to see how sleuth does this: <a href=\"https://stackoverflow.com/a/65851232/971735\">https://stackoverflow.com/a/65851232/971735</a></p>\n"}],"owner":{"account_id":13764036,"reputation":1,"user_id":9933030,"display_name":"chuanguojinbo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637093735,"creation_date":1636987042,"question_id":69976129,"body_markdown":"I am trying to finish a log system, which is to monitor a spring cloud application. The spring-cloud application consists of several microservices, using sleuth for distributed tracing. I have set the pattern of log, and now there are tags like &#39;traceId&#39;, &#39;spanId&#39;, &#39;parentId&#39; in the log. Now , I would like to add a new tag named &#39;client_ip&#39; into the log. How can I make it ? And how to pass the client_ip tag to downstream microservice. Currently, my plan is to get client ip in api-gateway  service.","title":"what should I do to add new tags in sleuth, such as client ip address, I want to add the client ip address in logs, of course, with traceId, spanId","body":"<p>I am trying to finish a log system, which is to monitor a spring cloud application. The spring-cloud application consists of several microservices, using sleuth for distributed tracing. I have set the pattern of log, and now there are tags like 'traceId', 'spanId', 'parentId' in the log. Now , I would like to add a new tag named 'client_ip' into the log. How can I make it ? And how to pass the client_ip tag to downstream microservice. Currently, my plan is to get client ip in api-gateway  service.</p>\n"},{"tags":["java","spring-boot","rabbitmq"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637095113,"post_id":69995532,"comment_id":123733449,"body_markdown":"You could always just use ScheduledThreadPoolExecutor and schedule a task that will publish a message with delay. However, if your application crashes/restarts/stops before that happens, the message will never get into RabbitMQ.","body":"You could always just use ScheduledThreadPoolExecutor and schedule a task that will publish a message with delay. However, if your application crashes/restarts/stops before that happens, the message will never get into RabbitMQ."},{"owner":{"account_id":10104043,"reputation":15,"user_id":7481788,"display_name":"Jacob McCall"},"score":0,"creation_date":1637096410,"post_id":69995532,"comment_id":123733875,"body_markdown":"From what I have read, isn&#39;t that essentially the same as Thread.sleep()? That is something I was told to avoid.","body":"From what I have read, isn&#39;t that essentially the same as Thread.sleep()? That is something I was told to avoid."},{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637097547,"post_id":69995532,"comment_id":123734233,"body_markdown":"It&#39;s not. `Thread.sleep` will suspend current thread. `ScheduledThreadPoolExecutor` is used to execute tasks in future. It won&#39;t block anything.","body":"It&#39;s not. <code>Thread.sleep</code> will suspend current thread. <code>ScheduledThreadPoolExecutor</code> is used to execute tasks in future. It won&#39;t block anything."}],"owner":{"account_id":10104043,"reputation":15,"user_id":7481788,"display_name":"Jacob McCall"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637093708,"creation_date":1637093708,"question_id":69995532,"body_markdown":"I need to delay sending a message to RabbitMQ but am not authorized to use the DelayedMessage plugin and do not want to stop a thread. Any suggestions on how to accomplish this?","title":"Delaying message to RabbitMQ in java w/o DelayedMessage plugin or stopping thread","body":"<p>I need to delay sending a message to RabbitMQ but am not authorized to use the DelayedMessage plugin and do not want to stop a thread. Any suggestions on how to accomplish this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637073993,"post_id":69990871,"comment_id":123724772,"body_markdown":"Let me know if I understood, you just want to shift right an array, right? I think you just need the inner for loop of the method you said it works (but check with array&#39;s size).","body":"Let me know if I understood, you just want to shift right an array, right? I think you just need the inner for loop of the method you said it works (but check with array&#39;s size)."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074076,"post_id":69990871,"comment_id":123724812,"body_markdown":"The bottom method works. All i want to do is take  my coordinate row, and shift the coordinates to the front. But I am wondering if this can also be done with the reversal method.","body":"The bottom method works. All i want to do is take  my coordinate row, and shift the coordinates to the front. But I am wondering if this can also be done with the reversal method."},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637074204,"post_id":69990871,"comment_id":123724879,"body_markdown":"you mean, increasing the counter instead of decreasing? You might be overwriting values that way...","body":"you mean, increasing the counter instead of decreasing? You might be overwriting values that way..."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074289,"post_id":69990871,"comment_id":123724914,"body_markdown":"I am not sure I understand. Sorry! The coordinates in the row have to remain, they simply just need to be shifted front or back depending on the condition","body":"I am not sure I understand. Sorry! The coordinates in the row have to remain, they simply just need to be shifted front or back depending on the condition"},{"owner":{"account_id":10164387,"reputation":4961,"user_id":7506820,"display_name":"Nico Van Belle"},"score":0,"creation_date":1637074401,"post_id":69990871,"comment_id":123724971,"body_markdown":"I don&#39;t understand why 1) numberOfElements is a separate field as I have the impression that it&#39;s always the size of the &#39;newCoordinateArray&#39; array? and 2) why you are using arrays when you can make your life easy and use a collection such as ArrayDeque","body":"I don&#39;t understand why 1) numberOfElements is a separate field as I have the impression that it&#39;s always the size of the &#39;newCoordinateArray&#39; array? and 2) why you are using arrays when you can make your life easy and use a collection such as ArrayDeque"},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074470,"post_id":69990871,"comment_id":123725005,"body_markdown":"I can only use arrays in this unfortunately. The numberOfElements keeps track of how many elements i have in my myCoordinateArray. So Basciaslly, I fill it with coordinates, I then take that row and shift everything to the front or back.","body":"I can only use arrays in this unfortunately. The numberOfElements keeps track of how many elements i have in my myCoordinateArray. So Basciaslly, I fill it with coordinates, I then take that row and shift everything to the front or back."},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637074514,"post_id":69990871,"comment_id":123725022,"body_markdown":"To keep track of the size of the array, you can use the property length of the array itself","body":"To keep track of the size of the array, you can use the property length of the array itself"},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074583,"post_id":69990871,"comment_id":123725050,"body_markdown":"Yes but the array that i create is simply just to store coordinates that I get from my input. Then i need to shift them","body":"Yes but the array that i create is simply just to store coordinates that I get from my input. Then i need to shift them"},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074663,"post_id":69990871,"comment_id":123725084,"body_markdown":"There is something between my two versions of addCoordinateRowFront method that I cant spot that is causing one to work and one to make the program fail","body":"There is something between my two versions of addCoordinateRowFront method that I cant spot that is causing one to work and one to make the program fail"},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637074895,"post_id":69990871,"comment_id":123725197,"body_markdown":"In the method that is &quot;wrong&quot;, you start putting the last element to the first position, and goes on the loop until you reach the middle part of the array, where you start doing useless copies. That method erases part of the array and duplicates the end of it. Try debugging to see the behavior.","body":"In the method that is &quot;wrong&quot;, you start putting the last element to the first position, and goes on the loop until you reach the middle part of the array, where you start doing useless copies. That method erases part of the array and duplicates the end of it. Try debugging to see the behavior."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074961,"post_id":69990871,"comment_id":123725228,"body_markdown":"So my reversal method is incorrect? Any pointers to help solve that? Many thanks!","body":"So my reversal method is incorrect? Any pointers to help solve that? Many thanks!"},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637075044,"post_id":69990871,"comment_id":123725267,"body_markdown":"To shift right, you need to start the loop from the end of the array, and copy the previous element (i-1) to the current one (i).","body":"To shift right, you need to start the loop from the end of the array, and copy the previous element (i-1) to the current one (i)."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637075256,"post_id":69990871,"comment_id":123725366,"body_markdown":"By shift right do you mean shift everything forward? I still get the same problem .","body":"By shift right do you mean shift everything forward? I still get the same problem ."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637082864,"post_id":69990871,"comment_id":123728938,"body_markdown":"still lost. Still trying to figure out why this reversal does not like the program","body":"still lost. Still trying to figure out why this reversal does not like the program"}],"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637093668,"creation_date":1637072633,"question_id":69990871,"body_markdown":"My problem is this: I store coordinates in rows (initialized by an array myCoordinateArray), and the coordinates in these rows either have to be shifted to the back or shifted to the front. \r\n\r\nNow, my program worked before, but I am trying a different method now with regards to shifting my coordinates to the front using a array reversal method. Problem is, I only get half the output I need. So it seems not all my coordinates are being outputted. \r\n\r\nI am working with classes.\r\n\r\n\r\nEDIT*** I have decided to post my full program to help people get an idea on perhaps why with addCoordinateRowFront (Method 1) my program 100% works, but with addCoordinateRowFront (Method 2 - array reversal) my program no longer works. I really have no idea why this is the case and I really cannot find the problem. Hope someone will be able to shed some light. I very much appreciate the help!\r\n\r\n\r\n\r\nHere is my Main Pirate Class\r\n\r\n    package Pirate;\r\n    \r\n    \r\n    import java.io.PrintStream;\r\n    import java.util.Locale;\r\n    import java.util.Scanner;\r\n    \r\n    \r\n    import ui.UIAuxiliaryMethods;\r\n    \r\n    \r\n    \r\n    public class Pirate {\r\n    \r\n    \tCoordinateRow newCoordinateRow;\r\n    \tCoordinate singleCoordinate;\r\n    \tCoordinate newCoordinate;\r\n    \tint singleCoordinateX;\r\n    \tint singleCoordinateY;\r\n    \tPrintStream out;\r\n    \tString position;\r\n    \r\n    \r\n    \r\n    \tPirate() {\r\n    \r\n    \t\tout = new PrintStream(System.out);\r\n    \t\tnewCoordinateRow = new CoordinateRow();\r\n    \t\tposition = &quot;front&quot;;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid separateCoordinateRows(Scanner coordinateDataScanner) {\r\n    \r\n    \t\tString[] coordinateDataStringArray = coordinateDataScanner.nextLine().split(&quot;=&quot;); //Split line of input at = into an array of strings\r\n    \r\n    \t\tfor(int i = 0; i &lt; coordinateDataStringArray.length; i++) {\r\n    \r\n    \t\t\tScanner individualCoordinateRowScanner = new Scanner(coordinateDataStringArray[i]);\r\n    \r\n    \t\t\tplaceCoordinateRow(isolateIndividualCoordinates(individualCoordinateRowScanner));\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tCoordinateRow isolateIndividualCoordinates(Scanner scannerInput) {\r\n    \r\n    \t\tCoordinateRow newCoordinateRow = new CoordinateRow();\r\n    \r\n    \t\tString[] individualCoordinateStringArray = scannerInput.nextLine().split(&quot; &quot;); //further split the array of strings into smaller array of strings at white-spaces.\r\n    \r\n    \t\tfor(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\r\n    \r\n    \t\t\tScanner individualCoordinateScanner = new Scanner(individualCoordinateStringArray[i]);\r\n    \r\n    \t\t\tnewCoordinateRow.addSingleCoordinateToBack(adjustedCoordinates(individualCoordinateScanner)); //add new coordinates back into rows. \r\n    \r\n    \t\t}\r\n    \r\n    \t\treturn newCoordinateRow;\r\n    \t\t\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tCoordinate adjustedCoordinates(Scanner individualCoordinateScanner) {\r\n    \r\n    \t\tString[] individualCoordinateStringArray = individualCoordinateScanner.nextLine().split(&quot;,&quot;); //split array of strings into even smaller array of strings at (,). \r\n    \r\n    \t\tfor(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\r\n    \r\n    \t\t\tsingleCoordinateX = Integer.parseInt(individualCoordinateStringArray[0]);\r\n    \r\n    \t\t\tsingleCoordinateY = Integer.parseInt(individualCoordinateStringArray[1]);\r\n    \r\n    \t\t\tsingleCoordinate = new Coordinate(singleCoordinateX, singleCoordinateY); //convert existing coordinates to new coordinates\r\n    \r\n    \t\t}\r\n    \r\n    \t\treturn singleCoordinate;\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tCoordinateRow placeCoordinateRow(CoordinateRow rowOfCoordinates) { //add rows of new coordinates either to the front or behind.\r\n    \r\n    \t\tif(position.equals(&quot;front&quot;)) {\r\n    \r\n    \t\t\tnewCoordinateRow.addCoordinateRowFront(rowOfCoordinates);\r\n    \r\n    \t\t\tposition = &quot;back&quot;;\r\n    \r\n    \r\n    \t\t} else if(position.equals(&quot;back&quot;)) {\r\n    \r\n    \t\t\tnewCoordinateRow.addCoordinateRowBack(rowOfCoordinates);\r\n    \r\n    \t\t\tposition = &quot;front&quot;; \r\n    \t\t}\r\n    \r\n    \t\treturn newCoordinateRow;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid printCoordinateRows() {\r\n    \r\n    \r\n    \t\tfor(int i = 0; i &lt; newCoordinateRow.numberOfElements; i++) {\r\n    \r\n    \t\t\tout.printf(&quot;%d, %d\\n&quot;, newCoordinateRow.newCoordinateArray[i].coordinateX, newCoordinateRow.newCoordinateArray[i].coordinateY);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tvoid start() {\r\n    \r\n    \t\tScanner newCoordinateInputData = UIAuxiliaryMethods.askUserForInput().getScanner();\r\n    \r\n    \t\tseparateCoordinateRows(newCoordinateInputData);\r\n    \r\n    \t\tprintCoordinateRows();\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tLocale.setDefault(Locale.US);\r\n    \t\tnew Pirate().start();\r\n    \t}\r\n    \r\n    }\r\n\r\nHere is my CoordinateRow class code:\r\n\r\n    public class CoordinateRow {\r\n    \r\n    \tstatic final int MAX_NUMBER_OF_ELEMENTS = 250;\r\n    \t//want to create a new row class, that can store up to max 250 elements, but can store lower than this\r\n    \r\n    \tCoordinate[] newCoordinateArray;\r\n    \tint numberOfElements;\r\n    \t\r\n    \t\r\n    \tCoordinateRow() {\r\n    \r\n    \t\tnewCoordinateArray = new Coordinate[MAX_NUMBER_OF_ELEMENTS];\r\n    \t\tnumberOfElements = 0;\r\n    \t\t\r\n\t\t\r\n\t}\r\n\r\n\r\n\tvoid addCoordinateRowBack(CoordinateRow rowOfCoordinates) {\r\n\r\n\t\tfor(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\r\n\r\n\t\t\tnewCoordinateArray[numberOfElements] = rowOfCoordinates.newCoordinateArray[i];\r\n\r\n\t\t\tnumberOfElements++;\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tvoid addSingleCoordinateToBack(Coordinate singleCoordinate) {\r\n\r\n\t\tnewCoordinateArray[numberOfElements] = singleCoordinate;\r\n\r\n\t\tnumberOfElements++;\r\n\r\n\t} \r\n\t\r\n\t\r\n\t\r\n\tvoid addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\r\n\t\t\r\n\t\tCoordinate[] newArray = new Coordinate[rowOfCoordinates.numberOfElements];\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\r\n\t\t\t\r\n\t\t\tnewArray[i] = rowOfCoordinates.newCoordinateArray[rowOfCoordinates.numberOfElements -i - 1];\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\nThis is my Coordinate Class\r\n\r\n    package Pirate;\r\n    \r\n    public class Coordinate {\r\n    \r\n    \tstatic final int COORDINATE_X_TECTONIC_SHIFT = 1;\r\n    \tstatic final int COORDINATE_Y_TECTONIC_SHIFT = 0;\r\n    \r\n    \tint coordinateX;\r\n    \tint coordinateY;\r\n    \r\n    \tCoordinate(int coordinateX, int coordinateY) {\r\n    \r\n    \t\tthis.coordinateX = coordinateX + COORDINATE_X_TECTONIC_SHIFT;\r\n    \t\tthis.coordinateY = coordinateY + COORDINATE_Y_TECTONIC_SHIFT;\r\n    \r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nIt seems to be going wrong with my reversal method (addCoordinateRowFront) as my other methods work fine with the last program I tried. \r\n\r\nNot sure why this is the case. \r\n\r\nFor clarification, when I use this method for shifting coordinates to the front instead. My program works\r\n\r\n    void addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\r\n    \r\n    \t\tfor(int j = rowOfCoordinates.numberOfElements; j &gt; 0; j--) {\r\n    \r\n    \t\t\tfor(int i = numberOfElements; i &gt; 0; i--) {\r\n    \r\n    \t\t\t\tnewCoordinateArray[i] = newCoordinateArray[i-1];\r\n    \r\n    \t\t\t}\r\n    \t\t\tnewCoordinateArray[0] = rowOfCoordinates.newCoordinateArray[j-1];\r\n    \r\n    \t\t\tnumberOfElements++;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nBut I would much prefer row reversal to work as I understand it better.\r\n\r\nWhen I print in my addCordinateRowFront method to see what is going on, this is what I get:\r\n\r\n    Pirate.Coordinate@512ddf17\r\n    Pirate.Coordinate@2c13da15\r\n    Pirate.Coordinate@77556fd\r\n    Pirate.Coordinate@368239c8\r\n    Pirate.Coordinate@9e89d68\r\n    7, 3\r\n    4, 2\r\n    10, 6\r\n    5, 3\r\n    10, 8\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Shifting Coordinates Using array reversal","body":"<p>My problem is this: I store coordinates in rows (initialized by an array myCoordinateArray), and the coordinates in these rows either have to be shifted to the back or shifted to the front.</p>\n<p>Now, my program worked before, but I am trying a different method now with regards to shifting my coordinates to the front using a array reversal method. Problem is, I only get half the output I need. So it seems not all my coordinates are being outputted.</p>\n<p>I am working with classes.</p>\n<p>EDIT*** I have decided to post my full program to help people get an idea on perhaps why with addCoordinateRowFront (Method 1) my program 100% works, but with addCoordinateRowFront (Method 2 - array reversal) my program no longer works. I really have no idea why this is the case and I really cannot find the problem. Hope someone will be able to shed some light. I very much appreciate the help!</p>\n<p>Here is my Main Pirate Class</p>\n<pre><code>package Pirate;\n\n\nimport java.io.PrintStream;\nimport java.util.Locale;\nimport java.util.Scanner;\n\n\nimport ui.UIAuxiliaryMethods;\n\n\n\npublic class Pirate {\n\n    CoordinateRow newCoordinateRow;\n    Coordinate singleCoordinate;\n    Coordinate newCoordinate;\n    int singleCoordinateX;\n    int singleCoordinateY;\n    PrintStream out;\n    String position;\n\n\n\n    Pirate() {\n\n        out = new PrintStream(System.out);\n        newCoordinateRow = new CoordinateRow();\n        position = &quot;front&quot;;\n    }\n\n\n\n    void separateCoordinateRows(Scanner coordinateDataScanner) {\n\n        String[] coordinateDataStringArray = coordinateDataScanner.nextLine().split(&quot;=&quot;); //Split line of input at = into an array of strings\n\n        for(int i = 0; i &lt; coordinateDataStringArray.length; i++) {\n\n            Scanner individualCoordinateRowScanner = new Scanner(coordinateDataStringArray[i]);\n\n            placeCoordinateRow(isolateIndividualCoordinates(individualCoordinateRowScanner));\n        }\n\n    }\n\n\n    CoordinateRow isolateIndividualCoordinates(Scanner scannerInput) {\n\n        CoordinateRow newCoordinateRow = new CoordinateRow();\n\n        String[] individualCoordinateStringArray = scannerInput.nextLine().split(&quot; &quot;); //further split the array of strings into smaller array of strings at white-spaces.\n\n        for(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\n\n            Scanner individualCoordinateScanner = new Scanner(individualCoordinateStringArray[i]);\n\n            newCoordinateRow.addSingleCoordinateToBack(adjustedCoordinates(individualCoordinateScanner)); //add new coordinates back into rows. \n\n        }\n\n        return newCoordinateRow;\n        \n    }\n\n\n\n    Coordinate adjustedCoordinates(Scanner individualCoordinateScanner) {\n\n        String[] individualCoordinateStringArray = individualCoordinateScanner.nextLine().split(&quot;,&quot;); //split array of strings into even smaller array of strings at (,). \n\n        for(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\n\n            singleCoordinateX = Integer.parseInt(individualCoordinateStringArray[0]);\n\n            singleCoordinateY = Integer.parseInt(individualCoordinateStringArray[1]);\n\n            singleCoordinate = new Coordinate(singleCoordinateX, singleCoordinateY); //convert existing coordinates to new coordinates\n\n        }\n\n        return singleCoordinate;\n\n    }\n\n\n    CoordinateRow placeCoordinateRow(CoordinateRow rowOfCoordinates) { //add rows of new coordinates either to the front or behind.\n\n        if(position.equals(&quot;front&quot;)) {\n\n            newCoordinateRow.addCoordinateRowFront(rowOfCoordinates);\n\n            position = &quot;back&quot;;\n\n\n        } else if(position.equals(&quot;back&quot;)) {\n\n            newCoordinateRow.addCoordinateRowBack(rowOfCoordinates);\n\n            position = &quot;front&quot;; \n        }\n\n        return newCoordinateRow;\n    }\n\n\n\n    void printCoordinateRows() {\n\n\n        for(int i = 0; i &lt; newCoordinateRow.numberOfElements; i++) {\n\n            out.printf(&quot;%d, %d\\n&quot;, newCoordinateRow.newCoordinateArray[i].coordinateX, newCoordinateRow.newCoordinateArray[i].coordinateY);\n        }\n\n    }\n\n\n    void start() {\n\n        Scanner newCoordinateInputData = UIAuxiliaryMethods.askUserForInput().getScanner();\n\n        separateCoordinateRows(newCoordinateInputData);\n\n        printCoordinateRows();\n\n    }\n\n\n    public static void main(String[] args) {\n        Locale.setDefault(Locale.US);\n        new Pirate().start();\n    }\n\n}\n</code></pre>\n<p>Here is my CoordinateRow class code:</p>\n<pre><code>public class CoordinateRow {\n\n    static final int MAX_NUMBER_OF_ELEMENTS = 250;\n    //want to create a new row class, that can store up to max 250 elements, but can store lower than this\n\n    Coordinate[] newCoordinateArray;\n    int numberOfElements;\n    \n    \n    CoordinateRow() {\n\n        newCoordinateArray = new Coordinate[MAX_NUMBER_OF_ELEMENTS];\n        numberOfElements = 0;\n        \n    \n}\n\n\nvoid addCoordinateRowBack(CoordinateRow rowOfCoordinates) {\n\n    for(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\n\n        newCoordinateArray[numberOfElements] = rowOfCoordinates.newCoordinateArray[i];\n\n        numberOfElements++;\n\n\n    }\n\n}\n\n\nvoid addSingleCoordinateToBack(Coordinate singleCoordinate) {\n\n    newCoordinateArray[numberOfElements] = singleCoordinate;\n\n    numberOfElements++;\n\n} \n\n\n\nvoid addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\n    \n    Coordinate[] newArray = new Coordinate[rowOfCoordinates.numberOfElements];\n    \n    for(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\n        \n        newArray[i] = rowOfCoordinates.newCoordinateArray[rowOfCoordinates.numberOfElements -i - 1];\n    \n    }\n    \n}\n</code></pre>\n<p>}</p>\n<p>This is my Coordinate Class</p>\n<pre><code>package Pirate;\n\npublic class Coordinate {\n\n    static final int COORDINATE_X_TECTONIC_SHIFT = 1;\n    static final int COORDINATE_Y_TECTONIC_SHIFT = 0;\n\n    int coordinateX;\n    int coordinateY;\n\n    Coordinate(int coordinateX, int coordinateY) {\n\n        this.coordinateX = coordinateX + COORDINATE_X_TECTONIC_SHIFT;\n        this.coordinateY = coordinateY + COORDINATE_Y_TECTONIC_SHIFT;\n\n    }\n\n\n}\n</code></pre>\n<p>It seems to be going wrong with my reversal method (addCoordinateRowFront) as my other methods work fine with the last program I tried.</p>\n<p>Not sure why this is the case.</p>\n<p>For clarification, when I use this method for shifting coordinates to the front instead. My program works</p>\n<pre><code>void addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\n\n        for(int j = rowOfCoordinates.numberOfElements; j &gt; 0; j--) {\n\n            for(int i = numberOfElements; i &gt; 0; i--) {\n\n                newCoordinateArray[i] = newCoordinateArray[i-1];\n\n            }\n            newCoordinateArray[0] = rowOfCoordinates.newCoordinateArray[j-1];\n\n            numberOfElements++;\n        }\n\n    }\n\n}\n</code></pre>\n<p>But I would much prefer row reversal to work as I understand it better.</p>\n<p>When I print in my addCordinateRowFront method to see what is going on, this is what I get:</p>\n<pre><code>Pirate.Coordinate@512ddf17\nPirate.Coordinate@2c13da15\nPirate.Coordinate@77556fd\nPirate.Coordinate@368239c8\nPirate.Coordinate@9e89d68\n7, 3\n4, 2\n10, 6\n5, 3\n10, 8\n</code></pre>\n"},{"tags":["java","json","jsonschema"],"answers":[{"tags":[],"owner":{"account_id":4397440,"reputation":365,"user_id":3584022,"accept_rate":44,"display_name":"pl0u"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479890762,"creation_date":1479890762,"answer_id":40759645,"question_id":40294867,"body_markdown":"looks like there isn&#39;t. I had to write my own generator.","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>looks like there isn't. I had to write my own generator.</p>\n"},{"tags":[],"owner":{"account_id":4329690,"reputation":11412,"user_id":3535537,"accept_rate":78,"display_name":"St&#233;phane GRILLON"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1479891514,"creation_date":1479891514,"answer_id":40759894,"question_id":40294867,"body_markdown":"You can use [GSON][1] library.\r\n\r\n**Convert Java object to JSON:**\r\n\r\n    Gson gson = new Gson();\r\n    Staff obj = new Staff();\r\n    \r\n    // 1. Java object to JSON, and save into a file\r\n    gson.toJson(obj, new FileWriter(&quot;D:\\\\file.json&quot;));\r\n    \r\n    // 2. Java object to JSON, and assign to a String\r\n    String jsonInString = gson.toJson(obj);\r\n\r\n\r\n**Convert JSON to Java object:**\r\n\r\n    Gson gson = new Gson();\r\n    \r\n    // 1. JSON to Java object, read it from a file.\r\n    Staff staff = gson.fromJson(new FileReader(&quot;D:\\\\file.json&quot;), Staff.class);\r\n    \r\n    // 2. JSON to Java object, read it from a Json String.\r\n    String jsonInString = &quot;{&#39;name&#39; : &#39;foo&#39;}&quot;;\r\n    Staff staff = gson.fromJson(jsonInString, Staff.class);\r\n    \r\n    // JSON to JsonElement, convert to String later.\r\n    JsonElement json = gson.fromJson(new FileReader(&quot;D:\\\\file.json&quot;), JsonElement.class);\r\n    String result = gson.toJson(json);\r\n\r\n\r\n  [1]: https://github.com/google/gson","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>You can use <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">GSON</a> library.</p>\n\n<p><strong>Convert Java object to JSON:</strong></p>\n\n<pre><code>Gson gson = new Gson();\nStaff obj = new Staff();\n\n// 1. Java object to JSON, and save into a file\ngson.toJson(obj, new FileWriter(\"D:\\\\file.json\"));\n\n// 2. Java object to JSON, and assign to a String\nString jsonInString = gson.toJson(obj);\n</code></pre>\n\n<p><strong>Convert JSON to Java object:</strong></p>\n\n<pre><code>Gson gson = new Gson();\n\n// 1. JSON to Java object, read it from a file.\nStaff staff = gson.fromJson(new FileReader(\"D:\\\\file.json\"), Staff.class);\n\n// 2. JSON to Java object, read it from a Json String.\nString jsonInString = \"{'name' : 'foo'}\";\nStaff staff = gson.fromJson(jsonInString, Staff.class);\n\n// JSON to JsonElement, convert to String later.\nJsonElement json = gson.fromJson(new FileReader(\"D:\\\\file.json\"), JsonElement.class);\nString result = gson.toJson(json);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178013,"reputation":472,"user_id":1795317,"display_name":"Matija Han"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546553377,"creation_date":1546553377,"answer_id":54030471,"question_id":40294867,"body_markdown":"Yes there is: https://github.com/java-json-tools/json-schema-validator. It ingests Jacson&#39;s `JsonNode` containing the schema definition and can validate JSON data against that schema.","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>Yes there is: <a href=\"https://github.com/java-json-tools/json-schema-validator\" rel=\"nofollow noreferrer\">https://github.com/java-json-tools/json-schema-validator</a>. It ingests Jacson's <code>JsonNode</code> containing the schema definition and can validate JSON data against that schema.</p>\n"}],"owner":{"account_id":4397440,"reputation":365,"user_id":3584022,"accept_rate":44,"display_name":"pl0u"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1747,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1637093253,"creation_date":1477605506,"question_id":40294867,"body_markdown":"Are there any libraries to convert JSON in `String`/`jackson`/`org.JSON.JSONOBJECT`/etc... to a JSON schema?\r\n\r\nSo far, the only generator I found covert Java classes to JSON schemas. I&#39;m about to write my own converted, but it&#39;d be nice if I didn&#39;t have to re-invent the wheel.","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>Are there any libraries to convert JSON in <code>String</code>/<code>jackson</code>/<code>org.JSON.JSONOBJECT</code>/etc... to a JSON schema?</p>\n\n<p>So far, the only generator I found covert Java classes to JSON schemas. I'm about to write my own converted, but it'd be nice if I didn't have to re-invent the wheel.</p>\n"},{"tags":["java","xml","web-services","character-encoding"],"comments":[{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":1,"creation_date":1296467205,"post_id":4849387,"comment_id":5385889,"body_markdown":"If you are sending binary data you should not be using xml.","body":"If you are sending binary data you should not be using xml."},{"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"score":1,"creation_date":1296468758,"post_id":4849387,"comment_id":5386153,"body_markdown":"@sarnold : It is decimal, forgot to add information about it.","body":"@sarnold : It is decimal, forgot to add information about it."},{"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"score":1,"creation_date":1296468987,"post_id":4849387,"comment_id":5386190,"body_markdown":"@OrangeDog : I am not sending binary data, I am returning plain text from DB. Don&#39;t know how but its having control char in it.","body":"@OrangeDog : I am not sending binary data, I am returning plain text from DB. Don&#39;t know how but its having control char in it."},{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":2,"creation_date":1296475575,"post_id":4849387,"comment_id":5387309,"body_markdown":"Then you need to locate and fix that problem, rather than obscuring the problem in another layer.","body":"Then you need to locate and fix that problem, rather than obscuring the problem in another layer."}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1296470159,"creation_date":1296470159,"answer_id":4849865,"question_id":4849387,"body_markdown":"This error is being thrown by the Woodstox XML parser. The source code from the `InputBootstrapper` class looks like this:\r\n\r\n\r\n    protected void reportUnexpectedChar(int i, String msg)\r\n        throws WstxException\r\n    {\r\n        char c = (char) i;\r\n        String excMsg;\r\n\r\n        // WTF? JDK thinks null char is just fine as?!\r\n        if (Character.isISOControl(c)) {\r\n            excMsg = &quot;Unexpected character (CTRL-CHAR, code &quot;+i+&quot;)&quot;+msg;\r\n        } else {\r\n            excMsg = &quot;Unexpected character &#39;&quot;+c+&quot;&#39; (code &quot;+i+&quot;)&quot;+msg;\r\n        }\r\n        Location loc = getLocation();\r\n        throw new WstxUnexpectedCharException(excMsg, loc, c);\r\n    }\r\n\r\nAmusing comment aside, the Woodstox is performing some additional validation on top of the JDK parser, and is rejecting the ASCII character `15` as invalid.\r\n\r\nAs to why that character is there, we can&#39;t tell you that, it&#39;s in your data.  Similarly, we can&#39;t tell you if removing that character will break anything, since again, it&#39;s your data. You can only establish that for yourself.\r\n","title":"Illegal character - CTRL-CHAR","body":"<p>This error is being thrown by the Woodstox XML parser. The source code from the <code>InputBootstrapper</code> class looks like this:</p>\n\n<pre><code>protected void reportUnexpectedChar(int i, String msg)\n    throws WstxException\n{\n    char c = (char) i;\n    String excMsg;\n\n    // WTF? JDK thinks null char is just fine as?!\n    if (Character.isISOControl(c)) {\n        excMsg = \"Unexpected character (CTRL-CHAR, code \"+i+\")\"+msg;\n    } else {\n        excMsg = \"Unexpected character '\"+c+\"' (code \"+i+\")\"+msg;\n    }\n    Location loc = getLocation();\n    throw new WstxUnexpectedCharException(excMsg, loc, c);\n}\n</code></pre>\n\n<p>Amusing comment aside, the Woodstox is performing some additional validation on top of the JDK parser, and is rejecting the ASCII character <code>15</code> as invalid.</p>\n\n<p>As to why that character is there, we can't tell you that, it's in your data.  Similarly, we can't tell you if removing that character will break anything, since again, it's your data. You can only establish that for yourself.</p>\n"},{"tags":[],"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1296476018,"creation_date":1296476018,"answer_id":4850707,"question_id":4849387,"body_markdown":"If you have control characters in your text data then you need to solve that problem at its source.\r\n\r\nThe most likely causes are incorrect communication encodings (usually between database and app) or not sanitising user input.","title":"Illegal character - CTRL-CHAR","body":"<p>If you have control characters in your text data then you need to solve that problem at its source.</p>\n\n<p>The most likely causes are incorrect communication encodings (usually between database and app) or not sanitising user input.</p>\n"},{"tags":[],"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1569490027,"creation_date":1308567617,"answer_id":6410169,"question_id":4849387,"body_markdown":"I would do what OrangeDog suggest. But if you want to solve it in your code try:\r\n\r\n`replaceAll(&quot;[\\\\x00-\\\\x09\\\\x11\\\\x12\\\\x14-\\\\x1F\\\\x7F]&quot;, &quot;&quot;)`\r\n\r\n\r\n`\\\\x12` is the char.","title":"Illegal character - CTRL-CHAR","body":"<p>I would do what OrangeDog suggest. But if you want to solve it in your code try:</p>\n\n<p><code>replaceAll(\"[\\\\x00-\\\\x09\\\\x11\\\\x12\\\\x14-\\\\x1F\\\\x7F]\", \"\")</code></p>\n\n<p><code>\\\\x12</code> is the char.</p>\n"},{"tags":[],"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1462297902,"creation_date":1329477285,"answer_id":9327211,"question_id":4849387,"body_markdown":"Thanks guys for you inputs. I am sharing solution might be helpful for others. \r\nThe requirement was not to wipe out CONTROL CHAR, it should remain as it is in DB also and one WS sends it across n/w client should able to get the CONTROL CHAR. So I implemented the code as follow:  &lt;br/&gt;\r\n\r\n1. Encode strings using URLEncoder in Web-Service code.  \r\n2. At client Side decode it using URLDecoder  \r\n\r\nSharing sample code and output bellow.  \r\n**Sample code:**  \r\n\r\n    System.out.println(&quot;NewSfn&quot;);  \r\n    System.out.println(URLEncoder.encode(&quot;NewSfn&quot;, &quot;UTF-8&quot;));  \r\n    System.out.println(URLDecoder.decode(&quot;NewSfn&quot;, &quot;UTF-8&quot;));  \r\n\r\n**Output:**  \r\n\r\n    NewSfn  \r\n    New%0FSfn  \r\n    NewSfn \r\n\r\n \r\n\r\nSo client will recieve CONTROL CHARs.\r\n\r\nEDIT: Stack Exchange is not showing CONTROL CHAR above. `NewSfn` is like this `New(CONTROL CHAR)Sfn`.\r\n","title":"Illegal character - CTRL-CHAR","body":"<p>Thanks guys for you inputs. I am sharing solution might be helpful for others. \nThe requirement was not to wipe out CONTROL CHAR, it should remain as it is in DB also and one WS sends it across n/w client should able to get the CONTROL CHAR. So I implemented the code as follow:  <br/></p>\n\n<ol>\n<li>Encode strings using URLEncoder in Web-Service code.  </li>\n<li>At client Side decode it using URLDecoder  </li>\n</ol>\n\n<p>Sharing sample code and output bellow.<br>\n<strong>Sample code:</strong>  </p>\n\n<pre><code>System.out.println(\"NewSfn\");  \nSystem.out.println(URLEncoder.encode(\"NewSfn\", \"UTF-8\"));  \nSystem.out.println(URLDecoder.decode(\"NewSfn\", \"UTF-8\"));  \n</code></pre>\n\n<p><strong>Output:</strong>  </p>\n\n<pre><code>NewSfn  \nNew%0FSfn  \nNewSfn \n</code></pre>\n\n<p>So client will recieve CONTROL CHARs.</p>\n\n<p>EDIT: Stack Exchange is not showing CONTROL CHAR above. <code>NewSfn</code> is like this <code>New(CONTROL CHAR)Sfn</code>.</p>\n"},{"tags":[],"owner":{"account_id":3855429,"reputation":139,"user_id":3838824,"display_name":"colin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405379986,"creation_date":1405379986,"answer_id":24747582,"question_id":4849387,"body_markdown":"I found the same problem when I was passing null values for some of the parameters. I passed empty or wrench values instead and this error went away.","title":"Illegal character - CTRL-CHAR","body":"<p>I found the same problem when I was passing null values for some of the parameters. I passed empty or wrench values instead and this error went away.</p>\n"},{"tags":[],"owner":{"account_id":3022182,"reputation":9,"user_id":2562934,"display_name":"user2562934"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1543826754,"creation_date":1543826754,"answer_id":53590188,"question_id":4849387,"body_markdown":"I&#39;m a bit confused by @ssedano&#39;s anwser, it seems to me he&#39;s trying to find all control chars from ASCII table 0x00 to 0x1F except for 0x0A (new line) and 0x0D (carriage return) plus 0x7F (del), then wouldn&#39;t ther regex be\r\n\r\n    replaceAll(&quot;[\\\\x00-\\\\x09\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]&quot;, &quot;&quot;)","title":"Illegal character - CTRL-CHAR","body":"<p>I'm a bit confused by @ssedano's anwser, it seems to me he's trying to find all control chars from ASCII table 0x00 to 0x1F except for 0x0A (new line) and 0x0D (carriage return) plus 0x7F (del), then wouldn't ther regex be</p>\n\n<pre><code>replaceAll(\"[\\\\x00-\\\\x09\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\", \"\")\n</code></pre>\n"}],"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73910,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":9327211,"answer_count":6,"score":22,"last_activity_date":1637092904,"creation_date":1296466951,"question_id":4849387,"body_markdown":"I am getting following exception from webservices: \r\n\r\n&gt;com.ctc.wstx.exc.WstxUnexpectedCharException: Illegal character ((CTRL-CHAR, code 15))\r\n\r\nI know the reason behind this, I am getting &quot;Control Characters&quot; in data I want to return. And in XML `CTRL-CHAR` are not allowed.\r\n\r\nI searched for the solution, and many places I found the code to remove `CTRL-CHAR`. \r\n\r\nThe concern is shall I end up loss of data if I remove control characters from data?  \r\nI want the clean solution may encoding, instead of removing control char.\r\n","title":"Illegal character - CTRL-CHAR","body":"<p>I am getting following exception from webservices:</p>\n<blockquote>\n<p>com.ctc.wstx.exc.WstxUnexpectedCharException: Illegal character ((CTRL-CHAR, code 15))</p>\n</blockquote>\n<p>I know the reason behind this, I am getting &quot;Control Characters&quot; in data I want to return. And in XML <code>CTRL-CHAR</code> are not allowed.</p>\n<p>I searched for the solution, and many places I found the code to remove <code>CTRL-CHAR</code>.</p>\n<p>The concern is shall I end up loss of data if I remove control characters from data?<br />\nI want the clean solution may encoding, instead of removing control char.</p>\n"},{"tags":["java","json","hadoop","jackson","marshalling"],"comments":[{"owner":{"account_id":2652155,"reputation":28560,"user_id":2293534,"accept_rate":75,"display_name":"SkyWalker"},"score":0,"creation_date":1462191988,"post_id":24832614,"comment_id":61519710,"body_markdown":"Use okhttp 1.5.1. Hope it will solve your issue.","body":"Use okhttp 1.5.1. Hope it will solve your issue."},{"owner":{"account_id":3645671,"reputation":1586,"user_id":3038736,"display_name":"sagneta"},"score":1,"creation_date":1462369437,"post_id":24832614,"comment_id":61609123,"body_markdown":"I realize you said you don&#39;t have easy access but I suggest front-ending the crawl and removing spurious control characters like 0 (NULL) from the stream and then pass it to jackson. I have seen financial feeds for various securities have spurious data like this that always needs to be culled. It is most likely a defect on the sending side.","body":"I realize you said you don&#39;t have easy access but I suggest front-ending the crawl and removing spurious control characters like 0 (NULL) from the stream and then pass it to jackson. I have seen financial feeds for various securities have spurious data like this that always needs to be culled. It is most likely a defect on the sending side."},{"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"score":0,"creation_date":1462388580,"post_id":24832614,"comment_id":61622166,"body_markdown":"At low level something is injecting null bytes (byte 0) into stream, and parser does not accept those (they are invalid for JSON). You need to figure out how and why this happens; it could be many things including concurrency issues, or timing (trying to parse content before it&#39;s loaded into buffer).","body":"At low level something is injecting null bytes (byte 0) into stream, and parser does not accept those (they are invalid for JSON). You need to figure out how and why this happens; it could be many things including concurrency issues, or timing (trying to parse content before it&#39;s loaded into buffer)."},{"owner":{"account_id":1057328,"reputation":1255,"user_id":1059744,"accept_rate":71,"display_name":"Haris Osmanagić"},"score":1,"creation_date":1488368029,"post_id":24832614,"comment_id":72196926,"body_markdown":"If possible, add a few log lines, so that you can see which records exactly are failing. Also, since you are crawling data, you might be having the same problem as here (GZip encoding): http://stackoverflow.com/questions/8091524/how-to-parse-an-application-json-object-into-a-string","body":"If possible, add a few log lines, so that you can see which records exactly are failing. Also, since you are crawling data, you might be having the same problem as here (GZip encoding): <a href=\"http://stackoverflow.com/questions/8091524/how-to-parse-an-application-json-object-into-a-string\" title=\"how to parse an application json object into a string\">stackoverflow.com/questions/8091524/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1947302,"reputation":446,"user_id":1752132,"display_name":"Abdul Rahman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637092817,"creation_date":1488449545,"answer_id":42552503,"question_id":24832614,"body_markdown":" - You can use [`StringUtils`][1] from Apache Commons library to escape\r\n   the string.\r\n - Or you can replace selectively the *control characters* from the\r\n   string before JSON marshaling.\r\n\r\nYou can also refer to this post: \r\nhttps://stackoverflow.com/questions/4849387/illegal-character-ctrl-char?rq=1\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/StringEscapeUtils.html#line.89","title":"Strange Jackson Illegal character ((CTRL-CHAR, code 0)) Exception in Map Reduce Combiner","body":"<ul>\n<li>You can use <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/StringEscapeUtils.html#line.89\" rel=\"nofollow noreferrer\"><code>StringUtils</code></a> from Apache Commons library to escape\nthe string.</li>\n<li>Or you can replace selectively the <em>control characters</em> from the\nstring before JSON marshaling.</li>\n</ul>\n<p>You can also refer to this post:\n<a href=\"https://stackoverflow.com/questions/4849387/illegal-character-ctrl-char?rq=1\">Illegal character - CTRL-CHAR</a></p>\n"},{"tags":[],"owner":{"account_id":14653287,"reputation":1,"user_id":10586442,"display_name":"fimakoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635421382,"creation_date":1635421382,"answer_id":69753473,"question_id":24832614,"body_markdown":"I am getting a UTF-16 encoded response and after each simple character in the byte[] there is a ((CTRL-CHAR, code 0)) [see screen][1].\r\n\r\nit work for me:\r\n\r\n    StringUtils.toEncodedString(responseBodyAsByteArray, StandardCharsets.UTF_16LE)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BmxbD.png","title":"Strange Jackson Illegal character ((CTRL-CHAR, code 0)) Exception in Map Reduce Combiner","body":"<p>I am getting a UTF-16 encoded response and after each simple character in the byte[] there is a ((CTRL-CHAR, code 0)) <a href=\"https://i.stack.imgur.com/BmxbD.png\" rel=\"nofollow noreferrer\">see screen</a>.</p>\n<p>it work for me:</p>\n<pre><code>StringUtils.toEncodedString(responseBodyAsByteArray, StandardCharsets.UTF_16LE)\n</code></pre>\n"}],"owner":{"account_id":4658322,"reputation":289,"user_id":3773235,"accept_rate":62,"display_name":"mle"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25103,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"answer_count":2,"score":23,"last_activity_date":1637092817,"creation_date":1405712553,"question_id":24832614,"body_markdown":"I have a Map-Reduce job with a mapper which takes a record and converts it into an object, an instance of MyObject, which is marshalled to JSON using Jackson.  The value is just another Text field in the record.\r\n\r\nThe relevant piece of the mapper is something like the following:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    MyObject val = new MyObject();\r\n    val.setA(stringA);\r\n    val.setB(stringB);\r\n    Writer strWriter = new StringWriter();\r\n    mapper.writeValue(strWriter, val);\r\n    key.set(strWriter.toString());\r\n\r\nThe outputs of the mapper are sent to a Combiner which unmarshalls the JSON object and aggregates key-value pairs.  It is conceptually very simple and is something like:\r\n\r\n    public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context cxt) \r\n    \tthrows IOException, InterruptedException {\r\n    \tint count = 0;\r\n    \tTermIndex x = _mapper.readValue(key.toString(), MyObject.class);\r\n        for (IntWritable int : values) ++count;\r\n        ...\r\n        emit (key, value)\r\n    }\r\n\r\nThe MyObject class consists of two fields (both strings), get/set methods and a default constructor.  One of the fields stores snippets of text based on a web crawl, but is always a string.\r\n\r\n    public class MyObject {\r\n\t  private String A;\r\n\t  private String B;\r\n\r\n\t  public MyObject() {}\r\n\t\r\n\t  public String getA() {\r\n\t   \treturn A;\r\n\t  }\r\n\t  public void setA(String A) {\r\n\t\tthis.A = A;\r\n\t  }\r\n\t  public String getB() {\r\n\t\treturn B;\r\n\t  } \r\n\t  public void setIdx(String B) {\r\n\t\tthis.B = B;\r\n\t  }\r\n    }\r\n\r\nMy MapReduce job appears to be running fine until it reaches certain records, which I cannot easily access (because the mapper is generating the records from a crawl), and the following exception is being thrown:\r\n\r\n    Error: com.fasterxml.jackson.core.JsonParseException: \r\n    \r\n        Illegal character ((CTRL-CHAR, code 0)): only regular white space (\\r, \\n, \\t) is allowed between tokens\r\n         at [Source: java.io.StringReader@5ae2bee7; line: 1, column: 3]\r\n\r\nWould anyone have any suggestions about the cause of this?\r\n\r\n","title":"Strange Jackson Illegal character ((CTRL-CHAR, code 0)) Exception in Map Reduce Combiner","body":"<p>I have a Map-Reduce job with a mapper which takes a record and converts it into an object, an instance of MyObject, which is marshalled to JSON using Jackson.  The value is just another Text field in the record.</p>\n\n<p>The relevant piece of the mapper is something like the following:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nMyObject val = new MyObject();\nval.setA(stringA);\nval.setB(stringB);\nWriter strWriter = new StringWriter();\nmapper.writeValue(strWriter, val);\nkey.set(strWriter.toString());\n</code></pre>\n\n<p>The outputs of the mapper are sent to a Combiner which unmarshalls the JSON object and aggregates key-value pairs.  It is conceptually very simple and is something like:</p>\n\n<pre><code>public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context cxt) \n    throws IOException, InterruptedException {\n    int count = 0;\n    TermIndex x = _mapper.readValue(key.toString(), MyObject.class);\n    for (IntWritable int : values) ++count;\n    ...\n    emit (key, value)\n}\n</code></pre>\n\n<p>The MyObject class consists of two fields (both strings), get/set methods and a default constructor.  One of the fields stores snippets of text based on a web crawl, but is always a string.</p>\n\n<pre><code>public class MyObject {\n  private String A;\n  private String B;\n\n  public MyObject() {}\n\n  public String getA() {\n    return A;\n  }\n  public void setA(String A) {\n    this.A = A;\n  }\n  public String getB() {\n    return B;\n  } \n  public void setIdx(String B) {\n    this.B = B;\n  }\n}\n</code></pre>\n\n<p>My MapReduce job appears to be running fine until it reaches certain records, which I cannot easily access (because the mapper is generating the records from a crawl), and the following exception is being thrown:</p>\n\n<pre><code>Error: com.fasterxml.jackson.core.JsonParseException: \n\n    Illegal character ((CTRL-CHAR, code 0)): only regular white space (\\r, \\n, \\t) is allowed between tokens\n     at [Source: java.io.StringReader@5ae2bee7; line: 1, column: 3]\n</code></pre>\n\n<p>Would anyone have any suggestions about the cause of this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4326653,"reputation":360,"user_id":5329108,"accept_rate":75,"display_name":"Krishna Pandey"},"score":0,"creation_date":1509706097,"post_id":22335983,"comment_id":81137247,"body_markdown":"You would like to read this [BlackHat paper](https://www.blackhat.com/docs/us-15/materials/us-15-Wang-FileCry-The-New-Age-Of-XXE-java-wp.pdf) on how your defences may not be providing security with respect to XXE attacks. It also mentions what @erickson pointed about FEATURE_SECURE_PROCESSING option.","body":"You would like to read this <a href=\"https://www.blackhat.com/docs/us-15/materials/us-15-Wang-FileCry-The-New-Age-Of-XXE-java-wp.pdf\" rel=\"nofollow noreferrer\">BlackHat paper</a> on how your defences may not be providing security with respect to XXE attacks. It also mentions what @erickson pointed about FEATURE_SECURE_PROCESSING option."}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1394570481,"creation_date":1394570481,"answer_id":22336181,"question_id":22335983,"body_markdown":"You can request secure processing by setting [`FEATURE_SECURE_PROCESSING`;][1] whether this prohibits external entities is up to the provider of the `DocumentBuilderFactory`, but it&#39;s a likely candidate.\r\n\r\n    DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();\r\n    f.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n    Document test = f.newDocumentBuilder.parse(...);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/javax/xml/XMLConstants.html#FEATURE_SECURE_PROCESSING","title":"Parse XML document securely","body":"<p>You can request secure processing by setting <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/xml/XMLConstants.html#FEATURE_SECURE_PROCESSING\" rel=\"noreferrer\"><code>FEATURE_SECURE_PROCESSING</code>;</a> whether this prohibits external entities is up to the provider of the <code>DocumentBuilderFactory</code>, but it's a likely candidate.</p>\n\n<pre><code>DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();\nf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\nDocument test = f.newDocumentBuilder.parse(...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12829502,"reputation":1,"user_id":9281173,"display_name":"tobidiahstane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637092427,"creation_date":1637092427,"answer_id":69995314,"question_id":22335983,"body_markdown":"You&#39;ll need to set:\r\n\r\n    DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();\r\n    f.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false); \r\n    f.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false); \r\n    f.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false); \r\n    f.setXIncludeAware(false); \r\n    f.setExpandEntityReferences(false);\r\n\r\n    Document test = f.newDocumentBuilder.parse(...);\r\n\r\nTo avoid external entity expansion.\r\n        ","title":"Parse XML document securely","body":"<p>You'll need to set:</p>\n<pre><code>DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();\nf.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false); \nf.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false); \nf.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false); \nf.setXIncludeAware(false); \nf.setExpandEntityReferences(false);\n\nDocument test = f.newDocumentBuilder.parse(...);\n</code></pre>\n<p>To avoid external entity expansion.</p>\n"}],"owner":{"account_id":3100671,"reputation":2657,"user_id":2624866,"accept_rate":48,"display_name":"rickygrimes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3428,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":22336181,"answer_count":2,"score":6,"last_activity_date":1637092427,"creation_date":1394569845,"question_id":22335983,"body_markdown":"How do I parse an XML document securely so that it does not allow external entities as part of an incoming XML document? I am using DOM parser -\r\n\r\n    Document test = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(byteArrayInputStream))","title":"Parse XML document securely","body":"<p>How do I parse an XML document securely so that it does not allow external entities as part of an incoming XML document? I am using DOM parser -</p>\n\n<pre><code>Document test = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(byteArrayInputStream))\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1637055155,"post_id":69986090,"comment_id":123716647,"body_markdown":"what&#39;s wrong with the second snippet? Replace `noNPE` with `person!=null` and you&#39;re done","body":"what&#39;s wrong with the second snippet? Replace <code>noNPE</code> with <code>person!=null</code> and you&#39;re done"},{"owner":{"account_id":23220679,"reputation":51,"user_id":17312952,"display_name":"Grigorii Kostarev"},"score":0,"creation_date":1637056512,"post_id":69986090,"comment_id":123717188,"body_markdown":"I need one more check in this case, that person.getAge() is not null. After that code is ugly and difficult to maintain.","body":"I need one more check in this case, that person.getAge() is not null. After that code is ugly and difficult to maintain."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1637056933,"post_id":69986090,"comment_id":123717362,"body_markdown":"Just because `Optional` exists, doesn&#39;t mean you should use it everywhere. A simple null-check (e.g. `if (person == null || person.getAge() &lt;= 25) throw new CustomException();`) is IMHO far simpler and more readable than using `Optional`.","body":"Just because <code>Optional</code> exists, doesn&#39;t mean you should use it everywhere. A simple null-check (e.g. <code>if (person == null || person.getAge() &lt;= 25) throw new CustomException();</code>) is IMHO far simpler and more readable than using <code>Optional</code>."}],"answers":[{"tags":[],"owner":{"account_id":23325877,"reputation":1,"user_id":17403058,"display_name":"Gao Hongtao"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1637054142,"creation_date":1637054142,"answer_id":69986441,"question_id":69986090,"body_markdown":"You could leverage `ifPresent()` as the predication in the `if` statement:\r\n\r\n```java\r\nif Optional.ofNullable(person)\r\n        .map(Person::getAge)\r\n        .filter(age -&gt; age &gt; 25)\r\n        .orElseThrow(new CustomException())\r\n        .isPresent() {\r\n       // do nothing\r\n} else {\r\n       throw new CustomException();\r\n}\r\n```","title":"How to check the field of an object on NPE and condition simultaneously through Optional? And if everything is ok, do nothing, else throw exception","body":"<p>You could leverage <code>ifPresent()</code> as the predication in the <code>if</code> statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if Optional.ofNullable(person)\n        .map(Person::getAge)\n        .filter(age -&gt; age &gt; 25)\n        .orElseThrow(new CustomException())\n        .isPresent() {\n       // do nothing\n} else {\n       throw new CustomException();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1911363,"reputation":7397,"user_id":1725096,"accept_rate":85,"display_name":"Jens Piegsa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637057683,"creation_date":1637056347,"answer_id":69986942,"question_id":69986090,"body_markdown":"The only thing that needs to be fixed in your code is the API usage, otherwise it won&#39;t compile:\r\n\r\n```java\r\nOptional.ofNullable(person)\r\n\t\t.map(Person::getAge)\r\n\t\t.filter(age -&gt; age &gt; 25)\r\n\t\t.orElseThrow(CustomException::new);\r\n```\r\n\r\n(`orElseThrow()` needs to be fed with a `Supplier`)\r\n\r\nThere is no problem in ignoring the returned value.\r\n\r\nTry `@SuppressWarning(&quot;unused&quot;)` or `//NOSONAR` to silence SonarQubes false positive.","title":"How to check the field of an object on NPE and condition simultaneously through Optional? And if everything is ok, do nothing, else throw exception","body":"<p>The only thing that needs to be fixed in your code is the API usage, otherwise it won't compile:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(person)\n        .map(Person::getAge)\n        .filter(age -&gt; age &gt; 25)\n        .orElseThrow(CustomException::new);\n</code></pre>\n<p>(<code>orElseThrow()</code> needs to be fed with a <code>Supplier</code>)</p>\n<p>There is no problem in ignoring the returned value.</p>\n<p>Try <code>@SuppressWarning(&quot;unused&quot;)</code> or <code>//NOSONAR</code> to silence SonarQubes false positive.</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637092155,"creation_date":1637092155,"answer_id":69995262,"question_id":69986090,"body_markdown":"This is not a proper use of Optional.  Optional is not a general replacement for `if` statements.  See https://stackoverflow.com/questions/23454952/uses-for-optional.\r\n\r\nIt’s really not so bad if you just write:\r\n\r\n    if (person != null &amp;&amp; person.getAge() != null &amp;&amp; person.getAge() &lt; 25) {\r\n        throw new CustomException();\r\n    }\r\n\r\nBut if you don’t like that, you can refactor the check into a new method in the Person class:\r\n\r\n    public void checkAge() {\r\n        if (getAge() != null &amp;&amp; getAge() &lt; 25) {\r\n            throw new CustomException();\r\n        }\r\n    }\r\n\r\n    // Other class:\r\n\r\n    if (person != null) {\r\n        person.checkAge();\r\n    }\r\n\r\nOr, you can add a method to Person which only does the age logic:\r\n\r\n    public boolean tooYoung() {\r\n        return (getAge() != null &amp;&amp; getAge() &lt; 25);\r\n    }\r\n\r\n    // Other class:\r\n\r\n    if (person != null &amp;&amp; person.tooYoung()) {\r\n        throw new CustomException();\r\n    }\r\n","title":"How to check the field of an object on NPE and condition simultaneously through Optional? And if everything is ok, do nothing, else throw exception","body":"<p>This is not a proper use of Optional.  Optional is not a general replacement for <code>if</code> statements.  See <a href=\"https://stackoverflow.com/questions/23454952/uses-for-optional\">Uses for Optional</a>.</p>\n<p>It’s really not so bad if you just write:</p>\n<pre><code>if (person != null &amp;&amp; person.getAge() != null &amp;&amp; person.getAge() &lt; 25) {\n    throw new CustomException();\n}\n</code></pre>\n<p>But if you don’t like that, you can refactor the check into a new method in the Person class:</p>\n<pre><code>public void checkAge() {\n    if (getAge() != null &amp;&amp; getAge() &lt; 25) {\n        throw new CustomException();\n    }\n}\n\n// Other class:\n\nif (person != null) {\n    person.checkAge();\n}\n</code></pre>\n<p>Or, you can add a method to Person which only does the age logic:</p>\n<pre><code>public boolean tooYoung() {\n    return (getAge() != null &amp;&amp; getAge() &lt; 25);\n}\n\n// Other class:\n\nif (person != null &amp;&amp; person.tooYoung()) {\n    throw new CustomException();\n}\n</code></pre>\n"}],"owner":{"account_id":23220679,"reputation":51,"user_id":17312952,"display_name":"Grigorii Kostarev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69995262,"answer_count":3,"score":1,"last_activity_date":1637092155,"creation_date":1637052343,"question_id":69986090,"body_markdown":"I use Java 8 and have an issue with how to check objects through Optional.\r\nIt should be like\r\n\r\n    Optional.ofNullable(person)\r\n            .map(Person::getAge)\r\n            .filter(age -&gt; age &gt; 25)\r\n            .orElseThrow(new CustomException())\r\nHowever, this code returns the value, but I don&#39;t need this.\r\nHow fix it? Code should be like this\r\n\r\n    If (noNPE &amp;&amp; person.getAge() &gt; 25) {\r\n           // do nothing\r\n    } else {\r\n           throw new CustomException();\r\n    }\r\nI don&#39;t need return value due to sonar throw warnings.","title":"How to check the field of an object on NPE and condition simultaneously through Optional? And if everything is ok, do nothing, else throw exception","body":"<p>I use Java 8 and have an issue with how to check objects through Optional.\nIt should be like</p>\n<pre><code>Optional.ofNullable(person)\n        .map(Person::getAge)\n        .filter(age -&gt; age &gt; 25)\n        .orElseThrow(new CustomException())\n</code></pre>\n<p>However, this code returns the value, but I don't need this.\nHow fix it? Code should be like this</p>\n<pre><code>If (noNPE &amp;&amp; person.getAge() &gt; 25) {\n       // do nothing\n} else {\n       throw new CustomException();\n}\n</code></pre>\n<p>I don't need return value due to sonar throw warnings.</p>\n"},{"tags":["java","jackson","deserialization"],"comments":[{"owner":{"account_id":5512082,"reputation":338,"user_id":4378061,"display_name":"mdh"},"score":0,"creation_date":1637093687,"post_id":69995241,"comment_id":123732908,"body_markdown":"Is the closing tag for &lt;content&gt; missing? Please also post your Bom.class","body":"Is the closing tag for &lt;content&gt; missing? Please also post your Bom.class"},{"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"score":0,"creation_date":1637101362,"post_id":69995241,"comment_id":123735242,"body_markdown":"Suggest checking the input from the `reader`.  E.g. `xmlMapper.readValue(&quot;terraform...&quot;, Bom.class)` results in `com.fasterxml.jackson.core.JsonParseException: Unexpected character &#39;t&#39; (code 116) in prolog; expected &#39;&lt;&#39;`","body":"Suggest checking the input from the <code>reader</code>.  E.g. <code>xmlMapper.readValue(&quot;terraform...&quot;, Bom.class)</code> results in <code>com.fasterxml.jackson.core.JsonParseException: Unexpected character &#39;t&#39; (code 116) in prolog; expected &#39;&lt;&#39;</code>"}],"owner":{"account_id":6099776,"reputation":1781,"user_id":4759182,"display_name":"rasilvap"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637092060,"creation_date":1637092060,"question_id":69995241,"body_markdown":"I&#39;m getting the next error, trying to read a this content from a xml file:\r\n\r\n      org.cyclonedx.exception.ParseException: com.fasterxml.jackson.core.JsonParseException: Unexpected character &#39;t&#39; (code 116) in prolog; expected &#39;&lt;&#39;\r\n         at [row,col {unknown-source}]: [2,7]\r\n\r\nThis is the xm file content, I&#39;m trying to read:\r\n\r\n    &lt;content&gt;terraform {\r\n      required_providers {\r\n        aws = {\r\n          source  = &amp;quot;hashicorp/aws&amp;quot;\r\n          version = &amp;quot;~&amp;gt; 3.27&amp;quot;\r\n        }\r\n      }\r\n      required_version = &amp;quot;&amp;gt;= 0.14.7&amp;quot;\r\n    }\r\n    \r\n    data &amp;quot;aws_caller_identity&amp;quot; &amp;quot;current&amp;quot; {}\r\n    \r\n    resource &amp;quot;aws_s3_bucket&amp;quot; &amp;quot;inventory&amp;quot; {\r\n      bucket = &amp;quot;regula-example-${data.aws_caller_identity.current.account_id}&amp;quot;\r\n    }\r\n\r\nThe code I&#39;m using is pretty simple: \r\n\r\n    final ObjectMapper mapper = new XmlMapper()\r\n    return (Bom)this.mapper.readValue(reader, Bom.class);\r\n\r\n\r\nAnd I&#39;m always getting the next error, I tried to modify the Content, but not pretty sure, what could be the error, any ideas?\r\n\r\n\r\n  ","title":"org.cyclonedx.exception.ParseException: com.fasterxml.jackson.core.JsonParseException: Unexpected character &#39;t&#39;","body":"<p>I'm getting the next error, trying to read a this content from a xml file:</p>\n<pre><code>  org.cyclonedx.exception.ParseException: com.fasterxml.jackson.core.JsonParseException: Unexpected character 't' (code 116) in prolog; expected '&lt;'\n     at [row,col {unknown-source}]: [2,7]\n</code></pre>\n<p>This is the xm file content, I'm trying to read:</p>\n<pre><code>&lt;content&gt;terraform {\n  required_providers {\n    aws = {\n      source  = &amp;quot;hashicorp/aws&amp;quot;\n      version = &amp;quot;~&amp;gt; 3.27&amp;quot;\n    }\n  }\n  required_version = &amp;quot;&amp;gt;= 0.14.7&amp;quot;\n}\n\ndata &amp;quot;aws_caller_identity&amp;quot; &amp;quot;current&amp;quot; {}\n\nresource &amp;quot;aws_s3_bucket&amp;quot; &amp;quot;inventory&amp;quot; {\n  bucket = &amp;quot;regula-example-${data.aws_caller_identity.current.account_id}&amp;quot;\n}\n</code></pre>\n<p>The code I'm using is pretty simple:</p>\n<pre><code>final ObjectMapper mapper = new XmlMapper()\nreturn (Bom)this.mapper.readValue(reader, Bom.class);\n</code></pre>\n<p>And I'm always getting the next error, I tried to modify the Content, but not pretty sure, what could be the error, any ideas?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1637123426,"post_id":69994987,"comment_id":123739157,"body_markdown":"Also posted on https://www.reddit.com/r/Firebase/comments/qvgazm/is_it_possible_to_add_childs_while_keeping_old/","body":"Also posted on <a href=\"https://www.reddit.com/r/Firebase/comments/qvgazm/is_it_possible_to_add_childs_while_keeping_old/\" rel=\"nofollow noreferrer\">reddit.com/r/Firebase/comments/qvgazm/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637091928,"creation_date":1637091928,"answer_id":69995206,"question_id":69994987,"body_markdown":"Keys are by definition unique within their parent, so you can&#39;t have multiple child nodes named `Coordinate X` under a single parent.\r\n\r\nThe idiomatic approach for this is to create a list of uniquely named child nodes, by calling `push` for every set of coordinates. \r\n\r\nIf you&#39;re using the Android SDK (given that you tagged with Android), that&#39;d be:\r\n\r\n```\r\nDatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;Path 1&quot;);\r\nMap coordinates = new HashMap();\r\ncoordinates.put(&quot;X&quot;, 123);\r\ncoordinates.puth(&quot;Y&quot;, 456);\r\nref.push().setValue(coordinates);\r\n```\r\n\r\n\r\nAlso see the Firebase documentation on [reading and writing lists of data](https://firebase.google.com/docs/database/android/lists-of-data#append_to_a_list_of_data).","title":"Is it possible to add childs while keeping old ones using Firebase databse in Android Studio?","body":"<p>Keys are by definition unique within their parent, so you can't have multiple child nodes named <code>Coordinate X</code> under a single parent.</p>\n<p>The idiomatic approach for this is to create a list of uniquely named child nodes, by calling <code>push</code> for every set of coordinates.</p>\n<p>If you're using the Android SDK (given that you tagged with Android), that'd be:</p>\n<pre><code>DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;Path 1&quot;);\nMap coordinates = new HashMap();\ncoordinates.put(&quot;X&quot;, 123);\ncoordinates.puth(&quot;Y&quot;, 456);\nref.push().setValue(coordinates);\n</code></pre>\n<p>Also see the Firebase documentation on <a href=\"https://firebase.google.com/docs/database/android/lists-of-data#append_to_a_list_of_data\" rel=\"nofollow noreferrer\">reading and writing lists of data</a>.</p>\n"}],"owner":{"account_id":23359217,"reputation":21,"user_id":17431739,"display_name":"Filipe Fontes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637091928,"creation_date":1637090787,"question_id":69994987,"body_markdown":"I am saving coordinates from a list in Firebase using smartphone sensors. The X is being saved on a child called &quot;Coordinate X&quot; and Y on a child called &quot;Coordinate Y&quot;. Both of these child are inside a child called &quot;Path 1&quot;.\r\n\r\nWhat I want is: everytime I run the app to add coordinates but in another child with the same name, like this --&gt;\r\n\r\nHow it really is:\r\n[enter image description here][1]\r\n\r\nHow I want it:\r\n[enter image description here][2]\r\n\r\nRight now, every time I run the app it overwrites the childs coordinates X and Y. Every time I run the app I want to add two more child &quot;Coordinate X&quot; and &quot;Coordinate Y&quot; with the new coordinates.\r\nI tried using push() but it is hard to understand what is the new data and old data and it really didn&#39;t split the coordinates per app run.\r\n\r\nI am sorry if I didn&#39;t explain well. Thank you!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QMUQT.png\r\n  [2]: https://i.stack.imgur.com/HagLR.png","title":"Is it possible to add childs while keeping old ones using Firebase databse in Android Studio?","body":"<p>I am saving coordinates from a list in Firebase using smartphone sensors. The X is being saved on a child called &quot;Coordinate X&quot; and Y on a child called &quot;Coordinate Y&quot;. Both of these child are inside a child called &quot;Path 1&quot;.</p>\n<p>What I want is: everytime I run the app to add coordinates but in another child with the same name, like this --&gt;</p>\n<p>How it really is:\n<a href=\"https://i.stack.imgur.com/QMUQT.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>How I want it:\n<a href=\"https://i.stack.imgur.com/HagLR.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Right now, every time I run the app it overwrites the childs coordinates X and Y. Every time I run the app I want to add two more child &quot;Coordinate X&quot; and &quot;Coordinate Y&quot; with the new coordinates.\nI tried using push() but it is hard to understand what is the new data and old data and it really didn't split the coordinates per app run.</p>\n<p>I am sorry if I didn't explain well. Thank you!</p>\n"},{"tags":["java","random"],"answers":[{"tags":[],"owner":{"account_id":17032932,"reputation":1632,"user_id":13179199,"display_name":"Erik McKelvey"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1637091880,"creation_date":1637091880,"answer_id":69995196,"question_id":69995097,"body_markdown":"You are adding the value of the char `,`, which has value 44 to each double. You can test this using:\r\n\r\n    System.out.println(0 + &#39;,&#39;);\r\n\r\nOutput: `44`\r\n\r\nTo fix this you can simply remove the `+ &#39;,&#39;`\r\n","title":"Java Random Double Array from -50 to 50","body":"<p>You are adding the value of the char <code>,</code>, which has value 44 to each double. You can test this using:</p>\n<pre><code>System.out.println(0 + ',');\n</code></pre>\n<p>Output: <code>44</code></p>\n<p>To fix this you can simply remove the <code>+ ','</code></p>\n"}],"owner":{"account_id":22292407,"reputation":31,"user_id":16518995,"display_name":"crlav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1637146004,"accepted_answer_id":69995196,"answer_count":1,"score":-1,"last_activity_date":1637091880,"creation_date":1637091417,"question_id":69995097,"body_markdown":"I need to populate an array with random numbers from -50 to 50 and need to use Math.random(). Here is my current code:\r\n\r\n    double[] randomNums = new double[5];\r\n\t\r\n\tfor (int i = 0; i &lt; randomNums.length; i++) {\r\n\t\trandomNums[i] = 100 * Math.random() - 50;\r\n\t}\r\n    for (double i: randomNums) {\r\n\t\tSystem.out.println(i + &#39;,&#39;);\r\n\t}\r\n\r\nOutput:\r\n```none\r\n-5.836717454677796,\r\n44.07635593282988,\r\n23.650145270722884,\r\n93.00810678750743,\r\n54.0536237451922\r\n```\r\n\r\nWhy is this going above 50?","title":"Java Random Double Array from -50 to 50","body":"<p>I need to populate an array with random numbers from -50 to 50 and need to use Math.random(). Here is my current code:</p>\n<pre><code>double[] randomNums = new double[5];\n\nfor (int i = 0; i &lt; randomNums.length; i++) {\n    randomNums[i] = 100 * Math.random() - 50;\n}\nfor (double i: randomNums) {\n    System.out.println(i + ',');\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-5.836717454677796,\n44.07635593282988,\n23.650145270722884,\n93.00810678750743,\n54.0536237451922\n</code></pre>\n<p>Why is this going above 50?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1637084781,"post_id":69993692,"comment_id":123729742,"body_markdown":"Does this answer your question? [Android: checkbox listener](https://stackoverflow.com/questions/8386832/android-checkbox-listener)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8386832/android-checkbox-listener\">Android: checkbox listener</a>"},{"owner":{"display_name":"user16620045"},"score":0,"creation_date":1637084954,"post_id":69993692,"comment_id":123729803,"body_markdown":"Sorry, but no. I can save switch instance state but i cannot change background.","body":"Sorry, but no. I can save switch instance state but i cannot change background."},{"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1637087735,"post_id":69993692,"comment_id":123730850,"body_markdown":"yes you can, is literally the answer someone gave you below, use `setOnCheckedChangeListener` instead of click listener","body":"yes you can, is literally the answer someone gave you below, use <code>setOnCheckedChangeListener</code> instead of click listener"}],"answers":[{"tags":[],"owner":{"account_id":10099136,"reputation":46,"user_id":11598715,"display_name":"Sidharth Shambu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637091834,"creation_date":1637086326,"answer_id":69994152,"question_id":69993692,"body_markdown":"You needn&#39;t set the [SwitchCompat][1] if its changed, its redundant. Also `SharedPreferences.Editor` was initialized wrong.\r\nTry this\r\n```\r\npublic class MainActivity extends AppCompatActivity implements CompoundButton.OnCheckedChangeListener {\r\n\r\n    View parentView;\r\n    SwitchCompat switchCompat;\r\n\tSharedPreferences prefs;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        switchCompat = findViewById(R.id.switchCompat);\r\n        parentView = findViewById(R.id.parentView);\r\n\r\n        prefs = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\r\n        switchCompat.setChecked(prefs.getBoolean(&quot;value&quot;, false));\r\n        if (prefs.getBoolean(&quot;value&quot;, false)) { \r\n            parentView.setBackgroundResource(R.drawable.black);\r\n         } else {\r\n            parentView.setBackgroundResource(R.drawable.white);\r\n         }\r\n        switchCompat.setOnCheckedChangeListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n    \t\tif(buttonView.getId() == R.id.switchCompat) {\r\n        \t\tif(isChecked) {\r\n            \t  parentView.setImageResource(R.drawable.black);\r\n                  SharedPreferences.Editor ed = prefs.edit();\r\n                  ed.putBoolean(&quot;value&quot;, true);\r\n                  ed.apply();\r\n                } else {\r\n            \t  parentView.setImageResource(R.drawable.white);\r\n                  SharedPreferences.Editor ed = prefs.edit();\r\n                  ed.putBoolean(&quot;value&quot;, false);\r\n                  ed.apply();\r\n                }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://developer.android.com/reference/androidx/appcompat/widget/SwitchCompat","title":"How to change activity background image using switch?","body":"<p>You needn't set the <a href=\"https://developer.android.com/reference/androidx/appcompat/widget/SwitchCompat\" rel=\"nofollow noreferrer\">SwitchCompat</a> if its changed, its redundant. Also <code>SharedPreferences.Editor</code> was initialized wrong.\nTry this</p>\n<pre><code>public class MainActivity extends AppCompatActivity implements CompoundButton.OnCheckedChangeListener {\n\n    View parentView;\n    SwitchCompat switchCompat;\n    SharedPreferences prefs;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        switchCompat = findViewById(R.id.switchCompat);\n        parentView = findViewById(R.id.parentView);\n\n        prefs = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\n        switchCompat.setChecked(prefs.getBoolean(&quot;value&quot;, false));\n        if (prefs.getBoolean(&quot;value&quot;, false)) { \n            parentView.setBackgroundResource(R.drawable.black);\n         } else {\n            parentView.setBackgroundResource(R.drawable.white);\n         }\n        switchCompat.setOnCheckedChangeListener(this);\n    }\n\n    @Override\n    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n            if(buttonView.getId() == R.id.switchCompat) {\n                if(isChecked) {\n                  parentView.setImageResource(R.drawable.black);\n                  SharedPreferences.Editor ed = prefs.edit();\n                  ed.putBoolean(&quot;value&quot;, true);\n                  ed.apply();\n                } else {\n                  parentView.setImageResource(R.drawable.white);\n                  SharedPreferences.Editor ed = prefs.edit();\n                  ed.putBoolean(&quot;value&quot;, false);\n                  ed.apply();\n                }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user16620045"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69994152,"answer_count":1,"score":0,"last_activity_date":1637091834,"creation_date":1637084176,"question_id":69993692,"body_markdown":"I have two **images** (not colors) called ```black``` and ```white```. I&#39;ve written this code so far:\r\n```\r\npublic class MainActivity extends AppCompatActivity\r\n{\r\n    View parentView;\r\n    SwitchCompat switchCompat;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        switchCompat = findViewById(R.id.switchCompat);\r\n        parentView = findViewById(R.id.parentView);\r\n\r\n        SharedPreferences prefs = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\r\n        switchCompat.setChecked(prefs.getBoolean(&quot;value&quot;, false);\r\n        \r\n        switchCompat.setOnClickListener(view -&gt; {\r\n            if(switchCompat.isChecked()) {\r\n               parentView.setImageResource(R.drawable.black);\r\n               SharedPreferences.Editor ed = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\r\n               ed.putBoolean(&quot;value&quot;, true);\r\n               ed.apply();\r\n               switchCompat.setChecked(true);\r\n            } else {\r\n               parentView.setImageResource(R.drawable.white);\r\n               SharedPreferences.Editor ed = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\r\n               ed.putBoolean(&quot;value&quot;, false);\r\n               ed.apply();\r\n               switchCompat.setChecked(false);\r\n            }\r\n        });\r\n    }\r\n```\r\nDefault background is white.\r\nAs you see, if the user check switch on the background should be black, but this doesn&#39;t work. Do you know any solution?\r\n","title":"How to change activity background image using switch?","body":"<p>I have two <strong>images</strong> (not colors) called <code>black</code> and <code>white</code>. I've written this code so far:</p>\n<pre><code>public class MainActivity extends AppCompatActivity\n{\n    View parentView;\n    SwitchCompat switchCompat;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        switchCompat = findViewById(R.id.switchCompat);\n        parentView = findViewById(R.id.parentView);\n\n        SharedPreferences prefs = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\n        switchCompat.setChecked(prefs.getBoolean(&quot;value&quot;, false);\n        \n        switchCompat.setOnClickListener(view -&gt; {\n            if(switchCompat.isChecked()) {\n               parentView.setImageResource(R.drawable.black);\n               SharedPreferences.Editor ed = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\n               ed.putBoolean(&quot;value&quot;, true);\n               ed.apply();\n               switchCompat.setChecked(true);\n            } else {\n               parentView.setImageResource(R.drawable.white);\n               SharedPreferences.Editor ed = getSharedPreferences(&quot;save&quot;, MODE_PRIVATE);\n               ed.putBoolean(&quot;value&quot;, false);\n               ed.apply();\n               switchCompat.setChecked(false);\n            }\n        });\n    }\n</code></pre>\n<p>Default background is white.\nAs you see, if the user check switch on the background should be black, but this doesn't work. Do you know any solution?</p>\n"},{"tags":["java","sql-server","hibernate","jpa","jbpm"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1637086708,"post_id":69994023,"comment_id":123730464,"body_markdown":"I added a few comments but didn&#39;t notice the logs. Since in the logs it is deleting everything I would probably suspect something related to indexes on the database. What is the query that Hibernate is using to fetch `getStages()` I would start there checking whether the query actually returns what is desired if not it is probably something on the DB side","body":"I added a few comments but didn&#39;t notice the logs. Since in the logs it is deleting everything I would probably suspect something related to indexes on the database. What is the query that Hibernate is using to fetch <code>getStages()</code> I would start there checking whether the query actually returns what is desired if not it is probably something on the DB side"},{"owner":{"account_id":7897306,"reputation":570,"user_id":5965533,"display_name":"Dr Dave"},"score":0,"creation_date":1637090462,"post_id":69994023,"comment_id":123731758,"body_markdown":"I am currently adding an explicit position field to Stage to orderBy it.  There was no explicit index field for Stage, but there was an index in the annotations that may have been mine (but I removed in favor of the position field in Stage).  I&#39;ll try to post the GET later when I do another trace. and thanks for the insight!","body":"I am currently adding an explicit position field to Stage to orderBy it.  There was no explicit index field for Stage, but there was an index in the annotations that may have been mine (but I removed in favor of the position field in Stage).  I&#39;ll try to post the GET later when I do another trace. and thanks for the insight!"}],"answers":[{"tags":[],"owner":{"account_id":7897306,"reputation":570,"user_id":5965533,"display_name":"Dr Dave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637091774,"creation_date":1637091774,"answer_id":69995174,"question_id":69994023,"body_markdown":"I was able to solve this by adding a position field on Stage and the annotation @javax.persistence.OrderBy(&quot;position&quot;) to the definition of the List of stages.","title":"java.util.List being stored out of order by Hibernate after .add(position, item)","body":"<p>I was able to solve this by adding a position field on Stage and the annotation @javax.persistence.OrderBy(&quot;position&quot;) to the definition of the List of stages.</p>\n"}],"owner":{"account_id":7897306,"reputation":570,"user_id":5965533,"display_name":"Dr Dave"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1637091774,"creation_date":1637085755,"question_id":69994023,"body_markdown":"I have a JBPM casefile application using Java classes where a workflow has stages and the data gets persisted by Hibernate in an SQL Server database:\r\n```\r\n@javax.persistence.Entity\r\n@javax.persistence.Table(name = &quot;WORKFLOW&quot;)\r\npublic class Workflow implements java.io.Serializable {\r\n\r\n\t@javax.persistence.OneToMany(cascade = {javax.persistence.CascadeType.ALL})\r\n\t@org.hibernate.annotations.LazyCollection(org.hibernate.annotations.LazyCollectionOption.FALSE)\r\n\tprivate java.util.List&lt;Stage&gt; stages;\r\n\r\n...\r\n```\r\nWhen I do a workflow.add(position, stage) the stage is added as the position+1 entry in the list (as expected).  Hibernate persists the java.util.List in our SQL Server database using a join table called WORKFLOW_STAGES with a workflow id and a stage id as its columns.  The list with the added element is always persisted as if it were the last element so even if the added element was added at position 1 a retrieved workflow has it at the end of the list.  I.e., if I were storing Integers instead of instances of Stage\r\n```\r\noriginal workflow.getStages() = 10, 5, 8\r\nworkflow.getStage().add(1, 4) =&gt; 10, 4, 5, 8 in memory but\r\nwhen retrieved from the DB (using Hibernate) the new element has been moved to the end =&gt; 10, 5, 8, 4\r\n```\r\nThe log looks WORKFLOW_STAGES is redone when the application persists so I am surprised it is not persisting the stages in the right order.\r\n```\r\n2021-11-16 12:26:37,253 INFO  [stdout] (default task-164) Hibernate: delete from WORKFLOW_STAGES where Workflow_ID=?\r\n2021-11-16 12:26:37,260 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,261 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,261 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\r\n```\r\nHow do I change my Hibernate tags to persist the List correctly, ie with the elements in the correct order after the add(position, element)?  \r\n ","title":"java.util.List being stored out of order by Hibernate after .add(position, item)","body":"<p>I have a JBPM casefile application using Java classes where a workflow has stages and the data gets persisted by Hibernate in an SQL Server database:</p>\n<pre><code>@javax.persistence.Entity\n@javax.persistence.Table(name = &quot;WORKFLOW&quot;)\npublic class Workflow implements java.io.Serializable {\n\n    @javax.persistence.OneToMany(cascade = {javax.persistence.CascadeType.ALL})\n    @org.hibernate.annotations.LazyCollection(org.hibernate.annotations.LazyCollectionOption.FALSE)\n    private java.util.List&lt;Stage&gt; stages;\n\n...\n</code></pre>\n<p>When I do a workflow.add(position, stage) the stage is added as the position+1 entry in the list (as expected).  Hibernate persists the java.util.List in our SQL Server database using a join table called WORKFLOW_STAGES with a workflow id and a stage id as its columns.  The list with the added element is always persisted as if it were the last element so even if the added element was added at position 1 a retrieved workflow has it at the end of the list.  I.e., if I were storing Integers instead of instances of Stage</p>\n<pre><code>original workflow.getStages() = 10, 5, 8\nworkflow.getStage().add(1, 4) =&gt; 10, 4, 5, 8 in memory but\nwhen retrieved from the DB (using Hibernate) the new element has been moved to the end =&gt; 10, 5, 8, 4\n</code></pre>\n<p>The log looks WORKFLOW_STAGES is redone when the application persists so I am surprised it is not persisting the stages in the right order.</p>\n<pre><code>2021-11-16 12:26:37,253 INFO  [stdout] (default task-164) Hibernate: delete from WORKFLOW_STAGES where Workflow_ID=?\n2021-11-16 12:26:37,260 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,261 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,261 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n2021-11-16 12:26:37,262 INFO  [stdout] (default task-164) Hibernate: insert into WORKFLOW_STAGES (Workflow_ID, stages_ID) values (?, ?)\n</code></pre>\n<p>How do I change my Hibernate tags to persist the List correctly, ie with the elements in the correct order after the add(position, element)?</p>\n"},{"tags":["java","oracle","jpa","jakarta-ee"],"owner":{"account_id":18025193,"reputation":55,"user_id":13101375,"display_name":"Nikolay Grigoryev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1637091750,"creation_date":1637091750,"question_id":69995171,"body_markdown":"I could not find a simple example binary xml + JPA. The [Oracle documentation](https://docs.oracle.com/database/121/ADXDK/adx_j_xmlbin.htm#ADXDK4440) only shows excerpts of code. \r\n\r\nI have Entity\r\n\r\n```\r\n@Entity\r\npublic class XMLentity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Lob\r\n    @Column(name = &quot;MYXML&quot;, columnDefinition = &quot;XMLType&quot;)\r\n    private byte[] xml;\r\n\r\n```\r\n\r\nI have Entity Fruit\r\n\r\n```\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Fruit {\r\n\r\n    @XmlAttribute\r\n    int id;\r\n\r\n    String name;\r\n\r\n    String price;\r\n```\r\n\r\nand parser\r\n\r\n```\r\npublic class Demo {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        JAXBContext jc = JAXBContext.newInstance(Fruit.class);\r\n\r\n        Unmarshaller unmarshaller = jc.createUnmarshaller();\r\n        File xml = new File(&quot;fruit.xml&quot;);\r\n        Fruit fruit = (Fruit) unmarshaller.unmarshal(xml);\r\n\r\n        Marshaller marshaller = jc.createMarshaller();\r\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n        marshaller.marshal(fruit, System.out);\r\n    }\r\n\r\n}\r\n```\r\nHow to insert fruit into Oracle table?\r\nP.S. I want to follow the [Oracle recommendation](https://docs.oracle.com/database/121/ADXDB/xdb_storage.htm#ADXDB6350): Starting with Oracle Database 12c Release 1 (12.1.0.1), the unstructured (CLOB) storage model for XMLType is deprecated. Use binary XML storage instead. ","title":"How to insert binary XML into Oracle table?","body":"<p>I could not find a simple example binary xml + JPA. The <a href=\"https://docs.oracle.com/database/121/ADXDK/adx_j_xmlbin.htm#ADXDK4440\" rel=\"nofollow noreferrer\">Oracle documentation</a> only shows excerpts of code.</p>\n<p>I have Entity</p>\n<pre><code>@Entity\npublic class XMLentity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Lob\n    @Column(name = &quot;MYXML&quot;, columnDefinition = &quot;XMLType&quot;)\n    private byte[] xml;\n\n</code></pre>\n<p>I have Entity Fruit</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\npublic class Fruit {\n\n    @XmlAttribute\n    int id;\n\n    String name;\n\n    String price;\n</code></pre>\n<p>and parser</p>\n<pre><code>public class Demo {\n\n    public static void main(String[] args) throws Exception {\n        JAXBContext jc = JAXBContext.newInstance(Fruit.class);\n\n        Unmarshaller unmarshaller = jc.createUnmarshaller();\n        File xml = new File(&quot;fruit.xml&quot;);\n        Fruit fruit = (Fruit) unmarshaller.unmarshal(xml);\n\n        Marshaller marshaller = jc.createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n        marshaller.marshal(fruit, System.out);\n    }\n\n}\n</code></pre>\n<p>How to insert fruit into Oracle table?\nP.S. I want to follow the <a href=\"https://docs.oracle.com/database/121/ADXDB/xdb_storage.htm#ADXDB6350\" rel=\"nofollow noreferrer\">Oracle recommendation</a>: Starting with Oracle Database 12c Release 1 (12.1.0.1), the unstructured (CLOB) storage model for XMLType is deprecated. Use binary XML storage instead.</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1637081075,"post_id":69992516,"comment_id":123728158,"body_markdown":"Are you aware that you are giving your data as single string and evaluate it as Spring Expression, whose syntax is nowhere near JSON/YAML? Is this on purpose?","body":"Are you aware that you are giving your data as single string and evaluate it as Spring Expression, whose syntax is nowhere near JSON/YAML? Is this on purpose?"},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1637081642,"post_id":69992516,"comment_id":123728429,"body_markdown":"In general, complex values should be loaded via `@ConfigurationProperties` and it is unclear why you give the hard requirement of doing it via `@Value`. Would you drop that requirement, [this question](https://stackoverflow.com/q/24917194/347964) would give you multiple answers for different use-cases.","body":"In general, complex values should be loaded via <code>@ConfigurationProperties</code> and it is unclear why you give the hard requirement of doing it via <code>@Value</code>. Would you drop that requirement, <a href=\"https://stackoverflow.com/q/24917194/347964\">this question</a> would give you multiple answers for different use-cases."},{"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"score":0,"creation_date":1637085924,"post_id":69992516,"comment_id":123730194,"body_markdown":"I have used this way (created JSON as a string) because an answer in the same link you provide ([here](https://stackoverflow.com/a/65762810/13464279)). If there is another way using `@Value` please tell me. Also use `@Value` instead of `@ConfigurationProperties` is for simplicity.","body":"I have used this way (created JSON as a string) because an answer in the same link you provide (<a href=\"https://stackoverflow.com/a/65762810/13464279\">here</a>). If there is another way using <code>@Value</code> please tell me. Also use <code>@Value</code> instead of <code>@ConfigurationProperties</code> is for simplicity."}],"answers":[{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637091648,"creation_date":1637082984,"answer_id":69993451,"question_id":69992516,"body_markdown":"With `@Value` annotation:\r\n1. You should not map (yaml or properties &quot;map&quot;) keys to `Integer`, prefer `String`.\r\n\r\n2. (Problem) Nesting Lists...\r\n\r\n..still, I am quite sure it is possible with (crazy SpEL(l) `@Value`).\r\n\r\n[baeldung-article](https://www.baeldung.com/spring-value-annotation#using-value-with-maps)\r\n\r\n\r\n----------\r\n\r\n\r\nBut [Type-safe Configuration Properties](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties) produce nice results quickly:\r\n\r\nApp.java:\r\n\r\n    @SpringBootApplication\r\n    @ConfigurationPropertiesScan\r\n    public class App {\r\n\r\n\t  public static void main(String[] args) {\r\n\t\tSpringApplication.run(App.class, args);\r\n\t  }\r\n\r\n\t  @Bean\r\n\t  CommandLineRunner runner(@Autowired My bar) {\r\n\t\treturn args -&gt;  System.out.println(bar);\r\n\t  }\r\n    }\r\n\r\nMy.java:\r\n\r\n    @ConfigurationProperties(&quot;my&quot;)\r\n    public class My {\r\n        private Map&lt;Integer, List&lt;Integer&gt;&gt; data = new HashMap&lt;&gt;();\r\n        // Getter + Setter!!!\r\n    }\r\n\r\nWith this &quot;fixed&quot; yaml:\r\n\r\n    my:\r\n      data: {\r\n        1: [1,2,3],\r\n        2: [1,2,3]\r\n      }\r\n\r\nPrints:\r\n\r\n    My(data={1=[1, 2, 3], 2=[1, 2, 3]})\r\n\r\n\r\n----------\r\n*EDIT*:\r\n\r\nThe &quot;best&quot;, I got with `@Value` so far, is:\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    @Value(&quot;#{${other.data}}&quot;) Map&lt;?, ?&gt; other; // raw map!! :-)\r\n\r\nwith this yaml(-like):\r\n\r\n    other:\r\n      data: &#39;{\r\n       1: &#39;&#39;[1,2,3]&#39;&#39;,\r\n       2: &#39;&#39;[1,2,3]&#39;&#39;\r\n      }&#39;\r\n\r\nPrints:\r\n\r\n    {1=[1,2,3], 2=[1,2,3]}\r\n(jdk:8, maven:3.8.2, spring-boot:2.5.6)","title":"Create Map with List from application YML in Spring Boot using @Value","body":"<p>With <code>@Value</code> annotation:</p>\n<ol>\n<li><p>You should not map (yaml or properties &quot;map&quot;) keys to <code>Integer</code>, prefer <code>String</code>.</p>\n</li>\n<li><p>(Problem) Nesting Lists...</p>\n</li>\n</ol>\n<p>..still, I am quite sure it is possible with (crazy SpEL(l) <code>@Value</code>).</p>\n<p><a href=\"https://www.baeldung.com/spring-value-annotation#using-value-with-maps\" rel=\"nofollow noreferrer\">baeldung-article</a></p>\n<hr />\n<p>But <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties\" rel=\"nofollow noreferrer\">Type-safe Configuration Properties</a> produce nice results quickly:</p>\n<p>App.java:</p>\n<pre><code>@SpringBootApplication\n@ConfigurationPropertiesScan\npublic class App {\n\n  public static void main(String[] args) {\n    SpringApplication.run(App.class, args);\n  }\n\n  @Bean\n  CommandLineRunner runner(@Autowired My bar) {\n    return args -&gt;  System.out.println(bar);\n  }\n}\n</code></pre>\n<p>My.java:</p>\n<pre><code>@ConfigurationProperties(&quot;my&quot;)\npublic class My {\n    private Map&lt;Integer, List&lt;Integer&gt;&gt; data = new HashMap&lt;&gt;();\n    // Getter + Setter!!!\n}\n</code></pre>\n<p>With this &quot;fixed&quot; yaml:</p>\n<pre><code>my:\n  data: {\n    1: [1,2,3],\n    2: [1,2,3]\n  }\n</code></pre>\n<p>Prints:</p>\n<pre><code>My(data={1=[1, 2, 3], 2=[1, 2, 3]})\n</code></pre>\n<hr />\n<p><em>EDIT</em>:</p>\n<p>The &quot;best&quot;, I got with <code>@Value</code> so far, is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value(&quot;#{${other.data}}&quot;) Map&lt;?, ?&gt; other; // raw map!! :-)\n</code></pre>\n<p>with this yaml(-like):</p>\n<pre><code>other:\n  data: '{\n   1: ''[1,2,3]'',\n   2: ''[1,2,3]''\n  }'\n</code></pre>\n<p>Prints:</p>\n<pre><code>{1=[1,2,3], 2=[1,2,3]}\n</code></pre>\n<p>(jdk:8, maven:3.8.2, spring-boot:2.5.6)</p>\n"}],"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637091648,"creation_date":1637078935,"question_id":69992516,"body_markdown":"I&#39;m trying to create a `Map&lt;Integer,List&lt;Integer&gt;&gt;` variable into Java service.\r\n\r\nI have this .yml:\r\n\r\n```yml\r\nmy:\r\n  data:\r\n    &#39;{\r\n      1:[1,2,3],\r\n      2:[1,2,3]\r\n    }&#39;\r\n```\r\n\r\nAnd into Java code:\r\n\r\n```java\r\n@Value(&quot;#{${my.data}}&quot;)\r\nprotected Map&lt;Integer,List&lt;Integer&gt;&gt; bar;\r\n```\r\n\r\nBut it fails when I run the project.\r\n\r\nActually the error thrown is something like:\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;controller&#39; defined in file ...\r\n```\r\n\r\nBut it has to be by dependency injection, it fails when create the `@Value` in the `@Service` and the error is propagated. Also I have tested these values\r\n\r\n```\r\nmy:\r\n  data:\r\n    &#39;{\r\n      1:\r\n      - 1\r\n      - 2,\r\n      2:\r\n      - 1\r\n    }&#39;\r\n```\r\n\r\nAnd it creates a lists with values `-3` and `-1`.\r\n\r\n```bash\r\n| key | value |\r\n+-----+-------+\r\n|  1  |  [-3] |\r\n|  2  |  [-1] |\r\n+-----+-------+\r\n```\r\n\r\nSo the error thrown before has to be due to the definition of the list in the first `yml`.\r\n\r\nAlso I&#39;ve tested using `List&lt;Integer&gt;` and `int[]` into the `Map` object.\r\n\r\nSo, what&#39;s the correct syntax to create `Map&lt;Integer, List&lt;Integer&gt;&gt;`? I assumed it was like a JSON object `{ key: [v1, v2] }` but it seems to fails.\r\n\r\nThanks in advance.","title":"Create Map with List from application YML in Spring Boot using @Value","body":"<p>I'm trying to create a <code>Map&lt;Integer,List&lt;Integer&gt;&gt;</code> variable into Java service.</p>\n<p>I have this .yml:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>my:\n  data:\n    '{\n      1:[1,2,3],\n      2:[1,2,3]\n    }'\n</code></pre>\n<p>And into Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value(&quot;#{${my.data}}&quot;)\nprotected Map&lt;Integer,List&lt;Integer&gt;&gt; bar;\n</code></pre>\n<p>But it fails when I run the project.</p>\n<p>Actually the error thrown is something like:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'controller' defined in file ...\n</code></pre>\n<p>But it has to be by dependency injection, it fails when create the <code>@Value</code> in the <code>@Service</code> and the error is propagated. Also I have tested these values</p>\n<pre><code>my:\n  data:\n    '{\n      1:\n      - 1\n      - 2,\n      2:\n      - 1\n    }'\n</code></pre>\n<p>And it creates a lists with values <code>-3</code> and <code>-1</code>.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>| key | value |\n+-----+-------+\n|  1  |  [-3] |\n|  2  |  [-1] |\n+-----+-------+\n</code></pre>\n<p>So the error thrown before has to be due to the definition of the list in the first <code>yml</code>.</p>\n<p>Also I've tested using <code>List&lt;Integer&gt;</code> and <code>int[]</code> into the <code>Map</code> object.</p>\n<p>So, what's the correct syntax to create <code>Map&lt;Integer, List&lt;Integer&gt;&gt;</code>? I assumed it was like a JSON object <code>{ key: [v1, v2] }</code> but it seems to fails.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-sleuth"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637091328,"creation_date":1637091328,"answer_id":69995082,"question_id":69994509,"body_markdown":"Check the [compatibility matrix](https://spring.io/projects/spring-cloud#adding-spring-cloud-to-an-existing-spring-boot-application), you should use Spring Cloud 2020.0.x aka Ilford (Sleuth 3.x) with Spring Boot 2.4 (or 2.5).\r\n\r\nSleuth 2.2.8 is Spring Cloud Hoxton, it is not compatible with Boot 2.4.","title":"bean &#39;spring.sleuth.baggage-keys&#39; already defined","body":"<p>Check the <a href=\"https://spring.io/projects/spring-cloud#adding-spring-cloud-to-an-existing-spring-boot-application\" rel=\"nofollow noreferrer\">compatibility matrix</a>, you should use Spring Cloud 2020.0.x aka Ilford (Sleuth 3.x) with Spring Boot 2.4 (or 2.5).</p>\n<p>Sleuth 2.2.8 is Spring Cloud Hoxton, it is not compatible with Boot 2.4.</p>\n"}],"owner":{"account_id":2280874,"reputation":752,"user_id":2005984,"display_name":"Josh Austin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1728,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69995082,"answer_count":1,"score":1,"last_activity_date":1637091328,"creation_date":1637088127,"question_id":69994509,"body_markdown":"I&#39;m in the midst of upgrading an app from Spring Boot 1.x to Spring Boot 2.x.  When I attempted to run an existing (and previously working) unit test, I saw the following output:\r\n```txt\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nThe bean &#39;spring.sleuth.baggage-keys&#39;, defined in class path resource [org/springframework/cloud/sleuth/autoconfig/brave/BraveBaggageConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/cloud/sleuth/autoconfig/TraceBaggageConfiguration.class] and overriding is disabled.\r\n\r\nAction:\r\n\r\nConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\r\n```\r\n\r\nMy Gradle project uses the following implementation: `&#39;org.springframework.cloud:spring-cloud-sleuth-core:2.2.8.RELEASE&#39;`\r\n\r\nI tried checking with [the Gradle dependencies task](https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html) to make sure there were no conflicting versions of spring-cloud-sleuth-core and friends. I also looked at [this post](https://stackoverflow.com/questions/60294316/spring-sleuth-baggage-key-not-getting-propagated) and [this post](https://stackoverflow.com/questions/62614289/spring-sleuth-baggage-propagation-not-getting-propagated-working) and they didn&#39;t solve my problem.\r\n\r\nI need to avoid overriding beans, and I&#39;m currently constrained to Spring Boot 2.4.x for my deploy target.","title":"bean &#39;spring.sleuth.baggage-keys&#39; already defined","body":"<p>I'm in the midst of upgrading an app from Spring Boot 1.x to Spring Boot 2.x.  When I attempted to run an existing (and previously working) unit test, I saw the following output:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nThe bean 'spring.sleuth.baggage-keys', defined in class path resource [org/springframework/cloud/sleuth/autoconfig/brave/BraveBaggageConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/cloud/sleuth/autoconfig/TraceBaggageConfiguration.class] and overriding is disabled.\n\nAction:\n\nConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\n</code></pre>\n<p>My Gradle project uses the following implementation: <code>'org.springframework.cloud:spring-cloud-sleuth-core:2.2.8.RELEASE'</code></p>\n<p>I tried checking with <a href=\"https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html\" rel=\"nofollow noreferrer\">the Gradle dependencies task</a> to make sure there were no conflicting versions of spring-cloud-sleuth-core and friends. I also looked at <a href=\"https://stackoverflow.com/questions/60294316/spring-sleuth-baggage-key-not-getting-propagated\">this post</a> and <a href=\"https://stackoverflow.com/questions/62614289/spring-sleuth-baggage-propagation-not-getting-propagated-working\">this post</a> and they didn't solve my problem.</p>\n<p>I need to avoid overriding beans, and I'm currently constrained to Spring Boot 2.4.x for my deploy target.</p>\n"},{"tags":["java","math","geometry"],"answers":[{"tags":[],"owner":{"account_id":449564,"reputation":78054,"user_id":844416,"display_name":"MBo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637091292,"creation_date":1637091292,"answer_id":69995077,"question_id":69994894,"body_markdown":"For convex polygon you can use simple method - choose three top vertices, make triangle, then at every step make new triangle geting the topmost unused vertex (strip triangles up to down). Also [fan triangulation][1].\r\n\r\nIf polygon might be concave, you need more sophisticated approaches for **polygon triangulation** (note this is not the same as point cloud triangulation). [Wiki page][2] describes some algorithms in short.\r\n\r\nArbitrary found examples of Java implementation of ear-clipping: [one][3], [two][4]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Fan_triangulation\r\n  [2]: https://en.wikipedia.org/wiki/Polygon_triangulation\r\n  [3]: https://github.com/earcut4j/earcut4j\r\n  [4]: http://www.java2s.com/example/java/2d-graphics/computes-the-triangulation-of-a-polygon-with-earclipping-algorithm.html","title":"How can I calculate which verticies make up each triangle in a polygon?","body":"<p>For convex polygon you can use simple method - choose three top vertices, make triangle, then at every step make new triangle geting the topmost unused vertex (strip triangles up to down). Also <a href=\"https://en.wikipedia.org/wiki/Fan_triangulation\" rel=\"nofollow noreferrer\">fan triangulation</a>.</p>\n<p>If polygon might be concave, you need more sophisticated approaches for <strong>polygon triangulation</strong> (note this is not the same as point cloud triangulation). <a href=\"https://en.wikipedia.org/wiki/Polygon_triangulation\" rel=\"nofollow noreferrer\">Wiki page</a> describes some algorithms in short.</p>\n<p>Arbitrary found examples of Java implementation of ear-clipping: <a href=\"https://github.com/earcut4j/earcut4j\" rel=\"nofollow noreferrer\">one</a>, <a href=\"http://www.java2s.com/example/java/2d-graphics/computes-the-triangulation-of-a-polygon-with-earclipping-algorithm.html\" rel=\"nofollow noreferrer\">two</a></p>\n"}],"owner":{"account_id":21961343,"reputation":1,"user_id":16239192,"display_name":"Israel Aristide"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637091292,"creation_date":1637090181,"question_id":69994894,"body_markdown":"I am currently playing around with Opengl and I&#39;m trying to create a class that can automatically calculate the vertex buffer data and element buffer data for a polygon. \r\n\r\nHere is the code for creating the vertex data: \r\n```java\r\n\r\n        float centerangle = (float)(2*Math.PI / sides);\r\n        ArrayList verticies = new ArrayList&lt;Float&gt;();\r\n\r\n        for (int i=0; i&lt;sides; i++) {\r\n            float angle = (i*centerangle);\r\n            float x = (float)Math.round(Math.cos(ang))/2f;\r\n            float y = (float)Math.round(Math.sin(ang))/2f;\r\n            float z = 0.0f;\r\n\r\n            verticies.add(x);\r\n            verticies.add(y);\r\n            verticies.add(z);\r\n\r\n        }\r\n\r\n        return verticies;\r\n```\r\nGiven that `sides == 5` this method creates the following values:\r\n\r\n```\r\nfloat[] {\r\n    0.5, 0.0, 0.0,\r\n    0.0, 0.5, 0.0,\r\n   -0.5, 0.5, 0.0,\r\n   -0.5, -0.5, 0.0,\r\n    0.0, -0.5, 0.0\r\n}\r\n```\r\n\r\nI&#39;m trying to create a method that will now generate the element buffer data. As of right now i have it hard coded. As an example, for the pentagon the element buffer data looks like this:\r\n\r\n```java\r\n        new int[] {\r\n                1,2,3,\r\n                3,1,4,\r\n                0,1,4\r\n        };\r\n```\r\nThis creates 3 triangles [like so][1]\r\n\r\nSo my question is is there a way i can calculate the element buffer data for any polygon that my method creates? What would that look like?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5RSOD.png","title":"How can I calculate which verticies make up each triangle in a polygon?","body":"<p>I am currently playing around with Opengl and I'm trying to create a class that can automatically calculate the vertex buffer data and element buffer data for a polygon.</p>\n<p>Here is the code for creating the vertex data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n        float centerangle = (float)(2*Math.PI / sides);\n        ArrayList verticies = new ArrayList&lt;Float&gt;();\n\n        for (int i=0; i&lt;sides; i++) {\n            float angle = (i*centerangle);\n            float x = (float)Math.round(Math.cos(ang))/2f;\n            float y = (float)Math.round(Math.sin(ang))/2f;\n            float z = 0.0f;\n\n            verticies.add(x);\n            verticies.add(y);\n            verticies.add(z);\n\n        }\n\n        return verticies;\n</code></pre>\n<p>Given that <code>sides == 5</code> this method creates the following values:</p>\n<pre><code>float[] {\n    0.5, 0.0, 0.0,\n    0.0, 0.5, 0.0,\n   -0.5, 0.5, 0.0,\n   -0.5, -0.5, 0.0,\n    0.0, -0.5, 0.0\n}\n</code></pre>\n<p>I'm trying to create a method that will now generate the element buffer data. As of right now i have it hard coded. As an example, for the pentagon the element buffer data looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        new int[] {\n                1,2,3,\n                3,1,4,\n                0,1,4\n        };\n</code></pre>\n<p>This creates 3 triangles <a href=\"https://i.stack.imgur.com/5RSOD.png\" rel=\"nofollow noreferrer\">like so</a></p>\n<p>So my question is is there a way i can calculate the element buffer data for any polygon that my method creates? What would that look like?</p>\n"},{"tags":["java","arrays","recursion","methods"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1637079200,"post_id":69992528,"comment_id":123727337,"body_markdown":"Does it print &quot;infinite&quot; or just &quot;many times&quot;? Those are kind of different. You added 50 Mazda MX6 with 6 cylinders into your array, so when searching for entries in your array with 6 cylinders you should kind of expect that it will find those 50 objects and prints each one.","body":"Does it print &quot;infinite&quot; or just &quot;many times&quot;? Those are kind of different. You added 50 Mazda MX6 with 6 cylinders into your array, so when searching for entries in your array with 6 cylinders you should kind of expect that it will find those 50 objects and prints each one."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1637079240,"post_id":69992528,"comment_id":123727362,"body_markdown":"Your problem is using == instead of String.equals for comparing String values","body":"Your problem is using == instead of String.equals for comparing String values"},{"owner":{"account_id":23254102,"reputation":1,"user_id":17341419,"display_name":"Gilbert Arenas"},"score":0,"creation_date":1637079472,"post_id":69992528,"comment_id":123727472,"body_markdown":"@OHGODSPIDERS not infinite but many times yes.","body":"@OHGODSPIDERS not infinite but many times yes."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1637079858,"post_id":69992528,"comment_id":123727655,"body_markdown":"Like 50 times? As I said you have an array with 50 times `Car(3500, 6, &quot;Mazda&quot;, &quot;MX6&quot;)` in it, so when you tell your program to search and output all cars with 6 cylinders getting that car printed 50 times is just the correct answer. Did you even intent to fill your array with 50 times the same car?","body":"Like 50 times? As I said you have an array with 50 times <code>Car(3500, 6, &quot;Mazda&quot;, &quot;MX6&quot;)</code> in it, so when you tell your program to search and output all cars with 6 cylinders getting that car printed 50 times is just the correct answer. Did you even intent to fill your array with 50 times the same car?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637237364,"post_id":69992528,"comment_id":123775308,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637079342,"creation_date":1637079342,"answer_id":69992608,"question_id":69992528,"body_markdown":"Your problem is doing == compare with Strings, instead of string equals.\r\n\r\n       public static boolean Search(Car[] carsArray, Car carObject){\r\n          for(int i = 0; i &lt; carsArray.length; i++){\r\n             if(carObject.getMake().equals(carsArray[i].getMake()) &amp;&amp; \r\n             carObject.getModel().equals(carsArray[i].getModel()) &amp;&amp;\r\n             carObject.getCylinders() == carsArray[i].getCylinders() &amp;&amp;\r\n             carObject.getHorsePower() == carsArray[i].getHorsePower())\r\n                return true;\r\n          }\r\n          return false;\r\n\r\n","title":"Getting prints more than required in java","body":"<p>Your problem is doing == compare with Strings, instead of string equals.</p>\n<pre><code>   public static boolean Search(Car[] carsArray, Car carObject){\n      for(int i = 0; i &lt; carsArray.length; i++){\n         if(carObject.getMake().equals(carsArray[i].getMake()) &amp;&amp; \n         carObject.getModel().equals(carsArray[i].getModel()) &amp;&amp;\n         carObject.getCylinders() == carsArray[i].getCylinders() &amp;&amp;\n         carObject.getHorsePower() == carsArray[i].getHorsePower())\n            return true;\n      }\n      return false;\n</code></pre>\n"}],"owner":{"account_id":23254102,"reputation":1,"user_id":17341419,"display_name":"Gilbert Arenas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1637090549,"creation_date":1637078986,"question_id":69992528,"body_markdown":"I am working on a java code and I should use recursive methods and my methods should Search()  takes as parameters an array of Car objects ARR and a Car object C. This method \r\nshould return true if C is inside ARR, false otherwise. \r\nb, method findCylinders that takes as parameters an array of Car objects ARR and number of cylinder \r\nengine N. It should display all the cars that have N cylinder engine\r\nMy code is working fine but it keeps on printing the object many times.\r\n\r\n    public class Test_Car_Lab9{\r\n       public static void main(String [] args){\r\n          Car[] ARR = new Car[50];\r\n          for(int i = 0; i &lt; ARR.length; i++){\r\n             ARR[i] = new Car(3500, 6, &quot;Mazda&quot;, &quot;MX6&quot;);\r\n          }\r\n          Car C = new Car(4700, 8, &quot;Nissan&quot;, &quot;Patrol&quot;);\r\n          System.out.println(Search(ARR, C));\r\n          findCylinders(ARR, 6);\r\n       }\r\n       public static boolean Search(Car[] carsArray, Car carObject){\r\n          for(int i = 0; i &lt; carsArray.length; i++){\r\n             if(carObject.getMake() == carsArray[i].getMake() &amp;&amp; \r\n             carObject.getModel() == carsArray[i].getModel() &amp;&amp;\r\n             carObject.getCylinders() == carsArray[i].getCylinders() &amp;&amp;\r\n             carObject.getHorsePower() == carsArray[i].getHorsePower())\r\n                return true;\r\n          }\r\n          return false;\r\n       }\r\n       public static void findCylinders(Car[] carsArray, int numOfCylinders){\r\n          for(int i = 0; i &lt; carsArray.length; i++){\r\n             if(carsArray[i].getCylinders() == numOfCylinders)\r\n                carsArray[i].printCarData();   \r\n          }\r\n       }\r\n    }\r\nAny help is really appreciated.","title":"Getting prints more than required in java","body":"<p>I am working on a java code and I should use recursive methods and my methods should Search()  takes as parameters an array of Car objects ARR and a Car object C. This method\nshould return true if C is inside ARR, false otherwise.\nb, method findCylinders that takes as parameters an array of Car objects ARR and number of cylinder\nengine N. It should display all the cars that have N cylinder engine\nMy code is working fine but it keeps on printing the object many times.</p>\n<pre><code>public class Test_Car_Lab9{\n   public static void main(String [] args){\n      Car[] ARR = new Car[50];\n      for(int i = 0; i &lt; ARR.length; i++){\n         ARR[i] = new Car(3500, 6, &quot;Mazda&quot;, &quot;MX6&quot;);\n      }\n      Car C = new Car(4700, 8, &quot;Nissan&quot;, &quot;Patrol&quot;);\n      System.out.println(Search(ARR, C));\n      findCylinders(ARR, 6);\n   }\n   public static boolean Search(Car[] carsArray, Car carObject){\n      for(int i = 0; i &lt; carsArray.length; i++){\n         if(carObject.getMake() == carsArray[i].getMake() &amp;&amp; \n         carObject.getModel() == carsArray[i].getModel() &amp;&amp;\n         carObject.getCylinders() == carsArray[i].getCylinders() &amp;&amp;\n         carObject.getHorsePower() == carsArray[i].getHorsePower())\n            return true;\n      }\n      return false;\n   }\n   public static void findCylinders(Car[] carsArray, int numOfCylinders){\n      for(int i = 0; i &lt; carsArray.length; i++){\n         if(carsArray[i].getCylinders() == numOfCylinders)\n            carsArray[i].printCarData();   \n      }\n   }\n}\n</code></pre>\n<p>Any help is really appreciated.</p>\n"},{"tags":["java","sockets"],"comments":[{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1637090780,"post_id":69994874,"comment_id":123731866,"body_markdown":"How about just using [read](https://www.tutorialspoint.com/java/io/datainputstream_read.htm)?","body":"How about just using <a href=\"https://www.tutorialspoint.com/java/io/datainputstream_read.htm\" rel=\"nofollow noreferrer\">read</a>?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1637090785,"post_id":69994874,"comment_id":123731869,"body_markdown":"You provide almost no information but every class that extends from `InputStream` has bulk read methods like [`read(byte[] b, int off, int len)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html#read(byte%5B%5D,int,int)) and [`readAllBytes()`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html#readAllBytes()). What&#39;s wrong with them?","body":"You provide almost no information but every class that extends from <code>InputStream</code> has bulk read methods like <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html#read(byte%5B%5D,int,int)\" rel=\"nofollow noreferrer\"><code>read(byte[] b, int off, int len)</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html#readAllBytes()\" rel=\"nofollow noreferrer\"><code>readAllBytes()</code></a>. What&#39;s wrong with them?"}],"owner":{"account_id":23225994,"reputation":155,"user_id":17317537,"display_name":"Greenlight"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637090080,"creation_date":1637090080,"question_id":69994874,"body_markdown":"I use\r\n```\r\nchar readByte = (char) classServerConnectionSingletonSocketDataInputStream.readByte();\r\n```\r\nin a loop.\r\nIs there in Java an alternative to read all the already available bytes in the input stream?\r\n\r\nFor example, in Php I use\r\n```\r\n$socketread = @socket_read($arrayclients[$arrayclientkey][&quot;socket&quot;],1024);\r\n```\r\nand it reads up all the available bytes up to 1024 bytes.","title":"Alternatives to loop reading byte-by-byte from a socket?","body":"<p>I use</p>\n<pre><code>char readByte = (char) classServerConnectionSingletonSocketDataInputStream.readByte();\n</code></pre>\n<p>in a loop.\nIs there in Java an alternative to read all the already available bytes in the input stream?</p>\n<p>For example, in Php I use</p>\n<pre><code>$socketread = @socket_read($arrayclients[$arrayclientkey][&quot;socket&quot;],1024);\n</code></pre>\n<p>and it reads up all the available bytes up to 1024 bytes.</p>\n"},{"tags":["java","if-statement","return","conditional-statements","code-cleanup"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1525768837,"post_id":50229389,"comment_id":87475961,"body_markdown":"Aside: you should never write `condition ? false : true`: `!condition` is simpler.","body":"Aside: you should never write <code>condition ? false : true</code>: <code>!condition</code> is simpler."},{"owner":{"account_id":12864281,"reputation":65,"user_id":9305080,"display_name":"stringExchange"},"score":0,"creation_date":1525769112,"post_id":50229389,"comment_id":87476129,"body_markdown":"@Eran yes exactly, thanks for the correction, updated thread as well.","body":"@Eran yes exactly, thanks for the correction, updated thread as well."}],"answers":[{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525768865,"creation_date":1525768846,"answer_id":50229422,"question_id":50229389,"body_markdown":"You can type:\r\n\r\n    return !(var1 &gt; var2 &amp;&amp; (var1 + var3) &gt; var2);","title":"How do you return a boolean by comparing three variables on the same line?","body":"<p>You can type:</p>\n\n<pre><code>return !(var1 &gt; var2 &amp;&amp; (var1 + var3) &gt; var2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1637089647,"creation_date":1525768898,"answer_id":50229437,"question_id":50229389,"body_markdown":"&quot;If `var1` is bigger than `var2`&quot; is this condition:\r\n\r\n    var1 &gt; var2\r\n\r\n&quot;If `var1 + var3` is bigger than `var2`&quot; is this condition:\r\n\r\n    var1 + var3 &gt; var2\r\n\r\nReturn false if both those conditions match, otherwise true:\r\n\r\n    return !(var1 &gt; var2 &amp;&amp; var1 + var3 &gt; var2);\r\n\r\nAlternatively, you can negate the individual conditions, which gives:\r\n\r\n    return (var1 &lt;= var2 || var1 + var3 &lt;= var2);\r\n\r\n(which is equivalent as long as none of your numbers is NaN.)\r\n\r\nThere is no need for the `?:` operator.","title":"How do you return a boolean by comparing three variables on the same line?","body":"<p>&quot;If <code>var1</code> is bigger than <code>var2</code>&quot; is this condition:</p>\n<pre><code>var1 &gt; var2\n</code></pre>\n<p>&quot;If <code>var1 + var3</code> is bigger than <code>var2</code>&quot; is this condition:</p>\n<pre><code>var1 + var3 &gt; var2\n</code></pre>\n<p>Return false if both those conditions match, otherwise true:</p>\n<pre><code>return !(var1 &gt; var2 &amp;&amp; var1 + var3 &gt; var2);\n</code></pre>\n<p>Alternatively, you can negate the individual conditions, which gives:</p>\n<pre><code>return (var1 &lt;= var2 || var1 + var3 &lt;= var2);\n</code></pre>\n<p>(which is equivalent as long as none of your numbers is NaN.)</p>\n<p>There is no need for the <code>?:</code> operator.</p>\n"},{"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525769335,"creation_date":1525769335,"answer_id":50229568,"question_id":50229389,"body_markdown":"Isn&#39;t \r\n\r\n    return !(var1 &gt; var2 &amp;&amp; (var1 + var3) &gt; var2);\r\n\r\nis enough?\r\n\r\nUsing boolean algebra, we can simplify the `!` operator: `!(a and b) = !a or !b`\r\n\r\n    return var1 &lt;= var2 || (var 1 + var 3) &lt;= var2;","title":"How do you return a boolean by comparing three variables on the same line?","body":"<p>Isn't </p>\n\n<pre><code>return !(var1 &gt; var2 &amp;&amp; (var1 + var3) &gt; var2);\n</code></pre>\n\n<p>is enough?</p>\n\n<p>Using boolean algebra, we can simplify the <code>!</code> operator: <code>!(a and b) = !a or !b</code></p>\n\n<pre><code>return var1 &lt;= var2 || (var 1 + var 3) &lt;= var2;\n</code></pre>\n"}],"owner":{"account_id":12864281,"reputation":65,"user_id":9305080,"display_name":"stringExchange"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":50229437,"answer_count":3,"score":3,"last_activity_date":1637089647,"creation_date":1525768699,"question_id":50229389,"body_markdown":"I&#39;ve seen people doing an if and else statement on only 1 line using \r\n\r\n`return var1 != null ? var2 : 0;`.\r\n\r\nThis seems quite more compact and quicker to type than making an if statement and then a few more lines and so on...\r\n\r\nThe return statement above is an example, I could not recreate something similar as I don&#39;t know the syntax of using `if and else` statements on `return` lines.\r\n&lt;hr&gt;\r\nThe current situation:\r\n\r\nThere are 3 integers.\r\n\r\nI want to compare **if var 1 is bigger than var 2** and also (**&amp;&amp;**) **if (var 1 + var 3) is bigger than var 2**.\r\nIf those conditions are true then the return statement should return false else true.\r\n\r\nAttempt: \r\n\r\n    return var1 &gt; var2 &amp;&amp; (var1 + var3) &gt; var2 ? false : true;\r\n","title":"How do you return a boolean by comparing three variables on the same line?","body":"<p>I've seen people doing an if and else statement on only 1 line using </p>\n\n<p><code>return var1 != null ? var2 : 0;</code>.</p>\n\n<p>This seems quite more compact and quicker to type than making an if statement and then a few more lines and so on...</p>\n\n<p>The return statement above is an example, I could not recreate something similar as I don't know the syntax of using <code>if and else</code> statements on <code>return</code> lines.\n<hr>\nThe current situation:</p>\n\n<p>There are 3 integers.</p>\n\n<p>I want to compare <strong>if var 1 is bigger than var 2</strong> and also (<strong>&amp;&amp;</strong>) <strong>if (var 1 + var 3) is bigger than var 2</strong>.\nIf those conditions are true then the return statement should return false else true.</p>\n\n<p>Attempt: </p>\n\n<pre><code>return var1 &gt; var2 &amp;&amp; (var1 + var3) &gt; var2 ? false : true;\n</code></pre>\n"},{"tags":["java","getter-setter"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1637089182,"post_id":69994698,"comment_id":123731313,"body_markdown":"Hint: where do you believe you&#39;re ever creating an instance of the `model` class? (As an aside, I&#39;d also *strongly* advise you to start following Java naming conventions ASAP.)","body":"Hint: where do you believe you&#39;re ever creating an instance of the <code>model</code> class? (As an aside, I&#39;d also <i>strongly</i> advise you to start following Java naming conventions ASAP.)"},{"owner":{"account_id":21395837,"reputation":1,"user_id":15758919,"display_name":"Habeeb E Sadeed"},"score":0,"creation_date":1637089494,"post_id":69994698,"comment_id":123731444,"body_markdown":"I was trying to create an array of objects for model class. Model[0] stores details of student1, model[1] stores details of student 2....like this .....","body":"I was trying to create an array of objects for model class. Model[0] stores details of student1, model[1] stores details of student 2....like this ....."}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637089472,"creation_date":1637089472,"answer_id":69994765,"question_id":69994698,"body_markdown":"When doing `model = new model[3];`, you create an array with a size of 3. But, it&#39;s empty.\r\n\r\nSo, when you do `model[0]`, this will return null.\r\n\r\nTo fix this, you should set value, such as `model[0] = myModel;`. In your case, `model[0] = new model();` should works, but only for the first item (the second and third will always be null).\r\n\r\nMore informations about NPE for Java, it&#39;s [here](https://stackoverflow.com/q/218384/10952503)","title":"Pass an array as setter in Java","body":"<p>When doing <code>model = new model[3];</code>, you create an array with a size of 3. But, it's empty.</p>\n<p>So, when you do <code>model[0]</code>, this will return null.</p>\n<p>To fix this, you should set value, such as <code>model[0] = myModel;</code>. In your case, <code>model[0] = new model();</code> should works, but only for the first item (the second and third will always be null).</p>\n<p>More informations about NPE for Java, it's <a href=\"https://stackoverflow.com/q/218384/10952503\">here</a></p>\n"}],"owner":{"account_id":21395837,"reputation":1,"user_id":15758919,"display_name":"Habeeb E Sadeed"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1637094825,"accepted_answer_id":69994765,"answer_count":1,"score":-3,"last_activity_date":1637089472,"creation_date":1637089069,"question_id":69994698,"body_markdown":"   \r\nDITP 3113 class\r\n\r\n    package com.ditp3113;\r\n    \r\n    import java.util.Scanner;//Scanner class takes input\r\n    public class Student {\r\n    \t\r\n    \t\r\n    \t/////Decalartion of the fields\r\n    \t\r\n    \tprivate String studName;\r\n    \tprivate String idNo;\r\n    \tpublic static double[] marks =new double[3];//Stores marks of three tests// static to ensure this double can be used universally\r\n    \t\r\n    \t\r\n    \t\r\n    \tpublic Student(String studName,String idNo)\r\n        {  ///Constructor that accepts student&#39;s name and id as arguments\r\n    \t\tthis.idNo=idNo;\r\n    \t\tthis.studName=studName;\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic static void main(String []args) {\r\n    \t\t\r\n         model model[] =new model[3];\r\n    \t\t\r\n    \t\tScanner input=new Scanner(System.in);\r\n    \t\t\r\n    \t\t\r\n    \t\tStudent OmarObject=new Student(&quot;Omar&quot;,&quot;B0123345&quot;);\r\n    \t\tStudent HanaObject=new Student(&quot;Hamza&quot;,&quot;B06564788&quot;);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Please enter 3 marks for Omar:&quot;);\r\n    \t\t\r\n    \t\t\r\n    \t\tfor (int i=0; i&lt;3;i++) {\r\n    \t\t\r\n    \t\t\tmarks[i]=input.nextDouble();\r\n    \t\t\t\r\n    \t       System.out.println();\r\n    \t\t\t\t\r\n    \t\t}\r\n        \r\n    \t\t \r\n        model[0].setMarks(marks);\r\n    \t\t\r\n    \t\r\n    \tSystem.out.println(&quot;Please enter 3 marks for Hana&quot;);\r\n    \t\t\r\n    \t\t\r\n    \t\tfor (int j=0; j&lt;3;j++) {//Stores 3 marks for 3 subjects\r\n    \t\t\t\r\n    \t\t\tmarks[j]=input.nextDouble();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println();\r\n    \t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n            model[1].setMarks(marks);\r\n    \t  \r\n    \t\tdouble[] OmarMarks =model[0].getMarks();\r\n            for (int i = 0; i &lt;OmarMarks.length; i++) {\r\n                System.out.println(OmarMarks[i]);\r\n                \r\n             \r\n            } \r\n            \r\n            double[] HannaMarks =model[1].getMarks();\r\n            for (int j = 0; j &lt;HannaMarks.length; j++) {\r\n                System.out.println(HannaMarks[j]);\r\n            } \r\n            \r\n            \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nModel class(model.java)\r\n\r\n    package com.ditp3113;\r\n    \r\n    public class model {\r\n    \t\r\n    \tprivate double[] marks;\r\n    \t\r\n    \t\r\n    \r\n    \t\r\n    \tpublic void setMarks(double[] marks) {\r\n    \t\t\r\n    \t\tthis.marks=marks;\r\n    \t}\r\n    \t\r\n    \tpublic double[] getMarks() {\r\n    \t\t\r\n    \t\treturn marks;\r\n    \t}\r\n    \r\n    \t\r\n    \t\r\n    \t\r\n    }\r\n\r\nWhen i run , the following error comes:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;com.ditp3113.model.setMarks(double[])&quot; because &quot;model[0]&quot; is null\r\n    \tat com.ditp3113.Student.main(Student.java:46)\r\n\r\nCan you please assist me how to fix this problem?\r\n","title":"Pass an array as setter in Java","body":"<p>DITP 3113 class</p>\n<pre><code>package com.ditp3113;\n\nimport java.util.Scanner;//Scanner class takes input\npublic class Student {\n    \n    \n    /////Decalartion of the fields\n    \n    private String studName;\n    private String idNo;\n    public static double[] marks =new double[3];//Stores marks of three tests// static to ensure this double can be used universally\n    \n    \n    \n    public Student(String studName,String idNo)\n    {  ///Constructor that accepts student's name and id as arguments\n        this.idNo=idNo;\n        this.studName=studName;\n        \n        \n    }\n    \n    \n    public static void main(String []args) {\n        \n     model model[] =new model[3];\n        \n        Scanner input=new Scanner(System.in);\n        \n        \n        Student OmarObject=new Student(&quot;Omar&quot;,&quot;B0123345&quot;);\n        Student HanaObject=new Student(&quot;Hamza&quot;,&quot;B06564788&quot;);\n        \n        System.out.println(&quot;Please enter 3 marks for Omar:&quot;);\n        \n        \n        for (int i=0; i&lt;3;i++) {\n        \n            marks[i]=input.nextDouble();\n            \n           System.out.println();\n                \n        }\n    \n         \n    model[0].setMarks(marks);\n        \n    \n    System.out.println(&quot;Please enter 3 marks for Hana&quot;);\n        \n        \n        for (int j=0; j&lt;3;j++) {//Stores 3 marks for 3 subjects\n            \n            marks[j]=input.nextDouble();\n            \n            System.out.println();\n        \n            \n        }\n        \n        model[1].setMarks(marks);\n      \n        double[] OmarMarks =model[0].getMarks();\n        for (int i = 0; i &lt;OmarMarks.length; i++) {\n            System.out.println(OmarMarks[i]);\n            \n         \n        } \n        \n        double[] HannaMarks =model[1].getMarks();\n        for (int j = 0; j &lt;HannaMarks.length; j++) {\n            System.out.println(HannaMarks[j]);\n        } \n        \n        \n    }\n\n}\n</code></pre>\n<p>Model class(model.java)</p>\n<pre><code>package com.ditp3113;\n\npublic class model {\n    \n    private double[] marks;\n    \n    \n\n    \n    public void setMarks(double[] marks) {\n        \n        this.marks=marks;\n    }\n    \n    public double[] getMarks() {\n        \n        return marks;\n    }\n\n    \n    \n    \n}\n</code></pre>\n<p>When i run , the following error comes:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;com.ditp3113.model.setMarks(double[])&quot; because &quot;model[0]&quot; is null\n    at com.ditp3113.Student.main(Student.java:46)\n</code></pre>\n<p>Can you please assist me how to fix this problem?</p>\n"},{"tags":["java","apache-kafka","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637089464,"creation_date":1636986291,"answer_id":69975939,"question_id":69974997,"body_markdown":"The Kafka Client works in two phases on the producer side: it makes a connection to Kafka broker and check for metadata. It is done immediately when you call `send()` on `KafkaTemplate`. The rest of the logic in done in async manner and deferred to some buffer and event loop inside `KafkaProducer`.\r\n\r\nSo, apparently that wrong topic is also resolved later on and if you rally want to catch it with that `requestHandlerAdvice`, you should consider to have it like this then ` sync=&quot;true&quot;`. Or have a look into the `sendFailureChannel` of the `KafkaProducerMessageHandler`:\r\n\r\n\t/**\r\n\t * Set the failure channel. After a send failure, an\r\n\t * {@link org.springframework.messaging.support.ErrorMessage} will be sent\r\n\t * to this channel with a payload of a {@link KafkaSendFailureException} with the\r\n\t * failed message and cause.\r\n\t * @param sendFailureChannel the failure channel.\r\n\t */\r\n\tpublic void setSendFailureChannel(MessageChannel sendFailureChannel) {\r\n\r\nThe `send-failure-channel` for an XML config.\r\n\r\n**UPDATE**\r\n\r\nThe problem is here `auto.create.topics.enable=false`. It is `true` by default. See this article for more info: https://blog.softwaremill.com/7-mistakes-when-using-apache-kafka-44358cd9cd6","title":"Kakfa spring Integration not throws exception when topic name is incorrect or doesn&#39;t exists","body":"<p>The Kafka Client works in two phases on the producer side: it makes a connection to Kafka broker and check for metadata. It is done immediately when you call <code>send()</code> on <code>KafkaTemplate</code>. The rest of the logic in done in async manner and deferred to some buffer and event loop inside <code>KafkaProducer</code>.</p>\n<p>So, apparently that wrong topic is also resolved later on and if you rally want to catch it with that <code>requestHandlerAdvice</code>, you should consider to have it like this then <code> sync=&quot;true&quot;</code>. Or have a look into the <code>sendFailureChannel</code> of the <code>KafkaProducerMessageHandler</code>:</p>\n<pre><code>/**\n * Set the failure channel. After a send failure, an\n * {@link org.springframework.messaging.support.ErrorMessage} will be sent\n * to this channel with a payload of a {@link KafkaSendFailureException} with the\n * failed message and cause.\n * @param sendFailureChannel the failure channel.\n */\npublic void setSendFailureChannel(MessageChannel sendFailureChannel) {\n</code></pre>\n<p>The <code>send-failure-channel</code> for an XML config.</p>\n<p><strong>UPDATE</strong></p>\n<p>The problem is here <code>auto.create.topics.enable=false</code>. It is <code>true</code> by default. See this article for more info: <a href=\"https://blog.softwaremill.com/7-mistakes-when-using-apache-kafka-44358cd9cd6\" rel=\"nofollow noreferrer\">https://blog.softwaremill.com/7-mistakes-when-using-apache-kafka-44358cd9cd6</a></p>\n"}],"owner":{"account_id":14651915,"reputation":35,"user_id":10581692,"display_name":"TalentUk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69975939,"answer_count":1,"score":0,"last_activity_date":1637089464,"creation_date":1636982178,"question_id":69974997,"body_markdown":"I am using Spring integration to send message to Kakfa channel.When server name is incorrect it throw exception that is good and expected behaviors. But when i gave wrong topic name it fails silently and doesn&#39;t throw any exception. Here is config i am using\r\n\r\n```&lt;int-kafka:outbound-channel-adapter id=&quot;kafkaOutboundChannelAdapter&quot;  message-key=&quot;SomeMessageKey&quot; channel=&quot;kafkaOutboundChannel&quot;\r\n                                        kafka-template=&quot;kafkaTemplate&quot;\r\n                                        auto-startup=&quot;true&quot;\r\n                                        topic=&quot;topicName&quot;   -- if i give incorrect topic name here\r\n                                        sync=&quot;false&quot; &gt;\r\n        &lt;int-kafka:request-handler-advice-chain&gt;\r\n            &lt;ref bean=&quot;requestHandlerAdvice&quot;/&gt;\r\n            &lt;ref bean=&quot;retryAdvice&quot;/&gt;\r\n        &lt;/int-kafka:request-handler-advice-chain&gt;\r\n    &lt;/int-kafka:outbound-channel-adapter&gt;\r\n```\r\n\r\nAnd kafkaTemplate configuration is \r\n\r\n```&lt;bean id=&quot;kafkaTemplate&quot; class=&quot;org.springframework.kafka.core.KafkaTemplate&quot;&gt;\r\n        &lt;constructor-arg&gt;\r\n            &lt;bean class=&quot;org.springframework.kafka.core.DefaultKafkaProducerFactory&quot;&gt;\r\n                &lt;constructor-arg&gt;\r\n                    &lt;map&gt;\r\n                        &lt;entry key=&quot;bootstrap.servers&quot; value=&quot;${kafkaCF_hostName}:${kafkaCF_port}&quot; /&gt;\r\n                        &lt;entry key=&quot;key.serializer&quot; value=&quot;serializer&quot;/&gt;\r\n                        &lt;entry key=&quot;value.serializer&quot; value=&quot;value.serializer}&quot;/&gt;\r\n                        &lt;entry key=&quot;security.protocol&quot; value=&quot;${security.protocol}&quot;/&gt;\r\n                        &lt;entry key=&quot;ssl.truststore.location&quot; value=&quot;${ssl.truststore.location}&quot;/&gt;\r\n                        &lt;entry key=&quot;ssl.truststore.password&quot; value=&quot;${ssl.truststore.password}&quot;/&gt;\r\n                        &lt;entry key=&quot;ssl.keystore.location&quot; value=&quot;${ssl.keystore.location}&quot;/&gt;\r\n                        &lt;entry key=&quot;ssl.keystore.password&quot; value=&quot;${ssl.keystore.password}&quot;/&gt;\r\n                        &lt;entry key=&quot;ssl.key.password&quot; value=&quot;${ssl.key.password}&quot;/&gt;\r\n                    &lt;/map&gt;\r\n                &lt;/constructor-arg&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\nMy requirement is to log the success/failure entry in DB. If i test with wrong topic name then if consider as success and pass to  **requestHandlerAdvice** which is further configures with success /failure channel.\r\n\r\n\r\nAny advise how to handle this scenario in Kafka with spring integration? \r\n\r\n","title":"Kakfa spring Integration not throws exception when topic name is incorrect or doesn&#39;t exists","body":"<p>I am using Spring integration to send message to Kakfa channel.When server name is incorrect it throw exception that is good and expected behaviors. But when i gave wrong topic name it fails silently and doesn't throw any exception. Here is config i am using</p>\n<pre><code>                                        kafka-template=&quot;kafkaTemplate&quot;\n                                        auto-startup=&quot;true&quot;\n                                        topic=&quot;topicName&quot;   -- if i give incorrect topic name here\n                                        sync=&quot;false&quot; &gt;\n        &lt;int-kafka:request-handler-advice-chain&gt;\n            &lt;ref bean=&quot;requestHandlerAdvice&quot;/&gt;\n            &lt;ref bean=&quot;retryAdvice&quot;/&gt;\n        &lt;/int-kafka:request-handler-advice-chain&gt;\n    &lt;/int-kafka:outbound-channel-adapter&gt;\n</code></pre>\n<p>And kafkaTemplate configuration is</p>\n<pre><code>        &lt;constructor-arg&gt;\n            &lt;bean class=&quot;org.springframework.kafka.core.DefaultKafkaProducerFactory&quot;&gt;\n                &lt;constructor-arg&gt;\n                    &lt;map&gt;\n                        &lt;entry key=&quot;bootstrap.servers&quot; value=&quot;${kafkaCF_hostName}:${kafkaCF_port}&quot; /&gt;\n                        &lt;entry key=&quot;key.serializer&quot; value=&quot;serializer&quot;/&gt;\n                        &lt;entry key=&quot;value.serializer&quot; value=&quot;value.serializer}&quot;/&gt;\n                        &lt;entry key=&quot;security.protocol&quot; value=&quot;${security.protocol}&quot;/&gt;\n                        &lt;entry key=&quot;ssl.truststore.location&quot; value=&quot;${ssl.truststore.location}&quot;/&gt;\n                        &lt;entry key=&quot;ssl.truststore.password&quot; value=&quot;${ssl.truststore.password}&quot;/&gt;\n                        &lt;entry key=&quot;ssl.keystore.location&quot; value=&quot;${ssl.keystore.location}&quot;/&gt;\n                        &lt;entry key=&quot;ssl.keystore.password&quot; value=&quot;${ssl.keystore.password}&quot;/&gt;\n                        &lt;entry key=&quot;ssl.key.password&quot; value=&quot;${ssl.key.password}&quot;/&gt;\n                    &lt;/map&gt;\n                &lt;/constructor-arg&gt;\n            &lt;/bean&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>My requirement is to log the success/failure entry in DB. If i test with wrong topic name then if consider as success and pass to  <strong>requestHandlerAdvice</strong> which is further configures with success /failure channel.</p>\n<p>Any advise how to handle this scenario in Kafka with spring integration?</p>\n"},{"tags":["java","apache-beam"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637031660,"post_id":69983181,"comment_id":123710637,"body_markdown":"Is this your real compilable code?  Should `return TestRow;` be actually returning the instance not a class?","body":"Is this your real compilable code?  Should <code>return TestRow;</code> be actually returning the instance not a class?"},{"owner":{"account_id":6497238,"reputation":127,"user_id":5029450,"accept_rate":20,"display_name":"cherry"},"score":0,"creation_date":1637033019,"post_id":69983181,"comment_id":123710840,"body_markdown":"copy/paste mistake, i updated that in question, thank you","body":"copy/paste mistake, i updated that in question, thank you"}],"answers":[{"tags":[],"owner":{"account_id":284307,"reputation":4946,"user_id":582333,"display_name":"robertwb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637088882,"creation_date":1637088882,"answer_id":69994657,"question_id":69983181,"body_markdown":"`JdbcIO.&lt;TestRow&gt;read()` just creates a reading [PTransform][1], it does not actually do any reading. To do the read, it must be applied to the pipeline object (as you have in your first example) which produces a PCollection of records. PTransforms are not meant to be used within a DoFn, DoFns act on individual elements, not PCollections of elements.\r\n\r\nIf you are trying to remove anonomous classes, you could write your code as follows\r\n\r\n```\r\n[public static] class MuRowMapper extends JdbcIO.RowMapper&lt;TestRow&gt; {\r\n    @Override\r\n    public TestRow mapRow(ResultSet resultSet) throws Exception {\r\n        TestRow testRow = new TestRow();\r\n        ...\r\n        return testRow;\r\n    }\r\n}\r\n\r\n[public static] class MyDoFn extends DoFn&lt;MyRow, String&gt; {\r\n    @DoFn.ProcessElement\r\n    public void processElement(@Element TestRow testRow, \r\n                               final OutputReceiver&lt;String&gt; receiver) {\r\n        return receiver.output(testRow.toString());\r\n    }\r\n}\r\n\r\nPipeline p = createPipeline(options);\r\np\r\n    .apply(JdbcIO.&lt;TestRow&gt;read()\r\n                 .withDataSourceConfiguration(\r\n                     JdbcIO.DataSourceConfiguration.create(dataSource))\r\n                 .withQuery(&quot;query  &quot;)\r\n                 .withCoder(SerializableCoder.of(TestRow.class))\r\n                 .withRowMapper(new MyRowMapper()))\r\n    .apply(ParDo.of(new MyDoFn()));\r\n```\r\n\r\n\r\n  [1]: https://beam.apache.org/documentation/glossary/#ptransform","title":"JdbcIO.read is not returning results in apache beam","body":"<p><code>JdbcIO.&lt;TestRow&gt;read()</code> just creates a reading <a href=\"https://beam.apache.org/documentation/glossary/#ptransform\" rel=\"nofollow noreferrer\">PTransform</a>, it does not actually do any reading. To do the read, it must be applied to the pipeline object (as you have in your first example) which produces a PCollection of records. PTransforms are not meant to be used within a DoFn, DoFns act on individual elements, not PCollections of elements.</p>\n<p>If you are trying to remove anonomous classes, you could write your code as follows</p>\n<pre><code>[public static] class MuRowMapper extends JdbcIO.RowMapper&lt;TestRow&gt; {\n    @Override\n    public TestRow mapRow(ResultSet resultSet) throws Exception {\n        TestRow testRow = new TestRow();\n        ...\n        return testRow;\n    }\n}\n\n[public static] class MyDoFn extends DoFn&lt;MyRow, String&gt; {\n    @DoFn.ProcessElement\n    public void processElement(@Element TestRow testRow, \n                               final OutputReceiver&lt;String&gt; receiver) {\n        return receiver.output(testRow.toString());\n    }\n}\n\nPipeline p = createPipeline(options);\np\n    .apply(JdbcIO.&lt;TestRow&gt;read()\n                 .withDataSourceConfiguration(\n                     JdbcIO.DataSourceConfiguration.create(dataSource))\n                 .withQuery(&quot;query  &quot;)\n                 .withCoder(SerializableCoder.of(TestRow.class))\n                 .withRowMapper(new MyRowMapper()))\n    .apply(ParDo.of(new MyDoFn()));\n</code></pre>\n"}],"owner":{"account_id":6497238,"reputation":127,"user_id":5029450,"accept_rate":20,"display_name":"cherry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":760,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69994657,"answer_count":1,"score":0,"last_activity_date":1637088882,"creation_date":1637030570,"question_id":69983181,"body_markdown":"I am trying to read some data using jdbIO.read in apache beam  and it works fine if I have code as follows.\r\n``` \r\nPipeline p = createPipeline(options);\r\np.apply(JdbcIO.&lt;TestRow&gt;read()\r\n                   .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(dataSource))\r\n                        .withQuery(&quot;query  &quot;)\r\n                        .withCoder(SerializableCoder.of(TestRow.class))\r\n                        .withRowMapper(new JdbcIO.RowMapper&lt;TestRow&gt;() {\r\n                            @Override\r\n                            public TestRow mapRow(ResultSet resultSet) throws Exception {\r\n                                TestRow testRow = new TestRow();\r\n                                //setters\r\n\r\n                                return testRow;\r\n                            }\r\n                        }))\r\n                .apply(MapElements.via(new SimpleFunction&lt;TestRow, String&gt;() {\r\n                    @Override\r\n                    public String apply(TestRow input) {\r\n                        \r\n                        return input.toString();\r\n                    }\r\n                }));\r\n```\r\nBut not getting any results, when I refactor this in a way to remove anonymous functions and put that call in separate class and extending DoFn class. the  row mapper block is not getting executing at all. \r\n```\r\nPCollection&lt;String&gt; t = p\r\n                 .apply(Create.&lt;Long&gt;of(1L))\r\n                 .apply(&quot;Read Data&quot;, ParDo.of(readInput))\r\n\r\npublic abstract class ReadInput&lt;S, T&gt; extends DoFn&lt;Long, TestRow&gt; {\r\n\r\n     @DoFn.ProcessElement\r\n    public void processElement(@Element Long seq, final OutputReceiver&lt;TestRow&gt; receiver) {\r\n        getInput(receiver);\r\n\r\npublic class ReadInputOtc extends ReadInput&lt;Long, TestRow&gt;\r\n@Override\r\n    protected void getInput(OutputReceiver&lt;TestRow&gt; receiver) {\r\n        JdbcIO.&lt;TestRow&gt;read()\r\n                .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(this.dataSource))\r\n                .withCoder(SerializableCoder.of(TestRow.class))\r\n                .withQuery(&quot;query &quot;)\r\n                .withRowMapper(new JdbcIO.RowMapper&lt;TestRow&gt;() {\r\n                    public TestRow mapRow(ResultSet resultSet) throws Exception {\r\n                        TestRow testRow = new TestRow();\r\n                       //setters\r\n                        while (resultSet.next()) {\r\n                            System.out.println(resultSet.getString(&quot;id&quot;));\r\n                        }\r\n                        receiver.output(testRow);\r\n                        return testRow;\r\n\r\n                    }\r\n\r\n                });\r\n    }\r\n```\r\nthanks for your help","title":"JdbcIO.read is not returning results in apache beam","body":"<p>I am trying to read some data using jdbIO.read in apache beam  and it works fine if I have code as follows.</p>\n<pre><code>Pipeline p = createPipeline(options);\np.apply(JdbcIO.&lt;TestRow&gt;read()\n                   .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(dataSource))\n                        .withQuery(&quot;query  &quot;)\n                        .withCoder(SerializableCoder.of(TestRow.class))\n                        .withRowMapper(new JdbcIO.RowMapper&lt;TestRow&gt;() {\n                            @Override\n                            public TestRow mapRow(ResultSet resultSet) throws Exception {\n                                TestRow testRow = new TestRow();\n                                //setters\n\n                                return testRow;\n                            }\n                        }))\n                .apply(MapElements.via(new SimpleFunction&lt;TestRow, String&gt;() {\n                    @Override\n                    public String apply(TestRow input) {\n                        \n                        return input.toString();\n                    }\n                }));\n</code></pre>\n<p>But not getting any results, when I refactor this in a way to remove anonymous functions and put that call in separate class and extending DoFn class. the  row mapper block is not getting executing at all.</p>\n<pre><code>PCollection&lt;String&gt; t = p\n                 .apply(Create.&lt;Long&gt;of(1L))\n                 .apply(&quot;Read Data&quot;, ParDo.of(readInput))\n\npublic abstract class ReadInput&lt;S, T&gt; extends DoFn&lt;Long, TestRow&gt; {\n\n     @DoFn.ProcessElement\n    public void processElement(@Element Long seq, final OutputReceiver&lt;TestRow&gt; receiver) {\n        getInput(receiver);\n\npublic class ReadInputOtc extends ReadInput&lt;Long, TestRow&gt;\n@Override\n    protected void getInput(OutputReceiver&lt;TestRow&gt; receiver) {\n        JdbcIO.&lt;TestRow&gt;read()\n                .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(this.dataSource))\n                .withCoder(SerializableCoder.of(TestRow.class))\n                .withQuery(&quot;query &quot;)\n                .withRowMapper(new JdbcIO.RowMapper&lt;TestRow&gt;() {\n                    public TestRow mapRow(ResultSet resultSet) throws Exception {\n                        TestRow testRow = new TestRow();\n                       //setters\n                        while (resultSet.next()) {\n                            System.out.println(resultSet.getString(&quot;id&quot;));\n                        }\n                        receiver.output(testRow);\n                        return testRow;\n\n                    }\n\n                });\n    }\n</code></pre>\n<p>thanks for your help</p>\n"},{"tags":["javascript","java","angular","spring","nebular"],"comments":[{"owner":{"account_id":970709,"reputation":3339,"user_id":993328,"display_name":"Developer"},"score":0,"creation_date":1637085801,"post_id":69993973,"comment_id":123730135,"body_markdown":"ShowRawMaterials() is not called ?","body":"ShowRawMaterials() is not called ?"},{"owner":{"account_id":2670434,"reputation":1804,"user_id":2307970,"accept_rate":29,"display_name":"Zidane"},"score":0,"creation_date":1637086880,"post_id":69993973,"comment_id":123730528,"body_markdown":"@GaurangDhorda I am calling it there on the button onClick","body":"@GaurangDhorda I am calling it there on the button onClick"}],"answers":[{"tags":[],"owner":{"account_id":23353804,"reputation":206,"user_id":17427052,"display_name":"GRD"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637087838,"creation_date":1637087838,"answer_id":69994457,"question_id":69993973,"body_markdown":"You can find demo in this [StackBlitz Link][1]\r\n\r\nYou can use template reference variable like this in html inside input orderNo..\r\n\r\n    &lt;input\r\n      #orderNo\r\n      type=&quot;text&quot;\r\n      id=&quot;txtOrderNumber&quot;\r\n      nbInput\r\n      fullWidth\r\n      placeholder=&quot;Order Number&quot;\r\n    /&gt;\r\n     &lt;button (click)=&quot;ShowRawMaterials(orderNo)&quot; nbButton&gt;Click Me&lt;/button&gt;\r\n\r\nand then you can use it inside component.ts file like this...\r\n\r\n    ShowRawMaterials(orderNo) {\r\n      console.log(orderNo?.value);\r\n    }\r\n  [1]: https://stackblitz.com/edit/nebular-kznot2?file=src%2Fapp%2Fapp.component.html","title":"failing to load a simple onclick event to display textbox value in angular","body":"<p>You can find demo in this <a href=\"https://stackblitz.com/edit/nebular-kznot2?file=src%2Fapp%2Fapp.component.html\" rel=\"nofollow noreferrer\">StackBlitz Link</a></p>\n<p>You can use template reference variable like this in html inside input orderNo..</p>\n<pre><code>&lt;input\n  #orderNo\n  type=&quot;text&quot;\n  id=&quot;txtOrderNumber&quot;\n  nbInput\n  fullWidth\n  placeholder=&quot;Order Number&quot;\n/&gt;\n &lt;button (click)=&quot;ShowRawMaterials(orderNo)&quot; nbButton&gt;Click Me&lt;/button&gt;\n</code></pre>\n<p>and then you can use it inside component.ts file like this...</p>\n<pre><code>ShowRawMaterials(orderNo) {\n  console.log(orderNo?.value);\n}\n</code></pre>\n"}],"owner":{"account_id":2670434,"reputation":1804,"user_id":2307970,"accept_rate":29,"display_name":"Zidane"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":821,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637087838,"creation_date":1637085509,"question_id":69993973,"body_markdown":"I have a simple html view where an order number is entered but  I am failing to get the value of the textbox in the onClick event\r\n\r\n**HTML**\r\n\r\n    &lt;div class=&quot;row&quot;&gt;\r\n      &lt;div class=&quot;col-lg-12&quot;&gt;\r\n        &lt;nb-card&gt;\r\n          &lt;nb-card-header&gt;Place Order&lt;/nb-card-header&gt;\r\n          &lt;nb-card-body&gt;\r\n            &lt;input type=&quot;text&quot; id=&quot;txtOrderNumber&quot; nbInput fullWidth placeholder=&quot;Order Number&quot;&gt;\r\n            &lt;div class=&quot;full-name-inputs&quot;&gt;\r\n              &lt;input nbInput fullWidth  placeholder=&quot;Date Placed&quot; [nbDatepicker]=&quot;datePlaced&quot;&gt;\r\n              &lt;nb-datepicker #datePlaced&gt;&lt;/nb-datepicker&gt;\r\n              &lt;input nbInput fullWidth placeholder=&quot;Date Expected&quot; [nbDatepicker]=&quot;dateExpected&quot;&gt;\r\n              &lt;nb-datepicker #dateExpected&gt;&lt;/nb-datepicker&gt;\r\n            &lt;/div&gt;\r\n            &lt;input type=&quot;text&quot; nbInput fullWidth shape=&quot;rectangle&quot; placeholder=&quot;Supplier&quot;&gt;\r\n            &lt;input type=&quot;text&quot; nbInput fullWidth shape=&quot;semi-round&quot; placeholder=&quot;Unit&quot;&gt;\r\n            &lt;input type=&quot;text&quot; nbInput fullWidth shape=&quot;round&quot; placeholder=&quot;Quantity&quot;&gt;\r\n            &lt;input type=&quot;text&quot; nbInput fullWidth placeholder=&quot;Total Amount&quot; disabled/&gt;\r\n            &lt;textarea rows=&quot;5&quot; nbInput fullWidth shape=&quot;round&quot;  placeholder=&quot;Order Description&quot;&gt;&lt;/textarea&gt;\r\n   \r\n           &lt;button  (click)=&quot;ShowRawMaterials()&quot; nbButton&gt;Click Me&lt;/button&gt;\r\n          \r\n          &lt;/nb-card-body&gt;\r\n    \r\n        &lt;/nb-card&gt;\r\n      &lt;/div&gt;\r\n    \r\n    &lt;/div&gt;\r\n\r\n**Typescript**\r\n\r\n    import { Component } from &#39;@angular/core&#39;;\r\n    import { NbDateService } from &#39;@nebular/theme&#39;;\r\n    /*import {AfterViewInit, Component, ElementRef, ViewChild} from &#39;@angular/core&#39;;*/\r\n    \r\n    @Component({\r\n      selector: &#39;ngx-form-inputs&#39;,\r\n      styleUrls: [&#39;./place-order.component.scss&#39;],\r\n      templateUrl: &#39;./place-order.component.html&#39;,\r\n    })\r\n    /*export class PlaceOrderComponent implements AfterViewInit {\r\n     @ViewChild(&#39;txtOrderNumber&#39;) txtOrderNo: ElementRef;*/\r\n     export class PlaceOrderComponent {\r\n      starRate = 2;\r\n      heartRate = 4;\r\n      radioGroupValue = &#39;This is value 2&#39;;\r\n    \r\n        min: Date;\r\n        max: Date;\r\n    \r\n        constructor(protected dateService: NbDateService&lt;Date&gt;) {\r\n          this.min = this.dateService.addDay(this.dateService.today(), -5);\r\n          this.max = this.dateService.addDay(this.dateService.today(), 5);\r\n        }\r\n     ShowRawMaterials()  {\r\n          \r\n             var inputValue = (&lt;HTMLInputElement&gt;document.getElementById(txtOrderNo)).value;\r\n             alert(inputValue);\r\n            }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"failing to load a simple onclick event to display textbox value in angular","body":"<p>I have a simple html view where an order number is entered but  I am failing to get the value of the textbox in the onClick event</p>\n<p><strong>HTML</strong></p>\n<pre><code>&lt;div class=&quot;row&quot;&gt;\n  &lt;div class=&quot;col-lg-12&quot;&gt;\n    &lt;nb-card&gt;\n      &lt;nb-card-header&gt;Place Order&lt;/nb-card-header&gt;\n      &lt;nb-card-body&gt;\n        &lt;input type=&quot;text&quot; id=&quot;txtOrderNumber&quot; nbInput fullWidth placeholder=&quot;Order Number&quot;&gt;\n        &lt;div class=&quot;full-name-inputs&quot;&gt;\n          &lt;input nbInput fullWidth  placeholder=&quot;Date Placed&quot; [nbDatepicker]=&quot;datePlaced&quot;&gt;\n          &lt;nb-datepicker #datePlaced&gt;&lt;/nb-datepicker&gt;\n          &lt;input nbInput fullWidth placeholder=&quot;Date Expected&quot; [nbDatepicker]=&quot;dateExpected&quot;&gt;\n          &lt;nb-datepicker #dateExpected&gt;&lt;/nb-datepicker&gt;\n        &lt;/div&gt;\n        &lt;input type=&quot;text&quot; nbInput fullWidth shape=&quot;rectangle&quot; placeholder=&quot;Supplier&quot;&gt;\n        &lt;input type=&quot;text&quot; nbInput fullWidth shape=&quot;semi-round&quot; placeholder=&quot;Unit&quot;&gt;\n        &lt;input type=&quot;text&quot; nbInput fullWidth shape=&quot;round&quot; placeholder=&quot;Quantity&quot;&gt;\n        &lt;input type=&quot;text&quot; nbInput fullWidth placeholder=&quot;Total Amount&quot; disabled/&gt;\n        &lt;textarea rows=&quot;5&quot; nbInput fullWidth shape=&quot;round&quot;  placeholder=&quot;Order Description&quot;&gt;&lt;/textarea&gt;\n\n       &lt;button  (click)=&quot;ShowRawMaterials()&quot; nbButton&gt;Click Me&lt;/button&gt;\n      \n      &lt;/nb-card-body&gt;\n\n    &lt;/nb-card&gt;\n  &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n<p><strong>Typescript</strong></p>\n<pre><code>import { Component } from '@angular/core';\nimport { NbDateService } from '@nebular/theme';\n/*import {AfterViewInit, Component, ElementRef, ViewChild} from '@angular/core';*/\n\n@Component({\n  selector: 'ngx-form-inputs',\n  styleUrls: ['./place-order.component.scss'],\n  templateUrl: './place-order.component.html',\n})\n/*export class PlaceOrderComponent implements AfterViewInit {\n @ViewChild('txtOrderNumber') txtOrderNo: ElementRef;*/\n export class PlaceOrderComponent {\n  starRate = 2;\n  heartRate = 4;\n  radioGroupValue = 'This is value 2';\n\n    min: Date;\n    max: Date;\n\n    constructor(protected dateService: NbDateService&lt;Date&gt;) {\n      this.min = this.dateService.addDay(this.dateService.today(), -5);\n      this.max = this.dateService.addDay(this.dateService.today(), 5);\n    }\n ShowRawMaterials()  {\n      \n         var inputValue = (&lt;HTMLInputElement&gt;document.getElementById(txtOrderNo)).value;\n         alert(inputValue);\n        }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1637087841,"post_id":69994421,"comment_id":123730877,"body_markdown":"Combine the methods. `if (a+b != 5 || a == 2) dto.setReult(&quot;ko&quot;); else dto.setResult(&quot;ok&quot;);`","body":"Combine the methods. <code>if (a+b != 5 || a == 2) dto.setReult(&quot;ko&quot;); else dto.setResult(&quot;ok&quot;);</code>"},{"owner":{"account_id":9789089,"reputation":61,"user_id":7254389,"display_name":"Daphne"},"score":0,"creation_date":1637092347,"post_id":69994421,"comment_id":123732407,"body_markdown":"It&#39;s an example, I need to have them separated.","body":"It&#39;s an example, I need to have them separated."}],"owner":{"account_id":9789089,"reputation":61,"user_id":7254389,"display_name":"Daphne"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637087703,"creation_date":1637087703,"question_id":69994421,"body_markdown":"I have four methods that set the field result to ok or ko, depending on some conditions. But I don&#39;t want to execute method2 if result was already set to ko in method1. Is there a way to do this without having to add an if before every method?\r\n\r\n    public void check {\r\n       method1(dto, a);\r\n       method2(dto, a, b);\r\n       method3();\r\n       method4();\r\n    }\r\n    \r\n    private void method1(Object dto, int a) {\r\n       if(a == 2)\r\n          dto.setResult(&quot;ko&quot;);\r\n       else\r\n          dto.setResult(&quot;ok&quot;);\r\n    }\r\n    \r\n    private void method2(Object dto, int a, int b) {\r\n       if(a + b == 5)\r\n          dto.setResult(&quot;ok&quot;);\r\n       else\r\n          dto.setResult(&quot;ko&quot;);\r\n    }\r\n\r\nThank you\r\n","title":"Different way to do this without adding if&#39;s","body":"<p>I have four methods that set the field result to ok or ko, depending on some conditions. But I don't want to execute method2 if result was already set to ko in method1. Is there a way to do this without having to add an if before every method?</p>\n<pre><code>public void check {\n   method1(dto, a);\n   method2(dto, a, b);\n   method3();\n   method4();\n}\n\nprivate void method1(Object dto, int a) {\n   if(a == 2)\n      dto.setResult(&quot;ko&quot;);\n   else\n      dto.setResult(&quot;ok&quot;);\n}\n\nprivate void method2(Object dto, int a, int b) {\n   if(a + b == 5)\n      dto.setResult(&quot;ok&quot;);\n   else\n      dto.setResult(&quot;ko&quot;);\n}\n</code></pre>\n<p>Thank you</p>\n"},{"tags":["java","cucumber","spring-webflux"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1636167358,"post_id":69861113,"comment_id":123491455,"body_markdown":"Any particular reason you aren&#39;t just using Bean Validation? `@NotBlank` would Just Work. (Also, I don&#39;t generally use Webflux, but I would expect `Mono.empty()` to return an empty but successful response.)","body":"Any particular reason you aren&#39;t just using Bean Validation? <code>@NotBlank</code> would Just Work. (Also, I don&#39;t generally use Webflux, but I would expect <code>Mono.empty()</code> to return an empty but successful response.)"},{"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"score":0,"creation_date":1636167578,"post_id":69861113,"comment_id":123491471,"body_markdown":"@chrylis-cautiouslyoptimistic- Thanks for the quick response! Where would I append `@NotBlank`? Also, I omitted, on purpose, the part if validation is good. My integration tests using Mockito (see above) works but not my Cucumber tests. \nThis is more specific to Cucumber - what do I put inside the Cucumber steps?","body":"@chrylis-cautiouslyoptimistic- Thanks for the quick response! Where would I append <code>@NotBlank</code>? Also, I omitted, on purpose, the part if validation is good. My integration tests using Mockito (see above) works but not my Cucumber tests.  This is more specific to Cucumber - what do I put inside the Cucumber steps?"},{"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"score":0,"creation_date":1636167761,"post_id":69861113,"comment_id":123491484,"body_markdown":"@Sebastiann - I didn&#39;t include the throws HTTP 400 from my `@RestController` class inside this post to make this post as concise as possible. I just need my Cucumber test to see HTTP 400. What would I put inside the Cucumber steps?","body":"@Sebastiann - I didn&#39;t include the throws HTTP 400 from my <code>@RestController</code> class inside this post to make this post as concise as possible. I just need my Cucumber test to see HTTP 400. What would I put inside the Cucumber steps?"},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1636168127,"post_id":69861113,"comment_id":123491509,"body_markdown":"You can reply to my answer too, will be easier to see. But I think you should show your code so that it actually is what you&#39;re testing against. Right now in the code there is nowhere where a 400 is thrown, so we can&#39;t figure out why it isn&#39;t returning a 400 in the real code.","body":"You can reply to my answer too, will be easier to see. But I think you should show your code so that it actually is what you&#39;re testing against. Right now in the code there is nowhere where a 400 is thrown, so we can&#39;t figure out why it isn&#39;t returning a 400 in the real code."},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1636172892,"post_id":69861113,"comment_id":123491849,"body_markdown":"Look up _Bean Validation_. It comes in `spring-boot-starter-validation`.","body":"Look up <i>Bean Validation</i>. It comes in <code>spring-boot-starter-validation</code>."}],"answers":[{"tags":[],"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636168201,"creation_date":1636167491,"answer_id":69861128,"question_id":69861113,"body_markdown":"You&#39;re not throwing any exception, you&#39;re just logging an error. Any reason why you&#39;d be expecting a 400?","title":"How to prevent number and whitespace to pass for String in Cucumber test in Java?","body":"<p>You're not throwing any exception, you're just logging an error. Any reason why you'd be expecting a 400?</p>\n"},{"tags":[],"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637087614,"creation_date":1637087614,"answer_id":69994409,"question_id":69861113,"body_markdown":"Yes, throwing a custom exception right after the `logger.error()` statement would have been the solution.\r\n\r\nWhat I discovered is that since I am using openapi to autogenerate these models and REST Controllers, that inside the schema yaml file, I can specify `accountId` as &quot;required&quot; so behind-the-scenes these validations take place.\r\n\r\nThanks for everyone for all the useful feedback!","title":"How to prevent number and whitespace to pass for String in Cucumber test in Java?","body":"<p>Yes, throwing a custom exception right after the <code>logger.error()</code> statement would have been the solution.</p>\n<p>What I discovered is that since I am using openapi to autogenerate these models and REST Controllers, that inside the schema yaml file, I can specify <code>accountId</code> as &quot;required&quot; so behind-the-scenes these validations take place.</p>\n<p>Thanks for everyone for all the useful feedback!</p>\n"}],"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69994409,"answer_count":2,"score":1,"last_activity_date":1637087614,"creation_date":1636167269,"question_id":69861113,"body_markdown":"Am new to writing Cucumber tests...\r\n\r\nUsing Java 1.8 &amp; SpringWebFlux, I created the following checks inside my service class (which gets value from a HTTP POST request from a Spring Framework `@RestController`). \r\n\r\nAm checking to see if `accountId` (which is a String) is not null, empty string and also cannot contain any whitespace.\r\n\r\n```java\r\n@Service\r\npublic class MyServiceImpl implements MyService\r\n\r\n    @Override\r\n    public Mono&lt;CustomResponse&gt; postAccount(MyRequest myRequest) {\r\n\t\tif (myRequest.getAccountId() == null\r\n\t\t            || &quot;&quot;.equals(myRequest.getAccountId())\r\n\t\t            || myRequest.getAccountId().contains(&quot; &quot;)) {\r\n\t\t   log.error(&quot;accountId was invalid {}&quot;, myRequest.getAccountId());\r\n\t\t   return Mono.empty();\r\n\t\t}\r\n\t\t// Omitted if nothing failed for code brevity purposes.\r\n\t}\r\n}\r\n\r\n```\r\n\r\n---\r\n\r\nInside my service class&#39;s integration test:\r\n\r\n```java\r\n@Test\r\nvoid invalidAccountIds() {\r\n    // Checks for empty string\r\n    CustomResponse response1 = myService.postAccount(new MyRequest().accountId(&quot;&quot;), context).block();\r\n\r\n    // Checks for null string\r\n    CustomResponse response2 = myService.postAccount(new MyRequest().accountId(null), context).block();\r\n\r\n    // Checks for whitespace\r\n    CustomResponse response3 = myService.postAccount(new MyRequest().accountId(&quot; &quot;), context).block();\r\n\r\n    assertNull(response1, &quot;accountId cannot be null&quot;);\r\n    assertNull(response2, &quot;accountId cannot be empty string&quot;);\r\n    assertNull(response3, &quot;accountId cannot whitespaces&quot;);\r\n}\r\n```\r\n\r\n\r\nThis completely works when doing `mvn clean install`\r\n\r\n---\r\nHowever, my Cucumber test fails:\r\n\r\n```\r\n@apiTest\r\nFeature: MyService POST API test and verify response\r\n\r\n  Scenario Outline: I verify API fields for MyService\r\n    Given I have an jwt OAuth token\r\n    When I make an async POST request myRequest to default:/api/v1/accounts:\r\n    &quot;&quot;&quot;\r\n    Authorization: Bearer $OAUTHTOKEN\r\n    user-agent: MyService/cucumberTest/&lt;testCase&gt;\r\n    {\r\n      &quot;accountId&quot; : &lt;accountId&gt;\r\n    }\r\n    &quot;&quot;&quot;\r\n    Then The async request MyRequest has http code &lt;status&gt;\r\n\r\n    Examples:\r\n      | testCase      | accountId             | status |\r\n      | inputField1   |  &quot; &quot;                  | 400    |\r\n      | inputField2   |  1                    | 400    |\r\n```\r\n\r\n---\r\n\r\nWhy do `inputField1` &amp; `inputField2` return HTTP 200 instead of an HTTP 400?\r\n\r\nI need accountId to always be a String and never a number... \r\n\r\nWhat would I need to add in my Cucumber steps for these to become HTTP 400s?\r\n\r\n\r\n\r\n","title":"How to prevent number and whitespace to pass for String in Cucumber test in Java?","body":"<p>Am new to writing Cucumber tests...</p>\n<p>Using Java 1.8 &amp; SpringWebFlux, I created the following checks inside my service class (which gets value from a HTTP POST request from a Spring Framework <code>@RestController</code>).</p>\n<p>Am checking to see if <code>accountId</code> (which is a String) is not null, empty string and also cannot contain any whitespace.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyServiceImpl implements MyService\n\n    @Override\n    public Mono&lt;CustomResponse&gt; postAccount(MyRequest myRequest) {\n        if (myRequest.getAccountId() == null\n                    || &quot;&quot;.equals(myRequest.getAccountId())\n                    || myRequest.getAccountId().contains(&quot; &quot;)) {\n           log.error(&quot;accountId was invalid {}&quot;, myRequest.getAccountId());\n           return Mono.empty();\n        }\n        // Omitted if nothing failed for code brevity purposes.\n    }\n}\n\n</code></pre>\n<hr />\n<p>Inside my service class's integration test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid invalidAccountIds() {\n    // Checks for empty string\n    CustomResponse response1 = myService.postAccount(new MyRequest().accountId(&quot;&quot;), context).block();\n\n    // Checks for null string\n    CustomResponse response2 = myService.postAccount(new MyRequest().accountId(null), context).block();\n\n    // Checks for whitespace\n    CustomResponse response3 = myService.postAccount(new MyRequest().accountId(&quot; &quot;), context).block();\n\n    assertNull(response1, &quot;accountId cannot be null&quot;);\n    assertNull(response2, &quot;accountId cannot be empty string&quot;);\n    assertNull(response3, &quot;accountId cannot whitespaces&quot;);\n}\n</code></pre>\n<p>This completely works when doing <code>mvn clean install</code></p>\n<hr />\n<p>However, my Cucumber test fails:</p>\n<pre><code>@apiTest\nFeature: MyService POST API test and verify response\n\n  Scenario Outline: I verify API fields for MyService\n    Given I have an jwt OAuth token\n    When I make an async POST request myRequest to default:/api/v1/accounts:\n    &quot;&quot;&quot;\n    Authorization: Bearer $OAUTHTOKEN\n    user-agent: MyService/cucumberTest/&lt;testCase&gt;\n    {\n      &quot;accountId&quot; : &lt;accountId&gt;\n    }\n    &quot;&quot;&quot;\n    Then The async request MyRequest has http code &lt;status&gt;\n\n    Examples:\n      | testCase      | accountId             | status |\n      | inputField1   |  &quot; &quot;                  | 400    |\n      | inputField2   |  1                    | 400    |\n</code></pre>\n<hr />\n<p>Why do <code>inputField1</code> &amp; <code>inputField2</code> return HTTP 200 instead of an HTTP 400?</p>\n<p>I need accountId to always be a String and never a number...</p>\n<p>What would I need to add in my Cucumber steps for these to become HTTP 400s?</p>\n"},{"tags":["java","dictionary","stream"],"answers":[{"tags":[],"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637085507,"creation_date":1637085507,"answer_id":69993972,"question_id":69993368,"body_markdown":"Instead of storing the aggregates in two separate maps, I&#39;d go for objects grouping the aggregated results. Something like\r\n\r\n    class GroupStats {\r\n        private Group group;\r\n        private int score;\r\n        private int activePlayers;\r\n    }\r\n    \t\t\r\nI omitted the constructor and getters for brevity here. Then you can do something like\r\n\t\t\r\n\t\tcollect.entrySet().stream().map(e -&gt; {\r\n\t\t\tGroup group = e.getKey();\r\n\t\t\tint score = e.getValue().stream()\r\n\t\t\t\t\t.mapToInt(Person::getScore).sum();\r\n\t\t\tlong activeCount = e.getValue().stream()\r\n\t                .filter(p -&gt; p.isActive())\r\n\t                .count();\r\n\t\t\treturn new GroupStats(group, score, activeCount);\r\n\t\t}).max(Comparator\r\n\t\t\t\t.comparingInt(GroupStats::getScore)\r\n\t\t\t\t.thenComparingLong(GroupStats::getActivePlayerCount))\r\n\t\t.ifPresent(stats -&gt; System.out.println(stats.group));\r\n\t","title":"Comparing elements in HasMap with List as a value","body":"<p>Instead of storing the aggregates in two separate maps, I'd go for objects grouping the aggregated results. Something like</p>\n<pre><code>class GroupStats {\n    private Group group;\n    private int score;\n    private int activePlayers;\n}\n        \n</code></pre>\n<p>I omitted the constructor and getters for brevity here. Then you can do something like</p>\n<pre><code>    collect.entrySet().stream().map(e -&gt; {\n        Group group = e.getKey();\n        int score = e.getValue().stream()\n                .mapToInt(Person::getScore).sum();\n        long activeCount = e.getValue().stream()\n                .filter(p -&gt; p.isActive())\n                .count();\n        return new GroupStats(group, score, activeCount);\n    }).max(Comparator\n            .comparingInt(GroupStats::getScore)\n            .thenComparingLong(GroupStats::getActivePlayerCount))\n    .ifPresent(stats -&gt; System.out.println(stats.group));\n</code></pre>\n"}],"owner":{"account_id":22905594,"reputation":1,"user_id":17043720,"display_name":"Andylg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637086853,"creation_date":1637082611,"question_id":69993368,"body_markdown":"I&#39;m trying to do some exercises but I don&#39;t want to use if statement because program will be to long. I have a List&lt;Person&gt; people where:\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Person {\r\n        private String name;\r\n        private Integer score;\r\n        private Group team;\r\n        private boolean active;\r\n    } \r\nand\r\n\r\n    public enum Group {\r\n        G1, G2, G3\r\n    }\r\n\r\nMy job is to find a Group where Person have highest score but if score from two groups are the same I have to return group where there is more inActive people. If number of inActive player is the same doesn&#39;t matter which group I return.\r\n\r\nI group everything in Map \r\n\r\n    Map&lt;Group, List&lt;Person&gt;&gt; collect = people.stream()\r\n                .collect(Collectors.groupingBy(Person::getTeam));\r\n\r\n and than create two other map where I group scores and inActive people.\r\n\r\n    for (Map.Entry&lt;Group, List&lt;Person&gt;&gt; entry : collect.entrySet()) {\r\n        collect1.put(entry\r\n                .getKey(), entry.getValue().stream()\r\n                .mapToInt(Person::getScore).sum());\r\n        collect2.put(entry.getKey(), entry.getValue().stream()\r\n                .filter(p -&gt; !p.isActive())\r\n                .count());\r\n    }\r\n\r\nHow can I compare now to get result like in task.\r\n\r\n","title":"Comparing elements in HasMap with List as a value","body":"<p>I'm trying to do some exercises but I don't want to use if statement because program will be to long. I have a List people where:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Person {\n    private String name;\n    private Integer score;\n    private Group team;\n    private boolean active;\n} \n</code></pre>\n<p>and</p>\n<pre><code>public enum Group {\n    G1, G2, G3\n}\n</code></pre>\n<p>My job is to find a Group where Person have highest score but if score from two groups are the same I have to return group where there is more inActive people. If number of inActive player is the same doesn't matter which group I return.</p>\n<p>I group everything in Map</p>\n<pre><code>Map&lt;Group, List&lt;Person&gt;&gt; collect = people.stream()\n            .collect(Collectors.groupingBy(Person::getTeam));\n</code></pre>\n<p>and than create two other map where I group scores and inActive people.</p>\n<pre><code>for (Map.Entry&lt;Group, List&lt;Person&gt;&gt; entry : collect.entrySet()) {\n    collect1.put(entry\n            .getKey(), entry.getValue().stream()\n            .mapToInt(Person::getScore).sum());\n    collect2.put(entry.getKey(), entry.getValue().stream()\n            .filter(p -&gt; !p.isActive())\n            .count());\n}\n</code></pre>\n<p>How can I compare now to get result like in task.</p>\n"},{"tags":["java","eclipse","spring-boot","jpa"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1528836004,"post_id":50817803,"comment_id":88655870,"body_markdown":"Oxygen.2 Release 4.7.2 is a *version*, it tells us nothing about whether the JPA Tools are actually installed. So, are they?","body":"Oxygen.2 Release 4.7.2 is a <i>version</i>, it tells us nothing about whether the JPA Tools are actually installed. So, are they?"},{"owner":{"account_id":1767231,"reputation":7016,"user_id":1612814,"accept_rate":55,"display_name":"disasterkid"},"score":0,"creation_date":1528871321,"post_id":50817803,"comment_id":88664963,"body_markdown":"@nitind but they are not found in the Marketplace either. How do I add them is the problem.","body":"@nitind but they are not found in the Marketplace either. How do I add them is the problem."}],"answers":[{"tags":[],"owner":{"account_id":4505926,"reputation":838,"user_id":3663253,"display_name":"s.c"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555662171,"creation_date":1555661451,"answer_id":55758680,"question_id":50817803,"body_markdown":"you should add JPA facet to your project. \r\n\r\nProject -&gt; context menu -&gt; property -&gt; project facets -&gt; JPA\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThen click further configuration available.. \r\n\r\n[![enter image description here][2]][2]\r\n\r\nThen  you set DB connection  by clicking add connection.. Link\t\r\nChoose connection profile types\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThen set connection details\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e2QW3.png\r\n  [2]: https://i.stack.imgur.com/o2Zo1.png\r\n  [3]: https://i.stack.imgur.com/r8c8k.png\r\n  [4]: https://i.stack.imgur.com/qFQ3U.png","title":"JPA Tools Menu Missing From Eclipse","body":"<p>you should add JPA facet to your project. </p>\n\n<p>Project -> context menu -> property -> project facets -> JPA</p>\n\n<p><a href=\"https://i.stack.imgur.com/e2QW3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e2QW3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then click further configuration available.. </p>\n\n<p><a href=\"https://i.stack.imgur.com/o2Zo1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o2Zo1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then  you set DB connection  by clicking add connection.. Link<br>\nChoose connection profile types</p>\n\n<p><a href=\"https://i.stack.imgur.com/r8c8k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r8c8k.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then set connection details</p>\n\n<p><a href=\"https://i.stack.imgur.com/qFQ3U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qFQ3U.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":2278572,"reputation":1733,"user_id":2004265,"display_name":"DAB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637086710,"creation_date":1637086710,"answer_id":69994214,"question_id":50817803,"body_markdown":"The above answer is correct, but if you&#39;re missing the JPA Facet in your project properties, you should do this \r\n\r\nGo to help -&gt; install new software\r\n\r\nSearch for JPA \r\n\r\nSelect Web, XML, Java EE and OSGi Enterprise Development and install\r\n\r\nRestart Eclipse\r\n\r\nAlso see https://stackoverflow.com/questions/32111999/not-able-to-create-or-convert-a-project-in-to-jpa-project\r\n\r\n","title":"JPA Tools Menu Missing From Eclipse","body":"<p>The above answer is correct, but if you're missing the JPA Facet in your project properties, you should do this</p>\n<p>Go to help -&gt; install new software</p>\n<p>Search for JPA</p>\n<p>Select Web, XML, Java EE and OSGi Enterprise Development and install</p>\n<p>Restart Eclipse</p>\n<p>Also see <a href=\"https://stackoverflow.com/questions/32111999/not-able-to-create-or-convert-a-project-in-to-jpa-project\">Not able to create or convert a project in to JPA Project</a></p>\n"}],"owner":{"account_id":1767231,"reputation":7016,"user_id":1612814,"accept_rate":55,"display_name":"disasterkid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10533,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1637086710,"creation_date":1528808145,"question_id":50817803,"body_markdown":"I have created a [Spring Boot application][1] (Maven project) with JPA and SQL Server dependencies. When I open the project in Eclipse and right-click on my project in the Project Explorer, I do not seem the *JPA Tools* option.\r\n\r\nThe JPA section is also missing in the Project Facets.\r\n\r\n**Eclipse Version**: Oxygen.2 Release 4.7.2\r\n\r\n**Java Version**: 1.8\r\n\r\n**OS**: macOS High Sierra Version 10.13.4\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://start.spring.io/\r\n  [2]: https://i.stack.imgur.com/JmVbI.png","title":"JPA Tools Menu Missing From Eclipse","body":"<p>I have created a <a href=\"http://start.spring.io/\" rel=\"nofollow noreferrer\">Spring Boot application</a> (Maven project) with JPA and SQL Server dependencies. When I open the project in Eclipse and right-click on my project in the Project Explorer, I do not seem the <em>JPA Tools</em> option.</p>\n\n<p>The JPA section is also missing in the Project Facets.</p>\n\n<p><strong>Eclipse Version</strong>: Oxygen.2 Release 4.7.2</p>\n\n<p><strong>Java Version</strong>: 1.8</p>\n\n<p><strong>OS</strong>: macOS High Sierra Version 10.13.4</p>\n\n<p><a href=\"https://i.stack.imgur.com/JmVbI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JmVbI.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","debugging","testing"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1637077559,"post_id":69992072,"comment_id":123726555,"body_markdown":"So what does `setupURLConnection()` do? The mere fact that someone is testing something like this means that there&#39;s &quot;creativity&quot; in the air, and I don&#39;t mean that in the good way. `HttpsURLConnection` is abstract, you can override `equals()` to break the general contract, if you&#39;re doing something really weird.","body":"So what does <code>setupURLConnection()</code> do? The mere fact that someone is testing something like this means that there&#39;s &quot;creativity&quot; in the air, and I don&#39;t mean that in the good way. <code>HttpsURLConnection</code> is abstract, you can override <code>equals()</code> to break the general contract, if you&#39;re doing something really weird."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1637086658,"creation_date":1637078231,"answer_id":69992327,"question_id":69992072,"body_markdown":"# Known bug\r\n\r\nThe Java 8 version is broken since it violates the contract for `equals()`.\r\n\r\nWhat you actually get when you create a HttpsURLConnection is a `sun.net.www.protocol.https.HttpsURLConnectionImpl` that has actually an [`equals()`](https://github.com/openjdk/jdk8u/blob/master/jdk/src/share/classes/sun/net/www/protocol/https/HttpsURLConnectionImpl.java#L517) method:\r\n\r\n    public boolean equals(Object obj) {\r\n        return delegate.equals(obj);\r\n    }\r\n\r\nThe delegate (usually a `sun.net.www.protocol.https.DelegateHttpsURLConnection`) in turn correctly implements `equals()` and therefore returns false, since the delegate itself is not an instance of `HttpsURLConnectionImpl`.\r\n\r\nIf your test depends on this broken behaviour then your test should be considered broken too.\r\n\r\nSee Issue # JDK-8055299, [*HttpsURLConnection.equals() broken*](https://bugs.openjdk.java.net/browse/JDK-8055299). Bug exists in Java 7 and Java 8, fixed in Java 9 and later.","title":"Java 11: Strange behaviour with Object.equals() method","body":"<h1>Known bug</h1>\n<p>The Java 8 version is broken since it violates the contract for <code>equals()</code>.</p>\n<p>What you actually get when you create a HttpsURLConnection is a <code>sun.net.www.protocol.https.HttpsURLConnectionImpl</code> that has actually an <a href=\"https://github.com/openjdk/jdk8u/blob/master/jdk/src/share/classes/sun/net/www/protocol/https/HttpsURLConnectionImpl.java#L517\" rel=\"nofollow noreferrer\"><code>equals()</code></a> method:</p>\n<pre><code>public boolean equals(Object obj) {\n    return delegate.equals(obj);\n}\n</code></pre>\n<p>The delegate (usually a <code>sun.net.www.protocol.https.DelegateHttpsURLConnection</code>) in turn correctly implements <code>equals()</code> and therefore returns false, since the delegate itself is not an instance of <code>HttpsURLConnectionImpl</code>.</p>\n<p>If your test depends on this broken behaviour then your test should be considered broken too.</p>\n<p>See Issue # JDK-8055299, <a href=\"https://bugs.openjdk.java.net/browse/JDK-8055299\" rel=\"nofollow noreferrer\"><em>HttpsURLConnection.equals() broken</em></a>. Bug exists in Java 7 and Java 8, fixed in Java 9 and later.</p>\n"}],"owner":{"account_id":16542085,"reputation":23,"user_id":11952618,"display_name":"sbeven"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69992327,"answer_count":1,"score":2,"last_activity_date":1637086658,"creation_date":1637077228,"question_id":69992072,"body_markdown":"I am working on some Java 11 test code that is moved over from Java 8. The code looks like this:\r\n\r\n    HttpsURLConnection urlc = setupURLConnection(url);\r\n    boolean eqs = urlc.equals(urlc);\r\n    assertFalse(&quot;Unexpected equals returned&quot;, eqs);\r\n\r\nLooking at the Java 11 documentation, it mentions that any non-null reference object should return true when equals is called on itself. However, in Java 8 the above test passes the test, i.e. the above test determines urlc is not equal to itself in Java 8, while in Java 11 the test determines urlc is equal to itself. I can also confirm that the equals method is not overridden by anything, it is just the standard Object.equals method.\r\n\r\nWhich version of the test is correct and which is incorrect? Could it be possible that the test code is in fact right and there is some issue with the Java 11 code that is causing a test failure? Thanks for your help!","title":"Java 11: Strange behaviour with Object.equals() method","body":"<p>I am working on some Java 11 test code that is moved over from Java 8. The code looks like this:</p>\n<pre><code>HttpsURLConnection urlc = setupURLConnection(url);\nboolean eqs = urlc.equals(urlc);\nassertFalse(&quot;Unexpected equals returned&quot;, eqs);\n</code></pre>\n<p>Looking at the Java 11 documentation, it mentions that any non-null reference object should return true when equals is called on itself. However, in Java 8 the above test passes the test, i.e. the above test determines urlc is not equal to itself in Java 8, while in Java 11 the test determines urlc is equal to itself. I can also confirm that the equals method is not overridden by anything, it is just the standard Object.equals method.</p>\n<p>Which version of the test is correct and which is incorrect? Could it be possible that the test code is in fact right and there is some issue with the Java 11 code that is causing a test failure? Thanks for your help!</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":6631961,"reputation":464,"user_id":5120388,"accept_rate":57,"display_name":"newcoder"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1637085962,"creation_date":1637085962,"answer_id":69994076,"question_id":69993805,"body_markdown":"can you try to change the cascade type for Teacher class to \r\n\r\n    @ManyToMany(cascade = {CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\r\n\r\n\r\n\r\n","title":"ERROR: update or delete on table &quot;courses&quot; violates foreign key constraint &quot;fk998yb1badftsiklfh13bcw3ol&quot; on table &quot;teacher_courses&quot;","body":"<p>can you try to change the cascade type for Teacher class to</p>\n<pre><code>@ManyToMany(cascade = {CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23348762,"reputation":31,"user_id":17422620,"display_name":"Richard Smith-Uchotski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637086225,"creation_date":1637086225,"answer_id":69994125,"question_id":69993805,"body_markdown":"My friend found a solution that works through this, https://stackoverflow.com/questions/1082095/how-to-remove-entity-with-manytomany-relationship-in-jpa-and-corresponding-join.\r\n\r\nIn the end, I just put\r\n\r\n```\r\n  @PreRemove\r\n    private void removeCoursesFromTeacher() {\r\n        for (Teacher t : teacherList) {\r\n            t.getCourseList().remove(this);\r\n        }\r\n    }\r\n```\r\n\r\nOn the none owning side of the relationship. \r\n","title":"ERROR: update or delete on table &quot;courses&quot; violates foreign key constraint &quot;fk998yb1badftsiklfh13bcw3ol&quot; on table &quot;teacher_courses&quot;","body":"<p>My friend found a solution that works through this, <a href=\"https://stackoverflow.com/questions/1082095/how-to-remove-entity-with-manytomany-relationship-in-jpa-and-corresponding-join\">How to remove entity with ManyToMany relationship in JPA (and corresponding join table rows)?</a>.</p>\n<p>In the end, I just put</p>\n<pre><code>  @PreRemove\n    private void removeCoursesFromTeacher() {\n        for (Teacher t : teacherList) {\n            t.getCourseList().remove(this);\n        }\n    }\n</code></pre>\n<p>On the none owning side of the relationship.</p>\n"}],"owner":{"account_id":23348762,"reputation":31,"user_id":17422620,"display_name":"Richard Smith-Uchotski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3994,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1637086225,"creation_date":1637084702,"question_id":69993805,"body_markdown":"I have two entities, in a model of five entities and when I run my code there are no errors. However, whenever I make delete all request from insomnia, I get the error: org.postgresql.util.PSQLException: ERROR: update or delete on table &quot;courses&quot; violates foreign key constraint &quot;fk998yb1badftsiklfh13bcw3ol&quot; on table &quot;teacher_courses&quot;\r\n  Detail: Key (id)=(1) is still referenced from table &quot;teacher_courses&quot;.\r\n\r\nI understand that there is something wrong with the cascading between the two items, but I do not know how to resolve the issues. \r\n\r\n```\r\npackage com.example.springapiwithsecuritydevelopment.model;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\nimport java.time.LocalDate;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Table(name = &quot;courses&quot;)\r\n@Getter @Setter\r\npublic class Course {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column\r\n    private Integer id;\r\n\r\n    @Column(unique = true)\r\n    private String courseName;\r\n\r\n    @Column\r\n    private LocalDate courseStartDate;\r\n\r\n    @Column\r\n    private LocalDate courseEndDate;\r\n\r\n    // One course to many lessons\r\n    @OneToMany(mappedBy = &quot;course&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JsonIgnoreProperties(&quot;course&quot;)\r\n    private List&lt;Lesson&gt; lessonList;\r\n\r\n    // Many courses to many Students\r\n    @ManyToMany(mappedBy = &quot;courseList&quot;, fetch = FetchType.LAZY, cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.REMOVE})\r\n    @JsonIgnoreProperties(&quot;courseList&quot;)\r\n    private List&lt;Student&gt; studentList;\r\n\r\n    // Subject to course\r\n    @ManyToOne()\r\n    @JoinColumn(name = &quot;subject_id&quot;)\r\n    @JsonIgnoreProperties(&quot;courseList&quot;)\r\n    private Subject subject;\r\n\r\n    // ManyCourses to Many Teachers\r\n    @ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;courseList&quot;, cascade = {CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH})\r\n    @JsonIgnoreProperties(&quot;courseList&quot;)\r\n    private List&lt;Teacher&gt; teacherList;\r\n\r\n    // Adding constructors\r\n    public Course() {\r\n    }\r\n\r\n    public Course(String courseName, LocalDate courseStartDate, LocalDate courseEndDate) {\r\n        this.courseName = courseName;\r\n        this.courseStartDate = courseStartDate;\r\n        this.courseEndDate = courseEndDate;\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\npackage com.example.springapiwithsecuritydevelopment.model;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\nimport javax.validation.constraints.NotNull;\r\nimport java.time.LocalDate;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Getter @Setter\r\npublic class Teacher {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    @Column\r\n    private String firstName;\r\n\r\n    @Column\r\n    private String secondName;\r\n\r\n    @Column(nullable = false) @NotNull\r\n    private LocalDate birthday;\r\n\r\n    @Column\r\n    private Integer age;\r\n\r\n    @ManyToMany(cascade = {CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH}, fetch = FetchType.LAZY)\r\n    @JoinTable(\r\n            name = &quot;teacher_courses&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;teacher_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)\r\n    )\r\n    @JsonIgnoreProperties(&quot;teacherList&quot;)\r\n    private List&lt;Course&gt; courseList;\r\n\r\n\r\n    // Adding constructors\r\n    public Teacher() {\r\n    }\r\n\r\n    public Teacher(String firstName, String secondName, LocalDate birthday, Integer age) {\r\n        this.firstName = firstName;\r\n        this.secondName = secondName;\r\n        this.birthday = birthday;\r\n        this.age = age;\r\n    }\r\n}\r\n\r\n```","title":"ERROR: update or delete on table &quot;courses&quot; violates foreign key constraint &quot;fk998yb1badftsiklfh13bcw3ol&quot; on table &quot;teacher_courses&quot;","body":"<p>I have two entities, in a model of five entities and when I run my code there are no errors. However, whenever I make delete all request from insomnia, I get the error: org.postgresql.util.PSQLException: ERROR: update or delete on table &quot;courses&quot; violates foreign key constraint &quot;fk998yb1badftsiklfh13bcw3ol&quot; on table &quot;teacher_courses&quot;\nDetail: Key (id)=(1) is still referenced from table &quot;teacher_courses&quot;.</p>\n<p>I understand that there is something wrong with the cascading between the two items, but I do not know how to resolve the issues.</p>\n<pre><code>package com.example.springapiwithsecuritydevelopment.model;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Entity\n@Table(name = &quot;courses&quot;)\n@Getter @Setter\npublic class Course {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column\n    private Integer id;\n\n    @Column(unique = true)\n    private String courseName;\n\n    @Column\n    private LocalDate courseStartDate;\n\n    @Column\n    private LocalDate courseEndDate;\n\n    // One course to many lessons\n    @OneToMany(mappedBy = &quot;course&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    @JsonIgnoreProperties(&quot;course&quot;)\n    private List&lt;Lesson&gt; lessonList;\n\n    // Many courses to many Students\n    @ManyToMany(mappedBy = &quot;courseList&quot;, fetch = FetchType.LAZY, cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.REMOVE})\n    @JsonIgnoreProperties(&quot;courseList&quot;)\n    private List&lt;Student&gt; studentList;\n\n    // Subject to course\n    @ManyToOne()\n    @JoinColumn(name = &quot;subject_id&quot;)\n    @JsonIgnoreProperties(&quot;courseList&quot;)\n    private Subject subject;\n\n    // ManyCourses to Many Teachers\n    @ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;courseList&quot;, cascade = {CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH})\n    @JsonIgnoreProperties(&quot;courseList&quot;)\n    private List&lt;Teacher&gt; teacherList;\n\n    // Adding constructors\n    public Course() {\n    }\n\n    public Course(String courseName, LocalDate courseStartDate, LocalDate courseEndDate) {\n        this.courseName = courseName;\n        this.courseStartDate = courseStartDate;\n        this.courseEndDate = courseEndDate;\n    }\n\n\n}\n\n</code></pre>\n<pre><code>package com.example.springapiwithsecuritydevelopment.model;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport javax.validation.constraints.NotNull;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Entity\n@Getter @Setter\npublic class Teacher {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @Column\n    private String firstName;\n\n    @Column\n    private String secondName;\n\n    @Column(nullable = false) @NotNull\n    private LocalDate birthday;\n\n    @Column\n    private Integer age;\n\n    @ManyToMany(cascade = {CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH}, fetch = FetchType.LAZY)\n    @JoinTable(\n            name = &quot;teacher_courses&quot;,\n            joinColumns = @JoinColumn(name = &quot;teacher_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)\n    )\n    @JsonIgnoreProperties(&quot;teacherList&quot;)\n    private List&lt;Course&gt; courseList;\n\n\n    // Adding constructors\n    public Teacher() {\n    }\n\n    public Teacher(String firstName, String secondName, LocalDate birthday, Integer age) {\n        this.firstName = firstName;\n        this.secondName = secondName;\n        this.birthday = birthday;\n        this.age = age;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android","rest","out-of-memory"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636672914,"creation_date":1636672441,"answer_id":69936086,"question_id":69935906,"body_markdown":"&gt; and my app is running out of memory\r\n\r\nThat is not exactly what the error says: `Caused by: java.lang.OutOfMemoryError: Failed to allocate a 37748744 byte allocation with 25165824 free bytes and 24MB until OOM`. You have 24MB of free memory. However, you are trying to allocate a 36MB single buffer, and that is not going to work. Even if you had 124MB or 524MB of free memory, you might not have access to a single 36MB contiguous block of free memory.\r\n\r\n&gt; Converts API response to String\r\n\r\nEither:\r\n\r\n- Request far fewer items from your REST Web service at a time (instead of 200, try 5); or\r\n- Stop trying to read the entire API response into a string, as your API response is very large\r\n\r\nYou might want to try more modern solutions for accessing a REST-style Web service. For example, [Retrofit](https://square.github.io/retrofit/) is rather popular and would not require you to read the entire raw JSON into a single string. Even if you wanted to stick with the `openStream()`-on-a-`URL` approach, modern JSON parsers (Moshi, Gson, or even the `JsonReader` in the Android SDK) are streaming parsers and would not require you to read the entire raw JSON into a single string.","title":"OutOfMemoryError: Failed to allocate when paging through responses","body":"<blockquote>\n<p>and my app is running out of memory</p>\n</blockquote>\n<p>That is not exactly what the error says: <code>Caused by: java.lang.OutOfMemoryError: Failed to allocate a 37748744 byte allocation with 25165824 free bytes and 24MB until OOM</code>. You have 24MB of free memory. However, you are trying to allocate a 36MB single buffer, and that is not going to work. Even if you had 124MB or 524MB of free memory, you might not have access to a single 36MB contiguous block of free memory.</p>\n<blockquote>\n<p>Converts API response to String</p>\n</blockquote>\n<p>Either:</p>\n<ul>\n<li>Request far fewer items from your REST Web service at a time (instead of 200, try 5); or</li>\n<li>Stop trying to read the entire API response into a string, as your API response is very large</li>\n</ul>\n<p>You might want to try more modern solutions for accessing a REST-style Web service. For example, <a href=\"https://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">Retrofit</a> is rather popular and would not require you to read the entire raw JSON into a single string. Even if you wanted to stick with the <code>openStream()</code>-on-a-<code>URL</code> approach, modern JSON parsers (Moshi, Gson, or even the <code>JsonReader</code> in the Android SDK) are streaming parsers and would not require you to read the entire raw JSON into a single string.</p>\n"},{"tags":[],"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637084104,"creation_date":1637084104,"answer_id":69993672,"question_id":69935906,"body_markdown":"Turns out the authority that I was calling had a limit to how many pages you can request.\r\n\r\nper_Page count limit was 200 results for page. But the page_count limit was page * per_Page &gt; 1000. So it didn&#39;t matter what the per_page count was. If the page * per_Page &gt; 1000 than it would cancel the call. Even in the middle of a stream.","title":"OutOfMemoryError: Failed to allocate when paging through responses","body":"<p>Turns out the authority that I was calling had a limit to how many pages you can request.</p>\n<p>per_Page count limit was 200 results for page. But the page_count limit was page * per_Page &gt; 1000. So it didn't matter what the per_page count was. If the page * per_Page &gt; 1000 than it would cancel the call. Even in the middle of a stream.</p>\n"},{"tags":[],"owner":{"account_id":10391530,"reputation":1075,"user_id":7662663,"display_name":"rhaldar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637085354,"creation_date":1637085354,"answer_id":69993941,"question_id":69935906,"body_markdown":"Add in your manifest **android:hardwareAccelerated=&quot;false&quot;** , **android:largeHeap=&quot;true&quot;** it is working for some situations,\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:hardwareAccelerated=&quot;false&quot;\r\n        android:largeHeap=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;","title":"OutOfMemoryError: Failed to allocate when paging through responses","body":"<p>Add in your manifest <strong>android:hardwareAccelerated=&quot;false&quot;</strong> , <strong>android:largeHeap=&quot;true&quot;</strong> it is working for some situations,</p>\n<pre><code>&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:hardwareAccelerated=&quot;false&quot;\n    android:largeHeap=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/AppTheme&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1420,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69993672,"answer_count":3,"score":3,"last_activity_date":1637085354,"creation_date":1636671046,"question_id":69935906,"body_markdown":"I&#39;m receiving the following OutOfMemoryError exception try to page through responses from an API\r\n\r\n&gt; Caused by: java.lang.OutOfMemoryError: Failed to allocate a 37748744 byte allocation with 25165824 free bytes and 24MB until OOM, target footprint 268261936, growth limit 268435456\r\n        at java.util.Arrays.copyOf(Arrays.java:3257)\r\n        at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:124)\r\n        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:649)\r\n        at java.lang.StringBuilder.append(StringBuilder.java:203)\r\n        at com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.readAll(INatCall.java:105)\r\n        at com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:56)\r\n        at com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:75)\r\n        at com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:75)\r\n        at com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:75)\r\n        at com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.doInBackground(INatCall.java:42)\r\n\r\n\r\n\r\nIs there a more effective way of handling a large set of data through rest?\r\nMy app calls an API that returns a user&#39;s &#39;entries&#39;. The API&#39;s max page count is 200. Most users will have more than 200 entries, and this has been fine for the most part. My app can page and account for that. However, there are some users that will have +2000 entries and my app is running out of memory trying to iterate through these larger sets.\r\nMy questions are:\r\n\r\n - Is there a way to increase the amount of memory my android app can\r\n   use?\r\n - What are some ways that I can optimize the below code to use less\r\n   memory?\r\n\r\nRecursive rest call\r\n---\r\n\r\n       private JSONArray restCall(URL url, JSONArray results) {\r\n            Log.d(TAG, &quot;restCalliNat: Start&quot;);\r\n            InputStream is = null;\r\n            int totalResults = 0;\r\n            int perPage = 0;\r\n            JSONArray newResults = new JSONArray();\r\n            try {\r\n                is = url.openStream();\r\n                BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName(&quot;UTF-8&quot;)));\r\n                String jsonText = readAll(rd); //&lt;-- LINE 56\r\n                is.close();\r\n                rd.close();\r\n                JSONObject json = new JSONObject(jsonText);\r\n                newResults = json.getJSONArray(&quot;results&quot;);\r\n                totalResults = (int) json.get(&quot;total_results&quot;);\r\n                perPage = (int) json.get(&quot;per_page&quot;);\r\n    \r\n            } catch (IOException | JSONException e) {\r\n                e.printStackTrace();\r\n                return null;\r\n            }\r\n    \r\n            if (results != null) {\r\n                newResults = concatArray(results, newResults);\r\n            }\r\n    \r\n            if (totalResults &gt; page*perPage) {\r\n    \r\n                newResults = restCall(updatePageCount(url), newResults);\r\n            }\r\n            return newResults;\r\n        }\r\n\r\n At each new page, the new page gets concatenated until I have all the entries. \r\n\r\n    private JSONArray concatArray(JSONArray arr1, JSONArray arr2) {\r\n        JSONArray result = new JSONArray();\r\n        try {\r\n            for (int i = 0; i &lt; arr1.length(); i++) {\r\n                result.put(arr1.get(i));\r\n            }\r\n            for (int i = 0; i &lt; arr2.length(); i++) {\r\n                result.put(arr2.get(i));\r\n            }\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\nConverts API response to String\r\n\r\n    private static String readAll(Reader rd) throws IOException {\r\n        StringBuilder sb = new StringBuilder();\r\n        int cp;\r\n        while ((cp = rd.read()) != -1) {\r\n            sb.append((char) cp); //&lt;--- LINE 105\r\n        }\r\n        return sb.toString();\r\n    }","title":"OutOfMemoryError: Failed to allocate when paging through responses","body":"<p>I'm receiving the following OutOfMemoryError exception try to page through responses from an API</p>\n<blockquote>\n<p>Caused by: java.lang.OutOfMemoryError: Failed to allocate a 37748744 byte allocation with 25165824 free bytes and 24MB until OOM, target footprint 268261936, growth limit 268435456\nat java.util.Arrays.copyOf(Arrays.java:3257)\nat java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:124)\nat java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:649)\nat java.lang.StringBuilder.append(StringBuilder.java:203)\nat com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.readAll(INatCall.java:105)\nat com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:56)\nat com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:75)\nat com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:75)\nat com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.restCalliNat(INatCall.java:75)\nat com.richmondgamesstudio.inattaxonomytreeviewer.utils.INatCall.doInBackground(INatCall.java:42)</p>\n</blockquote>\n<p>Is there a more effective way of handling a large set of data through rest?\nMy app calls an API that returns a user's 'entries'. The API's max page count is 200. Most users will have more than 200 entries, and this has been fine for the most part. My app can page and account for that. However, there are some users that will have +2000 entries and my app is running out of memory trying to iterate through these larger sets.\nMy questions are:</p>\n<ul>\n<li>Is there a way to increase the amount of memory my android app can\nuse?</li>\n<li>What are some ways that I can optimize the below code to use less\nmemory?</li>\n</ul>\n<h2>Recursive rest call</h2>\n<pre><code>   private JSONArray restCall(URL url, JSONArray results) {\n        Log.d(TAG, &quot;restCalliNat: Start&quot;);\n        InputStream is = null;\n        int totalResults = 0;\n        int perPage = 0;\n        JSONArray newResults = new JSONArray();\n        try {\n            is = url.openStream();\n            BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName(&quot;UTF-8&quot;)));\n            String jsonText = readAll(rd); //&lt;-- LINE 56\n            is.close();\n            rd.close();\n            JSONObject json = new JSONObject(jsonText);\n            newResults = json.getJSONArray(&quot;results&quot;);\n            totalResults = (int) json.get(&quot;total_results&quot;);\n            perPage = (int) json.get(&quot;per_page&quot;);\n\n        } catch (IOException | JSONException e) {\n            e.printStackTrace();\n            return null;\n        }\n\n        if (results != null) {\n            newResults = concatArray(results, newResults);\n        }\n\n        if (totalResults &gt; page*perPage) {\n\n            newResults = restCall(updatePageCount(url), newResults);\n        }\n        return newResults;\n    }\n</code></pre>\n<p>At each new page, the new page gets concatenated until I have all the entries.</p>\n<pre><code>private JSONArray concatArray(JSONArray arr1, JSONArray arr2) {\n    JSONArray result = new JSONArray();\n    try {\n        for (int i = 0; i &lt; arr1.length(); i++) {\n            result.put(arr1.get(i));\n        }\n        for (int i = 0; i &lt; arr2.length(); i++) {\n            result.put(arr2.get(i));\n        }\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n    return result;\n}\n</code></pre>\n<p>Converts API response to String</p>\n<pre><code>private static String readAll(Reader rd) throws IOException {\n    StringBuilder sb = new StringBuilder();\n    int cp;\n    while ((cp = rd.read()) != -1) {\n        sb.append((char) cp); //&lt;--- LINE 105\n    }\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":["java","android","android-external-storage","scoped-storage"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1637086832,"post_id":69993887,"comment_id":123730509,"body_markdown":"Save your data in `getExternalFilesDir()`, and use `FileProvider` to make it available via your `ACTION_SEND` `Intent` for sharing.","body":"Save your data in <code>getExternalFilesDir()</code>, and use <code>FileProvider</code> to make it available via your <code>ACTION_SEND</code> <code>Intent</code> for sharing."},{"owner":{"account_id":23133182,"reputation":21,"user_id":17237772,"display_name":"Noah"},"score":0,"creation_date":1637087370,"post_id":69993887,"comment_id":123730712,"body_markdown":"but according to the docs *When the user uninstalls your app, the files saved in app-specific storage are removed*. And I saw `getExternalFilesDir()` in that guide. Will the data I save get deleted when the user uninstall my app.","body":"but according to the docs <i>When the user uninstalls your app, the files saved in app-specific storage are removed</i>. And I saw <code>getExternalFilesDir()</code> in that guide. Will the data I save get deleted when the user uninstall my app."},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1637087619,"post_id":69993887,"comment_id":123730816,"body_markdown":"Yes, it will get deleted. However, that is true pretty much of wherever you place the content, if you do not involve the user. Of course, the user is welcome to copy the data out of your `getExternalFilesDir()` location too. One way or another, the user is going to need to get involved.","body":"Yes, it will get deleted. However, that is true pretty much of wherever you place the content, if you do not involve the user. Of course, the user is welcome to copy the data out of your <code>getExternalFilesDir()</code> location too. One way or another, the user is going to need to get involved."},{"owner":{"account_id":23133182,"reputation":21,"user_id":17237772,"display_name":"Noah"},"score":0,"creation_date":1637088268,"post_id":69993887,"comment_id":123731009,"body_markdown":"Oh, then the user can copy it to another folder and maybe share it later on, and the only problem is the file is deleted when the app is uninstalled. And would that directory be visible to the user ?","body":"Oh, then the user can copy it to another folder and maybe share it later on, and the only problem is the file is deleted when the app is uninstalled. And would that directory be visible to the user ?"},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1637088511,"post_id":69993887,"comment_id":123731093,"body_markdown":"&quot;And would that directory be visible to the user ?&quot; -- yes. Most likely, you have a bunch of similar directories already, on external storage in `Android/`. The location isn&#39;t the most user-friendly spot, given that it needs to have unique subdirectories per app and most users are unfamiliar with application IDs.","body":"&quot;And would that directory be visible to the user ?&quot; -- yes. Most likely, you have a bunch of similar directories already, on external storage in <code>Android&#47;</code>. The location isn&#39;t the most user-friendly spot, given that it needs to have unique subdirectories per app and most users are unfamiliar with application IDs."},{"owner":{"account_id":23133182,"reputation":21,"user_id":17237772,"display_name":"Noah"},"score":1,"creation_date":1637088954,"post_id":69993887,"comment_id":123731233,"body_markdown":"Thank you sir for the reply. This is exactly what I needed to know. Now I will make my choice on which route I will take. I also want to add that I read your **First Generation Android Developers book, Busy Coder&#39;s Guide to Android Development** and I still visit your blog. Your book really helped me a lot.","body":"Thank you sir for the reply. This is exactly what I needed to know. Now I will make my choice on which route I will take. I also want to add that I read your <b>First Generation Android Developers book, Busy Coder&#39;s Guide to Android Development</b> and I still visit your blog. Your book really helped me a lot."}],"owner":{"account_id":23133182,"reputation":21,"user_id":17237772,"display_name":"Noah"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637085120,"creation_date":1637085120,"question_id":69993887,"body_markdown":"So, I have been searching the Android developer docs, StackOverflow, Google, Medium and everywhere possible to find a way to implement this feature but everything is just confusing.\r\n\r\n**What I want**: In my app, I have an SQLiteOpenHelper database managing my SQLite database and it&#39;s very huge. I would like to retrieve some data from the database (different tables) and then zip them and create my own file extension so that I can save it in a folder on the Android device. I found different solutions on the developers&#39; website but the closest I got was going to let the user select where they would want to place the exported file, using a chooser activity, I guess. But I just want to export the file without user interaction (I get to decide where I put the files myself and not the user). \r\n\r\nAfter exporting the file, I would then provide a share button to share the file to another app. Or if the user doesn&#39;t want to share it now, then I provide the location of the file so that the user can do it manually, later, if he/she likes.\r\n\r\nThanks for any help in advance.","title":"Is there a straightforward way to implement Export and Share feature that still works on Android 12?","body":"<p>So, I have been searching the Android developer docs, StackOverflow, Google, Medium and everywhere possible to find a way to implement this feature but everything is just confusing.</p>\n<p><strong>What I want</strong>: In my app, I have an SQLiteOpenHelper database managing my SQLite database and it's very huge. I would like to retrieve some data from the database (different tables) and then zip them and create my own file extension so that I can save it in a folder on the Android device. I found different solutions on the developers' website but the closest I got was going to let the user select where they would want to place the exported file, using a chooser activity, I guess. But I just want to export the file without user interaction (I get to decide where I put the files myself and not the user).</p>\n<p>After exporting the file, I would then provide a share button to share the file to another app. Or if the user doesn't want to share it now, then I provide the location of the file so that the user can do it manually, later, if he/she likes.</p>\n<p>Thanks for any help in advance.</p>\n"},{"tags":["java","android","flutter","dart","flutter-layout"],"comments":[{"owner":{"account_id":19161558,"reputation":12205,"user_id":13997210,"display_name":"Ravindra S. Patil"},"score":0,"creation_date":1626602166,"post_id":68427699,"comment_id":120932444,"body_markdown":"Try to width double.infinity","body":"Try to width double.infinity"},{"owner":{"account_id":14061061,"reputation":56930,"user_id":10157127,"display_name":"Md. Yeasin Sheikh"},"score":0,"creation_date":1626602917,"post_id":68427699,"comment_id":120932579,"body_markdown":"can you share where you are using `AppDrawerNew `, i think wrap with `Row` and give `Container width`","body":"can you share where you are using <code>AppDrawerNew </code>, i think wrap with <code>Row</code> and give <code>Container width</code>"}],"answers":[{"tags":[],"owner":{"account_id":17323727,"reputation":2011,"user_id":12548494,"display_name":"Aristidios"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626602942,"creation_date":1626602942,"answer_id":68428049,"question_id":68427699,"body_markdown":"\r\nGive this a try &#128578;\r\n\r\n\r\n```\r\nContainer(\r\n      constraints: BoxConstraints(minWidth: 50, maxWidth: 50),\r\n      color: Colors.green,\r\n)\r\n```","title":"Container takes entire width even though the width is set to 50","body":"<p>Give this a try 🙂</p>\n<pre><code>Container(\n      constraints: BoxConstraints(minWidth: 50, maxWidth: 50),\n      color: Colors.green,\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22032345,"reputation":32,"user_id":16299428,"display_name":"Mohammad Khaled Nimrini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1626603060,"creation_date":1626603060,"answer_id":68428065,"question_id":68427699,"body_markdown":"    import &#39;package:flutter/material.dart&#39;;\r\n    \r\n    void main() {\r\n      runApp(AppDrawerNew());\r\n    }\r\n    class AppDrawerNew extends StatelessWidget {\r\n      @override\r\n      Widget build(BuildContext context) {\r\n        return MaterialApp(\r\n          home: Scaffold(\r\n              body: Container(\r\n                width: 50.0,\r\n                height: 100.0,\r\n                color: Colors.green,\r\n              ),\r\n          ),\r\n        );\r\n      }\r\n    }\r\n\r\nthe container must be a child of MaterialApp and Scaffold","title":"Container takes entire width even though the width is set to 50","body":"<pre><code>import 'package:flutter/material.dart';\n\nvoid main() {\n  runApp(AppDrawerNew());\n}\nclass AppDrawerNew extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      home: Scaffold(\n          body: Container(\n            width: 50.0,\n            height: 100.0,\n            color: Colors.green,\n          ),\n      ),\n    );\n  }\n}\n</code></pre>\n<p>the container must be a child of MaterialApp and Scaffold</p>\n"},{"tags":[],"owner":{"account_id":18018677,"reputation":1087,"user_id":13096514,"display_name":"Felipe Sales"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626616327,"creation_date":1626616327,"answer_id":68429766,"question_id":68427699,"body_markdown":"Study about **constraints** concept, it is more important! \r\n\r\nIn documentation is the best for this: \r\nhttps://flutter.dev/docs/development/ui/layout/constraints","title":"Container takes entire width even though the width is set to 50","body":"<p>Study about <strong>constraints</strong> concept, it is more important!</p>\n<p>In documentation is the best for this:\n<a href=\"https://flutter.dev/docs/development/ui/layout/constraints\" rel=\"nofollow noreferrer\">https://flutter.dev/docs/development/ui/layout/constraints</a></p>\n"}],"owner":{"account_id":8199895,"reputation":638,"user_id":6171556,"display_name":"xpetta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68428065,"answer_count":3,"score":0,"last_activity_date":1637084986,"creation_date":1626600040,"question_id":68427699,"body_markdown":"I&#39;m observing a very strange behavior. I have set the `width` of the `Container` to `50` even then it&#39;s taking the entire `width` of the screen. \r\n\r\n```\r\nimport &#39;package:flutter/material.dart&#39;;\r\n\r\nclass AppDrawerNew extends StatelessWidget {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Container(\r\n      width: 50,\r\n      color: Colors.green,\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nI tried wrapping the `Container` inside a `SizedBox` as well. Even then it occupies the entire `width` of the screen.\r\n\r\n```\r\nclass AppDrawerNew extends StatelessWidget {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return SizedBox(\r\n      width: 50.0,\r\n      child: Container(\r\n        color: Colors.green,\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\nI&#39;m not sure what exactly I&#39;m doing wrong. What can I try next?\r\n","title":"Container takes entire width even though the width is set to 50","body":"<p>I'm observing a very strange behavior. I have set the <code>width</code> of the <code>Container</code> to <code>50</code> even then it's taking the entire <code>width</code> of the screen.</p>\n<pre><code>import 'package:flutter/material.dart';\n\nclass AppDrawerNew extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      width: 50,\n      color: Colors.green,\n    );\n  }\n}\n</code></pre>\n<p>I tried wrapping the <code>Container</code> inside a <code>SizedBox</code> as well. Even then it occupies the entire <code>width</code> of the screen.</p>\n<pre><code>class AppDrawerNew extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return SizedBox(\n      width: 50.0,\n      child: Container(\n        color: Colors.green,\n      ),\n    );\n  }\n}\n</code></pre>\n<p>I'm not sure what exactly I'm doing wrong. What can I try next?</p>\n"},{"tags":["java","spring-boot","spring-mvc","authentication","spring-security"],"comments":[{"owner":{"account_id":3274729,"reputation":560,"user_id":2757155,"accept_rate":75,"display_name":"Raman"},"score":0,"creation_date":1637046228,"post_id":69984937,"comment_id":123713520,"body_markdown":"Have you tried setting `@ComponentScan({&quot;mis&quot;})`?","body":"Have you tried setting <code>@ComponentScan({&quot;mis&quot;})</code>?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1637046944,"post_id":69984937,"comment_id":123713735,"body_markdown":"Due to your package structure things aren&#39;t picked up. Instead of placing your `BitmisApplication` in `mis.main` move it to `mis`. Ditch all the annotations but `@SpringBootApplication` and everything will work.","body":"Due to your package structure things aren&#39;t picked up. Instead of placing your <code>BitmisApplication</code> in <code>mis.main</code> move it to <code>mis</code>. Ditch all the annotations but <code>@SpringBootApplication</code> and everything will work."},{"owner":{"account_id":21686462,"reputation":13,"user_id":16001839,"display_name":"348_Amit Potdukhe."},"score":0,"creation_date":1637048272,"post_id":69984937,"comment_id":123714180,"body_markdown":"Yes ive tried but didnt work","body":"Yes ive tried but didnt work"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1637084096,"post_id":69984937,"comment_id":123729444,"body_markdown":"please do not just post your code and explain in one sentence that it is not working. Where are your logs, the steps to reproduce, your requests, lack of debugging details, downvoted and voted to close.","body":"please do not just post your code and explain in one sentence that it is not working. Where are your logs, the steps to reproduce, your requests, lack of debugging details, downvoted and voted to close."}],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637084963,"creation_date":1637084963,"answer_id":69993852,"question_id":69984937,"body_markdown":"the spring application can&#39;t find your configs since your project structure is faulty and you have added faulty custom configuration.\r\n\r\nthe `@SpringBootApplication` class will per default scan the package it is in `mis.main` and all packages below this one (mis.main.*.*.* etc) in order to find all spring annotated classes and load them.\r\n\r\nYou have placed your configuration files in `mis.config` which is not directly below `mis.main`, and you have files in `mis.entity` which is also not beneath `mis.main`.\r\n\r\nYou have also added\r\n```\r\n@ComponentScan({&quot;mis.controller&quot;, &quot;mis.services&quot;})\r\n@EntityScan(&quot;mis.entity&quot;)\r\n```\r\nin order to try to find the configuration files but failed to specify `mis.config` as a folder to scan in.\r\n\r\nThe simplest solution would be to\r\n- remove to two annotations i mentioned above.\r\n- move the main class into the package `mis` and then delete the package `mis.main` so that the main class is at the project root.\r\n\r\nsome other things:\r\n```\r\n@Bean\r\npublic DaoAuthenticationProvider authenticationProvider() {\r\n    DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n    authProvider.setUserDetailsService(userDetailsService());\r\n    authProvider.setPasswordEncoder(passwordEncoder());\r\n         \r\n    return authProvider;\r\n}\r\n \r\n@Override\r\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    auth.authenticationProvider(authenticationProvider());\r\n}\r\n```\r\nis not needed and can be removed, because you have declared a custom `UserDetailsService` and `PasswordEncoder` as beans, they will automatically be picked up by the system and included into spring and it will set up DaoAuthentication for you automatically.\r\n\r\nIf you are learning you should read the spring security reference docs all this is mentioned there.\r\n","title":"I am trying to implement spring security ive configured everything but still not working","body":"<p>the spring application can't find your configs since your project structure is faulty and you have added faulty custom configuration.</p>\n<p>the <code>@SpringBootApplication</code> class will per default scan the package it is in <code>mis.main</code> and all packages below this one (mis.main.<em>.</em>.* etc) in order to find all spring annotated classes and load them.</p>\n<p>You have placed your configuration files in <code>mis.config</code> which is not directly below <code>mis.main</code>, and you have files in <code>mis.entity</code> which is also not beneath <code>mis.main</code>.</p>\n<p>You have also added</p>\n<pre><code>@ComponentScan({&quot;mis.controller&quot;, &quot;mis.services&quot;})\n@EntityScan(&quot;mis.entity&quot;)\n</code></pre>\n<p>in order to try to find the configuration files but failed to specify <code>mis.config</code> as a folder to scan in.</p>\n<p>The simplest solution would be to</p>\n<ul>\n<li>remove to two annotations i mentioned above.</li>\n<li>move the main class into the package <code>mis</code> and then delete the package <code>mis.main</code> so that the main class is at the project root.</li>\n</ul>\n<p>some other things:</p>\n<pre><code>@Bean\npublic DaoAuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n    authProvider.setUserDetailsService(userDetailsService());\n    authProvider.setPasswordEncoder(passwordEncoder());\n         \n    return authProvider;\n}\n \n@Override\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth.authenticationProvider(authenticationProvider());\n}\n</code></pre>\n<p>is not needed and can be removed, because you have declared a custom <code>UserDetailsService</code> and <code>PasswordEncoder</code> as beans, they will automatically be picked up by the system and included into spring and it will set up DaoAuthentication for you automatically.</p>\n<p>If you are learning you should read the spring security reference docs all this is mentioned there.</p>\n"}],"owner":{"account_id":21686462,"reputation":13,"user_id":16001839,"display_name":"348_Amit Potdukhe."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69993852,"answer_count":1,"score":0,"last_activity_date":1637084963,"creation_date":1637045954,"question_id":69984937,"body_markdown":"spring security not using details from database for authentication and generating password in console also not using my customized login form.\r\n\r\n\r\n\r\n**Main class--**\r\n\r\n\r\n    package mis.main;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    \r\n    @SpringBootApplication\r\n    @ComponentScan({&quot;mis.controller&quot;, &quot;mis.services&quot;})\r\n    @EntityScan(&quot;mis.entity&quot;)\r\n    @EnableJpaRepositories(&quot;mis.dao&quot;)\r\n    public class BitmisApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(BitmisApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**CustomUserDetails--**\r\n\r\n    package mis.config;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    \r\n    import mis.entity.Roles;\r\n    import mis.entity.User;\r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.authority.SimpleGrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    \r\n    public class CustomUserDetails implements UserDetails {\r\n    \t\r\n    \tprivate User user;\r\n        \r\n        public CustomUserDetails(User user) {\r\n            this.user = user;\r\n        }\r\n     \r\n        @Override\r\n        public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n            Set&lt;Roles&gt; roles = user.getRoles();\r\n            List&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n             \r\n            for (Roles role : roles) {\r\n                authorities.add(new SimpleGrantedAuthority(role.getName()));\r\n            }\r\n             \r\n            return authorities;\r\n        }\r\n     \r\n        @Override\r\n        public String getPassword() {\r\n            return user.getPassword();\r\n        }\r\n     \r\n        @Override\r\n        public String getUsername() {\r\n            return user.getUsername();\r\n        }\r\n     \r\n        @Override\r\n        public boolean isAccountNonExpired() {\r\n            return true;\r\n        }\r\n     \r\n        @Override\r\n        public boolean isAccountNonLocked() {\r\n            return true;\r\n        }\r\n     \r\n        @Override\r\n        public boolean isCredentialsNonExpired() {\r\n            return true;\r\n        }\r\n     \r\n        @Override\r\n        public boolean isEnabled() {\r\n            return user.isEnabled();\r\n        }\r\n    \t\r\n    }\r\n\r\n\r\n**MyConfig class--**\r\n\r\n    package mis.config;\r\n    \r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    \r\n    \r\n    \r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @EnableWebSecurity\r\n    public class MyConfig extends WebSecurityConfigurerAdapter {\r\n    \t\r\n    \t\r\n    \t@Bean\r\n        public UserDetailsService userDetailsService() {\r\n            return new UserDetailsServiceImpl();\r\n        }\r\n         \r\n        @Bean\r\n        public BCryptPasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n         \r\n        @Bean\r\n        public DaoAuthenticationProvider authenticationProvider() {\r\n            DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n            authProvider.setUserDetailsService(userDetailsService());\r\n            authProvider.setPasswordEncoder(passwordEncoder());\r\n             \r\n            return authProvider;\r\n        }\r\n     \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.authenticationProvider(authenticationProvider());\r\n        }\r\n     \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.authorizeRequests()\r\n                .antMatchers(&quot;/&quot;).hasAnyAuthority(&quot;USER&quot;, &quot;CREATOR&quot;, &quot;EDITOR&quot;, &quot;ADMIN&quot;)\r\n                .antMatchers(&quot;/new&quot;).hasAnyAuthority(&quot;ADMIN&quot;, &quot;CREATOR&quot;)\r\n                .antMatchers(&quot;/admin/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;, &quot;EDITOR&quot;)\r\n                .antMatchers(&quot;/delete/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin().permitAll()\r\n                .and()\r\n                .logout().permitAll()\r\n                .and()\r\n                .exceptionHandling().accessDeniedPage(&quot;/403&quot;)\r\n                ;\r\n        }\r\n    }\r\n\r\n**UserDetailsServiceImpl--**\r\n\r\n    package mis.config;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.core.userdetails.UsernameNotFoundException;\r\n    import mis.entity.User;\r\n    import mis.dao.UserRepository;\r\n    \r\n    public class UserDetailsServiceImpl implements UserDetailsService {\r\n    \t\r\n    \t \t@Autowired\r\n    \t    private UserRepository userRepository;\r\n    \t     \r\n    \t    @Override\r\n    \t    public UserDetails loadUserByUsername(String username)\r\n    \t            throws UsernameNotFoundException {\r\n    \t        User user = userRepository.getUserByUsername(username);\r\n    \t      \r\n    \t        if (user == null) {\r\n    \t            throw new UsernameNotFoundException(&quot;Could not find user&quot;);\r\n    \t        }\r\n    \t         \r\n    \t        return new CustomUserDetails(user);\r\n    \t    }\r\n    \r\n    }\r\n\r\n**UserRepository--**\r\n\r\n   &quot; package mis.dao;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.jpa.repository.Query;\r\n    import org.springframework.data.repository.query.Param;\r\n    \r\n    import mis.entity.User;\r\n    \r\n    public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n    \t@Query(&quot;SELECT u FROM User u WHERE u.username = :username&quot;)\r\n        public User getUserByUsername(@Param(&quot;username&quot;) String username);\r\n    }&quot;\r\n\r\nI think springboot is not able to read this authentication files\r\n","title":"I am trying to implement spring security ive configured everything but still not working","body":"<p>spring security not using details from database for authentication and generating password in console also not using my customized login form.</p>\n<p><strong>Main class--</strong></p>\n<pre><code>package mis.main;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@SpringBootApplication\n@ComponentScan({&quot;mis.controller&quot;, &quot;mis.services&quot;})\n@EntityScan(&quot;mis.entity&quot;)\n@EnableJpaRepositories(&quot;mis.dao&quot;)\npublic class BitmisApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(BitmisApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>CustomUserDetails--</strong></p>\n<pre><code>package mis.config;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Set;\n\nimport mis.entity.Roles;\nimport mis.entity.User;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\n\npublic class CustomUserDetails implements UserDetails {\n    \n    private User user;\n    \n    public CustomUserDetails(User user) {\n        this.user = user;\n    }\n \n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        Set&lt;Roles&gt; roles = user.getRoles();\n        List&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n         \n        for (Roles role : roles) {\n            authorities.add(new SimpleGrantedAuthority(role.getName()));\n        }\n         \n        return authorities;\n    }\n \n    @Override\n    public String getPassword() {\n        return user.getPassword();\n    }\n \n    @Override\n    public String getUsername() {\n        return user.getUsername();\n    }\n \n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n \n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n \n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n \n    @Override\n    public boolean isEnabled() {\n        return user.isEnabled();\n    }\n    \n}\n</code></pre>\n<p><strong>MyConfig class--</strong></p>\n<pre><code>package mis.config;\n\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\n\n\n\n@Configuration\n@EnableAutoConfiguration\n@EnableWebSecurity\npublic class MyConfig extends WebSecurityConfigurerAdapter {\n    \n    \n    @Bean\n    public UserDetailsService userDetailsService() {\n        return new UserDetailsServiceImpl();\n    }\n     \n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n     \n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(passwordEncoder());\n         \n        return authProvider;\n    }\n \n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(authenticationProvider());\n    }\n \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(&quot;/&quot;).hasAnyAuthority(&quot;USER&quot;, &quot;CREATOR&quot;, &quot;EDITOR&quot;, &quot;ADMIN&quot;)\n            .antMatchers(&quot;/new&quot;).hasAnyAuthority(&quot;ADMIN&quot;, &quot;CREATOR&quot;)\n            .antMatchers(&quot;/admin/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;, &quot;EDITOR&quot;)\n            .antMatchers(&quot;/delete/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n            .anyRequest().authenticated()\n            .and()\n            .formLogin().permitAll()\n            .and()\n            .logout().permitAll()\n            .and()\n            .exceptionHandling().accessDeniedPage(&quot;/403&quot;)\n            ;\n    }\n}\n</code></pre>\n<p><strong>UserDetailsServiceImpl--</strong></p>\n<pre><code>package mis.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport mis.entity.User;\nimport mis.dao.UserRepository;\n\npublic class UserDetailsServiceImpl implements UserDetailsService {\n    \n        @Autowired\n        private UserRepository userRepository;\n         \n        @Override\n        public UserDetails loadUserByUsername(String username)\n                throws UsernameNotFoundException {\n            User user = userRepository.getUserByUsername(username);\n          \n            if (user == null) {\n                throw new UsernameNotFoundException(&quot;Could not find user&quot;);\n            }\n             \n            return new CustomUserDetails(user);\n        }\n\n}\n</code></pre>\n<p><strong>UserRepository--</strong></p>\n<p>&quot; package mis.dao;</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\n\nimport mis.entity.User;\n\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n    @Query(&quot;SELECT u FROM User u WHERE u.username = :username&quot;)\n    public User getUserByUsername(@Param(&quot;username&quot;) String username);\n}&quot;\n</code></pre>\n<p>I think springboot is not able to read this authentication files</p>\n"},{"tags":["java","scala","maven","gradle","aar"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1637096890,"post_id":69992817,"comment_id":123734025,"body_markdown":"You tagged maven and gradle. Which one is your build tool for your Scala project?!","body":"You tagged maven and gradle. Which one is your build tool for your Scala project?!"},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1637096945,"post_id":69992817,"comment_id":123734042,"body_markdown":"Also what is this dependency? I&#39;ve never seen AAR files before..","body":"Also what is this dependency? I&#39;ve never seen AAR files before.."},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":1,"creation_date":1637102714,"post_id":69992817,"comment_id":123735616,"body_markdown":"@Ga&#235;lJ - https://stackoverflow.com/questions/23915619/android-archive-library-aar-vs-standard-jar","body":"@Ga&#235;lJ - <a href=\"https://stackoverflow.com/questions/23915619/android-archive-library-aar-vs-standard-jar\" title=\"android archive library aar vs standard jar\">stackoverflow.com/questions/23915619/&hellip;</a>"}],"owner":{"account_id":333447,"reputation":1186,"user_id":1062597,"accept_rate":54,"display_name":"Arun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637084810,"creation_date":1637080181,"question_id":69992817,"body_markdown":"The scala project that I am working on requires a maven dependency but is in aar type instead of jar.\r\n\r\nHow do I use the classes inside the aar in my scala project as I cannot import any of the classes from the aar in my project.\r\n\r\nIs there a way to convert the aar to jar while downloading the dependency and building the project.","title":"How to use aar maven dependency in scala/java project","body":"<p>The scala project that I am working on requires a maven dependency but is in aar type instead of jar.</p>\n<p>How do I use the classes inside the aar in my scala project as I cannot import any of the classes from the aar in my project.</p>\n<p>Is there a way to convert the aar to jar while downloading the dependency and building the project.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1637082139,"post_id":69993242,"comment_id":123728644,"body_markdown":"Trying for hours? What exactly have you tried? With which part are you stuck?","body":"Trying for hours? What exactly have you tried? With which part are you stuck?"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1637082458,"post_id":69993242,"comment_id":123728780,"body_markdown":"Do you already know how to read numbers from the input? Does that part work?","body":"Do you already know how to read numbers from the input? Does that part work?"},{"owner":{"account_id":19410276,"reputation":1735,"user_id":14194793,"display_name":"MFerguson"},"score":0,"creation_date":1637082462,"post_id":69993242,"comment_id":123728782,"body_markdown":"Your teacher expects you to manually enter 100 numbers?","body":"Your teacher expects you to manually enter 100 numbers?"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637082517,"creation_date":1637082517,"answer_id":69993343,"question_id":69993242,"body_markdown":"When approaching a problem, first think it thru.  Then write the code.\r\n\r\n1. initialize a positive or negative counter.\r\n2. start reading in numbers\r\n3. increment the counter based on the number&#39;s sign.\r\n4. continue with (2) until 100 numbers have been read.\r\n5.  Print out informative information based on the results of the contents of (1) and the count of numbers read.","title":"Enter 100 numbers. Determine which number is more: positive or negative","body":"<p>When approaching a problem, first think it thru.  Then write the code.</p>\n<ol>\n<li>initialize a positive or negative counter.</li>\n<li>start reading in numbers</li>\n<li>increment the counter based on the number's sign.</li>\n<li>continue with (2) until 100 numbers have been read.</li>\n<li>Print out informative information based on the results of the contents of (1) and the count of numbers read.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":19410276,"reputation":1735,"user_id":14194793,"display_name":"MFerguson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637083533,"creation_date":1637083150,"answer_id":69993492,"question_id":69993242,"body_markdown":"If you are just trying to find the highest magnitude of either positive or negative numbers you can do this quite easily by checking the absolute value:\r\n\r\n```\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\npublic class MyClass\r\n{\r\n    public static void main(String args[])\r\n    {\r\n        int randomNum = 0;\r\n        int largestMagnitude = 0;\r\n        \r\n        for(int i = 0; i &lt; 100; i++)\r\n        {\r\n            randomNum = ThreadLocalRandom.current().nextInt(-1000, 1000);\r\n            if(Math.abs(randomNum) &gt; Math.abs(largestMagnitude))\r\n            {\r\n                largestMagnitude = randomNum;\r\n            }\r\n        }\r\n        \r\n        System.out.println(&quot;The highest magnitude of number generated was &quot; + largestMagnitude);\r\n    }\r\n}\r\n```","title":"Enter 100 numbers. Determine which number is more: positive or negative","body":"<p>If you are just trying to find the highest magnitude of either positive or negative numbers you can do this quite easily by checking the absolute value:</p>\n<pre><code>import java.util.concurrent.ThreadLocalRandom;\n\npublic class MyClass\n{\n    public static void main(String args[])\n    {\n        int randomNum = 0;\n        int largestMagnitude = 0;\n        \n        for(int i = 0; i &lt; 100; i++)\n        {\n            randomNum = ThreadLocalRandom.current().nextInt(-1000, 1000);\n            if(Math.abs(randomNum) &gt; Math.abs(largestMagnitude))\n            {\n                largestMagnitude = randomNum;\n            }\n        }\n        \n        System.out.println(&quot;The highest magnitude of number generated was &quot; + largestMagnitude);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637084597,"creation_date":1637084597,"answer_id":69993781,"question_id":69993242,"body_markdown":"This is an suggestion to people providing answers. When the problem is a homework (as the OP CLEARLY indicated) it is important to ask what are they currently learning in order to properly frame the answer to the lesson. Basically, the most correct answer for industry might not (and often it is not) the most correct answer for what it is being taught.\r\n\r\n@Janis Klein, what you are covering in class at the moment is very important. For example, if you are learning about sorting, the answer might be to implement some sort of sorting algorithm. When you sort a collection of numbers, the most negative and the most positive will be the head and tail values in your sorted collection. If you are learning about lists and collections, the answer might be to implement some sort of linked list where the numbers are inserted in natural order (no need to sort). Like in my previous example, once you insert all 100 values into this list, the head and tail values are the most positive and negative values.  \r\n\r\nHowever, if all you are learning is to do comparisons of values, you don&#39;t need but two variables (one for most positive and one for most negative) and all you will need to do is to compare incoming values and store them into the correct variable if needed. For example, the very first value will be both the most positive and most negative. The second incoming value will be either the most positive or most negative (assuming unique values are always received). From the third value on, the incoming value MIGHT be the most positive, the most negative, or simply neither; in which case, the incoming value is discarded. In the end, the most negative and most positive values will be the values stored in the respective variables.\r\n\r\nAgain, the scope of the answer MUST be framed based on what you are currently learning in class.","title":"Enter 100 numbers. Determine which number is more: positive or negative","body":"<p>This is an suggestion to people providing answers. When the problem is a homework (as the OP CLEARLY indicated) it is important to ask what are they currently learning in order to properly frame the answer to the lesson. Basically, the most correct answer for industry might not (and often it is not) the most correct answer for what it is being taught.</p>\n<p>@Janis Klein, what you are covering in class at the moment is very important. For example, if you are learning about sorting, the answer might be to implement some sort of sorting algorithm. When you sort a collection of numbers, the most negative and the most positive will be the head and tail values in your sorted collection. If you are learning about lists and collections, the answer might be to implement some sort of linked list where the numbers are inserted in natural order (no need to sort). Like in my previous example, once you insert all 100 values into this list, the head and tail values are the most positive and negative values.</p>\n<p>However, if all you are learning is to do comparisons of values, you don't need but two variables (one for most positive and one for most negative) and all you will need to do is to compare incoming values and store them into the correct variable if needed. For example, the very first value will be both the most positive and most negative. The second incoming value will be either the most positive or most negative (assuming unique values are always received). From the third value on, the incoming value MIGHT be the most positive, the most negative, or simply neither; in which case, the incoming value is discarded. In the end, the most negative and most positive values will be the values stored in the respective variables.</p>\n<p>Again, the scope of the answer MUST be framed based on what you are currently learning in class.</p>\n"}],"owner":{"account_id":22771023,"reputation":1,"user_id":16928456,"display_name":"Janis Klein"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1637084597,"creation_date":1637082074,"question_id":69993242,"body_markdown":"so i have this homework where i have to enter 100 numbers and after that it determines if its positive or negative, been trying for hours but still unsuccesful.\r\n\r\nEnter 100 numbers. Determine which number is more: positive or negative. (This is literally the task and nothing more is written)\r\n","title":"Enter 100 numbers. Determine which number is more: positive or negative","body":"<p>so i have this homework where i have to enter 100 numbers and after that it determines if its positive or negative, been trying for hours but still unsuccesful.</p>\n<p>Enter 100 numbers. Determine which number is more: positive or negative. (This is literally the task and nothing more is written)</p>\n"},{"tags":["java","sql","bigdata","heap-memory"],"comments":[{"owner":{"account_id":6451300,"reputation":1733,"user_id":4998135,"accept_rate":95,"display_name":"Nico"},"score":2,"creation_date":1500449081,"post_id":45183554,"comment_id":77335097,"body_markdown":"Please provide the code where the problem is occuring. Without seeing how you do it, we cannot give suggestions on how to improve your programm and prevent the problem.","body":"Please provide the code where the problem is occuring. Without seeing how you do it, we cannot give suggestions on how to improve your programm and prevent the problem."},{"owner":{"account_id":1149847,"reputation":3845,"user_id":1131789,"accept_rate":85,"display_name":"Rishu S"},"score":0,"creation_date":1500449298,"post_id":45183554,"comment_id":77335263,"body_markdown":"It would be good to share the code. Ideally i would have looked into increasing the memory, but getting a GC overhead is sort of a black box. Better share the code and let us know if there is any memory intensive operation you are doing when you say you have used &quot;some logic&quot;?","body":"It would be good to share the code. Ideally i would have looked into increasing the memory, but getting a GC overhead is sort of a black box. Better share the code and let us know if there is any memory intensive operation you are doing when you say you have used &quot;some logic&quot;?"},{"owner":{"account_id":4616142,"reputation":876,"user_id":3742598,"accept_rate":88,"display_name":"Philipp"},"score":0,"creation_date":1500450424,"post_id":45183554,"comment_id":77336060,"body_markdown":"Are you querying *all* of the 1 billion rows? If so, that&#39;s your problem.","body":"Are you querying <i>all</i> of the 1 billion rows? If so, that&#39;s your problem."},{"owner":{"account_id":3727110,"reputation":148,"user_id":3100708,"accept_rate":86,"display_name":"user3100708"},"score":0,"creation_date":1500452869,"post_id":45183554,"comment_id":77337633,"body_markdown":"What is the alternative? @PhilippPloder","body":"What is the alternative? @PhilippPloder"},{"owner":{"account_id":435280,"reputation":14323,"user_id":821786,"display_name":"Gergely Bacso"},"score":0,"creation_date":1500452953,"post_id":45183554,"comment_id":77337697,"body_markdown":"If you truly understand the problem, then you know that nobody can help you without much more details then this.","body":"If you truly understand the problem, then you know that nobody can help you without much more details then this."},{"owner":{"account_id":4616142,"reputation":876,"user_id":3742598,"accept_rate":88,"display_name":"Philipp"},"score":0,"creation_date":1500452996,"post_id":45183554,"comment_id":77337729,"body_markdown":"@user3100708 Show us some code so we can see what you are doing exactly","body":"@user3100708 Show us some code so we can see what you are doing exactly"}],"owner":{"account_id":9050580,"reputation":99,"user_id":6740923,"accept_rate":71,"display_name":"MosheCh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1637084278,"creation_date":1500448903,"question_id":45183554,"body_markdown":"I have big db (~ 1 billion rows) &lt;br&gt;\r\n I want to query the db, make some logic and write to file all the rows&lt;br&gt;\r\nI made java program that query the db and writes the rows to file but I get GC Overhead limit &lt;br&gt;\r\nI understand why I am getting the gc overhead but I am not sure how to solve it.. &lt;br&gt;\r\n\r\n","title":"Gc Overhead Limit Exceeded while querying db java","body":"<p>I have big db (~ 1 billion rows) <br>\n I want to query the db, make some logic and write to file all the rows<br>\nI made java program that query the db and writes the rows to file but I get GC Overhead limit <br>\nI understand why I am getting the gc overhead but I am not sure how to solve it.. <br></p>\n"},{"tags":["java","hibernate","jakarta-ee","heap-memory","jprofiler"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":1,"creation_date":1394206755,"post_id":22254273,"comment_id":33799503,"body_markdown":"AFAIK this is caused by hibernate query cache, but don&#39;t know how to make Hibernate not storing these queries.","body":"AFAIK this is caused by hibernate query cache, but don&#39;t know how to make Hibernate not storing these queries."},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1394206916,"post_id":22254273,"comment_id":33799608,"body_markdown":"@LuiggiMendoza Thank you. But I haven&#39;t fired these queries not even once yet. Still those are cached ??  or at the time of application start up hibernate do this ??? Can you please tell me this ?? I&#39;m not aware of that. And can we disable that `query cache` through some configuration ??","body":"@LuiggiMendoza Thank you. But I haven&#39;t fired these queries not even once yet. Still those are cached ??  or at the time of application start up hibernate do this ??? Can you please tell me this ?? I&#39;m not aware of that. And can we disable that <code>query cache</code> through some configuration ??"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":1,"creation_date":1394207014,"post_id":22254273,"comment_id":33799668,"body_markdown":"Are you sure you don&#39;t load initial data when the application is deployed?","body":"Are you sure you don&#39;t load initial data when the application is deployed?"},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1394207177,"post_id":22254273,"comment_id":33799796,"body_markdown":"@LuiggiMendoza I thought the same and cross checked the queries firing on loading data after login by enabling `mysql=true`. I&#39;m not at all touching the above beans (database tables). Still I&#39;m able to see these line in heap dump.","body":"@LuiggiMendoza I thought the same and cross checked the queries firing on loading data after login by enabling <code>mysql=true</code>. I&#39;m not at all touching the above beans (database tables). Still I&#39;m able to see these line in heap dump."},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1394207211,"post_id":22254273,"comment_id":33799822,"body_markdown":"1) In my view, as soon as CPU high, I start with threads than heap. Based on my experience and understanding, if one high other stay low (there are some rare exceptions too). 2) Check your XML/constructors to make sure no queries are being executed at initialization time.","body":"1) In my view, as soon as CPU high, I start with threads than heap. Based on my experience and understanding, if one high other stay low (there are some rare exceptions too). 2) Check your XML/constructors to make sure no queries are being executed at initialization time."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1394207329,"post_id":22254273,"comment_id":33799937,"body_markdown":"If there&#39;s no other process that fires these queries, then maybe Hibernate is firing them on purpose? Yes, it is very odd and we have a similar problem here as well. We took a heap dump and analyze it with MAT and found our memory leak was due to this Hibernate *feature*, but still are unable to fix it.","body":"If there&#39;s no other process that fires these queries, then maybe Hibernate is firing them on purpose? Yes, it is very odd and we have a similar problem here as well. We took a heap dump and analyze it with MAT and found our memory leak was due to this Hibernate <i>feature</i>, but still are unable to fix it."},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":1,"creation_date":1394207671,"post_id":22254273,"comment_id":33800168,"body_markdown":"Unless we explicitly set, hibernate doesn&#39;t cache queries. I strongly suspect, there were not GCed from previous calls.","body":"Unless we explicitly set, hibernate doesn&#39;t cache queries. I strongly suspect, there were not GCed from previous calls."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":1,"creation_date":1394209907,"post_id":22254273,"comment_id":33801716,"body_markdown":"@Nambari I already tried disabling this feature but didn&#39;t work either...","body":"@Nambari I already tried disabling this feature but didn&#39;t work either..."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1394522740,"post_id":22254273,"comment_id":33915931,"body_markdown":"I have a suspicion that these strings are unrelated and are actually not used for queries (yet), just stored in the memory. Can you enable some kind of query log to confirm if the queries are really fired? Something like [this](https://code.google.com/p/log4jdbc/), or then on the database side? If the queries are not yet fired, it would likely mean they&#39;re not causing your 100% CPU usage.","body":"I have a suspicion that these strings are unrelated and are actually not used for queries (yet), just stored in the memory. Can you enable some kind of query log to confirm if the queries are really fired? Something like <a href=\"https://code.google.com/p/log4jdbc/\" rel=\"nofollow noreferrer\">this</a>, or then on the database side? If the queries are not yet fired, it would likely mean they&#39;re not causing your 100% CPU usage."},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1394562584,"post_id":22254273,"comment_id":33940530,"body_markdown":"First I worried about CPU usage. But later I surprised about why these queries are there. Though I&#39;m worrying about CPU usage these unused string&#39;s eat my memory right ??","body":"First I worried about CPU usage. But later I surprised about why these queries are there. Though I&#39;m worrying about CPU usage these unused string&#39;s eat my memory right ??"},{"owner":{"account_id":3462098,"reputation":42531,"user_id":2898867,"accept_rate":80,"display_name":"Angular University"},"score":0,"creation_date":1395086447,"post_id":22254273,"comment_id":34169543,"body_markdown":"these queries cant be responsible for the high CPU usage, it must be something else. worst case they would consume a lot of memory but not CPU, but memory consumption should not be an issue either. Try to use visualvm that comes installed with the JVM to profile the CPU usage , it&#39;s a very user friendly tool http://visualvm.java.net/","body":"these queries cant be responsible for the high CPU usage, it must be something else. worst case they would consume a lot of memory but not CPU, but memory consumption should not be an issue either. Try to use visualvm that comes installed with the JVM to profile the CPU usage , it&#39;s a very user friendly tool <a href=\"http://visualvm.java.net/\" rel=\"nofollow noreferrer\">visualvm.java.net</a>"}],"answers":[{"tags":[],"owner":{"account_id":3462098,"reputation":42531,"user_id":2898867,"accept_rate":80,"display_name":"Angular University"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1394561140,"creation_date":1394561140,"answer_id":22333001,"question_id":22254273,"body_markdown":"This is normal, these are the Hibernate pre-prepared queries that are prepared at server startup time.\r\n\r\nTake for example the `ControlTransaction` class. Hibernate already knows that will probably need queries to select entities by ID, delete them, etc.\r\n\r\nSo it generates beforehand a series of SQL prepared statements to do these operations. The comments at the beginning of each query indicate why they where generated.\r\n\r\nFor example this query was generated to load a ControlTransaction by Id:\r\n\r\n    /* load com.v4common.shared.beans.transaction.ControlTransaction */ \r\n    select controltra0_.id as id47_48_, controltra0_.form_transaction_id as form2_47_48_, controltra0_.string_value as string3_47_48_, c \r\n\r\nQueries that start with comments of `one-to-many` or `one-to-one`, are used for lazy loading, etc. Named queries in JPQL/HQL are also compiled into a SQL query at server startup and the comment identifies which named query originated the SQL query.\r\n\r\nEach entity will give rise to several of these queries, depending on the mapping annotations used.\r\n\r\nSo it&#39;s actually normal that these queries are there in the heap at user first login time.","title":"Role of hibernate queries in heap dump","body":"<p>This is normal, these are the Hibernate pre-prepared queries that are prepared at server startup time.</p>\n\n<p>Take for example the <code>ControlTransaction</code> class. Hibernate already knows that will probably need queries to select entities by ID, delete them, etc.</p>\n\n<p>So it generates beforehand a series of SQL prepared statements to do these operations. The comments at the beginning of each query indicate why they where generated.</p>\n\n<p>For example this query was generated to load a ControlTransaction by Id:</p>\n\n<pre><code>/* load com.v4common.shared.beans.transaction.ControlTransaction */ \nselect controltra0_.id as id47_48_, controltra0_.form_transaction_id as form2_47_48_, controltra0_.string_value as string3_47_48_, c \n</code></pre>\n\n<p>Queries that start with comments of <code>one-to-many</code> or <code>one-to-one</code>, are used for lazy loading, etc. Named queries in JPQL/HQL are also compiled into a SQL query at server startup and the comment identifies which named query originated the SQL query.</p>\n\n<p>Each entity will give rise to several of these queries, depending on the mapping annotations used.</p>\n\n<p>So it's actually normal that these queries are there in the heap at user first login time.</p>\n"},{"tags":[],"owner":{"account_id":1014607,"reputation":4573,"user_id":1026453,"accept_rate":83,"display_name":"DuncanKinnear"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395092916,"creation_date":1395092916,"answer_id":22466201,"question_id":22254273,"body_markdown":"Do you have these queries as `@NamedQueries` (or `@NamedQuery`) on any of your Entities? \r\n\r\nHibernate could be loading the Named Queries into it&#39;s cache at server startup time. They are certainly parsed at startup to check syntax, etc.","title":"Role of hibernate queries in heap dump","body":"<p>Do you have these queries as <code>@NamedQueries</code> (or <code>@NamedQuery</code>) on any of your Entities? </p>\n\n<p>Hibernate could be loading the Named Queries into it's cache at server startup time. They are certainly parsed at startup to check syntax, etc.</p>\n"}],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":952,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1637084240,"creation_date":1394206443,"question_id":22254273,"body_markdown":"I&#39;m [**JProfiling**][1] my application to analyze high CPU usage. CPU usage is 100% (**at server**) at the time of user login. So started profiling my application.\r\n\r\nThe below query strings I found in the heap dumps. Not only these 4 queries, there are hundreds of queries like this in the dump. \r\n\r\n\tjava.lang.String (0x3262b1) [&quot;/* load com.v4common.shared.beans.transaction.ControlTransaction */ select controltra0_.id as id47_48_, controltra0_.form_transaction_id as form2_47_48_, controltra0_.string_value as string3_47_48_, c&quot;]\t 129 kB (0 %)\r\n\tjava.lang.String (0x310b2f) [&quot;/* load com.v4common.shared.beans.transaction.ReportTransaction */ select reporttran0_.id as id158_45_, reporttran0_.report_id as report2_158_45_, reporttran0_.norm_id as norm3_158_45_, reporttran0_.d&quot;]\t 124 kB (0 %)\r\n\tjava.lang.String (0x312222) [&quot;/* load com.v4common.shared.beans.transaction.ReportItemTransaction */ select reportitem0_.id as id160_41_, reportitem0_.report_structure as report2_160_41_, reportitem0_.grid_row_criteria as grid3_16&quot;]\t 110 kB (0 %)\r\n\tjava.lang.String (0x30c104) [&quot;/* load com.v4common.shared.beans.Reports.EsenderCSReport */ select esendercsr0_.id as id117_36_, esendercsr0_.name as name117_36_, esendercsr0_.report_type as report3_117_36_, esendercsr0_.is_show_pr&quot;]\t 94,248 bytes (0 %)\r\n\tjava.lang.String (0x30d1dc) [&quot;/* load com.v4common.shared.beans.Reports.ReportStructure */ select reportstru0_.id as id120_35_, reportstru0_.name as name120_35_, reportstru0_.xml as xml120_35_, reportstru0_.esender_format as esend&quot;]\t 90,736 bytes (0 %)\r\n\r\nI&#39;m just logged in the system and I&#39;m not touching the beans at all, still I&#39;m able to see them in the dumps.\r\n\r\nAny ideas why those strings are there in the dump?\r\n\r\nOr what does that line mean even?  \r\n\r\n\r\n  [1]: http://www.ej-technologies.com/products/jprofiler/overview.html","title":"Role of hibernate queries in heap dump","body":"<p>I'm <a href=\"http://www.ej-technologies.com/products/jprofiler/overview.html\" rel=\"nofollow\"><strong>JProfiling</strong></a> my application to analyze high CPU usage. CPU usage is 100% (<strong>at server</strong>) at the time of user login. So started profiling my application.</p>\n\n<p>The below query strings I found in the heap dumps. Not only these 4 queries, there are hundreds of queries like this in the dump. </p>\n\n<pre><code>java.lang.String (0x3262b1) [\"/* load com.v4common.shared.beans.transaction.ControlTransaction */ select controltra0_.id as id47_48_, controltra0_.form_transaction_id as form2_47_48_, controltra0_.string_value as string3_47_48_, c\"]     129 kB (0 %)\njava.lang.String (0x310b2f) [\"/* load com.v4common.shared.beans.transaction.ReportTransaction */ select reporttran0_.id as id158_45_, reporttran0_.report_id as report2_158_45_, reporttran0_.norm_id as norm3_158_45_, reporttran0_.d\"]     124 kB (0 %)\njava.lang.String (0x312222) [\"/* load com.v4common.shared.beans.transaction.ReportItemTransaction */ select reportitem0_.id as id160_41_, reportitem0_.report_structure as report2_160_41_, reportitem0_.grid_row_criteria as grid3_16\"]     110 kB (0 %)\njava.lang.String (0x30c104) [\"/* load com.v4common.shared.beans.Reports.EsenderCSReport */ select esendercsr0_.id as id117_36_, esendercsr0_.name as name117_36_, esendercsr0_.report_type as report3_117_36_, esendercsr0_.is_show_pr\"]     94,248 bytes (0 %)\njava.lang.String (0x30d1dc) [\"/* load com.v4common.shared.beans.Reports.ReportStructure */ select reportstru0_.id as id120_35_, reportstru0_.name as name120_35_, reportstru0_.xml as xml120_35_, reportstru0_.esender_format as esend\"]     90,736 bytes (0 %)\n</code></pre>\n\n<p>I'm just logged in the system and I'm not touching the beans at all, still I'm able to see them in the dumps.</p>\n\n<p>Any ideas why those strings are there in the dump?</p>\n\n<p>Or what does that line mean even?  </p>\n"},{"tags":["java","heap-memory","monitoring"],"answers":[{"tags":[],"owner":{"account_id":2961,"reputation":70821,"user_id":4203,"accept_rate":90,"display_name":"Hank Gay"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1264781964,"creation_date":1264781964,"answer_id":2163285,"question_id":2163228,"body_markdown":"There are a large number of profiler tools available that should help you with this. A popular commercial tool is [YourKit][1], and it gets rave reviews. A free alternative is [VisualVM][2], which I&#39;ve used in the past and can provide a lot of insight.\r\n\r\n[1]: http://www.yourkit.com/\r\n[2]: http://java.sun.com/javase/6/docs/technotes/guides/visualvm/index.html\r\n","title":"How to dynamically monitor Java heap size?","body":"<p>There are a large number of profiler tools available that should help you with this. A popular commercial tool is <a href=\"http://www.yourkit.com/\" rel=\"noreferrer\">YourKit</a>, and it gets rave reviews. A free alternative is <a href=\"http://java.sun.com/javase/6/docs/technotes/guides/visualvm/index.html\" rel=\"noreferrer\">VisualVM</a>, which I've used in the past and can provide a lot of insight.</p>\n"},{"tags":[],"owner":{"account_id":2402,"reputation":14054,"user_id":3340,"accept_rate":93,"display_name":"Jacob Schoen"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1354744188,"creation_date":1264782033,"answer_id":2163296,"question_id":2163228,"body_markdown":"[`maxMemory()`][1] returns the maximum amount of memory that java will use. So That will not get you what you want. [`totalMemory()`][2] is what you are looking for though. See The [docs][3]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#maxMemory%28%29\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#totalMemory%28%29\r\n  [3]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Runtime.html","title":"How to dynamically monitor Java heap size?","body":"<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#maxMemory%28%29\" rel=\"noreferrer\"><code>maxMemory()</code></a> returns the maximum amount of memory that java will use. So That will not get you what you want. <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#totalMemory%28%29\" rel=\"noreferrer\"><code>totalMemory()</code></a> is what you are looking for though. See The <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Runtime.html\" rel=\"noreferrer\">docs</a></p>\n"},{"tags":[],"owner":{"account_id":5890,"reputation":13624,"user_id":9686,"accept_rate":69,"display_name":"helios"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1359060365,"creation_date":1264782300,"answer_id":2163325,"question_id":2163228,"body_markdown":"If you like you can visually view a lot of values profiling your app with JConsole.\r\n\r\nhttp://docs.oracle.com/javase/6/docs/technotes/tools/share/jconsole.html\r\n\r\nStart your application with:\r\n\r\n    -Dcom.sun.management.jmxremote\r\n\r\nand you app will be available for select when you start &lt;JDK_HOME&gt;/bin/jconsole.exe","title":"How to dynamically monitor Java heap size?","body":"<p>If you like you can visually view a lot of values profiling your app with JConsole.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/share/jconsole.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/6/docs/technotes/tools/share/jconsole.html</a></p>\n\n<p>Start your application with:</p>\n\n<pre><code>-Dcom.sun.management.jmxremote\n</code></pre>\n\n<p>and you app will be available for select when you start /bin/jconsole.exe</p>\n"},{"tags":[],"owner":{"account_id":586142,"reputation":26,"user_id":262395,"display_name":"Kees Jan Koster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314289711,"creation_date":1264842451,"answer_id":2167359,"question_id":2163228,"body_markdown":"Yet another free alternative is to use [Java-monitor][1]. Have a look at this [live demo][2]. Just click on any of the servers to see detailed graphs on heap memory, non-heap memory, file descriptors, database pools and much more.\r\n\r\n\r\n  [1]: http://java-monitor.com/\r\n  [2]: http://java-monitor.com/livedemo.html","title":"How to dynamically monitor Java heap size?","body":"<p>Yet another free alternative is to use <a href=\"http://java-monitor.com/\" rel=\"nofollow noreferrer\">Java-monitor</a>. Have a look at this <a href=\"http://java-monitor.com/livedemo.html\" rel=\"nofollow noreferrer\">live demo</a>. Just click on any of the servers to see detailed graphs on heap memory, non-heap memory, file descriptors, database pools and much more.</p>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1264860706,"creation_date":1264860706,"answer_id":2168116,"question_id":2163228,"body_markdown":"There is also the [java.lang.management](http://java.sun.com/javase/6/docs/api/java/lang/management/package-summary.html &quot;&quot;) package. Use the [ManagementFactory](http://java.sun.com/javase/6/docs/api/java/lang/management/ManagementFactory.html &quot;class in java.lang.management&quot;) to get an `MemoryMXBean` instance. It has methods to return a heap and a non-heap memory usage snapshot.","title":"How to dynamically monitor Java heap size?","body":"<p>There is also the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/management/package-summary.html\" rel=\"nofollow noreferrer\">java.lang.management</a> package. Use the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/management/ManagementFactory.html\" rel=\"nofollow noreferrer\" title=\"class in java.lang.management\">ManagementFactory</a> to get an <code>MemoryMXBean</code> instance. It has methods to return a heap and a non-heap memory usage snapshot.</p>\n"},{"tags":[],"owner":{"account_id":85470,"reputation":311,"user_id":238274,"display_name":"agonen"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1379519909,"creation_date":1272402815,"answer_id":2725192,"question_id":2163228,"body_markdown":"    jstat -gc &lt;pid&gt; &lt;time&gt; &lt;amount&gt;\r\n\r\n&lt;p&gt;\r\n\r\n    jstat -gc `jps -l | grep weblogic\\.Server | awk {&#39;print $1&#39;}` 1000 3\r\n\r\n3 samples 1 one second \r\n[see more here ][1]\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstat.html","title":"How to dynamically monitor Java heap size?","body":"<pre><code>jstat -gc &lt;pid&gt; &lt;time&gt; &lt;amount&gt;\n</code></pre>\n\n<p><p></p>\n\n<pre><code>jstat -gc `jps -l | grep weblogic\\.Server | awk {'print $1'}` 1000 3\n</code></pre>\n\n<p>3 samples 1 one second \n<a href=\"http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstat.html\" rel=\"noreferrer\">see more here </a></p>\n"},{"tags":[],"owner":{"account_id":754704,"reputation":11,"user_id":753026,"display_name":"pschiffer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305320288,"creation_date":1305320288,"answer_id":5997700,"question_id":2163228,"body_markdown":"We use app internals xpert by OpNet to monitor heap usage and leaks in realtime in our load testing environment and production. It&#39;s lightweight enough to not impact prod, so we get great data we can&#39;t get from QA. We also do profiling of methods and db calls in both environments to help us figure out what code/sql to optimize. Very cool stuff with pretty trend charts, but not free by any stretch. If you&#39;ve got a lot of dollars riding on your app, it&#39;s worth the investment.\r\n\r\nhttp://www.opnet.com/solutions/application_performance/appinternals-xpert.html","title":"How to dynamically monitor Java heap size?","body":"<p>We use app internals xpert by OpNet to monitor heap usage and leaks in realtime in our load testing environment and production. It's lightweight enough to not impact prod, so we get great data we can't get from QA. We also do profiling of methods and db calls in both environments to help us figure out what code/sql to optimize. Very cool stuff with pretty trend charts, but not free by any stretch. If you've got a lot of dollars riding on your app, it's worth the investment.</p>\n\n<p><a href=\"http://www.opnet.com/solutions/application_performance/appinternals-xpert.html\" rel=\"nofollow\">http://www.opnet.com/solutions/application_performance/appinternals-xpert.html</a></p>\n"},{"tags":[],"owner":{"account_id":127164,"reputation":15713,"user_id":324152,"accept_rate":63,"display_name":"MRalwasser"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1448044104,"creation_date":1365515622,"answer_id":15903845,"question_id":2163228,"body_markdown":"Maybe [jvmtop][1] is worth a look.\r\nIt&#39;s a command-line tool which provides a live-view at several metrics, including heap size:\r\n\r\n     JvmTop 0.4.1 alpha amd64  8 cpus, Linux 2.6.32-27, load avg 0.12\r\n     http://code.google.com/p/jvmtop\r\n    \r\n      PID MAIN-CLASS      HPCUR HPMAX NHCUR NHMAX    CPU     GC    VM USERNAME   #T DL\r\n     3370 rapperSimpleApp  165m  455m  109m  176m  0.12%  0.00% S6U37 web        21\r\n    27338 WatchdogManager   11m   28m   23m  130m  0.00%  0.00% S6U37 web        31\r\n    19187 m.jvmtop.JvmTop   20m 3544m   13m  130m  0.93%  0.47% S6U37 web        20\r\n    16733 artup.Bootstrap  159m  455m  166m  304m  0.12%  0.00% S6U37 web        46\r\n\r\n  [1]: https://github.com/patric-r/jvmtop\r\n","title":"How to dynamically monitor Java heap size?","body":"<p>Maybe <a href=\"https://github.com/patric-r/jvmtop\" rel=\"nofollow\">jvmtop</a> is worth a look.\nIt's a command-line tool which provides a live-view at several metrics, including heap size:</p>\n\n<pre><code> JvmTop 0.4.1 alpha amd64  8 cpus, Linux 2.6.32-27, load avg 0.12\n http://code.google.com/p/jvmtop\n\n  PID MAIN-CLASS      HPCUR HPMAX NHCUR NHMAX    CPU     GC    VM USERNAME   #T DL\n 3370 rapperSimpleApp  165m  455m  109m  176m  0.12%  0.00% S6U37 web        21\n27338 WatchdogManager   11m   28m   23m  130m  0.00%  0.00% S6U37 web        31\n19187 m.jvmtop.JvmTop   20m 3544m   13m  130m  0.93%  0.47% S6U37 web        20\n16733 artup.Bootstrap  159m  455m  166m  304m  0.12%  0.00% S6U37 web        46\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1529891"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1428130529,"creation_date":1414508717,"answer_id":26611677,"question_id":2163228,"body_markdown":"I&#39;d also like to add that `jmap -heap &lt;PID&gt;` does the trick; that is assuming you&#39;re an ops guy and need to know how much heap the Java process is using. I cant tell if your question is programmatical, or operational.","title":"How to dynamically monitor Java heap size?","body":"<p>I'd also like to add that <code>jmap -heap &lt;PID&gt;</code> does the trick; that is assuming you're an ops guy and need to know how much heap the Java process is using. I cant tell if your question is programmatical, or operational.</p>\n"}],"owner":{"account_id":65760,"reputation":9581,"user_id":193304,"accept_rate":78,"display_name":"flyingfromchina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101227,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":2163296,"answer_count":9,"score":39,"last_activity_date":1637084225,"creation_date":1264781531,"question_id":2163228,"body_markdown":"I am trying to monitor the java heap size dynamically. Does anybody know how to get the maximium memory used in the process of running a piece of codes? Does the `Runtime.maxMemory()` do the trick? Thanks","title":"How to dynamically monitor Java heap size?","body":"<p>I am trying to monitor the java heap size dynamically. Does anybody know how to get the maximium memory used in the process of running a piece of codes? Does the <code>Runtime.maxMemory()</code> do the trick? Thanks</p>\n"},{"tags":["java","spring-boot","heap-memory","h2"],"comments":[{"owner":{"account_id":8862485,"reputation":2155,"user_id":6618425,"display_name":"L&#233;o Schneider"},"score":0,"creation_date":1584030504,"post_id":60658184,"comment_id":107317967,"body_markdown":"Can you insert rows in batch? 10000 by 10000 for example?","body":"Can you insert rows in batch? 10000 by 10000 for example?"},{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1584030604,"post_id":60658184,"comment_id":107318012,"body_markdown":"Which are your memory settings ? Increased them already ?","body":"Which are your memory settings ? Increased them already ?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1584031806,"post_id":60658184,"comment_id":107318610,"body_markdown":"If it works with 2 million rows, that doesn&#39;t mean it will work with 145 million rows.","body":"If it works with 2 million rows, that doesn&#39;t mean it will work with 145 million rows."}],"answers":[{"tags":[],"owner":{"account_id":84677,"reputation":16500,"user_id":236528,"accept_rate":100,"display_name":"mjuarez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1584030612,"creation_date":1584030612,"answer_id":60658250,"question_id":60658184,"body_markdown":"You&#39;re trying to load 145M rows into memory.  So you obviously need to give the JVM more memory to handle that amount of storage.\r\n\r\nLook into adding/changing your `-Xmx` JVM parameter to allocate more memory.  See here for more info:\r\n\r\nhttps://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvm ","title":"h2 database java heap issue","body":"<p>You're trying to load 145M rows into memory.  So you obviously need to give the JVM more memory to handle that amount of storage.</p>\n\n<p>Look into adding/changing your <code>-Xmx</code> JVM parameter to allocate more memory.  See here for more info:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvm\">What are the -Xms and -Xmx parameters when starting JVM?</a> </p>\n"}],"owner":{"account_id":7436198,"reputation":45,"user_id":5655548,"display_name":"Jewels"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2742,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1584031869,"accepted_answer_id":60658250,"answer_count":1,"score":2,"last_activity_date":1637084210,"creation_date":1584030313,"question_id":60658184,"body_markdown":"Our application loads data from an avro file into in memory h2 database using java spring boot. I have a 145000000 rows to insert and I&#39;m getting java heap error. it works fine with 2 million rows. How can I fix this issue? \r\n\r\nError pasted below\r\nCaused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Out of memory.; SQL statement:\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:617) ~[h2-1.4.199.jar:1.4.199]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:427) ~[h2-1.4.199.jar:1.4.199]\r\n\tat org.h2.message.DbException.get(DbException.java:194) ~[h2-1.4.199.jar:1.4.199]\r\n\tat org.h2.message.DbException.convert(DbException.java:341) ~[h2-1.4.199.jar:1.4.199]\r\n\tat org.h2.command.Command.executeUpdate(Command.java:278) ~[h2-1.4.199.jar:1.4.199]\r\n\tat org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:233) ~[h2-1.4.199.jar:1.4.199]\r\n\tat org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:205) ~[h2-1.4.199.jar:1.4.199]\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.2.0.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.2.0.jar:na]\r\n\tat org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:488) ~[spring-jdbc-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\t... 86 common frames omitted\r\nCaused by: java.lang.OutOfMemoryError: Java heap space","title":"h2 database java heap issue","body":"<p>Our application loads data from an avro file into in memory h2 database using java spring boot. I have a 145000000 rows to insert and I'm getting java heap error. it works fine with 2 million rows. How can I fix this issue? </p>\n\n<p>Error pasted below\nCaused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Out of memory.; SQL statement:\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:617) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:427) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.message.DbException.get(DbException.java:194) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.message.DbException.convert(DbException.java:341) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.command.Command.executeUpdate(Command.java:278) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:233) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:205) ~[h2-1.4.199.jar:1.4.199]\n    at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.2.0.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.2.0.jar:na]\n    at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:488) ~[spring-jdbc-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    ... 86 common frames omitted\nCaused by: java.lang.OutOfMemoryError: Java heap space</p>\n"},{"tags":["java","excel","heap-memory","file-conversion","pcf"],"comments":[{"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"score":1,"creation_date":1574455397,"post_id":59001385,"comment_id":104253386,"body_markdown":"StreamingReader is not in the Java standard lib... please provide the full class name (or the imports) required to understand your code.","body":"StreamingReader is not in the Java standard lib... please provide the full class name (or the imports) required to understand your code."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1574455439,"post_id":59001385,"comment_id":104253404,"body_markdown":"Try using `open(File)` instead of `open(InputStream)`","body":"Try using <code>open(File)</code> instead of <code>open(InputStream)</code>"},{"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"score":0,"creation_date":1574455580,"post_id":59001385,"comment_id":104253455,"body_markdown":"@Andreas that won&#39;t help, it&#39;s the same code running... see the source : https://github.com/monitorjbl/excel-streaming-reader/blob/master/src/main/java/com/monitorjbl/xlsx/StreamingReader.java","body":"@Andreas that won&#39;t help, it&#39;s the same code running... see the source : <a href=\"https://github.com/monitorjbl/excel-streaming-reader/blob/master/src/main/java/com/monitorjbl/xlsx/StreamingReader.java\" rel=\"nofollow noreferrer\">github.com/monitorjbl/excel-streaming-reader/blob/master/src&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1574455717,"post_id":59001385,"comment_id":104253509,"body_markdown":"Ok then, try using POI&#39;s [`SXSSF`](https://poi.apache.org/components/spreadsheet/index.html) directly, for a good ***streaming*** read of the data.","body":"Ok then, try using POI&#39;s <a href=\"https://poi.apache.org/components/spreadsheet/index.html\" rel=\"nofollow noreferrer\"><code>SXSSF</code></a> directly, for a good <b><i>streaming</i></b> read of the data."},{"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"score":0,"creation_date":1574455845,"post_id":59001385,"comment_id":104253559,"body_markdown":"Yep... this library OP is using seems to load the whole thing into memory, so the name is terrible as it implies you can do streaming parsing (which wouldn&#39;t load anything into memory other than the next element) but you really can&#39;t from what I can see in the source.","body":"Yep... this library OP is using seems to load the whole thing into memory, so the name is terrible as it implies you can do streaming parsing (which wouldn&#39;t load anything into memory other than the next element) but you really can&#39;t from what I can see in the source."}],"answers":[{"tags":[],"owner":{"account_id":1775082,"reputation":2724,"user_id":1619004,"accept_rate":86,"display_name":"Andrea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574455262,"creation_date":1574455262,"answer_id":59001456,"question_id":59001385,"body_markdown":"It is always better to attach to the question a bit of context (e.g. how much memory you have, how much memory you give to the JVM, the error you get)\r\n\r\nHaving said that, my shot in the dark is that you should give more memory to JVM, something like \r\n\r\n    java .... -Xms4g -Xmx4g ...\r\n\r\nSee this question [1] for more details about those parameters. \r\n\r\n-----\r\n[1] https://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvm ","title":"Write 1 Million record from XLS file to CVS file in Java","body":"<p>It is always better to attach to the question a bit of context (e.g. how much memory you have, how much memory you give to the JVM, the error you get)</p>\n\n<p>Having said that, my shot in the dark is that you should give more memory to JVM, something like </p>\n\n<pre><code>java .... -Xms4g -Xmx4g ...\n</code></pre>\n\n<p>See this question [1] for more details about those parameters. </p>\n\n<hr>\n\n<p>[1] <a href=\"https://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvm\">What are the -Xms and -Xmx parameters when starting JVM?</a> </p>\n"},{"tags":[],"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1574456251,"creation_date":1574456251,"answer_id":59001664,"question_id":59001385,"body_markdown":"The method you&#39;re using to load the file into a Workbook seems to be eager , i.e. it will just read the whole document into memory, parse it, and then return the result if it didn&#39;t run out of memory first.\r\n\r\nHowever, on the [README](https://github.com/monitorjbl/excel-streaming-reader) page of the project, they show what you should be doing instead to avoid that:\r\n\r\n    import com.monitorjbl.xlsx.StreamingReader;\r\n\r\n    InputStream is = new FileInputStream(new File(&quot;/path/to/workbook.xlsx&quot;));\r\n    Workbook workbook = StreamingReader.builder()\r\n        .rowCacheSize(100)    // number of rows to keep in memory (defaults to 10)\r\n        .bufferSize(4096)     // buffer size to use when reading InputStream to file (defaults to 1024)\r\n        .open(is);            // InputStream or File for XLSX file (required)\r\n\r\nAfter this, iterate over the workbooks, but do not use the `get(0`) method as that seems to require loading all workbooks into memory at once.\r\n\r\n    for (Sheet sheet : workbook){\r\n        System.out.println(sheet.getSheetName());\r\n        for (Row r : sheet) {\r\n            for (Cell c : r) {\r\n                System.out.println(c.getStringCellValue());\r\n            }\r\n        }\r\n    }\r\n\r\nHave you tried this? If you did, you should file a bug because clearly it shouldn&#39;t use up all memory available as that&#39;s the whole point of the library existing.","title":"Write 1 Million record from XLS file to CVS file in Java","body":"<p>The method you're using to load the file into a Workbook seems to be eager , i.e. it will just read the whole document into memory, parse it, and then return the result if it didn't run out of memory first.</p>\n\n<p>However, on the <a href=\"https://github.com/monitorjbl/excel-streaming-reader\" rel=\"nofollow noreferrer\">README</a> page of the project, they show what you should be doing instead to avoid that:</p>\n\n<pre><code>import com.monitorjbl.xlsx.StreamingReader;\n\nInputStream is = new FileInputStream(new File(\"/path/to/workbook.xlsx\"));\nWorkbook workbook = StreamingReader.builder()\n    .rowCacheSize(100)    // number of rows to keep in memory (defaults to 10)\n    .bufferSize(4096)     // buffer size to use when reading InputStream to file (defaults to 1024)\n    .open(is);            // InputStream or File for XLSX file (required)\n</code></pre>\n\n<p>After this, iterate over the workbooks, but do not use the <code>get(0</code>) method as that seems to require loading all workbooks into memory at once.</p>\n\n<pre><code>for (Sheet sheet : workbook){\n    System.out.println(sheet.getSheetName());\n    for (Row r : sheet) {\n        for (Cell c : r) {\n            System.out.println(c.getStringCellValue());\n        }\n    }\n}\n</code></pre>\n\n<p>Have you tried this? If you did, you should file a bug because clearly it shouldn't use up all memory available as that's the whole point of the library existing.</p>\n"},{"tags":[],"owner":{"account_id":17180168,"reputation":1,"user_id":12435702,"display_name":"JueYue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574755429,"creation_date":1574755429,"answer_id":59046265,"question_id":59001385,"body_markdown":"use easypoi do \r\n\r\n    try {\r\n            FileOutputStream fos    = new FileOutputStream(&quot;D:/home/excel/ExcelToCsv.test.csv&quot;);\r\n            ImportParams     params = new ImportParams();\r\n            params.setTitleRows(1);\r\n            CsvExportParams csvExportParams = new CsvExportParams();\r\n            IWriter ce = CsvExportUtil.exportCsv(csvExportParams, MsgClient.class, fos);\r\n            ExcelImportUtil.importExcelBySax(\r\n                    new FileInputStream(\r\n                            new File(FileUtilTest.getWebRootPath(&quot;import/BigDataExport.xlsx&quot;))),\r\n                    MsgClient.class, params, new IReadHandler&lt;MsgClient&gt;() {\r\n\r\n                        private List&lt;MsgClient&gt; list = new ArrayList&lt;&gt;();\r\n\r\n                        @Override\r\n                        public void handler(MsgClient o) {\r\n                            list.add(o);\r\n                            if (list.size() == 10000) {\r\n                                ce.write(list);\r\n                                list.clear();\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void doAfterAll() {\r\n                            System.out.println(&quot;succcess--------------------------------&quot;);\r\n                        }\r\n                    });\r\n        } catch (Exception e) {\r\n            \r\n        }\r\n\r\naddress https://github.com/jueyue/easypoi","title":"Write 1 Million record from XLS file to CVS file in Java","body":"<p>use easypoi do </p>\n\n<pre><code>try {\n        FileOutputStream fos    = new FileOutputStream(\"D:/home/excel/ExcelToCsv.test.csv\");\n        ImportParams     params = new ImportParams();\n        params.setTitleRows(1);\n        CsvExportParams csvExportParams = new CsvExportParams();\n        IWriter ce = CsvExportUtil.exportCsv(csvExportParams, MsgClient.class, fos);\n        ExcelImportUtil.importExcelBySax(\n                new FileInputStream(\n                        new File(FileUtilTest.getWebRootPath(\"import/BigDataExport.xlsx\"))),\n                MsgClient.class, params, new IReadHandler&lt;MsgClient&gt;() {\n\n                    private List&lt;MsgClient&gt; list = new ArrayList&lt;&gt;();\n\n                    @Override\n                    public void handler(MsgClient o) {\n                        list.add(o);\n                        if (list.size() == 10000) {\n                            ce.write(list);\n                            list.clear();\n                        }\n                    }\n\n                    @Override\n                    public void doAfterAll() {\n                        System.out.println(\"succcess--------------------------------\");\n                    }\n                });\n    } catch (Exception e) {\n\n    }\n</code></pre>\n\n<p>address <a href=\"https://github.com/jueyue/easypoi\" rel=\"nofollow noreferrer\">https://github.com/jueyue/easypoi</a></p>\n"}],"owner":{"account_id":16969024,"reputation":13,"user_id":12274146,"display_name":"Sachin s"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":731,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59001664,"answer_count":3,"score":1,"last_activity_date":1637084187,"creation_date":1574454835,"question_id":59001385,"body_markdown":"I have a scenario in my project where user uploads XLS file with 1Million record and I need to conver this xls file to csv file and then sql server job will process the csv file.\r\n\r\nI have a process to convert xls file to csv - but when I deploy this code in PCF it starts throwing heap memory erorr. I am also getting the same error in my local environment.\r\n\r\nCode Snapshot:\r\n\r\n    String inputFileName = &quot;UserInput.xls&quot;;\r\n    \r\n    FileInputStream input_document = new FileInputStream(new File(inputFileName));\r\n    Workbook my_xls_workbook = StreamingReader.builder().open(input_document);//this line throws out of memory error.\r\n    Sheet sheet = my_xls_workbook.getSheetAt(0);\r\n\r\n...... remaing code  reads the sheet object and perform conversion.","title":"Write 1 Million record from XLS file to CVS file in Java","body":"<p>I have a scenario in my project where user uploads XLS file with 1Million record and I need to conver this xls file to csv file and then sql server job will process the csv file.</p>\n\n<p>I have a process to convert xls file to csv - but when I deploy this code in PCF it starts throwing heap memory erorr. I am also getting the same error in my local environment.</p>\n\n<p>Code Snapshot:</p>\n\n<pre><code>String inputFileName = \"UserInput.xls\";\n\nFileInputStream input_document = new FileInputStream(new File(inputFileName));\nWorkbook my_xls_workbook = StreamingReader.builder().open(input_document);//this line throws out of memory error.\nSheet sheet = my_xls_workbook.getSheetAt(0);\n</code></pre>\n\n<p>...... remaing code  reads the sheet object and perform conversion.</p>\n"},{"tags":["java","memory-management","runtime","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1307346355,"creation_date":1307346355,"answer_id":6249056,"question_id":6249015,"body_markdown":"Java objects created are not necessarily cleaned up once they&#39;re finished with. Instead, something called the &quot;garbage collector&quot; periodically runs in the background looking for orphaned objects and deletes them, freeing up memory.\r\n\r\nYour application is likely creating lots of temporary objects as it resizes your window. Although no longer being referenced by anything (ie orphans), these objects are hanging around until the garbage collector runs.\r\n\r\nYou&#39;ll probably find that your max memory is 256M (the default) - the garbage collector is probably being called more often as you approach your max memory and the creation of new objects requires memory to be freed up immediately - hence the memory hovering just under 256M as the creation/deletion rate is balanced by demand.\r\n\r\nThis is completely normal behaviour.","title":"java memory performance - strange behaviour (or is this normal?)","body":"<p>Java objects created are not necessarily cleaned up once they're finished with. Instead, something called the \"garbage collector\" periodically runs in the background looking for orphaned objects and deletes them, freeing up memory.</p>\n\n<p>Your application is likely creating lots of temporary objects as it resizes your window. Although no longer being referenced by anything (ie orphans), these objects are hanging around until the garbage collector runs.</p>\n\n<p>You'll probably find that your max memory is 256M (the default) - the garbage collector is probably being called more often as you approach your max memory and the creation of new objects requires memory to be freed up immediately - hence the memory hovering just under 256M as the creation/deletion rate is balanced by demand.</p>\n\n<p>This is completely normal behaviour.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1307348850,"creation_date":1307346617,"answer_id":6249092,"question_id":6249015,"body_markdown":"No, this behaviour is perfectly normal. Java memory management is based on automatic garbage collection, which means that unused memory accumulates for a while before being garbage collected (because that is a significant amount of work, you want to do it as rarely as possible. \r\n\r\nSo the JVM will tend to use a large part of the memory it&#39;s allowed to use (the maximum heap size) - and on a modern PC with multiple GBs of memory available, the default maximum heap size will be pretty big. However, if you have a small app that you know won&#39;t need much memory, you can adjust the maximum heap size via the command line option -Xmx, for example\r\n\r\n    java -Xmx64M main.class.name\r\n\r\nwill restrict the heap to 64MB","title":"java memory performance - strange behaviour (or is this normal?)","body":"<p>No, this behaviour is perfectly normal. Java memory management is based on automatic garbage collection, which means that unused memory accumulates for a while before being garbage collected (because that is a significant amount of work, you want to do it as rarely as possible. </p>\n\n<p>So the JVM will tend to use a large part of the memory it's allowed to use (the maximum heap size) - and on a modern PC with multiple GBs of memory available, the default maximum heap size will be pretty big. However, if you have a small app that you know won't need much memory, you can adjust the maximum heap size via the command line option -Xmx, for example</p>\n\n<pre><code>java -Xmx64M main.class.name\n</code></pre>\n\n<p>will restrict the heap to 64MB</p>\n"}],"owner":{"account_id":758526,"reputation":53,"user_id":772139,"display_name":"Kani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":6249056,"answer_count":2,"score":5,"last_activity_date":1637083974,"creation_date":1307345974,"question_id":6249015,"body_markdown":"I would like to start by saying that i&#39;m a beginner, but i&#39;m working on a really small and simple Java app, that really shouldn&#39;t cause some major problems.\r\nI was monitoring memory usage from windows task manager, and noticed that with my application started, java.exe was using about 70MB of available memory. So I thought to myself, ok, this probably is a little large, but still, nothing that my PC couldn&#39;t handle. But really strange thing started happening when i tried to resize my window, memory usage suddenly jumped to like 80-90 MB, and if i would continue dragging my window, randomly resizing, it kept increasing memory usage. I thought it has something to do with calling repainting methods on GUI components during window resize, so i took a few suspicious components that could cause some kind of memory leak, and deleted those from my mainwindow form, leaving my program almost completely stripped down, but this issue persisted. What i noticed later was that if i keep resizing my window, memory usage grows up to 200-220 MB, and then stops this uncontrolled growth there. \r\nSo can somebody tell me, could this be a normal behavior having in mind memory management in java?","title":"java memory performance - strange behaviour (or is this normal?)","body":"<p>Hi there\nI would like to start by saying that i'm a beginner, but i'm working on a really small and simple Java app, that really shouldn't cause some major problems.\nI was monitoring memory usage from windows task manager, and noticed that with my application started, java.exe was using about 70MB of available memory. So I thought to myself, ok, this probably is a little large, but still, nothing that my PC couldn't handle. But really strange thing started happening when i tried to resize my window, memory usage suddenly jumped to like 80-90 MB, and if i would continue dragging my window, randomly resizing, it kept increasing memory usage. I thought it has something to do with calling repainting methods on GUI components during window resize, so i took a few suspicious components that could cause some kind of memory leak, and deleted those from my mainwindow form, leaving my program almost completely stripped down, but this issue persisted. What i noticed later was that if i keep resizing my window, memory usage grows up to 200-220 MB, and then stops this uncontrolled growth there. \nSo can somebody tell me, could this be a normal behavior having in mind memory management in java?</p>\n"},{"tags":["java","memory-management","heap-memory"],"comments":[{"owner":{"display_name":"user395760"},"score":0,"creation_date":1302096662,"post_id":5567134,"comment_id":6332148,"body_markdown":"The point of having GC is that you shouldn&#39;t even *know*, let alone worry about this - why do you think you need to? And in fact, you can&#39;t know - GC authors are clever folks, the least GCs will go out of their way to free objects once the last reference is lost but rather collect at some point in the future or not at all if you never run out of memory.","body":"The point of having GC is that you shouldn&#39;t even <i>know</i>, let alone worry about this - why do you think you need to? And in fact, you can&#39;t know - GC authors are clever folks, the least GCs will go out of their way to free objects once the last reference is lost but rather collect at some point in the future or not at all if you never run out of memory."},{"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"score":0,"creation_date":1302096843,"post_id":5567134,"comment_id":6332194,"body_markdown":"Yes, you can know. *sigh* See my answer below.","body":"Yes, you can know. <i>sigh</i> See my answer below."},{"owner":{"display_name":"user395760"},"score":0,"creation_date":1302096995,"post_id":5567134,"comment_id":6332235,"body_markdown":"@dty: Well, I meant from inspecting the source alone.","body":"@dty: Well, I meant from inspecting the source alone."},{"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"score":0,"creation_date":1302097098,"post_id":5567134,"comment_id":6332282,"body_markdown":"@delnan: Well, you never said that and I&#39;m not a mind reader. :-) I still disagree though. In many simple cases, it&#39;s obvious when there are no more references to an object!","body":"@delnan: Well, you never said that and I&#39;m not a mind reader. :-) I still disagree though. In many simple cases, it&#39;s obvious when there are no more references to an object!"},{"owner":{"display_name":"user395760"},"score":0,"creation_date":1302097262,"post_id":5567134,"comment_id":6332342,"body_markdown":"@dty: The point is that no more references to an object doesn&#39;t mean that it will be garbage collected - it may be from that point, but it doesn&#39;t have to. Well, at least that&#39;s how it works in every GC&#39;d language I know enough about to know that the GC algorithm is impementation defined.","body":"@dty: The point is that no more references to an object doesn&#39;t mean that it will be garbage collected - it may be from that point, but it doesn&#39;t have to. Well, at least that&#39;s how it works in every GC&#39;d language I know enough about to know that the GC algorithm is impementation defined."},{"owner":{"display_name":"user395760"},"score":0,"creation_date":1302097514,"post_id":5567134,"comment_id":6332429,"body_markdown":"@dty: I believe you know that, but saying &quot;In many simple cases, it&#39;s obvious when there are no more references to an object!&quot; in a discussion whether one can know when an object is GC&#39;d could be understoond as this. Also, it was what I meant to say in my original comment when you showed up and showed up a minor factual error in it ;)","body":"@dty: I believe you know that, but saying &quot;In many simple cases, it&#39;s obvious when there are no more references to an object!&quot; in a discussion whether one can know when an object is GC&#39;d could be understoond as this. Also, it was what I meant to say in my original comment when you showed up and showed up a minor factual error in it ;)"},{"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"score":0,"creation_date":1302097630,"post_id":5567134,"comment_id":6332460,"body_markdown":"OK, I&#39;m not getting into a fight. Here&#39;s how it looks from my perspective: the OP asked &quot;can you know when an obejct is GC&#39;d&quot; (although it looks like that part of the question has somehow disappeared from the edit history), and you said &quot;...in fact, you can&#39;t know...&quot;, and I said &quot;yes, you can know&quot;. Then you wandered into the realm of static source code analysis... Meh.","body":"OK, I&#39;m not getting into a fight. Here&#39;s how it looks from my perspective: the OP asked &quot;can you know when an obejct is GC&#39;d&quot; (although it looks like that part of the question has somehow disappeared from the edit history), and you said &quot;...in fact, you can&#39;t know...&quot;, and I said &quot;yes, you can know&quot;. Then you wandered into the realm of static source code analysis... Meh."}],"answers":[{"tags":[],"owner":{"account_id":104251,"reputation":52940,"user_id":278836,"accept_rate":88,"display_name":"Andrew White"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1302096606,"creation_date":1302096606,"answer_id":5567164,"question_id":5567134,"body_markdown":"No; *all* references to that object must be lost/nulled. In practice this is something you shouldn&#39;t worry about. \r\n\r\nYour object will be de-allocated when it is no longer used. Just be aware that any references left to the object will keep the object on the heap and simply assigning null to any single reference will not cause the underlying object to magically go away.","title":"Java de-allocate an object from the heap","body":"<p>No; <em>all</em> references to that object must be lost/nulled. In practice this is something you shouldn't worry about. </p>\n\n<p>Your object will be de-allocated when it is no longer used. Just be aware that any references left to the object will keep the object on the heap and simply assigning null to any single reference will not cause the underlying object to magically go away.</p>\n"},{"tags":[],"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1302096627,"creation_date":1302096627,"answer_id":5567170,"question_id":5567134,"body_markdown":"In some modern VMs, actively setting a reference to null hinders the garbage collector. You should just forget about that.\r\n\r\nFor knowing when an object is garbage collected, look at the `java.lang.ref` package - although I can honestly say that in 16 years of Java programming, I&#39;ve never needed to know when an object is garbage collected.\r\n\r\nCan you elaborate on why you think you need this?\r\n","title":"Java de-allocate an object from the heap","body":"<p>In some modern VMs, actively setting a reference to null hinders the garbage collector. You should just forget about that.</p>\n\n<p>For knowing when an object is garbage collected, look at the <code>java.lang.ref</code> package - although I can honestly say that in 16 years of Java programming, I've never needed to know when an object is garbage collected.</p>\n\n<p>Can you elaborate on why you think you need this?</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1302096707,"creation_date":1302096707,"answer_id":5567182,"question_id":5567134,"body_markdown":"No, and no. `myObject = null;` will only help if there are no other references to the object, and in most cases it&#39;s superfluous because local objects go out of scope at the end of each method.\r\n\r\nAs for when objects are actually deallocated, that&#39;s completely up to the GC. What you can do is add a [finalize method][1] that will be called just before the object is deallocated, but this is problematic as well and should not be relied on.\r\n\r\n\r\n  [1]: http://www.codeguru.com/java/tij/tij0051.shtml","title":"Java de-allocate an object from the heap","body":"<p>No, and no. <code>myObject = null;</code> will only help if there are no other references to the object, and in most cases it's superfluous because local objects go out of scope at the end of each method.</p>\n\n<p>As for when objects are actually deallocated, that's completely up to the GC. What you can do is add a <a href=\"http://www.codeguru.com/java/tij/tij0051.shtml\" rel=\"nofollow\">finalize method</a> that will be called just before the object is deallocated, but this is problematic as well and should not be relied on.</p>\n"}],"owner":{"account_id":109969,"reputation":14788,"user_id":291180,"accept_rate":80,"display_name":"Travis Webb"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":722,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":5567170,"answer_count":3,"score":0,"last_activity_date":1637083955,"creation_date":1302096479,"question_id":5567134,"body_markdown":"In Java, to unload an object from the heap, is it sufficient to simply write `myObject = null;` and the GC will take care of it from there?\r\n\r\n**EDIT :** Ok let me explain my use case, since everyone is assuming that I shouldn&#39;t explicitly null objects, I shouldn&#39;t worry about it, etc. That&#39;s missing the point. I am serializing an object, and am &quot;consuming&quot; a field of this object before I serialize it in order to save disk space. And before you jump down my throat for this, too, I cannot declare this field `transient` because I am including this field in the object sometimes, but not others.\r\n\r\nDoes setting an object to `null` have any effect on the GC?","title":"Java de-allocate an object from the heap","body":"<p>In Java, to unload an object from the heap, is it sufficient to simply write <code>myObject = null;</code> and the GC will take care of it from there?</p>\n\n<p><strong>EDIT :</strong> Ok let me explain my use case, since everyone is assuming that I shouldn't explicitly null objects, I shouldn't worry about it, etc. That's missing the point. I am serializing an object, and am \"consuming\" a field of this object before I serialize it in order to save disk space. And before you jump down my throat for this, too, I cannot declare this field <code>transient</code> because I am including this field in the object sometimes, but not others.</p>\n\n<p>Does setting an object to <code>null</code> have any effect on the GC?</p>\n"},{"tags":["java","maven","executable-jar","maven-assembly-plugin"],"comments":[{"owner":{"account_id":117919,"reputation":5172,"user_id":308565,"accept_rate":100,"display_name":"Nagaraj Tantri"},"score":0,"creation_date":1637029925,"post_id":69949537,"comment_id":123710382,"body_markdown":"Just to clarify, do you want to use the assembly plugin only and have nothing to do with the shade plugin for solving this?","body":"Just to clarify, do you want to use the assembly plugin only and have nothing to do with the shade plugin for solving this?"},{"owner":{"account_id":15272889,"reputation":511,"user_id":11019548,"display_name":"maryem neyli"},"score":0,"creation_date":1637050786,"post_id":69949537,"comment_id":123715061,"body_markdown":"@NagarajTantri yes I tried to use shade plugin, one jar plugin but always no solution ! I have tried to have two execution in the same assembly plugin but no, it did not work !","body":"@NagarajTantri yes I tried to use shade plugin, one jar plugin but always no solution ! I have tried to have two execution in the same assembly plugin but no, it did not work !"},{"owner":{"account_id":23067373,"reputation":640,"user_id":17181638,"display_name":"3Fish"},"score":0,"creation_date":1637064244,"post_id":69949537,"comment_id":123720377,"body_markdown":"@maryemneyli please look at this [answer](https://stackoverflow.com/questions/7837778/maven-best-practice-for-creating-ad-hoc-zip-artifact).\nYou can just have two stages in the same phase, the first one creates the jar, the second one creates the zip file. The order of execution in the same phase is the same in which they are described in your pom file.","body":"@maryemneyli please look at this <a href=\"https://stackoverflow.com/questions/7837778/maven-best-practice-for-creating-ad-hoc-zip-artifact\">answer</a>. You can just have two stages in the same phase, the first one creates the jar, the second one creates the zip file. The order of execution in the same phase is the same in which they are described in your pom file."},{"owner":{"account_id":15272889,"reputation":511,"user_id":11019548,"display_name":"maryem neyli"},"score":0,"creation_date":1637074033,"post_id":69949537,"comment_id":123724788,"body_markdown":"@3Fish I have already tested it but it does not work ! for the moment I am capable to create a Runnable jar an to create a normal jar(without the dependencies) and I am able to add the normal jar with all the dependencies in the lib folder into the zip file but my only problem is how to add a runnable jar (jar contains all the dependencies) into the zip file ?!","body":"@3Fish I have already tested it but it does not work ! for the moment I am capable to create a Runnable jar an to create a normal jar(without the dependencies) and I am able to add the normal jar with all the dependencies in the lib folder into the zip file but my only problem is how to add a runnable jar (jar contains all the dependencies) into the zip file ?!"}],"answers":[{"tags":[],"owner":{"account_id":15272889,"reputation":511,"user_id":11019548,"display_name":"maryem neyli"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1637083494,"creation_date":1637083494,"answer_id":69993567,"question_id":69949537,"body_markdown":"So the problem is that I was running the maven command: `mvn package` and this is the problem.\r\nThe final **pom.xml** assembly plugin:\r\n\r\n                &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;assembly&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;descriptors&gt;\r\n    \t\t\t\t\t\t\t\t&lt;descriptor&gt;assembly.xml&lt;/descriptor&gt;\r\n    \t\t\t\t\t\t\t&lt;/descriptors&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n\r\nand the final **assembly.xml** file:\r\n\r\n    &lt;assembly\r\n    \txmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd&quot;&gt;\r\n    \t&lt;id&gt;dist&lt;/id&gt;\r\n    \t&lt;formats&gt;\r\n    \t\t&lt;format&gt;zip&lt;/format&gt;\r\n    \t&lt;/formats&gt;\r\n    \t&lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\r\n    \t&lt;files&gt;\r\n            &lt;file&gt;\r\n                &lt;source&gt;target/${project.artifactId}-${project.version}-jar-with-dependencies.jar&lt;/source&gt;\r\n            &lt;/file&gt;\r\n        &lt;/files&gt;\r\n        &lt;!-- IF YOU NEED TO ADD ALL THE DEPENDENCIES IN ONE FOLDER (lib) --&gt;\r\n        &lt;dependencySets&gt;\r\n            &lt;dependencySet&gt;\r\n                &lt;outputDirectory&gt;/lib&lt;/outputDirectory&gt;\r\n                &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependencySet&gt;\r\n        &lt;/dependencySets&gt;\r\n    \t&lt;fileSets&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;${project.basedir}&lt;/directory&gt;\r\n    \t\t\t&lt;includes&gt;\r\n    \t\t\t\t&lt;include&gt;README*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;LICENSE*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;NOTICE*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;pom.xml&lt;/include&gt;\r\n    \t\t\t&lt;/includes&gt;\r\n    \t\t\t&lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;${project.build.sourceDirectory}/src&lt;/directory&gt;\r\n    \t\t\t&lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n            ....\r\n           &lt;/fileSets&gt;\r\n    &lt;/assembly&gt;\r\n\r\n**And never forget to run the command** : `mvn assembly:assembly -DdescriptorId=jar-with-dependencies package`","title":"Create an executable JAR with all its dependencies and put in the ZIP file using maven assembly","body":"<p>So the problem is that I was running the maven command: <code>mvn package</code> and this is the problem.\nThe final <strong>pom.xml</strong> assembly plugin:</p>\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;assembly&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;descriptors&gt;\n                                &lt;descriptor&gt;assembly.xml&lt;/descriptor&gt;\n                            &lt;/descriptors&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>and the final <strong>assembly.xml</strong> file:</p>\n<pre><code>&lt;assembly\n    xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd&quot;&gt;\n    &lt;id&gt;dist&lt;/id&gt;\n    &lt;formats&gt;\n        &lt;format&gt;zip&lt;/format&gt;\n    &lt;/formats&gt;\n    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\n    &lt;files&gt;\n        &lt;file&gt;\n            &lt;source&gt;target/${project.artifactId}-${project.version}-jar-with-dependencies.jar&lt;/source&gt;\n        &lt;/file&gt;\n    &lt;/files&gt;\n    &lt;!-- IF YOU NEED TO ADD ALL THE DEPENDENCIES IN ONE FOLDER (lib) --&gt;\n    &lt;dependencySets&gt;\n        &lt;dependencySet&gt;\n            &lt;outputDirectory&gt;/lib&lt;/outputDirectory&gt;\n            &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependencySet&gt;\n    &lt;/dependencySets&gt;\n    &lt;fileSets&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;${project.basedir}&lt;/directory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;README*&lt;/include&gt;\n                &lt;include&gt;LICENSE*&lt;/include&gt;\n                &lt;include&gt;NOTICE*&lt;/include&gt;\n                &lt;include&gt;pom.xml&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\n        &lt;/fileSet&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;${project.build.sourceDirectory}/src&lt;/directory&gt;\n            &lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\n        &lt;/fileSet&gt;\n        ....\n       &lt;/fileSets&gt;\n&lt;/assembly&gt;\n</code></pre>\n<p><strong>And never forget to run the command</strong> : <code>mvn assembly:assembly -DdescriptorId=jar-with-dependencies package</code></p>\n"}],"owner":{"account_id":15272889,"reputation":511,"user_id":11019548,"display_name":"maryem neyli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1262,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69993567,"answer_count":1,"score":3,"last_activity_date":1637083494,"creation_date":1636754646,"question_id":69949537,"body_markdown":"as mentionned in the question title, is there is any way to create a zip file using maven assembly that contains all the files mentionned in the assembly.xml file and also contains a runnable jar of the project.\r\n\r\nFor the moment what I came to do is to generate a **shaded jar** of the project and a zip file that contains a normal jar and all the dependencies in the bin folder.\r\n\r\nHere is my **assembly.xml** : \r\n\r\n        &lt;assembly\r\n    \txmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd&quot;&gt;\r\n    \t&lt;id&gt;dist&lt;/id&gt;\r\n    \t&lt;formats&gt;\r\n    \t\t&lt;format&gt;zip&lt;/format&gt;\r\n    \t&lt;/formats&gt;\r\n    \t&lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\r\n    \t&lt;files&gt;\r\n            &lt;file&gt;\r\n                &lt;source&gt;target/${project.artifactId}-${project.version}.jar&lt;/source&gt;\r\n            &lt;/file&gt;\r\n        &lt;/files&gt;\r\n        &lt;dependencySets&gt;\r\n            &lt;dependencySet&gt;\r\n                &lt;outputDirectory&gt;/lib&lt;/outputDirectory&gt;\r\n                &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependencySet&gt;\r\n        &lt;/dependencySets&gt;\r\n    \t&lt;fileSets&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;${project.basedir}&lt;/directory&gt;\r\n    \t\t\t&lt;includes&gt;\r\n    \t\t\t\t&lt;include&gt;README*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;LICENSE*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;NOTICE*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;pom.xml&lt;/include&gt;\r\n    \t\t\t&lt;/includes&gt;\r\n    \t\t\t&lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;${project.build.sourceDirectory}/src&lt;/directory&gt;\r\n    \t\t\t&lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;lib&lt;/directory&gt;\r\n    \t\t\t&lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;\r\n    \t\t\t&lt;includes&gt;\r\n    \t\t\t\t&lt;include&gt;*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;*/*&lt;/include&gt;\r\n    \t\t\t&lt;/includes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;images&lt;/directory&gt;\r\n    \t\t\t&lt;outputDirectory&gt;images&lt;/outputDirectory&gt;\r\n    \t\t\t&lt;includes&gt;\r\n    \t\t\t\t&lt;include&gt;*&lt;/include&gt;\r\n    \t\t\t\t&lt;include&gt;*/*&lt;/include&gt;\r\n    \t\t\t&lt;/includes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n    \t\t&lt;fileSet&gt;\r\n    \t\t\t&lt;directory&gt;${project.basedir}&lt;/directory&gt;\r\n    \t\t\t&lt;includes&gt;\r\n    \t\t\t\t&lt;include&gt;*.dll&lt;/include&gt;\r\n    \t\t\t&lt;/includes&gt;\r\n    \t\t&lt;/fileSet&gt;\r\n    \t&lt;/fileSets&gt;\r\n    &lt;/assembly&gt;\r\n\r\nand he is my **plugin** that I am using for now:\r\n\r\n    &lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.2.4&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t\t&lt;descriptor&gt;assembly.xml&lt;/descriptor&gt;\r\n    \t\t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;transformers&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;mainClass&gt;com.sgs.terminal.Run&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t&lt;/transformers&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n\r\nI have tried this solution but it does not work: https://stackoverflow.com/questions/14880472/maven-build-runnable-jar-and-then-add-to-zip-with-maven-assembly-plugin\r\n\r\n&gt; **EDIT:**\r\nI have edited my pom.xml so there is 2 different execution: the first creates a runnable jar and the second creates the zip but this did not resolve my problem too.","title":"Create an executable JAR with all its dependencies and put in the ZIP file using maven assembly","body":"<p>as mentionned in the question title, is there is any way to create a zip file using maven assembly that contains all the files mentionned in the assembly.xml file and also contains a runnable jar of the project.</p>\n<p>For the moment what I came to do is to generate a <strong>shaded jar</strong> of the project and a zip file that contains a normal jar and all the dependencies in the bin folder.</p>\n<p>Here is my <strong>assembly.xml</strong> :</p>\n<pre><code>    &lt;assembly\n    xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd&quot;&gt;\n    &lt;id&gt;dist&lt;/id&gt;\n    &lt;formats&gt;\n        &lt;format&gt;zip&lt;/format&gt;\n    &lt;/formats&gt;\n    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\n    &lt;files&gt;\n        &lt;file&gt;\n            &lt;source&gt;target/${project.artifactId}-${project.version}.jar&lt;/source&gt;\n        &lt;/file&gt;\n    &lt;/files&gt;\n    &lt;dependencySets&gt;\n        &lt;dependencySet&gt;\n            &lt;outputDirectory&gt;/lib&lt;/outputDirectory&gt;\n            &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependencySet&gt;\n    &lt;/dependencySets&gt;\n    &lt;fileSets&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;${project.basedir}&lt;/directory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;README*&lt;/include&gt;\n                &lt;include&gt;LICENSE*&lt;/include&gt;\n                &lt;include&gt;NOTICE*&lt;/include&gt;\n                &lt;include&gt;pom.xml&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\n        &lt;/fileSet&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;${project.build.sourceDirectory}/src&lt;/directory&gt;\n            &lt;useDefaultExcludes&gt;true&lt;/useDefaultExcludes&gt;\n        &lt;/fileSet&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;lib&lt;/directory&gt;\n            &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*&lt;/include&gt;\n                &lt;include&gt;*/*&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/fileSet&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;images&lt;/directory&gt;\n            &lt;outputDirectory&gt;images&lt;/outputDirectory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*&lt;/include&gt;\n                &lt;include&gt;*/*&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/fileSet&gt;\n        &lt;fileSet&gt;\n            &lt;directory&gt;${project.basedir}&lt;/directory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*.dll&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/fileSet&gt;\n    &lt;/fileSets&gt;\n&lt;/assembly&gt;\n</code></pre>\n<p>and he is my <strong>plugin</strong> that I am using for now:</p>\n<pre><code>&lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;configuration&gt;\n                                &lt;descriptor&gt;assembly.xml&lt;/descriptor&gt;\n                            &lt;/configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;com.sgs.terminal.Run&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n</code></pre>\n<p>I have tried this solution but it does not work: <a href=\"https://stackoverflow.com/questions/14880472/maven-build-runnable-jar-and-then-add-to-zip-with-maven-assembly-plugin\">Maven: Build runnable jar and then add to zip with maven-assembly-plugin</a></p>\n<blockquote>\n<p><strong>EDIT:</strong>\nI have edited my pom.xml so there is 2 different execution: the first creates a runnable jar and the second creates the zip but this did not resolve my problem too.</p>\n</blockquote>\n"},{"tags":["java","unit-testing","java-8","mocking","mockito"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1501139051,"post_id":45331645,"comment_id":77648434,"body_markdown":"Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a [mcve]. Use the &quot;edit&quot; link to improve your *question* - do not add more information via comments. Thanks!","body":"Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Use the &quot;edit&quot; link to improve your <i>question</i> - do not add more information via comments. Thanks!"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1501139067,"post_id":45331645,"comment_id":77648442,"body_markdown":"Dont explain so much how your code comes together. Pull it together and provide a [mcve]!","body":"Dont explain so much how your code comes together. Pull it together and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>!"}],"answers":[{"tags":[],"owner":{"account_id":218123,"reputation":15258,"user_id":474287,"accept_rate":100,"display_name":"Morfic"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1501099815,"creation_date":1501091714,"answer_id":45334249,"question_id":45331645,"body_markdown":"As per the documentation ([Mockito 1][1] and [Mockito 2][2]), you have to use `argThat(matcher)`, a Mockito matcher which allows you to use your custom argument matchers:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n     //stubbing\r\n     when(mock.giveMe(argThat(new MyHamcrestMatcher())));\r\n\r\n     //verification\r\n     verify(mock).giveMe(argThat(new MyHamcrestMatcher()));\r\n\r\nYou did not say if you&#39;re using Mockito 1 or 2, but the idea is similar, it&#39;s just the static import that is different:\r\n\r\n   - 1: `import static org.mockito.Matchers.argThat;` (or for simplicity `org.mockito.Mockito` which extends `Matchers`)\r\n   - 2: `import static org.mockito.hamcrest.MockitoHamcrest.argThat;`\r\n\r\nBonus hint, for readability you can replace `times(0)` with [`never()`][3], so in your case it would be:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    verify(customPublisher, never()).publish(argThat(isFailureResult()), anyObject());\r\n\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/Matchers.html\r\n  [2]: https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/hamcrest/MockitoHamcrest.html\r\n  [3]: https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/Mockito.html#4","title":"mockito refuses to pair TypeSafeMatcher to a generic method API","body":"<p>As per the documentation (<a href=\"https://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/Matchers.html\" rel=\"noreferrer\">Mockito 1</a> and <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/hamcrest/MockitoHamcrest.html\" rel=\"noreferrer\">Mockito 2</a>), you have to use <code>argThat(matcher)</code>, a Mockito matcher which allows you to use your custom argument matchers:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code> //stubbing\n when(mock.giveMe(argThat(new MyHamcrestMatcher())));\n\n //verification\n verify(mock).giveMe(argThat(new MyHamcrestMatcher()));\n</code></pre>\n\n<p>You did not say if you're using Mockito 1 or 2, but the idea is similar, it's just the static import that is different:</p>\n\n<ul>\n<li>1: <code>import static org.mockito.Matchers.argThat;</code> (or for simplicity <code>org.mockito.Mockito</code> which extends <code>Matchers</code>)</li>\n<li>2: <code>import static org.mockito.hamcrest.MockitoHamcrest.argThat;</code></li>\n</ul>\n\n<p>Bonus hint, for readability you can replace <code>times(0)</code> with <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/Mockito.html#4\" rel=\"noreferrer\"><code>never()</code></a>, so in your case it would be:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>verify(customPublisher, never()).publish(argThat(isFailureResult()), anyObject());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23357841,"reputation":1,"user_id":17430567,"display_name":"mileea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637082837,"creation_date":1637081070,"answer_id":69993003,"question_id":45331645,"body_markdown":"The existing answer is useful also when moving from Mockito 1 to Mockito 2 and helped me.\r\n\r\nAlso, with Mockito 2, if the parameter passed to `argThat` is a Mockito object you can use:\r\n`import static org.mockito.ArgumentMatchers.argThat`.","title":"mockito refuses to pair TypeSafeMatcher to a generic method API","body":"<p>The existing answer is useful also when moving from Mockito 1 to Mockito 2 and helped me.</p>\n<p>Also, with Mockito 2, if the parameter passed to <code>argThat</code> is a Mockito object you can use:\n<code>import static org.mockito.ArgumentMatchers.argThat</code>.</p>\n"}],"owner":{"account_id":1065081,"reputation":14112,"user_id":1065869,"accept_rate":57,"display_name":"Elad Benda2"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1655,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45334249,"answer_count":2,"score":1,"last_activity_date":1637082837,"creation_date":1501083681,"question_id":45331645,"body_markdown":"I want to test my code that call some API:\r\n\r\n\r\n    public &lt;T extends MessageLite&gt; ApiFuture&lt;String&gt; publish(final T message) throws Exception {\r\n    }\r\n\r\n\r\n    public &lt;T extends MessageLite&gt; ApiFuture&lt;String&gt; publish(final T message, final ApiFutureCallback&lt;T&gt; futureCallback) throws Exception {\r\n    }\r\n\r\n\r\n    public &lt;T&gt; String publishSynchronous(final String message, final ApiFutureCallback&lt;T&gt; futureCallback) throws Exception {\r\n    }\r\n\r\n\r\nin my test i use mockito mock and then i want to verify it was called with a proto object (extends MessageLite) that has a field `isSuccess = false`\r\n\r\n\r\nI have tired this code:\r\n\r\n        verify(customPublisher, times(0)).publish(isFailureResult(), anyObject());\r\n\r\n\r\nand this matcher:\r\n\r\n    public class FailResultMatcher extends TypeSafeMatcher&lt;MessageLite&gt; {\r\n    \r\n        @Override\r\n        protected boolean matchesSafely(final MessageLite sentResult) {\r\n            return !((SdkResult)sentResult).getIsSuccess();\r\n        }\r\n    \r\n    \r\n        public static FailResultMatcher isFailureResult() {\r\n            return new FailResultMatcher();\r\n        }\r\n    \r\n        @Override\r\n        public void describeTo(final Description description) {\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nbut i get an error in test compilation:\r\n\r\n    Error:(131, 42) java: no suitable method found for publish(com.w.sdkService.matchers.FailResultMatcher,java.lang.Object)\r\n        method linqmap.cloud.google.pubsub.CustomPublisher.&lt;T&gt;publish(java.lang.String,com.google.api.core.ApiFutureCallback&lt;T&gt;) is not applicable\r\n          (cannot infer type-variable(s) T\r\n            (argument mismatch; com.w.sdkService.matchers.FailResultMatcher cannot be converted to java.lang.String))\r\n        method linqmap.cloud.google.pubsub.CustomPublisher.&lt;T&gt;publish(T) is not applicable\r\n          (cannot infer type-variable(s) T\r\n            (actual and formal argument lists differ in length))\r\n        method linqmap.cloud.google.pubsub.CustomPublisher.&lt;T&gt;publish(T,com.google.api.core.ApiFutureCallback&lt;T&gt;) is not applicable\r\n          (inferred type does not conform to upper bound(s)\r\n            inferred: com.w.sdkService.matchers.FailResultMatcher\r\n            upper bound(s): com.google.protobuf.MessageLite)\r\n\r\nHow can i fix this?","title":"mockito refuses to pair TypeSafeMatcher to a generic method API","body":"<p>I want to test my code that call some API:</p>\n\n<pre><code>public &lt;T extends MessageLite&gt; ApiFuture&lt;String&gt; publish(final T message) throws Exception {\n}\n\n\npublic &lt;T extends MessageLite&gt; ApiFuture&lt;String&gt; publish(final T message, final ApiFutureCallback&lt;T&gt; futureCallback) throws Exception {\n}\n\n\npublic &lt;T&gt; String publishSynchronous(final String message, final ApiFutureCallback&lt;T&gt; futureCallback) throws Exception {\n}\n</code></pre>\n\n<p>in my test i use mockito mock and then i want to verify it was called with a proto object (extends MessageLite) that has a field <code>isSuccess = false</code></p>\n\n<p>I have tired this code:</p>\n\n<pre><code>    verify(customPublisher, times(0)).publish(isFailureResult(), anyObject());\n</code></pre>\n\n<p>and this matcher:</p>\n\n<pre><code>public class FailResultMatcher extends TypeSafeMatcher&lt;MessageLite&gt; {\n\n    @Override\n    protected boolean matchesSafely(final MessageLite sentResult) {\n        return !((SdkResult)sentResult).getIsSuccess();\n    }\n\n\n    public static FailResultMatcher isFailureResult() {\n        return new FailResultMatcher();\n    }\n\n    @Override\n    public void describeTo(final Description description) {\n\n    }\n}\n</code></pre>\n\n<p>but i get an error in test compilation:</p>\n\n<pre><code>Error:(131, 42) java: no suitable method found for publish(com.w.sdkService.matchers.FailResultMatcher,java.lang.Object)\n    method linqmap.cloud.google.pubsub.CustomPublisher.&lt;T&gt;publish(java.lang.String,com.google.api.core.ApiFutureCallback&lt;T&gt;) is not applicable\n      (cannot infer type-variable(s) T\n        (argument mismatch; com.w.sdkService.matchers.FailResultMatcher cannot be converted to java.lang.String))\n    method linqmap.cloud.google.pubsub.CustomPublisher.&lt;T&gt;publish(T) is not applicable\n      (cannot infer type-variable(s) T\n        (actual and formal argument lists differ in length))\n    method linqmap.cloud.google.pubsub.CustomPublisher.&lt;T&gt;publish(T,com.google.api.core.ApiFutureCallback&lt;T&gt;) is not applicable\n      (inferred type does not conform to upper bound(s)\n        inferred: com.w.sdkService.matchers.FailResultMatcher\n        upper bound(s): com.google.protobuf.MessageLite)\n</code></pre>\n\n<p>How can i fix this?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":1,"creation_date":1637081825,"post_id":69993137,"comment_id":123728513,"body_markdown":"Welcome to stackoverflow. The code that you have provided is incomplete. A lot is happening in the`Handler` and `HandlerThread` classes, for which you didn&#39;t provide source code. You&#39;d also need to precise which part exactly is unclear for you.","body":"Welcome to stackoverflow. The code that you have provided is incomplete. A lot is happening in the<code>Handler</code> and <code>HandlerThread</code> classes, for which you didn&#39;t provide source code. You&#39;d also need to precise which part exactly is unclear for you."},{"owner":{"account_id":21997618,"reputation":27,"user_id":16269836,"display_name":"moustafa"},"score":0,"creation_date":1637082099,"post_id":69993137,"comment_id":123728629,"body_markdown":"that&#39;s what we are provided after we are told that button is considered a Button view on our activity, i can partially understand the &#39;Handler&#39; and &#39;HandlerThread&#39; but i cant get my head around the usage of the integer i and why we need to use it @MirekPluta","body":"that&#39;s what we are provided after we are told that button is considered a Button view on our activity, i can partially understand the &#39;Handler&#39; and &#39;HandlerThread&#39; but i cant get my head around the usage of the integer i and why we need to use it @MirekPluta"},{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637082378,"post_id":69993137,"comment_id":123728747,"body_markdown":"It&#39;s definitely not how scheduled tasks should be implemented. I&#39;d say that this code is quite messy. It calls `handler.postDelay` from within `run` method, which I assume will call this run method again in 1000ms (because it passes `this` reference). That `int i` is probably meant to guard that `button.setTextColor` won&#39;t execute at first execution of `run`. However, it&#39;ll keep executing every second infinitely. That&#39;s not good way to write code, I&#39;m not sure where did you take it from, but don&#39;t follow such practices.","body":"It&#39;s definitely not how scheduled tasks should be implemented. I&#39;d say that this code is quite messy. It calls <code>handler.postDelay</code> from within <code>run</code> method, which I assume will call this run method again in 1000ms (because it passes <code>this</code> reference). That <code>int i</code> is probably meant to guard that <code>button.setTextColor</code> won&#39;t execute at first execution of <code>run</code>. However, it&#39;ll keep executing every second infinitely. That&#39;s not good way to write code, I&#39;m not sure where did you take it from, but don&#39;t follow such practices."},{"owner":{"account_id":21997618,"reputation":27,"user_id":16269836,"display_name":"moustafa"},"score":0,"creation_date":1637082606,"post_id":69993137,"comment_id":123728835,"body_markdown":"@MirekPluta it is what we were given and yes you are right I loged what i needed and i saw its entering an infinite loop. do you have any suggestion how to solve it ?","body":"@MirekPluta it is what we were given and yes you are right I loged what i needed and i saw its entering an infinite loop. do you have any suggestion how to solve it ?"}],"answers":[{"tags":[],"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637082711,"creation_date":1637082711,"answer_id":69993395,"question_id":69993137,"body_markdown":"This code is in obscure way causing that Runnable to be called with the delay of 1s (every second) because it reschedules itself each time. The `int i` is guarding `button.setTextColor` from executing the first the. \r\n\r\nThis code is however very messy, the way it should be done is as follows:\r\n\r\n```java\r\n\t    Runnable runnable = new Runnable() {\r\n\t        @Override\r\n\t        public void run() {\r\n\t        \tbutton.setTextColor(getResources().getColor(android.R.color.transparent));\r\n\t        }\r\n\t    };\r\n\t    handler.postDelayed(runnable, 1000);\r\n```\r\n\r\nor with lambda expression just as following:\r\n\r\n```java\r\n\t    handler.postDelayed(() -&gt; button.setTextColor(getResources().getColor(android.R.color.transparent)), 1000);\r\n```","title":"I need someone to explain for me this java code","body":"<p>This code is in obscure way causing that Runnable to be called with the delay of 1s (every second) because it reschedules itself each time. The <code>int i</code> is guarding <code>button.setTextColor</code> from executing the first the.</p>\n<p>This code is however very messy, the way it should be done is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Runnable runnable = new Runnable() {\n            @Override\n            public void run() {\n                button.setTextColor(getResources().getColor(android.R.color.transparent));\n            }\n        };\n        handler.postDelayed(runnable, 1000);\n</code></pre>\n<p>or with lambda expression just as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        handler.postDelayed(() -&gt; button.setTextColor(getResources().getColor(android.R.color.transparent)), 1000);\n</code></pre>\n"}],"owner":{"account_id":21997618,"reputation":27,"user_id":16269836,"display_name":"moustafa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69993395,"answer_count":1,"score":0,"last_activity_date":1637082711,"creation_date":1637081680,"question_id":69993137,"body_markdown":"I&#39;m solving an exercise for my university and there is this code in my pdf that my supposed to use to delay the change of the colour of the text on a button, i don&#39;t understand how it exactly works so please can someone explain it\r\n\r\n    HandlerThread handlerThread = new HandlerThread(&quot;showText&quot;);\r\n        handlerThread.start();\r\n        Handler handler = new Handler(handlerThread.getLooper());\r\n\r\n        Runnable runnable = new Runnable() {\r\n            int i = 0;\r\n            @Override\r\n            public void run() {\r\n                i++;\r\n                handler.postDelayed(this, 1000);\r\n                if (i &gt; 1) \r\n                    button.setTextColor(getResources().getColor(android.R.color.transparent));\r\n            }\r\n        };\r\n        handler.post(runnable);","title":"I need someone to explain for me this java code","body":"<p>I'm solving an exercise for my university and there is this code in my pdf that my supposed to use to delay the change of the colour of the text on a button, i don't understand how it exactly works so please can someone explain it</p>\n<pre><code>HandlerThread handlerThread = new HandlerThread(&quot;showText&quot;);\n    handlerThread.start();\n    Handler handler = new Handler(handlerThread.getLooper());\n\n    Runnable runnable = new Runnable() {\n        int i = 0;\n        @Override\n        public void run() {\n            i++;\n            handler.postDelayed(this, 1000);\n            if (i &gt; 1) \n                button.setTextColor(getResources().getColor(android.R.color.transparent));\n        }\n    };\n    handler.post(runnable);\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":4,"creation_date":1637021227,"post_id":69982350,"comment_id":123708891,"body_markdown":"`if` and `else if` can always replace any switch statement. But also get a better professor, because what you wrote is the right way to do this.","body":"<code>if</code> and <code>else if</code> can always replace any switch statement. But also get a better professor, because what you wrote is the right way to do this."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":4,"creation_date":1637021309,"post_id":69982350,"comment_id":123708906,"body_markdown":"*get a better professor* - or understand what the prof is really asking.","body":"<i>get a better professor</i> - or understand what the prof is really asking."},{"owner":{"account_id":23349022,"reputation":3,"user_id":17422842,"display_name":"Lorenzo Mondo"},"score":0,"creation_date":1637021600,"post_id":69982350,"comment_id":123708990,"body_markdown":"He said me to try to find a better solution because this doesn&#39;t respect the Open-Closed principle","body":"He said me to try to find a better solution because this doesn&#39;t respect the Open-Closed principle"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1637021834,"post_id":69982350,"comment_id":123709042,"body_markdown":"Does he want you to use factories to do this. If this is about open-closed then he may be asking you to use the factory pattern.","body":"Does he want you to use factories to do this. If this is about open-closed then he may be asking you to use the factory pattern."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1637021940,"post_id":69982350,"comment_id":123709057,"body_markdown":"Even if you move to a pattern, it does not mean that the switch is no good, just where the switch is.","body":"Even if you move to a pattern, it does not mean that the switch is no good, just where the switch is."}],"answers":[{"tags":[],"owner":{"account_id":19130971,"reputation":100,"user_id":13972872,"display_name":"Garrit Strenge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637082465,"creation_date":1637082106,"answer_id":69993249,"question_id":69982350,"body_markdown":"You could try something along the lines of the command pattern/factory pattern: have a `Map&lt;String, Function&lt;Integer, ComponentLogico&gt;&gt;`, populate it somewhere upon program start up (i.e in a constructor):\r\n\r\n```java\r\nclass A {\r\n    private final Map&lt;String, Function&lt;Integer, ComponentLogico&gt;&gt; componentMap;\r\n\r\n    public A() {\r\n        componentMap = new HashMap&lt;&gt;();\r\n        // Lambda syntax\r\n        componentMap.put(&quot;AND&quot;, (inputs) -&gt; new portaAND(inputs));\r\n        componentMap.put(&quot;OR&quot;, (inputs) -&gt; new portaOR(inputs));\r\n        componentMap.put(&quot;NAND&quot;, (inputs) -&gt; new portaNAND(inputs));\r\n        componentMap.put(&quot;NOR&quot;, (inputs) -&gt; new portaNOR(inputs));\r\n\r\n        // Or use even more condensed syntax with method references:\r\n        componentMap.put(&quot;AND&quot;, portaAND::new);\r\n        componentMap.put(&quot;OR&quot;, portaOR::new);\r\n        componentMap.put(&quot;NAND&quot;, portaNAND::new);\r\n        componentMap.put(&quot;NOR&quot;, portaNOR::new);\r\n    }\r\n\r\n    public void something() {\r\n\r\n        ...\r\n\r\n        String componentName = jList1.getSelectedValue();\r\n        if (!componentMap.contains(componentName)) {\r\n            // Invalid name (not in map)\r\n        }\r\n\r\n        ComponenteLogico comp = componentMap.get(jList1.getSelectedValue()).apply(inputs);\r\n\r\n        ...\r\n\r\n \r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nNotice, we effectively store the constructor to each type of `ComponenteLogico` in a `Map`, where we can get that constructor by using its name. We can then call this constructor as a `Function&lt;int, ComponenteLogico&gt;`, which has a method `ComponenteLogico apply(int value)`.\r\n\r\n- More information on Function interface: https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html \r\n- More information on Method References: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html \r\n- More information on Lambda expressions: https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html","title":"How can I create different object types without using switch case?","body":"<p>You could try something along the lines of the command pattern/factory pattern: have a <code>Map&lt;String, Function&lt;Integer, ComponentLogico&gt;&gt;</code>, populate it somewhere upon program start up (i.e in a constructor):</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    private final Map&lt;String, Function&lt;Integer, ComponentLogico&gt;&gt; componentMap;\n\n    public A() {\n        componentMap = new HashMap&lt;&gt;();\n        // Lambda syntax\n        componentMap.put(&quot;AND&quot;, (inputs) -&gt; new portaAND(inputs));\n        componentMap.put(&quot;OR&quot;, (inputs) -&gt; new portaOR(inputs));\n        componentMap.put(&quot;NAND&quot;, (inputs) -&gt; new portaNAND(inputs));\n        componentMap.put(&quot;NOR&quot;, (inputs) -&gt; new portaNOR(inputs));\n\n        // Or use even more condensed syntax with method references:\n        componentMap.put(&quot;AND&quot;, portaAND::new);\n        componentMap.put(&quot;OR&quot;, portaOR::new);\n        componentMap.put(&quot;NAND&quot;, portaNAND::new);\n        componentMap.put(&quot;NOR&quot;, portaNOR::new);\n    }\n\n    public void something() {\n\n        ...\n\n        String componentName = jList1.getSelectedValue();\n        if (!componentMap.contains(componentName)) {\n            // Invalid name (not in map)\n        }\n\n        ComponenteLogico comp = componentMap.get(jList1.getSelectedValue()).apply(inputs);\n\n        ...\n\n \n    }\n\n\n}\n</code></pre>\n<p>Notice, we effectively store the constructor to each type of <code>ComponenteLogico</code> in a <code>Map</code>, where we can get that constructor by using its name. We can then call this constructor as a <code>Function&lt;int, ComponenteLogico&gt;</code>, which has a method <code>ComponenteLogico apply(int value)</code>.</p>\n<ul>\n<li>More information on Function interface: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html</a></li>\n<li>More information on Method References: <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html</a></li>\n<li>More information on Lambda expressions: <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html</a></li>\n</ul>\n"}],"owner":{"account_id":23349022,"reputation":3,"user_id":17422842,"display_name":"Lorenzo Mondo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69993249,"answer_count":1,"score":0,"last_activity_date":1637082465,"creation_date":1637021028,"question_id":69982350,"body_markdown":"I&#39;ve done my first OOP project in Java. It is a project for my university course, it consists in a Logic Circuit Simulator with GUI. It works, but the problem is that the creation of a new different components is done using a switch case and my professor doesn&#39;t want me to use it. The code below runs when someone press the &quot;Create&quot; button on the GUI. The type &quot;ComponenteLogico&quot; is a superclass, and the classes &quot;portaAND&quot;, &quot;portaOR&quot;, &quot;portaNAND&quot; and company are all &quot;ComponenteLogico&quot; subclasses. How could I avoid the switch case?\r\nSorry if I used a bad english\r\n \r\n```  \r\n int inputs=jComboBox1.getSelectedIndex()+2;\r\n        ComponenteLogico comp=null;\r\n        if(jList1.getSelectedValue() == null)\r\n        {\r\n            System.out.println(&quot;Nessun componente creato&quot;);\r\n            System.out.println(&quot;prova1&quot;);\r\n        }//nel caso dell&#39;aggiunta di una nuova classe bisogna aggiungere la voce corrispondente nello switch case sottostante\r\n        else switch (jList1.getSelectedValue()) {\r\n            case &quot;AND&quot;:\r\n                {\r\n                    comp= new portaAND(inputs);\r\n                    break;\r\n                }\r\n            case &quot;OR&quot;:\r\n                {\r\n                    comp = new portaOR(inputs);\r\n                    break;\r\n                }\r\n            case &quot;NAND&quot;:\r\n                {\r\n                    comp = new portaNAND(inputs);\r\n                    break;\r\n                }\r\n            case &quot;NOR&quot;:\r\n                {\r\n                    comp = new portaNOR(inputs);\r\n                    break;\r\n                }\r\n\r\n```","title":"How can I create different object types without using switch case?","body":"<p>I've done my first OOP project in Java. It is a project for my university course, it consists in a Logic Circuit Simulator with GUI. It works, but the problem is that the creation of a new different components is done using a switch case and my professor doesn't want me to use it. The code below runs when someone press the &quot;Create&quot; button on the GUI. The type &quot;ComponenteLogico&quot; is a superclass, and the classes &quot;portaAND&quot;, &quot;portaOR&quot;, &quot;portaNAND&quot; and company are all &quot;ComponenteLogico&quot; subclasses. How could I avoid the switch case?\nSorry if I used a bad english</p>\n<pre><code> int inputs=jComboBox1.getSelectedIndex()+2;\n        ComponenteLogico comp=null;\n        if(jList1.getSelectedValue() == null)\n        {\n            System.out.println(&quot;Nessun componente creato&quot;);\n            System.out.println(&quot;prova1&quot;);\n        }//nel caso dell'aggiunta di una nuova classe bisogna aggiungere la voce corrispondente nello switch case sottostante\n        else switch (jList1.getSelectedValue()) {\n            case &quot;AND&quot;:\n                {\n                    comp= new portaAND(inputs);\n                    break;\n                }\n            case &quot;OR&quot;:\n                {\n                    comp = new portaOR(inputs);\n                    break;\n                }\n            case &quot;NAND&quot;:\n                {\n                    comp = new portaNAND(inputs);\n                    break;\n                }\n            case &quot;NOR&quot;:\n                {\n                    comp = new portaNOR(inputs);\n                    break;\n                }\n\n</code></pre>\n"},{"tags":["java","abstract-class"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":2,"creation_date":1637082321,"post_id":69993261,"comment_id":123728721,"body_markdown":"Nothing. With that constellation you have to call `super(someCache)`. You might be able to call `super(null)`, but I bet that you will get a NPE then in the method `someMethod`. The real solution is to think about a better design. If `ServiceA` and `ServiceB` do not need the cache, why are they subclasses of `MyService`?","body":"Nothing. With that constellation you have to call <code>super(someCache)</code>. You might be able to call <code>super(null)</code>, but I bet that you will get a NPE then in the method <code>someMethod</code>. The real solution is to think about a better design. If <code>ServiceA</code> and <code>ServiceB</code> do not need the cache, why are they subclasses of <code>MyService</code>?"},{"owner":{"account_id":7720636,"reputation":1532,"user_id":5846981,"accept_rate":100,"display_name":"Som"},"score":0,"creation_date":1637082663,"post_id":69993261,"comment_id":123728856,"body_markdown":"@Seelenvirtuose ; As of now I dont see any requirement to use myCache in the sub classes. So  I thought if its a bad design the way I am implementing.","body":"@Seelenvirtuose ; As of now I dont see any requirement to use myCache in the sub classes. So  I thought if its a bad design the way I am implementing."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637082321,"creation_date":1637082321,"answer_id":69993303,"question_id":69993261,"body_markdown":"You don&#39;t need it to be available to the subclasses, but you _do_ need it to be _there_ for the subclasses, because it&#39;s used in `someMethod`.  So you must pass it into `ServiceA` and `ServiceB` constructors even so.\r\n\r\nIf that _isn&#39;t_ the case -- if `someMethod` is overridden, for example -- then what you have is a bad design, in which maybe `MyService` _shouldn&#39;t_ implement `someMethod`.","title":"How to Initialize an abstract class field which is not used by extending sub class","body":"<p>You don't need it to be available to the subclasses, but you <em>do</em> need it to be <em>there</em> for the subclasses, because it's used in <code>someMethod</code>.  So you must pass it into <code>ServiceA</code> and <code>ServiceB</code> constructors even so.</p>\n<p>If that <em>isn't</em> the case -- if <code>someMethod</code> is overridden, for example -- then what you have is a bad design, in which maybe <code>MyService</code> <em>shouldn't</em> implement <code>someMethod</code>.</p>\n"}],"owner":{"account_id":7720636,"reputation":1532,"user_id":5846981,"accept_rate":100,"display_name":"Som"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637082321,"creation_date":1637082142,"question_id":69993261,"body_markdown":"Here is my problem :\r\n\r\nI have this abstract class :\r\n\r\n    public abstract class MyService {\r\n        private MyCache myCache;\r\n    \r\n        protected MyService(MyCache myCache){\r\n            this.myCache = myCache;\r\n        }\r\n\r\n        void someMethod(){\r\n            // work with the myCache\r\n        }\r\n    }\r\n\r\nNow I have a sub class as below :\r\n\r\n    public class ServiceA extends MyService {\r\n        \r\n        ServiceA () {  // getting error in this line\r\n\r\n        }\r\n\r\n        // some fields and implementations.\r\n\r\n    }\r\n\r\nIf I do this, the error goes :\r\n\r\n    public class ServiceA extends MyService {\r\n\r\n        private MyCache myCache;\r\n        \r\n        ServiceA (MyCache myCache) {  // getting error in this line\r\n            super(myCache);\r\n        }\r\n\r\n        // some fields and implementations.\r\n    }\r\n\r\nMy requirement is I dont need the MyCache field to be available to **ServiceA** or **ServiceB**. However while creating the constructor for **ServiceA** or **ServiceB** the compiler is throwing error that I need to insert **super();** But I dont need this field to be available to the sub classes because I dont use it there. What I can do to achieve that.","title":"How to Initialize an abstract class field which is not used by extending sub class","body":"<p>Here is my problem :</p>\n<p>I have this abstract class :</p>\n<pre><code>public abstract class MyService {\n    private MyCache myCache;\n\n    protected MyService(MyCache myCache){\n        this.myCache = myCache;\n    }\n\n    void someMethod(){\n        // work with the myCache\n    }\n}\n</code></pre>\n<p>Now I have a sub class as below :</p>\n<pre><code>public class ServiceA extends MyService {\n    \n    ServiceA () {  // getting error in this line\n\n    }\n\n    // some fields and implementations.\n\n}\n</code></pre>\n<p>If I do this, the error goes :</p>\n<pre><code>public class ServiceA extends MyService {\n\n    private MyCache myCache;\n    \n    ServiceA (MyCache myCache) {  // getting error in this line\n        super(myCache);\n    }\n\n    // some fields and implementations.\n}\n</code></pre>\n<p>My requirement is I dont need the MyCache field to be available to <strong>ServiceA</strong> or <strong>ServiceB</strong>. However while creating the constructor for <strong>ServiceA</strong> or <strong>ServiceB</strong> the compiler is throwing error that I need to insert <strong>super();</strong> But I dont need this field to be available to the sub classes because I dont use it there. What I can do to achieve that.</p>\n"},{"tags":["java","checkstyle"],"comments":[{"owner":{"account_id":8199432,"reputation":8202,"user_id":6171211,"display_name":"Monzurul Shimul"},"score":1,"creation_date":1485491686,"post_id":41886946,"comment_id":70956309,"body_markdown":"Possible duplicate of http://stackoverflow.com/questions/4023185/how-to-disable-a-particular-checkstyle-rule-for-a-particular-line-of-code","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4023185/how-to-disable-a-particular-checkstyle-rule-for-a-particular-line-of-code\" title=\"how to disable a particular checkstyle rule for a particular line of code\">stackoverflow.com/questions/4023185/&hellip;</a>"},{"owner":{"account_id":1555280,"reputation":1134,"user_id":1750620,"accept_rate":69,"display_name":"Nikhil Girraj"},"score":3,"creation_date":1485500475,"post_id":41886946,"comment_id":70959060,"body_markdown":"Possible duplicate of [How to disable a particular checkstyle rule for a particular line of code?](http://stackoverflow.com/questions/4023185/how-to-disable-a-particular-checkstyle-rule-for-a-particular-line-of-code)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4023185/how-to-disable-a-particular-checkstyle-rule-for-a-particular-line-of-code\">How to disable a particular checkstyle rule for a particular line of code?</a>"}],"answers":[{"tags":[],"owner":{"account_id":5906169,"reputation":10565,"user_id":4647853,"accept_rate":74,"display_name":"Michal Kordas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486023043,"creation_date":1486023043,"answer_id":41997099,"question_id":41886946,"body_markdown":"In Checkstyle code itself there is [`TokenTypes`][1] class that is huge.\r\n\r\nSolution that Checkstyle developers use currently is to suppress that file by specifying it in [`suppressions.xml`][2]:\r\n\r\n    &lt;suppressions&gt;\r\n        &lt;suppress checks=&quot;FileLength&quot;\r\n                  files=&quot;TokenTypes.java&quot;\r\n                  lines=&quot;1&quot;/&gt;\r\n\r\nThis mechanism is called [SuppressionFilter][2].\r\n\r\n\r\n  [1]: https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/TokenTypes.java\r\n  [2]: http://checkstyle.sourceforge.net/config_filters.html#SuppressionFilter","title":"What is the &quot;CHECKSTYLE&quot; comment we add to a Java class to suppress file length?","body":"<p>In Checkstyle code itself there is <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/TokenTypes.java\" rel=\"nofollow noreferrer\"><code>TokenTypes</code></a> class that is huge.</p>\n\n<p>Solution that Checkstyle developers use currently is to suppress that file by specifying it in <a href=\"http://checkstyle.sourceforge.net/config_filters.html#SuppressionFilter\" rel=\"nofollow noreferrer\"><code>suppressions.xml</code></a>:</p>\n\n<pre><code>&lt;suppressions&gt;\n    &lt;suppress checks=\"FileLength\"\n              files=\"TokenTypes.java\"\n              lines=\"1\"/&gt;\n</code></pre>\n\n<p>This mechanism is called <a href=\"http://checkstyle.sourceforge.net/config_filters.html#SuppressionFilter\" rel=\"nofollow noreferrer\">SuppressionFilter</a>.</p>\n"},{"tags":[],"owner":{"account_id":1034367,"reputation":479,"user_id":1042050,"accept_rate":80,"display_name":"Bruno 82"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637082238,"creation_date":1637082238,"answer_id":69993286,"question_id":41886946,"body_markdown":"Just place this comment as the **very first line** of your class file: \r\n\r\n    // CSOFF: FileLength","title":"What is the &quot;CHECKSTYLE&quot; comment we add to a Java class to suppress file length?","body":"<p>Just place this comment as the <strong>very first line</strong> of your class file:</p>\n<pre><code>// CSOFF: FileLength\n</code></pre>\n"}],"owner":{"account_id":5030928,"reputation":85,"user_id":4041121,"accept_rate":12,"display_name":"Ruchi Tengse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3168,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1637082238,"creation_date":1485491166,"question_id":41886946,"body_markdown":"I have a java class with &gt; 2000 lines, and I have Checkstyle configured to allow lines upto 2000. I want to override this Checkstyle property only for one file. \r\nHow can I do that?","title":"What is the &quot;CHECKSTYLE&quot; comment we add to a Java class to suppress file length?","body":"<p>I have a java class with > 2000 lines, and I have Checkstyle configured to allow lines upto 2000. I want to override this Checkstyle property only for one file. \nHow can I do that?</p>\n"},{"tags":["java","vpn","android-vpn-service"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637082012,"post_id":69993162,"comment_id":123728586,"body_markdown":"I&#39;m not sure what exactly are you asking. Is the app connecting to some service that work available only through VPN connection? If so then there is nothing to be done in the app itself, it&#39;s just about properly setting up server without public access.","body":"I&#39;m not sure what exactly are you asking. Is the app connecting to some service that work available only through VPN connection? If so then there is nothing to be done in the app itself, it&#39;s just about properly setting up server without public access."}],"answers":[{"tags":[],"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637082186,"creation_date":1637082186,"answer_id":69993276,"question_id":69993162,"body_markdown":"Write your program like it would access any other local network resource. Once the user connects to the VPN, the network resource will become available and is handled further down the stack. No need to account for a VPN programmatically in your application.","title":"When the VPN is connected, user will be able to enter the app and if they are not connected, they will not be able to enter. How do I do that?","body":"<p>Write your program like it would access any other local network resource. Once the user connects to the VPN, the network resource will become available and is handled further down the stack. No need to account for a VPN programmatically in your application.</p>\n"}],"owner":{"account_id":23357885,"reputation":3,"user_id":17430604,"display_name":"Masud Reza"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69993276,"answer_count":1,"score":0,"last_activity_date":1637082186,"creation_date":1637081781,"question_id":69993162,"body_markdown":"I have seen in many apps that when VPN is connected you can get inside the app and if you are not connected you can&#39;t get in.\r\nHow can I do this with Java programming?","title":"When the VPN is connected, user will be able to enter the app and if they are not connected, they will not be able to enter. How do I do that?","body":"<p>I have seen in many apps that when VPN is connected you can get inside the app and if you are not connected you can't get in.\nHow can I do this with Java programming?</p>\n"},{"tags":["java","xml-parsing","saxparser","domparser"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637082087,"post_id":69993190,"comment_id":123728622,"body_markdown":"Java DOM parser is good for small files.","body":"Java DOM parser is good for small files."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1637228236,"post_id":69993190,"comment_id":123771635,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":17411536,"reputation":9,"user_id":12618661,"display_name":"Amritesh Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637081860,"creation_date":1637081860,"question_id":69993190,"body_markdown":"to parse small xml document or small xml string which xml parser is recomended in java.\r\nI have to get attribute from a xml tag. For that I need to parse a xml string. The string is small it has 4 tags only.\r\n\r\n","title":"to parse small document which xml parser is recomended in java","body":"<p>to parse small xml document or small xml string which xml parser is recomended in java.\nI have to get attribute from a xml tag. For that I need to parse a xml string. The string is small it has 4 tags only.</p>\n"},{"tags":["java","linux","tomcat"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1399386679,"post_id":23497566,"comment_id":36034116,"body_markdown":"Use a profiler to evaluate the application in live. You should also analyze a heap dump and a thread dump to have better understanding of the problems within your applications.","body":"Use a profiler to evaluate the application in live. You should also analyze a heap dump and a thread dump to have better understanding of the problems within your applications."},{"owner":{"account_id":1604752,"reputation":3710,"user_id":1485064,"accept_rate":74,"display_name":"Mikkel L&#248;kke"},"score":1,"creation_date":1399387563,"post_id":23497566,"comment_id":36034759,"body_markdown":"It&#39;s difficult to say, but tomcat shutting down is typically due to one or two things. 1) It&#39;s leaking ThreadLocals, check your JDBC driver, this is the most common source. 2) The server, or one of its applications has crashed irrecoverably (for instance in native code). Edit: Also explicit calls to the shutdown hook. :)","body":"It&#39;s difficult to say, but tomcat shutting down is typically due to one or two things. 1) It&#39;s leaking ThreadLocals, check your JDBC driver, this is the most common source. 2) The server, or one of its applications has crashed irrecoverably (for instance in native code). Edit: Also explicit calls to the shutdown hook. :)"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1399388138,"post_id":23497566,"comment_id":36035164,"body_markdown":"My initial gut feeling would be that this is not happening from inside the server, something in the OS is tripping the shutdown. But I haven&#39;t the faintest clue what magical process that could be.","body":"My initial gut feeling would be that this is not happening from inside the server, something in the OS is tripping the shutdown. But I haven&#39;t the faintest clue what magical process that could be."},{"owner":{"account_id":250668,"reputation":12542,"user_id":527533,"accept_rate":97,"display_name":"Jan Vladimir Mostert"},"score":1,"creation_date":1399389441,"post_id":23497566,"comment_id":36036045,"body_markdown":"Change your tomcat ports in server.xml (specifically your shutdown port) and update your tomcat script that does shutdown / start to log when it&#39;s called and taking a snapshot of what&#39;s running.\nAlso, do you have multiple versions of tomcat running or something else that might be hitting your shutdown listener port?","body":"Change your tomcat ports in server.xml (specifically your shutdown port) and update your tomcat script that does shutdown / start to log when it&#39;s called and taking a snapshot of what&#39;s running. Also, do you have multiple versions of tomcat running or something else that might be hitting your shutdown listener port?"},{"owner":{"account_id":1648031,"reputation":2286,"user_id":1519178,"accept_rate":48,"display_name":"mosaad"},"score":0,"creation_date":1399390963,"post_id":23497566,"comment_id":36037190,"body_markdown":"check that your application does not have a memory leak  look at 2nd answer here http://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java","body":"check that your application does not have a memory leak  look at 2nd answer here <a href=\"http://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java\" title=\"creating a memory leak with java\">stackoverflow.com/questions/6470651/&hellip;</a>"},{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1399401847,"post_id":23497566,"comment_id":36043743,"body_markdown":"Periodic job that stupidly stops Tomcat? Perhaps some kind of attempt at log rotation?","body":"Periodic job that stupidly stops Tomcat? Perhaps some kind of attempt at log rotation?"},{"owner":{"account_id":1495127,"reputation":3189,"user_id":1401265,"accept_rate":29,"display_name":"PrecisionPete"},"score":0,"creation_date":1399427311,"post_id":23497566,"comment_id":36052848,"body_markdown":"Thanks for the ideas... I did disable the shutdown port. So I know it&#39;s not that. And I believe a Kill will make more noise in the log than this. Also... I&#39;m pretty sure it&#39;s not log rotation. I checked and the Linux logrotate does not have a definition for tomcat. And any log date changes do not coincide with the pause times. That leaves me with the really hard ones.","body":"Thanks for the ideas... I did disable the shutdown port. So I know it&#39;s not that. And I believe a Kill will make more noise in the log than this. Also... I&#39;m pretty sure it&#39;s not log rotation. I checked and the Linux logrotate does not have a definition for tomcat. And any log date changes do not coincide with the pause times. That leaves me with the really hard ones."}],"answers":[{"tags":[],"owner":{"account_id":7795,"reputation":116405,"user_id":13663,"accept_rate":75,"display_name":"Will Hartung"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1475738557,"creation_date":1399437041,"answer_id":23508773,"question_id":23497566,"body_markdown":"Something is telling Tomcat to shut down.\r\n\r\nTomcat does not gracefully shut down when it&#39;s &quot;in trouble&quot; (out of memory, or anything else). Linux does not gracefully shut down processes when it&#39;s low on memory, it stops them hard with a kill -9, which leave no trace in the Tomcat log.\r\n\r\n* `kill -15` will shut down tomcat gracefully, via the shut down hook. (The answer previously said `kill -3` here, which is simply causing a thread dump.)\r\n\r\n* An internal exit() will shut it down gracefully as well, again via the shut down hook.\r\n\r\n* It can be shut down via JMX, and, of course the shut down command from Catalina.\r\n\r\nSo, someone, somewhere, is telling Tomcat to do this. This isn&#39;t some unknown, internal &quot;problem&quot;. Those kind of things just kill tomcat outright, they don&#39;t ask politely.\r\n\r\nOne thing you might try is to enable DEBUG for logging, to see what chatter you get. If you get too much, you can try looking specifically at `org.apache.catalina.core.StandardContext`. This may well not give you more than it already being logged, but it may tell you something.\r\n\r\nAfter that, if so motivated, and it continues, I&#39;d suggest building Tomcat yourself, and interjecting some stack trace dumps.\r\n\r\nFor example, in `org.apache.coyote.AbstractProtcol`, you can add:\r\n\r\n    Exception e = new Exception(&quot;Shut down trace&quot;);\r\n    getLog().info(&quot;Shutting down protocol&quot;, e);\r\n\r\nto the `stop()` method.\r\n\r\nThat will give you a solid stack trace to learn from whence this came. Tomcat isn&#39;t really a nasty event storm of just random messages floating around. The shut down is pretty synchronous. So, that stack trace will give you a solid lead as to who started the party. Then you can look from there to see how that could have happened.\r\n\r\nThere&#39;s a bunch of interfaces and abstractions in Tomcat, but really only a few implementations, so it&#39;s not impenetrable. And having a smoking stack trace will help immensely in pinning it down.\r\n","title":"Tomcat shutting down by itself","body":"<p>Something is telling Tomcat to shut down.</p>\n\n<p>Tomcat does not gracefully shut down when it's \"in trouble\" (out of memory, or anything else). Linux does not gracefully shut down processes when it's low on memory, it stops them hard with a kill -9, which leave no trace in the Tomcat log.</p>\n\n<ul>\n<li><p><code>kill -15</code> will shut down tomcat gracefully, via the shut down hook. (The answer previously said <code>kill -3</code> here, which is simply causing a thread dump.)</p></li>\n<li><p>An internal exit() will shut it down gracefully as well, again via the shut down hook.</p></li>\n<li><p>It can be shut down via JMX, and, of course the shut down command from Catalina.</p></li>\n</ul>\n\n<p>So, someone, somewhere, is telling Tomcat to do this. This isn't some unknown, internal \"problem\". Those kind of things just kill tomcat outright, they don't ask politely.</p>\n\n<p>One thing you might try is to enable DEBUG for logging, to see what chatter you get. If you get too much, you can try looking specifically at <code>org.apache.catalina.core.StandardContext</code>. This may well not give you more than it already being logged, but it may tell you something.</p>\n\n<p>After that, if so motivated, and it continues, I'd suggest building Tomcat yourself, and interjecting some stack trace dumps.</p>\n\n<p>For example, in <code>org.apache.coyote.AbstractProtcol</code>, you can add:</p>\n\n<pre><code>Exception e = new Exception(\"Shut down trace\");\ngetLog().info(\"Shutting down protocol\", e);\n</code></pre>\n\n<p>to the <code>stop()</code> method.</p>\n\n<p>That will give you a solid stack trace to learn from whence this came. Tomcat isn't really a nasty event storm of just random messages floating around. The shut down is pretty synchronous. So, that stack trace will give you a solid lead as to who started the party. Then you can look from there to see how that could have happened.</p>\n\n<p>There's a bunch of interfaces and abstractions in Tomcat, but really only a few implementations, so it's not impenetrable. And having a smoking stack trace will help immensely in pinning it down.</p>\n"},{"tags":[],"owner":{"account_id":1543322,"reputation":2538,"user_id":3233365,"display_name":"Gerard H. Pille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475738585,"creation_date":1441444190,"answer_id":32411348,"question_id":23497566,"body_markdown":"How is your Tomcat started?  If there is a parent process, a signal sent to the parent could be the cause of a clean shutdown.","title":"Tomcat shutting down by itself","body":"<p>How is your Tomcat started?  If there is a parent process, a signal sent to the parent could be the cause of a clean shutdown.</p>\n"},{"tags":[],"owner":{"account_id":2672537,"reputation":1307,"user_id":2309582,"display_name":"e.thompsy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472103519,"creation_date":1472103519,"answer_id":39137442,"question_id":23497566,"body_markdown":"There is a known (and fixed bug) in Tomcat versions prior to v7.0.55:\r\n\r\nhttps://bz.apache.org/bugzilla/show_bug.cgi?id=56684\r\n\r\nThe thread is really good reading but I can summarize it for you. When you start Tomcat there is a wait state that starts waiting for the shutdown command. This is normal, but the bug in these versions is an implicit timeout on this wait of about 50 days. When the wait state timed out, the Tomcat would shutdown.\r\n\r\nSo there ARE cases of odd things happening in Tomcat and NO, you are not crazy. This was happening to a SOLR cluster that I maintained for more than a year before I found this bug and fixed it with an upgrade. No one ever noticed because it took so long to crash and with all that goes on it can be easy to brush past finding the root cause. The easiest thing is to just restart Tomcat and forget it ever happened.\r\n\r\nI hope this answer helps you. I see that you are/were running a version with this bug. \r\n\r\nGood luck!","title":"Tomcat shutting down by itself","body":"<p>There is a known (and fixed bug) in Tomcat versions prior to v7.0.55:</p>\n\n<p><a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=56684\" rel=\"nofollow\">https://bz.apache.org/bugzilla/show_bug.cgi?id=56684</a></p>\n\n<p>The thread is really good reading but I can summarize it for you. When you start Tomcat there is a wait state that starts waiting for the shutdown command. This is normal, but the bug in these versions is an implicit timeout on this wait of about 50 days. When the wait state timed out, the Tomcat would shutdown.</p>\n\n<p>So there ARE cases of odd things happening in Tomcat and NO, you are not crazy. This was happening to a SOLR cluster that I maintained for more than a year before I found this bug and fixed it with an upgrade. No one ever noticed because it took so long to crash and with all that goes on it can be easy to brush past finding the root cause. The easiest thing is to just restart Tomcat and forget it ever happened.</p>\n\n<p>I hope this answer helps you. I see that you are/were running a version with this bug. </p>\n\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":1196398,"reputation":6672,"user_id":1168041,"accept_rate":72,"display_name":"leeyuiwah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1522356972,"creation_date":1522356972,"answer_id":49564897,"question_id":23497566,"body_markdown":"**A case in DC/OS**\r\n\r\nRecently we had a similar incident.  Our `tomcat` is running in a docker as a service in a `DC/OS` environment.  The stderr just said tomcat was killed, and there was no useful traces in any log files of tomcat.\r\n\r\nIt turned out the reason was simply that we did not allocate enough memory to the service.  More debugging suggestions are [here][1], but the key technique we used is to check the kernel log:\r\n\r\n    # journalctl -f _TRANSPORT=kernel\r\n    ...\r\n    Mar 29 15:09:09 host-17 kernel: Memory cgroup out of memory: Kill process 7935 (java) score 1021 or sacrifice child\r\n    Mar 29 15:09:09 host-17 kernel: Killed process 7906 (java) total-vm:11583840kB, anon-rss:1032860kB, file-rss:30924kB, shmem-rss:0kB\r\n    ...\r\n\r\nOnce we found that out, we increased the memory allocation to the service in DC/OS and the problem was solved.\r\n\r\n\r\n  [1]: https://docs.mesosphere.com/1.8/usage/tutorials/dcos-101/resources/","title":"Tomcat shutting down by itself","body":"<p><strong>A case in DC/OS</strong></p>\n\n<p>Recently we had a similar incident.  Our <code>tomcat</code> is running in a docker as a service in a <code>DC/OS</code> environment.  The stderr just said tomcat was killed, and there was no useful traces in any log files of tomcat.</p>\n\n<p>It turned out the reason was simply that we did not allocate enough memory to the service.  More debugging suggestions are <a href=\"https://docs.mesosphere.com/1.8/usage/tutorials/dcos-101/resources/\" rel=\"nofollow noreferrer\">here</a>, but the key technique we used is to check the kernel log:</p>\n\n<pre><code># journalctl -f _TRANSPORT=kernel\n...\nMar 29 15:09:09 host-17 kernel: Memory cgroup out of memory: Kill process 7935 (java) score 1021 or sacrifice child\nMar 29 15:09:09 host-17 kernel: Killed process 7906 (java) total-vm:11583840kB, anon-rss:1032860kB, file-rss:30924kB, shmem-rss:0kB\n...\n</code></pre>\n\n<p>Once we found that out, we increased the memory allocation to the service in DC/OS and the problem was solved.</p>\n"},{"tags":[],"owner":{"account_id":5259611,"reputation":341,"user_id":4201477,"display_name":"Dongfang Qu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533786197,"creation_date":1533786197,"answer_id":51758493,"question_id":23497566,"body_markdown":"How is your Tomcat started? If there is a parent process, a signal sent to the parent could be the cause of a clean shutdown. I suggest adding `set -m` option into `start_script.sh`.","title":"Tomcat shutting down by itself","body":"<p>How is your Tomcat started? If there is a parent process, a signal sent to the parent could be the cause of a clean shutdown. I suggest adding <code>set -m</code> option into <code>start_script.sh</code>.</p>\n"},{"tags":[],"owner":{"account_id":8180867,"reputation":590,"user_id":8316710,"display_name":"wowbagger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637081763,"creation_date":1637081763,"answer_id":69993157,"question_id":23497566,"body_markdown":"I&#39;ve had this happening with Jasperserver and an included apache-tomcat.  Setting ```export USE_NOHUP=true``` in ```setenv.sh``` fixed it. ","title":"Tomcat shutting down by itself","body":"<p>I've had this happening with Jasperserver and an included apache-tomcat.  Setting <code>export USE_NOHUP=true</code> in <code>setenv.sh</code> fixed it.</p>\n"}],"owner":{"account_id":1495127,"reputation":3189,"user_id":1401265,"accept_rate":29,"display_name":"PrecisionPete"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28433,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1637081763,"creation_date":1399386523,"question_id":23497566,"body_markdown":"I&#39;m running Tomcat 7.0.53 on CentOS 6.5 64 bit and OpenJDK 1.7 64. \r\n\r\nI have several servers where occasionally - like randomly once per week - Tomcat will just gracefully shut itself down. I&#39;ve been looking at this for months and cannot find the reason. The only pattern seems to be a long period of nothing going on then the shutdown.\r\n\r\n- I have upgraded to latest versions of the underlying tools (Tomcat, Java, etc)\r\n- I am running with the default memory settings\r\n- I have disabled the SHUTDOWN in the server.xml\r\n- I have moved MySQL to another box to ensure Tomcat is the only substantial application (server also runs nginx)\r\n- I have verified that I have no System.exit() in any of my code. I have not scanned the libs as I can&#39;t figure out how to do that. And I don&#39;t expect I will find anything there either. Why would a library exit anyway?\r\n- I have enabled logging of garbage collection. But they seem pretty quick - like full GC in 0.15s\r\n\r\nHere is the memory usage of one of the servers. Lots of RAM free.\r\n\r\n                     total       used       free     shared    buffers     cached\r\n        Mem:          2006        771       1234          0        176        281\r\n        -/+ buffers/cache:        313       1692\r\n        Swap:         2047          0       2047\r\n\r\nBelow is one of the events in the Catalina.out. You can see it starts then does nothing exciting for several hours. Then gracefully shuts itself down as if it was told to.\r\n\r\nI&#39;ve researched this to death and have not bee able to get a handle on this. \r\n\r\nCan someone please propose a plan of action for me?\r\n\r\nThanks\r\n\r\nFrom the Server.xml:\r\n\r\n        &lt;Server port=&quot;-1&quot; shutdown=&quot;__SHUTDOWN__&quot;&gt;\r\n\r\nFrom Catalina.out:\r\n\r\n\tApr 28, 2014 5:34:50 PM org.apache.tomcat.util.digester.SetPropertiesRule begin\r\n\tWARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Valve} Setting property &#39;remoteIpProxiesHeader&#39; to &#39;x-forwarded-by&#39; did not find a matching property.\r\n\tApr 28, 2014 5:34:50 PM org.apache.coyote.AbstractProtocol init\r\n\tINFO: Initializing ProtocolHandler [&quot;http-apr-8080&quot;]\r\n\tApr 28, 2014 5:34:50 PM org.apache.coyote.AbstractProtocol init\r\n\tINFO: Initializing ProtocolHandler [&quot;ajp-apr-8009&quot;]\r\n\tApr 28, 2014 5:34:50 PM org.apache.catalina.startup.Catalina load\r\n\tINFO: Initialization processed in 3247 ms\r\n\tApr 28, 2014 5:34:50 PM org.apache.catalina.core.StandardService startInternal\r\n\tINFO: Starting service Catalina\r\n\tApr 28, 2014 5:34:50 PM org.apache.catalina.core.StandardEngine startInternal\r\n\tINFO: Starting Servlet Engine: Apache Tomcat/7.0.53\r\n\tApr 28, 2014 5:34:59 PM org.apache.coyote.AbstractProtocol start\r\n\tINFO: Starting ProtocolHandler [&quot;http-apr-8080&quot;]\r\n\tApr 28, 2014 5:34:59 PM org.apache.coyote.AbstractProtocol start\r\n\tINFO: Starting ProtocolHandler [&quot;ajp-apr-8009&quot;]\r\n\tApr 28, 2014 5:34:59 PM org.apache.catalina.startup.Catalina start\r\n\tINFO: Server startup in 8278 ms\r\n\tApr 28, 2014 5:41:53 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar\r\n\tINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n\tApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol pause\r\n\tINFO: Pausing ProtocolHandler [&quot;http-apr-8080&quot;]\r\n\tApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol pause\r\n\tINFO: Pausing ProtocolHandler [&quot;ajp-apr-8009&quot;]\r\n\tApr 28, 2014 10:32:32 PM org.apache.catalina.core.StandardService stopInternal\r\n\tINFO: Stopping service Catalina\r\n\tApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol stop\r\n\tINFO: Stopping ProtocolHandler [&quot;http-apr-8080&quot;]\r\n\tApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol stop\r\n\tINFO: Stopping ProtocolHandler [&quot;ajp-apr-8009&quot;]\r\n\tApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol destroy\r\n\tINFO: Destroying ProtocolHandler [&quot;http-apr-8080&quot;]\r\n\tApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol destroy\r\n\tINFO: Destroying ProtocolHandler [&quot;ajp-apr-8009&quot;]\r\n\tMay 05, 2014 8:10:32 PM org.apache.catalina.core.AprLifecycleListener init\r\n\tINFO: Loaded APR based Apache Tomcat Native library 1.1.29 using APR version 1.3.9.\r\n\tMay 05, 2014 8:10:32 PM org.apache.catalina.core.AprLifecycleListener init\r\n\tINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\r\n\tMay 05, 2014 8:10:32 PM org.apache.tomcat.util.digester.SetPropertiesRule begin\r\n\r\n\r\n\r\n\r\n","title":"Tomcat shutting down by itself","body":"<p>I'm running Tomcat 7.0.53 on CentOS 6.5 64 bit and OpenJDK 1.7 64. </p>\n\n<p>I have several servers where occasionally - like randomly once per week - Tomcat will just gracefully shut itself down. I've been looking at this for months and cannot find the reason. The only pattern seems to be a long period of nothing going on then the shutdown.</p>\n\n<ul>\n<li>I have upgraded to latest versions of the underlying tools (Tomcat, Java, etc)</li>\n<li>I am running with the default memory settings</li>\n<li>I have disabled the SHUTDOWN in the server.xml</li>\n<li>I have moved MySQL to another box to ensure Tomcat is the only substantial application (server also runs nginx)</li>\n<li>I have verified that I have no System.exit() in any of my code. I have not scanned the libs as I can't figure out how to do that. And I don't expect I will find anything there either. Why would a library exit anyway?</li>\n<li>I have enabled logging of garbage collection. But they seem pretty quick - like full GC in 0.15s</li>\n</ul>\n\n<p>Here is the memory usage of one of the servers. Lots of RAM free.</p>\n\n<pre><code>                 total       used       free     shared    buffers     cached\n    Mem:          2006        771       1234          0        176        281\n    -/+ buffers/cache:        313       1692\n    Swap:         2047          0       2047\n</code></pre>\n\n<p>Below is one of the events in the Catalina.out. You can see it starts then does nothing exciting for several hours. Then gracefully shuts itself down as if it was told to.</p>\n\n<p>I've researched this to death and have not bee able to get a handle on this. </p>\n\n<p>Can someone please propose a plan of action for me?</p>\n\n<p>Thanks</p>\n\n<p>From the Server.xml:</p>\n\n<pre><code>    &lt;Server port=\"-1\" shutdown=\"__SHUTDOWN__\"&gt;\n</code></pre>\n\n<p>From Catalina.out:</p>\n\n<pre><code>Apr 28, 2014 5:34:50 PM org.apache.tomcat.util.digester.SetPropertiesRule begin\nWARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Valve} Setting property 'remoteIpProxiesHeader' to 'x-forwarded-by' did not find a matching property.\nApr 28, 2014 5:34:50 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [\"http-apr-8080\"]\nApr 28, 2014 5:34:50 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [\"ajp-apr-8009\"]\nApr 28, 2014 5:34:50 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 3247 ms\nApr 28, 2014 5:34:50 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nApr 28, 2014 5:34:50 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.53\nApr 28, 2014 5:34:59 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [\"http-apr-8080\"]\nApr 28, 2014 5:34:59 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [\"ajp-apr-8009\"]\nApr 28, 2014 5:34:59 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 8278 ms\nApr 28, 2014 5:41:53 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol pause\nINFO: Pausing ProtocolHandler [\"http-apr-8080\"]\nApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol pause\nINFO: Pausing ProtocolHandler [\"ajp-apr-8009\"]\nApr 28, 2014 10:32:32 PM org.apache.catalina.core.StandardService stopInternal\nINFO: Stopping service Catalina\nApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol stop\nINFO: Stopping ProtocolHandler [\"http-apr-8080\"]\nApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol stop\nINFO: Stopping ProtocolHandler [\"ajp-apr-8009\"]\nApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol destroy\nINFO: Destroying ProtocolHandler [\"http-apr-8080\"]\nApr 28, 2014 10:32:32 PM org.apache.coyote.AbstractProtocol destroy\nINFO: Destroying ProtocolHandler [\"ajp-apr-8009\"]\nMay 05, 2014 8:10:32 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: Loaded APR based Apache Tomcat Native library 1.1.29 using APR version 1.3.9.\nMay 05, 2014 8:10:32 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\nMay 05, 2014 8:10:32 PM org.apache.tomcat.util.digester.SetPropertiesRule begin\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8147,"page":1845,"page_size":100}
