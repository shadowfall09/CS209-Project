{"items":[{"tags":["java","android","android-recyclerview"],"owner":{"account_id":11747090,"reputation":13,"user_id":8597529,"display_name":"Muhammad Arslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686363013,"creation_date":1686363013,"question_id":76444470,"body_markdown":"i have history record of transaction which i&#39;m getting from the api, these records are more than 50. when i show them in RecyclerView and use\r\n\r\n```\r\nLinearLayoutManager linearLayoutManager = new LinearLayoutManager(RedemptionHistoryActivity.this);\r\n                                linearLayoutManager.setReverseLayout(true);\r\n                                linearLayoutManager.setStackFromEnd(true);\r\n```\r\nnow i got current one at the top, but how could i limit these records to only show 10 records in RecyclerView, because when i set limit to 10 in Adapter it show 10 records but starting 10 records not the current one.\r\nplease help me out that how can i get the current 10 records in Android Java.\r\n\r\n\r\n```\r\nhistoryAdapter = new HistoryAdapter(RedemptionHistoryActivity.this, historyModelArrayList);\r\n                                LinearLayoutManager linearLayoutManager = new LinearLayoutManager(RedemptionHistoryActivity.this);\r\n                                linearLayoutManager.setReverseLayout(true);\r\n                                linearLayoutManager.setStackFromEnd(true);\r\n                                rv_history.setLayoutManager(linearLayoutManager);\r\n                                rv_history.setAdapter(historyAdapter);\r\n                                historyAdapter.notifyDataSetChanged();\r\n```\r\n","title":"How to set limit for recyclerView data, while its in reverse in direction, and i have to get the current data only? (Android Java)","body":"<p>i have history record of transaction which i'm getting from the api, these records are more than 50. when i show them in RecyclerView and use</p>\n<pre><code>LinearLayoutManager linearLayoutManager = new LinearLayoutManager(RedemptionHistoryActivity.this);\n                                linearLayoutManager.setReverseLayout(true);\n                                linearLayoutManager.setStackFromEnd(true);\n</code></pre>\n<p>now i got current one at the top, but how could i limit these records to only show 10 records in RecyclerView, because when i set limit to 10 in Adapter it show 10 records but starting 10 records not the current one.\nplease help me out that how can i get the current 10 records in Android Java.</p>\n<pre><code>historyAdapter = new HistoryAdapter(RedemptionHistoryActivity.this, historyModelArrayList);\n                                LinearLayoutManager linearLayoutManager = new LinearLayoutManager(RedemptionHistoryActivity.this);\n                                linearLayoutManager.setReverseLayout(true);\n                                linearLayoutManager.setStackFromEnd(true);\n                                rv_history.setLayoutManager(linearLayoutManager);\n                                rv_history.setAdapter(historyAdapter);\n                                historyAdapter.notifyDataSetChanged();\n</code></pre>\n"},{"tags":["java","android","static","global-variables","local-variables"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686330446,"creation_date":1686330446,"answer_id":76442387,"question_id":76442373,"body_markdown":"&gt;Would doing this increase the performance in the long run\r\n\r\nYes. You are avoiding object instantiation and cutting down on garbage collection needs.\r\n\r\n&gt; prevent the app from being killed by the Android OS?\r\n\r\nNo.\r\n","title":"Performance wise is better to use global static variables or local variables?","body":"<blockquote>\n<p>Would doing this increase the performance in the long run</p>\n</blockquote>\n<p>Yes. You are avoiding object instantiation and cutting down on garbage collection needs.</p>\n<blockquote>\n<p>prevent the app from being killed by the Android OS?</p>\n</blockquote>\n<p>No.</p>\n"},{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686330691,"creation_date":1686330691,"answer_id":76442418,"question_id":76442373,"body_markdown":"Since `Pattern` is [marked][1] as thread safe:\r\n\r\n&gt; Instances of this (Pattern) class are immutable and are safe for use\r\n&gt; by multiple concurrent threads. Instances of the Matcher class are not\r\n&gt; safe for such use.\r\n\r\nIt would work and will increase performance. It depends on you application, but in general it&#39;s unlikely that the impact would be significant enough to be noticeable. Probability that gain would turn out to be such crucial to prevent app from being killed even way lower, so I would say it would **not** prevent app from being killed.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html","title":"Performance wise is better to use global static variables or local variables?","body":"<p>Since <code>Pattern</code> is <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">marked</a> as thread safe:</p>\n<blockquote>\n<p>Instances of this (Pattern) class are immutable and are safe for use\nby multiple concurrent threads. Instances of the Matcher class are not\nsafe for such use.</p>\n</blockquote>\n<p>It would work and will increase performance. It depends on you application, but in general it's unlikely that the impact would be significant enough to be noticeable. Probability that gain would turn out to be such crucial to prevent app from being killed even way lower, so I would say it would <strong>not</strong> prevent app from being killed.</p>\n"},{"tags":[],"owner":{"account_id":10536282,"reputation":164,"user_id":7764065,"display_name":"Javid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686332435,"creation_date":1686332435,"answer_id":76442578,"question_id":76442373,"body_markdown":"Yes. Your code gets faster but you should pay attention to your method flow too.\r\nfor example some times you can avoid some if test like this in your code.\r\nand even by making some methods static in util class then you will not need creating object for using that method.\r\n\r\n    \r\n    private static final Pattern TEST_1 = Pattern.compile(Pattern.quote(&quot;TEST1&quot;), Pattern.CASE_INSENSITIVE);\r\n    private static final Pattern TEST_2 = Pattern.compile(Pattern.quote(&quot;TEST2&quot;), Pattern.CASE_INSENSITIVE);\r\n\r\n    public static boolean method(String text) {\r\n        return TEST_1.matcher(text).find() || TEST_2.matcher(text).find();\r\n    }","title":"Performance wise is better to use global static variables or local variables?","body":"<p>Yes. Your code gets faster but you should pay attention to your method flow too.\nfor example some times you can avoid some if test like this in your code.\nand even by making some methods static in util class then you will not need creating object for using that method.</p>\n<pre><code>private static final Pattern TEST_1 = Pattern.compile(Pattern.quote(&quot;TEST1&quot;), Pattern.CASE_INSENSITIVE);\nprivate static final Pattern TEST_2 = Pattern.compile(Pattern.quote(&quot;TEST2&quot;), Pattern.CASE_INSENSITIVE);\n\npublic static boolean method(String text) {\n    return TEST_1.matcher(text).find() || TEST_2.matcher(text).find();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686361257,"creation_date":1686342617,"answer_id":76443462,"question_id":76442373,"body_markdown":"Your approach is the common way to reduce object creation in Java.\r\n\r\nThe _final_ keyword doesn&#39;t have the effect you&#39;re imagining.  \r\nThat is used to prevent accidently writing over a variable.\r\n\r\nIt&#39;s commonly used in team environments, to signify that a variable needs to maintain it&#39;s value.\r\n\r\n_[Variables (The Java&amp;trade; Tutorials &amp;gt;        \r\n            Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)_.\r\n&gt; _&quot;... Additionally, the keyword final could be added to indicate that the [value] will never change.&quot;_\r\n\r\nAnd, the _static_ modifier is an interesting idea.  \r\nIf you plan on creating multiple instances of the class, then it would help.\r\n\r\nIf it&#39;s just one instance, it wouldn&#39;t apply.\r\n\r\nAlso, you mention the following.\r\n\r\n&gt; _&quot;Would doing this ... prevent the app from being killed by the Android OS?&quot;_\r\n\r\nThis, I am unsure of.  \r\nYou&#39;ll have to review the constraints of either the _[Dalvik VM](https://en.wikipedia.org/wiki/Dalvik_(software))_ or the newer, _[ART](https://en.wikipedia.org/wiki/Android_Runtime)_ runtime environment.\r\n\r\nAs a final note, you can combine your _[regular expression](https://en.wikipedia.org/wiki/Regular_expression#POSIX_extended) pattern_.\r\n\r\n```java\r\nprivate static String regex = Pattern.quote(&quot;TEST1&quot;) + &quot;|&quot; + Pattern.quote(&quot;TEST2&quot;);\r\nprivate static Pattern TEST = Pattern.compile(regex);\r\n\r\npublic boolean method() {\r\n    return TEST.matcher(text).find();\r\n}\r\n```","title":"Performance wise is better to use global static variables or local variables?","body":"<p>Your approach is the common way to reduce object creation in Java.</p>\n<p>The <em>final</em> keyword doesn't have the effect you're imagining.<br />\nThat is used to prevent accidently writing over a variable.</p>\n<p>It's commonly used in team environments, to signify that a variable needs to maintain it's value.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html\" rel=\"nofollow noreferrer\">Variables (The Java™ Tutorials &gt;<br />\nLearning the Java Language &gt; Language Basics)</a></em>.</p>\n<blockquote>\n<p><em>&quot;... Additionally, the keyword final could be added to indicate that the [value] will never change.&quot;</em></p>\n</blockquote>\n<p>And, the <em>static</em> modifier is an interesting idea.<br />\nIf you plan on creating multiple instances of the class, then it would help.</p>\n<p>If it's just one instance, it wouldn't apply.</p>\n<p>Also, you mention the following.</p>\n<blockquote>\n<p><em>&quot;Would doing this ... prevent the app from being killed by the Android OS?&quot;</em></p>\n</blockquote>\n<p>This, I am unsure of.<br />\nYou'll have to review the constraints of either the <em><a href=\"https://en.wikipedia.org/wiki/Dalvik_(software)\" rel=\"nofollow noreferrer\">Dalvik VM</a></em> or the newer, <em><a href=\"https://en.wikipedia.org/wiki/Android_Runtime\" rel=\"nofollow noreferrer\">ART</a></em> runtime environment.</p>\n<p>As a final note, you can combine your <em><a href=\"https://en.wikipedia.org/wiki/Regular_expression#POSIX_extended\" rel=\"nofollow noreferrer\">regular expression</a> pattern</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String regex = Pattern.quote(&quot;TEST1&quot;) + &quot;|&quot; + Pattern.quote(&quot;TEST2&quot;);\nprivate static Pattern TEST = Pattern.compile(regex);\n\npublic boolean method() {\n    return TEST.matcher(text).find();\n}\n</code></pre>\n"}],"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76442387,"answer_count":4,"score":0,"last_activity_date":1686361257,"creation_date":1686330322,"question_id":76442373,"body_markdown":"I have an app that continuously check for matches into a text.\r\nSnippet:\r\n\r\n    public boolean method()\r\n        {\r\n        \tif(Pattern.compile(Pattern.quote(&quot;TEST1&quot;), Pattern.CASE_INSENSITIVE).matcher(text).find())\r\n                return true;\r\n            if(Pattern.compile(Pattern.quote(&quot;TEST2&quot;), Pattern.CASE_INSENSITIVE).matcher(text).find())\r\n                return true;\r\n            return false;\r\n        }\r\n\r\nSince this method gets called a lot, I thought what if I make static global variables instead of creating Pattern inside the method each time gets called.\r\nTherefore:\r\n\r\n         private static final Pattern TEST_1 = Pattern.compile(Pattern.quote(&quot;TEST1&quot;), Pattern.CASE_INSENSITIVE);\r\n        private static final Pattern TEST_2 = Pattern.compile(Pattern.quote(&quot;TEST2&quot;), Pattern.CASE_INSENSITIVE);\r\n    \r\n     public boolean method()\r\n        {\r\n            if(TEST_1.matcher(text).find())\r\n                return true;\r\n            if(TEST_2.matcher(text).find())\r\n                return true;\r\n            return false;\r\n        }\r\n\r\nWould doing this increase the performance in the long run and, most importantly, prevent the app from being killed by the Android OS?","title":"Performance wise is better to use global static variables or local variables?","body":"<p>I have an app that continuously check for matches into a text.\nSnippet:</p>\n<pre><code>public boolean method()\n    {\n        if(Pattern.compile(Pattern.quote(&quot;TEST1&quot;), Pattern.CASE_INSENSITIVE).matcher(text).find())\n            return true;\n        if(Pattern.compile(Pattern.quote(&quot;TEST2&quot;), Pattern.CASE_INSENSITIVE).matcher(text).find())\n            return true;\n        return false;\n    }\n</code></pre>\n<p>Since this method gets called a lot, I thought what if I make static global variables instead of creating Pattern inside the method each time gets called.\nTherefore:</p>\n<pre><code>     private static final Pattern TEST_1 = Pattern.compile(Pattern.quote(&quot;TEST1&quot;), Pattern.CASE_INSENSITIVE);\n    private static final Pattern TEST_2 = Pattern.compile(Pattern.quote(&quot;TEST2&quot;), Pattern.CASE_INSENSITIVE);\n\n public boolean method()\n    {\n        if(TEST_1.matcher(text).find())\n            return true;\n        if(TEST_2.matcher(text).find())\n            return true;\n        return false;\n    }\n</code></pre>\n<p>Would doing this increase the performance in the long run and, most importantly, prevent the app from being killed by the Android OS?</p>\n"},{"tags":["java","android","canvas","android-view"],"comments":[{"owner":{"account_id":25417380,"reputation":526,"user_id":19224040,"display_name":"Rob"},"score":0,"creation_date":1682795186,"post_id":76118290,"comment_id":134272493,"body_markdown":"Can you please share your `R.styleable.Thermometer`, `R.styleable.Thermometer_therm_color`, and `R.drawable.thermometer_container`?","body":"Can you please share your <code>R.styleable.Thermometer</code>, <code>R.styleable.Thermometer_therm_color</code>, and <code>R.drawable.thermometer_container</code>?"},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1682836029,"post_id":76118290,"comment_id":134275813,"body_markdown":"@Rob: Thanks for your comment. I edited my answer (altough I don&#39;t know what the difference between the `R.styleable.Thermometer, R.styleable.Thermometer_therm_colo` are. Hope it helps","body":"@Rob: Thanks for your comment. I edited my answer (altough I don&#39;t know what the difference between the <code>R.styleable.Thermometer, R.styleable.Thermometer_therm_colo</code> are. Hope it helps"}],"answers":[{"tags":[],"owner":{"account_id":25417380,"reputation":526,"user_id":19224040,"display_name":"Rob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686360312,"creation_date":1682850501,"answer_id":76140754,"question_id":76118290,"body_markdown":"I&#39;ll try to explain my thought process here, so if you encounter a situation like this again you&#39;ll have a reference on some steps you can take to solve the problem.\r\n\r\nThis is very similar to your hot water tank question, but with some important differences. The major difference is the image itself. This is your thermometer image (opened in Photoshop to clearly see the background)- notice the padding around the thermometer:\r\n\r\n[![Original thermometer image][1]][1]\r\n\r\nBecause this padding is part of the image itself, we can&#39;t reduce the padding in Android Studio beyond the edges of the image (actually we can, but it&#39;s easier to just modify the image). So that would be the first step: crop the image to get rid of the excess padding. I have done that here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNote that there is still some space on the right side so that the thermometer body is directly in the center of the image.\r\n\r\nNext, the issues with the thermometer class itself. You were on the right track modifying the `onSizeChanged` and the `onMeasure` methods, but they can&#39;t be exactly the same as they were for the water tank - we have different end goals here. In the water tank class, we were just trying to create a rectangle to represent the water inside the tank, but here we&#39;re trying to create a circle and a rectangle to represent the fluid inside the thermometer. Let&#39;s go through your original `onSizeChanged` method in the thermometer class, starting with `// init bitmap`: \r\n\r\n```java\r\n        // init bitmap\r\n        int scaledHeight;\r\n        int scaledWidth;\r\n        int width = getWidth();\r\n        int height = getHeight();\r\n        if (width &gt; height) {\r\n            scaledHeight = (int) (height * 0.90);\r\n            scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\r\n        } else {\r\n            scaledWidth = (int) (width * 0.90);\r\n            scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\r\n        }\r\n\r\n        bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\r\n```\r\n\r\nIt&#39;s hard for me to understand the point of this code. It seems like we&#39;re getting the width and the height of the bitmap, then multiplying each side by 0.9 and setting the bitmap&#39;s dimensions to the result. Let&#39;s just not modify the dimensions for now, and we can come back to it later if we need to. This code can be replaced by the single line: \r\n\r\n```java\r\nbitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\r\n```\r\n\r\nNext, we have the code: \r\n\r\n```java\r\n        mInnerRadius = bitmap.getWidth() / 8;\r\n\r\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 10));\r\n        left = (getWidth() - bitmap.getWidth()) / 2;\r\n        top = (getHeight() - bitmap.getHeight()) / 2;\r\n        innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72)) / 2;\r\n        circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4.6f);\r\n\r\n\r\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n```\r\n\r\nLine by line: \r\n\r\n`mInnerRadius = bitmap.getWidth() / 8;` sets the radius of the red circle at the bottom of the thermometer. The radius will be the width of the bitmap divided by 8. Note that because we&#39;re going to use the cropped thermometer, we&#39;re going to have to play around with this number to find a radius that looks good with our new image. \r\n\r\n`mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 10));` sets the stroke width of the rectangular part of the thermometer&#39;s fluid. Same as above, we have to modify this to fit our new image.\r\n\r\nThe next three lines, assigning values to `left`, `top`, and `innerCircleCenter`, seem to have no effect on the generation of the image, so let&#39;s just get rid of them. Again, we can come back to these later if we find out something breaks. \r\n\r\n`circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4.6f);` determines where on the bitmap to draw the red circle. Like above, we&#39;ll have to modify this value.\r\n\r\nThe last two lines assigning values to `lineStartY` and `lineEndY` determine the height at which the red rectangle will start and end. We&#39;ll modify these as well.\r\n\r\nSo, here is our new `onSizeChanged` method, with new values to fit our newly cropped thermometer image. Feel free to play around with the values to see how modifying them changes the size and position of the red rectangle/circle. \r\n\r\n```java\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n\r\n        bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\r\n\r\n        mInnerRadius = bitmap.getWidth() / 6;\r\n        innerCircleCenter = getWidth()/ 2;\r\n        circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 5f);\r\n\r\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 7));\r\n        lineStartY = ((int)(bitmap.getHeight() / 6.4f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 2f);\r\n    }\r\n```\r\n\r\nThe `onMeasure` method is fine except for the first two lines. These need to match the aspect ratio of the image you&#39;re using. In your previous question, I used the dimensions of the hot water tank image, but the dimensions and the aspect ratio of the thermometer are different:\r\n\r\n```java\r\n        int desiredWidth = 558;\r\n        int desiredHeight = 730;\r\n```\r\n\r\nFinally, as mentioned in the previous post, you should not be assigning _both_ a `layout_constraintHeight_percent` and a `layout_constraintWidth_percent`, because doing so will warp your image. Get rid of one of these constraints and instead set the `layout_width` or `layout_height` to `wrap_content`. Updated xml:\r\n\r\n```xml\r\n    &lt;com.example.test2.Thermometer\r\n        android:id=&quot;@+id/thermometer&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHeight_percent=&quot;0.3&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.795&quot;/&gt;\r\n```\r\n\r\n\r\nIn sum: First, crop the excess padding in the image (or use the image I cropped above). Then, modify the `onSizeChanged` to account for the size differences in the new image. Finally, edit the dimensions in `onMeasure` to match the new image. \r\n\r\nResult:\r\n\r\n[![Final result][3]][3]\r\n\r\nHere is the complete code for my `Thermometer.java`:\r\n\r\n```java\r\npackage com.example.test2;\r\n\r\nimport android.content.Context;\r\nimport android.content.res.TypedArray;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Color;\r\nimport android.graphics.Paint;\r\nimport android.util.AttributeSet;\r\nimport android.view.View;\r\n\r\npublic class Thermometer extends View {\r\n    private Paint mInnerCirclePaint;\r\n    private int mInnerRadius;\r\n    private int mThermometerColor = Color.RED;\r\n    private Bitmap bitmap;\r\n    private int left;\r\n    private int top;\r\n    private int innerCircleCenter;\r\n    private int circleHeight;\r\n    private int lineEndY;\r\n    private int lineStartY;\r\n    double positionOfTemperatureBar = 0.2;\r\n\r\n    //0.378= 20&#176;C, 0.2 = 21 &#176;C, 0.022 = 22&#176;C, 0.41 = lower limit, -0.03 = upper limit\r\n    final double value_positionOfTemperatureBar_20Degrees = 0.378;\r\n    final double value_positionOfTemperatureBar_22Degrees = 0.022;\r\n    final double value_positionOfTemperatureBar_upperLimit = -0.03 ;\r\n    final double value_positionOfTemperatureBar_lowerLimit = 0.41;\r\n\r\n\r\n\r\n    public Thermometer(Context context) {\r\n        this(context, null);\r\n    }\r\n\r\n    public Thermometer(Context context, AttributeSet attrs) {\r\n        this(context, attrs, 0);\r\n    }\r\n\r\n    public Thermometer(Context context, AttributeSet attrs, int defStyle) {\r\n        super(context, attrs, defStyle);\r\n\r\n        if (attrs != null) {\r\n\r\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\r\n\r\n            mThermometerColor = a.getColor(R.styleable.Thermometer_therm_color, mThermometerColor);\r\n\r\n            a.recycle();\r\n        }\r\n\r\n        init();\r\n    }\r\n\r\n    private void init() {\r\n        mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n        mInnerCirclePaint.setColor(mThermometerColor);\r\n        mInnerCirclePaint.setStyle(Paint.Style.FILL);\r\n\r\n        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.updated_therm);\r\n    }\r\n\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n\r\n        bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\r\n\r\n        mInnerRadius = bitmap.getWidth() / 6;\r\n        innerCircleCenter = getWidth() / 2;\r\n        circleHeight = (bitmap.getHeight()) - (int)(bitmap.getHeight() / 5f);\r\n\r\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 7));\r\n        lineStartY = ((int)(bitmap.getHeight() / 6.4f)) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n        lineEndY = (bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n    }\r\n\r\n    @Override\r\n    protected void onDraw(Canvas canvas) {\r\n        super.onDraw(canvas);\r\n\r\n        drawThermometer(canvas);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n        int desiredWidth = 558;\r\n        int desiredHeight = 730;\r\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\r\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\r\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\r\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\r\n\r\n        int width;\r\n        int height;\r\n\r\n        //Measure Height\r\n        if (heightMode == MeasureSpec.EXACTLY) {\r\n            //Must be this size\r\n            height = heightSize;\r\n        } else if (heightMode == MeasureSpec.AT_MOST) {\r\n            //Can&#39;t be bigger than...\r\n            height = Math.min(desiredHeight, heightSize);\r\n        } else {\r\n            //Be whatever you want\r\n            height = desiredHeight;\r\n        }\r\n\r\n        //Measure Width\r\n        if (widthMode == MeasureSpec.EXACTLY) {\r\n            //Must be this size\r\n            width = widthSize;\r\n        } else if (widthMode == MeasureSpec.AT_MOST) {\r\n            //Can&#39;t be bigger than...\r\n            width = heightSize * desiredWidth / desiredHeight;\r\n        } else {\r\n            //Be whatever you want\r\n            width = desiredWidth;\r\n        }\r\n\r\n        setMeasuredDimension(width, height);\r\n    }\r\n\r\n    private void drawThermometer(Canvas canvas) {\r\n        canvas.drawCircle(innerCircleCenter, circleHeight, mInnerRadius, mInnerCirclePaint);\r\n        canvas.drawLine(innerCircleCenter, lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\r\n        canvas.drawBitmap(bitmap, left, top, new Paint());\r\n    }\r\n\r\n    public void setThermometerColor(int thermometerColor) {\r\n        this.mThermometerColor = thermometerColor;\r\n        mInnerCirclePaint.setColor(mThermometerColor);\r\n        invalidate();\r\n    }\r\n\r\n    public void changeTemperature( double percentageChangeOfTheWholeBar) {\r\n        double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\r\n        if (appliedPercentageChangeOfTheWholeBar&gt;1) {\r\n            appliedPercentageChangeOfTheWholeBar = 1;\r\n        }\r\n        if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\r\n            appliedPercentageChangeOfTheWholeBar = -1;\r\n        }\r\n\r\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\r\n\r\n        positionOfTemperatureBar = positionOfTemperatureBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\r\n        if (positionOfTemperatureBar &lt; value_positionOfTemperatureBar_upperLimit) {\r\n            positionOfTemperatureBar = value_positionOfTemperatureBar_upperLimit;\r\n        }\r\n\r\n        if(positionOfTemperatureBar &gt; value_positionOfTemperatureBar_lowerLimit) {\r\n            positionOfTemperatureBar = value_positionOfTemperatureBar_lowerLimit;\r\n        }\r\n\r\n\r\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n    }\r\n\r\n    public void setTemperature( double setTemperatureDegreesCelsius) {\r\n        double appliedSetTemperature = setTemperatureDegreesCelsius;\r\n        if (appliedSetTemperature &lt; 20) {\r\n            appliedSetTemperature = 20;\r\n        }\r\n        if (appliedSetTemperature &gt;22) {\r\n            appliedSetTemperature = 22;\r\n        }\r\n\r\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\r\n\r\n        positionOfTemperatureBar = value_positionOfTemperatureBar_20Degrees + ((setTemperatureDegreesCelsius - 20 )/2)  * absolutValueSpanForTheWholeBar;\r\n\r\n\r\n\r\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/vNeFD.png\r\n  [2]: https://i.stack.imgur.com/IxLNa.png\r\n  [3]: https://i.stack.imgur.com/7rCUN.png","title":"How to remove unwanted padding from self made canvas view in Android","body":"<p>I'll try to explain my thought process here, so if you encounter a situation like this again you'll have a reference on some steps you can take to solve the problem.</p>\n<p>This is very similar to your hot water tank question, but with some important differences. The major difference is the image itself. This is your thermometer image (opened in Photoshop to clearly see the background)- notice the padding around the thermometer:</p>\n<p><a href=\"https://i.stack.imgur.com/vNeFD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vNeFD.png\" alt=\"Original thermometer image\" /></a></p>\n<p>Because this padding is part of the image itself, we can't reduce the padding in Android Studio beyond the edges of the image (actually we can, but it's easier to just modify the image). So that would be the first step: crop the image to get rid of the excess padding. I have done that here:</p>\n<p><a href=\"https://i.stack.imgur.com/IxLNa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IxLNa.png\" alt=\"enter image description here\" /></a></p>\n<p>Note that there is still some space on the right side so that the thermometer body is directly in the center of the image.</p>\n<p>Next, the issues with the thermometer class itself. You were on the right track modifying the <code>onSizeChanged</code> and the <code>onMeasure</code> methods, but they can't be exactly the same as they were for the water tank - we have different end goals here. In the water tank class, we were just trying to create a rectangle to represent the water inside the tank, but here we're trying to create a circle and a rectangle to represent the fluid inside the thermometer. Let's go through your original <code>onSizeChanged</code> method in the thermometer class, starting with <code>// init bitmap</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        // init bitmap\n        int scaledHeight;\n        int scaledWidth;\n        int width = getWidth();\n        int height = getHeight();\n        if (width &gt; height) {\n            scaledHeight = (int) (height * 0.90);\n            scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\n        } else {\n            scaledWidth = (int) (width * 0.90);\n            scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\n        }\n\n        bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\n</code></pre>\n<p>It's hard for me to understand the point of this code. It seems like we're getting the width and the height of the bitmap, then multiplying each side by 0.9 and setting the bitmap's dimensions to the result. Let's just not modify the dimensions for now, and we can come back to it later if we need to. This code can be replaced by the single line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\n</code></pre>\n<p>Next, we have the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        mInnerRadius = bitmap.getWidth() / 8;\n\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 10));\n        left = (getWidth() - bitmap.getWidth()) / 2;\n        top = (getHeight() - bitmap.getHeight()) / 2;\n        innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72)) / 2;\n        circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4.6f);\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n</code></pre>\n<p>Line by line:</p>\n<p><code>mInnerRadius = bitmap.getWidth() / 8;</code> sets the radius of the red circle at the bottom of the thermometer. The radius will be the width of the bitmap divided by 8. Note that because we're going to use the cropped thermometer, we're going to have to play around with this number to find a radius that looks good with our new image.</p>\n<p><code>mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 10));</code> sets the stroke width of the rectangular part of the thermometer's fluid. Same as above, we have to modify this to fit our new image.</p>\n<p>The next three lines, assigning values to <code>left</code>, <code>top</code>, and <code>innerCircleCenter</code>, seem to have no effect on the generation of the image, so let's just get rid of them. Again, we can come back to these later if we find out something breaks.</p>\n<p><code>circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4.6f);</code> determines where on the bitmap to draw the red circle. Like above, we'll have to modify this value.</p>\n<p>The last two lines assigning values to <code>lineStartY</code> and <code>lineEndY</code> determine the height at which the red rectangle will start and end. We'll modify these as well.</p>\n<p>So, here is our new <code>onSizeChanged</code> method, with new values to fit our newly cropped thermometer image. Feel free to play around with the values to see how modifying them changes the size and position of the red rectangle/circle.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\n\n        mInnerRadius = bitmap.getWidth() / 6;\n        innerCircleCenter = getWidth()/ 2;\n        circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 5f);\n\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 7));\n        lineStartY = ((int)(bitmap.getHeight() / 6.4f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 2f);\n    }\n</code></pre>\n<p>The <code>onMeasure</code> method is fine except for the first two lines. These need to match the aspect ratio of the image you're using. In your previous question, I used the dimensions of the hot water tank image, but the dimensions and the aspect ratio of the thermometer are different:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        int desiredWidth = 558;\n        int desiredHeight = 730;\n</code></pre>\n<p>Finally, as mentioned in the previous post, you should not be assigning <em>both</em> a <code>layout_constraintHeight_percent</code> and a <code>layout_constraintWidth_percent</code>, because doing so will warp your image. Get rid of one of these constraints and instead set the <code>layout_width</code> or <code>layout_height</code> to <code>wrap_content</code>. Updated xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;com.example.test2.Thermometer\n        android:id=&quot;@+id/thermometer&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.3&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.795&quot;/&gt;\n</code></pre>\n<p>In sum: First, crop the excess padding in the image (or use the image I cropped above). Then, modify the <code>onSizeChanged</code> to account for the size differences in the new image. Finally, edit the dimensions in <code>onMeasure</code> to match the new image.</p>\n<p>Result:</p>\n<p><a href=\"https://i.stack.imgur.com/7rCUN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7rCUN.png\" alt=\"Final result\" /></a></p>\n<p>Here is the complete code for my <code>Thermometer.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.test2;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.util.AttributeSet;\nimport android.view.View;\n\npublic class Thermometer extends View {\n    private Paint mInnerCirclePaint;\n    private int mInnerRadius;\n    private int mThermometerColor = Color.RED;\n    private Bitmap bitmap;\n    private int left;\n    private int top;\n    private int innerCircleCenter;\n    private int circleHeight;\n    private int lineEndY;\n    private int lineStartY;\n    double positionOfTemperatureBar = 0.2;\n\n    //0.378= 20°C, 0.2 = 21 °C, 0.022 = 22°C, 0.41 = lower limit, -0.03 = upper limit\n    final double value_positionOfTemperatureBar_20Degrees = 0.378;\n    final double value_positionOfTemperatureBar_22Degrees = 0.022;\n    final double value_positionOfTemperatureBar_upperLimit = -0.03 ;\n    final double value_positionOfTemperatureBar_lowerLimit = 0.41;\n\n\n\n    public Thermometer(Context context) {\n        this(context, null);\n    }\n\n    public Thermometer(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public Thermometer(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        if (attrs != null) {\n\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\n\n            mThermometerColor = a.getColor(R.styleable.Thermometer_therm_color, mThermometerColor);\n\n            a.recycle();\n        }\n\n        init();\n    }\n\n    private void init() {\n        mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        mInnerCirclePaint.setColor(mThermometerColor);\n        mInnerCirclePaint.setStyle(Paint.Style.FILL);\n\n        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.updated_therm);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\n\n        mInnerRadius = bitmap.getWidth() / 6;\n        innerCircleCenter = getWidth() / 2;\n        circleHeight = (bitmap.getHeight()) - (int)(bitmap.getHeight() / 5f);\n\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 7));\n        lineStartY = ((int)(bitmap.getHeight() / 6.4f)) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        drawThermometer(canvas);\n    }\n\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        int desiredWidth = 558;\n        int desiredHeight = 730;\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n\n        int width;\n        int height;\n\n        //Measure Height\n        if (heightMode == MeasureSpec.EXACTLY) {\n            //Must be this size\n            height = heightSize;\n        } else if (heightMode == MeasureSpec.AT_MOST) {\n            //Can't be bigger than...\n            height = Math.min(desiredHeight, heightSize);\n        } else {\n            //Be whatever you want\n            height = desiredHeight;\n        }\n\n        //Measure Width\n        if (widthMode == MeasureSpec.EXACTLY) {\n            //Must be this size\n            width = widthSize;\n        } else if (widthMode == MeasureSpec.AT_MOST) {\n            //Can't be bigger than...\n            width = heightSize * desiredWidth / desiredHeight;\n        } else {\n            //Be whatever you want\n            width = desiredWidth;\n        }\n\n        setMeasuredDimension(width, height);\n    }\n\n    private void drawThermometer(Canvas canvas) {\n        canvas.drawCircle(innerCircleCenter, circleHeight, mInnerRadius, mInnerCirclePaint);\n        canvas.drawLine(innerCircleCenter, lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\n        canvas.drawBitmap(bitmap, left, top, new Paint());\n    }\n\n    public void setThermometerColor(int thermometerColor) {\n        this.mThermometerColor = thermometerColor;\n        mInnerCirclePaint.setColor(mThermometerColor);\n        invalidate();\n    }\n\n    public void changeTemperature( double percentageChangeOfTheWholeBar) {\n        double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\n        if (appliedPercentageChangeOfTheWholeBar&gt;1) {\n            appliedPercentageChangeOfTheWholeBar = 1;\n        }\n        if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\n            appliedPercentageChangeOfTheWholeBar = -1;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\n\n        positionOfTemperatureBar = positionOfTemperatureBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\n        if (positionOfTemperatureBar &lt; value_positionOfTemperatureBar_upperLimit) {\n            positionOfTemperatureBar = value_positionOfTemperatureBar_upperLimit;\n        }\n\n        if(positionOfTemperatureBar &gt; value_positionOfTemperatureBar_lowerLimit) {\n            positionOfTemperatureBar = value_positionOfTemperatureBar_lowerLimit;\n        }\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n\n    public void setTemperature( double setTemperatureDegreesCelsius) {\n        double appliedSetTemperature = setTemperatureDegreesCelsius;\n        if (appliedSetTemperature &lt; 20) {\n            appliedSetTemperature = 20;\n        }\n        if (appliedSetTemperature &gt;22) {\n            appliedSetTemperature = 22;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\n\n        positionOfTemperatureBar = value_positionOfTemperatureBar_20Degrees + ((setTemperatureDegreesCelsius - 20 )/2)  * absolutValueSpanForTheWholeBar;\n\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76140754,"answer_count":1,"score":1,"last_activity_date":1686360312,"creation_date":1682583919,"question_id":76118290,"body_markdown":"I have a custom made Canvas object in Android (thermometer) that unfortunately has a padding around it that I want to get rid of as it makes it quite difficult to position it within the layout. Here is how it looks like:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is the code of the Thermoeter Java class:\r\n\r\n    package com.example.game;\r\n    \r\n    import android.content.Context;\r\n    import android.content.res.TypedArray;\r\n    import android.graphics.Bitmap;\r\n    import android.graphics.BitmapFactory;\r\n    import android.graphics.Canvas;\r\n    import android.graphics.Color;\r\n    import android.graphics.Paint;\r\n    import android.util.AttributeSet;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    \r\n    public class Thermometer extends View {\r\n        private Paint mInnerCirclePaint;\r\n        private int mInnerRadius;\r\n        private int mThermometerColor = Color.RED;\r\n        private Bitmap bitmap;\r\n        private int left;\r\n        private int top;\r\n        private int innerCircleCenter;\r\n        private int circleHeight;\r\n        private int lineEndY;\r\n        private int lineStartY;\r\n        double positionOfTemperatureBar = 0.2;\r\n    \r\n        //0.378= 20&#176;C, 0.2 = 21 &#176;C, 0.022 = 22&#176;C, 0.41 = lower limit, -0.03 = upper limit\r\n        final double value_positionOfTemperatureBar_20Degrees = 0.378;\r\n        final double value_positionOfTemperatureBar_22Degrees = 0.022;\r\n        final double value_positionOfTemperatureBar_upperLimit = -0.03 ;\r\n        final double value_positionOfTemperatureBar_lowerLimit = 0.41;\r\n    \r\n    \r\n    \r\n    \r\n        public Thermometer(Context context) {\r\n            this(context, null);\r\n        }\r\n    \r\n        public Thermometer(Context context, AttributeSet attrs) {\r\n            this(context, attrs, 0);\r\n        }\r\n    \r\n        public Thermometer(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n    \r\n            if (attrs != null) {\r\n    \r\n                final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\r\n    \r\n                mThermometerColor = a.getColor(R.styleable.Thermometer_therm_color, mThermometerColor);\r\n    \r\n                a.recycle();\r\n            }\r\n    \r\n            init();\r\n        }\r\n    \r\n        private void init() {\r\n            mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n            mInnerCirclePaint.setColor(mThermometerColor);\r\n            mInnerCirclePaint.setStyle(Paint.Style.FILL);\r\n    \r\n            bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.thermometer_container);\r\n        }\r\n    \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            super.onSizeChanged(w, h, oldw, oldh);\r\n    \r\n    \r\n            // init bitmap\r\n            int scaledHeight;\r\n            int scaledWidth;\r\n            int width = getWidth();\r\n            int height = getHeight();\r\n            if (width &gt; height) {\r\n                scaledHeight = (int) (height * 0.90);\r\n                scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\r\n            } else {\r\n                scaledWidth = (int) (width * 0.90);\r\n                scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\r\n            }\r\n    \r\n            bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\r\n    \r\n            mInnerRadius = bitmap.getWidth() / 8;\r\n    \r\n            mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 10));\r\n            left = (getWidth() - bitmap.getWidth()) / 2;\r\n            top = (getHeight() - bitmap.getHeight()) / 2;\r\n            innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72)) / 2;\r\n            circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4.6f);\r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n    \r\n            drawThermometer(canvas);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n    \r\n            //takes care of paddingTop and paddingBottom\r\n            int paddingY = getPaddingBottom() + getPaddingTop();\r\n    \r\n            //get height and width\r\n            int width = MeasureSpec.getSize(widthMeasureSpec);\r\n            int height = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            height += paddingY;\r\n    \r\n            setMeasuredDimension(width, height);\r\n        }\r\n    \r\n        private void drawThermometer(Canvas canvas) {\r\n            canvas.drawCircle(innerCircleCenter, circleHeight, mInnerRadius, mInnerCirclePaint);\r\n            canvas.drawLine(innerCircleCenter, lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\r\n            canvas.drawBitmap(bitmap, left, top, new Paint());\r\n        }\r\n    \r\n        public void setThermometerColor(int thermometerColor) {\r\n            this.mThermometerColor = thermometerColor;\r\n            mInnerCirclePaint.setColor(mThermometerColor);\r\n            invalidate();\r\n        }\r\n    \r\n        public void changeTemperature( double percentageChangeOfTheWholeBar) {\r\n            double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\r\n            if (appliedPercentageChangeOfTheWholeBar&gt;1) {\r\n                appliedPercentageChangeOfTheWholeBar = 1;\r\n            }\r\n            if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\r\n                appliedPercentageChangeOfTheWholeBar = -1;\r\n            }\r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\r\n    \r\n            positionOfTemperatureBar = positionOfTemperatureBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\r\n            if (positionOfTemperatureBar &lt; value_positionOfTemperatureBar_upperLimit) {\r\n                positionOfTemperatureBar = value_positionOfTemperatureBar_upperLimit;\r\n            }\r\n    \r\n            if(positionOfTemperatureBar &gt; value_positionOfTemperatureBar_lowerLimit) {\r\n                positionOfTemperatureBar = value_positionOfTemperatureBar_lowerLimit;\r\n            }\r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n        }\r\n    \r\n        public void setTemperature( double setTemperatureDegreesCelsius) {\r\n            double appliedSetTemperature = setTemperatureDegreesCelsius;\r\n            if (appliedSetTemperature &lt; 20) {\r\n                appliedSetTemperature = 20;\r\n            }\r\n            if (appliedSetTemperature &gt;22) {\r\n                appliedSetTemperature = 22;\r\n            }\r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\r\n    \r\n            positionOfTemperatureBar = value_positionOfTemperatureBar_20Degrees + ((setTemperatureDegreesCelsius - 20 )/2)  * absolutValueSpanForTheWholeBar;\r\n    \r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nAnd here is the code of the XML layout file that contains the thermometer object:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/constraintLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n    \r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;com.example.game.Thermometer\r\n            android:id=&quot;@+id/thermometer&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.3&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.529&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.795&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.15&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/button_action&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:text=&quot;Action&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.102&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.373&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.745&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nFollowing the answer to this question https://stackoverflow.com/questions/75903378/self-made-canvas-view-in-android-is-not-correctly-displayed-any-more/75967754?noredirect=1#comment134233925_75967754 I tried to change the `onSizeChanged` and `onMeasure` method accordingly which looked like this:\r\n\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n    \r\n        // init bitmap\r\n    \r\n        int width = getWidth();\r\n        int height = getHeight();\r\n    \r\n        mInnerCirclePaint.setStrokeWidth( (float) (width * 0.9));\r\n    \r\n        bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);\r\n    \r\n        //innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\r\n        innerCircleCenter = getWidth() / 2;\r\n    \r\n        left = (getWidth() - bitmap.getWidth()) / 2;\r\n        top = (getHeight() - bitmap.getHeight()) / 2;\r\n    \r\n    \r\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\r\n    \r\n    }\r\n    \r\n    @Override\r\n    protected void onDraw(Canvas canvas) {\r\n        super.onDraw(canvas);\r\n    \r\n        drawThermometer(canvas);\r\n    }\r\n    \r\n    \r\n    @Override\r\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n    \r\n        // the actual dimensions of your water tank image\r\n        // these are just here to set the aspect ratio and the &#39;max&#39; dimensions (we will make it smaller in the xml)\r\n        int desiredWidth = 421;\r\n        int desiredHeight = 693;\r\n    \r\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\r\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\r\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\r\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n        int width;\r\n        int height;\r\n    \r\n        //Measure Height\r\n        if (heightMode == MeasureSpec.EXACTLY) {\r\n            //Must be this size\r\n            height = heightSize;\r\n        } else if (heightMode == MeasureSpec.AT_MOST) {\r\n            //Can&#39;t be bigger than...\r\n            height = Math.min(desiredHeight, heightSize);\r\n        } else {\r\n            //Be whatever you want\r\n            height = desiredHeight;\r\n        }\r\n    \r\n        //Measure Width\r\n        if (widthMode == MeasureSpec.EXACTLY) {\r\n            //Must be this size\r\n            width = widthSize;\r\n        } else if (widthMode == MeasureSpec.AT_MOST) {\r\n            //Can&#39;t be bigger than...\r\n            width = heightSize * desiredWidth / desiredHeight;\r\n        } else {\r\n            //Be whatever you want\r\n            width = desiredWidth;\r\n        }\r\n    \r\n        setMeasuredDimension(width, height);\r\n    }\r\n\r\nBut the result looked like this:\r\n[![enter image description here][2]][2]\r\n\r\nThis is obviously not what I want because the temperature bar is way to big (altough the padding disappeared). For me it is extremely difficult to design such self-made canvas objects in Android as I don&#39;t know what to adjust in order to make them look properly. Do you have any idea what I can do in order to have a proper temperature bar in the self-made canvas object while having no padding? How do you approach such kind of problems? \r\n\r\nUpdate:\r\nHere is the `R.drawable.thermometer_container`\r\n[![enter image description here][3]][3]\r\n\r\nAnd here is the `R.styleable.Thermometer`\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;resources&gt;\r\n        &lt;declare-styleable name=&quot;Thermometer&quot;&gt;\r\n            &lt;attr name=&quot;therm_color&quot; format=&quot;color&quot; /&gt;\r\n        &lt;/declare-styleable&gt;\r\n    &lt;/resources&gt;\r\n\r\n\r\n**Update**: I tried the approach suggested by Rob but unfortunately there are 3 problems with it as you can see in the screenshot:\r\n[![enter image description here][4]][4]\r\n\r\n 1. I can&#39;t place the view precisely as the blue area aroung the view wraps horizontally to the boundaries which is not what I want\r\n 2. Layout Editor: The red circle inside the thermometer is too small and the whole red bar is too much on the right and not in the center.\r\n 3. In the Emulator the custom view looks extremely bad as you can see on the screenshot[![enter image description here][5]][5]\r\n\r\nHere is the updated code of the Thermometer.class\r\n\r\n    package com.example.game;\r\n    \r\n    import android.content.Context;\r\n    import android.content.res.TypedArray;\r\n    import android.graphics.Bitmap;\r\n    import android.graphics.BitmapFactory;\r\n    import android.graphics.Canvas;\r\n    import android.graphics.Color;\r\n    import android.graphics.Paint;\r\n    import android.util.AttributeSet;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    \r\n    public class Thermometer extends View {\r\n        private Paint mInnerCirclePaint;\r\n        private int mInnerRadius;\r\n        private int mThermometerColor = Color.RED;\r\n        private Bitmap bitmap;\r\n        private int left;\r\n        private int top;\r\n        private int innerCircleCenter;\r\n        private int circleHeight;\r\n        private int lineEndY;\r\n        private int lineStartY;\r\n        double positionOfTemperatureBar = 0.2;\r\n    \r\n        //0.378= 20&#176;C, 0.2 = 21 &#176;C, 0.022 = 22&#176;C, 0.41 = lower limit, -0.03 = upper limit\r\n        final double value_positionOfTemperatureBar_20Degrees = 0.378;\r\n        final double value_positionOfTemperatureBar_22Degrees = 0.022;\r\n        final double value_positionOfTemperatureBar_upperLimit = -0.03 ;\r\n        final double value_positionOfTemperatureBar_lowerLimit = 0.41;\r\n    \r\n    \r\n    \r\n    \r\n        public Thermometer(Context context) {\r\n            this(context, null);\r\n        }\r\n    \r\n        public Thermometer(Context context, AttributeSet attrs) {\r\n            this(context, attrs, 0);\r\n        }\r\n    \r\n        public Thermometer(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n    \r\n            if (attrs != null) {\r\n    \r\n                final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\r\n    \r\n                mThermometerColor = a.getColor(R.styleable.Thermometer_therm_color, mThermometerColor);\r\n    \r\n                a.recycle();\r\n            }\r\n    \r\n            init();\r\n        }\r\n    \r\n        private void init() {\r\n            mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n            mInnerCirclePaint.setColor(mThermometerColor);\r\n            mInnerCirclePaint.setStyle(Paint.Style.FILL);\r\n    \r\n            bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.thermometer_container);\r\n        }\r\n    \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            super.onSizeChanged(w, h, oldw, oldh);\r\n    \r\n            bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\r\n    \r\n            mInnerRadius = bitmap.getWidth() / 5;\r\n            innerCircleCenter = getWidth()/ 2;\r\n            circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 5f);\r\n    \r\n            mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 7));\r\n            lineStartY = ((int)(bitmap.getHeight() / 6.4f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 2f);\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n    \r\n            drawThermometer(canvas);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n    \r\n            int desiredWidth = 558;\r\n            int desiredHeight = 730;\r\n    \r\n            //takes care of paddingTop and paddingBottom\r\n    \r\n    \r\n            int paddingY = getPaddingBottom() + getPaddingTop();\r\n    \r\n            //get height and width\r\n            int width = MeasureSpec.getSize(widthMeasureSpec);\r\n            int height = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            height += paddingY;\r\n    \r\n            setMeasuredDimension(desiredWidth, desiredHeight);\r\n            //setMeasuredDimension(width, height);\r\n        }\r\n    \r\n        private void drawThermometer(Canvas canvas) {\r\n            canvas.drawCircle(innerCircleCenter, circleHeight, mInnerRadius, mInnerCirclePaint);\r\n            canvas.drawLine(innerCircleCenter, lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\r\n            canvas.drawBitmap(bitmap, left, top, new Paint());\r\n        }\r\n    \r\n        public void setThermometerColor(int thermometerColor) {\r\n            this.mThermometerColor = thermometerColor;\r\n            mInnerCirclePaint.setColor(mThermometerColor);\r\n            invalidate();\r\n        }\r\n    \r\n        public void changeTemperature( double percentageChangeOfTheWholeBar) {\r\n            double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\r\n            if (appliedPercentageChangeOfTheWholeBar&gt;1) {\r\n                appliedPercentageChangeOfTheWholeBar = 1;\r\n            }\r\n            if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\r\n                appliedPercentageChangeOfTheWholeBar = -1;\r\n            }\r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\r\n    \r\n            positionOfTemperatureBar = positionOfTemperatureBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\r\n            if (positionOfTemperatureBar &lt; value_positionOfTemperatureBar_upperLimit) {\r\n                positionOfTemperatureBar = value_positionOfTemperatureBar_upperLimit;\r\n            }\r\n    \r\n            if(positionOfTemperatureBar &gt; value_positionOfTemperatureBar_lowerLimit) {\r\n                positionOfTemperatureBar = value_positionOfTemperatureBar_lowerLimit;\r\n            }\r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n        }\r\n    \r\n        public void setTemperature( double setTemperatureDegreesCelsius) {\r\n            double appliedSetTemperature = setTemperatureDegreesCelsius;\r\n            if (appliedSetTemperature &lt; 20) {\r\n                appliedSetTemperature = 20;\r\n            }\r\n            if (appliedSetTemperature &gt;22) {\r\n                appliedSetTemperature = 22;\r\n            }\r\n    \r\n            double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\r\n    \r\n            positionOfTemperatureBar = value_positionOfTemperatureBar_20Degrees + ((setTemperatureDegreesCelsius - 20 )/2)  * absolutValueSpanForTheWholeBar;\r\n    \r\n    \r\n    \r\n            lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\r\n            lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nAnd here the XML layout file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/constraintLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n    \r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;View\r\n            android:id=&quot;@+id/imageView_TargetRectangle&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n    \r\n    \r\n            android:background=&quot;@drawable/rectangle&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n    \r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.16&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.535&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.01&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.10&quot; /&gt;\r\n    \r\n    \r\n        &lt;com.example.game.Thermometer\r\n            android:id=&quot;@+id/thermometer&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.3&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.529&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.795&quot;/&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/button_action&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:text=&quot;Action&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.102&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.343&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.745&quot;\r\n            app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nDo you know what to do in order to solve these issues?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5GCiB.png\r\n  [2]: https://i.stack.imgur.com/4YCEa.png\r\n  [3]: https://i.stack.imgur.com/b7atq.png\r\n  [4]: https://i.stack.imgur.com/3pzys.png\r\n  [5]: https://i.stack.imgur.com/qvVke.png","title":"How to remove unwanted padding from self made canvas view in Android","body":"<p>I have a custom made Canvas object in Android (thermometer) that unfortunately has a padding around it that I want to get rid of as it makes it quite difficult to position it within the layout. Here is how it looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/5GCiB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5GCiB.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the code of the Thermoeter Java class:</p>\n<pre><code>package com.example.game;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.util.AttributeSet;\nimport android.util.Log;\nimport android.view.View;\n\npublic class Thermometer extends View {\n    private Paint mInnerCirclePaint;\n    private int mInnerRadius;\n    private int mThermometerColor = Color.RED;\n    private Bitmap bitmap;\n    private int left;\n    private int top;\n    private int innerCircleCenter;\n    private int circleHeight;\n    private int lineEndY;\n    private int lineStartY;\n    double positionOfTemperatureBar = 0.2;\n\n    //0.378= 20°C, 0.2 = 21 °C, 0.022 = 22°C, 0.41 = lower limit, -0.03 = upper limit\n    final double value_positionOfTemperatureBar_20Degrees = 0.378;\n    final double value_positionOfTemperatureBar_22Degrees = 0.022;\n    final double value_positionOfTemperatureBar_upperLimit = -0.03 ;\n    final double value_positionOfTemperatureBar_lowerLimit = 0.41;\n\n\n\n\n    public Thermometer(Context context) {\n        this(context, null);\n    }\n\n    public Thermometer(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public Thermometer(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        if (attrs != null) {\n\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\n\n            mThermometerColor = a.getColor(R.styleable.Thermometer_therm_color, mThermometerColor);\n\n            a.recycle();\n        }\n\n        init();\n    }\n\n    private void init() {\n        mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        mInnerCirclePaint.setColor(mThermometerColor);\n        mInnerCirclePaint.setStyle(Paint.Style.FILL);\n\n        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.thermometer_container);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n\n        // init bitmap\n        int scaledHeight;\n        int scaledWidth;\n        int width = getWidth();\n        int height = getHeight();\n        if (width &gt; height) {\n            scaledHeight = (int) (height * 0.90);\n            scaledWidth = scaledHeight * bitmap.getWidth() / bitmap.getHeight();\n        } else {\n            scaledWidth = (int) (width * 0.90);\n            scaledHeight = scaledWidth * bitmap.getHeight() / bitmap.getWidth();\n        }\n\n        bitmap = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);\n\n        mInnerRadius = bitmap.getWidth() / 8;\n\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 10));\n        left = (getWidth() - bitmap.getWidth()) / 2;\n        top = (getHeight() - bitmap.getHeight()) / 2;\n        innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72)) / 2;\n        circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4.6f);\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        drawThermometer(canvas);\n    }\n\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        //takes care of paddingTop and paddingBottom\n        int paddingY = getPaddingBottom() + getPaddingTop();\n\n        //get height and width\n        int width = MeasureSpec.getSize(widthMeasureSpec);\n        int height = MeasureSpec.getSize(heightMeasureSpec);\n\n        height += paddingY;\n\n        setMeasuredDimension(width, height);\n    }\n\n    private void drawThermometer(Canvas canvas) {\n        canvas.drawCircle(innerCircleCenter, circleHeight, mInnerRadius, mInnerCirclePaint);\n        canvas.drawLine(innerCircleCenter, lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\n        canvas.drawBitmap(bitmap, left, top, new Paint());\n    }\n\n    public void setThermometerColor(int thermometerColor) {\n        this.mThermometerColor = thermometerColor;\n        mInnerCirclePaint.setColor(mThermometerColor);\n        invalidate();\n    }\n\n    public void changeTemperature( double percentageChangeOfTheWholeBar) {\n        double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\n        if (appliedPercentageChangeOfTheWholeBar&gt;1) {\n            appliedPercentageChangeOfTheWholeBar = 1;\n        }\n        if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\n            appliedPercentageChangeOfTheWholeBar = -1;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\n\n        positionOfTemperatureBar = positionOfTemperatureBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\n        if (positionOfTemperatureBar &lt; value_positionOfTemperatureBar_upperLimit) {\n            positionOfTemperatureBar = value_positionOfTemperatureBar_upperLimit;\n        }\n\n        if(positionOfTemperatureBar &gt; value_positionOfTemperatureBar_lowerLimit) {\n            positionOfTemperatureBar = value_positionOfTemperatureBar_lowerLimit;\n        }\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n\n    public void setTemperature( double setTemperatureDegreesCelsius) {\n        double appliedSetTemperature = setTemperatureDegreesCelsius;\n        if (appliedSetTemperature &lt; 20) {\n            appliedSetTemperature = 20;\n        }\n        if (appliedSetTemperature &gt;22) {\n            appliedSetTemperature = 22;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\n\n        positionOfTemperatureBar = value_positionOfTemperatureBar_20Degrees + ((setTemperatureDegreesCelsius - 20 )/2)  * absolutValueSpanForTheWholeBar;\n\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n\n\n}\n</code></pre>\n<p>And here is the code of the XML layout file that contains the thermometer object:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/constraintLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;com.example.game.Thermometer\n        android:id=&quot;@+id/thermometer&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.3&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.795&quot;\n        app:layout_constraintWidth_percent=&quot;0.15&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button_action&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:text=&quot;Action&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.102&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.373&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.745&quot;\n        app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Following the answer to this question <a href=\"https://stackoverflow.com/questions/75903378/self-made-canvas-view-in-android-is-not-correctly-displayed-any-more/75967754?noredirect=1#comment134233925_75967754\">Self-made canvas view in Android is not correctly displayed (any more)</a> I tried to change the <code>onSizeChanged</code> and <code>onMeasure</code> method accordingly which looked like this:</p>\n<pre><code>@Override\nprotected void onSizeChanged(int w, int h, int oldw, int oldh) {\n    super.onSizeChanged(w, h, oldw, oldh);\n\n    // init bitmap\n\n    int width = getWidth();\n    int height = getHeight();\n\n    mInnerCirclePaint.setStrokeWidth( (float) (width * 0.9));\n\n    bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);\n\n    //innerCircleCenter = (left + left + bitmap.getWidth() + (Math.min(width, height) / 72));\n    innerCircleCenter = getWidth() / 2;\n\n    left = (getWidth() - bitmap.getWidth()) / 2;\n    top = (getHeight() - bitmap.getHeight()) / 2;\n\n\n    lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n    lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 7f);\n\n}\n\n@Override\nprotected void onDraw(Canvas canvas) {\n    super.onDraw(canvas);\n\n    drawThermometer(canvas);\n}\n\n\n@Override\nprotected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n    // the actual dimensions of your water tank image\n    // these are just here to set the aspect ratio and the 'max' dimensions (we will make it smaller in the xml)\n    int desiredWidth = 421;\n    int desiredHeight = 693;\n\n    int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n    int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n    int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n    int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n\n    int width;\n    int height;\n\n    //Measure Height\n    if (heightMode == MeasureSpec.EXACTLY) {\n        //Must be this size\n        height = heightSize;\n    } else if (heightMode == MeasureSpec.AT_MOST) {\n        //Can't be bigger than...\n        height = Math.min(desiredHeight, heightSize);\n    } else {\n        //Be whatever you want\n        height = desiredHeight;\n    }\n\n    //Measure Width\n    if (widthMode == MeasureSpec.EXACTLY) {\n        //Must be this size\n        width = widthSize;\n    } else if (widthMode == MeasureSpec.AT_MOST) {\n        //Can't be bigger than...\n        width = heightSize * desiredWidth / desiredHeight;\n    } else {\n        //Be whatever you want\n        width = desiredWidth;\n    }\n\n    setMeasuredDimension(width, height);\n}\n</code></pre>\n<p>But the result looked like this:\n<a href=\"https://i.stack.imgur.com/4YCEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4YCEa.png\" alt=\"enter image description here\" /></a></p>\n<p>This is obviously not what I want because the temperature bar is way to big (altough the padding disappeared). For me it is extremely difficult to design such self-made canvas objects in Android as I don't know what to adjust in order to make them look properly. Do you have any idea what I can do in order to have a proper temperature bar in the self-made canvas object while having no padding? How do you approach such kind of problems?</p>\n<p>Update:\nHere is the <code>R.drawable.thermometer_container</code>\n<a href=\"https://i.stack.imgur.com/b7atq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b7atq.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is the <code>R.styleable.Thermometer</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;declare-styleable name=&quot;Thermometer&quot;&gt;\n        &lt;attr name=&quot;therm_color&quot; format=&quot;color&quot; /&gt;\n    &lt;/declare-styleable&gt;\n&lt;/resources&gt;\n</code></pre>\n<p><strong>Update</strong>: I tried the approach suggested by Rob but unfortunately there are 3 problems with it as you can see in the screenshot:\n<a href=\"https://i.stack.imgur.com/3pzys.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3pzys.png\" alt=\"enter image description here\" /></a></p>\n<ol>\n<li>I can't place the view precisely as the blue area aroung the view wraps horizontally to the boundaries which is not what I want</li>\n<li>Layout Editor: The red circle inside the thermometer is too small and the whole red bar is too much on the right and not in the center.</li>\n<li>In the Emulator the custom view looks extremely bad as you can see on the screenshot<a href=\"https://i.stack.imgur.com/qvVke.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qvVke.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>Here is the updated code of the Thermometer.class</p>\n<pre><code>package com.example.game;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.util.AttributeSet;\nimport android.util.Log;\nimport android.view.View;\n\npublic class Thermometer extends View {\n    private Paint mInnerCirclePaint;\n    private int mInnerRadius;\n    private int mThermometerColor = Color.RED;\n    private Bitmap bitmap;\n    private int left;\n    private int top;\n    private int innerCircleCenter;\n    private int circleHeight;\n    private int lineEndY;\n    private int lineStartY;\n    double positionOfTemperatureBar = 0.2;\n\n    //0.378= 20°C, 0.2 = 21 °C, 0.022 = 22°C, 0.41 = lower limit, -0.03 = upper limit\n    final double value_positionOfTemperatureBar_20Degrees = 0.378;\n    final double value_positionOfTemperatureBar_22Degrees = 0.022;\n    final double value_positionOfTemperatureBar_upperLimit = -0.03 ;\n    final double value_positionOfTemperatureBar_lowerLimit = 0.41;\n\n\n\n\n    public Thermometer(Context context) {\n        this(context, null);\n    }\n\n    public Thermometer(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public Thermometer(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        if (attrs != null) {\n\n            final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Thermometer, defStyle, 0);\n\n            mThermometerColor = a.getColor(R.styleable.Thermometer_therm_color, mThermometerColor);\n\n            a.recycle();\n        }\n\n        init();\n    }\n\n    private void init() {\n        mInnerCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);\n        mInnerCirclePaint.setColor(mThermometerColor);\n        mInnerCirclePaint.setStyle(Paint.Style.FILL);\n\n        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.thermometer_container);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n\n        bitmap = Bitmap.createScaledBitmap(bitmap,  getWidth(), getHeight(), true);\n\n        mInnerRadius = bitmap.getWidth() / 5;\n        innerCircleCenter = getWidth()/ 2;\n        circleHeight = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 5f);\n\n        mInnerCirclePaint.setStrokeWidth((int)(bitmap.getWidth() / 7));\n        lineStartY = ((int)(bitmap.getHeight() / 6.4f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 2f);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        drawThermometer(canvas);\n    }\n\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        int desiredWidth = 558;\n        int desiredHeight = 730;\n\n        //takes care of paddingTop and paddingBottom\n\n\n        int paddingY = getPaddingBottom() + getPaddingTop();\n\n        //get height and width\n        int width = MeasureSpec.getSize(widthMeasureSpec);\n        int height = MeasureSpec.getSize(heightMeasureSpec);\n\n        height += paddingY;\n\n        setMeasuredDimension(desiredWidth, desiredHeight);\n        //setMeasuredDimension(width, height);\n    }\n\n    private void drawThermometer(Canvas canvas) {\n        canvas.drawCircle(innerCircleCenter, circleHeight, mInnerRadius, mInnerCirclePaint);\n        canvas.drawLine(innerCircleCenter, lineStartY, innerCircleCenter, lineEndY, mInnerCirclePaint);\n        canvas.drawBitmap(bitmap, left, top, new Paint());\n    }\n\n    public void setThermometerColor(int thermometerColor) {\n        this.mThermometerColor = thermometerColor;\n        mInnerCirclePaint.setColor(mThermometerColor);\n        invalidate();\n    }\n\n    public void changeTemperature( double percentageChangeOfTheWholeBar) {\n        double appliedPercentageChangeOfTheWholeBar = percentageChangeOfTheWholeBar / 100;\n        if (appliedPercentageChangeOfTheWholeBar&gt;1) {\n            appliedPercentageChangeOfTheWholeBar = 1;\n        }\n        if (appliedPercentageChangeOfTheWholeBar &lt;-1) {\n            appliedPercentageChangeOfTheWholeBar = -1;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\n\n        positionOfTemperatureBar = positionOfTemperatureBar + appliedPercentageChangeOfTheWholeBar * absolutValueSpanForTheWholeBar;\n        if (positionOfTemperatureBar &lt; value_positionOfTemperatureBar_upperLimit) {\n            positionOfTemperatureBar = value_positionOfTemperatureBar_upperLimit;\n        }\n\n        if(positionOfTemperatureBar &gt; value_positionOfTemperatureBar_lowerLimit) {\n            positionOfTemperatureBar = value_positionOfTemperatureBar_lowerLimit;\n        }\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n\n    public void setTemperature( double setTemperatureDegreesCelsius) {\n        double appliedSetTemperature = setTemperatureDegreesCelsius;\n        if (appliedSetTemperature &lt; 20) {\n            appliedSetTemperature = 20;\n        }\n        if (appliedSetTemperature &gt;22) {\n            appliedSetTemperature = 22;\n        }\n\n        double absolutValueSpanForTheWholeBar = value_positionOfTemperatureBar_22Degrees - value_positionOfTemperatureBar_20Degrees;\n\n        positionOfTemperatureBar = value_positionOfTemperatureBar_20Degrees + ((setTemperatureDegreesCelsius - 20 )/2)  * absolutValueSpanForTheWholeBar;\n\n\n\n        lineStartY = ((int)(bitmap.getHeight() / 4.6f) + top) + (int) (positionOfTemperatureBar * bitmap.getHeight());\n        lineEndY = (top + bitmap.getHeight()) - (int)(bitmap.getHeight() / 4f);\n    }\n\n\n}\n</code></pre>\n<p>And here the XML layout file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/constraintLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;View\n        android:id=&quot;@+id/imageView_TargetRectangle&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n\n\n        android:background=&quot;@drawable/rectangle&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.16&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.535&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.01&quot;\n        app:layout_constraintWidth_percent=&quot;0.10&quot; /&gt;\n\n\n    &lt;com.example.game.Thermometer\n        android:id=&quot;@+id/thermometer&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.3&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.529&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.795&quot;/&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button_action&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:text=&quot;Action&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHeight_percent=&quot;0.102&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.343&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.745&quot;\n        app:layout_constraintWidth_percent=&quot;0.13&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Do you know what to do in order to solve these issues?</p>\n"},{"tags":["java","arrays","filter","duplicates","java-stream"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686356470,"post_id":76444077,"comment_id":134792338,"body_markdown":"Have you searched Stack Overflow for similar questions? What have you found?  How did they fail to help?","body":"Have you searched Stack Overflow for similar questions? What have you found?  How did they fail to help?"}],"answers":[{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686352919,"creation_date":1686352489,"answer_id":76444099,"question_id":76444077,"body_markdown":"You can use a list of `[firstName, lastName]` as key, and group the results using `toMap()` with a merge function:\r\n\r\n    Collection&lt;Person&gt; uniques = people.stream()\r\n            .collect(Collectors.toMap(\r\n                    p -&gt; Arrays.asList(p.getFirstName(), p.getLastName()),\r\n                    p -&gt; p, (p1, p2) -&gt; p1))\r\n            .values();\r\n\r\nIf you&#39;re just looking for the actual full name strings, it&#39;s even simpler:\r\n\r\n    Set&lt;String&gt; names = people.stream()\r\n            .map(Person::toString)\r\n            .collect(Collectors.toSet());","title":"How to remove elements from a list if they contain multiple matching properties?","body":"<p>You can use a list of <code>[firstName, lastName]</code> as key, and group the results using <code>toMap()</code> with a merge function:</p>\n<pre><code>Collection&lt;Person&gt; uniques = people.stream()\n        .collect(Collectors.toMap(\n                p -&gt; Arrays.asList(p.getFirstName(), p.getLastName()),\n                p -&gt; p, (p1, p2) -&gt; p1))\n        .values();\n</code></pre>\n<p>If you're just looking for the actual full name strings, it's even simpler:</p>\n<pre><code>Set&lt;String&gt; names = people.stream()\n        .map(Person::toString)\n        .collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24434734,"reputation":60,"user_id":18359142,"display_name":"Krypton"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686354164,"creation_date":1686354164,"answer_id":76444171,"question_id":76444077,"body_markdown":"Your code like this isn&#39;t working.\r\n\r\nThe constructor of `class Person` needs two arguments (firstName, lastName), but when you instantiate a Person you provide three arguments (firstName, lastName and most likely age).\r\n\r\nThe answer depends on whats correct.\r\n\r\nIf there is no age argument (or any other member variable that make the whole person unique) then there is no way to filter a specific instance of `Person`.\r\n\r\nIn this case you need to extend the class `Person` with a member variable that is unique (such as id).\r\n\r\nThen your code might look like this:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\r\n        Person p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\r\n        Person p3 = new Person(&quot;John&quot;, &quot;Doe&quot;);\r\n        Person p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;);\r\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\r\n        people.add(p1);\r\n        people.add(p2);\r\n        people.add(p3);\r\n        people.add(p4);  \r\n\r\n        people.stream().filter(person -&gt; person.equals(p2))\r\n        System.out.println(people);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Person {\r\n    private String firstName;\r\n    private String lastName;\r\n    private UUID uuid;\r\n    public Person(String firstName, String lastName) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.uuid = UUID.randomUUID();\r\n\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return firstName + &quot; &quot; + lastName;\r\n    }\r\n\r\n    public bool equals(Person person) {\r\n        return this.getUUID().equals(person.getUUID());\r\n    }\r\n \r\n    public String getUUID() {\r\n        return this.uuid.toString();\r\n    }\r\n\r\n}\r\n```\r\n\r\nIf you have a further member variable like the age, just filter by that value:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 25);\r\n        Person p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 54);\r\n        Person p3 = new Person(&quot;John&quot;, &quot;Doe&quot;, 61);\r\n        Person p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;, 61);\r\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\r\n        people.add(p1);\r\n        people.add(p2);\r\n        people.add(p3);\r\n        people.add(p4);  \r\n\r\n        people.stream().filter(person -&gt; person.compareFirstName(&quot;Mike&quot;) &amp;&amp; person.compareLastName(&quot;Doe&quot;) &amp;&amp; person.compareAge(54))\r\n        System.out.println(people);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Person {\r\n    private String firstName;\r\n    private String lastName;\r\n    private int age;\r\n    public Person(String firstName, String lastName, int age) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.age = age;\r\n\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return firstName + &quot; &quot; + lastName + &quot;: &quot; + age;\r\n    }\r\n\r\n    public boolean compareFirstName(String firstName) {\r\n        return this.firstName.equals(firstName);\r\n    }\r\n\r\n    public boolean compareLastName(String lastName) {\r\n        return this.lastName.equals(lastName);\r\n    }\r\n\r\n    public boolean compareAge(int age) {\r\n        return this.age == age;\r\n    }\r\n\r\n}\r\n```","title":"How to remove elements from a list if they contain multiple matching properties?","body":"<p>Your code like this isn't working.</p>\n<p>The constructor of <code>class Person</code> needs two arguments (firstName, lastName), but when you instantiate a Person you provide three arguments (firstName, lastName and most likely age).</p>\n<p>The answer depends on whats correct.</p>\n<p>If there is no age argument (or any other member variable that make the whole person unique) then there is no way to filter a specific instance of <code>Person</code>.</p>\n<p>In this case you need to extend the class <code>Person</code> with a member variable that is unique (such as id).</p>\n<p>Then your code might look like this:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n\n        Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\n        Person p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\n        Person p3 = new Person(&quot;John&quot;, &quot;Doe&quot;);\n        Person p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;);\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\n        people.add(p1);\n        people.add(p2);\n        people.add(p3);\n        people.add(p4);  \n\n        people.stream().filter(person -&gt; person.equals(p2))\n        System.out.println(people);\n    }\n}\n</code></pre>\n<pre><code>public class Person {\n    private String firstName;\n    private String lastName;\n    private UUID uuid;\n    public Person(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.uuid = UUID.randomUUID();\n\n    }\n\n    @Override\n    public String toString() {\n        return firstName + &quot; &quot; + lastName;\n    }\n\n    public bool equals(Person person) {\n        return this.getUUID().equals(person.getUUID());\n    }\n \n    public String getUUID() {\n        return this.uuid.toString();\n    }\n\n}\n</code></pre>\n<p>If you have a further member variable like the age, just filter by that value:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n\n        Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 25);\n        Person p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 54);\n        Person p3 = new Person(&quot;John&quot;, &quot;Doe&quot;, 61);\n        Person p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;, 61);\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\n        people.add(p1);\n        people.add(p2);\n        people.add(p3);\n        people.add(p4);  \n\n        people.stream().filter(person -&gt; person.compareFirstName(&quot;Mike&quot;) &amp;&amp; person.compareLastName(&quot;Doe&quot;) &amp;&amp; person.compareAge(54))\n        System.out.println(people);\n    }\n}\n</code></pre>\n<pre><code>public class Person {\n    private String firstName;\n    private String lastName;\n    private int age;\n    public Person(String firstName, String lastName, int age) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = age;\n\n    }\n\n    @Override\n    public String toString() {\n        return firstName + &quot; &quot; + lastName + &quot;: &quot; + age;\n    }\n\n    public boolean compareFirstName(String firstName) {\n        return this.firstName.equals(firstName);\n    }\n\n    public boolean compareLastName(String lastName) {\n        return this.lastName.equals(lastName);\n    }\n\n    public boolean compareAge(int age) {\n        return this.age == age;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686359663,"creation_date":1686359663,"answer_id":76444372,"question_id":76444077,"body_markdown":"First, your _Person_ class doesn&#39;t have an _age_ field.\r\n\r\nIf _streams_ aren&#39;t a requirement, you can use a _for-loop_ on the list, and a _[ListIterator](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html)_ to check and remove the values.\r\n\r\n```java\r\nPerson p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\r\nPerson p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\r\nPerson p3 = new Person(&quot;John&quot;, &quot;Doe&quot;);\r\nPerson p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;);\r\nList&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\r\npeople.add(p1);\r\npeople.add(p2);\r\npeople.add(p3);\r\npeople.add(p4);\r\n\r\nString firstName, lastName;\r\nPerson person;\r\nListIterator&lt;Person&gt; iterator;\r\nfor (int index = 0; index &lt; people.size(); index++) {\r\n    firstName = people.get(index).firstName;\r\n    lastName = people.get(index).lastName;\r\n    iterator = people.listIterator(index + 1);\r\n    while (iterator.hasNext()) {\r\n        person = iterator.next();\r\n        if (firstName.equals(person.firstName) &amp;&amp; lastName.equals(person.lastName))\r\n            iterator.remove();\r\n    }\r\n}\r\n\r\nSystem.out.println(people);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[Mike Doe, John Doe, Barry Adams]\r\n```","title":"How to remove elements from a list if they contain multiple matching properties?","body":"<p>First, your <em>Person</em> class doesn't have an <em>age</em> field.</p>\n<p>If <em>streams</em> aren't a requirement, you can use a <em>for-loop</em> on the list, and a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html\" rel=\"nofollow noreferrer\">ListIterator</a></em> to check and remove the values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\nPerson p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;);\nPerson p3 = new Person(&quot;John&quot;, &quot;Doe&quot;);\nPerson p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;);\nList&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\npeople.add(p1);\npeople.add(p2);\npeople.add(p3);\npeople.add(p4);\n\nString firstName, lastName;\nPerson person;\nListIterator&lt;Person&gt; iterator;\nfor (int index = 0; index &lt; people.size(); index++) {\n    firstName = people.get(index).firstName;\n    lastName = people.get(index).lastName;\n    iterator = people.listIterator(index + 1);\n    while (iterator.hasNext()) {\n        person = iterator.next();\n        if (firstName.equals(person.firstName) &amp;&amp; lastName.equals(person.lastName))\n            iterator.remove();\n    }\n}\n\nSystem.out.println(people);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[Mike Doe, John Doe, Barry Adams]\n</code></pre>\n"}],"owner":{"account_id":27863021,"reputation":49,"user_id":21275121,"display_name":"Sherbet Head"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1686359663,"creation_date":1686351952,"question_id":76444077,"body_markdown":"I have a List of elements and I need to filter the list so it doesn&#39;t contain any duplicate elements, but only if multiple properties are matching. In this example, I have a person class with a firstName, lastName, and age. I&#39;ve created some persons in a People list and want to remove any duplicate persons with a matching first and last name (ignoring age). Doesn&#39;t matter which specific matching person is left, I just am trying to get a resulting array with only one of the unique first and last names.\r\n\r\nExample:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 25);\r\n        Person p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 54);\r\n        Person p3 = new Person(&quot;John&quot;, &quot;Doe&quot;, 61);\r\n        Person p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;, 61);\r\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\r\n        people.add(p1);\r\n        people.add(p2);\r\n        people.add(p3);\r\n        people.add(p4);  \r\n\r\n        people.stream().filter(v -&gt; ????????????)\r\n        System.out.println(people);\r\n    }\r\n}\r\n\r\n\r\npublic class Person {\r\n    private String firstName;\r\n    private String lastName;\r\n    private int age;\r\n\r\n    public Person(String firstName, String lastName, int age) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.age = age;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return firstName + &quot; &quot; + lastName;\r\n    }\r\n}\r\n```\r\nExpected Result:\r\n```\r\n[Mike Doe, John Doe, Barry Adams]","title":"How to remove elements from a list if they contain multiple matching properties?","body":"<p>I have a List of elements and I need to filter the list so it doesn't contain any duplicate elements, but only if multiple properties are matching. In this example, I have a person class with a firstName, lastName, and age. I've created some persons in a People list and want to remove any duplicate persons with a matching first and last name (ignoring age). Doesn't matter which specific matching person is left, I just am trying to get a resulting array with only one of the unique first and last names.</p>\n<p>Example:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n\n        Person p1 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 25);\n        Person p2 = new Person(&quot;Mike&quot;, &quot;Doe&quot;, 54);\n        Person p3 = new Person(&quot;John&quot;, &quot;Doe&quot;, 61);\n        Person p4 = new Person(&quot;Barry&quot;, &quot;Adams&quot;, 61);\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\n        people.add(p1);\n        people.add(p2);\n        people.add(p3);\n        people.add(p4);  \n\n        people.stream().filter(v -&gt; ????????????)\n        System.out.println(people);\n    }\n}\n\n\npublic class Person {\n    private String firstName;\n    private String lastName;\n    private int age;\n\n    public Person(String firstName, String lastName, int age) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = age;\n    }\n\n    @Override\n    public String toString() {\n        return firstName + &quot; &quot; + lastName;\n    }\n}\n</code></pre>\n<p>Expected Result:</p>\n<pre><code>[Mike Doe, John Doe, Barry Adams]\n</code></pre>\n"},{"tags":["java","c++"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1686366762,"post_id":76444371,"comment_id":134792891,"body_markdown":"Please read https://stackoverflow.com/help/how-to-ask. What are you trying to do? Images of what? Why are you using JDK which is a short live version end of life years ago?","body":"Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. What are you trying to do? Images of what? Why are you using JDK which is a short live version end of life years ago?"}],"owner":{"account_id":9206817,"reputation":1,"user_id":6841731,"display_name":"lorcx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686359632,"creation_date":1686359632,"question_id":76444371,"body_markdown":"```\r\n=== Output from failing command(s) repeated here ===\r\n* For target jdk__packages_attribute.done:\r\n# To suppress the following error report, specify this argument\r\n# after -XX: or in .hotspotrc:  SuppressErrorAt=/bitMap.cpp:178\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  Internal Error (/home/lx/my_jdk/jdk-jdk-12-ga/src/hotspot/share/utilities/bitMap.cpp:178), pid=49485, tid=49495\r\n#  assert(index &lt; _size) failed: BitMap index out of bounds\r\n#\r\n# JRE version: OpenJDK Runtime Environment (12.0) (fastdebug build 12-internal+0-adhoc.lx.jdk-jdk-12-ga)\r\n# Java VM: OpenJDK 64-Bit Server VM (fastdebug 12-internal+0-adhoc.lx.jdk-jdk-12-ga, mixed mode, tiered, compressed oops, serial gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0x7507cb]  BitMap::verify_index(unsigned long) const+0x2b\r\n   ... (rest of output omitted)\r\n\r\n* All command lines available in /home/lx/my_jdk/jdk-jdk-12-ga/build/linux-x86_64-server-fastdebug/make-support/failure-logs.\r\n=== End of repeated output ===\r\n\r\n```\r\n\r\nenvironment: \r\nvirtualBox 7.0、Ubuntu server 22.04、openjdk 11\r\nmy virtual machine memory is 10GB\r\n\r\n\r\n\r\ncompiler command:\r\n\r\nbash configure --enable-debug \\\r\n --with-jvm-variants=server \\\r\n --disable-warnings-as-errors \\\r\n --with-extra-cflags=&#39;-fcommon&#39;\r\n\r\nmake images\r\n\r\n\r\n","title":"build jdk 12 error BitMap index out of bounds","body":"<pre><code>=== Output from failing command(s) repeated here ===\n* For target jdk__packages_attribute.done:\n# To suppress the following error report, specify this argument\n# after -XX: or in .hotspotrc:  SuppressErrorAt=/bitMap.cpp:178\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  Internal Error (/home/lx/my_jdk/jdk-jdk-12-ga/src/hotspot/share/utilities/bitMap.cpp:178), pid=49485, tid=49495\n#  assert(index &lt; _size) failed: BitMap index out of bounds\n#\n# JRE version: OpenJDK Runtime Environment (12.0) (fastdebug build 12-internal+0-adhoc.lx.jdk-jdk-12-ga)\n# Java VM: OpenJDK 64-Bit Server VM (fastdebug 12-internal+0-adhoc.lx.jdk-jdk-12-ga, mixed mode, tiered, compressed oops, serial gc, linux-amd64)\n# Problematic frame:\n# V  [libjvm.so+0x7507cb]  BitMap::verify_index(unsigned long) const+0x2b\n   ... (rest of output omitted)\n\n* All command lines available in /home/lx/my_jdk/jdk-jdk-12-ga/build/linux-x86_64-server-fastdebug/make-support/failure-logs.\n=== End of repeated output ===\n\n</code></pre>\n<p>environment:\nvirtualBox 7.0、Ubuntu server 22.04、openjdk 11\nmy virtual machine memory is 10GB</p>\n<p>compiler command:</p>\n<p>bash configure --enable-debug <br />\n--with-jvm-variants=server <br />\n--disable-warnings-as-errors <br />\n--with-extra-cflags='-fcommon'</p>\n<p>make images</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1686355499,"post_id":76444201,"comment_id":134792271,"body_markdown":"what&#39;s the question? how to `setIsSessionOpen` to `false`?","body":"what&#39;s the question? how to <code>setIsSessionOpen</code> to <code>false</code>?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686356227,"post_id":76444201,"comment_id":134792319,"body_markdown":"Is the user interface a GUI or console I/O? If a GUI, is it based on SWING, JavaFX, or what?","body":"Is the user interface a GUI or console I/O? If a GUI, is it based on SWING, JavaFX, or what?"},{"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"score":0,"creation_date":1686359411,"post_id":76444201,"comment_id":134792500,"body_markdown":"It&#39;s a spring boot application. My controller calls the service where the method above within.\nAssemblyController -&gt; assemblyService.openSession(agendaSubject, sessionId)","body":"It&#39;s a spring boot application. My controller calls the service where the method above within. AssemblyController -&gt; assemblyService.openSession(agendaSubject, sessionId)"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686411572,"post_id":76444201,"comment_id":134796534,"body_markdown":"If you have wait for the user to type a response and press &quot;enter&quot;, because of blocking I/O, you can&#39;t check the time. But, if you continuously check the time, you can&#39;t check for user input. The way around this is to use separate threads. The answer from Ellott Frisch does that.","body":"If you have wait for the user to type a response and press &quot;enter&quot;, because of blocking I/O, you can&#39;t check the time. But, if you continuously check the time, you can&#39;t check for user input. The way around this is to use separate threads. The answer from Ellott Frisch does that."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1686357741,"creation_date":1686357741,"answer_id":76444292,"question_id":76444201,"body_markdown":"Unless I&#39;m missing something, start a [`Timer`](https://docs.oracle.com/javase/8/docs/api/java/util/Timer.html) to invoke `setIsSessionOpen(false)` after a minute.\r\n\r\n\tTimer t = new Timer();\r\n\tTimerTask tt = new TimerTask() {\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\tsessionVote.setIsSessionOpen(false);\r\n\t\t}\r\n\t};\r\n\tt.schedule(tt, TimeUnit.MINUTES.toMillis(1));\r\n","title":"How can I change from TRUE to FALSE after a minute?","body":"<p>Unless I'm missing something, start a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Timer.html\" rel=\"noreferrer\"><code>Timer</code></a> to invoke <code>setIsSessionOpen(false)</code> after a minute.</p>\n<pre><code>Timer t = new Timer();\nTimerTask tt = new TimerTask() {\n    @Override\n    public void run() {\n        sessionVote.setIsSessionOpen(false);\n    }\n};\nt.schedule(tt, TimeUnit.MINUTES.toMillis(1));\n</code></pre>\n"}],"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76444292,"answer_count":1,"score":0,"last_activity_date":1686357741,"creation_date":1686354950,"question_id":76444201,"body_markdown":"I&#39;m developing an API for voting. I have a method which starts the voting session and the session should stands open for 1 minute, then close after time.  \r\nClosing the session means that I have to change the method ```setIsSessionOpen``` to ```FALSE```.  \r\nWhile the session is open, user should be able to vote. Inside my ```SessionVote``` object there are two fields which represents the vote (```votedYes``` and ```votedNo``` where both will be storing the each vote&#39;s count.).  \r\n   \r\n\r\nHere what I did so far and it&#39;s in service class:\r\n\r\n```\r\n    public SessionVote openSession(String agendaSubject, Integer sessionId){\r\n        SessionVote sessionVote = findBySessionVoteId(sessionId);\r\n        Optional&lt;Agenda&gt; agenda = getAgendaBySubject(agendaSubject);\r\n        if (agenda.isPresent()) {\r\n            sessionVote.setAgenda(agenda.get());\r\n            sessionVote.setIsSessionOpen(true);\r\n            sessionVote.setStartedTime(System.currentTimeMillis());\r\n            LOGGER.info(&quot;The session ID {} is opened and started at {}. The subject for voting is: {}&quot;, sessionVote.getSessionVoteId(), sessionVote.getStartedTime(), sessionVote.getAgenda().getSubject());\r\n            return sessionVote;\r\n        } else {\r\n            LOGGER.error(&quot;No subject was found&quot;);\r\n            throw new NoSubjectFoundException(Constants.NO_SUBJECT_FOUND);\r\n        }\r\n    }\r\n```\r\n\r\nI ommitted some code to be cleaner and easier to understand my question but I can add more info if is necessary.","title":"How can I change from TRUE to FALSE after a minute?","body":"<p>I'm developing an API for voting. I have a method which starts the voting session and the session should stands open for 1 minute, then close after time.<br />\nClosing the session means that I have to change the method <code>setIsSessionOpen</code> to <code>FALSE</code>.<br />\nWhile the session is open, user should be able to vote. Inside my <code>SessionVote</code> object there are two fields which represents the vote (<code>votedYes</code> and <code>votedNo</code> where both will be storing the each vote's count.).</p>\n<p>Here what I did so far and it's in service class:</p>\n<pre><code>    public SessionVote openSession(String agendaSubject, Integer sessionId){\n        SessionVote sessionVote = findBySessionVoteId(sessionId);\n        Optional&lt;Agenda&gt; agenda = getAgendaBySubject(agendaSubject);\n        if (agenda.isPresent()) {\n            sessionVote.setAgenda(agenda.get());\n            sessionVote.setIsSessionOpen(true);\n            sessionVote.setStartedTime(System.currentTimeMillis());\n            LOGGER.info(&quot;The session ID {} is opened and started at {}. The subject for voting is: {}&quot;, sessionVote.getSessionVoteId(), sessionVote.getStartedTime(), sessionVote.getAgenda().getSubject());\n            return sessionVote;\n        } else {\n            LOGGER.error(&quot;No subject was found&quot;);\n            throw new NoSubjectFoundException(Constants.NO_SUBJECT_FOUND);\n        }\n    }\n</code></pre>\n<p>I ommitted some code to be cleaner and easier to understand my question but I can add more info if is necessary.</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686357192,"creation_date":1686311592,"answer_id":76439955,"question_id":76438578,"body_markdown":"You&#39;ll get the same messages when this JVM process restarts since you are not committing any offsets.","title":"Kafka redelivery of unacked message","body":"<p>You'll get the same messages when this JVM process restarts since you are not committing any offsets.</p>\n"}],"owner":{"account_id":8251390,"reputation":317,"user_id":6205902,"accept_rate":80,"display_name":"Siddhartha Sadhukhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686357192,"creation_date":1686299708,"question_id":76438578,"body_markdown":"I have a question regarding kafka consumer: \r\n\r\n    enable.auto.commit=false\r\n    max.poll.records=1\r\n    auto.offset.reset=latest\r\n    group.id=&quot;processor-1&quot;\r\n---\r\n    KafkaConsumer&lt;String,String&gt; consumer= new KafkaConsumer&lt;String,String&gt;(properties);  \r\n    consumer.subscribe(Arrays.asList(topic));  \r\n    while(true) {\r\n         ConsumerRecords&lt;String,String&gt; records=consumer.poll(Duration.ofSeconds(1)); \r\n         for(ConsumerRecord&lt;String,String&gt; record: records){  \r\n            logger.info(&quot;Value:&quot; +record.value());  \r\n            logger.info(&quot;Partition:&quot; + record.partition()+&quot;,Offset:&quot;+record.offset());\r\n            //consumer.commitSync();  \r\n        }   \r\n    }\r\n\r\nAs you can see auto commit is off and we are not acking the record, can you please tell me after what time we can have the same message. how it will behave if multiple consumer in same group, like message &#39;A&#39; is read by consumer-1 but did not acked then when the same message can be delivered to consumer-2\r\n","title":"Kafka redelivery of unacked message","body":"<p>I have a question regarding kafka consumer:</p>\n<pre><code>enable.auto.commit=false\nmax.poll.records=1\nauto.offset.reset=latest\ngroup.id=&quot;processor-1&quot;\n</code></pre>\n<hr />\n<pre><code>KafkaConsumer&lt;String,String&gt; consumer= new KafkaConsumer&lt;String,String&gt;(properties);  \nconsumer.subscribe(Arrays.asList(topic));  \nwhile(true) {\n     ConsumerRecords&lt;String,String&gt; records=consumer.poll(Duration.ofSeconds(1)); \n     for(ConsumerRecord&lt;String,String&gt; record: records){  \n        logger.info(&quot;Value:&quot; +record.value());  \n        logger.info(&quot;Partition:&quot; + record.partition()+&quot;,Offset:&quot;+record.offset());\n        //consumer.commitSync();  \n    }   \n}\n</code></pre>\n<p>As you can see auto commit is off and we are not acking the record, can you please tell me after what time we can have the same message. how it will behave if multiple consumer in same group, like message 'A' is read by consumer-1 but did not acked then when the same message can be delivered to consumer-2</p>\n"},{"tags":["java","pdf","itext"],"owner":{"account_id":215705,"reputation":1391,"user_id":470502,"accept_rate":46,"display_name":"Sander Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686354148,"creation_date":1685457819,"question_id":76366020,"body_markdown":"I&#39;m formatting a pdf for a book using iTextPDF 5.5.13.3 in Java and it&#39;s working great. I&#39;m trying to create a gutter for the book by using the margin mirroring feature. It seems simple enough, but is not working. Here&#39;s my code that is executed as soon as the Document is created:\r\n\r\n       document.setMargins(15,      // left\r\n                           30,      // right\r\n                           15,      // top\r\n                           25);     // bottom\r\n    \r\n      document.setMarginMirroring(true);\r\n\r\n(BTW, don&#39;t pay attention to the units, I&#39;m specifying them in mm)\r\n\r\nThe left/right margins are different so that there will be extra room to bind the book. I expect that the left/right margins will magically swap on alternate pages because of the setMarginMirroring, but it doesn&#39;t happen. Instead, the initial margins are used throughout the document.\r\n\r\nWhat am I doing wrong?","title":"Trying to do margin mirroring in iTextPDF","body":"<p>I'm formatting a pdf for a book using iTextPDF 5.5.13.3 in Java and it's working great. I'm trying to create a gutter for the book by using the margin mirroring feature. It seems simple enough, but is not working. Here's my code that is executed as soon as the Document is created:</p>\n<pre><code>   document.setMargins(15,      // left\n                       30,      // right\n                       15,      // top\n                       25);     // bottom\n\n  document.setMarginMirroring(true);\n</code></pre>\n<p>(BTW, don't pay attention to the units, I'm specifying them in mm)</p>\n<p>The left/right margins are different so that there will be extra room to bind the book. I expect that the left/right margins will magically swap on alternate pages because of the setMarginMirroring, but it doesn't happen. Instead, the initial margins are used throughout the document.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","cucumber","gherkin"],"owner":{"account_id":14402529,"reputation":911,"user_id":10403679,"display_name":"Amine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686353005,"creation_date":1686353005,"question_id":76444121,"body_markdown":"I am migrating from `Cucumber 4` to `Cucumber 7` and I have the following class that defines Parameter types in my project (the class has hundreds of parameter types defined but for the sake of simplicity I only included one):\r\n\r\n**TypeRegistryConfiguration.java**\r\n\r\n    public class TypeRegistryConfiguration implements TypeRegistryConfigurer {\r\n    \r\n        @Override\r\n        public Locale locale() {\r\n            return ENGLISH;\r\n        }\r\n    \r\n        @Override\r\n        public void configureTypeRegistry(TypeRegistry typeRegistry) {\r\n            typeRegistry.defineParameterType(new ParameterType&lt;&gt;(\r\n                    &quot;list&quot;,\r\n                    &quot;(\\\\S+)&quot;,\r\n                    List.class,\r\n                    (String s) -&gt; Arrays.asList(s.split(&quot;,&quot;))\r\n            ));\r\n        }\r\n    }\r\nI figured out how to adapt the `configureTypeRegistry` method to the new annotation method of defining parameter types by doing the following:\r\n\r\n    @ParameterType(&quot;(\\\\S+)&quot;)\r\n    public List&lt;String&gt; list(String s) {\r\n        return Arrays.asList(s.split(&quot;,&quot;));\r\n    }\r\n\r\nAs for the `locale` method, I can&#39;t find how to set it now that the `TypeRegistryConfigurer` is not longer used for Cucumber behavioral configuration. I also need to know what it actually does, as far as I know it sets the language Cucumber uses to parse Gherkin keywords in feature files.","title":"How to migrate a TypeRegistryConfiguration class from Cucumber 4 to Cucumber 7?","body":"<p>I am migrating from <code>Cucumber 4</code> to <code>Cucumber 7</code> and I have the following class that defines Parameter types in my project (the class has hundreds of parameter types defined but for the sake of simplicity I only included one):</p>\n<p><strong>TypeRegistryConfiguration.java</strong></p>\n<pre><code>public class TypeRegistryConfiguration implements TypeRegistryConfigurer {\n\n    @Override\n    public Locale locale() {\n        return ENGLISH;\n    }\n\n    @Override\n    public void configureTypeRegistry(TypeRegistry typeRegistry) {\n        typeRegistry.defineParameterType(new ParameterType&lt;&gt;(\n                &quot;list&quot;,\n                &quot;(\\\\S+)&quot;,\n                List.class,\n                (String s) -&gt; Arrays.asList(s.split(&quot;,&quot;))\n        ));\n    }\n}\n</code></pre>\n<p>I figured out how to adapt the <code>configureTypeRegistry</code> method to the new annotation method of defining parameter types by doing the following:</p>\n<pre><code>@ParameterType(&quot;(\\\\S+)&quot;)\npublic List&lt;String&gt; list(String s) {\n    return Arrays.asList(s.split(&quot;,&quot;));\n}\n</code></pre>\n<p>As for the <code>locale</code> method, I can't find how to set it now that the <code>TypeRegistryConfigurer</code> is not longer used for Cucumber behavioral configuration. I also need to know what it actually does, as far as I know it sets the language Cucumber uses to parse Gherkin keywords in feature files.</p>\n"},{"tags":["java","char","letter"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":1,"creation_date":1686251879,"post_id":76434935,"comment_id":134777253,"body_markdown":"One way: `System.out.println(&quot;Array: &quot; + String.join(&quot; &quot;, new String(arr).split(&quot;&quot;)))` Convert to a string then split into an array of strings because [`String.join()`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.CharSequence...-) won&#39;t accept a char array.","body":"One way: <code>System.out.println(&quot;Array: &quot; + String.join(&quot; &quot;, new String(arr).split(&quot;&quot;)))</code> Convert to a string then split into an array of strings because <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.CharSequence...-\" rel=\"nofollow noreferrer\"><code>String.join()</code></a> won&#39;t accept a char array."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1686274094,"post_id":76434935,"comment_id":134780002,"body_markdown":"`System.out.println(&quot;Array: &quot; + Arrays.toString(arr).replaceAll(&quot;[\\\\[\\\\],]&quot;, &quot;&quot;));`","body":"<code>System.out.println(&quot;Array: &quot; + Arrays.toString(arr).replaceAll(&quot;[\\\\[\\\\],]&quot;, &quot;&quot;));</code>"},{"owner":{"account_id":11167250,"reputation":2956,"user_id":8195525,"accept_rate":80,"display_name":"Derek"},"score":0,"creation_date":1687208893,"post_id":76434935,"comment_id":134901966,"body_markdown":"If any of the answers below have fixed your problem, please press the checkmark beside indicating the answer that helped.","body":"If any of the answers below have fixed your problem, please press the checkmark beside indicating the answer that helped."}],"answers":[{"tags":[],"owner":{"account_id":11167250,"reputation":2956,"user_id":8195525,"accept_rate":80,"display_name":"Derek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686252068,"creation_date":1686252068,"answer_id":76435084,"question_id":76434935,"body_markdown":"This would be the approach I would take\r\n\r\n``` java\r\npublic static void main(String[] args) {\r\n    char arr[] = {&#39;g&#39;, &#39;a&#39;, &#39;p&#39;, &#39;e&#39;, &#39;t&#39;};\r\n\r\n    // Convert the char array to a string with spaces in between\r\n    String result = String.join(&quot; &quot;, new String(arr).split(&quot;&quot;));\r\n\r\n    System.out.println(&quot;Array: &quot; + result); // Output: g a p e t\r\n}\r\n```\r\n","title":"Adding space in Java","body":"<p>This would be the approach I would take</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    char arr[] = {'g', 'a', 'p', 'e', 't'};\n\n    // Convert the char array to a string with spaces in between\n    String result = String.join(&quot; &quot;, new String(arr).split(&quot;&quot;));\n\n    System.out.println(&quot;Array: &quot; + result); // Output: g a p e t\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12130316,"reputation":87,"user_id":9753684,"display_name":"David Hash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686252333,"creation_date":1686252333,"answer_id":76435109,"question_id":76434935,"body_markdown":"You can loop through the array of characters as follows\r\n\r\n\r\n    public static void main(String[] args) \r\n    {\r\n        char arr[] = {&#39;g&#39;, &#39;a&#39;, &#39;p&#39;, &#39;e&#39;, &#39;t&#39;};\r\n\r\n        for (char i : arr)\r\n        {\r\n          System.out.print(i + &quot; &quot;);\r\n        }\r\n      }\r\n    }\r\n","title":"Adding space in Java","body":"<p>You can loop through the array of characters as follows</p>\n<pre><code>public static void main(String[] args) \n{\n    char arr[] = {'g', 'a', 'p', 'e', 't'};\n\n    for (char i : arr)\n    {\n      System.out.print(i + &quot; &quot;);\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25537980,"reputation":1,"user_id":19324676,"display_name":"GeRmAnImAl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686253341,"creation_date":1686253341,"answer_id":76435219,"question_id":76434935,"body_markdown":"Let the StringJoiner do the work for you:\r\n\r\n    public static void main(String[] args) {\r\n        char arr[] = {&#39;g&#39;, &#39;a&#39;, &#39;p&#39;, &#39;e&#39;, &#39;t&#39;};\r\n        StringJoiner joiner = new StringJoiner(&quot; &quot;);\r\n        for (char c : arr) {\r\n            joiner.add(String.valueOf(c));\r\n        }\r\n        System.out.println(joiner.toString());\r\n    }","title":"Adding space in Java","body":"<p>Let the StringJoiner do the work for you:</p>\n<pre><code>public static void main(String[] args) {\n    char arr[] = {'g', 'a', 'p', 'e', 't'};\n    StringJoiner joiner = new StringJoiner(&quot; &quot;);\n    for (char c : arr) {\n        joiner.add(String.valueOf(c));\n    }\n    System.out.println(joiner.toString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9075763,"reputation":1,"user_id":16937182,"display_name":"a.sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686352478,"creation_date":1686254012,"answer_id":76435286,"question_id":76434935,"body_markdown":"Here&#39;s an implementation using basic Java. I&#39;ve added a separate print statement at end to avoid space at the end of array.\r\n\r\n    public static void main(String[] args) \r\n    {\r\n        char arr[] = {&#39;g&#39;, &#39;a&#39;, &#39;p&#39;, &#39;e&#39;, &#39;t&#39;};\r\n    \r\n        for (int i=0; i&lt;arr.size()-1; i++)\r\n        {\r\n          System.out.print(arr[i] + &quot; &quot;);\r\n        }\r\n        System.out.print(arr[arr.size()-1]);\r\n      }\r\n    }","title":"Adding space in Java","body":"<p>Here's an implementation using basic Java. I've added a separate print statement at end to avoid space at the end of array.</p>\n<pre><code>public static void main(String[] args) \n{\n    char arr[] = {'g', 'a', 'p', 'e', 't'};\n\n    for (int i=0; i&lt;arr.size()-1; i++)\n    {\n      System.out.print(arr[i] + &quot; &quot;);\n    }\n    System.out.print(arr[arr.size()-1]);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686262489,"creation_date":1686262489,"answer_id":76436032,"question_id":76434935,"body_markdown":"There are a few approaches.\r\n\r\nThe simplest would be to use a _for-loop_.\r\n\r\n```java\r\nString string = &quot;&quot;;\r\nint index = 0;\r\nfor (char character : arr) {\r\n    if (index++ != 0) string += &quot; &quot;;\r\n    string += character;\r\n}\r\n```\r\nOr, as others have mentioned, you can use the _[String#split](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String))_ method, and then use the _[String#join](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#join(java.lang.CharSequence,java.lang.CharSequence...))_ method.\r\n\r\n```java\r\nString string = String.join(&quot; &quot;, new String(arr).split(&quot;&quot;));\r\n```\r\n\r\nYou could, also, use a _[StringBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html)_, utilizing the _[insert](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html#insert(int,char))_ method.\r\n\r\n```java\r\nStringBuilder string = new StringBuilder(new String(arr));\r\nfor (int index = string.length() - 1; index &gt;= 0; index--)\r\n    string.insert(index, &#39; &#39;);\r\n```\r\n\r\nFinally, you _could_ use, with caution, a _[String#replace](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence))_.  \r\nNote that, this will place an additional _space_ character at the beginning, and end.  \r\nYou can use, _[String#trim](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#trim())_ to remove them.\r\n\r\n```java\r\nString string = new String(arr).replace(&quot;&quot;, &quot; &quot;).trim();\r\n```","title":"Adding space in Java","body":"<p>There are a few approaches.</p>\n<p>The simplest would be to use a <em>for-loop</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;&quot;;\nint index = 0;\nfor (char character : arr) {\n    if (index++ != 0) string += &quot; &quot;;\n    string += character;\n}\n</code></pre>\n<p>Or, as others have mentioned, you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">String#split</a></em> method, and then use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#join(java.lang.CharSequence,java.lang.CharSequence...)\" rel=\"nofollow noreferrer\">String#join</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = String.join(&quot; &quot;, new String(arr).split(&quot;&quot;));\n</code></pre>\n<p>You could, also, use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\">StringBuilder</a></em>, utilizing the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html#insert(int,char)\" rel=\"nofollow noreferrer\">insert</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder string = new StringBuilder(new String(arr));\nfor (int index = string.length() - 1; index &gt;= 0; index--)\n    string.insert(index, ' ');\n</code></pre>\n<p>Finally, you <em>could</em> use, with caution, a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#replace</a></em>.<br />\nNote that, this will place an additional <em>space</em> character at the beginning, and end.<br />\nYou can use, <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#trim()\" rel=\"nofollow noreferrer\">String#trim</a></em> to remove them.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = new String(arr).replace(&quot;&quot;, &quot; &quot;).trim();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20359311,"reputation":1,"user_id":14934073,"display_name":"Salah Mohammed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686279293,"creation_date":1686279293,"answer_id":76436904,"question_id":76434935,"body_markdown":"After the loop, the `trim()` method is called on the resulting string to remove any trailing whitespace. Finally, the string is printed, resulting in the output: &quot;Array: g a p e t&quot;.\r\n\r\n    public static void main(String[] args) {\r\n        char arr[] = { &#39;g&#39;, &#39;a&#39;, &#39;p&#39;, &#39;e&#39;, &#39;t&#39; };\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        for (char c : arr) {\r\n            sb.append(c).append(&quot; &quot;);\r\n        }\r\n        String result = sb.toString().trim();\r\n\r\n        System.out.println(&quot;Array: &quot; + result);\r\n    }","title":"Adding space in Java","body":"<p>After the loop, the <code>trim()</code> method is called on the resulting string to remove any trailing whitespace. Finally, the string is printed, resulting in the output: &quot;Array: g a p e t&quot;.</p>\n<pre><code>public static void main(String[] args) {\n    char arr[] = { 'g', 'a', 'p', 'e', 't' };\n\n    StringBuilder sb = new StringBuilder();\n    for (char c : arr) {\n        sb.append(c).append(&quot; &quot;);\n    }\n    String result = sb.toString().trim();\n\n    System.out.println(&quot;Array: &quot; + result);\n}\n</code></pre>\n"}],"owner":{"account_id":28767483,"reputation":3,"user_id":22032033,"display_name":"Jack Wilson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76436032,"answer_count":6,"score":0,"last_activity_date":1686352478,"creation_date":1686250696,"question_id":76434935,"body_markdown":"So I am trying to practice figure out the quickest and easiest way to add spaces in between the character values.\r\n\r\n```\r\npublic static void main(String[] args) {      \r\n        char arr[] = {&#39;g&#39;, &#39;a&#39;, &#39;p&#39;, &#39;e&#39;, &#39;t&#39;};\r\n        \r\n        System.out.println(&quot;Array: &quot; + new String(arr)); //expected g a p e t\r\n                                                         //instead I got gapet\r\n    }\r\n```\r\n\r\n\r\nI tried converting the char values as a string, but I still can&#39;t figure out to add spaces in between each letter.","title":"Adding space in Java","body":"<p>So I am trying to practice figure out the quickest and easiest way to add spaces in between the character values.</p>\n<pre><code>public static void main(String[] args) {      \n        char arr[] = {'g', 'a', 'p', 'e', 't'};\n        \n        System.out.println(&quot;Array: &quot; + new String(arr)); //expected g a p e t\n                                                         //instead I got gapet\n    }\n</code></pre>\n<p>I tried converting the char values as a string, but I still can't figure out to add spaces in between each letter.</p>\n"},{"tags":["java","visibility","java-11","java-module"],"comments":[{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":0,"creation_date":1686350603,"post_id":76443990,"comment_id":134791914,"body_markdown":"Given that it&#39;s in an &quot;example&quot; package it definitely doesn&#39;t seem intended for reuse. You can obviously just copy the code but it&#39;s certainly more likely there&#39;s a different X-solution to your unstated X-problem. Why do you want to use this class?","body":"Given that it&#39;s in an &quot;example&quot; package it definitely doesn&#39;t seem intended for reuse. You can obviously just copy the code but it&#39;s certainly more likely there&#39;s a different X-solution to your unstated X-problem. Why do you want to use this class?"},{"owner":{"account_id":23492527,"reputation":3,"user_id":17543383,"display_name":"gcworker44"},"score":0,"creation_date":1686350843,"post_id":76443990,"comment_id":134791953,"body_markdown":"I did suspect that. But I want to import the class for its expression evaluation method.","body":"I did suspect that. But I want to import the class for its expression evaluation method."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1686352063,"post_id":76443990,"comment_id":134792066,"body_markdown":"You can use the command line option `--add-exports jdk.jdi/com.sun.tools.example.debug.expr=ALL-UNNAMED` for `javac` and `java` to access that internal package.","body":"You can use the command line option <code>--add-exports jdk.jdi&#47;com.sun.tools.example.debug.expr=ALL-UNNAMED</code> for <code>javac</code> and <code>java</code> to access that internal package."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686351869,"creation_date":1686351869,"answer_id":76444072,"question_id":76443990,"body_markdown":"_IntelliJ_ returns the following.\r\n\r\n&gt; _&quot;Package &#39;com.sun.tools.example.debug.expr&#39; is declared in module &#39;jdk.jdi&#39;, which does not export it to the unnamed module&quot;_\r\n\r\nIt&#39;s solution is\r\n\r\n&gt; _&quot;Add &#39;--add-exports jdk.jni/com.sun.tools.example.debug.expr=ALL-UNNAMED&#39; to module compiler options&quot;_\r\n\r\nThe _--add-exports_ appears to be a _java_ command option.\r\n\r\nHere is a reference, _[Migrating From JDK 8 to Later JDK Releases](https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66)_.","title":"How do I use a JDK class that isn&#39;t visible to me?","body":"<p><em>IntelliJ</em> returns the following.</p>\n<blockquote>\n<p><em>&quot;Package 'com.sun.tools.example.debug.expr' is declared in module 'jdk.jdi', which does not export it to the unnamed module&quot;</em></p>\n</blockquote>\n<p>It's solution is</p>\n<blockquote>\n<p><em>&quot;Add '--add-exports jdk.jni/com.sun.tools.example.debug.expr=ALL-UNNAMED' to module compiler options&quot;</em></p>\n</blockquote>\n<p>The <em>--add-exports</em> appears to be a <em>java</em> command option.</p>\n<p>Here is a reference, <em><a href=\"https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66\" rel=\"nofollow noreferrer\">Migrating From JDK 8 to Later JDK Releases</a></em>.</p>\n"}],"owner":{"account_id":23492527,"reputation":3,"user_id":17543383,"display_name":"gcworker44"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76444072,"answer_count":1,"score":0,"last_activity_date":1686351869,"creation_date":1686350255,"question_id":76443990,"body_markdown":"I am new to Java so please bear with me.\r\n\r\nI am trying to use the JDK class [&quot;com.sun.tools.example.debug.expr.ExpressionParser&quot;](https://github.com/openjdk/jdk/blob/master/src/jdk.jdi/share/classes/com/sun/tools/example/debug/expr/ExpressionParser.java). When I compile my code, I get the following error: &quot;package com.sun.tools.example.debug.expr is declared in module jdk.jdi, which does not export it&quot;.\r\n\r\nOk fair enough, but is there anything stopping me from creating my own version of this module with custom visibility of its packages? I have all the source files that I need, which to me sounds like  it should be possible to compile this module such that it exports package &quot;com.sun.tools.example.debug.expr&quot; and can be utilized by my Java program.\r\n\r\nMy situation may be an XY problem, but I see no other obvious workaround. I want to use a JDK class that seems right at my fingertips but I&#39;m blocked by package visibility. I understand if this is discouraged, but I&#39;d appreciate to learn if this is even possible even at least in theory.","title":"How do I use a JDK class that isn&#39;t visible to me?","body":"<p>I am new to Java so please bear with me.</p>\n<p>I am trying to use the JDK class <a href=\"https://github.com/openjdk/jdk/blob/master/src/jdk.jdi/share/classes/com/sun/tools/example/debug/expr/ExpressionParser.java\" rel=\"nofollow noreferrer\">&quot;com.sun.tools.example.debug.expr.ExpressionParser&quot;</a>. When I compile my code, I get the following error: &quot;package com.sun.tools.example.debug.expr is declared in module jdk.jdi, which does not export it&quot;.</p>\n<p>Ok fair enough, but is there anything stopping me from creating my own version of this module with custom visibility of its packages? I have all the source files that I need, which to me sounds like  it should be possible to compile this module such that it exports package &quot;com.sun.tools.example.debug.expr&quot; and can be utilized by my Java program.</p>\n<p>My situation may be an XY problem, but I see no other obvious workaround. I want to use a JDK class that seems right at my fingertips but I'm blocked by package visibility. I understand if this is discouraged, but I'd appreciate to learn if this is even possible even at least in theory.</p>\n"},{"tags":["java","android","android-studio","sdk","samsung-mobile"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1686369332,"post_id":76444027,"comment_id":134793013,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28790641,"reputation":1,"user_id":22050091,"display_name":"Abdulaziz Qaid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686351062,"creation_date":1686351062,"question_id":76444027,"body_markdown":"I have created an app and published on google play \r\nI used to debug and fix the app by Huawei mate 20 pro  it worked very fine but after publishing the app I downloaded it on Samsung galaxy s20 and s23 ultra the app half worked on s20(some library attached to my app did not work) but with s23 ultra even the simple button did not work ( I add a click listener to it) when I press the button nothing happens\r\n\r\nthis is my app link on Google Play \r\nhttps://play.google.com/store/apps/details?id=com.aziz.mediadownloader\r\n\r\nminSdk 24\r\ntargetSdk 34\r\n\r\nthank you in advance \r\n\r\nI expect the app to work fine on new devices as an old one!\r\n","title":"Why my app does not work on the new Galaxy s23 ultra?","body":"<p>I have created an app and published on google play\nI used to debug and fix the app by Huawei mate 20 pro  it worked very fine but after publishing the app I downloaded it on Samsung galaxy s20 and s23 ultra the app half worked on s20(some library attached to my app did not work) but with s23 ultra even the simple button did not work ( I add a click listener to it) when I press the button nothing happens</p>\n<p>this is my app link on Google Play\n<a href=\"https://play.google.com/store/apps/details?id=com.aziz.mediadownloader\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.aziz.mediadownloader</a></p>\n<p>minSdk 24\ntargetSdk 34</p>\n<p>thank you in advance</p>\n<p>I expect the app to work fine on new devices as an old one!</p>\n"},{"tags":["java","spring","amazon-dynamodb","type-conversion","aws-sdk"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686453992,"post_id":76443998,"comment_id":134799782,"body_markdown":"Shot in the dark: Could there be a locale problem? Could something expect to use a something other than a `.` for a decimal point? What if, for example, you attempt to parse &quot;29985,689834184945&quot; ?","body":"Shot in the dark: Could there be a locale problem? Could something expect to use a something other than a <code>.</code> for a decimal point? What if, for example, you attempt to parse &quot;29985,689834184945&quot; ?"},{"owner":{"account_id":9950124,"reputation":864,"user_id":7363182,"display_name":"dems98"},"score":0,"creation_date":1687100955,"post_id":76443998,"comment_id":134886802,"body_markdown":"I made a test with *localstack* and the double conversion worked, so I think the error is somehow hidden.\nI would try to remove the Spring Data annotation on the composite key `myKey` and decompose the same, inside the entity, in two fields:\n1. annotated with `@DynamoDBHashKey`\n2. annotated with `@DynamoDBRangeKey`\nSee if it helps","body":"I made a test with <i>localstack</i> and the double conversion worked, so I think the error is somehow hidden. I would try to remove the Spring Data annotation on the composite key <code>myKey</code> and decompose the same, inside the entity, in two fields: 1. annotated with <code>@DynamoDBHashKey</code> 2. annotated with <code>@DynamoDBRangeKey</code> See if it helps"}],"owner":{"account_id":25679657,"reputation":31,"user_id":19442619,"display_name":"Carlo Ligthart"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1686350862,"creation_date":1686350526,"question_id":76443998,"body_markdown":"I am developing a Spring Boot application where I use AWS SDK for fetching data from DynamoDB. I am running into the problem where DynamoDB Type converter is attempting to parse a `Double` as an `Integer`, resulting in a `NumberFormatException`.\r\n\r\nMy entity class is as follows:\r\n\r\n```\r\nimport com.amazonaws.services.dynamodbv2.datamodeling.*;\r\nimport lombok.*;\r\nimport org.springframework.data.annotation.Id;\r\n\r\nimport java.time.LocalDate;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@DynamoDBTable(tableName = &quot;my_table&quot;)\r\npublic class MyEntity {\r\n\r\n    @Id\r\n    @Getter(value = AccessLevel.NONE)\r\n    private MyKey myKey;\r\n    \r\n    // Other attributes...\r\n    \r\n    @DynamoDBAttribute(attributeName = &quot;overall_energy&quot;)\r\n    @DynamoDBTyped(DynamoDBMapperFieldModel.DynamoDBAttributeType.N)\r\n    private Double overallEnergy;\r\n    \r\n    // Other attributes...\r\n\r\n}\r\n```\r\n\r\nThe data I am trying to fetch from DynamoDB looks like this:\r\n\r\n```\r\n{\r\n  &quot;overall_energy&quot;: {\r\n    &quot;N&quot;:  &quot;29985.689834184945&quot;\r\n  }\r\n}\r\n```\r\n\r\nHowever, when I attempt to fetch this data, I get a `NumberFormatException`:\r\n\r\n```\r\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: Caused by: java.lang.NumberFormatException: For input string: &quot;29985.689834184945&quot;\r\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.Integer.parseInt(Integer.java:668) ~[na:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.Integer.valueOf(Integer.java:999) ~[na:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.StandardTypeConverters$ToInteger$2.convert(StandardTypeConverters.java:773) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.StandardTypeConverters$ToInteger$2.convert(StandardTypeConverters.java:770) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.StandardTypeConverters$1.unconvert(StandardTypeConverters.java:75) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTypeConverter$DelegateConverter.unconvert(DynamoDBTypeConverter.java:109) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTypeConverter$NullSafeConverter.unconvert(DynamoDBTypeConverter.java:128) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTypeConverter$ExtendedConverter.unconvert(DynamoDBTypeConverter.java:88) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapperFieldModel.unconvert(DynamoDBMapperFieldModel.java:146) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapperFieldModel.unconvertAndSet(DynamoDBMapperFieldModel.java:164) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapperTableModel.unconvert(DynamoDBMapperTableModel.java:267) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\r\n```\r\n\r\nIt seems the SDK is attempting to parse the `Double` as an `Integer`, but I don&#39;t understand why this is happening. I am using version 1.12.454 of the AWS SDK.\r\n\r\nAll references to `overallEnergy` in my codebase treat it as a `Double`.\r\n\r\nI tried the following steps to solve it:\r\n\r\n1. **Created a Custom Converter (`StringToDoubleTypeConverter`)**\r\n\r\n   Expectation: I expected that by explicitly converting the string from the database to a double in Java using my own converter, it would resolve the issue.\r\n\r\n   Result: This approach did not work. The **`NumberFormatException`** was still being thrown.\r\n\r\n2. **Removed Explicit Type Conversion Annotations**\r\n\r\n   Expectation: I thought perhaps the issue was with the explicit type conversion annotations, so I removed them to let the DynamoDBMapper handle the conversion implicitly.\r\n\r\n   Result: The issue was not resolved. The **`NumberFormatException`** persisted.\r\n\r\n3. **Modified the `overall_energy` Value in DynamoDB Record**\r\n\r\n   Expectation: Suspecting that the issue might be related to the size of the number or the precision, I changed the value of **`overall_energy`** in the DynamoDB record to only have two decimal places.\r\n\r\n   Result: This did not resolve the issue. The **`NumberFormatException`** was still being thrown.\r\n\r\n4. **Changed `overall_energy` to an Integer Value**\r\n\r\n   Expectation: I changed the value of **`overall_energy`** in the DynamoDB record to an integer value by removing the decimal values. This was a test to see if the issue was solely related to handling decimal values.\r\n\r\n   Result: This change worked in the sense that the **`NumberFormatException`** was not thrown and the number was parsed correctly. However, the value was treated as an integer and not a double, which does not meet the needs of my application. The application requires this field to be treated as a **`double`** value.\r\n\r\nDoes anyone know why this is happening and how I could resolve this? Any help would be greatly appreciated.\r\n\r\nThank you in advance.","title":"NumberFormatException when fetching Double from DynamoDB in Spring Boot application","body":"<p>I am developing a Spring Boot application where I use AWS SDK for fetching data from DynamoDB. I am running into the problem where DynamoDB Type converter is attempting to parse a <code>Double</code> as an <code>Integer</code>, resulting in a <code>NumberFormatException</code>.</p>\n<p>My entity class is as follows:</p>\n<pre><code>import com.amazonaws.services.dynamodbv2.datamodeling.*;\nimport lombok.*;\nimport org.springframework.data.annotation.Id;\n\nimport java.time.LocalDate;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@DynamoDBTable(tableName = &quot;my_table&quot;)\npublic class MyEntity {\n\n    @Id\n    @Getter(value = AccessLevel.NONE)\n    private MyKey myKey;\n    \n    // Other attributes...\n    \n    @DynamoDBAttribute(attributeName = &quot;overall_energy&quot;)\n    @DynamoDBTyped(DynamoDBMapperFieldModel.DynamoDBAttributeType.N)\n    private Double overallEnergy;\n    \n    // Other attributes...\n\n}\n</code></pre>\n<p>The data I am trying to fetch from DynamoDB looks like this:</p>\n<pre><code>{\n  &quot;overall_energy&quot;: {\n    &quot;N&quot;:  &quot;29985.689834184945&quot;\n  }\n}\n</code></pre>\n<p>However, when I attempt to fetch this data, I get a <code>NumberFormatException</code>:</p>\n<pre><code>Jun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nJun  9 22:20:39 ip-10-55-167-190 web: Caused by: java.lang.NumberFormatException: For input string: &quot;29985.689834184945&quot;\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.Integer.parseInt(Integer.java:668) ~[na:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at java.base/java.lang.Integer.valueOf(Integer.java:999) ~[na:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.StandardTypeConverters$ToInteger$2.convert(StandardTypeConverters.java:773) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.StandardTypeConverters$ToInteger$2.convert(StandardTypeConverters.java:770) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.StandardTypeConverters$1.unconvert(StandardTypeConverters.java:75) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTypeConverter$DelegateConverter.unconvert(DynamoDBTypeConverter.java:109) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTypeConverter$NullSafeConverter.unconvert(DynamoDBTypeConverter.java:128) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTypeConverter$ExtendedConverter.unconvert(DynamoDBTypeConverter.java:88) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapperFieldModel.unconvert(DynamoDBMapperFieldModel.java:146) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapperFieldModel.unconvertAndSet(DynamoDBMapperFieldModel.java:164) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\nJun  9 22:20:39 ip-10-55-167-190 web: at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapperTableModel.unconvert(DynamoDBMapperTableModel.java:267) ~[aws-java-sdk-dynamodb-1.12.454.jar!/:na]\n</code></pre>\n<p>It seems the SDK is attempting to parse the <code>Double</code> as an <code>Integer</code>, but I don't understand why this is happening. I am using version 1.12.454 of the AWS SDK.</p>\n<p>All references to <code>overallEnergy</code> in my codebase treat it as a <code>Double</code>.</p>\n<p>I tried the following steps to solve it:</p>\n<ol>\n<li><p><strong>Created a Custom Converter (<code>StringToDoubleTypeConverter</code>)</strong></p>\n<p>Expectation: I expected that by explicitly converting the string from the database to a double in Java using my own converter, it would resolve the issue.</p>\n<p>Result: This approach did not work. The <strong><code>NumberFormatException</code></strong> was still being thrown.</p>\n</li>\n<li><p><strong>Removed Explicit Type Conversion Annotations</strong></p>\n<p>Expectation: I thought perhaps the issue was with the explicit type conversion annotations, so I removed them to let the DynamoDBMapper handle the conversion implicitly.</p>\n<p>Result: The issue was not resolved. The <strong><code>NumberFormatException</code></strong> persisted.</p>\n</li>\n<li><p><strong>Modified the <code>overall_energy</code> Value in DynamoDB Record</strong></p>\n<p>Expectation: Suspecting that the issue might be related to the size of the number or the precision, I changed the value of <strong><code>overall_energy</code></strong> in the DynamoDB record to only have two decimal places.</p>\n<p>Result: This did not resolve the issue. The <strong><code>NumberFormatException</code></strong> was still being thrown.</p>\n</li>\n<li><p><strong>Changed <code>overall_energy</code> to an Integer Value</strong></p>\n<p>Expectation: I changed the value of <strong><code>overall_energy</code></strong> in the DynamoDB record to an integer value by removing the decimal values. This was a test to see if the issue was solely related to handling decimal values.</p>\n<p>Result: This change worked in the sense that the <strong><code>NumberFormatException</code></strong> was not thrown and the number was parsed correctly. However, the value was treated as an integer and not a double, which does not meet the needs of my application. The application requires this field to be treated as a <strong><code>double</code></strong> value.</p>\n</li>\n</ol>\n<p>Does anyone know why this is happening and how I could resolve this? Any help would be greatly appreciated.</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","user-interface","netbeans","linux-mint"],"comments":[{"owner":{"account_id":2031689,"reputation":330,"user_id":1815210,"accept_rate":81,"display_name":"gimmegimme"},"score":0,"creation_date":1487142884,"post_id":27600224,"comment_id":71644220,"body_markdown":"This problem occurred for me when I did sout then pressed the tab key, to generate System.out.println(&quot;&quot;);","body":"This problem occurred for me when I did sout then pressed the tab key, to generate System.out.println(&quot;&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":2275891,"reputation":1551,"user_id":2002162,"display_name":"dawciobiel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441101745,"creation_date":1441101745,"answer_id":32328792,"question_id":27600224,"body_markdown":"Had same problem on MATE @ Ubuntu + NetBeans 8 beta.\r\n\r\nTAB Key not inserting tabs/spaces insted of displaying [TAB] icon in status bar.\r\nKey doesnt work on .java files, but it does on .txt or others format files.\r\n\r\nWhat i did to fix it was deleting ~/.netbeans configuration folder.\r\n\r\nNow i lost configuration but TAB is working again.","title":"TAB Key does not work in NetBeans 8","body":"<p>Had same problem on MATE @ Ubuntu + NetBeans 8 beta.</p>\n\n<p>TAB Key not inserting tabs/spaces insted of displaying [TAB] icon in status bar.\nKey doesnt work on .java files, but it does on .txt or others format files.</p>\n\n<p>What i did to fix it was deleting ~/.netbeans configuration folder.</p>\n\n<p>Now i lost configuration but TAB is working again.</p>\n"},{"tags":[],"owner":{"account_id":3442671,"reputation":1815,"user_id":2884225,"accept_rate":75,"display_name":"Ryan Hilbert"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1442994330,"creation_date":1442994330,"answer_id":32733810,"question_id":27600224,"body_markdown":"I just had this issue. Turned out it was caused by setting Tools -&gt; Options -&gt; Editor -&gt; Formatting -&gt; Category: Tabs and Indents -&gt; Number of Spaces per Indent: 0\r\n\r\nSetting the number of spaces per indent to a positive value fixed it in my case. Strangely, this value may affect your tabbing even if you aren&#39;t replacing tabs with spaces.","title":"TAB Key does not work in NetBeans 8","body":"<p>I just had this issue. Turned out it was caused by setting Tools -> Options -> Editor -> Formatting -> Category: Tabs and Indents -> Number of Spaces per Indent: 0</p>\n\n<p>Setting the number of spaces per indent to a positive value fixed it in my case. Strangely, this value may affect your tabbing even if you aren't replacing tabs with spaces.</p>\n"},{"tags":[],"owner":{"account_id":17719249,"reputation":1,"user_id":12864754,"display_name":"meherab_hossain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645039961,"creation_date":1645039961,"answer_id":71148213,"question_id":27600224,"body_markdown":"I also face the same problem, then i try to find out the solution and i just change the version of netbeans 12.6 to 12.0 with the jdk version 8 and it works!!!","title":"TAB Key does not work in NetBeans 8","body":"<p>I also face the same problem, then i try to find out the solution and i just change the version of netbeans 12.6 to 12.0 with the jdk version 8 and it works!!!</p>\n"},{"tags":[],"owner":{"account_id":17799132,"reputation":1,"user_id":13203237,"display_name":"Magno Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686349897,"creation_date":1686349897,"answer_id":76443976,"question_id":27600224,"body_markdown":"you can use the shortcut ( command comma - ⌘, ) or you can go into options and select preferences\r\n\r\n[enter image description here][1]\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oJe3X.png\r\n  [2]: https://i.stack.imgur.com/DsZBj.png","title":"TAB Key does not work in NetBeans 8","body":"<p>you can use the shortcut ( command comma - ⌘, ) or you can go into options and select preferences</p>\n<p><a href=\"https://i.stack.imgur.com/oJe3X.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/DsZBj.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":2090809,"reputation":21,"user_id":1860701,"display_name":"Stephan_Wens"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3958,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1686349897,"creation_date":1419242019,"question_id":27600224,"body_markdown":"I&#39;m working with Netbeans 8 on a Linux Mint 13 (Cinnamon). Here the TAB Key does not work. For example if I want to make a Line comment and use the TAB Key to indent a few tabs, then nothing happens. Even manual intendation of code using the TAB Key does not work. The TAB Key of my keyboard is not broken because it works in other programs. It is not a major issue but with time it is getting a little annoying.\r\n\r\nNetBeans has GUI problems in Cinnamon in general (I heard it has to do with Cinnamon using muffin instead of mutter) could that be linked?","title":"TAB Key does not work in NetBeans 8","body":"<p>I'm working with Netbeans 8 on a Linux Mint 13 (Cinnamon). Here the TAB Key does not work. For example if I want to make a Line comment and use the TAB Key to indent a few tabs, then nothing happens. Even manual intendation of code using the TAB Key does not work. The TAB Key of my keyboard is not broken because it works in other programs. It is not a major issue but with time it is getting a little annoying.</p>\n\n<p>NetBeans has GUI problems in Cinnamon in general (I heard it has to do with Cinnamon using muffin instead of mutter) could that be linked?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1527982921,"post_id":50662053,"comment_id":88334317,"body_markdown":"Use a `GridBagLayout` instead.","body":"Use a <code>GridBagLayout</code> instead."},{"owner":{"account_id":8397558,"reputation":4568,"user_id":6304094,"display_name":"Kevin Anderson"},"score":2,"creation_date":1527983470,"post_id":50662053,"comment_id":88334391,"body_markdown":"I can&#39;t imagine that **any** layout will help. If the goal here is to have the hexagons merge visually into a honeycomb pattern, the rectangular `JButton`s on which the hexagons are drawn will have to overlap.  The normal Swing layout managers naturally resist overlapping the components under their control.  You might be able to write a **custom layout manager**, however...","body":"I can&#39;t imagine that <b>any</b> layout will help. If the goal here is to have the hexagons merge visually into a honeycomb pattern, the rectangular <code>JButton</code>s on which the hexagons are drawn will have to overlap.  The normal Swing layout managers naturally resist overlapping the components under their control.  You might be able to write a <b>custom layout manager</b>, however..."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1527983594,"post_id":50662053,"comment_id":88334408,"body_markdown":"If you want to follow the path you are, pass ONLY the `size` to the buttons, let them calculate the rest of the their requirements. However, if your intention is to create a honeycomb pattern, I&#39;d paint ALL the polygons onto a single component.  Maintain their `Shape`s in a `List` so they can more easily be painted and you can perform collision detection on them more easily.","body":"If you want to follow the path you are, pass ONLY the <code>size</code> to the buttons, let them calculate the rest of the their requirements. However, if your intention is to create a honeycomb pattern, I&#39;d paint ALL the polygons onto a single component.  Maintain their <code>Shape</code>s in a <code>List</code> so they can more easily be painted and you can perform collision detection on them more easily."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686348356,"creation_date":1527985508,"answer_id":50662296,"question_id":50662053,"body_markdown":"For what it&#39;s worth, I wouldn&#39;t use custom components for each cell, rather, I&#39;d use a single component, generate all the shapes you need and paint them onto a single component.\r\n\r\nThis gives you significantly more control over the placement of the shapes, and since `Shape` has built in collision detection, it makes it very easy to detect which cell the mouse is over/clicked.\r\n\r\nI did some tweaking of your basic code and came up with the following example.\r\n\r\nIt creates a single shape which acts as the &quot;master&quot;, I then, for each cell, create an `Area` and translate it&#39;s position to where I want it to appear.  This is then added to a `List` which is used to paint all the cells and perform the mouse &quot;hit&quot; detection.\r\n\r\nThe benefit of this approach is, it automatically scales the shapes to fit within the available component space\r\n\r\n[![Example][1]][1]\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Shape;\r\n    import java.awt.event.MouseAdapter;\r\n    import java.awt.event.MouseEvent;\r\n    import java.awt.geom.AffineTransform;\r\n    import java.awt.geom.Area;\r\n    import java.awt.geom.GeneralPath;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.UnsupportedLookAndFeelException;\r\n    \r\n    public class Test {\r\n    \r\n        public static void main(String[] args) {\r\n            new Test();\r\n        }\r\n    \r\n        public Test() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n                    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\r\n                        ex.printStackTrace();\r\n                    }\r\n    \r\n                    JFrame frame = new JFrame(&quot;Testing&quot;);\r\n                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n    \r\n        public class TestPane extends JPanel {\r\n    \r\n    //      private Shape hexagon;\r\n            private List&lt;Shape&gt; cells = new ArrayList&lt;&gt;(6);\r\n    \r\n            private Shape highlighted;\r\n    \r\n            public TestPane() {\r\n                addMouseMotionListener(new MouseAdapter() {\r\n                    @Override\r\n                    public void mouseMoved(MouseEvent e) {\r\n                        highlighted = null;\r\n                        for (Shape cell : cells) {\r\n                            if (cell.contains(e.getPoint())) {\r\n                                highlighted = cell;\r\n                                break;\r\n                            }\r\n                        }\r\n                        repaint();\r\n                    }\r\n                });\r\n            }\r\n    \r\n            @Override\r\n            public void invalidate() {\r\n                super.invalidate();\r\n                updateHoneyComb();\r\n            }\r\n    \r\n            protected void updateHoneyComb() {\r\n                GeneralPath path = new GeneralPath();\r\n    \r\n                float rowHeight = ((getHeight() * 1.14f) / 3f);\r\n                float colWidth = getWidth() / 3f;\r\n    \r\n                float size = Math.min(rowHeight, colWidth);\r\n    \r\n                float centerX = size / 2f;\r\n                float centerY = size / 2f;\r\n                for (float i = 0; i &lt; 6; i++) {\r\n                    float angleDegrees = (60f * i) - 30f;\r\n                    float angleRad = ((float) Math.PI / 180.0f) * angleDegrees;\r\n    \r\n                    float x = centerX + ((size / 2f) * (float) Math.cos(angleRad));\r\n                    float y = centerY + ((size / 2f) * (float) Math.sin(angleRad));\r\n    \r\n                    if (i == 0) {\r\n                        path.moveTo(x, y);\r\n                    } else {\r\n                        path.lineTo(x, y);\r\n                    }\r\n                }\r\n                path.closePath();\r\n    \r\n                cells.clear();\r\n                for (int row = 0; row &lt; 3; row++) {\r\n                    float offset = size / 2f;\r\n                    int colCount = 2;\r\n                    if (row % 2 == 0) {\r\n                        offset = 0;\r\n                        colCount = 3;\r\n                    }\r\n                    for (int col = 0; col &lt; colCount; col++) {\r\n                        AffineTransform at = AffineTransform.getTranslateInstance(offset + (col * size), row * (size * 0.8f));\r\n                        Area area = new Area(path);\r\n                        area = area.createTransformedArea(at);\r\n                        cells.add(area);\r\n                    }\r\n                }\r\n    \r\n            }\r\n    \r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n                if (highlighted != null) {\r\n                    g2d.setColor(Color.BLUE);\r\n                    g2d.fill(highlighted);\r\n                }\r\n                g2d.setColor(Color.BLACK);\r\n                for (Shape cell : cells) {\r\n                    g2d.draw(cell);\r\n                }\r\n                g2d.dispose();\r\n            }\r\n    \r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(200, 200);\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nNow, I know, you&#39;re going to tell me that there is space between them. Based on the fact that the first cell should be at `0x0`, I&#39;d say the space is coming from your hexagon algorithm, but I&#39;ll leave you to sort that out ;)\r\n\r\nAlso, the rows/columns are currently hard coded (3x3), shouldn&#39;t be to hard to make them more variable ;)\r\n\r\n  [1]: https://i.stack.imgur.com/ts38J.png\r\n\r\n# Update\r\n\r\nSo, I had a play around with the positioning algorithm and based on you linked hexagon algorithm, I was able to come up with...\r\n\r\n        protected void updateHoneyComb() {\r\n            GeneralPath path = new GeneralPath();\r\n\r\n            double rowHeight = ((getHeight() * 1.14f) / 3f);\r\n            double colWidth = getWidth() / 3f;\r\n\r\n            double size = Math.min(rowHeight, colWidth) / 2d;\r\n\r\n            double centerX = size / 2d;\r\n            double centerY = size / 2d;\r\n\r\n            double width = Math.sqrt(3d) * size;\r\n            double height = size * 2;\r\n            for (float i = 0; i &lt; 6; i++) {\r\n                float angleDegrees = (60f * i) - 30f;\r\n                float angleRad = ((float) Math.PI / 180.0f) * angleDegrees;\r\n\r\n                double x = centerX + (size * Math.cos(angleRad));\r\n                double y = centerY + (size * Math.sin(angleRad));\r\n\r\n                if (i == 0) {\r\n                    path.moveTo(x, y);\r\n                } else {\r\n                    path.lineTo(x, y);\r\n                }\r\n            }\r\n            path.closePath();\r\n\r\n            cells.clear();\r\n            double yPos = size / 2d;\r\n            for (int row = 0; row &lt; 3; row++) {\r\n                double offset = (width / 2d);\r\n                int colCount = 2;\r\n                if (row % 2 == 0) {\r\n                    offset = 0;\r\n                    colCount = 3;\r\n                }\r\n                double xPos = offset;\r\n                for (int col = 0; col &lt; colCount; col++) {\r\n                    AffineTransform at = AffineTransform.getTranslateInstance(xPos + (size * 0.38), yPos);\r\n                    Area area = new Area(path);\r\n                    area = area.createTransformedArea(at);\r\n                    cells.add(area);\r\n                    xPos += width;\r\n                }\r\n                yPos += height * 0.75;\r\n            }\r\n\r\n        }\r\n\r\nWhich now gets the hexagons laid out against each other.  Still needs some work though","title":"Too much space between custom Hexagonal JButtons in Swing","body":"<p>For what it's worth, I wouldn't use custom components for each cell, rather, I'd use a single component, generate all the shapes you need and paint them onto a single component.</p>\n<p>This gives you significantly more control over the placement of the shapes, and since <code>Shape</code> has built in collision detection, it makes it very easy to detect which cell the mouse is over/clicked.</p>\n<p>I did some tweaking of your basic code and came up with the following example.</p>\n<p>It creates a single shape which acts as the &quot;master&quot;, I then, for each cell, create an <code>Area</code> and translate it's position to where I want it to appear.  This is then added to a <code>List</code> which is used to paint all the cells and perform the mouse &quot;hit&quot; detection.</p>\n<p>The benefit of this approach is, it automatically scales the shapes to fit within the available component space</p>\n<p><a href=\"https://i.stack.imgur.com/ts38J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ts38J.png\" alt=\"Example\" /></a></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Shape;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.geom.AffineTransform;\nimport java.awt.geom.Area;\nimport java.awt.geom.GeneralPath;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        new Test();\n    }\n\n    public Test() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\n                    ex.printStackTrace();\n                }\n\n                JFrame frame = new JFrame(&quot;Testing&quot;);\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n//      private Shape hexagon;\n        private List&lt;Shape&gt; cells = new ArrayList&lt;&gt;(6);\n\n        private Shape highlighted;\n\n        public TestPane() {\n            addMouseMotionListener(new MouseAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                    highlighted = null;\n                    for (Shape cell : cells) {\n                        if (cell.contains(e.getPoint())) {\n                            highlighted = cell;\n                            break;\n                        }\n                    }\n                    repaint();\n                }\n            });\n        }\n\n        @Override\n        public void invalidate() {\n            super.invalidate();\n            updateHoneyComb();\n        }\n\n        protected void updateHoneyComb() {\n            GeneralPath path = new GeneralPath();\n\n            float rowHeight = ((getHeight() * 1.14f) / 3f);\n            float colWidth = getWidth() / 3f;\n\n            float size = Math.min(rowHeight, colWidth);\n\n            float centerX = size / 2f;\n            float centerY = size / 2f;\n            for (float i = 0; i &lt; 6; i++) {\n                float angleDegrees = (60f * i) - 30f;\n                float angleRad = ((float) Math.PI / 180.0f) * angleDegrees;\n\n                float x = centerX + ((size / 2f) * (float) Math.cos(angleRad));\n                float y = centerY + ((size / 2f) * (float) Math.sin(angleRad));\n\n                if (i == 0) {\n                    path.moveTo(x, y);\n                } else {\n                    path.lineTo(x, y);\n                }\n            }\n            path.closePath();\n\n            cells.clear();\n            for (int row = 0; row &lt; 3; row++) {\n                float offset = size / 2f;\n                int colCount = 2;\n                if (row % 2 == 0) {\n                    offset = 0;\n                    colCount = 3;\n                }\n                for (int col = 0; col &lt; colCount; col++) {\n                    AffineTransform at = AffineTransform.getTranslateInstance(offset + (col * size), row * (size * 0.8f));\n                    Area area = new Area(path);\n                    area = area.createTransformedArea(at);\n                    cells.add(area);\n                }\n            }\n\n        }\n\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n            if (highlighted != null) {\n                g2d.setColor(Color.BLUE);\n                g2d.fill(highlighted);\n            }\n            g2d.setColor(Color.BLACK);\n            for (Shape cell : cells) {\n                g2d.draw(cell);\n            }\n            g2d.dispose();\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(200, 200);\n        }\n\n    }\n}\n</code></pre>\n<p>Now, I know, you're going to tell me that there is space between them. Based on the fact that the first cell should be at <code>0x0</code>, I'd say the space is coming from your hexagon algorithm, but I'll leave you to sort that out ;)</p>\n<p>Also, the rows/columns are currently hard coded (3x3), shouldn't be to hard to make them more variable ;)</p>\n<h1>Update</h1>\n<p>So, I had a play around with the positioning algorithm and based on you linked hexagon algorithm, I was able to come up with...</p>\n<pre><code>    protected void updateHoneyComb() {\n        GeneralPath path = new GeneralPath();\n\n        double rowHeight = ((getHeight() * 1.14f) / 3f);\n        double colWidth = getWidth() / 3f;\n\n        double size = Math.min(rowHeight, colWidth) / 2d;\n\n        double centerX = size / 2d;\n        double centerY = size / 2d;\n\n        double width = Math.sqrt(3d) * size;\n        double height = size * 2;\n        for (float i = 0; i &lt; 6; i++) {\n            float angleDegrees = (60f * i) - 30f;\n            float angleRad = ((float) Math.PI / 180.0f) * angleDegrees;\n\n            double x = centerX + (size * Math.cos(angleRad));\n            double y = centerY + (size * Math.sin(angleRad));\n\n            if (i == 0) {\n                path.moveTo(x, y);\n            } else {\n                path.lineTo(x, y);\n            }\n        }\n        path.closePath();\n\n        cells.clear();\n        double yPos = size / 2d;\n        for (int row = 0; row &lt; 3; row++) {\n            double offset = (width / 2d);\n            int colCount = 2;\n            if (row % 2 == 0) {\n                offset = 0;\n                colCount = 3;\n            }\n            double xPos = offset;\n            for (int col = 0; col &lt; colCount; col++) {\n                AffineTransform at = AffineTransform.getTranslateInstance(xPos + (size * 0.38), yPos);\n                Area area = new Area(path);\n                area = area.createTransformedArea(at);\n                cells.add(area);\n                xPos += width;\n            }\n            yPos += height * 0.75;\n        }\n\n    }\n</code></pre>\n<p>Which now gets the hexagons laid out against each other.  Still needs some work though</p>\n"}],"owner":{"account_id":5936477,"reputation":302,"user_id":4669298,"accept_rate":60,"display_name":"Aleix Sanchis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50662296,"answer_count":1,"score":0,"last_activity_date":1686348356,"creation_date":1527982322,"question_id":50662053,"body_markdown":"I&#39;m currently developing a Hidato Puzzle solver for a university project. I&#39;m using Swing and Intellij IDE.\r\n\r\nOne of the requirements is to have Square, Hexagonal and Triangular shapes. Square shapes are easily, but to implement the HexagonalGrid i wrote a custom Hexagonal Button extending JButton.\r\n\r\n[![Result of trying to render the Grid][1]][1]\r\n\r\n\r\nHowever, when trying to render a Grid i get this result. I don&#39;t know what&#39;s wrong.\r\n\r\nI got the Hexagonal Math from [this website][2] which is aparently regarded online as the HexGrid Bible. \r\n\r\nHere&#39;s the code of the Hexagonal Button and the Grid renderer.\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n\r\n    public class HexagonButton extends JButton {\r\n    private Shape hexagon;\r\n    float size;\r\n    float width, height;\r\n\r\n    public HexagonButton(float centerX, float centerY, float size){\r\n        Polygon p = new Polygon();\r\n        this.size = size;\r\n        p.reset();\r\n        for(int i=0; i&lt;6; i++){\r\n            float angleDegrees = (60 * i) - 30;\r\n            float angleRad = ((float)Math.PI / 180.0f) * angleDegrees;\r\n\r\n            float x = centerX + (size * (float)Math.cos(angleRad));\r\n            float y = centerY + (size * (float)Math.sin(angleRad));\r\n\r\n            p.addPoint((int)x,(int)y);\r\n        }\r\n\r\n        width = (float)Math.sqrt(3) * size;\r\n        height = 2.0f * size;\r\n        hexagon = p;\r\n    }\r\n\r\n    public void paintBorder(Graphics g){\r\n        ((Graphics2D)g).draw(hexagon);\r\n    }\r\n\r\n    public void paintComponent(Graphics g){\r\n        ((Graphics2D)g).draw(hexagon);\r\n    }\r\n\r\n    @Override\r\n    public Dimension getPreferredSize(){\r\n\r\n        return new Dimension((int)width, (int)height);\r\n    }\r\n    @Override\r\n    public Dimension getMinimumSize(){\r\n        return new Dimension((int)width, (int)height);\r\n    }\r\n    @Override\r\n    public Dimension getMaximumSize(){\r\n        return new Dimension((int)width, (int)height);\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean contains(int x, int y){\r\n        return hexagon.contains(x,y);\r\n    }\r\n    }\r\n\r\n    Public class Main extends JFrame implements MouseListener {\r\n\r\n    /**\r\n     * Create the GUI and show it.  For thread safety,\r\n     * this method should be invoked from the\r\n     * event-dispatching thread.\r\n     */\r\n    public static void main(String[] args) {\r\n\t// write your code here\r\n        //Schedule a job for the event-dispatching thread:\r\n        //creating and showing this application&#39;s GUI.\r\n        Main main = new Main();\r\n        main.pack();\r\n        main.setVisible(true);\r\n        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n\r\n    Main(){\r\n        super();\r\n        int rows = 3;\r\n        int cols = 3;\r\n        setLayout(new GridLayout(rows,cols,-1,-1));\r\n        //grid.setBorder(BorderFactory.createEmptyBorder(2,2,2,2));\r\n        this.setMinimumSize(new Dimension(173 * rows, 200 * cols+2));\r\n\r\n        for(int i=0;i&lt;rows;i++){\r\n            for(int j=0;j&lt;cols;j++){\r\n                float size = 25;\r\n                int width = (int)(size * Math.sqrt(3));\r\n                int height = (int)(size * 2.0f);\r\n                int xOffset = (width / 2);\r\n                if(i%2==1){\r\n                    //Offset odd rows to the right\r\n                    xOffset += (width/2);\r\n                }\r\n                int yOffset = height / 2;\r\n                int centerX = xOffset + j*width;\r\n                int centerY = yOffset + i*height;\r\n                HexagonButton hexagon = new HexagonButton(centerX, centerY, size);\r\n                hexagon.addMouseListener(this);\r\n                hexagon.setMinimumSize(hexagon.getMinimumSize());\r\n                hexagon.setMaximumSize(hexagon.getMaximumSize());\r\n                hexagon.setPreferredSize(hexagon.getPreferredSize());\r\n                //hexagon.setVerticalAlignment(SwingConstants.CENTER);\r\n                hexagon.setHorizontalAlignment(SwingConstants.CENTER);\r\n                add(hexagon);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    }\r\n\r\n\r\nDoes anyone know where the problem might be? I&#39;m still pretty new to Swing\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fVfSb.png\r\n  [2]: https://www.redblobgames.com/grids/hexagons/#angles","title":"Too much space between custom Hexagonal JButtons in Swing","body":"<p>I'm currently developing a Hidato Puzzle solver for a university project. I'm using Swing and Intellij IDE.</p>\n\n<p>One of the requirements is to have Square, Hexagonal and Triangular shapes. Square shapes are easily, but to implement the HexagonalGrid i wrote a custom Hexagonal Button extending JButton.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fVfSb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fVfSb.png\" alt=\"Result of trying to render the Grid\"></a></p>\n\n<p>However, when trying to render a Grid i get this result. I don't know what's wrong.</p>\n\n<p>I got the Hexagonal Math from <a href=\"https://www.redblobgames.com/grids/hexagons/#angles\" rel=\"nofollow noreferrer\">this website</a> which is aparently regarded online as the HexGrid Bible. </p>\n\n<p>Here's the code of the Hexagonal Button and the Grid renderer.</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class HexagonButton extends JButton {\nprivate Shape hexagon;\nfloat size;\nfloat width, height;\n\npublic HexagonButton(float centerX, float centerY, float size){\n    Polygon p = new Polygon();\n    this.size = size;\n    p.reset();\n    for(int i=0; i&lt;6; i++){\n        float angleDegrees = (60 * i) - 30;\n        float angleRad = ((float)Math.PI / 180.0f) * angleDegrees;\n\n        float x = centerX + (size * (float)Math.cos(angleRad));\n        float y = centerY + (size * (float)Math.sin(angleRad));\n\n        p.addPoint((int)x,(int)y);\n    }\n\n    width = (float)Math.sqrt(3) * size;\n    height = 2.0f * size;\n    hexagon = p;\n}\n\npublic void paintBorder(Graphics g){\n    ((Graphics2D)g).draw(hexagon);\n}\n\npublic void paintComponent(Graphics g){\n    ((Graphics2D)g).draw(hexagon);\n}\n\n@Override\npublic Dimension getPreferredSize(){\n\n    return new Dimension((int)width, (int)height);\n}\n@Override\npublic Dimension getMinimumSize(){\n    return new Dimension((int)width, (int)height);\n}\n@Override\npublic Dimension getMaximumSize(){\n    return new Dimension((int)width, (int)height);\n}\n\n\n@Override\npublic boolean contains(int x, int y){\n    return hexagon.contains(x,y);\n}\n}\n\nPublic class Main extends JFrame implements MouseListener {\n\n/**\n * Create the GUI and show it.  For thread safety,\n * this method should be invoked from the\n * event-dispatching thread.\n */\npublic static void main(String[] args) {\n// write your code here\n    //Schedule a job for the event-dispatching thread:\n    //creating and showing this application's GUI.\n    Main main = new Main();\n    main.pack();\n    main.setVisible(true);\n    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n}\n\nMain(){\n    super();\n    int rows = 3;\n    int cols = 3;\n    setLayout(new GridLayout(rows,cols,-1,-1));\n    //grid.setBorder(BorderFactory.createEmptyBorder(2,2,2,2));\n    this.setMinimumSize(new Dimension(173 * rows, 200 * cols+2));\n\n    for(int i=0;i&lt;rows;i++){\n        for(int j=0;j&lt;cols;j++){\n            float size = 25;\n            int width = (int)(size * Math.sqrt(3));\n            int height = (int)(size * 2.0f);\n            int xOffset = (width / 2);\n            if(i%2==1){\n                //Offset odd rows to the right\n                xOffset += (width/2);\n            }\n            int yOffset = height / 2;\n            int centerX = xOffset + j*width;\n            int centerY = yOffset + i*height;\n            HexagonButton hexagon = new HexagonButton(centerX, centerY, size);\n            hexagon.addMouseListener(this);\n            hexagon.setMinimumSize(hexagon.getMinimumSize());\n            hexagon.setMaximumSize(hexagon.getMaximumSize());\n            hexagon.setPreferredSize(hexagon.getPreferredSize());\n            //hexagon.setVerticalAlignment(SwingConstants.CENTER);\n            hexagon.setHorizontalAlignment(SwingConstants.CENTER);\n            add(hexagon);\n        }\n\n    }\n\n}\n}\n</code></pre>\n\n<p>Does anyone know where the problem might be? I'm still pretty new to Swing</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":5,"creation_date":1686345379,"post_id":76443660,"comment_id":134791363,"body_markdown":"What is the name of the file that contains your Java source code?  The error is pretty straight forward - `class LotteryProgram is public, should be declared in a file named LotteryProgram.java`.","body":"What is the name of the file that contains your Java source code?  The error is pretty straight forward - <code>class LotteryProgram is public, should be declared in a file named LotteryProgram.java</code>."},{"owner":{"account_id":2777648,"reputation":15718,"user_id":3684265,"accept_rate":40,"display_name":"imvain2"},"score":3,"creation_date":1686345443,"post_id":76443660,"comment_id":134791371,"body_markdown":"I&#39;m going to retag this as this is java not javascript as despite the name they are quite different.","body":"I&#39;m going to retag this as this is java not javascript as despite the name they are quite different."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1686352221,"post_id":76443660,"comment_id":134792075,"body_markdown":"Either rename `Main.java` to `LotteryProgram.java` OR rename the  `LotteryProgram` class to `Main`, for example: `public class Main {` instead of: `public class LotteryProgram {`.","body":"Either rename <code>Main.java</code> to <code>LotteryProgram.java</code> OR rename the  <code>LotteryProgram</code> class to <code>Main</code>, for example: <code>public class Main {</code> instead of: <code>public class LotteryProgram {</code>."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686347576,"creation_date":1686347576,"answer_id":76443847,"question_id":76443660,"body_markdown":"Make sure the file name is the same as the _class_ name, case matters.\r\n\r\nSo, it _should_ be, &quot;LotteryProgram.java&quot;.","title":"Java lottery using arrays and methods","body":"<p>Make sure the file name is the same as the <em>class</em> name, case matters.</p>\n<p>So, it <em>should</em> be, &quot;LotteryProgram.java&quot;.</p>\n"}],"owner":{"account_id":11040675,"reputation":7,"user_id":8108970,"display_name":"Top_Cat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1686351905,"answer_count":1,"score":-2,"last_activity_date":1686347576,"creation_date":1686345167,"question_id":76443660,"body_markdown":"I am getting an error on the file name. it says\r\n\r\n    Main.java:5: error: class LotteryProgram is public, should be declared in a file named LotteryProgram.java\r\n    public class LotteryProgram {\r\n           ^\r\n    1 error\r\n\r\nI looked over the code several time and used different compilers and the program worked in one but not the other. Is there actually something wrong with the program? Or do some of the compilers work different? \r\n```\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\nimport java.util.Scanner;\r\n\r\npublic class LotteryProgram {\r\n    public static void main(String[] args) {\r\n        int[] lotteryNumbers = generateLotteryNumbers();\r\n        int[] userNumbers = getUserNumbers();\r\n        int matches = countMatches(lotteryNumbers, userNumbers);\r\n\r\n        System.out.println(&quot;Lottery Numbers: &quot; + Arrays.toString(lotteryNumbers));\r\n        System.out.println(&quot;User Numbers: &quot; + Arrays.toString(userNumbers));\r\n        System.out.println(&quot;Matches: &quot; + matches);\r\n    }\r\n\r\n    public static int[] generateLotteryNumbers() {\r\n        int[] lotteryNumbers = new int[5];\r\n        Random random = new Random();\r\n\r\n        for (int i = 0; i &lt; lotteryNumbers.length; i++) {\r\n            lotteryNumbers[i] = random.nextInt(10); // Generate random numbers between 0 and 9\r\n        }\r\n\r\n        return lotteryNumbers;\r\n    }\r\n\r\n    public static int[] getUserNumbers() {\r\n        int[] userNumbers = new int[5];\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter your lottery numbers (between 0 and 9):&quot;);\r\n\r\n        for (int i = 0; i &lt; userNumbers.length; i++) {\r\n            System.out.print(&quot;Number &quot; + (i + 1) + &quot;: &quot;);\r\n            userNumbers[i] = scanner.nextInt();\r\n        }\r\n\r\n        return userNumbers;\r\n    }\r\n\r\n    public static int countMatches(int[] lotteryNumbers, int[] userNumbers) {\r\n        int count = 0;\r\n\r\n        for (int i = 0; i &lt; lotteryNumbers.length; i++) {\r\n            if (lotteryNumbers[i] == userNumbers[i]) {\r\n                count++;\r\n            }\r\n        }\r\n\r\n        return count;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThe output should have looked someting like this. \r\n```\r\njava -cp /tmp/bViay8YpR4 LotteryProgram\r\nEnter your lottery numbers (between 0 and 9):\r\nNumber 1: 2\r\nNumber 2: 8\r\nNumber 3: 5\r\nNumber 4: 6\r\nNumber 5: 7\r\nLottery Numbers: [6, 6, 0, 0, 5]\r\nUser Numbers: [2, 8, 5, 6, 7]\r\nMatches: 0\r\n```\r\n","title":"Java lottery using arrays and methods","body":"<p>I am getting an error on the file name. it says</p>\n<pre><code>Main.java:5: error: class LotteryProgram is public, should be declared in a file named LotteryProgram.java\npublic class LotteryProgram {\n       ^\n1 error\n</code></pre>\n<p>I looked over the code several time and used different compilers and the program worked in one but not the other. Is there actually something wrong with the program? Or do some of the compilers work different?</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Random;\nimport java.util.Scanner;\n\npublic class LotteryProgram {\n    public static void main(String[] args) {\n        int[] lotteryNumbers = generateLotteryNumbers();\n        int[] userNumbers = getUserNumbers();\n        int matches = countMatches(lotteryNumbers, userNumbers);\n\n        System.out.println(&quot;Lottery Numbers: &quot; + Arrays.toString(lotteryNumbers));\n        System.out.println(&quot;User Numbers: &quot; + Arrays.toString(userNumbers));\n        System.out.println(&quot;Matches: &quot; + matches);\n    }\n\n    public static int[] generateLotteryNumbers() {\n        int[] lotteryNumbers = new int[5];\n        Random random = new Random();\n\n        for (int i = 0; i &lt; lotteryNumbers.length; i++) {\n            lotteryNumbers[i] = random.nextInt(10); // Generate random numbers between 0 and 9\n        }\n\n        return lotteryNumbers;\n    }\n\n    public static int[] getUserNumbers() {\n        int[] userNumbers = new int[5];\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Enter your lottery numbers (between 0 and 9):&quot;);\n\n        for (int i = 0; i &lt; userNumbers.length; i++) {\n            System.out.print(&quot;Number &quot; + (i + 1) + &quot;: &quot;);\n            userNumbers[i] = scanner.nextInt();\n        }\n\n        return userNumbers;\n    }\n\n    public static int countMatches(int[] lotteryNumbers, int[] userNumbers) {\n        int count = 0;\n\n        for (int i = 0; i &lt; lotteryNumbers.length; i++) {\n            if (lotteryNumbers[i] == userNumbers[i]) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n}\n\n</code></pre>\n<p>The output should have looked someting like this.</p>\n<pre><code>java -cp /tmp/bViay8YpR4 LotteryProgram\nEnter your lottery numbers (between 0 and 9):\nNumber 1: 2\nNumber 2: 8\nNumber 3: 5\nNumber 4: 6\nNumber 5: 7\nLottery Numbers: [6, 6, 0, 0, 5]\nUser Numbers: [2, 8, 5, 6, 7]\nMatches: 0\n</code></pre>\n"},{"tags":["java","amazon-web-services","authentication","quarkus","aws-iot"],"answers":[{"tags":[],"owner":{"account_id":3803644,"reputation":1290,"user_id":3156607,"display_name":"Dennis Kieselhorst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680585548,"creation_date":1680585548,"answer_id":75925746,"question_id":75896273,"body_markdown":"Do you plan to use X509 certificate-based authentication or leveraging IAM access key and secret (see [Client authentication][1])?\r\n\r\nI recommend to leverage an existing SDK instead of building on your own. E.g. you can add this library as a Maven dependency\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;software.amazon.awssdk.iotdevicesdk&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aws-iot-device-sdk&lt;/artifactId&gt;\r\n      &lt;version&gt;1.11.5&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand directly use the classes. See [https://github.com/aws/aws-iot-device-sdk-java-v2][2] for samples.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/iot/latest/developerguide/client-authentication.html\r\n  [2]: https://github.com/aws/aws-iot-device-sdk-java-v2","title":"REST request to AWS from Quarkus backend","body":"<p>Do you plan to use X509 certificate-based authentication or leveraging IAM access key and secret (see <a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/client-authentication.html\" rel=\"nofollow noreferrer\">Client authentication</a>)?</p>\n<p>I recommend to leverage an existing SDK instead of building on your own. E.g. you can add this library as a Maven dependency</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;software.amazon.awssdk.iotdevicesdk&lt;/groupId&gt;\n  &lt;artifactId&gt;aws-iot-device-sdk&lt;/artifactId&gt;\n  &lt;version&gt;1.11.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and directly use the classes. See <a href=\"https://github.com/aws/aws-iot-device-sdk-java-v2\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-iot-device-sdk-java-v2</a> for samples.</p>\n"},{"tags":[],"owner":{"account_id":18994381,"reputation":146,"user_id":13862869,"display_name":"Kavishka Madhushan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686346344,"creation_date":1686344943,"answer_id":76443639,"question_id":75896273,"body_markdown":"I connected with AWS Iot Core Device Shadow Rest end point with AWS SignV4.\r\n\r\nhttps://github.com/kavishkamk/AWS-IoT-Core-REST-endpont-with-AWSV4","title":"REST request to AWS from Quarkus backend","body":"<p>I connected with AWS Iot Core Device Shadow Rest end point with AWS SignV4.</p>\n<p><a href=\"https://github.com/kavishkamk/AWS-IoT-Core-REST-endpont-with-AWSV4\" rel=\"nofollow noreferrer\">https://github.com/kavishkamk/AWS-IoT-Core-REST-endpont-with-AWSV4</a></p>\n"}],"owner":{"account_id":14852201,"reputation":13,"user_id":10725761,"display_name":"Vinura Jayalath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76443639,"answer_count":2,"score":0,"last_activity_date":1686346344,"creation_date":1680250417,"question_id":75896273,"body_markdown":"I have to send a HTTP request to AWS IoT core to update device shadow. This request should send through Quarkus backend. **The current problem is how to Append Authentication headers to the request**. Currently there is a authentication problem with this code. \r\n\r\nThis is the Class used to send the request\r\n\r\n```\r\nimport io.smallrye.mutiny.Uni;\r\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\r\n\r\nimport javax.json.JsonObject;\r\nimport javax.ws.rs.*;\r\nimport javax.ws.rs.core.MediaType;\r\n\r\n@Path(&quot;/things/abc&quot;)\r\n@Produces(MediaType.APPLICATION_JSON)\r\n@RegisterRestClient(baseUri = &quot;https://a144gttuytyty10wv7-ats.iot.us-east-1.amazonaws.com&quot;)\r\npublic interface OrganizationProxy {\r\n\r\n@GET\r\n@Path(&quot;/shadow?name=shadow-version-1&quot;)\r\nUni&lt;JsonObject&gt; getOrg();\r\n\r\n}\r\n```\r\n\r\nThis is the client class for test sample get request\r\n\r\n```\r\nimport io.smallrye.mutiny.Uni;\r\nimport org.eclipse.microprofile.rest.client.inject.RestClient;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\nimport javax.inject.Inject;\r\nimport javax.json.JsonObject;\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.core.MediaType;\r\n\r\n@Path(&quot;/organizations&quot;)\r\n@ApplicationScoped\r\npublic class OrganizationResource {\r\n\r\n\r\n@Inject\r\n@RestClient\r\nOrganizationProxy organizationProxy;\r\n\r\n\r\n@GET\r\n@Produces(MediaType.APPLICATION_JSON)\r\npublic Uni&lt;JsonObject&gt; get() {\r\nreturn organizationProxy.getOrg();\r\n}\r\n\r\n}\r\n```\r\n\r\nI already try to append the Authentication headers. But I didn&#39;t found a way to how to do this in the program.  My final goal is to send a request to this AWS IoT core device API and get a response.  ","title":"REST request to AWS from Quarkus backend","body":"<p>I have to send a HTTP request to AWS IoT core to update device shadow. This request should send through Quarkus backend. <strong>The current problem is how to Append Authentication headers to the request</strong>. Currently there is a authentication problem with this code.</p>\n<p>This is the Class used to send the request</p>\n<pre><code>import io.smallrye.mutiny.Uni;\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\n\nimport javax.json.JsonObject;\nimport javax.ws.rs.*;\nimport javax.ws.rs.core.MediaType;\n\n@Path(&quot;/things/abc&quot;)\n@Produces(MediaType.APPLICATION_JSON)\n@RegisterRestClient(baseUri = &quot;https://a144gttuytyty10wv7-ats.iot.us-east-1.amazonaws.com&quot;)\npublic interface OrganizationProxy {\n\n@GET\n@Path(&quot;/shadow?name=shadow-version-1&quot;)\nUni&lt;JsonObject&gt; getOrg();\n\n}\n</code></pre>\n<p>This is the client class for test sample get request</p>\n<pre><code>import io.smallrye.mutiny.Uni;\nimport org.eclipse.microprofile.rest.client.inject.RestClient;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport javax.json.JsonObject;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.MediaType;\n\n@Path(&quot;/organizations&quot;)\n@ApplicationScoped\npublic class OrganizationResource {\n\n\n@Inject\n@RestClient\nOrganizationProxy organizationProxy;\n\n\n@GET\n@Produces(MediaType.APPLICATION_JSON)\npublic Uni&lt;JsonObject&gt; get() {\nreturn organizationProxy.getOrg();\n}\n\n}\n</code></pre>\n<p>I already try to append the Authentication headers. But I didn't found a way to how to do this in the program.  My final goal is to send a request to this AWS IoT core device API and get a response.</p>\n"},{"tags":["java","android","android-studio","androidx"],"comments":[{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1681092689,"post_id":75973388,"comment_id":133998149,"body_markdown":"Try File &gt; Invalidate Caches.","body":"Try File &gt; Invalidate Caches."},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1681169366,"post_id":75973388,"comment_id":134010236,"body_markdown":"@WaisKamal: Thanks Wais for your comment. It helped but unforunatley this problem occurs quite often. So I have to invalidate the caches every day. Do you know why this is happening and how to tackle this issue","body":"@WaisKamal: Thanks Wais for your comment. It helped but unforunatley this problem occurs quite often. So I have to invalidate the caches every day. Do you know why this is happening and how to tackle this issue"},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1681222046,"post_id":75973388,"comment_id":134019287,"body_markdown":"I am not sure what can be done because I never encountered something like this before. Are you on the latest version of Android Studio?","body":"I am not sure what can be done because I never encountered something like this before. Are you on the latest version of Android Studio?"},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1681298316,"post_id":75973388,"comment_id":134033053,"body_markdown":"@WaisKamal: Yes, I use the latest version of Android Studio Electric Eel. Maybe this is the problem, because before that version it was working properly. Maybe there is even a bug in Electric Eel because I found it to be very unstable.","body":"@WaisKamal: Yes, I use the latest version of Android Studio Electric Eel. Maybe this is the problem, because before that version it was working properly. Maybe there is even a bug in Electric Eel because I found it to be very unstable."},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1681713089,"post_id":75973388,"comment_id":134094791,"body_markdown":"@WaisKamal: Thanks Wais for your comment. Any comment on my last comment? I still get this problem every time I start Android Studio Electric Eel. The striking aspect is that the errors always refer to the AndroidX libraries. So there might be something wrong with them. Do you have any idea as to why this is happening? I&#39;ll appreciate every further comment from you.","body":"@WaisKamal: Thanks Wais for your comment. Any comment on my last comment? I still get this problem every time I start Android Studio Electric Eel. The striking aspect is that the errors always refer to the AndroidX libraries. So there might be something wrong with them. Do you have any idea as to why this is happening? I&#39;ll appreciate every further comment from you."},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1681873572,"post_id":75973388,"comment_id":134125594,"body_markdown":"Sorry for showing up late, I was so busy last week. When you start Android Studio, do you see a loading bar at the bottom telling that Android Studio is indexing your files?","body":"Sorry for showing up late, I was so busy last week. When you start Android Studio, do you see a loading bar at the bottom telling that Android Studio is indexing your files?"},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1681975986,"post_id":75973388,"comment_id":134143841,"body_markdown":"@WaisKamal: Thanks Wais for your comment. Yes, Android Studio was indexing my files all the time. I will now delete Android Studio and reinstall it. Maybe something was broken with the installation","body":"@WaisKamal: Thanks Wais for your comment. Yes, Android Studio was indexing my files all the time. I will now delete Android Studio and reinstall it. Maybe something was broken with the installation"},{"owner":{"account_id":8908789,"reputation":5958,"user_id":6649786,"accept_rate":100,"display_name":"Wais Kamal"},"score":0,"creation_date":1681993733,"post_id":75973388,"comment_id":134147853,"body_markdown":"If the issue persists after reinstalling, I recommend you [file a bug report](https://developer.android.com/studio/report-bugs).","body":"If the issue persists after reinstalling, I recommend you <a href=\"https://developer.android.com/studio/report-bugs\" rel=\"nofollow noreferrer\">file a bug report</a>."},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1682668117,"post_id":75973388,"comment_id":134254945,"body_markdown":"@WaisKamal: I am using Android Studio now on an other notebook and the problem still persists. I always have to invalidate the cache after every start of android studio, otherwise the problem occurs with the AndroidX elements.","body":"@WaisKamal: I am using Android Studio now on an other notebook and the problem still persists. I always have to invalidate the cache after every start of android studio, otherwise the problem occurs with the AndroidX elements."},{"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"score":0,"creation_date":1686214620,"post_id":75973388,"comment_id":134769424,"body_markdown":"@WaisKamal: I still have that problem even on a new computer. Any further comments from you are highly appreciated","body":"@WaisKamal: I still have that problem even on a new computer. Any further comments from you are highly appreciated"}],"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686344849,"creation_date":1681082951,"question_id":75973388,"body_markdown":"I have a really strange problem. I have been using multiple Java classes with AndroidX for more than 1 year without any problems. Now all of a sudden, I get many error of the form:\r\n\r\n    import androidx.constraintlayout.widget.ConstraintLayout; -- &gt; Cannot resolve symbol &#39;constraintlayout&#39;\r\n    import androidx.fragment.app.Fragment; -- &gt; Cannot resolve symbol &#39;app&#39;\r\n\r\nHere is a screenshot from Android Studio\r\n[![enter image description here][1]][1]\r\n\r\nAnd here is the whole code:\r\n\r\n    package com.example.game;\r\n    \r\n    \r\n    \r\n    import android.content.pm.ActivityInfo;\r\n    import android.graphics.Point;\r\n    import android.os.Bundle;\r\n    import android.os.CountDownTimer;\r\n    import android.os.Handler;\r\n    import android.util.Log;\r\n    import android.view.Display;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.view.WindowManager;\r\n    \r\n    import androidx.constraintlayout.widget.ConstraintLayout;\r\n    import androidx.constraintlayout.widget.ConstraintSet;\r\n    import androidx.core.content.ContextCompat;\r\n    import androidx.fragment.app.Fragment;\r\n    \r\n    import com.example.game.databinding.FragmentTestBinding;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    public class FR_Test extends Fragment implements View.OnClickListener {\r\n    \r\n    \r\n        /*\r\n        Game variables\r\n         */\r\n    \r\n        public static final int DELAY_IN_MILLIS = 100;\r\n        ArrayList&lt;View_Game_Event_Rectangle&gt; arrayList_GameEventRectangles;\r\n        private int currentTimeSlot;\r\n        private boolean gameIsRunning;\r\n        private Handler handler = new Handler();\r\n        private int timeslotsEventElementUntilTheMiddleOfTheScreen_Level1 = (int)(5.0 * (1000.0/DELAY_IN_MILLIS));\r\n        private int numberOfMillisecondsUntilTheMiddleOfTheScreen_Level1 = 5000;\r\n    \r\n        //Fix parameters of the UI elements\r\n        private float horizontalPercentageOfScoreRectangle_End = 0.491f;\r\n        private float horizontalPercentageOfScoreRectangle_Start = 0.567f;\r\n        private float verticalBiasOfEventElementToBeInTheLine = 0.049f;\r\n        private float percentageHeightOfEventElement = 0.071f;\r\n    \r\n    \r\n        int widthDisplay;\r\n        int heightDisplay;\r\n        int helpCounterRun =0;\r\n        int helpCounterUpdateScreen =0;\r\n        int helpCounterCountDownTime =0;\r\n    \r\n        private FragmentTestBinding binding;\r\n        private ConstraintLayout constraintLayout;\r\n        ConstraintSet constraintSet ;\r\n    \r\n        //Variables for the single view event\r\n        View_Game_Event_Rectangle[] viewEvent;\r\n    \r\n        private boolean fragmentViewHasBeenCreated = false;\r\n        private CountDownTimer cdt;\r\n        private  final long DURATION = 900000L;\r\n        private  final long DELAY_COUNT_DOWN_TIMER = 100;\r\n    \r\n        private int numberOfTimeSlotsUntilTheEndOfScreen = (int)(numberOfMillisecondsUntilTheMiddleOfTheScreen_Level1 * 2/(DELAY_COUNT_DOWN_TIMER));\r\n        private int currentLevel;\r\n        public FR_Test() {\r\n            // Required empty public constructor\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            arrayList_GameEventRectangles = new ArrayList&lt;View_Game_Event_Rectangle&gt;();\r\n            currentLevel = 1;\r\n        }\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            binding = FragmentTestBinding.inflate(inflater, container, false);\r\n    \r\n            WindowManager wm = (WindowManager) getActivity().getWindowManager();\r\n            Display display = wm.getDefaultDisplay();\r\n            Point size = new Point();\r\n            display.getSize(size);\r\n            widthDisplay = size.x;\r\n            heightDisplay = size.y;\r\n            container.getContext();\r\n            constraintLayout= binding.constraintLayout;\r\n            fragmentViewHasBeenCreated = true;\r\n            getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\r\n            constraintLayout = binding.constraintLayout;\r\n            constraintSet = new ConstraintSet();\r\n            startGame();\r\n            return binding.getRoot();\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void onClick(View view) {\r\n    \r\n        }\r\n    \r\n    \r\n        public void startGame () {\r\n            gameIsRunning = true;\r\n            Log.e(&quot;LogTag_El&quot;, &quot;-------Start Game------&quot; );\r\n    \r\n            //Create rectangle-element that should be animated from the right to the left on the screen\r\n            arrayList_GameEventRectangles.add(new View_Game_Event_Rectangle(getActivity(), &quot;Bulb Rectangle&quot;, 100, 20));\r\n            countDownTime();\r\n        }\r\n    \r\n    \r\n        private void updateScreen() {\r\n    \r\n            for (int currentElement =0; currentElement &lt;arrayList_GameEventRectangles.size(); currentElement++) {\r\n    \r\n                //Create view and set\r\n                if (currentTimeSlot == arrayList_GameEventRectangles.get(currentElement).getStartingTimeSlot() - 50) {\r\n    \r\n                    arrayList_GameEventRectangles.get(currentElement).setActive(true);\r\n    \r\n    \r\n                    //Set the parameters and the backgrund of the view element\r\n                    arrayList_GameEventRectangles.get(currentElement).setLayoutParams(new ViewGroup.LayoutParams(0, 0));\r\n    \r\n                    if(arrayList_GameEventRectangles.get(currentElement).getEventType().equals(&quot;Bulb Rectangle&quot;)) {\r\n                        arrayList_GameEventRectangles.get(currentElement).setBackground(ContextCompat.getDrawable(getActivity(),R.drawable.game_event_rectangle_bulb_1).mutate());\r\n                    }\r\n    \r\n                    arrayList_GameEventRectangles.get(currentElement).setId(View.generateViewId());\r\n    \r\n                    //Make the view invisible (before it&#39;s appearence time)\r\n                    arrayList_GameEventRectangles.get(currentElement).getBackground().setAlpha(0);\r\n    \r\n                    // Set the ConstraintLayout programatically for the view\r\n                    constraintLayout.addView(arrayList_GameEventRectangles.get(currentElement));\r\n                    constraintSet.clone(constraintLayout);\r\n                    constraintSet.constrainPercentHeight(arrayList_GameEventRectangles.get(currentElement).getId(), percentageHeightOfEventElement);\r\n    \r\n                    float widthConstrainPercentage_element1 = (float)(arrayList_GameEventRectangles.get(currentElement).getDuration() / 100.0);\r\n                    float duration = arrayList_GameEventRectangles.get(currentElement).getDuration();\r\n    \r\n                    constraintSet.constrainPercentWidth(arrayList_GameEventRectangles.get(currentElement).getId(), widthConstrainPercentage_element1);\r\n                    constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.BOTTOM, ConstraintSet.PARENT_ID,ConstraintSet.BOTTOM,0);\r\n                    constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.TOP,ConstraintSet.PARENT_ID ,ConstraintSet.TOP,0);\r\n                    constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.LEFT,ConstraintSet.PARENT_ID ,ConstraintSet.LEFT,0);\r\n                    constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.RIGHT,ConstraintSet.PARENT_ID ,ConstraintSet.RIGHT,0);\r\n    \r\n                    float horizontalBias = 1.0f ;\r\n                    constraintSet.setHorizontalBias(arrayList_GameEventRectangles.get(currentElement).getId(), horizontalBias);\r\n                    constraintSet.setVerticalBias(arrayList_GameEventRectangles.get(currentElement).getId(), verticalBiasOfEventElementToBeInTheLine);\r\n                    constraintSet.applyTo(constraintLayout);\r\n    \r\n                }\r\n    \r\n    \r\n                //Shift the view to the right border of the display\r\n                if (currentTimeSlot == arrayList_GameEventRectangles.get(currentElement).getStartingTimeSlot() - 40) {\r\n                    arrayList_GameEventRectangles.get(currentElement).setTranslationX(arrayList_GameEventRectangles.get(currentElement).getWidth());\r\n                }\r\n    \r\n    \r\n                //Animate view element\r\n                if (currentTimeSlot ==arrayList_GameEventRectangles.get(currentElement).getStartingTimeSlot()) {\r\n                    arrayList_GameEventRectangles.get(currentElement).getBackground().setAlpha(255);\r\n                    long durationForTheAnimation = (long)(numberOfMillisecondsUntilTheMiddleOfTheScreen_Level1 * 1);\r\n    \r\n                    arrayList_GameEventRectangles.get(currentElement).animate().setDuration(durationForTheAnimation).translationX(widthDisplay*(-1)).start();\r\n    \r\n                }\r\n                helpCounterUpdateScreen++;\r\n                checkPositionsOfActiveElements();\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n        private void countDownTime(){\r\n    \r\n            cdt = new CountDownTimer(DURATION, DELAY_COUNT_DOWN_TIMER) {\r\n                boolean delay = true;\r\n                public void onTick(long millisUntilFinished) {\r\n                    if(delay) {\r\n                        delay = false;\r\n                    } else {\r\n    \r\n                        helpCounterCountDownTime++;\r\n                        currentTimeSlot++;\r\n    \r\n                        updateScreen();\r\n                        delay = true;\r\n                    }\r\n                }\r\n                public void onFinish() {\r\n                    updateScreen();\r\n                }\r\n            }.start();\r\n    \r\n        }\r\n    \r\n        public void checkPositionsOfActiveElements () {\r\n            for (int currentElement =0; currentElement &lt;arrayList_GameEventRectangles.size(); currentElement++) {\r\n                //Check if the view is still running\r\n                if (arrayList_GameEventRectangles.get(currentElement).isActive() == true &amp;&amp; currentElement==0) {\r\n                    Log.e(&quot;LogTag_FGa_CP&quot;, &quot;currentTimeSlot: &quot; + currentTimeSlot);\r\n                    Log.e(&quot;LogTag_FGa_CP&quot;, &quot;currentElement.getX(): &quot; + arrayList_GameEventRectangles.get(currentElement).getX());\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroyView() {\r\n            super.onDestroyView();\r\n    \r\n            // Reset your variable to false\r\n            fragmentViewHasBeenCreated = false;\r\n    \r\n            // And clean up any postDelayed callbacks that are waiting to fire\r\n            cdt.cancel();\r\n            handler.removeCallbacksAndMessages(null);\r\n        }\r\n    }\r\n\r\nSo there is a problem with importing the elements from AndroidX as you can see that the imports are grey. However, the very strange aspect is, that the app can be build, compiled and started without any problems in the Android Studio Emulator (as it had been the case during the last months). Can you tell me, why I get these error messages, and why the app still starts? I have to invalidate the caches after each start of Android Studio. This problem happens always with the classes of AndroidX but sometimes also with other classes.\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iDqmN.png","title":"Android Studio Problem: Caches have to be invalidated after every start","body":"<p>I have a really strange problem. I have been using multiple Java classes with AndroidX for more than 1 year without any problems. Now all of a sudden, I get many error of the form:</p>\n<pre><code>import androidx.constraintlayout.widget.ConstraintLayout; -- &gt; Cannot resolve symbol 'constraintlayout'\nimport androidx.fragment.app.Fragment; -- &gt; Cannot resolve symbol 'app'\n</code></pre>\n<p>Here is a screenshot from Android Studio\n<a href=\"https://i.stack.imgur.com/iDqmN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iDqmN.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is the whole code:</p>\n<pre><code>package com.example.game;\n\n\n\nimport android.content.pm.ActivityInfo;\nimport android.graphics.Point;\nimport android.os.Bundle;\nimport android.os.CountDownTimer;\nimport android.os.Handler;\nimport android.util.Log;\nimport android.view.Display;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.WindowManager;\n\nimport androidx.constraintlayout.widget.ConstraintLayout;\nimport androidx.constraintlayout.widget.ConstraintSet;\nimport androidx.core.content.ContextCompat;\nimport androidx.fragment.app.Fragment;\n\nimport com.example.game.databinding.FragmentTestBinding;\n\nimport java.util.ArrayList;\n\npublic class FR_Test extends Fragment implements View.OnClickListener {\n\n\n    /*\n    Game variables\n     */\n\n    public static final int DELAY_IN_MILLIS = 100;\n    ArrayList&lt;View_Game_Event_Rectangle&gt; arrayList_GameEventRectangles;\n    private int currentTimeSlot;\n    private boolean gameIsRunning;\n    private Handler handler = new Handler();\n    private int timeslotsEventElementUntilTheMiddleOfTheScreen_Level1 = (int)(5.0 * (1000.0/DELAY_IN_MILLIS));\n    private int numberOfMillisecondsUntilTheMiddleOfTheScreen_Level1 = 5000;\n\n    //Fix parameters of the UI elements\n    private float horizontalPercentageOfScoreRectangle_End = 0.491f;\n    private float horizontalPercentageOfScoreRectangle_Start = 0.567f;\n    private float verticalBiasOfEventElementToBeInTheLine = 0.049f;\n    private float percentageHeightOfEventElement = 0.071f;\n\n\n    int widthDisplay;\n    int heightDisplay;\n    int helpCounterRun =0;\n    int helpCounterUpdateScreen =0;\n    int helpCounterCountDownTime =0;\n\n    private FragmentTestBinding binding;\n    private ConstraintLayout constraintLayout;\n    ConstraintSet constraintSet ;\n\n    //Variables for the single view event\n    View_Game_Event_Rectangle[] viewEvent;\n\n    private boolean fragmentViewHasBeenCreated = false;\n    private CountDownTimer cdt;\n    private  final long DURATION = 900000L;\n    private  final long DELAY_COUNT_DOWN_TIMER = 100;\n\n    private int numberOfTimeSlotsUntilTheEndOfScreen = (int)(numberOfMillisecondsUntilTheMiddleOfTheScreen_Level1 * 2/(DELAY_COUNT_DOWN_TIMER));\n    private int currentLevel;\n    public FR_Test() {\n        // Required empty public constructor\n    }\n\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        arrayList_GameEventRectangles = new ArrayList&lt;View_Game_Event_Rectangle&gt;();\n        currentLevel = 1;\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        binding = FragmentTestBinding.inflate(inflater, container, false);\n\n        WindowManager wm = (WindowManager) getActivity().getWindowManager();\n        Display display = wm.getDefaultDisplay();\n        Point size = new Point();\n        display.getSize(size);\n        widthDisplay = size.x;\n        heightDisplay = size.y;\n        container.getContext();\n        constraintLayout= binding.constraintLayout;\n        fragmentViewHasBeenCreated = true;\n        getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n        constraintLayout = binding.constraintLayout;\n        constraintSet = new ConstraintSet();\n        startGame();\n        return binding.getRoot();\n    }\n\n\n    @Override\n    public void onClick(View view) {\n\n    }\n\n\n    public void startGame () {\n        gameIsRunning = true;\n        Log.e(&quot;LogTag_El&quot;, &quot;-------Start Game------&quot; );\n\n        //Create rectangle-element that should be animated from the right to the left on the screen\n        arrayList_GameEventRectangles.add(new View_Game_Event_Rectangle(getActivity(), &quot;Bulb Rectangle&quot;, 100, 20));\n        countDownTime();\n    }\n\n\n    private void updateScreen() {\n\n        for (int currentElement =0; currentElement &lt;arrayList_GameEventRectangles.size(); currentElement++) {\n\n            //Create view and set\n            if (currentTimeSlot == arrayList_GameEventRectangles.get(currentElement).getStartingTimeSlot() - 50) {\n\n                arrayList_GameEventRectangles.get(currentElement).setActive(true);\n\n\n                //Set the parameters and the backgrund of the view element\n                arrayList_GameEventRectangles.get(currentElement).setLayoutParams(new ViewGroup.LayoutParams(0, 0));\n\n                if(arrayList_GameEventRectangles.get(currentElement).getEventType().equals(&quot;Bulb Rectangle&quot;)) {\n                    arrayList_GameEventRectangles.get(currentElement).setBackground(ContextCompat.getDrawable(getActivity(),R.drawable.game_event_rectangle_bulb_1).mutate());\n                }\n\n                arrayList_GameEventRectangles.get(currentElement).setId(View.generateViewId());\n\n                //Make the view invisible (before it's appearence time)\n                arrayList_GameEventRectangles.get(currentElement).getBackground().setAlpha(0);\n\n                // Set the ConstraintLayout programatically for the view\n                constraintLayout.addView(arrayList_GameEventRectangles.get(currentElement));\n                constraintSet.clone(constraintLayout);\n                constraintSet.constrainPercentHeight(arrayList_GameEventRectangles.get(currentElement).getId(), percentageHeightOfEventElement);\n\n                float widthConstrainPercentage_element1 = (float)(arrayList_GameEventRectangles.get(currentElement).getDuration() / 100.0);\n                float duration = arrayList_GameEventRectangles.get(currentElement).getDuration();\n\n                constraintSet.constrainPercentWidth(arrayList_GameEventRectangles.get(currentElement).getId(), widthConstrainPercentage_element1);\n                constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.BOTTOM, ConstraintSet.PARENT_ID,ConstraintSet.BOTTOM,0);\n                constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.TOP,ConstraintSet.PARENT_ID ,ConstraintSet.TOP,0);\n                constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.LEFT,ConstraintSet.PARENT_ID ,ConstraintSet.LEFT,0);\n                constraintSet.connect(arrayList_GameEventRectangles.get(currentElement).getId(),ConstraintSet.RIGHT,ConstraintSet.PARENT_ID ,ConstraintSet.RIGHT,0);\n\n                float horizontalBias = 1.0f ;\n                constraintSet.setHorizontalBias(arrayList_GameEventRectangles.get(currentElement).getId(), horizontalBias);\n                constraintSet.setVerticalBias(arrayList_GameEventRectangles.get(currentElement).getId(), verticalBiasOfEventElementToBeInTheLine);\n                constraintSet.applyTo(constraintLayout);\n\n            }\n\n\n            //Shift the view to the right border of the display\n            if (currentTimeSlot == arrayList_GameEventRectangles.get(currentElement).getStartingTimeSlot() - 40) {\n                arrayList_GameEventRectangles.get(currentElement).setTranslationX(arrayList_GameEventRectangles.get(currentElement).getWidth());\n            }\n\n\n            //Animate view element\n            if (currentTimeSlot ==arrayList_GameEventRectangles.get(currentElement).getStartingTimeSlot()) {\n                arrayList_GameEventRectangles.get(currentElement).getBackground().setAlpha(255);\n                long durationForTheAnimation = (long)(numberOfMillisecondsUntilTheMiddleOfTheScreen_Level1 * 1);\n\n                arrayList_GameEventRectangles.get(currentElement).animate().setDuration(durationForTheAnimation).translationX(widthDisplay*(-1)).start();\n\n            }\n            helpCounterUpdateScreen++;\n            checkPositionsOfActiveElements();\n\n        }\n\n    }\n\n    private void countDownTime(){\n\n        cdt = new CountDownTimer(DURATION, DELAY_COUNT_DOWN_TIMER) {\n            boolean delay = true;\n            public void onTick(long millisUntilFinished) {\n                if(delay) {\n                    delay = false;\n                } else {\n\n                    helpCounterCountDownTime++;\n                    currentTimeSlot++;\n\n                    updateScreen();\n                    delay = true;\n                }\n            }\n            public void onFinish() {\n                updateScreen();\n            }\n        }.start();\n\n    }\n\n    public void checkPositionsOfActiveElements () {\n        for (int currentElement =0; currentElement &lt;arrayList_GameEventRectangles.size(); currentElement++) {\n            //Check if the view is still running\n            if (arrayList_GameEventRectangles.get(currentElement).isActive() == true &amp;&amp; currentElement==0) {\n                Log.e(&quot;LogTag_FGa_CP&quot;, &quot;currentTimeSlot: &quot; + currentTimeSlot);\n                Log.e(&quot;LogTag_FGa_CP&quot;, &quot;currentElement.getX(): &quot; + arrayList_GameEventRectangles.get(currentElement).getX());\n            }\n        }\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n\n        // Reset your variable to false\n        fragmentViewHasBeenCreated = false;\n\n        // And clean up any postDelayed callbacks that are waiting to fire\n        cdt.cancel();\n        handler.removeCallbacksAndMessages(null);\n    }\n}\n</code></pre>\n<p>So there is a problem with importing the elements from AndroidX as you can see that the imports are grey. However, the very strange aspect is, that the app can be build, compiled and started without any problems in the Android Studio Emulator (as it had been the case during the last months). Can you tell me, why I get these error messages, and why the app still starts? I have to invalidate the caches after each start of Android Studio. This problem happens always with the classes of AndroidX but sometimes also with other classes.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1686387243,"post_id":76443193,"comment_id":134794223,"body_markdown":"If you understand Kotlin, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5) will help. Here is the corresponding [repo](https://github.com/alexmamo/RealtimeDatabase).","body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/RealtimeDatabase\" rel=\"nofollow noreferrer\">repo</a>."}],"answers":[{"tags":[],"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686339377,"creation_date":1686339377,"answer_id":76443218,"question_id":76443193,"body_markdown":"The short answer is: you can&#39;t (and you shouldn&#39;t).\r\n\r\nThe Firebase database callbacks are asynchronous and complete whenever data is available.  You have no guarantees if or when that happens.  The activity is going to render its UI as soon as it can, and will not wait for anything else to complete.  You should also never attempt to block Android callbacks, since doing so will cause your application to &quot;soft crash&quot; with an &quot;Application not responding&quot; error.\r\n\r\nIf you want to block your UI until a database query completes, you should write code to add some sort of spinner or wait screen that suggests the user should wait until the data is available, the update the UI with the results of the query.","title":"Why is onDataChange starts at the end?","body":"<p>The short answer is: you can't (and you shouldn't).</p>\n<p>The Firebase database callbacks are asynchronous and complete whenever data is available.  You have no guarantees if or when that happens.  The activity is going to render its UI as soon as it can, and will not wait for anything else to complete.  You should also never attempt to block Android callbacks, since doing so will cause your application to &quot;soft crash&quot; with an &quot;Application not responding&quot; error.</p>\n<p>If you want to block your UI until a database query completes, you should write code to add some sort of spinner or wait screen that suggests the user should wait until the data is available, the update the UI with the results of the query.</p>\n"}],"owner":{"account_id":28789265,"reputation":1,"user_id":22049122,"display_name":"kol9n"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686344480,"creation_date":1686339143,"question_id":76443193,"body_markdown":"The onDataChange method is always executed last, so the centuries list in other methods is empty. How to make `onDataChange` start before `onCreateView`? Offer your own solutions for the correct filling of the list. No idea how to implement it. Thank you in advance!\r\n\r\n# Fragment code\r\n\r\nHere I am filling the centuries list with data from firebase but for some reason it does not load as it should\r\n\r\n\r\n```\r\npublic class HomeStartFragment extends Fragment implements recyclerInterface {\r\n    private Context context;\r\n    private View view;\r\n    private RecyclerView rv;\r\n\r\n    private List&lt;Century&gt; centuries;\r\n    private List&lt;Article&gt; articles;\r\n    private CenturiesAdapter centuriesAdapter;\r\n    private ArticlesAdapter articlesAdapter;\r\n    private DatabaseReference  mDataBaseCentury, mDataBaseArticle;\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\r\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public static HomeStartFragment newInstance(String param1, String param2) {\r\n        HomeStartFragment fragment = new HomeStartFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        Log.i(&quot;MyTaggg&quot;, &quot;ONCREATE STARTED&quot;);\r\n        centuries = new ArrayList&lt;&gt;();\r\n        articles = new ArrayList&lt;&gt;();\r\n        mDataBaseCentury = FirebaseDatabase.getInstance(&quot;https://vitebsk-history-default-rtdb.europe-west1.firebasedatabase.app/&quot;).getReference(&quot;Century&quot;);\r\n        mDataBaseArticle = FirebaseDatabase.getInstance(&quot;https://vitebsk-history-default-rtdb.europe-west1.firebasedatabase.app/&quot;).getReference(&quot;Article&quot;);\r\n        Log.i(&quot;MyTaggg&quot;, &quot;ListSize in onCreate = &quot; + centuries.size());\r\n        getCenturiesFromDB();\r\n        getArticlesFromDB();\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n\r\n    }\r\n\r\n    private void getCenturiesFromDB(){\r\n        Log.i(&quot;MyTaggg&quot;, &quot;FUNC STARTED&quot;);\r\n        ValueEventListener valueEventListener = new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                Log.i(&quot;MyTaggg&quot;, &quot;ONDATACHANGE is working&quot;);\r\n                if(centuries.size()&gt;0){centuries.clear();}\r\n                for(DataSnapshot ds : snapshot.getChildren()){\r\n                    Century century = ds.getValue(Century.class);\r\n                    assert century !=null;\r\n                    centuries.add(century);\r\n                }\r\n\r\n                Log.i(&quot;MyTaggg&quot;,&quot;ListSize in func = &quot; + centuries.size());\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        };\r\n        mDataBaseCentury.addValueEventListener(valueEventListener);\r\n    }\r\n    private void getArticlesFromDB(){\r\n        ValueEventListener valueEventListener = new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(articles.size()&gt;0){articles.clear();}\r\n\r\n                for(DataSnapshot ds : snapshot.getChildren()){\r\n                    Article article = ds.getValue(Article.class);\r\n                    assert article != null;\r\n                    articles.add(article);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        };\r\n        mDataBaseArticle.addValueEventListener(valueEventListener);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        Log.i(&quot;MyTaggg&quot;, &quot;ONCREATEVIEW STARTED&quot;);\r\n        view = inflater.inflate(R.layout.century_view, container, false);\r\n        rv = view.findViewById(R.id.recCenturyView);\r\n        centuriesAdapter=new CenturiesAdapter(getContext(),centuries,articles,this);\r\n        articlesAdapter = new ArticlesAdapter(getContext(),articles,this);\r\n        rv.setAdapter(centuriesAdapter);\r\n        rv.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        Log.i(&quot;MyTaggg&quot;, &quot;ListSize in onCreateView = &quot; + centuries.size());\r\n        return view;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n**I don&#39;t know what else to write, stackoverflow won&#39;t let me post my question.**\r\n\r\n\r\nLog\r\n------------------------------\r\n```\r\n2023-06-09 20:20:50.404  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ONCREATE STARTED\r\n2023-06-09 20:20:50.466  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ListSize in onCreate = 0\r\n2023-06-09 20:20:50.466  1979-1979  MyTaggg       com.example.vitsebskhistory        I  FUNC STARTED\r\n2023-06-09 20:20:50.488  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ONCREATEVIEW STARTED\r\n2023-06-09 20:20:50.581  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ListSize in onCreateView = 0\r\n2023-06-09 20:20:51.606  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ONDATACHANGE STARTED\r\n2023-06-09 20:20:51.611  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ListSize in func = 8\r\n```\r\n","title":"Why is onDataChange starts at the end?","body":"<p>The onDataChange method is always executed last, so the centuries list in other methods is empty. How to make <code>onDataChange</code> start before <code>onCreateView</code>? Offer your own solutions for the correct filling of the list. No idea how to implement it. Thank you in advance!</p>\n<h1>Fragment code</h1>\n<p>Here I am filling the centuries list with data from firebase but for some reason it does not load as it should</p>\n<pre><code>public class HomeStartFragment extends Fragment implements recyclerInterface {\n    private Context context;\n    private View view;\n    private RecyclerView rv;\n\n    private List&lt;Century&gt; centuries;\n    private List&lt;Article&gt; articles;\n    private CenturiesAdapter centuriesAdapter;\n    private ArticlesAdapter articlesAdapter;\n    private DatabaseReference  mDataBaseCentury, mDataBaseArticle;\n\n    // TODO: Rename parameter arguments, choose names that match\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n\n    public static HomeStartFragment newInstance(String param1, String param2) {\n        HomeStartFragment fragment = new HomeStartFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        Log.i(&quot;MyTaggg&quot;, &quot;ONCREATE STARTED&quot;);\n        centuries = new ArrayList&lt;&gt;();\n        articles = new ArrayList&lt;&gt;();\n        mDataBaseCentury = FirebaseDatabase.getInstance(&quot;https://vitebsk-history-default-rtdb.europe-west1.firebasedatabase.app/&quot;).getReference(&quot;Century&quot;);\n        mDataBaseArticle = FirebaseDatabase.getInstance(&quot;https://vitebsk-history-default-rtdb.europe-west1.firebasedatabase.app/&quot;).getReference(&quot;Article&quot;);\n        Log.i(&quot;MyTaggg&quot;, &quot;ListSize in onCreate = &quot; + centuries.size());\n        getCenturiesFromDB();\n        getArticlesFromDB();\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n\n    }\n\n    private void getCenturiesFromDB(){\n        Log.i(&quot;MyTaggg&quot;, &quot;FUNC STARTED&quot;);\n        ValueEventListener valueEventListener = new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                Log.i(&quot;MyTaggg&quot;, &quot;ONDATACHANGE is working&quot;);\n                if(centuries.size()&gt;0){centuries.clear();}\n                for(DataSnapshot ds : snapshot.getChildren()){\n                    Century century = ds.getValue(Century.class);\n                    assert century !=null;\n                    centuries.add(century);\n                }\n\n                Log.i(&quot;MyTaggg&quot;,&quot;ListSize in func = &quot; + centuries.size());\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        };\n        mDataBaseCentury.addValueEventListener(valueEventListener);\n    }\n    private void getArticlesFromDB(){\n        ValueEventListener valueEventListener = new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                if(articles.size()&gt;0){articles.clear();}\n\n                for(DataSnapshot ds : snapshot.getChildren()){\n                    Article article = ds.getValue(Article.class);\n                    assert article != null;\n                    articles.add(article);\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        };\n        mDataBaseArticle.addValueEventListener(valueEventListener);\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        Log.i(&quot;MyTaggg&quot;, &quot;ONCREATEVIEW STARTED&quot;);\n        view = inflater.inflate(R.layout.century_view, container, false);\n        rv = view.findViewById(R.id.recCenturyView);\n        centuriesAdapter=new CenturiesAdapter(getContext(),centuries,articles,this);\n        articlesAdapter = new ArticlesAdapter(getContext(),articles,this);\n        rv.setAdapter(centuriesAdapter);\n        rv.setLayoutManager(new LinearLayoutManager(getContext()));\n        Log.i(&quot;MyTaggg&quot;, &quot;ListSize in onCreateView = &quot; + centuries.size());\n        return view;\n    }\n\n}\n\n</code></pre>\n<p><strong>I don't know what else to write, stackoverflow won't let me post my question.</strong></p>\n<h2>Log</h2>\n<pre><code>2023-06-09 20:20:50.404  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ONCREATE STARTED\n2023-06-09 20:20:50.466  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ListSize in onCreate = 0\n2023-06-09 20:20:50.466  1979-1979  MyTaggg       com.example.vitsebskhistory        I  FUNC STARTED\n2023-06-09 20:20:50.488  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ONCREATEVIEW STARTED\n2023-06-09 20:20:50.581  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ListSize in onCreateView = 0\n2023-06-09 20:20:51.606  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ONDATACHANGE STARTED\n2023-06-09 20:20:51.611  1979-1979  MyTaggg       com.example.vitsebskhistory        I  ListSize in func = 8\n</code></pre>\n"},{"tags":["java","web-services","cxf","ws-security"],"answers":[{"tags":[],"owner":{"account_id":16683,"reputation":14507,"user_id":36611,"display_name":"Daniel Kulp"},"down_vote_count":1,"up_vote_count":20,"is_accepted":true,"score":19,"last_activity_date":1304649324,"creation_date":1304649324,"answer_id":5906215,"question_id":5906154,"body_markdown":"Are you getting the PolicyException on the client side?  If so, that likely means the WSDL you are using has a WS-SecucurityPolicy fragment in it that describes the UsernameToken policy that it wants and is expecting.   If that&#39;s the case, then you shouldn&#39;t configure the WSS4JOutInterceptor at all.   The WS-Policy runtime will handle it and you just need to provide some properties that it may need.\r\n\r\nThe docs for the SecurityPolicy stuff are at:  http://cxf.apache.org/docs/ws-securitypolicy.html \r\n\r\nYou likely just need to use:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nMap&lt;String, Object&gt; ctx = ((BindingProvider)port).getRequestContext();\r\nctx.put(&quot;ws-security.username&quot;, &quot;USERNAME&quot;);\r\nctx.put(&quot;ws-security.password&quot;, &quot;Password&quot;);\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\n","title":"Apache CXF - credentials not being sent from WSS4JOutInterceptor?","body":"<p>Are you getting the PolicyException on the client side?  If so, that likely means the WSDL you are using has a WS-SecucurityPolicy fragment in it that describes the UsernameToken policy that it wants and is expecting.   If that's the case, then you shouldn't configure the WSS4JOutInterceptor at all.   The WS-Policy runtime will handle it and you just need to provide some properties that it may need.</p>\n\n<p>The docs for the SecurityPolicy stuff are at:  <a href=\"http://cxf.apache.org/docs/ws-securitypolicy.html\" rel=\"noreferrer\">http://cxf.apache.org/docs/ws-securitypolicy.html</a> </p>\n\n<p>You likely just need to use:</p>\n\n<pre><code>\nMap ctx = ((BindingProvider)port).getRequestContext();\nctx.put(\"ws-security.username\", \"USERNAME\");\nctx.put(\"ws-security.password\", \"Password\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":189878,"reputation":5507,"user_id":429476,"accept_rate":42,"display_name":"Alex Punnen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429615361,"creation_date":1429615361,"answer_id":29770783,"question_id":5906154,"body_markdown":"  On using the answer from Daniel, I was getting the following exception\r\n\r\n\r\n    Caused by: org.apache.cxf.transport.http.HTTPException: HTTP response &#39;401: Unauthorized&#39; when communicating with http://..\r\n\tat .apache.cxf.inorg.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1555)\r\n\tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1494)\r\n\tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1402)\r\n\tat org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)\r\n\tat org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:649)\r\n\tat orgterceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)\r\n\tat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)\r\n\tat org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:535)\r\n\tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:465)\r\n\tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:368)\r\n\r\nI used the below and it started working\r\n\r\n    Map ctx = ((BindingProvider) ssPort).getRequestContext();\r\n            ctx.put(BindingProvider.USERNAME_PROPERTY, &quot;user&quot;);\r\n            ctx.put(BindingProvider.PASSWORD_PROPERTY, &quot;pass&quot;);\r\n            ctx.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, &quot;http://c","title":"Apache CXF - credentials not being sent from WSS4JOutInterceptor?","body":"<p>On using the answer from Daniel, I was getting the following exception</p>\n\n<pre><code>Caused by: org.apache.cxf.transport.http.HTTPException: HTTP response '401: Unauthorized' when communicating with http://..\nat .apache.cxf.inorg.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1555)\nat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1494)\nat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1402)\nat org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)\nat org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:649)\nat orgterceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)\nat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)\nat org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:535)\nat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:465)\nat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:368)\n</code></pre>\n\n<p>I used the below and it started working</p>\n\n<pre><code>Map ctx = ((BindingProvider) ssPort).getRequestContext();\n        ctx.put(BindingProvider.USERNAME_PROPERTY, \"user\");\n        ctx.put(BindingProvider.PASSWORD_PROPERTY, \"pass\");\n        ctx.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, \"http://c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5396455,"reputation":5608,"user_id":4297539,"accept_rate":69,"display_name":"Siberia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518792978,"creation_date":1518792978,"answer_id":48829362,"question_id":5906154,"body_markdown":"Thanks to Daniel the full working configuration for me is the following:\r\n\t    \r\n        webServicePort = webService_service.getPort(WebService.class);\r\n\r\n\t\tClient client = ClientProxy.getClient(webServicePort);\r\n\r\n\t\tEndpoint cxfEndpoint = client.getEndpoint();\r\n\r\n\t\tMap&lt;String, Object&gt; props = ((BindingProvider) webServicePort).getRequestContext();\r\n\t\tprops.put(&quot;ws-security.username&quot;, PravoRuConstants.USERNAME);\r\n\t\tprops.put(&quot;ws-security.password&quot;, PravoRuConstants.PASSWORD);\r\n\r\n\t\tprops.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);\r\n\t\tprops.put(WSHandlerConstants.USER, PravoRuConstants.USERNAME);\r\n\t\tprops.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);\r\n\r\n\t\tprops.put(WSHandlerConstants.PW_CALLBACK_CLASS, PravoRuPasswordHandler.class.getName());\r\n\r\n\t\tWSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(props);\r\n\t\tcxfEndpoint.getOutInterceptors().add(wssOut);","title":"Apache CXF - credentials not being sent from WSS4JOutInterceptor?","body":"<p>Thanks to Daniel the full working configuration for me is the following:</p>\n\n<pre><code>    webServicePort = webService_service.getPort(WebService.class);\n\n    Client client = ClientProxy.getClient(webServicePort);\n\n    Endpoint cxfEndpoint = client.getEndpoint();\n\n    Map&lt;String, Object&gt; props = ((BindingProvider) webServicePort).getRequestContext();\n    props.put(\"ws-security.username\", PravoRuConstants.USERNAME);\n    props.put(\"ws-security.password\", PravoRuConstants.PASSWORD);\n\n    props.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);\n    props.put(WSHandlerConstants.USER, PravoRuConstants.USERNAME);\n    props.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);\n\n    props.put(WSHandlerConstants.PW_CALLBACK_CLASS, PravoRuPasswordHandler.class.getName());\n\n    WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(props);\n    cxfEndpoint.getOutInterceptors().add(wssOut);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28790289,"reputation":1,"user_id":22049826,"display_name":"Alan Romo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686343824,"creation_date":1686343824,"answer_id":76443561,"question_id":5906154,"body_markdown":"First, I only added the properties mentioned to the ctx. and it didn&#39;t work\r\nThen I removed the old instructions about:\r\n\r\n    WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(props);\r\n    cxfEndpoint.getOutInterceptors().add(wssOut);\r\n\r\nAnd finally it WORKED!\r\n\r\nThanks!!!","title":"Apache CXF - credentials not being sent from WSS4JOutInterceptor?","body":"<p>First, I only added the properties mentioned to the ctx. and it didn't work\nThen I removed the old instructions about:</p>\n<pre><code>WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(props);\ncxfEndpoint.getOutInterceptors().add(wssOut);\n</code></pre>\n<p>And finally it WORKED!</p>\n<p>Thanks!!!</p>\n"}],"owner":{"account_id":747122,"reputation":165,"user_id":736917,"accept_rate":50,"display_name":"bwsmith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18913,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":5906215,"answer_count":4,"score":9,"last_activity_date":1686343824,"creation_date":1304648428,"question_id":5906154,"body_markdown":"I am trying to connect to a web service using WS-Security UsernameToken spec 1.0,\r\nusing apache cxf 2.4.0.\r\n\r\nI&#39;ve copied the code below from the CXF docs, but am getting:  org.apache.cxf.ws.policy.PolicyException: No username available\r\n\r\n\r\n        MyService_Service ss = new MyService_Service(wsdlURL, SERVICE_NAME);\r\n        MyService port = ss.getBasicHttpBindingMyService ();  \r\n \r\n\r\n        Client client = ClientProxy.getClient(port);\r\n        Endpoint cxfEndpoint = client.getEndpoint();\r\n\r\n        Map&lt;String,Object&gt; outProps = new HashMap&lt;String,Object&gt;();\r\n        outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);\r\n        outProps.put(WSHandlerConstants.USER, &quot;USERNAME&quot;);\r\n        outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);\r\n        outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, \r\n        ClientPasswordHandler.class.getName());\r\n                \r\n        WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);\r\n        cxfEndpoint.getOutInterceptors().add(wssOut);\r\n\r\nI&#39;ve also implemented a ClientPasswordHandler class, again from the docs, but it seems like the username is never sent (according to the error).\r\nHere is the password handler:\r\n\r\n\r\n    public class ClientPasswordHandler implements CallbackHandler {\r\n    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {\r\n\t\tWSPasswordCallback pc = (WSPasswordCallback) callbacks[0];\r\n\t\tpc.setPassword(&quot;Password&quot;);\t\t\r\n    \t}\r\n    }\r\n\r\nIs there any way to see if the WSS4Jinterceptor is being applied, and the UsernameToken is sent?\r\n","title":"Apache CXF - credentials not being sent from WSS4JOutInterceptor?","body":"<p>I am trying to connect to a web service using WS-Security UsernameToken spec 1.0,\nusing apache cxf 2.4.0.</p>\n\n<p>I've copied the code below from the CXF docs, but am getting:  org.apache.cxf.ws.policy.PolicyException: No username available</p>\n\n<pre><code>    MyService_Service ss = new MyService_Service(wsdlURL, SERVICE_NAME);\n    MyService port = ss.getBasicHttpBindingMyService ();  \n\n\n    Client client = ClientProxy.getClient(port);\n    Endpoint cxfEndpoint = client.getEndpoint();\n\n    Map&lt;String,Object&gt; outProps = new HashMap&lt;String,Object&gt;();\n    outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);\n    outProps.put(WSHandlerConstants.USER, \"USERNAME\");\n    outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);\n    outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, \n    ClientPasswordHandler.class.getName());\n\n    WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);\n    cxfEndpoint.getOutInterceptors().add(wssOut);\n</code></pre>\n\n<p>I've also implemented a ClientPasswordHandler class, again from the docs, but it seems like the username is never sent (according to the error).\nHere is the password handler:</p>\n\n<pre><code>public class ClientPasswordHandler implements CallbackHandler {\npublic void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {\n    WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];\n    pc.setPassword(\"Password\");     \n    }\n}\n</code></pre>\n\n<p>Is there any way to see if the WSS4Jinterceptor is being applied, and the UsernameToken is sent?</p>\n"},{"tags":["java","spring","code-generation","javapoet"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686347165,"post_id":76443546,"comment_id":134791572,"body_markdown":"Why do you need to distinguish in that way?","body":"Why do you need to distinguish in that way?"},{"owner":{"account_id":26121845,"reputation":1,"user_id":19814006,"display_name":"Hiroshking"},"score":0,"creation_date":1686348830,"post_id":76443546,"comment_id":134791763,"body_markdown":"I&#39;m considering that users can input custom types that are not available during code generation, which I&#39;m handling using ClassName from JavaPoet. However, I&#39;m facing an issue with built-in Java classes because I need to import them using their full classpath but i&#39;m getting only the simple name of the class (exp String ....)","body":"I&#39;m considering that users can input custom types that are not available during code generation, which I&#39;m handling using ClassName from JavaPoet. However, I&#39;m facing an issue with built-in Java classes because I need to import them using their full classpath but i&#39;m getting only the simple name of the class (exp String ....)"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686349576,"post_id":76443546,"comment_id":134791831,"body_markdown":"JavaPoet will take care of importing classes as much as is necessary for you.  You shouldn&#39;t need to do anything special.","body":"JavaPoet will take care of importing classes as much as is necessary for you.  You shouldn&#39;t need to do anything special."},{"owner":{"account_id":26121845,"reputation":1,"user_id":19814006,"display_name":"Hiroshking"},"score":0,"creation_date":1686350631,"post_id":76443546,"comment_id":134791918,"body_markdown":"I understand that JavaPoet handles the importing of classes.However, my challenge lies in receiving the type as a string from the user, such as &quot;String&quot;. I am aware that I can use ClassName.get(&quot;java.lang&quot;, &quot;String&quot;) or TypeName.String to handle common types, but it is not efficient to handle all possible user-provided types in this way. For custom types, I have considered using ClassName customType = ClassName.get(&quot;com.models&quot;, &quot;Product&quot;) to represent the desired return type, such as a Product. If there are any other features or techniques in JavaPoet that I am unaware of, please let me know.","body":"I understand that JavaPoet handles the importing of classes.However, my challenge lies in receiving the type as a string from the user, such as &quot;String&quot;. I am aware that I can use ClassName.get(&quot;java.lang&quot;, &quot;String&quot;) or TypeName.String to handle common types, but it is not efficient to handle all possible user-provided types in this way. For custom types, I have considered using ClassName customType = ClassName.get(&quot;com.models&quot;, &quot;Product&quot;) to represent the desired return type, such as a Product. If there are any other features or techniques in JavaPoet that I am unaware of, please let me know."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686374191,"post_id":76443546,"comment_id":134793255,"body_markdown":"Why get the class name as a String, instead of as a [`Class`](https://square.github.io/javapoet/javadoc/javapoet/com/squareup/javapoet/ClassName.html#get(java.lang.Class))?  Just use `ClassName.get(String.class)` or `ClassName.get(Product.class)`.","body":"Why get the class name as a String, instead of as a <a href=\"https://square.github.io/javapoet/javadoc/javapoet/com/squareup/javapoet/ClassName.html#get(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>Class</code></a>?  Just use <code>ClassName.get(String.class)</code> or <code>ClassName.get(Product.class)</code>."},{"owner":{"account_id":26121845,"reputation":1,"user_id":19814006,"display_name":"Hiroshking"},"score":0,"creation_date":1686401685,"post_id":76443546,"comment_id":134795423,"body_markdown":"To summarize my situation, I&#39;m working with a BPMN modeler where users can select elements and provide implementation properties such as the method name and return type. I&#39;m facing difficulties with the return type as I receive it as a string from the XML representation of the diagram. Requiring users to write the entire classpath for each type is not an efficient solution. I&#39;m looking for an alternative approach to handle the return type effectively and efficiently.","body":"To summarize my situation, I&#39;m working with a BPMN modeler where users can select elements and provide implementation properties such as the method name and return type. I&#39;m facing difficulties with the return type as I receive it as a string from the XML representation of the diagram. Requiring users to write the entire classpath for each type is not an efficient solution. I&#39;m looking for an alternative approach to handle the return type effectively and efficiently."}],"owner":{"account_id":26121845,"reputation":1,"user_id":19814006,"display_name":"Hiroshking"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686343651,"creation_date":1686343651,"question_id":76443546,"body_markdown":"I&#39;m facing an issue in my application where I need to generate code based on implementation properties provided by the user, such as methodName, className, arguments, and returnType. I&#39;m using JavaPoet for code generation.\r\n\r\nMy problem lies with the returnType. I want the user to be able to simply write types like &quot;String&quot; or &quot;int&quot; and use them as return types for the generated methods. Additionally, I need to distinguish between Java built-in classes and custom classes when dealing with the returnType.\r\n\r\n\r\n\r\nI&#39;ve discovered that I can use ClassName from JavaPoet to handle custom classes, but I&#39;m unsure how to handle Java built-in classes and determine whether the returnType provided by the user belongs to a built-in Java class or a custom class.\r\n\r\nI would greatly appreciate any help or suggestions on how to approach this issue effectively.\r\n\r\nThank you in advance!","title":"Dynamically Handling Return Types in Code Generation with JavaPoet","body":"<p>I'm facing an issue in my application where I need to generate code based on implementation properties provided by the user, such as methodName, className, arguments, and returnType. I'm using JavaPoet for code generation.</p>\n<p>My problem lies with the returnType. I want the user to be able to simply write types like &quot;String&quot; or &quot;int&quot; and use them as return types for the generated methods. Additionally, I need to distinguish between Java built-in classes and custom classes when dealing with the returnType.</p>\n<p>I've discovered that I can use ClassName from JavaPoet to handle custom classes, but I'm unsure how to handle Java built-in classes and determine whether the returnType provided by the user belongs to a built-in Java class or a custom class.</p>\n<p>I would greatly appreciate any help or suggestions on how to approach this issue effectively.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","android","api","graphql"],"answers":[{"tags":[],"owner":{"account_id":10511983,"reputation":13,"user_id":7747378,"display_name":"Eduardo Rdgz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635117938,"creation_date":1615252111,"answer_id":66539389,"question_id":66086719,"body_markdown":"An introspection schema should have *a __schema.types* object which is not present in the json so it looks like it&#39;s missing some information. See https://raw.githubusercontent.com/apollographql/apollo-android-tutorial/main/app/src/main/graphql/com/example/rocketreserver/schema.json\r\n\r\nIf introspection is enabled on your endpoint, you can download a schema with the command below:\r\n\r\n```\r\n./gradlew downloadApolloSchema\r\n--endpoint=https://***/graphql\r\n--schema=app/src/main/graphql/com/example/schema.json\r\n```\r\n\r\n","title":"ApolloGraphQL: cannot find schema.json. Please specify it explicitely.Android Studio","body":"<p>An introspection schema should have <em>a __schema.types</em> object which is not present in the json so it looks like it's missing some information. See <a href=\"https://raw.githubusercontent.com/apollographql/apollo-android-tutorial/main/app/src/main/graphql/com/example/rocketreserver/schema.json\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/apollographql/apollo-android-tutorial/main/app/src/main/graphql/com/example/rocketreserver/schema.json</a></p>\n<p>If introspection is enabled on your endpoint, you can download a schema with the command below:</p>\n<pre><code>./gradlew downloadApolloSchema\n--endpoint=https://***/graphql\n--schema=app/src/main/graphql/com/example/schema.json\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27024722,"reputation":1,"user_id":20582172,"display_name":"Dharamveer Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686342820,"creation_date":1686342820,"answer_id":76443476,"question_id":66086719,"body_markdown":"Try this one (I have checked this working fine) - \r\n&gt; Make sure everything is in single line\r\n    \r\n    ./gradlew :app:downloadApolloSchema --endpoint=https://***/graphql --schema=app/src/main/graphql/com/example/schema.graphqls\r\n\r\nyou can use **.json** or **.graphqls** accordingly","title":"ApolloGraphQL: cannot find schema.json. Please specify it explicitely.Android Studio","body":"<p>Try this one (I have checked this working fine) -</p>\n<blockquote>\n<p>Make sure everything is in single line</p>\n</blockquote>\n<pre><code>./gradlew :app:downloadApolloSchema --endpoint=https://***/graphql --schema=app/src/main/graphql/com/example/schema.graphqls\n</code></pre>\n<p>you can use <strong>.json</strong> or <strong>.graphqls</strong> accordingly</p>\n"}],"owner":{"account_id":12982584,"reputation":63,"user_id":9384469,"display_name":"Vishwanath S Kumbar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686342820,"creation_date":1612692941,"question_id":66086719,"body_markdown":"**I am Using  Apolloclient library in Android studio**\r\n\r\n \r\nI have downloaded schema and pasted in main/graphql/com/example/asdf/schema.json\r\n\r\nwritten query and path of the query file is ......./asdf/Xyz.graphql\r\n\r\nAfter build i am getting the below error\r\n\r\nApolloGraphQL: cannot find schema.json. Please specify it explicitely. Looked under:\r\nC:\\Users\\Dell\\AndroidStudioProjects\\ApolloClient\\app\\src\\main\\graphql\r\n\r\ngradle dependency i used\r\n\r\nimplementation &#39;com.apollographql.apollo:apollo-runtime:2.2.0&#39;\r\n\r\napply plugin: &#39;com.apollographql.apollo&#39;\r\n\r\nclasspath &quot;com.apollographql.apollo:apollo-gradle-plugin:2.2.0&quot;\r\n\r\n","title":"ApolloGraphQL: cannot find schema.json. Please specify it explicitely.Android Studio","body":"<p><strong>I am Using  Apolloclient library in Android studio</strong></p>\n<p>I have downloaded schema and pasted in main/graphql/com/example/asdf/schema.json</p>\n<p>written query and path of the query file is ......./asdf/Xyz.graphql</p>\n<p>After build i am getting the below error</p>\n<p>ApolloGraphQL: cannot find schema.json. Please specify it explicitely. Looked under:\nC:\\Users\\Dell\\AndroidStudioProjects\\ApolloClient\\app\\src\\main\\graphql</p>\n<p>gradle dependency i used</p>\n<p>implementation 'com.apollographql.apollo:apollo-runtime:2.2.0'</p>\n<p>apply plugin: 'com.apollographql.apollo'</p>\n<p>classpath &quot;com.apollographql.apollo:apollo-gradle-plugin:2.2.0&quot;</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","aws-sdk"],"owner":{"account_id":21404685,"reputation":11,"user_id":15766125,"display_name":"Manvendra Pratap Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686341790,"creation_date":1686341790,"question_id":76443399,"body_markdown":"I am trying to test my aws lambda function, where I am trying to invoke it from the java code like this\r\n`\r\n\r\npublic static void invokeLambdaFunction() {\r\n\r\n        final String functionArn =\r\n\r\n                &quot;Mylambdafunction&quot;;\r\n\r\n        lambdaClient = LambdaClient.builder()\r\n\r\n               .region(REGION).build();\r\n\r\n        final InvokeRequest invokeRequest = InvokeRequest.builder()\r\n\r\n                .functionName(functionArn).build();\r\n\r\n        final InvokeResponse invokeResult = lambdaClient.invoke(invokeRequest);\r\n\r\n        final String responseJson = new String(invokeResult.payload().asUtf8String());\r\n\r\n        LOGGER.info(&quot;Lambda function response: &quot; + responseJson);`\r\n\r\nThe lambda function is configured by a YAML file along with the environment variables. Now for my testing purposes I need the values of those environment variables according to my test scenarios. \r\n\r\nSo how do I set the environment variables through Java code so that it reads the variables values provided by me but doesn&#39;t changes it&#39;s original configuration. \r\n\r\n(Please do not provide a solution pertaining to changing the lambda function code).\r\n\r\nI tried UpdateFunctionConfigurationRequest class of awsSdk, but that will change the value permanently.  So need a solution that either changes the environment values till execution time or reads it without setting values.","title":"Temporarily modify the environment configuration for aws lambda function using java code","body":"<p>I am trying to test my aws lambda function, where I am trying to invoke it from the java code like this\n`</p>\n<p>public static void invokeLambdaFunction() {</p>\n<pre><code>    final String functionArn =\n\n            &quot;Mylambdafunction&quot;;\n\n    lambdaClient = LambdaClient.builder()\n\n           .region(REGION).build();\n\n    final InvokeRequest invokeRequest = InvokeRequest.builder()\n\n            .functionName(functionArn).build();\n\n    final InvokeResponse invokeResult = lambdaClient.invoke(invokeRequest);\n\n    final String responseJson = new String(invokeResult.payload().asUtf8String());\n\n    LOGGER.info(&quot;Lambda function response: &quot; + responseJson);`\n</code></pre>\n<p>The lambda function is configured by a YAML file along with the environment variables. Now for my testing purposes I need the values of those environment variables according to my test scenarios.</p>\n<p>So how do I set the environment variables through Java code so that it reads the variables values provided by me but doesn't changes it's original configuration.</p>\n<p>(Please do not provide a solution pertaining to changing the lambda function code).</p>\n<p>I tried UpdateFunctionConfigurationRequest class of awsSdk, but that will change the value permanently.  So need a solution that either changes the environment values till execution time or reads it without setting values.</p>\n"},{"tags":["java","spring","jms","activemq"],"answers":[{"tags":[],"owner":{"account_id":7905325,"reputation":143,"user_id":5971038,"accept_rate":100,"display_name":"Gary Xue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1457650790,"creation_date":1457650790,"answer_id":35929061,"question_id":35928089,"body_markdown":"I found the problem. I had the same beans declared twice at two different places. The second bean that was loaded did not have pre-fetch set to 0 and therefore it didn&#39;t work out.\r\n\r\nThe above setup I posted works!\r\n\r\nThank you!","title":"How to prevent message from going to &quot;Dispatched Queue&quot;","body":"<p>I found the problem. I had the same beans declared twice at two different places. The second bean that was loaded did not have pre-fetch set to 0 and therefore it didn't work out.</p>\n\n<p>The above setup I posted works!</p>\n\n<p>Thank you!</p>\n"}],"owner":{"account_id":7905325,"reputation":143,"user_id":5971038,"accept_rate":100,"display_name":"Gary Xue"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2278,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35929061,"answer_count":1,"score":1,"last_activity_date":1686341699,"creation_date":1457646884,"question_id":35928089,"body_markdown":"I&#39;m using ActiveMQ with the Spring framework.\r\n\r\nI have two consumers setup in the JMS container. When I send 4 message to the queue, and some of the message are transferred to the &quot;Dispatched Queue&quot; because it takes a long time to the consumer to process the message.\r\n\r\nI&#39;m trying to find the way to prevent the message from going to the &quot;Dispatched Queue&quot;. That is, I want them to be available to any consumer that is ready to consume the message. \r\n\r\nI tried to set `queuePrefetch` to `0`, but it doesn&#39;t seem to work at all.\r\n```xml\r\n    &lt;bean id=&quot;prefetchPolicy&quot; class=&quot;org.apache.activemq.ActiveMQPrefetchPolicy&quot;&gt;\r\n      &lt;property name=&quot;queuePrefetch&quot; value=&quot;0&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;connectionFactory&quot; class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;&gt;\r\n      &lt;constructor-arg index=&quot;0&quot; value=&quot;tcp://localhost:61616&quot; /&gt;\r\n      &lt;property name=&quot;prefetchPolicy&quot; ref=&quot;prefetchPolicy&quot;/&gt;\r\n    &lt;/bean&gt;\r\n```\r\nThe following is the setup for my JMS container:\r\n```xml\r\n        &lt;bean id=&quot;jmsContainer&quot; class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;&gt;\r\n            &lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;/&gt;\r\n            &lt;property name=&quot;destination&quot; ref=&quot;defaultDestination&quot; /&gt;\r\n            &lt;property name=&quot;messageListener&quot; ref=&quot;messageListener&quot; /&gt;\r\n            &lt;property name=&quot;concurrentConsumers&quot; value=&quot;2&quot; /&gt;\r\n        &lt;/bean&gt;\r\n```","title":"How to prevent message from going to &quot;Dispatched Queue&quot;","body":"<p>I'm using ActiveMQ with the Spring framework.</p>\n<p>I have two consumers setup in the JMS container. When I send 4 message to the queue, and some of the message are transferred to the &quot;Dispatched Queue&quot; because it takes a long time to the consumer to process the message.</p>\n<p>I'm trying to find the way to prevent the message from going to the &quot;Dispatched Queue&quot;. That is, I want them to be available to any consumer that is ready to consume the message.</p>\n<p>I tried to set <code>queuePrefetch</code> to <code>0</code>, but it doesn't seem to work at all.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;bean id=&quot;prefetchPolicy&quot; class=&quot;org.apache.activemq.ActiveMQPrefetchPolicy&quot;&gt;\n      &lt;property name=&quot;queuePrefetch&quot; value=&quot;0&quot;/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;connectionFactory&quot; class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;&gt;\n      &lt;constructor-arg index=&quot;0&quot; value=&quot;tcp://localhost:61616&quot; /&gt;\n      &lt;property name=&quot;prefetchPolicy&quot; ref=&quot;prefetchPolicy&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>The following is the setup for my JMS container:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;bean id=&quot;jmsContainer&quot; class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;&gt;\n            &lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;/&gt;\n            &lt;property name=&quot;destination&quot; ref=&quot;defaultDestination&quot; /&gt;\n            &lt;property name=&quot;messageListener&quot; ref=&quot;messageListener&quot; /&gt;\n            &lt;property name=&quot;concurrentConsumers&quot; value=&quot;2&quot; /&gt;\n        &lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","raspberry-pi","spigot"],"comments":[{"owner":{"account_id":16493669,"reputation":3050,"user_id":11916773,"display_name":"Lucan"},"score":0,"creation_date":1686351420,"post_id":76443388,"comment_id":134792006,"body_markdown":"Why are you passing memory heap arguments? Omit xmx. `java -jar BuildTools.jar` should do it.","body":"Why are you passing memory heap arguments? Omit xmx. <code>java -jar BuildTools.jar</code> should do it."}],"owner":{"account_id":22202776,"reputation":1,"user_id":16443171,"display_name":"pythondude247"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686341682,"creation_date":1686341682,"question_id":76443388,"body_markdown":"Basically I am trying to run a spigot server on my Raspberry Pi B+. However I keep getting stuck on this one line.\r\n\r\nI tried to run \r\n```\r\njava -Xmx1024M -Xmx1024M -jar BuildTools.jar --rev 1.19.4\r\n```\r\nTo build the server and this is the output:\r\n[text](https://pastebin.com/gSbpQ6DT)\r\n\r\nAnd it gets stuck on\r\n\r\n```\r\nPicked up _JAVA_OPTIONS: -Djdk.net.URLClassPath.disableClassPathURLCheck=true -Xmx1024M -Xmx1024M\r\n\r\n```\r\nI have also tried running\r\n\r\n```\r\njava -Xmx1024M -jar BuildTools.jar --rev 1.19.4\r\n```\r\n\r\nAny help appreciated! Thanks! \r\n","title":"Stuck at Picked up _JAVA_OPTIONS: -Djdk.net.URLClassPath.disableClassPathURLCheck=true -Xmx1024M -Xmx1024M when building spigot server","body":"<p>Basically I am trying to run a spigot server on my Raspberry Pi B+. However I keep getting stuck on this one line.</p>\n<p>I tried to run</p>\n<pre><code>java -Xmx1024M -Xmx1024M -jar BuildTools.jar --rev 1.19.4\n</code></pre>\n<p>To build the server and this is the output:\n<a href=\"https://pastebin.com/gSbpQ6DT\" rel=\"nofollow noreferrer\">text</a></p>\n<p>And it gets stuck on</p>\n<pre><code>Picked up _JAVA_OPTIONS: -Djdk.net.URLClassPath.disableClassPathURLCheck=true -Xmx1024M -Xmx1024M\n\n</code></pre>\n<p>I have also tried running</p>\n<pre><code>java -Xmx1024M -jar BuildTools.jar --rev 1.19.4\n</code></pre>\n<p>Any help appreciated! Thanks!</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":54,"creation_date":1369313906,"post_id":16706716,"comment_id":24062486,"body_markdown":"Being a basic question makes it if anything more eligable for upvotes if its not a duplicate as its widely useful. And its something that didn&#39;t occure to me as possible but now that I realise it its blindingly obvious. So all in all a pretty awesome Q&amp;A","body":"Being a basic question makes it if anything more eligable for upvotes if its not a duplicate as its widely useful. And its something that didn&#39;t occure to me as possible but now that I realise it its blindingly obvious. So all in all a pretty awesome Q&amp;A"},{"owner":{"account_id":872093,"reputation":13753,"user_id":922712,"accept_rate":55,"display_name":"user93353"},"score":1,"creation_date":1369369519,"post_id":16706716,"comment_id":24087054,"body_markdown":"@RichardTingle - are you familiar with Duff&#39;s Device - http://en.wikipedia.org/wiki/Duff%27s_device","body":"@RichardTingle - are you familiar with Duff&#39;s Device - <a href=\"http://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Duff%27s_device</a>"},{"owner":{"account_id":6588258,"reputation":3353,"user_id":5090391,"accept_rate":91,"display_name":"Brendan W"},"score":7,"creation_date":1460497979,"post_id":16706716,"comment_id":60768354,"body_markdown":"&quot;Why so many upvotes? Search for &quot;java switch&quot; in the internet and read one of the thousand explanations.&quot; &lt;-- what do you think I was doing?","body":"&quot;Why so many upvotes? Search for &quot;java switch&quot; in the internet and read one of the thousand explanations.&quot; &lt;-- what do you think I was doing?"},{"owner":{"account_id":3046229,"reputation":101,"user_id":2581807,"display_name":"domenix"},"score":11,"creation_date":1473062950,"post_id":16706716,"comment_id":65984128,"body_markdown":"I literally searched for &quot;multiple cases in one line java&quot; and this Q&amp;A was the first result.","body":"I literally searched for &quot;multiple cases in one line java&quot; and this Q&amp;A was the first result."},{"owner":{"account_id":1390440,"reputation":5490,"user_id":1321401,"display_name":"Luten"},"score":0,"creation_date":1476853957,"post_id":16706716,"comment_id":67515716,"body_markdown":"@Christian Strempfer, because Fallthrough behavior is contrintuitive, easily not known by new developers, and multiple values in one case would be much more readable.","body":"@Christian Strempfer, because Fallthrough behavior is contrintuitive, easily not known by new developers, and multiple values in one case would be much more readable."},{"owner":{"account_id":1390440,"reputation":5490,"user_id":1321401,"display_name":"Luten"},"score":0,"creation_date":1476943337,"post_id":16706716,"comment_id":67562469,"body_markdown":"@Christian Strempfer, In my time I didn&#39;t know about fallthrough, while switch-case general behavior is obvious - no research needed. What an unpleasant surprise I&#39;ve experienced when got a bug because of fallthrough.\nI thought that day &quot;Why the heck `case 9` is running when value is 8, it&#39;s mutually exclusive. When it&#39;s said `case 9` - it mustn&#39;t be executed if value is not 9. Period. It&#39;s law of logic.&quot;  \nHow would you like `if` statements running without matching conditions.  \nMoreover in some languages there is no fallthrough, or it is not default behavior (the best way imho).","body":"@Christian Strempfer, In my time I didn&#39;t know about fallthrough, while switch-case general behavior is obvious - no research needed. What an unpleasant surprise I&#39;ve experienced when got a bug because of fallthrough. I thought that day &quot;Why the heck <code>case 9</code> is running when value is 8, it&#39;s mutually exclusive. When it&#39;s said <code>case 9</code> - it mustn&#39;t be executed if value is not 9. Period. It&#39;s law of logic.&quot;   How would you like <code>if</code> statements running without matching conditions.   Moreover in some languages there is no fallthrough, or it is not default behavior (the best way imho)."},{"owner":{"account_id":68162,"reputation":7331,"user_id":199048,"accept_rate":90,"display_name":"Christian Strempfer"},"score":0,"creation_date":1476946077,"post_id":16706716,"comment_id":67563940,"body_markdown":"@Luten: I doesn&#39;t matter if it&#39;s obvious or not. Searching the answer would have been faster than writing a question.","body":"@Luten: I doesn&#39;t matter if it&#39;s obvious or not. Searching the answer would have been faster than writing a question."},{"owner":{"account_id":1390440,"reputation":5490,"user_id":1321401,"display_name":"Luten"},"score":0,"creation_date":1477038648,"post_id":16706716,"comment_id":67611359,"body_markdown":"@Christian Strempfer, Searching and receiving this answer in stack overflow&#39;s Q&amp;A format instead of reading documentation is often faster. I think this question saves time (may be not for one who wrote it but definitely for those who found). That&#39;s why it receives upvotes.","body":"@Christian Strempfer, Searching and receiving this answer in stack overflow&#39;s Q&amp;A format instead of reading documentation is often faster. I think this question saves time (may be not for one who wrote it but definitely for those who found). That&#39;s why it receives upvotes."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":1,"creation_date":1536431494,"post_id":16706716,"comment_id":91425035,"body_markdown":"The switch demo in the selected answer could be [rephrased now](https://stackoverflow.com/a/52238221/1746118) that JDK-12 has integrated JEP-325. :)","body":"The switch demo in the selected answer could be <a href=\"https://stackoverflow.com/a/52238221/1746118\">rephrased now</a> that JDK-12 has integrated JEP-325. :)"},{"owner":{"account_id":7465632,"reputation":14579,"user_id":5675325,"accept_rate":85,"display_name":"Tiago Martins Peres"},"score":0,"creation_date":1689681672,"post_id":16706716,"comment_id":135245388,"body_markdown":"My fav approach is `case text1, text4 -&gt; {` ([referenced here](https://stackoverflow.com/a/52238221/5675325))","body":"My fav approach is <code>case text1, text4 -&gt; {</code> (<a href=\"https://stackoverflow.com/a/52238221/5675325\">referenced here</a>)"}],"answers":[{"tags":[],"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"down_vote_count":1,"up_vote_count":807,"is_accepted":true,"score":806,"last_activity_date":1392014666,"creation_date":1369289535,"answer_id":16706729,"question_id":16706716,"body_markdown":"You can use have both `CASE` statements as follows.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n \r\n      case text1: \r\n      case text4:{\r\n                //blah\r\n                break;\r\n            }\r\n\r\n\r\nSEE THIS EXAMPLE:The code example calculates the number of days in a particular month:\r\n\r\n    class SwitchDemo {\r\n        public static void main(String[] args) {\r\n    \r\n            int month = 2;\r\n            int year = 2000;\r\n            int numDays = 0;\r\n    \r\n            switch (month) {\r\n                case 1:\r\n                case 3:\r\n                case 5:\r\n                case 7:\r\n                case 8:\r\n                case 10:\r\n                case 12:\r\n                    numDays = 31;\r\n                    break;\r\n                case 4:\r\n                case 6:\r\n                case 9:\r\n                case 11:\r\n                    numDays = 30;\r\n                    break;\r\n                case 2:\r\n                    if (((year % 4 == 0) &amp;&amp; \r\n                         !(year % 100 == 0))\r\n                         || (year % 400 == 0))\r\n                        numDays = 29;\r\n                    else\r\n                        numDays = 28;\r\n                    break;\r\n                default:\r\n                    System.out.println(&quot;Invalid month.&quot;);\r\n                    break;\r\n            }\r\n            System.out.println(&quot;Number of Days = &quot;\r\n                               + numDays);\r\n        }\r\n    }\r\n\r\nThis is the output from the code:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    \r\n    Number of Days = 29\r\n\r\n\r\nFALLTHROUGH:\r\n\r\n \r\n\r\n&gt; Another point of interest is the break statement. Each break statement\r\n&gt; terminates the enclosing switch statement. Control flow continues with\r\n&gt; the first statement following the switch block. The break statements\r\n&gt; are necessary because without them, statements in switch blocks `fall\r\n&gt; through`: All statements after the matching case label are executed in\r\n&gt; sequence, regardless of the expression of subsequent case labels,\r\n&gt; until a break statement is encountered.\r\n\r\n \r\nEXAMPLE CODE:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class SwitchFallThrough {\r\n    \r\n        public static void main(String[] args) {\r\n            java.util.ArrayList&lt;String&gt; futureMonths =\r\n                new java.util.ArrayList&lt;String&gt;();\r\n    \r\n            int month = 8;\r\n    \r\n            switch (month) {\r\n                case 1:  futureMonths.add(&quot;January&quot;);\r\n                case 2:  futureMonths.add(&quot;February&quot;);\r\n                case 3:  futureMonths.add(&quot;March&quot;);\r\n                case 4:  futureMonths.add(&quot;April&quot;);\r\n                case 5:  futureMonths.add(&quot;May&quot;);\r\n                case 6:  futureMonths.add(&quot;June&quot;);\r\n                case 7:  futureMonths.add(&quot;July&quot;);\r\n                case 8:  futureMonths.add(&quot;August&quot;);\r\n                case 9:  futureMonths.add(&quot;September&quot;);\r\n                case 10: futureMonths.add(&quot;October&quot;);\r\n                case 11: futureMonths.add(&quot;November&quot;);\r\n                case 12: futureMonths.add(&quot;December&quot;);\r\n                default: break;\r\n            }\r\n    \r\n            if (futureMonths.isEmpty()) {\r\n                System.out.println(&quot;Invalid month number&quot;);\r\n            } else {\r\n                for (String monthName : futureMonths) {\r\n                   System.out.println(monthName);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\nThis is the output from the code:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    \r\n    August\r\n    September\r\n    October\r\n    November\r\n    December\r\n\r\nUsing Strings in switch Statements\r\n\r\n&gt; In Java SE 7 and later, you can use a String object in the switch\r\n&gt; statement&#39;s expression. The following code example, ,\r\n&gt; displays the number of the month based on the value of the String\r\n&gt; named month:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class StringSwitchDemo {\r\n\r\n        public static int getMonthNumber(String month) {\r\n\r\n            int monthNumber = 0;\r\n\r\n            if (month == null) {\r\n                return monthNumber;\r\n            }\r\n\r\n            switch (month.toLowerCase()) {\r\n                case &quot;january&quot;:\r\n                    monthNumber = 1;\r\n                    break;\r\n                case &quot;february&quot;:\r\n                    monthNumber = 2;\r\n                    break;\r\n                case &quot;march&quot;:\r\n                    monthNumber = 3;\r\n                    break;\r\n                case &quot;april&quot;:\r\n                    monthNumber = 4;\r\n                    break;\r\n                case &quot;may&quot;:\r\n                    monthNumber = 5;\r\n                    break;\r\n                case &quot;june&quot;:\r\n                    monthNumber = 6;\r\n                    break;\r\n                case &quot;july&quot;:\r\n                    monthNumber = 7;\r\n                    break;\r\n                case &quot;august&quot;:\r\n                    monthNumber = 8;\r\n                    break;\r\n                case &quot;september&quot;:\r\n                    monthNumber = 9;\r\n                    break;\r\n                case &quot;october&quot;:\r\n                    monthNumber = 10;\r\n                    break;\r\n                case &quot;november&quot;:\r\n                    monthNumber = 11;\r\n                    break;\r\n                case &quot;december&quot;:\r\n                    monthNumber = 12;\r\n                    break;\r\n                default: \r\n                    monthNumber = 0;\r\n                    break;\r\n            }\r\n\r\n            return monthNumber;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n\r\n            String month = &quot;August&quot;;\r\n\r\n            int returnedMonthNumber =\r\n                StringSwitchDemo.getMonthNumber(month);\r\n\r\n            if (returnedMonthNumber == 0) {\r\n                System.out.println(&quot;Invalid month&quot;);\r\n            } else {\r\n                System.out.println(returnedMonthNumber);\r\n            }\r\n        }\r\n    }\r\n\r\nThe output from this code is 8.\r\n\r\n[FROM Java Docs][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html","title":"Using two values for one switch case statement","body":"<p>You can use have both <code>CASE</code> statements as follows.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  case text1: \n  case text4:{\n            //blah\n            break;\n        }\n</code></pre>\n\n<p>SEE THIS EXAMPLE:The code example calculates the number of days in a particular month:</p>\n\n<pre><code>class SwitchDemo {\n    public static void main(String[] args) {\n\n        int month = 2;\n        int year = 2000;\n        int numDays = 0;\n\n        switch (month) {\n            case 1:\n            case 3:\n            case 5:\n            case 7:\n            case 8:\n            case 10:\n            case 12:\n                numDays = 31;\n                break;\n            case 4:\n            case 6:\n            case 9:\n            case 11:\n                numDays = 30;\n                break;\n            case 2:\n                if (((year % 4 == 0) &amp;&amp; \n                     !(year % 100 == 0))\n                     || (year % 400 == 0))\n                    numDays = 29;\n                else\n                    numDays = 28;\n                break;\n            default:\n                System.out.println(\"Invalid month.\");\n                break;\n        }\n        System.out.println(\"Number of Days = \"\n                           + numDays);\n    }\n}\n</code></pre>\n\n<p>This is the output from the code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Number of Days = 29\n</code></pre>\n\n<p>FALLTHROUGH:</p>\n\n<blockquote>\n  <p>Another point of interest is the break statement. Each break statement\n  terminates the enclosing switch statement. Control flow continues with\n  the first statement following the switch block. The break statements\n  are necessary because without them, statements in switch blocks <code>fall\n  through</code>: All statements after the matching case label are executed in\n  sequence, regardless of the expression of subsequent case labels,\n  until a break statement is encountered.</p>\n</blockquote>\n\n<p>EXAMPLE CODE:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SwitchFallThrough {\n\n    public static void main(String[] args) {\n        java.util.ArrayList&lt;String&gt; futureMonths =\n            new java.util.ArrayList&lt;String&gt;();\n\n        int month = 8;\n\n        switch (month) {\n            case 1:  futureMonths.add(\"January\");\n            case 2:  futureMonths.add(\"February\");\n            case 3:  futureMonths.add(\"March\");\n            case 4:  futureMonths.add(\"April\");\n            case 5:  futureMonths.add(\"May\");\n            case 6:  futureMonths.add(\"June\");\n            case 7:  futureMonths.add(\"July\");\n            case 8:  futureMonths.add(\"August\");\n            case 9:  futureMonths.add(\"September\");\n            case 10: futureMonths.add(\"October\");\n            case 11: futureMonths.add(\"November\");\n            case 12: futureMonths.add(\"December\");\n            default: break;\n        }\n\n        if (futureMonths.isEmpty()) {\n            System.out.println(\"Invalid month number\");\n        } else {\n            for (String monthName : futureMonths) {\n               System.out.println(monthName);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is the output from the code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>August\nSeptember\nOctober\nNovember\nDecember\n</code></pre>\n\n<p>Using Strings in switch Statements</p>\n\n<blockquote>\n  <p>In Java SE 7 and later, you can use a String object in the switch\n  statement's expression. The following code example, ,\n  displays the number of the month based on the value of the String\n  named month:</p>\n</blockquote>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class StringSwitchDemo {\n\n    public static int getMonthNumber(String month) {\n\n        int monthNumber = 0;\n\n        if (month == null) {\n            return monthNumber;\n        }\n\n        switch (month.toLowerCase()) {\n            case \"january\":\n                monthNumber = 1;\n                break;\n            case \"february\":\n                monthNumber = 2;\n                break;\n            case \"march\":\n                monthNumber = 3;\n                break;\n            case \"april\":\n                monthNumber = 4;\n                break;\n            case \"may\":\n                monthNumber = 5;\n                break;\n            case \"june\":\n                monthNumber = 6;\n                break;\n            case \"july\":\n                monthNumber = 7;\n                break;\n            case \"august\":\n                monthNumber = 8;\n                break;\n            case \"september\":\n                monthNumber = 9;\n                break;\n            case \"october\":\n                monthNumber = 10;\n                break;\n            case \"november\":\n                monthNumber = 11;\n                break;\n            case \"december\":\n                monthNumber = 12;\n                break;\n            default: \n                monthNumber = 0;\n                break;\n        }\n\n        return monthNumber;\n    }\n\n    public static void main(String[] args) {\n\n        String month = \"August\";\n\n        int returnedMonthNumber =\n            StringSwitchDemo.getMonthNumber(month);\n\n        if (returnedMonthNumber == 0) {\n            System.out.println(\"Invalid month\");\n        } else {\n            System.out.println(returnedMonthNumber);\n        }\n    }\n}\n</code></pre>\n\n<p>The output from this code is 8.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\">FROM Java Docs</a></p>\n"},{"tags":[],"owner":{"account_id":1844797,"reputation":57363,"user_id":1673391,"accept_rate":88,"display_name":"Grijesh Chauhan"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1626683525,"creation_date":1369289557,"answer_id":16706733,"question_id":16706716,"body_markdown":"You can do the following to use multiple cases for one switch statement:\r\n\r\n```java\r\ncase &quot;firstCase&quot;:\r\ncase &quot;secondCase&quot;: {\r\n    // Run code here for both cases\r\n}\r\n```","title":"Using two values for one switch case statement","body":"<p>You can do the following to use multiple cases for one switch statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>case &quot;firstCase&quot;:\ncase &quot;secondCase&quot;: {\n    // Run code here for both cases\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1781611,"reputation":1263,"user_id":1624187,"accept_rate":83,"display_name":"kaljak"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1369289621,"creation_date":1369289621,"answer_id":16706751,"question_id":16706716,"body_markdown":"Just do\r\n\r\n    case text1: case text4: \r\n         do stuff;\r\n         break;","title":"Using two values for one switch case statement","body":"<p>Just do</p>\n\n<pre><code>case text1: case text4: \n     do stuff;\n     break;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1369311338,"creation_date":1369289696,"answer_id":16706772,"question_id":16706716,"body_markdown":"The `case` values are just codeless &quot;goto&quot; points that can share the same entry point:\r\n\r\n    case text1:\r\n    case text4: \r\n        //blah\r\n        break;\r\n\r\nNote that the braces are redundant.\r\n","title":"Using two values for one switch case statement","body":"<p>The <code>case</code> values are just codeless \"goto\" points that can share the same entry point:</p>\n\n<pre><code>case text1:\ncase text4: \n    //blah\n    break;\n</code></pre>\n\n<p>Note that the braces are redundant.</p>\n"},{"tags":[],"owner":{"account_id":1732120,"reputation":2083,"user_id":1678716,"accept_rate":76,"display_name":"scottmrogowski"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1369293347,"creation_date":1369293347,"answer_id":16707803,"question_id":16706716,"body_markdown":"The brackets are unnecessary. Just do\r\n\r\n    case text1:\r\n    case text4:\r\n      doSomethingHere();\r\n      break;\r\n    case text2:\r\n      doSomethingElse()\r\n      break;\r\n\r\nIf anyone is curious, this is called a case fallthrough. The ability to do this is the reason why `break;` is necessary to end case statements.  For more information, see the wikipedia article http://en.wikipedia.org/wiki/Switch_statement.","title":"Using two values for one switch case statement","body":"<p>The brackets are unnecessary. Just do</p>\n\n<pre><code>case text1:\ncase text4:\n  doSomethingHere();\n  break;\ncase text2:\n  doSomethingElse()\n  break;\n</code></pre>\n\n<p>If anyone is curious, this is called a case fallthrough. The ability to do this is the reason why <code>break;</code> is necessary to end case statements.  For more information, see the wikipedia article <a href=\"http://en.wikipedia.org/wiki/Switch_statement\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Switch_statement</a>.</p>\n"},{"tags":[],"owner":{"account_id":1324014,"reputation":5651,"user_id":1311351,"display_name":"Colin D"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1369313548,"creation_date":1369313548,"answer_id":16714470,"question_id":16706716,"body_markdown":"The `fallthrough` answers by others are good ones. \r\n\r\nHowever another approach would be extract methods out of the contents of your case statements and then just call the appropriate method from each case.\r\n\r\nIn the example below, both case &#39;text1&#39; and case &#39;text4&#39; behave the same:\r\n\r\n    switch (name) {\r\n            case text1: {\r\n                method1();\r\n                break;\r\n            }\r\n            case text2: {\r\n                method2();\r\n                break;\r\n            }\r\n            case text3: {\r\n                method3();\r\n                break;\r\n            }\r\n            case text4: {\r\n                method1();\r\n                break;\r\n            }\r\n\r\nI personally find this style of writing case statements more maintainable and slightly more readable, especially when the methods you call have good descriptive names.","title":"Using two values for one switch case statement","body":"<p>The <code>fallthrough</code> answers by others are good ones. </p>\n\n<p>However another approach would be extract methods out of the contents of your case statements and then just call the appropriate method from each case.</p>\n\n<p>In the example below, both case 'text1' and case 'text4' behave the same:</p>\n\n<pre><code>switch (name) {\n        case text1: {\n            method1();\n            break;\n        }\n        case text2: {\n            method2();\n            break;\n        }\n        case text3: {\n            method3();\n            break;\n        }\n        case text4: {\n            method1();\n            break;\n        }\n</code></pre>\n\n<p>I personally find this style of writing case statements more maintainable and slightly more readable, especially when the methods you call have good descriptive names.</p>\n"},{"tags":[],"owner":{"account_id":2022599,"reputation":283,"user_id":1808413,"accept_rate":80,"display_name":"Ankur Sharma"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1371036114,"creation_date":1371036114,"answer_id":17064186,"question_id":16706716,"body_markdown":"Fall through approach is the best one i feel.\r\n\r\n    case text1:\r\n    case text4: {\r\n            //Yada yada\r\n            break;\r\n    } \r\n\r\n   ","title":"Using two values for one switch case statement","body":"<p>Fall through approach is the best one i feel.</p>\n\n<pre><code>case text1:\ncase text4: {\n        //Yada yada\n        break;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2455880,"reputation":585,"user_id":2141128,"display_name":"David_DD"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1394776700,"creation_date":1394776700,"answer_id":22397296,"question_id":16706716,"body_markdown":"The case values are just codeless &quot;goto&quot; points that can share the same entry point:\r\n\r\n&gt;case text1:&lt;br/&gt;\r\n&gt;case text4: {&lt;br/&gt; \r\n&gt;    //Do something &lt;br/&gt;\r\n&gt;    break;&lt;br/&gt;\r\n&gt;}&lt;br/&gt;\r\n\r\nNote that the braces are redundant.","title":"Using two values for one switch case statement","body":"<p>The case values are just codeless \"goto\" points that can share the same entry point:</p>\n\n<blockquote>\n  <p>case text1:<br/>\n  case text4: {<br/> \n     //Do something <br/>\n     break;<br/>\n  }<br/></p>\n</blockquote>\n\n<p>Note that the braces are redundant.</p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1641353342,"creation_date":1536431316,"answer_id":52238221,"question_id":16706716,"body_markdown":"# Summary: separate by commas\r\n\r\n```java\r\nswitch (name) {\r\n    case text1 , text4  -&gt; doX() ;\r\n    case text2          -&gt; doY() ;\r\n    case text3          -&gt; doZ() ;\r\n}\r\n```\r\n\r\n# Switch Expressions \r\n\r\nWith the integration of [*JEP 361: Switch Expressions*](https://openjdk.java.net/jeps/361) in [Java 14][1] and later, one can make use of the new form of the switch label using a **comma between multiple values**.\r\n\r\n\r\n    case text1, text4 -&gt; {\r\n         //blah\r\n    } \r\n\r\nor to rephrase the demo from [one of the answers](https://stackoverflow.com/a/16706729/1746118), something like :-\r\n\r\n    public class RephraseDemo {\r\n    \r\n        public static void main(String[] args) {\r\n            int month = 9;\r\n            int year = 2018;\r\n            int numDays = 0;\r\n    \r\n            switch (month) {\r\n                case 1, 3, 5, 7, 8, 10, 12 -&gt;{\r\n                    numDays = 31;\r\n                }\r\n                case 4, 6, 9, 11 -&gt;{\r\n                    numDays = 30;\r\n                }\r\n                case 2 -&gt;{\r\n                    if (((year % 4 == 0) &amp;&amp;\r\n                            !(year % 100 == 0))\r\n                            || (year % 400 == 0))\r\n                        numDays = 29;\r\n                    else\r\n                        numDays = 28;\r\n                }\r\n                default -&gt;{\r\n                    System.out.println(&quot;Invalid month.&quot;);\r\n    \r\n                }\r\n            }\r\n            System.out.println(&quot;Number of Days = &quot; + numDays);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_14","title":"Using two values for one switch case statement","body":"<h1>Summary: separate by commas</h1>\n<pre class=\"lang-java prettyprint-override\"><code>switch (name) {\n    case text1 , text4  -&gt; doX() ;\n    case text2          -&gt; doY() ;\n    case text3          -&gt; doZ() ;\n}\n</code></pre>\n<h1>Switch Expressions</h1>\n<p>With the integration of <a href=\"https://openjdk.java.net/jeps/361\" rel=\"noreferrer\"><em>JEP 361: Switch Expressions</em></a> in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_14\" rel=\"noreferrer\">Java 14</a> and later, one can make use of the new form of the switch label using a <strong>comma between multiple values</strong>.</p>\n<pre><code>case text1, text4 -&gt; {\n     //blah\n} \n</code></pre>\n<p>or to rephrase the demo from <a href=\"https://stackoverflow.com/a/16706729/1746118\">one of the answers</a>, something like :-</p>\n<pre><code>public class RephraseDemo {\n\n    public static void main(String[] args) {\n        int month = 9;\n        int year = 2018;\n        int numDays = 0;\n\n        switch (month) {\n            case 1, 3, 5, 7, 8, 10, 12 -&gt;{\n                numDays = 31;\n            }\n            case 4, 6, 9, 11 -&gt;{\n                numDays = 30;\n            }\n            case 2 -&gt;{\n                if (((year % 4 == 0) &amp;&amp;\n                        !(year % 100 == 0))\n                        || (year % 400 == 0))\n                    numDays = 29;\n                else\n                    numDays = 28;\n            }\n            default -&gt;{\n                System.out.println(&quot;Invalid month.&quot;);\n\n            }\n        }\n        System.out.println(&quot;Number of Days = &quot; + numDays);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14145725,"reputation":71,"user_id":10219124,"display_name":"Joseph DSCS"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1540473504,"creation_date":1540473504,"answer_id":52990272,"question_id":16706716,"body_markdown":"You can use:\r\n\r\n    case text1: case text4: \r\n         do stuff;\r\n         break;","title":"Using two values for one switch case statement","body":"<p>You can use:</p>\n\n<pre><code>case text1: case text4: \n     do stuff;\n     break;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4734827,"reputation":4157,"user_id":7109598,"display_name":"Iskuskov Alexander"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1581243129,"creation_date":1581242781,"answer_id":60135438,"question_id":16706716,"body_markdown":"[**JEP 354: Switch Expressions (Preview)**](https://openjdk.java.net/jeps/354) in JDK-13 and [**JEP 361: Switch Expressions (Standard)**](https://openjdk.java.net/jeps/361) in JDK-14 will extend the _**switch statement**_ so it can be used as an _**expression**_. \r\n\r\nNow you can:\r\n\r\n - directly assign variable from _switch expression_, \r\n - use new form of switch label (`case L -&gt;`):\r\n   &gt; The code to the right of a &quot;case L -&gt;&quot; switch label is restricted to be an expression, a block, or (for convenience) a throw statement.\r\n - use multiple constants per case, separated by commas, \r\n - and also there are no more value _breaks_:\r\n   &gt; To yield a value from a switch expression, the `break` with value statement is dropped in favor of a `yield` statement.\r\n\r\nSo the demo from [one of the answers](https://stackoverflow.com/a/16706729/1746118) might look like this:\r\n\r\n```java\r\npublic class SwitchExpression {\r\n\r\n  public static void main(String[] args) {\r\n      int month = 9;\r\n      int year = 2018;\r\n      int numDays = switch (month) {\r\n        case 1, 3, 5, 7, 8, 10, 12 -&gt; 31;\r\n        case 4, 6, 9, 11 -&gt; 30;\r\n        case 2 -&gt; {\r\n          if (java.time.Year.of(year).isLeap()) {\r\n            System.out.println(&quot;Wow! It&#39;s leap year!&quot;);\r\n            yield 29;\r\n          } else {\r\n            yield 28;\r\n          }\r\n        }\r\n        default -&gt; {\r\n          System.out.println(&quot;Invalid month.&quot;);\r\n          yield 0;\r\n        }\r\n      };\r\n      System.out.println(&quot;Number of Days = &quot; + numDays);\r\n  }\r\n}\r\n\r\n```","title":"Using two values for one switch case statement","body":"<p><a href=\"https://openjdk.java.net/jeps/354\" rel=\"nofollow noreferrer\"><strong>JEP 354: Switch Expressions (Preview)</strong></a> in JDK-13 and <a href=\"https://openjdk.java.net/jeps/361\" rel=\"nofollow noreferrer\"><strong>JEP 361: Switch Expressions (Standard)</strong></a> in JDK-14 will extend the <em><strong>switch statement</strong></em> so it can be used as an <em><strong>expression</strong></em>. </p>\n\n<p>Now you can:</p>\n\n<ul>\n<li>directly assign variable from <em>switch expression</em>, </li>\n<li>use new form of switch label (<code>case L -&gt;</code>):\n\n<blockquote>\n  <p>The code to the right of a \"case L ->\" switch label is restricted to be an expression, a block, or (for convenience) a throw statement.</p>\n</blockquote></li>\n<li>use multiple constants per case, separated by commas, </li>\n<li>and also there are no more value <em>breaks</em>:\n\n<blockquote>\n  <p>To yield a value from a switch expression, the <code>break</code> with value statement is dropped in favor of a <code>yield</code> statement.</p>\n</blockquote></li>\n</ul>\n\n<p>So the demo from <a href=\"https://stackoverflow.com/a/16706729/1746118\">one of the answers</a> might look like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SwitchExpression {\n\n  public static void main(String[] args) {\n      int month = 9;\n      int year = 2018;\n      int numDays = switch (month) {\n        case 1, 3, 5, 7, 8, 10, 12 -&gt; 31;\n        case 4, 6, 9, 11 -&gt; 30;\n        case 2 -&gt; {\n          if (java.time.Year.of(year).isLeap()) {\n            System.out.println(\"Wow! It's leap year!\");\n            yield 29;\n          } else {\n            yield 28;\n          }\n        }\n        default -&gt; {\n          System.out.println(\"Invalid month.\");\n          yield 0;\n        }\n      };\n      System.out.println(\"Number of Days = \" + numDays);\n  }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user14211107"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1612417950,"creation_date":1605026115,"answer_id":64772917,"question_id":16706716,"body_markdown":"# Java 12 and above #\r\n```\r\nswitch (name) {\r\n    case text1, text4 -&gt; // do something ;\r\n    case text2, text3, text 5 -&gt; // do something else ;\r\n    default -&gt; // default case ;\r\n}\r\n```\r\nYou can also assign a value through the switch case expression : \r\n\r\n```\r\nString text = switch (name) {\r\n\tcase text1, text4 -&gt; &quot;hello&quot; ;\r\n    case text2, text3, text5 -&gt; &quot;world&quot; ;\r\n    default -&gt; &quot;goodbye&quot;;\r\n};\r\n```\r\n\r\n## &quot;yield&quot; keyword ##\r\nIt allows you to return a value by the switch case expression\r\n\r\n```\r\nString text = switch (name) {\r\n\tcase text1, text4 -&gt;\r\n        yield &quot;hello&quot;;\r\n    case text2, text3, text5 -&gt;\r\n        yield &quot;world&quot;;\r\n    default -&gt;\r\n        yield &quot;goodbye&quot;;\r\n};\r\n```\r\n","title":"Using two values for one switch case statement","body":"<h1>Java 12 and above</h1>\n<pre><code>switch (name) {\n    case text1, text4 -&gt; // do something ;\n    case text2, text3, text 5 -&gt; // do something else ;\n    default -&gt; // default case ;\n}\n</code></pre>\n<p>You can also assign a value through the switch case expression :</p>\n<pre><code>String text = switch (name) {\n    case text1, text4 -&gt; &quot;hello&quot; ;\n    case text2, text3, text5 -&gt; &quot;world&quot; ;\n    default -&gt; &quot;goodbye&quot;;\n};\n</code></pre>\n<h2>&quot;yield&quot; keyword</h2>\n<p>It allows you to return a value by the switch case expression</p>\n<pre><code>String text = switch (name) {\n    case text1, text4 -&gt;\n        yield &quot;hello&quot;;\n    case text2, text3, text5 -&gt;\n        yield &quot;world&quot;;\n    default -&gt;\n        yield &quot;goodbye&quot;;\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7648377,"reputation":471,"user_id":5798141,"display_name":"flags"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624377188,"creation_date":1624377188,"answer_id":68086882,"question_id":16706716,"body_markdown":"Another variation?\r\n\r\n      switch (name) {\r\n        case [&#39;text1&#39;, &#39;text2&#39;]:\r\n          // do something\r\n          break\r\n        case &#39;text3&#39;:\r\n          // do something\r\n          break\r\n        default:\r\n          // do something\r\n          break\r\n      }\r\n\r\n","title":"Using two values for one switch case statement","body":"<p>Another variation?</p>\n<pre><code>  switch (name) {\n    case ['text1', 'text2']:\n      // do something\n      break\n    case 'text3':\n      // do something\n      break\n    default:\n      // do something\n      break\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22600671,"reputation":1,"user_id":16782288,"display_name":"antonioalbert0"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1630578630,"creation_date":1630578630,"answer_id":69028549,"question_id":16706716,"body_markdown":"you can also do this\r\n\r\n```\r\nlet date = new Date().getDay();\r\nswitch (date) {\r\n  case 0: console.log(&quot;domingo&quot;); break;\r\n  case 1: console.log(&quot;segunda&quot;); break;\r\n  case 2: console.log(&quot;ter&#231;a&quot;); break;\r\n  case 3: console.log(&quot;quarta&quot;); break;\r\n  case 4: console.log(&quot;quinta&quot;); break;\r\n  case 5: console.log(&quot;sexta&quot;); break;\r\n  case 6: console.log(&quot;s&#225;bado&quot;); break;\r\n  default: console.log(&quot;dia inv&#225;lido&quot;);\r\n}\r\n```","title":"Using two values for one switch case statement","body":"<p>you can also do this</p>\n<pre><code>let date = new Date().getDay();\nswitch (date) {\n  case 0: console.log(&quot;domingo&quot;); break;\n  case 1: console.log(&quot;segunda&quot;); break;\n  case 2: console.log(&quot;terça&quot;); break;\n  case 3: console.log(&quot;quarta&quot;); break;\n  case 4: console.log(&quot;quinta&quot;); break;\n  case 5: console.log(&quot;sexta&quot;); break;\n  case 6: console.log(&quot;sábado&quot;); break;\n  default: console.log(&quot;dia inválido&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19782278,"reputation":13066,"user_id":14487032,"display_name":"Abraham"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635555027,"creation_date":1631020736,"answer_id":69088983,"question_id":16706716,"body_markdown":"# A more beautiful way to handle that\r\n\r\n    if ([&quot;Joe&quot;, &quot;Peterson&quot;, &quot;Bond&quot; ].indexOf(name) &gt; -1)\r\n\r\n        //Do something\r\n\r\n    else if ([&quot;Joe&quot;, &quot;Peterson&quot;, &quot;Bond&quot; ].indexOf(name) &gt; -1)\r\n\r\n        //Do other  ...\r\n\r\nYou can do that for multiple values with the same result\r\n","title":"Using two values for one switch case statement","body":"<h1>A more beautiful way to handle that</h1>\n<pre><code>if ([&quot;Joe&quot;, &quot;Peterson&quot;, &quot;Bond&quot; ].indexOf(name) &gt; -1)\n\n    //Do something\n\nelse if ([&quot;Joe&quot;, &quot;Peterson&quot;, &quot;Bond&quot; ].indexOf(name) &gt; -1)\n\n    //Do other  ...\n</code></pre>\n<p>You can do that for multiple values with the same result</p>\n"},{"tags":[],"owner":{"account_id":24365502,"reputation":21,"user_id":18299301,"display_name":"Bryant Davis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669052486,"creation_date":1669052443,"answer_id":74522889,"question_id":16706716,"body_markdown":"if you just add a : then every case will run the same code block until you get to the first break. so in this case 123, 456 have the same execution. Be sure to include the break and if you add code for 123 and 456 with no break then both code blocks will be ran. this may or may not be the case for Java but in JavaScript you open {} whenever you have scoped variables that you need to define inside the case otherwise they leak/break through to the other cases.\r\n\r\n        case &#39;123&#39;:\r\n        case &#39;456&#39;: //some code\r\n             break;\r\n        case &#39;789&#39; {\r\n        /// some code\r\n             break;\r\n    }  \r\n     default break;","title":"Using two values for one switch case statement","body":"<p>if you just add a : then every case will run the same code block until you get to the first break. so in this case 123, 456 have the same execution. Be sure to include the break and if you add code for 123 and 456 with no break then both code blocks will be ran. this may or may not be the case for Java but in JavaScript you open {} whenever you have scoped variables that you need to define inside the case otherwise they leak/break through to the other cases.</p>\n<pre><code>    case '123':\n    case '456': //some code\n         break;\n    case '789' {\n    /// some code\n         break;\n}  \n default break;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13845937,"reputation":373,"user_id":9995087,"display_name":"Kaan Ateşel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686341621,"creation_date":1686341621,"answer_id":76443380,"question_id":16706716,"body_markdown":"If you are using and enum you can just sparate them with comma and you ready to go...\r\n\r\n    switch (xyzEnum) {\r\n            case x, y -&gt; {\r\n                //Do stuff\r\n            }\r\n            case x -&gt; {\r\n                //Do stuff\r\n            }\r\n        }","title":"Using two values for one switch case statement","body":"<p>If you are using and enum you can just sparate them with comma and you ready to go...</p>\n<pre><code>switch (xyzEnum) {\n        case x, y -&gt; {\n            //Do stuff\n        }\n        case x -&gt; {\n            //Do stuff\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1875578,"reputation":6807,"user_id":1696863,"accept_rate":73,"display_name":"Ankush"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":762952,"favorite_count":0,"down_vote_count":16,"up_vote_count":461,"accepted_answer_id":16706729,"answer_count":17,"score":445,"last_activity_date":1686341621,"creation_date":1369289454,"question_id":16706716,"body_markdown":"In my code, the program does something depending on the text entered by the user. My code looks like:\r\n\r\n    switch (name) {\r\n\t\t\tcase text1: {\r\n\t\t\t\t//blah\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase text2: {\r\n\t\t\t\t//blah\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase text3: {\r\n\t\t\t\t//blah\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase text4: {\r\n\t\t\t\t//blah\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\nHowever, the code inside cases `text1` and `text4` is the same. I was therefore wondering if it would be possible for me to implement something like\r\n\r\n    case text1||text4: {\r\n\t\t\t\t//blah\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\nI know that the `||` operator won&#39;t work in the case statement but is there something similar I can use.","title":"Using two values for one switch case statement","body":"<p>In my code, the program does something depending on the text entered by the user. My code looks like:</p>\n\n<pre><code>switch (name) {\n        case text1: {\n            //blah\n            break;\n        }\n        case text2: {\n            //blah\n            break;\n        }\n        case text3: {\n            //blah\n            break;\n        }\n        case text4: {\n            //blah\n            break;\n        }\n</code></pre>\n\n<p>However, the code inside cases <code>text1</code> and <code>text4</code> is the same. I was therefore wondering if it would be possible for me to implement something like</p>\n\n<pre><code>case text1||text4: {\n            //blah\n            break;\n        }\n</code></pre>\n\n<p>I know that the <code>||</code> operator won't work in the case statement but is there something similar I can use.</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1686325392,"post_id":76441774,"comment_id":134788043,"body_markdown":"&quot;how can i get rid of this huge if-els construct?&quot; you can&#39;t really, as you are using `contains` to check. If you used `equals`, you could change to a `switch` or use a `Map`.","body":"&quot;how can i get rid of this huge if-els construct?&quot; you can&#39;t really, as you are using <code>contains</code> to check. If you used <code>equals</code>, you could change to a <code>switch</code> or use a <code>Map</code>."},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1686325709,"post_id":76441774,"comment_id":134788107,"body_markdown":"Why do you want? If it isn&#39;t broken, don&#39;t fix it as we say.. I actually seen much worse than this. When you have lots of alternatives, you&#39;ll have lots of if/else or switch. switch doesn&#39;t save lots of code anyway, I don&#39;t see it used that much. You can save code where you test `chooseNumber`, the `try...catch` can be before the if, as the catch raises the same type of error for all cases","body":"Why do you want? If it isn&#39;t broken, don&#39;t fix it as we say.. I actually seen much worse than this. When you have lots of alternatives, you&#39;ll have lots of if/else or switch. switch doesn&#39;t save lots of code anyway, I don&#39;t see it used that much. You can save code where you test <code>chooseNumber</code>, the <code>try...catch</code> can be before the if, as the catch raises the same type of error for all cases"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1686325712,"post_id":76441774,"comment_id":134788108,"body_markdown":"One possibility would be to extract the tokens beforehand, store them in some configuration-object and feed this configuration-object into a [chain of responsibility](https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern).","body":"One possibility would be to extract the tokens beforehand, store them in some configuration-object and feed this configuration-object into a <a href=\"https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern\" rel=\"nofollow noreferrer\">chain of responsibility</a>."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686325773,"post_id":76441774,"comment_id":134788117,"body_markdown":"`contains()` is probably a bad choice. It will match anything that contains the string, like `contains(&quot;substring&quot;)` will return true for input `&quot;abcd1234substringikdjfnv@&quot;`.","body":"<code>contains()</code> is probably a bad choice. It will match anything that contains the string, like <code>contains(&quot;substring&quot;)</code> will return true for input <code>&quot;abcd1234substringikdjfnv@&quot;</code>."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1686325847,"post_id":76441774,"comment_id":134788139,"body_markdown":"@Kaddath a cascase of `if-else`, or a large `switch` increases friction and coupling. A more dynamic approach reduces friction and coupling.","body":"@Kaddath a cascase of <code>if-else</code>, or a large <code>switch</code> increases friction and coupling. A more dynamic approach reduces friction and coupling."},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1686325973,"post_id":76441774,"comment_id":134788159,"body_markdown":"@Turing85 yes but it doesn&#39;t seem to be the low hanging fruit in this code, I would be more worried about the number of calls to `contains`, your suggestion to extract tokens beforehand is very valid in this perspective. I also think the question would be a better fit for https://codereview.stackexchange.com/ as the code works","body":"@Turing85 yes but it doesn&#39;t seem to be the low hanging fruit in this code, I would be more worried about the number of calls to <code>contains</code>, your suggestion to extract tokens beforehand is very valid in this perspective. I also think the question would be a better fit for <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> as the code works"},{"owner":{"account_id":27943660,"reputation":3,"user_id":21339128,"display_name":"InnerException"},"score":0,"creation_date":1686326549,"post_id":76441774,"comment_id":134788311,"body_markdown":"Thank you for your help and advice, I was just told that this is a noodle code, and it somehow needs to be remade by removing if els.","body":"Thank you for your help and advice, I was just told that this is a noodle code, and it somehow needs to be remade by removing if els."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686328052,"post_id":76441774,"comment_id":134788613,"body_markdown":"@InnerException, you&#39;re using _contains_.  Will _chooseAction_ be just one word, or a sentence?","body":"@InnerException, you&#39;re using <i>contains</i>.  Will <i>chooseAction</i> be just one word, or a sentence?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1686334761,"post_id":76441774,"comment_id":134789807,"body_markdown":"You could indeed map the command strings to the commands using a `Map`: `Map&lt;String, Consumer&lt;StringProcessing&gt;&gt; map = Map.of(&quot;append&quot;, StringProcessing::appendString, &quot;tolowercase&quot;, StringProcessing::toLowerCaseString, ...)`","body":"You could indeed map the command strings to the commands using a <code>Map</code>: <code>Map&lt;String, Consumer&lt;StringProcessing&gt;&gt; map = Map.of(&quot;append&quot;, StringProcessing::appendString, &quot;tolowercase&quot;, StringProcessing::toLowerCaseString, ...)</code>"},{"owner":{"account_id":27943660,"reputation":3,"user_id":21339128,"display_name":"InnerException"},"score":0,"creation_date":1686341310,"post_id":76441774,"comment_id":134790848,"body_markdown":"@Reilas its just one word","body":"@Reilas its just one word"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686340677,"creation_date":1686328459,"answer_id":76442201,"question_id":76441774,"body_markdown":"There are a few approaches.\r\n\r\nIs the _chooseAction_ just one word, or multiple?\r\n\r\nFor one word, you can use a switch statement.  \r\nThis will, at least, reduce the amount of space the code occupies.\r\n\r\nAs a note, you can use the _[String#equals](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#equals(java.lang.Object))_ or _[String#equalsIgnoreCase](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#equalsIgnoreCase(java.lang.String))_ methods for comparison.  \r\nAdditionally, there is _[String#startsWith](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#startsWith(java.lang.String))_, and _[String#endsWith](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#startsWith(java.lang.String))_.\r\n\r\nSince I don&#39;t have your entire code, here is an example.  \r\n\r\nA note here, you have an _acosComplete_ method call for _atan_, looks like a typo.\r\n\r\n```java\r\nScanner scanner = new Scanner(System.in);\r\nString chooseAction = scanner.nextLine();\r\nswitch (chooseAction) {\r\n    case &quot;sum&quot; -&gt; new Calculator().sumComplete();\r\n    case &quot;minus&quot; -&gt; new Calculator().minusComplete();\r\n    case &quot;multiplication&quot; -&gt; new Calculator().multiplicationComplete();\r\n    case &quot;division&quot; -&gt; new Calculator().divisionComplete();\r\n    case &quot;interest&quot; -&gt; new Calculator().interestComplete();\r\n    case &quot;sqrt&quot; -&gt; new Calculator().sqrtComplete();\r\n    case &quot;cbrt&quot; -&gt; new Calculator().cbrtComplete();\r\n    case &quot;pow&quot; -&gt; new Calculator().powComplete();\r\n    case &quot;sin&quot; -&gt; new Calculator().sinComplete();\r\n    case &quot;cos&quot; -&gt; new Calculator().cosComplete();\r\n    case &quot;tan&quot; -&gt; new Calculator().tanComplete();\r\n    case &quot;dis&quot; -&gt; new Calculator().disc();\r\n    case &quot;average&quot; -&gt; new Calculator().averageComplete();\r\n    case &quot;asin&quot; -&gt; new Calculator().asinComplete();\r\n    case &quot;acos&quot;, &quot;atan&quot; -&gt; new Calculator().acosComplete();\r\n    case &quot;log&quot; -&gt; new Calculator().logComplete();\r\n    case &quot;log10&quot; -&gt; new Calculator().log10Complete();\r\n    case &quot;sinh&quot; -&gt; new Calculator().sinhComplete();\r\n    case &quot;cosh&quot; -&gt; new Calculator().coshComplete();\r\n    case &quot;tanh&quot; -&gt; new Calculator().tanhComplete();\r\n}\r\n```\r\n\r\nAfter reviewing your code further, I believe the _chooseAction_ string most likely contains more than one word.\r\n\r\nSo, this approach is more involved.\r\n\r\nThe concept here is to use a _[regular expression pattern](https://en.wikipedia.org/wiki/Regular_expression)_&amp;mdash;also referred to as _regex_.  \r\nBy utilizing a _regex pattern_, we can, essentially, simulate the _String#contains_ method.\r\n\r\nIf you&#39;re not familiar, _regex_ is not specific to _Java_, many languages implement it.  \r\nIt&#39;s commonly used in _Unix_.  \r\nIt is not a language, per se, just a syntax.&amp;nbsp; It&#39;s used to match _string_ values.\r\n\r\n_Wikipedia_ offers an excellent overview.  \r\nThere are also numerous books, I recommend anything by _O&#39;Reilly Media_.  \r\nMy personal favorite of theirs is, _[Mastering Regular Expressions, 3rd Edition](https://www.oreilly.com/library/view/mastering-regular-expressions/0596528124/)_.\r\n\r\n_Java_ offers the _[java.util.regex](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/package-summary.html)_ framework, which includes the _[Pattern](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_ and _[Matcher](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html)_ classes.\r\n\r\nHere is a full re-factor.  \r\nIronically, I used a _regex_ to format the code.  \r\n\r\n_Regex_ can be a confusing topic, so let me know if you have any questions.  \r\nIf you plan to scale the program, by adding more values, this approach can prove helpful.\r\n\r\nAs a final note, I fixed the _acosComplete_ method call for _atan_.\r\n\r\n```java\r\nScanner scanner = new Scanner(System.in);\r\nString chooseAction = scanner.nextLine();\r\nPattern pattern = Pattern.compile(&quot;string|calc|info|system|time|ip|check|log&quot;);\r\nMatcher matcher = pattern.matcher(chooseAction);\r\nif (matcher.find()) {\r\n    switch (matcher.group()) {\r\n        case &quot;string&quot; -&gt; {\r\n            pattern = Pattern.compile(&quot;substring|contains|append|tolowercase|touppercase|replace&quot;);\r\n            matcher = pattern.matcher(chooseAction);\r\n            switch (matcher.group()) {\r\n                case &quot;substring&quot; -&gt; new StringProcessing().substringString();\r\n                case &quot;contains&quot; -&gt; {}\r\n                case &quot;append&quot; -&gt; new StringProcessing().appendString();\r\n                case &quot;tolowercase&quot; -&gt; new StringProcessing().toLowerCaseString();\r\n                case &quot;touppercase&quot; -&gt; new StringProcessing().toUpperCaseString();\r\n                case &quot;replace&quot; -&gt; new StringProcessing().replaceString();\r\n            }\r\n        }\r\n        case &quot;calc&quot; -&gt; {\r\n            pattern = Pattern.compile(&quot;sum|minus|multiplication|division|interest|sqrt|cbrt|pow|sin|cos|tan|dis|average|asin|acos|atan|log|log10|sinh|cosh|tanh&quot;);\r\n            matcher = pattern.matcher(chooseAction);\r\n            switch (matcher.group()) {\r\n                case &quot;sum&quot; -&gt; new Calculator().sumComplete();\r\n                case &quot;minus&quot; -&gt; new Calculator().minusComplete();\r\n                case &quot;multiplication&quot; -&gt; new Calculator().multiplicationComplete();\r\n                case &quot;division&quot; -&gt; new Calculator().divisionComplete();\r\n                case &quot;interest&quot; -&gt; new Calculator().interestComplete();\r\n                case &quot;sqrt&quot; -&gt; new Calculator().sqrtComplete();\r\n                case &quot;cbrt&quot; -&gt; new Calculator().cbrtComplete();\r\n                case &quot;pow&quot; -&gt; new Calculator().powComplete();\r\n                case &quot;sin&quot; -&gt; new Calculator().sinComplete();\r\n                case &quot;cos&quot; -&gt; new Calculator().cosComplete();\r\n                case &quot;tan&quot; -&gt; new Calculator().tanComplete();\r\n                case &quot;dis&quot; -&gt; new Calculator().disc();\r\n                case &quot;average&quot; -&gt; new Calculator().averageComplete();\r\n                case &quot;asin&quot; -&gt; new Calculator().asinComplete();\r\n                case &quot;acos&quot; -&gt; new Calculator().acosComplete();\r\n                case &quot;atan&quot; -&gt; new Calculator().atanComplete();\r\n                case &quot;log&quot; -&gt; new Calculator().logComplete();\r\n                case &quot;log10&quot; -&gt; new Calculator().log10Complete();\r\n                case &quot;sinh&quot; -&gt; new Calculator().sinhComplete();\r\n                case &quot;cosh&quot; -&gt; new Calculator().coshComplete();\r\n                case &quot;tanh&quot; -&gt; new Calculator().tanhComplete();\r\n            }\r\n        }\r\n        case &quot;info&quot; -&gt; {\r\n            out.println(&quot;Available methods for info:\\n &quot; +\r\n                &quot;System&quot;);\r\n            setChooseAction(scanner.nextLine().toLowerCase());\r\n            new Logger().LogSubMethod(getChooseAction());\r\n            if (chooseAction.contains(&quot;system&quot;)) {\r\n                new SystemInfo().getSystemInfo();\r\n            }\r\n        }\r\n        case &quot;system&quot; -&gt; {}\r\n        case &quot;time&quot; -&gt; {\r\n            Date date = new Date();\r\n            out.println(&quot;Current time: &quot; + date);\r\n            out.println(&quot;--------------------------------&quot;);\r\n            Menu();\r\n        }\r\n        case &quot;ip&quot; -&gt; out.println(&quot;Your ip: &quot; + new GetIp().getIp());\r\n        case &quot;check&quot; -&gt; {\r\n            new CheckFilesAndDirectory().allCheck();\r\n            out.println(&quot;Check complete.&quot;);\r\n            new MainMenu().Menu();\r\n        }\r\n        case &quot;log&quot; -&gt; {\r\n            out.println(&quot;Available methods for log:\\n &quot; +\r\n                &quot;Show\\n&quot; +\r\n                &quot;Clear&quot;);\r\n            setChooseAction(scanner.nextLine().toLowerCase());\r\n            new Logger().LogSubMethod(getChooseAction());\r\n            if (chooseAction.contains(&quot;show&quot;)) {\r\n                out.println(&quot;1 - All logs   2 - Commands log  3 - Session logs&quot;);\r\n                setEnterChooseNumber(scanner.nextInt());\r\n                int chooseNumber = getEnterChooseNumber();\r\n                if (chooseNumber == 1) {\r\n                    try {\r\n                        new LogReader().allLogReader();\r\n                        mm.Menu();\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                } else if (chooseNumber == 2) {\r\n                    try {\r\n                        new LogReader().logCommandReader();\r\n                        mm.Menu();\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                } else if (chooseNumber == 3) {\r\n                    try {\r\n                        new LogReader().logSessionReader();\r\n                        mm.Menu();\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                }\r\n            }\r\n            if (chooseAction.contains(&quot;exit&quot;)) {\r\n                out.println(&quot;Bye bye!&quot;);\r\n                System.exit(0);\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"How can you shorten the multiple if-else construct?","body":"<p>There are a few approaches.</p>\n<p>Is the <em>chooseAction</em> just one word, or multiple?</p>\n<p>For one word, you can use a switch statement.<br />\nThis will, at least, reduce the amount of space the code occupies.</p>\n<p>As a note, you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">String#equals</a></em> or <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#equalsIgnoreCase(java.lang.String)\" rel=\"nofollow noreferrer\">String#equalsIgnoreCase</a></em> methods for comparison.<br />\nAdditionally, there is <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#startsWith(java.lang.String)\" rel=\"nofollow noreferrer\">String#startsWith</a></em>, and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#startsWith(java.lang.String)\" rel=\"nofollow noreferrer\">String#endsWith</a></em>.</p>\n<p>Since I don't have your entire code, here is an example.</p>\n<p>A note here, you have an <em>acosComplete</em> method call for <em>atan</em>, looks like a typo.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scanner = new Scanner(System.in);\nString chooseAction = scanner.nextLine();\nswitch (chooseAction) {\n    case &quot;sum&quot; -&gt; new Calculator().sumComplete();\n    case &quot;minus&quot; -&gt; new Calculator().minusComplete();\n    case &quot;multiplication&quot; -&gt; new Calculator().multiplicationComplete();\n    case &quot;division&quot; -&gt; new Calculator().divisionComplete();\n    case &quot;interest&quot; -&gt; new Calculator().interestComplete();\n    case &quot;sqrt&quot; -&gt; new Calculator().sqrtComplete();\n    case &quot;cbrt&quot; -&gt; new Calculator().cbrtComplete();\n    case &quot;pow&quot; -&gt; new Calculator().powComplete();\n    case &quot;sin&quot; -&gt; new Calculator().sinComplete();\n    case &quot;cos&quot; -&gt; new Calculator().cosComplete();\n    case &quot;tan&quot; -&gt; new Calculator().tanComplete();\n    case &quot;dis&quot; -&gt; new Calculator().disc();\n    case &quot;average&quot; -&gt; new Calculator().averageComplete();\n    case &quot;asin&quot; -&gt; new Calculator().asinComplete();\n    case &quot;acos&quot;, &quot;atan&quot; -&gt; new Calculator().acosComplete();\n    case &quot;log&quot; -&gt; new Calculator().logComplete();\n    case &quot;log10&quot; -&gt; new Calculator().log10Complete();\n    case &quot;sinh&quot; -&gt; new Calculator().sinhComplete();\n    case &quot;cosh&quot; -&gt; new Calculator().coshComplete();\n    case &quot;tanh&quot; -&gt; new Calculator().tanhComplete();\n}\n</code></pre>\n<p>After reviewing your code further, I believe the <em>chooseAction</em> string most likely contains more than one word.</p>\n<p>So, this approach is more involved.</p>\n<p>The concept here is to use a <em><a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expression pattern</a></em>—also referred to as <em>regex</em>.<br />\nBy utilizing a <em>regex pattern</em>, we can, essentially, simulate the <em>String#contains</em> method.</p>\n<p>If you're not familiar, <em>regex</em> is not specific to <em>Java</em>, many languages implement it.<br />\nIt's commonly used in <em>Unix</em>.<br />\nIt is not a language, per se, just a syntax.  It's used to match <em>string</em> values.</p>\n<p><em>Wikipedia</em> offers an excellent overview.<br />\nThere are also numerous books, I recommend anything by <em>O'Reilly Media</em>.<br />\nMy personal favorite of theirs is, <em><a href=\"https://www.oreilly.com/library/view/mastering-regular-expressions/0596528124/\" rel=\"nofollow noreferrer\">Mastering Regular Expressions, 3rd Edition</a></em>.</p>\n<p><em>Java</em> offers the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/package-summary.html\" rel=\"nofollow noreferrer\">java.util.regex</a></em> framework, which includes the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Matcher</a></em> classes.</p>\n<p>Here is a full re-factor.<br />\nIronically, I used a <em>regex</em> to format the code.</p>\n<p><em>Regex</em> can be a confusing topic, so let me know if you have any questions.<br />\nIf you plan to scale the program, by adding more values, this approach can prove helpful.</p>\n<p>As a final note, I fixed the <em>acosComplete</em> method call for <em>atan</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scanner = new Scanner(System.in);\nString chooseAction = scanner.nextLine();\nPattern pattern = Pattern.compile(&quot;string|calc|info|system|time|ip|check|log&quot;);\nMatcher matcher = pattern.matcher(chooseAction);\nif (matcher.find()) {\n    switch (matcher.group()) {\n        case &quot;string&quot; -&gt; {\n            pattern = Pattern.compile(&quot;substring|contains|append|tolowercase|touppercase|replace&quot;);\n            matcher = pattern.matcher(chooseAction);\n            switch (matcher.group()) {\n                case &quot;substring&quot; -&gt; new StringProcessing().substringString();\n                case &quot;contains&quot; -&gt; {}\n                case &quot;append&quot; -&gt; new StringProcessing().appendString();\n                case &quot;tolowercase&quot; -&gt; new StringProcessing().toLowerCaseString();\n                case &quot;touppercase&quot; -&gt; new StringProcessing().toUpperCaseString();\n                case &quot;replace&quot; -&gt; new StringProcessing().replaceString();\n            }\n        }\n        case &quot;calc&quot; -&gt; {\n            pattern = Pattern.compile(&quot;sum|minus|multiplication|division|interest|sqrt|cbrt|pow|sin|cos|tan|dis|average|asin|acos|atan|log|log10|sinh|cosh|tanh&quot;);\n            matcher = pattern.matcher(chooseAction);\n            switch (matcher.group()) {\n                case &quot;sum&quot; -&gt; new Calculator().sumComplete();\n                case &quot;minus&quot; -&gt; new Calculator().minusComplete();\n                case &quot;multiplication&quot; -&gt; new Calculator().multiplicationComplete();\n                case &quot;division&quot; -&gt; new Calculator().divisionComplete();\n                case &quot;interest&quot; -&gt; new Calculator().interestComplete();\n                case &quot;sqrt&quot; -&gt; new Calculator().sqrtComplete();\n                case &quot;cbrt&quot; -&gt; new Calculator().cbrtComplete();\n                case &quot;pow&quot; -&gt; new Calculator().powComplete();\n                case &quot;sin&quot; -&gt; new Calculator().sinComplete();\n                case &quot;cos&quot; -&gt; new Calculator().cosComplete();\n                case &quot;tan&quot; -&gt; new Calculator().tanComplete();\n                case &quot;dis&quot; -&gt; new Calculator().disc();\n                case &quot;average&quot; -&gt; new Calculator().averageComplete();\n                case &quot;asin&quot; -&gt; new Calculator().asinComplete();\n                case &quot;acos&quot; -&gt; new Calculator().acosComplete();\n                case &quot;atan&quot; -&gt; new Calculator().atanComplete();\n                case &quot;log&quot; -&gt; new Calculator().logComplete();\n                case &quot;log10&quot; -&gt; new Calculator().log10Complete();\n                case &quot;sinh&quot; -&gt; new Calculator().sinhComplete();\n                case &quot;cosh&quot; -&gt; new Calculator().coshComplete();\n                case &quot;tanh&quot; -&gt; new Calculator().tanhComplete();\n            }\n        }\n        case &quot;info&quot; -&gt; {\n            out.println(&quot;Available methods for info:\\n &quot; +\n                &quot;System&quot;);\n            setChooseAction(scanner.nextLine().toLowerCase());\n            new Logger().LogSubMethod(getChooseAction());\n            if (chooseAction.contains(&quot;system&quot;)) {\n                new SystemInfo().getSystemInfo();\n            }\n        }\n        case &quot;system&quot; -&gt; {}\n        case &quot;time&quot; -&gt; {\n            Date date = new Date();\n            out.println(&quot;Current time: &quot; + date);\n            out.println(&quot;--------------------------------&quot;);\n            Menu();\n        }\n        case &quot;ip&quot; -&gt; out.println(&quot;Your ip: &quot; + new GetIp().getIp());\n        case &quot;check&quot; -&gt; {\n            new CheckFilesAndDirectory().allCheck();\n            out.println(&quot;Check complete.&quot;);\n            new MainMenu().Menu();\n        }\n        case &quot;log&quot; -&gt; {\n            out.println(&quot;Available methods for log:\\n &quot; +\n                &quot;Show\\n&quot; +\n                &quot;Clear&quot;);\n            setChooseAction(scanner.nextLine().toLowerCase());\n            new Logger().LogSubMethod(getChooseAction());\n            if (chooseAction.contains(&quot;show&quot;)) {\n                out.println(&quot;1 - All logs   2 - Commands log  3 - Session logs&quot;);\n                setEnterChooseNumber(scanner.nextInt());\n                int chooseNumber = getEnterChooseNumber();\n                if (chooseNumber == 1) {\n                    try {\n                        new LogReader().allLogReader();\n                        mm.Menu();\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n                } else if (chooseNumber == 2) {\n                    try {\n                        new LogReader().logCommandReader();\n                        mm.Menu();\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n                } else if (chooseNumber == 3) {\n                    try {\n                        new LogReader().logSessionReader();\n                        mm.Menu();\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n\n                }\n            }\n            if (chooseAction.contains(&quot;exit&quot;)) {\n                out.println(&quot;Bye bye!&quot;);\n                System.exit(0);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686329160,"creation_date":1686328526,"answer_id":76442205,"question_id":76441774,"body_markdown":"You could set up a Map with a lambda (here a consumer.  You would need to decide which best fits your design as this is just a bare minimum example.  All this does is take in a String and calls the operation if present.  In this case, the operation is to print a string.\r\n\r\n```\r\npublic class Demo {\r\n    \r\n     Map&lt;String, Consumer&lt;Object&gt;&gt; operations =\r\n        new LinkedHashMap&lt;&gt;(Map.of(\r\n           &quot;div&quot;, a -&gt; new Calculator().division(),\r\n           &quot;add&quot;, a -&gt; new Calculator().addition(), \r\n           &quot;mul&quot;, a -&gt; new Calculator().multiply(),\r\n           &quot;sub&quot;, a -&gt; new Calculator().subtract(),\r\n           &quot;quit&quot;, a -&gt; new Calculator().quit()));\r\n\r\n    public static void main(String[] args) {\r\n        new Demo().start();\r\n    }\r\n\r\n    public void start() {\r\n        Scanner s = new Scanner(System.in);\r\n        System.out.println(&quot;The following operations are availble&quot;);\r\n        for (String op : operations.keySet()) {\r\n            System.out.println(op);\r\n        }\r\n        while (true) {\r\n            String op = s.next();\r\n            if (operations.containsKey(op)) {\r\n                operations.get(op).accept(null);\r\n            } else {\r\n              System.out.println(op + &quot; not found&quot;);\r\n            } \r\n        }\r\n    }\r\n}\r\n\r\nclass Calculator {\r\n    public void division() {\r\n        System.out.println(&quot;Division&quot;);\r\n    }\r\n\r\n    public void addition() {\r\n        System.out.println(&quot;Addition&quot;);\r\n    }\r\n\r\n    public void subtract() {\r\n        System.out.println(&quot;subtraction&quot;);\r\n    }\r\n\r\n    public void multiply() {\r\n        System.out.println(&quot;Multiplication&quot;);\r\n    }\r\n\r\n    public void quit() {\r\n        System.exit(0);\r\n    }\r\n}\r\n```\r\nOnce again, you will have to decide how best to handle this if arguments are involved.  You may even need to write your own functional interface.","title":"How can you shorten the multiple if-else construct?","body":"<p>You could set up a Map with a lambda (here a consumer.  You would need to decide which best fits your design as this is just a bare minimum example.  All this does is take in a String and calls the operation if present.  In this case, the operation is to print a string.</p>\n<pre><code>public class Demo {\n    \n     Map&lt;String, Consumer&lt;Object&gt;&gt; operations =\n        new LinkedHashMap&lt;&gt;(Map.of(\n           &quot;div&quot;, a -&gt; new Calculator().division(),\n           &quot;add&quot;, a -&gt; new Calculator().addition(), \n           &quot;mul&quot;, a -&gt; new Calculator().multiply(),\n           &quot;sub&quot;, a -&gt; new Calculator().subtract(),\n           &quot;quit&quot;, a -&gt; new Calculator().quit()));\n\n    public static void main(String[] args) {\n        new Demo().start();\n    }\n\n    public void start() {\n        Scanner s = new Scanner(System.in);\n        System.out.println(&quot;The following operations are availble&quot;);\n        for (String op : operations.keySet()) {\n            System.out.println(op);\n        }\n        while (true) {\n            String op = s.next();\n            if (operations.containsKey(op)) {\n                operations.get(op).accept(null);\n            } else {\n              System.out.println(op + &quot; not found&quot;);\n            } \n        }\n    }\n}\n\nclass Calculator {\n    public void division() {\n        System.out.println(&quot;Division&quot;);\n    }\n\n    public void addition() {\n        System.out.println(&quot;Addition&quot;);\n    }\n\n    public void subtract() {\n        System.out.println(&quot;subtraction&quot;);\n    }\n\n    public void multiply() {\n        System.out.println(&quot;Multiplication&quot;);\n    }\n\n    public void quit() {\n        System.exit(0);\n    }\n}\n</code></pre>\n<p>Once again, you will have to decide how best to handle this if arguments are involved.  You may even need to write your own functional interface.</p>\n"}],"owner":{"account_id":27943660,"reputation":3,"user_id":21339128,"display_name":"InnerException"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76442201,"answer_count":2,"score":0,"last_activity_date":1686340677,"creation_date":1686325234,"question_id":76441774,"body_markdown":"my program recognizes the entered text as a command, now everything looks like this:\r\n\r\n```\r\n        out.print(&quot;Welcome &quot; + nameProperty + &quot; to the program!\\n&quot; +\r\n                &quot;Input your command: &quot;);\r\n        setChooseAction(scanner.nextLine());\r\n\r\n        new Logger().commandLoggerWriter(getChooseAction());\r\n        if (chooseAction.contains(&quot;string&quot;)) {\r\n            out.println(&quot;Available methods for string:\\n &quot; +\r\n                    &quot;Substring\\n &quot; +\r\n                    &quot;Append\\n&quot; +\r\n                    &quot; toLowerCase&quot; +\r\n                    &quot;\\n toUpperCase&quot; +\r\n                    &quot;\\n Replace&quot;);\r\n            out.print(&quot;Enter method: &quot;);\r\n            setChooseAction(scanner.nextLine().toLowerCase());\r\n            new Logger().LogSubMethod(getChooseAction());\r\n            if (chooseAction.contains(&quot;substring&quot;)) {\r\n                new StringProcessing().substringString();\r\n            }\r\n            if (chooseAction.contains(&quot;contains&quot;)) {\r\n\r\n            }\r\n\r\n            if (chooseAction.contains(&quot;append&quot;)) {\r\n                new StringProcessing().appendString();\r\n            }\r\n            if (chooseAction.contains(&quot;tolowercase&quot;)) {\r\n                new StringProcessing().toLowerCaseString();\r\n            }\r\n            if (chooseAction.contains(&quot;touppercase&quot;)) {\r\n                new StringProcessing().toUpperCaseString();\r\n            }\r\n            if (chooseAction.contains(&quot;replace&quot;)) {\r\n                new StringProcessing().replaceString();\r\n            }\r\n        }\r\n        if (chooseAction.contains(&quot;calc&quot;)) {\r\n            out.println(&quot;Available methods for calculator:\\n &quot; +\r\n                    &quot;Sum\\n&quot; +\r\n                    &quot;minus\\n&quot; +\r\n                    &quot;multiplication\\n&quot; +\r\n                    &quot;division\\n&quot; +\r\n                    &quot;interest\\n&quot; +\r\n                    &quot;sqrt\\n&quot; +\r\n                    &quot;cbrt\\n&quot; +\r\n                    &quot;pow\\n&quot; +\r\n                    &quot;sin\\n&quot; +\r\n                    &quot;cos\\n&quot; +\r\n                    &quot;dis[discernment]\\n&quot; +\r\n                    &quot;tan\\n&quot; +\r\n                    &quot;average\\n&quot; +\r\n                    &quot;asin\\n&quot; +\r\n                    &quot;acos\\n&quot; +\r\n                    &quot;atan\\n&quot; +\r\n                    &quot;log\\n&quot; +\r\n                    &quot;log10\\n&quot; +\r\n                    &quot;sinh\\n&quot; +\r\n                    &quot;cosh\\n&quot; +\r\n                    &quot;tanh\\n&quot;\r\n            );\r\n            setChooseAction(scanner.nextLine().toLowerCase());\r\n            new Logger().LogSubMethod(getChooseAction());\r\n            if (chooseAction.contains(&quot;sum&quot;)) {\r\n                new Calculator().sumComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;minus&quot;)) {\r\n                new Calculator().minusComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;multiplication&quot;)) {\r\n                new Calculator().multiplicationComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;division&quot;)) {\r\n                new Calculator().divisionComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;interest&quot;)) {\r\n                new Calculator().interestComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;sqrt&quot;)) {\r\n                new Calculator().sqrtComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;cbrt&quot;)) {\r\n                new Calculator().cbrtComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;pow&quot;)) {\r\n                new Calculator().powComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;sin&quot;)) {\r\n                new Calculator().sinComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;cos&quot;)) {\r\n                new Calculator().cosComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;tan&quot;)) {\r\n                new Calculator().tanComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;dis&quot;)) {\r\n                new Calculator().disc();\r\n            }\r\n            if (chooseAction.contains(&quot;average&quot;)) {\r\n                new Calculator().averageComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;asin&quot;)) {\r\n                new Calculator().asinComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;acos&quot;)) {\r\n                new Calculator().acosComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;atan&quot;)) {\r\n                new Calculator().acosComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;log&quot;)) {\r\n                new Calculator().logComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;log10&quot;)) {\r\n                new Calculator().log10Complete();\r\n            }\r\n            if (chooseAction.contains(&quot;sinh&quot;)) {\r\n                new Calculator().sinhComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;cosh&quot;)) {\r\n                new Calculator().coshComplete();\r\n            }\r\n            if (chooseAction.contains(&quot;tanh&quot;)) {\r\n                new Calculator().tanhComplete();\r\n            }\r\n\r\n        }\r\n        if (chooseAction.contains(&quot;info&quot;)) {\r\n            out.println(&quot;Available methods for info:\\n &quot; +\r\n                    &quot;System&quot;);\r\n            setChooseAction(scanner.nextLine().toLowerCase());\r\n            new Logger().LogSubMethod(getChooseAction());\r\n            if (chooseAction.contains(&quot;system&quot;)) {\r\n                new SystemInfo().getSystemInfo();\r\n            }\r\n        }\r\n        if (chooseAction.contains(&quot;time&quot;)) {\r\n            Date date = new Date();\r\n            out.println(&quot;Current time: &quot; + date);\r\n            out.println(&quot;--------------------------------&quot;);\r\n            Menu();\r\n        }\r\n        if (chooseAction.contains(&quot;ip&quot;)) {\r\n            out.println(&quot;Your ip: &quot; + new GetIp().getIp());\r\n        }\r\n        if (chooseAction.contains(&quot;check&quot;)) {\r\n            new CheckFilesAndDirectory().allCheck();\r\n            out.println(&quot;Check complete.&quot;);\r\n            new MainMenu().Menu();\r\n\r\n        }\r\n        if (chooseAction.contains(&quot;log&quot;)) {\r\n            out.println(&quot;Available methods for log:\\n &quot; +\r\n                    &quot;Show\\n&quot; +\r\n                    &quot;Clear&quot;);\r\n            setChooseAction(scanner.nextLine().toLowerCase());\r\n            new Logger().LogSubMethod(getChooseAction());\r\n            if (chooseAction.contains(&quot;show&quot;)) {\r\n                out.println(&quot;1 - All logs   2 - Commands log  3 - Session logs&quot;);\r\n                setEnterChooseNumber(scanner.nextInt());\r\n                int chooseNumber = getEnterChooseNumber();\r\n                if (chooseNumber == 1) {\r\n                    try {\r\n                        new LogReader().allLogReader();\r\n                        mm.Menu();\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                } else if (chooseNumber == 2) {\r\n                    try {\r\n                        new LogReader().logCommandReader();\r\n                        mm.Menu();\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                } else if (chooseNumber == 3) {\r\n                    try {\r\n                        new LogReader().logSessionReader();\r\n                        mm.Menu();\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                }\r\n            }\r\n            if (chooseAction.contains(&quot;exit&quot;)) {\r\n                out.println(&quot;Bye bye!&quot;);\r\n                System.exit(0);\r\n            }\r\n        }\r\n```\r\nhow can i get rid of this huge if-els construct?\r\n\r\nI tried to put everything into separate methods in order to comply with the principle of uniqueness, but it didn’t work out, since checking if else is still needed everywhere. thanks for the help","title":"How can you shorten the multiple if-else construct?","body":"<p>my program recognizes the entered text as a command, now everything looks like this:</p>\n<pre><code>        out.print(&quot;Welcome &quot; + nameProperty + &quot; to the program!\\n&quot; +\n                &quot;Input your command: &quot;);\n        setChooseAction(scanner.nextLine());\n\n        new Logger().commandLoggerWriter(getChooseAction());\n        if (chooseAction.contains(&quot;string&quot;)) {\n            out.println(&quot;Available methods for string:\\n &quot; +\n                    &quot;Substring\\n &quot; +\n                    &quot;Append\\n&quot; +\n                    &quot; toLowerCase&quot; +\n                    &quot;\\n toUpperCase&quot; +\n                    &quot;\\n Replace&quot;);\n            out.print(&quot;Enter method: &quot;);\n            setChooseAction(scanner.nextLine().toLowerCase());\n            new Logger().LogSubMethod(getChooseAction());\n            if (chooseAction.contains(&quot;substring&quot;)) {\n                new StringProcessing().substringString();\n            }\n            if (chooseAction.contains(&quot;contains&quot;)) {\n\n            }\n\n            if (chooseAction.contains(&quot;append&quot;)) {\n                new StringProcessing().appendString();\n            }\n            if (chooseAction.contains(&quot;tolowercase&quot;)) {\n                new StringProcessing().toLowerCaseString();\n            }\n            if (chooseAction.contains(&quot;touppercase&quot;)) {\n                new StringProcessing().toUpperCaseString();\n            }\n            if (chooseAction.contains(&quot;replace&quot;)) {\n                new StringProcessing().replaceString();\n            }\n        }\n        if (chooseAction.contains(&quot;calc&quot;)) {\n            out.println(&quot;Available methods for calculator:\\n &quot; +\n                    &quot;Sum\\n&quot; +\n                    &quot;minus\\n&quot; +\n                    &quot;multiplication\\n&quot; +\n                    &quot;division\\n&quot; +\n                    &quot;interest\\n&quot; +\n                    &quot;sqrt\\n&quot; +\n                    &quot;cbrt\\n&quot; +\n                    &quot;pow\\n&quot; +\n                    &quot;sin\\n&quot; +\n                    &quot;cos\\n&quot; +\n                    &quot;dis[discernment]\\n&quot; +\n                    &quot;tan\\n&quot; +\n                    &quot;average\\n&quot; +\n                    &quot;asin\\n&quot; +\n                    &quot;acos\\n&quot; +\n                    &quot;atan\\n&quot; +\n                    &quot;log\\n&quot; +\n                    &quot;log10\\n&quot; +\n                    &quot;sinh\\n&quot; +\n                    &quot;cosh\\n&quot; +\n                    &quot;tanh\\n&quot;\n            );\n            setChooseAction(scanner.nextLine().toLowerCase());\n            new Logger().LogSubMethod(getChooseAction());\n            if (chooseAction.contains(&quot;sum&quot;)) {\n                new Calculator().sumComplete();\n            }\n            if (chooseAction.contains(&quot;minus&quot;)) {\n                new Calculator().minusComplete();\n            }\n            if (chooseAction.contains(&quot;multiplication&quot;)) {\n                new Calculator().multiplicationComplete();\n            }\n            if (chooseAction.contains(&quot;division&quot;)) {\n                new Calculator().divisionComplete();\n            }\n            if (chooseAction.contains(&quot;interest&quot;)) {\n                new Calculator().interestComplete();\n            }\n            if (chooseAction.contains(&quot;sqrt&quot;)) {\n                new Calculator().sqrtComplete();\n            }\n            if (chooseAction.contains(&quot;cbrt&quot;)) {\n                new Calculator().cbrtComplete();\n            }\n            if (chooseAction.contains(&quot;pow&quot;)) {\n                new Calculator().powComplete();\n            }\n            if (chooseAction.contains(&quot;sin&quot;)) {\n                new Calculator().sinComplete();\n            }\n            if (chooseAction.contains(&quot;cos&quot;)) {\n                new Calculator().cosComplete();\n            }\n            if (chooseAction.contains(&quot;tan&quot;)) {\n                new Calculator().tanComplete();\n            }\n            if (chooseAction.contains(&quot;dis&quot;)) {\n                new Calculator().disc();\n            }\n            if (chooseAction.contains(&quot;average&quot;)) {\n                new Calculator().averageComplete();\n            }\n            if (chooseAction.contains(&quot;asin&quot;)) {\n                new Calculator().asinComplete();\n            }\n            if (chooseAction.contains(&quot;acos&quot;)) {\n                new Calculator().acosComplete();\n            }\n            if (chooseAction.contains(&quot;atan&quot;)) {\n                new Calculator().acosComplete();\n            }\n            if (chooseAction.contains(&quot;log&quot;)) {\n                new Calculator().logComplete();\n            }\n            if (chooseAction.contains(&quot;log10&quot;)) {\n                new Calculator().log10Complete();\n            }\n            if (chooseAction.contains(&quot;sinh&quot;)) {\n                new Calculator().sinhComplete();\n            }\n            if (chooseAction.contains(&quot;cosh&quot;)) {\n                new Calculator().coshComplete();\n            }\n            if (chooseAction.contains(&quot;tanh&quot;)) {\n                new Calculator().tanhComplete();\n            }\n\n        }\n        if (chooseAction.contains(&quot;info&quot;)) {\n            out.println(&quot;Available methods for info:\\n &quot; +\n                    &quot;System&quot;);\n            setChooseAction(scanner.nextLine().toLowerCase());\n            new Logger().LogSubMethod(getChooseAction());\n            if (chooseAction.contains(&quot;system&quot;)) {\n                new SystemInfo().getSystemInfo();\n            }\n        }\n        if (chooseAction.contains(&quot;time&quot;)) {\n            Date date = new Date();\n            out.println(&quot;Current time: &quot; + date);\n            out.println(&quot;--------------------------------&quot;);\n            Menu();\n        }\n        if (chooseAction.contains(&quot;ip&quot;)) {\n            out.println(&quot;Your ip: &quot; + new GetIp().getIp());\n        }\n        if (chooseAction.contains(&quot;check&quot;)) {\n            new CheckFilesAndDirectory().allCheck();\n            out.println(&quot;Check complete.&quot;);\n            new MainMenu().Menu();\n\n        }\n        if (chooseAction.contains(&quot;log&quot;)) {\n            out.println(&quot;Available methods for log:\\n &quot; +\n                    &quot;Show\\n&quot; +\n                    &quot;Clear&quot;);\n            setChooseAction(scanner.nextLine().toLowerCase());\n            new Logger().LogSubMethod(getChooseAction());\n            if (chooseAction.contains(&quot;show&quot;)) {\n                out.println(&quot;1 - All logs   2 - Commands log  3 - Session logs&quot;);\n                setEnterChooseNumber(scanner.nextInt());\n                int chooseNumber = getEnterChooseNumber();\n                if (chooseNumber == 1) {\n                    try {\n                        new LogReader().allLogReader();\n                        mm.Menu();\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n                } else if (chooseNumber == 2) {\n                    try {\n                        new LogReader().logCommandReader();\n                        mm.Menu();\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n                } else if (chooseNumber == 3) {\n                    try {\n                        new LogReader().logSessionReader();\n                        mm.Menu();\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n\n                }\n            }\n            if (chooseAction.contains(&quot;exit&quot;)) {\n                out.println(&quot;Bye bye!&quot;);\n                System.exit(0);\n            }\n        }\n</code></pre>\n<p>how can i get rid of this huge if-els construct?</p>\n<p>I tried to put everything into separate methods in order to comply with the principle of uniqueness, but it didn’t work out, since checking if else is still needed everywhere. thanks for the help</p>\n"},{"tags":["java","spring","spring-boot","jwt","servlet-filters"],"comments":[{"owner":{"account_id":7774964,"reputation":91,"user_id":5883358,"display_name":"Andreea Frincu"},"score":0,"creation_date":1686591299,"post_id":76443195,"comment_id":134816798,"body_markdown":"Hello,\nYou can look: https://stackoverflow.com/questions/19825946/how-can-i-add-a-filter-class-in-spring-boot it is explaining how to add a filter.","body":"Hello, You can look: <a href=\"https://stackoverflow.com/questions/19825946/how-can-i-add-a-filter-class-in-spring-boot\" title=\"how can i add a filter class in spring boot\">stackoverflow.com/questions/19825946/&hellip;</a> it is explaining how to add a filter."}],"owner":{"account_id":19891040,"reputation":33,"user_id":14573087,"display_name":"alimrn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686339836,"creation_date":1686339148,"question_id":76443195,"body_markdown":"I have added a filter in my spring backend for JWT authentication alongside a CORSFilter, however it seems that my `JWTAuthFilter` is not getting executed at all(`CORSFilter` has no problems and gets executed). \r\n\r\n\r\nI tried adding print statements in `init` and `doFilter` and also adding `@ComponentScan` in my main application, but it still does not work. How can I fix it?   \r\nMy CORS Filter :\r\n\r\n```\r\n//@Configuration\r\n@Component\r\n@Order(1)\r\npublic class CORSFilter {\r\n\r\n    @Bean\r\n    public WebMvcConfigurer getCorsConfiguration(){\r\n        return new WebMvcConfigurer() {\r\n            @Override\r\n            public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/**&quot;)\r\n                        .allowedOrigins(&quot;*&quot;)\r\n                        .allowedMethods(&quot;*&quot;)\r\n                        .allowedHeaders(&quot;*&quot;);\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\nMy JWT Filter :\r\n\r\n```\r\n@Component\r\n@Order(2)\r\n@WebFilter(&quot;/*&quot;)\r\npublic class JWTAuthFilter implements Filter {\r\n\r\n    @Autowired\r\n    private BalootService balootService;\r\n\r\n    public void init(FilterConfig config) throws ServletException {\r\n        System.out.println(&quot;init&quot;); //not getting printed !\r\n    }\r\n\r\n    public void destroy() {\r\n    }\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n        System.out.println(&quot;jwt filter&quot;); //not getting printed\r\n        //processing the request\r\n```\r\nMy main application :\r\n\r\n\r\n```\r\n@SpringBootApplication\r\n//@RestController\r\n@ServletComponentScan\r\n@ComponentScan(basePackages = {&quot;com.baloot.baloot&quot;, &quot;com.baloot.baloot.filters&quot;})\r\npublic class BalootApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(BalootApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\n","title":"Spring filter for JWT not getting executed","body":"<p>I have added a filter in my spring backend for JWT authentication alongside a CORSFilter, however it seems that my <code>JWTAuthFilter</code> is not getting executed at all(<code>CORSFilter</code> has no problems and gets executed).</p>\n<p>I tried adding print statements in <code>init</code> and <code>doFilter</code> and also adding <code>@ComponentScan</code> in my main application, but it still does not work. How can I fix it?<br />\nMy CORS Filter :</p>\n<pre><code>//@Configuration\n@Component\n@Order(1)\npublic class CORSFilter {\n\n    @Bean\n    public WebMvcConfigurer getCorsConfiguration(){\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/**&quot;)\n                        .allowedOrigins(&quot;*&quot;)\n                        .allowedMethods(&quot;*&quot;)\n                        .allowedHeaders(&quot;*&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n<p>My JWT Filter :</p>\n<pre><code>@Component\n@Order(2)\n@WebFilter(&quot;/*&quot;)\npublic class JWTAuthFilter implements Filter {\n\n    @Autowired\n    private BalootService balootService;\n\n    public void init(FilterConfig config) throws ServletException {\n        System.out.println(&quot;init&quot;); //not getting printed !\n    }\n\n    public void destroy() {\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        System.out.println(&quot;jwt filter&quot;); //not getting printed\n        //processing the request\n</code></pre>\n<p>My main application :</p>\n<pre><code>@SpringBootApplication\n//@RestController\n@ServletComponentScan\n@ComponentScan(basePackages = {&quot;com.baloot.baloot&quot;, &quot;com.baloot.baloot.filters&quot;})\npublic class BalootApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(BalootApplication.class, args);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","linux","shell","logging","nohup"],"comments":[{"owner":{"account_id":1257651,"reputation":12773,"user_id":1216776,"display_name":"stark"},"score":2,"creation_date":1686342771,"post_id":76443243,"comment_id":134791033,"body_markdown":"The command you ran did not free any disk space, it just removed the directory entry for `nohup.out`.  nohup is still writing to the open file handle and will not free it until the process ends.","body":"The command you ran did not free any disk space, it just removed the directory entry for <code>nohup.out</code>.  nohup is still writing to the open file handle and will not free it until the process ends."},{"owner":{"account_id":7140037,"reputation":73,"user_id":5458089,"display_name":"Arnold Mr ARNOLD Charyyev"},"score":0,"creation_date":1686344483,"post_id":76443243,"comment_id":134791255,"body_markdown":"Thank you for your reply, but is there any chance to continue read the nohup.out in tail -100f?","body":"Thank you for your reply, but is there any chance to continue read the nohup.out in tail -100f?"},{"owner":{"account_id":1257651,"reputation":12773,"user_id":1216776,"display_name":"stark"},"score":1,"creation_date":1686393151,"post_id":76443243,"comment_id":134794676,"body_markdown":"You can access the data of an open but anonymous file via /proc/pid/fd/, where pid is the nohup process id.","body":"You can access the data of an open but anonymous file via /proc/pid/fd/, where pid is the nohup process id."}],"owner":{"account_id":7140037,"reputation":73,"user_id":5458089,"display_name":"Arnold Mr ARNOLD Charyyev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686339750,"creation_date":1686339750,"question_id":76443243,"body_markdown":"I&#39;m a new to a Linux, I&#39;ve encountered an issue. What I&#39;ve done: i have created the shell script which runs jar file that inside have the System.out.println - prints. Then I ran the sh using: &quot;nohup myScript.sh&quot;. It started to produce nohup.out file that appends my output from jar file. Then after hours I found that file very large and just ran a command: &quot;rm nohup.out&quot;.\r\n\r\nIs there a way to tell nohup to continue to write the output? Without killing currently running process and re-run &quot;nohup myScript.sh&quot;? Because what jar does, it migrating the data between two different environments. So I won&#39;t to kill it and start all process again.\r\n\r\nPlease, provide me some useful information or if u had been in the same issue, how did u solve it?\r\n\r\nCheers","title":"Recreating nohup.out","body":"<p>I'm a new to a Linux, I've encountered an issue. What I've done: i have created the shell script which runs jar file that inside have the System.out.println - prints. Then I ran the sh using: &quot;nohup myScript.sh&quot;. It started to produce nohup.out file that appends my output from jar file. Then after hours I found that file very large and just ran a command: &quot;rm nohup.out&quot;.</p>\n<p>Is there a way to tell nohup to continue to write the output? Without killing currently running process and re-run &quot;nohup myScript.sh&quot;? Because what jar does, it migrating the data between two different environments. So I won't to kill it and start all process again.</p>\n<p>Please, provide me some useful information or if u had been in the same issue, how did u solve it?</p>\n<p>Cheers</p>\n"},{"tags":["java","list","collections"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":8,"creation_date":1540837614,"post_id":53051646,"comment_id":93002926,"body_markdown":"Neither. It&#39;s a good idea to look at the implementation of that method.","body":"Neither. It&#39;s a good idea to look at the implementation of that method."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1540838485,"post_id":53051646,"comment_id":93003317,"body_markdown":"It is similar to an `ArrayList`, in that it is a list backed by an array. However, it does not have the same runtime properties as a `java.util.ArrayList`, e.g. it is immutable.","body":"It is similar to an <code>ArrayList</code>, in that it is a list backed by an array. However, it does not have the same runtime properties as a <code>java.util.ArrayList</code>, e.g. it is immutable."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1540838657,"post_id":53051646,"comment_id":93003398,"body_markdown":"Why is this important?  Regardless of the implementation, you will be treating the returned object as a List instance.","body":"Why is this important?  Regardless of the implementation, you will be treating the returned object as a List instance."},{"owner":{"account_id":14570228,"reputation":91,"user_id":10523749,"display_name":"J. Wilson"},"score":1,"creation_date":1540838807,"post_id":53051646,"comment_id":93003464,"body_markdown":"@VGR for performace reasons.","body":"@VGR for performace reasons."},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":0,"creation_date":1540838929,"post_id":53051646,"comment_id":93003514,"body_markdown":"OK where the hell can I find the java src now that grepcode is nolonger a thing.","body":"OK where the hell can I find the java src now that grepcode is nolonger a thing."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1540839406,"post_id":53051646,"comment_id":93003706,"body_markdown":"If you need an ArrayList, make an ArrayList.  You can use `new ArrayList&lt;&gt;(List.of(john, camila, pat))`, for instance.  Regardless of what List.of happens to return right now, future Java versions are free to change it.","body":"If you need an ArrayList, make an ArrayList.  You can use <code>new ArrayList&lt;&gt;(List.of(john, camila, pat))</code>, for instance.  Regardless of what List.of happens to return right now, future Java versions are free to change it."}],"answers":[{"tags":[],"owner":{"account_id":11653484,"reputation":12724,"user_id":8534008,"display_name":"GBlodgett"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1540849711,"creation_date":1540837714,"answer_id":53051691,"question_id":53051646,"body_markdown":"Neither. According to the docs for [`List.of()`][1] it returns:\r\n\r\n&gt;Returns an immutable list containing an arbitrary number of elements.\r\n\r\nNote that it is the *interface* [`List`][1] that `ArrayList` and `LinkedList` implement \r\n\r\nIf we run this code:\r\n\r\n    List&lt;Integer&gt; listOf = List.of(1,2,3);\r\n    System.out.println(listOf.getClass());\r\n\r\nWe get:\r\n\r\n    class java.util.ImmutableCollections$ListN\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-","title":"What type of list is generated by List.of() in Java","body":"<p>Neither. According to the docs for <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"noreferrer\"><code>List.of()</code></a> it returns:</p>\n\n<blockquote>\n  <p>Returns an immutable list containing an arbitrary number of elements.</p>\n</blockquote>\n\n<p>Note that it is the <em>interface</em> <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"noreferrer\"><code>List</code></a> that <code>ArrayList</code> and <code>LinkedList</code> implement </p>\n\n<p>If we run this code:</p>\n\n<pre><code>List&lt;Integer&gt; listOf = List.of(1,2,3);\nSystem.out.println(listOf.getClass());\n</code></pre>\n\n<p>We get:</p>\n\n<pre><code>class java.util.ImmutableCollections$ListN\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540840721,"creation_date":1540840721,"answer_id":53052368,"question_id":53051646,"body_markdown":"    List&lt;Employee&gt; employeeList = List.of(john, camila, pat);\r\n\r\nis more or less equals to\r\n\r\n    List&lt;Employee&gt; employeeList = Collections.unmodifiableList(Arrays.asList(john, camila, pat));\r\n\r\nIn case you warry about concrete implementation of the `List`, do it your own, this is much better.","title":"What type of list is generated by List.of() in Java","body":"<pre><code>List&lt;Employee&gt; employeeList = List.of(john, camila, pat);\n</code></pre>\n\n<p>is more or less equals to</p>\n\n<pre><code>List&lt;Employee&gt; employeeList = Collections.unmodifiableList(Arrays.asList(john, camila, pat));\n</code></pre>\n\n<p>In case you warry about concrete implementation of the <code>List</code>, do it your own, this is much better.</p>\n"},{"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540851695,"creation_date":1540851695,"answer_id":53054742,"question_id":53051646,"body_markdown":"You can have a look at the different [`List#of` methods in the OpenJDK source code](https://hg.openjdk.java.net/jdk10/jdk10/jdk/file/70359afda5d0/src/java.base/share/classes/java/util/List.java#l778). \r\n\r\n(The pattern was obviously inspired by the corresponding Guava classes. See https://stackoverflow.com/questions/3737882/why-does-guavas-immutablelist-have-so-many-overloaded-of-methods )\r\n\r\nThe method that is **not** specialized for a certain number of arguments creates an instance of [`ImmutableCollections.ListN`](https://hg.openjdk.java.net/jdk10/jdk10/jdk/file/70359afda5d0/src/java.base/share/classes/java/util/ImmutableCollections.java#l223), which internally just stores a copy (!) of the varargs-array and provides straightforward implementations of the `List` methods to access the array.\r\n\r\nBut as others have pointed out: **The exact type should not matter!**\r\n\r\nThe only point that might matter is that the returned list also implements [`RandomAccess`](https://docs.oracle.com/javase/8/docs/api/java/util/RandomAccess.html). Although this does not seem to be specified explicitly in the [documentation for unmodifiable lists](https://docs.oracle.com/javase/10/docs/api/java/util/List.html#unmodifiable), it&#39;s something that I&#39;d personally rely on. They&#39;ll never change this to become some sort of linked list or so...\r\n","title":"What type of list is generated by List.of() in Java","body":"<p>You can have a look at the different <a href=\"https://hg.openjdk.java.net/jdk10/jdk10/jdk/file/70359afda5d0/src/java.base/share/classes/java/util/List.java#l778\" rel=\"nofollow noreferrer\"><code>List#of</code> methods in the OpenJDK source code</a>. </p>\n\n<p>(The pattern was obviously inspired by the corresponding Guava classes. See <a href=\"https://stackoverflow.com/questions/3737882/why-does-guavas-immutablelist-have-so-many-overloaded-of-methods\">Why does Guava&#39;s ImmutableList have so many overloaded of() methods?</a> )</p>\n\n<p>The method that is <strong>not</strong> specialized for a certain number of arguments creates an instance of <a href=\"https://hg.openjdk.java.net/jdk10/jdk10/jdk/file/70359afda5d0/src/java.base/share/classes/java/util/ImmutableCollections.java#l223\" rel=\"nofollow noreferrer\"><code>ImmutableCollections.ListN</code></a>, which internally just stores a copy (!) of the varargs-array and provides straightforward implementations of the <code>List</code> methods to access the array.</p>\n\n<p>But as others have pointed out: <strong>The exact type should not matter!</strong></p>\n\n<p>The only point that might matter is that the returned list also implements <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/RandomAccess.html\" rel=\"nofollow noreferrer\"><code>RandomAccess</code></a>. Although this does not seem to be specified explicitly in the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">documentation for unmodifiable lists</a>, it's something that I'd personally rely on. They'll never change this to become some sort of linked list or so...</p>\n"},{"tags":[],"owner":{"account_id":22211804,"reputation":1,"user_id":16450843,"display_name":"Samson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626299238,"creation_date":1626299238,"answer_id":68385435,"question_id":53051646,"body_markdown":"List.of() as a static factory method returns a basic immutable implementation of List.\r\n\r\nVisit https://4comprehension.com/the-curious-case-of-jdk9-immutable-collections/\r\n","title":"What type of list is generated by List.of() in Java","body":"<p>List.of() as a static factory method returns a basic immutable implementation of List.</p>\n<p>Visit <a href=\"https://4comprehension.com/the-curious-case-of-jdk9-immutable-collections/\" rel=\"nofollow noreferrer\">https://4comprehension.com/the-curious-case-of-jdk9-immutable-collections/</a></p>\n"},{"tags":[],"owner":{"account_id":15437885,"reputation":39,"user_id":11137450,"display_name":"Goutham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686338926,"creation_date":1686338926,"answer_id":76443170,"question_id":53051646,"body_markdown":"I&#39;m not entirely sure as i&#39;m still learning, but just relying on the basics\r\n\r\n similar to static methods in Math class for example \r\n\r\n&gt; int value = Math.sqrt(9) ; //which is a static function that just returns a value \r\n\r\n - in this case `List.of(john, camila, pat);`  is also a static function and just returns a list and doesn&#39;t have any state nor behavior. \r\n\r\n\r\n\r\nI realized the below both are not same , as one is assigning an object of Array-list type and the other is simply calling a static function and creating  the list.\r\n\r\n    List&lt;Employee&gt; employeeList = new ArrayList&lt;&gt;();\r\n    \r\n    List&lt;Employee&gt; employeeList = List.of(john, camila, pat);","title":"What type of list is generated by List.of() in Java","body":"<p>I'm not entirely sure as i'm still learning, but just relying on the basics</p>\n<p>similar to static methods in Math class for example</p>\n<blockquote>\n<p>int value = Math.sqrt(9) ; //which is a static function that just returns a value</p>\n</blockquote>\n<ul>\n<li>in this case <code>List.of(john, camila, pat);</code>  is also a static function and just returns a list and doesn't have any state nor behavior.</li>\n</ul>\n<p>I realized the below both are not same , as one is assigning an object of Array-list type and the other is simply calling a static function and creating  the list.</p>\n<pre><code>List&lt;Employee&gt; employeeList = new ArrayList&lt;&gt;();\n\nList&lt;Employee&gt; employeeList = List.of(john, camila, pat);\n</code></pre>\n"}],"owner":{"account_id":14570228,"reputation":91,"user_id":10523749,"display_name":"J. Wilson"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19173,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":5,"score":5,"last_activity_date":1686338926,"creation_date":1540837535,"question_id":53051646,"body_markdown":"    Employee john = new Employee(&quot;John&quot;, &quot;Brown&quot;, 32, 100);\r\n    Employee camila = new Employee(&quot;Camila&quot;, &quot;Smith&quot;, 25, 101);\r\n    Employee pat = new Employee(&quot;Pat&quot;, &quot;Hanson&quot;, 23, 102);\r\n        \r\n    List&lt;Employee&gt; employeeList = List.of(john, camila, pat);\r\n\r\n\r\nWhat type of `List` is generated by the `List.of()` method. Is it an `ArrayList` or a `LinkedList`?","title":"What type of list is generated by List.of() in Java","body":"<pre><code>Employee john = new Employee(\"John\", \"Brown\", 32, 100);\nEmployee camila = new Employee(\"Camila\", \"Smith\", 25, 101);\nEmployee pat = new Employee(\"Pat\", \"Hanson\", 23, 102);\n\nList&lt;Employee&gt; employeeList = List.of(john, camila, pat);\n</code></pre>\n\n<p>What type of <code>List</code> is generated by the <code>List.of()</code> method. Is it an <code>ArrayList</code> or a <code>LinkedList</code>?</p>\n"},{"tags":["javascript","java","json","payload","velo"],"owner":{"account_id":28789692,"reputation":1,"user_id":22049359,"display_name":"Evan Roggio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686338362,"creation_date":1686337081,"question_id":76442988,"body_markdown":"I&#39;m working on an integration between Wix and PipeDrive API.  My GET requests are successful and returning a payload - but I am trying to figure out how to process that payload and insert fields from the payload into a wix text input element.  \r\n\r\nCan anyone provide me an example of how to process data from the payload and insert it into a text input?\r\n\r\n\r\nBelow is an example of the payload I am getting in response:\r\n\r\n[Response Body](https://i.stack.imgur.com/4SzU9.png)\r\n\r\n\r\nHere is an example of my backend code:\r\n[Backend Code](https://i.stack.imgur.com/lUkA6.png)\r\n\r\n\r\nHere is an example of my successful GET code:\r\n[GET request page code](https://i.stack.imgur.com/Jr5QB.png)\r\n","title":"WIX JSON Payload mapping/input into text input element","body":"<p>I'm working on an integration between Wix and PipeDrive API.  My GET requests are successful and returning a payload - but I am trying to figure out how to process that payload and insert fields from the payload into a wix text input element.</p>\n<p>Can anyone provide me an example of how to process data from the payload and insert it into a text input?</p>\n<p>Below is an example of the payload I am getting in response:</p>\n<p><a href=\"https://i.stack.imgur.com/4SzU9.png\" rel=\"nofollow noreferrer\">Response Body</a></p>\n<p>Here is an example of my backend code:\n<a href=\"https://i.stack.imgur.com/lUkA6.png\" rel=\"nofollow noreferrer\">Backend Code</a></p>\n<p>Here is an example of my successful GET code:\n<a href=\"https://i.stack.imgur.com/Jr5QB.png\" rel=\"nofollow noreferrer\">GET request page code</a></p>\n"},{"tags":["java","hibernate","kotlin","quarkus"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1599225346,"post_id":63741876,"comment_id":112716541,"body_markdown":"I bet &quot;User&quot; is a reserved keyword in SQL and i don&#39;t see any backticks or other escape mechanisms in the error.  You could try using another name for the table that isn&#39;t a reserved keyword in SQL or try to find the right configuration so that all table and column names are correctly escaped in the generated SQL.","body":"I bet &quot;User&quot; is a reserved keyword in SQL and i don&#39;t see any backticks or other escape mechanisms in the error.  You could try using another name for the table that isn&#39;t a reserved keyword in SQL or try to find the right configuration so that all table and column names are correctly escaped in the generated SQL."},{"owner":{"account_id":1936496,"reputation":32803,"user_id":1743843,"accept_rate":77,"display_name":"softshipper"},"score":0,"creation_date":1599227735,"post_id":63741876,"comment_id":112717801,"body_markdown":"I have changed to account and it works. Thanks a lot.","body":"I have changed to account and it works. Thanks a lot."}],"answers":[{"tags":[],"owner":{"account_id":6291501,"reputation":1128,"user_id":4889035,"display_name":"Dmytro Chaban"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686338204,"creation_date":1686338204,"answer_id":76443110,"question_id":63741876,"body_markdown":"I had similar issue multiple times, it happens because `user` is a reserved keyword in most SQL dialects. \r\n\r\nEasiest solution is to rename it, e.g add application prefix(e.g `sw_user` or `SwUser` in kotlin). \r\n\r\nAnother possible option can be to use doublequotes, something like \r\n```\r\n@Table(name = &quot;\\&quot;user\\&quot;&quot;)\r\n@Entity\r\ndata class User\r\n```\r\nThis approach is a bit risky and might not work on all the databases.\r\n\r\nThere&#39;s also a list of all the [reserved sql keywords](https://www.drupal.org/docs/develop/coding-standards/list-of-sql-reserved-words)","title":"ManyToMany Hibernate in Kotlin","body":"<p>I had similar issue multiple times, it happens because <code>user</code> is a reserved keyword in most SQL dialects.</p>\n<p>Easiest solution is to rename it, e.g add application prefix(e.g <code>sw_user</code> or <code>SwUser</code> in kotlin).</p>\n<p>Another possible option can be to use doublequotes, something like</p>\n<pre><code>@Table(name = &quot;\\&quot;user\\&quot;&quot;)\n@Entity\ndata class User\n</code></pre>\n<p>This approach is a bit risky and might not work on all the databases.</p>\n<p>There's also a list of all the <a href=\"https://www.drupal.org/docs/develop/coding-standards/list-of-sql-reserved-words\" rel=\"nofollow noreferrer\">reserved sql keywords</a></p>\n"}],"owner":{"account_id":1936496,"reputation":32803,"user_id":1743843,"accept_rate":77,"display_name":"softshipper"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1686338204,"creation_date":1599225021,"question_id":63741876,"body_markdown":"I am trying to build Many To Many relationship in Kotlin as the following:\r\n```\r\n@Entity\r\ndata class Gender(@field:Id var abbr: Char? = null,\r\n                  var description: String = &quot;&quot;) : PanacheEntityBase\r\n\r\n@Entity\r\ndata class Interest(\r\n    var description: String = &quot;&quot;): PanacheEntity()\r\n\r\n@Entity\r\ndata class User(@field:Id var id: UUID? = null,\r\n                @ManyToOne(fetch = FetchType.LAZY) var gender: Gender? = null,\r\n                var birthday: Long = 0,\r\n                @ManyToMany(fetch = FetchType.LAZY, cascade = [CascadeType.PERSIST])\r\n                @JoinTable(\r\n                    name = &quot;user_interests&quot;,\r\n                    joinColumns = [JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)],\r\n                    inverseJoinColumns = [JoinColumn(name = &quot;interest_id&quot;, referencedColumnName = &quot;id&quot;)]\r\n                )\r\n                var interests: List&lt;Interest&gt; = listOf()) : PanacheEntityBase\r\n\r\n\r\n```\r\nand I receive error messages:\r\n\r\n```\r\nGenerationTarget encountered exception accepting command : Error executing DDL &quot;drop table if exists User cascade&quot; via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;drop table if exists User cascade&quot; via JDBC Statement\r\n\r\nError executing DDL &quot;create table User (id uuid not null, birthday int8 not null, gender_abbr char(1), primary key (id))&quot; via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table User (id uuid not null, birthday int8 not null, gender_abbr char(1), primary key (id))&quot; via JDBC Statement\r\n\r\nCaused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;User&quot;\r\n  Position: 22\r\n\r\n```\r\n\r\nWhat am I doing wrong?","title":"ManyToMany Hibernate in Kotlin","body":"<p>I am trying to build Many To Many relationship in Kotlin as the following:</p>\n<pre><code>@Entity\ndata class Gender(@field:Id var abbr: Char? = null,\n                  var description: String = &quot;&quot;) : PanacheEntityBase\n\n@Entity\ndata class Interest(\n    var description: String = &quot;&quot;): PanacheEntity()\n\n@Entity\ndata class User(@field:Id var id: UUID? = null,\n                @ManyToOne(fetch = FetchType.LAZY) var gender: Gender? = null,\n                var birthday: Long = 0,\n                @ManyToMany(fetch = FetchType.LAZY, cascade = [CascadeType.PERSIST])\n                @JoinTable(\n                    name = &quot;user_interests&quot;,\n                    joinColumns = [JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)],\n                    inverseJoinColumns = [JoinColumn(name = &quot;interest_id&quot;, referencedColumnName = &quot;id&quot;)]\n                )\n                var interests: List&lt;Interest&gt; = listOf()) : PanacheEntityBase\n\n\n</code></pre>\n<p>and I receive error messages:</p>\n<pre><code>GenerationTarget encountered exception accepting command : Error executing DDL &quot;drop table if exists User cascade&quot; via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;drop table if exists User cascade&quot; via JDBC Statement\n\nError executing DDL &quot;create table User (id uuid not null, birthday int8 not null, gender_abbr char(1), primary key (id))&quot; via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table User (id uuid not null, birthday int8 not null, gender_abbr char(1), primary key (id))&quot; via JDBC Statement\n\nCaused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;User&quot;\n  Position: 22\n\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","jwt"],"answers":[{"tags":[],"owner":{"account_id":17526312,"reputation":31,"user_id":12711330,"display_name":"czarobest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686337741,"creation_date":1686337741,"answer_id":76443060,"question_id":76442394,"body_markdown":"Ok, I found the solution by changing this part:\r\n\r\n```java\r\n.authorizeHttpRequests(auth -&gt; {\r\n                    auth.requestMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll() //\r\n                            .requestMatchers(HttpMethod.PUT, &quot;/login&quot;).permitAll() //\r\n                            .requestMatchers(HttpMethod.PUT, &quot;admin/**&quot;).authenticated(); //\r\n                })\r\n```\r\n\r\nTo this:\r\n\r\n```java\r\n.authorizeHttpRequests(auth -&gt; {\r\n\t\t\t        auth.requestMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll() //\r\n\t\t\t                .requestMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll() //\r\n\t\t\t                .anyRequest().authenticated(); //\r\n\t\t        }) //\r\n```\r\n\r\nNow it works as I would like, but I still don&#39;t understand why it didn&#39;t work properly:\r\n\r\n```\r\nrequestMatchers(HttpMethod.PUT, &quot;admin/**&quot;).authenticated()\r\n```\r\n","title":"Successful creation of UsernamePasswordAuthenticationToken but I still get a 401 error in Java Spring with JWT","body":"<p>Ok, I found the solution by changing this part:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll() //\n                            .requestMatchers(HttpMethod.PUT, &quot;/login&quot;).permitAll() //\n                            .requestMatchers(HttpMethod.PUT, &quot;admin/**&quot;).authenticated(); //\n                })\n</code></pre>\n<p>To this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll() //\n                            .requestMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll() //\n                            .anyRequest().authenticated(); //\n                }) //\n</code></pre>\n<p>Now it works as I would like, but I still don't understand why it didn't work properly:</p>\n<pre><code>requestMatchers(HttpMethod.PUT, &quot;admin/**&quot;).authenticated()\n</code></pre>\n"}],"owner":{"account_id":17526312,"reputation":31,"user_id":12711330,"display_name":"czarobest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76443060,"answer_count":1,"score":0,"last_activity_date":1686337741,"creation_date":1686330502,"question_id":76442394,"body_markdown":"I trying to create API with JSON Web Token.\r\nUnfortunately once configured, I am having trouble executing queries. Because I get an 401 Unauthorized error - despite successfully generating and sending the token in the heade.\r\n\r\nHow can I try to figure out what is wrong?\r\n\r\nThis is my JwtAuthorizationFilter, after send a query with token logger.info(auth.getName()); returns correct username.\r\n\r\n```java\r\npublic JwtAuthorizationFilter(AuthenticationManager authenticationManager, UserDetailsService userDetailsService, String secret) {\r\n\t\tsuper(authenticationManager);\r\n\t\tthis.userDetailsService = userDetailsService;\r\n\t\tthis.secret = secret;\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n\t        throws ServletException, IOException {\r\n\t\tUsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\r\n\t\tif (authenticationToken == null) {\r\n\t\t\tlogger.warn(&quot;Authentication token is null&quot;);\r\n\t\t\tfilterChain.doFilter(request, response);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tSecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n\t\tfilterChain.doFilter(request, response);\r\n\t}\r\n\r\n\tprivate UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\r\n\t\tString token = request.getHeader(TOKEN_HEADER);\r\n\t\tif (token != null &amp;&amp; token.startsWith(TOKEN_PREFIX)) {\r\n\t\t\tlogger.info(token);\r\n\t\t\tString userName = JWT.require(Algorithm.HMAC256(secret)).build().verify(token.replace(TOKEN_PREFIX, &quot;&quot;)).getSubject();\r\n\t\t\tif (userName != null) {\r\n\t\t\t\tUserDetails userDetails = userDetailsService.loadUserByUsername(userName);\r\n\t\t\t\tUsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(userDetails.getUsername(), null,\r\n\t\t\t\t        userDetails.getAuthorities());\r\n\t\t\t\tlogger.info(auth.getName());\r\n\t\t\t\treturn auth;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n```\r\n\r\nThis is security config:\r\n```java\r\n@Bean\r\n\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\t\treturn http.cors().and().csrf(AbstractHttpConfigurer::disable) //\r\n\t\t        .authorizeHttpRequests(auth -&gt; {\r\n\t\t\t        auth.requestMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll() //\r\n\t\t\t                .requestMatchers(HttpMethod.PUT, &quot;/login&quot;).permitAll() //\r\n\t\t\t                .requestMatchers(HttpMethod.PUT, &quot;admin/**&quot;).authenticated(); //\r\n\t\t        }).authenticationManager(authenticationManager(authenticationConfiguration)) //\r\n\t\t        .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)) //\r\n\t\t        .addFilter(authenticationFilter()) //\r\n\t\t        .addFilter(new JwtAuthorizationFilter(authenticationManager(authenticationConfiguration), userDetailsManager(), secret)) //\r\n\t\t        .exceptionHandling() //\r\n\t\t        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED)) //\r\n\t\t        .and().headers().frameOptions().disable().and().build();\r\n\t}\r\n\r\n\tpublic JsonObjectAuthenticationFilter authenticationFilter() throws Exception {\r\n\t\tJsonObjectAuthenticationFilter authenticationFilter = new JsonObjectAuthenticationFilter(objectMapper);\r\n\t\tauthenticationFilter.setAuthenticationSuccessHandler(successHandler);\r\n\t\tauthenticationFilter.setAuthenticationFailureHandler(failureHandler);\r\n\t\tauthenticationFilter.setAuthenticationManager(authenticationManager(authenticationConfiguration));\r\n\t\treturn authenticationFilter;\r\n\t}\r\n\r\n@Bean\r\n\tAuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n\t\treturn authenticationConfiguration.getAuthenticationManager();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder encoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic UserDetailsManager userDetailsManager() {\r\n\t\treturn new JdbcUserDetailsManager(dataSource);\r\n\t}\r\n\r\n```\r\n\r\nI tried to change the configuration of securityFilterChain, but change the order of filters, etc. But unfortunately, I can not deal with this problem.","title":"Successful creation of UsernamePasswordAuthenticationToken but I still get a 401 error in Java Spring with JWT","body":"<p>I trying to create API with JSON Web Token.\nUnfortunately once configured, I am having trouble executing queries. Because I get an 401 Unauthorized error - despite successfully generating and sending the token in the heade.</p>\n<p>How can I try to figure out what is wrong?</p>\n<p>This is my JwtAuthorizationFilter, after send a query with token logger.info(auth.getName()); returns correct username.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public JwtAuthorizationFilter(AuthenticationManager authenticationManager, UserDetailsService userDetailsService, String secret) {\n        super(authenticationManager);\n        this.userDetailsService = userDetailsService;\n        this.secret = secret;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        UsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\n        if (authenticationToken == null) {\n            logger.warn(&quot;Authentication token is null&quot;);\n            filterChain.doFilter(request, response);\n            return;\n        }\n        SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n        filterChain.doFilter(request, response);\n    }\n\n    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\n        String token = request.getHeader(TOKEN_HEADER);\n        if (token != null &amp;&amp; token.startsWith(TOKEN_PREFIX)) {\n            logger.info(token);\n            String userName = JWT.require(Algorithm.HMAC256(secret)).build().verify(token.replace(TOKEN_PREFIX, &quot;&quot;)).getSubject();\n            if (userName != null) {\n                UserDetails userDetails = userDetailsService.loadUserByUsername(userName);\n                UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(userDetails.getUsername(), null,\n                        userDetails.getAuthorities());\n                logger.info(auth.getName());\n                return auth;\n            }\n        }\n        return null;\n    }\n</code></pre>\n<p>This is security config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http.cors().and().csrf(AbstractHttpConfigurer::disable) //\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll() //\n                            .requestMatchers(HttpMethod.PUT, &quot;/login&quot;).permitAll() //\n                            .requestMatchers(HttpMethod.PUT, &quot;admin/**&quot;).authenticated(); //\n                }).authenticationManager(authenticationManager(authenticationConfiguration)) //\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)) //\n                .addFilter(authenticationFilter()) //\n                .addFilter(new JwtAuthorizationFilter(authenticationManager(authenticationConfiguration), userDetailsManager(), secret)) //\n                .exceptionHandling() //\n                .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED)) //\n                .and().headers().frameOptions().disable().and().build();\n    }\n\n    public JsonObjectAuthenticationFilter authenticationFilter() throws Exception {\n        JsonObjectAuthenticationFilter authenticationFilter = new JsonObjectAuthenticationFilter(objectMapper);\n        authenticationFilter.setAuthenticationSuccessHandler(successHandler);\n        authenticationFilter.setAuthenticationFailureHandler(failureHandler);\n        authenticationFilter.setAuthenticationManager(authenticationManager(authenticationConfiguration));\n        return authenticationFilter;\n    }\n\n@Bean\n    AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public UserDetailsManager userDetailsManager() {\n        return new JdbcUserDetailsManager(dataSource);\n    }\n\n</code></pre>\n<p>I tried to change the configuration of securityFilterChain, but change the order of filters, etc. But unfortunately, I can not deal with this problem.</p>\n"},{"tags":["java","swing","jframe","window"],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686337618,"creation_date":1617450299,"answer_id":66930766,"question_id":66929223,"body_markdown":"To move the JFrame, left-click inside the JFrame somewhere, drag the mouse to the new position, and release the mouse button when the JFrame is in the correct position.\r\n\r\nHere&#39;s the complete runnable code.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Point;\r\n    import java.awt.Rectangle;\r\n    import java.awt.event.MouseEvent;\r\n    import java.awt.event.MouseListener;\r\n    import java.awt.event.MouseMotionListener;\r\n    \r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class MoveUndecoratedJFrame implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new MoveUndecoratedJFrame());\r\n    \t}\r\n    \t\r\n    \tprivate JFrame frame;\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tframe = new JFrame();\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setUndecorated(true);\r\n    \t\t\r\n    \t\tframe.add(createMainPanel(), BorderLayout.CENTER);\r\n    \t\t\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationRelativeTo(null);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \t\r\n    \tprivate JPanel createMainPanel() {\r\n    \t\tJPanel panel = new JPanel(new FlowLayout());\r\n    \t\tMoveListener listener = new MoveListener();\r\n    \t\tpanel.addMouseListener(listener);\r\n    \t\tpanel.addMouseMotionListener(listener);\r\n    \t\tpanel.setBackground(Color.BLACK);\r\n    \t\tpanel.setPreferredSize(new Dimension(700, 400));\r\n    \t\t\r\n    \t\treturn panel;\r\n    \t}\r\n    \t\r\n    \tpublic class MoveListener implements MouseListener, MouseMotionListener {\r\n    \t\t\r\n    \t\tprivate Point pressedPoint;\r\n    \t\tprivate Rectangle frameBounds;\r\n    \t\tprivate Date lastTimeStamp;\r\n\r\n    \t\t@Override\r\n    \t\tpublic void mouseClicked(MouseEvent event) {\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void mousePressed(MouseEvent event) {\r\n    \t\t\tthis.frameBounds = frame.getBounds();\r\n    \t\t\tthis.pressedPoint = event.getPoint();\r\n                this.lastTimeStamp = new Date();\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void mouseReleased(MouseEvent event) {\r\n    \t\t\tmoveJFrame(event);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void mouseEntered(MouseEvent event) {\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void mouseExited(MouseEvent event) {\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void mouseDragged(MouseEvent event) {\r\n    \t\t\tmoveJFrame(event);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void mouseMoved(MouseEvent event) {\r\n    \t\t}\r\n    \t\t\r\n            private void moveJFrame(MouseEvent event) {\r\n                Point endPoint = event.getPoint();\r\n\r\n                int xDiff = endPoint.x - pressedPoint.x;\r\n                int yDiff = endPoint.y - pressedPoint.y;\r\n\r\n                Date timestamp = new Date();\r\n\r\n                //One move action per 60ms to avoid frame glitching\r\n                if(Math.abs(timestamp.getTime() - lastTimeStamp.getTime()) &gt; 60){ \r\n                    if((xDiff&gt;0 || yDiff&gt;0)||(xDiff&lt;0 || yDiff&lt;0)) {\r\n                        frameBounds.x += xDiff;\r\n                        frameBounds.y += yDiff;\r\n                        System.out.println(frameBounds);\r\n                        owner.setBounds(frameBounds);\r\n                    }\r\n                    this.lastTimeStamp = timestamp;\r\n                }\r\n            }\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to move an undecorated JFrame window?","body":"<p>To move the JFrame, left-click inside the JFrame somewhere, drag the mouse to the new position, and release the mouse button when the JFrame is in the correct position.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.awt.event.MouseMotionListener;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class MoveUndecoratedJFrame implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new MoveUndecoratedJFrame());\n    }\n    \n    private JFrame frame;\n\n    @Override\n    public void run() {\n        frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setUndecorated(true);\n        \n        frame.add(createMainPanel(), BorderLayout.CENTER);\n        \n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n    \n    private JPanel createMainPanel() {\n        JPanel panel = new JPanel(new FlowLayout());\n        MoveListener listener = new MoveListener();\n        panel.addMouseListener(listener);\n        panel.addMouseMotionListener(listener);\n        panel.setBackground(Color.BLACK);\n        panel.setPreferredSize(new Dimension(700, 400));\n        \n        return panel;\n    }\n    \n    public class MoveListener implements MouseListener, MouseMotionListener {\n        \n        private Point pressedPoint;\n        private Rectangle frameBounds;\n        private Date lastTimeStamp;\n\n        @Override\n        public void mouseClicked(MouseEvent event) {\n        }\n\n        @Override\n        public void mousePressed(MouseEvent event) {\n            this.frameBounds = frame.getBounds();\n            this.pressedPoint = event.getPoint();\n            this.lastTimeStamp = new Date();\n        }\n\n        @Override\n        public void mouseReleased(MouseEvent event) {\n            moveJFrame(event);\n        }\n\n        @Override\n        public void mouseEntered(MouseEvent event) {\n        }\n\n        @Override\n        public void mouseExited(MouseEvent event) {\n        }\n\n        @Override\n        public void mouseDragged(MouseEvent event) {\n            moveJFrame(event);\n        }\n\n        @Override\n        public void mouseMoved(MouseEvent event) {\n        }\n        \n        private void moveJFrame(MouseEvent event) {\n            Point endPoint = event.getPoint();\n\n            int xDiff = endPoint.x - pressedPoint.x;\n            int yDiff = endPoint.y - pressedPoint.y;\n\n            Date timestamp = new Date();\n\n            //One move action per 60ms to avoid frame glitching\n            if(Math.abs(timestamp.getTime() - lastTimeStamp.getTime()) &gt; 60){ \n                if((xDiff&gt;0 || yDiff&gt;0)||(xDiff&lt;0 || yDiff&lt;0)) {\n                    frameBounds.x += xDiff;\n                    frameBounds.y += yDiff;\n                    System.out.println(frameBounds);\n                    owner.setBounds(frameBounds);\n                }\n                this.lastTimeStamp = timestamp;\n            }\n        }\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":20084784,"reputation":85,"user_id":14726617,"display_name":"MrLegendGaming"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1040,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66930766,"answer_count":1,"score":1,"last_activity_date":1686337618,"creation_date":1617439451,"question_id":66929223,"body_markdown":"So I&#39;ve been working on a program and I wanted to make it borderless with ``jframe.setUndecorated(true);``. However, I can&#39;t really move the JFrame window around the screen. Is there a way I can fix that? \r\n\r\nHere is my current code for the JFrame:\r\n```\r\nJFrame frame = new JFrame();\r\nframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\nframe.setSize(700, 450);\r\nframe.setLocationRelativeTo(null);\r\nframe.setUndecorated(true);\r\nframe.getContentPane().setBackground(Color.BLACK);\r\n```","title":"How to move an undecorated JFrame window?","body":"<p>So I've been working on a program and I wanted to make it borderless with <code>jframe.setUndecorated(true);</code>. However, I can't really move the JFrame window around the screen. Is there a way I can fix that?</p>\n<p>Here is my current code for the JFrame:</p>\n<pre><code>JFrame frame = new JFrame();\nframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\nframe.setSize(700, 450);\nframe.setLocationRelativeTo(null);\nframe.setUndecorated(true);\nframe.getContentPane().setBackground(Color.BLACK);\n</code></pre>\n"},{"tags":["java","selenium-webdriver","webdriver"],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686320867,"creation_date":1686320867,"answer_id":76441200,"question_id":76441086,"body_markdown":"Check the below code. Below code uses `JavaScriptExecutor` to pass text into a web element.\r\n\r\n````\r\nstatic WebDriver driver;\r\nstatic String text = &quot;test&quot;;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tdriver = new ChromeDriver();\r\n\t\tdriver.manage().window().maximize();\r\n\t\tdriver.get(&quot;https://www.google.com/&quot;);\r\n\t\t//Accept cookies\r\n\t\tdriver.findElement(By.xpath(&quot;//div[text()=&#39;Accept all&#39;]&quot;)).click();\r\n\t\t\r\n\t\t// JavaScript Executor to enter text\r\n\t\tJavascriptExecutor j = (JavascriptExecutor) driver;\r\n\t\tj.executeScript(&quot;document.getElementById(&#39;APjFqb&#39;).value=&#39; &quot; + text + &quot;&#39;&quot;);\r\n\r\n\t\t// driver.quit();\r\n\t}\r\n````\r\n\r\n**Result:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Obqjk.png","title":"Paste a string into textbox using selenium java","body":"<p>Check the below code. Below code uses <code>JavaScriptExecutor</code> to pass text into a web element.</p>\n<pre><code>static WebDriver driver;\nstatic String text = &quot;test&quot;;\n\n    public static void main(String[] args) {\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://www.google.com/&quot;);\n        //Accept cookies\n        driver.findElement(By.xpath(&quot;//div[text()='Accept all']&quot;)).click();\n        \n        // JavaScript Executor to enter text\n        JavascriptExecutor j = (JavascriptExecutor) driver;\n        j.executeScript(&quot;document.getElementById('APjFqb').value=' &quot; + text + &quot;'&quot;);\n\n        // driver.quit();\n    }\n</code></pre>\n<p><strong>Result:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Obqjk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Obqjk.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6212239,"reputation":56,"user_id":4838199,"display_name":"shailesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686337352,"creation_date":1686320972,"answer_id":76441216,"question_id":76441086,"body_markdown":"\r\nUpdated as per requirement\r\n\r\n    public static void main(String[] args) throws IOException, AWTException, InterruptedException {\r\n\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\toptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\t\tChromeDriver driver = new ChromeDriver(options);\r\n\t\tdriver.get(&quot;https://www.google.com&quot;);\r\n\r\n\r\n\t\tWebElement we = driver.findElement(By.xpath(&quot;//textarea[@title=&#39;Search&#39;]&quot;));\r\n\t\tString text = &quot;test&quot;;\r\n\r\n\t\tStringSelection stringSelection = new StringSelection(text);\r\n\t\tClipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n\t\tclipboard.setContents(stringSelection, null);\r\n\t\twe.sendKeys(Keys.SHIFT, Keys.INSERT);\r\n\r\n\t\tThread.sleep(50000);\r\n\t\tdriver.close();\r\n\t}\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9HygF.png","title":"Paste a string into textbox using selenium java","body":"<p>Updated as per requirement</p>\n<pre><code>public static void main(String[] args) throws IOException, AWTException, InterruptedException {\n\n    ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n    ChromeDriver driver = new ChromeDriver(options);\n    driver.get(&quot;https://www.google.com&quot;);\n\n\n    WebElement we = driver.findElement(By.xpath(&quot;//textarea[@title='Search']&quot;));\n    String text = &quot;test&quot;;\n\n    StringSelection stringSelection = new StringSelection(text);\n    Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n    clipboard.setContents(stringSelection, null);\n    we.sendKeys(Keys.SHIFT, Keys.INSERT);\n\n    Thread.sleep(50000);\n    driver.close();\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/9HygF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9HygF.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":15024588,"reputation":67,"user_id":10844886,"display_name":"WilliamAshoti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76441216,"answer_count":2,"score":1,"last_activity_date":1686337352,"creation_date":1686319913,"question_id":76441086,"body_markdown":"````\r\nString text = &quot;test&quot;;\r\n````\r\n\r\nI want to paste the string text using selenium `Keys.CONTROL+&quot;v&quot;`. But I just couldn&#39;t find the right way to do it. Can somebody helps me of any questions in stack overflow would be very helpful. \r\n\r\nJust to be clear I don&#39;t want to copy a text from screen like this:\r\n````\r\ndriver.findelement(by.xpath).sendKeys(Keys.CONTROL+&quot;c&quot;) \r\n````\r\nBut I want to use directly the String text to paste it. \r\n\r\nThanks in advance","title":"Paste a string into textbox using selenium java","body":"<pre><code>String text = &quot;test&quot;;\n</code></pre>\n<p>I want to paste the string text using selenium <code>Keys.CONTROL+&quot;v&quot;</code>. But I just couldn't find the right way to do it. Can somebody helps me of any questions in stack overflow would be very helpful.</p>\n<p>Just to be clear I don't want to copy a text from screen like this:</p>\n<pre><code>driver.findelement(by.xpath).sendKeys(Keys.CONTROL+&quot;c&quot;) \n</code></pre>\n<p>But I want to use directly the String text to paste it.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","android"],"owner":{"account_id":28789800,"reputation":1,"user_id":22049443,"display_name":"akarsh kk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686337322,"creation_date":1686337322,"question_id":76443019,"body_markdown":"Apps targeting Android 12 and higher are required to specify an explicit value for android exported when the corresponding component has an intent filter defined.\r\nbelow  provided link to manifest file\r\nadded export to all activity then also showing same error\r\n[this is my manifest]\r\n(https://docs.google.com/document/d/1ZeiwuZ9PKF47WURSlu9bNlGHNSP4Swb_sHGW--REPxc/edit?usp=sharing) \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Android Manifest merger failed with multiple errors, see logs","body":"<p>Apps targeting Android 12 and higher are required to specify an explicit value for android exported when the corresponding component has an intent filter defined.\nbelow  provided link to manifest file\nadded export to all activity then also showing same error\n[this is my manifest]\n(<a href=\"https://docs.google.com/document/d/1ZeiwuZ9PKF47WURSlu9bNlGHNSP4Swb_sHGW--REPxc/edit?usp=sharing\" rel=\"nofollow noreferrer\">https://docs.google.com/document/d/1ZeiwuZ9PKF47WURSlu9bNlGHNSP4Swb_sHGW--REPxc/edit?usp=sharing</a>)</p>\n"},{"tags":["java","eclipse","subclipse"],"answers":[{"tags":[],"owner":{"account_id":51633,"reputation":37763,"user_id":154306,"accept_rate":98,"display_name":"Paul Lammertsma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1254220756,"creation_date":1254220756,"answer_id":1491792,"question_id":1491775,"body_markdown":"As I&#39;m using [Subversive][1], I can&#39;t check this, but it should be something along these lines:\r\n\r\n 1. Go to the *Preferences* screen\r\n 2. Under *Team*, *SVN*, select *Password management*\r\n 3. Remove the stored authentication data for the desired repository\r\n\r\nYou can also do it from your Subversion client, as the authentication data is stored in the `.svn` folders.\r\n\r\n  [1]: http://www.eclipse.org/subversive/","title":"How to change user credentials in Subclipse?","body":"<p>As I'm using <a href=\"http://www.eclipse.org/subversive/\" rel=\"nofollow noreferrer\">Subversive</a>, I can't check this, but it should be something along these lines:</p>\n\n<ol>\n<li>Go to the <em>Preferences</em> screen</li>\n<li>Under <em>Team</em>, <em>SVN</em>, select <em>Password management</em></li>\n<li>Remove the stored authentication data for the desired repository</li>\n</ol>\n\n<p>You can also do it from your Subversion client, as the authentication data is stored in the <code>.svn</code> folders.</p>\n"},{"tags":[],"owner":{"account_id":4402,"reputation":3143,"user_id":6591,"display_name":"Noel Grandin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1299484115,"creation_date":1299484115,"answer_id":5217133,"question_id":1491775,"body_markdown":"If you want to flush the existing credentials, then look at this answer in the subversion wiki:\r\n\r\nhttp://subclipse.tigris.org/wiki/PluginFAQ#head-d507c29676491f4419997a76735feb6ef0aa8cf8\r\n\r\nIf you&#39;re trying to checkout a repository under a specific username, but the repository is available read-only under a guest account, then there is no solution - you will have to do the checkout using the command line tool.\r\nEven TortoiseSVN does not support this use-case.\r\n","title":"How to change user credentials in Subclipse?","body":"<p>If you want to flush the existing credentials, then look at this answer in the subversion wiki:</p>\n\n<p><a href=\"http://subclipse.tigris.org/wiki/PluginFAQ#head-d507c29676491f4419997a76735feb6ef0aa8cf8\">http://subclipse.tigris.org/wiki/PluginFAQ#head-d507c29676491f4419997a76735feb6ef0aa8cf8</a></p>\n\n<p>If you're trying to checkout a repository under a specific username, but the repository is available read-only under a guest account, then there is no solution - you will have to do the checkout using the command line tool.\nEven TortoiseSVN does not support this use-case.</p>\n"},{"tags":[],"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1686336520,"creation_date":1335478598,"answer_id":10342188,"question_id":1491775,"body_markdown":"Delete, or rename, the Eclipse &#39;.keyring&#39; file in Eclipse&#39;s configuration folder. This is where the Subclipse SVNKit connector caches your SVN credentials..\r\n\r\n[ECLIPSE INSTALLATION]\\configuration\\org.eclipse.core.runtime\\\\.keyring\r\n\r\nIf, on the other hand, you&#39;re using the JavaHL connector -- or SVN command-line -- then their credentials are stored in the Subversion runtime config folder. Delete or rename the credential file.\r\n\r\nOn Windows:        %APPDATA%\\Subversion\\auth&lt;br&gt;\r\nOn Linux and OSX:  ~/.subversion/auth \r\n\r\nSorry about this pig of complexity, for what should be a real version-control system.\r\n:-(","title":"How to change user credentials in Subclipse?","body":"<p>Delete, or rename, the Eclipse '.keyring' file in Eclipse's configuration folder. This is where the Subclipse SVNKit connector caches your SVN credentials..</p>\n<p>[ECLIPSE INSTALLATION]\\configuration\\org.eclipse.core.runtime\\.keyring</p>\n<p>If, on the other hand, you're using the JavaHL connector -- or SVN command-line -- then their credentials are stored in the Subversion runtime config folder. Delete or rename the credential file.</p>\n<p>On Windows:        %APPDATA%\\Subversion\\auth<br>\nOn Linux and OSX:  ~/.subversion/auth</p>\n<p>Sorry about this pig of complexity, for what should be a real version-control system.\n:-(</p>\n"},{"tags":[],"owner":{"account_id":1654265,"reputation":6328,"user_id":1524209,"display_name":"Joe Plante"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1350746814,"creation_date":1350746814,"answer_id":12989878,"question_id":1491775,"body_markdown":"In Mac OS X Lion, I found it stored in the Apple keychain","title":"How to change user credentials in Subclipse?","body":"<p>In Mac OS X Lion, I found it stored in the Apple keychain</p>\n"},{"tags":[],"owner":{"account_id":1942629,"reputation":4187,"user_id":1748464,"accept_rate":62,"display_name":"Danylo Volokh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1373024433,"creation_date":1373024433,"answer_id":17488057,"question_id":1491775,"body_markdown":"**You will find password files at:**\r\ndisk:\\Documents and Settings\\your_username\\Application Data\\Subversion\\auth\\svn.simple\\\r\n\r\nRemove the files and refresh the repository. **Subclipse will prompt you to enter username and password for your repository.**","title":"How to change user credentials in Subclipse?","body":"<p><strong>You will find password files at:</strong>\ndisk:\\Documents and Settings\\your_username\\Application Data\\Subversion\\auth\\svn.simple\\</p>\n\n<p>Remove the files and refresh the repository. <strong>Subclipse will prompt you to enter username and password for your repository.</strong></p>\n"},{"tags":[],"owner":{"account_id":3388946,"reputation":91,"user_id":2844287,"display_name":"ajeetkg"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1392094296,"creation_date":1392094296,"answer_id":21693402,"question_id":1491775,"body_markdown":"I struggled a lot on my Mac. Later found a simple solution.\r\n\r\n1) Go to preference\r\n![enter image description here][1]\r\n2) Go to general and look for the security tab\r\n\r\n3) Go into the content section &amp; look for the repository\r\n![enter image description here][2]\r\n\r\n4) Delete the repository. It will automatically restart.\r\n\r\nAlternatively, you can go to the secure_storage file under your home directory. Open it in the VI editor and remove the line for the corresponding repository. I would prefer the UI as it is simple.\r\n\r\n(~/.eclipse/org.eclipse.equinox.security/secure_storage)\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/vi5e4.png\r\n  [2]: http://i.stack.imgur.com/RFKUw.png","title":"How to change user credentials in Subclipse?","body":"<p>I struggled a lot on my Mac. Later found a simple solution.</p>\n\n<p>1) Go to preference\n<img src=\"https://i.stack.imgur.com/vi5e4.png\" alt=\"enter image description here\">\n2) Go to general and look for the security tab</p>\n\n<p>3) Go into the content section &amp; look for the repository\n<img src=\"https://i.stack.imgur.com/RFKUw.png\" alt=\"enter image description here\"></p>\n\n<p>4) Delete the repository. It will automatically restart.</p>\n\n<p>Alternatively, you can go to the secure_storage file under your home directory. Open it in the VI editor and remove the line for the corresponding repository. I would prefer the UI as it is simple.</p>\n\n<p>(~/.eclipse/org.eclipse.equinox.security/secure_storage)</p>\n"},{"tags":[],"owner":{"account_id":2866741,"reputation":3,"user_id":2460914,"display_name":"thiagomdo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428496220,"creation_date":1428496220,"answer_id":29514681,"question_id":1491775,"body_markdown":"In SVN perspective, right click a repository and select *&#39;Location Properties...&#39;*. Edit *&#39;Authentication&#39;*, in General tab.","title":"How to change user credentials in Subclipse?","body":"<p>In SVN perspective, right click a repository and select <em>'Location Properties...'</em>. Edit <em>'Authentication'</em>, in General tab.</p>\n"}],"owner":{"account_id":33281,"reputation":10017,"user_id":93040,"accept_rate":62,"display_name":"Ajay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44330,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"answer_count":7,"score":29,"last_activity_date":1686336520,"creation_date":1254220543,"question_id":1491775,"body_markdown":"I am using Subclipse (Subversion integration in Eclipse). I now want to change the user credentials in subclipse. How do I do that?\r\nThat is to login into subversion using another user account.","title":"How to change user credentials in Subclipse?","body":"<p>I am using Subclipse (Subversion integration in Eclipse). I now want to change the user credentials in subclipse. How do I do that?\nThat is to login into subversion using another user account.</p>\n"},{"tags":["java","spring","exception","stored-procedures","spring-data-jpa"],"owner":{"account_id":3007310,"reputation":434,"user_id":2551561,"accept_rate":25,"display_name":"Gurpreet Kaur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686336505,"creation_date":1686335571,"question_id":76442867,"body_markdown":"I am calling a stored procedure using spring data jpa\r\n\r\n     @Query(value = &quot;DECLARE &quot;\r\n            + &quot;p_transaction_header schema.transaction_header_rec \\\\:= NULL; &quot;\r\n            + &quot;x_voucher_id NUMBER; &quot;\r\n            + &quot;x_return_status VARCHAR2(200); &quot;\r\n            + &quot;x_rejection_reason VARCHAR2(4000); &quot;\r\n            + &quot;BEGIN &quot;\r\n            + &quot;p_transaction_header.source \\\\:=:source; &quot;\r\n            + &quot;p_transaction_header.total_amount \\\\:=:totalAmount; &quot;\r\n            + &quot;p_transaction_header.total_records \\\\:=:totalRecords; &quot;\r\n            + &quot;p_transaction_header.external_key_identifier \\\\:=:externalKeyIdentifier; &quot;\r\n            + &quot;schema.open_transaction(p_transaction_header, x_voucher_id, x_return_status, x_rejection_reason); &quot;\r\n            + &quot;END&quot;, nativeQuery = true)\r\n    OpenTransactionBo openTransaction(@Param(&quot;source&quot;) String source, @Param(&quot;totalAmount&quot;) BigDecimal totalAmount,\r\n                         @Param(&quot;totalRecords&quot;) BigDecimal totalRecords, @Param(&quot;externalKeyIdentifier&quot;) String externalKeyIdentifier);\r\n\r\nand getting following exception:\r\n\r\n    java.lang.NegativeArraySizeException\r\n\r\nAny idea why this is happening and possible fix for it?","title":"java.lang.NegativeArraySizeException while calling a stored procedure","body":"<p>I am calling a stored procedure using spring data jpa</p>\n<pre><code> @Query(value = &quot;DECLARE &quot;\n        + &quot;p_transaction_header schema.transaction_header_rec \\\\:= NULL; &quot;\n        + &quot;x_voucher_id NUMBER; &quot;\n        + &quot;x_return_status VARCHAR2(200); &quot;\n        + &quot;x_rejection_reason VARCHAR2(4000); &quot;\n        + &quot;BEGIN &quot;\n        + &quot;p_transaction_header.source \\\\:=:source; &quot;\n        + &quot;p_transaction_header.total_amount \\\\:=:totalAmount; &quot;\n        + &quot;p_transaction_header.total_records \\\\:=:totalRecords; &quot;\n        + &quot;p_transaction_header.external_key_identifier \\\\:=:externalKeyIdentifier; &quot;\n        + &quot;schema.open_transaction(p_transaction_header, x_voucher_id, x_return_status, x_rejection_reason); &quot;\n        + &quot;END&quot;, nativeQuery = true)\nOpenTransactionBo openTransaction(@Param(&quot;source&quot;) String source, @Param(&quot;totalAmount&quot;) BigDecimal totalAmount,\n                     @Param(&quot;totalRecords&quot;) BigDecimal totalRecords, @Param(&quot;externalKeyIdentifier&quot;) String externalKeyIdentifier);\n</code></pre>\n<p>and getting following exception:</p>\n<pre><code>java.lang.NegativeArraySizeException\n</code></pre>\n<p>Any idea why this is happening and possible fix for it?</p>\n"},{"tags":["java","android","xml","kotlin","view"],"comments":[{"owner":{"account_id":12687470,"reputation":247,"user_id":9218755,"display_name":"Pako1"},"score":0,"creation_date":1686492674,"post_id":76442856,"comment_id":134802876,"body_markdown":"You could try using motionlayout to re-create this view","body":"You could try using motionlayout to re-create this view"}],"owner":{"account_id":10962144,"reputation":23,"user_id":8055110,"display_name":"Weylar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686335436,"creation_date":1686335436,"question_id":76442856,"body_markdown":"How can I achieve this bottom sheet curved arc design? Any thoughts on how to go about it building one using a custom view? [image here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m5qHa.jpg","title":"How can I achieve this bottom sheet arc background in android using custom view, xml or any other alternative?","body":"<p>How can I achieve this bottom sheet curved arc design? Any thoughts on how to go about it building one using a custom view? <a href=\"https://i.stack.imgur.com/m5qHa.jpg\" rel=\"nofollow noreferrer\">image here</a></p>\n"},{"tags":["java","gradle","build.gradle","github-actions"],"answers":[{"tags":[],"owner":{"account_id":6410870,"reputation":1740,"user_id":4970679,"display_name":"ahuemmer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1650520651,"creation_date":1650520651,"answer_id":71949579,"question_id":71949369,"body_markdown":"There are two main possibilities IMHO:\r\n\r\n**1. Externalize the data:**\r\n\r\nCreate a new file, let&#39;s say `secrets.gradle`, where you set your secrets, like:\r\n\r\n```gradle\r\nmySecretUser = &quot;me&quot;\r\nmySecretPassword = &quot;password123&quot;\r\n```\r\n\r\nMake sure, this file is never commited to your versioning system, e.g. by adding it to `.gitignore`!\r\n\r\nThen, in your `build.gradle`, you can refer it like so:\r\n\r\n```groovy\r\napply from: &#39;secrets.gradle&#39;\r\n```\r\n\r\nThis would help you with local development e.g.\r\n\r\n**2. Use environment variables:**\r\n\r\nYou can set the secrets as environent variables like this:\r\n\r\n```batch\r\nset mySecretUser=me\r\nset mySecretPassword=password123\r\n```\r\n\r\n(On Windows, in Unix you might rather use `export` instead of `set`.)\r\n\r\nThen, you can use them in your `build.gradle` like this:\r\n\r\n```groovy\r\nmySecretUser = &quot;$System.env.mySecretUser&quot;\r\nmySecretPassword = &quot;$System.env.mySecretPassword&quot;\r\n```\r\n\r\n**2&#189; - Combine both methods:**\r\n\r\nIn order to look for the `secrets.gradle` file and just use the environment variables, if it does not exist, you can do it like this in your `build.gradle`:\r\n\r\n```groovy\r\nif (file(&#39;secrets.gradle&#39;).exists()) {\r\n    apply from: &#39;secrets.gradle&#39;\r\n}\r\nelse {\r\n    mySecretUser = &quot;$System.env.mySecretUser&quot;\r\n    mySecretPassword = &quot;$System.env.mySecretPassword&quot;\r\n}\r\n```\r\n\r\n**Final note:**\r\n\r\nYou didn&#39;t write anything about your setup - is the Gradle build executed locally or on a build server like Jenkins? In the first case, the `secrets.gradle` approach might be the better way to go. On a Jenkins server, you&#39;ll find great possibilities to store credentials as build environment variables via the configuration.\r\n\r\nAnyway, I just gave some suggestions here. Please make sure, your secrets are really kept secret and not inadvertantly revealed. As I don&#39;t know your setup, I cannot say anything about how safe these methods are in your case.","title":"How to use GitHub secrets or GitHub environment variables in build.gradle file","body":"<p>There are two main possibilities IMHO:</p>\n<p><strong>1. Externalize the data:</strong></p>\n<p>Create a new file, let's say <code>secrets.gradle</code>, where you set your secrets, like:</p>\n<pre><code>mySecretUser = &quot;me&quot;\nmySecretPassword = &quot;password123&quot;\n</code></pre>\n<p>Make sure, this file is never commited to your versioning system, e.g. by adding it to <code>.gitignore</code>!</p>\n<p>Then, in your <code>build.gradle</code>, you can refer it like so:</p>\n<pre><code>apply from: 'secrets.gradle'\n</code></pre>\n<p>This would help you with local development e.g.</p>\n<p><strong>2. Use environment variables:</strong></p>\n<p>You can set the secrets as environent variables like this:</p>\n<pre><code>set mySecretUser=me\nset mySecretPassword=password123\n</code></pre>\n<p>(On Windows, in Unix you might rather use <code>export</code> instead of <code>set</code>.)</p>\n<p>Then, you can use them in your <code>build.gradle</code> like this:</p>\n<pre><code>mySecretUser = &quot;$System.env.mySecretUser&quot;\nmySecretPassword = &quot;$System.env.mySecretPassword&quot;\n</code></pre>\n<p><strong>2½ - Combine both methods:</strong></p>\n<p>In order to look for the <code>secrets.gradle</code> file and just use the environment variables, if it does not exist, you can do it like this in your <code>build.gradle</code>:</p>\n<pre><code>if (file('secrets.gradle').exists()) {\n    apply from: 'secrets.gradle'\n}\nelse {\n    mySecretUser = &quot;$System.env.mySecretUser&quot;\n    mySecretPassword = &quot;$System.env.mySecretPassword&quot;\n}\n</code></pre>\n<p><strong>Final note:</strong></p>\n<p>You didn't write anything about your setup - is the Gradle build executed locally or on a build server like Jenkins? In the first case, the <code>secrets.gradle</code> approach might be the better way to go. On a Jenkins server, you'll find great possibilities to store credentials as build environment variables via the configuration.</p>\n<p>Anyway, I just gave some suggestions here. Please make sure, your secrets are really kept secret and not inadvertantly revealed. As I don't know your setup, I cannot say anything about how safe these methods are in your case.</p>\n"},{"tags":[],"owner":{"account_id":7646779,"reputation":21,"user_id":5797156,"display_name":"eddie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686335403,"creation_date":1686329613,"answer_id":76442299,"question_id":71949369,"body_markdown":"Extending @ahuemmer&#39;s solution, I was using external secrets in my `gradle.build` `repositories` closure nested under a `subprojects` closure. In order to make this solution work, I had to set my secrets in `secrets.gradle` as follows:\r\n\r\n```\r\nproject.ext.mySecretUser = &quot;me&quot;\r\nproject.ext.mySecretPassword = &quot;password123&quot;\r\n```\r\n\r\nThen my main `gradle.build` file looked like this:\r\n```\r\nif (file(&#39;secrets.gradle&#39;).exists()) {\r\n    apply from: &#39;secrets.gradle&#39;\r\n}\r\nelse {\r\n    project.ext.mySecretUser = System.getenv(&#39;mySecretUser&#39;)\r\n    project.ext.mySecretPassword = System.getenv(&#39;mySecretPassword&#39;)\r\n}\r\n\r\nsubprojects {\r\n\r\n\r\n    repositories {\r\n        maven {\r\n            credentials {\r\n                username mySecretUser\r\n                password mySecretPassword\r\n            }\r\n            url = &#39;https://some-internal-repo.com/internal-repo&#39;\r\n            name = &#39;some-internal-repo&#39;\r\n        }\r\n}","title":"How to use GitHub secrets or GitHub environment variables in build.gradle file","body":"<p>Extending @ahuemmer's solution, I was using external secrets in my <code>gradle.build</code> <code>repositories</code> closure nested under a <code>subprojects</code> closure. In order to make this solution work, I had to set my secrets in <code>secrets.gradle</code> as follows:</p>\n<pre><code>project.ext.mySecretUser = &quot;me&quot;\nproject.ext.mySecretPassword = &quot;password123&quot;\n</code></pre>\n<p>Then my main <code>gradle.build</code> file looked like this:</p>\n<pre><code>if (file('secrets.gradle').exists()) {\n    apply from: 'secrets.gradle'\n}\nelse {\n    project.ext.mySecretUser = System.getenv('mySecretUser')\n    project.ext.mySecretPassword = System.getenv('mySecretPassword')\n}\n\nsubprojects {\n\n\n    repositories {\n        maven {\n            credentials {\n                username mySecretUser\n                password mySecretPassword\n            }\n            url = 'https://some-internal-repo.com/internal-repo'\n            name = 'some-internal-repo'\n        }\n}\n</code></pre>\n"}],"owner":{"account_id":22879899,"reputation":93,"user_id":17021647,"display_name":"Tim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4212,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1686335403,"creation_date":1650519039,"question_id":71949369,"body_markdown":"I have some authentication secrets in GitHub and I have to use them in spring boot build.gradle file is there any example for the same.","title":"How to use GitHub secrets or GitHub environment variables in build.gradle file","body":"<p>I have some authentication secrets in GitHub and I have to use them in spring boot build.gradle file is there any example for the same.</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1828418,"reputation":3701,"user_id":2429058,"display_name":"cjungel"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1479413747,"creation_date":1479413747,"answer_id":40664221,"question_id":40663958,"body_markdown":"`@Conditional` annotation receives a class name that implements the `Condition` interface and creates the bean if that condition is matched.\r\n\r\nIf the condition you&#39;re trying to implement is simply the negation of another existing condition then you can extend from the existing condition and override the `matches`method as the negation of invoking the parent class `matches` method.","title":"Spring Conditional Annotation Operator","body":"<p><code>@Conditional</code> annotation receives a class name that implements the <code>Condition</code> interface and creates the bean if that condition is matched.</p>\n\n<p>If the condition you're trying to implement is simply the negation of another existing condition then you can extend from the existing condition and override the <code>matches</code>method as the negation of invoking the parent class <code>matches</code> method.</p>\n"},{"tags":[],"owner":{"account_id":972674,"reputation":211,"user_id":994874,"display_name":"Kevin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585134464,"creation_date":1585121276,"answer_id":60844480,"question_id":40663958,"body_markdown":"The code to get *inverse* condition in Spring.\r\n\r\n            \r\n       public class MyCondition extends SpringBootCondition {\r\n            public ConditionOutcome getMatchOutcome(ConditionContext context, \r\n                 AnnotatedTypeMetadata metadata) {\r\n              ConditionMessage.Builder message = ConditionMessage.forCondition(&quot;MyCondition&quot;);\r\n    \r\n              boolean enable = Binder.get(context.getEnvironment()).bind(&quot;execute.enable&quot;, \r\n                    Boolean.class).orElse(false);\r\n              if (enable) {\r\n                  return ConditionOutcome.match(message.foundExactly(&quot;execute enabled&quot;));\r\n              }\r\n    \r\n              return ConditionOutcome.noMatch(message.notAvailable(&quot;execute disable&quot;));\r\n           }\r\n        }\r\n        \r\n        public class InversedCondition extends MyCondition {\r\n             \r\n              @Override\r\n              public ConditionOutcome getMatchOutcome(\r\n                  ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n                return ConditionOutcome.inverse(super.getMatchOutcome(context, metadata));\r\n              }\r\n        }\r\n            \r\nSometimes, you don&#39;t really need an InversedCondition. If you use MyCondition for EnableRun class. Then you can use **@ConditionalOnMissingBean(EnableHello.class)** for the DisalbeRun class.\r\n","title":"Spring Conditional Annotation Operator","body":"<p>The code to get <em>inverse</em> condition in Spring.</p>\n\n<pre><code>   public class MyCondition extends SpringBootCondition {\n        public ConditionOutcome getMatchOutcome(ConditionContext context, \n             AnnotatedTypeMetadata metadata) {\n          ConditionMessage.Builder message = ConditionMessage.forCondition(\"MyCondition\");\n\n          boolean enable = Binder.get(context.getEnvironment()).bind(\"execute.enable\", \n                Boolean.class).orElse(false);\n          if (enable) {\n              return ConditionOutcome.match(message.foundExactly(\"execute enabled\"));\n          }\n\n          return ConditionOutcome.noMatch(message.notAvailable(\"execute disable\"));\n       }\n    }\n\n    public class InversedCondition extends MyCondition {\n\n          @Override\n          public ConditionOutcome getMatchOutcome(\n              ConditionContext context, AnnotatedTypeMetadata metadata) {\n            return ConditionOutcome.inverse(super.getMatchOutcome(context, metadata));\n          }\n    }\n</code></pre>\n\n<p>Sometimes, you don't really need an InversedCondition. If you use MyCondition for EnableRun class. Then you can use <strong>@ConditionalOnMissingBean(EnableHello.class)</strong> for the DisalbeRun class.</p>\n"},{"tags":[],"owner":{"account_id":28789687,"reputation":1,"user_id":22049356,"display_name":"rastazol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686335037,"creation_date":1686335037,"answer_id":76442818,"question_id":40663958,"body_markdown":"We can extend the `NoneNestedConditions` (since spring-boot-autoconfigure:1.3.0) and placing the predefined `Condition` inside the definition as a nested class condition as in the example below:\r\n```\r\npublic class NotMyCondition extends NoneNestedConditions {\r\n\r\n    public NotMyCondition() {\r\n        super(ConfigurationPhase.REGISTER_BEAN);\r\n    }\r\n\r\n    @Conditional(MyCondition.class)\r\n    public static class NotOnMyCondition {}\r\n}\r\n```\r\n\r\nIf this is the only defined condition on this nested condition, it will actually negate the original one.\r\n\r\nNote: I have found that if `MyCondition` extends the `Any/AllNestedConditions` class then the extention solution with overriding the super&#39;s method would not work and can lead to unexpected behavior.","title":"Spring Conditional Annotation Operator","body":"<p>We can extend the <code>NoneNestedConditions</code> (since spring-boot-autoconfigure:1.3.0) and placing the predefined <code>Condition</code> inside the definition as a nested class condition as in the example below:</p>\n<pre><code>public class NotMyCondition extends NoneNestedConditions {\n\n    public NotMyCondition() {\n        super(ConfigurationPhase.REGISTER_BEAN);\n    }\n\n    @Conditional(MyCondition.class)\n    public static class NotOnMyCondition {}\n}\n</code></pre>\n<p>If this is the only defined condition on this nested condition, it will actually negate the original one.</p>\n<p>Note: I have found that if <code>MyCondition</code> extends the <code>Any/AllNestedConditions</code> class then the extention solution with overriding the super's method would not work and can lead to unexpected behavior.</p>\n"}],"owner":{"account_id":3305465,"reputation":638,"user_id":2780428,"accept_rate":100,"display_name":"Alic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5983,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":40664221,"answer_count":3,"score":7,"last_activity_date":1686335037,"creation_date":1479412718,"question_id":40663958,"body_markdown":"I need to put a condition on two configuration classes for spring security. When the condition is true, use configuration A, and when the condition is false, use configuration B.\r\n\r\nI currently use two condition classes. They produce opposite results.\r\n\r\nIs it possible for me to use some operator in the conditional annotation? Something like this?\r\n\r\n    @Conditional( value = !MyCondition.class )\r\n","title":"Spring Conditional Annotation Operator","body":"<p>I need to put a condition on two configuration classes for spring security. When the condition is true, use configuration A, and when the condition is false, use configuration B.</p>\n\n<p>I currently use two condition classes. They produce opposite results.</p>\n\n<p>Is it possible for me to use some operator in the conditional annotation? Something like this?</p>\n\n<pre><code>@Conditional( value = !MyCondition.class )\n</code></pre>\n"},{"tags":["java","methods","primes"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686237603,"post_id":76433329,"comment_id":134774569,"body_markdown":"Please use text instead of images. See https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question for more details on the reason.","body":"Please use text instead of images. See <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\" title=\"why not upload images of code errors when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a> for more details on the reason."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":1,"creation_date":1686238063,"post_id":76433329,"comment_id":134774659,"body_markdown":"`while(count==hmw)` -&gt; `while (count &lt; hmw)`","body":"<code>while(count==hmw)</code> -&gt; <code>while (count &lt; hmw)</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686238240,"post_id":76433329,"comment_id":134774705,"body_markdown":"Debugging is a useful skill. If you want to become a professional software developer, it will be a necessary skill. I suggest you use a debugger on your code. You can set a breakpoint, and then follow the program one step at a time. While doing that, you can monitor the variables.  https://ericlippert.com/2014/03/05/how-to-debug-small-programs/","body":"Debugging is a useful skill. If you want to become a professional software developer, it will be a necessary skill. I suggest you use a debugger on your code. You can set a breakpoint, and then follow the program one step at a time. While doing that, you can monitor the variables.  <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"},{"owner":{"account_id":5471834,"reputation":103,"user_id":18117652,"display_name":"Maddy plus plus"},"score":0,"creation_date":1686238377,"post_id":76433329,"comment_id":134774731,"body_markdown":"@001 that didnt helped","body":"@001 that didnt helped"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1686238627,"post_id":76433329,"comment_id":134774784,"body_markdown":"Off topic: `if(count==2)  return true;  else  return false;` is the equivalent of `return count == 2;`.  You can also reduce the number of iterations of the loop in the `isPrime` method by using 2 as the initial value of `i`, going through the loop until `i` has reached the square root of `num`, and exiting the loop as soon as it its discovered `num` is not prime.  (But, leave `isPrime` as it is until after the bug is fixed.)","body":"Off topic: <code>if(count==2)  return true;  else  return false;</code> is the equivalent of <code>return count == 2;</code>.  You can also reduce the number of iterations of the loop in the <code>isPrime</code> method by using 2 as the initial value of <code>i</code>, going through the loop until <code>i</code> has reached the square root of <code>num</code>, and exiting the loop as soon as it its discovered <code>num</code> is not prime.  (But, leave <code>isPrime</code> as it is until after the bug is fixed.)"},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1686238693,"post_id":76433329,"comment_id":134774803,"body_markdown":"You also need to move `count++; number++;` to inside the loop. You will still have issues but that should get you started.","body":"You also need to move <code>count++; number++;</code> to inside the loop. You will still have issues but that should get you started."},{"owner":{"account_id":3779737,"reputation":572,"user_id":3139567,"display_name":"Goikiu"},"score":0,"creation_date":1686238901,"post_id":76433329,"comment_id":134774841,"body_markdown":"You should put the If check inside the loop otherwise this code won&#39;t work unless the first number inserted is prime.","body":"You should put the If check inside the loop otherwise this code won&#39;t work unless the first number inserted is prime."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1686238907,"post_id":76433329,"comment_id":134774843,"body_markdown":"What is the program supposed to do if a non-prime number is entered for `the number`?  What if, for example, I want  the 200 primes that follow 1296?","body":"What is the program supposed to do if a non-prime number is entered for <code>the number</code>?  What if, for example, I want  the 200 primes that follow 1296?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686239356,"post_id":76433329,"comment_id":134774933,"body_markdown":"Another tool useful for debugging is pretend you are the computer.  You can use pen and paper for the memory. Create a table with these columns: `number`, `hmw`,  and `count`. Follow the code. Each time a variable is initialized or the value changed, put the current value in its column.  You will learn more if you do the debugging than if we do it for you.","body":"Another tool useful for debugging is pretend you are the computer.  You can use pen and paper for the memory. Create a table with these columns: <code>number</code>, <code>hmw</code>,  and <code>count</code>. Follow the code. Each time a variable is initialized or the value changed, put the current value in its column.  You will learn more if you do the debugging than if we do it for you."}],"answers":[{"tags":[],"owner":{"account_id":28781536,"reputation":11,"user_id":22043060,"display_name":"Parth Maru"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1686334348,"creation_date":1686239788,"answer_id":76433691,"question_id":76433329,"body_markdown":"\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass NprimeNumbers {\r\n    public static void main(String[] args) {\r\n\r\n        Scanner scan = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the number : &quot;);\r\n        int currentNumber = scan.nextInt();\r\n\r\n        System.out.print(&quot;How many prime numbers to print : &quot;);\r\n        int n = scan.nextInt();\r\n\r\n        printNPrimes(currentNumber, n);\r\n\r\n        scan.close();\r\n    }\r\n\r\n    public static boolean isprime(int num) {\r\n        for (int divisor = 2; divisor &lt;= Math.sqrt(num); ++divisor) {\r\n            if (num % divisor == 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static void printNPrimes(int currentNumber, int n) {\r\n        int nextPrime = currentNumber + 1; // 12\r\n        while (n &gt; 0) {\r\n            if (isprime(nextPrime)) {\r\n                System.out.print(nextPrime + &quot; &quot;);\r\n                --n;\r\n                ++nextPrime;\r\n            } else {\r\n                ++nextPrime;\r\n            }\r\n        }\r\n        System.out.println();\r\n    }\r\n}\r\n```","title":"To display next N numbers of prime numbers in java","body":"<pre><code>import java.util.Scanner;\n\nclass NprimeNumbers {\n    public static void main(String[] args) {\n\n        Scanner scan = new Scanner(System.in);\n        System.out.print(&quot;Enter the number : &quot;);\n        int currentNumber = scan.nextInt();\n\n        System.out.print(&quot;How many prime numbers to print : &quot;);\n        int n = scan.nextInt();\n\n        printNPrimes(currentNumber, n);\n\n        scan.close();\n    }\n\n    public static boolean isprime(int num) {\n        for (int divisor = 2; divisor &lt;= Math.sqrt(num); ++divisor) {\n            if (num % divisor == 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static void printNPrimes(int currentNumber, int n) {\n        int nextPrime = currentNumber + 1; // 12\n        while (n &gt; 0) {\n            if (isprime(nextPrime)) {\n                System.out.print(nextPrime + &quot; &quot;);\n                --n;\n                ++nextPrime;\n            } else {\n                ++nextPrime;\n            }\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686239817,"creation_date":1686239817,"answer_id":76433694,"question_id":76433329,"body_markdown":"The `while` loop should be on the outside of the `if` statement as you want it to run until the next 5 primes have been found. You only want to output the number and increase `count` if `isprime()` returns true. The `number` variable should be increased outside of the `if` statement since we need the next number regardless if the current one was a prime or not.\r\n\r\nSo it needs to look more like:\r\n\r\n    number++; // skip the number they entered\r\n    int count=0;                   \r\n    while (count &lt; hmw) {\r\n      if(isprime(number))\r\n      {\r\n        System.out.print(number+&quot;,&quot;);  \r\n        count++;                        \r\n      }\r\n      number++;\r\n    }\r\n\r\nAs mentioned, your `isprime()` function is really inefficient. A slight fix would be to start at 2 and stop at num-1, returning false as soon as one of the numbers evenly divides into the candidate, as there&#39;s no reason to check any more numbers past that point. Only return true after you&#39;ve determined that no numbers evenly divide into the candidate:\r\n\r\n    public static boolean isprime(int num)\r\n    {\r\n        for(int i=2;i&lt;num;i++)\r\n        {\r\n            if(num%i==0)\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\nIf you go a step further, we can reduce the number of checks by using the square root of the candidate number, as described in the [trial division](https://en.wikipedia.org/wiki/Primality_test) section, as the upper bound of the for loop:\r\n\r\n    public static boolean isprime(int num)\r\n    {\r\n        int upperBound = (int)Math.sqrt((double)num);\r\n        for(int i=2;i&lt;=upperBound;i++)\r\n        {\r\n            if(num%i==0)\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n","title":"To display next N numbers of prime numbers in java","body":"<p>The <code>while</code> loop should be on the outside of the <code>if</code> statement as you want it to run until the next 5 primes have been found. You only want to output the number and increase <code>count</code> if <code>isprime()</code> returns true. The <code>number</code> variable should be increased outside of the <code>if</code> statement since we need the next number regardless if the current one was a prime or not.</p>\n<p>So it needs to look more like:</p>\n<pre><code>number++; // skip the number they entered\nint count=0;                   \nwhile (count &lt; hmw) {\n  if(isprime(number))\n  {\n    System.out.print(number+&quot;,&quot;);  \n    count++;                        \n  }\n  number++;\n}\n</code></pre>\n<p>As mentioned, your <code>isprime()</code> function is really inefficient. A slight fix would be to start at 2 and stop at num-1, returning false as soon as one of the numbers evenly divides into the candidate, as there's no reason to check any more numbers past that point. Only return true after you've determined that no numbers evenly divide into the candidate:</p>\n<pre><code>public static boolean isprime(int num)\n{\n    for(int i=2;i&lt;num;i++)\n    {\n        if(num%i==0)\n        {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n<p>If you go a step further, we can reduce the number of checks by using the square root of the candidate number, as described in the <a href=\"https://en.wikipedia.org/wiki/Primality_test\" rel=\"nofollow noreferrer\">trial division</a> section, as the upper bound of the for loop:</p>\n<pre><code>public static boolean isprime(int num)\n{\n    int upperBound = (int)Math.sqrt((double)num);\n    for(int i=2;i&lt;=upperBound;i++)\n    {\n        if(num%i==0)\n        {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28781268,"reputation":11,"user_id":22042856,"display_name":"Kanishk Pandey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686334292,"creation_date":1686239837,"answer_id":76433698,"question_id":76433329,"body_markdown":"You problem is the structure and the condition of your while loop. Your condition is `count==hmw`. This is saying to execute the while loop only if the number of prime numbers they want to print is 0 (because you manually set count to 0). You need to make it `count &lt;= hmw` (you could make it `count != hmw` but `&lt;=` is better because if `count` somehow goes past `hmw` you are safe. \r\n\r\nThe incrementing of your while loop also has some issues. You increment outside the while loop with:\r\n```\r\nwhile(count==hmw)\r\n   {\r\n      System.out.print(number+&quot;,&quot;);\r\n   }\r\n   count++;\r\n   number++;\r\n```\r\nYou need to put the increments inside the loop:\r\n```\r\nwhile(count!=hmw)\r\n   {\r\n     System.out.print(number+&quot;,&quot;);\r\n     count++;\r\n     number++;\r\n   }\r\n```\r\nNow this should be your output:\r\n\r\nEnter the number : 3\r\nHow many prime numbers to print: 4\r\n\r\n------------------------------OUTPUT------------------------------\r\n\r\n    3,4,5,6,\r\n    Process finished with exit code 0\r\n\r\n\r\nHowever, if you want to print prime numbers only after the number is input by the user, you need to put your conditional statement in your while loop:\r\n```\r\nwhile(count&lt;=hmw)\r\n    {\r\n        if(isprime(number)) {\r\n          System.out.print(number + &quot;,&quot;);\r\n          count++;\r\n        }\r\n        number++;\r\n     }\r\n```\r\nNow your output is perfect and looks like this:\r\n\r\nEnter the number : 3\r\nHow many prime numbers to print: 4\r\n\r\n------------------------------OUTPUT------------------------------\r\n\r\n    3,5,7,11,13,\r\n    Process finished with exit code 0\r\n\r\nHope this Helps!","title":"To display next N numbers of prime numbers in java","body":"<p>You problem is the structure and the condition of your while loop. Your condition is <code>count==hmw</code>. This is saying to execute the while loop only if the number of prime numbers they want to print is 0 (because you manually set count to 0). You need to make it <code>count &lt;= hmw</code> (you could make it <code>count != hmw</code> but <code>&lt;=</code> is better because if <code>count</code> somehow goes past <code>hmw</code> you are safe.</p>\n<p>The incrementing of your while loop also has some issues. You increment outside the while loop with:</p>\n<pre><code>while(count==hmw)\n   {\n      System.out.print(number+&quot;,&quot;);\n   }\n   count++;\n   number++;\n</code></pre>\n<p>You need to put the increments inside the loop:</p>\n<pre><code>while(count!=hmw)\n   {\n     System.out.print(number+&quot;,&quot;);\n     count++;\n     number++;\n   }\n</code></pre>\n<p>Now this should be your output:</p>\n<p>Enter the number : 3\nHow many prime numbers to print: 4</p>\n<p>------------------------------OUTPUT------------------------------</p>\n<pre><code>3,4,5,6,\nProcess finished with exit code 0\n</code></pre>\n<p>However, if you want to print prime numbers only after the number is input by the user, you need to put your conditional statement in your while loop:</p>\n<pre><code>while(count&lt;=hmw)\n    {\n        if(isprime(number)) {\n          System.out.print(number + &quot;,&quot;);\n          count++;\n        }\n        number++;\n     }\n</code></pre>\n<p>Now your output is perfect and looks like this:</p>\n<p>Enter the number : 3\nHow many prime numbers to print: 4</p>\n<p>------------------------------OUTPUT------------------------------</p>\n<pre><code>3,5,7,11,13,\nProcess finished with exit code 0\n</code></pre>\n<p>Hope this Helps!</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686252060,"creation_date":1686252060,"answer_id":76435082,"question_id":76433329,"body_markdown":"You can use an iterative _for-loop_ to loop _hwm_ times.\r\n\r\nWithin the _for-loop_, use a _while-loop_ to check _isprime_ with _number_.\r\n\r\nAs a note, in this case, the _while-loop_ doesn&#39;t require any enclosing code block, since we&#39;ll increase _number_ within the _isprime_ call.  \r\n_[O&#39;Reilly Media &amp;ndash; Java, A Beginner&#39;s Guide, 5th Edition &amp;ndash; &quot;Loops with no Body&quot;](https://www.oreilly.com/library/view/java-a-beginners/9780071606325/ch3lev1sec11.html)_.\r\n\r\n```java\r\nfor (int count = 1; count &lt;= hmw; count++) {\r\n    while (!isprime(++number));\r\n    System.out.print(number+&quot;,&quot;);\r\n}\r\n```\r\n\r\nHere is the input and output.\r\n\r\n```none\r\nEnter the number : 11\r\nHow many prime numbers to print : 5\r\n\r\n------------------------------OUTPUT------------------------------\r\n\r\n13,17,19,23,29,\r\n```","title":"To display next N numbers of prime numbers in java","body":"<p>You can use an iterative <em>for-loop</em> to loop <em>hwm</em> times.</p>\n<p>Within the <em>for-loop</em>, use a <em>while-loop</em> to check <em>isprime</em> with <em>number</em>.</p>\n<p>As a note, in this case, the <em>while-loop</em> doesn't require any enclosing code block, since we'll increase <em>number</em> within the <em>isprime</em> call.<br />\n<em><a href=\"https://www.oreilly.com/library/view/java-a-beginners/9780071606325/ch3lev1sec11.html\" rel=\"nofollow noreferrer\">O'Reilly Media – Java, A Beginner's Guide, 5th Edition – &quot;Loops with no Body&quot;</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int count = 1; count &lt;= hmw; count++) {\n    while (!isprime(++number));\n    System.out.print(number+&quot;,&quot;);\n}\n</code></pre>\n<p>Here is the input and output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the number : 11\nHow many prime numbers to print : 5\n\n------------------------------OUTPUT------------------------------\n\n13,17,19,23,29,\n</code></pre>\n"}],"owner":{"account_id":5471834,"reputation":103,"user_id":18117652,"display_name":"Maddy plus plus"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76435082,"answer_count":4,"score":0,"last_activity_date":1686334348,"creation_date":1686237168,"question_id":76433329,"body_markdown":"I want to display next n numbers of prime numbers in java\r\n\r\nso what i did is accepting the two inputs from user\r\n\r\nhe enters one number and then he enters the how many next prime numbers to be printed\r\n\r\nbut i am not getting any output there is no any error\r\n\r\ni have created a `isprime()` which returns true or false if number is prime or not\r\nand then in `main()` i created `count` variable to display howmany numbers to be printed\r\n```\r\nimport java.util.Scanner;\r\nclass NprimeNumbers \r\n{\r\n    public static boolean isprime(int num)\r\n    {\r\n        int count=0;\r\n\r\n        int i;\r\n        for(i=1;i&lt;=num;i++)\r\n        {\r\n            if(num%i==0)\r\n            {\r\n                count++;\r\n            }\r\n        }\r\n        if(count==2)\r\n            return true;\r\n        else\r\n            return false;\r\n    }\r\n    public static void main(String[] args)\r\n    {\r\n\r\n        Scanner sc=new Scanner(System.in);\r\n\r\n        System.out.println();\r\n\r\n        System.out.print(&quot;Enter the number : &quot;);\r\n        int number=sc.nextInt();\r\n\r\n        System.out.print(&quot;How many prime numbers to print : &quot;);\r\n        int hmw=sc.nextInt();\r\n\r\n        System.out.println();\r\n\r\n        System.out.println(&quot;------------------------------OUTPUT------------------------------&quot;);\r\n\r\n        System.out.println();\r\n\r\n        int count=0;           \r\n                \r\n                if(isprime(number))\r\n                {\r\n                    while(count==hmw)\r\n                    {\r\n                        System.out.print(number+&quot;,&quot;);\r\n                    }\r\n                    count++;\r\n                    number++;\r\n                }\r\n            \r\n            \r\n        \r\n\r\n    }\r\n    \r\n}\r\n\r\n```\r\n\r\n[![Output](https://i.stack.imgur.com/ICrUI.jpg)](https://i.stack.imgur.com/ICrUI.jpg)\r\n\r\n\r\nThe output should be 13,17,19,23,27\r\n","title":"To display next N numbers of prime numbers in java","body":"<p>I want to display next n numbers of prime numbers in java</p>\n<p>so what i did is accepting the two inputs from user</p>\n<p>he enters one number and then he enters the how many next prime numbers to be printed</p>\n<p>but i am not getting any output there is no any error</p>\n<p>i have created a <code>isprime()</code> which returns true or false if number is prime or not\nand then in <code>main()</code> i created <code>count</code> variable to display howmany numbers to be printed</p>\n<pre><code>import java.util.Scanner;\nclass NprimeNumbers \n{\n    public static boolean isprime(int num)\n    {\n        int count=0;\n\n        int i;\n        for(i=1;i&lt;=num;i++)\n        {\n            if(num%i==0)\n            {\n                count++;\n            }\n        }\n        if(count==2)\n            return true;\n        else\n            return false;\n    }\n    public static void main(String[] args)\n    {\n\n        Scanner sc=new Scanner(System.in);\n\n        System.out.println();\n\n        System.out.print(&quot;Enter the number : &quot;);\n        int number=sc.nextInt();\n\n        System.out.print(&quot;How many prime numbers to print : &quot;);\n        int hmw=sc.nextInt();\n\n        System.out.println();\n\n        System.out.println(&quot;------------------------------OUTPUT------------------------------&quot;);\n\n        System.out.println();\n\n        int count=0;           \n                \n                if(isprime(number))\n                {\n                    while(count==hmw)\n                    {\n                        System.out.print(number+&quot;,&quot;);\n                    }\n                    count++;\n                    number++;\n                }\n            \n            \n        \n\n    }\n    \n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ICrUI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ICrUI.jpg\" alt=\"Output\" /></a></p>\n<p>The output should be 13,17,19,23,27</p>\n"},{"tags":["java","graphics","3d","game-engine"],"answers":[{"tags":[],"owner":{"account_id":26593389,"reputation":51,"user_id":20216198,"display_name":"Christian H&#246;rath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686082889,"creation_date":1686081669,"answer_id":76418032,"question_id":76414423,"body_markdown":"Your method ```RenderUtils.cartesianToBarycentric``` calculates the barycentric coordinates of the pixel corresponding to the already projected triangle. However, you need the barycentric coordinates of the point that is covered by the pixel and lies within the triangle before the projection (so everything in 3D space). You can get the barycentric coordinates in clip space relatively easily, as it is explained very well in this post: https://stackoverflow.com/a/24460895/20216198\r\n","title":"Perspective-correct texture-mapping in my graphics engine","body":"<p>Your method <code>RenderUtils.cartesianToBarycentric</code> calculates the barycentric coordinates of the pixel corresponding to the already projected triangle. However, you need the barycentric coordinates of the point that is covered by the pixel and lies within the triangle before the projection (so everything in 3D space). You can get the barycentric coordinates in clip space relatively easily, as it is explained very well in this post: <a href=\"https://stackoverflow.com/a/24460895/20216198\">https://stackoverflow.com/a/24460895/20216198</a></p>\n"}],"owner":{"account_id":20615808,"reputation":11,"user_id":15133948,"display_name":"Raphael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686334331,"creation_date":1686052853,"question_id":76414423,"body_markdown":"I have written a 3D graphics engine in Java many years ago. It has texture mapping, but it does not account for the depth, so it&#39;s incorrect. See the attached screenshot, paying attention to the ground: \r\n\r\n![Screenshot of example with a perspective-incorrect mapping of the ground texture onto the screen][1]\r\n\r\nThe entire code is here: [GitHub repository][2]\r\n\r\nAnd I believe the fix would be somewhere in this class, `TexturedPolygon3dRenderer`:\r\n\r\n\r\n```java\r\npackage rcs.feyn.three.render.renderers;\r\n\r\nimport java.util.Optional;\r\n\r\nimport rcs.feyn.color.ColorUtils;\r\nimport rcs.feyn.math.MathUtils;\r\nimport rcs.feyn.math.Vector2d;\r\nimport rcs.feyn.math.Vector3d;\r\nimport rcs.feyn.three.gfx.Graphics3d;\r\nimport rcs.feyn.three.gfx.TextureRaster;\r\n\r\npublic class TexturedPolygon3dRenderer {\r\n\r\n  public static void render(\r\n      Graphics3d graphics,\r\n      Vector3d[] deviceCoordinates,\r\n      double intensity,\r\n      Optional&lt;int[]&gt; colors,\r\n      TextureRaster textureData,\r\n      Vector2d[] textureCoordinates,\r\n      int alpha) {\r\n\r\n    if (deviceCoordinates.length != 3) {\r\n      throw new IllegalArgumentException(&quot;Can only render triangles&quot;);\r\n    }\r\n\r\n    Vector3d va = deviceCoordinates[0];\r\n    Vector3d vb = deviceCoordinates[1];\r\n    Vector3d vc = deviceCoordinates[2];\r\n\r\n    double xa = va.x();\r\n    double xb = vb.x();\r\n    double xc = vc.x();\r\n    double xd = (xa+xb+xc)/3;\r\n\r\n    double ya = va.y();\r\n    double yb = vb.y();\r\n    double yc = vc.y();\r\n    double yd = (ya+yb+yc)/3;\r\n\r\n    double za = va.z();\r\n    double zb = vb.z();\r\n    double zc = vc.z();\r\n    double zd = (za+zb+zc)/3;\r\n\r\n    double u1 = xb - xa;\r\n    double v1 = xc - xa;\r\n    double u2 = yb - ya;\r\n    double v2 = yc - ya;\r\n    double u3 = zb - za;\r\n    double v3 = zc - za;\r\n\r\n    double aa = u2*v3 - u3*v2;\r\n    double bb = u3*v1 - u1*v3;\r\n    double cc = u1*v2 - u2*v1;\r\n\r\n    double dInvZdx = -aa/cc;\r\n    double dZdy = -bb/cc;\r\n\r\n    int screenW = graphics.getRaster().getWidth();\r\n    int screenH = graphics.getRaster().getHeight();\r\n\r\n    int ymin = MathUtils.roundToInt(MathUtils.max(MathUtils.min(ya, yb, yc), 0));\r\n    int ymax = MathUtils.roundToInt(MathUtils.min(MathUtils.max(ya, yb, yc), screenH));\r\n\r\n    boolean interpolateColor = colors.isPresent();\r\n\r\n    int tdw = textureData.getWidth();\r\n    int tdh = textureData.getHeight();\r\n\r\n    for (int y = ymin; y &lt;= ymax; y++) {\r\n      double ximin = Integer.MIN_VALUE;\r\n      double xjmin = Integer.MIN_VALUE;\r\n      double xkmin = Integer.MIN_VALUE;\r\n      double ximax = Integer.MAX_VALUE;\r\n      double xjmax = Integer.MAX_VALUE;\r\n      double xkmax = Integer.MAX_VALUE;\r\n\r\n      if ((y - yb) * (y - yc) &lt;= 0 &amp;&amp; yb != yc) {\r\n        ximax = xc + (y - yc)/(yb - yc) * (xb - xc);\r\n        ximin = ximax;\r\n      }\r\n      if ((y - yc) * (y - ya) &lt;= 0 &amp;&amp; yc != ya) {\r\n        xjmax = xa + (y - ya)/(yc - ya) * (xc - xa);\r\n        xjmin = xjmax;\r\n      }\r\n      if ((y - ya) * (y - yb) &lt;= 0 &amp;&amp; ya != yb) {\r\n        xkmax = xb + (y - yb)/(ya - yb) * (xa - xb);\r\n        xkmin = xkmax;\r\n      }\r\n\r\n      int xmin =\r\n          MathUtils.roundToInt(MathUtils.max(MathUtils.min(ximax, xjmax, xkmax), 0));\r\n      int xmax =\r\n          MathUtils.roundToInt(MathUtils.min(MathUtils.max(ximin, xjmin, xkmin), screenW));\r\n\r\n      double invZ = zd + (y - yd) * dZdy + (xmin - xd) * dInvZdx;\r\n\r\n      for (int x = xmin; x &lt; xmax; x++, invZ += dInvZdx) {\r\n        Vector3d bary = RenderUtils.cartesianToBarycentric(x, y, va, vb, vc);\r\n\r\n        Vector2d interpolatedTextureCoordinate = RenderUtils.barycentricToCartesian(\r\n            bary, textureCoordinates[0], textureCoordinates[1], textureCoordinates[2]);\r\n\r\n        double textureX = interpolatedTextureCoordinate.x();\r\n        double textureY = interpolatedTextureCoordinate.y();\r\n\r\n        int textureXInt = MathUtils.clamp((int) textureX, 0, tdw - 1);\r\n        int textureYInt = MathUtils.clamp((int) textureY, 0, tdh - 1);\r\n\r\n        int pixel = textureData.getPixel(textureXInt, textureYInt);\r\n\r\n        int colorWithIntensity = ColorUtils.mulRGB(pixel, intensity);\r\n\r\n        if (interpolateColor) {\r\n          int[] colorz = colors.get();\r\n\r\n          int interpolatedColor = ColorUtils.addRGBA(\r\n              ColorUtils.mulRGBA(colorz[0], bary.x()),\r\n              ColorUtils.addRGBA(\r\n                  ColorUtils.mulRGBA(colorz[1], bary.y()),\r\n                  ColorUtils.mulRGBA(colorz[2], bary.z())));\r\n\r\n          colorWithIntensity = ColorUtils.blendRGB(\r\n              colorWithIntensity,\r\n              interpolatedColor,\r\n              intensity);\r\n        }\r\n\r\n        int finalColor = ColorUtils.setAlphaToRGBA(colorWithIntensity, alpha);\r\n\r\n        graphics.putPixel(x, y, invZ, finalColor);\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nLet me know if I can provide more info. Unfortunately, I wrote this such a long time ago, and I don&#39;t understand the mathematical details anymore. I should have documented it better.\r\n\r\n  [1]: https://i.stack.imgur.com/tQQSq.png\r\n  [2]: https://github.com/r-c-s/Feyn3d","title":"Perspective-correct texture-mapping in my graphics engine","body":"<p>I have written a 3D graphics engine in Java many years ago. It has texture mapping, but it does not account for the depth, so it's incorrect. See the attached screenshot, paying attention to the ground:</p>\n<p><img src=\"https://i.stack.imgur.com/tQQSq.png\" alt=\"Screenshot of example with a perspective-incorrect mapping of the ground texture onto the screen\" /></p>\n<p>The entire code is here: <a href=\"https://github.com/r-c-s/Feyn3d\" rel=\"nofollow noreferrer\">GitHub repository</a></p>\n<p>And I believe the fix would be somewhere in this class, <code>TexturedPolygon3dRenderer</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package rcs.feyn.three.render.renderers;\n\nimport java.util.Optional;\n\nimport rcs.feyn.color.ColorUtils;\nimport rcs.feyn.math.MathUtils;\nimport rcs.feyn.math.Vector2d;\nimport rcs.feyn.math.Vector3d;\nimport rcs.feyn.three.gfx.Graphics3d;\nimport rcs.feyn.three.gfx.TextureRaster;\n\npublic class TexturedPolygon3dRenderer {\n\n  public static void render(\n      Graphics3d graphics,\n      Vector3d[] deviceCoordinates,\n      double intensity,\n      Optional&lt;int[]&gt; colors,\n      TextureRaster textureData,\n      Vector2d[] textureCoordinates,\n      int alpha) {\n\n    if (deviceCoordinates.length != 3) {\n      throw new IllegalArgumentException(&quot;Can only render triangles&quot;);\n    }\n\n    Vector3d va = deviceCoordinates[0];\n    Vector3d vb = deviceCoordinates[1];\n    Vector3d vc = deviceCoordinates[2];\n\n    double xa = va.x();\n    double xb = vb.x();\n    double xc = vc.x();\n    double xd = (xa+xb+xc)/3;\n\n    double ya = va.y();\n    double yb = vb.y();\n    double yc = vc.y();\n    double yd = (ya+yb+yc)/3;\n\n    double za = va.z();\n    double zb = vb.z();\n    double zc = vc.z();\n    double zd = (za+zb+zc)/3;\n\n    double u1 = xb - xa;\n    double v1 = xc - xa;\n    double u2 = yb - ya;\n    double v2 = yc - ya;\n    double u3 = zb - za;\n    double v3 = zc - za;\n\n    double aa = u2*v3 - u3*v2;\n    double bb = u3*v1 - u1*v3;\n    double cc = u1*v2 - u2*v1;\n\n    double dInvZdx = -aa/cc;\n    double dZdy = -bb/cc;\n\n    int screenW = graphics.getRaster().getWidth();\n    int screenH = graphics.getRaster().getHeight();\n\n    int ymin = MathUtils.roundToInt(MathUtils.max(MathUtils.min(ya, yb, yc), 0));\n    int ymax = MathUtils.roundToInt(MathUtils.min(MathUtils.max(ya, yb, yc), screenH));\n\n    boolean interpolateColor = colors.isPresent();\n\n    int tdw = textureData.getWidth();\n    int tdh = textureData.getHeight();\n\n    for (int y = ymin; y &lt;= ymax; y++) {\n      double ximin = Integer.MIN_VALUE;\n      double xjmin = Integer.MIN_VALUE;\n      double xkmin = Integer.MIN_VALUE;\n      double ximax = Integer.MAX_VALUE;\n      double xjmax = Integer.MAX_VALUE;\n      double xkmax = Integer.MAX_VALUE;\n\n      if ((y - yb) * (y - yc) &lt;= 0 &amp;&amp; yb != yc) {\n        ximax = xc + (y - yc)/(yb - yc) * (xb - xc);\n        ximin = ximax;\n      }\n      if ((y - yc) * (y - ya) &lt;= 0 &amp;&amp; yc != ya) {\n        xjmax = xa + (y - ya)/(yc - ya) * (xc - xa);\n        xjmin = xjmax;\n      }\n      if ((y - ya) * (y - yb) &lt;= 0 &amp;&amp; ya != yb) {\n        xkmax = xb + (y - yb)/(ya - yb) * (xa - xb);\n        xkmin = xkmax;\n      }\n\n      int xmin =\n          MathUtils.roundToInt(MathUtils.max(MathUtils.min(ximax, xjmax, xkmax), 0));\n      int xmax =\n          MathUtils.roundToInt(MathUtils.min(MathUtils.max(ximin, xjmin, xkmin), screenW));\n\n      double invZ = zd + (y - yd) * dZdy + (xmin - xd) * dInvZdx;\n\n      for (int x = xmin; x &lt; xmax; x++, invZ += dInvZdx) {\n        Vector3d bary = RenderUtils.cartesianToBarycentric(x, y, va, vb, vc);\n\n        Vector2d interpolatedTextureCoordinate = RenderUtils.barycentricToCartesian(\n            bary, textureCoordinates[0], textureCoordinates[1], textureCoordinates[2]);\n\n        double textureX = interpolatedTextureCoordinate.x();\n        double textureY = interpolatedTextureCoordinate.y();\n\n        int textureXInt = MathUtils.clamp((int) textureX, 0, tdw - 1);\n        int textureYInt = MathUtils.clamp((int) textureY, 0, tdh - 1);\n\n        int pixel = textureData.getPixel(textureXInt, textureYInt);\n\n        int colorWithIntensity = ColorUtils.mulRGB(pixel, intensity);\n\n        if (interpolateColor) {\n          int[] colorz = colors.get();\n\n          int interpolatedColor = ColorUtils.addRGBA(\n              ColorUtils.mulRGBA(colorz[0], bary.x()),\n              ColorUtils.addRGBA(\n                  ColorUtils.mulRGBA(colorz[1], bary.y()),\n                  ColorUtils.mulRGBA(colorz[2], bary.z())));\n\n          colorWithIntensity = ColorUtils.blendRGB(\n              colorWithIntensity,\n              interpolatedColor,\n              intensity);\n        }\n\n        int finalColor = ColorUtils.setAlphaToRGBA(colorWithIntensity, alpha);\n\n        graphics.putPixel(x, y, invZ, finalColor);\n      }\n    }\n  }\n}\n</code></pre>\n<p>Let me know if I can provide more info. Unfortunately, I wrote this such a long time ago, and I don't understand the mathematical details anymore. I should have documented it better.</p>\n"},{"tags":["java","sandbox"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":2,"creation_date":1328700990,"post_id":9192493,"comment_id":11567712,"body_markdown":"Did you read this ? http://stackoverflow.com/questions/2867747/create-java-sandbox-based-on-security-policies","body":"Did you read this ? <a href=\"http://stackoverflow.com/questions/2867747/create-java-sandbox-based-on-security-policies\" title=\"create java sandbox based on security policies\">stackoverflow.com/questions/2867747/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":507121,"reputation":561,"user_id":1082861,"display_name":"gt5050"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1686334300,"creation_date":1328701348,"answer_id":9192623,"question_id":9192493,"body_markdown":"**IMPORTANT — since Java 17 policy files and security manager have been deprecated and marked for removal**. [Here is a blog post explaining how to handle sanboxing post security manager][1].\r\n\r\n---\r\n\r\nYou can control the environment using policy files\r\nhttp://docs.oracle.com/javase/1.4.2/docs/guide/security/PolicyFiles.html#Examples ([archived version @archive.org][2])\r\n\r\nyou could run then run your jar\r\n\r\n `java -Djava.security.manager -Djava.security.policy=/path/your_policy_file.policy -jar`\r\n\r\n\r\n  [1]: https://inside.java/2021/04/23/security-and-sandboxing-post-securitymanager/\r\n  [2]: https://web.archive.org/web/20130715074612/http://docs.oracle.com/javase/1.4.2/docs/guide/security/PolicyFiles.html#Examples","title":"How to run java code in a restricted sandbox (without network, filesystem access)","body":"<p><strong>IMPORTANT — since Java 17 policy files and security manager have been deprecated and marked for removal</strong>. <a href=\"https://inside.java/2021/04/23/security-and-sandboxing-post-securitymanager/\" rel=\"nofollow noreferrer\">Here is a blog post explaining how to handle sanboxing post security manager</a>.</p>\n<hr />\n<p>You can control the environment using policy files\n<a href=\"http://docs.oracle.com/javase/1.4.2/docs/guide/security/PolicyFiles.html#Examples\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/1.4.2/docs/guide/security/PolicyFiles.html#Examples</a> (<a href=\"https://web.archive.org/web/20130715074612/http://docs.oracle.com/javase/1.4.2/docs/guide/security/PolicyFiles.html#Examples\" rel=\"nofollow noreferrer\">archived version @archive.org</a>)</p>\n<p>you could run then run your jar</p>\n<p><code>java -Djava.security.manager -Djava.security.policy=/path/your_policy_file.policy -jar</code></p>\n"},{"tags":[],"owner":{"account_id":2666886,"reputation":63,"user_id":2305127,"display_name":"codecodewut"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686174969,"creation_date":1438022739,"answer_id":31660887,"question_id":9192493,"body_markdown":"This page describes the process in detail:\r\n\r\n(archived)\r\nhttp://web.archive.org/web/20160401020824/http://www.jayway.com/2014/06/13/sandboxing-plugins-in-java/","title":"How to run java code in a restricted sandbox (without network, filesystem access)","body":"<p>This page describes the process in detail:</p>\n<p>(archived)\n<a href=\"http://web.archive.org/web/20160401020824/http://www.jayway.com/2014/06/13/sandboxing-plugins-in-java/\" rel=\"nofollow noreferrer\">http://web.archive.org/web/20160401020824/http://www.jayway.com/2014/06/13/sandboxing-plugins-in-java/</a></p>\n"}],"owner":{"account_id":87775,"reputation":17894,"user_id":243233,"accept_rate":75,"display_name":"Jus12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5870,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":9192623,"answer_count":2,"score":12,"last_activity_date":1686334300,"creation_date":1328700741,"question_id":9192493,"body_markdown":"Say some programmer gives me an executable jar (from Java code) along with the entry point to use. I want to run this jar (programmatically) from Java code in a restricted sandbox environment with no network or filesystem access or database access and a fixed amount of CPU and memory. I.e., the Java code should not cause any side effects on other programs running on the my jvm.\r\n\r\nIdeally I would like to allow certain access based on situation (say for example, only files in a certain directory with quota).\r\n\r\n\r\n\r\n","title":"How to run java code in a restricted sandbox (without network, filesystem access)","body":"<p>Say some programmer gives me an executable jar (from Java code) along with the entry point to use. I want to run this jar (programmatically) from Java code in a restricted sandbox environment with no network or filesystem access or database access and a fixed amount of CPU and memory. I.e., the Java code should not cause any side effects on other programs running on the my jvm.</p>\n\n<p>Ideally I would like to allow certain access based on situation (say for example, only files in a certain directory with quota).</p>\n"},{"tags":["java","qgis","geoserver","wms"],"comments":[{"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"score":1,"creation_date":1686250610,"post_id":76434161,"comment_id":134777078,"body_markdown":"Did you read the FAQ about running in jdk 17?","body":"Did you read the FAQ about running in jdk 17?"},{"owner":{"account_id":1532472,"reputation":1134,"user_id":2060804,"accept_rate":43,"display_name":"minisaurus"},"score":0,"creation_date":1686253570,"post_id":76434161,"comment_id":134777537,"body_markdown":"thank you @IanTurton :) I read `https://docs.geoserver.org/2.23.x/en/user/production/java.html` and did `rm webapps/geoserver/WEB-INF/lib/marlin-0.9.3.jar`as suggested there. Now works. Do you want to do an answer? Or I can ..","body":"thank you @IanTurton :) I read <code>https:&#47;&#47;docs.geoserver.org&#47;2.23.x&#47;en&#47;user&#47;production&#47;java.ht&zwnj;&#8203;ml</code> and did <code>rm webapps&#47;geoserver&#47;WEB-INF&#47;lib&#47;marlin-0.9.3.jar</code>as suggested there. Now works. Do you want to do an answer? Or I can .."},{"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"score":1,"creation_date":1686256730,"post_id":76434161,"comment_id":134778060,"body_markdown":"You can do it ..","body":"You can do it .."}],"answers":[{"tags":[],"owner":{"account_id":1532472,"reputation":1134,"user_id":2060804,"accept_rate":43,"display_name":"minisaurus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686334259,"creation_date":1686334259,"answer_id":76442755,"question_id":76434161,"body_markdown":"As advised by @IanTurton I read [https://docs.geoserver.org/2.23.x/en/user/production/java.html][1] \r\n\r\nI then did `rm webapps/geoserver/WEB-INF/lib/marlin-0.9.3.jar` as suggested on that page.\r\n\r\nWorked a treat, thank you :)\r\n\r\n\r\n  [1]: https://docs.geoserver.org/2.23.x/en/user/production/java.html","title":"geoserver v23.1 wms getcapabilites service exception","body":"<p>As advised by @IanTurton I read <a href=\"https://docs.geoserver.org/2.23.x/en/user/production/java.html\" rel=\"nofollow noreferrer\">https://docs.geoserver.org/2.23.x/en/user/production/java.html</a></p>\n<p>I then did <code>rm webapps/geoserver/WEB-INF/lib/marlin-0.9.3.jar</code> as suggested on that page.</p>\n<p>Worked a treat, thank you :)</p>\n"}],"owner":{"account_id":1532472,"reputation":1134,"user_id":2060804,"accept_rate":43,"display_name":"minisaurus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686334259,"creation_date":1686243672,"question_id":76434161,"body_markdown":"I have `geoserver` running on local host. `GetCapabilites` produces the following error:\r\n\r\n`     &lt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&lt;!DOCTYPE ServiceExceptionReport SYSTEM &quot;http://localhost:8080/geoserver/schemas/wms/1.1.1/WMS_exception_1_1_1.dtd&quot;&gt; &lt;ServiceExceptionReport version=&quot;1.1.1&quot; &gt;   &lt;ServiceException&gt;\r\n      java.lang.IllegalAccessError: superclass access check failed: class org.marlin.pisces.MarlinRenderingEngine (in unnamed module @0x6183b039) cannot access class sun.java2d.pipe.RenderingEngine (in module java.desktop) because module java.desktop does not export sun.java2d.pipe to unnamed module @0x6183b039\r\nsuperclass access check failed: class org.marlin.pisces.MarlinRenderingEngine (in unnamed module @0x6183b039) cannot access class sun.java2d.pipe.RenderingEngine (in module java.desktop) because module java.desktop does not export sun.java2d.pipe to unnamed module @0x6183b039\r\n&lt;/ServiceException&gt;&lt;/ServiceExceptionReport&gt;`\r\n\r\nrunning `platform independent binary` on `Ubuntu Desktop 22.04`, java is `openjdk version &quot;17.0.7&quot; 2023-04-18`\r\n\r\nI am unable to connect from e.g Qgis \r\n\r\nThe web interface works fine. I only have one workspace, one store and one layer so far ...","title":"geoserver v23.1 wms getcapabilites service exception","body":"<p>I have <code>geoserver</code> running on local host. <code>GetCapabilites</code> produces the following error:</p>\n<p><code>     &lt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&lt;!DOCTYPE ServiceExceptionReport SYSTEM &quot;http://localhost:8080/geoserver/schemas/wms/1.1.1/WMS_exception_1_1_1.dtd&quot;&gt; &lt;ServiceExceptionReport version=&quot;1.1.1&quot; &gt;   &lt;ServiceException&gt; java.lang.IllegalAccessError: superclass access check failed: class org.marlin.pisces.MarlinRenderingEngine (in unnamed module @0x6183b039) cannot access class sun.java2d.pipe.RenderingEngine (in module java.desktop) because module java.desktop does not export sun.java2d.pipe to unnamed module @0x6183b039 superclass access check failed: class org.marlin.pisces.MarlinRenderingEngine (in unnamed module @0x6183b039) cannot access class sun.java2d.pipe.RenderingEngine (in module java.desktop) because module java.desktop does not export sun.java2d.pipe to unnamed module @0x6183b039 &lt;/ServiceException&gt;&lt;/ServiceExceptionReport&gt;</code></p>\n<p>running <code>platform independent binary</code> on <code>Ubuntu Desktop 22.04</code>, java is <code>openjdk version &quot;17.0.7&quot; 2023-04-18</code></p>\n<p>I am unable to connect from e.g Qgis</p>\n<p>The web interface works fine. I only have one workspace, one store and one layer so far ...</p>\n"},{"tags":["java","spring-boot","validation"],"owner":{"account_id":17814639,"reputation":63,"user_id":12938483,"display_name":"PoCiTo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686333868,"creation_date":1686333868,"question_id":76442713,"body_markdown":"Is there possibility to directly use specific implementations of ConstraintValidators without annotations? For example NotNullValidator without @NotNull annotation. \r\n\r\nI&#39;m writing a validation in which there are many field validations that depends on other fields, so I decided to write custom class level ConstraintValidator instead of creating many validation groups/sequences. But it would be nice if there is possibility to reuse other simple validations like NotNull, NotEmpty in my class level validator, so I don&#39;t have to manually add CosntrainViolations to ConstraintValidatorContext for specific fields.\r\n\r\nI&#39;m using Spring&#39;s @RestControllerAdvice to handle MethodArgumentNotValidException and ConstraintViolationException to map the errors to JSON response.","title":"Using Java ConstraintValidator without annotations","body":"<p>Is there possibility to directly use specific implementations of ConstraintValidators without annotations? For example NotNullValidator without @NotNull annotation.</p>\n<p>I'm writing a validation in which there are many field validations that depends on other fields, so I decided to write custom class level ConstraintValidator instead of creating many validation groups/sequences. But it would be nice if there is possibility to reuse other simple validations like NotNull, NotEmpty in my class level validator, so I don't have to manually add CosntrainViolations to ConstraintValidatorContext for specific fields.</p>\n<p>I'm using Spring's @RestControllerAdvice to handle MethodArgumentNotValidException and ConstraintViolationException to map the errors to JSON response.</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":18452928,"reputation":2722,"user_id":14927001,"display_name":"Dmitrii B"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1611514938,"creation_date":1611513700,"answer_id":65874531,"question_id":65874319,"body_markdown":"Your starter `spring-boot-starter-web` contains inside itself these dependencies \r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.3&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.3&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\nbesides, you add in your pom.xml that:\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\nso, when you&#39;ll start your application you have in classpath ambiguity. I think it&#39;s cause of your problem.\r\nSpring Boot starters save you the trouble of specifying explicitly declare dependency.\r\nTry to remove `spring-webmvc` dependency.","title":"Spring boot application fails after start - An attempt was made to call a method that does not exist. The attempt was made from the following location","body":"<p>Your starter <code>spring-boot-starter-web</code> contains inside itself these dependencies</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n  &lt;version&gt;5.3.3&lt;/version&gt;\n  &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n  &lt;version&gt;5.3.3&lt;/version&gt;\n  &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>besides, you add in your pom.xml that:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.1.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>so, when you'll start your application you have in classpath ambiguity. I think it's cause of your problem.\nSpring Boot starters save you the trouble of specifying explicitly declare dependency.\nTry to remove <code>spring-webmvc</code> dependency.</p>\n"},{"tags":[],"owner":{"account_id":19654213,"reputation":11,"user_id":14387243,"display_name":"itzhouq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686333649,"creation_date":1613973294,"answer_id":66310662,"question_id":65874319,"body_markdown":"I had this same issue when I run a Spring Boot Application of Web. But I got following error messages:\r\n\r\n```txt\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.configureHandlerExceptionResolvers(WebMvcAutoConfiguration.java:519)\r\n\r\nThe following method did not exist:\r\n\r\n    org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.addDefaultHandlerExceptionResolvers(Ljava/util/List;)V\r\n\r\nThe method&#39;s class, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration, is available from the following locations:\r\n\r\n    jar:file:/Users/itzhouq/dev/mavne_repository/org/springframework/boot/spring-boot-autoconfigure/2.1.6.RELEASE/spring-boot-autoconfigure-2.1.6.RELEASE.jar!/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class\r\n\r\nIt was loaded from the following location:\r\n\r\n    file:/Users/itzhouq/dev/mavne_repository/org/springframework/boot/spring-boot-autoconfigure/2.1.6.RELEASE/spring-boot-autoconfigure-2.1.6.RELEASE.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains a single, compatible version of org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration\r\n```\r\n\r\nThis may be `spring-boot-autoconfigure`&#39;s exception, so I have checked the dependency of it:\r\n\r\n`org.springframework.boot:spring-boot-web:2.2.1.RELEASE`--&gt;  \r\n`org.springframework.boot:spring-boot-starter:2.2.1.RELEASE` --&gt;  \r\n`org.springframework.boot:spring-boot-autoconfigure:2.2.1.RELEASE(omitted for conflict with 2.1.6.RELEASE)`.\r\n\r\nObviously, the `autoconfigure` was failing because of a version conflict. To solve this problem, I have added the following dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI&#39;ve confirmed this dependency had been added in the module and I&#39;ve rerun the application.","title":"Spring boot application fails after start - An attempt was made to call a method that does not exist. The attempt was made from the following location","body":"<p>I had this same issue when I run a Spring Boot Application of Web. But I got following error messages:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n\n    org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.configureHandlerExceptionResolvers(WebMvcAutoConfiguration.java:519)\n\nThe following method did not exist:\n\n    org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.addDefaultHandlerExceptionResolvers(Ljava/util/List;)V\n\nThe method's class, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration, is available from the following locations:\n\n    jar:file:/Users/itzhouq/dev/mavne_repository/org/springframework/boot/spring-boot-autoconfigure/2.1.6.RELEASE/spring-boot-autoconfigure-2.1.6.RELEASE.jar!/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class\n\nIt was loaded from the following location:\n\n    file:/Users/itzhouq/dev/mavne_repository/org/springframework/boot/spring-boot-autoconfigure/2.1.6.RELEASE/spring-boot-autoconfigure-2.1.6.RELEASE.jar\n\n\nAction:\n\nCorrect the classpath of your application so that it contains a single, compatible version of org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration\n</code></pre>\n<p>This may be <code>spring-boot-autoconfigure</code>'s exception, so I have checked the dependency of it:</p>\n<p><code>org.springframework.boot:spring-boot-web:2.2.1.RELEASE</code>--&gt;<br />\n<code>org.springframework.boot:spring-boot-starter:2.2.1.RELEASE</code> --&gt;<br />\n<code>org.springframework.boot:spring-boot-autoconfigure:2.2.1.RELEASE(omitted for conflict with 2.1.6.RELEASE)</code>.</p>\n<p>Obviously, the <code>autoconfigure</code> was failing because of a version conflict. To solve this problem, I have added the following dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n    &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I've confirmed this dependency had been added in the module and I've rerun the application.</p>\n"},{"tags":[],"owner":{"account_id":22462407,"reputation":21,"user_id":16664083,"display_name":"Vikas Dhiman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629115843,"creation_date":1629092841,"answer_id":68797898,"question_id":65874319,"body_markdown":"Add one more dependency is Spring-webMVC because spring web MVC is using for deploying your project\r\n\r\n   \r\n\r\n     &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t&lt;version&gt;5.3.3&lt;/version&gt;\r\n    \t&lt;scope&gt;compile&lt;/scope&gt;\r\n     &lt;/dependency","title":"Spring boot application fails after start - An attempt was made to call a method that does not exist. The attempt was made from the following location","body":"<p>Add one more dependency is Spring-webMVC because spring web MVC is using for deploying your project</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;5.3.3&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n &lt;/dependency\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28513528,"reputation":1,"user_id":21823183,"display_name":"Daniel Arias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683266747,"creation_date":1683266747,"answer_id":76179240,"question_id":65874319,"body_markdown":"My error was based on the fact that org.springframework.boot.autoconfigure had problems accessing a library that was located in org.springframework.beans, so I added the following dependency to my pom.xml and the problem was solved.\r\n\r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n     &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n     &lt;version&gt;5.3.18&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Spring boot application fails after start - An attempt was made to call a method that does not exist. The attempt was made from the following location","body":"<p>My error was based on the fact that org.springframework.boot.autoconfigure had problems accessing a library that was located in org.springframework.beans, so I added the following dependency to my pom.xml and the problem was solved.</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n &lt;version&gt;5.3.18&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7375742,"reputation":409,"user_id":5614434,"accept_rate":60,"display_name":"Naseer Mohammad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686223412,"creation_date":1686223412,"answer_id":76431339,"question_id":65874319,"body_markdown":"Even I have got a similar error\r\n\r\n    An attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.springframework.security.config.annotation.web.configuration.HttpSecurityConfiguration.httpSecurity(HttpSecurityConfiguration.java:112)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;void org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.setSecurityContextHolderStrategy(org.springframework.security.core.context.SecurityContextHolderStrategy)&#39;\r\n\r\nI checked for the same method `setSecurityContextHolderStrategy` inside `WebAsyncManagerIntegrationFilter` class in the Spring Docs site, Its still not updated here [link][1]. Then I went into source code of class file `WebAsyncManagerIntegrationFilter` in Github [link][2] and realised that the method was added inside the class since verison 5.8 of Spring. \r\n\r\nAnd when I went to see the Spring Security dependency version in my application it was `5.7.8`. So I had to upgrade my Spring security dependency to 5.8 or above to solve this.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/web/context/request/async/WebAsyncManagerIntegrationFilter.html\r\n  [2]: https://github.com/spring-projects/spring-security/blob/main/web/src/main/java/org/springframework/security/web/context/request/async/WebAsyncManagerIntegrationFilter.java","title":"Spring boot application fails after start - An attempt was made to call a method that does not exist. The attempt was made from the following location","body":"<p>Even I have got a similar error</p>\n<pre><code>An attempt was made to call a method that does not exist. The attempt was made from the following location:\n\norg.springframework.security.config.annotation.web.configuration.HttpSecurityConfiguration.httpSecurity(HttpSecurityConfiguration.java:112)\n</code></pre>\n<p>The following method did not exist:</p>\n<pre><code>'void org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.setSecurityContextHolderStrategy(org.springframework.security.core.context.SecurityContextHolderStrategy)'\n</code></pre>\n<p>I checked for the same method <code>setSecurityContextHolderStrategy</code> inside <code>WebAsyncManagerIntegrationFilter</code> class in the Spring Docs site, Its still not updated here <a href=\"https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/web/context/request/async/WebAsyncManagerIntegrationFilter.html\" rel=\"nofollow noreferrer\">link</a>. Then I went into source code of class file <code>WebAsyncManagerIntegrationFilter</code> in Github <a href=\"https://github.com/spring-projects/spring-security/blob/main/web/src/main/java/org/springframework/security/web/context/request/async/WebAsyncManagerIntegrationFilter.java\" rel=\"nofollow noreferrer\">link</a> and realised that the method was added inside the class since verison 5.8 of Spring.</p>\n<p>And when I went to see the Spring Security dependency version in my application it was <code>5.7.8</code>. So I had to upgrade my Spring security dependency to 5.8 or above to solve this.</p>\n"}],"owner":{"account_id":14910733,"reputation":93,"user_id":10766303,"display_name":"Yasmin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18085,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":65874531,"answer_count":5,"score":8,"last_activity_date":1686333649,"creation_date":1611512448,"question_id":65874319,"body_markdown":"I&#39;m new in Spring Boot, I&#39;m trying to build a simple application with REST Api, and I&#39;m getting this error immediately when starting the app:\r\n\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2021-01-24 20:08:19.505 ERROR 11344 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.requestMappingHandlerAdapter(WebMvcAutoConfiguration.java:369)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.requestMappingHandlerAdapter(org.springframework.web.accept.ContentNegotiationManager, org.springframework.format.support.FormattingConversionService, org.springframework.validation.Validator)&#39;\r\n\r\nThe method&#39;s class, org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.1.3.RELEASE/spring-webmvc-5.1.3.RELEASE.jar!/org/springframework/web/servlet/config/annotation/DelegatingWebMvcConfiguration.class\r\n\r\nThe class hierarchy was loaded from the following locations:\r\n\r\n    org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration: file:/C:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.1.3.RELEASE/spring-webmvc-5.1.3.RELEASE.jar\r\n    org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport: file:/C:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.1.3.RELEASE/spring-webmvc-5.1.3.RELEASE.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains a single, compatible version of org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration\r\n\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nI did not finish yet with the development of the app, but I can&#39;t go on because of this errors.\r\n\r\nThere are my classes so far:\r\n\r\npom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.4.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micro1&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;micro1&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n&lt;!--\t\t\t&lt;version&gt;1.4.200&lt;/version&gt;--&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\n\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.19.1&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\ncontroller:\r\n```\r\npackage com.example.micro1.controllers;\r\n\r\nimport com.example.micro1.entities.User;\r\nimport com.example.micro1.services.Service;\r\nimport lombok.Data;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/users&quot;)\r\n@Data\r\npublic class Controller {\r\n    private final Service service;\r\n\r\n    @PostMapping\r\n    User addNewUser(@RequestBody User user){\r\n        return service.add(user);\r\n    }\r\n}\r\n\r\n```\r\n\r\nservice:\r\n```\r\npackage com.example.micro1.services;\r\n\r\n\r\nimport com.example.micro1.entities.User;\r\nimport com.example.micro1.repositories.Repository;\r\nimport lombok.Data;\r\n\r\n@org.springframework.stereotype.Service\r\n@Data\r\npublic class Service {\r\n    private final Repository repository;\r\n\r\n    public User add(User user){\r\n        return repository.save(user);\r\n    }\r\n}\r\n\r\n```\r\n\r\nrepository:\r\n```\r\npackage com.example.micro1.repositories;\r\n\r\nimport com.example.micro1.entities.User;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\n@org.springframework.stereotype.Repository\r\npublic interface Repository extends JpaRepository&lt;User, Integer&gt; {\r\n    @Override\r\n    &lt;S extends User&gt; S save(S s);\r\n}\r\n```\r\n\r\nOne entity for now:\r\n```\r\npackage com.example.micro1.entities;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private int id;\r\n    private String name;\r\n    private String phoneNumber;\r\n}\r\n```\r\n application.properties:\r\n```\r\n#h2\r\nspring.datasource.url=jdbc:h2:mem:testdb\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=password\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.h2.console.enabled=true\r\n```\r\n\r\nThe application class:\r\n```\r\npackage com.example.micro1;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Micro1Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Micro1Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nPlease tell me if there is something else that I should write here...\r\nThanks!","title":"Spring boot application fails after start - An attempt was made to call a method that does not exist. The attempt was made from the following location","body":"<p>I'm new in Spring Boot, I'm trying to build a simple application with REST Api, and I'm getting this error immediately when starting the app:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-01-24 20:08:19.505 ERROR 11344 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n\n    org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.requestMappingHandlerAdapter(WebMvcAutoConfiguration.java:369)\n\nThe following method did not exist:\n\n    'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.requestMappingHandlerAdapter(org.springframework.web.accept.ContentNegotiationManager, org.springframework.format.support.FormattingConversionService, org.springframework.validation.Validator)'\n\nThe method's class, org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration, is available from the following locations:\n\n    jar:file:/C:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.1.3.RELEASE/spring-webmvc-5.1.3.RELEASE.jar!/org/springframework/web/servlet/config/annotation/DelegatingWebMvcConfiguration.class\n\nThe class hierarchy was loaded from the following locations:\n\n    org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration: file:/C:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.1.3.RELEASE/spring-webmvc-5.1.3.RELEASE.jar\n    org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport: file:/C:/Users/user/.m2/repository/org/springframework/spring-webmvc/5.1.3.RELEASE/spring-webmvc-5.1.3.RELEASE.jar\n\n\nAction:\n\nCorrect the classpath of your application so that it contains a single, compatible version of org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration\n\n\nProcess finished with exit code 0\n</code></pre>\n<p>I did not finish yet with the development of the app, but I can't go on because of this errors.</p>\n<p>There are my classes so far:</p>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;micro1&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;micro1&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n&lt;!--            &lt;version&gt;1.4.200&lt;/version&gt;--&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;5.1.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n\n\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.19.1&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>controller:</p>\n<pre><code>package com.example.micro1.controllers;\n\nimport com.example.micro1.entities.User;\nimport com.example.micro1.services.Service;\nimport lombok.Data;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(&quot;/users&quot;)\n@Data\npublic class Controller {\n    private final Service service;\n\n    @PostMapping\n    User addNewUser(@RequestBody User user){\n        return service.add(user);\n    }\n}\n\n</code></pre>\n<p>service:</p>\n<pre><code>package com.example.micro1.services;\n\n\nimport com.example.micro1.entities.User;\nimport com.example.micro1.repositories.Repository;\nimport lombok.Data;\n\n@org.springframework.stereotype.Service\n@Data\npublic class Service {\n    private final Repository repository;\n\n    public User add(User user){\n        return repository.save(user);\n    }\n}\n\n</code></pre>\n<p>repository:</p>\n<pre><code>package com.example.micro1.repositories;\n\nimport com.example.micro1.entities.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\n@org.springframework.stereotype.Repository\npublic interface Repository extends JpaRepository&lt;User, Integer&gt; {\n    @Override\n    &lt;S extends User&gt; S save(S s);\n}\n</code></pre>\n<p>One entity for now:</p>\n<pre><code>package com.example.micro1.entities;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n    private String name;\n    private String phoneNumber;\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code>#h2\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.h2.console.enabled=true\n</code></pre>\n<p>The application class:</p>\n<pre><code>package com.example.micro1;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Micro1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Micro1Application.class, args);\n    }\n\n}\n</code></pre>\n<p>Please tell me if there is something else that I should write here...\nThanks!</p>\n"},{"tags":["java","jpa","hibernate-criteria"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1686402462,"post_id":76442671,"comment_id":134795503,"body_markdown":"Unless you are returning entities which are a special case that allow providers to perform other queries in the background if needed to build them (and have the info available to know how to group the data), you can&#39;t return formed collections from queries. All you could do is get the raw data and group it yourself to form the java objects.","body":"Unless you are returning entities which are a special case that allow providers to perform other queries in the background if needed to build them (and have the info available to know how to group the data), you can&#39;t return formed collections from queries. All you could do is get the raw data and group it yourself to form the java objects."},{"owner":{"account_id":14117739,"reputation":101,"user_id":10199101,"display_name":"Di_"},"score":0,"creation_date":1686496661,"post_id":76442671,"comment_id":134803372,"body_markdown":"Student is an entity too, but I want to return a list of them, I was thinking it&#39;s impossible but I wanted to ask so I can be sure","body":"Student is an entity too, but I want to return a list of them, I was thinking it&#39;s impossible but I wanted to ask so I can be sure"}],"owner":{"account_id":14117739,"reputation":101,"user_id":10199101,"display_name":"Di_"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686333411,"creation_date":1686333411,"question_id":76442671,"body_markdown":"Suppose I have a Teacher class with a list of students, I want to write a multiselect that gets some properties from the class Teacher and a list of students name with score &gt; 15 for example, \r\nSo I want to have a constructor that matches the multiselect in this way for example\r\n\r\n    public TeacherDTO(String name, String course, List&lt;String&gt; studentNames) {\r\n        this.name = name;\r\n        this.course = course;\r\n        this.studentNames = studentNames;\r\n    }\r\n\r\nSo how do I write the multiselect to get this ? This is what I wrote but I get a line for each student\r\n\r\n        final Root&lt;Teacher&gt; root = criteriaQuery.from(Teacher.class);\r\n        final Join&lt;Teacher, Student&gt; join = root.join(Teacher_.students, JoinType.LEFT);\r\n        join.on(builder.isGreaterThanOrEquals(join.get(Student_.score), 15));\r\n        \r\n        criteriaQuery.multiselect(\r\n            root.get(Teacher_.name),\r\n        \troot.get(Teacher_.course),\r\n            join.get(Student_name));","title":"How do I create a criteria query multiselect with a list","body":"<p>Suppose I have a Teacher class with a list of students, I want to write a multiselect that gets some properties from the class Teacher and a list of students name with score &gt; 15 for example,\nSo I want to have a constructor that matches the multiselect in this way for example</p>\n<pre><code>public TeacherDTO(String name, String course, List&lt;String&gt; studentNames) {\n    this.name = name;\n    this.course = course;\n    this.studentNames = studentNames;\n}\n</code></pre>\n<p>So how do I write the multiselect to get this ? This is what I wrote but I get a line for each student</p>\n<pre><code>    final Root&lt;Teacher&gt; root = criteriaQuery.from(Teacher.class);\n    final Join&lt;Teacher, Student&gt; join = root.join(Teacher_.students, JoinType.LEFT);\n    join.on(builder.isGreaterThanOrEquals(join.get(Student_.score), 15));\n    \n    criteriaQuery.multiselect(\n        root.get(Teacher_.name),\n        root.get(Teacher_.course),\n        join.get(Student_name));\n</code></pre>\n"},{"tags":["java","android","google-places-api"],"answers":[{"tags":[],"owner":{"account_id":295795,"reputation":5373,"user_id":600379,"display_name":"Dakshinamurthy Karra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538060308,"creation_date":1538060308,"answer_id":52539880,"question_id":52539645,"body_markdown":"I guess that is the output you get when you print place.getLatLng(). `getLanLng()` returns an object that has two variables `latitude` and `longitude` using which you can get the individual values.\r\n","title":"split the latitude and longitude of the googleplacepicker, place.getLatLng()","body":"<p>I guess that is the output you get when you print place.getLatLng(). <code>getLanLng()</code> returns an object that has two variables <code>latitude</code> and <code>longitude</code> using which you can get the individual values.</p>\n"},{"tags":[],"owner":{"account_id":16473307,"reputation":11,"user_id":11901878,"display_name":"Arizen Bolt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686333342,"creation_date":1686296092,"answer_id":76438144,"question_id":52539645,"body_markdown":"- to get latitude, use `place.getLatLng().latitude`\r\n- to get longitude use `place.getLatLng().longitude`\r\n\r\nSo the code for a `TextView` would be:\r\n\r\n```java\r\ntextView.setText(&quot;Lat = &quot; + place.getLatLng().latitude +\r\n                 &quot; Lng = &quot; + place.getLatLng().longitude)\r\n```","title":"split the latitude and longitude of the googleplacepicker, place.getLatLng()","body":"<ul>\n<li>to get latitude, use <code>place.getLatLng().latitude</code></li>\n<li>to get longitude use <code>place.getLatLng().longitude</code></li>\n</ul>\n<p>So the code for a <code>TextView</code> would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>textView.setText(&quot;Lat = &quot; + place.getLatLng().latitude +\n                 &quot; Lng = &quot; + place.getLatLng().longitude)\n</code></pre>\n"}],"owner":{"account_id":13111271,"reputation":23,"user_id":9472216,"display_name":"Jaysurya Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1686333342,"creation_date":1538059496,"question_id":52539645,"body_markdown":"How do I split the coordinates given by the `place.getLatLng()` function of `googleplacepicker` into double values of latitude and longitude separately stored .\r\n\r\n\r\nExample of the output of `place.getLatLng()` is &quot;lat/lng: (12.8614515,77.6647081)&quot;\r\n\r\nAnd how do I get lat= 12.8614515 and lng = 77.6647081","title":"split the latitude and longitude of the googleplacepicker, place.getLatLng()","body":"<p>How do I split the coordinates given by the <code>place.getLatLng()</code> function of <code>googleplacepicker</code> into double values of latitude and longitude separately stored .</p>\n\n<p>Example of the output of <code>place.getLatLng()</code> is \"lat/lng: (12.8614515,77.6647081)\"</p>\n\n<p>And how do I get lat= 12.8614515 and lng = 77.6647081</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1675869998,"post_id":75387061,"comment_id":133021357,"body_markdown":"Try again with a snapshot build","body":"Try again with a snapshot build"},{"owner":{"account_id":27635863,"reputation":3,"user_id":21093796,"display_name":"Ayush"},"score":0,"creation_date":1675939566,"post_id":75387061,"comment_id":133037294,"body_markdown":"thanks for response @TilmanHausherr. Getting error when taking build of 3.0.0-Snapshot. Error: `Could not find org.apache.pdfbox:pdfbox:3.0.0-SNAPSHOT`. There are two options, either to add qrcode image on pdf using pdfbox 3.0. alpha. Or the other one which I am trying to achieve is the size of the pdf file increases after removing the qr code image on it as [link] (https://stackoverflow.com/questions/75359435/size-of-the-pdf-file-increases-after-removing-qr-code-image-using-pdfbox-library)","body":"thanks for response @TilmanHausherr. Getting error when taking build of 3.0.0-Snapshot. Error: <code>Could not find org.apache.pdfbox:pdfbox:3.0.0-SNAPSHOT</code>. There are two options, either to add qrcode image on pdf using pdfbox 3.0. alpha. Or the other one which I am trying to achieve is the size of the pdf file increases after removing the qr code image on it as [link] (<a href=\"https://stackoverflow.com/questions/75359435/size-of-the-pdf-file-increases-after-removing-qr-code-image-using-pdfbox-library\" title=\"size of the pdf file increases after removing qr code image using pdfbox library\">stackoverflow.com/questions/75359435/&hellip;</a>)"},{"owner":{"account_id":27635863,"reputation":3,"user_id":21093796,"display_name":"Ayush"},"score":0,"creation_date":1675939942,"post_id":75387061,"comment_id":133037420,"body_markdown":"Here, in 3.0 alpha, loading of document from file system is very fast as compared to 2.x. Also, the modified file is compressed after saving on file system. Performance wise there is no issue, the only issue here is our main functionality of adding qr code in pdf is not working resulting in corrupt pdf.","body":"Here, in 3.0 alpha, loading of document from file system is very fast as compared to 2.x. Also, the modified file is compressed after saving on file system. Performance wise there is no issue, the only issue here is our main functionality of adding qr code in pdf is not working resulting in corrupt pdf."},{"owner":{"account_id":27635863,"reputation":3,"user_id":21093796,"display_name":"Ayush"},"score":0,"creation_date":1675939986,"post_id":75387061,"comment_id":133037429,"body_markdown":"whereas In 2.0, the load operation was slow and also the pdf file was not compressed after saving. But the qr code image was adding fine. So, either we need to fix this issue or fix the above link shared in the comment where in 2.0, the pdf file size should be reduced  after removing the qr code image and saving on file system.","body":"whereas In 2.0, the load operation was slow and also the pdf file was not compressed after saving. But the qr code image was adding fine. So, either we need to fix this issue or fix the above link shared in the comment where in 2.0, the pdf file size should be reduced  after removing the qr code image and saving on file system."},{"owner":{"account_id":27635863,"reputation":3,"user_id":21093796,"display_name":"Ayush"},"score":0,"creation_date":1675940029,"post_id":75387061,"comment_id":133037440,"body_markdown":"@TilmanHausherr  can you please check this case [link] (https://stackoverflow.com/questions/75359435/size-of-the-pdf-file-increases-after-removing-qr-code-image-using-pdfbox-library)","body":"@TilmanHausherr  can you please check this case [link] (<a href=\"https://stackoverflow.com/questions/75359435/size-of-the-pdf-file-increases-after-removing-qr-code-image-using-pdfbox-library\" title=\"size of the pdf file increases after removing qr code image using pdfbox library\">stackoverflow.com/questions/75359435/&hellip;</a>)"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1675943006,"post_id":75387061,"comment_id":133038322,"body_markdown":"Maybe you need to use the apache repository in your pom.xml","body":"Maybe you need to use the apache repository in your pom.xml"}],"answers":[{"tags":[],"owner":{"account_id":19323078,"reputation":11,"user_id":14126355,"display_name":"Vidhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686333019,"creation_date":1686333019,"answer_id":76442631,"question_id":75387061,"body_markdown":"[PDFBox 3.0 Migration Guide][1] says:\r\n\r\n&gt; Don&#39;t use the source as output\r\n&gt; \r\n&gt; The input file must not be used as output for saving operations. It\r\n&gt; will corrupt the file and throw an exception as parts of the file are\r\n&gt; read the first time when saving it.\r\n\r\n\r\n  [1]: https://pdfbox.apache.org/3.0/migration.html\r\nYou can verify by checking out the following line from your error logs:\r\n\r\n    org.apache.pdfbox.pdmodel.PDDocument.save - You are overwriting the existing file 24411393_with_barcode_img.pdf, this will produce a corrupted file if you&#39;re also reading from it","title":"After saving pdf file using pdfbox 3.0 alpha library, the pdf file becomes corrupted","body":"<p><a href=\"https://pdfbox.apache.org/3.0/migration.html\" rel=\"nofollow noreferrer\">PDFBox 3.0 Migration Guide</a> says:</p>\n<blockquote>\n<p>Don't use the source as output</p>\n<p>The input file must not be used as output for saving operations. It\nwill corrupt the file and throw an exception as parts of the file are\nread the first time when saving it.</p>\n</blockquote>\n<p>You can verify by checking out the following line from your error logs:</p>\n<pre><code>org.apache.pdfbox.pdmodel.PDDocument.save - You are overwriting the existing file 24411393_with_barcode_img.pdf, this will produce a corrupted file if you're also reading from it\n</code></pre>\n"}],"owner":{"account_id":27635863,"reputation":3,"user_id":21093796,"display_name":"Ayush"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686333019,"creation_date":1675865753,"question_id":75387061,"body_markdown":"Use case is to first remove and then add qr code image in pdf file and save it on the file system. So, first after removing the qr code image and saving the removed qr code image file on the file system, the size of the pdf got compressed which is a correct behavior. For eg, original file size was 6.8 mb and after removing using pdfbox 3.0, it got reduced to 6.7mb. Earlier, was using pdfbox 2.0.24 and 2.0.27, in both of them, after removing the qr code image, the size increases to 8.1 mb.\r\n\r\nNow, loading the removed qr code image file from file system and adding the qr code image and saving it back again on file system. Here, after opening the modified file on the file system, all the content of the pdf file got corrupted and only the added qr code image was inserted.\r\n\r\nThe issue is occurring at the time of saving the file. Is the issue in pdfbox 3.0 library. Because earlier using 2.x, didn&#39;t got this issue but there the size of the removed qr code image increases.\r\n\r\nAttaching the code for adding the qr code image and the error logs below.\r\n\r\n       ```\r\n       Files.copy(sourceFile.toPath(),destinationFile.toPath(),StandardCopyOption.REPLACE_EXISTING);\r\n    \tpdDocument=Loader.loadPDF(destinationFile,MemoryUsageSetting.setupTempFileOnly());\r\n            if (pdDocument.isEncrypted()) {\r\n                pdDocument.setAllSecurityToBeRemoved(true);\r\n            }\r\n            int total = pdDocument.getNumberOfPages();\r\n            PDPage page = pdDocument.getDocumentCatalog().getPages().get(0);\r\n            PDRectangle rectangle = getRotatedMediaBox(page);\r\n\r\n            getQRCodeImageSize(aBarcodeVO.getQrCodePixel(), Math.abs(getInchToMM(rectangle.getWidth()) * getInchToMM(rectangle.getHeight())));\r\n\r\n            long startTimePages = System.currentTimeMillis();\r\n            for (int i = 0; i &lt; total; i++) {\r\n                PDPage pdPage = pdDocument.getPage(i);\r\n                if (i == 0 || aBarcodeVO.getDisplacementVO().isApplyForAllPages()) {\r\n\r\n                    PDRectangle pageRect = getRotatedMediaBox(pdPage);\r\n                    log.debug(&quot;pageRect width:&quot; + pageRect.getWidth());\r\n                    log.debug(&quot;pageRect height:&quot; + pageRect.getHeight());\r\n\r\n                    int rotation = pdPage.getRotation();\r\n                    log.debug(&quot;Page Rotation :::: &quot; + rotation);\r\n\r\n                    PDRectangle cropBoxRect = pdPage.getCropBox();\r\n                    log.debug(&quot;cropBoxRect width:&quot; + cropBoxRect.getWidth());\r\n                    log.debug(&quot;cropBoxRect height:&quot; + cropBoxRect.getHeight());\r\n\r\n                    // Calculate margin between crop box rectangle and page rectangle.\r\n                    float[] margins = getCropBoxMargin(pageRect, cropBoxRect, rotation);\r\n\r\n                    if (rotation == 90 || rotation == 270) {\r\n                        cropBoxRect = new PDRectangle(cropBoxRect.getLowerLeftY(), cropBoxRect.getLowerLeftX(),\r\n                                cropBoxRect.getHeight(), cropBoxRect.getWidth());\r\n                    }\r\n\r\n                    float width = cropBoxRect.getWidth();\r\n                    float height = cropBoxRect.getHeight();\r\n\r\n                    log.debug(&quot;Page Width :: &quot; + width);\r\n                    log.debug(&quot;Page Height :: &quot; + height);\r\n\r\n                    ABarcodeDisplacementVO displacementVO = aBarcodeVO.getDisplacementVO();\r\n                    displacementVO.setPageWidth(width);\r\n                    displacementVO.setPageHeight(height);\r\n\r\n                    // Calculate llx and lly for QR Code image.\r\n                    float rectLlx = getOffsetX(displacementVO, qrImageSize) + margins[0];\r\n                    float rectLly = getOffsetY(displacementVO, qrImageSize) + margins[1];\r\n                    log.debug(&quot;Image LLX :::: &quot; + rectLlx);\r\n                    log.debug(&quot;Image LLY :::: &quot; + rectLly);\r\n\r\n                    BufferedImage bufferedImage = getImage();\r\n                    PDPageContentStream pageContentStream = new PDPageContentStream(pdDocument, pdPage,\r\n                            PDPageContentStream.AppendMode.APPEND, true, true);\r\n                    PDImageXObject image = JPEGFactory.createFromImage(pdDocument, bufferedImage);\r\n\r\n                    String imgUniqueId = aBarcodeVO.getImgUniqueId().concat(String.valueOf(i));\r\n                    XMPMetadata xmp = XMPMetadata.createXMPMetadata();\r\n                    DublinCoreSchema dc = xmp.createAndAddDublinCoreSchema();\r\n                    dc.setTitle(imgUniqueId);\r\n                    XmpSerializer serializer = new XmpSerializer();\r\n                    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                    serializer.serialize(xmp, baos, true);\r\n                    PDMetadata metadata = new PDMetadata(pdDocument);\r\n                    metadata.importXMPMetadata(baos.toByteArray());\r\n                    image.setMetadata(metadata);\r\n\r\n                    pageContentStream.saveGraphicsState();\r\n\r\n                    if (rotation == 90) {\r\n                        pageContentStream.transform(Matrix.getRotateInstance(Math.toRadians(rotation),\r\n                                pdPage.getCropBox().getWidth() + pdPage.getCropBox().getLowerLeftX(), 0));\r\n                    } else if (rotation == 270) {\r\n                        pageContentStream.transform(Matrix.getRotateInstance(Math.toRadians(rotation), 0,\r\n                                pdPage.getCropBox().getHeight() + pdPage.getCropBox().getLowerLeftY()));\r\n                    } else if (rotation == 180) {\r\n                        pageContentStream.transform(Matrix.getRotateInstance(Math.toRadians(rotation),\r\n                                pdPage.getCropBox().getUpperRightX(), pdPage.getCropBox().getUpperRightY()));\r\n                    }\r\n\r\n                    pageContentStream.drawImage(image, rectLlx, rectLly, qrImageSize, qrImageSize);\r\n                    pageContentStream.restoreGraphicsState();\r\n                    pageContentStream.close();\r\n                }\r\n            }\r\n            log.debug(String.format(&quot;Add bar code End for startTimePages Total Time Taken:[%d]--&gt;Exit&quot;, System.currentTimeMillis()-startTimePages));\r\n\r\n            long startTimeSave = System.currentTimeMillis();\r\n            pdDocument.save(destinationFile, CompressParameters.NO_COMPRESSION);\r\n\t\t\tpdDocument.close();\r\n\r\n ```\r\n\r\n    public static PDRectangle getRotatedMediaBox(PDPage page) {\r\n\t\t\t\tPDRectangle mediaBox = page.getMediaBox();\r\n\t\t\t\tint rotationAngle = page.getRotation();\r\n\t\t\t\tif (rotationAngle == 90 || rotationAngle == 270) {\r\n\t\t\t\t\treturn new PDRectangle(mediaBox.getLowerLeftY(), mediaBox.getLowerLeftX(), mediaBox.getHeight(),\r\n\t\t\t\t\t\t\tmediaBox.getWidth());\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn mediaBox;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n```\r\n    /**\r\n\t\t\t * This method returns offset X value based on given displacement. \r\n\t\t\t * @param displacementVO\r\n\t\t\t * @param imgWidth\r\n\t\t\t * @return offset X position for image.\r\n\t\t\t */\r\n\t\t\tprotected float getOffsetX(ABarcodeDisplacementVO displacementVO, float imgWidth) {\r\n\t\t\t\tfloat offsetX = 0;\r\n\t\t\t\tswitch (Positions.valueOf(displacementVO.getPosition())) {\r\n\t\t\t\tcase TL:\r\n\t\t\t\tcase BL:\r\n\t\t\t\t\toffsetX = displacementVO.getLeftPt();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase TC:\r\n\t\t\t\tcase BC:\r\n\t\t\t\t\toffsetX = (displacementVO.getPageWidth() / 2) - (imgWidth / 2);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase TR:\r\n\t\t\t\tcase BR:\r\n\t\t\t\t\toffsetX = displacementVO.getPageWidth() - (imgWidth + displacementVO.getRightPt());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;IMG offsetX :: &quot;+offsetX);\r\n\t\t\t\treturn offsetX;\r\n\t\t\t}\r\n```\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * This method returns offset Y value based on given displacement.\r\n\t\t\t * @param displacementVO\r\n\t\t\t * @param imgHeight\r\n\t\t\t * @return offset Y position for image.\r\n\t\t\t */\r\n\t\t\tprotected float getOffsetY(ABarcodeDisplacementVO displacementVO, float imgHeight) {\r\n\t\t\t\tfloat offsetY = 0;\r\n\t\t\t\tswitch (Positions.valueOf(displacementVO.getPosition())) {\r\n\t\t\t\tcase TL:\r\n\t\t\t\tcase TC:\r\n\t\t\t\tcase TR:\r\n\t\t\t\t\toffsetY = displacementVO.getPageHeight() - (imgHeight + displacementVO.getTopPt());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase BL:\r\n\t\t\t\tcase BC:\r\n\t\t\t\tcase BR:\r\n\t\t\t\t\toffsetY = displacementVO.getBottomPt();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;IMG offsetY :: &quot;+offsetY);\r\n\t\t\t\treturn offsetY;\r\n\t\t\t}\r\n\t\r\n```\r\nError logs::\r\n```\r\n08-02-2023 19:39:04.174 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - handleAddBarCode(ABarcodeVO aBarcodeVO) Enter\r\n08-02-2023 19:39:33.671 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeCopy Total Time Taken:[29496]--&gt;Exit\r\n08-02-2023 19:40:07.974 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeLoad Total Time Taken:[34302]--&gt;Exit\r\n08-02-2023 19:40:07.974 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeGetPages Total Time Taken:[0]--&gt;Exit\r\n08-02-2023 19:40:08.227 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.calculateQRCodeImageSize - Enter to Calculate QR code Image Size :: docSize=62376.89 ,higherSize=124740 ,lowerSize=62370, higherPxSize=85,lowerPxSize=60\r\n08-02-2023 19:40:08.228 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.calculateQRCodeImageSize - Based on File Size Calculated QR Code Size :: 60.00276\r\n08-02-2023 19:40:08.228 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeQRCodeImageSize Total Time Taken:[254]--&gt;Exit\r\n08-02-2023 19:40:08.228 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - pageRect width:595.32\r\n08-02-2023 19:40:08.230 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - pageRect height:841.92\r\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Page Rotation :::: 0\r\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - cropBoxRect width:595.32\r\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - cropBoxRect height:841.92\r\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Page Width :: 595.32\r\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Page Height :: 841.92\r\nIMG offsetX :: 0.0\r\nIMG offsetY :: 781.91724\r\n08-02-2023 19:40:08.234 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Image LLX :::: 0.0\r\n08-02-2023 19:40:08.235 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Image LLY :::: 781.91724\r\n08-02-2023 19:40:10.853 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimePages Total Time Taken:[2625]--&gt;Exit\r\n08-02-2023 19:40:10.854 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m org.apache.pdfbox.pdmodel.PDDocument.save - You are overwriting the existing file 24411393_with_barcode_img.pdf, this will produce a corrupted file if you&#39;re also reading from it\r\n08-02-2023 19:41:02.451 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m o.apache.pdfbox.pdfparser.BaseParser.parseDirObject - Skipped unexpected dir object = &#39;╓■1ⁿl╘bM#L▓&#176;M&#223;wR╥_jΓ-G─3zyV&#191;╧mo■⌠&#187;&#39; at offset 1134626 (start offset: 1134592)\r\n08-02-2023 19:41:02.452 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m o.apache.pdfbox.pdfparser.BaseParser.parseCOSDictionaryNameValuePair - Bad dictionary declaration at offset 1134626\r\n08-02-2023 19:41:02.454 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m o.apache.pdfbox.pdfparser.COSParser.parseFileObject - Object (807:0) at offset 1130425 does not end with &#39;endobj&#39; but with &#39;&#39;\r\n08-02-2023 19:42:15.878 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.a.p.io.RandomAccessInputStream.read - read() returns -1, assumed position: 0, actual position: 0\r\n08-02-2023 19:42:15.879 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.a.p.io.RandomAccessInputStream.read - read() returns -1, assumed position: 0, actual position: 0\r\n08-02-2023 19:42:15.879 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.a.p.io.RandomAccessInputStream.read - read() returns -1, assumed position: 0, actual position: -1\r\n08-02-2023 19:42:15.882 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.apache.pdfbox.pdfparser.COSParser.parseObjectStreamObject - object stream 2145 could not be parsed due to an exception\r\njava.io.IOException: Error: Expected a long type at offset 0, instead got &#39;&#39;\r\n        at org.apache.pdfbox.pdfparser.BaseParser.readLong(BaseParser.java:1292)\r\n        at org.apache.pdfbox.pdfparser.BaseParser.readObjectNumber(BaseParser.java:1217)\r\n        at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.privateReadObjectOffsets(PDFObjectStreamParser.java:188)\r\n        at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.parseAllObjects(PDFObjectStreamParser.java:124)\r\n        at org.apache.pdfbox.pdfparser.COSParser.parseObjectStreamObject(COSParser.java:773)\r\n        at org.apache.pdfbox.pdfparser.COSParser.parseObjectDynamically(COSParser.java:621)\r\n        at org.apache.pdfbox.pdfparser.COSParser.dereferenceCOSObject(COSParser.java:573)\r\n        at org.apache.pdfbox.cos.COSObject.getObject(COSObject.java:121)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.addObjectToWrite(COSWriter.java:553)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:1201)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:1191)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:1191)\r\n        at org.apache.pdfbox.cos.COSDictionary.accept(COSDictionary.java:1258)\r\n        at org.apache.pdfbox.cos.COSObject.accept(COSObject.java:188)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObject(COSWriter.java:610)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObject(COSWriter.java:643)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObjects(COSWriter.java:540)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteBody(COSWriter.java:450)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDocument(COSWriter.java:1264)\r\n        at org.apache.pdfbox.cos.COSDocument.accept(COSDocument.java:402)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1542)\r\n        at org.apache.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1418)\r\n        at org.apache.pdfbox.pdmodel.PDDocument.save(PDDocument.java:1018)\r\n        at org.apache.pdfbox.pdmodel.PDDocument.save(PDDocument.java:963)\r\n        at com.asite.common.barcode.impl.AQRCodeImpl.handleAddBarCode(AQRCodeImpl.java:256)\r\n        at com.asite.common.barcode.ABaseBarcode.addBarCode(ABaseBarcode.java:71)\r\n        at com.asite.common.utility.asr.util.AsrUtil.addQRCodeForLinkFile(AsrUtil.java:236)\r\n        at com.asite.common.utility.asr.service.AsrDelegate.applyQRCodeToLinkFiles(AsrDelegate.java:275)\r\n        at com.asite.common.utility.asr.service.AsrService.processAndGetASRFile(AsrService.java:544)\r\n        at com.asite.common.utility.asr.service.AsrService.processAndGetASRFile(AsrService.java:420)\r\n        at com.asite.common.utility.asr.service.AsrService.processAndGetASRFile(AsrService.java:404)\r\n        at com.asite.download.service.DownloadServiceUtil.downloadSingleASRDocument(DownloadServiceUtil.java:243)\r\n        at com.asite.download.service.DownloadService.downloadSingleDoc(DownloadService.java:484)\r\n        at com.asite.download.service.DownloadService$$FastClassBySpringCGLIB$$fc82cf61.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:669)\r\n        at com.asite.download.service.DownloadService$$EnhancerBySpringCGLIB$$e16461c2.downloadSingleDoc(&lt;generated&gt;)\r\n        at com.asite.download.rest.DownloadResources.downloadSingleDoc(DownloadResources.java:61)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.boot.web.filter.ApplicationContextHeaderFilter.doFilterInternal(ApplicationContextHeaderFilter.java:55)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:110)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at com.asite.adoddle.security.filter.SecurityFilter.processRequest(SecurityFilter.java:146)\r\n        at com.asite.adoddle.security.filter.SecurityFilter.processFilter(SecurityFilter.java:83)\r\n        at com.asite.adoddle.security.filter.BaseFilter.doFilter(BaseFilter.java:83)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:108)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n        at java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: &quot;&quot;\r\n        at java.lang.NumberFormatException.forInputString(Unknown Source)\r\n        at java.lang.Long.parseLong(Unknown Source)\r\n        at java.lang.Long.parseLong(Unknown Source)\r\n```","title":"After saving pdf file using pdfbox 3.0 alpha library, the pdf file becomes corrupted","body":"<p>Use case is to first remove and then add qr code image in pdf file and save it on the file system. So, first after removing the qr code image and saving the removed qr code image file on the file system, the size of the pdf got compressed which is a correct behavior. For eg, original file size was 6.8 mb and after removing using pdfbox 3.0, it got reduced to 6.7mb. Earlier, was using pdfbox 2.0.24 and 2.0.27, in both of them, after removing the qr code image, the size increases to 8.1 mb.</p>\n<p>Now, loading the removed qr code image file from file system and adding the qr code image and saving it back again on file system. Here, after opening the modified file on the file system, all the content of the pdf file got corrupted and only the added qr code image was inserted.</p>\n<p>The issue is occurring at the time of saving the file. Is the issue in pdfbox 3.0 library. Because earlier using 2.x, didn't got this issue but there the size of the removed qr code image increases.</p>\n<p>Attaching the code for adding the qr code image and the error logs below.</p>\n<pre><code>   ```\n   Files.copy(sourceFile.toPath(),destinationFile.toPath(),StandardCopyOption.REPLACE_EXISTING);\n    pdDocument=Loader.loadPDF(destinationFile,MemoryUsageSetting.setupTempFileOnly());\n        if (pdDocument.isEncrypted()) {\n            pdDocument.setAllSecurityToBeRemoved(true);\n        }\n        int total = pdDocument.getNumberOfPages();\n        PDPage page = pdDocument.getDocumentCatalog().getPages().get(0);\n        PDRectangle rectangle = getRotatedMediaBox(page);\n\n        getQRCodeImageSize(aBarcodeVO.getQrCodePixel(), Math.abs(getInchToMM(rectangle.getWidth()) * getInchToMM(rectangle.getHeight())));\n\n        long startTimePages = System.currentTimeMillis();\n        for (int i = 0; i &lt; total; i++) {\n            PDPage pdPage = pdDocument.getPage(i);\n            if (i == 0 || aBarcodeVO.getDisplacementVO().isApplyForAllPages()) {\n\n                PDRectangle pageRect = getRotatedMediaBox(pdPage);\n                log.debug(&quot;pageRect width:&quot; + pageRect.getWidth());\n                log.debug(&quot;pageRect height:&quot; + pageRect.getHeight());\n\n                int rotation = pdPage.getRotation();\n                log.debug(&quot;Page Rotation :::: &quot; + rotation);\n\n                PDRectangle cropBoxRect = pdPage.getCropBox();\n                log.debug(&quot;cropBoxRect width:&quot; + cropBoxRect.getWidth());\n                log.debug(&quot;cropBoxRect height:&quot; + cropBoxRect.getHeight());\n\n                // Calculate margin between crop box rectangle and page rectangle.\n                float[] margins = getCropBoxMargin(pageRect, cropBoxRect, rotation);\n\n                if (rotation == 90 || rotation == 270) {\n                    cropBoxRect = new PDRectangle(cropBoxRect.getLowerLeftY(), cropBoxRect.getLowerLeftX(),\n                            cropBoxRect.getHeight(), cropBoxRect.getWidth());\n                }\n\n                float width = cropBoxRect.getWidth();\n                float height = cropBoxRect.getHeight();\n\n                log.debug(&quot;Page Width :: &quot; + width);\n                log.debug(&quot;Page Height :: &quot; + height);\n\n                ABarcodeDisplacementVO displacementVO = aBarcodeVO.getDisplacementVO();\n                displacementVO.setPageWidth(width);\n                displacementVO.setPageHeight(height);\n\n                // Calculate llx and lly for QR Code image.\n                float rectLlx = getOffsetX(displacementVO, qrImageSize) + margins[0];\n                float rectLly = getOffsetY(displacementVO, qrImageSize) + margins[1];\n                log.debug(&quot;Image LLX :::: &quot; + rectLlx);\n                log.debug(&quot;Image LLY :::: &quot; + rectLly);\n\n                BufferedImage bufferedImage = getImage();\n                PDPageContentStream pageContentStream = new PDPageContentStream(pdDocument, pdPage,\n                        PDPageContentStream.AppendMode.APPEND, true, true);\n                PDImageXObject image = JPEGFactory.createFromImage(pdDocument, bufferedImage);\n\n                String imgUniqueId = aBarcodeVO.getImgUniqueId().concat(String.valueOf(i));\n                XMPMetadata xmp = XMPMetadata.createXMPMetadata();\n                DublinCoreSchema dc = xmp.createAndAddDublinCoreSchema();\n                dc.setTitle(imgUniqueId);\n                XmpSerializer serializer = new XmpSerializer();\n                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n                serializer.serialize(xmp, baos, true);\n                PDMetadata metadata = new PDMetadata(pdDocument);\n                metadata.importXMPMetadata(baos.toByteArray());\n                image.setMetadata(metadata);\n\n                pageContentStream.saveGraphicsState();\n\n                if (rotation == 90) {\n                    pageContentStream.transform(Matrix.getRotateInstance(Math.toRadians(rotation),\n                            pdPage.getCropBox().getWidth() + pdPage.getCropBox().getLowerLeftX(), 0));\n                } else if (rotation == 270) {\n                    pageContentStream.transform(Matrix.getRotateInstance(Math.toRadians(rotation), 0,\n                            pdPage.getCropBox().getHeight() + pdPage.getCropBox().getLowerLeftY()));\n                } else if (rotation == 180) {\n                    pageContentStream.transform(Matrix.getRotateInstance(Math.toRadians(rotation),\n                            pdPage.getCropBox().getUpperRightX(), pdPage.getCropBox().getUpperRightY()));\n                }\n\n                pageContentStream.drawImage(image, rectLlx, rectLly, qrImageSize, qrImageSize);\n                pageContentStream.restoreGraphicsState();\n                pageContentStream.close();\n            }\n        }\n        log.debug(String.format(&quot;Add bar code End for startTimePages Total Time Taken:[%d]--&gt;Exit&quot;, System.currentTimeMillis()-startTimePages));\n\n        long startTimeSave = System.currentTimeMillis();\n        pdDocument.save(destinationFile, CompressParameters.NO_COMPRESSION);\n        pdDocument.close();\n</code></pre>\n<pre><code>\n   public static PDRectangle getRotatedMediaBox(PDPage page) {\n               PDRectangle mediaBox = page.getMediaBox();\n               int rotationAngle = page.getRotation();\n               if (rotationAngle == 90 || rotationAngle == 270) {\n                   return new PDRectangle(mediaBox.getLowerLeftY(), mediaBox.getLowerLeftX(), mediaBox.getHeight(),\n                           mediaBox.getWidth());\n               } else {\n                   return mediaBox;\n               }\n           }\n\n</code></pre>\n<pre><code>/**\n         * This method returns offset X value based on given displacement. \n         * @param displacementVO\n         * @param imgWidth\n         * @return offset X position for image.\n         */\n        protected float getOffsetX(ABarcodeDisplacementVO displacementVO, float imgWidth) {\n            float offsetX = 0;\n            switch (Positions.valueOf(displacementVO.getPosition())) {\n            case TL:\n            case BL:\n                offsetX = displacementVO.getLeftPt();\n                break;\n            case TC:\n            case BC:\n                offsetX = (displacementVO.getPageWidth() / 2) - (imgWidth / 2);\n                break;\n            case TR:\n            case BR:\n                offsetX = displacementVO.getPageWidth() - (imgWidth + displacementVO.getRightPt());\n                break;\n            default:\n                break;\n            }\n            System.out.println(&quot;IMG offsetX :: &quot;+offsetX);\n            return offsetX;\n        }\n</code></pre>\n<pre><code>            \n            \n            /**\n             * This method returns offset Y value based on given displacement.\n             * @param displacementVO\n             * @param imgHeight\n             * @return offset Y position for image.\n             */\n            protected float getOffsetY(ABarcodeDisplacementVO displacementVO, float imgHeight) {\n                float offsetY = 0;\n                switch (Positions.valueOf(displacementVO.getPosition())) {\n                case TL:\n                case TC:\n                case TR:\n                    offsetY = displacementVO.getPageHeight() - (imgHeight + displacementVO.getTopPt());\n                    break;\n                case BL:\n                case BC:\n                case BR:\n                    offsetY = displacementVO.getBottomPt();\n                    break;\n                default:\n                    break;\n                }\n                System.out.println(&quot;IMG offsetY :: &quot;+offsetY);\n                return offsetY;\n            }\n    \n</code></pre>\n<p>Error logs::</p>\n<pre><code>08-02-2023 19:39:04.174 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - handleAddBarCode(ABarcodeVO aBarcodeVO) Enter\n08-02-2023 19:39:33.671 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeCopy Total Time Taken:[29496]--&gt;Exit\n08-02-2023 19:40:07.974 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeLoad Total Time Taken:[34302]--&gt;Exit\n08-02-2023 19:40:07.974 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeGetPages Total Time Taken:[0]--&gt;Exit\n08-02-2023 19:40:08.227 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.calculateQRCodeImageSize - Enter to Calculate QR code Image Size :: docSize=62376.89 ,higherSize=124740 ,lowerSize=62370, higherPxSize=85,lowerPxSize=60\n08-02-2023 19:40:08.228 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.calculateQRCodeImageSize - Based on File Size Calculated QR Code Size :: 60.00276\n08-02-2023 19:40:08.228 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimeQRCodeImageSize Total Time Taken:[254]--&gt;Exit\n08-02-2023 19:40:08.228 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - pageRect width:595.32\n08-02-2023 19:40:08.230 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - pageRect height:841.92\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Page Rotation :::: 0\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - cropBoxRect width:595.32\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - cropBoxRect height:841.92\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Page Width :: 595.32\n08-02-2023 19:40:08.231 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Page Height :: 841.92\nIMG offsetX :: 0.0\nIMG offsetY :: 781.91724\n08-02-2023 19:40:08.234 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Image LLX :::: 0.0\n08-02-2023 19:40:08.235 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Image LLY :::: 781.91724\n08-02-2023 19:40:10.853 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[39mDEBUG←[0;39m c.a.common.barcode.impl.AQRCodeImpl.handleAddBarCode - Add bar code End for startTimePages Total Time Taken:[2625]--&gt;Exit\n08-02-2023 19:40:10.854 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m org.apache.pdfbox.pdmodel.PDDocument.save - You are overwriting the existing file 24411393_with_barcode_img.pdf, this will produce a corrupted file if you're also reading from it\n08-02-2023 19:41:02.451 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m o.apache.pdfbox.pdfparser.BaseParser.parseDirObject - Skipped unexpected dir object = '╓■1ⁿl╘bM#L▓°MßwR╥_jΓ-G─3zyV¿╧mo■⌠»' at offset 1134626 (start offset: 1134592)\n08-02-2023 19:41:02.452 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m o.apache.pdfbox.pdfparser.BaseParser.parseCOSDictionaryNameValuePair - Bad dictionary declaration at offset 1134626\n08-02-2023 19:41:02.454 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[31mWARN ←[0;39m o.apache.pdfbox.pdfparser.COSParser.parseFileObject - Object (807:0) at offset 1130425 does not end with 'endobj' but with ''\n08-02-2023 19:42:15.878 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.a.p.io.RandomAccessInputStream.read - read() returns -1, assumed position: 0, actual position: 0\n08-02-2023 19:42:15.879 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.a.p.io.RandomAccessInputStream.read - read() returns -1, assumed position: 0, actual position: 0\n08-02-2023 19:42:15.879 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.a.p.io.RandomAccessInputStream.read - read() returns -1, assumed position: 0, actual position: -1\n08-02-2023 19:42:15.882 ←[35m[http-nio-192.168.1.3-9990-exec-4]←[0;39m ←[1;31mERROR←[0;39m o.apache.pdfbox.pdfparser.COSParser.parseObjectStreamObject - object stream 2145 could not be parsed due to an exception\njava.io.IOException: Error: Expected a long type at offset 0, instead got ''\n        at org.apache.pdfbox.pdfparser.BaseParser.readLong(BaseParser.java:1292)\n        at org.apache.pdfbox.pdfparser.BaseParser.readObjectNumber(BaseParser.java:1217)\n        at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.privateReadObjectOffsets(PDFObjectStreamParser.java:188)\n        at org.apache.pdfbox.pdfparser.PDFObjectStreamParser.parseAllObjects(PDFObjectStreamParser.java:124)\n        at org.apache.pdfbox.pdfparser.COSParser.parseObjectStreamObject(COSParser.java:773)\n        at org.apache.pdfbox.pdfparser.COSParser.parseObjectDynamically(COSParser.java:621)\n        at org.apache.pdfbox.pdfparser.COSParser.dereferenceCOSObject(COSParser.java:573)\n        at org.apache.pdfbox.cos.COSObject.getObject(COSObject.java:121)\n        at org.apache.pdfbox.pdfwriter.COSWriter.addObjectToWrite(COSWriter.java:553)\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:1201)\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:1191)\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDictionary(COSWriter.java:1191)\n        at org.apache.pdfbox.cos.COSDictionary.accept(COSDictionary.java:1258)\n        at org.apache.pdfbox.cos.COSObject.accept(COSObject.java:188)\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObject(COSWriter.java:610)\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObject(COSWriter.java:643)\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteObjects(COSWriter.java:540)\n        at org.apache.pdfbox.pdfwriter.COSWriter.doWriteBody(COSWriter.java:450)\n        at org.apache.pdfbox.pdfwriter.COSWriter.visitFromDocument(COSWriter.java:1264)\n        at org.apache.pdfbox.cos.COSDocument.accept(COSDocument.java:402)\n        at org.apache.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1542)\n        at org.apache.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1418)\n        at org.apache.pdfbox.pdmodel.PDDocument.save(PDDocument.java:1018)\n        at org.apache.pdfbox.pdmodel.PDDocument.save(PDDocument.java:963)\n        at com.asite.common.barcode.impl.AQRCodeImpl.handleAddBarCode(AQRCodeImpl.java:256)\n        at com.asite.common.barcode.ABaseBarcode.addBarCode(ABaseBarcode.java:71)\n        at com.asite.common.utility.asr.util.AsrUtil.addQRCodeForLinkFile(AsrUtil.java:236)\n        at com.asite.common.utility.asr.service.AsrDelegate.applyQRCodeToLinkFiles(AsrDelegate.java:275)\n        at com.asite.common.utility.asr.service.AsrService.processAndGetASRFile(AsrService.java:544)\n        at com.asite.common.utility.asr.service.AsrService.processAndGetASRFile(AsrService.java:420)\n        at com.asite.common.utility.asr.service.AsrService.processAndGetASRFile(AsrService.java:404)\n        at com.asite.download.service.DownloadServiceUtil.downloadSingleASRDocument(DownloadServiceUtil.java:243)\n        at com.asite.download.service.DownloadService.downloadSingleDoc(DownloadService.java:484)\n        at com.asite.download.service.DownloadService$$FastClassBySpringCGLIB$$fc82cf61.invoke(&lt;generated&gt;)\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:669)\n        at com.asite.download.service.DownloadService$$EnhancerBySpringCGLIB$$e16461c2.downloadSingleDoc(&lt;generated&gt;)\n        at com.asite.download.rest.DownloadResources.downloadSingleDoc(DownloadResources.java:61)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.boot.web.filter.ApplicationContextHeaderFilter.doFilterInternal(ApplicationContextHeaderFilter.java:55)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:110)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at com.asite.adoddle.security.filter.SecurityFilter.processRequest(SecurityFilter.java:146)\n        at com.asite.adoddle.security.filter.SecurityFilter.processFilter(SecurityFilter.java:83)\n        at com.asite.adoddle.security.filter.BaseFilter.doFilter(BaseFilter.java:83)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:108)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NumberFormatException: For input string: &quot;&quot;\n        at java.lang.NumberFormatException.forInputString(Unknown Source)\n        at java.lang.Long.parseLong(Unknown Source)\n        at java.lang.Long.parseLong(Unknown Source)\n</code></pre>\n"},{"tags":["java","spring-boot","api","intellij-idea","json-server"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1686314259,"post_id":76439964,"comment_id":134785540,"body_markdown":"Some suggestions: please check if there is any other service running on the same port (3001), and that single service is definitely running; make sure the port you need is 3001, not 3000; try to access another local server","body":"Some suggestions: please check if there is any other service running on the same port (3001), and that single service is definitely running; make sure the port you need is 3001, not 3000; try to access another local server"},{"owner":{"account_id":22220423,"reputation":3,"user_id":20225484,"display_name":"hazem_bensaid"},"score":0,"creation_date":1686318040,"post_id":76439964,"comment_id":134786417,"body_markdown":"the endpoint is working fine as I said, I can access it using my browser or postman. But not using Intellij","body":"the endpoint is working fine as I said, I can access it using my browser or postman. But not using Intellij"}],"owner":{"account_id":22220423,"reputation":3,"user_id":20225484,"display_name":"hazem_bensaid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686332993,"creation_date":1686311632,"question_id":76439964,"body_markdown":"I&#39;m working on a spring boot project, the whole project is running on my machine. everything was working fine previously, but now it doesn&#39;t. I&#39;m running a fake json on npm json-server on &quot;http://localhost:3001/clients&quot; , **I can get using my browser or postman** but using Intellij it won&#39;t work. I did everything: checked intellij proxy, added some lines in the JVM file, restarted the IDEA, disabled my firewall and used webClient instead etc... And nothing worked. I&#39;ve been stuck here for one week.\r\n\r\n```java\r\npublic Map &lt; String, String &gt; getClientInfos(String siren) {\r\n\r\n    Map &lt; String, String &gt; fields = new HashMap &lt; &gt; ();\r\n\r\n    String url = &quot;http://localhost:3001/clients&quot;;\r\n    Client[] dataArray = restTemplate.getForObject(url, Client[].class);\r\n    List &lt; Client &gt; clientsList = Arrays.asList(dataArray);\r\n    Client client = new Client();\r\n    for (Client C: clientsList) {\r\n        if (C.getSiren().equals(siren)) {\r\n            client = C;\r\n            break;\r\n        }\r\n    }\r\n    fields.put(&quot;billAccountName&quot;, client.getAccountName());\r\n    fields.put(&quot;billingAdress&quot;, client.getBillingAdress());\r\n    fields.put(&quot;billingLocation&quot;, client.getBillingLocation());\r\n    fields.put(&quot;billCountry&quot;, client.getBillingCountry());\r\n    fields.put(&quot;shippingAddress&quot;, client.getShippingAdress());\r\n    fields.put(&quot;shippingLocation&quot;, client.getShippingLocation());\r\n    fields.put(&quot;shipCountry&quot;, client.getShippingCountry());\r\n    fields.put(&quot;shipAccountName&quot;, client.getShipAccountName());\r\n    return fields;\r\n\r\n}\r\n```\r\nError\r\n```\r\njava.net.ConnectException: Connection refused: connect\r\n\tat java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]\r\n\tat java.base/sun.nio.ch.Net.connect(Net.java:579) ~[na:na]\r\n\tat java.base/sun.nio.ch.Net.connect(Net.java:568) ~[na:na]\r\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:576) ~[na:na]\r\n\tat java.base/java.net.Socket.connect(Socket.java:666) ~[na:na]\r\n\tat java.base/java.net.Socket.connect(Socket.java:600) ~[na:na]\r\n\tat java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]\r\n\tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]\r\n\tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]\r\n\tat java.base/sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:279) ~[na:na]\r\n\tat java.base/sun.net.www.http.HttpClient.New(HttpClient.java:384) ~[na:na]\r\n\tat java.base/sun.net.www.http.HttpClient.New(HttpClient.java:406) ~[na:na]\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1308) ~[na:na]\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1241) ~[na:na]\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1127) ~[na:na]\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1056) ~[na:na]\r\n\tat org.springframework.http.client.SimpleBufferingClientHttpRequest.executeInternal(SimpleBufferingClientHttpRequest.java:76) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:334) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat com.epac.shippingstation.servicesImpl.OrdreServiceImpl.getClientInfos(OrdreServiceImpl.java:70) ~[classes/:na]\r\n\tat com.epac.shippingstation.servicesImpl.OrdreServiceImpl.findByOrdre(OrdreServiceImpl.java:46) ~[classes/:na]\r\n\tat com.epac.shippingstation.controllers.OrdreController.save(OrdreController.java:32) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:652) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.4.jar:5.3.4]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n```","title":"ConnectException using restTemplate","body":"<p>I'm working on a spring boot project, the whole project is running on my machine. everything was working fine previously, but now it doesn't. I'm running a fake json on npm json-server on &quot;http://localhost:3001/clients&quot; , <strong>I can get using my browser or postman</strong> but using Intellij it won't work. I did everything: checked intellij proxy, added some lines in the JVM file, restarted the IDEA, disabled my firewall and used webClient instead etc... And nothing worked. I've been stuck here for one week.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Map &lt; String, String &gt; getClientInfos(String siren) {\n\n    Map &lt; String, String &gt; fields = new HashMap &lt; &gt; ();\n\n    String url = &quot;http://localhost:3001/clients&quot;;\n    Client[] dataArray = restTemplate.getForObject(url, Client[].class);\n    List &lt; Client &gt; clientsList = Arrays.asList(dataArray);\n    Client client = new Client();\n    for (Client C: clientsList) {\n        if (C.getSiren().equals(siren)) {\n            client = C;\n            break;\n        }\n    }\n    fields.put(&quot;billAccountName&quot;, client.getAccountName());\n    fields.put(&quot;billingAdress&quot;, client.getBillingAdress());\n    fields.put(&quot;billingLocation&quot;, client.getBillingLocation());\n    fields.put(&quot;billCountry&quot;, client.getBillingCountry());\n    fields.put(&quot;shippingAddress&quot;, client.getShippingAdress());\n    fields.put(&quot;shippingLocation&quot;, client.getShippingLocation());\n    fields.put(&quot;shipCountry&quot;, client.getShippingCountry());\n    fields.put(&quot;shipAccountName&quot;, client.getShipAccountName());\n    return fields;\n\n}\n</code></pre>\n<p>Error</p>\n<pre><code>java.net.ConnectException: Connection refused: connect\n    at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]\n    at java.base/sun.nio.ch.Net.connect(Net.java:579) ~[na:na]\n    at java.base/sun.nio.ch.Net.connect(Net.java:568) ~[na:na]\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:576) ~[na:na]\n    at java.base/java.net.Socket.connect(Socket.java:666) ~[na:na]\n    at java.base/java.net.Socket.connect(Socket.java:600) ~[na:na]\n    at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]\n    at java.base/sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:279) ~[na:na]\n    at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:384) ~[na:na]\n    at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:406) ~[na:na]\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1308) ~[na:na]\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1241) ~[na:na]\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1127) ~[na:na]\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1056) ~[na:na]\n    at org.springframework.http.client.SimpleBufferingClientHttpRequest.executeInternal(SimpleBufferingClientHttpRequest.java:76) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:334) ~[spring-web-5.3.4.jar:5.3.4]\n    at com.epac.shippingstation.servicesImpl.OrdreServiceImpl.getClientInfos(OrdreServiceImpl.java:70) ~[classes/:na]\n    at com.epac.shippingstation.servicesImpl.OrdreServiceImpl.findByOrdre(OrdreServiceImpl.java:46) ~[classes/:na]\n    at com.epac.shippingstation.controllers.OrdreController.save(OrdreController.java:32) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:652) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.4.jar:5.3.4]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.43.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.4.jar:5.3.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.43.jar:9.0.43]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n"},{"tags":["java","spring","spring-data-mongodb","mapstruct","single-responsibility-principle"],"answers":[{"tags":[],"owner":{"account_id":2500104,"reputation":21,"user_id":2175467,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686075469,"creation_date":1686071451,"answer_id":76416953,"question_id":76416901,"body_markdown":"I was initially confused by your naming convention.... we usually keep the entity object to be the same as the table, and put the DTO in the name of the data transfer object, for example\r\n\r\n    Client     &lt;-- entity \r\n    ClientDTO  &lt;-- DTO\r\n\r\nRegardless of what you do for naming convention, there&#39;s going to still be double mapping going on.... at least if you manually do it like you are doing, and maybe use a different naming convention, it&#39;s easier to debug. \r\n\r\nbtw, we use the @InheritInverseConfiguration tag in mapstruct, you might define like this to enhance readability?  \r\n\r\n    @Mapper\r\n    public interface ClientMapper {\r\n        Client toEntity(ClientDTO clientCreationCommand);\r\n    \r\n        @InheritInverseConfiguration\r\n        ClientDTO toDTO(Client client);\r\n    }\r\n\r\nthough it&#39;s not exactly what you want, might be easier to read if you convert it before calling your service?\r\n\r\n    ClientDTO result = myService.createClient(clientMapper.ToEntity(client));\r\n\r\n    public ClientDTO createClient(Client client) {\r\n        return clientMapper.toDTO(\r\n            clientRepository.save(client)\r\n        );\r\n    }\r\n\r\nor how you are doing it...\r\n\r\n    public ClientDTO createClient(ClientDTO client) {\r\n        return clientMapper.toDTO(\r\n            clientRepository.save(clientMapper.toEntity(client))\r\n        );\r\n    }\r\n\r\na little easier to work with when using different naming conventions\r\n\r\nas far as having your repository itself perform the mapping... I wouldn&#39;t recommend that.   It&#39;s best to let the repository do only data stuff (no logic), the controller to do only the restful stuff (no logic), and your service layer to handle all the conversions and business logic.","title":"Automatic MapStruct conversion within @Repository","body":"<p>I was initially confused by your naming convention.... we usually keep the entity object to be the same as the table, and put the DTO in the name of the data transfer object, for example</p>\n<pre><code>Client     &lt;-- entity \nClientDTO  &lt;-- DTO\n</code></pre>\n<p>Regardless of what you do for naming convention, there's going to still be double mapping going on.... at least if you manually do it like you are doing, and maybe use a different naming convention, it's easier to debug.</p>\n<p>btw, we use the @InheritInverseConfiguration tag in mapstruct, you might define like this to enhance readability?</p>\n<pre><code>@Mapper\npublic interface ClientMapper {\n    Client toEntity(ClientDTO clientCreationCommand);\n\n    @InheritInverseConfiguration\n    ClientDTO toDTO(Client client);\n}\n</code></pre>\n<p>though it's not exactly what you want, might be easier to read if you convert it before calling your service?</p>\n<pre><code>ClientDTO result = myService.createClient(clientMapper.ToEntity(client));\n\npublic ClientDTO createClient(Client client) {\n    return clientMapper.toDTO(\n        clientRepository.save(client)\n    );\n}\n</code></pre>\n<p>or how you are doing it...</p>\n<pre><code>public ClientDTO createClient(ClientDTO client) {\n    return clientMapper.toDTO(\n        clientRepository.save(clientMapper.toEntity(client))\n    );\n}\n</code></pre>\n<p>a little easier to work with when using different naming conventions</p>\n<p>as far as having your repository itself perform the mapping... I wouldn't recommend that.   It's best to let the repository do only data stuff (no logic), the controller to do only the restful stuff (no logic), and your service layer to handle all the conversions and business logic.</p>\n"}],"owner":{"account_id":28766580,"reputation":1,"user_id":22031356,"display_name":"Sn1perdog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686332806,"creation_date":1686070931,"question_id":76416901,"body_markdown":"To ensure the SRP (Single Responsibility Principle) is followed within a ports and adapters architecture, I have made a split between DTO, domain and DB entities.\r\nI would like my Spring @Repository to automatically perform my conversion from Domain object to DB Entity and vice versa.\r\nI would like to simplify my current Service call which performs double mapping like this:\r\n```\r\npublic Client createClient(Client client) {\r\n    return clientMapper.mapToClient(\r\n        clientRepository.save(\r\n            clientMapper.mapToClientDocument(client)));\r\n}\r\n```  \r\nInto  \r\n`return clientMapper.map(clientRepository.save(client));`\r\n\r\nOr is there an alternative solution you might see?\r\n\r\nAs an example, here are my objects:\r\n```\r\n@Data\r\npublic class ClientCreationCommand {\r\n    private String id;\r\n    private String clientName;\r\n}\r\n\r\npublic class Client {\r\n    private String id;\r\n    private String clientName;\r\n}\r\n\r\n@Document(collection = &quot;clients&quot;)\r\npublic class ClientDocument {\r\n    @Id\r\n    private String id;\r\n    private String clientName;\r\n}\r\n```\r\n\r\nhere is a MapStruct mapper:\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ClientMapper {\r\n    Client mapToClient(ClientDocument clientCreationCommand);\r\n    ClientDocument mapToClientDocument(Client client);\r\n}\r\n```\r\nAnd a repository:\r\n```\r\n@Repository\r\npublic interface ClientRepository extends MongoRepository&lt;ClientDocument, String&gt; {\r\n    @NotNull &lt;S extends ClientDocument&gt; S save(@NotNull S client);\r\n}\r\n```","title":"Automatic MapStruct conversion within @Repository","body":"<p>To ensure the SRP (Single Responsibility Principle) is followed within a ports and adapters architecture, I have made a split between DTO, domain and DB entities.\nI would like my Spring @Repository to automatically perform my conversion from Domain object to DB Entity and vice versa.\nI would like to simplify my current Service call which performs double mapping like this:</p>\n<pre><code>public Client createClient(Client client) {\n    return clientMapper.mapToClient(\n        clientRepository.save(\n            clientMapper.mapToClientDocument(client)));\n}\n</code></pre>\n<p>Into<br />\n<code>return clientMapper.map(clientRepository.save(client));</code></p>\n<p>Or is there an alternative solution you might see?</p>\n<p>As an example, here are my objects:</p>\n<pre><code>@Data\npublic class ClientCreationCommand {\n    private String id;\n    private String clientName;\n}\n\npublic class Client {\n    private String id;\n    private String clientName;\n}\n\n@Document(collection = &quot;clients&quot;)\npublic class ClientDocument {\n    @Id\n    private String id;\n    private String clientName;\n}\n</code></pre>\n<p>here is a MapStruct mapper:</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface ClientMapper {\n    Client mapToClient(ClientDocument clientCreationCommand);\n    ClientDocument mapToClientDocument(Client client);\n}\n</code></pre>\n<p>And a repository:</p>\n<pre><code>@Repository\npublic interface ClientRepository extends MongoRepository&lt;ClientDocument, String&gt; {\n    @NotNull &lt;S extends ClientDocument&gt; S save(@NotNull S client);\n}\n</code></pre>\n"},{"tags":["java","postgresql","orm","jpa","eclipselink"],"comments":[{"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1284821458,"post_id":3739808,"comment_id":3954852,"body_markdown":"Please show your entity, the corresponding table, maybe your code if relevant, and the generated SQL. See [this previous question](http://stackoverflow.com/questions/2374395/is-it-possible-to-output-generated-sql-using-eclipselink-without-having-to-increa) to output the generated SQL.","body":"Please show your entity, the corresponding table, maybe your code if relevant, and the generated SQL. See <a href=\"http://stackoverflow.com/questions/2374395/is-it-possible-to-output-generated-sql-using-eclipselink-without-having-to-increa\">this previous question</a> to output the generated SQL."},{"owner":{"account_id":117431,"reputation":5211,"user_id":307525,"accept_rate":44,"display_name":"Hubbitus"},"score":0,"creation_date":1493823606,"post_id":3739808,"comment_id":74568567,"body_markdown":"To do not hack you ORM and external software postgres allow you register your own casts and compare operations. [Please look example in similar question](http://stackoverflow.com/questions/20773805/postgresql-enum-and-character-varying-updating/43748427#43748427).\nP.S. It was the answer, but deleted by some reason…","body":"To do not hack you ORM and external software postgres allow you register your own casts and compare operations. <a href=\"http://stackoverflow.com/questions/20773805/postgresql-enum-and-character-varying-updating/43748427#43748427\">Please look example in similar question</a>. P.S. It was the answer, but deleted by some reason…"}],"answers":[{"tags":[],"owner":{"account_id":101001,"reputation":119798,"user_id":271959,"display_name":"Frank Heikens"},"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1284802356,"creation_date":1284802356,"answer_id":3741107,"question_id":3739808,"body_markdown":"This the main error:\r\n\r\n&gt; ERROR: operator does not exist:\r\n&gt; integer = character varying\r\n\r\nYou code is trying to match an integer and a string, that&#39;s not going to work. Fix your code, get the query that is involved to see if you fixed it. See also the PostgreSQL log files.\r\n\r\nA workaround (NOT A SOLUTION!) is to do some casting. [Check this article][1].\r\n\r\n\r\n  [1]: http://petereisentraut.blogspot.com/2008/03/readding-implicit-casts-in-postgresql.html","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>This the main error:</p>\n\n<blockquote>\n  <p>ERROR: operator does not exist:\n  integer = character varying</p>\n</blockquote>\n\n<p>You code is trying to match an integer and a string, that's not going to work. Fix your code, get the query that is involved to see if you fixed it. See also the PostgreSQL log files.</p>\n\n<p>A workaround (NOT A SOLUTION!) is to do some casting. <a href=\"http://petereisentraut.blogspot.com/2008/03/readding-implicit-casts-in-postgresql.html\" rel=\"noreferrer\">Check this article</a>.</p>\n"},{"tags":[],"owner":{"account_id":431486,"reputation":3641,"user_id":815566,"accept_rate":81,"display_name":"Satheesh Cheveri"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1359392564,"creation_date":1359392564,"answer_id":14567218,"question_id":3739808,"body_markdown":"I had this issue, and solved. This was due to the WHERE clause contains String value instead of integer value.\r\n","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>I had this issue, and solved. This was due to the WHERE clause contains String value instead of integer value.</p>\n"},{"tags":[],"owner":{"account_id":1322512,"reputation":18457,"user_id":1268003,"accept_rate":82,"display_name":"Martin Andersson"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1372338191,"creation_date":1372333098,"answer_id":17342136,"question_id":3739808,"body_markdown":"Bro, I had the same problem. Thing is I built a query builder, quite an complex one that build his predicates dynamically pending on what parameters had been set and cached the queries. Anyways, before I built my query builder, I had a non object oriented procedural code build the same thing (except of course he didn&#39;t cache queries and use parameters) that worked flawless. Now when my builder tried to do the very same thing, my PostgreSQL threw this fucked up error that you received too. I examined my generated SQL code and found no errors. Strange indeed.\r\n\r\nMy search soon proved that it was one particular predicate in the WHERE clause that caused this error. Yet this predicate was built by code that looked like, well almost, *exactly* as how the procedural code looked like before this exception started to appear out of nowhere.\r\n\r\nBut I saw one thing I had done differently in my builder as opposed to what the procedural code did previously. It was the **order** of the predicates he put in the WHERE clause! So I started to move this predicate around and soon discovered that indeed the order of predicates had much to say. If I had this predicate all alone, my query worked (but returned an erroneous result-match of course), if I put him with just one or the other predicate it worked sometimes, didn&#39;t work other times. Moreover, mimicking the previous order of the procedural code didn&#39;t work either. What finally worked was to put this demonic predicate at the start of my WHERE clause, as the first predicate added! So again if I haven&#39;t made myself clear, the order my predicates where added to the WHERE method/clause was creating this exception.","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>Bro, I had the same problem. Thing is I built a query builder, quite an complex one that build his predicates dynamically pending on what parameters had been set and cached the queries. Anyways, before I built my query builder, I had a non object oriented procedural code build the same thing (except of course he didn't cache queries and use parameters) that worked flawless. Now when my builder tried to do the very same thing, my PostgreSQL threw this fucked up error that you received too. I examined my generated SQL code and found no errors. Strange indeed.</p>\n\n<p>My search soon proved that it was one particular predicate in the WHERE clause that caused this error. Yet this predicate was built by code that looked like, well almost, <em>exactly</em> as how the procedural code looked like before this exception started to appear out of nowhere.</p>\n\n<p>But I saw one thing I had done differently in my builder as opposed to what the procedural code did previously. It was the <strong>order</strong> of the predicates he put in the WHERE clause! So I started to move this predicate around and soon discovered that indeed the order of predicates had much to say. If I had this predicate all alone, my query worked (but returned an erroneous result-match of course), if I put him with just one or the other predicate it worked sometimes, didn't work other times. Moreover, mimicking the previous order of the procedural code didn't work either. What finally worked was to put this demonic predicate at the start of my WHERE clause, as the first predicate added! So again if I haven't made myself clear, the order my predicates where added to the WHERE method/clause was creating this exception.</p>\n"},{"tags":[],"owner":{"account_id":2624937,"reputation":2650,"user_id":2272158,"accept_rate":100,"display_name":"TondaCZE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385401455,"creation_date":1385401455,"answer_id":20199732,"question_id":3739808,"body_markdown":"I guess this can be due to many things.\r\nIn my case it was having &quot;WHERE id IN&quot; condition in my query and I was setting IDs separated by dash as a string using setString method on PreparedStatement.\r\n\r\nNot sure if there is better way to do this but I just added placeholder in my statement and replaced it by values on my own.","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>I guess this can be due to many things.\nIn my case it was having \"WHERE id IN\" condition in my query and I was setting IDs separated by dash as a string using setString method on PreparedStatement.</p>\n\n<p>Not sure if there is better way to do this but I just added placeholder in my statement and replaced it by values on my own.</p>\n"},{"tags":[],"owner":{"account_id":1899443,"reputation":469,"user_id":1775502,"accept_rate":43,"display_name":"Jason Oviedo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1398885664,"creation_date":1398885664,"answer_id":23396371,"question_id":3739808,"body_markdown":"If anyone is having this exception and is building the query using Scala multi-line strings:\r\n\r\nLooks like there is a problem with some JPA drivers in this situation. I&#39;m not sure what is the character Scala uses for LINE END, but when you have a parameter right at the end of the line, the LINE END character seems to be attached to the parameter and so when the driver parses the query, this error comes up. A simple work around is to leave an empty space right after the param at the end:\r\n\r\n    SELECT * FROM some_table a\r\n    WHERE a.col = ?param\r\n    AND a.col2 = ?param2\r\n\r\nSo, just make sure to leave an empty space after param (and param2, if you have a line break there).","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>If anyone is having this exception and is building the query using Scala multi-line strings:</p>\n\n<p>Looks like there is a problem with some JPA drivers in this situation. I'm not sure what is the character Scala uses for LINE END, but when you have a parameter right at the end of the line, the LINE END character seems to be attached to the parameter and so when the driver parses the query, this error comes up. A simple work around is to leave an empty space right after the param at the end:</p>\n\n<pre><code>SELECT * FROM some_table a\nWHERE a.col = ?param\nAND a.col2 = ?param2\n</code></pre>\n\n<p>So, just make sure to leave an empty space after param (and param2, if you have a line break there).</p>\n"},{"tags":[],"owner":{"account_id":2351488,"reputation":1427,"user_id":2060180,"accept_rate":100,"display_name":"Ricardo Anjos"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1405668508,"creation_date":1405668508,"answer_id":24819480,"question_id":3739808,"body_markdown":"If you are using Primefaces, you should insert &lt;converter=&quot;javax.faces.Integer&quot;&gt; inside the the .xhtml file so it converts correctly to java integer. For example:\r\n\r\n    &lt;p:selectCheckboxMenu \r\n    \tid=&quot;frameSelect&quot;\r\n    \twidgetVar=&quot;frameSelectBox&quot;\r\n    \tfilter=&quot;true&quot;\r\n    \tfilterMatchMode=&quot;contains&quot;\r\n    \tlabel=&quot;#{messages[&#39;frame&#39;]}&quot;\r\n    \tvalue=&quot;#{platform.frameBean.selectedFramesTypesList}&quot;\r\n    \tconverter=&quot;javax.faces.Integer&quot;&gt;\r\n    \t&lt;f:selectItems\r\n    \t\tvalue=&quot;#{platform.frameBean.framesTypesList}&quot;\r\n    \t\tvar=&quot;area&quot;\r\n    \t\titemLabel=&quot;#{area}&quot;\r\n    \t\titemValue=&quot;#{area}&quot; /&gt;\r\n    &lt;/p:selectCheckboxMenu&gt;","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>If you are using Primefaces, you should insert  inside the the .xhtml file so it converts correctly to java integer. For example:</p>\n\n<pre><code>&lt;p:selectCheckboxMenu \n    id=\"frameSelect\"\n    widgetVar=\"frameSelectBox\"\n    filter=\"true\"\n    filterMatchMode=\"contains\"\n    label=\"#{messages['frame']}\"\n    value=\"#{platform.frameBean.selectedFramesTypesList}\"\n    converter=\"javax.faces.Integer\"&gt;\n    &lt;f:selectItems\n        value=\"#{platform.frameBean.framesTypesList}\"\n        var=\"area\"\n        itemLabel=\"#{area}\"\n        itemValue=\"#{area}\" /&gt;\n&lt;/p:selectCheckboxMenu&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3520186,"reputation":447,"user_id":2942694,"display_name":"A. Smith"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1423920139,"creation_date":1423920139,"answer_id":28516053,"question_id":3739808,"body_markdown":"Doesn&#39;t look like you got an answer but this problem can also creep up if you&#39;re passing null ID&#39;s into your JPA Predicate.\r\n\r\nFor instance.\r\n\r\nIf I did a query on Cats to get back a list. Which returns 3 results.\r\n\r\nList&lt;Cats&gt; catList;\r\n\r\nI then iterate over that List of cats and store a foriegn key of cat perhaps leashTypeId in another list.\r\n\r\n    List&lt;Integer&gt; leashTypeIds= new ArrayList&lt;&gt;();\r\n\r\n    for(Cats c : catList){\r\n        leashTypeIds.add(c.getLeashTypeId);\r\n    }\r\n\r\n    jpaController().findLeashes(leashTypeIds);\r\n\r\nIf any of the Cats in catList have a null leashTypeId it will throw this error when you try to query your DB.\r\n\r\n(Just realized I am posting on a 5 year old thread, perhaps someone will find this useful)","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>Doesn't look like you got an answer but this problem can also creep up if you're passing null ID's into your JPA Predicate.</p>\n\n<p>For instance.</p>\n\n<p>If I did a query on Cats to get back a list. Which returns 3 results.</p>\n\n<p>List catList;</p>\n\n<p>I then iterate over that List of cats and store a foriegn key of cat perhaps leashTypeId in another list.</p>\n\n<pre><code>List&lt;Integer&gt; leashTypeIds= new ArrayList&lt;&gt;();\n\nfor(Cats c : catList){\n    leashTypeIds.add(c.getLeashTypeId);\n}\n\njpaController().findLeashes(leashTypeIds);\n</code></pre>\n\n<p>If any of the Cats in catList have a null leashTypeId it will throw this error when you try to query your DB.</p>\n\n<p>(Just realized I am posting on a 5 year old thread, perhaps someone will find this useful)</p>\n"},{"tags":[],"owner":{"account_id":5749872,"reputation":1997,"user_id":4539906,"display_name":"Asad Shakeel"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1638211291,"creation_date":1567605917,"answer_id":57790202,"question_id":3739808,"body_markdown":"This is due to the mismatch column type to the Java entity data type. In query where you are passing query parameters, typecast parameter to an integer\r\n\r\ne.g. in the case of PostgreSQL, it might be \r\n\r\n    where table_name.column_name_with_integer_type = (:named_parameter_of_character_type)::integer\r\n\r\n`::integer` will convert the parameter value into an integer.","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>This is due to the mismatch column type to the Java entity data type. In query where you are passing query parameters, typecast parameter to an integer</p>\n<p>e.g. in the case of PostgreSQL, it might be</p>\n<pre><code>where table_name.column_name_with_integer_type = (:named_parameter_of_character_type)::integer\n</code></pre>\n<p><code>::integer</code> will convert the parameter value into an integer.</p>\n"},{"tags":[],"owner":{"account_id":3316685,"reputation":6012,"user_id":2788896,"accept_rate":60,"display_name":"WEBjuju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593571989,"creation_date":1582914812,"answer_id":60457442,"question_id":3739808,"body_markdown":"I had this issue in a very simple DELETE statement, and it is now solved. \r\n\r\nMy issue was due to using backticks around the column (this column was named &quot;id&quot;).\r\n\r\nThis query *DID NOT WORK* and resulted in &quot;`No operator matches the given name and argument type(s)`&quot;\r\n\r\n    DELETE FROM mytable WHERE `id` = 3      -- DO NOT USE BACKTICKS\r\n\r\nComing from mysql, in dynamic queries, I always \\`backtick\\` columns. \r\n\r\nThe following query *DID WORK* (with backticks removed):\r\n\r\n    DELETE FROM mytable WHERE id = 3","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>I had this issue in a very simple DELETE statement, and it is now solved.</p>\n<p>My issue was due to using backticks around the column (this column was named &quot;id&quot;).</p>\n<p>This query <em>DID NOT WORK</em> and resulted in &quot;<code>No operator matches the given name and argument type(s)</code>&quot;</p>\n<pre><code>DELETE FROM mytable WHERE `id` = 3      -- DO NOT USE BACKTICKS\n</code></pre>\n<p>Coming from mysql, in dynamic queries, I always `backtick` columns.</p>\n<p>The following query <em>DID WORK</em> (with backticks removed):</p>\n<pre><code>DELETE FROM mytable WHERE id = 3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3201223,"reputation":91,"user_id":2703239,"display_name":"NorbiPeti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588162386,"creation_date":1588162386,"answer_id":61501546,"question_id":3739808,"body_markdown":"In my case, I used a keyword as a column name, which resulted in `ERROR: operator does not exist: name = bigint`\r\n\r\nThe solution was to use double quotes around the column name.\r\n","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>In my case, I used a keyword as a column name, which resulted in <code>ERROR: operator does not exist: name = bigint</code></p>\n\n<p>The solution was to use double quotes around the column name.</p>\n"},{"tags":[],"owner":{"account_id":15305253,"reputation":49,"user_id":11042239,"display_name":"Sourav singh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1588442221,"creation_date":1588442221,"answer_id":61563949,"question_id":3739808,"body_markdown":"This is due to the mismatch of the data type of your java Entity and the database table column.\r\nPlease review if all the column is exact same data type as your entity.\r\nThis mismatch happens when we update our model attribute&#39;s data-type. ","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>This is due to the mismatch of the data type of your java Entity and the database table column.\nPlease review if all the column is exact same data type as your entity.\nThis mismatch happens when we update our model attribute's data-type. </p>\n"},{"tags":[],"owner":{"account_id":10223256,"reputation":57,"user_id":7546788,"display_name":"Sunny Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595050161,"creation_date":1595036667,"answer_id":62963773,"question_id":3739808,"body_markdown":"I had this problem when i was trying to query by passing a Set and i didn&#39;t used In\r\n\r\nexample\r\n\r\n problem : `repository.findBySomeSetOfData(setOfData);`\r\n\r\n solution : `repository.findBySomeSetOfDataIn(setOfData);`","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>I had this problem when i was trying to query by passing a Set and i didn't used In</p>\n<p>example</p>\n<p>problem : <code>repository.findBySomeSetOfData(setOfData);</code></p>\n<p>solution : <code>repository.findBySomeSetOfDataIn(setOfData);</code></p>\n"},{"tags":[],"owner":{"account_id":22926393,"reputation":1,"user_id":17061383,"display_name":"GSPorto"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1657739034,"creation_date":1657380369,"answer_id":72922616,"question_id":3739808,"body_markdown":"Here is what you can do to fix it in PostgreSQL:\r\n\r\n    ALTER TABLE schema_name.&quot;table_name&quot; \r\n     ALTER COLUMN &quot;column_name&quot; TYPE integer USING(same_column_name_again::INTEGER);\r\n\r\n\r\nBy doing this, you will change the column data type, fixing the issue of mismatch between column type to the Java entity data type. ","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>Here is what you can do to fix it in PostgreSQL:</p>\n<pre><code>ALTER TABLE schema_name.&quot;table_name&quot; \n ALTER COLUMN &quot;column_name&quot; TYPE integer USING(same_column_name_again::INTEGER);\n</code></pre>\n<p>By doing this, you will change the column data type, fixing the issue of mismatch between column type to the Java entity data type.</p>\n"},{"tags":[],"owner":{"account_id":10621453,"reputation":1,"user_id":7822443,"display_name":"Avnish Bhardwaj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686332743,"creation_date":1686285369,"answer_id":76437241,"question_id":3739808,"body_markdown":"This is due to null value which you are passing in JPA Query.\r\n\r\nI tried every method but didn&#39;t worked for me. But you can trick JPA in case of postgres by given below code.\r\n\r\nJava Service Code : \r\n\r\n  You can add verification types according to your input like:\r\n  `verificationTypes.add(2);`\r\n  `verificationTypes.add(1);`\r\n\r\n```java\r\nList&lt;Integer&gt; verificationTypes = new ArrayList&lt;&gt;();\r\nInteger status = 1;\r\nif(Objects.nonNull(verificationTypes) &amp;&amp; verificationTypes.size()&gt;0) {\r\n    status = 0;\r\n}\r\nempRepo.findAllEmp(verificationTypes,status);\r\n```\r\n\r\nJPA Repository code : \r\n\r\n```java\r\n@Query(value = &quot;select * from emp where (case when :status = 1 then true else verf_stat in (:verificationTypes) end ) &quot;, nativeQuery = true)\r\nList&lt;Employee&gt; findAllEmp(List&lt;Integer&gt; verificationTypes,Integer status);\r\n```\r\n\r\n\r\n\r\n\r\n  \r\n\r\n    \r\n\t\t\t\r\n\r\n\r\n\r\n ","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>This is due to null value which you are passing in JPA Query.</p>\n<p>I tried every method but didn't worked for me. But you can trick JPA in case of postgres by given below code.</p>\n<p>Java Service Code :</p>\n<p>You can add verification types according to your input like:\n<code>verificationTypes.add(2);</code>\n<code>verificationTypes.add(1);</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; verificationTypes = new ArrayList&lt;&gt;();\nInteger status = 1;\nif(Objects.nonNull(verificationTypes) &amp;&amp; verificationTypes.size()&gt;0) {\n    status = 0;\n}\nempRepo.findAllEmp(verificationTypes,status);\n</code></pre>\n<p>JPA Repository code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;select * from emp where (case when :status = 1 then true else verf_stat in (:verificationTypes) end ) &quot;, nativeQuery = true)\nList&lt;Employee&gt; findAllEmp(List&lt;Integer&gt; verificationTypes,Integer status);\n</code></pre>\n"}],"owner":{"account_id":655046,"reputation":741,"user_id":451135,"accept_rate":0,"display_name":"Sam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":370783,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"answer_count":14,"score":57,"last_activity_date":1686332743,"creation_date":1284767611,"question_id":3739808,"body_markdown":"I am trying to edit a table in Postgresql using JPA in Glassfish using EclipseLink. When I insert an entity, it runs fine. But, when I try to edit or remove the same entity, it fails with the following error. Any idea?\r\n\r\n&lt;pre&gt;\r\nCaused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: operator does not exist: integer = character varying\r\n  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\r\n  Position: 38\r\nError Code: 0\r\n        at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)\r\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1422)\r\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:799)\r\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:867)\r\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:587)\r\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:530)\r\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeCall(AbstractSession.java:914)\r\n        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:205)\r\n        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:191)\r\n        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteObject(DatasourceCallQueryMechanism.java:182)\r\n        at org.eclipse.persistence.internal.queries.StatementQueryMechanism.deleteObject(StatementQueryMechanism.java:101)\r\n        at org.eclipse.persistence.queries.DeleteObjectQuery.executeDatabaseQuery(DeleteObjectQuery.java:167)\r\n        at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:675)\r\n        at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:589)\r\n        at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:109)\r\n        at org.eclipse.persistence.queries.DeleteObjectQuery.executeInUnitOfWorkObjectLevelModifyQuery(DeleteObjectQuery.java:112)\r\n        at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:86)\r\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2857)\r\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1225)\r\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1207)\r\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1167)\r\n        at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:297)\r\n        at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:256)\r\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1406)\r\n        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:547)\r\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1508)\r\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.issueSQLbeforeCompletion(UnitOfWorkImpl.java:3128)\r\n        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.issueSQLbeforeCompletion(RepeatableWriteUnitOfWork.java:268)\r\n        at org.eclipse.persistence.transaction.AbstractSynchronizationListener.beforeCompletion(AbstractSynchronizationListener.java:157)\r\n        at org.eclipse.persistence.transaction.JTASynchronizationListener.beforeCompletion(JTASynchronizationListener.java:68)\r\n        at com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:412)\r\n        ... 25 more\r\nCaused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: integer = character varying\r\n  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\r\n  Position: 38\r\n        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2062)\r\n        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1795)\r\n        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)\r\n        at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:479)\r\n        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:367)\r\n        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:321)\r\n        at com.sun.gjc.spi.base.PreparedStatementWrapper.executeUpdate(PreparedStatementWrapper.java:108)\r\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:792)\r\n        ... 53 more\r\nJava Result: 1\r\n&lt;/pre&gt;","title":"No operator matches the given name and argument type(s). You might need to add explicit type casts. -- Netbeans, Postgresql 8.4 and Glassfish","body":"<p>I am trying to edit a table in Postgresql using JPA in Glassfish using EclipseLink. When I insert an entity, it runs fine. But, when I try to edit or remove the same entity, it fails with the following error. Any idea?</p>\n\n<pre>\nCaused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: org.postgresql.util.PSQLException: ERROR: operator does not exist: integer = character varying\n  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\n  Position: 38\nError Code: 0\n        at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1422)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:799)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:867)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:587)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:530)\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeCall(AbstractSession.java:914)\n        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:205)\n        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:191)\n        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteObject(DatasourceCallQueryMechanism.java:182)\n        at org.eclipse.persistence.internal.queries.StatementQueryMechanism.deleteObject(StatementQueryMechanism.java:101)\n        at org.eclipse.persistence.queries.DeleteObjectQuery.executeDatabaseQuery(DeleteObjectQuery.java:167)\n        at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:675)\n        at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:589)\n        at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:109)\n        at org.eclipse.persistence.queries.DeleteObjectQuery.executeInUnitOfWorkObjectLevelModifyQuery(DeleteObjectQuery.java:112)\n        at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:86)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2857)\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1225)\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1207)\n        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1167)\n        at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:297)\n        at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:256)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1406)\n        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:547)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1508)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.issueSQLbeforeCompletion(UnitOfWorkImpl.java:3128)\n        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.issueSQLbeforeCompletion(RepeatableWriteUnitOfWork.java:268)\n        at org.eclipse.persistence.transaction.AbstractSynchronizationListener.beforeCompletion(AbstractSynchronizationListener.java:157)\n        at org.eclipse.persistence.transaction.JTASynchronizationListener.beforeCompletion(JTASynchronizationListener.java:68)\n        at com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:412)\n        ... 25 more\nCaused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: integer = character varying\n  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\n  Position: 38\n        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2062)\n        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1795)\n        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)\n        at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:479)\n        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:367)\n        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:321)\n        at com.sun.gjc.spi.base.PreparedStatementWrapper.executeUpdate(PreparedStatementWrapper.java:108)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:792)\n        ... 53 more\nJava Result: 1\n</pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1686324525,"post_id":76441606,"comment_id":134787898,"body_markdown":"Why are you using a null layout?","body":"Why are you using a null layout?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1686324690,"post_id":76441606,"comment_id":134787936,"body_markdown":"This doesn&#39;t reflect what is happening. You cannot `add` button1 because it is not a `Component`. You shouldn&#39;t be extending anything.","body":"This doesn&#39;t reflect what is happening. You cannot <code>add</code> button1 because it is not a <code>Component</code>. You shouldn&#39;t be extending anything."}],"answers":[{"tags":[],"owner":{"account_id":28788658,"reputation":1,"user_id":22048552,"display_name":"Vagner Freitas de Sousa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686327004,"creation_date":1686325143,"answer_id":76441760,"question_id":76441606,"body_markdown":"The problem in your code is that your `Button` class doesn&#39;t extends `JButton` like your `Menu` class, to make it work you can make it extend `JButton` or add a `getMethod` to return your `button` attribute.","title":"Struggling to display a button","body":"<p>The problem in your code is that your <code>Button</code> class doesn't extends <code>JButton</code> like your <code>Menu</code> class, to make it work you can make it extend <code>JButton</code> or add a <code>getMethod</code> to return your <code>button</code> attribute.</p>\n"},{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686325202,"creation_date":1686325202,"answer_id":76441766,"question_id":76441606,"body_markdown":"Make a static method.\r\n\r\n    public static JButton button (int x, int y, int width, int height, String buttonName, Color text, Color background) { \r\n        JButton tempButton = new JButton();\r\n        tempButton.setText(buttonName);  \r\n        tempButton.setFont(new Font(&quot;Comic Sans&quot;,Font.BOLD,25)); \r\n        tempButton.setForeground(text); \r\n        tempButton.setBackground(background); \r\n        tempButton.setFocusable(false); \r\n        tempButton.setBounds(x, y, width, height); \r\n        return tempButton;\r\n    } \r\n\r\nThat way you&#39;ll return a formatted button.\r\n\r\nThe call to &quot;setBounds&quot; is really a bad practice. Don&#39;t use null layout and dont call setBounds. ","title":"Struggling to display a button","body":"<p>Make a static method.</p>\n<pre><code>public static JButton button (int x, int y, int width, int height, String buttonName, Color text, Color background) { \n    JButton tempButton = new JButton();\n    tempButton.setText(buttonName);  \n    tempButton.setFont(new Font(&quot;Comic Sans&quot;,Font.BOLD,25)); \n    tempButton.setForeground(text); \n    tempButton.setBackground(background); \n    tempButton.setFocusable(false); \n    tempButton.setBounds(x, y, width, height); \n    return tempButton;\n} \n</code></pre>\n<p>That way you'll return a formatted button.</p>\n<p>The call to &quot;setBounds&quot; is really a bad practice. Don't use null layout and dont call setBounds.</p>\n"}],"owner":{"account_id":20449688,"reputation":3,"user_id":15004699,"display_name":"Lachlan Horsfield"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76441766,"answer_count":2,"score":-1,"last_activity_date":1686332678,"creation_date":1686324053,"question_id":76441606,"body_markdown":"I&#39;ve previously made a button before but this is my first time trying to make it reusable for a project i&#39;m working on. When i did it before i ran into no issues as it was all in one class but now with it being spread across a few classes I can&#39;t do `this.add(button1)`. As you can see I currently have `add(button1)` but it doesn&#39;t add it to the screen what can i change to add it to the screen?\r\n\r\np.s i don&#39;t mind about it not doing anything right now I just want it to be on the screen i can do the rest after that! Also this is my first time using stack overflow so sorry if I&#39;ve formatted this message incorrectly.\r\n\r\nI&#39;ve tried a lot of things but not found any solutions - all of my attempts where hopeless ahah so not much i can add to what I&#39;ve tried. Any help would be amazing thanks.\r\n\r\n```java\r\nimport javax.swing.*; \r\n\r\npublic class Main { \r\n    static JFrame frame = new JFrame(&quot;Buttons&quot;); \r\n\r\n    public static void main(String[] args) { \r\n        Mainmenu menu = new Mainmenu();\r\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE); \r\n        frame.setSize(650,500); \r\n        frame.setVisible(true); \r\n        frame.add(menu); \r\n    } \r\n} \r\n\r\nimport java.awt.*; \r\nimport javax.swing.*; \r\n\r\npublic class Mainmenu extends JPanel{ \r\n    private button button1; \r\n\r\n    Mainmenu () { \r\n        setLayout(null); \r\n        button1 = new button(50, 50, 50, 50, &quot;game1&quot;, Color.red, Color.CYAN); \r\n        add(button1); \r\n    } \r\n\r\n} \r\n\r\nimport javax.swing.JButton; \r\nimport java.awt.Color; \r\nimport java.awt.Font; \r\n\r\npublic class button { \r\n    JButton tempButton = new JButton(); \r\n\r\n    public button (int x, int y, int width, int height, String buttonName, Color text, Color background) { \r\n        tempButton.setText(buttonName);  \r\n        tempButton.setFont(new Font(&quot;Comic Sans&quot;,Font.BOLD,25)); \r\n        tempButton.setForeground(text); \r\n        tempButton.setBackground(background); \r\n        tempButton.setFocusable(false); \r\n        tempButton.setBounds(x, y, width, height); \r\n    } \r\n} \r\n```","title":"Struggling to display a button","body":"<p>I've previously made a button before but this is my first time trying to make it reusable for a project i'm working on. When i did it before i ran into no issues as it was all in one class but now with it being spread across a few classes I can't do <code>this.add(button1)</code>. As you can see I currently have <code>add(button1)</code> but it doesn't add it to the screen what can i change to add it to the screen?</p>\n<p>p.s i don't mind about it not doing anything right now I just want it to be on the screen i can do the rest after that! Also this is my first time using stack overflow so sorry if I've formatted this message incorrectly.</p>\n<p>I've tried a lot of things but not found any solutions - all of my attempts where hopeless ahah so not much i can add to what I've tried. Any help would be amazing thanks.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.*; \n\npublic class Main { \n    static JFrame frame = new JFrame(&quot;Buttons&quot;); \n\n    public static void main(String[] args) { \n        Mainmenu menu = new Mainmenu();\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE); \n        frame.setSize(650,500); \n        frame.setVisible(true); \n        frame.add(menu); \n    } \n} \n\nimport java.awt.*; \nimport javax.swing.*; \n\npublic class Mainmenu extends JPanel{ \n    private button button1; \n\n    Mainmenu () { \n        setLayout(null); \n        button1 = new button(50, 50, 50, 50, &quot;game1&quot;, Color.red, Color.CYAN); \n        add(button1); \n    } \n\n} \n\nimport javax.swing.JButton; \nimport java.awt.Color; \nimport java.awt.Font; \n\npublic class button { \n    JButton tempButton = new JButton(); \n\n    public button (int x, int y, int width, int height, String buttonName, Color text, Color background) { \n        tempButton.setText(buttonName);  \n        tempButton.setFont(new Font(&quot;Comic Sans&quot;,Font.BOLD,25)); \n        tempButton.setForeground(text); \n        tempButton.setBackground(background); \n        tempButton.setFocusable(false); \n        tempButton.setBounds(x, y, width, height); \n    } \n} \n</code></pre>\n"},{"tags":["java","memory-management","heap-memory"],"comments":[{"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":0,"creation_date":1297302489,"post_id":4952568,"comment_id":5524988,"body_markdown":"I think this depends on what JVM you&#39;re using.  The JVM spec says nothing about this, IIRC.","body":"I think this depends on what JVM you&#39;re using.  The JVM spec says nothing about this, IIRC."},{"owner":{"account_id":34640,"reputation":20249,"user_id":97964,"accept_rate":88,"display_name":"jocull"},"score":0,"creation_date":1297302601,"post_id":4952568,"comment_id":5525002,"body_markdown":"Does that mean once it&#39;s allocated it&#39;s there for the application&#39;s life cycle?","body":"Does that mean once it&#39;s allocated it&#39;s there for the application&#39;s life cycle?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1297302611,"post_id":4952568,"comment_id":5525006,"body_markdown":"Please cite the JVM that gives memory back to the OS.  I don&#39;t know of one.","body":"Please cite the JVM that gives memory back to the OS.  I don&#39;t know of one."},{"owner":{"account_id":93911,"reputation":5846,"user_id":256717,"accept_rate":80,"display_name":"Fakrudeen"},"score":0,"creation_date":1297327181,"post_id":4952568,"comment_id":5527871,"body_markdown":"Anyway heapspace is in your virtual address space. If you don&#39;t use it for a while, it simply won&#39;t be brought in into physical RAM. In short, effectively OS will claim it anyway. You don&#39;t have to give back. I don&#39;t think you are worried about swap [disk] space anyway.","body":"Anyway heapspace is in your virtual address space. If you don&#39;t use it for a while, it simply won&#39;t be brought in into physical RAM. In short, effectively OS will claim it anyway. You don&#39;t have to give back. I don&#39;t think you are worried about swap [disk] space anyway."},{"owner":{"account_id":468829,"reputation":8637,"user_id":875044,"accept_rate":51,"display_name":"Kan Li"},"score":3,"creation_date":1380602962,"post_id":4952568,"comment_id":28253164,"body_markdown":"@Fakrudeen, what you said is incorrect.  If it is not decommit by process, OS may reclaim the physical memory, but it needs to write the content to disk first, which degrades performance a lot.  For many servers it doesn&#39;t have swap to make sure it doesn&#39;t thrashing.  In this case, OS can never reclaim the memory, however long it is untouched.  Your comment will mislead anyone who didn&#39;t take OS course before.  It&#39;s harmful.","body":"@Fakrudeen, what you said is incorrect.  If it is not decommit by process, OS may reclaim the physical memory, but it needs to write the content to disk first, which degrades performance a lot.  For many servers it doesn&#39;t have swap to make sure it doesn&#39;t thrashing.  In this case, OS can never reclaim the memory, however long it is untouched.  Your comment will mislead anyone who didn&#39;t take OS course before.  It&#39;s harmful."},{"owner":{"account_id":93911,"reputation":5846,"user_id":256717,"accept_rate":80,"display_name":"Fakrudeen"},"score":0,"creation_date":1380642329,"post_id":4952568,"comment_id":28273656,"body_markdown":"@icando - I stand by what I said. It will write to swap but then doesn&#39;t have to bring it back as long as it is not used again. I am not advising anyone to leak memory left and right. But in this case he is worried about the memory which is already released.","body":"@icando - I stand by what I said. It will write to swap but then doesn&#39;t have to bring it back as long as it is not used again. I am not advising anyone to leak memory left and right. But in this case he is worried about the memory which is already released."},{"owner":{"account_id":468829,"reputation":8637,"user_id":875044,"accept_rate":51,"display_name":"Kan Li"},"score":3,"creation_date":1380651813,"post_id":4952568,"comment_id":28278817,"body_markdown":"@Fakrudeen, swapping unused memory to disk is always bad idea.  It incurs IO when writing it to disk.  More importantly, if JVM needs more memory again, it needs to read garbage content from disk.  If JVM can shrink and avoid being swapped, then if it needs more memory, it can ask OS to allocate free pages to them, which is much cheaper than reading garbage content from disk.  I feel sad that you guys feel OK about things being swapped.  What if a newbie reads about this and had a life-time impression that it is not a big deal things got swapped.","body":"@Fakrudeen, swapping unused memory to disk is always bad idea.  It incurs IO when writing it to disk.  More importantly, if JVM needs more memory again, it needs to read garbage content from disk.  If JVM can shrink and avoid being swapped, then if it needs more memory, it can ask OS to allocate free pages to them, which is much cheaper than reading garbage content from disk.  I feel sad that you guys feel OK about things being swapped.  What if a newbie reads about this and had a life-time impression that it is not a big deal things got swapped."},{"owner":{"account_id":93911,"reputation":5846,"user_id":256717,"accept_rate":80,"display_name":"Fakrudeen"},"score":0,"creation_date":1380884466,"post_id":4952568,"comment_id":28375306,"body_markdown":"@icando - World is about trade-offs. How will JVM know it is unused till it runs a huge GC task? If swapping is bad keeping it in memory and running a huge GC task is even worse as it will really screw other processes in terms of physical memory and CPU. It is DMA which loads/store from Disk not CPU. What if a new bie reads your comment and think swapping is such a bad thing that running GC every so often is not a big deal and writes System.GC() at the end of all his functions [even if it is only advisory call].","body":"@icando - World is about trade-offs. How will JVM know it is unused till it runs a huge GC task? If swapping is bad keeping it in memory and running a huge GC task is even worse as it will really screw other processes in terms of physical memory and CPU. It is DMA which loads/store from Disk not CPU. What if a new bie reads your comment and think swapping is such a bad thing that running GC every so often is not a big deal and writes System.GC() at the end of all his functions [even if it is only advisory call]."},{"owner":{"account_id":468829,"reputation":8637,"user_id":875044,"accept_rate":51,"display_name":"Kan Li"},"score":3,"creation_date":1380935986,"post_id":4952568,"comment_id":28399085,"body_markdown":"@Fakrudeen, look at OP&#39;s chart, JVM does GC after his resource intensive job finishes, and JVM definitely knows how much memory it is using.  I never say GC is not expensive.  The problem we are talking about is not whether GC is expensive or not, it is after GC, JVM knows it has a bunch of free heap, but never returns it to OS.  Man, I know people is instinctively defensive when criticized.  But please think about it.  Also, I want newbie to know that swapping is REALLY bad thing.  If some process has heavy disk IO, almost every other process will hang, e.g. you can&#39;t even SSH to the machine.","body":"@Fakrudeen, look at OP&#39;s chart, JVM does GC after his resource intensive job finishes, and JVM definitely knows how much memory it is using.  I never say GC is not expensive.  The problem we are talking about is not whether GC is expensive or not, it is after GC, JVM knows it has a bunch of free heap, but never returns it to OS.  Man, I know people is instinctively defensive when criticized.  But please think about it.  Also, I want newbie to know that swapping is REALLY bad thing.  If some process has heavy disk IO, almost every other process will hang, e.g. you can&#39;t even SSH to the machine."},{"owner":{"account_id":293305,"reputation":3823,"user_id":596532,"accept_rate":75,"display_name":"Peanut"},"score":0,"creation_date":1440745168,"post_id":4952568,"comment_id":52409120,"body_markdown":"You can actually return memory to the OS by configuring the JVM properly. (-&gt; have a look at my answer)","body":"You can actually return memory to the OS by configuring the JVM properly. (-&gt; have a look at my answer)"},{"owner":{"account_id":3447097,"reputation":4331,"user_id":2887657,"display_name":"James"},"score":0,"creation_date":1537371226,"post_id":4952568,"comment_id":91762621,"body_markdown":"Don&#39;t want to fire a very old fight again, but I think it really ought to be said that Java&#39;s GC (no mater which GC strategy is used) plays very badly with swapping. GC engines need to periodically inspect all of its heap to determine which objects are still alive, and possibly to move things around. If part of the heap goes to swap, then the GC will constantly force these to be paged back in, which is a very costly operation; actually, if GC heaps represent a large proportion of that machine&#39;s swap needs (and that can be from multiple Java processes), then the system is about to go trashing.","body":"Don&#39;t want to fire a very old fight again, but I think it really ought to be said that Java&#39;s GC (no mater which GC strategy is used) plays very badly with swapping. GC engines need to periodically inspect all of its heap to determine which objects are still alive, and possibly to move things around. If part of the heap goes to swap, then the GC will constantly force these to be paged back in, which is a very costly operation; actually, if GC heaps represent a large proportion of that machine&#39;s swap needs (and that can be from multiple Java processes), then the system is about to go trashing."},{"owner":{"account_id":3447097,"reputation":4331,"user_id":2887657,"display_name":"James"},"score":0,"creation_date":1537371343,"post_id":4952568,"comment_id":91762688,"body_markdown":"This is why Java heap size should always be determined on the base of a machine&#39;s physically installed RAM, and take into account other similar process running concurrently.","body":"This is why Java heap size should always be determined on the base of a machine&#39;s physically installed RAM, and take into account other similar process running concurrently."},{"owner":{"account_id":3447097,"reputation":4331,"user_id":2887657,"display_name":"James"},"score":0,"creation_date":1537371688,"post_id":4952568,"comment_id":91762897,"body_markdown":"Indeed, some generational GC strategies deals reasonably well when _small portions_ of the heap is swapped to disk, but this should definitely not be relied on. At this time, mainstream JREs offer no GC strategy that is swap-aware; research effort as been done in this regard, but these require modifications at the kernel level, which makes them non-viable for mainstream programs.","body":"Indeed, some generational GC strategies deals reasonably well when <i>small portions</i> of the heap is swapped to disk, but this should definitely not be relied on. At this time, mainstream JREs offer no GC strategy that is swap-aware; research effort as been done in this regard, but these require modifications at the kernel level, which makes them non-viable for mainstream programs."},{"owner":{"account_id":3447097,"reputation":4331,"user_id":2887657,"display_name":"James"},"score":1,"creation_date":1537372141,"post_id":4952568,"comment_id":91763140,"body_markdown":"Finally, note that all of this applies only to the Java&#39;s heap (that is, GC managed memory). Relying on swap for off-heap memory (for example, `ByteBuffer.allocateDirect()`) pose absolutely no issue form the GC&#39;s perspective, and may be perfectly acceptable (depending on the use case, obviously). This is for example what is done by all major Java-based databases, caches and search engines, though even these generally recommend that memory settings be adjusted to avoid anonymous pages from being swapped out.","body":"Finally, note that all of this applies only to the Java&#39;s heap (that is, GC managed memory). Relying on swap for off-heap memory (for example, <code>ByteBuffer.allocateDirect()</code>) pose absolutely no issue form the GC&#39;s perspective, and may be perfectly acceptable (depending on the use case, obviously). This is for example what is done by all major Java-based databases, caches and search engines, though even these generally recommend that memory settings be adjusted to avoid anonymous pages from being swapped out."}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":8,"up_vote_count":11,"is_accepted":false,"score":3,"last_activity_date":1435654905,"creation_date":1297302173,"answer_id":4952589,"question_id":4952568,"body_markdown":"&gt; The JVM doesn&#39;t work that way.  You can&#39;t give it back to the OS.\r\n\r\nAs noted by several people since this was written four years ago, you can give memory back to the OS if you give the proper GC settings to the JVM.  \r\n\r\n ","title":"Is there a way to lower Java heap when not in use?","body":"<blockquote>\n  <p>The JVM doesn't work that way.  You can't give it back to the OS.</p>\n</blockquote>\n\n<p>As noted by several people since this was written four years ago, you can give memory back to the OS if you give the proper GC settings to the JVM.  </p>\n"},{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1372368670,"creation_date":1297302763,"answer_id":4952645,"question_id":4952568,"body_markdown":"You could perhaps play around with `-XX:MaxHeapFreeRatio` - this is the maximum percentage (default 70) of the heap that is free before the GC shrinks it. Perhaps setting it a bit lower (40 or 50?) and then using `System.gc()` might go some lengths to get you the desired behaviour?\r\n\r\nThere&#39;s no way to force this to happen however, you can try and encourage the JVM to do so but you can&#39;t just yank memory away as and when you want to. And while the above may shrink the heap, that memory won&#39;t necessarily be handed straight back to the OS (though in recent implementations of the JVM it does.)","title":"Is there a way to lower Java heap when not in use?","body":"<p>You could perhaps play around with <code>-XX:MaxHeapFreeRatio</code> - this is the maximum percentage (default 70) of the heap that is free before the GC shrinks it. Perhaps setting it a bit lower (40 or 50?) and then using <code>System.gc()</code> might go some lengths to get you the desired behaviour?</p>\n\n<p>There's no way to force this to happen however, you can try and encourage the JVM to do so but you can't just yank memory away as and when you want to. And while the above may shrink the heap, that memory won't necessarily be handed straight back to the OS (though in recent implementations of the JVM it does.)</p>\n"},{"tags":[],"owner":{"account_id":83469,"reputation":9224,"user_id":234009,"display_name":"robert_x44"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1297302858,"creation_date":1297302858,"answer_id":4952650,"question_id":4952568,"body_markdown":"One possibility is to have your background java application launch an external jvm instance each hour to run your task.  That way only your original jvm application is running between tasks.","title":"Is there a way to lower Java heap when not in use?","body":"<p>One possibility is to have your background java application launch an external jvm instance each hour to run your task.  That way only your original jvm application is running between tasks.</p>\n"},{"tags":[],"owner":{"account_id":24252,"reputation":1932,"user_id":61572,"display_name":"Ron"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1297303819,"creation_date":1297303819,"answer_id":4952731,"question_id":4952568,"body_markdown":"If your app is quiescent during periods of inactivity, it&#39;s possible the OS will swap out those pages for you, mitigating their pressure on physical memory.\r\n\r\nhttp://www.linuxvox.com/2009/10/what-is-the-linux-kernel-parameter-vm-swappiness/\r\n","title":"Is there a way to lower Java heap when not in use?","body":"<p>If your app is quiescent during periods of inactivity, it's possible the OS will swap out those pages for you, mitigating their pressure on physical memory.</p>\n\n<p><a href=\"http://www.linuxvox.com/2009/10/what-is-the-linux-kernel-parameter-vm-swappiness/\" rel=\"nofollow\">http://www.linuxvox.com/2009/10/what-is-the-linux-kernel-parameter-vm-swappiness/</a></p>\n"},{"tags":[],"owner":{"account_id":126861,"reputation":2404,"user_id":323653,"accept_rate":21,"display_name":"Mike"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1311876582,"creation_date":1311876582,"answer_id":6863628,"question_id":4952568,"body_markdown":"Java best kept secret: -Xincgc\r\nIt does impact performance but not always that much. Sometimes it does, depends on what you&#39;re doing.\r\nThe incremental garbage collector hands memory back to the system quite well !\r\n","title":"Is there a way to lower Java heap when not in use?","body":"<p>Java best kept secret: -Xincgc\nIt does impact performance but not always that much. Sometimes it does, depends on what you're doing.\nThe incremental garbage collector hands memory back to the system quite well !</p>\n"},{"tags":[],"owner":{"account_id":293305,"reputation":3823,"user_id":596532,"accept_rate":75,"display_name":"Peanut"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1686332598,"creation_date":1436363052,"answer_id":31294584,"question_id":4952568,"body_markdown":"Short version: Yes you can.\r\n\r\nLong version:\r\n# How Java/JVM manages memory\r\nFor most applications the JVM defaults are okay. It looks like the JVM expects applications to run only a limited period of time. Therefore it does not seem to free memory on it&#39;s own.\r\n\r\nIn order to help the JVM to decide how and when to perform garbage collection, the following parameters should be supplied:\r\n\r\n  - `-Xms` Specifies the minimal heap size\r\n  - `–Xmx` Specifies the maximal heap size\r\n\r\nFor server applications add: `-server`\r\n\r\n# That&#39;s not enough for me. I want more control!\r\nIn case the above mentioned parameters are not enough, you can influence the behavior of the JVM regarding garbage collection.\r\n\r\nFirst you can use `System.gc()` to tell the VM when you believe garbage collection would make sense. And second you can specify which of the garbage collectors the JVM should use:\r\n\r\n# Different Kinds of Garbage collectors:\r\n\r\n - **Serial GC**\r\n\r\n\tCommand line parameter: `-XX:+UseSerialGC`\r\n\r\n    Stops your application and performs GC.\r\n\r\n - **Parallel GC**\r\n\r\n    Command line parameter: `-XX:+UseParallelGC -XX:ParallelGCThreads=value`\r\n\r\n    Runs *minor collections* in parallel with your application. Reduces time needed for *major collections*, but uses another thread.\r\n\r\n - **Parallel Compacting GC**\r\n    \r\n    Command line parameter: `-XX:+UseParallelOldGC`\r\n\r\n    Runs *major collections* in parallel with your application. Uses more CPU resources, reduces memory usage.\r\n\r\n - **CMS GC**\r\n    \r\n    Command line parameter: `-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=value -XX:+UseCMSInitiatingOccupancyOnly`\r\n\r\n    Performs smaller collections, and more often than *Serial GC*, thus limiting the breaks/stops of the application.\r\n\r\n - **G1**\r\n\r\n    Command line parameter: `-XX:+UnlockExperimentalVMOptions -XX:+UseG1GC`\r\n\r\n    Experimental (at least in Java 1.6): Tries to make sure the application is never stopped for more than 1s.\r\n#Example\r\nMemory usage of a Play Framework web application without any optimizations:\r\n[![Play Framework WebApp without optimizations][1]][1]\r\nAs you can see, it uses quite a lot of heap space, and the used space is regularly freed.\r\n\r\nIn this case the optimizations with parameters only were not effective. There were some scheduled tasks which used rather a lot of memory. In this case the best performance was achieved by using the `CMS GC` combined with `System.gc()` after the memory intensive operations. As a result the memory usage of the WebApp was reduced from 1.8 GB to around 400-500 MB.\r\n\r\nYou can see here another screenshot from the VisualVM which shows how memory is freed by the JVM and actually returned to the OS:\r\n\r\n[![Memory is being freed by the JVM and returned to the OS][2]][2]\r\nNote: I used the &quot;Perform GC&quot;-button of the VisualVM to perform the GC rather than `System.gc()` in my code, as the scheduled tasks which consume the memory are only launched at specific times and somewhat harder to capture with VisualVM.\r\n\r\n# Further Reading\r\n  - [Article about tuning of the JVM GC][3]\r\n  - [Oracle Documentation of the available GCs][4]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/B9oPL.png\r\n  [2]: http://i.stack.imgur.com/bLfiZ.png\r\n  [3]: https://www.cubrid.org/blog/3826456\r\n  [4]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/collectors.html","title":"Is there a way to lower Java heap when not in use?","body":"<p>Short version: Yes you can.</p>\n<p>Long version:</p>\n<h1>How Java/JVM manages memory</h1>\n<p>For most applications the JVM defaults are okay. It looks like the JVM expects applications to run only a limited period of time. Therefore it does not seem to free memory on it's own.</p>\n<p>In order to help the JVM to decide how and when to perform garbage collection, the following parameters should be supplied:</p>\n<ul>\n<li><code>-Xms</code> Specifies the minimal heap size</li>\n<li><code>–Xmx</code> Specifies the maximal heap size</li>\n</ul>\n<p>For server applications add: <code>-server</code></p>\n<h1>That's not enough for me. I want more control!</h1>\n<p>In case the above mentioned parameters are not enough, you can influence the behavior of the JVM regarding garbage collection.</p>\n<p>First you can use <code>System.gc()</code> to tell the VM when you believe garbage collection would make sense. And second you can specify which of the garbage collectors the JVM should use:</p>\n<h1>Different Kinds of Garbage collectors:</h1>\n<ul>\n<li><p><strong>Serial GC</strong></p>\n<p>Command line parameter: <code>-XX:+UseSerialGC</code></p>\n<p>Stops your application and performs GC.</p>\n</li>\n<li><p><strong>Parallel GC</strong></p>\n<p>Command line parameter: <code>-XX:+UseParallelGC -XX:ParallelGCThreads=value</code></p>\n<p>Runs <em>minor collections</em> in parallel with your application. Reduces time needed for <em>major collections</em>, but uses another thread.</p>\n</li>\n<li><p><strong>Parallel Compacting GC</strong></p>\n<p>Command line parameter: <code>-XX:+UseParallelOldGC</code></p>\n<p>Runs <em>major collections</em> in parallel with your application. Uses more CPU resources, reduces memory usage.</p>\n</li>\n<li><p><strong>CMS GC</strong></p>\n<p>Command line parameter: <code>-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=value -XX:+UseCMSInitiatingOccupancyOnly</code></p>\n<p>Performs smaller collections, and more often than <em>Serial GC</em>, thus limiting the breaks/stops of the application.</p>\n</li>\n<li><p><strong>G1</strong></p>\n<p>Command line parameter: <code>-XX:+UnlockExperimentalVMOptions -XX:+UseG1GC</code></p>\n<p>Experimental (at least in Java 1.6): Tries to make sure the application is never stopped for more than 1s.\n#Example\nMemory usage of a Play Framework web application without any optimizations:\n<a href=\"https://i.stack.imgur.com/B9oPL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B9oPL.png\" alt=\"Play Framework WebApp without optimizations\" /></a>\nAs you can see, it uses quite a lot of heap space, and the used space is regularly freed.</p>\n</li>\n</ul>\n<p>In this case the optimizations with parameters only were not effective. There were some scheduled tasks which used rather a lot of memory. In this case the best performance was achieved by using the <code>CMS GC</code> combined with <code>System.gc()</code> after the memory intensive operations. As a result the memory usage of the WebApp was reduced from 1.8 GB to around 400-500 MB.</p>\n<p>You can see here another screenshot from the VisualVM which shows how memory is freed by the JVM and actually returned to the OS:</p>\n<p><a href=\"https://i.stack.imgur.com/bLfiZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bLfiZ.png\" alt=\"Memory is being freed by the JVM and returned to the OS\" /></a>\nNote: I used the &quot;Perform GC&quot;-button of the VisualVM to perform the GC rather than <code>System.gc()</code> in my code, as the scheduled tasks which consume the memory are only launched at specific times and somewhat harder to capture with VisualVM.</p>\n<h1>Further Reading</h1>\n<ul>\n<li><a href=\"https://www.cubrid.org/blog/3826456\" rel=\"nofollow noreferrer\">Article about tuning of the JVM GC</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/collectors.html\" rel=\"nofollow noreferrer\">Oracle Documentation of the available GCs</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3012980,"reputation":492,"user_id":9533625,"display_name":"Heuriskos"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1559896739,"creation_date":1548064431,"answer_id":54287343,"question_id":4952568,"body_markdown":"**Java 12** supports this feature using G1GC.\r\n\r\n&gt; JEP 346: Promptly Return Unused Committed Memory from G1.\r\n\r\n&gt;Enhance the G1 garbage collector to automatically return Java heap memory to the operating system when idle.\r\n\r\nhttps://openjdk.java.net/jeps/346\r\n\r\n**Java 13** supports this feature using zgc\r\n\r\n&gt; JEP 351: ZGC: Uncommit Unused Memory\r\n\r\n&gt; ZGC does not currently uncommit and return memory to the operating system, even when that memory has been unused for a long time. This behavior is not optimal for all types of applications and environments, especially those where memory footprint is a concern. For example:\r\nContainer environments where resources are paid by use.\r\n\r\n&gt; - Environments where an application might be idle for long periods of time and is sharing or competing for resources with many other applications.\r\n\r\n&gt; - An application might have very different heap space requirements during its execution. For example, the heap needed during start up might be greater than what is needed later during steady state execution.\r\n\r\nhttp://openjdk.java.net/jeps/351","title":"Is there a way to lower Java heap when not in use?","body":"<p><strong>Java 12</strong> supports this feature using G1GC.</p>\n\n<blockquote>\n  <p>JEP 346: Promptly Return Unused Committed Memory from G1.</p>\n  \n  <p>Enhance the G1 garbage collector to automatically return Java heap memory to the operating system when idle.</p>\n</blockquote>\n\n<p><a href=\"https://openjdk.java.net/jeps/346\" rel=\"nofollow noreferrer\">https://openjdk.java.net/jeps/346</a></p>\n\n<p><strong>Java 13</strong> supports this feature using zgc</p>\n\n<blockquote>\n  <p>JEP 351: ZGC: Uncommit Unused Memory</p>\n  \n  <p>ZGC does not currently uncommit and return memory to the operating system, even when that memory has been unused for a long time. This behavior is not optimal for all types of applications and environments, especially those where memory footprint is a concern. For example:\n  Container environments where resources are paid by use.</p>\n  \n  <ul>\n  <li><p>Environments where an application might be idle for long periods of time and is sharing or competing for resources with many other applications.</p></li>\n  <li><p>An application might have very different heap space requirements during its execution. For example, the heap needed during start up might be greater than what is needed later during steady state execution.</p></li>\n  </ul>\n</blockquote>\n\n<p><a href=\"http://openjdk.java.net/jeps/351\" rel=\"nofollow noreferrer\">http://openjdk.java.net/jeps/351</a></p>\n"}],"owner":{"account_id":34640,"reputation":20249,"user_id":97964,"accept_rate":88,"display_name":"jocull"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32706,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":4952645,"answer_count":7,"score":62,"last_activity_date":1686332598,"creation_date":1297302000,"question_id":4952568,"body_markdown":"I&#39;m working on a Java application at the moment and working to optimize its memory usage. I&#39;m following the guidelines for proper garbage collection as far as I am aware. However, it seems that my heap seems to sit at its maximum size, even though it is not needed.\r\n\r\nMy program runs a resource intensive task once an hour, when the computer is not in use by a person. This task uses a decent chunk of memory, but then frees it all immediately after the task completes. The NetBeans profiler reveals that memory usage looks like this:\r\n\r\n![Java program memory usage][1]\r\n\r\nI&#39;d really like to give all of that heap space back to the OS when not in use. There is no reason for me to hog it all while the program won&#39;t even be doing anything for at least another hour.\r\n\r\nIs this possible? Thanks.\r\n\r\n  [1]: http://i.stack.imgur.com/YC2cf.png","title":"Is there a way to lower Java heap when not in use?","body":"<p>I'm working on a Java application at the moment and working to optimize its memory usage. I'm following the guidelines for proper garbage collection as far as I am aware. However, it seems that my heap seems to sit at its maximum size, even though it is not needed.</p>\n\n<p>My program runs a resource intensive task once an hour, when the computer is not in use by a person. This task uses a decent chunk of memory, but then frees it all immediately after the task completes. The NetBeans profiler reveals that memory usage looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/YC2cf.png\" alt=\"Java program memory usage\"></p>\n\n<p>I'd really like to give all of that heap space back to the OS when not in use. There is no reason for me to hog it all while the program won't even be doing anything for at least another hour.</p>\n\n<p>Is this possible? Thanks.</p>\n"},{"tags":["java","apache-poi","log4j","pom.xml"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1686335051,"post_id":76442256,"comment_id":134789846,"body_markdown":"Why are you using POI jars from a mixture of versions? As per https://poi.apache.org/help/faq.html#faq-N10204 this is documented as not working and not being supported!","body":"Why are you using POI jars from a mixture of versions? As per <a href=\"https://poi.apache.org/help/faq.html#faq-N10204\" rel=\"nofollow noreferrer\">poi.apache.org/help/faq.html#faq-N10204</a> this is documented as not working and not being supported!"},{"owner":{"account_id":26594418,"reputation":29,"user_id":20217050,"display_name":"what&#39;s_in_a_name"},"score":0,"creation_date":1686557456,"post_id":76442256,"comment_id":134809223,"body_markdown":"@Gagravarr Thanks for the reply. I was only trying to use the latest versions of all the dependencies. are you saying that all those dep. should have the same versions? the latest version for poi contrib and poi is 5.2.3 but for poi-contrib is 3.7 beta or 3.6 so I am not sure how I can have them to be the same. Although poi and poi contrib do have 3.6 versions from back in 2010 so perhaps matching that would do the trick?","body":"@Gagravarr Thanks for the reply. I was only trying to use the latest versions of all the dependencies. are you saying that all those dep. should have the same versions? the latest version for poi contrib and poi is 5.2.3 but for poi-contrib is 3.7 beta or 3.6 so I am not sure how I can have them to be the same. Although poi and poi contrib do have 3.6 versions from back in 2010 so perhaps matching that would do the trick?"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1686565866,"post_id":76442256,"comment_id":134811028,"body_markdown":"See https://stackoverflow.com/questions/25866854/missing-poi-contrib-jar-in-the-new-release-of-poi - POI Contrib is no more, almost everything went to POI Examples, and you probably weren&#39;t using any classes out of the Jar anyway!","body":"See <a href=\"https://stackoverflow.com/questions/25866854/missing-poi-contrib-jar-in-the-new-release-of-poi\" title=\"missing poi contrib jar in the new release of poi\">stackoverflow.com/questions/25866854/&hellip;</a> - POI Contrib is no more, almost everything went to POI Examples, and you probably weren&#39;t using any classes out of the Jar anyway!"}],"owner":{"account_id":26594418,"reputation":29,"user_id":20217050,"display_name":"what&#39;s_in_a_name"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686332062,"creation_date":1686329032,"question_id":76442256,"body_markdown":"Recently, I changed the poi and poi-ooxml dependencies from \r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-contrib&lt;/artifactId&gt;\r\n            &lt;version&gt;3.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\nto this \r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.3&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.3&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-contrib&lt;/artifactId&gt;\r\n            &lt;version&gt;3.6&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nand now i am getting the following exception\r\n```\r\n13:27:42.929 [main] INFO  com..Main - Exception thrown:\r\njava.lang.IndexOutOfBoundsException: null\r\n\tat org.apache.xmlbeans.impl.store.Xobj.removeElement(Xobj.java:2099) ~[xmlbeans-5.1.1.jar:?]\r\n\tat org.apache.xmlbeans.impl.store.Xobj.remove_element(Xobj.java:2130) ~[xmlbeans-5.1.1.jar:?]\r\n\tat org.openxmlformats.schemas.spreadsheetml.x2006.main.impl.CTRowImpl.removeC(CTRowImpl.java:146) ~[poi-ooxml-lite-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.xssf.usermodel.XSSFRow.fixupCTCells(XSSFRow.java:612) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.xssf.usermodel.XSSFRow.onDocumentWrite(XSSFRow.java:582) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.xssf.usermodel.XSSFSheet.write(XSSFSheet.java:3806) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.xssf.usermodel.XSSFSheet.commit(XSSFSheet.java:3749) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.ooxml.POIXMLDocumentPart.onSave(POIXMLDocumentPart.java:467) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.ooxml.POIXMLDocumentPart.onSave(POIXMLDocumentPart.java:472) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat org.apache.poi.ooxml.POIXMLDocument.write(POIXMLDocument.java:221) ~[poi-ooxml-5.2.3.jar:5.2.3]\r\n\tat com..workbook.WorkbookHandler.writeWorkbook(WorkbookHandler.java:341) ~[DailyTrends-Reports.jar:?]\r\n\tat com..workbook.ExecutiveWorkbookHandler.generate(ExecutiveWorkbookHandler.java:90) ~[DailyTrends-Reports.jar:?]\r\n\tat com..Main.main(Main.java:64) [DailyTrends-Reports.jar:?]\r\n```\r\nThe changes i made were to get rid of the transitive dependency of log4j dependency, which i wasnt sure where it was coming from so i added the exclusion in almost all the dependencies. I also upgraded the dep. versions. I did end up getting rid of the log4j dependency but not sure what&#39;s causing the exception. any leads would be much appreciated. thanks. \r\n\r\nedit: i found that the log4j transitive dep was coming from poi-contrib dependency but not sure if removing the other exclusions would help","title":"where is poi ooxml out of bounds error rising from?","body":"<p>Recently, I changed the poi and poi-ooxml dependencies from</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-contrib&lt;/artifactId&gt;\n            &lt;version&gt;3.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>to this</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-contrib&lt;/artifactId&gt;\n            &lt;version&gt;3.6&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>and now i am getting the following exception</p>\n<pre><code>13:27:42.929 [main] INFO  com..Main - Exception thrown:\njava.lang.IndexOutOfBoundsException: null\n    at org.apache.xmlbeans.impl.store.Xobj.removeElement(Xobj.java:2099) ~[xmlbeans-5.1.1.jar:?]\n    at org.apache.xmlbeans.impl.store.Xobj.remove_element(Xobj.java:2130) ~[xmlbeans-5.1.1.jar:?]\n    at org.openxmlformats.schemas.spreadsheetml.x2006.main.impl.CTRowImpl.removeC(CTRowImpl.java:146) ~[poi-ooxml-lite-5.2.3.jar:5.2.3]\n    at org.apache.poi.xssf.usermodel.XSSFRow.fixupCTCells(XSSFRow.java:612) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at org.apache.poi.xssf.usermodel.XSSFRow.onDocumentWrite(XSSFRow.java:582) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at org.apache.poi.xssf.usermodel.XSSFSheet.write(XSSFSheet.java:3806) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at org.apache.poi.xssf.usermodel.XSSFSheet.commit(XSSFSheet.java:3749) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at org.apache.poi.ooxml.POIXMLDocumentPart.onSave(POIXMLDocumentPart.java:467) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at org.apache.poi.ooxml.POIXMLDocumentPart.onSave(POIXMLDocumentPart.java:472) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at org.apache.poi.ooxml.POIXMLDocument.write(POIXMLDocument.java:221) ~[poi-ooxml-5.2.3.jar:5.2.3]\n    at com..workbook.WorkbookHandler.writeWorkbook(WorkbookHandler.java:341) ~[DailyTrends-Reports.jar:?]\n    at com..workbook.ExecutiveWorkbookHandler.generate(ExecutiveWorkbookHandler.java:90) ~[DailyTrends-Reports.jar:?]\n    at com..Main.main(Main.java:64) [DailyTrends-Reports.jar:?]\n</code></pre>\n<p>The changes i made were to get rid of the transitive dependency of log4j dependency, which i wasnt sure where it was coming from so i added the exclusion in almost all the dependencies. I also upgraded the dep. versions. I did end up getting rid of the log4j dependency but not sure what's causing the exception. any leads would be much appreciated. thanks.</p>\n<p>edit: i found that the log4j transitive dep was coming from poi-contrib dependency but not sure if removing the other exclusions would help</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-transactions"],"answers":[{"tags":[],"owner":{"account_id":380946,"reputation":8170,"user_id":735284,"accept_rate":73,"display_name":"coderatchet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1506561188,"creation_date":1506561188,"answer_id":46459450,"question_id":46440300,"body_markdown":"## Finally, a JPA only solution!\r\n\r\nThe Solution was to control the creation of the `EntityManagerFactoryBeans` using the provided spring `EntityManagerFactoryBuilder` component and inject the EntityManager into the test using the `@PersistenceContext` annotation.\r\n\r\n    @SqlConfig(dataSource = TestDataSourceConfig.SCHEMA_DATA_SOURCE, transactionManager = SCHEMA_TRANSACTION_MANAGER, transactionMode = SqlConfig.TransactionMode.ISOLATED)\r\n    ...\r\n    public class MyJUnitTest {\r\n      @PersistenceContext(unitName = &quot;pu&quot;)\r\n      private EntityManager em;\r\n      ...\r\n\r\n      @Test\r\n      @Sql(statements = {&quot;SOME SQL USING THE PRIVILEGED SCHEMA CONNECTION&quot;}, ...)\r\n      public void myTest() {\r\n        em.createQuery(&quot;...&quot;).getResultList() // uses the APP database user. \r\n      }\r\n    }\r\n\r\nBelow is the configuration for both datasources. The application related DataSource beans all have `@Primary` in their definition to disambiguate any `@Autowired` dependencies. there are no Hibernate specific classes needed other than the Automatic hibernate config done through the `@DataJpaTest` class.\r\n\r\n    @Configuration\r\n\t@EnableTransactionManagement\r\n\t@EnableConfigurationProperties(JpaProperties.class)\r\n\tpublic class TestDataSourceConfig {\r\n\r\n\t    public static final String SCHEMA_DATA_SOURCE = &quot;schemaDS&quot;;\r\n\t    public static final String SCHEMA_TRANSACTION_MANAGER = &quot;schemaTM&quot;;\r\n\t    public static final String SCHEMA_EMF = &quot;schemaEMF&quot;;\r\n\r\n\t    /*Main Datasource and supporting beans*/\r\n\r\n\t    @Bean\r\n\t    @Primary\r\n\t    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n\t    public DataSource dataSource() {\r\n\t        return new DriverManagerDataSource();\r\n\t    }\r\n\r\n\t    @Bean @Primary @Autowired\r\n\t    public PlatformTransactionManager transactionManager(EntityManagerFactory emf) { return new JpaTransactionManager(emf); }\r\n\r\n\t    @Bean @Primary\r\n\t    public LocalContainerEntityManagerFactoryBean emfBean(\r\n\t            EntityManagerFactoryBuilder entityManagerFactoryBuilder,\r\n\t            DataSource datasource,\r\n\t            JpaProperties jpaProperties) {\r\n\t        return entityManagerFactoryBuilder\r\n\t                .dataSource(datasource)\r\n\t                .jta(false)\r\n\t                .packages(CourseOffering.class)\r\n\t                .persistenceUnit(&quot;pu&quot;)\r\n\t                .properties(jpaProperties.getProperties())\r\n\t                .build();\r\n\t    }\r\n\r\n\t    @Bean(name = SCHEMA_EMF)\r\n\t    public LocalContainerEntityManagerFactoryBean emfSchemaBean(\r\n\t            EntityManagerFactoryBuilder entityManagerFactoryBuilder,\r\n\t            @Qualifier(SCHEMA_DATA_SOURCE) DataSource schemaDataSource,\r\n\t            JpaProperties jpaProperties) {\r\n\t        return entityManagerFactoryBuilder\r\n\t                .dataSource(schemaDataSource)\r\n\t                .jta(false)\r\n\t                .packages(CourseOffering.class)\r\n\t                .persistenceUnit(&quot;spu&quot;)\r\n\t                .properties(jpaProperties.getProperties())\r\n\t                .build();\r\n\t    }\r\n\r\n\t    @Bean(name = SCHEMA_DATA_SOURCE)\r\n\t    @ConfigurationProperties(prefix = &quot;myapp.datasource.test_schema&quot;)\r\n\t    public DataSource schemaDataSource() { return new DriverManagerDataSource(); }\r\n\r\n\t    @Bean(name = SCHEMA_TRANSACTION_MANAGER)\r\n\t    public PlatformTransactionManager transactionManagerSchema(\r\n\t            @Qualifier(SCHEMA_EMF) EntityManagerFactory emfSchemaBean) {\r\n\t        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\r\n\t        jpaTransactionManager.setEntityManagerFactory(emfSchemaBean);\r\n\t        return jpaTransactionManager;\r\n\t    }\r\n\t}\r\n\r\n_Actual Test Class:_\r\n\r\n\t@RunWith(SpringRunner.class) // required for all spring tests\r\n\t@DataJpaTest(excludeAutoConfiguration = {TestDatabaseAutoConfiguration.class, DataSourceAutoConfiguration.class}) // this stops the default data source and database being configured.\r\n\t@SqlConfig(dataSource = TestDataSourceConfig.SCHEMA_DATA_SOURCE, transactionManager = SCHEMA_TRANSACTION_MANAGER, transactionMode = SqlConfig.TransactionMode.ISOLATED) // make sure the @Sql statements are run using the SCHEMA datasource and txManager in an isolated way so as not to cause problems when running test methods requiring these statements to be run.\r\n\t@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE, classes = {TestDataSourceConfig.class})\r\n\t@TestExecutionListeners({ \r\n\t\tSqlScriptsTestExecutionListener.class, // enables the @Sql script annotations to work.\r\n\t\tSpringBootDependencyInjectionTestExecutionListener.class, // injects spring components into the test (i.e. the EntityManager)\r\n\t\tTransactionalTestExecutionListener.class}) // I have this here even though the @Transactional annotations don&#39;t exist yet as I plan on using them in further tests.\r\n\tpublic class NotificationTypeEnumTest {\r\n\r\n\t    @PersistenceContext(unitName = &quot;pu&quot;) // required to inject the correct EntityManager\r\n\t    private EntityManager em;\r\n\r\n\t    // these statements are \r\n\t    @Test\r\n\t    @Sql(statements = {&quot;INSERT INTO MYAPP_ENUM (ENUM_ID, \\&quot;TYPE\\&quot;, \\&quot;VALUE\\&quot;) VALUES (MYAPP_ENUM_ID_SEQ.nextval, &#39;&quot; + NotificationTypeEnum.DTYPE + &quot;&#39;, &#39;foo&#39;)&quot;}, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)\r\n\t    @Sql(statements = {&quot;DELETE FROM MYAPP_ENUM&quot;}, executionPhase = Sql.ExecutionPhase.AFTER_TEST_METHOD)\r\n\t    public void canFetchNotificationTypeEnum() throws Exception {\r\n\t        TypedQuery&lt;NotificationTypeEnum&gt; query = em.createQuery(&quot;select a from NotificationTypeEnum a&quot;, NotificationTypeEnum.class); // notification type is just a subclass of the BaseEnum type\r\n\t        NotificationTypeEnum result = query.getSingleResult();\r\n\t        assertEquals(&quot;foo&quot;, result.getValue());\r\n\t        assertEquals(NotificationTypeEnum.DTYPE, result.getConfigType());\r\n\t    }\r\n\t}\r\n\r\n---\r\n\r\n_noteworthy classes:_\r\n\r\n- `EntityManagerFactoryBuilder` - I don&#39;t like factory factories, but this one served me well in creating the correct implementation of EntityManagerFactory without depending on any hibernate specific classes. may be injected with `@Autowired`. The builder bean itself is configured through the `HibernateJpaAutoConfiguration` class (extends `JpaBaseConfiguration`) (imported by `@DataJpaTest`).\r\n- `JpaProperties` - useful for maintaining `application.properties` config in the resulting entitymanagerfactories. enabled through the `@EnableConfigurationProperties(JpaProperties.class)` annotation above this config class.\r\n- `@PersistenceContext(unitName = &quot;...&quot;)` - I can inject the correct `EntityManager` in my test class with this annotation.","title":"@Sql Failed SQL scripts: The configured DataSource [*] (named &#39;fooDS&#39;) is not the one associated with transaction manager [*] (named &#39;fooTM&#39;)","body":"<h2>Finally, a JPA only solution!</h2>\n\n<p>The Solution was to control the creation of the <code>EntityManagerFactoryBeans</code> using the provided spring <code>EntityManagerFactoryBuilder</code> component and inject the EntityManager into the test using the <code>@PersistenceContext</code> annotation.</p>\n\n<pre><code>@SqlConfig(dataSource = TestDataSourceConfig.SCHEMA_DATA_SOURCE, transactionManager = SCHEMA_TRANSACTION_MANAGER, transactionMode = SqlConfig.TransactionMode.ISOLATED)\n...\npublic class MyJUnitTest {\n  @PersistenceContext(unitName = \"pu\")\n  private EntityManager em;\n  ...\n\n  @Test\n  @Sql(statements = {\"SOME SQL USING THE PRIVILEGED SCHEMA CONNECTION\"}, ...)\n  public void myTest() {\n    em.createQuery(\"...\").getResultList() // uses the APP database user. \n  }\n}\n</code></pre>\n\n<p>Below is the configuration for both datasources. The application related DataSource beans all have <code>@Primary</code> in their definition to disambiguate any <code>@Autowired</code> dependencies. there are no Hibernate specific classes needed other than the Automatic hibernate config done through the <code>@DataJpaTest</code> class.</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableConfigurationProperties(JpaProperties.class)\npublic class TestDataSourceConfig {\n\n    public static final String SCHEMA_DATA_SOURCE = \"schemaDS\";\n    public static final String SCHEMA_TRANSACTION_MANAGER = \"schemaTM\";\n    public static final String SCHEMA_EMF = \"schemaEMF\";\n\n    /*Main Datasource and supporting beans*/\n\n    @Bean\n    @Primary\n    @ConfigurationProperties(prefix = \"spring.datasource\")\n    public DataSource dataSource() {\n        return new DriverManagerDataSource();\n    }\n\n    @Bean @Primary @Autowired\n    public PlatformTransactionManager transactionManager(EntityManagerFactory emf) { return new JpaTransactionManager(emf); }\n\n    @Bean @Primary\n    public LocalContainerEntityManagerFactoryBean emfBean(\n            EntityManagerFactoryBuilder entityManagerFactoryBuilder,\n            DataSource datasource,\n            JpaProperties jpaProperties) {\n        return entityManagerFactoryBuilder\n                .dataSource(datasource)\n                .jta(false)\n                .packages(CourseOffering.class)\n                .persistenceUnit(\"pu\")\n                .properties(jpaProperties.getProperties())\n                .build();\n    }\n\n    @Bean(name = SCHEMA_EMF)\n    public LocalContainerEntityManagerFactoryBean emfSchemaBean(\n            EntityManagerFactoryBuilder entityManagerFactoryBuilder,\n            @Qualifier(SCHEMA_DATA_SOURCE) DataSource schemaDataSource,\n            JpaProperties jpaProperties) {\n        return entityManagerFactoryBuilder\n                .dataSource(schemaDataSource)\n                .jta(false)\n                .packages(CourseOffering.class)\n                .persistenceUnit(\"spu\")\n                .properties(jpaProperties.getProperties())\n                .build();\n    }\n\n    @Bean(name = SCHEMA_DATA_SOURCE)\n    @ConfigurationProperties(prefix = \"myapp.datasource.test_schema\")\n    public DataSource schemaDataSource() { return new DriverManagerDataSource(); }\n\n    @Bean(name = SCHEMA_TRANSACTION_MANAGER)\n    public PlatformTransactionManager transactionManagerSchema(\n            @Qualifier(SCHEMA_EMF) EntityManagerFactory emfSchemaBean) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        jpaTransactionManager.setEntityManagerFactory(emfSchemaBean);\n        return jpaTransactionManager;\n    }\n}\n</code></pre>\n\n<p><em>Actual Test Class:</em></p>\n\n<pre><code>@RunWith(SpringRunner.class) // required for all spring tests\n@DataJpaTest(excludeAutoConfiguration = {TestDatabaseAutoConfiguration.class, DataSourceAutoConfiguration.class}) // this stops the default data source and database being configured.\n@SqlConfig(dataSource = TestDataSourceConfig.SCHEMA_DATA_SOURCE, transactionManager = SCHEMA_TRANSACTION_MANAGER, transactionMode = SqlConfig.TransactionMode.ISOLATED) // make sure the @Sql statements are run using the SCHEMA datasource and txManager in an isolated way so as not to cause problems when running test methods requiring these statements to be run.\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE, classes = {TestDataSourceConfig.class})\n@TestExecutionListeners({ \n    SqlScriptsTestExecutionListener.class, // enables the @Sql script annotations to work.\n    SpringBootDependencyInjectionTestExecutionListener.class, // injects spring components into the test (i.e. the EntityManager)\n    TransactionalTestExecutionListener.class}) // I have this here even though the @Transactional annotations don't exist yet as I plan on using them in further tests.\npublic class NotificationTypeEnumTest {\n\n    @PersistenceContext(unitName = \"pu\") // required to inject the correct EntityManager\n    private EntityManager em;\n\n    // these statements are \n    @Test\n    @Sql(statements = {\"INSERT INTO MYAPP_ENUM (ENUM_ID, \\\"TYPE\\\", \\\"VALUE\\\") VALUES (MYAPP_ENUM_ID_SEQ.nextval, '\" + NotificationTypeEnum.DTYPE + \"', 'foo')\"}, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)\n    @Sql(statements = {\"DELETE FROM MYAPP_ENUM\"}, executionPhase = Sql.ExecutionPhase.AFTER_TEST_METHOD)\n    public void canFetchNotificationTypeEnum() throws Exception {\n        TypedQuery&lt;NotificationTypeEnum&gt; query = em.createQuery(\"select a from NotificationTypeEnum a\", NotificationTypeEnum.class); // notification type is just a subclass of the BaseEnum type\n        NotificationTypeEnum result = query.getSingleResult();\n        assertEquals(\"foo\", result.getValue());\n        assertEquals(NotificationTypeEnum.DTYPE, result.getConfigType());\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><em>noteworthy classes:</em></p>\n\n<ul>\n<li><code>EntityManagerFactoryBuilder</code> - I don't like factory factories, but this one served me well in creating the correct implementation of EntityManagerFactory without depending on any hibernate specific classes. may be injected with <code>@Autowired</code>. The builder bean itself is configured through the <code>HibernateJpaAutoConfiguration</code> class (extends <code>JpaBaseConfiguration</code>) (imported by <code>@DataJpaTest</code>).</li>\n<li><code>JpaProperties</code> - useful for maintaining <code>application.properties</code> config in the resulting entitymanagerfactories. enabled through the <code>@EnableConfigurationProperties(JpaProperties.class)</code> annotation above this config class.</li>\n<li><code>@PersistenceContext(unitName = \"...\")</code> - I can inject the correct <code>EntityManager</code> in my test class with this annotation.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":418176,"reputation":356,"user_id":3256694,"display_name":"hmehandi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680808484,"creation_date":1680808484,"answer_id":75953001,"question_id":46440300,"body_markdown":"&lt;b&gt;Year #2023 &lt;/b&gt;- \r\n&lt;br/&gt;org.springframework.boot:spring-boot-starter-test:jar:2.7.10:test \r\n\r\nIn my application, there was already configuration files, but the same was not loading, leading to the above error. Found out that HikariConfig was loading the property as value ie. and trying to load database driver as ${primary.datasources.abc.driverClassName} ie\r\n&lt;br/&gt; &lt;b&gt;Configuration File&lt;/b&gt;\r\n&lt;br/&gt;@Configuration\r\n&lt;br/&gt;@EnableJpaRepositories(\r\n&lt;br/&gt;        entityManagerFactoryRef = &quot;preAlertEntityManagerFactory&quot;,\r\n&lt;br/&gt;        transactionManagerRef = &quot;preAlertTransactionManager&quot;,\r\n&lt;br/&gt;        basePackages = &quot;com.abc.repository&quot;\r\n&lt;br/&gt;)\r\n&lt;br/&gt;@SuppressWarnings(value = { &quot;unused&quot; })\r\n&lt;br/&gt;public class ABCDatasourceConfig {\r\n&lt;br/&gt;\r\n&lt;br/&gt;    @Value(&quot;${primary.datasources.abc.driverClassName}&quot;)\r\n&lt;br/&gt;    private String driverClassName;\r\n&lt;br/&gt;\r\n&lt;br/&gt;    @Value(&quot;${primary.datasources.abc.url}&quot;)\r\n&lt;br/&gt;    private String url;\r\n&lt;br/&gt; ....\r\n&lt;br/&gt;\r\n\r\n&lt;b&gt; Junit Test file &lt;/b&gt;\r\n&lt;b&gt; Changes made - as highlighted below - for context initialization &lt;/b&gt;\r\n\r\n@ActiveProfiles(profiles = { &quot;integration&quot; })  // application-integration.yml file\r\n&lt;br/&gt;@Sql(scripts = { &quot;/dml/prealert.sql&quot; }) \r\n&lt;br/&gt;@SpringBootTest\r\n&lt;br/&gt;@DirtiesContext\r\n&lt;b&gt;&lt;br/&gt;@ContextConfiguration(\r\n&lt;br/&gt;        initializers= {ConfigDataApplicationContextInitializer.class}\r\n) &lt;/b&gt;\r\n&lt;br/&gt;class ABC class{\r\n&lt;br/&gt; ......\r\n&lt;br/&gt;}\r\n","title":"@Sql Failed SQL scripts: The configured DataSource [*] (named &#39;fooDS&#39;) is not the one associated with transaction manager [*] (named &#39;fooTM&#39;)","body":"<p><b>Year #2023 </b>-\n<br/>org.springframework.boot:spring-boot-starter-test:jar:2.7.10:test</p>\n<p>In my application, there was already configuration files, but the same was not loading, leading to the above error. Found out that HikariConfig was loading the property as value ie. and trying to load database driver as ${primary.datasources.abc.driverClassName} ie\n<br/> <b>Configuration File</b>\n<br/>@Configuration\n<br/>@EnableJpaRepositories(\n<br/>        entityManagerFactoryRef = &quot;preAlertEntityManagerFactory&quot;,\n<br/>        transactionManagerRef = &quot;preAlertTransactionManager&quot;,\n<br/>        basePackages = &quot;com.abc.repository&quot;\n<br/>)\n<br/>@SuppressWarnings(value = { &quot;unused&quot; })\n<br/>public class ABCDatasourceConfig {\n<br/>\n<br/>    @Value(&quot;${primary.datasources.abc.driverClassName}&quot;)\n<br/>    private String driverClassName;\n<br/>\n<br/>    @Value(&quot;${primary.datasources.abc.url}&quot;)\n<br/>    private String url;\n<br/> ....\n<br/></p>\n<p><b> Junit Test file </b>\n<b> Changes made - as highlighted below - for context initialization </b></p>\n<p>@ActiveProfiles(profiles = { &quot;integration&quot; })  // application-integration.yml file\n<br/>@Sql(scripts = { &quot;/dml/prealert.sql&quot; })\n<br/>@SpringBootTest\n<br/>@DirtiesContext\n<b><br/>@ContextConfiguration(\n<br/>        initializers= {ConfigDataApplicationContextInitializer.class}\n) </b>\n<br/>class ABC class{\n<br/> ......\n<br/>}</p>\n"},{"tags":[],"owner":{"account_id":144130,"reputation":173,"user_id":1759445,"accept_rate":75,"display_name":"Sebasti&#227;o Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686330619,"creation_date":1686330619,"answer_id":76442411,"question_id":46440300,"body_markdown":"When using HibernateTransactionManager, when Hibernate set its datasource there is a code like:\r\n\r\n    if (dataSource instanceof TransactionAwareDataSourceProxy) { \r\n        this.dataSource = ((TransactionAwareDataSourceProxy)dataSource).getTargetDataSource();\r\n\r\nSo, the Hibernate datasource is not the original DataSource that you set. If you use TransactionAwareDataSourceProxy the Hibernate DataSource will be the unwrapped DataSource.\r\n\r\nThe reported error will occur when testing with Spring because of an test of datasource equality in Spring SqlScriptsTestExecutionListener:\r\n\r\n    \t\t\tif (dataSource != null &amp;&amp; dataSourceFromTxMgr != null &amp;&amp; !dataSource.equals(dataSourceFromTxMgr)) {\r\n    \t\t\t\tthrow new IllegalStateException(String.format(&quot;Failed to execute SQL scripts for test context %s: &quot; +\r\n    \t\t\t\t\t\t&quot;the configured DataSource [%s] (named &#39;%s&#39;) is not the one associated with &quot; +\r\n    ...\r\n\r\nSo, a definitive solution in this case is to not wrap your datasources with TransactionAwareDataSourceProxy in your tests with HibernateTransactionManager and Spring test. You don&#39;t need this wrap.","title":"@Sql Failed SQL scripts: The configured DataSource [*] (named &#39;fooDS&#39;) is not the one associated with transaction manager [*] (named &#39;fooTM&#39;)","body":"<p>When using HibernateTransactionManager, when Hibernate set its datasource there is a code like:</p>\n<pre><code>if (dataSource instanceof TransactionAwareDataSourceProxy) { \n    this.dataSource = ((TransactionAwareDataSourceProxy)dataSource).getTargetDataSource();\n</code></pre>\n<p>So, the Hibernate datasource is not the original DataSource that you set. If you use TransactionAwareDataSourceProxy the Hibernate DataSource will be the unwrapped DataSource.</p>\n<p>The reported error will occur when testing with Spring because of an test of datasource equality in Spring SqlScriptsTestExecutionListener:</p>\n<pre><code>            if (dataSource != null &amp;&amp; dataSourceFromTxMgr != null &amp;&amp; !dataSource.equals(dataSourceFromTxMgr)) {\n                throw new IllegalStateException(String.format(&quot;Failed to execute SQL scripts for test context %s: &quot; +\n                        &quot;the configured DataSource [%s] (named '%s') is not the one associated with &quot; +\n...\n</code></pre>\n<p>So, a definitive solution in this case is to not wrap your datasources with TransactionAwareDataSourceProxy in your tests with HibernateTransactionManager and Spring test. You don't need this wrap.</p>\n"}],"owner":{"account_id":380946,"reputation":8170,"user_id":735284,"accept_rate":73,"display_name":"coderatchet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6490,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":46459450,"answer_count":3,"score":5,"last_activity_date":1686330619,"creation_date":1506491134,"question_id":46440300,"body_markdown":"## Update 1 (scroll down)\n\n---\n\n___The setup is as follows:___\n\nOur application database is constructed and used by two separate users:\n\n- __SCHEMA__ - User that has authority to create and grant permissions on tables and \n- __APP__ - User who is granted permissions (INSERT, UPDATE, DELETE, SELECT) (by __SCHEMA__) for above tables to be used.\n\n&gt; This enables us to lock any schema changes until needed so no profound changes happen through the app user.\n\n---\n\nI am running integration tests with a live Oracle database that contains both these users. on the class itself, I use the `@SqlConfig(dataSource = &quot;schemaDataSource&quot;, transactionManager = &quot;transactionManagerSchema&quot;)`.\n\nOn the test method I place two `@Sql` that fail because in the `SqlScriptsTestExecutionListener` class, the transaction is not managing the same datasource. (hence the error message further below).\n\nI&#39;ve tried setting the datasource to the transaction manager manually as shown in my config class below, **however some unknown process seems to override it every time**. (My best guess is through the `@DataJpaTest` annotation but I don&#39;t know exactly which of the [11 Auto Configurations][auto-conf] does it, as you can see I&#39;ve already disabled a couple with no effect).\n\n_Test Class_:\n\n    @RunWith(SpringRunner.class)\n    @DataJpaTest(excludeAutoConfiguration = {TestDatabaseAutoConfiguration.class, DataSourceAutoConfiguration.class})\n    @FlywayTest\n    @SqlConfig(dataSource = TestDataSourceConfig.SCHEMA_DATA_SOURCE, transactionManager = &quot;transactionManagerSchema&quot;)\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE, classes = {TestDataSourceConfig.class, TestFlywayConfig.class})\n    @EntityScan(basePackageClasses = BaseEnum.class)\n    public class NotificationTypeEnumTest {\n\n        @Autowired\n        private EntityManager em;\n\n        @Test\n        @Sql(statements = {&quot;INSERT INTO MYAPP_ENUM (ENUM_ID, \\&quot;TYPE\\&quot;, \\&quot;VALUE\\&quot;) VALUES (MYAPP_ENUM_ID_SEQ.nextval, &#39;&quot; + NotificationTypeEnum.DTYPE + &quot;&#39;, &#39;foo&#39;)&quot;}, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)\n        @Sql(statements = {&quot;DELETE FROM MYAPP_ENUM&quot;}, executionPhase = Sql.ExecutionPhase.AFTER_TEST_METHOD)\n        public void canFetchNotificationTypeEnum() throws Exception {\n            TypedQuery&lt;NotificationTypeEnum&gt; query = em.createQuery(&quot;select a from NotificationTypeEnum a&quot;, NotificationTypeEnum.class);\n            NotificationTypeEnum result = query.getSingleResult();\n            assertEquals(&quot;foo&quot;, result.getValue());\n            assertEquals(NotificationTypeEnum.DTYPE, result.getConfigType());\n        }\n    }\n\n_DataSource and TM config_:\n\n    @Slf4j @Configuration @EnableTransactionManagement\n    public class TestDataSourceConfig {\n        public static final String SCHEMA_DATA_SOURCE = &quot;schemaDataSource&quot;;\n        public static final String SCHEMA_TRANSACTION_MANAGER = &quot;schemaTransactionManager&quot;;\n\n        /*Main Datasource and supporting beans*/\n\n        @Bean @Primary @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n        public DataSource dataSource() { return new DriverManagerDataSource(); }\n\n        @Bean @Primary @Autowired\n        public PlatformTransactionManager transactionManager(EntityManagerFactory emf) { return new JpaTransactionManager(emf); }\n\n        @Bean(name = SCHEMA_DATA_SOURCE) @ConfigurationProperties(prefix = &quot;myapp.datasource.test_schema&quot;)\n        public DataSource schemaDataSource() { return new DriverManagerDataSource(); }\n\n        @Bean(name = SCHEMA_TRANSACTION_MANAGER) @Autowired\n        public PlatformTransactionManager transactionManagerSchema(@Qualifier(SCHEMA_DATA_SOURCE) DataSource dataSource) {\n            JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n            jpaTransactionManager.setDataSource(dataSource);\n            return jpaTransactionManager;\n        }\n    }\n\nThe full error that I couldn&#39;t fit in the title is: \n\n    java.lang.IllegalStateException: Failed to execute SQL scripts for test context\n    ...\n    SOME LONG STACK TRACE\n    ...\n    the configured DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource] (named &#39;schemaDataSource&#39;) is not the one associated with transaction manager [org.springframework.orm.jpa.JpaTransactionManager] (named &#39;transactionManagerSchema&#39;).\n\n---\n\nWhen there is a single `DataSource`, it appears the Spring auto-configuration model works fine, however, as soon as there are 2 or more, the assumptions break down and the programmer needs to manually fill in the sudden (plentiful) gaps in configuration required.\n\n__Am I missing some fundamental understanding surrounding DataSources and TransactionManagers?__\n\n---\n\n## Update 1\n\nAfter some debugging, I have discovered the `afterPropertiesSet()` method is being called on the bean I created when the TransactionManager is retrieved for use with the `@Sql` script annotation. This causes whatever `EntityManagerFactory` it owns (i.e. `JpaTransactionManager.entityManagerFactory`) to set the datasource according to its configured `EntityManagerFactoryInfo.getDataSource()`. The `EntityManagerFactory` itself is being set as a result of the `JpaTransactionManager.setBeanFactory` method being called (as it implements `BeanFactoryAware`).\n\nhere is the spring code:\n\n    // JpaTransactionManager.java\n    @Override\n    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n        if (getEntityManagerFactory() == null) {\n            if (!(beanFactory instanceof ListableBeanFactory)) {\n                throw new IllegalStateException(&quot;Cannot retrieve EntityManagerFactory by persistence unit name &quot; +\n                        &quot;in a non-listable BeanFactory: &quot; + beanFactory);\n            }\n            ListableBeanFactory lbf = (ListableBeanFactory) beanFactory;\n            setEntityManagerFactory(EntityManagerFactoryUtils.findEntityManagerFactory(lbf, getPersistenceUnitName()));\n        }\n    }\n\nI then tried creating my own EntityManagerFactory bean to attempt to inject it into my created transaction manager but this seems to be opening up Hibernate Specific classes and I wish to stay abstracted at the `JPA` level. As well as it being difficult to configure at first glance.\n\n[auto-conf]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#test-auto-configuration","title":"@Sql Failed SQL scripts: The configured DataSource [*] (named &#39;fooDS&#39;) is not the one associated with transaction manager [*] (named &#39;fooTM&#39;)","body":"<h2>Update 1 (scroll down)</h2>\n<hr />\n<p><em><strong>The setup is as follows:</strong></em></p>\n<p>Our application database is constructed and used by two separate users:</p>\n<ul>\n<li><strong>SCHEMA</strong> - User that has authority to create and grant permissions on tables and</li>\n<li><strong>APP</strong> - User who is granted permissions (INSERT, UPDATE, DELETE, SELECT) (by <strong>SCHEMA</strong>) for above tables to be used.</li>\n</ul>\n<blockquote>\n<p>This enables us to lock any schema changes until needed so no profound changes happen through the app user.</p>\n</blockquote>\n<hr />\n<p>I am running integration tests with a live Oracle database that contains both these users. on the class itself, I use the <code>@SqlConfig(dataSource = &quot;schemaDataSource&quot;, transactionManager = &quot;transactionManagerSchema&quot;)</code>.</p>\n<p>On the test method I place two <code>@Sql</code> that fail because in the <code>SqlScriptsTestExecutionListener</code> class, the transaction is not managing the same datasource. (hence the error message further below).</p>\n<p>I've tried setting the datasource to the transaction manager manually as shown in my config class below, <strong>however some unknown process seems to override it every time</strong>. (My best guess is through the <code>@DataJpaTest</code> annotation but I don't know exactly which of the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#test-auto-configuration\" rel=\"nofollow noreferrer\">11 Auto Configurations</a> does it, as you can see I've already disabled a couple with no effect).</p>\n<p><em>Test Class</em>:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest(excludeAutoConfiguration = {TestDatabaseAutoConfiguration.class, DataSourceAutoConfiguration.class})\n@FlywayTest\n@SqlConfig(dataSource = TestDataSourceConfig.SCHEMA_DATA_SOURCE, transactionManager = &quot;transactionManagerSchema&quot;)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE, classes = {TestDataSourceConfig.class, TestFlywayConfig.class})\n@EntityScan(basePackageClasses = BaseEnum.class)\npublic class NotificationTypeEnumTest {\n\n    @Autowired\n    private EntityManager em;\n\n    @Test\n    @Sql(statements = {&quot;INSERT INTO MYAPP_ENUM (ENUM_ID, \\&quot;TYPE\\&quot;, \\&quot;VALUE\\&quot;) VALUES (MYAPP_ENUM_ID_SEQ.nextval, '&quot; + NotificationTypeEnum.DTYPE + &quot;', 'foo')&quot;}, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)\n    @Sql(statements = {&quot;DELETE FROM MYAPP_ENUM&quot;}, executionPhase = Sql.ExecutionPhase.AFTER_TEST_METHOD)\n    public void canFetchNotificationTypeEnum() throws Exception {\n        TypedQuery&lt;NotificationTypeEnum&gt; query = em.createQuery(&quot;select a from NotificationTypeEnum a&quot;, NotificationTypeEnum.class);\n        NotificationTypeEnum result = query.getSingleResult();\n        assertEquals(&quot;foo&quot;, result.getValue());\n        assertEquals(NotificationTypeEnum.DTYPE, result.getConfigType());\n    }\n}\n</code></pre>\n<p><em>DataSource and TM config</em>:</p>\n<pre><code>@Slf4j @Configuration @EnableTransactionManagement\npublic class TestDataSourceConfig {\n    public static final String SCHEMA_DATA_SOURCE = &quot;schemaDataSource&quot;;\n    public static final String SCHEMA_TRANSACTION_MANAGER = &quot;schemaTransactionManager&quot;;\n\n    /*Main Datasource and supporting beans*/\n\n    @Bean @Primary @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource dataSource() { return new DriverManagerDataSource(); }\n\n    @Bean @Primary @Autowired\n    public PlatformTransactionManager transactionManager(EntityManagerFactory emf) { return new JpaTransactionManager(emf); }\n\n    @Bean(name = SCHEMA_DATA_SOURCE) @ConfigurationProperties(prefix = &quot;myapp.datasource.test_schema&quot;)\n    public DataSource schemaDataSource() { return new DriverManagerDataSource(); }\n\n    @Bean(name = SCHEMA_TRANSACTION_MANAGER) @Autowired\n    public PlatformTransactionManager transactionManagerSchema(@Qualifier(SCHEMA_DATA_SOURCE) DataSource dataSource) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        jpaTransactionManager.setDataSource(dataSource);\n        return jpaTransactionManager;\n    }\n}\n</code></pre>\n<p>The full error that I couldn't fit in the title is:</p>\n<pre><code>java.lang.IllegalStateException: Failed to execute SQL scripts for test context\n...\nSOME LONG STACK TRACE\n...\nthe configured DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource] (named 'schemaDataSource') is not the one associated with transaction manager [org.springframework.orm.jpa.JpaTransactionManager] (named 'transactionManagerSchema').\n</code></pre>\n<hr />\n<p>When there is a single <code>DataSource</code>, it appears the Spring auto-configuration model works fine, however, as soon as there are 2 or more, the assumptions break down and the programmer needs to manually fill in the sudden (plentiful) gaps in configuration required.</p>\n<p><strong>Am I missing some fundamental understanding surrounding DataSources and TransactionManagers?</strong></p>\n<hr />\n<h2>Update 1</h2>\n<p>After some debugging, I have discovered the <code>afterPropertiesSet()</code> method is being called on the bean I created when the TransactionManager is retrieved for use with the <code>@Sql</code> script annotation. This causes whatever <code>EntityManagerFactory</code> it owns (i.e. <code>JpaTransactionManager.entityManagerFactory</code>) to set the datasource according to its configured <code>EntityManagerFactoryInfo.getDataSource()</code>. The <code>EntityManagerFactory</code> itself is being set as a result of the <code>JpaTransactionManager.setBeanFactory</code> method being called (as it implements <code>BeanFactoryAware</code>).</p>\n<p>here is the spring code:</p>\n<pre><code>// JpaTransactionManager.java\n@Override\npublic void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n    if (getEntityManagerFactory() == null) {\n        if (!(beanFactory instanceof ListableBeanFactory)) {\n            throw new IllegalStateException(&quot;Cannot retrieve EntityManagerFactory by persistence unit name &quot; +\n                    &quot;in a non-listable BeanFactory: &quot; + beanFactory);\n        }\n        ListableBeanFactory lbf = (ListableBeanFactory) beanFactory;\n        setEntityManagerFactory(EntityManagerFactoryUtils.findEntityManagerFactory(lbf, getPersistenceUnitName()));\n    }\n}\n</code></pre>\n<p>I then tried creating my own EntityManagerFactory bean to attempt to inject it into my created transaction manager but this seems to be opening up Hibernate Specific classes and I wish to stay abstracted at the <code>JPA</code> level. As well as it being difficult to configure at first glance.</p>\n"},{"tags":["java","spring-mvc","swagger"],"answers":[{"tags":[],"owner":{"account_id":23977999,"reputation":73,"user_id":17965846,"display_name":"wuttke"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657109841,"creation_date":1657109841,"answer_id":72883433,"question_id":72878154,"body_markdown":"Found a solution that suits me:\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;String&gt; getApplications(@ParameterObject @ModelAttribute ApplicationFilter applicationFilter){return null;}\r\nadd annotation @ParameterObject","title":"@ModelAttribute show in Swagger like body","body":"<p>Found a solution that suits me:</p>\n<pre><code>@GetMapping\npublic ResponseEntity&lt;String&gt; getApplications(@ParameterObject @ModelAttribute ApplicationFilter applicationFilter){return null;}\n</code></pre>\n<p>add annotation @ParameterObject</p>\n"},{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686330569,"creation_date":1686330569,"answer_id":76442400,"question_id":72878154,"body_markdown":"Note that you also annotate your class with `@ParameterObject`, there is no need to to specify that annotation in controller&#39;s arguments.","title":"@ModelAttribute show in Swagger like body","body":"<p>Note that you also annotate your class with <code>@ParameterObject</code>, there is no need to to specify that annotation in controller's arguments.</p>\n"}],"owner":{"account_id":23977999,"reputation":73,"user_id":17965846,"display_name":"wuttke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1629,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72883433,"answer_count":2,"score":2,"last_activity_date":1686330569,"creation_date":1657083781,"question_id":72878154,"body_markdown":"I use `org.springdoc:springdoc-openapi-ui:1.6.9`\r\n\r\nI have controller:\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;String&gt; getApplications(@ModelAttribute ApplicationFilter applicationFilter){return null;}\r\n\r\nAnd have class param:\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class ApplicationFilter {\r\n    \r\n      @Parameter(name = &quot;ids&quot;, required = true)\r\n      private List&lt;Long&gt; ids;\r\n    }\r\n\r\nI need ModelAttribute to be displayed as [parameter fields][1] in Swagger.\r\n\r\n\r\nBut is real show in the form of [body][2]\r\n\r\nIf add `@Schema(name = &quot;This is  field&quot;)` over field - [result][3]\r\n\r\nPlease tell me. What do I need to do so that my @ModelAttribute is displayed as parameter fields?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mvVvL.png\r\n  [2]: https://i.stack.imgur.com/LD8sd.png\r\n  [3]: https://i.stack.imgur.com/MCSoY.png","title":"@ModelAttribute show in Swagger like body","body":"<p>I use <code>org.springdoc:springdoc-openapi-ui:1.6.9</code></p>\n<p>I have controller:</p>\n<pre><code>@GetMapping\npublic ResponseEntity&lt;String&gt; getApplications(@ModelAttribute ApplicationFilter applicationFilter){return null;}\n</code></pre>\n<p>And have class param:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\npublic class ApplicationFilter {\n\n  @Parameter(name = &quot;ids&quot;, required = true)\n  private List&lt;Long&gt; ids;\n}\n</code></pre>\n<p>I need ModelAttribute to be displayed as <a href=\"https://i.stack.imgur.com/mvVvL.png\" rel=\"nofollow noreferrer\">parameter fields</a> in Swagger.</p>\n<p>But is real show in the form of <a href=\"https://i.stack.imgur.com/LD8sd.png\" rel=\"nofollow noreferrer\">body</a></p>\n<p>If add <code>@Schema(name = &quot;This is  field&quot;)</code> over field - <a href=\"https://i.stack.imgur.com/MCSoY.png\" rel=\"nofollow noreferrer\">result</a></p>\n<p>Please tell me. What do I need to do so that my @ModelAttribute is displayed as parameter fields?</p>\n"},{"tags":["java","netbeans","jasper-reports"],"comments":[{"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"score":0,"creation_date":1686312279,"post_id":76440009,"comment_id":134785107,"body_markdown":"You&#39;ll need to post your entire build configuration, but if I had to guess, I&#39;m betting that during the compilation phase of your project, resources might need to be located in a different source folder. For example, maven resources need to be in src/main/resources by default in order to make into the final jar.","body":"You&#39;ll need to post your entire build configuration, but if I had to guess, I&#39;m betting that during the compilation phase of your project, resources might need to be located in a different source folder. For example, maven resources need to be in src/main/resources by default in order to make into the final jar."},{"owner":{"account_id":8976869,"reputation":25,"user_id":7509741,"display_name":"Fikri Fadillah"},"score":0,"creation_date":1686313053,"post_id":76440009,"comment_id":134785282,"body_markdown":"Thank you for replying. Before I post my entire build config, I have a question. Is Java Application must put all of files and folders inside src/&lt;ProjectName&gt;/ ? Example, if my project name is Budget then all of the folder, like Frame/ or Reports/ that i have mentioned earlier must be under src/Budget/ ?","body":"Thank you for replying. Before I post my entire build config, I have a question. Is Java Application must put all of files and folders inside src/&lt;ProjectName&gt;/ ? Example, if my project name is Budget then all of the folder, like Frame/ or Reports/ that i have mentioned earlier must be under src/Budget/ ?"}],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686313402,"creation_date":1686313402,"answer_id":76440215,"question_id":76440009,"body_markdown":"In a standard Java application, all your code and resource files should be within the src directory, at least is you don&#39;t wanna deal with situations like yours anymore. So if your project name is Budget, your structure ideally would look like:\r\n```\r\n- Budget\r\n    - src\r\n        - main\r\n            - java\r\n                - Frame\r\n                    - Finance\r\n                        - Budgeting.java\r\n            - resources\r\n                - Reports\r\n                    - ReportBudgeting.jrxml\r\n```\r\n\r\nso this row should finally work:\r\n```java\r\nInputStream inputStream = getClass().getResourceAsStream(&quot;/Reports/Budgeting.jrxml&quot;);\r\n```\r\n(assuming that /Reports/Budgeting.jrxml is relative to the classpath (and in our case, it should be src/main/resources))","title":"Jasper Report won&#39;t work in JAR file but works fine while developing","body":"<p>In a standard Java application, all your code and resource files should be within the src directory, at least is you don't wanna deal with situations like yours anymore. So if your project name is Budget, your structure ideally would look like:</p>\n<pre><code>- Budget\n    - src\n        - main\n            - java\n                - Frame\n                    - Finance\n                        - Budgeting.java\n            - resources\n                - Reports\n                    - ReportBudgeting.jrxml\n</code></pre>\n<p>so this row should finally work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream inputStream = getClass().getResourceAsStream(&quot;/Reports/Budgeting.jrxml&quot;);\n</code></pre>\n<p>(assuming that /Reports/Budgeting.jrxml is relative to the classpath (and in our case, it should be src/main/resources))</p>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686315137,"creation_date":1686315137,"answer_id":76440448,"question_id":76440009,"body_markdown":"Try just &quot;filename&quot;, it&#39;s part of the configuration settings immutable enumeration of resources.\r\nIf it should be notified in e.g. server.xml settings , it may be getSystemResources is the method required and it returns an **enumeration of  keyname , URL** . The one you are using may be String &quot;name&quot; just straight to resource with its keyname (just file name). Also, the web XML may contain jrxml in &quot;development&quot; mode setting. \r\nNote, probably &quot;name&quot; is file as keyname, URL are &quot;path section&quot; in the enumeration.","title":"Jasper Report won&#39;t work in JAR file but works fine while developing","body":"<p>Try just &quot;filename&quot;, it's part of the configuration settings immutable enumeration of resources.\nIf it should be notified in e.g. server.xml settings , it may be getSystemResources is the method required and it returns an <strong>enumeration of  keyname , URL</strong> . The one you are using may be String &quot;name&quot; just straight to resource with its keyname (just file name). Also, the web XML may contain jrxml in &quot;development&quot; mode setting.\nNote, probably &quot;name&quot; is file as keyname, URL are &quot;path section&quot; in the enumeration.</p>\n"}],"owner":{"account_id":8976869,"reputation":25,"user_id":7509741,"display_name":"Fikri Fadillah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686330083,"answer_count":2,"score":0,"last_activity_date":1686330250,"creation_date":1686311934,"question_id":76440009,"body_markdown":"\r\nI have project structure like this\r\n```\r\n- RootFolder\r\n    - Frame\r\n        - Finance\r\n            - Budgeting.java\r\n    - Reports\r\n        - ReportBudgeting.jrxml\r\n````\r\n\r\nI am using Jasper iReports for reporting. While in NetBeans it works fine. I have included all of the classpaths too. I think the issue where I call the ***.jrxml** file from ***.java file**. I called it like this:\r\n\r\n```\r\nInputStream inputStream = getClass().getResourceAsStream(&quot;/Reports/Budgeting.jrxml&quot;);\r\nJasperDesign design = JRXmlLoader.load(inputStream);\r\nJasperReport report = JasperCompileManager.compileReport(design);\r\n```\r\nAnd I got errors like this:\r\n&gt; net.sf.jasperreports.engine.JRException: java.net.MalformedURLException\r\n\tat net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML\r\n\r\nHow can I fixed this?\r\n\r\nThis is my build configuration\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o5z8Q.png\r\n  [2]: https://i.stack.imgur.com/vfc4Q.png\r\n  [3]: https://i.stack.imgur.com/gSGhe.png\r\n  [4]: https://i.stack.imgur.com/E52ER.png\r\n  [5]: https://i.stack.imgur.com/ITfcl.png","title":"Jasper Report won&#39;t work in JAR file but works fine while developing","body":"<p>I have project structure like this</p>\n<pre><code>- RootFolder\n    - Frame\n        - Finance\n            - Budgeting.java\n    - Reports\n        - ReportBudgeting.jrxml\n</code></pre>\n<p>I am using Jasper iReports for reporting. While in NetBeans it works fine. I have included all of the classpaths too. I think the issue where I call the *<strong>.jrxml</strong> file from *<strong>.java file</strong>. I called it like this:</p>\n<pre><code>InputStream inputStream = getClass().getResourceAsStream(&quot;/Reports/Budgeting.jrxml&quot;);\nJasperDesign design = JRXmlLoader.load(inputStream);\nJasperReport report = JasperCompileManager.compileReport(design);\n</code></pre>\n<p>And I got errors like this:</p>\n<blockquote>\n<p>net.sf.jasperreports.engine.JRException: java.net.MalformedURLException\nat net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML</p>\n</blockquote>\n<p>How can I fixed this?</p>\n<p>This is my build configuration\n<a href=\"https://i.stack.imgur.com/o5z8Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o5z8Q.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/vfc4Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vfc4Q.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/gSGhe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gSGhe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/E52ER.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E52ER.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ITfcl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ITfcl.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","intellij-idea","annotations","annotation-processing","notnull"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686308668,"post_id":76439631,"comment_id":134784435,"body_markdown":"IntelliJ is adding them to assist with internal checks. It&#39;s only for the IDE, the annotations won&#39;t end up in the compiled code.","body":"IntelliJ is adding them to assist with internal checks. It&#39;s only for the IDE, the annotations won&#39;t end up in the compiled code."},{"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686309372,"post_id":76439631,"comment_id":134784528,"body_markdown":"If IntelliJ is adding annotations just for itself, then why does it complain to *me* about them? More importantly, how can I stop IntelliJ from doing this? I did not find anything in the settings.","body":"If IntelliJ is adding annotations just for itself, then why does it complain to <i>me</i> about them? More importantly, how can I stop IntelliJ from doing this? I did not find anything in the settings."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686309663,"post_id":76439631,"comment_id":134784565,"body_markdown":"What do you mean by complaining? It&#39;s giving you a warning, so you can prevent the `NullPointerException` you&#39;ve already identified. IDEs are supposed to help you, that&#39;s what it&#39;s doing.","body":"What do you mean by complaining? It&#39;s giving you a warning, so you can prevent the <code>NullPointerException</code> you&#39;ve already identified. IDEs are supposed to help you, that&#39;s what it&#39;s doing."},{"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686310088,"post_id":76439631,"comment_id":134784649,"body_markdown":"But IntelliJ is not helping, it is producing false positives based on the annotations it should not have added in the first place. The above code is a simplified example to reproduce the problem, based on the netiquette convention to &quot;provide a minimal example that demonstrates the problem&quot;. In my actual code, IntelliJ is placing these annotations in such a way that the unit tests, which should check that the method under test correctly throws a NPE when passing null, are littered with warnings about passing null. I mean, how else are you supposed to write such a test?","body":"But IntelliJ is not helping, it is producing false positives based on the annotations it should not have added in the first place. The above code is a simplified example to reproduce the problem, based on the netiquette convention to &quot;provide a minimal example that demonstrates the problem&quot;. In my actual code, IntelliJ is placing these annotations in such a way that the unit tests, which should check that the method under test correctly throws a NPE when passing null, are littered with warnings about passing null. I mean, how else are you supposed to write such a test?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1686310248,"post_id":76439631,"comment_id":134784676,"body_markdown":"@MartinGeisse Umm, if you embrace these annotations and use them correctly everywhere, you wouldn&#39;t need to write those tests. You&#39;d just need to write tests for where these annotations *can&#39;t* help. Isn&#39;t that awesome?","body":"@MartinGeisse Umm, if you embrace these annotations and use them correctly everywhere, you wouldn&#39;t need to write those tests. You&#39;d just need to write tests for where these annotations <i>can&#39;t</i> help. Isn&#39;t that awesome?"},{"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686310460,"post_id":76439631,"comment_id":134784720,"body_markdown":"That isn&#39;t awesome because it is false. NotNull annotations produce compile-time hints, nothing more. They are not rigorously verified at compile-time, nor at class-loading time, nor at run-time. It is trivial to violate them at run-time. Hence unit tests are absolutely called for if I want to write high-quality code.","body":"That isn&#39;t awesome because it is false. NotNull annotations produce compile-time hints, nothing more. They are not rigorously verified at compile-time, nor at class-loading time, nor at run-time. It is trivial to violate them at run-time. Hence unit tests are absolutely called for if I want to write high-quality code."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686310644,"post_id":76439631,"comment_id":134784757,"body_markdown":"@MartinGeisse You misunderstand me. &quot;It is trivial to violate them at run-time&quot; Then test those &quot;trivial&quot; ways to violate them, instead of testing something that can be caught at compile time like `foo(null)`.","body":"@MartinGeisse You misunderstand me. &quot;It is trivial to violate them at run-time&quot; Then test those &quot;trivial&quot; ways to violate them, instead of testing something that can be caught at compile time like <code>foo(null)</code>."},{"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686310940,"post_id":76439631,"comment_id":134784821,"body_markdown":"Are you suggesting in writing a unit test in a more-complex-than necessary way just to silence a static code analysis? The class under test is defined to throw an NPE when passed null, even in cases when the argument is otherwise ignored, so a unit test would have to test that because it *can* be violated at run-time. If your argument is that &quot;this only happens if there is a bug in the calling class&quot; then yes, that&#39;s the point: Bugs happen, so the class-under-test is defined in such a way to limit the effect, and that behavior should be tested.","body":"Are you suggesting in writing a unit test in a more-complex-than necessary way just to silence a static code analysis? The class under test is defined to throw an NPE when passed null, even in cases when the argument is otherwise ignored, so a unit test would have to test that because it <i>can</i> be violated at run-time. If your argument is that &quot;this only happens if there is a bug in the calling class&quot; then yes, that&#39;s the point: Bugs happen, so the class-under-test is defined in such a way to limit the effect, and that behavior should be tested."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686310989,"post_id":76439631,"comment_id":134784834,"body_markdown":"In that case, you could just turn off the IntelliJ feature... That&#39;s putting the cart before the horse, but you can do if if you really want to.","body":"In that case, you could just turn off the IntelliJ feature... That&#39;s putting the cart before the horse, but you can do if if you really want to."},{"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686311075,"post_id":76439631,"comment_id":134784850,"body_markdown":"Now, your argument would be valid if such a bug in the calling class is rigorously prevented by the language, such as not being able to pass an int for a String, then the need for a unit test would vanish. But this is not the case because, as I said, NotNull is just a hint.","body":"Now, your argument would be valid if such a bug in the calling class is rigorously prevented by the language, such as not being able to pass an int for a String, then the need for a unit test would vanish. But this is not the case because, as I said, NotNull is just a hint."},{"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686311197,"post_id":76439631,"comment_id":134784870,"body_markdown":"I would really like to turn of this &quot;feature&quot;, but as written below, I don&#39;t know how. There seems to be only a switch to turn off analysis of NotNull annotations in general, i.e. ignoring NotNull annotations I have actually placed in my code. But there doesn&#39;t seem to be a switch to prevent IntelliJ from conjuring up its own annotations.","body":"I would really like to turn of this &quot;feature&quot;, but as written below, I don&#39;t know how. There seems to be only a switch to turn off analysis of NotNull annotations in general, i.e. ignoring NotNull annotations I have actually placed in my code. But there doesn&#39;t seem to be a switch to prevent IntelliJ from conjuring up its own annotations."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686321956,"post_id":76439631,"comment_id":134787339,"body_markdown":"In the end, IntelliJ is right in that your code will break when you pass `null` and produces a warning when you pass `null`. It could be worse, e.g. a developer could be obsessed with turning off this justified warning, for incomprehensible reasons.","body":"In the end, IntelliJ is right in that your code will break when you pass <code>null</code> and produces a warning when you pass <code>null</code>. It could be worse, e.g. a developer could be obsessed with turning off this justified warning, for incomprehensible reasons."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686309894,"creation_date":1686309522,"answer_id":76439723,"question_id":76439631,"body_markdown":"These are annotations inferred by IntelliJ IDEA. The IDE sees that you are doing `value.length()`, so it infers that `value` cannot be null. See also [the blog post that introduced this feature][1].\r\n\r\nYou should be able to see a gutter icon looking like a &quot;@&quot;. If you hover over it, it will show you want annotations are inferred:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNotice that there is also `@Contract` in addition to `@NotNull`. See [this post][3] for more about `@Contract`.\r\n\r\nIf you don&#39;t see this, go to Settings -&gt; Editor -&gt; General -&gt; Gutter Icons and turn them on. There are &quot;Inferred nullability annotations&quot; and &quot;Inferred contract annotations&quot;.\r\n\r\nYou can inspect what the actual annotation types of these inferred annotations are, by going into Settings -&gt; Editor -&gt; Inspections -&gt; Java -&gt; Probable bugs -&gt; Nullability and data flow problems, \r\n\r\n[![enter image description here][4]][4]\r\n\r\nGo to the &quot;Options&quot; section on the right, and you&#39;ll see a &quot;Configure Annotations&quot; button. Note that you may need to scroll down.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nUpon clicking the button, you can see and choose the fully-qualified name for the nullable annotations. \r\n\r\n[![enter image description here][6]][6]\r\n\r\nIntelliJ supports such annotations from many different libraries. If you don&#39;t have any installed, you&#39;ll still have the built-in `org.jetbrains.annotations.NotNull`.\r\n\r\nAlso in the Inspections section of the settings, you can disable/enable the reporting of warnings such as the one that you&#39;re getting.\r\n\r\n[![enter image description here][7]][7]\r\n\r\nSee also the [IntelliJ docs][8] on this.\r\n\r\n\r\n  [1]: https://blog.jetbrains.com/idea/2014/10/automatic-notnullnullablecontract-inference-in-intellij-idea-14/\r\n  [2]: https://i.stack.imgur.com/Nm0UDl.png\r\n  [3]: https://stackoverflow.com/q/34620494/5133585\r\n  [4]: https://i.stack.imgur.com/s19zql.png\r\n  [5]: https://i.stack.imgur.com/Q5MGZm.png\r\n  [6]: https://i.stack.imgur.com/ieouFm.png\r\n  [7]: https://i.stack.imgur.com/royq0l.png\r\n  [8]: https://www.jetbrains.com/help/idea/annotating-source-code.html#a2f80d47","title":"How does @NotNull add itself in IntelliJ IDEA?","body":"<p>These are annotations inferred by IntelliJ IDEA. The IDE sees that you are doing <code>value.length()</code>, so it infers that <code>value</code> cannot be null. See also <a href=\"https://blog.jetbrains.com/idea/2014/10/automatic-notnullnullablecontract-inference-in-intellij-idea-14/\" rel=\"nofollow noreferrer\">the blog post that introduced this feature</a>.</p>\n<p>You should be able to see a gutter icon looking like a &quot;@&quot;. If you hover over it, it will show you want annotations are inferred:</p>\n<p><a href=\"https://i.stack.imgur.com/Nm0UDl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nm0UDl.png\" alt=\"enter image description here\" /></a></p>\n<p>Notice that there is also <code>@Contract</code> in addition to <code>@NotNull</code>. See <a href=\"https://stackoverflow.com/q/34620494/5133585\">this post</a> for more about <code>@Contract</code>.</p>\n<p>If you don't see this, go to Settings -&gt; Editor -&gt; General -&gt; Gutter Icons and turn them on. There are &quot;Inferred nullability annotations&quot; and &quot;Inferred contract annotations&quot;.</p>\n<p>You can inspect what the actual annotation types of these inferred annotations are, by going into Settings -&gt; Editor -&gt; Inspections -&gt; Java -&gt; Probable bugs -&gt; Nullability and data flow problems,</p>\n<p><a href=\"https://i.stack.imgur.com/s19zql.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s19zql.png\" alt=\"enter image description here\" /></a></p>\n<p>Go to the &quot;Options&quot; section on the right, and you'll see a &quot;Configure Annotations&quot; button. Note that you may need to scroll down.</p>\n<p><a href=\"https://i.stack.imgur.com/Q5MGZm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q5MGZm.png\" alt=\"enter image description here\" /></a></p>\n<p>Upon clicking the button, you can see and choose the fully-qualified name for the nullable annotations.</p>\n<p><a href=\"https://i.stack.imgur.com/ieouFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ieouFm.png\" alt=\"enter image description here\" /></a></p>\n<p>IntelliJ supports such annotations from many different libraries. If you don't have any installed, you'll still have the built-in <code>org.jetbrains.annotations.NotNull</code>.</p>\n<p>Also in the Inspections section of the settings, you can disable/enable the reporting of warnings such as the one that you're getting.</p>\n<p><a href=\"https://i.stack.imgur.com/royq0l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/royq0l.png\" alt=\"enter image description here\" /></a></p>\n<p>See also the <a href=\"https://www.jetbrains.com/help/idea/annotating-source-code.html#a2f80d47\" rel=\"nofollow noreferrer\">IntelliJ docs</a> on this.</p>\n"}],"owner":{"account_id":3606551,"reputation":1211,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76439723,"answer_count":1,"score":0,"last_activity_date":1686330018,"creation_date":1686308619,"question_id":76439631,"body_markdown":"This sample program exhibits the behavior I do not understand:\r\n\r\n    public class Main {\r\n    \r\n        public static String foo(String value) {\r\n            return &quot;length: &quot; + value.length();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(foo(null));\r\n        }\r\n    \r\n    }\r\n\r\nThe runtime behavior of this problem is clear: It throws a NullPointerException. What is not clear, however, is the warning I get from IntelliJ:\r\n\r\n    Passing &#39;null&#39; argument to parameter annotated as @NotNull \r\n    Main\r\n    @Contract(pure = true)  \r\n    @NotNull  \r\n    public static String foo(\r\n      @NotNull  String value\r\n    )\r\n\r\nThe Contract and NotNull annotations are obviously not in my code. I cannot tell which package they are from since IntelliJ does not support &quot;go to declaration&quot; in the warning tooltip, and I cannot use the normal &quot;go to declaration&quot; because, well, the annotations do not exist in the code.\r\n\r\nThis is a plain new project without any Maven/Gradle build script nor any included libraries, just to rule out any &quot;magic&quot; compile-time plugins that could try to add annotations.\r\n\r\nThis leaves the possibility that @NotNull adds itself. But how? Does it have some meta-annotations that trigger its own annotation processor which adds them to my code? Sadly I cannot even try to find out because I don&#39;t which package they are from.\r\n\r\nWhat exactly is happening here?","title":"How does @NotNull add itself in IntelliJ IDEA?","body":"<p>This sample program exhibits the behavior I do not understand:</p>\n<pre><code>public class Main {\n\n    public static String foo(String value) {\n        return &quot;length: &quot; + value.length();\n    }\n\n    public static void main(String[] args) {\n        System.out.println(foo(null));\n    }\n\n}\n</code></pre>\n<p>The runtime behavior of this problem is clear: It throws a NullPointerException. What is not clear, however, is the warning I get from IntelliJ:</p>\n<pre><code>Passing 'null' argument to parameter annotated as @NotNull \nMain\n@Contract(pure = true)  \n@NotNull  \npublic static String foo(\n  @NotNull  String value\n)\n</code></pre>\n<p>The Contract and NotNull annotations are obviously not in my code. I cannot tell which package they are from since IntelliJ does not support &quot;go to declaration&quot; in the warning tooltip, and I cannot use the normal &quot;go to declaration&quot; because, well, the annotations do not exist in the code.</p>\n<p>This is a plain new project without any Maven/Gradle build script nor any included libraries, just to rule out any &quot;magic&quot; compile-time plugins that could try to add annotations.</p>\n<p>This leaves the possibility that @NotNull adds itself. But how? Does it have some meta-annotations that trigger its own annotation processor which adds them to my code? Sadly I cannot even try to find out because I don't which package they are from.</p>\n<p>What exactly is happening here?</p>\n"},{"tags":["java","azure","java-8","azure-data-explorer"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686100950,"post_id":76419185,"comment_id":134751907,"body_markdown":"Use an older version that supports JDK 8.","body":"Use an older version that supports JDK 8."}],"answers":[{"tags":[],"owner":{"account_id":26331226,"reputation":3286,"user_id":19991670,"display_name":"Pravallika KV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686328347,"creation_date":1686139212,"answer_id":76423086,"question_id":76419185,"body_markdown":"As mentioned in the [MSdoc](https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/get-started/app-set-up?tabs=java#prerequisites),\r\n- you need Java 11 or later versions to connect to kusto using Java.\r\n- And also, you must use Maven 3.6.3 or later versions.\r\n\r\n*I tried to reproduce with Java 8 but got the below error:*\r\n\r\n![enter image description here](https://i.imgur.com/FvT9BBS.png)\r\n\r\n***Code Snippet:***\r\n\r\nI tried with Java 11 and could get the expected results:\r\n```java\r\npublic static void main(String[] args)\r\n  {\r\n    try {\r\n      String clusterURI = &quot;https://pravucluster.eastus.kusto.windows.net&quot;;\r\n      ConnectionStringBuilder stringbuilder = ConnectionStringBuilder.createWithUserPrompt(clusterURI);\r\n\r\n      try (Client kusto_client = ClientFactory.createClient(stringbuilder)) {\r\n        String database = &quot;sampledb&quot;;\r\n        String query = &quot;print dbcolumn=&#39;Hello Pravallika!&#39;&quot;;\r\n        KustoOperationResult kustoresponse = kusto_client.execute(database, query);\r\n\r\n        KustoResultSetTable kustoresults = kustoresponse.getPrimaryResults();\r\n        kustoresults.next();\r\n        System.out.println(kustoresults.getString(&quot;dbcolumn&quot;));\r\n      } catch (Exception e) {\r\n        System.out.println(&quot;Error: &quot; + e.getMessage());\r\n      }\r\n    } catch (Exception e) {\r\n      System.out.println(&quot;Error: &quot; + e.getMessage());\r\n    }\r\n  }\r\n```\r\n**pom.xml:**\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft.azure.kusto&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kusto-data&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft.azure.kusto&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kusto-ingest&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n***Authentication:*** \r\n\r\n![enter image description here](https://i.imgur.com/JNnMuRy.png)\r\n\r\n![enter image description here](https://i.imgur.com/ApHGrwO.png)\r\n\r\n***Response:***\r\n\r\n![enter image description here](https://i.imgur.com/KcuK6Hb.png)\r\n\r\n\r\n","title":"Connect to Kusto using older java version","body":"<p>As mentioned in the <a href=\"https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/get-started/app-set-up?tabs=java#prerequisites\" rel=\"nofollow noreferrer\">MSdoc</a>,</p>\n<ul>\n<li>you need Java 11 or later versions to connect to kusto using Java.</li>\n<li>And also, you must use Maven 3.6.3 or later versions.</li>\n</ul>\n<p><em>I tried to reproduce with Java 8 but got the below error:</em></p>\n<p><img src=\"https://i.imgur.com/FvT9BBS.png\" alt=\"enter image description here\" /></p>\n<p><em><strong>Code Snippet:</strong></em></p>\n<p>I tried with Java 11 and could get the expected results:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args)\n  {\n    try {\n      String clusterURI = &quot;https://pravucluster.eastus.kusto.windows.net&quot;;\n      ConnectionStringBuilder stringbuilder = ConnectionStringBuilder.createWithUserPrompt(clusterURI);\n\n      try (Client kusto_client = ClientFactory.createClient(stringbuilder)) {\n        String database = &quot;sampledb&quot;;\n        String query = &quot;print dbcolumn='Hello Pravallika!'&quot;;\n        KustoOperationResult kustoresponse = kusto_client.execute(database, query);\n\n        KustoResultSetTable kustoresults = kustoresponse.getPrimaryResults();\n        kustoresults.next();\n        System.out.println(kustoresults.getString(&quot;dbcolumn&quot;));\n      } catch (Exception e) {\n        System.out.println(&quot;Error: &quot; + e.getMessage());\n      }\n    } catch (Exception e) {\n      System.out.println(&quot;Error: &quot; + e.getMessage());\n    }\n  }\n</code></pre>\n<p><strong>pom.xml:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.azure.kusto&lt;/groupId&gt;\n    &lt;artifactId&gt;kusto-data&lt;/artifactId&gt;\n    &lt;version&gt;4.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.azure.kusto&lt;/groupId&gt;\n    &lt;artifactId&gt;kusto-ingest&lt;/artifactId&gt;\n    &lt;version&gt;4.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><em><strong>Authentication:</strong></em></p>\n<p><img src=\"https://i.imgur.com/JNnMuRy.png\" alt=\"enter image description here\" /></p>\n<p><img src=\"https://i.imgur.com/ApHGrwO.png\" alt=\"enter image description here\" /></p>\n<p><em><strong>Response:</strong></em></p>\n<p><img src=\"https://i.imgur.com/KcuK6Hb.png\" alt=\"enter image description here\" /></p>\n"},{"tags":[],"owner":{"account_id":6495574,"reputation":495,"user_id":5028293,"display_name":"Ohad Bitton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686140585,"creation_date":1686140585,"answer_id":76423271,"question_id":76419185,"body_markdown":"The Java 11 requirement was introduced in version 4.0.0, please use any version prior to that.\r\nexample:\r\n  \r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;com.microsoft.azure.kusto&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kusto-ingest&lt;/artifactId&gt;\r\n                &lt;version&gt;(,4.0.0)&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n","title":"Connect to Kusto using older java version","body":"<p>The Java 11 requirement was introduced in version 4.0.0, please use any version prior to that.\nexample:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.azure.kusto&lt;/groupId&gt;\n            &lt;artifactId&gt;kusto-ingest&lt;/artifactId&gt;\n            &lt;version&gt;(,4.0.0)&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":12892506,"reputation":3238,"user_id":9324000,"accept_rate":100,"display_name":"superninja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1686328347,"creation_date":1686097591,"question_id":76419185,"body_markdown":"I am trying to connect to kusto from my repo and its using java 8. The prerequisite on the documentation is java 11 or older: https://github.com/Azure/azure-kusto-java\r\n\r\nWhat are the methods to connect to kusto if I am using Java 8?\r\n\r\n    ConnectionStringBuilder csb = ConnectionStringBuilder.createWithAadApplicationCredentials(clusterPath, appId, appKey, authorityId);\r\n    Client kustoClient = ClientFactory.createClient(csb);","title":"Connect to Kusto using older java version","body":"<p>I am trying to connect to kusto from my repo and its using java 8. The prerequisite on the documentation is java 11 or older: <a href=\"https://github.com/Azure/azure-kusto-java\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-kusto-java</a></p>\n<p>What are the methods to connect to kusto if I am using Java 8?</p>\n<pre><code>ConnectionStringBuilder csb = ConnectionStringBuilder.createWithAadApplicationCredentials(clusterPath, appId, appKey, authorityId);\nClient kustoClient = ClientFactory.createClient(csb);\n</code></pre>\n"},{"tags":["java","spring","spring-security","oauth-2.0","spring-oauth2"],"answers":[{"tags":[],"owner":{"account_id":7530953,"reputation":7364,"user_id":5719185,"display_name":"Optio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686327938,"creation_date":1686327938,"answer_id":76442154,"question_id":76442074,"body_markdown":"try this one:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.inMemoryAuthentication()\r\n                .withUser(&quot;name&quot;)\r\n                .password(&quot;{noop}senha&quot;)\r\n                .authorities(&quot;read&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                .csrf().disable()\r\n                .authorizeRequests()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                .httpBasic();\r\n        }\r\n    }","title":"OAuth 2 bad credentials","body":"<p>try this one:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication()\n            .withUser(&quot;name&quot;)\n            .password(&quot;{noop}senha&quot;)\n            .authorities(&quot;read&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .csrf().disable()\n            .authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n            .httpBasic();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28788837,"reputation":1,"user_id":22048683,"display_name":"Matheus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686327938,"creation_date":1686327289,"question_id":76442074,"body_markdown":"I&#39;m getting &quot;bad credentials&quot; when trying to login, no matter the username and password.\r\n\r\nI tried creating a bean for the password, changing the authorizeHttpRequest, and adding an authenticationManager but nothing work\r\n```\r\npackage Config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\nimport static org.springframework.security.config.Customizer.*;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\t\r\n\t@Bean\r\n\tpublic InMemoryUserDetailsManager user() {\r\n\t\treturn new InMemoryUserDetailsManager(\r\n\t\t\t\tUser.withUsername(&quot;name&quot;)\r\n\t\t\t\t\t.password(&quot;{noop}senha&quot;)\r\n\t\t\t\t\t.authorities(&quot;read&quot;)\r\n\t\t\t\t\t.build()\r\n\t\t);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception{\r\n\t\treturn http\r\n\t\t\t\t.csrf(csrf -&gt; csrf.disable())\r\n\t\t\t\t.authorizeHttpRequests(auth -&gt; auth\r\n\t\t\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t\t)\r\n\t\t\t\t.sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n\t\t\t\t.httpBasic(withDefaults())\r\n\t\t\t\t.build();\t\r\n\t}\r\n}\r\n```","title":"OAuth 2 bad credentials","body":"<p>I'm getting &quot;bad credentials&quot; when trying to login, no matter the username and password.</p>\n<p>I tried creating a bean for the password, changing the authorizeHttpRequest, and adding an authenticationManager but nothing work</p>\n<pre><code>package Config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.web.SecurityFilterChain;\n\nimport static org.springframework.security.config.Customizer.*;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    \n    @Bean\n    public InMemoryUserDetailsManager user() {\n        return new InMemoryUserDetailsManager(\n                User.withUsername(&quot;name&quot;)\n                    .password(&quot;{noop}senha&quot;)\n                    .authorities(&quot;read&quot;)\n                    .build()\n        );\n    }\n    \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception{\n        return http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt; auth\n                        .anyRequest().authenticated()\n                )\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .httpBasic(withDefaults())\n                .build();   \n    }\n}\n</code></pre>\n"},{"tags":["java","memory-management","objectinputstream"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679022844,"post_id":75763379,"comment_id":133650338,"body_markdown":"That&#39;s `ObjectInputStream.HandleTable.entries`? Are you sure part of the problem isn&#39;t the `ObjectOutputStream`? That will keep references to the objects it writes unless you call `clear()` on it.","body":"That&#39;s <code>ObjectInputStream.HandleTable.entries</code>? Are you sure part of the problem isn&#39;t the <code>ObjectOutputStream</code>? That will keep references to the objects it writes unless you call <code>clear()</code> on it."},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679074112,"post_id":75763379,"comment_id":133661719,"body_markdown":"But the input is coming from a File written by an ObjectOutputStream in another program.  Do I need to clear that one to have the file formatted differently, or is there another hidden ObjectOutputStream I should clear in this program?","body":"But the input is coming from a File written by an ObjectOutputStream in another program.  Do I need to clear that one to have the file formatted differently, or is there another hidden ObjectOutputStream I should clear in this program?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679191923,"post_id":75763379,"comment_id":133676883,"body_markdown":"You create an `ObjectOutputStream` in the code in your question. `ObjectOutputStream fileOut = ...` That&#39;s the `ObjectOutputStream` I&#39;m referring to.","body":"You create an <code>ObjectOutputStream</code> in the code in your question. <code>ObjectOutputStream fileOut = ...</code> That&#39;s the <code>ObjectOutputStream</code> I&#39;m referring to."},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679197269,"post_id":75763379,"comment_id":133677187,"body_markdown":"@tgdavies `clear()` doesn&#39;t appear to be a visible function of `ObjectOutputStream`. Do you mean `reset()`? I have tried reseting that before and it didn&#39;t fix anything.  I didn&#39;t include that in things I tried because I didn&#39;t think it was related to the ObjectInputStream.  I&#39;ll add it to the list of things I&#39;ve tried.","body":"@tgdavies <code>clear()</code> doesn&#39;t appear to be a visible function of <code>ObjectOutputStream</code>. Do you mean <code>reset()</code>? I have tried reseting that before and it didn&#39;t fix anything.  I didn&#39;t include that in things I tried because I didn&#39;t think it was related to the ObjectInputStream.  I&#39;ll add it to the list of things I&#39;ve tried."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679197336,"post_id":75763379,"comment_id":133677189,"body_markdown":"Oops -- reset, yes","body":"Oops -- reset, yes"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679197674,"post_id":75763379,"comment_id":133677211,"body_markdown":"Can you post a complete, runnable example which reproduces the problem?","body":"Can you post a complete, runnable example which reproduces the problem?"},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679198415,"post_id":75763379,"comment_id":133677259,"body_markdown":"Theoretically, but it&#39;s a fairly complicated project with over a dozen other classes.  I could try to whip up an example that has the same problem, but I&#39;m not certain what is causing this to happen.  MyObject is fairly complicated in my project, could this be caused by a serialization error potentially?","body":"Theoretically, but it&#39;s a fairly complicated project with over a dozen other classes.  I could try to whip up an example that has the same problem, but I&#39;m not certain what is causing this to happen.  MyObject is fairly complicated in my project, could this be caused by a serialization error potentially?"},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679198708,"post_id":75763379,"comment_id":133677277,"body_markdown":"I would think a serialization error would cause the file to be large too though.","body":"I would think a serialization error would cause the file to be large too though."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1679199412,"post_id":75763379,"comment_id":133677331,"body_markdown":"You should close the files, and thus save the many slowing flushes that are not needed then. Look into _try-with-resources_. The error might be that every object holds other objects. Serializing an array of objects would then help. MyObject best be an isolated class.","body":"You should close the files, and thus save the many slowing flushes that are not needed then. Look into <i>try-with-resources</i>. The error might be that every object holds other objects. Serializing an array of objects would then help. MyObject best be an isolated class."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679199710,"post_id":75763379,"comment_id":133677356,"body_markdown":"The references in `entries` stay there until the object has finished serialisation -- are you serialising an object graph? As @JoopEggen says -- make MyObject isolated.","body":"The references in <code>entries</code> stay there until the object has finished serialisation -- are you serialising an object graph? As @JoopEggen says -- make MyObject isolated."},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679209617,"post_id":75763379,"comment_id":133678022,"body_markdown":"@JoopEggan The time to flush here isn&#39;t critical, the processing is quite complex.  Normally, I flush every 20 or so items.  The flush is there because I was having memory issues and I wanted to make sure that the object wasn&#39;t being referenced anymore.","body":"@JoopEggan The time to flush here isn&#39;t critical, the processing is quite complex.  Normally, I flush every 20 or so items.  The flush is there because I was having memory issues and I wanted to make sure that the object wasn&#39;t being referenced anymore."},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679209788,"post_id":75763379,"comment_id":133678038,"body_markdown":"The MyObject class contains a tree of objects in it.  I don&#39;t believe there are any loops, but wouldn&#39;t that cause the ObjectOutputStream in the previous object to either hang or write giant files?  Or cause the in.readObject() to never finish?  Because readObject finishes fairly promptly and the process happens about 90 times before there are memory problems.","body":"The MyObject class contains a tree of objects in it.  I don&#39;t believe there are any loops, but wouldn&#39;t that cause the ObjectOutputStream in the previous object to either hang or write giant files?  Or cause the in.readObject() to never finish?  Because readObject finishes fairly promptly and the process happens about 90 times before there are memory problems."},{"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"score":0,"creation_date":1679211149,"post_id":75763379,"comment_id":133678169,"body_markdown":"The issue with using an array of MyObjects is that the process function adds a ton of data to the MyObject, so I need to not have them all in memory at once or I run out of heap space.  In my actual program, I close the files before I leave the function, but the program runs in to problems before that has a chance to happen.","body":"The issue with using an array of MyObjects is that the process function adds a ton of data to the MyObject, so I need to not have them all in memory at once or I run out of heap space.  In my actual program, I close the files before I leave the function, but the program runs in to problems before that has a chance to happen."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686234819,"post_id":75763379,"comment_id":134773901,"body_markdown":"I read your last sentence “I also added resets to the `ObjectOutputStream` that wrote the file `inputFile`” and of course, would like to know whether this made a difference. It should, as that’s the intended way to tell that there should be no back references.","body":"I read your last sentence “I also added resets to the <code>ObjectOutputStream</code> that wrote the file <code>inputFile</code>” and of course, would like to know whether this made a difference. It should, as that’s the intended way to tell that there should be no back references."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686327865,"creation_date":1686327536,"answer_id":76442103,"question_id":75763379,"body_markdown":"You can not clear back-references on an `ObjectInputStream`, as the `ObjectInputStream` must be prepared to handle the back-references of the incoming data, as produced by the writing side. That’s why *the writing side* is responsible for calling `reset()`, to enforce that no back-references may occur after this point.\r\n\r\nNote that this data sharing even applies to the class descriptors of the stored instances, so a hypothetical way to reset the input stream not matching the output stream would break as soon as you try to read the next instance of `MyObject`, as it has a back-reference to the previously written `MyObject.class`.\r\n\r\nThis also implies that calling `reset()` can produce significantly bigger files, as even if the `MyObject` instances weren’t shared anyway, there might be more shared data than you were aware of, which will become duplicated after `reset()`.\r\n\r\nWhen you call `readUnshared()`, you will enforce that the stream does not store a back-reference, but when it is not paired with a `writeUnshared()` on the producing side, there is the risk that the writing side did write the reference again, which will produce an exception on the reading side.\r\n\r\n---\r\n\r\nThe following program demonstrates that using either, `reset()` or `readUnshared()`, will have the intended effect of not maintaining references in the `ObjectInputStream`:\r\n\r\n```java\r\npublic class Main {\r\n    static class MyObject implements Serializable {}\r\n  \r\n    public static void main(String[] args) throws Exception {\r\n        for(int run = 0; run &lt; 3; run++) {\r\n            boolean withReset = run == 1, readUnshared = run == 2;\r\n            System.out.println(withReset? &quot; ** with reset&quot;:\r\n                    readUnshared? &quot; ** with readUnshared&quot;: &quot; ** without reset&quot;);\r\n            ByteArrayOutputStream o = new ByteArrayOutputStream();\r\n            try(ObjectOutputStream os = new ObjectOutputStream(o)) {\r\n                for(int i = 0; i &lt; 10; i++) {\r\n                    os.writeObject(new MyObject());\r\n                    if(withReset) os.reset();\r\n                }\r\n            }\r\n            System.out.println(o.size() + &quot; bytes&quot;);\r\n            ReferenceQueue&lt;MyObject&gt; q = new ReferenceQueue&lt;&gt;();\r\n            Set&lt;WeakReference&lt;MyObject&gt;&gt; refs = new HashSet&lt;&gt;();\r\n            try(ObjectInputStream is = new ObjectInputStream(\r\n                                  new ByteArrayInputStream(o.toByteArray()))) {\r\n                for(int i = 0; i &lt; 10; i++) {\r\n                  MyObject t = (MyObject)\r\n                      (readUnshared? is.readUnshared(): is.readObject());\r\n                  System.out.println(&quot;read &quot; + t);\r\n                  refs.add(new WeakReference&lt;MyObject&gt;(t, q));\r\n                  t = null;\r\n                  System.gc();\r\n                  for(;;) {\r\n                      Reference&lt;?&gt; r = q.remove(100);\r\n                      if(r == null) break;\r\n                      System.out.println(&quot;One MyObject garbage collected&quot;);\r\n                      refs.remove(r);\r\n                  }\r\n                }\r\n            }\r\n            System.out.println(&quot;ObjectInputStream close&quot;);\r\n            System.gc();\r\n            for(;;) {\r\n                Reference&lt;?&gt; r = q.remove(100);\r\n                if(r == null) break;\r\n                System.out.println(&quot;One MyObject garbage collected&quot;);\r\n                refs.remove(r);\r\n            }\r\n            if(!refs.isEmpty()) {\r\n                System.out.println(refs.size() + &quot; MyObject(s) not collected&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nwhich will print\r\n\r\n```none\r\n ** without reset\r\n88 bytes\r\nread Main$MyObject@5010be6\r\nread Main$MyObject@7daf6ecc\r\nread Main$MyObject@238e0d81\r\nread Main$MyObject@377dca04\r\nread Main$MyObject@21b8d17c\r\nread Main$MyObject@5910e440\r\nread Main$MyObject@533ddba\r\nread Main$MyObject@7a07c5b4\r\nread Main$MyObject@3d646c37\r\nread Main$MyObject@5a10411\r\nObjectInputStream close\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\nOne MyObject garbage collected\r\n\r\n ** with reset\r\n314 bytes\r\nread Main$MyObject@3eb07fd3\r\nread Main$MyObject@69d0a921\r\nOne MyObject garbage collected\r\nread Main$MyObject@799f7e29\r\nOne MyObject garbage collected\r\nread Main$MyObject@277050dc\r\nOne MyObject garbage collected\r\nread Main$MyObject@7aec35a\r\nOne MyObject garbage collected\r\nread Main$MyObject@42110406\r\nOne MyObject garbage collected\r\nread Main$MyObject@22d8cfe0\r\nOne MyObject garbage collected\r\nread Main$MyObject@1de0aca6\r\nOne MyObject garbage collected\r\nread Main$MyObject@41906a77\r\nOne MyObject garbage collected\r\nread Main$MyObject@5387f9e0\r\nOne MyObject garbage collected\r\nObjectInputStream close\r\nOne MyObject garbage collected\r\n\r\n ** with readUnshared\r\n88 bytes\r\nread Main$MyObject@5b37e0d2\r\nOne MyObject garbage collected\r\nread Main$MyObject@5a2e4553\r\nOne MyObject garbage collected\r\nread Main$MyObject@6659c656\r\nOne MyObject garbage collected\r\nread Main$MyObject@45ff54e6\r\nOne MyObject garbage collected\r\nread Main$MyObject@bebdb06\r\nOne MyObject garbage collected\r\nread Main$MyObject@45283ce2\r\nOne MyObject garbage collected\r\nread Main$MyObject@7591083d\r\nOne MyObject garbage collected\r\nread Main$MyObject@736e9adb\r\nOne MyObject garbage collected\r\nread Main$MyObject@108c4c35\r\nOne MyObject garbage collected\r\nread Main$MyObject@4bf558aa\r\nOne MyObject garbage collected\r\nObjectInputStream close\r\n```\r\n&lt;sup&gt;[Demo on tio.run]&lt;/sup&gt;\r\n\r\nOne interesting point is that `readUnshared()` will not maintain a reference in the first place, whereas the reset will be performed on the reading side when encountering the reset marker on the next read operation, so the garbage collection is one object behind, compared to the `readUnshared()` approach. Further, as predicted, the serialized data is much bigger when using `reset()`.\r\n\r\n---\r\nSo, the best option for your scenario, is to use `writeUnshared` on the producing side, paired with `readUnshared` on the reading side.\r\n\r\n[Demo on tio.run]: https://tio.run/##rVVNb9swDL3nV3A5yU1ntNstSVtsQIHtMBRrMOww7CA7TKJUllJJbpYW@e0p5djxR@x2w8pLLJF8pN4TlSV/4O@X07udSFbaOFjSOhQ6PBn1qjuSq3locBbe4gwNqhhf839PMe0K@on8rgModUKGX7hdTNC1ePzubpVGUsQQS24tfONCwVMPyKzjrtzf3ERLjB0QhsQElbMwQSO4FI88kghPW0rK8nK8PP1BiykkhMomzgg1//UbuJnbANzC6LWF6z8xrpzQRVVvM22YUA5MquACzkbZxxg@Zh@DQVAJ9RZpLZErWAu3uEWLjpKy1As4PwWDfPpD2QU3OC0dH0Y1iMnGOkxCnbpwRV06qdgB7Qr6cHKSoRMYbfSHtdzCqoXqOeV@f1g6qFiOF9Sb@bxx@MkYvrlJ3Sp1xBvyBDQ1r3Dd7mUNCGc2bC9YHcPmIMc@poMmr1UpxF4IQTKc@99jFQrTNlwb4XBfgvlqxeVhQaPNwsSspDvwCBkvrCV62@tetYioQysekQUwIN4jYs42ya5P2Lho9RLuc6oaAZfNrmiGxrUJLDEuSd9ZQXk@hccApVZfVSmVqEtVcbFWCutWuyjVXB06fXCQHm8i@uFx8JPHilXQ0SerD4rwapcbLBgWWy9emhax@z6JdB6Aa03xYoR8Os3uZIdkzJ3CfXtFfziVSvlCN/OYtaZ6QkejrompXMLxFd0ZqnNPBCT6Adn52VnHzGRTY/xb5psKIKLT33WFtrF1o7BUbs5NxOcIsZaS1vRSdZbNaMzbM61R2/8d2/7xPMRSW2w21Ul7N@H/SvVfkfw29L5EbJ0yaupdFi3sdbJyfpBbjtrSVZZUeRIPLzP9ISvtuvt7VbJK/D5229vuds8","title":"Clear entries on ObjectInputStream in Java -- memory issue","body":"<p>You can not clear back-references on an <code>ObjectInputStream</code>, as the <code>ObjectInputStream</code> must be prepared to handle the back-references of the incoming data, as produced by the writing side. That’s why <em>the writing side</em> is responsible for calling <code>reset()</code>, to enforce that no back-references may occur after this point.</p>\n<p>Note that this data sharing even applies to the class descriptors of the stored instances, so a hypothetical way to reset the input stream not matching the output stream would break as soon as you try to read the next instance of <code>MyObject</code>, as it has a back-reference to the previously written <code>MyObject.class</code>.</p>\n<p>This also implies that calling <code>reset()</code> can produce significantly bigger files, as even if the <code>MyObject</code> instances weren’t shared anyway, there might be more shared data than you were aware of, which will become duplicated after <code>reset()</code>.</p>\n<p>When you call <code>readUnshared()</code>, you will enforce that the stream does not store a back-reference, but when it is not paired with a <code>writeUnshared()</code> on the producing side, there is the risk that the writing side did write the reference again, which will produce an exception on the reading side.</p>\n<hr />\n<p>The following program demonstrates that using either, <code>reset()</code> or <code>readUnshared()</code>, will have the intended effect of not maintaining references in the <code>ObjectInputStream</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    static class MyObject implements Serializable {}\n  \n    public static void main(String[] args) throws Exception {\n        for(int run = 0; run &lt; 3; run++) {\n            boolean withReset = run == 1, readUnshared = run == 2;\n            System.out.println(withReset? &quot; ** with reset&quot;:\n                    readUnshared? &quot; ** with readUnshared&quot;: &quot; ** without reset&quot;);\n            ByteArrayOutputStream o = new ByteArrayOutputStream();\n            try(ObjectOutputStream os = new ObjectOutputStream(o)) {\n                for(int i = 0; i &lt; 10; i++) {\n                    os.writeObject(new MyObject());\n                    if(withReset) os.reset();\n                }\n            }\n            System.out.println(o.size() + &quot; bytes&quot;);\n            ReferenceQueue&lt;MyObject&gt; q = new ReferenceQueue&lt;&gt;();\n            Set&lt;WeakReference&lt;MyObject&gt;&gt; refs = new HashSet&lt;&gt;();\n            try(ObjectInputStream is = new ObjectInputStream(\n                                  new ByteArrayInputStream(o.toByteArray()))) {\n                for(int i = 0; i &lt; 10; i++) {\n                  MyObject t = (MyObject)\n                      (readUnshared? is.readUnshared(): is.readObject());\n                  System.out.println(&quot;read &quot; + t);\n                  refs.add(new WeakReference&lt;MyObject&gt;(t, q));\n                  t = null;\n                  System.gc();\n                  for(;;) {\n                      Reference&lt;?&gt; r = q.remove(100);\n                      if(r == null) break;\n                      System.out.println(&quot;One MyObject garbage collected&quot;);\n                      refs.remove(r);\n                  }\n                }\n            }\n            System.out.println(&quot;ObjectInputStream close&quot;);\n            System.gc();\n            for(;;) {\n                Reference&lt;?&gt; r = q.remove(100);\n                if(r == null) break;\n                System.out.println(&quot;One MyObject garbage collected&quot;);\n                refs.remove(r);\n            }\n            if(!refs.isEmpty()) {\n                System.out.println(refs.size() + &quot; MyObject(s) not collected&quot;);\n            }\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n<p>which will print</p>\n<pre class=\"lang-none prettyprint-override\"><code> ** without reset\n88 bytes\nread Main$MyObject@5010be6\nread Main$MyObject@7daf6ecc\nread Main$MyObject@238e0d81\nread Main$MyObject@377dca04\nread Main$MyObject@21b8d17c\nread Main$MyObject@5910e440\nread Main$MyObject@533ddba\nread Main$MyObject@7a07c5b4\nread Main$MyObject@3d646c37\nread Main$MyObject@5a10411\nObjectInputStream close\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\nOne MyObject garbage collected\n\n ** with reset\n314 bytes\nread Main$MyObject@3eb07fd3\nread Main$MyObject@69d0a921\nOne MyObject garbage collected\nread Main$MyObject@799f7e29\nOne MyObject garbage collected\nread Main$MyObject@277050dc\nOne MyObject garbage collected\nread Main$MyObject@7aec35a\nOne MyObject garbage collected\nread Main$MyObject@42110406\nOne MyObject garbage collected\nread Main$MyObject@22d8cfe0\nOne MyObject garbage collected\nread Main$MyObject@1de0aca6\nOne MyObject garbage collected\nread Main$MyObject@41906a77\nOne MyObject garbage collected\nread Main$MyObject@5387f9e0\nOne MyObject garbage collected\nObjectInputStream close\nOne MyObject garbage collected\n\n ** with readUnshared\n88 bytes\nread Main$MyObject@5b37e0d2\nOne MyObject garbage collected\nread Main$MyObject@5a2e4553\nOne MyObject garbage collected\nread Main$MyObject@6659c656\nOne MyObject garbage collected\nread Main$MyObject@45ff54e6\nOne MyObject garbage collected\nread Main$MyObject@bebdb06\nOne MyObject garbage collected\nread Main$MyObject@45283ce2\nOne MyObject garbage collected\nread Main$MyObject@7591083d\nOne MyObject garbage collected\nread Main$MyObject@736e9adb\nOne MyObject garbage collected\nread Main$MyObject@108c4c35\nOne MyObject garbage collected\nread Main$MyObject@4bf558aa\nOne MyObject garbage collected\nObjectInputStream close\n</code></pre>\n<p><sup><a href=\"https://tio.run/##rVVNb9swDL3nV3A5yU1ntNstSVtsQIHtMBRrMOww7CA7TKJUllJJbpYW@e0p5djxR@x2w8pLLJF8pN4TlSV/4O@X07udSFbaOFjSOhQ6PBn1qjuSq3locBbe4gwNqhhf839PMe0K@on8rgModUKGX7hdTNC1ePzubpVGUsQQS24tfONCwVMPyKzjrtzf3ERLjB0QhsQElbMwQSO4FI88kghPW0rK8nK8PP1BiykkhMomzgg1//UbuJnbANzC6LWF6z8xrpzQRVVvM22YUA5MquACzkbZxxg@Zh@DQVAJ9RZpLZErWAu3uEWLjpKy1As4PwWDfPpD2QU3OC0dH0Y1iMnGOkxCnbpwRV06qdgB7Qr6cHKSoRMYbfSHtdzCqoXqOeV@f1g6qFiOF9Sb@bxx@MkYvrlJ3Sp1xBvyBDQ1r3Dd7mUNCGc2bC9YHcPmIMc@poMmr1UpxF4IQTKc@99jFQrTNlwb4XBfgvlqxeVhQaPNwsSspDvwCBkvrCV62@tetYioQysekQUwIN4jYs42ya5P2Lho9RLuc6oaAZfNrmiGxrUJLDEuSd9ZQXk@hccApVZfVSmVqEtVcbFWCutWuyjVXB06fXCQHm8i@uFx8JPHilXQ0SerD4rwapcbLBgWWy9emhax@z6JdB6Aa03xYoR8Os3uZIdkzJ3CfXtFfziVSvlCN/OYtaZ6QkejrompXMLxFd0ZqnNPBCT6Adn52VnHzGRTY/xb5psKIKLT33WFtrF1o7BUbs5NxOcIsZaS1vRSdZbNaMzbM61R2/8d2/7xPMRSW2w21Ul7N@H/SvVfkfw29L5EbJ0yaupdFi3sdbJyfpBbjtrSVZZUeRIPLzP9ISvtuvt7VbJK/D5229vuds8\" rel=\"nofollow noreferrer\">Demo on tio.run</a></sup></p>\n<p>One interesting point is that <code>readUnshared()</code> will not maintain a reference in the first place, whereas the reset will be performed on the reading side when encountering the reset marker on the next read operation, so the garbage collection is one object behind, compared to the <code>readUnshared()</code> approach. Further, as predicted, the serialized data is much bigger when using <code>reset()</code>.</p>\n<hr />\n<p>So, the best option for your scenario, is to use <code>writeUnshared</code> on the producing side, paired with <code>readUnshared</code> on the reading side.</p>\n"}],"owner":{"account_id":8221019,"reputation":121,"user_id":9889424,"display_name":"Zarquan"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686327865,"creation_date":1679021709,"question_id":75763379,"body_markdown":"I have a Java program that is supposed to read independent serialized objects from a file (no interdependencies between the objects), process them, then write them as independent serialized objects to another file.  It looks something like this (forgive any typos, this is hand written, as the program does other stuff, like figure out how it should be processed): \r\n\r\n\r\n```\r\ntry {\r\n    ObjectOutputStream fileOut = new ObjectOutputStream(new FileOutputStream(&quot;outputFile&quot;));\r\n    ObjectInputStream fileIn = new ObjectInputStream(new FileInputStream(&quot;inputFile&quot;));\r\n    for(int i = 0; i &lt; numThingsInFile; i++){\r\n        MyObject thingToProcess = (MyObject) fileIn.readObject();\r\n        thingToProcess.process();\r\n        fileOut.writeObject(thingToProcess);\r\n        fileOut.flush();\r\n    }\r\n    fileIn.close();\r\n    fileOut.close();\r\n} catch (IOException | ClassNotFoundException  e1) {\r\n    e1.printStackTrace();\r\n}\r\n```\r\n\r\nThe code does the process correctly.  And, from my end, I should be discarding &quot;thingsToProcess&quot; on every iteration of the loop, which should get garbage collected at the computer&#39;s leisure.\r\n\r\nHowever, the memory used by the program keeps increasing as it reads more things until it slows to a crawl.  I used a heap dump and an analyzer to look at it and it says the ObjectInputStream fileIn is taking up an absurd amount of memory.  Specifically, it says the &quot;entries&quot; array is huge.  It is significantly larger than the file it originated from.  The file is 400 kB, but this entries array is over 600 MB just from reading that file.  I also have other threads reading other files in the same way, so I am running out of memory.  I know I could give Java more memory, but that is a band-aid solution that doesn&#39;t fix the underlying problem, as I want this process to work with larger files with more objects.\r\n\r\nI would prefer not to break up the files more than they already are.\r\n\r\nIs there a way to have the ObjectInputStream not store previous entries or clear the previous entries?\r\n\r\n\r\n\r\nI&#39;ve tried adding a BufferedInputStream and using mark/reset (before I realized the issue was the entries array within ObjectInputStream):\r\n`ObjectInputStream fileIn = new ObjectInputStream(new FileInputStream(&quot;inputFile&quot;));`\r\n\r\nI&#39;ve tried using readUnshared():\r\n`MyObject thingToProcess = (MyObject) fileIn.readUnshared();`\r\nThis improved things and let me run my program, but it still had hundreds of thousands of objects in its Entries array that was expanding as time went on, which would cause problems with more objects.\r\n\r\nI&#39;ve tried calling `fileOut.reset()`, but this did not resolve the issue.  On the idea that the file may have been formatted strangely, I also added resets to the &#39;ObjectOutputStream&#39; that wrote the file `inputFile`.","title":"Clear entries on ObjectInputStream in Java -- memory issue","body":"<p>I have a Java program that is supposed to read independent serialized objects from a file (no interdependencies between the objects), process them, then write them as independent serialized objects to another file.  It looks something like this (forgive any typos, this is hand written, as the program does other stuff, like figure out how it should be processed):</p>\n<pre><code>try {\n    ObjectOutputStream fileOut = new ObjectOutputStream(new FileOutputStream(&quot;outputFile&quot;));\n    ObjectInputStream fileIn = new ObjectInputStream(new FileInputStream(&quot;inputFile&quot;));\n    for(int i = 0; i &lt; numThingsInFile; i++){\n        MyObject thingToProcess = (MyObject) fileIn.readObject();\n        thingToProcess.process();\n        fileOut.writeObject(thingToProcess);\n        fileOut.flush();\n    }\n    fileIn.close();\n    fileOut.close();\n} catch (IOException | ClassNotFoundException  e1) {\n    e1.printStackTrace();\n}\n</code></pre>\n<p>The code does the process correctly.  And, from my end, I should be discarding &quot;thingsToProcess&quot; on every iteration of the loop, which should get garbage collected at the computer's leisure.</p>\n<p>However, the memory used by the program keeps increasing as it reads more things until it slows to a crawl.  I used a heap dump and an analyzer to look at it and it says the ObjectInputStream fileIn is taking up an absurd amount of memory.  Specifically, it says the &quot;entries&quot; array is huge.  It is significantly larger than the file it originated from.  The file is 400 kB, but this entries array is over 600 MB just from reading that file.  I also have other threads reading other files in the same way, so I am running out of memory.  I know I could give Java more memory, but that is a band-aid solution that doesn't fix the underlying problem, as I want this process to work with larger files with more objects.</p>\n<p>I would prefer not to break up the files more than they already are.</p>\n<p>Is there a way to have the ObjectInputStream not store previous entries or clear the previous entries?</p>\n<p>I've tried adding a BufferedInputStream and using mark/reset (before I realized the issue was the entries array within ObjectInputStream):\n<code>ObjectInputStream fileIn = new ObjectInputStream(new FileInputStream(&quot;inputFile&quot;));</code></p>\n<p>I've tried using readUnshared():\n<code>MyObject thingToProcess = (MyObject) fileIn.readUnshared();</code>\nThis improved things and let me run my program, but it still had hundreds of thousands of objects in its Entries array that was expanding as time went on, which would cause problems with more objects.</p>\n<p>I've tried calling <code>fileOut.reset()</code>, but this did not resolve the issue.  On the idea that the file may have been formatted strangely, I also added resets to the 'ObjectOutputStream' that wrote the file <code>inputFile</code>.</p>\n"},{"tags":["java","pdf","pdfbox","pdfbox-layout"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1686336634,"post_id":76442124,"comment_id":134790115,"body_markdown":"&quot;test element 1&quot; isn&#39;t a PDF, that&#39;s still a text file even if you use &quot;application/pdf&quot;. The PDF format starts with &quot;%PDF&quot; and then lots of complex stuff.","body":"&quot;test element 1&quot; isn&#39;t a PDF, that&#39;s still a text file even if you use &quot;application/pdf&quot;. The PDF format starts with &quot;%PDF&quot; and then lots of complex stuff."},{"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"score":0,"creation_date":1686337711,"post_id":76442124,"comment_id":134790269,"body_markdown":"&quot;test element 1&quot; is a text I want to display as a content inside the attachment file1.pdf of type &#39;application/pdf&quot; type. I am trying to convert that content and adding that to PDEmbeddedFile . If the current one is not the approach could you please advise how to add an attachment with some content I fetched from DB inside an attachment of type &#39;application/pdf&#39;","body":"&quot;test element 1&quot; is a text I want to display as a content inside the attachment file1.pdf of type &#39;application/pdf&quot; type. I am trying to convert that content and adding that to PDEmbeddedFile . If the current one is not the approach could you please advise how to add an attachment with some content I fetched from DB inside an attachment of type &#39;application/pdf&#39;"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1686363732,"post_id":76442124,"comment_id":134792741,"body_markdown":"Create a real PDF that has this text formatted in the way you want, save this PDF to a ByteArrayOutputStream, and use this data. You can use the TextToPDF command line utility if you don&#39;t want to handle topics like line breaks and page breaks.","body":"Create a real PDF that has this text formatted in the way you want, save this PDF to a ByteArrayOutputStream, and use this data. You can use the TextToPDF command line utility if you don&#39;t want to handle topics like line breaks and page breaks."},{"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"score":0,"creation_date":1686393398,"post_id":76442124,"comment_id":134794703,"body_markdown":"@TilmanHausherr if that is the case do we need two types of functions one for handling the &#39;text/plain&#39; and other for handling &#39;applicatiin/pdf&#39;. Is there a common function or helper class in pdfBox which can handle both this cases with a common logic.","body":"@TilmanHausherr if that is the case do we need two types of functions one for handling the &#39;text/plain&#39; and other for handling &#39;applicatiin/pdf&#39;. Is there a common function or helper class in pdfBox which can handle both this cases with a common logic."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1686452038,"post_id":76442124,"comment_id":134799705,"body_markdown":"I still don&#39;t understand you, if you want to create a text sometimes and a PDF sometimes, then you&#39;ll have to write two different functions, but at the end both should end as a byte stream.","body":"I still don&#39;t understand you, if you want to create a text sometimes and a PDF sometimes, then you&#39;ll have to write two different functions, but at the end both should end as a byte stream."}],"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686327708,"creation_date":1686327708,"question_id":76442124,"body_markdown":"\r\nI&#39;m currently working on an api which generate a pdf file with some customer report and contain some pdf atatchments related to the report. I am adding an attachment to the PDF using PDFBox library in Java by referring to the code snippet,   [Adding a File Attachment][1]\r\n\r\n\r\nI successfully attached the document created using ByteArrayInputStream to the attachment. However, when I try to open the attachment in the document using Adobe reader or any PDF viewer tool I am getting the error as in the screenshot.\r\n[![enter image description here][2]][2]\r\n\r\nIf I use the ef.setSubtype(&quot;text/plain&quot;) and file extension as &#39;.txt&#39; I am able to open the attachment successfully. \r\nThe code snippet I used is as below,\r\n\r\n   \r\n\r\n    @GetMapping(&quot;/generate-pdf&quot;)\r\n    public ResponseEntity&lt;InputStreamResource&gt; generatePDFWithAttachment() {\r\n        try {\r\n            final PDDocument doc = new PDDocument();\r\n            PDPage page = new PDPage();\r\n            doc.addPage(page);\r\n\r\n            PDPageContentStream contentStream = new PDPageContentStream(doc, page);\r\n\r\n            contentStream.beginText();\r\n            contentStream.setFont(PDType1Font.HELVETICA, 15);\r\n            contentStream.newLineAtOffset(100, 700);\r\n            contentStream.setNonStrokingColor(Color.red);\r\n            contentStream.showText(&quot;Go to Document -&gt; File Attachments to View Embedded Files&quot;);\r\n\r\n            Map&lt;String, String&gt; keyValueMap = new HashMap&lt;&gt;();\r\n            keyValueMap.put(&quot;file1.pdf&quot;, &quot;test element 1&quot;);\r\n            keyValueMap.put(&quot;file2.pdf&quot;, &quot;test element 2&quot;);\r\n\r\n            //------- start attachment section\r\n            // embedded files are stored in a named tree\r\n            // create a new tree node and add the embedded file\r\n            PDEmbeddedFilesNameTreeNode efTree = new PDEmbeddedFilesNameTreeNode();\r\n            Map&lt;String, PDComplexFileSpecification&gt; treeNodeMap = new HashMap&lt;&gt;();\r\n\r\n            for (Map.Entry&lt;String, String&gt; entry : keyValueMap.entrySet()) {\r\n\r\n                // first create the file specification, which holds the embedded file\r\n                PDComplexFileSpecification fs = new PDComplexFileSpecification();\r\n                fs.setFile(entry.getKey());\r\n                // create a dummy file stream, this would probably normally be a FileInputStream\r\n                byte[] data = entry.getValue().getBytes();\r\n                ByteArrayInputStream fakeFile = new ByteArrayInputStream(data);\r\n                // now lets some of the optional parameters\r\n                PDEmbeddedFile ef = new PDEmbeddedFile(doc, fakeFile);\r\n                ef.setSubtype(&quot;application/pdf&quot;);\r\n                ef.setSize(data.length);\r\n                ef.setCreationDate(Calendar.getInstance());\r\n                fs.setEmbeddedFile(ef);\r\n                treeNodeMap.put(entry.getKey(), fs);\r\n            }\r\n\r\n            efTree.setNames(treeNodeMap);\r\n            PDDocumentNameDictionary names = new PDDocumentNameDictionary(doc.getDocumentCatalog());\r\n            names.setEmbeddedFiles(efTree);\r\n            doc.getDocumentCatalog().setNames(names);\r\n            //------- end attachment section\r\n            contentStream.endText();\r\n\r\n            contentStream.close();\r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n            doc.save(outputStream);\r\n            doc.close();\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setContentType(MediaType.APPLICATION_PDF);\r\n            headers.setContentDispositionFormData(&quot;attachment&quot;, &quot;sample.pdf&quot;);\r\n\r\n            InputStreamResource resource = new InputStreamResource(new ByteArrayInputStream(outputStream.toByteArray()));\r\n\r\n            return ResponseEntity.ok()\r\n                    .headers(headers)\r\n                    .body(resource);\r\n\r\n\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Exception while trying to create pdf document - &quot; + e);\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n  [1]: https://pdfbox.apache.org/1.8/cookbook/workingwithattachments.html#:~:text=Adding%20a%20File%20Attachment,attached%20to%20the%20document%20catalog.\r\n  [2]: https://i.stack.imgur.com/UNZEw.png\r\n\r\nI assume attachments can contain file of type .pdf. I also tried by providing the charset parameter to UTF_8   byte[] data = entry.getValue().getBytes(StandardCharsets.UTF_8); and that also didn&#39;t helps","title":"Adding a pdf attachment to the PDF using pdfBox","body":"<p>I'm currently working on an api which generate a pdf file with some customer report and contain some pdf atatchments related to the report. I am adding an attachment to the PDF using PDFBox library in Java by referring to the code snippet,   <a href=\"https://pdfbox.apache.org/1.8/cookbook/workingwithattachments.html#:%7E:text=Adding%20a%20File%20Attachment,attached%20to%20the%20document%20catalog.\" rel=\"nofollow noreferrer\">Adding a File Attachment</a></p>\n<p>I successfully attached the document created using ByteArrayInputStream to the attachment. However, when I try to open the attachment in the document using Adobe reader or any PDF viewer tool I am getting the error as in the screenshot.\n<a href=\"https://i.stack.imgur.com/UNZEw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UNZEw.png\" alt=\"enter image description here\" /></a></p>\n<p>If I use the ef.setSubtype(&quot;text/plain&quot;) and file extension as '.txt' I am able to open the attachment successfully.\nThe code snippet I used is as below,</p>\n<pre><code>@GetMapping(&quot;/generate-pdf&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; generatePDFWithAttachment() {\n    try {\n        final PDDocument doc = new PDDocument();\n        PDPage page = new PDPage();\n        doc.addPage(page);\n\n        PDPageContentStream contentStream = new PDPageContentStream(doc, page);\n\n        contentStream.beginText();\n        contentStream.setFont(PDType1Font.HELVETICA, 15);\n        contentStream.newLineAtOffset(100, 700);\n        contentStream.setNonStrokingColor(Color.red);\n        contentStream.showText(&quot;Go to Document -&gt; File Attachments to View Embedded Files&quot;);\n\n        Map&lt;String, String&gt; keyValueMap = new HashMap&lt;&gt;();\n        keyValueMap.put(&quot;file1.pdf&quot;, &quot;test element 1&quot;);\n        keyValueMap.put(&quot;file2.pdf&quot;, &quot;test element 2&quot;);\n\n        //------- start attachment section\n        // embedded files are stored in a named tree\n        // create a new tree node and add the embedded file\n        PDEmbeddedFilesNameTreeNode efTree = new PDEmbeddedFilesNameTreeNode();\n        Map&lt;String, PDComplexFileSpecification&gt; treeNodeMap = new HashMap&lt;&gt;();\n\n        for (Map.Entry&lt;String, String&gt; entry : keyValueMap.entrySet()) {\n\n            // first create the file specification, which holds the embedded file\n            PDComplexFileSpecification fs = new PDComplexFileSpecification();\n            fs.setFile(entry.getKey());\n            // create a dummy file stream, this would probably normally be a FileInputStream\n            byte[] data = entry.getValue().getBytes();\n            ByteArrayInputStream fakeFile = new ByteArrayInputStream(data);\n            // now lets some of the optional parameters\n            PDEmbeddedFile ef = new PDEmbeddedFile(doc, fakeFile);\n            ef.setSubtype(&quot;application/pdf&quot;);\n            ef.setSize(data.length);\n            ef.setCreationDate(Calendar.getInstance());\n            fs.setEmbeddedFile(ef);\n            treeNodeMap.put(entry.getKey(), fs);\n        }\n\n        efTree.setNames(treeNodeMap);\n        PDDocumentNameDictionary names = new PDDocumentNameDictionary(doc.getDocumentCatalog());\n        names.setEmbeddedFiles(efTree);\n        doc.getDocumentCatalog().setNames(names);\n        //------- end attachment section\n        contentStream.endText();\n\n        contentStream.close();\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        doc.save(outputStream);\n        doc.close();\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_PDF);\n        headers.setContentDispositionFormData(&quot;attachment&quot;, &quot;sample.pdf&quot;);\n\n        InputStreamResource resource = new InputStreamResource(new ByteArrayInputStream(outputStream.toByteArray()));\n\n        return ResponseEntity.ok()\n                .headers(headers)\n                .body(resource);\n\n\n    } catch (IOException e) {\n        System.err.println(&quot;Exception while trying to create pdf document - &quot; + e);\n    }\n    return null;\n}\n</code></pre>\n<p>I assume attachments can contain file of type .pdf. I also tried by providing the charset parameter to UTF_8   byte[] data = entry.getValue().getBytes(StandardCharsets.UTF_8); and that also didn't helps</p>\n"},{"tags":["java","spring-boot","gradle","lombok"],"answers":[{"tags":[],"owner":{"account_id":2041383,"reputation":611,"user_id":5773714,"display_name":"Lucas"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1478559214,"creation_date":1478559214,"answer_id":40476139,"question_id":40475910,"body_markdown":"After struggling with this for a while I found this plugin would do the trick:\r\n\r\nhttps://github.com/franzbecker/gradle-lombok\r\n\r\nMy gradle file just looks like this:\r\n\r\n    buildscript {\r\n        repositories {\r\n            maven { url &quot;https://repo.spring.io/libs-milestone&quot; }\r\n            maven { url &quot;https://plugins.gradle.org/m2/&quot; }\r\n        }\r\n        dependencies {\r\n            classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:1.4.0.RELEASE&quot;)\r\n            classpath &#39;org.springframework:springloaded:1.2.6.RELEASE&#39;\r\n        }\r\n    }\r\n\r\n    plugins {\r\n        id &#39;io.franzbecker.gradle-lombok&#39; version &#39;1.8&#39;\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    \r\n    \r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;spring-boot&#39;\r\n    \r\n    \r\n    \r\n    jar {\r\n        baseName = &#39;gs-accessing-facebook&#39;\r\n        version =  &#39;0.1.0&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n        maven { url &quot;https://repo.spring.io/libs-milestone&quot; }\r\n    }\r\n    \r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n    \r\n    dependencies {\r\n        // compile(&quot;org.projectlombok:lombok:1.16.10&quot;)\r\n        compile(&quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;)\r\n        compile(&quot;org.springframework.social:spring-social-facebook&quot;)\r\n        compile(&quot;org.springframework.social:spring-social-twitter&quot;)\r\n        testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n        testCompile(&quot;junit:junit&quot;)\r\n        compile(&quot;org.springframework.boot:spring-boot-devtools&quot;)\r\n        compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n     \tcompile(&quot;mysql:mysql-connector-java&quot;)\r\n    }\r\n    \r\n    idea {\r\n        module {\r\n            inheritOutputDirs = false\r\n            outputDir = file(&quot;$buildDir/classes/main/&quot;)\r\n        }\r\n    }\r\n    \r\n    bootRun {\r\n        addResources = true\r\n        jvmArgs &quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005&quot;\r\n    }\r\n                    \r\nI had come across this plugin before but I did something wrong and it didn&#39;t work. I am glad it worked now.\r\n\r\nThanks!","title":"Using lombok with gradle and spring-boot","body":"<p>After struggling with this for a while I found this plugin would do the trick:</p>\n\n<p><a href=\"https://github.com/franzbecker/gradle-lombok\" rel=\"noreferrer\">https://github.com/franzbecker/gradle-lombok</a></p>\n\n<p>My gradle file just looks like this:</p>\n\n<pre><code>buildscript {\n    repositories {\n        maven { url \"https://repo.spring.io/libs-milestone\" }\n        maven { url \"https://plugins.gradle.org/m2/\" }\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:1.4.0.RELEASE\")\n        classpath 'org.springframework:springloaded:1.2.6.RELEASE'\n    }\n}\n\nplugins {\n    id 'io.franzbecker.gradle-lombok' version '1.8'\n    id 'java'\n}\n\n\n\napply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'idea'\napply plugin: 'spring-boot'\n\n\n\njar {\n    baseName = 'gs-accessing-facebook'\n    version =  '0.1.0'\n}\n\nrepositories {\n    mavenCentral()\n    maven { url \"https://repo.spring.io/libs-milestone\" }\n}\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\ndependencies {\n    // compile(\"org.projectlombok:lombok:1.16.10\")\n    compile(\"org.springframework.boot:spring-boot-starter-thymeleaf\")\n    compile(\"org.springframework.social:spring-social-facebook\")\n    compile(\"org.springframework.social:spring-social-twitter\")\n    testCompile(\"org.springframework.boot:spring-boot-starter-test\")\n    testCompile(\"junit:junit\")\n    compile(\"org.springframework.boot:spring-boot-devtools\")\n    compile(\"org.springframework.boot:spring-boot-starter-data-jpa\")\n    compile(\"mysql:mysql-connector-java\")\n}\n\nidea {\n    module {\n        inheritOutputDirs = false\n        outputDir = file(\"$buildDir/classes/main/\")\n    }\n}\n\nbootRun {\n    addResources = true\n    jvmArgs \"-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005\"\n}\n</code></pre>\n\n<p>I had come across this plugin before but I did something wrong and it didn't work. I am glad it worked now.</p>\n\n<p>Thanks!</p>\n"},{"tags":[],"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1686327568,"creation_date":1541695660,"answer_id":53212406,"question_id":40475910,"body_markdown":"With the latest Lombok 1.18 it&#39;s simple. `io.franzbecker.gradle-lombok` plugin is not required. Example dependencies from my project:\r\n\r\n    dependencies {\r\n        implementation &quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;\r\n        implementation &quot;org.springframework.social:spring-social-facebook&quot;\r\n        implementation &quot;org.springframework.social:spring-social-twitter&quot;\r\n        implementation &quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;\r\n\r\n        testImplementation &quot;org.springframework.boot:spring-boot-starter-test&quot;\r\n\r\n        runtimeClasspath &quot;org.springframework.boot:spring-boot-devtools&quot;\r\n        runtime &quot;mysql:mysql-connector-java&quot;\r\n\r\n        // https://projectlombok.org\r\n        compileOnly &#39;org.projectlombok:lombok:1.18.20&#39;\r\n        annotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    }\r\n\r\nOther suggestions:\r\n\r\n1. `testCompile(&quot;junit:junit&quot;)` is not required because the `spring-boot-starter-test` “Starter” [contains JUnit][1].\r\n2. Use `implementation` or `api` configuration instead of `compile` (since [Gradle 3.4][2]). [How do I choose the right one?][3]\r\n3. Do not use `compile` configuration for `devtools`. A tip from [Developer Tools][4] guide:\r\n\r\n   &gt; Flagging the dependency as optional in Maven or using a custom `developmentOnly` configuration in Gradle (as shown above) is a best practice that prevents devtools from being transitively applied to other modules that use your project.\r\n\r\n4. If you use IntelliJ IDEA, make sure you have [Lombok plugin][5] installed and [Annotation Processing][6] enabled. To make an initial project setup easier for newcomers you can also specify the Lombok plugin as [required][7].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\r\n  [2]: https://docs.gradle.org/3.4/release-notes.html\r\n  [3]: http://www.davidwong.com.au/blog/2018/03/gradle-dependencies-for-java-use-compile-or-implementation/\r\n  [4]: https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html\r\n  [5]: https://plugins.jetbrains.com/plugin/6317-lombok-plugin\r\n  [6]: https://www.jetbrains.com/help/idea/configuring-annotation-processing.html\r\n  [7]: https://www.jetbrains.com/help/idea/required-plugin.html","title":"Using lombok with gradle and spring-boot","body":"<p>With the latest Lombok 1.18 it's simple. <code>io.franzbecker.gradle-lombok</code> plugin is not required. Example dependencies from my project:</p>\n<pre><code>dependencies {\n    implementation &quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;\n    implementation &quot;org.springframework.social:spring-social-facebook&quot;\n    implementation &quot;org.springframework.social:spring-social-twitter&quot;\n    implementation &quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;\n\n    testImplementation &quot;org.springframework.boot:spring-boot-starter-test&quot;\n\n    runtimeClasspath &quot;org.springframework.boot:spring-boot-devtools&quot;\n    runtime &quot;mysql:mysql-connector-java&quot;\n\n    // https://projectlombok.org\n    compileOnly 'org.projectlombok:lombok:1.18.20'\n    annotationProcessor 'org.projectlombok:lombok:1.18.20'\n}\n</code></pre>\n<p>Other suggestions:</p>\n<ol>\n<li><p><code>testCompile(&quot;junit:junit&quot;)</code> is not required because the <code>spring-boot-starter-test</code> “Starter” <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\" rel=\"nofollow noreferrer\">contains JUnit</a>.</p>\n</li>\n<li><p>Use <code>implementation</code> or <code>api</code> configuration instead of <code>compile</code> (since <a href=\"https://docs.gradle.org/3.4/release-notes.html\" rel=\"nofollow noreferrer\">Gradle 3.4</a>). <a href=\"http://www.davidwong.com.au/blog/2018/03/gradle-dependencies-for-java-use-compile-or-implementation/\" rel=\"nofollow noreferrer\">How do I choose the right one?</a></p>\n</li>\n<li><p>Do not use <code>compile</code> configuration for <code>devtools</code>. A tip from <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html\" rel=\"nofollow noreferrer\">Developer Tools</a> guide:</p>\n<blockquote>\n<p>Flagging the dependency as optional in Maven or using a custom <code>developmentOnly</code> configuration in Gradle (as shown above) is a best practice that prevents devtools from being transitively applied to other modules that use your project.</p>\n</blockquote>\n</li>\n<li><p>If you use IntelliJ IDEA, make sure you have <a href=\"https://plugins.jetbrains.com/plugin/6317-lombok-plugin\" rel=\"nofollow noreferrer\">Lombok plugin</a> installed and <a href=\"https://www.jetbrains.com/help/idea/configuring-annotation-processing.html\" rel=\"nofollow noreferrer\">Annotation Processing</a> enabled. To make an initial project setup easier for newcomers you can also specify the Lombok plugin as <a href=\"https://www.jetbrains.com/help/idea/required-plugin.html\" rel=\"nofollow noreferrer\">required</a>.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1644219248,"creation_date":1592833736,"answer_id":62515987,"question_id":40475910,"body_markdown":"If you are using `Eclipse` or one of its offshoots(I am using Spring Tool Suite `4.5.1.RELEASE`, - the same steps apply for any other release), all that you need to do is:\r\n\r\n- In `build.gradle`:&lt;br&gt;\r\n\r\n      dependencies {\r\n        compileOnly &#39;org.projectlombok:lombok&#39;  \r\n        annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n      }\r\n\r\n- Then, right-click on your project &gt; Gradle &gt; Refresh Gradle Project. The `lombok-&quot;version&quot;.jar` will *appear* inside your project&#39;s **Project and External Dependencies**\r\n- Right-click on that `lombok-&quot;version&quot;.jar` &gt; Run As &gt; Java Application (similar to double-clicking on the actual jar or running `java -jar lombok-&quot;version&quot;.jar` on the command line.)\r\n- A GUI will appear, follow all the instructions and one of the thing it does is, it copies `lombok.jar` to your IDE&#39;s root folder.\r\n\r\n**Note: Remember to restart your IDE and clean all your previously compiled files.**","title":"Using lombok with gradle and spring-boot","body":"<p>If you are using <code>Eclipse</code> or one of its offshoots(I am using Spring Tool Suite <code>4.5.1.RELEASE</code>, - the same steps apply for any other release), all that you need to do is:</p>\n<ul>\n<li><p>In <code>build.gradle</code>:<br></p>\n<pre><code>dependencies {\n  compileOnly 'org.projectlombok:lombok'  \n  annotationProcessor 'org.projectlombok:lombok'\n}\n</code></pre>\n</li>\n<li><p>Then, right-click on your project &gt; Gradle &gt; Refresh Gradle Project. The <code>lombok-&quot;version&quot;.jar</code> will <em>appear</em> inside your project's <strong>Project and External Dependencies</strong></p>\n</li>\n<li><p>Right-click on that <code>lombok-&quot;version&quot;.jar</code> &gt; Run As &gt; Java Application (similar to double-clicking on the actual jar or running <code>java -jar lombok-&quot;version&quot;.jar</code> on the command line.)</p>\n</li>\n<li><p>A GUI will appear, follow all the instructions and one of the thing it does is, it copies <code>lombok.jar</code> to your IDE's root folder.</p>\n</li>\n</ul>\n<p><strong>Note: Remember to restart your IDE and clean all your previously compiled files.</strong></p>\n"}],"owner":{"account_id":2041383,"reputation":611,"user_id":5773714,"display_name":"Lucas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92076,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":3,"score":35,"last_activity_date":1686327568,"creation_date":1478558072,"question_id":40475910,"body_markdown":"I am trying to build a project with lombok and this is what I have as dependencie. \r\n\r\n    dependencies {\r\n       compile(&quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;)\r\n       compile(&quot;org.springframework.social:spring-social-facebook&quot;)\r\n       compile(&quot;org.springframework.social:spring-social-twitter&quot;)\r\n       testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n       testCompile(&quot;junit:junit&quot;)\r\n       compile(&quot;org.springframework.boot:spring-boot-devtools&quot;)\r\n       compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n \t   compile(&quot;mysql:mysql-connector-java&quot;)\r\n       compileOnly(&quot;org.projectlombok:lombok:1.16.10&quot;)\r\n    }\r\n\r\nI am able to include the anotations, and I have included lombok in the editor. I am even able to compile a code using lombok and making a cal to a method generated by lombok.\r\n\r\nThis is my entity:\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;TEA_USER&quot;, uniqueConstraints = {\r\n\t\t@UniqueConstraint(columnNames = { &quot;USR_EMAIL&quot; }),\r\n\t\t@UniqueConstraint(columnNames = { &quot;USR_NAME&quot; })\r\n    })\r\n    public class User {\r\n\r\n\r\n\t   @NotNull\r\n\t   @Id\r\n\t   @GeneratedValue(strategy = GenerationType.AUTO)\r\n\t   @Column(name=&quot;USR_ID&quot;)\r\n\t   private long id;\r\n\r\n\t   @NotNull\r\n\t   @Column(name=&quot;USR_FNAME&quot;)\r\n\t   private String firstName;\r\n\r\n\t   @NotNull\r\n\t   @Column(name=&quot;USR_LNAME&quot;)\r\n\t   private String lastName;\r\n\t\r\n\t\r\n\t   @NotNull\r\n\t   @Min(5)\r\n\t   @Max(30)\r\n\t   @Column(name=&quot;USR_NAME&quot;)\r\n\t   private String username;\r\n\t\r\n\t   @Column(name=&quot;USR_EMAIL&quot;)\r\n\t   private String email;\r\n\r\n\t   @Min(8)\r\n\t   @NotNull\r\n\t   @Column(name=&quot;USR_PASSWORD&quot;)\r\n\t   private String password;\r\n    }\r\n\r\n\r\nAnd this is a function that compiles fine:\r\n\r\n    @PostMapping(&quot;/registration/register&quot;)\r\n    public String doRegister (@ModelAttribute @Valid User user, BindingResult result){\r\n    \tuser.getEmail();\r\n    \tSystem.out.println(user.getFirstName());\r\n    \tif (result.hasErrors()) {\r\n    \t\t return &quot;register/customRegister&quot;;\r\n    \t}\r\n    \tthis.userRepository.save(user);\r\n        return &quot;register/customRegistered&quot;;\r\n    }\r\n\r\nBut when I run bootRun and I try to access the funcionality this is the Exception I get:\r\n\r\n\r\n    org.springframework.beans.NotReadablePropertyException: Invalid property &#39;firstName&#39; of bean class [com.lucasfrossard.entities.User]: Bean property &#39;firstName&#39; is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\r\n\r\nBut, if I manually include the setter and getters, this works fine. I don&#39;t get whats going on and how to fix it. Any idea?\r\n","title":"Using lombok with gradle and spring-boot","body":"<p>I am trying to build a project with lombok and this is what I have as dependencie. </p>\n\n<pre><code>dependencies {\n   compile(\"org.springframework.boot:spring-boot-starter-thymeleaf\")\n   compile(\"org.springframework.social:spring-social-facebook\")\n   compile(\"org.springframework.social:spring-social-twitter\")\n   testCompile(\"org.springframework.boot:spring-boot-starter-test\")\n   testCompile(\"junit:junit\")\n   compile(\"org.springframework.boot:spring-boot-devtools\")\n   compile(\"org.springframework.boot:spring-boot-starter-data-jpa\")\n   compile(\"mysql:mysql-connector-java\")\n   compileOnly(\"org.projectlombok:lombok:1.16.10\")\n}\n</code></pre>\n\n<p>I am able to include the anotations, and I have included lombok in the editor. I am even able to compile a code using lombok and making a cal to a method generated by lombok.</p>\n\n<p>This is my entity:</p>\n\n<pre><code>@Data\n@Entity\n@Table(name = \"TEA_USER\", uniqueConstraints = {\n    @UniqueConstraint(columnNames = { \"USR_EMAIL\" }),\n    @UniqueConstraint(columnNames = { \"USR_NAME\" })\n})\npublic class User {\n\n\n   @NotNull\n   @Id\n   @GeneratedValue(strategy = GenerationType.AUTO)\n   @Column(name=\"USR_ID\")\n   private long id;\n\n   @NotNull\n   @Column(name=\"USR_FNAME\")\n   private String firstName;\n\n   @NotNull\n   @Column(name=\"USR_LNAME\")\n   private String lastName;\n\n\n   @NotNull\n   @Min(5)\n   @Max(30)\n   @Column(name=\"USR_NAME\")\n   private String username;\n\n   @Column(name=\"USR_EMAIL\")\n   private String email;\n\n   @Min(8)\n   @NotNull\n   @Column(name=\"USR_PASSWORD\")\n   private String password;\n}\n</code></pre>\n\n<p>And this is a function that compiles fine:</p>\n\n<pre><code>@PostMapping(\"/registration/register\")\npublic String doRegister (@ModelAttribute @Valid User user, BindingResult result){\n    user.getEmail();\n    System.out.println(user.getFirstName());\n    if (result.hasErrors()) {\n         return \"register/customRegister\";\n    }\n    this.userRepository.save(user);\n    return \"register/customRegistered\";\n}\n</code></pre>\n\n<p>But when I run bootRun and I try to access the funcionality this is the Exception I get:</p>\n\n<pre><code>org.springframework.beans.NotReadablePropertyException: Invalid property 'firstName' of bean class [com.lucasfrossard.entities.User]: Bean property 'firstName' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n</code></pre>\n\n<p>But, if I manually include the setter and getters, this works fine. I don't get whats going on and how to fix it. Any idea?</p>\n"},{"tags":["java","hash","torrent","info"],"answers":[{"tags":[],"owner":{"account_id":2417794,"reputation":2126,"user_id":2111482,"display_name":"Roshith"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456387741,"creation_date":1456387741,"answer_id":35621632,"question_id":35621493,"body_markdown":"You can use java.security.MessageDigest. Check the below program which calculates MD5Sum/hash bytes and converts it to Hex String format.\r\n\r\n\r\n        MessageDigest md5 = null;\r\n        byte[] buffer = new byte[1024];\r\n        int bytesRead = 0;\r\n        String md5ChkSumHex = null;\r\n        InputStream is = null;\r\n\r\n       String filePath = &quot;D:/myFile.txt&quot;;\r\n\r\n\t\ttry \r\n\t\t{\r\n\t\t\tis = new FileInputStream(new File(filePath));\r\n\r\n\t\t\tmd5 = MessageDigest.getInstance(&quot;MD5&quot;);\r\n\r\n\t\t\ttry {\r\n\t\t\t\twhile ((bytesRead = is.read(buffer)) &gt; 0) {\r\n\t\t\t\t\tmd5.update(buffer, 0, bytesRead);\r\n\t\t\t\t}\r\n\t\t\t} catch (IOException e) {\r\n\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tbyte[] md5ChkSumBytes = md5.digest();\r\n\r\n\t\t\tStringBuffer sb = new StringBuffer();\r\n            \r\n            /*Convert to hex*/\r\n\t\t\t\r\n           for (int j = 0; j &lt; md5ChkSumBytes.length; j++) \r\n\t\t\t{\r\n\t\t\t\tString hex = Integer.toHexString(\r\n\t\t\t\t\t\t(md5ChkSumBytes[j] &amp; 0xff | 0x100)).substring(1, 3);\r\n\t\t\t\tsb.append(hex);\r\n\t\t\t}\r\n\r\n\t\t\tmd5ChkSumHex = sb.toString();\r\n\t\t\t\r\n\r\n\t\t} catch (Exception nsae) {\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn md5ChkSumHex;","title":"How to calculate hash info for a torrent file in java?","body":"<p>You can use java.security.MessageDigest. Check the below program which calculates MD5Sum/hash bytes and converts it to Hex String format.</p>\n\n<pre><code>    MessageDigest md5 = null;\n    byte[] buffer = new byte[1024];\n    int bytesRead = 0;\n    String md5ChkSumHex = null;\n    InputStream is = null;\n\n   String filePath = \"D:/myFile.txt\";\n\n    try \n    {\n        is = new FileInputStream(new File(filePath));\n\n        md5 = MessageDigest.getInstance(\"MD5\");\n\n        try {\n            while ((bytesRead = is.read(buffer)) &gt; 0) {\n                md5.update(buffer, 0, bytesRead);\n            }\n        } catch (IOException e) {\n\n            e.printStackTrace();\n        }\n\n        byte[] md5ChkSumBytes = md5.digest();\n\n        StringBuffer sb = new StringBuffer();\n\n        /*Convert to hex*/\n\n       for (int j = 0; j &lt; md5ChkSumBytes.length; j++) \n        {\n            String hex = Integer.toHexString(\n                    (md5ChkSumBytes[j] &amp; 0xff | 0x100)).substring(1, 3);\n            sb.append(hex);\n        }\n\n        md5ChkSumHex = sb.toString();\n\n\n    } catch (Exception nsae) {\n\n    }\n\n    return md5ChkSumHex;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3963005,"reputation":759,"user_id":3269684,"accept_rate":56,"display_name":"Santhosh Tangudu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456389423,"creation_date":1456389423,"answer_id":35622163,"question_id":35621493,"body_markdown":"There are many algorithms to find hash. Among them MD5 and SHA1 are popular algorithms. \r\n\r\nIn the above post, he mentioned the usage of MD5 Hasing. To do the SHA1 hasing, please use this [post][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4400774/java-calculate-hex-representation-of-a-sha-1-digest-of-a-string","title":"How to calculate hash info for a torrent file in java?","body":"<p>There are many algorithms to find hash. Among them MD5 and SHA1 are popular algorithms. </p>\n\n<p>In the above post, he mentioned the usage of MD5 Hasing. To do the SHA1 hasing, please use this <a href=\"https://stackoverflow.com/questions/4400774/java-calculate-hex-representation-of-a-sha-1-digest-of-a-string\">post</a>.</p>\n"}],"owner":{"account_id":7696571,"reputation":663,"user_id":5830855,"accept_rate":0,"display_name":"Purvil Bambharolia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686327288,"creation_date":1456387225,"question_id":35621493,"body_markdown":"I am building up a project based on p2p networking. And I am not able to find any algorithm to calculate hash info for a torrent file.\r\nCan someone please help with the this?","title":"How to calculate hash info for a torrent file in java?","body":"<p>I am building up a project based on p2p networking. And I am not able to find any algorithm to calculate hash info for a torrent file.\nCan someone please help with the this?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686327331,"post_id":76442070,"comment_id":134788475,"body_markdown":"First thing - [avoid null layouts in Swing](https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing)","body":"First thing - <a href=\"https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing\" rel=\"nofollow noreferrer\">avoid null layouts in Swing</a>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1686327473,"post_id":76442070,"comment_id":134788500,"body_markdown":"You need to define your variables as &quot;instance&quot; variables, not &quot;local&quot; variables. Then other methods will be able to access these variables. The `TextDemo` from [How to Use Text Areas](https://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html) shows how to use an ActionListener to copy text from a text field to a text area. It will also show proper Swing coding practices. Keep a reference to the Swing tutorial handy for Swing basics.","body":"You need to define your variables as &quot;instance&quot; variables, not &quot;local&quot; variables. Then other methods will be able to access these variables. The <code>TextDemo</code> from <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html\" rel=\"nofollow noreferrer\">How to Use Text Areas</a> shows how to use an ActionListener to copy text from a text field to a text area. It will also show proper Swing coding practices. Keep a reference to the Swing tutorial handy for Swing basics."},{"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"score":0,"creation_date":1686334100,"post_id":76442070,"comment_id":134789693,"body_markdown":"It works. Thank  both of you for the quick answer.","body":"It works. Thank  both of you for the quick answer."}],"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686327209,"creation_date":1686327209,"question_id":76442070,"body_markdown":"I state that it is the first piece of Java code that I write and googling I have not found anything that can help me.\r\nWhat I would like to achieve is that, after selecting the year and month, by pressing the button I can read the chosen values and then execute another code\r\n\r\n\r\n    \r\n    \r\n    public class  ComboTest {\r\n       \r\n       ComboTest(){     \r\n          String[] monthName = {&quot;Gennaio&quot;, &quot;Febbraio&quot;, &quot;Marzo&quot;};\r\n    \t  String[] yearName = {&quot;2017&quot;, &quot;2018&quot;, &quot;2019&quot;};\r\n          JFrame frame = new JFrame(&quot;All by myself&quot;);\r\n          frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n          JPanel panel = new JPanel();\r\n          frame.getContentPane();\r\n          LocalDate today = LocalDate.now();\r\n          String anno = String.valueOf(today.getYear());\r\n          int meseEn = today.getMonthValue(); // I need an int to get the italian name\r\n          String mese = monthName[meseEn -1];\r\n          \r\n    \r\n          JComboBox&lt;String&gt; comboMese=new JComboBox&lt;String&gt;(monthName);    \r\n          comboMese.setSelectedItem(mese);\r\n          comboMese.setBounds(10, 15, 90, 18);    \r\n          comboMese.addActionListener(new ActionListener(){\r\n             public void actionPerformed(ActionEvent e){  \r\n                String monthSelected = (String) comboMese.getSelectedItem();\r\n                System.out.println(monthSelected);\r\n                } \r\n             });\r\n    \r\n             JComboBox&lt;String&gt; comboAnno=new JComboBox&lt;String&gt;(yearName);    \r\n             comboAnno.setBounds(110, 15, 90, 20);    \r\n             comboAnno.setSelectedItem(anno);\r\n             comboAnno.addActionListener(new ActionListener(){\r\n                public void actionPerformed(ActionEvent e){  \r\n                   String annoSelected = (String) comboAnno.getSelectedItem();\r\n                   System.out.println(annoSelected);\r\n                   }    \r\n                });\r\n    \t\tJButton select=new JButton(&quot;select&quot;);  \r\n                select.setBounds(220,15,80, 20);  \r\n                select.addActionListener(new java.awt.event.ActionListener(){  \r\n                public void actionPerformed(ActionEvent e){  \r\n                   System.out.println(&quot;Selected&quot;);  \r\n                   //System.out.println(monthSelected); //&lt;---- ComboTest.java:53: error: cannot find symbol\r\n                   //System.out.println(annoSelected); &lt;----- the same\r\n                    }  \r\n                   });\r\n          panel.setLayout(null);\r\n          panel.add(comboMese);\r\n          panel.add(comboAnno);\r\n          panel.add(select);\r\n          panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\r\n          frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n          frame.add(panel);\r\n          frame.setSize(350,100);      \r\n          frame.setLocationRelativeTo(null);  \r\n          frame.setVisible(true);\r\n          \r\n    }\r\n    \r\n    public static void main(String[] args) {  \r\n       new ComboTest();  \r\n    \t}  \r\n    }\r\n\r\n","title":"Two comboboxes and a button","body":"<p>I state that it is the first piece of Java code that I write and googling I have not found anything that can help me.\nWhat I would like to achieve is that, after selecting the year and month, by pressing the button I can read the chosen values and then execute another code</p>\n<pre><code>public class  ComboTest {\n   \n   ComboTest(){     \n      String[] monthName = {&quot;Gennaio&quot;, &quot;Febbraio&quot;, &quot;Marzo&quot;};\n      String[] yearName = {&quot;2017&quot;, &quot;2018&quot;, &quot;2019&quot;};\n      JFrame frame = new JFrame(&quot;All by myself&quot;);\n      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n      JPanel panel = new JPanel();\n      frame.getContentPane();\n      LocalDate today = LocalDate.now();\n      String anno = String.valueOf(today.getYear());\n      int meseEn = today.getMonthValue(); // I need an int to get the italian name\n      String mese = monthName[meseEn -1];\n      \n\n      JComboBox&lt;String&gt; comboMese=new JComboBox&lt;String&gt;(monthName);    \n      comboMese.setSelectedItem(mese);\n      comboMese.setBounds(10, 15, 90, 18);    \n      comboMese.addActionListener(new ActionListener(){\n         public void actionPerformed(ActionEvent e){  \n            String monthSelected = (String) comboMese.getSelectedItem();\n            System.out.println(monthSelected);\n            } \n         });\n\n         JComboBox&lt;String&gt; comboAnno=new JComboBox&lt;String&gt;(yearName);    \n         comboAnno.setBounds(110, 15, 90, 20);    \n         comboAnno.setSelectedItem(anno);\n         comboAnno.addActionListener(new ActionListener(){\n            public void actionPerformed(ActionEvent e){  \n               String annoSelected = (String) comboAnno.getSelectedItem();\n               System.out.println(annoSelected);\n               }    \n            });\n        JButton select=new JButton(&quot;select&quot;);  \n            select.setBounds(220,15,80, 20);  \n            select.addActionListener(new java.awt.event.ActionListener(){  \n            public void actionPerformed(ActionEvent e){  \n               System.out.println(&quot;Selected&quot;);  \n               //System.out.println(monthSelected); //&lt;---- ComboTest.java:53: error: cannot find symbol\n               //System.out.println(annoSelected); &lt;----- the same\n                }  \n               });\n      panel.setLayout(null);\n      panel.add(comboMese);\n      panel.add(comboAnno);\n      panel.add(select);\n      panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n      frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n      frame.add(panel);\n      frame.setSize(350,100);      \n      frame.setLocationRelativeTo(null);  \n      frame.setVisible(true);\n      \n}\n\npublic static void main(String[] args) {  \n   new ComboTest();  \n    }  \n}\n</code></pre>\n"},{"tags":["java","android","unit-testing","junit4"],"comments":[{"owner":{"account_id":1663905,"reputation":4857,"user_id":1531708,"accept_rate":61,"display_name":"PhilLab"},"score":0,"creation_date":1453973931,"post_id":34802667,"comment_id":57838694,"body_markdown":"I am a little bit confused - how can above code raise this error?","body":"I am a little bit confused - how can above code raise this error?"},{"owner":{"account_id":3226645,"reputation":5666,"user_id":2722870,"accept_rate":65,"display_name":"ThanosFisherman"},"score":0,"creation_date":1453991898,"post_id":34802667,"comment_id":57851465,"body_markdown":"@PhilLab This code is a part of a java class that loads a native method as you can see. There is no problem when running my app. However this error appears when testing this class in Android studio","body":"@PhilLab This code is a part of a java class that loads a native method as you can see. There is no problem when running my app. However this error appears when testing this class in Android studio"},{"owner":{"account_id":1663905,"reputation":4857,"user_id":1531708,"accept_rate":61,"display_name":"PhilLab"},"score":0,"creation_date":1453994830,"post_id":34802667,"comment_id":57853945,"body_markdown":"but why is an error thrown when you catch it? are you sure this is the library which fails to be loaded or do you have another one in your project?","body":"but why is an error thrown when you catch it? are you sure this is the library which fails to be loaded or do you have another one in your project?"},{"owner":{"account_id":3226645,"reputation":5666,"user_id":2722870,"accept_rate":65,"display_name":"ThanosFisherman"},"score":0,"creation_date":1453996177,"post_id":34802667,"comment_id":57855014,"body_markdown":"Yes this is the only block of code that loads the native library. Actually trying to catch this error is redundant. I placed it on purpose to answer the exact same question you are asking. But `UnsatisfiedLinkError` along with `NullPointerException` hit again later in my code because it can&#39;t find a specific function coming from native library. All I need is a solid solution on how to Unit test java classes like this in android studio. And I&#39;m really surprised no one knows the answer","body":"Yes this is the only block of code that loads the native library. Actually trying to catch this error is redundant. I placed it on purpose to answer the exact same question you are asking. But <code>UnsatisfiedLinkError</code> along with <code>NullPointerException</code> hit again later in my code because it can&#39;t find a specific function coming from native library. All I need is a solid solution on how to Unit test java classes like this in android studio. And I&#39;m really surprised no one knows the answer"},{"owner":{"account_id":969753,"reputation":1886,"user_id":992509,"accept_rate":47,"display_name":"SJoshi"},"score":0,"creation_date":1510823026,"post_id":34802667,"comment_id":81601483,"body_markdown":"@ThanosFisherman I&#39;ve proposed a solution to another SO question, which seems similar (https://stackoverflow.com/a/47325408/992509). Essentially, you setup Gradle to build platform-native versions of your code, so that you can run them on your computer&#39;s JVM.","body":"@ThanosFisherman I&#39;ve proposed a solution to another SO question, which seems similar (<a href=\"https://stackoverflow.com/a/47325408/992509\">stackoverflow.com/a/47325408/992509</a>). Essentially, you setup Gradle to build platform-native versions of your code, so that you can run them on your computer&#39;s JVM."},{"owner":{"account_id":3226645,"reputation":5666,"user_id":2722870,"accept_rate":65,"display_name":"ThanosFisherman"},"score":0,"creation_date":1510955965,"post_id":34802667,"comment_id":81672627,"body_markdown":"@SJoshi Interesting I&#39;m gonna have to check it out. Thanks","body":"@SJoshi Interesting I&#39;m gonna have to check it out. Thanks"},{"owner":{"account_id":969753,"reputation":1886,"user_id":992509,"accept_rate":47,"display_name":"SJoshi"},"score":0,"creation_date":1511077114,"post_id":34802667,"comment_id":81701838,"body_markdown":"@ThanosFisherman Alternatively, I wrote up a more detailed explanation in my blog http://www.sureshjoshi.com/mobile/android-junit-native-libraries/","body":"@ThanosFisherman Alternatively, I wrote up a more detailed explanation in my blog <a href=\"http://www.sureshjoshi.com/mobile/android-junit-native-libraries/\" rel=\"nofollow noreferrer\">sureshjoshi.com/mobile/android-junit-native-libraries</a>"}],"answers":[{"tags":[],"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1453821470,"creation_date":1453821470,"answer_id":35017260,"question_id":34802667,"body_markdown":"Just make sure, the directory containing the library is contained in the `java.library.path` system property.\r\n\r\nFrom the test you could set it before you load the library:\r\n\r\n    System.setProperty(&quot;java.library.path&quot;, &quot;... path to the library .../libs/x86&quot;);\r\n\r\nYou can specify the path hard coded, but this will make the project less portable to other environments. So I suggest you build it up programmatically.","title":"Unit test Java class that loads native library","body":"<p>Just make sure, the directory containing the library is contained in the <code>java.library.path</code> system property.</p>\n\n<p>From the test you could set it before you load the library:</p>\n\n<pre><code>System.setProperty(\"java.library.path\", \"... path to the library .../libs/x86\");\n</code></pre>\n\n<p>You can specify the path hard coded, but this will make the project less portable to other environments. So I suggest you build it up programmatically.</p>\n"},{"tags":[],"owner":{"account_id":2552515,"reputation":3386,"user_id":2216021,"display_name":"Prabindh"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1454264486,"creation_date":1454264486,"answer_id":35117536,"question_id":34802667,"body_markdown":"The .so files are to be placed under \r\n\r\n&gt; src/main/jniLibs\r\n\r\nNot under src/main/libs\r\n\r\n*(Tested with Android Studio 1.2.2)*\r\n\r\nFor reference check the page - http://ph0b.com/android-studio-gradle-and-ndk-integration/, though some portions might be outdated.","title":"Unit test Java class that loads native library","body":"<p>The .so files are to be placed under </p>\n\n<blockquote>\n  <p>src/main/jniLibs</p>\n</blockquote>\n\n<p>Not under src/main/libs</p>\n\n<p><em>(Tested with Android Studio 1.2.2)</em></p>\n\n<p>For reference check the page - <a href=\"http://ph0b.com/android-studio-gradle-and-ndk-integration/\" rel=\"nofollow\">http://ph0b.com/android-studio-gradle-and-ndk-integration/</a>, though some portions might be outdated.</p>\n"},{"tags":[],"owner":{"account_id":1132822,"reputation":243,"user_id":1118502,"accept_rate":29,"display_name":"daemonThread"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454394311,"creation_date":1454346866,"answer_id":35136395,"question_id":34802667,"body_markdown":"Try running your test code with java -XshowSettings:properties  option and make sure your destination path for system libraries and in the output of this command, library path values are the same","title":"Unit test Java class that loads native library","body":"<p>Try running your test code with java -XshowSettings:properties  option and make sure your destination path for system libraries and in the output of this command, library path values are the same</p>\n"},{"tags":[],"owner":{"account_id":1839873,"reputation":2432,"user_id":1669501,"accept_rate":38,"display_name":"dawid gdanski"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1492149584,"creation_date":1454357775,"answer_id":35139514,"question_id":34802667,"body_markdown":"I am not sure whether this solves your problem or not but so far nobody has mentioned about strategy pattern for dealing with classes preloading library during their creation.\r\n\r\nLet&#39;s see the example:\r\n\r\nWe want to implement Fibonacci solver class. Assuming that we provided implementation in the native code and managed to generate the native library, we can implement the following:\r\n\r\n    public interface Fibonacci {\r\n         long calculate(int steps);\r\n    }\r\n\r\nFirstly, we provide our native implementation:\r\n\r\n    public final class FibonacciNative implements Fibonacci {\r\n        static {\r\n          System.loadLibrary(&quot;myfibonacci&quot;);\r\n        }\r\n    \r\n        public native long calculate(int steps);\r\n    }\r\n\r\nSecondly, we provide Java implementation for Fibonacci solver:\r\n\r\n    public final class FibonacciJava implements Fibonacci {\r\n       \r\n       @Override\r\n       public long calculate(int steps) {\r\n           if(steps &gt; 1) {\r\n               return calculate(steps-2) + calculate(steps-1);\r\n           }\r\n           return steps;\r\n       }\r\n    }\r\n\r\nThirdly, we wrap the solvers with parental class choosing its own implementation during its instantiation:\r\n\r\n    public class FibonnaciSolver implements Fibonacci {\r\n        \r\n       private static final Fibonacci STRATEGY;\r\n    \r\n       static {\r\n          Fibonacci implementation;\r\n          try {\r\n             implementation = new FibonnaciNative();\r\n          } catch(Throwable e) {\r\n             implementation = new FibonnaciJava();\r\n          }\r\n          \r\n          STRATEGY = implementation;\r\n       }\r\n    \r\n       @Override\r\n       public long calculate(int steps) {\r\n           return STRATEGY.calculate(steps);\r\n       }\r\n    \r\n    }\r\n\r\nThus, the problem with finding path to the library using strategy. This case, however, does not resolve the problem if the native library is really necessary to be included during the test. It does not neither solve the problem if the native library is a third-party library.\r\n\r\nBasically, this gets around the native library load problem by mocking out the native code for java code.\r\n\r\nHope this helps somehow:)","title":"Unit test Java class that loads native library","body":"<p>I am not sure whether this solves your problem or not but so far nobody has mentioned about strategy pattern for dealing with classes preloading library during their creation.</p>\n\n<p>Let's see the example:</p>\n\n<p>We want to implement Fibonacci solver class. Assuming that we provided implementation in the native code and managed to generate the native library, we can implement the following:</p>\n\n<pre><code>public interface Fibonacci {\n     long calculate(int steps);\n}\n</code></pre>\n\n<p>Firstly, we provide our native implementation:</p>\n\n<pre><code>public final class FibonacciNative implements Fibonacci {\n    static {\n      System.loadLibrary(\"myfibonacci\");\n    }\n\n    public native long calculate(int steps);\n}\n</code></pre>\n\n<p>Secondly, we provide Java implementation for Fibonacci solver:</p>\n\n<pre><code>public final class FibonacciJava implements Fibonacci {\n\n   @Override\n   public long calculate(int steps) {\n       if(steps &gt; 1) {\n           return calculate(steps-2) + calculate(steps-1);\n       }\n       return steps;\n   }\n}\n</code></pre>\n\n<p>Thirdly, we wrap the solvers with parental class choosing its own implementation during its instantiation:</p>\n\n<pre><code>public class FibonnaciSolver implements Fibonacci {\n\n   private static final Fibonacci STRATEGY;\n\n   static {\n      Fibonacci implementation;\n      try {\n         implementation = new FibonnaciNative();\n      } catch(Throwable e) {\n         implementation = new FibonnaciJava();\n      }\n\n      STRATEGY = implementation;\n   }\n\n   @Override\n   public long calculate(int steps) {\n       return STRATEGY.calculate(steps);\n   }\n\n}\n</code></pre>\n\n<p>Thus, the problem with finding path to the library using strategy. This case, however, does not resolve the problem if the native library is really necessary to be included during the test. It does not neither solve the problem if the native library is a third-party library.</p>\n\n<p>Basically, this gets around the native library load problem by mocking out the native code for java code.</p>\n\n<p>Hope this helps somehow:)</p>\n"},{"tags":[],"owner":{"account_id":3226645,"reputation":5666,"user_id":2722870,"accept_rate":65,"display_name":"ThanosFisherman"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1454543461,"creation_date":1454543461,"answer_id":35190032,"question_id":34802667,"body_markdown":"The only solution I found that works without hacks is to use JUnit through instrumentation testing (androidTest directory).\r\nMy class can now be tested fine but with help of the android device or emulator.","title":"Unit test Java class that loads native library","body":"<p>The only solution I found that works without hacks is to use JUnit through instrumentation testing (androidTest directory).\nMy class can now be tested fine but with help of the android device or emulator.</p>\n"},{"tags":[],"owner":{"account_id":157752,"reputation":19944,"user_id":375929,"display_name":"Ivan Bartsov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1509720578,"creation_date":1506489394,"answer_id":46439968,"question_id":34802667,"body_markdown":"There **is** a way to configure library path of Gradle-run VM for local unit tests, and I&#39;m going to describe it below, but spoiler: in my expericence, @ThanosFisherman is right: local unit tests for stuff that uses the Android NDK seem to be a fools errand right now.\r\n\r\nSo, for anyone else looking for a way to load shared (i.e. `.so`) libraries into unit tests with gradle, here&#39;s the somewhat lengthy abstract:\r\n\r\nThe goal is to set the shared library lookup path for the JVM running the unit tests.\r\n\r\nAlthoug many people suggest putting the lib path into `java.library.path`, I found that it **doesn&#39;t work**, at least not on my linux machine. (also, [same results in this CodeRanch thread][1])\r\n\r\nWhat **does work** though is setting the `LD_LIBRARY_PATH` os environment variable (or `PATH` is the closest synonym in Windows)\r\n\r\n**Using Gradle:**\r\n\r\n    // module-level build.gradle\r\n    apply plugin: &#39;com.android.library&#39; // or application\r\n\r\n    android {\r\n        ...\r\n\r\n        testOptions {\r\n            unitTests {\r\n                all {\r\n                    // This is where we have access to the properties of gradle&#39;s Test class,\r\n                    // look it  up if you want to customize more test parameters\r\n\r\n                    // next we take our cmake output dir for whatever architecture\r\n                    // you can also put some 3rd party libs here, or override\r\n                    // the implicitly linked stuff (libc, libm and others)\r\n\r\n                    def libpath = &#39;&#39; + projectDir + &#39;/build/intermediates/cmake/debug/obj/x86_64/&#39;\r\n                        +&#39;:/home/developer/my-project/some-sdk/lib&#39;\r\n\r\n                    environment &#39;LD_LIBRARY_PATH&#39;, libpath\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nWith that, you can run, e.g. `./gradlew :mymodule:testDebugUnitTest` and the native libs will be looked for in the paths that you specified.\r\n\r\n**Using Android Studio JUnit plugin**\r\nFor the Android Studio&#39;s JUnit plugin, you can specify the VM options and the environment variables in the test configuration&#39;s settings, so just run a JUnit test (right-clicking on a test method or whatever) and then edit the Run Configuration:\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\nAlthough it sounds like &quot;mission accomplished&quot;, I found that when using `libc.so, libm.so` and others from my os `/usr/lib` gives me version errors (probably because my own library is compiled by cmake with the android ndk toolkit against it&#39;s own platform libs). And using the platform libs from the ndk packages brought down the JVM wih a `SIGSEGV` error (due to incompatibility of the ndk platform libs with the host os environment)\r\n\r\n**Update** As @AlexCohn incisively pointed out in the comments, one has to build against the host environment libs for this to work; even though your machine most likely is *x86_64*, the *x86_64* binaries built against NDK environment will not do.\r\n\r\nThere may be something I overlooked, obviously, and I&#39;ll appreciate any feedback, but for now I&#39;m dropping the whole idea in favor of instrumented tests.\r\n\r\n  [1]: https://coderanch.com/t/377174/java/java-library-path\r\n  [2]: https://i.stack.imgur.com/kgD7G.png\r\n  [3]: https://i.stack.imgur.com/vH7FB.png","title":"Unit test Java class that loads native library","body":"<p>There <strong>is</strong> a way to configure library path of Gradle-run VM for local unit tests, and I'm going to describe it below, but spoiler: in my expericence, @ThanosFisherman is right: local unit tests for stuff that uses the Android NDK seem to be a fools errand right now.</p>\n\n<p>So, for anyone else looking for a way to load shared (i.e. <code>.so</code>) libraries into unit tests with gradle, here's the somewhat lengthy abstract:</p>\n\n<p>The goal is to set the shared library lookup path for the JVM running the unit tests.</p>\n\n<p>Althoug many people suggest putting the lib path into <code>java.library.path</code>, I found that it <strong>doesn't work</strong>, at least not on my linux machine. (also, <a href=\"https://coderanch.com/t/377174/java/java-library-path\" rel=\"nofollow noreferrer\">same results in this CodeRanch thread</a>)</p>\n\n<p>What <strong>does work</strong> though is setting the <code>LD_LIBRARY_PATH</code> os environment variable (or <code>PATH</code> is the closest synonym in Windows)</p>\n\n<p><strong>Using Gradle:</strong></p>\n\n<pre><code>// module-level build.gradle\napply plugin: 'com.android.library' // or application\n\nandroid {\n    ...\n\n    testOptions {\n        unitTests {\n            all {\n                // This is where we have access to the properties of gradle's Test class,\n                // look it  up if you want to customize more test parameters\n\n                // next we take our cmake output dir for whatever architecture\n                // you can also put some 3rd party libs here, or override\n                // the implicitly linked stuff (libc, libm and others)\n\n                def libpath = '' + projectDir + '/build/intermediates/cmake/debug/obj/x86_64/'\n                    +':/home/developer/my-project/some-sdk/lib'\n\n                environment 'LD_LIBRARY_PATH', libpath\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>With that, you can run, e.g. <code>./gradlew :mymodule:testDebugUnitTest</code> and the native libs will be looked for in the paths that you specified.</p>\n\n<p><strong>Using Android Studio JUnit plugin</strong>\nFor the Android Studio's JUnit plugin, you can specify the VM options and the environment variables in the test configuration's settings, so just run a JUnit test (right-clicking on a test method or whatever) and then edit the Run Configuration:\n<a href=\"https://i.stack.imgur.com/kgD7G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kgD7G.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/vH7FB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vH7FB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Although it sounds like \"mission accomplished\", I found that when using <code>libc.so, libm.so</code> and others from my os <code>/usr/lib</code> gives me version errors (probably because my own library is compiled by cmake with the android ndk toolkit against it's own platform libs). And using the platform libs from the ndk packages brought down the JVM wih a <code>SIGSEGV</code> error (due to incompatibility of the ndk platform libs with the host os environment)</p>\n\n<p><strong>Update</strong> As @AlexCohn incisively pointed out in the comments, one has to build against the host environment libs for this to work; even though your machine most likely is <em>x86_64</em>, the <em>x86_64</em> binaries built against NDK environment will not do.</p>\n\n<p>There may be something I overlooked, obviously, and I'll appreciate any feedback, but for now I'm dropping the whole idea in favor of instrumented tests.</p>\n"},{"tags":[],"owner":{"account_id":59653,"reputation":17337,"user_id":178433,"accept_rate":90,"display_name":"gMale"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1558665572,"creation_date":1558665572,"answer_id":56285170,"question_id":34802667,"body_markdown":"**If the library is required for your test**, use an AndroidTest (under `src/androidTest/...`) rather than a junit test. This will allow you to load and use the native library like you do elsewhere in your code.\r\n\r\n**If the library is not required for your test**, simply wrap the system load in a try/catch. This will allow the JNI class to still work in junit tests (under `src/test/...`) and it is a safe workaround, given that it is unlikely to mask the error (something else will certainly fail, if the native lib is actually needed). From there, you can use something like mockito to stub out any method calls that still hit the JNI library.\r\n\r\nFor example in Kotlin:\r\n\r\n```kotlin\r\n    companion object {\r\n        init {\r\n            try {\r\n                System.loadLibrary(&quot;mylibrary&quot;)\r\n            } catch (e: UnsatisfiedLinkError) {\r\n                // log the error or track it in analytics\r\n            }\r\n        }\r\n    }\r\n```","title":"Unit test Java class that loads native library","body":"<p><strong>If the library is required for your test</strong>, use an AndroidTest (under <code>src/androidTest/...</code>) rather than a junit test. This will allow you to load and use the native library like you do elsewhere in your code.</p>\n\n<p><strong>If the library is not required for your test</strong>, simply wrap the system load in a try/catch. This will allow the JNI class to still work in junit tests (under <code>src/test/...</code>) and it is a safe workaround, given that it is unlikely to mask the error (something else will certainly fail, if the native lib is actually needed). From there, you can use something like mockito to stub out any method calls that still hit the JNI library.</p>\n\n<p>For example in Kotlin:</p>\n\n<pre><code>    companion object {\n        init {\n            try {\n                System.loadLibrary(\"mylibrary\")\n            } catch (e: UnsatisfiedLinkError) {\n                // log the error or track it in analytics\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2494278,"reputation":5150,"user_id":2171120,"display_name":"mirabilos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607286595,"creation_date":1607286595,"answer_id":65172775,"question_id":34802667,"body_markdown":"This is very, very tricky. Setting `java.library.path` does not work, but trying to understand [someone else’s Mac OSX approach](https://stackoverflow.com/a/47325408/2171120) I eventually found a working solution.\r\n\r\nLegal release: all code examples directly copied into this post are available under [CC0](https://creativecommons.org/publicdomain/zero/1.0/legalcode) but it would be appeciated to credit my employer **[⮡ tarent](https://www.tarent.de/)**, the LLCTO project at **[Deutsche Telekom](https://www.telekom.de/)**, and the author `mirabilos`.\r\n\r\n### **CAVEATS** first:\r\n\r\n- with this, you’re testing a version of the native code compiled against your _system_ libraries (usually glibc on GNU/Linux, and on BSD, Mac OSX and Windows it’s even trickier) so adding some instrumented tests should be done anyway, use the unittests only for faster testing of things that actually _can_ be tested on the host OS\r\n\r\n- I’ve only tested this with a GNU/Linux host (and am, in fact, excluding these native tests on all other host OSes, see below)\r\n\r\n  - it should work under unixoid OSes with GNU/BSD-style shared libraries as-is\r\n  - with small adaptions from the “someone else’s” article linked above, it might probably work on Mac OSX\r\n  - Windows… no, just no. Use WSL, which is basically Linux anyway and makes things much easier, and so much closer to Android which is also basically Linux just not GNU\r\n\r\n- IDE integration needs manual steps at each developer’s machine (but these are easily documented, see (much) below)\r\n\r\n### Prerequisites\r\n\r\nYou’ll need to make sure that _all_ build dependencies of your native code are *also* installed in the host system. This includes `cmake` (because we sadly cannot reuse the NDK cmake) and a host C compiler. Note that these introduce further differences in the build: you’re testing something that has been built with the host C compiler (often GCC, not clang like in Android) against the host C library and other libraries by the host clang. **Do** consider this when writing your tests. I had to move one of the tests to instrumented because it was impossible to test under glibc.\r\n\r\nFor filesystem layout, we assume the following:\r\n\r\n- `~/MYPRJ/build.gradle` is the top-level build file (generated by IntelliJ / Android Studio)\r\n- `~/MYPRJ/app/build.gradle` is where the Android code in question is built (generated by IntelliJ / Android Studio)\r\n- `~/MYPRJ/app/src/main/native/CMakeLists.txt` is where the native code is situated\r\n\r\nThis means `build.gradle` (for the app) has something like this already, by the point where you begin wondering about whether your project can be unittested:\r\n\r\n    externalNativeBuild {\r\n        cmake {\r\n            path &quot;src/main/native/CMakeLists.txt&quot;\r\n            return void // WTF‽\r\n        }\r\n    }\r\n\r\n### Make sure your code builds on the host\r\n\r\nDoing this ought to be easy at first glance:\r\n\r\n    $ rm -rf /tmp/build\r\n    $ mkdir /tmp/build\r\n    $ cd /tmp/build\r\n    $ cmake ~/MYPRJ/app/src/main/native/\r\n    $ make\r\n\r\n(Make sure you give `cmake` the _path to the **directory**_ the main `CMakeLists.txt` file is in, but _not_ to that file itself!)\r\n\r\nThis will fail for everything nōntrivial, of course. Most people would use Android logging. (It will also fail because it cannot find `&lt;jni.h&gt;`, and because GNU libc requires an extra `_GNU_SOURCE` definition to access some prototypes, etc…)\r\n\r\nSo I wrote a header to include instead of `&lt;android/log.h&gt;` which abstracts the logging away…\r\n\r\n    #ifndef MYPRJ_ALOG_H\r\n    #define MYPRJ_ALOG_H\r\n    \r\n    #ifndef MYPRJ_ALOG_TAG\r\n    #define MYPRJ_ALOG_TAG &quot;MYPRJ-JNI&quot;\r\n    #endif\r\n    \r\n    #if defined(MYPRJ_ALOG_TYPE) &amp;&amp; (MYPRJ_ALOG_TYPE == 1)\r\n    \r\n    #include &lt;android/log.h&gt;\r\n    \r\n    #define ecnlog_err(msg, ...)    __android_log_print(ANDROID_LOG_ERROR, \\\r\n                MYPRJ_ALOG_TAG, msg, ##__VA_ARGS__)\r\n    #define ecnlog_warn(msg, ...)   __android_log_print(ANDROID_LOG_WARN, \\\r\n                MYPRJ_ALOG_TAG, msg, ##__VA_ARGS__)\r\n    #define ecnlog_info(msg, ...)   __android_log_print(ANDROID_LOG_INFO, \\\r\n                MYPRJ_ALOG_TAG, msg, ##__VA_ARGS__)\r\n    \r\n    #elif defined(MYPRJ_ALOG_TYPE) &amp;&amp; (MYPRJ_ALOG_TYPE == 2)\r\n    \r\n    #include &lt;stdio.h&gt;\r\n    \r\n    #define ecnlog_err(msg, ...)    fprintf(stderr, \\\r\n                &quot;E: [&quot; MYPRJ_ALOG_TAG &quot;] &quot; msg &quot;\\n&quot;, ##__VA_ARGS__)\r\n    #define ecnlog_warn(msg, ...)   fprintf(stderr, \\\r\n                &quot;W: [&quot; MYPRJ_ALOG_TAG &quot;] &quot; msg &quot;\\n&quot;, ##__VA_ARGS__)\r\n    #define ecnlog_info(msg, ...)   fprintf(stderr, \\\r\n                &quot;I: [&quot; MYPRJ_ALOG_TAG &quot;] &quot; msg &quot;\\n&quot;, ##__VA_ARGS__)\r\n    \r\n    #else\r\n    # error What logging system to use?\r\n    #endif\r\n    \r\n    #endif\r\n\r\n… and updated my `CMakeLists.txt` to indicate whether building for NDK (_must_ be default) or native:\r\n\r\n    cmake_minimum_required(VERSION 3.10)\r\n    project(myprj-native)\r\n    \r\n    option(UNDER_NDK        &quot;Build under the Android NDK&quot;   ON)\r\n    \r\n    add_compile_options(-fvisibility=hidden)\r\n    add_compile_options(-Wall -Wextra -Wformat)\r\n    \r\n    add_library(myprj-native SHARED\r\n            alog.h\r\n            myprj-jni.c\r\n            )\r\n    \r\n    if (UNDER_NDK)\r\n            add_definitions(-DECNBITS_ALOG_TYPE=1)\r\n    \r\n            find_library(log-lib log)\r\n            target_link_libraries(myprj-native ${log-lib})\r\n    else (UNDER_NDK)\r\n            add_definitions(-DECNBITS_ALOG_TYPE=2)\r\n            include(FindJNI)\r\n            include_directories(${JNI_INCLUDE_DIRS})\r\n    \r\n            add_definitions(-D_GNU_SOURCE)\r\n    endif (UNDER_NDK)\r\n\r\nNote this also already includes the fix for `&lt;jni.h&gt;` (FindJNI) and the extra definitions.\r\n\r\nNow let’s try to build it again:\r\n\r\n    $ rm -rf /tmp/build\r\n    $ mkdir /tmp/build\r\n    $ cd /tmp/build\r\n    $ cmake -DUNDER_NDK=OFF ~/MYPRJ/app/src/main/native/\r\n    $ make\r\n\r\nIn my case, this was sufficient. If you’re still not there, fix this first before proceeding. If you cannot fix this, give up on buildhost-local unit tests for your JNI code and move the respective tests to instrumented.\r\n\r\n### Let Gradle build the host-native code\r\n\r\nAdd the following to the app `build.gradle`:\r\n\r\n    def dirForNativeNoNDK = project.layout.buildDirectory.get().dir(&quot;native-noNDK&quot;)\r\n    def srcForNativeNoNDK = project.layout.projectDirectory.dir(&quot;src/main/native&quot;).asFile\r\n    \r\n    task createNativeNoNDK() {\r\n        def dstdir = dirForNativeNoNDK.asFile\r\n        if (!dstdir.exists()) dstdir.mkdirs()\r\n    }\r\n    task buildCMakeNativeNoNDK(type: Exec) {\r\n        dependsOn createNativeNoNDK\r\n        workingDir dirForNativeNoNDK\r\n        commandLine &quot;/usr/bin/env&quot;, &quot;cmake&quot;, &quot;-DUNDER_NDK=OFF&quot;, srcForNativeNoNDK.absolutePath\r\n    }\r\n    task buildGMakeNativeNoNDK(type: Exec) {\r\n        dependsOn buildCMakeNativeNoNDK\r\n        workingDir dirForNativeNoNDK\r\n        commandLine &quot;/usr/bin/env&quot;, &quot;make&quot;\r\n    }\r\n    \r\n    project.afterEvaluate {\r\n        if (org.gradle.internal.os.OperatingSystem.current().isLinux()) {\r\n            testDebugUnitTest {\r\n                dependsOn buildGMakeNativeNoNDK\r\n                systemProperty &quot;java.library.path&quot;, dirForNativeNoNDK.asFile.absolutePath + &quot;:&quot; + System.getProperty(&quot;java.library.path&quot;)\r\n            }\r\n            testReleaseUnitTest {\r\n                dependsOn buildGMakeNativeNoNDK\r\n                systemProperty &quot;java.library.path&quot;, dirForNativeNoNDK.asFile.absolutePath + &quot;:&quot; + System.getProperty(&quot;java.library.path&quot;)\r\n            }\r\n        }\r\n    }\r\n\r\nThis defines a few new tasks to compile the buildhost-native version of the shared library, and hooks this up if the host OS is “Linux”. (This syntax will also work for other unixoid OSes — BSD, Mac OSX — but not for Windows. But we can probably test this under Linux only anyway. WSL counts as Linux.) It also sets up the JVM library path so that `../gradlew test` will let the JVM pick up the library from its path.\r\n\r\n### Loose ends\r\n\r\nThere’s a few loose ends you might have noticed here:\r\n\r\n- In the last paragraph of the previous section, I mentioned that `../gradlew test` will pick up the library. Testing from the IDE will not work yet; this involves manual setup.\r\n\r\n- I mentioned that the relevant unit tests must be skipped if the buildhost OS is not “Linux”; we have yet to do that. Unfortunately, JUnit 4 lacks such facilities, but switching the unit tests to JUnit 5 “Jupiter” will allow us to do that. (We’re _not_ switching the instrumented tests, though; that’d be more invasive.)\r\n\r\n- You’ll probably not yet have noticed, but the logging output from the native code will not show up thanks to Gradle’s default settings which we’ll need to change.\r\n\r\nSo, let’s do that. First, edit your app `build.gradle` file again. There will be a `dependencies {` block. We’ll need to fill that with suitable dependencies for either JUnit:\r\n\r\n    dependencies {\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.7.0&#39;\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.7.0&#39;\r\n    \r\n        //noinspection GradleDependency\r\n        androidTestImplementation &#39;com.android.support.test:runner:1.0.1&#39;\r\n        //noinspection GradleDependency\r\n        androidTestImplementation &#39;com.android.support.test.espresso:espresso-core:3.0.1&#39;\r\n        //noinspection GradleDependency\r\n        androidTestImplementation &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\nYou’ll also have a line `apply plugin: &#39;com.android.application&#39;` (or perhaps `apply plugin: &#39;com.android.library&#39;`) at the top. Directly below that line, insert this one:\r\n\r\n    apply plugin: &#39;de.mannodermaus.android-junit5&#39;\r\n\r\nAlso, make sure that, under `android { defaultConfig {` the `testInstrumentationRunner` is still `&quot;android.support.test.runner.AndroidJUnitRunner&quot;` (the default as generated by IntelliJ / Android Studio).\r\n\r\nNext, edit the _top-level_ `~/MYPRJ/build.gradle` file. You’ll already have a `buildscript { dependencies {` and will have to add a line to that section to make the JUnit5 plugin available in the first place:\r\n\r\n            //noinspection GradleDependency\r\n            classpath &#39;de.mannodermaus.gradle.plugins:android-junit5:1.5.2.0&#39;\r\n\r\nThen, add a new section under `allprojects {`:\r\n\r\n        tasks.withType(Test) {\r\n            testLogging {\r\n                outputs.upToDateWhen { false }\r\n                showStandardStreams = true\r\n                exceptionFormat = &#39;full&#39;\r\n            }\r\n            systemProperty &#39;java.util.logging.config.file&#39;, file(&#39;src/test/resources/logging.properties&#39;).getAbsolutePath()\r\n        }\r\n\r\nThis ensures that…\r\n- tests are never skipped because Gradle thinks them up-to-date\r\n- logging output and exceptions are shown in full\r\n- if you have [a `~/MYPRJ/app/src/test/resources/logging.properties`](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/test/resources/logging.properties) it will set up `java.util.logging` with this (recommended)\r\n\r\nNow see to your test, something like `~/MYPRJ/app/src/test/java/org/example/packagename/JNITest.java`. First, you should add a “test” that can always run (I use one that merely tests whether my JNI class can be loaded), and ensure it displays some information first:\r\n\r\n    // or Lombok @Log\r\n    private static final java.util.logging.Logger LOGGER = java.util.logging.Logger.getLogger(JNITest.class.getName());\r\n    \r\n    @Test\r\n    public void testClassBoots() {\r\n        LOGGER.info(&quot;running on &quot; + System.getProperty(&quot;os.name&quot;));\r\n        if (!LINUX.isCurrentOs()) {\r\n            LOGGER.warning(&quot;skipping JNI tests&quot;);\r\n        }\r\n        // for copy/paste into IntelliJ run options\r\n        LOGGER.info(&quot;VM options: -Djava.library.path=&quot; +\r\n          System.getProperty(&quot;java.library.path&quot;));\r\n\r\n        LOGGER.info(&quot;testing Java™ part of JNI class…&quot;);\r\n      […]\r\n    }\r\n\r\nThen, annotate the actual JNI tests that need to be skipped on other OSes:\r\n\r\n    @Test\r\n    @EnabledOnOs(LINUX)\r\n    public void testJNIBoots() {\r\n        LOGGER.info(&quot;testing JNI part of JNI class…&quot;);\r\n        final long tid;\r\n        try {\r\n            tid = JNI.n_gettid();\r\n        } catch (Throwable t) {\r\n            LOGGER.log(Level.SEVERE, &quot;it failed&quot;, t);\r\n            Assertions.fail(&quot;JNI does not work&quot;);\r\n            return;\r\n        }\r\n        LOGGER.info(&quot;it also works: &quot; + tid);\r\n        assertNotEquals(0, tid, &quot;but is 0&quot;);\r\n    }\r\n\r\nFor comparison, instrumented tests (unittests that run on the Android device or emulator) — e.g. `~/MYPRJ/app/src/androidTest/java/org/example/packagename/JNIInstrumentedTest.java` — look like this:\r\n\r\n```\r\n@RunWith(AndroidJUnit4.class)\r\npublic class JNIInstrumentedTest {\r\n    @Test\r\n    public void testJNIBoots() {\r\n        Log.i(&quot;ECN-Bits-JNITest&quot;, &quot;testing JNI part of JNI class…&quot;);\r\n        final long tid;\r\n        try {\r\n            tid = JNI.n_gettid();\r\n        } catch (Throwable t) {\r\n            Log.e(&quot;ECN-Bits-JNITest&quot;, &quot;it failed&quot;, t);\r\n            fail(&quot;JNI does not work&quot;);\r\n            return;\r\n        }\r\n        Log.i(&quot;ECN-Bits-JNITest&quot;, &quot;it also works: &quot; + tid);\r\n        assertNotEquals(&quot;but is 0&quot;, 0, tid);\r\n    }\r\n}\r\n```\r\n\r\nSee [Testable.java](https://github.com/tarent/ECN-Bits/blob/dc/android/ecn-lib/src/androidTest/java/de/telekom/llcto/ecn_bits/android/lib/Testable.java) if you need an `assertThrows` for instrumented tests (JUnit 5 already comes with one), by the way. (Note that this does not fall under the CC0 grant above but comes under a permissive licence.)\r\n\r\nNow, you can run both tests, unittests and (if an Android emulator is started or device commected) instrumented tests:\r\n\r\n    ../gradlew test connectedAndroidTest\r\n\r\nDo so. Note the output of the `VM options:` logger call from the buildhost-native unit tests; in fact, copy it to the clipboard. You’ll now need it to set up testing in the IDE.\r\n\r\nIn the Project view (left-side tree), right-click either on your `JNITest` class or the entire `src/test/java/` directory. Click on `Run &#39;JNITest&#39;` (or `Run &#39;Tests in &#39;java&#39;&#39;`), it will fail with an `UnsatisfiedLinkError` as in the original post.\r\n\r\nNow click on the arrow in the test drop-down below the menu bar, then select `Save JNITest configuration`, then do it again and select `Edit configurations…` and select your configuration. Append the entire pasted thing to `VM options:` so the field will now look like `-ea -Djava.library.path=/home/USER/MYPRJ/app/build/native-noNDK:/usr/java/packages/lib:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib` (of course, the actual value will differ) and click OK. Re-run the test, and it will succeed.\r\n\r\nUnfortunately, you’ll have to do this for every native test class once and for the entire directory, so all possible ways of invocation will be covered. You’ll also have to do this manually, by clicking around, for every IDE instance, and these values depend on the path the code was checked out into. I’ve not found a way to automate these (if you know of one, do tell).\r\n\r\n### Exception backtraces\r\n\r\nIf you’re throwing custom exceptions from your code, you’ll most likely wish to include file/lineno/function information. Use a constructor like `MyprjNativeException(final String file, final int line, final String func, final String msg, … /* custom data */, final Throwable cause)` and, after calling `super(msg, cause)` (possibly with a changed message), do this:\r\n\r\n            StackTraceElement[] currentStack = getStackTrace();\r\n            StackTraceElement[] newStack = new StackTraceElement[currentStack.length + 1];\r\n            System.arraycopy(currentStack, 0, newStack, 1, currentStack.length);\r\n            newStack[0] = new StackTraceElement(&quot;&lt;native&gt;&quot;, func, file, line);\r\n            setStackTrace(newStack);\r\n\r\nThen, to throw an exception like this from native code:\r\n\r\n    #define throw(env,...) vthrow(__FILE__, __func__, env, __LINE__, __VA_ARGS__)\r\n    static void vthrow(const char *loc_file, const char *loc_func, JNIEnv *env,\r\n        int loc_line, /* custom args */ const char *msg, ...);\r\n\r\nUse as follows:\r\n\r\n    if (func() != expected)\r\n            throw(env, /* custom args */ &quot;foo&quot;);\r\n\r\nImplementation (assuming you cache class and constructor method references) looks as follows (adjust for custom args):\r\n\r\n    static void vthrow(const char *loc_file, const char *loc_func, JNIEnv *env,\r\n        int loc_line, const char *fmt, ...)\r\n    {\r\n            jthrowable e;\r\n            va_list ap;\r\n            jstring jfile = NULL;\r\n            jint jline = loc_line;\r\n            jstring jfunc = NULL;\r\n            jstring jmsg = NULL;\r\n            jthrowable cause = NULL;\r\n            const char *msg;\r\n            char *msgbuf;\r\n    \r\n            if ((*env)-&gt;PushLocalFrame(env, /* adjust for amount you need */ 5)) {\r\n                    cause = (*env)-&gt;ExceptionOccurred(env);\r\n                    (*env)-&gt;ExceptionClear(env);\r\n                    (*env)-&gt;Throw(env, (*env)-&gt;NewObject(env, classreference, constructorreference,\r\n                        jfile, jline, jfunc, jmsg, /* custom */…, cause));\r\n                    return;\r\n            }\r\n    \r\n            if ((cause = (*env)-&gt;ExceptionOccurred(env))) {\r\n                    /* will be treated as cause */\r\n                    (*env)-&gt;ExceptionClear(env);\r\n            }\r\n    \r\n            va_start(ap, fmt);\r\n            if (vasprintf(&amp;msgbuf, fmt, ap) == -1) {\r\n                    msgbuf = NULL;\r\n                    msg = fmt;\r\n            } else\r\n                    msg = msgbuf;\r\n            va_end(ap);\r\n    \r\n            jmsg = (*env)-&gt;NewStringUTF(env, msg);\r\n            free(msgbuf);\r\n            if (!jmsg)\r\n                    goto onStringError;\r\n    \r\n            if (!(jfunc = (*env)-&gt;NewStringUTF(env, loc_func)))\r\n                    goto onStringError;\r\n    \r\n            /* allocate NewStringUTF for any custom things you need */\r\n            /* exactly like the one for loc_func above */\r\n            /* increase PushLocalFrame argument for each */\r\n    \r\n            jfile = (*env)-&gt;NewStringUTF(env, loc_file);\r\n            if (!jfile) {\r\n     onStringError:\r\n                    (*env)-&gt;ExceptionClear(env);\r\n            }\r\n    \r\n            e = (*env)-&gt;PopLocalFrame(env, (*env)-&gt;NewObject(env, classreference, constructorreference,\r\n                jfile, jline, jfunc, jmsg, /* custom */…, cause));\r\n            if (e)\r\n                    (*env)-&gt;Throw(env, e);\r\n    }\r\n\r\nNow using `__FILE__` will put the full absolute path into the messages and backtraces. This is not very nice. There’s a compiler option to fix that, but NDK r21’s clang is much too old, so we need a workaround.\r\n\r\n`CMakeLists.txt`:\r\n\r\n    if (NOT TOPLEV)\r\n        message(FATAL_ERROR &quot;setting the top-level directory is mandatory&quot;)\r\n    endif (NOT TOPLEV)\r\n\r\n[…]\r\n\r\n    if (UNDER_NDK)\r\n     […]\r\n        execute_process(COMMAND ${CMAKE_CXX_COMPILER} --version OUTPUT_VARIABLE cxx_version_full)\r\n        string(REGEX REPLACE &quot;^Android [^\\n]* clang version ([0-9]+)\\\\.[0-9].*$&quot; &quot;\\\\1&quot; cxx_version_major ${cxx_version_full})\r\n        if (${cxx_version_major} VERSION_GREATER_EQUAL 10)\r\n                add_definitions(&quot;-ffile-prefix-map=${TOPLEV}=&#171;MyPrj&#187;&quot;)\r\n        else (${cxx_version_major} VERSION_GREATER_EQUAL 10)\r\n                add_definitions(-DOLD_CLANG_SRCDIR_HACK=&quot;${TOPLEV}/&quot;)\r\n        endif (${cxx_version_major} VERSION_GREATER_EQUAL 10)\r\n    else (UNDER_NDK)\r\n     […]\r\n        add_definitions(&quot;-ffile-prefix-map=${TOPLEV}=&#171;MyPrj&#187;&quot;)\r\n    endif (UNDER_NDK)\r\n\r\napp `build.gradle`:\r\n\r\n(straight after the apply plugin lines)\r\n\r\n    def dirToplev = project.layout.projectDirectory.asFile.absolutePath\r\n\r\n(inside `android { defaultConfig {` add a new block)\r\n\r\n        externalNativeBuild {\r\n            cmake {\r\n                //noinspection GroovyAssignabilityCheck because Gradle and the IDE have different world views…\r\n                arguments &quot;-DTOPLEV=&quot; + dirToplev\r\n            }\r\n            return void // WTF‽\r\n        }\r\n\r\n(later, where you call cmake)\r\n\r\n    commandLine &quot;/usr/bin/env&quot;, &quot;cmake&quot;, &quot;-DTOPLEV=&quot; + dirToplev, &quot;-DUNDER_NDK=OFF&quot;, srcForNativeNoNDK.absolutePath\r\n\r\nThen, replace the line `jfile = (*env)-&gt;NewStringUTF(env, loc_file);` with the following snippet:\r\n\r\n    #ifdef OLD_CLANG_SRCDIR_HACK\r\n            if (!strncmp(loc_file, OLD_CLANG_SRCDIR_HACK, sizeof(OLD_CLANG_SRCDIR_HACK) - 1) &amp;&amp;\r\n                asprintf(&amp;msgbuf, &quot;&#171;ECN-Bits&#187;/%s&quot;, loc_file + sizeof(OLD_CLANG_SRCDIR_HACK) - 1) != -1) {\r\n                    msg = msgbuf;\r\n            } else {\r\n                    msg = loc_file;\r\n                    msgbuf = NULL;\r\n            }\r\n    #else\r\n    #define msg loc_file\r\n    #endif\r\n            jfile = (*env)-&gt;NewStringUTF(env, msg);\r\n    #ifdef OLD_CLANG_SRCDIR_HACK\r\n            free(msgbuf);\r\n    #else\r\n    #undef msg\r\n    #endif\r\n\r\n## Tieing it all together\r\n\r\nThis all is implemented in the `ECN-Bits` project. I’m posting a permalink because it’s currently on a nōn-default branch but expected to be merged (once the _actual_ functionality is no longer WIP), so be sure to check `master` at some point in time as well (although this permalink is probably a better example as it has the testing down and there’s not as much “actual” code to get in the way). Note that these links do not fall under the CC0 grant from above; the files all have a permissive licence though (the files which don’t have it explicit (gradle/cmake files) have the same as the unittest class permalink), but enough of it was reposted in this article so that should not be a problem for you; these only serve to show an actually-compiling-and-testing example.\r\n\r\nIn this project, it’s not in `app/` but as a separate library module.\r\n\r\n- [top-level `build.gradle`](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/build.gradle)\r\n- [library `build.gradle`](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/build.gradle)\r\n- [instrumented tests](https://github.com/tarent/ECN-Bits/tree/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/androidTest/java/de/telekom/llcto/ecn_bits/android/lib)\r\n- [unittest class](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/test/java/de/telekom/llcto/ecn_bits/android/lib/JNITest.java)\r\n- [unittest logging configuration](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/test/resources/logging.properties)\r\n- [native `CMakeLists.txt`](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/native/CMakeLists.txt)\r\n- [native `alog.h`](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/native/alog.h)\r\n- [native code](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/native/udp.c) including caching the references\r\n- [Java™ code to which the JNI native code attaches](https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/java/de/telekom/llcto/ecn_bits/android/lib/JNI.java) including the Exception class","title":"Unit test Java class that loads native library","body":"<p>This is very, very tricky. Setting <code>java.library.path</code> does not work, but trying to understand <a href=\"https://stackoverflow.com/a/47325408/2171120\">someone else’s Mac OSX approach</a> I eventually found a working solution.</p>\n<p>Legal release: all code examples directly copied into this post are available under <a href=\"https://creativecommons.org/publicdomain/zero/1.0/legalcode\" rel=\"nofollow noreferrer\">CC0</a> but it would be appeciated to credit my employer <strong><a href=\"https://www.tarent.de/\" rel=\"nofollow noreferrer\">⮡ tarent</a></strong>, the LLCTO project at <strong><a href=\"https://www.telekom.de/\" rel=\"nofollow noreferrer\">Deutsche Telekom</a></strong>, and the author <code>mirabilos</code>.</p>\n<h3><strong>CAVEATS</strong> first:</h3>\n<ul>\n<li><p>with this, you’re testing a version of the native code compiled against your <em>system</em> libraries (usually glibc on GNU/Linux, and on BSD, Mac OSX and Windows it’s even trickier) so adding some instrumented tests should be done anyway, use the unittests only for faster testing of things that actually <em>can</em> be tested on the host OS</p>\n</li>\n<li><p>I’ve only tested this with a GNU/Linux host (and am, in fact, excluding these native tests on all other host OSes, see below)</p>\n<ul>\n<li>it should work under unixoid OSes with GNU/BSD-style shared libraries as-is</li>\n<li>with small adaptions from the “someone else’s” article linked above, it might probably work on Mac OSX</li>\n<li>Windows… no, just no. Use WSL, which is basically Linux anyway and makes things much easier, and so much closer to Android which is also basically Linux just not GNU</li>\n</ul>\n</li>\n<li><p>IDE integration needs manual steps at each developer’s machine (but these are easily documented, see (much) below)</p>\n</li>\n</ul>\n<h3>Prerequisites</h3>\n<p>You’ll need to make sure that <em>all</em> build dependencies of your native code are <em>also</em> installed in the host system. This includes <code>cmake</code> (because we sadly cannot reuse the NDK cmake) and a host C compiler. Note that these introduce further differences in the build: you’re testing something that has been built with the host C compiler (often GCC, not clang like in Android) against the host C library and other libraries by the host clang. <strong>Do</strong> consider this when writing your tests. I had to move one of the tests to instrumented because it was impossible to test under glibc.</p>\n<p>For filesystem layout, we assume the following:</p>\n<ul>\n<li><code>~/MYPRJ/build.gradle</code> is the top-level build file (generated by IntelliJ / Android Studio)</li>\n<li><code>~/MYPRJ/app/build.gradle</code> is where the Android code in question is built (generated by IntelliJ / Android Studio)</li>\n<li><code>~/MYPRJ/app/src/main/native/CMakeLists.txt</code> is where the native code is situated</li>\n</ul>\n<p>This means <code>build.gradle</code> (for the app) has something like this already, by the point where you begin wondering about whether your project can be unittested:</p>\n<pre><code>externalNativeBuild {\n    cmake {\n        path &quot;src/main/native/CMakeLists.txt&quot;\n        return void // WTF‽\n    }\n}\n</code></pre>\n<h3>Make sure your code builds on the host</h3>\n<p>Doing this ought to be easy at first glance:</p>\n<pre><code>$ rm -rf /tmp/build\n$ mkdir /tmp/build\n$ cd /tmp/build\n$ cmake ~/MYPRJ/app/src/main/native/\n$ make\n</code></pre>\n<p>(Make sure you give <code>cmake</code> the <em>path to the <strong>directory</strong></em> the main <code>CMakeLists.txt</code> file is in, but <em>not</em> to that file itself!)</p>\n<p>This will fail for everything nōntrivial, of course. Most people would use Android logging. (It will also fail because it cannot find <code>&lt;jni.h&gt;</code>, and because GNU libc requires an extra <code>_GNU_SOURCE</code> definition to access some prototypes, etc…)</p>\n<p>So I wrote a header to include instead of <code>&lt;android/log.h&gt;</code> which abstracts the logging away…</p>\n<pre><code>#ifndef MYPRJ_ALOG_H\n#define MYPRJ_ALOG_H\n\n#ifndef MYPRJ_ALOG_TAG\n#define MYPRJ_ALOG_TAG &quot;MYPRJ-JNI&quot;\n#endif\n\n#if defined(MYPRJ_ALOG_TYPE) &amp;&amp; (MYPRJ_ALOG_TYPE == 1)\n\n#include &lt;android/log.h&gt;\n\n#define ecnlog_err(msg, ...)    __android_log_print(ANDROID_LOG_ERROR, \\\n            MYPRJ_ALOG_TAG, msg, ##__VA_ARGS__)\n#define ecnlog_warn(msg, ...)   __android_log_print(ANDROID_LOG_WARN, \\\n            MYPRJ_ALOG_TAG, msg, ##__VA_ARGS__)\n#define ecnlog_info(msg, ...)   __android_log_print(ANDROID_LOG_INFO, \\\n            MYPRJ_ALOG_TAG, msg, ##__VA_ARGS__)\n\n#elif defined(MYPRJ_ALOG_TYPE) &amp;&amp; (MYPRJ_ALOG_TYPE == 2)\n\n#include &lt;stdio.h&gt;\n\n#define ecnlog_err(msg, ...)    fprintf(stderr, \\\n            &quot;E: [&quot; MYPRJ_ALOG_TAG &quot;] &quot; msg &quot;\\n&quot;, ##__VA_ARGS__)\n#define ecnlog_warn(msg, ...)   fprintf(stderr, \\\n            &quot;W: [&quot; MYPRJ_ALOG_TAG &quot;] &quot; msg &quot;\\n&quot;, ##__VA_ARGS__)\n#define ecnlog_info(msg, ...)   fprintf(stderr, \\\n            &quot;I: [&quot; MYPRJ_ALOG_TAG &quot;] &quot; msg &quot;\\n&quot;, ##__VA_ARGS__)\n\n#else\n# error What logging system to use?\n#endif\n\n#endif\n</code></pre>\n<p>… and updated my <code>CMakeLists.txt</code> to indicate whether building for NDK (<em>must</em> be default) or native:</p>\n<pre><code>cmake_minimum_required(VERSION 3.10)\nproject(myprj-native)\n\noption(UNDER_NDK        &quot;Build under the Android NDK&quot;   ON)\n\nadd_compile_options(-fvisibility=hidden)\nadd_compile_options(-Wall -Wextra -Wformat)\n\nadd_library(myprj-native SHARED\n        alog.h\n        myprj-jni.c\n        )\n\nif (UNDER_NDK)\n        add_definitions(-DECNBITS_ALOG_TYPE=1)\n\n        find_library(log-lib log)\n        target_link_libraries(myprj-native ${log-lib})\nelse (UNDER_NDK)\n        add_definitions(-DECNBITS_ALOG_TYPE=2)\n        include(FindJNI)\n        include_directories(${JNI_INCLUDE_DIRS})\n\n        add_definitions(-D_GNU_SOURCE)\nendif (UNDER_NDK)\n</code></pre>\n<p>Note this also already includes the fix for <code>&lt;jni.h&gt;</code> (FindJNI) and the extra definitions.</p>\n<p>Now let’s try to build it again:</p>\n<pre><code>$ rm -rf /tmp/build\n$ mkdir /tmp/build\n$ cd /tmp/build\n$ cmake -DUNDER_NDK=OFF ~/MYPRJ/app/src/main/native/\n$ make\n</code></pre>\n<p>In my case, this was sufficient. If you’re still not there, fix this first before proceeding. If you cannot fix this, give up on buildhost-local unit tests for your JNI code and move the respective tests to instrumented.</p>\n<h3>Let Gradle build the host-native code</h3>\n<p>Add the following to the app <code>build.gradle</code>:</p>\n<pre><code>def dirForNativeNoNDK = project.layout.buildDirectory.get().dir(&quot;native-noNDK&quot;)\ndef srcForNativeNoNDK = project.layout.projectDirectory.dir(&quot;src/main/native&quot;).asFile\n\ntask createNativeNoNDK() {\n    def dstdir = dirForNativeNoNDK.asFile\n    if (!dstdir.exists()) dstdir.mkdirs()\n}\ntask buildCMakeNativeNoNDK(type: Exec) {\n    dependsOn createNativeNoNDK\n    workingDir dirForNativeNoNDK\n    commandLine &quot;/usr/bin/env&quot;, &quot;cmake&quot;, &quot;-DUNDER_NDK=OFF&quot;, srcForNativeNoNDK.absolutePath\n}\ntask buildGMakeNativeNoNDK(type: Exec) {\n    dependsOn buildCMakeNativeNoNDK\n    workingDir dirForNativeNoNDK\n    commandLine &quot;/usr/bin/env&quot;, &quot;make&quot;\n}\n\nproject.afterEvaluate {\n    if (org.gradle.internal.os.OperatingSystem.current().isLinux()) {\n        testDebugUnitTest {\n            dependsOn buildGMakeNativeNoNDK\n            systemProperty &quot;java.library.path&quot;, dirForNativeNoNDK.asFile.absolutePath + &quot;:&quot; + System.getProperty(&quot;java.library.path&quot;)\n        }\n        testReleaseUnitTest {\n            dependsOn buildGMakeNativeNoNDK\n            systemProperty &quot;java.library.path&quot;, dirForNativeNoNDK.asFile.absolutePath + &quot;:&quot; + System.getProperty(&quot;java.library.path&quot;)\n        }\n    }\n}\n</code></pre>\n<p>This defines a few new tasks to compile the buildhost-native version of the shared library, and hooks this up if the host OS is “Linux”. (This syntax will also work for other unixoid OSes — BSD, Mac OSX — but not for Windows. But we can probably test this under Linux only anyway. WSL counts as Linux.) It also sets up the JVM library path so that <code>../gradlew test</code> will let the JVM pick up the library from its path.</p>\n<h3>Loose ends</h3>\n<p>There’s a few loose ends you might have noticed here:</p>\n<ul>\n<li><p>In the last paragraph of the previous section, I mentioned that <code>../gradlew test</code> will pick up the library. Testing from the IDE will not work yet; this involves manual setup.</p>\n</li>\n<li><p>I mentioned that the relevant unit tests must be skipped if the buildhost OS is not “Linux”; we have yet to do that. Unfortunately, JUnit 4 lacks such facilities, but switching the unit tests to JUnit 5 “Jupiter” will allow us to do that. (We’re <em>not</em> switching the instrumented tests, though; that’d be more invasive.)</p>\n</li>\n<li><p>You’ll probably not yet have noticed, but the logging output from the native code will not show up thanks to Gradle’s default settings which we’ll need to change.</p>\n</li>\n</ul>\n<p>So, let’s do that. First, edit your app <code>build.gradle</code> file again. There will be a <code>dependencies {</code> block. We’ll need to fill that with suitable dependencies for either JUnit:</p>\n<pre><code>dependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'\n\n    //noinspection GradleDependency\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    //noinspection GradleDependency\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n    //noinspection GradleDependency\n    androidTestImplementation 'junit:junit:4.12'\n}\n</code></pre>\n<p>You’ll also have a line <code>apply plugin: 'com.android.application'</code> (or perhaps <code>apply plugin: 'com.android.library'</code>) at the top. Directly below that line, insert this one:</p>\n<pre><code>apply plugin: 'de.mannodermaus.android-junit5'\n</code></pre>\n<p>Also, make sure that, under <code>android { defaultConfig {</code> the <code>testInstrumentationRunner</code> is still <code>&quot;android.support.test.runner.AndroidJUnitRunner&quot;</code> (the default as generated by IntelliJ / Android Studio).</p>\n<p>Next, edit the <em>top-level</em> <code>~/MYPRJ/build.gradle</code> file. You’ll already have a <code>buildscript { dependencies {</code> and will have to add a line to that section to make the JUnit5 plugin available in the first place:</p>\n<pre><code>        //noinspection GradleDependency\n        classpath 'de.mannodermaus.gradle.plugins:android-junit5:1.5.2.0'\n</code></pre>\n<p>Then, add a new section under <code>allprojects {</code>:</p>\n<pre><code>    tasks.withType(Test) {\n        testLogging {\n            outputs.upToDateWhen { false }\n            showStandardStreams = true\n            exceptionFormat = 'full'\n        }\n        systemProperty 'java.util.logging.config.file', file('src/test/resources/logging.properties').getAbsolutePath()\n    }\n</code></pre>\n<p>This ensures that…</p>\n<ul>\n<li>tests are never skipped because Gradle thinks them up-to-date</li>\n<li>logging output and exceptions are shown in full</li>\n<li>if you have <a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/test/resources/logging.properties\" rel=\"nofollow noreferrer\">a <code>~/MYPRJ/app/src/test/resources/logging.properties</code></a> it will set up <code>java.util.logging</code> with this (recommended)</li>\n</ul>\n<p>Now see to your test, something like <code>~/MYPRJ/app/src/test/java/org/example/packagename/JNITest.java</code>. First, you should add a “test” that can always run (I use one that merely tests whether my JNI class can be loaded), and ensure it displays some information first:</p>\n<pre><code>// or Lombok @Log\nprivate static final java.util.logging.Logger LOGGER = java.util.logging.Logger.getLogger(JNITest.class.getName());\n\n@Test\npublic void testClassBoots() {\n    LOGGER.info(&quot;running on &quot; + System.getProperty(&quot;os.name&quot;));\n    if (!LINUX.isCurrentOs()) {\n        LOGGER.warning(&quot;skipping JNI tests&quot;);\n    }\n    // for copy/paste into IntelliJ run options\n    LOGGER.info(&quot;VM options: -Djava.library.path=&quot; +\n      System.getProperty(&quot;java.library.path&quot;));\n\n    LOGGER.info(&quot;testing Java™ part of JNI class…&quot;);\n  […]\n}\n</code></pre>\n<p>Then, annotate the actual JNI tests that need to be skipped on other OSes:</p>\n<pre><code>@Test\n@EnabledOnOs(LINUX)\npublic void testJNIBoots() {\n    LOGGER.info(&quot;testing JNI part of JNI class…&quot;);\n    final long tid;\n    try {\n        tid = JNI.n_gettid();\n    } catch (Throwable t) {\n        LOGGER.log(Level.SEVERE, &quot;it failed&quot;, t);\n        Assertions.fail(&quot;JNI does not work&quot;);\n        return;\n    }\n    LOGGER.info(&quot;it also works: &quot; + tid);\n    assertNotEquals(0, tid, &quot;but is 0&quot;);\n}\n</code></pre>\n<p>For comparison, instrumented tests (unittests that run on the Android device or emulator) — e.g. <code>~/MYPRJ/app/src/androidTest/java/org/example/packagename/JNIInstrumentedTest.java</code> — look like this:</p>\n<pre><code>@RunWith(AndroidJUnit4.class)\npublic class JNIInstrumentedTest {\n    @Test\n    public void testJNIBoots() {\n        Log.i(&quot;ECN-Bits-JNITest&quot;, &quot;testing JNI part of JNI class…&quot;);\n        final long tid;\n        try {\n            tid = JNI.n_gettid();\n        } catch (Throwable t) {\n            Log.e(&quot;ECN-Bits-JNITest&quot;, &quot;it failed&quot;, t);\n            fail(&quot;JNI does not work&quot;);\n            return;\n        }\n        Log.i(&quot;ECN-Bits-JNITest&quot;, &quot;it also works: &quot; + tid);\n        assertNotEquals(&quot;but is 0&quot;, 0, tid);\n    }\n}\n</code></pre>\n<p>See <a href=\"https://github.com/tarent/ECN-Bits/blob/dc/android/ecn-lib/src/androidTest/java/de/telekom/llcto/ecn_bits/android/lib/Testable.java\" rel=\"nofollow noreferrer\">Testable.java</a> if you need an <code>assertThrows</code> for instrumented tests (JUnit 5 already comes with one), by the way. (Note that this does not fall under the CC0 grant above but comes under a permissive licence.)</p>\n<p>Now, you can run both tests, unittests and (if an Android emulator is started or device commected) instrumented tests:</p>\n<pre><code>../gradlew test connectedAndroidTest\n</code></pre>\n<p>Do so. Note the output of the <code>VM options:</code> logger call from the buildhost-native unit tests; in fact, copy it to the clipboard. You’ll now need it to set up testing in the IDE.</p>\n<p>In the Project view (left-side tree), right-click either on your <code>JNITest</code> class or the entire <code>src/test/java/</code> directory. Click on <code>Run 'JNITest'</code> (or <code>Run 'Tests in 'java''</code>), it will fail with an <code>UnsatisfiedLinkError</code> as in the original post.</p>\n<p>Now click on the arrow in the test drop-down below the menu bar, then select <code>Save JNITest configuration</code>, then do it again and select <code>Edit configurations…</code> and select your configuration. Append the entire pasted thing to <code>VM options:</code> so the field will now look like <code>-ea -Djava.library.path=/home/USER/MYPRJ/app/build/native-noNDK:/usr/java/packages/lib:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib</code> (of course, the actual value will differ) and click OK. Re-run the test, and it will succeed.</p>\n<p>Unfortunately, you’ll have to do this for every native test class once and for the entire directory, so all possible ways of invocation will be covered. You’ll also have to do this manually, by clicking around, for every IDE instance, and these values depend on the path the code was checked out into. I’ve not found a way to automate these (if you know of one, do tell).</p>\n<h3>Exception backtraces</h3>\n<p>If you’re throwing custom exceptions from your code, you’ll most likely wish to include file/lineno/function information. Use a constructor like <code>MyprjNativeException(final String file, final int line, final String func, final String msg, … /* custom data */, final Throwable cause)</code> and, after calling <code>super(msg, cause)</code> (possibly with a changed message), do this:</p>\n<pre><code>        StackTraceElement[] currentStack = getStackTrace();\n        StackTraceElement[] newStack = new StackTraceElement[currentStack.length + 1];\n        System.arraycopy(currentStack, 0, newStack, 1, currentStack.length);\n        newStack[0] = new StackTraceElement(&quot;&lt;native&gt;&quot;, func, file, line);\n        setStackTrace(newStack);\n</code></pre>\n<p>Then, to throw an exception like this from native code:</p>\n<pre><code>#define throw(env,...) vthrow(__FILE__, __func__, env, __LINE__, __VA_ARGS__)\nstatic void vthrow(const char *loc_file, const char *loc_func, JNIEnv *env,\n    int loc_line, /* custom args */ const char *msg, ...);\n</code></pre>\n<p>Use as follows:</p>\n<pre><code>if (func() != expected)\n        throw(env, /* custom args */ &quot;foo&quot;);\n</code></pre>\n<p>Implementation (assuming you cache class and constructor method references) looks as follows (adjust for custom args):</p>\n<pre><code>static void vthrow(const char *loc_file, const char *loc_func, JNIEnv *env,\n    int loc_line, const char *fmt, ...)\n{\n        jthrowable e;\n        va_list ap;\n        jstring jfile = NULL;\n        jint jline = loc_line;\n        jstring jfunc = NULL;\n        jstring jmsg = NULL;\n        jthrowable cause = NULL;\n        const char *msg;\n        char *msgbuf;\n\n        if ((*env)-&gt;PushLocalFrame(env, /* adjust for amount you need */ 5)) {\n                cause = (*env)-&gt;ExceptionOccurred(env);\n                (*env)-&gt;ExceptionClear(env);\n                (*env)-&gt;Throw(env, (*env)-&gt;NewObject(env, classreference, constructorreference,\n                    jfile, jline, jfunc, jmsg, /* custom */…, cause));\n                return;\n        }\n\n        if ((cause = (*env)-&gt;ExceptionOccurred(env))) {\n                /* will be treated as cause */\n                (*env)-&gt;ExceptionClear(env);\n        }\n\n        va_start(ap, fmt);\n        if (vasprintf(&amp;msgbuf, fmt, ap) == -1) {\n                msgbuf = NULL;\n                msg = fmt;\n        } else\n                msg = msgbuf;\n        va_end(ap);\n\n        jmsg = (*env)-&gt;NewStringUTF(env, msg);\n        free(msgbuf);\n        if (!jmsg)\n                goto onStringError;\n\n        if (!(jfunc = (*env)-&gt;NewStringUTF(env, loc_func)))\n                goto onStringError;\n\n        /* allocate NewStringUTF for any custom things you need */\n        /* exactly like the one for loc_func above */\n        /* increase PushLocalFrame argument for each */\n\n        jfile = (*env)-&gt;NewStringUTF(env, loc_file);\n        if (!jfile) {\n onStringError:\n                (*env)-&gt;ExceptionClear(env);\n        }\n\n        e = (*env)-&gt;PopLocalFrame(env, (*env)-&gt;NewObject(env, classreference, constructorreference,\n            jfile, jline, jfunc, jmsg, /* custom */…, cause));\n        if (e)\n                (*env)-&gt;Throw(env, e);\n}\n</code></pre>\n<p>Now using <code>__FILE__</code> will put the full absolute path into the messages and backtraces. This is not very nice. There’s a compiler option to fix that, but NDK r21’s clang is much too old, so we need a workaround.</p>\n<p><code>CMakeLists.txt</code>:</p>\n<pre><code>if (NOT TOPLEV)\n    message(FATAL_ERROR &quot;setting the top-level directory is mandatory&quot;)\nendif (NOT TOPLEV)\n</code></pre>\n<p>[…]</p>\n<pre><code>if (UNDER_NDK)\n […]\n    execute_process(COMMAND ${CMAKE_CXX_COMPILER} --version OUTPUT_VARIABLE cxx_version_full)\n    string(REGEX REPLACE &quot;^Android [^\\n]* clang version ([0-9]+)\\\\.[0-9].*$&quot; &quot;\\\\1&quot; cxx_version_major ${cxx_version_full})\n    if (${cxx_version_major} VERSION_GREATER_EQUAL 10)\n            add_definitions(&quot;-ffile-prefix-map=${TOPLEV}=«MyPrj»&quot;)\n    else (${cxx_version_major} VERSION_GREATER_EQUAL 10)\n            add_definitions(-DOLD_CLANG_SRCDIR_HACK=&quot;${TOPLEV}/&quot;)\n    endif (${cxx_version_major} VERSION_GREATER_EQUAL 10)\nelse (UNDER_NDK)\n […]\n    add_definitions(&quot;-ffile-prefix-map=${TOPLEV}=«MyPrj»&quot;)\nendif (UNDER_NDK)\n</code></pre>\n<p>app <code>build.gradle</code>:</p>\n<p>(straight after the apply plugin lines)</p>\n<pre><code>def dirToplev = project.layout.projectDirectory.asFile.absolutePath\n</code></pre>\n<p>(inside <code>android { defaultConfig {</code> add a new block)</p>\n<pre><code>    externalNativeBuild {\n        cmake {\n            //noinspection GroovyAssignabilityCheck because Gradle and the IDE have different world views…\n            arguments &quot;-DTOPLEV=&quot; + dirToplev\n        }\n        return void // WTF‽\n    }\n</code></pre>\n<p>(later, where you call cmake)</p>\n<pre><code>commandLine &quot;/usr/bin/env&quot;, &quot;cmake&quot;, &quot;-DTOPLEV=&quot; + dirToplev, &quot;-DUNDER_NDK=OFF&quot;, srcForNativeNoNDK.absolutePath\n</code></pre>\n<p>Then, replace the line <code>jfile = (*env)-&gt;NewStringUTF(env, loc_file);</code> with the following snippet:</p>\n<pre><code>#ifdef OLD_CLANG_SRCDIR_HACK\n        if (!strncmp(loc_file, OLD_CLANG_SRCDIR_HACK, sizeof(OLD_CLANG_SRCDIR_HACK) - 1) &amp;&amp;\n            asprintf(&amp;msgbuf, &quot;«ECN-Bits»/%s&quot;, loc_file + sizeof(OLD_CLANG_SRCDIR_HACK) - 1) != -1) {\n                msg = msgbuf;\n        } else {\n                msg = loc_file;\n                msgbuf = NULL;\n        }\n#else\n#define msg loc_file\n#endif\n        jfile = (*env)-&gt;NewStringUTF(env, msg);\n#ifdef OLD_CLANG_SRCDIR_HACK\n        free(msgbuf);\n#else\n#undef msg\n#endif\n</code></pre>\n<h2>Tieing it all together</h2>\n<p>This all is implemented in the <code>ECN-Bits</code> project. I’m posting a permalink because it’s currently on a nōn-default branch but expected to be merged (once the <em>actual</em> functionality is no longer WIP), so be sure to check <code>master</code> at some point in time as well (although this permalink is probably a better example as it has the testing down and there’s not as much “actual” code to get in the way). Note that these links do not fall under the CC0 grant from above; the files all have a permissive licence though (the files which don’t have it explicit (gradle/cmake files) have the same as the unittest class permalink), but enough of it was reposted in this article so that should not be a problem for you; these only serve to show an actually-compiling-and-testing example.</p>\n<p>In this project, it’s not in <code>app/</code> but as a separate library module.</p>\n<ul>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/build.gradle\" rel=\"nofollow noreferrer\">top-level <code>build.gradle</code></a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/build.gradle\" rel=\"nofollow noreferrer\">library <code>build.gradle</code></a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/tree/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/androidTest/java/de/telekom/llcto/ecn_bits/android/lib\" rel=\"nofollow noreferrer\">instrumented tests</a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/test/java/de/telekom/llcto/ecn_bits/android/lib/JNITest.java\" rel=\"nofollow noreferrer\">unittest class</a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/test/resources/logging.properties\" rel=\"nofollow noreferrer\">unittest logging configuration</a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/native/CMakeLists.txt\" rel=\"nofollow noreferrer\">native <code>CMakeLists.txt</code></a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/native/alog.h\" rel=\"nofollow noreferrer\">native <code>alog.h</code></a></li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/native/udp.c\" rel=\"nofollow noreferrer\">native code</a> including caching the references</li>\n<li><a href=\"https://github.com/tarent/ECN-Bits/blob/4cd2fe4478098b84f76d40bafe1f2888f36a5755/android/ecn-lib/src/main/java/de/telekom/llcto/ecn_bits/android/lib/JNI.java\" rel=\"nofollow noreferrer\">Java™ code to which the JNI native code attaches</a> including the Exception class</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16567032,"reputation":785,"user_id":11971304,"display_name":"mahee96"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640603954,"creation_date":1640602776,"answer_id":70494598,"question_id":34802667,"body_markdown":"Just to clarify, the System.loadlibrary() call was failing because the junit  unit test uses host/system environment which was windows in my case. Hence the loadlibrary() call was trying to search for the .so files in standard shared libary folders. But this isn&#39;t what I was expecting to happen. Instead I wanted the libxxx.so files to be loaded from .aar file(contains android resources, jars, jni libs). \r\n\r\n***This can only happen by two ways:***\r\n1. Baking the libxxx.so into the APK manually: we ourselves place the libxxx.so files into jnilibs dir(which the system will search for when loading the shared lib) under src/java/ root of the apk by copying the required files.\r\n2. adding the .aar as an external dependency to module level gradle build script (implementation/androidTestImplementation), by doing this we make this aar available for link editing used by the apk build process.\r\n\r\nBut in both cases the app runs in the android environment/vm and hence the System.loadlibrary() call will resolve to correct libxxx.so which would be part of the apk. Hence ***NO ISSUES***.\r\n\r\nHowever in case of unit tests, which are does not require instrument(ie, android device) and runs on the JVM running on the host system where the tests are running (ex: windows/linux/mac), The call to System.loadlibrary() resolves only the standard lib paths of host system for finding shared libs/exe and doesn&#39;t refer to android system environment. Hence the ***ISSUES***.\r\n\r\n**Fixes:**\r\n 1. unpack the libxxx.so into some temp dir and add this dir to the system&#39;s library search path (ex: java.library.path, %PATH% variable on windows etc). Now run the required unit tests which doesn&#39;t require the android environment but involves the native code testing using JNI if any. This should work!!\r\n 2. *(Efficient method)* Simply move these type of unit tests to androidTest(ie, Instrumentation tests) so that above explained loading and packing are intact and System.loadlibrary() can successfully find the libxxx.so when running inside the instrument(android device/os). This way you ensure appropriate lib type (x86, x86-64, arm-v7a, arm-v8a(AARCH64)) is invoked on target device and tests are run on specific target devices.","title":"Unit test Java class that loads native library","body":"<p>Just to clarify, the System.loadlibrary() call was failing because the junit  unit test uses host/system environment which was windows in my case. Hence the loadlibrary() call was trying to search for the .so files in standard shared libary folders. But this isn't what I was expecting to happen. Instead I wanted the libxxx.so files to be loaded from .aar file(contains android resources, jars, jni libs).</p>\n<p><em><strong>This can only happen by two ways:</strong></em></p>\n<ol>\n<li>Baking the libxxx.so into the APK manually: we ourselves place the libxxx.so files into jnilibs dir(which the system will search for when loading the shared lib) under src/java/ root of the apk by copying the required files.</li>\n<li>adding the .aar as an external dependency to module level gradle build script (implementation/androidTestImplementation), by doing this we make this aar available for link editing used by the apk build process.</li>\n</ol>\n<p>But in both cases the app runs in the android environment/vm and hence the System.loadlibrary() call will resolve to correct libxxx.so which would be part of the apk. Hence <em><strong>NO ISSUES</strong></em>.</p>\n<p>However in case of unit tests, which are does not require instrument(ie, android device) and runs on the JVM running on the host system where the tests are running (ex: windows/linux/mac), The call to System.loadlibrary() resolves only the standard lib paths of host system for finding shared libs/exe and doesn't refer to android system environment. Hence the <em><strong>ISSUES</strong></em>.</p>\n<p><strong>Fixes:</strong></p>\n<ol>\n<li>unpack the libxxx.so into some temp dir and add this dir to the system's library search path (ex: java.library.path, %PATH% variable on windows etc). Now run the required unit tests which doesn't require the android environment but involves the native code testing using JNI if any. This should work!!</li>\n<li><em>(Efficient method)</em> Simply move these type of unit tests to androidTest(ie, Instrumentation tests) so that above explained loading and packing are intact and System.loadlibrary() can successfully find the libxxx.so when running inside the instrument(android device/os). This way you ensure appropriate lib type (x86, x86-64, arm-v7a, arm-v8a(AARCH64)) is invoked on target device and tests are run on specific target devices.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8570757,"reputation":2614,"user_id":6421759,"accept_rate":57,"display_name":"Faustino Gagneten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686327200,"creation_date":1686327200,"answer_id":76442068,"question_id":34802667,"body_markdown":"You can always do:\r\n\r\n     // In this case, I&#39;m using Mockk\r\n     mockkStatic(System::class)\r\n     every { System.loadLibrary(&quot;yourlibname&quot;) } returns Unit\r\n\r\n\r\nTo avoid your unit case crash.","title":"Unit test Java class that loads native library","body":"<p>You can always do:</p>\n<pre><code> // In this case, I'm using Mockk\n mockkStatic(System::class)\n every { System.loadLibrary(&quot;yourlibname&quot;) } returns Unit\n</code></pre>\n<p>To avoid your unit case crash.</p>\n"}],"owner":{"account_id":3226645,"reputation":5666,"user_id":2722870,"accept_rate":65,"display_name":"ThanosFisherman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25603,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":35190032,"answer_count":10,"score":74,"last_activity_date":1686327200,"creation_date":1452819587,"question_id":34802667,"body_markdown":"I&#39;m running unit tests in Android Studio. I have a Java class that loads a native library with the following code\r\n\r\n     static\r\n        {\r\n           System.loadLibrary(&quot;mylibrary&quot;);\r\n        }\r\nBut when I test this class inside my `src/test` directory I get \r\n\r\n    java.lang.UnsatisfiedLinkError: no mylibrary in java.library.path\r\n    \tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1864)\r\n    \tat java.lang.Runtime.loadLibrary0(Runtime.java:870)\r\n    \tat java.lang.System.loadLibrary(System.java:1122)\r\n\r\nHow can I make it find the path of native .so libraries which is located at `src/main/libs` in order to unit test without errors?\r\n\r\nNote: inside `src/main/libs` directory I have 3 more subdirectories: `armeabi`, `mips` and `x86`. Each one of those contains the proper .so file. I&#39;m using the **Non experimental version** for building NDK libs.\r\n\r\nI don&#39;t wanna use other 3rd party testing libraries as all my other &quot;pure&quot; java classes can be unit tested fine. But if that&#39;s not possible then I&#39;m open to alternatives.\r\n\r\nHere is my test code which throws the error\r\n\r\n       @Test\r\n        public void testNativeClass() throws Exception\r\n        {\r\n            MyNativeJavaClass test = new MyNativeJavaClass(&quot;lalalal&quot;)\r\n            List&lt;String&gt; results = test.getResultsFromNativeMethodAndPutThemInArrayList();\r\n            assertEquals(&quot;There should be only three result&quot;, 3, results.size());\r\n        }","title":"Unit test Java class that loads native library","body":"<p>I'm running unit tests in Android Studio. I have a Java class that loads a native library with the following code</p>\n\n<pre><code> static\n    {\n       System.loadLibrary(\"mylibrary\");\n    }\n</code></pre>\n\n<p>But when I test this class inside my <code>src/test</code> directory I get </p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: no mylibrary in java.library.path\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1864)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:870)\n    at java.lang.System.loadLibrary(System.java:1122)\n</code></pre>\n\n<p>How can I make it find the path of native .so libraries which is located at <code>src/main/libs</code> in order to unit test without errors?</p>\n\n<p>Note: inside <code>src/main/libs</code> directory I have 3 more subdirectories: <code>armeabi</code>, <code>mips</code> and <code>x86</code>. Each one of those contains the proper .so file. I'm using the <strong>Non experimental version</strong> for building NDK libs.</p>\n\n<p>I don't wanna use other 3rd party testing libraries as all my other \"pure\" java classes can be unit tested fine. But if that's not possible then I'm open to alternatives.</p>\n\n<p>Here is my test code which throws the error</p>\n\n<pre><code>   @Test\n    public void testNativeClass() throws Exception\n    {\n        MyNativeJavaClass test = new MyNativeJavaClass(\"lalalal\")\n        List&lt;String&gt; results = test.getResultsFromNativeMethodAndPutThemInArrayList();\n        assertEquals(\"There should be only three result\", 3, results.size());\n    }\n</code></pre>\n"},{"tags":["java","selenium-webdriver","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679140900,"creation_date":1679139900,"answer_id":75775660,"question_id":75775564,"body_markdown":"According to selenium `v4.8.0` changelog, below is the supported CDP versions:\r\n[![enter image description here][1]][1]\r\n\r\nReference link: https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\r\n\r\nYou chrome is on version `111`. This incompatibility in the versions is the reason for warning on your console.\r\n\r\n**Solution:**\r\n- If you need this warning to disappear, you need to downgrade the chrome version to `109`\r\n- Having said that, I don&#39;t think this warning will cause you any issues while running your code. You can ignore the warning and proceed with it.\r\n\r\n  [1]: https://i.stack.imgur.com/Fsrv0.png","title":"WARNING: Unable to find an exact match for CDP version 111","body":"<p>According to selenium <code>v4.8.0</code> changelog, below is the supported CDP versions:\n<a href=\"https://i.stack.imgur.com/Fsrv0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fsrv0.png\" alt=\"enter image description here\" /></a></p>\n<p>Reference link: <a href=\"https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG</a></p>\n<p>You chrome is on version <code>111</code>. This incompatibility in the versions is the reason for warning on your console.</p>\n<p><strong>Solution:</strong></p>\n<ul>\n<li>If you need this warning to disappear, you need to downgrade the chrome version to <code>109</code></li>\n<li>Having said that, I don't think this warning will cause you any issues while running your code. You can ignore the warning and proceed with it.</li>\n</ul>\n"}],"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":732,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686327009,"creation_date":1679138875,"question_id":75775564,"body_markdown":"Why am I getting the following error? `WARNING: Unable to find an exact match for CDP version 111`, so returning the closest version found: 109?\r\n\r\nIn my pom.xml file I have the following dependencies:\r\n\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;SeleniumAutomationAssertions&lt;/groupId&gt;\r\n  &lt;artifactId&gt;SeleniumAutomationAssertions&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;build&gt;\r\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;release&gt;17&lt;/release&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;dependencies&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;4.8.0&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;4.8.0&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nMy Chrome version is up to date (Version 111.0.5563.64)\r\n\r\n\r\nFollowing is the code which I&#39;m trying to execute:\r\n\r\n\r\n```\r\npackage testcases;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\nimport org.testng.Assert;\r\nimport org.testng.annotations.BeforeMethod;\r\nimport org.testng.annotations.Test;\r\n\r\nimport Verify.Compare;\r\n\r\npublic class ValidateElementExistsByXpath {\r\n\t\r\n\tWebDriver driver;\r\n\tboolean result;\r\n\t@BeforeMethod\r\n\tpublic void createDriver()\r\n\t\r\n\t{\r\n\t   System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/imtiyaz/Documents/chromedriver&quot;);\r\n\t\tdriver = new ChromeDriver();\r\n\t\tdriver.get(&quot;https://www.facebook.com&quot;);\r\n\t\tdriver.findElement(By.xpath(&quot;//button[text()=&#39;Allow essential and optional cookies&#39;]&quot;)).click();\r\n\r\n\t\t\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\tWebDriver driver = new ChromeDriver(options);\r\n\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t@Test\r\n\tpublic void testcase3()\r\n\t{\r\n\t\tdriver.findElement(By.id(&quot;email&quot;)).sendKeys(&quot;Hello&quot;);\r\n\t\tCompare.ValidateElementExists(driver, &quot;//input[@id=&#39;pass&#39;]&quot;); //This is the xpath which will be checked, will return either true or  false, so I&#39;ll set &#39;boolean result&#39; above\r\n\t\tAssert.assertTrue(result); //I&#39;m expecting that the element should exist, hence using assertTrue\r\n\t\t\r\n\t\r\n\t}\r\n\t\r\n\r\n}\r\n```\r\n\r\n\r\nI initially added `selenium-http-jdk-client` in pom.xml and using `System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);` within my code and also updated my chrome version as well as the selenium-java version in pom.xml file and selenium-http-jdk-client to 4.8.0","title":"WARNING: Unable to find an exact match for CDP version 111","body":"<p>Why am I getting the following error? <code>WARNING: Unable to find an exact match for CDP version 111</code>, so returning the closest version found: 109?</p>\n<p>In my pom.xml file I have the following dependencies:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;SeleniumAutomationAssertions&lt;/groupId&gt;\n  &lt;artifactId&gt;SeleniumAutomationAssertions&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;release&gt;17&lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n        &lt;version&gt;4.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>My Chrome version is up to date (Version 111.0.5563.64)</p>\n<p>Following is the code which I'm trying to execute:</p>\n<pre><code>package testcases;\n\nimport java.util.concurrent.TimeUnit;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.testng.Assert;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\nimport Verify.Compare;\n\npublic class ValidateElementExistsByXpath {\n    \n    WebDriver driver;\n    boolean result;\n    @BeforeMethod\n    public void createDriver()\n    \n    {\n       System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/imtiyaz/Documents/chromedriver&quot;);\n        driver = new ChromeDriver();\n        driver.get(&quot;https://www.facebook.com&quot;);\n        driver.findElement(By.xpath(&quot;//button[text()='Allow essential and optional cookies']&quot;)).click();\n\n        \n    ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n    WebDriver driver = new ChromeDriver(options);\n    \n        \n        \n        \n    }\n    \n    @Test\n    public void testcase3()\n    {\n        driver.findElement(By.id(&quot;email&quot;)).sendKeys(&quot;Hello&quot;);\n        Compare.ValidateElementExists(driver, &quot;//input[@id='pass']&quot;); //This is the xpath which will be checked, will return either true or  false, so I'll set 'boolean result' above\n        Assert.assertTrue(result); //I'm expecting that the element should exist, hence using assertTrue\n        \n    \n    }\n    \n\n}\n</code></pre>\n<p>I initially added <code>selenium-http-jdk-client</code> in pom.xml and using <code>System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);</code> within my code and also updated my chrome version as well as the selenium-java version in pom.xml file and selenium-http-jdk-client to 4.8.0</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":2,"creation_date":1686318492,"post_id":76440874,"comment_id":134786534,"body_markdown":"If they are in different classes, they are different variables who just happen to have the same name.","body":"If they are in different classes, they are different variables who just happen to have the same name."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1686318723,"post_id":76440874,"comment_id":134786574,"body_markdown":"Does this answer your question? [What is &#39;scope&#39; in Java?](https://stackoverflow.com/questions/38177140/what-is-scope-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38177140/what-is-scope-in-java\">What is &#39;scope&#39; in Java?</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1686325372,"post_id":76440874,"comment_id":134788038,"body_markdown":"Define the variable access using &quot;public&quot; is probably the problem, no access modifier among variables that do have other access modifiers it may be being &quot;default&quot; (package private) . If the classes are in the same package folder you may be able to use &quot;protected&quot; if it&#39;s used nowhere outside, but you will need to use a protected method to call it even with the internal passed class reference if it is a global.","body":"Define the variable access using &quot;public&quot; is probably the problem, no access modifier among variables that do have other access modifiers it may be being &quot;default&quot; (package private) . If the classes are in the same package folder you may be able to use &quot;protected&quot; if it&#39;s used nowhere outside, but you will need to use a protected method to call it even with the internal passed class reference if it is a global."}],"answers":[{"tags":[],"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686320218,"creation_date":1686319836,"answer_id":76441074,"question_id":76440874,"body_markdown":"Your program, as it stands now, has structural problems. It would be better to have `DateSelectionSpinner` as a class that encapsules the whole UI for date selection, instead of providing just pieces for other classes to use. \r\n\r\nBut to keep things easy and not change too much, let&#39;s stick with what we have and make it work...\r\n\r\nFirst, rename the second class to a more fitting name, and split the code into small methods for each part of the date selection it provides:\r\n\r\n\r\n    package foodTracker_View;\r\n    import javax.swing.*;\r\n    import java.time.*;\r\n    import javax.swing.SpinnerNumberModel;\r\n    \r\n    \r\n    /**\r\n     * \r\n     * Diese Klasse beinhaltet die Vorgaben f&#252;r alle graphischen Komponenten, \r\n     * die im Speiseplan f&#252;r die Auswahl des Datums ben&#246;tigt werden\r\n     * \r\n     * @author \r\n     * @version 09.06.23\r\n     *\r\n     */\r\n    \r\n    public class DateSelectionSpinnerFactory {\r\n        private int currentYear = Year.now().getValue();\r\n        private SpinnerNumberModel yearModel = new SpinnerNumberModel(currentYear, currentYear, currentYear + 5, 1 );\r\n\r\n        public JSpinner createYearSelector() {\r\n            return new JSpinner(yearModel);\r\n        }\r\n\r\n        private static String[] months = { &quot;Januar&quot;, &quot;Februar&quot;, &quot;M&#228;rz&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;, &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot; };\r\n        private SpinnerListModel allowedMonths = new SpinnerListModel(months);\r\n\r\n        public JSpinner createMonthSelector {\r\n            return new JSpinner(allowedMonths);\r\n        }\r\n\r\n        private LocalDate currentDate = LocalDate.now();\r\n        private int currentDay = currentDate.getDayOfMonth();\r\n        private int maxDay = 30;\r\n        private SpinnerNumberModel dayModel = new SpinnerNumberModel(currentDay, currentDay, maxDay, 1);\r\n\r\n        public JSpinner createDaySelector {\r\n            return new JSpinner(dayModel);\r\n        }        \r\n    }\r\n\r\nand now let the first class use it:\r\n\r\n    package foodTracker_View;\r\n    import java.awt.*;\r\n    import java.time.LocalDate;\r\n    import javax.swing.*;\r\n    \r\n    /**\r\n     * \r\n     * @author \r\n     * @version 09.06.23\r\n     *\r\n     */\r\n    public class speiseplanDesign extends JPanel {\r\n    \r\n        private JLabel beschriftungSpeiseplan;\r\n        private LocalDate date = LocalDate.now();\r\n        private JFormattedTextField eingabefeldDatum;\r\n        private JPanel datumsauswahl;\r\n        \r\n        public speiseplanDesign(int width, int height) {\r\n            this.setSize(width, height);\r\n            \r\n            this.setBackground(Color.black);            \r\n            this.setLayout(new FlowLayout(FlowLayout.CENTER));\r\n            this.setBorder(BorderFactory.createLineBorder(Color.black, 20, true));\r\n            this.setOpaque(true);\r\n            ScrollPane speisplanScroll = new ScrollPane();\r\n    \r\n            beschriftungSpeiseplan = new JLabel(&quot;Speiseplan vom &quot; + date, JLabel.CENTER);\r\n            this.add(beschriftungSpeiseplan);\r\n            beschriftungSpeiseplan.setOpaque(true);\r\n            \r\n            DateSelectionSpinnerFactory dssf = new DateSelectionSpinnerFactory();\r\n    \r\n            datumsauswahl = new JPanel();\r\n            datumsauswahl.add(dssf.createDaySelector());        \r\n            datumsauswahl.add(dssf.createMonthSelector());\r\n            datumsauswahl.add(dssf.createYearSelector());        \r\n        }           \r\n    }","title":"Why does the compiler not recognize variables I&#39;ve initialized in a different class within the same package?","body":"<p>Your program, as it stands now, has structural problems. It would be better to have <code>DateSelectionSpinner</code> as a class that encapsules the whole UI for date selection, instead of providing just pieces for other classes to use.</p>\n<p>But to keep things easy and not change too much, let's stick with what we have and make it work...</p>\n<p>First, rename the second class to a more fitting name, and split the code into small methods for each part of the date selection it provides:</p>\n<pre><code>package foodTracker_View;\nimport javax.swing.*;\nimport java.time.*;\nimport javax.swing.SpinnerNumberModel;\n\n\n/**\n * \n * Diese Klasse beinhaltet die Vorgaben für alle graphischen Komponenten, \n * die im Speiseplan für die Auswahl des Datums benötigt werden\n * \n * @author \n * @version 09.06.23\n *\n */\n\npublic class DateSelectionSpinnerFactory {\n    private int currentYear = Year.now().getValue();\n    private SpinnerNumberModel yearModel = new SpinnerNumberModel(currentYear, currentYear, currentYear + 5, 1 );\n\n    public JSpinner createYearSelector() {\n        return new JSpinner(yearModel);\n    }\n\n    private static String[] months = { &quot;Januar&quot;, &quot;Februar&quot;, &quot;März&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;, &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot; };\n    private SpinnerListModel allowedMonths = new SpinnerListModel(months);\n\n    public JSpinner createMonthSelector {\n        return new JSpinner(allowedMonths);\n    }\n\n    private LocalDate currentDate = LocalDate.now();\n    private int currentDay = currentDate.getDayOfMonth();\n    private int maxDay = 30;\n    private SpinnerNumberModel dayModel = new SpinnerNumberModel(currentDay, currentDay, maxDay, 1);\n\n    public JSpinner createDaySelector {\n        return new JSpinner(dayModel);\n    }        \n}\n</code></pre>\n<p>and now let the first class use it:</p>\n<pre><code>package foodTracker_View;\nimport java.awt.*;\nimport java.time.LocalDate;\nimport javax.swing.*;\n\n/**\n * \n * @author \n * @version 09.06.23\n *\n */\npublic class speiseplanDesign extends JPanel {\n\n    private JLabel beschriftungSpeiseplan;\n    private LocalDate date = LocalDate.now();\n    private JFormattedTextField eingabefeldDatum;\n    private JPanel datumsauswahl;\n    \n    public speiseplanDesign(int width, int height) {\n        this.setSize(width, height);\n        \n        this.setBackground(Color.black);            \n        this.setLayout(new FlowLayout(FlowLayout.CENTER));\n        this.setBorder(BorderFactory.createLineBorder(Color.black, 20, true));\n        this.setOpaque(true);\n        ScrollPane speisplanScroll = new ScrollPane();\n\n        beschriftungSpeiseplan = new JLabel(&quot;Speiseplan vom &quot; + date, JLabel.CENTER);\n        this.add(beschriftungSpeiseplan);\n        beschriftungSpeiseplan.setOpaque(true);\n        \n        DateSelectionSpinnerFactory dssf = new DateSelectionSpinnerFactory();\n\n        datumsauswahl = new JPanel();\n        datumsauswahl.add(dssf.createDaySelector());        \n        datumsauswahl.add(dssf.createMonthSelector());\n        datumsauswahl.add(dssf.createYearSelector());        \n    }           \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21602398,"reputation":11,"user_id":15930299,"display_name":"Juan Esteban Arboleda Restrepo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686320490,"creation_date":1686319956,"answer_id":76441091,"question_id":76440874,"body_markdown":"The variables you menction: `daySelector`, `monthSelector` and `yearSelector`, are all atributes that belong to the class `DateSelectionSpinner`.\r\n\r\nAs you might know, atributes can be private or public. I asume you want the menctioned atributes to be public. Hence, to begin, I would recommend to add `public` keyword when you declare those atributes, for more clarity.\r\n\r\nNow, to access those atributes, you first need to create an instance of `DateSelectionSpinner`.\r\n\r\nYour code should look something like this:\r\n\r\n**Class speiseplanDesign**\r\n\r\n    public class speiseplanDesign extends JPanel {\r\n    \r\n        private JLabel beschriftungSpeiseplan;\r\n        private LocalDate date = LocalDate.now();\r\n        private JFormattedTextField eingabefeldDatum;\r\n        private JPanel datumsauswahl;\r\n        \r\n        public speiseplanDesign(int width, int height) {\r\n            this.setSize(width, height);\r\n            \r\n            this.setBackground(Color.black);            \r\n            this.setLayout(new FlowLayout(FlowLayout.CENTER));\r\n            this.setBorder(BorderFactory.createLineBorder(Color.black, 20, true));\r\n            this.setOpaque(true);\r\n            ScrollPane speisplanScroll = new ScrollPane();\r\n    \r\n            beschriftungSpeiseplan = new JLabel(&quot;Speiseplan vom &quot; + date, JLabel.CENTER);\r\n            this.add(beschriftungSpeiseplan);\r\n            beschriftungSpeiseplan.setOpaque(true);\r\n            \r\n            datumsauswahl = new JPanel();\r\n            DateSelectionSpinner dss = new DateSelectionSpinner();\r\n            datumsauswahl.add(dss.daySelector);\r\n            datumsauswahl.add(dss.monthSelector);\r\n            datumsauswahl.add(dss.yearSelector);\r\n            \r\n        }           \r\n    }\r\n\r\n**Class DateSelectionSpinner**\r\n\r\n    public class DateSelectionSpinner {\r\n    \r\n        private int currentYear = Year.now().getValue();\r\n        public SpinnerNumberModel yearSelector = new SpinnerNumberModel(currentYear, currentYear, currentYear + 5, 1 );\r\n        \r\n        String[] months = { &quot;Januar&quot;, &quot;Februar&quot;, &quot;M&#228;rz&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;, &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot; };\r\n        private SpinnerListModel allowedMonths = new SpinnerListModel(months);\r\n        public JSpinner monthSelection = new JSpinner(allowedMonths);\r\n        \r\n        private LocalDate currentDate = LocalDate.now();\r\n        private int currentDay = currentDate.getDayOfMonth();\r\n        int maxDay = 30;\r\n        public SpinnerNumberModel daySelector = new SpinnerNumberModel(currentDay, currentDay, maxDay, 1);\r\n    }\r\n\r\n**Some additional comments**\r\n\r\n - It is generally not recommended to have public atributes. You should probably use setters and getters rather than public atributes. You can read about it in [Java Encapsulation][1]\r\n - Class names should always start with capital letters. [Java Naming Conventions][3]\r\n - Most of the concepts I mention (atributes, classes, public, private, etc) are Object Oriented Programming concepts. Since most of what you do in Java is Object Oriented, I would recommend reading [Java OOP][4] if don&#39;t yet feel completely familiar with these concepts.\r\n\r\n\r\n  [1]: https://www.w3schools.com/java/java_encapsulation.asp\r\n  [2]: https://stackoverflow.com/questions/20165544/should-a-java-package-have-only-one-public-class\r\n  [3]: https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\r\n  [4]: https://www.w3schools.com/java/java_oop.asp","title":"Why does the compiler not recognize variables I&#39;ve initialized in a different class within the same package?","body":"<p>The variables you menction: <code>daySelector</code>, <code>monthSelector</code> and <code>yearSelector</code>, are all atributes that belong to the class <code>DateSelectionSpinner</code>.</p>\n<p>As you might know, atributes can be private or public. I asume you want the menctioned atributes to be public. Hence, to begin, I would recommend to add <code>public</code> keyword when you declare those atributes, for more clarity.</p>\n<p>Now, to access those atributes, you first need to create an instance of <code>DateSelectionSpinner</code>.</p>\n<p>Your code should look something like this:</p>\n<p><strong>Class speiseplanDesign</strong></p>\n<pre><code>public class speiseplanDesign extends JPanel {\n\n    private JLabel beschriftungSpeiseplan;\n    private LocalDate date = LocalDate.now();\n    private JFormattedTextField eingabefeldDatum;\n    private JPanel datumsauswahl;\n    \n    public speiseplanDesign(int width, int height) {\n        this.setSize(width, height);\n        \n        this.setBackground(Color.black);            \n        this.setLayout(new FlowLayout(FlowLayout.CENTER));\n        this.setBorder(BorderFactory.createLineBorder(Color.black, 20, true));\n        this.setOpaque(true);\n        ScrollPane speisplanScroll = new ScrollPane();\n\n        beschriftungSpeiseplan = new JLabel(&quot;Speiseplan vom &quot; + date, JLabel.CENTER);\n        this.add(beschriftungSpeiseplan);\n        beschriftungSpeiseplan.setOpaque(true);\n        \n        datumsauswahl = new JPanel();\n        DateSelectionSpinner dss = new DateSelectionSpinner();\n        datumsauswahl.add(dss.daySelector);\n        datumsauswahl.add(dss.monthSelector);\n        datumsauswahl.add(dss.yearSelector);\n        \n    }           \n}\n</code></pre>\n<p><strong>Class DateSelectionSpinner</strong></p>\n<pre><code>public class DateSelectionSpinner {\n\n    private int currentYear = Year.now().getValue();\n    public SpinnerNumberModel yearSelector = new SpinnerNumberModel(currentYear, currentYear, currentYear + 5, 1 );\n    \n    String[] months = { &quot;Januar&quot;, &quot;Februar&quot;, &quot;März&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;, &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot; };\n    private SpinnerListModel allowedMonths = new SpinnerListModel(months);\n    public JSpinner monthSelection = new JSpinner(allowedMonths);\n    \n    private LocalDate currentDate = LocalDate.now();\n    private int currentDay = currentDate.getDayOfMonth();\n    int maxDay = 30;\n    public SpinnerNumberModel daySelector = new SpinnerNumberModel(currentDay, currentDay, maxDay, 1);\n}\n</code></pre>\n<p><strong>Some additional comments</strong></p>\n<ul>\n<li>It is generally not recommended to have public atributes. You should probably use setters and getters rather than public atributes. You can read about it in <a href=\"https://www.w3schools.com/java/java_encapsulation.asp\" rel=\"nofollow noreferrer\">Java Encapsulation</a></li>\n<li>Class names should always start with capital letters. <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java Naming Conventions</a></li>\n<li>Most of the concepts I mention (atributes, classes, public, private, etc) are Object Oriented Programming concepts. Since most of what you do in Java is Object Oriented, I would recommend reading <a href=\"https://www.w3schools.com/java/java_oop.asp\" rel=\"nofollow noreferrer\">Java OOP</a> if don't yet feel completely familiar with these concepts.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686326883,"creation_date":1686326883,"answer_id":76442033,"question_id":76440874,"body_markdown":"To access the _DateSelectionSpinner_ variables from the _speiseplanDesign_ class, you&#39;ll need to instantiate the object.  \r\n_[Creating Objects (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Classes and Objects)](https://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)_.\r\n\r\n\r\n```java\r\nDateSelectionSpinner dateSelectionSpinner = new DateSelectionSpinner();\r\n```\r\n\r\nThen, access the _dateSelectionSpinner_ variables using _[dot-notation](https://en.wikipedia.org/wiki/Property_(programming)#Dot_notation)_.\r\n\r\n```java\r\ndateSelectionSpinner.daySelector\r\n```\r\n\r\n```java\r\ndatumsauswahl = new JPanel();\r\nDateSelectionSpinner dateSelectionSpinner = new DateSelectionSpinner();\r\ndatumsauswahl.add(dateSelectionSpinner.daySelector);    //Error: daySelector cannot be resolved to a\r\nvariable\r\ndatumsauswahl.add(dateSelectionSpinner.monthSelector);   //same issue as above\r\ndatumsauswahl.add(dateSelectionSpinner.yearSelector);    //same issue as above\r\n```\r\n","title":"Why does the compiler not recognize variables I&#39;ve initialized in a different class within the same package?","body":"<p>To access the <em>DateSelectionSpinner</em> variables from the <em>speiseplanDesign</em> class, you'll need to instantiate the object.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html\" rel=\"nofollow noreferrer\">Creating Objects (The Java™ Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>DateSelectionSpinner dateSelectionSpinner = new DateSelectionSpinner();\n</code></pre>\n<p>Then, access the <em>dateSelectionSpinner</em> variables using <em><a href=\"https://en.wikipedia.org/wiki/Property_(programming)#Dot_notation\" rel=\"nofollow noreferrer\">dot-notation</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>dateSelectionSpinner.daySelector\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>datumsauswahl = new JPanel();\nDateSelectionSpinner dateSelectionSpinner = new DateSelectionSpinner();\ndatumsauswahl.add(dateSelectionSpinner.daySelector);    //Error: daySelector cannot be resolved to a\nvariable\ndatumsauswahl.add(dateSelectionSpinner.monthSelector);   //same issue as above\ndatumsauswahl.add(dateSelectionSpinner.yearSelector);    //same issue as above\n</code></pre>\n"}],"owner":{"account_id":28787970,"reputation":1,"user_id":22048034,"display_name":"Juji_0815"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1686326883,"creation_date":1686318300,"question_id":76440874,"body_markdown":"I&#39;m fairly inexperienced in programming, so this might be a very stupid mistake.\r\nI&#39;m trying to reference objects I&#39;ve instantiated in the class &quot;DateSelectionSpinner&quot; in my &quot;speiseplanDesign&quot; class. \r\nThe variables in question are &quot;daySelector&quot;, &quot;monthSelector&quot; and &quot;yearSelector&quot;.\r\nBoth classes are in the same package and I&#39;m using Eclipse for coding.\r\nI&#39;m thankful for any help I can get :)\r\n\r\nThis is the class I want to use the variables in:\r\n```\r\npackage foodTracker_View;\r\nimport java.awt.*;\r\nimport java.time.LocalDate;\r\nimport javax.swing.*;\r\n\r\n/**\r\n * \r\n * @author \r\n * @version 09.06.23\r\n *\r\n */\r\npublic class speiseplanDesign extends JPanel {\r\n\r\n\tprivate JLabel beschriftungSpeiseplan;\r\n\tprivate LocalDate date = LocalDate.now();\r\n\tprivate JFormattedTextField eingabefeldDatum;\r\n\tprivate JPanel datumsauswahl;\r\n\t\r\n\tpublic speiseplanDesign(int width, int height) {\r\n\t\tthis.setSize(width, height);\r\n\t\t\r\n\t\tthis.setBackground(Color.black); \t\t\t\r\n\t\tthis.setLayout(new FlowLayout(FlowLayout.CENTER));\r\n\t\tthis.setBorder(BorderFactory.createLineBorder(Color.black, 20, true));\r\n\t\tthis.setOpaque(true);\r\n\t\tScrollPane speisplanScroll = new ScrollPane();\r\n\r\n\t\tbeschriftungSpeiseplan = new JLabel(&quot;Speiseplan vom &quot; + date, JLabel.CENTER);\r\n\t\tthis.add(beschriftungSpeiseplan);\r\n  \t\tbeschriftungSpeiseplan.setOpaque(true);\r\n\t\t\r\n\t\tdatumsauswahl = new JPanel();\r\n\t\tdatumsauswahl.add(daySelector);    //Error: daySelector cannot be resolved to a           \r\n                                                            variable\r\n\t\tdatumsauswahl.add(monthSelector);\t//same issue as above\r\n\t\tdatumsauswahl.add(yearSelector);\t//same issue as above\r\n\t\t\r\n\t}\t\t\t\r\n}\r\n\r\n```\r\n \r\nThis is the class I&#39;ve defined them in:\r\n\r\n```\r\npackage foodTracker_View;\r\nimport javax.swing.*;\r\nimport java.time.*;\r\nimport javax.swing.SpinnerNumberModel;\r\n\r\n\r\n/**\r\n * \r\n * Diese Klasse beinhaltet die Vorgaben f&#252;r alle graphischen Komponenten, \r\n * die im Speiseplan f&#252;r die Auswahl des Datums ben&#246;tigt werden\r\n * \r\n * @author \r\n * @version 09.06.23\r\n *\r\n */\r\n\r\npublic class DateSelectionSpinner {\r\n\r\n\tprivate int currentYear = Year.now().getValue();\r\n\t\tSpinnerNumberModel yearSelector = new SpinnerNumberModel(currentYear, currentYear, currentYear + 5, 1 );\r\n\t\r\n\tString[] months = { &quot;Januar&quot;, &quot;Februar&quot;, &quot;M&#228;rz&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;, &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot; };\r\n\t\tprivate SpinnerListModel allowedMonths = new SpinnerListModel(months);\r\n\t\tJSpinner monthSelection = new JSpinner(allowedMonths);\r\n\t\r\n\tprivate LocalDate currentDate = LocalDate.now();\r\n\tprivate int currentDay = currentDate.getDayOfMonth();\r\n\tint maxDay = 30;\r\n\t\tSpinnerNumberModel daySelector = new SpinnerNumberModel(currentDay, currentDay, maxDay, 1);\r\n\r\n\t\r\n}\r\n```\r\n\r\nI&#39;ve tried specifically importing the second class to the first one, but that didn&#39;t do anything.","title":"Why does the compiler not recognize variables I&#39;ve initialized in a different class within the same package?","body":"<p>I'm fairly inexperienced in programming, so this might be a very stupid mistake.\nI'm trying to reference objects I've instantiated in the class &quot;DateSelectionSpinner&quot; in my &quot;speiseplanDesign&quot; class.\nThe variables in question are &quot;daySelector&quot;, &quot;monthSelector&quot; and &quot;yearSelector&quot;.\nBoth classes are in the same package and I'm using Eclipse for coding.\nI'm thankful for any help I can get :)</p>\n<p>This is the class I want to use the variables in:</p>\n<pre><code>package foodTracker_View;\nimport java.awt.*;\nimport java.time.LocalDate;\nimport javax.swing.*;\n\n/**\n * \n * @author \n * @version 09.06.23\n *\n */\npublic class speiseplanDesign extends JPanel {\n\n    private JLabel beschriftungSpeiseplan;\n    private LocalDate date = LocalDate.now();\n    private JFormattedTextField eingabefeldDatum;\n    private JPanel datumsauswahl;\n    \n    public speiseplanDesign(int width, int height) {\n        this.setSize(width, height);\n        \n        this.setBackground(Color.black);            \n        this.setLayout(new FlowLayout(FlowLayout.CENTER));\n        this.setBorder(BorderFactory.createLineBorder(Color.black, 20, true));\n        this.setOpaque(true);\n        ScrollPane speisplanScroll = new ScrollPane();\n\n        beschriftungSpeiseplan = new JLabel(&quot;Speiseplan vom &quot; + date, JLabel.CENTER);\n        this.add(beschriftungSpeiseplan);\n        beschriftungSpeiseplan.setOpaque(true);\n        \n        datumsauswahl = new JPanel();\n        datumsauswahl.add(daySelector);    //Error: daySelector cannot be resolved to a           \n                                                            variable\n        datumsauswahl.add(monthSelector);   //same issue as above\n        datumsauswahl.add(yearSelector);    //same issue as above\n        \n    }           \n}\n\n</code></pre>\n<p>This is the class I've defined them in:</p>\n<pre><code>package foodTracker_View;\nimport javax.swing.*;\nimport java.time.*;\nimport javax.swing.SpinnerNumberModel;\n\n\n/**\n * \n * Diese Klasse beinhaltet die Vorgaben für alle graphischen Komponenten, \n * die im Speiseplan für die Auswahl des Datums benötigt werden\n * \n * @author \n * @version 09.06.23\n *\n */\n\npublic class DateSelectionSpinner {\n\n    private int currentYear = Year.now().getValue();\n        SpinnerNumberModel yearSelector = new SpinnerNumberModel(currentYear, currentYear, currentYear + 5, 1 );\n    \n    String[] months = { &quot;Januar&quot;, &quot;Februar&quot;, &quot;März&quot;, &quot;April&quot;, &quot;Mai&quot;, &quot;Juni&quot;, &quot;Juli&quot;, &quot;August&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Dezember&quot; };\n        private SpinnerListModel allowedMonths = new SpinnerListModel(months);\n        JSpinner monthSelection = new JSpinner(allowedMonths);\n    \n    private LocalDate currentDate = LocalDate.now();\n    private int currentDay = currentDate.getDayOfMonth();\n    int maxDay = 30;\n        SpinnerNumberModel daySelector = new SpinnerNumberModel(currentDay, currentDay, maxDay, 1);\n\n    \n}\n</code></pre>\n<p>I've tried specifically importing the second class to the first one, but that didn't do anything.</p>\n"},{"tags":["java","android","gson"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":3,"creation_date":1686324584,"post_id":76441504,"comment_id":134787911,"body_markdown":"What&#39;s the error?","body":"What&#39;s the error?"}],"answers":[{"tags":[],"owner":{"account_id":26729789,"reputation":73,"user_id":20332351,"display_name":"Xuan Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686326622,"creation_date":1686326622,"answer_id":76441997,"question_id":76441504,"body_markdown":"I am not sure about the `response` in your current code, and I assume that it would be the content of your JSON file. You may use `gson.fromJson(response, UnitRes.class)` to parse the file, which is demonstrated as follows:\r\n```java\r\nimport com.google.gson.Gson;\r\n\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    private static final String JSON_FILENAME = &quot;src/main/resources/data.json&quot;;\r\n    // the path and filename to JSON file\r\n\r\n    public static void main(String[] args) throws FileNotFoundException {\r\n        Scanner scanner = new Scanner(new File(JSON_FILENAME));\r\n        StringBuilder builder = new StringBuilder();\r\n        while (scanner.hasNext()) {\r\n            builder.append(scanner.next()); // read the content of the JSON file\r\n        }\r\n        String response = builder.toString(); // get the string of the content\r\n\r\n        Gson gson = new Gson();\r\n        UnitRes res = gson.fromJson(response, UnitRes.class);\r\n        // public &lt;T&gt; T fromJson(String json, Class&lt;T&gt; classOfT) throws ... { ... }\r\n        System.out.println(res);\r\n    }\r\n}\r\n```\r\nNote: the version of GSON that I use:\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n        &lt;version&gt;2.10.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```","title":"Convert JSON String to Object with Gson","body":"<p>I am not sure about the <code>response</code> in your current code, and I assume that it would be the content of your JSON file. You may use <code>gson.fromJson(response, UnitRes.class)</code> to parse the file, which is demonstrated as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.gson.Gson;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\n\npublic class Main {\n    private static final String JSON_FILENAME = &quot;src/main/resources/data.json&quot;;\n    // the path and filename to JSON file\n\n    public static void main(String[] args) throws FileNotFoundException {\n        Scanner scanner = new Scanner(new File(JSON_FILENAME));\n        StringBuilder builder = new StringBuilder();\n        while (scanner.hasNext()) {\n            builder.append(scanner.next()); // read the content of the JSON file\n        }\n        String response = builder.toString(); // get the string of the content\n\n        Gson gson = new Gson();\n        UnitRes res = gson.fromJson(response, UnitRes.class);\n        // public &lt;T&gt; T fromJson(String json, Class&lt;T&gt; classOfT) throws ... { ... }\n        System.out.println(res);\n    }\n}\n</code></pre>\n<p>Note: the version of GSON that I use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":19704185,"reputation":37,"user_id":14426254,"display_name":"Eliasu "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686326650,"creation_date":1686323418,"question_id":76441504,"body_markdown":"A service method returns `response()-&gt;json($response)`\r\n\r\nAnd the response from the endpoints is\r\n\r\n    {&quot;units&quot;:[{&quot;id&quot;:1,&quot;unit_name&quot;:&quot;Carton&quot;,&quot;created_at&quot;:&quot;2023-04-28T16:25:24.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-04-28T16:25:24.000000Z&quot;},{&quot;id&quot;:2,&quot;unit_name&quot;:&quot;Box&quot;,&quot;created_at&quot;:&quot;2023-04-28T16:25:31.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-04-28T16:25:31.000000Z&quot;},{&quot;id&quot;:3,&quot;unit_name&quot;:&quot;Kg&quot;,&quot;created_at&quot;:&quot;2023-04-28T16:25:39.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-04-28T16:25:39.000000Z&quot;}],&quot;loc&quot;:&quot;Loc&quot;,&quot;success&quot;:1}\r\n\r\nI want to Parse this JSON String to Object in Android Java. Here is my code: Please I can&#39;t get a UnitRes object\r\n\r\n    Gson gson = new Gson();\r\n                    UnitRes res = gson.fromJson(response, new TypeToken&lt;UnitRes&gt;(){}.getType()); \r\n\r\nPlease what is wrong here??\r\n    \r\n    public class UnitRes{\r\n        private List&lt;Unit&gt; units;\r\n        private int success;\r\n        private String loc;\r\n    }\r\n    public class Unit{\r\n        private int id;\r\n        private String unit_name;\r\n        private String created_at;\r\n        private String updated_at;\r\n        //getters &amp; setters\r\n    }","title":"Convert JSON String to Object with Gson","body":"<p>A service method returns <code>response()-&gt;json($response)</code></p>\n<p>And the response from the endpoints is</p>\n<pre><code>{&quot;units&quot;:[{&quot;id&quot;:1,&quot;unit_name&quot;:&quot;Carton&quot;,&quot;created_at&quot;:&quot;2023-04-28T16:25:24.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-04-28T16:25:24.000000Z&quot;},{&quot;id&quot;:2,&quot;unit_name&quot;:&quot;Box&quot;,&quot;created_at&quot;:&quot;2023-04-28T16:25:31.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-04-28T16:25:31.000000Z&quot;},{&quot;id&quot;:3,&quot;unit_name&quot;:&quot;Kg&quot;,&quot;created_at&quot;:&quot;2023-04-28T16:25:39.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-04-28T16:25:39.000000Z&quot;}],&quot;loc&quot;:&quot;Loc&quot;,&quot;success&quot;:1}\n</code></pre>\n<p>I want to Parse this JSON String to Object in Android Java. Here is my code: Please I can't get a UnitRes object</p>\n<pre><code>Gson gson = new Gson();\n                UnitRes res = gson.fromJson(response, new TypeToken&lt;UnitRes&gt;(){}.getType()); \n</code></pre>\n<p>Please what is wrong here??</p>\n<pre><code>public class UnitRes{\n    private List&lt;Unit&gt; units;\n    private int success;\n    private String loc;\n}\npublic class Unit{\n    private int id;\n    private String unit_name;\n    private String created_at;\n    private String updated_at;\n    //getters &amp; setters\n}\n</code></pre>\n"},{"tags":["java","java-11","password-encryption","windows-server-2019","badpaddingexception"],"owner":{"account_id":3705601,"reputation":322,"user_id":3084236,"display_name":"mrcrag"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686326573,"creation_date":1686227677,"question_id":76431916,"body_markdown":"**UPDATE**: I made a standalone version (.class file with a main method) which works just fine on the new server. I can only think it has something to do with reading the passwords from the config file (I verified it&#39;s encoding, UTF-8, matches what the code expects). Could it be something to do with the newer OS (Win Server 2019 vs 2016)?\r\n\r\nFor the past couple of years I&#39;ve been using this code to decrypt encrytped passwords at runtime. Recently, I needed to move the code (packaged in a .war file) to a new server. On the new server, decrypting throws the error, `BadPaddingException: Given final block not properly padded.`\r\n\r\nI encrypt the passwords, base64 encode them, test decryption, then write them to a config file:\r\n\r\n```\r\nOriginal: encryptD3crypt\r\nEncrypted: c05Nu2u8ck1tjad6vjeTgw==:74RyLEJEdTeeI23eaSjndw==\r\nDecrypted: encryptD3crypt\r\n```\r\n\r\nThe config file:\r\n\r\n`ldapUsername=svc-ldap\r\nldapPassword=fCGJcn/kjzRZelXkygKTaw==:OOgOCHseTJjLeBhmkh3Vt46zK83HCz9s44OEIZwcofA=`\r\n\r\nThe crypto code:\r\n\r\n```\r\nprivate static void createSecretKey(char[] password, byte[] salt, int iterationCount, int keyLength)\r\n\t\t\tthrows NoSuchAlgorithmException, InvalidKeySpecException {\r\n\t\tSecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA512&quot;);\r\n\t\tPBEKeySpec keySpec = new PBEKeySpec(password, salt, iterationCount, keyLength);\r\n\t\tSecretKey keyTmp = keyFactory.generateSecret(keySpec);\r\n\t\tmKeySpec = new SecretKeySpec(keyTmp.getEncoded(), &quot;AES&quot;);\r\n\t}\r\n\r\n\tpublic static String encrypt(String property) throws GeneralSecurityException, UnsupportedEncodingException {\r\n\t\tif (mKeySpec == null)\r\n\t\t\tinit();\r\n\t\t\t\r\n\t\tCipher pbeCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n\t\tpbeCipher.init(Cipher.ENCRYPT_MODE, mKeySpec);\r\n\t\tAlgorithmParameters parameters = pbeCipher.getParameters();\r\n\t\tIvParameterSpec ivParameterSpec = parameters.getParameterSpec(IvParameterSpec.class);\r\n\t\t//String cryptoText = new String(pbeCipher.doFinal(property.getBytes(Charset.forName(&quot;UTF-8&quot;))));\r\n\t\tbyte[] cryptoText = pbeCipher.doFinal(property.getBytes(&quot;UTF-8&quot;));\r\n\t\tbyte[] iv = ivParameterSpec.getIV();\r\n\t\treturn base64Encode(iv) + &quot;:&quot; + base64Encode(cryptoText);\r\n\t}\r\n\r\n\tpublic static String decrypt(String string) throws GeneralSecurityException, IOException {\r\n\t\tif (mKeySpec == null)\r\n\t\t\tinit();\r\n\t\t\r\n\t\tString iv = string.split(&quot;:&quot;)[0];\r\n\t\tString property = string.split(&quot;:&quot;)[1];\r\n\t\tCipher pbeCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n\t\tpbeCipher.init(Cipher.DECRYPT_MODE, mKeySpec, new IvParameterSpec(base64Decode(iv)));\r\n\t\treturn new String(pbeCipher.doFinal(base64Decode(property)), &quot;UTF-8&quot;);\r\n\t}\r\n\r\n\tprivate static byte[] base64Decode(String property) throws IOException {\r\n\t\treturn Base64.getDecoder().decode(property);\r\n\t}\r\n\t\r\n\tprivate static String base64Encode(byte[] bytes) {\r\n\t\treturn Base64.getEncoder().encodeToString(bytes);\r\n\t}\r\n```\r\n\r\nI&#39;ve tried generating a new password which, again, works locally but fails on the new server. My encrypt/decrpyt ciphers are not mismatched. The old and new servers are using the same jdk.\r\n","title":"Old code on new server: BadPaddingException: Given final block not properly padded","body":"<p><strong>UPDATE</strong>: I made a standalone version (.class file with a main method) which works just fine on the new server. I can only think it has something to do with reading the passwords from the config file (I verified it's encoding, UTF-8, matches what the code expects). Could it be something to do with the newer OS (Win Server 2019 vs 2016)?</p>\n<p>For the past couple of years I've been using this code to decrypt encrytped passwords at runtime. Recently, I needed to move the code (packaged in a .war file) to a new server. On the new server, decrypting throws the error, <code>BadPaddingException: Given final block not properly padded.</code></p>\n<p>I encrypt the passwords, base64 encode them, test decryption, then write them to a config file:</p>\n<pre><code>Original: encryptD3crypt\nEncrypted: c05Nu2u8ck1tjad6vjeTgw==:74RyLEJEdTeeI23eaSjndw==\nDecrypted: encryptD3crypt\n</code></pre>\n<p>The config file:</p>\n<p><code>ldapUsername=svc-ldap ldapPassword=fCGJcn/kjzRZelXkygKTaw==:OOgOCHseTJjLeBhmkh3Vt46zK83HCz9s44OEIZwcofA=</code></p>\n<p>The crypto code:</p>\n<pre><code>private static void createSecretKey(char[] password, byte[] salt, int iterationCount, int keyLength)\n            throws NoSuchAlgorithmException, InvalidKeySpecException {\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA512&quot;);\n        PBEKeySpec keySpec = new PBEKeySpec(password, salt, iterationCount, keyLength);\n        SecretKey keyTmp = keyFactory.generateSecret(keySpec);\n        mKeySpec = new SecretKeySpec(keyTmp.getEncoded(), &quot;AES&quot;);\n    }\n\n    public static String encrypt(String property) throws GeneralSecurityException, UnsupportedEncodingException {\n        if (mKeySpec == null)\n            init();\n            \n        Cipher pbeCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n        pbeCipher.init(Cipher.ENCRYPT_MODE, mKeySpec);\n        AlgorithmParameters parameters = pbeCipher.getParameters();\n        IvParameterSpec ivParameterSpec = parameters.getParameterSpec(IvParameterSpec.class);\n        //String cryptoText = new String(pbeCipher.doFinal(property.getBytes(Charset.forName(&quot;UTF-8&quot;))));\n        byte[] cryptoText = pbeCipher.doFinal(property.getBytes(&quot;UTF-8&quot;));\n        byte[] iv = ivParameterSpec.getIV();\n        return base64Encode(iv) + &quot;:&quot; + base64Encode(cryptoText);\n    }\n\n    public static String decrypt(String string) throws GeneralSecurityException, IOException {\n        if (mKeySpec == null)\n            init();\n        \n        String iv = string.split(&quot;:&quot;)[0];\n        String property = string.split(&quot;:&quot;)[1];\n        Cipher pbeCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n        pbeCipher.init(Cipher.DECRYPT_MODE, mKeySpec, new IvParameterSpec(base64Decode(iv)));\n        return new String(pbeCipher.doFinal(base64Decode(property)), &quot;UTF-8&quot;);\n    }\n\n    private static byte[] base64Decode(String property) throws IOException {\n        return Base64.getDecoder().decode(property);\n    }\n    \n    private static String base64Encode(byte[] bytes) {\n        return Base64.getEncoder().encodeToString(bytes);\n    }\n</code></pre>\n<p>I've tried generating a new password which, again, works locally but fails on the new server. My encrypt/decrpyt ciphers are not mismatched. The old and new servers are using the same jdk.</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1686328099,"post_id":76441975,"comment_id":134788627,"body_markdown":"It might be that the fields you&#39;re checking on are string fields. In this case, this might help: https://stackoverflow.com/questions/40124058/elasticsearch-return-data-not-correct/40124636#40124636 (hint: on string fields, it&#39;s not working like you expect, i.e. 2 &lt; 10 is not TRUE)","body":"It might be that the fields you&#39;re checking on are string fields. In this case, this might help: <a href=\"https://stackoverflow.com/questions/40124058/elasticsearch-return-data-not-correct/40124636#40124636\" title=\"elasticsearch return data not correct\">stackoverflow.com/questions/40124058/&hellip;</a> (hint: on string fields, it&#39;s not working like you expect, i.e. 2 &lt; 10 is not TRUE)"},{"owner":{"account_id":5467117,"reputation":19,"user_id":21576393,"display_name":"shaselai"},"score":0,"creation_date":1686576063,"post_id":76441975,"comment_id":134813293,"body_markdown":"Ah yes, that makes sense. But what can i do to have bother the original value (used for display in UI) and a numerical value for search if I only get one value as input?","body":"Ah yes, that makes sense. But what can i do to have bother the original value (used for display in UI) and a numerical value for search if I only get one value as input?"},{"owner":{"account_id":10214167,"reputation":213,"user_id":7540379,"display_name":"Axella Geraldinc"},"score":0,"creation_date":1686651146,"post_id":76441975,"comment_id":134824993,"body_markdown":"Maybe you can try to have 2 separate fields. One for UI &amp; one for querying.","body":"Maybe you can try to have 2 separate fields. One for UI &amp; one for querying."},{"owner":{"account_id":5467117,"reputation":19,"user_id":21576393,"display_name":"shaselai"},"score":0,"creation_date":1686659137,"post_id":76441975,"comment_id":134826764,"body_markdown":"i created a &quot;fields&quot; field that has the parsed number but it is still in string due to analyzer. I am not sure how to get it to be a number unless i have to change the input to have 2 inputs?","body":"i created a &quot;fields&quot; field that has the parsed number but it is still in string due to analyzer. I am not sure how to get it to be a number unless i have to change the input to have 2 inputs?"}],"owner":{"account_id":5467117,"reputation":19,"user_id":21576393,"display_name":"shaselai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686326560,"creation_date":1686326560,"question_id":76441975,"body_markdown":"I am creating a simple Elasticsearch query_string trying to get ranges of numbers across various fields. It seems some ranges I use gets me results BUT when I expand it or shrink it I get 0 results for some reason... Please see below:\r\n\r\nI have the following simple querystring query:\r\n\r\n```\r\n{\r\n&quot;query&quot;:{\r\n  &quot;query_string&quot;: {\r\n     &quot;query&quot; : &quot;[33344455555 TO 33344455555]&quot;\r\n    }\r\n  }\r\n}\r\n```\r\nWhich returns Hits total = 4 which is CORRECT.\r\n\r\nIf I expand the range on left to :\r\n```\r\n{\r\n&quot;query&quot;:{\r\n  &quot;query_string&quot;: {\r\n     &quot;query&quot; : &quot;[1 TO 33344455555]&quot;\r\n    }\r\n  }\r\n}\r\n```\r\nWhich I get 12 results which is expected.\r\n\r\nNow I extend the range on right:\r\n```\r\n{\r\n&quot;query&quot;:{\r\n  &quot;query_string&quot;: {\r\n     &quot;query&quot; : &quot;[33344455555 TO 2233344455555]&quot;\r\n    }\r\n  }\r\n}\r\n```\r\nI get 8 results which is still OK\r\n\r\nBUT here are the issues I have:\r\n```\r\n{\r\n&quot;query&quot;:{\r\n  &quot;query_string&quot;: {\r\n     &quot;query&quot; : &quot;[33344455555 TO 3334445555522]&quot;\r\n    }\r\n  }\r\n}\r\n```\r\nI get 4 results which is weird because 3334445555522 is greater than 2233344455555 so I should get 8 results at least.\r\n\r\nAlso another issue :\r\n```\r\n{\r\n&quot;query&quot;:{\r\n  &quot;query_string&quot;: {\r\n     &quot;query&quot; : &quot;[654654 TO 3334445555522]&quot;\r\n    }\r\n  }\r\n}\r\n```\r\nI get 0 results...\r\nI am really confused about this - I am searching all the fields in this query afaik - maybe I am not understanding the range query syntax on query_string documentation:\r\n**Ranges can be specified for date, numeric or string fields. Inclusive ranges are specified with square brackets [min TO max]**\r\n\r\nAny advice? Thanks!","title":"Elasticsearch querystring range syntax returning 0 results when it should return some results? tested with multiple ranges","body":"<p>I am creating a simple Elasticsearch query_string trying to get ranges of numbers across various fields. It seems some ranges I use gets me results BUT when I expand it or shrink it I get 0 results for some reason... Please see below:</p>\n<p>I have the following simple querystring query:</p>\n<pre><code>{\n&quot;query&quot;:{\n  &quot;query_string&quot;: {\n     &quot;query&quot; : &quot;[33344455555 TO 33344455555]&quot;\n    }\n  }\n}\n</code></pre>\n<p>Which returns Hits total = 4 which is CORRECT.</p>\n<p>If I expand the range on left to :</p>\n<pre><code>{\n&quot;query&quot;:{\n  &quot;query_string&quot;: {\n     &quot;query&quot; : &quot;[1 TO 33344455555]&quot;\n    }\n  }\n}\n</code></pre>\n<p>Which I get 12 results which is expected.</p>\n<p>Now I extend the range on right:</p>\n<pre><code>{\n&quot;query&quot;:{\n  &quot;query_string&quot;: {\n     &quot;query&quot; : &quot;[33344455555 TO 2233344455555]&quot;\n    }\n  }\n}\n</code></pre>\n<p>I get 8 results which is still OK</p>\n<p>BUT here are the issues I have:</p>\n<pre><code>{\n&quot;query&quot;:{\n  &quot;query_string&quot;: {\n     &quot;query&quot; : &quot;[33344455555 TO 3334445555522]&quot;\n    }\n  }\n}\n</code></pre>\n<p>I get 4 results which is weird because 3334445555522 is greater than 2233344455555 so I should get 8 results at least.</p>\n<p>Also another issue :</p>\n<pre><code>{\n&quot;query&quot;:{\n  &quot;query_string&quot;: {\n     &quot;query&quot; : &quot;[654654 TO 3334445555522]&quot;\n    }\n  }\n}\n</code></pre>\n<p>I get 0 results...\nI am really confused about this - I am searching all the fields in this query afaik - maybe I am not understanding the range query syntax on query_string documentation:\n<strong>Ranges can be specified for date, numeric or string fields. Inclusive ranges are specified with square brackets [min TO max]</strong></p>\n<p>Any advice? Thanks!</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"owner":{"account_id":13105027,"reputation":11,"user_id":9468149,"display_name":"Osmani Rosado Falcon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686325771,"creation_date":1686325771,"question_id":76441851,"body_markdown":"We are updating the project dependencies from `spring-boot-starter-data-jpa:2.7.3 (hibernate-core:5.6.10)` to `spring-boot-starter-data-jpa:3.1.0 (hibernate-core:6.2.2)` and we get the following error on application startup. \r\n\r\n`org.hibernate.UnknownEntityTypeException: Unable to locate persister: AcademicEdition`\r\n\r\nAssociated with this exception\r\n\r\n`java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List CourseProfessorRepository.findByEditionId(java.lang.Long); Unable to locate persister: AcademicEdition`\r\n\r\nBut this doesn&#39;t make sense because the `AcademicEdition` mapped superclass is not directly related to the `CourseProfessor` entity class.\r\n\r\n## Repository\r\n\r\nThe `CourseProfessorRepository` manage the  `CourseProfessor` entity.\r\n\r\n```\r\npublic interface CourseProfessorRepository extends EditionProfessorRepository&lt;CourseProfessor&gt; {\r\n\r\n    @EntityGraph(type = EntityGraph.EntityGraphType.FETCH, value = &quot;course-professor&quot;)\r\n    List&lt;CourseProfessor&gt; findByEditionId(Long editionId);\r\n\r\n}\r\n```\r\n\r\nThere is a base repository\r\n\r\n```\r\n@NoRepositoryBean  \r\npublic interface EditionProfessorRepository&lt;E extends EditionProfessor&lt;?&gt;&gt; extends JpaRepository&lt;E, EditionProfessorId&gt; {  \r\nList&lt;E&gt; findByEditionId(Long editionId);  \r\n}\r\n```\r\n\r\n## Entity\r\n\r\nThe `CourseProfessor` class represents the relation between a `Professor` and a `CourseEdition`.\r\n\r\n```\r\npublic final class CourseProfessor extends EditionProfessor&lt;CourseEdition&gt; {\r\n}\r\n```\r\n\r\nThis relation is represented by the `EditionProfessor` generic class. The `edition` property is generic and it type is declared as `CourseEdition` in `CourseProfessor` subclass.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/xKPtj.png)](https://i.stack.imgur.com/xKPtj.png)\r\n\r\n## Posible problem\r\n\r\nThe `CourseEdition` entity class extends from `ImprovingEdition` and not from `AcademicEdition`.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/1BT31.png)](https://i.stack.imgur.com/1BT31.png)\r\n\r\nWhy is the relation between `AcademicEdition` and `CourseProfessorRepository` in the error. How can we fix this.\r\n ","title":"Spring Data Repository error on startup after dependencies update","body":"<p>We are updating the project dependencies from <code>spring-boot-starter-data-jpa:2.7.3 (hibernate-core:5.6.10)</code> to <code>spring-boot-starter-data-jpa:3.1.0 (hibernate-core:6.2.2)</code> and we get the following error on application startup.</p>\n<p><code>org.hibernate.UnknownEntityTypeException: Unable to locate persister: AcademicEdition</code></p>\n<p>Associated with this exception</p>\n<p><code>java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List CourseProfessorRepository.findByEditionId(java.lang.Long); Unable to locate persister: AcademicEdition</code></p>\n<p>But this doesn't make sense because the <code>AcademicEdition</code> mapped superclass is not directly related to the <code>CourseProfessor</code> entity class.</p>\n<h2>Repository</h2>\n<p>The <code>CourseProfessorRepository</code> manage the  <code>CourseProfessor</code> entity.</p>\n<pre><code>public interface CourseProfessorRepository extends EditionProfessorRepository&lt;CourseProfessor&gt; {\n\n    @EntityGraph(type = EntityGraph.EntityGraphType.FETCH, value = &quot;course-professor&quot;)\n    List&lt;CourseProfessor&gt; findByEditionId(Long editionId);\n\n}\n</code></pre>\n<p>There is a base repository</p>\n<pre><code>@NoRepositoryBean  \npublic interface EditionProfessorRepository&lt;E extends EditionProfessor&lt;?&gt;&gt; extends JpaRepository&lt;E, EditionProfessorId&gt; {  \nList&lt;E&gt; findByEditionId(Long editionId);  \n}\n</code></pre>\n<h2>Entity</h2>\n<p>The <code>CourseProfessor</code> class represents the relation between a <code>Professor</code> and a <code>CourseEdition</code>.</p>\n<pre><code>public final class CourseProfessor extends EditionProfessor&lt;CourseEdition&gt; {\n}\n</code></pre>\n<p>This relation is represented by the <code>EditionProfessor</code> generic class. The <code>edition</code> property is generic and it type is declared as <code>CourseEdition</code> in <code>CourseProfessor</code> subclass.</p>\n<p><a href=\"https://i.stack.imgur.com/xKPtj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xKPtj.png\" alt=\"enter image description here\" /></a></p>\n<h2>Posible problem</h2>\n<p>The <code>CourseEdition</code> entity class extends from <code>ImprovingEdition</code> and not from <code>AcademicEdition</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/1BT31.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1BT31.png\" alt=\"enter image description here\" /></a></p>\n<p>Why is the relation between <code>AcademicEdition</code> and <code>CourseProfessorRepository</code> in the error. How can we fix this.</p>\n"},{"tags":["java","redis","deserialization"],"comments":[{"owner":{"account_id":5271129,"reputation":336,"user_id":4209321,"display_name":"The Maverick"},"score":0,"creation_date":1697710072,"post_id":76441773,"comment_id":136315188,"body_markdown":"were you able to find a solution to this?","body":"were you able to find a solution to this?"},{"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1697719001,"post_id":76441773,"comment_id":136316845,"body_markdown":"try to add this annotation `@JsonIgnoreProperties(ignoreUnknown = true)` with the java class. @The Maverick","body":"try to add this annotation <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> with the java class. @The Maverick"},{"owner":{"account_id":5271129,"reputation":336,"user_id":4209321,"display_name":"The Maverick"},"score":0,"creation_date":1697808115,"post_id":76441773,"comment_id":136329791,"body_markdown":"Thanks @Dolphin. Today, I created a separate package for objects to share between services and it finally worked.","body":"Thanks @Dolphin. Today, I created a separate package for objects to share between services and it finally worked."}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686325227,"creation_date":1686325227,"question_id":76441773,"body_markdown":"Now I am storing the app user info in redis, the data in redis look like this:\r\n\r\n\r\n    [\r\n        &quot;misc.contract.common.auth.LoginUserInfoDTO&quot;,\r\n        {\r\n            &quot;userId&quot;: 92,\r\n            &quot;nickname&quot;: &quot;u_qCX2J09hAB12&quot;,\r\n            &quot;avatarUrl&quot;: null,\r\n            &quot;autoRenewProductExpireTimeMs&quot;: null,\r\n            &quot;appName&quot;: &quot;xSW5a4BbVB&quot;,\r\n            &quot;thirdBind&quot;: [\r\n                &quot;java.util.ArrayList&quot;,\r\n                [\r\n                    [\r\n                        &quot;misc.contract.common.auth.ThirdBindInfo&quot;,\r\n                        {\r\n                            &quot;id&quot;: 3,\r\n                            &quot;channelType&quot;: 2,\r\n                            &quot;userId&quot;: 92,\r\n                            &quot;thirdUserId&quot;: &quot;2088402558023287&quot;\r\n                        }\r\n                    ]\r\n                ]\r\n            ]\r\n        }\r\n    ]\r\n\r\n\r\n\r\n\r\nwhen I tried to read the data in spring boot like this:\r\n\r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.redis.core.RedisTemplate;\r\n    import org.springframework.data.redis.core.ValueOperations;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    \r\n    @Controller\r\n    @RequestMapping(&quot;/post/&quot;)\r\n    public class DemoController {\r\n    \r\n        @Autowired\r\n        private RedisTemplate&lt;String, LoginUserInfoDTO&gt; redisTemplate;\r\n    \r\n        private ValueOperations&lt;String, LoginUserInfoDTO&gt; loginInfoRedis;\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            this.loginInfoRedis = redisTemplate.opsForValue();\r\n        }\r\n    \r\n    \r\n        @GetMapping(&quot;/user&quot;)\r\n        String getQRCodeUrl(){\r\n            try {\r\n                LoginUserInfoDTO dto = loginInfoRedis.get(&quot;REDDWARF_CV_WEB:user:detail:92&quot;);\r\n            }catch (Exception e){\r\n                System.out.println(e);\r\n            }\r\n           return &quot;hello world&quot;;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\nshows error:\r\n\r\n\r\n\r\n    Could not read JSON: Could not resolve type id &#39;misc.contract.common.auth.LoginUserInfoDTO&#39; as a subtype of `java.lang.Object`: no such class found\r\n     at [Source: (byte[])&quot;[&quot;misc.contract.common.auth.LoginUserInfoDTO&quot;,{&quot;userId&quot;:92,&quot;nickname&quot;:&quot;u_qCX2J09hAB12&quot;,&quot;avatarUrl&quot;:null,&quot;autoRenewProductExpireTimeMs&quot;:null,&quot;appName&quot;:&quot;xSW5a4BbVB&quot;,&quot;thirdBind&quot;:[&quot;java.util.ArrayList&quot;,[[&quot;misc.contract.common.auth.ThirdBindInfo&quot;,{&quot;id&quot;:3,&quot;channelType&quot;:2,&quot;userId&quot;:92,&quot;thirdUserId&quot;:&quot;2088402558023287&quot;}]]]}]&quot;; line: 1, column: 47]\r\n\r\n\r\n\r\nis that my `LoginUserInfoDTO` class not in the namespace `misc.contract.common.auth.LoginUserInfoDTO` cause this issue? is it possible to avoid this problem. For example, I saved the user info namespace is `misc.contract.common.auth.LoginUserInfoDTO`, the next version I changed the `LoginUserInfoDTO` class path, the new version of app could not parse the old version json? this issue will occure in the application runtime? if I only store a plan json without any class info, that is a better choice?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"is it possible to ingore the class when deserialize json from redis in java","body":"<p>Now I am storing the app user info in redis, the data in redis look like this:</p>\n<pre><code>[\n    &quot;misc.contract.common.auth.LoginUserInfoDTO&quot;,\n    {\n        &quot;userId&quot;: 92,\n        &quot;nickname&quot;: &quot;u_qCX2J09hAB12&quot;,\n        &quot;avatarUrl&quot;: null,\n        &quot;autoRenewProductExpireTimeMs&quot;: null,\n        &quot;appName&quot;: &quot;xSW5a4BbVB&quot;,\n        &quot;thirdBind&quot;: [\n            &quot;java.util.ArrayList&quot;,\n            [\n                [\n                    &quot;misc.contract.common.auth.ThirdBindInfo&quot;,\n                    {\n                        &quot;id&quot;: 3,\n                        &quot;channelType&quot;: 2,\n                        &quot;userId&quot;: 92,\n                        &quot;thirdUserId&quot;: &quot;2088402558023287&quot;\n                    }\n                ]\n            ]\n        ]\n    }\n]\n</code></pre>\n<p>when I tried to read the data in spring boot like this:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.core.ValueOperations;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport javax.annotation.PostConstruct;\n\n@Controller\n@RequestMapping(&quot;/post/&quot;)\npublic class DemoController {\n\n    @Autowired\n    private RedisTemplate&lt;String, LoginUserInfoDTO&gt; redisTemplate;\n\n    private ValueOperations&lt;String, LoginUserInfoDTO&gt; loginInfoRedis;\n\n    @PostConstruct\n    public void init() {\n        this.loginInfoRedis = redisTemplate.opsForValue();\n    }\n\n\n    @GetMapping(&quot;/user&quot;)\n    String getQRCodeUrl(){\n        try {\n            LoginUserInfoDTO dto = loginInfoRedis.get(&quot;REDDWARF_CV_WEB:user:detail:92&quot;);\n        }catch (Exception e){\n            System.out.println(e);\n        }\n       return &quot;hello world&quot;;\n    }\n\n}\n</code></pre>\n<p>shows error:</p>\n<pre><code>Could not read JSON: Could not resolve type id 'misc.contract.common.auth.LoginUserInfoDTO' as a subtype of `java.lang.Object`: no such class found\n at [Source: (byte[])&quot;[&quot;misc.contract.common.auth.LoginUserInfoDTO&quot;,{&quot;userId&quot;:92,&quot;nickname&quot;:&quot;u_qCX2J09hAB12&quot;,&quot;avatarUrl&quot;:null,&quot;autoRenewProductExpireTimeMs&quot;:null,&quot;appName&quot;:&quot;xSW5a4BbVB&quot;,&quot;thirdBind&quot;:[&quot;java.util.ArrayList&quot;,[[&quot;misc.contract.common.auth.ThirdBindInfo&quot;,{&quot;id&quot;:3,&quot;channelType&quot;:2,&quot;userId&quot;:92,&quot;thirdUserId&quot;:&quot;2088402558023287&quot;}]]]}]&quot;; line: 1, column: 47]\n</code></pre>\n<p>is that my <code>LoginUserInfoDTO</code> class not in the namespace <code>misc.contract.common.auth.LoginUserInfoDTO</code> cause this issue? is it possible to avoid this problem. For example, I saved the user info namespace is <code>misc.contract.common.auth.LoginUserInfoDTO</code>, the next version I changed the <code>LoginUserInfoDTO</code> class path, the new version of app could not parse the old version json? this issue will occure in the application runtime? if I only store a plan json without any class info, that is a better choice?</p>\n"},{"tags":["java","android","xml","kotlin","facade"],"owner":{"account_id":9609324,"reputation":1,"user_id":7134262,"display_name":"efres"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686324980,"creation_date":1686324937,"question_id":76441738,"body_markdown":"How to combine the Android xml scene with programatically way?\r\n\r\nCombine both to reuse the content from xml but create different variants.\r\n\r\nexample: \r\n\r\n```kotlin\r\nval variant = getVariant()\r\nval example_1 = TransitionInflater.from(this).inflateTransition(R.transition.example_1, variant)\r\n```\r\n","title":"Android xml scene + programatically way","body":"<p>How to combine the Android xml scene with programatically way?</p>\n<p>Combine both to reuse the content from xml but create different variants.</p>\n<p>example:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val variant = getVariant()\nval example_1 = TransitionInflater.from(this).inflateTransition(R.transition.example_1, variant)\n</code></pre>\n"},{"tags":["java","postgresql","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1686401388,"post_id":76441725,"comment_id":134795386,"body_markdown":"Key generation choices are implementation specific, and DDL generation is a one time operation - why not just use it to get the scripts and modify them as you want?","body":"Key generation choices are implementation specific, and DDL generation is a one time operation - why not just use it to get the scripts and modify them as you want?"},{"owner":{"account_id":21257039,"reputation":3,"user_id":15638373,"display_name":"Jo&#227;o Hass"},"score":0,"creation_date":1687480684,"post_id":76441725,"comment_id":134946578,"body_markdown":"Hi @Chris, sorry being late. The reason why I&#39;m confused by the behavior is that I was expecting it to actually change the table&#39;s generation schema, but it does not do anything, it just gets ignored completely. I&#39;m aware that I can modify them as I want, but that would only solve the problem, not my lack of understanding of why this happens","body":"Hi @Chris, sorry being late. The reason why I&#39;m confused by the behavior is that I was expecting it to actually change the table&#39;s generation schema, but it does not do anything, it just gets ignored completely. I&#39;m aware that I can modify them as I want, but that would only solve the problem, not my lack of understanding of why this happens"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1687541973,"post_id":76441725,"comment_id":134956871,"body_markdown":"Such mechanisms are internal to the JPA provider - there is nothing general to JPA other than to override the column the definition as you&#39;ve tried, and even then it is up to the provider on how to handle that with any of the other settings. DDL is more an add on or after thought for JPA - useful to get things started, but not meant for production/enterprise systems.","body":"Such mechanisms are internal to the JPA provider - there is nothing general to JPA other than to override the column the definition as you&#39;ve tried, and even then it is up to the provider on how to handle that with any of the other settings. DDL is more an add on or after thought for JPA - useful to get things started, but not meant for production/enterprise systems."}],"owner":{"account_id":21257039,"reputation":3,"user_id":15638373,"display_name":"Jo&#227;o Hass"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686324859,"creation_date":1686324859,"question_id":76441725,"body_markdown":"I have the following class:\r\n\r\n```java\r\n// ... Imports, etc.\r\n\r\npublic class Item {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n    private String title;\r\n    private String description;\r\n\r\n// ... More stuff below\r\n```\r\n\r\nI was expecting it to generate the primary key using ``GENERATED ALWAYS AS IDENTITY``, as the following DDL:\r\n```sql\r\nCREATE TABLE public.items (\r\n\tid int4  NOT NULL GENERATED ALWAYS AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),\r\n\ttitle varchar(255) NULL,\r\n\tdescription varchar(255) NULL\r\n    CONSTRAINT items_pkey PRIMARY KEY (id)\r\n);\r\n```\r\n\r\nBut instead, the pk was generated using ``serial4``:\r\n```sql\r\nCREATE TABLE public.items (\r\n\tid serial4 NOT NULL,\r\n\ttitle varchar(255) NULL,\r\n\tdescription varchar(255) NULL\r\n    CONSTRAINT items_pkey PRIMARY KEY (id),\r\n    CONSTRAINT items_user_id_key UNIQUE (user_id),\r\n);\r\n```\r\n\r\nI tried using ``@Column`` on the ``id`` field to change how the value is generated:\r\n```java\r\n// ... Imports, etc.\r\n\r\npublic class Item {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(columnDefinition = &quot;GENERATED ALWAYS AS IDENTITY&quot;)\r\n    private Integer id;\r\n    private String title;\r\n    private String description;\r\n\r\n// ... More stuff below\r\n```\r\nAnd I also tried changing the strategy to ``GenerationType.AUTO``, but the primary key is still being generated as `serial4`.\r\n\r\n\r\nIs there a way to force jpa to generate the primary key using ``GENERATED ALWAYS AS IDENTITY`` on postgresql?","title":"Generate postgresql primary key as &quot;AS IDENTITY&quot; instead of serial4 using jpa @Id annotation","body":"<p>I have the following class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ... Imports, etc.\n\npublic class Item {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    private String title;\n    private String description;\n\n// ... More stuff below\n</code></pre>\n<p>I was expecting it to generate the primary key using <code>GENERATED ALWAYS AS IDENTITY</code>, as the following DDL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE public.items (\n    id int4  NOT NULL GENERATED ALWAYS AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),\n    title varchar(255) NULL,\n    description varchar(255) NULL\n    CONSTRAINT items_pkey PRIMARY KEY (id)\n);\n</code></pre>\n<p>But instead, the pk was generated using <code>serial4</code>:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE public.items (\n    id serial4 NOT NULL,\n    title varchar(255) NULL,\n    description varchar(255) NULL\n    CONSTRAINT items_pkey PRIMARY KEY (id),\n    CONSTRAINT items_user_id_key UNIQUE (user_id),\n);\n</code></pre>\n<p>I tried using <code>@Column</code> on the <code>id</code> field to change how the value is generated:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ... Imports, etc.\n\npublic class Item {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(columnDefinition = &quot;GENERATED ALWAYS AS IDENTITY&quot;)\n    private Integer id;\n    private String title;\n    private String description;\n\n// ... More stuff below\n</code></pre>\n<p>And I also tried changing the strategy to <code>GenerationType.AUTO</code>, but the primary key is still being generated as <code>serial4</code>.</p>\n<p>Is there a way to force jpa to generate the primary key using <code>GENERATED ALWAYS AS IDENTITY</code> on postgresql?</p>\n"},{"tags":["java","minecraft-forge","forge"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1686338234,"post_id":76441712,"comment_id":134790338,"body_markdown":"Welcome on StackOverflow. Can you precise where you are stuck like do you have logs, issue or something? Can you show your code and explain what&#39;s you want?","body":"Welcome on StackOverflow. Can you precise where you are stuck like do you have logs, issue or something? Can you show your code and explain what&#39;s you want?"},{"owner":{"account_id":16493669,"reputation":3050,"user_id":11916773,"display_name":"Lucan"},"score":1,"creation_date":1686341082,"post_id":76441712,"comment_id":134790811,"body_markdown":"We can&#39;t help you without code. Please read [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask)","body":"We can&#39;t help you without code. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}],"owner":{"account_id":28788607,"reputation":1,"user_id":22048514,"display_name":"Magne Lindholm"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686324748,"creation_date":1686324748,"question_id":76441712,"body_markdown":"Im trying to create a mod with a block that acts like lithium when exposed to water... i already have so the block breaks when placed in water but now im trying to do so the block disappears from the players inventory if the player touches water, the reason why i cant get it to work is because im new to the minecraft forge modding industry so i mostly use ChatGPT (i know its bad but i dont know what else to do) but the porblem is that ChatGPT has a cutoff date where 1.19.2 wasnt introduced yet.\r\n\r\nIve tried making PlayerTickEventHandler&#39;s and BlockItems but i just cant get it to work, its pretty annoying since ive used alot of time wasted on something that doesent work. Anyways im in forge 1.19.2, Windows PC, and using IntelliJ IDEA (i dont know if thats relevant), so i joined StackOverflow to try and improve my mod and future mods i plan to make.","title":"A Lithium Like Minecraft Block in 1.19.2","body":"<p>Im trying to create a mod with a block that acts like lithium when exposed to water... i already have so the block breaks when placed in water but now im trying to do so the block disappears from the players inventory if the player touches water, the reason why i cant get it to work is because im new to the minecraft forge modding industry so i mostly use ChatGPT (i know its bad but i dont know what else to do) but the porblem is that ChatGPT has a cutoff date where 1.19.2 wasnt introduced yet.</p>\n<p>Ive tried making PlayerTickEventHandler's and BlockItems but i just cant get it to work, its pretty annoying since ive used alot of time wasted on something that doesent work. Anyways im in forge 1.19.2, Windows PC, and using IntelliJ IDEA (i dont know if thats relevant), so i joined StackOverflow to try and improve my mod and future mods i plan to make.</p>\n"},{"tags":["java","spring","swagger","openapi"],"owner":{"account_id":11727495,"reputation":168,"user_id":8954702,"display_name":"Rodrigo Novaes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686324504,"creation_date":1686324504,"question_id":76441675,"body_markdown":"I&#39;m struggling to generate a proper documentation using Swagger v3 annotations. The thing is that the project is quite legacy and we didn&#39;t generate it using Open API 3, so for now I&#39;m trying to write a cool documentation using the annotations.\r\n\r\nConsider this following example:\r\n\r\n```java\r\n@ApiResponse(description = &quot;Displays the queried data&quot;,\r\n  responseCode = &quot;200&quot;,\r\n  content = @Content(additionalPropertiesSchema = @Schema(implementation = CategorySchema.class)))\r\nclass DataDto {\r\n  @Schema(title = &quot;Data by category&quot;, \r\n    description = &quot;Displays data grouped by the selected categories&quot;,\r\n    additionalProperties = Schema.AdditionalPropertiesValue.USE_ADDITIONAL_PROPERTIES_ANNOTATION)\r\n  private Map&lt;String, Data&gt; dataByCategory;\r\n}\r\n\r\n@Schema(title = &quot;Data&quot;, description = &quot;A categorized data&quot;)\r\nclass Data {\r\n  @Schema(title = &quot;Model&quot;, description = &quot;Model definition&quot;, example = &quot;A&quot;)\r\n  private String model;\r\n  @Schema(title = &quot;Name&quot;, description = &quot;Registered name&quot;, example = &quot;SOCIAL_NETWORK_DISCUSSION&quot;)\r\n  private String name;\r\n}\r\n\r\n@Schema(title = &quot;Category&quot;, description = &quot;An example of a category schema&quot;)\r\nclass CategorySchema {\r\n  @Schema(title = &quot;Popular&quot;, description = &quot;Some popular data&quot;)\r\n  private Data popular;\r\n}\r\n```\r\n\r\nMy goal is to generate the following API docs:\r\n\r\n```json\r\n{\r\n  ...,\r\n  &quot;components&quot;: {\r\n    &quot;schemas&quot;: {\r\n      &quot;DataDto&quot;: {\r\n        ...,\r\n        &quot;properties&quot;: {\r\n          &quot;dataByCategory&quot;: {\r\n            &quot;type&quot;: &quot;object&quot;,\r\n            &quot;additionalProperties&quot;: {\r\n              &quot;$ref&quot;: &quot;#/components/schemas/CategorySchema&quot;\r\n            }\r\n          }\r\n        },\r\n        &quot;CategorySchema&quot;: {...},\r\n        &quot;Data&quot;: {...}\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nAccording to the above, I could implement contract-based examples even if my response is supposed to be very generic. However, this is what I&#39;m getting:\r\n\r\n```json\r\n{\r\n  ...,\r\n  &quot;components&quot;: {\r\n    &quot;schemas&quot;: {\r\n      &quot;DataDto&quot;: {\r\n        ...,\r\n        &quot;properties&quot;: {\r\n          &quot;dataByCategory&quot;: {\r\n            &quot;type&quot;: &quot;object&quot;,\r\n            &quot;additionalProperties&quot;: {\r\n              &quot;$ref&quot;: &quot;#/components/schemas/Data&quot;\r\n            }\r\n          }\r\n        },\r\n        &quot;Data&quot;: {...} # CategorySchema isn&#39;t even created\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nHence, my question is how to properly point which schema I want to represent the additional properties of an API response (or perhpaps request). Could you please help out?","title":"Generate appropriate schema for object type using Swagger v3 annotations","body":"<p>I'm struggling to generate a proper documentation using Swagger v3 annotations. The thing is that the project is quite legacy and we didn't generate it using Open API 3, so for now I'm trying to write a cool documentation using the annotations.</p>\n<p>Consider this following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApiResponse(description = &quot;Displays the queried data&quot;,\n  responseCode = &quot;200&quot;,\n  content = @Content(additionalPropertiesSchema = @Schema(implementation = CategorySchema.class)))\nclass DataDto {\n  @Schema(title = &quot;Data by category&quot;, \n    description = &quot;Displays data grouped by the selected categories&quot;,\n    additionalProperties = Schema.AdditionalPropertiesValue.USE_ADDITIONAL_PROPERTIES_ANNOTATION)\n  private Map&lt;String, Data&gt; dataByCategory;\n}\n\n@Schema(title = &quot;Data&quot;, description = &quot;A categorized data&quot;)\nclass Data {\n  @Schema(title = &quot;Model&quot;, description = &quot;Model definition&quot;, example = &quot;A&quot;)\n  private String model;\n  @Schema(title = &quot;Name&quot;, description = &quot;Registered name&quot;, example = &quot;SOCIAL_NETWORK_DISCUSSION&quot;)\n  private String name;\n}\n\n@Schema(title = &quot;Category&quot;, description = &quot;An example of a category schema&quot;)\nclass CategorySchema {\n  @Schema(title = &quot;Popular&quot;, description = &quot;Some popular data&quot;)\n  private Data popular;\n}\n</code></pre>\n<p>My goal is to generate the following API docs:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  ...,\n  &quot;components&quot;: {\n    &quot;schemas&quot;: {\n      &quot;DataDto&quot;: {\n        ...,\n        &quot;properties&quot;: {\n          &quot;dataByCategory&quot;: {\n            &quot;type&quot;: &quot;object&quot;,\n            &quot;additionalProperties&quot;: {\n              &quot;$ref&quot;: &quot;#/components/schemas/CategorySchema&quot;\n            }\n          }\n        },\n        &quot;CategorySchema&quot;: {...},\n        &quot;Data&quot;: {...}\n      }\n    }\n  }\n}\n</code></pre>\n<p>According to the above, I could implement contract-based examples even if my response is supposed to be very generic. However, this is what I'm getting:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  ...,\n  &quot;components&quot;: {\n    &quot;schemas&quot;: {\n      &quot;DataDto&quot;: {\n        ...,\n        &quot;properties&quot;: {\n          &quot;dataByCategory&quot;: {\n            &quot;type&quot;: &quot;object&quot;,\n            &quot;additionalProperties&quot;: {\n              &quot;$ref&quot;: &quot;#/components/schemas/Data&quot;\n            }\n          }\n        },\n        &quot;Data&quot;: {...} # CategorySchema isn't even created\n      }\n    }\n  }\n}\n</code></pre>\n<p>Hence, my question is how to properly point which schema I want to represent the additional properties of an API response (or perhpaps request). Could you please help out?</p>\n"},{"tags":["java","database","spring-boot","h2"],"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686324428,"creation_date":1686324428,"question_id":76441663,"body_markdown":"I have a bare boned spring boot application using H2 db.\r\n\r\nI am following [this][1] tutorial. In the tutorial it automatically adds the table to the H2 database but when I run my code it does not.\r\n\r\nThis is my code:\r\n\r\n-Entity\r\n\r\n    package entities;\r\n    \r\n    import org.springframework.data.annotation.Id;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import java.util.Date;\r\n    import java.util.Objects;\r\n    \r\n    \r\n    @Entity\r\n    public class Game {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        private String name;\r\n    \r\n        private int rating;\r\n    \r\n        private String releaseDate;\r\n    \r\n        // Constructor, getters, setters,  toString, equals, hashCode\r\n\r\n    }\r\n\r\n-DemoApplication\r\n\r\n    package com.example.demo;\r\n\t\r\n\timport org.springframework.boot.SpringApplication;\r\n\timport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\t\r\n\t@SpringBootApplication\r\n\tpublic class DemoApplication {\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n-pom\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t&lt;parent&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.6.4&lt;/version&gt;\r\n\t\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t\t&lt;/parent&gt;\r\n\t\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;name&gt;demo&lt;/name&gt;\r\n\t\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;java.version&gt;8&lt;/java.version&gt;\r\n\t\t&lt;/properties&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.6.4&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\t\r\n\t&lt;/project&gt;\r\n\r\n-application.properties\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n    spring.jpa.hibernate.ddl-auto=create\r\n\r\nI need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.I need to write this or SO won&#39;t let me post.\r\n\r\n  [1]: https://www.springboottutorial.com/spring-boot-and-h2-in-memory-database","title":"I am unable see my entity in H2 db on startup","body":"<p>I have a bare boned spring boot application using H2 db.</p>\n<p>I am following <a href=\"https://www.springboottutorial.com/spring-boot-and-h2-in-memory-database\" rel=\"nofollow noreferrer\">this</a> tutorial. In the tutorial it automatically adds the table to the H2 database but when I run my code it does not.</p>\n<p>This is my code:</p>\n<p>-Entity</p>\n<pre><code>package entities;\n\nimport org.springframework.data.annotation.Id;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport java.util.Date;\nimport java.util.Objects;\n\n\n@Entity\npublic class Game {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String name;\n\n    private int rating;\n\n    private String releaseDate;\n\n    // Constructor, getters, setters,  toString, equals, hashCode\n\n}\n</code></pre>\n<p>-DemoApplication</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>-pom</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>-application.properties</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.hibernate.ddl-auto=create\n</code></pre>\n<p>I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.I need to write this or SO won't let me post.</p>\n"},{"tags":["java","gradle","okhttp","jdb"],"owner":{"account_id":329709,"reputation":3234,"user_id":653379,"accept_rate":90,"display_name":"xralf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686324053,"creation_date":1686324053,"question_id":76441605,"body_markdown":"I have this code\r\n\r\n    // App.java\r\n    import okhttp3.HttpUrl;\r\n    \r\n    public class App\r\n    {\r\n      public static void main(String[] args) {\r\n        HttpUrl url = HttpUrl.parse(&quot;https://example.com&quot;); \r\n        // ...\r\n      }\r\n    }\r\n\r\nWhen I run\r\n`$ gradle clean`\r\n\r\n`$ gradle build`\r\n\r\n`$ gradle run`\r\n\r\nIt runs.\r\n\r\nI wanted to debug the code as follows:\r\n\r\n    $ jdb -classpath build/classes/java/main/ -sourcepath src/main/java/ App\r\n    &gt; stop in App.main\r\n    &gt; run\r\n    &gt; step\r\n\r\nand it ends with error message:\r\n\r\n    &gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: okhttp3/HttpUrl\r\n    \tat App.main(App.java:23)\r\n    Caused by: java.lang.ClassNotFoundException: okhttp3.HttpUrl\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 1 more\r\n    \r\n    The application exited\r\n\r\nHere is in my `build.gradle`\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;com.squareup.okhttp3:okhttp:4.9.0&#39;\r\n    }\r\n    \r\n    task runApp(type: JavaExec) {\r\n        main = &#39;App&#39;\r\n        classpath = sourceSets.main.runtimeClasspath\r\n    }\r\n\r\nHow can I fix it?\r\n","title":"jdb: okhttp3/HttpUrl NoClassDefFoundError","body":"<p>I have this code</p>\n<pre><code>// App.java\nimport okhttp3.HttpUrl;\n\npublic class App\n{\n  public static void main(String[] args) {\n    HttpUrl url = HttpUrl.parse(&quot;https://example.com&quot;); \n    // ...\n  }\n}\n</code></pre>\n<p>When I run\n<code>$ gradle clean</code></p>\n<p><code>$ gradle build</code></p>\n<p><code>$ gradle run</code></p>\n<p>It runs.</p>\n<p>I wanted to debug the code as follows:</p>\n<pre><code>$ jdb -classpath build/classes/java/main/ -sourcepath src/main/java/ App\n&gt; stop in App.main\n&gt; run\n&gt; step\n</code></pre>\n<p>and it ends with error message:</p>\n<pre><code>&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: okhttp3/HttpUrl\n    at App.main(App.java:23)\nCaused by: java.lang.ClassNotFoundException: okhttp3.HttpUrl\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 1 more\n\nThe application exited\n</code></pre>\n<p>Here is in my <code>build.gradle</code></p>\n<pre><code>plugins {\n    id 'java'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'com.squareup.okhttp3:okhttp:4.9.0'\n}\n\ntask runApp(type: JavaExec) {\n    main = 'App'\n    classpath = sourceSets.main.runtimeClasspath\n}\n</code></pre>\n<p>How can I fix it?</p>\n"},{"tags":["java","groovy","reflection"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686323730,"creation_date":1686323730,"answer_id":76441546,"question_id":76441332,"body_markdown":"You have in your code a class literal `ExecutionContext.class`. This class will be resolved with the defining class loader of your code containing this expression.\r\n\r\nThen, you create a new class loader using `new URLClassLoader(groovyClasspath, null)`, having the bootstrap class loader as its parent. So it can’t resolve the class name `ExecutionContext` to the class described above, as it doesn’t even know about the class loader. But apparently, you have added a version of that class to the new class loader’s path (I suppose “ExecutionContext.jar”).\r\n\r\nTherefore, you have two different classes with the name `ExecutionContext`, loaded by different class loaders. These do not match when looking up a method.\r\n\r\nYou can set up a parent for your new class loader like `new URLClassLoader(groovyClasspath, ExecutionContext.class.getClassLoader())` which ensures that the new class loader will see the same `ExecutionContext` class than your code. The class loader tries the parent loader before trying to load a class itself. The best strategy is not to add sources to your new class loader for classes already available to the parent loader, to emphasize which loader is supposed to load which class.\r\n","title":"Trouble with groovy/java, classpaths, and reflection/dynamic method access","body":"<p>You have in your code a class literal <code>ExecutionContext.class</code>. This class will be resolved with the defining class loader of your code containing this expression.</p>\n<p>Then, you create a new class loader using <code>new URLClassLoader(groovyClasspath, null)</code>, having the bootstrap class loader as its parent. So it can’t resolve the class name <code>ExecutionContext</code> to the class described above, as it doesn’t even know about the class loader. But apparently, you have added a version of that class to the new class loader’s path (I suppose “ExecutionContext.jar”).</p>\n<p>Therefore, you have two different classes with the name <code>ExecutionContext</code>, loaded by different class loaders. These do not match when looking up a method.</p>\n<p>You can set up a parent for your new class loader like <code>new URLClassLoader(groovyClasspath, ExecutionContext.class.getClassLoader())</code> which ensures that the new class loader will see the same <code>ExecutionContext</code> class than your code. The class loader tries the parent loader before trying to load a class itself. The best strategy is not to add sources to your new class loader for classes already available to the parent loader, to emphasize which loader is supposed to load which class.</p>\n"}],"owner":{"account_id":2919557,"reputation":7343,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686323730,"creation_date":1686322033,"question_id":76441332,"body_markdown":"TL;DR:  I am having trouble with classpaths and a java/groovy execution environment.  Java is openjdk version &quot;17.0.7&quot; 2023-04-18.  Groovy is groovy-4.0.12.jar.\r\n\r\n### The Background\r\nI have Java program that loads groovy scripts and runs them.  The script can access a number of resource in the parent via an `ExecutionContext` class that is setup upon initialization.  The design uses a base class to standardize the interface, leaving task-specific codes to the subclass.  A quick example:\r\n```\r\nBaseClass.1.groovy:\r\n\r\nimport org.bson.*;\r\nclass BaseClass {\r\n    ExecutionContext exe; \r\n\r\n    public void setContext(ExecutionContext executingEnvironment) {\r\n        this.exe = executingEnvironment\r\n    }\r\n\t\t      \r\n    Document fetchSection(String name) {\r\n\treturn exe.fetchSection(name);\r\n    }\r\n}\r\n\r\nMyClass.groovy:\r\nimport BaseClass;\r\n\r\nimport org.bson.*;\r\n\r\nclass MyClass extends BaseClass {\r\n    void do_something(Document inputs) {\r\n\tDocument s1 = fetchSection(&quot;S1&quot;); // use BaseClass method\r\n...\r\n     }    \r\n}\r\n```\r\n`ExecutionContext` is defined in a simple class and placed into a jar `ExecutionContext.jar`:\r\n```\r\nimport org.bson.*;\r\n\r\npublic interface ExecutionContext {\r\n    Document fetchSection(String sectionName);\r\n}\r\n```\r\n\r\nThe parent program contains a concrete implementation of `ExecutionContext`:\r\n```\r\n    class ExecutionContextImpl implements ExecutionContext {\r\n\tpublic Document fetchSection(String sectionName) {\r\n\t    // Actual work here...\r\n\t}\r\n    }\r\n\r\n```\r\nThe parent first loads the `BaseClass`, then `MyClass`, then creates an instance of `MyClass`, then creates an instance of `ExecutionContext` and using reflection sets it into `MyClass`:\r\n```\r\nGroovyClassLoader cls = new GroovyClassLoader();\r\n\r\nString fwscript = get BaseClass.1.groovy from somewhere;\r\nString myscript = get MyClass.groovy from somewhere;\r\n\r\nClass fwclazz = cls.parseClass(fwscript);\r\nClass clazz = cls.parseClass(myscript);\r\nObject oo = clazz.newInstance(); \r\n\r\nExecutionContext qqq = new ExecutionContextImpl();\r\n\r\nClass[] argTypes = new Class[1];\r\nargTypes[0] = ExecutionContext.class;\r\njava.lang.reflect.Method m = fwclazz.getDeclaredMethod(&quot;setContext&quot;, argTypes);\r\nObject[] margs = new Object[1];\r\nmargs[0] = qqq;\r\nObject oo2 = m.invoke(oo, margs);\r\n```\r\n\r\n**This works**, and later use of dynamic reflection to invoke methods such as `do_something` also works:\r\n```\r\nClass[] argTypes = new Class[1];\r\nargTypes[0] = Document.class;\r\njava.lang.reflect.Method m = clazz.getDeclaredMethod( &quot;do_something&quot;, argTypes);\r\nObject[] margs = new Object[1];\r\nmargs[0] = new Document(&quot;adj&quot;, 6.3);\r\nObject oo2 = m.invoke(oo, margs);\r\n```\r\n### The Problem\r\nI wish to isolate the groovy classpath environment from the parent.  This can be done as follows; note the `null` in arg #2 to prevent the new classloader from inheriting the environment from the parent program:\r\n```\r\nURL[] groovyClasspath = new URL[] {\r\n    new File(&quot;/path/to/ExecutionContext.jar&quot;).toURI().toURL(),\r\n    new File(&quot;/path/to/groovy-4.0.12.jar&quot;).toURI().toURL(),\r\n    new File(&quot;/path/to/guava-17.0.jar&quot;).toURI().toURL(),\r\n    new File(&quot;/path/to/bson-4.9.0.jar&quot;).toURI().toURL()\r\n};\r\nURLClassLoader cpl = new URLClassLoader(groovyClasspath, null);\r\n```\r\nThis *almost* works.  The scripts parse and in particular, resources referenced in the scripts like `imports` and `bson` and `Table` objects are resolved.  Commenting out the URL in the classpath produces an expected `unable to resolve class` runtime exception so it is definitely finding the intended codes.  The problem is that with an explicit classpath, the groovy environment cannot seem to find methods in the loaded groovy scripts.  This call:\r\n```\r\njava.lang.reflect.Method m = fwclazz.getDeclaredMethod(&quot;setContext&quot;, argTypes);\r\n```\r\nthrows an exception `java.lang.NoSuchMethodException: BaseClass.setContext(ExecutionContext)`.  Any call to `getDeclaredMethod` for either the base class `fwclazz` or the subclass `MyClass` has this problem.  And what is weird is that if I list the methods with something like this:\r\n```\r\nfor (Method method : fwclazz.getDeclaredMethods()) {\r\n   System.out.println(&quot;  &quot; + method.toString());\r\n}\r\n```\r\nThen I clearly see `public void BaseClass.setContext(ExecutionContext)`:\r\n```\r\n  public groovy.lang.MetaClass BaseClass.getMetaClass()\r\n  public void BaseClass.setMetaClass(groovy.lang.MetaClass)\r\n  protected groovy.lang.MetaClass BaseClass.$getStaticMetaClass()\r\n  public org.bson.Document BaseClass.fetchSection(java.lang.String)\r\n  public void BaseClass.setContext(ExecutionContext)\r\n  public static java.lang.invoke.MethodHandles$Lookup BaseClass.$getLookup()\r\n  public ExecutionContext BaseClass.getExe()\r\n  public void BaseClass.setExe(ExecutionContext)\r\n```\r\n\r\nI am sure there is a very simple addition to the `GroovyClassLoader` `URL` list to make this work.  Any clues?\r\n","title":"Trouble with groovy/java, classpaths, and reflection/dynamic method access","body":"<p>TL;DR:  I am having trouble with classpaths and a java/groovy execution environment.  Java is openjdk version &quot;17.0.7&quot; 2023-04-18.  Groovy is groovy-4.0.12.jar.</p>\n<h3>The Background</h3>\n<p>I have Java program that loads groovy scripts and runs them.  The script can access a number of resource in the parent via an <code>ExecutionContext</code> class that is setup upon initialization.  The design uses a base class to standardize the interface, leaving task-specific codes to the subclass.  A quick example:</p>\n<pre><code>BaseClass.1.groovy:\n\nimport org.bson.*;\nclass BaseClass {\n    ExecutionContext exe; \n\n    public void setContext(ExecutionContext executingEnvironment) {\n        this.exe = executingEnvironment\n    }\n              \n    Document fetchSection(String name) {\n    return exe.fetchSection(name);\n    }\n}\n\nMyClass.groovy:\nimport BaseClass;\n\nimport org.bson.*;\n\nclass MyClass extends BaseClass {\n    void do_something(Document inputs) {\n    Document s1 = fetchSection(&quot;S1&quot;); // use BaseClass method\n...\n     }    \n}\n</code></pre>\n<p><code>ExecutionContext</code> is defined in a simple class and placed into a jar <code>ExecutionContext.jar</code>:</p>\n<pre><code>import org.bson.*;\n\npublic interface ExecutionContext {\n    Document fetchSection(String sectionName);\n}\n</code></pre>\n<p>The parent program contains a concrete implementation of <code>ExecutionContext</code>:</p>\n<pre><code>    class ExecutionContextImpl implements ExecutionContext {\n    public Document fetchSection(String sectionName) {\n        // Actual work here...\n    }\n    }\n\n</code></pre>\n<p>The parent first loads the <code>BaseClass</code>, then <code>MyClass</code>, then creates an instance of <code>MyClass</code>, then creates an instance of <code>ExecutionContext</code> and using reflection sets it into <code>MyClass</code>:</p>\n<pre><code>GroovyClassLoader cls = new GroovyClassLoader();\n\nString fwscript = get BaseClass.1.groovy from somewhere;\nString myscript = get MyClass.groovy from somewhere;\n\nClass fwclazz = cls.parseClass(fwscript);\nClass clazz = cls.parseClass(myscript);\nObject oo = clazz.newInstance(); \n\nExecutionContext qqq = new ExecutionContextImpl();\n\nClass[] argTypes = new Class[1];\nargTypes[0] = ExecutionContext.class;\njava.lang.reflect.Method m = fwclazz.getDeclaredMethod(&quot;setContext&quot;, argTypes);\nObject[] margs = new Object[1];\nmargs[0] = qqq;\nObject oo2 = m.invoke(oo, margs);\n</code></pre>\n<p><strong>This works</strong>, and later use of dynamic reflection to invoke methods such as <code>do_something</code> also works:</p>\n<pre><code>Class[] argTypes = new Class[1];\nargTypes[0] = Document.class;\njava.lang.reflect.Method m = clazz.getDeclaredMethod( &quot;do_something&quot;, argTypes);\nObject[] margs = new Object[1];\nmargs[0] = new Document(&quot;adj&quot;, 6.3);\nObject oo2 = m.invoke(oo, margs);\n</code></pre>\n<h3>The Problem</h3>\n<p>I wish to isolate the groovy classpath environment from the parent.  This can be done as follows; note the <code>null</code> in arg #2 to prevent the new classloader from inheriting the environment from the parent program:</p>\n<pre><code>URL[] groovyClasspath = new URL[] {\n    new File(&quot;/path/to/ExecutionContext.jar&quot;).toURI().toURL(),\n    new File(&quot;/path/to/groovy-4.0.12.jar&quot;).toURI().toURL(),\n    new File(&quot;/path/to/guava-17.0.jar&quot;).toURI().toURL(),\n    new File(&quot;/path/to/bson-4.9.0.jar&quot;).toURI().toURL()\n};\nURLClassLoader cpl = new URLClassLoader(groovyClasspath, null);\n</code></pre>\n<p>This <em>almost</em> works.  The scripts parse and in particular, resources referenced in the scripts like <code>imports</code> and <code>bson</code> and <code>Table</code> objects are resolved.  Commenting out the URL in the classpath produces an expected <code>unable to resolve class</code> runtime exception so it is definitely finding the intended codes.  The problem is that with an explicit classpath, the groovy environment cannot seem to find methods in the loaded groovy scripts.  This call:</p>\n<pre><code>java.lang.reflect.Method m = fwclazz.getDeclaredMethod(&quot;setContext&quot;, argTypes);\n</code></pre>\n<p>throws an exception <code>java.lang.NoSuchMethodException: BaseClass.setContext(ExecutionContext)</code>.  Any call to <code>getDeclaredMethod</code> for either the base class <code>fwclazz</code> or the subclass <code>MyClass</code> has this problem.  And what is weird is that if I list the methods with something like this:</p>\n<pre><code>for (Method method : fwclazz.getDeclaredMethods()) {\n   System.out.println(&quot;  &quot; + method.toString());\n}\n</code></pre>\n<p>Then I clearly see <code>public void BaseClass.setContext(ExecutionContext)</code>:</p>\n<pre><code>  public groovy.lang.MetaClass BaseClass.getMetaClass()\n  public void BaseClass.setMetaClass(groovy.lang.MetaClass)\n  protected groovy.lang.MetaClass BaseClass.$getStaticMetaClass()\n  public org.bson.Document BaseClass.fetchSection(java.lang.String)\n  public void BaseClass.setContext(ExecutionContext)\n  public static java.lang.invoke.MethodHandles$Lookup BaseClass.$getLookup()\n  public ExecutionContext BaseClass.getExe()\n  public void BaseClass.setExe(ExecutionContext)\n</code></pre>\n<p>I am sure there is a very simple addition to the <code>GroovyClassLoader</code> <code>URL</code> list to make this work.  Any clues?</p>\n"},{"tags":["java","jpeg2000"],"answers":[{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1271608042,"creation_date":1271608042,"answer_id":2662961,"question_id":2662916,"body_markdown":"You would do it in this way\r\n\r\n    Image img = ImageIO.read(new ByteArrayInputStream(imageBytes));\r\n    ImageIcon imgIcon = new ImageIcon(img);\r\n\r\n    JLabel label = new JLabel(imgIcon);\r\n\r\nbut the __JPG2000__ decoder isn&#39;t supplied with standard SDK, you should head [here][1] (Java Advanced Imaging) and use the right decoder for that format..\r\n\r\n\r\n  [1]: https://jai.dev.java.net/","title":"read jpeg2000 files in java","body":"<p>You would do it in this way</p>\n\n<pre><code>Image img = ImageIO.read(new ByteArrayInputStream(imageBytes));\nImageIcon imgIcon = new ImageIcon(img);\n\nJLabel label = new JLabel(imgIcon);\n</code></pre>\n\n<p>but the <strong>JPG2000</strong> decoder isn't supplied with standard SDK, you should head <a href=\"https://jai.dev.java.net/\" rel=\"nofollow noreferrer\">here</a> (Java Advanced Imaging) and use the right decoder for that format..</p>\n"},{"tags":[],"owner":{"account_id":1998038,"reputation":1027,"user_id":1789772,"accept_rate":0,"display_name":"Fred F"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1351719129,"creation_date":1351719129,"answer_id":13167748,"question_id":2662916,"body_markdown":"Apparently the support of jpeg2000 / ( .jp2 ) files has been removed from Java Advanced Imaging (JAI). \r\n\r\nBy un-installing JAI 1.1.3 and installing the older version 1.1, I&#39;m now about to read .jp2 files and no longer see the null pointer. \r\n\r\nVersion 1.1 is available here.\r\nhttp://download.java.net/media/jai-imageio/builds/release/1.1/\r\n\r\nVersion 1.1 lists codec&#39;s for - g3fax g4fac jiio jp2k jpeg and png\r\n\r\n\r\n","title":"read jpeg2000 files in java","body":"<p>Apparently the support of jpeg2000 / ( .jp2 ) files has been removed from Java Advanced Imaging (JAI). </p>\n\n<p>By un-installing JAI 1.1.3 and installing the older version 1.1, I'm now about to read .jp2 files and no longer see the null pointer. </p>\n\n<p>Version 1.1 is available here.\n<a href=\"http://download.java.net/media/jai-imageio/builds/release/1.1/\" rel=\"nofollow\">http://download.java.net/media/jai-imageio/builds/release/1.1/</a></p>\n\n<p>Version 1.1 lists codec's for - g3fax g4fac jiio jp2k jpeg and png</p>\n"},{"tags":[],"owner":{"account_id":560164,"reputation":661,"user_id":922313,"display_name":"NoUserException"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493690322,"creation_date":1368484832,"answer_id":16532326,"question_id":2662916,"body_markdown":"The only options I know are all based on jj2000.\r\n\r\n**jai-imageio-core** provides support through an additional third-party module:\r\n\r\nhttps://github.com/stain/jai-imageio-core\r\n\r\nhttps://github.com/jai-imageio/jai-imageio-jpeg2000\r\n\r\nIt&#39;ll register itself with ImageIO and you&#39;ll then be able to read jpeg2000 files as you would any png, bmp or jpeg.\r\n\r\nAlthough jj2000 is in itself an option, the api is not designed for day-to-day use.\r\n\r\n\r\nOther options include [JMRTD][2], which provides its own wrapping for jj2000, \r\nor a commercial offering, [JDeli][1].\r\n\r\n\r\n  [1]: https://www.idrsolutions.com/jdeli\r\n  [2]: http://jmrtd.org/","title":"read jpeg2000 files in java","body":"<p>The only options I know are all based on jj2000.</p>\n\n<p><strong>jai-imageio-core</strong> provides support through an additional third-party module:</p>\n\n<p><a href=\"https://github.com/stain/jai-imageio-core\" rel=\"nofollow noreferrer\">https://github.com/stain/jai-imageio-core</a></p>\n\n<p><a href=\"https://github.com/jai-imageio/jai-imageio-jpeg2000\" rel=\"nofollow noreferrer\">https://github.com/jai-imageio/jai-imageio-jpeg2000</a></p>\n\n<p>It'll register itself with ImageIO and you'll then be able to read jpeg2000 files as you would any png, bmp or jpeg.</p>\n\n<p>Although jj2000 is in itself an option, the api is not designed for day-to-day use.</p>\n\n<p>Other options include <a href=\"http://jmrtd.org/\" rel=\"nofollow noreferrer\">JMRTD</a>, which provides its own wrapping for jj2000, \nor a commercial offering, <a href=\"https://www.idrsolutions.com/jdeli\" rel=\"nofollow noreferrer\">JDeli</a>.</p>\n"},{"tags":[],"owner":{"account_id":7295,"reputation":23914,"user_id":12631,"accept_rate":57,"display_name":"Horcrux7"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600023404,"creation_date":1600023404,"answer_id":63874450,"question_id":2662916,"body_markdown":"With the Java library [imageio-openjpeg][1] (Apache 2 license) you can use Jpeg2000 files (*.jp2) with the imageio API from Java. It is based on [OpenJPEG][2] (BSD license). Since 2015 is OpenJPEG the reference software of the Jpeg2000 standard.\r\n\r\nIf you want use it then you need both imageio-openjpeg and the OpenJPEG for your platform.\r\n\r\n\r\n  [1]: https://github.com/dbmdz/imageio-jnr\r\n  [2]: https://www.openjpeg.org/","title":"read jpeg2000 files in java","body":"<p>With the Java library <a href=\"https://github.com/dbmdz/imageio-jnr\" rel=\"nofollow noreferrer\">imageio-openjpeg</a> (Apache 2 license) you can use Jpeg2000 files (*.jp2) with the imageio API from Java. It is based on <a href=\"https://www.openjpeg.org/\" rel=\"nofollow noreferrer\">OpenJPEG</a> (BSD license). Since 2015 is OpenJPEG the reference software of the Jpeg2000 standard.</p>\n<p>If you want use it then you need both imageio-openjpeg and the OpenJPEG for your platform.</p>\n"},{"tags":[],"owner":{"account_id":7230356,"reputation":1512,"user_id":5517465,"accept_rate":100,"display_name":"Yassir Khaldi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686323718,"creation_date":1686323718,"answer_id":76441544,"question_id":2662916,"body_markdown":"This is the best project I could find until this day that supports JPEG2000/J2K images:\r\n\r\nIt also provides good documentation to use:\r\n\r\nhttps://github.com/jai-imageio/jai-imageio-jpeg2000\r\n\r\n","title":"read jpeg2000 files in java","body":"<p>This is the best project I could find until this day that supports JPEG2000/J2K images:</p>\n<p>It also provides good documentation to use:</p>\n<p><a href=\"https://github.com/jai-imageio/jai-imageio-jpeg2000\" rel=\"nofollow noreferrer\">https://github.com/jai-imageio/jai-imageio-jpeg2000</a></p>\n"}],"owner":{"account_id":43712,"reputation":16484,"user_id":127891,"accept_rate":67,"display_name":"pedrofernandes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14305,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":5,"score":9,"last_activity_date":1686323718,"creation_date":1271607218,"question_id":2662916,"body_markdown":"I have a code using a `byte[]` that contains a image jpeg2000 bytes. I want show this in `jLabel` component howto do this? Anyone have idea or code to do?","title":"read jpeg2000 files in java","body":"<p>I have a code using a <code>byte[]</code> that contains a image jpeg2000 bytes. I want show this in <code>jLabel</code> component howto do this? Anyone have idea or code to do?</p>\n"},{"tags":["java","spring","database","hibernate","hibernate-mapping"],"owner":{"account_id":28784964,"reputation":1,"user_id":22045661,"display_name":"AKS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686323488,"creation_date":1686286943,"question_id":76437358,"body_markdown":"```java\r\n@Id\r\n@GeneratedValue(generator = &quot;userLinkedPK&quot;)\r\n@GenericGenerator(name = &quot;userLinkedPK&quot;,\r\n                  strategy = &quot;foreign&quot;,\r\n                  parameters = @Parameter(name = &quot;property&quot;, value = &quot;user&quot;))\r\n@Column(name = &quot;FKMEMBER_ID&quot;, unique = true, nullable = false, precision = 5, scale = 0)\r\nprivate Integer id;\r\n```\r\n\r\n&gt; Error:- Caused by: javax.persistence.PersistenceException:\r\n&gt; org.hibernate.id.IdentifierGenerationException: null id generated for\r\n\r\nChanges:- Upgraded hibernate version from 5.3.10.Final to 5.4.24.Final\r\n\r\nCan anyone suggest changes?\r\n\r\n- Removed precision = 5, scale = 0, but no luck","title":"Caused by: javax.persistence.PersistenceException: org.hibernate.id.IdentifierGenerationException: null id generated for class ABC","body":"<pre class=\"lang-java prettyprint-override\"><code>@Id\n@GeneratedValue(generator = &quot;userLinkedPK&quot;)\n@GenericGenerator(name = &quot;userLinkedPK&quot;,\n                  strategy = &quot;foreign&quot;,\n                  parameters = @Parameter(name = &quot;property&quot;, value = &quot;user&quot;))\n@Column(name = &quot;FKMEMBER_ID&quot;, unique = true, nullable = false, precision = 5, scale = 0)\nprivate Integer id;\n</code></pre>\n<blockquote>\n<p>Error:- Caused by: javax.persistence.PersistenceException:\norg.hibernate.id.IdentifierGenerationException: null id generated for</p>\n</blockquote>\n<p>Changes:- Upgraded hibernate version from 5.3.10.Final to 5.4.24.Final</p>\n<p>Can anyone suggest changes?</p>\n<ul>\n<li>Removed precision = 5, scale = 0, but no luck</li>\n</ul>\n"},{"tags":["java","maven","visual-studio-code","javafx","pom.xml"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1686015428,"post_id":76410854,"comment_id":134738211,"body_markdown":"please edit your post sharing log messages from visual sutdio code and a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) if possible.","body":"please edit your post sharing log messages from visual sutdio code and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if possible."},{"owner":{"account_id":5907283,"reputation":1464,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1686019831,"post_id":76410854,"comment_id":134738539,"body_markdown":"have you tried to rename `.vscode` directory to something else and reload the project? also, [configuring main method in `pom.xml`](https://stackoverflow.com/a/29920526)","body":"have you tried to rename <code>.vscode</code> directory to something else and reload the project? also, <a href=\"https://stackoverflow.com/a/29920526\">configuring main method in <code>pom.xml</code></a>"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1686067701,"post_id":76410854,"comment_id":134747091,"body_markdown":"we would need more debugging details or at least a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) to help you. VS Code should have log files saying what is the IDE doing, what are the commands that are being executed to run your app. Also, have you tried to run the app from the command line using maven?","body":"we would need more debugging details or at least a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to help you. VS Code should have log files saying what is the IDE doing, what are the commands that are being executed to run your app. Also, have you tried to run the app from the command line using maven?"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1686124091,"post_id":76410854,"comment_id":134754402,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.\n\nPlease see [how to ask](https://stackoverflow.com/help/how-to-ask).\n\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1688087989,"post_id":76410854,"comment_id":135030328,"body_markdown":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems.","body":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems."}],"owner":{"account_id":28760971,"reputation":1,"user_id":22026878,"display_name":"Mrs. A KF"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686323184,"creation_date":1686013955,"question_id":76410854,"body_markdown":"\r\n```java\r\n//This is the default code VSC creates for a javafx file.\r\n//It is giving an error message of &quot;Error: Main method not found in the file,\r\n//please define the main method as: public static void main(String[] args)&quot;\r\n\r\npackage com.example;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\n\r\n/**\r\n * JavaFX App\r\n */\r\npublic class App extends Application {\r\n     private static Scene scene;\r\n     @Override\r\n     public void start(Stage stage) throws IOException {\r\n        scene = new Scene(loadFXML(&quot;primary&quot;), 640, 480);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n     }\r\n\r\n     static void setRoot(String fxml) throws IOException {\r\n         scene.setRoot(loadFXML(fxml));\r\n     }\r\n\r\n     private static Parent loadFXML(String fxml) throws IOException {\r\n         FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(fxml + &quot;.fxml&quot;));\r\n         return fxmlLoader.load();\r\n     }\r\n\r\n     public static void main(String[] args) {\r\n         launch();\r\n     }\r\n\r\n}\r\n```\r\n\r\nMy java projects suddenly stopped working in Virtual Studio Code. I started a new javafx project and tried to run it, but it&#39;s giving me an error saying that there is no main method, even though I have a correctly defined main method. I tried running a default javafx program that VSC creates, and even their own project didn&#39;t run, giving the same error. I am also getting an error that pom.xml needs to be updated, but I tried to update it and it didn&#39;t help. What am I missing or how can I fix this?\r\nI have an internet filter which I thought might be causing problems, but I have run java projects in VSC since getting the filter, and I specifically had them allow http://plugins.gradle.org, http://oracle.com, and maven.apache.org.\r\n\r\nIn the pom.xml file, I changed the version number under &lt;dependency&gt; to the latest version number. I tried closing and restarting the project and running maven clean install and maven clean in the terminal.\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n      &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;properties&gt;\r\n         &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n         &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n         &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;13&lt;/version&gt;\r\n         &lt;/dependency&gt;\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;13&lt;/version&gt;\r\n         &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n      &lt;!-- ... --&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n","title":"java projects not running in Virtual Studio Code","body":"<pre class=\"lang-java prettyprint-override\"><code>//This is the default code VSC creates for a javafx file.\n//It is giving an error message of &quot;Error: Main method not found in the file,\n//please define the main method as: public static void main(String[] args)&quot;\n\npackage com.example;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\n/**\n * JavaFX App\n */\npublic class App extends Application {\n     private static Scene scene;\n     @Override\n     public void start(Stage stage) throws IOException {\n        scene = new Scene(loadFXML(&quot;primary&quot;), 640, 480);\n        stage.setScene(scene);\n        stage.show();\n     }\n\n     static void setRoot(String fxml) throws IOException {\n         scene.setRoot(loadFXML(fxml));\n     }\n\n     private static Parent loadFXML(String fxml) throws IOException {\n         FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(fxml + &quot;.fxml&quot;));\n         return fxmlLoader.load();\n     }\n\n     public static void main(String[] args) {\n         launch();\n     }\n\n}\n</code></pre>\n<p>My java projects suddenly stopped working in Virtual Studio Code. I started a new javafx project and tried to run it, but it's giving me an error saying that there is no main method, even though I have a correctly defined main method. I tried running a default javafx program that VSC creates, and even their own project didn't run, giving the same error. I am also getting an error that pom.xml needs to be updated, but I tried to update it and it didn't help. What am I missing or how can I fix this?\nI have an internet filter which I thought might be causing problems, but I have run java projects in VSC since getting the filter, and I specifically had them allow <a href=\"http://plugins.gradle.org\" rel=\"nofollow noreferrer\">http://plugins.gradle.org</a>, <a href=\"http://oracle.com\" rel=\"nofollow noreferrer\">http://oracle.com</a>, and maven.apache.org.</p>\n<p>In the pom.xml file, I changed the version number under  to the latest version number. I tried closing and restarting the project and running maven clean install and maven clean in the terminal.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n      &lt;groupId&gt;com.example&lt;/groupId&gt;\n      &lt;artifactId&gt;demo&lt;/artifactId&gt;\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n      &lt;properties&gt;\n         &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n         &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n         &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n      &lt;/properties&gt;\n      &lt;dependencies&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;13&lt;/version&gt;\n         &lt;/dependency&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;13&lt;/version&gt;\n         &lt;/dependency&gt;\n      &lt;/dependencies&gt;\n      &lt;!-- ... --&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","testing","graph","report","allure"],"owner":{"account_id":7467906,"reputation":1,"user_id":5676757,"display_name":"omegarekrut"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686322378,"creation_date":1686322378,"question_id":76441370,"body_markdown":"I&#39;m trying to make a clickable &quot;TREND&quot; graph that would provide me a path to previous Allur&#39;s reports.\r\n[Example](https://allure-framework.github.io/allure-demo/5/) &lt;- here is working example how that feature should work.\r\nI have found only that [solution](https://github.com/allure-framework/allure2/issues/644) but it&#39;s working (if I understand that right) on Allure-Python. \r\nMy question is: does someone got an experience to do that feature but in Allure Java? Or any workarounds to solve that problem?\r\n\r\nI&#39;ve tried to `sed` the javascript code via bash (because I need to run reports in a pipeline in near future), but I&#39;m sure that is definitely not a right direction. Maybe, any other solutions to use JS to generate links for previous reports?","title":"Allure Framework Java &quot;Trend&quot; graph. Trying to make it clickable and show previous reports","body":"<p>I'm trying to make a clickable &quot;TREND&quot; graph that would provide me a path to previous Allur's reports.\n<a href=\"https://allure-framework.github.io/allure-demo/5/\" rel=\"nofollow noreferrer\">Example</a> &lt;- here is working example how that feature should work.\nI have found only that <a href=\"https://github.com/allure-framework/allure2/issues/644\" rel=\"nofollow noreferrer\">solution</a> but it's working (if I understand that right) on Allure-Python.\nMy question is: does someone got an experience to do that feature but in Allure Java? Or any workarounds to solve that problem?</p>\n<p>I've tried to <code>sed</code> the javascript code via bash (because I need to run reports in a pipeline in near future), but I'm sure that is definitely not a right direction. Maybe, any other solutions to use JS to generate links for previous reports?</p>\n"},{"tags":["python","java","mysql","apache-spark","mariadb"],"answers":[{"tags":[],"owner":{"account_id":12736008,"reputation":36,"user_id":9250935,"display_name":"pulsation"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686322040,"creation_date":1686321277,"answer_id":76441253,"question_id":72870823,"body_markdown":"This problem is similar to https://stackoverflow.com/a/67160226/9250935 .\r\n\r\nAccording to https://kontext.tech/article/1061/pyspark-read-data-from-mariadb-database :\r\n* The DSN scheme should be changed to `jdbc:mysql://`\r\n* The `permitMysqlScheme` parameter should be added to the URL\r\n\r\nSomething like `&quot;jdbc:mysql://localhost:3306/xxxxx?user=xxxx&amp;password=xxxx&amp;permitMysqlScheme&quot;` should work in your case.","title":"PySpark cannot decode value as Integer from mariaDb table","body":"<p>This problem is similar to <a href=\"https://stackoverflow.com/a/67160226/9250935\">https://stackoverflow.com/a/67160226/9250935</a> .</p>\n<p>According to <a href=\"https://kontext.tech/article/1061/pyspark-read-data-from-mariadb-database\" rel=\"nofollow noreferrer\">https://kontext.tech/article/1061/pyspark-read-data-from-mariadb-database</a> :</p>\n<ul>\n<li>The DSN scheme should be changed to <code>jdbc:mysql://</code></li>\n<li>The <code>permitMysqlScheme</code> parameter should be added to the URL</li>\n</ul>\n<p>Something like <code>&quot;jdbc:mysql://localhost:3306/xxxxx?user=xxxx&amp;password=xxxx&amp;permitMysqlScheme&quot;</code> should work in your case.</p>\n"}],"owner":{"account_id":25732139,"reputation":73,"user_id":19487579,"display_name":"chugaister"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76441253,"answer_count":1,"score":2,"last_activity_date":1686322040,"creation_date":1657029953,"question_id":72870823,"body_markdown":"I have this class\r\n\r\n    class SparkManager:\r\n    def __init__(self):\r\n        self.conf = SparkConf()  # create the configuration\r\n        self.conf.set(&quot;spark.jars&quot;,\r\n                      &quot;C:/Program Files/Java/jdk-17.0.3.1/mariadb-java-client-3.0.6.jar&quot;)  # set the spark.jars\r\n\r\n        self.spark = SparkSession.builder \\\r\n            .config(conf=self.conf) \\\r\n            .master(&quot;local&quot;) \\\r\n            .appName(&quot;Python Spark SQL basic example&quot;) \\\r\n            .getOrCreate()\r\n\r\n    def read_cards(self):\r\n        dataframe_mysql = self.spark.read.format(&quot;jdbc&quot;)\\\r\n            .option(&#39;url&#39;, &quot;jdbc:mariadb://localhost:3306/xxxxx?user=xxxx&amp;password=xxxx&quot;)\\\r\n            .option(&#39;dbtable&#39;, &quot;(SELECT * FROM test) tmp&quot;)\\\r\n            .option(&#39;driver&#39;, &#39;org.mariadb.jdbc.Driver&#39;)\\\r\n            .load()\r\n\r\n        dataframe_mysql.printSchema()\r\n\r\n        dataframe_mysql.show()\r\nand I run the instance of this object in main function\r\n\r\n    from sparkmanager import SparkManager\r\n    \r\n    \r\n    def main():\r\n        spark_manager = SparkManager()\r\n        spark_manager.read_cards()\r\n        \r\n        \r\n    if __name__ == &#39;__main__&#39;:\r\n        main()\r\n\r\nbut when i run it i get the error:\r\n\r\n&gt; py4j.protocol.Py4JJavaError: An error occurred while calling\r\n&gt; o34.showString. : org.apache.spark.SparkException: Job aborted due to\r\n&gt; stage failure: Task 0 in stage 0.0 failed 1 times, most recent\r\n&gt; failure: Lost task 0.0 in stage 0.0 (TID 0) (NB01GG003 executor\r\n&gt; driver): java.sql.SQLDataException: value &#39;c1&#39; cannot be decoded as\r\n&gt; Integer \tat\r\n&gt; org.mariadb.jdbc.plugin.codec.IntCodec.decodeTextInt(IntCodec.java:127)\r\n&gt; \tat\r\n&gt; org.mariadb.jdbc.codec.TextRowDecoder.decodeInt(TextRowDecoder.java:42)\r\n&gt; \tat org.mariadb.jdbc.codec.RowDecoder.getIntValue(RowDecoder.java:145)\r\n\r\nI checked my database tables. And the structure of db and tables is correct.\r\nTo my mind, the issue in mariaDb driver that it tries to parse string values in double but it gets double values. I tried to get values through pymysql and it fetches all the records correctly with proper types and values.\r\n\r\nthe schema shows right\r\n\r\n    root\r\n     |-- c1: integer (nullable = true)\r\n     |-- c2: double (nullable = true)\r\n     |-- c3: string (nullable = true)\r\n     |-- c4: integer (nullable = true)\r\n\r\n","title":"PySpark cannot decode value as Integer from mariaDb table","body":"<p>I have this class</p>\n<pre><code>class SparkManager:\ndef __init__(self):\n    self.conf = SparkConf()  # create the configuration\n    self.conf.set(&quot;spark.jars&quot;,\n                  &quot;C:/Program Files/Java/jdk-17.0.3.1/mariadb-java-client-3.0.6.jar&quot;)  # set the spark.jars\n\n    self.spark = SparkSession.builder \\\n        .config(conf=self.conf) \\\n        .master(&quot;local&quot;) \\\n        .appName(&quot;Python Spark SQL basic example&quot;) \\\n        .getOrCreate()\n\ndef read_cards(self):\n    dataframe_mysql = self.spark.read.format(&quot;jdbc&quot;)\\\n        .option('url', &quot;jdbc:mariadb://localhost:3306/xxxxx?user=xxxx&amp;password=xxxx&quot;)\\\n        .option('dbtable', &quot;(SELECT * FROM test) tmp&quot;)\\\n        .option('driver', 'org.mariadb.jdbc.Driver')\\\n        .load()\n\n    dataframe_mysql.printSchema()\n\n    dataframe_mysql.show()\n</code></pre>\n<p>and I run the instance of this object in main function</p>\n<pre><code>from sparkmanager import SparkManager\n\n\ndef main():\n    spark_manager = SparkManager()\n    spark_manager.read_cards()\n    \n    \nif __name__ == '__main__':\n    main()\n</code></pre>\n<p>but when i run it i get the error:</p>\n<blockquote>\n<p>py4j.protocol.Py4JJavaError: An error occurred while calling\no34.showString. : org.apache.spark.SparkException: Job aborted due to\nstage failure: Task 0 in stage 0.0 failed 1 times, most recent\nfailure: Lost task 0.0 in stage 0.0 (TID 0) (NB01GG003 executor\ndriver): java.sql.SQLDataException: value 'c1' cannot be decoded as\nInteger   at\norg.mariadb.jdbc.plugin.codec.IntCodec.decodeTextInt(IntCodec.java:127)\nat\norg.mariadb.jdbc.codec.TextRowDecoder.decodeInt(TextRowDecoder.java:42)\nat org.mariadb.jdbc.codec.RowDecoder.getIntValue(RowDecoder.java:145)</p>\n</blockquote>\n<p>I checked my database tables. And the structure of db and tables is correct.\nTo my mind, the issue in mariaDb driver that it tries to parse string values in double but it gets double values. I tried to get values through pymysql and it fetches all the records correctly with proper types and values.</p>\n<p>the schema shows right</p>\n<pre><code>root\n |-- c1: integer (nullable = true)\n |-- c2: double (nullable = true)\n |-- c3: string (nullable = true)\n |-- c4: integer (nullable = true)\n</code></pre>\n"},{"tags":["java","android","react-native","android-studio","gradle"],"comments":[{"owner":{"account_id":23596473,"reputation":486,"user_id":17633524,"display_name":"Dev Vyaas"},"score":0,"creation_date":1686429778,"post_id":76441328,"comment_id":134798337,"body_markdown":"can you share your package.json file ?\n\ni would suggest in your project root directory, first run :\n\n rm -rf node_modules\n\ncheck your react-native version and rn-gradle version if they are compatible.\n\ncheck compileSdkVersion in your build.gradle file in app if its defined then good otherwise define a SDK version.\n\nand run npm install.\nLet me know what do you get after following this.","body":"can you share your package.json file ?  i would suggest in your project root directory, first run :   rm -rf node_modules  check your react-native version and rn-gradle version if they are compatible.  check compileSdkVersion in your build.gradle file in app if its defined then good otherwise define a SDK version.  and run npm install. Let me know what do you get after following this."}],"owner":{"account_id":26506249,"reputation":23,"user_id":20142369,"display_name":"Frontmir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686321993,"creation_date":1686321993,"question_id":76441328,"body_markdown":"when i run my project i get build error like this. I started getting this error in my last project and my project is not opening. But there is no such error in my previous projects, they work without any problems while running them.\r\n   \r\n PS C:\\Users\\Bilal\\Desktop\\menu\\menu_app&gt; npx react-native run-android\r\ninfo Starting JS server...\r\ninfo Launching emulator...\r\ninfo Successfully launched emulator.\r\ninfo Installing the app...\r\n5 actionable tasks: 5 up-to-date\r\n\r\nFAILURE: Build completed with 2 failures.\r\n\r\n1: Task failed with an exception.\r\n-----------\r\n* Where:\r\nBuild file &#39;C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\android\\app\\build.gradle&#39; line: 2\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:app&#39;.\r\n&gt; Could not find implementation class &#39;com.facebook.react.ReactPlugin&#39; for plugin &#39;com.facebook.react&#39; specified in jar:file:/C:/Users/Bilal/.gradle/caches/jars-9/ed982d2a7012eb31e78a8c4df346a1ad/react-native-gradle-plugin.jar!/META-INF/gradle-plugins/com.facebook.react.properties.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n==============================================================================\r\n\r\n2: Task failed with an exception.\r\n-----------\r\n* What went wrong:\r\nA problem occurred configuring project &#39;:app&#39;.\r\n&gt; compileSdkVersion is not specified. Please add it to build.gradle\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n==============================================================================\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBU�LD FAILED in 3s\r\n\r\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\nError: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\r\n\r\nFAILURE: Build completed with 2 failures.\r\n\r\n1: Task failed with an exception.\r\n-----------\r\n* Where:\r\nBuild file &#39;C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\android\\app\\build.gradle&#39; line: 2\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:app&#39;.\r\n&gt; Could not find implementation class &#39;com.facebook.react.ReactPlugin&#39; for plugin &#39;com.facebook.react&#39; specified in jar:file:/C:/Users/Bilal/.gradle/caches/jars-9/ed982d2a7012eb31e78a8c4df346a1ad/react-native-gradle-plugin.jar!/META-INF/gradle-plugins/com.facebook.react.properties.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n==============================================================================\r\n\r\n2: Task failed with an exception.\r\n-----------\r\n* What went wrong:\r\nA problem occurred configuring project &#39;:app&#39;.\r\n&gt; compileSdkVersion is not specified. Please add it to build.gradle\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n==============================================================================\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBU�LD FAILED in 3s\r\n\r\n    at makeError (C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli-platform-android\\node_modules\\execa\\index.js:174:9)\r\n    at C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli-platform-android\\node_modules\\execa\\index.js:278:16\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async runOnAllDevices (C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:82:7)\r\n    at async Command.handleAction (C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli\\build\\index.js:108:9)\r\ninfo Run CLI with --verbose flag for more details.\r\nPS C:\\Users\\Bilal\\Desktop\\menu\\menu_app&gt;\r\n\r\nThe things I did to fix it was to clean the gradle with the ./gradle clean command, but my command didn&#39;t work, it was working in my other projects. I tried to fix it by resetting the invalidate cache from Android studio, but it didn&#39;t work. Can you help with my problem? I am ready to provide other necessary information. What are your suggestions? If I reinstall from scratch, will it be android studio?\r\n ","title":"React-native CLI gradle BUILD FAILED","body":"<p>when i run my project i get build error like this. I started getting this error in my last project and my project is not opening. But there is no such error in my previous projects, they work without any problems while running them.</p>\n<p>PS C:\\Users\\Bilal\\Desktop\\menu\\menu_app&gt; npx react-native run-android\ninfo Starting JS server...\ninfo Launching emulator...\ninfo Successfully launched emulator.\ninfo Installing the app...\n5 actionable tasks: 5 up-to-date</p>\n<p>FAILURE: Build completed with 2 failures.</p>\n<h2>1: Task failed with an exception.</h2>\n<ul>\n<li><p>Where:\nBuild file 'C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\android\\app\\build.gradle' line: 2</p>\n</li>\n<li><p>What went wrong:\nA problem occurred evaluating project ':app'.</p>\n</li>\n</ul>\n<blockquote>\n<p>Could not find implementation class 'com.facebook.react.ReactPlugin' for plugin 'com.facebook.react' specified in jar:file:/C:/Users/Bilal/.gradle/caches/jars-9/ed982d2a7012eb31e78a8c4df346a1ad/react-native-gradle-plugin.jar!/META-INF/gradle-plugins/com.facebook.react.properties.</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.\n==============================================================================</p>\n</blockquote>\n<h2>2: Task failed with an exception.</h2>\n<ul>\n<li>What went wrong:\nA problem occurred configuring project ':app'.</li>\n</ul>\n<blockquote>\n<p>compileSdkVersion is not specified. Please add it to build.gradle</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.\n==============================================================================</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>BU�LD FAILED in 3s</p>\n<p>error Failed to install the app. Make sure you have the Android development environment set up: <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/environment-setup</a>.\nError: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081</p>\n<p>FAILURE: Build completed with 2 failures.</p>\n<h2>1: Task failed with an exception.</h2>\n<ul>\n<li><p>Where:\nBuild file 'C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\android\\app\\build.gradle' line: 2</p>\n</li>\n<li><p>What went wrong:\nA problem occurred evaluating project ':app'.</p>\n</li>\n</ul>\n<blockquote>\n<p>Could not find implementation class 'com.facebook.react.ReactPlugin' for plugin 'com.facebook.react' specified in jar:file:/C:/Users/Bilal/.gradle/caches/jars-9/ed982d2a7012eb31e78a8c4df346a1ad/react-native-gradle-plugin.jar!/META-INF/gradle-plugins/com.facebook.react.properties.</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.\n==============================================================================</p>\n</blockquote>\n<h2>2: Task failed with an exception.</h2>\n<ul>\n<li>What went wrong:\nA problem occurred configuring project ':app'.</li>\n</ul>\n<blockquote>\n<p>compileSdkVersion is not specified. Please add it to build.gradle</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.\n==============================================================================</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>BU�LD FAILED in 3s</p>\n<pre><code>at makeError (C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli-platform-android\\node_modules\\execa\\index.js:174:9)\nat C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli-platform-android\\node_modules\\execa\\index.js:278:16\nat process.processTicksAndRejections (node:internal/process/task_queues:95:5)\nat async runOnAllDevices (C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:82:7)\nat async Command.handleAction (C:\\Users\\Bilal\\Desktop\\menu\\menu_app\\node_modules\\@react-native-community\\cli\\build\\index.js:108:9)\n</code></pre>\n<p>info Run CLI with --verbose flag for more details.\nPS C:\\Users\\Bilal\\Desktop\\menu\\menu_app&gt;</p>\n<p>The things I did to fix it was to clean the gradle with the ./gradle clean command, but my command didn't work, it was working in my other projects. I tried to fix it by resetting the invalidate cache from Android studio, but it didn't work. Can you help with my problem? I am ready to provide other necessary information. What are your suggestions? If I reinstall from scratch, will it be android studio?</p>\n"},{"tags":["java","selenium","selenium-webdriver","testng","assertion"],"answers":[{"tags":[],"owner":{"account_id":9132670,"reputation":18589,"user_id":6793637,"accept_rate":0,"display_name":"PDHide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1620577790,"creation_date":1620575433,"answer_id":67459631,"question_id":67459495,"body_markdown":"https://www.javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html\r\n\r\nsee the full list of support assertion , so there is no specific method for checking greater than, use equals and true.\r\n\r\n    import org.testng.Assert;\r\n    \r\n    Assert.assertEquals(2, 2);\r\n    Assert.assertFalse( 2 &gt; 30 , &quot;comparing 2 greater than 30&quot;);\r\n    Assert.assertEquals(&quot;teet&quot;, new StringBuilder(&quot;teet&quot;).reverse().toString());\r\n\r\n    Assert.assertTrue(&quot;teet&quot;.contentEquals(new StringBuilder(&quot;teet&quot;).reverse().toString())\r\n\r\n","title":"How to use Assert method and Selenium with TestNg framework to compare two integers","body":"<p><a href=\"https://www.javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html\" rel=\"nofollow noreferrer\">https://www.javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html</a></p>\n<p>see the full list of support assertion , so there is no specific method for checking greater than, use equals and true.</p>\n<pre><code>import org.testng.Assert;\n\nAssert.assertEquals(2, 2);\nAssert.assertFalse( 2 &gt; 30 , &quot;comparing 2 greater than 30&quot;);\nAssert.assertEquals(&quot;teet&quot;, new StringBuilder(&quot;teet&quot;).reverse().toString());\n\nAssert.assertTrue(&quot;teet&quot;.contentEquals(new StringBuilder(&quot;teet&quot;).reverse().toString())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20717463,"reputation":190,"user_id":15212573,"display_name":"roudlek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686321782,"creation_date":1686321782,"answer_id":76441308,"question_id":67459495,"body_markdown":"you can do this :\r\n\r\n    Assert.assertTrue(number1 &gt; number2 ,&quot;if condition is false this message will be written&quot;);\r\nHere we need to assert that number is greater than number 2, eaaasy !","title":"How to use Assert method and Selenium with TestNg framework to compare two integers","body":"<p>you can do this :</p>\n<pre><code>Assert.assertTrue(number1 &gt; number2 ,&quot;if condition is false this message will be written&quot;);\n</code></pre>\n<p>Here we need to assert that number is greater than number 2, eaaasy !</p>\n"}],"owner":{"account_id":19543065,"reputation":25,"user_id":14300460,"display_name":"vinay ajmera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":892,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":67459631,"answer_count":2,"score":0,"last_activity_date":1686321782,"creation_date":1620574632,"question_id":67459495,"body_markdown":"I am practicing Selenium using the TestNG framework and assertion and there are 3 things that I can&#39;t solve.\r\nnote: there is no page for XPath.. integers are static.\r\n\r\n1. selenium script to Compare 3 and 5.\r\n\r\n2. selenium script to get boolean result of 3&gt;5.\r\n\r\n3. Selenium script for a string to check palindrom.","title":"How to use Assert method and Selenium with TestNg framework to compare two integers","body":"<p>I am practicing Selenium using the TestNG framework and assertion and there are 3 things that I can't solve.\nnote: there is no page for XPath.. integers are static.</p>\n<ol>\n<li><p>selenium script to Compare 3 and 5.</p>\n</li>\n<li><p>selenium script to get boolean result of 3&gt;5.</p>\n</li>\n<li><p>Selenium script for a string to check palindrom.</p>\n</li>\n</ol>\n"},{"tags":["java","swing","user-interface"],"answers":[{"tags":[],"owner":{"account_id":1925356,"reputation":5057,"user_id":1735954,"accept_rate":85,"display_name":"Azad"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1369411779,"creation_date":1369411089,"answer_id":16739081,"question_id":16738770,"body_markdown":"*How do I allow the user to click and drag the JPanel to move the window*&lt;br/&gt;\r\nHere is the way :\r\n\r\n       private int x;\r\n        private int y;\r\n        //.....\r\n        //On mouse pressed:\r\n        jpanel.addMouseListener(new MouseAdapter(){\r\n           public void mousePressed(MouseEvent ev){\r\n            x = ev.getX ();\r\n            y = ev.getY();\r\n           }\r\n        });\r\n        //....\r\n        //on mouse dragged\r\n        jpanel.addMouseMotionListener(new MouseMotionAdapter() {\r\n                    public void mouseDragged(MouseEvent evt) {\r\n                        int x = evt.getXOnScreen()-this.x;\r\n                        int y = evt.getYOnScreen -this.y;\r\n                        this.setLocation(x,y); \r\n                     \r\n                    }\r\n                });\r\n`this.setLocation(x,y)` will moves the *Frame* not the *panel*, I thought that your class extended `JFrame`.&lt;br/&gt;\r\nHowever, you can create a method that returns a point (x,y) and set it to the *window*.","title":"Make JPanel draggable","body":"<p><em>How do I allow the user to click and drag the JPanel to move the window</em><br/>\nHere is the way :</p>\n\n<pre><code>   private int x;\n    private int y;\n    //.....\n    //On mouse pressed:\n    jpanel.addMouseListener(new MouseAdapter(){\n       public void mousePressed(MouseEvent ev){\n        x = ev.getX ();\n        y = ev.getY();\n       }\n    });\n    //....\n    //on mouse dragged\n    jpanel.addMouseMotionListener(new MouseMotionAdapter() {\n                public void mouseDragged(MouseEvent evt) {\n                    int x = evt.getXOnScreen()-this.x;\n                    int y = evt.getYOnScreen -this.y;\n                    this.setLocation(x,y); \n\n                }\n            });\n</code></pre>\n\n<p><code>this.setLocation(x,y)</code> will moves the <em>Frame</em> not the <em>panel</em>, I thought that your class extended <code>JFrame</code>.<br/>\nHowever, you can create a method that returns a point (x,y) and set it to the <em>window</em>.</p>\n"},{"tags":[],"owner":{"account_id":9284974,"reputation":2973,"user_id":6895166,"accept_rate":40,"display_name":"SamHoque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686321253,"creation_date":1542246330,"answer_id":53311287,"question_id":16738770,"body_markdown":"There wasn&#39;t really an answer with the `Point` class so I will add my contribution. Instead of storing the `x, y` cords of the MouseEvent, We store a `Point`. Here is how you can do it:\r\n\r\nDefine 2 variables of type `java.awt.Point`:\r\n\r\n    private Point initialMouseLocation;\r\n    private Point initialPanelLocation;\r\n\r\nOnce the mouse is pressed, we store its initial location and the relative location of the panel using a `MouseListener`:\r\n\r\n    panel.addMouseListener(new MouseAdapter() {\r\n           public void mousePressed(MouseEvent e) {\r\n               initialMouseLocation = e.getLocationOnScreen();\r\n               initialPanelLocation = panel.getLocation();\r\n            }\r\n        });\r\n\r\nWhen the mouse is dragged we calculate its travel distance and use it to offset the relative location of the panel:\r\n\r\n    panel.addMouseMotionListener(new MouseAdapter() {\r\n        public void mouseDragged(MouseEvent e) {\r\n            Point finalMouseLocation = e.getLocationOnScreen();\r\n                    int deltaX = finalMouseLocation.x - initialMouseLocation.x;\r\n                    int deltaY = finalMouseLocation.y - initialMouseLocation.y;\r\n                    Point newLocation = new Point(initialPanelLocation.x + deltaX, \r\n                        initialPanelLocation.y + deltaY);\r\n                    panel.setLocation(newLocation);\r\n        }\r\n    });\r\n\r\nA complete code sample of a DraggableHelper class is below:\r\n    \r\n    import java.awt.*;\r\n    import java.awt.event.MouseAdapter;\r\n    import java.awt.event.MouseEvent;\r\n    \r\n    public class DraggableHelper {\r\n\r\n        private Point initialMouseLocation;\r\n\r\n        private Point initialComponentLocation;\r\n\r\n        public DraggableHelper(Component component) {\r\n\r\n            component.addMouseListener(new MouseAdapter() {\r\n                public void mousePressed(MouseEvent e) {\r\n                    initialMouseLocation = e.getLocationOnScreen();\r\n                    initialComponentLocation = component.getLocation();\r\n                }\r\n            });\r\n\r\n            component.addMouseMotionListener(new MouseAdapter() {\r\n                public void mouseDragged(MouseEvent e) {\r\n                    Point finalMouseLocation = e.getLocationOnScreen();\r\n                    int deltaX = finalMouseLocation.x - initialMouseLocation.x;\r\n                    int deltaY = finalMouseLocation.y - initialMouseLocation.y;\r\n                    Point newLocation = new Point(initialComponentLocation.x + deltaX, initialComponentLocation.y + deltaY);\r\n                    component.setLocation(newLocation);\r\n                }\r\n            });\r\n        }\r\n\r\n    }","title":"Make JPanel draggable","body":"<p>There wasn't really an answer with the <code>Point</code> class so I will add my contribution. Instead of storing the <code>x, y</code> cords of the MouseEvent, We store a <code>Point</code>. Here is how you can do it:</p>\n<p>Define 2 variables of type <code>java.awt.Point</code>:</p>\n<pre><code>private Point initialMouseLocation;\nprivate Point initialPanelLocation;\n</code></pre>\n<p>Once the mouse is pressed, we store its initial location and the relative location of the panel using a <code>MouseListener</code>:</p>\n<pre><code>panel.addMouseListener(new MouseAdapter() {\n       public void mousePressed(MouseEvent e) {\n           initialMouseLocation = e.getLocationOnScreen();\n           initialPanelLocation = panel.getLocation();\n        }\n    });\n</code></pre>\n<p>When the mouse is dragged we calculate its travel distance and use it to offset the relative location of the panel:</p>\n<pre><code>panel.addMouseMotionListener(new MouseAdapter() {\n    public void mouseDragged(MouseEvent e) {\n        Point finalMouseLocation = e.getLocationOnScreen();\n                int deltaX = finalMouseLocation.x - initialMouseLocation.x;\n                int deltaY = finalMouseLocation.y - initialMouseLocation.y;\n                Point newLocation = new Point(initialPanelLocation.x + deltaX, \n                    initialPanelLocation.y + deltaY);\n                panel.setLocation(newLocation);\n    }\n});\n</code></pre>\n<p>A complete code sample of a DraggableHelper class is below:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\n\npublic class DraggableHelper {\n\n    private Point initialMouseLocation;\n\n    private Point initialComponentLocation;\n\n    public DraggableHelper(Component component) {\n\n        component.addMouseListener(new MouseAdapter() {\n            public void mousePressed(MouseEvent e) {\n                initialMouseLocation = e.getLocationOnScreen();\n                initialComponentLocation = component.getLocation();\n            }\n        });\n\n        component.addMouseMotionListener(new MouseAdapter() {\n            public void mouseDragged(MouseEvent e) {\n                Point finalMouseLocation = e.getLocationOnScreen();\n                int deltaX = finalMouseLocation.x - initialMouseLocation.x;\n                int deltaY = finalMouseLocation.y - initialMouseLocation.y;\n                Point newLocation = new Point(initialComponentLocation.x + deltaX, initialComponentLocation.y + deltaY);\n                component.setLocation(newLocation);\n            }\n        });\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1260210,"reputation":11183,"user_id":1218699,"accept_rate":71,"display_name":"sinθ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4889,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1686321253,"creation_date":1369410048,"question_id":16738770,"body_markdown":"I extended the toolbar on a mac using a JPanel (see image), but the part that is the actualy toolbar (not the JPanel) is the only part that you can click and drag. How do I allow the user to click and drag the JPanel to move the window, just like they would the toolbar\r\n\r\nThe top mm or so of the image is the actual toolbar (with the text), the rest is the JPanel (with buttons).\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/wg3UZ.png\r\n\r\nHere is the code for the UnifiedToolPanel, which is set to the north of the border layout in the JFrame:\r\n\r\n\r\n    package gui;\r\n    import java.awt.Color;\r\n    import java.awt.GradientPaint;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Window;\r\n    import java.awt.event.WindowEvent;\r\n    import java.awt.event.WindowFocusListener;\r\n    import java.awt.event.WindowListener;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.border.Border;\r\n    \r\n    import com.jgoodies.forms.factories.Borders;\r\n\r\n    public class UnifiedToolbarPanel extends JPanel implements WindowFocusListener {\r\n    \r\n        public static final Color OS_X_UNIFIED_TOOLBAR_FOCUSED_BOTTOM_COLOR =\r\n                new Color(64, 64, 64);\r\n        public static final Color OS_X_UNIFIED_TOOLBAR_UNFOCUSED_BORDER_COLOR =\r\n                new Color(135, 135, 135);    \r\n        \r\n        public static final Color OS_X_TOP_FOCUSED_GRADIENT = new Color(214+8, 214+8, 214+8);\r\n        public static final Color OS_X_BOTTOM_FOCUSED_GRADIENT = new Color(217, 217, 217);\r\n        public static final Color OS_X_TOP_UNFOCUSED_GRADIENT = new Color(240+3, 240+3, 240+3);\r\n        public static final Color OS_X_BOTTOM_UNFOCUSED_GRADIENT = new Color(219, 219, 219);\r\n    \r\n    \r\n        public UnifiedToolbarPanel() {\r\n            // make the component transparent\r\n            setOpaque(true);\r\n            Window window = SwingUtilities.getWindowAncestor(this);\r\n            // create an empty border around the panel\r\n            // note the border below is created using JGoodies Forms\r\n            setBorder(Borders.createEmptyBorder(&quot;3dlu, 3dlu, 1dlu, 3dlu&quot;));\r\n        }\r\n        \r\n    \r\n        @Override\r\n        public void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g;\r\n            Window window = SwingUtilities.getWindowAncestor(this);\r\n            Color color1  = window.isFocused() ? OS_X_TOP_FOCUSED_GRADIENT\r\n            \t\t: OS_X_TOP_UNFOCUSED_GRADIENT;\r\n            Color color2 = window.isFocused() ? color1.darker()\r\n            \t\t: OS_X_BOTTOM_UNFOCUSED_GRADIENT;\r\n            int w = getWidth();\r\n            int h = getHeight();\r\n            GradientPaint gp = new GradientPaint(\r\n                0, 0, color1, 0, h, color2);\r\n            g2d.setPaint(gp);\r\n            g2d.fillRect(0, 0, w, h);\r\n        }\r\n    \r\n        @Override\r\n        public Border getBorder() {\r\n            Window window = SwingUtilities.getWindowAncestor(this);\r\n            return window != null &amp;&amp; window.isFocused()\r\n                    ? BorderFactory.createMatteBorder(0,0,1,0,\r\n                            OS_X_UNIFIED_TOOLBAR_FOCUSED_BOTTOM_COLOR)\r\n                    : BorderFactory.createMatteBorder(0,0,1,0,\r\n                           OS_X_UNIFIED_TOOLBAR_UNFOCUSED_BORDER_COLOR);\r\n        }\r\n    \r\n    \r\n    \t@Override\r\n    \tpublic void windowGainedFocus(WindowEvent e) {\r\n    \t\trepaint();\r\n    \t}\r\n    \r\n    \r\n    \t@Override\r\n    \tpublic void windowLostFocus(WindowEvent e) {\r\n    \t\trepaint();\r\n    \t}\r\n    }\r\n\r\n","title":"Make JPanel draggable","body":"<p>I extended the toolbar on a mac using a JPanel (see image), but the part that is the actualy toolbar (not the JPanel) is the only part that you can click and drag. How do I allow the user to click and drag the JPanel to move the window, just like they would the toolbar</p>\n\n<p>The top mm or so of the image is the actual toolbar (with the text), the rest is the JPanel (with buttons).\n<img src=\"https://i.stack.imgur.com/wg3UZ.png\" alt=\"enter image description here\"></p>\n\n<p>Here is the code for the UnifiedToolPanel, which is set to the north of the border layout in the JFrame:</p>\n\n<pre><code>package gui;\nimport java.awt.Color;\nimport java.awt.GradientPaint;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Window;\nimport java.awt.event.WindowEvent;\nimport java.awt.event.WindowFocusListener;\nimport java.awt.event.WindowListener;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.Border;\n\nimport com.jgoodies.forms.factories.Borders;\n\npublic class UnifiedToolbarPanel extends JPanel implements WindowFocusListener {\n\n    public static final Color OS_X_UNIFIED_TOOLBAR_FOCUSED_BOTTOM_COLOR =\n            new Color(64, 64, 64);\n    public static final Color OS_X_UNIFIED_TOOLBAR_UNFOCUSED_BORDER_COLOR =\n            new Color(135, 135, 135);    \n\n    public static final Color OS_X_TOP_FOCUSED_GRADIENT = new Color(214+8, 214+8, 214+8);\n    public static final Color OS_X_BOTTOM_FOCUSED_GRADIENT = new Color(217, 217, 217);\n    public static final Color OS_X_TOP_UNFOCUSED_GRADIENT = new Color(240+3, 240+3, 240+3);\n    public static final Color OS_X_BOTTOM_UNFOCUSED_GRADIENT = new Color(219, 219, 219);\n\n\n    public UnifiedToolbarPanel() {\n        // make the component transparent\n        setOpaque(true);\n        Window window = SwingUtilities.getWindowAncestor(this);\n        // create an empty border around the panel\n        // note the border below is created using JGoodies Forms\n        setBorder(Borders.createEmptyBorder(\"3dlu, 3dlu, 1dlu, 3dlu\"));\n    }\n\n\n    @Override\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g;\n        Window window = SwingUtilities.getWindowAncestor(this);\n        Color color1  = window.isFocused() ? OS_X_TOP_FOCUSED_GRADIENT\n                : OS_X_TOP_UNFOCUSED_GRADIENT;\n        Color color2 = window.isFocused() ? color1.darker()\n                : OS_X_BOTTOM_UNFOCUSED_GRADIENT;\n        int w = getWidth();\n        int h = getHeight();\n        GradientPaint gp = new GradientPaint(\n            0, 0, color1, 0, h, color2);\n        g2d.setPaint(gp);\n        g2d.fillRect(0, 0, w, h);\n    }\n\n    @Override\n    public Border getBorder() {\n        Window window = SwingUtilities.getWindowAncestor(this);\n        return window != null &amp;&amp; window.isFocused()\n                ? BorderFactory.createMatteBorder(0,0,1,0,\n                        OS_X_UNIFIED_TOOLBAR_FOCUSED_BOTTOM_COLOR)\n                : BorderFactory.createMatteBorder(0,0,1,0,\n                       OS_X_UNIFIED_TOOLBAR_UNFOCUSED_BORDER_COLOR);\n    }\n\n\n    @Override\n    public void windowGainedFocus(WindowEvent e) {\n        repaint();\n    }\n\n\n    @Override\n    public void windowLostFocus(WindowEvent e) {\n        repaint();\n    }\n}\n</code></pre>\n"},{"tags":["java","class","cannot-find-symbol"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1686315248,"post_id":76440423,"comment_id":134785767,"body_markdown":"`javac *.java` -- use a proper build tool. Maven is popular.","body":"<code>javac *.java</code> -- use a proper build tool. Maven is popular."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1686315314,"post_id":76440423,"comment_id":134785785,"body_markdown":"please, put the relevant, all of the relevant and only the relevant code in your question. Don&#39;t post information as links to images, but as formatted text.","body":"please, put the relevant, all of the relevant and only the relevant code in your question. Don&#39;t post information as links to images, but as formatted text."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1686316314,"post_id":76440423,"comment_id":134785990,"body_markdown":"@SamuelMarchant underscore is valid in package name.","body":"@SamuelMarchant underscore is valid in package name."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1686316812,"post_id":76440423,"comment_id":134786119,"body_markdown":"@Mar-Z , thanks.","body":"@Mar-Z , thanks."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686317182,"post_id":76440423,"comment_id":134786206,"body_markdown":"@A_Pag5329 while calling the compiler you should be in the root directory of the project and add the package name before the file name. Like: javac students_class/ClassroomVer2.java","body":"@A_Pag5329 while calling the compiler you should be in the root directory of the project and add the package name before the file name. Like: javac students_class/ClassroomVer2.java"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1686318492,"post_id":76440423,"comment_id":134786535,"body_markdown":"Try import StudentVer2;  statement in   ClassroomVer2  . It could be a minor  compiler glitch . Don&#39;t forget package location names and declarations at tops of file should match.   I think with packages declared at top you must actually commit &quot;import&quot; statements for any file used whether in sane folder or others!  If you had no package declarations it could then be implicit. implicit (no declarations) implies everything will be in the one folder.With package statement declare import of everything used. With java API they are in different packages so only those require declaring in implicit.","body":"Try import StudentVer2;  statement in   ClassroomVer2  . It could be a minor  compiler glitch . Don&#39;t forget package location names and declarations at tops of file should match.   I think with packages declared at top you must actually commit &quot;import&quot; statements for any file used whether in sane folder or others!  If you had no package declarations it could then be implicit. implicit (no declarations) implies everything will be in the one folder.With package statement declare import of everything used. With java API they are in different packages so only those require declaring in implicit."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689318140,"post_id":76440423,"comment_id":135199171,"body_markdown":"Put all the classes into the `students_class` package. Classes in the default package haven&#39;t worked completely since JDK 1.4 twenty years ago.","body":"Put all the classes into the <code>students_class</code> package. Classes in the default package haven&#39;t worked completely since JDK 1.4 twenty years ago."}],"answers":[{"tags":[],"owner":{"account_id":28739128,"reputation":27,"user_id":22009651,"display_name":"Alisabrljak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686316525,"creation_date":1686316525,"answer_id":76440635,"question_id":76440423,"body_markdown":"I think the issue you&#39;re facing is due to the complilation process not being able to find the symbol (class) &#39;StudentVer2&#39; when compiling &#39;ClassroomVer2.java &#39;. This happens because the compiler needs to know the location of the &#39;StudentVer2&#39; class file in order to compile &#39;ClassroomVer2.java&#39;.\r\n\r\n","title":"How will I be able to resolve the &quot;cannot find symbol&quot; issue for this code?","body":"<p>I think the issue you're facing is due to the complilation process not being able to find the symbol (class) 'StudentVer2' when compiling 'ClassroomVer2.java '. This happens because the compiler needs to know the location of the 'StudentVer2' class file in order to compile 'ClassroomVer2.java'.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686318804,"creation_date":1686318804,"answer_id":76440934,"question_id":76440423,"body_markdown":"You need to make certain that `public class ClassroomVer2` and `public class StudentVer2` are both in the `students_class` package.  If `StudentVer2` is in a different package, then put the following in the `ClassroomVer2` class.\r\n```\r\nimport &lt;other parent packages&gt;.StudentVer2;\r\n```\r\nI tried both options and in each case had no unresolved symbol errors.","title":"How will I be able to resolve the &quot;cannot find symbol&quot; issue for this code?","body":"<p>You need to make certain that <code>public class ClassroomVer2</code> and <code>public class StudentVer2</code> are both in the <code>students_class</code> package.  If <code>StudentVer2</code> is in a different package, then put the following in the <code>ClassroomVer2</code> class.</p>\n<pre><code>import &lt;other parent packages&gt;.StudentVer2;\n</code></pre>\n<p>I tried both options and in each case had no unresolved symbol errors.</p>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686320635,"creation_date":1686319022,"answer_id":76440967,"question_id":76440423,"body_markdown":"Try import StudentVer2;  statement in   ClassroomVer2.\r\n   I think with packages declared at top you must actually commit &quot;import&quot; statements for any file used whether in sane folder or others! \r\n If you had no package declarations it could then be implicit. implicit (no declarations) implies everything will be in the one folder.\r\n\r\nWith package statement declare import of everything used. With java API they are in different packages so only those require declaring in implicit.\r\n\r\nDon&#39;t forget package location names and declarations at tops of file should match. \r\nAlso conventional package systems the files start to be in the 3rd folder deep, and the first package folder named is conventionally one of /com /org  or. /net","title":"How will I be able to resolve the &quot;cannot find symbol&quot; issue for this code?","body":"<p>Try import StudentVer2;  statement in   ClassroomVer2.\nI think with packages declared at top you must actually commit &quot;import&quot; statements for any file used whether in sane folder or others!\nIf you had no package declarations it could then be implicit. implicit (no declarations) implies everything will be in the one folder.</p>\n<p>With package statement declare import of everything used. With java API they are in different packages so only those require declaring in implicit.</p>\n<p>Don't forget package location names and declarations at tops of file should match.\nAlso conventional package systems the files start to be in the 3rd folder deep, and the first package folder named is conventionally one of /com /org  or. /net</p>\n"}],"owner":{"account_id":28787434,"reputation":1,"user_id":22047606,"display_name":"A_Pag5329"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1686320635,"creation_date":1686314939,"question_id":76440423,"body_markdown":"I am making a Java program about a simple student management system. Here&#39;s the summary of how the code works:\r\n\r\n1. Student class\r\n    - Represents a student with attributes such as the name and grade\r\n    - Provides methods to access and modify the student&#39;s name and grade.\r\n\r\n2. Classroom class\r\n    - Manages a classroom of students.\r\n    - Stores a list of students and a maximum number of students.\r\n    - Provides methods to add a student, remove a student by name or index, and retrieve all students.                             Removal of a student will occur if they have the same name as another student.\r\n    - Includes methods to find the student with the highest grade and calculate the class average grade.\r\n\r\n3. ClassroomStudentMain class\r\n    - Create an instance of the Classroom class with a limit of 5 students.\r\n    - Adds five students to the classroom with their respective names and grades.\r\n    - Prints the list of all students and their respective grades.\r\n    - Finds and prints the name and grade of the student with the highest grade.\r\n    - Calculates and prints the average grade of the class.\r\n\r\nI already made an iteration of the code where the 3 classes are in one Java file named &quot;ClassroomStudentMain.java&quot;. Here&#39;s the implementation of the Java file I am pertaining to.\r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nclass Classroom {\r\n    private int studentLimit;\r\n    private List&lt;Student&gt; students;\r\n\r\n    public Classroom(int studentLimit) {\r\n        this.studentLimit = studentLimit;\r\n        this.students = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    public boolean addStudent(Student student) {\r\n        if (students.size() &lt; studentLimit) {\r\n            students.add(student);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public boolean removeStudentByName(String name) {\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            if (students.get(i).getName().equals(name)) {\r\n                students.remove(i);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public boolean removeStudentByIndex(int index) {\r\n        if (index &gt;= 0 &amp;&amp; index &lt; students.size()) {\r\n            students.remove(index);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public List&lt;Student&gt; getAllStudents() {\r\n        return students;\r\n    }\r\n\r\n    public Student getStudentWithHighestGrade() {\r\n        Student highestGradeStudent = null;\r\n        double highestGrade = -1;\r\n\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            Student student = students.get(i);\r\n            if (student.getGrade() &gt; highestGrade) {\r\n                highestGrade = student.getGrade();\r\n                highestGradeStudent = student;\r\n            }\r\n        }\r\n        return highestGradeStudent;\r\n    }\r\n\r\n    public double getClassAverage() {\r\n        if (students.isEmpty()) {\r\n            return 0;\r\n        }\r\n\r\n        double sum = 0;\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            Student student = students.get(i);\r\n            sum += student.getGrade();\r\n        }\r\n        return sum / students.size();\r\n    }\r\n}\r\n\r\nclass Student {\r\n    private String name;\r\n    private double grade;\r\n\r\n    public Student(String name, double grade) {\r\n        this.name = name;\r\n        this.grade = grade;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public double getGrade() {\r\n        return grade;\r\n    }\r\n\r\n    public void setGrade(double grade) {\r\n        this.grade = grade;\r\n    }\r\n}\r\n\r\npublic class ClassroomStudentsMain {\r\n    public static void main(String[] args) {\r\n        Classroom classroom = new Classroom(5);\r\n\r\n        classroom.addStudent(new Student(&quot;John&quot;, 80));\r\n        classroom.addStudent(new Student(&quot;Alice&quot;, 90));\r\n        classroom.addStudent(new Student(&quot;Bob&quot;, 75));\r\n        classroom.addStudent(new Student(&quot;Emily&quot;, 95));\r\n        classroom.addStudent(new Student(&quot;Tom&quot;, 85));\r\n\r\n        System.out.println(&quot;All Students: &quot;);\r\n        List&lt;Student&gt; students = classroom.getAllStudents();\r\n\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            Student student = students.get(i);\r\n            System.out.println(student.getName() + &quot; - Grade: &quot; + student.getGrade());\r\n        }\r\n\r\n        System.out.println(&quot;\\nHighest Grade Student: &quot;);\r\n        Student highestGradeStudent = classroom.getStudentWithHighestGrade();\r\n        System.out.println(highestGradeStudent.getName() + &quot; - Grade: &quot; + highestGradeStudent.getGrade());\r\n\r\n        System.out.println(&quot;\\nClass Average Grade: &quot; + classroom.getClassAverage());\r\n    }\r\n}\r\n```\r\n\r\nThis iteration of the code works properly and it generated the class files necessary. Now I am trying to make an iteration where the 3 classes: Classroom, Student, and ClassroomStudentsMain are seperate Java files. I already made a folder for the 2 classes: ClassroomVer2, and StudentVer2, named &quot;students_class&quot;. I  implemented the codes for the classes the exact same way as I implemented them in the first iteration of the code above. Let me insert the respective codes for the 2 classes I am pertaining to.\r\n\r\nThis is for the StudentVer2 class. \r\n&quot;StudentVer2.java&quot;\r\n```\r\npackage students_class;\r\n\r\npublic class StudentVer2 {\r\n    private String name;\r\n    private double grade;\r\n\r\n    public StudentVer2(String name, double grade) {\r\n        this.name = name;\r\n        this.grade = grade;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public double getGrade() {\r\n        return grade;\r\n    }\r\n\r\n    public void setGrade(double grade) {\r\n        this.grade = grade;\r\n    }\r\n}\r\n```\r\n\r\nThis is for the ClassroomVer2 class. \r\n&quot;ClassroomVer2.java&quot;\r\n```\r\npackage students_class;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ClassroomVer2 {\r\n    private int studentLimit;\r\n    private List&lt;StudentVer2&gt; students;\r\n\r\n    public ClassroomVer2(int studentLimit) {\r\n        this.studentLimit = studentLimit;\r\n        this.students = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    public boolean addStudent(StudentVer2 student) {\r\n        if (students.size() &lt; studentLimit) {\r\n            students.add(student);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public boolean removeStudentByName(String name) {\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            if (students.get(i).getName().equals(name)) {\r\n                students.remove(i);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public boolean removeStudentByIndex(int index) {\r\n        if (index &gt;= 0 &amp;&amp; index &lt; students.size()) {\r\n            students.remove(index);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public List&lt;StudentVer2&gt; getAllStudents() {\r\n        return students;\r\n    }\r\n\r\n    public StudentVer2 getStudentWithHighestGrade() {\r\n        StudentVer2 highestGradeStudent = null;\r\n        double highestGrade = -1;\r\n\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            StudentVer2 student = students.get(i);\r\n            if (student.getGrade() &gt; highestGrade) {\r\n                highestGrade = student.getGrade();\r\n                highestGradeStudent = student;\r\n            }\r\n        }\r\n        return highestGradeStudent;\r\n    }\r\n\r\n    public double getClassAverage() {\r\n        if (students.isEmpty()) {\r\n            return 0;\r\n        }\r\n\r\n        double sum = 0;\r\n        for (int i = 0; i &lt; students.size(); i++) {\r\n            StudentVer2 student = students.get(i);\r\n            sum += student.getGrade();\r\n        }\r\n        return sum / students.size();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe StudentVer2.java file compiled without any issues and generated a class file of its own. However, when I tried to compile and generate the class file for the ClassroomVer2.java file, it showed these errors, here are the errors that popped up in VS Code.\r\n\r\nClassroomVer2.java:8: error: cannot find symbol\r\n    private List&lt;StudentVer2&gt; students;\r\n                 ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n\r\nClassroomVer2.java:15: error: cannot find symbol\r\n    public boolean addStudent(StudentVer2 student) {\r\n                              ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n\r\nClassroomVer2.java:41: error: cannot find symbol\r\n    public List&lt;StudentVer2&gt; getAllStudents() {\r\n                ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n\r\nClassroomVer2.java:45: error: cannot find symbol\r\n    public StudentVer2 getStudentWithHighestGrade() {\r\n           ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n\r\nClassroomVer2.java:46: error: cannot find symbol\r\n        StudentVer2 highestGradeStudent = null;\r\n        ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n\r\nClassroomVer2.java:50: error: cannot find symbol\r\n            StudentVer2 student = students.get(i);\r\n            ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n\r\nClassroomVer2.java:66: error: cannot find symbol\r\n            StudentVer2 student = students.get(i);\r\n            ^\r\n  symbol:   class StudentVer2\r\n  location: class ClassroomVer2\r\n7 errors\r\n\r\n\r\nHow can I resolve this?\r\n\r\n\r\nI attempted to generate the class file for ClassroomVer2.java in the Command Prompt. However, I got the exact same error &quot;Cannot find symbol&quot;. I also tried renaming the folder, where the StudentVer2.java and ClassroomVer2.java files are located, a couple of times as well. Still no luck. ;(","title":"How will I be able to resolve the &quot;cannot find symbol&quot; issue for this code?","body":"<p>I am making a Java program about a simple student management system. Here's the summary of how the code works:</p>\n<ol>\n<li><p>Student class</p>\n<ul>\n<li>Represents a student with attributes such as the name and grade</li>\n<li>Provides methods to access and modify the student's name and grade.</li>\n</ul>\n</li>\n<li><p>Classroom class</p>\n<ul>\n<li>Manages a classroom of students.</li>\n<li>Stores a list of students and a maximum number of students.</li>\n<li>Provides methods to add a student, remove a student by name or index, and retrieve all students.                             Removal of a student will occur if they have the same name as another student.</li>\n<li>Includes methods to find the student with the highest grade and calculate the class average grade.</li>\n</ul>\n</li>\n<li><p>ClassroomStudentMain class</p>\n<ul>\n<li>Create an instance of the Classroom class with a limit of 5 students.</li>\n<li>Adds five students to the classroom with their respective names and grades.</li>\n<li>Prints the list of all students and their respective grades.</li>\n<li>Finds and prints the name and grade of the student with the highest grade.</li>\n<li>Calculates and prints the average grade of the class.</li>\n</ul>\n</li>\n</ol>\n<p>I already made an iteration of the code where the 3 classes are in one Java file named &quot;ClassroomStudentMain.java&quot;. Here's the implementation of the Java file I am pertaining to.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass Classroom {\n    private int studentLimit;\n    private List&lt;Student&gt; students;\n\n    public Classroom(int studentLimit) {\n        this.studentLimit = studentLimit;\n        this.students = new ArrayList&lt;&gt;();\n    }\n\n    public boolean addStudent(Student student) {\n        if (students.size() &lt; studentLimit) {\n            students.add(student);\n            return true;\n        }\n        return false;\n    }\n\n    public boolean removeStudentByName(String name) {\n        for (int i = 0; i &lt; students.size(); i++) {\n            if (students.get(i).getName().equals(name)) {\n                students.remove(i);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public boolean removeStudentByIndex(int index) {\n        if (index &gt;= 0 &amp;&amp; index &lt; students.size()) {\n            students.remove(index);\n            return true;\n        }\n        return false;\n    }\n\n    public List&lt;Student&gt; getAllStudents() {\n        return students;\n    }\n\n    public Student getStudentWithHighestGrade() {\n        Student highestGradeStudent = null;\n        double highestGrade = -1;\n\n        for (int i = 0; i &lt; students.size(); i++) {\n            Student student = students.get(i);\n            if (student.getGrade() &gt; highestGrade) {\n                highestGrade = student.getGrade();\n                highestGradeStudent = student;\n            }\n        }\n        return highestGradeStudent;\n    }\n\n    public double getClassAverage() {\n        if (students.isEmpty()) {\n            return 0;\n        }\n\n        double sum = 0;\n        for (int i = 0; i &lt; students.size(); i++) {\n            Student student = students.get(i);\n            sum += student.getGrade();\n        }\n        return sum / students.size();\n    }\n}\n\nclass Student {\n    private String name;\n    private double grade;\n\n    public Student(String name, double grade) {\n        this.name = name;\n        this.grade = grade;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public double getGrade() {\n        return grade;\n    }\n\n    public void setGrade(double grade) {\n        this.grade = grade;\n    }\n}\n\npublic class ClassroomStudentsMain {\n    public static void main(String[] args) {\n        Classroom classroom = new Classroom(5);\n\n        classroom.addStudent(new Student(&quot;John&quot;, 80));\n        classroom.addStudent(new Student(&quot;Alice&quot;, 90));\n        classroom.addStudent(new Student(&quot;Bob&quot;, 75));\n        classroom.addStudent(new Student(&quot;Emily&quot;, 95));\n        classroom.addStudent(new Student(&quot;Tom&quot;, 85));\n\n        System.out.println(&quot;All Students: &quot;);\n        List&lt;Student&gt; students = classroom.getAllStudents();\n\n        for (int i = 0; i &lt; students.size(); i++) {\n            Student student = students.get(i);\n            System.out.println(student.getName() + &quot; - Grade: &quot; + student.getGrade());\n        }\n\n        System.out.println(&quot;\\nHighest Grade Student: &quot;);\n        Student highestGradeStudent = classroom.getStudentWithHighestGrade();\n        System.out.println(highestGradeStudent.getName() + &quot; - Grade: &quot; + highestGradeStudent.getGrade());\n\n        System.out.println(&quot;\\nClass Average Grade: &quot; + classroom.getClassAverage());\n    }\n}\n</code></pre>\n<p>This iteration of the code works properly and it generated the class files necessary. Now I am trying to make an iteration where the 3 classes: Classroom, Student, and ClassroomStudentsMain are seperate Java files. I already made a folder for the 2 classes: ClassroomVer2, and StudentVer2, named &quot;students_class&quot;. I  implemented the codes for the classes the exact same way as I implemented them in the first iteration of the code above. Let me insert the respective codes for the 2 classes I am pertaining to.</p>\n<p>This is for the StudentVer2 class.\n&quot;StudentVer2.java&quot;</p>\n<pre><code>package students_class;\n\npublic class StudentVer2 {\n    private String name;\n    private double grade;\n\n    public StudentVer2(String name, double grade) {\n        this.name = name;\n        this.grade = grade;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public double getGrade() {\n        return grade;\n    }\n\n    public void setGrade(double grade) {\n        this.grade = grade;\n    }\n}\n</code></pre>\n<p>This is for the ClassroomVer2 class.\n&quot;ClassroomVer2.java&quot;</p>\n<pre><code>package students_class;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ClassroomVer2 {\n    private int studentLimit;\n    private List&lt;StudentVer2&gt; students;\n\n    public ClassroomVer2(int studentLimit) {\n        this.studentLimit = studentLimit;\n        this.students = new ArrayList&lt;&gt;();\n    }\n\n    public boolean addStudent(StudentVer2 student) {\n        if (students.size() &lt; studentLimit) {\n            students.add(student);\n            return true;\n        }\n        return false;\n    }\n\n    public boolean removeStudentByName(String name) {\n        for (int i = 0; i &lt; students.size(); i++) {\n            if (students.get(i).getName().equals(name)) {\n                students.remove(i);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public boolean removeStudentByIndex(int index) {\n        if (index &gt;= 0 &amp;&amp; index &lt; students.size()) {\n            students.remove(index);\n            return true;\n        }\n        return false;\n    }\n\n    public List&lt;StudentVer2&gt; getAllStudents() {\n        return students;\n    }\n\n    public StudentVer2 getStudentWithHighestGrade() {\n        StudentVer2 highestGradeStudent = null;\n        double highestGrade = -1;\n\n        for (int i = 0; i &lt; students.size(); i++) {\n            StudentVer2 student = students.get(i);\n            if (student.getGrade() &gt; highestGrade) {\n                highestGrade = student.getGrade();\n                highestGradeStudent = student;\n            }\n        }\n        return highestGradeStudent;\n    }\n\n    public double getClassAverage() {\n        if (students.isEmpty()) {\n            return 0;\n        }\n\n        double sum = 0;\n        for (int i = 0; i &lt; students.size(); i++) {\n            StudentVer2 student = students.get(i);\n            sum += student.getGrade();\n        }\n        return sum / students.size();\n    }\n}\n\n</code></pre>\n<p>The StudentVer2.java file compiled without any issues and generated a class file of its own. However, when I tried to compile and generate the class file for the ClassroomVer2.java file, it showed these errors, here are the errors that popped up in VS Code.</p>\n<p>ClassroomVer2.java:8: error: cannot find symbol\nprivate List students;\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2</p>\n<p>ClassroomVer2.java:15: error: cannot find symbol\npublic boolean addStudent(StudentVer2 student) {\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2</p>\n<p>ClassroomVer2.java:41: error: cannot find symbol\npublic List getAllStudents() {\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2</p>\n<p>ClassroomVer2.java:45: error: cannot find symbol\npublic StudentVer2 getStudentWithHighestGrade() {\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2</p>\n<p>ClassroomVer2.java:46: error: cannot find symbol\nStudentVer2 highestGradeStudent = null;\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2</p>\n<p>ClassroomVer2.java:50: error: cannot find symbol\nStudentVer2 student = students.get(i);\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2</p>\n<p>ClassroomVer2.java:66: error: cannot find symbol\nStudentVer2 student = students.get(i);\n^\nsymbol:   class StudentVer2\nlocation: class ClassroomVer2\n7 errors</p>\n<p>How can I resolve this?</p>\n<p>I attempted to generate the class file for ClassroomVer2.java in the Command Prompt. However, I got the exact same error &quot;Cannot find symbol&quot;. I also tried renaming the folder, where the StudentVer2.java and ClassroomVer2.java files are located, a couple of times as well. Still no luck. ;(</p>\n"},{"tags":["java","json","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686313166,"creation_date":1686312750,"answer_id":76440122,"question_id":76437635,"body_markdown":"&gt; I am using a custom Deserializer\r\n\r\nKafka already has a JsonDeserializer class that returns JsonNode, and can be iterated the same as a Map.\r\n\r\n---\r\n\r\n&gt; create a csv file\r\n\r\nI&#39;d recommend you use [json lines](https://jsonlines.org/).\r\n\r\nBut otherwise, you need to consider the fact that multiple consumer threads, or separate servers are running, so you&#39;d end up with many files (unless you guarantee you have a single partition topic).\r\n\r\nIn any case, I assume you already know the structure of your JSON in order to actually write CSV headers?\r\n\r\nSo,\r\n\r\n1. Create a POJO\r\n2. Add Jackson csv dataformat dependency \r\n3. Rewrite your Deserializer to return a POJO, rather than a Map (replace TypeReference with `YourCsvClass.class`)\r\n4. Open a file handle before your consumer starts, or keep a `Map&lt;String, File&gt;` to store an open file per key, which you must flush each file handle when consumer batch is complete, and close each file handle on JVM shutdown (or after consumer batch) \r\n5. Append `message.value()` to that file within the consumer loop. You do not need Streams here, nor does the Consumer iterator need to become a Map \r\n\r\nI&#39;ll note that Kafka isn&#39;t really related to your problem, other than you shouldn&#39;t try to create one file per record. Refer https://www.baeldung.com/java-converting-json-to-csv\r\n\r\nAlso worth pointing out the Kafka Connect HDFS/S3 Sink can already do this for you, and will properly handle multiple partition topics (though the filename cannot be changed to use the record key)","title":"create a map using key value of ConsumerRecord kafka","body":"<blockquote>\n<p>I am using a custom Deserializer</p>\n</blockquote>\n<p>Kafka already has a JsonDeserializer class that returns JsonNode, and can be iterated the same as a Map.</p>\n<hr />\n<blockquote>\n<p>create a csv file</p>\n</blockquote>\n<p>I'd recommend you use <a href=\"https://jsonlines.org/\" rel=\"nofollow noreferrer\">json lines</a>.</p>\n<p>But otherwise, you need to consider the fact that multiple consumer threads, or separate servers are running, so you'd end up with many files (unless you guarantee you have a single partition topic).</p>\n<p>In any case, I assume you already know the structure of your JSON in order to actually write CSV headers?</p>\n<p>So,</p>\n<ol>\n<li>Create a POJO</li>\n<li>Add Jackson csv dataformat dependency</li>\n<li>Rewrite your Deserializer to return a POJO, rather than a Map (replace TypeReference with <code>YourCsvClass.class</code>)</li>\n<li>Open a file handle before your consumer starts, or keep a <code>Map&lt;String, File&gt;</code> to store an open file per key, which you must flush each file handle when consumer batch is complete, and close each file handle on JVM shutdown (or after consumer batch)</li>\n<li>Append <code>message.value()</code> to that file within the consumer loop. You do not need Streams here, nor does the Consumer iterator need to become a Map</li>\n</ol>\n<p>I'll note that Kafka isn't really related to your problem, other than you shouldn't try to create one file per record. Refer <a href=\"https://www.baeldung.com/java-converting-json-to-csv\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-converting-json-to-csv</a></p>\n<p>Also worth pointing out the Kafka Connect HDFS/S3 Sink can already do this for you, and will properly handle multiple partition topics (though the filename cannot be changed to use the record key)</p>\n"}],"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":523,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686320552,"creation_date":1686290966,"question_id":76437635,"body_markdown":"I am using KafkaConsumer to read messages from a list of kafka topics. I am using a custom Deserializer. below is the method from Deserializer:\r\n\r\n    public Object deserialize(String s, byte[] bytes) {\r\n        if (!isEmpty(bytes)) {\r\n          try {\r\n            return objectMapper.readValue(bytes, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n            });\r\n          } catch (Exception e) {\r\n            LOGGER.error(&quot;Error while deserializing bytes[] {} to json object &quot;, new String(bytes), e);\r\n          }\r\n        }\r\n    \r\n        return null;\r\n      }\r\n\r\nNo error happens here. Following is the screenshot of `ConsumerRecords` that I get:\r\n[![enter image description here][1]][1]\r\n\r\nThe `ConsumerRecord` value tag has the values as a Map.\r\nSo following is my requirement:\r\n - Use the messages from the topic to create a csv file.\r\n - because there are multiple topics, so it&#39;s required to create multiple files using messages from each topic.\r\n\r\n**Probable Solution:**\r\n - separate the messages by topic. each topic can have a list of messages.\r\n - so, I need a `Map&lt;String, List&lt;Map&lt;String, Value&gt;&gt;&gt;`. here the key(String) should be the topics and the value is :\r\nValue tag from `ConsumerRecord` in screenshot.\r\n\r\nQuestions:\r\n1. How can I get the value tag from `ConsumerRecord` return as Map. Till now this is the best I could do:\r\n\r\n     List&lt;Object&gt; customerMigrationKafkaMessages =\r\n                consumerRecords.stream()\r\n                    .flatMap(c -&gt; StreamSupport.stream(c.spliterator(), false).map(ConsumerRecord::value))\r\n                    .collect(Collectors.toList());\r\n2. But, need to iterate `ConsumerRecords` in a way that I can create a Map. Key is the topic name, and value is the `List` object of the Map from above step.\r\n3. Why do I need step1. as HashMap? 1. The keyset would serve as the header of the csv that I have to create. 2. The valueSet will the rows in the csv file.\r\n\r\nPlease help me with some ideas, I am not able to code this.\r\nThanks!\r\n\r\n  [1]: https://i.stack.imgur.com/DAG8x.png\r\n\r\nEdit 1:\r\nAdding my comments to the answer from @OneCricketer\r\n1. https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka#:~:text=already%20has%20a-,JsonDeserializer,-class%20that%20returns - I have tried using this:\r\n\r\n    kafka.value.deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\r\nBut keep getting exception: `Caused by: java.lang.IllegalStateException: No type information in headers and no default type provided`\r\n\r\n2. https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka/76440122#76440122:~:text=structure%20of%20your-,JSON,-in%20order%20to : Yes, I know the structure. But, as I mentioned, there are multiple topics, so I will end up creating multiple POJO(which I did plan earlier), but later I am again converting those POJO to string and then writing to the file. Also, will have to create a Map before deserialization happens, so that I can use the right class type corresponding to the topic. Example:\r\n```java\r\nMap myMap = new HashMap&lt;&gt;();\r\n    myMap.put(&quot;TopicA&quot;, MyClassA.class);\r\n    myMap.put(&quot;TopicB&quot;, MyClassB.class);\r\n    public Object deserialize(String topic, String s, byte[] bytes) {\r\n      if (!isEmpty(bytes)) {\r\n        try {\r\n          return objectMapper.readValue(bytes, myMap.get(topic));\r\n        } catch (Exception e) {\r\n          LOGGER.error(&quot;Error while deserializing bytes[] {} to json object &quot;, new String(bytes), e);\r\n        }\r\n      }\r\n      return null;\r\n```\r\n3. https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka/76440122#76440122:~:text=YourCsvClass.class)-,Open,-a%20file%20handle - I might have misunderstood this.I can have a list of messages for each topic, and all those messages should go to a one file, and not file per message.\r\nSo, if I have 4 topics processed. I need to have 4 files created.\r\n\r\n\r\n\r\n\r\n","title":"create a map using key value of ConsumerRecord kafka","body":"<p>I am using KafkaConsumer to read messages from a list of kafka topics. I am using a custom Deserializer. below is the method from Deserializer:</p>\n<pre><code>public Object deserialize(String s, byte[] bytes) {\n    if (!isEmpty(bytes)) {\n      try {\n        return objectMapper.readValue(bytes, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n        });\n      } catch (Exception e) {\n        LOGGER.error(&quot;Error while deserializing bytes[] {} to json object &quot;, new String(bytes), e);\n      }\n    }\n\n    return null;\n  }\n</code></pre>\n<p>No error happens here. Following is the screenshot of <code>ConsumerRecords</code> that I get:\n<a href=\"https://i.stack.imgur.com/DAG8x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DAG8x.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>ConsumerRecord</code> value tag has the values as a Map.\nSo following is my requirement:</p>\n<ul>\n<li>Use the messages from the topic to create a csv file.</li>\n<li>because there are multiple topics, so it's required to create multiple files using messages from each topic.</li>\n</ul>\n<p><strong>Probable Solution:</strong></p>\n<ul>\n<li>separate the messages by topic. each topic can have a list of messages.</li>\n<li>so, I need a <code>Map&lt;String, List&lt;Map&lt;String, Value&gt;&gt;&gt;</code>. here the key(String) should be the topics and the value is :\nValue tag from <code>ConsumerRecord</code> in screenshot.</li>\n</ul>\n<p>Questions:</p>\n<ol>\n<li><p>How can I get the value tag from <code>ConsumerRecord</code> return as Map. Till now this is the best I could do:</p>\n<p>List customerMigrationKafkaMessages =\nconsumerRecords.stream()\n.flatMap(c -&gt; StreamSupport.stream(c.spliterator(), false).map(ConsumerRecord::value))\n.collect(Collectors.toList());</p>\n</li>\n<li><p>But, need to iterate <code>ConsumerRecords</code> in a way that I can create a Map. Key is the topic name, and value is the <code>List</code> object of the Map from above step.</p>\n</li>\n<li><p>Why do I need step1. as HashMap? 1. The keyset would serve as the header of the csv that I have to create. 2. The valueSet will the rows in the csv file.</p>\n</li>\n</ol>\n<p>Please help me with some ideas, I am not able to code this.\nThanks!</p>\n<p>Edit 1:\nAdding my comments to the answer from @OneCricketer</p>\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka#:%7E:text=already%20has%20a-,JsonDeserializer,-class%20that%20returns\">https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka#:~:text=already%20has%20a-,JsonDeserializer,-class%20that%20returns</a> - I have tried using this:</p>\n<p>kafka.value.deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\nBut keep getting exception: <code>Caused by: java.lang.IllegalStateException: No type information in headers and no default type provided</code></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka/76440122#76440122:%7E:text=structure%20of%20your-,JSON,-in%20order%20to\">https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka/76440122#76440122:~:text=structure%20of%20your-,JSON,-in%20order%20to</a> : Yes, I know the structure. But, as I mentioned, there are multiple topics, so I will end up creating multiple POJO(which I did plan earlier), but later I am again converting those POJO to string and then writing to the file. Also, will have to create a Map before deserialization happens, so that I can use the right class type corresponding to the topic. Example:</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Map myMap = new HashMap&lt;&gt;();\n    myMap.put(&quot;TopicA&quot;, MyClassA.class);\n    myMap.put(&quot;TopicB&quot;, MyClassB.class);\n    public Object deserialize(String topic, String s, byte[] bytes) {\n      if (!isEmpty(bytes)) {\n        try {\n          return objectMapper.readValue(bytes, myMap.get(topic));\n        } catch (Exception e) {\n          LOGGER.error(&quot;Error while deserializing bytes[] {} to json object &quot;, new String(bytes), e);\n        }\n      }\n      return null;\n</code></pre>\n<ol start=\"3\">\n<li><a href=\"https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka/76440122#76440122:%7E:text=YourCsvClass.class\">https://stackoverflow.com/questions/76437635/create-a-map-using-key-value-of-consumerrecord-kafka/76440122#76440122:~:text=YourCsvClass.class</a>)-,Open,-a%20file%20handle - I might have misunderstood this.I can have a list of messages for each topic, and all those messages should go to a one file, and not file per message.\nSo, if I have 4 topics processed. I need to have 4 files created.</li>\n</ol>\n"},{"tags":["java","cartesian"],"owner":{"account_id":15854522,"reputation":15,"user_id":11439321,"display_name":"Callum Bell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686320217,"creation_date":1686320217,"question_id":76441123,"body_markdown":"Is there a way to convert Cartesian coordinates to Lat and Lon while only knowing the X and Y Cartesian coordinates?\r\n\r\nI&#39;m trying to create a Java program to do they conversions and after some reading I currently have the following where R = the approx radius of the Earth in km 6371 and z I have assumed as 0.0: \r\n\r\n\r\n```\r\n        // Convert Cartesian coordinates to latitude and longitude\r\n        double longitude = Math.atan2(y, x);\r\n        double latitude = Math.asin(z / R);\r\n\r\n        // Convert radians to degrees\r\n        longitude = Math.toDegrees(longitude);\r\n        latitude = Math.toDegrees(latitude);\r\n```\r\n\r\n","title":"Converting Cartesian Coordinates to Lat and Lon with only x and y Cartesian Coordinates (Java)","body":"<p>Is there a way to convert Cartesian coordinates to Lat and Lon while only knowing the X and Y Cartesian coordinates?</p>\n<p>I'm trying to create a Java program to do they conversions and after some reading I currently have the following where R = the approx radius of the Earth in km 6371 and z I have assumed as 0.0:</p>\n<pre><code>        // Convert Cartesian coordinates to latitude and longitude\n        double longitude = Math.atan2(y, x);\n        double latitude = Math.asin(z / R);\n\n        // Convert radians to degrees\n        longitude = Math.toDegrees(longitude);\n        latitude = Math.toDegrees(latitude);\n</code></pre>\n"},{"tags":["java","amazon-sqs"],"answers":[{"tags":[],"owner":{"account_id":457338,"reputation":861,"user_id":3893676,"display_name":"Ramesh Sen"},"down_vote_count":0,"up_vote_count":76,"is_accepted":true,"score":76,"last_activity_date":1408077445,"creation_date":1408077445,"answer_id":25321327,"question_id":25107605,"body_markdown":"You have to specify which message attributes you want in your request (or use &quot;All&quot; to get all message attributes). So in your case you could use either\r\n\r\n    List&lt;Message&gt; messages = sqs.receiveMessage(receiveMessageRequest.withMessageAttributeNames(&quot;attributeTest&quot;)).getMessages();\r\nor\r\n\r\n    List&lt;Message&gt; messages = sqs.receiveMessage(receiveMessageRequest.withMessageAttributeNames(&quot;All&quot;)).getMessages();\r\n\r\nIf you want the standard attributes (ApproximateFirstReceiveTimestamp, ApproximateReceiveCount, SenderId, and SentTimestamp) along with your messages, use `withAttributeNames(&quot;All&quot;)`. You can find more detail in the Javadocs for [ReceiveMessageRequest](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/sqs/model/ReceiveMessageRequest.html). ","title":"Amazon SQS Java SDK - cannot receive message attributes","body":"<p>You have to specify which message attributes you want in your request (or use \"All\" to get all message attributes). So in your case you could use either</p>\n\n<pre><code>List&lt;Message&gt; messages = sqs.receiveMessage(receiveMessageRequest.withMessageAttributeNames(\"attributeTest\")).getMessages();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>List&lt;Message&gt; messages = sqs.receiveMessage(receiveMessageRequest.withMessageAttributeNames(\"All\")).getMessages();\n</code></pre>\n\n<p>If you want the standard attributes (ApproximateFirstReceiveTimestamp, ApproximateReceiveCount, SenderId, and SentTimestamp) along with your messages, use <code>withAttributeNames(\"All\")</code>. You can find more detail in the Javadocs for <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/sqs/model/ReceiveMessageRequest.html\">ReceiveMessageRequest</a>. </p>\n"},{"tags":[],"owner":{"account_id":4985641,"reputation":11,"user_id":4009348,"display_name":"Fr&#233;d&#233;ric PREVOST"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686320142,"creation_date":1686143538,"answer_id":76423678,"question_id":25107605,"body_markdown":"There are two different methods:\r\n\r\n - `messageAttributeNames()` which gets custom attributes send with the message,\r\n - `attributeNames()` which gets system attributes linked to the message (`retryCount`, ...)","title":"Amazon SQS Java SDK - cannot receive message attributes","body":"<p>There are two different methods:</p>\n<ul>\n<li><code>messageAttributeNames()</code> which gets custom attributes send with the message,</li>\n<li><code>attributeNames()</code> which gets system attributes linked to the message (<code>retryCount</code>, ...)</li>\n</ul>\n"}],"owner":{"account_id":191647,"reputation":601,"user_id":432344,"display_name":"John Simoes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16766,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":25321327,"answer_count":2,"score":35,"last_activity_date":1686320142,"creation_date":1407089291,"question_id":25107605,"body_markdown":"After posting a message with an attribute to SQS with the following code before sending it (and checking in SQS console to see if everything is posted correctly)...\r\n\r\n    messageRequest.addMessageAttributesEntry(\r\n            &quot;attributeTest&quot;, \r\n            new MessageAttributeValue()\r\n                .withDataType(&quot;String&quot;)\r\n                .withStringValue(&quot;attributeTest 123&quot;));\r\n\r\nI cannot retrieve any of the message attributes in the message. All I see, as a result, is &quot;0 attributes.&quot;. Reinspecting the message in Amazon SQS console, the message - and the attribute - are still there.\r\n\r\n    // Message was previously checked in SQS console and contains \r\n    // an attribute named &quot;attributeTest&quot;\r\n\r\n    AmazonSQS sqs = ...\r\n    List&lt;Message&gt; messages = sqs.receiveMessage(receiveMessageRequest).getMessages();\r\n    for (Message : messages) \r\n    {\r\n        Map&lt;String, MessageAttributeValue&gt; attributes = message.getMessageAttributes();\r\n        System.out.println(&quot;&quot; + attributes.size() + &quot; attributes.&quot;);\r\n    }\r\n\r\nI am using Amazon SQS SDK v1.8 in Java 1.7 with Play Framework 2.2.3. At first I thought it could be the SQS version but tried upgrading to 1.8.7 with no avail.\r\n\r\nThe official documentation found [here][1] does not provide any sourcecode to read the attributes at all. Nor github searches, stack overflow. I&#39;ve been trying for a few hours without any success.\r\n\r\nThanks for any help!\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/SQSMessageAttributes.html","title":"Amazon SQS Java SDK - cannot receive message attributes","body":"<p>After posting a message with an attribute to SQS with the following code before sending it (and checking in SQS console to see if everything is posted correctly)...</p>\n\n<pre><code>messageRequest.addMessageAttributesEntry(\n        \"attributeTest\", \n        new MessageAttributeValue()\n            .withDataType(\"String\")\n            .withStringValue(\"attributeTest 123\"));\n</code></pre>\n\n<p>I cannot retrieve any of the message attributes in the message. All I see, as a result, is \"0 attributes.\". Reinspecting the message in Amazon SQS console, the message - and the attribute - are still there.</p>\n\n<pre><code>// Message was previously checked in SQS console and contains \n// an attribute named \"attributeTest\"\n\nAmazonSQS sqs = ...\nList&lt;Message&gt; messages = sqs.receiveMessage(receiveMessageRequest).getMessages();\nfor (Message : messages) \n{\n    Map&lt;String, MessageAttributeValue&gt; attributes = message.getMessageAttributes();\n    System.out.println(\"\" + attributes.size() + \" attributes.\");\n}\n</code></pre>\n\n<p>I am using Amazon SQS SDK v1.8 in Java 1.7 with Play Framework 2.2.3. At first I thought it could be the SQS version but tried upgrading to 1.8.7 with no avail.</p>\n\n<p>The official documentation found <a href=\"http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/SQSMessageAttributes.html\" rel=\"noreferrer\">here</a> does not provide any sourcecode to read the attributes at all. Nor github searches, stack overflow. I've been trying for a few hours without any success.</p>\n\n<p>Thanks for any help!</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1686310780,"post_id":76439387,"comment_id":134784784,"body_markdown":"Please show a [mcve]. Where else are you using ktableMaster since that&#39;s your error?","body":"Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Where else are you using ktableMaster since that&#39;s your error?"},{"owner":{"account_id":2871238,"reputation":185,"user_id":2464547,"accept_rate":75,"display_name":"Ignatius Samuel Megis"},"score":0,"creation_date":1686320446,"post_id":76439387,"comment_id":134786976,"body_markdown":"sorry,  I already edit,","body":"sorry,  I already edit,"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1686357010,"post_id":76439387,"comment_id":134792378,"body_markdown":"Are you able to create two separate StreamsConfig properties, with two StreamBuilders , then run two separate topologies with unique `application.id`?","body":"Are you able to create two separate StreamsConfig properties, with two StreamBuilders , then run two separate topologies with unique <code>application.id</code>?"},{"owner":{"account_id":2871238,"reputation":185,"user_id":2464547,"accept_rate":75,"display_name":"Ignatius Samuel Megis"},"score":0,"creation_date":1686535266,"post_id":76439387,"comment_id":134806929,"body_markdown":"i see, let me try with different consumer.group. Thanks anyway @OneCricketeer","body":"i see, let me try with different consumer.group. Thanks anyway @OneCricketeer"}],"owner":{"account_id":2871238,"reputation":185,"user_id":2464547,"accept_rate":75,"display_name":"Ignatius Samuel Megis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686320129,"creation_date":1686306622,"question_id":76439387,"body_markdown":"I have trouble when create kstream from topic source A and B. topic A and B is different schema.\r\nso i build different stream in one project.\r\n\r\nhere snip my code :\r\n```\r\nString ktableMaster = &quot;TOPIC_NAME_MASTER&quot;;\r\n\r\npublic KStream&lt;String, SchemaA&gt; KstreamA(StreamsBuilder builder) {\r\n    KStream&lt;String, SchemaA&gt; kstreamA = builder.stream(sourceTopicA, Consumed.with(Serdes.String(), serdeA))\r\n                        .selectKey(&quot;specific-key&quot;);\r\n    }\r\n    KStream&lt;String, SchemaA&gt; schemaACompleteKstream = KstreamA.join(ktableMaster, (k, v) -&gt; k, new SchemaCompleteA()); \r\n    \r\n    schemaACompleteKstream\r\n                .map(new KeyValueMapper&lt;String, SchemaA, KeyValue&lt;? extends String, ? extends SchemaA&gt;&gt;() {\r\n                    @Override\r\n                    public KeyValue&lt;? extends String, ? extends SchemaA&gt; apply(String s, SchemaA SchemaCompleteA) {\r\n                        return new KeyValue&lt;&gt;(null, SchemaCompleteA);\r\n                    }\r\n                }).to(destTopicSchemaA, Produced.with(null, schemaASerdeComplete));\r\n```\r\n\r\nthen i build code for schema B in same class ,\r\n\r\n    public KStream&lt;String, SchemaB&gt; KstreamB(StreamsBuilder builder) {\r\n        KStream&lt;String, SchemaB&gt; kstreamB = builder.stream(sourceTopicB, Consumed.with(Serdes.String(), serdeB))\r\n                            .selectKey(&quot;specific-key&quot;);\r\n        }\r\n        KStream&lt;String, SchemaB&gt; schemaBCompleteKstream = KstreamB.join(ktableMaster, (k, v) -&gt; k, new SchemaCompleteB());\r\n        \r\n        schemaBCompleteKstream\r\n                    .map(new KeyValueMapper&lt;String, SchemaB, KeyValue&lt;? extends String, ? extends SchemaB&gt;&gt;() {\r\n                        @Override\r\n                        public KeyValue&lt;? extends String, ? extends SchemaB&gt; apply(String s, SchemaB SchemaCompleteB) {\r\n                            return new KeyValue&lt;&gt;(null, SchemaCompleteB);\r\n                        }\r\n                    }).to(destTopicSchemaB, Produced.with(null, schemaBSerdeComplete));\r\n\r\nthen i get eror like this \r\n\r\n&gt; Could not start stream: ; nested exception is org.apache.kafka.streams.errors.TopologyException: Invalid topology: Topic ktableMaster has already been registered by another source.\r\n\r\n I know i can&#39;t use one topology in join same topic ","title":"mutiple source topic and join master topic then produce to final topic","body":"<p>I have trouble when create kstream from topic source A and B. topic A and B is different schema.\nso i build different stream in one project.</p>\n<p>here snip my code :</p>\n<pre><code>String ktableMaster = &quot;TOPIC_NAME_MASTER&quot;;\n\npublic KStream&lt;String, SchemaA&gt; KstreamA(StreamsBuilder builder) {\n    KStream&lt;String, SchemaA&gt; kstreamA = builder.stream(sourceTopicA, Consumed.with(Serdes.String(), serdeA))\n                        .selectKey(&quot;specific-key&quot;);\n    }\n    KStream&lt;String, SchemaA&gt; schemaACompleteKstream = KstreamA.join(ktableMaster, (k, v) -&gt; k, new SchemaCompleteA()); \n    \n    schemaACompleteKstream\n                .map(new KeyValueMapper&lt;String, SchemaA, KeyValue&lt;? extends String, ? extends SchemaA&gt;&gt;() {\n                    @Override\n                    public KeyValue&lt;? extends String, ? extends SchemaA&gt; apply(String s, SchemaA SchemaCompleteA) {\n                        return new KeyValue&lt;&gt;(null, SchemaCompleteA);\n                    }\n                }).to(destTopicSchemaA, Produced.with(null, schemaASerdeComplete));\n</code></pre>\n<p>then i build code for schema B in same class ,</p>\n<pre><code>public KStream&lt;String, SchemaB&gt; KstreamB(StreamsBuilder builder) {\n    KStream&lt;String, SchemaB&gt; kstreamB = builder.stream(sourceTopicB, Consumed.with(Serdes.String(), serdeB))\n                        .selectKey(&quot;specific-key&quot;);\n    }\n    KStream&lt;String, SchemaB&gt; schemaBCompleteKstream = KstreamB.join(ktableMaster, (k, v) -&gt; k, new SchemaCompleteB());\n    \n    schemaBCompleteKstream\n                .map(new KeyValueMapper&lt;String, SchemaB, KeyValue&lt;? extends String, ? extends SchemaB&gt;&gt;() {\n                    @Override\n                    public KeyValue&lt;? extends String, ? extends SchemaB&gt; apply(String s, SchemaB SchemaCompleteB) {\n                        return new KeyValue&lt;&gt;(null, SchemaCompleteB);\n                    }\n                }).to(destTopicSchemaB, Produced.with(null, schemaBSerdeComplete));\n</code></pre>\n<p>then i get eror like this</p>\n<blockquote>\n<p>Could not start stream: ; nested exception is org.apache.kafka.streams.errors.TopologyException: Invalid topology: Topic ktableMaster has already been registered by another source.</p>\n</blockquote>\n<p>I know i can't use one topology in join same topic</p>\n"},{"tags":["java","spring-boot","spring-kafka","aws-msk"],"owner":{"account_id":24035636,"reputation":1,"user_id":18015953,"display_name":"dcandu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686320095,"creation_date":1686320095,"question_id":76441109,"body_markdown":"we&#39;re using containerized Spring boot application which connects to `MSK Apache Kafka 2.8.2` using this library `org.springframework.kafka 2.6.3`\r\nwe got a lot of errors, as example. \r\n\r\n```\r\njava.lang.IllegalStateException: This error handler cannot process &#39;java.lang.IllegalStateException&#39;s; no record information is available\r\n\tat org.springframework.kafka.listener.SeekUtils.seekOrRecover(SeekUtils.java:151)\r\n\tat org.springframework.kafka.listener.SeekToCurrentErrorHandler.handle(SeekToCurrentErrorHandler.java:113)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.handleConsumerException(KafkaMessageListenerContainer.java:1394)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1095)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.IllegalStateException: Some partitions are unassigned but all consumers are at maximum capacity\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractStickyAssignor.constrainedAssign(AbstractStickyAssignor.java:248)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractStickyAssignor.assign(AbstractStickyAssignor.java:81)\r\n\tat org.apache.kafka.clients.consumer.CooperativeStickyAssignor.assign(CooperativeStickyAssignor.java:64)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractPartitionAssignor.assign(AbstractPartitionAssignor.java:66)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.performAssignment(ConsumerCoordinator.java:590)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.onJoinLeader(AbstractCoordinator.java:689)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.access$1400(AbstractCoordinator.java:111)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator$JoinGroupResponseHandler.handle(AbstractCoordinator.java:602)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator$JoinGroupResponseHandler.handle(AbstractCoordinator.java:575)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:1132)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:1107)\r\n\tat org.apache.kafka.clients.consumer.internals.RequestFuture$1.onSuccess(RequestFuture.java:206)\r\n\tat org.apache.kafka.clients.consumer.internals.RequestFuture.fireSuccess(RequestFuture.java:169)\r\n\tat org.apache.kafka.clients.consumer.internals.RequestFuture.complete(RequestFuture.java:129)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient$RequestFutureCompletionHandler.fireCompletion(ConsumerNetworkClient.java:602)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.firePendingCompletedRequests(ConsumerNetworkClient.java:412)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:297)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:236)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:215)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:419)\r\n\tat org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:359)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:513)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.updateAssignmentMetadataIfNeeded(KafkaConsumer.java:1268)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1230)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1210)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doPoll(KafkaMessageListenerContainer.java:1238)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1133)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1054)\r\n\t... 3 common frames omitted\r\n```\r\n\r\nBefore these storm of errors we got the following errors, but just few of them\r\n\r\n\r\n```\r\norg.apache.kafka.clients.consumer.CommitFailedException: Offset commit cannot be completed since the consumer is not part of an active group for auto partition assignment; it is likely that the consumer was kicked out of the group.\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.sendOffsetCommitRequest(ConsumerCoordinator.java:1134)\r\n\tat org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.commitOffsetsSync(ConsumerCoordinator.java:999)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.commitSync(KafkaConsumer.java:1504)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doCommitSync(KafkaMessageListenerContainer.java:2351)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.commitSync(KafkaMessageListenerContainer.java:2346)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.ackImmediate(KafkaMessageListenerContainer.java:1471)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.processAck(KafkaMessageListenerContainer.java:1450)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.access$2500(KafkaMessageListenerContainer.java:450)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer$ConsumerAcknowledgment.acknowledge(KafkaMessageListenerContainer.java:2484)\r\n\tat com.welikan.core.event_handler.api.BaseAcknowledgingTenantEventHandler.handle(BaseAcknowledgingTenantEventHandler.java:38)\r\n\tat com.welikan.core.common.services.kafka.impl.KafkaTenantTopicServiceImpl.lambda$buildOnMessageCallback$3(KafkaTenantTopicServiceImpl.java:93)\r\n\tat org.springframework.kafka.listener.AcknowledgingMessageListener.onMessage(AcknowledgingMessageListener.java:33)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2033)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2006)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:1943)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:1883)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:1777)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:1498)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1149)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1054)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nAlso in cloudwatch logs we have a lot of rebalances events.\r\n\r\n\r\nFor consumer we have the following configuration:\r\n```\r\nmax.poll.records = 50\r\npartition.assignment.strategy = CooperativeStickyAssignor\r\n```\r\n\r\nWe tried to increase `max.poll.intervall` from 5 minutes up to 10 minutes.","title":"Spring Kafka library consumer exception","body":"<p>we're using containerized Spring boot application which connects to <code>MSK Apache Kafka 2.8.2</code> using this library <code>org.springframework.kafka 2.6.3</code>\nwe got a lot of errors, as example.</p>\n<pre><code>java.lang.IllegalStateException: This error handler cannot process 'java.lang.IllegalStateException's; no record information is available\n    at org.springframework.kafka.listener.SeekUtils.seekOrRecover(SeekUtils.java:151)\n    at org.springframework.kafka.listener.SeekToCurrentErrorHandler.handle(SeekToCurrentErrorHandler.java:113)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.handleConsumerException(KafkaMessageListenerContainer.java:1394)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1095)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: java.lang.IllegalStateException: Some partitions are unassigned but all consumers are at maximum capacity\n    at org.apache.kafka.clients.consumer.internals.AbstractStickyAssignor.constrainedAssign(AbstractStickyAssignor.java:248)\n    at org.apache.kafka.clients.consumer.internals.AbstractStickyAssignor.assign(AbstractStickyAssignor.java:81)\n    at org.apache.kafka.clients.consumer.CooperativeStickyAssignor.assign(CooperativeStickyAssignor.java:64)\n    at org.apache.kafka.clients.consumer.internals.AbstractPartitionAssignor.assign(AbstractPartitionAssignor.java:66)\n    at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.performAssignment(ConsumerCoordinator.java:590)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.onJoinLeader(AbstractCoordinator.java:689)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.access$1400(AbstractCoordinator.java:111)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$JoinGroupResponseHandler.handle(AbstractCoordinator.java:602)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$JoinGroupResponseHandler.handle(AbstractCoordinator.java:575)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:1132)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:1107)\n    at org.apache.kafka.clients.consumer.internals.RequestFuture$1.onSuccess(RequestFuture.java:206)\n    at org.apache.kafka.clients.consumer.internals.RequestFuture.fireSuccess(RequestFuture.java:169)\n    at org.apache.kafka.clients.consumer.internals.RequestFuture.complete(RequestFuture.java:129)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient$RequestFutureCompletionHandler.fireCompletion(ConsumerNetworkClient.java:602)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.firePendingCompletedRequests(ConsumerNetworkClient.java:412)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:297)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:236)\n    at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:215)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.joinGroupIfNeeded(AbstractCoordinator.java:419)\n    at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:359)\n    at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:513)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.updateAssignmentMetadataIfNeeded(KafkaConsumer.java:1268)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1230)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1210)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doPoll(KafkaMessageListenerContainer.java:1238)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1133)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1054)\n    ... 3 common frames omitted\n</code></pre>\n<p>Before these storm of errors we got the following errors, but just few of them</p>\n<pre><code>org.apache.kafka.clients.consumer.CommitFailedException: Offset commit cannot be completed since the consumer is not part of an active group for auto partition assignment; it is likely that the consumer was kicked out of the group.\n    at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.sendOffsetCommitRequest(ConsumerCoordinator.java:1134)\n    at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.commitOffsetsSync(ConsumerCoordinator.java:999)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.commitSync(KafkaConsumer.java:1504)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doCommitSync(KafkaMessageListenerContainer.java:2351)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.commitSync(KafkaMessageListenerContainer.java:2346)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.ackImmediate(KafkaMessageListenerContainer.java:1471)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.processAck(KafkaMessageListenerContainer.java:1450)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.access$2500(KafkaMessageListenerContainer.java:450)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer$ConsumerAcknowledgment.acknowledge(KafkaMessageListenerContainer.java:2484)\n    at com.welikan.core.event_handler.api.BaseAcknowledgingTenantEventHandler.handle(BaseAcknowledgingTenantEventHandler.java:38)\n    at com.welikan.core.common.services.kafka.impl.KafkaTenantTopicServiceImpl.lambda$buildOnMessageCallback$3(KafkaTenantTopicServiceImpl.java:93)\n    at org.springframework.kafka.listener.AcknowledgingMessageListener.onMessage(AcknowledgingMessageListener.java:33)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2033)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2006)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:1943)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:1883)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:1777)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:1498)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1149)\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1054)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Also in cloudwatch logs we have a lot of rebalances events.</p>\n<p>For consumer we have the following configuration:</p>\n<pre><code>max.poll.records = 50\npartition.assignment.strategy = CooperativeStickyAssignor\n</code></pre>\n<p>We tried to increase <code>max.poll.intervall</code> from 5 minutes up to 10 minutes.</p>\n"},{"tags":["javascript","java","android","linux-device-driver","lineageos"],"comments":[{"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":0,"creation_date":1686319878,"post_id":76441068,"comment_id":134786827,"body_markdown":"Why do you want a static IP address? What do you expect to do with this device?","body":"Why do you want a static IP address? What do you expect to do with this device?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686334080,"post_id":76441068,"comment_id":134789688,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":23571513,"reputation":1,"user_id":17611596,"display_name":"Chaithra "},"score":0,"creation_date":1686549769,"post_id":76441068,"comment_id":134807989,"body_markdown":"Hi @Community,  Once I have been loaded the fir_driver module the eth1 node will be created and using the following command I set the Ip for it &quot;$ ifconfig eth1 5.5.5.6 up&quot; after issuing the command the particular mentioned IP is assigned to the eth1 and making it down using following command &quot;$ ifconfig eth1 down&quot; and Making it Up using command &quot;$ ifconfig eth1 up&quot;,this case I am checking validate the particular given IP is persistent or not.  In this Case I am facing IP is Wavering. once the &quot;eth1&quot; is up. please, help me over to resolve this issue","body":"Hi @Community,  Once I have been loaded the fir_driver module the eth1 node will be created and using the following command I set the Ip for it &quot;$ ifconfig eth1 5.5.5.6 up&quot; after issuing the command the particular mentioned IP is assigned to the eth1 and making it down using following command &quot;$ ifconfig eth1 down&quot; and Making it Up using command &quot;$ ifconfig eth1 up&quot;,this case I am checking validate the particular given IP is persistent or not.  In this Case I am facing IP is Wavering. once the &quot;eth1&quot; is up. please, help me over to resolve this issue"},{"owner":{"account_id":5791001,"reputation":15534,"user_id":5264491,"display_name":"Ian Abbott"},"score":0,"creation_date":1686662453,"post_id":76441068,"comment_id":134827564,"body_markdown":"Can&#39;t you change it to static in the Android settings for the network connection? Another alternative would be to configure your DHCP server to reserve a fixed IP address for the MAC address so it always gets the same one.","body":"Can&#39;t you change it to static in the Android settings for the network connection? Another alternative would be to configure your DHCP server to reserve a fixed IP address for the MAC address so it always gets the same one."},{"owner":{"account_id":23571513,"reputation":1,"user_id":17611596,"display_name":"Chaithra "},"score":0,"creation_date":1686759674,"post_id":76441068,"comment_id":134844408,"body_markdown":"Hi @IanAbbott, In my system I can&#39;t able to give a direct dhcp commands to make it disable, If I tried to issue the direct dhcp commands its throwing the error like &quot;inaccessable or not found&quot;. How I can add dhcp utility to my Android device?","body":"Hi @IanAbbott, In my system I can&#39;t able to give a direct dhcp commands to make it disable, If I tried to issue the direct dhcp commands its throwing the error like &quot;inaccessable or not found&quot;. How I can add dhcp utility to my Android device?"},{"owner":{"account_id":5791001,"reputation":15534,"user_id":5264491,"display_name":"Ian Abbott"},"score":0,"creation_date":1686760560,"post_id":76441068,"comment_id":134844597,"body_markdown":"On my phone, I go to &#39;Settings&#39; -&gt; &#39;Network &amp; Internet&#39; -&gt; &#39;Internet&#39;. I don&#39;t have an Ethernet connection, but I press the gear icon for the Wi-Fi connection I am using to go to the &#39;Network details&#39; dialog for that connection. Then I press the pencil icon to edit the details. Then expand the &#39;Advanced options&#39; section. Then under &#39;IP settings&#39; it is possible to choose between &#39;DHCP&#39; or &#39;Static&#39;. Selecting &#39;Static&#39; allows the IP address, gateway, network prefix length, and DNS server addresses to be configured.","body":"On my phone, I go to &#39;Settings&#39; -&gt; &#39;Network &amp; Internet&#39; -&gt; &#39;Internet&#39;. I don&#39;t have an Ethernet connection, but I press the gear icon for the Wi-Fi connection I am using to go to the &#39;Network details&#39; dialog for that connection. Then I press the pencil icon to edit the details. Then expand the &#39;Advanced options&#39; section. Then under &#39;IP settings&#39; it is possible to choose between &#39;DHCP&#39; or &#39;Static&#39;. Selecting &#39;Static&#39; allows the IP address, gateway, network prefix length, and DNS server addresses to be configured."},{"owner":{"account_id":23571513,"reputation":1,"user_id":17611596,"display_name":"Chaithra "},"score":0,"creation_date":1686839098,"post_id":76441068,"comment_id":134856852,"body_markdown":"Hi, In the Issue that I have Mentioned, the DHCP not come into picture. Its Completely Statically communication establishment, I am able to set the static IP but once I made it DOWN and UP I can&#39;t able to see the IP that I have provided","body":"Hi, In the Issue that I have Mentioned, the DHCP not come into picture. Its Completely Statically communication establishment, I am able to set the static IP but once I made it DOWN and UP I can&#39;t able to see the IP that I have provided"},{"owner":{"account_id":23571513,"reputation":1,"user_id":17611596,"display_name":"Chaithra "},"score":0,"creation_date":1686839319,"post_id":76441068,"comment_id":134856854,"body_markdown":"Hi, In the Issue that I have Mentioned, the DHCP not come into picture. Its Completely Statically communication establishment, I am able to set the static IP but once I made it DOWN and UP I can&#39;t able to see the IP that I have provided","body":"Hi, In the Issue that I have Mentioned, the DHCP not come into picture. Its Completely Statically communication establishment, I am able to set the static IP but once I made it DOWN and UP I can&#39;t able to see the IP that I have provided"},{"owner":{"account_id":23571513,"reputation":1,"user_id":17611596,"display_name":"Chaithra "},"score":0,"creation_date":1687184741,"post_id":76441068,"comment_id":134897593,"body_markdown":"Hi,\n@Ian Abbott in this part I am Loading the Driver that Creates one interface node with no dynamic IP Address so DHCP not Came into picture, I can only able to set the static IP for that but its not persistent","body":"Hi, @Ian Abbott in this part I am Loading the Driver that Creates one interface node with no dynamic IP Address so DHCP not Came into picture, I can only able to set the static IP for that but its not persistent"}],"owner":{"account_id":23571513,"reputation":1,"user_id":17611596,"display_name":"Chaithra "},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686319789,"creation_date":1686319789,"question_id":76441068,"body_markdown":"I am having jetson AGX Board with the Ethernet PCIE Connection and Installed Android 10 with Lineage 17.1-OS and I have Loaded the Fir_Driver Module. Once,the module has been loaded the ethernet node (interface) will be created. If I set the Static IP for that node and trying to make it up and down the IP is getting lost its not persistant. \r\n\r\nHow I can set the permanent static IP for the Ethernet node over PCIE Connection, which retains the persistant IP when I make it UP and DOWN also?\r\n\r\nPlease, help me over to resolve the issue.\r\n\r\nThanks,\r\nChaithra\r\n","title":"How to set permanent static IP for Android 10 for the ethernet Over PCIE Connection?","body":"<p>I am having jetson AGX Board with the Ethernet PCIE Connection and Installed Android 10 with Lineage 17.1-OS and I have Loaded the Fir_Driver Module. Once,the module has been loaded the ethernet node (interface) will be created. If I set the Static IP for that node and trying to make it up and down the IP is getting lost its not persistant.</p>\n<p>How I can set the permanent static IP for the Ethernet node over PCIE Connection, which retains the persistant IP when I make it UP and DOWN also?</p>\n<p>Please, help me over to resolve the issue.</p>\n<p>Thanks,\nChaithra</p>\n"},{"tags":["java","testing","interface","junit5"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1686326179,"post_id":76441020,"comment_id":134788216,"body_markdown":"There is also an _abstract class_, and also just basic inheritance of a parent class.  You can have the parent class hold the logic and the sub-classes hold the data.","body":"There is also an <i>abstract class</i>, and also just basic inheritance of a parent class.  You can have the parent class hold the logic and the sub-classes hold the data."}],"owner":{"account_id":3716204,"reputation":45,"user_id":3092355,"display_name":"SenorPez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686319436,"creation_date":1686319436,"question_id":76441020,"body_markdown":"As part of my integration tests, I have 5-6 &quot;example&quot; objects that are used to verify the various parts of the software come together correctly. For each of those example objects, I&#39;d like to define a &quot;standard set&quot; of tests to run.\r\n\r\nHow do I enforce that those tests are always written? Is an interface defining the tests appropriate? Or is there a better way?","title":"Require a Defined Test Set In Java","body":"<p>As part of my integration tests, I have 5-6 &quot;example&quot; objects that are used to verify the various parts of the software come together correctly. For each of those example objects, I'd like to define a &quot;standard set&quot; of tests to run.</p>\n<p>How do I enforce that those tests are always written? Is an interface defining the tests appropriate? Or is there a better way?</p>\n"},{"tags":["java","spring-boot","api","amazon-ec2"],"comments":[{"owner":{"account_id":303420,"reputation":10129,"user_id":2378643,"display_name":"Anon Coward"},"score":0,"creation_date":1686326892,"post_id":76441008,"comment_id":134788388,"body_markdown":"Enough to ensure that someone else on the network can&#39;t intercept the secret?  Probably.  Enough to ensure a sufficiently motivated user can&#39;t intercept the secret?  [Absolutely not](https://security.stackexchange.com/questions/99952/how-to-intercepting-ios-https-traffic).","body":"Enough to ensure that someone else on the network can&#39;t intercept the secret?  Probably.  Enough to ensure a sufficiently motivated user can&#39;t intercept the secret?  <a href=\"https://security.stackexchange.com/questions/99952/how-to-intercepting-ios-https-traffic\">Absolutely not</a>."}],"owner":{"account_id":22467634,"reputation":1,"user_id":16668542,"display_name":"federzvz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686319342,"creation_date":1686319342,"question_id":76441008,"body_markdown":"Is it enough that my API is published on a server with HTTPS to be secure?\r\n\r\nI have an API built with JAVA + SpringBoot, it has the security of a SECRET, that is, for example, when I make a POST request from my mobile application, in the POST header I send a TOKEN which is a secret that in the backend (Java + SpringBoot) would be validating if the SECRET is correct.\r\n\r\nIt is then that I would like to know if by deploying my API on an AWS EC2 server which has HTTPS encryption, this would be enough so that my API requests cannot be inspected and that secret token is &quot;stolen&quot; giving them the green light to consume my API freely outside my mobile application.\r\n\r\nCurrently, how the API is built and since I am still working in localhost with the Backend in development mode, the requests to the backend go through HTTP (Not HTTPS) and I can inspect everything about the request to my API, it is then that I would like to encrypt all this and that the &quot;SECRET TOKEN&quot; cannot be visualized.\r\n\r\nI plan to make API requests from mobile applications made in React Native as well as from a web page.\r\n\r\nSo I wonder if deploying to an AWS EC2 server with HTTPS security would fix this.","title":"Is it enough that my SpringBoot API is published on a EC2 server with HTTPS to be secure?","body":"<p>Is it enough that my API is published on a server with HTTPS to be secure?</p>\n<p>I have an API built with JAVA + SpringBoot, it has the security of a SECRET, that is, for example, when I make a POST request from my mobile application, in the POST header I send a TOKEN which is a secret that in the backend (Java + SpringBoot) would be validating if the SECRET is correct.</p>\n<p>It is then that I would like to know if by deploying my API on an AWS EC2 server which has HTTPS encryption, this would be enough so that my API requests cannot be inspected and that secret token is &quot;stolen&quot; giving them the green light to consume my API freely outside my mobile application.</p>\n<p>Currently, how the API is built and since I am still working in localhost with the Backend in development mode, the requests to the backend go through HTTP (Not HTTPS) and I can inspect everything about the request to my API, it is then that I would like to encrypt all this and that the &quot;SECRET TOKEN&quot; cannot be visualized.</p>\n<p>I plan to make API requests from mobile applications made in React Native as well as from a web page.</p>\n<p>So I wonder if deploying to an AWS EC2 server with HTTPS security would fix this.</p>\n"},{"tags":["java","spring","swagger","openapi","swagger-2.0"],"comments":[{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":1,"creation_date":1670415166,"post_id":74716286,"comment_id":131870365,"body_markdown":"Do you want to get error message in the swagger UI or when actually using your API/service?","body":"Do you want to get error message in the swagger UI or when actually using your API/service?"},{"owner":{"account_id":2296144,"reputation":739,"user_id":2017536,"accept_rate":62,"display_name":"Mumzee"},"score":0,"creation_date":1670416016,"post_id":74716286,"comment_id":131870681,"body_markdown":"When actually using the API, basically the response of the API should have the error message.","body":"When actually using the API, basically the response of the API should have the error message."},{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1670416347,"post_id":74716286,"comment_id":131870819,"body_markdown":"What Java framework / middleware do you use?","body":"What Java framework / middleware do you use?"},{"owner":{"account_id":2296144,"reputation":739,"user_id":2017536,"accept_rate":62,"display_name":"Mumzee"},"score":0,"creation_date":1670416806,"post_id":74716286,"comment_id":131871003,"body_markdown":"Springboot version 2.7.5","body":"Springboot version 2.7.5"},{"owner":{"account_id":1762272,"reputation":303,"user_id":1609041,"accept_rate":75,"display_name":"Saad Khan"},"score":0,"creation_date":1698769772,"post_id":74716286,"comment_id":136446358,"body_markdown":"I am looking for a way to show an error message in the swagger UI when a pattern match fails. Any suggestions","body":"I am looking for a way to show an error message in the swagger UI when a pattern match fails. Any suggestions"}],"owner":{"account_id":2296144,"reputation":739,"user_id":2017536,"accept_rate":62,"display_name":"Mumzee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1151,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1686319166,"creation_date":1670413999,"question_id":74716286,"body_markdown":"I have a Swagger definition for a Rest API, with [regex patterns][1] for validation of fields in the request body. But when the validation fails, a default error message is thrown - \r\n`{field}: must match {regex pattern}`. With regex pattern in the error message, it makes less sense to the end user. How to customise this message preferably by using Swagger? I could add a handler in Java for 400 Bad request exception and handle it there, but that will be the last option, to modify java code. \r\n\r\n\r\n  [1]: https://swagger.io/docs/specification/data-models/data-types/#pattern","title":"Custom validation error message in Swagger","body":"<p>I have a Swagger definition for a Rest API, with <a href=\"https://swagger.io/docs/specification/data-models/data-types/#pattern\" rel=\"nofollow noreferrer\">regex patterns</a> for validation of fields in the request body. But when the validation fails, a default error message is thrown -\n<code>{field}: must match {regex pattern}</code>. With regex pattern in the error message, it makes less sense to the end user. How to customise this message preferably by using Swagger? I could add a handler in Java for 400 Bad request exception and handle it there, but that will be the last option, to modify java code.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9613,"page":379,"page_size":100}
